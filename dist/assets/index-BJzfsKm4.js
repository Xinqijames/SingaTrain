(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();/**
* @vue/shared v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function CI(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const $r={},Tv=[],Xu=()=>{},hV=()=>!1,Gw=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),kI=e=>e.startsWith("onUpdate:"),xo=Object.assign,II=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},_j=Object.prototype.hasOwnProperty,Er=(e,t)=>_j.call(e,t),Zn=Array.isArray,Sv=e=>h_(e)==="[object Map]",qw=e=>h_(e)==="[object Set]",XL=e=>h_(e)==="[object Date]",yj=e=>h_(e)==="[object RegExp]",_i=e=>typeof e=="function",es=e=>typeof e=="string",fu=e=>typeof e=="symbol",Pr=e=>e!==null&&typeof e=="object",fV=e=>(Pr(e)||_i(e))&&_i(e.then)&&_i(e.catch),mV=Object.prototype.toString,h_=e=>mV.call(e),bj=e=>h_(e).slice(8,-1),pV=e=>h_(e)==="[object Object]",AI=e=>es(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Ky=CI(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Kw=e=>{const t=Object.create(null);return(n=>t[n]||(t[n]=e(n)))},xj=/-\w/g,ll=Kw(e=>e.replace(xj,t=>t.slice(1).toUpperCase())),wj=/\B([A-Z])/g,Qp=Kw(e=>e.replace(wj,"-$1").toLowerCase()),hd=Kw(e=>e.charAt(0).toUpperCase()+e.slice(1)),bE=Kw(e=>e?`on${hd(e)}`:""),Rf=(e,t)=>!Object.is(e,t),Ev=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},gV=(e,t,n,i=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:i,value:n})},R1=e=>{const t=parseFloat(e);return isNaN(t)?e:t},Tj=e=>{const t=es(e)?Number(e):NaN;return isNaN(t)?e:t};let YL;const Xw=()=>YL||(YL=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Xt(e){if(Zn(e)){const t={};for(let n=0;n<e.length;n++){const i=e[n],r=es(i)?kj(i):Xt(i);if(r)for(const a in r)t[a]=r[a]}return t}else if(es(e)||Pr(e))return e}const Sj=/;(?![^(]*\))/g,Ej=/:([^]+)/,Cj=/\/\*[^]*?\*\//g;function kj(e){const t={};return e.replace(Cj,"").split(Sj).forEach(n=>{if(n){const i=n.split(Ej);i.length>1&&(t[i[0].trim()]=i[1].trim())}}),t}function _t(e){let t="";if(es(e))t=e;else if(Zn(e))for(let n=0;n<e.length;n++){const i=_t(e[n]);i&&(t+=i+" ")}else if(Pr(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}function Ij(e){if(!e)return null;let{class:t,style:n}=e;return t&&!es(t)&&(e.class=_t(t)),n&&(e.style=Xt(n)),e}const Aj="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Pj=CI(Aj);function vV(e){return!!e||e===""}function Mj(e,t){if(e.length!==t.length)return!1;let n=!0;for(let i=0;n&&i<e.length;i++)n=Yw(e[i],t[i]);return n}function Yw(e,t){if(e===t)return!0;let n=XL(e),i=XL(t);if(n||i)return n&&i?e.getTime()===t.getTime():!1;if(n=fu(e),i=fu(t),n||i)return e===t;if(n=Zn(e),i=Zn(t),n||i)return n&&i?Mj(e,t):!1;if(n=Pr(e),i=Pr(t),n||i){if(!n||!i)return!1;const r=Object.keys(e).length,a=Object.keys(t).length;if(r!==a)return!1;for(const l in e){const h=e.hasOwnProperty(l),s=t.hasOwnProperty(l);if(h&&!s||!h&&s||!Yw(e[l],t[l]))return!1}}return String(e)===String(t)}function Dj(e,t){return e.findIndex(n=>Yw(n,t))}const _V=e=>!!(e&&e.__v_isRef===!0),en=e=>es(e)?e:e==null?"":Zn(e)||Pr(e)&&(e.toString===mV||!_i(e.toString))?_V(e)?en(e.value):JSON.stringify(e,yV,2):String(e),yV=(e,t)=>_V(t)?yV(e,t.value):Sv(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[i,r],a)=>(n[xE(i,a)+" =>"]=r,n),{})}:qw(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>xE(n))}:fu(t)?xE(t):Pr(t)&&!Zn(t)&&!pV(t)?String(t):t,xE=(e,t="")=>{var n;return fu(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ma;class bV{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Ma,!t&&Ma&&(this.index=(Ma.scopes||(Ma.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=Ma;try{return Ma=this,t()}finally{Ma=n}}}on(){++this._on===1&&(this.prevScope=Ma,Ma=this)}off(){this._on>0&&--this._on===0&&(Ma=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,i;for(n=0,i=this.effects.length;n<i;n++)this.effects[n].stop();for(this.effects.length=0,n=0,i=this.cleanups.length;n<i;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,i=this.scopes.length;n<i;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function Fv(e){return new bV(e)}function xV(){return Ma}function ao(e,t=!1){Ma&&Ma.cleanups.push(e)}let qr;const wE=new WeakSet;class wV{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Ma&&Ma.active&&Ma.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,wE.has(this)&&(wE.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||SV(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,ZL(this),EV(this);const t=qr,n=du;qr=this,du=!0;try{return this.fn()}finally{CV(this),qr=t,du=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)DI(t);this.deps=this.depsTail=void 0,ZL(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?wE.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){PC(this)&&this.run()}get dirty(){return PC(this)}}let TV=0,Xy,Yy;function SV(e,t=!1){if(e.flags|=8,t){e.next=Yy,Yy=e;return}e.next=Xy,Xy=e}function PI(){TV++}function MI(){if(--TV>0)return;if(Yy){let t=Yy;for(Yy=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;Xy;){let t=Xy;for(Xy=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(i){e||(e=i)}t=n}}if(e)throw e}function EV(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function CV(e){let t,n=e.depsTail,i=n;for(;i;){const r=i.prevDep;i.version===-1?(i===n&&(n=r),DI(i),Lj(i)):t=i,i.dep.activeLink=i.prevActiveLink,i.prevActiveLink=void 0,i=r}e.deps=t,e.depsTail=n}function PC(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(kV(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function kV(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===v0)||(e.globalVersion=v0,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!PC(e))))return;e.flags|=2;const t=e.dep,n=qr,i=du;qr=e,du=!0;try{EV(e);const r=e.fn(e._value);(t.version===0||Rf(r,e._value))&&(e.flags|=128,e._value=r,t.version++)}catch(r){throw t.version++,r}finally{qr=n,du=i,CV(e),e.flags&=-3}}function DI(e,t=!1){const{dep:n,prevSub:i,nextSub:r}=e;if(i&&(i.nextSub=r,e.prevSub=void 0),r&&(r.prevSub=i,e.nextSub=void 0),n.subs===e&&(n.subs=i,!i&&n.computed)){n.computed.flags&=-5;for(let a=n.computed.deps;a;a=a.nextDep)DI(a,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function Lj(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let du=!0;const IV=[];function fh(){IV.push(du),du=!1}function mh(){const e=IV.pop();du=e===void 0?!0:e}function ZL(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=qr;qr=void 0;try{t()}finally{qr=n}}}let v0=0;class Rj{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class LI{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!qr||!du||qr===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==qr)n=this.activeLink=new Rj(qr,this),qr.deps?(n.prevDep=qr.depsTail,qr.depsTail.nextDep=n,qr.depsTail=n):qr.deps=qr.depsTail=n,AV(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const i=n.nextDep;i.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=i),n.prevDep=qr.depsTail,n.nextDep=void 0,qr.depsTail.nextDep=n,qr.depsTail=n,qr.deps===n&&(qr.deps=i)}return n}trigger(t){this.version++,v0++,this.notify(t)}notify(t){PI();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{MI()}}}function AV(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let i=t.deps;i;i=i.nextDep)AV(i)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const O1=new WeakMap,bp=Symbol(""),MC=Symbol(""),_0=Symbol("");function Ra(e,t,n){if(du&&qr){let i=O1.get(e);i||O1.set(e,i=new Map);let r=i.get(n);r||(i.set(n,r=new LI),r.map=i,r.key=n),r.track()}}function rh(e,t,n,i,r,a){const l=O1.get(e);if(!l){v0++;return}const h=s=>{s&&s.trigger()};if(PI(),t==="clear")l.forEach(h);else{const s=Zn(e),p=s&&AI(n);if(s&&n==="length"){const _=Number(i);l.forEach((x,T)=>{(T==="length"||T===_0||!fu(T)&&T>=_)&&h(x)})}else switch((n!==void 0||l.has(void 0))&&h(l.get(n)),p&&h(l.get(_0)),t){case"add":s?p&&h(l.get("length")):(h(l.get(bp)),Sv(e)&&h(l.get(MC)));break;case"delete":s||(h(l.get(bp)),Sv(e)&&h(l.get(MC)));break;case"set":Sv(e)&&h(l.get(bp));break}}MI()}function Oj(e,t){const n=O1.get(e);return n&&n.get(t)}function iv(e){const t=Un(e);return t===e?t:(Ra(t,"iterate",_0),Fc(e)?t:t.map(sa))}function Zw(e){return Ra(e=Un(e),"iterate",_0),e}const Vj={__proto__:null,[Symbol.iterator](){return TE(this,Symbol.iterator,sa)},concat(...e){return iv(this).concat(...e.map(t=>Zn(t)?iv(t):t))},entries(){return TE(this,"entries",e=>(e[1]=sa(e[1]),e))},every(e,t){return Gd(this,"every",e,t,void 0,arguments)},filter(e,t){return Gd(this,"filter",e,t,n=>n.map(sa),arguments)},find(e,t){return Gd(this,"find",e,t,sa,arguments)},findIndex(e,t){return Gd(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Gd(this,"findLast",e,t,sa,arguments)},findLastIndex(e,t){return Gd(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Gd(this,"forEach",e,t,void 0,arguments)},includes(...e){return SE(this,"includes",e)},indexOf(...e){return SE(this,"indexOf",e)},join(e){return iv(this).join(e)},lastIndexOf(...e){return SE(this,"lastIndexOf",e)},map(e,t){return Gd(this,"map",e,t,void 0,arguments)},pop(){return xy(this,"pop")},push(...e){return xy(this,"push",e)},reduce(e,...t){return JL(this,"reduce",e,t)},reduceRight(e,...t){return JL(this,"reduceRight",e,t)},shift(){return xy(this,"shift")},some(e,t){return Gd(this,"some",e,t,void 0,arguments)},splice(...e){return xy(this,"splice",e)},toReversed(){return iv(this).toReversed()},toSorted(e){return iv(this).toSorted(e)},toSpliced(...e){return iv(this).toSpliced(...e)},unshift(...e){return xy(this,"unshift",e)},values(){return TE(this,"values",sa)}};function TE(e,t,n){const i=Zw(e),r=i[t]();return i!==e&&!Fc(e)&&(r._next=r.next,r.next=()=>{const a=r._next();return a.done||(a.value=n(a.value)),a}),r}const Bj=Array.prototype;function Gd(e,t,n,i,r,a){const l=Zw(e),h=l!==e&&!Fc(e),s=l[t];if(s!==Bj[t]){const x=s.apply(e,a);return h?sa(x):x}let p=n;l!==e&&(h?p=function(x,T){return n.call(this,sa(x),T,e)}:n.length>2&&(p=function(x,T){return n.call(this,x,T,e)}));const _=s.call(l,p,i);return h&&r?r(_):_}function JL(e,t,n,i){const r=Zw(e);let a=n;return r!==e&&(Fc(e)?n.length>3&&(a=function(l,h,s){return n.call(this,l,h,s,e)}):a=function(l,h,s){return n.call(this,l,sa(h),s,e)}),r[t](a,...i)}function SE(e,t,n){const i=Un(e);Ra(i,"iterate",_0);const r=i[t](...n);return(r===-1||r===!1)&&Jw(n[0])?(n[0]=Un(n[0]),i[t](...n)):r}function xy(e,t,n=[]){fh(),PI();const i=Un(e)[t].apply(e,n);return MI(),mh(),i}const Fj=CI("__proto__,__v_isRef,__isVue"),PV=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(fu));function zj(e){fu(e)||(e=String(e));const t=Un(this);return Ra(t,"has",e),t.hasOwnProperty(e)}class MV{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,i){if(n==="__v_skip")return t.__v_skip;const r=this._isReadonly,a=this._isShallow;if(n==="__v_isReactive")return!r;if(n==="__v_isReadonly")return r;if(n==="__v_isShallow")return a;if(n==="__v_raw")return i===(r?a?Xj:OV:a?RV:LV).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(i)?t:void 0;const l=Zn(t);if(!r){let s;if(l&&(s=Vj[n]))return s;if(n==="hasOwnProperty")return zj}const h=Reflect.get(t,n,Vs(t)?t:i);if((fu(n)?PV.has(n):Fj(n))||(r||Ra(t,"get",n),a))return h;if(Vs(h)){const s=l&&AI(n)?h:h.value;return r&&Pr(s)?Vp(s):s}return Pr(h)?r?Vp(h):so(h):h}}class DV extends MV{constructor(t=!1){super(!1,t)}set(t,n,i,r){let a=t[n];if(!this._isShallow){const s=jf(a);if(!Fc(i)&&!jf(i)&&(a=Un(a),i=Un(i)),!Zn(t)&&Vs(a)&&!Vs(i))return s||(a.value=i),!0}const l=Zn(t)&&AI(n)?Number(n)<t.length:Er(t,n),h=Reflect.set(t,n,i,Vs(t)?t:r);return t===Un(r)&&(l?Rf(i,a)&&rh(t,"set",n,i):rh(t,"add",n,i)),h}deleteProperty(t,n){const i=Er(t,n);t[n];const r=Reflect.deleteProperty(t,n);return r&&i&&rh(t,"delete",n,void 0),r}has(t,n){const i=Reflect.has(t,n);return(!fu(n)||!PV.has(n))&&Ra(t,"has",n),i}ownKeys(t){return Ra(t,"iterate",Zn(t)?"length":bp),Reflect.ownKeys(t)}}class Nj extends MV{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const $j=new DV,Uj=new Nj,jj=new DV(!0);const DC=e=>e,Ax=e=>Reflect.getPrototypeOf(e);function Wj(e,t,n){return function(...i){const r=this.__v_raw,a=Un(r),l=Sv(a),h=e==="entries"||e===Symbol.iterator&&l,s=e==="keys"&&l,p=r[e](...i),_=n?DC:t?V1:sa;return!t&&Ra(a,"iterate",s?MC:bp),{next(){const{value:x,done:T}=p.next();return T?{value:x,done:T}:{value:h?[_(x[0]),_(x[1])]:_(x),done:T}},[Symbol.iterator](){return this}}}}function Px(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Hj(e,t){const n={get(r){const a=this.__v_raw,l=Un(a),h=Un(r);e||(Rf(r,h)&&Ra(l,"get",r),Ra(l,"get",h));const{has:s}=Ax(l),p=t?DC:e?V1:sa;if(s.call(l,r))return p(a.get(r));if(s.call(l,h))return p(a.get(h));a!==l&&a.get(r)},get size(){const r=this.__v_raw;return!e&&Ra(Un(r),"iterate",bp),r.size},has(r){const a=this.__v_raw,l=Un(a),h=Un(r);return e||(Rf(r,h)&&Ra(l,"has",r),Ra(l,"has",h)),r===h?a.has(r):a.has(r)||a.has(h)},forEach(r,a){const l=this,h=l.__v_raw,s=Un(h),p=t?DC:e?V1:sa;return!e&&Ra(s,"iterate",bp),h.forEach((_,x)=>r.call(a,p(_),p(x),l))}};return xo(n,e?{add:Px("add"),set:Px("set"),delete:Px("delete"),clear:Px("clear")}:{add(r){!t&&!Fc(r)&&!jf(r)&&(r=Un(r));const a=Un(this);return Ax(a).has.call(a,r)||(a.add(r),rh(a,"add",r,r)),this},set(r,a){!t&&!Fc(a)&&!jf(a)&&(a=Un(a));const l=Un(this),{has:h,get:s}=Ax(l);let p=h.call(l,r);p||(r=Un(r),p=h.call(l,r));const _=s.call(l,r);return l.set(r,a),p?Rf(a,_)&&rh(l,"set",r,a):rh(l,"add",r,a),this},delete(r){const a=Un(this),{has:l,get:h}=Ax(a);let s=l.call(a,r);s||(r=Un(r),s=l.call(a,r)),h&&h.call(a,r);const p=a.delete(r);return s&&rh(a,"delete",r,void 0),p},clear(){const r=Un(this),a=r.size!==0,l=r.clear();return a&&rh(r,"clear",void 0,void 0),l}}),["keys","values","entries",Symbol.iterator].forEach(r=>{n[r]=Wj(r,e,t)}),n}function RI(e,t){const n=Hj(e,t);return(i,r,a)=>r==="__v_isReactive"?!e:r==="__v_isReadonly"?e:r==="__v_raw"?i:Reflect.get(Er(n,r)&&r in i?n:i,r,a)}const Gj={get:RI(!1,!1)},qj={get:RI(!1,!0)},Kj={get:RI(!0,!1)};const LV=new WeakMap,RV=new WeakMap,OV=new WeakMap,Xj=new WeakMap;function Yj(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Zj(e){return e.__v_skip||!Object.isExtensible(e)?0:Yj(bj(e))}function so(e){return jf(e)?e:OI(e,!1,$j,Gj,LV)}function Jj(e){return OI(e,!1,jj,qj,RV)}function Vp(e){return OI(e,!0,Uj,Kj,OV)}function OI(e,t,n,i,r){if(!Pr(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const a=Zj(e);if(a===0)return e;const l=r.get(e);if(l)return l;const h=new Proxy(e,a===2?i:n);return r.set(e,h),h}function xp(e){return jf(e)?xp(e.__v_raw):!!(e&&e.__v_isReactive)}function jf(e){return!!(e&&e.__v_isReadonly)}function Fc(e){return!!(e&&e.__v_isShallow)}function Jw(e){return e?!!e.__v_raw:!1}function Un(e){const t=e&&e.__v_raw;return t?Un(t):e}function VV(e){return!Er(e,"__v_skip")&&Object.isExtensible(e)&&gV(e,"__v_skip",!0),e}const sa=e=>Pr(e)?so(e):e,V1=e=>Pr(e)?Vp(e):e;function Vs(e){return e?e.__v_isRef===!0:!1}function tt(e){return BV(e,!1)}function tn(e){return BV(e,!0)}function BV(e,t){return Vs(e)?e:new Qj(e,t)}class Qj{constructor(t,n){this.dep=new LI,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:Un(t),this._value=n?t:sa(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,i=this.__v_isShallow||Fc(t)||jf(t);t=i?t:Un(t),Rf(t,n)&&(this._rawValue=t,this._value=i?t:sa(t),this.dep.trigger())}}function bi(e){return Vs(e)?e.value:e}function Ua(e){return _i(e)?e():bi(e)}const eW={get:(e,t,n)=>t==="__v_raw"?e:bi(Reflect.get(e,t,n)),set:(e,t,n,i)=>{const r=e[t];return Vs(r)&&!Vs(n)?(r.value=n,!0):Reflect.set(e,t,n,i)}};function FV(e){return xp(e)?e:new Proxy(e,eW)}function f_(e){const t=Zn(e)?new Array(e.length):{};for(const n in e)t[n]=zV(e,n);return t}class tW{constructor(t,n,i){this._object=t,this._key=n,this._defaultValue=i,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return Oj(Un(this._object),this._key)}}class nW{constructor(t){this._getter=t,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function $e(e,t,n){return Vs(e)?e:_i(e)?new nW(e):Pr(e)&&arguments.length>1?zV(e,t,n):tt(e)}function zV(e,t,n){const i=e[t];return Vs(i)?i:new tW(e,t,n)}class iW{constructor(t,n,i){this.fn=t,this.setter=n,this._value=void 0,this.dep=new LI(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=v0-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=i}notify(){if(this.flags|=16,!(this.flags&8)&&qr!==this)return SV(this,!0),!0}get value(){const t=this.dep.track();return kV(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function rW(e,t,n=!1){let i,r;return _i(e)?i=e:(i=e.get,r=e.set),new iW(i,r,n)}const Mx={},B1=new WeakMap;let cp;function sW(e,t=!1,n=cp){if(n){let i=B1.get(n);i||B1.set(n,i=[]),i.push(e)}}function oW(e,t,n=$r){const{immediate:i,deep:r,once:a,scheduler:l,augmentJob:h,call:s}=n,p=Y=>r?Y:Fc(Y)||r===!1||r===0?sh(Y,1):sh(Y);let _,x,T,k,A=!1,M=!1;if(Vs(e)?(x=()=>e.value,A=Fc(e)):xp(e)?(x=()=>p(e),A=!0):Zn(e)?(M=!0,A=e.some(Y=>xp(Y)||Fc(Y)),x=()=>e.map(Y=>{if(Vs(Y))return Y.value;if(xp(Y))return p(Y);if(_i(Y))return s?s(Y,2):Y()})):_i(e)?t?x=s?()=>s(e,2):e:x=()=>{if(T){fh();try{T()}finally{mh()}}const Y=cp;cp=_;try{return s?s(e,3,[k]):e(k)}finally{cp=Y}}:x=Xu,t&&r){const Y=x,J=r===!0?1/0:r;x=()=>sh(Y(),J)}const R=xV(),F=()=>{_.stop(),R&&R.active&&II(R.effects,_)};if(a&&t){const Y=t;t=(...J)=>{Y(...J),F()}}let z=M?new Array(e.length).fill(Mx):Mx;const G=Y=>{if(!(!(_.flags&1)||!_.dirty&&!Y))if(t){const J=_.run();if(r||A||(M?J.some((re,X)=>Rf(re,z[X])):Rf(J,z))){T&&T();const re=cp;cp=_;try{const X=[J,z===Mx?void 0:M&&z[0]===Mx?[]:z,k];z=J,s?s(t,3,X):t(...X)}finally{cp=re}}}else _.run()};return h&&h(G),_=new wV(x),_.scheduler=l?()=>l(G,!1):G,k=Y=>sW(Y,!1,_),T=_.onStop=()=>{const Y=B1.get(_);if(Y){if(s)s(Y,4);else for(const J of Y)J();B1.delete(_)}},t?i?G(!0):z=_.run():l?l(G.bind(null,!0),!0):_.run(),F.pause=_.pause.bind(_),F.resume=_.resume.bind(_),F.stop=F,F}function sh(e,t=1/0,n){if(t<=0||!Pr(e)||e.__v_skip||(n=n||new Map,(n.get(e)||0)>=t))return e;if(n.set(e,t),t--,Vs(e))sh(e.value,t,n);else if(Zn(e))for(let i=0;i<e.length;i++)sh(e[i],t,n);else if(qw(e)||Sv(e))e.forEach(i=>{sh(i,t,n)});else if(pV(e)){for(const i in e)sh(e[i],t,n);for(const i of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,i)&&sh(e[i],t,n)}return e}/**
* @vue/runtime-core v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function db(e,t,n,i){try{return i?e(...i):e()}catch(r){Qw(r,t,n)}}function mu(e,t,n,i){if(_i(e)){const r=db(e,t,n,i);return r&&fV(r)&&r.catch(a=>{Qw(a,t,n)}),r}if(Zn(e)){const r=[];for(let a=0;a<e.length;a++)r.push(mu(e[a],t,n,i));return r}}function Qw(e,t,n,i=!0){const r=t?t.vnode:null,{errorHandler:a,throwUnhandledErrorInProduction:l}=t&&t.appContext.config||$r;if(t){let h=t.parent;const s=t.proxy,p=`https://vuejs.org/error-reference/#runtime-${n}`;for(;h;){const _=h.ec;if(_){for(let x=0;x<_.length;x++)if(_[x](e,s,p)===!1)return}h=h.parent}if(a){fh(),db(a,null,10,[e,s,p]),mh();return}}aW(e,n,r,i,l)}function aW(e,t,n,i=!0,r=!1){if(r)throw e;console.error(e)}const ol=[];let Uu=-1;const Cv=[];let gf=null,dv=0;const NV=Promise.resolve();let F1=null;function Hn(e){const t=F1||NV;return e?t.then(this?e.bind(this):e):t}function lW(e){let t=Uu+1,n=ol.length;for(;t<n;){const i=t+n>>>1,r=ol[i],a=y0(r);a<e||a===e&&r.flags&2?t=i+1:n=i}return t}function VI(e){if(!(e.flags&1)){const t=y0(e),n=ol[ol.length-1];!n||!(e.flags&2)&&t>=y0(n)?ol.push(e):ol.splice(lW(t),0,e),e.flags|=1,$V()}}function $V(){F1||(F1=NV.then(jV))}function cW(e){Zn(e)?Cv.push(...e):gf&&e.id===-1?gf.splice(dv+1,0,e):e.flags&1||(Cv.push(e),e.flags|=1),$V()}function QL(e,t,n=Uu+1){for(;n<ol.length;n++){const i=ol[n];if(i&&i.flags&2){if(e&&i.id!==e.uid)continue;ol.splice(n,1),n--,i.flags&4&&(i.flags&=-2),i(),i.flags&4||(i.flags&=-2)}}}function UV(e){if(Cv.length){const t=[...new Set(Cv)].sort((n,i)=>y0(n)-y0(i));if(Cv.length=0,gf){gf.push(...t);return}for(gf=t,dv=0;dv<gf.length;dv++){const n=gf[dv];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}gf=null,dv=0}}const y0=e=>e.id==null?e.flags&2?-1:1/0:e.id;function jV(e){try{for(Uu=0;Uu<ol.length;Uu++){const t=ol[Uu];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),db(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Uu<ol.length;Uu++){const t=ol[Uu];t&&(t.flags&=-2)}Uu=-1,ol.length=0,UV(),F1=null,(ol.length||Cv.length)&&jV()}}let aa=null,WV=null;function z1(e){const t=aa;return aa=e,WV=e&&e.type.__scopeId||null,t}function vi(e,t=aa,n){if(!t||e._n)return e;const i=(...r)=>{i._d&&W1(-1);const a=z1(t);let l;try{l=e(...r)}finally{z1(a),i._d&&W1(1)}return l};return i._n=!0,i._c=!0,i._d=!0,i}function Li(e,t){if(aa===null)return e;const n=sT(aa),i=e.dirs||(e.dirs=[]);for(let r=0;r<t.length;r++){let[a,l,h,s=$r]=t[r];a&&(_i(a)&&(a={mounted:a,updated:a}),a.deep&&sh(l),i.push({dir:a,instance:n,value:l,oldValue:void 0,arg:h,modifiers:s}))}return e}function Jm(e,t,n,i){const r=e.dirs,a=t&&t.dirs;for(let l=0;l<r.length;l++){const h=r[l];a&&(h.oldValue=a[l].value);let s=h.dir[i];s&&(fh(),mu(s,n,8,[e.el,h,e,t]),mh())}}const HV=Symbol("_vte"),GV=e=>e.__isTeleport,Zy=e=>e&&(e.disabled||e.disabled===""),e3=e=>e&&(e.defer||e.defer===""),t3=e=>typeof SVGElement<"u"&&e instanceof SVGElement,n3=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,LC=(e,t)=>{const n=e&&e.to;return es(n)?t?t(n):null:n},qV={name:"Teleport",__isTeleport:!0,process(e,t,n,i,r,a,l,h,s,p){const{mc:_,pc:x,pbc:T,o:{insert:k,querySelector:A,createText:M,createComment:R}}=p,F=Zy(t.props);let{shapeFlag:z,children:G,dynamicChildren:Y}=t;if(e==null){const J=t.el=M(""),re=t.anchor=M("");k(J,n,i),k(re,n,i);const X=(H,W)=>{z&16&&_(G,H,W,r,a,l,h,s)},U=()=>{const H=t.target=LC(t.props,A),W=KV(H,t,M,k);H&&(l!=="svg"&&t3(H)?l="svg":l!=="mathml"&&n3(H)&&(l="mathml"),r&&r.isCE&&(r.ce._teleportTargets||(r.ce._teleportTargets=new Set)).add(H),F||(X(H,W),u1(t,!1)))};F&&(X(n,re),u1(t,!0)),e3(t.props)?(t.el.__isMounted=!1,po(()=>{U(),delete t.el.__isMounted},a)):U()}else{if(e3(t.props)&&e.el.__isMounted===!1){po(()=>{qV.process(e,t,n,i,r,a,l,h,s,p)},a);return}t.el=e.el,t.targetStart=e.targetStart;const J=t.anchor=e.anchor,re=t.target=e.target,X=t.targetAnchor=e.targetAnchor,U=Zy(e.props),H=U?n:re,W=U?J:X;if(l==="svg"||t3(re)?l="svg":(l==="mathml"||n3(re))&&(l="mathml"),Y?(T(e.dynamicChildren,Y,H,r,a,l,h),UI(e,t,!0)):s||x(e,t,H,W,r,a,l,h,!1),F)U?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):Dx(t,n,J,p,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const ie=t.target=LC(t.props,A);ie&&Dx(t,ie,null,p,0)}else U&&Dx(t,re,X,p,1);u1(t,F)}},remove(e,t,n,{um:i,o:{remove:r}},a){const{shapeFlag:l,children:h,anchor:s,targetStart:p,targetAnchor:_,target:x,props:T}=e;if(x&&(r(p),r(_)),a&&r(s),l&16){const k=a||!Zy(T);for(let A=0;A<h.length;A++){const M=h[A];i(M,t,n,k,!!M.dynamicChildren)}}},move:Dx,hydrate:uW};function Dx(e,t,n,{o:{insert:i},m:r},a=2){a===0&&i(e.targetAnchor,t,n);const{el:l,anchor:h,shapeFlag:s,children:p,props:_}=e,x=a===2;if(x&&i(l,t,n),(!x||Zy(_))&&s&16)for(let T=0;T<p.length;T++)r(p[T],t,n,2);x&&i(h,t,n)}function uW(e,t,n,i,r,a,{o:{nextSibling:l,parentNode:h,querySelector:s,insert:p,createText:_}},x){function T(M,R,F,z){R.anchor=x(l(M),R,h(M),n,i,r,a),R.targetStart=F,R.targetAnchor=z}const k=t.target=LC(t.props,s),A=Zy(t.props);if(k){const M=k._lpa||k.firstChild;if(t.shapeFlag&16)if(A)T(e,t,M,M&&l(M));else{t.anchor=l(e);let R=M;for(;R;){if(R&&R.nodeType===8){if(R.data==="teleport start anchor")t.targetStart=R;else if(R.data==="teleport anchor"){t.targetAnchor=R,k._lpa=t.targetAnchor&&l(t.targetAnchor);break}}R=l(R)}t.targetAnchor||KV(k,t,_,p),x(M&&l(M),t,k,n,i,r,a)}u1(t,A)}else A&&t.shapeFlag&16&&T(e,t,e,l(e));return t.anchor&&l(t.anchor)}const dW=qV;function u1(e,t){const n=e.ctx;if(n&&n.ut){let i,r;for(t?(i=e.el,r=e.anchor):(i=e.targetStart,r=e.targetAnchor);i&&i!==r;)i.nodeType===1&&i.setAttribute("data-v-owner",n.uid),i=i.nextSibling;n.ut()}}function KV(e,t,n,i){const r=t.targetStart=n(""),a=t.targetAnchor=n("");return r[HV]=a,e&&(i(r,e),i(a,e)),a}const eh=Symbol("_leaveCb"),Lx=Symbol("_enterCb");function XV(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Mr(()=>{e.isMounted=!0}),Ur(()=>{e.isUnmounting=!0}),e}const Ic=[Function,Array],YV={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Ic,onEnter:Ic,onAfterEnter:Ic,onEnterCancelled:Ic,onBeforeLeave:Ic,onLeave:Ic,onAfterLeave:Ic,onLeaveCancelled:Ic,onBeforeAppear:Ic,onAppear:Ic,onAfterAppear:Ic,onAppearCancelled:Ic},ZV=e=>{const t=e.subTree;return t.component?ZV(t.component):t},hW={name:"BaseTransition",props:YV,setup(e,{slots:t}){const n=p_(),i=XV();return()=>{const r=t.default&&BI(t.default(),!0);if(!r||!r.length)return;const a=JV(r),l=Un(e),{mode:h}=l;if(i.isLeaving)return EE(a);const s=i3(a);if(!s)return EE(a);let p=b0(s,l,i,n,x=>p=x);s.type!==Bo&&Wf(s,p);let _=n.subTree&&i3(n.subTree);if(_&&_.type!==Bo&&!bf(_,s)&&ZV(n).type!==Bo){let x=b0(_,l,i,n);if(Wf(_,x),h==="out-in"&&s.type!==Bo)return i.isLeaving=!0,x.afterLeave=()=>{i.isLeaving=!1,n.job.flags&8||n.update(),delete x.afterLeave,_=void 0},EE(a);h==="in-out"&&s.type!==Bo?x.delayLeave=(T,k,A)=>{const M=QV(i,_);M[String(_.key)]=_,T[eh]=()=>{k(),T[eh]=void 0,delete p.delayedLeave,_=void 0},p.delayedLeave=()=>{A(),delete p.delayedLeave,_=void 0}}:_=void 0}else _&&(_=void 0);return a}}};function JV(e){let t=e[0];if(e.length>1){for(const n of e)if(n.type!==Bo){t=n;break}}return t}const fW=hW;function QV(e,t){const{leavingVNodes:n}=e;let i=n.get(t.type);return i||(i=Object.create(null),n.set(t.type,i)),i}function b0(e,t,n,i,r){const{appear:a,mode:l,persisted:h=!1,onBeforeEnter:s,onEnter:p,onAfterEnter:_,onEnterCancelled:x,onBeforeLeave:T,onLeave:k,onAfterLeave:A,onLeaveCancelled:M,onBeforeAppear:R,onAppear:F,onAfterAppear:z,onAppearCancelled:G}=t,Y=String(e.key),J=QV(n,e),re=(H,W)=>{H&&mu(H,i,9,W)},X=(H,W)=>{const ie=W[1];re(H,W),Zn(H)?H.every(Q=>Q.length<=1)&&ie():H.length<=1&&ie()},U={mode:l,persisted:h,beforeEnter(H){let W=s;if(!n.isMounted)if(a)W=R||s;else return;H[eh]&&H[eh](!0);const ie=J[Y];ie&&bf(e,ie)&&ie.el[eh]&&ie.el[eh](),re(W,[H])},enter(H){let W=p,ie=_,Q=x;if(!n.isMounted)if(a)W=F||p,ie=z||_,Q=G||x;else return;let te=!1;const ke=H[Lx]=Re=>{te||(te=!0,Re?re(Q,[H]):re(ie,[H]),U.delayedLeave&&U.delayedLeave(),H[Lx]=void 0)};W?X(W,[H,ke]):ke()},leave(H,W){const ie=String(e.key);if(H[Lx]&&H[Lx](!0),n.isUnmounting)return W();re(T,[H]);let Q=!1;const te=H[eh]=ke=>{Q||(Q=!0,W(),ke?re(M,[H]):re(A,[H]),H[eh]=void 0,J[ie]===e&&delete J[ie])};J[ie]=e,k?X(k,[H,te]):te()},clone(H){const W=b0(H,t,n,i,r);return r&&r(W),W}};return U}function EE(e){if(eT(e))return e=rd(e),e.children=null,e}function i3(e){if(!eT(e))return GV(e.type)&&e.children?JV(e.children):e;if(e.component)return e.component.subTree;const{shapeFlag:t,children:n}=e;if(n){if(t&16)return n[0];if(t&32&&_i(n.default))return n.default()}}function Wf(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Wf(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function BI(e,t=!1,n){let i=[],r=0;for(let a=0;a<e.length;a++){let l=e[a];const h=n==null?l.key:String(n)+String(l.key!=null?l.key:a);l.type===an?(l.patchFlag&128&&r++,i=i.concat(BI(l.children,t,h))):(t||l.type!==Bo)&&i.push(h!=null?rd(l,{key:h}):l)}if(r>1)for(let a=0;a<i.length;a++)i[a].patchFlag=-2;return i}function eB(e,t){return _i(e)?xo({name:e.name},t,{setup:e}):e}function ha(){const e=p_();return e?(e.appContext.config.idPrefix||"v")+"-"+e.ids[0]+e.ids[1]++:""}function tB(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const N1=new WeakMap;function Jy(e,t,n,i,r=!1){if(Zn(e)){e.forEach((A,M)=>Jy(A,t&&(Zn(t)?t[M]:t),n,i,r));return}if(wp(i)&&!r){i.shapeFlag&512&&i.type.__asyncResolved&&i.component.subTree.component&&Jy(e,t,n,i.component.subTree);return}const a=i.shapeFlag&4?sT(i.component):i.el,l=r?null:a,{i:h,r:s}=e,p=t&&t.r,_=h.refs===$r?h.refs={}:h.refs,x=h.setupState,T=Un(x),k=x===$r?hV:A=>Er(T,A);if(p!=null&&p!==s){if(r3(t),es(p))_[p]=null,k(p)&&(x[p]=null);else if(Vs(p)){p.value=null;const A=t;A.k&&(_[A.k]=null)}}if(_i(s))db(s,h,12,[l,_]);else{const A=es(s),M=Vs(s);if(A||M){const R=()=>{if(e.f){const F=A?k(s)?x[s]:_[s]:s.value;if(r)Zn(F)&&II(F,a);else if(Zn(F))F.includes(a)||F.push(a);else if(A)_[s]=[a],k(s)&&(x[s]=_[s]);else{const z=[a];s.value=z,e.k&&(_[e.k]=z)}}else A?(_[s]=l,k(s)&&(x[s]=l)):M&&(s.value=l,e.k&&(_[e.k]=l))};if(l){const F=()=>{R(),N1.delete(e)};F.id=-1,N1.set(e,F),po(F,n)}else r3(e),R()}}}function r3(e){const t=N1.get(e);t&&(t.flags|=8,N1.delete(e))}Xw().requestIdleCallback;Xw().cancelIdleCallback;const wp=e=>!!e.type.__asyncLoader,eT=e=>e.type.__isKeepAlive,mW={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(e,{slots:t}){const n=p_(),i=n.ctx;if(!i.renderer)return()=>{const z=t.default&&t.default();return z&&z.length===1?z[0]:z};const r=new Map,a=new Set;let l=null;const h=n.suspense,{renderer:{p:s,m:p,um:_,o:{createElement:x}}}=i,T=x("div");i.activate=(z,G,Y,J,re)=>{const X=z.component;p(z,G,Y,0,h),s(X.vnode,z,G,Y,X,h,J,z.slotScopeIds,re),po(()=>{X.isDeactivated=!1,X.a&&Ev(X.a);const U=z.props&&z.props.onVnodeMounted;U&&Pc(U,X.parent,z)},h)},i.deactivate=z=>{const G=z.component;U1(G.m),U1(G.a),p(z,T,null,1,h),po(()=>{G.da&&Ev(G.da);const Y=z.props&&z.props.onVnodeUnmounted;Y&&Pc(Y,G.parent,z),G.isDeactivated=!0},h)};function k(z){CE(z),_(z,n,h,!0)}function A(z){r.forEach((G,Y)=>{const J=zC(G.type);J&&!z(J)&&M(Y)})}function M(z){const G=r.get(z);G&&(!l||!bf(G,l))?k(G):l&&CE(l),r.delete(z),a.delete(z)}Yt(()=>[e.include,e.exclude],([z,G])=>{z&&A(Y=>Dy(z,Y)),G&&A(Y=>!Dy(G,Y))},{flush:"post",deep:!0});let R=null;const F=()=>{R!=null&&(j1(n.subTree.type)?po(()=>{r.set(R,Rx(n.subTree))},n.subTree.suspense):r.set(R,Rx(n.subTree)))};return Mr(F),iT(F),Ur(()=>{r.forEach(z=>{const{subTree:G,suspense:Y}=n,J=Rx(G);if(z.type===J.type&&z.key===J.key){CE(J);const re=J.component.da;re&&po(re,Y);return}k(z)})}),()=>{if(R=null,!t.default)return l=null;const z=t.default(),G=z[0];if(z.length>1)return l=null,z;if(!Bp(G)||!(G.shapeFlag&4)&&!(G.shapeFlag&128))return l=null,G;let Y=Rx(G);if(Y.type===Bo)return l=null,Y;const J=Y.type,re=zC(wp(Y)?Y.type.__asyncResolved||{}:J),{include:X,exclude:U,max:H}=e;if(X&&(!re||!Dy(X,re))||U&&re&&Dy(U,re))return Y.shapeFlag&=-257,l=Y,G;const W=Y.key==null?J:Y.key,ie=r.get(W);return Y.el&&(Y=rd(Y),G.shapeFlag&128&&(G.ssContent=Y)),R=W,ie?(Y.el=ie.el,Y.component=ie.component,Y.transition&&Wf(Y,Y.transition),Y.shapeFlag|=512,a.delete(W),a.add(W)):(a.add(W),H&&a.size>parseInt(H,10)&&M(a.values().next().value)),Y.shapeFlag|=256,l=Y,j1(G.type)?G:Y}}},pW=mW;function Dy(e,t){return Zn(e)?e.some(n=>Dy(n,t)):es(e)?e.split(",").includes(t):yj(e)?(e.lastIndex=0,e.test(t)):!1}function FI(e,t){nB(e,"a",t)}function tT(e,t){nB(e,"da",t)}function nB(e,t,n=Va){const i=e.__wdc||(e.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return e()});if(nT(t,i,n),n){let r=n.parent;for(;r&&r.parent;)eT(r.parent.vnode)&&gW(i,t,n,r),r=r.parent}}function gW(e,t,n,i){const r=nT(t,e,i,!0);zI(()=>{II(i[t],r)},n)}function CE(e){e.shapeFlag&=-257,e.shapeFlag&=-513}function Rx(e){return e.shapeFlag&128?e.ssContent:e}function nT(e,t,n=Va,i=!1){if(n){const r=n[e]||(n[e]=[]),a=t.__weh||(t.__weh=(...l)=>{fh();const h=fb(n),s=mu(t,n,e,l);return h(),mh(),s});return i?r.unshift(a):r.push(a),a}}const Th=e=>(t,n=Va)=>{(!w0||e==="sp")&&nT(e,(...i)=>t(...i),n)},m_=Th("bm"),Mr=Th("m"),iB=Th("bu"),iT=Th("u"),Ur=Th("bum"),zI=Th("um"),vW=Th("sp"),_W=Th("rtg"),yW=Th("rtc");function bW(e,t=Va){nT("ec",e,t)}const rB="components";function xW(e,t){return aB(rB,e,!0,t)||e}const sB=Symbol.for("v-ndc");function oB(e){return es(e)?aB(rB,e,!1)||e:e||sB}function aB(e,t,n=!0,i=!1){const r=aa||Va;if(r){const a=r.type;{const h=zC(a,!1);if(h&&(h===t||h===ll(t)||h===hd(ll(t))))return a}const l=s3(r[e]||a[e],t)||s3(r.appContext[e],t);return!l&&i?a:l}}function s3(e,t){return e&&(e[t]||e[ll(t)]||e[hd(ll(t))])}function cs(e,t,n,i){let r;const a=n,l=Zn(e);if(l||es(e)){const h=l&&xp(e);let s=!1,p=!1;h&&(s=!Fc(e),p=jf(e),e=Zw(e)),r=new Array(e.length);for(let _=0,x=e.length;_<x;_++)r[_]=t(s?p?V1(sa(e[_])):sa(e[_]):e[_],_,void 0,a)}else if(typeof e=="number"){r=new Array(e);for(let h=0;h<e;h++)r[h]=t(h+1,h,void 0,a)}else if(Pr(e))if(e[Symbol.iterator])r=Array.from(e,(h,s)=>t(h,s,void 0,a));else{const h=Object.keys(e);r=new Array(h.length);for(let s=0,p=h.length;s<p;s++){const _=h[s];r[s]=t(e[_],_,s,a)}}else r=[];return r}function wW(e,t,n={},i,r){if(aa.ce||aa.parent&&wp(aa.parent)&&aa.parent.ce){const p=Object.keys(n).length>0;return Gt(),Fa(an,null,[ce("slot",n,i)],p?-2:64)}let a=e[t];a&&a._c&&(a._d=!1),Gt();const l=a&&lB(a(n)),h=n.key||l&&l.key,s=Fa(an,{key:(h&&!fu(h)?h:`_${t}`)+(!l&&i?"_fb":"")},l||[],l&&e._===1?64:-2);return a&&a._c&&(a._d=!0),s}function lB(e){return e.some(t=>Bp(t)?!(t.type===Bo||t.type===an&&!lB(t.children)):!0)?e:null}const RC=e=>e?CB(e)?sT(e):RC(e.parent):null,Qy=xo(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>RC(e.parent),$root:e=>RC(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>uB(e),$forceUpdate:e=>e.f||(e.f=()=>{VI(e.update)}),$nextTick:e=>e.n||(e.n=Hn.bind(e.proxy)),$watch:e=>jW.bind(e)}),kE=(e,t)=>e!==$r&&!e.__isScriptSetup&&Er(e,t),TW={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:i,data:r,props:a,accessCache:l,type:h,appContext:s}=e;let p;if(t[0]!=="$"){const k=l[t];if(k!==void 0)switch(k){case 1:return i[t];case 2:return r[t];case 4:return n[t];case 3:return a[t]}else{if(kE(i,t))return l[t]=1,i[t];if(r!==$r&&Er(r,t))return l[t]=2,r[t];if((p=e.propsOptions[0])&&Er(p,t))return l[t]=3,a[t];if(n!==$r&&Er(n,t))return l[t]=4,n[t];OC&&(l[t]=0)}}const _=Qy[t];let x,T;if(_)return t==="$attrs"&&Ra(e.attrs,"get",""),_(e);if((x=h.__cssModules)&&(x=x[t]))return x;if(n!==$r&&Er(n,t))return l[t]=4,n[t];if(T=s.config.globalProperties,Er(T,t))return T[t]},set({_:e},t,n){const{data:i,setupState:r,ctx:a}=e;return kE(r,t)?(r[t]=n,!0):i!==$r&&Er(i,t)?(i[t]=n,!0):Er(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(a[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:i,appContext:r,propsOptions:a,type:l}},h){let s,p;return!!(n[h]||e!==$r&&h[0]!=="$"&&Er(e,h)||kE(t,h)||(s=a[0])&&Er(s,h)||Er(i,h)||Er(Qy,h)||Er(r.config.globalProperties,h)||(p=l.__cssModules)&&p[h])},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:Er(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function o3(e){return Zn(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let OC=!0;function SW(e){const t=uB(e),n=e.proxy,i=e.ctx;OC=!1,t.beforeCreate&&a3(t.beforeCreate,e,"bc");const{data:r,computed:a,methods:l,watch:h,provide:s,inject:p,created:_,beforeMount:x,mounted:T,beforeUpdate:k,updated:A,activated:M,deactivated:R,beforeDestroy:F,beforeUnmount:z,destroyed:G,unmounted:Y,render:J,renderTracked:re,renderTriggered:X,errorCaptured:U,serverPrefetch:H,expose:W,inheritAttrs:ie,components:Q,directives:te,filters:ke}=t;if(p&&EW(p,i,null),l)for(const Je in l){const nt=l[Je];_i(nt)&&(i[Je]=nt.bind(n))}if(r){const Je=r.call(n,n);Pr(Je)&&(e.data=so(Je))}if(OC=!0,a)for(const Je in a){const nt=a[Je],De=_i(nt)?nt.bind(n,n):_i(nt.get)?nt.get.bind(n,n):Xu,Ge=!_i(nt)&&_i(nt.set)?nt.set.bind(n):Xu,Ee=me({get:De,set:Ge});Object.defineProperty(i,Je,{enumerable:!0,configurable:!0,get:()=>Ee.value,set:it=>Ee.value=it})}if(h)for(const Je in h)cB(h[Je],i,n,Je);if(s){const Je=_i(s)?s.call(n):s;Reflect.ownKeys(Je).forEach(nt=>{Rr(nt,Je[nt])})}_&&a3(_,e,"c");function Be(Je,nt){Zn(nt)?nt.forEach(De=>Je(De.bind(n))):nt&&Je(nt.bind(n))}if(Be(m_,x),Be(Mr,T),Be(iB,k),Be(iT,A),Be(FI,M),Be(tT,R),Be(bW,U),Be(yW,re),Be(_W,X),Be(Ur,z),Be(zI,Y),Be(vW,H),Zn(W))if(W.length){const Je=e.exposed||(e.exposed={});W.forEach(nt=>{Object.defineProperty(Je,nt,{get:()=>n[nt],set:De=>n[nt]=De,enumerable:!0})})}else e.exposed||(e.exposed={});J&&e.render===Xu&&(e.render=J),ie!=null&&(e.inheritAttrs=ie),Q&&(e.components=Q),te&&(e.directives=te),H&&tB(e)}function EW(e,t,n=Xu){Zn(e)&&(e=VC(e));for(const i in e){const r=e[i];let a;Pr(r)?"default"in r?a=Si(r.from||i,r.default,!0):a=Si(r.from||i):a=Si(r),Vs(a)?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>a.value,set:l=>a.value=l}):t[i]=a}}function a3(e,t,n){mu(Zn(e)?e.map(i=>i.bind(t.proxy)):e.bind(t.proxy),t,n)}function cB(e,t,n,i){let r=i.includes(".")?xB(n,i):()=>n[i];if(es(e)){const a=t[e];_i(a)&&Yt(r,a)}else if(_i(e))Yt(r,e.bind(n));else if(Pr(e))if(Zn(e))e.forEach(a=>cB(a,t,n,i));else{const a=_i(e.handler)?e.handler.bind(n):t[e.handler];_i(a)&&Yt(r,a,e)}}function uB(e){const t=e.type,{mixins:n,extends:i}=t,{mixins:r,optionsCache:a,config:{optionMergeStrategies:l}}=e.appContext,h=a.get(t);let s;return h?s=h:!r.length&&!n&&!i?s=t:(s={},r.length&&r.forEach(p=>$1(s,p,l,!0)),$1(s,t,l)),Pr(t)&&a.set(t,s),s}function $1(e,t,n,i=!1){const{mixins:r,extends:a}=t;a&&$1(e,a,n,!0),r&&r.forEach(l=>$1(e,l,n,!0));for(const l in t)if(!(i&&l==="expose")){const h=CW[l]||n&&n[l];e[l]=h?h(e[l],t[l]):t[l]}return e}const CW={data:l3,props:c3,emits:c3,methods:Ly,computed:Ly,beforeCreate:sl,created:sl,beforeMount:sl,mounted:sl,beforeUpdate:sl,updated:sl,beforeDestroy:sl,beforeUnmount:sl,destroyed:sl,unmounted:sl,activated:sl,deactivated:sl,errorCaptured:sl,serverPrefetch:sl,components:Ly,directives:Ly,watch:IW,provide:l3,inject:kW};function l3(e,t){return t?e?function(){return xo(_i(e)?e.call(this,this):e,_i(t)?t.call(this,this):t)}:t:e}function kW(e,t){return Ly(VC(e),VC(t))}function VC(e){if(Zn(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function sl(e,t){return e?[...new Set([].concat(e,t))]:t}function Ly(e,t){return e?xo(Object.create(null),e,t):t}function c3(e,t){return e?Zn(e)&&Zn(t)?[...new Set([...e,...t])]:xo(Object.create(null),o3(e),o3(t??{})):t}function IW(e,t){if(!e)return t;if(!t)return e;const n=xo(Object.create(null),e);for(const i in t)n[i]=sl(e[i],t[i]);return n}function dB(){return{app:null,config:{isNativeTag:hV,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let AW=0;function PW(e,t){return function(i,r=null){_i(i)||(i=xo({},i)),r!=null&&!Pr(r)&&(r=null);const a=dB(),l=new WeakSet,h=[];let s=!1;const p=a.app={_uid:AW++,_component:i,_props:r,_container:null,_context:a,_instance:null,version:lH,get config(){return a.config},set config(_){},use(_,...x){return l.has(_)||(_&&_i(_.install)?(l.add(_),_.install(p,...x)):_i(_)&&(l.add(_),_(p,...x))),p},mixin(_){return a.mixins.includes(_)||a.mixins.push(_),p},component(_,x){return x?(a.components[_]=x,p):a.components[_]},directive(_,x){return x?(a.directives[_]=x,p):a.directives[_]},mount(_,x,T){if(!s){const k=p._ceVNode||ce(i,r);return k.appContext=a,T===!0?T="svg":T===!1&&(T=void 0),e(k,_,T),s=!0,p._container=_,_.__vue_app__=p,sT(k.component)}},onUnmount(_){h.push(_)},unmount(){s&&(mu(h,p._instance,16),e(null,p._container),delete p._container.__vue_app__)},provide(_,x){return a.provides[_]=x,p},runWithContext(_){const x=kv;kv=p;try{return _()}finally{kv=x}}};return p}}let kv=null;function Rr(e,t){if(Va){let n=Va.provides;const i=Va.parent&&Va.parent.provides;i===n&&(n=Va.provides=Object.create(i)),n[e]=t}}function Si(e,t,n=!1){const i=p_();if(i||kv){let r=kv?kv._context.provides:i?i.parent==null||i.ce?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:void 0;if(r&&e in r)return r[e];if(arguments.length>1)return n&&_i(t)?t.call(i&&i.proxy):t}}const hB={},fB=()=>Object.create(hB),mB=e=>Object.getPrototypeOf(e)===hB;function MW(e,t,n,i=!1){const r={},a=fB();e.propsDefaults=Object.create(null),pB(e,t,r,a);for(const l in e.propsOptions[0])l in r||(r[l]=void 0);n?e.props=i?r:Jj(r):e.type.props?e.props=r:e.props=a,e.attrs=a}function DW(e,t,n,i){const{props:r,attrs:a,vnode:{patchFlag:l}}=e,h=Un(r),[s]=e.propsOptions;let p=!1;if((i||l>0)&&!(l&16)){if(l&8){const _=e.vnode.dynamicProps;for(let x=0;x<_.length;x++){let T=_[x];if(rT(e.emitsOptions,T))continue;const k=t[T];if(s)if(Er(a,T))k!==a[T]&&(a[T]=k,p=!0);else{const A=ll(T);r[A]=BC(s,h,A,k,e,!1)}else k!==a[T]&&(a[T]=k,p=!0)}}}else{pB(e,t,r,a)&&(p=!0);let _;for(const x in h)(!t||!Er(t,x)&&((_=Qp(x))===x||!Er(t,_)))&&(s?n&&(n[x]!==void 0||n[_]!==void 0)&&(r[x]=BC(s,h,x,void 0,e,!0)):delete r[x]);if(a!==h)for(const x in a)(!t||!Er(t,x))&&(delete a[x],p=!0)}p&&rh(e.attrs,"set","")}function pB(e,t,n,i){const[r,a]=e.propsOptions;let l=!1,h;if(t)for(let s in t){if(Ky(s))continue;const p=t[s];let _;r&&Er(r,_=ll(s))?!a||!a.includes(_)?n[_]=p:(h||(h={}))[_]=p:rT(e.emitsOptions,s)||(!(s in i)||p!==i[s])&&(i[s]=p,l=!0)}if(a){const s=Un(n),p=h||$r;for(let _=0;_<a.length;_++){const x=a[_];n[x]=BC(r,s,x,p[x],e,!Er(p,x))}}return l}function BC(e,t,n,i,r,a){const l=e[n];if(l!=null){const h=Er(l,"default");if(h&&i===void 0){const s=l.default;if(l.type!==Function&&!l.skipFactory&&_i(s)){const{propsDefaults:p}=r;if(n in p)i=p[n];else{const _=fb(r);i=p[n]=s.call(null,t),_()}}else i=s;r.ce&&r.ce._setProp(n,i)}l[0]&&(a&&!h?i=!1:l[1]&&(i===""||i===Qp(n))&&(i=!0))}return i}const LW=new WeakMap;function gB(e,t,n=!1){const i=n?LW:t.propsCache,r=i.get(e);if(r)return r;const a=e.props,l={},h=[];let s=!1;if(!_i(e)){const _=x=>{s=!0;const[T,k]=gB(x,t,!0);xo(l,T),k&&h.push(...k)};!n&&t.mixins.length&&t.mixins.forEach(_),e.extends&&_(e.extends),e.mixins&&e.mixins.forEach(_)}if(!a&&!s)return Pr(e)&&i.set(e,Tv),Tv;if(Zn(a))for(let _=0;_<a.length;_++){const x=ll(a[_]);u3(x)&&(l[x]=$r)}else if(a)for(const _ in a){const x=ll(_);if(u3(x)){const T=a[_],k=l[x]=Zn(T)||_i(T)?{type:T}:xo({},T),A=k.type;let M=!1,R=!0;if(Zn(A))for(let F=0;F<A.length;++F){const z=A[F],G=_i(z)&&z.name;if(G==="Boolean"){M=!0;break}else G==="String"&&(R=!1)}else M=_i(A)&&A.name==="Boolean";k[0]=M,k[1]=R,(M||Er(k,"default"))&&h.push(x)}}const p=[l,h];return Pr(e)&&i.set(e,p),p}function u3(e){return e[0]!=="$"&&!Ky(e)}const NI=e=>e==="_"||e==="_ctx"||e==="$stable",$I=e=>Zn(e)?e.map(Gu):[Gu(e)],RW=(e,t,n)=>{if(t._n)return t;const i=vi((...r)=>$I(t(...r)),n);return i._c=!1,i},vB=(e,t,n)=>{const i=e._ctx;for(const r in e){if(NI(r))continue;const a=e[r];if(_i(a))t[r]=RW(r,a,i);else if(a!=null){const l=$I(a);t[r]=()=>l}}},_B=(e,t)=>{const n=$I(t);e.slots.default=()=>n},yB=(e,t,n)=>{for(const i in t)(n||!NI(i))&&(e[i]=t[i])},OW=(e,t,n)=>{const i=e.slots=fB();if(e.vnode.shapeFlag&32){const r=t._;r?(yB(i,t,n),n&&gV(i,"_",r,!0)):vB(t,i)}else t&&_B(e,t)},VW=(e,t,n)=>{const{vnode:i,slots:r}=e;let a=!0,l=$r;if(i.shapeFlag&32){const h=t._;h?n&&h===1?a=!1:yB(r,t,n):(a=!t.$stable,vB(t,r)),l=t}else t&&(_B(e,t),l={default:1});if(a)for(const h in r)!NI(h)&&l[h]==null&&delete r[h]},po=ZW;function BW(e){return FW(e)}function FW(e,t){const n=Xw();n.__VUE__=!0;const{insert:i,remove:r,patchProp:a,createElement:l,createText:h,createComment:s,setText:p,setElementText:_,parentNode:x,nextSibling:T,setScopeId:k=Xu,insertStaticContent:A}=e,M=(ue,we,fe,Ie=null,je=null,Xe=null,yt=void 0,wt=null,Lt=!!we.dynamicChildren)=>{if(ue===we)return;ue&&!bf(ue,we)&&(Ie=ct(ue),it(ue,je,Xe,!0),ue=null),we.patchFlag===-2&&(Lt=!1,we.dynamicChildren=null);const{type:Dt,ref:gn,shapeFlag:Kt}=we;switch(Dt){case hb:R(ue,we,fe,Ie);break;case Bo:F(ue,we,fe,Ie);break;case d1:ue==null&&z(we,fe,Ie,yt);break;case an:Q(ue,we,fe,Ie,je,Xe,yt,wt,Lt);break;default:Kt&1?J(ue,we,fe,Ie,je,Xe,yt,wt,Lt):Kt&6?te(ue,we,fe,Ie,je,Xe,yt,wt,Lt):(Kt&64||Kt&128)&&Dt.process(ue,we,fe,Ie,je,Xe,yt,wt,Lt,kt)}gn!=null&&je?Jy(gn,ue&&ue.ref,Xe,we||ue,!we):gn==null&&ue&&ue.ref!=null&&Jy(ue.ref,null,Xe,ue,!0)},R=(ue,we,fe,Ie)=>{if(ue==null)i(we.el=h(we.children),fe,Ie);else{const je=we.el=ue.el;we.children!==ue.children&&p(je,we.children)}},F=(ue,we,fe,Ie)=>{ue==null?i(we.el=s(we.children||""),fe,Ie):we.el=ue.el},z=(ue,we,fe,Ie)=>{[ue.el,ue.anchor]=A(ue.children,we,fe,Ie,ue.el,ue.anchor)},G=({el:ue,anchor:we},fe,Ie)=>{let je;for(;ue&&ue!==we;)je=T(ue),i(ue,fe,Ie),ue=je;i(we,fe,Ie)},Y=({el:ue,anchor:we})=>{let fe;for(;ue&&ue!==we;)fe=T(ue),r(ue),ue=fe;r(we)},J=(ue,we,fe,Ie,je,Xe,yt,wt,Lt)=>{we.type==="svg"?yt="svg":we.type==="math"&&(yt="mathml"),ue==null?re(we,fe,Ie,je,Xe,yt,wt,Lt):H(ue,we,je,Xe,yt,wt,Lt)},re=(ue,we,fe,Ie,je,Xe,yt,wt)=>{let Lt,Dt;const{props:gn,shapeFlag:Kt,transition:Cn,dirs:Dn}=ue;if(Lt=ue.el=l(ue.type,Xe,gn&&gn.is,gn),Kt&8?_(Lt,ue.children):Kt&16&&U(ue.children,Lt,null,Ie,je,IE(ue,Xe),yt,wt),Dn&&Jm(ue,null,Ie,"created"),X(Lt,ue,ue.scopeId,yt,Ie),gn){for(const ni in gn)ni!=="value"&&!Ky(ni)&&a(Lt,ni,null,gn[ni],Xe,Ie);"value"in gn&&a(Lt,"value",null,gn.value,Xe),(Dt=gn.onVnodeBeforeMount)&&Pc(Dt,Ie,ue)}Dn&&Jm(ue,null,Ie,"beforeMount");const Fn=zW(je,Cn);Fn&&Cn.beforeEnter(Lt),i(Lt,we,fe),((Dt=gn&&gn.onVnodeMounted)||Fn||Dn)&&po(()=>{Dt&&Pc(Dt,Ie,ue),Fn&&Cn.enter(Lt),Dn&&Jm(ue,null,Ie,"mounted")},je)},X=(ue,we,fe,Ie,je)=>{if(fe&&k(ue,fe),Ie)for(let Xe=0;Xe<Ie.length;Xe++)k(ue,Ie[Xe]);if(je){let Xe=je.subTree;if(we===Xe||j1(Xe.type)&&(Xe.ssContent===we||Xe.ssFallback===we)){const yt=je.vnode;X(ue,yt,yt.scopeId,yt.slotScopeIds,je.parent)}}},U=(ue,we,fe,Ie,je,Xe,yt,wt,Lt=0)=>{for(let Dt=Lt;Dt<ue.length;Dt++){const gn=ue[Dt]=wt?vf(ue[Dt]):Gu(ue[Dt]);M(null,gn,we,fe,Ie,je,Xe,yt,wt)}},H=(ue,we,fe,Ie,je,Xe,yt)=>{const wt=we.el=ue.el;let{patchFlag:Lt,dynamicChildren:Dt,dirs:gn}=we;Lt|=ue.patchFlag&16;const Kt=ue.props||$r,Cn=we.props||$r;let Dn;if(fe&&Qm(fe,!1),(Dn=Cn.onVnodeBeforeUpdate)&&Pc(Dn,fe,we,ue),gn&&Jm(we,ue,fe,"beforeUpdate"),fe&&Qm(fe,!0),(Kt.innerHTML&&Cn.innerHTML==null||Kt.textContent&&Cn.textContent==null)&&_(wt,""),Dt?W(ue.dynamicChildren,Dt,wt,fe,Ie,IE(we,je),Xe):yt||nt(ue,we,wt,null,fe,Ie,IE(we,je),Xe,!1),Lt>0){if(Lt&16)ie(wt,Kt,Cn,fe,je);else if(Lt&2&&Kt.class!==Cn.class&&a(wt,"class",null,Cn.class,je),Lt&4&&a(wt,"style",Kt.style,Cn.style,je),Lt&8){const Fn=we.dynamicProps;for(let ni=0;ni<Fn.length;ni++){const Ut=Fn[ni],fn=Kt[Ut],wn=Cn[Ut];(wn!==fn||Ut==="value")&&a(wt,Ut,fn,wn,je,fe)}}Lt&1&&ue.children!==we.children&&_(wt,we.children)}else!yt&&Dt==null&&ie(wt,Kt,Cn,fe,je);((Dn=Cn.onVnodeUpdated)||gn)&&po(()=>{Dn&&Pc(Dn,fe,we,ue),gn&&Jm(we,ue,fe,"updated")},Ie)},W=(ue,we,fe,Ie,je,Xe,yt)=>{for(let wt=0;wt<we.length;wt++){const Lt=ue[wt],Dt=we[wt],gn=Lt.el&&(Lt.type===an||!bf(Lt,Dt)||Lt.shapeFlag&198)?x(Lt.el):fe;M(Lt,Dt,gn,null,Ie,je,Xe,yt,!0)}},ie=(ue,we,fe,Ie,je)=>{if(we!==fe){if(we!==$r)for(const Xe in we)!Ky(Xe)&&!(Xe in fe)&&a(ue,Xe,we[Xe],null,je,Ie);for(const Xe in fe){if(Ky(Xe))continue;const yt=fe[Xe],wt=we[Xe];yt!==wt&&Xe!=="value"&&a(ue,Xe,wt,yt,je,Ie)}"value"in fe&&a(ue,"value",we.value,fe.value,je)}},Q=(ue,we,fe,Ie,je,Xe,yt,wt,Lt)=>{const Dt=we.el=ue?ue.el:h(""),gn=we.anchor=ue?ue.anchor:h("");let{patchFlag:Kt,dynamicChildren:Cn,slotScopeIds:Dn}=we;Dn&&(wt=wt?wt.concat(Dn):Dn),ue==null?(i(Dt,fe,Ie),i(gn,fe,Ie),U(we.children||[],fe,gn,je,Xe,yt,wt,Lt)):Kt>0&&Kt&64&&Cn&&ue.dynamicChildren?(W(ue.dynamicChildren,Cn,fe,je,Xe,yt,wt),(we.key!=null||je&&we===je.subTree)&&UI(ue,we,!0)):nt(ue,we,fe,gn,je,Xe,yt,wt,Lt)},te=(ue,we,fe,Ie,je,Xe,yt,wt,Lt)=>{we.slotScopeIds=wt,ue==null?we.shapeFlag&512?je.ctx.activate(we,fe,Ie,yt,Lt):ke(we,fe,Ie,je,Xe,yt,Lt):Re(ue,we,Lt)},ke=(ue,we,fe,Ie,je,Xe,yt)=>{const wt=ue.component=nH(ue,Ie,je);if(eT(ue)&&(wt.ctx.renderer=kt),iH(wt,!1,yt),wt.asyncDep){if(je&&je.registerDep(wt,Be,yt),!ue.el){const Lt=wt.subTree=ce(Bo);F(null,Lt,we,fe),ue.placeholder=Lt.el}}else Be(wt,ue,we,fe,je,Xe,yt)},Re=(ue,we,fe)=>{const Ie=we.component=ue.component;if(XW(ue,we,fe))if(Ie.asyncDep&&!Ie.asyncResolved){Je(Ie,we,fe);return}else Ie.next=we,Ie.update();else we.el=ue.el,Ie.vnode=we},Be=(ue,we,fe,Ie,je,Xe,yt)=>{const wt=()=>{if(ue.isMounted){let{next:Kt,bu:Cn,u:Dn,parent:Fn,vnode:ni}=ue;{const Ci=bB(ue);if(Ci){Kt&&(Kt.el=ni.el,Je(ue,Kt,yt)),Ci.asyncDep.then(()=>{ue.isUnmounted||wt()});return}}let Ut=Kt,fn;Qm(ue,!1),Kt?(Kt.el=ni.el,Je(ue,Kt,yt)):Kt=ni,Cn&&Ev(Cn),(fn=Kt.props&&Kt.props.onVnodeBeforeUpdate)&&Pc(fn,Fn,Kt,ni),Qm(ue,!0);const wn=d3(ue),Ln=ue.subTree;ue.subTree=wn,M(Ln,wn,x(Ln.el),ct(Ln),ue,je,Xe),Kt.el=wn.el,Ut===null&&YW(ue,wn.el),Dn&&po(Dn,je),(fn=Kt.props&&Kt.props.onVnodeUpdated)&&po(()=>Pc(fn,Fn,Kt,ni),je)}else{let Kt;const{el:Cn,props:Dn}=we,{bm:Fn,m:ni,parent:Ut,root:fn,type:wn}=ue,Ln=wp(we);Qm(ue,!1),Fn&&Ev(Fn),!Ln&&(Kt=Dn&&Dn.onVnodeBeforeMount)&&Pc(Kt,Ut,we),Qm(ue,!0);{fn.ce&&fn.ce._def.shadowRoot!==!1&&fn.ce._injectChildStyle(wn);const Ci=ue.subTree=d3(ue);M(null,Ci,fe,Ie,ue,je,Xe),we.el=Ci.el}if(ni&&po(ni,je),!Ln&&(Kt=Dn&&Dn.onVnodeMounted)){const Ci=we;po(()=>Pc(Kt,Ut,Ci),je)}(we.shapeFlag&256||Ut&&wp(Ut.vnode)&&Ut.vnode.shapeFlag&256)&&ue.a&&po(ue.a,je),ue.isMounted=!0,we=fe=Ie=null}};ue.scope.on();const Lt=ue.effect=new wV(wt);ue.scope.off();const Dt=ue.update=Lt.run.bind(Lt),gn=ue.job=Lt.runIfDirty.bind(Lt);gn.i=ue,gn.id=ue.uid,Lt.scheduler=()=>VI(gn),Qm(ue,!0),Dt()},Je=(ue,we,fe)=>{we.component=ue;const Ie=ue.vnode.props;ue.vnode=we,ue.next=null,DW(ue,we.props,Ie,fe),VW(ue,we.children,fe),fh(),QL(ue),mh()},nt=(ue,we,fe,Ie,je,Xe,yt,wt,Lt=!1)=>{const Dt=ue&&ue.children,gn=ue?ue.shapeFlag:0,Kt=we.children,{patchFlag:Cn,shapeFlag:Dn}=we;if(Cn>0){if(Cn&128){Ge(Dt,Kt,fe,Ie,je,Xe,yt,wt,Lt);return}else if(Cn&256){De(Dt,Kt,fe,Ie,je,Xe,yt,wt,Lt);return}}Dn&8?(gn&16&&$t(Dt,je,Xe),Kt!==Dt&&_(fe,Kt)):gn&16?Dn&16?Ge(Dt,Kt,fe,Ie,je,Xe,yt,wt,Lt):$t(Dt,je,Xe,!0):(gn&8&&_(fe,""),Dn&16&&U(Kt,fe,Ie,je,Xe,yt,wt,Lt))},De=(ue,we,fe,Ie,je,Xe,yt,wt,Lt)=>{ue=ue||Tv,we=we||Tv;const Dt=ue.length,gn=we.length,Kt=Math.min(Dt,gn);let Cn;for(Cn=0;Cn<Kt;Cn++){const Dn=we[Cn]=Lt?vf(we[Cn]):Gu(we[Cn]);M(ue[Cn],Dn,fe,null,je,Xe,yt,wt,Lt)}Dt>gn?$t(ue,je,Xe,!0,!1,Kt):U(we,fe,Ie,je,Xe,yt,wt,Lt,Kt)},Ge=(ue,we,fe,Ie,je,Xe,yt,wt,Lt)=>{let Dt=0;const gn=we.length;let Kt=ue.length-1,Cn=gn-1;for(;Dt<=Kt&&Dt<=Cn;){const Dn=ue[Dt],Fn=we[Dt]=Lt?vf(we[Dt]):Gu(we[Dt]);if(bf(Dn,Fn))M(Dn,Fn,fe,null,je,Xe,yt,wt,Lt);else break;Dt++}for(;Dt<=Kt&&Dt<=Cn;){const Dn=ue[Kt],Fn=we[Cn]=Lt?vf(we[Cn]):Gu(we[Cn]);if(bf(Dn,Fn))M(Dn,Fn,fe,null,je,Xe,yt,wt,Lt);else break;Kt--,Cn--}if(Dt>Kt){if(Dt<=Cn){const Dn=Cn+1,Fn=Dn<gn?we[Dn].el:Ie;for(;Dt<=Cn;)M(null,we[Dt]=Lt?vf(we[Dt]):Gu(we[Dt]),fe,Fn,je,Xe,yt,wt,Lt),Dt++}}else if(Dt>Cn)for(;Dt<=Kt;)it(ue[Dt],je,Xe,!0),Dt++;else{const Dn=Dt,Fn=Dt,ni=new Map;for(Dt=Fn;Dt<=Cn;Dt++){const rr=we[Dt]=Lt?vf(we[Dt]):Gu(we[Dt]);rr.key!=null&&ni.set(rr.key,Dt)}let Ut,fn=0;const wn=Cn-Fn+1;let Ln=!1,Ci=0;const xr=new Array(wn);for(Dt=0;Dt<wn;Dt++)xr[Dt]=0;for(Dt=Dn;Dt<=Kt;Dt++){const rr=ue[Dt];if(fn>=wn){it(rr,je,Xe,!0);continue}let wr;if(rr.key!=null)wr=ni.get(rr.key);else for(Ut=Fn;Ut<=Cn;Ut++)if(xr[Ut-Fn]===0&&bf(rr,we[Ut])){wr=Ut;break}wr===void 0?it(rr,je,Xe,!0):(xr[wr-Fn]=Dt+1,wr>=Ci?Ci=wr:Ln=!0,M(rr,we[wr],fe,null,je,Xe,yt,wt,Lt),fn++)}const Ss=Ln?NW(xr):Tv;for(Ut=Ss.length-1,Dt=wn-1;Dt>=0;Dt--){const rr=Fn+Dt,wr=we[rr],jo=we[rr+1],So=rr+1<gn?jo.el||jo.placeholder:Ie;xr[Dt]===0?M(null,wr,fe,So,je,Xe,yt,wt,Lt):Ln&&(Ut<0||Dt!==Ss[Ut]?Ee(wr,fe,So,2):Ut--)}}},Ee=(ue,we,fe,Ie,je=null)=>{const{el:Xe,type:yt,transition:wt,children:Lt,shapeFlag:Dt}=ue;if(Dt&6){Ee(ue.component.subTree,we,fe,Ie);return}if(Dt&128){ue.suspense.move(we,fe,Ie);return}if(Dt&64){yt.move(ue,we,fe,kt);return}if(yt===an){i(Xe,we,fe);for(let Kt=0;Kt<Lt.length;Kt++)Ee(Lt[Kt],we,fe,Ie);i(ue.anchor,we,fe);return}if(yt===d1){G(ue,we,fe);return}if(Ie!==2&&Dt&1&&wt)if(Ie===0)wt.beforeEnter(Xe),i(Xe,we,fe),po(()=>wt.enter(Xe),je);else{const{leave:Kt,delayLeave:Cn,afterLeave:Dn}=wt,Fn=()=>{ue.ctx.isUnmounted?r(Xe):i(Xe,we,fe)},ni=()=>{Xe._isLeaving&&Xe[eh](!0),Kt(Xe,()=>{Fn(),Dn&&Dn()})};Cn?Cn(Xe,Fn,ni):ni()}else i(Xe,we,fe)},it=(ue,we,fe,Ie=!1,je=!1)=>{const{type:Xe,props:yt,ref:wt,children:Lt,dynamicChildren:Dt,shapeFlag:gn,patchFlag:Kt,dirs:Cn,cacheIndex:Dn}=ue;if(Kt===-2&&(je=!1),wt!=null&&(fh(),Jy(wt,null,fe,ue,!0),mh()),Dn!=null&&(we.renderCache[Dn]=void 0),gn&256){we.ctx.deactivate(ue);return}const Fn=gn&1&&Cn,ni=!wp(ue);let Ut;if(ni&&(Ut=yt&&yt.onVnodeBeforeUnmount)&&Pc(Ut,we,ue),gn&6)Pt(ue.component,fe,Ie);else{if(gn&128){ue.suspense.unmount(fe,Ie);return}Fn&&Jm(ue,null,we,"beforeUnmount"),gn&64?ue.type.remove(ue,we,fe,kt,Ie):Dt&&!Dt.hasOnce&&(Xe!==an||Kt>0&&Kt&64)?$t(Dt,we,fe,!1,!0):(Xe===an&&Kt&384||!je&&gn&16)&&$t(Lt,we,fe),Ie&&ot(ue)}(ni&&(Ut=yt&&yt.onVnodeUnmounted)||Fn)&&po(()=>{Ut&&Pc(Ut,we,ue),Fn&&Jm(ue,null,we,"unmounted")},fe)},ot=ue=>{const{type:we,el:fe,anchor:Ie,transition:je}=ue;if(we===an){mt(fe,Ie);return}if(we===d1){Y(ue);return}const Xe=()=>{r(fe),je&&!je.persisted&&je.afterLeave&&je.afterLeave()};if(ue.shapeFlag&1&&je&&!je.persisted){const{leave:yt,delayLeave:wt}=je,Lt=()=>yt(fe,Xe);wt?wt(ue.el,Xe,Lt):Lt()}else Xe()},mt=(ue,we)=>{let fe;for(;ue!==we;)fe=T(ue),r(ue),ue=fe;r(we)},Pt=(ue,we,fe)=>{const{bum:Ie,scope:je,job:Xe,subTree:yt,um:wt,m:Lt,a:Dt}=ue;U1(Lt),U1(Dt),Ie&&Ev(Ie),je.stop(),Xe&&(Xe.flags|=8,it(yt,ue,we,fe)),wt&&po(wt,we),po(()=>{ue.isUnmounted=!0},we)},$t=(ue,we,fe,Ie=!1,je=!1,Xe=0)=>{for(let yt=Xe;yt<ue.length;yt++)it(ue[yt],we,fe,Ie,je)},ct=ue=>{if(ue.shapeFlag&6)return ct(ue.component.subTree);if(ue.shapeFlag&128)return ue.suspense.next();const we=T(ue.anchor||ue.el),fe=we&&we[HV];return fe?T(fe):we};let ht=!1;const Qe=(ue,we,fe)=>{ue==null?we._vnode&&it(we._vnode,null,null,!0):M(we._vnode||null,ue,we,null,null,null,fe),we._vnode=ue,ht||(ht=!0,QL(),UV(),ht=!1)},kt={p:M,um:it,m:Ee,r:ot,mt:ke,mc:U,pc:nt,pbc:W,n:ct,o:e};return{render:Qe,hydrate:void 0,createApp:PW(Qe)}}function IE({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function Qm({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function zW(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function UI(e,t,n=!1){const i=e.children,r=t.children;if(Zn(i)&&Zn(r))for(let a=0;a<i.length;a++){const l=i[a];let h=r[a];h.shapeFlag&1&&!h.dynamicChildren&&((h.patchFlag<=0||h.patchFlag===32)&&(h=r[a]=vf(r[a]),h.el=l.el),!n&&h.patchFlag!==-2&&UI(l,h)),h.type===hb&&h.patchFlag!==-1&&(h.el=l.el),h.type===Bo&&!h.el&&(h.el=l.el)}}function NW(e){const t=e.slice(),n=[0];let i,r,a,l,h;const s=e.length;for(i=0;i<s;i++){const p=e[i];if(p!==0){if(r=n[n.length-1],e[r]<p){t[i]=r,n.push(i);continue}for(a=0,l=n.length-1;a<l;)h=a+l>>1,e[n[h]]<p?a=h+1:l=h;p<e[n[a]]&&(a>0&&(t[i]=n[a-1]),n[a]=i)}}for(a=n.length,l=n[a-1];a-- >0;)n[a]=l,l=t[l];return n}function bB(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:bB(t)}function U1(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const $W=Symbol.for("v-scx"),UW=()=>Si($W);function jr(e,t){return jI(e,null,t)}function Yt(e,t,n){return jI(e,t,n)}function jI(e,t,n=$r){const{immediate:i,deep:r,flush:a,once:l}=n,h=xo({},n),s=t&&i||!t&&a!=="post";let p;if(w0){if(a==="sync"){const k=UW();p=k.__watcherHandles||(k.__watcherHandles=[])}else if(!s){const k=()=>{};return k.stop=Xu,k.resume=Xu,k.pause=Xu,k}}const _=Va;h.call=(k,A,M)=>mu(k,_,A,M);let x=!1;a==="post"?h.scheduler=k=>{po(k,_&&_.suspense)}:a!=="sync"&&(x=!0,h.scheduler=(k,A)=>{A?k():VI(k)}),h.augmentJob=k=>{t&&(k.flags|=4),x&&(k.flags|=2,_&&(k.id=_.uid,k.i=_))};const T=oW(e,t,h);return w0&&(p?p.push(T):s&&T()),T}function jW(e,t,n){const i=this.proxy,r=es(e)?e.includes(".")?xB(i,e):()=>i[e]:e.bind(i,i);let a;_i(t)?a=t:(a=t.handler,n=t);const l=fb(this),h=jI(r,a.bind(i),n);return l(),h}function xB(e,t){const n=t.split(".");return()=>{let i=e;for(let r=0;r<n.length&&i;r++)i=i[n[r]];return i}}const WW=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${ll(t)}Modifiers`]||e[`${Qp(t)}Modifiers`];function HW(e,t,...n){if(e.isUnmounted)return;const i=e.vnode.props||$r;let r=n;const a=t.startsWith("update:"),l=a&&WW(i,t.slice(7));l&&(l.trim&&(r=n.map(_=>es(_)?_.trim():_)),l.number&&(r=n.map(R1)));let h,s=i[h=bE(t)]||i[h=bE(ll(t))];!s&&a&&(s=i[h=bE(Qp(t))]),s&&mu(s,e,6,r);const p=i[h+"Once"];if(p){if(!e.emitted)e.emitted={};else if(e.emitted[h])return;e.emitted[h]=!0,mu(p,e,6,r)}}const GW=new WeakMap;function wB(e,t,n=!1){const i=n?GW:t.emitsCache,r=i.get(e);if(r!==void 0)return r;const a=e.emits;let l={},h=!1;if(!_i(e)){const s=p=>{const _=wB(p,t,!0);_&&(h=!0,xo(l,_))};!n&&t.mixins.length&&t.mixins.forEach(s),e.extends&&s(e.extends),e.mixins&&e.mixins.forEach(s)}return!a&&!h?(Pr(e)&&i.set(e,null),null):(Zn(a)?a.forEach(s=>l[s]=null):xo(l,a),Pr(e)&&i.set(e,l),l)}function rT(e,t){return!e||!Gw(t)?!1:(t=t.slice(2).replace(/Once$/,""),Er(e,t[0].toLowerCase()+t.slice(1))||Er(e,Qp(t))||Er(e,t))}function d3(e){const{type:t,vnode:n,proxy:i,withProxy:r,propsOptions:[a],slots:l,attrs:h,emit:s,render:p,renderCache:_,props:x,data:T,setupState:k,ctx:A,inheritAttrs:M}=e,R=z1(e);let F,z;try{if(n.shapeFlag&4){const Y=r||i,J=Y;F=Gu(p.call(J,Y,_,x,k,T,A)),z=h}else{const Y=t;F=Gu(Y.length>1?Y(x,{attrs:h,slots:l,emit:s}):Y(x,null)),z=t.props?h:qW(h)}}catch(Y){e0.length=0,Qw(Y,e,1),F=ce(Bo)}let G=F;if(z&&M!==!1){const Y=Object.keys(z),{shapeFlag:J}=G;Y.length&&J&7&&(a&&Y.some(kI)&&(z=KW(z,a)),G=rd(G,z,!1,!0))}return n.dirs&&(G=rd(G,null,!1,!0),G.dirs=G.dirs?G.dirs.concat(n.dirs):n.dirs),n.transition&&Wf(G,n.transition),F=G,z1(R),F}const qW=e=>{let t;for(const n in e)(n==="class"||n==="style"||Gw(n))&&((t||(t={}))[n]=e[n]);return t},KW=(e,t)=>{const n={};for(const i in e)(!kI(i)||!(i.slice(9)in t))&&(n[i]=e[i]);return n};function XW(e,t,n){const{props:i,children:r,component:a}=e,{props:l,children:h,patchFlag:s}=t,p=a.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&s>=0){if(s&1024)return!0;if(s&16)return i?h3(i,l,p):!!l;if(s&8){const _=t.dynamicProps;for(let x=0;x<_.length;x++){const T=_[x];if(l[T]!==i[T]&&!rT(p,T))return!0}}}else return(r||h)&&(!h||!h.$stable)?!0:i===l?!1:i?l?h3(i,l,p):!0:!!l;return!1}function h3(e,t,n){const i=Object.keys(t);if(i.length!==Object.keys(e).length)return!0;for(let r=0;r<i.length;r++){const a=i[r];if(t[a]!==e[a]&&!rT(n,a))return!0}return!1}function YW({vnode:e,parent:t},n){for(;t;){const i=t.subTree;if(i.suspense&&i.suspense.activeBranch===e&&(i.el=e.el),i===e)(e=t.vnode).el=n,t=t.parent;else break}}const j1=e=>e.__isSuspense;function ZW(e,t){t&&t.pendingBranch?Zn(e)?t.effects.push(...e):t.effects.push(e):cW(e)}const an=Symbol.for("v-fgt"),hb=Symbol.for("v-txt"),Bo=Symbol.for("v-cmt"),d1=Symbol.for("v-stc"),e0=[];let tc=null;function Gt(e=!1){e0.push(tc=e?null:[])}function JW(){e0.pop(),tc=e0[e0.length-1]||null}let x0=1;function W1(e,t=!1){x0+=e,e<0&&tc&&t&&(tc.hasOnce=!0)}function TB(e){return e.dynamicChildren=x0>0?tc||Tv:null,JW(),x0>0&&tc&&tc.push(e),e}function on(e,t,n,i,r,a){return TB(V(e,t,n,i,r,a,!0))}function Fa(e,t,n,i,r){return TB(ce(e,t,n,i,r,!0))}function Bp(e){return e?e.__v_isVNode===!0:!1}function bf(e,t){return e.type===t.type&&e.key===t.key}const SB=({key:e})=>e??null,h1=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?es(e)||Vs(e)||_i(e)?{i:aa,r:e,k:t,f:!!n}:e:null);function V(e,t=null,n=null,i=0,r=null,a=e===an?0:1,l=!1,h=!1){const s={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&SB(t),ref:t&&h1(t),scopeId:WV,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:i,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:aa};return h?(WI(s,n),a&128&&e.normalize(s)):n&&(s.shapeFlag|=es(n)?8:16),x0>0&&!l&&tc&&(s.patchFlag>0||a&6)&&s.patchFlag!==32&&tc.push(s),s}const ce=QW;function QW(e,t=null,n=null,i=0,r=null,a=!1){if((!e||e===sB)&&(e=Bo),Bp(e)){const h=rd(e,t,!0);return n&&WI(h,n),x0>0&&!a&&tc&&(h.shapeFlag&6?tc[tc.indexOf(e)]=h:tc.push(h)),h.patchFlag=-2,h}if(aH(e)&&(e=e.__vccOpts),t){t=EB(t);let{class:h,style:s}=t;h&&!es(h)&&(t.class=_t(h)),Pr(s)&&(Jw(s)&&!Zn(s)&&(s=xo({},s)),t.style=Xt(s))}const l=es(e)?1:j1(e)?128:GV(e)?64:Pr(e)?4:_i(e)?2:0;return V(e,t,n,i,r,l,a,!0)}function EB(e){return e?Jw(e)||mB(e)?xo({},e):e:null}function rd(e,t,n=!1,i=!1){const{props:r,ref:a,patchFlag:l,children:h,transition:s}=e,p=t?At(r||{},t):r,_={__v_isVNode:!0,__v_skip:!0,type:e.type,props:p,key:p&&SB(p),ref:t&&t.ref?n&&a?Zn(a)?a.concat(h1(t)):[a,h1(t)]:h1(t):a,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:h,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==an?l===-1?16:l|16:l,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:s,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&rd(e.ssContent),ssFallback:e.ssFallback&&rd(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return s&&i&&Wf(_,s.clone(_)),_}function Bn(e=" ",t=0){return ce(hb,null,e,t)}function H1(e,t){const n=ce(d1,null,e);return n.staticCount=t,n}function xi(e="",t=!1){return t?(Gt(),Fa(Bo,null,e)):ce(Bo,null,e)}function Gu(e){return e==null||typeof e=="boolean"?ce(Bo):Zn(e)?ce(an,null,e.slice()):Bp(e)?vf(e):ce(hb,null,String(e))}function vf(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:rd(e)}function WI(e,t){let n=0;const{shapeFlag:i}=e;if(t==null)t=null;else if(Zn(t))n=16;else if(typeof t=="object")if(i&65){const r=t.default;r&&(r._c&&(r._d=!1),WI(e,r()),r._c&&(r._d=!0));return}else{n=32;const r=t._;!r&&!mB(t)?t._ctx=aa:r===3&&aa&&(aa.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else _i(t)?(t={default:t,_ctx:aa},n=32):(t=String(t),i&64?(n=16,t=[Bn(t)]):n=8);e.children=t,e.shapeFlag|=n}function At(...e){const t={};for(let n=0;n<e.length;n++){const i=e[n];for(const r in i)if(r==="class")t.class!==i.class&&(t.class=_t([t.class,i.class]));else if(r==="style")t.style=Xt([t.style,i.style]);else if(Gw(r)){const a=t[r],l=i[r];l&&a!==l&&!(Zn(a)&&a.includes(l))&&(t[r]=a?[].concat(a,l):l)}else r!==""&&(t[r]=i[r])}return t}function Pc(e,t,n,i=null){mu(e,t,7,[n,i])}const eH=dB();let tH=0;function nH(e,t,n){const i=e.type,r=(t?t.appContext:e.appContext)||eH,a={uid:tH++,vnode:e,type:i,parent:t,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new bV(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(r.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:gB(i,r),emitsOptions:wB(i,r),emit:null,emitted:null,propsDefaults:$r,inheritAttrs:i.inheritAttrs,ctx:$r,data:$r,props:$r,attrs:$r,slots:$r,refs:$r,setupState:$r,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=t?t.root:a,a.emit=HW.bind(null,a),e.ce&&e.ce(a),a}let Va=null;const p_=()=>Va||aa;let G1,FC;{const e=Xw(),t=(n,i)=>{let r;return(r=e[n])||(r=e[n]=[]),r.push(i),a=>{r.length>1?r.forEach(l=>l(a)):r[0](a)}};G1=t("__VUE_INSTANCE_SETTERS__",n=>Va=n),FC=t("__VUE_SSR_SETTERS__",n=>w0=n)}const fb=e=>{const t=Va;return G1(e),e.scope.on(),()=>{e.scope.off(),G1(t)}},f3=()=>{Va&&Va.scope.off(),G1(null)};function CB(e){return e.vnode.shapeFlag&4}let w0=!1;function iH(e,t=!1,n=!1){t&&FC(t);const{props:i,children:r}=e.vnode,a=CB(e);MW(e,i,a,t),OW(e,r,n||t);const l=a?rH(e,t):void 0;return t&&FC(!1),l}function rH(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,TW);const{setup:i}=n;if(i){fh();const r=e.setupContext=i.length>1?oH(e):null,a=fb(e),l=db(i,e,0,[e.props,r]),h=fV(l);if(mh(),a(),(h||e.sp)&&!wp(e)&&tB(e),h){if(l.then(f3,f3),t)return l.then(s=>{m3(e,s)}).catch(s=>{Qw(s,e,0)});e.asyncDep=l}else m3(e,l)}else kB(e)}function m3(e,t,n){_i(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Pr(t)&&(e.setupState=FV(t)),kB(e)}function kB(e,t,n){const i=e.type;e.render||(e.render=i.render||Xu);{const r=fb(e);fh();try{SW(e)}finally{mh(),r()}}}const sH={get(e,t){return Ra(e,"get",""),e[t]}};function oH(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,sH),slots:e.slots,emit:e.emit,expose:t}}function sT(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(FV(VV(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Qy)return Qy[n](e)},has(t,n){return n in t||n in Qy}})):e.proxy}function zC(e,t=!0){return _i(e)?e.displayName||e.name:e.name||t&&e.__name}function aH(e){return _i(e)&&"__vccOpts"in e}const me=(e,t)=>rW(e,t,w0);function Sh(e,t,n){try{W1(-1);const i=arguments.length;return i===2?Pr(t)&&!Zn(t)?Bp(t)?ce(e,null,[t]):ce(e,t):ce(e,null,t):(i>3?n=Array.prototype.slice.call(arguments,2):i===3&&Bp(n)&&(n=[n]),ce(e,t,n))}finally{W1(1)}}const lH="3.5.22";/**
* @vue/runtime-dom v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let NC;const p3=typeof window<"u"&&window.trustedTypes;if(p3)try{NC=p3.createPolicy("vue",{createHTML:e=>e})}catch{}const IB=NC?e=>NC.createHTML(e):e=>e,cH="http://www.w3.org/2000/svg",uH="http://www.w3.org/1998/Math/MathML",Zd=typeof document<"u"?document:null,g3=Zd&&Zd.createElement("template"),dH={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,i)=>{const r=t==="svg"?Zd.createElementNS(cH,e):t==="mathml"?Zd.createElementNS(uH,e):n?Zd.createElement(e,{is:n}):Zd.createElement(e);return e==="select"&&i&&i.multiple!=null&&r.setAttribute("multiple",i.multiple),r},createText:e=>Zd.createTextNode(e),createComment:e=>Zd.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Zd.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,i,r,a){const l=n?n.previousSibling:t.lastChild;if(r&&(r===a||r.nextSibling))for(;t.insertBefore(r.cloneNode(!0),n),!(r===a||!(r=r.nextSibling)););else{g3.innerHTML=IB(i==="svg"?`<svg>${e}</svg>`:i==="mathml"?`<math>${e}</math>`:e);const h=g3.content;if(i==="svg"||i==="mathml"){const s=h.firstChild;for(;s.firstChild;)h.appendChild(s.firstChild);h.removeChild(s)}t.insertBefore(h,n)}return[l?l.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},ff="transition",wy="animation",zv=Symbol("_vtc"),AB={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},PB=xo({},YV,AB),hH=e=>(e.displayName="Transition",e.props=PB,e),Rl=hH((e,{slots:t})=>Sh(fW,MB(e),t)),ep=(e,t=[])=>{Zn(e)?e.forEach(n=>n(...t)):e&&e(...t)},v3=e=>e?Zn(e)?e.some(t=>t.length>1):e.length>1:!1;function MB(e){const t={};for(const Q in e)Q in AB||(t[Q]=e[Q]);if(e.css===!1)return t;const{name:n="v",type:i,duration:r,enterFromClass:a=`${n}-enter-from`,enterActiveClass:l=`${n}-enter-active`,enterToClass:h=`${n}-enter-to`,appearFromClass:s=a,appearActiveClass:p=l,appearToClass:_=h,leaveFromClass:x=`${n}-leave-from`,leaveActiveClass:T=`${n}-leave-active`,leaveToClass:k=`${n}-leave-to`}=e,A=fH(r),M=A&&A[0],R=A&&A[1],{onBeforeEnter:F,onEnter:z,onEnterCancelled:G,onLeave:Y,onLeaveCancelled:J,onBeforeAppear:re=F,onAppear:X=z,onAppearCancelled:U=G}=t,H=(Q,te,ke,Re)=>{Q._enterCancelled=Re,pf(Q,te?_:h),pf(Q,te?p:l),ke&&ke()},W=(Q,te)=>{Q._isLeaving=!1,pf(Q,x),pf(Q,k),pf(Q,T),te&&te()},ie=Q=>(te,ke)=>{const Re=Q?X:z,Be=()=>H(te,Q,ke);ep(Re,[te,Be]),_3(()=>{pf(te,Q?s:a),Nu(te,Q?_:h),v3(Re)||y3(te,i,M,Be)})};return xo(t,{onBeforeEnter(Q){ep(F,[Q]),Nu(Q,a),Nu(Q,l)},onBeforeAppear(Q){ep(re,[Q]),Nu(Q,s),Nu(Q,p)},onEnter:ie(!1),onAppear:ie(!0),onLeave(Q,te){Q._isLeaving=!0;const ke=()=>W(Q,te);Nu(Q,x),Q._enterCancelled?(Nu(Q,T),$C(Q)):($C(Q),Nu(Q,T)),_3(()=>{Q._isLeaving&&(pf(Q,x),Nu(Q,k),v3(Y)||y3(Q,i,R,ke))}),ep(Y,[Q,ke])},onEnterCancelled(Q){H(Q,!1,void 0,!0),ep(G,[Q])},onAppearCancelled(Q){H(Q,!0,void 0,!0),ep(U,[Q])},onLeaveCancelled(Q){W(Q),ep(J,[Q])}})}function fH(e){if(e==null)return null;if(Pr(e))return[AE(e.enter),AE(e.leave)];{const t=AE(e);return[t,t]}}function AE(e){return Tj(e)}function Nu(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e[zv]||(e[zv]=new Set)).add(t)}function pf(e,t){t.split(/\s+/).forEach(i=>i&&e.classList.remove(i));const n=e[zv];n&&(n.delete(t),n.size||(e[zv]=void 0))}function _3(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let mH=0;function y3(e,t,n,i){const r=e._endId=++mH,a=()=>{r===e._endId&&i()};if(n!=null)return setTimeout(a,n);const{type:l,timeout:h,propCount:s}=DB(e,t);if(!l)return i();const p=l+"end";let _=0;const x=()=>{e.removeEventListener(p,T),a()},T=k=>{k.target===e&&++_>=s&&x()};setTimeout(()=>{_<s&&x()},h+1),e.addEventListener(p,T)}function DB(e,t){const n=window.getComputedStyle(e),i=A=>(n[A]||"").split(", "),r=i(`${ff}Delay`),a=i(`${ff}Duration`),l=b3(r,a),h=i(`${wy}Delay`),s=i(`${wy}Duration`),p=b3(h,s);let _=null,x=0,T=0;t===ff?l>0&&(_=ff,x=l,T=a.length):t===wy?p>0&&(_=wy,x=p,T=s.length):(x=Math.max(l,p),_=x>0?l>p?ff:wy:null,T=_?_===ff?a.length:s.length:0);const k=_===ff&&/\b(?:transform|all)(?:,|$)/.test(i(`${ff}Property`).toString());return{type:_,timeout:x,propCount:T,hasTransform:k}}function b3(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,i)=>x3(n)+x3(e[i])))}function x3(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function $C(e){return(e?e.ownerDocument:document).body.offsetHeight}function pH(e,t,n){const i=e[zv];i&&(t=(t?[t,...i]:[...i]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const q1=Symbol("_vod"),LB=Symbol("_vsh"),_u={name:"show",beforeMount(e,{value:t},{transition:n}){e[q1]=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):Ty(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:i}){!t!=!n&&(i?t?(i.beforeEnter(e),Ty(e,!0),i.enter(e)):i.leave(e,()=>{Ty(e,!1)}):Ty(e,t))},beforeUnmount(e,{value:t}){Ty(e,t)}};function Ty(e,t){e.style.display=t?e[q1]:"none",e[LB]=!t}const gH=Symbol(""),vH=/(?:^|;)\s*display\s*:/;function _H(e,t,n){const i=e.style,r=es(n);let a=!1;if(n&&!r){if(t)if(es(t))for(const l of t.split(";")){const h=l.slice(0,l.indexOf(":")).trim();n[h]==null&&f1(i,h,"")}else for(const l in t)n[l]==null&&f1(i,l,"");for(const l in n)l==="display"&&(a=!0),f1(i,l,n[l])}else if(r){if(t!==n){const l=i[gH];l&&(n+=";"+l),i.cssText=n,a=vH.test(n)}}else t&&e.removeAttribute("style");q1 in e&&(e[q1]=a?i.display:"",e[LB]&&(i.display="none"))}const w3=/\s*!important$/;function f1(e,t,n){if(Zn(n))n.forEach(i=>f1(e,t,i));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const i=yH(e,t);w3.test(n)?e.setProperty(Qp(i),n.replace(w3,""),"important"):e[i]=n}}const T3=["Webkit","Moz","ms"],PE={};function yH(e,t){const n=PE[t];if(n)return n;let i=ll(t);if(i!=="filter"&&i in e)return PE[t]=i;i=hd(i);for(let r=0;r<T3.length;r++){const a=T3[r]+i;if(a in e)return PE[t]=a}return t}const S3="http://www.w3.org/1999/xlink";function E3(e,t,n,i,r,a=Pj(t)){i&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(S3,t.slice(6,t.length)):e.setAttributeNS(S3,t,n):n==null||a&&!vV(n)?e.removeAttribute(t):e.setAttribute(t,a?"":fu(n)?String(n):n)}function C3(e,t,n,i,r){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?IB(n):n);return}const a=e.tagName;if(t==="value"&&a!=="PROGRESS"&&!a.includes("-")){const h=a==="OPTION"?e.getAttribute("value")||"":e.value,s=n==null?e.type==="checkbox"?"on":"":String(n);(h!==s||!("_value"in e))&&(e.value=s),n==null&&e.removeAttribute(t),e._value=n;return}let l=!1;if(n===""||n==null){const h=typeof e[t];h==="boolean"?n=vV(n):n==null&&h==="string"?(n="",l=!0):h==="number"&&(n=0,l=!0)}try{e[t]=n}catch{}l&&e.removeAttribute(r||t)}function pp(e,t,n,i){e.addEventListener(t,n,i)}function bH(e,t,n,i){e.removeEventListener(t,n,i)}const k3=Symbol("_vei");function xH(e,t,n,i,r=null){const a=e[k3]||(e[k3]={}),l=a[t];if(i&&l)l.value=i;else{const[h,s]=wH(t);if(i){const p=a[t]=EH(i,r);pp(e,h,p,s)}else l&&(bH(e,h,l,s),a[t]=void 0)}}const I3=/(?:Once|Passive|Capture)$/;function wH(e){let t;if(I3.test(e)){t={};let i;for(;i=e.match(I3);)e=e.slice(0,e.length-i[0].length),t[i[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Qp(e.slice(2)),t]}let ME=0;const TH=Promise.resolve(),SH=()=>ME||(TH.then(()=>ME=0),ME=Date.now());function EH(e,t){const n=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=n.attached)return;mu(CH(i,n.value),t,5,[i])};return n.value=e,n.attached=SH(),n}function CH(e,t){if(Zn(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(i=>r=>!r._stopped&&i&&i(r))}else return t}const A3=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,kH=(e,t,n,i,r,a)=>{const l=r==="svg";t==="class"?pH(e,i,l):t==="style"?_H(e,n,i):Gw(t)?kI(t)||xH(e,t,n,i,a):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):IH(e,t,i,l))?(C3(e,t,i),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&E3(e,t,i,l,a,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!es(i))?C3(e,ll(t),i,a,t):(t==="true-value"?e._trueValue=i:t==="false-value"&&(e._falseValue=i),E3(e,t,i,l))};function IH(e,t,n,i){if(i)return!!(t==="innerHTML"||t==="textContent"||t in e&&A3(t)&&_i(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const r=e.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return A3(t)&&es(n)?!1:t in e}const RB=new WeakMap,OB=new WeakMap,K1=Symbol("_moveCb"),P3=Symbol("_enterCb"),AH=e=>(delete e.props.mode,e),PH=AH({name:"TransitionGroup",props:xo({},PB,{tag:String,moveClass:String}),setup(e,{slots:t}){const n=p_(),i=XV();let r,a;return iT(()=>{if(!r.length)return;const l=e.moveClass||`${e.name||"v"}-move`;if(!RH(r[0].el,n.vnode.el,l)){r=[];return}r.forEach(MH),r.forEach(DH);const h=r.filter(LH);$C(n.vnode.el),h.forEach(s=>{const p=s.el,_=p.style;Nu(p,l),_.transform=_.webkitTransform=_.transitionDuration="";const x=p[K1]=T=>{T&&T.target!==p||(!T||T.propertyName.endsWith("transform"))&&(p.removeEventListener("transitionend",x),p[K1]=null,pf(p,l))};p.addEventListener("transitionend",x)}),r=[]}),()=>{const l=Un(e),h=MB(l);let s=l.tag||an;if(r=[],a)for(let p=0;p<a.length;p++){const _=a[p];_.el&&_.el instanceof Element&&(r.push(_),Wf(_,b0(_,h,i,n)),RB.set(_,_.el.getBoundingClientRect()))}a=t.default?BI(t.default()):[];for(let p=0;p<a.length;p++){const _=a[p];_.key!=null&&Wf(_,b0(_,h,i,n))}return ce(s,null,a)}}}),HI=PH;function MH(e){const t=e.el;t[K1]&&t[K1](),t[P3]&&t[P3]()}function DH(e){OB.set(e,e.el.getBoundingClientRect())}function LH(e){const t=RB.get(e),n=OB.get(e),i=t.left-n.left,r=t.top-n.top;if(i||r){const a=e.el.style;return a.transform=a.webkitTransform=`translate(${i}px,${r}px)`,a.transitionDuration="0s",e}}function RH(e,t,n){const i=e.cloneNode(),r=e[zv];r&&r.forEach(h=>{h.split(/\s+/).forEach(s=>s&&i.classList.remove(s))}),n.split(/\s+/).forEach(h=>h&&i.classList.add(h)),i.style.display="none";const a=t.nodeType===1?t:t.parentNode;a.appendChild(i);const{hasTransform:l}=DB(i);return a.removeChild(i),l}const X1=e=>{const t=e.props["onUpdate:modelValue"]||!1;return Zn(t)?n=>Ev(t,n):t};function OH(e){e.target.composing=!0}function M3(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Iv=Symbol("_assign"),_f={created(e,{modifiers:{lazy:t,trim:n,number:i}},r){e[Iv]=X1(r);const a=i||r.props&&r.props.type==="number";pp(e,t?"change":"input",l=>{if(l.target.composing)return;let h=e.value;n&&(h=h.trim()),a&&(h=R1(h)),e[Iv](h)}),n&&pp(e,"change",()=>{e.value=e.value.trim()}),t||(pp(e,"compositionstart",OH),pp(e,"compositionend",M3),pp(e,"change",M3))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:i,trim:r,number:a}},l){if(e[Iv]=X1(l),e.composing)return;const h=(a||e.type==="number")&&!/^0\d/.test(e.value)?R1(e.value):e.value,s=t??"";h!==s&&(document.activeElement===e&&e.type!=="range"&&(i&&t===n||r&&e.value.trim()===s)||(e.value=s))}},T0={deep:!0,created(e,{value:t,modifiers:{number:n}},i){const r=qw(t);pp(e,"change",()=>{const a=Array.prototype.filter.call(e.options,l=>l.selected).map(l=>n?R1(Y1(l)):Y1(l));e[Iv](e.multiple?r?new Set(a):a:a[0]),e._assigning=!0,Hn(()=>{e._assigning=!1})}),e[Iv]=X1(i)},mounted(e,{value:t}){D3(e,t)},beforeUpdate(e,t,n){e[Iv]=X1(n)},updated(e,{value:t}){e._assigning||D3(e,t)}};function D3(e,t){const n=e.multiple,i=Zn(t);if(!(n&&!i&&!qw(t))){for(let r=0,a=e.options.length;r<a;r++){const l=e.options[r],h=Y1(l);if(n)if(i){const s=typeof h;s==="string"||s==="number"?l.selected=t.some(p=>String(p)===String(h)):l.selected=Dj(t,h)>-1}else l.selected=t.has(h);else if(Yw(Y1(l),t)){e.selectedIndex!==r&&(e.selectedIndex=r);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function Y1(e){return"_value"in e?e._value:e.value}const VH=["ctrl","shift","alt","meta"],BH={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>VH.some(n=>e[`${n}Key`]&&!t.includes(n))},ra=(e,t)=>{const n=e._withMods||(e._withMods={}),i=t.join(".");return n[i]||(n[i]=((r,...a)=>{for(let l=0;l<t.length;l++){const h=BH[t[l]];if(h&&h(r,t))return}return e(r,...a)}))},FH=xo({patchProp:kH},dH);let L3;function VB(){return L3||(L3=BW(FH))}const BB=((...e)=>{VB().render(...e)}),zH=((...e)=>{const t=VB().createApp(...e),{mount:n}=t;return t.mount=i=>{const r=$H(i);if(!r)return;const a=t._component;!_i(a)&&!a.render&&!a.template&&(a.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const l=n(r,!1,NH(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),l},t});function NH(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function $H(e){return es(e)?document.querySelector(e):e}const FB=""+new URL("MrtFootage-DMPXgCOJ.mp4",import.meta.url).href;function zB(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var m1={exports:{}},UH=m1.exports,R3;function jH(){return R3||(R3=1,(function(e,t){(function(n,i){e.exports=i()})(UH,function(){return(function(n){function i(a){if(r[a])return r[a].exports;var l=r[a]={exports:{},id:a,loaded:!1};return n[a].call(l.exports,l,l.exports,i),l.loaded=!0,l.exports}var r={};return i.m=n,i.c=r,i.p="dist/",i(0)})([function(n,i,r){function a(ke){return ke&&ke.__esModule?ke:{default:ke}}var l=Object.assign||function(ke){for(var Re=1;Re<arguments.length;Re++){var Be=arguments[Re];for(var Je in Be)Object.prototype.hasOwnProperty.call(Be,Je)&&(ke[Je]=Be[Je])}return ke},h=r(1),s=(a(h),r(6)),p=a(s),_=r(7),x=a(_),T=r(8),k=a(T),A=r(9),M=a(A),R=r(10),F=a(R),z=r(11),G=a(z),Y=r(14),J=a(Y),re=[],X=!1,U={offset:120,delay:0,easing:"ease",duration:400,disable:!1,once:!1,startEvent:"DOMContentLoaded",throttleDelay:99,debounceDelay:50,disableMutationObserver:!1},H=function(){var ke=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(ke&&(X=!0),X)return re=(0,G.default)(re,U),(0,F.default)(re,U.once),re},W=function(){re=(0,J.default)(),H()},ie=function(){re.forEach(function(ke,Re){ke.node.removeAttribute("data-aos"),ke.node.removeAttribute("data-aos-easing"),ke.node.removeAttribute("data-aos-duration"),ke.node.removeAttribute("data-aos-delay")})},Q=function(ke){return ke===!0||ke==="mobile"&&M.default.mobile()||ke==="phone"&&M.default.phone()||ke==="tablet"&&M.default.tablet()||typeof ke=="function"&&ke()===!0},te=function(ke){U=l(U,ke),re=(0,J.default)();var Re=document.all&&!window.atob;return Q(U.disable)||Re?ie():(U.disableMutationObserver||k.default.isSupported()||(console.info(`
      aos: MutationObserver is not supported on this browser,
      code mutations observing has been disabled.
      You may have to call "refreshHard()" by yourself.
    `),U.disableMutationObserver=!0),document.querySelector("body").setAttribute("data-aos-easing",U.easing),document.querySelector("body").setAttribute("data-aos-duration",U.duration),document.querySelector("body").setAttribute("data-aos-delay",U.delay),U.startEvent==="DOMContentLoaded"&&["complete","interactive"].indexOf(document.readyState)>-1?H(!0):U.startEvent==="load"?window.addEventListener(U.startEvent,function(){H(!0)}):document.addEventListener(U.startEvent,function(){H(!0)}),window.addEventListener("resize",(0,x.default)(H,U.debounceDelay,!0)),window.addEventListener("orientationchange",(0,x.default)(H,U.debounceDelay,!0)),window.addEventListener("scroll",(0,p.default)(function(){(0,F.default)(re,U.once)},U.throttleDelay)),U.disableMutationObserver||k.default.ready("[data-aos]",W),re)};n.exports={init:te,refresh:H,refreshHard:W}},function(n,i){},,,,,function(n,i){(function(r){function a(Q,te,ke){function Re(fe){var Ie=mt,je=Pt;return mt=Pt=void 0,kt=fe,ct=Q.apply(je,Ie)}function Be(fe){return kt=fe,ht=setTimeout(De,te),Ue?Re(fe):ct}function Je(fe){var Ie=fe-Qe,je=fe-kt,Xe=te-Ie;return ue?W(Xe,$t-je):Xe}function nt(fe){var Ie=fe-Qe,je=fe-kt;return Qe===void 0||Ie>=te||Ie<0||ue&&je>=$t}function De(){var fe=ie();return nt(fe)?Ge(fe):void(ht=setTimeout(De,Je(fe)))}function Ge(fe){return ht=void 0,we&&mt?Re(fe):(mt=Pt=void 0,ct)}function Ee(){ht!==void 0&&clearTimeout(ht),kt=0,mt=Qe=Pt=ht=void 0}function it(){return ht===void 0?ct:Ge(ie())}function ot(){var fe=ie(),Ie=nt(fe);if(mt=arguments,Pt=this,Qe=fe,Ie){if(ht===void 0)return Be(Qe);if(ue)return ht=setTimeout(De,te),Re(Qe)}return ht===void 0&&(ht=setTimeout(De,te)),ct}var mt,Pt,$t,ct,ht,Qe,kt=0,Ue=!1,ue=!1,we=!0;if(typeof Q!="function")throw new TypeError(T);return te=_(te)||0,h(ke)&&(Ue=!!ke.leading,ue="maxWait"in ke,$t=ue?H(_(ke.maxWait)||0,te):$t,we="trailing"in ke?!!ke.trailing:we),ot.cancel=Ee,ot.flush=it,ot}function l(Q,te,ke){var Re=!0,Be=!0;if(typeof Q!="function")throw new TypeError(T);return h(ke)&&(Re="leading"in ke?!!ke.leading:Re,Be="trailing"in ke?!!ke.trailing:Be),a(Q,te,{leading:Re,maxWait:te,trailing:Be})}function h(Q){var te=typeof Q>"u"?"undefined":x(Q);return!!Q&&(te=="object"||te=="function")}function s(Q){return!!Q&&(typeof Q>"u"?"undefined":x(Q))=="object"}function p(Q){return(typeof Q>"u"?"undefined":x(Q))=="symbol"||s(Q)&&U.call(Q)==A}function _(Q){if(typeof Q=="number")return Q;if(p(Q))return k;if(h(Q)){var te=typeof Q.valueOf=="function"?Q.valueOf():Q;Q=h(te)?te+"":te}if(typeof Q!="string")return Q===0?Q:+Q;Q=Q.replace(M,"");var ke=F.test(Q);return ke||z.test(Q)?G(Q.slice(2),ke?2:8):R.test(Q)?k:+Q}var x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Q){return typeof Q}:function(Q){return Q&&typeof Symbol=="function"&&Q.constructor===Symbol&&Q!==Symbol.prototype?"symbol":typeof Q},T="Expected a function",k=NaN,A="[object Symbol]",M=/^\s+|\s+$/g,R=/^[-+]0x[0-9a-f]+$/i,F=/^0b[01]+$/i,z=/^0o[0-7]+$/i,G=parseInt,Y=(typeof r>"u"?"undefined":x(r))=="object"&&r&&r.Object===Object&&r,J=(typeof self>"u"?"undefined":x(self))=="object"&&self&&self.Object===Object&&self,re=Y||J||Function("return this")(),X=Object.prototype,U=X.toString,H=Math.max,W=Math.min,ie=function(){return re.Date.now()};n.exports=l}).call(i,(function(){return this})())},function(n,i){(function(r){function a(ie,Q,te){function ke(we){var fe=ot,Ie=mt;return ot=mt=void 0,Qe=we,$t=ie.apply(Ie,fe)}function Re(we){return Qe=we,ct=setTimeout(nt,Q),kt?ke(we):$t}function Be(we){var fe=we-ht,Ie=we-Qe,je=Q-fe;return Ue?H(je,Pt-Ie):je}function Je(we){var fe=we-ht,Ie=we-Qe;return ht===void 0||fe>=Q||fe<0||Ue&&Ie>=Pt}function nt(){var we=W();return Je(we)?De(we):void(ct=setTimeout(nt,Be(we)))}function De(we){return ct=void 0,ue&&ot?ke(we):(ot=mt=void 0,$t)}function Ge(){ct!==void 0&&clearTimeout(ct),Qe=0,ot=ht=mt=ct=void 0}function Ee(){return ct===void 0?$t:De(W())}function it(){var we=W(),fe=Je(we);if(ot=arguments,mt=this,ht=we,fe){if(ct===void 0)return Re(ht);if(Ue)return ct=setTimeout(nt,Q),ke(ht)}return ct===void 0&&(ct=setTimeout(nt,Q)),$t}var ot,mt,Pt,$t,ct,ht,Qe=0,kt=!1,Ue=!1,ue=!0;if(typeof ie!="function")throw new TypeError(x);return Q=p(Q)||0,l(te)&&(kt=!!te.leading,Ue="maxWait"in te,Pt=Ue?U(p(te.maxWait)||0,Q):Pt,ue="trailing"in te?!!te.trailing:ue),it.cancel=Ge,it.flush=Ee,it}function l(ie){var Q=typeof ie>"u"?"undefined":_(ie);return!!ie&&(Q=="object"||Q=="function")}function h(ie){return!!ie&&(typeof ie>"u"?"undefined":_(ie))=="object"}function s(ie){return(typeof ie>"u"?"undefined":_(ie))=="symbol"||h(ie)&&X.call(ie)==k}function p(ie){if(typeof ie=="number")return ie;if(s(ie))return T;if(l(ie)){var Q=typeof ie.valueOf=="function"?ie.valueOf():ie;ie=l(Q)?Q+"":Q}if(typeof ie!="string")return ie===0?ie:+ie;ie=ie.replace(A,"");var te=R.test(ie);return te||F.test(ie)?z(ie.slice(2),te?2:8):M.test(ie)?T:+ie}var _=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ie){return typeof ie}:function(ie){return ie&&typeof Symbol=="function"&&ie.constructor===Symbol&&ie!==Symbol.prototype?"symbol":typeof ie},x="Expected a function",T=NaN,k="[object Symbol]",A=/^\s+|\s+$/g,M=/^[-+]0x[0-9a-f]+$/i,R=/^0b[01]+$/i,F=/^0o[0-7]+$/i,z=parseInt,G=(typeof r>"u"?"undefined":_(r))=="object"&&r&&r.Object===Object&&r,Y=(typeof self>"u"?"undefined":_(self))=="object"&&self&&self.Object===Object&&self,J=G||Y||Function("return this")(),re=Object.prototype,X=re.toString,U=Math.max,H=Math.min,W=function(){return J.Date.now()};n.exports=a}).call(i,(function(){return this})())},function(n,i){function r(_){var x=void 0,T=void 0;for(x=0;x<_.length;x+=1)if(T=_[x],T.dataset&&T.dataset.aos||T.children&&r(T.children))return!0;return!1}function a(){return window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver}function l(){return!!a()}function h(_,x){var T=window.document,k=a(),A=new k(s);p=x,A.observe(T.documentElement,{childList:!0,subtree:!0,removedNodes:!0})}function s(_){_&&_.forEach(function(x){var T=Array.prototype.slice.call(x.addedNodes),k=Array.prototype.slice.call(x.removedNodes),A=T.concat(k);if(r(A))return p()})}Object.defineProperty(i,"__esModule",{value:!0});var p=function(){};i.default={isSupported:l,ready:h}},function(n,i){function r(T,k){if(!(T instanceof k))throw new TypeError("Cannot call a class as a function")}function a(){return navigator.userAgent||navigator.vendor||window.opera||""}Object.defineProperty(i,"__esModule",{value:!0});var l=(function(){function T(k,A){for(var M=0;M<A.length;M++){var R=A[M];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(k,R.key,R)}}return function(k,A,M){return A&&T(k.prototype,A),M&&T(k,M),k}})(),h=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,s=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,p=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i,_=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,x=(function(){function T(){r(this,T)}return l(T,[{key:"phone",value:function(){var k=a();return!(!h.test(k)&&!s.test(k.substr(0,4)))}},{key:"mobile",value:function(){var k=a();return!(!p.test(k)&&!_.test(k.substr(0,4)))}},{key:"tablet",value:function(){return this.mobile()&&!this.phone()}}]),T})();i.default=new x},function(n,i){Object.defineProperty(i,"__esModule",{value:!0});var r=function(l,h,s){var p=l.node.getAttribute("data-aos-once");h>l.position?l.node.classList.add("aos-animate"):typeof p<"u"&&(p==="false"||!s&&p!=="true")&&l.node.classList.remove("aos-animate")},a=function(l,h){var s=window.pageYOffset,p=window.innerHeight;l.forEach(function(_,x){r(_,p+s,h)})};i.default=a},function(n,i,r){function a(p){return p&&p.__esModule?p:{default:p}}Object.defineProperty(i,"__esModule",{value:!0});var l=r(12),h=a(l),s=function(p,_){return p.forEach(function(x,T){x.node.classList.add("aos-init"),x.position=(0,h.default)(x.node,_.offset)}),p};i.default=s},function(n,i,r){function a(p){return p&&p.__esModule?p:{default:p}}Object.defineProperty(i,"__esModule",{value:!0});var l=r(13),h=a(l),s=function(p,_){var x=0,T=0,k=window.innerHeight,A={offset:p.getAttribute("data-aos-offset"),anchor:p.getAttribute("data-aos-anchor"),anchorPlacement:p.getAttribute("data-aos-anchor-placement")};switch(A.offset&&!isNaN(A.offset)&&(T=parseInt(A.offset)),A.anchor&&document.querySelectorAll(A.anchor)&&(p=document.querySelectorAll(A.anchor)[0]),x=(0,h.default)(p).top,A.anchorPlacement){case"top-bottom":break;case"center-bottom":x+=p.offsetHeight/2;break;case"bottom-bottom":x+=p.offsetHeight;break;case"top-center":x+=k/2;break;case"bottom-center":x+=k/2+p.offsetHeight;break;case"center-center":x+=k/2+p.offsetHeight/2;break;case"top-top":x+=k;break;case"bottom-top":x+=p.offsetHeight+k;break;case"center-top":x+=p.offsetHeight/2+k}return A.anchorPlacement||A.offset||isNaN(_)||(T=_),x+T};i.default=s},function(n,i){Object.defineProperty(i,"__esModule",{value:!0});var r=function(a){for(var l=0,h=0;a&&!isNaN(a.offsetLeft)&&!isNaN(a.offsetTop);)l+=a.offsetLeft-(a.tagName!="BODY"?a.scrollLeft:0),h+=a.offsetTop-(a.tagName!="BODY"?a.scrollTop:0),a=a.offsetParent;return{top:h,left:l}};i.default=r},function(n,i){Object.defineProperty(i,"__esModule",{value:!0});var r=function(a){return a=a||document.querySelectorAll("[data-aos]"),Array.prototype.map.call(a,function(l){return{node:l}})};i.default=r}])})})(m1)),m1.exports}var WH=jH();const Ox=zB(WH);function Jd(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function NB(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}/*!
 * GSAP 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var ac={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Nv={duration:.5,overwrite:!1,delay:0},GI,la,ls,Rc=1e8,Nr=1/Rc,UC=Math.PI*2,HH=UC/4,GH=0,$B=Math.sqrt,qH=Math.cos,KH=Math.sin,No=function(t){return typeof t=="string"},Rs=function(t){return typeof t=="function"},ph=function(t){return typeof t=="number"},qI=function(t){return typeof t>"u"},sd=function(t){return typeof t=="object"},Pl=function(t){return t!==!1},KI=function(){return typeof window<"u"},Vx=function(t){return Rs(t)||No(t)},UB=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},ja=Array.isArray,jC=/(?:-?\.?\d|\.)+/gi,jB=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,gv=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,DE=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,WB=/[+-]=-?[.\d]+/,HB=/[^,'"\[\]\s]+/gi,XH=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,_s,Wu,WC,XI,lc={},Z1={},GB,qB=function(t){return(Z1=$v(t,lc))&&Ol},YI=function(t,n){return console.warn("Invalid property",t,"set to",n,"Missing plugin? gsap.registerPlugin()")},S0=function(t,n){return!n&&console.warn(t)},KB=function(t,n){return t&&(lc[t]=n)&&Z1&&(Z1[t]=n)||lc},E0=function(){return 0},YH={suppressEvents:!0,isStart:!0,kill:!1},p1={suppressEvents:!0,kill:!1},ZH={suppressEvents:!0},ZI={},Of=[],HC={},XB,Jl={},LE={},O3=30,g1=[],JI="",QI=function(t){var n=t[0],i,r;if(sd(n)||Rs(n)||(t=[t]),!(i=(n._gsap||{}).harness)){for(r=g1.length;r--&&!g1[r].targetTest(n););i=g1[r]}for(r=t.length;r--;)t[r]&&(t[r]._gsap||(t[r]._gsap=new y6(t[r],i)))||t.splice(r,1);return t},Tp=function(t){return t._gsap||QI(Oc(t))[0]._gsap},YB=function(t,n,i){return(i=t[n])&&Rs(i)?t[n]():qI(i)&&t.getAttribute&&t.getAttribute(n)||i},Ml=function(t,n){return(t=t.split(",")).forEach(n)||t},Ws=function(t){return Math.round(t*1e5)/1e5||0},ro=function(t){return Math.round(t*1e7)/1e7||0},Av=function(t,n){var i=n.charAt(0),r=parseFloat(n.substr(2));return t=parseFloat(t),i==="+"?t+r:i==="-"?t-r:i==="*"?t*r:t/r},JH=function(t,n){for(var i=n.length,r=0;t.indexOf(n[r])<0&&++r<i;);return r<i},J1=function(){var t=Of.length,n=Of.slice(0),i,r;for(HC={},Of.length=0,i=0;i<t;i++)r=n[i],r&&r._lazy&&(r.render(r._lazy[0],r._lazy[1],!0)._lazy=0)},eA=function(t){return!!(t._initted||t._startAt||t.add)},ZB=function(t,n,i,r){Of.length&&!la&&J1(),t.render(n,i,!!(la&&n<0&&eA(t))),Of.length&&!la&&J1()},JB=function(t){var n=parseFloat(t);return(n||n===0)&&(t+"").match(HB).length<2?n:No(t)?t.trim():t},QB=function(t){return t},cc=function(t,n){for(var i in n)i in t||(t[i]=n[i]);return t},QH=function(t){return function(n,i){for(var r in i)r in n||r==="duration"&&t||r==="ease"||(n[r]=i[r])}},$v=function(t,n){for(var i in n)t[i]=n[i];return t},V3=function e(t,n){for(var i in n)i!=="__proto__"&&i!=="constructor"&&i!=="prototype"&&(t[i]=sd(n[i])?e(t[i]||(t[i]={}),n[i]):n[i]);return t},Q1=function(t,n){var i={},r;for(r in t)r in n||(i[r]=t[r]);return i},t0=function(t){var n=t.parent||_s,i=t.keyframes?QH(ja(t.keyframes)):cc;if(Pl(t.inherit))for(;n;)i(t,n.vars.defaults),n=n.parent||n._dp;return t},eG=function(t,n){for(var i=t.length,r=i===n.length;r&&i--&&t[i]===n[i];);return i<0},e6=function(t,n,i,r,a){var l=t[r],h;if(a)for(h=n[a];l&&l[a]>h;)l=l._prev;return l?(n._next=l._next,l._next=n):(n._next=t[i],t[i]=n),n._next?n._next._prev=n:t[r]=n,n._prev=l,n.parent=n._dp=t,n},oT=function(t,n,i,r){i===void 0&&(i="_first"),r===void 0&&(r="_last");var a=n._prev,l=n._next;a?a._next=l:t[i]===n&&(t[i]=l),l?l._prev=a:t[r]===n&&(t[r]=a),n._next=n._prev=n.parent=null},Hf=function(t,n){t.parent&&(!n||t.parent.autoRemoveChildren)&&t.parent.remove&&t.parent.remove(t),t._act=0},Sp=function(t,n){if(t&&(!n||n._end>t._dur||n._start<0))for(var i=t;i;)i._dirty=1,i=i.parent;return t},tG=function(t){for(var n=t.parent;n&&n.parent;)n._dirty=1,n.totalDuration(),n=n.parent;return t},GC=function(t,n,i,r){return t._startAt&&(la?t._startAt.revert(p1):t.vars.immediateRender&&!t.vars.autoRevert||t._startAt.render(n,!0,r))},nG=function e(t){return!t||t._ts&&e(t.parent)},B3=function(t){return t._repeat?Uv(t._tTime,t=t.duration()+t._rDelay)*t:0},Uv=function(t,n){var i=Math.floor(t=ro(t/n));return t&&i===t?i-1:i},ew=function(t,n){return(t-n._start)*n._ts+(n._ts>=0?0:n._dirty?n.totalDuration():n._tDur)},aT=function(t){return t._end=ro(t._start+(t._tDur/Math.abs(t._ts||t._rts||Nr)||0))},lT=function(t,n){var i=t._dp;return i&&i.smoothChildTiming&&t._ts&&(t._start=ro(i._time-(t._ts>0?n/t._ts:((t._dirty?t.totalDuration():t._tDur)-n)/-t._ts)),aT(t),i._dirty||Sp(i,t)),t},t6=function(t,n){var i;if((n._time||!n._dur&&n._initted||n._start<t._time&&(n._dur||!n.add))&&(i=ew(t.rawTime(),n),(!n._dur||mb(0,n.totalDuration(),i)-n._tTime>Nr)&&n.render(i,!0)),Sp(t,n)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(i=t;i._dp;)i.rawTime()>=0&&i.totalTime(i._tTime),i=i._dp;t._zTime=-Nr}},qu=function(t,n,i,r){return n.parent&&Hf(n),n._start=ro((ph(i)?i:i||t!==_s?Mc(t,i,n):t._time)+n._delay),n._end=ro(n._start+(n.totalDuration()/Math.abs(n.timeScale())||0)),e6(t,n,"_first","_last",t._sort?"_start":0),qC(n)||(t._recent=n),r||t6(t,n),t._ts<0&&lT(t,t._tTime),t},n6=function(t,n){return(lc.ScrollTrigger||YI("scrollTrigger",n))&&lc.ScrollTrigger.create(n,t)},i6=function(t,n,i,r,a){if(nA(t,n,a),!t._initted)return 1;if(!i&&t._pt&&!la&&(t._dur&&t.vars.lazy!==!1||!t._dur&&t.vars.lazy)&&XB!==Ql.frame)return Of.push(t),t._lazy=[a,r],1},iG=function e(t){var n=t.parent;return n&&n._ts&&n._initted&&!n._lock&&(n.rawTime()<0||e(n))},qC=function(t){var n=t.data;return n==="isFromStart"||n==="isStart"},rG=function(t,n,i,r){var a=t.ratio,l=n<0||!n&&(!t._start&&iG(t)&&!(!t._initted&&qC(t))||(t._ts<0||t._dp._ts<0)&&!qC(t))?0:1,h=t._rDelay,s=0,p,_,x;if(h&&t._repeat&&(s=mb(0,t._tDur,n),_=Uv(s,h),t._yoyo&&_&1&&(l=1-l),_!==Uv(t._tTime,h)&&(a=1-l,t.vars.repeatRefresh&&t._initted&&t.invalidate())),l!==a||la||r||t._zTime===Nr||!n&&t._zTime){if(!t._initted&&i6(t,n,r,i,s))return;for(x=t._zTime,t._zTime=n||(i?Nr:0),i||(i=n&&!x),t.ratio=l,t._from&&(l=1-l),t._time=0,t._tTime=s,p=t._pt;p;)p.r(l,p.d),p=p._next;n<0&&GC(t,n,i,!0),t._onUpdate&&!i&&nc(t,"onUpdate"),s&&t._repeat&&!i&&t.parent&&nc(t,"onRepeat"),(n>=t._tDur||n<0)&&t.ratio===l&&(l&&Hf(t,1),!i&&!la&&(nc(t,l?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=n)},sG=function(t,n,i){var r;if(i>n)for(r=t._first;r&&r._start<=i;){if(r.data==="isPause"&&r._start>n)return r;r=r._next}else for(r=t._last;r&&r._start>=i;){if(r.data==="isPause"&&r._start<n)return r;r=r._prev}},jv=function(t,n,i,r){var a=t._repeat,l=ro(n)||0,h=t._tTime/t._tDur;return h&&!r&&(t._time*=l/t._dur),t._dur=l,t._tDur=a?a<0?1e10:ro(l*(a+1)+t._rDelay*a):l,h>0&&!r&&lT(t,t._tTime=t._tDur*h),t.parent&&aT(t),i||Sp(t.parent,t),t},F3=function(t){return t instanceof al?Sp(t):jv(t,t._dur)},oG={_start:0,endTime:E0,totalDuration:E0},Mc=function e(t,n,i){var r=t.labels,a=t._recent||oG,l=t.duration()>=Rc?a.endTime(!1):t._dur,h,s,p;return No(n)&&(isNaN(n)||n in r)?(s=n.charAt(0),p=n.substr(-1)==="%",h=n.indexOf("="),s==="<"||s===">"?(h>=0&&(n=n.replace(/=/,"")),(s==="<"?a._start:a.endTime(a._repeat>=0))+(parseFloat(n.substr(1))||0)*(p?(h<0?a:i).totalDuration()/100:1)):h<0?(n in r||(r[n]=l),r[n]):(s=parseFloat(n.charAt(h-1)+n.substr(h+1)),p&&i&&(s=s/100*(ja(i)?i[0]:i).totalDuration()),h>1?e(t,n.substr(0,h-1),i)+s:l+s)):n==null?l:+n},n0=function(t,n,i){var r=ph(n[1]),a=(r?2:1)+(t<2?0:1),l=n[a],h,s;if(r&&(l.duration=n[1]),l.parent=i,t){for(h=l,s=i;s&&!("immediateRender"in h);)h=s.vars.defaults||{},s=Pl(s.vars.inherit)&&s.parent;l.immediateRender=Pl(h.immediateRender),t<2?l.runBackwards=1:l.startAt=n[a-1]}return new io(n[0],l,n[a+1])},am=function(t,n){return t||t===0?n(t):n},mb=function(t,n,i){return i<t?t:i>n?n:i},Ba=function(t,n){return!No(t)||!(n=XH.exec(t))?"":n[1]},aG=function(t,n,i){return am(i,function(r){return mb(t,n,r)})},KC=[].slice,r6=function(t,n){return t&&sd(t)&&"length"in t&&(!n&&!t.length||t.length-1 in t&&sd(t[0]))&&!t.nodeType&&t!==Wu},lG=function(t,n,i){return i===void 0&&(i=[]),t.forEach(function(r){var a;return No(r)&&!n||r6(r,1)?(a=i).push.apply(a,Oc(r)):i.push(r)})||i},Oc=function(t,n,i){return ls&&!n&&ls.selector?ls.selector(t):No(t)&&!i&&(WC||!Wv())?KC.call((n||XI).querySelectorAll(t),0):ja(t)?lG(t,i):r6(t)?KC.call(t,0):t?[t]:[]},XC=function(t){return t=Oc(t)[0]||S0("Invalid scope")||{},function(n){var i=t.current||t.nativeElement||t;return Oc(n,i.querySelectorAll?i:i===t?S0("Invalid scope")||XI.createElement("div"):t)}},s6=function(t){return t.sort(function(){return .5-Math.random()})},o6=function(t){if(Rs(t))return t;var n=sd(t)?t:{each:t},i=Ep(n.ease),r=n.from||0,a=parseFloat(n.base)||0,l={},h=r>0&&r<1,s=isNaN(r)||h,p=n.axis,_=r,x=r;return No(r)?_=x={center:.5,edges:.5,end:1}[r]||0:!h&&s&&(_=r[0],x=r[1]),function(T,k,A){var M=(A||n).length,R=l[M],F,z,G,Y,J,re,X,U,H;if(!R){if(H=n.grid==="auto"?0:(n.grid||[1,Rc])[1],!H){for(X=-Rc;X<(X=A[H++].getBoundingClientRect().left)&&H<M;);H<M&&H--}for(R=l[M]=[],F=s?Math.min(H,M)*_-.5:r%H,z=H===Rc?0:s?M*x/H-.5:r/H|0,X=0,U=Rc,re=0;re<M;re++)G=re%H-F,Y=z-(re/H|0),R[re]=J=p?Math.abs(p==="y"?Y:G):$B(G*G+Y*Y),J>X&&(X=J),J<U&&(U=J);r==="random"&&s6(R),R.max=X-U,R.min=U,R.v=M=(parseFloat(n.amount)||parseFloat(n.each)*(H>M?M-1:p?p==="y"?M/H:H:Math.max(H,M/H))||0)*(r==="edges"?-1:1),R.b=M<0?a-M:a,R.u=Ba(n.amount||n.each)||0,i=i&&M<0?g6(i):i}return M=(R[T]-R.min)/R.max||0,ro(R.b+(i?i(M):M)*R.v)+R.u}},YC=function(t){var n=Math.pow(10,((t+"").split(".")[1]||"").length);return function(i){var r=ro(Math.round(parseFloat(i)/t)*t*n);return(r-r%1)/n+(ph(i)?0:Ba(i))}},a6=function(t,n){var i=ja(t),r,a;return!i&&sd(t)&&(r=i=t.radius||Rc,t.values?(t=Oc(t.values),(a=!ph(t[0]))&&(r*=r)):t=YC(t.increment)),am(n,i?Rs(t)?function(l){return a=t(l),Math.abs(a-l)<=r?a:l}:function(l){for(var h=parseFloat(a?l.x:l),s=parseFloat(a?l.y:0),p=Rc,_=0,x=t.length,T,k;x--;)a?(T=t[x].x-h,k=t[x].y-s,T=T*T+k*k):T=Math.abs(t[x]-h),T<p&&(p=T,_=x);return _=!r||p<=r?t[_]:l,a||_===l||ph(l)?_:_+Ba(l)}:YC(t))},l6=function(t,n,i,r){return am(ja(t)?!n:i===!0?!!(i=0):!r,function(){return ja(t)?t[~~(Math.random()*t.length)]:(i=i||1e-5)&&(r=i<1?Math.pow(10,(i+"").length-2):1)&&Math.floor(Math.round((t-i/2+Math.random()*(n-t+i*.99))/i)*i*r)/r})},cG=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return function(r){return n.reduce(function(a,l){return l(a)},r)}},uG=function(t,n){return function(i){return t(parseFloat(i))+(n||Ba(i))}},dG=function(t,n,i){return u6(t,n,0,1,i)},c6=function(t,n,i){return am(i,function(r){return t[~~n(r)]})},hG=function e(t,n,i){var r=n-t;return ja(t)?c6(t,e(0,t.length),n):am(i,function(a){return(r+(a-t)%r)%r+t})},fG=function e(t,n,i){var r=n-t,a=r*2;return ja(t)?c6(t,e(0,t.length-1),n):am(i,function(l){return l=(a+(l-t)%a)%a||0,t+(l>r?a-l:l)})},C0=function(t){for(var n=0,i="",r,a,l,h;~(r=t.indexOf("random(",n));)l=t.indexOf(")",r),h=t.charAt(r+7)==="[",a=t.substr(r+7,l-r-7).match(h?HB:jC),i+=t.substr(n,r-n)+l6(h?a:+a[0],h?0:+a[1],+a[2]||1e-5),n=l+1;return i+t.substr(n,t.length-n)},u6=function(t,n,i,r,a){var l=n-t,h=r-i;return am(a,function(s){return i+((s-t)/l*h||0)})},mG=function e(t,n,i,r){var a=isNaN(t+n)?0:function(k){return(1-k)*t+k*n};if(!a){var l=No(t),h={},s,p,_,x,T;if(i===!0&&(r=1)&&(i=null),l)t={p:t},n={p:n};else if(ja(t)&&!ja(n)){for(_=[],x=t.length,T=x-2,p=1;p<x;p++)_.push(e(t[p-1],t[p]));x--,a=function(A){A*=x;var M=Math.min(T,~~A);return _[M](A-M)},i=n}else r||(t=$v(ja(t)?[]:{},t));if(!_){for(s in n)tA.call(h,t,s,"get",n[s]);a=function(A){return sA(A,h)||(l?t.p:t)}}}return am(i,a)},z3=function(t,n,i){var r=t.labels,a=Rc,l,h,s;for(l in r)h=r[l]-n,h<0==!!i&&h&&a>(h=Math.abs(h))&&(s=l,a=h);return s},nc=function(t,n,i){var r=t.vars,a=r[n],l=ls,h=t._ctx,s,p,_;if(a)return s=r[n+"Params"],p=r.callbackScope||t,i&&Of.length&&J1(),h&&(ls=h),_=s?a.apply(p,s):a.call(p),ls=l,_},Ry=function(t){return Hf(t),t.scrollTrigger&&t.scrollTrigger.kill(!!la),t.progress()<1&&nc(t,"onInterrupt"),t},vv,d6=[],h6=function(t){if(t)if(t=!t.name&&t.default||t,KI()||t.headless){var n=t.name,i=Rs(t),r=n&&!i&&t.init?function(){this._props=[]}:t,a={init:E0,render:sA,add:tA,kill:PG,modifier:AG,rawVars:0},l={targetTest:0,get:0,getSetter:rA,aliases:{},register:0};if(Wv(),t!==r){if(Jl[n])return;cc(r,cc(Q1(t,a),l)),$v(r.prototype,$v(a,Q1(t,l))),Jl[r.prop=n]=r,t.targetTest&&(g1.push(r),ZI[n]=1),n=(n==="css"?"CSS":n.charAt(0).toUpperCase()+n.substr(1))+"Plugin"}KB(n,r),t.register&&t.register(Ol,r,Dl)}else d6.push(t)},zr=255,Oy={aqua:[0,zr,zr],lime:[0,zr,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,zr],navy:[0,0,128],white:[zr,zr,zr],olive:[128,128,0],yellow:[zr,zr,0],orange:[zr,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[zr,0,0],pink:[zr,192,203],cyan:[0,zr,zr],transparent:[zr,zr,zr,0]},RE=function(t,n,i){return t+=t<0?1:t>1?-1:0,(t*6<1?n+(i-n)*t*6:t<.5?i:t*3<2?n+(i-n)*(2/3-t)*6:n)*zr+.5|0},f6=function(t,n,i){var r=t?ph(t)?[t>>16,t>>8&zr,t&zr]:0:Oy.black,a,l,h,s,p,_,x,T,k,A;if(!r){if(t.substr(-1)===","&&(t=t.substr(0,t.length-1)),Oy[t])r=Oy[t];else if(t.charAt(0)==="#"){if(t.length<6&&(a=t.charAt(1),l=t.charAt(2),h=t.charAt(3),t="#"+a+a+l+l+h+h+(t.length===5?t.charAt(4)+t.charAt(4):"")),t.length===9)return r=parseInt(t.substr(1,6),16),[r>>16,r>>8&zr,r&zr,parseInt(t.substr(7),16)/255];t=parseInt(t.substr(1),16),r=[t>>16,t>>8&zr,t&zr]}else if(t.substr(0,3)==="hsl"){if(r=A=t.match(jC),!n)s=+r[0]%360/360,p=+r[1]/100,_=+r[2]/100,l=_<=.5?_*(p+1):_+p-_*p,a=_*2-l,r.length>3&&(r[3]*=1),r[0]=RE(s+1/3,a,l),r[1]=RE(s,a,l),r[2]=RE(s-1/3,a,l);else if(~t.indexOf("="))return r=t.match(jB),i&&r.length<4&&(r[3]=1),r}else r=t.match(jC)||Oy.transparent;r=r.map(Number)}return n&&!A&&(a=r[0]/zr,l=r[1]/zr,h=r[2]/zr,x=Math.max(a,l,h),T=Math.min(a,l,h),_=(x+T)/2,x===T?s=p=0:(k=x-T,p=_>.5?k/(2-x-T):k/(x+T),s=x===a?(l-h)/k+(l<h?6:0):x===l?(h-a)/k+2:(a-l)/k+4,s*=60),r[0]=~~(s+.5),r[1]=~~(p*100+.5),r[2]=~~(_*100+.5)),i&&r.length<4&&(r[3]=1),r},m6=function(t){var n=[],i=[],r=-1;return t.split(Vf).forEach(function(a){var l=a.match(gv)||[];n.push.apply(n,l),i.push(r+=l.length+1)}),n.c=i,n},N3=function(t,n,i){var r="",a=(t+r).match(Vf),l=n?"hsla(":"rgba(",h=0,s,p,_,x;if(!a)return t;if(a=a.map(function(T){return(T=f6(T,n,1))&&l+(n?T[0]+","+T[1]+"%,"+T[2]+"%,"+T[3]:T.join(","))+")"}),i&&(_=m6(t),s=i.c,s.join(r)!==_.c.join(r)))for(p=t.replace(Vf,"1").split(gv),x=p.length-1;h<x;h++)r+=p[h]+(~s.indexOf(h)?a.shift()||l+"0,0,0,0)":(_.length?_:a.length?a:i).shift());if(!p)for(p=t.split(Vf),x=p.length-1;h<x;h++)r+=p[h]+a[h];return r+p[x]},Vf=(function(){var e="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",t;for(t in Oy)e+="|"+t+"\\b";return new RegExp(e+")","gi")})(),pG=/hsl[a]?\(/,p6=function(t){var n=t.join(" "),i;if(Vf.lastIndex=0,Vf.test(n))return i=pG.test(n),t[1]=N3(t[1],i),t[0]=N3(t[0],i,m6(t[1])),!0},k0,Ql=(function(){var e=Date.now,t=500,n=33,i=e(),r=i,a=1e3/240,l=a,h=[],s,p,_,x,T,k,A=function M(R){var F=e()-r,z=R===!0,G,Y,J,re;if((F>t||F<0)&&(i+=F-n),r+=F,J=r-i,G=J-l,(G>0||z)&&(re=++x.frame,T=J-x.time*1e3,x.time=J=J/1e3,l+=G+(G>=a?4:a-G),Y=1),z||(s=p(M)),Y)for(k=0;k<h.length;k++)h[k](J,T,re,R)};return x={time:0,frame:0,tick:function(){A(!0)},deltaRatio:function(R){return T/(1e3/(R||60))},wake:function(){GB&&(!WC&&KI()&&(Wu=WC=window,XI=Wu.document||{},lc.gsap=Ol,(Wu.gsapVersions||(Wu.gsapVersions=[])).push(Ol.version),qB(Z1||Wu.GreenSockGlobals||!Wu.gsap&&Wu||{}),d6.forEach(h6)),_=typeof requestAnimationFrame<"u"&&requestAnimationFrame,s&&x.sleep(),p=_||function(R){return setTimeout(R,l-x.time*1e3+1|0)},k0=1,A(2))},sleep:function(){(_?cancelAnimationFrame:clearTimeout)(s),k0=0,p=E0},lagSmoothing:function(R,F){t=R||1/0,n=Math.min(F||33,t)},fps:function(R){a=1e3/(R||240),l=x.time*1e3+a},add:function(R,F,z){var G=F?function(Y,J,re,X){R(Y,J,re,X),x.remove(G)}:R;return x.remove(R),h[z?"unshift":"push"](G),Wv(),G},remove:function(R,F){~(F=h.indexOf(R))&&h.splice(F,1)&&k>=F&&k--},_listeners:h},x})(),Wv=function(){return!k0&&Ql.wake()},Ki={},gG=/^[\d.\-M][\d.\-,\s]/,vG=/["']/g,_G=function(t){for(var n={},i=t.substr(1,t.length-3).split(":"),r=i[0],a=1,l=i.length,h,s,p;a<l;a++)s=i[a],h=a!==l-1?s.lastIndexOf(","):s.length,p=s.substr(0,h),n[r]=isNaN(p)?p.replace(vG,"").trim():+p,r=s.substr(h+1).trim();return n},yG=function(t){var n=t.indexOf("(")+1,i=t.indexOf(")"),r=t.indexOf("(",n);return t.substring(n,~r&&r<i?t.indexOf(")",i+1):i)},bG=function(t){var n=(t+"").split("("),i=Ki[n[0]];return i&&n.length>1&&i.config?i.config.apply(null,~t.indexOf("{")?[_G(n[1])]:yG(t).split(",").map(JB)):Ki._CE&&gG.test(t)?Ki._CE("",t):i},g6=function(t){return function(n){return 1-t(1-n)}},v6=function e(t,n){for(var i=t._first,r;i;)i instanceof al?e(i,n):i.vars.yoyoEase&&(!i._yoyo||!i._repeat)&&i._yoyo!==n&&(i.timeline?e(i.timeline,n):(r=i._ease,i._ease=i._yEase,i._yEase=r,i._yoyo=n)),i=i._next},Ep=function(t,n){return t&&(Rs(t)?t:Ki[t]||bG(t))||n},eg=function(t,n,i,r){i===void 0&&(i=function(s){return 1-n(1-s)}),r===void 0&&(r=function(s){return s<.5?n(s*2)/2:1-n((1-s)*2)/2});var a={easeIn:n,easeOut:i,easeInOut:r},l;return Ml(t,function(h){Ki[h]=lc[h]=a,Ki[l=h.toLowerCase()]=i;for(var s in a)Ki[l+(s==="easeIn"?".in":s==="easeOut"?".out":".inOut")]=Ki[h+"."+s]=a[s]}),a},_6=function(t){return function(n){return n<.5?(1-t(1-n*2))/2:.5+t((n-.5)*2)/2}},OE=function e(t,n,i){var r=n>=1?n:1,a=(i||(t?.3:.45))/(n<1?n:1),l=a/UC*(Math.asin(1/r)||0),h=function(_){return _===1?1:r*Math.pow(2,-10*_)*KH((_-l)*a)+1},s=t==="out"?h:t==="in"?function(p){return 1-h(1-p)}:_6(h);return a=UC/a,s.config=function(p,_){return e(t,p,_)},s},VE=function e(t,n){n===void 0&&(n=1.70158);var i=function(l){return l?--l*l*((n+1)*l+n)+1:0},r=t==="out"?i:t==="in"?function(a){return 1-i(1-a)}:_6(i);return r.config=function(a){return e(t,a)},r};Ml("Linear,Quad,Cubic,Quart,Quint,Strong",function(e,t){var n=t<5?t+1:t;eg(e+",Power"+(n-1),t?function(i){return Math.pow(i,n)}:function(i){return i},function(i){return 1-Math.pow(1-i,n)},function(i){return i<.5?Math.pow(i*2,n)/2:1-Math.pow((1-i)*2,n)/2})});Ki.Linear.easeNone=Ki.none=Ki.Linear.easeIn;eg("Elastic",OE("in"),OE("out"),OE());(function(e,t){var n=1/t,i=2*n,r=2.5*n,a=function(h){return h<n?e*h*h:h<i?e*Math.pow(h-1.5/t,2)+.75:h<r?e*(h-=2.25/t)*h+.9375:e*Math.pow(h-2.625/t,2)+.984375};eg("Bounce",function(l){return 1-a(1-l)},a)})(7.5625,2.75);eg("Expo",function(e){return Math.pow(2,10*(e-1))*e+e*e*e*e*e*e*(1-e)});eg("Circ",function(e){return-($B(1-e*e)-1)});eg("Sine",function(e){return e===1?1:-qH(e*HH)+1});eg("Back",VE("in"),VE("out"),VE());Ki.SteppedEase=Ki.steps=lc.SteppedEase={config:function(t,n){t===void 0&&(t=1);var i=1/t,r=t+(n?0:1),a=n?1:0,l=1-Nr;return function(h){return((r*mb(0,l,h)|0)+a)*i}}};Nv.ease=Ki["quad.out"];Ml("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(e){return JI+=e+","+e+"Params,"});var y6=function(t,n){this.id=GH++,t._gsap=this,this.target=t,this.harness=n,this.get=n?n.get:YB,this.set=n?n.getSetter:rA},I0=(function(){function e(n){this.vars=n,this._delay=+n.delay||0,(this._repeat=n.repeat===1/0?-2:n.repeat||0)&&(this._rDelay=n.repeatDelay||0,this._yoyo=!!n.yoyo||!!n.yoyoEase),this._ts=1,jv(this,+n.duration,1,1),this.data=n.data,ls&&(this._ctx=ls,ls.data.push(this)),k0||Ql.wake()}var t=e.prototype;return t.delay=function(i){return i||i===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+i-this._delay),this._delay=i,this):this._delay},t.duration=function(i){return arguments.length?this.totalDuration(this._repeat>0?i+(i+this._rDelay)*this._repeat:i):this.totalDuration()&&this._dur},t.totalDuration=function(i){return arguments.length?(this._dirty=0,jv(this,this._repeat<0?i:(i-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(i,r){if(Wv(),!arguments.length)return this._tTime;var a=this._dp;if(a&&a.smoothChildTiming&&this._ts){for(lT(this,i),!a._dp||a.parent||t6(a,this);a&&a.parent;)a.parent._time!==a._start+(a._ts>=0?a._tTime/a._ts:(a.totalDuration()-a._tTime)/-a._ts)&&a.totalTime(a._tTime,!0),a=a.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&i<this._tDur||this._ts<0&&i>0||!this._tDur&&!i)&&qu(this._dp,this,this._start-this._delay)}return(this._tTime!==i||!this._dur&&!r||this._initted&&Math.abs(this._zTime)===Nr||!i&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=i),ZB(this,i,r)),this},t.time=function(i,r){return arguments.length?this.totalTime(Math.min(this.totalDuration(),i+B3(this))%(this._dur+this._rDelay)||(i?this._dur:0),r):this._time},t.totalProgress=function(i,r){return arguments.length?this.totalTime(this.totalDuration()*i,r):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},t.progress=function(i,r){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-i:i)+B3(this),r):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},t.iteration=function(i,r){var a=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(i-1)*a,r):this._repeat?Uv(this._tTime,a)+1:1},t.timeScale=function(i,r){if(!arguments.length)return this._rts===-Nr?0:this._rts;if(this._rts===i)return this;var a=this.parent&&this._ts?ew(this.parent._time,this):this._tTime;return this._rts=+i||0,this._ts=this._ps||i===-Nr?0:this._rts,this.totalTime(mb(-Math.abs(this._delay),this.totalDuration(),a),r!==!1),aT(this),tG(this)},t.paused=function(i){return arguments.length?(this._ps!==i&&(this._ps=i,i?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Wv(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Nr&&(this._tTime-=Nr)))),this):this._ps},t.startTime=function(i){if(arguments.length){this._start=i;var r=this.parent||this._dp;return r&&(r._sort||!this.parent)&&qu(r,this,i-this._delay),this}return this._start},t.endTime=function(i){return this._start+(Pl(i)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},t.rawTime=function(i){var r=this.parent||this._dp;return r?i&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?ew(r.rawTime(i),this):this._tTime:this._tTime},t.revert=function(i){i===void 0&&(i=ZH);var r=la;return la=i,eA(this)&&(this.timeline&&this.timeline.revert(i),this.totalTime(-.01,i.suppressEvents)),this.data!=="nested"&&i.kill!==!1&&this.kill(),la=r,this},t.globalTime=function(i){for(var r=this,a=arguments.length?i:r.rawTime();r;)a=r._start+a/(Math.abs(r._ts)||1),r=r._dp;return!this.parent&&this._sat?this._sat.globalTime(i):a},t.repeat=function(i){return arguments.length?(this._repeat=i===1/0?-2:i,F3(this)):this._repeat===-2?1/0:this._repeat},t.repeatDelay=function(i){if(arguments.length){var r=this._time;return this._rDelay=i,F3(this),r?this.time(r):this}return this._rDelay},t.yoyo=function(i){return arguments.length?(this._yoyo=i,this):this._yoyo},t.seek=function(i,r){return this.totalTime(Mc(this,i),Pl(r))},t.restart=function(i,r){return this.play().totalTime(i?-this._delay:0,Pl(r)),this._dur||(this._zTime=-Nr),this},t.play=function(i,r){return i!=null&&this.seek(i,r),this.reversed(!1).paused(!1)},t.reverse=function(i,r){return i!=null&&this.seek(i||this.totalDuration(),r),this.reversed(!0).paused(!1)},t.pause=function(i,r){return i!=null&&this.seek(i,r),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(i){return arguments.length?(!!i!==this.reversed()&&this.timeScale(-this._rts||(i?-Nr:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-Nr,this},t.isActive=function(){var i=this.parent||this._dp,r=this._start,a;return!!(!i||this._ts&&this._initted&&i.isActive()&&(a=i.rawTime(!0))>=r&&a<this.endTime(!0)-Nr)},t.eventCallback=function(i,r,a){var l=this.vars;return arguments.length>1?(r?(l[i]=r,a&&(l[i+"Params"]=a),i==="onUpdate"&&(this._onUpdate=r)):delete l[i],this):l[i]},t.then=function(i){var r=this;return new Promise(function(a){var l=Rs(i)?i:QB,h=function(){var p=r.then;r.then=null,Rs(l)&&(l=l(r))&&(l.then||l===r)&&(r.then=p),a(l),r.then=p};r._initted&&r.totalProgress()===1&&r._ts>=0||!r._tTime&&r._ts<0?h():r._prom=h})},t.kill=function(){Ry(this)},e})();cc(I0.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-Nr,_prom:0,_ps:!1,_rts:1});var al=(function(e){NB(t,e);function t(i,r){var a;return i===void 0&&(i={}),a=e.call(this,i)||this,a.labels={},a.smoothChildTiming=!!i.smoothChildTiming,a.autoRemoveChildren=!!i.autoRemoveChildren,a._sort=Pl(i.sortChildren),_s&&qu(i.parent||_s,Jd(a),r),i.reversed&&a.reverse(),i.paused&&a.paused(!0),i.scrollTrigger&&n6(Jd(a),i.scrollTrigger),a}var n=t.prototype;return n.to=function(r,a,l){return n0(0,arguments,this),this},n.from=function(r,a,l){return n0(1,arguments,this),this},n.fromTo=function(r,a,l,h){return n0(2,arguments,this),this},n.set=function(r,a,l){return a.duration=0,a.parent=this,t0(a).repeatDelay||(a.repeat=0),a.immediateRender=!!a.immediateRender,new io(r,a,Mc(this,l),1),this},n.call=function(r,a,l){return qu(this,io.delayedCall(0,r,a),l)},n.staggerTo=function(r,a,l,h,s,p,_){return l.duration=a,l.stagger=l.stagger||h,l.onComplete=p,l.onCompleteParams=_,l.parent=this,new io(r,l,Mc(this,s)),this},n.staggerFrom=function(r,a,l,h,s,p,_){return l.runBackwards=1,t0(l).immediateRender=Pl(l.immediateRender),this.staggerTo(r,a,l,h,s,p,_)},n.staggerFromTo=function(r,a,l,h,s,p,_,x){return h.startAt=l,t0(h).immediateRender=Pl(h.immediateRender),this.staggerTo(r,a,h,s,p,_,x)},n.render=function(r,a,l){var h=this._time,s=this._dirty?this.totalDuration():this._tDur,p=this._dur,_=r<=0?0:ro(r),x=this._zTime<0!=r<0&&(this._initted||!p),T,k,A,M,R,F,z,G,Y,J,re,X;if(this!==_s&&_>s&&r>=0&&(_=s),_!==this._tTime||l||x){if(h!==this._time&&p&&(_+=this._time-h,r+=this._time-h),T=_,Y=this._start,G=this._ts,F=!G,x&&(p||(h=this._zTime),(r||!a)&&(this._zTime=r)),this._repeat){if(re=this._yoyo,R=p+this._rDelay,this._repeat<-1&&r<0)return this.totalTime(R*100+r,a,l);if(T=ro(_%R),_===s?(M=this._repeat,T=p):(J=ro(_/R),M=~~J,M&&M===J&&(T=p,M--),T>p&&(T=p)),J=Uv(this._tTime,R),!h&&this._tTime&&J!==M&&this._tTime-J*R-this._dur<=0&&(J=M),re&&M&1&&(T=p-T,X=1),M!==J&&!this._lock){var U=re&&J&1,H=U===(re&&M&1);if(M<J&&(U=!U),h=U?0:_%p?p:_,this._lock=1,this.render(h||(X?0:ro(M*R)),a,!p)._lock=0,this._tTime=_,!a&&this.parent&&nc(this,"onRepeat"),this.vars.repeatRefresh&&!X&&(this.invalidate()._lock=1),h&&h!==this._time||F!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(p=this._dur,s=this._tDur,H&&(this._lock=2,h=U?p:-1e-4,this.render(h,!0),this.vars.repeatRefresh&&!X&&this.invalidate()),this._lock=0,!this._ts&&!F)return this;v6(this,X)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(z=sG(this,ro(h),ro(T)),z&&(_-=T-(T=z._start))),this._tTime=_,this._time=T,this._act=!G,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=r,h=0),!h&&_&&!a&&!J&&(nc(this,"onStart"),this._tTime!==_))return this;if(T>=h&&r>=0)for(k=this._first;k;){if(A=k._next,(k._act||T>=k._start)&&k._ts&&z!==k){if(k.parent!==this)return this.render(r,a,l);if(k.render(k._ts>0?(T-k._start)*k._ts:(k._dirty?k.totalDuration():k._tDur)+(T-k._start)*k._ts,a,l),T!==this._time||!this._ts&&!F){z=0,A&&(_+=this._zTime=-Nr);break}}k=A}else{k=this._last;for(var W=r<0?r:T;k;){if(A=k._prev,(k._act||W<=k._end)&&k._ts&&z!==k){if(k.parent!==this)return this.render(r,a,l);if(k.render(k._ts>0?(W-k._start)*k._ts:(k._dirty?k.totalDuration():k._tDur)+(W-k._start)*k._ts,a,l||la&&eA(k)),T!==this._time||!this._ts&&!F){z=0,A&&(_+=this._zTime=W?-Nr:Nr);break}}k=A}}if(z&&!a&&(this.pause(),z.render(T>=h?0:-Nr)._zTime=T>=h?1:-1,this._ts))return this._start=Y,aT(this),this.render(r,a,l);this._onUpdate&&!a&&nc(this,"onUpdate",!0),(_===s&&this._tTime>=this.totalDuration()||!_&&h)&&(Y===this._start||Math.abs(G)!==Math.abs(this._ts))&&(this._lock||((r||!p)&&(_===s&&this._ts>0||!_&&this._ts<0)&&Hf(this,1),!a&&!(r<0&&!h)&&(_||h||!s)&&(nc(this,_===s&&r>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(_<s&&this.timeScale()>0)&&this._prom())))}return this},n.add=function(r,a){var l=this;if(ph(a)||(a=Mc(this,a,r)),!(r instanceof I0)){if(ja(r))return r.forEach(function(h){return l.add(h,a)}),this;if(No(r))return this.addLabel(r,a);if(Rs(r))r=io.delayedCall(0,r);else return this}return this!==r?qu(this,r,a):this},n.getChildren=function(r,a,l,h){r===void 0&&(r=!0),a===void 0&&(a=!0),l===void 0&&(l=!0),h===void 0&&(h=-Rc);for(var s=[],p=this._first;p;)p._start>=h&&(p instanceof io?a&&s.push(p):(l&&s.push(p),r&&s.push.apply(s,p.getChildren(!0,a,l)))),p=p._next;return s},n.getById=function(r){for(var a=this.getChildren(1,1,1),l=a.length;l--;)if(a[l].vars.id===r)return a[l]},n.remove=function(r){return No(r)?this.removeLabel(r):Rs(r)?this.killTweensOf(r):(r.parent===this&&oT(this,r),r===this._recent&&(this._recent=this._last),Sp(this))},n.totalTime=function(r,a){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=ro(Ql.time-(this._ts>0?r/this._ts:(this.totalDuration()-r)/-this._ts))),e.prototype.totalTime.call(this,r,a),this._forcing=0,this):this._tTime},n.addLabel=function(r,a){return this.labels[r]=Mc(this,a),this},n.removeLabel=function(r){return delete this.labels[r],this},n.addPause=function(r,a,l){var h=io.delayedCall(0,a||E0,l);return h.data="isPause",this._hasPause=1,qu(this,h,Mc(this,r))},n.removePause=function(r){var a=this._first;for(r=Mc(this,r);a;)a._start===r&&a.data==="isPause"&&Hf(a),a=a._next},n.killTweensOf=function(r,a,l){for(var h=this.getTweensOf(r,l),s=h.length;s--;)Ef!==h[s]&&h[s].kill(r,a);return this},n.getTweensOf=function(r,a){for(var l=[],h=Oc(r),s=this._first,p=ph(a),_;s;)s instanceof io?JH(s._targets,h)&&(p?(!Ef||s._initted&&s._ts)&&s.globalTime(0)<=a&&s.globalTime(s.totalDuration())>a:!a||s.isActive())&&l.push(s):(_=s.getTweensOf(h,a)).length&&l.push.apply(l,_),s=s._next;return l},n.tweenTo=function(r,a){a=a||{};var l=this,h=Mc(l,r),s=a,p=s.startAt,_=s.onStart,x=s.onStartParams,T=s.immediateRender,k,A=io.to(l,cc({ease:a.ease||"none",lazy:!1,immediateRender:!1,time:h,overwrite:"auto",duration:a.duration||Math.abs((h-(p&&"time"in p?p.time:l._time))/l.timeScale())||Nr,onStart:function(){if(l.pause(),!k){var R=a.duration||Math.abs((h-(p&&"time"in p?p.time:l._time))/l.timeScale());A._dur!==R&&jv(A,R,0,1).render(A._time,!0,!0),k=1}_&&_.apply(A,x||[])}},a));return T?A.render(0):A},n.tweenFromTo=function(r,a,l){return this.tweenTo(a,cc({startAt:{time:Mc(this,r)}},l))},n.recent=function(){return this._recent},n.nextLabel=function(r){return r===void 0&&(r=this._time),z3(this,Mc(this,r))},n.previousLabel=function(r){return r===void 0&&(r=this._time),z3(this,Mc(this,r),1)},n.currentLabel=function(r){return arguments.length?this.seek(r,!0):this.previousLabel(this._time+Nr)},n.shiftChildren=function(r,a,l){l===void 0&&(l=0);for(var h=this._first,s=this.labels,p;h;)h._start>=l&&(h._start+=r,h._end+=r),h=h._next;if(a)for(p in s)s[p]>=l&&(s[p]+=r);return Sp(this)},n.invalidate=function(r){var a=this._first;for(this._lock=0;a;)a.invalidate(r),a=a._next;return e.prototype.invalidate.call(this,r)},n.clear=function(r){r===void 0&&(r=!0);for(var a=this._first,l;a;)l=a._next,this.remove(a),a=l;return this._dp&&(this._time=this._tTime=this._pTime=0),r&&(this.labels={}),Sp(this)},n.totalDuration=function(r){var a=0,l=this,h=l._last,s=Rc,p,_,x;if(arguments.length)return l.timeScale((l._repeat<0?l.duration():l.totalDuration())/(l.reversed()?-r:r));if(l._dirty){for(x=l.parent;h;)p=h._prev,h._dirty&&h.totalDuration(),_=h._start,_>s&&l._sort&&h._ts&&!l._lock?(l._lock=1,qu(l,h,_-h._delay,1)._lock=0):s=_,_<0&&h._ts&&(a-=_,(!x&&!l._dp||x&&x.smoothChildTiming)&&(l._start+=_/l._ts,l._time-=_,l._tTime-=_),l.shiftChildren(-_,!1,-1/0),s=0),h._end>a&&h._ts&&(a=h._end),h=p;jv(l,l===_s&&l._time>a?l._time:a,1,1),l._dirty=0}return l._tDur},t.updateRoot=function(r){if(_s._ts&&(ZB(_s,ew(r,_s)),XB=Ql.frame),Ql.frame>=O3){O3+=ac.autoSleep||120;var a=_s._first;if((!a||!a._ts)&&ac.autoSleep&&Ql._listeners.length<2){for(;a&&!a._ts;)a=a._next;a||Ql.sleep()}}},t})(I0);cc(al.prototype,{_lock:0,_hasPause:0,_forcing:0});var xG=function(t,n,i,r,a,l,h){var s=new Dl(this._pt,t,n,0,1,E6,null,a),p=0,_=0,x,T,k,A,M,R,F,z;for(s.b=i,s.e=r,i+="",r+="",(F=~r.indexOf("random("))&&(r=C0(r)),l&&(z=[i,r],l(z,t,n),i=z[0],r=z[1]),T=i.match(DE)||[];x=DE.exec(r);)A=x[0],M=r.substring(p,x.index),k?k=(k+1)%5:M.substr(-5)==="rgba("&&(k=1),A!==T[_++]&&(R=parseFloat(T[_-1])||0,s._pt={_next:s._pt,p:M||_===1?M:",",s:R,c:A.charAt(1)==="="?Av(R,A)-R:parseFloat(A)-R,m:k&&k<4?Math.round:0},p=DE.lastIndex);return s.c=p<r.length?r.substring(p,r.length):"",s.fp=h,(WB.test(r)||F)&&(s.e=0),this._pt=s,s},tA=function(t,n,i,r,a,l,h,s,p,_){Rs(r)&&(r=r(a||0,t,l));var x=t[n],T=i!=="get"?i:Rs(x)?p?t[n.indexOf("set")||!Rs(t["get"+n.substr(3)])?n:"get"+n.substr(3)](p):t[n]():x,k=Rs(x)?p?CG:T6:iA,A;if(No(r)&&(~r.indexOf("random(")&&(r=C0(r)),r.charAt(1)==="="&&(A=Av(T,r)+(Ba(T)||0),(A||A===0)&&(r=A))),!_||T!==r||ZC)return!isNaN(T*r)&&r!==""?(A=new Dl(this._pt,t,n,+T||0,r-(T||0),typeof x=="boolean"?IG:S6,0,k),p&&(A.fp=p),h&&A.modifier(h,this,t),this._pt=A):(!x&&!(n in t)&&YI(n,r),xG.call(this,t,n,T,r,k,s||ac.stringFilter,p))},wG=function(t,n,i,r,a){if(Rs(t)&&(t=i0(t,a,n,i,r)),!sd(t)||t.style&&t.nodeType||ja(t)||UB(t))return No(t)?i0(t,a,n,i,r):t;var l={},h;for(h in t)l[h]=i0(t[h],a,n,i,r);return l},b6=function(t,n,i,r,a,l){var h,s,p,_;if(Jl[t]&&(h=new Jl[t]).init(a,h.rawVars?n[t]:wG(n[t],r,a,l,i),i,r,l)!==!1&&(i._pt=s=new Dl(i._pt,a,t,0,1,h.render,h,0,h.priority),i!==vv))for(p=i._ptLookup[i._targets.indexOf(a)],_=h._props.length;_--;)p[h._props[_]]=s;return h},Ef,ZC,nA=function e(t,n,i){var r=t.vars,a=r.ease,l=r.startAt,h=r.immediateRender,s=r.lazy,p=r.onUpdate,_=r.runBackwards,x=r.yoyoEase,T=r.keyframes,k=r.autoRevert,A=t._dur,M=t._startAt,R=t._targets,F=t.parent,z=F&&F.data==="nested"?F.vars.targets:R,G=t._overwrite==="auto"&&!GI,Y=t.timeline,J,re,X,U,H,W,ie,Q,te,ke,Re,Be,Je;if(Y&&(!T||!a)&&(a="none"),t._ease=Ep(a,Nv.ease),t._yEase=x?g6(Ep(x===!0?a:x,Nv.ease)):0,x&&t._yoyo&&!t._repeat&&(x=t._yEase,t._yEase=t._ease,t._ease=x),t._from=!Y&&!!r.runBackwards,!Y||T&&!r.stagger){if(Q=R[0]?Tp(R[0]).harness:0,Be=Q&&r[Q.prop],J=Q1(r,ZI),M&&(M._zTime<0&&M.progress(1),n<0&&_&&h&&!k?M.render(-1,!0):M.revert(_&&A?p1:YH),M._lazy=0),l){if(Hf(t._startAt=io.set(R,cc({data:"isStart",overwrite:!1,parent:F,immediateRender:!0,lazy:!M&&Pl(s),startAt:null,delay:0,onUpdate:p&&function(){return nc(t,"onUpdate")},stagger:0},l))),t._startAt._dp=0,t._startAt._sat=t,n<0&&(la||!h&&!k)&&t._startAt.revert(p1),h&&A&&n<=0&&i<=0){n&&(t._zTime=n);return}}else if(_&&A&&!M){if(n&&(h=!1),X=cc({overwrite:!1,data:"isFromStart",lazy:h&&!M&&Pl(s),immediateRender:h,stagger:0,parent:F},J),Be&&(X[Q.prop]=Be),Hf(t._startAt=io.set(R,X)),t._startAt._dp=0,t._startAt._sat=t,n<0&&(la?t._startAt.revert(p1):t._startAt.render(-1,!0)),t._zTime=n,!h)e(t._startAt,Nr,Nr);else if(!n)return}for(t._pt=t._ptCache=0,s=A&&Pl(s)||s&&!A,re=0;re<R.length;re++){if(H=R[re],ie=H._gsap||QI(R)[re]._gsap,t._ptLookup[re]=ke={},HC[ie.id]&&Of.length&&J1(),Re=z===R?re:z.indexOf(H),Q&&(te=new Q).init(H,Be||J,t,Re,z)!==!1&&(t._pt=U=new Dl(t._pt,H,te.name,0,1,te.render,te,0,te.priority),te._props.forEach(function(nt){ke[nt]=U}),te.priority&&(W=1)),!Q||Be)for(X in J)Jl[X]&&(te=b6(X,J,t,Re,H,z))?te.priority&&(W=1):ke[X]=U=tA.call(t,H,X,"get",J[X],Re,z,0,r.stringFilter);t._op&&t._op[re]&&t.kill(H,t._op[re]),G&&t._pt&&(Ef=t,_s.killTweensOf(H,ke,t.globalTime(n)),Je=!t.parent,Ef=0),t._pt&&s&&(HC[ie.id]=1)}W&&C6(t),t._onInit&&t._onInit(t)}t._onUpdate=p,t._initted=(!t._op||t._pt)&&!Je,T&&n<=0&&Y.render(Rc,!0,!0)},TG=function(t,n,i,r,a,l,h,s){var p=(t._pt&&t._ptCache||(t._ptCache={}))[n],_,x,T,k;if(!p)for(p=t._ptCache[n]=[],T=t._ptLookup,k=t._targets.length;k--;){if(_=T[k][n],_&&_.d&&_.d._pt)for(_=_.d._pt;_&&_.p!==n&&_.fp!==n;)_=_._next;if(!_)return ZC=1,t.vars[n]="+=0",nA(t,h),ZC=0,s?S0(n+" not eligible for reset"):1;p.push(_)}for(k=p.length;k--;)x=p[k],_=x._pt||x,_.s=(r||r===0)&&!a?r:_.s+(r||0)+l*_.c,_.c=i-_.s,x.e&&(x.e=Ws(i)+Ba(x.e)),x.b&&(x.b=_.s+Ba(x.b))},SG=function(t,n){var i=t[0]?Tp(t[0]).harness:0,r=i&&i.aliases,a,l,h,s;if(!r)return n;a=$v({},n);for(l in r)if(l in a)for(s=r[l].split(","),h=s.length;h--;)a[s[h]]=a[l];return a},EG=function(t,n,i,r){var a=n.ease||r||"power1.inOut",l,h;if(ja(n))h=i[t]||(i[t]=[]),n.forEach(function(s,p){return h.push({t:p/(n.length-1)*100,v:s,e:a})});else for(l in n)h=i[l]||(i[l]=[]),l==="ease"||h.push({t:parseFloat(t),v:n[l],e:a})},i0=function(t,n,i,r,a){return Rs(t)?t.call(n,i,r,a):No(t)&&~t.indexOf("random(")?C0(t):t},x6=JI+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",w6={};Ml(x6+",id,stagger,delay,duration,paused,scrollTrigger",function(e){return w6[e]=1});var io=(function(e){NB(t,e);function t(i,r,a,l){var h;typeof r=="number"&&(a.duration=r,r=a,a=null),h=e.call(this,l?r:t0(r))||this;var s=h.vars,p=s.duration,_=s.delay,x=s.immediateRender,T=s.stagger,k=s.overwrite,A=s.keyframes,M=s.defaults,R=s.scrollTrigger,F=s.yoyoEase,z=r.parent||_s,G=(ja(i)||UB(i)?ph(i[0]):"length"in r)?[i]:Oc(i),Y,J,re,X,U,H,W,ie;if(h._targets=G.length?QI(G):S0("GSAP target "+i+" not found. https://gsap.com",!ac.nullTargetWarn)||[],h._ptLookup=[],h._overwrite=k,A||T||Vx(p)||Vx(_)){if(r=h.vars,Y=h.timeline=new al({data:"nested",defaults:M||{},targets:z&&z.data==="nested"?z.vars.targets:G}),Y.kill(),Y.parent=Y._dp=Jd(h),Y._start=0,T||Vx(p)||Vx(_)){if(X=G.length,W=T&&o6(T),sd(T))for(U in T)~x6.indexOf(U)&&(ie||(ie={}),ie[U]=T[U]);for(J=0;J<X;J++)re=Q1(r,w6),re.stagger=0,F&&(re.yoyoEase=F),ie&&$v(re,ie),H=G[J],re.duration=+i0(p,Jd(h),J,H,G),re.delay=(+i0(_,Jd(h),J,H,G)||0)-h._delay,!T&&X===1&&re.delay&&(h._delay=_=re.delay,h._start+=_,re.delay=0),Y.to(H,re,W?W(J,H,G):0),Y._ease=Ki.none;Y.duration()?p=_=0:h.timeline=0}else if(A){t0(cc(Y.vars.defaults,{ease:"none"})),Y._ease=Ep(A.ease||r.ease||"none");var Q=0,te,ke,Re;if(ja(A))A.forEach(function(Be){return Y.to(G,Be,">")}),Y.duration();else{re={};for(U in A)U==="ease"||U==="easeEach"||EG(U,A[U],re,A.easeEach);for(U in re)for(te=re[U].sort(function(Be,Je){return Be.t-Je.t}),Q=0,J=0;J<te.length;J++)ke=te[J],Re={ease:ke.e,duration:(ke.t-(J?te[J-1].t:0))/100*p},Re[U]=ke.v,Y.to(G,Re,Q),Q+=Re.duration;Y.duration()<p&&Y.to({},{duration:p-Y.duration()})}}p||h.duration(p=Y.duration())}else h.timeline=0;return k===!0&&!GI&&(Ef=Jd(h),_s.killTweensOf(G),Ef=0),qu(z,Jd(h),a),r.reversed&&h.reverse(),r.paused&&h.paused(!0),(x||!p&&!A&&h._start===ro(z._time)&&Pl(x)&&nG(Jd(h))&&z.data!=="nested")&&(h._tTime=-Nr,h.render(Math.max(0,-_)||0)),R&&n6(Jd(h),R),h}var n=t.prototype;return n.render=function(r,a,l){var h=this._time,s=this._tDur,p=this._dur,_=r<0,x=r>s-Nr&&!_?s:r<Nr?0:r,T,k,A,M,R,F,z,G,Y;if(!p)rG(this,r,a,l);else if(x!==this._tTime||!r||l||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==_||this._lazy){if(T=x,G=this.timeline,this._repeat){if(M=p+this._rDelay,this._repeat<-1&&_)return this.totalTime(M*100+r,a,l);if(T=ro(x%M),x===s?(A=this._repeat,T=p):(R=ro(x/M),A=~~R,A&&A===R?(T=p,A--):T>p&&(T=p)),F=this._yoyo&&A&1,F&&(Y=this._yEase,T=p-T),R=Uv(this._tTime,M),T===h&&!l&&this._initted&&A===R)return this._tTime=x,this;A!==R&&(G&&this._yEase&&v6(G,F),this.vars.repeatRefresh&&!F&&!this._lock&&T!==M&&this._initted&&(this._lock=l=1,this.render(ro(M*A),!0).invalidate()._lock=0))}if(!this._initted){if(i6(this,_?r:T,l,a,x))return this._tTime=0,this;if(h!==this._time&&!(l&&this.vars.repeatRefresh&&A!==R))return this;if(p!==this._dur)return this.render(r,a,l)}if(this._tTime=x,this._time=T,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=z=(Y||this._ease)(T/p),this._from&&(this.ratio=z=1-z),!h&&x&&!a&&!R&&(nc(this,"onStart"),this._tTime!==x))return this;for(k=this._pt;k;)k.r(z,k.d),k=k._next;G&&G.render(r<0?r:G._dur*G._ease(T/this._dur),a,l)||this._startAt&&(this._zTime=r),this._onUpdate&&!a&&(_&&GC(this,r,a,l),nc(this,"onUpdate")),this._repeat&&A!==R&&this.vars.onRepeat&&!a&&this.parent&&nc(this,"onRepeat"),(x===this._tDur||!x)&&this._tTime===x&&(_&&!this._onUpdate&&GC(this,r,!0,!0),(r||!p)&&(x===this._tDur&&this._ts>0||!x&&this._ts<0)&&Hf(this,1),!a&&!(_&&!h)&&(x||h||F)&&(nc(this,x===s?"onComplete":"onReverseComplete",!0),this._prom&&!(x<s&&this.timeScale()>0)&&this._prom()))}return this},n.targets=function(){return this._targets},n.invalidate=function(r){return(!r||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(r),e.prototype.invalidate.call(this,r)},n.resetTo=function(r,a,l,h,s){k0||Ql.wake(),this._ts||this.play();var p=Math.min(this._dur,(this._dp._time-this._start)*this._ts),_;return this._initted||nA(this,p),_=this._ease(p/this._dur),TG(this,r,a,l,h,_,p,s)?this.resetTo(r,a,l,h,1):(lT(this,0),this.parent||e6(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},n.kill=function(r,a){if(a===void 0&&(a="all"),!r&&(!a||a==="all"))return this._lazy=this._pt=0,this.parent?Ry(this):this.scrollTrigger&&this.scrollTrigger.kill(!!la),this;if(this.timeline){var l=this.timeline.totalDuration();return this.timeline.killTweensOf(r,a,Ef&&Ef.vars.overwrite!==!0)._first||Ry(this),this.parent&&l!==this.timeline.totalDuration()&&jv(this,this._dur*this.timeline._tDur/l,0,1),this}var h=this._targets,s=r?Oc(r):h,p=this._ptLookup,_=this._pt,x,T,k,A,M,R,F;if((!a||a==="all")&&eG(h,s))return a==="all"&&(this._pt=0),Ry(this);for(x=this._op=this._op||[],a!=="all"&&(No(a)&&(M={},Ml(a,function(z){return M[z]=1}),a=M),a=SG(h,a)),F=h.length;F--;)if(~s.indexOf(h[F])){T=p[F],a==="all"?(x[F]=a,A=T,k={}):(k=x[F]=x[F]||{},A=a);for(M in A)R=T&&T[M],R&&((!("kill"in R.d)||R.d.kill(M)===!0)&&oT(this,R,"_pt"),delete T[M]),k!=="all"&&(k[M]=1)}return this._initted&&!this._pt&&_&&Ry(this),this},t.to=function(r,a){return new t(r,a,arguments[2])},t.from=function(r,a){return n0(1,arguments)},t.delayedCall=function(r,a,l,h){return new t(a,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:r,onComplete:a,onReverseComplete:a,onCompleteParams:l,onReverseCompleteParams:l,callbackScope:h})},t.fromTo=function(r,a,l){return n0(2,arguments)},t.set=function(r,a){return a.duration=0,a.repeatDelay||(a.repeat=0),new t(r,a)},t.killTweensOf=function(r,a,l){return _s.killTweensOf(r,a,l)},t})(I0);cc(io.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});Ml("staggerTo,staggerFrom,staggerFromTo",function(e){io[e]=function(){var t=new al,n=KC.call(arguments,0);return n.splice(e==="staggerFromTo"?5:4,0,0),t[e].apply(t,n)}});var iA=function(t,n,i){return t[n]=i},T6=function(t,n,i){return t[n](i)},CG=function(t,n,i,r){return t[n](r.fp,i)},kG=function(t,n,i){return t.setAttribute(n,i)},rA=function(t,n){return Rs(t[n])?T6:qI(t[n])&&t.setAttribute?kG:iA},S6=function(t,n){return n.set(n.t,n.p,Math.round((n.s+n.c*t)*1e6)/1e6,n)},IG=function(t,n){return n.set(n.t,n.p,!!(n.s+n.c*t),n)},E6=function(t,n){var i=n._pt,r="";if(!t&&n.b)r=n.b;else if(t===1&&n.e)r=n.e;else{for(;i;)r=i.p+(i.m?i.m(i.s+i.c*t):Math.round((i.s+i.c*t)*1e4)/1e4)+r,i=i._next;r+=n.c}n.set(n.t,n.p,r,n)},sA=function(t,n){for(var i=n._pt;i;)i.r(t,i.d),i=i._next},AG=function(t,n,i,r){for(var a=this._pt,l;a;)l=a._next,a.p===r&&a.modifier(t,n,i),a=l},PG=function(t){for(var n=this._pt,i,r;n;)r=n._next,n.p===t&&!n.op||n.op===t?oT(this,n,"_pt"):n.dep||(i=1),n=r;return!i},MG=function(t,n,i,r){r.mSet(t,n,r.m.call(r.tween,i,r.mt),r)},C6=function(t){for(var n=t._pt,i,r,a,l;n;){for(i=n._next,r=a;r&&r.pr>n.pr;)r=r._next;(n._prev=r?r._prev:l)?n._prev._next=n:a=n,(n._next=r)?r._prev=n:l=n,n=i}t._pt=a},Dl=(function(){function e(n,i,r,a,l,h,s,p,_){this.t=i,this.s=a,this.c=l,this.p=r,this.r=h||S6,this.d=s||this,this.set=p||iA,this.pr=_||0,this._next=n,n&&(n._prev=this)}var t=e.prototype;return t.modifier=function(i,r,a){this.mSet=this.mSet||this.set,this.set=MG,this.m=i,this.mt=a,this.tween=r},e})();Ml(JI+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(e){return ZI[e]=1});lc.TweenMax=lc.TweenLite=io;lc.TimelineLite=lc.TimelineMax=al;_s=new al({sortChildren:!1,defaults:Nv,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});ac.stringFilter=p6;var Cp=[],v1={},DG=[],$3=0,LG=0,BE=function(t){return(v1[t]||DG).map(function(n){return n()})},JC=function(){var t=Date.now(),n=[];t-$3>2&&(BE("matchMediaInit"),Cp.forEach(function(i){var r=i.queries,a=i.conditions,l,h,s,p;for(h in r)l=Wu.matchMedia(r[h]).matches,l&&(s=1),l!==a[h]&&(a[h]=l,p=1);p&&(i.revert(),s&&n.push(i))}),BE("matchMediaRevert"),n.forEach(function(i){return i.onMatch(i,function(r){return i.add(null,r)})}),$3=t,BE("matchMedia"))},k6=(function(){function e(n,i){this.selector=i&&XC(i),this.data=[],this._r=[],this.isReverted=!1,this.id=LG++,n&&this.add(n)}var t=e.prototype;return t.add=function(i,r,a){Rs(i)&&(a=r,r=i,i=Rs);var l=this,h=function(){var p=ls,_=l.selector,x;return p&&p!==l&&p.data.push(l),a&&(l.selector=XC(a)),ls=l,x=r.apply(l,arguments),Rs(x)&&l._r.push(x),ls=p,l.selector=_,l.isReverted=!1,x};return l.last=h,i===Rs?h(l,function(s){return l.add(null,s)}):i?l[i]=h:h},t.ignore=function(i){var r=ls;ls=null,i(this),ls=r},t.getTweens=function(){var i=[];return this.data.forEach(function(r){return r instanceof e?i.push.apply(i,r.getTweens()):r instanceof io&&!(r.parent&&r.parent.data==="nested")&&i.push(r)}),i},t.clear=function(){this._r.length=this.data.length=0},t.kill=function(i,r){var a=this;if(i?(function(){for(var h=a.getTweens(),s=a.data.length,p;s--;)p=a.data[s],p.data==="isFlip"&&(p.revert(),p.getChildren(!0,!0,!1).forEach(function(_){return h.splice(h.indexOf(_),1)}));for(h.map(function(_){return{g:_._dur||_._delay||_._sat&&!_._sat.vars.immediateRender?_.globalTime(0):-1/0,t:_}}).sort(function(_,x){return x.g-_.g||-1/0}).forEach(function(_){return _.t.revert(i)}),s=a.data.length;s--;)p=a.data[s],p instanceof al?p.data!=="nested"&&(p.scrollTrigger&&p.scrollTrigger.revert(),p.kill()):!(p instanceof io)&&p.revert&&p.revert(i);a._r.forEach(function(_){return _(i,a)}),a.isReverted=!0})():this.data.forEach(function(h){return h.kill&&h.kill()}),this.clear(),r)for(var l=Cp.length;l--;)Cp[l].id===this.id&&Cp.splice(l,1)},t.revert=function(i){this.kill(i||{})},e})(),RG=(function(){function e(n){this.contexts=[],this.scope=n,ls&&ls.data.push(this)}var t=e.prototype;return t.add=function(i,r,a){sd(i)||(i={matches:i});var l=new k6(0,a||this.scope),h=l.conditions={},s,p,_;ls&&!l.selector&&(l.selector=ls.selector),this.contexts.push(l),r=l.add("onMatch",r),l.queries=i;for(p in i)p==="all"?_=1:(s=Wu.matchMedia(i[p]),s&&(Cp.indexOf(l)<0&&Cp.push(l),(h[p]=s.matches)&&(_=1),s.addListener?s.addListener(JC):s.addEventListener("change",JC)));return _&&r(l,function(x){return l.add(null,x)}),this},t.revert=function(i){this.kill(i||{})},t.kill=function(i){this.contexts.forEach(function(r){return r.kill(i,!0)})},e})(),tw={registerPlugin:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];n.forEach(function(r){return h6(r)})},timeline:function(t){return new al(t)},getTweensOf:function(t,n){return _s.getTweensOf(t,n)},getProperty:function(t,n,i,r){No(t)&&(t=Oc(t)[0]);var a=Tp(t||{}).get,l=i?QB:JB;return i==="native"&&(i=""),t&&(n?l((Jl[n]&&Jl[n].get||a)(t,n,i,r)):function(h,s,p){return l((Jl[h]&&Jl[h].get||a)(t,h,s,p))})},quickSetter:function(t,n,i){if(t=Oc(t),t.length>1){var r=t.map(function(_){return Ol.quickSetter(_,n,i)}),a=r.length;return function(_){for(var x=a;x--;)r[x](_)}}t=t[0]||{};var l=Jl[n],h=Tp(t),s=h.harness&&(h.harness.aliases||{})[n]||n,p=l?function(_){var x=new l;vv._pt=0,x.init(t,i?_+i:_,vv,0,[t]),x.render(1,x),vv._pt&&sA(1,vv)}:h.set(t,s);return l?p:function(_){return p(t,s,i?_+i:_,h,1)}},quickTo:function(t,n,i){var r,a=Ol.to(t,cc((r={},r[n]="+=0.1",r.paused=!0,r.stagger=0,r),i||{})),l=function(s,p,_){return a.resetTo(n,s,p,_)};return l.tween=a,l},isTweening:function(t){return _s.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=Ep(t.ease,Nv.ease)),V3(Nv,t||{})},config:function(t){return V3(ac,t||{})},registerEffect:function(t){var n=t.name,i=t.effect,r=t.plugins,a=t.defaults,l=t.extendTimeline;(r||"").split(",").forEach(function(h){return h&&!Jl[h]&&!lc[h]&&S0(n+" effect requires "+h+" plugin.")}),LE[n]=function(h,s,p){return i(Oc(h),cc(s||{},a),p)},l&&(al.prototype[n]=function(h,s,p){return this.add(LE[n](h,sd(s)?s:(p=s)&&{},this),p)})},registerEase:function(t,n){Ki[t]=Ep(n)},parseEase:function(t,n){return arguments.length?Ep(t,n):Ki},getById:function(t){return _s.getById(t)},exportRoot:function(t,n){t===void 0&&(t={});var i=new al(t),r,a;for(i.smoothChildTiming=Pl(t.smoothChildTiming),_s.remove(i),i._dp=0,i._time=i._tTime=_s._time,r=_s._first;r;)a=r._next,(n||!(!r._dur&&r instanceof io&&r.vars.onComplete===r._targets[0]))&&qu(i,r,r._start-r._delay),r=a;return qu(_s,i,0),i},context:function(t,n){return t?new k6(t,n):ls},matchMedia:function(t){return new RG(t)},matchMediaRefresh:function(){return Cp.forEach(function(t){var n=t.conditions,i,r;for(r in n)n[r]&&(n[r]=!1,i=1);i&&t.revert()})||JC()},addEventListener:function(t,n){var i=v1[t]||(v1[t]=[]);~i.indexOf(n)||i.push(n)},removeEventListener:function(t,n){var i=v1[t],r=i&&i.indexOf(n);r>=0&&i.splice(r,1)},utils:{wrap:hG,wrapYoyo:fG,distribute:o6,random:l6,snap:a6,normalize:dG,getUnit:Ba,clamp:aG,splitColor:f6,toArray:Oc,selector:XC,mapRange:u6,pipe:cG,unitize:uG,interpolate:mG,shuffle:s6},install:qB,effects:LE,ticker:Ql,updateRoot:al.updateRoot,plugins:Jl,globalTimeline:_s,core:{PropTween:Dl,globals:KB,Tween:io,Timeline:al,Animation:I0,getCache:Tp,_removeLinkedListItem:oT,reverting:function(){return la},context:function(t){return t&&ls&&(ls.data.push(t),t._ctx=ls),ls},suppressOverwrites:function(t){return GI=t}}};Ml("to,from,fromTo,delayedCall,set,killTweensOf",function(e){return tw[e]=io[e]});Ql.add(al.updateRoot);vv=tw.to({},{duration:0});var OG=function(t,n){for(var i=t._pt;i&&i.p!==n&&i.op!==n&&i.fp!==n;)i=i._next;return i},VG=function(t,n){var i=t._targets,r,a,l;for(r in n)for(a=i.length;a--;)l=t._ptLookup[a][r],l&&(l=l.d)&&(l._pt&&(l=OG(l,r)),l&&l.modifier&&l.modifier(n[r],t,i[a],r))},FE=function(t,n){return{name:t,headless:1,rawVars:1,init:function(r,a,l){l._onInit=function(h){var s,p;if(No(a)&&(s={},Ml(a,function(_){return s[_]=1}),a=s),n){s={};for(p in a)s[p]=n(a[p]);a=s}VG(h,a)}}}},Ol=tw.registerPlugin({name:"attr",init:function(t,n,i,r,a){var l,h,s;this.tween=i;for(l in n)s=t.getAttribute(l)||"",h=this.add(t,"setAttribute",(s||0)+"",n[l],r,a,0,0,l),h.op=l,h.b=s,this._props.push(l)},render:function(t,n){for(var i=n._pt;i;)la?i.set(i.t,i.p,i.b,i):i.r(t,i.d),i=i._next}},{name:"endArray",headless:1,init:function(t,n){for(var i=n.length;i--;)this.add(t,i,t[i]||0,n[i],0,0,0,0,0,1)}},FE("roundProps",YC),FE("modifiers"),FE("snap",a6))||tw;io.version=al.version=Ol.version="3.13.0";GB=1;KI()&&Wv();Ki.Power0;Ki.Power1;Ki.Power2;Ki.Power3;Ki.Power4;Ki.Linear;Ki.Quad;Ki.Cubic;Ki.Quart;Ki.Quint;Ki.Strong;Ki.Elastic;Ki.Back;Ki.SteppedEase;Ki.Bounce;Ki.Sine;Ki.Expo;Ki.Circ;/*!
 * CSSPlugin 3.13.0
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var U3,Cf,Pv,oA,gp,j3,aA,BG=function(){return typeof window<"u"},gh={},up=180/Math.PI,Mv=Math.PI/180,rv=Math.atan2,W3=1e8,lA=/([A-Z])/g,FG=/(left|right|width|margin|padding|x)/i,zG=/[\s,\(]\S/,Ku={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},QC=function(t,n){return n.set(n.t,n.p,Math.round((n.s+n.c*t)*1e4)/1e4+n.u,n)},NG=function(t,n){return n.set(n.t,n.p,t===1?n.e:Math.round((n.s+n.c*t)*1e4)/1e4+n.u,n)},$G=function(t,n){return n.set(n.t,n.p,t?Math.round((n.s+n.c*t)*1e4)/1e4+n.u:n.b,n)},UG=function(t,n){var i=n.s+n.c*t;n.set(n.t,n.p,~~(i+(i<0?-.5:.5))+n.u,n)},I6=function(t,n){return n.set(n.t,n.p,t?n.e:n.b,n)},A6=function(t,n){return n.set(n.t,n.p,t!==1?n.b:n.e,n)},jG=function(t,n,i){return t.style[n]=i},WG=function(t,n,i){return t.style.setProperty(n,i)},HG=function(t,n,i){return t._gsap[n]=i},GG=function(t,n,i){return t._gsap.scaleX=t._gsap.scaleY=i},qG=function(t,n,i,r,a){var l=t._gsap;l.scaleX=l.scaleY=i,l.renderTransform(a,l)},KG=function(t,n,i,r,a){var l=t._gsap;l[n]=i,l.renderTransform(a,l)},bs="transform",Ll=bs+"Origin",XG=function e(t,n){var i=this,r=this.target,a=r.style,l=r._gsap;if(t in gh&&a){if(this.tfm=this.tfm||{},t!=="transform")t=Ku[t]||t,~t.indexOf(",")?t.split(",").forEach(function(h){return i.tfm[h]=th(r,h)}):this.tfm[t]=l.x?l[t]:th(r,t),t===Ll&&(this.tfm.zOrigin=l.zOrigin);else return Ku.transform.split(",").forEach(function(h){return e.call(i,h,n)});if(this.props.indexOf(bs)>=0)return;l.svg&&(this.svgo=r.getAttribute("data-svg-origin"),this.props.push(Ll,n,"")),t=bs}(a||n)&&this.props.push(t,n,a[t])},P6=function(t){t.translate&&(t.removeProperty("translate"),t.removeProperty("scale"),t.removeProperty("rotate"))},YG=function(){var t=this.props,n=this.target,i=n.style,r=n._gsap,a,l;for(a=0;a<t.length;a+=3)t[a+1]?t[a+1]===2?n[t[a]](t[a+2]):n[t[a]]=t[a+2]:t[a+2]?i[t[a]]=t[a+2]:i.removeProperty(t[a].substr(0,2)==="--"?t[a]:t[a].replace(lA,"-$1").toLowerCase());if(this.tfm){for(l in this.tfm)r[l]=this.tfm[l];r.svg&&(r.renderTransform(),n.setAttribute("data-svg-origin",this.svgo||"")),a=aA(),(!a||!a.isStart)&&!i[bs]&&(P6(i),r.zOrigin&&i[Ll]&&(i[Ll]+=" "+r.zOrigin+"px",r.zOrigin=0,r.renderTransform()),r.uncache=1)}},M6=function(t,n){var i={target:t,props:[],revert:YG,save:XG};return t._gsap||Ol.core.getCache(t),n&&t.style&&t.nodeType&&n.split(",").forEach(function(r){return i.save(r)}),i},D6,ek=function(t,n){var i=Cf.createElementNS?Cf.createElementNS((n||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):Cf.createElement(t);return i&&i.style?i:Cf.createElement(t)},Vc=function e(t,n,i){var r=getComputedStyle(t);return r[n]||r.getPropertyValue(n.replace(lA,"-$1").toLowerCase())||r.getPropertyValue(n)||!i&&e(t,Hv(n)||n,1)||""},H3="O,Moz,ms,Ms,Webkit".split(","),Hv=function(t,n,i){var r=n||gp,a=r.style,l=5;if(t in a&&!i)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);l--&&!(H3[l]+t in a););return l<0?null:(l===3?"ms":l>=0?H3[l]:"")+t},tk=function(){BG()&&window.document&&(U3=window,Cf=U3.document,Pv=Cf.documentElement,gp=ek("div")||{style:{}},ek("div"),bs=Hv(bs),Ll=bs+"Origin",gp.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",D6=!!Hv("perspective"),aA=Ol.core.reverting,oA=1)},G3=function(t){var n=t.ownerSVGElement,i=ek("svg",n&&n.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),r=t.cloneNode(!0),a;r.style.display="block",i.appendChild(r),Pv.appendChild(i);try{a=r.getBBox()}catch{}return i.removeChild(r),Pv.removeChild(i),a},q3=function(t,n){for(var i=n.length;i--;)if(t.hasAttribute(n[i]))return t.getAttribute(n[i])},L6=function(t){var n,i;try{n=t.getBBox()}catch{n=G3(t),i=1}return n&&(n.width||n.height)||i||(n=G3(t)),n&&!n.width&&!n.x&&!n.y?{x:+q3(t,["x","cx","x1"])||0,y:+q3(t,["y","cy","y1"])||0,width:0,height:0}:n},R6=function(t){return!!(t.getCTM&&(!t.parentNode||t.ownerSVGElement)&&L6(t))},Fp=function(t,n){if(n){var i=t.style,r;n in gh&&n!==Ll&&(n=bs),i.removeProperty?(r=n.substr(0,2),(r==="ms"||n.substr(0,6)==="webkit")&&(n="-"+n),i.removeProperty(r==="--"?n:n.replace(lA,"-$1").toLowerCase())):i.removeAttribute(n)}},kf=function(t,n,i,r,a,l){var h=new Dl(t._pt,n,i,0,1,l?A6:I6);return t._pt=h,h.b=r,h.e=a,t._props.push(i),h},K3={deg:1,rad:1,turn:1},ZG={grid:1,flex:1},Gf=function e(t,n,i,r){var a=parseFloat(i)||0,l=(i+"").trim().substr((a+"").length)||"px",h=gp.style,s=FG.test(n),p=t.tagName.toLowerCase()==="svg",_=(p?"client":"offset")+(s?"Width":"Height"),x=100,T=r==="px",k=r==="%",A,M,R,F;if(r===l||!a||K3[r]||K3[l])return a;if(l!=="px"&&!T&&(a=e(t,n,i,"px")),F=t.getCTM&&R6(t),(k||l==="%")&&(gh[n]||~n.indexOf("adius")))return A=F?t.getBBox()[s?"width":"height"]:t[_],Ws(k?a/A*x:a/100*A);if(h[s?"width":"height"]=x+(T?l:r),M=r!=="rem"&&~n.indexOf("adius")||r==="em"&&t.appendChild&&!p?t:t.parentNode,F&&(M=(t.ownerSVGElement||{}).parentNode),(!M||M===Cf||!M.appendChild)&&(M=Cf.body),R=M._gsap,R&&k&&R.width&&s&&R.time===Ql.time&&!R.uncache)return Ws(a/R.width*x);if(k&&(n==="height"||n==="width")){var z=t.style[n];t.style[n]=x+r,A=t[_],z?t.style[n]=z:Fp(t,n)}else(k||l==="%")&&!ZG[Vc(M,"display")]&&(h.position=Vc(t,"position")),M===t&&(h.position="static"),M.appendChild(gp),A=gp[_],M.removeChild(gp),h.position="absolute";return s&&k&&(R=Tp(M),R.time=Ql.time,R.width=M[_]),Ws(T?A*a/x:A&&a?x/A*a:0)},th=function(t,n,i,r){var a;return oA||tk(),n in Ku&&n!=="transform"&&(n=Ku[n],~n.indexOf(",")&&(n=n.split(",")[0])),gh[n]&&n!=="transform"?(a=P0(t,r),a=n!=="transformOrigin"?a[n]:a.svg?a.origin:iw(Vc(t,Ll))+" "+a.zOrigin+"px"):(a=t.style[n],(!a||a==="auto"||r||~(a+"").indexOf("calc("))&&(a=nw[n]&&nw[n](t,n,i)||Vc(t,n)||YB(t,n)||(n==="opacity"?1:0))),i&&!~(a+"").trim().indexOf(" ")?Gf(t,n,a,i)+i:a},JG=function(t,n,i,r){if(!i||i==="none"){var a=Hv(n,t,1),l=a&&Vc(t,a,1);l&&l!==i?(n=a,i=l):n==="borderColor"&&(i=Vc(t,"borderTopColor"))}var h=new Dl(this._pt,t.style,n,0,1,E6),s=0,p=0,_,x,T,k,A,M,R,F,z,G,Y,J;if(h.b=i,h.e=r,i+="",r+="",r.substring(0,6)==="var(--"&&(r=Vc(t,r.substring(4,r.indexOf(")")))),r==="auto"&&(M=t.style[n],t.style[n]=r,r=Vc(t,n)||r,M?t.style[n]=M:Fp(t,n)),_=[i,r],p6(_),i=_[0],r=_[1],T=i.match(gv)||[],J=r.match(gv)||[],J.length){for(;x=gv.exec(r);)R=x[0],z=r.substring(s,x.index),A?A=(A+1)%5:(z.substr(-5)==="rgba("||z.substr(-5)==="hsla(")&&(A=1),R!==(M=T[p++]||"")&&(k=parseFloat(M)||0,Y=M.substr((k+"").length),R.charAt(1)==="="&&(R=Av(k,R)+Y),F=parseFloat(R),G=R.substr((F+"").length),s=gv.lastIndex-G.length,G||(G=G||ac.units[n]||Y,s===r.length&&(r+=G,h.e+=G)),Y!==G&&(k=Gf(t,n,M,G)||0),h._pt={_next:h._pt,p:z||p===1?z:",",s:k,c:F-k,m:A&&A<4||n==="zIndex"?Math.round:0});h.c=s<r.length?r.substring(s,r.length):""}else h.r=n==="display"&&r==="none"?A6:I6;return WB.test(r)&&(h.e=0),this._pt=h,h},X3={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},QG=function(t){var n=t.split(" "),i=n[0],r=n[1]||"50%";return(i==="top"||i==="bottom"||r==="left"||r==="right")&&(t=i,i=r,r=t),n[0]=X3[i]||i,n[1]=X3[r]||r,n.join(" ")},eq=function(t,n){if(n.tween&&n.tween._time===n.tween._dur){var i=n.t,r=i.style,a=n.u,l=i._gsap,h,s,p;if(a==="all"||a===!0)r.cssText="",s=1;else for(a=a.split(","),p=a.length;--p>-1;)h=a[p],gh[h]&&(s=1,h=h==="transformOrigin"?Ll:bs),Fp(i,h);s&&(Fp(i,bs),l&&(l.svg&&i.removeAttribute("transform"),r.scale=r.rotate=r.translate="none",P0(i,1),l.uncache=1,P6(r)))}},nw={clearProps:function(t,n,i,r,a){if(a.data!=="isFromStart"){var l=t._pt=new Dl(t._pt,n,i,0,0,eq);return l.u=r,l.pr=-10,l.tween=a,t._props.push(i),1}}},A0=[1,0,0,1,0,0],O6={},V6=function(t){return t==="matrix(1, 0, 0, 1, 0, 0)"||t==="none"||!t},Y3=function(t){var n=Vc(t,bs);return V6(n)?A0:n.substr(7).match(jB).map(Ws)},cA=function(t,n){var i=t._gsap||Tp(t),r=t.style,a=Y3(t),l,h,s,p;return i.svg&&t.getAttribute("transform")?(s=t.transform.baseVal.consolidate().matrix,a=[s.a,s.b,s.c,s.d,s.e,s.f],a.join(",")==="1,0,0,1,0,0"?A0:a):(a===A0&&!t.offsetParent&&t!==Pv&&!i.svg&&(s=r.display,r.display="block",l=t.parentNode,(!l||!t.offsetParent&&!t.getBoundingClientRect().width)&&(p=1,h=t.nextElementSibling,Pv.appendChild(t)),a=Y3(t),s?r.display=s:Fp(t,"display"),p&&(h?l.insertBefore(t,h):l?l.appendChild(t):Pv.removeChild(t))),n&&a.length>6?[a[0],a[1],a[4],a[5],a[12],a[13]]:a)},nk=function(t,n,i,r,a,l){var h=t._gsap,s=a||cA(t,!0),p=h.xOrigin||0,_=h.yOrigin||0,x=h.xOffset||0,T=h.yOffset||0,k=s[0],A=s[1],M=s[2],R=s[3],F=s[4],z=s[5],G=n.split(" "),Y=parseFloat(G[0])||0,J=parseFloat(G[1])||0,re,X,U,H;i?s!==A0&&(X=k*R-A*M)&&(U=Y*(R/X)+J*(-M/X)+(M*z-R*F)/X,H=Y*(-A/X)+J*(k/X)-(k*z-A*F)/X,Y=U,J=H):(re=L6(t),Y=re.x+(~G[0].indexOf("%")?Y/100*re.width:Y),J=re.y+(~(G[1]||G[0]).indexOf("%")?J/100*re.height:J)),r||r!==!1&&h.smooth?(F=Y-p,z=J-_,h.xOffset=x+(F*k+z*M)-F,h.yOffset=T+(F*A+z*R)-z):h.xOffset=h.yOffset=0,h.xOrigin=Y,h.yOrigin=J,h.smooth=!!r,h.origin=n,h.originIsAbsolute=!!i,t.style[Ll]="0px 0px",l&&(kf(l,h,"xOrigin",p,Y),kf(l,h,"yOrigin",_,J),kf(l,h,"xOffset",x,h.xOffset),kf(l,h,"yOffset",T,h.yOffset)),t.setAttribute("data-svg-origin",Y+" "+J)},P0=function(t,n){var i=t._gsap||new y6(t);if("x"in i&&!n&&!i.uncache)return i;var r=t.style,a=i.scaleX<0,l="px",h="deg",s=getComputedStyle(t),p=Vc(t,Ll)||"0",_,x,T,k,A,M,R,F,z,G,Y,J,re,X,U,H,W,ie,Q,te,ke,Re,Be,Je,nt,De,Ge,Ee,it,ot,mt,Pt;return _=x=T=M=R=F=z=G=Y=0,k=A=1,i.svg=!!(t.getCTM&&R6(t)),s.translate&&((s.translate!=="none"||s.scale!=="none"||s.rotate!=="none")&&(r[bs]=(s.translate!=="none"?"translate3d("+(s.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(s.rotate!=="none"?"rotate("+s.rotate+") ":"")+(s.scale!=="none"?"scale("+s.scale.split(" ").join(",")+") ":"")+(s[bs]!=="none"?s[bs]:"")),r.scale=r.rotate=r.translate="none"),X=cA(t,i.svg),i.svg&&(i.uncache?(nt=t.getBBox(),p=i.xOrigin-nt.x+"px "+(i.yOrigin-nt.y)+"px",Je=""):Je=!n&&t.getAttribute("data-svg-origin"),nk(t,Je||p,!!Je||i.originIsAbsolute,i.smooth!==!1,X)),J=i.xOrigin||0,re=i.yOrigin||0,X!==A0&&(ie=X[0],Q=X[1],te=X[2],ke=X[3],_=Re=X[4],x=Be=X[5],X.length===6?(k=Math.sqrt(ie*ie+Q*Q),A=Math.sqrt(ke*ke+te*te),M=ie||Q?rv(Q,ie)*up:0,z=te||ke?rv(te,ke)*up+M:0,z&&(A*=Math.abs(Math.cos(z*Mv))),i.svg&&(_-=J-(J*ie+re*te),x-=re-(J*Q+re*ke))):(Pt=X[6],ot=X[7],Ge=X[8],Ee=X[9],it=X[10],mt=X[11],_=X[12],x=X[13],T=X[14],U=rv(Pt,it),R=U*up,U&&(H=Math.cos(-U),W=Math.sin(-U),Je=Re*H+Ge*W,nt=Be*H+Ee*W,De=Pt*H+it*W,Ge=Re*-W+Ge*H,Ee=Be*-W+Ee*H,it=Pt*-W+it*H,mt=ot*-W+mt*H,Re=Je,Be=nt,Pt=De),U=rv(-te,it),F=U*up,U&&(H=Math.cos(-U),W=Math.sin(-U),Je=ie*H-Ge*W,nt=Q*H-Ee*W,De=te*H-it*W,mt=ke*W+mt*H,ie=Je,Q=nt,te=De),U=rv(Q,ie),M=U*up,U&&(H=Math.cos(U),W=Math.sin(U),Je=ie*H+Q*W,nt=Re*H+Be*W,Q=Q*H-ie*W,Be=Be*H-Re*W,ie=Je,Re=nt),R&&Math.abs(R)+Math.abs(M)>359.9&&(R=M=0,F=180-F),k=Ws(Math.sqrt(ie*ie+Q*Q+te*te)),A=Ws(Math.sqrt(Be*Be+Pt*Pt)),U=rv(Re,Be),z=Math.abs(U)>2e-4?U*up:0,Y=mt?1/(mt<0?-mt:mt):0),i.svg&&(Je=t.getAttribute("transform"),i.forceCSS=t.setAttribute("transform","")||!V6(Vc(t,bs)),Je&&t.setAttribute("transform",Je))),Math.abs(z)>90&&Math.abs(z)<270&&(a?(k*=-1,z+=M<=0?180:-180,M+=M<=0?180:-180):(A*=-1,z+=z<=0?180:-180)),n=n||i.uncache,i.x=_-((i.xPercent=_&&(!n&&i.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-_)?-50:0)))?t.offsetWidth*i.xPercent/100:0)+l,i.y=x-((i.yPercent=x&&(!n&&i.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-x)?-50:0)))?t.offsetHeight*i.yPercent/100:0)+l,i.z=T+l,i.scaleX=Ws(k),i.scaleY=Ws(A),i.rotation=Ws(M)+h,i.rotationX=Ws(R)+h,i.rotationY=Ws(F)+h,i.skewX=z+h,i.skewY=G+h,i.transformPerspective=Y+l,(i.zOrigin=parseFloat(p.split(" ")[2])||!n&&i.zOrigin||0)&&(r[Ll]=iw(p)),i.xOffset=i.yOffset=0,i.force3D=ac.force3D,i.renderTransform=i.svg?nq:D6?B6:tq,i.uncache=0,i},iw=function(t){return(t=t.split(" "))[0]+" "+t[1]},zE=function(t,n,i){var r=Ba(n);return Ws(parseFloat(n)+parseFloat(Gf(t,"x",i+"px",r)))+r},tq=function(t,n){n.z="0px",n.rotationY=n.rotationX="0deg",n.force3D=0,B6(t,n)},tp="0deg",Sy="0px",np=") ",B6=function(t,n){var i=n||this,r=i.xPercent,a=i.yPercent,l=i.x,h=i.y,s=i.z,p=i.rotation,_=i.rotationY,x=i.rotationX,T=i.skewX,k=i.skewY,A=i.scaleX,M=i.scaleY,R=i.transformPerspective,F=i.force3D,z=i.target,G=i.zOrigin,Y="",J=F==="auto"&&t&&t!==1||F===!0;if(G&&(x!==tp||_!==tp)){var re=parseFloat(_)*Mv,X=Math.sin(re),U=Math.cos(re),H;re=parseFloat(x)*Mv,H=Math.cos(re),l=zE(z,l,X*H*-G),h=zE(z,h,-Math.sin(re)*-G),s=zE(z,s,U*H*-G+G)}R!==Sy&&(Y+="perspective("+R+np),(r||a)&&(Y+="translate("+r+"%, "+a+"%) "),(J||l!==Sy||h!==Sy||s!==Sy)&&(Y+=s!==Sy||J?"translate3d("+l+", "+h+", "+s+") ":"translate("+l+", "+h+np),p!==tp&&(Y+="rotate("+p+np),_!==tp&&(Y+="rotateY("+_+np),x!==tp&&(Y+="rotateX("+x+np),(T!==tp||k!==tp)&&(Y+="skew("+T+", "+k+np),(A!==1||M!==1)&&(Y+="scale("+A+", "+M+np),z.style[bs]=Y||"translate(0, 0)"},nq=function(t,n){var i=n||this,r=i.xPercent,a=i.yPercent,l=i.x,h=i.y,s=i.rotation,p=i.skewX,_=i.skewY,x=i.scaleX,T=i.scaleY,k=i.target,A=i.xOrigin,M=i.yOrigin,R=i.xOffset,F=i.yOffset,z=i.forceCSS,G=parseFloat(l),Y=parseFloat(h),J,re,X,U,H;s=parseFloat(s),p=parseFloat(p),_=parseFloat(_),_&&(_=parseFloat(_),p+=_,s+=_),s||p?(s*=Mv,p*=Mv,J=Math.cos(s)*x,re=Math.sin(s)*x,X=Math.sin(s-p)*-T,U=Math.cos(s-p)*T,p&&(_*=Mv,H=Math.tan(p-_),H=Math.sqrt(1+H*H),X*=H,U*=H,_&&(H=Math.tan(_),H=Math.sqrt(1+H*H),J*=H,re*=H)),J=Ws(J),re=Ws(re),X=Ws(X),U=Ws(U)):(J=x,U=T,re=X=0),(G&&!~(l+"").indexOf("px")||Y&&!~(h+"").indexOf("px"))&&(G=Gf(k,"x",l,"px"),Y=Gf(k,"y",h,"px")),(A||M||R||F)&&(G=Ws(G+A-(A*J+M*X)+R),Y=Ws(Y+M-(A*re+M*U)+F)),(r||a)&&(H=k.getBBox(),G=Ws(G+r/100*H.width),Y=Ws(Y+a/100*H.height)),H="matrix("+J+","+re+","+X+","+U+","+G+","+Y+")",k.setAttribute("transform",H),z&&(k.style[bs]=H)},iq=function(t,n,i,r,a){var l=360,h=No(a),s=parseFloat(a)*(h&&~a.indexOf("rad")?up:1),p=s-r,_=r+p+"deg",x,T;return h&&(x=a.split("_")[1],x==="short"&&(p%=l,p!==p%(l/2)&&(p+=p<0?l:-l)),x==="cw"&&p<0?p=(p+l*W3)%l-~~(p/l)*l:x==="ccw"&&p>0&&(p=(p-l*W3)%l-~~(p/l)*l)),t._pt=T=new Dl(t._pt,n,i,r,p,NG),T.e=_,T.u="deg",t._props.push(i),T},Z3=function(t,n){for(var i in n)t[i]=n[i];return t},rq=function(t,n,i){var r=Z3({},i._gsap),a="perspective,force3D,transformOrigin,svgOrigin",l=i.style,h,s,p,_,x,T,k,A;r.svg?(p=i.getAttribute("transform"),i.setAttribute("transform",""),l[bs]=n,h=P0(i,1),Fp(i,bs),i.setAttribute("transform",p)):(p=getComputedStyle(i)[bs],l[bs]=n,h=P0(i,1),l[bs]=p);for(s in gh)p=r[s],_=h[s],p!==_&&a.indexOf(s)<0&&(k=Ba(p),A=Ba(_),x=k!==A?Gf(i,s,p,A):parseFloat(p),T=parseFloat(_),t._pt=new Dl(t._pt,h,s,x,T-x,QC),t._pt.u=A||0,t._props.push(s));Z3(h,r)};Ml("padding,margin,Width,Radius",function(e,t){var n="Top",i="Right",r="Bottom",a="Left",l=(t<3?[n,i,r,a]:[n+a,n+i,r+i,r+a]).map(function(h){return t<2?e+h:"border"+h+e});nw[t>1?"border"+e:e]=function(h,s,p,_,x){var T,k;if(arguments.length<4)return T=l.map(function(A){return th(h,A,p)}),k=T.join(" "),k.split(T[0]).length===5?T[0]:k;T=(_+"").split(" "),k={},l.forEach(function(A,M){return k[A]=T[M]=T[M]||T[(M-1)/2|0]}),h.init(s,k,x)}});var F6={name:"css",register:tk,targetTest:function(t){return t.style&&t.nodeType},init:function(t,n,i,r,a){var l=this._props,h=t.style,s=i.vars.startAt,p,_,x,T,k,A,M,R,F,z,G,Y,J,re,X,U;oA||tk(),this.styles=this.styles||M6(t),U=this.styles.props,this.tween=i;for(M in n)if(M!=="autoRound"&&(_=n[M],!(Jl[M]&&b6(M,n,i,r,t,a)))){if(k=typeof _,A=nw[M],k==="function"&&(_=_.call(i,r,t,a),k=typeof _),k==="string"&&~_.indexOf("random(")&&(_=C0(_)),A)A(this,t,M,_,i)&&(X=1);else if(M.substr(0,2)==="--")p=(getComputedStyle(t).getPropertyValue(M)+"").trim(),_+="",Vf.lastIndex=0,Vf.test(p)||(R=Ba(p),F=Ba(_)),F?R!==F&&(p=Gf(t,M,p,F)+F):R&&(_+=R),this.add(h,"setProperty",p,_,r,a,0,0,M),l.push(M),U.push(M,0,h[M]);else if(k!=="undefined"){if(s&&M in s?(p=typeof s[M]=="function"?s[M].call(i,r,t,a):s[M],No(p)&&~p.indexOf("random(")&&(p=C0(p)),Ba(p+"")||p==="auto"||(p+=ac.units[M]||Ba(th(t,M))||""),(p+"").charAt(1)==="="&&(p=th(t,M))):p=th(t,M),T=parseFloat(p),z=k==="string"&&_.charAt(1)==="="&&_.substr(0,2),z&&(_=_.substr(2)),x=parseFloat(_),M in Ku&&(M==="autoAlpha"&&(T===1&&th(t,"visibility")==="hidden"&&x&&(T=0),U.push("visibility",0,h.visibility),kf(this,h,"visibility",T?"inherit":"hidden",x?"inherit":"hidden",!x)),M!=="scale"&&M!=="transform"&&(M=Ku[M],~M.indexOf(",")&&(M=M.split(",")[0]))),G=M in gh,G){if(this.styles.save(M),k==="string"&&_.substring(0,6)==="var(--"&&(_=Vc(t,_.substring(4,_.indexOf(")"))),x=parseFloat(_)),Y||(J=t._gsap,J.renderTransform&&!n.parseTransform||P0(t,n.parseTransform),re=n.smoothOrigin!==!1&&J.smooth,Y=this._pt=new Dl(this._pt,h,bs,0,1,J.renderTransform,J,0,-1),Y.dep=1),M==="scale")this._pt=new Dl(this._pt,J,"scaleY",J.scaleY,(z?Av(J.scaleY,z+x):x)-J.scaleY||0,QC),this._pt.u=0,l.push("scaleY",M),M+="X";else if(M==="transformOrigin"){U.push(Ll,0,h[Ll]),_=QG(_),J.svg?nk(t,_,0,re,0,this):(F=parseFloat(_.split(" ")[2])||0,F!==J.zOrigin&&kf(this,J,"zOrigin",J.zOrigin,F),kf(this,h,M,iw(p),iw(_)));continue}else if(M==="svgOrigin"){nk(t,_,1,re,0,this);continue}else if(M in O6){iq(this,J,M,T,z?Av(T,z+_):_);continue}else if(M==="smoothOrigin"){kf(this,J,"smooth",J.smooth,_);continue}else if(M==="force3D"){J[M]=_;continue}else if(M==="transform"){rq(this,_,t);continue}}else M in h||(M=Hv(M)||M);if(G||(x||x===0)&&(T||T===0)&&!zG.test(_)&&M in h)R=(p+"").substr((T+"").length),x||(x=0),F=Ba(_)||(M in ac.units?ac.units[M]:R),R!==F&&(T=Gf(t,M,p,F)),this._pt=new Dl(this._pt,G?J:h,M,T,(z?Av(T,z+x):x)-T,!G&&(F==="px"||M==="zIndex")&&n.autoRound!==!1?UG:QC),this._pt.u=F||0,R!==F&&F!=="%"&&(this._pt.b=p,this._pt.r=$G);else if(M in h)JG.call(this,t,M,p,z?z+_:_);else if(M in t)this.add(t,M,p||t[M],z?z+_:_,r,a);else if(M!=="parseTransform"){YI(M,_);continue}G||(M in h?U.push(M,0,h[M]):typeof t[M]=="function"?U.push(M,2,t[M]()):U.push(M,1,p||t[M])),l.push(M)}}X&&C6(this)},render:function(t,n){if(n.tween._time||!aA())for(var i=n._pt;i;)i.r(t,i.d),i=i._next;else n.styles.revert()},get:th,aliases:Ku,getSetter:function(t,n,i){var r=Ku[n];return r&&r.indexOf(",")<0&&(n=r),n in gh&&n!==Ll&&(t._gsap.x||th(t,"x"))?i&&j3===i?n==="scale"?GG:HG:(j3=i||{})&&(n==="scale"?qG:KG):t.style&&!qI(t.style[n])?jG:~n.indexOf("-")?WG:rA(t,n)},core:{_removeProperty:Fp,_getMatrix:cA}};Ol.utils.checkPrefix=Hv;Ol.core.getStyleSaver=M6;(function(e,t,n,i){var r=Ml(e+","+t+","+n,function(a){gh[a]=1});Ml(t,function(a){ac.units[a]="deg",O6[a]=1}),Ku[r[13]]=e+","+t,Ml(i,function(a){var l=a.split(":");Ku[l[1]]=r[l[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");Ml("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(e){ac.units[e]="px"});Ol.registerPlugin(F6);var _1=Ol.registerPlugin(F6)||Ol;_1.core.Tween;const z6=""+new URL("../singatrainlogo.png",import.meta.url).href,N6="singatrain-app-state";function sq(){if(typeof window>"u")return null;try{const e=window.localStorage.getItem(N6);return e?JSON.parse(e):null}catch{return null}}function NE(e){typeof window>"u"||window.localStorage.setItem(N6,JSON.stringify({favorites:e.favorites,user:e.user,darkMode:e.darkMode}))}const oq={name:"Guest User",email:"",memberSince:"",favorites:[]},$E=sq(),to=so({activeTab:"dashboard",darkMode:$E?.darkMode??!1,favorites:$E?.favorites??[],user:{...oq,...$E?.user||{}}});function aq(e){typeof document>"u"||(document.body.classList.toggle("dark-mode",e),document.documentElement.setAttribute("data-bs-theme",e?"dark":"light"))}function Gv(){const e=me(()=>to.favorites.length);function t(s){to.activeTab=s}function n(s){to.darkMode=s}function i(){to.darkMode=!to.darkMode}function r(s){if(!s||!s.station)return;to.favorites.some(_=>_.station===s.station&&_.label===s.label)||to.favorites.push({...s})}function a(s){to.favorites=to.favorites.filter(p=>p.label!==s.label||p.station!==s.station)}function l(){to.favorites.splice(0,to.favorites.length)}function h(s){to.user={...to.user,...s}}return Yt(()=>to.darkMode,s=>{aq(s),NE(to)},{immediate:!0}),Yt(()=>to.favorites,()=>NE(to),{deep:!0}),Yt(()=>to.user,()=>NE(to),{deep:!0}),{state:to,favoritesCount:e,setActiveTab:t,setDarkMode:n,toggleDarkMode:i,addFavorite:r,removeFavorite:a,clearFavorites:l,updateUser:h}}const lq={class:"premium-navbar"},cq={class:"container"},uq={class:"navbar-nav desktop-only"},dq=["onClick"],hq={class:"material-icons me-1"},fq={class:"right-controls"},mq={class:"theme-toggle-wrapper",style:{display:"none"}},pq={class:"theme-switch"},gq=["checked"],vq={class:"navbar-nav"},_q=["onClick"],yq={class:"material-icons me-1"},bq={__name:"Navbar",setup(e){const t=[{key:"dashboard",label:"Dashboard",icon:"space_dashboard"},{key:"live",label:"Live Tracker",icon:"tram"},{key:"route",label:"Route Planner",icon:"alt_route"},{key:"fare",label:"Fare Calculator",icon:"payments"},{key:"meetup",label:"Meet-up",icon:"groups"},{key:"profile",label:"Profile",icon:"account_circle"}],n=tt(!1),{state:i,setActiveTab:r,toggleDarkMode:a}=Gv(),l=tt(window.innerWidth),h=()=>{l.value=window.innerWidth,l.value>=992&&(n.value=!1)},s=()=>{n.value=!1};return Mr(()=>{window.addEventListener("resize",h)}),Ur(()=>{window.removeEventListener("resize",h)}),(p,_)=>(Gt(),on(an,null,[V("nav",lq,[V("div",cq,[V("a",{class:"navbar-brand",href:"#",onClick:_[0]||(_[0]=ra(x=>bi(r)("dashboard"),["prevent"]))},[..._[3]||(_[3]=[V("img",{src:z6,alt:"SingaTrain logo",class:"logo"},null,-1),V("span",null,"SingaTrain",-1)])]),V("ul",uq,[(Gt(),on(an,null,cs(t,x=>V("li",{key:x.key,class:"nav-item"},[V("a",{href:"#",class:_t(["nav-link",{active:bi(i).activeTab===x.key}]),onClick:ra(T=>{bi(r)(x.key),s()},["prevent"])},[V("span",hq,en(x.icon),1),V("span",null,en(x.label),1)],10,dq)])),64))]),V("div",fq,[V("div",mq,[V("label",pq,[V("input",{type:"checkbox",checked:bi(i).darkMode,onChange:_[1]||(_[1]=(...x)=>bi(a)&&bi(a)(...x))},null,40,gq),_[4]||(_[4]=V("span",{class:"slider"},[V("span",{class:"icon sun material-icons"},"light_mode"),V("span",{class:"icon moon material-icons"},"dark_mode")],-1))])]),V("button",{class:"navbar-toggler",type:"button",onClick:_[2]||(_[2]=x=>n.value=!n.value)},[..._[5]||(_[5]=[V("span",{class:"material-icons"},"menu",-1)])])])]),V("div",{class:_t(["collapse-menu",n.value?"open":""])},[V("ul",vq,[(Gt(),on(an,null,cs(t,(x,T)=>V("li",{key:x.key,class:"nav-item",style:Xt({transitionDelay:n.value?`${T*80}ms`:"0ms"})},[V("a",{href:"#",class:_t(["nav-link",{active:bi(i).activeTab===x.key}]),onClick:ra(k=>bi(r)(x.key),["prevent"])},[V("span",yq,en(x.icon),1),V("span",null,en(x.label),1)],10,_q)],4)),64))])],2)]),n.value?(Gt(),on("div",{key:0,class:"menu-overlay",onClick:s})):xi("",!0)],64))}},J3=""+new URL("../MRT-Map.png",import.meta.url).href,If={NSL:["Jurong East","Bukit Batok","Bukit Gombak","Choa Chu Kang","Yew Tee","Kranji","Marsiling","Woodlands","Admiralty","Sembawang","Canberra","Yishun","Khatib","Yio Chu Kang","Ang Mo Kio","Bishan","Braddell","Toa Payoh","Novena","Newton","Orchard","Somerset","Dhoby Ghaut","City Hall","Raffles Place","Marina Bay","Marina South Pier"],EWL:["Pasir Ris","Tampines","Simei","Tanah Merah","Bedok","Kembangan","Eunos","Paya Lebar","Aljunied","Kallang","Lavender","Bugis","City Hall","Raffles Place","Tanjong Pagar","Outram Park","Tiong Bahru","Redhill","Queenstown","Commonwealth","Buona Vista","Dover","Clementi","Jurong East","Chinese Garden","Lakeside","Boon Lay","Pioneer","Joo Koon","Gul Circle","Tuas Crescent","Tuas West Road","Tuas Link"],CGL:["Tanah Merah","Expo","Changi Airport"],DTL:["Bukit Panjang","Cashew","Hillview","Beauty World","King Albert Park","Sixth Avenue","Tan Kah Kee","Botanic Gardens","Stevens","Newton","Little India","Rochor","Bugis","Promenade","Bayfront","Downtown","Telok Ayer","Chinatown","Fort Canning","Bencoolen","Jalan Besar","Bendemeer","Geylang Bahru","Mattar","MacPherson","Ubi","Kaki Bukit","Bedok North","Bedok Reservoir","Tampines West","Tampines","Tampines East","Upper Changi","Expo"],CCL:["Dhoby Ghaut","Bras Basah","Esplanade","Promenade","Bayfront","Nicoll Highway","Stadium","Mountbatten","Dakota","Paya Lebar","MacPherson","Tai Seng","Bartley","Serangoon","Lorong Chuan","Bishan","Marymount","Caldecott","Botanic Gardens","Farrer Road","Holland Village","Buona Vista","one-north","Kent Ridge","Haw Par Villa","Pasir Panjang","Labrador Park","Telok Blangah","HarbourFront"],NEL:["HarbourFront","Outram Park","Chinatown","Clarke Quay","Dhoby Ghaut","Little India","Farrer Park","Boon Keng","Potong Pasir","Woodleigh","Serangoon","Kovan","Hougang","Buangkok","Sengkang","Punggol","Punggol Coast"],TEL:["Woodlands North","Woodlands","Woodlands South","Springleaf","Lentor","Mayflower","Bright Hill","Upper Thomson","Caldecott","Stevens","Napier","Orchard Boulevard","Orchard","Great World","Havelock","Outram Park","Maxwell","Shenton Way","Marina Bay","Gardens By The Bay","Tanjong Rhu","Katong Park","Tanjong Katong","Marine Parade","Marine Terrace","Siglap","Bayshore"],BPL:["Choa Chu Kang","South View","Keat Hong","Teck Whye","Phoenix","Bukit Panjang","Petir","Pending","Bangkit","Fajar","Segar","Jelapang","Senja"],SWPL:["Sengkang","Cheng Lim","Farmway","Kupang","Thanggam","Fernvale","Layar","Tongkang","Renjong"],SEPL:["Sengkang","Compassvale","Rumbia","Bakau","Kangkar","Ranggung"],PEPLRT:["Punggol","Cove","Meridian","Coral Edge","Riviera","Kadaloor","Oasis","Damai"],PWLRT:["Punggol","Sam Kee","Punggol Point","Samudera","Nibong","Sumang","Soo Teck"]},$6=[...new Set(Object.values(If).flat())].sort((e,t)=>e.localeCompare(t)),r0={"Jurong East":["North-South Line","East-West Line"],"Bukit Batok":["North-South Line"],"Bukit Gombak":["North-South Line"],"Choa Chu Kang":["North-South Line","LRT Line"],"Yew Tee":["North-South Line"],Kranji:["North-South Line"],Marsiling:["North-South Line"],Woodlands:["North-South Line","Thomson-East Coast Line"],Admiralty:["North-South Line"],Sembawang:["North-South Line"],Canberra:["North-South Line"],Yishun:["North-South Line"],Khatib:["North-South Line"],"Yio Chu Kang":["North-South Line"],"Ang Mo Kio":["North-South Line"],Bishan:["North-South Line","Circle Line"],Braddell:["North-South Line"],"Toa Payoh":["North-South Line"],Novena:["North-South Line"],Newton:["North-South Line","Downtown Line"],Orchard:["North-South Line","Thomson-East Coast Line"],Somerset:["North-South Line"],"Dhoby Ghaut":["North-South Line","North-East Line","Circle Line"],"City Hall":["North-South Line","East-West Line"],"Raffles Place":["North-South Line","East-West Line"],"Marina Bay":["North-South Line","Thomson-East Coast Line"],"Marina South Pier":["North-South Line"],"Pasir Ris":["East-West Line"],Tampines:["East-West Line","Downtown Line"],Simei:["East-West Line"],"Tanah Merah":["East-West Line"],Bedok:["East-West Line"],Kembangan:["East-West Line"],Eunos:["East-West Line"],"Paya Lebar":["East-West Line","Circle Line"],Aljunied:["East-West Line"],Kallang:["East-West Line"],Lavender:["East-West Line"],Bugis:["East-West Line","Downtown Line"],"Tanjong Pagar":["East-West Line"],"Outram Park":["East-West Line","North-East Line","Thomson-East Coast Line"],"Tiong Bahru":["East-West Line"],Redhill:["East-West Line"],Queenstown:["East-West Line"],Commonwealth:["East-West Line"],"Buona Vista":["East-West Line","Circle Line"],Dover:["East-West Line"],Clementi:["East-West Line"],"Chinese Garden":["East-West Line"],Lakeside:["East-West Line"],"Boon Lay":["East-West Line"],Pioneer:["East-West Line"],"Joo Koon":["East-West Line"],"Gul Circle":["East-West Line"],"Tuas Crescent":["East-West Line"],"Tuas West Road":["East-West Line"],"Tuas Link":["East-West Line"],Expo:["Downtown Line"],"Changi Airport":["East-West Line"],"Bukit Panjang":["Downtown Line","LRT Line"],Cashew:["Downtown Line"],Hillview:["Downtown Line"],"Beauty World":["Downtown Line"],"King Albert Park":["Downtown Line"],"Sixth Avenue":["Downtown Line"],"Tan Kah Kee":["Downtown Line"],"Botanic Gardens":["Downtown Line","Circle Line"],Stevens:["Downtown Line","Thomson-East Coast Line"],"Little India":["Downtown Line","North-East Line"],Rochor:["Downtown Line"],Promenade:["Downtown Line","Circle Line"],Bayfront:["Downtown Line","Circle Line"],Downtown:["Downtown Line"],"Telok Ayer":["Downtown Line"],Chinatown:["Downtown Line","North-East Line"],"Fort Canning":["Downtown Line"],Bencoolen:["Downtown Line"],"Jalan Besar":["Downtown Line"],Bendemeer:["Downtown Line"],"Geylang Bahru":["Downtown Line"],Mattar:["Downtown Line"],MacPherson:["Downtown Line","Circle Line"],Ubi:["Downtown Line"],"Kaki Bukit":["Downtown Line"],"Bedok North":["Downtown Line"],"Bedok Reservoir":["Downtown Line"],"Tampines West":["Downtown Line"],"Tampines East":["Downtown Line"],"Upper Changi":["Downtown Line"],"Bras Basah":["Circle Line"],Esplanade:["Circle Line"],"Nicoll Highway":["Circle Line"],Stadium:["Circle Line"],Mountbatten:["Circle Line"],Dakota:["Circle Line"],"Tai Seng":["Circle Line"],Bartley:["Circle Line"],Serangoon:["Circle Line","North-East Line"],"Lorong Chuan":["Circle Line"],Marymount:["Circle Line"],Caldecott:["Circle Line","Thomson-East Coast Line"],"Farrer Road":["Circle Line"],"Holland Village":["Circle Line"],"one-north":["Circle Line"],"Kent Ridge":["Circle Line"],"Haw Par Villa":["Circle Line"],"Pasir Panjang":["Circle Line"],"Labrador Park":["Circle Line"],"Telok Blangah":["Circle Line"],HarbourFront:["Circle Line","North-East Line"],"Clarke Quay":["North-East Line"],"Farrer Park":["North-East Line"],"Boon Keng":["North-East Line"],"Potong Pasir":["North-East Line"],Woodleigh:["North-East Line"],Kovan:["North-East Line"],Hougang:["North-East Line"],Buangkok:["North-East Line"],Sengkang:["North-East Line","LRT Line"],Punggol:["North-East Line","LRT Line"],"Punggol Coast":["North-East Line"],"Woodlands North":["Thomson-East Coast Line"],"Woodlands South":["Thomson-East Coast Line"],Springleaf:["Thomson-East Coast Line"],Lentor:["Thomson-East Coast Line"],Mayflower:["Thomson-East Coast Line"],"Bright Hill":["Thomson-East Coast Line"],"Upper Thomson":["Thomson-East Coast Line"],Napier:["Thomson-East Coast Line"],"Orchard Boulevard":["Thomson-East Coast Line"],"Great World":["Thomson-East Coast Line"],Havelock:["Thomson-East Coast Line"],Maxwell:["Thomson-East Coast Line"],"Shenton Way":["Thomson-East Coast Line"],"Gardens By The Bay":["Thomson-East Coast Line"],"Tanjong Rhu":["Thomson-East Coast Line"],"Katong Park":["Thomson-East Coast Line"],"Tanjong Katong":["Thomson-East Coast Line"],"Marine Parade":["Thomson-East Coast Line"],"Marine Terrace":["Thomson-East Coast Line"],Siglap:["Thomson-East Coast Line"],Bayshore:["Thomson-East Coast Line"],"South View":["LRT Line"],"Keat Hong":["LRT Line"],"Teck Whye":["LRT Line"],Phoenix:["LRT Line"],Petir:["LRT Line"],Pending:["LRT Line"],Bangkit:["LRT Line"],Fajar:["LRT Line"],Segar:["LRT Line"],Jelapang:["LRT Line"],Senja:["LRT Line"],"Cheng Lim":["LRT Line"],Farmway:["LRT Line"],Kupang:["LRT Line"],Thanggam:["LRT Line"],Fernvale:["LRT Line"],Layar:["LRT Line"],Tongkang:["LRT Line"],Renjong:["LRT Line"],Compassvale:["LRT Line"],Rumbia:["LRT Line"],Bakau:["LRT Line"],Kangkar:["LRT Line"],Ranggung:["LRT Line"],Cove:["LRT Line"],Meridian:["LRT Line"],"Coral Edge":["LRT Line"],Riviera:["LRT Line"],Kadaloor:["LRT Line"],Oasis:["LRT Line"],Damai:["LRT Line"],"Sam Kee":["LRT Line"],"Punggol Point":["LRT Line"],Samudera:["LRT Line"],Nibong:["LRT Line"],Sumang:["LRT Line"],"Soo Teck":["LRT Line"]},Vy={"North-South Line":"#d42e12","East-West Line":"#009645","Circle Line":"#fa9e0d","Downtown Line":"#005ec4","North-East Line":"#9900aa","Thomson-East Coast Line":"#9d5b25","Jurong Region Line":"#00a0a8","LRT Line":"#748477"},Bx=[{station:"Marina Bay",line:"North-South Line"},{station:"Paya Lebar",line:"Circle Line"},{station:"Woodlands",line:"Thomson-East Coast Line"},{station:"Dhoby Ghaut",line:"North-East Line"},{station:"Jurong East",line:"East-West Line"}],xq=5e3,wq={default:{peak:[60,180],shoulder:[120,240],offPeak:[180,360]}},Q3={enabled:!0,probability:.2,checkEvery:4,durationRangeSeconds:[180,300]};function dp(e,t){return Math.floor(Math.random()*(t-e+1))+e}function Tq(e,t,n){const i=e[t]||e.default,r=i[n]||i.offPeak||e.default.offPeak;return Array.isArray(r)?r:e.default.offPeak}function UE(e=new Date){const t=e.getHours();return t>=7&&t<9||t>=17&&t<20?"peak":t>=6&&t<7||t>=9&&t<11||t>=16&&t<17||t>=20&&t<22?"shoulder":"offPeak"}function jE(e,t,n,i){const[r,a]=Tq(e,t,i),l=dp(r,a);return n+l}function oh(e){return Vy[e]||"#6b7280"}function U6(e={}){const t={stationLines:r0,lineIntervals:wq,updateIntervalMs:3e4,trainsPerLine:3,delay:{...Q3},...e,delay:{...Q3,...e.delay||{}}},n={arrivals:{},delayFlags:{},cycles:0,intervalId:null};function i(k,A){n.arrivals[k]||(n.arrivals[k]={}),Array.isArray(n.arrivals[k][A])||(n.arrivals[k][A]=[])}function r(k,A){i(k,A);const M=n.arrivals[k][A];M.length=0;const R=UE();let F=dp(60,240);for(let z=0;z<t.trainsPerLine;z+=1)M.push(F),F=jE(t.lineIntervals,A,F,R)}function a(){Object.entries(t.stationLines).forEach(([k,A])=>{A.forEach(M=>{i(k,M);const R=n.arrivals[k][M];if(!R.length)r(k,M);else for(;R.length<t.trainsPerLine;){const F=R[R.length-1]||dp(120,480);R.push(jE(t.lineIntervals,M,F,UE()))}})})}function l(k=Date.now()){Object.keys(n.delayFlags).forEach(A=>{const M=n.delayFlags[A];M&&(Object.keys(M).forEach(R=>{M[R]<k&&delete M[R]}),Object.keys(M).length||delete n.delayFlags[A])})}function h(){if(!t.delay.enabled||n.cycles%t.delay.checkEvery!==0||Math.random()>t.delay.probability)return;const k=Object.keys(n.arrivals);if(!k.length)return;const A=k[dp(0,k.length-1)],M=Object.keys(n.arrivals[A]||{});if(!M.length)return;const R=M[dp(0,M.length-1)],F=n.arrivals[A][R];if(!F?.length)return;const[z,G]=t.delay.durationRangeSeconds,Y=dp(z,G);for(let J=0;J<F.length;J+=1)F[J]+=Y;n.delayFlags[A]||(n.delayFlags[A]={}),n.delayFlags[A][R]=Date.now()+Y*1e3}function s(){n.cycles+=1;const k=t.updateIntervalMs/1e3;l(),Object.entries(n.arrivals).forEach(([A,M])=>{Object.entries(M).forEach(([R,F])=>{for(let z=0;z<F.length;z+=1)F[z]=Math.max(0,F[z]-k);for(;F.length&&F[0]<=0;)F.shift();for(;F.length<t.trainsPerLine;){const z=F.length?F[F.length-1]:dp(120,480);F.push(jE(t.lineIntervals,R,z,UE()))}})}),h()}function p(){a(),n.intervalId===null&&(n.intervalId=setInterval(s,t.updateIntervalMs))}function _(){n.intervalId!==null&&(clearInterval(n.intervalId),n.intervalId=null)}function x({returnSeconds:k=!1}={}){const A={};return Object.entries(n.arrivals).forEach(([M,R])=>{A[M]={},Object.entries(R).forEach(([F,z])=>{A[M][F]=z.map(G=>k?Math.max(0,Math.round(G)):Math.max(0,Math.ceil(G/60)))})}),A}function T(k){return x()[k]||{}}return{config:t,start:p,stop:_,refresh:s,getArrivals:x,getStationArrivals:T}}const Sq=()=>{};var eR={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j6=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=r&63|128):(r&64512)===55296&&i+1<e.length&&(e.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(e.charCodeAt(++i)&1023),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=r&63|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=r&63|128)}return t},Eq=function(e){const t=[];let n=0,i=0;for(;n<e.length;){const r=e[n++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){const a=e[n++];t[i++]=String.fromCharCode((r&31)<<6|a&63)}else if(r>239&&r<365){const a=e[n++],l=e[n++],h=e[n++],s=((r&7)<<18|(a&63)<<12|(l&63)<<6|h&63)-65536;t[i++]=String.fromCharCode(55296+(s>>10)),t[i++]=String.fromCharCode(56320+(s&1023))}else{const a=e[n++],l=e[n++];t[i++]=String.fromCharCode((r&15)<<12|(a&63)<<6|l&63)}}return t.join("")},W6={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<e.length;r+=3){const a=e[r],l=r+1<e.length,h=l?e[r+1]:0,s=r+2<e.length,p=s?e[r+2]:0,_=a>>2,x=(a&3)<<4|h>>4;let T=(h&15)<<2|p>>6,k=p&63;s||(k=64,l||(T=64)),i.push(n[_],n[x],n[T],n[k])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(j6(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):Eq(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<e.length;){const a=n[e.charAt(r++)],h=r<e.length?n[e.charAt(r)]:0;++r;const p=r<e.length?n[e.charAt(r)]:64;++r;const x=r<e.length?n[e.charAt(r)]:64;if(++r,a==null||h==null||p==null||x==null)throw new Cq;const T=a<<2|h>>4;if(i.push(T),p!==64){const k=h<<4&240|p>>2;if(i.push(k),x!==64){const A=p<<6&192|x;i.push(A)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Cq extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const kq=function(e){const t=j6(e);return W6.encodeByteArray(t,!0)},rw=function(e){return kq(e).replace(/\./g,"")},H6=function(e){try{return W6.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iq(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aq=()=>Iq().__FIREBASE_DEFAULTS__,Pq=()=>{if(typeof process>"u"||typeof eR>"u")return;const e=eR.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},Mq=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&H6(e[1]);return t&&JSON.parse(t)},cT=()=>{try{return Sq()||Aq()||Pq()||Mq()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},G6=e=>cT()?.emulatorHosts?.[e],Dq=e=>{const t=G6(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),i]:[t.substring(0,n),i]},q6=()=>cT()?.config,K6=e=>cT()?.[`_${e}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lq{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g_(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function X6(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rq(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=t||"demo-project",r=e.iat||0,a=e.sub||e.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...e};return[rw(JSON.stringify(n)),rw(JSON.stringify(l)),""].join(".")}const s0={};function Oq(){const e={prod:[],emulator:[]};for(const t of Object.keys(s0))s0[t]?e.emulator.push(t):e.prod.push(t);return e}function Vq(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let tR=!1;function Y6(e,t){if(typeof window>"u"||typeof document>"u"||!g_(window.location.host)||s0[e]===t||s0[e]||tR)return;s0[e]=t;function n(T){return`__firebase__banner__${T}`}const i="__firebase__banner",a=Oq().prod.length>0;function l(){const T=document.getElementById(i);T&&T.remove()}function h(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function s(T,k){T.setAttribute("width","24"),T.setAttribute("id",k),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function p(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{tR=!0,l()},T}function _(T,k){T.setAttribute("id",k),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function x(){const T=Vq(i),k=n("text"),A=document.getElementById(k)||document.createElement("span"),M=n("learnmore"),R=document.getElementById(M)||document.createElement("a"),F=n("preprendIcon"),z=document.getElementById(F)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const G=T.element;h(G),_(R,M);const Y=p();s(z,F),G.append(z,A,R,Y),document.body.appendChild(G)}a?(A.innerText="Preview backend disconnected.",z.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(z.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,A.innerText="Preview backend running in this workspace."),A.setAttribute("id",k)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",x):x()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wa(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Bq(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Wa())}function Fq(){const e=cT()?.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function zq(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Nq(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function $q(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Uq(){const e=Wa();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function jq(){return!Fq()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Wq(){try{return typeof indexedDB=="object"}catch{return!1}}function Hq(){return new Promise((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{t(r.error?.message||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gq="FirebaseError";class Eh extends Error{constructor(t,n,i){super(n),this.code=t,this.customData=i,this.name=Gq,Object.setPrototypeOf(this,Eh.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,pb.prototype.create)}}class pb{constructor(t,n,i){this.service=t,this.serviceName=n,this.errors=i}create(t,...n){const i=n[0]||{},r=`${this.service}/${t}`,a=this.errors[t],l=a?qq(a,i):"Error",h=`${this.serviceName}: ${l} (${r}).`;return new Eh(r,h,i)}}function qq(e,t){return e.replace(Kq,(n,i)=>{const r=t[i];return r!=null?String(r):`<${i}?>`})}const Kq=/\{\$([^}]+)}/g;function Xq(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function qf(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const r of n){if(!i.includes(r))return!1;const a=e[r],l=t[r];if(nR(a)&&nR(l)){if(!qf(a,l))return!1}else if(a!==l)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function nR(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gb(e){const t=[];for(const[n,i]of Object.entries(e))Array.isArray(i)?i.forEach(r=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function By(e){const t={};return e.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,a]=i.split("=");t[decodeURIComponent(r)]=decodeURIComponent(a)}}),t}function Fy(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function Yq(e,t){const n=new Zq(e,t);return n.subscribe.bind(n)}class Zq{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,i){let r;if(t===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");Jq(t,["next","error","complete"])?r=t:r={next:t,error:n,complete:i},r.next===void 0&&(r.next=WE),r.error===void 0&&(r.error=WE),r.complete===void 0&&(r.complete=WE);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),a}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Jq(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function WE(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $o(e){return e&&e._delegate?e._delegate:e}class zp{constructor(t,n,i){this.name=t,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hp="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qq{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const i=new Lq;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t?.identifier),i=t?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(tK(t))try{this.getOrInitializeService({instanceIdentifier:hp})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:r});i.resolve(a)}catch{}}}}clearInstance(t=hp){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=hp){return this.instances.has(t)}getOptions(t=hp){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[a,l]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(a);i===h&&l.resolve(r)}return r}onInit(t,n){const i=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(i)??new Set;r.add(t),this.onInitCallbacks.set(i,r);const a=this.instances.get(i);return a&&t(a,i),()=>{r.delete(t)}}invokeOnInitCallbacks(t,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:eK(t),options:n}),this.instances.set(t,i),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=hp){return this.component?this.component.multipleInstances?t:hp:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function eK(e){return e===hp?void 0:e}function tK(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nK{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new Qq(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fi;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Fi||(Fi={}));const iK={debug:Fi.DEBUG,verbose:Fi.VERBOSE,info:Fi.INFO,warn:Fi.WARN,error:Fi.ERROR,silent:Fi.SILENT},rK=Fi.INFO,sK={[Fi.DEBUG]:"log",[Fi.VERBOSE]:"log",[Fi.INFO]:"info",[Fi.WARN]:"warn",[Fi.ERROR]:"error"},oK=(e,t,...n)=>{if(t<e.logLevel)return;const i=new Date().toISOString(),r=sK[t];if(r)console[r](`[${i}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class uA{constructor(t){this.name=t,this._logLevel=rK,this._logHandler=oK,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Fi))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?iK[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Fi.DEBUG,...t),this._logHandler(this,Fi.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Fi.VERBOSE,...t),this._logHandler(this,Fi.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Fi.INFO,...t),this._logHandler(this,Fi.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Fi.WARN,...t),this._logHandler(this,Fi.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Fi.ERROR,...t),this._logHandler(this,Fi.ERROR,...t)}}const aK=(e,t)=>t.some(n=>e instanceof n);let iR,rR;function lK(){return iR||(iR=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function cK(){return rR||(rR=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Z6=new WeakMap,ik=new WeakMap,J6=new WeakMap,HE=new WeakMap,dA=new WeakMap;function uK(e){const t=new Promise((n,i)=>{const r=()=>{e.removeEventListener("success",a),e.removeEventListener("error",l)},a=()=>{n(Bf(e.result)),r()},l=()=>{i(e.error),r()};e.addEventListener("success",a),e.addEventListener("error",l)});return t.then(n=>{n instanceof IDBCursor&&Z6.set(n,e)}).catch(()=>{}),dA.set(t,e),t}function dK(e){if(ik.has(e))return;const t=new Promise((n,i)=>{const r=()=>{e.removeEventListener("complete",a),e.removeEventListener("error",l),e.removeEventListener("abort",l)},a=()=>{n(),r()},l=()=>{i(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",a),e.addEventListener("error",l),e.addEventListener("abort",l)});ik.set(e,t)}let rk={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return ik.get(e);if(t==="objectStoreNames")return e.objectStoreNames||J6.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Bf(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function hK(e){rk=e(rk)}function fK(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const i=e.call(GE(this),t,...n);return J6.set(i,t.sort?t.sort():[t]),Bf(i)}:cK().includes(e)?function(...t){return e.apply(GE(this),t),Bf(Z6.get(this))}:function(...t){return Bf(e.apply(GE(this),t))}}function mK(e){return typeof e=="function"?fK(e):(e instanceof IDBTransaction&&dK(e),aK(e,lK())?new Proxy(e,rk):e)}function Bf(e){if(e instanceof IDBRequest)return uK(e);if(HE.has(e))return HE.get(e);const t=mK(e);return t!==e&&(HE.set(e,t),dA.set(t,e)),t}const GE=e=>dA.get(e);function pK(e,t,{blocked:n,upgrade:i,blocking:r,terminated:a}={}){const l=indexedDB.open(e,t),h=Bf(l);return i&&l.addEventListener("upgradeneeded",s=>{i(Bf(l.result),s.oldVersion,s.newVersion,Bf(l.transaction),s)}),n&&l.addEventListener("blocked",s=>n(s.oldVersion,s.newVersion,s)),h.then(s=>{a&&s.addEventListener("close",()=>a()),r&&s.addEventListener("versionchange",p=>r(p.oldVersion,p.newVersion,p))}).catch(()=>{}),h}const gK=["get","getKey","getAll","getAllKeys","count"],vK=["put","add","delete","clear"],qE=new Map;function sR(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(qE.get(t))return qE.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,r=vK.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||gK.includes(n)))return;const a=async function(l,...h){const s=this.transaction(l,r?"readwrite":"readonly");let p=s.store;return i&&(p=p.index(h.shift())),(await Promise.all([p[n](...h),r&&s.done]))[0]};return qE.set(t,a),a}hK(e=>({...e,get:(t,n,i)=>sR(t,n)||e.get(t,n,i),has:(t,n)=>!!sR(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _K{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(yK(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function yK(e){return e.getComponent()?.type==="VERSION"}const sk="@firebase/app",oR="0.14.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vh=new uA("@firebase/app"),bK="@firebase/app-compat",xK="@firebase/analytics-compat",wK="@firebase/analytics",TK="@firebase/app-check-compat",SK="@firebase/app-check",EK="@firebase/auth",CK="@firebase/auth-compat",kK="@firebase/database",IK="@firebase/data-connect",AK="@firebase/database-compat",PK="@firebase/functions",MK="@firebase/functions-compat",DK="@firebase/installations",LK="@firebase/installations-compat",RK="@firebase/messaging",OK="@firebase/messaging-compat",VK="@firebase/performance",BK="@firebase/performance-compat",FK="@firebase/remote-config",zK="@firebase/remote-config-compat",NK="@firebase/storage",$K="@firebase/storage-compat",UK="@firebase/firestore",jK="@firebase/ai",WK="@firebase/firestore-compat",HK="firebase",GK="12.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ok="[DEFAULT]",qK={[sk]:"fire-core",[bK]:"fire-core-compat",[wK]:"fire-analytics",[xK]:"fire-analytics-compat",[SK]:"fire-app-check",[TK]:"fire-app-check-compat",[EK]:"fire-auth",[CK]:"fire-auth-compat",[kK]:"fire-rtdb",[IK]:"fire-data-connect",[AK]:"fire-rtdb-compat",[PK]:"fire-fn",[MK]:"fire-fn-compat",[DK]:"fire-iid",[LK]:"fire-iid-compat",[RK]:"fire-fcm",[OK]:"fire-fcm-compat",[VK]:"fire-perf",[BK]:"fire-perf-compat",[FK]:"fire-rc",[zK]:"fire-rc-compat",[NK]:"fire-gcs",[$K]:"fire-gcs-compat",[UK]:"fire-fst",[WK]:"fire-fst-compat",[jK]:"fire-vertex","fire-js":"fire-js",[HK]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sw=new Map,KK=new Map,ak=new Map;function aR(e,t){try{e.container.addComponent(t)}catch(n){vh.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function qv(e){const t=e.name;if(ak.has(t))return vh.debug(`There were multiple attempts to register component ${t}.`),!1;ak.set(t,e);for(const n of sw.values())aR(n,e);for(const n of KK.values())aR(n,e);return!0}function hA(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Dc(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XK={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ff=new pb("app","Firebase",XK);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YK{constructor(t,n,i){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new zp("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Ff.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v_=GK;function Q6(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const i={name:ok,automaticDataCollectionEnabled:!0,...t},r=i.name;if(typeof r!="string"||!r)throw Ff.create("bad-app-name",{appName:String(r)});if(n||(n=q6()),!n)throw Ff.create("no-options");const a=sw.get(r);if(a){if(qf(n,a.options)&&qf(i,a.config))return a;throw Ff.create("duplicate-app",{appName:r})}const l=new nK(r);for(const s of ak.values())l.addComponent(s);const h=new YK(n,i,l);return sw.set(r,h),h}function eF(e=ok){const t=sw.get(e);if(!t&&e===ok&&q6())return Q6();if(!t)throw Ff.create("no-app",{appName:e});return t}function zf(e,t,n){let i=qK[e]??e;n&&(i+=`-${n}`);const r=i.match(/\s|\//),a=t.match(/\s|\//);if(r||a){const l=[`Unable to register library "${i}" with version "${t}":`];r&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&a&&l.push("and"),a&&l.push(`version name "${t}" contains illegal characters (whitespace or "/")`),vh.warn(l.join(" "));return}qv(new zp(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZK="firebase-heartbeat-database",JK=1,M0="firebase-heartbeat-store";let KE=null;function tF(){return KE||(KE=pK(ZK,JK,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(M0)}catch(n){console.warn(n)}}}}).catch(e=>{throw Ff.create("idb-open",{originalErrorMessage:e.message})})),KE}async function QK(e){try{const n=(await tF()).transaction(M0),i=await n.objectStore(M0).get(nF(e));return await n.done,i}catch(t){if(t instanceof Eh)vh.warn(t.message);else{const n=Ff.create("idb-get",{originalErrorMessage:t?.message});vh.warn(n.message)}}}async function lR(e,t){try{const i=(await tF()).transaction(M0,"readwrite");await i.objectStore(M0).put(t,nF(e)),await i.done}catch(n){if(n instanceof Eh)vh.warn(n.message);else{const i=Ff.create("idb-set",{originalErrorMessage:n?.message});vh.warn(i.message)}}}function nF(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eX=1024,tX=30;class nX{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new rX(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=cR();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(r=>r.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats.length>tX){const r=sX(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(r,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){vh.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=cR(),{heartbeatsToSend:n,unsentEntries:i}=iX(this._heartbeatsCache.heartbeats),r=rw(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(t){return vh.warn(t),""}}}function cR(){return new Date().toISOString().substring(0,10)}function iX(e,t=eX){const n=[];let i=e.slice();for(const r of e){const a=n.find(l=>l.agent===r.agent);if(a){if(a.dates.push(r.date),uR(n)>t){a.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),uR(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class rX{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Wq()?Hq().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await QK(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return lR(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return lR(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function uR(e){return rw(JSON.stringify({version:2,heartbeats:e})).length}function sX(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let i=1;i<e.length;i++)e[i].date<n&&(n=e[i].date,t=i);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oX(e){qv(new zp("platform-logger",t=>new _K(t),"PRIVATE")),qv(new zp("heartbeat",t=>new nX(t),"PRIVATE")),zf(sk,oR,e),zf(sk,oR,"esm2020"),zf("fire-js","")}oX("");var aX="firebase",lX="12.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zf(aX,lX,"app");function iF(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const cX=iF,rF=new pb("auth","Firebase",iF());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ow=new uA("@firebase/auth");function uX(e,...t){ow.logLevel<=Fi.WARN&&ow.warn(`Auth (${v_}): ${e}`,...t)}function y1(e,...t){ow.logLevel<=Fi.ERROR&&ow.error(`Auth (${v_}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pu(e,...t){throw fA(e,...t)}function Yu(e,...t){return fA(e,...t)}function sF(e,t,n){const i={...cX(),[t]:n};return new pb("auth","Firebase",i).create(t,{appName:e.name})}function hh(e){return sF(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function fA(e,...t){if(typeof e!="string"){const n=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=e.name),e._errorFactory.create(n,...i)}return rF.create(e,...t)}function hi(e,t,...n){if(!e)throw fA(t,...n)}function ah(e){const t="INTERNAL ASSERTION FAILED: "+e;throw y1(t),new Error(t)}function _h(e,t){e||ah(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lk(){return typeof self<"u"&&self.location?.href||""}function dX(){return dR()==="http:"||dR()==="https:"}function dR(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hX(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(dX()||Nq()||"connection"in navigator)?navigator.onLine:!0}function fX(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vb{constructor(t,n){this.shortDelay=t,this.longDelay=n,_h(n>t,"Short delay should be less than long delay!"),this.isMobile=Bq()||$q()}get(){return hX()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mA(e,t){_h(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oF{static initialize(t,n,i){this.fetchImpl=t,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ah("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ah("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ah("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mX={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pX=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],gX=new vb(3e4,6e4);function Ch(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function kh(e,t,n,i,r={}){return aF(e,r,async()=>{let a={},l={};i&&(t==="GET"?l=i:a={body:JSON.stringify(i)});const h=gb({key:e.config.apiKey,...l}).slice(1),s=await e._getAdditionalHeaders();s["Content-Type"]="application/json",e.languageCode&&(s["X-Firebase-Locale"]=e.languageCode);const p={method:t,headers:s,...a};return zq()||(p.referrerPolicy="no-referrer"),e.emulatorConfig&&g_(e.emulatorConfig.host)&&(p.credentials="include"),oF.fetch()(await lF(e,e.config.apiHost,n,h),p)})}async function aF(e,t,n){e._canInitEmulator=!1;const i={...mX,...t};try{const r=new _X(e),a=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const l=await a.json();if("needConfirmation"in l)throw Fx(e,"account-exists-with-different-credential",l);if(a.ok&&!("errorMessage"in l))return l;{const h=a.ok?l.errorMessage:l.error.message,[s,p]=h.split(" : ");if(s==="FEDERATED_USER_ID_ALREADY_LINKED")throw Fx(e,"credential-already-in-use",l);if(s==="EMAIL_EXISTS")throw Fx(e,"email-already-in-use",l);if(s==="USER_DISABLED")throw Fx(e,"user-disabled",l);const _=i[s]||s.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw sF(e,_,p);pu(e,_)}}catch(r){if(r instanceof Eh)throw r;pu(e,"network-request-failed",{message:String(r)})}}async function _b(e,t,n,i,r={}){const a=await kh(e,t,n,i,r);return"mfaPendingCredential"in a&&pu(e,"multi-factor-auth-required",{_serverResponse:a}),a}async function lF(e,t,n,i){const r=`${t}${n}?${i}`,a=e,l=a.config.emulator?mA(e.config,r):`${e.config.apiScheme}://${r}`;return pX.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(l).toString():l}function vX(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class _X{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Yu(this.auth,"network-request-failed")),gX.get())})}}function Fx(e,t,n){const i={appName:e.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Yu(e,t,i);return r.customData._tokenResponse=n,r}function hR(e){return e!==void 0&&e.enterprise!==void 0}class yX{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===t)return vX(n.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function bX(e,t){return kh(e,"GET","/v2/recaptchaConfig",Ch(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xX(e,t){return kh(e,"POST","/v1/accounts:delete",t)}async function aw(e,t){return kh(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o0(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function wX(e,t=!1){const n=$o(e),i=await n.getIdToken(t),r=pA(i);hi(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const a=typeof r.firebase=="object"?r.firebase:void 0,l=a?.sign_in_provider;return{claims:r,token:i,authTime:o0(XE(r.auth_time)),issuedAtTime:o0(XE(r.iat)),expirationTime:o0(XE(r.exp)),signInProvider:l||null,signInSecondFactor:a?.sign_in_second_factor||null}}function XE(e){return Number(e)*1e3}function pA(e){const[t,n,i]=e.split(".");if(t===void 0||n===void 0||i===void 0)return y1("JWT malformed, contained fewer than 3 sections"),null;try{const r=H6(n);return r?JSON.parse(r):(y1("Failed to decode base64 JWT payload"),null)}catch(r){return y1("Caught error parsing JWT payload as JSON",r?.toString()),null}}function fR(e){const t=pA(e);return hi(t,"internal-error"),hi(typeof t.exp<"u","internal-error"),hi(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D0(e,t,n=!1){if(n)return t;try{return await t}catch(i){throw i instanceof Eh&&TX(i)&&e.auth.currentUser===e&&await e.auth.signOut(),i}}function TX({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SX{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ck{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=o0(this.lastLoginAt),this.creationTime=o0(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lw(e){const t=e.auth,n=await e.getIdToken(),i=await D0(e,aw(t,{idToken:n}));hi(i?.users.length,t,"internal-error");const r=i.users[0];e._notifyReloadListener(r);const a=r.providerUserInfo?.length?cF(r.providerUserInfo):[],l=CX(e.providerData,a),h=e.isAnonymous,s=!(e.email&&r.passwordHash)&&!l?.length,p=h?s:!1,_={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:l,metadata:new ck(r.createdAt,r.lastLoginAt),isAnonymous:p};Object.assign(e,_)}async function EX(e){const t=$o(e);await lw(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function CX(e,t){return[...e.filter(i=>!t.some(r=>r.providerId===i.providerId)),...t]}function cF(e){return e.map(({providerId:t,...n})=>({providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kX(e,t){const n=await aF(e,{},async()=>{const i=gb({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:a}=e.config,l=await lF(e,r,"/v1/token",`key=${a}`),h=await e._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const s={method:"POST",headers:h,body:i};return e.emulatorConfig&&g_(e.emulatorConfig.host)&&(s.credentials="include"),oF.fetch()(l,s)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function IX(e,t){return kh(e,"POST","/v2/accounts:revokeToken",Ch(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dv{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){hi(t.idToken,"internal-error"),hi(typeof t.idToken<"u","internal-error"),hi(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):fR(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){hi(t.length!==0,"internal-error");const n=fR(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(hi(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:i,refreshToken:r,expiresIn:a}=await kX(t,n);this.updateTokensAndExpiration(i,r,Number(a))}updateTokensAndExpiration(t,n,i){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,n){const{refreshToken:i,accessToken:r,expirationTime:a}=n,l=new Dv;return i&&(hi(typeof i=="string","internal-error",{appName:t}),l.refreshToken=i),r&&(hi(typeof r=="string","internal-error",{appName:t}),l.accessToken=r),a&&(hi(typeof a=="number","internal-error",{appName:t}),l.expirationTime=a),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Dv,this.toJSON())}_performRefresh(){return ah("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mf(e,t){hi(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class cu{constructor({uid:t,auth:n,stsTokenManager:i,...r}){this.providerId="firebase",this.proactiveRefresh=new SX(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new ck(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(t){const n=await D0(this,this.stsTokenManager.getToken(this.auth,t));return hi(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return wX(this,t)}reload(){return EX(this)}_assign(t){this!==t&&(hi(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>({...n})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new cu({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(t){hi(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),n&&await lw(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Dc(this.auth.app))return Promise.reject(hh(this.auth));const t=await this.getIdToken();return await D0(this,xX(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){const i=n.displayName??void 0,r=n.email??void 0,a=n.phoneNumber??void 0,l=n.photoURL??void 0,h=n.tenantId??void 0,s=n._redirectEventId??void 0,p=n.createdAt??void 0,_=n.lastLoginAt??void 0,{uid:x,emailVerified:T,isAnonymous:k,providerData:A,stsTokenManager:M}=n;hi(x&&M,t,"internal-error");const R=Dv.fromJSON(this.name,M);hi(typeof x=="string",t,"internal-error"),mf(i,t.name),mf(r,t.name),hi(typeof T=="boolean",t,"internal-error"),hi(typeof k=="boolean",t,"internal-error"),mf(a,t.name),mf(l,t.name),mf(h,t.name),mf(s,t.name),mf(p,t.name),mf(_,t.name);const F=new cu({uid:x,auth:t,email:r,emailVerified:T,displayName:i,isAnonymous:k,photoURL:l,phoneNumber:a,tenantId:h,stsTokenManager:R,createdAt:p,lastLoginAt:_});return A&&Array.isArray(A)&&(F.providerData=A.map(z=>({...z}))),s&&(F._redirectEventId=s),F}static async _fromIdTokenResponse(t,n,i=!1){const r=new Dv;r.updateFromServerResponse(n);const a=new cu({uid:n.localId,auth:t,stsTokenManager:r,isAnonymous:i});return await lw(a),a}static async _fromGetAccountInfoResponse(t,n,i){const r=n.users[0];hi(r.localId!==void 0,"internal-error");const a=r.providerUserInfo!==void 0?cF(r.providerUserInfo):[],l=!(r.email&&r.passwordHash)&&!a?.length,h=new Dv;h.updateFromIdToken(i);const s=new cu({uid:r.localId,auth:t,stsTokenManager:h,isAnonymous:l}),p={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new ck(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!a?.length};return Object.assign(s,p),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mR=new Map;function lh(e){_h(e instanceof Function,"Expected a class definition");let t=mR.get(e);return t?(_h(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,mR.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uF{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}uF.type="NONE";const pR=uF;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b1(e,t,n){return`firebase:${e}:${t}:${n}`}class Lv{constructor(t,n,i){this.persistence=t,this.auth=n,this.userKey=i;const{config:r,name:a}=this.auth;this.fullUserKey=b1(this.userKey,r.apiKey,a),this.fullPersistenceKey=b1("persistence",r.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await aw(this.auth,{idToken:t}).catch(()=>{});return n?cu._fromGetAccountInfoResponse(this.auth,n,t):null}return cu._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,i="authUser"){if(!n.length)return new Lv(lh(pR),t,i);const r=(await Promise.all(n.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let a=r[0]||lh(pR);const l=b1(i,t.config.apiKey,t.name);let h=null;for(const p of n)try{const _=await p._get(l);if(_){let x;if(typeof _=="string"){const T=await aw(t,{idToken:_}).catch(()=>{});if(!T)break;x=await cu._fromGetAccountInfoResponse(t,T,_)}else x=cu._fromJSON(t,_);p!==a&&(h=x),a=p;break}}catch{}const s=r.filter(p=>p._shouldAllowMigration);return!a._shouldAllowMigration||!s.length?new Lv(a,t,i):(a=s[0],h&&await a._set(l,h.toJSON()),await Promise.all(n.map(async p=>{if(p!==a)try{await p._remove(l)}catch{}})),new Lv(a,t,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gR(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(mF(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(dF(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(gF(t))return"Blackberry";if(vF(t))return"Webos";if(hF(t))return"Safari";if((t.includes("chrome/")||fF(t))&&!t.includes("edge/"))return"Chrome";if(pF(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=e.match(n);if(i?.length===2)return i[1]}return"Other"}function dF(e=Wa()){return/firefox\//i.test(e)}function hF(e=Wa()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function fF(e=Wa()){return/crios\//i.test(e)}function mF(e=Wa()){return/iemobile/i.test(e)}function pF(e=Wa()){return/android/i.test(e)}function gF(e=Wa()){return/blackberry/i.test(e)}function vF(e=Wa()){return/webos/i.test(e)}function gA(e=Wa()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function AX(e=Wa()){return gA(e)&&!!window.navigator?.standalone}function PX(){return Uq()&&document.documentMode===10}function _F(e=Wa()){return gA(e)||pF(e)||vF(e)||gF(e)||/windows phone/i.test(e)||mF(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yF(e,t=[]){let n;switch(e){case"Browser":n=gR(Wa());break;case"Worker":n=`${gR(Wa())}-${e}`;break;default:n=e}const i=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${v_}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MX{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const i=a=>new Promise((l,h)=>{try{const s=t(a);l(s)}catch(s){h(s)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const i of this.queue)await i(t),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DX(e,t={}){return kh(e,"GET","/v2/passwordPolicy",Ch(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LX=6;class RX{constructor(t){const n=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??LX,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=t.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,n),this.validatePasswordCharacterOptions(t,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(t,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=t.length>=i),r&&(n.meetsMaxPasswordLength=t.length<=r)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<t.length;r++)i=t.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(t,n,i,r,a){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OX{constructor(t,n,i,r){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new vR(this),this.idTokenSubscription=new vR(this),this.beforeStateQueue=new MX(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=rF,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=lh(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Lv.create(this,t),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await aw(this,{idToken:t}),i=await cu._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){if(Dc(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=this.redirectUser?._redirectEventId,l=i?._redirectEventId,h=await this.tryRedirectSignIn(t);(!a||a===l)&&h?.user&&(i=h.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return hi(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await lw(t)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=fX()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Dc(this.app))return Promise.reject(hh(this));const n=t?$o(t):null;return n&&hi(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&hi(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Dc(this.app)?Promise.reject(hh(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Dc(this.app)?Promise.reject(hh(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(lh(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await DX(this),n=new RX(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new pb("auth","Firebase",t())}onAuthStateChanged(t,n,i){return this.registerStateListener(this.authStateSubscription,t,n,i)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,i){return this.registerStateListener(this.idTokenSubscription,t,n,i)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const i=this.onAuthStateChanged(()=>{i(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await IX(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(t,n){const i=await this.getOrInitRedirectPersistenceManager(n);return t===null?i.removeCurrentUser():i.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&lh(t)||this._popupRedirectResolver;hi(n,this,"argument-error"),this.redirectPersistenceManager=await Lv.create(this,[lh(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===t?this._currentUser:this.redirectUser?._redirectEventId===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=this.currentUser?.uid??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,i,r){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let l=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(hi(h,this,"internal-error"),h.then(()=>{l||a(this.currentUser)}),typeof n=="function"){const s=t.addObserver(n,i,r);return()=>{l=!0,s()}}else{const s=t.addObserver(n);return()=>{l=!0,s()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return hi(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=yF(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(t["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){if(Dc(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return t?.error&&uX(`Error while retrieving App Check token: ${t.error}`),t?.token}}function lm(e){return $o(e)}class vR{constructor(t){this.auth=t,this.observer=null,this.addObserver=Yq(n=>this.observer=n)}get next(){return hi(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uT={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function VX(e){uT=e}function bF(e){return uT.loadJS(e)}function BX(){return uT.recaptchaEnterpriseScript}function FX(){return uT.gapiScript}function zX(e){return`__${e}${Math.floor(Math.random()*1e6)}`}class NX{constructor(){this.enterprise=new $X}ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}class $X{ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}const UX="recaptcha-enterprise",xF="NO_RECAPTCHA";class jX{constructor(t){this.type=UX,this.auth=lm(t)}async verify(t="verify",n=!1){async function i(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(l,h)=>{bX(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(s=>{if(s.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const p=new yX(s);return a.tenantId==null?a._agentRecaptchaConfig=p:a._tenantRecaptchaConfigs[a.tenantId]=p,l(p.siteKey)}}).catch(s=>{h(s)})})}function r(a,l,h){const s=window.grecaptcha;hR(s)?s.enterprise.ready(()=>{s.enterprise.execute(a,{action:t}).then(p=>{l(p)}).catch(()=>{l(xF)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new NX().execute("siteKey",{action:"verify"}):new Promise((a,l)=>{i(this.auth).then(h=>{if(!n&&hR(window.grecaptcha))r(h,a,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let s=BX();s.length!==0&&(s+=h),bF(s).then(()=>{r(h,a,l)}).catch(p=>{l(p)})}}).catch(h=>{l(h)})})}}async function _R(e,t,n,i=!1,r=!1){const a=new jX(e);let l;if(r)l=xF;else try{l=await a.verify(n)}catch{l=await a.verify(n,!0)}const h={...t};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const s=h.phoneEnrollmentInfo.phoneNumber,p=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:s,recaptchaToken:p,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const s=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:s,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return i?Object.assign(h,{captchaResp:l}):Object.assign(h,{captchaResponse:l}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function cw(e,t,n,i,r){if(e._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await _R(e,t,n,n==="getOobCode");return i(e,a)}else return i(e,t).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await _R(e,t,n,n==="getOobCode");return i(e,l)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WX(e,t){const n=hA(e,"auth");if(n.isInitialized()){const r=n.getImmediate(),a=n.getOptions();if(qf(a,t??{}))return r;pu(r,"already-initialized")}return n.initialize({options:t})}function HX(e,t){const n=t?.persistence||[],i=(Array.isArray(n)?n:[n]).map(lh);t?.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(i,t?.popupRedirectResolver)}function GX(e,t,n){const i=lm(e);hi(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const r=!1,a=wF(t),{host:l,port:h}=qX(t),s=h===null?"":`:${h}`,p={url:`${a}//${l}${s}/`},_=Object.freeze({host:l,port:h,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){hi(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),hi(qf(p,i.config.emulator)&&qf(_,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=p,i.emulatorConfig=_,i.settings.appVerificationDisabledForTesting=!0,g_(l)?(X6(`${a}//${l}${s}`),Y6("Auth",!0)):KX()}function wF(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function qX(e){const t=wF(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const a=r[1];return{host:a,port:yR(i.substr(a.length+1))}}else{const[a,l]=i.split(":");return{host:a,port:yR(l)}}}function yR(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function KX(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return ah("not implemented")}_getIdTokenResponse(t){return ah("not implemented")}_linkToIdToken(t,n){return ah("not implemented")}_getReauthenticationResolver(t){return ah("not implemented")}}async function XX(e,t){return kh(e,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YX(e,t){return _b(e,"POST","/v1/accounts:signInWithPassword",Ch(e,t))}async function ZX(e,t){return kh(e,"POST","/v1/accounts:sendOobCode",Ch(e,t))}async function JX(e,t){return ZX(e,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QX(e,t){return _b(e,"POST","/v1/accounts:signInWithEmailLink",Ch(e,t))}async function eY(e,t){return _b(e,"POST","/v1/accounts:signInWithEmailLink",Ch(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0 extends vA{constructor(t,n,i,r=null){super("password",i),this._email=t,this._password=n,this._tenantId=r}static _fromEmailAndPassword(t,n){return new L0(t,n,"password")}static _fromEmailAndCode(t,n,i=null){return new L0(t,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return cw(t,n,"signInWithPassword",YX);case"emailLink":return QX(t,{email:this._email,oobCode:this._password});default:pu(t,"internal-error")}}async _linkToIdToken(t,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return cw(t,i,"signUpPassword",XX);case"emailLink":return eY(t,{idToken:n,email:this._email,oobCode:this._password});default:pu(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rv(e,t){return _b(e,"POST","/v1/accounts:signInWithIdp",Ch(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tY="http://localhost";class Np extends vA{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new Np(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):pu("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:r,...a}=n;if(!i||!r)return null;const l=new Np(i,r);return l.idToken=a.idToken||void 0,l.accessToken=a.accessToken||void 0,l.secret=a.secret,l.nonce=a.nonce,l.pendingToken=a.pendingToken||null,l}_getIdTokenResponse(t){const n=this.buildRequest();return Rv(t,n)}_linkToIdToken(t,n){const i=this.buildRequest();return i.idToken=n,Rv(t,i)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,Rv(t,n)}buildRequest(){const t={requestUri:tY,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=gb(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nY(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function iY(e){const t=By(Fy(e)).link,n=t?By(Fy(t)).deep_link_id:null,i=By(Fy(e)).deep_link_id;return(i?By(Fy(i)).link:null)||i||n||t||e}class _A{constructor(t){const n=By(Fy(t)),i=n.apiKey??null,r=n.oobCode??null,a=nY(n.mode??null);hi(i&&r&&a,"argument-error"),this.apiKey=i,this.operation=a,this.code=r,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(t){const n=iY(t);try{return new _A(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg{constructor(){this.providerId=tg.PROVIDER_ID}static credential(t,n){return L0._fromEmailAndPassword(t,n)}static credentialWithLink(t,n){const i=_A.parseLink(n);return hi(i,"argument-error"),L0._fromEmailAndCode(t,i.code,i.tenantId)}}tg.PROVIDER_ID="password";tg.EMAIL_PASSWORD_SIGN_IN_METHOD="password";tg.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TF{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yb extends TF{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf extends yb{constructor(){super("facebook.com")}static credential(t){return Np._fromParams({providerId:xf.PROVIDER_ID,signInMethod:xf.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return xf.credentialFromTaggedObject(t)}static credentialFromError(t){return xf.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return xf.credential(t.oauthAccessToken)}catch{return null}}}xf.FACEBOOK_SIGN_IN_METHOD="facebook.com";xf.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf extends yb{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return Np._fromParams({providerId:wf.PROVIDER_ID,signInMethod:wf.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return wf.credentialFromTaggedObject(t)}static credentialFromError(t){return wf.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:i}=t;if(!n&&!i)return null;try{return wf.credential(n,i)}catch{return null}}}wf.GOOGLE_SIGN_IN_METHOD="google.com";wf.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf extends yb{constructor(){super("github.com")}static credential(t){return Np._fromParams({providerId:Tf.PROVIDER_ID,signInMethod:Tf.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Tf.credentialFromTaggedObject(t)}static credentialFromError(t){return Tf.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Tf.credential(t.oauthAccessToken)}catch{return null}}}Tf.GITHUB_SIGN_IN_METHOD="github.com";Tf.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf extends yb{constructor(){super("twitter.com")}static credential(t,n){return Np._fromParams({providerId:Sf.PROVIDER_ID,signInMethod:Sf.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Sf.credentialFromTaggedObject(t)}static credentialFromError(t){return Sf.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=t;if(!n||!i)return null;try{return Sf.credential(n,i)}catch{return null}}}Sf.TWITTER_SIGN_IN_METHOD="twitter.com";Sf.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rY(e,t){return _b(e,"POST","/v1/accounts:signUp",Ch(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,i,r=!1){const a=await cu._fromIdTokenResponse(t,i,r),l=bR(i);return new $p({user:a,providerId:l,_tokenResponse:i,operationType:n})}static async _forOperation(t,n,i){await t._updateTokensIfNecessary(i,!0);const r=bR(i);return new $p({user:t,providerId:r,_tokenResponse:i,operationType:n})}}function bR(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw extends Eh{constructor(t,n,i,r){super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,uw.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,n,i,r){return new uw(t,n,i,r)}}function SF(e,t,n,i){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?uw._fromErrorAndOperation(e,a,t,i):a})}async function sY(e,t,n=!1){const i=await D0(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return $p._forOperation(e,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EF(e,t,n=!1){const{auth:i}=e;if(Dc(i.app))return Promise.reject(hh(i));const r="reauthenticate";try{const a=await D0(e,SF(i,r,t,e),n);hi(a.idToken,i,"internal-error");const l=pA(a.idToken);hi(l,i,"internal-error");const{sub:h}=l;return hi(e.uid===h,i,"user-mismatch"),$p._forOperation(e,r,a)}catch(a){throw a?.code==="auth/user-not-found"&&pu(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CF(e,t,n=!1){if(Dc(e.app))return Promise.reject(hh(e));const i="signIn",r=await SF(e,i,t),a=await $p._fromIdTokenResponse(e,i,r);return n||await e._updateCurrentUser(a.user),a}async function oY(e,t){return CF(lm(e),t)}async function aY(e,t){return EF($o(e),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kF(e){const t=lm(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function lY(e,t,n){const i=lm(e);await cw(i,{requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"},"getOobCode",JX)}async function cY(e,t,n){if(Dc(e.app))return Promise.reject(hh(e));const i=lm(e),l=await cw(i,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",rY).catch(s=>{throw s.code==="auth/password-does-not-meet-requirements"&&kF(e),s}),h=await $p._fromIdTokenResponse(i,"signIn",l);return await i._updateCurrentUser(h.user),h}function uY(e,t,n){return Dc(e.app)?Promise.reject(hh(e)):oY($o(e),tg.credential(t,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&kF(e),i})}function dY(e,t,n,i){return $o(e).onIdTokenChanged(t,n,i)}function hY(e,t,n){return $o(e).beforeAuthStateChanged(t,n)}function IF(e,t,n,i){return $o(e).onAuthStateChanged(t,n,i)}function fY(e){return $o(e).signOut()}async function mY(e){return $o(e).delete()}const dw="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AF{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(dw,"1"),this.storage.removeItem(dw),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pY=1e3,gY=10;class PF extends AF{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=_F(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&t(n,r,i)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((l,h,s)=>{this.notifyListeners(l,s)});return}const i=t.key;n?this.detachListener():this.stopPolling();const r=()=>{const l=this.storage.getItem(i);!n&&this.localCache[i]===l||this.notifyListeners(i,l)},a=this.storage.getItem(i);PX()&&a!==t.newValue&&t.newValue!==t.oldValue?setTimeout(r,gY):r()}notifyListeners(t,n){this.localCache[t]=n;const i=this.listeners[t];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:i}),!0)})},pY)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}PF.type="LOCAL";const vY=PF;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MF extends AF{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}MF.type="SESSION";const DF=MF;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _Y(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(r=>r.isListeningto(t));if(n)return n;const i=new dT(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:i,eventType:r,data:a}=n.data,l=this.handlersMap[r];if(!l?.size)return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const h=Array.from(l).map(async p=>p(n.origin,a)),s=await _Y(h);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:s})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}dT.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yA(e="",t=10){let n="";for(let i=0;i<t;i++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yY{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let a,l;return new Promise((h,s)=>{const p=yA("",20);r.port1.start();const _=setTimeout(()=>{s(new Error("unsupported_event"))},i);l={messageChannel:r,onMessage(x){const T=x;if(T.data.eventId===p)switch(T.data.status){case"ack":clearTimeout(_),a=setTimeout(()=>{s(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),h(T.data.response);break;default:clearTimeout(_),clearTimeout(a),s(new Error("invalid_response"));break}}},this.handlers.add(l),r.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:t,eventId:p,data:n},[r.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zu(){return window}function bY(e){Zu().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LF(){return typeof Zu().WorkerGlobalScope<"u"&&typeof Zu().importScripts=="function"}async function xY(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function wY(){return navigator?.serviceWorker?.controller||null}function TY(){return LF()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RF="firebaseLocalStorageDb",SY=1,hw="firebaseLocalStorage",OF="fbase_key";class bb{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function hT(e,t){return e.transaction([hw],t?"readwrite":"readonly").objectStore(hw)}function EY(){const e=indexedDB.deleteDatabase(RF);return new bb(e).toPromise()}function uk(){const e=indexedDB.open(RF,SY);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const i=e.result;try{i.createObjectStore(hw,{keyPath:OF})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const i=e.result;i.objectStoreNames.contains(hw)?t(i):(i.close(),await EY(),t(await uk()))})})}async function xR(e,t,n){const i=hT(e,!0).put({[OF]:t,value:n});return new bb(i).toPromise()}async function CY(e,t){const n=hT(e,!1).get(t),i=await new bb(n).toPromise();return i===void 0?null:i.value}function wR(e,t){const n=hT(e,!0).delete(t);return new bb(n).toPromise()}const kY=800,IY=3;class VF{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await uk(),this.db)}async _withRetries(t){let n=0;for(;;)try{const i=await this._openDb();return await t(i)}catch(i){if(n++>IY)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return LF()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=dT._getInstance(TY()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await xY(),!this.activeServiceWorker)return;this.sender=new yY(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||wY()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await uk();return await xR(t,dw,"1"),await wR(t,dw),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>xR(i,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(i=>CY(i,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>wR(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(r=>{const a=hT(r,!1).getAll();return new bb(a).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(t.length!==0)for(const{fbase_key:r,value:a}of t)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(a)&&(this.notifyListeners(r,a),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(t,n){this.localCache[t]=n;const i=this.listeners[t];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),kY)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}VF.type="LOCAL";const AY=VF;new vb(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PY(e,t){return t?lh(t):(hi(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA extends vA{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Rv(t,this._buildIdpRequest())}_linkToIdToken(t,n){return Rv(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return Rv(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function MY(e){return CF(e.auth,new bA(e),e.bypassAuthState)}function DY(e){const{auth:t,user:n}=e;return hi(n,t,"internal-error"),EF(n,new bA(e),e.bypassAuthState)}async function LY(e){const{auth:t,user:n}=e;return hi(n,t,"internal-error"),sY(n,new bA(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BF{constructor(t,n,i,r,a=!1){this.auth=t,this.resolver=i,this.user=r,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:i,postBody:r,tenantId:a,error:l,type:h}=t;if(l){this.reject(l);return}const s={auth:this.auth,requestUri:n,sessionId:i,tenantId:a||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(s))}catch(p){this.reject(p)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return MY;case"linkViaPopup":case"linkViaRedirect":return LY;case"reauthViaPopup":case"reauthViaRedirect":return DY;default:pu(this.auth,"internal-error")}}resolve(t){_h(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){_h(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RY=new vb(2e3,1e4);class _v extends BF{constructor(t,n,i,r,a){super(t,n,r,a),this.provider=i,this.authWindow=null,this.pollId=null,_v.currentPopupAction&&_v.currentPopupAction.cancel(),_v.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return hi(t,this.auth,"internal-error"),t}async onExecution(){_h(this.filter.length===1,"Popup operations only handle one event");const t=yA();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Yu(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Yu(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_v.currentPopupAction=null}pollUserCancellation(){const t=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Yu(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,RY.get())};t()}}_v.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OY="pendingRedirect",x1=new Map;class VY extends BF{constructor(t,n,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let t=x1.get(this.auth._key());if(!t){try{const i=await BY(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(i)}catch(n){t=()=>Promise.reject(n)}x1.set(this.auth._key(),t)}return this.bypassAuthState||x1.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function BY(e,t){const n=NY(t),i=zY(e);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function FY(e,t){x1.set(e._key(),t)}function zY(e){return lh(e._redirectPersistence)}function NY(e){return b1(OY,e.config.apiKey,e.name)}async function $Y(e,t,n=!1){if(Dc(e.app))return Promise.reject(hh(e));const i=lm(e),r=PY(i,t),l=await new VY(i,r,n).execute();return l&&!n&&(delete l.user._redirectEventId,await i._persistUserIfCurrent(l.user),await i._setRedirectUser(null,t)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UY=600*1e3;class jY{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(n=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!WY(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){if(t.error&&!FF(t)){const i=t.error.code?.split("auth/")[1]||"internal-error";n.onError(Yu(this.auth,i))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const i=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=UY&&this.cachedEventUids.clear(),this.cachedEventUids.has(TR(t))}saveEventToCache(t){this.cachedEventUids.add(TR(t)),this.lastProcessedEventTime=Date.now()}}function TR(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function FF({type:e,error:t}){return e==="unknown"&&t?.code==="auth/no-auth-event"}function WY(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return FF(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HY(e,t={}){return kh(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GY=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,qY=/^https?/;async function KY(e){if(e.config.emulator)return;const{authorizedDomains:t}=await HY(e);for(const n of t)try{if(XY(n))return}catch{}pu(e,"unauthorized-domain")}function XY(e){const t=lk(),{protocol:n,hostname:i}=new URL(t);if(e.startsWith("chrome-extension://")){const l=new URL(e);return l.hostname===""&&i===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===i}if(!qY.test(n))return!1;if(GY.test(e))return i===e;const r=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YY=new vb(3e4,6e4);function SR(){const e=Zu().___jsl;if(e?.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function ZY(e){return new Promise((t,n)=>{function i(){SR(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{SR(),n(Yu(e,"network-request-failed"))},timeout:YY.get()})}if(Zu().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(Zu().gapi?.load)i();else{const r=zX("iframefcb");return Zu()[r]=()=>{gapi.load?i():n(Yu(e,"network-request-failed"))},bF(`${FX()}?onload=${r}`).catch(a=>n(a))}}).catch(t=>{throw w1=null,t})}let w1=null;function JY(e){return w1=w1||ZY(e),w1}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QY=new vb(5e3,15e3),eZ="__/auth/iframe",tZ="emulator/auth/iframe",nZ={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},iZ=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function rZ(e){const t=e.config;hi(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?mA(t,tZ):`https://${e.config.authDomain}/${eZ}`,i={apiKey:t.apiKey,appName:e.name,v:v_},r=iZ.get(e.config.apiHost);r&&(i.eid=r);const a=e._getFrameworks();return a.length&&(i.fw=a.join(",")),`${n}?${gb(i).slice(1)}`}async function sZ(e){const t=await JY(e),n=Zu().gapi;return hi(n,e,"internal-error"),t.open({where:document.body,url:rZ(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:nZ,dontclear:!0},i=>new Promise(async(r,a)=>{await i.restyle({setHideOnLeave:!1});const l=Yu(e,"network-request-failed"),h=Zu().setTimeout(()=>{a(l)},QY.get());function s(){Zu().clearTimeout(h),r(i)}i.ping(s).then(s,()=>{a(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oZ={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},aZ=500,lZ=600,cZ="_blank",uZ="http://localhost";class ER{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function dZ(e,t,n,i=aZ,r=lZ){const a=Math.max((window.screen.availHeight-r)/2,0).toString(),l=Math.max((window.screen.availWidth-i)/2,0).toString();let h="";const s={...oZ,width:i.toString(),height:r.toString(),top:a,left:l},p=Wa().toLowerCase();n&&(h=fF(p)?cZ:n),dF(p)&&(t=t||uZ,s.scrollbars="yes");const _=Object.entries(s).reduce((T,[k,A])=>`${T}${k}=${A},`,"");if(AX(p)&&h!=="_self")return hZ(t||"",h),new ER(null);const x=window.open(t||"",h,_);hi(x,e,"popup-blocked");try{x.focus()}catch{}return new ER(x)}function hZ(e,t){const n=document.createElement("a");n.href=e,n.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fZ="__/auth/handler",mZ="emulator/auth/handler",pZ=encodeURIComponent("fac");async function CR(e,t,n,i,r,a){hi(e.config.authDomain,e,"auth-domain-config-required"),hi(e.config.apiKey,e,"invalid-api-key");const l={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:i,v:v_,eventId:r};if(t instanceof TF){t.setDefaultLanguage(e.languageCode),l.providerId=t.providerId||"",Xq(t.getCustomParameters())||(l.customParameters=JSON.stringify(t.getCustomParameters()));for(const[_,x]of Object.entries({}))l[_]=x}if(t instanceof yb){const _=t.getScopes().filter(x=>x!=="");_.length>0&&(l.scopes=_.join(","))}e.tenantId&&(l.tid=e.tenantId);const h=l;for(const _ of Object.keys(h))h[_]===void 0&&delete h[_];const s=await e._getAppCheckToken(),p=s?`#${pZ}=${encodeURIComponent(s)}`:"";return`${gZ(e)}?${gb(h).slice(1)}${p}`}function gZ({config:e}){return e.emulator?mA(e,mZ):`https://${e.authDomain}/${fZ}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YE="webStorageSupport";class vZ{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=DF,this._completeRedirectFn=$Y,this._overrideRedirectResult=FY}async _openPopup(t,n,i,r){_h(this.eventManagers[t._key()]?.manager,"_initialize() not called before _openPopup()");const a=await CR(t,n,i,lk(),r);return dZ(t,a,yA())}async _openRedirect(t,n,i,r){await this._originValidation(t);const a=await CR(t,n,i,lk(),r);return bY(a),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:r,promise:a}=this.eventManagers[n];return r?Promise.resolve(r):(_h(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(t);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(t){const n=await sZ(t),i=new jY(t);return n.register("authEvent",r=>(hi(r?.authEvent,t,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=n,i}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(YE,{type:YE},r=>{const a=r?.[0]?.[YE];a!==void 0&&n(!!a),pu(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=KY(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return _F()||hF()||gA()}}const _Z=vZ;var kR="@firebase/auth",IR="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yZ{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(i=>{t(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){hi(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bZ(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function xZ(e){qv(new zp("auth",(t,{options:n})=>{const i=t.getProvider("app").getImmediate(),r=t.getProvider("heartbeat"),a=t.getProvider("app-check-internal"),{apiKey:l,authDomain:h}=i.options;hi(l&&!l.includes(":"),"invalid-api-key",{appName:i.name});const s={apiKey:l,authDomain:h,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:yF(e)},p=new OX(i,r,a,s);return HX(p,n),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,i)=>{t.getProvider("auth-internal").initialize()})),qv(new zp("auth-internal",t=>{const n=lm(t.getProvider("auth").getImmediate());return(i=>new yZ(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),zf(kR,IR,bZ(e)),zf(kR,IR,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wZ=300,TZ=K6("authIdTokenMaxAge")||wZ;let AR=null;const SZ=e=>async t=>{const n=t&&await t.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>TZ)return;const r=n?.token;AR!==r&&(AR=r,await fetch(e,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function xA(e=eF()){const t=hA(e,"auth");if(t.isInitialized())return t.getImmediate();const n=WX(e,{popupRedirectResolver:_Z,persistence:[AY,vY,DF]}),i=K6("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const l=SZ(a.toString());hY(n,l,()=>l(n.currentUser)),dY(n,h=>l(h))}}const r=G6("auth");return r&&GX(n,`http://${r}`),n}function EZ(){return document.getElementsByTagName("head")?.[0]??document}VX({loadJS(e){return new Promise((t,n)=>{const i=document.createElement("script");i.setAttribute("src",e),i.onload=t,i.onerror=r=>{const a=Yu("internal-error");a.customData=r,n(a)},i.type="text/javascript",i.charset="UTF-8",EZ().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});xZ("Browser");var PR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Nf,zF;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(X,U){function H(){}H.prototype=U.prototype,X.F=U.prototype,X.prototype=new H,X.prototype.constructor=X,X.D=function(W,ie,Q){for(var te=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)te[ke-2]=arguments[ke];return U.prototype[ie].apply(W,te)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(X,U,H){H||(H=0);const W=Array(16);if(typeof U=="string")for(var ie=0;ie<16;++ie)W[ie]=U.charCodeAt(H++)|U.charCodeAt(H++)<<8|U.charCodeAt(H++)<<16|U.charCodeAt(H++)<<24;else for(ie=0;ie<16;++ie)W[ie]=U[H++]|U[H++]<<8|U[H++]<<16|U[H++]<<24;U=X.g[0],H=X.g[1],ie=X.g[2];let Q=X.g[3],te;te=U+(Q^H&(ie^Q))+W[0]+3614090360&4294967295,U=H+(te<<7&4294967295|te>>>25),te=Q+(ie^U&(H^ie))+W[1]+3905402710&4294967295,Q=U+(te<<12&4294967295|te>>>20),te=ie+(H^Q&(U^H))+W[2]+606105819&4294967295,ie=Q+(te<<17&4294967295|te>>>15),te=H+(U^ie&(Q^U))+W[3]+3250441966&4294967295,H=ie+(te<<22&4294967295|te>>>10),te=U+(Q^H&(ie^Q))+W[4]+4118548399&4294967295,U=H+(te<<7&4294967295|te>>>25),te=Q+(ie^U&(H^ie))+W[5]+1200080426&4294967295,Q=U+(te<<12&4294967295|te>>>20),te=ie+(H^Q&(U^H))+W[6]+2821735955&4294967295,ie=Q+(te<<17&4294967295|te>>>15),te=H+(U^ie&(Q^U))+W[7]+4249261313&4294967295,H=ie+(te<<22&4294967295|te>>>10),te=U+(Q^H&(ie^Q))+W[8]+1770035416&4294967295,U=H+(te<<7&4294967295|te>>>25),te=Q+(ie^U&(H^ie))+W[9]+2336552879&4294967295,Q=U+(te<<12&4294967295|te>>>20),te=ie+(H^Q&(U^H))+W[10]+4294925233&4294967295,ie=Q+(te<<17&4294967295|te>>>15),te=H+(U^ie&(Q^U))+W[11]+2304563134&4294967295,H=ie+(te<<22&4294967295|te>>>10),te=U+(Q^H&(ie^Q))+W[12]+1804603682&4294967295,U=H+(te<<7&4294967295|te>>>25),te=Q+(ie^U&(H^ie))+W[13]+4254626195&4294967295,Q=U+(te<<12&4294967295|te>>>20),te=ie+(H^Q&(U^H))+W[14]+2792965006&4294967295,ie=Q+(te<<17&4294967295|te>>>15),te=H+(U^ie&(Q^U))+W[15]+1236535329&4294967295,H=ie+(te<<22&4294967295|te>>>10),te=U+(ie^Q&(H^ie))+W[1]+4129170786&4294967295,U=H+(te<<5&4294967295|te>>>27),te=Q+(H^ie&(U^H))+W[6]+3225465664&4294967295,Q=U+(te<<9&4294967295|te>>>23),te=ie+(U^H&(Q^U))+W[11]+643717713&4294967295,ie=Q+(te<<14&4294967295|te>>>18),te=H+(Q^U&(ie^Q))+W[0]+3921069994&4294967295,H=ie+(te<<20&4294967295|te>>>12),te=U+(ie^Q&(H^ie))+W[5]+3593408605&4294967295,U=H+(te<<5&4294967295|te>>>27),te=Q+(H^ie&(U^H))+W[10]+38016083&4294967295,Q=U+(te<<9&4294967295|te>>>23),te=ie+(U^H&(Q^U))+W[15]+3634488961&4294967295,ie=Q+(te<<14&4294967295|te>>>18),te=H+(Q^U&(ie^Q))+W[4]+3889429448&4294967295,H=ie+(te<<20&4294967295|te>>>12),te=U+(ie^Q&(H^ie))+W[9]+568446438&4294967295,U=H+(te<<5&4294967295|te>>>27),te=Q+(H^ie&(U^H))+W[14]+3275163606&4294967295,Q=U+(te<<9&4294967295|te>>>23),te=ie+(U^H&(Q^U))+W[3]+4107603335&4294967295,ie=Q+(te<<14&4294967295|te>>>18),te=H+(Q^U&(ie^Q))+W[8]+1163531501&4294967295,H=ie+(te<<20&4294967295|te>>>12),te=U+(ie^Q&(H^ie))+W[13]+2850285829&4294967295,U=H+(te<<5&4294967295|te>>>27),te=Q+(H^ie&(U^H))+W[2]+4243563512&4294967295,Q=U+(te<<9&4294967295|te>>>23),te=ie+(U^H&(Q^U))+W[7]+1735328473&4294967295,ie=Q+(te<<14&4294967295|te>>>18),te=H+(Q^U&(ie^Q))+W[12]+2368359562&4294967295,H=ie+(te<<20&4294967295|te>>>12),te=U+(H^ie^Q)+W[5]+4294588738&4294967295,U=H+(te<<4&4294967295|te>>>28),te=Q+(U^H^ie)+W[8]+2272392833&4294967295,Q=U+(te<<11&4294967295|te>>>21),te=ie+(Q^U^H)+W[11]+1839030562&4294967295,ie=Q+(te<<16&4294967295|te>>>16),te=H+(ie^Q^U)+W[14]+4259657740&4294967295,H=ie+(te<<23&4294967295|te>>>9),te=U+(H^ie^Q)+W[1]+2763975236&4294967295,U=H+(te<<4&4294967295|te>>>28),te=Q+(U^H^ie)+W[4]+1272893353&4294967295,Q=U+(te<<11&4294967295|te>>>21),te=ie+(Q^U^H)+W[7]+4139469664&4294967295,ie=Q+(te<<16&4294967295|te>>>16),te=H+(ie^Q^U)+W[10]+3200236656&4294967295,H=ie+(te<<23&4294967295|te>>>9),te=U+(H^ie^Q)+W[13]+681279174&4294967295,U=H+(te<<4&4294967295|te>>>28),te=Q+(U^H^ie)+W[0]+3936430074&4294967295,Q=U+(te<<11&4294967295|te>>>21),te=ie+(Q^U^H)+W[3]+3572445317&4294967295,ie=Q+(te<<16&4294967295|te>>>16),te=H+(ie^Q^U)+W[6]+76029189&4294967295,H=ie+(te<<23&4294967295|te>>>9),te=U+(H^ie^Q)+W[9]+3654602809&4294967295,U=H+(te<<4&4294967295|te>>>28),te=Q+(U^H^ie)+W[12]+3873151461&4294967295,Q=U+(te<<11&4294967295|te>>>21),te=ie+(Q^U^H)+W[15]+530742520&4294967295,ie=Q+(te<<16&4294967295|te>>>16),te=H+(ie^Q^U)+W[2]+3299628645&4294967295,H=ie+(te<<23&4294967295|te>>>9),te=U+(ie^(H|~Q))+W[0]+4096336452&4294967295,U=H+(te<<6&4294967295|te>>>26),te=Q+(H^(U|~ie))+W[7]+1126891415&4294967295,Q=U+(te<<10&4294967295|te>>>22),te=ie+(U^(Q|~H))+W[14]+2878612391&4294967295,ie=Q+(te<<15&4294967295|te>>>17),te=H+(Q^(ie|~U))+W[5]+4237533241&4294967295,H=ie+(te<<21&4294967295|te>>>11),te=U+(ie^(H|~Q))+W[12]+1700485571&4294967295,U=H+(te<<6&4294967295|te>>>26),te=Q+(H^(U|~ie))+W[3]+2399980690&4294967295,Q=U+(te<<10&4294967295|te>>>22),te=ie+(U^(Q|~H))+W[10]+4293915773&4294967295,ie=Q+(te<<15&4294967295|te>>>17),te=H+(Q^(ie|~U))+W[1]+2240044497&4294967295,H=ie+(te<<21&4294967295|te>>>11),te=U+(ie^(H|~Q))+W[8]+1873313359&4294967295,U=H+(te<<6&4294967295|te>>>26),te=Q+(H^(U|~ie))+W[15]+4264355552&4294967295,Q=U+(te<<10&4294967295|te>>>22),te=ie+(U^(Q|~H))+W[6]+2734768916&4294967295,ie=Q+(te<<15&4294967295|te>>>17),te=H+(Q^(ie|~U))+W[13]+1309151649&4294967295,H=ie+(te<<21&4294967295|te>>>11),te=U+(ie^(H|~Q))+W[4]+4149444226&4294967295,U=H+(te<<6&4294967295|te>>>26),te=Q+(H^(U|~ie))+W[11]+3174756917&4294967295,Q=U+(te<<10&4294967295|te>>>22),te=ie+(U^(Q|~H))+W[2]+718787259&4294967295,ie=Q+(te<<15&4294967295|te>>>17),te=H+(Q^(ie|~U))+W[9]+3951481745&4294967295,X.g[0]=X.g[0]+U&4294967295,X.g[1]=X.g[1]+(ie+(te<<21&4294967295|te>>>11))&4294967295,X.g[2]=X.g[2]+ie&4294967295,X.g[3]=X.g[3]+Q&4294967295}i.prototype.v=function(X,U){U===void 0&&(U=X.length);const H=U-this.blockSize,W=this.C;let ie=this.h,Q=0;for(;Q<U;){if(ie==0)for(;Q<=H;)r(this,X,Q),Q+=this.blockSize;if(typeof X=="string"){for(;Q<U;)if(W[ie++]=X.charCodeAt(Q++),ie==this.blockSize){r(this,W),ie=0;break}}else for(;Q<U;)if(W[ie++]=X[Q++],ie==this.blockSize){r(this,W),ie=0;break}}this.h=ie,this.o+=U},i.prototype.A=function(){var X=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);X[0]=128;for(var U=1;U<X.length-8;++U)X[U]=0;U=this.o*8;for(var H=X.length-8;H<X.length;++H)X[H]=U&255,U/=256;for(this.v(X),X=Array(16),U=0,H=0;H<4;++H)for(let W=0;W<32;W+=8)X[U++]=this.g[H]>>>W&255;return X};function a(X,U){var H=h;return Object.prototype.hasOwnProperty.call(H,X)?H[X]:H[X]=U(X)}function l(X,U){this.h=U;const H=[];let W=!0;for(let ie=X.length-1;ie>=0;ie--){const Q=X[ie]|0;W&&Q==U||(H[ie]=Q,W=!1)}this.g=H}var h={};function s(X){return-128<=X&&X<128?a(X,function(U){return new l([U|0],U<0?-1:0)}):new l([X|0],X<0?-1:0)}function p(X){if(isNaN(X)||!isFinite(X))return x;if(X<0)return R(p(-X));const U=[];let H=1;for(let W=0;X>=H;W++)U[W]=X/H|0,H*=4294967296;return new l(U,0)}function _(X,U){if(X.length==0)throw Error("number format error: empty string");if(U=U||10,U<2||36<U)throw Error("radix out of range: "+U);if(X.charAt(0)=="-")return R(_(X.substring(1),U));if(X.indexOf("-")>=0)throw Error('number format error: interior "-" character');const H=p(Math.pow(U,8));let W=x;for(let Q=0;Q<X.length;Q+=8){var ie=Math.min(8,X.length-Q);const te=parseInt(X.substring(Q,Q+ie),U);ie<8?(ie=p(Math.pow(U,ie)),W=W.j(ie).add(p(te))):(W=W.j(H),W=W.add(p(te)))}return W}var x=s(0),T=s(1),k=s(16777216);e=l.prototype,e.m=function(){if(M(this))return-R(this).m();let X=0,U=1;for(let H=0;H<this.g.length;H++){const W=this.i(H);X+=(W>=0?W:4294967296+W)*U,U*=4294967296}return X},e.toString=function(X){if(X=X||10,X<2||36<X)throw Error("radix out of range: "+X);if(A(this))return"0";if(M(this))return"-"+R(this).toString(X);const U=p(Math.pow(X,6));var H=this;let W="";for(;;){const ie=Y(H,U).g;H=F(H,ie.j(U));let Q=((H.g.length>0?H.g[0]:H.h)>>>0).toString(X);if(H=ie,A(H))return Q+W;for(;Q.length<6;)Q="0"+Q;W=Q+W}},e.i=function(X){return X<0?0:X<this.g.length?this.g[X]:this.h};function A(X){if(X.h!=0)return!1;for(let U=0;U<X.g.length;U++)if(X.g[U]!=0)return!1;return!0}function M(X){return X.h==-1}e.l=function(X){return X=F(this,X),M(X)?-1:A(X)?0:1};function R(X){const U=X.g.length,H=[];for(let W=0;W<U;W++)H[W]=~X.g[W];return new l(H,~X.h).add(T)}e.abs=function(){return M(this)?R(this):this},e.add=function(X){const U=Math.max(this.g.length,X.g.length),H=[];let W=0;for(let ie=0;ie<=U;ie++){let Q=W+(this.i(ie)&65535)+(X.i(ie)&65535),te=(Q>>>16)+(this.i(ie)>>>16)+(X.i(ie)>>>16);W=te>>>16,Q&=65535,te&=65535,H[ie]=te<<16|Q}return new l(H,H[H.length-1]&-2147483648?-1:0)};function F(X,U){return X.add(R(U))}e.j=function(X){if(A(this)||A(X))return x;if(M(this))return M(X)?R(this).j(R(X)):R(R(this).j(X));if(M(X))return R(this.j(R(X)));if(this.l(k)<0&&X.l(k)<0)return p(this.m()*X.m());const U=this.g.length+X.g.length,H=[];for(var W=0;W<2*U;W++)H[W]=0;for(W=0;W<this.g.length;W++)for(let ie=0;ie<X.g.length;ie++){const Q=this.i(W)>>>16,te=this.i(W)&65535,ke=X.i(ie)>>>16,Re=X.i(ie)&65535;H[2*W+2*ie]+=te*Re,z(H,2*W+2*ie),H[2*W+2*ie+1]+=Q*Re,z(H,2*W+2*ie+1),H[2*W+2*ie+1]+=te*ke,z(H,2*W+2*ie+1),H[2*W+2*ie+2]+=Q*ke,z(H,2*W+2*ie+2)}for(X=0;X<U;X++)H[X]=H[2*X+1]<<16|H[2*X];for(X=U;X<2*U;X++)H[X]=0;return new l(H,0)};function z(X,U){for(;(X[U]&65535)!=X[U];)X[U+1]+=X[U]>>>16,X[U]&=65535,U++}function G(X,U){this.g=X,this.h=U}function Y(X,U){if(A(U))throw Error("division by zero");if(A(X))return new G(x,x);if(M(X))return U=Y(R(X),U),new G(R(U.g),R(U.h));if(M(U))return U=Y(X,R(U)),new G(R(U.g),U.h);if(X.g.length>30){if(M(X)||M(U))throw Error("slowDivide_ only works with positive integers.");for(var H=T,W=U;W.l(X)<=0;)H=J(H),W=J(W);var ie=re(H,1),Q=re(W,1);for(W=re(W,2),H=re(H,2);!A(W);){var te=Q.add(W);te.l(X)<=0&&(ie=ie.add(H),Q=te),W=re(W,1),H=re(H,1)}return U=F(X,ie.j(U)),new G(ie,U)}for(ie=x;X.l(U)>=0;){for(H=Math.max(1,Math.floor(X.m()/U.m())),W=Math.ceil(Math.log(H)/Math.LN2),W=W<=48?1:Math.pow(2,W-48),Q=p(H),te=Q.j(U);M(te)||te.l(X)>0;)H-=W,Q=p(H),te=Q.j(U);A(Q)&&(Q=T),ie=ie.add(Q),X=F(X,te)}return new G(ie,X)}e.B=function(X){return Y(this,X).h},e.and=function(X){const U=Math.max(this.g.length,X.g.length),H=[];for(let W=0;W<U;W++)H[W]=this.i(W)&X.i(W);return new l(H,this.h&X.h)},e.or=function(X){const U=Math.max(this.g.length,X.g.length),H=[];for(let W=0;W<U;W++)H[W]=this.i(W)|X.i(W);return new l(H,this.h|X.h)},e.xor=function(X){const U=Math.max(this.g.length,X.g.length),H=[];for(let W=0;W<U;W++)H[W]=this.i(W)^X.i(W);return new l(H,this.h^X.h)};function J(X){const U=X.g.length+1,H=[];for(let W=0;W<U;W++)H[W]=X.i(W)<<1|X.i(W-1)>>>31;return new l(H,X.h)}function re(X,U){const H=U>>5;U%=32;const W=X.g.length-H,ie=[];for(let Q=0;Q<W;Q++)ie[Q]=U>0?X.i(Q+H)>>>U|X.i(Q+H+1)<<32-U:X.i(Q+H);return new l(ie,X.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,zF=i,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.B,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=p,l.fromString=_,Nf=l}).apply(typeof PR<"u"?PR:typeof self<"u"?self:typeof window<"u"?window:{});var zx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var NF,zy,$F,T1,dk,UF,jF,WF;(function(){var e,t=Object.defineProperty;function n(P){P=[typeof globalThis=="object"&&globalThis,P,typeof window=="object"&&window,typeof self=="object"&&self,typeof zx=="object"&&zx];for(var ee=0;ee<P.length;++ee){var de=P[ee];if(de&&de.Math==Math)return de}throw Error("Cannot find global object")}var i=n(this);function r(P,ee){if(ee)e:{var de=i;P=P.split(".");for(var Me=0;Me<P.length-1;Me++){var St=P[Me];if(!(St in de))break e;de=de[St]}P=P[P.length-1],Me=de[P],ee=ee(Me),ee!=Me&&ee!=null&&t(de,P,{configurable:!0,writable:!0,value:ee})}}r("Symbol.dispose",function(P){return P||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(P){return P||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(P){return P||function(ee){var de=[],Me;for(Me in ee)Object.prototype.hasOwnProperty.call(ee,Me)&&de.push([Me,ee[Me]]);return de}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function h(P){var ee=typeof P;return ee=="object"&&P!=null||ee=="function"}function s(P,ee,de){return P.call.apply(P.bind,arguments)}function p(P,ee,de){return p=s,p.apply(null,arguments)}function _(P,ee){var de=Array.prototype.slice.call(arguments,1);return function(){var Me=de.slice();return Me.push.apply(Me,arguments),P.apply(this,Me)}}function x(P,ee){function de(){}de.prototype=ee.prototype,P.Z=ee.prototype,P.prototype=new de,P.prototype.constructor=P,P.Ob=function(Me,St,Rt){for(var bn=Array(arguments.length-2),di=2;di<arguments.length;di++)bn[di-2]=arguments[di];return ee.prototype[St].apply(Me,bn)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?P=>P&&AsyncContext.Snapshot.wrap(P):P=>P;function k(P){const ee=P.length;if(ee>0){const de=Array(ee);for(let Me=0;Me<ee;Me++)de[Me]=P[Me];return de}return[]}function A(P,ee){for(let Me=1;Me<arguments.length;Me++){const St=arguments[Me];var de=typeof St;if(de=de!="object"?de:St?Array.isArray(St)?"array":de:"null",de=="array"||de=="object"&&typeof St.length=="number"){de=P.length||0;const Rt=St.length||0;P.length=de+Rt;for(let bn=0;bn<Rt;bn++)P[de+bn]=St[bn]}else P.push(St)}}class M{constructor(ee,de){this.i=ee,this.j=de,this.h=0,this.g=null}get(){let ee;return this.h>0?(this.h--,ee=this.g,this.g=ee.next,ee.next=null):ee=this.i(),ee}}function R(P){l.setTimeout(()=>{throw P},0)}function F(){var P=X;let ee=null;return P.g&&(ee=P.g,P.g=P.g.next,P.g||(P.h=null),ee.next=null),ee}class z{constructor(){this.h=this.g=null}add(ee,de){const Me=G.get();Me.set(ee,de),this.h?this.h.next=Me:this.g=Me,this.h=Me}}var G=new M(()=>new Y,P=>P.reset());class Y{constructor(){this.next=this.g=this.h=null}set(ee,de){this.h=ee,this.g=de,this.next=null}reset(){this.next=this.g=this.h=null}}let J,re=!1,X=new z,U=()=>{const P=Promise.resolve(void 0);J=()=>{P.then(H)}};function H(){for(var P;P=F();){try{P.h.call(P.g)}catch(de){R(de)}var ee=G;ee.j(P),ee.h<100&&(ee.h++,P.next=ee.g,ee.g=P)}re=!1}function W(){this.u=this.u,this.C=this.C}W.prototype.u=!1,W.prototype.dispose=function(){this.u||(this.u=!0,this.N())},W.prototype[Symbol.dispose]=function(){this.dispose()},W.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ie(P,ee){this.type=P,this.g=this.target=ee,this.defaultPrevented=!1}ie.prototype.h=function(){this.defaultPrevented=!0};var Q=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var P=!1,ee=Object.defineProperty({},"passive",{get:function(){P=!0}});try{const de=()=>{};l.addEventListener("test",de,ee),l.removeEventListener("test",de,ee)}catch{}return P})();function te(P){return/^[\s\xa0]*$/.test(P)}function ke(P,ee){ie.call(this,P?P.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,P&&this.init(P,ee)}x(ke,ie),ke.prototype.init=function(P,ee){const de=this.type=P.type,Me=P.changedTouches&&P.changedTouches.length?P.changedTouches[0]:null;this.target=P.target||P.srcElement,this.g=ee,ee=P.relatedTarget,ee||(de=="mouseover"?ee=P.fromElement:de=="mouseout"&&(ee=P.toElement)),this.relatedTarget=ee,Me?(this.clientX=Me.clientX!==void 0?Me.clientX:Me.pageX,this.clientY=Me.clientY!==void 0?Me.clientY:Me.pageY,this.screenX=Me.screenX||0,this.screenY=Me.screenY||0):(this.clientX=P.clientX!==void 0?P.clientX:P.pageX,this.clientY=P.clientY!==void 0?P.clientY:P.pageY,this.screenX=P.screenX||0,this.screenY=P.screenY||0),this.button=P.button,this.key=P.key||"",this.ctrlKey=P.ctrlKey,this.altKey=P.altKey,this.shiftKey=P.shiftKey,this.metaKey=P.metaKey,this.pointerId=P.pointerId||0,this.pointerType=P.pointerType,this.state=P.state,this.i=P,P.defaultPrevented&&ke.Z.h.call(this)},ke.prototype.h=function(){ke.Z.h.call(this);const P=this.i;P.preventDefault?P.preventDefault():P.returnValue=!1};var Re="closure_listenable_"+(Math.random()*1e6|0),Be=0;function Je(P,ee,de,Me,St){this.listener=P,this.proxy=null,this.src=ee,this.type=de,this.capture=!!Me,this.ha=St,this.key=++Be,this.da=this.fa=!1}function nt(P){P.da=!0,P.listener=null,P.proxy=null,P.src=null,P.ha=null}function De(P,ee,de){for(const Me in P)ee.call(de,P[Me],Me,P)}function Ge(P,ee){for(const de in P)ee.call(void 0,P[de],de,P)}function Ee(P){const ee={};for(const de in P)ee[de]=P[de];return ee}const it="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ot(P,ee){let de,Me;for(let St=1;St<arguments.length;St++){Me=arguments[St];for(de in Me)P[de]=Me[de];for(let Rt=0;Rt<it.length;Rt++)de=it[Rt],Object.prototype.hasOwnProperty.call(Me,de)&&(P[de]=Me[de])}}function mt(P){this.src=P,this.g={},this.h=0}mt.prototype.add=function(P,ee,de,Me,St){const Rt=P.toString();P=this.g[Rt],P||(P=this.g[Rt]=[],this.h++);const bn=$t(P,ee,Me,St);return bn>-1?(ee=P[bn],de||(ee.fa=!1)):(ee=new Je(ee,this.src,Rt,!!Me,St),ee.fa=de,P.push(ee)),ee};function Pt(P,ee){const de=ee.type;if(de in P.g){var Me=P.g[de],St=Array.prototype.indexOf.call(Me,ee,void 0),Rt;(Rt=St>=0)&&Array.prototype.splice.call(Me,St,1),Rt&&(nt(ee),P.g[de].length==0&&(delete P.g[de],P.h--))}}function $t(P,ee,de,Me){for(let St=0;St<P.length;++St){const Rt=P[St];if(!Rt.da&&Rt.listener==ee&&Rt.capture==!!de&&Rt.ha==Me)return St}return-1}var ct="closure_lm_"+(Math.random()*1e6|0),ht={};function Qe(P,ee,de,Me,St){if(Array.isArray(ee)){for(let Rt=0;Rt<ee.length;Rt++)Qe(P,ee[Rt],de,Me,St);return null}return de=yt(de),P&&P[Re]?P.J(ee,de,h(Me)?!!Me.capture:!1,St):kt(P,ee,de,!1,Me,St)}function kt(P,ee,de,Me,St,Rt){if(!ee)throw Error("Invalid event type");const bn=h(St)?!!St.capture:!!St;let di=je(P);if(di||(P[ct]=di=new mt(P)),de=di.add(ee,de,Me,bn,Rt),de.proxy)return de;if(Me=Ue(),de.proxy=Me,Me.src=P,Me.listener=de,P.addEventListener)Q||(St=bn),St===void 0&&(St=!1),P.addEventListener(ee.toString(),Me,St);else if(P.attachEvent)P.attachEvent(fe(ee.toString()),Me);else if(P.addListener&&P.removeListener)P.addListener(Me);else throw Error("addEventListener and attachEvent are unavailable.");return de}function Ue(){function P(de){return ee.call(P.src,P.listener,de)}const ee=Ie;return P}function ue(P,ee,de,Me,St){if(Array.isArray(ee))for(var Rt=0;Rt<ee.length;Rt++)ue(P,ee[Rt],de,Me,St);else Me=h(Me)?!!Me.capture:!!Me,de=yt(de),P&&P[Re]?(P=P.i,Rt=String(ee).toString(),Rt in P.g&&(ee=P.g[Rt],de=$t(ee,de,Me,St),de>-1&&(nt(ee[de]),Array.prototype.splice.call(ee,de,1),ee.length==0&&(delete P.g[Rt],P.h--)))):P&&(P=je(P))&&(ee=P.g[ee.toString()],P=-1,ee&&(P=$t(ee,de,Me,St)),(de=P>-1?ee[P]:null)&&we(de))}function we(P){if(typeof P!="number"&&P&&!P.da){var ee=P.src;if(ee&&ee[Re])Pt(ee.i,P);else{var de=P.type,Me=P.proxy;ee.removeEventListener?ee.removeEventListener(de,Me,P.capture):ee.detachEvent?ee.detachEvent(fe(de),Me):ee.addListener&&ee.removeListener&&ee.removeListener(Me),(de=je(ee))?(Pt(de,P),de.h==0&&(de.src=null,ee[ct]=null)):nt(P)}}}function fe(P){return P in ht?ht[P]:ht[P]="on"+P}function Ie(P,ee){if(P.da)P=!0;else{ee=new ke(ee,this);const de=P.listener,Me=P.ha||P.src;P.fa&&we(P),P=de.call(Me,ee)}return P}function je(P){return P=P[ct],P instanceof mt?P:null}var Xe="__closure_events_fn_"+(Math.random()*1e9>>>0);function yt(P){return typeof P=="function"?P:(P[Xe]||(P[Xe]=function(ee){return P.handleEvent(ee)}),P[Xe])}function wt(){W.call(this),this.i=new mt(this),this.M=this,this.G=null}x(wt,W),wt.prototype[Re]=!0,wt.prototype.removeEventListener=function(P,ee,de,Me){ue(this,P,ee,de,Me)};function Lt(P,ee){var de,Me=P.G;if(Me)for(de=[];Me;Me=Me.G)de.push(Me);if(P=P.M,Me=ee.type||ee,typeof ee=="string")ee=new ie(ee,P);else if(ee instanceof ie)ee.target=ee.target||P;else{var St=ee;ee=new ie(Me,P),ot(ee,St)}St=!0;let Rt,bn;if(de)for(bn=de.length-1;bn>=0;bn--)Rt=ee.g=de[bn],St=Dt(Rt,Me,!0,ee)&&St;if(Rt=ee.g=P,St=Dt(Rt,Me,!0,ee)&&St,St=Dt(Rt,Me,!1,ee)&&St,de)for(bn=0;bn<de.length;bn++)Rt=ee.g=de[bn],St=Dt(Rt,Me,!1,ee)&&St}wt.prototype.N=function(){if(wt.Z.N.call(this),this.i){var P=this.i;for(const ee in P.g){const de=P.g[ee];for(let Me=0;Me<de.length;Me++)nt(de[Me]);delete P.g[ee],P.h--}}this.G=null},wt.prototype.J=function(P,ee,de,Me){return this.i.add(String(P),ee,!1,de,Me)},wt.prototype.K=function(P,ee,de,Me){return this.i.add(String(P),ee,!0,de,Me)};function Dt(P,ee,de,Me){if(ee=P.i.g[String(ee)],!ee)return!0;ee=ee.concat();let St=!0;for(let Rt=0;Rt<ee.length;++Rt){const bn=ee[Rt];if(bn&&!bn.da&&bn.capture==de){const di=bn.listener,Lr=bn.ha||bn.src;bn.fa&&Pt(P.i,bn),St=di.call(Lr,Me)!==!1&&St}}return St&&!Me.defaultPrevented}function gn(P,ee){if(typeof P!="function")if(P&&typeof P.handleEvent=="function")P=p(P.handleEvent,P);else throw Error("Invalid listener argument");return Number(ee)>2147483647?-1:l.setTimeout(P,ee||0)}function Kt(P){P.g=gn(()=>{P.g=null,P.i&&(P.i=!1,Kt(P))},P.l);const ee=P.h;P.h=null,P.m.apply(null,ee)}class Cn extends W{constructor(ee,de){super(),this.m=ee,this.l=de,this.h=null,this.i=!1,this.g=null}j(ee){this.h=arguments,this.g?this.i=!0:Kt(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Dn(P){W.call(this),this.h=P,this.g={}}x(Dn,W);var Fn=[];function ni(P){De(P.g,function(ee,de){this.g.hasOwnProperty(de)&&we(ee)},P),P.g={}}Dn.prototype.N=function(){Dn.Z.N.call(this),ni(this)},Dn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ut=l.JSON.stringify,fn=l.JSON.parse,wn=class{stringify(P){return l.JSON.stringify(P,void 0)}parse(P){return l.JSON.parse(P,void 0)}};function Ln(){}function Ci(){}var xr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ss(){ie.call(this,"d")}x(Ss,ie);function rr(){ie.call(this,"c")}x(rr,ie);var wr={},jo=null;function So(){return jo=jo||new wt}wr.Ia="serverreachability";function $c(P){ie.call(this,wr.Ia,P)}x($c,ie);function ze(P){const ee=So();Lt(ee,new $c(ee))}wr.STAT_EVENT="statevent";function ge(P,ee){ie.call(this,wr.STAT_EVENT,P),this.stat=ee}x(ge,ie);function _e(P){const ee=So();Lt(ee,new ge(ee,P))}wr.Ja="timingevent";function Fe(P,ee){ie.call(this,wr.Ja,P),this.size=ee}x(Fe,ie);function Ke(P,ee){if(typeof P!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){P()},ee)}function st(){this.g=!0}st.prototype.ua=function(){this.g=!1};function vt(P,ee,de,Me,St,Rt){P.info(function(){if(P.g)if(Rt){var bn="",di=Rt.split("&");for(let ki=0;ki<di.length;ki++){var Lr=di[ki].split("=");if(Lr.length>1){const sr=Lr[0];Lr=Lr[1];const Qn=sr.split("_");bn=Qn.length>=2&&Qn[1]=="type"?bn+(sr+"="+Lr+"&"):bn+(sr+"=redacted&")}}}else bn=null;else bn=Rt;return"XMLHTTP REQ ("+Me+") [attempt "+St+"]: "+ee+`
`+de+`
`+bn})}function pt(P,ee,de,Me,St,Rt,bn){P.info(function(){return"XMLHTTP RESP ("+Me+") [ attempt "+St+"]: "+ee+`
`+de+`
`+Rt+" "+bn})}function rt(P,ee,de,Me){P.info(function(){return"XMLHTTP TEXT ("+ee+"): "+nn(P,de)+(Me?" "+Me:"")})}function Ct(P,ee){P.info(function(){return"TIMEOUT: "+ee})}st.prototype.info=function(){};function nn(P,ee){if(!P.g)return ee;if(!ee)return null;try{const Rt=JSON.parse(ee);if(Rt){for(P=0;P<Rt.length;P++)if(Array.isArray(Rt[P])){var de=Rt[P];if(!(de.length<2)){var Me=de[1];if(Array.isArray(Me)&&!(Me.length<1)){var St=Me[0];if(St!="noop"&&St!="stop"&&St!="close")for(let bn=1;bn<Me.length;bn++)Me[bn]=""}}}}return Ut(Rt)}catch{return ee}}var dn={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},rn={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Kn;function Jn(){}x(Jn,Ln),Jn.prototype.g=function(){return new XMLHttpRequest},Kn=new Jn;function jn(P){return encodeURIComponent(String(P))}function ai(P){var ee=1;P=P.split(":");const de=[];for(;ee>0&&P.length;)de.push(P.shift()),ee--;return P.length&&de.push(P.join(":")),de}function Xn(P,ee,de,Me){this.j=P,this.i=ee,this.l=de,this.S=Me||1,this.V=new Dn(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ri}function Ri(){this.i=null,this.g="",this.h=!1}var mr={},is={};function Tr(P,ee,de){P.M=1,P.A=pa(Yi(ee)),P.u=de,P.R=!0,Wo(P,null)}function Wo(P,ee){P.F=Date.now(),Es(P),P.B=Yi(P.A);var de=P.B,Me=P.S;Array.isArray(Me)||(Me=[String(Me)]),ul(de.i,"t",Me),P.C=0,de=P.j.L,P.h=new Ri,P.g=Tu(P.j,de?ee:null,!P.u),P.P>0&&(P.O=new Cn(p(P.Y,P,P.g),P.P)),ee=P.V,de=P.g,Me=P.ba;var St="readystatechange";Array.isArray(St)||(St&&(Fn[0]=St.toString()),St=Fn);for(let Rt=0;Rt<St.length;Rt++){const bn=Qe(de,St[Rt],Me||ee.handleEvent,!1,ee.h||ee);if(!bn)break;ee.g[bn.key]=bn}ee=P.J?Ee(P.J):{},P.u?(P.v||(P.v="POST"),ee["Content-Type"]="application/x-www-form-urlencoded",P.g.ea(P.B,P.v,P.u,ee)):(P.v="GET",P.g.ea(P.B,P.v,null,ee)),ze(),vt(P.i,P.v,P.B,P.l,P.S,P.u)}Xn.prototype.ba=function(P){P=P.target;const ee=this.O;ee&&Ko(P)==3?ee.j():this.Y(P)},Xn.prototype.Y=function(P){try{if(P==this.g)e:{const di=Ko(this.g),Lr=this.g.ya(),ki=this.g.ca();if(!(di<3)&&(di!=3||this.g&&(this.h.h||this.g.la()||Po(this.g)))){this.K||di!=4||Lr==7||(Lr==8||ki<=0?ze(3):ze(2)),qn(this);var ee=this.g.ca();this.X=ee;var de=rs(this);if(this.o=ee==200,pt(this.i,this.v,this.B,this.l,this.S,di,ee),this.o){if(this.U&&!this.L){t:{if(this.g){var Me,St=this.g;if((Me=St.g?St.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!te(Me)){var Rt=Me;break t}}Rt=null}if(P=Rt)rt(this.i,this.l,P,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ho(this,P);else{this.o=!1,this.m=3,_e(12),Cs(this),fa(this);break e}}if(this.R){P=!0;let sr;for(;!this.K&&this.C<de.length;)if(sr=Hr(this,de),sr==is){di==4&&(this.m=4,_e(14),P=!1),rt(this.i,this.l,null,"[Incomplete Response]");break}else if(sr==mr){this.m=4,_e(15),rt(this.i,this.l,de,"[Invalid Chunk]"),P=!1;break}else rt(this.i,this.l,sr,null),Ho(this,sr);if(Or(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),di!=4||de.length!=0||this.h.h||(this.m=1,_e(16),P=!1),this.o=this.o&&P,!P)rt(this.i,this.l,de,"[Invalid Chunked Response]"),Cs(this),fa(this);else if(de.length>0&&!this.W){this.W=!0;var bn=this.j;bn.g==this&&bn.aa&&!bn.P&&(bn.j.info("Great, no buffering proxy detected. Bytes received: "+de.length),pl(bn),bn.P=!0,_e(11))}}else rt(this.i,this.l,de,null),Ho(this,de);di==4&&Cs(this),this.o&&!this.K&&(di==4?xu(this.j,this):(this.o=!1,Es(this)))}else va(this.g),ee==400&&de.indexOf("Unknown SID")>0?(this.m=3,_e(12)):(this.m=0,_e(13)),Cs(this),fa(this)}}}catch{}finally{}};function rs(P){if(!Or(P))return P.g.la();const ee=Po(P.g);if(ee==="")return"";let de="";const Me=ee.length,St=Ko(P.g)==4;if(!P.h.i){if(typeof TextDecoder>"u")return Cs(P),fa(P),"";P.h.i=new l.TextDecoder}for(let Rt=0;Rt<Me;Rt++)P.h.h=!0,de+=P.h.i.decode(ee[Rt],{stream:!(St&&Rt==Me-1)});return ee.length=0,P.h.g+=de,P.C=0,P.h.g}function Or(P){return P.g?P.v=="GET"&&P.M!=2&&P.j.Aa:!1}function Hr(P,ee){var de=P.C,Me=ee.indexOf(`
`,de);return Me==-1?is:(de=Number(ee.substring(de,Me)),isNaN(de)?mr:(Me+=1,Me+de>ee.length?is:(ee=ee.slice(Me,Me+de),P.C=Me+de,ee)))}Xn.prototype.cancel=function(){this.K=!0,Cs(this)};function Es(P){P.T=Date.now()+P.H,zs(P,P.H)}function zs(P,ee){if(P.D!=null)throw Error("WatchDog timer not null");P.D=Ke(p(P.aa,P),ee)}function qn(P){P.D&&(l.clearTimeout(P.D),P.D=null)}Xn.prototype.aa=function(){this.D=null;const P=Date.now();P-this.T>=0?(Ct(this.i,this.B),this.M!=2&&(ze(),_e(17)),Cs(this),this.m=2,fa(this)):zs(this,this.T-P)};function fa(P){P.j.I==0||P.K||xu(P.j,P)}function Cs(P){qn(P);var ee=P.O;ee&&typeof ee.dispose=="function"&&ee.dispose(),P.O=null,ni(P.V),P.g&&(ee=P.g,P.g=null,ee.abort(),ee.dispose())}function Ho(P,ee){try{var de=P.j;if(de.I!=0&&(de.g==P||fc(de.h,P))){if(!P.L&&fc(de.h,P)&&de.I==3){try{var Me=de.Ba.g.parse(ee)}catch{Me=null}if(Array.isArray(Me)&&Me.length==3){var St=Me;if(St[0]==0){e:if(!de.v){if(de.g)if(de.g.F+3e3<P.F)gl(de),Xo(de);else break e;Za(de),_e(18)}}else de.xa=St[1],0<de.xa-de.K&&St[2]<37500&&de.F&&de.A==0&&!de.C&&(de.C=Ke(p(de.Va,de),6e3));Xa(de.h)<=1&&de.ta&&(de.ta=void 0)}else co(de,11)}else if((P.L||de.g==P)&&gl(de),!te(ee))for(St=de.Ba.g.parse(ee),ee=0;ee<St.length;ee++){let ki=St[ee];const sr=ki[0];if(!(sr<=de.K))if(de.K=sr,ki=ki[1],de.I==2)if(ki[0]=="c"){de.M=ki[1],de.ba=ki[2];const Qn=ki[3];Qn!=null&&(de.ka=Qn,de.j.info("VER="+de.ka));const Ys=ki[4];Ys!=null&&(de.za=Ys,de.j.info("SVER="+de.za));const Ja=ki[5];Ja!=null&&typeof Ja=="number"&&Ja>0&&(Me=1.5*Ja,de.O=Me,de.j.info("backChannelRequestTimeoutMs_="+Me)),Me=de;const xa=P.g;if(xa){const Gc=xa.g?xa.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Gc){var Rt=Me.h;Rt.g||Gc.indexOf("spdy")==-1&&Gc.indexOf("quic")==-1&&Gc.indexOf("h2")==-1||(Rt.j=Rt.l,Rt.g=new Set,Rt.h&&(Go(Rt,Rt.h),Rt.h=null))}if(Me.G){const Qa=xa.g?xa.g.getResponseHeader("X-HTTP-Session-Id"):null;Qa&&(Me.wa=Qa,er(Me.J,Me.G,Qa))}}de.I=3,de.l&&de.l.ra(),de.aa&&(de.T=Date.now()-P.F,de.j.info("Handshake RTT: "+de.T+"ms")),Me=de;var bn=P;if(Me.na=Wc(Me,Me.L?Me.ba:null,Me.W),bn.L){ko(Me.h,bn);var di=bn,Lr=Me.O;Lr&&(di.H=Lr),di.D&&(qn(di),Es(di)),Me.g=bn}else vc(Me);de.i.length>0&&Ul(de)}else ki[0]!="stop"&&ki[0]!="close"||co(de,7);else de.I==3&&(ki[0]=="stop"||ki[0]=="close"?ki[0]=="stop"?co(de,7):Ya(de):ki[0]!="noop"&&de.l&&de.l.qa(ki),de.A=0)}}ze(4)}catch{}}var Ka=class{constructor(P,ee){this.g=P,this.map=ee}};function Eo(P){this.l=P||10,l.PerformanceNavigationTiming?(P=l.performance.getEntriesByType("navigation"),P=P.length>0&&(P[0].nextHopProtocol=="hq"||P[0].nextHopProtocol=="h2")):P=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=P?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Co(P){return P.h?!0:P.g?P.g.size>=P.j:!1}function Xa(P){return P.h?1:P.g?P.g.size:0}function fc(P,ee){return P.h?P.h==ee:P.g?P.g.has(ee):!1}function Go(P,ee){P.g?P.g.add(ee):P.h=ee}function ko(P,ee){P.h&&P.h==ee?P.h=null:P.g&&P.g.has(ee)&&P.g.delete(ee)}Eo.prototype.cancel=function(){if(this.i=zl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const P of this.g.values())P.cancel();this.g.clear()}};function zl(P){if(P.h!=null)return P.i.concat(P.h.G);if(P.g!=null&&P.g.size!==0){let ee=P.i;for(const de of P.g.values())ee=ee.concat(de.G);return ee}return k(P.i)}var Ot=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ma(P,ee){if(P){P=P.split("&");for(let de=0;de<P.length;de++){const Me=P[de].indexOf("=");let St,Rt=null;Me>=0?(St=P[de].substring(0,Me),Rt=P[de].substring(Me+1)):St=P[de],ee(St,Rt?decodeURIComponent(Rt.replace(/\+/g," ")):"")}}}function Ui(P){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let ee;P instanceof Ui?(this.l=P.l,Nl(this,P.j),this.o=P.o,this.g=P.g,Ns(this,P.u),this.h=P.h,mc(this,$l(P.i)),this.m=P.m):P&&(ee=String(P).match(Ot))?(this.l=!1,Nl(this,ee[1]||"",!0),this.o=hn(ee[2]||""),this.g=hn(ee[3]||"",!0),Ns(this,ee[4]),this.h=hn(ee[5]||"",!0),mc(this,ee[6]||"",!0),this.m=hn(ee[7]||"")):(this.l=!1,this.i=new Xs(null,this.l))}Ui.prototype.toString=function(){const P=[];var ee=this.j;ee&&P.push(Nn(ee,pr,!0),":");var de=this.g;return(de||ee=="file")&&(P.push("//"),(ee=this.o)&&P.push(Nn(ee,pr,!0),"@"),P.push(jn(de).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),de=this.u,de!=null&&P.push(":",String(de))),(de=this.h)&&(this.g&&de.charAt(0)!="/"&&P.push("/"),P.push(Nn(de,de.charAt(0)=="/"?ii:lo,!0))),(de=this.i.toString())&&P.push("?",de),(de=this.m)&&P.push("#",Nn(de,qo)),P.join("")},Ui.prototype.resolve=function(P){const ee=Yi(this);let de=!!P.j;de?Nl(ee,P.j):de=!!P.o,de?ee.o=P.o:de=!!P.g,de?ee.g=P.g:de=P.u!=null;var Me=P.h;if(de)Ns(ee,P.u);else if(de=!!P.h){if(Me.charAt(0)!="/")if(this.g&&!this.h)Me="/"+Me;else{var St=ee.h.lastIndexOf("/");St!=-1&&(Me=ee.h.slice(0,St+1)+Me)}if(St=Me,St==".."||St==".")Me="";else if(St.indexOf("./")!=-1||St.indexOf("/.")!=-1){Me=St.lastIndexOf("/",0)==0,St=St.split("/");const Rt=[];for(let bn=0;bn<St.length;){const di=St[bn++];di=="."?Me&&bn==St.length&&Rt.push(""):di==".."?((Rt.length>1||Rt.length==1&&Rt[0]!="")&&Rt.pop(),Me&&bn==St.length&&Rt.push("")):(Rt.push(di),Me=!0)}Me=Rt.join("/")}else Me=St}return de?ee.h=Me:de=P.i.toString()!=="",de?mc(ee,$l(P.i)):de=!!P.m,de&&(ee.m=P.m),ee};function Yi(P){return new Ui(P)}function Nl(P,ee,de){P.j=de?hn(ee,!0):ee,P.j&&(P.j=P.j.replace(/:$/,""))}function Ns(P,ee){if(ee){if(ee=Number(ee),isNaN(ee)||ee<0)throw Error("Bad port number "+ee);P.u=ee}else P.u=null}function mc(P,ee,de){ee instanceof Xs?(P.i=ee,Rh(P.i,P.l)):(de||(ee=Nn(ee,Dr)),P.i=new Xs(ee,P.l))}function er(P,ee,de){P.i.set(ee,de)}function pa(P){return er(P,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),P}function hn(P,ee){return P?ee?decodeURI(P.replace(/%25/g,"%2525")):decodeURIComponent(P):""}function Nn(P,ee,de){return typeof P=="string"?(P=encodeURI(P).replace(ee,Yn),de&&(P=P.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),P):null}function Yn(P){return P=P.charCodeAt(0),"%"+(P>>4&15).toString(16)+(P&15).toString(16)}var pr=/[#\/\?@]/g,lo=/[#\?:]/g,ii=/[#\?]/g,Dr=/[#\?@]/g,qo=/#/g;function Xs(P,ee){this.h=this.g=null,this.i=P||null,this.j=!!ee}function Ir(P){P.g||(P.g=new Map,P.h=0,P.i&&ma(P.i,function(ee,de){P.add(decodeURIComponent(ee.replace(/\+/g," ")),de)}))}e=Xs.prototype,e.add=function(P,ee){Ir(this),this.i=null,P=ks(this,P);let de=this.g.get(P);return de||this.g.set(P,de=[]),de.push(ee),this.h+=1,this};function ji(P,ee){Ir(P),ee=ks(P,ee),P.g.has(ee)&&(P.i=null,P.h-=P.g.get(ee).length,P.g.delete(ee))}function yu(P,ee){return Ir(P),ee=ks(P,ee),P.g.has(ee)}e.forEach=function(P,ee){Ir(this),this.g.forEach(function(de,Me){de.forEach(function(St){P.call(ee,St,Me,this)},this)},this)};function $s(P,ee){Ir(P);let de=[];if(typeof ee=="string")yu(P,ee)&&(de=de.concat(P.g.get(ks(P,ee))));else for(P=Array.from(P.g.values()),ee=0;ee<P.length;ee++)de=de.concat(P[ee]);return de}e.set=function(P,ee){return Ir(this),this.i=null,P=ks(this,P),yu(this,P)&&(this.h-=this.g.get(P).length),this.g.set(P,[ee]),this.h+=1,this},e.get=function(P,ee){return P?(P=$s(this,P),P.length>0?String(P[0]):ee):ee};function ul(P,ee,de){ji(P,ee),de.length>0&&(P.i=null,P.g.set(ks(P,ee),k(de)),P.h+=de.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const P=[],ee=Array.from(this.g.keys());for(let Me=0;Me<ee.length;Me++){var de=ee[Me];const St=jn(de);de=$s(this,de);for(let Rt=0;Rt<de.length;Rt++){let bn=St;de[Rt]!==""&&(bn+="="+jn(de[Rt])),P.push(bn)}}return this.i=P.join("&")};function $l(P){const ee=new Xs;return ee.i=P.i,P.g&&(ee.g=new Map(P.g),ee.h=P.h),ee}function ks(P,ee){return ee=String(ee),P.j&&(ee=ee.toLowerCase()),ee}function Rh(P,ee){ee&&!P.j&&(Ir(P),P.i=null,P.g.forEach(function(de,Me){const St=Me.toLowerCase();Me!=St&&(ji(this,Me),ul(this,St,de))},P)),P.j=ee}function Io(P,ee){const de=new st;if(l.Image){const Me=new Image;Me.onload=_(Ao,de,"TestLoadImage: loaded",!0,ee,Me),Me.onerror=_(Ao,de,"TestLoadImage: error",!1,ee,Me),Me.onabort=_(Ao,de,"TestLoadImage: abort",!1,ee,Me),Me.ontimeout=_(Ao,de,"TestLoadImage: timeout",!1,ee,Me),l.setTimeout(function(){Me.ontimeout&&Me.ontimeout()},1e4),Me.src=P}else ee(!1)}function dl(P,ee){const de=new st,Me=new AbortController,St=setTimeout(()=>{Me.abort(),Ao(de,"TestPingServer: timeout",!1,ee)},1e4);fetch(P,{signal:Me.signal}).then(Rt=>{clearTimeout(St),Rt.ok?Ao(de,"TestPingServer: ok",!0,ee):Ao(de,"TestPingServer: server error",!1,ee)}).catch(()=>{clearTimeout(St),Ao(de,"TestPingServer: error",!1,ee)})}function Ao(P,ee,de,Me,St){try{St&&(St.onload=null,St.onerror=null,St.onabort=null,St.ontimeout=null),Me(de)}catch{}}function ga(){this.g=new wn}function ss(P){this.i=P.Sb||null,this.h=P.ab||!1}x(ss,Ln),ss.prototype.g=function(){return new Wi(this.i,this.h)};function Wi(P,ee){wt.call(this),this.H=P,this.o=ee,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}x(Wi,wt),e=Wi.prototype,e.open=function(P,ee){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=P,this.D=ee,this.readyState=1,Yr(this)},e.send=function(P){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const ee={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};P&&(ee.body=P),(this.H||l).fetch(new Request(this.D,ee)).then(this.Pa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,hl(this)),this.readyState=0},e.Pa=function(P){if(this.g&&(this.l=P,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=P.headers,this.readyState=2,Yr(this)),this.g&&(this.readyState=3,Yr(this),this.g)))if(this.responseType==="arraybuffer")P.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in P){if(this.j=P.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Uc(this)}else P.text().then(this.Oa.bind(this),this.ga.bind(this))};function Uc(P){P.j.read().then(P.Ma.bind(P)).catch(P.ga.bind(P))}e.Ma=function(P){if(this.g){if(this.o&&P.value)this.response.push(P.value);else if(!this.o){var ee=P.value?P.value:new Uint8Array(0);(ee=this.B.decode(ee,{stream:!P.done}))&&(this.response=this.responseText+=ee)}P.done?hl(this):Yr(this),this.readyState==3&&Uc(this)}},e.Oa=function(P){this.g&&(this.response=this.responseText=P,hl(this))},e.Na=function(P){this.g&&(this.response=P,hl(this))},e.ga=function(){this.g&&hl(this)};function hl(P){P.readyState=4,P.l=null,P.j=null,P.B=null,Yr(P)}e.setRequestHeader=function(P,ee){this.A.append(P,ee)},e.getResponseHeader=function(P){return this.h&&this.h.get(P.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const P=[],ee=this.h.entries();for(var de=ee.next();!de.done;)de=de.value,P.push(de[0]+": "+de[1]),de=ee.next();return P.join(`\r
`)};function Yr(P){P.onreadystatechange&&P.onreadystatechange.call(P)}Object.defineProperty(Wi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(P){this.m=P?"include":"same-origin"}});function os(P){let ee="";return De(P,function(de,Me){ee+=Me,ee+=":",ee+=de,ee+=`\r
`}),ee}function bu(P,ee,de){e:{for(Me in de){var Me=!1;break e}Me=!0}Me||(de=os(de),typeof P=="string"?de!=null&&jn(de):er(P,ee,de))}function tr(P){wt.call(this),this.headers=new Map,this.L=P||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}x(tr,wt);var gr=/^https?$/i,fl=["POST","PUT"];e=tr.prototype,e.Fa=function(P){this.H=P},e.ea=function(P,ee,de,Me){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+P);ee=ee?ee.toUpperCase():"GET",this.D=P,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Kn.g(),this.g.onreadystatechange=T(p(this.Ca,this));try{this.B=!0,this.g.open(ee,String(P),!0),this.B=!1}catch(Rt){pc(this,Rt);return}if(P=de||"",de=new Map(this.headers),Me)if(Object.getPrototypeOf(Me)===Object.prototype)for(var St in Me)de.set(St,Me[St]);else if(typeof Me.keys=="function"&&typeof Me.get=="function")for(const Rt of Me.keys())de.set(Rt,Me.get(Rt));else throw Error("Unknown input type for opt_headers: "+String(Me));Me=Array.from(de.keys()).find(Rt=>Rt.toLowerCase()=="content-type"),St=l.FormData&&P instanceof l.FormData,!(Array.prototype.indexOf.call(fl,ee,void 0)>=0)||Me||St||de.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Rt,bn]of de)this.g.setRequestHeader(Rt,bn);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(P),this.v=!1}catch(Rt){pc(this,Rt)}};function pc(P,ee){P.h=!1,P.g&&(P.j=!0,P.g.abort(),P.j=!1),P.l=ee,P.o=5,ml(P),gc(P)}function ml(P){P.A||(P.A=!0,Lt(P,"complete"),Lt(P,"error"))}e.abort=function(P){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=P||7,Lt(this,"complete"),Lt(this,"abort"),gc(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),gc(this,!0)),tr.Z.N.call(this)},e.Ca=function(){this.u||(this.B||this.v||this.j?Vr(this):this.Xa())},e.Xa=function(){Vr(this)};function Vr(P){if(P.h&&typeof a<"u"){if(P.v&&Ko(P)==4)setTimeout(P.Ca.bind(P),0);else if(Lt(P,"readystatechange"),Ko(P)==4){P.h=!1;try{const Rt=P.ca();e:switch(Rt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var ee=!0;break e;default:ee=!1}var de;if(!(de=ee)){var Me;if(Me=Rt===0){let bn=String(P.D).match(Ot)[1]||null;!bn&&l.self&&l.self.location&&(bn=l.self.location.protocol.slice(0,-1)),Me=!gr.test(bn?bn.toLowerCase():"")}de=Me}if(de)Lt(P,"complete"),Lt(P,"success");else{P.o=6;try{var St=Ko(P)>2?P.g.statusText:""}catch{St=""}P.l=St+" ["+P.ca()+"]",ml(P)}}finally{gc(P)}}}}function gc(P,ee){if(P.g){P.m&&(clearTimeout(P.m),P.m=null);const de=P.g;P.g=null,ee||Lt(P,"ready");try{de.onreadystatechange=null}catch{}}}e.isActive=function(){return!!this.g};function Ko(P){return P.g?P.g.readyState:0}e.ca=function(){try{return Ko(this)>2?this.g.status:-1}catch{return-1}},e.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.La=function(P){if(this.g){var ee=this.g.responseText;return P&&ee.indexOf(P)==0&&(ee=ee.substring(P.length)),fn(ee)}};function Po(P){try{if(!P.g)return null;if("response"in P.g)return P.g.response;switch(P.F){case"":case"text":return P.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in P.g)return P.g.mozResponseArrayBuffer}return null}catch{return null}}function va(P){const ee={};P=(P.g&&Ko(P)>=2&&P.g.getAllResponseHeaders()||"").split(`\r
`);for(let Me=0;Me<P.length;Me++){if(te(P[Me]))continue;var de=ai(P[Me]);const St=de[0];if(de=de[1],typeof de!="string")continue;de=de.trim();const Rt=ee[St]||[];ee[St]=Rt,Rt.push(de)}Ge(ee,function(Me){return Me.join(", ")})}e.ya=function(){return this.o},e.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function _a(P,ee,de){return de&&de.internalChannelParams&&de.internalChannelParams[P]||ee}function pd(P){this.za=0,this.i=[],this.j=new st,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=_a("failFast",!1,P),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=_a("baseRetryDelayMs",5e3,P),this.Za=_a("retryDelaySeedMs",1e4,P),this.Ta=_a("forwardChannelMaxRetries",2,P),this.va=_a("forwardChannelRequestTimeoutMs",2e4,P),this.ma=P&&P.xmlHttpFactory||void 0,this.Ua=P&&P.Rb||void 0,this.Aa=P&&P.useFetchStreams||!1,this.O=void 0,this.L=P&&P.supportsCrossDomainXhr||!1,this.M="",this.h=new Eo(P&&P.concurrentRequestLimit),this.Ba=new ga,this.S=P&&P.fastHandshake||!1,this.R=P&&P.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=P&&P.Pb||!1,P&&P.ua&&this.j.ua(),P&&P.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&P&&P.detectBufferingProxy||!1,this.ia=void 0,P&&P.longPollingTimeout&&P.longPollingTimeout>0&&(this.ia=P.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}e=pd.prototype,e.ka=8,e.I=1,e.connect=function(P,ee,de,Me){_e(0),this.W=P,this.H=ee||{},de&&Me!==void 0&&(this.H.OSID=de,this.H.OAID=Me),this.F=this.X,this.J=Wc(this,null,this.W),Ul(this)};function Ya(P){if(Mo(P),P.I==3){var ee=P.V++,de=Yi(P.J);if(er(de,"SID",P.M),er(de,"RID",ee),er(de,"TYPE","terminate"),ba(P,de),ee=new Xn(P,P.j,ee),ee.M=2,ee.A=pa(Yi(de)),de=!1,l.navigator&&l.navigator.sendBeacon)try{de=l.navigator.sendBeacon(ee.A.toString(),"")}catch{}!de&&l.Image&&(new Image().src=ee.A,de=!0),de||(ee.g=Tu(ee.j,null),ee.g.ea(ee.A)),ee.F=Date.now(),Es(ee)}Ei(P)}function Xo(P){P.g&&(pl(P),P.g.cancel(),P.g=null)}function Mo(P){Xo(P),P.v&&(l.clearTimeout(P.v),P.v=null),gl(P),P.h.cancel(),P.m&&(typeof P.m=="number"&&l.clearTimeout(P.m),P.m=null)}function Ul(P){if(!Co(P.h)&&!P.m){P.m=!0;var ee=P.Ea;J||U(),re||(J(),re=!0),X.add(ee,P),P.D=0}}function Do(P,ee){return Xa(P.h)>=P.h.j-(P.m?1:0)?!1:P.m?(P.i=ee.G.concat(P.i),!0):P.I==1||P.I==2||P.D>=(P.Sa?0:P.Ta)?!1:(P.m=Ke(p(P.Ea,P,ee),wu(P,P.D)),P.D++,!0)}e.Ea=function(P){if(this.m)if(this.m=null,this.I==1){if(!P){this.V=Math.floor(Math.random()*1e5),P=this.V++;const St=new Xn(this,this.j,P);let Rt=this.o;if(this.U&&(Rt?(Rt=Ee(Rt),ot(Rt,this.U)):Rt=this.U),this.u!==null||this.R||(St.J=Rt,Rt=null),this.S)e:{for(var ee=0,de=0;de<this.i.length;de++){t:{var Me=this.i[de];if("__data__"in Me.map&&(Me=Me.map.__data__,typeof Me=="string")){Me=Me.length;break t}Me=void 0}if(Me===void 0)break;if(ee+=Me,ee>4096){ee=de;break e}if(ee===4096||de===this.i.length-1){ee=de+1;break e}}ee=1e3}else ee=1e3;ee=Yo(this,St,ee),de=Yi(this.J),er(de,"RID",P),er(de,"CVER",22),this.G&&er(de,"X-HTTP-Session-Id",this.G),ba(this,de),Rt&&(this.R?ee="headers="+jn(os(Rt))+"&"+ee:this.u&&bu(de,this.u,Rt)),Go(this.h,St),this.Ra&&er(de,"TYPE","init"),this.S?(er(de,"$req",ee),er(de,"SID","null"),St.U=!0,Tr(St,de,null)):Tr(St,de,ee),this.I=2}}else this.I==3&&(P?ya(this,P):this.i.length==0||Co(this.h)||ya(this))};function ya(P,ee){var de;ee?de=ee.l:de=P.V++;const Me=Yi(P.J);er(Me,"SID",P.M),er(Me,"RID",de),er(Me,"AID",P.K),ba(P,Me),P.u&&P.o&&bu(Me,P.u,P.o),de=new Xn(P,P.j,de,P.D+1),P.u===null&&(de.J=P.o),ee&&(P.i=ee.G.concat(P.i)),ee=Yo(P,de,1e3),de.H=Math.round(P.va*.5)+Math.round(P.va*.5*Math.random()),Go(P.h,de),Tr(de,Me,ee)}function ba(P,ee){P.H&&De(P.H,function(de,Me){er(ee,Me,de)}),P.l&&De({},function(de,Me){er(ee,Me,de)})}function Yo(P,ee,de){de=Math.min(P.i.length,de);const Me=P.l?p(P.l.Ka,P.l,P):null;e:{var St=P.i;let di=-1;for(;;){const Lr=["count="+de];di==-1?de>0?(di=St[0].g,Lr.push("ofs="+di)):di=0:Lr.push("ofs="+di);let ki=!0;for(let sr=0;sr<de;sr++){var Rt=St[sr].g;const Qn=St[sr].map;if(Rt-=di,Rt<0)di=Math.max(0,St[sr].g-100),ki=!1;else try{Rt="req"+Rt+"_"||"";try{var bn=Qn instanceof Map?Qn:Object.entries(Qn);for(const[Ys,Ja]of bn){let xa=Ja;h(Ja)&&(xa=Ut(Ja)),Lr.push(Rt+Ys+"="+encodeURIComponent(xa))}}catch(Ys){throw Lr.push(Rt+"type="+encodeURIComponent("_badmap")),Ys}}catch{Me&&Me(Qn)}}if(ki){bn=Lr.join("&");break e}}bn=void 0}return P=P.i.splice(0,de),ee.G=P,bn}function vc(P){if(!P.g&&!P.v){P.Y=1;var ee=P.Da;J||U(),re||(J(),re=!0),X.add(ee,P),P.A=0}}function Za(P){return P.g||P.v||P.A>=3?!1:(P.Y++,P.v=Ke(p(P.Da,P),wu(P,P.A)),P.A++,!0)}e.Da=function(){if(this.v=null,jc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var P=4*this.T;this.j.info("BP detection timer enabled: "+P),this.B=Ke(p(this.Wa,this),P)}},e.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,_e(10),Xo(this),jc(this))};function pl(P){P.B!=null&&(l.clearTimeout(P.B),P.B=null)}function jc(P){P.g=new Xn(P,P.j,"rpc",P.Y),P.u===null&&(P.g.J=P.o),P.g.P=0;var ee=Yi(P.na);er(ee,"RID","rpc"),er(ee,"SID",P.M),er(ee,"AID",P.K),er(ee,"CI",P.F?"0":"1"),!P.F&&P.ia&&er(ee,"TO",P.ia),er(ee,"TYPE","xmlhttp"),ba(P,ee),P.u&&P.o&&bu(ee,P.u,P.o),P.O&&(P.g.H=P.O);var de=P.g;P=P.ba,de.M=1,de.A=pa(Yi(ee)),de.u=null,de.R=!0,Wo(de,P)}e.Va=function(){this.C!=null&&(this.C=null,Xo(this),Za(this),_e(19))};function gl(P){P.C!=null&&(l.clearTimeout(P.C),P.C=null)}function xu(P,ee){var de=null;if(P.g==ee){gl(P),pl(P),P.g=null;var Me=2}else if(fc(P.h,ee))de=ee.G,ko(P.h,ee),Me=1;else return;if(P.I!=0){if(ee.o)if(Me==1){de=ee.u?ee.u.length:0,ee=Date.now()-ee.F;var St=P.D;Me=So(),Lt(Me,new Fe(Me,de)),Ul(P)}else vc(P);else if(St=ee.m,St==3||St==0&&ee.X>0||!(Me==1&&Do(P,ee)||Me==2&&Za(P)))switch(de&&de.length>0&&(ee=P.h,ee.i=ee.i.concat(de)),St){case 1:co(P,5);break;case 4:co(P,10);break;case 3:co(P,6);break;default:co(P,2)}}}function wu(P,ee){let de=P.Qa+Math.floor(Math.random()*P.Za);return P.isActive()||(de*=2),de*ee}function co(P,ee){if(P.j.info("Error code "+ee),ee==2){var de=p(P.bb,P),Me=P.Ua;const St=!Me;Me=new Ui(Me||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Nl(Me,"https"),pa(Me),St?Io(Me.toString(),de):dl(Me.toString(),de)}else _e(2);P.I=0,P.l&&P.l.pa(ee),Ei(P),Mo(P)}e.bb=function(P){P?(this.j.info("Successfully pinged google.com"),_e(2)):(this.j.info("Failed to ping google.com"),_e(1))};function Ei(P){if(P.I=0,P.ja=[],P.l){const ee=zl(P.h);(ee.length!=0||P.i.length!=0)&&(A(P.ja,ee),A(P.ja,P.i),P.h.i.length=0,k(P.i),P.i.length=0),P.l.oa()}}function Wc(P,ee,de){var Me=de instanceof Ui?Yi(de):new Ui(de);if(Me.g!="")ee&&(Me.g=ee+"."+Me.g),Ns(Me,Me.u);else{var St=l.location;Me=St.protocol,ee=ee?ee+"."+St.hostname:St.hostname,St=+St.port;const Rt=new Ui(null);Me&&Nl(Rt,Me),ee&&(Rt.g=ee),St&&Ns(Rt,St),de&&(Rt.h=de),Me=Rt}return de=P.G,ee=P.wa,de&&ee&&er(Me,de,ee),er(Me,"VER",P.ka),ba(P,Me),Me}function Tu(P,ee,de){if(ee&&!P.L)throw Error("Can't create secondary domain capable XhrIo object.");return ee=P.Aa&&!P.ma?new tr(new ss({ab:de})):new tr(P.ma),ee.Fa(P.L),ee}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function gd(){}e=gd.prototype,e.ra=function(){},e.qa=function(){},e.pa=function(){},e.oa=function(){},e.isActive=function(){return!0},e.Ka=function(){};function vl(){}vl.prototype.g=function(P,ee){return new Us(P,ee)};function Us(P,ee){wt.call(this),this.g=new pd(ee),this.l=P,this.h=ee&&ee.messageUrlParams||null,P=ee&&ee.messageHeaders||null,ee&&ee.clientProtocolHeaderRequired&&(P?P["X-Client-Protocol"]="webchannel":P={"X-Client-Protocol":"webchannel"}),this.g.o=P,P=ee&&ee.initMessageHeaders||null,ee&&ee.messageContentType&&(P?P["X-WebChannel-Content-Type"]=ee.messageContentType:P={"X-WebChannel-Content-Type":ee.messageContentType}),ee&&ee.sa&&(P?P["X-WebChannel-Client-Profile"]=ee.sa:P={"X-WebChannel-Client-Profile":ee.sa}),this.g.U=P,(P=ee&&ee.Qb)&&!te(P)&&(this.g.u=P),this.A=ee&&ee.supportsCrossDomainXhr||!1,this.v=ee&&ee.sendRawJson||!1,(ee=ee&&ee.httpSessionIdParam)&&!te(ee)&&(this.g.G=ee,P=this.h,P!==null&&ee in P&&(P=this.h,ee in P&&delete P[ee])),this.j=new Zo(this)}x(Us,wt),Us.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Us.prototype.close=function(){Ya(this.g)},Us.prototype.o=function(P){var ee=this.g;if(typeof P=="string"){var de={};de.__data__=P,P=de}else this.v&&(de={},de.__data__=Ut(P),P=de);ee.i.push(new Ka(ee.Ya++,P)),ee.I==3&&Ul(ee)},Us.prototype.N=function(){this.g.l=null,delete this.j,Ya(this.g),delete this.g,Us.Z.N.call(this)};function Hc(P){Ss.call(this),P.__headers__&&(this.headers=P.__headers__,this.statusCode=P.__status__,delete P.__headers__,delete P.__status__);var ee=P.__sm__;if(ee){e:{for(const de in ee){P=de;break e}P=void 0}(this.i=P)&&(P=this.i,ee=ee!==null&&P in ee?ee[P]:void 0),this.data=ee}else this.data=P}x(Hc,Ss);function uo(){rr.call(this),this.status=1}x(uo,rr);function Zo(P){this.g=P}x(Zo,gd),Zo.prototype.ra=function(){Lt(this.g,"a")},Zo.prototype.qa=function(P){Lt(this.g,new Hc(P))},Zo.prototype.pa=function(P){Lt(this.g,new uo)},Zo.prototype.oa=function(){Lt(this.g,"b")},vl.prototype.createWebChannel=vl.prototype.g,Us.prototype.send=Us.prototype.o,Us.prototype.open=Us.prototype.m,Us.prototype.close=Us.prototype.close,WF=function(){return new vl},jF=function(){return So()},UF=wr,dk={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},dn.NO_ERROR=0,dn.TIMEOUT=8,dn.HTTP_ERROR=6,T1=dn,rn.COMPLETE="complete",$F=rn,Ci.EventType=xr,xr.OPEN="a",xr.CLOSE="b",xr.ERROR="c",xr.MESSAGE="d",wt.prototype.listen=wt.prototype.J,zy=Ci,tr.prototype.listenOnce=tr.prototype.K,tr.prototype.getLastError=tr.prototype.Ha,tr.prototype.getLastErrorCode=tr.prototype.ya,tr.prototype.getStatus=tr.prototype.ca,tr.prototype.getResponseJson=tr.prototype.La,tr.prototype.getResponseText=tr.prototype.la,tr.prototype.send=tr.prototype.ea,tr.prototype.setWithCredentials=tr.prototype.Fa,NF=tr}).apply(typeof zx<"u"?zx:typeof self<"u"?self:typeof window<"u"?window:{});const MR="@firebase/firestore",DR="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Da.UNAUTHENTICATED=new Da(null),Da.GOOGLE_CREDENTIALS=new Da("google-credentials-uid"),Da.FIRST_PARTY=new Da("first-party-uid"),Da.MOCK_USER=new Da("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let __="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Up=new uA("@firebase/firestore");function hv(){return Up.logLevel}function On(e,...t){if(Up.logLevel<=Fi.DEBUG){const n=t.map(wA);Up.debug(`Firestore (${__}): ${e}`,...n)}}function yh(e,...t){if(Up.logLevel<=Fi.ERROR){const n=t.map(wA);Up.error(`Firestore (${__}): ${e}`,...n)}}function Kv(e,...t){if(Up.logLevel<=Fi.WARN){const n=t.map(wA);Up.warn(`Firestore (${__}): ${e}`,...n)}}function wA(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fi(e,t,n){let i="Unexpected state";typeof t=="string"?i=t:n=t,HF(e,i,n)}function HF(e,t,n){let i=`FIRESTORE (${__}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw yh(i),new Error(i)}function kr(e,t,n,i){let r="Unexpected state";typeof n=="string"?r=n:i=n,e||HF(t,r,i)}function Ti(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mn={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Wn extends Eh{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{constructor(){this.promise=new Promise(((t,n)=>{this.resolve=t,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GF{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class CZ{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable((()=>n(Da.UNAUTHENTICATED)))}shutdown(){}}class kZ{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class IZ{constructor(t){this.t=t,this.currentUser=Da.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){kr(this.o===void 0,42304);let i=this.i;const r=s=>this.i!==i?(i=this.i,n(s)):Promise.resolve();let a=new $f;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new $f,t.enqueueRetryable((()=>r(this.currentUser)))};const l=()=>{const s=a;t.enqueueRetryable((async()=>{await s.promise,await r(this.currentUser)}))},h=s=>{On("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=s,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((s=>h(s))),setTimeout((()=>{if(!this.auth){const s=this.t.getImmediate({optional:!0});s?h(s):(On("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new $f)}}),0),l()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((i=>this.i!==t?(On("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(kr(typeof i.accessToken=="string",31837,{l:i}),new GF(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return kr(t===null||typeof t=="string",2055,{h:t}),new Da(t)}}class AZ{constructor(t,n,i){this.P=t,this.T=n,this.I=i,this.type="FirstParty",this.user=Da.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class PZ{constructor(t,n,i){this.P=t,this.T=n,this.I=i}getToken(){return Promise.resolve(new AZ(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable((()=>n(Da.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class LR{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class MZ{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Dc(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){kr(this.o===void 0,3512);const i=a=>{a.error!=null&&On("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.m;return this.m=a.token,On("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(a.token):Promise.resolve()};this.o=a=>{t.enqueueRetryable((()=>i(a)))};const r=a=>{On("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>r(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?r(a):On("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new LR(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((n=>n?(kr(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new LR(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DZ(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let i=0;i<e;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=DZ(40);for(let a=0;a<r.length;++a)i.length<20&&r[a]<n&&(i+=t.charAt(r[a]%62))}return i}}function zi(e,t){return e<t?-1:e>t?1:0}function hk(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const r=e.charAt(i),a=t.charAt(i);if(r!==a)return ZE(r)===ZE(a)?zi(r,a):ZE(r)?1:-1}return zi(e.length,t.length)}const LZ=55296,RZ=57343;function ZE(e){const t=e.charCodeAt(0);return t>=LZ&&t<=RZ}function Xv(e,t,n){return e.length===t.length&&e.every(((i,r)=>n(i,t[r])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RR="__name__";class Hu{constructor(t,n,i){n===void 0?n=0:n>t.length&&fi(637,{offset:n,range:t.length}),i===void 0?i=t.length-n:i>t.length-n&&fi(1746,{length:i,range:t.length-n}),this.segments=t,this.offset=n,this.len=i}get length(){return this.len}isEqual(t){return Hu.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof Hu?t.forEach((i=>{n.push(i)})):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,i=this.limit();n<i;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const i=Math.min(t.length,n.length);for(let r=0;r<i;r++){const a=Hu.compareSegments(t.get(r),n.get(r));if(a!==0)return a}return zi(t.length,n.length)}static compareSegments(t,n){const i=Hu.isNumericId(t),r=Hu.isNumericId(n);return i&&!r?-1:!i&&r?1:i&&r?Hu.extractNumericId(t).compare(Hu.extractNumericId(n)):hk(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Nf.fromString(t.substring(4,t.length-2))}}class ys extends Hu{construct(t,n,i){return new ys(t,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const i of t){if(i.indexOf("//")>=0)throw new Wn(mn.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter((r=>r.length>0)))}return new ys(n)}static emptyPath(){return new ys([])}}const OZ=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class oa extends Hu{construct(t,n,i){return new oa(t,n,i)}static isValidIdentifier(t){return OZ.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),oa.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===RR}static keyField(){return new oa([RR])}static fromServerFormat(t){const n=[];let i="",r=0;const a=()=>{if(i.length===0)throw new Wn(mn.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let l=!1;for(;r<t.length;){const h=t[r];if(h==="\\"){if(r+1===t.length)throw new Wn(mn.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const s=t[r+1];if(s!=="\\"&&s!=="."&&s!=="`")throw new Wn(mn.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=s,r+=2}else h==="`"?(l=!l,r++):h!=="."||l?(i+=h,r++):(a(),r++)}if(a(),l)throw new Wn(mn.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new oa(n)}static emptyPath(){return new oa([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(t){this.path=t}static fromPath(t){return new ei(ys.fromString(t))}static fromName(t){return new ei(ys.fromString(t).popFirst(5))}static empty(){return new ei(ys.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&ys.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return ys.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new ei(new ys(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VZ(e,t,n){if(!n)throw new Wn(mn.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function BZ(e,t,n,i){if(t===!0&&i===!0)throw new Wn(mn.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function OR(e){if(!ei.isDocumentKey(e))throw new Wn(mn.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function qF(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function SA(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=(function(i){return i.constructor?i.constructor.name:null})(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":fi(12329,{type:typeof e})}function Kf(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Wn(mn.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=SA(e);throw new Wn(mn.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oo(e,t){const n={typeString:e};return t&&(n.value=t),n}function xb(e,t){if(!qF(e))throw new Wn(mn.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in t)if(t[i]){const r=t[i].typeString,a="value"in t[i]?{value:t[i].value}:void 0;if(!(i in e)){n=`JSON missing required field: '${i}'`;break}const l=e[i];if(r&&typeof l!==r){n=`JSON field '${i}' must be a ${r}.`;break}if(a!==void 0&&l!==a.value){n=`Expected '${i}' field to equal '${a.value}'`;break}}if(n)throw new Wn(mn.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VR=-62135596800,BR=1e6;class Jr{static now(){return Jr.fromMillis(Date.now())}static fromDate(t){return Jr.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),i=Math.floor((t-1e3*n)*BR);return new Jr(n,i)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new Wn(mn.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Wn(mn.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<VR)throw new Wn(mn.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Wn(mn.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/BR}_compareTo(t){return this.seconds===t.seconds?zi(this.nanoseconds,t.nanoseconds):zi(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Jr._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(xb(t,Jr._jsonSchema))return new Jr(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-VR;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Jr._jsonSchemaVersion="firestore/timestamp/1.0",Jr._jsonSchema={type:oo("string",Jr._jsonSchemaVersion),seconds:oo("number"),nanoseconds:oo("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{static fromTimestamp(t){return new yi(t)}static min(){return new yi(new Jr(0,0))}static max(){return new yi(new Jr(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R0=-1;function FZ(e,t){const n=e.toTimestamp().seconds,i=e.toTimestamp().nanoseconds+1,r=yi.fromTimestamp(i===1e9?new Jr(n+1,0):new Jr(n,i));return new Xf(r,ei.empty(),t)}function zZ(e){return new Xf(e.readTime,e.key,R0)}class Xf{constructor(t,n,i){this.readTime=t,this.documentKey=n,this.largestBatchId=i}static min(){return new Xf(yi.min(),ei.empty(),R0)}static max(){return new Xf(yi.max(),ei.empty(),R0)}}function NZ(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=ei.comparator(e.documentKey,t.documentKey),n!==0?n:zi(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $Z="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class UZ{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y_(e){if(e.code!==mn.FAILED_PRECONDITION||e.message!==$Z)throw e;On("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&fi(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new ln(((i,r)=>{this.nextCallback=a=>{this.wrapSuccess(t,a).next(i,r)},this.catchCallback=a=>{this.wrapFailure(n,a).next(i,r)}}))}toPromise(){return new Promise(((t,n)=>{this.next(t,n)}))}wrapUserFunction(t){try{const n=t();return n instanceof ln?n:ln.resolve(n)}catch(n){return ln.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction((()=>t(n))):ln.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction((()=>t(n))):ln.reject(n)}static resolve(t){return new ln(((n,i)=>{n(t)}))}static reject(t){return new ln(((n,i)=>{i(t)}))}static waitFor(t){return new ln(((n,i)=>{let r=0,a=0,l=!1;t.forEach((h=>{++r,h.next((()=>{++a,l&&a===r&&n()}),(s=>i(s)))})),l=!0,a===r&&n()}))}static or(t){let n=ln.resolve(!1);for(const i of t)n=n.next((r=>r?ln.resolve(r):i()));return n}static forEach(t,n){const i=[];return t.forEach(((r,a)=>{i.push(n.call(this,r,a))})),this.waitFor(i)}static mapArray(t,n){return new ln(((i,r)=>{const a=t.length,l=new Array(a);let h=0;for(let s=0;s<a;s++){const p=s;n(t[p]).next((_=>{l[p]=_,++h,h===a&&i(l)}),(_=>r(_)))}}))}static doWhile(t,n){return new ln(((i,r)=>{const a=()=>{t()===!0?n().next((()=>{a()}),r):i()};a()}))}}function jZ(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function b_(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}fT.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EA=-1;function mT(e){return e==null}function fw(e){return e===0&&1/e==-1/0}function WZ(e){return typeof e=="number"&&Number.isInteger(e)&&!fw(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KF="";function HZ(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=FR(t)),t=GZ(e.get(n),t);return FR(t)}function GZ(e,t){let n=t;const i=e.length;for(let r=0;r<i;r++){const a=e.charAt(r);switch(a){case"\0":n+="";break;case KF:n+="";break;default:n+=a}}return n}function FR(e){return e+KF+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zR(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function cm(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function XF(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(t,n){this.comparator=t,this.root=n||ia.EMPTY}insert(t,n){return new xs(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,ia.BLACK,null,null))}remove(t){return new xs(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ia.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(t){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((n,i)=>(t(n,i),!1)))}toString(){const t=[];return this.inorderTraversal(((n,i)=>(t.push(`${n}:${i}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Nx(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Nx(this.root,t,this.comparator,!1)}getReverseIterator(){return new Nx(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Nx(this.root,t,this.comparator,!0)}}class Nx{constructor(t,n,i,r){this.isReverse=r,this.nodeStack=[];let a=1;for(;!t.isEmpty();)if(a=n?i(t.key,n):1,n&&r&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(a===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class ia{constructor(t,n,i,r,a){this.key=t,this.value=n,this.color=i??ia.RED,this.left=r??ia.EMPTY,this.right=a??ia.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,i,r,a){return new ia(t??this.key,n??this.value,i??this.color,r??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,i){let r=this;const a=i(t,r.key);return r=a<0?r.copy(null,null,null,r.left.insert(t,n,i),null):a===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(t,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ia.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let i,r=this;if(n(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(t,r.key)===0){if(r.right.isEmpty())return ia.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,ia.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,ia.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw fi(43730,{key:this.key,value:this.value});if(this.right.isRed())throw fi(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw fi(27949);return t+(this.isRed()?0:1)}}ia.EMPTY=null,ia.RED=!0,ia.BLACK=!1;ia.EMPTY=new class{constructor(){this.size=0}get key(){throw fi(57766)}get value(){throw fi(16141)}get color(){throw fi(16727)}get left(){throw fi(29726)}get right(){throw fi(36894)}copy(t,n,i,r,a){return this}insert(t,n,i){return new ia(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(t){this.comparator=t,this.data=new xs(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((n,i)=>(t(n),!1)))}forEachInRange(t,n){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;n(r.key)}}forEachWhile(t,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new NR(this.data.getIterator())}getIteratorFrom(t){return new NR(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach((i=>{n=n.add(i)})),n}isEqual(t){if(!(t instanceof yo)||this.size!==t.size)return!1;const n=this.data.getIterator(),i=t.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,a=i.getNext().key;if(this.comparator(r,a)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((n=>{t.push(n)})),t}toString(){const t=[];return this.forEach((n=>t.push(n))),"SortedSet("+t.toString()+")"}copy(t){const n=new yo(this.comparator);return n.data=t,n}}class NR{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic{constructor(t){this.fields=t,t.sort(oa.comparator)}static empty(){return new ic([])}unionWith(t){let n=new yo(oa.comparator);for(const i of this.fields)n=n.add(i);for(const i of t)n=n.add(i);return new ic(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Xv(this.fields,t.fields,((n,i)=>n.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YF extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(t){this.binaryString=t}static fromBase64String(t){const n=(function(r){try{return atob(r)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new YF("Invalid base64 string: "+a):a}})(t);return new ua(n)}static fromUint8Array(t){const n=(function(r){let a="";for(let l=0;l<r.length;++l)a+=String.fromCharCode(r[l]);return a})(t);return new ua(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return zi(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}ua.EMPTY_BYTE_STRING=new ua("");const qZ=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yf(e){if(kr(!!e,39018),typeof e=="string"){let t=0;const n=qZ.exec(e);if(kr(!!n,46558,{timestamp:e}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}const i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Hs(e.seconds),nanos:Hs(e.nanos)}}function Hs(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function Zf(e){return typeof e=="string"?ua.fromBase64String(e):ua.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZF="server_timestamp",JF="__type__",QF="__previous_value__",ez="__local_write_time__";function CA(e){return(e?.mapValue?.fields||{})[JF]?.stringValue===ZF}function pT(e){const t=e.mapValue.fields[QF];return CA(t)?pT(t):t}function O0(e){const t=Yf(e.mapValue.fields[ez].timestampValue);return new Jr(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KZ{constructor(t,n,i,r,a,l,h,s,p,_){this.databaseId=t,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.longPollingOptions=s,this.useFetchStreams=p,this.isUsingEmulator=_}}const mw="(default)";class V0{constructor(t,n){this.projectId=t,this.database=n||mw}static empty(){return new V0("","")}get isDefaultDatabase(){return this.database===mw}isEqual(t){return t instanceof V0&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tz="__type__",XZ="__max__",$x={mapValue:{}},nz="__vector__",pw="value";function Jf(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?CA(e)?4:ZZ(e)?9007199254740991:YZ(e)?10:11:fi(28295,{value:e})}function od(e,t){if(e===t)return!0;const n=Jf(e);if(n!==Jf(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return O0(e).isEqual(O0(t));case 3:return(function(r,a){if(typeof r.timestampValue=="string"&&typeof a.timestampValue=="string"&&r.timestampValue.length===a.timestampValue.length)return r.timestampValue===a.timestampValue;const l=Yf(r.timestampValue),h=Yf(a.timestampValue);return l.seconds===h.seconds&&l.nanos===h.nanos})(e,t);case 5:return e.stringValue===t.stringValue;case 6:return(function(r,a){return Zf(r.bytesValue).isEqual(Zf(a.bytesValue))})(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return(function(r,a){return Hs(r.geoPointValue.latitude)===Hs(a.geoPointValue.latitude)&&Hs(r.geoPointValue.longitude)===Hs(a.geoPointValue.longitude)})(e,t);case 2:return(function(r,a){if("integerValue"in r&&"integerValue"in a)return Hs(r.integerValue)===Hs(a.integerValue);if("doubleValue"in r&&"doubleValue"in a){const l=Hs(r.doubleValue),h=Hs(a.doubleValue);return l===h?fw(l)===fw(h):isNaN(l)&&isNaN(h)}return!1})(e,t);case 9:return Xv(e.arrayValue.values||[],t.arrayValue.values||[],od);case 10:case 11:return(function(r,a){const l=r.mapValue.fields||{},h=a.mapValue.fields||{};if(zR(l)!==zR(h))return!1;for(const s in l)if(l.hasOwnProperty(s)&&(h[s]===void 0||!od(l[s],h[s])))return!1;return!0})(e,t);default:return fi(52216,{left:e})}}function B0(e,t){return(e.values||[]).find((n=>od(n,t)))!==void 0}function Yv(e,t){if(e===t)return 0;const n=Jf(e),i=Jf(t);if(n!==i)return zi(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return zi(e.booleanValue,t.booleanValue);case 2:return(function(a,l){const h=Hs(a.integerValue||a.doubleValue),s=Hs(l.integerValue||l.doubleValue);return h<s?-1:h>s?1:h===s?0:isNaN(h)?isNaN(s)?0:-1:1})(e,t);case 3:return $R(e.timestampValue,t.timestampValue);case 4:return $R(O0(e),O0(t));case 5:return hk(e.stringValue,t.stringValue);case 6:return(function(a,l){const h=Zf(a),s=Zf(l);return h.compareTo(s)})(e.bytesValue,t.bytesValue);case 7:return(function(a,l){const h=a.split("/"),s=l.split("/");for(let p=0;p<h.length&&p<s.length;p++){const _=zi(h[p],s[p]);if(_!==0)return _}return zi(h.length,s.length)})(e.referenceValue,t.referenceValue);case 8:return(function(a,l){const h=zi(Hs(a.latitude),Hs(l.latitude));return h!==0?h:zi(Hs(a.longitude),Hs(l.longitude))})(e.geoPointValue,t.geoPointValue);case 9:return UR(e.arrayValue,t.arrayValue);case 10:return(function(a,l){const h=a.fields||{},s=l.fields||{},p=h[pw]?.arrayValue,_=s[pw]?.arrayValue,x=zi(p?.values?.length||0,_?.values?.length||0);return x!==0?x:UR(p,_)})(e.mapValue,t.mapValue);case 11:return(function(a,l){if(a===$x.mapValue&&l===$x.mapValue)return 0;if(a===$x.mapValue)return 1;if(l===$x.mapValue)return-1;const h=a.fields||{},s=Object.keys(h),p=l.fields||{},_=Object.keys(p);s.sort(),_.sort();for(let x=0;x<s.length&&x<_.length;++x){const T=hk(s[x],_[x]);if(T!==0)return T;const k=Yv(h[s[x]],p[_[x]]);if(k!==0)return k}return zi(s.length,_.length)})(e.mapValue,t.mapValue);default:throw fi(23264,{he:n})}}function $R(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return zi(e,t);const n=Yf(e),i=Yf(t),r=zi(n.seconds,i.seconds);return r!==0?r:zi(n.nanos,i.nanos)}function UR(e,t){const n=e.values||[],i=t.values||[];for(let r=0;r<n.length&&r<i.length;++r){const a=Yv(n[r],i[r]);if(a)return a}return zi(n.length,i.length)}function Zv(e){return fk(e)}function fk(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?(function(n){const i=Yf(n);return`time(${i.seconds},${i.nanos})`})(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?(function(n){return Zf(n).toBase64()})(e.bytesValue):"referenceValue"in e?(function(n){return ei.fromName(n).toString()})(e.referenceValue):"geoPointValue"in e?(function(n){return`geo(${n.latitude},${n.longitude})`})(e.geoPointValue):"arrayValue"in e?(function(n){let i="[",r=!0;for(const a of n.values||[])r?r=!1:i+=",",i+=fk(a);return i+"]"})(e.arrayValue):"mapValue"in e?(function(n){const i=Object.keys(n.fields||{}).sort();let r="{",a=!0;for(const l of i)a?a=!1:r+=",",r+=`${l}:${fk(n.fields[l])}`;return r+"}"})(e.mapValue):fi(61005,{value:e})}function S1(e){switch(Jf(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=pT(e);return t?16+S1(t):16;case 5:return 2*e.stringValue.length;case 6:return Zf(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((r,a)=>r+S1(a)),0)})(e.arrayValue);case 10:case 11:return(function(i){let r=0;return cm(i.fields,((a,l)=>{r+=a.length+S1(l)})),r})(e.mapValue);default:throw fi(13486,{value:e})}}function mk(e){return!!e&&"integerValue"in e}function kA(e){return!!e&&"arrayValue"in e}function jR(e){return!!e&&"nullValue"in e}function WR(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function E1(e){return!!e&&"mapValue"in e}function YZ(e){return(e?.mapValue?.fields||{})[tz]?.stringValue===nz}function a0(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return cm(e.mapValue.fields,((n,i)=>t.mapValue.fields[n]=a0(i))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=a0(e.arrayValue.values[n]);return t}return{...e}}function ZZ(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===XZ}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(t){this.value=t}static empty(){return new Il({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let i=0;i<t.length-1;++i)if(n=(n.mapValue.fields||{})[t.get(i)],!E1(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=a0(n)}setAll(t){let n=oa.emptyPath(),i={},r=[];t.forEach(((l,h)=>{if(!n.isImmediateParentOf(h)){const s=this.getFieldsMap(n);this.applyChanges(s,i,r),i={},r=[],n=h.popLast()}l?i[h.lastSegment()]=a0(l):r.push(h.lastSegment())}));const a=this.getFieldsMap(n);this.applyChanges(a,i,r)}delete(t){const n=this.field(t.popLast());E1(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return od(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=n.mapValue.fields[t.get(i)];E1(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[t.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(t,n,i){cm(n,((r,a)=>t[r]=a));for(const r of i)delete t[r]}clone(){return new Il(a0(this.value))}}function iz(e){const t=[];return cm(e.fields,((n,i)=>{const r=new oa([n]);if(E1(i)){const a=iz(i.mapValue).fields;if(a.length===0)t.push(r);else for(const l of a)t.push(r.child(l))}else t.push(r)})),new ic(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(t,n,i,r,a,l,h){this.key=t,this.documentType=n,this.version=i,this.readTime=r,this.createTime=a,this.data=l,this.documentState=h}static newInvalidDocument(t){return new Oa(t,0,yi.min(),yi.min(),yi.min(),Il.empty(),0)}static newFoundDocument(t,n,i,r){return new Oa(t,1,n,yi.min(),i,r,0)}static newNoDocument(t,n){return new Oa(t,2,n,yi.min(),yi.min(),Il.empty(),0)}static newUnknownDocument(t,n){return new Oa(t,3,n,yi.min(),yi.min(),Il.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(yi.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Il.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Il.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=yi.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Oa&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Oa(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gw{constructor(t,n){this.position=t,this.inclusive=n}}function HR(e,t,n){let i=0;for(let r=0;r<e.position.length;r++){const a=t[r],l=e.position[r];if(a.field.isKeyField()?i=ei.comparator(ei.fromName(l.referenceValue),n.key):i=Yv(l,n.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function GR(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!od(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vw{constructor(t,n="asc"){this.field=t,this.dir=n}}function JZ(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rz{}class go extends rz{constructor(t,n,i){super(),this.field=t,this.op=n,this.value=i}static create(t,n,i){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,i):new eJ(t,n,i):n==="array-contains"?new iJ(t,i):n==="in"?new rJ(t,i):n==="not-in"?new sJ(t,i):n==="array-contains-any"?new oJ(t,i):new go(t,n,i)}static createKeyFieldInFilter(t,n,i){return n==="in"?new tJ(t,i):new nJ(t,i)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Yv(n,this.value)):n!==null&&Jf(this.value)===Jf(n)&&this.matchesComparison(Yv(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return fi(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ad extends rz{constructor(t,n){super(),this.filters=t,this.op=n,this.Pe=null}static create(t,n){return new ad(t,n)}matches(t){return sz(this)?this.filters.find((n=>!n.matches(t)))===void 0:this.filters.find((n=>n.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,n)=>t.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function sz(e){return e.op==="and"}function oz(e){return QZ(e)&&sz(e)}function QZ(e){for(const t of e.filters)if(t instanceof ad)return!1;return!0}function pk(e){if(e instanceof go)return e.field.canonicalString()+e.op.toString()+Zv(e.value);if(oz(e))return e.filters.map((t=>pk(t))).join(",");{const t=e.filters.map((n=>pk(n))).join(",");return`${e.op}(${t})`}}function az(e,t){return e instanceof go?(function(i,r){return r instanceof go&&i.op===r.op&&i.field.isEqual(r.field)&&od(i.value,r.value)})(e,t):e instanceof ad?(function(i,r){return r instanceof ad&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce(((a,l,h)=>a&&az(l,r.filters[h])),!0):!1})(e,t):void fi(19439)}function lz(e){return e instanceof go?(function(n){return`${n.field.canonicalString()} ${n.op} ${Zv(n.value)}`})(e):e instanceof ad?(function(n){return n.op.toString()+" {"+n.getFilters().map(lz).join(" ,")+"}"})(e):"Filter"}class eJ extends go{constructor(t,n,i){super(t,n,i),this.key=ei.fromName(i.referenceValue)}matches(t){const n=ei.comparator(t.key,this.key);return this.matchesComparison(n)}}class tJ extends go{constructor(t,n){super(t,"in",n),this.keys=cz("in",n)}matches(t){return this.keys.some((n=>n.isEqual(t.key)))}}class nJ extends go{constructor(t,n){super(t,"not-in",n),this.keys=cz("not-in",n)}matches(t){return!this.keys.some((n=>n.isEqual(t.key)))}}function cz(e,t){return(t.arrayValue?.values||[]).map((n=>ei.fromName(n.referenceValue)))}class iJ extends go{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return kA(n)&&B0(n.arrayValue,this.value)}}class rJ extends go{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&B0(this.value.arrayValue,n)}}class sJ extends go{constructor(t,n){super(t,"not-in",n)}matches(t){if(B0(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!B0(this.value.arrayValue,n)}}class oJ extends go{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!kA(n)||!n.arrayValue.values)&&n.arrayValue.values.some((i=>B0(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aJ{constructor(t,n=null,i=[],r=[],a=null,l=null,h=null){this.path=t,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=a,this.startAt=l,this.endAt=h,this.Te=null}}function qR(e,t=null,n=[],i=[],r=null,a=null,l=null){return new aJ(e,t,n,i,r,a,l)}function IA(e){const t=Ti(e);if(t.Te===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((i=>pk(i))).join(","),n+="|ob:",n+=t.orderBy.map((i=>(function(a){return a.field.canonicalString()+a.dir})(i))).join(","),mT(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((i=>Zv(i))).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((i=>Zv(i))).join(",")),t.Te=n}return t.Te}function AA(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!JZ(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!az(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!GR(e.startAt,t.startAt)&&GR(e.endAt,t.endAt)}function gk(e){return ei.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT{constructor(t,n=null,i=[],r=[],a=null,l="F",h=null,s=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=a,this.limitType=l,this.startAt=h,this.endAt=s,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function lJ(e,t,n,i,r,a,l,h){return new gT(e,t,n,i,r,a,l,h)}function PA(e){return new gT(e)}function KR(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function cJ(e){return e.collectionGroup!==null}function l0(e){const t=Ti(e);if(t.Ie===null){t.Ie=[];const n=new Set;for(const a of t.explicitOrderBy)t.Ie.push(a),n.add(a.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(l){let h=new yo(oa.comparator);return l.filters.forEach((s=>{s.getFlattenedFilters().forEach((p=>{p.isInequality()&&(h=h.add(p.field))}))})),h})(t).forEach((a=>{n.has(a.canonicalString())||a.isKeyField()||t.Ie.push(new vw(a,i))})),n.has(oa.keyField().canonicalString())||t.Ie.push(new vw(oa.keyField(),i))}return t.Ie}function Ju(e){const t=Ti(e);return t.Ee||(t.Ee=uJ(t,l0(e))),t.Ee}function uJ(e,t){if(e.limitType==="F")return qR(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((r=>{const a=r.dir==="desc"?"asc":"desc";return new vw(r.field,a)}));const n=e.endAt?new gw(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new gw(e.startAt.position,e.startAt.inclusive):null;return qR(e.path,e.collectionGroup,t,e.filters,e.limit,n,i)}}function vk(e,t,n){return new gT(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function vT(e,t){return AA(Ju(e),Ju(t))&&e.limitType===t.limitType}function uz(e){return`${IA(Ju(e))}|lt:${e.limitType}`}function fv(e){return`Query(target=${(function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map((r=>lz(r))).join(", ")}]`),mT(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map((r=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(r))).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map((r=>Zv(r))).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map((r=>Zv(r))).join(",")),`Target(${i})`})(Ju(e))}; limitType=${e.limitType})`}function _T(e,t){return t.isFoundDocument()&&(function(i,r){const a=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):ei.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)})(e,t)&&(function(i,r){for(const a of l0(i))if(!a.field.isKeyField()&&r.data.field(a.field)===null)return!1;return!0})(e,t)&&(function(i,r){for(const a of i.filters)if(!a.matches(r))return!1;return!0})(e,t)&&(function(i,r){return!(i.startAt&&!(function(l,h,s){const p=HR(l,h,s);return l.inclusive?p<=0:p<0})(i.startAt,l0(i),r)||i.endAt&&!(function(l,h,s){const p=HR(l,h,s);return l.inclusive?p>=0:p>0})(i.endAt,l0(i),r))})(e,t)}function dJ(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function dz(e){return(t,n)=>{let i=!1;for(const r of l0(e)){const a=hJ(r,t,n);if(a!==0)return a;i=i||r.field.isKeyField()}return 0}}function hJ(e,t,n){const i=e.field.isKeyField()?ei.comparator(t.key,n.key):(function(a,l,h){const s=l.data.field(a),p=h.data.field(a);return s!==null&&p!==null?Yv(s,p):fi(42886)})(e.field,t,n);switch(e.dir){case"asc":return i;case"desc":return-1*i;default:return fi(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i!==void 0){for(const[r,a]of i)if(this.equalsFn(r,t))return a}}has(t){return this.get(t)!==void 0}set(t,n){const i=this.mapKeyFn(t),r=this.inner[i];if(r===void 0)return this.inner[i]=[[t,n]],void this.innerSize++;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],t))return void(r[a]=[t,n]);r.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){cm(this.inner,((n,i)=>{for(const[r,a]of i)t(r,a)}))}isEmpty(){return XF(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fJ=new xs(ei.comparator);function bh(){return fJ}const hz=new xs(ei.comparator);function Ny(...e){let t=hz;for(const n of e)t=t.insert(n.key,n);return t}function fz(e){let t=hz;return e.forEach(((n,i)=>t=t.insert(n,i.overlayedDocument))),t}function vp(){return c0()}function mz(){return c0()}function c0(){return new ng((e=>e.toString()),((e,t)=>e.isEqual(t)))}const mJ=new xs(ei.comparator),pJ=new yo(ei.comparator);function Ni(...e){let t=pJ;for(const n of e)t=t.add(n);return t}const gJ=new yo(zi);function vJ(){return gJ}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MA(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:fw(t)?"-0":t}}function pz(e){return{integerValue:""+e}}function _J(e,t){return WZ(t)?pz(t):MA(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT{constructor(){this._=void 0}}function yJ(e,t,n){return e instanceof _w?(function(r,a){const l={fields:{[JF]:{stringValue:ZF},[ez]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return a&&CA(a)&&(a=pT(a)),a&&(l.fields[QF]=a),{mapValue:l}})(n,t):e instanceof Jv?vz(e,t):e instanceof F0?_z(e,t):(function(r,a){const l=gz(r,a),h=XR(l)+XR(r.Ae);return mk(l)&&mk(r.Ae)?pz(h):MA(r.serializer,h)})(e,t)}function bJ(e,t,n){return e instanceof Jv?vz(e,t):e instanceof F0?_z(e,t):n}function gz(e,t){return e instanceof yw?(function(i){return mk(i)||(function(a){return!!a&&"doubleValue"in a})(i)})(t)?t:{integerValue:0}:null}class _w extends yT{}class Jv extends yT{constructor(t){super(),this.elements=t}}function vz(e,t){const n=yz(t);for(const i of e.elements)n.some((r=>od(r,i)))||n.push(i);return{arrayValue:{values:n}}}class F0 extends yT{constructor(t){super(),this.elements=t}}function _z(e,t){let n=yz(t);for(const i of e.elements)n=n.filter((r=>!od(r,i)));return{arrayValue:{values:n}}}class yw extends yT{constructor(t,n){super(),this.serializer=t,this.Ae=n}}function XR(e){return Hs(e.integerValue||e.doubleValue)}function yz(e){return kA(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xJ{constructor(t,n){this.field=t,this.transform=n}}function wJ(e,t){return e.field.isEqual(t.field)&&(function(i,r){return i instanceof Jv&&r instanceof Jv||i instanceof F0&&r instanceof F0?Xv(i.elements,r.elements,od):i instanceof yw&&r instanceof yw?od(i.Ae,r.Ae):i instanceof _w&&r instanceof _w})(e.transform,t.transform)}class TJ{constructor(t,n){this.version=t,this.transformResults=n}}class hu{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new hu}static exists(t){return new hu(void 0,t)}static updateTime(t){return new hu(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function C1(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class bT{}function bz(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new DA(e.key,hu.none()):new wb(e.key,e.data,hu.none());{const n=e.data,i=Il.empty();let r=new yo(oa.comparator);for(let a of t.fields)if(!r.has(a)){let l=n.field(a);l===null&&a.length>1&&(a=a.popLast(),l=n.field(a)),l===null?i.delete(a):i.set(a,l),r=r.add(a)}return new um(e.key,i,new ic(r.toArray()),hu.none())}}function SJ(e,t,n){e instanceof wb?(function(r,a,l){const h=r.value.clone(),s=ZR(r.fieldTransforms,a,l.transformResults);h.setAll(s),a.convertToFoundDocument(l.version,h).setHasCommittedMutations()})(e,t,n):e instanceof um?(function(r,a,l){if(!C1(r.precondition,a))return void a.convertToUnknownDocument(l.version);const h=ZR(r.fieldTransforms,a,l.transformResults),s=a.data;s.setAll(xz(r)),s.setAll(h),a.convertToFoundDocument(l.version,s).setHasCommittedMutations()})(e,t,n):(function(r,a,l){a.convertToNoDocument(l.version).setHasCommittedMutations()})(0,t,n)}function u0(e,t,n,i){return e instanceof wb?(function(a,l,h,s){if(!C1(a.precondition,l))return h;const p=a.value.clone(),_=JR(a.fieldTransforms,s,l);return p.setAll(_),l.convertToFoundDocument(l.version,p).setHasLocalMutations(),null})(e,t,n,i):e instanceof um?(function(a,l,h,s){if(!C1(a.precondition,l))return h;const p=JR(a.fieldTransforms,s,l),_=l.data;return _.setAll(xz(a)),_.setAll(p),l.convertToFoundDocument(l.version,_).setHasLocalMutations(),h===null?null:h.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((x=>x.field)))})(e,t,n,i):(function(a,l,h){return C1(a.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):h})(e,t,n)}function EJ(e,t){let n=null;for(const i of e.fieldTransforms){const r=t.data.field(i.field),a=gz(i.transform,r||null);a!=null&&(n===null&&(n=Il.empty()),n.set(i.field,a))}return n||null}function YR(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!(function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Xv(i,r,((a,l)=>wJ(a,l)))})(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class wb extends bT{constructor(t,n,i,r=[]){super(),this.key=t,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class um extends bT{constructor(t,n,i,r,a=[]){super(),this.key=t,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function xz(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=e.data.field(n);t.set(n,i)}})),t}function ZR(e,t,n){const i=new Map;kr(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let r=0;r<n.length;r++){const a=e[r],l=a.transform,h=t.data.field(a.field);i.set(a.field,bJ(l,h,n[r]))}return i}function JR(e,t,n){const i=new Map;for(const r of e){const a=r.transform,l=n.data.field(r.field);i.set(r.field,yJ(a,l,t))}return i}class DA extends bT{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class CJ extends bT{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kJ{constructor(t,n,i,r){this.batchId=t,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const a=this.mutations[r];a.key.isEqual(t.key)&&SJ(a,t,i[r])}}applyToLocalView(t,n){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(n=u0(i,t,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(n=u0(i,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const i=mz();return this.mutations.forEach((r=>{const a=t.get(r.key),l=a.overlayedDocument;let h=this.applyToLocalView(l,a.mutatedFields);h=n.has(r.key)?null:h;const s=bz(l,h);s!==null&&i.set(r.key,s),l.isValidDocument()||l.convertToNoDocument(yi.min())})),i}keys(){return this.mutations.reduce(((t,n)=>t.add(n.key)),Ni())}isEqual(t){return this.batchId===t.batchId&&Xv(this.mutations,t.mutations,((n,i)=>YR(n,i)))&&Xv(this.baseMutations,t.baseMutations,((n,i)=>YR(n,i)))}}class LA{constructor(t,n,i,r){this.batch=t,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(t,n,i){kr(t.mutations.length===i.length,58842,{me:t.mutations.length,fe:i.length});let r=(function(){return mJ})();const a=t.mutations;for(let l=0;l<a.length;l++)r=r.insert(a[l].key,i[l].version);return new LA(t,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IJ{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AJ{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var no,Ji;function PJ(e){switch(e){case mn.OK:return fi(64938);case mn.CANCELLED:case mn.UNKNOWN:case mn.DEADLINE_EXCEEDED:case mn.RESOURCE_EXHAUSTED:case mn.INTERNAL:case mn.UNAVAILABLE:case mn.UNAUTHENTICATED:return!1;case mn.INVALID_ARGUMENT:case mn.NOT_FOUND:case mn.ALREADY_EXISTS:case mn.PERMISSION_DENIED:case mn.FAILED_PRECONDITION:case mn.ABORTED:case mn.OUT_OF_RANGE:case mn.UNIMPLEMENTED:case mn.DATA_LOSS:return!0;default:return fi(15467,{code:e})}}function wz(e){if(e===void 0)return yh("GRPC error has no .code"),mn.UNKNOWN;switch(e){case no.OK:return mn.OK;case no.CANCELLED:return mn.CANCELLED;case no.UNKNOWN:return mn.UNKNOWN;case no.DEADLINE_EXCEEDED:return mn.DEADLINE_EXCEEDED;case no.RESOURCE_EXHAUSTED:return mn.RESOURCE_EXHAUSTED;case no.INTERNAL:return mn.INTERNAL;case no.UNAVAILABLE:return mn.UNAVAILABLE;case no.UNAUTHENTICATED:return mn.UNAUTHENTICATED;case no.INVALID_ARGUMENT:return mn.INVALID_ARGUMENT;case no.NOT_FOUND:return mn.NOT_FOUND;case no.ALREADY_EXISTS:return mn.ALREADY_EXISTS;case no.PERMISSION_DENIED:return mn.PERMISSION_DENIED;case no.FAILED_PRECONDITION:return mn.FAILED_PRECONDITION;case no.ABORTED:return mn.ABORTED;case no.OUT_OF_RANGE:return mn.OUT_OF_RANGE;case no.UNIMPLEMENTED:return mn.UNIMPLEMENTED;case no.DATA_LOSS:return mn.DATA_LOSS;default:return fi(39323,{code:e})}}(Ji=no||(no={}))[Ji.OK=0]="OK",Ji[Ji.CANCELLED=1]="CANCELLED",Ji[Ji.UNKNOWN=2]="UNKNOWN",Ji[Ji.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ji[Ji.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ji[Ji.NOT_FOUND=5]="NOT_FOUND",Ji[Ji.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ji[Ji.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ji[Ji.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ji[Ji.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ji[Ji.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ji[Ji.ABORTED=10]="ABORTED",Ji[Ji.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ji[Ji.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ji[Ji.INTERNAL=13]="INTERNAL",Ji[Ji.UNAVAILABLE=14]="UNAVAILABLE",Ji[Ji.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MJ(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DJ=new Nf([4294967295,4294967295],0);function QR(e){const t=MJ().encode(e),n=new zF;return n.update(t),new Uint8Array(n.digest())}function e5(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),i=t.getUint32(4,!0),r=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new Nf([n,i],0),new Nf([r,a],0)]}class RA{constructor(t,n,i){if(this.bitmap=t,this.padding=n,this.hashCount=i,n<0||n>=8)throw new $y(`Invalid padding: ${n}`);if(i<0)throw new $y(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new $y(`Invalid hash count: ${i}`);if(t.length===0&&n!==0)throw new $y(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*t.length-n,this.pe=Nf.fromNumber(this.ge)}ye(t,n,i){let r=t.add(n.multiply(Nf.fromNumber(i)));return r.compare(DJ)===1&&(r=new Nf([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const n=QR(t),[i,r]=e5(n);for(let a=0;a<this.hashCount;a++){const l=this.ye(i,r,a);if(!this.we(l))return!1}return!0}static create(t,n,i){const r=t%8==0?0:8-t%8,a=new Uint8Array(Math.ceil(t/8)),l=new RA(a,r,n);return i.forEach((h=>l.insert(h))),l}insert(t){if(this.ge===0)return;const n=QR(t),[i,r]=e5(n);for(let a=0;a<this.hashCount;a++){const l=this.ye(i,r,a);this.Se(l)}}Se(t){const n=Math.floor(t/8),i=t%8;this.bitmap[n]|=1<<i}}class $y extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT{constructor(t,n,i,r,a){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(t,n,i){const r=new Map;return r.set(t,Tb.createSynthesizedTargetChangeForCurrentChange(t,n,i)),new xT(yi.min(),r,new xs(zi),bh(),Ni())}}class Tb{constructor(t,n,i,r,a){this.resumeToken=t,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(t,n,i){return new Tb(i,n,Ni(),Ni(),Ni())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1{constructor(t,n,i,r){this.be=t,this.removedTargetIds=n,this.key=i,this.De=r}}class Tz{constructor(t,n){this.targetId=t,this.Ce=n}}class Sz{constructor(t,n,i=ua.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=n,this.resumeToken=i,this.cause=r}}class t5{constructor(){this.ve=0,this.Fe=n5(),this.Me=ua.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Ni(),n=Ni(),i=Ni();return this.Fe.forEach(((r,a)=>{switch(a){case 0:t=t.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:fi(38017,{changeType:a})}})),new Tb(this.Me,this.xe,t,n,i)}qe(){this.Oe=!1,this.Fe=n5()}Qe(t,n){this.Oe=!0,this.Fe=this.Fe.insert(t,n)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,kr(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class LJ{constructor(t){this.Ge=t,this.ze=new Map,this.je=bh(),this.Je=Ux(),this.He=Ux(),this.Ye=new xs(zi)}Ze(t){for(const n of t.be)t.De&&t.De.isFoundDocument()?this.Xe(n,t.De):this.et(n,t.key,t.De);for(const n of t.removedTargetIds)this.et(n,t.key,t.De)}tt(t){this.forEachTarget(t,(n=>{const i=this.nt(n);switch(t.state){case 0:this.rt(n)&&i.Le(t.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(t.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(t.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(t.resumeToken));break;default:fi(56790,{state:t.state})}}))}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ze.forEach(((i,r)=>{this.rt(r)&&n(r)}))}st(t){const n=t.targetId,i=t.Ce.count,r=this.ot(n);if(r){const a=r.target;if(gk(a))if(i===0){const l=new ei(a.path);this.et(n,l,Oa.newNoDocument(l,yi.min()))}else kr(i===1,20013,{expectedCount:i});else{const l=this._t(n);if(l!==i){const h=this.ut(t),s=h?this.ct(h,t,l):1;if(s!==0){this.it(n);const p=s===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,p)}}}}}ut(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:a=0}=n;let l,h;try{l=Zf(i).toUint8Array()}catch(s){if(s instanceof YF)return Kv("Decoding the base64 bloom filter in existence filter failed ("+s.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw s}try{h=new RA(l,r,a)}catch(s){return Kv(s instanceof $y?"BloomFilter error: ":"Applying bloom filter failed: ",s),null}return h.ge===0?null:h}ct(t,n,i){return n.Ce.count===i-this.Pt(t,n.targetId)?0:2}Pt(t,n){const i=this.Ge.getRemoteKeysForTarget(n);let r=0;return i.forEach((a=>{const l=this.Ge.ht(),h=`projects/${l.projectId}/databases/${l.database}/documents/${a.path.canonicalString()}`;t.mightContain(h)||(this.et(n,a,null),r++)})),r}Tt(t){const n=new Map;this.ze.forEach(((a,l)=>{const h=this.ot(l);if(h){if(a.current&&gk(h.target)){const s=new ei(h.target.path);this.It(s).has(l)||this.Et(l,s)||this.et(l,s,Oa.newNoDocument(s,t))}a.Be&&(n.set(l,a.ke()),a.qe())}}));let i=Ni();this.He.forEach(((a,l)=>{let h=!0;l.forEachWhile((s=>{const p=this.ot(s);return!p||p.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(i=i.add(a))})),this.je.forEach(((a,l)=>l.setReadTime(t)));const r=new xT(t,n,this.Ye,this.je,i);return this.je=bh(),this.Je=Ux(),this.He=Ux(),this.Ye=new xs(zi),r}Xe(t,n){if(!this.rt(t))return;const i=this.Et(t,n.key)?2:0;this.nt(t).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(t)),this.He=this.He.insert(n.key,this.dt(n.key).add(t))}et(t,n,i){if(!this.rt(t))return;const r=this.nt(t);this.Et(t,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(t)),this.He=this.He.insert(n,this.dt(n).add(t)),i&&(this.je=this.je.insert(n,i))}removeTarget(t){this.ze.delete(t)}_t(t){const n=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let n=this.ze.get(t);return n||(n=new t5,this.ze.set(t,n)),n}dt(t){let n=this.He.get(t);return n||(n=new yo(zi),this.He=this.He.insert(t,n)),n}It(t){let n=this.Je.get(t);return n||(n=new yo(zi),this.Je=this.Je.insert(t,n)),n}rt(t){const n=this.ot(t)!==null;return n||On("WatchChangeAggregator","Detected inactive target",t),n}ot(t){const n=this.ze.get(t);return n&&n.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new t5),this.Ge.getRemoteKeysForTarget(t).forEach((n=>{this.et(t,n,null)}))}Et(t,n){return this.Ge.getRemoteKeysForTarget(t).has(n)}}function Ux(){return new xs(ei.comparator)}function n5(){return new xs(ei.comparator)}const RJ={asc:"ASCENDING",desc:"DESCENDING"},OJ={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},VJ={and:"AND",or:"OR"};class BJ{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function _k(e,t){return e.useProto3Json||mT(t)?t:{value:t}}function bw(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Ez(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function FJ(e,t){return bw(e,t.toTimestamp())}function Qu(e){return kr(!!e,49232),yi.fromTimestamp((function(n){const i=Yf(n);return new Jr(i.seconds,i.nanos)})(e))}function OA(e,t){return yk(e,t).canonicalString()}function yk(e,t){const n=(function(r){return new ys(["projects",r.projectId,"databases",r.database])})(e).child("documents");return t===void 0?n:n.child(t)}function Cz(e){const t=ys.fromString(e);return kr(Mz(t),10190,{key:t.toString()}),t}function bk(e,t){return OA(e.databaseId,t.path)}function JE(e,t){const n=Cz(t);if(n.get(1)!==e.databaseId.projectId)throw new Wn(mn.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Wn(mn.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ei(Iz(n))}function kz(e,t){return OA(e.databaseId,t)}function zJ(e){const t=Cz(e);return t.length===4?ys.emptyPath():Iz(t)}function xk(e){return new ys(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Iz(e){return kr(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function i5(e,t,n){return{name:bk(e,t),fields:n.value.mapValue.fields}}function NJ(e,t){let n;if("targetChange"in t){t.targetChange;const i=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:fi(39313,{state:p})})(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],a=(function(p,_){return p.useProto3Json?(kr(_===void 0||typeof _=="string",58123),ua.fromBase64String(_||"")):(kr(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),ua.fromUint8Array(_||new Uint8Array))})(e,t.targetChange.resumeToken),l=t.targetChange.cause,h=l&&(function(p){const _=p.code===void 0?mn.UNKNOWN:wz(p.code);return new Wn(_,p.message||"")})(l);n=new Sz(i,r,a,h||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const r=JE(e,i.document.name),a=Qu(i.document.updateTime),l=i.document.createTime?Qu(i.document.createTime):yi.min(),h=new Il({mapValue:{fields:i.document.fields}}),s=Oa.newFoundDocument(r,a,l,h),p=i.targetIds||[],_=i.removedTargetIds||[];n=new k1(p,_,s.key,s)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const r=JE(e,i.document),a=i.readTime?Qu(i.readTime):yi.min(),l=Oa.newNoDocument(r,a),h=i.removedTargetIds||[];n=new k1([],h,l.key,l)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const r=JE(e,i.document),a=i.removedTargetIds||[];n=new k1([],a,r,null)}else{if(!("filter"in t))return fi(11601,{Rt:t});{t.filter;const i=t.filter;i.targetId;const{count:r=0,unchangedNames:a}=i,l=new AJ(r,a),h=i.targetId;n=new Tz(h,l)}}return n}function $J(e,t){let n;if(t instanceof wb)n={update:i5(e,t.key,t.value)};else if(t instanceof DA)n={delete:bk(e,t.key)};else if(t instanceof um)n={update:i5(e,t.key,t.data),updateMask:YJ(t.fieldMask)};else{if(!(t instanceof CJ))return fi(16599,{Vt:t.type});n={verify:bk(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((i=>(function(a,l){const h=l.transform;if(h instanceof _w)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Jv)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof F0)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof yw)return{fieldPath:l.field.canonicalString(),increment:h.Ae};throw fi(20930,{transform:l.transform})})(0,i)))),t.precondition.isNone||(n.currentDocument=(function(r,a){return a.updateTime!==void 0?{updateTime:FJ(r,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:fi(27497)})(e,t.precondition)),n}function UJ(e,t){return e&&e.length>0?(kr(t!==void 0,14353),e.map((n=>(function(r,a){let l=r.updateTime?Qu(r.updateTime):Qu(a);return l.isEqual(yi.min())&&(l=Qu(a)),new TJ(l,r.transformResults||[])})(n,t)))):[]}function jJ(e,t){return{documents:[kz(e,t.path)]}}function WJ(e,t){const n={structuredQuery:{}},i=t.path;let r;t.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=kz(e,r);const a=(function(p){if(p.length!==0)return Pz(ad.create(p,"and"))})(t.filters);a&&(n.structuredQuery.where=a);const l=(function(p){if(p.length!==0)return p.map((_=>(function(T){return{field:mv(T.field),direction:qJ(T.dir)}})(_)))})(t.orderBy);l&&(n.structuredQuery.orderBy=l);const h=_k(e,t.limit);return h!==null&&(n.structuredQuery.limit=h),t.startAt&&(n.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(t.startAt)),t.endAt&&(n.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(t.endAt)),{ft:n,parent:r}}function HJ(e){let t=zJ(e.parent);const n=e.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){kr(i===1,65062);const _=n.from[0];_.allDescendants?r=_.collectionId:t=t.child(_.collectionId)}let a=[];n.where&&(a=(function(x){const T=Az(x);return T instanceof ad&&oz(T)?T.getFilters():[T]})(n.where));let l=[];n.orderBy&&(l=(function(x){return x.map((T=>(function(A){return new vw(pv(A.field),(function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(A.direction))})(T)))})(n.orderBy));let h=null;n.limit&&(h=(function(x){let T;return T=typeof x=="object"?x.value:x,mT(T)?null:T})(n.limit));let s=null;n.startAt&&(s=(function(x){const T=!!x.before,k=x.values||[];return new gw(k,T)})(n.startAt));let p=null;return n.endAt&&(p=(function(x){const T=!x.before,k=x.values||[];return new gw(k,T)})(n.endAt)),lJ(t,r,l,a,h,"F",s,p)}function GJ(e,t){const n=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return fi(28987,{purpose:r})}})(t.purpose);return n==null?null:{"goog-listen-tags":n}}function Az(e){return e.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=pv(n.unaryFilter.field);return go.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=pv(n.unaryFilter.field);return go.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=pv(n.unaryFilter.field);return go.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=pv(n.unaryFilter.field);return go.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return fi(61313);default:return fi(60726)}})(e):e.fieldFilter!==void 0?(function(n){return go.create(pv(n.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return fi(58110);default:return fi(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(e):e.compositeFilter!==void 0?(function(n){return ad.create(n.compositeFilter.filters.map((i=>Az(i))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return fi(1026)}})(n.compositeFilter.op))})(e):fi(30097,{filter:e})}function qJ(e){return RJ[e]}function KJ(e){return OJ[e]}function XJ(e){return VJ[e]}function mv(e){return{fieldPath:e.canonicalString()}}function pv(e){return oa.fromServerFormat(e.fieldPath)}function Pz(e){return e instanceof go?(function(n){if(n.op==="=="){if(WR(n.value))return{unaryFilter:{field:mv(n.field),op:"IS_NAN"}};if(jR(n.value))return{unaryFilter:{field:mv(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(WR(n.value))return{unaryFilter:{field:mv(n.field),op:"IS_NOT_NAN"}};if(jR(n.value))return{unaryFilter:{field:mv(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:mv(n.field),op:KJ(n.op),value:n.value}}})(e):e instanceof ad?(function(n){const i=n.getFilters().map((r=>Pz(r)));return i.length===1?i[0]:{compositeFilter:{op:XJ(n.op),filters:i}}})(e):fi(54877,{filter:e})}function YJ(e){const t=[];return e.fields.forEach((n=>t.push(n.canonicalString()))),{fieldPaths:t}}function Mz(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af{constructor(t,n,i,r,a=yi.min(),l=yi.min(),h=ua.EMPTY_BYTE_STRING,s=null){this.target=t,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h,this.expectedCount=s}withSequenceNumber(t){return new Af(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Af(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Af(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Af(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZJ{constructor(t){this.yt=t}}function JJ(e){const t=HJ({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?vk(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QJ{constructor(){this.Cn=new eQ}addToCollectionParentIndex(t,n){return this.Cn.add(n),ln.resolve()}getCollectionParents(t,n){return ln.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return ln.resolve()}deleteFieldIndex(t,n){return ln.resolve()}deleteAllFieldIndexes(t){return ln.resolve()}createTargetIndexes(t,n){return ln.resolve()}getDocumentsMatchingTarget(t,n){return ln.resolve(null)}getIndexType(t,n){return ln.resolve(0)}getFieldIndexes(t,n){return ln.resolve([])}getNextCollectionGroupToUpdate(t){return ln.resolve(null)}getMinOffset(t,n){return ln.resolve(Xf.min())}getMinOffsetFromCollectionGroup(t,n){return ln.resolve(Xf.min())}updateCollectionGroup(t,n,i){return ln.resolve()}updateIndexEntries(t,n){return ln.resolve()}}class eQ{constructor(){this.index={}}add(t){const n=t.lastSegment(),i=t.popLast(),r=this.index[n]||new yo(ys.comparator),a=!r.has(i);return this.index[n]=r.add(i),a}has(t){const n=t.lastSegment(),i=t.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(t){return(this.index[t]||new yo(ys.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r5={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Dz=41943040;class kl{static withCacheSize(t){return new kl(t,kl.DEFAULT_COLLECTION_PERCENTILE,kl.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */kl.DEFAULT_COLLECTION_PERCENTILE=10,kl.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,kl.DEFAULT=new kl(Dz,kl.DEFAULT_COLLECTION_PERCENTILE,kl.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),kl.DISABLED=new kl(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qv{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new Qv(0)}static cr(){return new Qv(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s5="LruGarbageCollector",tQ=1048576;function o5([e,t],[n,i]){const r=zi(e,n);return r===0?zi(t,i):r}class nQ{constructor(t){this.Ir=t,this.buffer=new yo(o5),this.Er=0}dr(){return++this.Er}Ar(t){const n=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();o5(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class iQ{constructor(t,n,i){this.garbageCollector=t,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){On(s5,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){b_(n)?On(s5,"Ignoring IndexedDB error during garbage collection: ",n):await y_(n)}await this.Vr(3e5)}))}}class rQ{constructor(t,n){this.mr=t,this.params=n}calculateTargetCount(t,n){return this.mr.gr(t).next((i=>Math.floor(n/100*i)))}nthSequenceNumber(t,n){if(n===0)return ln.resolve(fT.ce);const i=new nQ(n);return this.mr.forEachTarget(t,(r=>i.Ar(r.sequenceNumber))).next((()=>this.mr.pr(t,(r=>i.Ar(r))))).next((()=>i.maxValue))}removeTargets(t,n,i){return this.mr.removeTargets(t,n,i)}removeOrphanedDocuments(t,n){return this.mr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(On("LruGarbageCollector","Garbage collection skipped; disabled"),ln.resolve(r5)):this.getCacheSize(t).next((i=>i<this.params.cacheSizeCollectionThreshold?(On("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),r5):this.yr(t,n)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,n){let i,r,a,l,h,s,p;const _=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((x=>(x>this.params.maximumSequenceNumbersToCollect?(On("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),r=this.params.maximumSequenceNumbersToCollect):r=x,l=Date.now(),this.nthSequenceNumber(t,r)))).next((x=>(i=x,h=Date.now(),this.removeTargets(t,i,n)))).next((x=>(a=x,s=Date.now(),this.removeOrphanedDocuments(t,i)))).next((x=>(p=Date.now(),hv()<=Fi.DEBUG&&On("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-_}ms
	Determined least recently used ${r} in `+(h-l)+`ms
	Removed ${a} targets in `+(s-h)+`ms
	Removed ${x} documents in `+(p-s)+`ms
Total Duration: ${p-_}ms`),ln.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:a,documentsRemoved:x}))))}}function sQ(e,t){return new rQ(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oQ{constructor(){this.changes=new ng((t=>t.toString()),((t,n)=>t.isEqual(n))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,Oa.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?ln.resolve(i):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aQ{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lQ{constructor(t,n,i,r){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(t,n){let i=null;return this.documentOverlayCache.getOverlay(t,n).next((r=>(i=r,this.remoteDocumentCache.getEntry(t,n)))).next((r=>(i!==null&&u0(i.mutation,r,ic.empty(),Jr.now()),r)))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next((i=>this.getLocalViewOfDocuments(t,i,Ni()).next((()=>i))))}getLocalViewOfDocuments(t,n,i=Ni()){const r=vp();return this.populateOverlays(t,r,n).next((()=>this.computeViews(t,n,r,i).next((a=>{let l=Ny();return a.forEach(((h,s)=>{l=l.insert(h,s.overlayedDocument)})),l}))))}getOverlayedDocuments(t,n){const i=vp();return this.populateOverlays(t,i,n).next((()=>this.computeViews(t,n,i,Ni())))}populateOverlays(t,n,i){const r=[];return i.forEach((a=>{n.has(a)||r.push(a)})),this.documentOverlayCache.getOverlays(t,r).next((a=>{a.forEach(((l,h)=>{n.set(l,h)}))}))}computeViews(t,n,i,r){let a=bh();const l=c0(),h=(function(){return c0()})();return n.forEach(((s,p)=>{const _=i.get(p.key);r.has(p.key)&&(_===void 0||_.mutation instanceof um)?a=a.insert(p.key,p):_!==void 0?(l.set(p.key,_.mutation.getFieldMask()),u0(_.mutation,p,_.mutation.getFieldMask(),Jr.now())):l.set(p.key,ic.empty())})),this.recalculateAndSaveOverlays(t,a).next((s=>(s.forEach(((p,_)=>l.set(p,_))),n.forEach(((p,_)=>h.set(p,new aQ(_,l.get(p)??null)))),h)))}recalculateAndSaveOverlays(t,n){const i=c0();let r=new xs(((l,h)=>l-h)),a=Ni();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next((l=>{for(const h of l)h.keys().forEach((s=>{const p=n.get(s);if(p===null)return;let _=i.get(s)||ic.empty();_=h.applyToLocalView(p,_),i.set(s,_);const x=(r.get(h.batchId)||Ni()).add(s);r=r.insert(h.batchId,x)}))})).next((()=>{const l=[],h=r.getReverseIterator();for(;h.hasNext();){const s=h.getNext(),p=s.key,_=s.value,x=mz();_.forEach((T=>{if(!a.has(T)){const k=bz(n.get(T),i.get(T));k!==null&&x.set(T,k),a=a.add(T)}})),l.push(this.documentOverlayCache.saveOverlays(t,p,x))}return ln.waitFor(l)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next((i=>this.recalculateAndSaveOverlays(t,i)))}getDocumentsMatchingQuery(t,n,i,r){return(function(l){return ei.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):cJ(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,i,r):this.getDocumentsMatchingCollectionQuery(t,n,i,r)}getNextDocuments(t,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,i,r).next((a=>{const l=r-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,i.largestBatchId,r-a.size):ln.resolve(vp());let h=R0,s=a;return l.next((p=>ln.forEach(p,((_,x)=>(h<x.largestBatchId&&(h=x.largestBatchId),a.get(_)?ln.resolve():this.remoteDocumentCache.getEntry(t,_).next((T=>{s=s.insert(_,T)}))))).next((()=>this.populateOverlays(t,p,a))).next((()=>this.computeViews(t,s,p,Ni()))).next((_=>({batchId:h,changes:fz(_)})))))}))}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new ei(n)).next((i=>{let r=Ny();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r}))}getDocumentsMatchingCollectionGroupQuery(t,n,i,r){const a=n.collectionGroup;let l=Ny();return this.indexManager.getCollectionParents(t,a).next((h=>ln.forEach(h,(s=>{const p=(function(x,T){return new gT(T,null,x.explicitOrderBy.slice(),x.filters.slice(),x.limit,x.limitType,x.startAt,x.endAt)})(n,s.child(a));return this.getDocumentsMatchingCollectionQuery(t,p,i,r).next((_=>{_.forEach(((x,T)=>{l=l.insert(x,T)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(t,n,i,r){let a;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,i.largestBatchId).next((l=>(a=l,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,i,a,r)))).next((l=>{a.forEach(((s,p)=>{const _=p.getKey();l.get(_)===null&&(l=l.insert(_,Oa.newInvalidDocument(_)))}));let h=Ny();return l.forEach(((s,p)=>{const _=a.get(s);_!==void 0&&u0(_.mutation,p,ic.empty(),Jr.now()),_T(n,p)&&(h=h.insert(s,p))})),h}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cQ{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,n){return ln.resolve(this.Lr.get(n))}saveBundleMetadata(t,n){return this.Lr.set(n.id,(function(r){return{id:r.id,version:r.version,createTime:Qu(r.createTime)}})(n)),ln.resolve()}getNamedQuery(t,n){return ln.resolve(this.kr.get(n))}saveNamedQuery(t,n){return this.kr.set(n.name,(function(r){return{name:r.name,query:JJ(r.bundledQuery),readTime:Qu(r.readTime)}})(n)),ln.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uQ{constructor(){this.overlays=new xs(ei.comparator),this.qr=new Map}getOverlay(t,n){return ln.resolve(this.overlays.get(n))}getOverlays(t,n){const i=vp();return ln.forEach(n,(r=>this.getOverlay(t,r).next((a=>{a!==null&&i.set(r,a)})))).next((()=>i))}saveOverlays(t,n,i){return i.forEach(((r,a)=>{this.St(t,n,a)})),ln.resolve()}removeOverlaysForBatchId(t,n,i){const r=this.qr.get(i);return r!==void 0&&(r.forEach((a=>this.overlays=this.overlays.remove(a))),this.qr.delete(i)),ln.resolve()}getOverlaysForCollection(t,n,i){const r=vp(),a=n.length+1,l=new ei(n.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const s=h.getNext().value,p=s.getKey();if(!n.isPrefixOf(p.path))break;p.path.length===a&&s.largestBatchId>i&&r.set(s.getKey(),s)}return ln.resolve(r)}getOverlaysForCollectionGroup(t,n,i,r){let a=new xs(((p,_)=>p-_));const l=this.overlays.getIterator();for(;l.hasNext();){const p=l.getNext().value;if(p.getKey().getCollectionGroup()===n&&p.largestBatchId>i){let _=a.get(p.largestBatchId);_===null&&(_=vp(),a=a.insert(p.largestBatchId,_)),_.set(p.getKey(),p)}}const h=vp(),s=a.getIterator();for(;s.hasNext()&&(s.getNext().value.forEach(((p,_)=>h.set(p,_))),!(h.size()>=r)););return ln.resolve(h)}St(t,n,i){const r=this.overlays.get(i.key);if(r!==null){const l=this.qr.get(r.largestBatchId).delete(i.key);this.qr.set(r.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new IJ(n,i));let a=this.qr.get(n);a===void 0&&(a=Ni(),this.qr.set(n,a)),this.qr.set(n,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dQ{constructor(){this.sessionToken=ua.EMPTY_BYTE_STRING}getSessionToken(t){return ln.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,ln.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(){this.Qr=new yo(Vo.$r),this.Ur=new yo(Vo.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,n){const i=new Vo(t,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(t,n){t.forEach((i=>this.addReference(i,n)))}removeReference(t,n){this.Gr(new Vo(t,n))}zr(t,n){t.forEach((i=>this.removeReference(i,n)))}jr(t){const n=new ei(new ys([])),i=new Vo(n,t),r=new Vo(n,t+1),a=[];return this.Ur.forEachInRange([i,r],(l=>{this.Gr(l),a.push(l.key)})),a}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const n=new ei(new ys([])),i=new Vo(n,t),r=new Vo(n,t+1);let a=Ni();return this.Ur.forEachInRange([i,r],(l=>{a=a.add(l.key)})),a}containsKey(t){const n=new Vo(t,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&t.isEqual(i.key)}}class Vo{constructor(t,n){this.key=t,this.Yr=n}static $r(t,n){return ei.comparator(t.key,n.key)||zi(t.Yr,n.Yr)}static Kr(t,n){return zi(t.Yr,n.Yr)||ei.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hQ{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new yo(Vo.$r)}checkEmpty(t){return ln.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,i,r){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new kJ(a,n,i,r);this.mutationQueue.push(l);for(const h of r)this.Zr=this.Zr.add(new Vo(h.key,a)),this.indexManager.addToCollectionParentIndex(t,h.key.path.popLast());return ln.resolve(l)}lookupMutationBatch(t,n){return ln.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(t,n){const i=n+1,r=this.ei(i),a=r<0?0:r;return ln.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ln.resolve(this.mutationQueue.length===0?EA:this.tr-1)}getAllMutationBatches(t){return ln.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const i=new Vo(n,0),r=new Vo(n,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([i,r],(l=>{const h=this.Xr(l.Yr);a.push(h)})),ln.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(t,n){let i=new yo(zi);return n.forEach((r=>{const a=new Vo(r,0),l=new Vo(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,l],(h=>{i=i.add(h.Yr)}))})),ln.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(t,n){const i=n.path,r=i.length+1;let a=i;ei.isDocumentKey(a)||(a=a.child(""));const l=new Vo(new ei(a),0);let h=new yo(zi);return this.Zr.forEachWhile((s=>{const p=s.key.path;return!!i.isPrefixOf(p)&&(p.length===r&&(h=h.add(s.Yr)),!0)}),l),ln.resolve(this.ti(h))}ti(t){const n=[];return t.forEach((i=>{const r=this.Xr(i);r!==null&&n.push(r)})),n}removeMutationBatch(t,n){kr(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return ln.forEach(n.mutations,(r=>{const a=new Vo(r.key,n.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)})).next((()=>{this.Zr=i}))}ir(t){}containsKey(t,n){const i=new Vo(n,0),r=this.Zr.firstAfterOrEqual(i);return ln.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,ln.resolve()}ni(t,n){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const n=this.ei(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fQ{constructor(t){this.ri=t,this.docs=(function(){return new xs(ei.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const i=n.key,r=this.docs.get(i),a=r?r.size:0,l=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const i=this.docs.get(n);return ln.resolve(i?i.document.mutableCopy():Oa.newInvalidDocument(n))}getEntries(t,n){let i=bh();return n.forEach((r=>{const a=this.docs.get(r);i=i.insert(r,a?a.document.mutableCopy():Oa.newInvalidDocument(r))})),ln.resolve(i)}getDocumentsMatchingQuery(t,n,i,r){let a=bh();const l=n.path,h=new ei(l.child("__id-9223372036854775808__")),s=this.docs.getIteratorFrom(h);for(;s.hasNext();){const{key:p,value:{document:_}}=s.getNext();if(!l.isPrefixOf(p.path))break;p.path.length>l.length+1||NZ(zZ(_),i)<=0||(r.has(_.key)||_T(n,_))&&(a=a.insert(_.key,_.mutableCopy()))}return ln.resolve(a)}getAllFromCollectionGroup(t,n,i,r){fi(9500)}ii(t,n){return ln.forEach(this.docs,(i=>n(i)))}newChangeBuffer(t){return new mQ(this)}getSize(t){return ln.resolve(this.size)}}class mQ extends oQ{constructor(t){super(),this.Nr=t}applyChanges(t){const n=[];return this.changes.forEach(((i,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(t,r)):this.Nr.removeEntry(i)})),ln.waitFor(n)}getFromCache(t,n){return this.Nr.getEntry(t,n)}getAllFromCache(t,n){return this.Nr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pQ{constructor(t){this.persistence=t,this.si=new ng((n=>IA(n)),AA),this.lastRemoteSnapshotVersion=yi.min(),this.highestTargetId=0,this.oi=0,this._i=new VA,this.targetCount=0,this.ai=Qv.ur()}forEachTarget(t,n){return this.si.forEach(((i,r)=>n(r))),ln.resolve()}getLastRemoteSnapshotVersion(t){return ln.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return ln.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),ln.resolve(this.highestTargetId)}setTargetsMetadata(t,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),ln.resolve()}Pr(t){this.si.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ai=new Qv(n),this.highestTargetId=n),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,n){return this.Pr(n),this.targetCount+=1,ln.resolve()}updateTargetData(t,n){return this.Pr(n),ln.resolve()}removeTargetData(t,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,ln.resolve()}removeTargets(t,n,i){let r=0;const a=[];return this.si.forEach(((l,h)=>{h.sequenceNumber<=n&&i.get(h.targetId)===null&&(this.si.delete(l),a.push(this.removeMatchingKeysForTargetId(t,h.targetId)),r++)})),ln.waitFor(a).next((()=>r))}getTargetCount(t){return ln.resolve(this.targetCount)}getTargetData(t,n){const i=this.si.get(n)||null;return ln.resolve(i)}addMatchingKeys(t,n,i){return this._i.Wr(n,i),ln.resolve()}removeMatchingKeys(t,n,i){this._i.zr(n,i);const r=this.persistence.referenceDelegate,a=[];return r&&n.forEach((l=>{a.push(r.markPotentiallyOrphaned(t,l))})),ln.waitFor(a)}removeMatchingKeysForTargetId(t,n){return this._i.jr(n),ln.resolve()}getMatchingKeysForTargetId(t,n){const i=this._i.Hr(n);return ln.resolve(i)}containsKey(t,n){return ln.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lz{constructor(t,n){this.ui={},this.overlays={},this.ci=new fT(0),this.li=!1,this.li=!0,this.hi=new dQ,this.referenceDelegate=t(this),this.Pi=new pQ(this),this.indexManager=new QJ,this.remoteDocumentCache=(function(r){return new fQ(r)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new ZJ(n),this.Ii=new cQ(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new uQ,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let i=this.ui[t.toKey()];return i||(i=new hQ(n,this.referenceDelegate),this.ui[t.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,n,i){On("MemoryPersistence","Starting transaction:",t);const r=new gQ(this.ci.next());return this.referenceDelegate.Ei(),i(r).next((a=>this.referenceDelegate.di(r).next((()=>a)))).toPromise().then((a=>(r.raiseOnCommittedEvent(),a)))}Ai(t,n){return ln.or(Object.values(this.ui).map((i=>()=>i.containsKey(t,n))))}}class gQ extends UZ{constructor(t){super(),this.currentSequenceNumber=t}}class BA{constructor(t){this.persistence=t,this.Ri=new VA,this.Vi=null}static mi(t){return new BA(t)}get fi(){if(this.Vi)return this.Vi;throw fi(60996)}addReference(t,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),ln.resolve()}removeReference(t,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),ln.resolve()}markPotentiallyOrphaned(t,n){return this.fi.add(n.toString()),ln.resolve()}removeTarget(t,n){this.Ri.jr(n.targetId).forEach((r=>this.fi.add(r.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,n.targetId).next((r=>{r.forEach((a=>this.fi.add(a.toString())))})).next((()=>i.removeTargetData(t,n)))}Ei(){this.Vi=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ln.forEach(this.fi,(i=>{const r=ei.fromPath(i);return this.gi(t,r).next((a=>{a||n.removeEntry(r,yi.min())}))})).next((()=>(this.Vi=null,n.apply(t))))}updateLimboDocument(t,n){return this.gi(t,n).next((i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(t){return 0}gi(t,n){return ln.or([()=>ln.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ai(t,n)])}}class xw{constructor(t,n){this.persistence=t,this.pi=new ng((i=>HZ(i.path)),((i,r)=>i.isEqual(r))),this.garbageCollector=sQ(this,n)}static mi(t,n){return new xw(t,n)}Ei(){}di(t){return ln.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}gr(t){const n=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((i=>n.next((r=>i+r))))}wr(t){let n=0;return this.pr(t,(i=>{n++})).next((()=>n))}pr(t,n){return ln.forEach(this.pi,((i,r)=>this.br(t,i,r).next((a=>a?ln.resolve():n(r)))))}removeTargets(t,n,i){return this.persistence.getTargetCache().removeTargets(t,n,i)}removeOrphanedDocuments(t,n){let i=0;const r=this.persistence.getRemoteDocumentCache(),a=r.newChangeBuffer();return r.ii(t,(l=>this.br(t,l,n).next((h=>{h||(i++,a.removeEntry(l,yi.min()))})))).next((()=>a.apply(t))).next((()=>i))}markPotentiallyOrphaned(t,n){return this.pi.set(n,t.currentSequenceNumber),ln.resolve()}removeTarget(t,n){const i=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,n,i){return this.pi.set(i,t.currentSequenceNumber),ln.resolve()}removeReference(t,n,i){return this.pi.set(i,t.currentSequenceNumber),ln.resolve()}updateLimboDocument(t,n){return this.pi.set(n,t.currentSequenceNumber),ln.resolve()}Ti(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=S1(t.data.value)),n}br(t,n,i){return ln.or([()=>this.persistence.Ai(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const r=this.pi.get(n);return ln.resolve(r!==void 0&&r>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(t,n,i,r){this.targetId=t,this.fromCache=n,this.Es=i,this.ds=r}static As(t,n){let i=Ni(),r=Ni();for(const a of n.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:r=r.add(a.doc.key)}return new FA(t,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vQ{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _Q{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return jq()?8:jZ(Wa())>0?6:4})()}initialize(t,n){this.ps=t,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(t,n,i,r){const a={result:null};return this.ys(t,n).next((l=>{a.result=l})).next((()=>{if(!a.result)return this.ws(t,n,r,i).next((l=>{a.result=l}))})).next((()=>{if(a.result)return;const l=new vQ;return this.Ss(t,n,l).next((h=>{if(a.result=h,this.Vs)return this.bs(t,n,l,h.size)}))})).next((()=>a.result))}bs(t,n,i,r){return i.documentReadCount<this.fs?(hv()<=Fi.DEBUG&&On("QueryEngine","SDK will not create cache indexes for query:",fv(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ln.resolve()):(hv()<=Fi.DEBUG&&On("QueryEngine","Query:",fv(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.gs*r?(hv()<=Fi.DEBUG&&On("QueryEngine","The SDK decides to create cache indexes for query:",fv(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Ju(n))):ln.resolve())}ys(t,n){if(KR(n))return ln.resolve(null);let i=Ju(n);return this.indexManager.getIndexType(t,i).next((r=>r===0?null:(n.limit!==null&&r===1&&(n=vk(n,null,"F"),i=Ju(n)),this.indexManager.getDocumentsMatchingTarget(t,i).next((a=>{const l=Ni(...a);return this.ps.getDocuments(t,l).next((h=>this.indexManager.getMinOffset(t,i).next((s=>{const p=this.Ds(n,h);return this.Cs(n,p,l,s.readTime)?this.ys(t,vk(n,null,"F")):this.vs(t,p,n,s)}))))})))))}ws(t,n,i,r){return KR(n)||r.isEqual(yi.min())?ln.resolve(null):this.ps.getDocuments(t,i).next((a=>{const l=this.Ds(n,a);return this.Cs(n,l,i,r)?ln.resolve(null):(hv()<=Fi.DEBUG&&On("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),fv(n)),this.vs(t,l,n,FZ(r,R0)).next((h=>h)))}))}Ds(t,n){let i=new yo(dz(t));return n.forEach(((r,a)=>{_T(t,a)&&(i=i.add(a))})),i}Cs(t,n,i,r){if(t.limit===null)return!1;if(i.size!==n.size)return!0;const a=t.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(r)>0)}Ss(t,n,i){return hv()<=Fi.DEBUG&&On("QueryEngine","Using full collection scan to execute query:",fv(n)),this.ps.getDocumentsMatchingQuery(t,n,Xf.min(),i)}vs(t,n,i,r){return this.ps.getDocumentsMatchingQuery(t,i,r).next((a=>(n.forEach((l=>{a=a.insert(l.key,l)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA="LocalStore",yQ=3e8;class bQ{constructor(t,n,i,r){this.persistence=t,this.Fs=n,this.serializer=r,this.Ms=new xs(zi),this.xs=new ng((a=>IA(a)),AA),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(i)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new lQ(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>t.collect(n,this.Ms)))}}function xQ(e,t,n,i){return new bQ(e,t,n,i)}async function Rz(e,t){const n=Ti(e);return await n.persistence.runTransaction("Handle user change","readonly",(i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next((a=>(r=a,n.Bs(t),n.mutationQueue.getAllMutationBatches(i)))).next((a=>{const l=[],h=[];let s=Ni();for(const p of r){l.push(p.batchId);for(const _ of p.mutations)s=s.add(_.key)}for(const p of a){h.push(p.batchId);for(const _ of p.mutations)s=s.add(_.key)}return n.localDocuments.getDocuments(i,s).next((p=>({Ls:p,removedBatchIds:l,addedBatchIds:h})))}))}))}function wQ(e,t){const n=Ti(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const r=t.batch.keys(),a=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(h,s,p,_){const x=p.batch,T=x.keys();let k=ln.resolve();return T.forEach((A=>{k=k.next((()=>_.getEntry(s,A))).next((M=>{const R=p.docVersions.get(A);kr(R!==null,48541),M.version.compareTo(R)<0&&(x.applyToRemoteDocument(M,p),M.isValidDocument()&&(M.setReadTime(p.commitVersion),_.addEntry(M)))}))})),k.next((()=>h.mutationQueue.removeMutationBatch(s,x)))})(n,i,t,a).next((()=>a.apply(i))).next((()=>n.mutationQueue.performConsistencyCheck(i))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(h){let s=Ni();for(let p=0;p<h.mutationResults.length;++p)h.mutationResults[p].transformResults.length>0&&(s=s.add(h.batch.mutations[p].key));return s})(t)))).next((()=>n.localDocuments.getDocuments(i,r)))}))}function Oz(e){const t=Ti(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>t.Pi.getLastRemoteSnapshotVersion(n)))}function TQ(e,t){const n=Ti(e),i=t.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const l=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const h=[];t.targetChanges.forEach(((_,x)=>{const T=r.get(x);if(!T)return;h.push(n.Pi.removeMatchingKeys(a,_.removedDocuments,x).next((()=>n.Pi.addMatchingKeys(a,_.addedDocuments,x))));let k=T.withSequenceNumber(a.currentSequenceNumber);t.targetMismatches.get(x)!==null?k=k.withResumeToken(ua.EMPTY_BYTE_STRING,yi.min()).withLastLimboFreeSnapshotVersion(yi.min()):_.resumeToken.approximateByteSize()>0&&(k=k.withResumeToken(_.resumeToken,i)),r=r.insert(x,k),(function(M,R,F){return M.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=yQ?!0:F.addedDocuments.size+F.modifiedDocuments.size+F.removedDocuments.size>0})(T,k,_)&&h.push(n.Pi.updateTargetData(a,k))}));let s=bh(),p=Ni();if(t.documentUpdates.forEach((_=>{t.resolvedLimboDocuments.has(_)&&h.push(n.persistence.referenceDelegate.updateLimboDocument(a,_))})),h.push(SQ(a,l,t.documentUpdates).next((_=>{s=_.ks,p=_.qs}))),!i.isEqual(yi.min())){const _=n.Pi.getLastRemoteSnapshotVersion(a).next((x=>n.Pi.setTargetsMetadata(a,a.currentSequenceNumber,i)));h.push(_)}return ln.waitFor(h).next((()=>l.apply(a))).next((()=>n.localDocuments.getLocalViewOfDocuments(a,s,p))).next((()=>s))})).then((a=>(n.Ms=r,a)))}function SQ(e,t,n){let i=Ni(),r=Ni();return n.forEach((a=>i=i.add(a))),t.getEntries(e,i).next((a=>{let l=bh();return n.forEach(((h,s)=>{const p=a.get(h);s.isFoundDocument()!==p.isFoundDocument()&&(r=r.add(h)),s.isNoDocument()&&s.version.isEqual(yi.min())?(t.removeEntry(h,s.readTime),l=l.insert(h,s)):!p.isValidDocument()||s.version.compareTo(p.version)>0||s.version.compareTo(p.version)===0&&p.hasPendingWrites?(t.addEntry(s),l=l.insert(h,s)):On(zA,"Ignoring outdated watch update for ",h,". Current version:",p.version," Watch version:",s.version)})),{ks:l,qs:r}}))}function EQ(e,t){const n=Ti(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(i=>(t===void 0&&(t=EA),n.mutationQueue.getNextMutationBatchAfterBatchId(i,t))))}function CQ(e,t){const n=Ti(e);return n.persistence.runTransaction("Allocate target","readwrite",(i=>{let r;return n.Pi.getTargetData(i,t).next((a=>a?(r=a,ln.resolve(r)):n.Pi.allocateTargetId(i).next((l=>(r=new Af(t,l,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,r).next((()=>r)))))))})).then((i=>{const r=n.Ms.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(t,i.targetId)),i}))}async function wk(e,t,n){const i=Ti(e),r=i.Ms.get(t),a=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",a,(l=>i.persistence.referenceDelegate.removeTarget(l,r)))}catch(l){if(!b_(l))throw l;On(zA,`Failed to update sequence numbers for target ${t}: ${l}`)}i.Ms=i.Ms.remove(t),i.xs.delete(r.target)}function a5(e,t,n){const i=Ti(e);let r=yi.min(),a=Ni();return i.persistence.runTransaction("Execute query","readwrite",(l=>(function(s,p,_){const x=Ti(s),T=x.xs.get(_);return T!==void 0?ln.resolve(x.Ms.get(T)):x.Pi.getTargetData(p,_)})(i,l,Ju(t)).next((h=>{if(h)return r=h.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(l,h.targetId).next((s=>{a=s}))})).next((()=>i.Fs.getDocumentsMatchingQuery(l,t,n?r:yi.min(),n?a:Ni()))).next((h=>(kQ(i,dJ(t),h),{documents:h,Qs:a})))))}function kQ(e,t,n){let i=e.Os.get(t)||yi.min();n.forEach(((r,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)})),e.Os.set(t,i)}class l5{constructor(){this.activeTargetIds=vJ()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class IQ{constructor(){this.Mo=new l5,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,i){}addLocalQueryTarget(t,n=!0){return n&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,n,i){this.xo[t]=n}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new l5,Promise.resolve()}handleUserChange(t,n,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AQ{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c5="ConnectivityMonitor";class u5{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){On(c5,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){On(c5,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jx=null;function Tk(){return jx===null?jx=(function(){return 268435456+Math.round(2147483648*Math.random())})():jx++,"0x"+jx.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QE="RestConnection",PQ={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class MQ{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+t.host,this.Ko=`projects/${i}/databases/${r}`,this.Wo=this.databaseId.database===mw?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Go(t,n,i,r,a){const l=Tk(),h=this.zo(t,n.toUriEncodedString());On(QE,`Sending RPC '${t}' ${l}:`,h,i);const s={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(s,r,a);const{host:p}=new URL(h),_=g_(p);return this.Jo(t,h,s,i,_).then((x=>(On(QE,`Received RPC '${t}' ${l}: `,x),x)),(x=>{throw Kv(QE,`RPC '${t}' ${l} failed with error: `,x,"url: ",h,"request:",i),x}))}Ho(t,n,i,r,a,l){return this.Go(t,n,i,r,a)}jo(t,n,i){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+__})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((r,a)=>t[a]=r)),i&&i.headers.forEach(((r,a)=>t[a]=r))}zo(t,n){const i=PQ[t];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DQ{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aa="WebChannelConnection";class LQ extends MQ{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,i,r,a){const l=Tk();return new Promise(((h,s)=>{const p=new NF;p.setWithCredentials(!0),p.listenOnce($F.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case T1.NO_ERROR:const x=p.getResponseJson();On(Aa,`XHR for RPC '${t}' ${l} received:`,JSON.stringify(x)),h(x);break;case T1.TIMEOUT:On(Aa,`RPC '${t}' ${l} timed out`),s(new Wn(mn.DEADLINE_EXCEEDED,"Request time out"));break;case T1.HTTP_ERROR:const T=p.getStatus();if(On(Aa,`RPC '${t}' ${l} failed with status:`,T,"response text:",p.getResponseText()),T>0){let k=p.getResponseJson();Array.isArray(k)&&(k=k[0]);const A=k?.error;if(A&&A.status&&A.message){const M=(function(F){const z=F.toLowerCase().replace(/_/g,"-");return Object.values(mn).indexOf(z)>=0?z:mn.UNKNOWN})(A.status);s(new Wn(M,A.message))}else s(new Wn(mn.UNKNOWN,"Server responded with status "+p.getStatus()))}else s(new Wn(mn.UNAVAILABLE,"Connection failed."));break;default:fi(9055,{l_:t,streamId:l,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{On(Aa,`RPC '${t}' ${l} completed.`)}}));const _=JSON.stringify(r);On(Aa,`RPC '${t}' ${l} sending request:`,r),p.send(n,"POST",_,i,15)}))}T_(t,n,i){const r=Tk(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],l=WF(),h=jF(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(s.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(s.useFetchStreams=!0),this.jo(s.initMessageHeaders,n,i),s.encodeInitMessageHeaders=!0;const _=a.join("");On(Aa,`Creating RPC '${t}' stream ${r}: ${_}`,s);const x=l.createWebChannel(_,s);this.I_(x);let T=!1,k=!1;const A=new DQ({Yo:R=>{k?On(Aa,`Not sending because RPC '${t}' stream ${r} is closed:`,R):(T||(On(Aa,`Opening RPC '${t}' stream ${r} transport.`),x.open(),T=!0),On(Aa,`RPC '${t}' stream ${r} sending:`,R),x.send(R))},Zo:()=>x.close()}),M=(R,F,z)=>{R.listen(F,(G=>{try{z(G)}catch(Y){setTimeout((()=>{throw Y}),0)}}))};return M(x,zy.EventType.OPEN,(()=>{k||(On(Aa,`RPC '${t}' stream ${r} transport opened.`),A.o_())})),M(x,zy.EventType.CLOSE,(()=>{k||(k=!0,On(Aa,`RPC '${t}' stream ${r} transport closed`),A.a_(),this.E_(x))})),M(x,zy.EventType.ERROR,(R=>{k||(k=!0,Kv(Aa,`RPC '${t}' stream ${r} transport errored. Name:`,R.name,"Message:",R.message),A.a_(new Wn(mn.UNAVAILABLE,"The operation could not be completed")))})),M(x,zy.EventType.MESSAGE,(R=>{if(!k){const F=R.data[0];kr(!!F,16349);const z=F,G=z?.error||z[0]?.error;if(G){On(Aa,`RPC '${t}' stream ${r} received error:`,G);const Y=G.status;let J=(function(U){const H=no[U];if(H!==void 0)return wz(H)})(Y),re=G.message;J===void 0&&(J=mn.INTERNAL,re="Unknown error status: "+Y+" with message "+G.message),k=!0,A.a_(new Wn(J,re)),x.close()}else On(Aa,`RPC '${t}' stream ${r} received:`,F),A.u_(F)}})),M(h,UF.STAT_EVENT,(R=>{R.stat===dk.PROXY?On(Aa,`RPC '${t}' stream ${r} detected buffering proxy`):R.stat===dk.NOPROXY&&On(Aa,`RPC '${t}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{A.__()}),0),A}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((n=>n===t))}}function eC(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wT(e){return new BJ(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vz{constructor(t,n,i=1e3,r=1.5,a=6e4){this.Mi=t,this.timerId=n,this.d_=i,this.A_=r,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-i);r>0&&On("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d5="PersistentStream";class Bz{constructor(t,n,i,r,a,l,h,s){this.Mi=t,this.S_=i,this.b_=r,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=s,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Vz(t,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():n&&n.code===mn.RESOURCE_EXHAUSTED?(yh(n.toString()),yh("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===mn.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(n)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,r])=>{this.D_===n&&this.G_(i,r)}),(i=>{t((()=>{const r=new Wn(mn.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(r)}))}))}G_(t,n){const i=this.W_(this.D_);this.stream=this.j_(t,n),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((r=>{i((()=>this.z_(r)))})),this.stream.onMessage((r=>{i((()=>++this.F_==1?this.J_(r):this.onNext(r)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return On(d5,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return n=>{this.Mi.enqueueAndForget((()=>this.D_===t?n():(On(d5,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class RQ extends Bz{constructor(t,n,i,r,a,l){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,l),this.serializer=a}j_(t,n){return this.connection.T_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const n=NJ(this.serializer,t),i=(function(a){if(!("targetChange"in a))return yi.min();const l=a.targetChange;return l.targetIds&&l.targetIds.length?yi.min():l.readTime?Qu(l.readTime):yi.min()})(t);return this.listener.H_(n,i)}Y_(t){const n={};n.database=xk(this.serializer),n.addTarget=(function(a,l){let h;const s=l.target;if(h=gk(s)?{documents:jJ(a,s)}:{query:WJ(a,s).ft},h.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){h.resumeToken=Ez(a,l.resumeToken);const p=_k(a,l.expectedCount);p!==null&&(h.expectedCount=p)}else if(l.snapshotVersion.compareTo(yi.min())>0){h.readTime=bw(a,l.snapshotVersion.toTimestamp());const p=_k(a,l.expectedCount);p!==null&&(h.expectedCount=p)}return h})(this.serializer,t);const i=GJ(this.serializer,t);i&&(n.labels=i),this.q_(n)}Z_(t){const n={};n.database=xk(this.serializer),n.removeTarget=t,this.q_(n)}}class OQ extends Bz{constructor(t,n,i,r,a,l){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,l),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,n){return this.connection.T_("Write",t,n)}J_(t){return kr(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,kr(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){kr(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const n=UJ(t.writeResults,t.commitTime),i=Qu(t.commitTime);return this.listener.na(i,n)}ra(){const t={};t.database=xk(this.serializer),this.q_(t)}ea(t){const n={streamToken:this.lastStreamToken,writes:t.map((i=>$J(this.serializer,i)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VQ{}class BQ extends VQ{constructor(t,n,i,r){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new Wn(mn.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,n,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,l])=>this.connection.Go(t,yk(n,i),r,a,l))).catch((a=>{throw a.name==="FirebaseError"?(a.code===mn.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Wn(mn.UNKNOWN,a.toString())}))}Ho(t,n,i,r,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,h])=>this.connection.Ho(t,yk(n,i),r,l,h,a))).catch((l=>{throw l.name==="FirebaseError"?(l.code===mn.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Wn(mn.UNKNOWN,l.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class FQ{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(yh(n),this.aa=!1):On("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jp="RemoteStore";class zQ{constructor(t,n,i,r,a){this.localStore=t,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo((l=>{i.enqueueAndForget((async()=>{ig(this)&&(On(jp,"Restarting streams for network reachability change."),await(async function(s){const p=Ti(s);p.Ea.add(4),await Sb(p),p.Ra.set("Unknown"),p.Ea.delete(4),await TT(p)})(this))}))})),this.Ra=new FQ(i,r)}}async function TT(e){if(ig(e))for(const t of e.da)await t(!0)}async function Sb(e){for(const t of e.da)await t(!1)}function Fz(e,t){const n=Ti(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),jA(n)?UA(n):x_(n).O_()&&$A(n,t))}function NA(e,t){const n=Ti(e),i=x_(n);n.Ia.delete(t),i.O_()&&zz(n,t),n.Ia.size===0&&(i.O_()?i.L_():ig(n)&&n.Ra.set("Unknown"))}function $A(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(yi.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}x_(e).Y_(t)}function zz(e,t){e.Va.Ue(t),x_(e).Z_(t)}function UA(e){e.Va=new LJ({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),x_(e).start(),e.Ra.ua()}function jA(e){return ig(e)&&!x_(e).x_()&&e.Ia.size>0}function ig(e){return Ti(e).Ea.size===0}function Nz(e){e.Va=void 0}async function NQ(e){e.Ra.set("Online")}async function $Q(e){e.Ia.forEach(((t,n)=>{$A(e,t)}))}async function UQ(e,t){Nz(e),jA(e)?(e.Ra.ha(t),UA(e)):e.Ra.set("Unknown")}async function jQ(e,t,n){if(e.Ra.set("Online"),t instanceof Sz&&t.state===2&&t.cause)try{await(async function(r,a){const l=a.cause;for(const h of a.targetIds)r.Ia.has(h)&&(await r.remoteSyncer.rejectListen(h,l),r.Ia.delete(h),r.Va.removeTarget(h))})(e,t)}catch(i){On(jp,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),await ww(e,i)}else if(t instanceof k1?e.Va.Ze(t):t instanceof Tz?e.Va.st(t):e.Va.tt(t),!n.isEqual(yi.min()))try{const i=await Oz(e.localStore);n.compareTo(i)>=0&&await(function(a,l){const h=a.Va.Tt(l);return h.targetChanges.forEach(((s,p)=>{if(s.resumeToken.approximateByteSize()>0){const _=a.Ia.get(p);_&&a.Ia.set(p,_.withResumeToken(s.resumeToken,l))}})),h.targetMismatches.forEach(((s,p)=>{const _=a.Ia.get(s);if(!_)return;a.Ia.set(s,_.withResumeToken(ua.EMPTY_BYTE_STRING,_.snapshotVersion)),zz(a,s);const x=new Af(_.target,s,p,_.sequenceNumber);$A(a,x)})),a.remoteSyncer.applyRemoteEvent(h)})(e,n)}catch(i){On(jp,"Failed to raise snapshot:",i),await ww(e,i)}}async function ww(e,t,n){if(!b_(t))throw t;e.Ea.add(1),await Sb(e),e.Ra.set("Offline"),n||(n=()=>Oz(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{On(jp,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await TT(e)}))}function $z(e,t){return t().catch((n=>ww(e,n,t)))}async function ST(e){const t=Ti(e),n=Qf(t);let i=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:EA;for(;WQ(t);)try{const r=await EQ(t.localStore,i);if(r===null){t.Ta.length===0&&n.L_();break}i=r.batchId,HQ(t,r)}catch(r){await ww(t,r)}Uz(t)&&jz(t)}function WQ(e){return ig(e)&&e.Ta.length<10}function HQ(e,t){e.Ta.push(t);const n=Qf(e);n.O_()&&n.X_&&n.ea(t.mutations)}function Uz(e){return ig(e)&&!Qf(e).x_()&&e.Ta.length>0}function jz(e){Qf(e).start()}async function GQ(e){Qf(e).ra()}async function qQ(e){const t=Qf(e);for(const n of e.Ta)t.ea(n.mutations)}async function KQ(e,t,n){const i=e.Ta.shift(),r=LA.from(i,t,n);await $z(e,(()=>e.remoteSyncer.applySuccessfulWrite(r))),await ST(e)}async function XQ(e,t){t&&Qf(e).X_&&await(async function(i,r){if((function(l){return PJ(l)&&l!==mn.ABORTED})(r.code)){const a=i.Ta.shift();Qf(i).B_(),await $z(i,(()=>i.remoteSyncer.rejectFailedWrite(a.batchId,r))),await ST(i)}})(e,t),Uz(e)&&jz(e)}async function h5(e,t){const n=Ti(e);n.asyncQueue.verifyOperationInProgress(),On(jp,"RemoteStore received new credentials");const i=ig(n);n.Ea.add(3),await Sb(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await TT(n)}async function YQ(e,t){const n=Ti(e);t?(n.Ea.delete(2),await TT(n)):t||(n.Ea.add(2),await Sb(n),n.Ra.set("Unknown"))}function x_(e){return e.ma||(e.ma=(function(n,i,r){const a=Ti(n);return a.sa(),new RQ(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,r)})(e.datastore,e.asyncQueue,{Xo:NQ.bind(null,e),t_:$Q.bind(null,e),r_:UQ.bind(null,e),H_:jQ.bind(null,e)}),e.da.push((async t=>{t?(e.ma.B_(),jA(e)?UA(e):e.Ra.set("Unknown")):(await e.ma.stop(),Nz(e))}))),e.ma}function Qf(e){return e.fa||(e.fa=(function(n,i,r){const a=Ti(n);return a.sa(),new OQ(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,r)})(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:GQ.bind(null,e),r_:XQ.bind(null,e),ta:qQ.bind(null,e),na:KQ.bind(null,e)}),e.da.push((async t=>{t?(e.fa.B_(),await ST(e)):(await e.fa.stop(),e.Ta.length>0&&(On(jp,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))}))),e.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{constructor(t,n,i,r,a){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=a,this.deferred=new $f,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,n,i,r,a){const l=Date.now()+i,h=new WA(t,n,l,r,a);return h.start(i),h}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Wn(mn.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function HA(e,t){if(yh("AsyncQueue",`${t}: ${e}`),b_(e))return new Wn(mn.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ov{static emptySet(t){return new Ov(t.comparator)}constructor(t){this.comparator=t?(n,i)=>t(n,i)||ei.comparator(n.key,i.key):(n,i)=>ei.comparator(n.key,i.key),this.keyedMap=Ny(),this.sortedSet=new xs(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((n,i)=>(t(n),!1)))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Ov)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,a=i.getNext().key;if(!r.isEqual(a))return!1}return!0}toString(){const t=[];return this.forEach((n=>{t.push(n.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const i=new Ov;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f5{constructor(){this.ga=new xs(ei.comparator)}track(t){const n=t.doc.key,i=this.ga.get(n);i?t.type!==0&&i.type===3?this.ga=this.ga.insert(n,t):t.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.ga=this.ga.remove(n):t.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):fi(63341,{Rt:t,pa:i}):this.ga=this.ga.insert(n,t)}ya(){const t=[];return this.ga.inorderTraversal(((n,i)=>{t.push(i)})),t}}class e_{constructor(t,n,i,r,a,l,h,s,p){this.query=t,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=s,this.hasCachedResults=p}static fromInitialDocuments(t,n,i,r,a){const l=[];return n.forEach((h=>{l.push({type:0,doc:h})})),new e_(t,n,Ov.emptySet(n),l,i,r,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&vT(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,i=t.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZQ{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class JQ{constructor(){this.queries=m5(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const r=Ti(n),a=r.queries;r.queries=m5(),a.forEach(((l,h)=>{for(const s of h.Sa)s.onError(i)}))})(this,new Wn(mn.ABORTED,"Firestore shutting down"))}}function m5(){return new ng((e=>uz(e)),vT)}async function QQ(e,t){const n=Ti(e);let i=3;const r=t.query;let a=n.queries.get(r);a?!a.ba()&&t.Da()&&(i=2):(a=new ZQ,i=t.Da()?0:1);try{switch(i){case 0:a.wa=await n.onListen(r,!0);break;case 1:a.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(l){const h=HA(l,`Initialization of query '${fv(t.query)}' failed`);return void t.onError(h)}n.queries.set(r,a),a.Sa.push(t),t.va(n.onlineState),a.wa&&t.Fa(a.wa)&&GA(n)}async function eee(e,t){const n=Ti(e),i=t.query;let r=3;const a=n.queries.get(i);if(a){const l=a.Sa.indexOf(t);l>=0&&(a.Sa.splice(l,1),a.Sa.length===0?r=t.Da()?0:1:!a.ba()&&t.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function tee(e,t){const n=Ti(e);let i=!1;for(const r of t){const a=r.query,l=n.queries.get(a);if(l){for(const h of l.Sa)h.Fa(r)&&(i=!0);l.wa=r}}i&&GA(n)}function nee(e,t,n){const i=Ti(e),r=i.queries.get(t);if(r)for(const a of r.Sa)a.onError(n);i.queries.delete(t)}function GA(e){e.Ca.forEach((t=>{t.next()}))}var Sk,p5;(p5=Sk||(Sk={})).Ma="default",p5.Cache="cache";class iee{constructor(t,n,i){this.query=t,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(t){if(!this.options.includeMetadataChanges){const i=[];for(const r of t.docChanges)r.type!==3&&i.push(r);t=new e_(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),n=!0):this.La(t,this.onlineState)&&(this.ka(t),n=!0),this.Na=t,n}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),n=!0),n}La(t,n){if(!t.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(t){t=e_.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==Sk.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wz{constructor(t){this.key=t}}class Hz{constructor(t){this.key=t}}class ree{constructor(t,n){this.query=t,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ni(),this.mutatedKeys=Ni(),this.eu=dz(t),this.tu=new Ov(this.eu)}get nu(){return this.Ya}ru(t,n){const i=n?n.iu:new f5,r=n?n.tu:this.tu;let a=n?n.mutatedKeys:this.mutatedKeys,l=r,h=!1;const s=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,p=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal(((_,x)=>{const T=r.get(_),k=_T(this.query,x)?x:null,A=!!T&&this.mutatedKeys.has(T.key),M=!!k&&(k.hasLocalMutations||this.mutatedKeys.has(k.key)&&k.hasCommittedMutations);let R=!1;T&&k?T.data.isEqual(k.data)?A!==M&&(i.track({type:3,doc:k}),R=!0):this.su(T,k)||(i.track({type:2,doc:k}),R=!0,(s&&this.eu(k,s)>0||p&&this.eu(k,p)<0)&&(h=!0)):!T&&k?(i.track({type:0,doc:k}),R=!0):T&&!k&&(i.track({type:1,doc:T}),R=!0,(s||p)&&(h=!0)),R&&(k?(l=l.add(k),a=M?a.add(_):a.delete(_)):(l=l.delete(_),a=a.delete(_)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const _=this.query.limitType==="F"?l.last():l.first();l=l.delete(_.key),a=a.delete(_.key),i.track({type:1,doc:_})}return{tu:l,iu:i,Cs:h,mutatedKeys:a}}su(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,i,r){const a=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const l=t.iu.ya();l.sort(((_,x)=>(function(k,A){const M=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return fi(20277,{Rt:R})}};return M(k)-M(A)})(_.type,x.type)||this.eu(_.doc,x.doc))),this.ou(i),r=r??!1;const h=n&&!r?this._u():[],s=this.Xa.size===0&&this.current&&!r?1:0,p=s!==this.Za;return this.Za=s,l.length!==0||p?{snapshot:new e_(this.query,t.tu,a,l,t.mutatedKeys,s===0,p,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new f5,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),t.modifiedDocuments.forEach((n=>{})),t.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Ni(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const n=[];return t.forEach((i=>{this.Xa.has(i)||n.push(new Hz(i))})),this.Xa.forEach((i=>{t.has(i)||n.push(new Wz(i))})),n}cu(t){this.Ya=t.Qs,this.Xa=Ni();const n=this.ru(t.documents);return this.applyChanges(n,!0)}lu(){return e_.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const qA="SyncEngine";class see{constructor(t,n,i){this.query=t,this.targetId=n,this.view=i}}class oee{constructor(t){this.key=t,this.hu=!1}}class aee{constructor(t,n,i,r,a,l){this.localStore=t,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new ng((h=>uz(h)),vT),this.Iu=new Map,this.Eu=new Set,this.du=new xs(ei.comparator),this.Au=new Map,this.Ru=new VA,this.Vu={},this.mu=new Map,this.fu=Qv.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function lee(e,t,n=!0){const i=Zz(e);let r;const a=i.Tu.get(t);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),r=a.view.lu()):r=await Gz(i,t,n,!0),r}async function cee(e,t){const n=Zz(e);await Gz(n,t,!0,!1)}async function Gz(e,t,n,i){const r=await CQ(e.localStore,Ju(t)),a=r.targetId,l=e.sharedClientState.addLocalQueryTarget(a,n);let h;return i&&(h=await uee(e,t,a,l==="current",r.resumeToken)),e.isPrimaryClient&&n&&Fz(e.remoteStore,r),h}async function uee(e,t,n,i,r){e.pu=(x,T,k)=>(async function(M,R,F,z){let G=R.view.ru(F);G.Cs&&(G=await a5(M.localStore,R.query,!1).then((({documents:X})=>R.view.ru(X,G))));const Y=z&&z.targetChanges.get(R.targetId),J=z&&z.targetMismatches.get(R.targetId)!=null,re=R.view.applyChanges(G,M.isPrimaryClient,Y,J);return v5(M,R.targetId,re.au),re.snapshot})(e,x,T,k);const a=await a5(e.localStore,t,!0),l=new ree(t,a.Qs),h=l.ru(a.documents),s=Tb.createSynthesizedTargetChangeForCurrentChange(n,i&&e.onlineState!=="Offline",r),p=l.applyChanges(h,e.isPrimaryClient,s);v5(e,n,p.au);const _=new see(t,n,l);return e.Tu.set(t,_),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),p.snapshot}async function dee(e,t,n){const i=Ti(e),r=i.Tu.get(t),a=i.Iu.get(r.targetId);if(a.length>1)return i.Iu.set(r.targetId,a.filter((l=>!vT(l,t)))),void i.Tu.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await wk(i.localStore,r.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(r.targetId),n&&NA(i.remoteStore,r.targetId),Ek(i,r.targetId)})).catch(y_)):(Ek(i,r.targetId),await wk(i.localStore,r.targetId,!0))}async function hee(e,t){const n=Ti(e),i=n.Tu.get(t),r=n.Iu.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),NA(n.remoteStore,i.targetId))}async function fee(e,t,n){const i=bee(e);try{const r=await(function(l,h){const s=Ti(l),p=Jr.now(),_=h.reduce(((k,A)=>k.add(A.key)),Ni());let x,T;return s.persistence.runTransaction("Locally write mutations","readwrite",(k=>{let A=bh(),M=Ni();return s.Ns.getEntries(k,_).next((R=>{A=R,A.forEach(((F,z)=>{z.isValidDocument()||(M=M.add(F))}))})).next((()=>s.localDocuments.getOverlayedDocuments(k,A))).next((R=>{x=R;const F=[];for(const z of h){const G=EJ(z,x.get(z.key).overlayedDocument);G!=null&&F.push(new um(z.key,G,iz(G.value.mapValue),hu.exists(!0)))}return s.mutationQueue.addMutationBatch(k,p,F,h)})).next((R=>{T=R;const F=R.applyToLocalDocumentSet(x,M);return s.documentOverlayCache.saveOverlays(k,R.batchId,F)}))})).then((()=>({batchId:T.batchId,changes:fz(x)})))})(i.localStore,t);i.sharedClientState.addPendingMutation(r.batchId),(function(l,h,s){let p=l.Vu[l.currentUser.toKey()];p||(p=new xs(zi)),p=p.insert(h,s),l.Vu[l.currentUser.toKey()]=p})(i,r.batchId,n),await Eb(i,r.changes),await ST(i.remoteStore)}catch(r){const a=HA(r,"Failed to persist write");n.reject(a)}}async function qz(e,t){const n=Ti(e);try{const i=await TQ(n.localStore,t);t.targetChanges.forEach(((r,a)=>{const l=n.Au.get(a);l&&(kr(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?l.hu=!0:r.modifiedDocuments.size>0?kr(l.hu,14607):r.removedDocuments.size>0&&(kr(l.hu,42227),l.hu=!1))})),await Eb(n,i,t)}catch(i){await y_(i)}}function g5(e,t,n){const i=Ti(e);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Tu.forEach(((a,l)=>{const h=l.view.va(t);h.snapshot&&r.push(h.snapshot)})),(function(l,h){const s=Ti(l);s.onlineState=h;let p=!1;s.queries.forEach(((_,x)=>{for(const T of x.Sa)T.va(h)&&(p=!0)})),p&&GA(s)})(i.eventManager,t),r.length&&i.Pu.H_(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function mee(e,t,n){const i=Ti(e);i.sharedClientState.updateQueryState(t,"rejected",n);const r=i.Au.get(t),a=r&&r.key;if(a){let l=new xs(ei.comparator);l=l.insert(a,Oa.newNoDocument(a,yi.min()));const h=Ni().add(a),s=new xT(yi.min(),new Map,new xs(zi),l,h);await qz(i,s),i.du=i.du.remove(a),i.Au.delete(t),KA(i)}else await wk(i.localStore,t,!1).then((()=>Ek(i,t,n))).catch(y_)}async function pee(e,t){const n=Ti(e),i=t.batch.batchId;try{const r=await wQ(n.localStore,t);Xz(n,i,null),Kz(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Eb(n,r)}catch(r){await y_(r)}}async function gee(e,t,n){const i=Ti(e);try{const r=await(function(l,h){const s=Ti(l);return s.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let _;return s.mutationQueue.lookupMutationBatch(p,h).next((x=>(kr(x!==null,37113),_=x.keys(),s.mutationQueue.removeMutationBatch(p,x)))).next((()=>s.mutationQueue.performConsistencyCheck(p))).next((()=>s.documentOverlayCache.removeOverlaysForBatchId(p,_,h))).next((()=>s.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,_))).next((()=>s.localDocuments.getDocuments(p,_)))}))})(i.localStore,t);Xz(i,t,n),Kz(i,t),i.sharedClientState.updateMutationState(t,"rejected",n),await Eb(i,r)}catch(r){await y_(r)}}function Kz(e,t){(e.mu.get(t)||[]).forEach((n=>{n.resolve()})),e.mu.delete(t)}function Xz(e,t,n){const i=Ti(e);let r=i.Vu[i.currentUser.toKey()];if(r){const a=r.get(t);a&&(n?a.reject(n):a.resolve(),r=r.remove(t)),i.Vu[i.currentUser.toKey()]=r}}function Ek(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const i of e.Iu.get(t))e.Tu.delete(i),n&&e.Pu.yu(i,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach((i=>{e.Ru.containsKey(i)||Yz(e,i)}))}function Yz(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);n!==null&&(NA(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),KA(e))}function v5(e,t,n){for(const i of n)i instanceof Wz?(e.Ru.addReference(i.key,t),vee(e,i)):i instanceof Hz?(On(qA,"Document no longer in limbo: "+i.key),e.Ru.removeReference(i.key,t),e.Ru.containsKey(i.key)||Yz(e,i.key)):fi(19791,{wu:i})}function vee(e,t){const n=t.key,i=n.path.canonicalString();e.du.get(n)||e.Eu.has(i)||(On(qA,"New document in limbo: "+n),e.Eu.add(i),KA(e))}function KA(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new ei(ys.fromString(t)),i=e.fu.next();e.Au.set(i,new oee(n)),e.du=e.du.insert(n,i),Fz(e.remoteStore,new Af(Ju(PA(n.path)),i,"TargetPurposeLimboResolution",fT.ce))}}async function Eb(e,t,n){const i=Ti(e),r=[],a=[],l=[];i.Tu.isEmpty()||(i.Tu.forEach(((h,s)=>{l.push(i.pu(s,t,n).then((p=>{if((p||n)&&i.isPrimaryClient){const _=p?!p.fromCache:n?.targetChanges.get(s.targetId)?.current;i.sharedClientState.updateQueryState(s.targetId,_?"current":"not-current")}if(p){r.push(p);const _=FA.As(s.targetId,p);a.push(_)}})))})),await Promise.all(l),i.Pu.H_(r),await(async function(s,p){const _=Ti(s);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(x=>ln.forEach(p,(T=>ln.forEach(T.Es,(k=>_.persistence.referenceDelegate.addReference(x,T.targetId,k))).next((()=>ln.forEach(T.ds,(k=>_.persistence.referenceDelegate.removeReference(x,T.targetId,k)))))))))}catch(x){if(!b_(x))throw x;On(zA,"Failed to update sequence numbers: "+x)}for(const x of p){const T=x.targetId;if(!x.fromCache){const k=_.Ms.get(T),A=k.snapshotVersion,M=k.withLastLimboFreeSnapshotVersion(A);_.Ms=_.Ms.insert(T,M)}}})(i.localStore,a))}async function _ee(e,t){const n=Ti(e);if(!n.currentUser.isEqual(t)){On(qA,"User change. New user:",t.toKey());const i=await Rz(n.localStore,t);n.currentUser=t,(function(a,l){a.mu.forEach((h=>{h.forEach((s=>{s.reject(new Wn(mn.CANCELLED,l))}))})),a.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await Eb(n,i.Ls)}}function yee(e,t){const n=Ti(e),i=n.Au.get(t);if(i&&i.hu)return Ni().add(i.key);{let r=Ni();const a=n.Iu.get(t);if(!a)return r;for(const l of a){const h=n.Tu.get(l);r=r.unionWith(h.view.nu)}return r}}function Zz(e){const t=Ti(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=qz.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=yee.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=mee.bind(null,t),t.Pu.H_=tee.bind(null,t.eventManager),t.Pu.yu=nee.bind(null,t.eventManager),t}function bee(e){const t=Ti(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=pee.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=gee.bind(null,t),t}class Tw{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=wT(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,n){return null}Mu(t,n){return null}vu(t){return xQ(this.persistence,new _Q,t.initialUser,this.serializer)}Cu(t){return new Lz(BA.mi,this.serializer)}Du(t){return new IQ}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Tw.provider={build:()=>new Tw};class xee extends Tw{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,n){kr(this.persistence.referenceDelegate instanceof xw,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new iQ(i,t.asyncQueue,n)}Cu(t){const n=this.cacheSizeBytes!==void 0?kl.withCacheSize(this.cacheSizeBytes):kl.DEFAULT;return new Lz((i=>xw.mi(i,n)),this.serializer)}}class Ck{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>g5(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=_ee.bind(null,this.syncEngine),await YQ(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new JQ})()}createDatastore(t){const n=wT(t.databaseInfo.databaseId),i=(function(a){return new LQ(a)})(t.databaseInfo);return(function(a,l,h,s){return new BQ(a,l,h,s)})(t.authCredentials,t.appCheckCredentials,i,n)}createRemoteStore(t){return(function(i,r,a,l,h){return new zQ(i,r,a,l,h)})(this.localStore,this.datastore,t.asyncQueue,(n=>g5(this.syncEngine,n,0)),(function(){return u5.v()?new u5:new AQ})())}createSyncEngine(t,n){return(function(r,a,l,h,s,p,_){const x=new aee(r,a,l,h,s,p);return _&&(x.gu=!0),x})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const i=Ti(n);On(jp,"RemoteStore shutting down."),i.Ea.add(5),await Sb(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Ck.provider={build:()=>new Ck};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wee{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):yh("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,n){setTimeout((()=>{this.muted||t(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const em="FirestoreClient";class Tee{constructor(t,n,i,r,a){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=Da.UNAUTHENTICATED,this.clientId=TA.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,(async l=>{On(em,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(i,(l=>(On(em,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new $f;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const i=HA(n,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}async function tC(e,t){e.asyncQueue.verifyOperationInProgress(),On(em,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let i=n.initialUser;e.setCredentialChangeListener((async r=>{i.isEqual(r)||(await Rz(t.localStore,r),i=r)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function _5(e,t){e.asyncQueue.verifyOperationInProgress();const n=await See(e);On(em,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((i=>h5(t.remoteStore,i))),e.setAppCheckTokenChangeListener(((i,r)=>h5(t.remoteStore,r))),e._onlineComponents=t}async function See(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){On(em,"Using user provided OfflineComponentProvider");try{await tC(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!(function(r){return r.name==="FirebaseError"?r.code===mn.FAILED_PRECONDITION||r.code===mn.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(n))throw n;Kv("Error using user provided cache. Falling back to memory cache: "+n),await tC(e,new Tw)}}else On(em,"Using default OfflineComponentProvider"),await tC(e,new xee(void 0));return e._offlineComponents}async function Jz(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(On(em,"Using user provided OnlineComponentProvider"),await _5(e,e._uninitializedComponentsProvider._online)):(On(em,"Using default OnlineComponentProvider"),await _5(e,new Ck))),e._onlineComponents}function Eee(e){return Jz(e).then((t=>t.syncEngine))}async function Cee(e){const t=await Jz(e),n=t.eventManager;return n.onListen=lee.bind(null,t.syncEngine),n.onUnlisten=dee.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=cee.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=hee.bind(null,t.syncEngine),n}function kee(e,t,n={}){const i=new $f;return e.asyncQueue.enqueueAndForget((async()=>(function(a,l,h,s,p){const _=new wee({next:T=>{_.Nu(),l.enqueueAndForget((()=>eee(a,x)));const k=T.docs.has(h);!k&&T.fromCache?p.reject(new Wn(mn.UNAVAILABLE,"Failed to get document because the client is offline.")):k&&T.fromCache&&s&&s.source==="server"?p.reject(new Wn(mn.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(T)},error:T=>p.reject(T)}),x=new iee(PA(h.path),_,{includeMetadataChanges:!0,qa:!0});return QQ(a,x)})(await Cee(e),e.asyncQueue,t,n,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qz(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y5=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eN="firestore.googleapis.com",b5=!0;class x5{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new Wn(mn.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=eN,this.ssl=b5}else this.host=t.host,this.ssl=t.ssl??b5;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=Dz;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<tQ)throw new Wn(mn.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}BZ("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Qz(t.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Wn(mn.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Wn(mn.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Wn(mn.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(i,r){return i.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class XA{constructor(t,n,i,r){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new x5({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Wn(mn.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Wn(mn.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new x5(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new CZ;switch(i.type){case"firstParty":return new PZ(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Wn(mn.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const i=y5.get(n);i&&(On("ComponentProvider","Removing Datastore"),y5.delete(n),i.terminate())})(this),Promise.resolve()}}function Iee(e,t,n,i={}){e=Kf(e,XA);const r=g_(t),a=e._getSettings(),l={...a,emulatorOptions:e._getEmulatorOptions()},h=`${t}:${n}`;r&&(X6(`https://${h}`),Y6("Firestore",!0)),a.host!==eN&&a.host!==h&&Kv("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const s={...a,host:h,ssl:r,emulatorOptions:i};if(!qf(s,l)&&(e._setSettings(s),i.mockUserToken)){let p,_;if(typeof i.mockUserToken=="string")p=i.mockUserToken,_=Da.MOCK_USER;else{p=Rq(i.mockUserToken,e._app?.options.projectId);const x=i.mockUserToken.sub||i.mockUserToken.user_id;if(!x)throw new Wn(mn.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new Da(x)}e._authCredentials=new kZ(new GF(p,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(t,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new YA(this.firestore,t,this._query)}}class vo{constructor(t,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new z0(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new vo(this.firestore,t,this._key)}toJSON(){return{type:vo._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,i){if(xb(n,vo._jsonSchema))return new vo(t,i||null,new ei(ys.fromString(n.referencePath)))}}vo._jsonSchemaVersion="firestore/documentReference/1.0",vo._jsonSchema={type:oo("string",vo._jsonSchemaVersion),referencePath:oo("string")};class z0 extends YA{constructor(t,n,i){super(t,n,PA(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new vo(this.firestore,null,new ei(t))}withConverter(t){return new z0(this.firestore,t,this._path)}}function kp(e,t,...n){if(e=$o(e),arguments.length===1&&(t=TA.newId()),VZ("doc","path",t),e instanceof XA){const i=ys.fromString(t,...n);return OR(i),new vo(e,null,new ei(i))}{if(!(e instanceof vo||e instanceof z0))throw new Wn(mn.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(ys.fromString(t,...n));return OR(i),new vo(e.firestore,e instanceof z0?e.converter:null,new ei(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w5="AsyncQueue";class T5{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Vz(this,"async_queue_retry"),this._c=()=>{const i=eC();i&&On(w5,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=t;const n=eC();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const n=eC();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new $f;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!b_(t))throw t;On(w5,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const n=this.ac.then((()=>(this.rc=!0,t().catch((i=>{throw this.nc=i,this.rc=!1,yh("INTERNAL UNHANDLED ERROR: ",S5(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=n,n}enqueueAfterDelay(t,n,i){this.uc(),this.oc.indexOf(t)>-1&&(n=0);const r=WA.createAndSchedule(this,t,n,i,(a=>this.hc(a)));return this.tc.push(r),r}uc(){this.nc&&fi(47125,{Pc:S5(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const n of this.tc)if(n.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((n,i)=>n.targetTimeMs-i.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const n=this.tc.indexOf(t);this.tc.splice(n,1)}}function S5(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}class Cb extends XA{constructor(t,n,i,r){super(t,n,i,r),this.type="firestore",this._queue=new T5,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new T5(t),this._firestoreClient=void 0,await t}}}function Aee(e,t){const n=typeof e=="object"?e:eF(),i=typeof e=="string"?e:mw,r=hA(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const a=Dq("firestore");a&&Iee(r,...a)}return r}function tN(e){if(e._terminated)throw new Wn(mn.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||Pee(e),e._firestoreClient}function Pee(e){const t=e._freezeSettings(),n=(function(r,a,l,h){return new KZ(r,a,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,Qz(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(e._databaseId,e._app?.options.appId||"",e._persistenceKey,t);e._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new Tee(e._authCredentials,e._appCheckCredentials,e._queue,n,e._componentsProvider&&(function(r){const a=r?._online.build();return{_offline:r?._offline.build(a),_online:a}})(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Lc(ua.fromBase64String(t))}catch(n){throw new Wn(mn.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Lc(ua.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Lc._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(xb(t,Lc._jsonSchema))return Lc.fromBase64String(t.bytes)}}Lc._jsonSchemaVersion="firestore/bytes/1.0",Lc._jsonSchema={type:oo("string",Lc._jsonSchemaVersion),bytes:oo("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new Wn(mn.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new oa(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new Wn(mn.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Wn(mn.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return zi(this._lat,t._lat)||zi(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ed._jsonSchemaVersion}}static fromJSON(t){if(xb(t,ed._jsonSchema))return new ed(t.latitude,t.longitude)}}ed._jsonSchemaVersion="firestore/geoPoint/1.0",ed._jsonSchema={type:oo("string",ed._jsonSchemaVersion),latitude:oo("number"),longitude:oo("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(t){this._values=(t||[]).map((n=>n))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(i,r){if(i.length!==r.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==r[a])return!1;return!0})(this._values,t._values)}toJSON(){return{type:td._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(xb(t,td._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((n=>typeof n=="number")))return new td(t.vectorValues);throw new Wn(mn.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}td._jsonSchemaVersion="firestore/vectorValue/1.0",td._jsonSchema={type:oo("string",td._jsonSchemaVersion),vectorValues:oo("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mee=/^__.*__$/;class Dee{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return this.fieldMask!==null?new um(t,this.data,this.fieldMask,n,this.fieldTransforms):new wb(t,this.data,n,this.fieldTransforms)}}class nN{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return new um(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function iN(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fi(40011,{Ac:e})}}class kT{constructor(t,n,i,r,a,l){this.settings=t,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new kT({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const n=this.path?.child(t),i=this.Vc({path:n,fc:!1});return i.gc(t),i}yc(t){const n=this.path?.child(t),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return Sw(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((n=>t.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>t.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(iN(this.Ac)&&Mee.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class Lee{constructor(t,n,i){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=i||wT(t)}Cc(t,n,i,r=!1){return new kT({Ac:t,methodName:n,Dc:i,path:oa.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function rN(e){const t=e._freezeSettings(),n=wT(e._databaseId);return new Lee(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Ree(e,t,n,i,r,a={}){const l=e.Cc(a.merge||a.mergeFields?2:0,t,n,r);JA("Data must be an object, but it was:",l,i);const h=sN(i,l);let s,p;if(a.merge)s=new ic(l.fieldMask),p=l.fieldTransforms;else if(a.mergeFields){const _=[];for(const x of a.mergeFields){const T=kk(t,x,n);if(!l.contains(T))throw new Wn(mn.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);aN(_,T)||_.push(T)}s=new ic(_),p=l.fieldTransforms.filter((x=>s.covers(x.field)))}else s=null,p=l.fieldTransforms;return new Dee(new Il(h),s,p)}class IT extends CT{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof IT}}function Oee(e,t,n){return new kT({Ac:3,Dc:t.settings.Dc,methodName:e._methodName,fc:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class ZA extends CT{constructor(t,n){super(t),this.vc=n}_toFieldTransform(t){const n=Oee(this,t,!0),i=this.vc.map((a=>kb(a,n))),r=new Jv(i);return new xJ(t.path,r)}isEqual(t){return t instanceof ZA&&qf(this.vc,t.vc)}}function Vee(e,t,n,i){const r=e.Cc(1,t,n);JA("Data must be an object, but it was:",r,i);const a=[],l=Il.empty();cm(i,((s,p)=>{const _=QA(t,s,n);p=$o(p);const x=r.yc(_);if(p instanceof IT)a.push(_);else{const T=kb(p,x);T!=null&&(a.push(_),l.set(_,T))}}));const h=new ic(a);return new nN(l,h,r.fieldTransforms)}function Bee(e,t,n,i,r,a){const l=e.Cc(1,t,n),h=[kk(t,i,n)],s=[r];if(a.length%2!=0)throw new Wn(mn.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<a.length;T+=2)h.push(kk(t,a[T])),s.push(a[T+1]);const p=[],_=Il.empty();for(let T=h.length-1;T>=0;--T)if(!aN(p,h[T])){const k=h[T];let A=s[T];A=$o(A);const M=l.yc(k);if(A instanceof IT)p.push(k);else{const R=kb(A,M);R!=null&&(p.push(k),_.set(k,R))}}const x=new ic(p);return new nN(_,x,l.fieldTransforms)}function kb(e,t){if(oN(e=$o(e)))return JA("Unsupported field value:",t,e),sN(e,t);if(e instanceof CT)return(function(i,r){if(!iN(r.Ac))throw r.Sc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(r);a&&r.fieldTransforms.push(a)})(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(i,r){const a=[];let l=0;for(const h of i){let s=kb(h,r.wc(l));s==null&&(s={nullValue:"NULL_VALUE"}),a.push(s),l++}return{arrayValue:{values:a}}})(e,t)}return(function(i,r){if((i=$o(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return _J(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=Jr.fromDate(i);return{timestampValue:bw(r.serializer,a)}}if(i instanceof Jr){const a=new Jr(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:bw(r.serializer,a)}}if(i instanceof ed)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Lc)return{bytesValue:Ez(r.serializer,i._byteString)};if(i instanceof vo){const a=r.databaseId,l=i.firestore._databaseId;if(!l.isEqual(a))throw r.Sc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:OA(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof td)return(function(l,h){return{mapValue:{fields:{[tz]:{stringValue:nz},[pw]:{arrayValue:{values:l.toArray().map((p=>{if(typeof p!="number")throw h.Sc("VectorValues must only contain numeric values.");return MA(h.serializer,p)}))}}}}}})(i,r);throw r.Sc(`Unsupported field value: ${SA(i)}`)})(e,t)}function sN(e,t){const n={};return XF(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):cm(e,((i,r)=>{const a=kb(r,t.mc(i));a!=null&&(n[i]=a)})),{mapValue:{fields:n}}}function oN(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Jr||e instanceof ed||e instanceof Lc||e instanceof vo||e instanceof CT||e instanceof td)}function JA(e,t,n){if(!oN(n)||!qF(n)){const i=SA(n);throw i==="an object"?t.Sc(e+" a custom object"):t.Sc(e+" "+i)}}function kk(e,t,n){if((t=$o(t))instanceof ET)return t._internalPath;if(typeof t=="string")return QA(e,t);throw Sw("Field path arguments must be of type string or ",e,!1,void 0,n)}const Fee=new RegExp("[~\\*/\\[\\]]");function QA(e,t,n){if(t.search(Fee)>=0)throw Sw(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new ET(...t.split("."))._internalPath}catch{throw Sw(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Sw(e,t,n,i,r){const a=i&&!i.isEmpty(),l=r!==void 0;let h=`Function ${t}() called with invalid data`;n&&(h+=" (via `toFirestore()`)"),h+=". ";let s="";return(a||l)&&(s+=" (found",a&&(s+=` in field ${i}`),l&&(s+=` in document ${r}`),s+=")"),new Wn(mn.INVALID_ARGUMENT,h+e+s)}function aN(e,t){return e.some((n=>n.isEqual(t)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{constructor(t,n,i,r,a){this._firestore=t,this._userDataWriter=n,this._key=i,this._document=r,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new vo(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new zee(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(cN("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class zee extends lN{data(){return super.data()}}function cN(e,t){return typeof t=="string"?QA(e,t):t instanceof ET?t._internalPath:t._delegate._internalPath}class Nee{convertValue(t,n="none"){switch(Jf(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Hs(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Zf(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw fi(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const i={};return cm(t,((r,a)=>{i[r]=this.convertValue(a,n)})),i}convertVectorValue(t){const n=t.fields?.[pw].arrayValue?.values?.map((i=>Hs(i.doubleValue)));return new td(n)}convertGeoPoint(t){return new ed(Hs(t.latitude),Hs(t.longitude))}convertArray(t,n){return(t.values||[]).map((i=>this.convertValue(i,n)))}convertServerTimestamp(t,n){switch(n){case"previous":const i=pT(t);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(O0(t));default:return null}}convertTimestamp(t){const n=Yf(t);return new Jr(n.seconds,n.nanos)}convertDocumentKey(t,n){const i=ys.fromString(t);kr(Mz(i),9688,{name:t});const r=new V0(i.get(1),i.get(3)),a=new ei(i.popFirst(5));return r.isEqual(n)||yh(`Document ${a} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $ee(e,t,n){let i;return i=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,i}class Uy{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Ip extends lN{constructor(t,n,i,r,a,l){super(t,n,i,r,l),this._firestore=t,this._firestoreImpl=t,this.metadata=a}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new I1(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const i=this._document.data.field(cN("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Wn(mn.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=Ip._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ip._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ip._jsonSchema={type:oo("string",Ip._jsonSchemaVersion),bundleSource:oo("string","DocumentSnapshot"),bundleName:oo("string"),bundle:oo("string")};class I1 extends Ip{data(t={}){return super.data(t)}}class d0{constructor(t,n,i,r){this._firestore=t,this._userDataWriter=n,this._snapshot=r,this.metadata=new Uy(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const t=[];return this.forEach((n=>t.push(n))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach((i=>{t.call(n,new I1(this._firestore,this._userDataWriter,i.key,i,new Uy(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Wn(mn.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(r,a){if(r._snapshot.oldDocs.isEmpty()){let l=0;return r._snapshot.docChanges.map((h=>{const s=new I1(r._firestore,r._userDataWriter,h.doc.key,h.doc,new Uy(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);return h.doc,{type:"added",doc:s,oldIndex:-1,newIndex:l++}}))}{let l=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((h=>a||h.type!==3)).map((h=>{const s=new I1(r._firestore,r._userDataWriter,h.doc.key,h.doc,new Uy(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);let p=-1,_=-1;return h.type!==0&&(p=l.indexOf(h.doc.key),l=l.delete(h.doc.key)),h.type!==1&&(l=l.add(h.doc),_=l.indexOf(h.doc.key)),{type:Uee(h.type),doc:s,oldIndex:p,newIndex:_}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Wn(mn.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=d0._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=TA.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],r=[];return this.docs.forEach((a=>{a._document!==null&&(n.push(a._document),i.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),r.push(a.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function Uee(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return fi(61501,{type:e})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jee(e){e=Kf(e,vo);const t=Kf(e.firestore,Cb);return kee(tN(t),e._key).then((n=>Gee(t,e,n)))}d0._jsonSchemaVersion="firestore/querySnapshot/1.0",d0._jsonSchema={type:oo("string",d0._jsonSchemaVersion),bundleSource:oo("string","QuerySnapshot"),bundleName:oo("string"),bundle:oo("string")};class Wee extends Nee{constructor(t){super(),this.firestore=t}convertBytes(t){return new Lc(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new vo(this.firestore,null,n)}}function uN(e,t,n){e=Kf(e,vo);const i=Kf(e.firestore,Cb),r=$ee(e.converter,t,n);return eP(i,[Ree(rN(i),"setDoc",e._key,r,e.converter!==null,n).toMutation(e._key,hu.none())])}function AT(e,t,n,...i){e=Kf(e,vo);const r=Kf(e.firestore,Cb),a=rN(r);let l;return l=typeof(t=$o(t))=="string"||t instanceof ET?Bee(a,"updateDoc",e._key,t,n,i):Vee(a,"updateDoc",e._key,t),eP(r,[l.toMutation(e._key,hu.exists(!0))])}function Hee(e){return eP(Kf(e.firestore,Cb),[new DA(e._key,hu.none())])}function eP(e,t){return(function(i,r){const a=new $f;return i.asyncQueue.enqueueAndForget((async()=>fee(await Eee(i),r,a))),a.promise})(tN(e),t)}function Gee(e,t,n){const i=n.docs.get(t._key),r=new Wee(e);return new Ip(e,r,t._key,i,new Uy(n.hasPendingWrites,n.fromCache),t.converter)}function dN(...e){return new ZA("arrayUnion",e)}(function(t,n=!0){(function(r){__=r})(v_),qv(new zp("firestore",((i,{instanceIdentifier:r,options:a})=>{const l=i.getProvider("app").getImmediate(),h=new Cb(new IZ(i.getProvider("auth-internal")),new MZ(l,i.getProvider("app-check-internal")),(function(p,_){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new Wn(mn.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new V0(p.options.projectId,_)})(l,r),l);return a={useFetchStreams:n,...a},h._setSettings(a),h}),"PUBLIC").setMultipleInstances(!0)),zf(MR,DR,t),zf(MR,DR,"esm2020")})();const qee={apiKey:"AIzaSyBTy0tRrYfIvPYhZ-k49IsU_IS9WuTVxKA",authDomain:"singatrain.firebaseapp.com",projectId:"singatrain",storageBucket:"singatrain.firebasestorage.app",messagingSenderId:"773752736023",appId:"1:773752736023:web:456315abd28b9854058f52",measurementId:"G-ZQHSRHNBCB"},hN=Q6(qee),Ib=xA(hN),Ap=Aee(hN);async function Kee(e,t){try{return{success:!0,user:(await cY(Ib,e,t)).user}}catch(n){console.error=()=>{},setTimeout(()=>console.error=console.__proto__.error);let i="";switch(n.code){case"auth/email-already-in-use":i="This email is already registered.";break;case"auth/invalid-email":i="Please enter a valid email address.";break;case"auth/weak-password":i="Password should be at least 6 characters.";break;default:i="An unexpected error occurred during registration."}return{success:!1,message:i}}}async function Xee(e,t){if(!e||!t)return{success:!1,message:"Please enter both email and password."};try{return{success:!0,user:(await uY(Ib,e,t)).user}}catch(n){let i="";switch(n.code){case"auth/invalid-email":i="Please enter a valid email address.";break;case"auth/user-not-found":i="No account found with this email.";break;case"auth/wrong-password":i="Incorrect password. Please try again.";break;default:i="Login failed. Please check your details and try again."}return{success:!1,message:i}}}async function Yee(){try{return await fY(Ib),{success:!0}}catch(e){return PT(e)}}async function Zee(e){try{return await lY(Ib,e),{success:!0}}catch(t){return PT(t)}}const E5=e=>{try{return IF(Ib,e)}catch(t){console.warn("Auth observer failed:",t.message)}};async function Jee(e,t){try{return await uN(kp(Ap,"users",e),{name:t},{merge:!0}),{success:!0}}catch(n){return PT(n)}}async function Qee(e,t){try{const n=kp(Ap,"users",e);return await AT(n,{favorite_stations:dN(t)}),{success:!0}}catch(n){return PT(n)}}function PT(e){const t={"auth/invalid-email":"Invalid email address.","auth/user-not-found":"No user found with this email.","auth/wrong-password":"Incorrect password.","auth/weak-password":"Password should be at least 6 characters.","auth/email-already-in-use":"This email is already registered.","auth/network-request-failed":"Network error. Please check your connection.","permission-denied":"You do not have permission to perform this action."};return{success:!1,code:e.code,message:t[e.code]||"An unexpected error occurred."}}const yv={"Jurong East":{"North-South Line":"NS1","East-West Line":"EW24"},"Bukit Batok":{"North-South Line":"NS2"},"Bukit Gombak":{"North-South Line":"NS3"},"Choa Chu Kang":{"North-South Line":"NS4","LRT Line":"BP1"},"Yew Tee":{"North-South Line":"NS5"},Kranji:{"North-South Line":"NS7"},Marsiling:{"North-South Line":"NS8"},Woodlands:{"North-South Line":"NS9","Thomson-East Coast Line":"TE2"},Admiralty:{"North-South Line":"NS10"},Sembawang:{"North-South Line":"NS11"},Canberra:{"North-South Line":"NS12"},Yishun:{"North-South Line":"NS13"},Khatib:{"North-South Line":"NS14"},"Yio Chu Kang":{"North-South Line":"NS15"},"Ang Mo Kio":{"North-South Line":"NS16"},Bishan:{"North-South Line":"NS17","Circle Line":"CC15"},Braddell:{"North-South Line":"NS18"},"Toa Payoh":{"North-South Line":"NS19"},Novena:{"North-South Line":"NS20"},Newton:{"North-South Line":"NS21","Downtown Line":"DT11"},Orchard:{"North-South Line":"NS22","Thomson-East Coast Line":"TE14"},Somerset:{"North-South Line":"NS23"},"Dhoby Ghaut":{"North-South Line":"NS24","North-East Line":"NE6","Circle Line":"CC1"},"City Hall":{"North-South Line":"NS25","East-West Line":"EW13"},"Raffles Place":{"North-South Line":"NS26","East-West Line":"EW14"},"Marina Bay":{"North-South Line":"NS27","Thomson-East Coast Line":"TE20"},"Marina South Pier":{"North-South Line":"NS28"},"Pasir Ris":{"East-West Line":"EW1"},Tampines:{"East-West Line":"EW2","Downtown Line":"DT32"},Simei:{"East-West Line":"EW3","Downtown Line":"DT33"},"Tanah Merah":{"East-West Line":"EW4","Downtown Line":"DT34"},Bedok:{"East-West Line":"EW5"},Kembangan:{"East-West Line":"EW6"},Eunos:{"East-West Line":"EW7"},"Paya Lebar":{"East-West Line":"EW8","Circle Line":"CC9"},Aljunied:{"East-West Line":"EW9"},Kallang:{"East-West Line":"EW10"},Lavender:{"East-West Line":"EW11"},Bugis:{"East-West Line":"EW12","Downtown Line":"DT14"},"Tanjong Pagar":{"East-West Line":"EW15"},"Outram Park":{"East-West Line":"EW16","North-East Line":"NE3","Thomson-East Coast Line":"TE15"},"Tiong Bahru":{"East-West Line":"EW17"},Redhill:{"East-West Line":"EW18"},Queenstown:{"East-West Line":"EW19"},Commonwealth:{"East-West Line":"EW20"},"Buona Vista":{"East-West Line":"EW21","Circle Line":"CC22"},Dover:{"East-West Line":"EW22"},Clementi:{"East-West Line":"EW23"},"Chinese Garden":{"East-West Line":"EW25"},Lakeside:{"East-West Line":"EW26"},"Boon Lay":{"East-West Line":"EW27"},Pioneer:{"East-West Line":"EW28"},"Joo Koon":{"East-West Line":"EW29"},"Gul Circle":{"East-West Line":"EW30"},"Tuas Crescent":{"East-West Line":"EW31"},"Tuas West Road":{"East-West Line":"EW32"},"Tuas Link":{"East-West Line":"EW33"},"Dhoby Ghaut":{"Circle Line":"CC1","North-South Line":"NS24","North-East Line":"NE6"},"Bras Basah":{"Circle Line":"CC2"},Esplanade:{"Circle Line":"CC3"},Promenade:{"Circle Line":"CC4","Downtown Line":"DT15"},Bayfront:{"Circle Line":"CC5","Downtown Line":"DT16"},"Nicoll Highway":{"Circle Line":"CC5"},Stadium:{"Circle Line":"CC6"},Mountbatten:{"Circle Line":"CC7"},Dakota:{"Circle Line":"CC8"},"Paya Lebar":{"Circle Line":"CC9","East-West Line":"EW8"},MacPherson:{"Circle Line":"CC10","Downtown Line":"DT26"},"Tai Seng":{"Circle Line":"CC11"},Bartley:{"Circle Line":"CC12"},Serangoon:{"Circle Line":"CC13","North-East Line":"NE12"},"Lorong Chuan":{"Circle Line":"CC14"},Bishan:{"Circle Line":"CC15","North-South Line":"NS17"},Marymount:{"Circle Line":"CC16"},Caldecott:{"Circle Line":"CC17","Thomson-East Coast Line":"TE9"},"Botanic Gardens":{"Circle Line":"CC19","Downtown Line":"DT9"},"Farrer Road":{"Circle Line":"CC20"},"Holland Village":{"Circle Line":"CC21"},"Buona Vista":{"Circle Line":"CC22","East-West Line":"EW21"},"one-north":{"Circle Line":"CC23"},"Kent Ridge":{"Circle Line":"CC24"},"Haw Par Villa":{"Circle Line":"CC25"},"Pasir Panjang":{"Circle Line":"CC26"},"Labrador Park":{"Circle Line":"CC27"},"Telok Blangah":{"Circle Line":"CC28"},HarbourFront:{"Circle Line":"CC29","North-East Line":"NE1"},HarbourFront:{"North-East Line":"NE1","Circle Line":"CC29"},"Outram Park":{"North-East Line":"NE3","East-West Line":"EW16","Thomson-East Coast Line":"TE15"},Chinatown:{"North-East Line":"NE4","Downtown Line":"DT19"},"Clarke Quay":{"North-East Line":"NE5"},"Dhoby Ghaut":{"North-East Line":"NE6","North-South Line":"NS24","Circle Line":"CC1"},"Little India":{"North-East Line":"NE7","Downtown Line":"DT12"},"Farrer Park":{"North-East Line":"NE8"},"Boon Keng":{"North-East Line":"NE9"},"Potong Pasir":{"North-East Line":"NE10"},Woodleigh:{"North-East Line":"NE11"},Serangoon:{"North-East Line":"NE12","Circle Line":"CC13"},Kovan:{"North-East Line":"NE13"},Hougang:{"North-East Line":"NE14"},Buangkok:{"North-East Line":"NE15"},Sengkang:{"North-East Line":"NE16","LRT Line":"SW1"},Punggol:{"North-East Line":"NE17","LRT Line":"PW1"},"Punggol Coast":{"North-East Line":"NE18"},"Woodlands North":{"Thomson-East Coast Line":"TE1"},Woodlands:{"Thomson-East Coast Line":"TE2","North-South Line":"NS9"},"Woodlands South":{"Thomson-East Coast Line":"TE3"},Springleaf:{"Thomson-East Coast Line":"TE4"},Lentor:{"Thomson-East Coast Line":"TE5"},Mayflower:{"Thomson-East Coast Line":"TE6"},"Bright Hill":{"Thomson-East Coast Line":"TE7"},"Upper Thomson":{"Thomson-East Coast Line":"TE8"},Caldecott:{"Thomson-East Coast Line":"TE9","Circle Line":"CC17"},Stevens:{"Thomson-East Coast Line":"TE10","Downtown Line":"DT10"},Orchard:{"Thomson-East Coast Line":"TE14","North-South Line":"NS22"},"Shenton Way":{"Thomson-East Coast Line":"TE18"},"Gardens By The Bay":{"Thomson-East Coast Line":"TE19"},"Marina Bay":{"Thomson-East Coast Line":"TE20","North-South Line":"NS27"},"Bukit Panjang":{"Downtown Line":"DT1","LRT Line":"BP6"},Cashew:{"Downtown Line":"DT2"},Hillview:{"Downtown Line":"DT3"},"Beauty World":{"Downtown Line":"DT5"},"King Albert Park":{"Downtown Line":"DT6"},"Sixth Avenue":{"Downtown Line":"DT7"},"Tan Kah Kee":{"Downtown Line":"DT8"},"Botanic Gardens":{"Downtown Line":"DT9","Circle Line":"CC19"},Stevens:{"Downtown Line":"DT10","Thomson-East Coast Line":"TE10"},Newton:{"Downtown Line":"DT11","North-South Line":"NS21"},"Little India":{"Downtown Line":"DT12","North-East Line":"NE7"},Rochor:{"Downtown Line":"DT13"},Bugis:{"Downtown Line":"DT14","East-West Line":"EW12"},Promenade:{"Downtown Line":"DT15","Circle Line":"CC4"},Bayfront:{"Downtown Line":"DT16","Circle Line":"CC5"},Downtown:{"Downtown Line":"DT17"},"Telok Ayer":{"Downtown Line":"DT18"},Chinatown:{"Downtown Line":"DT19","North-East Line":"NE4"},"Fort Canning":{"Downtown Line":"DT20"},Bencoolen:{"Downtown Line":"DT21"},"Jalan Besar":{"Downtown Line":"DT22"},Bendemeer:{"Downtown Line":"DT23"},"Geylang Bahru":{"Downtown Line":"DT24"},Mattar:{"Downtown Line":"DT25"},MacPherson:{"Downtown Line":"DT26","Circle Line":"CC10"},Ubi:{"Downtown Line":"DT27"},"Kaki Bukit":{"Downtown Line":"DT28"},"Bedok North":{"Downtown Line":"DT29"},"Bedok Reservoir":{"Downtown Line":"DT30"},"Tampines West":{"Downtown Line":"DT31"},Tampines:{"Downtown Line":"DT32","East-West Line":"EW2"},"Tampines East":{"Downtown Line":"DT33"},Simei:{"East-West Line":"EW3"},Expo:{"Downtown Line":"DT34","East-West Line":"EW35"},"Changi Airport":{"Downtown Line":"DT36","East-West Line":"EW4"},"Choa Chu Kang":{"LRT Line":"BP1","North-South Line":"NS4"},"Keat Hong":{"LRT Line":"BP2"},"Teck Whye":{"LRT Line":"BP3"},Phoenix:{"LRT Line":"BP4"},Senja:{"LRT Line":"BP5"},"Bukit Panjang":{"LRT Line":"BP6","Downtown Line":"DT1"},Sengkang:{"LRT Line":"SW1","North-East Line":"NE16"},Compassvale:{"LRT Line":"SW2"},Rumbia:{"LRT Line":"SW3"},Bakau:{"LRT Line":"SW4"},Kangkar:{"LRT Line":"SW5"},Renjong:{"LRT Line":"SW6"},Thanggam:{"LRT Line":"SW7"},Fernvale:{"LRT Line":"SW8"},Punggol:{"LRT Line":"PW1","North-East Line":"NE17"},Oasis:{"LRT Line":"PW2"},Damai:{"LRT Line":"PW3"},Sumang:{"LRT Line":"PW4"},Prentice:{"LRT Line":"PW5"},"Sam Kee":{"LRT Line":"PW6"},"Punggol Point":{"LRT Line":"PW7"},Cove:{"LRT Line":"PW8"}},ete="cC6wlxIHROGAyH+80wpqbg==",Ik=ete,tte={class:"dashboard-view"},nte={class:"hero row align-items-center gy-5"},ite={class:"col-lg-12 hero-intro","data-aos":"fade-up"},rte={class:"hero-cta container-fluid"},ste={class:"col-lg-12 hero-illustration text-center","data-aos":"fade-left"},ote={key:0,class:"station-highlight-overlay"},ate={class:"live-tools mt-5","data-aos":"fade-up","data-aos-delay":"150"},lte={class:"ticker-station d-flex align-items-center gap-2"},cte={class:"ticker-line tab-desc mt-1"},ute={class:"live-clock"},dte={class:"ticker-times"},hte={key:0,class:"tab-desc small"},fte={class:"row g-4 mt-4"},mte={class:"col-lg-6","data-aos":"fade-up","data-aos-delay":"250"},pte={class:"section-card h-100"},gte={class:"tab-desc"},vte={class:"list-unstyled mt-3"},_te={key:0,class:"tab-desc"},yte={class:"flex-grow-1 d-flex flex-column gap- w-100"},bte={class:"d-flex justify-content-between align-items-start"},xte={class:"favorite-label"},wte={class:"text-muted small"},Tte=["onClick"],Ste={class:"arrival-times d-flex flex-wrap gap-2"},Ete={class:"first-crowd d-flex gap-3 small text-muted"},Cte={class:"col-lg-6","data-aos":"fade-up","data-aos-delay":"350"},kte={class:"section-card h-100"},Ite={class:"list-unstyled mb-0"},Ate="https://corsproxy.io/?",C5={__name:"Dashboard",setup(e){const t=U6({updateIntervalMs:1e3}),n=tt(!1),i=tt(!1),r=tt(!0),a=tt(!1),l=tt(1),h=tt(0),s=tt(0),p=tt(!1),_=tt({x:0,y:0}),x=tt(null),T=tt(null),k=xA(),A=tt(null),M=tt({x:0,y:0}),R=tt(null),F=tt([]),z=tt("Never");function G(fe){if(fe.line)return fe.line;const Ie=r0[fe.station];return!Ie||!Ie.length?null:Ie[0]}function Y(fe,Ie){const je=yv[fe];if(je)return je[Ie]}const J=so({index:0,station:Bx[0],arrivals:[],lineColor:oh(Bx[0].line)}),re=tt("--:--:--"),X=tt(null),U=tt(null),{state:H,setActiveTab:W,removeFavorite:ie}=Gv(),Q=me(()=>H.favorites);function te(fe){return fe<=0?"Arriving":`${Math.round(fe)} min`}async function ke(){const fe=await Promise.all(Q.value.map(async Ie=>{const je=G(Ie);if(!je)return Ie;const yt=(t.getArrivals()[Ie.station]||{})[je]||[],wt=$t[je];let Lt=wt?await Re(wt):null,Dt="NA";if(Lt?.length){const gn=Y(Ie.station,je),Kt=Lt.find(Cn=>Cn.stationCode===gn);Kt&&(Dt=Kt.crowdLevel)}return{...Ie,line:je,arrivals:yt.slice(0,3),firstTrainTime:Pt[je]||"N/A",lastTrainTime:"",crowdLevel:Dt}}));H.favorites=fe}async function Re(fe){try{const Ie=Ate+encodeURIComponent(`https://datamall2.mytransport.sg/ltaodataservice/PCDRealTime?TrainLine=${fe}`),je=await fetch(Ie,{method:"GET",headers:{AccountKey:Ik,accept:"application/json"}});if(!je.ok)return null;const Xe=await je.json();return!Xe.value||!Array.isArray(Xe.value)?null:Xe.value.map(yt=>({stationCode:yt.Station,crowdLevel:yt.CrowdLevel}))}catch(Ie){return console.error("Error fetching crowd data:",Ie),null}}async function Be(){const fe=t.getArrivals()[J.station.station]||{};F.value=Object.entries(fe).map(([Ie,je])=>({name:Ie,times:je})),z.value=new Date().toLocaleTimeString()}function Je(fe=!1){fe||(J.index=(J.index+1)%Bx.length),J.station=Bx[J.index],J.lineColor=oh(J.station.line);let Ie=t.getStationArrivals(J.station.station);J.arrivals=(Ie?.[J.station.line]||[]).slice(0,3),n.value=!1,document.querySelector(".live-ticker-card").offsetWidth,n.value=!0}function nt(){const fe=new Date;re.value=fe.toLocaleTimeString(void 0,{hour12:!1})}const De=fe=>{if(fe&&r.value){const Ie=fe.target.getBoundingClientRect();M.value={x:fe.clientX-Ie.left,y:fe.clientY-Ie.top}}i.value=!0,a.value=!0,l.value=1,h.value=0,s.value=0,r.value?setTimeout(()=>{a.value=!1,r.value=!1},1e3):a.value=!1},Ge=()=>{i.value=!1,a.value=!1,l.value=1,h.value=0,s.value=0},Ee=fe=>{l.value+=fe.deltaY<0?.1:-.1,l.value=Math.min(Math.max(l.value,1),4)},it=fe=>{p.value=!0,_.value={x:fe.clientX-h.value,y:fe.clientY-s.value}},ot=fe=>{p.value&&(h.value=fe.clientX-_.value.x,s.value=fe.clientY-_.value.y)},mt=()=>{p.value=!1},Pt={"North-South Line":"5:30 AM","East-West Line":"5:31 AM","Circle Line":"5:32 AM","North East Line":"5:42 AM","Downtown Line":"5:33 AM","Thomson-East Coast Line":"5:30 AM"},$t={"East-West Line":"EWL","North-South Line":"NSL","Circle Line":"CCL","Downtown Line":"DTL","North-East Line":"NEL","Thomson-East Coast Line":"TEL","Bukit Panjang LRT":"BPL","Sengkang LRT":"SLRT","Punggol LRT":"PLRT","Circle Line Extension":"CEL","Changi Extension":"CGL"},ct=fe=>{if(fe.touches.length===2){const Ie=fe.touches[0].clientX-fe.touches[1].clientX,je=fe.touches[0].clientY-fe.touches[1].clientY;x.value=Math.sqrt(Ie*Ie+je*je)}else fe.touches.length===1&&(p.value=!0,_.value={x:fe.touches[0].clientX-h.value,y:fe.touches[0].clientY-s.value})},ht=fe=>{if(fe.touches.length===2){const Ie=fe.touches[0].clientX-fe.touches[1].clientX,je=fe.touches[0].clientY-fe.touches[1].clientY,Xe=Math.sqrt(Ie*Ie+je*je);if(x.value){const yt=Xe-x.value;l.value+=yt*.005,l.value=Math.min(Math.max(l.value,1),4)}x.value=Xe}else fe.touches.length===1&&p.value&&(h.value=fe.touches[0].clientX-_.value.x,s.value=fe.touches[0].clientY-_.value.y)},Qe=()=>{x.value=null,p.value=!1},kt=me(()=>({transform:`translate(${h.value}px, ${s.value}px) scale(${l.value})`,transition:p.value?"none":"transform 0.1s ease-out"})),Ue=async fe=>{try{if(!T.value?.uid)return;ie(fe);const Ie=H.favorites.map(je=>({...je}));await AT(kp(Ap,"users",T.value.uid),{favorite_stations:Ie}),console.log("Favorite removed successfully.")}catch(Ie){console.error("Error removing favorite:",Ie)}};function ue(fe){return{l:"Low",m:"Moderate",h:"High"}[fe]||"Unknown"}function we(fe){return{l:"crowd-low",m:"crowd-moderate",h:"crowd-high"}[fe]||""}return IF(k,fe=>{T.value=fe,fe?console.log("User logged in:",fe.email):(H.favorites=[],console.log("User logged out  cleared favorites"))}),Mr(()=>{t.start(),Je(!0),nt(),Be(),ke(),X.value=setInterval(()=>Je(!1),xq),U.value=setInterval(nt,1e3),R.value=setInterval(()=>{Be(),ke()},3e4)}),Ur(()=>{t.stop(),X.value&&clearInterval(X.value),U.value&&clearInterval(U.value),R.value&&clearInterval(R.value)}),(fe,Ie)=>(Gt(),on("section",tte,[Ie[36]||(Ie[36]=V("div",{class:"video-background"},[V("video",{autoplay:"",muted:"",loop:"",playsinline:"",class:"bg-video"},[V("source",{src:FB,type:"video/mp4"})]),V("div",{class:"video-overlay"})],-1)),V("div",nte,[V("div",ite,[Ie[11]||(Ie[11]=V("h1",{class:"mb-3"},"Singapores MRT companion",-1)),Ie[12]||(Ie[12]=V("p",null," Plan, monitor, and optimise every MRT journey with live arrivals, disruption-aware routing, fare insights, and collaborative meet-up tools  all in one polished interface. ",-1)),V("div",rte,[V("button",{class:"btn btn-primary px-4 py-3 hover-float",onClick:Ie[0]||(Ie[0]=je=>bi(W)("live"))},[...Ie[9]||(Ie[9]=[V("span",{class:"material-icons me-2"},"tram",-1),Bn(" Live Tracker ",-1)])]),V("button",{class:"btn btn-outline-danger px-4 py-3 hover-float",onClick:Ie[1]||(Ie[1]=je=>bi(W)("route"))},[...Ie[10]||(Ie[10]=[V("span",{class:"material-icons me-2"},"alt_route",-1),Bn(" Plan a Route ",-1)])])])]),V("div",ste,[V("img",{src:J3,alt:"SingaTrain map illustration",class:"img-fluid rounded-4 shadow map-preview",role:"button",onClick:De}),ce(Rl,{name:"map-fullscreen"},{default:vi(()=>[i.value?(Gt(),on("div",{key:0,class:_t(["mrt-map-fullscreen",{"first-open":r.value,animating:a.value}]),onClick:ra(Ge,["self"])},[V("button",{class:"close-map-btn",onClick:Ge},[...Ie[13]||(Ie[13]=[V("span",{class:"material-icons"},"close",-1)])]),V("div",{class:"zoom-container",onWheel:ra(Ee,["prevent"]),onMousedown:it,onMouseup:mt,onMouseleave:mt,onMousemove:ot,onTouchstart:ct,onTouchmove:ra(ht,["prevent"]),onTouchend:Qe},[V("img",{ref_key:"mapImage",ref:A,src:J3,alt:"Interactive MRT Map",class:_t(["zoomable-map",{"first-open-animate":r.value}]),style:Xt(kt.value)},null,6)],32),r.value?(Gt(),on("div",ote,[...Ie[14]||(Ie[14]=[V("div",{class:"highlight-pulse"},null,-1)])])):xi("",!0)],2)):xi("",!0)]),_:1})])]),V("div",ate,[(Gt(),on("div",{class:_t(["live-ticker-card w-100",{cycle:n.value}]),key:J.station.station,style:Xt({borderColor:J.lineColor})},[V("div",null,[Ie[16]||(Ie[16]=V("div",{class:"ticker-label text-uppercase fw-semibold"},"Next arrivals",-1)),V("div",lte,[Ie[15]||(Ie[15]=V("span",{class:"material-icons text-danger"},"ev_station",-1)),V("span",null,en(J.station?.station),1)]),V("div",cte,[V("span",{class:"material-icons",style:Xt({color:J.lineColor})},"timeline",4),Bn(" "+en(J.station?.line),1)])]),V("div",ute,[V("span",null,en(re.value),1)]),V("div",dte,[(Gt(!0),on(an,null,cs(J.arrivals,(je,Xe)=>(Gt(),on("span",{key:Xe,class:"ticker-pill",style:Xt({borderColor:J.lineColor,color:J.lineColor})},[Ie[17]||(Ie[17]=V("span",{class:"material-icons"},"train",-1)),Bn(" "+en(te(je)),1)],4))),128)),J.arrivals.length?xi("",!0):(Gt(),on("span",hte,"Fetching arrivals"))])],6))]),V("div",fte,[V("div",mte,[V("div",pte,[Ie[30]||(Ie[30]=V("h2",{class:"section-title mb-3 fw-semibold"},"Personalised commute",-1)),V("p",gte,[Ie[18]||(Ie[18]=Bn(" Your favourite stations are here in your dashboard quick access. Add more from ",-1)),V("a",{href:"#",class:"interactive-link fw-semibold",onClick:Ie[2]||(Ie[2]=ra(je=>bi(W)("live"),["prevent"]))}," Live Tracker"),Ie[19]||(Ie[19]=Bn(" or ",-1)),V("a",{href:"#",class:"interactive-link fw-semibold",onClick:Ie[3]||(Ie[3]=ra(je=>bi(W)("profile"),["prevent"]))}," Profile"),Ie[20]||(Ie[20]=Bn(" to see them here. ",-1))]),V("ul",vte,[Q.value.length?xi("",!0):(Gt(),on("li",_te,[Ie[21]||(Ie[21]=V("span",{class:"material-icons align-middle"},"star_border",-1)),Ie[22]||(Ie[22]=Bn(" Add favourites from ",-1)),V("a",{href:"#",class:"interactive-link fw-semibold",onClick:Ie[4]||(Ie[4]=ra(je=>bi(W)("live"),["prevent"]))}," Live Tracker"),Ie[23]||(Ie[23]=Bn(" or ",-1)),V("a",{href:"#",class:"interactive-link fw-semibold",onClick:Ie[5]||(Ie[5]=ra(je=>bi(W)("profile"),["prevent"]))}," Profile"),Ie[24]||(Ie[24]=Bn(" to see them here. ",-1))])),(Gt(!0),on(an,null,cs(Q.value,je=>(Gt(),on("li",{key:je.station,class:"favorite-card d-flex flex-column flex-md-row align-items-center gap-3 p-3 rounded-3 shadow-sm"},[V("div",{class:"line-color-indicator",style:Xt({backgroundColor:bi(oh)(je.line)})},null,4),V("div",yte,[V("div",bte,[V("div",null,[V("strong",xte,en(je.label),1),V("div",wte,en(je.station),1)]),V("button",{class:"btn btn-sm btn-outline-danger",onClick:Xe=>Ue(je)},[...Ie[25]||(Ie[25]=[V("span",{class:"material-icons"},"close",-1)])],8,Tte)]),V("div",Ste,[(Gt(!0),on(an,null,cs(je.arrivals,(Xe,yt)=>(Gt(),on("span",{key:yt,class:"arrival-pill",style:Xt({borderColor:bi(oh)(je.line),color:bi(oh)(je.line)})},[Ie[26]||(Ie[26]=V("span",{class:"material-icons"},"train",-1)),Bn(" "+en(te(Xe)),1)],4))),128))]),V("div",Ete,[V("div",null,[Ie[27]||(Ie[27]=V("span",{class:"material-icons",style:{"font-size":"16px"}},"schedule",-1)),Bn(" First Train: "+en(je.firstTrainTime),1)]),V("div",null,[Ie[28]||(Ie[28]=V("span",{class:"material-icons",style:{"font-size":"16px"}},"people",-1)),Ie[29]||(Ie[29]=Bn(" Crowd: ",-1)),V("span",{class:_t(["crowd-badge",we(je.crowdLevel)])},en(ue(je.crowdLevel)),3)])])])]))),128))])])]),V("div",Cte,[V("div",kte,[Ie[34]||(Ie[34]=V("h2",{class:"section-title mb-3"},"Explore Our Features",-1)),Ie[35]||(Ie[35]=V("p",{class:"tab-desc"}," Discover tools and insights to plan smarter, check fares, and find the best meeting points on our website. ",-1)),V("ul",Ite,[V("li",{class:"feature-item py-2 border-bottom",onClick:Ie[6]||(Ie[6]=je=>bi(W)("route"))},[...Ie[31]||(Ie[31]=[V("div",{class:"d-flex align-items-center gap-3",role:"button"},[V("span",{class:"material-icons text-primary"},"flash_on"),V("div",null,[V("div",{class:"fw-semibold feature-title"},"Dynamic Route Visualiser"),V("div",{class:"tab-desc small"},"Visualise your journey with transfer-aware walking times on an interactive map.")])],-1)])]),V("li",{class:"feature-item py-2 border-bottom",onClick:Ie[7]||(Ie[7]=je=>bi(W)("fare"))},[...Ie[32]||(Ie[32]=[V("div",{class:"d-flex align-items-center gap-3",role:"button"},[V("span",{class:"material-icons text-success"},"insights"),V("div",null,[V("div",{class:"fw-semibold feature-title"},"Fare Insights"),V("div",{class:"tab-desc small"},"See distance-based fares and monthly pass break-even points for smarter travel.")])],-1)])]),V("li",{class:"feature-item py-2",onClick:Ie[8]||(Ie[8]=je=>bi(W)("meetup"))},[...Ie[33]||(Ie[33]=[V("div",{class:"d-flex align-items-center gap-3",role:"button"},[V("span",{class:"material-icons text-warning"},"diversity_3"),V("div",null,[V("div",{class:"fw-semibold feature-title"},"Meet Halfway"),V("div",{class:"tab-desc small"},"Find the fairest interchange point for your group in seconds.")])],-1)])])])])])])]))}};async function Pte(e,t){if(!e)throw new Error("No user UID provided");const n=kp(Ap,"users",e);await AT(n,{favorite_stations:dN(t)})}const Mte={class:"section-card"},Dte={class:"row g-3 mb-4"},Lte={class:"col-md-6"},Rte=["value"],Ote={class:"col-md-6"},Vte=["value"],Bte={key:0,class:"mb-4"},Fte={class:"d-flex justify-content-between align-items-start"},zte={class:"mb-0 mt-1"},Nte={class:"badge bg-warning text-dark"},$te={class:"live-tools mb-4"},Ute={class:"ticker-station d-flex align-items-center gap-2"},jte={class:"ticker-line mt-1"},Wte={class:"material-icons"},Hte={class:"ticker-times"},Gte={key:0,class:"small"},qte={class:"mb-4"},Kte={class:"mb-3"},Xte={key:0,class:"spinner-border spinner-border-sm ms-2",role:"status"},Yte={class:"arrival-details flex-grow-1"},Zte={class:"d-flex justify-content-between align-items-center mb-2"},Jte={class:"d-flex justify-content-between align-items-center"},Qte={class:"d-flex align-items-center gap-2"},ene={class:"d-flex align-items-center justify-content-center gap-2"},tne={class:"text-center"},k5="https://corsproxy.io/?",nne="https://datamall2.mytransport.sg/ltaodataservice/TrainServiceAlerts",ine={__name:"LiveTracker",setup(e){const t=xA(),n=U6({updateIntervalMs:1e3}),i=tt(null),r=tt([]),a=tt(!1),l=tt(!1),h=tt("Never"),s={"North South Line":"5:30 AM","East West Line":"5:31 AM","Circle Line":"5:32 AM","North East Line":"5:42 AM","Downtown Line":"5:33 AM","Thomson-East Coast Line":"5:30 AM"},p={"East-West Line":"EWL","North-South Line":"NSL","Circle Line":"CCL","Downtown Line":"DTL","North-East Line":"NEL","Thomson-East Coast Line":"TEL","Bukit Panjang LRT":"BPL","Sengkang LRT":"SLRT","Punggol LRT":"PLRT","Circle Line Extension":"CEL","Changi Extension":"CGL"},_=Object.keys(r0),x=tt(_[0]),T=tt(r0[x.value][0]),k=tt([]);Gv(),tt(""),tt("");const A=tt({type:"",text:""}),{addFavorite:M}=Gv(),R=me(()=>r0[x.value]||[]),F=me(()=>{const Re=k.value.find(Be=>Be.name===T.value);return Re?Re.times:[]}),z=me(()=>oh(T.value)),G=me(()=>{const Re=F.value[0]??1/0;return Re<=60?"Arriving":Re<=240?"On Time":Re<=420?"Slight delay":"Delayed"}),Y=me(()=>{switch(G.value){case"Arriving":return"status-arriving";case"On Time":return"status-on-time";case"Slight delay":return"status-departing";default:return"status-delayed"}}),J=me(()=>{switch(G.value){case"Arriving":return"directions_subway";case"On Time":return"check_circle";case"Slight delay":return"schedule";default:return"error"}});function re(Re){return Re<=0?"Arriving":Re<60?"<1 min":`${Math.ceil(Re/60)} min`}function X(Re){return{l:"Low",m:"Moderate",h:"High"}[Re]||"Unknown (Data Unavailable)"}function U(Re){return{l:"crowd-low",m:"crowd-moderate",h:"crowd-high"}[Re]||""}function H(Re,Be){const Je=yv[Re];if(Je)return Je[Be]}async function W(Re){try{const Be=k5+encodeURIComponent(`https://datamall2.mytransport.sg/ltaodataservice/PCDRealTime?TrainLine=${Re}`),Je=await fetch(Be,{method:"GET",headers:{AccountKey:Ik,accept:"application/json"}});if(!Je.ok)return null;const nt=await Je.json();return!nt.value||!Array.isArray(nt.value)?null:nt.value.map(De=>({stationCode:De.Station,crowdLevel:De.CrowdLevel}))}catch(Be){return console.error("Error fetching crowd data:",Be),null}}async function ie(){try{const Re=await fetch(k5+encodeURIComponent(nne),{method:"GET",headers:{AccountKey:Ik,Accept:"application/json"}});if(!Re.ok){console.warn(`Service Alerts API returned ${Re.status} ${Re.statusText}`),l.value=!0,r.value.length===0&&(r.value=[{AffectedSegments:"DataMall Service",Message:"Unable to fetch live alerts (API temporary error)",Status:"Unavailable"}]);return}const Be=await Re.json();Be?.value&&Array.isArray(Be.value)?r.value=Be.value.filter(Je=>Je.Status!=="Normal"&&Je.Status!=="Cleared"):r.value=[],l.value=!1,h.value=new Date().toLocaleTimeString()}catch(Re){console.error("Error fetching service alerts:",Re),l.value=!0,r.value.length===0&&(r.value=[{AffectedSegments:"Train Network",Message:"Unable to retrieve live alerts (network issue)",Status:"Error"}])}}async function Q(){a.value=!0;const Re=n.getArrivals({returnSeconds:!0})[x.value]||{},Be=p[T.value];let Je=null;Be&&(Je=await W(Be));let nt="NA";const De=H(x.value,T.value);if(console.log("Selected Station:",x.value),console.log("Mapped Station Code:",De),console.log("Real Crowd Data:",Je),Je&&Je.length){Je.forEach(Ee=>{console.log("Crowd data stationCode:",Ee.stationCode,"crowdLevel:",Ee.crowdLevel)});const Ge=Je.find(Ee=>Ee.stationCode===De);console.log("Matched station data:",Ge),Ge?nt=Ge.crowdLevel:console.warn("No matching station found in realCrowdData for",De)}k.value=Object.entries(Re).filter(([Ge])=>Ge===T.value).map(([Ge,Ee])=>({name:Ge,times:Ee,progress:Ee.length?Math.max(0,1-Math.min(Ee[0],600)/600):0,firstTrainTime:s[Ge]||"5:30 AM",crowdLevel:nt})),await ie(),a.value=!1}function te(Re,Be){A.value={type:Re,text:Be},setTimeout(()=>A.value={type:"",text:""},3e3)}async function ke(){const Re={station:x.value,label:`${x.value}  ${T.value}`};M(Re);try{const Be=t.currentUser;Be?.uid?(await Pte(Be.uid,Re),te("success","Successfully added new station.")):te("error","Please log in to sync favorites.")}catch(Be){console.error("Add favorite error:",Be),te("error","Failed to add favorite.")}}return Yt(x,()=>{const Re=R.value;Re.length&&!Re.includes(T.value)&&(T.value=Re[0]),Q()}),Yt(T,Q),Mr(()=>{n.start(),Q(),i.value=setInterval(Q,3e4)}),Ur(()=>{n.stop(),i.value&&clearInterval(i.value)}),(Re,Be)=>(Gt(),on("section",Mte,[ce(Rl,{name:"fade"},{default:vi(()=>[A.value.text?(Gt(),on("div",{key:0,class:_t(["alert",A.value.type==="success"?"alert-success":"alert-danger","position-fixed","top-0","end-0","m-3","z-index-1050"])},en(A.value.text),3)):xi("",!0)]),_:1}),V("div",{class:"d-flex flex-wrap justify-content-between align-items-center gap-3 mb-4"},[Be[4]||(Be[4]=V("div",null,[V("h2",{class:"section-title mb-1"},"Live Train Tracker"),V("p",{class:"mb-0"}," Real-time train service alerts and simulated arrivals. Switch stations to monitor your regular journeys. ")],-1)),V("div",{class:"d-flex gap-2"},[V("button",{class:"btn btn-outline-danger hover-float",onClick:Q},[...Be[2]||(Be[2]=[V("span",{class:"material-icons me-1"},"refresh",-1),Bn(" Refresh ",-1)])]),V("button",{class:"btn btn-primary hover-float",onClick:ke},[...Be[3]||(Be[3]=[V("span",{class:"material-icons me-1"},"star",-1),Bn(" Add Favourite ",-1)])])])]),V("div",Dte,[V("div",Lte,[Be[5]||(Be[5]=V("label",{class:"form-label"},"Station",-1)),Li(V("select",{"onUpdate:modelValue":Be[0]||(Be[0]=Je=>x.value=Je),class:"form-select"},[(Gt(!0),on(an,null,cs(bi(_),Je=>(Gt(),on("option",{key:Je,value:Je},en(Je),9,Rte))),128))],512),[[T0,x.value]])]),V("div",Ote,[Be[6]||(Be[6]=V("label",{class:"form-label"},"Line",-1)),Li(V("select",{"onUpdate:modelValue":Be[1]||(Be[1]=Je=>T.value=Je),class:"form-select"},[(Gt(!0),on(an,null,cs(R.value,Je=>(Gt(),on("option",{key:Je,value:Je},en(Je),9,Vte))),128))],512),[[T0,T.value]])])]),r.value.length>0?(Gt(),on("div",Bte,[Be[7]||(Be[7]=V("h5",{class:"mb-3 d-flex align-items-center gap-2"},[V("span",{class:"material-icons text-warning"},"warning"),Bn(" Service Alerts ")],-1)),(Gt(!0),on(an,null,cs(r.value,(Je,nt)=>(Gt(),on("div",{key:nt,class:"alert alert-warning mb-2"},[V("div",Fte,[V("div",null,[V("strong",null,en(Je.AffectedSegments),1),V("p",zte,en(Je.Message),1)]),V("span",Nte,en(Je.Status),1)])]))),128))])):xi("",!0),V("div",$te,[V("div",{class:"live-ticker-card w-100",style:Xt({borderColor:z.value})},[V("div",null,[Be[9]||(Be[9]=V("div",{class:"ticker-label"},"Monitoring",-1)),V("div",Ute,[Be[8]||(Be[8]=V("span",{class:"material-icons text-danger"},"location_on",-1)),V("span",null,en(x.value),1)]),V("div",jte,[V("span",{class:"material-icons",style:Xt({color:z.value})},"timeline",4),Bn(" "+en(T.value),1)])]),V("div",null,[Be[10]||(Be[10]=V("div",{class:"small text-uppercase fw-semibold mb-1"},"Status",-1)),V("span",{class:_t(["status-pill",Y.value])},[V("span",Wte,en(J.value),1),Bn(" "+en(G.value),1)],2)]),V("div",Hte,[(Gt(!0),on(an,null,cs(F.value,(Je,nt)=>(Gt(),on("span",{key:nt,class:"ticker-pill",style:Xt({borderColor:z.value,color:z.value})},[Be[11]||(Be[11]=V("span",{class:"material-icons"},"train",-1)),Bn(" "+en(re(Je)),1)],4))),128)),F.value.length?xi("",!0):(Gt(),on("span",Gte,"Awaiting updates"))])],4)]),V("div",qte,[V("h5",Kte,[Bn(" First Train & Crowd Level at "+en(x.value)+" ",1),a.value?(Gt(),on("span",Xte,[...Be[12]||(Be[12]=[V("span",{class:"visually-hidden"},"Loading...",-1)])])):xi("",!0)]),(Gt(!0),on(an,null,cs(k.value,Je=>(Gt(),on("div",{key:Je.name,class:"arrival-row"},[V("div",{class:"train-icon",style:Xt({color:bi(oh)(Je.name)})},[...Be[13]||(Be[13]=[V("span",{class:"material-icons"},"subway",-1)])],4),V("div",Yte,[V("div",Zte,[V("strong",null,en(Je.name),1)]),V("div",Jte,[V("div",Qte,[Be[14]||(Be[14]=V("span",{class:"material-icons",style:{"font-size":"18px"}},"schedule",-1)),Be[15]||(Be[15]=V("span",{class:"small"},"First Train:",-1)),V("strong",null,en(Je.firstTrainTime),1)]),V("div",ene,[Be[16]||(Be[16]=V("span",{class:"material-icons",style:{"font-size":"18px"}},"people",-1)),Be[17]||(Be[17]=V("span",{class:"small"},"Crowd:",-1)),V("span",{class:_t(["crowd-badge",U(Je.crowdLevel)])},en(X(Je.crowdLevel)),3)])])])]))),128))]),V("div",tne,[V("small",null," Last updated: "+en(h.value),1)])]))}};var A1={exports:{}},rne=A1.exports,I5;function sne(){return I5||(I5=1,(function(e,t){var n={};(function(i,r){e.exports=r()})(rne,(function(){var i,r,a;function l(s,p){if(!i)i=p;else if(!r)r=p;else{var _="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+i+")(sharedChunk); ("+r+")(sharedChunk); self.onerror = null;",x={};i(x),a=p(x),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(a.workerUrl=window.URL.createObjectURL(new Blob([_],{type:"text/javascript"})))}}l(["exports"],(function(s){var p=typeof self<"u"?self:{},_="2.15.0";let x;const T={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(x==null){const c=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{x=n.API_URL_REGEX!=null?new RegExp(n.API_URL_REGEX):c}catch{x=c}}return x},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!T.API_URL)return null;try{const c=new URL(T.API_URL);return c.hostname==="api.mapbox.cn"?"https://events.mapbox.cn/events/v2":c.hostname==="api.mapbox.com"?"https://events.mapbox.com/events/v2":null}catch{return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},k={supported:!1,testSupport:function(c){!R&&M&&(F?z(c):A=c)}};let A,M,R=!1,F=!1;function z(c){const o=c.createTexture();c.bindTexture(c.TEXTURE_2D,o);try{if(c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,M),c.isContextLost())return;k.supported=!0}catch{}c.deleteTexture(o),R=!0}p.document&&(M=p.document.createElement("img"),M.onload=function(){A&&z(A),A=null,F=!0},M.onerror=function(){R=!0,A=null},M.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const G="01";function Y(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var J=re;function re(c,o,d,f){this.cx=3*c,this.bx=3*(d-c)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*o,this.by=3*(f-o)-this.cy,this.ay=1-this.cy-this.by,this.p1x=c,this.p1y=o,this.p2x=d,this.p2y=f}re.prototype={sampleCurveX:function(c){return((this.ax*c+this.bx)*c+this.cx)*c},sampleCurveY:function(c){return((this.ay*c+this.by)*c+this.cy)*c},sampleCurveDerivativeX:function(c){return(3*this.ax*c+2*this.bx)*c+this.cx},solveCurveX:function(c,o){if(o===void 0&&(o=1e-6),c<0)return 0;if(c>1)return 1;for(var d=c,f=0;f<8;f++){var g=this.sampleCurveX(d)-c;if(Math.abs(g)<o)return d;var b=this.sampleCurveDerivativeX(d);if(Math.abs(b)<1e-6)break;d-=g/b}var w=0,E=1;for(d=c,f=0;f<20&&(g=this.sampleCurveX(d),!(Math.abs(g-c)<o));f++)c>g?w=d:E=d,d=.5*(E-w)+w;return d},solve:function(c,o){return this.sampleCurveY(this.solveCurveX(c,o))}};var X=Y(J),U=H;function H(c,o){this.x=c,this.y=o}H.prototype={clone:function(){return new H(this.x,this.y)},add:function(c){return this.clone()._add(c)},sub:function(c){return this.clone()._sub(c)},multByPoint:function(c){return this.clone()._multByPoint(c)},divByPoint:function(c){return this.clone()._divByPoint(c)},mult:function(c){return this.clone()._mult(c)},div:function(c){return this.clone()._div(c)},rotate:function(c){return this.clone()._rotate(c)},rotateAround:function(c,o){return this.clone()._rotateAround(c,o)},matMult:function(c){return this.clone()._matMult(c)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(c){return this.x===c.x&&this.y===c.y},dist:function(c){return Math.sqrt(this.distSqr(c))},distSqr:function(c){var o=c.x-this.x,d=c.y-this.y;return o*o+d*d},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(c){return Math.atan2(this.y-c.y,this.x-c.x)},angleWith:function(c){return this.angleWithSep(c.x,c.y)},angleWithSep:function(c,o){return Math.atan2(this.x*o-this.y*c,this.x*c+this.y*o)},_matMult:function(c){var o=c[2]*this.x+c[3]*this.y;return this.x=c[0]*this.x+c[1]*this.y,this.y=o,this},_add:function(c){return this.x+=c.x,this.y+=c.y,this},_sub:function(c){return this.x-=c.x,this.y-=c.y,this},_mult:function(c){return this.x*=c,this.y*=c,this},_div:function(c){return this.x/=c,this.y/=c,this},_multByPoint:function(c){return this.x*=c.x,this.y*=c.y,this},_divByPoint:function(c){return this.x/=c.x,this.y/=c.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var c=this.y;return this.y=this.x,this.x=-c,this},_rotate:function(c){var o=Math.cos(c),d=Math.sin(c),f=d*this.x+o*this.y;return this.x=o*this.x-d*this.y,this.y=f,this},_rotateAround:function(c,o){var d=Math.cos(c),f=Math.sin(c),g=o.y+f*(this.x-o.x)+d*(this.y-o.y);return this.x=o.x+d*(this.x-o.x)-f*(this.y-o.y),this.y=g,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},H.convert=function(c){return c instanceof H?c:Array.isArray(c)?new H(c[0],c[1]):c};var W=Y(U);const ie=Math.PI/180,Q=180/Math.PI;function te(c){return c*ie}function ke(c){return c*Q}const Re=[[0,0],[1,0],[1,1],[0,1]];function Be(c){if(c<=0)return 0;if(c>=1)return 1;const o=c*c,d=o*c;return 4*(c<.5?d:3*(c-o)+d-.75)}function Je(c,o,d,f){const g=new X(c,o,d,f);return function(b){return g.solve(b)}}const nt=Je(.25,.1,.25,1);function De(c,o,d){return Math.min(d,Math.max(o,c))}function Ge(c,o,d){return(d=De((d-c)/(o-c),0,1))*d*(3-2*d)}function Ee(c,o,d){const f=d-o,g=((c-o)%f+f)%f+o;return g===o?d:g}function it(c,o,d){if(!c.length)return d(null,[]);let f=c.length;const g=new Array(c.length);let b=null;c.forEach(((w,E)=>{o(w,((I,D)=>{I&&(b=I),g[E]=D,--f==0&&d(b,g)}))}))}function ot(c){const o=[];for(const d in c)o.push(c[d]);return o}function mt(c,...o){for(const d of o)for(const f in d)c[f]=d[f];return c}let Pt=1;function $t(){return Pt++}function ct(){return(function c(o){return o?(o^Math.random()*(16>>o/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,c)})()}function ht(c){return c<=1?1:Math.pow(2,Math.ceil(Math.log(c)/Math.LN2))}function Qe(c){return!!c&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(c)}function kt(c,o){c.forEach((d=>{o[d]&&(o[d]=o[d].bind(o))}))}function Ue(c,o){return c.indexOf(o,c.length-o.length)!==-1}function ue(c,o,d){const f={};for(const g in c)f[g]=o.call(this,c[g],g,c);return f}function we(c,o,d){const f={};for(const g in c)o.call(d||this,c[g],g,c)&&(f[g]=c[g]);return f}function fe(c){return Array.isArray(c)?c.map(fe):typeof c=="object"&&c?ue(c,fe):c}const Ie={};function je(c){Ie[c]||(typeof console<"u"&&console.warn(c),Ie[c]=!0)}function Xe(c,o,d){return(d.y-c.y)*(o.x-c.x)>(o.y-c.y)*(d.x-c.x)}function yt(c){let o=0;for(let d,f,g=0,b=c.length,w=b-1;g<b;w=g++)d=c[g],f=c[w],o+=(f.x-d.x)*(d.y+f.y);return o}function wt(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Lt(c){const o={};if(c.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((d,f,g,b)=>{const w=g||b;return o[f]=!w||w.toLowerCase(),""})),o["max-age"]){const d=parseInt(o["max-age"],10);isNaN(d)?delete o["max-age"]:o["max-age"]=d}return o}let Dt=null;function gn(c){if(Dt==null){const o=c.navigator?c.navigator.userAgent:null;Dt=!!c.safari||!(!o||!(/\b(iPad|iPhone|iPod)\b/.test(o)||o.match("Safari")&&!o.match("Chrome")))}return Dt}function Kt(c){try{const o=p[c];return o.setItem("_mapbox_test_",1),o.removeItem("_mapbox_test_"),!0}catch{return!1}}function Cn(c,o){return[c[4*o],c[4*o+1],c[4*o+2],c[4*o+3]]}const Dn="mapbox-tiles";let Fn=500,ni=50,Ut,fn;function wn(){try{return p.caches}catch{}}function Ln(){wn()&&!Ut&&(Ut=p.caches.open(Dn))}function Ci(c){const o=c.indexOf("?");if(o<0)return c;const d=(function(g){const b=g.indexOf("?");return b>0?g.slice(b+1).split("&"):[]})(c),f=d.filter((g=>{const b=g.split("=");return b[0]==="language"||b[0]==="worldview"}));return f.length?`${c.slice(0,o)}?${f.join("&")}`:c.slice(0,o)}let xr=1/0;const Ss={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(Ss);class rr extends Error{constructor(o,d,f){d===401&&vt(f)&&(o+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(o),this.status=d,this.url=f}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const wr=wt()?()=>self.worker&&self.worker.referrer:()=>(p.location.protocol==="blob:"?p.parent:p).location.href,jo=function(c,o){if(!(/^file:/.test(d=c.url)||/^file:/.test(wr())&&!/^\w+:/.test(d))){if(p.fetch&&p.Request&&p.AbortController&&p.Request.prototype.hasOwnProperty("signal"))return(function(f,g){const b=new p.AbortController,w=new p.Request(f.url,{method:f.method||"GET",body:f.body,credentials:f.credentials,headers:f.headers,referrer:wr(),referrerPolicy:f.referrerPolicy,signal:b.signal});let E=!1,I=!1;const D=(N=w.url).indexOf("sku=")>0&&vt(N);var N;f.type==="json"&&w.headers.set("Accept","application/json");const j=(ne,oe,he)=>{if(I)return;if(ne&&ne.message!=="SecurityError"&&je(ne.toString()),oe&&he)return Z(oe);const Te=Date.now();p.fetch(w).then((Oe=>{if(Oe.ok){const He=D?Oe.clone():null;return Z(Oe,He,Te)}return g(new rr(Oe.statusText,Oe.status,f.url))})).catch((Oe=>{Oe.name!=="AbortError"&&g(new Error(`${Oe.message} ${f.url}`))}))},Z=(ne,oe,he)=>{(f.type==="arrayBuffer"?ne.arrayBuffer():f.type==="json"?ne.json():ne.text()).then((Te=>{I||(oe&&he&&(function(Oe,He,Ve){if(Ln(),!Ut)return;const Ne={status:He.status,statusText:He.statusText,headers:new p.Headers};He.headers.forEach(((Tt,bt)=>Ne.headers.set(bt,Tt)));const et=Lt(He.headers.get("Cache-Control")||"");if(et["no-store"])return;et["max-age"]&&Ne.headers.set("Expires",new Date(Ve+1e3*et["max-age"]).toUTCString());const Ze=Ne.headers.get("Expires");Ze&&(new Date(Ze).getTime()-Ve<42e4||(function(Tt,bt){if(fn===void 0)try{new Response(new ReadableStream),fn=!0}catch{fn=!1}fn?bt(Tt.body):Tt.blob().then(bt)})(He,(Tt=>{const bt=new p.Response(Tt,Ne);Ln(),Ut&&Ut.then((Ft=>Ft.put(Ci(Oe.url),bt))).catch((Ft=>je(Ft.message)))})))})(w,oe,he),E=!0,g(null,Te,ne.headers.get("Cache-Control"),ne.headers.get("Expires")))})).catch((Te=>{I||g(new Error(Te.message))}))};return D?(function(ne,oe){if(Ln(),!Ut)return oe(null);const he=Ci(ne.url);Ut.then((Te=>{Te.match(he).then((Oe=>{const He=(function(Ve){if(!Ve)return!1;const Ne=new Date(Ve.headers.get("Expires")||0),et=Lt(Ve.headers.get("Cache-Control")||"");return Ne>Date.now()&&!et["no-cache"]})(Oe);Te.delete(he),He&&Te.put(he,Oe.clone()),oe(null,Oe,He)})).catch(oe)})).catch(oe)})(w,j):j(null,null),{cancel:()=>{I=!0,E||b.abort()}}})(c,o);if(wt()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",c,o,void 0,!0)}var d;return(function(f,g){const b=new p.XMLHttpRequest;b.open(f.method||"GET",f.url,!0),f.type==="arrayBuffer"&&(b.responseType="arraybuffer");for(const w in f.headers)b.setRequestHeader(w,f.headers[w]);return f.type==="json"&&(b.responseType="text",b.setRequestHeader("Accept","application/json")),b.withCredentials=f.credentials==="include",b.onerror=()=>{g(new Error(b.statusText))},b.onload=()=>{if((b.status>=200&&b.status<300||b.status===0)&&b.response!==null){let w=b.response;if(f.type==="json")try{w=JSON.parse(b.response)}catch(E){return g(E)}g(null,w,b.getResponseHeader("Cache-Control"),b.getResponseHeader("Expires"))}else g(new rr(b.statusText,b.status,f.url))},b.send(f.body),{cancel:()=>b.abort()}})(c,o)},So=function(c,o){return jo(mt(c,{type:"arrayBuffer"}),o)};function $c(c){const o=p.document.createElement("a");return o.href=c,o.protocol===p.document.location.protocol&&o.host===p.document.location.host}const ze="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let ge,_e;ge=[],_e=0;const Fe=function(c,o){if(k.supported&&(c.headers||(c.headers={}),c.headers.accept="image/webp,*/*"),_e>=T.MAX_PARALLEL_IMAGE_REQUESTS){const b={requestParameters:c,callback:o,cancelled:!1,cancel(){this.cancelled=!0}};return ge.push(b),b}_e++;let d=!1;const f=()=>{if(!d)for(d=!0,_e--;ge.length&&_e<T.MAX_PARALLEL_IMAGE_REQUESTS;){const b=ge.shift(),{requestParameters:w,callback:E,cancelled:I}=b;I||(b.cancel=Fe(w,E).cancel)}},g=So(c,((b,w,E,I)=>{f(),b?o(b):w&&(p.createImageBitmap?(function(D,N){const j=new p.Blob([new Uint8Array(D)],{type:"image/png"});p.createImageBitmap(j).then((Z=>{N(null,Z)})).catch((Z=>{N(new Error(`Could not load image because of ${Z.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))}))})(w,((D,N)=>o(D,N,E,I))):(function(D,N){const j=new p.Image,Z=p.URL;j.onload=()=>{N(null,j),Z.revokeObjectURL(j.src),j.onload=null,p.requestAnimationFrame((()=>{j.src=ze}))},j.onerror=()=>N(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const ne=new p.Blob([new Uint8Array(D)],{type:"image/png"});j.src=D.byteLength?Z.createObjectURL(ne):ze})(w,((D,N)=>o(D,N,E,I))))}));return{cancel:()=>{g.cancel(),f()}}},Ke="NO_ACCESS_TOKEN";function st(c){return c.indexOf("mapbox:")===0}function vt(c){return T.API_URL_REGEX.test(c)}function pt(c){return T.API_CDN_URL_REGEX.test(c)}function rt(c){return T.API_STYLE_REGEX.test(c)&&!Ct(c)}function Ct(c){return T.API_SPRITE_REGEX.test(c)}const nn=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function dn(c){const o=c.match(nn);if(!o)throw new Error("Unable to parse URL object");return{protocol:o[1],authority:o[2],path:o[3]||"/",params:o[4]?o[4].split("&"):[]}}function rn(c){const o=c.params.length?`?${c.params.join("&")}`:"";return`${c.protocol}://${c.authority}${c.path}${o}`}const Kn="mapbox.eventData";function Jn(c){if(!c)return null;const o=c.split(".");if(!o||o.length!==3)return null;try{return JSON.parse(decodeURIComponent(p.atob(o[1]).split("").map((d=>"%"+("00"+d.charCodeAt(0).toString(16)).slice(-2))).join("")))}catch{return null}}class jn{constructor(o){this.type=o,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(o){const d=Jn(T.ACCESS_TOKEN);let f="";return f=d&&d.u?p.btoa(encodeURIComponent(d.u).replace(/%([0-9A-F]{2})/g,((g,b)=>String.fromCharCode(+("0x"+b))))):T.ACCESS_TOKEN||"",o?`${Kn}.${o}:${f}`:`${Kn}:${f}`}fetchEventData(){const o=Kt("localStorage"),d=this.getStorageKey(),f=this.getStorageKey("uuid");if(o)try{const g=p.localStorage.getItem(d);g&&(this.eventData=JSON.parse(g));const b=p.localStorage.getItem(f);b&&(this.anonId=b)}catch{je("Unable to read from LocalStorage")}}saveEventData(){const o=Kt("localStorage"),d=this.getStorageKey(),f=this.getStorageKey("uuid");if(o)try{p.localStorage.setItem(f,this.anonId),Object.keys(this.eventData).length>=1&&p.localStorage.setItem(d,JSON.stringify(this.eventData))}catch{je("Unable to write to LocalStorage")}}processRequests(o){}postEvent(o,d,f,g){if(!T.EVENTS_URL)return;const b=dn(T.EVENTS_URL);b.params.push(`access_token=${g||T.ACCESS_TOKEN||""}`);const w={event:this.type,created:new Date(o).toISOString()},E=d?mt(w,d):w,I={url:rn(b),headers:{"Content-Type":"text/plain"},body:JSON.stringify([E])};this.pendingRequest=(function(D,N){return jo(mt(D,{method:"POST"}),N)})(I,(D=>{this.pendingRequest=null,f(D),this.saveEventData(),this.processRequests(g)}))}queueRequest(o,d){this.queue.push(o),this.processRequests(d)}}const ai=new class extends jn{constructor(c){super("appUserTurnstile"),this._customAccessToken=c}postTurnstileEvent(c,o){T.EVENTS_URL&&T.ACCESS_TOKEN&&Array.isArray(c)&&c.some((d=>st(d)||vt(d)))&&this.queueRequest(Date.now(),o)}processRequests(c){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const o=Jn(T.ACCESS_TOKEN),d=o?o.u:T.ACCESS_TOKEN;let f=d!==this.eventData.tokenU;Qe(this.anonId)||(this.anonId=ct(),f=!0);const g=this.queue.shift();if(this.eventData.lastSuccess){const b=new Date(this.eventData.lastSuccess),w=new Date(g),E=(g-this.eventData.lastSuccess)/864e5;f=f||E>=1||E<-1||b.getDate()!==w.getDate()}else f=!0;f?this.postEvent(g,{sdkIdentifier:"mapbox-gl-js",sdkVersion:_,skuId:G,"enabled.telemetry":!1,userId:this.anonId},(b=>{b||(this.eventData.lastSuccess=g,this.eventData.tokenU=d)}),c):this.processRequests()}},Xn=ai.postTurnstileEvent.bind(ai),Ri=new class extends jn{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(c,o,d,f){this.skuToken=o,this.errorCb=f,T.EVENTS_URL&&(d||T.ACCESS_TOKEN?this.queueRequest({id:c,timestamp:Date.now()},d):this.errorCb(new Error(Ke)))}processRequests(c){if(this.pendingRequest||this.queue.length===0)return;const{id:o,timestamp:d}=this.queue.shift();o&&this.success[o]||(this.anonId||this.fetchEventData(),Qe(this.anonId)||(this.anonId=ct()),this.postEvent(d,{sdkIdentifier:"mapbox-gl-js",sdkVersion:_,skuId:G,skuToken:this.skuToken,userId:this.anonId},(f=>{f?this.errorCb(f):o&&(this.success[o]=!0)}),c))}},mr=Ri.postMapLoadEvent.bind(Ri),is=new class extends jn{constructor(){super("gljs.performance")}postPerformanceEvent(c,o){T.EVENTS_URL&&(c||T.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:o},c)}processRequests(c){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:o,performanceData:d}=this.queue.shift(),f=(function(g){const b=p.performance.getEntriesByType("resource"),w=p.performance.getEntriesByType("mark"),E=(function(Z){const ne={};if(Z){for(const oe in Z)if(oe!=="other")for(const he of Z[oe]){const Te=`${oe}ResolveRangeMin`,Oe=`${oe}ResolveRangeMax`,He=`${oe}RequestCount`,Ve=`${oe}RequestCachedCount`;ne[Te]=Math.min(ne[Te]||1/0,he.startTime),ne[Oe]=Math.max(ne[Oe]||-1/0,he.responseEnd);const Ne=et=>{ne[et]===void 0&&(ne[et]=0),++ne[et]};he.transferSize!==void 0&&he.transferSize===0&&Ne(Ve),Ne(He)}}return ne})((function(Z,ne){const oe={};if(Z)for(const he of Z){const Te=ne(he);oe[Te]===void 0&&(oe[Te]=[]),oe[Te].push(he)}return oe})(b,zs)),I=p.devicePixelRatio,D=p.navigator.connection||p.navigator.mozConnection||p.navigator.webkitConnection,N={counters:[],metadata:[],attributes:[]},j=(Z,ne,oe)=>{oe!=null&&Z.push({name:ne,value:oe.toString()})};for(const Z in E)j(N.counters,Z,E[Z]);if(g.interactionRange[0]!==1/0&&g.interactionRange[1]!==-1/0&&(j(N.counters,"interactionRangeMin",g.interactionRange[0]),j(N.counters,"interactionRangeMax",g.interactionRange[1])),w)for(const Z of Object.keys(Hr)){const ne=Hr[Z],oe=w.find((he=>he.name===ne));oe&&j(N.counters,ne,oe.startTime)}return j(N.counters,"visibilityHidden",g.visibilityHidden),j(N.attributes,"style",(function(Z){if(Z)for(const ne of Z){const oe=ne.name.split("?")[0];if(rt(oe)){const he=oe.split("/").slice(-2);if(he.length===2)return`mapbox://styles/${he[0]}/${he[1]}`}}})(b)),j(N.attributes,"terrainEnabled",g.terrainEnabled?"true":"false"),j(N.attributes,"fogEnabled",g.fogEnabled?"true":"false"),j(N.attributes,"projection",g.projection),j(N.attributes,"zoom",g.zoom),j(N.metadata,"devicePixelRatio",I),j(N.metadata,"connectionEffectiveType",D?D.effectiveType:void 0),j(N.metadata,"navigatorUserAgent",p.navigator.userAgent),j(N.metadata,"screenWidth",p.screen.width),j(N.metadata,"screenHeight",p.screen.height),j(N.metadata,"windowWidth",p.innerWidth),j(N.metadata,"windowHeight",p.innerHeight),j(N.metadata,"mapWidth",g.width/I),j(N.metadata,"mapHeight",g.height/I),j(N.metadata,"webglRenderer",g.renderer),j(N.metadata,"webglVendor",g.vendor),j(N.metadata,"sdkVersion",_),j(N.metadata,"sdkIdentifier","mapbox-gl-js"),N})(d);for(const g of f.metadata);for(const g of f.counters);for(const g of f.attributes);this.postEvent(o,f,(()=>{}),c)}},Tr=is.postPerformanceEvent.bind(is),Wo=new class extends jn{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(c,o,d,f){if(!T.API_URL||!T.SESSION_PATH)return;const g=dn(T.API_URL+T.SESSION_PATH);g.params.push(`sku=${o||""}`),g.params.push(`access_token=${f||T.ACCESS_TOKEN||""}`);const b={url:rn(g),headers:{"Content-Type":"text/plain"}};this.pendingRequest=(function(w,E){return jo(mt(w,{method:"GET"}),E)})(b,(w=>{this.pendingRequest=null,d(w),this.saveEventData(),this.processRequests(f)}))}getSessionAPI(c,o,d,f){this.skuToken=o,this.errorCb=f,T.SESSION_PATH&&T.API_URL&&(d||T.ACCESS_TOKEN?this.queueRequest({id:c,timestamp:Date.now()},d):this.errorCb(new Error(Ke)))}processRequests(c){if(this.pendingRequest||this.queue.length===0)return;const{id:o,timestamp:d}=this.queue.shift();o&&this.success[o]||this.getSession(d,this.skuToken,(f=>{f?this.errorCb(f):o&&(this.success[o]=!0)}),c)}},rs=Wo.getSessionAPI.bind(Wo),Or=new Set,Hr={create:"create",load:"load",fullLoad:"fullLoad"},Es={mark(c){p.performance.mark(c)},measure(c,o,d){p.performance.measure(c,o,d)}};function zs(c){const o=c.name.split("?")[0];return pt(o)&&o.includes("mapbox-gl.js")?"javascript":pt(o)&&o.includes("mapbox-gl.css")?"css":(function(d){return T.API_FONTS_REGEX.test(d)})(o)?"fontRange":Ct(o)?"sprite":rt(o)?"style":(function(d){return T.API_TILEJSON_REGEX.test(d)})(o)?"tilejson":"other"}const qn=p.performance;function fa(c){const o=c?c.url.toString():void 0;return qn.getEntriesByName(o)}let Cs,Ho,Ka,Eo;const Co={now:()=>Ka!==void 0?Ka:p.performance.now(),setNow(c){Ka=c},restoreNow(){Ka=void 0},frame(c){const o=p.requestAnimationFrame(c);return{cancel:()=>p.cancelAnimationFrame(o)}},getImageData(c,o=0){const{width:d,height:f}=c;Eo||(Eo=p.document.createElement("canvas"));const g=Eo.getContext("2d",{willReadFrequently:!0});if(!g)throw new Error("failed to create canvas 2d context");return(d>Eo.width||f>Eo.height)&&(Eo.width=d,Eo.height=f),g.clearRect(-o,-o,d+2*o,f+2*o),g.drawImage(c,0,0,d,f),g.getImageData(-o,-o,d+2*o,f+2*o)},resolveURL:c=>(Cs||(Cs=p.document.createElement("a")),Cs.href=c,Cs.href),get devicePixelRatio(){return p.devicePixelRatio},get prefersReducedMotion(){return!!p.matchMedia&&(Ho==null&&(Ho=p.matchMedia("(prefers-reduced-motion: reduce)")),Ho.matches)}};function Xa(c,o,d){d[c]&&d[c].indexOf(o)!==-1||(d[c]=d[c]||[],d[c].push(o))}function fc(c,o,d){if(d&&d[c]){const f=d[c].indexOf(o);f!==-1&&d[c].splice(f,1)}}class Go{constructor(o,d={}){mt(this,d),this.type=o}}class ko extends Go{constructor(o,d={}){super("error",mt({error:o},d))}}class zl{on(o,d){return this._listeners=this._listeners||{},Xa(o,d,this._listeners),this}off(o,d){return fc(o,d,this._listeners),fc(o,d,this._oneTimeListeners),this}once(o,d){return d?(this._oneTimeListeners=this._oneTimeListeners||{},Xa(o,d,this._oneTimeListeners),this):new Promise((f=>this.once(o,f)))}fire(o,d){typeof o=="string"&&(o=new Go(o,d||{}));const f=o.type;if(this.listens(f)){o.target=this;const g=this._listeners&&this._listeners[f]?this._listeners[f].slice():[];for(const E of g)E.call(this,o);const b=this._oneTimeListeners&&this._oneTimeListeners[f]?this._oneTimeListeners[f].slice():[];for(const E of b)fc(f,E,this._oneTimeListeners),E.call(this,o);const w=this._eventedParent;w&&(mt(o,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),w.fire(o))}else o instanceof ko&&console.error(o.error);return this}listens(o){return!!(this._listeners&&this._listeners[o]&&this._listeners[o].length>0||this._oneTimeListeners&&this._oneTimeListeners[o]&&this._oneTimeListeners[o].length>0||this._eventedParent&&this._eventedParent.listens(o))}setEventedParent(o,d){return this._eventedParent=o,this._eventedParentData=d,this}}var Ot=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["fill-extrusion-edge-radius"]},"fill-extrusion-rounded-roof":{"type":"boolean","default":true,"requires":["fill-extrusion-edge-radius"],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":false,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function ma(c,...o){for(const d of o)for(const f in d)c[f]=d[f];return c}function Ui(c){return c instanceof Number||c instanceof String||c instanceof Boolean?c.valueOf():c}function Yi(c){if(Array.isArray(c))return c.map(Yi);if(c instanceof Object&&!(c instanceof Number||c instanceof String||c instanceof Boolean)){const o={};for(const d in c)o[d]=Yi(c[d]);return o}return Ui(c)}class Nl extends Error{constructor(o,d){super(d),this.message=d,this.key=o}}var Ns=Nl;class mc{constructor(o,d=[]){this.parent=o,this.bindings={};for(const[f,g]of d)this.bindings[f]=g}concat(o){return new mc(this,o)}get(o){if(this.bindings[o])return this.bindings[o];if(this.parent)return this.parent.get(o);throw new Error(`${o} not found in scope.`)}has(o){return!!this.bindings[o]||!!this.parent&&this.parent.has(o)}}var er=mc;const pa={kind:"null"},hn={kind:"number"},Nn={kind:"string"},Yn={kind:"boolean"},pr={kind:"color"},lo={kind:"object"},ii={kind:"value"},Dr={kind:"collator"},qo={kind:"formatted"},Xs={kind:"resolvedImage"};function Ir(c,o){return{kind:"array",itemType:c,N:o}}function ji(c){if(c.kind==="array"){const o=ji(c.itemType);return typeof c.N=="number"?`array<${o}, ${c.N}>`:c.itemType.kind==="value"?"array":`array<${o}>`}return c.kind}const yu=[pa,hn,Nn,Yn,pr,qo,lo,Ir(ii),Xs];function $s(c,o){if(o.kind==="error")return null;if(c.kind==="array"){if(o.kind==="array"&&(o.N===0&&o.itemType.kind==="value"||!$s(c.itemType,o.itemType))&&(typeof c.N!="number"||c.N===o.N))return null}else{if(c.kind===o.kind)return null;if(c.kind==="value"){for(const d of yu)if(!$s(d,o))return null}}return`Expected ${ji(c)} but found ${ji(o)} instead.`}function ul(c,o){return o.some((d=>d.kind===c.kind))}function $l(c,o){return o.some((d=>d==="null"?c===null:d==="array"?Array.isArray(c):d==="object"?c&&!Array.isArray(c)&&typeof c=="object":d===typeof c))}var ks,Rh={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Io(c){return(c=Math.round(c))<0?0:c>255?255:c}function dl(c){return Io(c[c.length-1]==="%"?parseFloat(c)/100*255:parseInt(c))}function Ao(c){return(o=c[c.length-1]==="%"?parseFloat(c)/100:parseFloat(c))<0?0:o>1?1:o;var o}function ga(c,o,d){return d<0?d+=1:d>1&&(d-=1),6*d<1?c+(o-c)*d*6:2*d<1?o:3*d<2?c+(o-c)*(2/3-d)*6:c}try{ks={}.parseCSSColor=function(c){var o,d=c.replace(/ /g,"").toLowerCase();if(d in Rh)return Rh[d].slice();if(d[0]==="#")return d.length===4?(o=parseInt(d.substr(1),16))>=0&&o<=4095?[(3840&o)>>4|(3840&o)>>8,240&o|(240&o)>>4,15&o|(15&o)<<4,1]:null:d.length===7&&(o=parseInt(d.substr(1),16))>=0&&o<=16777215?[(16711680&o)>>16,(65280&o)>>8,255&o,1]:null;var f=d.indexOf("("),g=d.indexOf(")");if(f!==-1&&g+1===d.length){var b=d.substr(0,f),w=d.substr(f+1,g-(f+1)).split(","),E=1;switch(b){case"rgba":if(w.length!==4)return null;E=Ao(w.pop());case"rgb":return w.length!==3?null:[dl(w[0]),dl(w[1]),dl(w[2]),E];case"hsla":if(w.length!==4)return null;E=Ao(w.pop());case"hsl":if(w.length!==3)return null;var I=(parseFloat(w[0])%360+360)%360/360,D=Ao(w[1]),N=Ao(w[2]),j=N<=.5?N*(D+1):N+D-N*D,Z=2*N-j;return[Io(255*ga(Z,j,I+1/3)),Io(255*ga(Z,j,I)),Io(255*ga(Z,j,I-1/3)),E];default:return null}}return null}}catch{}class ss{constructor(o,d,f,g=1){this.r=o,this.g=d,this.b=f,this.a=g}static parse(o){if(!o)return;if(o instanceof ss)return o;if(typeof o!="string")return;const d=ks(o);return d?new ss(d[0]/255*d[3],d[1]/255*d[3],d[2]/255*d[3],d[3]):void 0}toString(){const[o,d,f,g]=this.toArray();return`rgba(${Math.round(o)},${Math.round(d)},${Math.round(f)},${g})`}toArray(){const{r:o,g:d,b:f,a:g}=this;return g===0?[0,0,0,0]:[255*o/g,255*d/g,255*f/g,g]}toArray01(){const{r:o,g:d,b:f,a:g}=this;return g===0?[0,0,0,0]:[o/g,d/g,f/g,g]}toArray01PremultipliedAlpha(){const{r:o,g:d,b:f,a:g}=this;return[o,d,f,g]}}ss.black=new ss(0,0,0,1),ss.white=new ss(1,1,1,1),ss.transparent=new ss(0,0,0,0),ss.red=new ss(1,0,0,1),ss.blue=new ss(0,0,1,1);var Wi=ss;class Uc{constructor(o,d,f){this.sensitivity=o?d?"variant":"case":d?"accent":"base",this.locale=f,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(o,d){return this.collator.compare(o,d)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class hl{constructor(o,d,f,g,b){this.text=o.normalize?o.normalize():o,this.image=d,this.scale=f,this.fontStack=g,this.textColor=b}}class Yr{constructor(o){this.sections=o}static fromString(o){return new Yr([new hl(o,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some((o=>o.text.length!==0||o.image&&o.image.name.length!==0))}static factory(o){return o instanceof Yr?o:Yr.fromString(o)}toString(){return this.sections.length===0?"":this.sections.map((o=>o.text)).join("")}serialize(){const o=["format"];for(const d of this.sections){if(d.image){o.push(["image",d.image.name]);continue}o.push(d.text);const f={};d.fontStack&&(f["text-font"]=["literal",d.fontStack.split(",")]),d.scale&&(f["font-scale"]=d.scale),d.textColor&&(f["text-color"]=["rgba"].concat(d.textColor.toArray())),o.push(f)}return o}}class os{constructor(o){this.name=o.name,this.available=o.available}toString(){return this.name}static fromString(o){return o?new os({name:o,available:!1}):null}serialize(){return["image",this.name]}}function bu(c,o,d,f){return typeof c=="number"&&c>=0&&c<=255&&typeof o=="number"&&o>=0&&o<=255&&typeof d=="number"&&d>=0&&d<=255?f===void 0||typeof f=="number"&&f>=0&&f<=1?null:`Invalid rgba value [${[c,o,d,f].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof f=="number"?[c,o,d,f]:[c,o,d]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function tr(c){if(c===null||typeof c=="string"||typeof c=="boolean"||typeof c=="number"||c instanceof Wi||c instanceof Uc||c instanceof Yr||c instanceof os)return!0;if(Array.isArray(c)){for(const o of c)if(!tr(o))return!1;return!0}if(typeof c=="object"){for(const o in c)if(!tr(c[o]))return!1;return!0}return!1}function gr(c){if(c===null)return pa;if(typeof c=="string")return Nn;if(typeof c=="boolean")return Yn;if(typeof c=="number")return hn;if(c instanceof Wi)return pr;if(c instanceof Uc)return Dr;if(c instanceof Yr)return qo;if(c instanceof os)return Xs;if(Array.isArray(c)){const o=c.length;let d;for(const f of c){const g=gr(f);if(d){if(d===g)continue;d=ii;break}d=g}return Ir(d||ii,o)}return lo}function fl(c){const o=typeof c;return c===null?"":o==="string"||o==="number"||o==="boolean"?String(c):c instanceof Wi||c instanceof Yr||c instanceof os?c.toString():JSON.stringify(c)}class pc{constructor(o,d){this.type=o,this.value=d}static parse(o,d){if(o.length!==2)return d.error(`'literal' expression requires exactly one argument, but found ${o.length-1} instead.`);if(!tr(o[1]))return d.error("invalid value");const f=o[1];let g=gr(f);const b=d.expectedType;return g.kind!=="array"||g.N!==0||!b||b.kind!=="array"||typeof b.N=="number"&&b.N!==0||(g=b),new pc(g,f)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Wi?["rgba"].concat(this.value.toArray()):this.value instanceof Yr?this.value.serialize():this.value}}var ml=pc,Vr=class{constructor(c){this.name="ExpressionEvaluationError",this.message=c}toJSON(){return this.message}};const gc={string:Nn,number:hn,boolean:Yn,object:lo};class Ko{constructor(o,d){this.type=o,this.args=d}static parse(o,d){if(o.length<2)return d.error("Expected at least one argument.");let f,g=1;const b=o[0];if(b==="array"){let E,I;if(o.length>2){const D=o[1];if(typeof D!="string"||!(D in gc)||D==="object")return d.error('The item type argument of "array" must be one of string, number, boolean',1);E=gc[D],g++}else E=ii;if(o.length>3){if(o[2]!==null&&(typeof o[2]!="number"||o[2]<0||o[2]!==Math.floor(o[2])))return d.error('The length argument to "array" must be a positive integer literal',2);I=o[2],g++}f=Ir(E,I)}else f=gc[b];const w=[];for(;g<o.length;g++){const E=d.parse(o[g],g,ii);if(!E)return null;w.push(E)}return new Ko(f,w)}evaluate(o){for(let d=0;d<this.args.length;d++){const f=this.args[d].evaluate(o);if(!$s(this.type,gr(f)))return f;if(d===this.args.length-1)throw new Vr(`Expected value to be of type ${ji(this.type)}, but found ${ji(gr(f))} instead.`)}return null}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every((o=>o.outputDefined()))}serialize(){const o=this.type,d=[o.kind];if(o.kind==="array"){const f=o.itemType;if(f.kind==="string"||f.kind==="number"||f.kind==="boolean"){d.push(f.kind);const g=o.N;(typeof g=="number"||this.args.length>1)&&d.push(g)}}return d.concat(this.args.map((f=>f.serialize())))}}var Po=Ko;class va{constructor(o){this.type=qo,this.sections=o}static parse(o,d){if(o.length<2)return d.error("Expected at least one argument.");const f=o[1];if(!Array.isArray(f)&&typeof f=="object")return d.error("First argument must be an image or text section.");const g=[];let b=!1;for(let w=1;w<=o.length-1;++w){const E=o[w];if(b&&typeof E=="object"&&!Array.isArray(E)){b=!1;let I=null;if(E["font-scale"]&&(I=d.parse(E["font-scale"],1,hn),!I))return null;let D=null;if(E["text-font"]&&(D=d.parse(E["text-font"],1,Ir(Nn)),!D))return null;let N=null;if(E["text-color"]&&(N=d.parse(E["text-color"],1,pr),!N))return null;const j=g[g.length-1];j.scale=I,j.font=D,j.textColor=N}else{const I=d.parse(o[w],1,ii);if(!I)return null;const D=I.type.kind;if(D!=="string"&&D!=="value"&&D!=="null"&&D!=="resolvedImage")return d.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");b=!0,g.push({content:I,scale:null,font:null,textColor:null})}}return new va(g)}evaluate(o){return new Yr(this.sections.map((d=>{const f=d.content.evaluate(o);return gr(f)===Xs?new hl("",f,null,null,null):new hl(fl(f),null,d.scale?d.scale.evaluate(o):null,d.font?d.font.evaluate(o).join(","):null,d.textColor?d.textColor.evaluate(o):null)})))}eachChild(o){for(const d of this.sections)o(d.content),d.scale&&o(d.scale),d.font&&o(d.font),d.textColor&&o(d.textColor)}outputDefined(){return!1}serialize(){const o=["format"];for(const d of this.sections){o.push(d.content.serialize());const f={};d.scale&&(f["font-scale"]=d.scale.serialize()),d.font&&(f["text-font"]=d.font.serialize()),d.textColor&&(f["text-color"]=d.textColor.serialize()),o.push(f)}return o}}class _a{constructor(o){this.type=Xs,this.input=o}static parse(o,d){if(o.length!==2)return d.error("Expected two arguments.");const f=d.parse(o[1],1,Nn);return f?new _a(f):d.error("No image name provided.")}evaluate(o){const d=this.input.evaluate(o),f=os.fromString(d);return f&&o.availableImages&&(f.available=o.availableImages.indexOf(d)>-1),f}eachChild(o){o(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const pd={"to-boolean":Yn,"to-color":pr,"to-number":hn,"to-string":Nn};class Ya{constructor(o,d){this.type=o,this.args=d}static parse(o,d){if(o.length<2)return d.error("Expected at least one argument.");const f=o[0];if((f==="to-boolean"||f==="to-string")&&o.length!==2)return d.error("Expected one argument.");const g=pd[f],b=[];for(let w=1;w<o.length;w++){const E=d.parse(o[w],w,ii);if(!E)return null;b.push(E)}return new Ya(g,b)}evaluate(o){if(this.type.kind==="boolean")return!!this.args[0].evaluate(o);if(this.type.kind==="color"){let d,f;for(const g of this.args){if(d=g.evaluate(o),f=null,d instanceof Wi)return d;if(typeof d=="string"){const b=o.parseColor(d);if(b)return b}else if(Array.isArray(d)&&(f=d.length<3||d.length>4?`Invalid rbga value ${JSON.stringify(d)}: expected an array containing either three or four numeric values.`:bu(d[0],d[1],d[2],d[3]),!f))return new Wi(d[0]/255,d[1]/255,d[2]/255,d[3])}throw new Vr(f||`Could not parse color from value '${typeof d=="string"?d:String(JSON.stringify(d))}'`)}if(this.type.kind==="number"){let d=null;for(const f of this.args){if(d=f.evaluate(o),d===null)return 0;const g=Number(d);if(!isNaN(g))return g}throw new Vr(`Could not convert ${JSON.stringify(d)} to number.`)}return this.type.kind==="formatted"?Yr.fromString(fl(this.args[0].evaluate(o))):this.type.kind==="resolvedImage"?os.fromString(fl(this.args[0].evaluate(o))):fl(this.args[0].evaluate(o))}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every((o=>o.outputDefined()))}serialize(){if(this.type.kind==="formatted")return new va([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new _a(this.args[0]).serialize();const o=[`to-${this.type.kind}`];return this.eachChild((d=>{o.push(d.serialize())})),o}}var Xo=Ya;const Mo=["Unknown","Point","LineString","Polygon"];var Ul=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Mo[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const c=this.featureDistanceData.center,o=this.featureDistanceData.scale,{x:d,y:f}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(d*o-c[0])+this.featureDistanceData.bearing[1]*(f*o-c[1])}return 0}parseColor(c){let o=this._parseColorCache[c];return o||(o=this._parseColorCache[c]=Wi.parse(c)),o}};class Do{constructor(o,d,f,g){this.name=o,this.type=d,this._evaluate=f,this.args=g}evaluate(o){return this._evaluate(o,this.args)}eachChild(o){this.args.forEach(o)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map((o=>o.serialize())))}static parse(o,d){const f=o[0],g=Do.definitions[f];if(!g)return d.error(`Unknown expression "${f}". If you wanted a literal array, use ["literal", [...]].`,0);const b=Array.isArray(g)?g[0]:g.type,w=Array.isArray(g)?[[g[1],g[2]]]:g.overloads,E=w.filter((([D])=>!Array.isArray(D)||D.length===o.length-1));let I=null;for(const[D,N]of E){I=new bn(d.registry,d.path,null,d.scope);const j=[];let Z=!1;for(let ne=1;ne<o.length;ne++){const oe=o[ne],he=Array.isArray(D)?D[ne-1]:D.type,Te=I.parse(oe,1+j.length,he);if(!Te){Z=!0;break}j.push(Te)}if(!Z)if(Array.isArray(D)&&D.length!==j.length)I.error(`Expected ${D.length} arguments, but found ${j.length} instead.`);else{for(let ne=0;ne<j.length;ne++){const oe=Array.isArray(D)?D[ne]:D.type,he=j[ne];I.concat(ne+1).checkSubtype(oe,he.type)}if(I.errors.length===0)return new Do(f,b,N,j)}}if(E.length===1)d.errors.push(...I.errors);else{const D=(E.length?E:w).map((([j])=>{return Z=j,Array.isArray(Z)?`(${Z.map(ji).join(", ")})`:`(${ji(Z.type)}...)`;var Z})).join(" | "),N=[];for(let j=1;j<o.length;j++){const Z=d.parse(o[j],1+N.length);if(!Z)return null;N.push(ji(Z.type))}d.error(`Expected arguments of type ${D}, but found (${N.join(", ")}) instead.`)}return null}static register(o,d){Do.definitions=d;for(const f in d)o[f]=Do}}var ya=Do;class ba{constructor(o,d,f){this.type=Dr,this.locale=f,this.caseSensitive=o,this.diacriticSensitive=d}static parse(o,d){if(o.length!==2)return d.error("Expected one argument.");const f=o[1];if(typeof f!="object"||Array.isArray(f))return d.error("Collator options argument must be an object.");const g=d.parse(f["case-sensitive"]!==void 0&&f["case-sensitive"],1,Yn);if(!g)return null;const b=d.parse(f["diacritic-sensitive"]!==void 0&&f["diacritic-sensitive"],1,Yn);if(!b)return null;let w=null;return f.locale&&(w=d.parse(f.locale,1,Nn),!w)?null:new ba(g,b,w)}evaluate(o){return new Uc(this.caseSensitive.evaluate(o),this.diacriticSensitive.evaluate(o),this.locale?this.locale.evaluate(o):null)}eachChild(o){o(this.caseSensitive),o(this.diacriticSensitive),this.locale&&o(this.locale)}outputDefined(){return!1}serialize(){const o={};return o["case-sensitive"]=this.caseSensitive.serialize(),o["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(o.locale=this.locale.serialize()),["collator",o]}}const Yo=8192;function vc(c,o){c[0]=Math.min(c[0],o[0]),c[1]=Math.min(c[1],o[1]),c[2]=Math.max(c[2],o[0]),c[3]=Math.max(c[3],o[1])}function Za(c,o){return!(c[0]<=o[0]||c[2]>=o[2]||c[1]<=o[1]||c[3]>=o[3])}function pl(c,o){const d=(180+c[0])/360,f=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c[1]*Math.PI/360)))/360,g=Math.pow(2,o.z);return[Math.round(d*g*Yo),Math.round(f*g*Yo)]}function jc(c,o,d){const f=c[0]-o[0],g=c[1]-o[1],b=c[0]-d[0],w=c[1]-d[1];return f*w-b*g==0&&f*b<=0&&g*w<=0}function gl(c,o){let d=!1;for(let w=0,E=o.length;w<E;w++){const I=o[w];for(let D=0,N=I.length;D<N-1;D++){if(jc(c,I[D],I[D+1]))return!1;(g=I[D])[1]>(f=c)[1]!=(b=I[D+1])[1]>f[1]&&f[0]<(b[0]-g[0])*(f[1]-g[1])/(b[1]-g[1])+g[0]&&(d=!d)}}var f,g,b;return d}function xu(c,o){for(let d=0;d<o.length;d++)if(gl(c,o[d]))return!0;return!1}function wu(c,o,d,f){const g=f[0]-d[0],b=f[1]-d[1],w=(c[0]-d[0])*b-g*(c[1]-d[1]),E=(o[0]-d[0])*b-g*(o[1]-d[1]);return w>0&&E<0||w<0&&E>0}function co(c,o,d){for(const D of d)for(let N=0;N<D.length-1;++N)if((E=[(w=D[N+1])[0]-(b=D[N])[0],w[1]-b[1]])[0]*(I=[(g=o)[0]-(f=c)[0],g[1]-f[1]])[1]-E[1]*I[0]!=0&&wu(f,g,b,w)&&wu(b,w,f,g))return!0;var f,g,b,w,E,I;return!1}function Ei(c,o){for(let d=0;d<c.length;++d)if(!gl(c[d],o))return!1;for(let d=0;d<c.length-1;++d)if(co(c[d],c[d+1],o))return!1;return!0}function Wc(c,o){for(let d=0;d<o.length;d++)if(Ei(c,o[d]))return!0;return!1}function Tu(c,o,d){const f=[];for(let g=0;g<c.length;g++){const b=[];for(let w=0;w<c[g].length;w++){const E=pl(c[g][w],d);vc(o,E),b.push(E)}f.push(b)}return f}function gd(c,o,d){const f=[];for(let g=0;g<c.length;g++){const b=Tu(c[g],o,d);f.push(b)}return f}function vl(c,o,d,f){if(c[0]<d[0]||c[0]>d[2]){const g=.5*f;let b=c[0]-d[0]>g?-f:d[0]-c[0]>g?f:0;b===0&&(b=c[0]-d[2]>g?-f:d[2]-c[0]>g?f:0),c[0]+=b}vc(o,c)}function Us(c,o,d,f){const g=Math.pow(2,f.z)*Yo,b=[f.x*Yo,f.y*Yo],w=[];if(!c)return w;for(const E of c)for(const I of E){const D=[I.x+b[0],I.y+b[1]];vl(D,o,d,g),w.push(D)}return w}function Hc(c,o,d,f){const g=Math.pow(2,f.z)*Yo,b=[f.x*Yo,f.y*Yo],w=[];if(!c)return w;for(const I of c){const D=[];for(const N of I){const j=[N.x+b[0],N.y+b[1]];vc(o,j),D.push(j)}w.push(D)}if(o[2]-o[0]<=g/2){(E=o)[0]=E[1]=1/0,E[2]=E[3]=-1/0;for(const I of w)for(const D of I)vl(D,o,d,g)}var E;return w}class uo{constructor(o,d){this.type=Yn,this.geojson=o,this.geometries=d}static parse(o,d){if(o.length!==2)return d.error(`'within' expression requires exactly one argument, but found ${o.length-1} instead.`);if(tr(o[1])){const f=o[1];if(f.type==="FeatureCollection")for(let g=0;g<f.features.length;++g){const b=f.features[g].geometry.type;if(b==="Polygon"||b==="MultiPolygon")return new uo(f,f.features[g].geometry)}else if(f.type==="Feature"){const g=f.geometry.type;if(g==="Polygon"||g==="MultiPolygon")return new uo(f,f.geometry)}else if(f.type==="Polygon"||f.type==="MultiPolygon")return new uo(f,f)}return d.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(o){if(o.geometry()!=null&&o.canonicalID()!=null){if(o.geometryType()==="Point")return(function(d,f){const g=[1/0,1/0,-1/0,-1/0],b=[1/0,1/0,-1/0,-1/0],w=d.canonicalID();if(!w)return!1;if(f.type==="Polygon"){const E=Tu(f.coordinates,b,w),I=Us(d.geometry(),g,b,w);if(!Za(g,b))return!1;for(const D of I)if(!gl(D,E))return!1}if(f.type==="MultiPolygon"){const E=gd(f.coordinates,b,w),I=Us(d.geometry(),g,b,w);if(!Za(g,b))return!1;for(const D of I)if(!xu(D,E))return!1}return!0})(o,this.geometries);if(o.geometryType()==="LineString")return(function(d,f){const g=[1/0,1/0,-1/0,-1/0],b=[1/0,1/0,-1/0,-1/0],w=d.canonicalID();if(!w)return!1;if(f.type==="Polygon"){const E=Tu(f.coordinates,b,w),I=Hc(d.geometry(),g,b,w);if(!Za(g,b))return!1;for(const D of I)if(!Ei(D,E))return!1}if(f.type==="MultiPolygon"){const E=gd(f.coordinates,b,w),I=Hc(d.geometry(),g,b,w);if(!Za(g,b))return!1;for(const D of I)if(!Wc(D,E))return!1}return!0})(o,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var Zo=uo;function P(c){if(c instanceof ya&&(c.name==="get"&&c.args.length===1||c.name==="feature-state"||c.name==="has"&&c.args.length===1||c.name==="properties"||c.name==="geometry-type"||c.name==="id"||/^filter-/.test(c.name))||c instanceof Zo)return!1;let o=!0;return c.eachChild((d=>{o&&!P(d)&&(o=!1)})),o}function ee(c){if(c instanceof ya&&c.name==="feature-state")return!1;let o=!0;return c.eachChild((d=>{o&&!ee(d)&&(o=!1)})),o}function de(c,o){if(c instanceof ya&&o.indexOf(c.name)>=0)return!1;let d=!0;return c.eachChild((f=>{d&&!de(f,o)&&(d=!1)})),d}class Me{constructor(o,d){this.type=d.type,this.name=o,this.boundExpression=d}static parse(o,d){if(o.length!==2||typeof o[1]!="string")return d.error("'var' expression requires exactly one string literal argument.");const f=o[1];return d.scope.has(f)?new Me(f,d.scope.get(f)):d.error(`Unknown variable "${f}". Make sure "${f}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(o){return this.boundExpression.evaluate(o)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var St=Me;class Rt{constructor(o,d=[],f,g=new er,b=[]){this.registry=o,this.path=d,this.key=d.map((w=>`[${w}]`)).join(""),this.scope=g,this.errors=b,this.expectedType=f}parse(o,d,f,g,b={}){return d?this.concat(d,f,g)._parse(o,b):this._parse(o,b)}_parse(o,d){function f(g,b,w){return w==="assert"?new Po(b,[g]):w==="coerce"?new Xo(b,[g]):g}if(o!==null&&typeof o!="string"&&typeof o!="boolean"&&typeof o!="number"||(o=["literal",o]),Array.isArray(o)){if(o.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const g=o[0];if(typeof g!="string")return this.error(`Expression name must be a string, but found ${typeof g} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const b=this.registry[g];if(b){let w=b.parse(o,this);if(!w)return null;if(this.expectedType){const E=this.expectedType,I=w.type;if(E.kind!=="string"&&E.kind!=="number"&&E.kind!=="boolean"&&E.kind!=="object"&&E.kind!=="array"||I.kind!=="value")if(E.kind!=="color"&&E.kind!=="formatted"&&E.kind!=="resolvedImage"||I.kind!=="value"&&I.kind!=="string"){if(this.checkSubtype(E,I))return null}else w=f(w,E,d.typeAnnotation||"coerce");else w=f(w,E,d.typeAnnotation||"assert")}if(!(w instanceof ml)&&w.type.kind!=="resolvedImage"&&di(w)){const E=new Ul;try{w=new ml(w.type,w.evaluate(E))}catch(I){return this.error(I.message),null}}return w}return this.error(`Unknown expression "${g}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(o===void 0?"'undefined' value invalid. Use null instead.":typeof o=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof o} instead.`)}concat(o,d,f){const g=typeof o=="number"?this.path.concat(o):this.path,b=f?this.scope.concat(f):this.scope;return new Rt(this.registry,g,d||null,b,this.errors)}error(o,...d){const f=`${this.key}${d.map((g=>`[${g}]`)).join("")}`;this.errors.push(new Ns(f,o))}checkSubtype(o,d){const f=$s(o,d);return f&&this.error(f),f}}var bn=Rt;function di(c){if(c instanceof St)return di(c.boundExpression);if(c instanceof ya&&c.name==="error"||c instanceof ba||c instanceof Zo)return!1;const o=c instanceof Xo||c instanceof Po;let d=!0;return c.eachChild((f=>{d=o?d&&di(f):d&&f instanceof ml})),!!d&&P(c)&&de(c,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function Lr(c,o){const d=c.length-1;let f,g,b=0,w=d,E=0;for(;b<=w;)if(E=Math.floor((b+w)/2),f=c[E],g=c[E+1],f<=o){if(E===d||o<g)return E;b=E+1}else{if(!(f>o))throw new Vr("Input is not a number.");w=E-1}return 0}class ki{constructor(o,d,f){this.type=o,this.input=d,this.labels=[],this.outputs=[];for(const[g,b]of f)this.labels.push(g),this.outputs.push(b)}static parse(o,d){if(o.length-1<4)return d.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if((o.length-1)%2!=0)return d.error("Expected an even number of arguments.");const f=d.parse(o[1],1,hn);if(!f)return null;const g=[];let b=null;d.expectedType&&d.expectedType.kind!=="value"&&(b=d.expectedType);for(let w=1;w<o.length;w+=2){const E=w===1?-1/0:o[w],I=o[w+1],D=w,N=w+1;if(typeof E!="number")return d.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',D);if(g.length&&g[g.length-1][0]>=E)return d.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',D);const j=d.parse(I,N,b);if(!j)return null;b=b||j.type,g.push([E,j])}return new ki(b,f,g)}evaluate(o){const d=this.labels,f=this.outputs;if(d.length===1)return f[0].evaluate(o);const g=this.input.evaluate(o);if(g<=d[0])return f[0].evaluate(o);const b=d.length;return g>=d[b-1]?f[b-1].evaluate(o):f[Lr(d,g)].evaluate(o)}eachChild(o){o(this.input);for(const d of this.outputs)o(d)}outputDefined(){return this.outputs.every((o=>o.outputDefined()))}serialize(){const o=["step",this.input.serialize()];for(let d=0;d<this.labels.length;d++)d>0&&o.push(this.labels[d]),o.push(this.outputs[d].serialize());return o}}var sr=ki;function Qn(c,o,d){return c*(1-d)+o*d}var Ys=Object.freeze({__proto__:null,array:function(c,o,d){return c.map(((f,g)=>Qn(f,o[g],d)))},color:function(c,o,d){return new Wi(Qn(c.r,o.r,d),Qn(c.g,o.g,d),Qn(c.b,o.b,d),Qn(c.a,o.a,d))},number:Qn});const Ja=.95047,xa=1.08883,Gc=4/29,Qa=6/29,gm=3*Qa*Qa,P_=Qa*Qa*Qa,M_=Math.PI/180,D_=180/Math.PI;function Jo(c){return c>P_?Math.pow(c,1/3):c/gm+Gc}function Oh(c){return c>Qa?c*c*c:gm*(c-Gc)}function Vh(c){return 255*(c<=.0031308?12.92*c:1.055*Math.pow(c,1/2.4)-.055)}function vd(c){return(c/=255)<=.04045?c/12.92:Math.pow((c+.055)/1.055,2.4)}function pg(c){const o=vd(c.r),d=vd(c.g),f=vd(c.b),g=Jo((.4124564*o+.3575761*d+.1804375*f)/Ja),b=Jo((.2126729*o+.7151522*d+.072175*f)/1);return{l:116*b-16,a:500*(g-b),b:200*(b-Jo((.0193339*o+.119192*d+.9503041*f)/xa)),alpha:c.a}}function gg(c){let o=(c.l+16)/116,d=isNaN(c.a)?o:o+c.a/500,f=isNaN(c.b)?o:o-c.b/200;return o=1*Oh(o),d=Ja*Oh(d),f=xa*Oh(f),new Wi(Vh(3.2404542*d-1.5371385*o-.4985314*f),Vh(-.969266*d+1.8760108*o+.041556*f),Vh(.0556434*d-.2040259*o+1.0572252*f),c.alpha)}function vg(c,o,d){const f=o-c;return c+d*(f>180||f<-180?f-360*Math.round(f/360):f)}const _c={forward:pg,reverse:gg,interpolate:function(c,o,d){return{l:Qn(c.l,o.l,d),a:Qn(c.a,o.a,d),b:Qn(c.b,o.b,d),alpha:Qn(c.alpha,o.alpha,d)}}},Su={forward:function(c){const{l:o,a:d,b:f}=pg(c),g=Math.atan2(f,d)*D_;return{h:g<0?g+360:g,c:Math.sqrt(d*d+f*f),l:o,alpha:c.a}},reverse:function(c){const o=c.h*M_,d=c.c;return gg({l:c.l,a:Math.cos(o)*d,b:Math.sin(o)*d,alpha:c.alpha})},interpolate:function(c,o,d){return{h:vg(c.h,o.h,d),c:Qn(c.c,o.c,d),l:Qn(c.l,o.l,d),alpha:Qn(c.alpha,o.alpha,d)}}};var vm=Object.freeze({__proto__:null,hcl:Su,lab:_c});class Eu{constructor(o,d,f,g,b){this.type=o,this.operator=d,this.interpolation=f,this.input=g,this.labels=[],this.outputs=[];for(const[w,E]of b)this.labels.push(w),this.outputs.push(E)}static interpolationFactor(o,d,f,g){let b=0;if(o.name==="exponential")b=_m(d,o.base,f,g);else if(o.name==="linear")b=_m(d,1,f,g);else if(o.name==="cubic-bezier"){const w=o.controlPoints;b=new X(w[0],w[1],w[2],w[3]).solve(_m(d,1,f,g))}return b}static parse(o,d){let[f,g,b,...w]=o;if(!Array.isArray(g)||g.length===0)return d.error("Expected an interpolation type expression.",1);if(g[0]==="linear")g={name:"linear"};else if(g[0]==="exponential"){const D=g[1];if(typeof D!="number")return d.error("Exponential interpolation requires a numeric base.",1,1);g={name:"exponential",base:D}}else{if(g[0]!=="cubic-bezier")return d.error(`Unknown interpolation type ${String(g[0])}`,1,0);{const D=g.slice(1);if(D.length!==4||D.some((N=>typeof N!="number"||N<0||N>1)))return d.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);g={name:"cubic-bezier",controlPoints:D}}}if(o.length-1<4)return d.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if((o.length-1)%2!=0)return d.error("Expected an even number of arguments.");if(b=d.parse(b,2,hn),!b)return null;const E=[];let I=null;f==="interpolate-hcl"||f==="interpolate-lab"?I=pr:d.expectedType&&d.expectedType.kind!=="value"&&(I=d.expectedType);for(let D=0;D<w.length;D+=2){const N=w[D],j=w[D+1],Z=D+3,ne=D+4;if(typeof N!="number")return d.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Z);if(E.length&&E[E.length-1][0]>=N)return d.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Z);const oe=d.parse(j,ne,I);if(!oe)return null;I=I||oe.type,E.push([N,oe])}return I.kind==="number"||I.kind==="color"||I.kind==="array"&&I.itemType.kind==="number"&&typeof I.N=="number"?new Eu(I,f,g,b,E):d.error(`Type ${ji(I)} is not interpolatable.`)}evaluate(o){const d=this.labels,f=this.outputs;if(d.length===1)return f[0].evaluate(o);const g=this.input.evaluate(o);if(g<=d[0])return f[0].evaluate(o);const b=d.length;if(g>=d[b-1])return f[b-1].evaluate(o);const w=Lr(d,g),E=Eu.interpolationFactor(this.interpolation,g,d[w],d[w+1]),I=f[w].evaluate(o),D=f[w+1].evaluate(o);return this.operator==="interpolate"?Ys[this.type.kind.toLowerCase()](I,D,E):this.operator==="interpolate-hcl"?Su.reverse(Su.interpolate(Su.forward(I),Su.forward(D),E)):_c.reverse(_c.interpolate(_c.forward(I),_c.forward(D),E))}eachChild(o){o(this.input);for(const d of this.outputs)o(d)}outputDefined(){return this.outputs.every((o=>o.outputDefined()))}serialize(){let o;o=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const d=[this.operator,o,this.input.serialize()];for(let f=0;f<this.labels.length;f++)d.push(this.labels[f],this.outputs[f].serialize());return d}}function _m(c,o,d,f){const g=f-d,b=c-d;return g===0?0:o===1?b/g:(Math.pow(o,b)-1)/(Math.pow(o,g)-1)}var _l=Eu;class _d{constructor(o,d){this.type=o,this.args=d}static parse(o,d){if(o.length<2)return d.error("Expectected at least one argument.");let f=null;const g=d.expectedType;g&&g.kind!=="value"&&(f=g);const b=[];for(const E of o.slice(1)){const I=d.parse(E,1+b.length,f,void 0,{typeAnnotation:"omit"});if(!I)return null;f=f||I.type,b.push(I)}const w=g&&b.some((E=>$s(g,E.type)));return new _d(w?ii:f,b)}evaluate(o){let d,f=null,g=0;for(const b of this.args){if(g++,f=b.evaluate(o),f&&f instanceof os&&!f.available&&(d||(d=f),f=null,g===this.args.length))return d;if(f!==null)break}return f}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every((o=>o.outputDefined()))}serialize(){const o=["coalesce"];return this.eachChild((d=>{o.push(d.serialize())})),o}}var Bh=_d;class yd{constructor(o,d){this.type=d.type,this.bindings=[].concat(o),this.result=d}evaluate(o){return this.result.evaluate(o)}eachChild(o){for(const d of this.bindings)o(d[1]);o(this.result)}static parse(o,d){if(o.length<4)return d.error(`Expected at least 3 arguments, but found ${o.length-1} instead.`);const f=[];for(let b=1;b<o.length-1;b+=2){const w=o[b];if(typeof w!="string")return d.error(`Expected string, but found ${typeof w} instead.`,b);if(/[^a-zA-Z0-9_]/.test(w))return d.error("Variable names must contain only alphanumeric characters or '_'.",b);const E=d.parse(o[b+1],b+1);if(!E)return null;f.push([w,E])}const g=d.parse(o[o.length-1],o.length-1,d.expectedType,f);return g?new yd(f,g):null}outputDefined(){return this.result.outputDefined()}serialize(){const o=["let"];for(const[d,f]of this.bindings)o.push(d,f.serialize());return o.push(this.result.serialize()),o}}var bd=yd;class Fh{constructor(o,d,f){this.type=o,this.index=d,this.input=f}static parse(o,d){if(o.length!==3)return d.error(`Expected 2 arguments, but found ${o.length-1} instead.`);const f=d.parse(o[1],1,hn),g=d.parse(o[2],2,Ir(d.expectedType||ii));return f&&g?new Fh(g.type.itemType,f,g):null}evaluate(o){const d=this.index.evaluate(o),f=this.input.evaluate(o);if(d<0)throw new Vr(`Array index out of bounds: ${d} < 0.`);if(d>=f.length)throw new Vr(`Array index out of bounds: ${d} > ${f.length-1}.`);if(d!==Math.floor(d))throw new Vr(`Array index must be an integer, but found ${d} instead.`);return f[d]}eachChild(o){o(this.index),o(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var ym=Fh;class Lo{constructor(o,d){this.type=Yn,this.needle=o,this.haystack=d}static parse(o,d){if(o.length!==3)return d.error(`Expected 2 arguments, but found ${o.length-1} instead.`);const f=d.parse(o[1],1,ii),g=d.parse(o[2],2,ii);return f&&g?ul(f.type,[Yn,Nn,hn,pa,ii])?new Lo(f,g):d.error(`Expected first argument to be of type boolean, string, number or null, but found ${ji(f.type)} instead`):null}evaluate(o){const d=this.needle.evaluate(o),f=this.haystack.evaluate(o);if(f==null)return!1;if(!$l(d,["boolean","string","number","null"]))throw new Vr(`Expected first argument to be of type boolean, string, number or null, but found ${ji(gr(d))} instead.`);if(!$l(f,["string","array"]))throw new Vr(`Expected second argument to be of type array or string, but found ${ji(gr(f))} instead.`);return f.indexOf(d)>=0}eachChild(o){o(this.needle),o(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var zh=Lo;class xd{constructor(o,d,f){this.type=hn,this.needle=o,this.haystack=d,this.fromIndex=f}static parse(o,d){if(o.length<=2||o.length>=5)return d.error(`Expected 3 or 4 arguments, but found ${o.length-1} instead.`);const f=d.parse(o[1],1,ii),g=d.parse(o[2],2,ii);if(!f||!g)return null;if(!ul(f.type,[Yn,Nn,hn,pa,ii]))return d.error(`Expected first argument to be of type boolean, string, number or null, but found ${ji(f.type)} instead`);if(o.length===4){const b=d.parse(o[3],3,hn);return b?new xd(f,g,b):null}return new xd(f,g)}evaluate(o){const d=this.needle.evaluate(o),f=this.haystack.evaluate(o);if(!$l(d,["boolean","string","number","null"]))throw new Vr(`Expected first argument to be of type boolean, string, number or null, but found ${ji(gr(d))} instead.`);if(!$l(f,["string","array"]))throw new Vr(`Expected second argument to be of type array or string, but found ${ji(gr(f))} instead.`);if(this.fromIndex){const g=this.fromIndex.evaluate(o);return f.indexOf(d,g)}return f.indexOf(d)}eachChild(o){o(this.needle),o(this.haystack),this.fromIndex&&o(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const o=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),o]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var bm=xd;class Nh{constructor(o,d,f,g,b,w){this.inputType=o,this.type=d,this.input=f,this.cases=g,this.outputs=b,this.otherwise=w}static parse(o,d){if(o.length<5)return d.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if(o.length%2!=1)return d.error("Expected an even number of arguments.");let f,g;d.expectedType&&d.expectedType.kind!=="value"&&(g=d.expectedType);const b={},w=[];for(let D=2;D<o.length-1;D+=2){let N=o[D];const j=o[D+1];Array.isArray(N)||(N=[N]);const Z=d.concat(D);if(N.length===0)return Z.error("Expected at least one branch label.");for(const oe of N){if(typeof oe!="number"&&typeof oe!="string")return Z.error("Branch labels must be numbers or strings.");if(typeof oe=="number"&&Math.abs(oe)>Number.MAX_SAFE_INTEGER)return Z.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof oe=="number"&&Math.floor(oe)!==oe)return Z.error("Numeric branch labels must be integer values.");if(f){if(Z.checkSubtype(f,gr(oe)))return null}else f=gr(oe);if(b[String(oe)]!==void 0)return Z.error("Branch labels must be unique.");b[String(oe)]=w.length}const ne=d.parse(j,D,g);if(!ne)return null;g=g||ne.type,w.push(ne)}const E=d.parse(o[1],1,ii);if(!E)return null;const I=d.parse(o[o.length-1],o.length-1,g);return I?E.type.kind!=="value"&&d.concat(1).checkSubtype(f,E.type)?null:new Nh(f,g,E,b,w,I):null}evaluate(o){const d=this.input.evaluate(o);return(gr(d)===this.inputType&&this.outputs[this.cases[d]]||this.otherwise).evaluate(o)}eachChild(o){o(this.input),this.outputs.forEach(o),o(this.otherwise)}outputDefined(){return this.outputs.every((o=>o.outputDefined()))&&this.otherwise.outputDefined()}serialize(){const o=["match",this.input.serialize()],d=Object.keys(this.cases).sort(),f=[],g={};for(const w of d){const E=g[this.cases[w]];E===void 0?(g[this.cases[w]]=f.length,f.push([this.cases[w],[w]])):f[E][1].push(w)}const b=w=>this.inputType.kind==="number"?Number(w):w;for(const[w,E]of f)o.push(E.length===1?b(E[0]):E.map(b)),o.push(this.outputs[w].serialize());return o.push(this.otherwise.serialize()),o}}var L_=Nh;class xm{constructor(o,d,f){this.type=o,this.branches=d,this.otherwise=f}static parse(o,d){if(o.length<4)return d.error(`Expected at least 3 arguments, but found only ${o.length-1}.`);if(o.length%2!=0)return d.error("Expected an odd number of arguments.");let f;d.expectedType&&d.expectedType.kind!=="value"&&(f=d.expectedType);const g=[];for(let w=1;w<o.length-1;w+=2){const E=d.parse(o[w],w,Yn);if(!E)return null;const I=d.parse(o[w+1],w+1,f);if(!I)return null;g.push([E,I]),f=f||I.type}const b=d.parse(o[o.length-1],o.length-1,f);return b?new xm(f,g,b):null}evaluate(o){for(const[d,f]of this.branches)if(d.evaluate(o))return f.evaluate(o);return this.otherwise.evaluate(o)}eachChild(o){for(const[d,f]of this.branches)o(d),o(f);o(this.otherwise)}outputDefined(){return this.branches.every((([o,d])=>d.outputDefined()))&&this.otherwise.outputDefined()}serialize(){const o=["case"];return this.eachChild((d=>{o.push(d.serialize())})),o}}var _g=xm;class wd{constructor(o,d,f,g){this.type=o,this.input=d,this.beginIndex=f,this.endIndex=g}static parse(o,d){if(o.length<=2||o.length>=5)return d.error(`Expected 3 or 4 arguments, but found ${o.length-1} instead.`);const f=d.parse(o[1],1,ii),g=d.parse(o[2],2,hn);if(!f||!g)return null;if(!ul(f.type,[Ir(ii),Nn,ii]))return d.error(`Expected first argument to be of type array or string, but found ${ji(f.type)} instead`);if(o.length===4){const b=d.parse(o[3],3,hn);return b?new wd(f.type,f,g,b):null}return new wd(f.type,f,g)}evaluate(o){const d=this.input.evaluate(o),f=this.beginIndex.evaluate(o);if(!$l(d,["string","array"]))throw new Vr(`Expected first argument to be of type array or string, but found ${ji(gr(d))} instead.`);if(this.endIndex){const g=this.endIndex.evaluate(o);return d.slice(f,g)}return d.slice(f)}eachChild(o){o(this.input),o(this.beginIndex),this.endIndex&&o(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const o=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),o]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var yg=wd;function $h(c,o){return c==="=="||c==="!="?o.kind==="boolean"||o.kind==="string"||o.kind==="number"||o.kind==="null"||o.kind==="value":o.kind==="string"||o.kind==="number"||o.kind==="value"}function wm(c,o,d,f){return f.compare(o,d)===0}function qc(c,o,d){const f=c!=="=="&&c!=="!=";return class fN{constructor(b,w,E){this.type=Yn,this.lhs=b,this.rhs=w,this.collator=E,this.hasUntypedArgument=b.type.kind==="value"||w.type.kind==="value"}static parse(b,w){if(b.length!==3&&b.length!==4)return w.error("Expected two or three arguments.");const E=b[0];let I=w.parse(b[1],1,ii);if(!I)return null;if(!$h(E,I.type))return w.concat(1).error(`"${E}" comparisons are not supported for type '${ji(I.type)}'.`);let D=w.parse(b[2],2,ii);if(!D)return null;if(!$h(E,D.type))return w.concat(2).error(`"${E}" comparisons are not supported for type '${ji(D.type)}'.`);if(I.type.kind!==D.type.kind&&I.type.kind!=="value"&&D.type.kind!=="value")return w.error(`Cannot compare types '${ji(I.type)}' and '${ji(D.type)}'.`);f&&(I.type.kind==="value"&&D.type.kind!=="value"?I=new Po(D.type,[I]):I.type.kind!=="value"&&D.type.kind==="value"&&(D=new Po(I.type,[D])));let N=null;if(b.length===4){if(I.type.kind!=="string"&&D.type.kind!=="string"&&I.type.kind!=="value"&&D.type.kind!=="value")return w.error("Cannot use collator to compare non-string types.");if(N=w.parse(b[3],3,Dr),!N)return null}return new fN(I,D,N)}evaluate(b){const w=this.lhs.evaluate(b),E=this.rhs.evaluate(b);if(f&&this.hasUntypedArgument){const I=gr(w),D=gr(E);if(I.kind!==D.kind||I.kind!=="string"&&I.kind!=="number")throw new Vr(`Expected arguments for "${c}" to be (string, string) or (number, number), but found (${I.kind}, ${D.kind}) instead.`)}if(this.collator&&!f&&this.hasUntypedArgument){const I=gr(w),D=gr(E);if(I.kind!=="string"||D.kind!=="string")return o(b,w,E)}return this.collator?d(b,w,E,this.collator.evaluate(b)):o(b,w,E)}eachChild(b){b(this.lhs),b(this.rhs),this.collator&&b(this.collator)}outputDefined(){return!0}serialize(){const b=[c];return this.eachChild((w=>{b.push(w.serialize())})),b}}}const Tm=qc("==",(function(c,o,d){return o===d}),wm),R_=qc("!=",(function(c,o,d){return o!==d}),(function(c,o,d,f){return!wm(0,o,d,f)})),O_=qc("<",(function(c,o,d){return o<d}),(function(c,o,d,f){return f.compare(o,d)<0})),Kc=qc(">",(function(c,o,d){return o>d}),(function(c,o,d,f){return f.compare(o,d)>0})),jl=qc("<=",(function(c,o,d){return o<=d}),(function(c,o,d,f){return f.compare(o,d)<=0})),Sm=qc(">=",(function(c,o,d){return o>=d}),(function(c,o,d,f){return f.compare(o,d)>=0}));class Uh{constructor(o,d,f,g,b,w){this.type=Nn,this.number=o,this.locale=d,this.currency=f,this.unit=g,this.minFractionDigits=b,this.maxFractionDigits=w}static parse(o,d){if(o.length!==3)return d.error("Expected two arguments.");const f=d.parse(o[1],1,hn);if(!f)return null;const g=o[2];if(typeof g!="object"||Array.isArray(g))return d.error("NumberFormat options argument must be an object.");let b=null;if(g.locale&&(b=d.parse(g.locale,1,Nn),!b))return null;let w=null;if(g.currency&&(w=d.parse(g.currency,1,Nn),!w))return null;let E=null;if(g.unit&&(E=d.parse(g.unit,1,Nn),!E))return null;let I=null;if(g["min-fraction-digits"]&&(I=d.parse(g["min-fraction-digits"],1,hn),!I))return null;let D=null;return g["max-fraction-digits"]&&(D=d.parse(g["max-fraction-digits"],1,hn),!D)?null:new Uh(f,b,w,E,I,D)}evaluate(o){return new Intl.NumberFormat(this.locale?this.locale.evaluate(o):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(o):void 0,unit:this.unit?this.unit.evaluate(o):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(o):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(o):void 0}).format(this.number.evaluate(o))}eachChild(o){o(this.number),this.locale&&o(this.locale),this.currency&&o(this.currency),this.unit&&o(this.unit),this.minFractionDigits&&o(this.minFractionDigits),this.maxFractionDigits&&o(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const o={};return this.locale&&(o.locale=this.locale.serialize()),this.currency&&(o.currency=this.currency.serialize()),this.unit&&(o.unit=this.unit.serialize()),this.minFractionDigits&&(o["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(o["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),o]}}class Xc{constructor(o){this.type=hn,this.input=o}static parse(o,d){if(o.length!==2)return d.error(`Expected 1 argument, but found ${o.length-1} instead.`);const f=d.parse(o[1],1);return f?f.type.kind!=="array"&&f.type.kind!=="string"&&f.type.kind!=="value"?d.error(`Expected argument of type string or array, but found ${ji(f.type)} instead.`):new Xc(f):null}evaluate(o){const d=this.input.evaluate(o);if(typeof d=="string"||Array.isArray(d))return d.length;throw new Vr(`Expected value to be of type string or array, but found ${ji(gr(d))} instead.`)}eachChild(o){o(this.input)}outputDefined(){return!1}serialize(){const o=["length"];return this.eachChild((d=>{o.push(d.serialize())})),o}}const Em={"==":Tm,"!=":R_,">":Kc,"<":O_,">=":Sm,"<=":jl,array:Po,at:ym,boolean:Po,case:_g,coalesce:Bh,collator:ba,format:va,image:_a,in:zh,"index-of":bm,interpolate:_l,"interpolate-hcl":_l,"interpolate-lab":_l,length:Xc,let:bd,literal:ml,match:L_,number:Po,"number-format":Uh,object:Po,slice:yg,step:sr,string:Po,"to-boolean":Xo,"to-color":Xo,"to-number":Xo,"to-string":Xo,var:St,within:Zo};function Cm(c,[o,d,f,g]){o=o.evaluate(c),d=d.evaluate(c),f=f.evaluate(c);const b=g?g.evaluate(c):1,w=bu(o,d,f,b);if(w)throw new Vr(w);return new Wi(o/255*b,d/255*b,f/255*b,b)}function yl(c,o){return c in o}function jh(c,o){const d=o[c];return d===void 0?null:d}function wa(c){return{type:c}}ya.register(Em,{error:[{kind:"error"},[Nn],(c,[o])=>{throw new Vr(o.evaluate(c))}],typeof:[Nn,[ii],(c,[o])=>ji(gr(o.evaluate(c)))],"to-rgba":[Ir(hn,4),[pr],(c,[o])=>o.evaluate(c).toArray()],rgb:[pr,[hn,hn,hn],Cm],rgba:[pr,[hn,hn,hn,hn],Cm],has:{type:Yn,overloads:[[[Nn],(c,[o])=>yl(o.evaluate(c),c.properties())],[[Nn,lo],(c,[o,d])=>yl(o.evaluate(c),d.evaluate(c))]]},get:{type:ii,overloads:[[[Nn],(c,[o])=>jh(o.evaluate(c),c.properties())],[[Nn,lo],(c,[o,d])=>jh(o.evaluate(c),d.evaluate(c))]]},"feature-state":[ii,[Nn],(c,[o])=>jh(o.evaluate(c),c.featureState||{})],properties:[lo,[],c=>c.properties()],"geometry-type":[Nn,[],c=>c.geometryType()],id:[ii,[],c=>c.id()],zoom:[hn,[],c=>c.globals.zoom],pitch:[hn,[],c=>c.globals.pitch||0],"distance-from-center":[hn,[],c=>c.distanceFromCenter()],"heatmap-density":[hn,[],c=>c.globals.heatmapDensity||0],"line-progress":[hn,[],c=>c.globals.lineProgress||0],"sky-radial-progress":[hn,[],c=>c.globals.skyRadialProgress||0],accumulated:[ii,[],c=>c.globals.accumulated===void 0?null:c.globals.accumulated],"+":[hn,wa(hn),(c,o)=>{let d=0;for(const f of o)d+=f.evaluate(c);return d}],"*":[hn,wa(hn),(c,o)=>{let d=1;for(const f of o)d*=f.evaluate(c);return d}],"-":{type:hn,overloads:[[[hn,hn],(c,[o,d])=>o.evaluate(c)-d.evaluate(c)],[[hn],(c,[o])=>-o.evaluate(c)]]},"/":[hn,[hn,hn],(c,[o,d])=>o.evaluate(c)/d.evaluate(c)],"%":[hn,[hn,hn],(c,[o,d])=>o.evaluate(c)%d.evaluate(c)],ln2:[hn,[],()=>Math.LN2],pi:[hn,[],()=>Math.PI],e:[hn,[],()=>Math.E],"^":[hn,[hn,hn],(c,[o,d])=>Math.pow(o.evaluate(c),d.evaluate(c))],sqrt:[hn,[hn],(c,[o])=>Math.sqrt(o.evaluate(c))],log10:[hn,[hn],(c,[o])=>Math.log(o.evaluate(c))/Math.LN10],ln:[hn,[hn],(c,[o])=>Math.log(o.evaluate(c))],log2:[hn,[hn],(c,[o])=>Math.log(o.evaluate(c))/Math.LN2],sin:[hn,[hn],(c,[o])=>Math.sin(o.evaluate(c))],cos:[hn,[hn],(c,[o])=>Math.cos(o.evaluate(c))],tan:[hn,[hn],(c,[o])=>Math.tan(o.evaluate(c))],asin:[hn,[hn],(c,[o])=>Math.asin(o.evaluate(c))],acos:[hn,[hn],(c,[o])=>Math.acos(o.evaluate(c))],atan:[hn,[hn],(c,[o])=>Math.atan(o.evaluate(c))],min:[hn,wa(hn),(c,o)=>Math.min(...o.map((d=>d.evaluate(c))))],max:[hn,wa(hn),(c,o)=>Math.max(...o.map((d=>d.evaluate(c))))],abs:[hn,[hn],(c,[o])=>Math.abs(o.evaluate(c))],round:[hn,[hn],(c,[o])=>{const d=o.evaluate(c);return d<0?-Math.round(-d):Math.round(d)}],floor:[hn,[hn],(c,[o])=>Math.floor(o.evaluate(c))],ceil:[hn,[hn],(c,[o])=>Math.ceil(o.evaluate(c))],"filter-==":[Yn,[Nn,ii],(c,[o,d])=>c.properties()[o.value]===d.value],"filter-id-==":[Yn,[ii],(c,[o])=>c.id()===o.value],"filter-type-==":[Yn,[Nn],(c,[o])=>c.geometryType()===o.value],"filter-<":[Yn,[Nn,ii],(c,[o,d])=>{const f=c.properties()[o.value],g=d.value;return typeof f==typeof g&&f<g}],"filter-id-<":[Yn,[ii],(c,[o])=>{const d=c.id(),f=o.value;return typeof d==typeof f&&d<f}],"filter->":[Yn,[Nn,ii],(c,[o,d])=>{const f=c.properties()[o.value],g=d.value;return typeof f==typeof g&&f>g}],"filter-id->":[Yn,[ii],(c,[o])=>{const d=c.id(),f=o.value;return typeof d==typeof f&&d>f}],"filter-<=":[Yn,[Nn,ii],(c,[o,d])=>{const f=c.properties()[o.value],g=d.value;return typeof f==typeof g&&f<=g}],"filter-id-<=":[Yn,[ii],(c,[o])=>{const d=c.id(),f=o.value;return typeof d==typeof f&&d<=f}],"filter->=":[Yn,[Nn,ii],(c,[o,d])=>{const f=c.properties()[o.value],g=d.value;return typeof f==typeof g&&f>=g}],"filter-id->=":[Yn,[ii],(c,[o])=>{const d=c.id(),f=o.value;return typeof d==typeof f&&d>=f}],"filter-has":[Yn,[ii],(c,[o])=>o.value in c.properties()],"filter-has-id":[Yn,[],c=>c.id()!==null&&c.id()!==void 0],"filter-type-in":[Yn,[Ir(Nn)],(c,[o])=>o.value.indexOf(c.geometryType())>=0],"filter-id-in":[Yn,[Ir(ii)],(c,[o])=>o.value.indexOf(c.id())>=0],"filter-in-small":[Yn,[Nn,Ir(ii)],(c,[o,d])=>d.value.indexOf(c.properties()[o.value])>=0],"filter-in-large":[Yn,[Nn,Ir(ii)],(c,[o,d])=>(function(f,g,b,w){for(;b<=w;){const E=b+w>>1;if(g[E]===f)return!0;g[E]>f?w=E-1:b=E+1}return!1})(c.properties()[o.value],d.value,0,d.value.length-1)],all:{type:Yn,overloads:[[[Yn,Yn],(c,[o,d])=>o.evaluate(c)&&d.evaluate(c)],[wa(Yn),(c,o)=>{for(const d of o)if(!d.evaluate(c))return!1;return!0}]]},any:{type:Yn,overloads:[[[Yn,Yn],(c,[o,d])=>o.evaluate(c)||d.evaluate(c)],[wa(Yn),(c,o)=>{for(const d of o)if(d.evaluate(c))return!0;return!1}]]},"!":[Yn,[Yn],(c,[o])=>!o.evaluate(c)],"is-supported-script":[Yn,[Nn],(c,[o])=>{const d=c.globals&&c.globals.isSupportedScript;return!d||d(o.evaluate(c))}],upcase:[Nn,[Nn],(c,[o])=>o.evaluate(c).toUpperCase()],downcase:[Nn,[Nn],(c,[o])=>o.evaluate(c).toLowerCase()],concat:[Nn,wa(ii),(c,o)=>o.map((d=>fl(d.evaluate(c)))).join("")],"resolved-locale":[Nn,[Dr],(c,[o])=>o.evaluate(c).resolvedLocale()]});var Td=Em;function km(c){return{result:"success",value:c}}function yc(c){return{result:"error",value:c}}function Cu(c){return c["property-type"]==="data-driven"}function Wh(c){return!!c.expression&&c.expression.parameters.indexOf("zoom")>-1}function Hh(c){return!!c.expression&&c.expression.interpolated}function Ii(c){return c instanceof Number?"number":c instanceof String?"string":c instanceof Boolean?"boolean":Array.isArray(c)?"array":c===null?"null":typeof c}function Sd(c){return typeof c=="object"&&c!==null&&!Array.isArray(c)}function bl(c){return c}function Ed(c,o){const d=o.type==="color",f=c.stops&&typeof c.stops[0][0]=="object",g=f||!(f||c.property!==void 0),b=c.type||(Hh(o)?"exponential":"interval");if(d&&((c=ma({},c)).stops&&(c.stops=c.stops.map((D=>[D[0],Wi.parse(D[1])]))),c.default=Wi.parse(c.default?c.default:o.default)),c.colorSpace&&c.colorSpace!=="rgb"&&!vm[c.colorSpace])throw new Error(`Unknown color space: ${c.colorSpace}`);let w,E,I;if(b==="exponential")w=Wl;else if(b==="interval")w=Gh;else if(b==="categorical"){w=bg,E=Object.create(null);for(const D of c.stops)E[D[0]]=D[1];I=typeof c.stops[0][0]}else{if(b!=="identity")throw new Error(`Unknown function type "${b}"`);w=xg}if(f){const D={},N=[];for(let ne=0;ne<c.stops.length;ne++){const oe=c.stops[ne],he=oe[0].zoom;D[he]===void 0&&(D[he]={zoom:he,type:c.type,property:c.property,default:c.default,stops:[]},N.push(he)),D[he].stops.push([oe[0].value,oe[1]])}const j=[];for(const ne of N)j.push([D[ne].zoom,Ed(D[ne],o)]);const Z={name:"linear"};return{kind:"composite",interpolationType:Z,interpolationFactor:_l.interpolationFactor.bind(void 0,Z),zoomStops:j.map((ne=>ne[0])),evaluate:({zoom:ne},oe)=>Wl({stops:j,base:c.base},o,ne).evaluate(ne,oe)}}if(g){const D=b==="exponential"?{name:"exponential",base:c.base!==void 0?c.base:1}:null;return{kind:"camera",interpolationType:D,interpolationFactor:_l.interpolationFactor.bind(void 0,D),zoomStops:c.stops.map((N=>N[0])),evaluate:({zoom:N})=>w(c,o,N,E,I)}}return{kind:"source",evaluate(D,N){const j=N&&N.properties?N.properties[c.property]:void 0;return j===void 0?ku(c.default,o.default):w(c,o,j,E,I)}}}function ku(c,o,d){return c!==void 0?c:o!==void 0?o:d!==void 0?d:void 0}function bg(c,o,d,f,g){return ku(typeof d===g?f[d]:void 0,c.default,o.default)}function Gh(c,o,d){if(Ii(d)!=="number")return ku(c.default,o.default);const f=c.stops.length;if(f===1||d<=c.stops[0][0])return c.stops[0][1];if(d>=c.stops[f-1][0])return c.stops[f-1][1];const g=Lr(c.stops.map((b=>b[0])),d);return c.stops[g][1]}function Wl(c,o,d){const f=c.base!==void 0?c.base:1;if(Ii(d)!=="number")return ku(c.default,o.default);const g=c.stops.length;if(g===1||d<=c.stops[0][0])return c.stops[0][1];if(d>=c.stops[g-1][0])return c.stops[g-1][1];const b=Lr(c.stops.map((N=>N[0])),d),w=(function(N,j,Z,ne){const oe=ne-Z,he=N-Z;return oe===0?0:j===1?he/oe:(Math.pow(j,he)-1)/(Math.pow(j,oe)-1)})(d,f,c.stops[b][0],c.stops[b+1][0]),E=c.stops[b][1],I=c.stops[b+1][1];let D=Ys[o.type]||bl;if(c.colorSpace&&c.colorSpace!=="rgb"){const N=vm[c.colorSpace];D=(j,Z)=>N.reverse(N.interpolate(N.forward(j),N.forward(Z),w))}return typeof E.evaluate=="function"?{evaluate(...N){const j=E.evaluate.apply(void 0,N),Z=I.evaluate.apply(void 0,N);if(j!==void 0&&Z!==void 0)return D(j,Z,w)}}:D(E,I,w)}function xg(c,o,d){return o.type==="color"?d=Wi.parse(d):o.type==="formatted"?d=Yr.fromString(d.toString()):o.type==="resolvedImage"?d=os.fromString(d.toString()):Ii(d)===o.type||o.type==="enum"&&o.values[d]||(d=void 0),ku(d,c.default,o.default)}class qh{constructor(o,d){this.expression=o,this._warningHistory={},this._evaluator=new Ul,this._defaultValue=d?(function(f){return f.type==="color"&&(Sd(f.default)||Array.isArray(f.default))?new Wi(0,0,0,0):f.type==="color"?Wi.parse(f.default)||null:f.default===void 0?null:f.default})(d):null,this._enumValues=d&&d.type==="enum"?d.values:null}evaluateWithoutErrorHandling(o,d,f,g,b,w,E,I){return this._evaluator.globals=o,this._evaluator.feature=d,this._evaluator.featureState=f,this._evaluator.canonical=g||null,this._evaluator.availableImages=b||null,this._evaluator.formattedSection=w,this._evaluator.featureTileCoord=E||null,this._evaluator.featureDistanceData=I||null,this.expression.evaluate(this._evaluator)}evaluate(o,d,f,g,b,w,E,I){this._evaluator.globals=o,this._evaluator.feature=d||null,this._evaluator.featureState=f||null,this._evaluator.canonical=g||null,this._evaluator.availableImages=b||null,this._evaluator.formattedSection=w||null,this._evaluator.featureTileCoord=E||null,this._evaluator.featureDistanceData=I||null;try{const D=this.expression.evaluate(this._evaluator);if(D==null||typeof D=="number"&&D!=D)return this._defaultValue;if(this._enumValues&&!(D in this._enumValues))throw new Vr(`Expected value to be one of ${Object.keys(this._enumValues).map((N=>JSON.stringify(N))).join(", ")}, but found ${JSON.stringify(D)} instead.`);return D}catch(D){return this._warningHistory[D.message]||(this._warningHistory[D.message]=!0,typeof console<"u"&&console.warn(D.message)),this._defaultValue}}}function Iu(c){return Array.isArray(c)&&c.length>0&&typeof c[0]=="string"&&c[0]in Td}function Au(c,o){const d=new bn(Td,[],o?(function(g){const b={color:pr,string:Nn,number:hn,enum:Nn,boolean:Yn,formatted:qo,resolvedImage:Xs};return g.type==="array"?Ir(b[g.value]||ii,g.length):b[g.type]})(o):void 0),f=d.parse(c,void 0,void 0,void 0,o&&o.type==="string"?{typeAnnotation:"coerce"}:void 0);return f?km(new qh(f,o)):yc(d.errors)}class Cd{constructor(o,d){this.kind=o,this._styleExpression=d,this.isStateDependent=o!=="constant"&&!ee(d.expression)}evaluateWithoutErrorHandling(o,d,f,g,b,w){return this._styleExpression.evaluateWithoutErrorHandling(o,d,f,g,b,w)}evaluate(o,d,f,g,b,w){return this._styleExpression.evaluate(o,d,f,g,b,w)}}class bc{constructor(o,d,f,g){this.kind=o,this.zoomStops=f,this._styleExpression=d,this.isStateDependent=o!=="camera"&&!ee(d.expression),this.interpolationType=g}evaluateWithoutErrorHandling(o,d,f,g,b,w){return this._styleExpression.evaluateWithoutErrorHandling(o,d,f,g,b,w)}evaluate(o,d,f,g,b,w){return this._styleExpression.evaluate(o,d,f,g,b,w)}interpolationFactor(o,d,f){return this.interpolationType?_l.interpolationFactor(this.interpolationType,o,d,f):0}}function kd(c,o){if((c=Au(c,o)).result==="error")return c;const d=c.value.expression,f=P(d);if(!f&&!Cu(o))return yc([new Ns("","data expressions not supported")]);const g=de(d,["zoom","pitch","distance-from-center"]);if(!g&&!Wh(o))return yc([new Ns("","zoom expressions not supported")]);const b=Ad(d);return b||g?b instanceof Ns?yc([b]):b instanceof _l&&!Hh(o)?yc([new Ns("",'"interpolate" expressions cannot be used with this property')]):km(b?new bc(f?"camera":"composite",c.value,b.labels,b instanceof _l?b.interpolation:void 0):new Cd(f?"constant":"source",c.value)):yc([new Ns("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Id{constructor(o,d){this._parameters=o,this._specification=d,ma(this,Ed(this._parameters,this._specification))}static deserialize(o){return new Id(o._parameters,o._specification)}static serialize(o){return{_parameters:o._parameters,_specification:o._specification}}}function Ad(c){let o=null;if(c instanceof bd)o=Ad(c.result);else if(c instanceof Bh){for(const d of c.args)if(o=Ad(d),o)break}else(c instanceof sr||c instanceof _l)&&c.input instanceof ya&&c.input.name==="zoom"&&(o=c);return o instanceof Ns||c.eachChild((d=>{const f=Ad(d);f instanceof Ns?o=f:!o&&f?o=new Ns("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):o&&f&&o!==f&&(o=new Ns("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),o}class vn{constructor(o,d,f,g){this.message=(o?`${o}: `:"")+f,g&&(this.identifier=g),d!=null&&d.__line__&&(this.line=d.__line__)}}function Qo(c){const o=c.key,d=c.value,f=c.valueSpec||{},g=c.objectElementValidators||{},b=c.style,w=c.styleSpec;let E=[];const I=Ii(d);if(I!=="object")return[new vn(o,d,`object expected, ${I} found`)];for(const D in d){const N=D.split(".")[0];let j;g[N]?j=g[N]:f[N]?j=As:g["*"]?j=g["*"]:f["*"]&&(j=As),j?E=E.concat(j({key:(o&&`${o}.`)+D,value:d[D],valueSpec:f[N]||f["*"],style:b,styleSpec:w,object:d,objectKey:D},d)):E.push(new vn(o,d[D],`unknown property "${D}"`))}for(const D in f)g[D]||f[D].required&&f[D].default===void 0&&d[D]===void 0&&E.push(new vn(o,d,`missing required property "${D}"`));return E}function Kh(c){const o=c.value,d=c.valueSpec,f=c.style,g=c.styleSpec,b=c.key,w=c.arrayElementValidator||As;if(Ii(o)!=="array")return[new vn(b,o,`array expected, ${Ii(o)} found`)];if(d.length&&o.length!==d.length)return[new vn(b,o,`array length ${d.length} expected, length ${o.length} found`)];if(d["min-length"]&&o.length<d["min-length"])return[new vn(b,o,`array length at least ${d["min-length"]} expected, length ${o.length} found`)];let E={type:d.value,values:d.values,minimum:d.minimum,maximum:d.maximum,function:void 0};g.$version<7&&(E.function=d.function),Ii(d.value)==="object"&&(E=d.value);let I=[];for(let D=0;D<o.length;D++)I=I.concat(w({array:o,arrayIndex:D,value:o[D],valueSpec:E,style:f,styleSpec:g,key:`${b}[${D}]`}));return I}function Pd(c){const o=c.key,d=c.value,f=c.valueSpec;let g=Ii(d);if(g==="number"&&d!=d&&(g="NaN"),g!=="number")return[new vn(o,d,`number expected, ${g} found`)];if("minimum"in f){let b=f.minimum;if(Ii(f.minimum)==="array"&&(b=f.minimum[c.arrayIndex]),d<b)return[new vn(o,d,`${d} is less than the minimum value ${b}`)]}if("maximum"in f){let b=f.maximum;if(Ii(f.maximum)==="array"&&(b=f.maximum[c.arrayIndex]),d>b)return[new vn(o,d,`${d} is greater than the maximum value ${b}`)]}return[]}function Md(c){const o=c.valueSpec,d=Ui(c.value.type);let f,g,b,w={};const E=d!=="categorical"&&c.value.property===void 0,I=!E,D=Ii(c.value.stops)==="array"&&Ii(c.value.stops[0])==="array"&&Ii(c.value.stops[0][0])==="object",N=Qo({key:c.key,value:c.value,valueSpec:c.styleSpec.function,style:c.style,styleSpec:c.styleSpec,objectElementValidators:{stops:function(ne){if(d==="identity")return[new vn(ne.key,ne.value,'identity function may not have a "stops" property')];let oe=[];const he=ne.value;return oe=oe.concat(Kh({key:ne.key,value:he,valueSpec:ne.valueSpec,style:ne.style,styleSpec:ne.styleSpec,arrayElementValidator:j})),Ii(he)==="array"&&he.length===0&&oe.push(new vn(ne.key,he,"array must have at least one stop")),oe},default:function(ne){return As({key:ne.key,value:ne.value,valueSpec:o,style:ne.style,styleSpec:ne.styleSpec})}}});return d==="identity"&&E&&N.push(new vn(c.key,c.value,'missing required property "property"')),d==="identity"||c.value.stops||N.push(new vn(c.key,c.value,'missing required property "stops"')),d==="exponential"&&c.valueSpec.expression&&!Hh(c.valueSpec)&&N.push(new vn(c.key,c.value,"exponential functions not supported")),c.styleSpec.$version>=8&&(I&&!Cu(c.valueSpec)?N.push(new vn(c.key,c.value,"property functions not supported")):E&&!Wh(c.valueSpec)&&N.push(new vn(c.key,c.value,"zoom functions not supported"))),d!=="categorical"&&!D||c.value.property!==void 0||N.push(new vn(c.key,c.value,'"property" property is required')),N;function j(ne){let oe=[];const he=ne.value,Te=ne.key;if(Ii(he)!=="array")return[new vn(Te,he,`array expected, ${Ii(he)} found`)];if(he.length!==2)return[new vn(Te,he,`array length 2 expected, length ${he.length} found`)];if(D){if(Ii(he[0])!=="object")return[new vn(Te,he,`object expected, ${Ii(he[0])} found`)];if(he[0].zoom===void 0)return[new vn(Te,he,"object stop key must have zoom")];if(he[0].value===void 0)return[new vn(Te,he,"object stop key must have value")];const Oe=Ui(he[0].zoom);if(typeof Oe!="number")return[new vn(Te,he[0].zoom,"stop zoom values must be numbers")];if(b&&b>Oe)return[new vn(Te,he[0].zoom,"stop zoom values must appear in ascending order")];Oe!==b&&(b=Oe,g=void 0,w={}),oe=oe.concat(Qo({key:`${Te}[0]`,value:he[0],valueSpec:{zoom:{}},style:ne.style,styleSpec:ne.styleSpec,objectElementValidators:{zoom:Pd,value:Z}}))}else oe=oe.concat(Z({key:`${Te}[0]`,value:he[0],style:ne.style,styleSpec:ne.styleSpec},he));return Iu(Yi(he[1]))?oe.concat([new vn(`${Te}[1]`,he[1],"expressions are not allowed in function stops.")]):oe.concat(As({key:`${Te}[1]`,value:he[1],valueSpec:o,style:ne.style,styleSpec:ne.styleSpec}))}function Z(ne,oe){const he=Ii(ne.value),Te=Ui(ne.value),Oe=ne.value!==null?ne.value:oe;if(f){if(he!==f)return[new vn(ne.key,Oe,`${he} stop domain type must match previous stop domain type ${f}`)]}else f=he;if(he!=="number"&&he!=="string"&&he!=="boolean"&&typeof Te!="number"&&typeof Te!="string"&&typeof Te!="boolean")return[new vn(ne.key,Oe,"stop domain value must be a number, string, or boolean")];if(he!=="number"&&d!=="categorical"){let He=`number expected, ${he} found`;return Cu(o)&&d===void 0&&(He+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new vn(ne.key,Oe,He)]}return d!=="categorical"||he!=="number"||typeof Te=="number"&&isFinite(Te)&&Math.floor(Te)===Te?d!=="categorical"&&he==="number"&&typeof Te=="number"&&typeof g=="number"&&g!==void 0&&Te<g?[new vn(ne.key,Oe,"stop domain values must appear in ascending order")]:(g=Te,d==="categorical"&&Te in w?[new vn(ne.key,Oe,"stop domain values must be unique")]:(w[Te]=!0,[])):[new vn(ne.key,Oe,`integer expected, found ${String(Te)}`)]}}function Is(c){const o=(c.expressionContext==="property"?kd:Au)(Yi(c.value),c.valueSpec);if(o.result==="error")return o.value.map((f=>new vn(`${c.key}${f.key}`,c.value,f.message)));const d=o.value.expression||o.value._styleExpression.expression;if(c.expressionContext==="property"&&c.propertyKey==="text-font"&&!d.outputDefined())return[new vn(c.key,c.value,`Invalid data expression for "${c.propertyKey}". Output values must be contained as literals within the expression.`)];if(c.expressionContext==="property"&&c.propertyType==="layout"&&!ee(d))return[new vn(c.key,c.value,'"feature-state" data expressions are not supported with layout properties.')];if(c.expressionContext==="filter")return el(d,c);if(c.expressionContext&&c.expressionContext.indexOf("cluster")===0){if(!de(d,["zoom","feature-state"]))return[new vn(c.key,c.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(c.expressionContext==="cluster-initial"&&!P(d))return[new vn(c.key,c.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function el(c,o){const d=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(o.valueSpec&&o.valueSpec.expression)for(const g of o.valueSpec.expression.parameters)d.delete(g);if(d.size===0)return[];const f=[];return c instanceof ya&&d.has(c.name)?[new vn(o.key,o.value,`["${c.name}"] expression is not supported in a filter for a ${o.object.type} layer with id: ${o.object.id}`)]:(c.eachChild((g=>{f.push(...el(g,o))})),f)}function Xh(c){const o=c.key,d=c.value,f=c.valueSpec,g=[];return Array.isArray(f.values)?f.values.indexOf(Ui(d))===-1&&g.push(new vn(o,d,`expected one of [${f.values.join(", ")}], ${JSON.stringify(d)} found`)):Object.keys(f.values).indexOf(Ui(d))===-1&&g.push(new vn(o,d,`expected one of [${Object.keys(f.values).join(", ")}], ${JSON.stringify(d)} found`)),g}function Im(c){if(c===!0||c===!1)return!0;if(!Array.isArray(c)||c.length===0)return!1;switch(c[0]){case"has":return c.length>=2&&c[1]!=="$id"&&c[1]!=="$type";case"in":return c.length>=3&&(typeof c[1]!="string"||Array.isArray(c[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return c.length!==3||Array.isArray(c[1])||Array.isArray(c[2]);case"any":case"all":for(const o of c.slice(1))if(!Im(o)&&typeof o!="boolean")return!1;return!0;default:return!0}}function Yh(c,o="fill"){if(c==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};Im(c)||(c=tl(c));const d=c;let f=!0;try{f=(function(D){if(!xc(D))return D;let N=Yi(D);return Yc(N),N=wg(N),N})(d)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(d,null,2)}
        `)}const g=Ot[`filter_${o}`],b=Au(f,g);let w=null;if(b.result==="error")throw new Error(b.value.map((D=>`${D.key}: ${D.message}`)).join(", "));w=(D,N,j)=>b.value.evaluate(D,N,{},j);let E=null,I=null;if(f!==d){const D=Au(d,g);if(D.result==="error")throw new Error(D.value.map((N=>`${N.key}: ${N.message}`)).join(", "));E=(N,j,Z,ne,oe)=>D.value.evaluate(N,j,{},Z,void 0,void 0,ne,oe),I=!P(D.value.expression)}return{filter:w,dynamicFilter:E||void 0,needGeometry:Sg(f),needFeature:!!I}}function wg(c){if(!Array.isArray(c))return c;const o=(function(d){if(Am.has(d[0])){for(let f=1;f<d.length;f++)if(xc(d[f]))return!0}return d})(c);return o===!0?o:o.map((d=>wg(d)))}function Yc(c){let o=!1;const d=[];if(c[0]==="case"){for(let f=1;f<c.length-1;f+=2)o=o||xc(c[f]),d.push(c[f+1]);d.push(c[c.length-1])}else if(c[0]==="match"){o=o||xc(c[1]);for(let f=2;f<c.length-1;f+=2)d.push(c[f+1]);d.push(c[c.length-1])}else if(c[0]==="step"){o=o||xc(c[1]);for(let f=1;f<c.length-1;f+=2)d.push(c[f+1])}o&&(c.length=0,c.push("any",...d));for(let f=1;f<c.length;f++)Yc(c[f])}function xc(c){if(!Array.isArray(c))return!1;if((o=c[0])==="pitch"||o==="distance-from-center")return!0;var o;for(let d=1;d<c.length;d++)if(xc(c[d]))return!0;return!1}const Am=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function Tg(c,o){return c<o?-1:c>o?1:0}function Sg(c){if(!Array.isArray(c))return!1;if(c[0]==="within")return!0;for(let o=1;o<c.length;o++)if(Sg(c[o]))return!0;return!1}function tl(c){if(!c)return!0;const o=c[0];return c.length<=1?o!=="any":o==="=="?Dd(c[1],c[2],"=="):o==="!="?Jh(Dd(c[1],c[2],"==")):o==="<"||o===">"||o==="<="||o===">="?Dd(c[1],c[2],o):o==="any"?(d=c.slice(1),["any"].concat(d.map(tl))):o==="all"?["all"].concat(c.slice(1).map(tl)):o==="none"?["all"].concat(c.slice(1).map(tl).map(Jh)):o==="in"?Zh(c[1],c.slice(2)):o==="!in"?Jh(Zh(c[1],c.slice(2))):o==="has"?Pm(c[1]):o==="!has"?Jh(Pm(c[1])):o!=="within"||c;var d}function Dd(c,o,d){switch(c){case"$type":return[`filter-type-${d}`,o];case"$id":return[`filter-id-${d}`,o];default:return[`filter-${d}`,c,o]}}function Zh(c,o){if(o.length===0)return!1;switch(c){case"$type":return["filter-type-in",["literal",o]];case"$id":return["filter-id-in",["literal",o]];default:return o.length>200&&!o.some((d=>typeof d!=typeof o[0]))?["filter-in-large",c,["literal",o.sort(Tg)]]:["filter-in-small",c,["literal",o]]}}function Pm(c){switch(c){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",c]}}function Jh(c){return["!",c]}function Ld(c){return Im(Yi(c.value))?Is(ma({},c,{expressionContext:"filter",valueSpec:c.styleSpec[`filter_${c.layerType||"fill"}`]})):Hl(c)}function Hl(c){const o=c.value,d=c.key;if(Ii(o)!=="array")return[new vn(d,o,`array expected, ${Ii(o)} found`)];const f=c.styleSpec;let g,b=[];if(o.length<1)return[new vn(d,o,"filter array must have at least 1 element")];switch(b=b.concat(Xh({key:`${d}[0]`,value:o[0],valueSpec:f.filter_operator,style:c.style,styleSpec:c.styleSpec})),Ui(o[0])){case"<":case"<=":case">":case">=":o.length>=2&&Ui(o[1])==="$type"&&b.push(new vn(d,o,`"$type" cannot be use with operator "${o[0]}"`));case"==":case"!=":o.length!==3&&b.push(new vn(d,o,`filter array for operator "${o[0]}" must have 3 elements`));case"in":case"!in":o.length>=2&&(g=Ii(o[1]),g!=="string"&&b.push(new vn(`${d}[1]`,o[1],`string expected, ${g} found`)));for(let w=2;w<o.length;w++)g=Ii(o[w]),Ui(o[1])==="$type"?b=b.concat(Xh({key:`${d}[${w}]`,value:o[w],valueSpec:f.geometry_type,style:c.style,styleSpec:c.styleSpec})):g!=="string"&&g!=="number"&&g!=="boolean"&&b.push(new vn(`${d}[${w}]`,o[w],`string, number, or boolean expected, ${g} found`));break;case"any":case"all":case"none":for(let w=1;w<o.length;w++)b=b.concat(Hl({key:`${d}[${w}]`,value:o[w],style:c.style,styleSpec:c.styleSpec}));break;case"has":case"!has":g=Ii(o[1]),o.length!==2?b.push(new vn(d,o,`filter array for "${o[0]}" operator must have 2 elements`)):g!=="string"&&b.push(new vn(`${d}[1]`,o[1],`string expected, ${g} found`));break;case"within":g=Ii(o[1]),o.length!==2?b.push(new vn(d,o,`filter array for "${o[0]}" operator must have 2 elements`)):g!=="object"&&b.push(new vn(`${d}[1]`,o[1],`object expected, ${g} found`))}return b}function Gl(c,o){const d=c.key,f=c.style,g=c.styleSpec,b=c.value,w=c.objectKey,E=g[`${o}_${c.layerType}`];if(!E)return[];const I=w.match(/^(.*)-transition$/);if(o==="paint"&&I&&E[I[1]]&&E[I[1]].transition)return As({key:d,value:b,valueSpec:g.transition,style:f,styleSpec:g});const D=c.valueSpec||E[w];if(!D)return[new vn(d,b,`unknown property "${w}"`)];let N;if(Ii(b)==="string"&&Cu(D)&&!D.tokens&&(N=/^{([^}]+)}$/.exec(b))){const Z=`\`{ "type": "identity", "property": ${N?JSON.stringify(N[1]):'"_"'} }\``;return[new vn(d,b,`"${w}" does not support interpolation syntax
Use an identity property function instead: ${Z}.`)]}const j=[];return c.layerType==="symbol"&&(w==="text-field"&&f&&!f.glyphs&&j.push(new vn(d,b,'use of "text-field" requires a style "glyphs" property')),w==="text-font"&&Sd(Yi(b))&&Ui(b.type)==="identity"&&j.push(new vn(d,b,'"text-font" does not support identity functions'))),j.concat(As({key:c.key,value:b,valueSpec:D,style:f,styleSpec:g,expressionContext:"property",propertyType:o,propertyKey:w}))}function Eg(c){return Gl(c,"paint")}function Mm(c){return Gl(c,"layout")}function Cg(c){let o=[];const d=c.value,f=c.key,g=c.style,b=c.styleSpec;d.type||d.ref||o.push(new vn(f,d,'either "type" or "ref" is required'));let w=Ui(d.type);const E=Ui(d.ref);if(d.id){const I=Ui(d.id);for(let D=0;D<c.arrayIndex;D++){const N=g.layers[D];Ui(N.id)===I&&o.push(new vn(f,d.id,`duplicate layer id "${d.id}", previously used at line ${N.id.__line__}`))}}if("ref"in d){let I;["type","source","source-layer","filter","layout"].forEach((D=>{D in d&&o.push(new vn(f,d[D],`"${D}" is prohibited for ref layers`))})),g.layers.forEach((D=>{Ui(D.id)===E&&(I=D)})),I?I.ref?o.push(new vn(f,d.ref,"ref cannot reference another ref layer")):w=Ui(I.type):typeof E=="string"&&o.push(new vn(f,d.ref,`ref layer "${E}" not found`))}else if(w!=="background"&&w!=="sky")if(d.source){const I=g.sources&&g.sources[d.source],D=I&&Ui(I.type);I?D==="vector"&&w==="raster"?o.push(new vn(f,d.source,`layer "${d.id}" requires a raster source`)):D==="raster"&&w!=="raster"?o.push(new vn(f,d.source,`layer "${d.id}" requires a vector source`)):D!=="vector"||d["source-layer"]?D==="raster-dem"&&w!=="hillshade"?o.push(new vn(f,d.source,"raster-dem source can only be used with layer type 'hillshade'.")):w!=="line"||!d.paint||!d.paint["line-gradient"]&&!d.paint["line-trim-offset"]||D==="geojson"&&I.lineMetrics||o.push(new vn(f,d,`layer "${d.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):o.push(new vn(f,d,`layer "${d.id}" must specify a "source-layer"`)):o.push(new vn(f,d.source,`source "${d.source}" not found`))}else o.push(new vn(f,d,'missing required property "source"'));return o=o.concat(Qo({key:f,value:d,valueSpec:b.layer,style:c.style,styleSpec:c.styleSpec,objectElementValidators:{"*":()=>[],type:()=>As({key:`${f}.type`,value:d.type,valueSpec:b.layer.type,style:c.style,styleSpec:c.styleSpec,object:d,objectKey:"type"}),filter:I=>Ld(ma({layerType:w},I)),layout:I=>Qo({layer:d,key:I.key,value:I.value,valueSpec:{},style:I.style,styleSpec:I.styleSpec,objectElementValidators:{"*":D=>Mm(ma({layerType:w},D))}}),paint:I=>Qo({layer:d,key:I.key,value:I.value,valueSpec:{},style:I.style,styleSpec:I.styleSpec,objectElementValidators:{"*":D=>Eg(ma({layerType:w},D))}})}})),o}function wc(c){const o=c.value,d=c.key,f=Ii(o);return f!=="string"?[new vn(d,o,`string expected, ${f} found`)]:[]}const kg={promoteId:function({key:c,value:o}){if(Ii(o)==="string")return wc({key:c,value:o});{const d=[];for(const f in o)d.push(...wc({key:`${c}.${f}`,value:o[f]}));return d}}};function Ig(c){const o=c.value,d=c.key,f=c.styleSpec,g=c.style;if(!o.type)return[new vn(d,o,'"type" is required')];const b=Ui(o.type);let w;switch(b){case"vector":case"raster":case"raster-dem":return w=Qo({key:d,value:o,valueSpec:f[`source_${b.replace("-","_")}`],style:c.style,styleSpec:f,objectElementValidators:kg}),w;case"geojson":if(w=Qo({key:d,value:o,valueSpec:f.source_geojson,style:g,styleSpec:f,objectElementValidators:kg}),o.cluster)for(const E in o.clusterProperties){const[I,D]=o.clusterProperties[E],N=typeof I=="string"?[I,["accumulated"],["get",E]]:I;w.push(...Is({key:`${d}.${E}.map`,value:D,expressionContext:"cluster-map"})),w.push(...Is({key:`${d}.${E}.reduce`,value:N,expressionContext:"cluster-reduce"}))}return w;case"video":return Qo({key:d,value:o,valueSpec:f.source_video,style:g,styleSpec:f});case"image":return Qo({key:d,value:o,valueSpec:f.source_image,style:g,styleSpec:f});case"canvas":return[new vn(d,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Xh({key:`${d}.type`,value:o.type,valueSpec:{values:V_(f)}})}}function V_(c){return c.source.reduce(((o,d)=>{const f=c[d];return f.type.type==="enum"&&(o=o.concat(Object.keys(f.type.values))),o}),[])}function Ag(c){const o=c.value,d=c.styleSpec,f=d.light,g=c.style;let b=[];const w=Ii(o);if(o===void 0)return b;if(w!=="object")return b=b.concat([new vn("light",o,`object expected, ${w} found`)]),b;for(const E in o){const I=E.match(/^(.*)-transition$/);b=b.concat(I&&f[I[1]]&&f[I[1]].transition?As({key:E,value:o[E],valueSpec:d.transition,style:g,styleSpec:d}):f[E]?As({key:E,value:o[E],valueSpec:f[E],style:g,styleSpec:d}):[new vn(E,o[E],`unknown property "${E}"`)])}return b}function Qh(c){const o=c.value,d=c.key,f=c.style,g=c.styleSpec,b=g.terrain;let w=[];const E=Ii(o);if(o===void 0)return w;if(E!=="object")return w=w.concat([new vn("terrain",o,`object expected, ${E} found`)]),w;for(const I in o){const D=I.match(/^(.*)-transition$/);w=w.concat(D&&b[D[1]]&&b[D[1]].transition?As({key:I,value:o[I],valueSpec:g.transition,style:f,styleSpec:g}):b[I]?As({key:I,value:o[I],valueSpec:b[I],style:f,styleSpec:g}):[new vn(I,o[I],`unknown property "${I}"`)])}if(o.source){const I=f.sources&&f.sources[o.source],D=I&&Ui(I.type);I?D!=="raster-dem"&&w.push(new vn(d,o.source,`terrain cannot be used with a source of type ${String(D)}, it only be used with a "raster-dem" source type`)):w.push(new vn(d,o.source,`source "${o.source}" not found`))}else w.push(new vn(d,o,'terrain is missing required property "source"'));return w}function Pg(c){const o=c.value,d=c.style,f=c.styleSpec,g=f.fog;let b=[];const w=Ii(o);if(o===void 0)return b;if(w!=="object")return b=b.concat([new vn("fog",o,`object expected, ${w} found`)]),b;for(const E in o){const I=E.match(/^(.*)-transition$/);b=b.concat(I&&g[I[1]]&&g[I[1]].transition?As({key:E,value:o[E],valueSpec:f.transition,style:d,styleSpec:f}):g[E]?As({key:E,value:o[E],valueSpec:g[E],style:d,styleSpec:f}):[new vn(E,o[E],`unknown property "${E}"`)])}return b}const Dm={"*":()=>[],array:Kh,boolean:function(c){const o=c.value,d=c.key,f=Ii(o);return f!=="boolean"?[new vn(d,o,`boolean expected, ${f} found`)]:[]},number:Pd,color:function(c){const o=c.key,d=c.value,f=Ii(d);return f!=="string"?[new vn(o,d,`color expected, ${f} found`)]:ks(d)===null?[new vn(o,d,`color expected, "${d}" found`)]:[]},enum:Xh,filter:Ld,function:Md,layer:Cg,object:Qo,source:Ig,light:Ag,terrain:Qh,fog:Pg,string:wc,formatted:function(c){return wc(c).length===0?[]:Is(c)},resolvedImage:function(c){return wc(c).length===0?[]:Is(c)},projection:function(c){const o=c.value,d=c.styleSpec,f=d.projection,g=c.style;let b=[];const w=Ii(o);if(w==="object")for(const E in o)b=b.concat(As({key:E,value:o[E],valueSpec:f[E],style:g,styleSpec:d}));else w!=="string"&&(b=b.concat([new vn("projection",o,`object or string expected, ${w} found`)]));return b}};function As(c){const o=c.value,d=c.valueSpec,f=c.styleSpec;return d.expression&&Sd(Ui(o))?Md(c):d.expression&&Iu(Yi(o))?Is(c):d.type&&Dm[d.type]?Dm[d.type](c):Qo(ma({},c,{valueSpec:d.type?f[d.type]:d}))}function Mg(c){const o=c.value,d=c.key,f=wc(c);return f.length||(o.indexOf("{fontstack}")===-1&&f.push(new vn(d,o,'"glyphs" url must include a "{fontstack}" token')),o.indexOf("{range}")===-1&&f.push(new vn(d,o,'"glyphs" url must include a "{range}" token'))),f}function Tc(c,o=Ot){return ea(As({key:"",value:c,valueSpec:o.$root,styleSpec:o,style:c,objectElementValidators:{glyphs:Mg,"*":()=>[]}}))}const Dg=c=>ea(Eg(c)),Lm=c=>ea(Mm(c));function ea(c){return c.slice().sort(((o,d)=>o.line&&d.line?o.line-d.line:0))}function ef(c,o){let d=!1;if(o&&o.length)for(const f of o)c.fire(new ko(new Error(f.message))),d=!0;return d}var Lg=xl,ta=3;function xl(c,o,d){var f=this.cells=[];if(c instanceof ArrayBuffer){this.arrayBuffer=c;var g=new Int32Array(this.arrayBuffer);c=g[0],this.d=(o=g[1])+2*(d=g[2]);for(var b=0;b<this.d*this.d;b++){var w=g[ta+b],E=g[ta+b+1];f.push(w===E?null:g.subarray(w,E))}var I=g[ta+f.length+1];this.keys=g.subarray(g[ta+f.length],I),this.bboxes=g.subarray(I),this.insert=this._insertReadonly}else{this.d=o+2*d;for(var D=0;D<this.d*this.d;D++)f.push([]);this.keys=[],this.bboxes=[]}this.n=o,this.extent=c,this.padding=d,this.scale=o/c,this.uid=0;var N=d/o*c;this.min=-N,this.max=c+N}xl.prototype.insert=function(c,o,d,f,g){this._forEachCell(o,d,f,g,this._insertCell,this.uid++),this.keys.push(c),this.bboxes.push(o),this.bboxes.push(d),this.bboxes.push(f),this.bboxes.push(g)},xl.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},xl.prototype._insertCell=function(c,o,d,f,g,b){this.cells[g].push(b)},xl.prototype.query=function(c,o,d,f,g){var b=this.min,w=this.max;if(c<=b&&o<=b&&w<=d&&w<=f&&!g)return Array.prototype.slice.call(this.keys);var E=[];return this._forEachCell(c,o,d,f,this._queryCell,E,{},g),E},xl.prototype._queryCell=function(c,o,d,f,g,b,w,E){var I=this.cells[g];if(I!==null)for(var D=this.keys,N=this.bboxes,j=0;j<I.length;j++){var Z=I[j];if(w[Z]===void 0){var ne=4*Z;(E?E(N[ne+0],N[ne+1],N[ne+2],N[ne+3]):c<=N[ne+2]&&o<=N[ne+3]&&d>=N[ne+0]&&f>=N[ne+1])?(w[Z]=!0,b.push(D[Z])):w[Z]=!1}}},xl.prototype._forEachCell=function(c,o,d,f,g,b,w,E){for(var I=this._convertToCellCoord(c),D=this._convertToCellCoord(o),N=this._convertToCellCoord(d),j=this._convertToCellCoord(f),Z=I;Z<=N;Z++)for(var ne=D;ne<=j;ne++){var oe=this.d*ne+Z;if((!E||E(this._convertFromCellCoord(Z),this._convertFromCellCoord(ne),this._convertFromCellCoord(Z+1),this._convertFromCellCoord(ne+1)))&&g.call(this,c,o,d,f,oe,b,w,E))return}},xl.prototype._convertFromCellCoord=function(c){return(c-this.padding)/this.scale},xl.prototype._convertToCellCoord=function(c){return Math.max(0,Math.min(this.d-1,Math.floor(c*this.scale)+this.padding))},xl.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var c=this.cells,o=ta+this.cells.length+1+1,d=0,f=0;f<this.cells.length;f++)d+=this.cells[f].length;var g=new Int32Array(o+d+this.keys.length+this.bboxes.length);g[0]=this.extent,g[1]=this.n,g[2]=this.padding;for(var b=o,w=0;w<c.length;w++){var E=c[w];g[ta+w]=b,g.set(E,b),b+=E.length}return g[ta+c.length]=b,g.set(this.keys,b),g[ta+c.length+1]=b+=this.keys.length,g.set(this.bboxes,b),b+=this.bboxes.length,g.buffer};var na=Y(Lg);const nl={};function Sn(c,o,d={}){Object.defineProperty(c,"_classRegistryKey",{value:o,writeable:!1}),nl[o]={klass:c,omit:d.omit||[]}}Sn(Object,"Object"),na.serialize=function(c,o){const d=c.toArrayBuffer();return o&&o.push(d),{buffer:d}},na.deserialize=function(c){return new na(c.buffer)},Object.defineProperty(na,"name",{value:"Grid"}),Sn(na,"Grid"),Sn(Wi,"Color"),Sn(Error,"Error"),Sn(rr,"AJAXError"),Sn(os,"ResolvedImage"),Sn(Id,"StylePropertyFunction"),Sn(qh,"StyleExpression",{omit:["_evaluator"]}),Sn(bc,"ZoomDependentExpression"),Sn(Cd,"ZoomConstantExpression"),Sn(ya,"CompoundExpression",{omit:["_evaluate"]});for(const c in Td)nl[Td[c]._classRegistryKey]||Sn(Td[c],`Expression${c}`);function Rm(c){return c&&typeof ArrayBuffer<"u"&&(c instanceof ArrayBuffer||c.constructor&&c.constructor.name==="ArrayBuffer")}function Om(c){return p.ImageBitmap&&c instanceof p.ImageBitmap}function Pu(c,o){if(c==null||typeof c=="boolean"||typeof c=="number"||typeof c=="string"||c instanceof Boolean||c instanceof Number||c instanceof String||c instanceof Date||c instanceof RegExp)return c;if(Rm(c)||Om(c))return o&&o.push(c),c;if(ArrayBuffer.isView(c)){const d=c;return o&&o.push(d.buffer),d}if(c instanceof p.ImageData)return o&&o.push(c.data.buffer),c;if(Array.isArray(c)){const d=[];for(const f of c)d.push(Pu(f,o));return d}if(typeof c=="object"){const d=c.constructor,f=d._classRegistryKey;if(!f)throw new Error(`can't serialize object of unregistered class ${f}`);const g=d.serialize?d.serialize(c,o):{};if(!d.serialize){for(const b in c)c.hasOwnProperty(b)&&(nl[f].omit.indexOf(b)>=0||(g[b]=Pu(c[b],o)));c instanceof Error&&(g.message=c.message)}if(g.$name)throw new Error("$name property is reserved for worker serialization logic.");return f!=="Object"&&(g.$name=f),g}throw new Error("can't serialize object of type "+typeof c)}function Zc(c){if(c==null||typeof c=="boolean"||typeof c=="number"||typeof c=="string"||c instanceof Boolean||c instanceof Number||c instanceof String||c instanceof Date||c instanceof RegExp||Rm(c)||Om(c)||ArrayBuffer.isView(c)||c instanceof p.ImageData)return c;if(Array.isArray(c))return c.map(Zc);if(typeof c=="object"){const o=c.$name||"Object",{klass:d}=nl[o];if(!d)throw new Error(`can't deserialize unregistered class ${o}`);if(d.deserialize)return d.deserialize(c);const f=Object.create(d.prototype);for(const g of Object.keys(c))g!=="$name"&&(f[g]=Zc(c[g]));return f}throw new Error("can't deserialize object of type "+typeof c)}const yn={"Latin-1 Supplement":c=>c>=128&&c<=255,Arabic:c=>c>=1536&&c<=1791,"Arabic Supplement":c=>c>=1872&&c<=1919,"Arabic Extended-A":c=>c>=2208&&c<=2303,"Hangul Jamo":c=>c>=4352&&c<=4607,"Unified Canadian Aboriginal Syllabics":c=>c>=5120&&c<=5759,Khmer:c=>c>=6016&&c<=6143,"Unified Canadian Aboriginal Syllabics Extended":c=>c>=6320&&c<=6399,"General Punctuation":c=>c>=8192&&c<=8303,"Letterlike Symbols":c=>c>=8448&&c<=8527,"Number Forms":c=>c>=8528&&c<=8591,"Miscellaneous Technical":c=>c>=8960&&c<=9215,"Control Pictures":c=>c>=9216&&c<=9279,"Optical Character Recognition":c=>c>=9280&&c<=9311,"Enclosed Alphanumerics":c=>c>=9312&&c<=9471,"Geometric Shapes":c=>c>=9632&&c<=9727,"Miscellaneous Symbols":c=>c>=9728&&c<=9983,"Miscellaneous Symbols and Arrows":c=>c>=11008&&c<=11263,"CJK Radicals Supplement":c=>c>=11904&&c<=12031,"Kangxi Radicals":c=>c>=12032&&c<=12255,"Ideographic Description Characters":c=>c>=12272&&c<=12287,"CJK Symbols and Punctuation":c=>c>=12288&&c<=12351,Hiragana:c=>c>=12352&&c<=12447,Katakana:c=>c>=12448&&c<=12543,Bopomofo:c=>c>=12544&&c<=12591,"Hangul Compatibility Jamo":c=>c>=12592&&c<=12687,Kanbun:c=>c>=12688&&c<=12703,"Bopomofo Extended":c=>c>=12704&&c<=12735,"CJK Strokes":c=>c>=12736&&c<=12783,"Katakana Phonetic Extensions":c=>c>=12784&&c<=12799,"Enclosed CJK Letters and Months":c=>c>=12800&&c<=13055,"CJK Compatibility":c=>c>=13056&&c<=13311,"CJK Unified Ideographs Extension A":c=>c>=13312&&c<=19903,"Yijing Hexagram Symbols":c=>c>=19904&&c<=19967,"CJK Unified Ideographs":c=>c>=19968&&c<=40959,"Yi Syllables":c=>c>=40960&&c<=42127,"Yi Radicals":c=>c>=42128&&c<=42191,"Hangul Jamo Extended-A":c=>c>=43360&&c<=43391,"Hangul Syllables":c=>c>=44032&&c<=55215,"Hangul Jamo Extended-B":c=>c>=55216&&c<=55295,"Private Use Area":c=>c>=57344&&c<=63743,"CJK Compatibility Ideographs":c=>c>=63744&&c<=64255,"Arabic Presentation Forms-A":c=>c>=64336&&c<=65023,"Vertical Forms":c=>c>=65040&&c<=65055,"CJK Compatibility Forms":c=>c>=65072&&c<=65103,"Small Form Variants":c=>c>=65104&&c<=65135,"Arabic Presentation Forms-B":c=>c>=65136&&c<=65279,"Halfwidth and Fullwidth Forms":c=>c>=65280&&c<=65519};function Vm(c){for(const o of c)if(Mu(o.charCodeAt(0)))return!0;return!1}function B_(c){for(const o of c)if(!Bm(o.charCodeAt(0)))return!1;return!0}function Bm(c){return!(yn.Arabic(c)||yn["Arabic Supplement"](c)||yn["Arabic Extended-A"](c)||yn["Arabic Presentation Forms-A"](c)||yn["Arabic Presentation Forms-B"](c))}function Mu(c){return!(c!==746&&c!==747&&(c<4352||!(yn["Bopomofo Extended"](c)||yn.Bopomofo(c)||yn["CJK Compatibility Forms"](c)&&!(c>=65097&&c<=65103)||yn["CJK Compatibility Ideographs"](c)||yn["CJK Compatibility"](c)||yn["CJK Radicals Supplement"](c)||yn["CJK Strokes"](c)||!(!yn["CJK Symbols and Punctuation"](c)||c>=12296&&c<=12305||c>=12308&&c<=12319||c===12336)||yn["CJK Unified Ideographs Extension A"](c)||yn["CJK Unified Ideographs"](c)||yn["Enclosed CJK Letters and Months"](c)||yn["Hangul Compatibility Jamo"](c)||yn["Hangul Jamo Extended-A"](c)||yn["Hangul Jamo Extended-B"](c)||yn["Hangul Jamo"](c)||yn["Hangul Syllables"](c)||yn.Hiragana(c)||yn["Ideographic Description Characters"](c)||yn.Kanbun(c)||yn["Kangxi Radicals"](c)||yn["Katakana Phonetic Extensions"](c)||yn.Katakana(c)&&c!==12540||!(!yn["Halfwidth and Fullwidth Forms"](c)||c===65288||c===65289||c===65293||c>=65306&&c<=65310||c===65339||c===65341||c===65343||c>=65371&&c<=65503||c===65507||c>=65512&&c<=65519)||!(!yn["Small Form Variants"](c)||c>=65112&&c<=65118||c>=65123&&c<=65126)||yn["Unified Canadian Aboriginal Syllabics"](c)||yn["Unified Canadian Aboriginal Syllabics Extended"](c)||yn["Vertical Forms"](c)||yn["Yijing Hexagram Symbols"](c)||yn["Yi Syllables"](c)||yn["Yi Radicals"](c))))}function Rd(c){return!(Mu(c)||(function(o){return!!(yn["Latin-1 Supplement"](o)&&(o===167||o===169||o===174||o===177||o===188||o===189||o===190||o===215||o===247)||yn["General Punctuation"](o)&&(o===8214||o===8224||o===8225||o===8240||o===8241||o===8251||o===8252||o===8258||o===8263||o===8264||o===8265||o===8273)||yn["Letterlike Symbols"](o)||yn["Number Forms"](o)||yn["Miscellaneous Technical"](o)&&(o>=8960&&o<=8967||o>=8972&&o<=8991||o>=8996&&o<=9e3||o===9003||o>=9085&&o<=9114||o>=9150&&o<=9165||o===9167||o>=9169&&o<=9179||o>=9186&&o<=9215)||yn["Control Pictures"](o)&&o!==9251||yn["Optical Character Recognition"](o)||yn["Enclosed Alphanumerics"](o)||yn["Geometric Shapes"](o)||yn["Miscellaneous Symbols"](o)&&!(o>=9754&&o<=9759)||yn["Miscellaneous Symbols and Arrows"](o)&&(o>=11026&&o<=11055||o>=11088&&o<=11097||o>=11192&&o<=11243)||yn["CJK Symbols and Punctuation"](o)||yn.Katakana(o)||yn["Private Use Area"](o)||yn["CJK Compatibility Forms"](o)||yn["Small Form Variants"](o)||yn["Halfwidth and Fullwidth Forms"](o)||o===8734||o===8756||o===8757||o>=9984&&o<=10087||o>=10102&&o<=10131||o===65532||o===65533)})(c))}function Rg(c){return c>=1424&&c<=2303||yn["Arabic Presentation Forms-A"](c)||yn["Arabic Presentation Forms-B"](c)}function F_(c,o){return!(!o&&Rg(c)||c>=2304&&c<=3583||c>=3840&&c<=4255||yn.Khmer(c))}function Od(c){for(const o of c)if(Rg(o.charCodeAt(0)))return!0;return!1}const ve="deferred",B="loading",se="loaded";let Ae=null,v="unavailable",u=null;const m=function(c){c&&typeof c=="string"&&c.indexOf("NetworkError")>-1&&(v="error"),Ae&&Ae(c)};function y(){S.fire(new Go("pluginStateChange",{pluginStatus:v,pluginURL:u}))}const S=new zl,C=function(){return v},L=function(){if(v!==ve||!u)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");v=B,y(),u&&So({url:u},(c=>{c?m(c):(v=se,y())}))},O={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>v===se||O.applyArabicShaping!=null,isLoading:()=>v===B,setState(c){v=c.pluginStatus,u=c.pluginURL},isParsed:()=>O.applyArabicShaping!=null&&O.processBidirectionalText!=null&&O.processStyledBidirectionalText!=null,getPluginURL:()=>u};class ${constructor(o,d){this.zoom=o,d?(this.now=d.now,this.fadeDuration=d.fadeDuration,this.transition=d.transition,this.pitch=d.pitch):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0)}isSupportedScript(o){return(function(d,f){for(const g of d)if(!F_(g.charCodeAt(0),f))return!1;return!0})(o,O.isLoaded())}}class q{constructor(o,d){this.property=o,this.value=d,this.expression=(function(f,g){if(Sd(f))return new Id(f,g);if(Iu(f)){const b=kd(f,g);if(b.result==="error")throw new Error(b.value.map((w=>`${w.key}: ${w.message}`)).join(", "));return b.value}{let b=f;return typeof f=="string"&&g.type==="color"&&(b=Wi.parse(f)),{kind:"constant",evaluate:()=>b}}})(d===void 0?o.specification.default:d,o.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(o,d,f){return this.property.possiblyEvaluate(this,o,d,f)}}class K{constructor(o){this.property=o,this.value=new q(o,void 0)}transitioned(o,d){return new pe(this.property,this.value,d,mt({},o.transition,this.transition),o.now)}untransitioned(){return new pe(this.property,this.value,null,{},0)}}class ae{constructor(o){this._properties=o,this._values=Object.create(o.defaultTransitionablePropertyValues)}getValue(o){return fe(this._values[o].value.value)}setValue(o,d){this._values.hasOwnProperty(o)||(this._values[o]=new K(this._values[o].property)),this._values[o].value=new q(this._values[o].property,d===null?void 0:fe(d))}getTransition(o){return fe(this._values[o].transition)}setTransition(o,d){this._values.hasOwnProperty(o)||(this._values[o]=new K(this._values[o].property)),this._values[o].transition=fe(d)||void 0}serialize(){const o={};for(const d of Object.keys(this._values)){const f=this.getValue(d);f!==void 0&&(o[d]=f);const g=this.getTransition(d);g!==void 0&&(o[`${d}-transition`]=g)}return o}transitioned(o,d){const f=new be(this._properties);for(const g of Object.keys(this._values))f._values[g]=this._values[g].transitioned(o,d._values[g]);return f}untransitioned(){const o=new be(this._properties);for(const d of Object.keys(this._values))o._values[d]=this._values[d].untransitioned();return o}}class pe{constructor(o,d,f,g,b){const w=g.delay||0,E=g.duration||0;b=b||0,this.property=o,this.value=d,this.begin=b+w,this.end=this.begin+E,o.specification.transition&&(g.delay||g.duration)&&(this.prior=f)}possiblyEvaluate(o,d,f){const g=o.now||0,b=this.value.possiblyEvaluate(o,d,f),w=this.prior;if(w){if(g>this.end)return this.prior=null,b;if(this.value.isDataDriven())return this.prior=null,b;if(g<this.begin)return w.possiblyEvaluate(o,d,f);{const E=(g-this.begin)/(this.end-this.begin);return this.property.interpolate(w.possiblyEvaluate(o,d,f),b,Be(E))}}return b}}class be{constructor(o){this._properties=o,this._values=Object.create(o.defaultTransitioningPropertyValues)}possiblyEvaluate(o,d,f){const g=new Ce(this._properties);for(const b of Object.keys(this._values))g._values[b]=this._values[b].possiblyEvaluate(o,d,f);return g}hasTransition(){for(const o of Object.keys(this._values))if(this._values[o].prior)return!0;return!1}}class Se{constructor(o){this._properties=o,this._values=Object.create(o.defaultPropertyValues)}getValue(o){return fe(this._values[o].value)}setValue(o,d){this._values[o]=new q(this._values[o].property,d===null?void 0:fe(d))}serialize(){const o={};for(const d of Object.keys(this._values)){const f=this.getValue(d);f!==void 0&&(o[d]=f)}return o}possiblyEvaluate(o,d,f){const g=new Ce(this._properties);for(const b of Object.keys(this._values))g._values[b]=this._values[b].possiblyEvaluate(o,d,f);return g}}class xe{constructor(o,d,f){this.property=o,this.value=d,this.parameters=f}isConstant(){return this.value.kind==="constant"}constantOr(o){return this.value.kind==="constant"?this.value.value:o}evaluate(o,d,f,g){return this.property.evaluate(this.value,this.parameters,o,d,f,g)}}class Ce{constructor(o){this._properties=o,this._values=Object.create(o.defaultPossiblyEvaluatedValues)}get(o){return this._values[o]}}class le{constructor(o){this.specification=o}possiblyEvaluate(o,d){return o.expression.evaluate(d)}interpolate(o,d,f){const g=Ys[this.specification.type];return g?g(o,d,f):o}}class ye{constructor(o,d){this.specification=o,this.overrides=d}possiblyEvaluate(o,d,f,g){return new xe(this,o.expression.kind==="constant"||o.expression.kind==="camera"?{kind:"constant",value:o.expression.evaluate(d,null,{},f,g)}:o.expression,d)}interpolate(o,d,f){if(o.value.kind!=="constant"||d.value.kind!=="constant")return o;if(o.value.value===void 0||d.value.value===void 0)return new xe(this,{kind:"constant",value:void 0},o.parameters);const g=Ys[this.specification.type];return g?new xe(this,{kind:"constant",value:g(o.value.value,d.value.value,f)},o.parameters):o}evaluate(o,d,f,g,b,w){return o.kind==="constant"?o.value:o.evaluate(d,f,g,b,w)}}class Pe{constructor(o){this.specification=o}possiblyEvaluate(o,d,f,g){return!!o.expression.evaluate(d,null,{},f,g)}interpolate(){return!1}}class Le{constructor(o){this.properties=o,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const d=new $(0,{});for(const f in o){const g=o[f];g.specification.overridable&&this.overridableProperties.push(f);const b=this.defaultPropertyValues[f]=new q(g,void 0),w=this.defaultTransitionablePropertyValues[f]=new K(g);this.defaultTransitioningPropertyValues[f]=w.untransitioned(),this.defaultPossiblyEvaluatedValues[f]=b.possiblyEvaluate(d)}}}function We(c,o){return 256*(c=De(Math.floor(c),0,255))+De(Math.floor(o),0,255)}Sn(ye,"DataDrivenProperty"),Sn(le,"DataConstantProperty"),Sn(Pe,"ColorRampProperty");const qe={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Ye{constructor(o,d){this._structArray=o,this._pos1=d*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class ut{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(o,d){return o._trim(),d&&(o.isTransferred=!0,d.push(o.arrayBuffer)),{length:o.length,arrayBuffer:o.arrayBuffer}}static deserialize(o){const d=Object.create(this.prototype);return d.arrayBuffer=o.arrayBuffer,d.length=o.length,d.capacity=o.arrayBuffer.byteLength/d.bytesPerElement,d._refreshViews(),d}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(o){this.reserve(o),this.length=o}reserve(o){if(o>this.capacity){this.capacity=Math.max(o,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const d=this.uint8;this._refreshViews(),d&&this.uint8.set(d)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function at(c,o=1){let d=0,f=0;return{members:c.map((g=>{const b=qe[g.type].BYTES_PER_ELEMENT,w=d=gt(d,Math.max(o,b)),E=g.components||1;return f=Math.max(f,b),d+=b*E,{name:g.name,type:g.type,components:E,offset:w}})),size:gt(d,Math.max(f,o)),alignment:o}}function gt(c,o){return Math.ceil(c/o)*o}class qt extends ut{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,d){const f=this.length;return this.resize(f+1),this.emplace(f,o,d)}emplace(o,d,f){const g=2*o;return this.int16[g+0]=d,this.int16[g+1]=f,o}}qt.prototype.bytesPerElement=4,Sn(qt,"StructArrayLayout2i4");class dt extends ut{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,d,f){const g=this.length;return this.resize(g+1),this.emplace(g,o,d,f)}emplace(o,d,f,g){const b=3*o;return this.int16[b+0]=d,this.int16[b+1]=f,this.int16[b+2]=g,o}}dt.prototype.bytesPerElement=6,Sn(dt,"StructArrayLayout3i6");class Vt extends ut{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,d,f,g){const b=this.length;return this.resize(b+1),this.emplace(b,o,d,f,g)}emplace(o,d,f,g,b){const w=4*o;return this.int16[w+0]=d,this.int16[w+1]=f,this.int16[w+2]=g,this.int16[w+3]=b,o}}Vt.prototype.bytesPerElement=8,Sn(Vt,"StructArrayLayout4i8");class xt extends ut{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,d,f,g,b,w,E){const I=this.length;return this.resize(I+1),this.emplace(I,o,d,f,g,b,w,E)}emplace(o,d,f,g,b,w,E,I){const D=6*o,N=12*o,j=3*o;return this.int16[D+0]=d,this.int16[D+1]=f,this.uint8[N+4]=g,this.uint8[N+5]=b,this.uint8[N+6]=w,this.uint8[N+7]=E,this.float32[j+2]=I,o}}xt.prototype.bytesPerElement=12,Sn(xt,"StructArrayLayout2i4ub1f12");class Zt extends ut{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,d,f,g){const b=this.length;return this.resize(b+1),this.emplace(b,o,d,f,g)}emplace(o,d,f,g,b){const w=4*o;return this.float32[w+0]=d,this.float32[w+1]=f,this.float32[w+2]=g,this.float32[w+3]=b,o}}Zt.prototype.bytesPerElement=16,Sn(Zt,"StructArrayLayout4f16");class ft extends ut{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,d,f,g,b){const w=this.length;return this.resize(w+1),this.emplace(w,o,d,f,g,b)}emplace(o,d,f,g,b,w){const E=6*o,I=3*o;return this.uint16[E+0]=d,this.uint16[E+1]=f,this.uint16[E+2]=g,this.uint16[E+3]=b,this.float32[I+2]=w,o}}ft.prototype.bytesPerElement=12,Sn(ft,"StructArrayLayout4ui1f12");class Et extends ut{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,d,f,g){const b=this.length;return this.resize(b+1),this.emplace(b,o,d,f,g)}emplace(o,d,f,g,b){const w=4*o;return this.uint16[w+0]=d,this.uint16[w+1]=f,this.uint16[w+2]=g,this.uint16[w+3]=b,o}}Et.prototype.bytesPerElement=8,Sn(Et,"StructArrayLayout4ui8");class Ht extends ut{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,d,f,g,b,w){const E=this.length;return this.resize(E+1),this.emplace(E,o,d,f,g,b,w)}emplace(o,d,f,g,b,w,E){const I=6*o;return this.int16[I+0]=d,this.int16[I+1]=f,this.int16[I+2]=g,this.int16[I+3]=b,this.int16[I+4]=w,this.int16[I+5]=E,o}}Ht.prototype.bytesPerElement=12,Sn(Ht,"StructArrayLayout6i12");class Nt extends ut{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,d,f,g,b,w,E,I,D,N,j,Z){const ne=this.length;return this.resize(ne+1),this.emplace(ne,o,d,f,g,b,w,E,I,D,N,j,Z)}emplace(o,d,f,g,b,w,E,I,D,N,j,Z,ne){const oe=12*o;return this.int16[oe+0]=d,this.int16[oe+1]=f,this.int16[oe+2]=g,this.int16[oe+3]=b,this.uint16[oe+4]=w,this.uint16[oe+5]=E,this.uint16[oe+6]=I,this.uint16[oe+7]=D,this.int16[oe+8]=N,this.int16[oe+9]=j,this.int16[oe+10]=Z,this.int16[oe+11]=ne,o}}Nt.prototype.bytesPerElement=24,Sn(Nt,"StructArrayLayout4i4ui4i24");class Jt extends ut{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,d,f,g,b,w){const E=this.length;return this.resize(E+1),this.emplace(E,o,d,f,g,b,w)}emplace(o,d,f,g,b,w,E){const I=10*o,D=5*o;return this.int16[I+0]=d,this.int16[I+1]=f,this.int16[I+2]=g,this.float32[D+2]=b,this.float32[D+3]=w,this.float32[D+4]=E,o}}Jt.prototype.bytesPerElement=20,Sn(Jt,"StructArrayLayout3i3f20");class Mn extends ut{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(o){const d=this.length;return this.resize(d+1),this.emplace(d,o)}emplace(o,d){return this.uint32[1*o+0]=d,o}}Mn.prototype.bytesPerElement=4,Sn(Mn,"StructArrayLayout1ul4");class Gn extends ut{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,d,f,g,b,w,E,I,D,N,j,Z,ne){const oe=this.length;return this.resize(oe+1),this.emplace(oe,o,d,f,g,b,w,E,I,D,N,j,Z,ne)}emplace(o,d,f,g,b,w,E,I,D,N,j,Z,ne,oe){const he=20*o,Te=10*o;return this.int16[he+0]=d,this.int16[he+1]=f,this.int16[he+2]=g,this.int16[he+3]=b,this.int16[he+4]=w,this.float32[Te+3]=E,this.float32[Te+4]=I,this.float32[Te+5]=D,this.float32[Te+6]=N,this.int16[he+14]=j,this.uint32[Te+8]=Z,this.uint16[he+18]=ne,this.uint16[he+19]=oe,o}}Gn.prototype.bytesPerElement=40,Sn(Gn,"StructArrayLayout5i4f1i1ul2ui40");class En extends ut{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,d,f,g,b,w,E){const I=this.length;return this.resize(I+1),this.emplace(I,o,d,f,g,b,w,E)}emplace(o,d,f,g,b,w,E,I){const D=8*o;return this.int16[D+0]=d,this.int16[D+1]=f,this.int16[D+2]=g,this.int16[D+4]=b,this.int16[D+5]=w,this.int16[D+6]=E,this.int16[D+7]=I,o}}En.prototype.bytesPerElement=16,Sn(En,"StructArrayLayout3i2i2i16");class Rn extends ut{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,d,f,g,b){const w=this.length;return this.resize(w+1),this.emplace(w,o,d,f,g,b)}emplace(o,d,f,g,b,w){const E=4*o,I=8*o;return this.float32[E+0]=d,this.float32[E+1]=f,this.float32[E+2]=g,this.int16[I+6]=b,this.int16[I+7]=w,o}}Rn.prototype.bytesPerElement=16,Sn(Rn,"StructArrayLayout2f1f2i16");class gi extends ut{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,d,f,g){const b=this.length;return this.resize(b+1),this.emplace(b,o,d,f,g)}emplace(o,d,f,g,b){const w=12*o,E=3*o;return this.uint8[w+0]=d,this.uint8[w+1]=f,this.float32[E+1]=g,this.float32[E+2]=b,o}}gi.prototype.bytesPerElement=12,Sn(gi,"StructArrayLayout2ub2f12");class pi extends ut{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,d,f){const g=this.length;return this.resize(g+1),this.emplace(g,o,d,f)}emplace(o,d,f,g){const b=3*o;return this.float32[b+0]=d,this.float32[b+1]=f,this.float32[b+2]=g,o}}pi.prototype.bytesPerElement=12,Sn(pi,"StructArrayLayout3f12");class An extends ut{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,d,f){const g=this.length;return this.resize(g+1),this.emplace(g,o,d,f)}emplace(o,d,f,g){const b=3*o;return this.uint16[b+0]=d,this.uint16[b+1]=f,this.uint16[b+2]=g,o}}An.prototype.bytesPerElement=6,Sn(An,"StructArrayLayout3ui6");class Oi extends ut{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(o,d,f,g,b,w,E,I,D,N,j,Z,ne,oe,he,Te,Oe,He,Ve,Ne,et){const Ze=this.length;return this.resize(Ze+1),this.emplace(Ze,o,d,f,g,b,w,E,I,D,N,j,Z,ne,oe,he,Te,Oe,He,Ve,Ne,et)}emplace(o,d,f,g,b,w,E,I,D,N,j,Z,ne,oe,he,Te,Oe,He,Ve,Ne,et,Ze){const Tt=30*o,bt=15*o,Ft=60*o;return this.int16[Tt+0]=d,this.int16[Tt+1]=f,this.int16[Tt+2]=g,this.float32[bt+2]=b,this.float32[bt+3]=w,this.uint16[Tt+8]=E,this.uint16[Tt+9]=I,this.uint32[bt+5]=D,this.uint32[bt+6]=N,this.uint32[bt+7]=j,this.uint16[Tt+16]=Z,this.uint16[Tt+17]=ne,this.uint16[Tt+18]=oe,this.float32[bt+10]=he,this.float32[bt+11]=Te,this.uint8[Ft+48]=Oe,this.uint8[Ft+49]=He,this.uint8[Ft+50]=Ve,this.uint32[bt+13]=Ne,this.int16[Tt+28]=et,this.uint8[Ft+58]=Ze,o}}Oi.prototype.bytesPerElement=60,Sn(Oi,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class Hi extends ut{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(o,d,f,g,b,w,E,I,D,N,j,Z,ne,oe,he,Te,Oe,He,Ve,Ne,et,Ze,Tt,bt,Ft,sn,It,jt,Wt,Qt){const cn=this.length;return this.resize(cn+1),this.emplace(cn,o,d,f,g,b,w,E,I,D,N,j,Z,ne,oe,he,Te,Oe,He,Ve,Ne,et,Ze,Tt,bt,Ft,sn,It,jt,Wt,Qt)}emplace(o,d,f,g,b,w,E,I,D,N,j,Z,ne,oe,he,Te,Oe,He,Ve,Ne,et,Ze,Tt,bt,Ft,sn,It,jt,Wt,Qt,cn){const Bt=38*o,_n=19*o;return this.int16[Bt+0]=d,this.int16[Bt+1]=f,this.int16[Bt+2]=g,this.float32[_n+2]=b,this.float32[_n+3]=w,this.int16[Bt+8]=E,this.int16[Bt+9]=I,this.int16[Bt+10]=D,this.int16[Bt+11]=N,this.int16[Bt+12]=j,this.int16[Bt+13]=Z,this.uint16[Bt+14]=ne,this.uint16[Bt+15]=oe,this.uint16[Bt+16]=he,this.uint16[Bt+17]=Te,this.uint16[Bt+18]=Oe,this.uint16[Bt+19]=He,this.uint16[Bt+20]=Ve,this.uint16[Bt+21]=Ne,this.uint16[Bt+22]=et,this.uint16[Bt+23]=Ze,this.uint16[Bt+24]=Tt,this.uint16[Bt+25]=bt,this.uint16[Bt+26]=Ft,this.uint16[Bt+27]=sn,this.uint16[Bt+28]=It,this.uint32[_n+15]=jt,this.float32[_n+16]=Wt,this.float32[_n+17]=Qt,this.float32[_n+18]=cn,o}}Hi.prototype.bytesPerElement=76,Sn(Hi,"StructArrayLayout3i2f6i15ui1ul3f76");class Zi extends ut{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o){const d=this.length;return this.resize(d+1),this.emplace(d,o)}emplace(o,d){return this.float32[1*o+0]=d,o}}Zi.prototype.bytesPerElement=4,Sn(Zi,"StructArrayLayout1f4");class Gi extends ut{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,d,f,g,b){const w=this.length;return this.resize(w+1),this.emplace(w,o,d,f,g,b)}emplace(o,d,f,g,b,w){const E=5*o;return this.float32[E+0]=d,this.float32[E+1]=f,this.float32[E+2]=g,this.float32[E+3]=b,this.float32[E+4]=w,o}}Gi.prototype.bytesPerElement=20,Sn(Gi,"StructArrayLayout5f20");class js extends ut{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,d,f,g){const b=this.length;return this.resize(b+1),this.emplace(b,o,d,f,g)}emplace(o,d,f,g,b){const w=6*o;return this.uint32[3*o+0]=d,this.uint16[w+2]=f,this.uint16[w+3]=g,this.uint16[w+4]=b,o}}js.prototype.bytesPerElement=12,Sn(js,"StructArrayLayout1ul3ui12");class Ps extends ut{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,d){const f=this.length;return this.resize(f+1),this.emplace(f,o,d)}emplace(o,d,f){const g=2*o;return this.uint16[g+0]=d,this.uint16[g+1]=f,o}}Ps.prototype.bytesPerElement=4,Sn(Ps,"StructArrayLayout2ui4");class Ta extends ut{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o){const d=this.length;return this.resize(d+1),this.emplace(d,o)}emplace(o,d){return this.uint16[1*o+0]=d,o}}Ta.prototype.bytesPerElement=2,Sn(Ta,"StructArrayLayout1ui2");class Zs extends ut{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,d){const f=this.length;return this.resize(f+1),this.emplace(f,o,d)}emplace(o,d,f){const g=2*o;return this.float32[g+0]=d,this.float32[g+1]=f,o}}Zs.prototype.bytesPerElement=8,Sn(Zs,"StructArrayLayout2f8");class nr extends Ye{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}nr.prototype.size=40;class qi extends Gn{get(o){return new nr(this,o)}}Sn(qi,"CollisionBoxArray");class Ai extends Ye{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(o){this._structArray.uint8[this._pos1+49]=o}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(o){this._structArray.uint8[this._pos1+50]=o}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(o){this._structArray.uint32[this._pos4+13]=o}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(o){this._structArray.uint8[this._pos1+58]=o}}Ai.prototype.size=60;class Br extends Oi{get(o){return new Ai(this,o)}}Sn(Br,"PlacedSymbolArray");class Js extends Ye{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(o){this._structArray.uint32[this._pos4+15]=o}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}Js.prototype.size=76;class or extends Hi{get(o){return new Js(this,o)}}Sn(or,"SymbolInstanceArray");class ho extends Zi{getoffsetX(o){return this.float32[1*o+0]}}Sn(ho,"GlyphOffsetArray");class Vd extends qt{getx(o){return this.int16[2*o+0]}gety(o){return this.int16[2*o+1]}}Sn(Vd,"SymbolLineVertexArray");class Jc extends Ye{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}Jc.prototype.size=12;class Bd extends js{get(o){return new Jc(this,o)}}Sn(Bd,"FeatureIndexArray");class il extends Ps{geta_centroid_pos0(o){return this.uint16[2*o+0]}geta_centroid_pos1(o){return this.uint16[2*o+1]}}Sn(il,"FillExtrusionCentroidArray");const ql=at([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),Fd=at([{name:"a_dash",components:4,type:"Uint16"}]);var Og={exports:{}},Fm={exports:{}};Fm.exports=function(c,o){var d,f,g,b,w,E,I,D;for(f=c.length-(d=3&c.length),g=o,w=3432918353,E=461845907,D=0;D<f;)I=255&c.charCodeAt(D)|(255&c.charCodeAt(++D))<<8|(255&c.charCodeAt(++D))<<16|(255&c.charCodeAt(++D))<<24,++D,g=27492+(65535&(b=5*(65535&(g=(g^=I=(65535&(I=(I=(65535&I)*w+(((I>>>16)*w&65535)<<16)&4294967295)<<15|I>>>17))*E+(((I>>>16)*E&65535)<<16)&4294967295)<<13|g>>>19))+((5*(g>>>16)&65535)<<16)&4294967295))+((58964+(b>>>16)&65535)<<16);switch(I=0,d){case 3:I^=(255&c.charCodeAt(D+2))<<16;case 2:I^=(255&c.charCodeAt(D+1))<<8;case 1:g^=I=(65535&(I=(I=(65535&(I^=255&c.charCodeAt(D)))*w+(((I>>>16)*w&65535)<<16)&4294967295)<<15|I>>>17))*E+(((I>>>16)*E&65535)<<16)&4294967295}return g^=c.length,g=2246822507*(65535&(g^=g>>>16))+((2246822507*(g>>>16)&65535)<<16)&4294967295,g=3266489909*(65535&(g^=g>>>13))+((3266489909*(g>>>16)&65535)<<16)&4294967295,(g^=g>>>16)>>>0};var z_=Fm.exports,yM={exports:{}};yM.exports=function(c,o){for(var d,f=c.length,g=o^f,b=0;f>=4;)d=1540483477*(65535&(d=255&c.charCodeAt(b)|(255&c.charCodeAt(++b))<<8|(255&c.charCodeAt(++b))<<16|(255&c.charCodeAt(++b))<<24))+((1540483477*(d>>>16)&65535)<<16),g=1540483477*(65535&g)+((1540483477*(g>>>16)&65535)<<16)^(d=1540483477*(65535&(d^=d>>>24))+((1540483477*(d>>>16)&65535)<<16)),f-=4,++b;switch(f){case 3:g^=(255&c.charCodeAt(b+2))<<16;case 2:g^=(255&c.charCodeAt(b+1))<<8;case 1:g=1540483477*(65535&(g^=255&c.charCodeAt(b)))+((1540483477*(g>>>16)&65535)<<16)}return g=1540483477*(65535&(g^=g>>>13))+((1540483477*(g>>>16)&65535)<<16),(g^=g>>>15)>>>0};var bM=z_,W7=yM.exports;Og.exports=bM,Og.exports.murmur3=bM,Og.exports.murmur2=W7;var uS=Y(Og.exports);class Hb{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(o,d,f,g){this.ids.push(xM(o)),this.positions.push(d,f,g)}getPositions(o){const d=xM(o);let f=0,g=this.ids.length-1;for(;f<g;){const w=f+g>>1;this.ids[w]>=d?g=w:f=w+1}const b=[];for(;this.ids[f]===d;)b.push({index:this.positions[3*f],start:this.positions[3*f+1],end:this.positions[3*f+2]}),f++;return b}static serialize(o,d){const f=new Float64Array(o.ids),g=new Uint32Array(o.positions);return dS(f,g,0,f.length-1),d&&d.push(f.buffer,g.buffer),{ids:f,positions:g}}static deserialize(o){const d=new Hb;return d.ids=o.ids,d.positions=o.positions,d.indexed=!0,d}}function xM(c){const o=+c;return!isNaN(o)&&Number.MIN_SAFE_INTEGER<=o&&o<=Number.MAX_SAFE_INTEGER?o:uS(String(c))}function dS(c,o,d,f){for(;d<f;){const g=c[d+f>>1];let b=d-1,w=f+1;for(;;){do b++;while(c[b]<g);do w--;while(c[w]>g);if(b>=w)break;Gb(c,b,w),Gb(o,3*b,3*w),Gb(o,3*b+1,3*w+1),Gb(o,3*b+2,3*w+2)}w-d<f-w?(dS(c,o,d,w),d=w+1):(dS(c,o,w+1,f),f=w)}}function Gb(c,o,d){const f=c[o];c[o]=c[d],c[d]=f}Sn(Hb,"FeaturePositionMap");class zd{constructor(o){this.gl=o.gl,this.initialized=!1}fetchUniformLocation(o,d){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(o,d),this.initialized=!0),!!this.location}}class qb extends zd{constructor(o){super(o),this.current=0}set(o,d,f){this.fetchUniformLocation(o,d)&&this.current!==f&&(this.current=f,this.gl.uniform1f(this.location,f))}}class wM extends zd{constructor(o){super(o),this.current=[0,0,0,0]}set(o,d,f){this.fetchUniformLocation(o,d)&&(f[0]===this.current[0]&&f[1]===this.current[1]&&f[2]===this.current[2]&&f[3]===this.current[3]||(this.current=f,this.gl.uniform4f(this.location,f[0],f[1],f[2],f[3])))}}class TM extends zd{constructor(o){super(o),this.current=Wi.transparent}set(o,d,f){this.fetchUniformLocation(o,d)&&(f.r===this.current.r&&f.g===this.current.g&&f.b===this.current.b&&f.a===this.current.a||(this.current=f,this.gl.uniform4f(this.location,f.r,f.g,f.b,f.a)))}}const H7=new Float32Array(16),G7=new Float32Array(9),q7=new Float32Array(4);function hS(c){return[We(255*c.r,255*c.g),We(255*c.b,255*c.a)]}class N_{constructor(o,d,f){this.value=o,this.uniformNames=d.map((g=>`u_${g}`)),this.type=f}setUniform(o,d,f,g,b){d.set(o,b,g.constantOr(this.value))}getBinding(o,d){return this.type==="color"?new TM(o):new qb(o)}}class Vg{constructor(o,d){this.uniformNames=d.map((f=>`u_${f}`)),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(o){this.pixelRatio=o.pixelRatio||1,this.pattern=o.tl.concat(o.br)}setUniform(o,d,f,g,b){const w=b==="u_pattern"||b==="u_dash"?this.pattern:b==="u_pixel_ratio"?this.pixelRatio:null;w&&d.set(o,b,w)}getBinding(o,d){return d==="u_pattern"||d==="u_dash"?new wM(o):new qb(o)}}class Nd{constructor(o,d,f,g){this.expression=o,this.type=f,this.maxValue=0,this.paintVertexAttributes=d.map((b=>({name:`a_${b}`,type:"Float32",components:f==="color"?2:1,offset:0}))),this.paintVertexArray=new g}populatePaintArray(o,d,f,g,b,w){const E=this.paintVertexArray.length,I=this.expression.evaluate(new $(0),d,{},b,g,w);this.paintVertexArray.resize(o),this._setPaintValue(E,o,I)}updatePaintArray(o,d,f,g,b){const w=this.expression.evaluate({zoom:0},f,g,void 0,b);this._setPaintValue(o,d,w)}_setPaintValue(o,d,f){if(this.type==="color"){const g=hS(f);for(let b=o;b<d;b++)this.paintVertexArray.emplace(b,g[0],g[1])}else{for(let g=o;g<d;g++)this.paintVertexArray.emplace(g,f);this.maxValue=Math.max(this.maxValue,Math.abs(f))}}upload(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Qc{constructor(o,d,f,g,b,w){this.expression=o,this.uniformNames=d.map((E=>`u_${E}_t`)),this.type=f,this.useIntegerZoom=g,this.zoom=b,this.maxValue=0,this.paintVertexAttributes=d.map((E=>({name:`a_${E}`,type:"Float32",components:f==="color"?4:2,offset:0}))),this.paintVertexArray=new w}populatePaintArray(o,d,f,g,b,w){const E=this.expression.evaluate(new $(this.zoom),d,{},b,g,w),I=this.expression.evaluate(new $(this.zoom+1),d,{},b,g,w),D=this.paintVertexArray.length;this.paintVertexArray.resize(o),this._setPaintValue(D,o,E,I)}updatePaintArray(o,d,f,g,b){const w=this.expression.evaluate({zoom:this.zoom},f,g,void 0,b),E=this.expression.evaluate({zoom:this.zoom+1},f,g,void 0,b);this._setPaintValue(o,d,w,E)}_setPaintValue(o,d,f,g){if(this.type==="color"){const b=hS(f),w=hS(g);for(let E=o;E<d;E++)this.paintVertexArray.emplace(E,b[0],b[1],w[0],w[1])}else{for(let b=o;b<d;b++)this.paintVertexArray.emplace(b,f,g);this.maxValue=Math.max(this.maxValue,Math.abs(f),Math.abs(g))}}upload(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(o,d,f,g,b){const w=this.useIntegerZoom?Math.floor(f.zoom):f.zoom,E=De(this.expression.interpolationFactor(w,this.zoom,this.zoom+1),0,1);d.set(o,b,E)}getBinding(o,d){return new qb(o)}}class tf{constructor(o,d,f,g,b){this.expression=o,this.layerId=b,this.paintVertexAttributes=(f==="array"?Fd:ql).members;for(let w=0;w<d.length;++w);this.paintVertexArray=new g}populatePaintArray(o,d,f){const g=this.paintVertexArray.length;this.paintVertexArray.resize(o),this._setPaintValues(g,o,d.patterns&&d.patterns[this.layerId],f)}updatePaintArray(o,d,f,g,b,w){this._setPaintValues(o,d,f.patterns&&f.patterns[this.layerId],w)}_setPaintValues(o,d,f,g){if(!g||!f)return;const b=g[f];if(!b)return;const{tl:w,br:E,pixelRatio:I}=b;for(let D=o;D<d;D++)this.paintVertexArray.emplace(D,w[0],w[1],E[0],E[1],I)}upload(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class nf{constructor(o,d,f=(()=>!0)){this.binders={},this._buffers=[];const g=[];for(const b in o.paint._values){if(!f(b))continue;const w=o.paint.get(b);if(!(w instanceof xe&&Cu(w.property.specification)))continue;const E=X7(b,o.type),I=w.value,D=w.property.specification.type,N=!!w.property.useIntegerZoom,j=b==="line-dasharray"||b.endsWith("pattern"),Z=b==="line-dasharray"&&o.layout.get("line-cap").value.kind!=="constant";if(I.kind!=="constant"||Z)if(I.kind==="source"||Z||j){const ne=SM(b,D,"source");this.binders[b]=j?new tf(I,E,D,ne,o.id):new Nd(I,E,D,ne),g.push(`/a_${b}`)}else{const ne=SM(b,D,"composite");this.binders[b]=new Qc(I,E,D,N,d,ne),g.push(`/z_${b}`)}else this.binders[b]=j?new Vg(I.value,E):new N_(I.value,E,D),g.push(`/u_${b}`)}this.cacheKey=g.sort().join("")}getMaxValue(o){const d=this.binders[o];return d instanceof Nd||d instanceof Qc?d.maxValue:0}populatePaintArrays(o,d,f,g,b,w){for(const E in this.binders){const I=this.binders[E];(I instanceof Nd||I instanceof Qc||I instanceof tf)&&I.populatePaintArray(o,d,f,g,b,w)}}setConstantPatternPositions(o){for(const d in this.binders){const f=this.binders[d];f instanceof Vg&&f.setConstantPatternPositions(o)}}updatePaintArrays(o,d,f,g,b,w){let E=!1;for(const I in o){const D=d.getPositions(I);for(const N of D){const j=f.feature(N.index);for(const Z in this.binders){const ne=this.binders[Z];if((ne instanceof Nd||ne instanceof Qc||ne instanceof tf)&&ne.expression.isStateDependent===!0){const oe=g.paint.get(Z);ne.expression=oe.value,ne.updatePaintArray(N.start,N.end,j,o[I],b,w),E=!0}}}}return E}defines(){const o=[];for(const d in this.binders){const f=this.binders[d];(f instanceof N_||f instanceof Vg)&&o.push(...f.uniformNames.map((g=>`#define HAS_UNIFORM_${g}`)))}return o}getBinderAttributes(){const o=[];for(const d in this.binders){const f=this.binders[d];if(f instanceof Nd||f instanceof Qc||f instanceof tf)for(let g=0;g<f.paintVertexAttributes.length;g++)o.push(f.paintVertexAttributes[g].name)}return o}getBinderUniforms(){const o=[];for(const d in this.binders){const f=this.binders[d];if(f instanceof N_||f instanceof Vg||f instanceof Qc)for(const g of f.uniformNames)o.push(g)}return o}getPaintVertexBuffers(){return this._buffers}getUniforms(o){const d=[];for(const f in this.binders){const g=this.binders[f];if(g instanceof N_||g instanceof Vg||g instanceof Qc)for(const b of g.uniformNames)d.push({name:b,property:f,binding:g.getBinding(o,b)})}return d}setUniforms(o,d,f,g,b){for(const{name:w,property:E,binding:I}of f)this.binders[E].setUniform(o,I,b,g.get(E),w)}updatePaintBuffers(){this._buffers=[];for(const o in this.binders){const d=this.binders[o];(d instanceof Nd||d instanceof Qc||d instanceof tf)&&d.paintVertexBuffer&&this._buffers.push(d.paintVertexBuffer)}}upload(o){for(const d in this.binders){const f=this.binders[d];(f instanceof Nd||f instanceof Qc||f instanceof tf)&&f.upload(o)}this.updatePaintBuffers()}destroy(){for(const o in this.binders){const d=this.binders[o];(d instanceof Nd||d instanceof Qc||d instanceof tf)&&d.destroy()}}}class zm{constructor(o,d,f=(()=>!0)){this.programConfigurations={};for(const g of o)this.programConfigurations[g.id]=new nf(g,d,f);this.needsUpload=!1,this._featureMap=new Hb,this._bufferOffset=0}populatePaintArrays(o,d,f,g,b,w,E){for(const I in this.programConfigurations)this.programConfigurations[I].populatePaintArrays(o,d,g,b,w,E);d.id!==void 0&&this._featureMap.add(d.id,f,this._bufferOffset,o),this._bufferOffset=o,this.needsUpload=!0}updatePaintArrays(o,d,f,g,b){for(const w of f)this.needsUpload=this.programConfigurations[w.id].updatePaintArrays(o,this._featureMap,d,w,g,b)||this.needsUpload}get(o){return this.programConfigurations[o]}upload(o){if(this.needsUpload){for(const d in this.programConfigurations)this.programConfigurations[d].upload(o);this.needsUpload=!1}}destroy(){for(const o in this.programConfigurations)this.programConfigurations[o].destroy()}}const K7={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function X7(c,o){return K7[c]||[c.replace(`${o}-`,"").replace(/-/g,"_")]}const Y7={"line-pattern":{source:ft,composite:ft},"fill-pattern":{source:ft,composite:ft},"fill-extrusion-pattern":{source:ft,composite:ft},"line-dasharray":{source:Et,composite:Et}},Z7={color:{source:Zs,composite:Zt},number:{source:Zi,composite:Zs}};function SM(c,o,d){const f=Y7[c];return f&&f[d]||Z7[o][d]}Sn(N_,"ConstantBinder"),Sn(Vg,"PatternConstantBinder"),Sn(Nd,"SourceExpressionBinder"),Sn(tf,"PatternCompositeBinder"),Sn(Qc,"CompositeExpressionBinder"),Sn(nf,"ProgramConfiguration",{omit:["_buffers"]}),Sn(zm,"ProgramConfigurationSet");const EM="-transition";class eu extends zl{constructor(o,d){if(super(),this.id=o.id,this.type=o.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,o.type!=="custom"&&(this.metadata=o.metadata,this.minzoom=o.minzoom,this.maxzoom=o.maxzoom,o.type!=="background"&&o.type!=="sky"&&(this.source=o.source,this.sourceLayer=o["source-layer"],this.filter=o.filter),d.layout&&(this._unevaluatedLayout=new Se(d.layout)),d.paint)){this._transitionablePaint=new ae(d.paint);for(const f in o.paint)this.setPaintProperty(f,o.paint[f],{validate:!1});for(const f in o.layout)this.setLayoutProperty(f,o.layout[f],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Ce(d.paint)}}getLayoutProperty(o){return o==="visibility"?this.visibility:this._unevaluatedLayout.getValue(o)}setLayoutProperty(o,d,f={}){d!=null&&this._validate(Lm,`layers.${this.id}.layout.${o}`,o,d,f)||(o!=="visibility"?this._unevaluatedLayout.setValue(o,d):this.visibility=d)}getPaintProperty(o){return Ue(o,EM)?this._transitionablePaint.getTransition(o.slice(0,-11)):this._transitionablePaint.getValue(o)}setPaintProperty(o,d,f={}){if(d!=null&&this._validate(Dg,`layers.${this.id}.paint.${o}`,o,d,f))return!1;if(Ue(o,EM))return this._transitionablePaint.setTransition(o.slice(0,-11),d||void 0),!1;{const g=this._transitionablePaint._values[o],b=g.value.isDataDriven(),w=g.value;this._transitionablePaint.setValue(o,d),this._handleSpecialPaintPropertyUpdate(o);const E=this._transitionablePaint._values[o].value,I=E.isDataDriven(),D=Ue(o,"pattern")||o==="line-dasharray";return I||b||D||this._handleOverridablePaintPropertyUpdate(o,w,E)}}_handleSpecialPaintPropertyUpdate(o){}getProgramIds(){return null}getProgramConfiguration(o){return null}_handleOverridablePaintPropertyUpdate(o,d,f){return!1}isHidden(o){return!!(this.minzoom&&o<this.minzoom)||!!(this.maxzoom&&o>=this.maxzoom)||this.visibility==="none"}updateTransitions(o){this._transitioningPaint=this._transitionablePaint.transitioned(o,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(o,d){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(o,void 0,d)),this.paint=this._transitioningPaint.possiblyEvaluate(o,void 0,d)}serialize(){const o={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(o.layout=o.layout||{},o.layout.visibility=this.visibility),we(o,((d,f)=>!(d===void 0||f==="layout"&&!Object.keys(d).length||f==="paint"&&!Object.keys(d).length)))}_validate(o,d,f,g,b={}){return(!b||b.validate!==!1)&&ef(this,o.call(Tc,{key:d,layerType:this.type,objectKey:f,value:g,styleSpec:Ot,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const o in this.paint._values){const d=this.paint.get(o);if(d instanceof xe&&Cu(d.property.specification)&&(d.value.kind==="source"||d.value.kind==="composite")&&d.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=Yh(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const J7=at([{name:"a_pos",components:2,type:"Int16"}],4),Q7=at([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class hs{constructor(o=[]){this.segments=o}prepareSegment(o,d,f,g){let b=this.segments[this.segments.length-1];return o>hs.MAX_VERTEX_ARRAY_LENGTH&&je(`Max vertices per segment is ${hs.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${o}`),(!b||b.vertexLength+o>hs.MAX_VERTEX_ARRAY_LENGTH||b.sortKey!==g)&&(b={vertexOffset:d.length,primitiveOffset:f.length,vertexLength:0,primitiveLength:0},g!==void 0&&(b.sortKey=g),this.segments.push(b)),b}get(){return this.segments}destroy(){for(const o of this.segments)for(const d in o.vaos)o.vaos[d].destroy()}static simpleSegment(o,d,f,g){return new hs([{vertexOffset:o,primitiveOffset:d,vertexLength:f,primitiveLength:g,vaos:{},sortKey:0}])}}hs.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Sn(hs,"SegmentVector");var zn=8192;class rf{constructor(o,d){o&&(d?this.setSouthWest(o).setNorthEast(d):o.length===4?this.setSouthWest([o[0],o[1]]).setNorthEast([o[2],o[3]]):this.setSouthWest(o[0]).setNorthEast(o[1]))}setNorthEast(o){return this._ne=o instanceof ar?new ar(o.lng,o.lat):ar.convert(o),this}setSouthWest(o){return this._sw=o instanceof ar?new ar(o.lng,o.lat):ar.convert(o),this}extend(o){const d=this._sw,f=this._ne;let g,b;if(o instanceof ar)g=o,b=o;else{if(!(o instanceof rf))return Array.isArray(o)?o.length===4||o.every(Array.isArray)?this.extend(rf.convert(o)):this.extend(ar.convert(o)):typeof o=="object"&&o!==null&&o.hasOwnProperty("lat")&&(o.hasOwnProperty("lon")||o.hasOwnProperty("lng"))?this.extend(ar.convert(o)):this;if(g=o._sw,b=o._ne,!g||!b)return this}return d||f?(d.lng=Math.min(g.lng,d.lng),d.lat=Math.min(g.lat,d.lat),f.lng=Math.max(b.lng,f.lng),f.lat=Math.max(b.lat,f.lat)):(this._sw=new ar(g.lng,g.lat),this._ne=new ar(b.lng,b.lat)),this}getCenter(){return new ar((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new ar(this.getWest(),this.getNorth())}getSouthEast(){return new ar(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(o){const{lng:d,lat:f}=ar.convert(o);let g=this._sw.lng<=d&&d<=this._ne.lng;return this._sw.lng>this._ne.lng&&(g=this._sw.lng>=d&&d>=this._ne.lng),this._sw.lat<=f&&f<=this._ne.lat&&g}static convert(o){return!o||o instanceof rf?o:new rf(o)}}var Kb=1e-6,wl=typeof Float32Array<"u"?Float32Array:Array;function CM(){var c=new wl(9);return wl!=Float32Array&&(c[1]=0,c[2]=0,c[3]=0,c[5]=0,c[6]=0,c[7]=0),c[0]=1,c[4]=1,c[8]=1,c}function kM(c,o,d){var f=o[0],g=o[1],b=o[2],w=o[3],E=o[4],I=o[5],D=o[6],N=o[7],j=o[8],Z=d[0],ne=d[1],oe=d[2],he=d[3],Te=d[4],Oe=d[5],He=d[6],Ve=d[7],Ne=d[8];return c[0]=Z*f+ne*w+oe*D,c[1]=Z*g+ne*E+oe*N,c[2]=Z*b+ne*I+oe*j,c[3]=he*f+Te*w+Oe*D,c[4]=he*g+Te*E+Oe*N,c[5]=he*b+Te*I+Oe*j,c[6]=He*f+Ve*w+Ne*D,c[7]=He*g+Ve*E+Ne*N,c[8]=He*b+Ve*I+Ne*j,c}function tu(c){return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}function fS(c,o){var d=o[0],f=o[1],g=o[2],b=o[3],w=o[4],E=o[5],I=o[6],D=o[7],N=o[8],j=o[9],Z=o[10],ne=o[11],oe=o[12],he=o[13],Te=o[14],Oe=o[15],He=d*E-f*w,Ve=d*I-g*w,Ne=d*D-b*w,et=f*I-g*E,Ze=f*D-b*E,Tt=g*D-b*I,bt=N*he-j*oe,Ft=N*Te-Z*oe,sn=N*Oe-ne*oe,It=j*Te-Z*he,jt=j*Oe-ne*he,Wt=Z*Oe-ne*Te,Qt=He*Wt-Ve*jt+Ne*It+et*sn-Ze*Ft+Tt*bt;return Qt?(c[0]=(E*Wt-I*jt+D*It)*(Qt=1/Qt),c[1]=(g*jt-f*Wt-b*It)*Qt,c[2]=(he*Tt-Te*Ze+Oe*et)*Qt,c[3]=(Z*Ze-j*Tt-ne*et)*Qt,c[4]=(I*sn-w*Wt-D*Ft)*Qt,c[5]=(d*Wt-g*sn+b*Ft)*Qt,c[6]=(Te*Ne-oe*Tt-Oe*Ve)*Qt,c[7]=(N*Tt-Z*Ne+ne*Ve)*Qt,c[8]=(w*jt-E*sn+D*bt)*Qt,c[9]=(f*sn-d*jt-b*bt)*Qt,c[10]=(oe*Ze-he*Ne+Oe*He)*Qt,c[11]=(j*Ne-N*Ze-ne*He)*Qt,c[12]=(E*Ft-w*It-I*bt)*Qt,c[13]=(d*It-f*Ft+g*bt)*Qt,c[14]=(he*Ve-oe*et-Te*He)*Qt,c[15]=(N*et-j*Ve+Z*He)*Qt,c):null}function Nm(c,o,d){var f=o[0],g=o[1],b=o[2],w=o[3],E=o[4],I=o[5],D=o[6],N=o[7],j=o[8],Z=o[9],ne=o[10],oe=o[11],he=o[12],Te=o[13],Oe=o[14],He=o[15],Ve=d[0],Ne=d[1],et=d[2],Ze=d[3];return c[0]=Ve*f+Ne*E+et*j+Ze*he,c[1]=Ve*g+Ne*I+et*Z+Ze*Te,c[2]=Ve*b+Ne*D+et*ne+Ze*Oe,c[3]=Ve*w+Ne*N+et*oe+Ze*He,c[4]=(Ve=d[4])*f+(Ne=d[5])*E+(et=d[6])*j+(Ze=d[7])*he,c[5]=Ve*g+Ne*I+et*Z+Ze*Te,c[6]=Ve*b+Ne*D+et*ne+Ze*Oe,c[7]=Ve*w+Ne*N+et*oe+Ze*He,c[8]=(Ve=d[8])*f+(Ne=d[9])*E+(et=d[10])*j+(Ze=d[11])*he,c[9]=Ve*g+Ne*I+et*Z+Ze*Te,c[10]=Ve*b+Ne*D+et*ne+Ze*Oe,c[11]=Ve*w+Ne*N+et*oe+Ze*He,c[12]=(Ve=d[12])*f+(Ne=d[13])*E+(et=d[14])*j+(Ze=d[15])*he,c[13]=Ve*g+Ne*I+et*Z+Ze*Te,c[14]=Ve*b+Ne*D+et*ne+Ze*Oe,c[15]=Ve*w+Ne*N+et*oe+Ze*He,c}function $_(c,o,d){var f,g,b,w,E,I,D,N,j,Z,ne,oe,he=d[0],Te=d[1],Oe=d[2];return o===c?(c[12]=o[0]*he+o[4]*Te+o[8]*Oe+o[12],c[13]=o[1]*he+o[5]*Te+o[9]*Oe+o[13],c[14]=o[2]*he+o[6]*Te+o[10]*Oe+o[14],c[15]=o[3]*he+o[7]*Te+o[11]*Oe+o[15]):(g=o[1],b=o[2],w=o[3],E=o[4],I=o[5],D=o[6],N=o[7],j=o[8],Z=o[9],ne=o[10],oe=o[11],c[0]=f=o[0],c[1]=g,c[2]=b,c[3]=w,c[4]=E,c[5]=I,c[6]=D,c[7]=N,c[8]=j,c[9]=Z,c[10]=ne,c[11]=oe,c[12]=f*he+E*Te+j*Oe+o[12],c[13]=g*he+I*Te+Z*Oe+o[13],c[14]=b*he+D*Te+ne*Oe+o[14],c[15]=w*he+N*Te+oe*Oe+o[15]),c}function $m(c,o,d){var f=d[0],g=d[1],b=d[2];return c[0]=o[0]*f,c[1]=o[1]*f,c[2]=o[2]*f,c[3]=o[3]*f,c[4]=o[4]*g,c[5]=o[5]*g,c[6]=o[6]*g,c[7]=o[7]*g,c[8]=o[8]*b,c[9]=o[9]*b,c[10]=o[10]*b,c[11]=o[11]*b,c[12]=o[12],c[13]=o[13],c[14]=o[14],c[15]=o[15],c}function mS(c,o,d){var f=Math.sin(d),g=Math.cos(d),b=o[4],w=o[5],E=o[6],I=o[7],D=o[8],N=o[9],j=o[10],Z=o[11];return o!==c&&(c[0]=o[0],c[1]=o[1],c[2]=o[2],c[3]=o[3],c[12]=o[12],c[13]=o[13],c[14]=o[14],c[15]=o[15]),c[4]=b*g+D*f,c[5]=w*g+N*f,c[6]=E*g+j*f,c[7]=I*g+Z*f,c[8]=D*g-b*f,c[9]=N*g-w*f,c[10]=j*g-E*f,c[11]=Z*g-I*f,c}function Xb(c,o,d){var f=Math.sin(d),g=Math.cos(d),b=o[0],w=o[1],E=o[2],I=o[3],D=o[8],N=o[9],j=o[10],Z=o[11];return o!==c&&(c[4]=o[4],c[5]=o[5],c[6]=o[6],c[7]=o[7],c[12]=o[12],c[13]=o[13],c[14]=o[14],c[15]=o[15]),c[0]=b*g-D*f,c[1]=w*g-N*f,c[2]=E*g-j*f,c[3]=I*g-Z*f,c[8]=b*f+D*g,c[9]=w*f+N*g,c[10]=E*f+j*g,c[11]=I*f+Z*g,c}function IM(c,o){return c[0]=o[0],c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=o[1],c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=o[2],c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}function AM(c,o,d){var f,g,b,w=d[0],E=d[1],I=d[2],D=Math.hypot(w,E,I);return D<Kb?null:(w*=D=1/D,E*=D,I*=D,f=Math.sin(o),g=Math.cos(o),c[0]=w*w*(b=1-g)+g,c[1]=E*w*b+I*f,c[2]=I*w*b-E*f,c[3]=0,c[4]=w*E*b-I*f,c[5]=E*E*b+g,c[6]=I*E*b+w*f,c[7]=0,c[8]=w*I*b+E*f,c[9]=E*I*b-w*f,c[10]=I*I*b+g,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c)}Math.hypot||(Math.hypot=function(){for(var c=0,o=arguments.length;o--;)c+=arguments[o]*arguments[o];return Math.sqrt(c)});var e$=Nm;function pS(){var c=new wl(3);return wl!=Float32Array&&(c[0]=0,c[1]=0,c[2]=0),c}function PM(c){var o=new wl(3);return o[0]=c[0],o[1]=c[1],o[2]=c[2],o}function U_(c){return Math.hypot(c[0],c[1],c[2])}function Bg(c,o,d){var f=new wl(3);return f[0]=c,f[1]=o,f[2]=d,f}function $d(c,o,d){return c[0]=o[0]+d[0],c[1]=o[1]+d[1],c[2]=o[2]+d[2],c}function gS(c,o,d){return c[0]=o[0]-d[0],c[1]=o[1]-d[1],c[2]=o[2]-d[2],c}function MM(c,o,d){return c[0]=o[0]*d[0],c[1]=o[1]*d[1],c[2]=o[2]*d[2],c}function j_(c,o,d){return c[0]=Math.min(o[0],d[0]),c[1]=Math.min(o[1],d[1]),c[2]=Math.min(o[2],d[2]),c}function W_(c,o,d){return c[0]=Math.max(o[0],d[0]),c[1]=Math.max(o[1],d[1]),c[2]=Math.max(o[2],d[2]),c}function Kl(c,o,d){return c[0]=o[0]*d,c[1]=o[1]*d,c[2]=o[2]*d,c}function H_(c,o,d,f){return c[0]=o[0]+d[0]*f,c[1]=o[1]+d[1]*f,c[2]=o[2]+d[2]*f,c}function Sa(c,o){var d=o[0],f=o[1],g=o[2],b=d*d+f*f+g*g;return b>0&&(b=1/Math.sqrt(b)),c[0]=o[0]*b,c[1]=o[1]*b,c[2]=o[2]*b,c}function Sc(c,o){return c[0]*o[0]+c[1]*o[1]+c[2]*o[2]}function vS(c,o,d){var f=o[0],g=o[1],b=o[2],w=d[0],E=d[1],I=d[2];return c[0]=g*I-b*E,c[1]=b*w-f*I,c[2]=f*E-g*w,c}function as(c,o,d){var f=o[0],g=o[1],b=o[2],w=d[3]*f+d[7]*g+d[11]*b+d[15];return c[0]=(d[0]*f+d[4]*g+d[8]*b+d[12])/(w=w||1),c[1]=(d[1]*f+d[5]*g+d[9]*b+d[13])/w,c[2]=(d[2]*f+d[6]*g+d[10]*b+d[14])/w,c}function DM(c,o,d){var f=d[0],g=d[1],b=d[2],w=o[0],E=o[1],I=o[2],D=g*I-b*E,N=b*w-f*I,j=f*E-g*w,Z=g*j-b*N,ne=b*D-f*j,oe=f*N-g*D,he=2*d[3];return N*=he,j*=he,ne*=2,oe*=2,c[0]=w+(D*=he)+(Z*=2),c[1]=E+N+ne,c[2]=I+j+oe,c}var G_,nu=gS,t$=MM,n$=U_;function LM(c,o,d){return c[0]=o[0]*d,c[1]=o[1]*d,c[2]=o[2]*d,c[3]=o[3]*d,c}function RM(c,o){var d=o[0],f=o[1],g=o[2],b=o[3],w=d*d+f*f+g*g+b*b;return w>0&&(w=1/Math.sqrt(w)),c[0]=d*w,c[1]=f*w,c[2]=g*w,c[3]=b*w,c}function Um(c,o,d){var f=o[0],g=o[1],b=o[2],w=o[3];return c[0]=d[0]*f+d[4]*g+d[8]*b+d[12]*w,c[1]=d[1]*f+d[5]*g+d[9]*b+d[13]*w,c[2]=d[2]*f+d[6]*g+d[10]*b+d[14]*w,c[3]=d[3]*f+d[7]*g+d[11]*b+d[15]*w,c}function OM(){var c=new wl(4);return wl!=Float32Array&&(c[0]=0,c[1]=0,c[2]=0),c[3]=1,c}function VM(c){return c[0]=0,c[1]=0,c[2]=0,c[3]=1,c}function BM(c,o,d){d*=.5;var f=o[0],g=o[1],b=o[2],w=o[3],E=Math.sin(d),I=Math.cos(d);return c[0]=f*I+w*E,c[1]=g*I+b*E,c[2]=b*I-g*E,c[3]=w*I-f*E,c}function FM(c,o,d){d*=.5;var f=o[0],g=o[1],b=o[2],w=o[3],E=Math.sin(d),I=Math.cos(d);return c[0]=f*I-b*E,c[1]=g*I+w*E,c[2]=b*I+f*E,c[3]=w*I-g*E,c}pS(),G_=new wl(4),wl!=Float32Array&&(G_[0]=0,G_[1]=0,G_[2]=0,G_[3]=0);var i$=RM;pS(),Bg(1,0,0),Bg(0,1,0),OM(),OM(),CM();const r$=at([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:zM}=r$,NM=at([{name:"a_pos_3",components:3,type:"Int16"}]);var q_=at([{name:"a_pos",type:"Int16",components:2}]);class _S{constructor(o,d){this.pos=o,this.dir=d}intersectsPlane(o,d,f){const g=Sc(d,this.dir);if(Math.abs(g)<1e-6)return!1;const b=((o[0]-this.pos[0])*d[0]+(o[1]-this.pos[1])*d[1]+(o[2]-this.pos[2])*d[2])/g;return f[0]=this.pos[0]+this.dir[0]*b,f[1]=this.pos[1]+this.dir[1]*b,f[2]=this.pos[2]+this.dir[2]*b,!0}closestPointOnSphere(o,d,f){if((function(ne,oe){var he=ne[0],Te=ne[1],Oe=ne[2],He=oe[0],Ve=oe[1],Ne=oe[2];return Math.abs(he-He)<=Kb*Math.max(1,Math.abs(he),Math.abs(He))&&Math.abs(Te-Ve)<=Kb*Math.max(1,Math.abs(Te),Math.abs(Ve))&&Math.abs(Oe-Ne)<=Kb*Math.max(1,Math.abs(Oe),Math.abs(Ne))})(this.pos,o)||d===0)return f[0]=f[1]=f[2]=0,!1;const[g,b,w]=this.dir,E=this.pos[0]-o[0],I=this.pos[1]-o[1],D=this.pos[2]-o[2],N=g*g+b*b+w*w,j=2*(E*g+I*b+D*w),Z=j*j-4*N*(E*E+I*I+D*D-d*d);if(Z<0){const ne=Math.max(-j/2,0),oe=E+g*ne,he=I+b*ne,Te=D+w*ne,Oe=Math.hypot(oe,he,Te);return f[0]=oe*d/Oe,f[1]=he*d/Oe,f[2]=Te*d/Oe,!1}{const ne=(-j-Math.sqrt(Z))/(2*N);if(ne<0){const oe=Math.hypot(E,I,D);return f[0]=E*d/oe,f[1]=I*d/oe,f[2]=D*d/oe,!1}return f[0]=E+g*ne,f[1]=I+b*ne,f[2]=D+w*ne,!0}}}class yS{constructor(o,d,f,g,b){this.TL=o,this.TR=d,this.BR=f,this.BL=g,this.horizon=b}static fromInvProjectionMatrix(o,d,f){const g=[-1,1,1],b=[1,1,1],w=[1,-1,1],E=[-1,-1,1],I=as(g,g,o),D=as(b,b,o),N=as(w,w,o),j=as(E,E,o);return new yS(I,D,N,j,d/f)}}class bS{constructor(o,d){this.points=o,this.planes=d}static fromInvProjectionMatrix(o,d,f,g){const b=Math.pow(2,f),w=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((I=>{const D=Um([],I,o),N=1/D[3]/d*b;return(function(j,Z,ne){return j[0]=Z[0]*ne[0],j[1]=Z[1]*ne[1],j[2]=Z[2]*ne[2],j[3]=Z[3]*ne[3],j})(D,D,[N,N,g?1/D[3]:N,N])})),E=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((I=>{const D=Sa([],vS([],nu([],w[I[0]],w[I[1]]),nu([],w[I[2]],w[I[1]]))),N=-Sc(D,w[I[1]]);return D.concat(N)}));return new bS(w,E)}}class Ea{static fromPoints(o){const d=[1/0,1/0,1/0],f=[-1/0,-1/0,-1/0];for(const g of o)j_(d,d,g),W_(f,f,g);return new Ea(d,f)}static applyTransform(o,d){const f=o.getCorners();for(let g=0;g<f.length;++g)as(f[g],f[g],d);return Ea.fromPoints(f)}constructor(o,d){this.min=o,this.max=d,this.center=Kl([],$d([],this.min,this.max),.5)}quadrant(o){const d=[o%2==0,o<2],f=PM(this.min),g=PM(this.max);for(let b=0;b<d.length;b++)f[b]=d[b]?this.min[b]:this.center[b],g[b]=d[b]?this.center[b]:this.max[b];return g[2]=this.max[2],new Ea(f,g)}distanceX(o){return Math.max(Math.min(this.max[0],o[0]),this.min[0])-o[0]}distanceY(o){return Math.max(Math.min(this.max[1],o[1]),this.min[1])-o[1]}distanceZ(o){return Math.max(Math.min(this.max[2],o[2]),this.min[2])-o[2]}getCorners(){const o=this.min,d=this.max;return[[o[0],o[1],o[2]],[d[0],o[1],o[2]],[d[0],d[1],o[2]],[o[0],d[1],o[2]],[o[0],o[1],d[2]],[d[0],o[1],d[2]],[d[0],d[1],d[2]],[o[0],d[1],d[2]]]}intersects(o){const d=this.getCorners();let f=!0;for(let g=0;g<o.planes.length;g++){const b=o.planes[g];let w=0;for(let E=0;E<d.length;E++)w+=Sc(b,d[E])+b[3]>=0;if(w===0)return 0;w!==d.length&&(f=!1)}if(f)return 2;for(let g=0;g<3;g++){let b=Number.MAX_VALUE,w=-Number.MAX_VALUE;for(let E=0;E<o.points.length;E++){const I=o.points[E][g]-this.min[g];b=Math.min(b,I),w=Math.max(w,I)}if(w<0||b>this.max[g]-this.min[g])return 0}return 1}}const xS=5,$M=6,Du=zn/Math.PI/2,s$=16383,jm=64,K_=[jm,32,16],Ec=-Du,Cc=Du,o$=[new Ea([Ec,Ec,Ec],[Cc,Cc,Cc]),new Ea([Ec,Ec,Ec],[0,0,Cc]),new Ea([0,Ec,Ec],[Cc,0,Cc]),new Ea([Ec,0,Ec],[0,Cc,Cc]),new Ea([0,0,Ec],[Cc,Cc,Cc])];function Yb(c){return c*Du/Z_}function UM(c,o,d,f=!0){const g=Kl([],c._camera.position,c.worldSize),b=[o,d,1,1];Um(b,b,c.pixelMatrixInverse),LM(b,b,1/b[3]);const w=Sa([],nu([],b,g)),E=c.globeMatrix,I=[E[12],E[13],E[14]],D=nu([],I,g),N=U_(D),j=Sa([],D),Z=c.worldSize/(2*Math.PI),ne=Sc(j,w),oe=Math.asin(Z/N);if(oe<Math.acos(ne)){if(!f)return null;const sn=[],It=[];Kl(sn,w,N/ne),Sa(It,nu(It,sn,D)),Sa(w,$d(w,D,Kl(w,It,Math.tan(oe)*N)))}const he=[];new _S(g,w).closestPointOnSphere(I,Z,he);const Te=Sa([],Cn(E,0)),Oe=Sa([],Cn(E,1)),He=Sa([],Cn(E,2)),Ve=Sc(Te,he),Ne=Sc(Oe,he),et=Sc(He,he),Ze=ke(Math.asin(-Ne/Z));let Tt=ke(Math.atan2(Ve,et));Tt=c.center.lng+(function(sn,It){const jt=(It-sn+180)%360-180;return jt<-180?jt+360:jt})(c.center.lng,Tt);const bt=Ru(Tt),Ft=De(Ou(Ze),0,1);return new $g(bt,Ft)}class a${constructor(o,d,f){this.a=nu([],o,f),this.b=nu([],d,f),this.center=f;const g=Sa([],this.a),b=Sa([],this.b);this.angle=Math.acos(Sc(g,b))}}function wS(c,o){if(c.angle===0)return null;let d;return d=c.a[o]===0?1/c.angle*.5*Math.PI:1/c.angle*Math.atan(c.b[o]/c.a[o]/Math.sin(c.angle)-1/Math.tan(c.angle)),d<0||d>1?null:(function(f,g,b,w){const E=Math.sin(b);return f*(Math.sin((1-w)*b)/E)+g*(Math.sin(w*b)/E)})(c.a[o],c.b[o],c.angle,De(d,0,1))+c.center[o]}function Lu(c){if(c.z<=1)return o$[c.z+2*c.y+c.x];const o=TS(Zb(c));return Ea.fromPoints(o)}function Wm(c,o,d){return Kl(c,c,1-d),H_(c,c,o,d)}function jM(c,o){const d=Ng(o.zoom);if(d===0)return Lu(c);const f=Zb(c),g=TS(f),b=Ru(f.getWest())*o.worldSize,w=Ru(f.getEast())*o.worldSize,E=Ou(f.getNorth())*o.worldSize,I=Ou(f.getSouth())*o.worldSize,D=[b,E,0],N=[w,E,0],j=[b,I,0],Z=[w,I,0],ne=fS([],o.globeMatrix);return as(D,D,ne),as(N,N,ne),as(j,j,ne),as(Z,Z,ne),g[0]=Wm(g[0],j,d),g[1]=Wm(g[1],Z,d),g[2]=Wm(g[2],N,d),g[3]=Wm(g[3],D,d),Ea.fromPoints(g)}function WM(c,o,d){for(const f of c)as(f,f,o),Kl(f,f,d)}function l$(c,o,d){const f=o/c.worldSize,g=c.globeMatrix;if(d.z<=1){const bt=Lu(d).getCorners();return WM(bt,g,f),Ea.fromPoints(bt)}const b=Zb(d),w=TS(b);WM(w,g,f);const E=Number.MAX_VALUE,I=[-E,-E,-E],D=[E,E,E];if(b.contains(c.center)){for(const sn of w)j_(D,D,sn),W_(I,I,sn);I[2]=0;const bt=c.point,Ft=[bt.x*f,bt.y*f,0];return j_(D,D,Ft),W_(I,I,Ft),new Ea(D,I)}const N=[g[12]*f,g[13]*f,g[14]*f],j=b.getCenter(),Z=De(c.center.lat,-Oo,Oo),ne=De(j.lat,-Oo,Oo),oe=Ru(c.center.lng),he=Ou(Z);let Te=oe-Ru(j.lng);const Oe=he-Ou(ne);Te>.5?Te-=1:Te<-.5&&(Te+=1);let He=0;Math.abs(Te)>Math.abs(Oe)?He=Te>=0?1:3:(He=Oe>=0?0:2,H_(N,N,[g[4]*f,g[5]*f,g[6]*f],-Math.sin(te(Oe>=0?b.getSouth():b.getNorth()))*Du));const Ve=w[He],Ne=w[(He+1)%4],et=new a$(Ve,Ne,N),Ze=[wS(et,0)||Ve[0],wS(et,1)||Ve[1],wS(et,2)||Ve[2]],Tt=Ng(c.zoom);if(Tt>0){const bt=(function({x:sn,y:It,z:jt},Wt,Qt,cn,Bt){const _n=1/(1<<jt);let kn=sn*_n,xn=kn+_n,ri=It*_n,un=ri+_n,Vn=0;const si=(kn+xn)/2-cn;return si>.5?Vn=-1:si<-.5&&(Vn=1),kn=((kn+Vn)*Wt-(cn*=Wt))*Qt+cn,xn=((xn+Vn)*Wt-cn)*Qt+cn,ri=(ri*Wt-(Bt*=Wt))*Qt+Bt,un=(un*Wt-Bt)*Qt+Bt,[[kn,un,0],[xn,un,0],[xn,ri,0],[kn,ri,0]]})(d,o,c._pixelsPerMercatorPixel,oe,he);for(let sn=0;sn<w.length;sn++)Wm(w[sn],bt[sn],Tt);const Ft=$d([],bt[He],bt[(He+1)%4]);Kl(Ft,Ft,.5),Wm(Ze,Ft,Tt)}for(const bt of w)j_(D,D,bt),W_(I,I,bt);return D[2]=Math.min(Ve[2],Ne[2]),j_(D,D,Ze),W_(I,I,Ze),new Ea(D,I)}function Zb({x:c,y:o,z:d}){const f=1/(1<<d),g=new ar(Xl(c*f),Ro((o+1)*f)),b=new ar(Xl((c+1)*f),Ro(o*f));return new rf(g,b)}function TS(c){const o=te(c.getNorth()),d=te(c.getSouth()),f=Math.cos(o),g=Math.cos(d),b=Math.sin(o),w=Math.sin(d),E=c.getWest(),I=c.getEast();return[Fg(g,w,E),Fg(g,w,I),Fg(f,b,I),Fg(f,b,E)]}function Fg(c,o,d,f=Du){return d=te(d),[c*Math.sin(d)*f,-o*f,c*Math.cos(d)*f]}function zg(c,o,d){return Fg(Math.cos(te(c)),Math.sin(te(c)),o,d)}function X_(c,o,d,f){const g=1<<d.z,b=(c/zn+d.x)/g;return zg(Ro((o/zn+d.y)/g),Xl(b),f)}function Jb({min:c,max:o}){return s$/Math.max(o[0]-c[0],o[1]-c[1],o[2]-c[2])}const HM=new Float64Array(16);function Y_(c){const o=Jb(c),d=IM(HM,[o,o,o]);return $_(d,d,((f=[])[0]=-(g=c.min)[0],f[1]=-g[1],f[2]=-g[2],f));var f,g}function SS(c){const o=(f=c.min,(d=HM)[0]=1,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=1,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=1,d[11]=0,d[12]=f[0],d[13]=f[1],d[14]=f[2],d[15]=1,d);var d,f;const g=1/Jb(c);return $m(o,o,[g,g,g])}function GM(c,o,d,f,g){const b=(function(I){const D=zn/(2*Math.PI);return I/(2*Math.PI)/D})(d),w=[c,o,-d/(2*Math.PI)],E=tu(new Float64Array(16));return $_(E,E,w),$m(E,E,[b,b,b]),mS(E,E,te(-g)),Xb(E,E,te(-f)),E}function Ng(c){return Ge(xS,$M,c)}function qM(c,o){const d=zg(o.lat,o.lng),f=(function(oe){const he=zg(oe._center.lat,oe._center.lng);let Te=vS([],Bg(0,1,0),he);const Oe=AM([],-oe.angle,he);Te=as(Te,Te,Oe),AM(Oe,-oe._pitch,Te);const He=Sa([],he);return Kl(He,He,Yb(oe.cameraToCenterDistance/oe.pixelsPerMeter)),as(He,He,Oe),$d([],he,He)})(c);return w=(g=gS([],f,d))[0],E=g[1],I=g[2],D=(b=d)[0],N=b[1],j=b[2],ne=(Z=Math.sqrt(w*w+E*E+I*I)*Math.sqrt(D*D+N*N+j*j))&&Sc(g,b)/Z,Math.acos(Math.min(Math.max(ne,-1),1));var g,b,w,E,I,D,N,j,Z,ne}function ES(c,o){return qM(c,o)>Math.PI/2*1.01}const KM=te(85),c$=Math.cos(KM),u$=Math.sin(KM),Z_=63710088e-1,XM=2*Math.PI*Z_;class sf{constructor(o,d){if(isNaN(o)||isNaN(d))throw new Error(`Invalid LngLat object: (${o}, ${d})`);if(this.lng=+o,this.lat=+d,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new sf(Ee(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(o){const d=Math.PI/180,f=this.lat*d,g=o.lat*d,b=Math.sin(f)*Math.sin(g)+Math.cos(f)*Math.cos(g)*Math.cos((o.lng-this.lng)*d);return Z_*Math.acos(Math.min(b,1))}toBounds(o=0){const d=360*o/40075017,f=d/Math.cos(Math.PI/180*this.lat);return new rf(new sf(this.lng-f,this.lat-d),new sf(this.lng+f,this.lat+d))}toEcef(o){const d=Yb(o);return zg(this.lat,this.lng,Du+d)}static convert(o){if(o instanceof sf)return o;if(Array.isArray(o)&&(o.length===2||o.length===3))return new sf(Number(o[0]),Number(o[1]));if(!Array.isArray(o)&&typeof o=="object"&&o!==null)return new sf(Number("lng"in o?o.lng:o.lon),Number(o.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}var ar=sf;function CS(c){return XM*Math.cos(c*Math.PI/180)}function Ru(c){return(180+c)/360}function Ou(c){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c*Math.PI/360)))/360}function iu(c,o){return c/CS(o)}function Xl(c){return 360*c-180}function Ro(c){return 360/Math.PI*Math.atan(Math.exp((180-360*c)*Math.PI/180))-90}function YM(c,o){return c*CS(Ro(o))}const Oo=85.051129;function ZM(c){return 1/Math.cos(c*Math.PI/180)}class $g{constructor(o,d,f=0){this.x=+o,this.y=+d,this.z=+f}static fromLngLat(o,d=0){const f=ar.convert(o);return new $g(Ru(f.lng),Ou(f.lat),iu(d,f.lat))}toLngLat(){return new ar(Xl(this.x),Ro(this.y))}toAltitude(){return YM(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/XM*ZM(Ro(this.y))}}function kS(c,o,d,f,g,b,w,E,I){const D=(o+f)/2,N=(d+g)/2,j=new W(D,N);E(j),(function(Z,ne,oe,he,Te,Oe){const He=oe-Te,Ve=he-Oe;return Math.abs((he-ne)*He-(oe-Z)*Ve)/Math.hypot(He,Ve)})(j.x,j.y,b.x,b.y,w.x,w.y)>=I?(kS(c,o,d,D,N,b,j,E,I),kS(c,D,N,f,g,j,w,E,I)):c.push(w)}function JM(c,o,d){let f=c[0],g=f.x,b=f.y;o(f);const w=[f];for(let E=1;E<c.length;E++){const I=c[E],{x:D,y:N}=I;o(I),kS(w,g,b,D,N,f,I,o,d),g=D,b=N,f=I}return w}function IS(c,o,d,f){if(f(o,d)){const g=o.add(d)._mult(.5);IS(c,o,g,f),IS(c,g,d,f)}else c.push(d)}function d$(c,o){let d=c[0];const f=[d];for(let g=1;g<c.length;g++){const b=c[g];IS(f,d,b,o),d=b}return f}const AS=Math.pow(2,14)-1,QM=-AS-1;function h$(c,o){const d=Math.round(c.x*o),f=Math.round(c.y*o);return c.x=De(d,QM,AS),c.y=De(f,QM,AS),(d<c.x||d>c.x+1||f<c.y||f>c.y+1)&&je("Geometry exceeds allowed extent, reduce your vector tile buffer size"),c}function Ud(c,o,d){const f=c.loadGeometry(),g=c.extent,b=zn/g;if(o&&d&&d.projection.isReprojectedInTileSpace){const w=1<<o.z,{scale:E,x:I,y:D,projection:N}=d,j=Z=>{const ne=Xl((o.x+Z.x/g)/w),oe=Ro((o.y+Z.y/g)/w),he=N.project(ne,oe);Z.x=(he.x*E-I)*g,Z.y=(he.y*E-D)*g};for(let Z=0;Z<f.length;Z++)if(c.type!==1)f[Z]=JM(f[Z],j,1);else{const ne=[];for(const oe of f[Z])oe.x<0||oe.x>=g||oe.y<0||oe.y>=g||(j(oe),ne.push(oe));f[Z]=ne}}for(const w of f)for(const E of w)h$(E,b);return f}function Hm(c,o){return{type:c.type,id:c.id,properties:c.properties,geometry:o?Ud(c):[]}}function Qb(c,o,d,f,g){c.emplaceBack(2*o+(f+1)/2,2*d+(g+1)/2)}function ex(c,o,d){c.emplaceBack(o.x,o.y,o.z,d[0]*16384,d[1]*16384,d[2]*16384)}class PS{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map((d=>d.id)),this.index=o.index,this.hasPattern=!1,this.projection=o.projection,this.layoutVertexArray=new qt,this.indexArray=new An,this.segments=new hs,this.programConfigurations=new zm(o.layers,o.zoom),this.stateDependentLayerIds=this.layers.filter((d=>d.isStateDependent())).map((d=>d.id))}populate(o,d,f,g){const b=this.layers[0],w=[];let E=null;b.type==="circle"&&(E=b.layout.get("circle-sort-key"));for(const{feature:D,id:N,index:j,sourceLayerIndex:Z}of o){const ne=this.layers[0]._featureFilter.needGeometry,oe=Hm(D,ne);if(!this.layers[0]._featureFilter.filter(new $(this.zoom),oe,f))continue;const he=E?E.evaluate(oe,{},f):void 0,Te={id:N,properties:D.properties,type:D.type,sourceLayerIndex:Z,index:j,geometry:ne?oe.geometry:Ud(D,f,g),patterns:{},sortKey:he};w.push(Te)}E&&w.sort(((D,N)=>D.sortKey-N.sortKey));let I=null;g.projection.name==="globe"&&(this.globeExtVertexArray=new Ht,I=g.projection);for(const D of w){const{geometry:N,index:j,sourceLayerIndex:Z}=D,ne=o[j].feature;this.addFeature(D,N,j,d.availableImages,f,I),d.featureIndex.insert(ne,N,j,Z,this.index)}}update(o,d,f,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,d,this.stateDependentLayers,f,g)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,J7.members),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=o.createVertexBuffer(this.globeExtVertexArray,Q7.members))),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(o,d,f,g,b,w){for(const E of d)for(const I of E){const D=I.x,N=I.y;if(D<0||D>=zn||N<0||N>=zn)continue;if(w){const ne=w.projectTilePoint(D,N,b),oe=w.upVector(b,D,N),he=this.globeExtVertexArray;ex(he,ne,oe),ex(he,ne,oe),ex(he,ne,oe),ex(he,ne,oe)}const j=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,o.sortKey),Z=j.vertexLength;Qb(this.layoutVertexArray,D,N,-1,-1),Qb(this.layoutVertexArray,D,N,1,-1),Qb(this.layoutVertexArray,D,N,1,1),Qb(this.layoutVertexArray,D,N,-1,1),this.indexArray.emplaceBack(Z,Z+1,Z+2),this.indexArray.emplaceBack(Z,Z+2,Z+3),j.vertexLength+=4,j.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,f,{},g,b)}}function eD(c,o){for(let d=0;d<c.length;d++)if(Gm(o,c[d]))return!0;for(let d=0;d<o.length;d++)if(Gm(c,o[d]))return!0;return!!MS(c,o)}function f$(c,o,d){return!!Gm(c,o)||!!DS(o,c,d)}function tD(c,o){if(c.length===1)return iD(o,c[0]);for(let d=0;d<o.length;d++){const f=o[d];for(let g=0;g<f.length;g++)if(Gm(c,f[g]))return!0}for(let d=0;d<c.length;d++)if(iD(o,c[d]))return!0;for(let d=0;d<o.length;d++)if(MS(c,o[d]))return!0;return!1}function m$(c,o,d){if(c.length>1){if(MS(c,o))return!0;for(let f=0;f<o.length;f++)if(DS(o[f],c,d))return!0}for(let f=0;f<c.length;f++)if(DS(c[f],o,d))return!0;return!1}function MS(c,o){if(c.length===0||o.length===0)return!1;for(let d=0;d<c.length-1;d++){const f=c[d],g=c[d+1];for(let b=0;b<o.length-1;b++)if(p$(f,g,o[b],o[b+1]))return!0}return!1}function p$(c,o,d,f){return Xe(c,d,f)!==Xe(o,d,f)&&Xe(c,o,d)!==Xe(c,o,f)}function DS(c,o,d){const f=d*d;if(o.length===1)return c.distSqr(o[0])<f;for(let g=1;g<o.length;g++)if(nD(c,o[g-1],o[g])<f)return!0;return!1}function nD(c,o,d){const f=o.distSqr(d);if(f===0)return c.distSqr(o);const g=((c.x-o.x)*(d.x-o.x)+(c.y-o.y)*(d.y-o.y))/f;return c.distSqr(g<0?o:g>1?d:d.sub(o)._mult(g)._add(o))}function iD(c,o){let d,f,g,b=!1;for(let w=0;w<c.length;w++){d=c[w];for(let E=0,I=d.length-1;E<d.length;I=E++)f=d[E],g=d[I],f.y>o.y!=g.y>o.y&&o.x<(g.x-f.x)*(o.y-f.y)/(g.y-f.y)+f.x&&(b=!b)}return b}function Gm(c,o){let d=!1;for(let f=0,g=c.length-1;f<c.length;g=f++){const b=c[f],w=c[g];b.y>o.y!=w.y>o.y&&o.x<(w.x-b.x)*(o.y-b.y)/(w.y-b.y)+b.x&&(d=!d)}return d}function rD(c,o,d,f,g){for(const w of c)if(o<=w.x&&d<=w.y&&f>=w.x&&g>=w.y)return!0;const b=[new W(o,d),new W(o,g),new W(f,g),new W(f,d)];if(c.length>2){for(const w of b)if(Gm(c,w))return!0}for(let w=0;w<c.length-1;w++)if(g$(c[w],c[w+1],b))return!0;return!1}function g$(c,o,d){const f=d[0],g=d[2];if(c.x<f.x&&o.x<f.x||c.x>g.x&&o.x>g.x||c.y<f.y&&o.y<f.y||c.y>g.y&&o.y>g.y)return!1;const b=Xe(c,o,d[0]);return b!==Xe(c,o,d[1])||b!==Xe(c,o,d[2])||b!==Xe(c,o,d[3])}function Ug(c,o,d){const f=o.paint.get(c).value;return f.kind==="constant"?f.value:d.programConfigurations.get(o.id).getMaxValue(c)}function tx(c){return Math.sqrt(c[0]*c[0]+c[1]*c[1])}function sD(c,o,d,f,g){if(!o[0]&&!o[1])return c;const b=W.convert(o)._mult(g);d==="viewport"&&b._rotate(-f);const w=[];for(let E=0;E<c.length;E++)w.push(c[E].sub(b));return w}function oD(c,o,d,f){const g=W.convert(c)._mult(f);return o==="viewport"&&g._rotate(-d),g}Sn(PS,"CircleBucket",{omit:["layers"]});const v$=new Le({"circle-sort-key":new ye(Ot.layout_circle["circle-sort-key"])});var _$={paint:new Le({"circle-radius":new ye(Ot.paint_circle["circle-radius"]),"circle-color":new ye(Ot.paint_circle["circle-color"]),"circle-blur":new ye(Ot.paint_circle["circle-blur"]),"circle-opacity":new ye(Ot.paint_circle["circle-opacity"]),"circle-translate":new le(Ot.paint_circle["circle-translate"]),"circle-translate-anchor":new le(Ot.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new le(Ot.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new le(Ot.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new ye(Ot.paint_circle["circle-stroke-width"]),"circle-stroke-color":new ye(Ot.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new ye(Ot.paint_circle["circle-stroke-opacity"])}),layout:v$};function aD(c,o,d,f,g,b,w,E,I){if(b&&c.queryGeometry.isAboveHorizon)return!1;b&&(I*=c.pixelToTileUnitsFactor);const D=c.tileID.canonical,N=d.projection.upVectorScale(D,d.center.lat,d.worldSize).metersToTile;for(const j of o)for(const Z of j){const ne=Z.add(E),oe=g&&d.elevation?d.elevation.exaggeration()*g.getElevationAt(ne.x,ne.y,!0):0,he=d.projection.projectTilePoint(ne.x,ne.y,D);if(oe>0){const Ve=d.projection.upVector(D,ne.x,ne.y);he.x+=Ve[0]*N*oe,he.y+=Ve[1]*N*oe,he.z+=Ve[2]*N*oe}const Te=b?ne:y$(he.x,he.y,he.z,f),Oe=b?c.tilespaceRays.map((Ve=>x$(Ve,oe))):c.queryGeometry.screenGeometry,He=Um([],[he.x,he.y,he.z,1],f);if(!w&&b?I*=He[3]/d.cameraToCenterDistance:w&&!b&&(I*=d.cameraToCenterDistance/He[3]),b){const Ve=Ro((Z.y/zn+D.y)/(1<<D.z));I/=d.projection.pixelsPerMeter(Ve,1)/iu(1,Ve)}if(f$(Oe,Te,I))return!0}return!1}function y$(c,o,d,f){const g=Um([],[c,o,d,1],f);return new W(g[0]/g[3],g[1]/g[3])}const lD=Bg(0,0,0),b$=Bg(0,0,1);function x$(c,o){const d=pS();return lD[2]=o,c.intersectsPlane(lD,b$,d),new W(d[0],d[1])}class cD extends PS{}function uD(c,{width:o,height:d},f,g){if(g){if(g instanceof Uint8ClampedArray)g=new Uint8Array(g.buffer);else if(g.length!==o*d*f)throw new RangeError("mismatched image size")}else g=new Uint8Array(o*d*f);return c.width=o,c.height=d,c.data=g,c}function dD(c,o,d){const{width:f,height:g}=o;f===c.width&&g===c.height||(LS(c,o,{x:0,y:0},{x:0,y:0},{width:Math.min(c.width,f),height:Math.min(c.height,g)},d),c.width=f,c.height=g,c.data=o.data)}function LS(c,o,d,f,g,b){if(g.width===0||g.height===0)return o;if(g.width>c.width||g.height>c.height||d.x>c.width-g.width||d.y>c.height-g.height)throw new RangeError("out of range source coordinates for image copy");if(g.width>o.width||g.height>o.height||f.x>o.width-g.width||f.y>o.height-g.height)throw new RangeError("out of range destination coordinates for image copy");const w=c.data,E=o.data;for(let I=0;I<g.height;I++){const D=((d.y+I)*c.width+d.x)*b,N=((f.y+I)*o.width+f.x)*b;for(let j=0;j<g.width*b;j++)E[N+j]=w[D+j]}return o}Sn(cD,"HeatmapBucket",{omit:["layers"]});class jd{constructor(o,d){uD(this,o,1,d)}resize(o){dD(this,new jd(o),1)}clone(){return new jd({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(o,d,f,g,b){LS(o,d,f,g,b,1)}}class Tl{constructor(o,d){uD(this,o,4,d)}resize(o){dD(this,new Tl(o),4)}replace(o,d){d?this.data.set(o):this.data=o instanceof Uint8ClampedArray?new Uint8Array(o.buffer):o}clone(){return new Tl({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(o,d,f,g,b){LS(o,d,f,g,b,4)}}Sn(jd,"AlphaImage"),Sn(Tl,"RGBAImage");var w$={paint:new Le({"heatmap-radius":new ye(Ot.paint_heatmap["heatmap-radius"]),"heatmap-weight":new ye(Ot.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new le(Ot.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Pe(Ot.paint_heatmap["heatmap-color"]),"heatmap-opacity":new le(Ot.paint_heatmap["heatmap-opacity"])})};function RS(c){const o={},d=c.resolution||256,f=c.clips?c.clips.length:1,g=c.image||new Tl({width:d,height:f}),b=(w,E,I)=>{o[c.evaluationKey]=I;const D=c.expression.evaluate(o);g.data[w+E+0]=Math.floor(255*D.r/D.a),g.data[w+E+1]=Math.floor(255*D.g/D.a),g.data[w+E+2]=Math.floor(255*D.b/D.a),g.data[w+E+3]=Math.floor(255*D.a)};if(c.clips)for(let w=0,E=0;w<f;++w,E+=4*d)for(let I=0,D=0;I<d;I++,D+=4){const N=I/(d-1),{start:j,end:Z}=c.clips[w];b(E,D,j*(1-N)+Z*N)}else for(let w=0,E=0;w<d;w++,E+=4)b(0,E,w/(d-1));return g}var T$={paint:new Le({"hillshade-illumination-direction":new le(Ot.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new le(Ot.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new le(Ot.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new le(Ot.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new le(Ot.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new le(Ot.paint_hillshade["hillshade-accent-color"])})};const S$=at([{name:"a_pos",components:2,type:"Int16"}],4),{members:E$}=S$;var OS={exports:{}};function nx(c,o,d){d=d||2;var f,g,b,w,E,I,D,N=o&&o.length,j=N?o[0]*d:c.length,Z=hD(c,0,j,d,!0),ne=[];if(!Z||Z.next===Z.prev)return ne;if(N&&(Z=(function(he,Te,Oe,He){var Ve,Ne,et,Ze=[];for(Ve=0,Ne=Te.length;Ve<Ne;Ve++)(et=hD(he,Te[Ve]*He,Ve<Ne-1?Te[Ve+1]*He:he.length,He,!1))===et.next&&(et.steiner=!0),Ze.push(L$(et));for(Ze.sort(P$),Ve=0;Ve<Ze.length;Ve++)Oe=M$(Ze[Ve],Oe);return Oe})(c,o,Z,d)),c.length>80*d){f=b=c[0],g=w=c[1];for(var oe=d;oe<j;oe+=d)(E=c[oe])<f&&(f=E),(I=c[oe+1])<g&&(g=I),E>b&&(b=E),I>w&&(w=I);D=(D=Math.max(b-f,w-g))!==0?32767/D:0}return J_(Z,ne,d,f,g,D,0),ne}function hD(c,o,d,f,g){var b,w;if(g===FS(c,o,d,f)>0)for(b=o;b<d;b+=f)w=pD(b,c[b],c[b+1],w);else for(b=d-f;b>=o;b-=f)w=pD(b,c[b],c[b+1],w);return w&&ix(w,w.next)&&(ey(w),w=w.next),w}function qm(c,o){if(!c)return c;o||(o=c);var d,f=c;do if(d=!1,f.steiner||!ix(f,f.next)&&fs(f.prev,f,f.next)!==0)f=f.next;else{if(ey(f),(f=o=f.prev)===f.next)break;d=!0}while(d||f!==o);return o}function J_(c,o,d,f,g,b,w){if(c){!w&&b&&(function(N,j,Z,ne){var oe=N;do oe.z===0&&(oe.z=VS(oe.x,oe.y,j,Z,ne)),oe.prevZ=oe.prev,oe.nextZ=oe.next,oe=oe.next;while(oe!==N);oe.prevZ.nextZ=null,oe.prevZ=null,(function(he){var Te,Oe,He,Ve,Ne,et,Ze,Tt,bt=1;do{for(Oe=he,he=null,Ne=null,et=0;Oe;){for(et++,He=Oe,Ze=0,Te=0;Te<bt&&(Ze++,He=He.nextZ);Te++);for(Tt=bt;Ze>0||Tt>0&&He;)Ze!==0&&(Tt===0||!He||Oe.z<=He.z)?(Ve=Oe,Oe=Oe.nextZ,Ze--):(Ve=He,He=He.nextZ,Tt--),Ne?Ne.nextZ=Ve:he=Ve,Ve.prevZ=Ne,Ne=Ve;Oe=He}Ne.nextZ=null,bt*=2}while(et>1)})(oe)})(c,f,g,b);for(var E,I,D=c;c.prev!==c.next;)if(E=c.prev,I=c.next,b?k$(c,f,g,b):C$(c))o.push(E.i/d|0),o.push(c.i/d|0),o.push(I.i/d|0),ey(c),c=I.next,D=I.next;else if((c=I)===D){w?w===1?J_(c=I$(qm(c),o,d),o,d,f,g,b,2):w===2&&A$(c,o,d,f,g,b):J_(qm(c),o,d,f,g,b,1);break}}}function C$(c){var o=c.prev,d=c,f=c.next;if(fs(o,d,f)>=0)return!1;for(var g=o.x,b=d.x,w=f.x,E=o.y,I=d.y,D=f.y,N=g<b?g<w?g:w:b<w?b:w,j=E<I?E<D?E:D:I<D?I:D,Z=g>b?g>w?g:w:b>w?b:w,ne=E>I?E>D?E:D:I>D?I:D,oe=f.next;oe!==o;){if(oe.x>=N&&oe.x<=Z&&oe.y>=j&&oe.y<=ne&&jg(g,E,b,I,w,D,oe.x,oe.y)&&fs(oe.prev,oe,oe.next)>=0)return!1;oe=oe.next}return!0}function k$(c,o,d,f){var g=c.prev,b=c,w=c.next;if(fs(g,b,w)>=0)return!1;for(var E=g.x,I=b.x,D=w.x,N=g.y,j=b.y,Z=w.y,ne=E<I?E<D?E:D:I<D?I:D,oe=N<j?N<Z?N:Z:j<Z?j:Z,he=E>I?E>D?E:D:I>D?I:D,Te=N>j?N>Z?N:Z:j>Z?j:Z,Oe=VS(ne,oe,o,d,f),He=VS(he,Te,o,d,f),Ve=c.prevZ,Ne=c.nextZ;Ve&&Ve.z>=Oe&&Ne&&Ne.z<=He;){if(Ve.x>=ne&&Ve.x<=he&&Ve.y>=oe&&Ve.y<=Te&&Ve!==g&&Ve!==w&&jg(E,N,I,j,D,Z,Ve.x,Ve.y)&&fs(Ve.prev,Ve,Ve.next)>=0||(Ve=Ve.prevZ,Ne.x>=ne&&Ne.x<=he&&Ne.y>=oe&&Ne.y<=Te&&Ne!==g&&Ne!==w&&jg(E,N,I,j,D,Z,Ne.x,Ne.y)&&fs(Ne.prev,Ne,Ne.next)>=0))return!1;Ne=Ne.nextZ}for(;Ve&&Ve.z>=Oe;){if(Ve.x>=ne&&Ve.x<=he&&Ve.y>=oe&&Ve.y<=Te&&Ve!==g&&Ve!==w&&jg(E,N,I,j,D,Z,Ve.x,Ve.y)&&fs(Ve.prev,Ve,Ve.next)>=0)return!1;Ve=Ve.prevZ}for(;Ne&&Ne.z<=He;){if(Ne.x>=ne&&Ne.x<=he&&Ne.y>=oe&&Ne.y<=Te&&Ne!==g&&Ne!==w&&jg(E,N,I,j,D,Z,Ne.x,Ne.y)&&fs(Ne.prev,Ne,Ne.next)>=0)return!1;Ne=Ne.nextZ}return!0}function I$(c,o,d){var f=c;do{var g=f.prev,b=f.next.next;!ix(g,b)&&fD(g,f,f.next,b)&&Q_(g,b)&&Q_(b,g)&&(o.push(g.i/d|0),o.push(f.i/d|0),o.push(b.i/d|0),ey(f),ey(f.next),f=c=b),f=f.next}while(f!==c);return qm(f)}function A$(c,o,d,f,g,b){var w=c;do{for(var E=w.next.next;E!==w.prev;){if(w.i!==E.i&&R$(w,E)){var I=mD(w,E);return w=qm(w,w.next),I=qm(I,I.next),J_(w,o,d,f,g,b,0),void J_(I,o,d,f,g,b,0)}E=E.next}w=w.next}while(w!==c)}function P$(c,o){return c.x-o.x}function M$(c,o){var d=(function(g,b){var w,E=b,I=g.x,D=g.y,N=-1/0;do{if(D<=E.y&&D>=E.next.y&&E.next.y!==E.y){var j=E.x+(D-E.y)*(E.next.x-E.x)/(E.next.y-E.y);if(j<=I&&j>N&&(N=j,w=E.x<E.next.x?E:E.next,j===I))return w}E=E.next}while(E!==b);if(!w)return null;var Z,ne=w,oe=w.x,he=w.y,Te=1/0;E=w;do I>=E.x&&E.x>=oe&&I!==E.x&&jg(D<he?I:N,D,oe,he,D<he?N:I,D,E.x,E.y)&&(Z=Math.abs(D-E.y)/(I-E.x),Q_(E,g)&&(Z<Te||Z===Te&&(E.x>w.x||E.x===w.x&&D$(w,E)))&&(w=E,Te=Z)),E=E.next;while(E!==ne);return w})(c,o);if(!d)return o;var f=mD(d,c);return qm(f,f.next),qm(d,d.next)}function D$(c,o){return fs(c.prev,c,o.prev)<0&&fs(o.next,c,c.next)<0}function VS(c,o,d,f,g){return(c=1431655765&((c=858993459&((c=252645135&((c=16711935&((c=(c-d)*g|0)|c<<8))|c<<4))|c<<2))|c<<1))|(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-f)*g|0)|o<<8))|o<<4))|o<<2))|o<<1))<<1}function L$(c){var o=c,d=c;do(o.x<d.x||o.x===d.x&&o.y<d.y)&&(d=o),o=o.next;while(o!==c);return d}function jg(c,o,d,f,g,b,w,E){return(g-w)*(o-E)>=(c-w)*(b-E)&&(c-w)*(f-E)>=(d-w)*(o-E)&&(d-w)*(b-E)>=(g-w)*(f-E)}function R$(c,o){return c.next.i!==o.i&&c.prev.i!==o.i&&!(function(d,f){var g=d;do{if(g.i!==d.i&&g.next.i!==d.i&&g.i!==f.i&&g.next.i!==f.i&&fD(g,g.next,d,f))return!0;g=g.next}while(g!==d);return!1})(c,o)&&(Q_(c,o)&&Q_(o,c)&&(function(d,f){var g=d,b=!1,w=(d.x+f.x)/2,E=(d.y+f.y)/2;do g.y>E!=g.next.y>E&&g.next.y!==g.y&&w<(g.next.x-g.x)*(E-g.y)/(g.next.y-g.y)+g.x&&(b=!b),g=g.next;while(g!==d);return b})(c,o)&&(fs(c.prev,c,o.prev)||fs(c,o.prev,o))||ix(c,o)&&fs(c.prev,c,c.next)>0&&fs(o.prev,o,o.next)>0)}function fs(c,o,d){return(o.y-c.y)*(d.x-o.x)-(o.x-c.x)*(d.y-o.y)}function ix(c,o){return c.x===o.x&&c.y===o.y}function fD(c,o,d,f){var g=sx(fs(c,o,d)),b=sx(fs(c,o,f)),w=sx(fs(d,f,c)),E=sx(fs(d,f,o));return g!==b&&w!==E||!(g!==0||!rx(c,d,o))||!(b!==0||!rx(c,f,o))||!(w!==0||!rx(d,c,f))||!(E!==0||!rx(d,o,f))}function rx(c,o,d){return o.x<=Math.max(c.x,d.x)&&o.x>=Math.min(c.x,d.x)&&o.y<=Math.max(c.y,d.y)&&o.y>=Math.min(c.y,d.y)}function sx(c){return c>0?1:c<0?-1:0}function Q_(c,o){return fs(c.prev,c,c.next)<0?fs(c,o,c.next)>=0&&fs(c,c.prev,o)>=0:fs(c,o,c.prev)<0||fs(c,c.next,o)<0}function mD(c,o){var d=new BS(c.i,c.x,c.y),f=new BS(o.i,o.x,o.y),g=c.next,b=o.prev;return c.next=o,o.prev=c,d.next=g,g.prev=d,f.next=d,d.prev=f,b.next=f,f.prev=b,f}function pD(c,o,d,f){var g=new BS(c,o,d);return f?(g.next=f.next,g.prev=f,f.next.prev=g,f.next=g):(g.prev=g,g.next=g),g}function ey(c){c.next.prev=c.prev,c.prev.next=c.next,c.prevZ&&(c.prevZ.nextZ=c.nextZ),c.nextZ&&(c.nextZ.prevZ=c.prevZ)}function BS(c,o,d){this.i=c,this.x=o,this.y=d,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function FS(c,o,d,f){for(var g=0,b=o,w=d-f;b<d;b+=f)g+=(c[w]-c[b])*(c[b+1]+c[w+1]),w=b;return g}OS.exports=nx,OS.exports.default=nx,nx.deviation=function(c,o,d,f){var g=o&&o.length,b=Math.abs(FS(c,0,g?o[0]*d:c.length,d));if(g)for(var w=0,E=o.length;w<E;w++)b-=Math.abs(FS(c,o[w]*d,w<E-1?o[w+1]*d:c.length,d));var I=0;for(w=0;w<f.length;w+=3){var D=f[w]*d,N=f[w+1]*d,j=f[w+2]*d;I+=Math.abs((c[D]-c[j])*(c[N+1]-c[D+1])-(c[D]-c[N])*(c[j+1]-c[D+1]))}return b===0&&I===0?0:Math.abs((I-b)/b)},nx.flatten=function(c){for(var o=c[0][0].length,d={vertices:[],holes:[],dimensions:o},f=0,g=0;g<c.length;g++){for(var b=0;b<c[g].length;b++)for(var w=0;w<o;w++)d.vertices.push(c[g][b][w]);g>0&&d.holes.push(f+=c[g-1].length)}return d};var zS=Y(OS.exports);function O$(c,o,d,f,g){gD(c,o,d,f||c.length-1,g||V$)}function gD(c,o,d,f,g){for(;f>d;){if(f-d>600){var b=f-d+1,w=o-d+1,E=Math.log(b),I=.5*Math.exp(2*E/3),D=.5*Math.sqrt(E*I*(b-I)/b)*(w-b/2<0?-1:1);gD(c,o,Math.max(d,Math.floor(o-w*I/b+D)),Math.min(f,Math.floor(o+(b-w)*I/b+D)),g)}var N=c[o],j=d,Z=f;for(ty(c,d,o),g(c[f],N)>0&&ty(c,d,f);j<Z;){for(ty(c,j,Z),j++,Z--;g(c[j],N)<0;)j++;for(;g(c[Z],N)>0;)Z--}g(c[d],N)===0?ty(c,d,Z):ty(c,++Z,f),Z<=o&&(d=Z+1),o<=Z&&(f=Z-1)}}function ty(c,o,d){var f=c[o];c[o]=c[d],c[d]=f}function V$(c,o){return c<o?-1:c>o?1:0}function NS(c,o){const d=c.length;if(d<=1)return[c];const f=[];let g,b;for(let w=0;w<d;w++){const E=yt(c[w]);E!==0&&(c[w].area=Math.abs(E),b===void 0&&(b=E<0),b===E<0?(g&&f.push(g),g=[c[w]]):g.push(c[w]))}if(g&&f.push(g),o>1)for(let w=0;w<f.length;w++)f[w].length<=o||(O$(f[w],o,1,f[w].length-1,B$),f[w]=f[w].slice(0,o));return f}function B$(c,o){return o.area-c.area}function $S(c,o,d){const f=d.patternDependencies;let g=!1;for(const b of o){const w=b.paint.get(`${c}-pattern`);w.isConstant()||(g=!0);const E=w.constantOr(null);E&&(g=!0,f[E]=!0)}return g}function US(c,o,d,f,g){const b=g.patternDependencies;for(const w of o){const E=w.paint.get(`${c}-pattern`).value;if(E.kind!=="constant"){let I=E.evaluate({zoom:f},d,{},g.availableImages);I=I&&I.name?I.name:I,b[I]=!0,d.patterns[w.id]=I}}return d}class ox{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map((d=>d.id)),this.index=o.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new qt,this.indexArray=new An,this.indexArray2=new Ps,this.programConfigurations=new zm(o.layers,o.zoom),this.segments=new hs,this.segments2=new hs,this.stateDependentLayerIds=this.layers.filter((d=>d.isStateDependent())).map((d=>d.id)),this.projection=o.projection}populate(o,d,f,g){this.hasPattern=$S("fill",this.layers,d);const b=this.layers[0].layout.get("fill-sort-key"),w=[];for(const{feature:E,id:I,index:D,sourceLayerIndex:N}of o){const j=this.layers[0]._featureFilter.needGeometry,Z=Hm(E,j);if(!this.layers[0]._featureFilter.filter(new $(this.zoom),Z,f))continue;const ne=b?b.evaluate(Z,{},f,d.availableImages):void 0,oe={id:I,properties:E.properties,type:E.type,sourceLayerIndex:N,index:D,geometry:j?Z.geometry:Ud(E,f,g),patterns:{},sortKey:ne};w.push(oe)}b&&w.sort(((E,I)=>E.sortKey-I.sortKey));for(const E of w){const{geometry:I,index:D,sourceLayerIndex:N}=E;if(this.hasPattern){const j=US("fill",this.layers,E,this.zoom,d);this.patternFeatures.push(j)}else this.addFeature(E,I,D,f,{},d.availableImages);d.featureIndex.insert(o[D].feature,I,D,N,this.index)}}update(o,d,f,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,d,this.stateDependentLayers,f,g)}addFeatures(o,d,f,g,b){for(const w of this.patternFeatures)this.addFeature(w,w.geometry,w.index,d,f,g)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,E$),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.indexBuffer2=o.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(o,d,f,g,b,w=[]){for(const E of NS(d,500)){let I=0;for(const oe of E)I+=oe.length;const D=this.segments.prepareSegment(I,this.layoutVertexArray,this.indexArray),N=D.vertexLength,j=[],Z=[];for(const oe of E){if(oe.length===0)continue;oe!==E[0]&&Z.push(j.length/2);const he=this.segments2.prepareSegment(oe.length,this.layoutVertexArray,this.indexArray2),Te=he.vertexLength;this.layoutVertexArray.emplaceBack(oe[0].x,oe[0].y),this.indexArray2.emplaceBack(Te+oe.length-1,Te),j.push(oe[0].x),j.push(oe[0].y);for(let Oe=1;Oe<oe.length;Oe++)this.layoutVertexArray.emplaceBack(oe[Oe].x,oe[Oe].y),this.indexArray2.emplaceBack(Te+Oe-1,Te+Oe),j.push(oe[Oe].x),j.push(oe[Oe].y);he.vertexLength+=oe.length,he.primitiveLength+=oe.length}const ne=zS(j,Z);for(let oe=0;oe<ne.length;oe+=3)this.indexArray.emplaceBack(N+ne[oe],N+ne[oe+1],N+ne[oe+2]);D.vertexLength+=I,D.primitiveLength+=ne.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,f,b,w,g)}}Sn(ox,"FillBucket",{omit:["layers","patternFeatures"]});const F$=new Le({"fill-sort-key":new ye(Ot.layout_fill["fill-sort-key"])});var z$={paint:new Le({"fill-antialias":new le(Ot.paint_fill["fill-antialias"]),"fill-opacity":new ye(Ot.paint_fill["fill-opacity"]),"fill-color":new ye(Ot.paint_fill["fill-color"]),"fill-outline-color":new ye(Ot.paint_fill["fill-outline-color"]),"fill-translate":new le(Ot.paint_fill["fill-translate"]),"fill-translate-anchor":new le(Ot.paint_fill["fill-translate-anchor"]),"fill-pattern":new ye(Ot.paint_fill["fill-pattern"])}),layout:F$};const N$=at([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),$$=at([{name:"a_centroid_pos",components:2,type:"Uint16"}]),U$=at([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:j$}=N$;var ax={},W$=U,vD=Wg;function Wg(c,o,d,f,g){this.properties={},this.extent=d,this.type=0,this._pbf=c,this._geometry=-1,this._keys=f,this._values=g,c.readFields(H$,this,o)}function H$(c,o,d){c==1?o.id=d.readVarint():c==2?(function(f,g){for(var b=f.readVarint()+f.pos;f.pos<b;){var w=g._keys[f.readVarint()],E=g._values[f.readVarint()];g.properties[w]=E}})(d,o):c==3?o.type=d.readVarint():c==4&&(o._geometry=d.pos)}function G$(c){for(var o,d,f=0,g=0,b=c.length,w=b-1;g<b;w=g++)f+=((d=c[w]).x-(o=c[g]).x)*(o.y+d.y);return f}Wg.types=["Unknown","Point","LineString","Polygon"],Wg.prototype.loadGeometry=function(){var c=this._pbf;c.pos=this._geometry;for(var o,d=c.readVarint()+c.pos,f=1,g=0,b=0,w=0,E=[];c.pos<d;){if(g<=0){var I=c.readVarint();f=7&I,g=I>>3}if(g--,f===1||f===2)b+=c.readSVarint(),w+=c.readSVarint(),f===1&&(o&&E.push(o),o=[]),o.push(new W$(b,w));else{if(f!==7)throw new Error("unknown command "+f);o&&o.push(o[0].clone())}}return o&&E.push(o),E},Wg.prototype.bbox=function(){var c=this._pbf;c.pos=this._geometry;for(var o=c.readVarint()+c.pos,d=1,f=0,g=0,b=0,w=1/0,E=-1/0,I=1/0,D=-1/0;c.pos<o;){if(f<=0){var N=c.readVarint();d=7&N,f=N>>3}if(f--,d===1||d===2)(g+=c.readSVarint())<w&&(w=g),g>E&&(E=g),(b+=c.readSVarint())<I&&(I=b),b>D&&(D=b);else if(d!==7)throw new Error("unknown command "+d)}return[w,I,E,D]},Wg.prototype.toGeoJSON=function(c,o,d){var f,g,b=this.extent*Math.pow(2,d),w=this.extent*c,E=this.extent*o,I=this.loadGeometry(),D=Wg.types[this.type];function N(ne){for(var oe=0;oe<ne.length;oe++){var he=ne[oe];ne[oe]=[360*(he.x+w)/b-180,360/Math.PI*Math.atan(Math.exp((180-360*(he.y+E)/b)*Math.PI/180))-90]}}switch(this.type){case 1:var j=[];for(f=0;f<I.length;f++)j[f]=I[f][0];N(I=j);break;case 2:for(f=0;f<I.length;f++)N(I[f]);break;case 3:for(I=(function(ne){var oe=ne.length;if(oe<=1)return[ne];for(var he,Te,Oe=[],He=0;He<oe;He++){var Ve=G$(ne[He]);Ve!==0&&(Te===void 0&&(Te=Ve<0),Te===Ve<0?(he&&Oe.push(he),he=[ne[He]]):he.push(ne[He]))}return he&&Oe.push(he),Oe})(I),f=0;f<I.length;f++)for(g=0;g<I[f].length;g++)N(I[f][g])}I.length===1?I=I[0]:D="Multi"+D;var Z={type:"Feature",geometry:{type:D,coordinates:I},properties:this.properties};return"id"in this&&(Z.id=this.id),Z};var q$=vD,_D=yD;function yD(c,o){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=c,this._keys=[],this._values=[],this._features=[],c.readFields(K$,this,o),this.length=this._features.length}function K$(c,o,d){c===15?o.version=d.readVarint():c===1?o.name=d.readString():c===5?o.extent=d.readVarint():c===2?o._features.push(d.pos):c===3?o._keys.push(d.readString()):c===4&&o._values.push((function(f){for(var g=null,b=f.readVarint()+f.pos;f.pos<b;){var w=f.readVarint()>>3;g=w===1?f.readString():w===2?f.readFloat():w===3?f.readDouble():w===4?f.readVarint64():w===5?f.readVarint():w===6?f.readSVarint():w===7?f.readBoolean():null}return g})(d))}yD.prototype.feature=function(c){if(c<0||c>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[c];var o=this._pbf.readVarint()+this._pbf.pos;return new q$(this._pbf,o,this.extent,this._keys,this._values)};var X$=_D;function Y$(c,o,d){if(c===3){var f=new X$(d,d.readVarint()+d.pos);f.length&&(o[f.name]=f)}}var jS=ax.VectorTile=function(c,o){this.layers=c.readFields(Y$,{},o)},lx=ax.VectorTileFeature=vD;function cx(c,o,d,f){const g=[],b=f===0?(w,E,I,D,N,j)=>{w.push(new W(j,I+(j-E)/(D-E)*(N-I)))}:(w,E,I,D,N,j)=>{w.push(new W(E+(j-I)/(N-I)*(D-E),j))};for(const w of c){const E=[];for(const I of w){if(I.length<=2)continue;const D=[];for(let Z=0;Z<I.length-1;Z++){const ne=I[Z].x,oe=I[Z].y,he=I[Z+1].x,Te=I[Z+1].y,Oe=f===0?ne:oe,He=f===0?he:Te;Oe<o?He>o&&b(D,ne,oe,he,Te,o):Oe>d?He<d&&b(D,ne,oe,he,Te,d):D.push(I[Z]),He<o&&Oe>=o&&b(D,ne,oe,he,Te,o),He>d&&Oe<=d&&b(D,ne,oe,he,Te,d)}let N=I[I.length-1];const j=f===0?N.x:N.y;j>=o&&j<=d&&D.push(N),D.length&&(N=D[D.length-1],D[0].x===N.x&&D[0].y===N.y||D.push(D[0]),E.push(D))}E.length&&g.push(E)}return g}ax.VectorTileLayer=_D;const Z$=lx.types,J$=Math.pow(2,13);function ny(c,o,d,f,g,b,w,E){c.emplaceBack((o<<1)+w,(d<<1)+b,(Math.floor(f*J$)<<1)+g,Math.round(E))}function iy(c,o,d){c.emplaceBack(o.x,o.y,o.z,d[0]*16384,d[1]*16384,d[2]*16384)}class bD{constructor(){this.acc=new W(0,0),this.polyCount=[]}startRing(o){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new W(o.x,o.y),this.max=new W(o.x,o.y))}append(o,d){this.currentPolyCount.edges++,this.acc._add(o);const f=this.min,g=this.max;o.x<f.x?f.x=o.x:o.x>g.x&&(g.x=o.x),o.y<f.y?f.y=o.y:o.y>g.y&&(g.y=o.y),((o.x===0||o.x===zn)&&o.x===d.x)!=((o.y===0||o.y===zn)&&o.y===d.y)&&this.processBorderOverlap(o,d),d.x<0!=o.x<0&&this.addBorderIntersection(0,Qn(d.y,o.y,(0-d.x)/(o.x-d.x))),d.x>zn!=o.x>zn&&this.addBorderIntersection(1,Qn(d.y,o.y,(zn-d.x)/(o.x-d.x))),d.y<0!=o.y<0&&this.addBorderIntersection(2,Qn(d.x,o.x,(0-d.y)/(o.y-d.y))),d.y>zn!=o.y>zn&&this.addBorderIntersection(3,Qn(d.x,o.x,(zn-d.y)/(o.y-d.y)))}addBorderIntersection(o,d){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const f=this.borders[o];d<f[0]&&(f[0]=d),d>f[1]&&(f[1]=d)}processBorderOverlap(o,d){if(o.x===d.x){if(o.y===d.y)return;const f=o.x===0?0:1;this.addBorderIntersection(f,d.y),this.addBorderIntersection(f,o.y)}else{const f=o.y===0?2:3;this.addBorderIntersection(f,d.x),this.addBorderIntersection(f,o.x)}}centroid(){const o=this.polyCount.reduce(((d,f)=>d+f.edges),0);return o!==0?this.acc.div(o)._round():new W(0,0)}span(){return new W(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce(((o,d)=>o+ +(d[0]!==Number.MAX_VALUE)),0)}}class ry{constructor(o){this.zoom=o.zoom,this.canonical=o.canonical,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map((d=>d.id)),this.index=o.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=o.projection,this.layoutVertexArray=new Vt,this.centroidVertexArray=new il,this.indexArray=new An,this.programConfigurations=new zm(o.layers,o.zoom),this.segments=new hs,this.stateDependentLayerIds=this.layers.filter((d=>d.isStateDependent())).map((d=>d.id)),this.enableTerrain=o.enableTerrain}populate(o,d,f,g){this.features=[],this.hasPattern=$S("fill-extrusion",this.layers,d),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=(function(b){const w=Math.exp(Math.PI*(1-b.y/(1<<b.z)*2));return 80150034*w/(w*w+1)/zn/(1<<b.z)})(f),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:b,id:w,index:E,sourceLayerIndex:I}of o){const D=this.layers[0]._featureFilter.needGeometry,N=Hm(b,D);if(!this.layers[0]._featureFilter.filter(new $(this.zoom),N,f))continue;const j={id:w,sourceLayerIndex:I,index:E,geometry:D?N.geometry:Ud(b,f,g),properties:b.properties,type:b.type,patterns:{}},Z=this.layoutVertexArray.length;this.hasPattern?this.features.push(US("fill-extrusion",this.layers,j,this.zoom,d)):this.addFeature(j,j.geometry,E,f,{},d.availableImages,g),d.featureIndex.insert(b,j.geometry,E,I,this.index,Z)}this.sortBorders()}addFeatures(o,d,f,g,b){for(const w of this.features){const{geometry:E}=w;this.addFeature(w,E,w.index,d,f,g,b)}this.sortBorders()}update(o,d,f,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,d,this.stateDependentLayers,f,g)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,j$),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=o.createVertexBuffer(this.layoutVertexExtArray,U$.members,!0))),this.programConfigurations.upload(o),this.uploaded=!0}uploadCentroid(o){this.centroidVertexArray.length!==0&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=o.createVertexBuffer(this.centroidVertexArray,$$.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(o,d,f,g,b,w,E){const I=[new W(0,0),new W(zn,zn)],D=E.projection,N=D.name==="globe",j=this.enableTerrain&&!N?new bD:null,Z=Z$[o.type]==="Polygon";N&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new Ht);const ne=NS(d,500);for(let Oe=ne.length-1;Oe>=0;Oe--){const He=ne[Oe];(He.length===0||(oe=He[0]).every((Ve=>Ve.x<=0))||oe.every((Ve=>Ve.x>=zn))||oe.every((Ve=>Ve.y<=0))||oe.every((Ve=>Ve.y>=zn)))&&ne.splice(Oe,1)}var oe;let he;if(N)he=kD(ne,I,g);else{he=[];for(const Oe of ne)he.push({polygon:Oe,bounds:I})}const Te=Z?this.edgeRadius:0;for(const{polygon:Oe,bounds:He}of he){let Ve=0,Ne=0;for(const Ze of Oe)Z&&!Ze[0].equals(Ze[Ze.length-1])&&Ze.push(Ze[0]),Ne+=Z?Ze.length-1:Ze.length;const et=this.segments.prepareSegment((Z?5:4)*Ne,this.layoutVertexArray,this.indexArray);if(Z){const Ze=[],Tt=[];Ve=et.vertexLength;for(const Ft of Oe){let sn,It;Ft.length&&Ft!==Oe[0]&&Tt.push(Ze.length/2),sn=Ft[1].sub(Ft[0])._perp()._unit();for(let jt=1;jt<Ft.length;jt++){const Wt=Ft[jt],Qt=Ft[jt===Ft.length-1?1:jt+1];let{x:cn,y:Bt}=Wt;if(Te){It=Qt.sub(Wt)._perp()._unit();const _n=sn.add(It)._unit(),kn=Te*Math.min(4,1/(sn.x*_n.x+sn.y*_n.y));cn+=kn*_n.x,Bt+=kn*_n.y,sn=It}ny(this.layoutVertexArray,cn,Bt,0,0,1,1,0),et.vertexLength++,Ze.push(Wt.x,Wt.y),N&&iy(this.layoutVertexExtArray,D.projectTilePoint(cn,Bt,g),D.upVector(g,cn,Bt))}}const bt=zS(Ze,Tt);for(let Ft=0;Ft<bt.length;Ft+=3)this.indexArray.emplaceBack(Ve+bt[Ft],Ve+bt[Ft+2],Ve+bt[Ft+1]),et.primitiveLength++}for(const Ze of Oe){j&&Ze.length&&j.startRing(Ze[0]);let Tt,bt,Ft,sn=Ze.length>4&&SD(Ze[Ze.length-2],Ze[0],Ze[1]),It=Te?Q$(Ze[Ze.length-2],Ze[0],Ze[1],Te):0;bt=Ze[1].sub(Ze[0])._perp()._unit();let jt=!0;for(let Wt=1,Qt=0;Wt<Ze.length;Wt++){let cn=Ze[Wt-1],Bt=Ze[Wt];const _n=Ze[Wt===Ze.length-1?1:Wt+1];if(j&&Z&&j.currentPolyCount.top++,TD(Bt,cn,He)){Te&&(bt=_n.sub(Bt)._perp()._unit(),jt=!jt);continue}j&&j.append(Bt,cn);const kn=Bt.sub(cn)._perp(),xn=kn.x/(Math.abs(kn.x)+Math.abs(kn.y)),ri=kn.y>0?1:0,un=cn.dist(Bt);if(Qt+un>32768&&(Qt=0),Te){Ft=_n.sub(Bt)._perp()._unit();let oi=wD(cn,Bt,_n,xD(bt,Ft),Te);isNaN(oi)&&(oi=0);const $n=Bt.sub(cn)._unit();cn=cn.add($n.mult(It))._round(),Bt=Bt.add($n.mult(-oi))._round(),It=oi,bt=Ft}const Vn=et.vertexLength,si=Ze.length>4&&SD(cn,Bt,_n);let Di=ED(Qt,sn,jt);if(ny(this.layoutVertexArray,cn.x,cn.y,xn,ri,0,0,Di),ny(this.layoutVertexArray,cn.x,cn.y,xn,ri,0,1,Di),Qt+=un,Di=ED(Qt,si,!jt),sn=si,ny(this.layoutVertexArray,Bt.x,Bt.y,xn,ri,0,0,Di),ny(this.layoutVertexArray,Bt.x,Bt.y,xn,ri,0,1,Di),et.vertexLength+=4,this.indexArray.emplaceBack(Vn+0,Vn+1,Vn+2),this.indexArray.emplaceBack(Vn+1,Vn+3,Vn+2),et.primitiveLength+=2,Te){const oi=Ve+(Wt===1?Ze.length-2:Wt-2),$n=Wt===1?Ve:oi+1;if(this.indexArray.emplaceBack(Vn+1,oi,Vn+3),this.indexArray.emplaceBack(oi,$n,Vn+3),et.primitiveLength+=2,Tt===void 0&&(Tt=Vn),!TD(_n,Ze[Wt],He)){const Sr=Wt===Ze.length-1?Tt:et.vertexLength;this.indexArray.emplaceBack(Vn+2,Vn+3,Sr),this.indexArray.emplaceBack(Vn+3,Sr+1,Sr),this.indexArray.emplaceBack(Vn+3,$n,Sr+1),et.primitiveLength+=3}jt=!jt}if(N){const oi=this.layoutVertexExtArray,$n=D.projectTilePoint(cn.x,cn.y,g),Sr=D.projectTilePoint(Bt.x,Bt.y,g),li=D.upVector(g,cn.x,cn.y),ci=D.upVector(g,Bt.x,Bt.y);iy(oi,$n,li),iy(oi,$n,li),iy(oi,Sr,ci),iy(oi,Sr,ci)}}Z&&(Ve+=Ze.length-1)}}if(j&&j.polyCount.length>0){if(j.borders){j.vertexArrayOffset=this.centroidVertexArray.length;const Oe=j.borders,He=this.featuresOnBorder.push(j)-1;for(let Ve=0;Ve<4;Ve++)Oe[Ve][0]!==Number.MAX_VALUE&&this.borders[Ve].push(He)}this.encodeCentroid(j.borders?void 0:j.centroid(),j)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,f,b,w,g)}sortBorders(){for(let o=0;o<4;o++)this.borders[o].sort(((d,f)=>this.featuresOnBorder[d].borders[o][0]-this.featuresOnBorder[f].borders[o][0]))}encodeCentroid(o,d,f=!0){let g,b;if(o)if(o.y!==0){const E=d.span()._mult(this.tileToMeter);g=(Math.max(o.x,1)<<3)+Math.min(7,Math.round(E.x/10)),b=(Math.max(o.y,1)<<3)+Math.min(7,Math.round(E.y/10))}else g=Math.ceil(7*(o.x+450)),b=0;else g=0,b=+f;let w=f?this.centroidVertexArray.length:d.vertexArrayOffset;for(const E of d.polyCount){f&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*E.edges+E.top);for(let I=0;I<E.top;I++)this.centroidVertexArray.emplace(w++,g,b);for(let I=0;I<2*E.edges;I++)this.centroidVertexArray.emplace(w++,0,b),this.centroidVertexArray.emplace(w++,g,b)}}}function xD(c,o){const d=c.add(o)._unit();return c.x*d.x+c.y*d.y}function Q$(c,o,d,f){const g=o.sub(c)._perp()._unit(),b=d.sub(o)._perp()._unit();return wD(c,o,d,xD(g,b),f)}function wD(c,o,d,f,g){const b=Math.sqrt(1-f*f);return Math.min(c.dist(o)/3,o.dist(d)/3,g*b/f)}function TD(c,o,d){return c.x<d[0].x&&o.x<d[0].x||c.x>d[1].x&&o.x>d[1].x||c.y<d[0].y&&o.y<d[0].y||c.y>d[1].y&&o.y>d[1].y}function SD(c,o,d){if(c.x<0||c.x>=zn||o.x<0||o.x>=zn||d.x<0||d.x>=zn)return!1;const f=d.sub(o),g=f.perp(),b=c.sub(o);return(f.x*b.x+f.y*b.y)/Math.sqrt((f.x*f.x+f.y*f.y)*(b.x*b.x+b.y*b.y))>-.866&&g.x*b.x+g.y*b.y<0}function ED(c,o,d){const f=o?2|c:-3&c;return d?1|f:-2&f}function CD(){const c=Math.PI/32,o=Math.tan(c),d=Z_;return d*Math.sqrt(1+2*o*o)-d}function kD(c,o,d){const f=1<<d.z,g=Xl(d.x/f),b=Xl((d.x+1)/f),w=Ro(d.y/f),E=Ro((d.y+1)/f);return(function(I,D,N,j,Z=0,ne){const oe=[];if(!I.length||!N||!j)return oe;const he=(Ze,Tt)=>{for(const bt of Ze)oe.push({polygon:bt,bounds:Tt})},Te=Math.ceil(Math.log2(N)),Oe=Math.ceil(Math.log2(j)),He=Te-Oe,Ve=[];for(let Ze=0;Ze<Math.abs(He);Ze++)Ve.push(He>0?0:1);for(let Ze=0;Ze<Math.min(Te,Oe);Ze++)Ve.push(0),Ve.push(1);let Ne=I;if(Ne=cx(Ne,D[0].y-Z,D[1].y+Z,1),Ne=cx(Ne,D[0].x-Z,D[1].x+Z,0),!Ne.length)return oe;const et=[];for(Ve.length?et.push({polygons:Ne,bounds:D,depth:0}):he(Ne,D);et.length;){const Ze=et.pop(),Tt=Ze.depth,bt=Ve[Tt],Ft=Ze.bounds[0],sn=Ze.bounds[1],It=bt===0?Ft.x:Ft.y,jt=bt===0?sn.x:sn.y,Wt=ne?ne(bt,It,jt):.5*(It+jt),Qt=cx(Ze.polygons,It-Z,Wt+Z,bt),cn=cx(Ze.polygons,Wt-Z,jt+Z,bt);if(Qt.length){const Bt=[Ft,new W(bt===0?Wt:sn.x,bt===1?Wt:sn.y)];Ve.length>Tt+1?et.push({polygons:Qt,bounds:Bt,depth:Tt+1}):he(Qt,Bt)}if(cn.length){const Bt=[new W(bt===0?Wt:Ft.x,bt===1?Wt:Ft.y),sn];Ve.length>Tt+1?et.push({polygons:cn,bounds:Bt,depth:Tt+1}):he(cn,Bt)}}return oe})(c,o,Math.ceil((b-g)/11.25),Math.ceil((w-E)/11.25),1,((I,D,N)=>{if(I===0)return .5*(D+N);{const j=Ro((d.y+D/zn)/f);return(Ou(.5*(Ro((d.y+N/zn)/f)+j))*f-d.y)*zn}}))}Sn(ry,"FillExtrusionBucket",{omit:["layers","features"]}),Sn(bD,"PartMetadata");const eU=new Le({"fill-extrusion-edge-radius":new le(Ot["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var tU={paint:new Le({"fill-extrusion-opacity":new le(Ot["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new ye(Ot["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new le(Ot["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new le(Ot["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new ye(Ot["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new ye(Ot["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new ye(Ot["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new le(Ot["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new le(Ot["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new le(Ot["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-rounded-roof":new le(Ot["paint_fill-extrusion"]["fill-extrusion-rounded-roof"])}),layout:eU};function ID(c,o,d){var f=2*Math.PI*6378137/256/Math.pow(2,d);return[c*f-2*Math.PI*6378137/2,o*f-2*Math.PI*6378137/2]}class ux{constructor(o,d,f){this.z=o,this.x=d,this.y=f,this.key=sy(0,o,o,d,f)}equals(o){return this.z===o.z&&this.x===o.x&&this.y===o.y}url(o,d){const f=(function(b,w,E){var I=ID(256*b,256*(w=Math.pow(2,E)-w-1),E),D=ID(256*(b+1),256*(w+1),E);return I[0]+","+I[1]+","+D[0]+","+D[1]})(this.x,this.y,this.z),g=(function(b,w,E){let I,D="";for(let N=b;N>0;N--)I=1<<N-1,D+=(w&I?1:0)+(E&I?2:0);return D})(this.z,this.x,this.y);return o[(this.x+this.y)%o.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(d==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",g).replace("{bbox-epsg-3857}",f)}toString(){return`${this.z}/${this.x}/${this.y}`}}class AD{constructor(o,d){this.wrap=o,this.canonical=d,this.key=sy(o,d.z,d.z,d.x,d.y)}}class Ca{constructor(o,d,f,g,b){this.overscaledZ=o,this.wrap=d,this.canonical=new ux(f,+g,+b),this.key=d===0&&o===f?this.canonical.key:sy(d,o,f,g,b)}equals(o){return this.overscaledZ===o.overscaledZ&&this.wrap===o.wrap&&this.canonical.equals(o.canonical)}scaledTo(o){const d=this.canonical.z-o;return o>this.canonical.z?new Ca(o,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Ca(o,this.wrap,o,this.canonical.x>>d,this.canonical.y>>d)}calculateScaledKey(o,d=!0){if(this.overscaledZ===o&&d)return this.key;if(o>this.canonical.z)return sy(this.wrap*+d,o,this.canonical.z,this.canonical.x,this.canonical.y);{const f=this.canonical.z-o;return sy(this.wrap*+d,o,o,this.canonical.x>>f,this.canonical.y>>f)}}isChildOf(o){if(o.wrap!==this.wrap)return!1;const d=this.canonical.z-o.canonical.z;return o.overscaledZ===0||o.overscaledZ<this.overscaledZ&&o.canonical.x===this.canonical.x>>d&&o.canonical.y===this.canonical.y>>d}children(o){if(this.overscaledZ>=o)return[new Ca(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const d=this.canonical.z+1,f=2*this.canonical.x,g=2*this.canonical.y;return[new Ca(d,this.wrap,d,f,g),new Ca(d,this.wrap,d,f+1,g),new Ca(d,this.wrap,d,f,g+1),new Ca(d,this.wrap,d,f+1,g+1)]}isLessThan(o){return this.wrap<o.wrap||!(this.wrap>o.wrap)&&(this.overscaledZ<o.overscaledZ||!(this.overscaledZ>o.overscaledZ)&&(this.canonical.x<o.canonical.x||!(this.canonical.x>o.canonical.x)&&this.canonical.y<o.canonical.y))}wrapped(){return new Ca(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(o){return new Ca(this.overscaledZ,o,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new AD(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function sy(c,o,d,f,g){const b=1<<Math.min(d,22);let w=b*(g%b)+f%b;return c&&d<22&&(w+=b*b*((c<0?-2*c-1:2*c)%(1<<2*(22-d)))),16*(32*w+d)+(o-d)}Sn(ux,"CanonicalTileID"),Sn(Ca,"OverscaledTileID",{omit:["projMatrix"]});class Hg extends W{constructor(o,d,f){super(o,d),this.z=f}}function oy(c,o){return c.x*o.x+c.y*o.y}function PD(c,o){if(c.length===1){let d=0;const f=o[d++];let g;for(;!g||f.equals(g);)if(g=o[d++],!g)return 1/0;for(;d<o.length;d++){const b=o[d],w=c[0],E=g.sub(f),I=b.sub(f),D=w.sub(f),N=oy(E,E),j=oy(E,I),Z=oy(I,I),ne=oy(D,E),oe=oy(D,I),he=N*Z-j*j,Te=(Z*ne-j*oe)/he,Oe=(N*oe-j*ne)/he,He=f.z*(1-Te-Oe)+g.z*Te+b.z*Oe;if(isFinite(He))return He}return 1/0}{let d=1/0;for(const f of o)d=Math.min(d,f.z);return d}}function MD(c,o,d,f,g,b,w,E){const I=w*g.getElevationAt(c,o,!0,!0),D=b[0]!==0,N=D?b[1]===0?w*(b[0]/7-450):w*(function(j,Z,ne){const oe=Math.floor(Z[0]/8),he=Math.floor(Z[1]/8),Te=10*(Z[0]-8*oe),Oe=10*(Z[1]-8*he),He=j.getElevationAt(oe,he,!0,!0),Ve=j.getMeterToDEM(ne),Ne=Math.floor(.5*(Te*Ve-1)),et=Math.floor(.5*(Oe*Ve-1)),Ze=j.tileCoordToPixel(oe,he),Tt=2*Ne+1,bt=2*et+1,Ft=(function(cn,Bt,_n,kn,xn){return[cn.getElevationAtPixel(Bt,_n,!0),cn.getElevationAtPixel(Bt+xn,_n,!0),cn.getElevationAtPixel(Bt,_n+xn,!0),cn.getElevationAtPixel(Bt+kn,_n+xn,!0)]})(j,Ze.x-Ne,Ze.y-et,Tt,bt),sn=Math.abs(Ft[0]-Ft[1]),It=Math.abs(Ft[2]-Ft[3]),jt=Math.abs(Ft[0]-Ft[2])+Math.abs(Ft[1]-Ft[3]),Wt=Math.min(.25,.5*Ve*(sn+It)/Tt),Qt=Math.min(.25,.5*Ve*jt/bt);return He+Math.max(Wt*Te,Qt*Oe)})(g,b,E):I;return{base:I+(d===0)?-1:d,top:D?Math.max(N+f,I+d+2):I+f}}const nU=at([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:iU}=nU,rU=at([{name:"a_packed",components:4,type:"Float32"}]),{members:sU}=rU,oU=lx.types,aU=Math.cos(Math.PI/180*37.5);class dx{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map((d=>d.id)),this.index=o.index,this.projection=o.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((d=>{this.gradients[d.id]={}})),this.layoutVertexArray=new xt,this.layoutVertexArray2=new Zt,this.indexArray=new An,this.programConfigurations=new zm(o.layers,o.zoom),this.segments=new hs,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((d=>d.isStateDependent())).map((d=>d.id))}populate(o,d,f,g){this.hasPattern=$S("line",this.layers,d);const b=this.layers[0].layout.get("line-sort-key"),w=[];for(const{feature:N,id:j,index:Z,sourceLayerIndex:ne}of o){const oe=this.layers[0]._featureFilter.needGeometry,he=Hm(N,oe);if(!this.layers[0]._featureFilter.filter(new $(this.zoom),he,f))continue;const Te=b?b.evaluate(he,{},f):void 0,Oe={id:j,properties:N.properties,type:N.type,sourceLayerIndex:ne,index:Z,geometry:oe?he.geometry:Ud(N,f,g),patterns:{},sortKey:Te};w.push(Oe)}b&&w.sort(((N,j)=>N.sortKey-j.sortKey));const{lineAtlas:E,featureIndex:I}=d,D=this.addConstantDashes(E);for(const N of w){const{geometry:j,index:Z,sourceLayerIndex:ne}=N;if(D&&this.addFeatureDashes(N,E),this.hasPattern){const oe=US("line",this.layers,N,this.zoom,d);this.patternFeatures.push(oe)}else this.addFeature(N,j,Z,f,E.positions,d.availableImages);I.insert(o[Z].feature,j,Z,ne,this.index)}}addConstantDashes(o){let d=!1;for(const f of this.layers){const g=f.paint.get("line-dasharray").value,b=f.layout.get("line-cap").value;if(g.kind!=="constant"||b.kind!=="constant")d=!0;else{const w=b.value,E=g.value;if(!E)continue;o.addDash(E,w)}}return d}addFeatureDashes(o,d){const f=this.zoom;for(const g of this.layers){const b=g.paint.get("line-dasharray").value,w=g.layout.get("line-cap").value;if(b.kind==="constant"&&w.kind==="constant")continue;let E,I;if(b.kind==="constant"){if(E=b.value,!E)continue}else E=b.evaluate({zoom:f},o);I=w.kind==="constant"?w.value:w.evaluate({zoom:f},o),d.addDash(E,I),o.patterns[g.id]=d.getKey(E,I)}}update(o,d,f,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,d,this.stateDependentLayers,f,g)}addFeatures(o,d,f,g,b){for(const w of this.patternFeatures)this.addFeature(w,w.geometry,w.index,d,f,g)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=o.createVertexBuffer(this.layoutVertexArray2,sU)),this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,iU),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(o){if(o.properties&&o.properties.hasOwnProperty("mapbox_clip_start")&&o.properties.hasOwnProperty("mapbox_clip_end"))return{start:+o.properties.mapbox_clip_start,end:+o.properties.mapbox_clip_end}}addFeature(o,d,f,g,b,w){const E=this.layers[0].layout,I=E.get("line-join").evaluate(o,{}),D=E.get("line-cap").evaluate(o,{}),N=E.get("line-miter-limit"),j=E.get("line-round-limit");this.lineClips=this.lineFeatureClips(o);for(const Z of d)this.addLine(Z,o,I,D,N,j);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,f,b,w,g)}addLine(o,d,f,g,b,w){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Oe=0;Oe<o.length-1;Oe++)this.totalDistance+=o[Oe].dist(o[Oe+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const E=oU[d.type]==="Polygon";let I=o.length;for(;I>=2&&o[I-1].equals(o[I-2]);)I--;let D=0;for(;D<I-1&&o[D].equals(o[D+1]);)D++;if(I<(E?3:2))return;f==="bevel"&&(b=1.05);const N=this.overscaling<=16?15*zn/(512*this.overscaling):0,j=this.segments.prepareSegment(10*I,this.layoutVertexArray,this.indexArray);let Z,ne,oe,he,Te;this.e1=this.e2=-1,E&&(Z=o[I-2],Te=o[D].sub(Z)._unit()._perp());for(let Oe=D;Oe<I;Oe++){if(oe=Oe===I-1?E?o[D+1]:void 0:o[Oe+1],oe&&o[Oe].equals(oe))continue;Te&&(he=Te),Z&&(ne=Z),Z=o[Oe],Te=oe?oe.sub(Z)._unit()._perp():he,he=he||Te;let He=he.add(Te);He.x===0&&He.y===0||He._unit();const Ve=he.x*Te.x+he.y*Te.y,Ne=He.x*Te.x+He.y*Te.y,et=Ne!==0?1/Ne:1/0,Ze=2*Math.sqrt(2-2*Ne),Tt=Ne<aU&&ne&&oe,bt=he.x*Te.y-he.y*Te.x>0;if(Tt&&Oe>D){const It=Z.dist(ne);if(It>2*N){const jt=Z.sub(Z.sub(ne)._mult(N/It)._round());this.updateDistance(ne,jt),this.addCurrentVertex(jt,he,0,0,j),ne=jt}}const Ft=ne&&oe;let sn=Ft?f:E?"butt":g;if(Ft&&sn==="round"&&(et<w?sn="miter":et<=2&&(sn="fakeround")),sn==="miter"&&et>b&&(sn="bevel"),sn==="bevel"&&(et>2&&(sn="flipbevel"),et<b&&(sn="miter")),ne&&this.updateDistance(ne,Z),sn==="miter")He._mult(et),this.addCurrentVertex(Z,He,0,0,j);else if(sn==="flipbevel"){if(et>100)He=Te.mult(-1);else{const It=et*he.add(Te).mag()/he.sub(Te).mag();He._perp()._mult(It*(bt?-1:1))}this.addCurrentVertex(Z,He,0,0,j),this.addCurrentVertex(Z,He.mult(-1),0,0,j)}else if(sn==="bevel"||sn==="fakeround"){const It=-Math.sqrt(et*et-1),jt=bt?It:0,Wt=bt?0:It;if(ne&&this.addCurrentVertex(Z,he,jt,Wt,j),sn==="fakeround"){const Qt=Math.round(180*Ze/Math.PI/20);for(let cn=1;cn<Qt;cn++){let Bt=cn/Qt;if(Bt!==.5){const kn=Bt-.5;Bt+=Bt*kn*(Bt-1)*((1.0904+Ve*(Ve*(3.55645-1.43519*Ve)-3.2452))*kn*kn+(.848013+Ve*(.215638*Ve-1.06021)))}const _n=Te.sub(he)._mult(Bt)._add(he)._unit()._mult(bt?-1:1);this.addHalfVertex(Z,_n.x,_n.y,!1,bt,0,j)}}oe&&this.addCurrentVertex(Z,Te,-jt,-Wt,j)}else if(sn==="butt")this.addCurrentVertex(Z,He,0,0,j);else if(sn==="square"){const It=ne?1:-1;ne||this.addCurrentVertex(Z,He,It,It,j),this.addCurrentVertex(Z,He,0,0,j),ne&&this.addCurrentVertex(Z,He,It,It,j)}else sn==="round"&&(ne&&(this.addCurrentVertex(Z,he,0,0,j),this.addCurrentVertex(Z,he,1,1,j,!0)),oe&&(this.addCurrentVertex(Z,Te,-1,-1,j,!0),this.addCurrentVertex(Z,Te,0,0,j)));if(Tt&&Oe<I-1){const It=Z.dist(oe);if(It>2*N){const jt=Z.add(oe.sub(Z)._mult(N/It)._round());this.updateDistance(Z,jt),this.addCurrentVertex(jt,Te,0,0,j),Z=jt}}}}addCurrentVertex(o,d,f,g,b,w=!1){const E=d.y*g-d.x,I=-d.y-d.x*g;this.addHalfVertex(o,d.x+d.y*f,d.y-d.x*f,w,!1,f,b),this.addHalfVertex(o,E,I,w,!0,-g,b)}addHalfVertex({x:o,y:d},f,g,b,w,E,I){this.layoutVertexArray.emplaceBack((o<<1)+(b?1:0),(d<<1)+(w?1:0),Math.round(63*f)+128,Math.round(63*g)+128,1+(E===0?0:E<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const D=I.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,D),I.primitiveLength++),w?this.e2=D:this.e1=D}updateScaledDistance(){if(this.lineClips){const o=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=o*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(o,d){this.distance+=o.dist(d),this.updateScaledDistance()}}Sn(dx,"LineBucket",{omit:["layers","patternFeatures"]});const lU=new Le({"line-cap":new ye(Ot.layout_line["line-cap"]),"line-join":new ye(Ot.layout_line["line-join"]),"line-miter-limit":new le(Ot.layout_line["line-miter-limit"]),"line-round-limit":new le(Ot.layout_line["line-round-limit"]),"line-sort-key":new ye(Ot.layout_line["line-sort-key"])});var DD={paint:new Le({"line-opacity":new ye(Ot.paint_line["line-opacity"]),"line-color":new ye(Ot.paint_line["line-color"]),"line-translate":new le(Ot.paint_line["line-translate"]),"line-translate-anchor":new le(Ot.paint_line["line-translate-anchor"]),"line-width":new ye(Ot.paint_line["line-width"]),"line-gap-width":new ye(Ot.paint_line["line-gap-width"]),"line-offset":new ye(Ot.paint_line["line-offset"]),"line-blur":new ye(Ot.paint_line["line-blur"]),"line-dasharray":new ye(Ot.paint_line["line-dasharray"]),"line-pattern":new ye(Ot.paint_line["line-pattern"]),"line-gradient":new Pe(Ot.paint_line["line-gradient"]),"line-trim-offset":new le(Ot.paint_line["line-trim-offset"])}),layout:lU};const LD=new class extends ye{possiblyEvaluate(c,o){return o=new $(Math.floor(o.zoom),{now:o.now,fadeDuration:o.fadeDuration,transition:o.transition}),super.possiblyEvaluate(c,o)}evaluate(c,o,d,f){return o=mt({},o,{zoom:Math.floor(o.zoom)}),super.evaluate(c,o,d,f)}}(DD.paint.properties["line-width"].specification);function RD(c,o){return o>0?o+2*c:c}LD.useIntegerZoom=!0;const cU=at([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),uU=at([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),dU=at([{name:"a_projected_pos",components:4,type:"Float32"}],4);at([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const hU=at([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),fU=at([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);at([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const OD=at([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),mU=at([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);at([{name:"triangle",components:3,type:"Uint16"}]),at([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),at([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),at([{type:"Float32",name:"offsetX"}]),at([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var fo=24;const ru=128;function WS(c,o){const{expression:d}=o;if(d.kind==="constant")return{kind:"constant",layoutSize:d.evaluate(new $(c+1))};if(d.kind==="source")return{kind:"source"};{const{zoomStops:f,interpolationType:g}=d;let b=0;for(;b<f.length&&f[b]<=c;)b++;b=Math.max(0,b-1);let w=b;for(;w<f.length&&f[w]<c+1;)w++;w=Math.min(f.length-1,w);const E=f[b],I=f[w];return d.kind==="composite"?{kind:"composite",minZoom:E,maxZoom:I,interpolationType:g}:{kind:"camera",minZoom:E,maxZoom:I,minSize:d.evaluate(new $(E)),maxSize:d.evaluate(new $(I)),interpolationType:g}}}function hx(c,{uSize:o,uSizeT:d},{lowerSize:f,upperSize:g}){return c.kind==="source"?f/ru:c.kind==="composite"?Qn(f/ru,g/ru,d):o}function Gg(c,o){let d=0,f=0;if(c.kind==="constant")f=c.layoutSize;else if(c.kind!=="source"){const{interpolationType:g,minZoom:b,maxZoom:w}=c,E=g?De(_l.interpolationFactor(g,o,b,w),0,1):0;c.kind==="camera"?f=Qn(c.minSize,c.maxSize,E):d=E}return{uSizeT:d,uSize:f}}var pU=Object.freeze({__proto__:null,SIZE_PACK_FACTOR:ru,evaluateSizeForFeature:hx,evaluateSizeForZoom:Gg,getSizeData:WS});function gU(c,o,d){return c.sections.forEach((f=>{f.text=(function(g,b,w){const E=b.layout.get("text-transform").evaluate(w,{});return E==="uppercase"?g=g.toLocaleUpperCase():E==="lowercase"&&(g=g.toLocaleLowerCase()),O.applyArabicShaping&&(g=O.applyArabicShaping(g)),g})(f.text,o,d)})),c}const ay={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};function vU(c){return c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""}function _U(c){return c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""}var VD=vr,BD=function(c,o,d,f,g){var b,w,E=8*g-f-1,I=(1<<E)-1,D=I>>1,N=-7,j=g-1,Z=-1,ne=c[o+j];for(j+=Z,b=ne&(1<<-N)-1,ne>>=-N,N+=E;N>0;b=256*b+c[o+j],j+=Z,N-=8);for(w=b&(1<<-N)-1,b>>=-N,N+=f;N>0;w=256*w+c[o+j],j+=Z,N-=8);if(b===0)b=1-D;else{if(b===I)return w?NaN:1/0*(ne?-1:1);w+=Math.pow(2,f),b-=D}return(ne?-1:1)*w*Math.pow(2,b-f)},FD=function(c,o,d,f,g,b){var w,E,I,D=8*b-g-1,N=(1<<D)-1,j=N>>1,Z=g===23?Math.pow(2,-24)-Math.pow(2,-77):0,ne=0,oe=1,he=o<0||o===0&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(E=isNaN(o)?1:0,w=N):(w=Math.floor(Math.log(o)/Math.LN2),o*(I=Math.pow(2,-w))<1&&(w--,I*=2),(o+=w+j>=1?Z/I:Z*Math.pow(2,1-j))*I>=2&&(w++,I/=2),w+j>=N?(E=0,w=N):w+j>=1?(E=(o*I-1)*Math.pow(2,g),w+=j):(E=o*Math.pow(2,j-1)*Math.pow(2,g),w=0));g>=8;c[d+ne]=255&E,ne+=oe,E/=256,g-=8);for(w=w<<g|E,D+=g;D>0;c[d+ne]=255&w,ne+=oe,w/=256,D-=8);c[d+ne-oe]|=128*he};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function vr(c){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(c)?c:new Uint8Array(c||0),this.pos=0,this.type=0,this.length=this.buf.length}vr.Varint=0,vr.Fixed64=1,vr.Bytes=2,vr.Fixed32=5;var HS=4294967296,zD=1/HS,ND=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Wd(c){return c.type===vr.Bytes?c.readVarint()+c.pos:c.pos+1}function qg(c,o,d){return d?4294967296*o+(c>>>0):4294967296*(o>>>0)+(c>>>0)}function $D(c,o,d){var f=o<=16383?1:o<=2097151?2:o<=268435455?3:Math.floor(Math.log(o)/(7*Math.LN2));d.realloc(f);for(var g=d.pos-1;g>=c;g--)d.buf[g+f]=d.buf[g]}function yU(c,o){for(var d=0;d<c.length;d++)o.writeVarint(c[d])}function bU(c,o){for(var d=0;d<c.length;d++)o.writeSVarint(c[d])}function xU(c,o){for(var d=0;d<c.length;d++)o.writeFloat(c[d])}function wU(c,o){for(var d=0;d<c.length;d++)o.writeDouble(c[d])}function TU(c,o){for(var d=0;d<c.length;d++)o.writeBoolean(c[d])}function SU(c,o){for(var d=0;d<c.length;d++)o.writeFixed32(c[d])}function EU(c,o){for(var d=0;d<c.length;d++)o.writeSFixed32(c[d])}function CU(c,o){for(var d=0;d<c.length;d++)o.writeFixed64(c[d])}function kU(c,o){for(var d=0;d<c.length;d++)o.writeSFixed64(c[d])}function fx(c,o){return(c[o]|c[o+1]<<8|c[o+2]<<16)+16777216*c[o+3]}function Kg(c,o,d){c[d]=o,c[d+1]=o>>>8,c[d+2]=o>>>16,c[d+3]=o>>>24}function UD(c,o){return(c[o]|c[o+1]<<8|c[o+2]<<16)+(c[o+3]<<24)}vr.prototype={destroy:function(){this.buf=null},readFields:function(c,o,d){for(d=d||this.length;this.pos<d;){var f=this.readVarint(),g=f>>3,b=this.pos;this.type=7&f,c(g,o,this),this.pos===b&&this.skip(f)}return o},readMessage:function(c,o){return this.readFields(c,o,this.readVarint()+this.pos)},readFixed32:function(){var c=fx(this.buf,this.pos);return this.pos+=4,c},readSFixed32:function(){var c=UD(this.buf,this.pos);return this.pos+=4,c},readFixed64:function(){var c=fx(this.buf,this.pos)+fx(this.buf,this.pos+4)*HS;return this.pos+=8,c},readSFixed64:function(){var c=fx(this.buf,this.pos)+UD(this.buf,this.pos+4)*HS;return this.pos+=8,c},readFloat:function(){var c=BD(this.buf,this.pos,!0,23,4);return this.pos+=4,c},readDouble:function(){var c=BD(this.buf,this.pos,!0,52,8);return this.pos+=8,c},readVarint:function(c){var o,d,f=this.buf;return o=127&(d=f[this.pos++]),d<128?o:(o|=(127&(d=f[this.pos++]))<<7,d<128?o:(o|=(127&(d=f[this.pos++]))<<14,d<128?o:(o|=(127&(d=f[this.pos++]))<<21,d<128?o:(function(g,b,w){var E,I,D=w.buf;if(E=(112&(I=D[w.pos++]))>>4,I<128||(E|=(127&(I=D[w.pos++]))<<3,I<128)||(E|=(127&(I=D[w.pos++]))<<10,I<128)||(E|=(127&(I=D[w.pos++]))<<17,I<128)||(E|=(127&(I=D[w.pos++]))<<24,I<128)||(E|=(1&(I=D[w.pos++]))<<31,I<128))return qg(g,E,b);throw new Error("Expected varint not more than 10 bytes")})(o|=(15&(d=f[this.pos]))<<28,c,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var c=this.readVarint();return c%2==1?(c+1)/-2:c/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var c=this.readVarint()+this.pos,o=this.pos;return this.pos=c,c-o>=12&&ND?(function(d,f,g){return ND.decode(d.subarray(f,g))})(this.buf,o,c):(function(d,f,g){for(var b="",w=f;w<g;){var E,I,D,N=d[w],j=null,Z=N>239?4:N>223?3:N>191?2:1;if(w+Z>g)break;Z===1?N<128&&(j=N):Z===2?(192&(E=d[w+1]))==128&&(j=(31&N)<<6|63&E)<=127&&(j=null):Z===3?(I=d[w+2],(192&(E=d[w+1]))==128&&(192&I)==128&&((j=(15&N)<<12|(63&E)<<6|63&I)<=2047||j>=55296&&j<=57343)&&(j=null)):Z===4&&(I=d[w+2],D=d[w+3],(192&(E=d[w+1]))==128&&(192&I)==128&&(192&D)==128&&((j=(15&N)<<18|(63&E)<<12|(63&I)<<6|63&D)<=65535||j>=1114112)&&(j=null)),j===null?(j=65533,Z=1):j>65535&&(j-=65536,b+=String.fromCharCode(j>>>10&1023|55296),j=56320|1023&j),b+=String.fromCharCode(j),w+=Z}return b})(this.buf,o,c)},readBytes:function(){var c=this.readVarint()+this.pos,o=this.buf.subarray(this.pos,c);return this.pos=c,o},readPackedVarint:function(c,o){if(this.type!==vr.Bytes)return c.push(this.readVarint(o));var d=Wd(this);for(c=c||[];this.pos<d;)c.push(this.readVarint(o));return c},readPackedSVarint:function(c){if(this.type!==vr.Bytes)return c.push(this.readSVarint());var o=Wd(this);for(c=c||[];this.pos<o;)c.push(this.readSVarint());return c},readPackedBoolean:function(c){if(this.type!==vr.Bytes)return c.push(this.readBoolean());var o=Wd(this);for(c=c||[];this.pos<o;)c.push(this.readBoolean());return c},readPackedFloat:function(c){if(this.type!==vr.Bytes)return c.push(this.readFloat());var o=Wd(this);for(c=c||[];this.pos<o;)c.push(this.readFloat());return c},readPackedDouble:function(c){if(this.type!==vr.Bytes)return c.push(this.readDouble());var o=Wd(this);for(c=c||[];this.pos<o;)c.push(this.readDouble());return c},readPackedFixed32:function(c){if(this.type!==vr.Bytes)return c.push(this.readFixed32());var o=Wd(this);for(c=c||[];this.pos<o;)c.push(this.readFixed32());return c},readPackedSFixed32:function(c){if(this.type!==vr.Bytes)return c.push(this.readSFixed32());var o=Wd(this);for(c=c||[];this.pos<o;)c.push(this.readSFixed32());return c},readPackedFixed64:function(c){if(this.type!==vr.Bytes)return c.push(this.readFixed64());var o=Wd(this);for(c=c||[];this.pos<o;)c.push(this.readFixed64());return c},readPackedSFixed64:function(c){if(this.type!==vr.Bytes)return c.push(this.readSFixed64());var o=Wd(this);for(c=c||[];this.pos<o;)c.push(this.readSFixed64());return c},skip:function(c){var o=7&c;if(o===vr.Varint)for(;this.buf[this.pos++]>127;);else if(o===vr.Bytes)this.pos=this.readVarint()+this.pos;else if(o===vr.Fixed32)this.pos+=4;else{if(o!==vr.Fixed64)throw new Error("Unimplemented type: "+o);this.pos+=8}},writeTag:function(c,o){this.writeVarint(c<<3|o)},realloc:function(c){for(var o=this.length||16;o<this.pos+c;)o*=2;if(o!==this.length){var d=new Uint8Array(o);d.set(this.buf),this.buf=d,this.length=o}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(c){this.realloc(4),Kg(this.buf,c,this.pos),this.pos+=4},writeSFixed32:function(c){this.realloc(4),Kg(this.buf,c,this.pos),this.pos+=4},writeFixed64:function(c){this.realloc(8),Kg(this.buf,-1&c,this.pos),Kg(this.buf,Math.floor(c*zD),this.pos+4),this.pos+=8},writeSFixed64:function(c){this.realloc(8),Kg(this.buf,-1&c,this.pos),Kg(this.buf,Math.floor(c*zD),this.pos+4),this.pos+=8},writeVarint:function(c){(c=+c||0)>268435455||c<0?(function(o,d){var f,g;if(o>=0?(f=o%4294967296|0,g=o/4294967296|0):(g=~(-o/4294967296),4294967295^(f=~(-o%4294967296))?f=f+1|0:(f=0,g=g+1|0)),o>=18446744073709552e3||o<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");d.realloc(10),(function(b,w,E){E.buf[E.pos++]=127&b|128,b>>>=7,E.buf[E.pos++]=127&b|128,b>>>=7,E.buf[E.pos++]=127&b|128,b>>>=7,E.buf[E.pos++]=127&b|128,E.buf[E.pos]=127&(b>>>=7)})(f,0,d),(function(b,w){var E=(7&b)<<4;w.buf[w.pos++]|=E|((b>>>=3)?128:0),b&&(w.buf[w.pos++]=127&b|((b>>>=7)?128:0),b&&(w.buf[w.pos++]=127&b|((b>>>=7)?128:0),b&&(w.buf[w.pos++]=127&b|((b>>>=7)?128:0),b&&(w.buf[w.pos++]=127&b|((b>>>=7)?128:0),b&&(w.buf[w.pos++]=127&b)))))})(g,d)})(c,this):(this.realloc(4),this.buf[this.pos++]=127&c|(c>127?128:0),c<=127||(this.buf[this.pos++]=127&(c>>>=7)|(c>127?128:0),c<=127||(this.buf[this.pos++]=127&(c>>>=7)|(c>127?128:0),c<=127||(this.buf[this.pos++]=c>>>7&127))))},writeSVarint:function(c){this.writeVarint(c<0?2*-c-1:2*c)},writeBoolean:function(c){this.writeVarint(!!c)},writeString:function(c){c=String(c),this.realloc(4*c.length),this.pos++;var o=this.pos;this.pos=(function(f,g,b){for(var w,E,I=0;I<g.length;I++){if((w=g.charCodeAt(I))>55295&&w<57344){if(!E){w>56319||I+1===g.length?(f[b++]=239,f[b++]=191,f[b++]=189):E=w;continue}if(w<56320){f[b++]=239,f[b++]=191,f[b++]=189,E=w;continue}w=E-55296<<10|w-56320|65536,E=null}else E&&(f[b++]=239,f[b++]=191,f[b++]=189,E=null);w<128?f[b++]=w:(w<2048?f[b++]=w>>6|192:(w<65536?f[b++]=w>>12|224:(f[b++]=w>>18|240,f[b++]=w>>12&63|128),f[b++]=w>>6&63|128),f[b++]=63&w|128)}return b})(this.buf,c,this.pos);var d=this.pos-o;d>=128&&$D(o,d,this),this.pos=o-1,this.writeVarint(d),this.pos+=d},writeFloat:function(c){this.realloc(4),FD(this.buf,c,this.pos,!0,23,4),this.pos+=4},writeDouble:function(c){this.realloc(8),FD(this.buf,c,this.pos,!0,52,8),this.pos+=8},writeBytes:function(c){var o=c.length;this.writeVarint(o),this.realloc(o);for(var d=0;d<o;d++)this.buf[this.pos++]=c[d]},writeRawMessage:function(c,o){this.pos++;var d=this.pos;c(o,this);var f=this.pos-d;f>=128&&$D(d,f,this),this.pos=d-1,this.writeVarint(f),this.pos+=f},writeMessage:function(c,o,d){this.writeTag(c,vr.Bytes),this.writeRawMessage(o,d)},writePackedVarint:function(c,o){o.length&&this.writeMessage(c,yU,o)},writePackedSVarint:function(c,o){o.length&&this.writeMessage(c,bU,o)},writePackedBoolean:function(c,o){o.length&&this.writeMessage(c,TU,o)},writePackedFloat:function(c,o){o.length&&this.writeMessage(c,xU,o)},writePackedDouble:function(c,o){o.length&&this.writeMessage(c,wU,o)},writePackedFixed32:function(c,o){o.length&&this.writeMessage(c,SU,o)},writePackedSFixed32:function(c,o){o.length&&this.writeMessage(c,EU,o)},writePackedFixed64:function(c,o){o.length&&this.writeMessage(c,CU,o)},writePackedSFixed64:function(c,o){o.length&&this.writeMessage(c,kU,o)},writeBytesField:function(c,o){this.writeTag(c,vr.Bytes),this.writeBytes(o)},writeFixed32Field:function(c,o){this.writeTag(c,vr.Fixed32),this.writeFixed32(o)},writeSFixed32Field:function(c,o){this.writeTag(c,vr.Fixed32),this.writeSFixed32(o)},writeFixed64Field:function(c,o){this.writeTag(c,vr.Fixed64),this.writeFixed64(o)},writeSFixed64Field:function(c,o){this.writeTag(c,vr.Fixed64),this.writeSFixed64(o)},writeVarintField:function(c,o){this.writeTag(c,vr.Varint),this.writeVarint(o)},writeSVarintField:function(c,o){this.writeTag(c,vr.Varint),this.writeSVarint(o)},writeStringField:function(c,o){this.writeTag(c,vr.Bytes),this.writeString(o)},writeFloatField:function(c,o){this.writeTag(c,vr.Fixed32),this.writeFloat(o)},writeDoubleField:function(c,o){this.writeTag(c,vr.Fixed64),this.writeDouble(o)},writeBooleanField:function(c,o){this.writeVarintField(c,!!o)}};var mx=Y(VD);const GS=3;function IU(c,o,d){o.glyphs=[],c===1&&d.readMessage(AU,o)}function AU(c,o,d){if(c===3){const{id:f,bitmap:g,width:b,height:w,left:E,top:I,advance:D}=d.readMessage(PU,{});o.glyphs.push({id:f,bitmap:new jd({width:b+2*GS,height:w+2*GS},g),metrics:{width:b,height:w,left:E,top:I,advance:D}})}else c===4?o.ascender=d.readSVarint():c===5&&(o.descender=d.readSVarint())}function PU(c,o,d){c===1?o.id=d.readVarint():c===2?o.bitmap=d.readBytes():c===3?o.width=d.readVarint():c===4?o.height=d.readVarint():c===5?o.left=d.readSVarint():c===6?o.top=d.readSVarint():c===7&&(o.advance=d.readVarint())}const jD=GS;function qS(c){let o=0,d=0;for(const w of c)o+=w.w*w.h,d=Math.max(d,w.w);c.sort(((w,E)=>E.h-w.h));const f=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(o/.95)),d),h:1/0}];let g=0,b=0;for(const w of c)for(let E=f.length-1;E>=0;E--){const I=f[E];if(!(w.w>I.w||w.h>I.h)){if(w.x=I.x,w.y=I.y,b=Math.max(b,w.y+w.h),g=Math.max(g,w.x+w.w),w.w===I.w&&w.h===I.h){const D=f.pop();E<f.length&&(f[E]=D)}else w.h===I.h?(I.x+=w.w,I.w-=w.w):w.w===I.w?(I.y+=w.h,I.h-=w.h):(f.push({x:I.x+w.w,y:I.y,w:I.w-w.w,h:w.h}),I.y+=w.h,I.h-=w.h);break}}return{w:g,h:b,fill:o/(g*b)||0}}const rl=1;class KS{constructor(o,{pixelRatio:d,version:f,stretchX:g,stretchY:b,content:w}){this.paddedRect=o,this.pixelRatio=d,this.stretchX=g,this.stretchY=b,this.content=w,this.version=f}get tl(){return[this.paddedRect.x+rl,this.paddedRect.y+rl]}get br(){return[this.paddedRect.x+this.paddedRect.w-rl,this.paddedRect.y+this.paddedRect.h-rl]}get displaySize(){return[(this.paddedRect.w-2*rl)/this.pixelRatio,(this.paddedRect.h-2*rl)/this.pixelRatio]}}class WD{constructor(o,d){const f={},g={};this.haveRenderCallbacks=[];const b=[];this.addImages(o,f,b),this.addImages(d,g,b);const{w,h:E}=qS(b),I=new Tl({width:w||1,height:E||1});for(const D in o){const N=o[D],j=f[D].paddedRect;Tl.copy(N.data,I,{x:0,y:0},{x:j.x+rl,y:j.y+rl},N.data)}for(const D in d){const N=d[D],j=g[D].paddedRect,Z=j.x+rl,ne=j.y+rl,oe=N.data.width,he=N.data.height;Tl.copy(N.data,I,{x:0,y:0},{x:Z,y:ne},N.data),Tl.copy(N.data,I,{x:0,y:he-1},{x:Z,y:ne-1},{width:oe,height:1}),Tl.copy(N.data,I,{x:0,y:0},{x:Z,y:ne+he},{width:oe,height:1}),Tl.copy(N.data,I,{x:oe-1,y:0},{x:Z-1,y:ne},{width:1,height:he}),Tl.copy(N.data,I,{x:0,y:0},{x:Z+oe,y:ne},{width:1,height:he})}this.image=I,this.iconPositions=f,this.patternPositions=g}addImages(o,d,f){for(const g in o){const b=o[g],w={x:0,y:0,w:b.data.width+2*rl,h:b.data.height+2*rl};f.push(w),d[g]=new KS(w,b),b.hasRenderCallback&&this.haveRenderCallbacks.push(g)}}patchUpdatedImages(o,d){this.haveRenderCallbacks=this.haveRenderCallbacks.filter((f=>o.hasImage(f))),o.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const f in o.updatedImages)this.patchUpdatedImage(this.iconPositions[f],o.getImage(f),d),this.patchUpdatedImage(this.patternPositions[f],o.getImage(f),d)}patchUpdatedImage(o,d,f){if(!o||!d||o.version===d.version)return;o.version=d.version;const[g,b]=o.tl;f.update(d.data,void 0,{x:g,y:b})}}Sn(KS,"ImagePosition"),Sn(WD,"ImageAtlas");const Yl={horizontal:1,vertical:2,horizontalOnly:3},HD=-17;class ly{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(o,d){const f=new ly;return f.scale=o||1,f.fontStack=d,f}static forImage(o){const d=new ly;return d.imageName=o,d}}class Xg{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(o,d){const f=new Xg;for(let g=0;g<o.sections.length;g++){const b=o.sections[g];b.image?f.addImageSection(b):f.addTextSection(b,d)}return f}length(){return this.text.length}getSection(o){return this.sections[this.sectionIndex[o]]}getSections(){return this.sections}getSectionIndex(o){return this.sectionIndex[o]}getCharCode(o){return this.text.charCodeAt(o)}verticalizePunctuation(o){this.text=(function(d,f){let g="";for(let b=0;b<d.length;b++){const w=d.charCodeAt(b+1)||null,E=d.charCodeAt(b-1)||null;g+=!f&&(w&&Rd(w)&&!ay[d[b+1]]||E&&Rd(E)&&!ay[d[b-1]])||!ay[d[b]]?d[b]:ay[d[b]]}return g})(this.text,o)}trim(){let o=0;for(let f=0;f<this.text.length&&px[this.text.charCodeAt(f)];f++)o++;let d=this.text.length;for(let f=this.text.length-1;f>=0&&f>=o&&px[this.text.charCodeAt(f)];f--)d--;this.text=this.text.substring(o,d),this.sectionIndex=this.sectionIndex.slice(o,d)}substring(o,d){const f=new Xg;return f.text=this.text.substring(o,d),f.sectionIndex=this.sectionIndex.slice(o,d),f.sections=this.sections,f}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((o,d)=>Math.max(o,this.sections[d].scale)),0)}addTextSection(o,d){this.text+=o.text,this.sections.push(ly.forText(o.scale,o.fontStack||d));const f=this.sections.length-1;for(let g=0;g<o.text.length;++g)this.sectionIndex.push(f)}addImageSection(o){const d=o.image?o.image.name:"";if(d.length===0)return void je("Can't add FormattedSection with an empty image.");const f=this.getNextImageSectionCharCode();f?(this.text+=String.fromCharCode(f),this.sections.push(ly.forImage(d)),this.sectionIndex.push(this.sections.length-1)):je("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function XS(c,o,d,f,g,b,w,E,I,D,N,j,Z,ne,oe){const he=Xg.fromFeature(c,g);j===Yl.vertical&&he.verticalizePunctuation(Z);let Te=[];const Oe=(function(Ze,Tt,bt,Ft,sn,It){if(!Ze)return[];const jt=[],Wt=(function(_n,kn,xn,ri,un,Vn){let si=0;for(let Di=0;Di<_n.length();Di++){const oi=_n.getSection(Di);si+=GD(_n.getCharCode(Di),oi,ri,un,kn,Vn)}return si/Math.max(1,Math.ceil(si/xn))})(Ze,Tt,bt,Ft,sn,It),Qt=Ze.text.indexOf("")>=0;let cn=0;for(let _n=0;_n<Ze.length();_n++){const kn=Ze.getSection(_n),xn=Ze.getCharCode(_n);if(px[xn]||(cn+=GD(xn,kn,Ft,sn,Tt,It)),_n<Ze.length()-1){const ri=!((Bt=xn)<11904||!(yn["Bopomofo Extended"](Bt)||yn.Bopomofo(Bt)||yn["CJK Compatibility Forms"](Bt)||yn["CJK Compatibility Ideographs"](Bt)||yn["CJK Compatibility"](Bt)||yn["CJK Radicals Supplement"](Bt)||yn["CJK Strokes"](Bt)||yn["CJK Symbols and Punctuation"](Bt)||yn["CJK Unified Ideographs Extension A"](Bt)||yn["CJK Unified Ideographs"](Bt)||yn["Enclosed CJK Letters and Months"](Bt)||yn["Halfwidth and Fullwidth Forms"](Bt)||yn.Hiragana(Bt)||yn["Ideographic Description Characters"](Bt)||yn["Kangxi Radicals"](Bt)||yn["Katakana Phonetic Extensions"](Bt)||yn.Katakana(Bt)||yn["Vertical Forms"](Bt)||yn["Yi Radicals"](Bt)||yn["Yi Syllables"](Bt)));(MU[xn]||ri||kn.imageName)&&jt.push(KD(_n+1,cn,Wt,jt,DU(xn,Ze.getCharCode(_n+1),ri&&Qt),!1))}}var Bt;return XD(KD(Ze.length(),cn,Wt,jt,0,!0))})(he,D,b,o,f,ne),{processBidirectionalText:He,processStyledBidirectionalText:Ve}=O;if(He&&he.sections.length===1){const Ze=He(he.toString(),Oe);for(const Tt of Ze){const bt=new Xg;bt.text=Tt,bt.sections=he.sections;for(let Ft=0;Ft<Tt.length;Ft++)bt.sectionIndex.push(0);Te.push(bt)}}else if(Ve){const Ze=Ve(he.text,he.sectionIndex,Oe);for(const Tt of Ze){const bt=new Xg;bt.text=Tt[0],bt.sectionIndex=Tt[1],bt.sections=he.sections,Te.push(bt)}}else Te=(function(Ze,Tt){const bt=[],Ft=Ze.text;let sn=0;for(const It of Tt)bt.push(Ze.substring(sn,It)),sn=It;return sn<Ft.length&&bt.push(Ze.substring(sn,Ft.length)),bt})(he,Oe);const Ne=[],et={positionedLines:Ne,text:he.toString(),top:N[1],bottom:N[1],left:N[0],right:N[0],writingMode:j,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return(function(Ze,Tt,bt,Ft,sn,It,jt,Wt,Qt,cn,Bt,_n){let kn=0,xn=0,ri=0;const un=Wt==="right"?1:Wt==="left"?0:.5;let Vn=!1;for(const li of sn){const ci=li.getSections();for(const lr of ci){if(lr.imageName)continue;const _r=Tt[lr.fontStack];if(_r&&(Vn=_r.ascender!==void 0&&_r.descender!==void 0,!Vn))break}if(!Vn)break}let si=0;for(const li of sn){li.trim();const ci=li.getMaxScale(),lr=(ci-1)*fo,_r={positionedGlyphs:[],lineOffset:0};Ze.positionedLines[si]=_r;const yr=_r.positionedGlyphs;let cr=0;if(!li.length()){xn+=It,++si;continue}let Fr=0,Zr=0;for(let ur=0;ur<li.length();ur++){const Ms=li.getSection(ur),ps=li.getSectionIndex(ur),Gr=li.getCharCode(ur);let Vi=Ms.scale,gs=null,br=null,ka=null,vs=fo,mo=0;const Qs=!(Qt===Yl.horizontal||!Bt&&!Mu(Gr)||Bt&&(px[Gr]||(Di=Gr,yn.Arabic(Di)||yn["Arabic Supplement"](Di)||yn["Arabic Extended-A"](Di)||yn["Arabic Presentation Forms-A"](Di)||yn["Arabic Presentation Forms-B"](Di))));if(Ms.imageName){const Ia=Ft[Ms.imageName];if(!Ia)continue;ka=Ms.imageName,Ze.iconsInText=Ze.iconsInText||!0,br=Ia.paddedRect;const eo=Ia.displaySize;Vi=Vi*fo/_n,gs={width:eo[0],height:eo[1],left:rl,top:-jD,advance:Qs?eo[1]:eo[0],localGlyph:!1},mo=Vn?-gs.height*Vi:HD+ci*fo-eo[1]*Vi,vs=gs.advance;const au=(Qs?eo[0]:eo[1])*Vi-fo*ci;au>0&&au>cr&&(cr=au)}else{const Ia=bt[Ms.fontStack];if(!Ia)continue;Ia[Gr]&&(br=Ia[Gr]);const eo=Tt[Ms.fontStack];if(!eo)continue;const au=eo.glyphs[Gr];if(!au)continue;if(gs=au.metrics,vs=Gr!==8203?fo:0,Vn){const nv=eo.ascender!==void 0?Math.abs(eo.ascender):0,_y=eo.descender!==void 0?Math.abs(eo.descender):0,yy=(nv+_y)*Vi;Fr<yy&&(Fr=yy,Zr=(nv-_y)/2*Vi),mo=-nv*Vi}else mo=HD+(ci-Vi)*fo}Qs?(Ze.verticalizable=!0,yr.push({glyph:Gr,imageName:ka,x:kn,y:xn+mo,vertical:Qs,scale:Vi,localGlyph:gs.localGlyph,fontStack:Ms.fontStack,sectionIndex:ps,metrics:gs,rect:br}),kn+=vs*Vi+cn):(yr.push({glyph:Gr,imageName:ka,x:kn,y:xn+mo,vertical:Qs,scale:Vi,localGlyph:gs.localGlyph,fontStack:Ms.fontStack,sectionIndex:ps,metrics:gs,rect:br}),kn+=gs.advance*Vi+cn)}yr.length!==0&&(ri=Math.max(kn-cn,ri),Vn?YD(yr,un,cr,Zr,It*ci/2):YD(yr,un,cr,0,It/2)),kn=0;const ms=It*ci+cr;_r.lineOffset=Math.max(cr,lr),xn+=ms,++si}var Di;const oi=xn,{horizontalAlign:$n,verticalAlign:Sr}=YS(jt);(function(li,ci,lr,_r,yr,cr){const Fr=(ci-lr)*yr,Zr=-cr*_r;for(const ms of li)for(const ur of ms.positionedGlyphs)ur.x+=Fr,ur.y+=Zr})(Ze.positionedLines,un,$n,Sr,ri,oi),Ze.top+=-Sr*oi,Ze.bottom=Ze.top+oi,Ze.left+=-$n*ri,Ze.right=Ze.left+ri,Ze.hasBaseline=Vn})(et,o,d,f,Te,w,E,I,j,D,Z,oe),!(function(Ze){for(const Tt of Ze)if(Tt.positionedGlyphs.length!==0)return!1;return!0})(Ne)&&et}const px={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},MU={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function GD(c,o,d,f,g,b){if(o.imageName){const w=f[o.imageName];return w?w.displaySize[0]*o.scale*fo/b+g:0}{const w=d[o.fontStack],E=w&&w.glyphs[c];return E?E.metrics.advance*o.scale+g:0}}function qD(c,o,d,f){const g=Math.pow(c-o,2);return f?c<o?g/2:2*g:g+Math.abs(d)*d}function DU(c,o,d){let f=0;return c===10&&(f-=1e4),d&&(f+=150),c!==40&&c!==65288||(f+=50),o!==41&&o!==65289||(f+=50),f}function KD(c,o,d,f,g,b){let w=null,E=qD(o,d,g,b);for(const I of f){const D=qD(o-I.x,d,g,b)+I.badness;D<=E&&(w=I,E=D)}return{index:c,x:o,priorBreak:w,badness:E}}function XD(c){return c?XD(c.priorBreak).concat(c.index):[]}function YS(c){let o=.5,d=.5;switch(c){case"right":case"top-right":case"bottom-right":o=1;break;case"left":case"top-left":case"bottom-left":o=0}switch(c){case"bottom":case"bottom-right":case"bottom-left":d=1;break;case"top":case"top-right":case"top-left":d=0}return{horizontalAlign:o,verticalAlign:d}}function YD(c,o,d,f,g){if(!(o||d||f||g))return;const b=c.length-1,w=c[b],E=(w.x+w.metrics.advance*w.scale)*o;for(let I=0;I<=b;I++)c[I].x-=E,c[I].y+=d+f+g}function LU(c,o,d){const{horizontalAlign:f,verticalAlign:g}=YS(d),b=o[0]-c.displaySize[0]*f,w=o[1]-c.displaySize[1]*g;return{image:c,top:w,bottom:w+c.displaySize[1],left:b,right:b+c.displaySize[0]}}function ZD(c,o,d,f,g,b){const w=c.image;let E;if(w.content){const Te=w.content,Oe=w.pixelRatio||1;E=[Te[0]/Oe,Te[1]/Oe,w.displaySize[0]-Te[2]/Oe,w.displaySize[1]-Te[3]/Oe]}const I=o.left*b,D=o.right*b;let N,j,Z,ne;d==="width"||d==="both"?(ne=g[0]+I-f[3],j=g[0]+D+f[1]):(ne=g[0]+(I+D-w.displaySize[0])/2,j=ne+w.displaySize[0]);const oe=o.top*b,he=o.bottom*b;return d==="height"||d==="both"?(N=g[1]+oe-f[0],Z=g[1]+he+f[2]):(N=g[1]+(oe+he-w.displaySize[1])/2,Z=N+w.displaySize[1]),{image:w,top:N,right:j,bottom:Z,left:ne,collisionPadding:E}}class Hd extends W{constructor(o,d,f,g,b){super(o,d),this.angle=g,this.z=f,b!==void 0&&(this.segment=b)}clone(){return new Hd(this.x,this.y,this.z,this.angle,this.segment)}}function JD(c,o,d,f,g){if(o.segment===void 0)return!0;let b=o,w=o.segment+1,E=0;for(;E>-d/2;){if(w--,w<0)return!1;E-=c[w].dist(b),b=c[w]}E+=c[w].dist(c[w+1]),w++;const I=[];let D=0;for(;E<d/2;){const N=c[w],j=c[w+1];if(!j)return!1;let Z=c[w-1].angleTo(N)-N.angleTo(j);for(Z=Math.abs((Z+3*Math.PI)%(2*Math.PI)-Math.PI),I.push({distance:E,angleDelta:Z}),D+=Z;E-I[0].distance>f;)D-=I.shift().angleDelta;if(D>g)return!1;w++,E+=N.dist(j)}return!0}function QD(c){let o=0;for(let d=0;d<c.length-1;d++)o+=c[d].dist(c[d+1]);return o}function eL(c,o,d){return c?.6*o*d:0}function tL(c,o){return Math.max(c?c.right-c.left:0,o?o.right-o.left:0)}function RU(c,o,d,f,g,b){const w=eL(d,g,b),E=tL(d,f)*b;let I=0;const D=QD(c)/2;for(let N=0;N<c.length-1;N++){const j=c[N],Z=c[N+1],ne=j.dist(Z);if(I+ne>D){const oe=(D-I)/ne,he=Qn(j.x,Z.x,oe),Te=Qn(j.y,Z.y,oe),Oe=new Hd(he,Te,0,Z.angleTo(j),N);return!w||JD(c,Oe,E,w,o)?Oe:void 0}I+=ne}}function OU(c,o,d,f,g,b,w,E,I){const D=eL(f,b,w),N=tL(f,g),j=N*w,Z=c[0].x===0||c[0].x===I||c[0].y===0||c[0].y===I;return o-j<o/4&&(o=j+o/4),nL(c,Z?o/2*E%o:(N/2+2*b)*w*E%o,o,D,d,j,Z,!1,I)}function nL(c,o,d,f,g,b,w,E,I){const D=b/2,N=QD(c);let j=0,Z=o-d,ne=[];for(let oe=0;oe<c.length-1;oe++){const he=c[oe],Te=c[oe+1],Oe=he.dist(Te),He=Te.angleTo(he);for(;Z+d<j+Oe;){Z+=d;const Ve=(Z-j)/Oe,Ne=Qn(he.x,Te.x,Ve),et=Qn(he.y,Te.y,Ve);if(Ne>=0&&Ne<I&&et>=0&&et<I&&Z-D>=0&&Z+D<=N){const Ze=new Hd(Ne,et,0,He,oe);Ze._round(),f&&!JD(c,Ze,b,f,g)||ne.push(Ze)}}j+=Oe}return E||ne.length||w||(ne=nL(c,j/2,d,f,g,b,w,!0,I)),ne}function iL(c,o,d,f,g){const b=[];for(let w=0;w<c.length;w++){const E=c[w];let I;for(let D=0;D<E.length-1;D++){let N=E[D],j=E[D+1];N.x<o&&j.x<o||(N.x<o?N=new W(o,N.y+(o-N.x)/(j.x-N.x)*(j.y-N.y))._round():j.x<o&&(j=new W(o,N.y+(o-N.x)/(j.x-N.x)*(j.y-N.y))._round()),N.y<d&&j.y<d||(N.y<d?N=new W(N.x+(d-N.y)/(j.y-N.y)*(j.x-N.x),d)._round():j.y<d&&(j=new W(N.x+(d-N.y)/(j.y-N.y)*(j.x-N.x),d)._round()),N.x>=f&&j.x>=f||(N.x>=f?N=new W(f,N.y+(f-N.x)/(j.x-N.x)*(j.y-N.y))._round():j.x>=f&&(j=new W(f,N.y+(f-N.x)/(j.x-N.x)*(j.y-N.y))._round()),N.y>=g&&j.y>=g||(N.y>=g?N=new W(N.x+(g-N.y)/(j.y-N.y)*(j.x-N.x),g)._round():j.y>=g&&(j=new W(N.x+(g-N.y)/(j.y-N.y)*(j.x-N.x),g)._round()),I&&N.equals(I[I.length-1])||(I=[N],b.push(I)),I.push(j)))))}}return b}Sn(Hd,"Anchor");const cy=1e20;function rL(c,o,d,f,g,b,w,E,I){for(let D=o;D<o+f;D++)sL(c,d*b+D,b,g,w,E,I);for(let D=d;D<d+g;D++)sL(c,D*b+o,1,f,w,E,I)}function sL(c,o,d,f,g,b,w){b[0]=0,w[0]=-cy,w[1]=cy,g[0]=c[o];for(let E=1,I=0,D=0;E<f;E++){g[E]=c[o+E*d];const N=E*E;do{const j=b[I];D=(g[E]-g[j]+N-j*j)/(E-j)/2}while(D<=w[I]&&--I>-1);I++,b[I]=E,w[I]=D,w[I+1]=cy}for(let E=0,I=0;E<f;E++){for(;w[I+1]<E;)I++;const D=b[I],N=E-D;c[o+E*d]=g[D]+N*N}}const su=2,ZS={none:0,ideographs:1,all:2};class Yg{constructor(o,d,f){this.requestManager=o,this.localGlyphMode=d,this.localFontFamily=f,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(o){this.url=o}getGlyphs(o,d){const f=[];for(const g in o)for(const b of o[g])f.push({stack:g,id:b});it(f,(({stack:g,id:b},w)=>{let E=this.entries[g];E||(E=this.entries[g]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let I=E.glyphs[b];if(I!==void 0)return void w(null,{stack:g,id:b,glyph:I});if(I=this._tinySDF(E,g,b),I)return E.glyphs[b]=I,void w(null,{stack:g,id:b,glyph:I});const D=Math.floor(b/256);if(256*D>65535)return void w(new Error("glyphs > 65535 not supported"));if(E.ranges[D])return void w(null,{stack:g,id:b,glyph:I});let N=E.requests[D];N||(N=E.requests[D]=[],Yg.loadGlyphRange(g,D,this.url,this.requestManager,((j,Z)=>{if(Z){E.ascender=Z.ascender,E.descender=Z.descender;for(const ne in Z.glyphs)this._doesCharSupportLocalGlyph(+ne)||(E.glyphs[+ne]=Z.glyphs[+ne]);E.ranges[D]=!0}for(const ne of N)ne(j,Z);delete E.requests[D]}))),N.push(((j,Z)=>{j?w(j):Z&&w(null,{stack:g,id:b,glyph:Z.glyphs[b]||null})}))}),((g,b)=>{if(g)d(g);else if(b){const w={};for(const{stack:E,id:I,glyph:D}of b)w[E]===void 0&&(w[E]={}),w[E].glyphs===void 0&&(w[E].glyphs={}),w[E].glyphs[I]=D&&{id:D.id,bitmap:D.bitmap.clone(),metrics:D.metrics},w[E].ascender=this.entries[E].ascender,w[E].descender=this.entries[E].descender;d(null,w)}}))}_doesCharSupportLocalGlyph(o){return this.localGlyphMode!==ZS.none&&(this.localGlyphMode===ZS.all?!!this.localFontFamily:!!this.localFontFamily&&(yn["CJK Unified Ideographs"](o)||yn["Hangul Syllables"](o)||yn.Hiragana(o)||yn.Katakana(o)||yn["CJK Symbols and Punctuation"](o)))}_tinySDF(o,d,f){const g=this.localFontFamily;if(!g||!this._doesCharSupportLocalGlyph(f))return;let b=o.tinySDF;if(!b){let he="400";/bold/i.test(d)?he="900":/medium/i.test(d)?he="500":/light/i.test(d)&&(he="200"),b=o.tinySDF=new Yg.TinySDF({fontFamily:g,fontWeight:he,fontSize:24*su,buffer:3*su,radius:8*su}),b.fontWeight=he}if(this.localGlyphs[b.fontWeight][f])return this.localGlyphs[b.fontWeight][f];const w=String.fromCharCode(f),{data:E,width:I,height:D,glyphWidth:N,glyphHeight:j,glyphLeft:Z,glyphTop:ne,glyphAdvance:oe}=b.draw(w);return this.localGlyphs[b.fontWeight][f]={id:f,bitmap:new jd({width:I,height:D},E),metrics:{width:N/su,height:j/su,left:Z/su,top:ne/su-27,advance:oe/su,localGlyph:!0}}}}Yg.loadGlyphRange=function(c,o,d,f,g){const b=256*o,w=b+255,E=f.transformRequest(f.normalizeGlyphsURL(d).replace("{fontstack}",c).replace("{range}",`${b}-${w}`),Ss.Glyphs);So(E,((I,D)=>{if(I)g(I);else if(D){const N={},j=(function(Z){return new mx(Z).readFields(IU,{})})(D);for(const Z of j.glyphs)N[Z.id]=Z;g(null,{glyphs:N,ascender:j.ascender,descender:j.descender})}}))},Yg.TinySDF=class{constructor({fontSize:c=24,buffer:o=3,radius:d=8,cutoff:f=.25,fontFamily:g="sans-serif",fontWeight:b="normal",fontStyle:w="normal"}={}){this.buffer=o,this.cutoff=f,this.radius=d;const E=this.size=c+4*o,I=this._createCanvas(E),D=this.ctx=I.getContext("2d",{willReadFrequently:!0});D.font=`${w} ${b} ${c}px ${g}`,D.textBaseline="alphabetic",D.textAlign="left",D.fillStyle="black",this.gridOuter=new Float64Array(E*E),this.gridInner=new Float64Array(E*E),this.f=new Float64Array(E),this.z=new Float64Array(E+1),this.v=new Uint16Array(E)}_createCanvas(c){const o=document.createElement("canvas");return o.width=o.height=c,o}draw(c){const{width:o,actualBoundingBoxAscent:d,actualBoundingBoxDescent:f,actualBoundingBoxLeft:g,actualBoundingBoxRight:b}=this.ctx.measureText(c),w=Math.ceil(d),E=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(b-g))),I=Math.min(this.size-this.buffer,w+Math.ceil(f)),D=E+2*this.buffer,N=I+2*this.buffer,j=Math.max(D*N,0),Z=new Uint8ClampedArray(j),ne={data:Z,width:D,height:N,glyphWidth:E,glyphHeight:I,glyphTop:w,glyphLeft:0,glyphAdvance:o};if(E===0||I===0)return ne;const{ctx:oe,buffer:he,gridInner:Te,gridOuter:Oe}=this;oe.clearRect(he,he,E,I),oe.fillText(c,he,he+w);const He=oe.getImageData(he,he,E,I);Oe.fill(cy,0,j),Te.fill(0,0,j);for(let Ve=0;Ve<I;Ve++)for(let Ne=0;Ne<E;Ne++){const et=He.data[4*(Ve*E+Ne)+3]/255;if(et===0)continue;const Ze=(Ve+he)*D+Ne+he;if(et===1)Oe[Ze]=0,Te[Ze]=cy;else{const Tt=.5-et;Oe[Ze]=Tt>0?Tt*Tt:0,Te[Ze]=Tt<0?Tt*Tt:0}}rL(Oe,0,0,D,N,D,this.f,this.v,this.z),rL(Te,he,he,E,I,D,this.f,this.v,this.z);for(let Ve=0;Ve<j;Ve++){const Ne=Math.sqrt(Oe[Ve])-Math.sqrt(Te[Ve]);Z[Ve]=Math.round(255-255*(Ne/this.radius+this.cutoff))}return ne}};const Zg=rl;function oL(c,o,d,f){const g=[],b=c.image,w=b.pixelRatio,E=b.paddedRect.w-2*Zg,I=b.paddedRect.h-2*Zg,D=c.right-c.left,N=c.bottom-c.top,j=b.stretchX||[[0,E]],Z=b.stretchY||[[0,I]],ne=(It,jt)=>It+jt[1]-jt[0],oe=j.reduce(ne,0),he=Z.reduce(ne,0),Te=E-oe,Oe=I-he;let He=0,Ve=oe,Ne=0,et=he,Ze=0,Tt=Te,bt=0,Ft=Oe;if(b.content&&f){const It=b.content;He=gx(j,0,It[0]),Ne=gx(Z,0,It[1]),Ve=gx(j,It[0],It[2]),et=gx(Z,It[1],It[3]),Ze=It[0]-He,bt=It[1]-Ne,Tt=It[2]-It[0]-Ve,Ft=It[3]-It[1]-et}const sn=(It,jt,Wt,Qt)=>{const cn=vx(It.stretch-He,Ve,D,c.left),Bt=_x(It.fixed-Ze,Tt,It.stretch,oe),_n=vx(jt.stretch-Ne,et,N,c.top),kn=_x(jt.fixed-bt,Ft,jt.stretch,he),xn=vx(Wt.stretch-He,Ve,D,c.left),ri=_x(Wt.fixed-Ze,Tt,Wt.stretch,oe),un=vx(Qt.stretch-Ne,et,N,c.top),Vn=_x(Qt.fixed-bt,Ft,Qt.stretch,he),si=new W(cn,_n),Di=new W(xn,_n),oi=new W(xn,un),$n=new W(cn,un),Sr=new W(Bt/w,kn/w),li=new W(ri/w,Vn/w),ci=o*Math.PI/180;if(ci){const yr=Math.sin(ci),cr=Math.cos(ci),Fr=[cr,-yr,yr,cr];si._matMult(Fr),Di._matMult(Fr),$n._matMult(Fr),oi._matMult(Fr)}const lr=It.stretch+It.fixed,_r=jt.stretch+jt.fixed;return{tl:si,tr:Di,bl:$n,br:oi,tex:{x:b.paddedRect.x+Zg+lr,y:b.paddedRect.y+Zg+_r,w:Wt.stretch+Wt.fixed-lr,h:Qt.stretch+Qt.fixed-_r},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Sr,pixelOffsetBR:li,minFontScaleX:Tt/w/D,minFontScaleY:Ft/w/N,isSDF:d}};if(f&&(b.stretchX||b.stretchY)){const It=aL(j,Te,oe),jt=aL(Z,Oe,he);for(let Wt=0;Wt<It.length-1;Wt++){const Qt=It[Wt],cn=It[Wt+1];for(let Bt=0;Bt<jt.length-1;Bt++)g.push(sn(Qt,jt[Bt],cn,jt[Bt+1]))}}else g.push(sn({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:E+1},{fixed:0,stretch:I+1}));return g}function gx(c,o,d){let f=0;for(const g of c)f+=Math.max(o,Math.min(d,g[1]))-Math.max(o,Math.min(d,g[0]));return f}function aL(c,o,d){const f=[{fixed:-Zg,stretch:0}];for(const[g,b]of c){const w=f[f.length-1];f.push({fixed:g-w.stretch,stretch:w.stretch}),f.push({fixed:g-w.stretch,stretch:w.stretch+(b-g)})}return f.push({fixed:o+Zg,stretch:d}),f}function vx(c,o,d,f){return c/o*d+f}function _x(c,o,d,f){return c-o*d/f}function VU(c,o,d,f){const g=o+c.positionedLines[f].lineOffset;return f===0?d+g/2:d+(g+(o+c.positionedLines[f-1].lineOffset))/2}class BU{constructor(o=[],d=FU){if(this.data=o,this.length=this.data.length,this.compare=d,this.length>0)for(let f=(this.length>>1)-1;f>=0;f--)this._down(f)}push(o){this.data.push(o),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const o=this.data[0],d=this.data.pop();return this.length--,this.length>0&&(this.data[0]=d,this._down(0)),o}peek(){return this.data[0]}_up(o){const{data:d,compare:f}=this,g=d[o];for(;o>0;){const b=o-1>>1,w=d[b];if(f(g,w)>=0)break;d[o]=w,o=b}d[o]=g}_down(o){const{data:d,compare:f}=this,g=this.length>>1,b=d[o];for(;o<g;){let w=1+(o<<1),E=d[w];const I=w+1;if(I<this.length&&f(d[I],E)<0&&(w=I,E=d[I]),f(E,b)>=0)break;d[o]=E,o=w}d[o]=b}}function FU(c,o){return c<o?-1:c>o?1:0}function zU(c,o=1,d=!1){let f=1/0,g=1/0,b=-1/0,w=-1/0;const E=c[0];for(let ne=0;ne<E.length;ne++){const oe=E[ne];(!ne||oe.x<f)&&(f=oe.x),(!ne||oe.y<g)&&(g=oe.y),(!ne||oe.x>b)&&(b=oe.x),(!ne||oe.y>w)&&(w=oe.y)}const I=Math.min(b-f,w-g);let D=I/2;const N=new BU([],NU);if(I===0)return new W(f,g);for(let ne=f;ne<b;ne+=I)for(let oe=g;oe<w;oe+=I)N.push(new Jg(ne+D,oe+D,D,c));let j=(function(ne){let oe=0,he=0,Te=0;const Oe=ne[0];for(let He=0,Ve=Oe.length,Ne=Ve-1;He<Ve;Ne=He++){const et=Oe[He],Ze=Oe[Ne],Tt=et.x*Ze.y-Ze.x*et.y;he+=(et.x+Ze.x)*Tt,Te+=(et.y+Ze.y)*Tt,oe+=3*Tt}return new Jg(he/oe,Te/oe,0,ne)})(c),Z=N.length;for(;N.length;){const ne=N.pop();(ne.d>j.d||!j.d)&&(j=ne,d&&console.log("found best %d after %d probes",Math.round(1e4*ne.d)/1e4,Z)),ne.max-j.d<=o||(D=ne.h/2,N.push(new Jg(ne.p.x-D,ne.p.y-D,D,c)),N.push(new Jg(ne.p.x+D,ne.p.y-D,D,c)),N.push(new Jg(ne.p.x-D,ne.p.y+D,D,c)),N.push(new Jg(ne.p.x+D,ne.p.y+D,D,c)),Z+=4)}return d&&(console.log(`num probes: ${Z}`),console.log(`best distance: ${j.d}`)),j.p}function NU(c,o){return o.max-c.max}class Jg{constructor(o,d,f,g){this.p=new W(o,d),this.h=f,this.d=(function(b,w){let E=!1,I=1/0;for(let D=0;D<w.length;D++){const N=w[D];for(let j=0,Z=N.length,ne=Z-1;j<Z;ne=j++){const oe=N[j],he=N[ne];oe.y>b.y!=he.y>b.y&&b.x<(he.x-oe.x)*(b.y-oe.y)/(he.y-oe.y)+oe.x&&(E=!E),I=Math.min(I,nD(b,oe,he))}}return(E?1:-1)*Math.sqrt(I)})(this.p,g),this.max=this.d+this.h*Math.SQRT2}}const Qg=7,JS=Number.POSITIVE_INFINITY,$U=Math.sqrt(2);function lL(c,[o,d]){let f=0,g=0;if(d===JS){o<0&&(o=0);const b=o/$U;switch(c){case"top-right":case"top-left":g=b-Qg;break;case"bottom-right":case"bottom-left":g=-b+Qg;break;case"bottom":g=-o+Qg;break;case"top":g=o-Qg}switch(c){case"top-right":case"bottom-right":f=-b;break;case"top-left":case"bottom-left":f=b;break;case"left":f=o;break;case"right":f=-o}}else{switch(o=Math.abs(o),d=Math.abs(d),c){case"top-right":case"top-left":case"top":g=d-Qg;break;case"bottom-right":case"bottom-left":case"bottom":g=-d+Qg}switch(c){case"top-right":case"bottom-right":case"right":f=-o;break;case"top-left":case"bottom-left":case"left":f=o}}return[f,g]}function UU(c,o,d,f,g,b,w,E,I,D){c.createArrays(),c.tilePixelRatio=zn/(512*c.overscaling),c.compareText={},c.iconsNeedLinear=!1;const N=c.layers[0].layout,j=c.layers[0]._unevaluatedLayout._values,Z={};if(c.textSizeData.kind==="composite"){const{minZoom:he,maxZoom:Te}=c.textSizeData;Z.compositeTextSizes=[j["text-size"].possiblyEvaluate(new $(he),E),j["text-size"].possiblyEvaluate(new $(Te),E)]}if(c.iconSizeData.kind==="composite"){const{minZoom:he,maxZoom:Te}=c.iconSizeData;Z.compositeIconSizes=[j["icon-size"].possiblyEvaluate(new $(he),E),j["icon-size"].possiblyEvaluate(new $(Te),E)]}Z.layoutTextSize=j["text-size"].possiblyEvaluate(new $(I+1),E),Z.layoutIconSize=j["icon-size"].possiblyEvaluate(new $(I+1),E),Z.textMaxSize=j["text-size"].possiblyEvaluate(new $(18),E);const ne=N.get("text-rotation-alignment")==="map"&&N.get("symbol-placement")!=="point",oe=N.get("text-size");for(const he of c.features){const Te=N.get("text-font").evaluate(he,{},E).join(","),Oe=oe.evaluate(he,{},E),He=Z.layoutTextSize.evaluate(he,{},E),Ve=(Z.layoutIconSize.evaluate(he,{},E),{horizontal:{},vertical:void 0}),Ne=he.text;let et,Ze=[0,0];if(Ne){const Ft=Ne.toString(),sn=N.get("text-letter-spacing").evaluate(he,{},E)*fo,It=N.get("text-line-height").evaluate(he,{},E)*fo,jt=B_(Ft)?sn:0,Wt=N.get("text-anchor").evaluate(he,{},E),Qt=N.get("text-variable-anchor");if(!Qt){const xn=N.get("text-radial-offset").evaluate(he,{},E);Ze=xn?lL(Wt,[xn*fo,JS]):N.get("text-offset").evaluate(he,{},E).map((ri=>ri*fo))}let cn=ne?"center":N.get("text-justify").evaluate(he,{},E);const Bt=N.get("symbol-placement")==="point",_n=Bt?N.get("text-max-width").evaluate(he,{},E)*fo:1/0,kn=xn=>{c.allowVerticalPlacement&&Vm(Ft)&&(Ve.vertical=XS(Ne,o,d,g,Te,_n,It,Wt,xn,jt,Ze,Yl.vertical,!0,He,Oe))};if(!ne&&Qt){const xn=cn==="auto"?Qt.map((un=>QS(un))):[cn];let ri=!1;for(let un=0;un<xn.length;un++){const Vn=xn[un];if(!Ve.horizontal[Vn])if(ri)Ve.horizontal[Vn]=Ve.horizontal[0];else{const si=XS(Ne,o,d,g,Te,_n,It,"center",Vn,jt,Ze,Yl.horizontal,!1,He,Oe);si&&(Ve.horizontal[Vn]=si,ri=si.positionedLines.length===1)}}kn("left")}else{if(cn==="auto"&&(cn=QS(Wt)),Bt||N.get("text-writing-mode").indexOf("horizontal")>=0||!Vm(Ft)){const xn=XS(Ne,o,d,g,Te,_n,It,Wt,cn,jt,Ze,Yl.horizontal,!1,He,Oe);xn&&(Ve.horizontal[cn]=xn)}kn(Bt?"left":cn)}}let Tt=!1;if(he.icon&&he.icon.name){const Ft=f[he.icon.name];Ft&&(et=LU(g[he.icon.name],N.get("icon-offset").evaluate(he,{},E),N.get("icon-anchor").evaluate(he,{},E)),Tt=Ft.sdf,c.sdfIcons===void 0?c.sdfIcons=Ft.sdf:c.sdfIcons!==Ft.sdf&&je("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ft.pixelRatio!==c.pixelRatio||N.get("icon-rotate").constantOr(1)!==0)&&(c.iconsNeedLinear=!0))}const bt=uL(Ve.horizontal)||Ve.vertical;c.iconsInText||(c.iconsInText=!!bt&&bt.iconsInText),(bt||et)&&jU(c,he,Ve,et,f,Z,He,0,Ze,Tt,w,E,D)}b&&c.generateCollisionDebugBuffers(I,c.collisionBoxArray)}function QS(c){switch(c){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function jU(c,o,d,f,g,b,w,E,I,D,N,j,Z){let ne=b.textMaxSize.evaluate(o,{},j);ne===void 0&&(ne=w);const oe=c.layers[0].layout,he=oe.get("icon-offset").evaluate(o,{},j),Te=uL(d.horizontal)||d.vertical,Oe=Z.name==="globe",He=fo,Ve=w/He,Ne=c.tilePixelRatio*ne/He,et=(Wt=c.overscaling,c.zoom>18&&Wt>2&&(Wt>>=1),Math.max(zn/(512*Wt),1)*oe.get("symbol-spacing")),Ze=oe.get("text-padding")*c.tilePixelRatio,Tt=oe.get("icon-padding")*c.tilePixelRatio,bt=te(oe.get("text-max-angle")),Ft=oe.get("text-rotation-alignment")==="map"&&oe.get("symbol-placement")!=="point",sn=oe.get("icon-rotation-alignment")==="map"&&oe.get("symbol-placement")!=="point",It=oe.get("symbol-placement"),jt=et/2;var Wt;const Qt=oe.get("icon-text-fit");let cn;f&&Qt!=="none"&&(c.allowVerticalPlacement&&d.vertical&&(cn=ZD(f,d.vertical,Qt,oe.get("icon-text-fit-padding"),he,Ve)),Te&&(f=ZD(f,Te,Qt,oe.get("icon-text-fit-padding"),he,Ve)));const Bt=(_n,kn,xn)=>{if(kn.x<0||kn.x>=zn||kn.y<0||kn.y>=zn)return;let ri=null;if(Oe){const{x:un,y:Vn,z:si}=Z.projectTilePoint(kn.x,kn.y,xn);ri={anchor:new Hd(un,Vn,si,0,void 0),up:Z.upVector(xn,kn.x,kn.y)}}(function(un,Vn,si,Di,oi,$n,Sr,li,ci,lr,_r,yr,cr,Fr,Zr,ms,ur,Ms,ps,Gr,Vi,gs,br,ka,vs){const mo=un.addToLineVertexArray(Vn,Di);let Qs,Ia,eo,au,nv,_y,yy,jL=0,WL=0,HL=0,GL=0,mE=-1,pE=-1;const zu={};let qL=uS("");const Ym=si?si.anchor:Vn;let gE=0,vE=0;if(ci._unevaluatedLayout.getValue("text-radial-offset")===void 0?[gE,vE]=ci.layout.get("text-offset").evaluate(Vi,{},vs).map((Sl=>Sl*fo)):(gE=ci.layout.get("text-radial-offset").evaluate(Vi,{},vs)*fo,vE=JS),un.allowVerticalPlacement&&oi.vertical){const Sl=oi.vertical;if(Zr)_y=eE(Sl),li&&(yy=eE(li));else{const El=ci.layout.get("text-rotate").evaluate(Vi,{},vs)+90;eo=yx(lr,Ym,Vn,_r,yr,cr,Sl,Fr,El,ms),li&&(au=yx(lr,Ym,Vn,_r,yr,cr,li,Ms,El))}}if($n){const Sl=ci.layout.get("icon-rotate").evaluate(Vi,{},vs),El=ci.layout.get("icon-text-fit")!=="none",by=oL($n,Sl,br,El),yE=li?oL(li,Sl,br,El):void 0;Ia=yx(lr,Ym,Vn,_r,yr,cr,$n,Ms,Sl),jL=4*by.length;const KL=un.iconSizeData;let Zm=null;KL.kind==="source"?(Zm=[ru*ci.layout.get("icon-size").evaluate(Vi,{},vs)],Zm[0]>of&&je(`${un.layerIds[0]}: Value for "icon-size" is >= ${uy}. Reduce your "icon-size".`)):KL.kind==="composite"&&(Zm=[ru*gs.compositeIconSizes[0].evaluate(Vi,{},vs),ru*gs.compositeIconSizes[1].evaluate(Vi,{},vs)],(Zm[0]>of||Zm[1]>of)&&je(`${un.layerIds[0]}: Value for "icon-size" is >= ${uy}. Reduce your "icon-size".`)),un.addSymbols(un.icon,by,Zm,Gr,ps,Vi,!1,si,Vn,mo.lineStartIndex,mo.lineLength,-1,ka,vs),mE=un.icon.placedSymbolArray.length-1,yE&&(WL=4*yE.length,un.addSymbols(un.icon,yE,Zm,Gr,ps,Vi,Yl.vertical,si,Vn,mo.lineStartIndex,mo.lineLength,-1,ka,vs),pE=un.icon.placedSymbolArray.length-1)}for(const Sl in oi.horizontal){const El=oi.horizontal[Sl];Qs||(qL=uS(El.text),Zr?nv=eE(El):Qs=yx(lr,Ym,Vn,_r,yr,cr,El,Fr,ci.layout.get("text-rotate").evaluate(Vi,{},vs),ms));const by=El.positionedLines.length===1;if(HL+=cL(un,si,Vn,El,Sr,ci,Zr,Vi,ms,mo,oi.vertical?Yl.horizontal:Yl.horizontalOnly,by?Object.keys(oi.horizontal):[Sl],zu,mE,gs,ka,vs),by)break}oi.vertical&&(GL+=cL(un,si,Vn,oi.vertical,Sr,ci,Zr,Vi,ms,mo,Yl.vertical,["vertical"],zu,pE,gs,ka,vs));let hf=-1;const _E=(Sl,El)=>Sl?Math.max(Sl,El):El;hf=_E(nv,hf),hf=_E(_y,hf),hf=_E(yy,hf);const vj=hf>-1?1:0;un.glyphOffsetArray.length>=lf.MAX_GLYPHS&&je("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Vi.sortKey!==void 0&&un.addToSortKeyRanges(un.symbolInstances.length,Vi.sortKey),un.symbolInstances.emplaceBack(Ym.x,Ym.y,Ym.z,Vn.x,Vn.y,zu.right>=0?zu.right:-1,zu.center>=0?zu.center:-1,zu.left>=0?zu.left:-1,zu.vertical>=0?zu.vertical:-1,mE,pE,qL,Qs!==void 0?Qs:un.collisionBoxArray.length,Qs!==void 0?Qs+1:un.collisionBoxArray.length,eo!==void 0?eo:un.collisionBoxArray.length,eo!==void 0?eo+1:un.collisionBoxArray.length,Ia!==void 0?Ia:un.collisionBoxArray.length,Ia!==void 0?Ia+1:un.collisionBoxArray.length,au||un.collisionBoxArray.length,au?au+1:un.collisionBoxArray.length,_r,HL,GL,jL,WL,vj,0,gE,vE,hf)})(c,kn,ri,_n,d,f,g,cn,c.layers[0],c.collisionBoxArray,o.index,o.sourceLayerIndex,c.index,Ze,Ft,I,0,Tt,sn,he,o,b,D,N,j)};if(It==="line")for(const _n of iL(o.geometry,0,0,zn,zn)){const kn=OU(_n,et,bt,d.vertical||Te,f,He,Ne,c.overscaling,zn);for(const xn of kn)Te&&WU(c,Te.text,jt,xn)||Bt(_n,xn,j)}else if(It==="line-center"){for(const _n of o.geometry)if(_n.length>1){const kn=RU(_n,bt,d.vertical||Te,f,He,Ne);kn&&Bt(_n,kn,j)}}else if(o.type==="Polygon")for(const _n of NS(o.geometry,0)){const kn=zU(_n,16);Bt(_n[0],new Hd(kn.x,kn.y,0,0,void 0),j)}else if(o.type==="LineString")for(const _n of o.geometry)Bt(_n,new Hd(_n[0].x,_n[0].y,0,0,void 0),j);else if(o.type==="Point")for(const _n of o.geometry)for(const kn of _n)Bt([kn],new Hd(kn.x,kn.y,0,0,void 0),j)}const uy=255,of=uy*ru;function cL(c,o,d,f,g,b,w,E,I,D,N,j,Z,ne,oe,he,Te){const Oe=(function(Ne,et,Ze,Tt,bt,Ft,sn,It){const jt=[];if(et.positionedLines.length===0)return jt;const Wt=Tt.layout.get("text-rotate").evaluate(Ft,{})*Math.PI/180,Qt=(function(xn){const ri=xn[0],un=xn[1],Vn=ri*un;return Vn>0?[ri,-un]:Vn<0?[-ri,un]:ri===0?[un,ri]:[un,-ri]})(Ze);let cn=Math.abs(et.top-et.bottom);for(const xn of et.positionedLines)cn-=xn.lineOffset;const Bt=et.positionedLines.length,_n=cn/Bt;let kn=et.top-Ze[1];for(let xn=0;xn<Bt;++xn){const ri=et.positionedLines[xn];kn=VU(et,_n,kn,xn);for(const un of ri.positionedGlyphs){if(!un.rect)continue;const Vn=un.rect||{};let si=jD+1,Di=!0,oi=1,$n=0;if(un.imageName){const br=sn[un.imageName];if(!br)continue;if(br.sdf){je("SDF images are not supported in formatted text and will be ignored.");continue}Di=!1,oi=br.pixelRatio,si=rl/oi}const Sr=(bt||It)&&un.vertical,li=un.metrics.advance*un.scale/2,ci=un.metrics,lr=un.rect;if(lr===null)continue;It&&et.verticalizable&&($n=un.imageName?li-un.metrics.width*un.scale/2:0);const _r=bt?[un.x+li,un.y]:[0,0];let yr=[0,0],cr=[0,0],Fr=!1;bt||(Sr?(cr=[un.x+li+Qt[0],un.y+Qt[1]-$n],Fr=!0):yr=[un.x+li+Ze[0],un.y+Ze[1]-$n]);const Zr=lr.w*un.scale/(oi*(un.localGlyph?su:1)),ms=lr.h*un.scale/(oi*(un.localGlyph?su:1));let ur,Ms,ps,Gr;if(Sr){const br=un.y-kn,ka=new W(-li,li-br),vs=-Math.PI/2,mo=new W(...cr);ur=new W(-li+yr[0],yr[1]),ur._rotateAround(vs,ka)._add(mo),ur.x+=-br+li,ur.y-=(ci.left-si)*un.scale;const Qs=un.imageName?ci.advance*un.scale:fo*un.scale,Ia=String.fromCharCode(un.glyph);vU(Ia)?ur.x+=(1-si)*un.scale:_U(Ia)?ur.x+=Qs-ci.height*un.scale+(-si-1)*un.scale:ur.x+=un.imageName||ci.width+2*si===lr.w&&ci.height+2*si===lr.h?(Qs-ms)/2:(Qs-(ci.height+2*si)*un.scale)/2,Ms=new W(ur.x,ur.y-Zr),ps=new W(ur.x+ms,ur.y),Gr=new W(ur.x+ms,ur.y-Zr)}else{const br=(ci.left-si)*un.scale-li+yr[0],ka=(-ci.top-si)*un.scale+yr[1],vs=br+Zr,mo=ka+ms;ur=new W(br,ka),Ms=new W(vs,ka),ps=new W(br,mo),Gr=new W(vs,mo)}if(Wt){let br;br=bt?new W(0,0):Fr?new W(Qt[0],Qt[1]):new W(Ze[0],Ze[1]),ur._rotateAround(Wt,br),Ms._rotateAround(Wt,br),ps._rotateAround(Wt,br),Gr._rotateAround(Wt,br)}const Vi=new W(0,0),gs=new W(0,0);jt.push({tl:ur,tr:Ms,bl:ps,br:Gr,tex:Vn,writingMode:et.writingMode,glyphOffset:_r,sectionIndex:un.sectionIndex,isSDF:Di,pixelOffsetTL:Vi,pixelOffsetBR:gs,minFontScaleX:0,minFontScaleY:0})}}return jt})(0,f,I,b,w,E,g,c.allowVerticalPlacement),He=c.textSizeData;let Ve=null;He.kind==="source"?(Ve=[ru*b.layout.get("text-size").evaluate(E,{},Te)],Ve[0]>of&&je(`${c.layerIds[0]}: Value for "text-size" is >= ${uy}. Reduce your "text-size".`)):He.kind==="composite"&&(Ve=[ru*oe.compositeTextSizes[0].evaluate(E,{},Te),ru*oe.compositeTextSizes[1].evaluate(E,{},Te)],(Ve[0]>of||Ve[1]>of)&&je(`${c.layerIds[0]}: Value for "text-size" is >= ${uy}. Reduce your "text-size".`)),c.addSymbols(c.text,Oe,Ve,I,w,E,N,o,d,D.lineStartIndex,D.lineLength,ne,he,Te);for(const Ne of j)Z[Ne]=c.text.placedSymbolArray.length-1;return 4*Oe.length}function uL(c){for(const o in c)return c[o];return null}function yx(c,o,d,f,g,b,w,E,I,D){let N=w.top,j=w.bottom,Z=w.left,ne=w.right;const oe=w.collisionPadding;if(oe&&(Z-=oe[0],N-=oe[1],ne+=oe[2],j+=oe[3]),I){const he=new W(Z,N),Te=new W(ne,N),Oe=new W(Z,j),He=new W(ne,j),Ve=te(I);let Ne=new W(0,0);D&&(Ne=new W(D[0],D[1])),he._rotateAround(Ve,Ne),Te._rotateAround(Ve,Ne),Oe._rotateAround(Ve,Ne),He._rotateAround(Ve,Ne),Z=Math.min(he.x,Te.x,Oe.x,He.x),ne=Math.max(he.x,Te.x,Oe.x,He.x),N=Math.min(he.y,Te.y,Oe.y,He.y),j=Math.max(he.y,Te.y,Oe.y,He.y)}return c.emplaceBack(o.x,o.y,o.z,d.x,d.y,Z,N,ne,j,E,f,g,b),c.length-1}function eE(c){c.collisionPadding&&(c.top-=c.collisionPadding[1],c.bottom+=c.collisionPadding[3]);const o=c.bottom-c.top;return o>0?Math.max(10,o):null}function WU(c,o,d,f){const g=c.compareText;if(o in g){const b=g[o];for(let w=b.length-1;w>=0;w--)if(f.dist(b[w])<d)return!0}else g[o]=[];return g[o].push(f),!1}function dL(c,o){const d=c.fovAboveCenter,f=c.elevation?c.elevation.getMinElevationBelowMSL()*o:0,g=(c._camera.position[2]*c.worldSize-f)/Math.cos(c._pitch),b=Math.sin(d)*g/Math.sin(Math.max(Math.PI/2-c._pitch-d,.01)),w=Math.sin(c._pitch)*b+g;return Math.min(1.01*w,g*(1/c._horizonShift))}function Km(c,o){if(!o.isReprojectedInTileSpace)return{scale:1<<c.z,x:c.x,y:c.y,x2:c.x+1,y2:c.y+1,projection:o};const d=Math.pow(2,-c.z),f=c.x*d,g=(c.x+1)*d,b=c.y*d,w=(c.y+1)*d,E=Xl(f),I=Xl(g),D=Ro(b),N=Ro(w),j=o.project(E,D),Z=o.project(I,D),ne=o.project(I,N),oe=o.project(E,N);let he=Math.min(j.x,Z.x,ne.x,oe.x),Te=Math.min(j.y,Z.y,ne.y,oe.y),Oe=Math.max(j.x,Z.x,ne.x,oe.x),He=Math.max(j.y,Z.y,ne.y,oe.y);const Ve=d/16;function Ne(Ze,Tt,bt,Ft,sn,It){const jt=(bt+sn)/2,Wt=(Ft+It)/2,Qt=o.project(Xl(jt),Ro(Wt)),cn=Math.max(0,he-Qt.x,Te-Qt.y,Qt.x-Oe,Qt.y-He);he=Math.min(he,Qt.x),Oe=Math.max(Oe,Qt.x),Te=Math.min(Te,Qt.y),He=Math.max(He,Qt.y),cn>Ve&&(Ne(Ze,Qt,bt,Ft,jt,Wt),Ne(Qt,Tt,jt,Wt,sn,It))}Ne(j,Z,f,b,g,b),Ne(Z,ne,g,b,g,w),Ne(ne,oe,g,w,f,w),Ne(oe,j,f,w,f,b),he-=Ve,Te-=Ve,Oe+=Ve,He+=Ve;const et=1/Math.max(Oe-he,He-Te);return{scale:et,x:he*et,y:Te*et,x2:Oe*et,y2:He*et,projection:o}}const HU=tu(new Float32Array(16));class af{constructor(o){this.spec=o,this.name=o.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(o,d){return{x:0,y:0,z:0}}unproject(o,d){return new ar(0,0)}projectTilePoint(o,d,f){return{x:o,y:d,z:0}}locationPoint(o,d,f=!0){return o._coordinatePoint(o.locationCoordinate(d),f)}pixelsPerMeter(o,d){return iu(1,o)*d}pixelSpaceConversion(o,d,f){return 1}farthestPixelDistance(o){return dL(o,o.pixelsPerMeter)}pointCoordinate(o,d,f,g){const b=o.horizonLineFromTop(!1),w=new W(d,Math.max(b,f));return o.rayIntersectionCoordinate(o.pointRayIntersection(w,g))}pointCoordinate3D(o,d,f){const g=new W(d,f);if(o.elevation)return o.elevation.pointCoordinate(g);{const b=this.pointCoordinate(o,g.x,g.y,0);return[b.x,b.y,b.z]}}isPointAboveHorizon(o,d){if(o.elevation)return!this.pointCoordinate3D(o,d.x,d.y);const f=o.horizonLineFromTop();return d.y<f}createInversionMatrix(o,d){return HU}createTileMatrix(o,d,f){let g,b,w;const E=f.canonical,I=tu(new Float64Array(16));if(this.isReprojectedInTileSpace){const D=Km(E,this);g=1,b=D.x+f.wrap*D.scale,w=D.y,$m(I,I,[g/D.scale,g/D.scale,o.pixelsPerMeter/d])}else g=d/o.zoomScale(E.z),b=(E.x+Math.pow(2,E.z)*f.wrap)*g,w=E.y*g;return $_(I,I,[b,w,0]),$m(I,I,[g/zn,g/zn,1]),I}upVector(o,d,f){return[0,0,1]}upVectorScale(o,d,f){return{metersToTile:1}}}class GU extends af{constructor(o){super(o),this.range=[4,7],this.center=o.center||[-96,37.5];const[d,f]=this.parallels=o.parallels||[29.5,45.5],g=Math.sin(te(d));this.n=(g+Math.sin(te(f)))/2,this.c=1+g*(2*this.n-g),this.r0=Math.sqrt(this.c)/this.n}project(o,d){const{n:f,c:g,r0:b}=this,w=te(o-this.center[0]),E=te(d),I=Math.sqrt(g-2*f*Math.sin(E))/f;return{x:I*Math.sin(w*f),y:I*Math.cos(w*f)-b,z:0}}unproject(o,d){const{n:f,c:g,r0:b}=this,w=b+d;let E=Math.atan2(o,Math.abs(w))*Math.sign(w);w*f<0&&(E-=Math.PI*Math.sign(o)*Math.sign(w));const I=te(this.center[0])*f;E=Ee(E,-Math.PI-I,Math.PI-I);const D=De(ke(E/f)+this.center[0],-180,180),N=Math.asin(De((g-(o*o+w*w)*f*f)/(2*f),-1,1)),j=De(ke(N),-Oo,Oo);return new ar(D,j)}}const dy=1.340264,hy=-.081106,fy=893e-6,my=.003796,bx=Math.sqrt(3)/2;class qU extends af{project(o,d){d=d/180*Math.PI,o=o/180*Math.PI;const f=Math.asin(bx*Math.sin(d)),g=f*f,b=g*g*g;return{x:.5*(o*Math.cos(f)/(bx*(dy+3*hy*g+b*(7*fy+9*my*g)))/Math.PI+.5),y:1-.5*(f*(dy+hy*g+b*(fy+my*g))/Math.PI+1),z:0}}unproject(o,d){o=(2*o-.5)*Math.PI;let f=d=(2*(1-d)-1)*Math.PI,g=f*f,b=g*g*g;for(let N,j,Z,ne=0;ne<12&&(j=f*(dy+hy*g+b*(fy+my*g))-d,Z=dy+3*hy*g+b*(7*fy+9*my*g),N=j/Z,f=De(f-N,-Math.PI/3,Math.PI/3),g=f*f,b=g*g*g,!(Math.abs(N)<1e-12));++ne);const w=bx*o*(dy+3*hy*g+b*(7*fy+9*my*g))/Math.cos(f),E=Math.asin(Math.sin(f)/bx),I=De(180*w/Math.PI,-180,180),D=De(180*E/Math.PI,-Oo,Oo);return new ar(I,D)}}class KU extends af{constructor(o){super(o),this.wrap=!0,this.supportsWorldCopies=!0}project(o,d){return{x:.5+o/360,y:.5-d/360,z:0}}unproject(o,d){const f=360*(o-.5),g=De(360*(.5-d),-Oo,Oo);return new ar(f,g)}}const ev=Math.PI/2;function xx(c){return Math.tan((ev+c)/2)}class XU extends af{constructor(o){super(o),this.center=o.center||[0,30];const[d,f]=this.parallels=o.parallels||[30,30];let g=te(d),b=te(f);this.southernCenter=g+b<0,this.southernCenter&&(g=-g,b=-b);const w=Math.cos(g),E=xx(g);this.n=g===b?Math.sin(g):Math.log(w/Math.cos(b))/Math.log(xx(b)/E),this.f=w*Math.pow(xx(g),this.n)/this.n}project(o,d){d=te(d),this.southernCenter&&(d=-d),o=te(o-this.center[0]);const f=1e-6,{n:g,f:b}=this;b>0?d<-ev+f&&(d=-ev+f):d>ev-f&&(d=ev-f);const w=b/Math.pow(xx(d),g);let E=w*Math.sin(g*o),I=b-w*Math.cos(g*o);return E=.5*(E/Math.PI+.5),I=.5*(I/Math.PI+.5),{x:E,y:this.southernCenter?I:1-I,z:0}}unproject(o,d){o=(2*o-.5)*Math.PI,this.southernCenter&&(d=1-d),d=(2*(1-d)-.5)*Math.PI;const{n:f,f:g}=this,b=g-d,w=Math.sign(b),E=Math.sign(f)*Math.sqrt(o*o+b*b);let I=Math.atan2(o,Math.abs(b))*w;b*f<0&&(I-=Math.PI*Math.sign(o)*w);const D=De(ke(I/f)+this.center[0],-180,180),N=De(ke(2*Math.atan(Math.pow(g/E,1/f))-ev),-Oo,Oo);return new ar(D,this.southernCenter?-N:N)}}class hL extends af{constructor(o){super(o),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(o,d){return{x:Ru(o),y:Ou(d),z:0}}unproject(o,d){const f=Xl(o),g=Ro(d);return new ar(f,g)}}const fL=te(Oo);class YU extends af{project(o,d){const f=(d=te(d))*d,g=f*f;return{x:.5*((o=te(o))*(.8707-.131979*f+g*(g*(.003971*f-.001529*g)-.013791))/Math.PI+.5),y:1-.5*(d*(1.007226+f*(.015085+g*(.028874*f-.044475-.005916*g)))/Math.PI+1),z:0}}unproject(o,d){o=(2*o-.5)*Math.PI;let f=d=(2*(1-d)-1)*Math.PI,g=25,b=0,w=f*f;do{w=f*f;const D=w*w;b=(f*(1.007226+w*(.015085+D*(.028874*w-.044475-.005916*D)))-d)/(1.007226+w*(.045255+D*(.259866*w-.311325-.005916*11*D))),f=De(f-b,-fL,fL)}while(Math.abs(b)>1e-6&&--g>0);w=f*f;const E=De(ke(o/(.8707+w*(w*(w*w*w*(.003971-.001529*w)-.013791)-.131979))),-180,180),I=ke(f);return new ar(E,I)}}const mL=te(Oo);class ZU extends af{project(o,d){d=te(d),o=te(o);const f=Math.cos(d),g=2/Math.PI,b=Math.acos(f*Math.cos(o/2)),w=Math.sin(b)/b,E=.5*(o*g+2*f*Math.sin(o/2)/w)||0,I=.5*(d+Math.sin(d)/w)||0;return{x:.5*(E/Math.PI+.5),y:1-.5*(I/Math.PI+1),z:0}}unproject(o,d){let f=o=(2*o-.5)*Math.PI,g=d=(2*(1-d)-1)*Math.PI,b=25;const w=1e-6;let E=0,I=0;do{const D=Math.cos(g),N=Math.sin(g),j=2*N*D,Z=N*N,ne=D*D,oe=Math.cos(f/2),he=Math.sin(f/2),Te=2*oe*he,Oe=he*he,He=1-ne*oe*oe,Ve=He?1/He:0,Ne=He?Math.acos(D*oe)*Math.sqrt(1/He):0,et=.5*(2*Ne*D*he+2*f/Math.PI)-o,Ze=.5*(Ne*N+g)-d,Tt=.5*Ve*(ne*Oe+Ne*D*oe*Z)+1/Math.PI,bt=Ve*(Te*j/4-Ne*N*he),Ft=.125*Ve*(j*he-Ne*N*ne*Te),sn=.5*Ve*(Z*oe+Ne*Oe*D)+.5,It=bt*Ft-sn*Tt;E=(Ze*bt-et*sn)/It,I=(et*Ft-Ze*Tt)/It,f=De(f-E,-Math.PI,Math.PI),g=De(g-I,-mL,mL)}while((Math.abs(E)>w||Math.abs(I)>w)&&--b>0);return new ar(ke(f),ke(g))}}class pL extends af{constructor(o){super(o),this.center=o.center||[0,0],this.parallels=o.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(te(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(o,d){const{scale:f,cosPhi:g}=this;return{x:te(o)*g*f+.5,y:-Math.sin(te(d))/g*f+.5,z:0}}unproject(o,d){const{scale:f,cosPhi:g}=this,b=-(d-.5)/f,w=De(ke((o-.5)/f)/g,-180,180),E=Math.asin(De(b*g,-1,1)),I=De(ke(E),-Oo,Oo);return new ar(w,I)}}class JU extends hL{constructor(o){super(o),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(o,d,f){const g=X_(o,d,f);return as(g,g,Y_(Lu(f))),{x:g[0],y:g[1],z:g[2]}}locationPoint(o,d){const f=zg(d.lat,d.lng),g=Sa([],f),b=o.elevation?o.elevation.getAtPointOrZero(o.locationCoordinate(d),o._centerAltitude):o._centerAltitude;H_(f,f,g,iu(1,0)*zn*b);const w=tu(new Float64Array(16));return Nm(w,o.pixelMatrix,o.globeMatrix),as(f,f,w),new W(f[0],f[1])}pixelsPerMeter(o,d){return iu(1,0)*d}pixelSpaceConversion(o,d,f){const g=iu(1,o)*d,b=Qn(iu(1,45)*d,g,f);return this.pixelsPerMeter(o,d)/b}createTileMatrix(o,d,f){const g=SS(Lu(f.canonical));return Nm(new Float64Array(16),o.globeMatrix,g)}createInversionMatrix(o,d){const{center:f}=o,g=Y_(Lu(d));return Xb(g,g,te(f.lng)),mS(g,g,te(f.lat)),$m(g,g,[o._pixelsPerMercatorPixel,o._pixelsPerMercatorPixel,1]),Float32Array.from(g)}pointCoordinate(o,d,f,g){return UM(o,d,f,!0)||new $g(0,0)}pointCoordinate3D(o,d,f){const g=this.pointCoordinate(o,d,f,0);return[g.x,g.y,g.z]}isPointAboveHorizon(o,d){return!UM(o,d.x,d.y,!1)}farthestPixelDistance(o){const d=(function(g,b){const w=g.cameraToCenterDistance,E=g._centerAltitude*b,I=g._camera,D=g._camera.forward(),N=$d([],Kl([],D,-w),[0,0,E]),j=g.worldSize/(2*Math.PI),Z=[0,0,-j],ne=g.width/g.height,oe=Math.tan(g.fovAboveCenter),he=Kl([],I.up(),oe),Te=Kl([],I.right(),oe*ne),Oe=Sa([],$d([],$d([],D,he),Te)),He=[];let Ve;if(new _S(N,Oe).closestPointOnSphere(Z,j,He)){const Ne=$d([],He,Z),et=nu([],Ne,N);Ve=Math.cos(g.fovAboveCenter)*U_(et)}else{const Ne=nu([],N,Z),et=nu([],Z,N);Sa(et,et);const Ze=U_(Ne)-j;Ve=Math.sqrt(Ze*(Ze+2*j));const Tt=Math.acos(Ve/(j+Ze))-Math.acos(Sc(D,et));Ve*=Math.cos(Tt)}return 1.01*Ve})(o,this.pixelsPerMeter(o.center.lat,o.worldSize)),f=Ng(o.zoom);if(f>0){const g=dL(o,iu(1,o.center.lat)*o.worldSize),b=o.worldSize/(2*Math.PI),w=Math.max(o.width,o.height)/o.worldSize*Math.PI;return Qn(d,g+b*(1-Math.cos(w)),Math.pow(f,10))}return d}upVector(o,d,f){return X_(d,f,o,1)}upVectorScale(o){return{metersToTile:Yb(Jb(Lu(o)))}}}function gL(c){const o=c.parallels,d=!!o&&Math.abs(o[0]+o[1])<.01;switch(c.name){case"mercator":return new hL(c);case"equirectangular":return new KU(c);case"naturalEarth":return new YU(c);case"equalEarth":return new qU(c);case"winkelTripel":return new ZU(c);case"albers":return d?new pL(c):new GU(c);case"lambertConformalConic":return d?new pL(c):new XU(c);case"globe":return new JU(c)}throw new Error(`Invalid projection name: ${c.name}`)}const QU=lx.types,ej=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function wx(c,o,d,f,g,b,w,E,I,D,N,j,Z){const ne=E?Math.min(of,Math.round(E[0])):0,oe=E?Math.min(of,Math.round(E[1])):0;c.emplaceBack(o,d,Math.round(32*f),Math.round(32*g),b,w,(ne<<1)+(I?1:0),oe,16*D,16*N,256*j,256*Z)}function Tx(c,o,d,f,g,b,w){c.emplaceBack(o,d,f,g,b,w)}function Sx(c,o,d,f,g){c.emplaceBack(o,d,f,g),c.emplaceBack(o,d,f,g),c.emplaceBack(o,d,f,g),c.emplaceBack(o,d,f,g)}function tj(c){for(const o of c.sections)if(Od(o.text))return!0;return!1}class tE{constructor(o){this.layoutVertexArray=new Nt,this.indexArray=new An,this.programConfigurations=o,this.segments=new hs,this.dynamicLayoutVertexArray=new Zt,this.opacityVertexArray=new Mn,this.placedSymbolArray=new Br,this.globeExtVertexArray=new Jt}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(o,d,f,g){this.isEmpty()||(f&&(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,cU.members),this.indexBuffer=o.createIndexBuffer(this.indexArray,d),this.dynamicLayoutVertexBuffer=o.createVertexBuffer(this.dynamicLayoutVertexArray,dU.members,!0),this.opacityVertexBuffer=o.createVertexBuffer(this.opacityVertexArray,ej,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=o.createVertexBuffer(this.globeExtVertexArray,uU.members,!0)),this.opacityVertexBuffer.itemSize=1),(f||g)&&this.programConfigurations.upload(o))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}Sn(tE,"SymbolBuffers");class nE{constructor(o,d,f){this.layoutVertexArray=new o,this.layoutAttributes=d,this.indexArray=new f,this.segments=new hs,this.collisionVertexArray=new gi,this.collisionVertexArrayExt=new pi}upload(o){this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=o.createVertexBuffer(this.collisionVertexArray,hU.members,!0),this.collisionVertexBufferExt=o.createVertexBuffer(this.collisionVertexArrayExt,fU.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}Sn(nE,"CollisionBuffers");class lf{constructor(o){this.collisionBoxArray=o.collisionBoxArray,this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map((w=>w.id)),this.index=o.index,this.pixelRatio=o.pixelRatio,this.sourceLayerIndex=o.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=tu([]),this.placementViewportMatrix=tu([]);const d=this.layers[0]._unevaluatedLayout._values;this.textSizeData=WS(this.zoom,d["text-size"]),this.iconSizeData=WS(this.zoom,d["icon-size"]);const f=this.layers[0].layout,g=f.get("symbol-sort-key"),b=f.get("symbol-z-order");this.canOverlap=f.get("text-allow-overlap")||f.get("icon-allow-overlap")||f.get("text-ignore-placement")||f.get("icon-ignore-placement"),this.sortFeaturesByKey=b!=="viewport-y"&&g.constantOr(1)!==void 0,this.sortFeaturesByY=(b==="viewport-y"||b==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=f.get("text-writing-mode").map((w=>Yl[w])),this.stateDependentLayerIds=this.layers.filter((w=>w.isStateDependent())).map((w=>w.id)),this.sourceID=o.sourceID,this.projection=o.projection}createArrays(){this.text=new tE(new zm(this.layers,this.zoom,(o=>/^text/.test(o)))),this.icon=new tE(new zm(this.layers,this.zoom,(o=>/^icon/.test(o)))),this.glyphOffsetArray=new ho,this.lineVertexArray=new Vd,this.symbolInstances=new or}calculateGlyphDependencies(o,d,f,g,b){for(let w=0;w<o.length;w++)if(d[o.charCodeAt(w)]=!0,g&&b){const E=ay[o.charAt(w)];E&&(d[E.charCodeAt(0)]=!0)}}populate(o,d,f,g){const b=this.layers[0],w=b.layout,E=this.projection.name==="globe",I=w.get("text-font"),D=w.get("text-field"),N=w.get("icon-image"),j=(D.value.kind!=="constant"||D.value.value instanceof Yr&&!D.value.value.isEmpty()||D.value.value.toString().length>0)&&(I.value.kind!=="constant"||I.value.value.length>0),Z=N.value.kind!=="constant"||!!N.value.value||Object.keys(N.parameters).length>0,ne=w.get("symbol-sort-key");if(this.features=[],!j&&!Z)return;const oe=d.iconDependencies,he=d.glyphDependencies,Te=d.availableImages,Oe=new $(this.zoom);for(const{feature:He,id:Ve,index:Ne,sourceLayerIndex:et}of o){const Ze=b._featureFilter.needGeometry,Tt=Hm(He,Ze);if(!b._featureFilter.filter(Oe,Tt,f))continue;if(Ze||(Tt.geometry=Ud(He,f,g)),E&&He.type!==1&&f.z<=5){const It=Tt.geometry,jt=.98078528056,Wt=(Qt,cn)=>Sc(X_(Qt.x,Qt.y,f,1),X_(cn.x,cn.y,f,1))<jt;for(let Qt=0;Qt<It.length;Qt++)It[Qt]=d$(It[Qt],Wt)}let bt,Ft;if(j){const It=b.getValueAndResolveTokens("text-field",Tt,f,Te),jt=Yr.factory(It);tj(jt)&&(this.hasRTLText=!0),(!this.hasRTLText||C()==="unavailable"||this.hasRTLText&&O.isParsed())&&(bt=gU(jt,b,Tt))}if(Z){const It=b.getValueAndResolveTokens("icon-image",Tt,f,Te);Ft=It instanceof os?It:os.fromString(It)}if(!bt&&!Ft)continue;const sn=this.sortFeaturesByKey?ne.evaluate(Tt,{},f):void 0;if(this.features.push({id:Ve,text:bt,icon:Ft,index:Ne,sourceLayerIndex:et,geometry:Tt.geometry,properties:He.properties,type:QU[He.type],sortKey:sn}),Ft&&(oe[Ft.name]=!0),bt){const It=I.evaluate(Tt,{},f).join(","),jt=w.get("text-rotation-alignment")==="map"&&w.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Yl.vertical)>=0;for(const Wt of bt.sections)if(Wt.image)oe[Wt.image.name]=!0;else{const Qt=Vm(bt.toString()),cn=Wt.fontStack||It,Bt=he[cn]=he[cn]||{};this.calculateGlyphDependencies(Wt.text,Bt,jt,this.allowVerticalPlacement,Qt)}}}w.get("symbol-placement")==="line"&&(this.features=(function(He){const Ve={},Ne={},et=[];let Ze=0;function Tt(It){et.push(He[It]),Ze++}function bt(It,jt,Wt){const Qt=Ne[It];return delete Ne[It],Ne[jt]=Qt,et[Qt].geometry[0].pop(),et[Qt].geometry[0]=et[Qt].geometry[0].concat(Wt[0]),Qt}function Ft(It,jt,Wt){const Qt=Ve[jt];return delete Ve[jt],Ve[It]=Qt,et[Qt].geometry[0].shift(),et[Qt].geometry[0]=Wt[0].concat(et[Qt].geometry[0]),Qt}function sn(It,jt,Wt){const Qt=Wt?jt[0][jt[0].length-1]:jt[0][0];return`${It}:${Qt.x}:${Qt.y}`}for(let It=0;It<He.length;It++){const jt=He[It],Wt=jt.geometry,Qt=jt.text?jt.text.toString():null;if(!Qt){Tt(It);continue}const cn=sn(Qt,Wt),Bt=sn(Qt,Wt,!0);if(cn in Ne&&Bt in Ve&&Ne[cn]!==Ve[Bt]){const _n=Ft(cn,Bt,Wt),kn=bt(cn,Bt,et[_n].geometry);delete Ve[cn],delete Ne[Bt],Ne[sn(Qt,et[kn].geometry,!0)]=kn,et[_n].geometry=null}else cn in Ne?bt(cn,Bt,Wt):Bt in Ve?Ft(cn,Bt,Wt):(Tt(It),Ve[cn]=Ze-1,Ne[Bt]=Ze-1)}return et.filter((It=>It.geometry))})(this.features)),this.sortFeaturesByKey&&this.features.sort(((He,Ve)=>He.sortKey-Ve.sortKey))}update(o,d,f,g){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(o,d,this.layers,f,g),this.icon.programConfigurations.updatePaintArrays(o,d,this.layers,f,g))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(o){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(o),this.iconCollisionBox.upload(o)),this.text.upload(o,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(o,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=gL(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(o,d){const f=this.lineVertexArray.length;if(o.segment!==void 0)for(const{x:g,y:b}of d)this.lineVertexArray.emplaceBack(g,b);return{lineStartIndex:f,lineLength:this.lineVertexArray.length-f}}addSymbols(o,d,f,g,b,w,E,I,D,N,j,Z,ne,oe){const he=o.indexArray,Te=o.layoutVertexArray,Oe=o.globeExtVertexArray,He=o.segments.prepareSegment(4*d.length,Te,he,this.canOverlap?w.sortKey:void 0),Ve=this.glyphOffsetArray.length,Ne=He.vertexLength,et=this.allowVerticalPlacement&&E===Yl.vertical?Math.PI/2:0,Ze=w.text&&w.text.sections;for(let bt=0;bt<d.length;bt++){const{tl:Ft,tr:sn,bl:It,br:jt,tex:Wt,pixelOffsetTL:Qt,pixelOffsetBR:cn,minFontScaleX:Bt,minFontScaleY:_n,glyphOffset:kn,isSDF:xn,sectionIndex:ri}=d[bt],un=He.vertexLength,Vn=kn[1];if(wx(Te,D.x,D.y,Ft.x,Vn+Ft.y,Wt.x,Wt.y,f,xn,Qt.x,Qt.y,Bt,_n),wx(Te,D.x,D.y,sn.x,Vn+sn.y,Wt.x+Wt.w,Wt.y,f,xn,cn.x,Qt.y,Bt,_n),wx(Te,D.x,D.y,It.x,Vn+It.y,Wt.x,Wt.y+Wt.h,f,xn,Qt.x,cn.y,Bt,_n),wx(Te,D.x,D.y,jt.x,Vn+jt.y,Wt.x+Wt.w,Wt.y+Wt.h,f,xn,cn.x,cn.y,Bt,_n),I){const{x:si,y:Di,z:oi}=I.anchor,[$n,Sr,li]=I.up;Tx(Oe,si,Di,oi,$n,Sr,li),Tx(Oe,si,Di,oi,$n,Sr,li),Tx(Oe,si,Di,oi,$n,Sr,li),Tx(Oe,si,Di,oi,$n,Sr,li),Sx(o.dynamicLayoutVertexArray,si,Di,oi,et)}else Sx(o.dynamicLayoutVertexArray,D.x,D.y,D.z,et);he.emplaceBack(un,un+1,un+2),he.emplaceBack(un+1,un+2,un+3),He.vertexLength+=4,He.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(kn[0]),bt!==d.length-1&&ri===d[bt+1].sectionIndex||o.programConfigurations.populatePaintArrays(Te.length,w,w.index,{},ne,oe,Ze&&Ze[ri])}const Tt=I?I.anchor:D;o.placedSymbolArray.emplaceBack(Tt.x,Tt.y,Tt.z,D.x,D.y,Ve,this.glyphOffsetArray.length-Ve,Ne,N,j,D.segment,f?f[0]:0,f?f[1]:0,g[0],g[1],E,0,!1,0,Z,0)}_commitLayoutVertex(o,d,f,g,b,w,E){o.emplaceBack(d,f,g,b,w,Math.round(E.x),Math.round(E.y))}_addCollisionDebugVertices(o,d,f,g,b,w,E){const I=f.segments.prepareSegment(4,f.layoutVertexArray,f.indexArray),D=I.vertexLength,N=E.tileAnchorX,j=E.tileAnchorY;for(let ne=0;ne<4;ne++)f.collisionVertexArray.emplaceBack(0,0,0,0);f.collisionVertexArrayExt.emplaceBack(d,-o.padding,-o.padding),f.collisionVertexArrayExt.emplaceBack(d,o.padding,-o.padding),f.collisionVertexArrayExt.emplaceBack(d,o.padding,o.padding),f.collisionVertexArrayExt.emplaceBack(d,-o.padding,o.padding),this._commitLayoutVertex(f.layoutVertexArray,g,b,w,N,j,new W(o.x1,o.y1)),this._commitLayoutVertex(f.layoutVertexArray,g,b,w,N,j,new W(o.x2,o.y1)),this._commitLayoutVertex(f.layoutVertexArray,g,b,w,N,j,new W(o.x2,o.y2)),this._commitLayoutVertex(f.layoutVertexArray,g,b,w,N,j,new W(o.x1,o.y2)),I.vertexLength+=4;const Z=f.indexArray;Z.emplaceBack(D,D+1),Z.emplaceBack(D+1,D+2),Z.emplaceBack(D+2,D+3),Z.emplaceBack(D+3,D),I.primitiveLength+=4}_addTextDebugCollisionBoxes(o,d,f,g,b,w){for(let E=g;E<b;E++){const I=f.get(E),D=this.getSymbolInstanceTextSize(o,w,d,E);this._addCollisionDebugVertices(I,D,this.textCollisionBox,I.projectedAnchorX,I.projectedAnchorY,I.projectedAnchorZ,w)}}_addIconDebugCollisionBoxes(o,d,f,g,b,w){for(let E=g;E<b;E++){const I=f.get(E),D=this.getSymbolInstanceIconSize(o,d,w.placedIconSymbolIndex);this._addCollisionDebugVertices(I,D,this.iconCollisionBox,I.projectedAnchorX,I.projectedAnchorY,I.projectedAnchorZ,w)}}generateCollisionDebugBuffers(o,d){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new nE(En,OD.members,Ps),this.iconCollisionBox=new nE(En,OD.members,Ps);const f=Gg(this.iconSizeData,o),g=Gg(this.textSizeData,o);for(let b=0;b<this.symbolInstances.length;b++){const w=this.symbolInstances.get(b);this._addTextDebugCollisionBoxes(g,o,d,w.textBoxStartIndex,w.textBoxEndIndex,w),this._addTextDebugCollisionBoxes(g,o,d,w.verticalTextBoxStartIndex,w.verticalTextBoxEndIndex,w),this._addIconDebugCollisionBoxes(f,o,d,w.iconBoxStartIndex,w.iconBoxEndIndex,w),this._addIconDebugCollisionBoxes(f,o,d,w.verticalIconBoxStartIndex,w.verticalIconBoxEndIndex,w)}}getSymbolInstanceTextSize(o,d,f,g){const b=this.text.placedSymbolArray.get(d.rightJustifiedTextSymbolIndex>=0?d.rightJustifiedTextSymbolIndex:d.centerJustifiedTextSymbolIndex>=0?d.centerJustifiedTextSymbolIndex:d.leftJustifiedTextSymbolIndex>=0?d.leftJustifiedTextSymbolIndex:d.verticalPlacedTextSymbolIndex>=0?d.verticalPlacedTextSymbolIndex:g),w=hx(this.textSizeData,o,b)/fo;return this.tilePixelRatio*w}getSymbolInstanceIconSize(o,d,f){const g=this.icon.placedSymbolArray.get(f),b=hx(this.iconSizeData,o,g);return this.tilePixelRatio*b}_commitDebugCollisionVertexUpdate(o,d,f){o.emplaceBack(d,-f,-f),o.emplaceBack(d,f,-f),o.emplaceBack(d,f,f),o.emplaceBack(d,-f,f)}_updateTextDebugCollisionBoxes(o,d,f,g,b,w){for(let E=g;E<b;E++){const I=f.get(E),D=this.getSymbolInstanceTextSize(o,w,d,E);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,D,I.padding)}}_updateIconDebugCollisionBoxes(o,d,f,g,b,w){for(let E=g;E<b;E++){const I=f.get(E),D=this.getSymbolInstanceIconSize(o,d,w);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,D,I.padding)}}updateCollisionDebugBuffers(o,d){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const f=Gg(this.iconSizeData,o),g=Gg(this.textSizeData,o);for(let b=0;b<this.symbolInstances.length;b++){const w=this.symbolInstances.get(b);this._updateTextDebugCollisionBoxes(g,o,d,w.textBoxStartIndex,w.textBoxEndIndex,w),this._updateTextDebugCollisionBoxes(g,o,d,w.verticalTextBoxStartIndex,w.verticalTextBoxEndIndex,w),this._updateIconDebugCollisionBoxes(f,o,d,w.iconBoxStartIndex,w.iconBoxEndIndex,w.placedIconSymbolIndex),this._updateIconDebugCollisionBoxes(f,o,d,w.verticalIconBoxStartIndex,w.verticalIconBoxEndIndex,w.placedIconSymbolIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(o,d,f,g,b,w,E,I,D){const N={};if(d<f){const{x1:j,y1:Z,x2:ne,y2:oe,padding:he,projectedAnchorX:Te,projectedAnchorY:Oe,projectedAnchorZ:He,tileAnchorX:Ve,tileAnchorY:Ne,featureIndex:et}=o.get(d);N.textBox={x1:j,y1:Z,x2:ne,y2:oe,padding:he,projectedAnchorX:Te,projectedAnchorY:Oe,projectedAnchorZ:He,tileAnchorX:Ve,tileAnchorY:Ne},N.textFeatureIndex=et}if(g<b){const{x1:j,y1:Z,x2:ne,y2:oe,padding:he,projectedAnchorX:Te,projectedAnchorY:Oe,projectedAnchorZ:He,tileAnchorX:Ve,tileAnchorY:Ne,featureIndex:et}=o.get(g);N.verticalTextBox={x1:j,y1:Z,x2:ne,y2:oe,padding:he,projectedAnchorX:Te,projectedAnchorY:Oe,projectedAnchorZ:He,tileAnchorX:Ve,tileAnchorY:Ne},N.verticalTextFeatureIndex=et}if(w<E){const{x1:j,y1:Z,x2:ne,y2:oe,padding:he,projectedAnchorX:Te,projectedAnchorY:Oe,projectedAnchorZ:He,tileAnchorX:Ve,tileAnchorY:Ne,featureIndex:et}=o.get(w);N.iconBox={x1:j,y1:Z,x2:ne,y2:oe,padding:he,projectedAnchorX:Te,projectedAnchorY:Oe,projectedAnchorZ:He,tileAnchorX:Ve,tileAnchorY:Ne},N.iconFeatureIndex=et}if(I<D){const{x1:j,y1:Z,x2:ne,y2:oe,padding:he,projectedAnchorX:Te,projectedAnchorY:Oe,projectedAnchorZ:He,tileAnchorX:Ve,tileAnchorY:Ne,featureIndex:et}=o.get(I);N.verticalIconBox={x1:j,y1:Z,x2:ne,y2:oe,padding:he,projectedAnchorX:Te,projectedAnchorY:Oe,projectedAnchorZ:He,tileAnchorX:Ve,tileAnchorY:Ne},N.verticalIconFeatureIndex=et}return N}deserializeCollisionBoxes(o){this.collisionArrays=[];for(let d=0;d<this.symbolInstances.length;d++){const f=this.symbolInstances.get(d);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(o,f.textBoxStartIndex,f.textBoxEndIndex,f.verticalTextBoxStartIndex,f.verticalTextBoxEndIndex,f.iconBoxStartIndex,f.iconBoxEndIndex,f.verticalIconBoxStartIndex,f.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(o,d){const f=o.placedSymbolArray.get(d),g=f.vertexStartIndex+4*f.numGlyphs;for(let b=f.vertexStartIndex;b<g;b+=4)o.indexArray.emplaceBack(b,b+1,b+2),o.indexArray.emplaceBack(b+1,b+2,b+3)}getSortedSymbolIndexes(o){if(this.sortedAngle===o&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const d=Math.sin(o),f=Math.cos(o),g=[],b=[],w=[];for(let E=0;E<this.symbolInstances.length;++E){w.push(E);const I=this.symbolInstances.get(E);g.push(0|Math.round(d*I.tileAnchorX+f*I.tileAnchorY)),b.push(I.featureIndex)}return w.sort(((E,I)=>g[E]-g[I]||b[I]-b[E])),w}addToSortKeyRanges(o,d){const f=this.sortKeyRanges[this.sortKeyRanges.length-1];f&&f.sortKey===d?f.symbolInstanceEnd=o+1:this.sortKeyRanges.push({sortKey:d,symbolInstanceStart:o,symbolInstanceEnd:o+1})}sortFeatures(o){if(this.sortFeaturesByY&&this.sortedAngle!==o&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(o),this.sortedAngle=o,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const d of this.symbolInstanceIndexes){const f=this.symbolInstances.get(d);this.featureSortOrder.push(f.featureIndex);const{rightJustifiedTextSymbolIndex:g,centerJustifiedTextSymbolIndex:b,leftJustifiedTextSymbolIndex:w,verticalPlacedTextSymbolIndex:E,placedIconSymbolIndex:I,verticalPlacedIconSymbolIndex:D}=f;g>=0&&this.addIndicesForPlacedSymbol(this.text,g),b>=0&&b!==g&&this.addIndicesForPlacedSymbol(this.text,b),w>=0&&w!==b&&w!==g&&this.addIndicesForPlacedSymbol(this.text,w),E>=0&&this.addIndicesForPlacedSymbol(this.text,E),I>=0&&this.addIndicesForPlacedSymbol(this.icon,I),D>=0&&this.addIndicesForPlacedSymbol(this.icon,D)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}Sn(lf,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),lf.MAX_GLYPHS=65535,lf.addDynamicAttributes=Sx;const nj=new Le({"symbol-placement":new le(Ot.layout_symbol["symbol-placement"]),"symbol-spacing":new le(Ot.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new le(Ot.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new ye(Ot.layout_symbol["symbol-sort-key"]),"symbol-z-order":new le(Ot.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new le(Ot.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new le(Ot.layout_symbol["icon-ignore-placement"]),"icon-optional":new le(Ot.layout_symbol["icon-optional"]),"icon-rotation-alignment":new le(Ot.layout_symbol["icon-rotation-alignment"]),"icon-size":new ye(Ot.layout_symbol["icon-size"]),"icon-text-fit":new le(Ot.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new le(Ot.layout_symbol["icon-text-fit-padding"]),"icon-image":new ye(Ot.layout_symbol["icon-image"]),"icon-rotate":new ye(Ot.layout_symbol["icon-rotate"]),"icon-padding":new le(Ot.layout_symbol["icon-padding"]),"icon-keep-upright":new le(Ot.layout_symbol["icon-keep-upright"]),"icon-offset":new ye(Ot.layout_symbol["icon-offset"]),"icon-anchor":new ye(Ot.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new le(Ot.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new le(Ot.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new le(Ot.layout_symbol["text-rotation-alignment"]),"text-field":new ye(Ot.layout_symbol["text-field"]),"text-font":new ye(Ot.layout_symbol["text-font"]),"text-size":new ye(Ot.layout_symbol["text-size"]),"text-max-width":new ye(Ot.layout_symbol["text-max-width"]),"text-line-height":new ye(Ot.layout_symbol["text-line-height"]),"text-letter-spacing":new ye(Ot.layout_symbol["text-letter-spacing"]),"text-justify":new ye(Ot.layout_symbol["text-justify"]),"text-radial-offset":new ye(Ot.layout_symbol["text-radial-offset"]),"text-variable-anchor":new le(Ot.layout_symbol["text-variable-anchor"]),"text-anchor":new ye(Ot.layout_symbol["text-anchor"]),"text-max-angle":new le(Ot.layout_symbol["text-max-angle"]),"text-writing-mode":new le(Ot.layout_symbol["text-writing-mode"]),"text-rotate":new ye(Ot.layout_symbol["text-rotate"]),"text-padding":new le(Ot.layout_symbol["text-padding"]),"text-keep-upright":new le(Ot.layout_symbol["text-keep-upright"]),"text-transform":new ye(Ot.layout_symbol["text-transform"]),"text-offset":new ye(Ot.layout_symbol["text-offset"]),"text-allow-overlap":new le(Ot.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new le(Ot.layout_symbol["text-ignore-placement"]),"text-optional":new le(Ot.layout_symbol["text-optional"])});var iE={paint:new Le({"icon-opacity":new ye(Ot.paint_symbol["icon-opacity"]),"icon-color":new ye(Ot.paint_symbol["icon-color"]),"icon-halo-color":new ye(Ot.paint_symbol["icon-halo-color"]),"icon-halo-width":new ye(Ot.paint_symbol["icon-halo-width"]),"icon-halo-blur":new ye(Ot.paint_symbol["icon-halo-blur"]),"icon-translate":new le(Ot.paint_symbol["icon-translate"]),"icon-translate-anchor":new le(Ot.paint_symbol["icon-translate-anchor"]),"text-opacity":new ye(Ot.paint_symbol["text-opacity"]),"text-color":new ye(Ot.paint_symbol["text-color"],{runtimeType:pr,getOverride:c=>c.textColor,hasOverride:c=>!!c.textColor}),"text-halo-color":new ye(Ot.paint_symbol["text-halo-color"]),"text-halo-width":new ye(Ot.paint_symbol["text-halo-width"]),"text-halo-blur":new ye(Ot.paint_symbol["text-halo-blur"]),"text-translate":new le(Ot.paint_symbol["text-translate"]),"text-translate-anchor":new le(Ot.paint_symbol["text-translate-anchor"])}),layout:nj};class vL{constructor(o){this.type=o.property.overrides?o.property.overrides.runtimeType:pa,this.defaultValue=o}evaluate(o){if(o.formattedSection){const d=this.defaultValue.property.overrides;if(d&&d.hasOverride(o.formattedSection))return d.getOverride(o.formattedSection)}return o.feature&&o.featureState?this.defaultValue.evaluate(o.feature,o.featureState):this.defaultValue.property.specification.default}eachChild(o){this.defaultValue.isConstant()||o(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Sn(vL,"FormatSectionOverride",{omit:["defaultValue"]});class Ex extends eu{constructor(o){super(o,iE)}recalculate(o,d){super.recalculate(o,d),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const f=this.layout.get("text-writing-mode");if(f){const g=[];for(const b of f)g.indexOf(b)<0&&g.push(b);this.layout._values["text-writing-mode"]=g}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(o,d,f,g){const b=this.layout.get(o).evaluate(d,{},f,g),w=this._unevaluatedLayout._values[o];return w.isDataDriven()||Iu(w.value)||!b?b:(function(E,I){return I.replace(/{([^{}]+)}/g,((D,N)=>N in E?String(E[N]):""))})(d.properties,b)}createBucket(o){return new lf(o)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const o of iE.paint.overridableProperties){if(!Ex.hasPaintOverride(this.layout,o))continue;const d=this.paint.get(o),f=new vL(d),g=new qh(f,d.property.specification);let b=null;b=d.value.kind==="constant"||d.value.kind==="source"?new Cd("source",g):new bc("composite",g,d.value.zoomStops,d.value._interpolationType),this.paint._values[o]=new xe(d.property,b,d.parameters)}}_handleOverridablePaintPropertyUpdate(o,d,f){return!(!this.layout||d.isDataDriven()||f.isDataDriven())&&Ex.hasPaintOverride(this.layout,o)}static hasPaintOverride(o,d){const f=o.get("text-field"),g=iE.paint.properties[d];let b=!1;const w=E=>{for(const I of E)if(g.overrides&&g.overrides.hasOverride(I))return void(b=!0)};if(f.value.kind==="constant"&&f.value.value instanceof Yr)w(f.value.value.sections);else if(f.value.kind==="source"){const E=D=>{b||(D instanceof ml&&gr(D.value)===qo?w(D.value.sections):D instanceof va?w(D.sections):D.eachChild(E))},I=f.value;I._styleExpression&&E(I._styleExpression.expression)}return b}getProgramConfiguration(o){return new nf(this,o)}}var ij={paint:new Le({"background-color":new le(Ot.paint_background["background-color"]),"background-pattern":new le(Ot.paint_background["background-pattern"]),"background-opacity":new le(Ot.paint_background["background-opacity"])})},rj={paint:new Le({"raster-opacity":new le(Ot.paint_raster["raster-opacity"]),"raster-hue-rotate":new le(Ot.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new le(Ot.paint_raster["raster-brightness-min"]),"raster-brightness-max":new le(Ot.paint_raster["raster-brightness-max"]),"raster-saturation":new le(Ot.paint_raster["raster-saturation"]),"raster-contrast":new le(Ot.paint_raster["raster-contrast"]),"raster-resampling":new le(Ot.paint_raster["raster-resampling"]),"raster-fade-duration":new le(Ot.paint_raster["raster-fade-duration"])})};class sj extends eu{constructor(o){super(o,{}),this.implementation=o}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}isLayerDraped(){return this.implementation.renderToTile!==void 0}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(o){this.implementation.onAdd&&this.implementation.onAdd(o,o.painter.context.gl)}onRemove(o){this.implementation.onRemove&&this.implementation.onRemove(o,o.painter.context.gl)}}var oj={paint:new Le({"sky-type":new le(Ot.paint_sky["sky-type"]),"sky-atmosphere-sun":new le(Ot.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new le(Ot.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new le(Ot.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new le(Ot.paint_sky["sky-gradient-radius"]),"sky-gradient":new Pe(Ot.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new le(Ot.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new le(Ot.paint_sky["sky-atmosphere-color"]),"sky-opacity":new le(Ot.paint_sky["sky-opacity"])})};function rE(c,o,d){const f=[0,0,1],g=VM([]);return FM(g,g,d?-te(c)+Math.PI:te(c)),BM(g,g,-te(o)),DM(f,f,g),Sa(f,f)}const aj={circle:class extends eu{constructor(c){super(c,_$)}createBucket(c){return new PS(c)}queryRadius(c){const o=c;return Ug("circle-radius",this,o)+Ug("circle-stroke-width",this,o)+tx(this.paint.get("circle-translate"))}queryIntersectsFeature(c,o,d,f,g,b,w,E){const I=oD(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),b.angle,c.pixelToTileUnitsFactor),D=this.paint.get("circle-radius").evaluate(o,d)+this.paint.get("circle-stroke-width").evaluate(o,d);return aD(c,f,b,w,E,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",I,D)}getProgramIds(){return["circle"]}getProgramConfiguration(c){return new nf(this,c)}},heatmap:class extends eu{createBucket(c){return new cD(c)}constructor(c){super(c,w$),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(c){c==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=RS({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(c){return Ug("heatmap-radius",this,c)}queryIntersectsFeature(c,o,d,f,g,b,w,E){const I=this.paint.get("heatmap-radius").evaluate(o,d);return aD(c,f,b,w,E,!0,!0,new W(0,0),I)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(c){return new nf(this,c)}},hillshade:class extends eu{constructor(c){super(c,T$)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends eu{constructor(c){super(c,z$)}getProgramIds(){const c=this.paint.get("fill-pattern"),o=c&&c.constantOr(1),d=[o?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&d.push(o&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),d}getProgramConfiguration(c){return new nf(this,c)}recalculate(c,o){super.recalculate(c,o);const d=this.paint._values["fill-outline-color"];d.value.kind==="constant"&&d.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(c){return new ox(c)}queryRadius(){return tx(this.paint.get("fill-translate"))}queryIntersectsFeature(c,o,d,f,g,b){return!c.queryGeometry.isAboveHorizon&&tD(sD(c.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),b.angle,c.pixelToTileUnitsFactor),f)}isTileClipped(){return!0}},"fill-extrusion":class extends eu{constructor(c){super(c,tU)}createBucket(c){return new ry(c)}queryRadius(){return tx(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(c){return new nf(this,c)}queryIntersectsFeature(c,o,d,f,g,b,w,E,I){const D=oD(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),b.angle,c.pixelToTileUnitsFactor),N=this.paint.get("fill-extrusion-height").evaluate(o,d),j=this.paint.get("fill-extrusion-base").evaluate(o,d),Z=[0,0],ne=E&&b.elevation,oe=b.elevation?b.elevation.exaggeration():1,he=c.tile.getBucket(this);if(ne&&he instanceof ry){const Ne=he.centroidVertexArray,et=I+1;et<Ne.length&&(Z[0]=Ne.geta_centroid_pos0(et),Z[1]=Ne.geta_centroid_pos1(et))}if(Z[0]===0&&Z[1]===1)return!1;b.projection.name==="globe"&&(f=kD([f],[new W(0,0),new W(zn,zn)],c.tileID.canonical).map((Ne=>Ne.polygon)).flat());const Te=ne?E:null,[Oe,He]=(function(Ne,et,Ze,Tt,bt,Ft,sn,It,jt,Wt,Qt){return Ne.projection.name==="globe"?(function(cn,Bt,_n,kn,xn,ri,un,Vn,si,Di,oi){const $n=[],Sr=[],li=cn.projection.upVectorScale(oi,cn.center.lat,cn.worldSize).metersToTile,ci=[0,0,0,1],lr=[0,0,0,1],_r=(cr,Fr,Zr,ms)=>{cr[0]=Fr,cr[1]=Zr,cr[2]=ms,cr[3]=1},yr=CD();_n>0&&(_n+=yr),kn+=yr;for(const cr of Bt){const Fr=[],Zr=[];for(const ms of cr){const ur=ms.x+xn.x,Ms=ms.y+xn.y,ps=cn.projection.projectTilePoint(ur,Ms,oi),Gr=cn.projection.upVector(oi,ms.x,ms.y);let Vi=_n,gs=kn;if(un){const br=MD(ur,Ms,_n,kn,un,Vn,si,Di);Vi+=br.base,gs+=br.top}_n!==0?_r(ci,ps.x+Gr[0]*li*Vi,ps.y+Gr[1]*li*Vi,ps.z+Gr[2]*li*Vi):_r(ci,ps.x,ps.y,ps.z),_r(lr,ps.x+Gr[0]*li*gs,ps.y+Gr[1]*li*gs,ps.z+Gr[2]*li*gs),as(ci,ci,ri),as(lr,lr,ri),Fr.push(new Hg(ci[0],ci[1],ci[2])),Zr.push(new Hg(lr[0],lr[1],lr[2]))}$n.push(Fr),Sr.push(Zr)}return[$n,Sr]})(Ne,et,Ze,Tt,bt,Ft,sn,It,jt,Wt,Qt):sn?(function(cn,Bt,_n,kn,xn,ri,un,Vn,si){const Di=[],oi=[],$n=[0,0,0,1];for(const Sr of cn){const li=[],ci=[];for(const lr of Sr){const _r=lr.x+kn.x,yr=lr.y+kn.y,cr=MD(_r,yr,Bt,_n,ri,un,Vn,si);$n[0]=_r,$n[1]=yr,$n[2]=cr.base,$n[3]=1,Um($n,$n,xn),$n[3]=Math.max($n[3],1e-5);const Fr=new Hg($n[0]/$n[3],$n[1]/$n[3],$n[2]/$n[3]);$n[0]=_r,$n[1]=yr,$n[2]=cr.top,$n[3]=1,Um($n,$n,xn),$n[3]=Math.max($n[3],1e-5);const Zr=new Hg($n[0]/$n[3],$n[1]/$n[3],$n[2]/$n[3]);li.push(Fr),ci.push(Zr)}Di.push(li),oi.push(ci)}return[Di,oi]})(et,Ze,Tt,bt,Ft,sn,It,jt,Wt):(function(cn,Bt,_n,kn,xn){const ri=[],un=[],Vn=xn[8]*Bt,si=xn[9]*Bt,Di=xn[10]*Bt,oi=xn[11]*Bt,$n=xn[8]*_n,Sr=xn[9]*_n,li=xn[10]*_n,ci=xn[11]*_n;for(const lr of cn){const _r=[],yr=[];for(const cr of lr){const Fr=cr.x+kn.x,Zr=cr.y+kn.y,ms=xn[0]*Fr+xn[4]*Zr+xn[12],ur=xn[1]*Fr+xn[5]*Zr+xn[13],Ms=xn[2]*Fr+xn[6]*Zr+xn[14],ps=xn[3]*Fr+xn[7]*Zr+xn[15],Gr=ms+Vn,Vi=ur+si,gs=Ms+Di,br=Math.max(ps+oi,1e-5),ka=ms+$n,vs=ur+Sr,mo=Ms+li,Qs=Math.max(ps+ci,1e-5);_r.push(new Hg(Gr/br,Vi/br,gs/br)),yr.push(new Hg(ka/Qs,vs/Qs,mo/Qs))}ri.push(_r),un.push(yr)}return[ri,un]})(et,Ze,Tt,bt,Ft)})(b,f,j,N,D,w,Te,Z,oe,b.center.lat,c.tileID.canonical),Ve=c.queryGeometry;return(function(Ne,et,Ze){let Tt=1/0;tD(Ze,et)&&(Tt=PD(Ze,et[0]));for(let bt=0;bt<et.length;bt++){const Ft=et[bt],sn=Ne[bt];for(let It=0;It<Ft.length-1;It++){const jt=Ft[It],Wt=[jt,Ft[It+1],sn[It+1],sn[It],jt];eD(Ze,Wt)&&(Tt=Math.min(Tt,PD(Ze,Wt)))}}return Tt!==1/0&&Tt})(Oe,He,Ve.isPointQuery()?Ve.screenBounds:Ve.screenGeometry)}},line:class extends eu{constructor(c){super(c,DD),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(c){if(c==="line-gradient"){const o=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=o._styleExpression&&o._styleExpression.expression instanceof sr,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(c,o){super.recalculate(c,o),this.paint._values["line-floorwidth"]=LD.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,c)}createBucket(c){return new dx(c)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(c){return new nf(this,c)}queryRadius(c){const o=c,d=RD(Ug("line-width",this,o),Ug("line-gap-width",this,o)),f=Ug("line-offset",this,o);return d/2+Math.abs(f)+tx(this.paint.get("line-translate"))}queryIntersectsFeature(c,o,d,f,g,b){if(c.queryGeometry.isAboveHorizon)return!1;const w=sD(c.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),b.angle,c.pixelToTileUnitsFactor),E=c.pixelToTileUnitsFactor/2*RD(this.paint.get("line-width").evaluate(o,d),this.paint.get("line-gap-width").evaluate(o,d)),I=this.paint.get("line-offset").evaluate(o,d);return I&&(f=(function(D,N){const j=[],Z=new W(0,0);for(let ne=0;ne<D.length;ne++){const oe=D[ne],he=[];for(let Te=0;Te<oe.length;Te++){const Oe=oe[Te],He=oe[Te+1],Ve=Te===0?Z:Oe.sub(oe[Te-1])._unit()._perp(),Ne=Te===oe.length-1?Z:He.sub(Oe)._unit()._perp(),et=Ve._add(Ne)._unit();et._mult(1/(et.x*Ne.x+et.y*Ne.y)),he.push(et._mult(N)._add(Oe))}j.push(he)}return j})(f,I*c.pixelToTileUnitsFactor)),(function(D,N,j){for(let Z=0;Z<N.length;Z++){const ne=N[Z];if(D.length>=3){for(let oe=0;oe<ne.length;oe++)if(Gm(D,ne[oe]))return!0}if(m$(D,ne,j))return!0}return!1})(w,f,E)}isTileClipped(){return!0}},symbol:Ex,background:class extends eu{constructor(c){super(c,ij)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends eu{constructor(c){super(c,rj)}getProgramIds(){return["raster"]}},sky:class extends eu{constructor(c){super(c,oj),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(c){c==="sky-gradient"?this._updateColorRamp():c!=="sky-atmosphere-sun"&&c!=="sky-atmosphere-halo-color"&&c!=="sky-atmosphere-color"&&c!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=RS({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(c){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const o=c.style.light.properties.get("position");return this._lightPosition.azimuthal!==o.azimuthal||this._lightPosition.polar!==o.polar}return!1}getCenter(c,o){if(this.paint.get("sky-type")==="atmosphere"){const f=this.paint.get("sky-atmosphere-sun"),g=!f,b=c.style.light,w=b.properties.get("position");return g&&b.properties.get("anchor")==="viewport"&&je("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),g?rE(w.azimuthal,90-w.polar,o):rE(f[0],90-f[1],o)}const d=this.paint.get("sky-gradient-center");return rE(d[0],90-d[1],o)}is3D(){return!1}isSky(){return!0}markSkyboxValid(c){this._skyboxInvalidated=!1,this._lightPosition=c.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const c=this.paint.get("sky-type");return c==="atmosphere"?["skyboxCapture","skybox"]:c==="gradient"?["skyboxGradient"]:null}}};class py{constructor(o,d,f,g){this.context=o,this.format=f,this.texture=o.gl.createTexture(),this.update(d,g)}update(o,d,f){const{width:g,height:b}=o,{context:w}=this,{gl:E}=w,{HTMLImageElement:I,HTMLCanvasElement:D,HTMLVideoElement:N,ImageData:j,ImageBitmap:Z}=p;if(E.bindTexture(E.TEXTURE_2D,this.texture),w.pixelStoreUnpackFlipY.set(!1),w.pixelStoreUnpack.set(1),w.pixelStoreUnpackPremultiplyAlpha.set(this.format===E.RGBA&&(!d||d.premultiply!==!1)),f||this.size&&this.size[0]===g&&this.size[1]===b){const{x:ne,y:oe}=f||{x:0,y:0};o instanceof I||o instanceof D||o instanceof N||o instanceof j||Z&&o instanceof Z?E.texSubImage2D(E.TEXTURE_2D,0,ne,oe,E.RGBA,E.UNSIGNED_BYTE,o):E.texSubImage2D(E.TEXTURE_2D,0,ne,oe,g,b,E.RGBA,E.UNSIGNED_BYTE,o.data)}else this.size=[g,b],o instanceof I||o instanceof D||o instanceof N||o instanceof j||Z&&o instanceof Z?E.texImage2D(E.TEXTURE_2D,0,this.format,this.format,E.UNSIGNED_BYTE,o):E.texImage2D(E.TEXTURE_2D,0,this.format,g,b,0,this.format,E.UNSIGNED_BYTE,o.data);this.useMipmap=!!(d&&d.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&E.generateMipmap(E.TEXTURE_2D)}bind(o,d){const{context:f}=this,{gl:g}=f;g.bindTexture(g.TEXTURE_2D,this.texture),o!==this.filter&&(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,o),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,this.useMipmap?o===g.NEAREST?g.NEAREST_MIPMAP_NEAREST:g.LINEAR_MIPMAP_NEAREST:o),this.filter=o),d!==this.wrap&&(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,d),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,d),this.wrap=d)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:o}=this.context;o.deleteTexture(this.texture),this.texture=null}}class lj{constructor(o){this._callback=o,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._callback()}),0))}remove(){this._channel=void 0,this._callback=()=>{}}}class cj{constructor(){this.tasks={},this.taskQueue=[],kt(["process"],this),this.invoker=new lj(this.process),this.nextId=0}add(o,d){const f=this.nextId++,g=(function({type:b,isSymbolTile:w,zoom:E}){return E=E||0,b==="message"?0:b!=="maybePrepare"||w?b!=="parseTile"||w?b==="parseTile"&&w?300-E:b==="maybePrepare"&&w?400-E:500:200-E:100-E})(d);if(g===0){wt();try{o()}finally{}return{cancel:()=>{}}}return this.tasks[f]={fn:o,metadata:d,priority:g,id:f},this.taskQueue.push(f),this.invoker.trigger(),{cancel:()=>{delete this.tasks[f]}}}process(){wt();try{if(this.taskQueue=this.taskQueue.filter((f=>!!this.tasks[f])),!this.taskQueue.length)return;const o=this.pick();if(o===null)return;const d=this.tasks[o];if(delete this.tasks[o],this.taskQueue.length&&this.invoker.trigger(),!d)return;d.fn()}finally{}}pick(){let o=null,d=1/0;for(let g=0;g<this.taskQueue.length;g++){const b=this.tasks[this.taskQueue[g]];b.priority<d&&(d=b.priority,o=g)}if(o===null)return null;const f=this.taskQueue[o];return this.taskQueue.splice(o,1),f}remove(){this.invoker.remove()}}class _L{constructor(o){this._stringToNumber={},this._numberToString=[];for(let d=0;d<o.length;d++){const f=o[d];this._stringToNumber[f]=d,this._numberToString[d]=f}}encode(o){return this._stringToNumber[o]}decode(o){return this._numberToString[o]}}const uj=["tile","layer","source","sourceLayer","state"];class yL{constructor(o,d,f,g,b){this.type="Feature",this._vectorTileFeature=o,this._z=d,this._x=f,this._y=g,this.properties=o.properties,this.id=b}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(o){this._geometry=o}toJSON(){const o={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};this.id!==void 0&&(o.id=this.id);for(const d of uj)this[d]!==void 0&&(o[d]=this[d]);return o}}const kc=32,Vu=33,cf=new Uint16Array(8184);for(let c=0;c<2046;c++){let o=c+2,d=0,f=0,g=0,b=0,w=0,E=0;for(1&o?g=b=w=kc:d=f=E=kc;(o>>=1)>1;){const D=d+g>>1,N=f+b>>1;1&o?(g=d,b=f,d=w,f=E):(d=g,f=b,g=w,b=E),w=D,E=N}const I=4*c;cf[I+0]=d,cf[I+1]=f,cf[I+2]=g,cf[I+3]=b}const Bu=new Uint16Array(2178),uf=new Uint8Array(1089),Cx=new Uint16Array(1089);function bL(c){return c===0?-.03125:c===32?.03125:0}var xL=at([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const wL={type:2,extent:zn,loadGeometry:()=>[[new W(0,0),new W(zn+1,0),new W(zn+1,zn+1),new W(0,zn+1),new W(0,0)]]};class sE{constructor(o,d,f,g,b){this.tileID=o,this.uid=$t(),this.uses=0,this.tileSize=d,this.tileZoom=f,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=b,this.expiredRequestCount=0,this.state="loading",g&&g.transform&&(this.projection=g.transform.projection)}registerFadeDuration(o){const d=o+this.timeAdded;d<Co.now()||this.fadeEndTime&&d<this.fadeEndTime||(this.fadeEndTime=d)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=Km(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(o,d,f){if(this.unloadVectorData(),this.state="loaded",o){o.featureIndex&&(this.latestFeatureIndex=o.featureIndex,o.rawTileData?(this.latestRawTileData=o.rawTileData,this.latestFeatureIndex.rawTileData=o.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=o.collisionBoxArray,this.buckets=(function(g,b){const w={};if(!b)return w;for(const E of g){const I=E.layerIds.map((D=>b.getLayer(D))).filter(Boolean);if(I.length!==0){E.layers=I,E.stateDependentLayerIds&&(E.stateDependentLayers=E.stateDependentLayerIds.map((D=>I.filter((N=>N.id===D))[0])));for(const D of I)w[D.id]=E}}return w})(o.buckets,d.style),this.hasSymbolBuckets=!1;for(const g in this.buckets){const b=this.buckets[g];if(b instanceof lf){if(this.hasSymbolBuckets=!0,!f)break;b.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const g in this.buckets){const b=this.buckets[g];if(b instanceof lf&&b.hasRTLText){this.hasRTLText=!0,O.isLoading()||O.isLoaded()||C()!=="deferred"||L();break}}this.queryPadding=0;for(const g in this.buckets){const b=this.buckets[g];this.queryPadding=Math.max(this.queryPadding,d.style.getLayer(g).queryRadius(b))}o.imageAtlas&&(this.imageAtlas=o.imageAtlas),o.glyphAtlasImage&&(this.glyphAtlasImage=o.glyphAtlasImage),o.lineAtlas&&(this.lineAtlas=o.lineAtlas)}else this.collisionBoxArray=new qi}unloadVectorData(){if(this.hasData()){for(const o in this.buckets)this.buckets[o].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(o){return this.buckets[o.id]}upload(o){for(const f in this.buckets){const g=this.buckets[f];g.uploadPending()&&g.upload(o)}const d=o.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new py(o,this.imageAtlas.image,d.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new py(o,this.glyphAtlasImage,d.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new py(o,this.lineAtlas.image,d.ALPHA),this.lineAtlas.uploaded=!0)}prepare(o){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(o,this.imageAtlasTexture)}queryRenderedFeatures(o,d,f,g,b,w,E,I){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:g,pixelPosMatrix:E,transform:w,params:b,tileTransform:this.tileTransform},o,d,f):{}}querySourceFeatures(o,d){const f=this.latestFeatureIndex;if(!f||!f.rawTileData)return;const g=f.loadVTLayers(),b=d?d.sourceLayer:"",w=g._geojsonTileLayer||g[b];if(!w)return;const E=Yh(d&&d.filter),{z:I,x:D,y:N}=this.tileID.canonical,j={z:I,x:D,y:N};for(let Z=0;Z<w.length;Z++){const ne=w.feature(Z);if(E.needGeometry){const Te=Hm(ne,!0);if(!E.filter(new $(this.tileID.overscaledZ),Te,this.tileID.canonical))continue}else if(!E.filter(new $(this.tileID.overscaledZ),ne))continue;const oe=f.getId(ne,b),he=new yL(ne,I,D,N,oe);he.tile=j,o.push(he)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(o){const d=this.expirationTime;if(o.cacheControl){const f=Lt(o.cacheControl);f["max-age"]&&(this.expirationTime=Date.now()+1e3*f["max-age"])}else o.expires&&(this.expirationTime=new Date(o.expires).getTime());if(this.expirationTime){const f=Date.now();let g=!1;if(this.expirationTime>f)g=!1;else if(d)if(this.expirationTime<d)g=!0;else{const b=this.expirationTime-d;b?this.expirationTime=f+Math.max(b,3e4):g=!0}else g=!0;g?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(o,d){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(o).length===0||!d)return;const f=this.latestFeatureIndex.loadVTLayers(),g=d.style.listImages();for(const b in this.buckets){if(!d.style.hasLayer(b))continue;const w=this.buckets[b],E=w.layers[0].sourceLayer||"_geojsonTileLayer",I=f[E],D=o[E];if(!I||!D||Object.keys(D).length===0)continue;if(w.update(D,I,g,this.imageAtlas&&this.imageAtlas.patternPositions||{}),w instanceof dx||w instanceof ox){const j=d.style._getSourceCache(w.layers[0].source);d._terrain&&d._terrain.enabled&&j&&w.programConfigurations.needsUpload&&d._terrain._clearRenderCacheForTile(j.id,this.tileID)}const N=d&&d.style&&d.style.getLayer(b);N&&(this.queryPadding=Math.max(this.queryPadding,N.queryRadius(w)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Co.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(o){this.symbolFadeHoldUntil=Co.now()+o}setTexture(o,d){const f=d.context,g=f.gl;this.texture=this.texture||d.getTileTexture(o.width),this.texture?this.texture.update(o,{useMipmap:!0}):(this.texture=new py(f,o,g.RGBA,{useMipmap:!0}),this.texture.bind(g.LINEAR,g.CLAMP_TO_EDGE))}setDependencies(o,d){const f={};for(const g of d)f[g]=!0;this.dependencies[o]=f}hasDependency(o,d){for(const f of o){const g=this.dependencies[f];if(g){for(const b of d)if(g[b])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(o,d){if(!d||d.name==="mercator"||this._tileDebugBuffer)return;const f=Ud(wL,this.tileID.canonical,this.tileTransform)[0],g=new qt,b=new Ta;for(let w=0;w<f.length;w++){const{x:E,y:I}=f[w];g.emplaceBack(E,I),b.emplaceBack(w)}b.emplaceBack(0),this._tileDebugIndexBuffer=o.createIndexBuffer(b),this._tileDebugBuffer=o.createVertexBuffer(g,q_.members),this._tileDebugSegments=hs.simpleSegment(0,0,g.length,b.length)}_makeTileBoundsBuffers(o,d){if(this._tileBoundsBuffer||!d||d.name==="mercator")return;const f=Ud(wL,this.tileID.canonical,this.tileTransform)[0];let g,b;if(this.isRaster){const w=(function(E,I){const D=Km(E,I),N=Math.pow(2,E.z);for(let Te=0;Te<Vu;Te++)for(let Oe=0;Oe<Vu;Oe++){const He=Xl((E.x+(Oe+bL(Oe))/kc)/N),Ve=Ro((E.y+(Te+bL(Te))/kc)/N),Ne=I.project(He,Ve),et=Te*Vu+Oe;Bu[2*et+0]=Math.round((Ne.x*D.scale-D.x)*zn),Bu[2*et+1]=Math.round((Ne.y*D.scale-D.y)*zn)}uf.fill(0),Cx.fill(0);for(let Te=2045;Te>=0;Te--){const Oe=4*Te,He=cf[Oe+0],Ve=cf[Oe+1],Ne=cf[Oe+2],et=cf[Oe+3],Ze=He+Ne>>1,Tt=Ve+et>>1,bt=Ze+Tt-Ve,Ft=Tt+He-Ze,sn=Ve*Vu+He,It=et*Vu+Ne,jt=Tt*Vu+Ze,Wt=Math.hypot((Bu[2*sn+0]+Bu[2*It+0])/2-Bu[2*jt+0],(Bu[2*sn+1]+Bu[2*It+1])/2-Bu[2*jt+1])>=16;uf[jt]=uf[jt]||(Wt?1:0),Te<1022&&(uf[jt]=uf[jt]||uf[(Ve+Ft>>1)*Vu+(He+bt>>1)]||uf[(et+Ft>>1)*Vu+(Ne+bt>>1)])}const j=new Vt,Z=new An;let ne=0;function oe(Te,Oe){const He=Oe*Vu+Te;return Cx[He]===0&&(j.emplaceBack(Bu[2*He+0],Bu[2*He+1],Te*zn/kc,Oe*zn/kc),Cx[He]=++ne),Cx[He]-1}function he(Te,Oe,He,Ve,Ne,et){const Ze=Te+He>>1,Tt=Oe+Ve>>1;if(Math.abs(Te-Ne)+Math.abs(Oe-et)>1&&uf[Tt*Vu+Ze])he(Ne,et,Te,Oe,Ze,Tt),he(He,Ve,Ne,et,Ze,Tt);else{const bt=oe(Te,Oe),Ft=oe(He,Ve),sn=oe(Ne,et);Z.emplaceBack(bt,Ft,sn)}}return he(0,0,kc,kc,kc,0),he(kc,kc,0,0,0,kc),{vertices:j,indices:Z}})(this.tileID.canonical,d);g=w.vertices,b=w.indices}else{g=new Vt,b=new An;for(const{x:E,y:I}of f)g.emplaceBack(E,I,0,0);const w=zS(g.int16,void 0,4);for(let E=0;E<w.length;E+=3)b.emplaceBack(w[E],w[E+1],w[E+2])}this._tileBoundsBuffer=o.createVertexBuffer(g,xL.members),this._tileBoundsIndexBuffer=o.createIndexBuffer(b),this._tileBoundsSegments=hs.simpleSegment(0,0,g.length,b.length)}_makeGlobeTileDebugBuffers(o,d){const f=d.projection;if(!f||f.name!=="globe"||d.freezeTileCoverage)return;const g=this.tileID.canonical,b=Y_(jM(g,d)),w=Ng(d.zoom);let E;w>0&&(E=fS(new Float64Array(16),d.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(o,g,d,b,E,w),this._makeGlobeTileDebugTextBuffer(o,g,d,b,E,w)}_globePoint(o,d,f,g,b,w,E){let I=X_(o,d,f);if(w){const D=1<<f.z,N=Ru(g.center.lng),j=Ou(g.center.lat),Z=(f.x+.5)/D-N;let ne=0;Z>.5?ne=-1:Z<-.5&&(ne=1);let oe=(o/zn+f.x)/D+ne,he=(d/zn+f.y)/D;oe=(oe-N)*g._pixelsPerMercatorPixel+N,he=(he-j)*g._pixelsPerMercatorPixel+j;const Te=[oe*g.worldSize,he*g.worldSize,0];as(Te,Te,w),I=Wm(I,Te,E)}return as(I,I,b)}_makeGlobeTileDebugBorderBuffer(o,d,f,g,b,w){const E=new qt,I=new Ta,D=new dt,N=(Z,ne,oe,he,Te)=>{const Oe=(oe-Z)/(Te-1),He=(he-ne)/(Te-1),Ve=E.length;for(let Ne=0;Ne<Te;Ne++){const et=Z+Ne*Oe,Ze=ne+Ne*He;E.emplaceBack(et,Ze);const Tt=this._globePoint(et,Ze,d,f,g,b,w);D.emplaceBack(Tt[0],Tt[1],Tt[2]),I.emplaceBack(Ve+Ne)}},j=zn;N(0,0,j,0,16),N(j,0,j,j,16),N(j,j,0,j,16),N(0,j,0,0,16),this._tileDebugIndexBuffer=o.createIndexBuffer(I),this._tileDebugBuffer=o.createVertexBuffer(E,q_.members),this._globeTileDebugBorderBuffer=o.createVertexBuffer(D,NM.members),this._tileDebugSegments=hs.simpleSegment(0,0,E.length,I.length)}_makeGlobeTileDebugTextBuffer(o,d,f,g,b,w){const E=zn/4,I=new qt,D=new An,N=new dt,j=25;D.reserve(32),I.reserve(j),N.reserve(j);const Z=(ne,oe)=>j*ne+oe;for(let ne=0;ne<j;ne++){const oe=ne*E;for(let he=0;he<j;he++){const Te=he*E;I.emplaceBack(Te,oe);const Oe=this._globePoint(Te,oe,d,f,g,b,w);N.emplaceBack(Oe[0],Oe[1],Oe[2])}}for(let ne=0;ne<4;ne++)for(let oe=0;oe<4;oe++){const he=Z(ne,oe),Te=Z(ne,oe+1),Oe=Z(ne+1,oe),He=Z(ne+1,oe+1);D.emplaceBack(he,Te,Oe),D.emplaceBack(Oe,Te,He)}this._tileDebugTextIndexBuffer=o.createIndexBuffer(D),this._tileDebugTextBuffer=o.createVertexBuffer(I,q_.members),this._globeTileDebugTextBuffer=o.createVertexBuffer(N,NM.members),this._tileDebugTextSegments=hs.simpleSegment(0,0,j,32)}}class dj{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(o,d,f){const g=String(d);if(this.stateChanges[o]=this.stateChanges[o]||{},this.stateChanges[o][g]=this.stateChanges[o][g]||{},mt(this.stateChanges[o][g],f),this.deletedStates[o]===null){this.deletedStates[o]={};for(const b in this.state[o])b!==g&&(this.deletedStates[o][b]=null)}else if(this.deletedStates[o]&&this.deletedStates[o][g]===null){this.deletedStates[o][g]={};for(const b in this.state[o][g])f[b]||(this.deletedStates[o][g][b]=null)}else for(const b in f)this.deletedStates[o]&&this.deletedStates[o][g]&&this.deletedStates[o][g][b]===null&&delete this.deletedStates[o][g][b]}removeFeatureState(o,d,f){if(this.deletedStates[o]===null)return;const g=String(d);if(this.deletedStates[o]=this.deletedStates[o]||{},f&&d!==void 0)this.deletedStates[o][g]!==null&&(this.deletedStates[o][g]=this.deletedStates[o][g]||{},this.deletedStates[o][g][f]=null);else if(d!==void 0)if(this.stateChanges[o]&&this.stateChanges[o][g])for(f in this.deletedStates[o][g]={},this.stateChanges[o][g])this.deletedStates[o][g][f]=null;else this.deletedStates[o][g]=null;else this.deletedStates[o]=null}getState(o,d){const f=String(d),g=mt({},(this.state[o]||{})[f],(this.stateChanges[o]||{})[f]);if(this.deletedStates[o]===null)return{};if(this.deletedStates[o]){const b=this.deletedStates[o][d];if(b===null)return{};for(const w in b)delete g[w]}return g}initializeTileState(o,d){o.setFeatureState(this.state,d)}coalesceChanges(o,d){const f={};for(const g in this.stateChanges){this.state[g]=this.state[g]||{};const b={};for(const w in this.stateChanges[g])this.state[g][w]||(this.state[g][w]={}),mt(this.state[g][w],this.stateChanges[g][w]),b[w]=this.state[g][w];f[g]=b}for(const g in this.deletedStates){this.state[g]=this.state[g]||{};const b={};if(this.deletedStates[g]===null)for(const w in this.state[g])b[w]={},this.state[g][w]={};else for(const w in this.deletedStates[g]){if(this.deletedStates[g][w]===null)this.state[g][w]={};else if(this.state[g][w])for(const E of Object.keys(this.deletedStates[g][w]))delete this.state[g][w][E];b[w]=this.state[g][w]}f[g]=f[g]||{},mt(f[g],b)}if(this.stateChanges={},this.deletedStates={},Object.keys(f).length!==0)for(const g in o)o[g].setFeatureState(f,d)}}class TL{constructor(o){this.size=o,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(o,d){const f=this.toIdx(o,d);return{min:this.minimums[f],max:this.maximums[f]}}isLeaf(o,d){return this.leaves[this.toIdx(o,d)]}toIdx(o,d){return d*this.size+o}}function SL(c,o,d,f){let g=0,b=Number.MAX_VALUE;for(let w=0;w<3;w++)if(Math.abs(f[w])<1e-15){if(d[w]<c[w]||d[w]>o[w])return null}else{const E=1/f[w];let I=(c[w]-d[w])*E,D=(o[w]-d[w])*E;if(I>D){const N=I;I=D,D=N}if(I>g&&(g=I),D<b&&(b=D),g>b)return null}return g}function EL(c,o,d,f,g,b,w,E,I,D,N){const j=f-c,Z=g-o,ne=b-d,oe=w-c,he=E-o,Te=I-d,Oe=N[1]*Te-N[2]*he,He=N[2]*oe-N[0]*Te,Ve=N[0]*he-N[1]*oe,Ne=j*Oe+Z*He+ne*Ve;if(Math.abs(Ne)<1e-15)return null;const et=1/Ne,Ze=D[0]-c,Tt=D[1]-o,bt=D[2]-d,Ft=(Ze*Oe+Tt*He+bt*Ve)*et;if(Ft<0||Ft>1)return null;const sn=Tt*ne-bt*Z,It=bt*j-Ze*ne,jt=Ze*Z-Tt*j,Wt=(N[0]*sn+N[1]*It+N[2]*jt)*et;return Wt<0||Ft+Wt>1?null:(oe*sn+he*It+Te*jt)*et}function CL(c,o,d){return(c-o)/(d-o)}function kL(c,o,d,f,g,b,w,E,I){const D=1<<d,N=b-f,j=w-g,Z=(c+1)/D*N+f,ne=(o+0)/D*j+g,oe=(o+1)/D*j+g;E[0]=(c+0)/D*N+f,E[1]=ne,I[0]=Z,I[1]=oe}class IL{constructor(o){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=o,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const d=(function(b){const w=Math.ceil(Math.log2(b.dim/8)),E=[];let I=Math.ceil(Math.pow(2,w));const D=1/I,N=(ne,oe,he,Te,Oe)=>{const He=Te?1:0,Ve=(ne+1)*he-He,Ne=oe*he,et=(oe+1)*he-He;Oe[0]=ne*he,Oe[1]=Ne,Oe[2]=Ve,Oe[3]=et};let j=new TL(I);const Z=[];for(let ne=0;ne<I*I;ne++){N(ne%I,Math.floor(ne/I),D,!1,Z);const oe=df(Z[0],Z[1],b),he=df(Z[2],Z[1],b),Te=df(Z[2],Z[3],b),Oe=df(Z[0],Z[3],b);j.minimums.push(Math.min(oe,he,Te,Oe)),j.maximums.push(Math.max(oe,he,Te,Oe)),j.leaves.push(1)}for(E.push(j),I/=2;I>=1;I/=2){const ne=E[E.length-1];j=new TL(I);for(let oe=0;oe<I*I;oe++){N(oe%I,Math.floor(oe/I),2,!0,Z);const he=ne.getElevation(Z[0],Z[1]),Te=ne.getElevation(Z[2],Z[1]),Oe=ne.getElevation(Z[2],Z[3]),He=ne.getElevation(Z[0],Z[3]),Ve=ne.isLeaf(Z[0],Z[1]),Ne=ne.isLeaf(Z[2],Z[1]),et=ne.isLeaf(Z[2],Z[3]),Ze=ne.isLeaf(Z[0],Z[3]),Tt=Math.min(he.min,Te.min,Oe.min,He.min),bt=Math.max(he.max,Te.max,Oe.max,He.max),Ft=Ve&&Ne&&et&&Ze;j.maximums.push(bt),j.minimums.push(Tt),j.leaves.push(bt-Tt<=5&&Ft?1:0)}E.push(j)}return E})(this.dem),f=d.length-1,g=d[f];this._addNode(g.minimums[0],g.maximums[0],g.leaves[0]),this._construct(d,0,0,f,0)}raycastRoot(o,d,f,g,b,w,E=1){return SL([o,d,-100],[f,g,this.maximums[0]*E],b,w)}raycast(o,d,f,g,b,w,E=1){if(!this.nodeCount)return null;const I=this.raycastRoot(o,d,f,g,b,w,E);if(I==null)return null;const D=[],N=[],j=[],Z=[],ne=[{idx:0,t:I,nodex:0,nodey:0,depth:0}];for(;ne.length>0;){const{idx:oe,t:he,nodex:Te,nodey:Oe,depth:He}=ne.pop();if(this.leaves[oe]){kL(Te,Oe,He,o,d,f,g,j,Z);const Ne=1<<He,et=(Te+0)/Ne,Ze=(Te+1)/Ne,Tt=(Oe+0)/Ne,bt=(Oe+1)/Ne,Ft=df(et,Tt,this.dem)*E,sn=df(Ze,Tt,this.dem)*E,It=df(Ze,bt,this.dem)*E,jt=df(et,bt,this.dem)*E,Wt=EL(j[0],j[1],Ft,Z[0],j[1],sn,Z[0],Z[1],It,b,w),Qt=EL(Z[0],Z[1],It,j[0],Z[1],jt,j[0],j[1],Ft,b,w),cn=Math.min(Wt!==null?Wt:Number.MAX_VALUE,Qt!==null?Qt:Number.MAX_VALUE);if(cn!==Number.MAX_VALUE)return cn;{const Bt=H_([],b,w,he);if(AL(Ft,sn,jt,It,CL(Bt[0],j[0],Z[0]),CL(Bt[1],j[1],Z[1]))>=Bt[2])return he}continue}let Ve=0;for(let Ne=0;Ne<this._siblingOffset.length;Ne++){kL((Te<<1)+this._siblingOffset[Ne][0],(Oe<<1)+this._siblingOffset[Ne][1],He+1,o,d,f,g,j,Z),j[2]=-100,Z[2]=this.maximums[this.childOffsets[oe]+Ne]*E;const et=SL(j,Z,b,w);if(et!=null){const Ze=et;D[Ne]=Ze;let Tt=!1;for(let bt=0;bt<Ve&&!Tt;bt++)Ze>=D[N[bt]]&&(N.splice(bt,0,Ne),Tt=!0);Tt||(N[Ve]=Ne),Ve++}}for(let Ne=0;Ne<Ve;Ne++){const et=N[Ne];ne.push({idx:this.childOffsets[oe]+et,t:D[et],nodex:(Te<<1)+this._siblingOffset[et][0],nodey:(Oe<<1)+this._siblingOffset[et][1],depth:He+1})}}return null}_addNode(o,d,f){return this.minimums.push(o),this.maximums.push(d),this.leaves.push(f),this.childOffsets.push(0),this.nodeCount++}_construct(o,d,f,g,b){if(o[g].isLeaf(d,f)===1)return;this.childOffsets[b]||(this.childOffsets[b]=this.nodeCount);const w=g-1,E=o[w];let I=0,D=0;for(let N=0;N<this._siblingOffset.length;N++){const j=2*d+this._siblingOffset[N][0],Z=2*f+this._siblingOffset[N][1],ne=E.getElevation(j,Z),oe=E.isLeaf(j,Z),he=this._addNode(ne.min,ne.max,oe);oe&&(I|=1<<N),D||(D=he)}for(let N=0;N<this._siblingOffset.length;N++)I&1<<N||this._construct(o,2*d+this._siblingOffset[N][0],2*f+this._siblingOffset[N][1],w,D+N)}}function AL(c,o,d,f,g,b){return Qn(Qn(c,d,b),Qn(o,f,b),g)}function df(c,o,d){const f=d.dim,g=De(c*f-.5,0,f-1),b=De(o*f-.5,0,f-1),w=Math.floor(g),E=Math.floor(b),I=Math.min(w+1,f-1),D=Math.min(E+1,f-1);return AL(d.get(w,E),d.get(I,E),d.get(w,D),d.get(I,D),g-w,b-E)}const PL={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function hj(c,o,d){return(256*c*256+256*o+d)/10-1e4}function fj(c,o,d){return 256*c+o+d/256-32768}class kx{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(o,d,f,g=!1,b=!1){if(this.uid=o,d.height!==d.width)throw new RangeError("DEM tiles must be square");if(f&&f!=="mapbox"&&f!=="terrarium")return je(`"${f}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=d.height;const w=this.dim=d.height-2,E=new Uint32Array(d.data.buffer);if(this.pixels=new Uint8Array(d.data.buffer),this.encoding=f||"mapbox",this.borderReady=g,!g){for(let I=0;I<w;I++)E[this._idx(-1,I)]=E[this._idx(0,I)],E[this._idx(w,I)]=E[this._idx(w-1,I)],E[this._idx(I,-1)]=E[this._idx(I,0)],E[this._idx(I,w)]=E[this._idx(I,w-1)];E[this._idx(-1,-1)]=E[this._idx(0,0)],E[this._idx(w,-1)]=E[this._idx(w-1,0)],E[this._idx(-1,w)]=E[this._idx(0,w-1)],E[this._idx(w,w)]=E[this._idx(w-1,w-1)],b&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new IL(this)}get(o,d,f=!1){f&&(o=De(o,-1,this.dim),d=De(d,-1,this.dim));const g=4*this._idx(o,d);return(this.encoding==="terrarium"?fj:hj)(this.pixels[g],this.pixels[g+1],this.pixels[g+2])}static getUnpackVector(o){return PL[o]}get unpackVector(){return PL[this.encoding]}_idx(o,d){if(o<-1||o>=this.dim+1||d<-1||d>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(d+1)*this.stride+(o+1)}static pack(o,d){const f=[0,0,0,0],g=kx.getUnpackVector(d);let b=Math.floor((o+g[3])/g[2]);return f[2]=b%256,b=Math.floor(b/256),f[1]=b%256,b=Math.floor(b/256),f[0]=b,f}getPixels(){return new Tl({width:this.stride,height:this.stride},this.pixels)}backfillBorder(o,d,f){if(this.dim!==o.dim)throw new Error("dem dimension mismatch");let g=d*this.dim,b=d*this.dim+this.dim,w=f*this.dim,E=f*this.dim+this.dim;switch(d){case-1:g=b-1;break;case 1:b=g+1}switch(f){case-1:w=E-1;break;case 1:E=w+1}const I=-d*this.dim,D=-f*this.dim;for(let N=w;N<E;N++)for(let j=g;j<b;j++){const Z=4*this._idx(j,N),ne=4*this._idx(j+I,N+D);this.pixels[Z+0]=o.pixels[ne+0],this.pixels[Z+1]=o.pixels[ne+1],this.pixels[Z+2]=o.pixels[ne+2],this.pixels[Z+3]=o.pixels[ne+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}Sn(kx,"DEMData"),Sn(IL,"DemMinMaxQuadTree",{omit:["dem"]});class mj{constructor(o,d){this.max=o,this.onRemove=d,this.reset()}reset(){for(const o in this.data)for(const d of this.data[o])d.timeout&&clearTimeout(d.timeout),this.onRemove(d.value);return this.data={},this.order=[],this}add(o,d,f){const g=o.wrapped().key;this.data[g]===void 0&&(this.data[g]=[]);const b={value:d,timeout:void 0};if(f!==void 0&&(b.timeout=setTimeout((()=>{this.remove(o,b)}),f)),this.data[g].push(b),this.order.push(g),this.order.length>this.max){const w=this._getAndRemoveByKey(this.order[0]);w&&this.onRemove(w)}return this}has(o){return o.wrapped().key in this.data}getAndRemove(o){return this.has(o)?this._getAndRemoveByKey(o.wrapped().key):null}_getAndRemoveByKey(o){const d=this.data[o].shift();return d.timeout&&clearTimeout(d.timeout),this.data[o].length===0&&delete this.data[o],this.order.splice(this.order.indexOf(o),1),d.value}getByKey(o){const d=this.data[o];return d?d[0].value:null}get(o){return this.has(o)?this.data[o.wrapped().key][0].value:null}remove(o,d){if(!this.has(o))return this;const f=o.wrapped().key,g=d===void 0?0:this.data[f].indexOf(d),b=this.data[f][g];return this.data[f].splice(g,1),b.timeout&&clearTimeout(b.timeout),this.data[f].length===0&&delete this.data[f],this.onRemove(b.value),this.order.splice(this.order.indexOf(f),1),this}setMaxSize(o){for(this.max=o;this.order.length>this.max;){const d=this._getAndRemoveByKey(this.order[0]);d&&this.onRemove(d)}return this}filter(o){const d=[];for(const f in this.data)for(const g of this.data[f])o(g.value)||d.push(g);for(const f of d)this.remove(f.value.tileID,f)}}class tv{constructor(o,d,f){this.func=o,this.mask=d,this.range=f}}tv.ReadOnly=!1,tv.ReadWrite=!0,tv.disabled=new tv(519,tv.ReadOnly,[0,1]);const oE=7680;class aE{constructor(o,d,f,g,b,w){this.test=o,this.ref=d,this.mask=f,this.fail=g,this.depthFail=b,this.pass=w}}aE.disabled=new aE({func:519,mask:0},0,0,oE,oE,oE);class Fu{constructor(o,d,f){this.blendFunction=o,this.blendColor=d,this.mask=f}}Fu.Replace=[1,0],Fu.disabled=new Fu(Fu.Replace,Wi.transparent,[!1,!1,!1,!1]),Fu.unblended=new Fu(Fu.Replace,Wi.transparent,[!0,!0,!0,!0]),Fu.alphaBlended=new Fu([1,771],Wi.transparent,[!0,!0,!0,!0]);const lE=1029,cE=2305;class ou{constructor(o,d,f){this.enable=o,this.mode=d,this.frontFace=f}}ou.disabled=new ou(!1,lE,cE),ou.backCCW=new ou(!0,lE,cE),ou.backCW=new ou(!0,lE,2304),ou.frontCW=new ou(!0,1028,2304),ou.frontCCW=new ou(!0,1028,cE);class Xm extends zl{constructor(o,d,f){super(),this.id=o,this._onlySymbols=f,d.on("data",(g=>{g.dataType==="source"&&g.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&g.dataType==="source"&&g.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))})),d.on("error",(()=>{this._sourceErrored=!0})),this._source=d,this._tiles={},this._cache=new mj(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=d.minTileCacheSize,this._maxTileCacheSize=d.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new dj,this._isRaster=this._source.type==="raster"||this._source.type==="raster-dem"||this._source.type==="custom"&&this._source._dataType==="raster"}onAdd(o){this.map=o,this._minTileCacheSize=this._minTileCacheSize===void 0&&o?o._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=this._maxTileCacheSize===void 0&&o?o._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const o in this._tiles){const d=this._tiles[o];if(d.state!=="loaded"&&d.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const o=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,o&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(o,d){return o.isSymbolTile=this._onlySymbols,this._source.loadTile(o,d)}_unloadTile(o){if(this._source.unloadTile)return this._source.unloadTile(o,(()=>{}))}_abortTile(o){if(this._source.abortTile)return this._source.abortTile(o,(()=>{}))}serialize(){return this._source.serialize()}prepare(o){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const d in this._tiles){const f=this._tiles[d];f.upload(o),f.prepare(this.map.style.imageManager)}}getIds(){return ot(this._tiles).map((o=>o.tileID)).sort(ML).map((o=>o.key))}getRenderableIds(o){const d=[];for(const f in this._tiles)this._isIdRenderable(+f,o)&&d.push(this._tiles[f]);return o?d.sort(((f,g)=>{const b=f.tileID,w=g.tileID,E=new W(b.canonical.x,b.canonical.y)._rotate(this.transform.angle),I=new W(w.canonical.x,w.canonical.y)._rotate(this.transform.angle);return b.overscaledZ-w.overscaledZ||I.y-E.y||I.x-E.x})).map((f=>f.tileID.key)):d.map((f=>f.tileID)).sort(ML).map((f=>f.key))}hasRenderableParent(o){const d=this.findLoadedParent(o,0);return!!d&&this._isIdRenderable(d.tileID.key)}_isIdRenderable(o,d){return this._tiles[o]&&this._tiles[o].hasData()&&!this._coveredTiles[o]&&(d||!this._tiles[o].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const o in this._tiles)this._tiles[o].state!=="errored"&&this._reloadTile(+o,"reloading")}}_reloadTile(o,d){const f=this._tiles[o];f&&(f.state!=="loading"&&(f.state=d),this._loadTile(f,this._tileLoaded.bind(this,f,o,d)))}_tileLoaded(o,d,f,g){if(g)if(o.state="errored",g.status!==404)this._source.fire(new ko(g,{tile:o}));else if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){const b=this.map.painter.terrain;this.update(this.transform,b.getScaledDemTileSize(),!0),b.resetTileLookupCache(this.id)}else this.update(this.transform);else o.timeAdded=Co.now(),f==="expired"&&(o.refreshedUponExpiration=!0),this._setTileReloadTimer(d,o),this._source.type==="raster-dem"&&o.dem&&this._backfillDEM(o),this._state.initializeTileState(o,this.map?this.map.painter:null),this._source.fire(new Go("data",{dataType:"source",tile:o,coord:o.tileID,sourceCacheId:this.id}))}_backfillDEM(o){const d=this.getRenderableIds();for(let g=0;g<d.length;g++){const b=d[g];if(o.neighboringTiles&&o.neighboringTiles[b]){const w=this.getTileByID(b);f(o,w),f(w,o)}}function f(g,b){if(!g.dem||g.dem.borderReady)return;g.needsHillshadePrepare=!0,g.needsDEMTextureUpload=!0;let w=b.tileID.canonical.x-g.tileID.canonical.x;const E=b.tileID.canonical.y-g.tileID.canonical.y,I=Math.pow(2,g.tileID.canonical.z),D=b.tileID.key;w===0&&E===0||Math.abs(E)>1||(Math.abs(w)>1&&(Math.abs(w+I)===1?w+=I:Math.abs(w-I)===1&&(w-=I)),b.dem&&g.dem&&(g.dem.backfillBorder(b.dem,w,E),g.neighboringTiles&&g.neighboringTiles[D]&&(g.neighboringTiles[D].backfilled=!0)))}}getTile(o){return this.getTileByID(o.key)}getTileByID(o){return this._tiles[o]}_retainLoadedChildren(o,d,f,g){for(const b in this._tiles){let w=this._tiles[b];if(g[b]||!w.hasData()||w.tileID.overscaledZ<=d||w.tileID.overscaledZ>f)continue;let E=w.tileID;for(;w&&w.tileID.overscaledZ>d+1;){const D=w.tileID.scaledTo(w.tileID.overscaledZ-1);w=this._tiles[D.key],w&&w.hasData()&&(E=D)}let I=E;for(;I.overscaledZ>d;)if(I=I.scaledTo(I.overscaledZ-1),o[I.key]){g[E.key]=E;break}}}findLoadedParent(o,d){if(o.key in this._loadedParentTiles){const f=this._loadedParentTiles[o.key];return f&&f.tileID.overscaledZ>=d?f:null}for(let f=o.overscaledZ-1;f>=d;f--){const g=o.scaledTo(f),b=this._getLoadedTile(g);if(b)return b}}_getLoadedTile(o){const d=this._tiles[o.key];return d&&d.hasData()?d:this._cache.getByKey(this._source.reparseOverscaled?o.wrapped().key:o.canonical.key)}updateCacheSize(o,d){d=d||this._source.tileSize;const f=Math.ceil(o.width/d)+1,g=Math.ceil(o.height/d)+1,b=Math.floor(f*g*5),w=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,b):b,E=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,w):w;this._cache.setMaxSize(E)}handleWrapJump(o){const d=Math.round((o-(this._prevLng===void 0?o:this._prevLng))/360);if(this._prevLng=o,d){const f={};for(const g in this._tiles){const b=this._tiles[g];b.tileID=b.tileID.unwrapTo(b.tileID.wrap+d),f[b.tileID.key]=b}this._tiles=f;for(const g in this._timers)clearTimeout(this._timers[g]),delete this._timers[g];for(const g in this._tiles)this._setTileReloadTimer(+g,this._tiles[g])}}update(o,d,f){if(this.transform=o,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!f)return;let g;this.updateCacheSize(o,d),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?g=o.getVisibleUnwrappedCoordinates(this._source.tileID).map((E=>new Ca(E.canonical.z,E.wrap,E.canonical.z,E.canonical.x,E.canonical.y))):(g=o.coveringTiles({tileSize:d||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!f,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(g=g.filter((E=>this._source.hasTile(E))))):g=[];const b=this._updateRetainedTiles(g);if(DL(this._source.type)&&g.length!==0){const E={},I={},D=Object.keys(b);for(const j of D){const Z=b[j],ne=this._tiles[j];if(!ne||ne.fadeEndTime&&ne.fadeEndTime<=Co.now())continue;const oe=this.findLoadedParent(Z,Math.max(Z.overscaledZ-Xm.maxOverzooming,this._source.minzoom));oe&&(this._addTile(oe.tileID),E[oe.tileID.key]=oe.tileID),I[j]=Z}const N=g[g.length-1].overscaledZ;for(const j in this._tiles){const Z=this._tiles[j];if(b[j]||!Z.hasData())continue;let ne=Z.tileID;for(;ne.overscaledZ>N;){ne=ne.scaledTo(ne.overscaledZ-1);const oe=this._tiles[ne.key];if(oe&&oe.hasData()&&I[ne.key]){b[j]=Z.tileID;break}}}for(const j in E)b[j]||(this._coveredTiles[j]=!0,b[j]=E[j])}for(const E in b)this._tiles[E].clearFadeHold();const w=(function(E,I){const D=[];for(const N in E)N in I||D.push(N);return D})(this._tiles,b);for(const E of w){const I=this._tiles[E];I.hasSymbolBuckets&&!I.holdingForFade()?I.setHoldDuration(this.map._fadeDuration):I.hasSymbolBuckets&&!I.symbolFadeFinished()||this._removeTile(+E)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const o in this._tiles)this._tiles[o].holdingForFade()&&this._removeTile(+o)}_updateRetainedTiles(o){const d={};if(o.length===0)return d;const f={},g=o.reduce(((D,N)=>Math.min(D,N.overscaledZ)),1/0),b=o[0].overscaledZ,w=Math.max(b-Xm.maxOverzooming,this._source.minzoom),E=Math.max(b+Xm.maxUnderzooming,this._source.minzoom),I={};for(const D of o){const N=this._addTile(D);d[D.key]=D,N.hasData()||g<this._source.maxzoom&&(I[D.key]=D)}this._retainLoadedChildren(I,g,E,d);for(const D of o){let N=this._tiles[D.key];if(N.hasData())continue;if(D.canonical.z>=this._source.maxzoom){const Z=D.children(this._source.maxzoom)[0],ne=this.getTile(Z);if(ne&&ne.hasData()){d[Z.key]=Z;continue}}else{const Z=D.children(this._source.maxzoom);if(d[Z[0].key]&&d[Z[1].key]&&d[Z[2].key]&&d[Z[3].key])continue}let j=N.wasRequested();for(let Z=D.overscaledZ-1;Z>=w;--Z){const ne=D.scaledTo(Z);if(f[ne.key]||(f[ne.key]=!0,N=this.getTile(ne),!N&&j&&(N=this._addTile(ne)),N&&(d[ne.key]=ne,j=N.wasRequested(),N.hasData())))break}}return d}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const o in this._tiles){const d=[];let f,g=this._tiles[o].tileID;for(;g.overscaledZ>0;){if(g.key in this._loadedParentTiles){f=this._loadedParentTiles[g.key];break}d.push(g.key);const b=g.scaledTo(g.overscaledZ-1);if(f=this._getLoadedTile(b),f)break;g=b}for(const b of d)this._loadedParentTiles[b]=f}}_addTile(o){let d=this._tiles[o.key];if(d)return d;d=this._cache.getAndRemove(o),d&&(this._setTileReloadTimer(o.key,d),d.tileID=o,this._state.initializeTileState(d,this.map?this.map.painter:null),this._cacheTimers[o.key]&&(clearTimeout(this._cacheTimers[o.key]),delete this._cacheTimers[o.key],this._setTileReloadTimer(o.key,d)));const f=!!d;if(!f){const g=this.map?this.map.painter:null;d=new sE(o,this._source.tileSize*o.overscaleFactor(),this.transform.tileZoom,g,this._isRaster),this._loadTile(d,this._tileLoaded.bind(this,d,o.key,d.state))}return d?(d.uses++,this._tiles[o.key]=d,f||this._source.fire(new Go("dataloading",{tile:d,coord:d.tileID,dataType:"source"})),d):null}_setTileReloadTimer(o,d){o in this._timers&&(clearTimeout(this._timers[o]),delete this._timers[o]);const f=d.getExpiryTimeout();f&&(this._timers[o]=setTimeout((()=>{this._reloadTile(o,"expired"),delete this._timers[o]}),f))}_removeTile(o){const d=this._tiles[o];d&&(d.uses--,delete this._tiles[o],this._timers[o]&&(clearTimeout(this._timers[o]),delete this._timers[o]),d.uses>0||(d.hasData()&&d.state!=="reloading"?this._cache.add(d.tileID,d,d.getExpiryTimeout()):(d.aborted=!0,this._abortTile(d),this._unloadTile(d))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const o in this._tiles)this._removeTile(+o);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(o,d,f){const g=[],b=this.transform;if(!b)return g;const w=b.projection.name==="globe",E=Ru(b.center.lng);for(const I in this._tiles){const D=this._tiles[I];if(f&&D.clearQueryDebugViz(),D.holdingForFade())continue;let N;if(w){const j=D.tileID.canonical;if(j.z===0){const Z=[Math.abs(De(E,...gy(j,-1))-E),Math.abs(De(E,...gy(j,1))-E)];N=[0,2*Z.indexOf(Math.min(...Z))-1]}else{const Z=[Math.abs(De(E,...gy(j,-1))-E),Math.abs(De(E,...gy(j,0))-E),Math.abs(De(E,...gy(j,1))-E)];N=[Z.indexOf(Math.min(...Z))-1]}}else N=[0];for(const j of N){const Z=o.containsTile(D,b,d,j);Z&&g.push(Z)}}return g}getVisibleCoordinates(o){const d=this.getRenderableIds(o).map((f=>this._tiles[f].tileID));for(const f of d)f.projMatrix=this.transform.calculateProjMatrix(f.toUnwrapped());return d}hasTransition(){if(this._source.hasTransition())return!0;if(DL(this._source.type))for(const o in this._tiles){const d=this._tiles[o];if(d.fadeEndTime!==void 0&&d.fadeEndTime>=Co.now())return!0}return!1}setFeatureState(o,d,f){this._state.updateState(o=o||"_geojsonTileLayer",d,f)}removeFeatureState(o,d,f){this._state.removeFeatureState(o=o||"_geojsonTileLayer",d,f)}getFeatureState(o,d){return this._state.getState(o=o||"_geojsonTileLayer",d)}setDependencies(o,d,f){const g=this._tiles[o];g&&g.setDependencies(d,f)}reloadTilesForDependencies(o,d){for(const f in this._tiles)this._tiles[f].hasDependency(o,d)&&this._reloadTile(+f,"reloading");this._cache.filter((f=>!f.hasDependency(o,d)))}_preloadTiles(o,d){if(!this._sourceLoaded){const E=()=>{this._sourceLoaded&&(this._source.off("data",E),this._preloadTiles(o,d))};return void this._source.on("data",E)}const f=new Map,g=Array.isArray(o)?o:[o],b=this.map.painter.terrain,w=this.usedForTerrain&&b?b.getScaledDemTileSize():this._source.tileSize;for(const E of g){const I=E.coveringTiles({tileSize:w,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const D of I)f.set(D.key,D);this.usedForTerrain&&E.updateElevation(!1)}it(Array.from(f.values()),((E,I)=>{const D=new sE(E,this._source.tileSize*E.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(D,(N=>{this._source.type==="raster-dem"&&D.dem&&this._backfillDEM(D),I(N,D)}))}),d)}}function ML(c,o){const d=Math.abs(2*c.wrap)-+(c.wrap<0),f=Math.abs(2*o.wrap)-+(o.wrap<0);return c.overscaledZ-o.overscaledZ||f-d||o.canonical.y-c.canonical.y||o.canonical.x-c.canonical.x}function DL(c){return c==="raster"||c==="image"||c==="video"||c==="custom"}function gy(c,o){const d=1<<c.z;return[c.x/d+o,(c.x+1)/d+o]}Xm.maxOverzooming=10,Xm.maxUnderzooming=3;class Ix{constructor(o,d,f){this._demTile=o,this._dem=this._demTile.dem,this._scale=d,this._offset=f}static create(o,d,f){const g=f||o.findDEMTileFor(d);if(!g||!g.dem)return;const b=g.dem,w=g.tileID,E=1<<d.canonical.z-w.canonical.z;return new Ix(g,g.tileSize/zn/E,[(d.canonical.x/E-w.canonical.x)*b.dim,(d.canonical.y/E-w.canonical.y)*b.dim])}tileCoordToPixel(o,d){const f=d*this._scale+this._offset[1],g=Math.floor(o*this._scale+this._offset[0]),b=Math.floor(f);return new W(g,b)}getElevationAt(o,d,f,g){const b=o*this._scale+this._offset[0],w=d*this._scale+this._offset[1],E=Math.floor(b),I=Math.floor(w),D=this._dem;return g=!!g,f?Qn(Qn(D.get(E,I,g),D.get(E,I+1,g),w-I),Qn(D.get(E+1,I,g),D.get(E+1,I+1,g),w-I),b-E):D.get(E,I,g)}getElevationAtPixel(o,d,f){return this._dem.get(o,d,!!f)}getMeterToDEM(o){return(1<<this._demTile.tileID.canonical.z)*iu(1,o)*this._dem.stride}}class LL{constructor(o,d){this.tileID=o,this.x=o.canonical.x,this.y=o.canonical.y,this.z=o.canonical.z,this.grid=new na(zn,16,0),this.featureIndexArray=new Bd,this.promoteId=d}insert(o,d,f,g,b,w=0){const E=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(f,g,b,w);const I=this.grid;for(let D=0;D<d.length;D++){const N=d[D],j=[1/0,1/0,-1/0,-1/0];for(let Z=0;Z<N.length;Z++){const ne=N[Z];j[0]=Math.min(j[0],ne.x),j[1]=Math.min(j[1],ne.y),j[2]=Math.max(j[2],ne.x),j[3]=Math.max(j[3],ne.y)}j[0]<zn&&j[1]<zn&&j[2]>=0&&j[3]>=0&&I.insert(E,j[0],j[1],j[2],j[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new jS(new mx(this.rawTileData)).layers,this.sourceLayerCoder=new _L(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const o in this.vtLayers)this.vtFeatures[o]=[]}return this.vtLayers}query(o,d,f,g){this.loadVTLayers();const b=o.params||{},w=Yh(b.filter),E=o.tileResult,I=o.transform,D=E.bufferedTilespaceBounds,N=this.grid.query(D.min.x,D.min.y,D.max.x,D.max.y,((oe,he,Te,Oe)=>rD(E.bufferedTilespaceGeometry,oe,he,Te,Oe)));N.sort(pj);let j=null;I.elevation&&N.length>0&&(j=Ix.create(I.elevation,this.tileID));const Z={};let ne;for(let oe=0;oe<N.length;oe++){const he=N[oe];if(he===ne)continue;ne=he;const Te=this.featureIndexArray.get(he);let Oe=null;this.loadMatchingFeature(Z,Te,w,b.layers,b.availableImages,d,f,g,((He,Ve,Ne,et=0)=>(Oe||(Oe=Ud(He,this.tileID.canonical,o.tileTransform)),Ve.queryIntersectsFeature(E,He,Ne,Oe,this.z,o.transform,o.pixelPosMatrix,j,et))))}return Z}loadMatchingFeature(o,d,f,g,b,w,E,I,D){const{featureIndex:N,bucketIndex:j,sourceLayerIndex:Z,layoutVertexArrayOffset:ne}=d,oe=this.bucketLayerIDs[j];if(g&&!(function(He,Ve){for(let Ne=0;Ne<He.length;Ne++)if(Ve.indexOf(He[Ne])>=0)return!0;return!1})(g,oe))return;const he=this.sourceLayerCoder.decode(Z),Te=this.vtLayers[he].feature(N);if(f.needGeometry){const He=Hm(Te,!0);if(!f.filter(new $(this.tileID.overscaledZ),He,this.tileID.canonical))return}else if(!f.filter(new $(this.tileID.overscaledZ),Te))return;const Oe=this.getId(Te,he);for(let He=0;He<oe.length;He++){const Ve=oe[He];if(g&&g.indexOf(Ve)<0)continue;const Ne=w[Ve];if(!Ne)continue;let et={};Oe!==void 0&&I&&(et=I.getState(Ne.sourceLayer||"_geojsonTileLayer",Oe));const Ze=mt({},E[Ve]);Ze.paint=RL(Ze.paint,Ne.paint,Te,et,b),Ze.layout=RL(Ze.layout,Ne.layout,Te,et,b);const Tt=!D||D(Te,Ne,et,ne);if(!Tt)continue;const bt=new yL(Te,this.z,this.x,this.y,Oe);bt.layer=Ze;let Ft=o[Ve];Ft===void 0&&(Ft=o[Ve]=[]),Ft.push({featureIndex:N,feature:bt,intersectionZ:Tt})}}lookupSymbolFeatures(o,d,f,g,b,w,E,I){const D={};this.loadVTLayers();const N=Yh(b);for(const j of o)this.loadMatchingFeature(D,{bucketIndex:f,sourceLayerIndex:g,featureIndex:j,layoutVertexArrayOffset:0},N,w,E,I,d);return D}loadFeature(o){const{featureIndex:d,sourceLayerIndex:f}=o;this.loadVTLayers();const g=this.sourceLayerCoder.decode(f),b=this.vtFeatures[g];if(b[d])return b[d];const w=this.vtLayers[g].feature(d);return b[d]=w,w}hasLayer(o){for(const d of this.bucketLayerIDs)for(const f of d)if(o===f)return!0;return!1}getId(o,d){let f=o.id;if(this.promoteId){const g=typeof this.promoteId=="string"?this.promoteId:this.promoteId[d];g!=null&&(f=o.properties[g]),typeof f=="boolean"&&(f=Number(f))}return f}}function RL(c,o,d,f,g){return ue(c,((b,w)=>{const E=o instanceof Ce?o.get(w):null;return E&&E.evaluate?E.evaluate(d,f,g):E}))}function pj(c,o){return o-c}Sn(LL,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class OL{constructor(o,d){this.width=o,this.height=d,this.nextRow=0,this.image=new jd({width:o,height:d}),this.positions={},this.uploaded=!1}getDash(o,d){const f=this.getKey(o,d);return this.positions[f]}trim(){const o=this.width,d=this.height=ht(this.nextRow);this.image.resize({width:o,height:d})}getKey(o,d){return o.join(",")+d}getDashRanges(o,d,f){const g=[];let b=o.length%2==1?-o[o.length-1]*f:0,w=o[0]*f,E=!0;g.push({left:b,right:w,isDash:E,zeroLength:o[0]===0});let I=o[0];for(let D=1;D<o.length;D++){E=!E;const N=o[D];b=I*f,I+=N,w=I*f,g.push({left:b,right:w,isDash:E,zeroLength:N===0})}return g}addRoundDash(o,d,f){const g=d/2;for(let b=-f;b<=f;b++){const w=this.width*(this.nextRow+f+b);let E=0,I=o[E];for(let D=0;D<this.width;D++){D/I.right>1&&(I=o[++E]);const N=Math.abs(D-I.left),j=Math.abs(D-I.right),Z=Math.min(N,j);let ne;const oe=b/f*(g+1);if(I.isDash){const he=g-Math.abs(oe);ne=Math.sqrt(Z*Z+he*he)}else ne=g-Math.sqrt(Z*Z+oe*oe);this.image.data[w+D]=Math.max(0,Math.min(255,ne+128))}}}addRegularDash(o,d){for(let I=o.length-1;I>=0;--I){const D=o[I],N=o[I+1];D.zeroLength?o.splice(I,1):N&&N.isDash===D.isDash&&(N.left=D.left,o.splice(I,1))}const f=o[0],g=o[o.length-1];f.isDash===g.isDash&&(f.left=g.left-this.width,g.right=f.right+this.width);const b=this.width*this.nextRow;let w=0,E=o[w];for(let I=0;I<this.width;I++){I/E.right>1&&(E=o[++w]);const D=Math.abs(I-E.left),N=Math.abs(I-E.right),j=Math.min(D,N);this.image.data[b+I]=Math.max(0,Math.min(255,(E.isDash?j:-j)+d+128))}}addDash(o,d){const f=this.getKey(o,d);if(this.positions[f])return this.positions[f];const g=d==="round",b=g?7:0,w=2*b+1;if(this.nextRow+w>this.height)return je("LineAtlas out of space"),null;o.length===0&&o.push(1);let E=0;for(let N=0;N<o.length;N++)o[N]<0&&(je("Negative value is found in line dasharray, replacing values with 0"),o[N]=0),E+=o[N];if(E!==0){const N=this.width/E,j=this.getDashRanges(o,this.width,N);g?this.addRoundDash(j,N,b):this.addRegularDash(j,d==="square"?.5*N:0)}const I=this.nextRow+b;this.nextRow+=w;const D={tl:[I,b],br:[E,0]};return this.positions[f]=D,D}}Sn(OL,"LineAtlas");const VL=1*su;class BL{constructor(o){const d={},f=[];for(const E in o){const I=o[E],D=d[E]={};for(const N in I.glyphs){const j=I.glyphs[+N];if(!j||j.bitmap.width===0||j.bitmap.height===0)continue;const Z=j.metrics.localGlyph?VL:1,ne={x:0,y:0,w:j.bitmap.width+2*Z,h:j.bitmap.height+2*Z};f.push(ne),D[N]=ne}}const{w:g,h:b}=qS(f),w=new jd({width:g||1,height:b||1});for(const E in o){const I=o[E];for(const D in I.glyphs){const N=I.glyphs[+D];if(!N||N.bitmap.width===0||N.bitmap.height===0)continue;const j=d[E][D],Z=N.metrics.localGlyph?VL:1;jd.copy(N.bitmap,w,{x:0,y:0},{x:j.x+Z,y:j.y+Z},N.bitmap)}}this.image=w,this.positions=d}}Sn(BL,"GlyphAtlas");class gj{constructor(o){this.tileID=new Ca(o.tileID.overscaledZ,o.tileID.wrap,o.tileID.canonical.z,o.tileID.canonical.x,o.tileID.canonical.y),this.tileZoom=o.tileZoom,this.uid=o.uid,this.zoom=o.zoom,this.canonical=o.tileID.canonical,this.pixelRatio=o.pixelRatio,this.tileSize=o.tileSize,this.source=o.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=o.showCollisionBoxes,this.collectResourceTiming=!!o.collectResourceTiming,this.returnDependencies=!!o.returnDependencies,this.promoteId=o.promoteId,this.enableTerrain=!!o.enableTerrain,this.isSymbolTile=o.isSymbolTile,this.tileTransform=Km(o.tileID.canonical,o.projection),this.projection=o.projection}parse(o,d,f,g,b){this.status="parsing",this.data=o,this.collisionBoxArray=new qi;const w=new _L(Object.keys(o.layers).sort()),E=new LL(this.tileID,this.promoteId);E.bucketLayerIDs=[];const I={},D=new OL(256,256),N={featureIndex:E,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:D,availableImages:f},j=d.familiesBySource[this.source];for(const et in j){const Ze=o.layers[et];if(!Ze)continue;let Tt=!1,bt=!1;for(const It of j[et])It[0].type==="symbol"?Tt=!0:bt=!0;if(this.isSymbolTile===!0&&!Tt||this.isSymbolTile===!1&&!bt)continue;Ze.version===1&&je(`Vector tile source "${this.source}" layer "${et}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Ft=w.encode(et),sn=[];for(let It=0;It<Ze.length;It++){const jt=Ze.feature(It),Wt=E.getId(jt,et);sn.push({feature:jt,id:Wt,index:It,sourceLayerIndex:Ft})}for(const It of j[et]){const jt=It[0];this.isSymbolTile!==void 0&&jt.type==="symbol"!==this.isSymbolTile||jt.minzoom&&this.zoom<Math.floor(jt.minzoom)||jt.maxzoom&&this.zoom>=jt.maxzoom||jt.visibility!=="none"&&(uE(It,this.zoom,f),(I[jt.id]=jt.createBucket({index:E.bucketLayerIDs.length,layers:It,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Ft,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:f})).populate(sn,N,this.tileID.canonical,this.tileTransform),E.bucketLayerIDs.push(It.map((Wt=>Wt.id))))}}let Z,ne,oe,he;D.trim();const Te={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},Oe=()=>{if(Z)return b(Z);if(ne&&oe&&he){const et=new BL(ne),Ze=new WD(oe,he);for(const Tt in I){const bt=I[Tt];bt instanceof lf?(uE(bt.layers,this.zoom,f),UU(bt,ne,et.positions,oe,Ze.iconPositions,this.showCollisionBoxes,f,this.tileID.canonical,this.tileZoom,this.projection)):bt.hasPattern&&(bt instanceof dx||bt instanceof ox||bt instanceof ry)&&(uE(bt.layers,this.zoom,f),bt.addFeatures(N,this.tileID.canonical,Ze.patternPositions,f,this.tileTransform))}this.status="done",b(null,{buckets:ot(I).filter((Tt=>!Tt.isEmpty())),featureIndex:E,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:et.image,lineAtlas:D,imageAtlas:Ze,glyphMap:this.returnDependencies?ne:null,iconMap:this.returnDependencies?oe:null,glyphPositions:this.returnDependencies?et.positions:null})}},He=ue(N.glyphDependencies,(et=>Object.keys(et).map(Number)));Object.keys(He).length?g.send("getGlyphs",{uid:this.uid,stacks:He},((et,Ze)=>{Z||(Z=et,ne=Ze,Oe())}),void 0,!1,Te):ne={};const Ve=Object.keys(N.iconDependencies);Ve.length?g.send("getImages",{icons:Ve,source:this.source,tileID:this.tileID,type:"icons"},((et,Ze)=>{Z||(Z=et,oe=Ze,Oe())}),void 0,!1,Te):oe={};const Ne=Object.keys(N.patternDependencies);Ne.length?g.send("getImages",{icons:Ne,source:this.source,tileID:this.tileID,type:"patterns"},((et,Ze)=>{Z||(Z=et,he=Ze,Oe())}),void 0,!1,Te):he={},Oe()}}function uE(c,o,d){const f=new $(o);for(const g of c)g.recalculate(f,d)}class FL{constructor(o){this.entries={},this.scheduler=o}request(o,d,f,g){const b=this.entries[o]=this.entries[o]||{callbacks:[]};if(b.result){const[w,E]=b.result;return this.scheduler?this.scheduler.add((()=>{g(w,E)}),d):g(w,E),()=>{}}return b.callbacks.push(g),b.cancel||(b.cancel=f(((w,E)=>{b.result=[w,E];for(const I of b.callbacks)this.scheduler?this.scheduler.add((()=>{I(w,E)}),d):I(w,E);setTimeout((()=>delete this.entries[o]),3e3)}))),()=>{b.result||(b.callbacks=b.callbacks.filter((w=>w!==g)),b.callbacks.length||(b.cancel(),delete this.entries[o]))}}}function zL(c,o,d){const f=JSON.stringify(c.request);return c.data&&(this.deduped.entries[f]={result:[null,c.data]}),this.deduped.request(f,{type:"parseTile",isSymbolTile:c.isSymbolTile,zoom:c.tileZoom},(g=>{const b=So(c.request,((w,E,I,D)=>{w?g(w):E&&g(null,{vectorTile:d?void 0:new jS(new mx(E)),rawData:E,cacheControl:I,expires:D})}));return()=>{b.cancel(),g()}}),o)}const NL=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class dE{static from(o){if(!(o instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[d,f]=new Uint8Array(o,0,2);if(d!==219)throw new Error("Data does not appear to be in a KDBush format.");const g=f>>4;if(g!==1)throw new Error(`Got v${g} data when expected v1.`);const b=NL[15&f];if(!b)throw new Error("Unrecognized array type.");const[w]=new Uint16Array(o,2,1),[E]=new Uint32Array(o,4,1);return new dE(E,w,b,o)}constructor(o,d=64,f=Float64Array,g){if(isNaN(o)||o<0)throw new Error(`Unpexpected numItems value: ${o}.`);this.numItems=+o,this.nodeSize=Math.min(Math.max(+d,2),65535),this.ArrayType=f,this.IndexArrayType=o<65536?Uint16Array:Uint32Array;const b=NL.indexOf(this.ArrayType),w=2*o*this.ArrayType.BYTES_PER_ELEMENT,E=o*this.IndexArrayType.BYTES_PER_ELEMENT,I=(8-E%8)%8;if(b<0)throw new Error(`Unexpected typed array class: ${f}.`);g&&g instanceof ArrayBuffer?(this.data=g,this.ids=new this.IndexArrayType(this.data,8,o),this.coords=new this.ArrayType(this.data,8+E+I,2*o),this._pos=2*o,this._finished=!0):(this.data=new ArrayBuffer(8+w+E+I),this.ids=new this.IndexArrayType(this.data,8,o),this.coords=new this.ArrayType(this.data,8+E+I,2*o),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+b]),new Uint16Array(this.data,2,1)[0]=d,new Uint32Array(this.data,4,1)[0]=o)}add(o,d){const f=this._pos>>1;return this.ids[f]=f,this.coords[this._pos++]=o,this.coords[this._pos++]=d,f}finish(){const o=this._pos>>1;if(o!==this.numItems)throw new Error(`Added ${o} items when expected ${this.numItems}.`);return hE(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(o,d,f,g){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:b,coords:w,nodeSize:E}=this,I=[0,b.length-1,0],D=[];for(;I.length;){const N=I.pop()||0,j=I.pop()||0,Z=I.pop()||0;if(j-Z<=E){for(let Te=Z;Te<=j;Te++){const Oe=w[2*Te],He=w[2*Te+1];Oe>=o&&Oe<=f&&He>=d&&He<=g&&D.push(b[Te])}continue}const ne=Z+j>>1,oe=w[2*ne],he=w[2*ne+1];oe>=o&&oe<=f&&he>=d&&he<=g&&D.push(b[ne]),(N===0?o<=oe:d<=he)&&(I.push(Z),I.push(ne-1),I.push(1-N)),(N===0?f>=oe:g>=he)&&(I.push(ne+1),I.push(j),I.push(1-N))}return D}within(o,d,f){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:g,coords:b,nodeSize:w}=this,E=[0,g.length-1,0],I=[],D=f*f;for(;E.length;){const N=E.pop()||0,j=E.pop()||0,Z=E.pop()||0;if(j-Z<=w){for(let Te=Z;Te<=j;Te++)UL(b[2*Te],b[2*Te+1],o,d)<=D&&I.push(g[Te]);continue}const ne=Z+j>>1,oe=b[2*ne],he=b[2*ne+1];UL(oe,he,o,d)<=D&&I.push(g[ne]),(N===0?o-f<=oe:d-f<=he)&&(E.push(Z),E.push(ne-1),E.push(1-N)),(N===0?o+f>=oe:d+f>=he)&&(E.push(ne+1),E.push(j),E.push(1-N))}return I}}function hE(c,o,d,f,g,b){if(g-f<=d)return;const w=f+g>>1;$L(c,o,w,f,g,b),hE(c,o,d,f,w-1,1-b),hE(c,o,d,w+1,g,1-b)}function $L(c,o,d,f,g,b){for(;g>f;){if(g-f>600){const D=g-f+1,N=d-f+1,j=Math.log(D),Z=.5*Math.exp(2*j/3),ne=.5*Math.sqrt(j*Z*(D-Z)/D)*(N-D/2<0?-1:1);$L(c,o,d,Math.max(f,Math.floor(d-N*Z/D+ne)),Math.min(g,Math.floor(d+(D-N)*Z/D+ne)),b)}const w=o[2*d+b];let E=f,I=g;for(vy(c,o,f,d),o[2*g+b]>w&&vy(c,o,f,g);E<I;){for(vy(c,o,E,I),E++,I--;o[2*E+b]<w;)E++;for(;o[2*I+b]>w;)I--}o[2*f+b]===w?vy(c,o,f,I):(I++,vy(c,o,I,g)),I<=d&&(f=I+1),d<=I&&(g=I-1)}}function vy(c,o,d,f){fE(c,d,f),fE(o,2*d,2*f),fE(o,2*d+1,2*f+1)}function fE(c,o,d){const f=c[o];c[o]=c[d],c[d]=f}function UL(c,o,d,f){const g=c-d,b=o-f;return g*g+b*b}s.ARRAY_TYPE=wl,s.AUTH_ERR_MSG=Ke,s.Aabb=Ea,s.Actor=class{constructor(c,o,d){this.target=c,this.parent=o,this.mapId=d,this.callbacks={},this.cancelCallbacks={},kt(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=wt()?c:p,this.scheduler=new cj}send(c,o,d,f,g=!1,b){const w=Math.round(1e18*Math.random()).toString(36).substring(0,10);d&&(d.metadata=b,this.callbacks[w]=d);const E=gn(this.globalScope)?void 0:[];return this.target.postMessage({id:w,type:c,hasCallback:!!d,targetMapId:f,mustQueue:g,sourceMapId:this.mapId,data:Pu(o,E)},E),{cancel:()=>{d&&delete this.callbacks[w],this.target.postMessage({id:w,type:"<cancel>",targetMapId:f,sourceMapId:this.mapId})}}}receive(c){const o=c.data,d=o.id;if(d&&(!o.targetMapId||this.mapId===o.targetMapId))if(o.type==="<cancel>"){const f=this.cancelCallbacks[d];delete this.cancelCallbacks[d],f&&f.cancel()}else if(o.mustQueue||wt()){const f=this.callbacks[d];this.cancelCallbacks[d]=this.scheduler.add((()=>this.processTask(d,o)),f&&f.metadata||{type:"message"})}else this.processTask(d,o)}processTask(c,o){if(o.type==="<response>"){const d=this.callbacks[c];delete this.callbacks[c],d&&(o.error?d(Zc(o.error)):d(null,Zc(o.data)))}else{const d=gn(this.globalScope)?void 0:[],f=o.hasCallback?(b,w)=>{delete this.cancelCallbacks[c],this.target.postMessage({id:c,type:"<response>",sourceMapId:this.mapId,error:b?Pu(b):null,data:Pu(w,d)},d)}:b=>{},g=Zc(o.data);if(this.parent[o.type])this.parent[o.type](o.sourceMapId,g,f);else if(this.parent.getWorkerSource){const b=o.type.split(".");this.parent.getWorkerSource(o.sourceMapId,b[0],g.source)[b[1]](g,f)}else f(new Error(`Could not find function ${o.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},s.CanonicalTileID=ux,s.Color=Wi,s.ColorMode=Fu,s.CullFaceMode=ou,s.DEMData=kx,s.DataConstantProperty=le,s.DedupedRequest=FL,s.DepthMode=tv,s.EXTENT=zn,s.Elevation=class{isDataAvailableAtPoint(c){const o=this._source();if(this.isUsingMockSource()||!o||c.y<0||c.y>1)return!1;const d=o.getSource().maxzoom,f=1<<d,g=Math.floor(c.x),b=Math.floor((c.x-g)*f),w=Math.floor(c.y*f),E=this.findDEMTileFor(new Ca(d,g,d,b,w));return!(!E||!E.dem)}getAtPointOrZero(c,o=0){return this.getAtPoint(c,o)||0}getAtPoint(c,o,d=!0){if(this.isUsingMockSource())return null;o==null&&(o=null);const f=this._source();if(!f||c.y<0||c.y>1)return o;const g=f.getSource().maxzoom,b=1<<g,w=Math.floor(c.x),E=c.x-w,I=new Ca(g,w,g,Math.floor(E*b),Math.floor(c.y*b)),D=this.findDEMTileFor(I);if(!D||!D.dem)return o;const N=D.dem,j=1<<D.tileID.canonical.z,Z=(E*j-D.tileID.canonical.x)*N.dim,ne=(c.y*j-D.tileID.canonical.y)*N.dim,oe=Math.floor(Z),he=Math.floor(ne);return(d?this.exaggeration():1)*Qn(Qn(N.get(oe,he),N.get(oe,he+1),ne-he),Qn(N.get(oe+1,he),N.get(oe+1,he+1),ne-he),Z-oe)}getAtTileOffset(c,o,d){const f=1<<c.canonical.z;return this.getAtPointOrZero(new $g(c.wrap+(c.canonical.x+o/zn)/f,(c.canonical.y+d/zn)/f))}getAtTileOffsetFunc(c,o,d,f){return g=>{const b=this.getAtTileOffset(c,g.x,g.y),w=f.upVector(c.canonical,g.x,g.y);return Kl(w,w,b*f.upVectorScale(c.canonical,o,d).metersToTile),w}}getForTilePoints(c,o,d,f){if(this.isUsingMockSource())return!1;const g=Ix.create(this,c,f);return!!g&&(o.forEach((b=>{b[2]=this.exaggeration()*g.getElevationAt(b[0],b[1],d)})),!0)}getMinMaxForTile(c){if(this.isUsingMockSource())return null;const o=this.findDEMTileFor(c);if(!o||!o.dem)return null;const d=o.dem.tree,f=o.tileID,g=1<<c.canonical.z-f.canonical.z;let b=c.canonical.x/g-f.canonical.x,w=c.canonical.y/g-f.canonical.y,E=0;for(let I=0;I<c.canonical.z-f.canonical.z&&!d.leaves[E];I++){b*=2,w*=2;const D=2*Math.floor(w)+Math.floor(b);E=d.childOffsets[E]+D,b%=1,w%=1}return{min:this.exaggeration()*d.minimums[E],max:this.exaggeration()*d.maximums[E]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(c,o,d){throw new Error("Pure virtual method called.")}pointCoordinate(c){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(c){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},s.ErrorEvent=ko,s.EvaluationParameters=$,s.Event=Go,s.Evented=zl,s.FillExtrusionBucket=ry,s.Frustum=bS,s.FrustumCorners=yS,s.GLOBE_RADIUS=Du,s.GLOBE_SCALE_MATCH_LATITUDE=45,s.GLOBE_ZOOM_THRESHOLD_MAX=$M,s.GLOBE_ZOOM_THRESHOLD_MIN=xS,s.GlobeSharedBuffers=class{constructor(c){this._createGrid(c),this._createPoles(c)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const c of this._poleSegments)c.destroy();for(const c of this._gridSegments)c.withSkirts.destroy(),c.withoutSkirts.destroy();if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();for(const c of this._wireframeSegments)c.destroy()}}_fillGridMeshWithLods(c,o){const d=new qt,f=new An,g=[],b=c+1+2,w=o[0]+1,E=o[0]+1+(1+o.length),I=(D,N,j)=>{let Z=D===b-1?D-2:D===0?D:D-1;return Z+=j?24575:0,[Z,N]};for(let D=0;D<b;++D)d.emplaceBack(...I(D,0,!0));for(let D=0;D<w;++D)for(let N=0;N<b;++N)d.emplaceBack(...I(N,D,(N===0||N===b-1)&&!0));for(let D=0;D<o.length;++D){const N=o[D];for(let j=0;j<b;++j)d.emplaceBack(...I(j,N,!0))}for(let D=0;D<o.length;++D){const N=f.length,j=o[D]+1+2,Z=new An;for(let he=0;he<j-1;he++){const Te=he===j-2,Oe=Te?b*(E-o.length+D-he):b;for(let He=0;He<b-1;He++){const Ve=he*b+He;he===0||Te||He===0||He===b-2?(Z.emplaceBack(Ve+1,Ve,Ve+Oe),Z.emplaceBack(Ve+Oe,Ve+Oe+1,Ve+1)):(f.emplaceBack(Ve+1,Ve,Ve+Oe),f.emplaceBack(Ve+Oe,Ve+Oe+1,Ve+1))}}const ne=hs.simpleSegment(0,N,d.length,f.length-N);for(let he=0;he<Z.uint16.length;he+=3)f.emplaceBack(Z.uint16[he],Z.uint16[he+1],Z.uint16[he+2]);const oe=hs.simpleSegment(0,N,d.length,f.length-N);g.push({withoutSkirts:ne,withSkirts:oe})}return{vertices:d,indices:f,segments:g}}_createGrid(c){const o=this._fillGridMeshWithLods(jm,K_);this._gridSegments=o.segments,this._gridBuffer=c.createVertexBuffer(o.vertices,q_.members),this._gridIndexBuffer=c.createIndexBuffer(o.indices,!0)}_createPoles(c){const o=new An;for(let g=0;g<=jm;g++)o.emplaceBack(0,g+1,g+2);this._poleIndexBuffer=c.createIndexBuffer(o,!0);const d=new Gi,f=new Gi;this._poleSegments=[];for(let g=0,b=0;g<xS;g++){const w=360/(1<<g);d.emplaceBack(0,-Du,0,.5,0),f.emplaceBack(0,-Du,0,.5,1);for(let E=0;E<=jm;E++){const I=E/jm,D=Qn(0,w,I),[N,j,Z]=Fg(c$,u$,D,Du);d.emplaceBack(N,j,Z,I,0),f.emplaceBack(N,j,Z,I,1)}this._poleSegments.push(hs.simpleSegment(b,0,66,64)),b+=66}this._poleNorthVertexBuffer=c.createVertexBuffer(d,zM,!1),this._poleSouthVertexBuffer=c.createVertexBuffer(f,zM,!1)}getGridBuffers(c,o){return[this._gridBuffer,this._gridIndexBuffer,o?this._gridSegments[c].withSkirts:this._gridSegments[c].withoutSkirts]}getPoleBuffers(c){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[c]]}getWirefameBuffers(c,o){if(!this._wireframeSegments){const d=new Ps,f=jm,g=f+1+2,b=1;this._wireframeSegments=[];for(let w=0,E=0;w<K_.length;w++){const I=K_[w];for(let N=b;N<I+b;N++)for(let j=b;j<f+b;j++){const Z=N*g+j;d.emplaceBack(Z,Z+1),d.emplaceBack(Z,Z+g),d.emplaceBack(Z,Z+g+1)}const D=I*f*3;this._wireframeSegments.push(hs.simpleSegment(0,E,(I+1)*g,D)),E+=D}this._wireframeIndexBuffer=c.createIndexBuffer(d)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[o]]}},s.GlyphManager=Yg,s.ImagePosition=KS,s.KDBush=dE,s.LivePerformanceUtils=Es,s.LngLat=ar,s.LngLatBounds=rf,s.LocalGlyphMode=ZS,s.MAX_MERCATOR_LATITUDE=Oo,s.MercatorCoordinate=$g,s.ONE_EM=fo,s.OverscaledTileID=Ca,s.PerformanceMarkers=Hr,s.Point=W,s.Properties=Le,s.RGBAImage=Tl,s.Ray=_S,s.RequestManager=class{constructor(c,o,d){this._transformRequestFn=c,this._customAccessToken=o,this._silenceAuthErrors=!!d,this._createSkuToken()}_createSkuToken(){const c=(function(){let o="";for(let d=0;d<10;d++)o+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",G,o].join(""),tokenExpiresAt:Date.now()+432e5}})();this._skuToken=c.token,this._skuTokenExpiresAt=c.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(c,o){return this._transformRequestFn&&this._transformRequestFn(c,o)||{url:c}}normalizeStyleURL(c,o){if(!st(c))return c;const d=dn(c);return d.path=`/styles/v1${d.path}`,this._makeAPIURL(d,this._customAccessToken||o)}normalizeGlyphsURL(c,o){if(!st(c))return c;const d=dn(c);return d.path=`/fonts/v1${d.path}`,this._makeAPIURL(d,this._customAccessToken||o)}normalizeSourceURL(c,o,d,f){if(!st(c))return c;const g=dn(c);return g.path=`/v4/${g.authority}.json`,g.params.push("secure"),d&&g.params.push(`language=${d}`),f&&g.params.push(`worldview=${f}`),this._makeAPIURL(g,this._customAccessToken||o)}normalizeSpriteURL(c,o,d,f){const g=dn(c);return st(c)?(g.path=`/styles/v1${g.path}/sprite${o}${d}`,this._makeAPIURL(g,this._customAccessToken||f)):(g.path+=`${o}${d}`,rn(g))}normalizeTileURL(c,o,d){if(this._isSkuTokenExpired()&&this._createSkuToken(),c&&!st(c))return c;const f=dn(c);f.path=f.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${o||d&&f.authority!=="raster"&&d===512?"@2x":""}${k.supported?".webp":"$1"}`),f.authority==="raster"?f.path=`/${T.RASTER_URL_PREFIX}${f.path}`:(f.path=f.path.replace(/^.+\/v4\//,"/"),f.path=`/${T.TILE_URL_VERSION}${f.path}`);const g=this._customAccessToken||(function(b){for(const w of b){const E=w.match(/^access_token=(.*)$/);if(E)return E[1]}return null})(f.params)||T.ACCESS_TOKEN;return T.REQUIRE_ACCESS_TOKEN&&g&&this._skuToken&&f.params.push(`sku=${this._skuToken}`),this._makeAPIURL(f,g)}canonicalizeTileURL(c,o){const d=dn(c);if(!d.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!d.path.match(/\.[\w]+$/))return c;let f="mapbox://";d.path.match(/^\/raster\/v1\//)?f+=`raster/${d.path.replace(`/${T.RASTER_URL_PREFIX}/`,"")}`:f+=`tiles/${d.path.replace(`/${T.TILE_URL_VERSION}/`,"")}`;let g=d.params;return o&&(g=g.filter((b=>!b.match(/^access_token=/)))),g.length&&(f+=`?${g.join("&")}`),f}canonicalizeTileset(c,o){const d=!!o&&st(o),f=[];for(const g of c.tiles||[])vt(g)?f.push(this.canonicalizeTileURL(g,d)):f.push(g);return f}_makeAPIURL(c,o){const d="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",f=dn(T.API_URL);if(c.protocol=f.protocol,c.authority=f.authority,c.protocol==="http"){const g=c.params.indexOf("secure");g>=0&&c.params.splice(g,1)}if(f.path!=="/"&&(c.path=`${f.path}${c.path}`),!T.REQUIRE_ACCESS_TOKEN)return rn(c);if(o=o||T.ACCESS_TOKEN,!this._silenceAuthErrors){if(!o)throw new Error(`An API access token is required to use Mapbox GL. ${d}`);if(o[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${d}`)}return c.params=c.params.filter((g=>g.indexOf("access_token")===-1)),c.params.push(`access_token=${o||""}`),rn(c)}},s.ResourceType=Ss,s.SegmentVector=hs,s.SourceCache=Xm,s.StencilMode=aE,s.StructArrayLayout1ui2=Ta,s.StructArrayLayout2f1f2i16=Rn,s.StructArrayLayout2i4=qt,s.StructArrayLayout2ui4=Ps,s.StructArrayLayout3f12=pi,s.StructArrayLayout3ui6=An,s.StructArrayLayout4i8=Vt,s.StructArrayLayout5f20=Gi,s.Texture=py,s.Tile=sE,s.Transitionable=ae,s.Uniform1f=qb,s.Uniform1i=class extends zd{constructor(c){super(c),this.current=0}set(c,o,d){this.fetchUniformLocation(c,o)&&this.current!==d&&(this.current=d,this.gl.uniform1i(this.location,d))}},s.Uniform2f=class extends zd{constructor(c){super(c),this.current=[0,0]}set(c,o,d){this.fetchUniformLocation(c,o)&&(d[0]===this.current[0]&&d[1]===this.current[1]||(this.current=d,this.gl.uniform2f(this.location,d[0],d[1])))}},s.Uniform3f=class extends zd{constructor(c){super(c),this.current=[0,0,0]}set(c,o,d){this.fetchUniformLocation(c,o)&&(d[0]===this.current[0]&&d[1]===this.current[1]&&d[2]===this.current[2]||(this.current=d,this.gl.uniform3f(this.location,d[0],d[1],d[2])))}},s.Uniform4f=wM,s.UniformColor=TM,s.UniformMatrix2f=class extends zd{constructor(c){super(c),this.current=q7}set(c,o,d){if(this.fetchUniformLocation(c,o)){for(let f=0;f<4;f++)if(d[f]!==this.current[f]){this.current=d,this.gl.uniformMatrix2fv(this.location,!1,d);break}}}},s.UniformMatrix3f=class extends zd{constructor(c){super(c),this.current=G7}set(c,o,d){if(this.fetchUniformLocation(c,o)){for(let f=0;f<9;f++)if(d[f]!==this.current[f]){this.current=d,this.gl.uniformMatrix3fv(this.location,!1,d);break}}}},s.UniformMatrix4f=class extends zd{constructor(c){super(c),this.current=H7}set(c,o,d){if(this.fetchUniformLocation(c,o)){if(d[12]!==this.current[12]||d[0]!==this.current[0])return this.current=d,void this.gl.uniformMatrix4fv(this.location,!1,d);for(let f=1;f<16;f++)if(d[f]!==this.current[f]){this.current=d,this.gl.uniformMatrix4fv(this.location,!1,d);break}}}},s.UnwrappedTileID=AD,s.ValidationError=vn,s.VectorTileFeature=lx,s.VectorTileWorkerSource=class extends zl{constructor(c,o,d,f,g){super(),this.actor=c,this.layerIndex=o,this.availableImages=d,this.loadVectorData=g||zL,this.loading={},this.loaded={},this.deduped=new FL(c.scheduler),this.isSpriteLoaded=f,this.scheduler=c.scheduler}loadTile(c,o){const d=c.uid,f=c&&c.request,g=f&&f.collectResourceTiming,b=this.loading[d]=new gj(c);b.abort=this.loadVectorData(c,((w,E)=>{const I=!this.loading[d];if(delete this.loading[d],I||w||!E)return b.status="done",I||(this.loaded[d]=b),o(w);const D=E.rawData,N={};E.expires&&(N.expires=E.expires),E.cacheControl&&(N.cacheControl=E.cacheControl),b.vectorTile=E.vectorTile||new jS(new mx(D));const j=()=>{b.parse(b.vectorTile,this.layerIndex,this.availableImages,this.actor,((Z,ne)=>{if(Z||!ne)return o(Z);const oe={};if(g){const he=fa(f);he.length>0&&(oe.resourceTiming=JSON.parse(JSON.stringify(he)))}o(null,mt({rawTileData:D.slice(0)},ne,N,oe))}))};this.isSpriteLoaded?j():this.once("isSpriteLoaded",(()=>{this.scheduler?this.scheduler.add(j,{type:"parseTile",isSymbolTile:c.isSymbolTile,zoom:c.tileZoom}):j()})),this.loaded=this.loaded||{},this.loaded[d]=b}))}reloadTile(c,o){const d=this.loaded,f=c.uid,g=this;if(d&&d[f]){const b=d[f];b.showCollisionBoxes=c.showCollisionBoxes,b.enableTerrain=!!c.enableTerrain,b.projection=c.projection,b.tileTransform=Km(c.tileID.canonical,c.projection);const w=(E,I)=>{const D=b.reloadCallback;D&&(delete b.reloadCallback,b.parse(b.vectorTile,g.layerIndex,this.availableImages,g.actor,D)),o(E,I)};b.status==="parsing"?b.reloadCallback=w:b.status==="done"&&(b.vectorTile?b.parse(b.vectorTile,this.layerIndex,this.availableImages,this.actor,w):w())}}abortTile(c,o){const d=c.uid,f=this.loading[d];f&&(f.abort&&f.abort(),delete this.loading[d]),o()}removeTile(c,o){const d=this.loaded,f=c.uid;d&&d[f]&&delete d[f],o()}},s.WritingMode=Yl,s.ZoomDependentExpression=bc,s.add=$d,s.addDynamicAttributes=Sx,s.adjoint=function(c,o){var d=o[0],f=o[1],g=o[2],b=o[3],w=o[4],E=o[5],I=o[6],D=o[7],N=o[8];return c[0]=w*N-E*D,c[1]=g*D-f*N,c[2]=f*E-g*w,c[3]=E*I-b*N,c[4]=d*N-g*I,c[5]=g*b-d*E,c[6]=b*D-w*I,c[7]=f*I-d*D,c[8]=d*w-f*b,c},s.asyncAll=it,s.bezier=Je,s.bindAll=kt,s.boundsAttributes=xL,s.bufferConvexPolygon=function(c,o){const d=[];for(let f=0;f<c.length;f++){const g=Ee(f-1,-1,c.length-1),b=Ee(f+1,-1,c.length-1),w=c[f],E=c[b],I=c[g].sub(w).unit(),D=E.sub(w).unit(),N=D.angleWithSep(I.x,I.y),j=I.add(D).unit().mult(-1*o/Math.sin(N/2));d.push(w.add(j))}return d},s.cacheEntryPossiblyAdded=function(c){xr++,xr>ni&&(c.getActor().send("enforceCacheSizeLimit",Fn),xr=0)},s.calculateGlobeLabelMatrix=function(c,o){const{x:d,y:f}=c.point,g=GM(d,f,c.worldSize/c._pixelsPerMercatorPixel,0,0);return Nm(g,g,SS(Lu(o)))},s.calculateGlobeMatrix=function(c){const{x:o,y:d}=c.point,{lng:f,lat:g}=c._center;return GM(o,d,c.worldSize,f,g)},s.calculateGlobeMercatorMatrix=function(c){const o=c.pixelsPerMeter,d=o/iu(1,c.center.lat),f=tu(new Float64Array(16));return $_(f,f,[c.point.x,c.point.y,0]),$m(f,f,[d,d,o]),Float32Array.from(f)},s.circumferenceAtLatitude=CS,s.clamp=De,s.clearTileCache=function(c){if(!wn())return;const o=p.caches.delete(Dn);c&&o.catch(c).then((()=>c()))},s.clipLine=iL,s.clone=function(c){var o=new wl(16);return o[0]=c[0],o[1]=c[1],o[2]=c[2],o[3]=c[3],o[4]=c[4],o[5]=c[5],o[6]=c[6],o[7]=c[7],o[8]=c[8],o[9]=c[9],o[10]=c[10],o[11]=c[11],o[12]=c[12],o[13]=c[13],o[14]=c[14],o[15]=c[15],o},s.clone$1=fe,s.collisionCircleLayout=mU,s.config=T,s.conjugate=function(c,o){return c[0]=-o[0],c[1]=-o[1],c[2]=-o[2],c[3]=o[3],c},s.create=function(){var c=new wl(16);return wl!=Float32Array&&(c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=0,c[12]=0,c[13]=0,c[14]=0),c[0]=1,c[5]=1,c[10]=1,c[15]=1,c},s.create$1=CM,s.createExpression=Au,s.createLayout=at,s.createStyleLayer=function(c){return c.type==="custom"?new sj(c):new aj[c.type](c)},s.cross=vS,s.degToRad=te,s.distance=function(c,o){return Math.hypot(o[0]-c[0],o[1]-c[1],o[2]-c[2])},s.div=function(c,o,d){return c[0]=o[0]/d[0],c[1]=o[1]/d[1],c[2]=o[2]/d[2],c},s.dot=Sc,s.earthRadius=Z_,s.ease=nt,s.easeCubicInOut=Be,s.ecefToLatLng=function([c,o,d]){const f=Math.hypot(c,o,d),g=Math.atan2(c,d),b=.5*Math.PI-Math.acos(-o/f);return new ar(ke(g),ke(b))},s.emitValidationErrors=ef,s.endsWith=Ue,s.enforceCacheSizeLimit=function(c){Ln(),Ut&&Ut.then((o=>{o.keys().then((d=>{for(let f=0;f<d.length-c;f++)o.delete(d[f])}))}))},s.evaluateSizeForFeature=hx,s.evaluateSizeForZoom=Gg,s.evaluateVariableOffset=lL,s.evented=S,s.exactEquals=function(c,o){return c[0]===o[0]&&c[1]===o[1]&&c[2]===o[2]&&c[3]===o[3]},s.exactEquals$1=function(c,o){return c[0]===o[0]&&c[1]===o[1]&&c[2]===o[2]},s.exported=Co,s.exported$1=k,s.extend=mt,s.extend$1=ma,s.fillExtrusionHeightLift=CD,s.filterObject=we,s.fromMat4=function(c,o){return c[0]=o[0],c[1]=o[1],c[2]=o[2],c[3]=o[4],c[4]=o[5],c[5]=o[6],c[6]=o[8],c[7]=o[9],c[8]=o[10],c},s.fromQuat=function(c,o){var d=o[0],f=o[1],g=o[2],b=o[3],w=d+d,E=f+f,I=g+g,D=d*w,N=f*w,j=f*E,Z=g*w,ne=g*E,oe=g*I,he=b*w,Te=b*E,Oe=b*I;return c[0]=1-j-oe,c[1]=N+Oe,c[2]=Z-Te,c[3]=0,c[4]=N-Oe,c[5]=1-D-oe,c[6]=ne+he,c[7]=0,c[8]=Z+Te,c[9]=ne-he,c[10]=1-D-j,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c},s.fromRotation=function(c,o){var d=Math.sin(o),f=Math.cos(o);return c[0]=f,c[1]=d,c[2]=0,c[3]=-d,c[4]=f,c[5]=0,c[6]=0,c[7]=0,c[8]=1,c},s.fromScaling=IM,s.furthestTileCorner=function(c){const o=Math.round((c+45+360)%360/90)%4;return Re[o]},s.getAABBPointSquareDist=function(c,o,d){let f=0;for(let g=0;g<2;++g){const b=d?d[g]:0;c[g]>b&&(f+=(c[g]-b)*(c[g]-b)),o[g]<b&&(f+=(b-o[g])*(b-o[g]))}return f},s.getAnchorAlignment=YS,s.getAnchorJustification=QS,s.getBounds=function(c){let o=1/0,d=1/0,f=-1/0,g=-1/0;for(const b of c)o=Math.min(o,b.x),d=Math.min(d,b.y),f=Math.max(f,b.x),g=Math.max(g,b.y);return{min:new W(o,d),max:new W(f,g)}},s.getColumn=Cn,s.getDefaultExportFromCjs=Y,s.getGridMatrix=function(c,o,d,f){const g=o.getNorth(),b=o.getSouth(),w=o.getWest(),E=o.getEast(),I=1<<c.z,D=E-w,N=g-b,j=D/jm,Z=-N/K_[d],ne=[0,j,0,Z,0,0,g,w,0];if(c.z>0){const oe=180/f;kM(ne,ne,[oe/D+1,0,0,0,oe/N+1,0,-.5*oe/j,.5*oe/Z,1])}return ne[2]=I,ne[5]=c.x,ne[8]=c.y,ne},s.getImage=Fe,s.getJSON=function(c,o){return jo(mt(c,{type:"json"}),o)},s.getLatitudinalLod=function(c){const o=Oo-5;c=De(c,-o,o)/o*90;const d=Math.pow(Math.abs(Math.sin(te(c))),3);return Math.round(d*(K_.length-1))},s.getMapSessionAPI=rs,s.getPerformanceMeasurement=fa,s.getProjection=gL,s.getRTLTextPluginStatus=C,s.getReferrer=wr,s.getTilePoint=function(c,{x:o,y:d},f=0){return new W(((o-f)*c.scale-c.x)*zn,(d*c.scale-c.y)*zn)},s.getTileVec3=function(c,o,d=0){return Bg(((o.x-d)*c.scale-c.x)*zn,(o.y*c.scale-c.y)*zn,YM(o.z,o.y))},s.getVideo=function(c,o){const d=p.document.createElement("video");d.muted=!0,d.onloadstart=function(){o(null,d)};for(let f=0;f<c.length;f++){const g=p.document.createElement("source");$c(c[f])||(d.crossOrigin="Anonymous"),g.src=c[f],d.appendChild(g)}return{cancel:()=>{}}},s.globeCenterToScreenPoint=function(c){const o=[0,0,0],d=tu(new Float64Array(16));return Nm(d,c.pixelMatrix,c.globeMatrix),as(o,o,d),new W(o[0],o[1])},s.globeDenormalizeECEF=SS,s.globeECEFOrigin=function(c,o){const d=[0,0,0];return as(d,d,Y_(Lu(o.canonical))),as(d,d,c),d},s.globeMetersToEcef=Yb,s.globeNormalizeECEF=Y_,s.globePixelsToTileUnits=function(c,o){return zn/(512*Math.pow(2,c))*Jb(Lu(o))},s.globePoleMatrixForTile=function(c,o,d){const f=tu(new Float64Array(16)),g=(o/(1<<c)-.5)*Math.PI*2;return Xb(f,d.globeMatrix,g),Float32Array.from(f)},s.globeTileBounds=Lu,s.globeTiltAtLngLat=qM,s.globeToMercatorTransition=Ng,s.globeUseCustomAntiAliasing=function(c,o,d){const f=Ng(d.zoom),g=c.style.map._antialias,b=!!o.extStandardDerivatives,w=o.extStandardDerivativesForceOff||c.terrain&&c.terrain.exaggeration()>0;return f===0&&!g&&!w&&b},s.identity=tu,s.identity$1=VM,s.invert=fS,s.isFullscreen=function(){return!!p.document.fullscreenElement||!!p.document.webkitFullscreenElement},s.isLngLatBehindGlobe=ES,s.isMapAuthenticated=function(c){return Or.has(c)},s.isMapboxURL=st,s.isSafariWithAntialiasingBug=function(c){const o=c.navigator?c.navigator.userAgent:null;return!!gn(c)&&o&&(o.match("Version/15.4")||o.match("Version/15.5")||o.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},s.latFromMercatorY=Ro,s.latLngToECEF=zg,s.len=n$,s.length=U_,s.length$1=function(c){return Math.hypot(c[0],c[1],c[2],c[3])},s.lngFromMercatorX=Xl,s.loadVectorTile=zL,s.makeRequest=jo,s.mapValue=function(c,o,d,f,g){return De((c-o)/(d-o)*(g-f)+f,f,g)},s.mercatorScale=ZM,s.mercatorXfromLng=Ru,s.mercatorYfromLat=Ou,s.mercatorZfromAltitude=iu,s.mul=e$,s.mul$1=t$,s.multiply=Nm,s.multiply$1=kM,s.multiply$2=MM,s.nextPowerOfTwo=ht,s.normalize=Sa,s.normalize$1=i$,s.normalize$2=RM,s.number=Qn,s.ortho=function(c,o,d,f,g,b,w){var E=1/(o-d),I=1/(f-g),D=1/(b-w);return c[0]=-2*E,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=-2*I,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=2*D,c[11]=0,c[12]=(o+d)*E,c[13]=(g+f)*I,c[14]=(w+b)*D,c[15]=1,c},s.pbf=VD,s.perspective=function(c,o,d,f,g){var b,w=1/Math.tan(o/2);return c[0]=w/d,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=w,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=-1,c[12]=0,c[13]=0,c[15]=0,g!=null&&g!==1/0?(c[10]=(g+f)*(b=1/(f-g)),c[14]=2*g*f*b):(c[10]=-1,c[14]=-2*f),c},s.pick=function(c,o){const d={};for(let f=0;f<o.length;f++){const g=o[f];g in c&&(d[g]=c[g])}return d},s.plugin=O,s.pointGeometry=U,s.polesInViewport=function(c){const o=tu(new Float64Array(16));Nm(o,c.pixelMatrix,c.globeMatrix);const d=[0,Ec,0],f=[0,Cc,0];return as(d,d,o),as(f,f,o),[d[0]>0&&d[0]<=c.width&&d[1]>0&&d[1]<=c.height&&!ES(c,new ar(c.center.lat,90)),f[0]>0&&f[0]<=c.width&&f[1]>0&&f[1]<=c.height&&!ES(c,new ar(c.center.lat,-90))]},s.polygonContainsPoint=Gm,s.polygonIntersectsBox=rD,s.polygonIntersectsPolygon=eD,s.polygonizeBounds=function(c,o,d=0,f=!0){const g=new W(d,d),b=c.sub(g),w=o.add(g),E=[b,new W(w.x,b.y),w,new W(b.x,w.y)];return f&&E.push(b.clone()),E},s.posAttributes=q_,s.postMapLoadEvent=mr,s.postPerformanceEvent=Tr,s.postTurnstileEvent=Xn,s.potpack=qS,s.prevPowerOfTwo=function(c){return c<=1?1:Math.pow(2,Math.floor(Math.log(c)/Math.LN2))},s.radToDeg=ke,s.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],s.registerForPluginStateChange=function(c){return c({pluginStatus:v,pluginURL:u}),S.on("pluginStateChange",c),c},s.removeAuthState=function(c){Or.delete(c)},s.renderColorRamp=RS,s.resample=JM,s.rotateX=mS,s.rotateX$1=BM,s.rotateY=Xb,s.rotateY$1=FM,s.rotateZ=function(c,o,d){var f=Math.sin(d),g=Math.cos(d),b=o[0],w=o[1],E=o[2],I=o[3],D=o[4],N=o[5],j=o[6],Z=o[7];return o!==c&&(c[8]=o[8],c[9]=o[9],c[10]=o[10],c[11]=o[11],c[12]=o[12],c[13]=o[13],c[14]=o[14],c[15]=o[15]),c[0]=b*g+D*f,c[1]=w*g+N*f,c[2]=E*g+j*f,c[3]=I*g+Z*f,c[4]=D*g-b*f,c[5]=N*g-w*f,c[6]=j*g-E*f,c[7]=Z*g-I*f,c},s.rotateZ$1=function(c,o,d){d*=.5;var f=o[0],g=o[1],b=o[2],w=o[3],E=Math.sin(d),I=Math.cos(d);return c[0]=f*I+g*E,c[1]=g*I-f*E,c[2]=b*I+w*E,c[3]=w*I-b*E,c},s.scale=$m,s.scale$1=LM,s.scale$2=Kl,s.scaleAndAdd=H_,s.set=function(c,o,d,f){return c[0]=o,c[1]=d,c[2]=f,c},s.setCacheLimits=function(c,o){Fn=c,ni=o},s.setColumn=function(c,o,d){c[4*o+0]=d[0],c[4*o+1]=d[1],c[4*o+2]=d[2],c[4*o+3]=d[3]},s.setRTLTextPlugin=function(c,o,d=!1){if(v===ve||v===B||v===se)throw new Error("setRTLTextPlugin cannot be called multiple times.");u=Co.resolveURL(c),v=ve,Ae=o,y(),d||L()},s.smoothstep=Ge,s.spec=Ot,s.squaredLength=function(c){var o=c[0],d=c[1],f=c[2];return o*o+d*d+f*f},s.storeAuthState=function(c,o){o?Or.add(c):Or.delete(c)},s.sub=nu,s.subtract=gS,s.symbolSize=pU,s.tileAABB=function(c,o,d,f,g,b,w,E,I){if(I.name==="globe")return l$(c,o,new ux(d,f,g));const D=Km({z:d,x:f,y:g},I);return new Ea([(b+D.x/D.scale)*o,o*(D.y/D.scale),w],[(b+D.x2/D.scale)*o,o*(D.y2/D.scale),E])},s.tileCornersToBounds=Zb,s.tileTransform=Km,s.transformMat3=function(c,o,d){var f=o[0],g=o[1],b=o[2];return c[0]=f*d[0]+g*d[3]+b*d[6],c[1]=f*d[1]+g*d[4]+b*d[7],c[2]=f*d[2]+g*d[5]+b*d[8],c},s.transformMat4=as,s.transformMat4$1=Um,s.transformQuat=DM,s.transitionTileAABBinECEF=jM,s.translate=$_,s.transpose=function(c,o){if(c===o){var d=o[1],f=o[2],g=o[5];c[1]=o[3],c[2]=o[6],c[3]=d,c[5]=o[7],c[6]=f,c[7]=g}else c[0]=o[0],c[1]=o[3],c[2]=o[6],c[3]=o[1],c[4]=o[4],c[5]=o[7],c[6]=o[2],c[7]=o[5],c[8]=o[8];return c},s.triggerPluginCompletionEvent=m,s.uniqueId=$t,s.updateGlobeVertexNormal=function(c,o,d,f,g){const b=5*o+2;c.float32[b+0]=d,c.float32[b+1]=f,c.float32[b+2]=g},s.validateCustomStyleLayer=function(c){const o=[],d=c.id;return d===void 0&&o.push({message:`layers.${d}: missing required property "id"`}),c.render===void 0&&o.push({message:`layers.${d}: missing required method "render"`}),c.renderingMode&&c.renderingMode!=="2d"&&c.renderingMode!=="3d"&&o.push({message:`layers.${d}: property "renderingMode" must be either "2d" or "3d"`}),o},s.validateFilter=c=>ea(Ld(c)),s.validateFog=c=>ea(Pg(c)),s.validateLayer=c=>ea(Cg(c)),s.validateLight=c=>ea(Ag(c)),s.validateSource=c=>ea(Ig(c)),s.validateStyle=Tc,s.validateTerrain=c=>ea(Qh(c)),s.values=ot,s.vectorTile=ax,s.version=_,s.warnOnce=je,s.window=p,s.wrap=Ee})),l(["./shared"],(function(s){function p(ze){if(typeof ze=="number"||typeof ze=="boolean"||typeof ze=="string"||ze==null)return JSON.stringify(ze);if(Array.isArray(ze)){let _e="[";for(const Fe of ze)_e+=`${p(Fe)},`;return`${_e}]`}let ge="{";for(const _e of Object.keys(ze).sort())ge+=`${_e}:${p(ze[_e])},`;return`${ge}}`}function _(ze){let ge="";for(const _e of s.refProperties)ge+=`/${p(ze[_e])}`;return ge}class x{constructor(ge){this.keyCache={},ge&&this.replace(ge)}replace(ge){this._layerConfigs={},this._layers={},this.update(ge,[])}update(ge,_e){for(const Ke of ge)this._layerConfigs[Ke.id]=Ke,(this._layers[Ke.id]=s.createStyleLayer(Ke)).compileFilter(),this.keyCache[Ke.id]&&delete this.keyCache[Ke.id];for(const Ke of _e)delete this.keyCache[Ke],delete this._layerConfigs[Ke],delete this._layers[Ke];this.familiesBySource={};const Fe=(function(Ke,st){const vt={};for(let rt=0;rt<Ke.length;rt++){const Ct=st&&st[Ke[rt].id]||_(Ke[rt]);st&&(st[Ke[rt].id]=Ct);let nn=vt[Ct];nn||(nn=vt[Ct]=[]),nn.push(Ke[rt])}const pt=[];for(const rt in vt)pt.push(vt[rt]);return pt})(s.values(this._layerConfigs),this.keyCache);for(const Ke of Fe){const st=Ke.map((dn=>this._layers[dn.id])),vt=st[0];if(vt.visibility==="none")continue;const pt=vt.source||"";let rt=this.familiesBySource[pt];rt||(rt=this.familiesBySource[pt]={});const Ct=vt.sourceLayer||"_geojsonTileLayer";let nn=rt[Ct];nn||(nn=rt[Ct]=[]),nn.push(st)}}}class T{loadTile(ge,_e){const{uid:Fe,encoding:Ke,rawImageData:st,padding:vt,buildQuadTree:pt}=ge,rt=s.window.ImageBitmap&&st instanceof s.window.ImageBitmap?this.getImageData(st,vt):st;_e(null,new s.DEMData(Fe,rt,Ke,vt<1,pt))}getImageData(ge,_e){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(ge.width,ge.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=ge.width,this.offscreenCanvas.height=ge.height,this.offscreenCanvasContext.drawImage(ge,0,0,ge.width,ge.height);const Fe=this.offscreenCanvasContext.getImageData(-_e,-_e,ge.width+2*_e,ge.height+2*_e);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),Fe}}function k(ze,ge){if(ze.length!==0){A(ze[0],ge);for(var _e=1;_e<ze.length;_e++)A(ze[_e],!ge)}}function A(ze,ge){for(var _e=0,Fe=0,Ke=0,st=ze.length,vt=st-1;Ke<st;vt=Ke++){var pt=(ze[Ke][0]-ze[vt][0])*(ze[vt][1]+ze[Ke][1]),rt=_e+pt;Fe+=Math.abs(_e)>=Math.abs(pt)?_e-rt+pt:pt-rt+_e,_e=rt}_e+Fe>=0!=!!ge&&ze.reverse()}var M=s.getDefaultExportFromCjs((function ze(ge,_e){var Fe,Ke=ge&&ge.type;if(Ke==="FeatureCollection")for(Fe=0;Fe<ge.features.length;Fe++)ze(ge.features[Fe],_e);else if(Ke==="GeometryCollection")for(Fe=0;Fe<ge.geometries.length;Fe++)ze(ge.geometries[Fe],_e);else if(Ke==="Feature")ze(ge.geometry,_e);else if(Ke==="Polygon")k(ge.coordinates,_e);else if(Ke==="MultiPolygon")for(Fe=0;Fe<ge.coordinates.length;Fe++)k(ge.coordinates[Fe],_e);return ge}));const R=s.VectorTileFeature.prototype.toGeoJSON;var F={exports:{}},z=s.pointGeometry,G=s.vectorTile.VectorTileFeature,Y=J;function J(ze,ge){this.options=ge||{},this.features=ze,this.length=ze.length}function re(ze,ge){this.id=typeof ze.id=="number"?ze.id:void 0,this.type=ze.type,this.rawGeometry=ze.type===1?[ze.geometry]:ze.geometry,this.properties=ze.tags,this.extent=ge||4096}J.prototype.feature=function(ze){return new re(this.features[ze],this.options.extent)},re.prototype.loadGeometry=function(){var ze=this.rawGeometry;this.geometry=[];for(var ge=0;ge<ze.length;ge++){for(var _e=ze[ge],Fe=[],Ke=0;Ke<_e.length;Ke++)Fe.push(new z(_e[Ke][0],_e[Ke][1]));this.geometry.push(Fe)}return this.geometry},re.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var ze=this.geometry,ge=1/0,_e=-1/0,Fe=1/0,Ke=-1/0,st=0;st<ze.length;st++)for(var vt=ze[st],pt=0;pt<vt.length;pt++){var rt=vt[pt];ge=Math.min(ge,rt.x),_e=Math.max(_e,rt.x),Fe=Math.min(Fe,rt.y),Ke=Math.max(Ke,rt.y)}return[ge,Fe,_e,Ke]},re.prototype.toGeoJSON=G.prototype.toGeoJSON;var X=s.pbf,U=Y;function H(ze){var ge=new X;return(function(_e,Fe){for(var Ke in _e.layers)Fe.writeMessage(3,W,_e.layers[Ke])})(ze,ge),ge.finish()}function W(ze,ge){var _e;ge.writeVarintField(15,ze.version||1),ge.writeStringField(1,ze.name||""),ge.writeVarintField(5,ze.extent||4096);var Fe={keys:[],values:[],keycache:{},valuecache:{}};for(_e=0;_e<ze.length;_e++)Fe.feature=ze.feature(_e),ge.writeMessage(2,ie,Fe);var Ke=Fe.keys;for(_e=0;_e<Ke.length;_e++)ge.writeStringField(3,Ke[_e]);var st=Fe.values;for(_e=0;_e<st.length;_e++)ge.writeMessage(4,Be,st[_e])}function ie(ze,ge){var _e=ze.feature;_e.id!==void 0&&ge.writeVarintField(1,_e.id),ge.writeMessage(2,Q,ze),ge.writeVarintField(3,_e.type),ge.writeMessage(4,Re,_e)}function Q(ze,ge){var _e=ze.feature,Fe=ze.keys,Ke=ze.values,st=ze.keycache,vt=ze.valuecache;for(var pt in _e.properties){var rt=_e.properties[pt],Ct=st[pt];if(rt!==null){Ct===void 0&&(Fe.push(pt),st[pt]=Ct=Fe.length-1),ge.writeVarint(Ct);var nn=typeof rt;nn!=="string"&&nn!=="boolean"&&nn!=="number"&&(rt=JSON.stringify(rt));var dn=nn+":"+rt,rn=vt[dn];rn===void 0&&(Ke.push(rt),vt[dn]=rn=Ke.length-1),ge.writeVarint(rn)}}}function te(ze,ge){return(ge<<3)+(7&ze)}function ke(ze){return ze<<1^ze>>31}function Re(ze,ge){for(var _e=ze.loadGeometry(),Fe=ze.type,Ke=0,st=0,vt=_e.length,pt=0;pt<vt;pt++){var rt=_e[pt],Ct=1;Fe===1&&(Ct=rt.length),ge.writeVarint(te(1,Ct));for(var nn=Fe===3?rt.length-1:rt.length,dn=0;dn<nn;dn++){dn===1&&Fe!==1&&ge.writeVarint(te(2,nn-1));var rn=rt[dn].x-Ke,Kn=rt[dn].y-st;ge.writeVarint(ke(rn)),ge.writeVarint(ke(Kn)),Ke+=rn,st+=Kn}Fe===3&&ge.writeVarint(te(7,1))}}function Be(ze,ge){var _e=typeof ze;_e==="string"?ge.writeStringField(1,ze):_e==="boolean"?ge.writeBooleanField(7,ze):_e==="number"&&(ze%1!=0?ge.writeDoubleField(3,ze):ze<0?ge.writeSVarintField(6,ze):ge.writeVarintField(5,ze))}F.exports=H,F.exports.fromVectorTileJs=H,F.exports.fromGeojsonVt=function(ze,ge){ge=ge||{};var _e={};for(var Fe in ze)_e[Fe]=new U(ze[Fe].features,ge),_e[Fe].name=Fe,_e[Fe].version=ge.version,_e[Fe].extent=ge.extent;return H({layers:_e})},F.exports.GeoJSONWrapper=U;var Je=s.getDefaultExportFromCjs(F.exports);const nt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ze=>ze},De=Math.fround||(Ge=new Float32Array(1),ze=>(Ge[0]=+ze,Ge[0]));var Ge;const Ee=3,it=5,ot=6;class mt{constructor(ge){this.options=Object.assign(Object.create(nt),ge),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(ge){const{log:_e,minZoom:Fe,maxZoom:Ke}=this.options;_e&&console.time("total time");const st=`prepare ${ge.length} points`;_e&&console.time(st),this.points=ge;const vt=[];for(let rt=0;rt<ge.length;rt++){const Ct=ge[rt];if(!Ct.geometry)continue;const[nn,dn]=Ct.geometry.coordinates,rn=De(ct(nn)),Kn=De(ht(dn));vt.push(rn,Kn,1/0,rt,-1,1),this.options.reduce&&vt.push(0)}let pt=this.trees[Ke+1]=this._createTree(vt);_e&&console.timeEnd(st);for(let rt=Ke;rt>=Fe;rt--){const Ct=+Date.now();pt=this.trees[rt]=this._createTree(this._cluster(pt,rt)),_e&&console.log("z%d: %d clusters in %dms",rt,pt.numItems,+Date.now()-Ct)}return _e&&console.timeEnd("total time"),this}getClusters(ge,_e){let Fe=((ge[0]+180)%360+360)%360-180;const Ke=Math.max(-90,Math.min(90,ge[1]));let st=ge[2]===180?180:((ge[2]+180)%360+360)%360-180;const vt=Math.max(-90,Math.min(90,ge[3]));if(ge[2]-ge[0]>=360)Fe=-180,st=180;else if(Fe>st){const dn=this.getClusters([Fe,Ke,180,vt],_e),rn=this.getClusters([-180,Ke,st,vt],_e);return dn.concat(rn)}const pt=this.trees[this._limitZoom(_e)],rt=pt.range(ct(Fe),ht(vt),ct(st),ht(Ke)),Ct=pt.data,nn=[];for(const dn of rt){const rn=this.stride*dn;nn.push(Ct[rn+it]>1?Pt(Ct,rn,this.clusterProps):this.points[Ct[rn+Ee]])}return nn}getChildren(ge){const _e=this._getOriginId(ge),Fe=this._getOriginZoom(ge),Ke="No cluster with the specified id.",st=this.trees[Fe];if(!st)throw new Error(Ke);const vt=st.data;if(_e*this.stride>=vt.length)throw new Error(Ke);const pt=this.options.radius/(this.options.extent*Math.pow(2,Fe-1)),rt=st.within(vt[_e*this.stride],vt[_e*this.stride+1],pt),Ct=[];for(const nn of rt){const dn=nn*this.stride;vt[dn+4]===ge&&Ct.push(vt[dn+it]>1?Pt(vt,dn,this.clusterProps):this.points[vt[dn+Ee]])}if(Ct.length===0)throw new Error(Ke);return Ct}getLeaves(ge,_e,Fe){const Ke=[];return this._appendLeaves(Ke,ge,_e=_e||10,Fe=Fe||0,0),Ke}getTile(ge,_e,Fe){const Ke=this.trees[this._limitZoom(ge)],st=Math.pow(2,ge),{extent:vt,radius:pt}=this.options,rt=pt/vt,Ct=(Fe-rt)/st,nn=(Fe+1+rt)/st,dn={features:[]};return this._addTileFeatures(Ke.range((_e-rt)/st,Ct,(_e+1+rt)/st,nn),Ke.data,_e,Fe,st,dn),_e===0&&this._addTileFeatures(Ke.range(1-rt/st,Ct,1,nn),Ke.data,st,Fe,st,dn),_e===st-1&&this._addTileFeatures(Ke.range(0,Ct,rt/st,nn),Ke.data,-1,Fe,st,dn),dn.features.length?dn:null}getClusterExpansionZoom(ge){let _e=this._getOriginZoom(ge)-1;for(;_e<=this.options.maxZoom;){const Fe=this.getChildren(ge);if(_e++,Fe.length!==1)break;ge=Fe[0].properties.cluster_id}return _e}_appendLeaves(ge,_e,Fe,Ke,st){const vt=this.getChildren(_e);for(const pt of vt){const rt=pt.properties;if(rt&&rt.cluster?st+rt.point_count<=Ke?st+=rt.point_count:st=this._appendLeaves(ge,rt.cluster_id,Fe,Ke,st):st<Ke?st++:ge.push(pt),ge.length===Fe)break}return st}_createTree(ge){const _e=new s.KDBush(ge.length/this.stride|0,this.options.nodeSize,Float32Array);for(let Fe=0;Fe<ge.length;Fe+=this.stride)_e.add(ge[Fe],ge[Fe+1]);return _e.finish(),_e.data=ge,_e}_addTileFeatures(ge,_e,Fe,Ke,st,vt){for(const pt of ge){const rt=pt*this.stride,Ct=_e[rt+it]>1;let nn,dn,rn;if(Ct)nn=$t(_e,rt,this.clusterProps),dn=_e[rt],rn=_e[rt+1];else{const jn=this.points[_e[rt+Ee]];nn=jn.properties;const[ai,Xn]=jn.geometry.coordinates;dn=ct(ai),rn=ht(Xn)}const Kn={type:1,geometry:[[Math.round(this.options.extent*(dn*st-Fe)),Math.round(this.options.extent*(rn*st-Ke))]],tags:nn};let Jn;Jn=Ct||this.options.generateId?_e[rt+Ee]:this.points[_e[rt+Ee]].id,Jn!==void 0&&(Kn.id=Jn),vt.features.push(Kn)}}_limitZoom(ge){return Math.max(this.options.minZoom,Math.min(Math.floor(+ge),this.options.maxZoom+1))}_cluster(ge,_e){const{radius:Fe,extent:Ke,reduce:st,minPoints:vt}=this.options,pt=Fe/(Ke*Math.pow(2,_e)),rt=ge.data,Ct=[],nn=this.stride;for(let dn=0;dn<rt.length;dn+=nn){if(rt[dn+2]<=_e)continue;rt[dn+2]=_e;const rn=rt[dn],Kn=rt[dn+1],Jn=ge.within(rt[dn],rt[dn+1],pt),jn=rt[dn+it];let ai=jn;for(const Xn of Jn){const Ri=Xn*nn;rt[Ri+2]>_e&&(ai+=rt[Ri+it])}if(ai>jn&&ai>=vt){let Xn,Ri=rn*jn,mr=Kn*jn,is=-1;const Tr=((dn/nn|0)<<5)+(_e+1)+this.points.length;for(const Wo of Jn){const rs=Wo*nn;if(rt[rs+2]<=_e)continue;rt[rs+2]=_e;const Or=rt[rs+it];Ri+=rt[rs]*Or,mr+=rt[rs+1]*Or,rt[rs+4]=Tr,st&&(Xn||(Xn=this._map(rt,dn,!0),is=this.clusterProps.length,this.clusterProps.push(Xn)),st(Xn,this._map(rt,rs)))}rt[dn+4]=Tr,Ct.push(Ri/ai,mr/ai,1/0,Tr,-1,ai),st&&Ct.push(is)}else{for(let Xn=0;Xn<nn;Xn++)Ct.push(rt[dn+Xn]);if(ai>1)for(const Xn of Jn){const Ri=Xn*nn;if(!(rt[Ri+2]<=_e)){rt[Ri+2]=_e;for(let mr=0;mr<nn;mr++)Ct.push(rt[Ri+mr])}}}}return Ct}_getOriginId(ge){return ge-this.points.length>>5}_getOriginZoom(ge){return(ge-this.points.length)%32}_map(ge,_e,Fe){if(ge[_e+it]>1){const vt=this.clusterProps[ge[_e+ot]];return Fe?Object.assign({},vt):vt}const Ke=this.points[ge[_e+Ee]].properties,st=this.options.map(Ke);return Fe&&st===Ke?Object.assign({},st):st}}function Pt(ze,ge,_e){return{type:"Feature",id:ze[ge+Ee],properties:$t(ze,ge,_e),geometry:{type:"Point",coordinates:[(Fe=ze[ge],360*(Fe-.5)),Qe(ze[ge+1])]}};var Fe}function $t(ze,ge,_e){const Fe=ze[ge+it],Ke=Fe>=1e4?`${Math.round(Fe/1e3)}k`:Fe>=1e3?Math.round(Fe/100)/10+"k":Fe,st=ze[ge+ot],vt=st===-1?{}:Object.assign({},_e[st]);return Object.assign(vt,{cluster:!0,cluster_id:ze[ge+Ee],point_count:Fe,point_count_abbreviated:Ke})}function ct(ze){return ze/360+.5}function ht(ze){const ge=Math.sin(ze*Math.PI/180),_e=.5-.25*Math.log((1+ge)/(1-ge))/Math.PI;return _e<0?0:_e>1?1:_e}function Qe(ze){const ge=(180-360*ze)*Math.PI/180;return 360*Math.atan(Math.exp(ge))/Math.PI-90}function kt(ze,ge,_e,Fe){for(var Ke,st=Fe,vt=_e-ge>>1,pt=_e-ge,rt=ze[ge],Ct=ze[ge+1],nn=ze[_e],dn=ze[_e+1],rn=ge+3;rn<_e;rn+=3){var Kn=Ue(ze[rn],ze[rn+1],rt,Ct,nn,dn);if(Kn>st)Ke=rn,st=Kn;else if(Kn===st){var Jn=Math.abs(rn-vt);Jn<pt&&(Ke=rn,pt=Jn)}}st>Fe&&(Ke-ge>3&&kt(ze,ge,Ke,Fe),ze[Ke+2]=st,_e-Ke>3&&kt(ze,Ke,_e,Fe))}function Ue(ze,ge,_e,Fe,Ke,st){var vt=Ke-_e,pt=st-Fe;if(vt!==0||pt!==0){var rt=((ze-_e)*vt+(ge-Fe)*pt)/(vt*vt+pt*pt);rt>1?(_e=Ke,Fe=st):rt>0&&(_e+=vt*rt,Fe+=pt*rt)}return(vt=ze-_e)*vt+(pt=ge-Fe)*pt}function ue(ze,ge,_e,Fe){var Ke={id:ze===void 0?null:ze,type:ge,geometry:_e,tags:Fe,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return(function(st){var vt=st.geometry,pt=st.type;if(pt==="Point"||pt==="MultiPoint"||pt==="LineString")we(st,vt);else if(pt==="Polygon"||pt==="MultiLineString")for(var rt=0;rt<vt.length;rt++)we(st,vt[rt]);else if(pt==="MultiPolygon")for(rt=0;rt<vt.length;rt++)for(var Ct=0;Ct<vt[rt].length;Ct++)we(st,vt[rt][Ct])})(Ke),Ke}function we(ze,ge){for(var _e=0;_e<ge.length;_e+=3)ze.minX=Math.min(ze.minX,ge[_e]),ze.minY=Math.min(ze.minY,ge[_e+1]),ze.maxX=Math.max(ze.maxX,ge[_e]),ze.maxY=Math.max(ze.maxY,ge[_e+1])}function fe(ze,ge,_e,Fe){if(ge.geometry){var Ke=ge.geometry.coordinates,st=ge.geometry.type,vt=Math.pow(_e.tolerance/((1<<_e.maxZoom)*_e.extent),2),pt=[],rt=ge.id;if(_e.promoteId?rt=ge.properties[_e.promoteId]:_e.generateId&&(rt=Fe||0),st==="Point")Ie(Ke,pt);else if(st==="MultiPoint")for(var Ct=0;Ct<Ke.length;Ct++)Ie(Ke[Ct],pt);else if(st==="LineString")je(Ke,pt,vt,!1);else if(st==="MultiLineString"){if(_e.lineMetrics){for(Ct=0;Ct<Ke.length;Ct++)je(Ke[Ct],pt=[],vt,!1),ze.push(ue(rt,"LineString",pt,ge.properties));return}Xe(Ke,pt,vt,!1)}else if(st==="Polygon")Xe(Ke,pt,vt,!0);else{if(st!=="MultiPolygon"){if(st==="GeometryCollection"){for(Ct=0;Ct<ge.geometry.geometries.length;Ct++)fe(ze,{id:rt,geometry:ge.geometry.geometries[Ct],properties:ge.properties},_e,Fe);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Ct=0;Ct<Ke.length;Ct++){var nn=[];Xe(Ke[Ct],nn,vt,!0),pt.push(nn)}}ze.push(ue(rt,st,pt,ge.properties))}}function Ie(ze,ge){ge.push(yt(ze[0])),ge.push(wt(ze[1])),ge.push(0)}function je(ze,ge,_e,Fe){for(var Ke,st,vt=0,pt=0;pt<ze.length;pt++){var rt=yt(ze[pt][0]),Ct=wt(ze[pt][1]);ge.push(rt),ge.push(Ct),ge.push(0),pt>0&&(vt+=Fe?(Ke*Ct-rt*st)/2:Math.sqrt(Math.pow(rt-Ke,2)+Math.pow(Ct-st,2))),Ke=rt,st=Ct}var nn=ge.length-3;ge[2]=1,kt(ge,0,nn,_e),ge[nn+2]=1,ge.size=Math.abs(vt),ge.start=0,ge.end=ge.size}function Xe(ze,ge,_e,Fe){for(var Ke=0;Ke<ze.length;Ke++){var st=[];je(ze[Ke],st,_e,Fe),ge.push(st)}}function yt(ze){return ze/360+.5}function wt(ze){var ge=Math.sin(ze*Math.PI/180),_e=.5-.25*Math.log((1+ge)/(1-ge))/Math.PI;return _e<0?0:_e>1?1:_e}function Lt(ze,ge,_e,Fe,Ke,st,vt,pt){if(Fe/=ge,st>=(_e/=ge)&&vt<Fe)return ze;if(vt<_e||st>=Fe)return null;for(var rt=[],Ct=0;Ct<ze.length;Ct++){var nn=ze[Ct],dn=nn.geometry,rn=nn.type,Kn=Ke===0?nn.minX:nn.minY,Jn=Ke===0?nn.maxX:nn.maxY;if(Kn>=_e&&Jn<Fe)rt.push(nn);else if(!(Jn<_e||Kn>=Fe)){var jn=[];if(rn==="Point"||rn==="MultiPoint")Dt(dn,jn,_e,Fe,Ke);else if(rn==="LineString")gn(dn,jn,_e,Fe,Ke,!1,pt.lineMetrics);else if(rn==="MultiLineString")Cn(dn,jn,_e,Fe,Ke,!1);else if(rn==="Polygon")Cn(dn,jn,_e,Fe,Ke,!0);else if(rn==="MultiPolygon")for(var ai=0;ai<dn.length;ai++){var Xn=[];Cn(dn[ai],Xn,_e,Fe,Ke,!0),Xn.length&&jn.push(Xn)}if(jn.length){if(pt.lineMetrics&&rn==="LineString"){for(ai=0;ai<jn.length;ai++)rt.push(ue(nn.id,rn,jn[ai],nn.tags));continue}rn!=="LineString"&&rn!=="MultiLineString"||(jn.length===1?(rn="LineString",jn=jn[0]):rn="MultiLineString"),rn!=="Point"&&rn!=="MultiPoint"||(rn=jn.length===3?"Point":"MultiPoint"),rt.push(ue(nn.id,rn,jn,nn.tags))}}}return rt.length?rt:null}function Dt(ze,ge,_e,Fe,Ke){for(var st=0;st<ze.length;st+=3){var vt=ze[st+Ke];vt>=_e&&vt<=Fe&&(ge.push(ze[st]),ge.push(ze[st+1]),ge.push(ze[st+2]))}}function gn(ze,ge,_e,Fe,Ke,st,vt){for(var pt,rt,Ct=Kt(ze),nn=Ke===0?Fn:ni,dn=ze.start,rn=0;rn<ze.length-3;rn+=3){var Kn=ze[rn],Jn=ze[rn+1],jn=ze[rn+2],ai=ze[rn+3],Xn=ze[rn+4],Ri=Ke===0?Kn:Jn,mr=Ke===0?ai:Xn,is=!1;vt&&(pt=Math.sqrt(Math.pow(Kn-ai,2)+Math.pow(Jn-Xn,2))),Ri<_e?mr>_e&&(rt=nn(Ct,Kn,Jn,ai,Xn,_e),vt&&(Ct.start=dn+pt*rt)):Ri>Fe?mr<Fe&&(rt=nn(Ct,Kn,Jn,ai,Xn,Fe),vt&&(Ct.start=dn+pt*rt)):Dn(Ct,Kn,Jn,jn),mr<_e&&Ri>=_e&&(rt=nn(Ct,Kn,Jn,ai,Xn,_e),is=!0),mr>Fe&&Ri<=Fe&&(rt=nn(Ct,Kn,Jn,ai,Xn,Fe),is=!0),!st&&is&&(vt&&(Ct.end=dn+pt*rt),ge.push(Ct),Ct=Kt(ze)),vt&&(dn+=pt)}var Tr=ze.length-3;Kn=ze[Tr],Jn=ze[Tr+1],jn=ze[Tr+2],(Ri=Ke===0?Kn:Jn)>=_e&&Ri<=Fe&&Dn(Ct,Kn,Jn,jn),Tr=Ct.length-3,st&&Tr>=3&&(Ct[Tr]!==Ct[0]||Ct[Tr+1]!==Ct[1])&&Dn(Ct,Ct[0],Ct[1],Ct[2]),Ct.length&&ge.push(Ct)}function Kt(ze){var ge=[];return ge.size=ze.size,ge.start=ze.start,ge.end=ze.end,ge}function Cn(ze,ge,_e,Fe,Ke,st){for(var vt=0;vt<ze.length;vt++)gn(ze[vt],ge,_e,Fe,Ke,st,!1)}function Dn(ze,ge,_e,Fe){ze.push(ge),ze.push(_e),ze.push(Fe)}function Fn(ze,ge,_e,Fe,Ke,st){var vt=(st-ge)/(Fe-ge);return ze.push(st),ze.push(_e+(Ke-_e)*vt),ze.push(1),vt}function ni(ze,ge,_e,Fe,Ke,st){var vt=(st-_e)/(Ke-_e);return ze.push(ge+(Fe-ge)*vt),ze.push(st),ze.push(1),vt}function Ut(ze,ge){for(var _e=[],Fe=0;Fe<ze.length;Fe++){var Ke,st=ze[Fe],vt=st.type;if(vt==="Point"||vt==="MultiPoint"||vt==="LineString")Ke=fn(st.geometry,ge);else if(vt==="MultiLineString"||vt==="Polygon"){Ke=[];for(var pt=0;pt<st.geometry.length;pt++)Ke.push(fn(st.geometry[pt],ge))}else if(vt==="MultiPolygon")for(Ke=[],pt=0;pt<st.geometry.length;pt++){for(var rt=[],Ct=0;Ct<st.geometry[pt].length;Ct++)rt.push(fn(st.geometry[pt][Ct],ge));Ke.push(rt)}_e.push(ue(st.id,vt,Ke,st.tags))}return _e}function fn(ze,ge){var _e=[];_e.size=ze.size,ze.start!==void 0&&(_e.start=ze.start,_e.end=ze.end);for(var Fe=0;Fe<ze.length;Fe+=3)_e.push(ze[Fe]+ge,ze[Fe+1],ze[Fe+2]);return _e}function wn(ze,ge){if(ze.transformed)return ze;var _e,Fe,Ke,st=1<<ze.z,vt=ze.x,pt=ze.y;for(_e=0;_e<ze.features.length;_e++){var rt=ze.features[_e],Ct=rt.geometry,nn=rt.type;if(rt.geometry=[],nn===1)for(Fe=0;Fe<Ct.length;Fe+=2)rt.geometry.push(Ln(Ct[Fe],Ct[Fe+1],ge,st,vt,pt));else for(Fe=0;Fe<Ct.length;Fe++){var dn=[];for(Ke=0;Ke<Ct[Fe].length;Ke+=2)dn.push(Ln(Ct[Fe][Ke],Ct[Fe][Ke+1],ge,st,vt,pt));rt.geometry.push(dn)}}return ze.transformed=!0,ze}function Ln(ze,ge,_e,Fe,Ke,st){return[Math.round(_e*(ze*Fe-Ke)),Math.round(_e*(ge*Fe-st))]}function Ci(ze,ge,_e,Fe,Ke){for(var st=ge===Ke.maxZoom?0:Ke.tolerance/((1<<ge)*Ke.extent),vt={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:_e,y:Fe,z:ge,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},pt=0;pt<ze.length;pt++){vt.numFeatures++,xr(vt,ze[pt],st,Ke);var rt=ze[pt].minX,Ct=ze[pt].minY,nn=ze[pt].maxX,dn=ze[pt].maxY;rt<vt.minX&&(vt.minX=rt),Ct<vt.minY&&(vt.minY=Ct),nn>vt.maxX&&(vt.maxX=nn),dn>vt.maxY&&(vt.maxY=dn)}return vt}function xr(ze,ge,_e,Fe){var Ke=ge.geometry,st=ge.type,vt=[];if(st==="Point"||st==="MultiPoint")for(var pt=0;pt<Ke.length;pt+=3)vt.push(Ke[pt]),vt.push(Ke[pt+1]),ze.numPoints++,ze.numSimplified++;else if(st==="LineString")Ss(vt,Ke,ze,_e,!1,!1);else if(st==="MultiLineString"||st==="Polygon")for(pt=0;pt<Ke.length;pt++)Ss(vt,Ke[pt],ze,_e,st==="Polygon",pt===0);else if(st==="MultiPolygon")for(var rt=0;rt<Ke.length;rt++){var Ct=Ke[rt];for(pt=0;pt<Ct.length;pt++)Ss(vt,Ct[pt],ze,_e,!0,pt===0)}if(vt.length){var nn=ge.tags||null;if(st==="LineString"&&Fe.lineMetrics){for(var dn in nn={},ge.tags)nn[dn]=ge.tags[dn];nn.mapbox_clip_start=Ke.start/Ke.size,nn.mapbox_clip_end=Ke.end/Ke.size}var rn={geometry:vt,type:st==="Polygon"||st==="MultiPolygon"?3:st==="LineString"||st==="MultiLineString"?2:1,tags:nn};ge.id!==null&&(rn.id=ge.id),ze.features.push(rn)}}function Ss(ze,ge,_e,Fe,Ke,st){var vt=Fe*Fe;if(Fe>0&&ge.size<(Ke?vt:Fe))_e.numPoints+=ge.length/3;else{for(var pt=[],rt=0;rt<ge.length;rt+=3)(Fe===0||ge[rt+2]>vt)&&(_e.numSimplified++,pt.push(ge[rt]),pt.push(ge[rt+1])),_e.numPoints++;Ke&&(function(Ct,nn){for(var dn=0,rn=0,Kn=Ct.length,Jn=Kn-2;rn<Kn;Jn=rn,rn+=2)dn+=(Ct[rn]-Ct[Jn])*(Ct[rn+1]+Ct[Jn+1]);if(dn>0===nn)for(rn=0,Kn=Ct.length;rn<Kn/2;rn+=2){var jn=Ct[rn],ai=Ct[rn+1];Ct[rn]=Ct[Kn-2-rn],Ct[rn+1]=Ct[Kn-1-rn],Ct[Kn-2-rn]=jn,Ct[Kn-1-rn]=ai}})(pt,st),ze.push(pt)}}function rr(ze,ge){var _e=(ge=this.options=(function(Ke,st){for(var vt in st)Ke[vt]=st[vt];return Ke})(Object.create(this.options),ge)).debug;if(_e&&console.time("preprocess data"),ge.maxZoom<0||ge.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ge.promoteId&&ge.generateId)throw new Error("promoteId and generateId cannot be used together.");var Fe=(function(Ke,st){var vt=[];if(Ke.type==="FeatureCollection")for(var pt=0;pt<Ke.features.length;pt++)fe(vt,Ke.features[pt],st,pt);else fe(vt,Ke.type==="Feature"?Ke:{geometry:Ke},st);return vt})(ze,ge);this.tiles={},this.tileCoords=[],_e&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ge.indexMaxZoom,ge.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Fe=(function(Ke,st){var vt=st.buffer/st.extent,pt=Ke,rt=Lt(Ke,1,-1-vt,vt,0,-1,2,st),Ct=Lt(Ke,1,1-vt,2+vt,0,-1,2,st);return(rt||Ct)&&(pt=Lt(Ke,1,-vt,1+vt,0,-1,2,st)||[],rt&&(pt=Ut(rt,1).concat(pt)),Ct&&(pt=pt.concat(Ut(Ct,-1)))),pt})(Fe,ge),Fe.length&&this.splitTile(Fe,0,0,0),_e&&(Fe.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function wr(ze,ge,_e){return 32*((1<<ze)*_e+ge)+ze}function jo(ze,ge){const _e=ze.tileID.canonical;if(!this._geoJSONIndex)return ge(null,null);const Fe=this._geoJSONIndex.getTile(_e.z,_e.x,_e.y);if(!Fe)return ge(null,null);const Ke=new class{constructor(vt){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=s.EXTENT,this.length=vt.length,this._features=vt}feature(vt){return new class{constructor(pt){this._feature=pt,this.extent=s.EXTENT,this.type=pt.type,this.properties=pt.tags,"id"in pt&&!isNaN(pt.id)&&(this.id=parseInt(pt.id,10))}loadGeometry(){if(this._feature.type===1){const pt=[];for(const rt of this._feature.geometry)pt.push([new s.Point(rt[0],rt[1])]);return pt}{const pt=[];for(const rt of this._feature.geometry){const Ct=[];for(const nn of rt)Ct.push(new s.Point(nn[0],nn[1]));pt.push(Ct)}return pt}}toGeoJSON(pt,rt,Ct){return R.call(this,pt,rt,Ct)}}(this._features[vt])}}(Fe.features);let st=Je(Ke);st.byteOffset===0&&st.byteLength===st.buffer.byteLength||(st=new Uint8Array(st)),ge(null,{vectorTile:Ke,rawData:st.buffer})}rr.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},rr.prototype.splitTile=function(ze,ge,_e,Fe,Ke,st,vt){for(var pt=[ze,ge,_e,Fe],rt=this.options,Ct=rt.debug;pt.length;){Fe=pt.pop(),_e=pt.pop(),ge=pt.pop(),ze=pt.pop();var nn=1<<ge,dn=wr(ge,_e,Fe),rn=this.tiles[dn];if(!rn&&(Ct>1&&console.time("creation"),rn=this.tiles[dn]=Ci(ze,ge,_e,Fe,rt),this.tileCoords.push({z:ge,x:_e,y:Fe}),Ct)){Ct>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ge,_e,Fe,rn.numFeatures,rn.numPoints,rn.numSimplified),console.timeEnd("creation"));var Kn="z"+ge;this.stats[Kn]=(this.stats[Kn]||0)+1,this.total++}if(rn.source=ze,Ke){if(ge===rt.maxZoom||ge===Ke)continue;var Jn=1<<Ke-ge;if(_e!==Math.floor(st/Jn)||Fe!==Math.floor(vt/Jn))continue}else if(ge===rt.indexMaxZoom||rn.numPoints<=rt.indexMaxPoints)continue;if(rn.source=null,ze.length!==0){Ct>1&&console.time("clipping");var jn,ai,Xn,Ri,mr,is,Tr=.5*rt.buffer/rt.extent,Wo=.5-Tr,rs=.5+Tr,Or=1+Tr;jn=ai=Xn=Ri=null,mr=Lt(ze,nn,_e-Tr,_e+rs,0,rn.minX,rn.maxX,rt),is=Lt(ze,nn,_e+Wo,_e+Or,0,rn.minX,rn.maxX,rt),ze=null,mr&&(jn=Lt(mr,nn,Fe-Tr,Fe+rs,1,rn.minY,rn.maxY,rt),ai=Lt(mr,nn,Fe+Wo,Fe+Or,1,rn.minY,rn.maxY,rt),mr=null),is&&(Xn=Lt(is,nn,Fe-Tr,Fe+rs,1,rn.minY,rn.maxY,rt),Ri=Lt(is,nn,Fe+Wo,Fe+Or,1,rn.minY,rn.maxY,rt),is=null),Ct>1&&console.timeEnd("clipping"),pt.push(jn||[],ge+1,2*_e,2*Fe),pt.push(ai||[],ge+1,2*_e,2*Fe+1),pt.push(Xn||[],ge+1,2*_e+1,2*Fe),pt.push(Ri||[],ge+1,2*_e+1,2*Fe+1)}}},rr.prototype.getTile=function(ze,ge,_e){var Fe=this.options,Ke=Fe.extent,st=Fe.debug;if(ze<0||ze>24)return null;var vt=1<<ze,pt=wr(ze,ge=(ge%vt+vt)%vt,_e);if(this.tiles[pt])return wn(this.tiles[pt],Ke);st>1&&console.log("drilling down to z%d-%d-%d",ze,ge,_e);for(var rt,Ct=ze,nn=ge,dn=_e;!rt&&Ct>0;)Ct--,nn=Math.floor(nn/2),dn=Math.floor(dn/2),rt=this.tiles[wr(Ct,nn,dn)];return rt&&rt.source?(st>1&&console.log("found parent tile z%d-%d-%d",Ct,nn,dn),st>1&&console.time("drilling down"),this.splitTile(rt.source,Ct,nn,dn,ze,ge,_e),st>1&&console.timeEnd("drilling down"),this.tiles[pt]?wn(this.tiles[pt],Ke):null):null};class So extends s.VectorTileWorkerSource{constructor(ge,_e,Fe,Ke,st){super(ge,_e,Fe,Ke,jo),st&&(this.loadGeoJSON=st)}loadData(ge,_e){const Fe=ge&&ge.request,Ke=Fe&&Fe.collectResourceTiming;this.loadGeoJSON(ge,((st,vt)=>{if(st||!vt)return _e(st);if(typeof vt!="object")return _e(new Error(`Input data given to '${ge.source}' is not a valid GeoJSON object.`));{M(vt,!0);try{if(ge.filter){const rt=s.createExpression(ge.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(rt.result==="error")throw new Error(rt.value.map((nn=>`${nn.key}: ${nn.message}`)).join(", "));vt={type:"FeatureCollection",features:vt.features.filter((nn=>rt.value.evaluate({zoom:0},nn)))}}this._geoJSONIndex=ge.cluster?new mt((function({superclusterOptions:rt,clusterProperties:Ct}){if(!Ct||!rt)return rt;const nn={},dn={},rn={accumulated:null,zoom:0},Kn={properties:null},Jn=Object.keys(Ct);for(const jn of Jn){const[ai,Xn]=Ct[jn],Ri=s.createExpression(Xn),mr=s.createExpression(typeof ai=="string"?[ai,["accumulated"],["get",jn]]:ai);nn[jn]=Ri.value,dn[jn]=mr.value}return rt.map=jn=>{Kn.properties=jn;const ai={};for(const Xn of Jn)ai[Xn]=nn[Xn].evaluate(rn,Kn);return ai},rt.reduce=(jn,ai)=>{Kn.properties=ai;for(const Xn of Jn)rn.accumulated=jn[Xn],jn[Xn]=dn[Xn].evaluate(rn,Kn)},rt})(ge)).load(vt.features):(function(rt,Ct){return new rr(rt,Ct)})(vt,ge.geojsonVtOptions)}catch(rt){return _e(rt)}this.loaded={};const pt={};if(Ke){const rt=s.getPerformanceMeasurement(Fe);rt&&(pt.resourceTiming={},pt.resourceTiming[ge.source]=JSON.parse(JSON.stringify(rt)))}_e(null,pt)}}))}reloadTile(ge,_e){const Fe=this.loaded;return Fe&&Fe[ge.uid]?super.reloadTile(ge,_e):this.loadTile(ge,_e)}loadGeoJSON(ge,_e){if(ge.request)s.getJSON(ge.request,_e);else{if(typeof ge.data!="string")return _e(new Error(`Input data given to '${ge.source}' is not a valid GeoJSON object.`));try{return _e(null,JSON.parse(ge.data))}catch{return _e(new Error(`Input data given to '${ge.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(ge,_e){try{_e(null,this._geoJSONIndex.getClusterExpansionZoom(ge.clusterId))}catch(Fe){_e(Fe)}}getClusterChildren(ge,_e){try{_e(null,this._geoJSONIndex.getChildren(ge.clusterId))}catch(Fe){_e(Fe)}}getClusterLeaves(ge,_e){try{_e(null,this._geoJSONIndex.getLeaves(ge.clusterId,ge.limit,ge.offset))}catch(Fe){_e(Fe)}}}class $c{constructor(ge){this.self=ge,this.actor=new s.Actor(ge,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=s.getProjection({name:"mercator"}),this.workerSourceTypes={vector:s.VectorTileWorkerSource,geojson:So},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(_e,Fe)=>{if(this.workerSourceTypes[_e])throw new Error(`Worker source with name "${_e}" already registered.`);this.workerSourceTypes[_e]=Fe},this.self.registerRTLTextPlugin=_e=>{if(s.plugin.isParsed())throw new Error("RTL text plugin already registered.");s.plugin.applyArabicShaping=_e.applyArabicShaping,s.plugin.processBidirectionalText=_e.processBidirectionalText,s.plugin.processStyledBidirectionalText=_e.processStyledBidirectionalText}}clearCaches(ge,_e,Fe){delete this.layerIndexes[ge],delete this.availableImages[ge],delete this.workerSources[ge],delete this.demWorkerSources[ge],Fe()}checkIfReady(ge,_e,Fe){Fe()}setReferrer(ge,_e){this.referrer=_e}spriteLoaded(ge,_e){this.isSpriteLoaded[ge]=_e;for(const Fe in this.workerSources[ge]){const Ke=this.workerSources[ge][Fe];for(const st in Ke)Ke[st]instanceof s.VectorTileWorkerSource&&(Ke[st].isSpriteLoaded=_e,Ke[st].fire(new s.Event("isSpriteLoaded")))}}setImages(ge,_e,Fe){this.availableImages[ge]=_e;for(const Ke in this.workerSources[ge]){const st=this.workerSources[ge][Ke];for(const vt in st)st[vt].availableImages=_e}Fe()}enableTerrain(ge,_e,Fe){this.terrain=_e,Fe()}setProjection(ge,_e){this.projections[ge]=s.getProjection(_e)}setLayers(ge,_e,Fe){this.getLayerIndex(ge).replace(_e),Fe()}updateLayers(ge,_e,Fe){this.getLayerIndex(ge).update(_e.layers,_e.removedIds),Fe()}loadTile(ge,_e,Fe){const Ke=this.enableTerrain?s.extend({enableTerrain:this.terrain},_e):_e;Ke.projection=this.projections[ge]||this.defaultProjection,this.getWorkerSource(ge,_e.type,_e.source).loadTile(Ke,Fe)}loadDEMTile(ge,_e,Fe){const Ke=this.enableTerrain?s.extend({buildQuadTree:this.terrain},_e):_e;this.getDEMWorkerSource(ge,_e.source).loadTile(Ke,Fe)}reloadTile(ge,_e,Fe){const Ke=this.enableTerrain?s.extend({enableTerrain:this.terrain},_e):_e;Ke.projection=this.projections[ge]||this.defaultProjection,this.getWorkerSource(ge,_e.type,_e.source).reloadTile(Ke,Fe)}abortTile(ge,_e,Fe){this.getWorkerSource(ge,_e.type,_e.source).abortTile(_e,Fe)}removeTile(ge,_e,Fe){this.getWorkerSource(ge,_e.type,_e.source).removeTile(_e,Fe)}removeSource(ge,_e,Fe){if(!this.workerSources[ge]||!this.workerSources[ge][_e.type]||!this.workerSources[ge][_e.type][_e.source])return;const Ke=this.workerSources[ge][_e.type][_e.source];delete this.workerSources[ge][_e.type][_e.source],Ke.removeSource!==void 0?Ke.removeSource(_e,Fe):Fe()}loadWorkerSource(ge,_e,Fe){try{this.self.importScripts(_e.url),Fe()}catch(Ke){Fe(Ke.toString())}}syncRTLPluginState(ge,_e,Fe){try{s.plugin.setState(_e);const Ke=s.plugin.getPluginURL();if(s.plugin.isLoaded()&&!s.plugin.isParsed()&&Ke!=null){this.self.importScripts(Ke);const st=s.plugin.isParsed();Fe(st?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Ke}`),st)}}catch(Ke){Fe(Ke.toString())}}getAvailableImages(ge){let _e=this.availableImages[ge];return _e||(_e=[]),_e}getLayerIndex(ge){let _e=this.layerIndexes[ge];return _e||(_e=this.layerIndexes[ge]=new x),_e}getWorkerSource(ge,_e,Fe){if(this.workerSources[ge]||(this.workerSources[ge]={}),this.workerSources[ge][_e]||(this.workerSources[ge][_e]={}),!this.workerSources[ge][_e][Fe]){const Ke={send:(st,vt,pt,rt,Ct,nn)=>{this.actor.send(st,vt,pt,ge,Ct,nn)},scheduler:this.actor.scheduler};this.workerSources[ge][_e][Fe]=new this.workerSourceTypes[_e](Ke,this.getLayerIndex(ge),this.getAvailableImages(ge),this.isSpriteLoaded[ge])}return this.workerSources[ge][_e][Fe]}getDEMWorkerSource(ge,_e){return this.demWorkerSources[ge]||(this.demWorkerSources[ge]={}),this.demWorkerSources[ge][_e]||(this.demWorkerSources[ge][_e]=new T),this.demWorkerSources[ge][_e]}enforceCacheSizeLimit(ge,_e){s.enforceCacheSizeLimit(_e)}getWorkerPerformanceMetrics(ge,_e,Fe){Fe(void 0,void 0)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new $c(self)),$c})),l(["./shared"],(function(s){function p(v,u){if(Array.isArray(v)){if(!Array.isArray(u)||v.length!==u.length)return!1;for(let m=0;m<v.length;m++)if(!p(v[m],u[m]))return!1;return!0}if(typeof v=="object"&&v!==null&&u!==null){if(typeof u!="object"||Object.keys(v).length!==Object.keys(u).length)return!1;for(const m in v)if(!p(v[m],u[m]))return!1;return!0}return v===u}var _=x;function x(v){return!(function(u){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?(function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var y,S,C=new Blob([""],{type:"text/javascript"}),L=URL.createObjectURL(C);try{S=new Worker(L),y=!0}catch{y=!1}return S&&S.terminate(),URL.revokeObjectURL(L),y})()?"Uint8ClampedArray"in window?ArrayBuffer.isView?(function(){var y=document.createElement("canvas");y.width=y.height=1;var S=y.getContext("2d");if(!S)return!1;var C=S.getImageData(0,0,1,1);return C&&C.width===y.width})()?(T[m=u&&u.failIfMajorPerformanceCaveat]===void 0&&(T[m]=(function(y){var S,C=(function(L){var O=document.createElement("canvas"),$=Object.create(x.webGLContextAttributes);return $.failIfMajorPerformanceCaveat=L,O.getContext("webgl",$)||O.getContext("experimental-webgl",$)})(y);if(!C)return!1;try{S=C.createShader(C.VERTEX_SHADER)}catch{return!1}return!(!S||C.isContextLost())&&(C.shaderSource(S,"void main() {}"),C.compileShader(S),C.getShaderParameter(S,C.COMPILE_STATUS)===!0)})(m)),T[m]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var m})(v)}var T={};function k(v,u,m){const y=s.window.document.createElement(v);return u!==void 0&&(y.className=u),m&&m.appendChild(y),y}function A(v,u,m){const y=s.window.document.createElementNS("http://www.w3.org/2000/svg",v);for(const S of Object.keys(u))y.setAttributeNS(null,S,u[S]);return m&&m.appendChild(y),y}x.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const M=s.window.document&&s.window.document.documentElement.style,R=M&&M.userSelect!==void 0?"userSelect":"WebkitUserSelect";let F;function z(){M&&R&&(F=M[R],M[R]="none")}function G(){M&&R&&(M[R]=F)}function Y(v){v.preventDefault(),v.stopPropagation(),s.window.removeEventListener("click",Y,!0)}function J(){s.window.addEventListener("click",Y,!0),s.window.setTimeout((()=>{s.window.removeEventListener("click",Y,!0)}),0)}function re(v,u){const m=v.getBoundingClientRect();return H(v,m,u)}function X(v,u){const m=v.getBoundingClientRect(),y=[];for(let S=0;S<u.length;S++)y.push(H(v,m,u[S]));return y}function U(v){return s.window.InstallTrigger!==void 0&&v.button===2&&v.ctrlKey&&s.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:v.button}function H(v,u,m){const y=v.offsetWidth===u.width?1:v.offsetWidth/u.width;return new s.Point((m.clientX-u.left)*y,(m.clientY-u.top)*y)}function W(v,u){var m=u[0],y=u[1],S=u[2],C=u[3],L=m*C-S*y;return L?(v[0]=C*(L=1/L),v[1]=-y*L,v[2]=-S*L,v[3]=m*L,v):null}function ie(v){const{userImage:u}=v;return!!(u&&u.render&&u.render())&&(v.data.replace(new Uint8Array(u.data.buffer)),!0)}class Q extends s.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new s.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(u){if(this.loaded!==u&&(this.loaded=u,u)){for(const{ids:m,callback:y}of this.requestors)this._notify(m,y);this.requestors=[]}}hasImage(u){return!!this.getImage(u)}getImage(u){return this.images[u]}addImage(u,m){this._validate(u,m)&&(this.images[u]=m)}_validate(u,m){let y=!0;return this._validateStretch(m.stretchX,m.data&&m.data.width)||(this.fire(new s.ErrorEvent(new Error(`Image "${u}" has invalid "stretchX" value`))),y=!1),this._validateStretch(m.stretchY,m.data&&m.data.height)||(this.fire(new s.ErrorEvent(new Error(`Image "${u}" has invalid "stretchY" value`))),y=!1),this._validateContent(m.content,m)||(this.fire(new s.ErrorEvent(new Error(`Image "${u}" has invalid "content" value`))),y=!1),y}_validateStretch(u,m){if(!u)return!0;let y=0;for(const S of u){if(S[0]<y||S[1]<S[0]||m<S[1])return!1;y=S[1]}return!0}_validateContent(u,m){return!(u&&(u.length!==4||u[0]<0||m.data.width<u[0]||u[1]<0||m.data.height<u[1]||u[2]<0||m.data.width<u[2]||u[3]<0||m.data.height<u[3]||u[2]<u[0]||u[3]<u[1]))}updateImage(u,m){m.version=this.images[u].version+1,this.images[u]=m,this.updatedImages[u]=!0}removeImage(u){const m=this.images[u];delete this.images[u],delete this.patterns[u],m.userImage&&m.userImage.onRemove&&m.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(u,m){let y=!0;if(!this.isLoaded())for(const S of u)this.images[S]||(y=!1);this.isLoaded()||y?this._notify(u,m):this.requestors.push({ids:u,callback:m})}_notify(u,m){const y={};for(const S of u){this.images[S]||this.fire(new s.Event("styleimagemissing",{id:S}));const C=this.images[S];C?y[S]={data:C.data.clone(),pixelRatio:C.pixelRatio,sdf:C.sdf,version:C.version,stretchX:C.stretchX,stretchY:C.stretchY,content:C.content,hasRenderCallback:!!(C.userImage&&C.userImage.render)}:s.warnOnce(`Image "${S}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}m(null,y)}getPixelSize(){const{width:u,height:m}=this.atlasImage;return{width:u,height:m}}getPattern(u){const m=this.patterns[u],y=this.getImage(u);if(!y)return null;if(m&&m.position.version===y.version)return m.position;if(m)m.position.version=y.version;else{const S={w:y.data.width+2,h:y.data.height+2,x:0,y:0},C=new s.ImagePosition(S,y);this.patterns[u]={bin:S,position:C}}return this._updatePatternAtlas(),this.patterns[u].position}bind(u){const m=u.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new s.Texture(u,this.atlasImage,m.RGBA),this.atlasTexture&&this.atlasTexture.bind(m.LINEAR,m.CLAMP_TO_EDGE)}_updatePatternAtlas(){const u=[];for(const C in this.patterns)u.push(this.patterns[C].bin);const{w:m,h:y}=s.potpack(u),S=this.atlasImage;S.resize({width:m||1,height:y||1});for(const C in this.patterns){const{bin:L}=this.patterns[C],O=L.x+1,$=L.y+1,q=this.images[C].data,K=q.width,ae=q.height;s.RGBAImage.copy(q,S,{x:0,y:0},{x:O,y:$},{width:K,height:ae}),s.RGBAImage.copy(q,S,{x:0,y:ae-1},{x:O,y:$-1},{width:K,height:1}),s.RGBAImage.copy(q,S,{x:0,y:0},{x:O,y:$+ae},{width:K,height:1}),s.RGBAImage.copy(q,S,{x:K-1,y:0},{x:O-1,y:$},{width:1,height:ae}),s.RGBAImage.copy(q,S,{x:0,y:0},{x:O+K,y:$},{width:1,height:ae})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(u){for(const m of u){if(this.callbackDispatchedThisFrame[m])continue;this.callbackDispatchedThisFrame[m]=!0;const y=this.images[m];ie(y)&&this.updateImage(m,y)}}}const te=new s.Properties({anchor:new s.DataConstantProperty(s.spec.light.anchor),position:new class{constructor(){this.specification=s.spec.light.position}possiblyEvaluate(v,u){return(function([m,y,S]){const C=s.degToRad(y+90),L=s.degToRad(S);return{x:m*Math.cos(C)*Math.sin(L),y:m*Math.sin(C)*Math.sin(L),z:m*Math.cos(L),azimuthal:y,polar:S}})(v.expression.evaluate(u))}interpolate(v,u,m){return{x:s.number(v.x,u.x,m),y:s.number(v.y,u.y,m),z:s.number(v.z,u.z,m),azimuthal:s.number(v.azimuthal,u.azimuthal,m),polar:s.number(v.polar,u.polar,m)}}},color:new s.DataConstantProperty(s.spec.light.color),intensity:new s.DataConstantProperty(s.spec.light.intensity)});class ke extends s.Evented{constructor(u){super(),this._transitionable=new s.Transitionable(te),this.setLight(u),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(u,m={}){if(!this._validate(s.validateLight,u,m))for(const y in u){const S=u[y];s.endsWith(y,"-transition")?this._transitionable.setTransition(y.slice(0,-11),S):this._transitionable.setValue(y,S)}}updateTransitions(u){this._transitioning=this._transitionable.transitioned(u,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(u){this.properties=this._transitioning.possiblyEvaluate(u)}_validate(u,m,y){return(!y||y.validate!==!1)&&s.emitValidationErrors(this,u.call(s.validateStyle,s.extend({value:m,style:{glyphs:!0,sprite:!0},styleSpec:s.spec})))}}const Re=new s.Properties({source:new s.DataConstantProperty(s.spec.terrain.source),exaggeration:new s.DataConstantProperty(s.spec.terrain.exaggeration)});let Be=class extends s.Evented{constructor(v,u){super(),this._transitionable=new s.Transitionable(Re),this.set(v),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=u}get(){return this._transitionable.serialize()}set(v){for(const u in v){const m=v[u];s.endsWith(u,"-transition")?this._transitionable.setTransition(u.slice(0,-11),m):this._transitionable.setValue(u,m)}}updateTransitions(v){this._transitioning=this._transitionable.transitioned(v,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(v){this.properties=this._transitioning.possiblyEvaluate(v)}};function Je(v,u,m,y){const S=s.smoothstep(45,65,m),[C,L]=nt(v,y),O=s.length(u);let $=1-Math.min(1,Math.exp((O-C)/(L-C)*-6));return $*=$*$,$=Math.min(1,1.00747*$),$*S*v.alpha}function nt(v,u){const m=.5/Math.tan(.5*u);return[v.range[0]+m,v.range[1]+m]}const De=new s.Properties({range:new s.DataConstantProperty(s.spec.fog.range),color:new s.DataConstantProperty(s.spec.fog.color),"high-color":new s.DataConstantProperty(s.spec.fog["high-color"]),"space-color":new s.DataConstantProperty(s.spec.fog["space-color"]),"horizon-blend":new s.DataConstantProperty(s.spec.fog["horizon-blend"]),"star-intensity":new s.DataConstantProperty(s.spec.fog["star-intensity"])});class Ge extends s.Evented{constructor(u,m){super(),this._transitionable=new s.Transitionable(De),this.set(u),this._transitioning=this._transitionable.untransitioned(),this._transform=m}get state(){const u=this._transform,m=u.projection.name==="globe",y=s.globeToMercatorTransition(u.zoom),S=this.properties.get("range"),C=[.5,3];return{range:m?[s.number(C[0],S[0],y),s.number(C[1],S[1],y)]:S,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(u,m={}){if(!this._validate(s.validateFog,u,m)){for(const y of Object.keys(s.spec.fog))u&&u[y]===void 0&&(u[y]=s.spec.fog[y].default);for(const y in u){const S=u[y];s.endsWith(y,"-transition")?this._transitionable.setTransition(y.slice(0,-11),S):this._transitionable.setValue(y,S)}}}getOpacity(u){if(!this._transform.projection.supportsFog)return 0;const m=this.properties&&this.properties.get("color")||1;return(this._transform.projection.name==="globe"?1:s.smoothstep(45,65,u))*m.a}getOpacityAtLatLng(u,m){return this._transform.projection.supportsFog?(function(y,S,C){const L=s.MercatorCoordinate.fromLngLat(S),O=C.elevation?C.elevation.getAtPointOrZero(L):0,$=[L.x,L.y,O];return s.transformMat4($,$,C.mercatorFogMatrix),Je(y,$,C.pitch,C._fov)})(this.state,u,m):0}getFovAdjustedRange(u){return this._transform.projection.supportsFog?nt(this.state,u):[0,1]}updateTransitions(u){this._transitioning=this._transitionable.transitioned(u,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(u){this.properties=this._transitioning.possiblyEvaluate(u)}_validate(u,m,y){return(!y||y.validate!==!1)&&s.emitValidationErrors(this,u.call(s.validateStyle,s.extend({value:m,style:{glyphs:!0,sprite:!0},styleSpec:s.spec})))}}class Ee{constructor(u,m){this.workerPool=u,this.actors=[],this.currentActor=0,this.id=s.uniqueId();const y=this.workerPool.acquire(this.id);for(let S=0;S<y.length;S++){const C=new Ee.Actor(y[S],m,this.id);C.name=`Worker ${S}`,this.actors.push(C)}this.ready=!1,this.broadcast("checkIfReady",null,(()=>{this.ready=!0}))}broadcast(u,m,y){s.asyncAll(this.actors,((S,C)=>{S.send(u,m,C)}),y=y||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach((u=>{u.remove()})),this.actors=[],this.workerPool.release(this.id)}}function it(v,u,m){return u*(s.EXTENT/(v.tileSize*Math.pow(2,m-v.tileID.overscaledZ)))}Ee.Actor=s.Actor;class ot{constructor(u,m,y,S){this.screenBounds=u,this.cameraPoint=m,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=y,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,S)}static createFromScreenPoints(u,m){let y,S;if(u instanceof s.Point||typeof u[0]=="number"){const C=s.Point.convert(u);y=[C],S=m.isPointAboveHorizon(C)}else{const C=s.Point.convert(u[0]),L=s.Point.convert(u[1]);y=[C,L],S=s.polygonizeBounds(C,L).every((O=>m.isPointAboveHorizon(O)))}return new ot(y,m.getCameraPoint(),S,m)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(u){return s.polygonizeBounds(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],u)}bufferedCameraGeometry(u){const m=this.screenBounds[0],y=this.screenBounds.length===1?this.screenBounds[0].add(new s.Point(1,1)):this.screenBounds[1],S=s.polygonizeBounds(m,y,0,!1);return this.cameraPoint.y>y.y&&(this.cameraPoint.x>m.x&&this.cameraPoint.x<y.x?S.splice(3,0,this.cameraPoint):this.cameraPoint.x>=y.x?S[2]=this.cameraPoint:this.cameraPoint.x<=m.x&&(S[3]=this.cameraPoint)),s.bufferConvexPolygon(S,u)}bufferedCameraGeometryGlobe(u){const m=this.screenBounds[0],y=this.screenBounds.length===1?this.screenBounds[0].add(new s.Point(1,1)):this.screenBounds[1],S=s.polygonizeBounds(m,y,u),C=this.cameraPoint.clone();switch(3*((C.y>m.y)+(C.y>y.y))+((C.x>m.x)+(C.x>y.x))){case 0:S[0]=C,S[4]=C.clone();break;case 1:S.splice(1,0,C);break;case 2:S[1]=C;break;case 3:S.splice(4,0,C);break;case 5:S.splice(2,0,C);break;case 6:S[3]=C;break;case 7:S.splice(3,0,C);break;case 8:S[2]=C}return S}containsTile(u,m,y,S=0){const C=u.queryPadding/m._pixelsPerMercatorPixel+1,L=y?this._bufferedCameraMercator(C,m):this._bufferedScreenMercator(C,m);let O=u.tileID.wrap+(L.unwrapped?S:0);const $=L.polygon.map((Ce=>s.getTilePoint(u.tileTransform,Ce,O)));if(!s.polygonIntersectsBox($,0,0,s.EXTENT,s.EXTENT))return;O=u.tileID.wrap+(this.screenGeometryMercator.unwrapped?S:0);const q=this.screenGeometryMercator.polygon.map((Ce=>s.getTileVec3(u.tileTransform,Ce,O))),K=q.map((Ce=>new s.Point(Ce[0],Ce[1]))),ae=m.getFreeCameraOptions().position||new s.MercatorCoordinate(0,0,0),pe=s.getTileVec3(u.tileTransform,ae,O),be=q.map((Ce=>{const le=s.sub(Ce,Ce,pe);return s.normalize(le,le),new s.Ray(pe,le)})),Se=it(u,1,m.zoom)*m._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:K,tilespaceRays:be,bufferedTilespaceGeometry:$,bufferedTilespaceBounds:(xe=s.getBounds($),xe.min.x=s.clamp(xe.min.x,0,s.EXTENT),xe.min.y=s.clamp(xe.min.y,0,s.EXTENT),xe.max.x=s.clamp(xe.max.x,0,s.EXTENT),xe.max.y=s.clamp(xe.max.y,0,s.EXTENT),xe),tile:u,tileID:u.tileID,pixelToTileUnitsFactor:Se};var xe}_bufferedScreenMercator(u,m){const y=$t(u);if(this._screenRaycastCache[y])return this._screenRaycastCache[y];{let S;return S=m.projection.name==="globe"?this._projectAndResample(this.bufferedScreenGeometry(u),m):{polygon:this.bufferedScreenGeometry(u).map((C=>m.pointCoordinate3D(C))),unwrapped:!0},this._screenRaycastCache[y]=S,S}}_bufferedCameraMercator(u,m){const y=$t(u);if(this._cameraRaycastCache[y])return this._cameraRaycastCache[y];{let S;return S=m.projection.name==="globe"?this._projectAndResample(this.bufferedCameraGeometryGlobe(u),m):{polygon:this.bufferedCameraGeometry(u).map((C=>m.pointCoordinate3D(C))),unwrapped:!0},this._cameraRaycastCache[y]=S,S}}_projectAndResample(u,m){const y=(function(C,L){const O=s.multiply([],L.pixelMatrix,L.globeMatrix),$=[0,-s.GLOBE_RADIUS,0,1],q=[0,s.GLOBE_RADIUS,0,1],K=[0,0,0,1];s.transformMat4$1($,$,O),s.transformMat4$1(q,q,O),s.transformMat4$1(K,K,O);const ae=new s.Point($[0]/$[3],$[1]/$[3]),pe=new s.Point(q[0]/q[3],q[1]/q[3]),be=s.polygonContainsPoint(C,ae)&&$[3]<K[3],Se=s.polygonContainsPoint(C,pe)&&q[3]<K[3];if(!be&&!Se)return null;const xe=(function(Ye,ut,at){for(let gt=1;gt<Ye.length;gt++){const qt=Pt(ut.pointCoordinate3D(Ye[gt-1]).x),dt=Pt(ut.pointCoordinate3D(Ye[gt]).x);if(at<0){if(qt<dt)return{idx:gt,t:-qt/(dt-1-qt)}}else if(dt<qt)return{idx:gt,t:(1-qt)/(dt+1-qt)}}return null})(C,L,be?-1:1);if(!xe)return null;const{idx:Ce,t:le}=xe;let ye=Ce>1?mt(C.slice(0,Ce),L):[],Pe=Ce<C.length?mt(C.slice(Ce),L):[];ye=ye.map((Ye=>new s.Point(Pt(Ye.x),Ye.y))),Pe=Pe.map((Ye=>new s.Point(Pt(Ye.x),Ye.y)));const Le=[...ye];Le.length===0&&Le.push(Pe[Pe.length-1]);const We=s.number(Le[Le.length-1].y,(Pe.length===0?ye[0]:Pe[0]).y,le);let qe;return qe=be?[new s.Point(0,We),new s.Point(0,0),new s.Point(1,0),new s.Point(1,We)]:[new s.Point(1,We),new s.Point(1,1),new s.Point(0,1),new s.Point(0,We)],Le.push(...qe),Pe.length===0?Le.push(ye[0]):Le.push(...Pe),{polygon:Le.map((Ye=>new s.MercatorCoordinate(Ye.x,Ye.y))),unwrapped:!1}})(u,m);if(y)return y;const S=(function(C,L){let O=!1,$=-1/0,q=0;for(let ae=0;ae<C.length-1;ae++)C[ae].x>$&&($=C[ae].x,q=ae);for(let ae=0;ae<C.length-1;ae++){const pe=(q+ae)%(C.length-1),be=C[pe],Se=C[pe+1];Math.abs(be.x-Se.x)>.5&&(be.x<Se.x?(be.x+=1,pe===0&&(C[C.length-1].x+=1)):(Se.x+=1,pe+1===C.length-1&&(C[0].x+=1)),O=!0)}const K=s.mercatorXfromLng(L.center.lng);return O&&K<Math.abs(K-1)&&C.forEach((ae=>{ae.x-=1})),{polygon:C,unwrapped:O}})(mt(u,m).map((C=>new s.Point(Pt(C.x),C.y))),m);return{polygon:S.polygon.map((C=>new s.MercatorCoordinate(C.x,C.y))),unwrapped:S.unwrapped}}}function mt(v,u){return s.resample(v,(m=>{const y=u.pointCoordinate3D(m);m.x=y.x,m.y=y.y}),1/256)}function Pt(v){return v<0?1+v%1:v%1}function $t(v){return 100*v|0}function ct(v,u,m,y,S){const C=function(L,O){if(L)return S(L);if(O){v.url&&O.tiles&&v.tiles&&delete v.tiles;const $=s.pick(s.extend(O,v),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);O.vector_layers&&($.vectorLayers=O.vector_layers,$.vectorLayerIds=$.vectorLayers.map((q=>q.id))),$.tiles=u.canonicalizeTileset($,v.url),S(null,$)}};return v.url?s.getJSON(u.transformRequest(u.normalizeSourceURL(v.url,null,m,y),s.ResourceType.Source),C):s.exported.frame((()=>C(null,v)))}class ht{constructor(u,m,y){this.bounds=s.LngLatBounds.convert(this.validateBounds(u)),this.minzoom=m||0,this.maxzoom=y||24}validateBounds(u){return Array.isArray(u)&&u.length===4?[Math.max(-180,u[0]),Math.max(-90,u[1]),Math.min(180,u[2]),Math.min(90,u[3])]:[-180,-90,180,90]}contains(u){const m=Math.pow(2,u.z),y=Math.floor(s.mercatorXfromLng(this.bounds.getWest())*m),S=Math.floor(s.mercatorYfromLat(this.bounds.getNorth())*m),C=Math.ceil(s.mercatorXfromLng(this.bounds.getEast())*m),L=Math.ceil(s.mercatorYfromLat(this.bounds.getSouth())*m);return u.x>=y&&u.x<C&&u.y>=S&&u.y<L}}class Qe{constructor(u,m,y){this.context=u;const S=u.gl;this.buffer=S.createBuffer(),this.dynamicDraw=!!y,this.context.unbindVAO(),u.bindElementBuffer.set(this.buffer),S.bufferData(S.ELEMENT_ARRAY_BUFFER,m.arrayBuffer,this.dynamicDraw?S.DYNAMIC_DRAW:S.STATIC_DRAW),this.dynamicDraw||m.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(u){const m=this.context.gl;this.context.unbindVAO(),this.bind(),m.bufferSubData(m.ELEMENT_ARRAY_BUFFER,0,u.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const kt={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Ue{constructor(u,m,y,S){this.length=m.length,this.attributes=y,this.itemSize=m.bytesPerElement,this.dynamicDraw=S,this.context=u;const C=u.gl;this.buffer=C.createBuffer(),u.bindVertexBuffer.set(this.buffer),C.bufferData(C.ARRAY_BUFFER,m.arrayBuffer,this.dynamicDraw?C.DYNAMIC_DRAW:C.STATIC_DRAW),this.dynamicDraw||m.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(u){const m=this.context.gl;this.bind(),m.bufferSubData(m.ARRAY_BUFFER,0,u.arrayBuffer)}enableAttributes(u,m){for(let y=0;y<this.attributes.length;y++){const S=m.attributes[this.attributes[y].name];S!==void 0&&u.enableVertexAttribArray(S)}}setVertexAttribPointers(u,m,y){for(let S=0;S<this.attributes.length;S++){const C=this.attributes[S],L=m.attributes[C.name];L!==void 0&&u.vertexAttribPointer(L,C.components,u[kt[C.type]],!1,this.itemSize,C.offset+this.itemSize*(y||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class ue{constructor(u){this.gl=u.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(u){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class we extends ue{getDefault(){return s.Color.transparent}set(u){const m=this.current;(u.r!==m.r||u.g!==m.g||u.b!==m.b||u.a!==m.a||this.dirty)&&(this.gl.clearColor(u.r,u.g,u.b,u.a),this.current=u,this.dirty=!1)}}class fe extends ue{getDefault(){return 1}set(u){(u!==this.current||this.dirty)&&(this.gl.clearDepth(u),this.current=u,this.dirty=!1)}}class Ie extends ue{getDefault(){return 0}set(u){(u!==this.current||this.dirty)&&(this.gl.clearStencil(u),this.current=u,this.dirty=!1)}}class je extends ue{getDefault(){return[!0,!0,!0,!0]}set(u){const m=this.current;(u[0]!==m[0]||u[1]!==m[1]||u[2]!==m[2]||u[3]!==m[3]||this.dirty)&&(this.gl.colorMask(u[0],u[1],u[2],u[3]),this.current=u,this.dirty=!1)}}class Xe extends ue{getDefault(){return!0}set(u){(u!==this.current||this.dirty)&&(this.gl.depthMask(u),this.current=u,this.dirty=!1)}}class yt extends ue{getDefault(){return 255}set(u){(u!==this.current||this.dirty)&&(this.gl.stencilMask(u),this.current=u,this.dirty=!1)}}class wt extends ue{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(u){const m=this.current;(u.func!==m.func||u.ref!==m.ref||u.mask!==m.mask||this.dirty)&&(this.gl.stencilFunc(u.func,u.ref,u.mask),this.current=u,this.dirty=!1)}}class Lt extends ue{getDefault(){const u=this.gl;return[u.KEEP,u.KEEP,u.KEEP]}set(u){const m=this.current;(u[0]!==m[0]||u[1]!==m[1]||u[2]!==m[2]||this.dirty)&&(this.gl.stencilOp(u[0],u[1],u[2]),this.current=u,this.dirty=!1)}}class Dt extends ue{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;u?m.enable(m.STENCIL_TEST):m.disable(m.STENCIL_TEST),this.current=u,this.dirty=!1}}class gn extends ue{getDefault(){return[0,1]}set(u){const m=this.current;(u[0]!==m[0]||u[1]!==m[1]||this.dirty)&&(this.gl.depthRange(u[0],u[1]),this.current=u,this.dirty=!1)}}class Kt extends ue{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;u?m.enable(m.DEPTH_TEST):m.disable(m.DEPTH_TEST),this.current=u,this.dirty=!1}}class Cn extends ue{getDefault(){return this.gl.LESS}set(u){(u!==this.current||this.dirty)&&(this.gl.depthFunc(u),this.current=u,this.dirty=!1)}}class Dn extends ue{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;u?m.enable(m.BLEND):m.disable(m.BLEND),this.current=u,this.dirty=!1}}class Fn extends ue{getDefault(){const u=this.gl;return[u.ONE,u.ZERO]}set(u){const m=this.current;(u[0]!==m[0]||u[1]!==m[1]||this.dirty)&&(this.gl.blendFunc(u[0],u[1]),this.current=u,this.dirty=!1)}}class ni extends ue{getDefault(){return s.Color.transparent}set(u){const m=this.current;(u.r!==m.r||u.g!==m.g||u.b!==m.b||u.a!==m.a||this.dirty)&&(this.gl.blendColor(u.r,u.g,u.b,u.a),this.current=u,this.dirty=!1)}}class Ut extends ue{getDefault(){return this.gl.FUNC_ADD}set(u){(u!==this.current||this.dirty)&&(this.gl.blendEquation(u),this.current=u,this.dirty=!1)}}class fn extends ue{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;u?m.enable(m.CULL_FACE):m.disable(m.CULL_FACE),this.current=u,this.dirty=!1}}class wn extends ue{getDefault(){return this.gl.BACK}set(u){(u!==this.current||this.dirty)&&(this.gl.cullFace(u),this.current=u,this.dirty=!1)}}class Ln extends ue{getDefault(){return this.gl.CCW}set(u){(u!==this.current||this.dirty)&&(this.gl.frontFace(u),this.current=u,this.dirty=!1)}}let Ci,xr=class extends ue{getDefault(){return null}set(v){(v!==this.current||this.dirty)&&(this.gl.useProgram(v),this.current=v,this.dirty=!1)}};class Ss extends ue{getDefault(){return this.gl.TEXTURE0}set(u){(u!==this.current||this.dirty)&&(this.gl.activeTexture(u),this.current=u,this.dirty=!1)}}class rr extends ue{getDefault(){const u=this.gl;return[0,0,u.drawingBufferWidth,u.drawingBufferHeight]}set(u){const m=this.current;(u[0]!==m[0]||u[1]!==m[1]||u[2]!==m[2]||u[3]!==m[3]||this.dirty)&&(this.gl.viewport(u[0],u[1],u[2],u[3]),this.current=u,this.dirty=!1)}}class wr extends ue{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;m.bindFramebuffer(m.FRAMEBUFFER,u),this.current=u,this.dirty=!1}}class jo extends ue{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;m.bindRenderbuffer(m.RENDERBUFFER,u),this.current=u,this.dirty=!1}}class So extends ue{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;m.bindTexture(m.TEXTURE_2D,u),this.current=u,this.dirty=!1}}class $c extends ue{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;m.bindBuffer(m.ARRAY_BUFFER,u),this.current=u,this.dirty=!1}}class ze extends ue{getDefault(){return null}set(u){const m=this.gl;m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,u),this.current=u,this.dirty=!1}}class ge extends ue{constructor(u){super(u),this.vao=u.extVertexArrayObject}getDefault(){return null}set(u){this.vao&&(u!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(u),this.current=u,this.dirty=!1)}}class _e extends ue{getDefault(){return 4}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;m.pixelStorei(m.UNPACK_ALIGNMENT,u),this.current=u,this.dirty=!1}}class Fe extends ue{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;m.pixelStorei(m.UNPACK_PREMULTIPLY_ALPHA_WEBGL,u),this.current=u,this.dirty=!1}}class Ke extends ue{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;m.pixelStorei(m.UNPACK_FLIP_Y_WEBGL,u),this.current=u,this.dirty=!1}}class st extends ue{constructor(u,m){super(u),this.context=u,this.parent=m}getDefault(){return null}}class vt extends st{setDirty(){this.dirty=!0}set(u){if(u===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const m=this.gl;m.framebufferTexture2D(m.FRAMEBUFFER,m.COLOR_ATTACHMENT0,m.TEXTURE_2D,u,0),this.current=u,this.dirty=!1}}class pt extends st{attachment(){return this.gl.DEPTH_ATTACHMENT}set(u){if(u===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const m=this.gl;m.framebufferRenderbuffer(m.FRAMEBUFFER,this.attachment(),m.RENDERBUFFER,u),this.current=u,this.dirty=!1}}class rt extends pt{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class Ct{constructor(u,m,y,S){this.context=u,this.width=m,this.height=y;const C=this.framebuffer=u.gl.createFramebuffer();this.colorAttachment=new vt(u,C),S&&(this.depthAttachment=new pt(u,C))}destroy(){const u=this.context.gl,m=this.colorAttachment.get();if(m&&u.deleteTexture(m),this.depthAttachment){const y=this.depthAttachment.get();y&&u.deleteRenderbuffer(y)}u.deleteFramebuffer(this.framebuffer)}}class nn{constructor(u,m=!1){if(this.gl=u,this.isWebGL2=m,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),m){const y=u;this.extVertexArrayObject={createVertexArrayOES:y.createVertexArray.bind(u),deleteVertexArrayOES:y.deleteVertexArray.bind(u),bindVertexArrayOES:y.bindVertexArray.bind(u)}}this.clearColor=new we(this),this.clearDepth=new fe(this),this.clearStencil=new Ie(this),this.colorMask=new je(this),this.depthMask=new Xe(this),this.stencilMask=new yt(this),this.stencilFunc=new wt(this),this.stencilOp=new Lt(this),this.stencilTest=new Dt(this),this.depthRange=new gn(this),this.depthTest=new Kt(this),this.depthFunc=new Cn(this),this.blend=new Dn(this),this.blendFunc=new Fn(this),this.blendColor=new ni(this),this.blendEquation=new Ut(this),this.cullFace=new fn(this),this.cullFaceSide=new wn(this),this.frontFace=new Ln(this),this.program=new xr(this),this.activeTexture=new Ss(this),this.viewport=new rr(this),this.bindFramebuffer=new wr(this),this.bindRenderbuffer=new jo(this),this.bindTexture=new So(this),this.bindVertexBuffer=new $c(this),this.bindElementBuffer=new ze(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new ge(this),this.pixelStoreUnpack=new _e(this),this.pixelStoreUnpackPremultiplyAlpha=new Fe(this),this.pixelStoreUnpackFlipY=new Ke(this),this.extTextureFilterAnisotropic=u.getExtension("EXT_texture_filter_anisotropic")||u.getExtension("MOZ_EXT_texture_filter_anisotropic")||u.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=u.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extDebugRendererInfo=u.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=u.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=u.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),m||(this.extTextureHalfFloat=u.getExtension("OES_texture_half_float")),(m||this.extTextureHalfFloat&&u.getExtension("OES_texture_half_float_linear"))&&(this.extRenderToTextureHalfFloat=u.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=m||u.getExtension("OES_standard_derivatives"),this.extTimerQuery=u.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=u.getParameter(u.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(u,m){return new Qe(this,u,m)}createVertexBuffer(u,m,y){return new Ue(this,u,m,y)}createRenderbuffer(u,m,y){const S=this.gl,C=S.createRenderbuffer();return this.bindRenderbuffer.set(C),S.renderbufferStorage(S.RENDERBUFFER,u,m,y),this.bindRenderbuffer.set(null),C}createFramebuffer(u,m,y){return new Ct(this,u,m,y)}clear({color:u,depth:m,stencil:y}){const S=this.gl;let C=0;u&&(C|=S.COLOR_BUFFER_BIT,this.clearColor.set(u),this.colorMask.set([!0,!0,!0,!0])),m!==void 0&&(C|=S.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(m),this.depthMask.set(!0)),y!==void 0&&(C|=S.STENCIL_BUFFER_BIT,this.clearStencil.set(y),this.stencilMask.set(255)),S.clear(C)}setCullFace(u){u.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(u.mode),this.frontFace.set(u.frontFace))}setDepthMode(u){u.func!==this.gl.ALWAYS||u.mask?(this.depthTest.set(!0),this.depthFunc.set(u.func),this.depthMask.set(u.mask),this.depthRange.set(u.range)):this.depthTest.set(!1)}setStencilMode(u){u.test.func!==this.gl.ALWAYS||u.mask?(this.stencilTest.set(!0),this.stencilMask.set(u.mask),this.stencilOp.set([u.fail,u.depthFail,u.pass]),this.stencilFunc.set({func:u.test.func,ref:u.ref,mask:u.test.mask})):this.stencilTest.set(!1)}setColorMode(u){p(u.blendFunction,s.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(u.blendFunction),this.blendColor.set(u.blendColor)),this.colorMask.set(u.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class dn extends s.Evented{constructor(u,m,y,S){if(super(),this.id=u,this.dispatcher=y,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,s.extend(this,s.pick(m,["url","scheme","tileSize","promoteId"])),this._options=s.extend({type:"vector"},m),this._collectResourceTiming=m.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(S),this._tileWorkers={},this._deduped=new s.DedupedRequest}load(u){this._loaded=!1,this.fire(new s.Event("dataloading",{dataType:"source"}));const m=Array.isArray(this.map._language)?this.map._language.join():this.map._language,y=this.map._worldview;this._tileJSONRequest=ct(this._options,this.map._requestManager,m,y,((S,C)=>{this._tileJSONRequest=null,this._loaded=!0,S?(m&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${m}`),y&&y.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${y}`),this.fire(new s.ErrorEvent(S))):C&&(s.extend(this,C),C.bounds&&(this.tileBounds=new ht(C.bounds,this.minzoom,this.maxzoom)),s.postTurnstileEvent(C.tiles,this.map._requestManager._customAccessToken),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"}))),u&&u(S)}))}loaded(){return this._loaded}hasTile(u){return!this.tileBounds||this.tileBounds.contains(u.canonical)}onAdd(u){this.map=u,this.load()}reload(){this.cancelTileJSONRequest(),this.load((()=>this.map.style._clearSource(this.id)))}setTiles(u){return this._options.tiles=u,this.reload(),this}setUrl(u){return this.url=u,this._options.url=u,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return s.extend({},this._options)}loadTile(u,m){const y=this.map._requestManager.normalizeTileURL(u.tileID.canonical.url(this.tiles,this.scheme)),S={request:this.map._requestManager.transformRequest(y,s.ResourceType.Tile),data:void 0,uid:u.uid,tileID:u.tileID,tileZoom:u.tileZoom,zoom:u.tileID.overscaledZ,tileSize:this.tileSize*u.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:s.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:u.isSymbolTile};if(S.request.collectResourceTiming=this._collectResourceTiming,u.actor&&u.state!=="expired")u.state==="loading"?u.reloadCallback=m:u.request=u.actor.send("reloadTile",S,C.bind(this));else if(u.actor=this._tileWorkers[y]=this._tileWorkers[y]||this.dispatcher.getActor(),this.dispatcher.ready)u.request=u.actor.send("loadTile",S,C.bind(this),void 0,!0);else{const L=s.loadVectorTile.call({deduped:this._deduped},S,((O,$)=>{O||!$?C.call(this,O):(S.data={cacheControl:$.cacheControl,expires:$.expires,rawData:$.rawData.slice(0)},u.actor&&u.actor.send("loadTile",S,C.bind(this),void 0,!0))}),!0);u.request={cancel:L}}function C(L,O){return delete u.request,u.aborted?m(null):L&&L.status!==404?m(L):(O&&O.resourceTiming&&(u.resourceTiming=O.resourceTiming),this.map._refreshExpiredTiles&&O&&u.setExpiryData(O),u.loadVectorData(O,this.map.painter),s.cacheEntryPossiblyAdded(this.dispatcher),m(null),void(u.reloadCallback&&(this.loadTile(u,u.reloadCallback),u.reloadCallback=null)))}}abortTile(u){u.request&&(u.request.cancel(),delete u.request),u.actor&&u.actor.send("abortTile",{uid:u.uid,type:this.type,source:this.id})}unloadTile(u){u.unloadVectorData(),u.actor&&u.actor.send("removeTile",{uid:u.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class rn extends s.Evented{constructor(u,m,y,S){super(),this.id=u,this.dispatcher=y,this.setEventedParent(S),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=s.extend({type:"raster"},m),s.extend(this,s.pick(m,["url","scheme","tileSize"]))}load(u){this._loaded=!1,this.fire(new s.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=ct(this._options,this.map._requestManager,null,null,((m,y)=>{this._tileJSONRequest=null,this._loaded=!0,m?this.fire(new s.ErrorEvent(m)):y&&(s.extend(this,y),y.bounds&&(this.tileBounds=new ht(y.bounds,this.minzoom,this.maxzoom)),s.postTurnstileEvent(y.tiles),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"}))),u&&u(m)}))}loaded(){return this._loaded}onAdd(u){this.map=u,this.load()}reload(){this.cancelTileJSONRequest(),this.load((()=>this.map.style._clearSource(this.id)))}setTiles(u){return this._options.tiles=u,this.reload(),this}setUrl(u){return this.url=u,this._options.url=u,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return s.extend({},this._options)}hasTile(u){return!this.tileBounds||this.tileBounds.contains(u.canonical)}loadTile(u,m){const y=s.exported.devicePixelRatio>=2,S=this.map._requestManager.normalizeTileURL(u.tileID.canonical.url(this.tiles,this.scheme),y,this.tileSize);u.request=s.getImage(this.map._requestManager.transformRequest(S,s.ResourceType.Tile),((C,L,O,$)=>(delete u.request,u.aborted?(u.state="unloaded",m(null)):C?(u.state="errored",m(C)):L?(this.map._refreshExpiredTiles&&u.setExpiryData({cacheControl:O,expires:$}),u.setTexture(L,this.map.painter),u.state="loaded",s.cacheEntryPossiblyAdded(this.dispatcher),void m(null)):m(null))))}static loadTileData(u,m,y){u.setTexture(m,y)}static unloadTileData(u,m){u.texture&&m.saveTileTexture(u.texture)}abortTile(u,m){u.request&&(u.request.cancel(),delete u.request),m()}unloadTile(u,m){u.texture&&this.map.painter.saveTileTexture(u.texture),m()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}function Kn(v,u,m,y,S,C,L,O){const $=[v,m,S,u,y,C,1,1,1],q=[L,O,1],K=s.adjoint([],$),[ae,pe,be]=s.transformMat3(q,q,s.transpose(K,K));return s.multiply$1($,[ae,0,0,0,pe,0,0,0,be],$)}class Jn extends s.Evented{constructor(u,m,y,S){super(),this.id=u,this.dispatcher=y,this.coordinates=m.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(S),this.options=m,this._dirty=!1}load(u,m){this._loaded=m||!1,this.fire(new s.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._imageRequest=s.getImage(this.map._requestManager.transformRequest(this.url,s.ResourceType.Image),((y,S)=>{if(this._imageRequest=null,this._loaded=!0,y)this.fire(new s.ErrorEvent(y));else if(S){const{HTMLImageElement:C}=s.window;this.image=S instanceof C?s.exported.getImageData(S):S,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,u&&(this.coordinates=u),this._finishLoading()}}))}loaded(){return this._loaded}updateImage(u){return this.image&&u.url?(this._imageRequest&&u.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=u.url,this.load(u.coordinates,this._loaded),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(u){this.map=u,this.load()}onRemove(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),this.texture&&this.texture.destroy()}setCoordinates(u){this.coordinates=u,this._boundsArray=void 0;const m=u.map(s.MercatorCoordinate.fromLngLat);return this.tileID=(function(y){let S=1/0,C=1/0,L=-1/0,O=-1/0;for(const ae of y)S=Math.min(S,ae.x),C=Math.min(C,ae.y),L=Math.max(L,ae.x),O=Math.max(O,ae.y);const $=Math.max(L-S,O-C),q=Math.max(0,Math.floor(-Math.log($)/Math.LN2)),K=Math.pow(2,q);return new s.CanonicalTileID(q,Math.floor((S+L)/2*K),Math.floor((C+O)/2*K))})(m),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(u){for(const $ in this.tiles){const q=this.tiles[$];q.state!=="loaded"&&(q.state="loaded",q.texture=this.texture)}if(this._boundsArray)return;const m=s.tileTransform(this.tileID,this.map.transform.projection),[y,S,C,L]=this.coordinates.map(($=>{const q=m.projection.project($[0],$[1]);return s.getTilePoint(m,q)._round()}));this.perspectiveTransform=(function($,q,K,ae,pe,be,Se,xe,Ce,le){const ye=Kn(0,0,$,0,0,q,$,q),Pe=Kn(K,ae,pe,be,Se,xe,Ce,le);return s.multiply$1(Pe,s.adjoint(ye,ye),Pe),[Pe[6]/Pe[8]*$/s.EXTENT,Pe[7]/Pe[8]*q/s.EXTENT]})(this.width,this.height,y.x,y.y,S.x,S.y,L.x,L.y,C.x,C.y);const O=this._boundsArray=new s.StructArrayLayout4i8;O.emplaceBack(y.x,y.y,0,0),O.emplaceBack(S.x,S.y,s.EXTENT,0),O.emplaceBack(L.x,L.y,0,s.EXTENT),O.emplaceBack(C.x,C.y,s.EXTENT,s.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=u.createVertexBuffer(O,s.boundsAttributes.members),this.boundsSegments=s.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const u=this.map.painter.context,m=u.gl;this._dirty&&(this.texture?this.texture.update(this.image):(this.texture=new s.Texture(u,this.image,m.RGBA),this.texture.bind(m.LINEAR,m.CLAMP_TO_EDGE)),this._dirty=!1),this._prepareData(u)}loadTile(u,m){this.tileID&&this.tileID.equals(u.tileID.canonical)?(this.tiles[String(u.tileID.wrap)]=u,u.buckets={},m(null)):(u.state="errored",m(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const jn={vector:dn,raster:rn,"raster-dem":class extends rn{constructor(v,u,m,y){super(v,u,m,y),this.type="raster-dem",this.maxzoom=22,this._options=s.extend({type:"raster-dem"},u),this.encoding=u.encoding||"mapbox"}loadTile(v,u){const m=this.map._requestManager.normalizeTileURL(v.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function y(S,C){S&&(v.state="errored",u(S)),C&&(v.dem=C,v.dem.onDeserialize(),v.needsHillshadePrepare=!0,v.needsDEMTextureUpload=!0,v.state="loaded",u(null))}v.request=s.getImage(this.map._requestManager.transformRequest(m,s.ResourceType.Tile),(function(S,C,L,O){if(delete v.request,v.aborted)v.state="unloaded",u(null);else if(S)v.state="errored",u(S);else if(C){this.map._refreshExpiredTiles&&v.setExpiryData({cacheControl:L,expires:O});const $=s.window.ImageBitmap&&C instanceof s.window.ImageBitmap&&(Ci==null&&(Ci=s.window.OffscreenCanvas&&new s.window.OffscreenCanvas(1,1).getContext("2d")&&typeof s.window.createImageBitmap=="function"),Ci),q=1-(C.width-s.prevPowerOfTwo(C.width))/2;q<1||v.neighboringTiles||(v.neighboringTiles=this._getNeighboringTiles(v.tileID));const K=$?C:s.exported.getImageData(C,q),ae={uid:v.uid,coord:v.tileID,source:this.id,rawImageData:K,encoding:this.encoding,padding:q};v.actor&&v.state!=="expired"||(v.actor=this.dispatcher.getActor(),v.actor.send("loadDEMTile",ae,y.bind(this),void 0,!0))}}).bind(this))}_getNeighboringTiles(v){const u=v.canonical,m=Math.pow(2,u.z),y=(u.x-1+m)%m,S=u.x===0?v.wrap-1:v.wrap,C=(u.x+1+m)%m,L=u.x+1===m?v.wrap+1:v.wrap,O={};return O[new s.OverscaledTileID(v.overscaledZ,S,u.z,y,u.y).key]={backfilled:!1},O[new s.OverscaledTileID(v.overscaledZ,L,u.z,C,u.y).key]={backfilled:!1},u.y>0&&(O[new s.OverscaledTileID(v.overscaledZ,S,u.z,y,u.y-1).key]={backfilled:!1},O[new s.OverscaledTileID(v.overscaledZ,v.wrap,u.z,u.x,u.y-1).key]={backfilled:!1},O[new s.OverscaledTileID(v.overscaledZ,L,u.z,C,u.y-1).key]={backfilled:!1}),u.y+1<m&&(O[new s.OverscaledTileID(v.overscaledZ,S,u.z,y,u.y+1).key]={backfilled:!1},O[new s.OverscaledTileID(v.overscaledZ,v.wrap,u.z,u.x,u.y+1).key]={backfilled:!1},O[new s.OverscaledTileID(v.overscaledZ,L,u.z,C,u.y+1).key]={backfilled:!1}),O}unloadTile(v){v.demTexture&&this.map.painter.saveTileTexture(v.demTexture),v.fbo&&(v.fbo.destroy(),delete v.fbo),v.dem&&delete v.dem,delete v.neighboringTiles,v.state="unloaded"}},geojson:class extends s.Evented{constructor(v,u,m,y){super(),this.id=v,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=m.getActor(),this.setEventedParent(y),this._data=u.data,this._options=s.extend({},u),this._collectResourceTiming=u.collectResourceTiming,u.maxzoom!==void 0&&(this.maxzoom=u.maxzoom),u.type&&(this.type=u.type),u.attribution&&(this.attribution=u.attribution),this.promoteId=u.promoteId;const S=s.EXTENT/this.tileSize;this.workerOptions=s.extend({source:this.id,cluster:u.cluster||!1,geojsonVtOptions:{buffer:(u.buffer!==void 0?u.buffer:128)*S,tolerance:(u.tolerance!==void 0?u.tolerance:.375)*S,extent:s.EXTENT,maxZoom:this.maxzoom,lineMetrics:u.lineMetrics||!1,generateId:u.generateId||!1},superclusterOptions:{maxZoom:u.clusterMaxZoom!==void 0?u.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,u.clusterMinPoints||2),extent:s.EXTENT,radius:(u.clusterRadius!==void 0?u.clusterRadius:50)*S,log:!1,generateId:u.generateId||!1},clusterProperties:u.clusterProperties,filter:u.filter},u.workerOptions)}onAdd(v){this.map=v,this.setData(this._data)}setData(v){return this._data=v,this._updateWorkerData(),this}getClusterExpansionZoom(v,u){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:v,source:this.id},u),this}getClusterChildren(v,u){return this.actor.send("geojson.getClusterChildren",{clusterId:v,source:this.id},u),this}getClusterLeaves(v,u,m,y){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:v,limit:u,offset:m},y),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new s.Event("dataloading",{dataType:"source"})),this._loaded=!1;const v=s.extend({},this.workerOptions),u=this._data;typeof u=="string"?(v.request=this.map._requestManager.transformRequest(s.exported.resolveURL(u),s.ResourceType.Source),v.request.collectResourceTiming=this._collectResourceTiming):v.data=JSON.stringify(u),this._pendingLoad=this.actor.send(`${this.type}.loadData`,v,((m,y)=>{if(this._loaded=!0,this._pendingLoad=null,m)this.fire(new s.ErrorEvent(m));else{const S={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&y&&y.resourceTiming&&y.resourceTiming[this.id]&&(S.resourceTiming=y.resourceTiming[this.id]),this.fire(new s.Event("data",S)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)}))}loaded(){return this._loaded}loadTile(v,u){const m=v.actor?"reloadTile":"loadTile";v.actor=this.actor,v.request=this.actor.send(m,{type:this.type,uid:v.uid,tileID:v.tileID,tileZoom:v.tileZoom,zoom:v.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:s.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},((y,S)=>(delete v.request,v.unloadVectorData(),v.aborted?u(null):y?u(y):(v.loadVectorData(S,this.map.painter,m==="reloadTile"),u(null)))),void 0,m==="loadTile")}abortTile(v){v.request&&(v.request.cancel(),delete v.request),v.aborted=!0}unloadTile(v){v.unloadVectorData(),this.actor.send("removeTile",{uid:v.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return s.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends Jn{constructor(v,u,m,y){super(v,u,m,y),this.roundZoom=!0,this.type="video",this.options=u}load(){this._loaded=!1;const v=this.options;this.urls=[];for(const u of v.urls)this.urls.push(this.map._requestManager.transformRequest(u,s.ResourceType.Source).url);s.getVideo(this.urls,((u,m)=>{this._loaded=!0,u?this.fire(new s.ErrorEvent(u)):m&&(this.video=m,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading())}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(v){if(this.video){const u=this.video.seekable;v<u.start(0)||v>u.end(0)?this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${u.start(0)} and ${u.end(0)}-second mark.`))):this.video.currentTime=v}}getVideo(){return this.video}onAdd(v){this.map||(this.map=v,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const v=this.map.painter.context,u=v.gl;this.texture?this.video.paused||(this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE),u.texSubImage2D(u.TEXTURE_2D,0,0,0,u.RGBA,u.UNSIGNED_BYTE,this.video)):(this.texture=new s.Texture(v,this.video,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(v)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:Jn,canvas:class extends Jn{constructor(v,u,m,y){super(v,u,m,y),u.coordinates?Array.isArray(u.coordinates)&&u.coordinates.length===4&&!u.coordinates.some((S=>!Array.isArray(S)||S.length!==2||S.some((C=>typeof C!="number"))))||this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${v}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${v}`,null,'missing required property "coordinates"'))),u.animate&&typeof u.animate!="boolean"&&this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${v}`,null,'optional "animate" property must be a boolean value'))),u.canvas?typeof u.canvas=="string"||u.canvas instanceof s.window.HTMLCanvasElement||this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${v}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${v}`,null,'missing required property "canvas"'))),this.options=u,this.animate=u.animate===void 0||u.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof s.window.HTMLCanvasElement?this.options.canvas:s.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new s.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(v){this.map=v,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let v=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,v=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,v=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const u=this.map.painter.context;this.texture?(v||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new s.Texture(u,this.canvas,u.gl.RGBA,{premultiply:!0}),this._prepareData(u)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const v of[this.canvas.width,this.canvas.height])if(isNaN(v)||v<=0)return!0;return!1}},custom:class extends s.Evented{constructor(v,u,m,y){super(),this.id=v,this.type="custom",this._dataType="raster",this._dispatcher=m,this._implementation=u,this.setEventedParent(y),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new s.ErrorEvent(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new s.ErrorEvent(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new ht(this._implementation.bounds,this.minzoom,this.maxzoom)),u.update=this._update.bind(this),u.clearTiles=this._clearTiles.bind(this),u.coveringTiles=this._coveringTiles.bind(this),s.extend(this,s.pick(u,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return s.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(v){this._map=v,this._loaded=!1,this.fire(new s.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(v),this.load()}onRemove(v){this._implementation.onRemove&&this._implementation.onRemove(v)}hasTile(v){if(this._implementation.hasTile){const{x:u,y:m,z:y}=v.canonical;return this._implementation.hasTile({x:u,y:m,z:y})}return!this.tileBounds||this.tileBounds.contains(v.canonical)}loadTile(v,u){const{x:m,y,z:S}=v.tileID.canonical,C=new s.window.AbortController;v.request=Promise.resolve(this._implementation.loadTile({x:m,y,z:S},{signal:C.signal})).then((function(L){return delete v.request,v.aborted?(v.state="unloaded",u(null)):L===void 0?(v.state="errored",u(null)):L===null?(this.loadTileData(v,{width:this.tileSize,height:this.tileSize,data:null}),v.state="loaded",u(null)):(function(O){return O instanceof s.window.ImageData||O instanceof s.window.HTMLCanvasElement||O instanceof s.window.ImageBitmap||O instanceof s.window.HTMLImageElement})(L)?(this.loadTileData(v,L),v.state="loaded",void u(null)):(v.state="errored",u(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}).bind(this)).catch((L=>{L.code!==20&&(v.state="errored",u(L))})),v.request.cancel=()=>C.abort()}loadTileData(v,u){rn.loadTileData(v,u,this._map.painter)}unloadTileData(v){rn.unloadTileData(v,this._map.painter)}unloadTile(v,u){if(this.unloadTileData(v),this._implementation.unloadTile){const{x:m,y,z:S}=v.tileID.canonical;this._implementation.unloadTile({x:m,y,z:S})}u()}abortTile(v,u){v.request&&v.request.cancel&&(v.request.cancel(),delete v.request),u()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map((v=>({x:v.canonical.x,y:v.canonical.y,z:v.canonical.z})))}_clearTiles(){this._map.style._clearSource(this.id)}_update(){this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"}))}}},ai=function(v,u,m,y){const S=new jn[u.type](v,u,m,y);if(S.id!==v)throw new Error(`Expected Source id to be ${v} instead of ${S.id}`);return s.bindAll(["load","abort","unload","serialize","prepare"],S),S};function Xn(v,u){const m=s.identity([]);return s.scale(m,m,[.5*v.width,.5*-v.height,1]),s.translate(m,m,[1,-1,0]),s.multiply(m,m,v.calculateProjMatrix(u.toUnwrapped())),Float32Array.from(m)}function Ri(v,u,m,y,S,C,L,O=!1){const $=v.tilesIn(y,L,O);$.sort(is);const q=[];for(const ae of $)q.push({wrappedTileID:ae.tile.tileID.wrapped().key,queryResults:ae.tile.queryRenderedFeatures(u,m,v._state,ae,S,C,Xn(v.transform,ae.tile.tileID),O)});const K=(function(ae){const pe={},be={};for(const Se of ae){const xe=Se.queryResults,Ce=Se.wrappedTileID,le=be[Ce]=be[Ce]||{};for(const ye in xe){const Pe=xe[ye],Le=le[ye]=le[ye]||{},We=pe[ye]=pe[ye]||[];for(const qe of Pe)Le[qe.featureIndex]||(Le[qe.featureIndex]=!0,We.push(qe))}}return pe})(q);for(const ae in K)K[ae].forEach((pe=>{const be=pe.feature,Se=be.layer;Se&&Se.type!=="background"&&Se.type!=="sky"&&(be.source=Se.source,Se["source-layer"]&&(be.sourceLayer=Se["source-layer"]),be.state=be.id!==void 0?v.getFeatureState(Se["source-layer"],be.id):{})}));return K}function mr(v,u){const m=v.getRenderableIds().map((C=>v.getTileByID(C))),y=[],S={};for(let C=0;C<m.length;C++){const L=m[C],O=L.tileID.canonical.key;S[O]||(S[O]=!0,L.querySourceFeatures(y,u))}return y}function is(v,u){const m=v.tileID,y=u.tileID;return m.overscaledZ-y.overscaledZ||m.canonical.y-y.canonical.y||m.wrap-y.wrap||m.canonical.x-y.canonical.x}function Tr(){return Ae.workerClass!=null?new Ae.workerClass:new s.window.Worker(Ae.workerUrl)}const Wo="mapboxgl_preloaded_worker_pool";class rs{constructor(){this.active={}}acquire(u){if(!this.workers)for(this.workers=[];this.workers.length<rs.workerCount;)this.workers.push(new Tr);return this.active[u]=!0,this.workers.slice()}release(u){delete this.active[u],this.numActive()===0&&(this.workers.forEach((m=>{m.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[Wo]}numActive(){return Object.keys(this.active).length}}let Or;function Hr(){return Or||(Or=new rs),Or}function Es(v,u){const m={};for(const y in v)y!=="ref"&&(m[y]=v[y]);return s.refProperties.forEach((y=>{y in u&&(m[y]=u[y])})),m}function zs(v){v=v.slice();const u=Object.create(null);for(let m=0;m<v.length;m++)u[v[m].id]=v[m];for(let m=0;m<v.length;m++)"ref"in v[m]&&(v[m]=Es(v[m],u[v[m].ref]));return v}rs.workerCount=2;const qn={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function fa(v,u,m){m.push({command:qn.addSource,args:[v,u[v]]})}function Cs(v,u,m){u.push({command:qn.removeSource,args:[v]}),m[v]=!0}function Ho(v,u,m,y){Cs(v,m,y),fa(v,u,m)}function Ka(v,u,m){let y;for(y in v[m])if(v[m].hasOwnProperty(y)&&y!=="data"&&!p(v[m][y],u[m][y]))return!1;for(y in u[m])if(u[m].hasOwnProperty(y)&&y!=="data"&&!p(v[m][y],u[m][y]))return!1;return!0}function Eo(v,u,m,y,S,C){let L;for(L in u=u||{},v=v||{})v.hasOwnProperty(L)&&(p(v[L],u[L])||m.push({command:C,args:[y,L,u[L],S]}));for(L in u)u.hasOwnProperty(L)&&!v.hasOwnProperty(L)&&(p(v[L],u[L])||m.push({command:C,args:[y,L,u[L],S]}))}function Co(v){return v.id}function Xa(v,u){return v[u.id]=u,v}class fc{constructor(u,m){this.reset(u,m)}reset(u,m){this.points=u||[],this._distances=[0];for(let y=1;y<this.points.length;y++)this._distances[y]=this._distances[y-1]+this.points[y].dist(this.points[y-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(m||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(u){if(this.points.length===1)return this.points[0];u=s.clamp(u,0,1);let m=1,y=this._distances[m];const S=u*this.paddedLength+this.padding;for(;y<S&&m<this._distances.length;)y=this._distances[++m];const C=m-1,L=this._distances[C],O=y-L,$=O>0?(S-L)/O:0;return this.points[C].mult(1-$).add(this.points[m].mult($))}}class Go{constructor(u,m,y){const S=this.boxCells=[],C=this.circleCells=[];this.xCellCount=Math.ceil(u/y),this.yCellCount=Math.ceil(m/y);for(let L=0;L<this.xCellCount*this.yCellCount;L++)S.push([]),C.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=u,this.height=m,this.xScale=this.xCellCount/u,this.yScale=this.yCellCount/m,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(u,m,y,S,C){this._forEachCell(m,y,S,C,this._insertBoxCell,this.boxUid++),this.boxKeys.push(u),this.bboxes.push(m),this.bboxes.push(y),this.bboxes.push(S),this.bboxes.push(C)}insertCircle(u,m,y,S){this._forEachCell(m-S,y-S,m+S,y+S,this._insertCircleCell,this.circleUid++),this.circleKeys.push(u),this.circles.push(m),this.circles.push(y),this.circles.push(S)}_insertBoxCell(u,m,y,S,C,L){this.boxCells[C].push(L)}_insertCircleCell(u,m,y,S,C,L){this.circleCells[C].push(L)}_query(u,m,y,S,C,L){if(y<0||u>this.width||S<0||m>this.height)return!C&&[];const O=[];if(u<=0&&m<=0&&this.width<=y&&this.height<=S){if(C)return!0;for(let $=0;$<this.boxKeys.length;$++)O.push({key:this.boxKeys[$],x1:this.bboxes[4*$],y1:this.bboxes[4*$+1],x2:this.bboxes[4*$+2],y2:this.bboxes[4*$+3]});for(let $=0;$<this.circleKeys.length;$++){const q=this.circles[3*$],K=this.circles[3*$+1],ae=this.circles[3*$+2];O.push({key:this.circleKeys[$],x1:q-ae,y1:K-ae,x2:q+ae,y2:K+ae})}return L?O.filter(L):O}return this._forEachCell(u,m,y,S,this._queryCell,O,{hitTest:C,seenUids:{box:{},circle:{}}},L),C?O.length>0:O}_queryCircle(u,m,y,S,C){const L=u-y,O=u+y,$=m-y,q=m+y;if(O<0||L>this.width||q<0||$>this.height)return!S&&[];const K=[];return this._forEachCell(L,$,O,q,this._queryCellCircle,K,{hitTest:S,circle:{x:u,y:m,radius:y},seenUids:{box:{},circle:{}}},C),S?K.length>0:K}query(u,m,y,S,C){return this._query(u,m,y,S,!1,C)}hitTest(u,m,y,S,C){return this._query(u,m,y,S,!0,C)}hitTestCircle(u,m,y,S){return this._queryCircle(u,m,y,!0,S)}_queryCell(u,m,y,S,C,L,O,$){const q=O.seenUids,K=this.boxCells[C];if(K!==null){const pe=this.bboxes;for(const be of K)if(!q.box[be]){q.box[be]=!0;const Se=4*be;if(u<=pe[Se+2]&&m<=pe[Se+3]&&y>=pe[Se+0]&&S>=pe[Se+1]&&(!$||$(this.boxKeys[be]))){if(O.hitTest)return L.push(!0),!0;L.push({key:this.boxKeys[be],x1:pe[Se],y1:pe[Se+1],x2:pe[Se+2],y2:pe[Se+3]})}}}const ae=this.circleCells[C];if(ae!==null){const pe=this.circles;for(const be of ae)if(!q.circle[be]){q.circle[be]=!0;const Se=3*be;if(this._circleAndRectCollide(pe[Se],pe[Se+1],pe[Se+2],u,m,y,S)&&(!$||$(this.circleKeys[be]))){if(O.hitTest)return L.push(!0),!0;{const xe=pe[Se],Ce=pe[Se+1],le=pe[Se+2];L.push({key:this.circleKeys[be],x1:xe-le,y1:Ce-le,x2:xe+le,y2:Ce+le})}}}}}_queryCellCircle(u,m,y,S,C,L,O,$){const q=O.circle,K=O.seenUids,ae=this.boxCells[C];if(ae!==null){const be=this.bboxes;for(const Se of ae)if(!K.box[Se]){K.box[Se]=!0;const xe=4*Se;if(this._circleAndRectCollide(q.x,q.y,q.radius,be[xe+0],be[xe+1],be[xe+2],be[xe+3])&&(!$||$(this.boxKeys[Se])))return L.push(!0),!0}}const pe=this.circleCells[C];if(pe!==null){const be=this.circles;for(const Se of pe)if(!K.circle[Se]){K.circle[Se]=!0;const xe=3*Se;if(this._circlesCollide(be[xe],be[xe+1],be[xe+2],q.x,q.y,q.radius)&&(!$||$(this.circleKeys[Se])))return L.push(!0),!0}}}_forEachCell(u,m,y,S,C,L,O,$){const q=this._convertToXCellCoord(u),K=this._convertToYCellCoord(m),ae=this._convertToXCellCoord(y),pe=this._convertToYCellCoord(S);for(let be=q;be<=ae;be++)for(let Se=K;Se<=pe;Se++)if(C.call(this,u,m,y,S,this.xCellCount*Se+be,L,O,$))return}_convertToXCellCoord(u){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(u*this.xScale)))}_convertToYCellCoord(u){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(u*this.yScale)))}_circlesCollide(u,m,y,S,C,L){const O=S-u,$=C-m,q=y+L;return q*q>O*O+$*$}_circleAndRectCollide(u,m,y,S,C,L,O){const $=(L-S)/2,q=Math.abs(u-(S+$));if(q>$+y)return!1;const K=(O-C)/2,ae=Math.abs(m-(C+K));if(ae>K+y)return!1;if(q<=$||ae<=K)return!0;const pe=q-$,be=ae-K;return pe*pe+be*be<=y*y}}const ko={unknown:0,flipRequired:1,flipNotRequired:2},zl=Math.tan(85*Math.PI/180);function Ot(v,u,m,y,S,C,L){const O=s.create();if(m)if(C.name==="globe"){const $=s.calculateGlobeLabelMatrix(S,u);s.multiply(O,O,$)}else{const $=W([],L);O[0]=$[0],O[1]=$[1],O[4]=$[2],O[5]=$[3],y||s.rotateZ(O,O,S.angle)}else s.multiply(O,S.labelPlaneMatrix,v);return O}function ma(v,u,m,y,S,C,L){const O=Ot(v,u,m,y,S,C,L);return C.name==="globe"&&m||(O[2]=O[6]=O[10]=O[14]=0),O}function Ui(v,u,m,y,S,C,L){if(m){if(C.name==="globe"){const O=Ot(v,u,m,y,S,C,L);return s.invert(O,O),s.multiply(O,v,O),O}{const O=s.clone(v),$=s.identity([]);return $[0]=L[0],$[1]=L[1],$[4]=L[2],$[5]=L[3],s.multiply(O,O,$),y||s.rotateZ(O,O,-S.angle),O}}return S.glCoordMatrix}function Yi(v,u,m,y){const S=[v,u,m,1];m?s.transformMat4$1(S,S,y):ii(S,S,y);const C=S[3];return S[0]/=C,S[1]/=C,S[2]/=C,S}function Nl(v,u){return Math.min(.5+v/u*.5,1.5)}function Ns(v,u){const m=v[0]/v[3],y=v[1]/v[3];return m>=-u[0]&&m<=u[0]&&y>=-u[1]&&y<=u[1]}function mc(v,u,m,y,S,C,L,O,$,q){const K=m.transform,ae=y?v.textSizeData:v.iconSizeData,pe=s.evaluateSizeForZoom(ae,m.transform.zoom),be=K.projection.name==="globe",Se=[256/m.width*2+1,256/m.height*2+1],xe=y?v.text.dynamicLayoutVertexArray:v.icon.dynamicLayoutVertexArray;xe.clear();let Ce=null;be&&(Ce=y?v.text.globeExtVertexArray:v.icon.globeExtVertexArray);const le=v.lineVertexArray,ye=y?v.text.placedSymbolArray:v.icon.placedSymbolArray,Pe=m.transform.width/m.transform.height;let Le,We=!1;for(let qe=0;qe<ye.length;qe++){const Ye=ye.get(qe),{numGlyphs:ut,writingMode:at}=Ye;if(at!==s.WritingMode.vertical||We||Le===s.WritingMode.horizontal||(We=!0),Le=at,(Ye.hidden||at===s.WritingMode.vertical)&&!We){lo(ut,xe);continue}We=!1;const gt=new s.Point(Ye.tileAnchorX,Ye.tileAnchorY);let{x:qt,y:dt,z:Vt}=K.projection.projectTilePoint(gt.x,gt.y,q.canonical);if($){const[Gn,En,Rn]=$(gt);qt+=Gn,dt+=En,Vt+=Rn}const xt=[qt,dt,Vt,1];if(s.transformMat4$1(xt,xt,u),!Ns(xt,Se)){lo(ut,xe);continue}const Zt=Nl(m.transform.cameraToCenterDistance,xt[3]),ft=s.evaluateSizeForFeature(ae,pe,Ye),Et=L?ft/Zt:ft*Zt,Ht=Yi(qt,dt,Vt,S);if(Ht[3]<=0){lo(ut,xe);continue}let Nt={};const Jt=L?null:$,Mn=hn(Ye,Et,!1,O,u,S,C,v.glyphOffsetArray,le,xe,Ce,Ht,gt,Nt,Pe,Jt,K.projection,q,L);We=Mn.useVertical,Jt&&Mn.needsFlipping&&(Nt={}),(Mn.notEnoughRoom||We||Mn.needsFlipping&&hn(Ye,Et,!0,O,u,S,C,v.glyphOffsetArray,le,xe,Ce,Ht,gt,Nt,Pe,Jt,K.projection,q,L).notEnoughRoom)&&lo(ut,xe)}y?(v.text.dynamicLayoutVertexBuffer.updateData(xe),Ce&&v.text.globeExtVertexBuffer.updateData(Ce)):(v.icon.dynamicLayoutVertexBuffer.updateData(xe),Ce&&v.icon.globeExtVertexBuffer.updateData(Ce))}function er(v,u,m,y,S,C,L,O,$,q,K,ae,pe,be,Se,xe){const{lineStartIndex:Ce,glyphStartIndex:le,segment:ye}=O,Pe=le+O.numGlyphs,Le=Ce+O.lineLength,We=u.getoffsetX(le),qe=u.getoffsetX(Pe-1),Ye=pr(v*We,m,y,S,C,L,ye,Ce,Le,$,q,K,ae,pe,!0,be,Se,xe);if(!Ye)return null;const ut=pr(v*qe,m,y,S,C,L,ye,Ce,Le,$,q,K,ae,pe,!0,be,Se,xe);return ut?{first:Ye,last:ut}:null}function pa(v,u,m,y){return v===s.WritingMode.horizontal&&Math.abs(y)>Math.abs(m)?{useVertical:!0}:v===s.WritingMode.vertical?y>0?{needsFlipping:!0}:null:u!==ko.unknown&&(function(S,C){return S===0||Math.abs(C/S)>zl})(m,y)?u===ko.flipRequired?{needsFlipping:!0}:null:m<0?{needsFlipping:!0}:null}function hn(v,u,m,y,S,C,L,O,$,q,K,ae,pe,be,Se,xe,Ce,le,ye){const Pe=u/24,Le=v.lineOffsetX*Pe,We=v.lineOffsetY*Pe,{lineStartIndex:qe,glyphStartIndex:Ye,numGlyphs:ut,segment:at,writingMode:gt,flipState:qt}=v,dt=qe+v.lineLength,Vt=xt=>{if(K){const[Ht,Nt,Jt]=xt.up,Mn=q.length;s.updateGlobeVertexNormal(K,Mn+0,Ht,Nt,Jt),s.updateGlobeVertexNormal(K,Mn+1,Ht,Nt,Jt),s.updateGlobeVertexNormal(K,Mn+2,Ht,Nt,Jt),s.updateGlobeVertexNormal(K,Mn+3,Ht,Nt,Jt)}const[Zt,ft,Et]=xt.point;s.addDynamicAttributes(q,Zt,ft,Et,xt.angle)};if(ut>1){const xt=er(Pe,O,Le,We,m,ae,pe,v,$,C,be,xe,!1,Ce,le,ye);if(!xt)return{notEnoughRoom:!0};if(y&&!m){let[Zt,ft,Et]=xt.first.point,[Ht,Nt,Jt]=xt.last.point;[Zt,ft]=Yi(Zt,ft,Et,L),[Ht,Nt]=Yi(Ht,Nt,Jt,L);const Mn=pa(gt,qt,(Ht-Zt)*Se,Nt-ft);if(v.flipState=Mn&&Mn.needsFlipping?ko.flipRequired:ko.flipNotRequired,Mn)return Mn}Vt(xt.first);for(let Zt=Ye+1;Zt<Ye+ut-1;Zt++){const ft=pr(Pe*O.getoffsetX(Zt),Le,We,m,ae,pe,at,qe,dt,$,C,be,xe,!1,!1,Ce,le,ye);if(!ft)return q.length-=4*(Zt-Ye),{notEnoughRoom:!0};Vt(ft)}Vt(xt.last)}else{if(y&&!m){const Zt=Yi(pe.x,pe.y,0,S),ft=qe+at+1,Et=new s.Point($.getx(ft),$.gety(ft)),Ht=Yi(Et.x,Et.y,0,S),Nt=Ht[3]>0?Ht:Yn(pe,Et,Zt,1,S,void 0,Ce,le.canonical),Jt=pa(gt,qt,(Nt[0]-Zt[0])*Se,Nt[1]-Zt[1]);if(v.flipState=Jt&&Jt.needsFlipping?ko.flipRequired:ko.flipNotRequired,Jt)return Jt}const xt=pr(Pe*O.getoffsetX(Ye),Le,We,m,ae,pe,at,qe,dt,$,C,be,xe,!1,!1,Ce,le,ye);if(!xt)return{notEnoughRoom:!0};Vt(xt)}return{}}function Nn(v,u,m,y,S){const{x:C,y:L,z:O}=y.projectTilePoint(v.x,v.y,u);if(!S)return Yi(C,L,O,m);const[$,q,K]=S(v);return Yi(C+$,L+q,O+K,m)}function Yn(v,u,m,y,S,C,L,O){const $=Nn(v.sub(u)._unit()._add(v),O,S,L,C);return s.sub($,m,$),s.normalize($,$),s.scaleAndAdd($,m,$,y)}function pr(v,u,m,y,S,C,L,O,$,q,K,ae,pe,be,Se,xe,Ce,le){const ye=y?v-u:v+u;let Pe=ye>0?1:-1,Le=0;y&&(Pe*=-1,Le=Math.PI),Pe<0&&(Le+=Math.PI);let We=O+L+(Pe>0?0:1)|0,qe=S,Ye=S,ut=0,at=0;const gt=Math.abs(ye),qt=[],dt=[];let Vt=C,xt=Vt;const Zt=()=>Yn(xt,Vt,Ye,gt-ut+1,K,pe,xe,Ce.canonical);for(;ut+at<=gt;){if(We+=Pe,We<O||We>=$)return null;if(Ye=qe,xt=Vt,qt.push(Ye),be&&dt.push(xt),Vt=new s.Point(q.getx(We),q.gety(We)),qe=ae[We],!qe){const Rn=Nn(Vt,Ce.canonical,K,xe,pe);qe=Rn[3]>0?ae[We]=Rn:Zt()}ut+=at,at=s.distance(Ye,qe)}Se&&pe&&(ae[We]&&(qe=Zt(),at=s.distance(Ye,qe)),ae[We]=qe);const ft=(gt-ut)/at,Et=Vt.sub(xt)._mult(ft)._add(xt),Ht=s.sub([],qe,Ye),Nt=s.scaleAndAdd([],Ye,Ht,ft);let Jt=[0,0,1],Mn=Ht[0],Gn=Ht[1];if(le&&(Jt=xe.upVector(Ce.canonical,Et.x,Et.y),Jt[0]!==0||Jt[1]!==0||Jt[2]!==1)){const Rn=[Jt[2],0,-Jt[0]],gi=s.cross([],Jt,Rn);s.normalize(Rn,Rn),s.normalize(gi,gi),Mn=s.dot(Ht,Rn),Gn=s.dot(Ht,gi)}if(m){const Rn=s.cross([],Jt,Ht);s.normalize(Rn,Rn),s.scaleAndAdd(Nt,Nt,Rn,m*Pe)}const En=Le+Math.atan2(Gn,Mn);return qt.push(Nt),be&&dt.push(Et),{point:Nt,angle:En,path:qt,tilePath:dt,up:Jt}}function lo(v,u){const m=u.length,y=m+4*v;u.resize(y),u.float32.fill(-1/0,4*m,4*y)}function ii(v,u,m){const y=u[0],S=u[1];return v[0]=m[0]*y+m[4]*S+m[12],v[1]=m[1]*y+m[5]*S+m[13],v[3]=m[3]*y+m[7]*S+m[15],v}const Dr=100;class qo{constructor(u,m,y=new Go(u.width+200,u.height+200,25),S=new Go(u.width+200,u.height+200,25)){this.transform=u,this.grid=y,this.ignoredGrid=S,this.pitchfactor=Math.cos(u._pitch)*u.cameraToCenterDistance,this.screenRightBoundary=u.width+Dr,this.screenBottomBoundary=u.height+Dr,this.gridRightBoundary=u.width+200,this.gridBottomBoundary=u.height+200,this.fogState=m}placeCollisionBox(u,m,y,S,C,L,O,$){let q=y.projectedAnchorX,K=y.projectedAnchorY,ae=y.projectedAnchorZ;const pe=y.elevation,be=y.tileID,Se=u.getProjection();if(pe&&be){const[qe,Ye,ut]=Se.upVector(be.canonical,y.tileAnchorX,y.tileAnchorY),at=Se.upVectorScale(be.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;q+=qe*pe*at,K+=Ye*pe*at,ae+=ut*pe*at}const xe=this.projectAndGetPerspectiveRatio(O,q,K,ae,y.tileID,Se.name==="globe"||!!pe||this.transform.pitch>0,Se),Ce=L*xe.perspectiveRatio,le=(y.x1*m+S.x-y.padding)*Ce+xe.point.x,ye=(y.y1*m+S.y-y.padding)*Ce+xe.point.y,Pe=(y.x2*m+S.x+y.padding)*Ce+xe.point.x,Le=(y.y2*m+S.y+y.padding)*Ce+xe.point.y,We=xe.perspectiveRatio<=.55||xe.occluded;return!this.isInsideGrid(le,ye,Pe,Le)||!C&&this.grid.hitTest(le,ye,Pe,Le,$)||We?{box:[],offscreen:!1,occluded:xe.occluded}:{box:[le,ye,Pe,Le],offscreen:this.isOffscreen(le,ye,Pe,Le),occluded:!1}}placeCollisionCircles(u,m,y,S,C,L,O,$,q,K,ae,pe,be,Se,xe){const Ce=[],le=this.transform.elevation,ye=u.getProjection(),Pe=le?le.getAtTileOffsetFunc(xe,this.transform.center.lat,this.transform.worldSize,ye):null,Le=new s.Point(y.tileAnchorX,y.tileAnchorY);let{x:We,y:qe,z:Ye}=ye.projectTilePoint(Le.x,Le.y,xe.canonical);if(Pe){const[Et,Ht,Nt]=Pe(Le);We+=Et,qe+=Ht,Ye+=Nt}const ut=ye.name==="globe",at=this.projectAndGetPerspectiveRatio(O,We,qe,Ye,xe,ut||!!le||this.transform.pitch>0,ye),{perspectiveRatio:gt}=at,qt=(ae?L/gt:L*gt)/s.ONE_EM,dt=Yi(We,qe,Ye,$),Vt=at.signedDistanceFromCamera>0?er(qt,C,y.lineOffsetX*qt,y.lineOffsetY*qt,!1,dt,Le,y,S,$,{},le&&!ae?Pe:null,ae&&!!le,ye,xe,ae):null;let xt=!1,Zt=!1,ft=!0;if(Vt&&!at.occluded){const Et=.5*be*gt+Se,Ht=new s.Point(-100,-100),Nt=new s.Point(this.screenRightBoundary,this.screenBottomBoundary),Jt=new fc,{first:Mn,last:Gn}=Vt,En=Mn.path.length;let Rn=[];for(let An=En-1;An>=1;An--)Rn.push(Mn.path[An]);for(let An=1;An<Gn.path.length;An++)Rn.push(Gn.path[An]);const gi=2.5*Et;q&&(Rn=Rn.map((([An,Oi,Hi],Zi)=>(Pe&&!ut&&(Hi=Pe(Zi<En-1?Mn.tilePath[En-1-Zi]:Gn.tilePath[Zi-En+2])[2]),Yi(An,Oi,Hi,q)))),Rn.some((An=>An[3]<=0))&&(Rn=[]));let pi=[];if(Rn.length>0){let An=1/0,Oi=-1/0,Hi=1/0,Zi=-1/0;for(const Gi of Rn)An=Math.min(An,Gi[0]),Hi=Math.min(Hi,Gi[1]),Oi=Math.max(Oi,Gi[0]),Zi=Math.max(Zi,Gi[1]);Oi>=Ht.x&&An<=Nt.x&&Zi>=Ht.y&&Hi<=Nt.y&&(pi=[Rn.map((Gi=>new s.Point(Gi[0],Gi[1])))],(An<Ht.x||Oi>Nt.x||Hi<Ht.y||Zi>Nt.y)&&(pi=s.clipLine(pi,Ht.x,Ht.y,Nt.x,Nt.y)))}for(const An of pi){Jt.reset(An,.25*Et);let Oi=0;Oi=Jt.length<=.5*Et?1:Math.ceil(Jt.paddedLength/gi)+1;for(let Hi=0;Hi<Oi;Hi++){const Zi=Hi/Math.max(Oi-1,1),Gi=Jt.lerp(Zi),js=Gi.x+Dr,Ps=Gi.y+Dr;Ce.push(js,Ps,Et,0);const Ta=js-Et,Zs=Ps-Et,nr=js+Et,qi=Ps+Et;if(ft=ft&&this.isOffscreen(Ta,Zs,nr,qi),Zt=Zt||this.isInsideGrid(Ta,Zs,nr,qi),!m&&this.grid.hitTestCircle(js,Ps,Et,pe)&&(xt=!0,!K))return{circles:[],offscreen:!1,collisionDetected:xt,occluded:!1}}}}return{circles:!K&&xt||!Zt?[]:Ce,offscreen:ft,collisionDetected:xt,occluded:at.occluded}}queryRenderedSymbols(u){if(u.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const m=[];let y=1/0,S=1/0,C=-1/0,L=-1/0;for(const K of u){const ae=new s.Point(K.x+Dr,K.y+Dr);y=Math.min(y,ae.x),S=Math.min(S,ae.y),C=Math.max(C,ae.x),L=Math.max(L,ae.y),m.push(ae)}const O=this.grid.query(y,S,C,L).concat(this.ignoredGrid.query(y,S,C,L)),$={},q={};for(const K of O){const ae=K.key;if($[ae.bucketInstanceId]===void 0&&($[ae.bucketInstanceId]={}),$[ae.bucketInstanceId][ae.featureIndex])continue;const pe=[new s.Point(K.x1,K.y1),new s.Point(K.x2,K.y1),new s.Point(K.x2,K.y2),new s.Point(K.x1,K.y2)];s.polygonIntersectsPolygon(m,pe)&&($[ae.bucketInstanceId][ae.featureIndex]=!0,q[ae.bucketInstanceId]===void 0&&(q[ae.bucketInstanceId]=[]),q[ae.bucketInstanceId].push(ae.featureIndex))}return q}insertCollisionBox(u,m,y,S,C){(m?this.ignoredGrid:this.grid).insert({bucketInstanceId:y,featureIndex:S,collisionGroupID:C},u[0],u[1],u[2],u[3])}insertCollisionCircles(u,m,y,S,C){const L=m?this.ignoredGrid:this.grid,O={bucketInstanceId:y,featureIndex:S,collisionGroupID:C};for(let $=0;$<u.length;$+=4)L.insertCircle(O,u[$],u[$+1],u[$+2])}projectAndGetPerspectiveRatio(u,m,y,S,C,L,O){const $=[m,y,S,1];let q=!1;S||this.transform.pitch>0?(s.transformMat4$1($,$,u),this.fogState&&C&&O.name!=="globe"&&(q=(function(pe,be,Se,xe,Ce,le){const ye=le.calculateFogTileMatrix(Ce),Pe=[be,Se,xe];return s.transformMat4(Pe,Pe,ye),Je(pe,Pe,le.pitch,le._fov)})(this.fogState,m,y,S,C.toUnwrapped(),this.transform)>.9)):ii($,$,u);const K=$[3];return{point:new s.Point(($[0]/K+1)/2*this.transform.width+Dr,(-$[1]/K+1)/2*this.transform.height+Dr),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(O)/K*.5,1.5),signedDistanceFromCamera:K,occluded:L&&$[2]>K||q}}isOffscreen(u,m,y,S){return y<Dr||u>=this.screenRightBoundary||S<Dr||m>this.screenBottomBoundary}isInsideGrid(u,m,y,S){return y>=0&&u<this.gridRightBoundary&&S>=0&&m<this.gridBottomBoundary}getViewportMatrix(){const u=s.identity([]);return s.translate(u,u,[-100,-100,0]),u}}function Xs(v,u,m){const y=u.createTileMatrix(v,v.worldSize,m.toUnwrapped());return s.multiply(new Float32Array(16),v.projMatrix,y)}function Ir(v,u,m){if(u.projection.name===m.projection.name)return v.projMatrix;const y=m.clone();return y.setProjection(u.projection),Xs(y,u.getProjection(),v)}function ji(v,u,m){return u.name===m.projection.name?v.projMatrix:Xs(m,u,v)}class yu{constructor(u,m,y,S){this.opacity=u?Math.max(0,Math.min(1,u.opacity+(u.placed?m:-m))):S&&y?1:0,this.placed=y}isHidden(){return this.opacity===0&&!this.placed}}class $s{constructor(u,m,y,S,C,L=!1){this.text=new yu(u?u.text:null,m,y,C),this.icon=new yu(u?u.icon:null,m,S,C),this.clipped=L}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class ul{constructor(u,m,y,S=!1){this.text=u,this.icon=m,this.skipFade=y,this.clipped=S}}class $l{constructor(){this.invProjMatrix=s.create(),this.viewportMatrix=s.create(),this.circles=[]}}class ks{constructor(u,m,y,S,C){this.bucketInstanceId=u,this.featureIndex=m,this.sourceLayerIndex=y,this.bucketIndex=S,this.tileID=C}}class Rh{constructor(u){this.crossSourceCollisions=u,this.maxGroupID=0,this.collisionGroups={}}get(u){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[u]){const m=++this.maxGroupID;this.collisionGroups[u]={ID:m,predicate:y=>y.collisionGroupID===m}}return this.collisionGroups[u]}}function Io(v,u,m,y,S){const{horizontalAlign:C,verticalAlign:L}=s.getAnchorAlignment(v),O=-(C-.5)*u,$=-(L-.5)*m,q=s.evaluateVariableOffset(v,y);return new s.Point(O+q[0]*S,$+q[1]*S)}function dl(v,u,m,y,S){const C=new s.Point(v,u);return m&&C._rotate(y?S:-S),C}class Ao{constructor(u,m,y,S,C){this.transform=u.clone(),this.projection=u.projection.name,this.collisionIndex=new qo(this.transform,C),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=m,this.retainedQueryData={},this.collisionGroups=new Rh(y),this.collisionCircleArrays={},this.prevPlacement=S,S&&(S.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(u,m,y,S){const C=y.getBucket(m),L=y.latestFeatureIndex;if(!C||!L||m.id!==C.layerIds[0])return;const O=C.layers[0].layout,$=y.collisionBoxArray,q=Math.pow(2,this.transform.zoom-y.tileID.overscaledZ),K=y.tileSize/s.EXTENT,ae=y.tileID.toUnwrapped();this.transform.setProjection(C.projection);const pe=(be=y.tileID,Se=C.getProjection(),xe=this.transform,Se.name===this.projection?xe.calculateProjMatrix(be.toUnwrapped()):Xs(xe,Se,be));var be,Se,xe;const Ce=O.get("text-pitch-alignment")==="map",le=O.get("text-rotation-alignment")==="map";m.compileFilter();const ye=m.dynamicFilter(),Pe=m.dynamicFilterNeedsFeature(),Le=this.transform.calculatePixelsToTileUnitsMatrix(y),We=ma(pe,y.tileID.canonical,Ce,le,this.transform,C.getProjection(),Le);let qe=null;if(Ce){const at=Ui(pe,y.tileID.canonical,Ce,le,this.transform,C.getProjection(),Le);qe=s.multiply([],this.transform.labelPlaneMatrix,at)}let Ye=null;ye&&y.latestFeatureIndex&&(Ye={unwrappedTileID:ae,dynamicFilter:ye,dynamicFilterNeedsFeature:Pe,featureIndex:y.latestFeatureIndex}),this.retainedQueryData[C.bucketInstanceId]=new ks(C.bucketInstanceId,L,C.sourceLayerIndex,C.index,y.tileID);const ut={bucket:C,layout:O,posMatrix:pe,textLabelPlaneMatrix:We,labelToScreenMatrix:qe,clippingData:Ye,scale:q,textPixelRatio:K,holdingForFade:y.holdingForFade(),collisionBoxArray:$,partiallyEvaluatedTextSize:s.evaluateSizeForZoom(C.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:s.evaluateSizeForZoom(C.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(C.sourceID)};if(S)for(const at of C.sortKeyRanges){const{sortKey:gt,symbolInstanceStart:qt,symbolInstanceEnd:dt}=at;u.push({sortKey:gt,symbolInstanceStart:qt,symbolInstanceEnd:dt,parameters:ut})}else u.push({symbolInstanceStart:0,symbolInstanceEnd:C.symbolInstances.length,parameters:ut})}attemptAnchorPlacement(u,m,y,S,C,L,O,$,q,K,ae,pe,be,Se,xe,Ce,le,ye){const{textOffset0:Pe,textOffset1:Le,crossTileID:We}=pe,qe=[Pe,Le],Ye=Io(u,y,S,qe,C),ut=this.collisionIndex.placeCollisionBox(Se,C,m,dl(Ye.x,Ye.y,L,O,this.transform.angle),ae,$,q,K.predicate);if(Ce){const at=Se.getSymbolInstanceIconSize(ye,this.transform.zoom,pe.placedIconSymbolIndex);if(this.collisionIndex.placeCollisionBox(Se,at,Ce,dl(Ye.x,Ye.y,L,O,this.transform.angle),ae,$,q,K.predicate).box.length===0)return}if(ut.box.length>0){let at;return this.prevPlacement&&this.prevPlacement.variableOffsets[We]&&this.prevPlacement.placements[We]&&this.prevPlacement.placements[We].text&&(at=this.prevPlacement.variableOffsets[We].anchor),this.variableOffsets[We]={textOffset:qe,width:y,height:S,anchor:u,textScale:C,prevAnchor:at},this.markUsedJustification(Se,u,pe,xe),Se.allowVerticalPlacement&&(this.markUsedOrientation(Se,xe,pe),this.placedOrientations[We]=xe),{shift:Ye,placedGlyphBoxes:ut}}}placeLayerBucketPart(u,m,y,S){const{bucket:C,layout:L,posMatrix:O,textLabelPlaneMatrix:$,labelToScreenMatrix:q,clippingData:K,textPixelRatio:ae,holdingForFade:pe,collisionBoxArray:be,partiallyEvaluatedTextSize:Se,partiallyEvaluatedIconSize:xe,collisionGroup:Ce}=u.parameters,le=L.get("text-optional"),ye=L.get("icon-optional"),Pe=L.get("text-allow-overlap"),Le=L.get("icon-allow-overlap"),We=L.get("text-rotation-alignment")==="map",qe=L.get("text-pitch-alignment")==="map",Ye=L.get("icon-text-fit")!=="none",ut=L.get("symbol-z-order")==="viewport-y";this.transform.setProjection(C.projection);let at=Pe&&(Le||!C.hasIconData()||ye),gt=Le&&(Pe||!C.hasTextData()||le);!C.collisionArrays&&be&&C.deserializeCollisionBoxes(be),y&&S&&C.updateCollisionDebugBuffers(this.transform.zoom,be);const qt=(dt,Vt,xt)=>{const{crossTileID:Zt,numVerticalGlyphVertices:ft}=dt;if(K){const nr={zoom:this.transform.zoom,pitch:this.transform.pitch};let qi=null;if(K.dynamicFilterNeedsFeature){const Ai=this.retainedQueryData[C.bucketInstanceId];qi=K.featureIndex.loadFeature({featureIndex:dt.featureIndex,bucketIndex:Ai.bucketIndex,sourceLayerIndex:Ai.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,K.dynamicFilter)(nr,qi,this.retainedQueryData[C.bucketInstanceId].tileID.canonical,new s.Point(dt.tileAnchorX,dt.tileAnchorY),this.transform.calculateDistanceTileData(K.unwrappedTileID)))return this.placements[Zt]=new ul(!1,!1,!1,!0),void m.add(Zt)}if(m.has(Zt))return;if(pe)return void(this.placements[Zt]=new ul(!1,!1,!1));let Et=!1,Ht=!1,Nt=!0,Jt=!1,Mn=!1,Gn=null,En={box:null,offscreen:null,occluded:null},Rn={box:null},gi=null,pi=null,An=null,Oi=0,Hi=0,Zi=0;xt.textFeatureIndex?Oi=xt.textFeatureIndex:dt.useRuntimeCollisionCircles&&(Oi=dt.featureIndex),xt.verticalTextFeatureIndex&&(Hi=xt.verticalTextFeatureIndex);const Gi=nr=>{nr.tileID=this.retainedQueryData[C.bucketInstanceId].tileID;const qi=this.transform.elevation;(qi||nr.elevation)&&(nr.elevation=qi?qi.getAtTileOffset(nr.tileID,nr.tileAnchorX,nr.tileAnchorY):0)},js=xt.textBox;if(js){Gi(js);const nr=Ai=>{let Br=s.WritingMode.horizontal;if(C.allowVerticalPlacement&&!Ai&&this.prevPlacement){const Js=this.prevPlacement.placedOrientations[Zt];Js&&(this.placedOrientations[Zt]=Js,Br=Js,this.markUsedOrientation(C,Br,dt))}return Br},qi=(Ai,Br)=>{if(C.allowVerticalPlacement&&ft>0&&xt.verticalTextBox){for(const Js of C.writingModes)if(Js===s.WritingMode.vertical?(En=Br(),Rn=En):En=Ai(),En&&En.box&&En.box.length)break}else En=Ai()};if(L.get("text-variable-anchor")){let Ai=L.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[Zt]){const or=this.prevPlacement.variableOffsets[Zt];Ai.indexOf(or.anchor)>0&&(Ai=Ai.filter((ho=>ho!==or.anchor)),Ai.unshift(or.anchor))}const Br=(or,ho,Vd)=>{const Jc=C.getSymbolInstanceTextSize(Se,dt,this.transform.zoom,Vt),Bd=(or.x2-or.x1)*Jc+2*or.padding,il=(or.y2-or.y1)*Jc+2*or.padding,ql=Ye&&!Le?ho:null;ql&&Gi(ql);let Fd={box:[],offscreen:!1,occluded:!1};const Og=Pe?2*Ai.length:Ai.length;for(let Fm=0;Fm<Og;++Fm){const z_=this.attemptAnchorPlacement(Ai[Fm%Ai.length],or,Bd,il,Jc,We,qe,ae,O,Ce,Fm>=Ai.length,dt,Vt,C,Vd,ql,Se,xe);if(z_&&(Fd=z_.placedGlyphBoxes,Fd&&Fd.box&&Fd.box.length)){Et=!0,Gn=z_.shift;break}}return Fd};qi((()=>Br(js,xt.iconBox,s.WritingMode.horizontal)),(()=>{const or=xt.verticalTextBox;return or&&Gi(or),C.allowVerticalPlacement&&!(En&&En.box&&En.box.length)&&ft>0&&or?Br(or,xt.verticalIconBox,s.WritingMode.vertical):{box:null,offscreen:null,occluded:null}})),En&&(Et=En.box,Nt=En.offscreen,Jt=En.occluded);const Js=nr(!(!En||!En.box));if(!Et&&this.prevPlacement){const or=this.prevPlacement.variableOffsets[Zt];or&&(this.variableOffsets[Zt]=or,this.markUsedJustification(C,or.anchor,dt,Js))}}else{const Ai=(Br,Js)=>{const or=C.getSymbolInstanceTextSize(Se,dt,this.transform.zoom,Vt),ho=this.collisionIndex.placeCollisionBox(C,or,Br,new s.Point(0,0),Pe,ae,O,Ce.predicate);return ho&&ho.box&&ho.box.length&&(this.markUsedOrientation(C,Js,dt),this.placedOrientations[Zt]=Js),ho};qi((()=>Ai(js,s.WritingMode.horizontal)),(()=>{const Br=xt.verticalTextBox;return C.allowVerticalPlacement&&ft>0&&Br?(Gi(Br),Ai(Br,s.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}})),nr(!!(En&&En.box&&En.box.length))}}if(gi=En,Et=gi&&gi.box&&gi.box.length>0,Nt=gi&&gi.offscreen,Jt=gi&&gi.occluded,dt.useRuntimeCollisionCircles){const nr=C.text.placedSymbolArray.get(dt.centerJustifiedTextSymbolIndex>=0?dt.centerJustifiedTextSymbolIndex:dt.verticalPlacedTextSymbolIndex),qi=s.evaluateSizeForFeature(C.textSizeData,Se,nr),Ai=L.get("text-padding");pi=this.collisionIndex.placeCollisionCircles(C,Pe,nr,C.lineVertexArray,C.glyphOffsetArray,qi,O,$,q,y,qe,Ce.predicate,dt.collisionCircleDiameter*qi/s.ONE_EM,Ai,this.retainedQueryData[C.bucketInstanceId].tileID),Et=Pe||pi.circles.length>0&&!pi.collisionDetected,Nt=Nt&&pi.offscreen,Jt=pi.occluded}if(xt.iconFeatureIndex&&(Zi=xt.iconFeatureIndex),xt.iconBox){const nr=qi=>{Gi(qi);const Ai=Ye&&Gn?dl(Gn.x,Gn.y,We,qe,this.transform.angle):new s.Point(0,0),Br=C.getSymbolInstanceIconSize(xe,this.transform.zoom,dt.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(C,Br,qi,Ai,Le,ae,O,Ce.predicate)};Rn&&Rn.box&&Rn.box.length&&xt.verticalIconBox?(An=nr(xt.verticalIconBox),Ht=An.box.length>0):(An=nr(xt.iconBox),Ht=An.box.length>0),Nt=Nt&&An.offscreen,Mn=An.occluded}const Ps=le||dt.numHorizontalGlyphVertices===0&&ft===0,Ta=ye||dt.numIconVertices===0;if(Ps||Ta?Ta?Ps||(Ht=Ht&&Et):Et=Ht&&Et:Ht=Et=Ht&&Et,Et&&gi&&gi.box&&this.collisionIndex.insertCollisionBox(gi.box,L.get("text-ignore-placement"),C.bucketInstanceId,Rn&&Rn.box&&Hi?Hi:Oi,Ce.ID),Ht&&An&&this.collisionIndex.insertCollisionBox(An.box,L.get("icon-ignore-placement"),C.bucketInstanceId,Zi,Ce.ID),pi&&(Et&&this.collisionIndex.insertCollisionCircles(pi.circles,L.get("text-ignore-placement"),C.bucketInstanceId,Oi,Ce.ID),y)){const nr=C.bucketInstanceId;let qi=this.collisionCircleArrays[nr];qi===void 0&&(qi=this.collisionCircleArrays[nr]=new $l);for(let Ai=0;Ai<pi.circles.length;Ai+=4)qi.circles.push(pi.circles[Ai+0]),qi.circles.push(pi.circles[Ai+1]),qi.circles.push(pi.circles[Ai+2]),qi.circles.push(pi.collisionDetected?1:0)}const Zs=C.projection.name!=="globe";at=at&&(Zs||!Jt),gt=gt&&(Zs||!Mn),this.placements[Zt]=new ul(Et||at,Ht||gt,Nt||C.justReloaded),m.add(Zt)};if(ut){const dt=C.getSortedSymbolIndexes(this.transform.angle);for(let Vt=dt.length-1;Vt>=0;--Vt){const xt=dt[Vt];qt(C.symbolInstances.get(xt),xt,C.collisionArrays[xt])}}else for(let dt=u.symbolInstanceStart;dt<u.symbolInstanceEnd;dt++)qt(C.symbolInstances.get(dt),dt,C.collisionArrays[dt]);if(y&&C.bucketInstanceId in this.collisionCircleArrays){const dt=this.collisionCircleArrays[C.bucketInstanceId];s.invert(dt.invProjMatrix,O),dt.viewportMatrix=this.collisionIndex.getViewportMatrix()}C.justReloaded=!1}markUsedJustification(u,m,y,S){const{leftJustifiedTextSymbolIndex:C,centerJustifiedTextSymbolIndex:L,rightJustifiedTextSymbolIndex:O,verticalPlacedTextSymbolIndex:$,crossTileID:q}=y,K=s.getAnchorJustification(m),ae=S===s.WritingMode.vertical?$:K==="left"?C:K==="center"?L:K==="right"?O:-1;C>=0&&(u.text.placedSymbolArray.get(C).crossTileID=ae>=0&&C!==ae?0:q),L>=0&&(u.text.placedSymbolArray.get(L).crossTileID=ae>=0&&L!==ae?0:q),O>=0&&(u.text.placedSymbolArray.get(O).crossTileID=ae>=0&&O!==ae?0:q),$>=0&&(u.text.placedSymbolArray.get($).crossTileID=ae>=0&&$!==ae?0:q)}markUsedOrientation(u,m,y){const S=m===s.WritingMode.horizontal||m===s.WritingMode.horizontalOnly?m:0,C=m===s.WritingMode.vertical?m:0,{leftJustifiedTextSymbolIndex:L,centerJustifiedTextSymbolIndex:O,rightJustifiedTextSymbolIndex:$,verticalPlacedTextSymbolIndex:q}=y,K=u.text.placedSymbolArray;L>=0&&(K.get(L).placedOrientation=S),O>=0&&(K.get(O).placedOrientation=S),$>=0&&(K.get($).placedOrientation=S),q>=0&&(K.get(q).placedOrientation=C)}commit(u){this.commitTime=u,this.zoomAtLastRecencyCheck=this.transform.zoom;const m=this.prevPlacement;let y=!1;this.prevZoomAdjustment=m?m.zoomAdjustment(this.transform.zoom):0;const S=m?m.symbolFadeChange(u):1,C=m?m.opacities:{},L=m?m.variableOffsets:{},O=m?m.placedOrientations:{};for(const $ in this.placements){const q=this.placements[$],K=C[$];K?(this.opacities[$]=new $s(K,S,q.text,q.icon,null,q.clipped),y=y||q.text!==K.text.placed||q.icon!==K.icon.placed):(this.opacities[$]=new $s(null,S,q.text,q.icon,q.skipFade,q.clipped),y=y||q.text||q.icon)}for(const $ in C){const q=C[$];if(!this.opacities[$]){const K=new $s(q,S,!1,!1);K.isHidden()||(this.opacities[$]=K,y=y||q.text.placed||q.icon.placed)}}for(const $ in L)this.variableOffsets[$]||!this.opacities[$]||this.opacities[$].isHidden()||(this.variableOffsets[$]=L[$]);for(const $ in O)this.placedOrientations[$]||!this.opacities[$]||this.opacities[$].isHidden()||(this.placedOrientations[$]=O[$]);y?this.lastPlacementChangeTime=u:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=m?m.lastPlacementChangeTime:u)}updateLayerOpacities(u,m){const y=new Set;for(const S of m){const C=S.getBucket(u);C&&S.latestFeatureIndex&&u.id===C.layerIds[0]&&this.updateBucketOpacities(C,y,S.collisionBoxArray)}}updateBucketOpacities(u,m,y){u.hasTextData()&&u.text.opacityVertexArray.clear(),u.hasIconData()&&u.icon.opacityVertexArray.clear(),u.hasIconCollisionBoxData()&&u.iconCollisionBox.collisionVertexArray.clear(),u.hasTextCollisionBoxData()&&u.textCollisionBox.collisionVertexArray.clear();const S=u.layers[0].layout,C=!!u.layers[0].dynamicFilter(),L=new $s(null,0,!1,!1,!0),O=S.get("text-allow-overlap"),$=S.get("icon-allow-overlap"),q=S.get("text-variable-anchor"),K=S.get("text-rotation-alignment")==="map",ae=S.get("text-pitch-alignment")==="map",pe=S.get("icon-text-fit")!=="none",be=new $s(null,0,O&&($||!u.hasIconData()||S.get("icon-optional")),$&&(O||!u.hasTextData()||S.get("text-optional")),!0);!u.collisionArrays&&y&&(u.hasIconCollisionBoxData()||u.hasTextCollisionBoxData())&&u.deserializeCollisionBoxes(y);const Se=(Ce,le,ye)=>{for(let Pe=0;Pe<le/4;Pe++)Ce.opacityVertexArray.emplaceBack(ye)};let xe=0;for(let Ce=0;Ce<u.symbolInstances.length;Ce++){const le=u.symbolInstances.get(Ce),{numHorizontalGlyphVertices:ye,numVerticalGlyphVertices:Pe,crossTileID:Le,numIconVertices:We}=le,qe=m.has(Le);let Ye=this.opacities[Le];qe?Ye=L:Ye||(Ye=be,this.opacities[Le]=Ye),m.add(Le);const ut=ye>0||Pe>0,at=We>0,gt=this.placedOrientations[Le],qt=gt===s.WritingMode.vertical,dt=gt===s.WritingMode.horizontal||gt===s.WritingMode.horizontalOnly;if(!ut&&!at||Ye.isHidden()||xe++,ut){const Vt=tr(Ye.text);Se(u.text,ye,qt?gr:Vt),Se(u.text,Pe,dt?gr:Vt);const xt=Ye.text.isHidden(),{leftJustifiedTextSymbolIndex:Zt,centerJustifiedTextSymbolIndex:ft,rightJustifiedTextSymbolIndex:Et,verticalPlacedTextSymbolIndex:Ht}=le,Nt=u.text.placedSymbolArray,Jt=xt||qt?1:0;Zt>=0&&(Nt.get(Zt).hidden=Jt),ft>=0&&(Nt.get(ft).hidden=Jt),Et>=0&&(Nt.get(Et).hidden=Jt),Ht>=0&&(Nt.get(Ht).hidden=xt||dt?1:0);const Mn=this.variableOffsets[Le];Mn&&this.markUsedJustification(u,Mn.anchor,le,gt);const Gn=this.placedOrientations[Le];Gn&&(this.markUsedJustification(u,"left",le,Gn),this.markUsedOrientation(u,Gn,le))}if(at){const Vt=tr(Ye.icon),{placedIconSymbolIndex:xt,verticalPlacedIconSymbolIndex:Zt}=le,ft=u.icon.placedSymbolArray,Et=Ye.icon.isHidden()?1:0;xt>=0&&(Se(u.icon,We,qt?gr:Vt),ft.get(xt).hidden=Et),Zt>=0&&(Se(u.icon,le.numVerticalIconVertices,dt?gr:Vt),ft.get(Zt).hidden=Et)}if(u.hasIconCollisionBoxData()||u.hasTextCollisionBoxData()){const Vt=u.collisionArrays[Ce];if(Vt){let xt=new s.Point(0,0),Zt=!0;if(Vt.textBox||Vt.verticalTextBox){if(q){const Et=this.variableOffsets[Le];Et?(xt=Io(Et.anchor,Et.width,Et.height,Et.textOffset,Et.textScale),K&&xt._rotate(ae?this.transform.angle:-this.transform.angle)):Zt=!1}C&&(Zt=!Ye.clipped),Vt.textBox&&ga(u.textCollisionBox.collisionVertexArray,Ye.text.placed,!Zt||qt,xt.x,xt.y),Vt.verticalTextBox&&ga(u.textCollisionBox.collisionVertexArray,Ye.text.placed,!Zt||dt,xt.x,xt.y)}const ft=Zt&&!!(!dt&&Vt.verticalIconBox);Vt.iconBox&&ga(u.iconCollisionBox.collisionVertexArray,Ye.icon.placed,ft,pe?xt.x:0,pe?xt.y:0),Vt.verticalIconBox&&ga(u.iconCollisionBox.collisionVertexArray,Ye.icon.placed,!ft,pe?xt.x:0,pe?xt.y:0)}}}if(u.fullyClipped=xe===0,u.sortFeatures(this.transform.angle),this.retainedQueryData[u.bucketInstanceId]&&(this.retainedQueryData[u.bucketInstanceId].featureSortOrder=u.featureSortOrder),u.hasTextData()&&u.text.opacityVertexBuffer&&u.text.opacityVertexBuffer.updateData(u.text.opacityVertexArray),u.hasIconData()&&u.icon.opacityVertexBuffer&&u.icon.opacityVertexBuffer.updateData(u.icon.opacityVertexArray),u.hasIconCollisionBoxData()&&u.iconCollisionBox.collisionVertexBuffer&&u.iconCollisionBox.collisionVertexBuffer.updateData(u.iconCollisionBox.collisionVertexArray),u.hasTextCollisionBoxData()&&u.textCollisionBox.collisionVertexBuffer&&u.textCollisionBox.collisionVertexBuffer.updateData(u.textCollisionBox.collisionVertexArray),u.bucketInstanceId in this.collisionCircleArrays){const Ce=this.collisionCircleArrays[u.bucketInstanceId];u.placementInvProjMatrix=Ce.invProjMatrix,u.placementViewportMatrix=Ce.viewportMatrix,u.collisionCircleArray=Ce.circles,delete this.collisionCircleArrays[u.bucketInstanceId]}}symbolFadeChange(u){return this.fadeDuration===0?1:(u-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(u){return Math.max(0,(this.transform.zoom-u)/1.5)}hasTransitions(u){return this.stale||u-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(u,m){const y=this.zoomAtLastRecencyCheck===m?1-this.zoomAdjustment(m):1;return this.zoomAtLastRecencyCheck=m,this.commitTime+this.fadeDuration*y>u}setStale(){this.stale=!0}}function ga(v,u,m,y,S){v.emplaceBack(u?1:0,m?1:0,y||0,S||0),v.emplaceBack(u?1:0,m?1:0,y||0,S||0),v.emplaceBack(u?1:0,m?1:0,y||0,S||0),v.emplaceBack(u?1:0,m?1:0,y||0,S||0)}const ss=Math.pow(2,25),Wi=Math.pow(2,24),Uc=Math.pow(2,17),hl=Math.pow(2,16),Yr=Math.pow(2,9),os=Math.pow(2,8),bu=Math.pow(2,1);function tr(v){if(v.opacity===0&&!v.placed)return 0;if(v.opacity===1&&v.placed)return 4294967295;const u=v.placed?1:0,m=Math.floor(127*v.opacity);return m*ss+u*Wi+m*Uc+u*hl+m*Yr+u*os+m*bu+u}const gr=0;class fl{constructor(u){this._sortAcrossTiles=u.layout.get("symbol-z-order")!=="viewport-y"&&u.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(u,m,y,S,C){const L=this._bucketParts;for(;this._currentTileIndex<u.length;)if(m.getBucketParts(L,S,u[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,C())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,L.sort(((O,$)=>O.sortKey-$.sortKey)));this._currentPartIndex<L.length;){const O=L[this._currentPartIndex];if(m.placeLayerBucketPart(O,this._seenCrossTileIDs,y,O.symbolInstanceStart===0),this._currentPartIndex++,C())return!0}return!1}}class pc{constructor(u,m,y,S,C,L,O,$){this.placement=new Ao(u,C,L,O,$),this._currentPlacementIndex=m.length-1,this._forceFullPlacement=y,this._showCollisionBoxes=S,this._done=!1}isDone(){return this._done}continuePlacement(u,m,y){const S=s.exported.now(),C=()=>{const L=s.exported.now()-S;return!this._forceFullPlacement&&L>2};for(;this._currentPlacementIndex>=0;){const L=m[u[this._currentPlacementIndex]],O=this.placement.collisionIndex.transform.zoom;if(L.type==="symbol"&&(!L.minzoom||L.minzoom<=O)&&(!L.maxzoom||L.maxzoom>O)){if(this._inProgressLayer||(this._inProgressLayer=new fl(L)),this._inProgressLayer.continuePlacement(y[L.source],this.placement,this._showCollisionBoxes,L,C))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(u){return this.placement.commit(u),this.placement}}const ml=512/s.EXTENT/2;class Vr{constructor(u,m,y){this.tileID=u,this.bucketInstanceId=y,this.index=new s.KDBush(m.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const S=u.canonical.x*s.EXTENT,C=u.canonical.y*s.EXTENT;for(let L=0;L<m.length;L++){const{key:O,crossTileID:$,tileAnchorX:q,tileAnchorY:K}=m.get(L),ae=Math.floor((S+q)*ml),pe=Math.floor((C+K)*ml);this.index.add(ae,pe),this.keys.push(O),this.crossTileIDs.push($)}this.index.finish()}findMatches(u,m,y){const S=this.tileID.canonical.z<m.canonical.z?1:Math.pow(2,this.tileID.canonical.z-m.canonical.z),C=ml/Math.pow(2,m.canonical.z-this.tileID.canonical.z),L=m.canonical.x*s.EXTENT,O=m.canonical.y*s.EXTENT;for(let $=0;$<u.length;$++){const q=u.get($);if(q.crossTileID)continue;const{key:K,tileAnchorX:ae,tileAnchorY:pe}=q,be=Math.floor((L+ae)*C),Se=Math.floor((O+pe)*C),xe=this.index.range(be-S,Se-S,be+S,Se+S);for(const Ce of xe){const le=this.crossTileIDs[Ce];if(this.keys[Ce]===K&&!y.has(le)){y.add(le),q.crossTileID=le;break}}}}}class gc{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Ko{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(u){const m=Math.round((u-this.lng)/360);if(m!==0)for(const y in this.indexes){const S=this.indexes[y],C={};for(const L in S){const O=S[L];O.tileID=O.tileID.unwrapTo(O.tileID.wrap+m),C[O.tileID.key]=O}this.indexes[y]=C}this.lng=u}addBucket(u,m,y){if(this.indexes[u.overscaledZ]&&this.indexes[u.overscaledZ][u.key]){if(this.indexes[u.overscaledZ][u.key].bucketInstanceId===m.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(u.overscaledZ,this.indexes[u.overscaledZ][u.key])}for(let C=0;C<m.symbolInstances.length;C++)m.symbolInstances.get(C).crossTileID=0;this.usedCrossTileIDs[u.overscaledZ]||(this.usedCrossTileIDs[u.overscaledZ]=new Set);const S=this.usedCrossTileIDs[u.overscaledZ];for(const C in this.indexes){const L=this.indexes[C];if(Number(C)>u.overscaledZ)for(const O in L){const $=L[O];$.tileID.isChildOf(u)&&$.findMatches(m.symbolInstances,u,S)}else{const O=L[u.scaledTo(Number(C)).key];O&&O.findMatches(m.symbolInstances,u,S)}}for(let C=0;C<m.symbolInstances.length;C++){const L=m.symbolInstances.get(C);L.crossTileID||(L.crossTileID=y.generate(),S.add(L.crossTileID))}return this.indexes[u.overscaledZ]===void 0&&(this.indexes[u.overscaledZ]={}),this.indexes[u.overscaledZ][u.key]=new Vr(u,m.symbolInstances,m.bucketInstanceId),!0}removeBucketCrossTileIDs(u,m){for(const y of m.crossTileIDs)this.usedCrossTileIDs[u].delete(y)}removeStaleBuckets(u){let m=!1;for(const y in this.indexes){const S=this.indexes[y];for(const C in S)u[S[C].bucketInstanceId]||(this.removeBucketCrossTileIDs(y,S[C]),delete S[C],m=!0)}return m}}class Po{constructor(){this.layerIndexes={},this.crossTileIDs=new gc,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(u,m,y,S){let C=this.layerIndexes[u.id];C===void 0&&(C=this.layerIndexes[u.id]=new Ko);let L=!1;const O={};S.name!=="globe"&&C.handleWrapJump(y);for(const $ of m){const q=$.getBucket(u);q&&u.id===q.layerIds[0]&&(q.bucketInstanceId||(q.bucketInstanceId=++this.maxBucketInstanceId),C.addBucket($.tileID,q,this.crossTileIDs)&&(L=!0),O[q.bucketInstanceId]=!0)}return C.removeStaleBuckets(O)&&(L=!0),L}pruneUnusedLayers(u){const m={};u.forEach((y=>{m[y]=!0}));for(const y in this.layerIndexes)m[y]||delete this.layerIndexes[y]}}const va=(v,u)=>s.emitValidationErrors(v,u&&u.filter((m=>m.identifier!=="source.canvas"))),_a=s.pick(qn,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),pd=s.pick(qn,["setCenter","setZoom","setBearing","setPitch"]),Ya={version:8,layers:[],sources:{}},Xo={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class Mo extends s.Evented{constructor(u,m={}){super(),this.map=u,this.dispatcher=new Ee(Hr(),this),this.imageManager=new Q,this.imageManager.setEventedParent(this),this.glyphManager=new s.GlyphManager(u._requestManager,m.localFontFamily?s.LocalGlyphMode.all:m.localIdeographFontFamily?s.LocalGlyphMode.ideographs:s.LocalGlyphMode.none,m.localFontFamily||m.localIdeographFontFamily),this.crossTileSymbolIndex=new Po,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",s.getReferrer());const y=this;this._rtlTextPluginCallback=Mo.registerForPluginStateChange((S=>{y.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:S.pluginStatus,pluginURL:S.pluginURL},((C,L)=>{if(s.triggerPluginCompletionEvent(C),L&&L.every((O=>O)))for(const O in y._sourceCaches){const $=y._sourceCaches[O],q=$.getSource().type;q!=="vector"&&q!=="geojson"||$.reload()}}))})),this.on("data",(S=>{if(S.dataType!=="source"||S.sourceDataType!=="metadata")return;const C=this.getSource(S.sourceId);if(C&&C.vectorLayerIds)for(const L in this._layers){const O=this._layers[L];O.source===C.id&&this._validateLayer(O)}}))}loadURL(u,m={}){this.fire(new s.Event("dataloading",{dataType:"style"}));const y=typeof m.validate=="boolean"?m.validate:!s.isMapboxURL(u);u=this.map._requestManager.normalizeStyleURL(u,m.accessToken);const S=this.map._requestManager.transformRequest(u,s.ResourceType.Style);this._request=s.getJSON(S,((C,L)=>{this._request=null,C?this.fire(new s.ErrorEvent(C)):L&&this._load(L,y)}))}loadJSON(u,m={}){this.fire(new s.Event("dataloading",{dataType:"style"})),this._request=s.exported.frame((()=>{this._request=null,this._load(u,m.validate!==!1)}))}loadEmpty(){this.fire(new s.Event("dataloading",{dataType:"style"})),this._load(Ya,!1)}_updateLayerCount(u,m){const y=m?1:-1;u.is3D()&&(this._num3DLayers+=y),u.type==="circle"&&(this._numCircleLayers+=y),u.type==="symbol"&&(this._numSymbolLayers+=y)}_load(u,m){if(m&&va(this,s.validateStyle(u)))return;this._loaded=!0,this.stylesheet=s.clone$1(u),this._updateMapProjection();for(const S in u.sources)this.addSource(S,u.sources[S],{validate:!1});this._changed=!1,u.sprite?this._loadSprite(u.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(u.glyphs);const y=zs(this.stylesheet.layers);this._order=y.map((S=>S.id)),this._layers={},this._serializedLayers={};for(const S of y){const C=s.createStyleLayer(S);C.setEventedParent(this,{layer:{id:C.id}}),this._layers[C.id]=C,this._serializedLayers[C.id]=C.serialize(),this._updateLayerCount(C,!0)}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new ke(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new s.Event("data",{dataType:"style"})),this.fire(new s.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&this.terrain.drapeRenderMode===0}setProjection(u){u?this.stylesheet.projection=u:delete this.stylesheet.projection,this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_updateMapProjection(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}_loadSprite(u){this._spriteRequest=(function(m,y,S){let C,L,O;const $=s.exported.devicePixelRatio>1?"@2x":"";let q=s.getJSON(y.transformRequest(y.normalizeSpriteURL(m,$,".json"),s.ResourceType.SpriteJSON),((pe,be)=>{q=null,O||(O=pe,C=be,ae())})),K=s.getImage(y.transformRequest(y.normalizeSpriteURL(m,$,".png"),s.ResourceType.SpriteImage),((pe,be)=>{K=null,O||(O=pe,L=be,ae())}));function ae(){if(O)S(O);else if(C&&L){const pe=s.exported.getImageData(L),be={};for(const Se in C){const{width:xe,height:Ce,x:le,y:ye,sdf:Pe,pixelRatio:Le,stretchX:We,stretchY:qe,content:Ye}=C[Se],ut=new s.RGBAImage({width:xe,height:Ce});s.RGBAImage.copy(pe,ut,{x:le,y:ye},{x:0,y:0},{width:xe,height:Ce}),be[Se]={data:ut,pixelRatio:Le,sdf:Pe,stretchX:We,stretchY:qe,content:Ye}}S(null,be)}}return{cancel(){q&&(q.cancel(),q=null),K&&(K.cancel(),K=null)}}})(u,this.map._requestManager,((m,y)=>{if(this._spriteRequest=null,m)this.fire(new s.ErrorEvent(m));else if(y)for(const S in y)this.imageManager.addImage(S,y[S]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new s.Event("data",{dataType:"style"}))}))}_validateLayer(u){const m=this.getSource(u.source);if(!m)return;const y=u.sourceLayer;y&&(m.type==="geojson"||m.vectorLayerIds&&m.vectorLayerIds.indexOf(y)===-1)&&this.fire(new s.ErrorEvent(new Error(`Source layer "${y}" does not exist on source "${m.id}" as specified by style layer "${u.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const u in this._sourceCaches)if(!this._sourceCaches[u].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(u){const m=[];for(const y of u){const S=this._layers[y];S.type!=="custom"&&m.push(S.serialize())}return m}hasTransitions(){if(this.light&&this.light.hasTransition()||this.fog&&this.fog.hasTransition())return!0;for(const u in this._sourceCaches)if(this._sourceCaches[u].hasTransition())return!0;for(const u in this._layers)if(this._layers[u].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(u){return!!this.terrain&&(typeof u.isLayerDraped=="function"?u.isLayerDraped():Xo[u.type])}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(u){if(!this._loaded)return;const m=this._changed;if(this._changed){const S=Object.keys(this._updatedLayers),C=Object.keys(this._removedLayers);(S.length||C.length)&&this._updateWorkerLayers(S,C);for(const L in this._updatedSources){const O=this._updatedSources[L];O==="reload"?this._reloadSource(L):O==="clear"&&this._clearSource(L)}this._updateTilesForChangedImages();for(const L in this._updatedPaintProps)this._layers[L].updateTransitions(u);this.light.updateTransitions(u),this.fog&&this.fog.updateTransitions(u),this._resetUpdates()}const y={};for(const S in this._sourceCaches){const C=this._sourceCaches[S];y[S]=C.used,C.used=!1}for(const S of this._order){const C=this._layers[S];if(C.recalculate(u,this._availableImages),!C.isHidden(u.zoom)){const O=this._getLayerSourceCache(C);O&&(O.used=!0)}const L=this.map.painter;if(L){const O=C.getProgramIds();if(!O)continue;const $=C.getProgramConfiguration(u.zoom);for(const q of O)L.useProgram(q,$)}}for(const S in y){const C=this._sourceCaches[S];y[S]!==C.used&&C.getSource().fire(new s.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:C.getSource().id}))}this.light.recalculate(u),this.terrain&&this.terrain.recalculate(u),this.fog&&this.fog.recalculate(u),this.z=u.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),m&&this.fire(new s.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const u=Object.keys(this._changedImages);if(u.length){for(const m in this._sourceCaches)this._sourceCaches[m].reloadTilesForDependencies(["icons","patterns"],u);this._changedImages={}}}_updateWorkerLayers(u,m){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(u),removedIds:m})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(u){if(this._checkLoaded(),va(this,s.validateStyle(u)))return!1;(u=s.clone$1(u)).layers=zs(u.layers);const m=(function(S,C){if(!S)return[{command:qn.setStyle,args:[C]}];let L=[];try{if(!p(S.version,C.version))return[{command:qn.setStyle,args:[C]}];p(S.center,C.center)||L.push({command:qn.setCenter,args:[C.center]}),p(S.zoom,C.zoom)||L.push({command:qn.setZoom,args:[C.zoom]}),p(S.bearing,C.bearing)||L.push({command:qn.setBearing,args:[C.bearing]}),p(S.pitch,C.pitch)||L.push({command:qn.setPitch,args:[C.pitch]}),p(S.sprite,C.sprite)||L.push({command:qn.setSprite,args:[C.sprite]}),p(S.glyphs,C.glyphs)||L.push({command:qn.setGlyphs,args:[C.glyphs]}),p(S.transition,C.transition)||L.push({command:qn.setTransition,args:[C.transition]}),p(S.light,C.light)||L.push({command:qn.setLight,args:[C.light]}),p(S.fog,C.fog)||L.push({command:qn.setFog,args:[C.fog]}),p(S.projection,C.projection)||L.push({command:qn.setProjection,args:[C.projection]});const O={},$=[];(function(ae,pe,be,Se){let xe;for(xe in pe=pe||{},ae=ae||{})ae.hasOwnProperty(xe)&&(pe.hasOwnProperty(xe)||Cs(xe,be,Se));for(xe in pe){if(!pe.hasOwnProperty(xe))continue;const Ce=pe[xe];ae.hasOwnProperty(xe)?p(ae[xe],Ce)||(ae[xe].type==="geojson"&&Ce.type==="geojson"&&Ka(ae,pe,xe)?be.push({command:qn.setGeoJSONSourceData,args:[xe,Ce.data]}):Ho(xe,pe,be,Se)):fa(xe,pe,be)}})(S.sources,C.sources,$,O);const q=[];S.layers&&S.layers.forEach((ae=>{ae.source&&O[ae.source]?L.push({command:qn.removeLayer,args:[ae.id]}):q.push(ae)}));let K=S.terrain;K&&O[K.source]&&(L.push({command:qn.setTerrain,args:[void 0]}),K=void 0),L=L.concat($),p(K,C.terrain)||L.push({command:qn.setTerrain,args:[C.terrain]}),(function(ae,pe,be){pe=pe||[];const Se=(ae=ae||[]).map(Co),xe=pe.map(Co),Ce=ae.reduce(Xa,{}),le=pe.reduce(Xa,{}),ye=Se.slice(),Pe=Object.create(null);let Le,We,qe,Ye,ut,at,gt;for(Le=0,We=0;Le<Se.length;Le++)qe=Se[Le],le.hasOwnProperty(qe)?We++:(be.push({command:qn.removeLayer,args:[qe]}),ye.splice(ye.indexOf(qe,We),1));for(Le=0,We=0;Le<xe.length;Le++)qe=xe[xe.length-1-Le],ye[ye.length-1-Le]!==qe&&(Ce.hasOwnProperty(qe)?(be.push({command:qn.removeLayer,args:[qe]}),ye.splice(ye.lastIndexOf(qe,ye.length-We),1)):We++,at=ye[ye.length-Le],be.push({command:qn.addLayer,args:[le[qe],at]}),ye.splice(ye.length-Le,0,qe),Pe[qe]=!0);for(Le=0;Le<xe.length;Le++)if(qe=xe[Le],Ye=Ce[qe],ut=le[qe],!Pe[qe]&&!p(Ye,ut))if(p(Ye.source,ut.source)&&p(Ye["source-layer"],ut["source-layer"])&&p(Ye.type,ut.type)){for(gt in Eo(Ye.layout,ut.layout,be,qe,null,qn.setLayoutProperty),Eo(Ye.paint,ut.paint,be,qe,null,qn.setPaintProperty),p(Ye.filter,ut.filter)||be.push({command:qn.setFilter,args:[qe,ut.filter]}),p(Ye.minzoom,ut.minzoom)&&p(Ye.maxzoom,ut.maxzoom)||be.push({command:qn.setLayerZoomRange,args:[qe,ut.minzoom,ut.maxzoom]}),Ye)Ye.hasOwnProperty(gt)&&gt!=="layout"&&gt!=="paint"&&gt!=="filter"&&gt!=="metadata"&&gt!=="minzoom"&&gt!=="maxzoom"&&(gt.indexOf("paint.")===0?Eo(Ye[gt],ut[gt],be,qe,gt.slice(6),qn.setPaintProperty):p(Ye[gt],ut[gt])||be.push({command:qn.setLayerProperty,args:[qe,gt,ut[gt]]}));for(gt in ut)ut.hasOwnProperty(gt)&&!Ye.hasOwnProperty(gt)&&gt!=="layout"&&gt!=="paint"&&gt!=="filter"&&gt!=="metadata"&&gt!=="minzoom"&&gt!=="maxzoom"&&(gt.indexOf("paint.")===0?Eo(Ye[gt],ut[gt],be,qe,gt.slice(6),qn.setPaintProperty):p(Ye[gt],ut[gt])||be.push({command:qn.setLayerProperty,args:[qe,gt,ut[gt]]}))}else be.push({command:qn.removeLayer,args:[qe]}),at=ye[ye.lastIndexOf(qe)+1],be.push({command:qn.addLayer,args:[ut,at]})})(q,C.layers,L)}catch(O){console.warn("Unable to compute style diff:",O),L=[{command:qn.setStyle,args:[C]}]}return L})(this.serialize(),u).filter((S=>!(S.command in pd)));if(m.length===0)return!1;const y=m.filter((S=>!(S.command in _a)));if(y.length>0)throw new Error(`Unimplemented: ${y.map((S=>S.command)).join(", ")}.`);return m.forEach((S=>{S.command!=="setTransition"&&S.command!=="setProjection"&&this[S.command].apply(this,S.args)})),this.stylesheet=u,this._updateMapProjection(),!0}addImage(u,m){return this.getImage(u)?this.fire(new s.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(u,m),this._afterImageUpdated(u),this)}updateImage(u,m){this.imageManager.updateImage(u,m)}getImage(u){return this.imageManager.getImage(u)}removeImage(u){return this.getImage(u)?(this.imageManager.removeImage(u),this._afterImageUpdated(u),this):this.fire(new s.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(u){this._availableImages=this.imageManager.listImages(),this._changedImages[u]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new s.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(u,m,y={}){if(this._checkLoaded(),this.getSource(u)!==void 0)throw new Error("There is already a source with this ID");if(!m.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(m).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(m.type)>=0&&this._validate(s.validateSource,`sources.${u}`,m,null,y))return;this.map&&this.map._collectResourceTiming&&(m.collectResourceTiming=!0);const S=ai(u,m,this.dispatcher,this);S.setEventedParent(this,(()=>({isSourceLoaded:this._isSourceCacheLoaded(u),source:S.serialize(),sourceId:u})));const C=L=>{const O=(L?"symbol:":"other:")+u,$=this._sourceCaches[O]=new s.SourceCache(O,S,L);(L?this._symbolSourceCaches:this._otherSourceCaches)[u]=$,$.style=this,$.onAdd(this.map)};C(!1),m.type!=="vector"&&m.type!=="geojson"||C(!0),S.onAdd&&S.onAdd(this.map),this._changed=!0}removeSource(u){this._checkLoaded();const m=this.getSource(u);if(!m)throw new Error("There is no source with this ID");for(const S in this._layers)if(this._layers[S].source===u)return this.fire(new s.ErrorEvent(new Error(`Source "${u}" cannot be removed while layer "${S}" is using it.`)));if(this.terrain&&this.terrain.get().source===u)return this.fire(new s.ErrorEvent(new Error(`Source "${u}" cannot be removed while terrain is using it.`)));const y=this._getSourceCaches(u);for(const S of y)delete this._sourceCaches[S.id],delete this._updatedSources[S.id],S.fire(new s.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:S.getSource().id})),S.setEventedParent(null),S.clearTiles();return delete this._otherSourceCaches[u],delete this._symbolSourceCaches[u],m.setEventedParent(null),m.onRemove&&m.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(u,m){this._checkLoaded(),this.getSource(u).setData(m),this._changed=!0}getSource(u){const m=this._getSourceCache(u);return m&&m.getSource()}_getSources(){const u=[];for(const m in this._otherSourceCaches){const y=this._getSourceCache(m);y&&u.push(y.getSource())}return u}addLayer(u,m,y={}){this._checkLoaded();const S=u.id;if(this.getLayer(S))return void this.fire(new s.ErrorEvent(new Error(`Layer with id "${S}" already exists on this map`)));let C;if(u.type==="custom"){if(va(this,s.validateCustomStyleLayer(u)))return;C=s.createStyleLayer(u)}else{if(typeof u.source=="object"&&(this.addSource(S,u.source),u=s.clone$1(u),u=s.extend(u,{source:S})),this._validate(s.validateLayer,`layers.${S}`,u,{arrayIndex:-1},y))return;C=s.createStyleLayer(u),this._validateLayer(C),C.setEventedParent(this,{layer:{id:S}}),this._serializedLayers[C.id]=C.serialize(),this._updateLayerCount(C,!0)}const L=m?this._order.indexOf(m):this._order.length;if(m&&L===-1)return void this.fire(new s.ErrorEvent(new Error(`Layer with id "${m}" does not exist on this map.`)));this._order.splice(L,0,S),this._layerOrderChanged=!0,this._layers[S]=C;const O=this._getLayerSourceCache(C);if(this._removedLayers[S]&&C.source&&O&&C.type!=="custom"){const $=this._removedLayers[S];delete this._removedLayers[S],$.type!==C.type?this._updatedSources[C.source]="clear":(this._updatedSources[C.source]="reload",O.pause())}this._updateLayer(C),C.onAdd&&C.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(u,m){if(this._checkLoaded(),this._changed=!0,!this._layers[u])return void this.fire(new s.ErrorEvent(new Error(`The layer '${u}' does not exist in the map's style and cannot be moved.`)));if(u===m)return;const y=this._order.indexOf(u);this._order.splice(y,1);const S=m?this._order.indexOf(m):this._order.length;m&&S===-1?this.fire(new s.ErrorEvent(new Error(`Layer with id "${m}" does not exist on this map.`))):(this._order.splice(S,0,u),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(u){this._checkLoaded();const m=this._layers[u];if(!m)return void this.fire(new s.ErrorEvent(new Error(`The layer '${u}' does not exist in the map's style and cannot be removed.`)));m.setEventedParent(null),this._updateLayerCount(m,!1);const y=this._order.indexOf(u);this._order.splice(y,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[u]=m,delete this._layers[u],delete this._serializedLayers[u],delete this._updatedLayers[u],delete this._updatedPaintProps[u],m.onRemove&&m.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(u){return this._layers[u]}hasLayer(u){return u in this._layers}hasLayerType(u){for(const m in this._layers)if(this._layers[m].type===u)return!0;return!1}setLayerZoomRange(u,m,y){this._checkLoaded();const S=this.getLayer(u);S?S.minzoom===m&&S.maxzoom===y||(m!=null&&(S.minzoom=m),y!=null&&(S.maxzoom=y),this._updateLayer(S)):this.fire(new s.ErrorEvent(new Error(`The layer '${u}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(u,m,y={}){this._checkLoaded();const S=this.getLayer(u);if(S){if(!p(S.filter,m))return m==null?(S.filter=void 0,void this._updateLayer(S)):void(this._validate(s.validateFilter,`layers.${S.id}.filter`,m,{layerType:S.type},y)||(S.filter=s.clone$1(m),this._updateLayer(S)))}else this.fire(new s.ErrorEvent(new Error(`The layer '${u}' does not exist in the map's style and cannot be filtered.`)))}getFilter(u){const m=this.getLayer(u);return m&&s.clone$1(m.filter)}setLayoutProperty(u,m,y,S={}){this._checkLoaded();const C=this.getLayer(u);C?p(C.getLayoutProperty(m),y)||(C.setLayoutProperty(m,y,S),this._updateLayer(C)):this.fire(new s.ErrorEvent(new Error(`The layer '${u}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(u,m){const y=this.getLayer(u);if(y)return y.getLayoutProperty(m);this.fire(new s.ErrorEvent(new Error(`The layer '${u}' does not exist in the map's style.`)))}setPaintProperty(u,m,y,S={}){this._checkLoaded();const C=this.getLayer(u);C?p(C.getPaintProperty(m),y)||(C.setPaintProperty(m,y,S)&&this._updateLayer(C),this._changed=!0,this._updatedPaintProps[u]=!0):this.fire(new s.ErrorEvent(new Error(`The layer '${u}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(u,m){const y=this.getLayer(u);return y&&y.getPaintProperty(m)}setFeatureState(u,m){this._checkLoaded();const y=u.source,S=u.sourceLayer,C=this.getSource(y);if(!C)return void this.fire(new s.ErrorEvent(new Error(`The source '${y}' does not exist in the map's style.`)));const L=C.type;if(L==="geojson"&&S)return void this.fire(new s.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(L==="vector"&&!S)return void this.fire(new s.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));u.id===void 0&&this.fire(new s.ErrorEvent(new Error("The feature id parameter must be provided.")));const O=this._getSourceCaches(y);for(const $ of O)$.setFeatureState(S,u.id,m)}removeFeatureState(u,m){this._checkLoaded();const y=u.source,S=this.getSource(y);if(!S)return void this.fire(new s.ErrorEvent(new Error(`The source '${y}' does not exist in the map's style.`)));const C=S.type,L=C==="vector"?u.sourceLayer:void 0;if(C==="vector"&&!L)return void this.fire(new s.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(m&&typeof u.id!="string"&&typeof u.id!="number")return void this.fire(new s.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const O=this._getSourceCaches(y);for(const $ of O)$.removeFeatureState(L,u.id,m)}getFeatureState(u){this._checkLoaded();const m=u.source,y=u.sourceLayer,S=this.getSource(m);if(S){if(S.type!=="vector"||y)return u.id===void 0&&this.fire(new s.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(m)[0].getFeatureState(y,u.id);this.fire(new s.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new s.ErrorEvent(new Error(`The source '${m}' does not exist in the map's style.`)))}getTransition(){return s.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const u={};for(const m in this._sourceCaches){const y=this._sourceCaches[m].getSource();u[y.id]||(u[y.id]=y.serialize())}return s.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.getTerrain()||void 0,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:u,layers:this._serializeLayers(this._order)},(m=>m!==void 0))}_updateLayer(u){this._updatedLayers[u.id]=!0;const m=this._getLayerSourceCache(u);u.source&&!this._updatedSources[u.source]&&m&&m.getSource().type!=="raster"&&(this._updatedSources[u.source]="reload",m.pause()),this._changed=!0,u.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(u){const m=L=>this._layers[L].type==="fill-extrusion",y={},S=[];for(let L=this._order.length-1;L>=0;L--){const O=this._order[L];if(m(O)){y[O]=L;for(const $ of u){const q=$[O];if(q)for(const K of q)S.push(K)}}}S.sort(((L,O)=>O.intersectionZ-L.intersectionZ));const C=[];for(let L=this._order.length-1;L>=0;L--){const O=this._order[L];if(m(O))for(let $=S.length-1;$>=0;$--){const q=S[$].feature;if(y[q.layer.id]<L)break;C.push(q),S.pop()}else for(const $ of u){const q=$[O];if(q)for(const K of q)C.push(K.feature)}}return C}queryRenderedFeatures(u,m,y){m&&m.filter&&this._validate(s.validateFilter,"queryRenderedFeatures.filter",m.filter,null,m);const S={};if(m&&m.layers){if(!Array.isArray(m.layers))return this.fire(new s.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const $ of m.layers){const q=this._layers[$];if(!q)return this.fire(new s.ErrorEvent(new Error(`The layer '${$}' does not exist in the map's style and cannot be queried for features.`))),[];S[q.source]=!0}}const C=[];m.availableImages=this._availableImages;const L=m&&m.layers?m.layers.some(($=>{const q=this.getLayer($);return q&&q.is3D()})):this.has3DLayers(),O=ot.createFromScreenPoints(u,y);for(const $ in this._sourceCaches){const q=this._sourceCaches[$].getSource().id;m.layers&&!S[q]||C.push(Ri(this._sourceCaches[$],this._layers,this._serializedLayers,O,m,y,L,!!this.map._showQueryGeometry))}return this.placement&&C.push((function($,q,K,ae,pe,be,Se){const xe={},Ce=be.queryRenderedSymbols(ae),le=[];for(const ye of Object.keys(Ce).map(Number))le.push(Se[ye]);le.sort(is);for(const ye of le){const Pe=ye.featureIndex.lookupSymbolFeatures(Ce[ye.bucketInstanceId],q,ye.bucketIndex,ye.sourceLayerIndex,pe.filter,pe.layers,pe.availableImages,$);for(const Le in Pe){const We=xe[Le]=xe[Le]||[],qe=Pe[Le];qe.sort(((Ye,ut)=>{const at=ye.featureSortOrder;if(at){const gt=at.indexOf(Ye.featureIndex);return at.indexOf(ut.featureIndex)-gt}return ut.featureIndex-Ye.featureIndex}));for(const Ye of qe)We.push(Ye)}}for(const ye in xe)xe[ye].forEach((Pe=>{const Le=Pe.feature,We=K($[ye]);if(!We)return;const qe=We.getFeatureState(Le.layer["source-layer"],Le.id);Le.source=Le.layer.source,Le.layer["source-layer"]&&(Le.sourceLayer=Le.layer["source-layer"]),Le.state=qe}));return xe})(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),O.screenGeometry,m,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(C)}querySourceFeatures(u,m){m&&m.filter&&this._validate(s.validateFilter,"querySourceFeatures.filter",m.filter,null,m);const y=this._getSourceCaches(u);let S=[];for(const C of y)S=S.concat(mr(C,m));return S}addSourceType(u,m,y){return Mo.getSourceType(u)?y(new Error(`A source type called "${u}" already exists.`)):(Mo.setSourceType(u,m),m.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:u,url:m.workerSourceURL},y):y(null,null))}getLight(){return this.light.getLight()}setLight(u,m={}){this._checkLoaded();const y=this.light.getLight();let S=!1;for(const L in u)if(!p(u[L],y[L])){S=!0;break}if(!S)return;const C=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(u,m),this.light.updateTransitions(C)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(u,m=1){if(this._checkLoaded(),!u)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);let y=u;if(m===1){if(typeof y.source=="object"){const S="terrain-dem-src";this.addSource(S,y.source),y=s.clone$1(y),y=s.extend(y,{source:S})}if(this._validate(s.validateTerrain,"terrain",y))return}if(!this.terrain||this.terrain&&m!==this.terrain.drapeRenderMode){if(!y)return;this._createTerrain(y,m)}else{const S=this.terrain,C=S.get();for(const L of Object.keys(s.spec.terrain))!y.hasOwnProperty(L)&&s.spec.terrain[L].default&&(y[L]=s.spec.terrain[L].default);for(const L in y)if(!p(y[L],C[L])){S.set(y),this.stylesheet.terrain=y;const O=this._setTransitionParameters({duration:0});S.updateTransitions(O);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(u){const m=this.fog=new Ge(u,this.map.transform);this.stylesheet.fog=u;const y=this._setTransitionParameters({duration:0});m.updateTransitions(y)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask((()=>{for(const u of this.map._markers)u._evaluateOpacity()}))}getFog(){return this.fog?this.fog.get():null}setFog(u){if(this._checkLoaded(),!u)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const m=this.fog,y=m.get();Object.keys(u).length===0&&m.set(u);for(const S in u)if(!p(u[S],y[S])){m.set(u),this.stylesheet.fog=u;const C=this._setTransitionParameters({duration:0});m.updateTransitions(C);break}}else this._createFog(u);this._markersNeedUpdate=!0}_setTransitionParameters(u){return{now:s.exported.now(),transition:s.extend(u,this.stylesheet.transition)}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const u=this._order.filter((y=>this.isLayerDraped(this._layers[y]))),m=this._order.filter((y=>!this.isLayerDraped(this._layers[y])));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...u),this._drapedFirstOrder.push(...m)}_createTerrain(u,m){const y=this.terrain=new Be(u,m);this.stylesheet.terrain=u,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const S=this._setTransitionParameters({duration:0});y.updateTransitions(S)}_force3DLayerUpdate(){for(const u in this._layers){const m=this._layers[u];m.type==="fill-extrusion"&&this._updateLayer(m)}}_forceSymbolLayerUpdate(){for(const u in this._layers){const m=this._layers[u];m.type==="symbol"&&this._updateLayer(m)}}_validate(u,m,y,S,C={}){return(!C||C.validate!==!1)&&va(this,u.call(s.validateStyle,s.extend({key:m,style:this.serialize(),value:y,styleSpec:s.spec},S)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),s.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const u in this._layers)this._layers[u].setEventedParent(null);for(const u in this._sourceCaches)this._sourceCaches[u].clearTiles(),this._sourceCaches[u].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(u){const m=this._getSourceCaches(u);for(const y of m)y.clearTiles()}_reloadSource(u){const m=this._getSourceCaches(u);for(const y of m)y.resume(),y.reload()}_reloadSources(){for(const u of this._getSources())u.reload&&u.reload()}_updateSources(u){for(const m in this._sourceCaches)this._sourceCaches[m].update(u)}_generateCollisionBoxes(){for(const u in this._sourceCaches){const m=this._sourceCaches[u];m.resume(),m.reload()}}_updatePlacement(u,m,y,S,C=!1){let L=!1,O=!1;const $={};for(const q of this._order){const K=this._layers[q];if(K.type!=="symbol")continue;if(!$[K.source]){const pe=this._getLayerSourceCache(K);if(!pe)continue;$[K.source]=pe.getRenderableIds(!0).map((be=>pe.getTileByID(be))).sort(((be,Se)=>Se.tileID.overscaledZ-be.tileID.overscaledZ||(be.tileID.isLessThan(Se.tileID)?-1:1)))}const ae=this.crossTileSymbolIndex.addLayer(K,$[K.source],u.center.lng,u.projection);L=L||ae}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),C=C||this._layerOrderChanged||y===0,this._layerOrderChanged&&this.fire(new s.Event("neworder")),(C||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(s.exported.now(),u.zoom))&&(this.pauseablePlacement=new pc(u,this._order,C,m,y,S,this.placement,this.fog&&u.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,$),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(s.exported.now()),O=!0),L&&this.pauseablePlacement.placement.setStale()),O||L)for(const q of this._order){const K=this._layers[q];K.type==="symbol"&&this.placement.updateLayerOpacities(K,$[K.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(s.exported.now())}_releaseSymbolFadeTiles(){for(const u in this._sourceCaches)this._sourceCaches[u].releaseSymbolFadeTiles()}getImages(u,m,y){this.imageManager.getImages(m.icons,y),this._updateTilesForChangedImages();const S=C=>{C&&C.setDependencies(m.tileID.key,m.type,m.icons)};S(this._otherSourceCaches[m.source]),S(this._symbolSourceCaches[m.source])}getGlyphs(u,m,y){this.glyphManager.getGlyphs(m.stacks,y)}getResource(u,m,y){return s.makeRequest(m,y)}_getSourceCache(u){return this._otherSourceCaches[u]}_getLayerSourceCache(u){return u.type==="symbol"?this._symbolSourceCaches[u.source]:this._otherSourceCaches[u.source]}_getSourceCaches(u){const m=[];return this._otherSourceCaches[u]&&m.push(this._otherSourceCaches[u]),this._symbolSourceCaches[u]&&m.push(this._symbolSourceCaches[u]),m}_isSourceCacheLoaded(u){const m=this._getSourceCaches(u);return m.length===0?(this.fire(new s.ErrorEvent(new Error(`There is no source with ID '${u}'`))),!1):m.every((y=>y.loaded()))}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}Mo.getSourceType=function(v){return jn[v]},Mo.setSourceType=function(v,u){jn[v]=u},Mo.registerForPluginStateChange=s.registerForPluginStateChange;var Ul=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#define EXTENT 8192.0
#define HALF_PI PI/2.0
#define QUARTER_PI PI/4.0
#define RAD_TO_DEG 180.0/PI
#define DEG_TO_RAD PI/180.0
#define GLOBE_RADIUS EXTENT/PI/2.0`,Do="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",ya=`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
const float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)
{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}
#ifdef TERRAIN
#ifdef TERRAIN_DEM_FLOAT_FORMAT
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;
#else
uniform sampler2D u_dem;uniform sampler2D u_dem_prev;
#endif
uniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));
#ifdef TERRAIN_DEM_NEAREST_FILTER
return u_exaggeration*tl;
#endif
float tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
return currentElevation(apos);}
#endif
highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(
unpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))
);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
float tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;
#else
vec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);
#endif
return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }
#endif`,ba=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,Yo=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`;let vc={},Za={};const pl=[];co(Ul,pl),co(ya,pl),co(ba,pl),co(Yo,pl),vc=Ei("",ya),Za=Ei(Yo,ba);const jc=Ei(`
#if __VERSION__ >=300
#define varying in
#define gl_FragColor glFragColor
#define texture2D texture
#define textureCube texture
out vec4 glFragColor;
#endif
highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}`,`
#if __VERSION__ >=300
#define attribute in
#define varying out
#define texture2D texture
#endif
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#ifndef PROJECTED_POS_ON_VIEWPORT
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered.`),gl=Ul,xu=`
#ifdef GL_ES
precision mediump float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`;var wu={background:Ei(`uniform vec4 u_color;uniform float u_opacity;
#ifdef LIGHTING_3D_MODE
varying vec4 v_color;
#endif
void main() {vec4 out_color;
#ifdef LIGHTING_3D_MODE
out_color=v_color;
#else
out_color=u_color;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#ifdef LIGHTING_3D_MODE
uniform vec4 u_color;varying vec4 v_color;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting(u_color);
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:Ei(`uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos;void main() {vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),circle:Ei(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
gl_FragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);
#else 
surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;
#else
occlusion_world_center=world_center;occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:Ei("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Ei(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
if (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:Ei(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:Ei("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:Ei("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}",`attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:Ei("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}",`attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;
#endif
varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),fill:Ei(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutline:Ei(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:Ei(`uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;varying vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;varying vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:Ei(`uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:Ei(`varying vec4 v_color;
#ifdef RENDER_SHADOWS
varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef ZERO_ROOF_RADIUS
varying vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
varying highp vec3 v_normal;
#endif
void main() {
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
vec3 normal=v_normal;
#endif
float z;vec4 color;
#ifdef ZERO_ROOF_RADIUS
z=float(normal.z > 0.00001);color=mix(v_color,v_roof_color,z);
#else
color=v_color;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;
#ifdef ZERO_ROOF_RADIUS
concave*=(1.0-z);
#endif
float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;
#endif
#ifdef RENDER_SHADOWS
#ifdef ZERO_ROOF_RADIUS
normal=mix(normal,vec3(0.0,0.0,1.0),z);
#endif
color.xyz=shadowed_color_normal(color.xyz,normalize(normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec4 v_color;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;
#endif
#ifdef ZERO_ROOF_RADIUS
varying vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
varying highp vec3 v_normal;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
v_normal=normal;
#endif
base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=0.0;float c_ele;vec3 pos;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);
#else
h=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);
#ifdef RENDER_SHADOWS
v_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_depth=gl_Position.w;
#endif
float NdotL=0.0;float colorvalue=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}v_color=vec4(0.0,0.0,0.0,1.0);
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting(color,NdotL);
#else
v_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));
#endif
v_color*=u_opacity;
#ifdef ZERO_ROOF_RADIUS
v_roof_color=vec4(0.0,0.0,0.0,1.0);
#ifdef LIGHTING_3D_MODE
v_roof_color=apply_lighting(color,calculate_NdotL(vec3(0.0,0.0,1.0)));
#else
float roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));
#endif
v_roof_color*=u_opacity;
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),fillExtrusionPattern:Ei(`uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
varying float v_NdotL;
#endif
varying vec2 v_pos;varying vec4 v_lighting;uniform lowp float u_opacity;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color,v_NdotL)*u_opacity;
#else
out_color=out_color*v_lighting;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec2 v_pos;varying vec4 v_lighting;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
varying float v_NdotL;
#endif
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=z;vec3 p;float c_ele;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);
#else
p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_NdotL=NdotL;
#else
v_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#endif 
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),hillshadePrepare:Ei(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
return texture2D(u_image,coord).a/4.0;
#else
vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;
#endif
}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Ei(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef LIGHTING_3D_MODE
gl_FragColor=apply_lighting(gl_FragColor);
#endif
#ifdef FOG
gl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:Ei(`uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;varying vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;
#endif
uniform float u_border_width;uniform vec4 u_border_color;float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
float linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef RENDER_LINE_DASH
float sdfdist=texture2D(u_dash_image,v_tex).a;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);
#endif
highp vec4 out_color;
#ifdef RENDER_LINE_GRADIENT
out_color=texture2D(u_gradient_image,v_uv.xy);
#else
out_color=color;
#endif
float trimmed=1.0;
#ifdef RENDER_LINE_TRIM_OFFSET
highp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);trimmed=0.0;}}
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef RENDER_LINE_ALPHA_DISCARD
if (alpha < u_alpha_discard_threshold) {discard;}
#endif
#ifdef RENDER_LINE_BORDER
float edgeBlur=(u_border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);
#ifdef RENDER_LINE_BORDER_AUTO
float Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}
#else
out_color.rgb=mix(u_border_color.rgb*u_border_color.a*trimmed,out_color.rgb,smoothAlpha);
#endif
}
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define EXTRUDE_SCALE 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
attribute highp vec4 a_packed;
#endif
#ifdef RENDER_LINE_DASH
attribute float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;varying vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
float a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];
#ifdef RENDER_LINE_GRADIENT
highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);
#else
v_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);
#endif
#endif
#ifdef RENDER_LINE_DASH
float scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),linePattern:Ei(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;vec2 pattern_size=vec2(display_size.x/u_tile_units_to_pixels,display_size.y);float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x=mod(v_linesofar/pattern_size.x*aspect,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));vec4 color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
color=apply_lighting(color);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),raster:Ei(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply(out_color,v_fog_pos));
#endif
gl_FragColor=vec4(out_color*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),symbolIcon:Ei(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}`),symbolSDF:Ei(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}`),symbolTextAndIcon:Ei(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}`),terrainRaster:Ei(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
void main() {vec4 color=texture2D(u_image0,v_pos0);
#ifdef RENDER_SHADOWS
color.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
#ifdef ZERO_EXAGGERATION
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#else
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
const float wireframeOffset=0.00015;void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;
#ifdef TERRAIN_WIREFRAME
elevation+=wireframeOffset;
#endif
v_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
#ifdef ZERO_EXAGGERATION
v_fog_pos=fog_position(decodedPos);
#else
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
#endif
#ifdef RENDER_SHADOWS
vec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;
#endif
}`),terrainDepth:Ei(`#ifdef GL_ES
precision highp float;
#endif
varying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}`,"uniform mat4 u_matrix;attribute vec2 a_pos;varying float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:Ei(`
varying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Do),skyboxGradient:Ei(`varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Do),skyboxCapture:Ei(`
varying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;
#ifdef GL_ES
precision highp float;
#endif
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}`,"attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:Ei(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifndef FOG
uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;
#endif
void main() {vec4 color;
#ifdef CUSTOM_ANTIALIASING
vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);color=vec4(raster.rgb*antialias,raster.a*antialias);
#else
color=texture2D(u_image0,v_pos0);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;
#ifdef GLOBE_POLES
attribute vec3 a_globe_pos;attribute vec2 a_uv;
#else
attribute vec2 a_pos;
#endif
varying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;vec2 uv=a_uv;
#else
float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);
#endif
v_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;
#ifdef GLOBE_POLES
vec3 up_vector=globe_derived_up_vector;
#else
vec3 up_vector=elevationVector(tile_pos);
#endif
float height=elevation(tile_pos);
#ifdef TERRAIN_WIREFRAME
height+=wireframeOffset;
#endif
globe_pos+=up_vector*height;
#ifndef GLOBE_POLES
globe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;
#endif
#ifdef GLOBE_POLES
vec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);
#else
vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);
#endif
gl_Position=u_proj_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
}`),globeAtmosphere:Ei(`uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;
#ifdef PROJECTION_GLOBE_VIEW
globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}
#endif
highp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?
0.0 : max(acos(dot(dir,horizon_dir)),0.0);float horizon_angle;
#ifdef PROJECTION_GLOBE_VIEW
highp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?
PI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);
#else
horizon_angle=horizon_angle_mercator;
#endif
horizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:
(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:
uv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}`,`attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(
mix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}`)};function co(v,u){const m=v.replace(/\s*\/\/[^\n]*\n/g,`
`).split(`
`);for(let y of m)if(y=y.trim(),y[0]==="#"&&y.includes("if")&&!y.includes("endif")){y=y.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const S=y.split(" ");for(const C of S)u.includes(C)||u.push(C)}}function Ei(v,u){const m=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,y=u.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),S={},C=[...pl];return co(v,C),co(u,C),{fragmentSource:v=v.replace(m,((L,O,$,q,K)=>(S[K]=!0,O==="define"?`
#ifndef HAS_UNIFORM_u_${K}
varying ${$} ${q} ${K};
#else
uniform ${$} ${q} u_${K};
#endif
`:`
#ifdef HAS_UNIFORM_u_${K}
    ${$} ${q} ${K} = u_${K};
#endif
`))),vertexSource:u=u.replace(m,((L,O,$,q,K)=>{const ae=q==="float"?"vec2":"vec4",pe=K.match(/color/)?"color":ae;return S[K]?O==="define"?`
#ifndef HAS_UNIFORM_u_${K}
uniform lowp float u_${K}_t;
attribute ${$} ${ae} a_${K};
varying ${$} ${q} ${K};
#else
uniform ${$} ${q} u_${K};
#endif
`:pe==="vec4"?`
#ifndef HAS_UNIFORM_u_${K}
    ${K} = a_${K};
#else
    ${$} ${q} ${K} = u_${K};
#endif
`:`
#ifndef HAS_UNIFORM_u_${K}
    ${K} = unpack_mix_${pe}(a_${K}, u_${K}_t);
#else
    ${$} ${q} ${K} = u_${K};
#endif
`:O==="define"?`
#ifndef HAS_UNIFORM_u_${K}
uniform lowp float u_${K}_t;
attribute ${$} ${ae} a_${K};
#else
uniform ${$} ${q} u_${K};
#endif
`:pe==="vec4"?`
#ifndef HAS_UNIFORM_u_${K}
    ${$} ${q} ${K} = a_${K};
#else
    ${$} ${q} ${K} = u_${K};
#endif
`:`
#ifndef HAS_UNIFORM_u_${K}
    ${$} ${q} ${K} = unpack_mix_${pe}(a_${K}, u_${K}_t);
#else
    ${$} ${q} ${K} = u_${K};
#endif
`})),staticAttributes:y,usedDefines:C}}class Wc{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(u,m,y,S,C,L,O){this.context=u;let $=this.boundPaintVertexBuffers.length!==S.length;for(let K=0;!$&&K<S.length;K++)this.boundPaintVertexBuffers[K]!==S[K]&&($=!0);let q=this.boundDynamicVertexBuffers.length!==O.length;for(let K=0;!q&&K<O.length;K++)this.boundDynamicVertexBuffers[K]!==O[K]&&(q=!0);if(!u.extVertexArrayObject||!this.vao||this.boundProgram!==m||this.boundLayoutVertexBuffer!==y||$||q||this.boundIndexBuffer!==C||this.boundVertexOffset!==L)this.freshBind(m,y,S,C,L,O);else{u.bindVertexArrayOES.set(this.vao);for(const K of O)K&&K.bind();C&&C.dynamicDraw&&C.bind()}}freshBind(u,m,y,S,C,L){let O;const $=u.numAttributes,q=this.context,K=q.gl;if(q.extVertexArrayObject)this.vao&&this.destroy(),this.vao=q.extVertexArrayObject.createVertexArrayOES(),q.bindVertexArrayOES.set(this.vao),O=0,this.boundProgram=u,this.boundLayoutVertexBuffer=m,this.boundPaintVertexBuffers=y,this.boundIndexBuffer=S,this.boundVertexOffset=C,this.boundDynamicVertexBuffers=L;else{O=q.currentNumAttributes||0;for(let ae=$;ae<O;ae++)K.disableVertexAttribArray(ae)}m.enableAttributes(K,u),m.bind(),m.setVertexAttribPointers(K,u,C);for(const ae of y)ae.enableAttributes(K,u),ae.bind(),ae.setVertexAttribPointers(K,u,C);for(const ae of L)ae&&(ae.enableAttributes(K,u),ae.bind(),ae.setVertexAttribPointers(K,u,C));S&&S.bind(),q.currentNumAttributes=$}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function Tu(v,u){const m=Math.pow(2,u.canonical.z),y=u.canonical.y;return[new s.MercatorCoordinate(0,y/m).toLngLat().lat,new s.MercatorCoordinate(0,(y+1)/m).toLngLat().lat]}function gd(v,u,m,y,S,C,L){const O=v.context,$=O.gl,q=m.fbo;if(!q)return;v.prepareDrawTile();const K=v.useProgram("hillshade");O.activeTexture.set($.TEXTURE0),$.bindTexture($.TEXTURE_2D,q.colorAttachment.get());const ae=((xe,Ce,le,ye)=>{const Pe=le.paint.get("hillshade-shadow-color"),Le=le.paint.get("hillshade-highlight-color"),We=le.paint.get("hillshade-accent-color");let qe=le.paint.get("hillshade-illumination-direction")*(Math.PI/180);le.paint.get("hillshade-illumination-anchor")==="viewport"&&(qe-=xe.transform.angle);const Ye=!xe.options.moving;return{u_matrix:ye||xe.transform.calculateProjMatrix(Ce.tileID.toUnwrapped(),Ye),u_image:0,u_latrange:Tu(0,Ce.tileID),u_light:[le.paint.get("hillshade-exaggeration"),qe],u_shadow:Pe,u_highlight:Le,u_accent:We}})(v,m,y,v.terrain?u.projMatrix:null);v.prepareDrawProgram(O,K,u.toUnwrapped());const{tileBoundsBuffer:pe,tileBoundsIndexBuffer:be,tileBoundsSegments:Se}=v.getTileBoundsBuffers(m);K.draw(O,$.TRIANGLES,S,C,L,s.CullFaceMode.disabled,ae,y.id,pe,be,Se)}function vl(v,u,m){if(!u.needsDEMTextureUpload)return;const y=v.context,S=y.gl;y.pixelStoreUnpackPremultiplyAlpha.set(!1),u.demTexture=u.demTexture||v.getTileTexture(m.stride);const C=m.getPixels();u.demTexture?u.demTexture.update(C,{premultiply:!1}):u.demTexture=new s.Texture(y,C,S.RGBA,{premultiply:!1}),u.needsDEMTextureUpload=!1}function Us(v,u,m,y,S,C){const L=v.context,O=L.gl;if(!u.dem)return;const $=u.dem;if(L.activeTexture.set(O.TEXTURE1),vl(v,u,$),!u.demTexture)return;u.demTexture.bind(O.NEAREST,O.CLAMP_TO_EDGE);const q=$.dim;L.activeTexture.set(O.TEXTURE0);let K=u.fbo;if(!K){const Se=new s.Texture(L,{width:q,height:q,data:null},O.RGBA);Se.bind(O.LINEAR,O.CLAMP_TO_EDGE),K=u.fbo=L.createFramebuffer(q,q,!0),K.colorAttachment.set(Se.texture)}L.bindFramebuffer.set(K.framebuffer),L.viewport.set([0,0,q,q]);const{tileBoundsBuffer:ae,tileBoundsIndexBuffer:pe,tileBoundsSegments:be}=v.getMercatorTileBoundsBuffers();v.useProgram("hillshadePrepare").draw(L,O.TRIANGLES,y,S,C,s.CullFaceMode.disabled,((Se,xe)=>{const Ce=xe.stride,le=s.create();return s.ortho(le,0,s.EXTENT,-s.EXTENT,0,0,1),s.translate(le,le,[0,-s.EXTENT,0]),{u_matrix:le,u_image:1,u_dimension:[Ce,Ce],u_zoom:Se.overscaledZ,u_unpack:xe.unpackVector}})(u.tileID,$),m.id,ae,pe,be),u.needsHillshadePrepare=!1}const Hc=v=>({u_matrix:new s.UniformMatrix4f(v),u_image0:new s.Uniform1i(v),u_skirt_height:new s.Uniform1f(v)}),uo=(v,u)=>({u_matrix:v,u_image0:0,u_skirt_height:u}),Zo=(v,u,m,y,S,C,L,O,$,q,K,ae,pe,be,Se)=>({u_proj_matrix:Float32Array.from(v),u_globe_matrix:u,u_normalize_matrix:Float32Array.from(y),u_merc_matrix:m,u_zoom_transition:S,u_merc_center:C,u_image0:0,u_frustum_tl:L,u_frustum_tr:O,u_frustum_br:$,u_frustum_bl:q,u_globe_pos:K,u_globe_radius:ae,u_viewport:pe,u_grid_matrix:Se?Float32Array.from(Se):new Float32Array(9),u_skirt_height:be});function P(v,u){return v!=null&&u!=null&&!(!v.hasData()||!u.hasData())&&v.demTexture!=null&&u.demTexture!=null&&v.tileID.key!==u.tileID.key}const ee=new class{constructor(){this.operations={}}newMorphing(v,u,m,y,S){if(v in this.operations){const C=this.operations[v];C.to.tileID.key!==m.tileID.key&&(C.queued=m)}else this.operations[v]={startTime:y,phase:0,duration:S,from:u,to:m,queued:null}}getMorphValuesForProxy(v){if(!(v in this.operations))return null;const u=this.operations[v];return{from:u.from,to:u.to,phase:u.phase}}update(v){for(const u in this.operations){const m=this.operations[u];for(m.phase=(v-m.startTime)/m.duration;m.phase>=1||!this._validOp(m);)if(!this._nextOp(m,v)){delete this.operations[u];break}}}_nextOp(v,u){return!!v.queued&&(v.from=v.to,v.to=v.queued,v.queued=null,v.phase=0,v.startTime=u,!0)}_validOp(v){return v.from.hasData()&&v.to.hasData()}},de={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function Me(v){return 6*Math.pow(1.5,22-v)}function St(v,u){const m=1<<v.z;return!u&&(v.x===0||v.x===m-1)||v.y===0||v.y===m-1}const Rt=v=>({u_matrix:v});function bn(v,u,m,y,S){if(S>0){const C=s.exported.now(),L=(C-v.timeAdded)/S,O=u?(C-u.timeAdded)/S:-1,$=m.getSource(),q=y.coveringZoomLevel({tileSize:$.tileSize,roundZoom:$.roundZoom}),K=!u||Math.abs(u.tileID.overscaledZ-q)>Math.abs(v.tileID.overscaledZ-q),ae=K&&v.refreshedUponExpiration?1:s.clamp(K?L:1-O,0,1);return v.refreshedUponExpiration&&L>=1&&(v.refreshedUponExpiration=!1),u?{opacity:1,mix:1-ae}:{opacity:ae,mix:0}}return{opacity:1,mix:0}}class di extends s.SourceCache{constructor(u){const m={type:"raster-dem",maxzoom:u.transform.maxZoom},y=new Ee(Hr(),null),S=ai("mock-dem",m,y,u.style);super("mock-dem",S,!1),S.setEventedParent(this),this._sourceLoaded=!0}_loadTile(u,m){u.state="loaded",m(null)}}class Lr extends s.SourceCache{constructor(u){const m=ai("proxy",{type:"geojson",maxzoom:u.transform.maxZoom},new Ee(Hr(),null),u.style);super("proxy",m,!1),m.setEventedParent(this),this.map=this.getSource().map=u,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(u,m,y){if(u.freezeTileCoverage)return;this.transform=u;const S=u.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce(((C,L)=>{if(C[L.key]="",!this._tiles[L.key]){const O=new s.Tile(L,this._source.tileSize*L.overscaleFactor(),u.tileZoom);O.state="loaded",this._tiles[L.key]=O}return C}),{});for(const C in this._tiles)C in S||(this.freeFBO(C),this._tiles[C].unloadVectorData(),delete this._tiles[C])}freeFBO(u){const m=this.proxyCachedFBO[u];if(m!==void 0){const y=Object.values(m);this.renderCachePool.push(...y),delete this.proxyCachedFBO[u]}}deallocRenderCache(){this.renderCache.forEach((u=>u.fb.destroy())),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class ki extends s.OverscaledTileID{constructor(u,m,y){super(u.overscaledZ,u.wrap,u.canonical.z,u.canonical.x,u.canonical.y),this.proxyTileKey=m,this.projMatrix=y}}class sr extends s.Elevation{constructor(u,m){super(),this.painter=u,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[y,S,C]=(function($){const q=new s.StructArrayLayout2i4,K=new s.StructArrayLayout3ui6,ae=131;q.reserve(17161),K.reserve(33800);const pe=s.EXTENT/128,be=s.EXTENT+pe/2,Se=be+pe;for(let Ce=-pe;Ce<Se;Ce+=pe)for(let le=-pe;le<Se;le+=pe){const ye=le<0||le>be||Ce<0||Ce>be?24575:0,Pe=s.clamp(Math.round(le),0,s.EXTENT),Le=s.clamp(Math.round(Ce),0,s.EXTENT);q.emplaceBack(Pe+ye,Le)}const xe=(Ce,le)=>{const ye=le*ae+Ce;K.emplaceBack(ye+1,ye,ye+ae),K.emplaceBack(ye+ae,ye+ae+1,ye+1)};for(let Ce=1;Ce<129;Ce++)for(let le=1;le<129;le++)xe(le,Ce);return[0,129].forEach((Ce=>{for(let le=0;le<130;le++)xe(le,Ce),xe(Ce,le)})),[q,K,32768]})(),L=u.context;this.gridBuffer=L.createVertexBuffer(y,s.posAttributes.members),this.gridIndexBuffer=L.createIndexBuffer(S),this.gridSegments=s.SegmentVector.simpleSegment(0,0,y.length,S.length),this.gridNoSkirtSegments=s.SegmentVector.simpleSegment(0,0,y.length,C),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new Lr(m.map),this.orthoMatrix=s.create(),s.ortho(this.orthoMatrix,this.painter.transform.projection.name==="globe"?.015:0,s.EXTENT,0,s.EXTENT,0,1);const O=L.gl;this._overlapStencilMode=new s.StencilMode({func:O.GEQUAL,mask:255},0,255,O.KEEP,O.KEEP,O.REPLACE),this._previousZoom=u.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=m,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new di(m.map)}set style(u){u.on("data",this._onStyleDataEvent.bind(this)),u.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=u,this._checkRenderCacheEfficiency(),this._style.map.on("moveend",(()=>{this._clearLineLayersFromRenderCache()}))}update(u,m,y){if(u&&u.terrain){this._style!==u&&(this.style=u),this.enabled=!0;const S=u.terrain.properties;this.sourceCache=u.terrain.drapeRenderMode===0?this._mockSourceCache:u._getSourceCache(S.get("source")),this._exaggeration=S.get("exaggeration");const C=()=>{this.sourceCache.used&&s.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const L=this.getScaledDemTileSize();this.sourceCache.update(m,L,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,C(),this._initializing=!0),C(),m.updateElevation(!0,y),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(m),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(u){this._findCoveringTileCache[u]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const u=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||u.efficiency!==100&&s.warnOnce(`Terrain render cache efficiency is not optimal (${u.efficiency}%) and performance
                may be affected negatively, consider placing all background, fill and line layers before layer
                with id '${u.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(u){u.coord&&u.dataType==="source"?this._clearRenderCacheForTile(u.sourceCacheId,u.coord):u.dataType==="style"&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const u in this._style._sourceCaches)this._style._sourceCaches[u].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach((u=>u.fb.destroy())),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const u=2*this.proxySourceCache.getSource().tileSize;return[u,u]}set useVertexMorphing(u){this._useVertexMorphing=u}updateTileBinding(u){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const m=this.proxySourceCache,y=this.painter.transform;this._initializing&&(this._initializing=y._centerAltitude===0&&this.getAtPointOrZero(s.MercatorCoordinate.fromLngLat(y.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);const S=this.proxyCoords=m.getIds().map(($=>{const q=m.getTileByID($).tileID;return q.projMatrix=y.calculateProjMatrix(q.toUnwrapped()),q}));(function($,q){const K=q.transform.pointCoordinate(q.transform.getCameraPoint()),ae=new s.Point(K.x,K.y);$.sort(((pe,be)=>{if(be.overscaledZ-pe.overscaledZ)return be.overscaledZ-pe.overscaledZ;const Se=new s.Point(pe.canonical.x+(1<<pe.canonical.z)*pe.wrap,pe.canonical.y),xe=new s.Point(be.canonical.x+(1<<be.canonical.z)*be.wrap,be.canonical.y),Ce=ae.mult(1<<pe.canonical.z);return Ce.x-=.5,Ce.y-=.5,Ce.distSqr(Se)-Ce.distSqr(xe)}))})(S,this.painter),this._previousZoom=y.zoom;const C=this.proxyToSource||{};this.proxyToSource={},S.forEach(($=>{this.proxyToSource[$.key]={}})),this.terrainTileForTile={};const L=this._style._sourceCaches;for(const $ in L){const q=L[$];if(!q.used||(q!==this.sourceCache&&this.resetTileLookupCache(q.id),this._setupProxiedCoordsForOrtho(q,u[$],C),q.usedForTerrain))continue;const K=u[$];q.getSource().reparseOverscaled&&this._assignTerrainTiles(K)}this.proxiedCoords[m.id]=S.map(($=>new ki($,$.key,this.orthoMatrix))),this._assignTerrainTiles(S),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(C),this.renderingToTexture=!1,this._updateTimestamp=s.exported.now();const O={};this._visibleDemTiles=[];for(const $ of this.proxyCoords){const q=this.terrainTileForTile[$.key];if(!q)continue;const K=q.tileID.key;K in O||(this._visibleDemTiles.push(q),O[K]=K)}}_assignTerrainTiles(u){this._initializing||u.forEach((m=>{if(this.terrainTileForTile[m.key])return;const y=this._findTileCoveringTileID(m,this.sourceCache);y&&(this.terrainTileForTile[m.key]=y)}))}_prepareDEMTextures(){const u=this.painter.context,m=u.gl;for(const y in this.terrainTileForTile){const S=this.terrainTileForTile[y],C=S.dem;!C||S.demTexture&&!S.needsDEMTextureUpload||(u.activeTexture.set(m.TEXTURE1),vl(this.painter,S,C))}}_prepareDemTileUniforms(u,m,y,S){if(!m||m.demTexture==null)return!1;const C=u.tileID.canonical,L=Math.pow(2,m.tileID.canonical.z-C.z),O=S||"";return y[`u_dem_tl${O}`]=[C.x*L%1,C.y*L%1],y[`u_dem_scale${O}`]=L,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const u=this.painter.context,m=u.gl;if(!this._emptyDepthBufferTexture){const y=new s.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new s.Texture(u,y,m.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let u=0;const m=this._visibleDemTiles.reduce(((y,S)=>{if(!S.dem)return y;const C=S.dem.tree.minimums[0];return C>0&&u++,y+C}),0);return u?m/u:0}_updateEmptyDEMTexture(){const u=this.painter.context,m=u.gl;u.activeTexture.set(m.TEXTURE2);const y=this._getLoadedAreaMinimum(),S=new s.RGBAImage({width:1,height:1},new Uint8Array(s.DEMData.pack(y,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let C=this._emptyDEMTexture;return C?C.update(S,{premultiply:!1}):C=this._emptyDEMTexture=new s.Texture(u,S,m.RGBA,{premultiply:!1}),C}setupElevationDraw(u,m,y){const S=this.painter.context,C=S.gl,L=(O=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:s.DEMData.getUnpackVector(O),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});var O;L.u_dem_size=this.sourceCache.getSource().tileSize,L.u_exaggeration=this.exaggeration();let $=null,q=null,K=1;if(y&&y.morphing&&this._useVertexMorphing){const ae=y.morphing.srcDemTile,pe=y.morphing.dstDemTile;K=y.morphing.phase,ae&&pe&&(this._prepareDemTileUniforms(u,ae,L,"_prev")&&(q=ae),this._prepareDemTileUniforms(u,pe,L)&&($=pe))}if(q&&$?(S.activeTexture.set(C.TEXTURE2),$.demTexture.bind(C.NEAREST,C.CLAMP_TO_EDGE,C.NEAREST),S.activeTexture.set(C.TEXTURE4),q.demTexture.bind(C.NEAREST,C.CLAMP_TO_EDGE,C.NEAREST),L.u_dem_lerp=K):($=this.terrainTileForTile[u.tileID.key],S.activeTexture.set(C.TEXTURE2),(this._prepareDemTileUniforms(u,$,L)?$.demTexture:this.emptyDEMTexture).bind(C.NEAREST,C.CLAMP_TO_EDGE)),S.activeTexture.set(C.TEXTURE3),y&&y.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(C.NEAREST,C.CLAMP_TO_EDGE),this._depthFBO&&(L.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(C.NEAREST,C.CLAMP_TO_EDGE),L.u_depth_size_inv=[1,1]),y&&y.useMeterToDem&&$){const ae=(1<<$.tileID.canonical.z)*s.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;L.u_meter_to_dem=ae}if(y&&y.labelPlaneMatrixInv&&(L.u_label_plane_matrix_inv=y.labelPlaneMatrixInv),m.setTerrainUniformValues(S,L),this.painter.transform.projection.name==="globe"){const ae=this.globeUniformValues(this.painter.transform,u.tileID.canonical,y&&y.useDenormalizedUpVectorScale);m.setGlobeUniformValues(S,ae)}}globeUniformValues(u,m,y){const S=u.projection;return{u_tile_tl_up:S.upVector(m,0,0),u_tile_tr_up:S.upVector(m,s.EXTENT,0),u_tile_br_up:S.upVector(m,s.EXTENT,s.EXTENT),u_tile_bl_up:S.upVector(m,0,s.EXTENT),u_tile_up_scale:y?s.globeMetersToEcef(1):S.upVectorScale(m,u.center.lat,u.worldSize).metersToTile}}renderToBackBuffer(u){const m=this.painter,y=this.painter.context;u.length!==0&&(y.bindFramebuffer.set(null),y.viewport.set([0,0,m.width,m.height]),m.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,(function(S,C,L,O,$){if(S.transform.projection.name==="globe")(function(q,K,ae,pe,be){const Se=q.context,xe=Se.gl;let Ce,le;const ye=q.options.showTerrainWireframe?2:0,Pe=q.transform,Le=s.globeUseCustomAntiAliasing(q,Se,Pe),We=(Zt,ft)=>{if(le===Zt)return;const Et=[de[Zt],"PROJECTION_GLOBE_VIEW"];Le&&Et.push("CUSTOM_ANTIALIASING"),ft&&Et.push(de[ye]),Ce=q.useProgram("globeRaster",null,Et),le=Zt},qe=q.colorModeForRenderPass(),Ye=new s.DepthMode(xe.LEQUAL,s.DepthMode.ReadWrite,q.depthRangeFor3D);ee.update(be);const ut=s.calculateGlobeMercatorMatrix(Pe),at=[s.mercatorXfromLng(Pe.center.lng),s.mercatorYfromLat(Pe.center.lat)],gt=ye?[!1,!0]:[!1],qt=q.globeSharedBuffers,dt=[Pe.width*s.exported.devicePixelRatio,Pe.height*s.exported.devicePixelRatio],Vt=Float32Array.from(Pe.globeMatrix),xt={useDenormalizedUpVectorScale:!0};if(gt.forEach((Zt=>{const ft=q.transform,Et=Me(ft.zoom)*K.exaggeration();le=-1;const Ht=Zt?xe.LINES:xe.TRIANGLES;for(const Nt of pe){const Jt=ae.getTile(Nt),Mn=s.StencilMode.disabled,Gn=K.prevTerrainTileForTile[Nt.key],En=K.terrainTileForTile[Nt.key];P(Gn,En)&&ee.newMorphing(Nt.key,Gn,En,be,250),Se.activeTexture.set(xe.TEXTURE0),Jt.texture.bind(xe.LINEAR,xe.CLAMP_TO_EDGE);const Rn=ee.getMorphValuesForProxy(Nt.key),gi=Rn?1:0;Rn&&s.extend$1(xt,{morphing:{srcDemTile:Rn.from,dstDemTile:Rn.to,phase:s.easeCubicInOut(Rn.phase)}});const pi=s.tileCornersToBounds(Nt.canonical),An=s.getLatitudinalLod(pi.getCenter().lat),Oi=s.getGridMatrix(Nt.canonical,pi,An,ft.worldSize/ft._pixelsPerMercatorPixel),Hi=s.globeNormalizeECEF(s.globeTileBounds(Nt.canonical)),Zi=Zo(ft.projMatrix,Vt,ut,Hi,s.globeToMercatorTransition(ft.zoom),at,ft.frustumCorners.TL,ft.frustumCorners.TR,ft.frustumCorners.BR,ft.frustumCorners.BL,ft.globeCenterInViewSpace,ft.globeRadius,dt,Et,Oi);if(We(gi,Zt),K.setupElevationDraw(Jt,Ce,xt),q.prepareDrawProgram(Se,Ce,Nt.toUnwrapped()),qt){const[Gi,js,Ps]=Zt?qt.getWirefameBuffers(q.context,An):qt.getGridBuffers(An,Et!==0);Ce.draw(Se,Ht,Ye,Mn,qe,s.CullFaceMode.backCCW,Zi,"globe_raster",Gi,js,Ps)}}})),qt){const Zt=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];Le&&Zt.push("CUSTOM_ANTIALIASING"),Ce=q.useProgram("globeRaster",null,Zt);for(const ft of pe){const{x:Et,y:Ht,z:Nt}=ft.canonical,Jt=Ht===0,Mn=Ht===(1<<Nt)-1,[Gn,En,Rn,gi]=qt.getPoleBuffers(Nt);if(gi&&(Jt||Mn)){const pi=ae.getTile(ft);Se.activeTexture.set(xe.TEXTURE0),pi.texture.bind(xe.LINEAR,xe.CLAMP_TO_EDGE);let An=s.globePoleMatrixForTile(Nt,Et,Pe);const Oi=s.globeNormalizeECEF(s.globeTileBounds(ft.canonical)),Hi=(Zi,Gi)=>Zi.draw(Se,xe.TRIANGLES,Ye,s.StencilMode.disabled,qe,s.CullFaceMode.disabled,Zo(Pe.projMatrix,An,An,Oi,0,at,Pe.frustumCorners.TL,Pe.frustumCorners.TR,Pe.frustumCorners.BR,Pe.frustumCorners.BL,Pe.globeCenterInViewSpace,Pe.globeRadius,dt,0),"globe_pole_raster",Gi,Rn,gi);K.setupElevationDraw(pi,Ce,xt),q.prepareDrawProgram(Se,Ce,ft.toUnwrapped()),Jt&&Hi(Ce,Gn),Mn&&(An=s.scale(s.create(),An,[1,-1,1]),Hi(Ce,En))}}}})(S,C,L,O,$);else{const q=S.context,K=q.gl;let ae,pe;const be=S.options.showTerrainWireframe?2:0,Se=(Pe,Le)=>{if(pe===Pe)return;const We=[de[Pe]];Le&&We.push(de[be]),ae=S.useProgram("terrainRaster",null,We),pe=Pe},xe=S.colorModeForRenderPass(),Ce=new s.DepthMode(K.LEQUAL,s.DepthMode.ReadWrite,S.depthRangeFor3D);ee.update($);const le=S.transform,ye=Me(le.zoom)*C.exaggeration();(be?[!1,!0]:[!1]).forEach((Pe=>{pe=-1;const Le=Pe?K.LINES:K.TRIANGLES,[We,qe]=Pe?C.getWirefameBuffer():[C.gridIndexBuffer,C.gridSegments];for(const Ye of O){const ut=L.getTile(Ye),at=s.StencilMode.disabled,gt=C.prevTerrainTileForTile[Ye.key],qt=C.terrainTileForTile[Ye.key];P(gt,qt)&&ee.newMorphing(Ye.key,gt,qt,$,250),q.activeTexture.set(K.TEXTURE0),ut.texture.bind(K.LINEAR,K.CLAMP_TO_EDGE,K.LINEAR_MIPMAP_NEAREST);const dt=ee.getMorphValuesForProxy(Ye.key),Vt=dt?1:0;let xt;dt&&(xt={morphing:{srcDemTile:dt.from,dstDemTile:dt.to,phase:s.easeCubicInOut(dt.phase)}});const Zt=uo(Ye.projMatrix,St(Ye.canonical,le.renderWorldCopies)?ye/10:ye);Se(Vt,Pe),C.setupElevationDraw(ut,ae,xt),S.prepareDrawProgram(q,ae,Ye.toUnwrapped()),ae.draw(q,Le,Ce,at,xe,s.CullFaceMode.backCCW,Zt,"terrain_raster",C.gridBuffer,We,qe)}}))}})(m,this,this.proxySourceCache,u,this._updateTimestamp),this.renderingToTexture=!0,m.gpuTimingDeferredRenderEnd(),u.splice(0,u.length))}renderBatch(u){if(this._drapedRenderBatches.length===0)return u+1;this.renderingToTexture=!0;const m=this.painter,y=this.painter.context,S=this.proxySourceCache,C=this.proxiedCoords[S.id],L=this._drapedRenderBatches.shift(),O=[],$=m.style.order;let q=0;for(const K of C){const ae=S.getTileByID(K.proxyTileKey),pe=S.proxyCachedFBO[K.key]?S.proxyCachedFBO[K.key][u]:void 0,be=pe!==void 0?S.renderCache[pe]:this.pool[q++],Se=pe!==void 0;if(ae.texture=be.tex,Se&&!be.dirty){O.push(ae.tileID);continue}let xe;y.bindFramebuffer.set(be.fb.framebuffer),this.renderedToTile=!1,be.dirty&&(y.clear({color:s.Color.transparent,stencil:0}),be.dirty=!1);for(let Ce=L.start;Ce<=L.end;++Ce){const le=m.style._layers[$[Ce]];if(le.isHidden(m.transform.zoom))continue;const ye=m.style._getLayerSourceCache(le),Pe=ye?this.proxyToSource[K.key][ye.id]:[K];if(!Pe)continue;const Le=Pe;y.viewport.set([0,0,be.fb.width,be.fb.height]),xe!==(ye?ye.id:null)&&(this._setupStencil(be,Pe,le,ye),xe=ye?ye.id:null),m.renderLayer(m,ye,le,Le)}this.renderedToTile?(be.dirty=!0,O.push(ae.tileID)):Se||--q,q===5&&(q=0,this.renderToBackBuffer(O))}return this.renderToBackBuffer(O),this.renderingToTexture=!1,y.bindFramebuffer.set(null),y.viewport.set([0,0,m.width,m.height]),L.end+1}postRender(){}renderCacheEfficiency(u){const m=u.order.length;if(m===0)return{efficiency:100};let y,S=0,C=0,L=!1;for(let O=0;O<m;++O){const $=u._layers[u.order[O]];this._style.isLayerDraped($)?(L&&++S,++C):L||(L=!0,y=$.id)}return C===0?{efficiency:100}:{efficiency:100*(1-S/C),firstUndrapedLayer:y}}getMinElevationBelowMSL(){let u=0;return this._visibleDemTiles.filter((m=>m.dem)).forEach((m=>{u=Math.min(u,m.dem.tree.minimums[0])})),u===0?u:(u-30)*this._exaggeration}raycast(u,m,y){if(!this._visibleDemTiles)return null;const S=this._visibleDemTiles.filter((C=>C.dem)).map((C=>{const L=C.tileID,O=1<<L.overscaledZ,{x:$,y:q}=L.canonical,K=$/O,ae=($+1)/O,pe=q/O,be=(q+1)/O;return{minx:K,miny:pe,maxx:ae,maxy:be,t:C.dem.tree.raycastRoot(K,pe,ae,be,u,m,y),tile:C}}));S.sort(((C,L)=>(C.t!==null?C.t:Number.MAX_VALUE)-(L.t!==null?L.t:Number.MAX_VALUE)));for(const C of S){if(C.t==null)return null;const L=C.tile.dem.tree.raycast(C.minx,C.miny,C.maxx,C.maxy,u,m,y);if(L!=null)return L}return null}_createFBO(){const u=this.painter.context,m=u.gl,y=this.drapeBufferSize;u.activeTexture.set(m.TEXTURE0);const S=new s.Texture(u,{width:y[0],height:y[1],data:null},m.RGBA);S.bind(m.LINEAR,m.CLAMP_TO_EDGE);const C=u.createFramebuffer(y[0],y[1],!1);return C.colorAttachment.set(S.texture),C.depthAttachment=new rt(u,C.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=u.createRenderbuffer(u.gl.DEPTH_STENCIL,y[0],y[1]),this._stencilRef=0,C.depthAttachment.set(this._sharedDepthStencil),u.clear({stencil:0})):C.depthAttachment.set(this._sharedDepthStencil),u.extTextureFilterAnisotropic&&!u.extTextureFilterAnisotropicForceOff&&m.texParameterf(m.TEXTURE_2D,u.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,u.extTextureFilterAnisotropicMax),{fb:C,tex:S,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const u in this._style._sourceCaches)if(this._style._sourceCaches[u].hasTransition())return!0;return this._style.order.some((u=>{const m=this._style._layers[u],y=m.isHidden(this.painter.transform.zoom);return m.type==="custom"?!y&&m.shouldRedrape():!y&&m.hasTransition()}))}_clearLineLayersFromRenderCache(){let u=!1;for(const y of this._style._getSources())if(y instanceof dn){u=!0;break}if(!u)return;const m={};for(let y=0;y<this._style.order.length;++y){const S=this._style._layers[this._style.order[y]],C=this._style._getLayerSourceCache(S);if(C&&!m[C.id]&&!S.isHidden(this.painter.transform.zoom)&&S.type==="line"&&S.widthExpression()instanceof s.ZoomDependentExpression){m[C.id]=!0;for(const L of this.proxyCoords){const O=this.proxyToSource[L.key][C.id];if(O)for(const $ of O)this._clearRenderCacheForTile(C.id,$)}}}}_clearRasterLayersFromRenderCache(){let u=!1;for(const y in this._style._sourceCaches)if(this._style._sourceCaches[y]._source instanceof rn){u=!0;break}if(!u)return;const m={};for(let y=0;y<this._style.order.length;++y){const S=this._style._layers[this._style.order[y]],C=this._style._getLayerSourceCache(S);if(!C||m[C.id]||S.isHidden(this.painter.transform.zoom)||S.type!=="raster")continue;const L=S.paint.get("raster-fade-duration");for(const O of this.proxyCoords){const $=this.proxyToSource[O.key][C.id];if($)for(const q of $){const K=bn(C.getTile(q),C.findLoadedParent(q,0),C,this.painter.transform,L);(K.opacity!==1||K.mix!==0)&&this._clearRenderCacheForTile(C.id,q)}}}}_setupDrapedRenderBatches(){const u=this._style.order,m=u.length;if(m===0)return;const y=[];let S,C=0,L=this._style._layers[u[C]];for(;!this._style.isLayerDraped(L)&&L.isHidden(this.painter.transform.zoom)&&++C<m;)L=this._style._layers[u[C]];for(;C<m;++C){const O=this._style._layers[u[C]];O.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(O)?S===void 0&&(S=C):S!==void 0&&(y.push({start:S,end:C-1}),S=void 0))}S!==void 0&&y.push({start:S,end:C-1}),this._drapedRenderBatches=y}_setupRenderCache(u){const m=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,m.renderCache.length>m.renderCachePool.length){const L=Object.values(m.proxyCachedFBO);m.proxyCachedFBO={};for(let O=0;O<L.length;++O){const $=Object.values(L[O]);m.renderCachePool.push(...$)}}return}this._clearRasterLayersFromRenderCache();const y=this.proxyCoords,S=this._tilesDirty;for(let L=y.length-1;L>=0;L--){const O=y[L];if(m.getTileByID(O.key),m.proxyCachedFBO[O.key]!==void 0){const $=u[O.key],q=this.proxyToSource[O.key];let K=0;for(const ae in q){const pe=q[ae],be=$[ae];if(!be||be.length!==pe.length||pe.some(((Se,xe)=>Se!==be[xe]||S[ae]&&S[ae].hasOwnProperty(Se.key)))){K=-1;break}++K}for(const ae in m.proxyCachedFBO[O.key])m.renderCache[m.proxyCachedFBO[O.key][ae]].dirty=K<0||K!==Object.values($).length}}const C=[...this._drapedRenderBatches];C.sort(((L,O)=>O.end-O.start-(L.end-L.start)));for(const L of C)for(const O of y){if(m.proxyCachedFBO[O.key])continue;let $=m.renderCachePool.pop();$===void 0&&m.renderCache.length<50&&($=m.renderCache.length,m.renderCache.push(this._createFBO())),$!==void 0&&(m.proxyCachedFBO[O.key]={},m.proxyCachedFBO[O.key][L.start]=$,m.renderCache[$].dirty=!0)}this._tilesDirty={}}_setupStencil(u,m,y,S){if(!S||!this._sourceTilesOverlap[S.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const C=this.painter.context,L=C.gl;if(m.length<=1)return void(this._overlapStencilType=!1);let O;if(y.isTileClipped())O=m.length,this._overlapStencilMode.test={func:L.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(m[0].overscaledZ>m[m.length-1].overscaledZ))return void(this._overlapStencilType=!1);O=1,this._overlapStencilMode.test={func:L.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+O>255&&(C.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=O,this._overlapStencilMode.ref=this._stencilRef,y.isTileClipped()&&this._renderTileClippingMasks(m,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(u){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[u.key]),this._overlapStencilMode):s.StencilMode.disabled}_renderTileClippingMasks(u,m){const y=this.painter,S=this.painter.context,C=S.gl;y._tileClippingMaskIDs={},S.setColorMode(s.ColorMode.disabled),S.setDepthMode(s.DepthMode.disabled);const L=y.useProgram("clippingMask");for(const O of u){const $=y._tileClippingMaskIDs[O.key]=--m;L.draw(S,C.TRIANGLES,s.DepthMode.disabled,new s.StencilMode({func:C.ALWAYS,mask:0},$,255,C.KEEP,C.KEEP,C.REPLACE),s.ColorMode.disabled,s.CullFaceMode.disabled,Rt(O.projMatrix),"$clipping",y.tileExtentBuffer,y.quadTriangleIndexBuffer,y.tileExtentSegments)}}pointCoordinate(u){const m=this.painter.transform;if(u.x<0||u.x>m.width||u.y<0||u.y>m.height)return null;const y=[u.x,u.y,1,1];s.transformMat4$1(y,y,m.pixelMatrixInverse),s.scale$1(y,y,1/y[3]),y[0]/=m.worldSize,y[1]/=m.worldSize;const S=m._camera.position,C=s.mercatorZfromAltitude(1,m.center.lat),L=[S[0],S[1],S[2]/C,0],O=s.subtract([],y.slice(0,3),L);s.normalize(O,O);const $=this.raycast(L,O,this._exaggeration);return $!==null&&$?(s.scaleAndAdd(L,L,O,$),L[3]=L[2],L[2]*=C,L):null}drawDepth(){const u=this.painter,m=u.context,y=this.proxySourceCache,S=Math.ceil(u.width),C=Math.ceil(u.height);if(!this._depthFBO||this._depthFBO.width===S&&this._depthFBO.height===C||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const L=m.gl,O=m.createFramebuffer(S,C,!0);m.activeTexture.set(L.TEXTURE0);const $=new s.Texture(m,{width:S,height:C,data:null},L.RGBA);$.bind(L.NEAREST,L.CLAMP_TO_EDGE),O.colorAttachment.set($.texture);const q=m.createRenderbuffer(m.gl.DEPTH_COMPONENT16,S,C);O.depthAttachment.set(q),this._depthFBO=O,this._depthTexture=$}m.bindFramebuffer.set(this._depthFBO.framebuffer),m.viewport.set([0,0,S,C]),(function(L,O,$,q){if(L.transform.projection.name==="globe")return;const K=L.context,ae=K.gl;K.clear({depth:1});const pe=L.useProgram("terrainDepth"),be=new s.DepthMode(ae.LESS,s.DepthMode.ReadWrite,L.depthRangeFor3D);for(const Se of q){const xe=$.getTile(Se),Ce=uo(Se.projMatrix,0);O.setupElevationDraw(xe,pe),pe.draw(K,ae.TRIANGLES,be,s.StencilMode.disabled,s.ColorMode.unblended,s.CullFaceMode.backCCW,Ce,"terrain_depth",O.gridBuffer,O.gridIndexBuffer,O.gridNoSkirtSegments)}})(u,this,y,this.proxyCoords)}_setupProxiedCoordsForOrtho(u,m,y){if(u.getSource()instanceof Jn)return this._setupProxiedCoordsForImageSource(u,m,y);this._findCoveringTileCache[u.id]=this._findCoveringTileCache[u.id]||{};const S=this.proxiedCoords[u.id]=[],C=this.proxyCoords;for(let O=0;O<C.length;O++){const $=C[O],q=this._findTileCoveringTileID($,u);if(q){const K=this._createProxiedId($,q,y[$.key]&&y[$.key][u.id]);S.push(K),this.proxyToSource[$.key][u.id]=[K]}}let L=!1;for(let O=0;O<m.length;O++){const $=u.getTile(m[O]);if(!$||!$.hasData())continue;const q=this._findTileCoveringTileID($.tileID,this.proxySourceCache);if(q&&q.tileID.canonical.z!==$.tileID.canonical.z){const K=this.proxyToSource[q.tileID.key][u.id],ae=this._createProxiedId(q.tileID,$,y[q.tileID.key]&&y[q.tileID.key][u.id]);K?K.splice(K.length-1,0,ae):this.proxyToSource[q.tileID.key][u.id]=[ae],S.push(ae),L=!0}}this._sourceTilesOverlap[u.id]=L}_setupProxiedCoordsForImageSource(u,m,y){if(!u.getSource().loaded())return;const S=this.proxiedCoords[u.id]=[],C=this.proxyCoords,L=u.getSource(),O=new s.Point(L.tileID.x,L.tileID.y)._div(1<<L.tileID.z),$=L.coordinates.map(s.MercatorCoordinate.fromLngLat).reduce(((K,ae)=>(K.min.x=Math.min(K.min.x,ae.x-O.x),K.min.y=Math.min(K.min.y,ae.y-O.y),K.max.x=Math.max(K.max.x,ae.x-O.x),K.max.y=Math.max(K.max.y,ae.y-O.y),K)),{min:new s.Point(Number.MAX_VALUE,Number.MAX_VALUE),max:new s.Point(-Number.MAX_VALUE,-Number.MAX_VALUE)}),q=(K,ae)=>{const pe=K.wrap+K.canonical.x/(1<<K.canonical.z),be=K.canonical.y/(1<<K.canonical.z),Se=s.EXTENT/(1<<K.canonical.z),xe=ae.wrap+ae.canonical.x/(1<<ae.canonical.z),Ce=ae.canonical.y/(1<<ae.canonical.z);return pe+Se<xe+$.min.x||pe>xe+$.max.x||be+Se<Ce+$.min.y||be>Ce+$.max.y};for(let K=0;K<C.length;K++){const ae=C[K];for(let pe=0;pe<m.length;pe++){const be=u.getTile(m[pe]);if(!be||!be.hasData()||q(ae,be.tileID))continue;const Se=this._createProxiedId(ae,be,y[ae.key]&&y[ae.key][u.id]),xe=this.proxyToSource[ae.key][u.id];xe?xe.push(Se):this.proxyToSource[ae.key][u.id]=[Se],S.push(Se)}}}_createProxiedId(u,m,y){let S=this.orthoMatrix;if(y){const C=y.find((L=>L.key===m.tileID.key));if(C)return C}if(m.tileID.key!==u.key){const C=u.canonical.z-m.tileID.canonical.z;let L,O,$;S=s.create();const q=m.tileID.wrap-u.wrap<<u.overscaledZ;C>0?(L=s.EXTENT>>C,O=L*((m.tileID.canonical.x<<C)-u.canonical.x+q),$=L*((m.tileID.canonical.y<<C)-u.canonical.y)):(L=s.EXTENT<<-C,O=s.EXTENT*(m.tileID.canonical.x-(u.canonical.x+q<<-C)),$=s.EXTENT*(m.tileID.canonical.y-(u.canonical.y<<-C))),s.ortho(S,0,L,0,L,0,1),s.translate(S,S,[O,$,0])}return new ki(m.tileID,u.key,S)}_findTileCoveringTileID(u,m){let y=m.getTile(u);if(y&&y.hasData())return y;const S=this._findCoveringTileCache[m.id],C=S[u.key];if(y=C?m.getTileByID(C):null,y&&y.hasData()||C===null)return y;let L=y?y.tileID:u,O=L.overscaledZ;const $=m.getSource().minzoom,q=[];if(!C){const ae=m.getSource().maxzoom;if(u.canonical.z>=ae){const pe=u.canonical.z-ae;m.getSource().reparseOverscaled?(O=Math.max(u.canonical.z+2,m.transform.tileZoom),L=new s.OverscaledTileID(O,u.wrap,ae,u.canonical.x>>pe,u.canonical.y>>pe)):pe!==0&&(O=ae,L=new s.OverscaledTileID(O,u.wrap,ae,u.canonical.x>>pe,u.canonical.y>>pe))}L.key!==u.key&&(q.push(L.key),y=m.getTile(L))}const K=ae=>{q.forEach((pe=>{S[pe]=ae})),q.length=0};for(O-=1;O>=$&&(!y||!y.hasData());O--){y&&K(y.tileID.key);const ae=L.calculateScaledKey(O);if(y=m.getTileByID(ae),y&&y.hasData())break;const pe=S[ae];if(pe===null)break;pe===void 0?q.push(ae):y=m.getTileByID(pe)}return K(y?y.tileID.key:null),y&&y.hasData()?y:null}findDEMTileFor(u){return this.enabled?this._findTileCoveringTileID(u,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(u,m){let y=this._tilesDirty[u];y||(y=this._tilesDirty[u]={}),y[m.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const u=(function(m){let y=0;const S=new s.StructArrayLayout2ui4,C=131;for(let L=1;L<129;L++){for(let O=1;O<129;O++)y=L*C+O,S.emplaceBack(y,y+1),S.emplaceBack(y,y+C),S.emplaceBack(y+1,y+C),L===128&&S.emplaceBack(y+C,y+C+1);S.emplaceBack(y+1,y+1+C)}return S})();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(u),this.wireframeSegments=s.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,u.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}class Qn{static cacheKey(u,m,y,S){let C=`${m}${S?S.cacheKey:""}`;for(const L of y)u.usedDefines.includes(L)&&(C+=`/${L}`);return C}constructor(u,m,y,S,C,L){const O=u.gl;this.program=O.createProgram();const $=(function(le){const ye=[];for(let Pe=0;Pe<le.length;Pe++){if(le[Pe]===null)continue;const Le=le[Pe].split(" ");ye.push(Le.pop())}return ye})(y.staticAttributes),q=S?S.getBinderAttributes():[],K=$.concat(q);let ae=S?S.defines():[];ae=ae.concat(L.map((le=>`#define ${le}`)));const pe=u.isWebGL2?`#version 300 es
`:"",be=pe+ae.concat(u.extStandardDerivatives&&pe.length===0?`#extension GL_OES_standard_derivatives : enable
`.concat(xu):xu,xu,gl,jc.fragmentSource,Za.fragmentSource,y.fragmentSource).join(`
`),Se=pe+ae.concat(`
#ifdef GL_ES
precision highp float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`,gl,jc.vertexSource,Za.vertexSource,vc.vertexSource,y.vertexSource).join(`
`),xe=O.createShader(O.FRAGMENT_SHADER);if(O.isContextLost())return void(this.failedToCreate=!0);O.shaderSource(xe,be),O.compileShader(xe),O.attachShader(this.program,xe);const Ce=O.createShader(O.VERTEX_SHADER);if(O.isContextLost())this.failedToCreate=!0;else{O.shaderSource(Ce,Se),O.compileShader(Ce),O.attachShader(this.program,Ce),this.attributes={},this.numAttributes=K.length;for(let le=0;le<this.numAttributes;le++)K[le]&&(O.bindAttribLocation(this.program,le,K[le]),this.attributes[K[le]]=le);O.linkProgram(this.program),O.deleteShader(Ce),O.deleteShader(xe),this.fixedUniforms=C(u),this.binderUniforms=S?S.getUniforms(u):[],L.includes("TERRAIN")&&(this.terrainUniforms=(le=>({u_dem:new s.Uniform1i(le),u_dem_prev:new s.Uniform1i(le),u_dem_unpack:new s.Uniform4f(le),u_dem_tl:new s.Uniform2f(le),u_dem_scale:new s.Uniform1f(le),u_dem_tl_prev:new s.Uniform2f(le),u_dem_scale_prev:new s.Uniform1f(le),u_dem_size:new s.Uniform1f(le),u_dem_lerp:new s.Uniform1f(le),u_exaggeration:new s.Uniform1f(le),u_depth:new s.Uniform1i(le),u_depth_size_inv:new s.Uniform2f(le),u_meter_to_dem:new s.Uniform1f(le),u_label_plane_matrix_inv:new s.UniformMatrix4f(le)}))(u)),L.includes("GLOBE")&&(this.globeUniforms=(le=>({u_tile_tl_up:new s.Uniform3f(le),u_tile_tr_up:new s.Uniform3f(le),u_tile_br_up:new s.Uniform3f(le),u_tile_bl_up:new s.Uniform3f(le),u_tile_up_scale:new s.Uniform1f(le)}))(u)),L.includes("FOG")&&(this.fogUniforms=(le=>({u_fog_matrix:new s.UniformMatrix4f(le),u_fog_range:new s.Uniform2f(le),u_fog_color:new s.Uniform4f(le),u_fog_horizon_blend:new s.Uniform1f(le),u_fog_temporal_offset:new s.Uniform1f(le),u_frustum_tl:new s.Uniform3f(le),u_frustum_tr:new s.Uniform3f(le),u_frustum_br:new s.Uniform3f(le),u_frustum_bl:new s.Uniform3f(le),u_globe_pos:new s.Uniform3f(le),u_globe_radius:new s.Uniform1f(le),u_globe_transition:new s.Uniform1f(le),u_is_globe:new s.Uniform1i(le),u_viewport:new s.Uniform2f(le)}))(u))}}setTerrainUniformValues(u,m){if(!this.terrainUniforms)return;const y=this.terrainUniforms;if(!this.failedToCreate){u.program.set(this.program);for(const S in m)y[S]&&y[S].set(this.program,S,m[S])}}setGlobeUniformValues(u,m){if(!this.globeUniforms)return;const y=this.globeUniforms;if(!this.failedToCreate){u.program.set(this.program);for(const S in m)y[S]&&y[S].set(this.program,S,m[S])}}setFogUniformValues(u,m){if(!this.fogUniforms)return;const y=this.fogUniforms;if(!this.failedToCreate){u.program.set(this.program);for(const S in m)y[S].set(this.program,S,m[S])}}draw(u,m,y,S,C,L,O,$,q,K,ae,pe,be,Se,xe){const Ce=u.gl;if(this.failedToCreate)return;u.program.set(this.program),u.setDepthMode(y),u.setStencilMode(S),u.setColorMode(C),u.setCullFace(L);for(const ye of Object.keys(this.fixedUniforms))this.fixedUniforms[ye].set(this.program,ye,O[ye]);Se&&Se.setUniforms(this.program,u,this.binderUniforms,pe,{zoom:be});const le={[Ce.LINES]:2,[Ce.TRIANGLES]:3,[Ce.LINE_STRIP]:1}[m];for(const ye of ae.get()){const Pe=ye.vaos||(ye.vaos={});(Pe[$]||(Pe[$]=new Wc)).bind(u,this,q,Se?Se.getPaintVertexBuffers():[],K,ye.vertexOffset,xe||[]),Ce.drawElements(m,ye.primitiveLength*le,Ce.UNSIGNED_SHORT,ye.primitiveOffset*le*2)}}}function Ys(v,u){const m=Math.pow(2,u.tileID.overscaledZ),y=u.tileSize*Math.pow(2,v.transform.tileZoom)/m,S=y*(u.tileID.canonical.x+u.tileID.wrap*m),C=y*u.tileID.canonical.y;return{u_image:0,u_texsize:u.imageAtlasTexture.size,u_tile_units_to_pixels:1/it(u,1,v.transform.tileZoom),u_pixel_coord_upper:[S>>16,C>>16],u_pixel_coord_lower:[65535&S,65535&C]}}const Ja=s.create(),xa=(v,u,m,y,S,C,L,O,$,q,K)=>{const ae=u.style.light,pe=ae.properties.get("position"),be=[pe.x,pe.y,pe.z],Se=s.create$1();ae.properties.get("anchor")==="viewport"&&(s.fromRotation(Se,-u.transform.angle),s.transformMat3(be,be,Se));const xe=ae.properties.get("color"),Ce=u.transform,le={u_matrix:v,u_lightpos:be,u_lightintensity:ae.properties.get("intensity"),u_lightcolor:[xe.r,xe.g,xe.b],u_vertical_gradient:+m,u_opacity:y,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Ja,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:S,u_edge_radius:C};return Ce.projection.name==="globe"&&(le.u_tile_id=[L.canonical.x,L.canonical.y,1<<L.canonical.z],le.u_zoom_transition=$,le.u_inv_rot_matrix=K,le.u_merc_center=q,le.u_up_dir=Ce.projection.upVector(new s.CanonicalTileID(0,0,0),q[0]*s.EXTENT,q[1]*s.EXTENT),le.u_height_lift=O),le},Gc=(v,u,m,y,S,C,L,O,$,q,K,ae)=>{const pe=xa(v,u,m,y,S,C,L,$,q,K,ae),be={u_height_factor:-Math.pow(2,L.overscaledZ)/O.tileSize/8};return s.extend(pe,Ys(u,O),be)},Qa=v=>({u_matrix:v}),gm=(v,u,m)=>s.extend(Qa(v),Ys(u,m)),P_=(v,u)=>({u_matrix:v,u_world:u}),M_=(v,u,m,y)=>s.extend(gm(v,u,m),{u_world:y}),D_=s.create(),Jo=(v,u,m,y,S,C)=>{const L=v.transform,O=L.projection.name==="globe";let $;if(C.paint.get("circle-pitch-alignment")==="map")if(O){const K=s.globePixelsToTileUnits(L.zoom,u.canonical)*L._pixelsPerMercatorPixel;$=Float32Array.from([K,0,0,K])}else $=L.calculatePixelsToTileUnitsMatrix(m);else $=new Float32Array([L.pixelsToGLUnits[0],0,0,L.pixelsToGLUnits[1]]);const q={u_camera_to_center_distance:L.cameraToCenterDistance,u_matrix:v.translatePosMatrix(u.projMatrix,m,C.paint.get("circle-translate"),C.paint.get("circle-translate-anchor")),u_device_pixel_ratio:s.exported.devicePixelRatio,u_extrude_scale:$,u_inv_rot_matrix:D_,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(O){q.u_inv_rot_matrix=y,q.u_merc_center=S,q.u_tile_id=[u.canonical.x,u.canonical.y,1<<u.canonical.z],q.u_zoom_transition=s.globeToMercatorTransition(L.zoom);const K=S[0]*s.EXTENT,ae=S[1]*s.EXTENT;q.u_up_dir=L.projection.upVector(new s.CanonicalTileID(0,0,0),K,ae)}return q},Oh=v=>{const u=[];return v.paint.get("circle-pitch-alignment")==="map"&&u.push("PITCH_WITH_MAP"),v.paint.get("circle-pitch-scale")==="map"&&u.push("SCALE_WITH_MAP"),u},Vh=(v,u,m,y)=>{const S=s.EXTENT/m.tileSize;return{u_matrix:v,u_camera_to_center_distance:u.getCameraToCenterDistance(y),u_extrude_scale:[u.pixelsToGLUnits[0]/S,u.pixelsToGLUnits[1]/S]}},vd=(v,u,m=1)=>({u_matrix:v,u_color:u,u_overlay:0,u_overlay_scale:m}),pg=s.create(),gg=(v,u,m,y,S,C,L)=>{const O=v.transform,$=O.projection.name==="globe",q=$?s.globePixelsToTileUnits(O.zoom,u.canonical)*O._pixelsPerMercatorPixel:it(m,1,C),K={u_matrix:u.projMatrix,u_extrude_scale:q,u_intensity:L,u_inv_rot_matrix:pg,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if($){K.u_inv_rot_matrix=y,K.u_merc_center=S,K.u_tile_id=[u.canonical.x,u.canonical.y,1<<u.canonical.z],K.u_zoom_transition=s.globeToMercatorTransition(O.zoom);const ae=S[0]*s.EXTENT,pe=S[1]*s.EXTENT;K.u_up_dir=O.projection.upVector(new s.CanonicalTileID(0,0,0),ae,pe)}return K},vg=(v,u,m,y,S,C,L)=>{const O=v.transform,$=O.calculatePixelsToTileUnitsMatrix(u);return{u_matrix:vm(v,u,m,y),u_pixels_to_tile_units:$,u_device_pixel_ratio:C,u_units_to_pixels:[1/O.pixelsToGLUnits[0],1/O.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:S,u_texsize:Eu(m)?u.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:Su(u,v.transform),u_alpha_discard_threshold:0,u_trim_offset:L}},_c=(v,u,m,y,S)=>{const C=v.transform;return{u_matrix:vm(v,u,m,y),u_texsize:u.imageAtlasTexture.size,u_pixels_to_tile_units:C.calculatePixelsToTileUnitsMatrix(u),u_device_pixel_ratio:S,u_image:0,u_tile_units_to_pixels:Su(u,C),u_units_to_pixels:[1/C.pixelsToGLUnits[0],1/C.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function Su(v,u){return 1/it(v,1,u.tileZoom)}function vm(v,u,m,y){return v.translatePosMatrix(y||u.tileID.projMatrix,u,m.paint.get("line-translate"),m.paint.get("line-translate-anchor"))}function Eu(v){const u=v.paint.get("line-dasharray").value;return u.value||u.kind!=="constant"}const _m=(v,u,m,y,S,C)=>{return{u_matrix:v,u_tl_parent:u,u_scale_parent:m,u_fade_t:y.mix,u_opacity:y.opacity*S.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:S.paint.get("raster-brightness-min"),u_brightness_high:S.paint.get("raster-brightness-max"),u_saturation_factor:(O=S.paint.get("raster-saturation"),O>0?1-1/(1.001-O):-O),u_contrast_factor:(L=S.paint.get("raster-contrast"),L>0?1/(1-L):1+L),u_spin_weights:_l(S.paint.get("raster-hue-rotate")),u_perspective_transform:C};var L,O};function _l(v){v*=Math.PI/180;const u=Math.sin(v),m=Math.cos(v);return[(2*m+1)/3,(-Math.sqrt(3)*u-m+1)/3,(Math.sqrt(3)*u-m+1)/3]}const _d=s.create(),Bh=(v,u,m,y,S,C,L,O,$,q,K,ae,pe,be,Se,xe)=>{const Ce=S.transform,le={u_is_size_zoom_constant:+(v==="constant"||v==="source"),u_is_size_feature_constant:+(v==="constant"||v==="camera"),u_size_t:u?u.uSizeT:0,u_size:u?u.uSize:0,u_camera_to_center_distance:Ce.cameraToCenterDistance,u_rotate_symbol:+m,u_aspect_ratio:Ce.width/Ce.height,u_fade_change:S.options.fadeDuration?S.symbolFadeChange:1,u_matrix:C,u_label_plane_matrix:L,u_coord_matrix:O,u_is_text:+$,u_pitch_with_map:+y,u_texsize:q,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:_d,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:_d,u_up_vector:[0,-1,0]};return xe.name==="globe"&&(le.u_tile_id=[K.canonical.x,K.canonical.y,1<<K.canonical.z],le.u_zoom_transition=ae,le.u_inv_rot_matrix=be,le.u_merc_center=pe,le.u_camera_forward=Ce._camera.forward(),le.u_ecef_origin=s.globeECEFOrigin(Ce.globeMatrix,K.toUnwrapped()),le.u_tile_matrix=Float32Array.from(Ce.globeMatrix),le.u_up_vector=Se),le},yd=(v,u,m,y,S,C,L,O,$,q,K,ae,pe,be,Se,xe,Ce)=>s.extend(Bh(v,u,m,y,S,C,L,O,$,q,ae,pe,be,Se,xe,Ce),{u_gamma_scale:y?S.transform.cameraToCenterDistance*Math.cos(S.terrain?0:S.transform._pitch):1,u_device_pixel_ratio:s.exported.devicePixelRatio,u_is_halo:1}),bd=(v,u,m,y,S,C,L,O,$,q,K,ae,pe,be,Se,xe)=>s.extend(yd(v,u,m,y,S,C,L,O,!0,$,!0,K,ae,pe,be,Se,xe),{u_texsize_icon:q,u_texture_icon:1}),Fh=(v,u,m)=>({u_matrix:v,u_opacity:u,u_color:m}),ym=(v,u,m,y,S)=>s.extend((function(C,L,O){const $=L.imageManager.getPattern(C.toString()),{width:q,height:K}=L.imageManager.getPixelSize(),ae=Math.pow(2,O.tileID.overscaledZ),pe=O.tileSize*Math.pow(2,L.transform.tileZoom)/ae,be=pe*(O.tileID.canonical.x+O.tileID.wrap*ae),Se=pe*O.tileID.canonical.y;return{u_image:0,u_pattern_tl:$.tl,u_pattern_br:$.br,u_texsize:[q,K],u_pattern_size:$.displaySize,u_tile_units_to_pixels:1/it(O,1,L.transform.tileZoom),u_pixel_coord_upper:[be>>16,Se>>16],u_pixel_coord_lower:[65535&be,65535&Se]}})(y,m,S),{u_matrix:v,u_opacity:u}),Lo={fillExtrusion:v=>({u_matrix:new s.UniformMatrix4f(v),u_lightpos:new s.Uniform3f(v),u_lightintensity:new s.Uniform1f(v),u_lightcolor:new s.Uniform3f(v),u_vertical_gradient:new s.Uniform1f(v),u_opacity:new s.Uniform1f(v),u_edge_radius:new s.Uniform1f(v),u_ao:new s.Uniform2f(v),u_tile_id:new s.Uniform3f(v),u_zoom_transition:new s.Uniform1f(v),u_inv_rot_matrix:new s.UniformMatrix4f(v),u_merc_center:new s.Uniform2f(v),u_up_dir:new s.Uniform3f(v),u_height_lift:new s.Uniform1f(v)}),fillExtrusionPattern:v=>({u_matrix:new s.UniformMatrix4f(v),u_lightpos:new s.Uniform3f(v),u_lightintensity:new s.Uniform1f(v),u_lightcolor:new s.Uniform3f(v),u_vertical_gradient:new s.Uniform1f(v),u_height_factor:new s.Uniform1f(v),u_edge_radius:new s.Uniform1f(v),u_ao:new s.Uniform2f(v),u_tile_id:new s.Uniform3f(v),u_zoom_transition:new s.Uniform1f(v),u_inv_rot_matrix:new s.UniformMatrix4f(v),u_merc_center:new s.Uniform2f(v),u_up_dir:new s.Uniform3f(v),u_height_lift:new s.Uniform1f(v),u_image:new s.Uniform1i(v),u_texsize:new s.Uniform2f(v),u_pixel_coord_upper:new s.Uniform2f(v),u_pixel_coord_lower:new s.Uniform2f(v),u_tile_units_to_pixels:new s.Uniform1f(v),u_opacity:new s.Uniform1f(v)}),fill:v=>({u_matrix:new s.UniformMatrix4f(v)}),fillPattern:v=>({u_matrix:new s.UniformMatrix4f(v),u_image:new s.Uniform1i(v),u_texsize:new s.Uniform2f(v),u_pixel_coord_upper:new s.Uniform2f(v),u_pixel_coord_lower:new s.Uniform2f(v),u_tile_units_to_pixels:new s.Uniform1f(v)}),fillOutline:v=>({u_matrix:new s.UniformMatrix4f(v),u_world:new s.Uniform2f(v)}),fillOutlinePattern:v=>({u_matrix:new s.UniformMatrix4f(v),u_world:new s.Uniform2f(v),u_image:new s.Uniform1i(v),u_texsize:new s.Uniform2f(v),u_pixel_coord_upper:new s.Uniform2f(v),u_pixel_coord_lower:new s.Uniform2f(v),u_tile_units_to_pixels:new s.Uniform1f(v)}),circle:v=>({u_camera_to_center_distance:new s.Uniform1f(v),u_extrude_scale:new s.UniformMatrix2f(v),u_device_pixel_ratio:new s.Uniform1f(v),u_matrix:new s.UniformMatrix4f(v),u_inv_rot_matrix:new s.UniformMatrix4f(v),u_merc_center:new s.Uniform2f(v),u_tile_id:new s.Uniform3f(v),u_zoom_transition:new s.Uniform1f(v),u_up_dir:new s.Uniform3f(v)}),collisionBox:v=>({u_matrix:new s.UniformMatrix4f(v),u_camera_to_center_distance:new s.Uniform1f(v),u_extrude_scale:new s.Uniform2f(v)}),collisionCircle:v=>({u_matrix:new s.UniformMatrix4f(v),u_inv_matrix:new s.UniformMatrix4f(v),u_camera_to_center_distance:new s.Uniform1f(v),u_viewport_size:new s.Uniform2f(v)}),debug:v=>({u_color:new s.UniformColor(v),u_matrix:new s.UniformMatrix4f(v),u_overlay:new s.Uniform1i(v),u_overlay_scale:new s.Uniform1f(v)}),clippingMask:v=>({u_matrix:new s.UniformMatrix4f(v)}),heatmap:v=>({u_extrude_scale:new s.Uniform1f(v),u_intensity:new s.Uniform1f(v),u_matrix:new s.UniformMatrix4f(v),u_inv_rot_matrix:new s.UniformMatrix4f(v),u_merc_center:new s.Uniform2f(v),u_tile_id:new s.Uniform3f(v),u_zoom_transition:new s.Uniform1f(v),u_up_dir:new s.Uniform3f(v)}),heatmapTexture:v=>({u_image:new s.Uniform1i(v),u_color_ramp:new s.Uniform1i(v),u_opacity:new s.Uniform1f(v)}),hillshade:v=>({u_matrix:new s.UniformMatrix4f(v),u_image:new s.Uniform1i(v),u_latrange:new s.Uniform2f(v),u_light:new s.Uniform2f(v),u_shadow:new s.UniformColor(v),u_highlight:new s.UniformColor(v),u_accent:new s.UniformColor(v)}),hillshadePrepare:v=>({u_matrix:new s.UniformMatrix4f(v),u_image:new s.Uniform1i(v),u_dimension:new s.Uniform2f(v),u_zoom:new s.Uniform1f(v),u_unpack:new s.Uniform4f(v)}),line:v=>({u_matrix:new s.UniformMatrix4f(v),u_pixels_to_tile_units:new s.UniformMatrix2f(v),u_device_pixel_ratio:new s.Uniform1f(v),u_units_to_pixels:new s.Uniform2f(v),u_dash_image:new s.Uniform1i(v),u_gradient_image:new s.Uniform1i(v),u_image_height:new s.Uniform1f(v),u_texsize:new s.Uniform2f(v),u_tile_units_to_pixels:new s.Uniform1f(v),u_alpha_discard_threshold:new s.Uniform1f(v),u_trim_offset:new s.Uniform2f(v)}),linePattern:v=>({u_matrix:new s.UniformMatrix4f(v),u_texsize:new s.Uniform2f(v),u_pixels_to_tile_units:new s.UniformMatrix2f(v),u_device_pixel_ratio:new s.Uniform1f(v),u_image:new s.Uniform1i(v),u_units_to_pixels:new s.Uniform2f(v),u_tile_units_to_pixels:new s.Uniform1f(v),u_alpha_discard_threshold:new s.Uniform1f(v)}),raster:v=>({u_matrix:new s.UniformMatrix4f(v),u_tl_parent:new s.Uniform2f(v),u_scale_parent:new s.Uniform1f(v),u_fade_t:new s.Uniform1f(v),u_opacity:new s.Uniform1f(v),u_image0:new s.Uniform1i(v),u_image1:new s.Uniform1i(v),u_brightness_low:new s.Uniform1f(v),u_brightness_high:new s.Uniform1f(v),u_saturation_factor:new s.Uniform1f(v),u_contrast_factor:new s.Uniform1f(v),u_spin_weights:new s.Uniform3f(v),u_perspective_transform:new s.Uniform2f(v)}),symbolIcon:v=>({u_is_size_zoom_constant:new s.Uniform1i(v),u_is_size_feature_constant:new s.Uniform1i(v),u_size_t:new s.Uniform1f(v),u_size:new s.Uniform1f(v),u_camera_to_center_distance:new s.Uniform1f(v),u_rotate_symbol:new s.Uniform1i(v),u_aspect_ratio:new s.Uniform1f(v),u_fade_change:new s.Uniform1f(v),u_matrix:new s.UniformMatrix4f(v),u_label_plane_matrix:new s.UniformMatrix4f(v),u_coord_matrix:new s.UniformMatrix4f(v),u_is_text:new s.Uniform1i(v),u_pitch_with_map:new s.Uniform1i(v),u_texsize:new s.Uniform2f(v),u_tile_id:new s.Uniform3f(v),u_zoom_transition:new s.Uniform1f(v),u_inv_rot_matrix:new s.UniformMatrix4f(v),u_merc_center:new s.Uniform2f(v),u_camera_forward:new s.Uniform3f(v),u_tile_matrix:new s.UniformMatrix4f(v),u_up_vector:new s.Uniform3f(v),u_ecef_origin:new s.Uniform3f(v),u_texture:new s.Uniform1i(v)}),symbolSDF:v=>({u_is_size_zoom_constant:new s.Uniform1i(v),u_is_size_feature_constant:new s.Uniform1i(v),u_size_t:new s.Uniform1f(v),u_size:new s.Uniform1f(v),u_camera_to_center_distance:new s.Uniform1f(v),u_rotate_symbol:new s.Uniform1i(v),u_aspect_ratio:new s.Uniform1f(v),u_fade_change:new s.Uniform1f(v),u_matrix:new s.UniformMatrix4f(v),u_label_plane_matrix:new s.UniformMatrix4f(v),u_coord_matrix:new s.UniformMatrix4f(v),u_is_text:new s.Uniform1i(v),u_pitch_with_map:new s.Uniform1i(v),u_texsize:new s.Uniform2f(v),u_texture:new s.Uniform1i(v),u_gamma_scale:new s.Uniform1f(v),u_device_pixel_ratio:new s.Uniform1f(v),u_tile_id:new s.Uniform3f(v),u_zoom_transition:new s.Uniform1f(v),u_inv_rot_matrix:new s.UniformMatrix4f(v),u_merc_center:new s.Uniform2f(v),u_camera_forward:new s.Uniform3f(v),u_tile_matrix:new s.UniformMatrix4f(v),u_up_vector:new s.Uniform3f(v),u_ecef_origin:new s.Uniform3f(v),u_is_halo:new s.Uniform1i(v)}),symbolTextAndIcon:v=>({u_is_size_zoom_constant:new s.Uniform1i(v),u_is_size_feature_constant:new s.Uniform1i(v),u_size_t:new s.Uniform1f(v),u_size:new s.Uniform1f(v),u_camera_to_center_distance:new s.Uniform1f(v),u_rotate_symbol:new s.Uniform1i(v),u_aspect_ratio:new s.Uniform1f(v),u_fade_change:new s.Uniform1f(v),u_matrix:new s.UniformMatrix4f(v),u_label_plane_matrix:new s.UniformMatrix4f(v),u_coord_matrix:new s.UniformMatrix4f(v),u_is_text:new s.Uniform1i(v),u_pitch_with_map:new s.Uniform1i(v),u_texsize:new s.Uniform2f(v),u_texsize_icon:new s.Uniform2f(v),u_texture:new s.Uniform1i(v),u_texture_icon:new s.Uniform1i(v),u_gamma_scale:new s.Uniform1f(v),u_device_pixel_ratio:new s.Uniform1f(v),u_is_halo:new s.Uniform1i(v)}),background:v=>({u_matrix:new s.UniformMatrix4f(v),u_opacity:new s.Uniform1f(v),u_color:new s.UniformColor(v)}),backgroundPattern:v=>({u_matrix:new s.UniformMatrix4f(v),u_opacity:new s.Uniform1f(v),u_image:new s.Uniform1i(v),u_pattern_tl:new s.Uniform2f(v),u_pattern_br:new s.Uniform2f(v),u_texsize:new s.Uniform2f(v),u_pattern_size:new s.Uniform2f(v),u_pixel_coord_upper:new s.Uniform2f(v),u_pixel_coord_lower:new s.Uniform2f(v),u_tile_units_to_pixels:new s.Uniform1f(v)}),terrainRaster:Hc,terrainDepth:Hc,skybox:v=>({u_matrix:new s.UniformMatrix4f(v),u_sun_direction:new s.Uniform3f(v),u_cubemap:new s.Uniform1i(v),u_opacity:new s.Uniform1f(v),u_temporal_offset:new s.Uniform1f(v)}),skyboxGradient:v=>({u_matrix:new s.UniformMatrix4f(v),u_color_ramp:new s.Uniform1i(v),u_center_direction:new s.Uniform3f(v),u_radius:new s.Uniform1f(v),u_opacity:new s.Uniform1f(v),u_temporal_offset:new s.Uniform1f(v)}),skyboxCapture:v=>({u_matrix_3f:new s.UniformMatrix3f(v),u_sun_direction:new s.Uniform3f(v),u_sun_intensity:new s.Uniform1f(v),u_color_tint_r:new s.Uniform4f(v),u_color_tint_m:new s.Uniform4f(v),u_luminance:new s.Uniform1f(v)}),globeRaster:v=>({u_proj_matrix:new s.UniformMatrix4f(v),u_globe_matrix:new s.UniformMatrix4f(v),u_normalize_matrix:new s.UniformMatrix4f(v),u_merc_matrix:new s.UniformMatrix4f(v),u_zoom_transition:new s.Uniform1f(v),u_merc_center:new s.Uniform2f(v),u_image0:new s.Uniform1i(v),u_grid_matrix:new s.UniformMatrix3f(v),u_skirt_height:new s.Uniform1f(v),u_frustum_tl:new s.Uniform3f(v),u_frustum_tr:new s.Uniform3f(v),u_frustum_br:new s.Uniform3f(v),u_frustum_bl:new s.Uniform3f(v),u_globe_pos:new s.Uniform3f(v),u_globe_radius:new s.Uniform1f(v),u_viewport:new s.Uniform2f(v)}),globeAtmosphere:v=>({u_frustum_tl:new s.Uniform3f(v),u_frustum_tr:new s.Uniform3f(v),u_frustum_br:new s.Uniform3f(v),u_frustum_bl:new s.Uniform3f(v),u_horizon:new s.Uniform1f(v),u_transition:new s.Uniform1f(v),u_fadeout_range:new s.Uniform1f(v),u_color:new s.Uniform4f(v),u_high_color:new s.Uniform4f(v),u_space_color:new s.Uniform4f(v),u_star_intensity:new s.Uniform1f(v),u_star_density:new s.Uniform1f(v),u_star_size:new s.Uniform1f(v),u_temporal_offset:new s.Uniform1f(v),u_horizon_angle:new s.Uniform1f(v),u_rotation_matrix:new s.UniformMatrix4f(v)})};let zh;function xd(v,u,m,y,S,C,L){const O=v.context,$=O.gl,q=v.transform,K=v.useProgram("collisionBox"),ae=[];let pe=0,be=0;for(let Le=0;Le<y.length;Le++){const We=y[Le],qe=u.getTile(We),Ye=qe.getBucket(m);if(!Ye)continue;const ut=Ir(We,Ye,q);let at=ut;S[0]===0&&S[1]===0||(at=v.translatePosMatrix(ut,qe,S,C));const gt=L?Ye.textCollisionBox:Ye.iconCollisionBox,qt=Ye.collisionCircleArray;if(qt.length>0){const dt=s.create(),Vt=at;s.mul(dt,Ye.placementInvProjMatrix,q.glCoordMatrix),s.mul(dt,dt,Ye.placementViewportMatrix),ae.push({circleArray:qt,circleOffset:be,transform:Vt,invTransform:dt,projection:Ye.getProjection()}),pe+=qt.length/4,be=pe}gt&&(v.terrain&&v.terrain.setupElevationDraw(qe,K),K.draw(O,$.LINES,s.DepthMode.disabled,s.StencilMode.disabled,v.colorModeForRenderPass(),s.CullFaceMode.disabled,Vh(at,q,qe,Ye.getProjection()),m.id,gt.layoutVertexBuffer,gt.indexBuffer,gt.segments,null,q.zoom,null,[gt.collisionVertexBuffer,gt.collisionVertexBufferExt]))}if(!L||!ae.length)return;const Se=v.useProgram("collisionCircle"),xe=new s.StructArrayLayout2f1f2i16;xe.resize(4*pe),xe._trim();let Ce=0;for(const Le of ae)for(let We=0;We<Le.circleArray.length/4;We++){const qe=4*We,Ye=Le.circleArray[qe+0],ut=Le.circleArray[qe+1],at=Le.circleArray[qe+2],gt=Le.circleArray[qe+3];xe.emplace(Ce++,Ye,ut,at,gt,0),xe.emplace(Ce++,Ye,ut,at,gt,1),xe.emplace(Ce++,Ye,ut,at,gt,2),xe.emplace(Ce++,Ye,ut,at,gt,3)}(!zh||zh.length<2*pe)&&(zh=(function(Le){const We=2*Le,qe=new s.StructArrayLayout3ui6;qe.resize(We),qe._trim();for(let Ye=0;Ye<We;Ye++){const ut=6*Ye;qe.uint16[ut+0]=4*Ye+0,qe.uint16[ut+1]=4*Ye+1,qe.uint16[ut+2]=4*Ye+2,qe.uint16[ut+3]=4*Ye+2,qe.uint16[ut+4]=4*Ye+3,qe.uint16[ut+5]=4*Ye+0}return qe})(pe));const le=O.createIndexBuffer(zh,!0),ye=O.createVertexBuffer(xe,s.collisionCircleLayout.members,!0);for(const Le of ae){const We={u_matrix:Le.transform,u_inv_matrix:Le.invTransform,u_camera_to_center_distance:(Pe=q).getCameraToCenterDistance(Le.projection),u_viewport_size:[Pe.width,Pe.height]};Se.draw(O,$.TRIANGLES,s.DepthMode.disabled,s.StencilMode.disabled,v.colorModeForRenderPass(),s.CullFaceMode.disabled,We,m.id,ye,le,s.SegmentVector.simpleSegment(0,2*Le.circleOffset,Le.circleArray.length,Le.circleArray.length/2),null,q.zoom)}var Pe;ye.destroy(),le.destroy()}const bm=s.create();function Nh({width:v,height:u,anchor:m,textOffset:y,textScale:S},C){const{horizontalAlign:L,verticalAlign:O}=s.getAnchorAlignment(m),$=-(L-.5)*v,q=-(O-.5)*u,K=s.evaluateVariableOffset(m,y);return new s.Point(($/S+K[0])*C,(q/S+K[1])*C)}function L_(v,u,m,y,S,C,L,O,$,q,K){const ae=v.text.placedSymbolArray,pe=v.text.dynamicLayoutVertexArray,be=v.icon.dynamicLayoutVertexArray,Se={},xe=v.getProjection(),Ce=ji(O,xe,C),le=C.elevation,ye=xe.upVectorScale(O.canonical,C.center.lat,C.worldSize).metersToTile;pe.clear();for(let Pe=0;Pe<ae.length;Pe++){const Le=ae.get(Pe),{tileAnchorX:We,tileAnchorY:qe,numGlyphs:Ye}=Le,ut=Le.hidden||!Le.crossTileID||v.allowVerticalPlacement&&!Le.placedOrientation?null:y[Le.crossTileID];if(ut){let at=0,gt=0,qt=0;if(le){const Jt=le?le.getAtTileOffset(O,We,qe):0,[Mn,Gn,En]=xe.upVector(O.canonical,We,qe);at=Jt*Mn*ye,gt=Jt*Gn*ye,qt=Jt*En*ye}let[dt,Vt,xt,Zt]=Yi(Le.projectedAnchorX+at,Le.projectedAnchorY+gt,Le.projectedAnchorZ+qt,m?Ce:L);const ft=Nl(C.getCameraToCenterDistance(xe),Zt);let Et=S.evaluateSizeForFeature(v.textSizeData,q,Le)*ft/s.ONE_EM;m&&(Et*=v.tilePixelRatio/$);const Ht=Nh(ut,Et);m?({x:dt,y:Vt,z:xt}=xe.projectTilePoint(We+Ht.x,qe+Ht.y,O.canonical),[dt,Vt,xt]=Yi(dt+at,Vt+gt,xt+qt,L)):(u&&Ht._rotate(-C.angle),dt+=Ht.x,Vt+=Ht.y,xt=0);const Nt=v.allowVerticalPlacement&&Le.placedOrientation===s.WritingMode.vertical?Math.PI/2:0;for(let Jt=0;Jt<Ye;Jt++)s.addDynamicAttributes(pe,dt,Vt,xt,Nt);K&&Le.associatedIconIndex>=0&&(Se[Le.associatedIconIndex]={x:dt,y:Vt,z:xt,angle:Nt})}else lo(Ye,pe)}if(K){be.clear();const Pe=v.icon.placedSymbolArray;for(let Le=0;Le<Pe.length;Le++){const We=Pe.get(Le),{numGlyphs:qe}=We,Ye=Se[Le];if(We.hidden||!Ye)lo(qe,be);else{const{x:ut,y:at,z:gt,angle:qt}=Ye;for(let dt=0;dt<qe;dt++)s.addDynamicAttributes(be,ut,at,gt,qt)}}v.icon.dynamicLayoutVertexBuffer.updateData(be)}v.text.dynamicLayoutVertexBuffer.updateData(pe)}function xm(v,u,m){return m.iconsInText&&u?"symbolTextAndIcon":v?"symbolSDF":"symbolIcon"}function _g(v,u,m,y,S,C,L,O,$,q,K,ae){const pe=v.context,be=pe.gl,Se=v.transform,xe=O==="map",Ce=$==="map",le=xe&&m.layout.get("symbol-placement")!=="point",ye=xe&&!Ce&&!le,Pe=m.layout.get("symbol-sort-key").constantOr(1)!==void 0;let Le=!1;const We=v.depthModeForSublayer(0,s.DepthMode.ReadOnly),qe=[s.mercatorXfromLng(Se.center.lng),s.mercatorYfromLat(Se.center.lat)],Ye=m.layout.get("text-variable-anchor"),ut=Se.projection.name==="globe",at=[],gt=[0,-1,0];let qt=gt;!ut&&!Se.mercatorFromTransition||xe||(qt=(function(dt){const Vt=dt._camera.getWorldToCamera(dt.worldSize,1),xt=s.multiply([],Vt,dt.globeMatrix);s.invert(xt,xt);const Zt=[0,0,0],ft=[0,1,0,0];return s.transformMat4$1(ft,ft,xt),Zt[0]=ft[0],Zt[1]=ft[1],Zt[2]=ft[2],s.normalize(Zt,Zt),Zt})(Se));for(const dt of y){const Vt=u.getTile(dt),xt=Vt.getBucket(m);if(!xt||xt.projection.name==="mercator"&&ut)continue;const Zt=S?xt.text:xt.icon;if(!Zt||xt.fullyClipped||!Zt.segments.get().length)continue;const ft=Zt.programConfigurations.get(m.id),Et=S||xt.sdfIcons,Ht=S?xt.textSizeData:xt.iconSizeData,Nt=Ce||Se.pitch!==0,Jt=s.evaluateSizeForZoom(Ht,Se.zoom);let Mn,Gn,En,Rn,gi=[0,0],pi=null;if(S)Gn=Vt.glyphAtlasTexture,En=be.LINEAR,Mn=Vt.glyphAtlasTexture.size,xt.iconsInText&&(gi=Vt.imageAtlasTexture.size,pi=Vt.imageAtlasTexture,Rn=Nt||v.options.rotating||v.options.zooming||Ht.kind==="composite"||Ht.kind==="camera"?be.LINEAR:be.NEAREST);else{const il=m.layout.get("icon-size").constantOr(0)!==1||xt.iconsNeedLinear;Gn=Vt.imageAtlasTexture,En=Et||v.options.rotating||v.options.zooming||il||Nt?be.LINEAR:be.NEAREST,Mn=Vt.imageAtlasTexture.size}const An=xt.projection.name==="globe",Oi=An?qt:gt,Hi=An?s.globeToMercatorTransition(Se.zoom):0,Zi=ji(dt,xt.getProjection(),Se),Gi=Se.calculatePixelsToTileUnitsMatrix(Vt),js=Ot(Zi,Vt.tileID.canonical,Ce,xe,Se,xt.getProjection(),Gi),Ps=v.terrain&&Ce&&le?s.invert(s.create(),js):bm,Ta=Ui(Zi,Vt.tileID.canonical,Ce,xe,Se,xt.getProjection(),Gi),Zs=Ye&&xt.hasTextData(),nr=m.layout.get("icon-text-fit")!=="none"&&Zs&&xt.hasIconData();if(le){const il=Se.elevation,ql=il?il.getAtTileOffsetFunc(dt,Se.center.lat,Se.worldSize,xt.getProjection()):null,Fd=ma(Zi,Vt.tileID.canonical,Ce,xe,Se,xt.getProjection(),Gi);mc(xt,Zi,v,S,Fd,Ta,Ce,q,ql,dt)}const qi=le||S&&Ye||nr,Ai=v.translatePosMatrix(Zi,Vt,C,L),Br=qi?bm:js,Js=v.translatePosMatrix(Ta,Vt,C,L,!0),or=xt.getProjection().createInversionMatrix(Se,dt.canonical),ho=[];v.terrainRenderModeElevated()&&Ce&&ho.push("PITCH_WITH_MAP_TERRAIN"),An&&ho.push("PROJECTION_GLOBE_VIEW"),qi&&ho.push("PROJECTED_POS_ON_VIEWPORT");const Vd=Et&&m.paint.get(S?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Jc;Jc=Et?xt.iconsInText?bd(Ht.kind,Jt,ye,Ce,v,Ai,Br,Js,Mn,gi,dt,Hi,qe,or,Oi,xt.getProjection()):yd(Ht.kind,Jt,ye,Ce,v,Ai,Br,Js,S,Mn,!0,dt,Hi,qe,or,Oi,xt.getProjection()):Bh(Ht.kind,Jt,ye,Ce,v,Ai,Br,Js,S,Mn,dt,Hi,qe,or,Oi,xt.getProjection());const Bd={program:v.useProgram(xm(Et,S,xt),ft,ho),buffers:Zt,uniformValues:Jc,atlasTexture:Gn,atlasTextureIcon:pi,atlasInterpolation:En,atlasInterpolationIcon:Rn,isSDF:Et,hasHalo:Vd,tile:Vt,labelPlaneMatrixInv:Ps};if(Pe&&xt.canOverlap){Le=!0;const il=Zt.segments.get();for(const ql of il)at.push({segments:new s.SegmentVector([ql]),sortKey:ql.sortKey,state:Bd})}else at.push({segments:Zt.segments,sortKey:0,state:Bd})}Le&&at.sort(((dt,Vt)=>dt.sortKey-Vt.sortKey));for(const dt of at){const Vt=dt.state;if(v.terrain&&v.terrain.setupElevationDraw(Vt.tile,Vt.program,{useDepthForOcclusion:!ut,labelPlaneMatrixInv:Vt.labelPlaneMatrixInv}),pe.activeTexture.set(be.TEXTURE0),Vt.atlasTexture.bind(Vt.atlasInterpolation,be.CLAMP_TO_EDGE),Vt.atlasTextureIcon&&(pe.activeTexture.set(be.TEXTURE1),Vt.atlasTextureIcon&&Vt.atlasTextureIcon.bind(Vt.atlasInterpolationIcon,be.CLAMP_TO_EDGE)),Vt.isSDF){const xt=Vt.uniformValues;Vt.hasHalo&&(xt.u_is_halo=1,wd(Vt.buffers,dt.segments,m,v,Vt.program,We,K,ae,xt)),xt.u_is_halo=0}wd(Vt.buffers,dt.segments,m,v,Vt.program,We,K,ae,Vt.uniformValues)}}function wd(v,u,m,y,S,C,L,O,$){const q=y.context,K=[v.dynamicLayoutVertexBuffer,v.opacityVertexBuffer,v.globeExtVertexBuffer];S.draw(q,q.gl.TRIANGLES,C,L,O,s.CullFaceMode.disabled,$,m.id,v.layoutVertexBuffer,v.indexBuffer,u,m.paint,y.transform.zoom,v.programConfigurations.get(m.id),K)}function yg(v,u,m,y,S,C,L){const O=v.context.gl,$=m.paint.get("fill-pattern"),q=$&&$.constantOr(1);let K,ae,pe,be,Se;L?(ae=q&&!m.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",K=O.LINES):(ae=q?"fillPattern":"fill",K=O.TRIANGLES);for(const xe of y){const Ce=u.getTile(xe);if(q&&!Ce.patternsLoaded())continue;const le=Ce.getBucket(m);if(!le)continue;v.prepareDrawTile();const ye=le.programConfigurations.get(m.id),Pe=v.useProgram(ae,ye);q&&(v.context.activeTexture.set(O.TEXTURE0),Ce.imageAtlasTexture.bind(O.LINEAR,O.CLAMP_TO_EDGE),ye.updatePaintBuffers());const Le=$.constantOr(null);if(Le&&Ce.imageAtlas){const qe=Ce.imageAtlas.patternPositions[Le.toString()];qe&&ye.setConstantPatternPositions(qe)}const We=v.translatePosMatrix(xe.projMatrix,Ce,m.paint.get("fill-translate"),m.paint.get("fill-translate-anchor"));if(L){be=le.indexBuffer2,Se=le.segments2;const qe=v.terrain&&v.terrain.renderingToTexture?v.terrain.drapeBufferSize:[O.drawingBufferWidth,O.drawingBufferHeight];pe=ae==="fillOutlinePattern"&&q?M_(We,v,Ce,qe):P_(We,qe)}else be=le.indexBuffer,Se=le.segments,pe=q?gm(We,v,Ce):Qa(We);v.prepareDrawProgram(v.context,Pe,xe.toUnwrapped()),Pe.draw(v.context,K,S,v.stencilModeForClipping(xe),C,s.CullFaceMode.disabled,pe,m.id,le.layoutVertexBuffer,be,Se,m.paint,v.transform.zoom,ye)}}function $h(v,u,m,y,S,C,L){const O=v.context,$=O.gl,q=v.transform,K=m.paint.get("fill-extrusion-pattern"),ae=K.constantOr(1),pe=m.paint.get("fill-extrusion-opacity"),be=[m.paint.get("fill-extrusion-ambient-occlusion-intensity"),m.paint.get("fill-extrusion-ambient-occlusion-radius")],Se=m.layout.get("fill-extrusion-edge-radius"),xe=Se>0&&!m.paint.get("fill-extrusion-rounded-roof"),Ce=xe?0:Se,le=q.projection.name==="globe"?s.fillExtrusionHeightLift():0,ye=q.projection.name==="globe",Pe=ye?s.globeToMercatorTransition(q.zoom):0,Le=[s.mercatorXfromLng(q.center.lng),s.mercatorYfromLat(q.center.lat)],We=[];ye&&We.push("PROJECTION_GLOBE_VIEW"),be[0]>0&&We.push("FAUX_AO"),xe&&We.push("ZERO_ROOF_RADIUS");for(const qe of y){const Ye=u.getTile(qe),ut=Ye.getBucket(m);if(!ut||ut.projection.name!==q.projection.name)continue;const at=ut.programConfigurations.get(m.id),gt=v.useProgram(ae?"fillExtrusionPattern":"fillExtrusion",at,We);if(v.terrain){const Et=v.terrain;if(v.style.terrainSetForDrapingOnly())Et.setupElevationDraw(Ye,gt,{useMeterToDem:!0});else{if(!ut.enableTerrain)continue;if(Et.setupElevationDraw(Ye,gt,{useMeterToDem:!0}),wm(O,u,qe,ut,m,Et),!ut.centroidVertexBuffer){const Ht=gt.attributes.a_centroid_pos;Ht!==void 0&&$.vertexAttrib2f(Ht,0,0)}}}ae&&(v.context.activeTexture.set($.TEXTURE0),Ye.imageAtlasTexture.bind($.LINEAR,$.CLAMP_TO_EDGE),at.updatePaintBuffers());const qt=K.constantOr(null);if(qt&&Ye.imageAtlas){const Et=Ye.imageAtlas.patternPositions[qt.toString()];Et&&at.setConstantPatternPositions(Et)}const dt=v.translatePosMatrix(qe.projMatrix,Ye,m.paint.get("fill-extrusion-translate"),m.paint.get("fill-extrusion-translate-anchor")),Vt=q.projection.createInversionMatrix(q,qe.canonical),xt=m.paint.get("fill-extrusion-vertical-gradient"),Zt=ae?Gc(dt,v,xt,pe,be,Ce,qe,Ye,le,Pe,Le,Vt):xa(dt,v,xt,pe,be,Ce,qe,le,Pe,Le,Vt);v.prepareDrawProgram(O,gt,qe.toUnwrapped());const ft=[];v.terrain&&ft.push(ut.centroidVertexBuffer),ye&&ft.push(ut.layoutVertexExtBuffer),gt.draw(O,O.gl.TRIANGLES,S,C,L,s.CullFaceMode.backCCW,Zt,m.id,ut.layoutVertexBuffer,ut.indexBuffer,ut.segments,m.paint,v.transform.zoom,at,ft)}}function wm(v,u,m,y,S,C){const L=[le=>{let ye=le.canonical.x-1,Pe=le.wrap;return ye<0&&(ye=(1<<le.canonical.z)-1,Pe--),new s.OverscaledTileID(le.overscaledZ,Pe,le.canonical.z,ye,le.canonical.y)},le=>{let ye=le.canonical.x+1,Pe=le.wrap;return ye===1<<le.canonical.z&&(ye=0,Pe++),new s.OverscaledTileID(le.overscaledZ,Pe,le.canonical.z,ye,le.canonical.y)},le=>new s.OverscaledTileID(le.overscaledZ,le.wrap,le.canonical.z,le.canonical.x,(le.canonical.y===0?1<<le.canonical.z:le.canonical.y)-1),le=>new s.OverscaledTileID(le.overscaledZ,le.wrap,le.canonical.z,le.canonical.x,le.canonical.y===(1<<le.canonical.z)-1?0:le.canonical.y+1)],O=le=>{const ye=u.getSource().minzoom,Pe=We=>{const qe=u.getTileByID(We);if(qe&&qe.hasData())return qe.getBucket(S)},Le=[0,-1,1];for(const We of Le){if(le.overscaledZ+We<ye)continue;const qe=Pe(le.calculateScaledKey(le.overscaledZ+We));if(qe)return qe}},$=[0,0,0],q=(le,ye)=>($[0]=Math.min(le.min.y,ye.min.y),$[1]=Math.max(le.max.y,ye.max.y),$[2]=s.EXTENT-ye.min.x>le.max.x?ye.min.x-s.EXTENT:le.max.x,$),K=(le,ye)=>($[0]=Math.min(le.min.x,ye.min.x),$[1]=Math.max(le.max.x,ye.max.x),$[2]=s.EXTENT-ye.min.y>le.max.y?ye.min.y-s.EXTENT:le.max.y,$),ae=[(le,ye)=>q(le,ye),(le,ye)=>q(ye,le),(le,ye)=>K(le,ye),(le,ye)=>K(ye,le)],pe=new s.Point(0,0);let be,Se,xe;const Ce=(le,ye,Pe,Le,We)=>{const qe=[[Le?Pe:le,Le?le:Pe,0],[Le?Pe:ye,Le?ye:Pe,0]],Ye=We<0?s.EXTENT+We:We,ut=[Le?Ye:(le+ye)/2,Le?(le+ye)/2:Ye,0];return Pe===0&&We<0||Pe!==0&&We>0?C.getForTilePoints(xe,[ut],!0,Se):qe.push(ut),C.getForTilePoints(m,qe,!0,be),Math.max(qe[0][2],qe[1][2],ut[2])/C.exaggeration()};for(let le=0;le<4;le++){const ye=(le<2?1:5)-le,Pe=y.borders[le];if(Pe.length===0)continue;const Le=xe=L[le](m),We=O(Le);if(!(We&&We instanceof s.FillExtrusionBucket&&We.enableTerrain)||y.borderDoneWithNeighborZ[le]===We.canonical.z&&We.borderDoneWithNeighborZ[ye]===y.canonical.z||(Se=C.findDEMTileFor(Le),!Se||!Se.dem))continue;if(!be){const at=C.findDEMTileFor(m);if(!at||!at.dem)return;be=at}const qe=We.borders[ye];let Ye=0;const ut=We.borderDoneWithNeighborZ[ye]!==y.canonical.z;if(y.canonical.z===We.canonical.z){for(let at=0;at<Pe.length;at++){const gt=y.featuresOnBorder[Pe[at]],qt=gt.borders[le];let dt;for(;Ye<qe.length&&(dt=We.featuresOnBorder[qe[Ye]],!(dt.borders[ye][1]>qt[0]+3));)ut&&We.encodeCentroid(void 0,dt,!1),Ye++;if(dt&&Ye<qe.length){const Vt=Ye;let xt=0;for(;!(dt.borders[ye][0]>qt[1]-3)&&(xt++,++Ye!==qe.length);)dt=We.featuresOnBorder[qe[Ye]];if(dt=We.featuresOnBorder[qe[Vt]],gt.intersectsCount()>1||dt.intersectsCount()>1||xt!==1){xt!==1&&(Ye=Vt),y.encodeCentroid(void 0,gt,!1),ut&&We.encodeCentroid(void 0,dt,!1);continue}const Zt=ae[le](gt,dt),ft=le%2?s.EXTENT-1:0;pe.x=Ce(Zt[0],Math.min(s.EXTENT-1,Zt[1]),ft,le<2,Zt[2]),pe.y=0,y.encodeCentroid(pe,gt,!1),ut&&We.encodeCentroid(pe,dt,!1)}else y.encodeCentroid(void 0,gt,!1)}y.borderDoneWithNeighborZ[le]=We.canonical.z,y.needsCentroidUpdate=!0,ut&&(We.borderDoneWithNeighborZ[ye]=y.canonical.z,We.needsCentroidUpdate=!0)}else{for(const at of Pe)y.encodeCentroid(void 0,y.featuresOnBorder[at],!1);if(ut){for(const at of qe)We.encodeCentroid(void 0,We.featuresOnBorder[at],!1);We.borderDoneWithNeighborZ[ye]=y.canonical.z,We.needsCentroidUpdate=!0}y.borderDoneWithNeighborZ[le]=We.canonical.z,y.needsCentroidUpdate=!0}}(y.needsCentroidUpdate||!y.centroidVertexBuffer&&y.centroidVertexArray.length!==0)&&y.uploadCentroid(v)}const qc=new s.Color(1,0,0,1),Tm=new s.Color(0,1,0,1),R_=new s.Color(0,0,1,1),O_=new s.Color(1,0,1,1),Kc=new s.Color(0,1,1,1);function jl(v,u,m){const y=v.context,S=v.transform,C=y.gl,L=S.projection.name==="globe",O=L?["PROJECTION_GLOBE_VIEW"]:null;let $=m.projMatrix;if(L&&s.globeToMercatorTransition(S.zoom)>0){const gt=s.transitionTileAABBinECEF(m.canonical,S),qt=s.globeDenormalizeECEF(gt);$=s.multiply(new Float32Array(16),S.globeMatrix,qt),s.multiply($,S.projMatrix,$)}const q=v.useProgram("debug",null,O),K=u.getTileByID(m.key);v.terrain&&v.terrain.setupElevationDraw(K,q);const ae=s.DepthMode.disabled,pe=s.StencilMode.disabled,be=v.colorModeForRenderPass(),Se="$debug";y.activeTexture.set(C.TEXTURE0),v.emptyTexture.bind(C.LINEAR,C.CLAMP_TO_EDGE),L?K._makeGlobeTileDebugBuffers(v.context,S):K._makeDebugTileBoundsBuffers(v.context,S.projection);const xe=K._tileDebugBuffer||v.debugBuffer,Ce=K._tileDebugIndexBuffer||v.debugIndexBuffer,le=K._tileDebugSegments||v.debugSegments;q.draw(y,C.LINE_STRIP,ae,pe,be,s.CullFaceMode.disabled,vd($,s.Color.red),Se,xe,Ce,le,null,null,null,[K._globeTileDebugBorderBuffer]);const ye=K.latestRawTileData,Pe=Math.floor((ye&&ye.byteLength||0)/1024),Le=u.getTile(m).tileSize,We=512/Math.min(Le,512)*(m.overscaledZ/S.zoom)*.5;let qe=m.canonical.toString();m.overscaledZ!==m.canonical.z&&(qe+=` => ${m.overscaledZ}`),qe+=` ${Pe}kb`,(function(gt,qt){gt.initDebugOverlayCanvas();const dt=gt.debugOverlayCanvas,Vt=gt.context.gl,xt=gt.debugOverlayCanvas.getContext("2d");xt.clearRect(0,0,dt.width,dt.height),xt.shadowColor="white",xt.shadowBlur=2,xt.lineWidth=1.5,xt.strokeStyle="white",xt.textBaseline="top",xt.font="bold 36px Open Sans, sans-serif",xt.fillText(qt,5,5),xt.strokeText(qt,5,5),gt.debugOverlayTexture.update(dt),gt.debugOverlayTexture.bind(Vt.LINEAR,Vt.CLAMP_TO_EDGE)})(v,qe);const Ye=K._tileDebugTextBuffer||v.debugBuffer,ut=K._tileDebugTextIndexBuffer||v.quadTriangleIndexBuffer,at=K._tileDebugTextSegments||v.debugSegments;q.draw(y,C.TRIANGLES,ae,pe,s.ColorMode.alphaBlended,s.CullFaceMode.disabled,vd($,s.Color.transparent,We),Se,Ye,ut,at,null,null,null,[K._globeTileDebugTextBuffer])}function Sm(v,u,m,y){Xc(v,0,u+m/2,v.transform.width,m,y)}function Uh(v,u,m,y){Xc(v,u-m/2,0,m,v.transform.height,y)}function Xc(v,u,m,y,S,C){const L=v.context,O=L.gl;O.enable(O.SCISSOR_TEST),O.scissor(u*s.exported.devicePixelRatio,m*s.exported.devicePixelRatio,y*s.exported.devicePixelRatio,S*s.exported.devicePixelRatio),L.clear({color:C}),O.disable(O.SCISSOR_TEST)}const Em=s.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:Cm}=Em;function yl(v,u,m,y){v.emplaceBack(u,m,y)}class jh{constructor(u){this.vertexArray=new s.StructArrayLayout3f12,this.indices=new s.StructArrayLayout3ui6,yl(this.vertexArray,-1,-1,1),yl(this.vertexArray,1,-1,1),yl(this.vertexArray,-1,1,1),yl(this.vertexArray,1,1,1),yl(this.vertexArray,-1,-1,-1),yl(this.vertexArray,1,-1,-1),yl(this.vertexArray,-1,1,-1),yl(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=u.createVertexBuffer(this.vertexArray,Cm),this.indexBuffer=u.createIndexBuffer(this.indices),this.segment=s.SegmentVector.simpleSegment(0,0,36,12)}}function wa(v,u,m,y,S,C){const L=v.gl,O=u.paint.get("sky-atmosphere-color"),$=u.paint.get("sky-atmosphere-halo-color"),q=u.paint.get("sky-atmosphere-sun-intensity"),K=((ae,pe,be,Se,xe)=>({u_matrix_3f:ae,u_sun_direction:pe,u_sun_intensity:be,u_color_tint_r:[Se.r,Se.g,Se.b,Se.a],u_color_tint_m:[xe.r,xe.g,xe.b,xe.a],u_luminance:5e-5}))(s.fromMat4(s.create$1(),y),S,q,O,$);L.framebufferTexture2D(L.FRAMEBUFFER,L.COLOR_ATTACHMENT0,L.TEXTURE_CUBE_MAP_POSITIVE_X+C,u.skyboxTexture,0),m.draw(v,L.TRIANGLES,s.DepthMode.disabled,s.StencilMode.disabled,s.ColorMode.unblended,s.CullFaceMode.frontCW,K,"skyboxCapture",u.skyboxGeometry.vertexBuffer,u.skyboxGeometry.indexBuffer,u.skyboxGeometry.segment)}const Td=s.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class km{constructor(u){const m=new s.StructArrayLayout5f20;m.emplaceBack(-1,1,1,0,0),m.emplaceBack(1,1,1,1,0),m.emplaceBack(1,-1,1,1,1),m.emplaceBack(-1,-1,1,0,1);const y=new s.StructArrayLayout3ui6;y.emplaceBack(0,1,2),y.emplaceBack(2,3,0),this.vertexBuffer=u.createVertexBuffer(m,Td.members),this.indexBuffer=u.createIndexBuffer(y),this.segments=s.SegmentVector.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const yc={symbol:function(v,u,m,y,S){if(v.renderPass!=="translucent")return;const C=s.StencilMode.disabled,L=v.colorModeForRenderPass();m.layout.get("text-variable-anchor")&&(function(O,$,q,K,ae,pe,be){const Se=$.transform,xe=ae==="map",Ce=pe==="map";for(const le of O){const ye=K.getTile(le),Pe=ye.getBucket(q);if(!Pe||!Pe.text||!Pe.text.segments.get().length)continue;const Le=s.evaluateSizeForZoom(Pe.textSizeData,Se.zoom),We=ji(le,Pe.getProjection(),Se),qe=Se.calculatePixelsToTileUnitsMatrix(ye),Ye=Ot(We,ye.tileID.canonical,Ce,xe,Se,Pe.getProjection(),qe),ut=q.layout.get("icon-text-fit")!=="none"&&Pe.hasIconData();if(Le){const at=Math.pow(2,Se.zoom-ye.tileID.overscaledZ);L_(Pe,xe,Ce,be,s.symbolSize,Se,Ye,le,at,Le,ut)}}})(y,v,m,u,m.layout.get("text-rotation-alignment"),m.layout.get("text-pitch-alignment"),S),m.paint.get("icon-opacity").constantOr(1)!==0&&_g(v,u,m,y,!1,m.paint.get("icon-translate"),m.paint.get("icon-translate-anchor"),m.layout.get("icon-rotation-alignment"),m.layout.get("icon-pitch-alignment"),m.layout.get("icon-keep-upright"),C,L),m.paint.get("text-opacity").constantOr(1)!==0&&_g(v,u,m,y,!0,m.paint.get("text-translate"),m.paint.get("text-translate-anchor"),m.layout.get("text-rotation-alignment"),m.layout.get("text-pitch-alignment"),m.layout.get("text-keep-upright"),C,L),u.map.showCollisionBoxes&&(xd(v,u,m,y,m.paint.get("text-translate"),m.paint.get("text-translate-anchor"),!0),xd(v,u,m,y,m.paint.get("icon-translate"),m.paint.get("icon-translate-anchor"),!1))},circle:function(v,u,m,y){if(v.renderPass!=="translucent")return;const S=m.paint.get("circle-opacity"),C=m.paint.get("circle-stroke-width"),L=m.paint.get("circle-stroke-opacity"),O=m.layout.get("circle-sort-key").constantOr(1)!==void 0;if(S.constantOr(1)===0&&(C.constantOr(1)===0||L.constantOr(1)===0))return;const $=v.context,q=$.gl,K=v.transform,ae=v.depthModeForSublayer(0,s.DepthMode.ReadOnly),pe=s.StencilMode.disabled,be=v.colorModeForRenderPass(),Se=K.projection.name==="globe",xe=[s.mercatorXfromLng(K.center.lng),s.mercatorYfromLat(K.center.lat)],Ce=[];for(let ye=0;ye<y.length;ye++){const Pe=y[ye],Le=u.getTile(Pe),We=Le.getBucket(m);if(!We||We.projection.name!==K.projection.name)continue;const qe=We.programConfigurations.get(m.id),Ye=Oh(m);Se&&Ye.push("PROJECTION_GLOBE_VIEW");const ut=v.useProgram("circle",qe,Ye),at=We.layoutVertexBuffer,gt=We.globeExtVertexBuffer,qt=We.indexBuffer,dt=K.projection.createInversionMatrix(K,Pe.canonical),Vt={programConfiguration:qe,program:ut,layoutVertexBuffer:at,globeExtVertexBuffer:gt,indexBuffer:qt,uniformValues:Jo(v,Pe,Le,dt,xe,m),tile:Le};if(O){const xt=We.segments.get();for(const Zt of xt)Ce.push({segments:new s.SegmentVector([Zt]),sortKey:Zt.sortKey,state:Vt})}else Ce.push({segments:We.segments,sortKey:0,state:Vt})}O&&Ce.sort(((ye,Pe)=>ye.sortKey-Pe.sortKey));const le={useDepthForOcclusion:!Se};for(const ye of Ce){const{programConfiguration:Pe,program:Le,layoutVertexBuffer:We,globeExtVertexBuffer:qe,indexBuffer:Ye,uniformValues:ut,tile:at}=ye.state,gt=ye.segments;v.terrain&&v.terrain.setupElevationDraw(at,Le,le),v.prepareDrawProgram($,Le,at.tileID.toUnwrapped()),Le.draw($,q.TRIANGLES,ae,pe,be,s.CullFaceMode.disabled,ut,m.id,We,Ye,gt,m.paint,K.zoom,Pe,[qe])}},heatmap:function(v,u,m,y){if(m.paint.get("heatmap-opacity")!==0)if(v.renderPass==="offscreen"){const S=v.context,C=S.gl,L=s.StencilMode.disabled,O=new s.ColorMode([C.ONE,C.ONE],s.Color.transparent,[!0,!0,!0,!0]);(function(be,Se,xe,Ce){const le=be.gl,ye=Se.width*Ce,Pe=Se.height*Ce;be.activeTexture.set(le.TEXTURE1),be.viewport.set([0,0,ye,Pe]);let Le=xe.heatmapFbo;if(!Le||Le&&(Le.width!==ye||Le.height!==Pe)){Le&&Le.destroy();const We=le.createTexture();le.bindTexture(le.TEXTURE_2D,We),le.texParameteri(le.TEXTURE_2D,le.TEXTURE_WRAP_S,le.CLAMP_TO_EDGE),le.texParameteri(le.TEXTURE_2D,le.TEXTURE_WRAP_T,le.CLAMP_TO_EDGE),le.texParameteri(le.TEXTURE_2D,le.TEXTURE_MIN_FILTER,le.LINEAR),le.texParameteri(le.TEXTURE_2D,le.TEXTURE_MAG_FILTER,le.LINEAR),Le=xe.heatmapFbo=be.createFramebuffer(ye,Pe,!1),(function(qe,Ye,ut,at,gt,qt){const dt=qe.gl;dt.texImage2D(dt.TEXTURE_2D,0,qe.isWebGL2&&qe.extRenderToTextureHalfFloat?dt.RGBA16F:dt.RGBA,gt,qt,0,dt.RGBA,qe.extRenderToTextureHalfFloat?qe.isWebGL2?dt.HALF_FLOAT:qe.extTextureHalfFloat.HALF_FLOAT_OES:dt.UNSIGNED_BYTE,null),at.colorAttachment.set(ut)})(be,0,We,Le,ye,Pe)}else le.bindTexture(le.TEXTURE_2D,Le.colorAttachment.get()),be.bindFramebuffer.set(Le.framebuffer)})(S,v,m,v.transform.projection.name==="globe"?.5:.25),S.clear({color:s.Color.transparent});const $=v.transform,q=$.projection.name==="globe",K=q?["PROJECTION_GLOBE_VIEW"]:null,ae=q?s.CullFaceMode.frontCCW:s.CullFaceMode.disabled,pe=[s.mercatorXfromLng($.center.lng),s.mercatorYfromLat($.center.lat)];for(let be=0;be<y.length;be++){const Se=y[be];if(u.hasRenderableParent(Se))continue;const xe=u.getTile(Se),Ce=xe.getBucket(m);if(!Ce||Ce.projection.name!==$.projection.name)continue;const le=Ce.programConfigurations.get(m.id),ye=v.useProgram("heatmap",le,K),{zoom:Pe}=v.transform;v.terrain&&v.terrain.setupElevationDraw(xe,ye),v.prepareDrawProgram(S,ye,Se.toUnwrapped());const Le=$.projection.createInversionMatrix($,Se.canonical);ye.draw(S,C.TRIANGLES,s.DepthMode.disabled,L,O,ae,gg(v,Se,xe,Le,pe,Pe,m.paint.get("heatmap-intensity")),m.id,Ce.layoutVertexBuffer,Ce.indexBuffer,Ce.segments,m.paint,v.transform.zoom,le,q?[Ce.globeExtVertexBuffer]:null)}S.viewport.set([0,0,v.width,v.height])}else v.renderPass==="translucent"&&(v.context.setColorMode(v.colorModeForRenderPass()),(function(S,C){const L=S.context,O=L.gl,$=C.heatmapFbo;if(!$)return;L.activeTexture.set(O.TEXTURE0),O.bindTexture(O.TEXTURE_2D,$.colorAttachment.get()),L.activeTexture.set(O.TEXTURE1);let q=C.colorRampTexture;q||(q=C.colorRampTexture=new s.Texture(L,C.colorRamp,O.RGBA)),q.bind(O.LINEAR,O.CLAMP_TO_EDGE),S.useProgram("heatmapTexture").draw(L,O.TRIANGLES,s.DepthMode.disabled,s.StencilMode.disabled,S.colorModeForRenderPass(),s.CullFaceMode.disabled,((K,ae,pe,be)=>({u_image:0,u_color_ramp:1,u_opacity:ae.paint.get("heatmap-opacity")}))(0,C),C.id,S.viewportBuffer,S.quadTriangleIndexBuffer,S.viewportSegments,C.paint,S.transform.zoom)})(v,m))},line:function(v,u,m,y){if(v.renderPass!=="translucent")return;const S=m.paint.get("line-opacity"),C=m.paint.get("line-width");if(S.constantOr(1)===0||C.constantOr(1)===0)return;const L=v.depthModeForSublayer(0,s.DepthMode.ReadOnly),O=v.colorModeForRenderPass(),$=v.terrain&&v.terrain.renderingToTexture?1:s.exported.devicePixelRatio,q=m.paint.get("line-dasharray"),K=q.constantOr(1),ae=m.layout.get("line-cap"),pe=m.paint.get("line-pattern"),be=pe.constantOr(1),Se=m.paint.get("line-gradient"),xe=be?"linePattern":"line",Ce=v.context,le=Ce.gl,ye=(Le=>{const We=[];Eu(Le)&&We.push("RENDER_LINE_DASH"),Le.paint.get("line-gradient")&&We.push("RENDER_LINE_GRADIENT");const qe=Le.paint.get("line-trim-offset");qe[0]===0&&qe[1]===0||We.push("RENDER_LINE_TRIM_OFFSET");const Ye=Le.paint.get("line-pattern").constantOr(1),ut=Le.paint.get("line-opacity").constantOr(1)!==1;return!Ye&&ut&&We.push("RENDER_LINE_ALPHA_DISCARD"),We})(m);let Pe=ye.includes("RENDER_LINE_ALPHA_DISCARD");v.terrain&&v.terrain.clipOrMaskOverlapStencilType()&&(Pe=!1);for(const Le of y){const We=u.getTile(Le);if(be&&!We.patternsLoaded())continue;const qe=We.getBucket(m);if(!qe)continue;v.prepareDrawTile();const Ye=qe.programConfigurations.get(m.id),ut=v.useProgram(xe,Ye,ye),at=pe.constantOr(null);if(at&&We.imageAtlas){const Et=We.imageAtlas.patternPositions[at.toString()];Et&&Ye.setConstantPatternPositions(Et)}const gt=q.constantOr(null),qt=ae.constantOr(null);if(!be&&gt&&qt&&We.lineAtlas){const Et=We.lineAtlas.getDash(gt,qt);Et&&Ye.setConstantPatternPositions(Et)}let[dt,Vt]=m.paint.get("line-trim-offset");(qt==="round"||qt==="square")&&dt!==Vt&&(dt===0&&(dt-=1),Vt===1&&(Vt+=1));const xt=v.terrain?Le.projMatrix:null,Zt=be?_c(v,We,m,xt,$):vg(v,We,m,xt,qe.lineClipsArray.length,$,[dt,Vt]);if(Se){const Et=qe.gradients[m.id];let Ht=Et.texture;if(m.gradientVersion!==Et.version){let Nt=256;if(m.stepInterpolant){const Jt=u.getSource().maxzoom,Mn=Le.canonical.z===Jt?Math.ceil(1<<v.transform.maxZoom-Le.canonical.z):1;Nt=s.clamp(s.nextPowerOfTwo(qe.maxLineLength/s.EXTENT*1024*Mn),256,Ce.maxTextureSize)}Et.gradient=s.renderColorRamp({expression:m.gradientExpression(),evaluationKey:"lineProgress",resolution:Nt,image:Et.gradient||void 0,clips:qe.lineClipsArray}),Et.texture?Et.texture.update(Et.gradient):Et.texture=new s.Texture(Ce,Et.gradient,le.RGBA),Et.version=m.gradientVersion,Ht=Et.texture}Ce.activeTexture.set(le.TEXTURE1),Ht.bind(m.stepInterpolant?le.NEAREST:le.LINEAR,le.CLAMP_TO_EDGE)}K&&(Ce.activeTexture.set(le.TEXTURE0),We.lineAtlasTexture.bind(le.LINEAR,le.REPEAT),Ye.updatePaintBuffers()),be&&(Ce.activeTexture.set(le.TEXTURE0),We.imageAtlasTexture.bind(le.LINEAR,le.CLAMP_TO_EDGE),Ye.updatePaintBuffers()),v.prepareDrawProgram(Ce,ut,Le.toUnwrapped());const ft=Et=>{ut.draw(Ce,le.TRIANGLES,L,Et,O,s.CullFaceMode.disabled,Zt,m.id,qe.layoutVertexBuffer,qe.indexBuffer,qe.segments,m.paint,v.transform.zoom,Ye,[qe.layoutVertexBuffer2])};if(Pe){const Et=v.stencilModeForClipping(Le).ref;Et===0&&v.terrain&&Ce.clear({stencil:0});const Ht={func:le.EQUAL,mask:255};Zt.u_alpha_discard_threshold=.8,ft(new s.StencilMode(Ht,Et,255,le.KEEP,le.KEEP,le.INVERT)),Zt.u_alpha_discard_threshold=0,ft(new s.StencilMode(Ht,Et,255,le.KEEP,le.KEEP,le.KEEP))}else ft(v.stencilModeForClipping(Le))}Pe&&(v.resetStencilClippingMasks(),v.terrain&&Ce.clear({stencil:0}))},fill:function(v,u,m,y){const S=m.paint.get("fill-color"),C=m.paint.get("fill-opacity");if(C.constantOr(1)===0)return;const L=v.colorModeForRenderPass(),O=m.paint.get("fill-pattern"),$=v.opaquePassEnabledForLayer()&&!O.constantOr(1)&&S.constantOr(s.Color.transparent).a===1&&C.constantOr(0)===1?"opaque":"translucent";if(v.renderPass===$){const q=v.depthModeForSublayer(1,v.renderPass==="opaque"?s.DepthMode.ReadWrite:s.DepthMode.ReadOnly);yg(v,u,m,y,q,L,!1)}if(v.renderPass==="translucent"&&m.paint.get("fill-antialias")){const q=v.depthModeForSublayer(m.getPaintProperty("fill-outline-color")?2:0,s.DepthMode.ReadOnly);yg(v,u,m,y,q,L,!0)}},"fill-extrusion":function(v,u,m,y){const S=m.paint.get("fill-extrusion-opacity");if(S!==0&&v.renderPass==="translucent"){const C=new s.DepthMode(v.context.gl.LEQUAL,s.DepthMode.ReadWrite,v.depthRangeFor3D);if(S!==1||m.paint.get("fill-extrusion-pattern").constantOr(1))$h(v,u,m,y,C,s.StencilMode.disabled,s.ColorMode.disabled),$h(v,u,m,y,C,v.stencilModeFor3D(),v.colorModeForRenderPass()),v.resetStencilClippingMasks();else{const L=v.colorModeForRenderPass();$h(v,u,m,y,C,s.StencilMode.disabled,L)}}},hillshade:function(v,u,m,y){if(v.renderPass!=="offscreen"&&v.renderPass!=="translucent")return;const S=v.context,C=v.depthModeForSublayer(0,s.DepthMode.ReadOnly),L=v.colorModeForRenderPass(),O=v.terrain&&v.terrain.renderingToTexture,[$,q]=v.renderPass!=="translucent"||O?[{},y]:v.stencilConfigForOverlap(y);for(const K of q){const ae=u.getTile(K);if(ae.needsHillshadePrepare&&v.renderPass==="offscreen")Us(v,ae,m,C,s.StencilMode.disabled,L);else if(v.renderPass==="translucent"){const pe=O&&v.terrain?v.terrain.stencilModeForRTTOverlap(K):$[K.overscaledZ];gd(v,K,ae,m,C,pe,L)}}S.viewport.set([0,0,v.width,v.height]),v.resetStencilClippingMasks()},raster:function(v,u,m,y,S,C){if(v.renderPass!=="translucent"||m.paint.get("raster-opacity")===0||!y.length)return;const L=v.context,O=L.gl,$=u.getSource(),q=v.useProgram("raster"),K=v.colorModeForRenderPass(),ae=v.terrain&&v.terrain.renderingToTexture,[pe,be]=$ instanceof Jn||ae?[{},y]:v.stencilConfigForOverlap(y),Se=be[be.length-1].overscaledZ,xe=!v.options.moving;for(const Ce of be){const le=ae?s.DepthMode.disabled:v.depthModeForSublayer(Ce.overscaledZ-Se,m.paint.get("raster-opacity")===1?s.DepthMode.ReadWrite:s.DepthMode.ReadOnly,O.LESS),ye=Ce.toUnwrapped(),Pe=u.getTile(Ce);if(ae&&(!Pe||!Pe.hasData()))continue;const Le=ae?Ce.projMatrix:v.transform.calculateProjMatrix(ye,xe),We=v.terrain&&ae?v.terrain.stencilModeForRTTOverlap(Ce):pe[Ce.overscaledZ],qe=C?0:m.paint.get("raster-fade-duration");Pe.registerFadeDuration(qe);const Ye=u.findLoadedParent(Ce,0),ut=bn(Pe,Ye,u,v.transform,qe);let at,gt;v.terrain&&v.terrain.prepareDrawTile();const qt=m.paint.get("raster-resampling")==="nearest"?O.NEAREST:O.LINEAR;L.activeTexture.set(O.TEXTURE0),Pe.texture.bind(qt,O.CLAMP_TO_EDGE),L.activeTexture.set(O.TEXTURE1),Ye?(Ye.texture.bind(qt,O.CLAMP_TO_EDGE),at=Math.pow(2,Ye.tileID.overscaledZ-Pe.tileID.overscaledZ),gt=[Pe.tileID.canonical.x*at%1,Pe.tileID.canonical.y*at%1]):Pe.texture.bind(qt,O.CLAMP_TO_EDGE),Pe.texture.useMipmap&&L.extTextureFilterAnisotropic&&v.transform.pitch>20&&O.texParameterf(O.TEXTURE_2D,L.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,L.extTextureFilterAnisotropicMax);const dt=_m(Le,gt||[0,0],at||1,ut,m,$ instanceof Jn?$.perspectiveTransform:[0,0]);if(v.prepareDrawProgram(L,q,ye),$ instanceof Jn)$.boundsBuffer&&$.boundsSegments&&q.draw(L,O.TRIANGLES,le,s.StencilMode.disabled,K,s.CullFaceMode.disabled,dt,m.id,$.boundsBuffer,v.quadTriangleIndexBuffer,$.boundsSegments);else{const{tileBoundsBuffer:Vt,tileBoundsIndexBuffer:xt,tileBoundsSegments:Zt}=v.getTileBoundsBuffers(Pe);q.draw(L,O.TRIANGLES,le,We,K,s.CullFaceMode.disabled,dt,m.id,Vt,xt,Zt)}}v.resetStencilClippingMasks()},background:function(v,u,m,y){const S=m.paint.get("background-color"),C=m.paint.get("background-opacity");if(C===0)return;const L=v.context,O=L.gl,$=v.transform,q=$.tileSize,K=m.paint.get("background-pattern");if(v.isPatternMissing(K))return;const ae=!K&&S.a===1&&C===1&&v.opaquePassEnabledForLayer()?"opaque":"translucent";if(v.renderPass!==ae)return;const pe=s.StencilMode.disabled,be=v.depthModeForSublayer(0,ae==="opaque"?s.DepthMode.ReadWrite:s.DepthMode.ReadOnly),Se=v.colorModeForRenderPass(),xe=v.useProgram(K?"backgroundPattern":"background");let Ce,le=y;le||(Ce=v.getBackgroundTiles(),le=Object.values(Ce).map((ye=>ye.tileID))),K&&(L.activeTexture.set(O.TEXTURE0),v.imageManager.bind(v.context));for(const ye of le){const Pe=ye.toUnwrapped(),Le=y?ye.projMatrix:v.transform.calculateProjMatrix(Pe);v.prepareDrawTile();const We=u?u.getTile(ye):Ce?Ce[ye.key]:new s.Tile(ye,q,$.zoom,v),qe=K?ym(Le,C,v,K,{tileID:ye,tileSize:q}):Fh(Le,C,S);v.prepareDrawProgram(L,xe,Pe);const{tileBoundsBuffer:Ye,tileBoundsIndexBuffer:ut,tileBoundsSegments:at}=v.getTileBoundsBuffers(We);xe.draw(L,O.TRIANGLES,be,pe,Se,s.CullFaceMode.disabled,qe,m.id,Ye,ut,at)}},sky:function(v,u,m){const y=v.transform,S=y.projection.name==="mercator"||y.projection.name==="globe"?1:s.smoothstep(7,8,y.zoom),C=m.paint.get("sky-opacity")*S;if(C===0)return;const L=v.context,O=m.paint.get("sky-type"),$=new s.DepthMode(L.gl.LEQUAL,s.DepthMode.ReadOnly,[0,1]),q=v.frameCounter/1e3%1;O==="atmosphere"?v.renderPass==="offscreen"?m.needsSkyboxCapture(v)&&((function(K,ae,pe,be){const Se=K.context,xe=Se.gl;let Ce=ae.skyboxFbo;if(!Ce){Ce=ae.skyboxFbo=Se.createFramebuffer(32,32,!1),ae.skyboxGeometry=new jh(Se),ae.skyboxTexture=Se.gl.createTexture(),xe.bindTexture(xe.TEXTURE_CUBE_MAP,ae.skyboxTexture),xe.texParameteri(xe.TEXTURE_CUBE_MAP,xe.TEXTURE_WRAP_S,xe.CLAMP_TO_EDGE),xe.texParameteri(xe.TEXTURE_CUBE_MAP,xe.TEXTURE_WRAP_T,xe.CLAMP_TO_EDGE),xe.texParameteri(xe.TEXTURE_CUBE_MAP,xe.TEXTURE_MIN_FILTER,xe.LINEAR),xe.texParameteri(xe.TEXTURE_CUBE_MAP,xe.TEXTURE_MAG_FILTER,xe.LINEAR);for(let Le=0;Le<6;++Le)xe.texImage2D(xe.TEXTURE_CUBE_MAP_POSITIVE_X+Le,0,xe.RGBA,32,32,0,xe.RGBA,xe.UNSIGNED_BYTE,null)}Se.bindFramebuffer.set(Ce.framebuffer),Se.viewport.set([0,0,32,32]);const le=ae.getCenter(K,!0),ye=K.useProgram("skyboxCapture"),Pe=new Float64Array(16);s.identity(Pe),s.rotateY(Pe,Pe,.5*-Math.PI),wa(Se,ae,ye,Pe,le,0),s.identity(Pe),s.rotateY(Pe,Pe,.5*Math.PI),wa(Se,ae,ye,Pe,le,1),s.identity(Pe),s.rotateX(Pe,Pe,.5*-Math.PI),wa(Se,ae,ye,Pe,le,2),s.identity(Pe),s.rotateX(Pe,Pe,.5*Math.PI),wa(Se,ae,ye,Pe,le,3),s.identity(Pe),wa(Se,ae,ye,Pe,le,4),s.identity(Pe),s.rotateY(Pe,Pe,Math.PI),wa(Se,ae,ye,Pe,le,5),Se.viewport.set([0,0,K.width,K.height])})(v,m),m.markSkyboxValid(v)):v.renderPass==="sky"&&(function(K,ae,pe,be,Se){const xe=K.context,Ce=xe.gl,le=K.transform,ye=K.useProgram("skybox");xe.activeTexture.set(Ce.TEXTURE0),Ce.bindTexture(Ce.TEXTURE_CUBE_MAP,ae.skyboxTexture);const Pe=((Le,We,qe,Ye,ut)=>({u_matrix:Le,u_sun_direction:We,u_cubemap:0,u_opacity:Ye,u_temporal_offset:ut}))(le.skyboxMatrix,ae.getCenter(K,!1),0,be,Se);K.prepareDrawProgram(xe,ye),ye.draw(xe,Ce.TRIANGLES,pe,s.StencilMode.disabled,K.colorModeForRenderPass(),s.CullFaceMode.backCW,Pe,"skybox",ae.skyboxGeometry.vertexBuffer,ae.skyboxGeometry.indexBuffer,ae.skyboxGeometry.segment)})(v,m,$,C,q):O==="gradient"&&v.renderPass==="sky"&&(function(K,ae,pe,be,Se){const xe=K.context,Ce=xe.gl,le=K.transform,ye=K.useProgram("skyboxGradient");ae.skyboxGeometry||(ae.skyboxGeometry=new jh(xe)),xe.activeTexture.set(Ce.TEXTURE0);let Pe=ae.colorRampTexture;Pe||(Pe=ae.colorRampTexture=new s.Texture(xe,ae.colorRamp,Ce.RGBA)),Pe.bind(Ce.LINEAR,Ce.CLAMP_TO_EDGE);const Le=((We,qe,Ye,ut,at)=>({u_matrix:We,u_color_ramp:0,u_center_direction:qe,u_radius:s.degToRad(Ye),u_opacity:ut,u_temporal_offset:at}))(le.skyboxMatrix,ae.getCenter(K,!1),ae.paint.get("sky-gradient-radius"),be,Se);K.prepareDrawProgram(xe,ye),ye.draw(xe,Ce.TRIANGLES,pe,s.StencilMode.disabled,K.colorModeForRenderPass(),s.CullFaceMode.backCW,Le,"skyboxGradient",ae.skyboxGeometry.vertexBuffer,ae.skyboxGeometry.indexBuffer,ae.skyboxGeometry.segment)})(v,m,$,C,q)},debug:function(v,u,m){for(let y=0;y<m.length;y++)jl(v,u,m[y])},custom:function(v,u,m,y){const S=v.context,C=m.implementation;if(!v.transform.projection.unsupportedLayers||!v.transform.projection.unsupportedLayers.includes("custom")||v.terrain&&(v.terrain.renderingToTexture||v.renderPass==="offscreen")&&m.isLayerDraped()){if(v.renderPass==="offscreen"){const L=C.prerender;if(L){if(v.setCustomLayerDefaults(),S.setColorMode(v.colorModeForRenderPass()),v.transform.projection.name==="globe"){const O=v.transform.pointMerc;L.call(C,S.gl,v.transform.customLayerMatrix(),v.transform.getProjection(),v.transform.globeToMercatorMatrix(),s.globeToMercatorTransition(v.transform.zoom),[O.x,O.y],v.transform.pixelsPerMeterRatio)}else L.call(C,S.gl,v.transform.customLayerMatrix());S.setDirty(),v.setBaseState()}}else if(v.renderPass==="translucent"){if(v.terrain&&v.terrain.renderingToTexture){const O=C.renderToTile;if(O){const $=y[0].canonical,q=new s.MercatorCoordinate($.x+y[0].wrap*(1<<$.z),$.y,$.z);S.setDepthMode(s.DepthMode.disabled),S.setStencilMode(s.StencilMode.disabled),S.setColorMode(v.colorModeForRenderPass()),v.setCustomLayerDefaults(),O.call(C,S.gl,q),S.setDirty(),v.setBaseState()}return}v.setCustomLayerDefaults(),S.setColorMode(v.colorModeForRenderPass()),S.setStencilMode(s.StencilMode.disabled);const L=C.renderingMode==="3d"?new s.DepthMode(v.context.gl.LEQUAL,s.DepthMode.ReadWrite,v.depthRangeFor3D):v.depthModeForSublayer(0,s.DepthMode.ReadOnly);if(S.setDepthMode(L),v.transform.projection.name==="globe"){const O=v.transform.pointMerc;C.render(S.gl,v.transform.customLayerMatrix(),v.transform.getProjection(),v.transform.globeToMercatorMatrix(),s.globeToMercatorTransition(v.transform.zoom),[O.x,O.y],v.transform.pixelsPerMeterRatio)}else C.render(S.gl,v.transform.customLayerMatrix());S.setDirty(),v.setBaseState(),S.bindFramebuffer.set(null)}}else s.warnOnce("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")}};class Cu{constructor(u,m,y=!1){this.context=new nn(u,y),this.transform=m,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=s.SourceCache.maxUnderzooming+s.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(u,m){const y=!!u&&!!u.terrain&&this.transform.projection.supportsTerrain;if(!(y||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new sr(this,u));const S=this._terrain;this.transform.elevation=y?S:null,S.update(u,this.transform,m)}_updateFog(u){const m=u.fog;if(!m||this.transform.projection.name==="globe"||m.getOpacity(this.transform.pitch)<1||m.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[y,S]=m.getFovAdjustedRange(this.transform._fov);if(y>S)return void(this.transform.fogCullDistSq=null);const C=y+.78*(S-y);this.transform.fogCullDistSq=C*C}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(u,m){if(this.width=u*s.exported.devicePixelRatio,this.height=m*s.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const y of this.style.order)this.style._layers[y].resize()}setup(){const u=this.context,m=new s.StructArrayLayout2i4;m.emplaceBack(0,0),m.emplaceBack(s.EXTENT,0),m.emplaceBack(0,s.EXTENT),m.emplaceBack(s.EXTENT,s.EXTENT),this.tileExtentBuffer=u.createVertexBuffer(m,s.posAttributes.members),this.tileExtentSegments=s.SegmentVector.simpleSegment(0,0,4,2);const y=new s.StructArrayLayout2i4;y.emplaceBack(0,0),y.emplaceBack(s.EXTENT,0),y.emplaceBack(0,s.EXTENT),y.emplaceBack(s.EXTENT,s.EXTENT),this.debugBuffer=u.createVertexBuffer(y,s.posAttributes.members),this.debugSegments=s.SegmentVector.simpleSegment(0,0,4,5);const S=new s.StructArrayLayout2i4;S.emplaceBack(-1,-1),S.emplaceBack(1,-1),S.emplaceBack(-1,1),S.emplaceBack(1,1),this.viewportBuffer=u.createVertexBuffer(S,s.posAttributes.members),this.viewportSegments=s.SegmentVector.simpleSegment(0,0,4,2);const C=new s.StructArrayLayout4i8;C.emplaceBack(0,0,0,0),C.emplaceBack(s.EXTENT,0,s.EXTENT,0),C.emplaceBack(0,s.EXTENT,0,s.EXTENT),C.emplaceBack(s.EXTENT,s.EXTENT,s.EXTENT,s.EXTENT),this.mercatorBoundsBuffer=u.createVertexBuffer(C,s.boundsAttributes.members),this.mercatorBoundsSegments=s.SegmentVector.simpleSegment(0,0,4,2);const L=new s.StructArrayLayout3ui6;L.emplaceBack(0,1,2),L.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=u.createIndexBuffer(L);const O=new s.StructArrayLayout1ui2;for(const q of[0,1,3,2,0])O.emplaceBack(q);this.debugIndexBuffer=u.createIndexBuffer(O),this.emptyTexture=new s.Texture(u,new s.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),u.gl.RGBA),this.identityMat=s.create();const $=this.context.gl;this.stencilClearMode=new s.StencilMode({func:$.ALWAYS,mask:0},0,255,$.ZERO,$.ZERO,$.ZERO),this.loadTimeStamps.push(s.window.performance.now()),this.atmosphereBuffer=new km(this.context)}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(u){return u._makeTileBoundsBuffers(this.context,this.transform.projection),u._tileBoundsBuffer?{tileBoundsBuffer:u._tileBoundsBuffer,tileBoundsIndexBuffer:u._tileBoundsIndexBuffer,tileBoundsSegments:u._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const u=this.context,m=u.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(u,m.TRIANGLES,s.DepthMode.disabled,this.stencilClearMode,s.ColorMode.disabled,s.CullFaceMode.disabled,Rt(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(u,m,y){if(!m||this.currentStencilSource===m.id||!u.isTileClipped()||!y||y.length===0)return;if(this._tileClippingMaskIDs&&!this.terrain){let O=!1;for(const $ of y)if(this._tileClippingMaskIDs[$.key]===void 0){O=!0;break}if(!O)return}this.currentStencilSource=m.id;const S=this.context,C=S.gl;this.nextStencilID+y.length>256&&this.clearStencil(),S.setColorMode(s.ColorMode.disabled),S.setDepthMode(s.DepthMode.disabled);const L=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const O of y){const $=m.getTile(O),q=this._tileClippingMaskIDs[O.key]=this.nextStencilID++,{tileBoundsBuffer:K,tileBoundsIndexBuffer:ae,tileBoundsSegments:pe}=this.getTileBoundsBuffers($);L.draw(S,C.TRIANGLES,s.DepthMode.disabled,new s.StencilMode({func:C.ALWAYS,mask:0},q,255,C.KEEP,C.KEEP,C.REPLACE),s.ColorMode.disabled,s.CullFaceMode.disabled,Rt(O.projMatrix),"$clipping",K,ae,pe)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const u=this.nextStencilID++,m=this.context.gl;return new s.StencilMode({func:m.NOTEQUAL,mask:255},u,255,m.KEEP,m.KEEP,m.REPLACE)}stencilModeForClipping(u){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(u);const m=this.context.gl;return new s.StencilMode({func:m.EQUAL,mask:255},this._tileClippingMaskIDs[u.key],0,m.KEEP,m.KEEP,m.REPLACE)}stencilConfigForOverlap(u){const m=this.context.gl,y=u.sort(((L,O)=>O.overscaledZ-L.overscaledZ)),S=y[y.length-1].overscaledZ,C=y[0].overscaledZ-S+1;if(C>1){this.currentStencilSource=void 0,this.nextStencilID+C>256&&this.clearStencil();const L={};for(let O=0;O<C;O++)L[O+S]=new s.StencilMode({func:m.GEQUAL,mask:255},O+this.nextStencilID,255,m.KEEP,m.KEEP,m.REPLACE);return this.nextStencilID+=C,[L,y]}return[{[S]:s.StencilMode.disabled},y]}colorModeForRenderPass(){const u=this.context.gl;return this._showOverdrawInspector?new s.ColorMode([u.CONSTANT_COLOR,u.ONE],new s.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?s.ColorMode.unblended:s.ColorMode.alphaBlended}depthModeForSublayer(u,m,y){if(!this.opaquePassEnabledForLayer())return s.DepthMode.disabled;const S=1-((1+this.currentLayer)*this.numSublayers+u)*this.depthEpsilon;return new s.DepthMode(y||this.context.gl.LEQUAL,m,[S,S])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(u,m){this.style=u,this.options=m,this.imageManager=u.imageManager,this.glyphManager=u.glyphManager,this.symbolFadeChange=u.placement.symbolFadeChange(s.exported.now()),this.imageManager.beginFrame();const y=this.style.order,S=this.style._sourceCaches;for(const q in S){const K=S[q];K.used&&K.prepare(this.context)}const C={},L={},O={};for(const q in S){const K=S[q];C[q]=K.getVisibleCoordinates(),L[q]=C[q].slice().reverse(),O[q]=K.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let q=0;q<y.length;q++)if(this.style._layers[y[q]].is3D()){this.opaquePassCutoff=q;break}if(this.terrain&&(this.terrain.updateTileBinding(O),this.opaquePassCutoff=0),this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new s.GlobeSharedBuffers(this.context)),!s.isMapAuthenticated(this.context.gl))return;this.renderPass="offscreen";for(const q of y){const K=this.style._layers[q],ae=u._getLayerSourceCache(K);if(!K.hasOffscreenPass()||K.isHidden(this.transform.zoom))continue;const pe=ae?L[ae.id]:void 0;(K.type==="custom"||K.isSky()||pe&&pe.length)&&this.renderLayer(this,ae,K,pe)}this.depthRangeFor3D=[0,1-(u.order.length+2)*this.numSublayers*this.depthEpsilon];const $=this.terrain;if($&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&$.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:m.showOverdrawInspector?s.Color.black:s.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=m.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=y.length-1;this.currentLayer>=0;this.currentLayer--){const q=this.style._layers[y[this.currentLayer]],K=u._getLayerSourceCache(q);if(q.isSky())continue;const ae=K?L[K.id]:void 0;this._renderTileClippingMasks(q,K,ae),this.renderLayer(this,K,q,ae)}if(this.style.fog&&this.transform.projection.supportsFog&&(function(q,K){const ae=q.context,pe=ae.gl,be=q.transform,Se=new s.DepthMode(pe.LEQUAL,s.DepthMode.ReadOnly,[0,1]),xe=q.useProgram("globeAtmosphere",null,be.projection.name==="globe"?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),Ce=s.globeToMercatorTransition(be.zoom),le=K.properties.get("color").toArray01(),ye=K.properties.get("high-color").toArray01(),Pe=K.properties.get("space-color").toArray01PremultipliedAlpha(),Le=s.identity$1([]);s.rotateY$1(Le,Le,-s.degToRad(be._center.lng)),s.rotateX$1(Le,Le,s.degToRad(be._center.lat)),s.rotateZ$1(Le,Le,be.angle),s.rotateX$1(Le,Le,-be._pitch);const We=s.fromQuat(new Float32Array(16),Le),qe=s.mapValue(K.properties.get("star-intensity"),0,1,0,.25),Ye=5e-4,ut=s.mapValue(K.properties.get("horizon-blend"),0,1,Ye,.25),at=s.globeUseCustomAntiAliasing(q,ae,be)&&ut===Ye?be.worldSize/(2*Math.PI*1.025)-1:be.globeRadius,gt=q.frameCounter/1e3%1,qt=s.length(be.globeCenterInViewSpace),dt=Math.sqrt(Math.pow(qt,2)-Math.pow(at,2)),Vt=Math.acos(dt/qt),xt=((ft,Et,Ht,Nt,Jt,Mn,Gn,En,Rn,gi,pi,An,Oi,Hi)=>({u_frustum_tl:ft,u_frustum_tr:Et,u_frustum_br:Ht,u_frustum_bl:Nt,u_horizon:Jt,u_transition:Mn,u_fadeout_range:Gn,u_color:En,u_high_color:Rn,u_space_color:gi,u_star_intensity:pi,u_star_size:5*s.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:An,u_horizon_angle:Oi,u_rotation_matrix:Hi}))(be.frustumCorners.TL,be.frustumCorners.TR,be.frustumCorners.BR,be.frustumCorners.BL,be.frustumCorners.horizon,Ce,ut,le,ye,Pe,qe,gt,Vt,We);q.prepareDrawProgram(ae,xe);const Zt=q.atmosphereBuffer;Zt&&xe.draw(ae,pe.TRIANGLES,Se,s.StencilMode.disabled,s.ColorMode.alphaBlended,s.CullFaceMode.backCW,xt,"skybox",Zt.vertexBuffer,Zt.indexBuffer,Zt.segments)})(this,this.style.fog),this.renderPass="sky",(s.globeToMercatorTransition(this.transform.zoom)>0||this.transform.projection.name!=="globe")&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<y.length;this.currentLayer++){const q=this.style._layers[y[this.currentLayer]],K=u._getLayerSourceCache(q);q.isSky()&&this.renderLayer(this,K,q,K?L[K.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<y.length;){const q=this.style._layers[y[this.currentLayer]],K=u._getLayerSourceCache(q);if(q.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(q)){if(q.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const ae=K?(q.type==="symbol"?O:L)[K.id]:void 0;this._renderTileClippingMasks(q,K,K?C[K.id]:void 0),this.renderLayer(this,K,q,ae),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let q=null;s.values(this.style._layers).forEach((K=>{const ae=u._getLayerSourceCache(K);ae&&!K.isHidden(this.transform.zoom)&&(!q||q.getSource().maxzoom<ae.getSource().maxzoom)&&(q=ae)})),q&&this.options.showTileBoundaries&&yc.debug(this,q,q.getVisibleCoordinates())}this.options.showPadding&&(function(q){const K=q.transform.padding;Sm(q,q.transform.height-(K.top||0),3,qc),Sm(q,K.bottom||0,3,Tm),Uh(q,K.left||0,3,R_),Uh(q,q.transform.width-(K.right||0),3,O_);const ae=q.transform.centerPoint;(function(pe,be,Se,xe){Xc(pe,be-1,Se-10,2,20,xe),Xc(pe,be-10,Se-1,20,2,xe)})(q,ae.x,q.transform.height-ae.y,Kc)})(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(s.window.performance.now()),this.saveCanvasCopy())}renderLayer(u,m,y,S){y.isHidden(this.transform.zoom)||(y.type==="background"||y.type==="sky"||y.type==="custom"||S&&S.length)&&(this.id=y.id,this.gpuTimingStart(y),(!u.transform.projection.unsupportedLayers||!u.transform.projection.unsupportedLayers.includes(y.type)||u.terrain&&y.type==="custom")&&yc[y.type](u,m,y,S,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(u){if(!this.options.gpuTiming)return;const m=this.context.extTimerQuery;let y=this.gpuTimers[u.id];y||(y=this.gpuTimers[u.id]={calls:0,cpuTime:0,query:m.createQueryEXT()}),y.calls++,m.beginQueryEXT(m.TIME_ELAPSED_EXT,y.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const u=this.context.extTimerQuery,m=u.createQueryEXT();this.deferredRenderGpuTimeQueries.push(m),u.beginQueryEXT(u.TIME_ELAPSED_EXT,m)}}gpuTimingDeferredRenderEnd(){if(!this.options.gpuTimingDeferredRender)return;const u=this.context.extTimerQuery;u.endQueryEXT(u.TIME_ELAPSED_EXT)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const u=this.context.extTimerQuery;u.endQueryEXT(u.TIME_ELAPSED_EXT)}collectGpuTimers(){const u=this.gpuTimers;return this.gpuTimers={},u}collectDeferredRenderGpuQueries(){const u=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],u}queryGpuTimers(u){const m={};for(const y in u){const S=u[y],C=this.context.extTimerQuery,L=C.getQueryObjectEXT(S.query,C.QUERY_RESULT_EXT)/1e6;C.deleteQueryEXT(S.query),m[y]=L}return m}queryGpuTimeDeferredRender(u){if(!this.options.gpuTimingDeferredRender)return 0;const m=this.context.extTimerQuery;let y=0;for(const S of u)y+=m.getQueryObjectEXT(S,m.QUERY_RESULT_EXT)/1e6,m.deleteQueryEXT(S);return y}translatePosMatrix(u,m,y,S,C){if(!y[0]&&!y[1])return u;const L=C?S==="map"?this.transform.angle:0:S==="viewport"?-this.transform.angle:0;if(L){const q=Math.sin(L),K=Math.cos(L);y=[y[0]*K-y[1]*q,y[0]*q+y[1]*K]}const O=[C?y[0]:it(m,y[0],this.transform.zoom),C?y[1]:it(m,y[1],this.transform.zoom),0],$=new Float32Array(16);return s.translate($,u,O),$}saveTileTexture(u){const m=this._tileTextures[u.size[0]];m?m.push(u):this._tileTextures[u.size[0]]=[u]}getTileTexture(u){const m=this._tileTextures[u];return m&&m.length>0?m.pop():null}isPatternMissing(u){return u===null||u!==void 0&&!this.imageManager.getPattern(u.toString())}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}currentGlobalDefines(){const u=this.terrain&&this.terrain.renderingToTexture,m=this.terrain&&this.terrain.exaggeration()===0,y=this.style&&this.style.fog,S=[];return this.terrainRenderModeElevated()&&S.push("TERRAIN"),this.transform.projection.name==="globe"&&S.push("GLOBE"),m&&S.push("ZERO_EXAGGERATION"),y&&!u&&y.getOpacity(this.transform.pitch)!==0&&S.push("FOG"),u&&S.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&S.push("OVERDRAW_INSPECTOR"),S}useProgram(u,m,y){this.cache=this.cache||{};const S=y||[],C=this.currentGlobalDefines().concat(S),L=Qn.cacheKey(wu[u],u,C,m);return this.cache[L]||(this.cache[L]=new Qn(this.context,u,wu[u],m,Lo[u],C)),this.cache[L]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const u=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(u.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=s.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new s.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(u,m,y){if(this.terrain&&this.terrain.renderingToTexture)return;const S=this.style.fog;if(S){const C=S.getOpacity(this.transform.pitch),L=((O,$,q,K,ae,pe,be,Se,xe,Ce,le)=>{const ye=O.transform,Pe=$.properties.get("color").toArray01();Pe[3]=K;const Le=O.frameCounter/1e3%1;return{u_fog_matrix:q?ye.calculateFogTileMatrix(q):O.identityMat,u_fog_range:$.getFovAdjustedRange(ye._fov),u_fog_color:Pe,u_fog_horizon_blend:$.properties.get("horizon-blend"),u_fog_temporal_offset:Le,u_frustum_tl:ae,u_frustum_tr:pe,u_frustum_br:be,u_frustum_bl:Se,u_globe_pos:xe,u_globe_radius:Ce,u_viewport:le,u_globe_transition:s.globeToMercatorTransition(ye.zoom),u_is_globe:+(ye.projection.name==="globe")}})(this,S,y,C,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*s.exported.devicePixelRatio,this.transform.height*s.exported.devicePixelRatio]);m.setFogUniformValues(u,L)}}setTileLoadedFlag(u){this.tileLoaded=u}saveCanvasCopy(){const u=this.canvasCopy();u&&(this.frameCopies.push(u),this.tileLoaded=!1)}canvasCopy(){const u=this.context.gl,m=u.createTexture();return u.bindTexture(u.TEXTURE_2D,m),u.copyTexImage2D(u.TEXTURE_2D,0,u.RGBA,0,0,u.drawingBufferWidth,u.drawingBufferHeight,0),m}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const u=this.style&&this.style.fog;return!!u&&u.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){const u=this._backgroundTiles,m=this._backgroundTiles={},y=this.transform.coveringTiles({tileSize:512});for(const S of y)m[S.key]=u[S.key]||new s.Tile(S,512,this.transform.tileZoom,this);return m}clearBackgroundTiles(){this._backgroundTiles={}}}class Wh{constructor(u=0,m=0,y=0,S=0){if(isNaN(u)||u<0||isNaN(m)||m<0||isNaN(y)||y<0||isNaN(S)||S<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=u,this.bottom=m,this.left=y,this.right=S}interpolate(u,m,y){return m.top!=null&&u.top!=null&&(this.top=s.number(u.top,m.top,y)),m.bottom!=null&&u.bottom!=null&&(this.bottom=s.number(u.bottom,m.bottom,y)),m.left!=null&&u.left!=null&&(this.left=s.number(u.left,m.left,y)),m.right!=null&&u.right!=null&&(this.right=s.number(u.right,m.right,y)),this}getCenter(u,m){const y=s.clamp((this.left+u-this.right)/2,0,u),S=s.clamp((this.top+m-this.bottom)/2,0,m);return new s.Point(y,S)}equals(u){return this.top===u.top&&this.bottom===u.bottom&&this.left===u.left&&this.right===u.right}clone(){return new Wh(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Hh(v,u){const m=s.getColumn(v,3);s.fromQuat(v,u),s.setColumn(v,3,m)}function Ii(v,u){const m=s.identity$1([]);return s.rotateZ$1(m,m,-u),s.rotateX$1(m,m,-v),m}function Sd(v,u){const m=[v[0],v[1],0],y=[u[0],u[1],0];if(s.length(m)>=1e-15){const L=s.normalize([],m);s.scale$2(y,L,s.dot(y,L)),u[0]=y[0],u[1]=y[1]}const S=s.cross([],u,v);if(s.len(S)<1e-15)return null;const C=Math.atan2(-S[1],S[0]);return Ii(Math.atan2(Math.sqrt(v[0]*v[0]+v[1]*v[1]),-v[2]),C)}class bl{constructor(u,m){this.position=u,this.orientation=m}get position(){return this._position}set position(u){if(u){const m=u instanceof s.MercatorCoordinate?u:new s.MercatorCoordinate(u[0],u[1],u[2]);this._renderWorldCopies&&(m.x=s.wrap(m.x,0,1)),this._position=m}else this._position=null}lookAtPoint(u,m){if(this.orientation=null,!this.position)return;const y=this.position,S=this._elevation?this._elevation.getAtPointOrZero(s.MercatorCoordinate.fromLngLat(u)):0,C=s.MercatorCoordinate.fromLngLat(u,S),L=[C.x-y.x,C.y-y.y,C.z-y.z];m||(m=[0,0,1]),m[2]=Math.abs(m[2]),this.orientation=Sd(L,m)}setPitchBearing(u,m){this.orientation=Ii(s.degToRad(u),s.degToRad(-m))}}class Ed{constructor(u,m){this._transform=s.identity([]),this.orientation=m,this.position=u}get mercatorPosition(){const u=this.position;return new s.MercatorCoordinate(u[0],u[1],u[2])}get position(){const u=s.getColumn(this._transform,3);return[u[0],u[1],u[2]]}set position(u){var m;u&&s.setColumn(this._transform,3,[(m=u)[0],m[1],m[2],1])}get orientation(){return this._orientation}set orientation(u){this._orientation=u||s.identity$1([]),u&&Hh(this._transform,this._orientation)}getPitchBearing(){const u=this.forward(),m=this.right();return{bearing:Math.atan2(-m[1],m[0]),pitch:Math.atan2(Math.sqrt(u[0]*u[0]+u[1]*u[1]),-u[2])}}setPitchBearing(u,m){this._orientation=Ii(u,m),Hh(this._transform,this._orientation)}forward(){const u=s.getColumn(this._transform,2);return[-u[0],-u[1],-u[2]]}up(){const u=s.getColumn(this._transform,1);return[-u[0],-u[1],-u[2]]}right(){const u=s.getColumn(this._transform,0);return[u[0],u[1],u[2]]}getCameraToWorld(u,m){const y=new Float64Array(16);return s.invert(y,this.getWorldToCamera(u,m)),y}getWorldToCameraPosition(u,m,y){const S=this.position;s.scale$2(S,S,-u);const C=new Float64Array(16);return s.fromScaling(C,[y,y,y]),s.translate(C,C,S),C[10]*=m,C}getWorldToCamera(u,m){const y=new Float64Array(16),S=new Float64Array(4),C=this.position;return s.conjugate(S,this._orientation),s.scale$2(C,C,-u),s.fromQuat(y,S),s.translate(y,y,C),y[1]*=-1,y[5]*=-1,y[9]*=-1,y[13]*=-1,y[8]*=m,y[9]*=m,y[10]*=m,y[11]*=m,y}getCameraToClipPerspective(u,m,y,S){const C=new Float64Array(16);return s.perspective(C,u,m,y,S),C}getDistanceToElevation(u,m=!1){const y=u===0?0:s.mercatorZfromAltitude(u,m?s.latFromMercatorY(this.position[1]):this.position[1]),S=this.forward();return(y-this.position[2])/S[2]}clone(){return new Ed([...this.position],[...this.orientation])}}function ku(v,u){const m=Gh(v.projection,v.zoom,v.width,v.height),y=(function(C,L,O,$,q){const K=new s.LngLat(O.lng-180*Wl,O.lat),ae=new s.LngLat(O.lng+180*Wl,O.lat),pe=C.project(K.lng,K.lat),be=C.project(ae.lng,ae.lat),Se=-Math.atan2(be.y-pe.y,be.x-pe.x),xe=s.MercatorCoordinate.fromLngLat(O);xe.y=s.clamp(xe.y,-1+Wl,1-Wl);const Ce=xe.toLngLat(),le=C.project(Ce.lng,Ce.lat),ye=s.MercatorCoordinate.fromLngLat(Ce);ye.x+=Wl;const Pe=ye.toLngLat(),Le=C.project(Pe.lng,Pe.lat),We=qh(Le.x-le.x,Le.y-le.y,Se),qe=s.MercatorCoordinate.fromLngLat(Ce);qe.y+=Wl;const Ye=qe.toLngLat(),ut=C.project(Ye.lng,Ye.lat),at=qh(ut.x-le.x,ut.y-le.y,Se),gt=Math.abs(We.x)/Math.abs(at.y),qt=s.identity([]);s.rotateZ(qt,qt,-Se*(1-(q?0:$)));const dt=s.identity([]);return s.scale(dt,dt,[1,1-(1-gt)*$,1]),dt[4]=-at.x/at.y*$,s.rotateZ(dt,dt,Se),s.multiply(dt,qt,dt),dt})(v.projection,0,v.center,m,u),S=bg(v);return s.scale(y,y,[S,S,1]),y}function bg(v){const u=v.projection,m=Gh(v.projection,v.zoom,v.width,v.height),y=xg(u,v.center),S=xg(u,s.LngLat.convert(u.center));return Math.pow(2,y*m+(1-m)*S)}function Gh(v,u,m,y,S=1/0){const C=v.range;if(!C)return 0;const L=Math.min(S,Math.max(m,y)),O=Math.log(L/1024)/Math.LN2;return s.smoothstep(C[0]+O,C[1]+O,u)}const Wl=1/4e4;function xg(v,u){const m=s.clamp(u.lat,-s.MAX_MERCATOR_LATITUDE,s.MAX_MERCATOR_LATITUDE),y=new s.LngLat(u.lng-180*Wl,m),S=new s.LngLat(u.lng+180*Wl,m),C=v.project(y.lng,m),L=v.project(S.lng,m),O=s.MercatorCoordinate.fromLngLat(y),$=s.MercatorCoordinate.fromLngLat(S),q=L.x-C.x,K=L.y-C.y,ae=$.x-O.x,pe=$.y-O.y,be=Math.sqrt((ae*ae+pe*pe)/(q*q+K*K));return Math.log(be)/Math.LN2}function qh(v,u,m){const y=Math.cos(m),S=Math.sin(m);return{x:v*y-u*S,y:v*S+u*y}}class Iu{constructor(u,m,y,S,C,L,O){this.tileSize=512,this._renderWorldCopies=C===void 0||C,this._minZoom=u||0,this._maxZoom=m||22,this._minPitch=y??0,this._maxPitch=S??60,this.setProjection(L),this.setMaxBounds(O),this.width=0,this.height=0,this._center=new s.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new Wh,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new Ed,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}clone(){const u=new Iu(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return u._elevation=this._elevation,u._centerAltitude=this._centerAltitude,u._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,u.tileSize=this.tileSize,u.mercatorFromTransition=this.mercatorFromTransition,u.width=this.width,u.height=this.height,u.cameraElevationReference=this.cameraElevationReference,u._center=this._center,u._setZoom(this.zoom),u._seaLevelZoom=this._seaLevelZoom,u.angle=this.angle,u._fov=this._fov,u._pitch=this._pitch,u._nearZ=this._nearZ,u._farZ=this._farZ,u._averageElevation=this._averageElevation,u._unmodified=this._unmodified,u._edgeInsets=this._edgeInsets.clone(),u._camera=this._camera.clone(),u._calcMatrices(),u.freezeTileCoverage=this.freezeTileCoverage,u.frustumCorners=this.frustumCorners,u}get elevation(){return this._elevation}set elevation(u){this._elevation!==u&&(this._elevation=u,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(u,m=!1){const y=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(this._seaLevelZoom==null||y)&&this._updateCameraOnTerrain(),(u||y)&&this._constrainCamera(m),this._calcMatrices()}getProjection(){return s.pick(this.projection,["name","center","parallels"])}setProjection(u){this.projectionOptions=u||{name:"mercator"};const m=this.projection?this.getProjection():void 0;this.projection=s.getProjection(this.projectionOptions);const y=!p(m,this.getProjection());return y&&this._calcMatrices(),this.mercatorFromTransition=!1,y}setMercatorFromTransition(){const u=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=s.getProjection({name:"mercator"});const m=u!==this.projection.name;return m&&this._calcMatrices(),m}get minZoom(){return this._minZoom}set minZoom(u){this._minZoom!==u&&(this._minZoom=u,this.zoom=Math.max(this.zoom,u))}get maxZoom(){return this._maxZoom}set maxZoom(u){this._maxZoom!==u&&(this._maxZoom=u,this.zoom=Math.min(this.zoom,u))}get minPitch(){return this._minPitch}set minPitch(u){this._minPitch!==u&&(this._minPitch=u,this.pitch=Math.max(this.pitch,u))}get maxPitch(){return this._maxPitch}set maxPitch(u){this._maxPitch!==u&&(this._maxPitch=u,this.pitch=Math.min(this.pitch,u))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(u){u===void 0?u=!0:u===null&&(u=!1),this._renderWorldCopies=u}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const u=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(u))}get cameraWorldSize(){const u=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(u))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return s.mercatorZfromAltitude(this.center.lat,this.cameraWorldSizeForFog)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new s.Point(this.width,this.height)}get bearing(){return s.wrap(this.rotation,-180,180)}set bearing(u){this.rotation=u}get rotation(){return-this.angle/Math.PI*180}set rotation(u){const m=-u*Math.PI/180;var y;this.angle!==m&&(this._unmodified=!1,this.angle=m,this._calcMatrices(),this.rotationMatrix=(y=new s.ARRAY_TYPE(4),s.ARRAY_TYPE!=Float32Array&&(y[1]=0,y[2]=0),y[0]=1,y[3]=1,y),(function(S,C,L){var O=C[0],$=C[1],q=C[2],K=C[3],ae=Math.sin(L),pe=Math.cos(L);S[0]=O*pe+q*ae,S[1]=$*pe+K*ae,S[2]=O*-ae+q*pe,S[3]=$*-ae+K*pe})(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(u){const m=s.clamp(u,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==m&&(this._unmodified=!1,this._pitch=m,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}get fovX(){return this._fov}get fovY(){const u=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/u)}set fov(u){u=Math.max(.01,Math.min(60,u)),this._fov!==u&&(this._unmodified=!1,this._fov=s.degToRad(u),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(u){this._averageElevation=u,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(u){const m=Math.min(Math.max(u,this.minZoom),this.maxZoom);this._zoom!==m&&(this._unmodified=!1,this._setZoom(m),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(u){this._zoom=u,this.scale=this.zoomScale(u),this.tileZoom=Math.floor(u),this.zoomFraction=u-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const u=this._elevation;this._centerAltitude=u.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=u.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){this._centerAltitudeValidForExaggeration!==void 0&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const u=this._elevation,m=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],y=this.horizonLineFromTop();let S=0,C=0;for(let L=0;L<m.length;L++){const O=new s.Point(m[L][0]*this.width,y+m[L][1]*(this.height-y)),$=u.pointCoordinate(O);if(!$)continue;const q=1/Math.hypot($[0]-this._camera.position[0],$[1]-this._camera.position[1]);S+=$[3]*q,C+=q}return C===0?NaN:S/C}get center(){return this._center}set center(u){u.lat===this._center.lat&&u.lng===this._center.lng||(this._unmodified=!1,this._center=u,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._seaLevelZoom==null||!this._elevation)return;const u=this._seaLevelZoom,m=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),y=this.pixelsPerMeter/this.worldSize*m,S=this._mercatorZfromZoom(u),C=this._mercatorZfromZoom(this._maxZoom),L=Math.max(S-y,C);this._setZoom(this._zoomFromMercatorZ(L))}get padding(){return this._edgeInsets.toJSON()}set padding(u){this._edgeInsets.equals(u)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,u,1),this._calcMatrices())}computeZoomRelativeTo(u){const m=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,u.toAltitude()));let y;y=u.z<this._camera.position[2]?[m.x,m.y,m.z]:[u.x,u.y,u.z];const S=s.length(s.sub([],this._camera.position,y));return s.clamp(this._zoomFromMercatorZ(S),this._minZoom,this._maxZoom)}setFreeCameraOptions(u){if(!this.height||!u.position&&!u.orientation)return;this._updateCameraState();let m=!1;if(u.orientation&&!s.exactEquals(u.orientation,this._camera.orientation)&&(m=this._setCameraOrientation(u.orientation)),u.position){const y=[u.position.x,u.position.y,u.position.z];s.exactEquals$1(y,this._camera.position)||(this._setCameraPosition(y),m=!0)}m&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const u=this._camera.position,m=new bl;return m.position=new s.MercatorCoordinate(u[0],u[1],u[2]),m.orientation=this._camera.orientation,m._elevation=this.elevation,m._renderWorldCopies=this.renderWorldCopies,m}_setCameraOrientation(u){if(!s.length$1(u))return!1;s.normalize$1(u,u);const m=s.transformQuat([],[0,0,-1],u),y=s.transformQuat([],[0,-1,0],u);if(y[2]<0)return!1;const S=Sd(m,y);return!!S&&(this._camera.orientation=S,!0)}_setCameraPosition(u){const m=this.zoomScale(this.minZoom)*this.tileSize,y=this.zoomScale(this.maxZoom)*this.tileSize,S=this.cameraToCenterDistance;u[2]=s.clamp(u[2],S/y,S/m),this._camera.position=u}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(u){return this._edgeInsets.equals(u)}interpolatePadding(u,m,y){this._unmodified=!1,this._edgeInsets.interpolate(u,m,y),this._constrain(),this._calcMatrices()}coveringZoomLevel(u){const m=(u.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/u.tileSize));return Math.max(0,m)}getVisibleUnwrappedCoordinates(u){const m=[new s.UnwrappedTileID(0,u)];if(this.renderWorldCopies){const y=this.pointCoordinate(new s.Point(0,0)),S=this.pointCoordinate(new s.Point(this.width,0)),C=this.pointCoordinate(new s.Point(this.width,this.height)),L=this.pointCoordinate(new s.Point(0,this.height)),O=Math.floor(Math.min(y.x,S.x,C.x,L.x)),$=Math.floor(Math.max(y.x,S.x,C.x,L.x)),q=1;for(let K=O-q;K<=$+q;K++)K!==0&&m.push(new s.UnwrappedTileID(K,u))}return m}coveringTiles(u){let m=this.coveringZoomLevel(u);const y=m,S=this.elevation&&!u.isTerrainDEM,C=this.projection.name==="mercator";if(u.minzoom!==void 0&&m<u.minzoom)return[];u.maxzoom!==void 0&&m>u.maxzoom&&(m=u.maxzoom);const L=this.locationCoordinate(this.center),O=this.center.lat,$=1<<m,q=[$*L.x,$*L.y,0],K=this.projection.name==="globe",ae=!K,pe=s.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,m,ae),be=K?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),Se=$*s.mercatorZfromAltitude(1,this.center.lat),xe=this._camera.position[2]/s.mercatorZfromAltitude(1,this.center.lat),Ce=[$*be.x,$*be.y,xe*(ae?1:Se)],le=this.cameraToCenterDistance/u.tileSize*(u.roundZoom?1:.502),ye=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?m:0,Pe=u.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,Le=u.isTerrainDEM?-Pe:this._elevation?this._elevation.getMinElevationBelowMSL():0,We=this.projection.isReprojectedInTileSpace?bg(this):1,qe=ft=>{const Ht=new s.MercatorCoordinate(ft.x+25e-6,ft.y,ft.z),Nt=new s.MercatorCoordinate(ft.x,ft.y+25e-6,ft.z),Jt=ft.toLngLat(),Mn=Ht.toLngLat(),Gn=Nt.toLngLat(),En=this.locationCoordinate(Jt),Rn=this.locationCoordinate(Mn),gi=this.locationCoordinate(Gn),pi=Math.hypot(Rn.x-En.x,Rn.y-En.y),An=Math.hypot(gi.x-En.x,gi.y-En.y);return Math.sqrt(pi*An)*We/25e-6},Ye=ft=>{const Et=Pe,Ht=Le;return{aabb:s.tileAABB(this,$,0,0,0,ft,Ht,Et,this.projection),zoom:0,x:0,y:0,minZ:Ht,maxZ:Et,wrap:ft,fullyVisible:!1}},ut=[];let at=[];const gt=m,qt=u.reparseOverscaled?y:m,dt=ft=>ft*ft,Vt=dt((xe-this._centerAltitude)*Se),xt=ft=>{if(!this._elevation||!ft.tileID||!C)return;const Et=this._elevation.getMinMaxForTile(ft.tileID),Ht=ft.aabb;Et?(Ht.min[2]=Et.min,Ht.max[2]=Et.max,Ht.center[2]=(Ht.min[2]+Ht.max[2])/2):(ft.shouldSplit=Zt(ft),ft.shouldSplit||(Ht.min[2]=Ht.max[2]=Ht.center[2]=this._centerAltitude))},Zt=ft=>{if(ft.zoom<ye)return!0;if(ft.zoom===gt)return!1;if(ft.shouldSplit!=null)return ft.shouldSplit;const Et=ft.aabb.distanceX(Ce),Ht=ft.aabb.distanceY(Ce);let Nt=Vt,Jt=1;if(K){Nt=dt(ft.aabb.distanceZ(Ce));const En=Math.pow(2,ft.zoom),Rn=s.latFromMercatorY((ft.y+1)/En),gi=s.latFromMercatorY(ft.y/En),pi=Math.min(Math.max(O,Rn),gi),An=s.circumferenceAtLatitude(pi)/s.circumferenceAtLatitude(O);if(Jt=pi===O?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,An/this._mercatorScaleRatio),this.zoom<=s.GLOBE_ZOOM_THRESHOLD_MIN&&ft.zoom===gt-1&&An>=.9)return!0}else if(S&&(Nt=dt(ft.aabb.distanceZ(Ce)*Se)),this.projection.isReprojectedInTileSpace&&y<=5){const En=Math.pow(2,ft.zoom),Rn=qe(new s.MercatorCoordinate((ft.x+.5)/En,(ft.y+.5)/En));Jt=Rn>.85?1:Rn}const Mn=Et*Et+Ht*Ht+Nt,Gn=dt((1<<gt-ft.zoom)*le*Jt*((En,Rn)=>{if(Rn*dt(.707)<En)return 1;const gi=Math.sqrt(Rn/En);return gi/(1.4144271570014144+(Math.pow(1.1,gi-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(Nt,Vt),Mn));return Mn<Gn};if(this.renderWorldCopies)for(let ft=1;ft<=3;ft++)ut.push(Ye(-ft)),ut.push(Ye(ft));for(ut.push(Ye(0));ut.length>0;){const ft=ut.pop(),Et=ft.x,Ht=ft.y;let Nt=ft.fullyVisible;if(!Nt){const Jt=ft.aabb.intersects(pe);if(Jt===0)continue;Nt=Jt===2}if(ft.zoom!==gt&&Zt(ft))for(let Jt=0;Jt<4;Jt++){const Mn=(Et<<1)+Jt%2,Gn=(Ht<<1)+(Jt>>1),En={aabb:C?ft.aabb.quadrant(Jt):s.tileAABB(this,$,ft.zoom+1,Mn,Gn,ft.wrap,ft.minZ,ft.maxZ,this.projection),zoom:ft.zoom+1,x:Mn,y:Gn,wrap:ft.wrap,fullyVisible:Nt,tileID:void 0,shouldSplit:void 0,minZ:ft.minZ,maxZ:ft.maxZ};S&&!K&&(En.tileID=new s.OverscaledTileID(ft.zoom+1===gt?qt:ft.zoom+1,ft.wrap,ft.zoom+1,Mn,Gn),xt(En)),ut.push(En)}else{const Jt=ft.zoom===gt?qt:ft.zoom;if(u.minzoom&&u.minzoom>Jt)continue;const Mn=q[0]-(.5+Et+(ft.wrap<<ft.zoom))*(1<<m-ft.zoom),Gn=q[1]-.5-Ht,En=ft.tileID?ft.tileID:new s.OverscaledTileID(Jt,ft.wrap,ft.zoom,Et,Ht);at.push({tileID:En,distanceSq:Mn*Mn+Gn*Gn})}}if(this.fogCullDistSq){const ft=this.fogCullDistSq,Et=this.horizonLineFromTop();at=at.filter((Ht=>{const Nt=[0,0,0,1],Jt=[s.EXTENT,s.EXTENT,0,1],Mn=this.calculateFogTileMatrix(Ht.tileID.toUnwrapped());s.transformMat4$1(Nt,Nt,Mn),s.transformMat4$1(Jt,Jt,Mn);const Gn=s.getAABBPointSquareDist(Nt,Jt);if(Gn===0)return!0;let En=!1;const Rn=this._elevation;if(Rn&&Gn>ft&&Et!==0){const gi=this.calculateProjMatrix(Ht.tileID.toUnwrapped());let pi;u.isTerrainDEM||(pi=Rn.getMinMaxForTile(Ht.tileID)),pi||(pi={min:Le,max:Pe});const An=s.furthestTileCorner(this.rotation),Oi=[An[0]*s.EXTENT,An[1]*s.EXTENT,pi.max];s.transformMat4(Oi,Oi,gi),En=(1-Oi[1])*this.height*.5<Et}return Gn<ft||En}))}return at.sort(((ft,Et)=>ft.distanceSq-Et.distanceSq)).map((ft=>ft.tileID))}resize(u,m){this.width=u,this.height=m,this.pixelsToGLUnits=[2/u,-2/m],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(u){return Math.pow(2,u)}scaleZoom(u){return Math.log(u)/Math.LN2}project(u){const m=s.clamp(u.lat,-s.MAX_MERCATOR_LATITUDE,s.MAX_MERCATOR_LATITUDE),y=this.projection.project(u.lng,m);return new s.Point(y.x*this.worldSize,y.y*this.worldSize)}unproject(u){return this.projection.unproject(u.x/this.worldSize,u.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/s.mercatorZfromAltitude(1,this.center.lat)/this.worldSize}setLocationAtPoint(u,m){let y,S;const C=this.centerPoint;if(this.projection.name==="globe"){const O=this.worldSize;y=(m.x-C.x)/O,S=(m.y-C.y)/O}else{const O=this.pointCoordinate(m),$=this.pointCoordinate(C);y=O.x-$.x,S=O.y-$.y}const L=this.locationCoordinate(u);this.setLocation(new s.MercatorCoordinate(L.x-y,L.y-S))}setLocation(u){this.center=this.coordinateLocation(u),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(u){return this.projection.locationPoint(this,u)}locationPoint3D(u){return this.projection.locationPoint(this,u,!0)}pointLocation(u){return this.coordinateLocation(this.pointCoordinate(u))}pointLocation3D(u){return this.coordinateLocation(this.pointCoordinate3D(u))}locationCoordinate(u,m){const y=m?s.mercatorZfromAltitude(m,u.lat):void 0,S=this.projection.project(u.lng,u.lat);return new s.MercatorCoordinate(S.x,S.y,y)}coordinateLocation(u){return this.projection.unproject(u.x,u.y)}pointRayIntersection(u,m){const y=m??this._centerAltitude,S=[u.x,u.y,0,1],C=[u.x,u.y,1,1];s.transformMat4$1(S,S,this.pixelMatrixInverse),s.transformMat4$1(C,C,this.pixelMatrixInverse);const L=C[3];s.scale$1(S,S,1/S[3]),s.scale$1(C,C,1/L);const O=S[2],$=C[2];return{p0:S,p1:C,t:O===$?0:(y-O)/($-O)}}screenPointToMercatorRay(u){const m=[u.x,u.y,0,1],y=[u.x,u.y,1,1];return s.transformMat4$1(m,m,this.pixelMatrixInverse),s.transformMat4$1(y,y,this.pixelMatrixInverse),s.scale$1(m,m,1/m[3]),s.scale$1(y,y,1/y[3]),m[2]=s.mercatorZfromAltitude(m[2],this._center.lat)*this.worldSize,y[2]=s.mercatorZfromAltitude(y[2],this._center.lat)*this.worldSize,s.scale$1(m,m,1/this.worldSize),s.scale$1(y,y,1/this.worldSize),new s.Ray([m[0],m[1],m[2]],s.normalize([],s.sub([],y,m)))}rayIntersectionCoordinate(u){const{p0:m,p1:y,t:S}=u,C=s.mercatorZfromAltitude(m[2],this._center.lat),L=s.mercatorZfromAltitude(y[2],this._center.lat);return new s.MercatorCoordinate(s.number(m[0],y[0],S)/this.worldSize,s.number(m[1],y[1],S)/this.worldSize,s.number(C,L,S))}pointCoordinate(u,m=this._centerAltitude){return this.projection.pointCoordinate(this,u.x,u.y,m)}pointCoordinate3D(u){if(!this.elevation)return this.pointCoordinate(u);let m=this.projection.pointCoordinate3D(this,u.x,u.y);if(m)return new s.MercatorCoordinate(m[0],m[1],m[2]);let y=0,S=this.horizonLineFromTop();if(u.y>S)return this.pointCoordinate(u);const C=.02*S,L=u.clone();for(let O=0;O<10&&S-y>C;O++){L.y=s.number(y,S,.66);const $=this.projection.pointCoordinate3D(this,L.x,L.y);$?(S=L.y,m=$):y=L.y}return m?new s.MercatorCoordinate(m[0],m[1],m[2]):this.pointCoordinate(u)}isPointAboveHorizon(u){return this.projection.isPointAboveHorizon(this,u)}isPointOnSurface(u){if(u.y<0||u.y>this.height||u.x<0||u.x>this.width)return!1;if(this.elevation||this.zoom>=s.GLOBE_ZOOM_THRESHOLD_MAX)return!this.isPointAboveHorizon(u);const m=this.pointCoordinate(u);return m.y>=0&&m.y<=1}_coordinatePoint(u,m){const y=m&&this.elevation?this.elevation.getAtPointOrZero(u,this._centerAltitude):this._centerAltitude,S=[u.x*this.worldSize,u.y*this.worldSize,y+u.toAltitude(),1];return s.transformMat4$1(S,S,this.pixelMatrix),S[3]>0?new s.Point(S[0]/S[3],S[1]/S[3]):new s.Point(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:u,left:m}=this._edgeInsets,y=this.height-this._edgeInsets.bottom,S=this.width-this._edgeInsets.right,C=this.pointLocation3D(new s.Point(m,u)),L=this.pointLocation3D(new s.Point(S,u)),O=this.pointLocation3D(new s.Point(S,y)),$=this.pointLocation3D(new s.Point(m,y));let q=Math.min(C.lng,L.lng,O.lng,$.lng),K=Math.max(C.lng,L.lng,O.lng,$.lng),ae=Math.min(C.lat,L.lat,O.lat,$.lat),pe=Math.max(C.lat,L.lat,O.lat,$.lat);const be=Math.pow(2,-this.zoom)/16*270,Se=this.projection.name==="globe"?1:4,xe=(Ce,le,ye,Pe,Le)=>{const We=(Ce+ye)/2,qe=(le+Pe)/2,Ye=new s.Point(We,qe),{lng:ut,lat:at}=this.pointLocation3D(Ye),gt=Math.max(0,q-ut,ae-at,ut-K,at-pe);q=Math.min(q,ut),K=Math.max(K,ut),ae=Math.min(ae,at),pe=Math.max(pe,at),(Le<Se||gt>be)&&(xe(Ce,le,We,qe,Le+1),xe(We,qe,ye,Pe,Le+1))};if(xe(m,u,S,u,1),xe(S,u,S,y,1),xe(S,y,m,y,1),xe(m,y,m,u,1),this.projection.name==="globe"){const[Ce,le]=s.polesInViewport(this);Ce?(pe=90,K=180,q=-180):le&&(ae=-90,K=180,q=-180)}return new s.LngLatBounds(new s.LngLat(q,ae),new s.LngLat(K,pe))}_getBoundsRectangular(u,m){const{top:y,left:S}=this._edgeInsets,C=this.height-this._edgeInsets.bottom,L=this.width-this._edgeInsets.right,O=new s.Point(S,y),$=new s.Point(L,y),q=new s.Point(L,C),K=new s.Point(S,C);let ae=this.pointCoordinate(O,u),pe=this.pointCoordinate($,u);const be=this.pointCoordinate(q,m),Se=this.pointCoordinate(K,m),xe=(Ce,le)=>(le.y-Ce.y)/(le.x-Ce.x);return ae.y>1&&pe.y>=0?ae=new s.MercatorCoordinate((1-Se.y)/xe(Se,ae)+Se.x,1):ae.y<0&&pe.y<=1&&(ae=new s.MercatorCoordinate(-Se.y/xe(Se,ae)+Se.x,0)),pe.y>1&&ae.y>=0?pe=new s.MercatorCoordinate((1-be.y)/xe(be,pe)+be.x,1):pe.y<0&&ae.y<=1&&(pe=new s.MercatorCoordinate(-be.y/xe(be,pe)+be.x,0)),new s.LngLatBounds().extend(this.coordinateLocation(ae)).extend(this.coordinateLocation(pe)).extend(this.coordinateLocation(Se)).extend(this.coordinateLocation(be))}_getBoundsRectangularTerrain(){const u=this.elevation;if(!u.visibleDemTiles.length||u.isUsingMockSource())return this._getBoundsRectangular(0,0);const m=u.visibleDemTiles.reduce(((y,S)=>{if(S.dem){const C=S.dem.tree;y.min=Math.min(y.min,C.minimums[0]),y.max=Math.max(y.max,C.maximums[0])}return y}),{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(m.min*u.exaggeration(),m.max*u.exaggeration())}getBounds(){return this.projection.name==="mercator"||this.projection.name==="equirectangular"?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(u=!0){const m=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,y=this.height/2-m*(1-this._horizonShift);return u?Math.max(0,y):y}getMaxBounds(){return this.maxBounds}setMaxBounds(u){this.maxBounds=u,this.minLat=-s.MAX_MERCATOR_LATITUDE,this.maxLat=s.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,u&&(this.minLat=u.getSouth(),this.maxLat=u.getNorth(),this.minLng=u.getWest(),this.maxLng=u.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=s.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=s.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=s.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=s.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(u,m){return this.projection.createTileMatrix(this,m,u)}calculateDistanceTileData(u){const m=u.key,y=this._distanceTileDataCache;if(y[m])return y[m];const S=u.canonical,C=1/this.height,L=this.cameraWorldSize,O=L/this.zoomScale(S.z),$=(S.x+Math.pow(2,S.z)*u.wrap)*O,q=S.y*O,K=this.point;K.x*=L/this.worldSize,K.y*=L/this.worldSize;const ae=this.angle,pe=Math.sin(-ae),be=-Math.cos(-ae);return y[m]={bearing:[pe,be],center:[(K.x-$)*C,(K.y-q)*C],scale:O/s.EXTENT*C},y[m]}calculateFogTileMatrix(u){const m=u.key,y=this._fogTileMatrixCache;if(y[m])return y[m];const S=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,u);return s.multiply(S,this.worldToFogMatrix,S),y[m]=new Float32Array(S),y[m]}calculateProjMatrix(u,m=!1){const y=u.key,S=m?this._alignedProjMatrixCache:this._projMatrixCache;if(S[y])return S[y];const C=this.calculatePosMatrix(u,this.worldSize);return s.multiply(C,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:m?this.alignedProjMatrix:this.projMatrix,C),S[y]=new Float32Array(C),S[y]}calculatePixelsToTileUnitsMatrix(u){const m=u.tileID.key,y=this._pixelsToTileUnitsCache;if(y[m])return y[m];const S=(function(C,L){const{scale:O}=C.tileTransform,$=O*s.EXTENT/(C.tileSize*Math.pow(2,L.zoom-C.tileID.overscaledZ+C.tileID.canonical.z));return q=new Float32Array(4),pe=(K=L.inverseAdjustmentMatrix)[1],be=K[2],Se=K[3],Ce=(ae=[$,$])[1],q[0]=K[0]*(xe=ae[0]),q[1]=pe*xe,q[2]=be*Ce,q[3]=Se*Ce,q;var q,K,ae,pe,be,Se,xe,Ce})(u,this);return y[m]=S,y[m]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if(this.projection.name==="globe"){const u=1/this.worldSize,m=s.fromScaling([],[u,u,u]);return s.multiply(m,m,this.globeMatrix),m}}recenterOnTerrain(){if(!this._elevation||this.projection.name==="globe")return;const u=this._elevation;this._updateCameraState();const m=s.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,y=this._computeCameraPosition(m),S=this._camera.forward(),C=s.mercatorZfromAltitude(1,this._center.lat);y[2]/=C,S[2]/=C,s.normalize(S,S);const L=u.raycast(y,S,u.exaggeration());if(L){const O=s.scaleAndAdd([],y,S,L),$=new s.MercatorCoordinate(O[0],O[1],s.mercatorZfromAltitude(O[2],s.latFromMercatorY(O[1]))),q=($.z+s.length([$.x-y[0],$.y-y[1],$.z-y[2]*C]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(q),this._centerAltitude=$.toAltitude(),this._center=this.coordinateLocation($),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(u=!1){if(!this._elevation)return;const m=this._elevation,y=s.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,S=this._computeCameraPosition(y),C=m.getAtPointOrZero(new s.MercatorCoordinate(...S)),L=this.pixelsPerMeter/this.worldSize*C,O=this._minimumHeightOverTerrain(),$=S[2]-L;if($<=O)if($<0||u){const q=this.locationCoordinate(this._center,this._centerAltitude),K=[S[0],S[1],q.z-S[2]],ae=s.length(K);K[2]-=(O-$)/this._pixelsPerMercatorPixel;const pe=s.length(K);if(pe===0)return;s.scale$2(K,K,ae/pe*this._pixelsPerMercatorPixel),this._camera.position=[S[0],S[1],q.z*this._pixelsPerMercatorPixel-K[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const u=this.projection.name==="globe"||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||u){const pe=this.center;return pe.lat=s.clamp(pe.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!u)&&(pe.lng=s.clamp(pe.lng,this.minLng,this.maxLng)),this.center=pe,void(this._constraining=!1)}const m=this._unmodified,{x:y,y:S}=this.point;let C=0,L=y,O=S;const $=this.width/2,q=this.height/2,K=this.worldMinY*this.scale,ae=this.worldMaxY*this.scale;if(S-q<K&&(O=K+q),S+q>ae&&(O=ae-q),ae-K<this.height&&(C=Math.max(C,this.height/(ae-K)),O=(ae+K)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const pe=this.worldMinX*this.scale,be=this.worldMaxX*this.scale,Se=this.worldSize/2-(pe+be)/2;L=(y+Se+this.worldSize)%this.worldSize-Se,L-$<pe&&(L=pe+$),L+$>be&&(L=be-$),be-pe<this.width&&(C=Math.max(C,this.width/(be-pe)),L=(be+pe)/2)}L===y&&O===S||(this.center=this.unproject(new s.Point(L,O))),C&&(this.zoom+=this.scaleZoom(C)),this._constrainCamera(),this._unmodified=m,this._constraining=!1}_minZoomForBounds(){let u=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(u=Math.max(u,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),u}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const u=this.centerOffset,m=this.pixelsPerMeter;this.projection.name==="globe"&&(this._mercatorScaleRatio=s.mercatorZfromAltitude(1,this.center.lat)/s.mercatorZfromAltitude(1,s.GLOBE_SCALE_MATCH_LATITUDE));const y=Gh(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,y),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const S=this.projection.zAxisUnit==="meters"?m:1,C=this._camera.getWorldToCamera(this.worldSize,S),L=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);L[8]=2*-u.x/this.width,L[9]=2*u.y/this.height;let O=s.mul([],L,C);if(this.projection.isReprojectedInTileSpace){const qe=this.locationCoordinate(this.center),Ye=s.identity([]);s.translate(Ye,Ye,[qe.x*this.worldSize,qe.y*this.worldSize,0]),s.multiply(Ye,Ye,ku(this)),s.translate(Ye,Ye,[-qe.x*this.worldSize,-qe.y*this.worldSize,0]),s.multiply(O,O,Ye),this.inverseAdjustmentMatrix=(function(ut){const at=ku(ut,!0);return W([],[at[0],at[1],at[4],at[5]])})(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=s.scale([],O,[this.worldSize,this.worldSize,this.worldSize/S,1]),this.projMatrix=O,this.invProjMatrix=s.invert(new Float64Array(16),this.projMatrix);const $=s.invert([],L);this.frustumCorners=s.FrustumCorners.fromInvProjectionMatrix($,this.horizonLineFromTop(),this.height);const q=new Float32Array(16);s.identity(q),s.scale(q,q,[1,-1,1]),s.rotateX(q,q,this._pitch),s.rotateZ(q,q,this.angle);const K=s.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),ae=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;K[8]=2*-u.x/this.width,K[9]=2*(u.y+ae)/this.height,this.skyboxMatrix=s.multiply(q,K,q);const pe=this.point,be=pe.x,Se=pe.y,xe=this.width%2/2,Ce=this.height%2/2,le=Math.cos(this.angle),ye=Math.sin(this.angle),Pe=be-Math.round(be)+le*xe+ye*Ce,Le=Se-Math.round(Se)+le*Ce+ye*xe,We=new Float64Array(O);if(s.translate(We,We,[Pe>.5?Pe-1:Pe,Le>.5?Le-1:Le,0]),this.alignedProjMatrix=We,O=s.create(),s.scale(O,O,[this.width/2,-this.height/2,1]),s.translate(O,O,[1,-1,0]),this.labelPlaneMatrix=O,O=s.create(),s.scale(O,O,[1,-1,1]),s.translate(O,O,[-1,-1,0]),s.scale(O,O,[2/this.width,2/this.height,1]),this.glCoordMatrix=O,this.pixelMatrix=s.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},O=s.invert(new Float64Array(16),this.pixelMatrix),!O)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=O,this.projection.name==="globe"||this.mercatorFromTransition){this.globeMatrix=s.calculateGlobeMatrix(this);const qe=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=s.transformMat4(qe,qe,C),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=O;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const u=this.cameraWorldSizeForFog,m=this.cameraPixelsPerMeter,y=this._camera.position,S=1/this.height/this._pixelsPerMercatorPixel,C=[u,u,m];s.scale$2(C,C,S),s.scale$2(y,y,-1),s.multiply$2(y,y,C);const L=s.create();s.translate(L,L,y),s.scale(L,L,C),this.mercatorFogMatrix=L,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(u,m,S)}_computeCameraPosition(u){const m=(u=u||this.pixelsPerMeter)/this.pixelsPerMeter,y=this._camera.forward(),S=this.point,C=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*m-u/this.worldSize*this._centerAltitude;return[S.x/this.worldSize-y[0]*C,S.y/this.worldSize-y[1]*C,u/this.worldSize*this._centerAltitude-y[2]*C]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(u){const m=this._maxCameraBoundsDistance()*Math.cos(this._pitch),y=this._camera.position[2],S=u[2];let C=1;this.projection.wrap&&(this.center=this.center.wrap()),S>0&&(C=Math.min((m-y)/S,1)),this._camera.position=s.scaleAndAdd([],this._camera.position,u,C),this._updateStateFromCamera()}_updateStateFromCamera(){const u=this._camera.position,m=this._camera.forward(),{pitch:y,bearing:S}=this._camera.getPitchBearing(),C=s.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,L=this._mercatorZfromZoom(this._maxZoom)*Math.cos(s.degToRad(this._maxPitch)),O=Math.max((u[2]-C)/Math.cos(y),L),$=this._zoomFromMercatorZ(O);s.scaleAndAdd(u,u,m,O),this._pitch=s.clamp(y,s.degToRad(this.minPitch),s.degToRad(this.maxPitch)),this.angle=s.wrap(S,-Math.PI,Math.PI),this._setZoom(s.clamp($,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new s.MercatorCoordinate(u[0],u[1],u[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(u){return Math.pow(2,u)*this.tileSize}_mercatorZfromZoom(u){return this.cameraToCenterDistance/this._worldSizeFromZoom(u)}_minimumHeightOverTerrain(){const u=Math.min((this._seaLevelZoom!=null?this._seaLevelZoom:this._zoom)+4,this._maxZoom);return this._mercatorZfromZoom(u)}_zoomFromMercatorZ(u){return this.scaleZoom(this.cameraToCenterDistance/(u*this.tileSize))}zoomFromMercatorZAdjusted(u){let m=0,y=s.GLOBE_ZOOM_THRESHOLD_MAX,S=0,C=1/0;for(;y-m>1e-6&&y>m;){const L=m+.5*(y-m),O=this.tileSize*Math.pow(2,L),$=this.getCameraToCenterDistance(this.projection,L,O),q=this.scaleZoom($/(u*this.tileSize)),K=Math.abs(L-q);K<C&&(C=K,S=L),L<q?m=L:y=L}return S}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(s.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(u,m){const y=Math.min(u.x,m.x),S=Math.max(u.x,m.x),C=Math.min(u.y,m.y),L=Math.max(u.y,m.y);if(C<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;const O=[new s.Point(y,C),new s.Point(S,L),new s.Point(y,L),new s.Point(S,C)],$=this.renderWorldCopies?-3:0,q=this.renderWorldCopies?4:1;for(const K of O){const ae=this.pointRayIntersection(K);if(ae.t<0)return!0;const pe=this.rayIntersectionCoordinate(ae);if(pe.x<$||pe.y<0||pe.x>q||pe.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+s.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new s.Point(0,0),new s.Point(this.width,this.height))}zoomDeltaToMovement(u,m){const y=s.length(s.sub([],this._camera.position,u)),S=this._zoomFromMercatorZ(y)+m;return y-this._mercatorZfromZoom(S)}getCameraPoint(){if(this.projection.name==="globe"){const u=(function([m,y,S],C){const L=[m,y,S,1];s.transformMat4$1(L,L,C);const O=L[3]=Math.max(L[3],1e-6);return L[0]/=O,L[1]/=O,L[2]/=O,L})([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new s.Point(u[0],u[1])}{const u=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new s.Point(0,u))}}getCameraToCenterDistance(u,m=this.zoom,y=this.worldSize){const S=Gh(u,m,this.width,this.height,1024),C=u.pixelSpaceConversion(this.center.lat,y,S);return .5/Math.tan(.5*this._fov)*this.height*C}getWorldToCameraMatrix(){const u=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?this.pixelsPerMeter:1);return this.projection.name==="globe"&&s.multiply(u,u,this.globeMatrix),u}}function Au(v,u){let m=!1,y=null;const S=()=>{y=null,m&&(v(),y=setTimeout(S,u),m=!1)};return()=>(m=!0,y||S(),y)}class Cd{constructor(u){this._hashName=u&&encodeURIComponent(u),s.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=Au(this._updateHashUnthrottled.bind(this),300)}addTo(u){return this._map=u,s.window.addEventListener("hashchange",this._onHashChange,!1),u.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),s.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const u=this._map;if(!u)return"";const m=bc(u);if(this._hashName){const y=this._hashName;let S=!1;const C=s.window.location.hash.slice(1).split("&").map((L=>{const O=L.split("=")[0];return O===y?(S=!0,`${O}=${m}`):L})).filter((L=>L));return S||C.push(`${y}=${m}`),`#${C.join("&")}`}return`#${m}`}_getCurrentHash(){const u=s.window.location.hash.replace("#","");if(this._hashName){let m;return u.split("&").map((y=>y.split("="))).forEach((y=>{y[0]===this._hashName&&(m=y)})),(m&&m[1]||"").split("/")}return u.split("/")}_onHashChange(){const u=this._map;if(!u)return!1;const m=this._getCurrentHash();if(m.length>=3&&!m.some((y=>isNaN(y)))){const y=u.dragRotate.isEnabled()&&u.touchZoomRotate.isEnabled()?+(m[3]||0):u.getBearing();return u.jumpTo({center:[+m[2],+m[1]],zoom:+m[0],bearing:y,pitch:+(m[4]||0)}),!0}return!1}_updateHashUnthrottled(){const u=s.window.location.href.replace(/(#.+)?$/,this.getHashString());s.window.history.replaceState(s.window.history.state,null,u)}}function bc(v,u){const m=v.getCenter(),y=Math.round(100*v.getZoom())/100,S=Math.ceil((y*Math.LN2+Math.log(512/360/.5))/Math.LN10),C=Math.pow(10,S),L=Math.round(m.lng*C)/C,O=Math.round(m.lat*C)/C,$=v.getBearing(),q=v.getPitch();let K=u?`/${L}/${O}/${y}`:`${y}/${O}/${L}`;return($||q)&&(K+="/"+Math.round(10*$)/10),q&&(K+=`/${Math.round(q)}`),K}const kd={linearity:.3,easing:s.bezier(0,0,.3,1)},Id=s.extend({deceleration:2500,maxSpeed:1400},kd),Ad=s.extend({deceleration:20,maxSpeed:1400},kd),vn=s.extend({deceleration:1e3,maxSpeed:360},kd),Qo=s.extend({deceleration:1e3,maxSpeed:90},kd);class Kh{constructor(u){this._map=u,this.clear()}clear(){this._inertiaBuffer=[]}record(u){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:s.exported.now(),settings:u})}_drainInertiaBuffer(){const u=this._inertiaBuffer,m=s.exported.now();for(;u.length>0&&m-u[0].time>160;)u.shift()}_onMoveEnd(u){if(this._map._prefersReducedMotion()||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;const m={zoom:0,bearing:0,pitch:0,pan:new s.Point(0,0),pinchAround:void 0,around:void 0};for(const{settings:C}of this._inertiaBuffer)m.zoom+=C.zoomDelta||0,m.bearing+=C.bearingDelta||0,m.pitch+=C.pitchDelta||0,C.panDelta&&m.pan._add(C.panDelta),C.around&&(m.around=C.around),C.pinchAround&&(m.pinchAround=C.pinchAround);const y=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,S={};if(m.pan.mag()){const C=Md(m.pan.mag(),y,s.extend({},Id,u||{}));S.offset=m.pan.mult(C.amount/m.pan.mag()),S.center=this._map.transform.center,Pd(S,C)}if(m.zoom){const C=Md(m.zoom,y,Ad);S.zoom=this._map.transform.zoom+C.amount,Pd(S,C)}if(m.bearing){const C=Md(m.bearing,y,vn);S.bearing=this._map.transform.bearing+s.clamp(C.amount,-179,179),Pd(S,C)}if(m.pitch){const C=Md(m.pitch,y,Qo);S.pitch=this._map.transform.pitch+C.amount,Pd(S,C)}if(S.zoom||S.bearing){const C=m.pinchAround===void 0?m.around:m.pinchAround;S.around=C?this._map.unproject(C):this._map.getCenter()}return this.clear(),S.noMoveStart=!0,S}}function Pd(v,u){(!v.duration||v.duration<u.duration)&&(v.duration=u.duration,v.easing=u.easing)}function Md(v,u,m){const{maxSpeed:y,linearity:S,deceleration:C}=m,L=s.clamp(v*S/(u/1e3),-y,y),O=Math.abs(L)/(C*S);return{easing:m.easing,duration:1e3*O,amount:L*(O/2)}}class Is extends s.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(u,m,y,S={}){const C=re(m.getCanvasContainer(),y),L=m.unproject(C);super(u,s.extend({point:C,lngLat:L,originalEvent:y},S)),this._defaultPrevented=!1,this.target=m}}class el extends s.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(u,m,y){const S=u==="touchend"?y.changedTouches:y.touches,C=X(m.getCanvasContainer(),S),L=C.map(($=>m.unproject($))),O=C.reduce((($,q,K,ae)=>$.add(q.div(ae.length))),new s.Point(0,0));super(u,{points:C,point:O,lngLats:L,lngLat:m.unproject(O),originalEvent:y}),this._defaultPrevented=!1}}class Xh extends s.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(u,m,y){super(u,{originalEvent:y}),this._defaultPrevented=!1}}class Im{constructor(u,m){this._map=u,this._clickTolerance=m.clickTolerance}reset(){this._mousedownPos=void 0}wheel(u){return this._firePreventable(new Xh(u.type,this._map,u))}mousedown(u,m){return this._mousedownPos=m,this._firePreventable(new Is(u.type,this._map,u))}mouseup(u){this._map.fire(new Is(u.type,this._map,u))}preclick(u){const m=s.extend({},u);m.type="preclick",this._map.fire(new Is(m.type,this._map,m))}click(u,m){this._mousedownPos&&this._mousedownPos.dist(m)>=this._clickTolerance||(this.preclick(u),this._map.fire(new Is(u.type,this._map,u)))}dblclick(u){return this._firePreventable(new Is(u.type,this._map,u))}mouseover(u){this._map.fire(new Is(u.type,this._map,u))}mouseout(u){this._map.fire(new Is(u.type,this._map,u))}touchstart(u){return this._firePreventable(new el(u.type,this._map,u))}touchmove(u){this._map.fire(new el(u.type,this._map,u))}touchend(u){this._map.fire(new el(u.type,this._map,u))}touchcancel(u){this._map.fire(new el(u.type,this._map,u))}_firePreventable(u){if(this._map.fire(u),u.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Yh{constructor(u){this._map=u}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(u){this._map.fire(new Is(u.type,this._map,u))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Is("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(u){this._delayContextMenu?this._contextMenuEvent=u:this._map.fire(new Is(u.type,this._map,u)),this._map.listens("contextmenu")&&u.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class wg{constructor(u,m){this._map=u,this._el=u.getCanvasContainer(),this._container=u.getContainer(),this._clickTolerance=m.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(u,m){this.isEnabled()&&u.shiftKey&&u.button===0&&(z(),this._startPos=this._lastPos=m,this._active=!0)}mousemoveWindow(u,m){if(!this._active)return;const y=m,S=this._startPos,C=this._lastPos;if(!S||!C||C.equals(y)||!this._box&&y.dist(S)<this._clickTolerance)return;this._lastPos=y,this._box||(this._box=k("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",u));const L=Math.min(S.x,y.x),O=Math.max(S.x,y.x),$=Math.min(S.y,y.y),q=Math.max(S.y,y.y);this._map._requestDomTask((()=>{this._box&&(this._box.style.transform=`translate(${L}px,${$}px)`,this._box.style.width=O-L+"px",this._box.style.height=q-$+"px")}))}mouseupWindow(u,m){if(!this._active)return;const y=this._startPos,S=m;if(y&&u.button===0){if(this.reset(),J(),y.x!==S.x||y.y!==S.y)return this._map.fire(new s.Event("boxzoomend",{originalEvent:u})),{cameraAnimation:C=>C.fitScreenCoordinates(y,S,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",u)}}keydown(u){this._active&&u.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",u))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),G(),delete this._startPos,delete this._lastPos}_fireEvent(u,m){return this._map.fire(new s.Event(u,{originalEvent:m}))}}function Yc(v,u){const m={};for(let y=0;y<v.length;y++)m[v[y].identifier]=u[y];return m}class xc{constructor(u){this.reset(),this.numTouches=u.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(u,m,y){(this.centroid||y.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===0&&(this.startTime=u.timeStamp),y.length===this.numTouches&&(this.centroid=(function(S){const C=new s.Point(0,0);for(const L of S)C._add(L);return C.div(S.length)})(m),this.touches=Yc(y,m)))}touchmove(u,m,y){if(this.aborted||!this.centroid)return;const S=Yc(y,m);for(const C in this.touches){const L=S[C];(!L||L.dist(this.touches[C])>30)&&(this.aborted=!0)}}touchend(u,m,y){if((!this.centroid||u.timeStamp-this.startTime>500)&&(this.aborted=!0),y.length===0){const S=!this.aborted&&this.centroid;if(this.reset(),S)return S}}}class Am{constructor(u){this.singleTap=new xc(u),this.numTaps=u.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(u,m,y){this.singleTap.touchstart(u,m,y)}touchmove(u,m,y){this.singleTap.touchmove(u,m,y)}touchend(u,m,y){const S=this.singleTap.touchend(u,m,y);if(S){const C=u.timeStamp-this.lastTime<500,L=!this.lastTap||this.lastTap.dist(S)<30;if(C&&L||this.reset(),this.count++,this.lastTime=u.timeStamp,this.lastTap=S,this.count===this.numTaps)return this.reset(),S}}}class Tg{constructor(){this._zoomIn=new Am({numTouches:1,numTaps:2}),this._zoomOut=new Am({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(u,m,y){this._zoomIn.touchstart(u,m,y),this._zoomOut.touchstart(u,m,y)}touchmove(u,m,y){this._zoomIn.touchmove(u,m,y),this._zoomOut.touchmove(u,m,y)}touchend(u,m,y){const S=this._zoomIn.touchend(u,m,y),C=this._zoomOut.touchend(u,m,y);return S?(this._active=!0,u.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:L=>L.easeTo({duration:300,zoom:L.getZoom()+1,around:L.unproject(S)},{originalEvent:u})}):C?(this._active=!0,u.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:L=>L.easeTo({duration:300,zoom:L.getZoom()-1,around:L.unproject(C)},{originalEvent:u})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const Sg={0:1,2:2};class tl{constructor(u){this.reset(),this._clickTolerance=u.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(u,m){return!1}_move(u,m){return{}}mousedown(u,m){if(this._lastPoint)return;const y=U(u);this._correctButton(u,y)&&(this._lastPoint=m,this._eventButton=y)}mousemoveWindow(u,m){const y=this._lastPoint;if(y){if(u.preventDefault(),this._eventButton!=null&&(function(S,C){const L=Sg[C];return S.buttons===void 0||(S.buttons&L)!==L})(u,this._eventButton))this.reset();else if(this._moved||!(m.dist(y)<this._clickTolerance))return this._moved=!0,this._lastPoint=m,this._move(y,m)}}mouseupWindow(u){this._lastPoint&&U(u)===this._eventButton&&(this._moved&&J(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Dd extends tl{mousedown(u,m){super.mousedown(u,m),this._lastPoint&&(this._active=!0)}_correctButton(u,m){return m===0&&!u.ctrlKey}_move(u,m){return{around:m,panDelta:m.sub(u)}}}class Zh extends tl{_correctButton(u,m){return m===0&&u.ctrlKey||m===2}_move(u,m){const y=.8*(m.x-u.x);if(y)return this._active=!0,{bearingDelta:y}}contextmenu(u){u.preventDefault()}}class Pm extends tl{_correctButton(u,m){return m===0&&u.ctrlKey||m===2}_move(u,m){const y=-.5*(m.y-u.y);if(y)return this._active=!0,{pitchDelta:y}}contextmenu(u){u.preventDefault()}}class Jh{constructor(u,m){this._map=u,this._el=u.getCanvasContainer(),this._minTouches=1,this._clickTolerance=m.clickTolerance||1,this.reset(),s.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new s.Point(0,0)}touchstart(u,m,y){return this._calculateTransform(u,m,y)}touchmove(u,m,y){if(this._active&&!(y.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(y.length===1&&!s.isFullscreen())return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return u.cancelable&&u.preventDefault(),this._calculateTransform(u,m,y)}}touchend(u,m,y){this._calculateTransform(u,m,y),this._active&&y.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(u,m,y){y.length>0&&(this._active=!0);const S=Yc(y,m),C=new s.Point(0,0),L=new s.Point(0,0);let O=0;for(const q in S){const K=S[q],ae=this._touches[q];ae&&(C._add(K),L._add(K.sub(ae)),O++,S[q]=K)}if(this._touches=S,O<this._minTouches||!L.mag())return;const $=L.div(O);return this._sum._add($),this._sum.mag()<this._clickTolerance?void 0:{around:C.div(O),panDelta:$}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=k("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout((()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","null")}),500)}}class Ld{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(u){}_move(u,m,y){return{}}touchstart(u,m,y){this._firstTwoTouches||y.length<2||(this._firstTwoTouches=[y[0].identifier,y[1].identifier],this._start([m[0],m[1]]))}touchmove(u,m,y){const S=this._firstTwoTouches;if(!S)return;u.preventDefault();const[C,L]=S,O=Hl(y,m,C),$=Hl(y,m,L);if(!O||!$)return;const q=this._aroundCenter?null:O.add($).div(2);return this._move([O,$],q,u)}touchend(u,m,y){if(!this._firstTwoTouches)return;const[S,C]=this._firstTwoTouches,L=Hl(y,m,S),O=Hl(y,m,C);L&&O||(this._active&&J(),this.reset())}touchcancel(){this.reset()}enable(u){this._enabled=!0,this._aroundCenter=!!u&&u.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Hl(v,u,m){for(let y=0;y<v.length;y++)if(v[y].identifier===m)return u[y]}function Gl(v,u){return Math.log(v/u)/Math.LN2}class Eg extends Ld{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(u){this._startDistance=this._distance=u[0].dist(u[1])}_move(u,m){const y=this._distance;if(this._distance=u[0].dist(u[1]),this._active||!(Math.abs(Gl(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Gl(this._distance,y),pinchAround:m}}}function Mm(v,u){return 180*v.angleWith(u)/Math.PI}class Cg extends Ld{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(u){this._startVector=this._vector=u[0].sub(u[1]),this._minDiameter=u[0].dist(u[1])}_move(u,m){const y=this._vector;if(this._vector=u[0].sub(u[1]),y&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:Mm(this._vector,y),pinchAround:m}}_isBelowThreshold(u){this._minDiameter=Math.min(this._minDiameter,u.mag());const m=25/(Math.PI*this._minDiameter)*360,y=this._startVector;if(!y)return!1;const S=Mm(u,y);return Math.abs(S)<m}}function wc(v){return Math.abs(v.y)>Math.abs(v.x)}class kg extends Ld{constructor(u){super(),this._map=u}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(u){this._lastPoints=u,wc(u[0].sub(u[1]))&&(this._valid=!1)}_move(u,m,y){const S=this._lastPoints;if(!S)return;const C=u[0].sub(S[0]),L=u[1].sub(S[1]);return this._map._cooperativeGestures&&!s.isFullscreen()&&y.touches.length<3||(this._valid=this.gestureBeginsVertically(C,L,y.timeStamp),!this._valid)?void 0:(this._lastPoints=u,this._active=!0,{pitchDelta:(C.y+L.y)/2*-.5})}gestureBeginsVertically(u,m,y){if(this._valid!==void 0)return this._valid;const S=u.mag()>=2,C=m.mag()>=2;if(!S&&!C)return;if(!S||!C)return this._firstMove==null&&(this._firstMove=y),y-this._firstMove<100&&void 0;const L=u.y>0==m.y>0;return wc(u)&&wc(m)&&L}}const Ig={panStep:100,bearingStep:15,pitchStep:10};class V_{constructor(){const u=Ig;this._panStep=u.panStep,this._bearingStep=u.bearingStep,this._pitchStep=u.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(u){if(u.altKey||u.ctrlKey||u.metaKey)return;let m=0,y=0,S=0,C=0,L=0;switch(u.keyCode){case 61:case 107:case 171:case 187:m=1;break;case 189:case 109:case 173:m=-1;break;case 37:u.shiftKey?y=-1:(u.preventDefault(),C=-1);break;case 39:u.shiftKey?y=1:(u.preventDefault(),C=1);break;case 38:u.shiftKey?S=1:(u.preventDefault(),L=-1);break;case 40:u.shiftKey?S=-1:(u.preventDefault(),L=1);break;default:return}return this._rotationDisabled&&(y=0,S=0),{cameraAnimation:O=>{const $=O.getZoom();O.easeTo({duration:300,easeId:"keyboardHandler",easing:Ag,zoom:m?Math.round($)+m*(u.shiftKey?2:1):$,bearing:O.getBearing()+y*this._bearingStep,pitch:O.getPitch()+S*this._pitchStep,offset:[-C*this._panStep,-L*this._panStep],center:O.getCenter()},{originalEvent:u})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Ag(v){return v*(2-v)}const Qh=4.000244140625;class Pg{constructor(u,m){this._map=u,this._el=u.getCanvasContainer(),this._handler=m,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,s.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(u){this._defaultZoomRate=u}setWheelZoomRate(u){this._wheelZoomRate=u}isEnabled(){return!!this._enabled}isActive(){return this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(u){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!u&&u.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(u){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(u.ctrlKey||u.metaKey||this.isZooming()||s.isFullscreen()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let m=u.deltaMode===s.window.WheelEvent.DOM_DELTA_LINE?40*u.deltaY:u.deltaY;const y=s.exported.now(),S=y-(this._lastWheelEventTime||0);this._lastWheelEventTime=y,m!==0&&m%Qh==0?this._type="wheel":m!==0&&Math.abs(m)<4?this._type="trackpad":S>400?(this._type=null,this._lastValue=m,this._timeout=setTimeout(this._onTimeout,40,u)):this._type||(this._type=Math.abs(S*m)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,m+=this._lastValue)),u.shiftKey&&m&&(m/=4),this._type&&(this._lastWheelEvent=u,this._delta-=m,this._active||this._start(u)),u.preventDefault()}_onTimeout(u){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(u)}_start(u){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const m=re(this._el,u);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:m,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const u=this._map.transform;this._type==="wheel"&&u.projection.wrap&&(u._center.lng>=180||u._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const m=()=>u._terrainEnabled()&&this._aroundCoord?u.computeZoomRelativeTo(this._aroundCoord):u.zoom;if(this._delta!==0){const $=this._type==="wheel"&&Math.abs(this._delta)>Qh?this._wheelZoomRate:this._defaultZoomRate;let q=2/(1+Math.exp(-Math.abs(this._delta*$)));this._delta<0&&q!==0&&(q=1/q);const K=m(),ae=Math.pow(2,K),pe=typeof this._targetZoom=="number"?u.zoomScale(this._targetZoom):ae;this._targetZoom=Math.min(u.maxZoom,Math.max(u.minZoom,u.scaleZoom(pe*q))),this._type==="wheel"&&(this._startZoom=K,this._easing=this._smoothOutEasing(200)),this._delta=0}const y=typeof this._targetZoom=="number"?this._targetZoom:m(),S=this._startZoom,C=this._easing;let L,O=!1;if(this._type==="wheel"&&S&&C){const $=Math.min((s.exported.now()-this._lastWheelEventTime)/200,1),q=C($);L=s.number(S,y,q),$<1?this._frameId||(this._frameId=!0):O=!0}else L=y,O=!0;return this._active=!0,O&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!O,zoomDelta:L-m(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(u){let m=s.ease;if(this._prevEase){const y=this._prevEase,S=(s.exported.now()-y.start)/y.duration,C=y.easing(S+.01)-y.easing(S),L=.27/Math.sqrt(C*C+1e-4)*.01,O=Math.sqrt(.0729-L*L);m=s.bezier(L,O,.25,1)}return this._prevEase={start:s.exported.now(),duration:u,easing:m},m}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=k("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(s.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout((()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","null")}),200)}}class Dm{constructor(u,m){this._clickZoom=u,this._tapZoom=m}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class As{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(u,m){return u.preventDefault(),{cameraAnimation:y=>{y.easeTo({duration:300,zoom:y.getZoom()+(u.shiftKey?-1:1),around:y.unproject(m)},{originalEvent:u})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Mg{constructor(){this._tap=new Am({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(u,m,y){this._swipePoint||(this._tapTime&&u.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?y.length>0&&(this._swipePoint=m[0],this._swipeTouch=y[0].identifier):this._tap.touchstart(u,m,y))}touchmove(u,m,y){if(this._tapTime){if(this._swipePoint){if(y[0].identifier!==this._swipeTouch)return;const S=m[0],C=S.y-this._swipePoint.y;return this._swipePoint=S,u.preventDefault(),this._active=!0,{zoomDelta:C/128}}}else this._tap.touchmove(u,m,y)}touchend(u,m,y){this._tapTime?this._swipePoint&&y.length===0&&this.reset():this._tap.touchend(u,m,y)&&(this._tapTime=u.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Tc{constructor(u,m,y){this._el=u,this._mousePan=m,this._touchPan=y}enable(u){this._inertiaOptions=u||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Dg{constructor(u,m,y){this._pitchWithRotate=u.pitchWithRotate,this._mouseRotate=m,this._mousePitch=y}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Lm{constructor(u,m,y,S){this._el=u,this._touchZoom=m,this._touchRotate=y,this._tapDragZoom=S,this._rotationDisabled=!1,this._enabled=!0}enable(u){this._touchZoom.enable(u),this._rotationDisabled||this._touchRotate.enable(u),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const ea=v=>v.zoom||v.drag||v.pitch||v.rotate;class ef extends s.Event{}class Lg{constructor(){this.constants=[1,1,.01],this.radius=0}setup(u,m){const y=s.sub([],m,u);this.radius=s.length(y[2]<0?s.div([],y,this.constants):[y[0],y[1],0])}projectRay(u){s.div(u,u,this.constants),s.normalize(u,u),s.mul$1(u,u,this.constants);const m=s.scale$2([],u,this.radius);if(m[2]>0){const y=s.scale$2([],[0,0,1],s.dot(m,[0,0,1])),S=s.scale$2([],s.normalize([],[m[0],m[1],0]),this.radius),C=s.add([],m,s.scale$2([],s.sub([],s.add([],S,y),m),2));m[0]=C[0],m[1]=C[1]}return m}}function ta(v){return v.panDelta&&v.panDelta.mag()||v.zoomDelta||v.bearingDelta||v.pitchDelta}class xl{constructor(u,m){this._map=u,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Kh(u),this._bearingSnap=m.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new Lg,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(m),s.bindAll(["handleEvent","handleWindowEvent"],this);const y=this._el;this._listeners=[[y,"touchstart",{passive:!0}],[y,"touchmove",{passive:!1}],[y,"touchend",void 0],[y,"touchcancel",void 0],[y,"mousedown",void 0],[y,"mousemove",void 0],[y,"mouseup",void 0],[s.window.document,"mousemove",{capture:!0}],[s.window.document,"mouseup",void 0],[y,"mouseover",void 0],[y,"mouseout",void 0],[y,"dblclick",void 0],[y,"click",void 0],[y,"keydown",{capture:!1}],[y,"keyup",void 0],[y,"wheel",{passive:!1}],[y,"contextmenu",void 0],[s.window,"blur",void 0]];for(const[S,C,L]of this._listeners)S.addEventListener(C,S===s.window.document?this.handleWindowEvent:this.handleEvent,L)}destroy(){for(const[u,m,y]of this._listeners)u.removeEventListener(m,u===s.window.document?this.handleWindowEvent:this.handleEvent,y)}_addDefaultHandlers(u){const m=this._map,y=m.getCanvasContainer();this._add("mapEvent",new Im(m,u));const S=m.boxZoom=new wg(m,u);this._add("boxZoom",S);const C=new Tg,L=new As;m.doubleClickZoom=new Dm(L,C),this._add("tapZoom",C),this._add("clickZoom",L);const O=new Mg;this._add("tapDragZoom",O);const $=m.touchPitch=new kg(m);this._add("touchPitch",$);const q=new Zh(u),K=new Pm(u);m.dragRotate=new Dg(u,q,K),this._add("mouseRotate",q,["mousePitch"]),this._add("mousePitch",K,["mouseRotate"]);const ae=new Dd(u),pe=new Jh(m,u);m.dragPan=new Tc(y,ae,pe),this._add("mousePan",ae),this._add("touchPan",pe,["touchZoom","touchRotate"]);const be=new Cg,Se=new Eg;m.touchZoomRotate=new Lm(y,Se,be,O),this._add("touchRotate",be,["touchPan","touchZoom"]),this._add("touchZoom",Se,["touchPan","touchRotate"]),this._add("blockableMapEvent",new Yh(m));const xe=m.scrollZoom=new Pg(m,this);this._add("scrollZoom",xe,["mousePan"]);const Ce=m.keyboard=new V_;this._add("keyboard",Ce);for(const le of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])u.interactive&&u[le]&&m[le].enable(u[le])}_add(u,m,y){this._handlers.push({handlerName:u,handler:m,allowed:y}),this._handlersById[u]=m}stop(u){if(!this._updatingCamera){for(const{handler:m}of this._handlers)m.reset();this._inertia.clear(),this._fireEvents({},{},u),this._changes=[]}}isActive(){for(const{handler:u}of this._handlers)if(u.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!ea(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(u,m,y){for(const S in u)if(S!==y&&(!m||m.indexOf(S)<0))return!0;return!1}handleWindowEvent(u){this.handleEvent(u,`${u.type}Window`)}_getMapTouches(u){const m=[];for(const y of u)this._el.contains(y.target)&&m.push(y);return m}handleEvent(u,m){this._updatingCamera=!0;const y=u.type==="renderFrame",S=y?void 0:u,C={needsRenderFrame:!1},L={},O={},$=u.touches?this._getMapTouches(u.touches):void 0,q=$?X(this._el,$):y?void 0:re(this._el,u);for(const{handlerName:pe,handler:be,allowed:Se}of this._handlers){if(!be.isEnabled())continue;let xe;this._blockedByActive(O,Se,pe)?be.reset():be[m||u.type]&&(xe=be[m||u.type](u,q,$),this.mergeHandlerResult(C,L,xe,pe,S),xe&&xe.needsRenderFrame&&this._triggerRenderFrame()),(xe||be.isActive())&&(O[pe]=be)}const K={};for(const pe in this._previousActiveHandlers)O[pe]||(K[pe]=S);this._previousActiveHandlers=O,(Object.keys(K).length||ta(C))&&(this._changes.push([C,L,K]),this._triggerRenderFrame()),(Object.keys(O).length||ta(C))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:ae}=C;ae&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ae(this._map))}mergeHandlerResult(u,m,y,S,C){if(!y)return;s.extend(u,y);const L={handlerName:S,originalEvent:y.originalEvent||C};y.zoomDelta!==void 0&&(m.zoom=L),y.panDelta!==void 0&&(m.drag=L),y.pitchDelta!==void 0&&(m.pitch=L),y.bearingDelta!==void 0&&(m.rotate=L)}_applyChanges(){const u={},m={},y={};for(const[S,C,L]of this._changes)S.panDelta&&(u.panDelta=(u.panDelta||new s.Point(0,0))._add(S.panDelta)),S.zoomDelta&&(u.zoomDelta=(u.zoomDelta||0)+S.zoomDelta),S.bearingDelta&&(u.bearingDelta=(u.bearingDelta||0)+S.bearingDelta),S.pitchDelta&&(u.pitchDelta=(u.pitchDelta||0)+S.pitchDelta),S.around!==void 0&&(u.around=S.around),S.aroundCoord!==void 0&&(u.aroundCoord=S.aroundCoord),S.pinchAround!==void 0&&(u.pinchAround=S.pinchAround),S.noInertia&&(u.noInertia=S.noInertia),s.extend(m,C),s.extend(y,L);this._updateMapTransform(u,m,y),this._changes=[]}_updateMapTransform(u,m,y){const S=this._map,C=S.transform,L=ye=>[ye.x,ye.y,ye.z];if((ye=>{const Pe=this._eventsInProgress.drag;return Pe&&!this._handlersById[Pe.handlerName].isActive()})()&&!ta(u)){const ye=C.zoom;C.cameraElevationReference="sea",C.recenterOnTerrain(),C.cameraElevationReference="ground",ye!==C.zoom&&this._map._update(!0)}if(C._isCameraConstrained&&S._stop(!0),!ta(u))return void this._fireEvents(m,y,!0);let{panDelta:O,zoomDelta:$,bearingDelta:q,pitchDelta:K,around:ae,aroundCoord:pe,pinchAround:be}=u;C._isCameraConstrained&&($>0&&($=0),C._isCameraConstrained=!1),be!==void 0&&(ae=be),($||(ye=>m[ye]&&!this._eventsInProgress[ye])("drag"))&&ae&&(this._dragOrigin=L(C.pointCoordinate3D(ae)),this._trackingEllipsoid.setup(C._camera.position,this._dragOrigin)),C.cameraElevationReference="sea",S._stop(!0),ae=ae||S.transform.centerPoint,q&&(C.bearing+=q),K&&(C.pitch+=K),C._updateCameraState();const Se=[0,0,0];if(O)if(C.projection.name==="mercator"){const ye=this._trackingEllipsoid.projectRay(C.screenPointToMercatorRay(ae).dir),Pe=this._trackingEllipsoid.projectRay(C.screenPointToMercatorRay(ae.sub(O)).dir);Se[0]=Pe[0]-ye[0],Se[1]=Pe[1]-ye[1]}else{const ye=C.pointCoordinate(ae);if(C.projection.name==="globe"){O=O.rotate(-C.angle);const Pe=C._pixelsPerMercatorPixel/C.worldSize;Se[0]=-O.x*s.mercatorScale(s.latFromMercatorY(ye.y))*Pe,Se[1]=-O.y*s.mercatorScale(C.center.lat)*Pe}else{const Pe=C.pointCoordinate(ae.sub(O));ye&&Pe&&(Se[0]=Pe.x-ye.x,Se[1]=Pe.y-ye.y)}}const xe=C.zoom,Ce=[0,0,0];if($){const ye=L(pe||C.pointCoordinate3D(ae)),Pe={dir:s.normalize([],s.sub([],ye,C._camera.position))};if(Pe.dir[2]<0){const Le=C.zoomDeltaToMovement(ye,$);s.scale$2(Ce,Pe.dir,Le)}}const le=s.add(Se,Se,Ce);C._translateCameraConstrained(le),$&&Math.abs(C.zoom-xe)>1e-4&&C.recenterOnTerrain(),C.cameraElevationReference="ground",this._map._update(),u.noInertia||this._inertia.record(u),this._fireEvents(m,y,!0)}_fireEvents(u,m,y){const S=ea(this._eventsInProgress),C=ea(u),L={};for(const K in u){const{originalEvent:ae}=u[K];this._eventsInProgress[K]||(L[`${K}start`]=ae),this._eventsInProgress[K]=u[K]}!S&&C&&this._fireEvent("movestart",C.originalEvent);for(const K in L)this._fireEvent(K,L[K]);C&&this._fireEvent("move",C.originalEvent);for(const K in u){const{originalEvent:ae}=u[K];this._fireEvent(K,ae)}const O={};let $;for(const K in this._eventsInProgress){const{handlerName:ae,originalEvent:pe}=this._eventsInProgress[K];this._handlersById[ae].isActive()||(delete this._eventsInProgress[K],$=m[ae]||pe,O[`${K}end`]=$)}for(const K in O)this._fireEvent(K,O[K]);const q=ea(this._eventsInProgress);if(y&&(S||C)&&!q){this._updatingCamera=!0;const K=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),ae=pe=>pe!==0&&-this._bearingSnap<pe&&pe<this._bearingSnap;K?(ae(K.bearing||this._map.getBearing())&&(K.bearing=0),this._map.easeTo(K,{originalEvent:$})):(this._map.fire(new s.Event("moveend",{originalEvent:$})),ae(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(u,m){this._map.fire(new s.Event(u,m?{originalEvent:m}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((u=>{this._frameId=void 0,this.handleEvent(new ef("renderFrame",{timeStamp:u})),this._applyChanges()}))}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const na="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class nl extends s.Evented{constructor(u,m){super(),this._moving=!1,this._zooming=!1,this.transform=u,this._bearingSnap=m.bearingSnap,this._respectPrefersReducedMotion=m.respectPrefersReducedMotion!==!1,s.bindAll(["_renderFrameCallback"],this)}getCenter(){return new s.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(u,m){return this.jumpTo({center:u},m)}panBy(u,m,y){return u=s.Point.convert(u).mult(-1),this.panTo(this.transform.center,s.extend({offset:u},m),y)}panTo(u,m,y){return this.easeTo(s.extend({center:u},m),y)}getZoom(){return this.transform.zoom}setZoom(u,m){return this.jumpTo({zoom:u},m),this}zoomTo(u,m,y){return this.easeTo(s.extend({zoom:u},m),y)}zoomIn(u,m){return this.zoomTo(this.getZoom()+1,u,m),this}zoomOut(u,m){return this.zoomTo(this.getZoom()-1,u,m),this}getBearing(){return this.transform.bearing}setBearing(u,m){return this.jumpTo({bearing:u},m),this}getPadding(){return this.transform.padding}setPadding(u,m){return this.jumpTo({padding:u},m),this}rotateTo(u,m,y){return this.easeTo(s.extend({bearing:u},m),y)}resetNorth(u,m){return this.rotateTo(0,s.extend({duration:1e3},u),m),this}resetNorthPitch(u,m){return this.easeTo(s.extend({bearing:0,pitch:0,duration:1e3},u),m),this}snapToNorth(u,m){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(u,m):this}getPitch(){return this.transform.pitch}setPitch(u,m){return this.jumpTo({pitch:u},m),this}cameraForBounds(u,m){u=s.LngLatBounds.convert(u);const y=m&&m.bearing||0,S=m&&m.pitch||0,C=u.getNorthWest(),L=u.getSouthEast();return this._cameraForBounds(this.transform,C,L,y,S,m)}_extendCameraOptions(u){const m={top:0,bottom:0,right:0,left:0};if(typeof(u=s.extend({padding:m,offset:[0,0],maxZoom:this.transform.maxZoom},u)).padding=="number"){const y=u.padding;u.padding={top:y,bottom:y,right:y,left:y}}return u.padding=s.extend(m,u.padding),u}_minimumAABBFrustumDistance(u,m){const y=m.max[0]-m.min[0],S=m.max[1]-m.min[1];return y/S>u.aspect?y/(2*Math.tan(.5*u.fovX)*u.aspect):S/(2*Math.tan(.5*u.fovY)*u.aspect)}_cameraForBoundsOnGlobe(u,m,y,S,C,L){const O=u.clone(),$=this._extendCameraOptions(L);O.bearing=S,O.pitch=C;const q=s.LngLat.convert(m),K=s.LngLat.convert(y),ae=.5*(q.lat+K.lat),pe=.5*(q.lng+K.lng),be=s.latLngToECEF(ae,pe),Se=s.normalize([],be),xe=s.normalize([],s.cross([],Se,[0,1,0])),Ce=s.cross([],xe,Se),le=[xe[0],xe[1],xe[2],0,Ce[0],Ce[1],Ce[2],0,Se[0],Se[1],Se[2],0,0,0,0,1],ye=[be,s.latLngToECEF(q.lat,q.lng),s.latLngToECEF(K.lat,q.lng),s.latLngToECEF(K.lat,K.lng),s.latLngToECEF(q.lat,K.lng),s.latLngToECEF(ae,q.lng),s.latLngToECEF(ae,K.lng),s.latLngToECEF(q.lat,pe),s.latLngToECEF(K.lat,pe)];let Pe=s.Aabb.fromPoints(ye.map((Nt=>[s.dot(xe,Nt),s.dot(Ce,Nt),s.dot(Se,Nt)])));const Le=s.transformMat4([],Pe.center,le);s.squaredLength(Le)===0&&s.set(Le,0,0,1),s.normalize(Le,Le),s.scale$2(Le,Le,s.GLOBE_RADIUS),O.center=s.ecefToLatLng(Le);const We=O.getWorldToCameraMatrix(),qe=s.invert(new Float64Array(16),We);Pe=s.Aabb.applyTransform(Pe,s.multiply([],We,le)),s.transformMat4(Le,Le,We);const Ye=.5*(Pe.max[2]-Pe.min[2]),ut=this._minimumAABBFrustumDistance(O,Pe),at=s.scale$2([],[0,0,1],Ye),gt=s.add(at,Le,at),qt=ut+(O.pitch===0?0:s.distance(Le,gt)),dt=O.globeCenterInViewSpace,Vt=s.sub([],Le,[dt[0],dt[1],dt[2]]);s.normalize(Vt,Vt),s.scale$2(Vt,Vt,qt);const xt=s.add([],Le,Vt);s.transformMat4(xt,xt,qe);const Zt=s.earthRadius/s.GLOBE_RADIUS,ft=s.length(xt),Et=s.mercatorZfromAltitude(Math.max(ft*Zt-s.earthRadius,Number.EPSILON),0),Ht=Math.min(O.zoomFromMercatorZAdjusted(Et),$.maxZoom);return Ht>.5*(s.GLOBE_ZOOM_THRESHOLD_MIN+s.GLOBE_ZOOM_THRESHOLD_MAX)?(O.setProjection({name:"mercator"}),O.zoom=Ht,this._cameraForBounds(O,m,y,S,C,L)):{center:O.center,zoom:Ht,bearing:S,pitch:C}}queryTerrainElevation(u,m){const y=this.transform.elevation;return y?(m=s.extend({},{exaggerated:!0},m),y.getAtPoint(s.MercatorCoordinate.fromLngLat(u),null,m.exaggerated)):null}_cameraForBounds(u,m,y,S,C,L){if(u.projection.name==="globe")return this._cameraForBoundsOnGlobe(u,m,y,S,C,L);const O=u.clone(),$=this._extendCameraOptions(L),q=O.padding;O.bearing=S,O.pitch=C;const K=s.LngLat.convert(m),ae=s.LngLat.convert(y),pe=new s.LngLat(K.lng,ae.lat),be=new s.LngLat(ae.lng,K.lat),Se=O.project(K),xe=O.project(ae),Ce=this.queryTerrainElevation(K),le=this.queryTerrainElevation(ae),ye=this.queryTerrainElevation(pe),Pe=this.queryTerrainElevation(be),Le=[[Se.x,Se.y,Math.min(Ce||0,le||0,ye||0,Pe||0)],[xe.x,xe.y,Math.max(Ce||0,le||0,ye||0,Pe||0)]];let We=s.Aabb.fromPoints(Le);const qe=O.getWorldToCameraMatrix(),Ye=s.invert(new Float64Array(16),qe);We=s.Aabb.applyTransform(We,qe);const ut=s.sub([],We.max,We.min),at=q.left||0,gt=q.right||0,qt=q.bottom||0,dt=q.top||0,{left:Vt,right:xt,top:Zt,bottom:ft}=$.padding,Et=.5*(at+gt),Ht=.5*(dt+qt),Nt=Math.min(O.scaleZoom(O.scale*Math.min((O.width-(at+gt+Vt+xt))/ut[0],(O.height-(qt+dt+ft+Zt))/ut[1])),$.maxZoom),Jt=O.scale/O.zoomScale(Nt);We=new s.Aabb([We.min[0]-(Vt+Et)*Jt,We.min[1]-(ft+Ht)*Jt,We.min[2]],[We.max[0]+(xt+Et)*Jt,We.max[1]+(Zt+Ht)*Jt,We.max[2]]);const Mn=.5*ut[2],Gn=this._minimumAABBFrustumDistance(O,We),En=[0,0,1,0];s.transformMat4$1(En,En,qe),s.normalize$2(En,En);const Rn=s.scale$2([],En,Gn+Mn),gi=s.add([],We.center,Rn),pi=(typeof $.offset.x=="number"&&typeof $.offset.y=="number"?new s.Point($.offset.x,$.offset.y):s.Point.convert($.offset)).rotate(-s.degToRad(S));We.center[0]-=pi.x*Jt,We.center[1]+=pi.y*Jt,s.transformMat4(We.center,We.center,Ye),s.transformMat4(gi,gi,Ye);const An=[We.center[0],We.center[1],gi[2]*O.pixelsPerMeter];s.scale$2(An,An,1/O.worldSize);const Oi=s.lngFromMercatorX(An[0]),Hi=s.latFromMercatorY(An[1]),Zi=Math.min(O._zoomFromMercatorZ(An[2]),$.maxZoom),Gi=new s.LngLat(Oi,Hi);return O.mercatorFromTransition&&Zi<.5*(s.GLOBE_ZOOM_THRESHOLD_MIN+s.GLOBE_ZOOM_THRESHOLD_MAX)?(O.setProjection({name:"globe"}),O.zoom=Zi,this._cameraForBounds(O,m,y,S,C,L)):{center:Gi,zoom:Zi,bearing:S,pitch:C}}fitBounds(u,m,y){const S=this.cameraForBounds(u,m);return this._fitInternal(S,m,y)}fitScreenCoordinates(u,m,y,S,C){const L=s.Point.convert(u),O=s.Point.convert(m),$=new s.Point(Math.min(L.x,O.x),Math.min(L.y,O.y)),q=new s.Point(Math.max(L.x,O.x),Math.max(L.y,O.y));if(this.transform.projection.name==="mercator"&&this.transform.anyCornerOffEdge(L,O))return this;const K=this.transform.pointLocation3D($),ae=this.transform.pointLocation3D(q),pe=this.transform.pointLocation3D(new s.Point($.x,q.y)),be=this.transform.pointLocation3D(new s.Point(q.x,$.y)),Se=[Math.min(K.lng,ae.lng,pe.lng,be.lng),Math.min(K.lat,ae.lat,pe.lat,be.lat)],xe=[Math.max(K.lng,ae.lng,pe.lng,be.lng),Math.max(K.lat,ae.lat,pe.lat,be.lat)],Ce=S&&S.pitch?S.pitch:this.getPitch(),le=this._cameraForBounds(this.transform,Se,xe,y,Ce,S);return this._fitInternal(le,S,C)}_fitInternal(u,m,y){return u?(delete(m=s.extend(u,m)).padding,m.linear?this.easeTo(m,y):this.flyTo(m,y)):this}jumpTo(u,m){this.stop();const y=u.preloadOnly?this.transform.clone():this.transform;let S=!1,C=!1,L=!1;return"zoom"in u&&y.zoom!==+u.zoom&&(S=!0,y.zoom=+u.zoom),u.center!==void 0&&(y.center=s.LngLat.convert(u.center)),"bearing"in u&&y.bearing!==+u.bearing&&(C=!0,y.bearing=+u.bearing),"pitch"in u&&y.pitch!==+u.pitch&&(L=!0,y.pitch=+u.pitch),u.padding==null||y.isPaddingEqual(u.padding)||(y.padding=u.padding),u.preloadOnly?(this._preloadTiles(y),this):(this.fire(new s.Event("movestart",m)).fire(new s.Event("move",m)),S&&this.fire(new s.Event("zoomstart",m)).fire(new s.Event("zoom",m)).fire(new s.Event("zoomend",m)),C&&this.fire(new s.Event("rotatestart",m)).fire(new s.Event("rotate",m)).fire(new s.Event("rotateend",m)),L&&this.fire(new s.Event("pitchstart",m)).fire(new s.Event("pitch",m)).fire(new s.Event("pitchend",m)),this.fire(new s.Event("moveend",m)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||s.warnOnce(na),this.transform.getFreeCameraOptions()}setFreeCameraOptions(u,m){const y=this.transform;if(!y.projection.supportsFreeCamera)return s.warnOnce(na),this;this.stop();const S=y.zoom,C=y.pitch,L=y.bearing;y.setFreeCameraOptions(u);const O=S!==y.zoom,$=C!==y.pitch,q=L!==y.bearing;return this.fire(new s.Event("movestart",m)).fire(new s.Event("move",m)),O&&this.fire(new s.Event("zoomstart",m)).fire(new s.Event("zoom",m)).fire(new s.Event("zoomend",m)),q&&this.fire(new s.Event("rotatestart",m)).fire(new s.Event("rotate",m)).fire(new s.Event("rotateend",m)),$&&this.fire(new s.Event("pitchstart",m)).fire(new s.Event("pitch",m)).fire(new s.Event("pitchend",m)),this.fire(new s.Event("moveend",m)),this}easeTo(u,m){this._stop(!1,u.easeId),((u=s.extend({offset:[0,0],duration:500,easing:s.ease},u)).animate===!1||this._prefersReducedMotion(u))&&(u.duration=0);const y=this.transform,S=this.getZoom(),C=this.getBearing(),L=this.getPitch(),O=this.getPadding(),$="zoom"in u?+u.zoom:S,q="bearing"in u?this._normalizeBearing(u.bearing,C):C,K="pitch"in u?+u.pitch:L,ae="padding"in u?u.padding:y.padding,pe=s.Point.convert(u.offset);let be,Se,xe;if(y.projection.name==="globe"){const at=s.MercatorCoordinate.fromLngLat(y.center),gt=pe.rotate(-y.angle);at.x+=gt.x/y.worldSize,at.y+=gt.y/y.worldSize;const qt=at.toLngLat(),dt=s.LngLat.convert(u.center||qt);this._normalizeCenter(dt),be=y.centerPoint.add(gt),Se=new s.Point(at.x,at.y).mult(y.worldSize),xe=new s.Point(s.mercatorXfromLng(dt.lng),s.mercatorYfromLat(dt.lat)).mult(y.worldSize).sub(Se)}else{be=y.centerPoint.add(pe);const at=y.pointLocation(be),gt=s.LngLat.convert(u.center||at);this._normalizeCenter(gt),Se=y.project(at),xe=y.project(gt).sub(Se)}const Ce=y.zoomScale($-S);let le,ye;u.around&&(le=s.LngLat.convert(u.around),ye=y.locationPoint(le));const Pe=this._zooming||$!==S,Le=this._rotating||C!==q,We=this._pitching||K!==L,qe=!y.isPaddingEqual(ae),Ye=at=>gt=>{if(Pe&&(at.zoom=s.number(S,$,gt)),Le&&(at.bearing=s.number(C,q,gt)),We&&(at.pitch=s.number(L,K,gt)),qe&&(at.interpolatePadding(O,ae,gt),be=at.centerPoint.add(pe)),le)at.setLocationAtPoint(le,ye);else{const qt=at.zoomScale(at.zoom-S),dt=$>S?Math.min(2,Ce):Math.max(.5,Ce),Vt=Math.pow(dt,1-gt),xt=at.unproject(Se.add(xe.mult(gt*Vt)).mult(qt));at.setLocationAtPoint(at.renderWorldCopies?xt.wrap():xt,be)}return u.preloadOnly||this._fireMoveEvents(m),at};if(u.preloadOnly){const at=this._emulate(Ye,u.duration,y);return this._preloadTiles(at),this}const ut={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=Pe,this._rotating=Le,this._pitching=We,this._padding=qe,this._easeId=u.easeId,this._prepareEase(m,u.noMoveStart,ut),this._ease(Ye(y),(at=>{y.recenterOnTerrain(),this._afterEase(m,at)}),u),this}_prepareEase(u,m,y={}){this._moving=!0,this.transform.cameraElevationReference="sea",m||y.moving||this.fire(new s.Event("movestart",u)),this._zooming&&!y.zooming&&this.fire(new s.Event("zoomstart",u)),this._rotating&&!y.rotating&&this.fire(new s.Event("rotatestart",u)),this._pitching&&!y.pitching&&this.fire(new s.Event("pitchstart",u))}_fireMoveEvents(u){this.fire(new s.Event("move",u)),this._zooming&&this.fire(new s.Event("zoom",u)),this._rotating&&this.fire(new s.Event("rotate",u)),this._pitching&&this.fire(new s.Event("pitch",u))}_afterEase(u,m){if(this._easeId&&m&&this._easeId===m)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const y=this._zooming,S=this._rotating,C=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,y&&this.fire(new s.Event("zoomend",u)),S&&this.fire(new s.Event("rotateend",u)),C&&this.fire(new s.Event("pitchend",u)),this.fire(new s.Event("moveend",u))}flyTo(u,m){if(this._prefersReducedMotion(u)){const Nt=s.pick(u,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Nt,m)}this.stop(),u=s.extend({offset:[0,0],speed:1.2,curve:1.42,easing:s.ease},u);const y=this.transform,S=this.getZoom(),C=this.getBearing(),L=this.getPitch(),O=this.getPadding(),$="zoom"in u?s.clamp(+u.zoom,y.minZoom,y.maxZoom):S,q="bearing"in u?this._normalizeBearing(u.bearing,C):C,K="pitch"in u?+u.pitch:L,ae="padding"in u?u.padding:y.padding,pe=y.zoomScale($-S),be=s.Point.convert(u.offset);let Se=y.centerPoint.add(be);const xe=y.pointLocation(Se),Ce=s.LngLat.convert(u.center||xe);this._normalizeCenter(Ce);const le=y.project(xe),ye=y.project(Ce).sub(le);let Pe=u.curve;const Le=Math.max(y.width,y.height),We=Le/pe,qe=ye.mag();if("minZoom"in u){const Nt=s.clamp(Math.min(u.minZoom,S,$),y.minZoom,y.maxZoom),Jt=Le/y.zoomScale(Nt-S);Pe=Math.sqrt(Jt/qe*2)}const Ye=Pe*Pe;function ut(Nt){const Jt=(We*We-Le*Le+(Nt?-1:1)*Ye*Ye*qe*qe)/(2*(Nt?We:Le)*Ye*qe);return Math.log(Math.sqrt(Jt*Jt+1)-Jt)}function at(Nt){return(Math.exp(Nt)-Math.exp(-Nt))/2}function gt(Nt){return(Math.exp(Nt)+Math.exp(-Nt))/2}const qt=ut(0);let dt=function(Nt){return gt(qt)/gt(qt+Pe*Nt)},Vt=function(Nt){return Le*((gt(qt)*(at(Jt=qt+Pe*Nt)/gt(Jt))-at(qt))/Ye)/qe;var Jt},xt=(ut(1)-qt)/Pe;if(Math.abs(qe)<1e-6||!isFinite(xt)){if(Math.abs(Le-We)<1e-6)return this.easeTo(u,m);const Nt=We<Le?-1:1;xt=Math.abs(Math.log(We/Le))/Pe,Vt=function(){return 0},dt=function(Jt){return Math.exp(Nt*Pe*Jt)}}u.duration="duration"in u?+u.duration:1e3*xt/("screenSpeed"in u?+u.screenSpeed/Pe:+u.speed),u.maxDuration&&u.duration>u.maxDuration&&(u.duration=0);const Zt=C!==q,ft=K!==L,Et=!y.isPaddingEqual(ae),Ht=Nt=>Jt=>{const Mn=Jt*xt,Gn=1/dt(Mn);Nt.zoom=Jt===1?$:S+Nt.scaleZoom(Gn),Zt&&(Nt.bearing=s.number(C,q,Jt)),ft&&(Nt.pitch=s.number(L,K,Jt)),Et&&(Nt.interpolatePadding(O,ae,Jt),Se=Nt.centerPoint.add(be));const En=Jt===1?Ce:Nt.unproject(le.add(ye.mult(Vt(Mn))).mult(Gn));return Nt.setLocationAtPoint(Nt.renderWorldCopies?En.wrap():En,Se),Nt._updateCameraOnTerrain(),u.preloadOnly||this._fireMoveEvents(m),Nt};if(u.preloadOnly){const Nt=this._emulate(Ht,u.duration,y);return this._preloadTiles(Nt),this}return this._zooming=!0,this._rotating=Zt,this._pitching=ft,this._padding=Et,this._prepareEase(m,!1),this._ease(Ht(y),(()=>this._afterEase(m)),u),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(u,m){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const y=this._onEaseEnd;this._onEaseEnd=void 0,y.call(this,m)}if(!u){const y=this.handlers;y&&y.stop(!1)}return this}_ease(u,m,y){y.animate===!1||y.duration===0?(u(1),m()):(this._easeStart=s.exported.now(),this._easeOptions=y,this._onEaseFrame=u,this._onEaseEnd=m,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const u=Math.min((s.exported.now()-this._easeStart)/this._easeOptions.duration,1),m=this._onEaseFrame;m&&m(this._easeOptions.easing(u)),u<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(u,m){u=s.wrap(u,-180,180);const y=Math.abs(u-m);return Math.abs(u-360-m)<y&&(u-=360),Math.abs(u+360-m)<y&&(u+=360),u}_normalizeCenter(u){const m=this.transform;if(!m.renderWorldCopies||m.maxBounds)return;const y=u.lng-m.center.lng;u.lng+=y>180?-360:y<-180?360:0}_prefersReducedMotion(u){return this._respectPrefersReducedMotion&&s.exported.prefersReducedMotion&&!(u&&u.essential)}_emulate(u,m,y){const S=Math.ceil(15*m/1e3),C=[],L=u(y.clone());for(let O=0;O<=S;O++){const $=L(O/S);C.push($.clone())}return C}}class Sn{constructor(u={}){this.options=u,s.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(u){const m=this.options&&this.options.compact;return this._map=u,this._container=k("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=k("button","mapboxgl-ctrl-attrib-button",this._container),k("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=k("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),m&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),m===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(u,m){const y=this._map._getUIString(`AttributionControl.${m}`);u.setAttribute("aria-label",y),u.removeAttribute("title"),u.firstElementChild&&u.firstElementChild.setAttribute("title",y)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let u=this._editLink;u||(u=this._editLink=this._container.querySelector(".mapbox-improve-map"));const m=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||s.config.ACCESS_TOKEN}];if(u){const y=m.reduce(((S,C,L)=>(C.value&&(S+=`${C.key}=${C.value}${L<m.length-1?"&":""}`),S)),"?");u.href=`${s.config.FEEDBACK_URL}/${y}#${bc(this._map,!0)}`,u.rel="noopener nofollow",this._setElementTitle(u,"MapFeedback")}}_updateData(u){!u||u.sourceDataType!=="metadata"&&u.sourceDataType!=="visibility"&&u.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let u=[];if(this._map.style.stylesheet){const S=this._map.style.stylesheet;this.styleOwner=S.owner,this.styleId=S.id}const m=this._map.style._sourceCaches;for(const S in m){const C=m[S];if(C.used){const L=C.getSource();L.attribution&&u.indexOf(L.attribution)<0&&u.push(L.attribution)}}u.sort(((S,C)=>S.length-C.length)),u=u.filter(((S,C)=>{for(let L=C+1;L<u.length;L++)if(u[L].indexOf(S)>=0)return!1;return!0})),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?u=[...this.options.customAttribution,...u]:u.unshift(this.options.customAttribution));const y=u.join(" | ");y!==this._attribHTML&&(this._attribHTML=y,u.length?(this._innerContainer.innerHTML=y,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class Rm{constructor(){s.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(u){this._map=u,this._container=k("div","mapboxgl-ctrl");const m=k("a","mapboxgl-ctrl-logo");return m.target="_blank",m.rel="noopener nofollow",m.href="https://www.mapbox.com/",m.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),m.setAttribute("rel","noopener nofollow"),this._container.appendChild(m),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(u){u&&u.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const u=this._map.style._sourceCaches;if(Object.entries(u).length===0)return!0;for(const m in u){const y=u[m].getSource();if(y.hasOwnProperty("mapbox_logo")&&!y.mapbox_logo)return!1}return!0}_updateCompact(){const u=this._container.children;if(u.length){const m=u[0];this._map.getCanvasContainer().offsetWidth<250?m.classList.add("mapboxgl-compact"):m.classList.remove("mapboxgl-compact")}}}class Om{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(u){const m=++this._id;return this._queue.push({callback:u,id:m,cancelled:!1}),m}remove(u){const m=this._currentlyRunning,y=m?this._queue.concat(m):this._queue;for(const S of y)if(S.id===u)return void(S.cancelled=!0)}run(u=0){const m=this._currentlyRunning=this._queue;this._queue=[];for(const y of m)if(!y.cancelled&&(y.callback(u),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function Pu(v,u,m){if(v=new s.LngLat(v.lng,v.lat),u){const y=new s.LngLat(v.lng-360,v.lat),S=new s.LngLat(v.lng+360,v.lat),C=360*Math.ceil(Math.abs(v.lng-m.center.lng)/360),L=m.locationPoint(v).distSqr(u),O=u.x<0||u.y<0||u.x>m.width||u.y>m.height;m.locationPoint(y).distSqr(u)<L&&(O||Math.abs(y.lng-m.center.lng)<C)?v=y:m.locationPoint(S).distSqr(u)<L&&(O||Math.abs(S.lng-m.center.lng)<C)&&(v=S)}for(;Math.abs(v.lng-m.center.lng)>180;){const y=m.locationPoint(v);if(y.x>=0&&y.y>=0&&y.x<=m.width&&y.y<=m.height)break;v.lng>m.center.lng?v.lng-=360:v.lng+=360}return v}const Zc={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class yn extends s.Evented{constructor(u,m){if(super(),(u instanceof s.window.HTMLElement||m)&&(u=s.extend({element:u},m)),s.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=u&&u.anchor||"center",this._color=u&&u.color||"#3FB1CE",this._scale=u&&u.scale||1,this._draggable=u&&u.draggable||!1,this._clickTolerance=u&&u.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=u&&u.rotation||0,this._rotationAlignment=u&&u.rotationAlignment||"auto",this._pitchAlignment=u&&u.pitchAlignment&&u.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=u&&u.occludedOpacity||.2,u&&u.element)this._element=u.element,this._offset=s.Point.convert(u&&u.offset||[0,0]);else{this._defaultMarker=!0,this._element=k("div");const S=41,C=27,L=A("svg",{display:"block",height:S*this._scale+"px",width:C*this._scale+"px",viewBox:`0 0 ${C} ${S}`},this._element),O=A("radialGradient",{id:"shadowGradient"},A("defs",{},L));A("stop",{offset:"10%","stop-opacity":.4},O),A("stop",{offset:"100%","stop-opacity":.05},O),A("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},L),A("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},L),A("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},L),A("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},L),this._offset=s.Point.convert(u&&u.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",(S=>{S.preventDefault()})),this._element.addEventListener("mousedown",(S=>{S.preventDefault()}));const y=this._element.classList;for(const S in Zc)y.remove(`mapboxgl-marker-anchor-${S}`);y.add(`mapboxgl-marker-anchor-${this._anchor}`),this._popup=null}addTo(u){return u===this._map||(this.remove(),this._map=u,u.getCanvasContainer().appendChild(this._element),u.on("move",this._updateMoving),u.on("moveend",this._update),u.on("remove",this._clearFadeTimer),u._addMarker(this),this.setDraggable(this._draggable),this._update(),u.on("click",this._onMapClick)),this}remove(){const u=this._map;return u&&(u.off("click",this._onMapClick),u.off("move",this._updateMoving),u.off("moveend",this._update),u.off("mousedown",this._addDragHandler),u.off("touchstart",this._addDragHandler),u.off("mouseup",this._onUp),u.off("touchend",this._onUp),u.off("mousemove",this._onMove),u.off("touchmove",this._onMove),u.off("remove",this._clearFadeTimer),u._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(u){return this._lngLat=s.LngLat.convert(u),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(u){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),u){if(!("offset"in u.options)){const S=Math.sqrt(Math.pow(13.5,2)/2);u.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[S,-1*(38.1-13.5+S)],"bottom-right":[-S,-1*(38.1-13.5+S)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=u,u._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(u){const m=u.code,y=u.charCode||u.keyCode;m!=="Space"&&m!=="Enter"&&y!==32&&y!==13||this.togglePopup()}_onMapClick(u){const m=u.originalEvent.target,y=this._element;this._popup&&(m===y||y.contains(m))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const u=this._popup;return u?(u.isOpen()?(u.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(u.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const u=this._map,m=this._pos;if(!u||!m)return!1;const y=u.unproject(m),S=u.getFreeCameraOptions();if(!S.position)return!1;const C=S.position.toLngLat();return C.distanceTo(y)<.9*C.distanceTo(this._lngLat)}_evaluateOpacity(){const u=this._map;if(!u)return;const m=this._pos;if(!m||m.x<0||m.x>u.transform.width||m.y<0||m.y>u.transform.height)return void this._clearFadeTimer();const y=u.unproject(m);let S;u._showingGlobe()&&s.isLngLatBehindGlobe(u.transform,this._lngLat)?S=0:(S=1-u._queryFogOpacity(y),u.transform._terrainEnabled()&&u.getTerrain()&&this._behindTerrain()&&(S*=this._occludedOpacity)),this._element.style.opacity=`${S}`,this._element.style.pointerEvents=S>0?"auto":"none",this._popup&&this._popup._setOpacity(S),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const u=this._pos;if(!u||!this._map)return;const m=this._offset.mult(this._scale);this._element.style.transform=`
            translate(${u.x}px,${u.y}px)
            ${Zc[this._anchor]}
            ${this._calculateXYTransform()} ${this._calculateZTransform()}
            translate(${m.x}px,${m.y}px)
        `}_calculateXYTransform(){const u=this._pos,m=this._map,y=this.getPitchAlignment();if(!m||!u||y!=="map")return"";if(!m._showingGlobe()){const $=m.getPitch();return $?`rotateX(${$}deg)`:""}const S=s.radToDeg(s.globeTiltAtLngLat(m.transform,this._lngLat)),C=u.sub(s.globeCenterToScreenPoint(m.transform)),L=Math.abs(C.x)+Math.abs(C.y);if(L===0)return"";const O=S/L;return`rotateX(${-C.y*O}deg) rotateY(${C.x*O}deg)`}_calculateZTransform(){const u=this._pos,m=this._map;if(!m||!u)return"";let y=0;const S=this.getRotationAlignment();if(S==="map")if(m._showingGlobe()){const C=m.project(new s.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),L=m.project(new s.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(C);y=s.radToDeg(Math.atan2(L.y,L.x))-90}else y=-m.getBearing();else if(S==="horizon"){const C=s.smoothstep(4,6,m.getZoom()),L=s.globeCenterToScreenPoint(m.transform);L.y+=C*m.transform.height;const O=u.sub(L),$=s.radToDeg(Math.atan2(O.y,O.x));y=($>90?$-270:$+90)*(1-C)}return y+=this._rotation,y?`rotateZ(${y}deg)`:""}_update(u){s.window.cancelAnimationFrame(this._updateFrameId);const m=this._map;m&&(m.transform.renderWorldCopies&&(this._lngLat=Pu(this._lngLat,this._pos,m.transform)),this._pos=m.project(this._lngLat),u===!0?this._updateFrameId=s.window.requestAnimationFrame((()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())})):this._pos=this._pos.round(),m._requestDomTask((()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(m._showingGlobe()||m.getTerrain()||m.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))})))}getOffset(){return this._offset}setOffset(u){return this._offset=s.Point.convert(u),this._update(),this}_onMove(u){const m=this._map;if(!m)return;const y=this._pointerdownPos,S=this._positionDelta;if(y&&S){if(!this._isDragging){const C=this._clickTolerance||m._clickTolerance;if(u.point.dist(y)<C)return;this._isDragging=!0}this._pos=u.point.sub(S),this._lngLat=m.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new s.Event("dragstart"))),this.fire(new s.Event("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const u=this._map;u&&(u.off("mousemove",this._onMove),u.off("touchmove",this._onMove)),this._state==="active"&&this.fire(new s.Event("dragend")),this._state="inactive"}_addDragHandler(u){const m=this._map,y=this._pos;m&&y&&this._element.contains(u.originalEvent.target)&&(u.preventDefault(),this._positionDelta=u.point.sub(y),this._pointerdownPos=u.point,this._state="pending",m.on("mousemove",this._onMove),m.on("touchmove",this._onMove),m.once("mouseup",this._onUp),m.once("touchend",this._onUp))}setDraggable(u){this._draggable=!!u;const m=this._map;return m&&(u?(m.on("mousedown",this._addDragHandler),m.on("touchstart",this._addDragHandler)):(m.off("mousedown",this._addDragHandler),m.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(u){return this._rotation=u||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(u){return this._rotationAlignment=u||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment==="auto"||this._rotationAlignment==="horizon"&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(u){return this._pitchAlignment=u||"auto",this._update(),this}getPitchAlignment(){return this._pitchAlignment==="auto"?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(u){return this._occludedOpacity=u||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const Vm={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},B_=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Bm(v=new s.Point(0,0),u="bottom"){if(typeof v=="number"){const m=Math.round(Math.sqrt(.5*Math.pow(v,2)));switch(u){case"top":return new s.Point(0,v);case"top-left":return new s.Point(m,m);case"top-right":return new s.Point(-m,m);case"bottom":return new s.Point(0,-v);case"bottom-left":return new s.Point(m,-m);case"bottom-right":return new s.Point(-m,-m);case"left":return new s.Point(v,0);case"right":return new s.Point(-v,0)}return new s.Point(0,0)}return v instanceof s.Point||Array.isArray(v)?s.Point.convert(v):s.Point.convert(v[u]||[0,0])}class Mu{constructor(u){this.jumpTo(u)}getValue(u){if(u<=this._startTime)return this._start;if(u>=this._endTime)return this._end;const m=s.easeCubicInOut((u-this._startTime)/(this._endTime-this._startTime));return this._start*(1-m)+this._end*m}isEasing(u){return u>=this._startTime&&u<=this._endTime}jumpTo(u){this._startTime=-1/0,this._endTime=-1/0,this._start=u,this._end=u}easeTo(u,m,y){this._start=this.getValue(m),this._end=u,this._startTime=m,this._endTime=m+y}}const Rd={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use  + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},Rg={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0},F_={showCompass:!0,showZoom:!0,visualizePitch:!1};class Od{constructor(u,m,y=!1){this._clickTolerance=10,this.element=m,this.mouseRotate=new Zh({clickTolerance:u.dragRotate._mouseRotate._clickTolerance}),this.map=u,y&&(this.mousePitch=new Pm({clickTolerance:u.dragRotate._mousePitch._clickTolerance})),s.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),m.addEventListener("mousedown",this.mousedown),m.addEventListener("touchstart",this.touchstart,{passive:!1}),m.addEventListener("touchmove",this.touchmove),m.addEventListener("touchend",this.touchend),m.addEventListener("touchcancel",this.reset)}down(u,m){this.mouseRotate.mousedown(u,m),this.mousePitch&&this.mousePitch.mousedown(u,m),z()}move(u,m){const y=this.map,S=this.mouseRotate.mousemoveWindow(u,m),C=S&&S.bearingDelta;if(C&&y.setBearing(y.getBearing()+C),this.mousePitch){const L=this.mousePitch.mousemoveWindow(u,m),O=L&&L.pitchDelta;O&&y.setPitch(y.getPitch()+O)}}off(){const u=this.element;u.removeEventListener("mousedown",this.mousedown),u.removeEventListener("touchstart",this.touchstart,{passive:!1}),u.removeEventListener("touchmove",this.touchmove),u.removeEventListener("touchend",this.touchend),u.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){G(),s.window.removeEventListener("mousemove",this.mousemove),s.window.removeEventListener("mouseup",this.mouseup)}mousedown(u){this.down(s.extend({},u,{ctrlKey:!0,preventDefault:()=>u.preventDefault()}),re(this.element,u)),s.window.addEventListener("mousemove",this.mousemove),s.window.addEventListener("mouseup",this.mouseup)}mousemove(u){this.move(u,re(this.element,u))}mouseup(u){this.mouseRotate.mouseupWindow(u),this.mousePitch&&this.mousePitch.mouseupWindow(u),this.offTemp()}touchstart(u){u.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=X(this.element,u.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>u.preventDefault()},this._startPos))}touchmove(u){u.targetTouches.length!==1?this.reset():(this._lastPos=X(this.element,u.targetTouches)[0],this.move({preventDefault:()=>u.preventDefault()},this._lastPos))}touchend(u){u.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const ve={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},B={maxWidth:100,unit:"metric"},se={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"},Ae={version:s.version,supported:_,setRTLTextPlugin:s.setRTLTextPlugin,getRTLTextPluginStatus:s.getRTLTextPluginStatus,Map:class extends nl{constructor(v){if(s.LivePerformanceUtils.mark(s.PerformanceMarkers.create),(v=s.extend({},Rg,v)).minZoom!=null&&v.maxZoom!=null&&v.minZoom>v.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(v.minPitch!=null&&v.maxPitch!=null&&v.minPitch>v.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(v.minPitch!=null&&v.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(v.maxPitch!=null&&v.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(v.antialias&&s.isSafariWithAntialiasingBug(s.window)&&(v.antialias=!1,s.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new Iu(v.minZoom,v.maxZoom,v.minPitch,v.maxPitch,v.renderWorldCopies),v),this._interactive=v.interactive,this._minTileCacheSize=v.minTileCacheSize,this._maxTileCacheSize=v.maxTileCacheSize,this._failIfMajorPerformanceCaveat=v.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=v.preserveDrawingBuffer,this._antialias=v.antialias,this._useWebGL2=v.useWebGL2,this._trackResize=v.trackResize,this._bearingSnap=v.bearingSnap,this._refreshExpiredTiles=v.refreshExpiredTiles,this._fadeDuration=v.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=v.crossSourceCollisions,this._collectResourceTiming=v.collectResourceTiming,this._optimizeForTerrain=v.optimizeForTerrain,this._language=this._parseLanguage(v.language),this._worldview=v.worldview,this._renderTaskQueue=new Om,this._domRenderTaskQueue=new Om,this._controls=[],this._markers=[],this._popups=[],this._mapId=s.uniqueId(),this._locale=s.extend({},Rd,v.locale),this._clickTolerance=v.clickTolerance,this._cooperativeGestures=v.cooperativeGestures,this._performanceMetricsCollection=v.performanceMetricsCollection,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new Mu(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._requestManager=new s.RequestManager(v.transformRequest,v.accessToken,v.testMode),this._silenceAuthErrors=!!v.testMode,typeof v.container=="string"){if(this._container=s.window.document.getElementById(v.container),!this._container)throw new Error(`Container '${v.container}' not found.`)}else{if(!(v.container instanceof s.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=v.container}if(this._container.childNodes.length>0&&s.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),v.maxBounds&&this.setMaxBounds(v.maxBounds),s.bindAll(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),s.window!==void 0&&(s.window.addEventListener("online",this._onWindowOnline,!1),s.window.addEventListener("resize",this._onWindowResize,!1),s.window.addEventListener("orientationchange",this._onWindowResize,!1),s.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1),s.window.addEventListener("visibilitychange",this._onVisibilityChange,!1)),this.handlers=new xl(this,v),this._localFontFamily=v.localFontFamily,this._localIdeographFontFamily=v.localIdeographFontFamily,v.style&&this.setStyle(v.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),v.projection&&this.setProjection(v.projection),this._hash=v.hash&&new Cd(typeof v.hash=="string"&&v.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:v.center,zoom:v.zoom,bearing:v.bearing,pitch:v.pitch}),v.bounds&&(this.resize(),this.fitBounds(v.bounds,s.extend({},v.fitBoundsOptions,{duration:0})))),this.resize(),v.attributionControl&&this.addControl(new Sn({customAttribution:v.customAttribution})),this._logoControl=new Rm,this.addControl(this._logoControl,v.logoPosition),this.on("style.load",(()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)})),this.on("data",(u=>{this._update(u.dataType==="style"),this.fire(new s.Event(`${u.dataType}data`,u))})),this.on("dataloading",(u=>{this.fire(new s.Event(`${u.dataType}dataloading`,u))}))}_getMapId(){return this._mapId}addControl(v,u){if(u===void 0&&(u=v.getDefaultPosition?v.getDefaultPosition():"top-right"),!v||!v.onAdd)return this.fire(new s.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const m=v.onAdd(this);this._controls.push(v);const y=this._controlPositions[u];return u.indexOf("bottom")!==-1?y.insertBefore(m,y.firstChild):y.appendChild(m),this}removeControl(v){if(!v||!v.onRemove)return this.fire(new s.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const u=this._controls.indexOf(v);return u>-1&&this._controls.splice(u,1),v.onRemove(this),this}hasControl(v){return this._controls.indexOf(v)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(v){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const u=!this._moving;return u&&this.fire(new s.Event("movestart",v)).fire(new s.Event("move",v)),this.fire(new s.Event("resize",v)),u&&this.fire(new s.Event("moveend",v)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(v){return this.transform.setMaxBounds(s.LngLatBounds.convert(v)),this._update()}setMinZoom(v){if((v=v??-2)>=-2&&v<=this.transform.maxZoom)return this.transform.minZoom=v,this._update(),this.getZoom()<v?this.setZoom(v):this.fire(new s.Event("zoomstart")).fire(new s.Event("zoom")).fire(new s.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(v){if((v=v??22)>=this.transform.minZoom)return this.transform.maxZoom=v,this._update(),this.getZoom()>v?this.setZoom(v):this.fire(new s.Event("zoomstart")).fire(new s.Event("zoom")).fire(new s.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(v){if((v=v??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(v>=0&&v<=this.transform.maxPitch)return this.transform.minPitch=v,this._update(),this.getPitch()<v?this.setPitch(v):this.fire(new s.Event("pitchstart")).fire(new s.Event("pitch")).fire(new s.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(v){if((v=v??85)>85)throw new Error("maxPitch must be less than or equal to 85");if(v>=this.transform.minPitch)return this.transform.maxPitch=v,this._update(),this.getPitch()>v?this.setPitch(v):this.fire(new s.Event("pitchstart")).fire(new s.Event("pitch")).fire(new s.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(v){return this.transform.renderWorldCopies=v,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(v){return v==="auto"?s.window.navigator.language:Array.isArray(v)?v.length===0?void 0:v.map((u=>u==="auto"?s.window.navigator.language:u)):v}setLanguage(v){const u=this._parseLanguage(v);if(!this.style||u===this._language)return this;this._language=u,this.style._reloadSources();for(const m of this._controls)m._setLanguage&&m._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(v){return this.style&&v!==this._worldview?(this._worldview=v,this.style._reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return this.transform.projection.name==="globe"}setProjection(v){return this._lazyInitEmptyStyle(),v?typeof v=="string"&&(v={name:v}):v=null,this._useExplicitProjection=!!v,this._prioritizeAndUpdateProjection(v,this.style.stylesheet?this.style.stylesheet.projection:null)}_updateProjectionTransition(){if(this.getProjection().name!=="globe")return;const v=this.transform,u=v.projection.name;let m;u==="globe"&&v.zoom>=s.GLOBE_ZOOM_THRESHOLD_MAX?(v.setMercatorFromTransition(),m=!0):u==="mercator"&&v.zoom<s.GLOBE_ZOOM_THRESHOLD_MAX&&(v.setProjection({name:"globe"}),m=!0),m&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(v,u){return this._updateProjection(v||u||{name:"mercator"})}_updateProjection(v){let u;if(u=v.name==="globe"&&this.transform.zoom>=s.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(v),this.style.applyProjectionUpdate(),u){this.painter.clearBackgroundTiles();for(const m in this.style._sourceCaches)this.style._sourceCaches[m].clearTiles();this._update(!0),this._forceMarkerAndPopupUpdate(!0)}return this}project(v){return this.transform.locationPoint3D(s.LngLat.convert(v))}unproject(v){return this.transform.pointLocation3D(s.Point.convert(v))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(v,u,m){if(v==="mouseenter"||v==="mouseover"){let y=!1;const S=L=>{const O=u.filter((q=>this.getLayer(q))),$=O.length?this.queryRenderedFeatures(L.point,{layers:O}):[];$.length?y||(y=!0,m.call(this,new Is(v,this,L.originalEvent,{features:$}))):y=!1},C=()=>{y=!1};return{layers:new Set(u),listener:m,delegates:{mousemove:S,mouseout:C}}}if(v==="mouseleave"||v==="mouseout"){let y=!1;const S=L=>{const O=u.filter(($=>this.getLayer($)));(O.length?this.queryRenderedFeatures(L.point,{layers:O}):[]).length?y=!0:y&&(y=!1,m.call(this,new Is(v,this,L.originalEvent)))},C=L=>{y&&(y=!1,m.call(this,new Is(v,this,L.originalEvent)))};return{layers:new Set(u),listener:m,delegates:{mousemove:S,mouseout:C}}}{const y=S=>{const C=u.filter((O=>this.getLayer(O))),L=C.length?this.queryRenderedFeatures(S.point,{layers:C}):[];L.length&&(S.features=L,m.call(this,S),delete S.features)};return{layers:new Set(u),listener:m,delegates:{[v]:y}}}}on(v,u,m){if(m===void 0)return super.on(v,u);Array.isArray(u)||(u=[u]);const y=this._createDelegatedListener(v,u,m);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[v]=this._delegatedListeners[v]||[],this._delegatedListeners[v].push(y);for(const S in y.delegates)this.on(S,y.delegates[S]);return this}once(v,u,m){if(m===void 0)return super.once(v,u);Array.isArray(u)||(u=[u]);const y=this._createDelegatedListener(v,u,m);for(const S in y.delegates)this.once(S,y.delegates[S]);return this}off(v,u,m){if(m===void 0)return super.off(v,u);u=new Set(Array.isArray(u)?u:[u]);const y=(C,L)=>{if(C.size!==L.size)return!1;for(const O of C)if(!L.has(O))return!1;return!0},S=this._delegatedListeners?this._delegatedListeners[v]:void 0;return S&&(C=>{for(let L=0;L<C.length;L++){const O=C[L];if(O.listener===m&&y(O.layers,u)){for(const $ in O.delegates)this.off($,O.delegates[$]);return C.splice(L,1),this}}})(S),this}queryRenderedFeatures(v,u){return this.style?(u!==void 0||v===void 0||v instanceof s.Point||Array.isArray(v)||(u=v,v=void 0),this.style.queryRenderedFeatures(v=v||[[0,0],[this.transform.width,this.transform.height]],u=u||{},this.transform)):[]}querySourceFeatures(v,u){return this.style.querySourceFeatures(v,u)}isPointOnSurface(v){const{name:u}=this.transform.projection;return u!=="globe"&&u!=="mercator"&&s.warnOnce(`${u} projection does not support isPointOnSurface, this API may behave unexpectedly.`),this.transform.isPointOnSurface(s.Point.convert(v))}setStyle(v,u){return(u=s.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},u)).diff!==!1&&u.localIdeographFontFamily===this._localIdeographFontFamily&&u.localFontFamily===this._localFontFamily&&this.style&&v?(this._diffStyle(v,u),this):(this._localIdeographFontFamily=u.localIdeographFontFamily,this._localFontFamily=u.localFontFamily,this._updateStyle(v,u))}_getUIString(v){const u=this._locale[v];if(u==null)throw new Error(`Missing UI string '${v}'`);return u}_updateStyle(v,u){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),v&&(this.style=new Mo(this,u||{}),this.style.setEventedParent(this,{style:this.style}),typeof v=="string"?this.style.loadURL(v):this.style.loadJSON(v)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new Mo(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(v,u){if(typeof v=="string"){const m=this._requestManager.normalizeStyleURL(v),y=this._requestManager.transformRequest(m,s.ResourceType.Style);s.getJSON(y,((S,C)=>{S?this.fire(new s.ErrorEvent(S)):C&&this._updateDiff(C,u)}))}else typeof v=="object"&&this._updateDiff(v,u)}_updateDiff(v,u){try{this.style.setState(v)&&this._update(!0)}catch(m){s.warnOnce(`Unable to perform style diff: ${m.message||m.error||m}.  Rebuilding the style from scratch.`),this._updateStyle(v,u)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(s.warnOnce("There is no style added to the map."),!1)}addSource(v,u){return this._lazyInitEmptyStyle(),this.style.addSource(v,u),this._update(!0)}isSourceLoaded(v){return!!this.style&&this.style._isSourceCacheLoaded(v)}areTilesLoaded(){const v=this.style&&this.style._sourceCaches;for(const u in v){const m=v[u]._tiles;for(const y in m){const S=m[y];if(S.state!=="loaded"&&S.state!=="errored")return!1}}return!0}addSourceType(v,u,m){this._lazyInitEmptyStyle(),this.style.addSourceType(v,u,m)}removeSource(v){return this.style.removeSource(v),this._updateTerrain(),this._update(!0)}getSource(v){return this.style.getSource(v)}addImage(v,u,{pixelRatio:m=1,sdf:y=!1,stretchX:S,stretchY:C,content:L}={}){if(this._lazyInitEmptyStyle(),u instanceof s.window.HTMLImageElement||s.window.ImageBitmap&&u instanceof s.window.ImageBitmap){const{width:O,height:$,data:q}=s.exported.getImageData(u);this.style.addImage(v,{data:new s.RGBAImage({width:O,height:$},q),pixelRatio:m,stretchX:S,stretchY:C,content:L,sdf:y,version:0})}else if(u.width===void 0||u.height===void 0)this.fire(new s.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:O,height:$}=u,q=u;this.style.addImage(v,{data:new s.RGBAImage({width:O,height:$},new Uint8Array(q.data)),pixelRatio:m,stretchX:S,stretchY:C,content:L,sdf:y,version:0,userImage:q}),q.onAdd&&q.onAdd(this,v)}}updateImage(v,u){const m=this.style.getImage(v);if(!m)return void this.fire(new s.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const y=u instanceof s.window.HTMLImageElement||s.window.ImageBitmap&&u instanceof s.window.ImageBitmap?s.exported.getImageData(u):u,{width:S,height:C}=y;S!==void 0&&C!==void 0?S===m.data.width&&C===m.data.height?(m.data.replace(y.data,!(u instanceof s.window.HTMLImageElement||s.window.ImageBitmap&&u instanceof s.window.ImageBitmap)),this.style.updateImage(v,m)):this.fire(new s.ErrorEvent(new Error(`The width and height of the updated image (${S}, ${C})
                must be that same as the previous version of the image
                (${m.data.width}, ${m.data.height})`))):this.fire(new s.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(v){return v?!!this.style.getImage(v):(this.fire(new s.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(v){this.style.removeImage(v)}loadImage(v,u){s.getImage(this._requestManager.transformRequest(v,s.ResourceType.Image),((m,y)=>{u(m,y instanceof s.window.HTMLImageElement?s.exported.getImageData(y):y)}))}listImages(){return this.style.listImages()}addLayer(v,u){return this._lazyInitEmptyStyle(),this.style.addLayer(v,u),this._update(!0)}moveLayer(v,u){return this.style.moveLayer(v,u),this._update(!0)}removeLayer(v){return this.style.removeLayer(v),this._update(!0)}getLayer(v){return this.style.getLayer(v)}setLayerZoomRange(v,u,m){return this.style.setLayerZoomRange(v,u,m),this._update(!0)}setFilter(v,u,m={}){return this.style.setFilter(v,u,m),this._update(!0)}getFilter(v){return this.style.getFilter(v)}setPaintProperty(v,u,m,y={}){return this.style.setPaintProperty(v,u,m,y),this._update(!0)}getPaintProperty(v,u){return this.style.getPaintProperty(v,u)}setLayoutProperty(v,u,m,y={}){return this.style.setLayoutProperty(v,u,m,y),this._update(!0)}getLayoutProperty(v,u){return this.style.getLayoutProperty(v,u)}setLight(v,u={}){return this._lazyInitEmptyStyle(),this.style.setLight(v,u),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(v){return this._lazyInitEmptyStyle(),!v&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(v),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(v){return this._lazyInitEmptyStyle(),this.style.setFog(v),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(v){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(s.LngLat.convert(v),this.transform):0}setFeatureState(v,u){return this.style.setFeatureState(v,u),this._update()}removeFeatureState(v,u){return this.style.removeFeatureState(v,u),this._update()}getFeatureState(v){return this.style.getFeatureState(v)}_updateContainerDimensions(){if(!this._container)return;const v=this._container.getBoundingClientRect().width||400,u=this._container.getBoundingClientRect().height||300;let m,y,S,C=this._container;for(;C&&(!y||!S);){const L=s.window.getComputedStyle(C).transform;L&&L!=="none"&&(m=L.match(/matrix.*\((.+)\)/)[1].split(", "),m[0]&&m[0]!=="0"&&m[0]!=="1"&&(y=m[0]),m[3]&&m[3]!=="0"&&m[3]!=="1"&&(S=m[3])),C=C.parentElement}this._containerWidth=y?Math.abs(v/y):v,this._containerHeight=S?Math.abs(u/S):u}_detectMissingCSS(){s.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&s.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const v=this._container;v.classList.add("mapboxgl-map"),(this._missingCSSCanary=k("div","mapboxgl-canary",v)).style.visibility="hidden",this._detectMissingCSS();const u=this._canvasContainer=k("div","mapboxgl-canvas-container",v);this._interactive&&u.classList.add("mapboxgl-interactive"),this._canvas=k("canvas","mapboxgl-canvas",u),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const m=this._controlContainer=k("div","mapboxgl-control-container",v),y=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((S=>{y[S]=k("div",`mapboxgl-ctrl-${S}`,m)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(v,u){const m=s.exported.devicePixelRatio||1;this._canvas.width=m*Math.ceil(v),this._canvas.height=m*Math.ceil(u),this._canvas.style.width=`${v}px`,this._canvas.style.height=`${u}px`}_addMarker(v){this._markers.push(v)}_removeMarker(v){const u=this._markers.indexOf(v);u!==-1&&this._markers.splice(u,1)}_addPopup(v){this._popups.push(v)}_removePopup(v){const u=this._popups.indexOf(v);u!==-1&&this._popups.splice(u,1)}_setupPainter(){const v=s.extend({},_.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),u=this._useWebGL2&&this._canvas.getContext("webgl2",v),m=u||this._canvas.getContext("webgl",v)||this._canvas.getContext("experimental-webgl",v);m?(this._useWebGL2&&!u&&s.warnOnce("Failed to create WebGL 2 context. Using WebGL 1."),s.storeAuthState(m,!0),this.painter=new Cu(m,this.transform,!!u),this.on("data",(y=>{y.dataType==="source"&&this.painter.setTileLoadedFlag(!0)})),s.exported$1.testSupport(m)):this.fire(new s.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(v){v.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new s.Event("webglcontextlost",{originalEvent:v}))}_contextRestored(v){this._setupPainter(),this.resize(),this._update(),this.fire(new s.Event("webglcontextrestored",{originalEvent:v}))}_onMapScroll(v){if(v.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(v){return this.style?(this._styleDirty=this._styleDirty||v,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(v){return this._update(),this._renderTaskQueue.add(v)}_cancelRenderFrame(v){this._renderTaskQueue.remove(v)}_requestDomTask(v){!this.loaded()||this.loaded()&&!this.isMoving()?v():this._domRenderTaskQueue.add(v)}_render(v){let u;const m=this.painter.context.extTimerQuery,y=s.exported.now();if(this.listens("gpu-timing-frame")&&(u=m.createQueryEXT(),m.beginQueryEXT(m.TIME_ELAPSED_EXT,u)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],s.window.performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],s.window.performance.now())),this._renderTaskQueue.run(v),this._domRenderTaskQueue.run(v),this._removed)return;this._updateProjectionTransition();const S=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const O=this.transform.zoom,$=this.transform.pitch,q=s.exported.now(),K=new s.EvaluationParameters(O,{now:q,fadeDuration:S,pitch:$,transition:this.style.getTransition()});this.style.update(K)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let C=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),C=this._updateAverageElevation(y),this.style._updateSources(this.transform),this._forceMarkerAndPopupUpdate()):C=this._updateAverageElevation(y),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,S,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:S,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new s.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new s.Event("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),u){const O=s.exported.now()-y;m.endQueryEXT(m.TIME_ELAPSED_EXT,u),setTimeout((()=>{const $=m.getQueryObjectEXT(u,m.QUERY_RESULT_EXT)/1e6;m.deleteQueryEXT(u),this.fire(new s.Event("gpu-timing-frame",{cpuTime:O,gpuTime:$})),s.window.performance.mark("frame-gpu",{startTime:y,detail:{gpuTime:$}})}),50)}if(this.listens("gpu-timing-layer")){const O=this.painter.collectGpuTimers();setTimeout((()=>{const $=this.painter.queryGpuTimers(O);this.fire(new s.Event("gpu-timing-layer",{layerTimes:$}))}),50)}if(this.listens("gpu-timing-deferred-render")){const O=this.painter.collectDeferredRenderGpuQueries();setTimeout((()=>{const $=this.painter.queryGpuTimeDeferredRender(O);this.fire(new s.Event("gpu-timing-deferred-render",{gpuTime:$}))}),50)}const L=this._sourcesDirty||this._styleDirty||this._placementDirty||C;if(L||this._repaint)this.triggerRepaint();else{const O=!this.isMoving()&&this.loaded();if(O&&(C=this._updateAverageElevation(y,!0)),C)this.triggerRepaint();else if(this._triggerFrame(!1),O&&(this.fire(new s.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const $=this._calculateSpeedIndex();this.fire(new s.Event("speedindexcompleted",{speedIndex:$})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||L||(this._fullyLoaded=!0,s.LivePerformanceUtils.mark(s.PerformanceMarkers.fullLoad),this._performanceMetricsCollection&&s.postPerformanceEvent(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(v){for(const u of this._markers)v&&!this.getRenderWorldCopies()&&(u._lngLat=u._lngLat.wrap()),u._update();for(const u of this._popups)!v||this.getRenderWorldCopies()||u._trackPointer||(u._lngLat=u._lngLat.wrap()),u._update()}_updateAverageElevation(v,u=!1){const m=y=>(this.transform.averageElevation=y,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&m(0);if((u||v-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(v)){const y=this.transform.averageElevation;let S=this.transform.sampleAverageElevation(),C=!1;this.transform.elevation&&(C=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(S)?S=0:this._averageElevationLastSampledAt=v;const L=Math.abs(y-S);if(L>1){if(this._isInitialLoad||C)return this._averageElevation.jumpTo(S),m(S);this._averageElevation.easeTo(S,v,300)}else if(L>1e-4)return this._averageElevation.jumpTo(S),m(S)}return!!this._averageElevation.isEasing(v)&&m(this._averageElevation.getValue(v))}_authenticate(){s.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,(v=>{if(v&&(v.message===s.AUTH_ERR_MSG||v.status===401)){const u=this.painter.context.gl;s.storeAuthState(u,!1),this._logoControl instanceof Rm&&this._logoControl._updateLogo(),u&&u.clear(u.DEPTH_BUFFER_BIT|u.COLOR_BUFFER_BIT|u.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new s.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}})),s.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,(()=>{}))}_updateTerrain(){const v=this._isDragging();this.painter.updateTerrain(this.style,v)}_calculateSpeedIndex(){const v=this.painter.canvasCopy(),u=this.painter.getCanvasCopiesAndTimestamps();u.timeStamps.push(performance.now());const m=this.painter.context.gl,y=m.createFramebuffer();function S(C){m.framebufferTexture2D(m.FRAMEBUFFER,m.COLOR_ATTACHMENT0,m.TEXTURE_2D,C,0);const L=new Uint8Array(m.drawingBufferWidth*m.drawingBufferHeight*4);return m.readPixels(0,0,m.drawingBufferWidth,m.drawingBufferHeight,m.RGBA,m.UNSIGNED_BYTE,L),L}return m.bindFramebuffer(m.FRAMEBUFFER,y),this._canvasPixelComparison(S(v),u.canvasCopies.map(S),u.timeStamps)}_canvasPixelComparison(v,u,m){let y=m[1]-m[0];const S=v.length/4;for(let C=0;C<u.length;C++){const L=u[C];let O=0;for(let $=0;$<L.length;$+=4)L[$]===v[$]&&L[$+1]===v[$+1]&&L[$+2]===v[$+2]&&L[$+3]===v[$+3]&&(O+=1);y+=(m[C+2]-m[C+1])*(1-O/S)}return y}remove(){this._hash&&this._hash.remove();for(const u of this._controls)u.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),s.window!==void 0&&(s.window.removeEventListener("resize",this._onWindowResize,!1),s.window.removeEventListener("orientationchange",this._onWindowResize,!1),s.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),s.window.removeEventListener("online",this._onWindowOnline,!1),s.window.removeEventListener("visibilitychange",this._onVisibilityChange,!1));const v=this.painter.context.gl.getExtension("WEBGL_lose_context");v&&v.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),s.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new s.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(v){this._renderNextFrame=this._renderNextFrame||v,this.style&&!this._frame&&(this._frame=s.exported.frame((u=>{const m=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,m&&this._render(u)})))}_preloadTiles(v){const u=this.style?Object.values(this.style._sourceCaches):[];return s.asyncAll(u,((m,y)=>m._preloadTiles(v,y)),(()=>{this.triggerRepaint()})),this}_onWindowOnline(){this._update()}_onWindowResize(v){this._trackResize&&this.resize({originalEvent:v})._update()}_onVisibilityChange(){s.window.document.visibilityState==="hidden"&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(v){this._showTileBoundaries!==v&&(this._showTileBoundaries=v,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(v){this._showTerrainWireframe!==v&&(this._showTerrainWireframe=v,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(v){this._speedIndexTiming!==v&&(this._speedIndexTiming=v,this._update())}get showPadding(){return!!this._showPadding}set showPadding(v){this._showPadding!==v&&(this._showPadding=v,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(v){this._showCollisionBoxes!==v&&(this._showCollisionBoxes=v,v?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(v){this._showOverdrawInspector!==v&&(this._showOverdrawInspector=v,this._update())}get repaint(){return!!this._repaint}set repaint(v){this._repaint!==v&&(this._repaint=v,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(v){this._vertices=v,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(v){this._showTileAABBs!==v&&(this._showTileAABBs=v,v&&this._update())}_setCacheLimits(v,u){s.setCacheLimits(v,u)}get version(){return s.version}},NavigationControl:class{constructor(v){this.options=s.extend({},F_,v),this._container=k("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",(u=>u.preventDefault())),this.options.showZoom&&(s.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",(u=>{this._map&&this._map.zoomIn({},{originalEvent:u})})),k("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",(u=>{this._map&&this._map.zoomOut({},{originalEvent:u})})),k("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(s.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",(u=>{const m=this._map;m&&(this.options.visualizePitch?m.resetNorthPitch({},{originalEvent:u}):m.resetNorth({},{originalEvent:u}))})),this._compassIcon=k("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const v=this._map;if(!v)return;const u=v.getZoom(),m=u===v.getMaxZoom(),y=u===v.getMinZoom();this._zoomInButton.disabled=m,this._zoomOutButton.disabled=y,this._zoomInButton.setAttribute("aria-disabled",m.toString()),this._zoomOutButton.setAttribute("aria-disabled",y.toString())}_rotateCompassArrow(){const v=this._map;if(!v)return;const u=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(v.transform.pitch*(Math.PI/180)),.5)}) rotateX(${v.transform.pitch}deg) rotateZ(${v.transform.angle*(180/Math.PI)}deg)`:`rotate(${v.transform.angle*(180/Math.PI)}deg)`;v._requestDomTask((()=>{this._compassIcon&&(this._compassIcon.style.transform=u)}))}onAdd(v){return this._map=v,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),v.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&v.on("pitch",this._rotateCompassArrow),v.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Od(v,this._compass,this.options.visualizePitch)),this._container}onRemove(){const v=this._map;v&&(this._container.remove(),this.options.showZoom&&v.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&v.off("pitch",this._rotateCompassArrow),v.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(v,u){const m=k("button",v,this._container);return m.type="button",m.addEventListener("click",u),m}_setButtonTitle(v,u){if(!this._map)return;const m=this._map._getUIString(`NavigationControl.${u}`);v.setAttribute("aria-label",m),v.firstElementChild&&v.firstElementChild.setAttribute("title",m)}},GeolocateControl:class extends s.Evented{constructor(v){super(),this.options=s.extend({geolocation:s.window.navigator.geolocation},ve,v),s.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=Au(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(v){return this._map=v,this._container=k("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(v){const u=(m=!!this.options.geolocation)=>{this._supportsGeolocation=m,v(m)};this._supportsGeolocation!==void 0?v(this._supportsGeolocation):s.window.navigator.permissions!==void 0?s.window.navigator.permissions.query({name:"geolocation"}).then((m=>u(m.state!=="denied"))).catch((()=>u())):u()}_isOutOfMapMaxBounds(v){const u=this._map.getMaxBounds(),m=v.coords;return!!u&&(m.longitude<u.getWest()||m.longitude>u.getEast()||m.latitude<u.getSouth()||m.latitude>u.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(v){if(this._map){if(this._isOutOfMapMaxBounds(v))return this._setErrorState(),this.fire(new s.Event("outofmaxbounds",v)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=v,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(v),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(v),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new s.Event("geolocate",v)),this._finish()}}_updateCamera(v){const u=new s.LngLat(v.coords.longitude,v.coords.latitude),m=v.coords.accuracy,y=this._map.getBearing(),S=s.extend({bearing:y},this.options.fitBoundsOptions);this._map.fitBounds(u.toBounds(m),S,{geolocateSource:!0})}_updateMarker(v){if(v){const u=new s.LngLat(v.coords.longitude,v.coords.latitude);this._accuracyCircleMarker.setLngLat(u).addTo(this._map),this._userLocationDotMarker.setLngLat(u).addTo(this._map),this._accuracy=v.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const v=this._map.transform,u=s.mercatorZfromAltitude(1,v._center.lat)*v.worldSize,m=Math.ceil(2*this._accuracy*u);this._circleElement.style.width=`${m}px`,this._circleElement.style.height=`${m}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(v){if(this._map){if(this.options.trackUserLocation)if(v.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",u),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",u),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(v.code===3&&this._noTimeout)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new s.Event("error",v)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(v){if(this._map!==void 0){if(this._container.addEventListener("contextmenu",(u=>u.preventDefault())),this._geolocateButton=k("button","mapboxgl-ctrl-geolocate",this._container),k("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",v===!1){s.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",u),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",u)}else{const u=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",u),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",u)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=k("div","mapboxgl-user-location"),this._dotElement.appendChild(k("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(k("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new yn({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=k("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new yn({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(u=>{u.geolocateSource||this._watchState!=="ACTIVE_LOCK"||u.originalEvent&&u.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new s.Event("trackuserlocationend")))}))}}_onDeviceOrientation(v){this._userLocationDotMarker&&(v.webkitCompassHeading?this._heading=v.webkitCompassHeading:v.absolute===!0&&(this._heading=-1*v.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return s.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new s.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new s.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new s.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let v;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(v={maximumAge:6e5,timeout:0},this._noTimeout=!0):(v=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,v),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const v=()=>{s.window.addEventListener("ondeviceorientationabsolute"in s.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};s.window.DeviceMotionEvent!==void 0&&typeof s.window.DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then((u=>{u==="granted"&&v()})).catch(console.error):v()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),s.window.removeEventListener("deviceorientation",this._onDeviceOrientation),s.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Sn,ScaleControl:class{constructor(v){this.options=s.extend({},B,v),this._isNumberFormatSupported=(function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch{return!1}})(),s.bindAll(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const v=this.options.maxWidth||100,u=this._map,m=u._containerHeight/2,y=u._containerWidth/2-v/2,S=u.unproject([y,m]),C=u.unproject([y+v,m]),L=S.distanceTo(C);if(this.options.unit==="imperial"){const O=3.2808*L;O>5280?this._setScale(v,O/5280,"mile"):this._setScale(v,O,"foot")}else this.options.unit==="nautical"?this._setScale(v,L/1852,"nautical-mile"):L>=1e3?this._setScale(v,L/1e3,"kilometer"):this._setScale(v,L,"meter")}_setScale(v,u,m){this._map._requestDomTask((()=>{const y=(function(C){const L=Math.pow(10,`${Math.floor(C)}`.length-1);let O=C/L;return O=O>=10?10:O>=5?5:O>=3?3:O>=2?2:O>=1?1:(function($){const q=Math.pow(10,Math.ceil(-Math.log($)/Math.LN10));return Math.round($*q)/q})(O),L*O})(u),S=y/u;this._container.innerHTML=this._isNumberFormatSupported&&m!=="nautical-mile"?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:m}).format(y):`${y}&nbsp;${se[m]}`,this._container.style.width=v*S+"px"}))}onAdd(v){return this._map=v,this._language=v.getLanguage(),this._container=k("div","mapboxgl-ctrl mapboxgl-ctrl-scale",v.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(v){this._language=v,this._update()}setUnit(v){this.options.unit=v,this._update()}},FullscreenControl:class{constructor(v){this._fullscreen=!1,v&&v.container&&(v.container instanceof s.window.HTMLElement?this._container=v.container:s.warnOnce("Full screen control 'container' must be a DOM element.")),s.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in s.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in s.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(v){return this._map=v,this._container||(this._container=this._map.getContainer()),this._controlContainer=k("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",s.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,s.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!s.window.document.fullscreenEnabled&&!s.window.document.webkitFullscreenEnabled)}_setupUI(){const v=this._fullscreenButton=k("button","mapboxgl-ctrl-fullscreen",this._controlContainer);k("span","mapboxgl-ctrl-icon",v).setAttribute("aria-hidden","true"),v.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),s.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const v=this._getTitle();this._fullscreenButton.setAttribute("aria-label",v),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",v)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(s.window.document.fullscreenElement||s.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?s.window.document.exitFullscreen?s.window.document.exitFullscreen():s.window.document.webkitCancelFullScreen&&s.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends s.Evented{constructor(v){super(),this.options=s.extend(Object.create(Vm),v),s.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(v&&v.className?v.className.trim().split(/\s+/):[])}addTo(v){return this._map&&this.remove(),this._map=v,this.options.closeOnClick&&v.on("preclick",this._onClose),this.options.closeOnMove&&v.on("move",this._onClose),v.on("remove",this.remove),this._update(),v._addPopup(this),this._focusFirstElement(),this._trackPointer?(v.on("mousemove",this._onMouseEvent),v.on("mouseup",this._onMouseEvent),v._canvasContainer.classList.add("mapboxgl-track-pointer")):v.on("move",this._update),this.fire(new s.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const v=this._map;return v&&(v.off("move",this._update),v.off("move",this._onClose),v.off("preclick",this._onClose),v.off("click",this._onClose),v.off("remove",this.remove),v.off("mousemove",this._onMouseEvent),v.off("mouseup",this._onMouseEvent),v.off("drag",this._onMouseEvent),v._canvasContainer&&v._canvasContainer.classList.remove("mapboxgl-track-pointer"),v._removePopup(this),this._map=void 0),this.fire(new s.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(v){this._lngLat=s.LngLat.convert(v),this._pos=null,this._trackPointer=!1,this._update();const u=this._map;return u&&(u.on("move",this._update),u.off("mousemove",this._onMouseEvent),u._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const v=this._map;return v&&(v.off("move",this._update),v.on("mousemove",this._onMouseEvent),v.on("drag",this._onMouseEvent),v._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(v){return this.setDOMContent(s.window.document.createTextNode(v))}setHTML(v){const u=s.window.document.createDocumentFragment(),m=s.window.document.createElement("body");let y;for(m.innerHTML=v;y=m.firstChild,y;)u.appendChild(y);return this.setDOMContent(u)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(v){return this.options.maxWidth=v,this._update(),this}setDOMContent(v){let u=this._content;if(u)for(;u.hasChildNodes();)u.firstChild&&u.removeChild(u.firstChild);else u=this._content=k("div","mapboxgl-popup-content",this._container||void 0);if(u.appendChild(v),this.options.closeButton){const m=this._closeButton=k("button","mapboxgl-popup-close-button",u);m.type="button",m.setAttribute("aria-label","Close popup"),m.setAttribute("aria-hidden","true"),m.innerHTML="&#215;",m.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(v){return this._classList.add(v),this._updateClassList(),this}removeClassName(v){return this._classList.delete(v),this._updateClassList(),this}setOffset(v){return this.options.offset=v,this._update(),this}toggleClassName(v){let u;return this._classList.delete(v)?u=!1:(this._classList.add(v),u=!0),this._updateClassList(),u}_onMouseEvent(v){this._update(v.point)}_getAnchor(v){if(this.options.anchor)return this.options.anchor;const u=this._map,m=this._container,y=this._pos;if(!u||!m||!y)return"bottom";const S=m.offsetWidth,C=m.offsetHeight,L=y.x<S/2,O=y.x>u.transform.width-S/2;if(y.y+v<C)return L?"top-left":O?"top-right":"top";if(y.y>u.transform.height-C){if(L)return"bottom-left";if(O)return"bottom-right"}return L?"left":O?"right":"bottom"}_updateClassList(){const v=this._container;if(!v)return;const u=[...this._classList];u.push("mapboxgl-popup"),this._anchor&&u.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&u.push("mapboxgl-popup-track-pointer"),v.className=u.join(" ")}_update(v){const u=this._map,m=this._content;if(!u||!this._lngLat&&!this._trackPointer||!m)return;let y=this._container;if(y||(y=this._container=k("div","mapboxgl-popup",u.getContainer()),this._tip=k("div","mapboxgl-popup-tip",y),y.appendChild(m)),this.options.maxWidth&&y.style.maxWidth!==this.options.maxWidth&&(y.style.maxWidth=this.options.maxWidth),u.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Pu(this._lngLat,this._pos,u.transform)),!this._trackPointer||v){const S=this._pos=this._trackPointer&&v?v:u.project(this._lngLat),C=Bm(this.options.offset),L=this._anchor=this._getAnchor(C.y),O=Bm(this.options.offset,L),$=S.add(O).round();u._requestDomTask((()=>{this._container&&L&&(this._container.style.transform=`${Zc[L]} translate(${$.x}px,${$.y}px)`)}))}if(!this._marker&&u._showingGlobe()){const S=s.isLngLatBehindGlobe(u.transform,this._lngLat)?0:1;this._setOpacity(S)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const v=this._container.querySelector(B_);v&&v.focus()}_onClose(){this.remove()}_setOpacity(v){this._container&&(this._container.style.opacity=`${v}`),this._content&&(this._content.style.pointerEvents=v?"auto":"none")}},Marker:yn,Style:Mo,LngLat:s.LngLat,LngLatBounds:s.LngLatBounds,Point:s.Point,MercatorCoordinate:s.MercatorCoordinate,FreeCameraOptions:bl,Evented:s.Evented,config:s.config,prewarm:function(){Hr().acquire(Wo)},clearPrewarmedResources:function(){const v=Or;v&&(v.isPreloaded()&&v.numActive()===1?(v.release(Wo),Or=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return s.config.ACCESS_TOKEN},set accessToken(v){s.config.ACCESS_TOKEN=v},get baseApiUrl(){return s.config.API_URL},set baseApiUrl(v){s.config.API_URL=v},get workerCount(){return rs.workerCount},set workerCount(v){rs.workerCount=v},get maxParallelImageRequests(){return s.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(v){s.config.MAX_PARALLEL_IMAGE_REQUESTS=v},clearStorage(v){s.clearTileCache(v)},workerUrl:"",workerClass:null,setNow:s.exported.setNow,restoreNow:s.exported.restoreNow};return Ae}));var h=a;return h}))})(A1)),A1.exports}var one=sne();const h0=zB(one);function ca(e,t){let n;function i(){n=Fv(),n.run(()=>t.length?t(()=>{n?.stop(),i()}):t())}Yt(e,r=>{r&&!n?i():r||(n?.stop(),n=void 0)},{immediate:!0}),ao(()=>{n?.stop()})}function mN(e,t){t=Array.isArray(t)?t.slice(0,-1).map(n=>`'${n}'`).join(", ")+` or '${t.at(-1)}'`:`'${t}'`}const Xi=typeof window<"u",tP=Xi&&"IntersectionObserver"in window,ane=Xi&&("ontouchstart"in window||window.navigator.maxTouchPoints>0),A5=Xi&&"EyeDropper"in window,nP=Xi&&"matchMedia"in window&&typeof window.matchMedia=="function",ld=()=>nP&&window.matchMedia("(prefers-reduced-motion: reduce)").matches;function P5(e,t,n){lne(e,t),t.set(e,n)}function lne(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function M5(e,t,n){return e.set(pN(e,t),n),n}function qd(e,t){return e.get(pN(e,t))}function pN(e,t,n){if(typeof e=="function"?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}function gN(e,t,n){const i=t.length-1;if(i<0)return e===void 0?n:e;for(let r=0;r<i;r++){if(e==null)return n;e=e[t[r]]}return e==null||e[t[i]]===void 0?n:e[t[i]]}function Wp(e,t,n){return e==null||!t||typeof t!="string"?n:e[t]!==void 0?e[t]:(t=t.replace(/\[(\w+)\]/g,".$1"),t=t.replace(/^\./,""),gN(e,t.split("."),n))}function Ls(e,t,n){if(t===!0)return e===void 0?n:e;if(t==null||typeof t=="boolean")return n;if(e!==Object(e)){if(typeof t!="function")return n;const r=t(e,n);return typeof r>"u"?n:r}if(typeof t=="string")return Wp(e,t,n);if(Array.isArray(t))return gN(e,t,n);if(typeof t!="function")return n;const i=t(e,n);return typeof i>"u"?n:i}function rc(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return Array.from({length:e},(n,i)=>t+i)}function pn(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"px";if(e==null||e==="")return;const n=Number(e);return isNaN(n)?String(e):isFinite(n)?`${n}${t}`:void 0}function N0(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}function Ak(e){let t;return e!==null&&typeof e=="object"&&((t=Object.getPrototypeOf(e))===Object.prototype||t===null)}function iP(e){if(e&&"$el"in e){const t=e.$el;return t?.nodeType===Node.TEXT_NODE?t.nextElementSibling:t}return e}const Pk=Object.freeze({enter:"Enter",tab:"Tab",delete:"Delete",esc:"Escape",space:"Space",up:"ArrowUp",down:"ArrowDown",left:"ArrowLeft",right:"ArrowRight",end:"End",home:"Home",del:"Delete",backspace:"Backspace",insert:"Insert",pageup:"PageUp",pagedown:"PageDown",shift:"Shift"});function vN(e){return Object.keys(e)}function _p(e,t){return t.every(n=>e.hasOwnProperty(n))}function Vl(e,t){const n={};for(const i of t)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}function Mk(e,t,n){const i=Object.create(null),r=Object.create(null);for(const a in e)t.some(l=>l instanceof RegExp?l.test(a):l===a)?i[a]=e[a]:r[a]=e[a];return[i,r]}function hr(e,t){const n={...e};return t.forEach(i=>delete n[i]),n}const _N=/^on[^a-z]/,rP=e=>_N.test(e),cne=["onAfterscriptexecute","onAnimationcancel","onAnimationend","onAnimationiteration","onAnimationstart","onAuxclick","onBeforeinput","onBeforescriptexecute","onChange","onClick","onCompositionend","onCompositionstart","onCompositionupdate","onContextmenu","onCopy","onCut","onDblclick","onFocusin","onFocusout","onFullscreenchange","onFullscreenerror","onGesturechange","onGestureend","onGesturestart","onGotpointercapture","onInput","onKeydown","onKeypress","onKeyup","onLostpointercapture","onMousedown","onMousemove","onMouseout","onMouseover","onMouseup","onMousewheel","onPaste","onPointercancel","onPointerdown","onPointerenter","onPointerleave","onPointermove","onPointerout","onPointerover","onPointerup","onReset","onSelect","onSubmit","onTouchcancel","onTouchend","onTouchmove","onTouchstart","onTransitioncancel","onTransitionend","onTransitionrun","onTransitionstart","onWheel"],une=["ArrowUp","ArrowDown","ArrowRight","ArrowLeft","Enter","Escape","Tab"," "];function dne(e){return e.isComposing&&une.includes(e.key)}function dm(e){const[t,n]=Mk(e,[_N]),i=hr(t,cne),[r,a]=Mk(n,["class","style","id",/^data-/]);return Object.assign(r,t),Object.assign(a,i),[r,a]}function Xr(e){return e==null?[]:Array.isArray(e)?e:[e]}function yN(e,t){let n=0;const i=function(){for(var r=arguments.length,a=new Array(r),l=0;l<r;l++)a[l]=arguments[l];clearTimeout(n),n=setTimeout(()=>e(...a),bi(t))};return i.clear=()=>{clearTimeout(n)},i.immediate=e,i}function Cr(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;return Math.max(t,Math.min(n,e))}function D5(e){const t=e.toString().trim();return t.includes(".")?t.length-t.indexOf(".")-1:0}function L5(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"0";return e+n.repeat(Math.max(0,t-e.length))}function R5(e,t){return(arguments.length>2&&arguments[2]!==void 0?arguments[2]:"0").repeat(Math.max(0,t-e.length))+e}function hne(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const n=[];let i=0;for(;i<e.length;)n.push(e.substr(i,t)),i+=t;return n}function O5(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;if(e<t)return`${e} B`;const n=t===1024?["Ki","Mi","Gi"]:["k","M","G"];let i=-1;for(;Math.abs(e)>=t&&i<n.length-1;)e/=t,++i;return`${e.toFixed(1)} ${n[i]}B`}function za(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const i={};for(const r in e)i[r]=e[r];for(const r in t){const a=e[r],l=t[r];if(Ak(a)&&Ak(l)){i[r]=za(a,l,n);continue}if(n&&Array.isArray(a)&&Array.isArray(l)){i[r]=n(a,l);continue}i[r]=l}return i}function bN(e){return e.map(t=>t.type===an?bN(t.children):t).flat()}function Pp(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";if(Pp.cache.has(e))return Pp.cache.get(e);const t=e.replace(/[^a-z]/gi,"-").replace(/\B([A-Z])/g,"-$1").toLowerCase();return Pp.cache.set(e,t),t}Pp.cache=new Map;function bv(e,t){if(!t||typeof t!="object")return[];if(Array.isArray(t))return t.map(n=>bv(e,n)).flat(1);if(t.suspense)return bv(e,t.ssContent);if(Array.isArray(t.children))return t.children.map(n=>bv(e,n)).flat(1);if(t.component){if(Object.getOwnPropertySymbols(t.component.provides).includes(e))return[t.component];if(t.component.subTree)return bv(e,t.component.subTree).flat(1)}return[]}var sv=new WeakMap,ip=new WeakMap;class xN{constructor(t){P5(this,sv,[]),P5(this,ip,0),this.size=t}get isFull(){return qd(sv,this).length===this.size}push(t){qd(sv,this)[qd(ip,this)]=t,M5(ip,this,(qd(ip,this)+1)%this.size)}values(){return qd(sv,this).slice(qd(ip,this)).concat(qd(sv,this).slice(0,qd(ip,this)))}clear(){qd(sv,this).length=0,M5(ip,this,0)}}function fne(e){return"touches"in e?{clientX:e.touches[0].clientX,clientY:e.touches[0].clientY}:{clientX:e.clientX,clientY:e.clientY}}function sP(e){const t=so({});jr(()=>{const i=e();for(const r in i)t[r]=i[r]},{flush:"sync"});const n={};for(const i in t)n[i]=$e(()=>t[i]);return n}function Ew(e,t){return e.includes(t)}function wN(e){return e[2].toLowerCase()+e.slice(3)}const zo=()=>[Function,Array];function V5(e,t){return t="on"+hd(t),!!(e[t]||e[`${t}Once`]||e[`${t}Capture`]||e[`${t}OnceCapture`]||e[`${t}CaptureOnce`])}function Ab(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(Array.isArray(e))for(const r of e)r(...n);else typeof e=="function"&&e(...n)}function t_(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const n=["button","[href]",'input:not([type="hidden"])',"select","textarea","details:not(:has(> summary))","details > summary","[tabindex]",'[contenteditable]:not([contenteditable="false"])',"audio[controls]","video[controls]"].map(r=>`${r}${t?':not([tabindex="-1"])':""}:not([disabled], [inert])`).join(", ");let i;try{i=[...e.querySelectorAll(n)]}catch{return[]}return i.filter(r=>!r.closest("[inert]")).filter(r=>!!r.offsetParent||r.getClientRects().length>0).filter(r=>!r.parentElement?.closest("details:not([open])")||r.tagName==="SUMMARY"&&r.parentElement?.tagName==="DETAILS")}function TN(e,t,n){let i,r=e.indexOf(document.activeElement);const a=t==="next"?1:-1;do r+=a,i=e[r];while((!i||i.offsetParent==null||!(n?.(i)??!0))&&r<e.length&&r>=0);return i}function Mp(e,t){const n=t_(e);if(t==null)(e===document.activeElement||!e.contains(document.activeElement))&&n[0]?.focus();else if(t==="first")n[0]?.focus();else if(t==="last")n.at(-1)?.focus();else if(typeof t=="number")n[t]?.focus();else{const i=TN(n,t);i?i.focus():Mp(e,t==="next"?"first":"last")}}function Wx(e){return e==null||typeof e=="string"&&e.trim()===""}function SN(){}function n_(e,t){if(!(Xi&&typeof CSS<"u"&&typeof CSS.supports<"u"&&CSS.supports(`selector(${t})`)))return null;try{return!!e&&e.matches(t)}catch{return null}}function MT(e){return e.some(t=>Bp(t)?t.type===Bo?!1:t.type!==an||MT(t.children):!0)?e:null}function Hx(e,t,n){return e?.(t)??n?.(t)}function mne(e,t){if(!Xi||e===0)return t(),()=>{};const n=window.setTimeout(t,e);return()=>window.clearTimeout(n)}function pne(e,t){const n=e.clientX,i=e.clientY,r=t.getBoundingClientRect(),a=r.left,l=r.top,h=r.right,s=r.bottom;return n>=a&&n<=h&&i>=l&&i<=s}function Cw(){const e=tn(),t=n=>{e.value=n};return Object.defineProperty(t,"value",{enumerable:!0,get:()=>e.value,set:n=>e.value=n}),Object.defineProperty(t,"el",{enumerable:!0,get:()=>iP(e.value)}),t}function i_(e){const t=e.key.length===1,n=!e.ctrlKey&&!e.metaKey&&!e.altKey;return t&&n}function tm(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="bigint"}function kw(e){return"\\^$*+?.()|{}[]".includes(e)?`\\${e}`:e}function gne(e,t,n){const i=new RegExp(`[\\d\\-${kw(n)}]`),r=e.split("").filter(l=>i.test(l)).filter((l,h,s)=>h===0&&/[-]/.test(l)||l===n&&h===s.indexOf(l)||/\d/.test(l)).join("");if(t===0)return r.split(n)[0];const a=new RegExp(`${kw(n)}\\d`);if(t!==null&&a.test(r)){const l=r.split(n);return[l[0],l[1].substring(0,t)].join(n)}return r}function vne(e){const t={};for(const n in e)t[ll(n)]=e[n];return t}function _ne(e){const t=["checked","disabled"];return Object.fromEntries(Object.entries(e).filter(n=>{let[i,r]=n;return t.includes(i)?!!r:r!==void 0}))}function B5(e){const t=n=>Array.isArray(n)?n.map(i=>t(i)):Vs(n)||xp(n)||Jw(n)?t(Un(n)):Ak(n)?Object.keys(n).reduce((i,r)=>(i[r]=t(n[r]),i),{}):n;return t(e)}const EN=["top","bottom"],yne=["start","end","left","right"];function Dk(e,t){let[n,i]=e.split(" ");return i||(i=Ew(EN,n)?"start":Ew(yne,n)?"top":"center"),{side:Lk(n,t),align:Lk(i,t)}}function Lk(e,t){return e==="start"?t?"right":"left":e==="end"?t?"left":"right":e}function nC(e){return{side:{center:"center",top:"bottom",bottom:"top",left:"right",right:"left"}[e.side],align:e.align}}function iC(e){return{side:e.side,align:{center:"center",top:"bottom",bottom:"top",left:"right",right:"left"}[e.align]}}function F5(e){return{side:e.align,align:e.side}}function z5(e){return Ew(EN,e.side)?"y":"x"}class Bc{constructor(t){const n=document.body.currentCSSZoom??1,i=t instanceof DOMRect?1+(1-n)/n:1,{x:r,y:a,width:l,height:h}=t;this.x=r*i,this.y=a*i,this.width=l*i,this.height=h*i}get top(){return this.y}get bottom(){return this.y+this.height}get left(){return this.x}get right(){return this.x+this.width}}function N5(e,t){return{x:{before:Math.max(0,t.left-e.left),after:Math.max(0,e.right-t.right)},y:{before:Math.max(0,t.top-e.top),after:Math.max(0,e.bottom-t.bottom)}}}function CN(e){if(Array.isArray(e)){const t=document.body.currentCSSZoom??1,n=1+(1-t)/t;return new Bc({x:e[0]*n,y:e[1]*n,width:0*n,height:0*n})}else return new Bc(e.getBoundingClientRect())}function bne(e){if(e===document.documentElement)if(visualViewport){const t=document.body.currentCSSZoom??1;return new Bc({x:visualViewport.scale>1?0:visualViewport.offsetLeft,y:visualViewport.scale>1?0:visualViewport.offsetTop,width:visualViewport.width*visualViewport.scale/t,height:visualViewport.height*visualViewport.scale/t})}else return new Bc({x:0,y:0,width:document.documentElement.clientWidth,height:document.documentElement.clientHeight});else{const t=e.getBoundingClientRect();return new Bc({x:t.x,y:t.y,width:e.clientWidth,height:e.clientHeight})}}function oP(e){const t=new Bc(e.getBoundingClientRect()),n=getComputedStyle(e),i=n.transform;if(i){let r,a,l,h,s;if(i.startsWith("matrix3d("))r=i.slice(9,-1).split(/, /),a=Number(r[0]),l=Number(r[5]),h=Number(r[12]),s=Number(r[13]);else if(i.startsWith("matrix("))r=i.slice(7,-1).split(/, /),a=Number(r[0]),l=Number(r[3]),h=Number(r[4]),s=Number(r[5]);else return new Bc(t);const p=n.transformOrigin,_=t.x-h-(1-a)*parseFloat(p),x=t.y-s-(1-l)*parseFloat(p.slice(p.indexOf(" ")+1)),T=a?t.width/a:e.offsetWidth+1,k=l?t.height/l:e.offsetHeight+1;return new Bc({x:_,y:x,width:T,height:k})}else return new Bc(t)}function nh(e,t,n){if(typeof e.animate>"u")return{finished:Promise.resolve()};let i;try{i=e.animate(t,n)}catch{return{finished:Promise.resolve()}}return typeof i.finished>"u"&&(i.finished=new Promise(r=>{i.onfinish=()=>{r(i)}})),i}const P1=new WeakMap;function xne(e,t){Object.keys(t).forEach(n=>{if(rP(n)){const i=wN(n),r=P1.get(e);if(t[n]==null)r?.forEach(a=>{const[l,h]=a;l===i&&(e.removeEventListener(i,h),r.delete(a))});else if(!r||![...r].some(a=>a[0]===i&&a[1]===t[n])){e.addEventListener(i,t[n]);const a=r||new Set;a.add([i,t[n]]),P1.has(e)||P1.set(e,a)}}else t[n]==null?e.removeAttribute(n):e.setAttribute(n,t[n])})}function wne(e,t){Object.keys(t).forEach(n=>{if(rP(n)){const i=wN(n),r=P1.get(e);r?.forEach(a=>{const[l,h]=a;l===i&&(e.removeEventListener(i,h),r.delete(a))})}else e.removeAttribute(n)})}const ov=2.4,$5=.2126729,U5=.7151522,j5=.072175,Tne=.55,Sne=.58,Ene=.57,Cne=.62,Gx=.03,W5=1.45,kne=5e-4,Ine=1.25,Ane=1.25,H5=.078,G5=12.82051282051282,qx=.06,q5=.001;function K5(e,t){const n=(e.r/255)**ov,i=(e.g/255)**ov,r=(e.b/255)**ov,a=(t.r/255)**ov,l=(t.g/255)**ov,h=(t.b/255)**ov;let s=n*$5+i*U5+r*j5,p=a*$5+l*U5+h*j5;if(s<=Gx&&(s+=(Gx-s)**W5),p<=Gx&&(p+=(Gx-p)**W5),Math.abs(p-s)<kne)return 0;let _;if(p>s){const x=(p**Tne-s**Sne)*Ine;_=x<q5?0:x<H5?x-x*G5*qx:x-qx}else{const x=(p**Cne-s**Ene)*Ane;_=x>-q5?0:x>-H5?x-x*G5*qx:x+qx}return _*100}const Iw=.20689655172413793,Pne=e=>e>Iw**3?Math.cbrt(e):e/(3*Iw**2)+4/29,Mne=e=>e>Iw?e**3:3*Iw**2*(e-4/29);function kN(e){const t=Pne,n=t(e[1]);return[116*n-16,500*(t(e[0]/.95047)-n),200*(n-t(e[2]/1.08883))]}function IN(e){const t=Mne,n=(e[0]+16)/116;return[t(n+e[1]/500)*.95047,t(n),t(n-e[2]/200)*1.08883]}const Dne=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]],Lne=e=>e<=.0031308?e*12.92:1.055*e**(1/2.4)-.055,Rne=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],One=e=>e<=.04045?e/12.92:((e+.055)/1.055)**2.4;function AN(e){const t=Array(3),n=Lne,i=Dne;for(let r=0;r<3;++r)t[r]=Math.round(Cr(n(i[r][0]*e[0]+i[r][1]*e[1]+i[r][2]*e[2]))*255);return{r:t[0],g:t[1],b:t[2]}}function aP(e){let{r:t,g:n,b:i}=e;const r=[0,0,0],a=One,l=Rne;t=a(t/255),n=a(n/255),i=a(i/255);for(let h=0;h<3;++h)r[h]=l[h][0]*t+l[h][1]*n+l[h][2]*i;return r}function Rk(e){return!!e&&/^(#|var\(--|(rgb|hsl)a?\()/.test(e)}function Vne(e){return Rk(e)&&!/^((rgb|hsl)a?\()?var\(--/.test(e)}const X5=/^(?<fn>(?:rgb|hsl)a?)\((?<values>.+)\)/,Bne={rgb:(e,t,n,i)=>({r:e,g:t,b:n,a:i}),rgba:(e,t,n,i)=>({r:e,g:t,b:n,a:i}),hsl:(e,t,n,i)=>Y5({h:e,s:t,l:n,a:i}),hsla:(e,t,n,i)=>Y5({h:e,s:t,l:n,a:i}),hsv:(e,t,n,i)=>cd({h:e,s:t,v:n,a:i}),hsva:(e,t,n,i)=>cd({h:e,s:t,v:n,a:i})};function sc(e){if(typeof e=="number")return{r:(e&16711680)>>16,g:(e&65280)>>8,b:e&255};if(typeof e=="string"&&X5.test(e)){const{groups:t}=e.match(X5),{fn:n,values:i}=t,r=i.split(/,\s*|\s*\/\s*|\s+/).map((a,l)=>a.endsWith("%")||l>0&&l<3&&["hsl","hsla","hsv","hsva"].includes(n)?parseFloat(a)/100:parseFloat(a));return Bne[n](...r)}else if(typeof e=="string"){let t=e.startsWith("#")?e.slice(1):e;return[3,4].includes(t.length)?t=t.split("").map(n=>n+n).join(""):[6,8].includes(t.length),LN(t)}else if(typeof e=="object"){if(_p(e,["r","g","b"]))return e;if(_p(e,["h","s","l"]))return cd(lP(e));if(_p(e,["h","s","v"]))return cd(e)}throw new TypeError(`Invalid color: ${e==null?e:String(e)||e.constructor.name}
Expected #hex, #hexa, rgb(), rgba(), hsl(), hsla(), object or number`)}function cd(e){const{h:t,s:n,v:i,a:r}=e,a=h=>{const s=(h+t/60)%6;return i-i*n*Math.max(Math.min(s,4-s,1),0)},l=[a(5),a(3),a(1)].map(h=>Math.round(h*255));return{r:l[0],g:l[1],b:l[2],a:r}}function Y5(e){return cd(lP(e))}function Pb(e){if(!e)return{h:0,s:1,v:1,a:1};const t=e.r/255,n=e.g/255,i=e.b/255,r=Math.max(t,n,i),a=Math.min(t,n,i);let l=0;r!==a&&(r===t?l=60*(0+(n-i)/(r-a)):r===n?l=60*(2+(i-t)/(r-a)):r===i&&(l=60*(4+(t-n)/(r-a)))),l<0&&(l=l+360);const h=r===0?0:(r-a)/r,s=[l,h,r];return{h:s[0],s:s[1],v:s[2],a:e.a}}function Ok(e){const{h:t,s:n,v:i,a:r}=e,a=i-i*n/2,l=a===1||a===0?0:(i-a)/Math.min(a,1-a);return{h:t,s:l,l:a,a:r}}function lP(e){const{h:t,s:n,l:i,a:r}=e,a=i+n*Math.min(i,1-i),l=a===0?0:2-2*i/a;return{h:t,s:l,v:a,a:r}}function PN(e){let{r:t,g:n,b:i,a:r}=e;return r===void 0?`rgb(${t}, ${n}, ${i})`:`rgba(${t}, ${n}, ${i}, ${r})`}function MN(e){return PN(cd(e))}function Kx(e){const t=Math.round(e).toString(16);return("00".substr(0,2-t.length)+t).toUpperCase()}function DN(e){let{r:t,g:n,b:i,a:r}=e;return`#${[Kx(t),Kx(n),Kx(i),r!==void 0?Kx(Math.round(r*255)):""].join("")}`}function LN(e){e=zne(e);let[t,n,i,r]=hne(e,2).map(a=>parseInt(a,16));return r=r===void 0?r:r/255,{r:t,g:n,b:i,a:r}}function Fne(e){const t=LN(e);return Pb(t)}function RN(e){return DN(cd(e))}function zne(e){return e.startsWith("#")&&(e=e.slice(1)),e=e.replace(/([^0-9a-f])/gi,"F"),(e.length===3||e.length===4)&&(e=e.split("").map(t=>t+t).join("")),e.length!==6&&(e=L5(L5(e,6),8,"F")),e}function Nne(e,t){const n=kN(aP(e));return n[0]=n[0]+t*10,AN(IN(n))}function $ne(e,t){const n=kN(aP(e));return n[0]=n[0]-t*10,AN(IN(n))}function Vk(e){const t=sc(e);return aP(t)[1]}function Une(e,t){const n=Vk(e),i=Vk(t),r=Math.max(n,i),a=Math.min(n,i);return(r+.05)/(a+.05)}function ON(e){const t=Math.abs(K5(sc(0),sc(e)));return Math.abs(K5(sc(16777215),sc(e)))>Math.min(t,50)?"#fff":"#000"}function lt(e,t){return n=>Object.keys(e).reduce((i,r)=>{const l=typeof e[r]=="object"&&e[r]!=null&&!Array.isArray(e[r])?e[r]:{type:e[r]};return n&&r in n?i[r]={...l,default:n[r]}:i[r]=l,t&&!i[r].source&&(i[r].source=t),i},{})}const Tn=lt({class:[String,Array,Object],style:{type:[String,Array,Object],default:null}},"component");function ws(e,t){const n=p_();if(!n)throw new Error(`[Vuetify] ${e} must be called from inside a setup function`);return n}function fd(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"composables";const t=ws(e).type;return Pp(t?.aliasName||t?.name)}function jne(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ws("injectSelf");const{provides:n}=t;if(n&&e in n)return n[e]}const r_=Symbol.for("vuetify:defaults");function Wne(e){return tt(e)}function cP(){const e=Si(r_);if(!e)throw new Error("[Vuetify] Could not find defaults instance");return e}function ts(e,t){const n=cP(),i=tt(e),r=me(()=>{if(bi(t?.disabled))return n.value;const l=bi(t?.scoped),h=bi(t?.reset),s=bi(t?.root);if(i.value==null&&!(l||h||s))return n.value;let p=za(i.value,{prev:n.value});if(l)return p;if(h||s){const _=Number(h||1/0);for(let x=0;x<=_&&!(!p||!("prev"in p));x++)p=p.prev;return p&&typeof s=="string"&&s in p&&(p=za(za(p,{prev:p}),p[s])),p}return p.prev?za(p.prev,p):p});return Rr(r_,r),r}function Hne(e,t){return e.props&&(typeof e.props[t]<"u"||typeof e.props[Pp(t)]<"u")}function Gne(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:cP();const i=ws("useDefaults");if(t=t??i.type.name??i.type.__name,!t)throw new Error("[Vuetify] Could not determine component name");const r=me(()=>n.value?.[e._as??t]),a=new Proxy(e,{get(s,p){const _=Reflect.get(s,p);if(p==="class"||p==="style")return[r.value?.[p],_].filter(k=>k!=null);if(Hne(i.vnode,p))return _;const x=r.value?.[p];if(x!==void 0)return x;const T=n.value?.global?.[p];return T!==void 0?T:_}}),l=tn();jr(()=>{if(r.value){const s=Object.entries(r.value).filter(p=>{let[_]=p;return _.startsWith(_[0].toUpperCase())});l.value=s.length?Object.fromEntries(s):void 0}else l.value=void 0});function h(){const s=jne(r_,i);Rr(r_,me(()=>l.value?za(s?.value??{},l.value):s?.value))}return{props:a,provideSubDefaults:h}}function dc(e){if(e._setup=e._setup??e.setup,!e.name)return e;if(e._setup){e.props=lt(e.props??{},e.name)();const t=Object.keys(e.props).filter(n=>n!=="class"&&n!=="style");e.filterProps=function(i){return Vl(i,t)},e.props._as=String,e.setup=function(i,r){const a=cP();if(!a.value)return e._setup(i,r);const{props:l,provideSubDefaults:h}=Gne(i,i._as??e.name,a),s=e._setup(l,r);return h(),s}}return e}function Mt(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return t=>(e?dc:eB)(t)}function qne(e,t){return t.props=e,t}function Ih(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"div",n=arguments.length>2?arguments[2]:void 0;return Mt()({name:n??hd(ll(e.replace(/__/g,"-"))),props:{tag:{type:String,default:t},...Tn()},setup(i,r){let{slots:a}=r;return()=>Sh(i.tag,{class:[e,i.class],style:i.style},a.default?.())}})}function Kne(e,t,n,i){if(!n||tm(e)||tm(t))return;const r=n.get(e);if(r)r.set(t,i);else{const a=new WeakMap;a.set(t,i),n.set(e,a)}}function Xne(e,t,n){if(!n||tm(e)||tm(t))return null;const i=n.get(e)?.get(t);if(typeof i=="boolean")return i;const r=n.get(t)?.get(e);return typeof r=="boolean"?r:null}function bo(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:new WeakMap;if(e===t)return!0;if(e instanceof Date&&t instanceof Date&&e.getTime()!==t.getTime()||e!==Object(e)||t!==Object(t))return!1;const i=Object.keys(e);if(i.length!==Object.keys(t).length)return!1;const r=Xne(e,t,n);return r||(Kne(e,t,n,!0),i.every(a=>bo(e[a],t[a],n)))}function VN(e){if(typeof e.getRootNode!="function"){for(;e.parentNode;)e=e.parentNode;return e!==document?null:document}const t=e.getRootNode();return t!==document&&t.getRootNode({composed:!0})!==document?null:t}const $0="cubic-bezier(0.4, 0, 0.2, 1)",Z5="cubic-bezier(0.0, 0, 0.2, 1)",J5="cubic-bezier(0.4, 0, 1, 1)",Yne={linear:e=>e,easeInQuad:e=>e**2,easeOutQuad:e=>e*(2-e),easeInOutQuad:e=>e<.5?2*e**2:-1+(4-2*e)*e,easeInCubic:e=>e**3,easeOutCubic:e=>--e**3+1,easeInOutCubic:e=>e<.5?4*e**3:(e-1)*(2*e-2)*(2*e-2)+1,easeInQuart:e=>e**4,easeOutQuart:e=>1- --e**4,easeInOutQuart:e=>e<.5?8*e**4:1-8*--e**4,easeInQuint:e=>e**5,easeOutQuint:e=>1+--e**5,easeInOutQuint:e=>e<.5?16*e**5:1+16*--e**5,instant:e=>1};function Q5(e,t,n){return Object.keys(e).filter(i=>rP(i)&&i.endsWith(t)).reduce((i,r)=>(i[r.slice(0,-t.length)]=a=>Ab(e[r],a,n(a)),i),{})}function DT(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;for(;e;){if(t?Zne(e):uP(e))return e;e=e.parentElement}return document.scrollingElement}function Aw(e,t){const n=[];if(t&&e&&!t.contains(e))return n;for(;e&&(uP(e)&&n.push(e),e!==t);)e=e.parentElement;return n}function uP(e){if(!e||e.nodeType!==Node.ELEMENT_NODE)return!1;const t=window.getComputedStyle(e),n=t.overflowY==="scroll"||t.overflowY==="auto"&&e.scrollHeight>e.clientHeight,i=t.overflowX==="scroll"||t.overflowX==="auto"&&e.scrollWidth>e.clientWidth;return n||i}function Zne(e){if(!e||e.nodeType!==Node.ELEMENT_NODE)return!1;const t=window.getComputedStyle(e);return["scroll","auto"].includes(t.overflowY)}function Jne(e){let{depth:t,isLast:n,isLastGroup:i,leafLinks:r,separateRoots:a,parentIndentLines:l,variant:h}=e;if(!l||!t)return{leaf:void 0,node:void 0,children:l};if(h==="simple")return{leaf:[...l,"line"],node:[...l,"line"],children:[...l,"line"]};const s=n&&(!i||a||t>1);return{leaf:[...l,s?"last-leaf":"leaf",...r?["leaf-link"]:[]],node:[...l,s?"last-leaf":"leaf"],children:[...l,s?"none":"line"]}}function Qne(e){for(;e;){if(window.getComputedStyle(e).position==="fixed")return!0;e=e.offsetParent}return!1}function zt(e){const t=ws("useRender");t.render=e}function eie(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{leading:!0,trailing:!0},i=0,r=0,a=!1,l=0;function h(){clearTimeout(i),a=!1,l=0}const s=function(){for(var p=arguments.length,_=new Array(p),x=0;x<p;x++)_[x]=arguments[x];clearTimeout(i);const T=Date.now();l||(l=T);const k=T-Math.max(l,r);function A(){r=Date.now(),i=window.setTimeout(h,t),e(..._)}a?k>=t?A():n.trailing&&(i=window.setTimeout(A,t-k)):(a=!0,n.leading&&A())};return s.clear=h,s.immediate=e,s}function Pn(e,t,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:x=>x,r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:x=>x;const a=ws("useProxiedModel"),l=tt(e[t]!==void 0?e[t]:n),h=Pp(t),p=me(h!==t?()=>(e[t],!!((a.vnode.props?.hasOwnProperty(t)||a.vnode.props?.hasOwnProperty(h))&&(a.vnode.props?.hasOwnProperty(`onUpdate:${t}`)||a.vnode.props?.hasOwnProperty(`onUpdate:${h}`)))):()=>(e[t],!!(a.vnode.props?.hasOwnProperty(t)&&a.vnode.props?.hasOwnProperty(`onUpdate:${t}`))));ca(()=>!p.value,()=>{Yt(()=>e[t],x=>{l.value=x})});const _=me({get(){const x=e[t];return i(p.value?x:l.value)},set(x){const T=r(x),k=Un(p.value?e[t]:l.value);k===T||i(k)===x||(l.value=T,a?.emit(`update:${t}`,T))}});return Object.defineProperty(_,"externalValue",{get:()=>p.value?e[t]:l.value}),_}const tie={badge:"Badge",open:"Open",close:"Close",dismiss:"Dismiss",confirmEdit:{ok:"OK",cancel:"Cancel"},dataIterator:{noResultsText:"No matching records found",loadingText:"Loading items..."},dataTable:{itemsPerPageText:"Rows per page:",ariaLabel:{sortDescending:"Sorted descending.",sortAscending:"Sorted ascending.",sortNone:"Not sorted.",activateNone:"Activate to remove sorting.",activateDescending:"Activate to sort descending.",activateAscending:"Activate to sort ascending."},sortBy:"Sort by"},dataFooter:{itemsPerPageText:"Items per page:",itemsPerPageAll:"All",nextPage:"Next page",prevPage:"Previous page",firstPage:"First page",lastPage:"Last page",pageText:"{0}-{1} of {2}"},dateRangeInput:{divider:"to"},datePicker:{itemsSelected:"{0} selected",range:{title:"Select dates",header:"Enter dates"},title:"Select date",header:"Enter date",input:{placeholder:"Enter date"},ariaLabel:{previousMonth:"Previous month",nextMonth:"Next month",selectYear:"Select year",selectDate:"{0}",currentDate:"Today, {0}"}},noDataText:"No data available",carousel:{prev:"Previous visual",next:"Next visual",ariaLabel:{delimiter:"Carousel slide {0} of {1}"}},calendar:{moreEvents:"{0} more",today:"Today"},input:{clear:"Clear {0}",prependAction:"{0} prepended action",appendAction:"{0} appended action",otp:"Please enter OTP character {0}"},fileInput:{counter:"{0} files",counterSize:"{0} files ({1} in total)"},fileUpload:{title:"Drag and drop files here",divider:"or",browse:"Browse Files"},timePicker:{am:"AM",pm:"PM",title:"Select Time"},pagination:{ariaLabel:{root:"Pagination Navigation",next:"Next page",previous:"Previous page",page:"Go to page {0}",currentPage:"Page {0}, Current page",first:"First page",last:"Last page"}},stepper:{next:"Next",prev:"Previous"},rating:{ariaLabel:{item:"Rating {0} of {1}"}},loading:"Loading...",infiniteScroll:{loadMore:"Load more",empty:"No more"},rules:{required:"This field is required",email:"Please enter a valid email",number:"This field can only contain numbers",integer:"This field can only contain integer values",capital:"This field can only contain uppercase letters",maxLength:"You must enter a maximum of {0} characters",minLength:"You must enter a minimum of {0} characters",strictLength:"The length of the entered field is invalid",exclude:"The {0} character is not allowed",notEmpty:"Please choose at least one value",pattern:"Invalid format"},hotkey:{then:"then",ctrl:"Ctrl",command:"Command",space:"Space",shift:"Shift",alt:"Alt",enter:"Enter",escape:"Escape",upArrow:"Up Arrow",downArrow:"Down Arrow",leftArrow:"Left Arrow",rightArrow:"Right Arrow",backspace:"Backspace",option:"Option",plus:"plus",shortcut:"Keyboard shortcut: {0}"},video:{play:"Play",pause:"Pause",seek:"Seek",volume:"Volume",showVolume:"Show volume control",mute:"Mute",unmute:"Unmute",enterFullscreen:"Full screen",exitFullscreen:"Exit full screen"},colorPicker:{ariaLabel:{eyedropper:"Select color with eyedropper",hueSlider:"Hue",alphaSlider:"Alpha",redInput:"Red value",greenInput:"Green value",blueInput:"Blue value",alphaInput:"Alpha value",hueInput:"Hue value",saturationInput:"Saturation value",lightnessInput:"Lightness value",hexInput:"HEX value",hexaInput:"HEX with alpha value",changeFormat:"Change color format"}}},e4="$vuetify.",t4=(e,t)=>e.replace(/\{(\d+)\}/g,(n,i)=>String(t[Number(i)])),BN=(e,t,n)=>function(i){for(var r=arguments.length,a=new Array(r>1?r-1:0),l=1;l<r;l++)a[l-1]=arguments[l];if(!i.startsWith(e4))return t4(i,a);const h=i.replace(e4,""),s=e.value&&n.value[e.value],p=t.value&&n.value[t.value];let _=Wp(s,h,null);return _||(`${i}${e.value}`,_=Wp(p,h,null)),_||(_=i),typeof _!="string"&&(_=i),t4(_,a)};function dP(e,t){return(n,i)=>new Intl.NumberFormat([e.value,t.value],i).format(n)}function FN(e,t){return dP(e,t)(.1).includes(",")?",":"."}function rC(e,t,n){const i=Pn(e,t,e[t]??n.value);return i.value=e[t]??n.value,Yt(n,r=>{e[t]==null&&(i.value=n.value)}),i}function zN(e){return t=>{const n=rC(t,"locale",e.current),i=rC(t,"fallback",e.fallback),r=rC(t,"messages",e.messages);return{name:"vuetify",current:n,fallback:i,messages:r,decimalSeparator:$e(()=>FN(n,i)),t:BN(n,i,r),n:dP(n,i),provide:zN({current:n,fallback:i,messages:r})}}}function nie(e){const t=tn(e?.locale??"en"),n=tn(e?.fallback??"en"),i=tt({en:tie,...e?.messages});return{name:"vuetify",current:t,fallback:n,messages:i,decimalSeparator:$e(()=>e?.decimalSeparator??FN(t,n)),t:BN(t,n,i),n:dP(t,n),provide:zN({current:t,fallback:n,messages:i})}}const s_=Symbol.for("vuetify:locale");function iie(e){return e.name!=null}function rie(e){const t=e?.adapter&&iie(e?.adapter)?e?.adapter:nie(e),n=aie(t,e);return{...t,...n}}function fr(){const e=Si(s_);if(!e)throw new Error("[Vuetify] Could not find injected locale instance");return e}function sie(e){const t=Si(s_);if(!t)throw new Error("[Vuetify] Could not find injected locale instance");const n=t.provide(e),i=lie(n,t.rtl,e),r={...n,...i};return Rr(s_,r),r}function oie(){return{af:!1,ar:!0,bg:!1,ca:!1,ckb:!1,cs:!1,de:!1,el:!1,en:!1,es:!1,et:!1,fa:!0,fi:!1,fr:!1,hr:!1,hu:!1,he:!0,id:!1,it:!1,ja:!1,km:!1,ko:!1,lv:!1,lt:!1,nl:!1,no:!1,pl:!1,pt:!1,ro:!1,ru:!1,sk:!1,sl:!1,srCyrl:!1,srLatn:!1,sv:!1,th:!1,tr:!1,az:!1,uk:!1,vi:!1,zhHans:!1,zhHant:!1}}function aie(e,t){const n=tt(t?.rtl??oie()),i=me(()=>n.value[e.current.value]??!1);return{isRtl:i,rtl:n,rtlClasses:$e(()=>`v-locale--is-${i.value?"rtl":"ltr"}`)}}function lie(e,t,n){const i=me(()=>n.rtl??t.value[e.current.value]??!1);return{isRtl:i,rtl:t,rtlClasses:$e(()=>`v-locale--is-${i.value?"rtl":"ltr"}`)}}function qs(){const e=Si(s_);if(!e)throw new Error("[Vuetify] Could not find injected rtl instance");return{isRtl:e.isRtl,rtlClasses:e.rtlClasses}}function Mb(e){const t=e.slice(-2).toUpperCase();switch(!0){case e==="GB-alt-variant":return{firstDay:0,firstWeekSize:4};case e==="001":return{firstDay:1,firstWeekSize:1};case`AG AS BD BR BS BT BW BZ CA CO DM DO ET GT GU HK HN ID IL IN JM JP KE
    KH KR LA MH MM MO MT MX MZ NI NP PA PE PH PK PR PY SA SG SV TH TT TW UM US
    VE VI WS YE ZA ZW`.includes(t):return{firstDay:0,firstWeekSize:1};case`AI AL AM AR AU AZ BA BM BN BY CL CM CN CR CY EC GE HR KG KZ LB LK LV
    MD ME MK MN MY NZ RO RS SI TJ TM TR UA UY UZ VN XK`.includes(t):return{firstDay:1,firstWeekSize:1};case`AD AN AT AX BE BG CH CZ DE DK EE ES FI FJ FO FR GB GF GP GR HU IE IS
    IT LI LT LU MC MQ NL NO PL RE RU SE SK SM VA`.includes(t):return{firstDay:1,firstWeekSize:4};case"AE AF BH DJ DZ EG IQ IR JO KW LY OM QA SD SY".includes(t):return{firstDay:6,firstWeekSize:1};case t==="MV":return{firstDay:5,firstWeekSize:1};case t==="PT":return{firstDay:0,firstWeekSize:4};default:return null}}function cie(e,t,n){const i=[];let r=[];const a=NN(e),l=$N(e),h=n??Mb(t)?.firstDay??0,s=(a.getDay()-h+7)%7,p=(l.getDay()-h+7)%7;for(let _=0;_<s;_++){const x=new Date(a);x.setDate(x.getDate()-(s-_)),r.push(x)}for(let _=1;_<=l.getDate();_++){const x=new Date(e.getFullYear(),e.getMonth(),_);r.push(x),r.length===7&&(i.push(r),r=[])}for(let _=1;_<7-p;_++){const x=new Date(l);x.setDate(x.getDate()+_),r.push(x)}return r.length>0&&i.push(r),i}function Pw(e,t,n){let i=(n??Mb(t)?.firstDay??0)%7;[0,1,2,3,4,5,6].includes(i)||(i=0);const r=new Date(e);for(;r.getDay()!==i;)r.setDate(r.getDate()-1);return r}function uie(e,t){const n=new Date(e),i=((Mb(t)?.firstDay??0)+6)%7;for(;n.getDay()!==i;)n.setDate(n.getDate()+1);return n}function NN(e){return new Date(e.getFullYear(),e.getMonth(),1)}function $N(e){return new Date(e.getFullYear(),e.getMonth()+1,0)}function die(e){const t=e.split("-").map(Number);return new Date(t[0],t[1]-1,t[2])}const hie=/^([12]\d{3}-([1-9]|0[1-9]|1[0-2])-([1-9]|0[1-9]|[12]\d|3[01]))$/;function UN(e){if(e==null)return new Date;if(e instanceof Date)return e;if(typeof e=="string"){let t;if(hie.test(e))return die(e);if(t=Date.parse(e),!isNaN(t))return new Date(t)}return null}const n4=new Date(2e3,0,2);function fie(e,t,n){const i=t??Mb(e)?.firstDay??0;return rc(7).map(r=>{const a=new Date(n4);return a.setDate(n4.getDate()+i+r),new Intl.DateTimeFormat(e,{weekday:n??"narrow"}).format(a)})}function mie(e,t,n,i){const r=UN(e)??new Date,a=i?.[t];if(typeof a=="function")return a(r,t,n);let l={};switch(t){case"fullDate":l={year:"numeric",month:"short",day:"numeric"};break;case"fullDateWithWeekday":l={weekday:"long",year:"numeric",month:"long",day:"numeric"};break;case"normalDate":const h=r.getDate(),s=new Intl.DateTimeFormat(n,{month:"long"}).format(r);return`${h} ${s}`;case"normalDateWithWeekday":l={weekday:"short",day:"numeric",month:"short"};break;case"shortDate":l={month:"short",day:"numeric"};break;case"year":l={year:"numeric"};break;case"month":l={month:"long"};break;case"monthShort":l={month:"short"};break;case"monthAndYear":l={month:"long",year:"numeric"};break;case"monthAndDate":l={month:"long",day:"numeric"};break;case"weekday":l={weekday:"long"};break;case"weekdayShort":l={weekday:"short"};break;case"dayOfMonth":return new Intl.NumberFormat(n).format(r.getDate());case"hours12h":l={hour:"numeric",hour12:!0};break;case"hours24h":l={hour:"numeric",hour12:!1};break;case"minutes":l={minute:"numeric"};break;case"seconds":l={second:"numeric"};break;case"fullTime":l={hour:"numeric",minute:"numeric"};break;case"fullTime12h":l={hour:"numeric",minute:"numeric",hour12:!0};break;case"fullTime24h":l={hour:"numeric",minute:"numeric",hour12:!1};break;case"fullDateTime":l={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"};break;case"fullDateTime12h":l={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0};break;case"fullDateTime24h":l={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1};break;case"keyboardDate":l={year:"numeric",month:"2-digit",day:"2-digit"};break;case"keyboardDateTime":return l={year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric"},new Intl.DateTimeFormat(n,l).format(r).replace(/, /g," ");case"keyboardDateTime12h":return l={year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric",hour12:!0},new Intl.DateTimeFormat(n,l).format(r).replace(/, /g," ");case"keyboardDateTime24h":return l={year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric",hour12:!1},new Intl.DateTimeFormat(n,l).format(r).replace(/, /g," ");default:l=a??{timeZone:"UTC",timeZoneName:"short"}}return new Intl.DateTimeFormat(n,l).format(r)}function pie(e,t){const n=e.toJsDate(t),i=n.getFullYear(),r=R5(String(n.getMonth()+1),2,"0"),a=R5(String(n.getDate()),2,"0");return`${i}-${r}-${a}`}function gie(e){const[t,n,i]=e.split("-").map(Number);return new Date(t,n-1,i)}function vie(e,t){const n=new Date(e);return n.setMinutes(n.getMinutes()+t),n}function _ie(e,t){const n=new Date(e);return n.setHours(n.getHours()+t),n}function Dp(e,t){const n=new Date(e);return n.setDate(n.getDate()+t),n}function yie(e,t){const n=new Date(e);return n.setDate(n.getDate()+t*7),n}function bie(e,t){const n=new Date(e);return n.setDate(1),n.setMonth(n.getMonth()+t),n}function U0(e){return e.getFullYear()}function xie(e){return e.getMonth()}function wie(e,t,n,i){const r=Mb(t),a=n??r?.firstDay??0,l=r?.firstWeekSize??1;return i!==void 0?Tie(e,t,a,i):Sie(e,t,a,l)}function Tie(e,t,n,i){const r=(7+i-n)%7,a=Pw(e,t,n),l=Dp(a,6);function h(T){return(7+new Date(T,0,1).getDay()-n)%7}let s=U0(e);s<U0(l)&&h(s+1)<=r&&s++;const p=new Date(s,0,1),_=h(s),x=_<=r?Dp(p,-_):Dp(p,7-_);return 1+Dw(hP(e),j0(x),"weeks")}function Sie(e,t,n,i){const r=Dp(Pw(e,t,n),6);function a(_){const x=new Date(_,0,1);return 7-Dw(x,Pw(x,t,n),"days")}let l=U0(e);l<U0(r)&&a(l+1)>=i&&l++;const h=new Date(l,0,1),s=a(l),p=s>=i?Dp(h,s-7):Dp(h,s);return 1+Dw(hP(e),j0(p),"weeks")}function Eie(e){return e.getDate()}function Cie(e){return new Date(e.getFullYear(),e.getMonth()+1,1)}function kie(e){return new Date(e.getFullYear(),e.getMonth()-1,1)}function Iie(e){return e.getHours()}function Aie(e){return e.getMinutes()}function Pie(e){return new Date(e.getFullYear(),0,1)}function Mie(e){return new Date(e.getFullYear(),11,31)}function Die(e,t){return Mw(e,t[0])&&Oie(e,t[1])}function Lie(e){const t=new Date(e);return t instanceof Date&&!isNaN(t.getTime())}function Mw(e,t){return e.getTime()>t.getTime()}function Rie(e,t){return Mw(j0(e),j0(t))}function Oie(e,t){return e.getTime()<t.getTime()}function i4(e,t){return e.getTime()===t.getTime()}function Vie(e,t){return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}function Bie(e,t){return e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}function Fie(e,t){return e.getFullYear()===t.getFullYear()}function Dw(e,t,n){const i=new Date(e),r=new Date(t);switch(n){case"years":return i.getFullYear()-r.getFullYear();case"quarters":return Math.floor((i.getMonth()-r.getMonth()+(i.getFullYear()-r.getFullYear())*12)/4);case"months":return i.getMonth()-r.getMonth()+(i.getFullYear()-r.getFullYear())*12;case"weeks":return Math.floor((i.getTime()-r.getTime())/(1e3*60*60*24*7));case"days":return Math.floor((i.getTime()-r.getTime())/(1e3*60*60*24));case"hours":return Math.floor((i.getTime()-r.getTime())/(1e3*60*60));case"minutes":return Math.floor((i.getTime()-r.getTime())/(1e3*60));case"seconds":return Math.floor((i.getTime()-r.getTime())/1e3);default:return i.getTime()-r.getTime()}}function zie(e,t){const n=new Date(e);return n.setHours(t),n}function Nie(e,t){const n=new Date(e);return n.setMinutes(t),n}function $ie(e,t){const n=new Date(e);return n.setMonth(t),n}function Uie(e,t){const n=new Date(e);return n.setDate(t),n}function jie(e,t){const n=new Date(e);return n.setFullYear(t),n}function j0(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0,0)}function hP(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),23,59,59,999)}class Wie{constructor(t){this.locale=t.locale,this.formats=t.formats}date(t){return UN(t)}toJsDate(t){return t}toISO(t){return pie(this,t)}parseISO(t){return gie(t)}addMinutes(t,n){return vie(t,n)}addHours(t,n){return _ie(t,n)}addDays(t,n){return Dp(t,n)}addWeeks(t,n){return yie(t,n)}addMonths(t,n){return bie(t,n)}getWeekArray(t,n){const i=n!==void 0?Number(n):void 0;return cie(t,this.locale,i)}startOfWeek(t,n){const i=n!==void 0?Number(n):void 0;return Pw(t,this.locale,i)}endOfWeek(t){return uie(t,this.locale)}startOfMonth(t){return NN(t)}endOfMonth(t){return $N(t)}format(t,n){return mie(t,n,this.locale,this.formats)}isEqual(t,n){return i4(t,n)}isValid(t){return Lie(t)}isWithinRange(t,n){return Die(t,n)}isAfter(t,n){return Mw(t,n)}isAfterDay(t,n){return Rie(t,n)}isBefore(t,n){return!Mw(t,n)&&!i4(t,n)}isSameDay(t,n){return Vie(t,n)}isSameMonth(t,n){return Bie(t,n)}isSameYear(t,n){return Fie(t,n)}setMinutes(t,n){return Nie(t,n)}setHours(t,n){return zie(t,n)}setMonth(t,n){return $ie(t,n)}setDate(t,n){return Uie(t,n)}setYear(t,n){return jie(t,n)}getDiff(t,n,i){return Dw(t,n,i)}getWeekdays(t,n){const i=t!==void 0?Number(t):void 0;return fie(this.locale,i,n)}getYear(t){return U0(t)}getMonth(t){return xie(t)}getWeek(t,n,i){const r=n!==void 0?Number(n):void 0,a=i!==void 0?Number(i):void 0;return wie(t,this.locale,r,a)}getDate(t){return Eie(t)}getNextMonth(t){return Cie(t)}getPreviousMonth(t){return kie(t)}getHours(t){return Iie(t)}getMinutes(t){return Aie(t)}startOfDay(t){return j0(t)}endOfDay(t){return hP(t)}startOfYear(t){return Pie(t)}endOfYear(t){return Mie(t)}}const jN=Symbol.for("vuetify:date-options"),r4=Symbol.for("vuetify:date-adapter");function Hie(e,t){const n=za({adapter:Wie,locale:{af:"af-ZA",bg:"bg-BG",ca:"ca-ES",ckb:"",cs:"cs-CZ",de:"de-DE",el:"el-GR",en:"en-US",et:"et-EE",fa:"fa-IR",fi:"fi-FI",hr:"hr-HR",hu:"hu-HU",he:"he-IL",id:"id-ID",it:"it-IT",ja:"ja-JP",ko:"ko-KR",lv:"lv-LV",lt:"lt-LT",nl:"nl-NL",no:"no-NO",pl:"pl-PL",pt:"pt-PT",ro:"ro-RO",ru:"ru-RU",sk:"sk-SK",sl:"sl-SI",srCyrl:"sr-SP",srLatn:"sr-SP",sv:"sv-SE",th:"th-TH",tr:"tr-TR",az:"az-AZ",uk:"uk-UA",vi:"vi-VN",zhHans:"zh-CN",zhHant:"zh-TW"}},e);return{options:n,instance:HN(n,t)}}function Gie(e,t,n){const i=WN(e,t,n),r=[t];for(let a=1;a<i;a++){const l=e.addDays(t,a);r.push(l)}return n&&r.push(e.endOfDay(n)),r}function WN(e,t,n){const i=[`${e.toISO(n??t).split("T")[0]}T00:00:00Z`,`${e.toISO(t).split("T")[0]}T00:00:00Z`];return typeof e.date()=="string"?e.getDiff(i[0],i[1],"days"):e.getDiff(e.date(i[0]),e.date(i[1]),"days")}function HN(e,t){const n=so(typeof e.adapter=="function"?new e.adapter({locale:e.locale[t.current.value]??t.current.value,formats:e.formats}):e.adapter);return Yt(t.current,i=>{n.locale=e.locale[i]??i??n.locale}),n}function Db(){const e=Si(jN);if(!e)throw new Error("[Vuetify] Could not find injected date options");const t=fr();return HN(e,t)}const LT=["sm","md","lg","xl","xxl"],Bk=Symbol.for("vuetify:display"),s4={mobileBreakpoint:"lg",thresholds:{xs:0,sm:600,md:960,lg:1280,xl:1920,xxl:2560}},qie=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:s4;return za(s4,e)};function o4(e){return Xi&&!e?window.innerWidth:typeof e=="object"&&e.clientWidth||0}function a4(e){return Xi&&!e?window.innerHeight:typeof e=="object"&&e.clientHeight||0}function l4(e){const t=Xi&&!e?window.navigator.userAgent:"ssr";function n(A){return!!t.match(A)}const i=n(/android/i),r=n(/iphone|ipad|ipod/i),a=n(/cordova/i),l=n(/electron/i),h=n(/chrome/i),s=n(/edge/i),p=n(/firefox/i),_=n(/opera/i),x=n(/win/i),T=n(/mac/i),k=n(/linux/i);return{android:i,ios:r,cordova:a,electron:l,chrome:h,edge:s,firefox:p,opera:_,win:x,mac:T,linux:k,touch:ane,ssr:t==="ssr"}}function Kie(e,t){const{thresholds:n,mobileBreakpoint:i}=qie(e),r=tn(a4(t)),a=tn(l4(t)),l=so({}),h=tn(o4(t));function s(){r.value=a4(),h.value=o4()}function p(){s(),a.value=l4()}return jr(()=>{const _=h.value<n.sm,x=h.value<n.md&&!_,T=h.value<n.lg&&!(x||_),k=h.value<n.xl&&!(T||x||_),A=h.value<n.xxl&&!(k||T||x||_),M=h.value>=n.xxl,R=_?"xs":x?"sm":T?"md":k?"lg":A?"xl":"xxl",F=typeof i=="number"?i:n[i],z=h.value<F;l.xs=_,l.sm=x,l.md=T,l.lg=k,l.xl=A,l.xxl=M,l.smAndUp=!_,l.mdAndUp=!(_||x),l.lgAndUp=!(_||x||T),l.xlAndUp=!(_||x||T||k),l.smAndDown=!(T||k||A||M),l.mdAndDown=!(k||A||M),l.lgAndDown=!(A||M),l.xlAndDown=!M,l.name=R,l.height=r.value,l.width=h.value,l.mobile=z,l.mobileBreakpoint=i,l.platform=a.value,l.thresholds=n}),Xi&&(window.addEventListener("resize",s,{passive:!0}),ao(()=>{window.removeEventListener("resize",s)},!0)),{...f_(l),update:p,ssr:!!t}}const rg=lt({mobile:{type:Boolean,default:!1},mobileBreakpoint:[Number,String]},"display");function Bl(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{mobile:null},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:fd();const n=Si(Bk);if(!n)throw new Error("Could not find Vuetify display injection");const i=me(()=>e.mobile?!0:typeof e.mobileBreakpoint=="number"?n.width.value<e.mobileBreakpoint:e.mobileBreakpoint?n.width.value<n.thresholds.value[e.mobileBreakpoint]:e.mobile===null?n.mobile.value:!1),r=$e(()=>t?{[`${t}--mobile`]:i.value}:{});return{...n,displayClasses:r,mobile:i}}const GN=Symbol.for("vuetify:goto");function qN(){return{container:void 0,duration:300,layout:!1,offset:0,easing:"easeInOutCubic",patterns:Yne}}function Xie(e){return fP(e)??(document.scrollingElement||document.body)}function fP(e){return typeof e=="string"?document.querySelector(e):iP(e)}function sC(e,t,n){if(typeof e=="number")return t&&n?-e:e;let i=fP(e),r=0;for(;i;)r+=t?i.offsetLeft:i.offsetTop,i=i.offsetParent;return r}function Yie(e,t){return{rtl:t.isRtl,options:za(qN(),e)}}async function c4(e,t,n,i){const r=n?"scrollLeft":"scrollTop",a=za(i?.options??qN(),t),l=i?.rtl.value,h=(typeof e=="number"?e:fP(e))??0,s=a.container==="parent"&&h instanceof HTMLElement?h.parentElement:Xie(a.container),p=ld()?a.patterns.instant:typeof a.easing=="function"?a.easing:a.patterns[a.easing];if(!p)throw new TypeError(`Easing function "${a.easing}" not found.`);let _;if(typeof h=="number")_=sC(h,n,l);else if(_=sC(h,n,l)-sC(s,n,l),a.layout){const A=window.getComputedStyle(h).getPropertyValue("--v-layout-top");A&&(_-=parseInt(A,10))}_+=a.offset,_=Jie(s,_,!!l,!!n);const x=s[r]??0;if(_===x)return Promise.resolve(_);const T=performance.now();return new Promise(k=>requestAnimationFrame(function A(M){const F=(M-T)/a.duration,z=Math.floor(x+(_-x)*p(Cr(F,0,1)));if(s[r]=z,F>=1&&Math.abs(z-s[r])<10)return k(_);if(F>2)return k(s[r]);requestAnimationFrame(A)}))}function Zie(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=Si(GN),{isRtl:n}=qs();if(!t)throw new Error("[Vuetify] Could not find injected goto instance");const i={...t,rtl:$e(()=>t.rtl.value||n.value)};async function r(a,l){return c4(a,za(e,l),!1,i)}return r.horizontal=async(a,l)=>c4(a,za(e,l),!0,i),r}function Jie(e,t,n,i){const{scrollWidth:r,scrollHeight:a}=e,[l,h]=e===document.scrollingElement?[window.innerWidth,window.innerHeight]:[e.offsetWidth,e.offsetHeight];let s,p;return i?n?(s=-(r-l),p=0):(s=0,p=r-l):(s=0,p=a+-h),Cr(t,s,p)}const Qie={collapse:"mdi-chevron-up",complete:"mdi-check",cancel:"mdi-close-circle",close:"mdi-close",delete:"mdi-close-circle",clear:"mdi-close-circle",success:"mdi-check-circle",info:"mdi-information",warning:"mdi-alert-circle",error:"mdi-close-circle",prev:"mdi-chevron-left",next:"mdi-chevron-right",checkboxOn:"mdi-checkbox-marked",checkboxOff:"mdi-checkbox-blank-outline",checkboxIndeterminate:"mdi-minus-box",delimiter:"mdi-circle",sortAsc:"mdi-arrow-up",sortDesc:"mdi-arrow-down",expand:"mdi-chevron-down",menu:"mdi-menu",subgroup:"mdi-menu-down",dropdown:"mdi-menu-down",radioOn:"mdi-radiobox-marked",radioOff:"mdi-radiobox-blank",edit:"mdi-pencil",ratingEmpty:"mdi-star-outline",ratingFull:"mdi-star",ratingHalf:"mdi-star-half-full",loading:"mdi-cached",first:"mdi-page-first",last:"mdi-page-last",unfold:"mdi-unfold-more-horizontal",file:"mdi-paperclip",plus:"mdi-plus",minus:"mdi-minus",calendar:"mdi-calendar",treeviewCollapse:"mdi-menu-down",treeviewExpand:"mdi-menu-right",tableGroupCollapse:"mdi-chevron-down",tableGroupExpand:"mdi-chevron-right",eyeDropper:"mdi-eyedropper",upload:"mdi-cloud-upload",color:"mdi-palette",command:"mdi-apple-keyboard-command",ctrl:"mdi-apple-keyboard-control",space:"mdi-keyboard-space",shift:"mdi-apple-keyboard-shift",alt:"mdi-apple-keyboard-option",enter:"mdi-keyboard-return",arrowup:"mdi-arrow-up",arrowdown:"mdi-arrow-down",arrowleft:"mdi-arrow-left",arrowright:"mdi-arrow-right",backspace:"mdi-backspace",play:"mdi-play",pause:"mdi-pause",fullscreen:"mdi-fullscreen",fullscreenExit:"mdi-fullscreen-exit",volumeHigh:"mdi-volume-high",volumeMedium:"mdi-volume-medium",volumeLow:"mdi-volume-low",volumeOff:"mdi-volume-variant-off"},ere={component:e=>Sh(pP,{...e,class:"mdi"})},In=[String,Function,Object,Array],Fk=Symbol.for("vuetify:icons"),RT=lt({icon:{type:In},tag:{type:[String,Object,Function],required:!0}},"icon"),zk=Mt()({name:"VComponentIcon",props:RT(),setup(e,t){let{slots:n}=t;return()=>{const i=e.icon;return ce(e.tag,null,{default:()=>[e.icon?ce(i,null,null):n.default?.()]})}}}),mP=dc({name:"VSvgIcon",inheritAttrs:!1,props:RT(),setup(e,t){let{attrs:n}=t;return()=>ce(e.tag,At(n,{style:null}),{default:()=>[V("svg",{class:"v-icon__svg",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",role:"img","aria-hidden":"true"},[Array.isArray(e.icon)?e.icon.map(i=>Array.isArray(i)?V("path",{d:i[0],"fill-opacity":i[1]},null):V("path",{d:i},null)):V("path",{d:e.icon},null)])]})}}),tre=dc({name:"VLigatureIcon",props:RT(),setup(e){return()=>ce(e.tag,null,{default:()=>[e.icon]})}}),pP=dc({name:"VClassIcon",props:RT(),setup(e){return()=>ce(e.tag,{class:_t(e.icon)},null)}});function nre(){return{svg:{component:mP},class:{component:pP}}}function ire(e){const t=nre(),n=e?.defaultSet??"mdi";return n==="mdi"&&!t.mdi&&(t.mdi=ere),za({defaultSet:n,sets:t,aliases:{...Qie,vuetify:["M8.2241 14.2009L12 21L22 3H14.4459L8.2241 14.2009Z",["M7.26303 12.4733L7.00113 12L2 3H12.5261C12.5261 3 12.5261 3 12.5261 3L7.26303 12.4733Z",.6]],"vuetify-outline":"svg:M7.26 12.47 12.53 3H2L7.26 12.47ZM14.45 3 8.22 14.2 12 21 22 3H14.45ZM18.6 5 12 16.88 10.51 14.2 15.62 5ZM7.26 8.35 5.4 5H9.13L7.26 8.35Z","vuetify-play":["m6.376 13.184-4.11-7.192C1.505 4.66 2.467 3 4.003 3h8.532l-.953 1.576-.006.01-.396.677c-.429.732-.214 1.507.194 2.015.404.503 1.092.878 1.869.806a3.72 3.72 0 0 1 1.005.022c.276.053.434.143.523.237.138.146.38.635-.25 2.09-.893 1.63-1.553 1.722-1.847 1.677-.213-.033-.468-.158-.756-.406a4.95 4.95 0 0 1-.8-.927c-.39-.564-1.04-.84-1.66-.846-.625-.006-1.316.27-1.693.921l-.478.826-.911 1.506Z",["M9.093 11.552c.046-.079.144-.15.32-.148a.53.53 0 0 1 .43.207c.285.414.636.847 1.046 1.2.405.35.914.662 1.516.754 1.334.205 2.502-.698 3.48-2.495l.014-.028.013-.03c.687-1.574.774-2.852-.005-3.675-.37-.391-.861-.586-1.333-.676a5.243 5.243 0 0 0-1.447-.044c-.173.016-.393-.073-.54-.257-.145-.18-.127-.316-.082-.392l.393-.672L14.287 3h5.71c1.536 0 2.499 1.659 1.737 2.992l-7.997 13.996c-.768 1.344-2.706 1.344-3.473 0l-3.037-5.314 1.377-2.278.004-.006.004-.007.481-.831Z",.6]]}},e)}const rre=e=>{const t=Si(Fk);if(!t)throw new Error("Missing Vuetify Icons provide!");return{iconData:me(()=>{const i=Ua(e);if(!i)return{component:zk};let r=i;if(typeof r=="string"&&(r=r.trim(),r.startsWith("$")&&(r=t.aliases?.[r.slice(1)])),Array.isArray(r))return{component:mP,icon:r};if(typeof r!="string")return{component:zk,icon:r};const a=Object.keys(t.sets).find(s=>typeof r=="string"&&r.startsWith(`${s}:`)),l=a?r.slice(a.length+1):r;return{component:t.sets[a??t.defaultSet].component,icon:l}})}},W0=Symbol.for("vuetify:theme"),Mi=lt({theme:String},"theme");function u4(){return{defaultTheme:"light",prefix:"v-",variations:{colors:[],lighten:0,darken:0},themes:{light:{dark:!1,colors:{background:"#FFFFFF",surface:"#FFFFFF","surface-bright":"#FFFFFF","surface-light":"#EEEEEE","surface-variant":"#424242","on-surface-variant":"#EEEEEE",primary:"#1867C0","primary-darken-1":"#1F5592",secondary:"#48A9A6","secondary-darken-1":"#018786",error:"#B00020",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"},variables:{"border-color":"#000000","border-opacity":.12,"high-emphasis-opacity":.87,"medium-emphasis-opacity":.6,"disabled-opacity":.38,"idle-opacity":.04,"hover-opacity":.04,"focus-opacity":.12,"selected-opacity":.08,"activated-opacity":.12,"pressed-opacity":.12,"dragged-opacity":.08,"theme-kbd":"#EEEEEE","theme-on-kbd":"#000000","theme-code":"#F5F5F5","theme-on-code":"#000000"}},dark:{dark:!0,colors:{background:"#121212",surface:"#212121","surface-bright":"#ccbfd6","surface-light":"#424242","surface-variant":"#c8c8c8","on-surface-variant":"#000000",primary:"#2196F3","primary-darken-1":"#277CC1",secondary:"#54B6B2","secondary-darken-1":"#48A9A6",error:"#CF6679",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"},variables:{"border-color":"#FFFFFF","border-opacity":.12,"high-emphasis-opacity":1,"medium-emphasis-opacity":.7,"disabled-opacity":.5,"idle-opacity":.1,"hover-opacity":.04,"focus-opacity":.12,"selected-opacity":.08,"activated-opacity":.12,"pressed-opacity":.16,"dragged-opacity":.08,"theme-kbd":"#424242","theme-on-kbd":"#FFFFFF","theme-code":"#343434","theme-on-code":"#CCCCCC"}}},stylesheetId:"vuetify-theme-stylesheet",scoped:!1,unimportant:!1,utilities:!0}}function sre(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:u4();const t=u4();if(!e)return{...t,isDisabled:!0};const n={};for(const[i,r]of Object.entries(e.themes??{})){const a=r.dark||i==="dark"?t.themes?.dark:t.themes?.light;n[i]=za(a,r)}return za(t,{...e,themes:n})}function rp(e,t,n,i){e.push(`${cre(t,i)} {
`,...n.map(r=>`  ${r};
`),`}
`)}function d4(e,t){const n=e.dark?2:1,i=e.dark?1:2,r=[];for(const[a,l]of Object.entries(e.colors)){const h=sc(l);r.push(`--${t}theme-${a}: ${h.r},${h.g},${h.b}`),a.startsWith("on-")||r.push(`--${t}theme-${a}-overlay-multiplier: ${Vk(l)>.18?n:i}`)}for(const[a,l]of Object.entries(e.variables)){const h=typeof l=="string"&&l.startsWith("#")?sc(l):void 0,s=h?`${h.r}, ${h.g}, ${h.b}`:void 0;r.push(`--${t}${a}: ${s??l}`)}return r}function ore(e,t,n){const i={};if(n)for(const r of["lighten","darken"]){const a=r==="lighten"?Nne:$ne;for(const l of rc(n[r],1))i[`${e}-${r}-${l}`]=DN(a(sc(t),l))}return i}function are(e,t){if(!t)return{};let n={};for(const i of t.colors){const r=e[i];r&&(n={...n,...ore(i,r,t)})}return n}function lre(e){const t={};for(const n of Object.keys(e)){if(n.startsWith("on-")||e[`on-${n}`])continue;const i=`on-${n}`,r=sc(e[n]);t[i]=ON(r)}return t}function cre(e,t){if(!t)return e;const n=`:where(${t})`;return e===":root"?n:`${n} ${e}`}function ure(e,t,n){const i=dre(e,t);i&&(i.innerHTML=n)}function dre(e,t){if(!Xi)return null;let n=document.getElementById(e);return n||(n=document.createElement("style"),n.id=e,n.type="text/css",t&&n.setAttribute("nonce",t),document.head.appendChild(n)),n}function hre(e){const t=sre(e),n=tn(t.defaultTheme),i=tt(t.themes),r=tn("light"),a=me({get(){return n.value==="system"?r.value:n.value},set(F){n.value=F}}),l=me(()=>{const F={};for(const[z,G]of Object.entries(i.value)){const Y={...G.colors,...are(G.colors,t.variations)};F[z]={...G,colors:{...Y,...lre(Y)}}}return F}),h=$e(()=>l.value[a.value]),s=$e(()=>n.value==="system"),p=me(()=>{const F=[],z=t.unimportant?"":" !important",G=t.scoped?t.prefix:"";h.value?.dark&&rp(F,":root",["color-scheme: dark"],t.scope),rp(F,":root",d4(h.value,t.prefix),t.scope);for(const[Y,J]of Object.entries(l.value))rp(F,`.${t.prefix}theme--${Y}`,[`color-scheme: ${J.dark?"dark":"normal"}`,...d4(J,t.prefix)],t.scope);if(t.utilities){const Y=[],J=[],re=new Set(Object.values(l.value).flatMap(X=>Object.keys(X.colors)));for(const X of re)X.startsWith("on-")?rp(J,`.${X}`,[`color: rgb(var(--${t.prefix}theme-${X}))${z}`],t.scope):(rp(Y,`.${G}bg-${X}`,[`--${t.prefix}theme-overlay-multiplier: var(--${t.prefix}theme-${X}-overlay-multiplier)`,`background-color: rgb(var(--${t.prefix}theme-${X}))${z}`,`color: rgb(var(--${t.prefix}theme-on-${X}))${z}`],t.scope),rp(J,`.${G}text-${X}`,[`color: rgb(var(--${t.prefix}theme-${X}))${z}`],t.scope),rp(J,`.${G}border-${X}`,[`--${t.prefix}border-color: var(--${t.prefix}theme-${X})`],t.scope));F.push(...Y,...J)}return F.map((Y,J)=>J===0?Y:`    ${Y}`).join("")}),_=$e(()=>t.isDisabled?void 0:`${t.prefix}theme--${a.value}`),x=$e(()=>Object.keys(l.value));if(nP){let z=function(){r.value=F.matches?"dark":"light"};const F=window.matchMedia("(prefers-color-scheme: dark)");z(),F.addEventListener("change",z,{passive:!0}),xV()&&ao(()=>{F.removeEventListener("change",z)})}function T(F){if(t.isDisabled)return;const z=F._context.provides.usehead;if(z){let G=function(){return{style:[{textContent:p.value,id:t.stylesheetId,nonce:t.cspNonce||!1}]}};if(z.push){const Y=z.push(G);Xi&&Yt(p,()=>{Y.patch(G)})}else Xi?(z.addHeadObjs($e(G)),jr(()=>z.updateDOM())):z.addHeadObjs(G())}else{let G=function(){ure(t.stylesheetId,t.cspNonce,p.value)};Xi?Yt(p,G,{immediate:!0}):G()}}function k(F){F!=="system"&&!x.value.includes(F)||(a.value=F)}function A(){let F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:x.value;const z=F.indexOf(a.value),G=z===-1?0:(z+1)%F.length;k(F[G])}function M(){let F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["light","dark"];A(F)}const R=new Proxy(a,{get(F,z){return Reflect.get(F,z)},set(F,z,G){return z==="value"&&mN(`theme.global.name.value = ${G}`,`theme.change('${G}')`),Reflect.set(F,z,G)}});return{install:T,change:k,cycle:A,toggle:M,isDisabled:t.isDisabled,isSystem:s,name:a,themes:i,current:h,computedThemes:l,prefix:t.prefix,themeClasses:_,styles:p,global:{name:R,current:h}}}function Qi(e){ws("provideTheme");const t=Si(W0,null);if(!t)throw new Error("Could not find Vuetify theme injection");const n=$e(()=>e.theme??t.name.value),i=$e(()=>t.themes.value[n.value]),r=$e(()=>t.isDisabled?void 0:`${t.prefix}theme--${n.value}`),a={...t,name:n,current:i,themeClasses:r};return Rr(W0,a),a}function OT(){ws("useTheme");const e=Si(W0,null);if(!e)throw new Error("Could not find Vuetify theme injection");return e}function zc(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"content";const n=Cw(),i=tt();if(Xi){const r=new ResizeObserver(a=>{e?.(a,r),a.length&&(t==="content"?i.value=a[0].contentRect:i.value=a[0].target.getBoundingClientRect())});Ur(()=>{r.disconnect()}),Yt(()=>n.el,(a,l)=>{l&&(r.unobserve(l),i.value=void 0),a&&r.observe(a)},{flush:"post"})}return{resizeRef:n,contentRect:Vp(i)}}const H0=Symbol.for("vuetify:layout"),KN=Symbol.for("vuetify:layout-item"),h4=1e3,XN=lt({overlaps:{type:Array,default:()=>[]},fullHeight:Boolean},"layout"),sg=lt({name:{type:String},order:{type:[Number,String],default:0},absolute:Boolean},"layout-item");function YN(){const e=Si(H0);if(!e)throw new Error("[Vuetify] Could not find injected layout");return{getLayoutItem:e.getLayoutItem,mainRect:e.mainRect,mainStyles:e.mainStyles}}function og(e){const t=Si(H0);if(!t)throw new Error("[Vuetify] Could not find injected layout");const n=e.id??`layout-item-${ha()}`,i=ws("useLayoutItem");Rr(KN,{id:n});const r=tn(!1);tT(()=>r.value=!0),FI(()=>r.value=!1);const{layoutItemStyles:a,layoutItemScrimStyles:l}=t.register(i,{...e,active:me(()=>r.value?!1:e.active.value),id:n});return Ur(()=>t.unregister(n)),{layoutItemStyles:a,layoutRect:t.layoutRect,layoutItemScrimStyles:l}}const fre=(e,t,n,i)=>{let r={top:0,left:0,right:0,bottom:0};const a=[{id:"",layer:{...r}}];for(const l of e){const h=t.get(l),s=n.get(l),p=i.get(l);if(!h||!s||!p)continue;const _={...r,[h.value]:parseInt(r[h.value],10)+(p.value?parseInt(s.value,10):0)};a.push({id:l,layer:_}),r=_}return a};function ZN(e){const t=Si(H0,null),n=me(()=>t?t.rootZIndex.value-100:h4),i=tt([]),r=so(new Map),a=so(new Map),l=so(new Map),h=so(new Map),s=so(new Map),{resizeRef:p,contentRect:_}=zc(),x=me(()=>{const re=new Map,X=e.overlaps??[];for(const U of X.filter(H=>H.includes(":"))){const[H,W]=U.split(":");if(!i.value.includes(H)||!i.value.includes(W))continue;const ie=r.get(H),Q=r.get(W),te=a.get(H),ke=a.get(W);!ie||!Q||!te||!ke||(re.set(W,{position:ie.value,amount:parseInt(te.value,10)}),re.set(H,{position:Q.value,amount:-parseInt(ke.value,10)}))}return re}),T=me(()=>{const re=[...new Set([...l.values()].map(U=>U.value))].sort((U,H)=>U-H),X=[];for(const U of re){const H=i.value.filter(W=>l.get(W)?.value===U);X.push(...H)}return fre(X,r,a,h)}),k=me(()=>!Array.from(s.values()).some(re=>re.value)),A=me(()=>T.value[T.value.length-1].layer),M=$e(()=>({"--v-layout-left":pn(A.value.left),"--v-layout-right":pn(A.value.right),"--v-layout-top":pn(A.value.top),"--v-layout-bottom":pn(A.value.bottom),...k.value?void 0:{transition:"none"}})),R=me(()=>T.value.slice(1).map((re,X)=>{let{id:U}=re;const{layer:H}=T.value[X],W=a.get(U),ie=r.get(U);return{id:U,...H,size:Number(W.value),position:ie.value}})),F=re=>R.value.find(X=>X.id===re),z=ws("createLayout"),G=tn(!1);Mr(()=>{G.value=!0}),Rr(H0,{register:(re,X)=>{let{id:U,order:H,position:W,layoutSize:ie,elementSize:Q,active:te,disableTransitions:ke,absolute:Re}=X;l.set(U,H),r.set(U,W),a.set(U,ie),h.set(U,te),ke&&s.set(U,ke);const Je=bv(KN,z?.vnode).indexOf(re);Je>-1?i.value.splice(Je,0,U):i.value.push(U);const nt=me(()=>R.value.findIndex(it=>it.id===U)),De=me(()=>n.value+T.value.length*2-nt.value*2),Ge=me(()=>{const it=W.value==="left"||W.value==="right",ot=W.value==="right",mt=W.value==="bottom",Pt=Q.value??ie.value,$t=Pt===0?"%":"px",ct={[W.value]:0,zIndex:De.value,transform:`translate${it?"X":"Y"}(${(te.value?0:-(Pt===0?100:Pt))*(ot||mt?-1:1)}${$t})`,position:Re.value||n.value!==h4?"absolute":"fixed",...k.value?void 0:{transition:"none"}};if(!G.value)return ct;const ht=R.value[nt.value],Qe=x.value.get(U);return Qe&&(ht[Qe.position]+=Qe.amount),{...ct,height:it?`calc(100% - ${ht.top}px - ${ht.bottom}px)`:Q.value?`${Q.value}px`:void 0,left:ot?void 0:`${ht.left}px`,right:ot?`${ht.right}px`:void 0,top:W.value!=="bottom"?`${ht.top}px`:void 0,bottom:W.value!=="top"?`${ht.bottom}px`:void 0,width:it?Q.value?`${Q.value}px`:void 0:`calc(100% - ${ht.left}px - ${ht.right}px)`}}),Ee=me(()=>({zIndex:De.value-1}));return{layoutItemStyles:Ge,layoutItemScrimStyles:Ee,zIndex:De}},unregister:re=>{l.delete(re),r.delete(re),a.delete(re),h.delete(re),s.delete(re),i.value=i.value.filter(X=>X!==re)},mainRect:A,mainStyles:M,getLayoutItem:F,items:R,layoutRect:_,rootZIndex:n});const Y=$e(()=>["v-layout",{"v-layout--full-height":e.fullHeight}]),J=$e(()=>({zIndex:t?n.value:void 0,position:t?"relative":void 0,overflow:t?"hidden":void 0}));return{layoutClasses:Y,layoutStyles:J,getLayoutItem:F,items:R,layoutRect:_,layoutRef:p}}function JN(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{blueprint:t,...n}=e,i=za(t,n),{aliases:r={},components:a={},directives:l={}}=i,h=Fv();return h.run(()=>{const s=Wne(i.defaults),p=Kie(i.display,i.ssr),_=hre(i.theme),x=ire(i.icons),T=rie(i.locale),k=Hie(i.date,T),A=Yie(i.goTo,T);function M(F){for(const G in l)F.directive(G,l[G]);for(const G in a)F.component(G,a[G]);for(const G in r)F.component(G,dc({...r[G],name:G,aliasName:r[G].name}));const z=Fv();if(z.run(()=>{_.install(F)}),F.onUnmount(()=>z.stop()),F.provide(r_,s),F.provide(Bk,p),F.provide(W0,_),F.provide(Fk,x),F.provide(s_,T),F.provide(jN,k.options),F.provide(r4,k.instance),F.provide(GN,A),Xi&&i.ssr)if(F.$nuxt)F.$nuxt.hook("app:suspense:resolve",()=>{p.update()});else{const{mount:G}=F;F.mount=function(){const Y=G(...arguments);return Hn(()=>p.update()),F.mount=G,Y}}F.mixin({computed:{$vuetify(){return so({defaults:av.call(this,r_),display:av.call(this,Bk),theme:av.call(this,W0),icons:av.call(this,Fk),locale:av.call(this,s_),date:av.call(this,r4)})}}})}function R(){h.stop()}return{install:M,unmount:R,defaults:s,display:p,theme:_,icons:x,locale:T,date:k,goTo:A}})}const mre="3.10.8";JN.version=mre;function av(e){const t=this.$,n=t.parent?.provides??t.vnode.appContext?.provides;if(n&&e in n)return n[e]}const f4="route-animation-arrived",pre=950;function gre(){const e=tt(!1),t=tt(0),n=tt(0),i=tt(0),r=tt([]);let a=null,l=0,h=null;function s(R){h=R}function p(){h=null}function _(){a!=null&&(cancelAnimationFrame(a),a=null)}function x(){_(),t.value=0,n.value=0,e.value=!1,h?.(t.value)}function T(){if(r.value.length){if(_(),i.value=r.value.length,t.value=Math.min(t.value,i.value-1),n.value=0,h?.(t.value),r.value.length<=1){window.dispatchEvent(new CustomEvent(f4));return}e.value=!0,l=performance.now(),a=requestAnimationFrame(A)}}function k(){e.value=!1,_()}function A(R){if(!e.value)return;const F=R-l;for(l=R,n.value+=F/pre;n.value>=1&&e.value;)if(n.value-=1,t.value<Math.max(r.value.length-1,0))t.value+=1,h?.(t.value);else{M();return}a=requestAnimationFrame(A)}function M(){_(),e.value=!1,n.value=0,window.dispatchEvent(new CustomEvent(f4))}return{isPlaying:e,progressIndex:t,segmentProgress:n,totalStops:i,routeStationIds:r,startAnimation:T,pauseAnimation:k,resetAnimation:x,attachRenderer:s,detachRenderer:p}}const m4=new Set(["BPL","SWPL","SEPL","PEPLRT","PWLRT"]),yf=new Map;let p4=!1;function Qd(e,t){return`${e} (${t})`}function Ey(e,t,n=1){yf.has(e)||yf.set(e,[]),yf.has(t)||yf.set(t,[]),yf.get(e).push({to:t,weight:n}),yf.get(t).push({to:e,weight:n})}function vre(){if(p4)return;Object.entries(If).forEach(([t,n])=>{n.forEach((i,r)=>{const a=Qd(i,t);if(r>0&&Ey(a,Qd(n[r-1],t),1),r<n.length-1&&Ey(a,Qd(n[r+1],t),1),m4.has(t)&&r===n.length-1&&r>0){const l=Qd(n[1],t);Ey(a,l,1)}if(m4.has(t)&&r===1&&n.length>2){const l=Qd(n[n.length-1],t);Ey(a,l,1)}})});const e=new Map;Object.entries(If).forEach(([t,n])=>{n.forEach(i=>{e.has(i)||e.set(i,[]),e.get(i).push(t)})}),e.forEach((t,n)=>{if(!(t.length<2))for(let i=0;i<t.length;i+=1)for(let r=i+1;r<t.length;r+=1)Ey(Qd(n,t[i]),Qd(n,t[r]),.5)}),p4=!0}function _re(e,t){if(!e||!t)return null;vre();const n=Object.keys(If).filter(T=>If[T].includes(e)).map(T=>Qd(e,T)),i=Object.keys(If).filter(T=>If[T].includes(t)).map(T=>Qd(t,T));if(!n.length||!i.length)return null;const r=new Map,a=new Map,l=[];function h(T,k){l.push({node:T,distance:k}),l.sort((A,M)=>A.distance-M.distance)}yf.forEach((T,k)=>r.set(k,1/0)),n.forEach(T=>{r.set(T,0),h(T,0)});const s=new Set(i);let p=null;for(;l.length;){const{node:T,distance:k}=l.shift();if(k!==r.get(T))continue;if(s.has(T)){p=T;break}(yf.get(T)||[]).forEach(({to:M,weight:R})=>{const F=k+R;F<r.get(M)&&(r.set(M,F),a.set(M,T),h(M,F))})}if(!p)return null;const _=[];let x=p;for(;x;){const T=x.match(/^(.*) \((.*)\)$/);_.unshift({station:T?T[1]:x,line:T?T[2]:"?"}),x=a.get(x)}return{steps:_,totalWeight:r.get(p)}}function yre(e){const t=Math.max(0,Math.round(e)),n=Math.max(0,Math.round((e-t)*2));return Math.round(t*2.2+n*4+3)}function bre(e){const t=Math.max(0,Math.round(e)),n=Math.round((e-t)*2);return Number((t*1.1+n*.3).toFixed(1))}function xre(e,t){const n=If[e.line]||[],i=n.indexOf(e.station),r=n.indexOf(t.station);return Math.abs(r-i)}function wre(e){if(!e?.steps?.length)return[];const t=[];let n=0;for(;n<e.steps.length-1;){const i=e.steps[n];let r=n+1;for(;r<e.steps.length&&e.steps[r].line===i.line;)r+=1;const a=e.steps[r-1];t.push({line:i.line,from:i.station,to:a.station,stops:xre(i,a)}),n=r}return t}function gP(){return{allStations:$6,shortestPath:_re,estimateTimeMinutes:yre,estimateDistanceKm:bre,summariseSegments:wre}}const Tre=[{max:3.2,fare:1.19},{max:4.2,fare:1.29},{max:5.2,fare:1.4},{max:6.2,fare:1.5},{max:7.2,fare:1.59},{max:8.2,fare:1.66},{max:9.2,fare:1.73},{max:10.2,fare:1.77},{max:11.2,fare:1.81},{max:12.2,fare:1.85},{max:13.2,fare:1.89},{max:14.2,fare:1.93},{max:15.2,fare:1.98},{max:16.2,fare:2.02},{max:17.2,fare:2.06},{max:18.2,fare:2.1},{max:19.2,fare:2.14},{max:20.2,fare:2.17},{max:21.2,fare:2.2},{max:22.2,fare:2.23},{max:23.2,fare:2.26},{max:24.2,fare:2.28},{max:25.2,fare:2.3},{max:26.2,fare:2.32},{max:27.2,fare:2.33},{max:28.2,fare:2.34},{max:29.2,fare:2.35},{max:30.2,fare:2.36},{max:31.2,fare:2.37},{max:32.2,fare:2.38},{max:33.2,fare:2.39},{max:34.2,fare:2.4},{max:35.2,fare:2.41},{max:36.2,fare:2.42},{max:37.2,fare:2.43},{max:38.2,fare:2.44},{max:39.2,fare:2.45},{max:40.2,fare:2.46},{max:1/0,fare:2.47}],Sre=[{max:3.2,fare:.52},{max:4.2,fare:.57},{max:5.2,fare:.63},{max:6.2,fare:.68},{max:7.2,fare:.71},{max:1/0,fare:.74}],Ere=[{max:3.2,fare:.69},{max:4.2,fare:.76},{max:5.2,fare:.84},{max:6.2,fare:.91},{max:7.2,fare:.97},{max:1/0,fare:1.03}],Cre=[{max:3.2,fare:.78},{max:4.2,fare:.86},{max:5.2,fare:.95},{max:6.2,fare:1.03},{max:7.2,fare:1.1},{max:8.2,fare:1.16},{max:9.2,fare:1.22},{max:10.2,fare:1.25},{max:11.2,fare:1.28},{max:12.2,fare:1.31},{max:13.2,fare:1.34},{max:14.2,fare:1.37},{max:15.2,fare:1.4},{max:16.2,fare:1.43},{max:17.2,fare:1.46},{max:18.2,fare:1.49},{max:19.2,fare:1.52},{max:20.2,fare:1.55},{max:21.2,fare:1.58},{max:22.2,fare:1.61},{max:23.2,fare:1.64},{max:24.2,fare:1.66},{max:25.2,fare:1.67},{max:26.2,fare:1.68},{max:27.2,fare:1.69},{max:28.2,fare:1.7},{max:29.2,fare:1.71},{max:30.2,fare:1.72},{max:31.2,fare:1.73},{max:32.2,fare:1.74},{max:33.2,fare:1.75},{max:34.2,fare:1.76},{max:35.2,fare:1.77},{max:36.2,fare:1.78},{max:37.2,fare:1.79},{max:38.2,fare:1.8},{max:39.2,fare:1.81},{max:40.2,fare:1.82},{max:1/0,fare:1.83}],g4={train:{primary:21,secondary:26.5,polytechnic:26.5,university:48,ns:48,senior:58,disability:58,workfare:96,adult:128},bus:{primary:24,secondary:29,polytechnic:29,university:55.5,ns:55.5,senior:58,disability:58,workfare:96,adult:128},hybrid:{primary:39,secondary:49,polytechnic:49,university:81,ns:81,senior:58,disability:58,workfare:96,adult:128}};function kre(e){switch(e){case"primary":case"secondary":case"polytechnic":return Sre;case"senior":case"disability":return Ere;case"workfare":return Cre;case"university":case"ns":case"adult":default:return Tre}}function QN(e,t){const n=kre(t);for(const i of n)if(e<=i.max)return i.fare;return n[n.length-1].fare}function Ire({distanceKm:e,type:t,dailyTrips:n,workingDays:i}){const r=QN(e,t),a=r*n*i,h=["train","bus","hybrid"].map(s=>{const p=g4[s][t]??g4[s].adult,_=a-p;return{mode:s,passPrice:p,savings:_,worth:_>0}});return{singleFare:r,monthlyTotal:a,breakdown:h}}function e2(){return{fareByType:QN,analyseMonthlyPass:Ire}}const t2=Ih("v-alert-title"),cl=lt({border:[Boolean,Number,String]},"border");function Fl(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:fd();return{borderClasses:me(()=>{const i=e.border;return i===!0||i===""?`${t}--border`:typeof i=="string"||i===0?String(i).split(" ").map(r=>`border-${r}`):[]})}}const Are=[null,"default","comfortable","compact"],Ts=lt({density:{type:String,default:"default",validator:e=>Are.includes(e)}},"density");function qa(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:fd();return{densityClasses:$e(()=>`${t}--density-${e.density}`)}}const Ks=lt({elevation:{type:[Number,String],validator(e){const t=parseInt(e);return!isNaN(t)&&t>=0&&t<=24}}},"elevation");function wo(e){return{elevationClasses:$e(()=>{const n=Vs(e)?e.value:e.elevation;return n==null?[]:[`elevation-${n}`]})}}const Wr=lt({rounded:{type:[Boolean,Number,String],default:void 0},tile:Boolean},"rounded");function ns(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:fd();return{roundedClasses:me(()=>{const i=Vs(e)?e.value:e.rounded,r=Vs(e)?!1:e.tile,a=[];if(r||i===!1)a.push("rounded-0");else if(i===!0||i==="")a.push(`${t}--rounded`);else if(typeof i=="string"||i===0)for(const l of String(i).split(" "))a.push(`rounded-${l}`);return a})}}const ti=lt({tag:{type:[String,Object,Function],default:"div"}},"tag");function vP(e){return sP(()=>{const{class:t,style:n}=Pre(e);return{colorClasses:t,colorStyles:n}})}function Uo(e){const{colorClasses:t,colorStyles:n}=vP(()=>({text:Ua(e)}));return{textColorClasses:t,textColorStyles:n}}function ir(e){const{colorClasses:t,colorStyles:n}=vP(()=>({background:Ua(e)}));return{backgroundColorClasses:t,backgroundColorStyles:n}}function Pre(e){const t=Ua(e),n=[],i={};if(t.background)if(Rk(t.background)){if(i.backgroundColor=t.background,!t.text&&Vne(t.background)){const r=sc(t.background);if(r.a==null||r.a===1){const a=ON(r);i.color=a,i.caretColor=a}}}else n.push(`bg-${t.background}`);return t.text&&(Rk(t.text)?(i.color=t.text,i.caretColor=t.text):n.push(`text-${t.text}`)),{class:n,style:i}}const Mre=["elevated","flat","tonal","outlined","text","plain"];function hm(e,t){return V(an,null,[e&&V("span",{key:"overlay",class:_t(`${t}__overlay`)},null),V("span",{key:"underlay",class:_t(`${t}__underlay`)},null)])}const Nc=lt({color:String,variant:{type:String,default:"elevated",validator:e=>Mre.includes(e)}},"variant");function ag(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:fd();const n=$e(()=>{const{variant:a}=Ua(e);return`${t}--variant-${a}`}),{colorClasses:i,colorStyles:r}=vP(()=>{const{variant:a,color:l}=Ua(e);return{[["elevated","flat"].includes(a)?"background":"text"]:l}});return{colorClasses:i,colorStyles:r,variantClasses:n}}const n2=lt({baseColor:String,divided:Boolean,direction:{type:String,default:"horizontal"},...cl(),...Tn(),...Ts(),...Ks(),...Wr(),...ti(),...Mi(),...Nc()},"VBtnGroup"),Nk=Mt()({name:"VBtnGroup",props:n2(),setup(e,t){let{slots:n}=t;const{themeClasses:i}=Qi(e),{densityClasses:r}=qa(e),{borderClasses:a}=Fl(e),{elevationClasses:l}=wo(e),{roundedClasses:h}=ns(e);ts({VBtn:{height:$e(()=>e.direction==="horizontal"?"auto":null),baseColor:$e(()=>e.baseColor),color:$e(()=>e.color),density:$e(()=>e.density),flat:!0,variant:$e(()=>e.variant)}}),zt(()=>ce(e.tag,{class:_t(["v-btn-group",`v-btn-group--${e.direction}`,{"v-btn-group--divided":e.divided},i.value,a.value,r.value,l.value,h.value,e.class]),style:Xt(e.style)},n))}}),lg=lt({modelValue:{type:null,default:void 0},multiple:Boolean,mandatory:[Boolean,String],max:Number,selectedClass:String,disabled:Boolean},"group"),cg=lt({value:null,disabled:Boolean,selectedClass:String},"group-item");function nm(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const i=ws("useGroupItem");if(!i)throw new Error("[Vuetify] useGroupItem composable must be used inside a component setup function");const r=ha();Rr(Symbol.for(`${t.description}:id`),r);const a=Si(t,null);if(!a){if(!n)return a;throw new Error(`[Vuetify] Could not find useGroup injection with symbol ${t.description}`)}const l=$e(()=>e.value),h=me(()=>!!(a.disabled.value||e.disabled));function s(){a?.register({id:r,value:l,disabled:h},i)}function p(){a?.unregister(r)}s(),Ur(()=>p());const _=me(()=>a.isSelected(r)),x=me(()=>a.items.value[0].id===r),T=me(()=>a.items.value[a.items.value.length-1].id===r),k=me(()=>_.value&&[a.selectedClass.value,e.selectedClass]);return Yt(_,A=>{i.emit("group:selected",{value:A})},{flush:"sync"}),{id:r,isSelected:_,isFirst:x,isLast:T,toggle:()=>a.select(r,!_.value),select:A=>a.select(r,A),selectedClass:k,value:l,disabled:h,group:a,register:s,unregister:p}}function fm(e,t){let n=!1;const i=so([]),r=Pn(e,"modelValue",[],T=>T===void 0?[]:i2(i,T===null?[null]:Xr(T)),T=>{const k=Lre(i,T);return e.multiple?k:k[0]}),a=ws("useGroup");function l(T,k){const A=T,M=Symbol.for(`${t.description}:id`),F=bv(M,a?.vnode).indexOf(k);bi(A.value)===void 0&&(A.value=F,A.useIndexAsValue=!0),F>-1?i.splice(F,0,A):i.push(A)}function h(T){if(n)return;s();const k=i.findIndex(A=>A.id===T);i.splice(k,1)}function s(){const T=i.find(k=>!k.disabled);T&&e.mandatory==="force"&&!r.value.length&&(r.value=[T.id])}Mr(()=>{s()}),Ur(()=>{n=!0}),iT(()=>{for(let T=0;T<i.length;T++)i[T].useIndexAsValue&&(i[T].value=T)});function p(T,k){const A=i.find(M=>M.id===T);if(!(k&&A?.disabled))if(e.multiple){const M=r.value.slice(),R=M.findIndex(z=>z===T),F=~R;if(k=k??!F,F&&e.mandatory&&M.length<=1||!F&&e.max!=null&&M.length+1>e.max)return;R<0&&k?M.push(T):R>=0&&!k&&M.splice(R,1),r.value=M}else{const M=r.value.includes(T);if(e.mandatory&&M||!M&&!k)return;r.value=k??!M?[T]:[]}}function _(T){if(e.multiple,r.value.length){const k=r.value[0],A=i.findIndex(F=>F.id===k);let M=(A+T)%i.length,R=i[M];for(;R.disabled&&M!==A;)M=(M+T)%i.length,R=i[M];if(R.disabled)return;r.value=[i[M].id]}else{const k=i.find(A=>!A.disabled);k&&(r.value=[k.id])}}const x={register:l,unregister:h,selected:r,select:p,disabled:$e(()=>e.disabled),prev:()=>_(i.length-1),next:()=>_(1),isSelected:T=>r.value.includes(T),selectedClass:$e(()=>e.selectedClass),items:$e(()=>i),getItemIndex:T=>Dre(i,T)};return Rr(t,x),x}function Dre(e,t){const n=i2(e,[t]);return n.length?e.findIndex(i=>i.id===n[0]):-1}function i2(e,t){const n=[];return t.forEach(i=>{const r=e.find(l=>bo(i,l.value)),a=e[i];r?.value!==void 0?n.push(r.id):a?.useIndexAsValue&&n.push(a.id)}),n}function Lre(e,t){const n=[];return t.forEach(i=>{const r=e.findIndex(a=>a.id===i);if(~r){const a=e[r];n.push(a.value!==void 0?a.value:r)}}),n}const _P=Symbol.for("vuetify:v-btn-toggle"),Rre=lt({...n2(),...lg()},"VBtnToggle"),Ore=Mt()({name:"VBtnToggle",props:Rre(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{isSelected:i,next:r,prev:a,select:l,selected:h}=fm(e,_P);return zt(()=>{const s=Nk.filterProps(e);return ce(Nk,At({class:["v-btn-toggle",e.class]},s,{style:e.style}),{default:()=>[n.default?.({isSelected:i,next:r,prev:a,select:l,selected:h})]})}),{next:r,prev:a,select:l}}}),Vre=lt({defaults:Object,disabled:Boolean,reset:[Number,String],root:[Boolean,String],scoped:Boolean},"VDefaultsProvider"),ui=Mt(!1)({name:"VDefaultsProvider",props:Vre(),setup(e,t){let{slots:n}=t;const{defaults:i,disabled:r,reset:a,root:l,scoped:h}=f_(e);return ts(i,{reset:a,root:l,scoped:h,disabled:r}),()=>n.default?.()}}),Bre=["x-small","small","default","large","x-large"],md=lt({size:{type:[String,Number],default:"default"}},"size");function w_(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:fd();return sP(()=>{const n=e.size;let i,r;return Ew(Bre,n)?i=`${t}--size-${n}`:n&&(r={width:pn(n),height:pn(n)}),{sizeClasses:i,sizeStyles:r}})}const Fre=lt({color:String,disabled:Boolean,start:Boolean,end:Boolean,icon:In,opacity:[String,Number],...Tn(),...md(),...ti({tag:"i"}),...Mi()},"VIcon"),Pi=Mt()({name:"VIcon",props:Fre(),setup(e,t){let{attrs:n,slots:i}=t;const r=tn(),{themeClasses:a}=OT(),{iconData:l}=rre(()=>r.value||e.icon),{sizeClasses:h}=w_(e),{textColorClasses:s,textColorStyles:p}=Uo(()=>e.color);return zt(()=>{const _=i.default?.();_&&(r.value=bN(_).filter(T=>T.type===hb&&T.children&&typeof T.children=="string")[0]?.children);const x=!!(n.onClick||n.onClickOnce);return ce(l.value.component,{tag:e.tag,icon:l.value.icon,class:_t(["v-icon","notranslate",a.value,h.value,s.value,{"v-icon--clickable":x,"v-icon--disabled":e.disabled,"v-icon--start":e.start,"v-icon--end":e.end},e.class]),style:Xt([{"--v-icon-opacity":e.opacity},h.value?void 0:{fontSize:pn(e.size),height:pn(e.size),width:pn(e.size)},p.value,e.style]),role:x?"button":void 0,"aria-hidden":!x,tabindex:x?e.disabled?-1:0:void 0},{default:()=>[_]})}),{}}});function Lb(e,t){const n=tt(),i=tn(!1);if(tP){const r=new IntersectionObserver(a=>{i.value=!!a.find(l=>l.isIntersecting)},t);ao(()=>{r.disconnect()}),Yt(n,(a,l)=>{l&&(r.unobserve(l),i.value=!1),a&&r.observe(a)},{flush:"post"})}return{intersectionRef:n,isIntersecting:i}}const zre=lt({bgColor:String,color:String,indeterminate:[Boolean,String],modelValue:{type:[Number,String],default:0},rotate:{type:[Number,String],default:0},width:{type:[Number,String],default:4},...Tn(),...md(),...ti({tag:"div"}),...Mi()},"VProgressCircular"),Hp=Mt()({name:"VProgressCircular",props:zre(),setup(e,t){let{slots:n}=t;const i=20,r=2*Math.PI*i,a=tt(),{themeClasses:l}=Qi(e),{sizeClasses:h,sizeStyles:s}=w_(e),{textColorClasses:p,textColorStyles:_}=Uo(()=>e.color),{textColorClasses:x,textColorStyles:T}=Uo(()=>e.bgColor),{intersectionRef:k,isIntersecting:A}=Lb(),{resizeRef:M,contentRect:R}=zc(),F=$e(()=>Cr(parseFloat(e.modelValue),0,100)),z=$e(()=>Number(e.width)),G=$e(()=>s.value?Number(e.size):R.value?R.value.width:Math.max(z.value,32)),Y=$e(()=>i/(1-z.value/G.value)*2),J=$e(()=>z.value/G.value*Y.value),re=$e(()=>pn((100-F.value)/100*r));return jr(()=>{k.value=a.value,M.value=a.value}),zt(()=>ce(e.tag,{ref:a,class:_t(["v-progress-circular",{"v-progress-circular--indeterminate":!!e.indeterminate,"v-progress-circular--visible":A.value,"v-progress-circular--disable-shrink":e.indeterminate&&(e.indeterminate==="disable-shrink"||ld())},l.value,h.value,p.value,e.class]),style:Xt([s.value,_.value,e.style]),role:"progressbar","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":e.indeterminate?void 0:F.value},{default:()=>[V("svg",{style:{transform:`rotate(calc(-90deg + ${Number(e.rotate)}deg))`},xmlns:"http://www.w3.org/2000/svg",viewBox:`0 0 ${Y.value} ${Y.value}`},[V("circle",{class:_t(["v-progress-circular__underlay",x.value]),style:Xt(T.value),fill:"transparent",cx:"50%",cy:"50%",r:i,"stroke-width":J.value,"stroke-dasharray":r,"stroke-dashoffset":0},null),V("circle",{class:"v-progress-circular__overlay",fill:"transparent",cx:"50%",cy:"50%",r:i,"stroke-width":J.value,"stroke-dasharray":r,"stroke-dashoffset":re.value},null)]),n.default&&V("div",{class:"v-progress-circular__content"},[n.default({value:F.value})])]})),{}}}),Bs=lt({height:[Number,String],maxHeight:[Number,String],maxWidth:[Number,String],minHeight:[Number,String],minWidth:[Number,String],width:[Number,String]},"dimension");function Fs(e){return{dimensionStyles:me(()=>{const n={},i=pn(e.height),r=pn(e.maxHeight),a=pn(e.maxWidth),l=pn(e.minHeight),h=pn(e.minWidth),s=pn(e.width);return i!=null&&(n.height=i),r!=null&&(n.maxHeight=r),a!=null&&(n.maxWidth=a),l!=null&&(n.minHeight=l),h!=null&&(n.minWidth=h),s!=null&&(n.width=s),n})}}const v4={center:"center",top:"bottom",bottom:"top",left:"right",right:"left"},Ah=lt({location:String},"location");function ug(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2?arguments[2]:void 0;const{isRtl:i}=qs();return{locationStyles:me(()=>{if(!e.location)return{};const{side:a,align:l}=Dk(e.location.split(" ").length>1?e.location:`${e.location} center`,i.value);function h(p){return n?n(p):0}const s={};return a!=="center"&&(t?s[v4[a]]=`calc(100% - ${h(a)}px)`:s[a]=0),l!=="center"?t?s[v4[l]]=`calc(100% - ${h(l)}px)`:s[l]=0:(a==="center"?s.top=s.left="50%":s[{top:"left",bottom:"left",left:"top",right:"top"}[a]]="50%",s.transform={top:"translateX(-50%)",bottom:"translateX(-50%)",left:"translateY(-50%)",right:"translateY(-50%)",center:"translate(-50%, -50%)"}[a]),s})}}const Nre=lt({chunkCount:{type:[Number,String],default:null},chunkWidth:{type:[Number,String],default:null},chunkGap:{type:[Number,String],default:4}},"chunks");function $re(e,t){const n=$e(()=>!!e.chunkCount||!!e.chunkWidth),i=me(()=>{const h=Ua(t);if(!h)return 0;if(!e.chunkCount)return Number(e.chunkWidth);const s=Number(e.chunkCount);return(h-Number(e.chunkGap)*(s-1))/s}),r=$e(()=>Number(e.chunkGap)),a=me(()=>{if(!n.value)return{};const h=pn(r.value),s=pn(i.value);return{maskRepeat:"repeat-x",maskImage:`linear-gradient(90deg, #000, #000 ${s}, transparent ${s}, transparent)`,maskSize:`calc(${s} + ${h}) 100%`}});function l(h){const s=Ua(t);if(!s)return h;const p=100*r.value/s,_=100*(i.value+r.value)/s,x=Math.floor((h+p)/_);return Cr(0,x*_-p/2,100)}return{hasChunks:n,chunksMaskStyles:a,snapValueToChunk:l}}const Ure=lt({absolute:Boolean,active:{type:Boolean,default:!0},bgColor:String,bgOpacity:[Number,String],bufferValue:{type:[Number,String],default:0},bufferColor:String,bufferOpacity:[Number,String],clickable:Boolean,color:String,height:{type:[Number,String],default:4},indeterminate:Boolean,max:{type:[Number,String],default:100},modelValue:{type:[Number,String],default:0},opacity:[Number,String],reverse:Boolean,stream:Boolean,striped:Boolean,roundedBar:Boolean,...Nre(),...Tn(),...Ah({location:"top"}),...Wr(),...ti(),...Mi()},"VProgressLinear"),Rb=Mt()({name:"VProgressLinear",props:Ure(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const i=tt(),r=Pn(e,"modelValue"),{isRtl:a,rtlClasses:l}=qs(),{themeClasses:h}=Qi(e),{locationStyles:s}=ug(e),{textColorClasses:p,textColorStyles:_}=Uo(()=>e.color),{backgroundColorClasses:x,backgroundColorStyles:T}=ir(()=>e.bgColor||e.color),{backgroundColorClasses:k,backgroundColorStyles:A}=ir(()=>e.bufferColor||e.bgColor||e.color),{backgroundColorClasses:M,backgroundColorStyles:R}=ir(()=>e.color),{roundedClasses:F}=ns(e),{intersectionRef:z,isIntersecting:G}=Lb(),Y=me(()=>parseFloat(e.max)),J=me(()=>parseFloat(e.height)),re=me(()=>Cr(parseFloat(e.bufferValue)/Y.value*100,0,100)),X=me(()=>Cr(parseFloat(r.value)/Y.value*100,0,100)),U=me(()=>a.value!==e.reverse),H=me(()=>e.indeterminate?"fade-transition":"slide-x-transition"),W=tn(0),{hasChunks:ie,chunksMaskStyles:Q,snapValueToChunk:te}=$re(e,W);ca(ie,()=>{const{resizeRef:Je}=zc(nt=>W.value=nt[0].contentRect.width);jr(()=>Je.value=i.value)});const ke=me(()=>ie.value?te(re.value):re.value),Re=me(()=>ie.value?te(X.value):X.value);function Be(Je){if(!z.value)return;const{left:nt,right:De,width:Ge}=z.value.getBoundingClientRect(),Ee=U.value?Ge-Je.clientX+(De-Ge):Je.clientX-nt;r.value=Math.round(Ee/Ge*Y.value)}return jr(()=>{z.value=i.value}),zt(()=>ce(e.tag,{ref:i,class:_t(["v-progress-linear",{"v-progress-linear--absolute":e.absolute,"v-progress-linear--active":e.active&&G.value,"v-progress-linear--reverse":U.value,"v-progress-linear--rounded":e.rounded,"v-progress-linear--rounded-bar":e.roundedBar,"v-progress-linear--striped":e.striped,"v-progress-linear--clickable":e.clickable},F.value,h.value,l.value,e.class]),style:Xt([{bottom:e.location==="bottom"?0:void 0,top:e.location==="top"?0:void 0,height:e.active?pn(J.value):0,"--v-progress-linear-height":pn(J.value),...e.absolute?s.value:{}},Q.value,e.style]),role:"progressbar","aria-hidden":e.active?"false":"true","aria-valuemin":"0","aria-valuemax":e.max,"aria-valuenow":e.indeterminate?void 0:Math.min(parseFloat(r.value),Y.value),onClick:e.clickable&&Be},{default:()=>[e.stream&&V("div",{key:"stream",class:_t(["v-progress-linear__stream",p.value]),style:{..._.value,[U.value?"left":"right"]:pn(-J.value),borderTop:`${pn(J.value/2)} dotted`,opacity:parseFloat(e.bufferOpacity),top:`calc(50% - ${pn(J.value/4)})`,width:pn(100-re.value,"%"),"--v-progress-linear-stream-to":pn(J.value*(U.value?1:-1))}},null),V("div",{class:_t(["v-progress-linear__background",x.value]),style:Xt([T.value,{opacity:parseFloat(e.bgOpacity),width:e.stream?0:void 0}])},null),V("div",{class:_t(["v-progress-linear__buffer",k.value]),style:Xt([A.value,{opacity:parseFloat(e.bufferOpacity),width:pn(ke.value,"%")}])},null),ce(Rl,{name:H.value},{default:()=>[e.indeterminate?V("div",{class:"v-progress-linear__indeterminate"},[["long","short"].map(Je=>V("div",{key:Je,class:_t(["v-progress-linear__indeterminate",Je,M.value]),style:Xt(R.value)},null))]):V("div",{class:_t(["v-progress-linear__determinate",M.value]),style:Xt([R.value,{width:pn(Re.value,"%")}])},null)]}),n.default&&V("div",{class:"v-progress-linear__content"},[n.default({value:X.value,buffer:re.value})])]})),{}}}),VT=lt({loading:[Boolean,String]},"loader");function Ob(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:fd();return{loaderClasses:$e(()=>({[`${t}--loading`]:e.loading}))}}function Vb(e,t){let{slots:n}=t;return V("div",{class:_t(`${e.name}__loader`)},[n.default?.({color:e.color,isActive:e.active})||ce(Rb,{absolute:e.absolute,active:e.active,color:e.color,height:"2",indeterminate:!0},null)])}const jre=["static","relative","fixed","absolute","sticky"],T_=lt({position:{type:String,validator:e=>jre.includes(e)}},"position");function S_(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:fd();return{positionClasses:$e(()=>e.position?`${t}--${e.position}`:void 0)}}function Wre(){const e=ws("useRoute");return me(()=>e?.proxy?.$route)}function r2(){return ws("useRouter")?.proxy?.$router}function Bb(e,t){const n=oB("RouterLink"),i=$e(()=>!!(e.href||e.to)),r=me(()=>i?.value||V5(t,"click")||V5(e,"click"));if(typeof n=="string"||!("useLink"in n)){const x=$e(()=>e.href);return{isLink:i,isRouterLink:$e(()=>!1),isClickable:r,href:x,linkProps:so({href:x})}}const a=n.useLink({to:$e(()=>e.to||""),replace:$e(()=>e.replace)}),l=me(()=>e.to?a:void 0),h=Wre(),s=me(()=>l.value?e.exact?h.value?l.value.isExactActive?.value&&bo(l.value.route.value.query,h.value.query):l.value.isExactActive?.value??!1:l.value.isActive?.value??!1:!1),p=me(()=>e.to?l.value?.route.value.href:e.href),_=$e(()=>!!e.to);return{isLink:i,isRouterLink:_,isClickable:r,isActive:s,route:l.value?.route,navigate:l.value?.navigate,href:p,linkProps:so({href:p,"aria-current":$e(()=>s.value?"page":void 0),"aria-disabled":$e(()=>e.disabled&&i.value?"true":void 0),tabindex:$e(()=>e.disabled&&i.value?"-1":void 0)})}}const Fb=lt({href:String,replace:Boolean,to:[String,Object],exact:Boolean},"router");let oC=!1;function Hre(e,t){let n=!1,i,r;Xi&&e?.beforeEach&&(Hn(()=>{window.addEventListener("popstate",a),i=e.beforeEach((l,h,s)=>{oC?n?t(s):s():setTimeout(()=>n?t(s):s()),oC=!0}),r=e?.afterEach(()=>{oC=!1})}),ao(()=>{window.removeEventListener("popstate",a),i?.(),r?.()}));function a(l){l.state?.replaced||(n=!0,setTimeout(()=>n=!1))}}function Gre(e,t){Yt(()=>e.isActive?.value,n=>{e.isLink.value&&n!=null&&t&&Hn(()=>{t(n)})},{immediate:!0})}const $k=Symbol("rippleStop"),qre=80;function _4(e,t){e.style.transform=t,e.style.webkitTransform=t}function Uk(e){return e.constructor.name==="TouchEvent"}function s2(e){return e.constructor.name==="KeyboardEvent"}const Kre=function(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=0,r=0;if(!s2(e)){const x=t.getBoundingClientRect(),T=Uk(e)?e.touches[e.touches.length-1]:e;i=T.clientX-x.left,r=T.clientY-x.top}let a=0,l=.3;t._ripple?.circle?(l=.15,a=t.clientWidth/2,a=n.center?a:a+Math.sqrt((i-a)**2+(r-a)**2)/4):a=Math.sqrt(t.clientWidth**2+t.clientHeight**2)/2;const h=`${(t.clientWidth-a*2)/2}px`,s=`${(t.clientHeight-a*2)/2}px`,p=n.center?h:`${i-a}px`,_=n.center?s:`${r-a}px`;return{radius:a,scale:l,x:p,y:_,centerX:h,centerY:s}},Lw={show(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!t?._ripple?.enabled)return;const i=document.createElement("span"),r=document.createElement("span");i.appendChild(r),i.className="v-ripple__container",n.class&&(i.className+=` ${n.class}`);const{radius:a,scale:l,x:h,y:s,centerX:p,centerY:_}=Kre(e,t,n),x=`${a*2}px`;r.className="v-ripple__animation",r.style.width=x,r.style.height=x,t.appendChild(i);const T=window.getComputedStyle(t);T&&T.position==="static"&&(t.style.position="relative",t.dataset.previousPosition="static"),r.classList.add("v-ripple__animation--enter"),r.classList.add("v-ripple__animation--visible"),_4(r,`translate(${h}, ${s}) scale3d(${l},${l},${l})`),r.dataset.activated=String(performance.now()),requestAnimationFrame(()=>{requestAnimationFrame(()=>{r.classList.remove("v-ripple__animation--enter"),r.classList.add("v-ripple__animation--in"),_4(r,`translate(${p}, ${_}) scale3d(1,1,1)`)})})},hide(e){if(!e?._ripple?.enabled)return;const t=e.getElementsByClassName("v-ripple__animation");if(t.length===0)return;const n=Array.from(t).findLast(a=>!a.dataset.isHiding);if(n)n.dataset.isHiding="true";else return;const i=performance.now()-Number(n.dataset.activated),r=Math.max(250-i,0);setTimeout(()=>{n.classList.remove("v-ripple__animation--in"),n.classList.add("v-ripple__animation--out"),setTimeout(()=>{e.getElementsByClassName("v-ripple__animation").length===1&&e.dataset.previousPosition&&(e.style.position=e.dataset.previousPosition,delete e.dataset.previousPosition),n.parentNode?.parentNode===e&&e.removeChild(n.parentNode)},300)},r)}};function o2(e){return typeof e>"u"||!!e}function G0(e){const t={},n=e.currentTarget;if(!(!n?._ripple||n._ripple.touched||e[$k])){if(e[$k]=!0,Uk(e))n._ripple.touched=!0,n._ripple.isTouch=!0;else if(n._ripple.isTouch)return;if(t.center=n._ripple.centered||s2(e),n._ripple.class&&(t.class=n._ripple.class),Uk(e)){if(n._ripple.showTimerCommit)return;n._ripple.showTimerCommit=()=>{Lw.show(e,n,t)},n._ripple.showTimer=window.setTimeout(()=>{n?._ripple?.showTimerCommit&&(n._ripple.showTimerCommit(),n._ripple.showTimerCommit=null)},qre)}else Lw.show(e,n,t)}}function y4(e){e[$k]=!0}function ec(e){const t=e.currentTarget;if(t?._ripple){if(window.clearTimeout(t._ripple.showTimer),e.type==="touchend"&&t._ripple.showTimerCommit){t._ripple.showTimerCommit(),t._ripple.showTimerCommit=null,t._ripple.showTimer=window.setTimeout(()=>{ec(e)});return}window.setTimeout(()=>{t._ripple&&(t._ripple.touched=!1)}),Lw.hide(t)}}function a2(e){const t=e.currentTarget;t?._ripple&&(t._ripple.showTimerCommit&&(t._ripple.showTimerCommit=null),window.clearTimeout(t._ripple.showTimer))}let q0=!1;function b4(e,t){!q0&&t.includes(e.key)&&(q0=!0,G0(e))}function l2(e){q0=!1,ec(e)}function c2(e){q0&&(q0=!1,ec(e))}function u2(e,t,n){const{value:i,modifiers:r}=t,a=o2(i);a||Lw.hide(e),e._ripple=e._ripple??{},e._ripple.enabled=a,e._ripple.centered=r.center,e._ripple.circle=r.circle;const l=N0(i)?i:{};l.class&&(e._ripple.class=l.class);const h=l.keys??["Enter","Space"];if(e._ripple.keyDownHandler=s=>b4(s,h),a&&!n){if(r.stop){e.addEventListener("touchstart",y4,{passive:!0}),e.addEventListener("mousedown",y4);return}e.addEventListener("touchstart",G0,{passive:!0}),e.addEventListener("touchend",ec,{passive:!0}),e.addEventListener("touchmove",a2,{passive:!0}),e.addEventListener("touchcancel",ec),e.addEventListener("mousedown",G0),e.addEventListener("mouseup",ec),e.addEventListener("mouseleave",ec),e.addEventListener("keydown",s=>b4(s,h)),e.addEventListener("keyup",l2),e.addEventListener("blur",c2),e.addEventListener("dragstart",ec,{passive:!0})}else!a&&n&&d2(e)}function d2(e){e.removeEventListener("mousedown",G0),e.removeEventListener("touchstart",G0),e.removeEventListener("touchend",ec),e.removeEventListener("touchmove",a2),e.removeEventListener("touchcancel",ec),e.removeEventListener("mouseup",ec),e.removeEventListener("mouseleave",ec),e._ripple?.keyDownHandler&&e.removeEventListener("keydown",e._ripple.keyDownHandler),e.removeEventListener("keyup",l2),e.removeEventListener("dragstart",ec),e.removeEventListener("blur",c2)}function Xre(e,t){u2(e,t,!1)}function Yre(e){d2(e),delete e._ripple}function Zre(e,t){if(t.value===t.oldValue)return;const n=o2(t.oldValue);u2(e,t,n)}const Ha={mounted:Xre,unmounted:Yre,updated:Zre},BT=lt({active:{type:Boolean,default:void 0},activeColor:String,baseColor:String,symbol:{type:null,default:_P},flat:Boolean,icon:[Boolean,String,Function,Object],prependIcon:In,appendIcon:In,block:Boolean,readonly:Boolean,slim:Boolean,stacked:Boolean,spaced:String,ripple:{type:[Boolean,Object],default:!0},text:{type:[String,Number,Boolean],default:void 0},...cl(),...Tn(),...Ts(),...Bs(),...Ks(),...cg(),...VT(),...Ah(),...T_(),...Wr(),...Fb(),...md(),...ti({tag:"button"}),...Mi(),...Nc({variant:"elevated"})},"VBtn"),mi=Mt()({name:"VBtn",props:BT(),emits:{"group:selected":e=>!0},setup(e,t){let{attrs:n,slots:i}=t;const{themeClasses:r}=Qi(e),{borderClasses:a}=Fl(e),{densityClasses:l}=qa(e),{dimensionStyles:h}=Fs(e),{elevationClasses:s}=wo(e),{loaderClasses:p}=Ob(e),{locationStyles:_}=ug(e),{positionClasses:x}=S_(e),{roundedClasses:T}=ns(e),{sizeClasses:k,sizeStyles:A}=w_(e),M=nm(e,e.symbol,!1),R=Bb(e,n),F=me(()=>e.active!==void 0?e.active:R.isRouterLink.value?R.isActive?.value:M?.isSelected.value),z=$e(()=>F.value?e.activeColor??e.color:e.color),G=me(()=>({color:M?.isSelected.value&&(!R.isLink.value||R.isActive?.value)||!M||R.isActive?.value?z.value??e.baseColor:e.baseColor,variant:e.variant})),{colorClasses:Y,colorStyles:J,variantClasses:re}=ag(G),X=me(()=>M?.disabled.value||e.disabled),U=$e(()=>e.variant==="elevated"&&!(e.disabled||e.flat||e.border)),H=me(()=>{if(!(e.value===void 0||typeof e.value=="symbol"))return Object(e.value)===e.value?JSON.stringify(e.value,null,0):e.value});function W(ie){X.value||R.isLink.value&&(ie.metaKey||ie.ctrlKey||ie.shiftKey||ie.button!==0||n.target==="_blank")||(R.isRouterLink.value?R.navigate?.(ie):M?.toggle())}return Gre(R,M?.select),zt(()=>{const ie=R.isLink.value?"a":e.tag,Q=!!(e.prependIcon||i.prepend),te=!!(e.appendIcon||i.append),ke=!!(e.icon&&e.icon!==!0);return Li(ce(ie,At(R.linkProps,{type:ie==="a"?void 0:"button",class:["v-btn",M?.selectedClass.value,{"v-btn--active":F.value,"v-btn--block":e.block,"v-btn--disabled":X.value,"v-btn--elevated":U.value,"v-btn--flat":e.flat,"v-btn--icon":!!e.icon,"v-btn--loading":e.loading,"v-btn--readonly":e.readonly,"v-btn--slim":e.slim,"v-btn--stacked":e.stacked},e.spaced?["v-btn--spaced",`v-btn--spaced-${e.spaced}`]:[],r.value,a.value,Y.value,l.value,s.value,p.value,x.value,T.value,k.value,re.value,e.class],style:[J.value,h.value,_.value,A.value,e.style],"aria-busy":e.loading?!0:void 0,disabled:X.value&&ie!=="a"||void 0,tabindex:e.loading||e.readonly?-1:void 0,onClick:W,value:H.value}),{default:()=>[hm(!0,"v-btn"),!e.icon&&Q&&V("span",{key:"prepend",class:"v-btn__prepend"},[i.prepend?ce(ui,{key:"prepend-defaults",disabled:!e.prependIcon,defaults:{VIcon:{icon:e.prependIcon}}},i.prepend):ce(Pi,{key:"prepend-icon",icon:e.prependIcon},null)]),V("span",{class:"v-btn__content","data-no-activator":""},[!i.default&&ke?ce(Pi,{key:"content-icon",icon:e.icon},null):ce(ui,{key:"content-defaults",disabled:!ke,defaults:{VIcon:{icon:e.icon}}},{default:()=>[i.default?.()??en(e.text)]})]),!e.icon&&te&&V("span",{key:"append",class:"v-btn__append"},[i.append?ce(ui,{key:"append-defaults",disabled:!e.appendIcon,defaults:{VIcon:{icon:e.appendIcon}}},i.append):ce(Pi,{key:"append-icon",icon:e.appendIcon},null)]),!!e.loading&&V("span",{key:"loader",class:"v-btn__loader"},[i.loader?.()??ce(Hp,{color:typeof e.loading=="boolean"?void 0:e.loading,indeterminate:!0,width:"2"},null)])]}),[[Ha,!X.value&&e.ripple,"",{center:!!e.icon}]])}),{group:M}}}),Jre=lt({iconSize:[Number,String],iconSizes:{type:Array,default:()=>[["x-small",10],["small",16],["default",24],["large",28],["x-large",32]]}},"iconSize");function Qre(e,t){return{iconSize:me(()=>{const i=new Map(e.iconSizes),r=e.iconSize??t()??"default";return i.has(r)?i.get(r):r})}}const ese=["success","info","warning","error"],tse=lt({border:{type:[Boolean,String],validator:e=>typeof e=="boolean"||["top","end","bottom","start"].includes(e)},borderColor:String,closable:Boolean,closeIcon:{type:In,default:"$close"},closeLabel:{type:String,default:"$vuetify.close"},icon:{type:[Boolean,String,Function,Object],default:null},modelValue:{type:Boolean,default:!0},prominent:Boolean,title:String,text:String,type:{type:String,validator:e=>ese.includes(e)},...Tn(),...Ts(),...Bs(),...Ks(),...Jre(),...Ah(),...T_(),...Wr(),...ti(),...Mi(),...Nc({variant:"flat"})},"VAlert"),h2=Mt()({name:"VAlert",props:tse(),emits:{"click:close":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{emit:n,slots:i}=t;const r=Pn(e,"modelValue"),a=$e(()=>{if(e.icon!==!1)return e.type?e.icon??`$${e.type}`:e.icon}),{iconSize:l}=Qre(e,()=>e.prominent?44:void 0),{themeClasses:h}=Qi(e),{colorClasses:s,colorStyles:p,variantClasses:_}=ag(()=>({color:e.color??e.type,variant:e.variant})),{densityClasses:x}=qa(e),{dimensionStyles:T}=Fs(e),{elevationClasses:k}=wo(e),{locationStyles:A}=ug(e),{positionClasses:M}=S_(e),{roundedClasses:R}=ns(e),{textColorClasses:F,textColorStyles:z}=Uo(()=>e.borderColor),{t:G}=fr(),Y=$e(()=>({"aria-label":G(e.closeLabel),onClick(J){r.value=!1,n("click:close",J)}}));return()=>{const J=!!(i.prepend||a.value),re=!!(i.title||e.title),X=!!(i.close||e.closable),U={density:e.density,icon:a.value,size:e.iconSize||e.prominent?l.value:void 0};return r.value&&ce(e.tag,{class:_t(["v-alert",e.border&&{"v-alert--border":!!e.border,[`v-alert--border-${e.border===!0?"start":e.border}`]:!0},{"v-alert--prominent":e.prominent},h.value,s.value,x.value,k.value,M.value,R.value,_.value,e.class]),style:Xt([p.value,T.value,A.value,e.style]),role:"alert"},{default:()=>[hm(!1,"v-alert"),e.border&&V("div",{key:"border",class:_t(["v-alert__border",F.value]),style:Xt(z.value)},null),J&&V("div",{key:"prepend",class:"v-alert__prepend"},[i.prepend?ce(ui,{key:"prepend-defaults",disabled:!a.value,defaults:{VIcon:{...U}}},i.prepend):ce(Pi,At({key:"prepend-icon"},U),null)]),V("div",{class:"v-alert__content"},[re&&ce(t2,{key:"title"},{default:()=>[i.title?.()??e.title]}),i.text?.()??e.text,i.default?.()]),i.append&&V("div",{key:"append",class:"v-alert__append"},[i.append()]),X&&V("div",{key:"close",class:"v-alert__close"},[i.close?ce(ui,{key:"close-defaults",defaults:{VBtn:{icon:e.closeIcon,size:"x-small",variant:"text"}}},{default:()=>[i.close?.({props:Y.value})]}):ce(mi,At({key:"close-btn",icon:e.closeIcon,size:"x-small",variant:"text"},Y.value),null)])]})}}});function nse(e){return{aspectStyles:me(()=>{const t=Number(e.aspectRatio);return t?{paddingBottom:String(1/t*100)+"%"}:void 0})}}const f2=lt({aspectRatio:[String,Number],contentClass:null,inline:Boolean,...Tn(),...Bs()},"VResponsive"),jk=Mt()({name:"VResponsive",props:f2(),setup(e,t){let{slots:n}=t;const{aspectStyles:i}=nse(e),{dimensionStyles:r}=Fs(e);return zt(()=>V("div",{class:_t(["v-responsive",{"v-responsive--inline":e.inline},e.class]),style:Xt([r.value,e.style])},[V("div",{class:"v-responsive__sizer",style:Xt(i.value)},null),n.additional?.(),n.default&&V("div",{class:_t(["v-responsive__content",e.contentClass])},[n.default()])])),{}}}),Ph=lt({transition:{type:null,default:"fade-transition",validator:e=>e!==!0}},"transition"),Na=(e,t)=>{let{slots:n}=t;const{transition:i,disabled:r,group:a,...l}=e,{component:h=a?HI:Rl,...s}=N0(i)?i:{};let p;return N0(i)?p=At(s,_ne({disabled:r,group:a}),l):p=At({name:r||!i?"":i},l),Sh(h,p,n)};function ise(e,t){if(!tP)return;const n=t.modifiers||{},i=t.value,{handler:r,options:a}=typeof i=="object"?i:{handler:i,options:{}},l=new IntersectionObserver(function(){let h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],s=arguments.length>1?arguments[1]:void 0;const p=e._observe?.[t.instance.$.uid];if(!p)return;const _=h.some(x=>x.isIntersecting);r&&(!n.quiet||p.init)&&(!n.once||_||p.init)&&r(_,h,s),_&&n.once?m2(e,t):p.init=!0},a);e._observe=Object(e._observe),e._observe[t.instance.$.uid]={init:!1,observer:l},l.observe(e)}function m2(e,t){const n=e._observe?.[t.instance.$.uid];n&&(n.observer.unobserve(e),delete e._observe[t.instance.$.uid])}const gu={mounted:ise,unmounted:m2},p2=lt({absolute:Boolean,alt:String,cover:Boolean,color:String,draggable:{type:[Boolean,String],default:void 0},eager:Boolean,gradient:String,lazySrc:String,options:{type:Object,default:()=>({root:void 0,rootMargin:void 0,threshold:void 0})},sizes:String,src:{type:[String,Object],default:""},crossorigin:String,referrerpolicy:String,srcset:String,position:String,...f2(),...Tn(),...Wr(),...Ph()},"VImg"),xh=Mt()({name:"VImg",directives:{vIntersect:gu},props:p2(),emits:{loadstart:e=>!0,load:e=>!0,error:e=>!0},setup(e,t){let{emit:n,slots:i}=t;const{backgroundColorClasses:r,backgroundColorStyles:a}=ir(()=>e.color),{roundedClasses:l}=ns(e),h=ws("VImg"),s=tn(""),p=tt(),_=tn(e.eager?"loading":"idle"),x=tn(),T=tn(),k=me(()=>e.src&&typeof e.src=="object"?{src:e.src.src,srcset:e.srcset||e.src.srcset,lazySrc:e.lazySrc||e.src.lazySrc,aspect:Number(e.aspectRatio||e.src.aspect||0)}:{src:e.src,srcset:e.srcset,lazySrc:e.lazySrc,aspect:Number(e.aspectRatio||0)}),A=me(()=>k.value.aspect||x.value/T.value||0);Yt(()=>e.src,()=>{M(_.value!=="idle")}),Yt(A,(Q,te)=>{!Q&&te&&p.value&&Y(p.value)}),m_(()=>M());function M(Q){if(!(e.eager&&Q)&&!(tP&&!Q&&!e.eager)){if(_.value="loading",k.value.lazySrc){const te=new Image;te.src=k.value.lazySrc,Y(te,null)}k.value.src&&Hn(()=>{n("loadstart",p.value?.currentSrc||k.value.src),setTimeout(()=>{if(!h.isUnmounted)if(p.value?.complete){if(p.value.naturalWidth||F(),_.value==="error")return;A.value||Y(p.value,null),_.value==="loading"&&R()}else A.value||Y(p.value),z()})})}}function R(){h.isUnmounted||(z(),Y(p.value),_.value="loaded",n("load",p.value?.currentSrc||k.value.src))}function F(){h.isUnmounted||(_.value="error",n("error",p.value?.currentSrc||k.value.src))}function z(){const Q=p.value;Q&&(s.value=Q.currentSrc||Q.src)}let G=-1;Ur(()=>{clearTimeout(G)});function Y(Q){let te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100;const ke=()=>{if(clearTimeout(G),h.isUnmounted)return;const{naturalHeight:Re,naturalWidth:Be}=Q;Re||Be?(x.value=Be,T.value=Re):!Q.complete&&_.value==="loading"&&te!=null?G=window.setTimeout(ke,te):(Q.currentSrc.endsWith(".svg")||Q.currentSrc.startsWith("data:image/svg+xml"))&&(x.value=1,T.value=1)};ke()}const J=$e(()=>({"v-img__img--cover":e.cover,"v-img__img--contain":!e.cover})),re=()=>{if(!k.value.src||_.value==="idle")return null;const Q=V("img",{class:_t(["v-img__img",J.value]),style:{objectPosition:e.position},crossorigin:e.crossorigin,src:k.value.src,srcset:k.value.srcset,alt:e.alt,referrerpolicy:e.referrerpolicy,draggable:e.draggable,sizes:e.sizes,ref:p,onLoad:R,onError:F},null),te=i.sources?.();return ce(Na,{transition:e.transition,appear:!0},{default:()=>[Li(te?V("picture",{class:"v-img__picture"},[te,Q]):Q,[[_u,_.value==="loaded"]])]})},X=()=>ce(Na,{transition:e.transition},{default:()=>[k.value.lazySrc&&_.value!=="loaded"&&V("img",{class:_t(["v-img__img","v-img__img--preload",J.value]),style:{objectPosition:e.position},crossorigin:e.crossorigin,src:k.value.lazySrc,alt:e.alt,referrerpolicy:e.referrerpolicy,draggable:e.draggable},null)]}),U=()=>i.placeholder?ce(Na,{transition:e.transition,appear:!0},{default:()=>[(_.value==="loading"||_.value==="error"&&!i.error)&&V("div",{class:"v-img__placeholder"},[i.placeholder()])]}):null,H=()=>i.error?ce(Na,{transition:e.transition,appear:!0},{default:()=>[_.value==="error"&&V("div",{class:"v-img__error"},[i.error()])]}):null,W=()=>e.gradient?V("div",{class:"v-img__gradient",style:{backgroundImage:`linear-gradient(${e.gradient})`}},null):null,ie=tn(!1);{const Q=Yt(A,te=>{te&&(requestAnimationFrame(()=>{requestAnimationFrame(()=>{ie.value=!0})}),Q())})}return zt(()=>{const Q=jk.filterProps(e);return Li(ce(jk,At({class:["v-img",{"v-img--absolute":e.absolute,"v-img--booting":!ie.value},r.value,l.value,e.class],style:[{width:pn(e.width==="auto"?x.value:e.width)},a.value,e.style]},Q,{aspectRatio:A.value,"aria-label":e.alt,role:e.alt?"img":void 0}),{additional:()=>V(an,null,[ce(re,null,null),ce(X,null,null),ce(W,null,null),ce(U,null,null),ce(H,null,null)]),default:i.default}),[[gu,{handler:M,options:e.options},null,{once:!0}]])}),{currentSrc:s,image:p,state:_,naturalWidth:x,naturalHeight:T}}}),rse=lt({start:Boolean,end:Boolean,icon:In,image:String,text:String,...cl(),...Tn(),...Ts(),...Wr(),...md(),...ti(),...Mi(),...Nc({variant:"flat"})},"VAvatar"),uc=Mt()({name:"VAvatar",props:rse(),setup(e,t){let{slots:n}=t;const{themeClasses:i}=Qi(e),{borderClasses:r}=Fl(e),{colorClasses:a,colorStyles:l,variantClasses:h}=ag(e),{densityClasses:s}=qa(e),{roundedClasses:p}=ns(e),{sizeClasses:_,sizeStyles:x}=w_(e);return zt(()=>ce(e.tag,{class:_t(["v-avatar",{"v-avatar--start":e.start,"v-avatar--end":e.end},i.value,r.value,a.value,s.value,p.value,_.value,h.value,e.class]),style:Xt([l.value,x.value,e.style])},{default:()=>[n.default?ce(ui,{key:"content-defaults",defaults:{VImg:{cover:!0,src:e.image},VIcon:{icon:e.icon}}},{default:()=>[n.default()]}):e.image?ce(xh,{key:"image",src:e.image,alt:"",cover:!0},null):e.icon?ce(Pi,{key:"icon",icon:e.icon},null):e.text,hm(!1,"v-avatar")]})),{}}}),sse=lt({text:String,onClick:zo(),...Tn(),...Mi()},"VLabel"),E_=Mt()({name:"VLabel",props:sse(),setup(e,t){let{slots:n}=t;return zt(()=>V("label",{class:_t(["v-label",{"v-label--clickable":!!e.onClick},e.class]),style:Xt(e.style),onClick:e.onClick},[e.text,n.default?.()])),{}}}),g2=Symbol.for("vuetify:selection-control-group"),yP=lt({color:String,disabled:{type:Boolean,default:null},defaultsTarget:String,error:Boolean,id:String,inline:Boolean,falseIcon:In,trueIcon:In,ripple:{type:[Boolean,Object],default:!0},multiple:{type:Boolean,default:null},name:String,readonly:{type:Boolean,default:null},modelValue:null,type:String,valueComparator:{type:Function,default:bo},...Tn(),...Ts(),...Mi()},"SelectionControlGroup"),ose=lt({...yP({defaultsTarget:"VSelectionControl"})},"VSelectionControlGroup"),v2=Mt()({name:"VSelectionControlGroup",props:ose(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const i=Pn(e,"modelValue"),r=ha(),a=$e(()=>e.id||`v-selection-control-group-${r}`),l=$e(()=>e.name||a.value),h=new Set;return Rr(g2,{modelValue:i,forceUpdate:()=>{h.forEach(s=>s())},onForceUpdate:s=>{h.add(s),ao(()=>{h.delete(s)})}}),ts({[e.defaultsTarget]:{color:$e(()=>e.color),disabled:$e(()=>e.disabled),density:$e(()=>e.density),error:$e(()=>e.error),inline:$e(()=>e.inline),modelValue:i,multiple:$e(()=>!!e.multiple||e.multiple==null&&Array.isArray(i.value)),name:l,falseIcon:$e(()=>e.falseIcon),trueIcon:$e(()=>e.trueIcon),readonly:$e(()=>e.readonly),ripple:$e(()=>e.ripple),type:$e(()=>e.type),valueComparator:$e(()=>e.valueComparator)}}),zt(()=>V("div",{class:_t(["v-selection-control-group",{"v-selection-control-group--inline":e.inline},e.class]),style:Xt(e.style),role:e.type==="radio"?"radiogroup":void 0},[n.default?.()])),{}}}),FT=lt({label:String,baseColor:String,trueValue:null,falseValue:null,value:null,...Tn(),...yP()},"VSelectionControl");function ase(e){const t=Si(g2,void 0),{densityClasses:n}=qa(e),i=Pn(e,"modelValue"),r=me(()=>e.trueValue!==void 0?e.trueValue:e.value!==void 0?e.value:!0),a=me(()=>e.falseValue!==void 0?e.falseValue:!1),l=me(()=>!!e.multiple||e.multiple==null&&Array.isArray(i.value)),h=me({get(){const k=t?t.modelValue.value:i.value;return l.value?Xr(k).some(A=>e.valueComparator(A,r.value)):e.valueComparator(k,r.value)},set(k){if(e.readonly)return;const A=k?r.value:a.value;let M=A;l.value&&(M=k?[...Xr(i.value),A]:Xr(i.value).filter(R=>!e.valueComparator(R,r.value))),t?t.modelValue.value=M:i.value=M}}),{textColorClasses:s,textColorStyles:p}=Uo(()=>{if(!(e.error||e.disabled))return h.value?e.color:e.baseColor}),{backgroundColorClasses:_,backgroundColorStyles:x}=ir(()=>h.value&&!e.error&&!e.disabled?e.color:e.baseColor),T=me(()=>h.value?e.trueIcon:e.falseIcon);return{group:t,densityClasses:n,trueValue:r,falseValue:a,model:h,textColorClasses:s,textColorStyles:p,backgroundColorClasses:_,backgroundColorStyles:x,icon:T}}const im=Mt()({name:"VSelectionControl",directives:{vRipple:Ha},inheritAttrs:!1,props:FT(),emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:n,slots:i}=t;const{group:r,densityClasses:a,icon:l,model:h,textColorClasses:s,textColorStyles:p,backgroundColorClasses:_,backgroundColorStyles:x,trueValue:T}=ase(e),k=ha(),A=tn(!1),M=tn(!1),R=tt(),F=$e(()=>e.id||`input-${k}`),z=$e(()=>!e.disabled&&!e.readonly);r?.onForceUpdate(()=>{R.value&&(R.value.checked=h.value)});function G(X){z.value&&(A.value=!0,n_(X.target,":focus-visible")!==!1&&(M.value=!0))}function Y(){A.value=!1,M.value=!1}function J(X){X.stopPropagation()}function re(X){if(!z.value){R.value&&(R.value.checked=h.value);return}e.readonly&&r&&Hn(()=>r.forceUpdate()),h.value=X.target.checked}return zt(()=>{const X=i.label?i.label({label:e.label,props:{for:F.value}}):e.label,[U,H]=dm(n),W=V("input",At({ref:R,checked:h.value,disabled:!!e.disabled,id:F.value,onBlur:Y,onFocus:G,onInput:re,"aria-disabled":!!e.disabled,"aria-label":e.label,type:e.type,value:T.value,name:e.name,"aria-checked":e.type==="checkbox"?h.value:void 0},H),null);return V("div",At({class:["v-selection-control",{"v-selection-control--dirty":h.value,"v-selection-control--disabled":e.disabled,"v-selection-control--error":e.error,"v-selection-control--focused":A.value,"v-selection-control--focus-visible":M.value,"v-selection-control--inline":e.inline},a.value,e.class]},U,{style:e.style}),[V("div",{class:_t(["v-selection-control__wrapper",s.value]),style:Xt(p.value)},[i.default?.({backgroundColorClasses:_,backgroundColorStyles:x}),Li(V("div",{class:_t(["v-selection-control__input"])},[i.input?.({model:h,textColorClasses:s,textColorStyles:p,backgroundColorClasses:_,backgroundColorStyles:x,inputNode:W,icon:l.value,props:{onFocus:G,onBlur:Y,id:F.value}})??V(an,null,[l.value&&ce(Pi,{key:"icon",icon:l.value},null),W])]),[[Ha,!e.disabled&&!e.readonly&&e.ripple,null,{center:!0,circle:!0}]])]),X&&ce(E_,{for:F.value,onClick:J},{default:()=>[X]})])}),{isFocused:A,input:R}}}),_2=lt({indeterminate:Boolean,indeterminateIcon:{type:In,default:"$checkboxIndeterminate"},...FT({falseIcon:"$checkboxOff",trueIcon:"$checkboxOn"})},"VCheckboxBtn"),ud=Mt()({name:"VCheckboxBtn",props:_2(),emits:{"update:modelValue":e=>!0,"update:indeterminate":e=>!0},setup(e,t){let{slots:n}=t;const i=Pn(e,"indeterminate"),r=Pn(e,"modelValue");function a(s){i.value&&(i.value=!1)}const l=$e(()=>i.value?e.indeterminateIcon:e.falseIcon),h=$e(()=>i.value?e.indeterminateIcon:e.trueIcon);return zt(()=>{const s=hr(im.filterProps(e),["modelValue"]);return ce(im,At(s,{modelValue:r.value,"onUpdate:modelValue":[p=>r.value=p,a],class:["v-checkbox-btn",e.class],style:e.style,type:"checkbox",falseIcon:l.value,trueIcon:h.value,"aria-checked":i.value?"mixed":void 0}),n)}),{}}});function y2(e){const{t}=fr();function n(i){let{name:r,color:a,...l}=i;const h={prepend:"prependAction",prependInner:"prependAction",append:"appendAction",appendInner:"appendAction",clear:"clear"}[r],s=e[`onClick:${r}`];function p(x){x.key!=="Enter"&&x.key!==" "||(x.preventDefault(),x.stopPropagation(),Ab(s,new PointerEvent("click",x)))}const _=s&&h?t(`$vuetify.input.${h}`,e.label??""):void 0;return ce(Pi,At({icon:e[`${r}Icon`],"aria-label":_,onClick:s,onKeydown:p,color:a},l),null)}return{InputIcon:n}}const lse=lt({disabled:Boolean,group:Boolean,hideOnLeave:Boolean,leaveAbsolute:Boolean,mode:String,origin:String},"transition");function hc(e,t,n){return Mt()({name:e,props:lse({mode:n,origin:t}),setup(i,r){let{slots:a}=r;const l={onBeforeEnter(h){i.origin&&(h.style.transformOrigin=i.origin)},onLeave(h){if(i.leaveAbsolute){const{offsetTop:s,offsetLeft:p,offsetWidth:_,offsetHeight:x}=h;h._transitionInitialStyles={position:h.style.position,top:h.style.top,left:h.style.left,width:h.style.width,height:h.style.height},h.style.position="absolute",h.style.top=`${s}px`,h.style.left=`${p}px`,h.style.width=`${_}px`,h.style.height=`${x}px`}i.hideOnLeave&&h.style.setProperty("display","none","important")},onAfterLeave(h){if(i.leaveAbsolute&&h?._transitionInitialStyles){const{position:s,top:p,left:_,width:x,height:T}=h._transitionInitialStyles;delete h._transitionInitialStyles,h.style.position=s||"",h.style.top=p||"",h.style.left=_||"",h.style.width=x||"",h.style.height=T||""}}};return()=>{const h=i.group?HI:Rl;return Sh(h,{name:i.disabled?"":e,css:!i.disabled,...i.group?void 0:{mode:i.mode},...i.disabled?{}:l},a.default)}}})}function b2(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"in-out";return Mt()({name:e,props:{mode:{type:String,default:n},disabled:{type:Boolean,default:ld()},group:Boolean},setup(i,r){let{slots:a}=r;const l=i.group?HI:Rl;return()=>Sh(l,{name:i.disabled?"":e,css:!i.disabled,...i.disabled?{}:t},a.default)}})}function x2(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";const n=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)?"width":"height",i=ll(`offset-${n}`);return{onBeforeEnter(l){l._parent=l.parentNode,l._initialStyle={transition:l.style.transition,overflow:l.style.overflow,[n]:l.style[n]}},onEnter(l){const h=l._initialStyle;if(!h)return;l.style.setProperty("transition","none","important"),l.style.overflow="hidden";const s=`${l[i]}px`;l.style[n]="0",l.offsetHeight,l.style.transition=h.transition,e&&l._parent&&l._parent.classList.add(e),requestAnimationFrame(()=>{l.style[n]=s})},onAfterEnter:a,onEnterCancelled:a,onLeave(l){l._initialStyle={transition:"",overflow:l.style.overflow,[n]:l.style[n]},l.style.overflow="hidden",l.style[n]=`${l[i]}px`,l.offsetHeight,requestAnimationFrame(()=>l.style[n]="0")},onAfterLeave:r,onLeaveCancelled:r};function r(l){e&&l._parent&&l._parent.classList.remove(e),a(l)}function a(l){if(!l._initialStyle)return;const h=l._initialStyle[n];l.style.overflow=l._initialStyle.overflow,h!=null&&(l.style[n]=h),delete l._initialStyle}}const cse=lt({target:[Object,Array]},"v-dialog-transition"),aC=new WeakMap,zT=Mt()({name:"VDialogTransition",props:cse(),setup(e,t){let{slots:n}=t;const i={onBeforeEnter(r){r.style.pointerEvents="none",r.style.visibility="hidden"},async onEnter(r,a){await new Promise(T=>requestAnimationFrame(T)),await new Promise(T=>requestAnimationFrame(T)),r.style.visibility="";const l=w4(e.target,r),{x:h,y:s,sx:p,sy:_,speed:x}=l;if(aC.set(r,l),ld())nh(r,[{opacity:0},{}],{duration:125*x,easing:Z5}).finished.then(()=>a());else{const T=nh(r,[{transform:`translate(${h}px, ${s}px) scale(${p}, ${_})`,opacity:0},{}],{duration:225*x,easing:Z5});x4(r)?.forEach(k=>{nh(k,[{opacity:0},{opacity:0,offset:.33},{}],{duration:450*x,easing:$0})}),T.finished.then(()=>a())}},onAfterEnter(r){r.style.removeProperty("pointer-events")},onBeforeLeave(r){r.style.pointerEvents="none"},async onLeave(r,a){await new Promise(T=>requestAnimationFrame(T));let l;!aC.has(r)||Array.isArray(e.target)||e.target.offsetParent||e.target.getClientRects().length?l=w4(e.target,r):l=aC.get(r);const{x:h,y:s,sx:p,sy:_,speed:x}=l;ld()?nh(r,[{},{opacity:0}],{duration:85*x,easing:J5}).finished.then(()=>a()):(nh(r,[{},{transform:`translate(${h}px, ${s}px) scale(${p}, ${_})`,opacity:0}],{duration:125*x,easing:J5}).finished.then(()=>a()),x4(r)?.forEach(k=>{nh(k,[{},{opacity:0,offset:.2},{opacity:0}],{duration:250*x,easing:$0})}))},onAfterLeave(r){r.style.removeProperty("pointer-events")}};return()=>e.target?ce(Rl,At({name:"dialog-transition"},i,{css:!1}),n):ce(Rl,{name:"dialog-transition"},n)}});function x4(e){const t=e.querySelector(":scope > .v-card, :scope > .v-sheet, :scope > .v-list")?.children;return t&&[...t]}function w4(e,t){const n=CN(e),i=oP(t),[r,a]=getComputedStyle(t).transformOrigin.split(" ").map(F=>parseFloat(F)),[l,h]=getComputedStyle(t).getPropertyValue("--v-overlay-anchor-origin").split(" ");let s=n.left+n.width/2;l==="left"||h==="left"?s-=n.width/2:(l==="right"||h==="right")&&(s+=n.width/2);let p=n.top+n.height/2;l==="top"||h==="top"?p-=n.height/2:(l==="bottom"||h==="bottom")&&(p+=n.height/2);const _=n.width/i.width,x=n.height/i.height,T=Math.max(1,_,x),k=_/T||0,A=x/T||0,M=i.width*i.height/(window.innerWidth*window.innerHeight),R=M>.12?Math.min(1.5,(M-.12)*10+1):1;return{x:s-(r+i.left),y:p-(a+i.top),sx:k,sy:A,speed:R}}const use=hc("fab-transition","center center","out-in"),dse=hc("dialog-bottom-transition"),hse=hc("dialog-top-transition"),K0=hc("fade-transition"),bP=hc("scale-transition"),fse=hc("scroll-x-transition"),mse=hc("scroll-x-reverse-transition"),pse=hc("scroll-y-transition"),gse=hc("scroll-y-reverse-transition"),vse=hc("slide-x-transition"),_se=hc("slide-x-reverse-transition"),X0=hc("slide-y-transition"),yse=hc("slide-y-reverse-transition"),NT=b2("expand-transition",x2()),xP=b2("expand-x-transition",x2("",!0)),bse=lt({active:Boolean,color:String,messages:{type:[Array,String],default:()=>[]},...Tn(),...Ph({transition:{component:X0,leaveAbsolute:!0,group:!0}})},"VMessages"),w2=Mt()({name:"VMessages",props:bse(),setup(e,t){let{slots:n}=t;const i=me(()=>Xr(e.messages)),{textColorClasses:r,textColorStyles:a}=Uo(()=>e.color);return zt(()=>ce(Na,{transition:e.transition,tag:"div",class:_t(["v-messages",r.value,e.class]),style:Xt([a.value,e.style])},{default:()=>[e.active&&i.value.map((l,h)=>V("div",{class:"v-messages__message",key:`${h}-${i.value}`},[n.message?n.message({message:l}):l]))]})),{}}}),zb=lt({focused:Boolean,"onUpdate:focused":zo()},"focus");function Mh(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:fd();const n=Pn(e,"focused"),i=$e(()=>({[`${t}--focused`]:n.value}));function r(){n.value=!0}function a(){n.value=!1}return{focusClasses:i,isFocused:n,focus:r,blur:a}}const T2=Symbol.for("vuetify:form"),xse=lt({disabled:Boolean,fastFail:Boolean,readonly:Boolean,modelValue:{type:Boolean,default:null},validateOn:{type:String,default:"input"}},"form");function wse(e){const t=Pn(e,"modelValue"),n=$e(()=>e.disabled),i=$e(()=>e.readonly),r=tn(!1),a=tt([]),l=tt([]);async function h(){const _=[];let x=!0;l.value=[],r.value=!0;for(const T of a.value){const k=await T.validate();if(k.length>0&&(x=!1,_.push({id:T.id,errorMessages:k})),!x&&e.fastFail)break}return l.value=_,r.value=!1,{valid:x,errors:l.value}}function s(){a.value.forEach(_=>_.reset())}function p(){a.value.forEach(_=>_.resetValidation())}return Yt(a,()=>{let _=0,x=0;const T=[];for(const k of a.value)k.isValid===!1?(x++,T.push({id:k.id,errorMessages:k.errorMessages})):k.isValid===!0&&_++;l.value=T,t.value=x>0?!1:_===a.value.length?!0:null},{deep:!0,flush:"post"}),Rr(T2,{register:_=>{let{id:x,vm:T,validate:k,reset:A,resetValidation:M}=_;a.value.some(R=>R.id===x),a.value.push({id:x,validate:k,reset:A,resetValidation:M,vm:VV(T),isValid:null,errorMessages:[]})},unregister:_=>{a.value=a.value.filter(x=>x.id!==_)},update:(_,x,T)=>{const k=a.value.find(A=>A.id===_);k&&(k.isValid=x,k.errorMessages=T)},isDisabled:n,isReadonly:i,isValidating:r,isValid:t,items:a,validateOn:$e(()=>e.validateOn)}),{errors:l,isDisabled:n,isReadonly:i,isValidating:r,isValid:t,items:a,validate:h,reset:s,resetValidation:p}}function C_(e){const t=Si(T2,null);return{...t,isReadonly:me(()=>!!(e?.readonly??t?.isReadonly.value)),isDisabled:me(()=>!!(e?.disabled??t?.isDisabled.value))}}const Tse=Symbol.for("vuetify:rules");function Sse(e){const t=Si(Tse,null);if(!e){if(!t)throw new Error("Could not find Vuetify rules injection");return t.aliases}return t?.resolve(e)??$e(e)}const S2=lt({disabled:{type:Boolean,default:null},error:Boolean,errorMessages:{type:[Array,String],default:()=>[]},maxErrors:{type:[Number,String],default:1},name:String,label:String,readonly:{type:Boolean,default:null},rules:{type:Array,default:()=>[]},modelValue:null,validateOn:String,validationValue:null,...zb()},"validation");function E2(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:fd(),n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ha();const i=Pn(e,"modelValue"),r=me(()=>e.validationValue===void 0?i.value:e.validationValue),a=C_(e),l=Sse(()=>e.rules),h=tt([]),s=tn(!0),p=me(()=>!!(Xr(i.value===""?null:i.value).length||Xr(r.value===""?null:r.value).length)),_=me(()=>e.errorMessages?.length?Xr(e.errorMessages).concat(h.value).slice(0,Math.max(0,Number(e.maxErrors))):h.value),x=me(()=>{let Y=(e.validateOn??a.validateOn?.value)||"input";Y==="lazy"&&(Y="input lazy"),Y==="eager"&&(Y="input eager");const J=new Set(Y?.split(" ")??[]);return{input:J.has("input"),blur:J.has("blur")||J.has("input")||J.has("invalid-input"),invalidInput:J.has("invalid-input"),lazy:J.has("lazy"),eager:J.has("eager")}}),T=me(()=>e.error||e.errorMessages?.length?!1:e.rules.length?s.value?h.value.length||x.value.lazy?null:!0:!h.value.length:!0),k=tn(!1),A=me(()=>({[`${t}--error`]:T.value===!1,[`${t}--dirty`]:p.value,[`${t}--disabled`]:a.isDisabled.value,[`${t}--readonly`]:a.isReadonly.value})),M=ws("validation"),R=me(()=>e.name??bi(n));m_(()=>{a.register?.({id:R.value,vm:M,validate:G,reset:F,resetValidation:z})}),Ur(()=>{a.unregister?.(R.value)}),Mr(async()=>{x.value.lazy||await G(!x.value.eager),a.update?.(R.value,T.value,_.value)}),ca(()=>x.value.input||x.value.invalidInput&&T.value===!1,()=>{Yt(r,()=>{if(r.value!=null)G();else if(e.focused){const Y=Yt(()=>e.focused,J=>{J||G(),Y()})}})}),ca(()=>x.value.blur,()=>{Yt(()=>e.focused,Y=>{Y||G()})}),Yt([T,_],()=>{a.update?.(R.value,T.value,_.value)});async function F(){i.value=null,await Hn(),await z()}async function z(){s.value=!0,x.value.lazy?h.value=[]:await G(!x.value.eager)}async function G(){let Y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const J=[];k.value=!0;for(const re of l.value){if(J.length>=Number(e.maxErrors??1))break;const U=await(typeof re=="function"?re:()=>re)(r.value);if(U!==!0){if(U!==!1&&typeof U!="string"){console.warn(`${U} is not a valid value. Rule functions must return boolean true or a string.`);continue}J.push(U||"")}}return h.value=J,k.value=!1,s.value=Y,h.value}return{errorMessages:_,isDirty:p,isDisabled:a.isDisabled,isReadonly:a.isReadonly,isPristine:s,isValid:T,isValidating:k,reset:F,resetValidation:z,validate:G,validationClasses:A}}const Dh=lt({id:String,appendIcon:In,baseColor:String,centerAffix:{type:Boolean,default:!0},color:String,glow:Boolean,iconColor:[Boolean,String],prependIcon:In,hideDetails:[Boolean,String],hideSpinButtons:Boolean,hint:String,persistentHint:Boolean,messages:{type:[Array,String],default:()=>[]},direction:{type:String,default:"horizontal",validator:e=>["horizontal","vertical"].includes(e)},"onClick:prepend":zo(),"onClick:append":zo(),...Tn(),...Ts(),...Vl(Bs(),["maxWidth","minWidth","width"]),...Mi(),...S2()},"VInput"),da=Mt()({name:"VInput",props:{...Dh()},emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:n,slots:i,emit:r}=t;const{densityClasses:a}=qa(e),{dimensionStyles:l}=Fs(e),{themeClasses:h}=Qi(e),{rtlClasses:s}=qs(),{InputIcon:p}=y2(e),_=ha(),x=me(()=>e.id||`input-${_}`),{errorMessages:T,isDirty:k,isDisabled:A,isReadonly:M,isPristine:R,isValid:F,isValidating:z,reset:G,resetValidation:Y,validate:J,validationClasses:re}=E2(e,"v-input",x),X=me(()=>e.errorMessages?.length||!R.value&&T.value.length?T.value:e.hint&&(e.persistentHint||e.focused)?e.hint:e.messages),U=$e(()=>X.value.length>0),H=$e(()=>!e.hideDetails||e.hideDetails==="auto"&&(U.value||!!i.details)),W=me(()=>H.value?`${x.value}-messages`:void 0),ie=me(()=>({id:x,messagesId:W,isDirty:k,isDisabled:A,isReadonly:M,isPristine:R,isValid:F,isValidating:z,hasDetails:H,reset:G,resetValidation:Y,validate:J})),Q=$e(()=>e.error||e.disabled?void 0:e.focused?e.color:e.baseColor),te=$e(()=>{if(e.iconColor)return e.iconColor===!0?Q.value:e.iconColor});return zt(()=>{const ke=!!(i.prepend||e.prependIcon),Re=!!(i.append||e.appendIcon);return V("div",{class:_t(["v-input",`v-input--${e.direction}`,{"v-input--center-affix":e.centerAffix,"v-input--focused":e.focused,"v-input--glow":e.glow,"v-input--hide-spin-buttons":e.hideSpinButtons},a.value,h.value,s.value,re.value,e.class]),style:Xt([l.value,e.style])},[ke&&V("div",{key:"prepend",class:"v-input__prepend"},[i.prepend?.(ie.value),e.prependIcon&&ce(p,{key:"prepend-icon",name:"prepend",color:te.value},null)]),i.default&&V("div",{class:"v-input__control"},[i.default?.(ie.value)]),Re&&V("div",{key:"append",class:"v-input__append"},[e.appendIcon&&ce(p,{key:"append-icon",name:"append",color:te.value},null),i.append?.(ie.value)]),H.value&&V("div",{id:W.value,class:"v-input__details",role:"alert","aria-live":"polite"},[ce(w2,{active:U.value,messages:X.value},{message:i.message}),i.details?.(ie.value)])])}),{reset:G,resetValidation:Y,validate:J,isValid:F,errorMessages:T}}}),lC=Symbol("Forwarded refs");function cC(e,t){let n=e;for(;n;){const i=Reflect.getOwnPropertyDescriptor(n,t);if(i)return i;n=Object.getPrototypeOf(n)}}function To(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return e[lC]=n,new Proxy(e,{get(r,a){if(Reflect.has(r,a))return Reflect.get(r,a);if(!(typeof a=="symbol"||a.startsWith("$")||a.startsWith("__"))){for(const l of n)if(l.value&&Reflect.has(l.value,a)){const h=Reflect.get(l.value,a);return typeof h=="function"?h.bind(l.value):h}}},has(r,a){if(Reflect.has(r,a))return!0;if(typeof a=="symbol"||a.startsWith("$")||a.startsWith("__"))return!1;for(const l of n)if(l.value&&Reflect.has(l.value,a))return!0;return!1},set(r,a,l){if(Reflect.has(r,a))return Reflect.set(r,a,l);if(typeof a=="symbol"||a.startsWith("$")||a.startsWith("__"))return!1;for(const h of n)if(h.value&&Reflect.has(h.value,a))return Reflect.set(h.value,a,l);return!1},getOwnPropertyDescriptor(r,a){const l=Reflect.getOwnPropertyDescriptor(r,a);if(l)return l;if(!(typeof a=="symbol"||a.startsWith("$")||a.startsWith("__"))){for(const h of n){if(!h.value)continue;const s=cC(h.value,a)??("_"in h.value?cC(h.value._?.setupState,a):void 0);if(s)return s}for(const h of n){const s=h.value&&h.value[lC];if(!s)continue;const p=s.slice();for(;p.length;){const _=p.shift(),x=cC(_.value,a);if(x)return x;const T=_.value&&_.value[lC];T&&p.push(...T)}}}}})}const Ese=lt({...Dh(),...hr(_2(),["inline"])},"VCheckbox"),Cse=Mt()({name:"VCheckbox",inheritAttrs:!1,props:Ese(),emits:{"update:modelValue":e=>!0,"update:focused":e=>!0},setup(e,t){let{attrs:n,slots:i}=t;const r=Pn(e,"modelValue"),{isFocused:a,focus:l,blur:h}=Mh(e),s=tt(),p=ha();return zt(()=>{const[_,x]=dm(n),T=da.filterProps(e),k=ud.filterProps(e);return ce(da,At({ref:s,class:["v-checkbox",e.class]},_,T,{modelValue:r.value,"onUpdate:modelValue":A=>r.value=A,id:e.id||`checkbox-${p}`,focused:a.value,style:e.style}),{...i,default:A=>{let{id:M,messagesId:R,isDisabled:F,isReadonly:z,isValid:G}=A;return ce(ud,At(k,{id:M.value,"aria-describedby":R.value,disabled:F.value,readonly:z.value},x,{error:G.value===!1,modelValue:r.value,"onUpdate:modelValue":Y=>r.value=Y,onFocus:l,onBlur:h}),i)}})}),To({},s)}});function kse(e){let{selectedElement:t,containerElement:n,isRtl:i,isHorizontal:r}=e;const a=Y0(r,n),l=C2(r,i,n),h=Y0(r,t),s=k2(r,t),p=h*.4;return l>s?s-p:l+a<s+h?s-a+h+p:l}function Ise(e){let{selectedElement:t,containerElement:n,isHorizontal:i}=e;const r=Y0(i,n),a=k2(i,t),l=Y0(i,t);return a-r/2+l/2}function T4(e,t){return t?.[e?"scrollWidth":"scrollHeight"]||0}function Ase(e,t){return t?.[e?"clientWidth":"clientHeight"]||0}function C2(e,t,n){if(!n)return 0;const{scrollLeft:i,offsetWidth:r,scrollWidth:a}=n;return e?t?a-r+i:i:n.scrollTop}function Y0(e,t){return t?.[e?"offsetWidth":"offsetHeight"]||0}function k2(e,t){return t?.[e?"offsetLeft":"offsetTop"]||0}const wP=Symbol.for("vuetify:v-slide-group"),TP=lt({centerActive:Boolean,scrollToActive:{type:Boolean,default:!0},contentClass:null,direction:{type:String,default:"horizontal"},symbol:{type:null,default:wP},nextIcon:{type:In,default:"$next"},prevIcon:{type:In,default:"$prev"},showArrows:{type:[Boolean,String],validator:e=>typeof e=="boolean"||["always","desktop","mobile"].includes(e)},...Tn(),...rg({mobile:null}),...ti(),...lg({selectedClass:"v-slide-group-item--active"})},"VSlideGroup"),Z0=Mt()({name:"VSlideGroup",props:TP(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{isRtl:i}=qs(),{displayClasses:r,mobile:a}=Bl(e),l=fm(e,e.symbol),h=tn(!1),s=tn(0),p=tn(0),_=tn(0),x=me(()=>e.direction==="horizontal"),{resizeRef:T,contentRect:k}=zc(),{resizeRef:A,contentRect:M}=zc(),R=Zie(),F=me(()=>({container:T.el,duration:200,easing:"easeOutQuart"})),z=me(()=>l.selected.value.length?l.items.value.findIndex(it=>it.id===l.selected.value[0]):-1),G=me(()=>l.selected.value.length?l.items.value.findIndex(it=>it.id===l.selected.value[l.selected.value.length-1]):-1);if(Xi){let it=-1;Yt(()=>[l.selected.value,k.value,M.value,x.value],()=>{cancelAnimationFrame(it),it=requestAnimationFrame(()=>{if(k.value&&M.value){const ot=x.value?"width":"height";p.value=k.value[ot],_.value=M.value[ot],h.value=p.value+1<_.value}if(e.scrollToActive&&z.value>=0&&A.el){const ot=A.el.children[G.value];J(ot,e.centerActive)}})})}const Y=tn(!1);function J(it,ot){let mt=0;ot?mt=Ise({containerElement:T.el,isHorizontal:x.value,selectedElement:it}):mt=kse({containerElement:T.el,isHorizontal:x.value,isRtl:i.value,selectedElement:it}),re(mt)}function re(it){if(!Xi||!T.el)return;const ot=Y0(x.value,T.el),mt=C2(x.value,i.value,T.el);if(!(T4(x.value,T.el)<=ot||Math.abs(it-mt)<16)){if(x.value&&i.value&&T.el){const{scrollWidth:$t,offsetWidth:ct}=T.el;it=$t-ct-it}x.value?R.horizontal(it,F.value):R(it,F.value)}}function X(it){const{scrollTop:ot,scrollLeft:mt}=it.target;s.value=x.value?mt:ot}function U(it){if(Y.value=!0,!(!h.value||!A.el)){for(const ot of it.composedPath())for(const mt of A.el.children)if(mt===ot){J(mt);return}}}function H(it){Y.value=!1}let W=!1;function ie(it){!W&&!Y.value&&!(it.relatedTarget&&A.el?.contains(it.relatedTarget))&&Re(),W=!1}function Q(){W=!0}function te(it){if(!A.el)return;function ot(mt){it.preventDefault(),Re(mt)}x.value?it.key==="ArrowRight"?ot(i.value?"prev":"next"):it.key==="ArrowLeft"&&ot(i.value?"next":"prev"):it.key==="ArrowDown"?ot("next"):it.key==="ArrowUp"&&ot("prev"),it.key==="Home"?ot("first"):it.key==="End"&&ot("last")}function ke(it,ot){if(!it)return;let mt=it;do mt=mt?.[ot==="next"?"nextElementSibling":"previousElementSibling"];while(mt?.hasAttribute("disabled"));return mt}function Re(it){if(!A.el)return;let ot;if(!it)ot=t_(A.el)[0];else if(it==="next"){if(ot=ke(A.el.querySelector(":focus"),it),!ot)return Re("first")}else if(it==="prev"){if(ot=ke(A.el.querySelector(":focus"),it),!ot)return Re("last")}else it==="first"?(ot=A.el.firstElementChild,ot?.hasAttribute("disabled")&&(ot=ke(ot,"next"))):it==="last"&&(ot=A.el.lastElementChild,ot?.hasAttribute("disabled")&&(ot=ke(ot,"prev")));ot&&ot.focus({preventScroll:!0})}function Be(it){const ot=x.value&&i.value?-1:1,mt=(it==="prev"?-ot:ot)*p.value;let Pt=s.value+mt;if(x.value&&i.value&&T.el){const{scrollWidth:$t,offsetWidth:ct}=T.el;Pt+=$t-ct}re(Pt)}const Je=me(()=>({next:l.next,prev:l.prev,select:l.select,isSelected:l.isSelected})),nt=me(()=>h.value||Math.abs(s.value)>0),De=me(()=>{switch(e.showArrows){case"always":return!0;case"desktop":return!a.value;case!0:return nt.value;case"mobile":return a.value||nt.value;default:return!a.value&&nt.value}}),Ge=me(()=>Math.abs(s.value)>1),Ee=me(()=>{if(!T.value||!nt.value)return!1;const it=T4(x.value,T.el),ot=Ase(x.value,T.el);return it-ot-Math.abs(s.value)>1});return zt(()=>ce(e.tag,{class:_t(["v-slide-group",{"v-slide-group--vertical":!x.value,"v-slide-group--has-affixes":De.value,"v-slide-group--is-overflowing":h.value},r.value,e.class]),style:Xt(e.style),tabindex:Y.value||l.selected.value.length?-1:0,onFocus:ie},{default:()=>[De.value&&V("div",{key:"prev",class:_t(["v-slide-group__prev",{"v-slide-group__prev--disabled":!Ge.value}]),onMousedown:Q,onClick:()=>Ge.value&&Be("prev")},[n.prev?.(Je.value)??ce(K0,null,{default:()=>[ce(Pi,{icon:i.value?e.nextIcon:e.prevIcon},null)]})]),V("div",{key:"container",ref:T,class:_t(["v-slide-group__container",e.contentClass]),onScroll:X},[V("div",{ref:A,class:"v-slide-group__content",onFocusin:U,onFocusout:H,onKeydown:te},[n.default?.(Je.value)])]),De.value&&V("div",{key:"next",class:_t(["v-slide-group__next",{"v-slide-group__next--disabled":!Ee.value}]),onMousedown:Q,onClick:()=>Ee.value&&Be("next")},[n.next?.(Je.value)??ce(K0,null,{default:()=>[ce(Pi,{icon:i.value?e.prevIcon:e.nextIcon},null)]})])]})),{selected:l.selected,scrollTo:Be,scrollOffset:s,focus:Re,hasPrev:Ge,hasNext:Ee}}}),I2=Symbol.for("vuetify:v-chip-group"),Pse=lt({baseColor:String,column:Boolean,filter:Boolean,valueComparator:{type:Function,default:bo},...TP({scrollToActive:!1}),...Tn(),...lg({selectedClass:"v-chip--selected"}),...ti(),...Mi(),...Nc({variant:"tonal"})},"VChipGroup"),Mse=Mt()({name:"VChipGroup",props:Pse(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{themeClasses:i}=Qi(e),{isSelected:r,select:a,next:l,prev:h,selected:s}=fm(e,I2);return ts({VChip:{baseColor:$e(()=>e.baseColor),color:$e(()=>e.color),disabled:$e(()=>e.disabled),filter:$e(()=>e.filter),variant:$e(()=>e.variant)}}),zt(()=>{const p=Z0.filterProps(e);return ce(Z0,At(p,{class:["v-chip-group",{"v-chip-group--column":e.column},i.value,e.class],style:e.style}),{default:()=>[n.default?.({isSelected:r,select:a,next:l,prev:h,selected:s.value})]})}),{}}}),Dse=lt({activeClass:String,appendAvatar:String,appendIcon:In,baseColor:String,closable:Boolean,closeIcon:{type:In,default:"$delete"},closeLabel:{type:String,default:"$vuetify.close"},draggable:Boolean,filter:Boolean,filterIcon:{type:In,default:"$complete"},label:Boolean,link:{type:Boolean,default:void 0},pill:Boolean,prependAvatar:String,prependIcon:In,ripple:{type:[Boolean,Object],default:!0},text:{type:[String,Number,Boolean],default:void 0},modelValue:{type:Boolean,default:!0},onClick:zo(),onClickOnce:zo(),...cl(),...Tn(),...Ts(),...Ks(),...cg(),...Wr(),...Fb(),...md(),...ti({tag:"span"}),...Mi(),...Nc({variant:"tonal"})},"VChip"),Ds=Mt()({name:"VChip",directives:{vRipple:Ha},props:Dse(),emits:{"click:close":e=>!0,"update:modelValue":e=>!0,"group:selected":e=>!0,click:e=>!0},setup(e,t){let{attrs:n,emit:i,slots:r}=t;const{t:a}=fr(),{borderClasses:l}=Fl(e),{densityClasses:h}=qa(e),{elevationClasses:s}=wo(e),{roundedClasses:p}=ns(e),{sizeClasses:_}=w_(e),{themeClasses:x}=Qi(e),T=Pn(e,"modelValue"),k=nm(e,I2,!1),A=nm(e,wP,!1),M=Bb(e,n),R=$e(()=>e.link!==!1&&M.isLink.value),F=me(()=>!e.disabled&&e.link!==!1&&(!!k||e.link||M.isClickable.value)),z=$e(()=>({"aria-label":a(e.closeLabel),disabled:e.disabled,onClick(U){U.preventDefault(),U.stopPropagation(),T.value=!1,i("click:close",U)}}));Yt(T,U=>{U?(k?.register(),A?.register()):(k?.unregister(),A?.unregister())});const{colorClasses:G,colorStyles:Y,variantClasses:J}=ag(()=>({color:!k||k.isSelected.value?e.color??e.baseColor:e.baseColor,variant:e.variant}));function re(U){i("click",U),F.value&&(M.navigate?.(U),k?.toggle())}function X(U){(U.key==="Enter"||U.key===" ")&&(U.preventDefault(),re(U))}return()=>{const U=M.isLink.value?"a":e.tag,H=!!(e.appendIcon||e.appendAvatar),W=!!(H||r.append),ie=!!(r.close||e.closable),Q=!!(r.filter||e.filter)&&k,te=!!(e.prependIcon||e.prependAvatar),ke=!!(te||r.prepend);return T.value&&Li(ce(U,At(M.linkProps,{class:["v-chip",{"v-chip--disabled":e.disabled,"v-chip--label":e.label,"v-chip--link":F.value,"v-chip--filter":Q,"v-chip--pill":e.pill,[`${e.activeClass}`]:e.activeClass&&M.isActive?.value},x.value,l.value,G.value,h.value,s.value,p.value,_.value,J.value,k?.selectedClass.value,e.class],style:[Y.value,e.style],disabled:e.disabled||void 0,draggable:e.draggable,tabindex:F.value?0:void 0,onClick:re,onKeydown:F.value&&!R.value&&X}),{default:()=>[hm(F.value,"v-chip"),Q&&ce(xP,{key:"filter"},{default:()=>[Li(V("div",{class:"v-chip__filter"},[r.filter?ce(ui,{key:"filter-defaults",disabled:!e.filterIcon,defaults:{VIcon:{icon:e.filterIcon}}},r.filter):ce(Pi,{key:"filter-icon",icon:e.filterIcon},null)]),[[_u,k.isSelected.value]])]}),ke&&V("div",{key:"prepend",class:"v-chip__prepend"},[r.prepend?ce(ui,{key:"prepend-defaults",disabled:!te,defaults:{VAvatar:{image:e.prependAvatar,start:!0},VIcon:{icon:e.prependIcon,start:!0}}},r.prepend):V(an,null,[e.prependIcon&&ce(Pi,{key:"prepend-icon",icon:e.prependIcon,start:!0},null),e.prependAvatar&&ce(uc,{key:"prepend-avatar",image:e.prependAvatar,start:!0},null)])]),V("div",{class:"v-chip__content","data-no-activator":""},[r.default?.({isSelected:k?.isSelected.value,selectedClass:k?.selectedClass.value,select:k?.select,toggle:k?.toggle,value:k?.value.value,disabled:e.disabled})??en(e.text)]),W&&V("div",{key:"append",class:"v-chip__append"},[r.append?ce(ui,{key:"append-defaults",disabled:!H,defaults:{VAvatar:{end:!0,image:e.appendAvatar},VIcon:{end:!0,icon:e.appendIcon}}},r.append):V(an,null,[e.appendIcon&&ce(Pi,{key:"append-icon",end:!0,icon:e.appendIcon},null),e.appendAvatar&&ce(uc,{key:"append-avatar",end:!0,image:e.appendAvatar},null)])]),ie&&V("button",At({key:"close",class:"v-chip__close",type:"button","data-testid":"close-chip"},z.value),[r.close?ce(ui,{key:"close-defaults",defaults:{VIcon:{icon:e.closeIcon,size:"x-small"}}},r.close):ce(Pi,{key:"close-icon",icon:e.closeIcon,size:"x-small"},null)])]}),[[Ha,F.value&&e.ripple,null]])}}}),Lse=lt({color:String,inset:Boolean,length:[Number,String],opacity:[Number,String],thickness:[Number,String],vertical:Boolean,...Tn(),...Mi()},"VDivider"),oc=Mt()({name:"VDivider",props:Lse(),setup(e,t){let{attrs:n,slots:i}=t;const{themeClasses:r}=Qi(e),{textColorClasses:a,textColorStyles:l}=Uo(()=>e.color),h=me(()=>{const s={};return e.length&&(s[e.vertical?"height":"width"]=pn(e.length)),e.thickness&&(s[e.vertical?"borderRightWidth":"borderTopWidth"]=pn(e.thickness)),s});return zt(()=>{const s=V("hr",{class:_t([{"v-divider":!0,"v-divider--inset":e.inset,"v-divider--vertical":e.vertical},r.value,a.value,e.class]),style:Xt([h.value,l.value,{"--v-border-opacity":e.opacity},e.style]),"aria-orientation":!n.role||n.role==="separator"?e.vertical?"vertical":"horizontal":void 0,role:`${n.role||"separator"}`},null);return i.default?V("div",{class:_t(["v-divider__wrapper",{"v-divider__wrapper--vertical":e.vertical,"v-divider__wrapper--inset":e.inset}])},[s,V("div",{class:"v-divider__content"},[i.default()]),s]):s}),{}}}),Wk=Symbol.for("vuetify:list");function A2(){let{filterable:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{filterable:!1};const t=Si(Wk,{filterable:!1,hasPrepend:tn(!1),updateHasPrepend:()=>null}),n={filterable:t.filterable||e,hasPrepend:tn(!1),updateHasPrepend:i=>{i&&(n.hasPrepend.value=i)}};return Rr(Wk,n),t}function P2(){return Si(Wk,null)}const SP=e=>{const t={activate:n=>{let{id:i,value:r,activated:a}=n;return i=Un(i),e&&!r&&a.size===1&&a.has(i)||(r?a.add(i):a.delete(i)),a},in:(n,i,r)=>{let a=new Set;if(n!=null)for(const l of Xr(n))a=t.activate({id:l,value:!0,activated:new Set(a),children:i,parents:r});return a},out:n=>Array.from(n)};return t},M2=e=>{const t=SP(e);return{activate:i=>{let{activated:r,id:a,...l}=i;a=Un(a);const h=r.has(a)?new Set([a]):new Set;return t.activate({...l,id:a,activated:h})},in:(i,r,a)=>{let l=new Set;if(i!=null){const h=Xr(i);h.length&&(l=t.in(h.slice(0,1),r,a))}return l},out:(i,r,a)=>t.out(i,r,a)}},Rse=e=>{const t=SP(e);return{activate:i=>{let{id:r,activated:a,children:l,...h}=i;return r=Un(r),l.has(r)?a:t.activate({id:r,activated:a,children:l,...h})},in:t.in,out:t.out}},Ose=e=>{const t=M2(e);return{activate:i=>{let{id:r,activated:a,children:l,...h}=i;return r=Un(r),l.has(r)?a:t.activate({id:r,activated:a,children:l,...h})},in:t.in,out:t.out}},Vse={open:e=>{let{id:t,value:n,opened:i,parents:r}=e;if(n){const a=new Set;a.add(t);let l=r.get(t);for(;l!=null;)a.add(l),l=r.get(l);return a}else return i.delete(t),i},select:()=>null},D2={open:e=>{let{id:t,value:n,opened:i,parents:r}=e;if(n){let a=r.get(t);for(i.add(t);a!=null&&a!==t;)i.add(a),a=r.get(a);return i}else i.delete(t);return i},select:()=>null},Bse={open:D2.open,select:e=>{let{id:t,value:n,opened:i,parents:r}=e;if(!n)return i;const a=[];let l=r.get(t);for(;l!=null;)a.push(l),l=r.get(l);return new Set(a)}},EP=e=>{const t={select:n=>{let{id:i,value:r,selected:a}=n;if(i=Un(i),e&&!r){const l=Array.from(a.entries()).reduce((h,s)=>{let[p,_]=s;return _==="on"&&h.push(p),h},[]);if(l.length===1&&l[0]===i)return a}return a.set(i,r?"on":"off"),a},in:(n,i,r,a)=>{const l=new Map;for(const h of n||[])t.select({id:h,value:!0,selected:l,children:i,parents:r,disabled:a});return l},out:n=>{const i=[];for(const[r,a]of n.entries())a==="on"&&i.push(r);return i}};return t},L2=e=>{const t=EP(e);return{select:i=>{let{selected:r,id:a,...l}=i;a=Un(a);const h=r.has(a)?new Map([[a,r.get(a)]]):new Map;return t.select({...l,id:a,selected:h})},in:(i,r,a,l)=>i?.length?t.in(i.slice(0,1),r,a,l):new Map,out:(i,r,a)=>t.out(i,r,a)}},Fse=e=>{const t=EP(e);return{select:i=>{let{id:r,selected:a,children:l,...h}=i;return r=Un(r),l.has(r)?a:t.select({id:r,selected:a,children:l,...h})},in:t.in,out:t.out}},zse=e=>{const t=L2(e);return{select:i=>{let{id:r,selected:a,children:l,...h}=i;return r=Un(r),l.has(r)?a:t.select({id:r,selected:a,children:l,...h})},in:t.in,out:t.out}},R2=e=>{const t={select:n=>{let{id:i,value:r,selected:a,children:l,parents:h,disabled:s}=n;i=Un(i);const p=new Map(a),_=[i];for(;_.length;){const T=_.shift();s.has(T)||a.set(Un(T),r?"on":"off"),l.has(T)&&_.push(...l.get(T))}let x=Un(h.get(i));for(;x;){let T=!0,k=!0;for(const A of l.get(x)){const M=Un(A);if(!s.has(M)&&(a.get(M)!=="on"&&(T=!1),a.has(M)&&a.get(M)!=="off"&&(k=!1),!T&&!k))break}a.set(x,T?"on":k?"off":"indeterminate"),x=Un(h.get(x))}return e&&!r&&Array.from(a.entries()).reduce((k,A)=>{let[M,R]=A;return R==="on"&&k.push(M),k},[]).length===0?p:a},in:(n,i,r,a)=>{let l=new Map;for(const h of n||[])l=t.select({id:h,value:!0,selected:l,children:i,parents:r,disabled:a});return l},out:(n,i)=>{const r=[];for(const[a,l]of n.entries())l==="on"&&!i.has(a)&&r.push(a);return r}};return t},Nse=e=>{const t=R2(e);return{select:t.select,in:t.in,out:(i,r,a)=>{const l=[];for(const[h,s]of i.entries())if(s==="on"){if(a.has(h)){const p=a.get(h);if(i.get(p)==="on")continue}l.push(h)}return l}}},J0=Symbol.for("vuetify:nested"),O2={id:tn(),root:{register:()=>null,unregister:()=>null,children:tt(new Map),parents:tt(new Map),disabled:tt(new Set),open:()=>null,openOnSelect:()=>null,activate:()=>null,select:()=>null,activatable:tt(!1),selectable:tt(!1),opened:tt(new Set),activated:tt(new Set),selected:tt(new Map),selectedValues:tt([]),getPath:()=>[]}},$se=lt({activatable:Boolean,selectable:Boolean,activeStrategy:[String,Function,Object],selectStrategy:[String,Function,Object],openStrategy:[String,Object],opened:null,activated:null,selected:null,mandatory:Boolean},"nested"),Use=e=>{let t=!1;const n=tn(new Map),i=tn(new Map),r=tn(new Set),a=Pn(e,"opened",e.opened,R=>new Set(Array.isArray(R)?R.map(F=>Un(F)):R),R=>[...R.values()]),l=me(()=>{if(typeof e.activeStrategy=="object")return e.activeStrategy;if(typeof e.activeStrategy=="function")return e.activeStrategy(e.mandatory);switch(e.activeStrategy){case"leaf":return Rse(e.mandatory);case"single-leaf":return Ose(e.mandatory);case"independent":return SP(e.mandatory);case"single-independent":default:return M2(e.mandatory)}}),h=me(()=>{if(typeof e.selectStrategy=="object")return e.selectStrategy;if(typeof e.selectStrategy=="function")return e.selectStrategy(e.mandatory);switch(e.selectStrategy){case"single-leaf":return zse(e.mandatory);case"leaf":return Fse(e.mandatory);case"independent":return EP(e.mandatory);case"single-independent":return L2(e.mandatory);case"trunk":return Nse(e.mandatory);case"classic":default:return R2(e.mandatory)}}),s=me(()=>{if(typeof e.openStrategy=="object")return e.openStrategy;switch(e.openStrategy){case"list":return Bse;case"single":return Vse;case"multiple":default:return D2}}),p=Pn(e,"activated",e.activated,R=>l.value.in(R,n.value,i.value),R=>l.value.out(R,n.value,i.value)),_=Pn(e,"selected",e.selected,R=>h.value.in(R,n.value,i.value,r.value),R=>h.value.out(R,n.value,i.value));Ur(()=>{t=!0});function x(R){const F=[];let z=Un(R);for(;z!==void 0;)F.unshift(z),z=i.value.get(z);return F}const T=ws("nested"),k=new Set,A=eie(()=>{Hn(()=>{n.value=new Map(n.value),i.value=new Map(i.value)})},100),M={id:tn(),root:{opened:a,activatable:$e(()=>e.activatable),selectable:$e(()=>e.selectable),activated:p,selected:_,selectedValues:me(()=>{const R=[];for(const[F,z]of _.value.entries())z==="on"&&R.push(F);return R}),register:(R,F,z,G)=>{if(k.has(R)){x(R).map(String).join(" -> "),x(F).concat(R).map(String).join(" -> ");return}else k.add(R);F&&R!==F&&i.value.set(R,F),z&&r.value.add(R),G&&n.value.set(R,[]),F!=null&&n.value.set(F,[...n.value.get(F)||[],R]),A()},unregister:R=>{if(t)return;k.delete(R),n.value.delete(R),r.value.delete(R);const F=i.value.get(R);if(F){const z=n.value.get(F)??[];n.value.set(F,z.filter(G=>G!==R))}i.value.delete(R),A()},open:(R,F,z)=>{T.emit("click:open",{id:R,value:F,path:x(R),event:z});const G=s.value.open({id:R,value:F,opened:new Set(a.value),children:n.value,parents:i.value,event:z});G&&(a.value=G)},openOnSelect:(R,F,z)=>{const G=s.value.select({id:R,value:F,selected:new Map(_.value),opened:new Set(a.value),children:n.value,parents:i.value,event:z});G&&(a.value=G)},select:(R,F,z)=>{T.emit("click:select",{id:R,value:F,path:x(R),event:z});const G=h.value.select({id:R,value:F,selected:new Map(_.value),children:n.value,parents:i.value,disabled:r.value,event:z});G&&(_.value=G),M.root.openOnSelect(R,F,z)},activate:(R,F,z)=>{if(!e.activatable)return M.root.select(R,!0,z);T.emit("click:activate",{id:R,value:F,path:x(R),event:z});const G=l.value.activate({id:R,value:F,activated:new Set(p.value),children:n.value,parents:i.value,event:z});if(G.size!==p.value.size)p.value=G;else{for(const Y of G)if(!p.value.has(Y)){p.value=G;return}for(const Y of p.value)if(!G.has(Y)){p.value=G;return}}},children:n,parents:i,disabled:r,getPath:x}};return Rr(J0,M),M.root},V2=(e,t,n)=>{const i=Si(J0,O2),r=Symbol("nested item"),a=me(()=>{const h=Un(Ua(e));return h!==void 0?h:r}),l={...i,id:a,open:(h,s)=>i.root.open(a.value,h,s),openOnSelect:(h,s)=>i.root.openOnSelect(a.value,h,s),isOpen:me(()=>i.root.opened.value.has(a.value)),parent:me(()=>i.root.parents.value.get(a.value)),activate:(h,s)=>i.root.activate(a.value,h,s),isActivated:me(()=>i.root.activated.value.has(a.value)),select:(h,s)=>i.root.select(a.value,h,s),isSelected:me(()=>i.root.selected.value.get(a.value)==="on"),isIndeterminate:me(()=>i.root.selected.value.get(a.value)==="indeterminate"),isLeaf:me(()=>!i.root.children.value.get(a.value)),isGroupActivator:i.isGroupActivator};return m_(()=>{i.isGroupActivator||Hn(()=>{i.root.register(a.value,i.id.value,Ua(t),n)})}),Ur(()=>{i.isGroupActivator||i.root.unregister(a.value)}),Yt(a,(h,s)=>{i.isGroupActivator||(i.root.unregister(s),Hn(()=>{i.root.register(h,i.id.value,Ua(t),n)}))}),n&&Rr(J0,l),l},jse=()=>{const e=Si(J0,O2);Rr(J0,{...e,isGroupActivator:!0})};function dg(){const e=tn(!1);return Mr(()=>{window.requestAnimationFrame(()=>{e.value=!0})}),{ssrBootStyles:$e(()=>e.value?void 0:{transition:"none !important"}),isBooted:Vp(e)}}const Wse=dc({name:"VListGroupActivator",setup(e,t){let{slots:n}=t;return jse(),()=>n.default?.()}}),B2=lt({activeColor:String,baseColor:String,color:String,collapseIcon:{type:In,default:"$collapse"},disabled:Boolean,expandIcon:{type:In,default:"$expand"},rawId:[String,Number],prependIcon:In,appendIcon:In,fluid:Boolean,subgroup:Boolean,title:String,value:null,...Tn(),...ti()},"VListGroup"),Q0=Mt()({name:"VListGroup",props:B2(),setup(e,t){let{slots:n}=t;const{isOpen:i,open:r,id:a}=V2(()=>e.value,()=>e.disabled,!0),l=me(()=>`v-list-group--id-${String(e.rawId??a.value)}`),h=P2(),{isBooted:s}=dg();function p(k){["INPUT","TEXTAREA"].includes(k.target?.tagName)||r(!i.value,k)}const _=me(()=>({onClick:p,class:"v-list-group__header",id:l.value})),x=me(()=>i.value?e.collapseIcon:e.expandIcon),T=me(()=>({VListItem:{activeColor:e.activeColor,baseColor:e.baseColor,color:e.color,prependIcon:e.prependIcon||e.subgroup&&x.value,appendIcon:e.appendIcon||!e.subgroup&&x.value,title:e.title,value:e.value}}));return zt(()=>ce(e.tag,{class:_t(["v-list-group",{"v-list-group--prepend":h?.hasPrepend.value,"v-list-group--fluid":e.fluid,"v-list-group--subgroup":e.subgroup,"v-list-group--open":i.value},e.class]),style:Xt(e.style)},{default:()=>[n.activator&&ce(ui,{defaults:T.value},{default:()=>[ce(Wse,null,{default:()=>[n.activator({props:_.value,isOpen:i.value})]})]}),ce(Na,{transition:{component:NT},disabled:!s.value},{default:()=>[Li(V("div",{class:"v-list-group__items",role:"group","aria-labelledby":l.value},[n.default?.()]),[[_u,i.value]])]})]})),{isOpen:i}}}),Hse=lt({opacity:[Number,String],...Tn(),...ti()},"VListItemSubtitle"),F2=Mt()({name:"VListItemSubtitle",props:Hse(),setup(e,t){let{slots:n}=t;return zt(()=>ce(e.tag,{class:_t(["v-list-item-subtitle",e.class]),style:Xt([{"--v-list-item-subtitle-opacity":e.opacity},e.style])},n)),{}}}),z2=Ih("v-list-item-title"),N2=lt({active:{type:Boolean,default:void 0},activeClass:String,activeColor:String,appendAvatar:String,appendIcon:In,baseColor:String,disabled:Boolean,lines:[Boolean,String],link:{type:Boolean,default:void 0},nav:Boolean,prependAvatar:String,prependIcon:In,ripple:{type:[Boolean,Object],default:!0},slim:Boolean,subtitle:{type:[String,Number,Boolean],default:void 0},title:{type:[String,Number,Boolean],default:void 0},value:null,onClick:zo(),onClickOnce:zo(),...cl(),...Tn(),...Ts(),...Bs(),...Ks(),...Wr(),...Fb(),...ti(),...Mi(),...Nc({variant:"text"})},"VListItem"),vu=Mt()({name:"VListItem",directives:{vRipple:Ha},props:N2(),emits:{click:e=>!0},setup(e,t){let{attrs:n,slots:i,emit:r}=t;const a=Bb(e,n),l=me(()=>e.value===void 0?a.href.value:e.value),{activate:h,isActivated:s,select:p,isOpen:_,isSelected:x,isIndeterminate:T,isGroupActivator:k,root:A,parent:M,openOnSelect:R,id:F}=V2(l,()=>e.disabled,!1),z=P2(),G=me(()=>e.active!==!1&&(e.active||a.isActive?.value||(A.activatable.value?s.value:x.value))),Y=$e(()=>e.link!==!1&&a.isLink.value),J=me(()=>!!z&&(A.selectable.value||A.activatable.value||e.value!=null)),re=me(()=>!e.disabled&&e.link!==!1&&(e.link||a.isClickable.value||J.value)),X=me(()=>z?Y.value?"link":J.value?"option":"listitem":void 0),U=me(()=>{if(J.value)return A.activatable.value?s.value:A.selectable.value?x.value:G.value}),H=$e(()=>e.rounded||e.nav),W=$e(()=>e.color??e.activeColor),ie=$e(()=>({color:G.value?W.value??e.baseColor:e.baseColor,variant:e.variant}));Yt(()=>a.isActive?.value,ct=>{ct&&Q()}),m_(()=>{a.isActive?.value&&Hn(()=>Q())});function Q(){M.value!=null&&A.open(M.value,!0),R(!0)}const{themeClasses:te}=Qi(e),{borderClasses:ke}=Fl(e),{colorClasses:Re,colorStyles:Be,variantClasses:Je}=ag(ie),{densityClasses:nt}=qa(e),{dimensionStyles:De}=Fs(e),{elevationClasses:Ge}=wo(e),{roundedClasses:Ee}=ns(H),it=$e(()=>e.lines?`v-list-item--${e.lines}-line`:void 0),ot=$e(()=>e.ripple!==void 0&&e.ripple&&z?.filterable?{keys:["Enter"]}:e.ripple),mt=me(()=>({isActive:G.value,select:p,isOpen:_.value,isSelected:x.value,isIndeterminate:T.value}));function Pt(ct){r("click",ct),!["INPUT","TEXTAREA"].includes(ct.target?.tagName)&&re.value&&(a.navigate?.(ct),!k&&(A.activatable.value?h(!s.value,ct):(A.selectable.value||e.value!=null&&!Y.value)&&p(!x.value,ct)))}function $t(ct){const ht=ct.target;["INPUT","TEXTAREA"].includes(ht.tagName)||(ct.key==="Enter"||ct.key===" "&&!z?.filterable)&&(ct.preventDefault(),ct.stopPropagation(),ct.target.dispatchEvent(new MouseEvent("click",ct)))}return zt(()=>{const ct=Y.value?"a":e.tag,ht=i.title||e.title!=null,Qe=i.subtitle||e.subtitle!=null,kt=!!(e.appendAvatar||e.appendIcon),Ue=!!(kt||i.append),ue=!!(e.prependAvatar||e.prependIcon),we=!!(ue||i.prepend);return z?.updateHasPrepend(we),e.activeColor&&mN("active-color",["color","base-color"]),Li(ce(ct,At(a.linkProps,{class:["v-list-item",{"v-list-item--active":G.value,"v-list-item--disabled":e.disabled,"v-list-item--link":re.value,"v-list-item--nav":e.nav,"v-list-item--prepend":!we&&z?.hasPrepend.value,"v-list-item--slim":e.slim,[`${e.activeClass}`]:e.activeClass&&G.value},te.value,ke.value,Re.value,nt.value,Ge.value,it.value,Ee.value,Je.value,e.class],style:[Be.value,De.value,e.style],tabindex:re.value?z?-2:0:void 0,"aria-selected":U.value,role:X.value,onClick:Pt,onKeydown:re.value&&!Y.value&&$t}),{default:()=>[hm(re.value||G.value,"v-list-item"),we&&V("div",{key:"prepend",class:"v-list-item__prepend"},[i.prepend?ce(ui,{key:"prepend-defaults",disabled:!ue,defaults:{VAvatar:{density:e.density,image:e.prependAvatar},VIcon:{density:e.density,icon:e.prependIcon},VListItemAction:{start:!0}}},{default:()=>[i.prepend?.(mt.value)]}):V(an,null,[e.prependAvatar&&ce(uc,{key:"prepend-avatar",density:e.density,image:e.prependAvatar},null),e.prependIcon&&ce(Pi,{key:"prepend-icon",density:e.density,icon:e.prependIcon},null)]),V("div",{class:"v-list-item__spacer"},null)]),V("div",{class:"v-list-item__content","data-no-activator":""},[ht&&ce(z2,{key:"title"},{default:()=>[i.title?.({title:e.title})??en(e.title)]}),Qe&&ce(F2,{key:"subtitle"},{default:()=>[i.subtitle?.({subtitle:e.subtitle})??en(e.subtitle)]}),i.default?.(mt.value)]),Ue&&V("div",{key:"append",class:"v-list-item__append"},[i.append?ce(ui,{key:"append-defaults",disabled:!kt,defaults:{VAvatar:{density:e.density,image:e.appendAvatar},VIcon:{density:e.density,icon:e.appendIcon},VListItemAction:{end:!0}}},{default:()=>[i.append?.(mt.value)]}):V(an,null,[e.appendIcon&&ce(Pi,{key:"append-icon",density:e.density,icon:e.appendIcon},null),e.appendAvatar&&ce(uc,{key:"append-avatar",density:e.density,image:e.appendAvatar},null)]),V("div",{class:"v-list-item__spacer"},null)])]}),[[Ha,re.value&&ot.value]])}),{activate:h,isActivated:s,isGroupActivator:k,isSelected:x,list:z,select:p,root:A,id:F,link:a}}}),Gse=lt({color:String,inset:Boolean,sticky:Boolean,title:String,...Tn(),...ti()},"VListSubheader"),k_=Mt()({name:"VListSubheader",props:Gse(),setup(e,t){let{slots:n}=t;const{textColorClasses:i,textColorStyles:r}=Uo(()=>e.color);return zt(()=>{const a=!!(n.default||e.title);return ce(e.tag,{class:_t(["v-list-subheader",{"v-list-subheader--inset":e.inset,"v-list-subheader--sticky":e.sticky},i.value,e.class]),style:Xt([{textColorStyles:r},e.style])},{default:()=>[a&&V("div",{class:"v-list-subheader__text"},[n.default?.()??e.title])]})}),{}}}),qse=lt({items:Array,returnObject:Boolean},"VListChildren"),$2=Mt()({name:"VListChildren",props:qse(),setup(e,t){let{slots:n}=t;return A2(),()=>n.default?.()??e.items?.map(i=>{let{children:r,props:a,type:l,raw:h}=i;if(l==="divider")return n.divider?.({props:a})??ce(oc,a,null);if(l==="subheader")return n.subheader?.({props:a})??ce(k_,a,null);const s={subtitle:n.subtitle?_=>n.subtitle?.({..._,item:h}):void 0,prepend:n.prepend?_=>n.prepend?.({..._,item:h}):void 0,append:n.append?_=>n.append?.({..._,item:h}):void 0,title:n.title?_=>n.title?.({..._,item:h}):void 0},p=Q0.filterProps(a);return r?ce(Q0,At(p,{value:e.returnObject?h:a?.value,rawId:a?.value}),{activator:_=>{let{props:x}=_;const T=At(a,x,{value:e.returnObject?h:a.value});return n.header?n.header({props:T}):ce(vu,T,s)},default:()=>ce($2,{items:r,returnObject:e.returnObject},n)}):n.item?n.item({props:a}):ce(vu,At(a,{value:e.returnObject?h:a.value}),s)})}}),U2=lt({items:{type:Array,default:()=>[]},itemTitle:{type:[String,Array,Function],default:"title"},itemValue:{type:[String,Array,Function],default:"value"},itemChildren:{type:[Boolean,String,Array,Function],default:"children"},itemProps:{type:[Boolean,String,Array,Function],default:"props"},itemType:{type:[Boolean,String,Array,Function],default:"type"},returnObject:Boolean,valueComparator:Function},"list-items"),Kse=new Set(["item","divider","subheader"]);function lu(e,t){const n=Ls(t,e.itemTitle,t),i=Ls(t,e.itemValue,n),r=Ls(t,e.itemChildren),a=e.itemProps===!0?typeof t=="object"&&t!=null&&!Array.isArray(t)?"children"in t?hr(t,["children"]):t:void 0:Ls(t,e.itemProps);let l=Ls(t,e.itemType,"item");Kse.has(l)||(l="item");const h={title:n,value:i,...a};return{type:l,title:String(h.title??""),value:h.value,props:h,children:l==="item"&&Array.isArray(r)?j2(e,r):void 0,raw:t}}lu.neededProps=["itemTitle","itemValue","itemChildren","itemProps","itemType"];function j2(e,t){const n=Vl(e,lu.neededProps),i=[];for(const r of t)i.push(lu(n,r));return i}function CP(e){const t=me(()=>j2(e,e.items)),n=me(()=>t.value.some(h=>h.value===null)),i=tn(new Map),r=tn([]);jr(()=>{const h=t.value,s=new Map,p=[];for(let _=0;_<h.length;_++){const x=h[_];if(tm(x.value)||x.value===null){let T=s.get(x.value);T||(T=[],s.set(x.value,T)),T.push(x)}else p.push(x)}i.value=s,r.value=p});function a(h){const s=i.value,p=t.value,_=r.value,x=n.value,T=e.returnObject,k=!!e.valueComparator,A=e.valueComparator||bo,M=Vl(e,lu.neededProps),R=[];e:for(const F of h){if(!x&&F===null)continue;if(T&&typeof F=="string"){R.push(lu(M,F));continue}const z=s.get(F);if(k||!z){for(const G of k?p:_)if(A(F,G.value)){R.push(G);continue e}R.push(lu(M,F));continue}R.push(...z)}return R}function l(h){return e.returnObject?h.map(s=>{let{raw:p}=s;return p}):h.map(s=>{let{value:p}=s;return p})}return{items:t,transformIn:a,transformOut:l}}const Xse=new Set(["item","divider","subheader"]);function Yse(e,t){const n=tm(t)?t:Ls(t,e.itemTitle),i=tm(t)?t:Ls(t,e.itemValue,void 0),r=Ls(t,e.itemChildren),a=e.itemProps===!0?hr(t,["children"]):Ls(t,e.itemProps);let l=Ls(t,e.itemType,"item");Xse.has(l)||(l="item");const h={title:n,value:i,...a};return{type:l,title:h.title,value:h.value,props:h,children:l==="item"&&r?W2(e,r):void 0,raw:t}}function W2(e,t){const n=[];for(const i of t)n.push(Yse(e,i));return n}function H2(e){return{items:me(()=>W2(e,e.items))}}const G2=lt({baseColor:String,activeColor:String,activeClass:String,bgColor:String,disabled:Boolean,filterable:Boolean,expandIcon:In,collapseIcon:In,lines:{type:[Boolean,String],default:"one"},slim:Boolean,nav:Boolean,"onClick:open":zo(),"onClick:select":zo(),"onUpdate:opened":zo(),...$se({selectStrategy:"single-leaf",openStrategy:"list"}),...cl(),...Tn(),...Ts(),...Bs(),...Ks(),...U2(),...Wr(),...ti(),...Mi(),...Nc({variant:"text"})},"VList"),o_=Mt()({name:"VList",props:G2(),emits:{"update:selected":e=>!0,"update:activated":e=>!0,"update:opened":e=>!0,"click:open":e=>!0,"click:activate":e=>!0,"click:select":e=>!0},setup(e,t){let{slots:n}=t;const{items:i}=H2(e),{themeClasses:r}=Qi(e),{backgroundColorClasses:a,backgroundColorStyles:l}=ir(()=>e.bgColor),{borderClasses:h}=Fl(e),{densityClasses:s}=qa(e),{dimensionStyles:p}=Fs(e),{elevationClasses:_}=wo(e),{roundedClasses:x}=ns(e),{children:T,open:k,parents:A,select:M,getPath:R}=Use(e),F=$e(()=>e.lines?`v-list--${e.lines}-line`:void 0),z=$e(()=>e.activeColor),G=$e(()=>e.baseColor),Y=$e(()=>e.color),J=$e(()=>e.selectable||e.activatable);A2({filterable:e.filterable}),ts({VListGroup:{activeColor:z,baseColor:G,color:Y,expandIcon:$e(()=>e.expandIcon),collapseIcon:$e(()=>e.collapseIcon)},VListItem:{activeClass:$e(()=>e.activeClass),activeColor:z,baseColor:G,color:Y,density:$e(()=>e.density),disabled:$e(()=>e.disabled),lines:$e(()=>e.lines),nav:$e(()=>e.nav),slim:$e(()=>e.slim),variant:$e(()=>e.variant)}});const re=tn(!1),X=tt();function U(ke){re.value=!0}function H(ke){re.value=!1}function W(ke){!re.value&&!(ke.relatedTarget&&X.value?.contains(ke.relatedTarget))&&te()}function ie(ke){const Re=ke.target;if(!(!X.value||Re.tagName==="INPUT"&&["Home","End"].includes(ke.key)||Re.tagName==="TEXTAREA")){if(ke.key==="ArrowDown")te("next");else if(ke.key==="ArrowUp")te("prev");else if(ke.key==="Home")te("first");else if(ke.key==="End")te("last");else return;ke.preventDefault()}}function Q(ke){re.value=!0}function te(ke){if(X.value)return Mp(X.value,ke)}return zt(()=>ce(e.tag,{ref:X,class:_t(["v-list",{"v-list--disabled":e.disabled,"v-list--nav":e.nav,"v-list--slim":e.slim},r.value,a.value,h.value,s.value,_.value,F.value,x.value,e.class]),style:Xt([l.value,p.value,e.style]),tabindex:e.disabled?-1:0,role:J.value?"listbox":"list","aria-activedescendant":void 0,onFocusin:U,onFocusout:H,onFocus:W,onKeydown:ie,onMousedown:Q},{default:()=>[ce($2,{items:i.value,returnObject:e.returnObject},n)]})),{open:k,select:M,focus:te,children:T,parents:A,getPath:R}}}),Zse=Ih("v-list-img"),Jse=lt({start:Boolean,end:Boolean,...Tn(),...ti()},"VListItemAction"),kP=Mt()({name:"VListItemAction",props:Jse(),setup(e,t){let{slots:n}=t;return zt(()=>ce(e.tag,{class:_t(["v-list-item-action",{"v-list-item-action--start":e.start,"v-list-item-action--end":e.end},e.class]),style:Xt(e.style)},n)),{}}}),Qse=lt({start:Boolean,end:Boolean,...Tn(),...ti()},"VListItemMedia"),eoe=Mt()({name:"VListItemMedia",props:Qse(),setup(e,t){let{slots:n}=t;return zt(()=>ce(e.tag,{class:_t(["v-list-item-media",{"v-list-item-media--start":e.start,"v-list-item-media--end":e.end},e.class]),style:Xt(e.style)},n)),{}}});function uC(e,t){return{x:e.x+t.x,y:e.y+t.y}}function toe(e,t){return{x:e.x-t.x,y:e.y-t.y}}function S4(e,t){if(e.side==="top"||e.side==="bottom"){const{side:n,align:i}=e,r=i==="left"?0:i==="center"?t.width/2:i==="right"?t.width:i,a=n==="top"?0:n==="bottom"?t.height:n;return uC({x:r,y:a},t)}else if(e.side==="left"||e.side==="right"){const{side:n,align:i}=e,r=n==="left"?0:n==="right"?t.width:n,a=i==="top"?0:i==="center"?t.height/2:i==="bottom"?t.height:i;return uC({x:r,y:a},t)}return uC({x:t.width/2,y:t.height/2},t)}const q2={static:roe,connected:ooe},noe=lt({locationStrategy:{type:[String,Function],default:"static",validator:e=>typeof e=="function"||e in q2},location:{type:String,default:"bottom"},origin:{type:String,default:"auto"},offset:[Number,String,Array],stickToTarget:Boolean},"VOverlay-location-strategies");function ioe(e,t){const n=tt({}),i=tt();Xi&&ca(()=>!!(t.isActive.value&&e.locationStrategy),h=>{Yt(()=>e.locationStrategy,h),ao(()=>{window.removeEventListener("resize",r),visualViewport?.removeEventListener("resize",a),visualViewport?.removeEventListener("scroll",l),i.value=void 0}),window.addEventListener("resize",r,{passive:!0}),visualViewport?.addEventListener("resize",a,{passive:!0}),visualViewport?.addEventListener("scroll",l,{passive:!0}),typeof e.locationStrategy=="function"?i.value=e.locationStrategy(t,e,n)?.updateLocation:i.value=q2[e.locationStrategy](t,e,n)?.updateLocation});function r(h){i.value?.(h)}function a(h){i.value?.(h)}function l(h){i.value?.(h)}return{contentStyles:n,updateLocation:i}}function roe(){}function soe(e,t){const n=oP(e);return t?n.x+=parseFloat(e.style.right||0):n.x-=parseFloat(e.style.left||0),n.y-=parseFloat(e.style.top||0),n}function ooe(e,t,n){(Array.isArray(e.target.value)||Qne(e.target.value))&&Object.assign(n.value,{position:"fixed",top:0,[e.isRtl.value?"right":"left"]:0});const{preferredAnchor:r,preferredOrigin:a}=sP(()=>{const F=Dk(t.location,e.isRtl.value),z=t.origin==="overlap"?F:t.origin==="auto"?nC(F):Dk(t.origin,e.isRtl.value);return F.side===z.side&&F.align===iC(z).align?{preferredAnchor:F5(F),preferredOrigin:F5(z)}:{preferredAnchor:F,preferredOrigin:z}}),[l,h,s,p]=["minWidth","minHeight","maxWidth","maxHeight"].map(F=>me(()=>{const z=parseFloat(t[F]);return isNaN(z)?1/0:z})),_=me(()=>{if(Array.isArray(t.offset))return t.offset;if(typeof t.offset=="string"){const F=t.offset.split(" ").map(parseFloat);return F.length<2&&F.push(0),F}return typeof t.offset=="number"?[t.offset,0]:[0,0]});let x=!1,T=-1;const k=new xN(4),A=new ResizeObserver(()=>{if(!x)return;if(requestAnimationFrame(z=>{z!==T&&k.clear(),requestAnimationFrame(G=>{T=G})}),k.isFull){const z=k.values();if(bo(z.at(-1),z.at(-3))&&!bo(z.at(-1),z.at(-2)))return}const F=R();F&&k.push(F.flipped)});let M=new Bc({x:0,y:0,width:0,height:0});Yt(e.target,(F,z)=>{z&&!Array.isArray(z)&&A.unobserve(z),Array.isArray(F)?bo(F,z)||R():F&&A.observe(F)},{immediate:!0}),Yt(e.contentEl,(F,z)=>{z&&A.unobserve(z),F&&A.observe(F)},{immediate:!0}),ao(()=>{A.disconnect()});function R(){if(x=!1,requestAnimationFrame(()=>x=!0),!e.target.value||!e.contentEl.value)return;(Array.isArray(e.target.value)||e.target.value.offsetParent||e.target.value.getClientRects().length)&&(M=CN(e.target.value));const F=soe(e.contentEl.value,e.isRtl.value),z=Aw(e.contentEl.value),G=t.stickToTarget?0:12;z.length||(z.push(document.documentElement),e.contentEl.value.style.top&&e.contentEl.value.style.left||(F.x-=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-x")||0),F.y-=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-y")||0)));const Y=z.reduce((te,ke)=>{const Re=bne(ke);return te?new Bc({x:Math.max(te.left,Re.left),y:Math.max(te.top,Re.top),width:Math.min(te.right,Re.right)-Math.max(te.left,Re.left),height:Math.min(te.bottom,Re.bottom)-Math.max(te.top,Re.top)}):Re},void 0);t.stickToTarget?(Y.x+=Math.min(0,M.x),Y.y+=Math.min(0,M.y),Y.width=Math.max(Y.width,M.x+M.width),Y.height=Math.max(Y.height,M.y+M.height)):(Y.x+=G,Y.y+=G,Y.width-=G*2,Y.height-=G*2);let J={anchor:r.value,origin:a.value};function re(te){const ke=new Bc(F),Re=S4(te.anchor,M),Be=S4(te.origin,ke);let{x:Je,y:nt}=toe(Re,Be);switch(te.anchor.side){case"top":nt-=_.value[0];break;case"bottom":nt+=_.value[0];break;case"left":Je-=_.value[0];break;case"right":Je+=_.value[0];break}switch(te.anchor.align){case"top":nt-=_.value[1];break;case"bottom":nt+=_.value[1];break;case"left":Je-=_.value[1];break;case"right":Je+=_.value[1];break}return ke.x+=Je,ke.y+=nt,ke.width=Math.min(ke.width,s.value),ke.height=Math.min(ke.height,p.value),{overflows:N5(ke,Y),x:Je,y:nt}}let X=0,U=0;const H={x:0,y:0},W={x:!1,y:!1};let ie=-1;for(;!(ie++>10);){const{x:te,y:ke,overflows:Re}=re(J);X+=te,U+=ke,F.x+=te,F.y+=ke;{const Be=z5(J.anchor),Je=Re.x.before||Re.x.after,nt=Re.y.before||Re.y.after;let De=!1;if(["x","y"].forEach(Ge=>{if(Ge==="x"&&Je&&!W.x||Ge==="y"&&nt&&!W.y){const Ee={anchor:{...J.anchor},origin:{...J.origin}},it=Ge==="x"?Be==="y"?iC:nC:Be==="y"?nC:iC;Ee.anchor=it(Ee.anchor),Ee.origin=it(Ee.origin);const{overflows:ot}=re(Ee);(ot[Ge].before<=Re[Ge].before&&ot[Ge].after<=Re[Ge].after||ot[Ge].before+ot[Ge].after<(Re[Ge].before+Re[Ge].after)/2)&&(J=Ee,De=W[Ge]=!0)}}),De)continue}Re.x.before&&(X+=Re.x.before,F.x+=Re.x.before),Re.x.after&&(X-=Re.x.after,F.x-=Re.x.after),Re.y.before&&(U+=Re.y.before,F.y+=Re.y.before),Re.y.after&&(U-=Re.y.after,F.y-=Re.y.after);{const Be=N5(F,Y);H.x=Y.width-Be.x.before-Be.x.after,H.y=Y.height-Be.y.before-Be.y.after,X+=Be.x.before,F.x+=Be.x.before,U+=Be.y.before,F.y+=Be.y.before}break}const Q=z5(J.anchor);return Object.assign(n.value,{"--v-overlay-anchor-origin":`${J.anchor.side} ${J.anchor.align}`,transformOrigin:`${J.origin.side} ${J.origin.align}`,top:pn(dC(U)),left:e.isRtl.value?void 0:pn(dC(X)),right:e.isRtl.value?pn(dC(-X)):void 0,minWidth:pn(Q==="y"?Math.min(l.value,M.width):l.value),maxWidth:pn(E4(Cr(H.x,l.value===1/0?0:l.value,s.value))),maxHeight:pn(E4(Cr(H.y,h.value===1/0?0:h.value,p.value)))}),{available:H,contentBox:F,flipped:W}}return Yt(()=>[r.value,a.value,t.offset,t.minWidth,t.minHeight,t.maxWidth,t.maxHeight],()=>R()),Hn(()=>{const F=R();if(!F)return;const{available:z,contentBox:G}=F;G.height>z.y&&requestAnimationFrame(()=>{R(),requestAnimationFrame(()=>{R()})})}),{updateLocation:R}}function dC(e){return Math.round(e*devicePixelRatio)/devicePixelRatio}function E4(e){return Math.ceil(e*devicePixelRatio)/devicePixelRatio}let Hk=!0;const Rw=[];function aoe(e){!Hk||Rw.length?(Rw.push(e),Gk()):(Hk=!1,e(),Gk())}let C4=-1;function Gk(){cancelAnimationFrame(C4),C4=requestAnimationFrame(()=>{const e=Rw.shift();e&&e(),Rw.length?Gk():Hk=!0})}const K2={none:null,close:uoe,block:doe,reposition:hoe},loe=lt({scrollStrategy:{type:[String,Function],default:"block",validator:e=>typeof e=="function"||e in K2}},"VOverlay-scroll-strategies");function coe(e,t){if(!Xi)return;let n;jr(async()=>{n?.stop(),t.isActive.value&&e.scrollStrategy&&(n=Fv(),await new Promise(i=>setTimeout(i)),n.active&&n.run(()=>{typeof e.scrollStrategy=="function"?e.scrollStrategy(t,e,n):K2[e.scrollStrategy]?.(t,e,n)}))}),ao(()=>{n?.stop()})}function uoe(e){function t(n){e.isActive.value=!1}X2(IP(e.target.value,e.contentEl.value),t)}function doe(e,t){const n=e.root.value?.offsetParent,i=IP(e.target.value,e.contentEl.value),r=[...new Set([...Aw(i,t.contained?n:void 0),...Aw(e.contentEl.value,t.contained?n:void 0)])].filter(h=>!h.classList.contains("v-overlay-scroll-blocked")),a=window.innerWidth-document.documentElement.offsetWidth,l=(h=>uP(h)&&h)(n||document.documentElement);l&&e.root.value.classList.add("v-overlay--scroll-blocked"),r.forEach((h,s)=>{h.style.setProperty("--v-body-scroll-x",pn(-h.scrollLeft)),h.style.setProperty("--v-body-scroll-y",pn(-h.scrollTop)),h!==document.documentElement&&h.style.setProperty("--v-scrollbar-offset",pn(a)),h.classList.add("v-overlay-scroll-blocked")}),ao(()=>{r.forEach((h,s)=>{const p=parseFloat(h.style.getPropertyValue("--v-body-scroll-x")),_=parseFloat(h.style.getPropertyValue("--v-body-scroll-y")),x=h.style.scrollBehavior;h.style.scrollBehavior="auto",h.style.removeProperty("--v-body-scroll-x"),h.style.removeProperty("--v-body-scroll-y"),h.style.removeProperty("--v-scrollbar-offset"),h.classList.remove("v-overlay-scroll-blocked"),h.scrollLeft=-p,h.scrollTop=-_,h.style.scrollBehavior=x}),l&&e.root.value.classList.remove("v-overlay--scroll-blocked")})}function hoe(e,t,n){let i=!1,r=-1,a=-1;function l(h){aoe(()=>{const s=performance.now();e.updateLocation.value?.(h),i=(performance.now()-s)/(1e3/60)>2})}a=(typeof requestIdleCallback>"u"?h=>h():requestIdleCallback)(()=>{n.run(()=>{X2(IP(e.target.value,e.contentEl.value),h=>{i?(cancelAnimationFrame(r),r=requestAnimationFrame(()=>{r=requestAnimationFrame(()=>{l(h)})})):l(h)})})}),ao(()=>{typeof cancelIdleCallback<"u"&&cancelIdleCallback(a),cancelAnimationFrame(r)})}function IP(e,t){return Array.isArray(e)?document.elementsFromPoint(...e).find(n=>!t?.contains(n)):e??t}function X2(e,t){const n=[document,...Aw(e)];n.forEach(i=>{i.addEventListener("scroll",t,{passive:!0})}),ao(()=>{n.forEach(i=>{i.removeEventListener("scroll",t)})})}const qk=Symbol.for("vuetify:v-menu"),AP=lt({closeDelay:[Number,String],openDelay:[Number,String]},"delay");function PP(e,t){let n=()=>{};function i(l,h){n?.();const s=Math.max(h?.minDelay??0,Number(l?e.openDelay:e.closeDelay));return new Promise(p=>{n=mne(s,()=>{t?.(l),p(l)})})}function r(){return i(!0)}function a(l){return i(!1,l)}return{clearDelay:n,runOpenDelay:r,runCloseDelay:a}}const foe=lt({target:[String,Object],activator:[String,Object],activatorProps:{type:Object,default:()=>({})},openOnClick:{type:Boolean,default:void 0},openOnHover:Boolean,openOnFocus:{type:Boolean,default:void 0},closeOnContentClick:Boolean,...AP()},"VOverlay-activator");function moe(e,t){let{isActive:n,isTop:i,contentEl:r}=t;const a=ws("useActivator"),l=tt();let h=!1,s=!1,p=!0;const _=me(()=>e.openOnFocus||e.openOnFocus==null&&e.openOnHover),x=me(()=>e.openOnClick||e.openOnClick==null&&!e.openOnHover&&!_.value),{runOpenDelay:T,runCloseDelay:k}=PP(e,U=>{U===(e.openOnHover&&h||_.value&&s)&&!(e.openOnHover&&n.value&&!i.value)&&(n.value!==U&&(p=!0),n.value=U)}),A=tt(),M={onClick:U=>{U.stopPropagation(),l.value=U.currentTarget||U.target,n.value||(A.value=[U.clientX,U.clientY]),n.value=!n.value},onMouseenter:U=>{h=!0,l.value=U.currentTarget||U.target,T()},onMouseleave:U=>{h=!1,k()},onFocus:U=>{n_(U.target,":focus-visible")!==!1&&(s=!0,U.stopPropagation(),l.value=U.currentTarget||U.target,T())},onBlur:U=>{s=!1,U.stopPropagation(),k({minDelay:1})}},R=me(()=>{const U={};return x.value&&(U.onClick=M.onClick),e.openOnHover&&(U.onMouseenter=M.onMouseenter,U.onMouseleave=M.onMouseleave),_.value&&(U.onFocus=M.onFocus,U.onBlur=M.onBlur),U}),F=me(()=>{const U={};if(e.openOnHover&&(U.onMouseenter=()=>{h=!0,T()},U.onMouseleave=()=>{h=!1,k()}),_.value&&(U.onFocusin=()=>{s=!0,T()},U.onFocusout=()=>{s=!1,k({minDelay:1})}),e.closeOnContentClick){const H=Si(qk,null);U.onClick=()=>{n.value=!1,H?.closeParents()}}return U}),z=me(()=>{const U={};return e.openOnHover&&(U.onMouseenter=()=>{p&&(h=!0,p=!1,T())},U.onMouseleave=()=>{h=!1,k()}),U});Yt(i,U=>{U&&(e.openOnHover&&!h&&(!_.value||!s)||_.value&&!s&&(!e.openOnHover||!h))&&!r.value?.contains(document.activeElement)&&(n.value=!1)}),Yt(n,U=>{U||setTimeout(()=>{A.value=void 0})},{flush:"post"});const G=Cw();jr(()=>{G.value&&Hn(()=>{l.value=G.el})});const Y=Cw(),J=me(()=>e.target==="cursor"&&A.value?A.value:Y.value?Y.el:Y2(e.target,a)||l.value),re=me(()=>Array.isArray(J.value)?void 0:J.value);let X;return Yt(()=>!!e.activator,U=>{U&&Xi?(X=Fv(),X.run(()=>{poe(e,a,{activatorEl:l,activatorEvents:R})})):X&&X.stop()},{flush:"post",immediate:!0}),ao(()=>{X?.stop()}),{activatorEl:l,activatorRef:G,target:J,targetEl:re,targetRef:Y,activatorEvents:R,contentEvents:F,scrimEvents:z}}function poe(e,t,n){let{activatorEl:i,activatorEvents:r}=n;Yt(()=>e.activator,(s,p)=>{if(p&&s!==p){const _=h(p);_&&l(_)}s&&Hn(()=>a())},{immediate:!0}),Yt(()=>e.activatorProps,()=>{a()}),ao(()=>{l()});function a(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:h(),p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e.activatorProps;s&&xne(s,At(r.value,p))}function l(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:h(),p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e.activatorProps;s&&wne(s,At(r.value,p))}function h(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:e.activator;const p=Y2(s,t);return i.value=p?.nodeType===Node.ELEMENT_NODE?p:void 0,i.value}}function Y2(e,t){if(!e)return;let n;if(e==="parent"){let i=t?.proxy?.$el?.parentNode;for(;i?.hasAttribute("data-no-activator");)i=i.parentNode;n=i}else typeof e=="string"?n=document.querySelector(e):"$el"in e?n=e.$el:n=e;return n}function Z2(){if(!Xi)return tn(!1);const{ssr:e}=Bl();if(e){const t=tn(!1);return Mr(()=>{t.value=!0}),t}else return tn(!0)}const MP=lt({eager:Boolean},"lazy");function DP(e,t){const n=tn(!1),i=$e(()=>n.value||e.eager||t.value);Yt(t,()=>n.value=!0);function r(){e.eager||(n.value=!1)}return{isBooted:n,hasContent:i,onAfterLeave:r}}function hg(){const t=ws("useScopeId").vnode.scopeId;return{scopeId:t?{[t]:""}:void 0}}const k4=Symbol.for("vuetify:stack"),Cy=so([]);function goe(e,t,n){const i=ws("useStack"),r=!n,a=Si(k4,void 0),l=so({activeChildren:new Set});Rr(k4,l);const h=tn(Number(Ua(t)));ca(e,()=>{const _=Cy.at(-1)?.[1];h.value=_?_+10:Number(Ua(t)),r&&Cy.push([i.uid,h.value]),a?.activeChildren.add(i.uid),ao(()=>{if(r){const x=Un(Cy).findIndex(T=>T[0]===i.uid);Cy.splice(x,1)}a?.activeChildren.delete(i.uid)})});const s=tn(!0);r&&jr(()=>{const _=Cy.at(-1)?.[0]===i.uid;setTimeout(()=>s.value=_)});const p=$e(()=>!l.activeChildren.size);return{globalTop:Vp(s),localTop:p,stackStyles:$e(()=>({zIndex:h.value}))}}function voe(e){return{teleportTarget:me(()=>{const n=e();if(n===!0||!Xi)return;const i=n===!1?document.body:typeof n=="string"?document.querySelector(n):n;if(i==null)return;let r=[...i.children].find(a=>a.matches(".v-overlay-container"));return r||(r=document.createElement("div"),r.className="v-overlay-container",i.appendChild(r)),r})}}function _oe(){return!0}function J2(e,t,n){if(!e||Q2(e,n)===!1)return!1;const i=VN(t);if(typeof ShadowRoot<"u"&&i instanceof ShadowRoot&&i.host===e.target)return!1;const r=(typeof n.value=="object"&&n.value.include||(()=>[]))();return r.push(t),!r.some(a=>a?.contains(e.target))}function Q2(e,t){return(typeof t.value=="object"&&t.value.closeConditional||_oe)(e)}function yoe(e,t,n){const i=typeof n.value=="function"?n.value:n.value.handler;e.shadowTarget=e.target,t._clickOutside.lastMousedownWasOutside&&J2(e,t,n)&&setTimeout(()=>{Q2(e,n)&&i&&i(e)},0)}function I4(e,t){const n=VN(e);t(document),typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&t(n)}const Kk={mounted(e,t){const n=r=>yoe(r,e,t),i=r=>{e._clickOutside.lastMousedownWasOutside=J2(r,e,t)};I4(e,r=>{r.addEventListener("click",n,!0),r.addEventListener("mousedown",i,!0)}),e._clickOutside||(e._clickOutside={lastMousedownWasOutside:!1}),e._clickOutside[t.instance.$.uid]={onClick:n,onMousedown:i}},beforeUnmount(e,t){e._clickOutside&&(I4(e,n=>{if(!n||!e._clickOutside?.[t.instance.$.uid])return;const{onClick:i,onMousedown:r}=e._clickOutside[t.instance.$.uid];n.removeEventListener("click",i,!0),n.removeEventListener("mousedown",r,!0)}),delete e._clickOutside[t.instance.$.uid])}};function boe(e){const{modelValue:t,color:n,...i}=e;return ce(Rl,{name:"fade-transition",appear:!0},{default:()=>[e.modelValue&&V("div",At({class:["v-overlay__scrim",e.color.backgroundColorClasses.value],style:e.color.backgroundColorStyles.value},i),null)]})}const Nb=lt({absolute:Boolean,attach:[Boolean,String,Object],closeOnBack:{type:Boolean,default:!0},contained:Boolean,contentClass:null,contentProps:null,disabled:Boolean,opacity:[Number,String],noClickAnimation:Boolean,modelValue:Boolean,persistent:Boolean,scrim:{type:[Boolean,String],default:!0},zIndex:{type:[Number,String],default:2e3},...foe(),...Tn(),...Bs(),...MP(),...noe(),...loe(),...Mi(),...Ph()},"VOverlay"),dd=Mt()({name:"VOverlay",directives:{vClickOutside:Kk},inheritAttrs:!1,props:{_disableGlobalStack:Boolean,...Nb()},emits:{"click:outside":e=>!0,"update:modelValue":e=>!0,keydown:e=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(e,t){let{slots:n,attrs:i,emit:r}=t;const a=ws("VOverlay"),l=tt(),h=tt(),s=tt(),p=Pn(e,"modelValue"),_=me({get:()=>p.value,set:ct=>{ct&&e.disabled||(p.value=ct)}}),{themeClasses:x}=Qi(e),{rtlClasses:T,isRtl:k}=qs(),{hasContent:A,onAfterLeave:M}=DP(e,_),R=ir(()=>typeof e.scrim=="string"?e.scrim:null),{globalTop:F,localTop:z,stackStyles:G}=goe(_,()=>e.zIndex,e._disableGlobalStack),{activatorEl:Y,activatorRef:J,target:re,targetEl:X,targetRef:U,activatorEvents:H,contentEvents:W,scrimEvents:ie}=moe(e,{isActive:_,isTop:z,contentEl:s}),{teleportTarget:Q}=voe(()=>{const ct=e.attach||e.contained;if(ct)return ct;const ht=Y?.value?.getRootNode()||a.proxy?.$el?.getRootNode();return ht instanceof ShadowRoot?ht:!1}),{dimensionStyles:te}=Fs(e),ke=Z2(),{scopeId:Re}=hg();Yt(()=>e.disabled,ct=>{ct&&(_.value=!1)});const{contentStyles:Be,updateLocation:Je}=ioe(e,{isRtl:k,contentEl:s,target:re,isActive:_});coe(e,{root:l,contentEl:s,targetEl:X,target:re,isActive:_,updateLocation:Je});function nt(ct){r("click:outside",ct),e.persistent?mt():_.value=!1}function De(ct){return _.value&&F.value&&(!e.scrim||ct.target===h.value||ct instanceof MouseEvent&&ct.shadowTarget===h.value)}Xi&&Yt(_,ct=>{ct?window.addEventListener("keydown",Ge):window.removeEventListener("keydown",Ge)},{immediate:!0}),Ur(()=>{Xi&&window.removeEventListener("keydown",Ge)});function Ge(ct){ct.key==="Escape"&&F.value&&(s.value?.contains(document.activeElement)||r("keydown",ct),e.persistent?mt():(_.value=!1,s.value?.contains(document.activeElement)&&Y.value?.focus()))}function Ee(ct){ct.key==="Escape"&&!F.value||r("keydown",ct)}const it=r2();ca(()=>e.closeOnBack,()=>{Hre(it,ct=>{F.value&&_.value?(ct(!1),e.persistent?mt():_.value=!1):ct()})});const ot=tt();Yt(()=>_.value&&(e.absolute||e.contained)&&Q.value==null,ct=>{if(ct){const ht=DT(l.value);ht&&ht!==document.scrollingElement&&(ot.value=ht.scrollTop)}});function mt(){e.noClickAnimation||s.value&&nh(s.value,[{transformOrigin:"center"},{transform:"scale(1.03)"},{transformOrigin:"center"}],{duration:150,easing:$0})}function Pt(){r("afterEnter")}function $t(){M(),r("afterLeave")}return zt(()=>V(an,null,[n.activator?.({isActive:_.value,targetRef:U,props:At({ref:J},H.value,e.activatorProps)}),ke.value&&A.value&&ce(dW,{disabled:!Q.value,to:Q.value},{default:()=>[V("div",At({class:["v-overlay",{"v-overlay--absolute":e.absolute||e.contained,"v-overlay--active":_.value,"v-overlay--contained":e.contained},x.value,T.value,e.class],style:[G.value,{"--v-overlay-opacity":e.opacity,top:pn(ot.value)},e.style],ref:l,onKeydown:Ee},Re,i),[ce(boe,At({color:R,modelValue:_.value&&!!e.scrim,ref:h},ie.value),null),ce(Na,{appear:!0,persisted:!0,transition:e.transition,target:re.value,onAfterEnter:Pt,onAfterLeave:$t},{default:()=>[Li(V("div",At({ref:s,class:["v-overlay__content",e.contentClass],style:[te.value,Be.value]},W.value,e.contentProps),[n.default?.({isActive:_})]),[[_u,_.value],[Kk,{handler:nt,closeConditional:De,include:()=>[Y.value]}]])]})])]})])),{activatorEl:Y,scrimEl:h,target:re,animateClick:mt,contentEl:s,rootEl:l,globalTop:F,localTop:z,updateLocation:Je}}}),e8=lt({id:String,submenu:Boolean,disableInitialFocus:Boolean,...hr(Nb({closeDelay:250,closeOnContentClick:!0,locationStrategy:"connected",location:void 0,openDelay:300,scrim:!1,scrollStrategy:"reposition",transition:{component:zT}}),["absolute"])},"VMenu"),a_=Mt()({name:"VMenu",props:e8(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const i=Pn(e,"modelValue"),{scopeId:r}=hg(),{isRtl:a}=qs(),l=ha(),h=$e(()=>e.id||`v-menu-${l}`),s=tt(),p=Si(qk,null),_=tn(new Set);Rr(qk,{register(){_.value.add(l)},unregister(){_.value.delete(l)},closeParents(G){setTimeout(()=>{!_.value.size&&!e.persistent&&(G==null||s.value?.contentEl&&!pne(G,s.value.contentEl))&&(i.value=!1,p?.closeParents())},40)}}),Ur(()=>{p?.unregister(),document.removeEventListener("focusin",A)}),tT(()=>i.value=!1);let x=!1,T=-1;async function k(){x=!0,T=window.setTimeout(()=>{x=!1},100)}async function A(G){const Y=G.relatedTarget,J=G.target;await Hn(),i.value&&Y!==J&&s.value?.rootEl&&s.value?.contentEl&&s.value?.localTop&&![document,s.value.rootEl].includes(J)&&!s.value.rootEl.contains(J)&&(x?!e.openOnHover&&!s.value.activatorEl?.contains(J)&&(i.value=!1):(t_(s.value.contentEl)[0]?.focus(),document.removeEventListener("pointerdown",k)))}Yt(i,G=>{G?(p?.register(),Xi&&!e.disableInitialFocus&&(document.addEventListener("pointerdown",k),document.addEventListener("focusin",A,{once:!0}))):(p?.unregister(),Xi&&(clearTimeout(T),document.removeEventListener("pointerdown",k),document.removeEventListener("focusin",A)))},{immediate:!0});function M(G){p?.closeParents(G)}function R(G){if(!e.disabled)if(G.key==="Tab"||G.key==="Enter"&&!e.closeOnContentClick){if(G.key==="Enter"&&(G.target instanceof HTMLTextAreaElement||G.target instanceof HTMLInputElement&&G.target.closest("form")))return;G.key==="Enter"&&G.preventDefault(),TN(t_(s.value?.contentEl,!1),G.shiftKey?"prev":"next",J=>J.tabIndex>=0)||(i.value=!1,s.value?.activatorEl?.focus())}else e.submenu&&G.key===(a.value?"ArrowRight":"ArrowLeft")&&(i.value=!1,s.value?.activatorEl?.focus())}function F(G){if(e.disabled)return;const Y=s.value?.contentEl;Y&&i.value?G.key==="ArrowDown"?(G.preventDefault(),G.stopImmediatePropagation(),Mp(Y,"next")):G.key==="ArrowUp"?(G.preventDefault(),G.stopImmediatePropagation(),Mp(Y,"prev")):e.submenu&&(G.key===(a.value?"ArrowRight":"ArrowLeft")?i.value=!1:G.key===(a.value?"ArrowLeft":"ArrowRight")&&(G.preventDefault(),Mp(Y,"first"))):(e.submenu?G.key===(a.value?"ArrowLeft":"ArrowRight"):["ArrowDown","ArrowUp"].includes(G.key))&&(i.value=!0,G.preventDefault(),setTimeout(()=>setTimeout(()=>F(G))))}const z=me(()=>At({"aria-haspopup":"menu","aria-expanded":String(i.value),"aria-controls":h.value,"aria-owns":h.value,onKeydown:F},e.activatorProps));return zt(()=>{const G=dd.filterProps(e);return ce(dd,At({ref:s,id:h.value,class:["v-menu",e.class],style:e.style},G,{modelValue:i.value,"onUpdate:modelValue":Y=>i.value=Y,absolute:!0,activatorProps:z.value,location:e.location??(e.submenu?"end":"bottom"),"onClick:outside":M,onKeydown:R},r),{activator:n.activator,default:function(){for(var Y=arguments.length,J=new Array(Y),re=0;re<Y;re++)J[re]=arguments[re];return ce(ui,{root:"VMenu"},{default:()=>[n.default?.(...J)]})}})}),To({id:h,openChildren:_},s)}}),xoe=lt({active:Boolean,disabled:Boolean,max:[Number,String],value:{type:[Number,String],default:0},...Tn(),...Ph({transition:{component:X0}})},"VCounter"),$T=Mt()({name:"VCounter",functional:!0,props:xoe(),setup(e,t){let{slots:n}=t;const i=$e(()=>e.max?`${e.value} / ${e.max}`:String(e.value));return zt(()=>ce(Na,{transition:e.transition},{default:()=>[Li(V("div",{class:_t(["v-counter",{"text-error":e.max&&!e.disabled&&parseFloat(e.value)>parseFloat(e.max)},e.class]),style:Xt(e.style)},[n.default?n.default({counter:i.value,max:e.max,value:e.value}):i.value]),[[_u,e.active]])]})),{}}}),woe=lt({floating:Boolean,...Tn()},"VFieldLabel"),jy=Mt()({name:"VFieldLabel",props:woe(),setup(e,t){let{slots:n}=t;return zt(()=>ce(E_,{class:_t(["v-field-label",{"v-field-label--floating":e.floating},e.class]),style:Xt(e.style)},n)),{}}}),Toe=["underlined","outlined","filled","solo","solo-inverted","solo-filled","plain"],$b=lt({appendInnerIcon:In,bgColor:String,clearable:Boolean,clearIcon:{type:In,default:"$clear"},active:Boolean,centerAffix:{type:Boolean,default:void 0},color:String,baseColor:String,details:Boolean,dirty:Boolean,disabled:{type:Boolean,default:null},glow:Boolean,error:Boolean,flat:Boolean,iconColor:[Boolean,String],label:String,persistentClear:Boolean,prependInnerIcon:In,reverse:Boolean,singleLine:Boolean,variant:{type:String,default:"filled",validator:e=>Toe.includes(e)},"onClick:clear":zo(),"onClick:appendInner":zo(),"onClick:prependInner":zo(),...Tn(),...VT(),...Wr(),...Mi()},"VField"),rm=Mt()({name:"VField",inheritAttrs:!1,props:{id:String,...zb(),...$b()},emits:{"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{attrs:n,emit:i,slots:r}=t;const{themeClasses:a}=Qi(e),{loaderClasses:l}=Ob(e),{focusClasses:h,isFocused:s,focus:p,blur:_}=Mh(e),{InputIcon:x}=y2(e),{roundedClasses:T}=ns(e),{rtlClasses:k}=qs(),A=$e(()=>e.dirty||e.active),M=$e(()=>!!(e.label||r.label)),R=$e(()=>!e.singleLine&&M.value),F=ha(),z=me(()=>e.id||`input-${F}`),G=$e(()=>e.details?`${z.value}-messages`:void 0),Y=tt(),J=tt(),re=tt(),X=me(()=>["plain","underlined"].includes(e.variant)),U=me(()=>e.error||e.disabled?void 0:A.value&&s.value?e.color:e.baseColor),H=me(()=>{if(!(!e.iconColor||e.glow&&!s.value))return e.iconColor===!0?U.value:e.iconColor}),{backgroundColorClasses:W,backgroundColorStyles:ie}=ir(()=>e.bgColor),{textColorClasses:Q,textColorStyles:te}=Uo(U);Yt(A,Be=>{if(R.value&&!ld()){const Je=Y.value.$el,nt=J.value.$el;requestAnimationFrame(()=>{const De=oP(Je),Ge=nt.getBoundingClientRect(),Ee=Ge.x-De.x,it=Ge.y-De.y-(De.height/2-Ge.height/2),ot=Ge.width/.75,mt=Math.abs(ot-De.width)>1?{maxWidth:pn(ot)}:void 0,Pt=getComputedStyle(Je),$t=getComputedStyle(nt),ct=parseFloat(Pt.transitionDuration)*1e3||150,ht=parseFloat($t.getPropertyValue("--v-field-label-scale")),Qe=$t.getPropertyValue("color");Je.style.visibility="visible",nt.style.visibility="hidden",nh(Je,{transform:`translate(${Ee}px, ${it}px) scale(${ht})`,color:Qe,...mt},{duration:ct,easing:$0,direction:Be?"normal":"reverse"}).finished.then(()=>{Je.style.removeProperty("visibility"),nt.style.removeProperty("visibility")})})}},{flush:"post"});const ke=me(()=>({isActive:A,isFocused:s,controlRef:re,blur:_,focus:p}));function Re(Be){Be.target!==document.activeElement&&Be.preventDefault()}return zt(()=>{const Be=e.variant==="outlined",Je=!!(r["prepend-inner"]||e.prependInnerIcon),nt=!!(e.clearable||r.clear)&&!e.disabled,De=!!(r["append-inner"]||e.appendInnerIcon||nt),Ge=()=>r.label?r.label({...ke.value,label:e.label,props:{for:z.value}}):e.label;return V("div",At({class:["v-field",{"v-field--active":A.value,"v-field--appended":De,"v-field--center-affix":e.centerAffix??!X.value,"v-field--disabled":e.disabled,"v-field--dirty":e.dirty,"v-field--error":e.error,"v-field--glow":e.glow,"v-field--flat":e.flat,"v-field--has-background":!!e.bgColor,"v-field--persistent-clear":e.persistentClear,"v-field--prepended":Je,"v-field--reverse":e.reverse,"v-field--single-line":e.singleLine,"v-field--no-label":!Ge(),[`v-field--variant-${e.variant}`]:!0},a.value,W.value,h.value,l.value,T.value,k.value,e.class],style:[ie.value,e.style],onClick:Re},n),[V("div",{class:"v-field__overlay"},null),ce(Vb,{name:"v-field",active:!!e.loading,color:e.error?"error":typeof e.loading=="string"?e.loading:e.color},{default:r.loader}),Je&&V("div",{key:"prepend",class:"v-field__prepend-inner"},[e.prependInnerIcon&&ce(x,{key:"prepend-icon",name:"prependInner",color:H.value},null),r["prepend-inner"]?.(ke.value)]),V("div",{class:"v-field__field","data-no-activator":""},[["filled","solo","solo-inverted","solo-filled"].includes(e.variant)&&R.value&&ce(jy,{key:"floating-label",ref:J,class:_t([Q.value]),floating:!0,for:z.value,"aria-hidden":!A.value,style:Xt(te.value)},{default:()=>[Ge()]}),M.value&&ce(jy,{key:"label",ref:Y,for:z.value},{default:()=>[Ge()]}),r.default?.({...ke.value,props:{id:z.value,class:"v-field__input","aria-describedby":G.value},focus:p,blur:_})??V("div",{id:z.value,class:"v-field__input","aria-describedby":G.value},null)]),nt&&ce(xP,{key:"clear"},{default:()=>[Li(V("div",{class:"v-field__clearable",onMousedown:Ee=>{Ee.preventDefault(),Ee.stopPropagation()}},[ce(ui,{defaults:{VIcon:{icon:e.clearIcon}}},{default:()=>[r.clear?r.clear({...ke.value,props:{onFocus:p,onBlur:_,onClick:e["onClick:clear"],tabindex:-1}}):ce(x,{name:"clear",onFocus:p,onBlur:_,tabindex:-1},null)]})]),[[_u,e.dirty]])]}),De&&V("div",{key:"append",class:"v-field__append-inner"},[r["append-inner"]?.(ke.value),e.appendInnerIcon&&ce(x,{key:"append-icon",name:"appendInner",color:H.value},null)]),V("div",{class:_t(["v-field__outline",Q.value]),style:Xt(te.value)},[Be&&V(an,null,[V("div",{class:"v-field__outline__start"},null),R.value&&V("div",{class:"v-field__outline__notch"},[ce(jy,{ref:J,floating:!0,for:z.value,"aria-hidden":!A.value},{default:()=>[Ge()]})]),V("div",{class:"v-field__outline__end"},null)]),X.value&&R.value&&ce(jy,{ref:J,floating:!0,for:z.value,"aria-hidden":!A.value},{default:()=>[Ge()]})])])}),{controlRef:re,fieldIconColor:H}}}),t8=lt({autocomplete:String},"autocomplete");function n8(e){const t=ha(),n=tn(0),i=$e(()=>e.autocomplete==="suppress"),r=$e(()=>i.value?`${e.name}-${t}-${n.value}`:e.name),a=$e(()=>i.value?"off":e.autocomplete);return{isSuppressing:i,fieldAutocomplete:a,fieldName:r,update:()=>n.value=new Date().getTime()}}function i8(e){function t(n,i){!e.autofocus||!n||i[0].target?.focus?.()}return{onIntersect:t}}const Soe=["color","file","time","date","datetime-local","week","month"],Ub=lt({autofocus:Boolean,counter:[Boolean,Number,String],counterValue:[Number,Function],prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,suffix:String,role:String,type:{type:String,default:"text"},modelModifiers:Object,...t8(),...Dh(),...$b()},"VTextField"),wh=Mt()({name:"VTextField",directives:{vIntersect:gu},inheritAttrs:!1,props:Ub(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{attrs:n,emit:i,slots:r}=t;const a=Pn(e,"modelValue"),{isFocused:l,focus:h,blur:s}=Mh(e),{onIntersect:p}=i8(e),_=me(()=>typeof e.counterValue=="function"?e.counterValue(a.value):typeof e.counterValue=="number"?e.counterValue:(a.value??"").toString().length),x=me(()=>{if(n.maxlength)return n.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter}),T=me(()=>["plain","underlined"].includes(e.variant)),k=tt(),A=tt(),M=tt(),R=n8(e),F=me(()=>Soe.includes(e.type)||e.persistentPlaceholder||l.value||e.active);function z(){R.isSuppressing.value&&R.update(),l.value||h(),Hn(()=>{M.value!==document.activeElement&&M.value?.focus()})}function G(X){i("mousedown:control",X),X.target!==M.value&&(z(),X.preventDefault())}function Y(X){i("click:control",X)}function J(X,U){X.stopPropagation(),z(),Hn(()=>{U(),Ab(e["onClick:clear"],X)})}function re(X){const U=X.target;if(a.value=U.value,e.modelModifiers?.trim&&["text","search","password","tel","url"].includes(e.type)){const H=[U.selectionStart,U.selectionEnd];Hn(()=>{U.selectionStart=H[0],U.selectionEnd=H[1]})}}return zt(()=>{const X=!!(r.counter||e.counter!==!1&&e.counter!=null),U=!!(X||r.details),[H,W]=dm(n),{modelValue:ie,...Q}=da.filterProps(e),te=rm.filterProps(e);return ce(da,At({ref:k,modelValue:a.value,"onUpdate:modelValue":ke=>a.value=ke,class:["v-text-field",{"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-input--plain-underlined":T.value},e.class],style:e.style},H,Q,{centerAffix:!T.value,focused:l.value}),{...r,default:ke=>{let{id:Re,isDisabled:Be,isDirty:Je,isReadonly:nt,isValid:De,hasDetails:Ge,reset:Ee}=ke;return ce(rm,At({ref:A,onMousedown:G,onClick:Y,"onClick:clear":it=>J(it,Ee),role:e.role},hr(te,["onClick:clear"]),{id:Re.value,active:F.value||Je.value,dirty:Je.value||e.dirty,disabled:Be.value,focused:l.value,details:Ge.value,error:De.value===!1}),{...r,default:it=>{let{props:{class:ot,...mt},controlRef:Pt}=it;const $t=Li(V("input",At({ref:ct=>M.value=Pt.value=ct,value:a.value,onInput:re,autofocus:e.autofocus,readonly:nt.value,disabled:Be.value,name:R.fieldName.value,autocomplete:R.fieldAutocomplete.value,placeholder:e.placeholder,size:1,role:e.role,type:e.type,onFocus:h,onBlur:s},mt,W),null),[[gu,{handler:p},null,{once:!0}]]);return V(an,null,[e.prefix&&V("span",{class:"v-text-field__prefix"},[V("span",{class:"v-text-field__prefix__text"},[e.prefix])]),r.default?V("div",{class:_t(ot),"data-no-activator":""},[r.default(),$t]):rd($t,{class:ot}),e.suffix&&V("span",{class:"v-text-field__suffix"},[V("span",{class:"v-text-field__suffix__text"},[e.suffix])])])}})},details:U?ke=>V(an,null,[r.details?.(ke),X&&V(an,null,[V("span",null,null),ce($T,{active:e.persistentCounter||l.value,value:_.value,max:x.value,disabled:e.disabled},r.counter)])]):void 0})}),To({},k,A,M)}}),Eoe=lt({renderless:Boolean,...Tn()},"VVirtualScrollItem"),r8=Mt()({name:"VVirtualScrollItem",inheritAttrs:!1,props:Eoe(),emits:{"update:height":e=>!0},setup(e,t){let{attrs:n,emit:i,slots:r}=t;const{resizeRef:a,contentRect:l}=zc(void 0,"border");Yt(()=>l.value?.height,h=>{h!=null&&i("update:height",h)}),zt(()=>e.renderless?V(an,null,[r.default?.({itemRef:a})]):V("div",At({ref:a,class:["v-virtual-scroll__item",e.class],style:e.style},n),[r.default?.()]))}}),Coe=-1,koe=1,hC=100,s8=lt({itemHeight:{type:[Number,String],default:null},itemKey:{type:[String,Array,Function],default:null},height:[Number,String]},"virtual");function o8(e,t){const n=Bl(),i=tn(0);jr(()=>{i.value=parseFloat(e.itemHeight||0)});const r=tn(0),a=tn(Math.ceil((parseInt(e.height)||n.height.value)/(i.value||16))||1),l=tn(0),h=tn(0),s=tt(),p=tt();let _=0;const{resizeRef:x,contentRect:T}=zc();jr(()=>{x.value=s.value});const k=me(()=>s.value===document.documentElement?n.height.value:T.value?.height||parseInt(e.height)||0),A=me(()=>!!(s.value&&p.value&&k.value&&i.value));let M=Array.from({length:t.value.length}),R=Array.from({length:t.value.length});const F=tn(0);let z=-1;function G(Ge){return M[Ge]||i.value}const Y=yN(()=>{const Ge=performance.now();R[0]=0;const Ee=t.value.length;for(let it=1;it<=Ee;it++)R[it]=(R[it-1]||0)+G(it-1);F.value=Math.max(F.value,performance.now()-Ge)},F),J=Yt(A,Ge=>{Ge&&(J(),_=p.value.offsetTop,Y.immediate(),Be(),~z&&Hn(()=>{Xi&&window.requestAnimationFrame(()=>{nt(z),z=-1})}))});ao(()=>{Y.clear()});function re(Ge,Ee){const it=M[Ge],ot=i.value;i.value=ot?Math.min(i.value,Ee):Ee,(it!==Ee||ot!==i.value)&&(M[Ge]=Ee,Y())}function X(Ge){Ge=Cr(Ge,0,t.value.length);const Ee=Math.floor(Ge),it=Ge%1,ot=Ee+1,mt=R[Ee]||0,Pt=R[ot]||mt;return mt+(Pt-mt)*it}function U(Ge){return Ioe(R,Ge)}let H=0,W=0,ie=0;Yt(k,(Ge,Ee)=>{Ee&&(Be(),Ge<Ee&&requestAnimationFrame(()=>{W=0,Be()}))});let Q=-1;function te(){if(!s.value||!p.value)return;const Ge=s.value.scrollTop,Ee=performance.now();Ee-ie>500?(W=Math.sign(Ge-H),_=p.value.offsetTop):W=Ge-H,H=Ge,ie=Ee,window.clearTimeout(Q),Q=window.setTimeout(ke,500),Be()}function ke(){!s.value||!p.value||(W=0,ie=0,window.clearTimeout(Q),Be())}let Re=-1;function Be(){cancelAnimationFrame(Re),Re=requestAnimationFrame(Je)}function Je(){if(!s.value||!k.value||!i.value)return;const Ge=H-_,Ee=Math.sign(W),it=Math.max(0,Ge-hC),ot=Cr(U(it),0,t.value.length),mt=Ge+k.value+hC,Pt=Cr(U(mt)+1,ot+1,t.value.length);if((Ee!==Coe||ot<r.value)&&(Ee!==koe||Pt>a.value)){const $t=X(r.value)-X(ot),ct=X(Pt)-X(a.value);Math.max($t,ct)>hC?(r.value=ot,a.value=Pt):(ot<=0&&(r.value=ot),Pt>=t.value.length&&(a.value=Pt))}l.value=X(r.value),h.value=X(t.value.length)-X(a.value)}function nt(Ge){const Ee=X(Ge);!s.value||Ge&&!Ee?z=Ge:s.value.scrollTop=Ee}const De=me(()=>t.value.slice(r.value,a.value).map((Ge,Ee)=>{const it=Ee+r.value;return{raw:Ge,index:it,key:Ls(Ge,e.itemKey,it)}}));return Yt(t,()=>{M=Array.from({length:t.value.length}),R=Array.from({length:t.value.length}),Y.immediate(),Be()},{deep:1}),{calculateVisibleItems:Be,containerRef:s,markerRef:p,computedItems:De,paddingTop:l,paddingBottom:h,scrollToIndex:nt,handleScroll:te,handleScrollend:ke,handleItemResize:re}}function Ioe(e,t){let n=e.length-1,i=0,r=0,a=null,l=-1;if(e[n]<t)return n;for(;i<=n;)if(r=i+n>>1,a=e[r],a>t)n=r-1;else if(a<t)l=r,i=r+1;else return a===t?r:i;return l}const Aoe=lt({items:{type:Array,default:()=>[]},renderless:Boolean,...s8(),...Tn(),...Bs()},"VVirtualScroll"),UT=Mt()({name:"VVirtualScroll",props:Aoe(),setup(e,t){let{slots:n}=t;const i=ws("VVirtualScroll"),{dimensionStyles:r}=Fs(e),{calculateVisibleItems:a,containerRef:l,markerRef:h,handleScroll:s,handleScrollend:p,handleItemResize:_,scrollToIndex:x,paddingTop:T,paddingBottom:k,computedItems:A}=o8(e,$e(()=>e.items));return ca(()=>e.renderless,()=>{function M(){const F=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)?"addEventListener":"removeEventListener";l.value===document.documentElement?(document[F]("scroll",s,{passive:!0}),document[F]("scrollend",p)):(l.value?.[F]("scroll",s,{passive:!0}),l.value?.[F]("scrollend",p))}Mr(()=>{l.value=DT(i.vnode.el,!0),M(!0)}),ao(M)}),zt(()=>{const M=A.value.map(R=>ce(r8,{key:R.key,renderless:e.renderless,"onUpdate:height":F=>_(R.index,F)},{default:F=>n.default?.({item:R.raw,index:R.index,...F})}));return e.renderless?V(an,null,[V("div",{ref:h,class:"v-virtual-scroll__spacer",style:{paddingTop:pn(T.value)}},null),M,V("div",{class:"v-virtual-scroll__spacer",style:{paddingBottom:pn(k.value)}},null)]):V("div",{ref:l,class:_t(["v-virtual-scroll",e.class]),onScrollPassive:s,onScrollend:p,style:Xt([r.value,e.style])},[V("div",{ref:h,class:"v-virtual-scroll__container",style:{paddingTop:pn(T.value),paddingBottom:pn(k.value)}},[M])])}),{calculateVisibleItems:a,scrollToIndex:x}}});function LP(e,t){const n=tn(!1);let i;function r(h){cancelAnimationFrame(i),n.value=!0,i=requestAnimationFrame(()=>{i=requestAnimationFrame(()=>{n.value=!1})})}async function a(){await new Promise(h=>requestAnimationFrame(h)),await new Promise(h=>requestAnimationFrame(h)),await new Promise(h=>requestAnimationFrame(h)),await new Promise(h=>{if(n.value){const s=Yt(n,()=>{s(),h()})}else h()})}async function l(h){if(h.key==="Tab"&&t.value?.focus(),!["PageDown","PageUp","Home","End"].includes(h.key))return;const s=e.value?.$el;if(!s)return;(h.key==="Home"||h.key==="End")&&s.scrollTo({top:h.key==="Home"?0:s.scrollHeight,behavior:"smooth"}),await a();const p=s.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(h.key==="PageDown"||h.key==="Home"){const _=s.getBoundingClientRect().top;for(const x of p)if(x.getBoundingClientRect().top>=_){x.focus();break}}else{const _=s.getBoundingClientRect().bottom;for(const x of[...p].reverse())if(x.getBoundingClientRect().bottom<=_){x.focus();break}}}return{onScrollPassive:r,onKeydown:l}}const Poe=lt({closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"}},"autocomplete");function RP(e,t){const{t:n}=fr(),i=ha(),r=me(()=>`menu-${i}`),a=$e(()=>Ua(t)),l=$e(()=>r.value),h=$e(()=>n(Ua(t)?e.closeText:e.openText));return{menuId:r,ariaExpanded:a,ariaControls:l,ariaLabel:h}}const OP=lt({chips:Boolean,closableChips:Boolean,eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,listProps:{type:Object},menu:Boolean,menuIcon:{type:In,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,itemColor:String,noAutoScroll:Boolean,...Poe(),...U2({itemChildren:!1})},"Select"),Moe=lt({...OP(),...hr(Ub({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...Ph({transition:{component:zT}})},"VSelect"),Vv=Mt()({name:"VSelect",props:Moe(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,t){let{slots:n}=t;const{t:i}=fr(),r=tt(),a=tt(),l=tt(),{items:h,transformIn:s,transformOut:p}=CP(e),_=Pn(e,"modelValue",[],ot=>s(ot===null?[null]:Xr(ot)),ot=>{const mt=p(ot);return e.multiple?mt:mt[0]??null}),x=me(()=>typeof e.counterValue=="function"?e.counterValue(_.value):typeof e.counterValue=="number"?e.counterValue:_.value.length),T=C_(e),k=me(()=>_.value.map(ot=>ot.value)),A=tn(!1);let M="",R=-1,F;const z=me(()=>e.hideSelected?h.value.filter(ot=>!_.value.some(mt=>(e.valueComparator||bo)(mt,ot))):h.value),G=me(()=>e.hideNoData&&!z.value.length||T.isReadonly.value||T.isDisabled.value),Y=Pn(e,"menu"),J=me({get:()=>Y.value,set:ot=>{Y.value&&!ot&&a.value?.openChildren.size||ot&&G.value||(Y.value=ot)}}),{menuId:re,ariaExpanded:X,ariaControls:U,ariaLabel:H}=RP(e,J),W=me(()=>({...e.menuProps,activatorProps:{...e.menuProps?.activatorProps||{},"aria-haspopup":"listbox"}})),ie=tt(),Q=LP(ie,r);function te(ot){e.openOnClear&&(J.value=!0)}function ke(){G.value||(J.value=!J.value)}function Re(ot){i_(ot)&&Be(ot)}function Be(ot){if(!ot.key||T.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(ot.key)&&ot.preventDefault(),["Enter","ArrowDown"," "].includes(ot.key)&&(J.value=!0),["Escape","Tab"].includes(ot.key)&&(J.value=!1),ot.key==="Home"?ie.value?.focus("first"):ot.key==="End"&&ie.value?.focus("last");const mt=1e3;if(!i_(ot))return;const Pt=performance.now();Pt-F>mt&&(M="",R=-1),M+=ot.key.toLowerCase(),F=Pt;const $t=z.value;function ct(){let ue=ht();return ue||M.at(-1)===M.at(-2)&&(M=M.slice(0,-1),ue=ht(),ue)||(R=-1,ue=ht(),ue)?ue:(M=ot.key.toLowerCase(),ht())}function ht(){for(let ue=R+1;ue<$t.length;ue++){const we=$t[ue];if(we.title.toLowerCase().startsWith(M))return[we,ue]}}const Qe=ct();if(!Qe)return;const[kt,Ue]=Qe;R=Ue,ie.value?.focus(Ue),e.multiple||(_.value=[kt])}function Je(ot){let mt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!ot.props.disabled)if(e.multiple){const Pt=_.value.findIndex(ct=>(e.valueComparator||bo)(ct.value,ot.value)),$t=mt??!~Pt;if(~Pt){const ct=$t?[..._.value,ot]:[..._.value];ct.splice(Pt,1),_.value=ct}else $t&&(_.value=[..._.value,ot])}else{const Pt=mt!==!1;_.value=Pt?[ot]:[],Hn(()=>{J.value=!1})}}function nt(ot){ie.value?.$el.contains(ot.relatedTarget)||(J.value=!1)}function De(){e.eager&&l.value?.calculateVisibleItems()}function Ge(){A.value&&r.value?.focus()}function Ee(ot){A.value=!0}function it(ot){if(ot==null)_.value=[];else if(n_(r.value,":autofill")||n_(r.value,":-webkit-autofill")){const mt=h.value.find(Pt=>Pt.title===ot);mt&&Je(mt)}else r.value&&(r.value.value="")}return Yt(J,()=>{if(!e.hideSelected&&J.value&&_.value.length){const ot=z.value.findIndex(mt=>_.value.some(Pt=>(e.valueComparator||bo)(Pt.value,mt.value)));Xi&&!e.noAutoScroll&&window.requestAnimationFrame(()=>{ot>=0&&l.value?.scrollToIndex(ot)})}}),Yt(h,(ot,mt)=>{J.value||A.value&&e.hideNoData&&!mt.length&&ot.length&&(J.value=!0)}),zt(()=>{const ot=!!(e.chips||n.chip),mt=!!(!e.hideNoData||z.value.length||n["prepend-item"]||n["append-item"]||n["no-data"]),Pt=_.value.length>0,$t=wh.filterProps(e),ct=Pt||!A.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return ce(wh,At({ref:r},$t,{modelValue:_.value.map(ht=>ht.props.value).join(", "),"onUpdate:modelValue":it,focused:A.value,"onUpdate:focused":ht=>A.value=ht,validationValue:_.externalValue,counterValue:x.value,dirty:Pt,class:["v-select",{"v-select--active-menu":J.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0,"v-select--selected":_.value.length,"v-select--selection-slot":!!n.selection},e.class],style:e.style,inputmode:"none",placeholder:ct,"onClick:clear":te,"onMousedown:control":ke,onBlur:nt,onKeydown:Be,"aria-expanded":X.value,"aria-controls":U.value,"aria-label":H.value,title:H.value}),{...n,default:()=>V(an,null,[ce(a_,At({id:re.value,ref:a,modelValue:J.value,"onUpdate:modelValue":ht=>J.value=ht,activator:"parent",contentClass:"v-select__content",disabled:G.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:De,onAfterLeave:Ge},W.value),{default:()=>[mt&&ce(o_,At({ref:ie,selected:k.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:ht=>ht.preventDefault(),onKeydown:Re,onFocusin:Ee,tabindex:"-1",selectable:!0,"aria-live":"polite","aria-label":`${e.label}-list`,color:e.itemColor??e.color},Q,e.listProps),{default:()=>[n["prepend-item"]?.(),!z.value.length&&!e.hideNoData&&(n["no-data"]?.()??ce(vu,{key:"no-data",title:i(e.noDataText)},null)),ce(UT,{ref:l,renderless:!0,items:z.value,itemKey:"value"},{default:ht=>{let{item:Qe,index:kt,itemRef:Ue}=ht;const ue=vne(Qe.props),we=At(Qe.props,{ref:Ue,key:Qe.value,onClick:()=>Je(Qe,null)});return Qe.type==="divider"?n.divider?.({props:Qe.raw,index:kt})??ce(oc,At(Qe.props,{key:`divider-${kt}`}),null):Qe.type==="subheader"?n.subheader?.({props:Qe.raw,index:kt})??ce(k_,At(Qe.props,{key:`subheader-${kt}`}),null):n.item?.({item:Qe,index:kt,props:we})??ce(vu,At(we,{role:"option"}),{prepend:fe=>{let{isSelected:Ie}=fe;return V(an,null,[e.multiple&&!e.hideSelected?ce(ud,{key:Qe.value,modelValue:Ie,ripple:!1,tabindex:"-1",onClick:je=>je.preventDefault()},null):void 0,ue.prependAvatar&&ce(uc,{image:ue.prependAvatar},null),ue.prependIcon&&ce(Pi,{icon:ue.prependIcon},null)])}})}}),n["append-item"]?.()]})]}),_.value.map((ht,Qe)=>{function kt(fe){fe.stopPropagation(),fe.preventDefault(),Je(ht,!1)}const Ue={"onClick:close":kt,onKeydown(fe){fe.key!=="Enter"&&fe.key!==" "||(fe.preventDefault(),fe.stopPropagation(),kt(fe))},onMousedown(fe){fe.preventDefault(),fe.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},ue=ot?!!n.chip:!!n.selection,we=ue?MT(ot?n.chip({item:ht,index:Qe,props:Ue}):n.selection({item:ht,index:Qe})):void 0;if(!(ue&&!we))return V("div",{key:ht.value,class:"v-select__selection"},[ot?n.chip?ce(ui,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:ht.title}}},{default:()=>[we]}):ce(Ds,At({key:"chip",closable:e.closableChips,size:"small",text:ht.title,disabled:ht.props.disabled},Ue),null):we??V("span",{class:"v-select__selection-text"},[ht.title,e.multiple&&Qe<_.value.length-1&&V("span",{class:"v-select__selection-comma"},[Bn(",")])])])})]),"append-inner":function(){for(var ht=arguments.length,Qe=new Array(ht),kt=0;kt<ht;kt++)Qe[kt]=arguments[kt];return V(an,null,[n["append-inner"]?.(...Qe),e.menuIcon?ce(Pi,{class:"v-select__menu-icon",color:r.value?.fieldIconColor,icon:e.menuIcon},null):void 0])}})}),To({isFocused:A,menu:J,select:Je},r)}}),Doe=(e,t,n)=>{if(e==null||t==null)return-1;if(!t.length)return 0;e=e.toString().toLocaleLowerCase(),t=t.toString().toLocaleLowerCase();const i=[];let r=e.indexOf(t);for(;~r;)i.push([r,r+t.length]),r=e.indexOf(t,r+t.length);return i.length?i:-1};function fC(e,t){if(!(e==null||typeof e=="boolean"||e===-1))return typeof e=="number"?[[e,e+t.length]]:Array.isArray(e[0])?e:[e]}const I_=lt({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function Loe(e,t,n){const i=[],r=n?.default??Doe,a=n?.filterKeys?Xr(n.filterKeys):!1,l=Object.keys(n?.customKeyFilter??{}).length;if(!e?.length)return i;let h=null;e:for(let s=0;s<e.length;s++){const[p,_=p]=Xr(e[s]),x={},T={};let k=-1;if((t||l>0)&&!n?.noFilter){let A=!1;if(typeof p=="object"){if(p.type==="divider"||p.type==="subheader"){h?.type==="divider"&&p.type==="subheader"&&i.push(h),h={index:s,matches:{},type:p.type};continue}const F=a||Object.keys(_);A=F.length===l;for(const z of F){const G=Ls(_,z),Y=n?.customKeyFilter?.[z];if(k=Y?Y(G,t,p):r(G,t,p),k!==-1&&k!==!1)Y?x[z]=fC(k,t):T[z]=fC(k,t);else if(n?.filterMode==="every")continue e}}else k=r(p,t,p),k!==-1&&k!==!1&&(T.title=fC(k,t));const M=Object.keys(T).length,R=Object.keys(x).length;if(!M&&!R||n?.filterMode==="union"&&R!==l&&!M||n?.filterMode==="intersection"&&(R!==l||!M&&l>0&&!A))continue}h&&(i.push(h),h=null),i.push({index:s,matches:{...T,...x}})}return i}function A_(e,t,n,i){const r=tn([]),a=tn(new Map),l=me(()=>i?.transform?bi(t).map(s=>[s,i.transform(s)]):bi(t));jr(()=>{const s=typeof n=="function"?n():bi(n),p=typeof s!="string"&&typeof s!="number"?"":String(s),_=Loe(l.value,p,{customKeyFilter:{...e.customKeyFilter,...bi(i?.customKeyFilter)},default:e.customFilter,filterKeys:e.filterKeys,filterMode:e.filterMode,noFilter:e.noFilter}),x=bi(t),T=[],k=new Map;_.forEach(A=>{let{index:M,matches:R}=A;const F=x[M];T.push(F),k.set(F.value,R)}),r.value=T,a.value=k});function h(s){return a.value.get(s.value)}return{filteredItems:r,filteredMatches:a,getMatches:h}}function a8(e,t,n){return n==null||!n.length?t:n.map((i,r)=>{const a=r===0?0:n[r-1][1],l=[V("span",{class:_t(`${e}__unmask`)},[t.slice(a,i[0])]),V("span",{class:_t(`${e}__mask`)},[t.slice(i[0],i[1])])];return r===n.length-1&&l.push(V("span",{class:_t(`${e}__unmask`)},[t.slice(i[1])])),V(an,null,[l])})}const Roe=lt({autoSelectFirst:{type:[Boolean,String]},clearOnSelect:Boolean,search:String,...I_({filterKeys:["title"]}),...OP(),...hr(Ub({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"])},"VAutocomplete"),Xk=Mt()({name:"VAutocomplete",props:Roe(),emits:{"update:focused":e=>!0,"update:search":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,t){let{slots:n}=t;const{t:i}=fr(),r=tt(),a=tn(!1),l=tn(!0),h=tn(!1),s=tt(),p=tt(),_=tn(-1),x=tn(null),{items:T,transformIn:k,transformOut:A}=CP(e),{textColorClasses:M,textColorStyles:R}=Uo(()=>r.value?.color),F=Pn(e,"search",""),z=Pn(e,"modelValue",[],fe=>k(fe===null?[null]:Xr(fe)),fe=>{const Ie=A(fe);return e.multiple?Ie:Ie[0]??null}),G=me(()=>typeof e.counterValue=="function"?e.counterValue(z.value):typeof e.counterValue=="number"?e.counterValue:z.value.length),Y=C_(e),{filteredItems:J,getMatches:re}=A_(e,T,()=>x.value??(l.value?"":F.value)),X=me(()=>e.hideSelected&&x.value===null?J.value.filter(fe=>!z.value.some(Ie=>Ie.value===fe.value)):J.value),U=me(()=>!!(e.chips||n.chip)),H=me(()=>U.value||!!n.selection),W=me(()=>z.value.map(fe=>fe.props.value)),ie=me(()=>(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&F.value===X.value[0]?.title)&&X.value.length>0&&!l.value&&!h.value),Q=me(()=>e.hideNoData&&!X.value.length||Y.isReadonly.value||Y.isDisabled.value),te=Pn(e,"menu"),ke=me({get:()=>te.value,set:fe=>{te.value&&!fe&&s.value?.openChildren.size||fe&&Q.value||(te.value=fe)}}),{menuId:Re,ariaExpanded:Be,ariaControls:Je,ariaLabel:nt}=RP(e,ke),De=tt(),Ge=LP(De,r);function Ee(fe){e.openOnClear&&(ke.value=!0),F.value=""}function it(){Q.value||(ke.value=!0)}function ot(fe){Q.value||(a.value&&(fe.preventDefault(),fe.stopPropagation()),ke.value=!ke.value)}function mt(fe){(i_(fe)||fe.key==="Backspace")&&r.value?.focus()}function Pt(fe){if(Y.isReadonly.value)return;const Ie=r.value?.selectionStart,je=z.value.length;if(["Enter","ArrowDown","ArrowUp"].includes(fe.key)&&fe.preventDefault(),["Enter","ArrowDown"].includes(fe.key)&&(ke.value=!0),["Escape"].includes(fe.key)&&(ke.value=!1),ie.value&&["Enter","Tab"].includes(fe.key)&&!z.value.some(Xe=>{let{value:yt}=Xe;return yt===X.value[0].value})&&we(X.value[0]),fe.key==="ArrowDown"&&ie.value&&De.value?.focus("next"),["Backspace","Delete"].includes(fe.key)){if(!e.multiple&&H.value&&z.value.length>0&&!F.value)return we(z.value[0],!1);if(~_.value){fe.preventDefault();const Xe=_.value;we(z.value[_.value],!1),_.value=Xe>=je-1?je-2:Xe}else fe.key==="Backspace"&&!F.value&&(_.value=je-1);return}if(e.multiple)if(fe.key==="ArrowLeft"){if(_.value<0&&Ie&&Ie>0)return;const Xe=_.value>-1?_.value-1:je-1;if(z.value[Xe])_.value=Xe;else{const yt=F.value?.length??null;_.value=-1,r.value?.setSelectionRange(yt,yt)}}else if(fe.key==="ArrowRight"){if(_.value<0)return;const Xe=_.value+1;z.value[Xe]?_.value=Xe:(_.value=-1,r.value?.setSelectionRange(0,0))}else~_.value&&i_(fe)&&(_.value=-1)}function $t(fe){if(n_(r.value,":autofill")||n_(r.value,":-webkit-autofill")){const Ie=T.value.find(je=>je.title===fe.target.value);Ie&&we(Ie)}}function ct(){e.eager&&p.value?.calculateVisibleItems()}function ht(){a.value&&(l.value=!0,r.value?.focus()),x.value=null}function Qe(fe){a.value=!0,setTimeout(()=>{h.value=!0})}function kt(fe){h.value=!1}function Ue(fe){(fe==null||fe===""&&!e.multiple&&!H.value)&&(z.value=[])}const ue=tn(!1);function we(fe){let Ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!(!fe||fe.props.disabled))if(e.multiple){const je=z.value.findIndex(yt=>(e.valueComparator||bo)(yt.value,fe.value)),Xe=Ie??!~je;if(~je){const yt=Xe?[...z.value,fe]:[...z.value];yt.splice(je,1),z.value=yt}else Xe&&(z.value=[...z.value,fe]);e.clearOnSelect&&(F.value="")}else{const je=Ie!==!1;z.value=je?[fe]:[],x.value=l.value?"":F.value??"",F.value=je&&!H.value?fe.title:"",Hn(()=>{ke.value=!1,l.value=!0})}}return Yt(a,(fe,Ie)=>{fe!==Ie&&(fe?(ue.value=!0,F.value=e.multiple||H.value?"":String(z.value.at(-1)?.props.title??""),l.value=!0,Hn(()=>ue.value=!1)):(!e.multiple&&F.value==null&&(z.value=[]),ke.value=!1,!l.value&&F.value&&(x.value=F.value),F.value="",_.value=-1))}),Yt(F,fe=>{!a.value||ue.value||(fe&&(ke.value=!0),l.value=!fe)}),Yt(ke,fe=>{if(!e.hideSelected&&fe&&z.value.length&&l.value){const Ie=X.value.findIndex(je=>z.value.some(Xe=>je.value===Xe.value));Xi&&window.requestAnimationFrame(()=>{Ie>=0&&p.value?.scrollToIndex(Ie)})}fe&&(x.value=null)}),Yt(T,(fe,Ie)=>{ke.value||a.value&&!Ie.length&&fe.length&&(ke.value=!0)}),zt(()=>{const fe=!!(!e.hideNoData||X.value.length||n["prepend-item"]||n["append-item"]||n["no-data"]),Ie=z.value.length>0,je=wh.filterProps(e);return ce(wh,At({ref:r},je,{modelValue:F.value,"onUpdate:modelValue":[Xe=>F.value=Xe,Ue],focused:a.value,"onUpdate:focused":Xe=>a.value=Xe,validationValue:z.externalValue,counterValue:G.value,dirty:Ie,onChange:$t,class:["v-autocomplete",`v-autocomplete--${e.multiple?"multiple":"single"}`,{"v-autocomplete--active-menu":ke.value,"v-autocomplete--chips":!!e.chips,"v-autocomplete--selection-slot":!!H.value,"v-autocomplete--selecting-index":_.value>-1},e.class],style:e.style,readonly:Y.isReadonly.value,placeholder:Ie?void 0:e.placeholder,"onClick:clear":Ee,"onMousedown:control":it,onKeydown:Pt,"aria-expanded":Be.value,"aria-controls":Je.value}),{...n,default:()=>V(an,null,[ce(a_,At({id:Re.value,ref:s,modelValue:ke.value,"onUpdate:modelValue":Xe=>ke.value=Xe,activator:"parent",contentClass:"v-autocomplete__content",disabled:Q.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,onAfterEnter:ct,onAfterLeave:ht},e.menuProps),{default:()=>[fe&&ce(o_,At({ref:De,filterable:!0,selected:W.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:Xe=>Xe.preventDefault(),onKeydown:mt,onFocusin:Qe,onFocusout:kt,tabindex:"-1",selectable:!0,"aria-live":"polite",color:e.itemColor??e.color},Ge,e.listProps),{default:()=>[n["prepend-item"]?.(),!X.value.length&&!e.hideNoData&&(n["no-data"]?.()??ce(vu,{key:"no-data",title:i(e.noDataText)},null)),ce(UT,{ref:p,renderless:!0,items:X.value,itemKey:"value"},{default:Xe=>{let{item:yt,index:wt,itemRef:Lt}=Xe;const Dt=At(yt.props,{ref:Lt,key:yt.value,active:ie.value&&wt===0?!0:void 0,onClick:()=>we(yt,null)});return yt.type==="divider"?n.divider?.({props:yt.raw,index:wt})??ce(oc,At(yt.props,{key:`divider-${wt}`}),null):yt.type==="subheader"?n.subheader?.({props:yt.raw,index:wt})??ce(k_,At(yt.props,{key:`subheader-${wt}`}),null):n.item?.({item:yt,index:wt,props:Dt})??ce(vu,At(Dt,{role:"option"}),{prepend:gn=>{let{isSelected:Kt}=gn;return V(an,null,[e.multiple&&!e.hideSelected?ce(ud,{key:yt.value,modelValue:Kt,ripple:!1,tabindex:"-1",onClick:Cn=>Cn.preventDefault()},null):void 0,yt.props.prependAvatar&&ce(uc,{image:yt.props.prependAvatar},null),yt.props.prependIcon&&ce(Pi,{icon:yt.props.prependIcon},null)])},title:()=>l.value?yt.title:a8("v-autocomplete",yt.title,re(yt)?.title)})}}),n["append-item"]?.()]})]}),z.value.map((Xe,yt)=>{function wt(Kt){Kt.stopPropagation(),Kt.preventDefault(),we(Xe,!1)}const Lt={"onClick:close":wt,onKeydown(Kt){Kt.key!=="Enter"&&Kt.key!==" "||(Kt.preventDefault(),Kt.stopPropagation(),wt(Kt))},onMousedown(Kt){Kt.preventDefault(),Kt.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},Dt=U.value?!!n.chip:!!n.selection,gn=Dt?MT(U.value?n.chip({item:Xe,index:yt,props:Lt}):n.selection({item:Xe,index:yt})):void 0;if(!(Dt&&!gn))return V("div",{key:Xe.value,class:_t(["v-autocomplete__selection",yt===_.value&&["v-autocomplete__selection--selected",M.value]]),style:Xt(yt===_.value?R.value:{})},[U.value?n.chip?ce(ui,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:Xe.title}}},{default:()=>[gn]}):ce(Ds,At({key:"chip",closable:e.closableChips,size:"small",text:Xe.title,disabled:Xe.props.disabled},Lt),null):gn??V("span",{class:"v-autocomplete__selection-text"},[Xe.title,e.multiple&&yt<z.value.length-1&&V("span",{class:"v-autocomplete__selection-comma"},[Bn(",")])])])})]),"append-inner":function(){for(var Xe=arguments.length,yt=new Array(Xe),wt=0;wt<Xe;wt++)yt[wt]=arguments[wt];return V(an,null,[n["append-inner"]?.(...yt),e.menuIcon?ce(Pi,{class:"v-autocomplete__menu-icon",color:r.value?.fieldIconColor,icon:e.menuIcon,onMousedown:ot,onClick:SN,"aria-label":nt.value,title:nt.value,tabindex:"-1"},null):void 0])}})}),To({isFocused:a,isPristine:l,menu:ke,search:F,filteredItems:J,select:we},r)}}),Ooe=lt({...Tn(),...ti()},"VCardActions"),l8=Mt()({name:"VCardActions",props:Ooe(),setup(e,t){let{slots:n}=t;return ts({VBtn:{slim:!0,variant:"text"}}),zt(()=>ce(e.tag,{class:_t(["v-card-actions",e.class]),style:Xt(e.style)},n)),{}}}),Voe=lt({opacity:[Number,String],...Tn(),...ti()},"VCardSubtitle"),c8=Mt()({name:"VCardSubtitle",props:Voe(),setup(e,t){let{slots:n}=t;return zt(()=>ce(e.tag,{class:_t(["v-card-subtitle",e.class]),style:Xt([{"--v-card-subtitle-opacity":e.opacity},e.style])},n)),{}}}),u8=Ih("v-card-title"),Boe=lt({appendAvatar:String,appendIcon:In,prependAvatar:String,prependIcon:In,subtitle:{type:[String,Number,Boolean],default:void 0},title:{type:[String,Number,Boolean],default:void 0},...Tn(),...Ts(),...ti()},"VCardItem"),d8=Mt()({name:"VCardItem",props:Boe(),setup(e,t){let{slots:n}=t;return zt(()=>{const i=!!(e.prependAvatar||e.prependIcon),r=!!(i||n.prepend),a=!!(e.appendAvatar||e.appendIcon),l=!!(a||n.append),h=!!(e.title!=null||n.title),s=!!(e.subtitle!=null||n.subtitle);return ce(e.tag,{class:_t(["v-card-item",e.class]),style:Xt(e.style)},{default:()=>[r&&V("div",{key:"prepend",class:"v-card-item__prepend"},[n.prepend?ce(ui,{key:"prepend-defaults",disabled:!i,defaults:{VAvatar:{density:e.density,image:e.prependAvatar},VIcon:{density:e.density,icon:e.prependIcon}}},n.prepend):V(an,null,[e.prependAvatar&&ce(uc,{key:"prepend-avatar",density:e.density,image:e.prependAvatar},null),e.prependIcon&&ce(Pi,{key:"prepend-icon",density:e.density,icon:e.prependIcon},null)])]),V("div",{class:"v-card-item__content"},[h&&ce(u8,{key:"title"},{default:()=>[n.title?.()??en(e.title)]}),s&&ce(c8,{key:"subtitle"},{default:()=>[n.subtitle?.()??en(e.subtitle)]}),n.default?.()]),l&&V("div",{key:"append",class:"v-card-item__append"},[n.append?ce(ui,{key:"append-defaults",disabled:!a,defaults:{VAvatar:{density:e.density,image:e.appendAvatar},VIcon:{density:e.density,icon:e.appendIcon}}},n.append):V(an,null,[e.appendIcon&&ce(Pi,{key:"append-icon",density:e.density,icon:e.appendIcon},null),e.appendAvatar&&ce(uc,{key:"append-avatar",density:e.density,image:e.appendAvatar},null)])])]})}),{}}}),Foe=lt({opacity:[Number,String],...Tn(),...ti()},"VCardText"),h8=Mt()({name:"VCardText",props:Foe(),setup(e,t){let{slots:n}=t;return zt(()=>ce(e.tag,{class:_t(["v-card-text",e.class]),style:Xt([{"--v-card-text-opacity":e.opacity},e.style])},n)),{}}}),zoe=lt({appendAvatar:String,appendIcon:In,disabled:Boolean,flat:Boolean,hover:Boolean,image:String,link:{type:Boolean,default:void 0},prependAvatar:String,prependIcon:In,ripple:{type:[Boolean,Object],default:!0},subtitle:{type:[String,Number,Boolean],default:void 0},text:{type:[String,Number,Boolean],default:void 0},title:{type:[String,Number,Boolean],default:void 0},...cl(),...Tn(),...Ts(),...Bs(),...Ks(),...VT(),...Ah(),...T_(),...Wr(),...Fb(),...ti(),...Mi(),...Nc({variant:"elevated"})},"VCard"),xv=Mt()({name:"VCard",directives:{vRipple:Ha},props:zoe(),setup(e,t){let{attrs:n,slots:i}=t;const{themeClasses:r}=Qi(e),{borderClasses:a}=Fl(e),{colorClasses:l,colorStyles:h,variantClasses:s}=ag(e),{densityClasses:p}=qa(e),{dimensionStyles:_}=Fs(e),{elevationClasses:x}=wo(e),{loaderClasses:T}=Ob(e),{locationStyles:k}=ug(e),{positionClasses:A}=S_(e),{roundedClasses:M}=ns(e),R=Bb(e,n);return zt(()=>{const F=e.link!==!1&&R.isLink.value,z=!e.disabled&&e.link!==!1&&(e.link||R.isClickable.value),G=F?"a":e.tag,Y=!!(i.title||e.title!=null),J=!!(i.subtitle||e.subtitle!=null),re=Y||J,X=!!(i.append||e.appendAvatar||e.appendIcon),U=!!(i.prepend||e.prependAvatar||e.prependIcon),H=!!(i.image||e.image),W=re||U||X,ie=!!(i.text||e.text!=null);return Li(ce(G,At(R.linkProps,{class:["v-card",{"v-card--disabled":e.disabled,"v-card--flat":e.flat,"v-card--hover":e.hover&&!(e.disabled||e.flat),"v-card--link":z},r.value,a.value,l.value,p.value,x.value,T.value,A.value,M.value,s.value,e.class],style:[h.value,_.value,k.value,e.style],onClick:z&&R.navigate,tabindex:e.disabled?-1:void 0}),{default:()=>[H&&V("div",{key:"image",class:"v-card__image"},[i.image?ce(ui,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},i.image):ce(xh,{key:"image-img",cover:!0,src:e.image},null)]),ce(Vb,{name:"v-card",active:!!e.loading,color:typeof e.loading=="boolean"?void 0:e.loading},{default:i.loader}),W&&ce(d8,{key:"item",prependAvatar:e.prependAvatar,prependIcon:e.prependIcon,title:e.title,subtitle:e.subtitle,appendAvatar:e.appendAvatar,appendIcon:e.appendIcon},{default:i.item,prepend:i.prepend,title:i.title,subtitle:i.subtitle,append:i.append}),ie&&ce(h8,{key:"text"},{default:()=>[i.text?.()??e.text]}),i.default?.(),i.actions&&ce(l8,null,{default:i.actions}),hm(z,"v-card")]}),[[Ha,z&&e.ripple]])}),{}}}),Noe=lt({fluid:{type:Boolean,default:!1},...Tn(),...Bs(),...ti()},"VContainer"),f8=Mt()({name:"VContainer",props:Noe(),setup(e,t){let{slots:n}=t;const{rtlClasses:i}=qs(),{dimensionStyles:r}=Fs(e);return zt(()=>ce(e.tag,{class:_t(["v-container",{"v-container--fluid":e.fluid},i.value,e.class]),style:Xt([r.value,e.style])},n)),{}}}),m8=LT.reduce((e,t)=>(e[t]={type:[Boolean,String,Number],default:!1},e),{}),p8=LT.reduce((e,t)=>{const n="offset"+hd(t);return e[n]={type:[String,Number],default:null},e},{}),g8=LT.reduce((e,t)=>{const n="order"+hd(t);return e[n]={type:[String,Number],default:null},e},{}),A4={col:Object.keys(m8),offset:Object.keys(p8),order:Object.keys(g8)};function $oe(e,t,n){let i=e;if(!(n==null||n===!1)){if(t){const r=t.replace(e,"");i+=`-${r}`}return e==="col"&&(i="v-"+i),e==="col"&&(n===""||n===!0)||(i+=`-${n}`),i.toLowerCase()}}const Uoe=["auto","start","end","center","baseline","stretch"],joe=lt({cols:{type:[Boolean,String,Number],default:!1},...m8,offset:{type:[String,Number],default:null},...p8,order:{type:[String,Number],default:null},...g8,alignSelf:{type:String,default:null,validator:e=>Uoe.includes(e)},...Tn(),...ti()},"VCol"),Woe=Mt()({name:"VCol",props:joe(),setup(e,t){let{slots:n}=t;const i=me(()=>{const r=[];let a;for(a in A4)A4[a].forEach(h=>{const s=e[h],p=$oe(a,h,s);p&&r.push(p)});const l=r.some(h=>h.startsWith("v-col-"));return r.push({"v-col":!l||!e.cols,[`v-col-${e.cols}`]:e.cols,[`offset-${e.offset}`]:e.offset,[`order-${e.order}`]:e.order,[`align-self-${e.alignSelf}`]:e.alignSelf}),r});return()=>Sh(e.tag,{class:[i.value,e.class],style:e.style},n.default?.())}}),VP=["start","end","center"],v8=["space-between","space-around","space-evenly"];function BP(e,t){return LT.reduce((n,i)=>{const r=e+hd(i);return n[r]=t(),n},{})}const Hoe=[...VP,"baseline","stretch"],_8=e=>Hoe.includes(e),y8=BP("align",()=>({type:String,default:null,validator:_8})),Goe=[...VP,...v8],b8=e=>Goe.includes(e),x8=BP("justify",()=>({type:String,default:null,validator:b8})),qoe=[...VP,...v8,"stretch"],w8=e=>qoe.includes(e),T8=BP("alignContent",()=>({type:String,default:null,validator:w8})),P4={align:Object.keys(y8),justify:Object.keys(x8),alignContent:Object.keys(T8)},Koe={align:"align",justify:"justify",alignContent:"align-content"};function Xoe(e,t,n){let i=Koe[e];if(n!=null){if(t){const r=t.replace(e,"");i+=`-${r}`}return i+=`-${n}`,i.toLowerCase()}}const Yoe=lt({dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:_8},...y8,justify:{type:String,default:null,validator:b8},...x8,alignContent:{type:String,default:null,validator:w8},...T8,...Tn(),...ti()},"VRow"),Zoe=Mt()({name:"VRow",props:Yoe(),setup(e,t){let{slots:n}=t;const i=me(()=>{const r=[];let a;for(a in P4)P4[a].forEach(l=>{const h=e[l],s=Xoe(a,l,h);s&&r.push(s)});return r.push({"v-row--no-gutters":e.noGutters,"v-row--dense":e.dense,[`align-${e.align}`]:e.align,[`justify-${e.justify}`]:e.justify,[`align-content-${e.alignContent}`]:e.alignContent}),r});return()=>Sh(e.tag,{class:["v-row",i.value,e.class],style:e.style},n.default?.())}}),S8=Ih("v-spacer","div","VSpacer"),FP=lt({color:String,...cl(),...Tn(),...Bs(),...Ks(),...Ah(),...T_(),...Wr(),...ti(),...Mi()},"VSheet"),nd=Mt()({name:"VSheet",props:FP(),setup(e,t){let{slots:n}=t;const{themeClasses:i}=Qi(e),{backgroundColorClasses:r,backgroundColorStyles:a}=ir(()=>e.color),{borderClasses:l}=Fl(e),{dimensionStyles:h}=Fs(e),{elevationClasses:s}=wo(e),{locationStyles:p}=ug(e),{positionClasses:_}=S_(e),{roundedClasses:x}=ns(e);return zt(()=>ce(e.tag,{class:_t(["v-sheet",i.value,r.value,l.value,s.value,_.value,x.value,e.class]),style:Xt([a.value,h.value,p.value,e.style])},n)),{}}});function Joe(e){const t=tn(e());let n=-1;function i(){clearInterval(n)}function r(){i(),Hn(()=>t.value=e())}function a(l){const h=l?getComputedStyle(l):{transitionDuration:.2},s=parseFloat(h.transitionDuration)*1e3||200;if(i(),t.value<=0)return;const p=performance.now();n=window.setInterval(()=>{const _=performance.now()-p+s;t.value=Math.max(e()-_,0),t.value<=0&&i()},s)}return ao(i),{clear:i,time:t,start:a,reset:r}}const E8=lt({multiLine:Boolean,text:String,timer:[Boolean,String],timeout:{type:[Number,String],default:5e3},vertical:Boolean,...Ah({location:"bottom"}),...T_(),...Wr(),...Nc(),...Mi(),...hr(Nb({transition:"v-snackbar-transition"}),["persistent","noClickAnimation","scrim","scrollStrategy","stickToTarget"])},"VSnackbar"),Ow=Mt()({name:"VSnackbar",props:E8(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const i=Pn(e,"modelValue"),{positionClasses:r}=S_(e),{scopeId:a}=hg(),{themeClasses:l}=Qi(e),{colorClasses:h,colorStyles:s,variantClasses:p}=ag(e),{roundedClasses:_}=ns(e),x=Joe(()=>Number(e.timeout)),T=tt(),k=tt(),A=tn(!1),M=tn(0),R=tt(),F=Si(H0,void 0);ca(()=>!!F,()=>{const ie=YN();jr(()=>{R.value=ie.mainStyles.value})}),Yt(i,G),Yt(()=>e.timeout,G),Mr(()=>{i.value&&G()});let z=-1;function G(){x.reset(),window.clearTimeout(z);const ie=Number(e.timeout);if(!i.value||ie===-1)return;const Q=iP(k.value);x.start(Q),z=window.setTimeout(()=>{i.value=!1},ie)}function Y(){x.reset(),window.clearTimeout(z)}function J(){A.value=!0,Y()}function re(){A.value=!1,G()}function X(ie){M.value=ie.touches[0].clientY}function U(ie){Math.abs(M.value-ie.changedTouches[0].clientY)>50&&(i.value=!1)}function H(){A.value&&re()}const W=me(()=>e.location.split(" ").reduce((ie,Q)=>(ie[`v-snackbar--${Q}`]=!0,ie),{}));return zt(()=>{const ie=dd.filterProps(e),Q=!!(n.default||n.text||e.text);return ce(dd,At({ref:T,class:["v-snackbar",{"v-snackbar--active":i.value,"v-snackbar--multi-line":e.multiLine&&!e.vertical,"v-snackbar--timer":!!e.timer,"v-snackbar--vertical":e.vertical},W.value,r.value,e.class],style:[R.value,e.style]},ie,{modelValue:i.value,"onUpdate:modelValue":te=>i.value=te,contentProps:At({class:["v-snackbar__wrapper",l.value,h.value,_.value,p.value],style:[s.value],onPointerenter:J,onPointerleave:re},ie.contentProps),persistent:!0,noClickAnimation:!0,scrim:!1,scrollStrategy:"none",_disableGlobalStack:!0,onTouchstartPassive:X,onTouchend:U,onAfterLeave:H},a),{default:()=>[hm(!1,"v-snackbar"),e.timer&&!A.value&&V("div",{key:"timer",class:"v-snackbar__timer"},[ce(Rb,{ref:k,color:typeof e.timer=="string"?e.timer:"info",max:e.timeout,modelValue:x.time.value},null)]),Q&&V("div",{key:"content",class:"v-snackbar__content",role:"status","aria-live":"polite"},[n.text?.()??e.text,n.default?.()]),n.actions&&ce(ui,{defaults:{VBtn:{variant:"text",ripple:!1,slim:!0}}},{default:()=>[V("div",{class:"v-snackbar__actions"},[n.actions({isActive:i})])]})],activator:n.activator})}),To({},T)}}),Qoe={class:"rp-map-wrap"},eae={class:"rp-ctrl-left"},tae={class:"rp-ctrl-right"},nae={key:1,class:"rp-fare"},iae={class:"fare-chip-grid"},rae={class:"fare-chip-label"},sae={class:"fare-chip-amount"},oae={key:2,class:"rp-segments"},aae={class:"segment-line"},lae={class:"segment-line-name"},cae={class:"segment-stops"},uae={class:"segment-route"},dae={class:"segment-station"},hae={class:"segment-station"},mC="singatrain-railrouter-neutralize",fae=eB({name:"RoutePlanner",__name:"RoutePlanner",setup(e){const t=tt("Jurong East"),n=tt("Marina Bay"),i=tt(!1),r=tt(null),a=tt(null),l=tt([]),h=tt(null),s=tt(null),p=OT(),{smAndDown:_}=Bl(),x=me(()=>p.global.current.value.dark),T=tt(!1),k=tt(null);let A=null,M=null;const R=new Map,F=tt([]),z=[];let G=null;const Y=tt(!1);let J=null;const{progressIndex:re,segmentProgress:X,routeStationIds:U,totalStops:H,startAnimation:W,resetAnimation:ie,attachRenderer:Q,detachRenderer:te}=gre(),{allStations:ke,shortestPath:Re,estimateTimeMinutes:Be,estimateDistanceKm:Je,summariseSegments:nt}=gP(),{fareByType:De}=e2(),Ge=[{type:"adult",label:"Adult",color:"#f97316"},{type:"senior",label:"Senior Citizen",color:"#0d9488"},{type:"disability",label:"Persons with Disabilities",color:"#6366f1"},{type:"workfare",label:"Workfare Concession",color:"#db2777"},{type:"primary",label:"Primary Student",color:"#2563eb"},{type:"secondary",label:"Secondary Student",color:"#1d4ed8"},{type:"polytechnic",label:"Polytechnic Student",color:"#4f46e5"},{type:"university",label:"University Student",color:"#0284c7"},{type:"ns",label:"National Serviceman",color:"#f97316"}];l.value=ke.map(Ut=>({id:Ut,name:Ut})),!t.value&&l.value.length&&(t.value=l.value[0].id),!n.value&&l.value.length>1&&(n.value=l.value[1].id);const Ee="./",it=`${Ee}railrouter/index.61d3354a.css`,ot=`${Ee}railrouter/index.975ef6c8.js`,mt=`${Ee}sg-rail.geojson`;async function Pt(){if(!R.size)try{const Ut=await fetch(mt);if(!Ut.ok)throw new Error("Failed to load station coordinates.");((await Ut.json()).features??[]).filter(Ln=>Ln.properties.stop_type==="station").forEach(Ln=>{R.set(Ln.properties.name,{coords:Ln.geometry.coordinates,codes:Ln.properties.station_codes,id:Ln.id})})}catch(Ut){throw console.error(Ut),new Error("Could not load station metadata. Please refresh and try again.")}}function $t(Ut){return new Promise((fn,wn)=>{if(document.querySelector(`link[data-railrouter="true"][href="${Ut}"]`)){fn();return}const Ln=document.createElement("link");Ln.rel="stylesheet",Ln.href=Ut,Ln.dataset.railrouter="true",Ln.onload=()=>fn(),Ln.onerror=()=>wn(new Error(`Failed to load RailRouter stylesheet: ${Ut}`)),document.head.appendChild(Ln)})}function ct(Ut){return new Promise((fn,wn)=>{if(document.querySelector(`script[data-railrouter="true"][src="${Ut}"]`)){fn();return}const Ln=document.createElement("script");Ln.src=Ut,Ln.async=!0,Ln.dataset.railrouter="true",Ln.onload=()=>fn(),Ln.onerror=()=>wn(new Error(`Failed to load RailRouter script: ${Ut}`)),document.body.appendChild(Ln)})}async function ht(){Fn(),T.value||(await Promise.all([$t(it),ct(ot)]),T.value=!0)}function Qe(Ut=1e4){return new Promise(fn=>{const wn=performance.now(),Ln=()=>{if(window.$map){fn(window.$map);return}if(performance.now()-wn>Ut){fn(null);return}requestAnimationFrame(Ln)};Ln()})}function kt(){if(!A)return;const Ut=A,fn="singatrain-route",wn="singatrain-route-glow",Ln="singatrain-route-line",Ci=()=>{Ut.getSource(fn)||Ut.addSource(fn,{type:"geojson",data:{type:"Feature",geometry:{type:"LineString",coordinates:[]}}}),Ut.getLayer(wn)||Ut.addLayer({id:wn,type:"line",source:fn,paint:{"line-color":"#f97316","line-width":12,"line-opacity":.25}}),Ut.getLayer(Ln)||Ut.addLayer({id:Ln,type:"line",source:fn,paint:{"line-color":"#f97316","line-width":5}})};Ut.isStyleLoaded()?Ci():Ut.once("styledata",Ci)}function Ue(){if(!A)return;const Ut=A.getSource("singatrain-route");if(!Ut)return;const fn=F.value.filter(wn=>Array.isArray(wn));Ut.setData({type:"Feature",geometry:{type:"LineString",coordinates:fn}})}function ue(){z.forEach(Ut=>Ut?.marker.remove()),z.length=0,G?.remove(),G=null}function we(){if(!A)return;ue(),F.value.forEach((fn,wn)=>{if(!fn){z.push(null);return}const Ln=document.createElement("div");Ln.className="route-stop route-stop-upcoming",Ln.dataset.index=String(wn);const Ci=new h0.Marker({element:Ln,anchor:"center"}).setLngLat(fn).addTo(A);z.push({marker:Ci,el:Ln})});const Ut=document.createElement("div");Ut.className="route-train-marker",Ut.innerHTML='<span class="material-icons">train</span>',G=new h0.Marker({element:Ut,anchor:"center"}),F.value[0]&&G.setLngLat(F.value[0]).addTo(A)}function fe(Ut){z.forEach((fn,wn)=>{fn&&(fn.el.classList.toggle("route-stop-active",wn===Ut),fn.el.classList.toggle("route-stop-visited",wn<Ut),fn.el.classList.toggle("route-stop-upcoming",wn>Ut))})}function Ie(){if(!A||!G)return;const Ut=re.value,fn=F.value[Ut],wn=F.value[Ut+1]??fn;if(!fn)return;if(!wn){G.setLngLat(fn);return}const Ln=X.value,Ci=fn[0]+(wn[0]-fn[0])*Ln,xr=fn[1]+(wn[1]-fn[1])*Ln;G.setLngLat([Ci,xr])}function je(Ut){return{"--segment-color":oh(Ut)}}function Xe(Ut){if(!A)return;const fn=F.value[Ut];if(!fn)return;const wn=_.value?12.3:13.2;A.easeTo({center:fn,zoom:Math.max(A.getZoom(),wn),duration:850})}function yt(Ut){if(!A)return;const fn=A.getCanvas();fn.style.filter=Ut?"invert(0.92) hue-rotate(180deg)":""}async function wt(){await ht(),await Pt(),await Hn();const Ut=await Qe();if(!Ut){r.value="Unable to initialise RailRouter map.";return}A=Ut,kt(),yt(x.value),M=new ResizeObserver(()=>A?.resize()),k.value&&M.observe(k.value),Ut.resize(),Ut.isStyleLoaded()?Ut.easeTo({center:[103.8198,1.3521],zoom:11.5,duration:0}):Ut.once("styledata",()=>{Ut.easeTo({center:[103.8198,1.3521],zoom:11.5,duration:0})})}function Lt(){te(),ue(),M&&k.value&&M.unobserve(k.value),M?.disconnect(),M=null,A&&(A.getLayer("singatrain-route-line")&&A.removeLayer("singatrain-route-line"),A.getLayer("singatrain-route-glow")&&A.removeLayer("singatrain-route-glow"),A.getSource("singatrain-route")&&A.removeSource("singatrain-route"),A.remove()),A=null,ni()}async function Dt(Ut,fn){const wn=Re(Ut,fn);if(!wn||!wn.steps?.length)throw new Error("No valid route found.");const Ln=Be(wn.totalWeight),Ci=Je(wn.totalWeight),xr=nt(wn);return h.value={estimatedTime:Ln,distanceKm:Ci,segments:xr},wn.steps.map(Ss=>Ss.station)}async function gn(Ut,fn){if(!h.value)return;const wn=h.value.distanceKm,Ln="SGD";s.value=Ge.map(({type:Ci,label:xr,color:Ss})=>({type:Ci,label:xr,amount:Number(De(wn,Ci)),currency:Ln,color:Ss}))}async function Kt(){r.value=null,s.value=null,h.value=null,i.value=!0;try{if(!t.value||!n.value)throw new Error("Please select a start and end station.");if(t.value===n.value)throw new Error("Pick two different stations to plan a journey.");if(te(),ie(),A||await wt(),!A)throw new Error("RailRouter map is still initialising. Please try again shortly.");const Ut=await Dt(t.value,n.value);if(!Ut||Ut.length<2)throw new Error("No valid route found.");U.value=Ut,H.value=Ut.length,F.value=Ut.map(fn=>{const wn=R.get(fn);return wn?wn.coords:(console.warn("Missing coordinates for station:",fn),null)}),kt(),Ue(),we(),fe(0),Ie(),Xe(0),await gn(t.value,n.value),Q(fn=>{fe(fn),Xe(fn)}),W(),a.value=Date.now()}catch(Ut){r.value=Ut?.message??"Failed to plan route."}finally{i.value=!1}}function Cn(){ie(),U.value.length>1&&(fe(0),Xe(0),W())}function Dn(){Y.value=!0,J&&window.clearTimeout(J),J=window.setTimeout(()=>{Y.value=!1,J=null},3200)}Yt(x,Ut=>yt(Ut)),Yt([re,X],Ie),Yt(U,()=>{Y.value=!1});function Fn(){if(typeof window>"u"||document.getElementById(mC))return;const Ut=document.createElement("style");Ut.id=mC,Ut.textContent=`
    html {
      position: static !important;
      inset: auto !important;
      overflow: auto !important;
      height: 100% !important;
    }
    body {
      overflow: auto !important;
      position: static !important;
      min-height: 100vh !important;
      height: 100% !important;
    }
  `,document.head.appendChild(Ut)}function ni(){if(typeof window>"u")return;const Ut=document.getElementById(mC);Ut?.parentNode&&Ut.parentNode.removeChild(Ut)}return Mr(async()=>{window.addEventListener("route-animation-arrived",Dn),await wt()}),FI(()=>{Fn()}),tT(()=>{ni()}),Ur(()=>{window.removeEventListener("route-animation-arrived",Dn),J&&window.clearTimeout(J),Lt(),ni()}),(Ut,fn)=>(Gt(),Fa(f8,{class:"pa-0"},{default:vi(()=>[ce(xv,{class:"rp-card",rounded:"xl",elevation:"1"},{default:vi(()=>[fn[9]||(fn[9]=V("div",{class:"rp-header"},[V("div",{class:"rp-title"},[V("h1",null,"Plan your MRT route"),V("p",{class:"subtitle"}," Smart MRT navigation for Singapore ")])],-1)),V("div",{class:_t(["rp-form",{stacked:bi(_)}])},[ce(Xk,{class:"rp-input",items:l.value,"item-title":"name","item-value":"id",modelValue:t.value,"onUpdate:modelValue":fn[0]||(fn[0]=wn=>t.value=wn),label:"Start station",placeholder:"Type to search...",variant:"outlined",density:"comfortable","hide-details":"","menu-props":{maxHeight:320},"prepend-inner-icon":"mdi-map-marker",clearable:"","auto-select-first":""},null,8,["items","modelValue"]),ce(Xk,{class:"rp-input",items:l.value,"item-title":"name","item-value":"id",modelValue:n.value,"onUpdate:modelValue":fn[1]||(fn[1]=wn=>n.value=wn),label:"End station",placeholder:"Type to search...",variant:"outlined",density:"comfortable","hide-details":"","menu-props":{maxHeight:320},"prepend-inner-icon":"mdi-flag-checkered",clearable:"","auto-select-first":""},null,8,["items","modelValue"]),ce(mi,{class:"rp-plan",color:"orange",variant:"flat",height:"48","prepend-icon":"mdi-transit-connection-variant",loading:i.value,onClick:Kt},{default:vi(()=>[...fn[4]||(fn[4]=[Bn(" Plan Route ",-1)])]),_:1},8,["loading"])],2),r.value?(Gt(),Fa(h2,{key:0,type:"error",variant:"tonal",class:"mt-2",density:"comfortable"},{default:vi(()=>[Bn(en(r.value),1)]),_:1})):xi("",!0),V("div",Qoe,[V("div",{ref_key:"railRouterShell",ref:k,class:"railrouter-shell"},[...fn[5]||(fn[5]=[V("div",{id:"station",class:"sheet"},null,-1),V("button",{type:"button",class:"sheet-close"},null,-1),V("div",{id:"map",class:"railrouter-map"},null,-1),V("div",{id:"home",class:"sheet modal"},[V("button",{type:"button",class:"btn",id:"btn-close-home"},"Let's explore!")],-1),V("details",{id:"legend"},[V("summary",null,"Legend"),V("div",{id:"crowded-timing"})],-1),V("div",{id:"logo",tabindex:"-1"},null,-1),V("div",{id:"search",hidden:""},[V("div",{id:"search-field-container"},[V("input",{id:"search-field",type:"search",autocomplete:"off",spellcheck:"false"}),V("button",{type:"button",id:"search-cancel"},"Cancel")]),V("ul",{id:"search-results"})],-1)])],512),ce(nd,{class:"rp-controls",rounded:"lg",elevation:"1"},{default:vi(()=>[V("div",eae,[ce(Ds,{size:"small",variant:"outlined","prepend-icon":"mdi-counter"},{default:vi(()=>[Bn(en(bi(re)+1)+" / "+en(Math.max(bi(H),0))+" stops ",1)]),_:1}),h.value?(Gt(),Fa(Ds,{key:0,size:"small",variant:"outlined","prepend-icon":"mdi-timer-sand"},{default:vi(()=>[Bn(en(h.value.estimatedTime)+" min  "+en(h.value.distanceKm.toFixed(1))+" km ",1)]),_:1})):xi("",!0)]),V("div",tae,[ce(mi,{class:"ctrl-btn",variant:"outlined",height:"40","prepend-icon":"mdi-restart",onClick:Cn},{default:vi(()=>[...fn[6]||(fn[6]=[Bn(" Restart ",-1)])]),_:1})])]),_:1})]),s.value?.length?(Gt(),on("div",nae,[fn[7]||(fn[7]=V("div",{class:"fare-caption"},[V("span",{class:"material-icons"},"savings"),V("span",null,"Estimated fares by commuter class")],-1)),V("div",iae,[(Gt(!0),on(an,null,cs(s.value,wn=>(Gt(),on("div",{key:wn.type,class:"fare-chip",style:Xt({"--fare-color":wn.color})},[V("span",rae,en(wn.label),1),V("span",sae,en(wn.amount.toFixed(2))+" "+en(wn.currency),1)],4))),128))])])):xi("",!0),h.value?.segments?.length?(Gt(),on("div",oae,[(Gt(!0),on(an,null,cs(h.value.segments,wn=>(Gt(),Fa(nd,{key:wn.line+wn.from,class:"segment-sheet",rounded:"lg",elevation:"0",style:Xt(je(wn.line))},{default:vi(()=>[V("div",aae,[V("span",lae,en(wn.line),1),V("small",cae,en(wn.stops===1?"1 stop":`${wn.stops} stops`),1)]),V("div",uae,[V("span",dae,en(wn.from),1),fn[8]||(fn[8]=V("span",{class:"material-icons segment-arrow"},"arrow_forward",-1)),V("span",hae,en(wn.to),1)])]),_:2},1032,["style"]))),128))])):xi("",!0)]),_:1}),ce(Ow,{modelValue:Y.value,"onUpdate:modelValue":fn[3]||(fn[3]=wn=>Y.value=wn),timeout:"0",location:"bottom"},{actions:vi(()=>[ce(mi,{color:"orange",variant:"text",onClick:fn[2]||(fn[2]=wn=>Y.value=!1)},{default:vi(()=>[...fn[10]||(fn[10]=[Bn("Close",-1)])]),_:1})]),default:vi(()=>[fn[11]||(fn[11]=Bn(" Youve arrived at your destination  ",-1))]),_:1},8,["modelValue"])]),_:1}))}}),fg=(e,t)=>{const n=e.__vccOpts||e;for(const[i,r]of t)n[i]=r;return n},mae=fg(fae,[["__scopeId","data-v-56381f49"]]);function M4(e){return typeof e=="function"?e():bi(e)}typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const D4=()=>{};function pae(e,t){function n(...i){return new Promise((r,a)=>{Promise.resolve(e(()=>t.apply(this,i),{fn:t,thisArg:this,args:i})).then(r).catch(a)})}return n}const gae=e=>e();function vae(e,t={}){let n,i,r=D4;const a=h=>{clearTimeout(h),r(),r=D4};return h=>{const s=M4(e),p=M4(t.maxWait);return n&&a(n),s<=0||p!==void 0&&p<=0?(i&&(a(i),i=null),Promise.resolve(h())):new Promise((_,x)=>{r=t.rejectOnCancel?x:_,p&&!i&&(i=setTimeout(()=>{n&&a(n),i=null,_(h())},p)),n=setTimeout(()=>{i&&a(i),i=null,_(h())},s)})}}function _ae(e,t,n={}){const{eventFilter:i=gae,...r}=n;return Yt(e,pae(i,t),r)}function yae(e,t,n={}){const{debounce:i=0,maxWait:r=void 0,...a}=n;return _ae(e,t,{...a,eventFilter:vae(i,{maxWait:r})})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function jb(e){return e+.5|0}const Pf=(e,t,n)=>Math.max(Math.min(e,n),t);function Wy(e){return Pf(jb(e*2.55),0,255)}function Uf(e){return Pf(jb(e*255),0,255)}function ih(e){return Pf(jb(e/2.55)/100,0,1)}function L4(e){return Pf(jb(e*100),0,100)}const Ac={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Yk=[..."0123456789ABCDEF"],bae=e=>Yk[e&15],xae=e=>Yk[(e&240)>>4]+Yk[e&15],Xx=e=>(e&240)>>4===(e&15),wae=e=>Xx(e.r)&&Xx(e.g)&&Xx(e.b)&&Xx(e.a);function Tae(e){var t=e.length,n;return e[0]==="#"&&(t===4||t===5?n={r:255&Ac[e[1]]*17,g:255&Ac[e[2]]*17,b:255&Ac[e[3]]*17,a:t===5?Ac[e[4]]*17:255}:(t===7||t===9)&&(n={r:Ac[e[1]]<<4|Ac[e[2]],g:Ac[e[3]]<<4|Ac[e[4]],b:Ac[e[5]]<<4|Ac[e[6]],a:t===9?Ac[e[7]]<<4|Ac[e[8]]:255})),n}const Sae=(e,t)=>e<255?t(e):"";function Eae(e){var t=wae(e)?bae:xae;return e?"#"+t(e.r)+t(e.g)+t(e.b)+Sae(e.a,t):void 0}const Cae=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function C8(e,t,n){const i=t*Math.min(n,1-n),r=(a,l=(a+e/30)%12)=>n-i*Math.max(Math.min(l-3,9-l,1),-1);return[r(0),r(8),r(4)]}function kae(e,t,n){const i=(r,a=(r+e/60)%6)=>n-n*t*Math.max(Math.min(a,4-a,1),0);return[i(5),i(3),i(1)]}function Iae(e,t,n){const i=C8(e,1,.5);let r;for(t+n>1&&(r=1/(t+n),t*=r,n*=r),r=0;r<3;r++)i[r]*=1-t-n,i[r]+=t;return i}function Aae(e,t,n,i,r){return e===r?(t-n)/i+(t<n?6:0):t===r?(n-e)/i+2:(e-t)/i+4}function zP(e){const n=e.r/255,i=e.g/255,r=e.b/255,a=Math.max(n,i,r),l=Math.min(n,i,r),h=(a+l)/2;let s,p,_;return a!==l&&(_=a-l,p=h>.5?_/(2-a-l):_/(a+l),s=Aae(n,i,r,_,a),s=s*60+.5),[s|0,p||0,h]}function NP(e,t,n,i){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,i)).map(Uf)}function $P(e,t,n){return NP(C8,e,t,n)}function Pae(e,t,n){return NP(Iae,e,t,n)}function Mae(e,t,n){return NP(kae,e,t,n)}function k8(e){return(e%360+360)%360}function Dae(e){const t=Cae.exec(e);let n=255,i;if(!t)return;t[5]!==i&&(n=t[6]?Wy(+t[5]):Uf(+t[5]));const r=k8(+t[2]),a=+t[3]/100,l=+t[4]/100;return t[1]==="hwb"?i=Pae(r,a,l):t[1]==="hsv"?i=Mae(r,a,l):i=$P(r,a,l),{r:i[0],g:i[1],b:i[2],a:n}}function Lae(e,t){var n=zP(e);n[0]=k8(n[0]+t),n=$P(n),e.r=n[0],e.g=n[1],e.b=n[2]}function Rae(e){if(!e)return;const t=zP(e),n=t[0],i=L4(t[1]),r=L4(t[2]);return e.a<255?`hsla(${n}, ${i}%, ${r}%, ${ih(e.a)})`:`hsl(${n}, ${i}%, ${r}%)`}const R4={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},O4={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Oae(){const e={},t=Object.keys(O4),n=Object.keys(R4);let i,r,a,l,h;for(i=0;i<t.length;i++){for(l=h=t[i],r=0;r<n.length;r++)a=n[r],h=h.replace(a,R4[a]);a=parseInt(O4[l],16),e[h]=[a>>16&255,a>>8&255,a&255]}return e}let Yx;function Vae(e){Yx||(Yx=Oae(),Yx.transparent=[0,0,0,0]);const t=Yx[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const Bae=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Fae(e){const t=Bae.exec(e);let n=255,i,r,a;if(t){if(t[7]!==i){const l=+t[7];n=t[8]?Wy(l):Pf(l*255,0,255)}return i=+t[1],r=+t[3],a=+t[5],i=255&(t[2]?Wy(i):Pf(i,0,255)),r=255&(t[4]?Wy(r):Pf(r,0,255)),a=255&(t[6]?Wy(a):Pf(a,0,255)),{r:i,g:r,b:a,a:n}}}function zae(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${ih(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const pC=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,lv=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function Nae(e,t,n){const i=lv(ih(e.r)),r=lv(ih(e.g)),a=lv(ih(e.b));return{r:Uf(pC(i+n*(lv(ih(t.r))-i))),g:Uf(pC(r+n*(lv(ih(t.g))-r))),b:Uf(pC(a+n*(lv(ih(t.b))-a))),a:e.a+n*(t.a-e.a)}}function Zx(e,t,n){if(e){let i=zP(e);i[t]=Math.max(0,Math.min(i[t]+i[t]*n,t===0?360:1)),i=$P(i),e.r=i[0],e.g=i[1],e.b=i[2]}}function I8(e,t){return e&&Object.assign(t||{},e)}function V4(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=Uf(e[3]))):(t=I8(e,{r:0,g:0,b:0,a:1}),t.a=Uf(t.a)),t}function $ae(e){return e.charAt(0)==="r"?Fae(e):Dae(e)}class eb{constructor(t){if(t instanceof eb)return t;const n=typeof t;let i;n==="object"?i=V4(t):n==="string"&&(i=Tae(t)||Vae(t)||$ae(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=I8(this._rgb);return t&&(t.a=ih(t.a)),t}set rgb(t){this._rgb=V4(t)}rgbString(){return this._valid?zae(this._rgb):void 0}hexString(){return this._valid?Eae(this._rgb):void 0}hslString(){return this._valid?Rae(this._rgb):void 0}mix(t,n){if(t){const i=this.rgb,r=t.rgb;let a;const l=n===a?.5:n,h=2*l-1,s=i.a-r.a,p=((h*s===-1?h:(h+s)/(1+h*s))+1)/2;a=1-p,i.r=255&p*i.r+a*r.r+.5,i.g=255&p*i.g+a*r.g+.5,i.b=255&p*i.b+a*r.b+.5,i.a=l*i.a+(1-l)*r.a,this.rgb=i}return this}interpolate(t,n){return t&&(this._rgb=Nae(this._rgb,t._rgb,n)),this}clone(){return new eb(this.rgb)}alpha(t){return this._rgb.a=Uf(t),this}clearer(t){const n=this._rgb;return n.a*=1-t,this}greyscale(){const t=this._rgb,n=jb(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=n,this}opaquer(t){const n=this._rgb;return n.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Zx(this._rgb,2,t),this}darken(t){return Zx(this._rgb,2,-t),this}saturate(t){return Zx(this._rgb,1,t),this}desaturate(t){return Zx(this._rgb,1,-t),this}rotate(t){return Lae(this._rgb,t),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Kd(){}const Uae=(()=>{let e=0;return()=>e++})();function Bi(e){return e==null}function us(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function $i(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function Os(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function Zl(e,t){return Os(e)?e:t}function wi(e,t){return typeof e>"u"?t:e}const jae=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100:+e/t,A8=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function Kr(e,t,n){if(e&&typeof e.call=="function")return e.apply(n,t)}function Ar(e,t,n,i){let r,a,l;if(us(e))for(a=e.length,r=0;r<a;r++)t.call(n,e[r],r);else if($i(e))for(l=Object.keys(e),a=l.length,r=0;r<a;r++)t.call(n,e[l[r]],l[r])}function Vw(e,t){let n,i,r,a;if(!e||!t||e.length!==t.length)return!1;for(n=0,i=e.length;n<i;++n)if(r=e[n],a=t[n],r.datasetIndex!==a.datasetIndex||r.index!==a.index)return!1;return!0}function Bw(e){if(us(e))return e.map(Bw);if($i(e)){const t=Object.create(null),n=Object.keys(e),i=n.length;let r=0;for(;r<i;++r)t[n[r]]=Bw(e[n[r]]);return t}return e}function P8(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function Wae(e,t,n,i){if(!P8(e))return;const r=t[e],a=n[e];$i(r)&&$i(a)?tb(r,a,i):t[e]=Bw(a)}function tb(e,t,n){const i=us(t)?t:[t],r=i.length;if(!$i(e))return e;n=n||{};const a=n.merger||Wae;let l;for(let h=0;h<r;++h){if(l=i[h],!$i(l))continue;const s=Object.keys(l);for(let p=0,_=s.length;p<_;++p)a(s[p],e,l,n)}return e}function f0(e,t){return tb(e,t,{merger:Hae})}function Hae(e,t,n){if(!P8(e))return;const i=t[e],r=n[e];$i(i)&&$i(r)?f0(i,r):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=Bw(r))}const B4={"":e=>e,x:e=>e.x,y:e=>e.y};function Gae(e){const t=e.split("."),n=[];let i="";for(const r of t)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}function qae(e){const t=Gae(e);return n=>{for(const i of t){if(i==="")break;n=n&&n[i]}return n}}function sm(e,t){return(B4[t]||(B4[t]=qae(t)))(e)}function UP(e){return e.charAt(0).toUpperCase()+e.slice(1)}const nb=e=>typeof e<"u",om=e=>typeof e=="function",F4=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};function Kae(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const dr=Math.PI,Qr=2*dr,Xae=Qr+dr,Fw=Number.POSITIVE_INFINITY,Yae=dr/180,Gs=dr/2,sp=dr/4,z4=dr*2/3,Mf=Math.log10,id=Math.sign;function m0(e,t,n){return Math.abs(e-t)<n}function N4(e){const t=Math.round(e);e=m0(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(Mf(e))),i=e/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function Zae(e){const t=[],n=Math.sqrt(e);let i;for(i=1;i<n;i++)e%i===0&&(t.push(i),t.push(e/i));return n===(n|0)&&t.push(n),t.sort((r,a)=>r-a).pop(),t}function Jae(e){return typeof e=="symbol"||typeof e=="object"&&e!==null&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}function l_(e){return!Jae(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function Qae(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}function M8(e,t,n){let i,r,a;for(i=0,r=e.length;i<r;i++)a=e[i][n],isNaN(a)||(t.min=Math.min(t.min,a),t.max=Math.max(t.max,a))}function uu(e){return e*(dr/180)}function jP(e){return e*(180/dr)}function $4(e){if(!Os(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function D8(e,t){const n=t.x-e.x,i=t.y-e.y,r=Math.sqrt(n*n+i*i);let a=Math.atan2(i,n);return a<-.5*dr&&(a+=Qr),{angle:a,distance:r}}function Zk(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function ele(e,t){return(e-t+Xae)%Qr-dr}function La(e){return(e%Qr+Qr)%Qr}function ib(e,t,n,i){const r=La(e),a=La(t),l=La(n),h=La(a-r),s=La(l-r),p=La(r-a),_=La(r-l);return r===a||r===l||i&&a===l||h>s&&p<_}function Fo(e,t,n){return Math.max(t,Math.min(n,e))}function tle(e){return Fo(e,-32768,32767)}function ch(e,t,n,i=1e-6){return e>=Math.min(t,n)-i&&e<=Math.max(t,n)+i}function WP(e,t,n){n=n||(l=>e[l]<t);let i=e.length-1,r=0,a;for(;i-r>1;)a=r+i>>1,n(a)?r=a:i=a;return{lo:r,hi:i}}const uh=(e,t,n,i)=>WP(e,n,i?r=>{const a=e[r][t];return a<n||a===n&&e[r+1][t]===n}:r=>e[r][t]<n),nle=(e,t,n)=>WP(e,n,i=>e[i][t]>=n);function ile(e,t,n){let i=0,r=e.length;for(;i<r&&e[i]<t;)i++;for(;r>i&&e[r-1]>n;)r--;return i>0||r<e.length?e.slice(i,r):e}const L8=["push","pop","shift","splice","unshift"];function rle(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),L8.forEach(n=>{const i="_onData"+UP(n),r=e[n];Object.defineProperty(e,n,{configurable:!0,enumerable:!1,value(...a){const l=r.apply(this,a);return e._chartjs.listeners.forEach(h=>{typeof h[i]=="function"&&h[i](...a)}),l}})})}function U4(e,t){const n=e._chartjs;if(!n)return;const i=n.listeners,r=i.indexOf(t);r!==-1&&i.splice(r,1),!(i.length>0)&&(L8.forEach(a=>{delete e[a]}),delete e._chartjs)}function R8(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const O8=(function(){return typeof window>"u"?function(e){return e()}:window.requestAnimationFrame})();function V8(e,t){let n=[],i=!1;return function(...r){n=r,i||(i=!0,O8.call(window,()=>{i=!1,e.apply(t,n)}))}}function sle(e,t){let n;return function(...i){return t?(clearTimeout(n),n=setTimeout(e,t,i)):e.apply(this,i),t}}const HP=e=>e==="start"?"left":e==="end"?"right":"center",Pa=(e,t,n)=>e==="start"?t:e==="end"?n:(t+n)/2,ole=(e,t,n,i)=>e===(i?"left":"right")?n:e==="center"?(t+n)/2:t;function B8(e,t,n){const i=t.length;let r=0,a=i;if(e._sorted){const{iScale:l,vScale:h,_parsed:s}=e,p=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,_=l.axis,{min:x,max:T,minDefined:k,maxDefined:A}=l.getUserBounds();if(k){if(r=Math.min(uh(s,_,x).lo,n?i:uh(t,_,l.getPixelForValue(x)).lo),p){const M=s.slice(0,r+1).reverse().findIndex(R=>!Bi(R[h.axis]));r-=Math.max(0,M)}r=Fo(r,0,i-1)}if(A){let M=Math.max(uh(s,l.axis,T,!0).hi+1,n?0:uh(t,_,l.getPixelForValue(T),!0).hi+1);if(p){const R=s.slice(M-1).findIndex(F=>!Bi(F[h.axis]));M+=Math.max(0,R)}a=Fo(M,r,i)-r}else a=i-r}return{start:r,count:a}}function F8(e){const{xScale:t,yScale:n,_scaleRanges:i}=e,r={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!i)return e._scaleRanges=r,!0;const a=i.xmin!==t.min||i.xmax!==t.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,r),a}const Jx=e=>e===0||e===1,j4=(e,t,n)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*Qr/n)),W4=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*Qr/n)+1,p0={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*Gs)+1,easeOutSine:e=>Math.sin(e*Gs),easeInOutSine:e=>-.5*(Math.cos(dr*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>Jx(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>Jx(e)?e:j4(e,.075,.3),easeOutElastic:e=>Jx(e)?e:W4(e,.075,.3),easeInOutElastic(e){return Jx(e)?e:e<.5?.5*j4(e*2,.1125,.45):.5+.5*W4(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-p0.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?p0.easeInBounce(e*2)*.5:p0.easeOutBounce(e*2-1)*.5+.5};function GP(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function H4(e){return GP(e)?e:new eb(e)}function gC(e){return GP(e)?e:new eb(e).saturate(.5).darken(.1).hexString()}const ale=["x","y","borderWidth","radius","tension"],lle=["color","borderColor","backgroundColor"];function cle(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),e.set("animations",{colors:{type:"color",properties:lle},numbers:{type:"number",properties:ale}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function ule(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const G4=new Map;function dle(e,t){t=t||{};const n=e+JSON.stringify(t);let i=G4.get(n);return i||(i=new Intl.NumberFormat(e,t),G4.set(n,i)),i}function Wb(e,t,n){return dle(t,n).format(e)}const z8={values(e){return us(e)?e:""+e},numeric(e,t,n){if(e===0)return"0";const i=this.chart.options.locale;let r,a=e;if(n.length>1){const p=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(p<1e-4||p>1e15)&&(r="scientific"),a=hle(e,n)}const l=Mf(Math.abs(a)),h=isNaN(l)?1:Math.max(Math.min(-1*Math.floor(l),20),0),s={notation:r,minimumFractionDigits:h,maximumFractionDigits:h};return Object.assign(s,this.options.ticks.format),Wb(e,i,s)},logarithmic(e,t,n){if(e===0)return"0";const i=n[t].significand||e/Math.pow(10,Math.floor(Mf(e)));return[1,2,3,5,10,15].includes(i)||t>.8*n.length?z8.numeric.call(this,e,t,n):""}};function hle(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e)),n}var jT={formatters:z8};function fle(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,n)=>n.lineWidth,tickColor:(t,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:jT.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const Gp=Object.create(null),Jk=Object.create(null);function g0(e,t){if(!t)return e;const n=t.split(".");for(let i=0,r=n.length;i<r;++i){const a=n[i];e=e[a]||(e[a]=Object.create(null))}return e}function vC(e,t,n){return typeof t=="string"?tb(g0(e,t),n):tb(g0(e,""),t)}class mle{constructor(t,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,r)=>gC(r.backgroundColor),this.hoverBorderColor=(i,r)=>gC(r.borderColor),this.hoverColor=(i,r)=>gC(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(n)}set(t,n){return vC(this,t,n)}get(t){return g0(this,t)}describe(t,n){return vC(Jk,t,n)}override(t,n){return vC(Gp,t,n)}route(t,n,i,r){const a=g0(this,t),l=g0(this,i),h="_"+n;Object.defineProperties(a,{[h]:{value:a[n],writable:!0},[n]:{enumerable:!0,get(){const s=this[h],p=l[r];return $i(s)?Object.assign({},p,s):wi(s,p)},set(s){this[h]=s}}})}apply(t){t.forEach(n=>n(this))}}var ds=new mle({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[cle,ule,fle]);function ple(e){return!e||Bi(e.size)||Bi(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function zw(e,t,n,i,r){let a=t[r];return a||(a=t[r]=e.measureText(r).width,n.push(r)),a>i&&(i=a),i}function gle(e,t,n,i){i=i||{};let r=i.data=i.data||{},a=i.garbageCollect=i.garbageCollect||[];i.font!==t&&(r=i.data={},a=i.garbageCollect=[],i.font=t),e.save(),e.font=t;let l=0;const h=n.length;let s,p,_,x,T;for(s=0;s<h;s++)if(x=n[s],x!=null&&!us(x))l=zw(e,r,a,l,x);else if(us(x))for(p=0,_=x.length;p<_;p++)T=x[p],T!=null&&!us(T)&&(l=zw(e,r,a,l,T));e.restore();const k=a.length/2;if(k>n.length){for(s=0;s<k;s++)delete r[a[s]];a.splice(0,k)}return l}function op(e,t,n){const i=e.currentDevicePixelRatio,r=n!==0?Math.max(n/2,.5):0;return Math.round((t-r)*i)/i+r}function q4(e,t){!t&&!e||(t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function Qk(e,t,n,i){N8(e,t,n,i,null)}function N8(e,t,n,i,r){let a,l,h,s,p,_,x,T;const k=t.pointStyle,A=t.rotation,M=t.radius;let R=(A||0)*Yae;if(k&&typeof k=="object"&&(a=k.toString(),a==="[object HTMLImageElement]"||a==="[object HTMLCanvasElement]")){e.save(),e.translate(n,i),e.rotate(R),e.drawImage(k,-k.width/2,-k.height/2,k.width,k.height),e.restore();return}if(!(isNaN(M)||M<=0)){switch(e.beginPath(),k){default:r?e.ellipse(n,i,r/2,M,0,0,Qr):e.arc(n,i,M,0,Qr),e.closePath();break;case"triangle":_=r?r/2:M,e.moveTo(n+Math.sin(R)*_,i-Math.cos(R)*M),R+=z4,e.lineTo(n+Math.sin(R)*_,i-Math.cos(R)*M),R+=z4,e.lineTo(n+Math.sin(R)*_,i-Math.cos(R)*M),e.closePath();break;case"rectRounded":p=M*.516,s=M-p,l=Math.cos(R+sp)*s,x=Math.cos(R+sp)*(r?r/2-p:s),h=Math.sin(R+sp)*s,T=Math.sin(R+sp)*(r?r/2-p:s),e.arc(n-x,i-h,p,R-dr,R-Gs),e.arc(n+T,i-l,p,R-Gs,R),e.arc(n+x,i+h,p,R,R+Gs),e.arc(n-T,i+l,p,R+Gs,R+dr),e.closePath();break;case"rect":if(!A){s=Math.SQRT1_2*M,_=r?r/2:s,e.rect(n-_,i-s,2*_,2*s);break}R+=sp;case"rectRot":x=Math.cos(R)*(r?r/2:M),l=Math.cos(R)*M,h=Math.sin(R)*M,T=Math.sin(R)*(r?r/2:M),e.moveTo(n-x,i-h),e.lineTo(n+T,i-l),e.lineTo(n+x,i+h),e.lineTo(n-T,i+l),e.closePath();break;case"crossRot":R+=sp;case"cross":x=Math.cos(R)*(r?r/2:M),l=Math.cos(R)*M,h=Math.sin(R)*M,T=Math.sin(R)*(r?r/2:M),e.moveTo(n-x,i-h),e.lineTo(n+x,i+h),e.moveTo(n+T,i-l),e.lineTo(n-T,i+l);break;case"star":x=Math.cos(R)*(r?r/2:M),l=Math.cos(R)*M,h=Math.sin(R)*M,T=Math.sin(R)*(r?r/2:M),e.moveTo(n-x,i-h),e.lineTo(n+x,i+h),e.moveTo(n+T,i-l),e.lineTo(n-T,i+l),R+=sp,x=Math.cos(R)*(r?r/2:M),l=Math.cos(R)*M,h=Math.sin(R)*M,T=Math.sin(R)*(r?r/2:M),e.moveTo(n-x,i-h),e.lineTo(n+x,i+h),e.moveTo(n+T,i-l),e.lineTo(n-T,i+l);break;case"line":l=r?r/2:Math.cos(R)*M,h=Math.sin(R)*M,e.moveTo(n-l,i-h),e.lineTo(n+l,i+h);break;case"dash":e.moveTo(n,i),e.lineTo(n+Math.cos(R)*(r?r/2:M),i+Math.sin(R)*M);break;case!1:e.closePath();break}e.fill(),t.borderWidth>0&&e.stroke()}}function dh(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function WT(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function HT(e){e.restore()}function vle(e,t,n,i,r){if(!t)return e.lineTo(n.x,n.y);if(r==="middle"){const a=(t.x+n.x)/2;e.lineTo(a,t.y),e.lineTo(a,n.y)}else r==="after"!=!!i?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function _le(e,t,n,i){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(i?t.cp1x:t.cp2x,i?t.cp1y:t.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function yle(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),Bi(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function ble(e,t,n,i,r){if(r.strikethrough||r.underline){const a=e.measureText(i),l=t-a.actualBoundingBoxLeft,h=t+a.actualBoundingBoxRight,s=n-a.actualBoundingBoxAscent,p=n+a.actualBoundingBoxDescent,_=r.strikethrough?(s+p)/2:p;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=r.decorationWidth||2,e.moveTo(l,_),e.lineTo(h,_),e.stroke()}}function xle(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function qp(e,t,n,i,r,a={}){const l=us(t)?t:[t],h=a.strokeWidth>0&&a.strokeColor!=="";let s,p;for(e.save(),e.font=r.string,yle(e,a),s=0;s<l.length;++s)p=l[s],a.backdrop&&xle(e,a.backdrop),h&&(a.strokeColor&&(e.strokeStyle=a.strokeColor),Bi(a.strokeWidth)||(e.lineWidth=a.strokeWidth),e.strokeText(p,n,i,a.maxWidth)),e.fillText(p,n,i,a.maxWidth),ble(e,n,i,p,a),i+=Number(r.lineHeight);e.restore()}function rb(e,t){const{x:n,y:i,w:r,h:a,radius:l}=t;e.arc(n+l.topLeft,i+l.topLeft,l.topLeft,1.5*dr,dr,!0),e.lineTo(n,i+a-l.bottomLeft),e.arc(n+l.bottomLeft,i+a-l.bottomLeft,l.bottomLeft,dr,Gs,!0),e.lineTo(n+r-l.bottomRight,i+a),e.arc(n+r-l.bottomRight,i+a-l.bottomRight,l.bottomRight,Gs,0,!0),e.lineTo(n+r,i+l.topRight),e.arc(n+r-l.topRight,i+l.topRight,l.topRight,0,-Gs,!0),e.lineTo(n+l.topLeft,i)}const wle=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Tle=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Sle(e,t){const n=(""+e).match(wle);if(!n||n[1]==="normal")return t*1.2;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100;break}return t*e}const Ele=e=>+e||0;function qP(e,t){const n={},i=$i(t),r=i?Object.keys(t):t,a=$i(e)?i?l=>wi(e[l],e[t[l]]):l=>e[l]:()=>e;for(const l of r)n[l]=Ele(a(l));return n}function $8(e){return qP(e,{top:"y",right:"x",bottom:"y",left:"x"})}function Lp(e){return qP(e,["topLeft","topRight","bottomLeft","bottomRight"])}function Ga(e){const t=$8(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function _o(e,t){e=e||{},t=t||ds.font;let n=wi(e.size,t.size);typeof n=="string"&&(n=parseInt(n,10));let i=wi(e.style,t.style);i&&!(""+i).match(Tle)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:wi(e.family,t.family),lineHeight:Sle(wi(e.lineHeight,t.lineHeight),n),size:n,style:i,weight:wi(e.weight,t.weight),string:""};return r.string=ple(r),r}function Hy(e,t,n,i){let r,a,l;for(r=0,a=e.length;r<a;++r)if(l=e[r],l!==void 0&&l!==void 0)return l}function Cle(e,t,n){const{min:i,max:r}=e,a=A8(t,(r-i)/2),l=(h,s)=>n&&h===0?0:h+s;return{min:l(i,-Math.abs(a)),max:l(r,a)}}function mm(e,t){return Object.assign(Object.create(e),t)}function KP(e,t=[""],n,i,r=()=>e[0]){const a=n||e;typeof i>"u"&&(i=H8("_fallback",e));const l={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:a,_fallback:i,_getTarget:r,override:h=>KP([h,...e],t,a,i)};return new Proxy(l,{deleteProperty(h,s){return delete h[s],delete h._keys,delete e[0][s],!0},get(h,s){return j8(h,s,()=>Rle(s,t,e,h))},getOwnPropertyDescriptor(h,s){return Reflect.getOwnPropertyDescriptor(h._scopes[0],s)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(h,s){return X4(h).includes(s)},ownKeys(h){return X4(h)},set(h,s,p){const _=h._storage||(h._storage=r());return h[s]=_[s]=p,delete h._keys,!0}})}function c_(e,t,n,i){const r={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:U8(e,i),setContext:a=>c_(e,a,n,i),override:a=>c_(e.override(a),t,n,i)};return new Proxy(r,{deleteProperty(a,l){return delete a[l],delete e[l],!0},get(a,l,h){return j8(a,l,()=>Ile(a,l,h))},getOwnPropertyDescriptor(a,l){return a._descriptors.allKeys?Reflect.has(e,l)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,l)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(a,l){return Reflect.has(e,l)},ownKeys(){return Reflect.ownKeys(e)},set(a,l,h){return e[l]=h,delete a[l],!0}})}function U8(e,t={scriptable:!0,indexable:!0}){const{_scriptable:n=t.scriptable,_indexable:i=t.indexable,_allKeys:r=t.allKeys}=e;return{allKeys:r,scriptable:n,indexable:i,isScriptable:om(n)?n:()=>n,isIndexable:om(i)?i:()=>i}}const kle=(e,t)=>e?e+UP(t):t,XP=(e,t)=>$i(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function j8(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t)||t==="constructor")return e[t];const i=n();return e[t]=i,i}function Ile(e,t,n){const{_proxy:i,_context:r,_subProxy:a,_descriptors:l}=e;let h=i[t];return om(h)&&l.isScriptable(t)&&(h=Ale(t,h,e,n)),us(h)&&h.length&&(h=Ple(t,h,e,l.isIndexable)),XP(t,h)&&(h=c_(h,r,a&&a[t],l)),h}function Ale(e,t,n,i){const{_proxy:r,_context:a,_subProxy:l,_stack:h}=n;if(h.has(e))throw new Error("Recursion detected: "+Array.from(h).join("->")+"->"+e);h.add(e);let s=t(a,l||i);return h.delete(e),XP(e,s)&&(s=YP(r._scopes,r,e,s)),s}function Ple(e,t,n,i){const{_proxy:r,_context:a,_subProxy:l,_descriptors:h}=n;if(typeof a.index<"u"&&i(e))return t[a.index%t.length];if($i(t[0])){const s=t,p=r._scopes.filter(_=>_!==s);t=[];for(const _ of s){const x=YP(p,r,e,_);t.push(c_(x,a,l&&l[e],h))}}return t}function W8(e,t,n){return om(e)?e(t,n):e}const Mle=(e,t)=>e===!0?t:typeof e=="string"?sm(t,e):void 0;function Dle(e,t,n,i,r){for(const a of t){const l=Mle(n,a);if(l){e.add(l);const h=W8(l._fallback,n,r);if(typeof h<"u"&&h!==n&&h!==i)return h}else if(l===!1&&typeof i<"u"&&n!==i)return null}return!1}function YP(e,t,n,i){const r=t._rootScopes,a=W8(t._fallback,n,i),l=[...e,...r],h=new Set;h.add(i);let s=K4(h,l,n,a||n,i);return s===null||typeof a<"u"&&a!==n&&(s=K4(h,l,a,s,i),s===null)?!1:KP(Array.from(h),[""],r,a,()=>Lle(t,n,i))}function K4(e,t,n,i,r){for(;n;)n=Dle(e,t,n,i,r);return n}function Lle(e,t,n){const i=e._getTarget();t in i||(i[t]={});const r=i[t];return us(r)&&$i(n)?n:r||{}}function Rle(e,t,n,i){let r;for(const a of t)if(r=H8(kle(a,e),n),typeof r<"u")return XP(e,r)?YP(n,i,e,r):r}function H8(e,t){for(const n of t){if(!n)continue;const i=n[e];if(typeof i<"u")return i}}function X4(e){let t=e._keys;return t||(t=e._keys=Ole(e._scopes)),t}function Ole(e){const t=new Set;for(const n of e)for(const i of Object.keys(n).filter(r=>!r.startsWith("_")))t.add(i);return Array.from(t)}function G8(e,t,n,i){const{iScale:r}=e,{key:a="r"}=this._parsing,l=new Array(i);let h,s,p,_;for(h=0,s=i;h<s;++h)p=h+n,_=t[p],l[h]={r:r.parse(sm(_,a),p)};return l}const Vle=Number.EPSILON||1e-14,u_=(e,t)=>t<e.length&&!e[t].skip&&e[t],q8=e=>e==="x"?"y":"x";function Ble(e,t,n,i){const r=e.skip?t:e,a=t,l=n.skip?t:n,h=Zk(a,r),s=Zk(l,a);let p=h/(h+s),_=s/(h+s);p=isNaN(p)?0:p,_=isNaN(_)?0:_;const x=i*p,T=i*_;return{previous:{x:a.x-x*(l.x-r.x),y:a.y-x*(l.y-r.y)},next:{x:a.x+T*(l.x-r.x),y:a.y+T*(l.y-r.y)}}}function Fle(e,t,n){const i=e.length;let r,a,l,h,s,p=u_(e,0);for(let _=0;_<i-1;++_)if(s=p,p=u_(e,_+1),!(!s||!p)){if(m0(t[_],0,Vle)){n[_]=n[_+1]=0;continue}r=n[_]/t[_],a=n[_+1]/t[_],h=Math.pow(r,2)+Math.pow(a,2),!(h<=9)&&(l=3/Math.sqrt(h),n[_]=r*l*t[_],n[_+1]=a*l*t[_])}}function zle(e,t,n="x"){const i=q8(n),r=e.length;let a,l,h,s=u_(e,0);for(let p=0;p<r;++p){if(l=h,h=s,s=u_(e,p+1),!h)continue;const _=h[n],x=h[i];l&&(a=(_-l[n])/3,h[`cp1${n}`]=_-a,h[`cp1${i}`]=x-a*t[p]),s&&(a=(s[n]-_)/3,h[`cp2${n}`]=_+a,h[`cp2${i}`]=x+a*t[p])}}function Nle(e,t="x"){const n=q8(t),i=e.length,r=Array(i).fill(0),a=Array(i);let l,h,s,p=u_(e,0);for(l=0;l<i;++l)if(h=s,s=p,p=u_(e,l+1),!!s){if(p){const _=p[t]-s[t];r[l]=_!==0?(p[n]-s[n])/_:0}a[l]=h?p?id(r[l-1])!==id(r[l])?0:(r[l-1]+r[l])/2:r[l-1]:r[l]}Fle(e,r,a),zle(e,a,t)}function Qx(e,t,n){return Math.max(Math.min(e,n),t)}function $le(e,t){let n,i,r,a,l,h=dh(e[0],t);for(n=0,i=e.length;n<i;++n)l=a,a=h,h=n<i-1&&dh(e[n+1],t),a&&(r=e[n],l&&(r.cp1x=Qx(r.cp1x,t.left,t.right),r.cp1y=Qx(r.cp1y,t.top,t.bottom)),h&&(r.cp2x=Qx(r.cp2x,t.left,t.right),r.cp2y=Qx(r.cp2y,t.top,t.bottom)))}function Ule(e,t,n,i,r){let a,l,h,s;if(t.spanGaps&&(e=e.filter(p=>!p.skip)),t.cubicInterpolationMode==="monotone")Nle(e,r);else{let p=i?e[e.length-1]:e[0];for(a=0,l=e.length;a<l;++a)h=e[a],s=Ble(p,h,e[Math.min(a+1,l-(i?0:1))%l],t.tension),h.cp1x=s.previous.x,h.cp1y=s.previous.y,h.cp2x=s.next.x,h.cp2y=s.next.y,p=h}t.capBezierPoints&&$le(e,n)}function ZP(){return typeof window<"u"&&typeof document<"u"}function JP(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function Nw(e,t,n){let i;return typeof e=="string"?(i=parseInt(e,10),e.indexOf("%")!==-1&&(i=i/100*t.parentNode[n])):i=e,i}const GT=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function jle(e,t){return GT(e).getPropertyValue(t)}const Wle=["top","right","bottom","left"];function Rp(e,t,n){const i={};n=n?"-"+n:"";for(let r=0;r<4;r++){const a=Wle[r];i[a]=parseFloat(e[t+"-"+a+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const Hle=(e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot);function Gle(e,t){const n=e.touches,i=n&&n.length?n[0]:e,{offsetX:r,offsetY:a}=i;let l=!1,h,s;if(Hle(r,a,e.target))h=r,s=a;else{const p=t.getBoundingClientRect();h=i.clientX-p.left,s=i.clientY-p.top,l=!0}return{x:h,y:s,box:l}}function fp(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:i}=t,r=GT(n),a=r.boxSizing==="border-box",l=Rp(r,"padding"),h=Rp(r,"border","width"),{x:s,y:p,box:_}=Gle(e,n),x=l.left+(_&&h.left),T=l.top+(_&&h.top);let{width:k,height:A}=t;return a&&(k-=l.width+h.width,A-=l.height+h.height),{x:Math.round((s-x)/k*n.width/i),y:Math.round((p-T)/A*n.height/i)}}function qle(e,t,n){let i,r;if(t===void 0||n===void 0){const a=e&&JP(e);if(!a)t=e.clientWidth,n=e.clientHeight;else{const l=a.getBoundingClientRect(),h=GT(a),s=Rp(h,"border","width"),p=Rp(h,"padding");t=l.width-p.width-s.width,n=l.height-p.height-s.height,i=Nw(h.maxWidth,a,"clientWidth"),r=Nw(h.maxHeight,a,"clientHeight")}}return{width:t,height:n,maxWidth:i||Fw,maxHeight:r||Fw}}const Df=e=>Math.round(e*10)/10;function Kle(e,t,n,i){const r=GT(e),a=Rp(r,"margin"),l=Nw(r.maxWidth,e,"clientWidth")||Fw,h=Nw(r.maxHeight,e,"clientHeight")||Fw,s=qle(e,t,n);let{width:p,height:_}=s;if(r.boxSizing==="content-box"){const T=Rp(r,"border","width"),k=Rp(r,"padding");p-=k.width+T.width,_-=k.height+T.height}return p=Math.max(0,p-a.width),_=Math.max(0,i?p/i:_-a.height),p=Df(Math.min(p,l,s.maxWidth)),_=Df(Math.min(_,h,s.maxHeight)),p&&!_&&(_=Df(p/2)),(t!==void 0||n!==void 0)&&i&&s.height&&_>s.height&&(_=s.height,p=Df(Math.floor(_*i))),{width:p,height:_}}function Y4(e,t,n){const i=t||1,r=Df(e.height*i),a=Df(e.width*i);e.height=Df(e.height),e.width=Df(e.width);const l=e.canvas;return l.style&&(n||!l.style.height&&!l.style.width)&&(l.style.height=`${e.height}px`,l.style.width=`${e.width}px`),e.currentDevicePixelRatio!==i||l.height!==r||l.width!==a?(e.currentDevicePixelRatio=i,l.height=r,l.width=a,e.ctx.setTransform(i,0,0,i,0,0),!0):!1}const Xle=(function(){let e=!1;try{const t={get passive(){return e=!0,!1}};ZP()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return e})();function Z4(e,t){const n=jle(e,t),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function mp(e,t,n,i){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function Yle(e,t,n,i){return{x:e.x+n*(t.x-e.x),y:i==="middle"?n<.5?e.y:t.y:i==="after"?n<1?e.y:t.y:n>0?t.y:e.y}}function Zle(e,t,n,i){const r={x:e.cp2x,y:e.cp2y},a={x:t.cp1x,y:t.cp1y},l=mp(e,r,n),h=mp(r,a,n),s=mp(a,t,n),p=mp(l,h,n),_=mp(h,s,n);return mp(p,_,n)}const Jle=function(e,t){return{x(n){return e+e+t-n},setWidth(n){t=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,i){return n-i},leftForLtr(n,i){return n-i}}},Qle=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function Bv(e,t,n){return e?Jle(t,n):Qle()}function K8(e,t){let n,i;(t==="ltr"||t==="rtl")&&(n=e.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=i)}function X8(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function Y8(e){return e==="angle"?{between:ib,compare:ele,normalize:La}:{between:ch,compare:(t,n)=>t-n,normalize:t=>t}}function J4({start:e,end:t,count:n,loop:i,style:r}){return{start:e%n,end:t%n,loop:i&&(t-e+1)%n===0,style:r}}function ece(e,t,n){const{property:i,start:r,end:a}=n,{between:l,normalize:h}=Y8(i),s=t.length;let{start:p,end:_,loop:x}=e,T,k;if(x){for(p+=s,_+=s,T=0,k=s;T<k&&l(h(t[p%s][i]),r,a);++T)p--,_--;p%=s,_%=s}return _<p&&(_+=s),{start:p,end:_,loop:x,style:e.style}}function Z8(e,t,n){if(!n)return[e];const{property:i,start:r,end:a}=n,l=t.length,{compare:h,between:s,normalize:p}=Y8(i),{start:_,end:x,loop:T,style:k}=ece(e,t,n),A=[];let M=!1,R=null,F,z,G;const Y=()=>s(r,G,F)&&h(r,G)!==0,J=()=>h(a,F)===0||s(a,G,F),re=()=>M||Y(),X=()=>!M||J();for(let U=_,H=_;U<=x;++U)z=t[U%l],!z.skip&&(F=p(z[i]),F!==G&&(M=s(F,r,a),R===null&&re()&&(R=h(F,r)===0?U:H),R!==null&&X()&&(A.push(J4({start:R,end:U,loop:T,count:l,style:k})),R=null),H=U,G=F));return R!==null&&A.push(J4({start:R,end:x,loop:T,count:l,style:k})),A}function J8(e,t){const n=[],i=e.segments;for(let r=0;r<i.length;r++){const a=Z8(i[r],e.points,t);a.length&&n.push(...a)}return n}function tce(e,t,n,i){let r=0,a=t-1;if(n&&!i)for(;r<t&&!e[r].skip;)r++;for(;r<t&&e[r].skip;)r++;for(r%=t,n&&(a+=r);a>r&&e[a%t].skip;)a--;return a%=t,{start:r,end:a}}function nce(e,t,n,i){const r=e.length,a=[];let l=t,h=e[t],s;for(s=t+1;s<=n;++s){const p=e[s%r];p.skip||p.stop?h.skip||(i=!1,a.push({start:t%r,end:(s-1)%r,loop:i}),t=l=p.stop?s:null):(l=s,h.skip&&(t=s)),h=p}return l!==null&&a.push({start:t%r,end:l%r,loop:i}),a}function ice(e,t){const n=e.points,i=e.options.spanGaps,r=n.length;if(!r)return[];const a=!!e._loop,{start:l,end:h}=tce(n,r,a,i);if(i===!0)return Q4(e,[{start:l,end:h,loop:a}],n,t);const s=h<l?h+r:h,p=!!e._fullLoop&&l===0&&h===r-1;return Q4(e,nce(n,l,s,p),n,t)}function Q4(e,t,n,i){return!i||!i.setContext||!n?t:rce(e,t,n,i)}function rce(e,t,n,i){const r=e._chart.getContext(),a=eO(e.options),{_datasetIndex:l,options:{spanGaps:h}}=e,s=n.length,p=[];let _=a,x=t[0].start,T=x;function k(A,M,R,F){const z=h?-1:1;if(A!==M){for(A+=s;n[A%s].skip;)A-=z;for(;n[M%s].skip;)M+=z;A%s!==M%s&&(p.push({start:A%s,end:M%s,loop:R,style:F}),_=F,x=M%s)}}for(const A of t){x=h?x:A.start;let M=n[x%s],R;for(T=x+1;T<=A.end;T++){const F=n[T%s];R=eO(i.setContext(mm(r,{type:"segment",p0:M,p1:F,p0DataIndex:(T-1)%s,p1DataIndex:T%s,datasetIndex:l}))),sce(R,_)&&k(x,T-1,A.loop,_),M=F,_=R}x<T-1&&k(x,T-1,A.loop,_)}return p}function eO(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function sce(e,t){if(!t)return!1;const n=[],i=function(r,a){return GP(a)?(n.includes(a)||n.push(a),n.indexOf(a)):a};return JSON.stringify(e,i)!==JSON.stringify(t,i)}function e1(e,t,n){return e.options.clip?e[n]:t[n]}function oce(e,t){const{xScale:n,yScale:i}=e;return n&&i?{left:e1(n,t,"left"),right:e1(n,t,"right"),top:e1(i,t,"top"),bottom:e1(i,t,"bottom")}:t}function Q8(e,t){const n=t._clip;if(n.disabled)return!1;const i=oce(t,e.chartArea);return{left:n.left===!1?0:i.left-(n.left===!0?0:n.left),right:n.right===!1?e.width:i.right+(n.right===!0?0:n.right),top:n.top===!1?0:i.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?e.height:i.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class ace{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,n,i,r){const a=n.listeners[r],l=n.duration;a.forEach(h=>h({chart:t,initial:n.initial,numSteps:l,currentStep:Math.min(i-n.start,l)}))}_refresh(){this._request||(this._running=!0,this._request=O8.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let n=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;const a=i.items;let l=a.length-1,h=!1,s;for(;l>=0;--l)s=a[l],s._active?(s._total>i.duration&&(i.duration=s._total),s.tick(t),h=!0):(a[l]=a[a.length-1],a.pop());h&&(r.draw(),this._notify(r,i,t,"progress")),a.length||(i.running=!1,this._notify(r,i,t,"complete"),i.initial=!1),n+=a.length}),this._lastDate=t,n===0&&(this._running=!1)}_getAnims(t){const n=this._charts;let i=n.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(t,i)),i}listen(t,n,i){this._getAnims(t).listeners[n].push(i)}add(t,n){!n||!n.length||this._getAnims(t).items.push(...n)}has(t){return this._getAnims(t).items.length>0}start(t){const n=this._charts.get(t);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(t){if(!this._running)return!1;const n=this._charts.get(t);return!(!n||!n.running||!n.items.length)}stop(t){const n=this._charts.get(t);if(!n||!n.items.length)return;const i=n.items;let r=i.length-1;for(;r>=0;--r)i[r].cancel();n.items=[],this._notify(t,n,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var Xd=new ace;const tO="transparent",lce={boolean(e,t,n){return n>.5?t:e},color(e,t,n){const i=H4(e||tO),r=i.valid&&H4(t||tO);return r&&r.valid?r.mix(i,n).hexString():t},number(e,t,n){return e+(t-e)*n}};class cce{constructor(t,n,i,r){const a=n[i];r=Hy([t.to,r,a,t.from]);const l=Hy([t.from,a,r]);this._active=!0,this._fn=t.fn||lce[t.type||typeof l],this._easing=p0[t.easing]||p0.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=n,this._prop=i,this._from=l,this._to=r,this._promises=void 0}active(){return this._active}update(t,n,i){if(this._active){this._notify(!1);const r=this._target[this._prop],a=i-this._start,l=this._duration-a;this._start=i,this._duration=Math.floor(Math.max(l,t.duration)),this._total+=a,this._loop=!!t.loop,this._to=Hy([t.to,n,r,t.from]),this._from=Hy([t.from,r,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const n=t-this._start,i=this._duration,r=this._prop,a=this._from,l=this._loop,h=this._to;let s;if(this._active=a!==h&&(l||n<i),!this._active){this._target[r]=h,this._notify(!0);return}if(n<0){this._target[r]=a;return}s=n/i%2,s=l&&s>1?2-s:s,s=this._easing(Math.min(1,Math.max(0,s))),this._target[r]=this._fn(a,h,s)}wait(){const t=this._promises||(this._promises=[]);return new Promise((n,i)=>{t.push({res:n,rej:i})})}_notify(t){const n=t?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][n]()}}class e9{constructor(t,n){this._chart=t,this._properties=new Map,this.configure(n)}configure(t){if(!$i(t))return;const n=Object.keys(ds.animation),i=this._properties;Object.getOwnPropertyNames(t).forEach(r=>{const a=t[r];if(!$i(a))return;const l={};for(const h of n)l[h]=a[h];(us(a.properties)&&a.properties||[r]).forEach(h=>{(h===r||!i.has(h))&&i.set(h,l)})})}_animateOptions(t,n){const i=n.options,r=dce(t,i);if(!r)return[];const a=this._createAnimations(r,i);return i.$shared&&uce(t.options.$animations,i).then(()=>{t.options=i},()=>{}),a}_createAnimations(t,n){const i=this._properties,r=[],a=t.$animations||(t.$animations={}),l=Object.keys(n),h=Date.now();let s;for(s=l.length-1;s>=0;--s){const p=l[s];if(p.charAt(0)==="$")continue;if(p==="options"){r.push(...this._animateOptions(t,n));continue}const _=n[p];let x=a[p];const T=i.get(p);if(x)if(T&&x.active()){x.update(T,_,h);continue}else x.cancel();if(!T||!T.duration){t[p]=_;continue}a[p]=x=new cce(T,t,p,_),r.push(x)}return r}update(t,n){if(this._properties.size===0){Object.assign(t,n);return}const i=this._createAnimations(t,n);if(i.length)return Xd.add(this._chart,i),!0}}function uce(e,t){const n=[],i=Object.keys(t);for(let r=0;r<i.length;r++){const a=e[i[r]];a&&a.active()&&n.push(a.wait())}return Promise.all(n)}function dce(e,t){if(!t)return;let n=e.options;if(!n){e.options=t;return}return n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function nO(e,t){const n=e&&e.options||{},i=n.reverse,r=n.min===void 0?t:0,a=n.max===void 0?t:0;return{start:i?a:r,end:i?r:a}}function hce(e,t,n){if(n===!1)return!1;const i=nO(e,n),r=nO(t,n);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}function fce(e){let t,n,i,r;return $i(e)?(t=e.top,n=e.right,i=e.bottom,r=e.left):t=n=i=r=e,{top:t,right:n,bottom:i,left:r,disabled:e===!1}}function t9(e,t){const n=[],i=e._getSortedDatasetMetas(t);let r,a;for(r=0,a=i.length;r<a;++r)n.push(i[r].index);return n}function iO(e,t,n,i={}){const r=e.keys,a=i.mode==="single";let l,h,s,p;if(t===null)return;let _=!1;for(l=0,h=r.length;l<h;++l){if(s=+r[l],s===n){if(_=!0,i.all)continue;break}p=e.values[s],Os(p)&&(a||t===0||id(t)===id(p))&&(t+=p)}return!_&&!i.all?0:t}function mce(e,t){const{iScale:n,vScale:i}=t,r=n.axis==="x"?"x":"y",a=i.axis==="x"?"x":"y",l=Object.keys(e),h=new Array(l.length);let s,p,_;for(s=0,p=l.length;s<p;++s)_=l[s],h[s]={[r]:_,[a]:e[_]};return h}function _C(e,t){const n=e&&e.options.stacked;return n||n===void 0&&t.stack!==void 0}function pce(e,t,n){return`${e.id}.${t.id}.${n.stack||n.type}`}function gce(e){const{min:t,max:n,minDefined:i,maxDefined:r}=e.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}function vce(e,t,n){const i=e[t]||(e[t]={});return i[n]||(i[n]={})}function rO(e,t,n,i){for(const r of t.getMatchingVisibleMetas(i).reverse()){const a=e[r.index];if(n&&a>0||!n&&a<0)return r.index}return null}function sO(e,t){const{chart:n,_cachedMeta:i}=e,r=n._stacks||(n._stacks={}),{iScale:a,vScale:l,index:h}=i,s=a.axis,p=l.axis,_=pce(a,l,i),x=t.length;let T;for(let k=0;k<x;++k){const A=t[k],{[s]:M,[p]:R}=A,F=A._stacks||(A._stacks={});T=F[p]=vce(r,_,M),T[h]=R,T._top=rO(T,l,!0,i.type),T._bottom=rO(T,l,!1,i.type);const z=T._visualValues||(T._visualValues={});z[h]=R}}function yC(e,t){const n=e.scales;return Object.keys(n).filter(i=>n[i].axis===t).shift()}function _ce(e,t){return mm(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function yce(e,t,n){return mm(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}function ky(e,t){const n=e.controller.index,i=e.vScale&&e.vScale.axis;if(i){t=t||e._parsed;for(const r of t){const a=r._stacks;if(!a||a[i]===void 0||a[i][n]===void 0)return;delete a[i][n],a[i]._visualValues!==void 0&&a[i]._visualValues[n]!==void 0&&delete a[i]._visualValues[n]}}}const bC=e=>e==="reset"||e==="none",oO=(e,t)=>t?e:Object.assign({},e),bce=(e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:t9(n,!0),values:null};class pm{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,n){this.chart=t,this._ctx=t.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=_C(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&ky(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,n=this._cachedMeta,i=this.getDataset(),r=(x,T,k,A)=>x==="x"?T:x==="r"?A:k,a=n.xAxisID=wi(i.xAxisID,yC(t,"x")),l=n.yAxisID=wi(i.yAxisID,yC(t,"y")),h=n.rAxisID=wi(i.rAxisID,yC(t,"r")),s=n.indexAxis,p=n.iAxisID=r(s,a,l,h),_=n.vAxisID=r(s,l,a,h);n.xScale=this.getScaleForId(a),n.yScale=this.getScaleForId(l),n.rScale=this.getScaleForId(h),n.iScale=this.getScaleForId(p),n.vScale=this.getScaleForId(_)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const n=this._cachedMeta;return t===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&U4(this._data,this),t._stacked&&ky(t)}_dataCheck(){const t=this.getDataset(),n=t.data||(t.data=[]),i=this._data;if($i(n)){const r=this._cachedMeta;this._data=mce(n,r)}else if(i!==n){if(i){U4(i,this);const r=this._cachedMeta;ky(r),r._parsed=[]}n&&Object.isExtensible(n)&&rle(n,this),this._syncList=[],this._data=n}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const n=this._cachedMeta,i=this.getDataset();let r=!1;this._dataCheck();const a=n._stacked;n._stacked=_C(n.vScale,n),n.stack!==i.stack&&(r=!0,ky(n),n.stack=i.stack),this._resyncElements(t),(r||a!==n._stacked)&&(sO(this,n._parsed),n._stacked=_C(n.vScale,n))}configure(){const t=this.chart.config,n=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),n,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,n){const{_cachedMeta:i,_data:r}=this,{iScale:a,_stacked:l}=i,h=a.axis;let s=t===0&&n===r.length?!0:i._sorted,p=t>0&&i._parsed[t-1],_,x,T;if(this._parsing===!1)i._parsed=r,i._sorted=!0,T=r;else{us(r[t])?T=this.parseArrayData(i,r,t,n):$i(r[t])?T=this.parseObjectData(i,r,t,n):T=this.parsePrimitiveData(i,r,t,n);const k=()=>x[h]===null||p&&x[h]<p[h];for(_=0;_<n;++_)i._parsed[_+t]=x=T[_],s&&(k()&&(s=!1),p=x);i._sorted=s}l&&sO(this,T)}parsePrimitiveData(t,n,i,r){const{iScale:a,vScale:l}=t,h=a.axis,s=l.axis,p=a.getLabels(),_=a===l,x=new Array(r);let T,k,A;for(T=0,k=r;T<k;++T)A=T+i,x[T]={[h]:_||a.parse(p[A],A),[s]:l.parse(n[A],A)};return x}parseArrayData(t,n,i,r){const{xScale:a,yScale:l}=t,h=new Array(r);let s,p,_,x;for(s=0,p=r;s<p;++s)_=s+i,x=n[_],h[s]={x:a.parse(x[0],_),y:l.parse(x[1],_)};return h}parseObjectData(t,n,i,r){const{xScale:a,yScale:l}=t,{xAxisKey:h="x",yAxisKey:s="y"}=this._parsing,p=new Array(r);let _,x,T,k;for(_=0,x=r;_<x;++_)T=_+i,k=n[T],p[_]={x:a.parse(sm(k,h),T),y:l.parse(sm(k,s),T)};return p}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,n,i){const r=this.chart,a=this._cachedMeta,l=n[t.axis],h={keys:t9(r,!0),values:n._stacks[t.axis]._visualValues};return iO(h,l,a.index,{mode:i})}updateRangeFromParsed(t,n,i,r){const a=i[n.axis];let l=a===null?NaN:a;const h=r&&i._stacks[n.axis];r&&h&&(r.values=h,l=iO(r,a,this._cachedMeta.index)),t.min=Math.min(t.min,l),t.max=Math.max(t.max,l)}getMinMax(t,n){const i=this._cachedMeta,r=i._parsed,a=i._sorted&&t===i.iScale,l=r.length,h=this._getOtherScale(t),s=bce(n,i,this.chart),p={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:_,max:x}=gce(h);let T,k;function A(){k=r[T];const M=k[h.axis];return!Os(k[t.axis])||_>M||x<M}for(T=0;T<l&&!(!A()&&(this.updateRangeFromParsed(p,t,k,s),a));++T);if(a){for(T=l-1;T>=0;--T)if(!A()){this.updateRangeFromParsed(p,t,k,s);break}}return p}getAllParsedValues(t){const n=this._cachedMeta._parsed,i=[];let r,a,l;for(r=0,a=n.length;r<a;++r)l=n[r][t.axis],Os(l)&&i.push(l);return i}getMaxOverflow(){return!1}getLabelAndValue(t){const n=this._cachedMeta,i=n.iScale,r=n.vScale,a=this.getParsed(t);return{label:i?""+i.getLabelForValue(a[i.axis]):"",value:r?""+r.getLabelForValue(a[r.axis]):""}}_update(t){const n=this._cachedMeta;this.update(t||"default"),n._clip=fce(wi(this.options.clip,hce(n.xScale,n.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,n=this.chart,i=this._cachedMeta,r=i.data||[],a=n.chartArea,l=[],h=this._drawStart||0,s=this._drawCount||r.length-h,p=this.options.drawActiveElementsOnTop;let _;for(i.dataset&&i.dataset.draw(t,a,h,s),_=h;_<h+s;++_){const x=r[_];x.hidden||(x.active&&p?l.push(x):x.draw(t,a))}for(_=0;_<l.length;++_)l[_].draw(t,a)}getStyle(t,n){const i=n?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,n,i){const r=this.getDataset();let a;if(t>=0&&t<this._cachedMeta.data.length){const l=this._cachedMeta.data[t];a=l.$context||(l.$context=yce(this.getContext(),t,l)),a.parsed=this.getParsed(t),a.raw=r.data[t],a.index=a.dataIndex=t}else a=this.$context||(this.$context=_ce(this.chart.getContext(),this.index)),a.dataset=r,a.index=a.datasetIndex=this.index;return a.active=!!n,a.mode=i,a}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,n){return this._resolveElementOptions(this.dataElementType.id,n,t)}_resolveElementOptions(t,n="default",i){const r=n==="active",a=this._cachedDataOpts,l=t+"-"+n,h=a[l],s=this.enableOptionSharing&&nb(i);if(h)return oO(h,s);const p=this.chart.config,_=p.datasetElementScopeKeys(this._type,t),x=r?[`${t}Hover`,"hover",t,""]:[t,""],T=p.getOptionScopes(this.getDataset(),_),k=Object.keys(ds.elements[t]),A=()=>this.getContext(i,r,n),M=p.resolveNamedOptions(T,k,A,x);return M.$shared&&(M.$shared=s,a[l]=Object.freeze(oO(M,s))),M}_resolveAnimations(t,n,i){const r=this.chart,a=this._cachedDataOpts,l=`animation-${n}`,h=a[l];if(h)return h;let s;if(r.options.animation!==!1){const _=this.chart.config,x=_.datasetAnimationScopeKeys(this._type,n),T=_.getOptionScopes(this.getDataset(),x);s=_.createResolver(T,this.getContext(t,i,n))}const p=new e9(r,s&&s.animations);return s&&s._cacheable&&(a[l]=Object.freeze(p)),p}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,n){return!n||bC(t)||this.chart._animationsDisabled}_getSharedOptions(t,n){const i=this.resolveDataElementOptions(t,n),r=this._sharedOptions,a=this.getSharedOptions(i),l=this.includeOptions(n,a)||a!==r;return this.updateSharedOptions(a,n,i),{sharedOptions:a,includeOptions:l}}updateElement(t,n,i,r){bC(r)?Object.assign(t,i):this._resolveAnimations(n,r).update(t,i)}updateSharedOptions(t,n,i){t&&!bC(n)&&this._resolveAnimations(void 0,n).update(t,i)}_setStyle(t,n,i,r){t.active=r;const a=this.getStyle(n,r);this._resolveAnimations(n,i,r).update(t,{options:!r&&this.getSharedOptions(a)||a})}removeHoverStyle(t,n,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,n,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const n=this._data,i=this._cachedMeta.data;for(const[h,s,p]of this._syncList)this[h](s,p);this._syncList=[];const r=i.length,a=n.length,l=Math.min(a,r);l&&this.parse(0,l),a>r?this._insertElements(r,a-r,t):a<r&&this._removeElements(a,r-a)}_insertElements(t,n,i=!0){const r=this._cachedMeta,a=r.data,l=t+n;let h;const s=p=>{for(p.length+=n,h=p.length-1;h>=l;h--)p[h]=p[h-n]};for(s(a),h=t;h<l;++h)a[h]=new this.dataElementType;this._parsing&&s(r._parsed),this.parse(t,n),i&&this.updateElements(a,t,n,"reset")}updateElements(t,n,i,r){}_removeElements(t,n){const i=this._cachedMeta;if(this._parsing){const r=i._parsed.splice(t,n);i._stacked&&ky(i,r)}i.data.splice(t,n)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[n,i,r]=t;this[n](i,r)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,n){n&&this._sync(["_removeElements",t,n]);const i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function xce(e,t){if(!e._cache.$bar){const n=e.getMatchingVisibleMetas(t);let i=[];for(let r=0,a=n.length;r<a;r++)i=i.concat(n[r].controller.getAllParsedValues(e));e._cache.$bar=R8(i.sort((r,a)=>r-a))}return e._cache.$bar}function wce(e){const t=e.iScale,n=xce(t,e.type);let i=t._length,r,a,l,h;const s=()=>{l===32767||l===-32768||(nb(h)&&(i=Math.min(i,Math.abs(l-h)||i)),h=l)};for(r=0,a=n.length;r<a;++r)l=t.getPixelForValue(n[r]),s();for(h=void 0,r=0,a=t.ticks.length;r<a;++r)l=t.getPixelForTick(r),s();return i}function Tce(e,t,n,i){const r=n.barThickness;let a,l;return Bi(r)?(a=t.min*n.categoryPercentage,l=n.barPercentage):(a=r*i,l=1),{chunk:a/i,ratio:l,start:t.pixels[e]-a/2}}function Sce(e,t,n,i){const r=t.pixels,a=r[e];let l=e>0?r[e-1]:null,h=e<r.length-1?r[e+1]:null;const s=n.categoryPercentage;l===null&&(l=a-(h===null?t.end-t.start:h-a)),h===null&&(h=a+a-l);const p=a-(a-Math.min(l,h))/2*s;return{chunk:Math.abs(h-l)/2*s/i,ratio:n.barPercentage,start:p}}function Ece(e,t,n,i){const r=n.parse(e[0],i),a=n.parse(e[1],i),l=Math.min(r,a),h=Math.max(r,a);let s=l,p=h;Math.abs(l)>Math.abs(h)&&(s=h,p=l),t[n.axis]=p,t._custom={barStart:s,barEnd:p,start:r,end:a,min:l,max:h}}function n9(e,t,n,i){return us(e)?Ece(e,t,n,i):t[n.axis]=n.parse(e,i),t}function aO(e,t,n,i){const r=e.iScale,a=e.vScale,l=r.getLabels(),h=r===a,s=[];let p,_,x,T;for(p=n,_=n+i;p<_;++p)T=t[p],x={},x[r.axis]=h||r.parse(l[p],p),s.push(n9(T,x,a,p));return s}function xC(e){return e&&e.barStart!==void 0&&e.barEnd!==void 0}function Cce(e,t,n){return e!==0?id(e):(t.isHorizontal()?1:-1)*(t.min>=n?1:-1)}function kce(e){let t,n,i,r,a;return e.horizontal?(t=e.base>e.x,n="left",i="right"):(t=e.base<e.y,n="bottom",i="top"),t?(r="end",a="start"):(r="start",a="end"),{start:n,end:i,reverse:t,top:r,bottom:a}}function Ice(e,t,n,i){let r=t.borderSkipped;const a={};if(!r){e.borderSkipped=a;return}if(r===!0){e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:l,end:h,reverse:s,top:p,bottom:_}=kce(e);r==="middle"&&n&&(e.enableBorderRadius=!0,(n._top||0)===i?r=p:(n._bottom||0)===i?r=_:(a[lO(_,l,h,s)]=!0,r=p)),a[lO(r,l,h,s)]=!0,e.borderSkipped=a}function lO(e,t,n,i){return i?(e=Ace(e,t,n),e=cO(e,n,t)):e=cO(e,t,n),e}function Ace(e,t,n){return e===t?n:e===n?t:e}function cO(e,t,n){return e==="start"?t:e==="end"?n:e}function Pce(e,{inflateAmount:t},n){e.inflateAmount=t==="auto"?n===1?.33:0:t}class Mce extends pm{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,n,i,r){return aO(t,n,i,r)}parseArrayData(t,n,i,r){return aO(t,n,i,r)}parseObjectData(t,n,i,r){const{iScale:a,vScale:l}=t,{xAxisKey:h="x",yAxisKey:s="y"}=this._parsing,p=a.axis==="x"?h:s,_=l.axis==="x"?h:s,x=[];let T,k,A,M;for(T=i,k=i+r;T<k;++T)M=n[T],A={},A[a.axis]=a.parse(sm(M,p),T),x.push(n9(sm(M,_),A,l,T));return x}updateRangeFromParsed(t,n,i,r){super.updateRangeFromParsed(t,n,i,r);const a=i._custom;a&&n===this._cachedMeta.vScale&&(t.min=Math.min(t.min,a.min),t.max=Math.max(t.max,a.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const n=this._cachedMeta,{iScale:i,vScale:r}=n,a=this.getParsed(t),l=a._custom,h=xC(l)?"["+l.start+", "+l.end+"]":""+r.getLabelForValue(a[r.axis]);return{label:""+i.getLabelForValue(a[i.axis]),value:h}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,t)}updateElements(t,n,i,r){const a=r==="reset",{index:l,_cachedMeta:{vScale:h}}=this,s=h.getBasePixel(),p=h.isHorizontal(),_=this._getRuler(),{sharedOptions:x,includeOptions:T}=this._getSharedOptions(n,r);for(let k=n;k<n+i;k++){const A=this.getParsed(k),M=a||Bi(A[h.axis])?{base:s,head:s}:this._calculateBarValuePixels(k),R=this._calculateBarIndexPixels(k,_),F=(A._stacks||{})[h.axis],z={horizontal:p,base:M.base,enableBorderRadius:!F||xC(A._custom)||l===F._top||l===F._bottom,x:p?M.head:R.center,y:p?R.center:M.head,height:p?R.size:Math.abs(M.size),width:p?Math.abs(M.size):R.size};T&&(z.options=x||this.resolveDataElementOptions(k,t[k].active?"active":r));const G=z.options||t[k].options;Ice(z,G,F,l),Pce(z,G,_.ratio),this.updateElement(t[k],k,z,r)}}_getStacks(t,n){const{iScale:i}=this._cachedMeta,r=i.getMatchingVisibleMetas(this._type).filter(_=>_.controller.options.grouped),a=i.options.stacked,l=[],h=this._cachedMeta.controller.getParsed(n),s=h&&h[i.axis],p=_=>{const x=_._parsed.find(k=>k[i.axis]===s),T=x&&x[_.vScale.axis];if(Bi(T)||isNaN(T))return!0};for(const _ of r)if(!(n!==void 0&&p(_))&&((a===!1||l.indexOf(_.stack)===-1||a===void 0&&_.stack===void 0)&&l.push(_.stack),_.index===t))break;return l.length||l.push(void 0),l}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const t=this.chart.scales,n=this.chart.options.indexAxis;return Object.keys(t).filter(i=>t[i].axis===n).shift()}_getAxis(){const t={},n=this.getFirstScaleIdForIndexAxis();for(const i of this.chart.data.datasets)t[wi(this.chart.options.indexAxis==="x"?i.xAxisID:i.yAxisID,n)]=!0;return Object.keys(t)}_getStackIndex(t,n,i){const r=this._getStacks(t,i),a=n!==void 0?r.indexOf(n):-1;return a===-1?r.length-1:a}_getRuler(){const t=this.options,n=this._cachedMeta,i=n.iScale,r=[];let a,l;for(a=0,l=n.data.length;a<l;++a)r.push(i.getPixelForValue(this.getParsed(a)[i.axis],a));const h=t.barThickness;return{min:h||wce(n),pixels:r,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:t.grouped,ratio:h?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:n,_stacked:i,index:r},options:{base:a,minBarLength:l}}=this,h=a||0,s=this.getParsed(t),p=s._custom,_=xC(p);let x=s[n.axis],T=0,k=i?this.applyStack(n,s,i):x,A,M;k!==x&&(T=k-x,k=x),_&&(x=p.barStart,k=p.barEnd-p.barStart,x!==0&&id(x)!==id(p.barEnd)&&(T=0),T+=x);const R=!Bi(a)&&!_?a:T;let F=n.getPixelForValue(R);if(this.chart.getDataVisibility(t)?A=n.getPixelForValue(T+k):A=F,M=A-F,Math.abs(M)<l){M=Cce(M,n,h)*l,x===h&&(F-=M/2);const z=n.getPixelForDecimal(0),G=n.getPixelForDecimal(1),Y=Math.min(z,G),J=Math.max(z,G);F=Math.max(Math.min(F,J),Y),A=F+M,i&&!_&&(s._stacks[n.axis]._visualValues[r]=n.getValueForPixel(A)-n.getValueForPixel(F))}if(F===n.getPixelForValue(h)){const z=id(M)*n.getLineWidthForValue(h)/2;F+=z,M-=z}return{size:M,base:F,head:A,center:A+M/2}}_calculateBarIndexPixels(t,n){const i=n.scale,r=this.options,a=r.skipNull,l=wi(r.maxBarThickness,1/0);let h,s;const p=this._getAxisCount();if(n.grouped){const _=a?this._getStackCount(t):n.stackCount,x=r.barThickness==="flex"?Sce(t,n,r,_*p):Tce(t,n,r,_*p),T=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,k=this._getAxis().indexOf(wi(T,this.getFirstScaleIdForIndexAxis())),A=this._getStackIndex(this.index,this._cachedMeta.stack,a?t:void 0)+k;h=x.start+x.chunk*A+x.chunk/2,s=Math.min(l,x.chunk*x.ratio)}else h=i.getPixelForValue(this.getParsed(t)[i.axis],t),s=Math.min(l,n.min*n.ratio);return{base:h-s/2,head:h+s/2,center:h,size:s}}draw(){const t=this._cachedMeta,n=t.vScale,i=t.data,r=i.length;let a=0;for(;a<r;++a)this.getParsed(a)[n.axis]!==null&&!i[a].hidden&&i[a].draw(this._ctx)}}class Dce extends pm{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,n,i,r){const a=super.parsePrimitiveData(t,n,i,r);for(let l=0;l<a.length;l++)a[l]._custom=this.resolveDataElementOptions(l+i).radius;return a}parseArrayData(t,n,i,r){const a=super.parseArrayData(t,n,i,r);for(let l=0;l<a.length;l++){const h=n[i+l];a[l]._custom=wi(h[2],this.resolveDataElementOptions(l+i).radius)}return a}parseObjectData(t,n,i,r){const a=super.parseObjectData(t,n,i,r);for(let l=0;l<a.length;l++){const h=n[i+l];a[l]._custom=wi(h&&h.r&&+h.r,this.resolveDataElementOptions(l+i).radius)}return a}getMaxOverflow(){const t=this._cachedMeta.data;let n=0;for(let i=t.length-1;i>=0;--i)n=Math.max(n,t[i].size(this.resolveDataElementOptions(i))/2);return n>0&&n}getLabelAndValue(t){const n=this._cachedMeta,i=this.chart.data.labels||[],{xScale:r,yScale:a}=n,l=this.getParsed(t),h=r.getLabelForValue(l.x),s=a.getLabelForValue(l.y),p=l._custom;return{label:i[t]||"",value:"("+h+", "+s+(p?", "+p:"")+")"}}update(t){const n=this._cachedMeta.data;this.updateElements(n,0,n.length,t)}updateElements(t,n,i,r){const a=r==="reset",{iScale:l,vScale:h}=this._cachedMeta,{sharedOptions:s,includeOptions:p}=this._getSharedOptions(n,r),_=l.axis,x=h.axis;for(let T=n;T<n+i;T++){const k=t[T],A=!a&&this.getParsed(T),M={},R=M[_]=a?l.getPixelForDecimal(.5):l.getPixelForValue(A[_]),F=M[x]=a?h.getBasePixel():h.getPixelForValue(A[x]);M.skip=isNaN(R)||isNaN(F),p&&(M.options=s||this.resolveDataElementOptions(T,k.active?"active":r),a&&(M.options.radius=0)),this.updateElement(k,T,M,r)}}resolveDataElementOptions(t,n){const i=this.getParsed(t);let r=super.resolveDataElementOptions(t,n);r.$shared&&(r=Object.assign({},r,{$shared:!1}));const a=r.radius;return n!=="active"&&(r.radius=0),r.radius+=wi(i&&i._custom,a),r}}function Lce(e,t,n){let i=1,r=1,a=0,l=0;if(t<Qr){const h=e,s=h+t,p=Math.cos(h),_=Math.sin(h),x=Math.cos(s),T=Math.sin(s),k=(G,Y,J)=>ib(G,h,s,!0)?1:Math.max(Y,Y*n,J,J*n),A=(G,Y,J)=>ib(G,h,s,!0)?-1:Math.min(Y,Y*n,J,J*n),M=k(0,p,x),R=k(Gs,_,T),F=A(dr,p,x),z=A(dr+Gs,_,T);i=(M-F)/2,r=(R-z)/2,a=-(M+F)/2,l=-(R+z)/2}return{ratioX:i,ratioY:r,offsetX:a,offsetY:l}}class QP extends pm{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const n=t.data,{labels:{pointStyle:i,textAlign:r,color:a,useBorderRadius:l,borderRadius:h}}=t.legend.options;return n.labels.length&&n.datasets.length?n.labels.map((s,p)=>{const x=t.getDatasetMeta(0).controller.getStyle(p);return{text:s,fillStyle:x.backgroundColor,fontColor:a,hidden:!t.getDataVisibility(p),lineDash:x.borderDash,lineDashOffset:x.borderDashOffset,lineJoin:x.borderJoinStyle,lineWidth:x.borderWidth,strokeStyle:x.borderColor,textAlign:r,pointStyle:i,borderRadius:l&&(h||x.borderRadius),index:p}}):[]}},onClick(t,n,i){i.chart.toggleDataVisibility(n.index),i.chart.update()}}}};constructor(t,n){super(t,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,n){const i=this.getDataset().data,r=this._cachedMeta;if(this._parsing===!1)r._parsed=i;else{let a=s=>+i[s];if($i(i[t])){const{key:s="value"}=this._parsing;a=p=>+sm(i[p],s)}let l,h;for(l=t,h=t+n;l<h;++l)r._parsed[l]=a(l)}}_getRotation(){return uu(this.options.rotation-90)}_getCircumference(){return uu(this.options.circumference)}_getRotationExtents(){let t=Qr,n=-Qr;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const r=this.chart.getDatasetMeta(i).controller,a=r._getRotation(),l=r._getCircumference();t=Math.min(t,a),n=Math.max(n,a+l)}return{rotation:t,circumference:n-t}}update(t){const n=this.chart,{chartArea:i}=n,r=this._cachedMeta,a=r.data,l=this.getMaxBorderWidth()+this.getMaxOffset(a)+this.options.spacing,h=Math.max((Math.min(i.width,i.height)-l)/2,0),s=Math.min(jae(this.options.cutout,h),1),p=this._getRingWeight(this.index),{circumference:_,rotation:x}=this._getRotationExtents(),{ratioX:T,ratioY:k,offsetX:A,offsetY:M}=Lce(x,_,s),R=(i.width-l)/T,F=(i.height-l)/k,z=Math.max(Math.min(R,F)/2,0),G=A8(this.options.radius,z),Y=Math.max(G*s,0),J=(G-Y)/this._getVisibleDatasetWeightTotal();this.offsetX=A*G,this.offsetY=M*G,r.total=this.calculateTotal(),this.outerRadius=G-J*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-J*p,0),this.updateElements(a,0,a.length,t)}_circumference(t,n){const i=this.options,r=this._cachedMeta,a=this._getCircumference();return n&&i.animation.animateRotate||!this.chart.getDataVisibility(t)||r._parsed[t]===null||r.data[t].hidden?0:this.calculateCircumference(r._parsed[t]*a/Qr)}updateElements(t,n,i,r){const a=r==="reset",l=this.chart,h=l.chartArea,p=l.options.animation,_=(h.left+h.right)/2,x=(h.top+h.bottom)/2,T=a&&p.animateScale,k=T?0:this.innerRadius,A=T?0:this.outerRadius,{sharedOptions:M,includeOptions:R}=this._getSharedOptions(n,r);let F=this._getRotation(),z;for(z=0;z<n;++z)F+=this._circumference(z,a);for(z=n;z<n+i;++z){const G=this._circumference(z,a),Y=t[z],J={x:_+this.offsetX,y:x+this.offsetY,startAngle:F,endAngle:F+G,circumference:G,outerRadius:A,innerRadius:k};R&&(J.options=M||this.resolveDataElementOptions(z,Y.active?"active":r)),F+=G,this.updateElement(Y,z,J,r)}}calculateTotal(){const t=this._cachedMeta,n=t.data;let i=0,r;for(r=0;r<n.length;r++){const a=t._parsed[r];a!==null&&!isNaN(a)&&this.chart.getDataVisibility(r)&&!n[r].hidden&&(i+=Math.abs(a))}return i}calculateCircumference(t){const n=this._cachedMeta.total;return n>0&&!isNaN(t)?Qr*(Math.abs(t)/n):0}getLabelAndValue(t){const n=this._cachedMeta,i=this.chart,r=i.data.labels||[],a=Wb(n._parsed[t],i.options.locale);return{label:r[t]||"",value:a}}getMaxBorderWidth(t){let n=0;const i=this.chart;let r,a,l,h,s;if(!t){for(r=0,a=i.data.datasets.length;r<a;++r)if(i.isDatasetVisible(r)){l=i.getDatasetMeta(r),t=l.data,h=l.controller;break}}if(!t)return 0;for(r=0,a=t.length;r<a;++r)s=h.resolveDataElementOptions(r),s.borderAlign!=="inner"&&(n=Math.max(n,s.borderWidth||0,s.hoverBorderWidth||0));return n}getMaxOffset(t){let n=0;for(let i=0,r=t.length;i<r;++i){const a=this.resolveDataElementOptions(i);n=Math.max(n,a.offset||0,a.hoverOffset||0)}return n}_getRingWeightOffset(t){let n=0;for(let i=0;i<t;++i)this.chart.isDatasetVisible(i)&&(n+=this._getRingWeight(i));return n}_getRingWeight(t){return Math.max(wi(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class Rce extends pm{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const n=this._cachedMeta,{dataset:i,data:r=[],_dataset:a}=n,l=this.chart._animationsDisabled;let{start:h,count:s}=B8(n,r,l);this._drawStart=h,this._drawCount=s,F8(n)&&(h=0,s=r.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!a._decimated,i.points=r;const p=this.resolveDatasetElementOptions(t);this.options.showLine||(p.borderWidth=0),p.segment=this.options.segment,this.updateElement(i,void 0,{animated:!l,options:p},t),this.updateElements(r,h,s,t)}updateElements(t,n,i,r){const a=r==="reset",{iScale:l,vScale:h,_stacked:s,_dataset:p}=this._cachedMeta,{sharedOptions:_,includeOptions:x}=this._getSharedOptions(n,r),T=l.axis,k=h.axis,{spanGaps:A,segment:M}=this.options,R=l_(A)?A:Number.POSITIVE_INFINITY,F=this.chart._animationsDisabled||a||r==="none",z=n+i,G=t.length;let Y=n>0&&this.getParsed(n-1);for(let J=0;J<G;++J){const re=t[J],X=F?re:{};if(J<n||J>=z){X.skip=!0;continue}const U=this.getParsed(J),H=Bi(U[k]),W=X[T]=l.getPixelForValue(U[T],J),ie=X[k]=a||H?h.getBasePixel():h.getPixelForValue(s?this.applyStack(h,U,s):U[k],J);X.skip=isNaN(W)||isNaN(ie)||H,X.stop=J>0&&Math.abs(U[T]-Y[T])>R,M&&(X.parsed=U,X.raw=p.data[J]),x&&(X.options=_||this.resolveDataElementOptions(J,re.active?"active":r)),F||this.updateElement(re,J,X,r),Y=U}}getMaxOverflow(){const t=this._cachedMeta,n=t.dataset,i=n.options&&n.options.borderWidth||0,r=t.data||[];if(!r.length)return i;const a=r[0].size(this.resolveDataElementOptions(0)),l=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(i,a,l)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}class i9 extends pm{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const n=t.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:i,color:r}}=t.legend.options;return n.labels.map((a,l)=>{const s=t.getDatasetMeta(0).controller.getStyle(l);return{text:a,fillStyle:s.backgroundColor,strokeStyle:s.borderColor,fontColor:r,lineWidth:s.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(l),index:l}})}return[]}},onClick(t,n,i){i.chart.toggleDataVisibility(n.index),i.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(t,n){super(t,n),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const n=this._cachedMeta,i=this.chart,r=i.data.labels||[],a=Wb(n._parsed[t].r,i.options.locale);return{label:r[t]||"",value:a}}parseObjectData(t,n,i,r){return G8.bind(this)(t,n,i,r)}update(t){const n=this._cachedMeta.data;this._updateRadius(),this.updateElements(n,0,n.length,t)}getMinMax(){const t=this._cachedMeta,n={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((i,r)=>{const a=this.getParsed(r).r;!isNaN(a)&&this.chart.getDataVisibility(r)&&(a<n.min&&(n.min=a),a>n.max&&(n.max=a))}),n}_updateRadius(){const t=this.chart,n=t.chartArea,i=t.options,r=Math.min(n.right-n.left,n.bottom-n.top),a=Math.max(r/2,0),l=Math.max(i.cutoutPercentage?a/100*i.cutoutPercentage:1,0),h=(a-l)/t.getVisibleDatasetCount();this.outerRadius=a-h*this.index,this.innerRadius=this.outerRadius-h}updateElements(t,n,i,r){const a=r==="reset",l=this.chart,s=l.options.animation,p=this._cachedMeta.rScale,_=p.xCenter,x=p.yCenter,T=p.getIndexAngle(0)-.5*dr;let k=T,A;const M=360/this.countVisibleElements();for(A=0;A<n;++A)k+=this._computeAngle(A,r,M);for(A=n;A<n+i;A++){const R=t[A];let F=k,z=k+this._computeAngle(A,r,M),G=l.getDataVisibility(A)?p.getDistanceFromCenterForValue(this.getParsed(A).r):0;k=z,a&&(s.animateScale&&(G=0),s.animateRotate&&(F=z=T));const Y={x:_,y:x,innerRadius:0,outerRadius:G,startAngle:F,endAngle:z,options:this.resolveDataElementOptions(A,R.active?"active":r)};this.updateElement(R,A,Y,r)}}countVisibleElements(){const t=this._cachedMeta;let n=0;return t.data.forEach((i,r)=>{!isNaN(this.getParsed(r).r)&&this.chart.getDataVisibility(r)&&n++}),n}_computeAngle(t,n,i){return this.chart.getDataVisibility(t)?uu(this.resolveDataElementOptions(t,n).angle||i):0}}class Oce extends QP{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}class Vce extends pm{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(t){const n=this._cachedMeta.vScale,i=this.getParsed(t);return{label:n.getLabels()[t],value:""+n.getLabelForValue(i[n.axis])}}parseObjectData(t,n,i,r){return G8.bind(this)(t,n,i,r)}update(t){const n=this._cachedMeta,i=n.dataset,r=n.data||[],a=n.iScale.getLabels();if(i.points=r,t!=="resize"){const l=this.resolveDatasetElementOptions(t);this.options.showLine||(l.borderWidth=0);const h={_loop:!0,_fullLoop:a.length===r.length,options:l};this.updateElement(i,void 0,h,t)}this.updateElements(r,0,r.length,t)}updateElements(t,n,i,r){const a=this._cachedMeta.rScale,l=r==="reset";for(let h=n;h<n+i;h++){const s=t[h],p=this.resolveDataElementOptions(h,s.active?"active":r),_=a.getPointPositionForValue(h,this.getParsed(h).r),x=l?a.xCenter:_.x,T=l?a.yCenter:_.y,k={x,y:T,angle:_.angle,skip:isNaN(x)||isNaN(T),options:p};this.updateElement(s,h,k,r)}}}class Bce extends pm{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(t){const n=this._cachedMeta,i=this.chart.data.labels||[],{xScale:r,yScale:a}=n,l=this.getParsed(t),h=r.getLabelForValue(l.x),s=a.getLabelForValue(l.y);return{label:i[t]||"",value:"("+h+", "+s+")"}}update(t){const n=this._cachedMeta,{data:i=[]}=n,r=this.chart._animationsDisabled;let{start:a,count:l}=B8(n,i,r);if(this._drawStart=a,this._drawCount=l,F8(n)&&(a=0,l=i.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:h,_dataset:s}=n;h._chart=this.chart,h._datasetIndex=this.index,h._decimated=!!s._decimated,h.points=i;const p=this.resolveDatasetElementOptions(t);p.segment=this.options.segment,this.updateElement(h,void 0,{animated:!r,options:p},t)}else this.datasetElementType&&(delete n.dataset,this.datasetElementType=!1);this.updateElements(i,a,l,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,n,i,r){const a=r==="reset",{iScale:l,vScale:h,_stacked:s,_dataset:p}=this._cachedMeta,_=this.resolveDataElementOptions(n,r),x=this.getSharedOptions(_),T=this.includeOptions(r,x),k=l.axis,A=h.axis,{spanGaps:M,segment:R}=this.options,F=l_(M)?M:Number.POSITIVE_INFINITY,z=this.chart._animationsDisabled||a||r==="none";let G=n>0&&this.getParsed(n-1);for(let Y=n;Y<n+i;++Y){const J=t[Y],re=this.getParsed(Y),X=z?J:{},U=Bi(re[A]),H=X[k]=l.getPixelForValue(re[k],Y),W=X[A]=a||U?h.getBasePixel():h.getPixelForValue(s?this.applyStack(h,re,s):re[A],Y);X.skip=isNaN(H)||isNaN(W)||U,X.stop=Y>0&&Math.abs(re[k]-G[k])>F,R&&(X.parsed=re,X.raw=p.data[Y]),T&&(X.options=x||this.resolveDataElementOptions(Y,J.active?"active":r)),z||this.updateElement(J,Y,X,r),G=re}this.updateSharedOptions(x,r,_)}getMaxOverflow(){const t=this._cachedMeta,n=t.data||[];if(!this.options.showLine){let h=0;for(let s=n.length-1;s>=0;--s)h=Math.max(h,n[s].size(this.resolveDataElementOptions(s))/2);return h>0&&h}const i=t.dataset,r=i.options&&i.options.borderWidth||0;if(!n.length)return r;const a=n[0].size(this.resolveDataElementOptions(0)),l=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(r,a,l)/2}}var Fce=Object.freeze({__proto__:null,BarController:Mce,BubbleController:Dce,DoughnutController:QP,LineController:Rce,PieController:Oce,PolarAreaController:i9,RadarController:Vce,ScatterController:Bce});function ap(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class eM{static override(t){Object.assign(eM.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return ap()}parse(){return ap()}format(){return ap()}add(){return ap()}diff(){return ap()}startOf(){return ap()}endOf(){return ap()}}var zce={_date:eM};function Nce(e,t,n,i){const{controller:r,data:a,_sorted:l}=e,h=r._cachedMeta.iScale,s=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(h&&t===h.axis&&t!=="r"&&l&&a.length){const p=h._reversePixels?nle:uh;if(i){if(r._sharedOptions){const _=a[0],x=typeof _.getRange=="function"&&_.getRange(t);if(x){const T=p(a,t,n-x),k=p(a,t,n+x);return{lo:T.lo,hi:k.hi}}}}else{const _=p(a,t,n);if(s){const{vScale:x}=r._cachedMeta,{_parsed:T}=e,k=T.slice(0,_.lo+1).reverse().findIndex(M=>!Bi(M[x.axis]));_.lo-=Math.max(0,k);const A=T.slice(_.hi).findIndex(M=>!Bi(M[x.axis]));_.hi+=Math.max(0,A)}return _}}return{lo:0,hi:a.length-1}}function qT(e,t,n,i,r){const a=e.getSortedVisibleDatasetMetas(),l=n[t];for(let h=0,s=a.length;h<s;++h){const{index:p,data:_}=a[h],{lo:x,hi:T}=Nce(a[h],t,l,r);for(let k=x;k<=T;++k){const A=_[k];A.skip||i(A,p,k)}}}function $ce(e){const t=e.indexOf("x")!==-1,n=e.indexOf("y")!==-1;return function(i,r){const a=t?Math.abs(i.x-r.x):0,l=n?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(a,2)+Math.pow(l,2))}}function wC(e,t,n,i,r){const a=[];return!r&&!e.isPointInArea(t)||qT(e,n,t,function(h,s,p){!r&&!dh(h,e.chartArea,0)||h.inRange(t.x,t.y,i)&&a.push({element:h,datasetIndex:s,index:p})},!0),a}function Uce(e,t,n,i){let r=[];function a(l,h,s){const{startAngle:p,endAngle:_}=l.getProps(["startAngle","endAngle"],i),{angle:x}=D8(l,{x:t.x,y:t.y});ib(x,p,_)&&r.push({element:l,datasetIndex:h,index:s})}return qT(e,n,t,a),r}function jce(e,t,n,i,r,a){let l=[];const h=$ce(n);let s=Number.POSITIVE_INFINITY;function p(_,x,T){const k=_.inRange(t.x,t.y,r);if(i&&!k)return;const A=_.getCenterPoint(r);if(!(!!a||e.isPointInArea(A))&&!k)return;const R=h(t,A);R<s?(l=[{element:_,datasetIndex:x,index:T}],s=R):R===s&&l.push({element:_,datasetIndex:x,index:T})}return qT(e,n,t,p),l}function TC(e,t,n,i,r,a){return!a&&!e.isPointInArea(t)?[]:n==="r"&&!i?Uce(e,t,n,r):jce(e,t,n,i,r,a)}function uO(e,t,n,i,r){const a=[],l=n==="x"?"inXRange":"inYRange";let h=!1;return qT(e,n,t,(s,p,_)=>{s[l]&&s[l](t[n],r)&&(a.push({element:s,datasetIndex:p,index:_}),h=h||s.inRange(t.x,t.y,r))}),i&&!h?[]:a}var Wce={modes:{index(e,t,n,i){const r=fp(t,e),a=n.axis||"x",l=n.includeInvisible||!1,h=n.intersect?wC(e,r,a,i,l):TC(e,r,a,!1,i,l),s=[];return h.length?(e.getSortedVisibleDatasetMetas().forEach(p=>{const _=h[0].index,x=p.data[_];x&&!x.skip&&s.push({element:x,datasetIndex:p.index,index:_})}),s):[]},dataset(e,t,n,i){const r=fp(t,e),a=n.axis||"xy",l=n.includeInvisible||!1;let h=n.intersect?wC(e,r,a,i,l):TC(e,r,a,!1,i,l);if(h.length>0){const s=h[0].datasetIndex,p=e.getDatasetMeta(s).data;h=[];for(let _=0;_<p.length;++_)h.push({element:p[_],datasetIndex:s,index:_})}return h},point(e,t,n,i){const r=fp(t,e),a=n.axis||"xy",l=n.includeInvisible||!1;return wC(e,r,a,i,l)},nearest(e,t,n,i){const r=fp(t,e),a=n.axis||"xy",l=n.includeInvisible||!1;return TC(e,r,a,n.intersect,i,l)},x(e,t,n,i){const r=fp(t,e);return uO(e,r,"x",n.intersect,i)},y(e,t,n,i){const r=fp(t,e);return uO(e,r,"y",n.intersect,i)}}};const r9=["left","top","right","bottom"];function Iy(e,t){return e.filter(n=>n.pos===t)}function dO(e,t){return e.filter(n=>r9.indexOf(n.pos)===-1&&n.box.axis===t)}function Ay(e,t){return e.sort((n,i)=>{const r=t?i:n,a=t?n:i;return r.weight===a.weight?r.index-a.index:r.weight-a.weight})}function Hce(e){const t=[];let n,i,r,a,l,h;for(n=0,i=(e||[]).length;n<i;++n)r=e[n],{position:a,options:{stack:l,stackWeight:h=1}}=r,t.push({index:n,box:r,pos:a,horizontal:r.isHorizontal(),weight:r.weight,stack:l&&a+l,stackWeight:h});return t}function Gce(e){const t={};for(const n of e){const{stack:i,pos:r,stackWeight:a}=n;if(!i||!r9.includes(r))continue;const l=t[i]||(t[i]={count:0,placed:0,weight:0,size:0});l.count++,l.weight+=a}return t}function qce(e,t){const n=Gce(e),{vBoxMaxWidth:i,hBoxMaxHeight:r}=t;let a,l,h;for(a=0,l=e.length;a<l;++a){h=e[a];const{fullSize:s}=h.box,p=n[h.stack],_=p&&h.stackWeight/p.weight;h.horizontal?(h.width=_?_*i:s&&t.availableWidth,h.height=r):(h.width=i,h.height=_?_*r:s&&t.availableHeight)}return n}function Kce(e){const t=Hce(e),n=Ay(t.filter(p=>p.box.fullSize),!0),i=Ay(Iy(t,"left"),!0),r=Ay(Iy(t,"right")),a=Ay(Iy(t,"top"),!0),l=Ay(Iy(t,"bottom")),h=dO(t,"x"),s=dO(t,"y");return{fullSize:n,leftAndTop:i.concat(a),rightAndBottom:r.concat(s).concat(l).concat(h),chartArea:Iy(t,"chartArea"),vertical:i.concat(r).concat(s),horizontal:a.concat(l).concat(h)}}function hO(e,t,n,i){return Math.max(e[n],t[n])+Math.max(e[i],t[i])}function s9(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function Xce(e,t,n,i){const{pos:r,box:a}=n,l=e.maxPadding;if(!$i(r)){n.size&&(e[r]-=n.size);const x=i[n.stack]||{size:0,count:1};x.size=Math.max(x.size,n.horizontal?a.height:a.width),n.size=x.size/x.count,e[r]+=n.size}a.getPadding&&s9(l,a.getPadding());const h=Math.max(0,t.outerWidth-hO(l,e,"left","right")),s=Math.max(0,t.outerHeight-hO(l,e,"top","bottom")),p=h!==e.w,_=s!==e.h;return e.w=h,e.h=s,n.horizontal?{same:p,other:_}:{same:_,other:p}}function Yce(e){const t=e.maxPadding;function n(i){const r=Math.max(t[i]-e[i],0);return e[i]+=r,r}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}function Zce(e,t){const n=t.maxPadding;function i(r){const a={left:0,top:0,right:0,bottom:0};return r.forEach(l=>{a[l]=Math.max(t[l],n[l])}),a}return i(e?["left","right"]:["top","bottom"])}function Gy(e,t,n,i){const r=[];let a,l,h,s,p,_;for(a=0,l=e.length,p=0;a<l;++a){h=e[a],s=h.box,s.update(h.width||t.w,h.height||t.h,Zce(h.horizontal,t));const{same:x,other:T}=Xce(t,n,h,i);p|=x&&r.length,_=_||T,s.fullSize||r.push(h)}return p&&Gy(r,t,n,i)||_}function t1(e,t,n,i,r){e.top=n,e.left=t,e.right=t+i,e.bottom=n+r,e.width=i,e.height=r}function fO(e,t,n,i){const r=n.padding;let{x:a,y:l}=t;for(const h of e){const s=h.box,p=i[h.stack]||{placed:0,weight:1},_=h.stackWeight/p.weight||1;if(h.horizontal){const x=t.w*_,T=p.size||s.height;nb(p.start)&&(l=p.start),s.fullSize?t1(s,r.left,l,n.outerWidth-r.right-r.left,T):t1(s,t.left+p.placed,l,x,T),p.start=l,p.placed+=x,l=s.bottom}else{const x=t.h*_,T=p.size||s.width;nb(p.start)&&(a=p.start),s.fullSize?t1(s,a,r.top,T,n.outerHeight-r.bottom-r.top):t1(s,a,t.top+p.placed,T,x),p.start=a,p.placed+=x,a=s.right}}t.x=a,t.y=l}var $a={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(n){t.draw(n)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;n!==-1&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,i){if(!e)return;const r=Ga(e.options.layout.padding),a=Math.max(t-r.width,0),l=Math.max(n-r.height,0),h=Kce(e.boxes),s=h.vertical,p=h.horizontal;Ar(e.boxes,M=>{typeof M.beforeLayout=="function"&&M.beforeLayout()});const _=s.reduce((M,R)=>R.box.options&&R.box.options.display===!1?M:M+1,0)||1,x=Object.freeze({outerWidth:t,outerHeight:n,padding:r,availableWidth:a,availableHeight:l,vBoxMaxWidth:a/2/_,hBoxMaxHeight:l/2}),T=Object.assign({},r);s9(T,Ga(i));const k=Object.assign({maxPadding:T,w:a,h:l,x:r.left,y:r.top},r),A=qce(s.concat(p),x);Gy(h.fullSize,k,x,A),Gy(s,k,x,A),Gy(p,k,x,A)&&Gy(s,k,x,A),Yce(k),fO(h.leftAndTop,k,x,A),k.x+=k.w,k.y+=k.h,fO(h.rightAndBottom,k,x,A),e.chartArea={left:k.left,top:k.top,right:k.left+k.w,bottom:k.top+k.h,height:k.h,width:k.w},Ar(h.chartArea,M=>{const R=M.box;Object.assign(R,e.chartArea),R.update(k.w,k.h,{left:0,top:0,right:0,bottom:0})})}};class o9{acquireContext(t,n){}releaseContext(t){return!1}addEventListener(t,n,i){}removeEventListener(t,n,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,n,i,r){return n=Math.max(0,n||t.width),i=i||t.height,{width:n,height:Math.max(0,r?Math.floor(n/r):i)}}isAttached(t){return!0}updateConfig(t){}}class Jce extends o9{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const M1="$chartjs",Qce={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},mO=e=>e===null||e==="";function eue(e,t){const n=e.style,i=e.getAttribute("height"),r=e.getAttribute("width");if(e[M1]={initial:{height:i,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",mO(r)){const a=Z4(e,"width");a!==void 0&&(e.width=a)}if(mO(i))if(e.style.height==="")e.height=e.width/(t||2);else{const a=Z4(e,"height");a!==void 0&&(e.height=a)}return e}const a9=Xle?{passive:!0}:!1;function tue(e,t,n){e&&e.addEventListener(t,n,a9)}function nue(e,t,n){e&&e.canvas&&e.canvas.removeEventListener(t,n,a9)}function iue(e,t){const n=Qce[e.type]||e.type,{x:i,y:r}=fp(e,t);return{type:n,chart:t,native:e,x:i!==void 0?i:null,y:r!==void 0?r:null}}function $w(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function rue(e,t,n){const i=e.canvas,r=new MutationObserver(a=>{let l=!1;for(const h of a)l=l||$w(h.addedNodes,i),l=l&&!$w(h.removedNodes,i);l&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}function sue(e,t,n){const i=e.canvas,r=new MutationObserver(a=>{let l=!1;for(const h of a)l=l||$w(h.removedNodes,i),l=l&&!$w(h.addedNodes,i);l&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}const sb=new Map;let pO=0;function l9(){const e=window.devicePixelRatio;e!==pO&&(pO=e,sb.forEach((t,n)=>{n.currentDevicePixelRatio!==e&&t()}))}function oue(e,t){sb.size||window.addEventListener("resize",l9),sb.set(e,t)}function aue(e){sb.delete(e),sb.size||window.removeEventListener("resize",l9)}function lue(e,t,n){const i=e.canvas,r=i&&JP(i);if(!r)return;const a=V8((h,s)=>{const p=r.clientWidth;n(h,s),p<r.clientWidth&&n()},window),l=new ResizeObserver(h=>{const s=h[0],p=s.contentRect.width,_=s.contentRect.height;p===0&&_===0||a(p,_)});return l.observe(r),oue(e,a),l}function SC(e,t,n){n&&n.disconnect(),t==="resize"&&aue(e)}function cue(e,t,n){const i=e.canvas,r=V8(a=>{e.ctx!==null&&n(iue(a,e))},e);return tue(i,t,r),r}class uue extends o9{acquireContext(t,n){const i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(eue(t,n),i):null}releaseContext(t){const n=t.canvas;if(!n[M1])return!1;const i=n[M1].initial;["height","width"].forEach(a=>{const l=i[a];Bi(l)?n.removeAttribute(a):n.setAttribute(a,l)});const r=i.style||{};return Object.keys(r).forEach(a=>{n.style[a]=r[a]}),n.width=n.width,delete n[M1],!0}addEventListener(t,n,i){this.removeEventListener(t,n);const r=t.$proxies||(t.$proxies={}),l={attach:rue,detach:sue,resize:lue}[n]||cue;r[n]=l(t,n,i)}removeEventListener(t,n){const i=t.$proxies||(t.$proxies={}),r=i[n];if(!r)return;({attach:SC,detach:SC,resize:SC}[n]||nue)(t,n,r),i[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,n,i,r){return Kle(t,n,i,r)}isAttached(t){const n=t&&JP(t);return!!(n&&n.isConnected)}}function due(e){return!ZP()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?Jce:uue}let Lh=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){const{x:n,y:i}=this.getProps(["x","y"],t);return{x:n,y:i}}hasValue(){return l_(this.x)&&l_(this.y)}getProps(t,n){const i=this.$animations;if(!n||!i)return this;const r={};return t.forEach(a=>{r[a]=i[a]&&i[a].active()?i[a]._to:this[a]}),r}};function hue(e,t){const n=e.options.ticks,i=fue(e),r=Math.min(n.maxTicksLimit||i,i),a=n.major.enabled?pue(t):[],l=a.length,h=a[0],s=a[l-1],p=[];if(l>r)return gue(t,p,a,l/r),p;const _=mue(a,t,r);if(l>0){let x,T;const k=l>1?Math.round((s-h)/(l-1)):null;for(n1(t,p,_,Bi(k)?0:h-k,h),x=0,T=l-1;x<T;x++)n1(t,p,_,a[x],a[x+1]);return n1(t,p,_,s,Bi(k)?t.length:s+k),p}return n1(t,p,_),p}function fue(e){const t=e.options.offset,n=e._tickSize(),i=e._length/n+(t?0:1),r=e._maxLength/n;return Math.floor(Math.min(i,r))}function mue(e,t,n){const i=vue(e),r=t.length/n;if(!i)return Math.max(r,1);const a=Zae(i);for(let l=0,h=a.length-1;l<h;l++){const s=a[l];if(s>r)return s}return Math.max(r,1)}function pue(e){const t=[];let n,i;for(n=0,i=e.length;n<i;n++)e[n].major&&t.push(n);return t}function gue(e,t,n,i){let r=0,a=n[0],l;for(i=Math.ceil(i),l=0;l<e.length;l++)l===a&&(t.push(e[l]),r++,a=n[r*i])}function n1(e,t,n,i,r){const a=wi(i,0),l=Math.min(wi(r,e.length),e.length);let h=0,s,p,_;for(n=Math.ceil(n),r&&(s=r-i,n=s/Math.floor(s/n)),_=a;_<0;)h++,_=Math.round(a+h*n);for(p=Math.max(a,0);p<l;p++)p===_&&(t.push(e[p]),h++,_=Math.round(a+h*n))}function vue(e){const t=e.length;let n,i;if(t<2)return!1;for(i=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==i)return!1;return i}const _ue=e=>e==="left"?"right":e==="right"?"left":e,gO=(e,t,n)=>t==="top"||t==="left"?e[t]+n:e[t]-n,vO=(e,t)=>Math.min(t||e,e);function _O(e,t){const n=[],i=e.length/t,r=e.length;let a=0;for(;a<r;a+=i)n.push(e[Math.floor(a)]);return n}function yue(e,t,n){const i=e.ticks.length,r=Math.min(t,i-1),a=e._startPixel,l=e._endPixel,h=1e-6;let s=e.getPixelForTick(r),p;if(!(n&&(i===1?p=Math.max(s-a,l-s):t===0?p=(e.getPixelForTick(1)-s)/2:p=(s-e.getPixelForTick(r-1))/2,s+=r<t?p:-p,s<a-h||s>l+h)))return s}function bue(e,t){Ar(e,n=>{const i=n.gc,r=i.length/2;let a;if(r>t){for(a=0;a<r;++a)delete n.data[i[a]];i.splice(0,r)}})}function Py(e){return e.drawTicks?e.tickLength:0}function yO(e,t){if(!e.display)return 0;const n=_o(e.font,t),i=Ga(e.padding);return(us(e.text)?e.text.length:1)*n.lineHeight+i.height}function xue(e,t){return mm(e,{scale:t,type:"scale"})}function wue(e,t,n){return mm(e,{tick:n,index:t,type:"tick"})}function Tue(e,t,n){let i=HP(e);return(n&&t!=="right"||!n&&t==="right")&&(i=_ue(i)),i}function Sue(e,t,n,i){const{top:r,left:a,bottom:l,right:h,chart:s}=e,{chartArea:p,scales:_}=s;let x=0,T,k,A;const M=l-r,R=h-a;if(e.isHorizontal()){if(k=Pa(i,a,h),$i(n)){const F=Object.keys(n)[0],z=n[F];A=_[F].getPixelForValue(z)+M-t}else n==="center"?A=(p.bottom+p.top)/2+M-t:A=gO(e,n,t);T=h-a}else{if($i(n)){const F=Object.keys(n)[0],z=n[F];k=_[F].getPixelForValue(z)-R+t}else n==="center"?k=(p.left+p.right)/2-R+t:k=gO(e,n,t);A=Pa(i,l,r),x=n==="left"?-Gs:Gs}return{titleX:k,titleY:A,maxWidth:T,rotation:x}}class mg extends Lh{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,n){return t}getUserBounds(){let{_userMin:t,_userMax:n,_suggestedMin:i,_suggestedMax:r}=this;return t=Zl(t,Number.POSITIVE_INFINITY),n=Zl(n,Number.NEGATIVE_INFINITY),i=Zl(i,Number.POSITIVE_INFINITY),r=Zl(r,Number.NEGATIVE_INFINITY),{min:Zl(t,i),max:Zl(n,r),minDefined:Os(t),maxDefined:Os(n)}}getMinMax(t){let{min:n,max:i,minDefined:r,maxDefined:a}=this.getUserBounds(),l;if(r&&a)return{min:n,max:i};const h=this.getMatchingVisibleMetas();for(let s=0,p=h.length;s<p;++s)l=h[s].controller.getMinMax(this,t),r||(n=Math.min(n,l.min)),a||(i=Math.max(i,l.max));return n=a&&n>i?i:n,i=r&&n>i?n:i,{min:Zl(n,Zl(i,n)),max:Zl(i,Zl(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Kr(this.options.beforeUpdate,[this])}update(t,n,i){const{beginAtZero:r,grace:a,ticks:l}=this.options,h=l.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=n,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Cle(this,a,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const s=h<this.ticks.length;this._convertTicksToLabels(s?_O(this.ticks,h):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),l.display&&(l.autoSkip||l.source==="auto")&&(this.ticks=hue(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),s&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,n,i;this.isHorizontal()?(n=this.left,i=this.right):(n=this.top,i=this.bottom,t=!t),this._startPixel=n,this._endPixel=i,this._reversePixels=t,this._length=i-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Kr(this.options.afterUpdate,[this])}beforeSetDimensions(){Kr(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Kr(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Kr(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Kr(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const n=this.options.ticks;let i,r,a;for(i=0,r=t.length;i<r;i++)a=t[i],a.label=Kr(n.callback,[a.value,i,t],this)}afterTickToLabelConversion(){Kr(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Kr(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,n=t.ticks,i=vO(this.ticks.length,t.ticks.maxTicksLimit),r=n.minRotation||0,a=n.maxRotation;let l=r,h,s,p;if(!this._isVisible()||!n.display||r>=a||i<=1||!this.isHorizontal()){this.labelRotation=r;return}const _=this._getLabelSizes(),x=_.widest.width,T=_.highest.height,k=Fo(this.chart.width-x,0,this.maxWidth);h=t.offset?this.maxWidth/i:k/(i-1),x+6>h&&(h=k/(i-(t.offset?.5:1)),s=this.maxHeight-Py(t.grid)-n.padding-yO(t.title,this.chart.options.font),p=Math.sqrt(x*x+T*T),l=jP(Math.min(Math.asin(Fo((_.highest.height+6)/h,-1,1)),Math.asin(Fo(s/p,-1,1))-Math.asin(Fo(T/p,-1,1)))),l=Math.max(r,Math.min(a,l))),this.labelRotation=l}afterCalculateLabelRotation(){Kr(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Kr(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:n,options:{ticks:i,title:r,grid:a}}=this,l=this._isVisible(),h=this.isHorizontal();if(l){const s=yO(r,n.options.font);if(h?(t.width=this.maxWidth,t.height=Py(a)+s):(t.height=this.maxHeight,t.width=Py(a)+s),i.display&&this.ticks.length){const{first:p,last:_,widest:x,highest:T}=this._getLabelSizes(),k=i.padding*2,A=uu(this.labelRotation),M=Math.cos(A),R=Math.sin(A);if(h){const F=i.mirror?0:R*x.width+M*T.height;t.height=Math.min(this.maxHeight,t.height+F+k)}else{const F=i.mirror?0:M*x.width+R*T.height;t.width=Math.min(this.maxWidth,t.width+F+k)}this._calculatePadding(p,_,R,M)}}this._handleMargins(),h?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,n,i,r){const{ticks:{align:a,padding:l},position:h}=this.options,s=this.labelRotation!==0,p=h!=="top"&&this.axis==="x";if(this.isHorizontal()){const _=this.getPixelForTick(0)-this.left,x=this.right-this.getPixelForTick(this.ticks.length-1);let T=0,k=0;s?p?(T=r*t.width,k=i*n.height):(T=i*t.height,k=r*n.width):a==="start"?k=n.width:a==="end"?T=t.width:a!=="inner"&&(T=t.width/2,k=n.width/2),this.paddingLeft=Math.max((T-_+l)*this.width/(this.width-_),0),this.paddingRight=Math.max((k-x+l)*this.width/(this.width-x),0)}else{let _=n.height/2,x=t.height/2;a==="start"?(_=0,x=t.height):a==="end"&&(_=n.height,x=0),this.paddingTop=_+l,this.paddingBottom=x+l}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Kr(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:n}=this.options;return n==="top"||n==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let n,i;for(n=0,i=t.length;n<i;n++)Bi(t[n].label)&&(t.splice(n,1),i--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const n=this.options.ticks.sampleSize;let i=this.ticks;n<i.length&&(i=_O(i,n)),this._labelSizes=t=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,n,i){const{ctx:r,_longestTextCache:a}=this,l=[],h=[],s=Math.floor(n/vO(n,i));let p=0,_=0,x,T,k,A,M,R,F,z,G,Y,J;for(x=0;x<n;x+=s){if(A=t[x].label,M=this._resolveTickFontOptions(x),r.font=R=M.string,F=a[R]=a[R]||{data:{},gc:[]},z=M.lineHeight,G=Y=0,!Bi(A)&&!us(A))G=zw(r,F.data,F.gc,G,A),Y=z;else if(us(A))for(T=0,k=A.length;T<k;++T)J=A[T],!Bi(J)&&!us(J)&&(G=zw(r,F.data,F.gc,G,J),Y+=z);l.push(G),h.push(Y),p=Math.max(G,p),_=Math.max(Y,_)}bue(a,n);const re=l.indexOf(p),X=h.indexOf(_),U=H=>({width:l[H]||0,height:h[H]||0});return{first:U(0),last:U(n-1),widest:U(re),highest:U(X),widths:l,heights:h}}getLabelForValue(t){return t}getPixelForValue(t,n){return NaN}getValueForPixel(t){}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const n=this._startPixel+t*this._length;return tle(this._alignToPixels?op(this.chart,n,0):n)}getDecimalForPixel(t){const n=(t-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:n}=this;return t<0&&n<0?n:t>0&&n>0?t:0}getContext(t){const n=this.ticks||[];if(t>=0&&t<n.length){const i=n[t];return i.$context||(i.$context=wue(this.getContext(),t,i))}return this.$context||(this.$context=xue(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,n=uu(this.labelRotation),i=Math.abs(Math.cos(n)),r=Math.abs(Math.sin(n)),a=this._getLabelSizes(),l=t.autoSkipPadding||0,h=a?a.widest.width+l:0,s=a?a.highest.height+l:0;return this.isHorizontal()?s*i>h*r?h/i:s/r:s*r<h*i?s/i:h/r}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const n=this.axis,i=this.chart,r=this.options,{grid:a,position:l,border:h}=r,s=a.offset,p=this.isHorizontal(),x=this.ticks.length+(s?1:0),T=Py(a),k=[],A=h.setContext(this.getContext()),M=A.display?A.width:0,R=M/2,F=function(Be){return op(i,Be,M)};let z,G,Y,J,re,X,U,H,W,ie,Q,te;if(l==="top")z=F(this.bottom),X=this.bottom-T,H=z-R,ie=F(t.top)+R,te=t.bottom;else if(l==="bottom")z=F(this.top),ie=t.top,te=F(t.bottom)-R,X=z+R,H=this.top+T;else if(l==="left")z=F(this.right),re=this.right-T,U=z-R,W=F(t.left)+R,Q=t.right;else if(l==="right")z=F(this.left),W=t.left,Q=F(t.right)-R,re=z+R,U=this.left+T;else if(n==="x"){if(l==="center")z=F((t.top+t.bottom)/2+.5);else if($i(l)){const Be=Object.keys(l)[0],Je=l[Be];z=F(this.chart.scales[Be].getPixelForValue(Je))}ie=t.top,te=t.bottom,X=z+R,H=X+T}else if(n==="y"){if(l==="center")z=F((t.left+t.right)/2);else if($i(l)){const Be=Object.keys(l)[0],Je=l[Be];z=F(this.chart.scales[Be].getPixelForValue(Je))}re=z-R,U=re-T,W=t.left,Q=t.right}const ke=wi(r.ticks.maxTicksLimit,x),Re=Math.max(1,Math.ceil(x/ke));for(G=0;G<x;G+=Re){const Be=this.getContext(G),Je=a.setContext(Be),nt=h.setContext(Be),De=Je.lineWidth,Ge=Je.color,Ee=nt.dash||[],it=nt.dashOffset,ot=Je.tickWidth,mt=Je.tickColor,Pt=Je.tickBorderDash||[],$t=Je.tickBorderDashOffset;Y=yue(this,G,s),Y!==void 0&&(J=op(i,Y,De),p?re=U=W=Q=J:X=H=ie=te=J,k.push({tx1:re,ty1:X,tx2:U,ty2:H,x1:W,y1:ie,x2:Q,y2:te,width:De,color:Ge,borderDash:Ee,borderDashOffset:it,tickWidth:ot,tickColor:mt,tickBorderDash:Pt,tickBorderDashOffset:$t}))}return this._ticksLength=x,this._borderValue=z,k}_computeLabelItems(t){const n=this.axis,i=this.options,{position:r,ticks:a}=i,l=this.isHorizontal(),h=this.ticks,{align:s,crossAlign:p,padding:_,mirror:x}=a,T=Py(i.grid),k=T+_,A=x?-_:k,M=-uu(this.labelRotation),R=[];let F,z,G,Y,J,re,X,U,H,W,ie,Q,te="middle";if(r==="top")re=this.bottom-A,X=this._getXAxisLabelAlignment();else if(r==="bottom")re=this.top+A,X=this._getXAxisLabelAlignment();else if(r==="left"){const Re=this._getYAxisLabelAlignment(T);X=Re.textAlign,J=Re.x}else if(r==="right"){const Re=this._getYAxisLabelAlignment(T);X=Re.textAlign,J=Re.x}else if(n==="x"){if(r==="center")re=(t.top+t.bottom)/2+k;else if($i(r)){const Re=Object.keys(r)[0],Be=r[Re];re=this.chart.scales[Re].getPixelForValue(Be)+k}X=this._getXAxisLabelAlignment()}else if(n==="y"){if(r==="center")J=(t.left+t.right)/2-k;else if($i(r)){const Re=Object.keys(r)[0],Be=r[Re];J=this.chart.scales[Re].getPixelForValue(Be)}X=this._getYAxisLabelAlignment(T).textAlign}n==="y"&&(s==="start"?te="top":s==="end"&&(te="bottom"));const ke=this._getLabelSizes();for(F=0,z=h.length;F<z;++F){G=h[F],Y=G.label;const Re=a.setContext(this.getContext(F));U=this.getPixelForTick(F)+a.labelOffset,H=this._resolveTickFontOptions(F),W=H.lineHeight,ie=us(Y)?Y.length:1;const Be=ie/2,Je=Re.color,nt=Re.textStrokeColor,De=Re.textStrokeWidth;let Ge=X;l?(J=U,X==="inner"&&(F===z-1?Ge=this.options.reverse?"left":"right":F===0?Ge=this.options.reverse?"right":"left":Ge="center"),r==="top"?p==="near"||M!==0?Q=-ie*W+W/2:p==="center"?Q=-ke.highest.height/2-Be*W+W:Q=-ke.highest.height+W/2:p==="near"||M!==0?Q=W/2:p==="center"?Q=ke.highest.height/2-Be*W:Q=ke.highest.height-ie*W,x&&(Q*=-1),M!==0&&!Re.showLabelBackdrop&&(J+=W/2*Math.sin(M))):(re=U,Q=(1-ie)*W/2);let Ee;if(Re.showLabelBackdrop){const it=Ga(Re.backdropPadding),ot=ke.heights[F],mt=ke.widths[F];let Pt=Q-it.top,$t=0-it.left;switch(te){case"middle":Pt-=ot/2;break;case"bottom":Pt-=ot;break}switch(X){case"center":$t-=mt/2;break;case"right":$t-=mt;break;case"inner":F===z-1?$t-=mt:F>0&&($t-=mt/2);break}Ee={left:$t,top:Pt,width:mt+it.width,height:ot+it.height,color:Re.backdropColor}}R.push({label:Y,font:H,textOffset:Q,options:{rotation:M,color:Je,strokeColor:nt,strokeWidth:De,textAlign:Ge,textBaseline:te,translation:[J,re],backdrop:Ee}})}return R}_getXAxisLabelAlignment(){const{position:t,ticks:n}=this.options;if(-uu(this.labelRotation))return t==="top"?"left":"right";let r="center";return n.align==="start"?r="left":n.align==="end"?r="right":n.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(t){const{position:n,ticks:{crossAlign:i,mirror:r,padding:a}}=this.options,l=this._getLabelSizes(),h=t+a,s=l.widest.width;let p,_;return n==="left"?r?(_=this.right+a,i==="near"?p="left":i==="center"?(p="center",_+=s/2):(p="right",_+=s)):(_=this.right-h,i==="near"?p="right":i==="center"?(p="center",_-=s/2):(p="left",_=this.left)):n==="right"?r?(_=this.left+a,i==="near"?p="right":i==="center"?(p="center",_-=s/2):(p="left",_-=s)):(_=this.left+h,i==="near"?p="left":i==="center"?(p="center",_+=s/2):(p="right",_=this.right)):p="right",{textAlign:p,x:_}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:n},left:i,top:r,width:a,height:l}=this;n&&(t.save(),t.fillStyle=n,t.fillRect(i,r,a,l),t.restore())}getLineWidthForValue(t){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const r=this.ticks.findIndex(a=>a.value===t);return r>=0?n.setContext(this.getContext(r)).lineWidth:0}drawGrid(t){const n=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let a,l;const h=(s,p,_)=>{!_.width||!_.color||(i.save(),i.lineWidth=_.width,i.strokeStyle=_.color,i.setLineDash(_.borderDash||[]),i.lineDashOffset=_.borderDashOffset,i.beginPath(),i.moveTo(s.x,s.y),i.lineTo(p.x,p.y),i.stroke(),i.restore())};if(n.display)for(a=0,l=r.length;a<l;++a){const s=r[a];n.drawOnChartArea&&h({x:s.x1,y:s.y1},{x:s.x2,y:s.y2},s),n.drawTicks&&h({x:s.tx1,y:s.ty1},{x:s.tx2,y:s.ty2},{color:s.tickColor,width:s.tickWidth,borderDash:s.tickBorderDash,borderDashOffset:s.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:n,options:{border:i,grid:r}}=this,a=i.setContext(this.getContext()),l=i.display?a.width:0;if(!l)return;const h=r.setContext(this.getContext(0)).lineWidth,s=this._borderValue;let p,_,x,T;this.isHorizontal()?(p=op(t,this.left,l)-l/2,_=op(t,this.right,h)+h/2,x=T=s):(x=op(t,this.top,l)-l/2,T=op(t,this.bottom,h)+h/2,p=_=s),n.save(),n.lineWidth=a.width,n.strokeStyle=a.color,n.beginPath(),n.moveTo(p,x),n.lineTo(_,T),n.stroke(),n.restore()}drawLabels(t){if(!this.options.ticks.display)return;const i=this.ctx,r=this._computeLabelArea();r&&WT(i,r);const a=this.getLabelItems(t);for(const l of a){const h=l.options,s=l.font,p=l.label,_=l.textOffset;qp(i,p,0,_,s,h)}r&&HT(i)}drawTitle(){const{ctx:t,options:{position:n,title:i,reverse:r}}=this;if(!i.display)return;const a=_o(i.font),l=Ga(i.padding),h=i.align;let s=a.lineHeight/2;n==="bottom"||n==="center"||$i(n)?(s+=l.bottom,us(i.text)&&(s+=a.lineHeight*(i.text.length-1))):s+=l.top;const{titleX:p,titleY:_,maxWidth:x,rotation:T}=Sue(this,s,n,h);qp(t,i.text,0,0,a,{color:i.color,maxWidth:x,rotation:T,textAlign:Tue(h,n,r),textBaseline:"middle",translation:[p,_]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,n=t.ticks&&t.ticks.z||0,i=wi(t.grid&&t.grid.z,-1),r=wi(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==mg.prototype.draw?[{z:n,draw:a=>{this.draw(a)}}]:[{z:i,draw:a=>{this.drawBackground(),this.drawGrid(a),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:n,draw:a=>{this.drawLabels(a)}}]}getMatchingVisibleMetas(t){const n=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[];let a,l;for(a=0,l=n.length;a<l;++a){const h=n[a];h[i]===this.id&&(!t||h.type===t)&&r.push(h)}return r}_resolveTickFontOptions(t){const n=this.options.ticks.setContext(this.getContext(t));return _o(n.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class i1{constructor(t,n,i){this.type=t,this.scope=n,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const n=Object.getPrototypeOf(t);let i;kue(n)&&(i=this.register(n));const r=this.items,a=t.id,l=this.scope+"."+a;if(!a)throw new Error("class does not have id: "+t);return a in r||(r[a]=t,Eue(t,l,i),this.override&&ds.override(t.id,t.overrides)),l}get(t){return this.items[t]}unregister(t){const n=this.items,i=t.id,r=this.scope;i in n&&delete n[i],r&&i in ds[r]&&(delete ds[r][i],this.override&&delete Gp[i])}}function Eue(e,t,n){const i=tb(Object.create(null),[n?ds.get(n):{},ds.get(t),e.defaults]);ds.set(t,i),e.defaultRoutes&&Cue(t,e.defaultRoutes),e.descriptors&&ds.describe(t,e.descriptors)}function Cue(e,t){Object.keys(t).forEach(n=>{const i=n.split("."),r=i.pop(),a=[e].concat(i).join("."),l=t[n].split("."),h=l.pop(),s=l.join(".");ds.route(a,r,s,h)})}function kue(e){return"id"in e&&"defaults"in e}class Iue{constructor(){this.controllers=new i1(pm,"datasets",!0),this.elements=new i1(Lh,"elements"),this.plugins=new i1(Object,"plugins"),this.scales=new i1(mg,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,n,i){[...n].forEach(r=>{const a=i||this._getRegistryForType(r);i||a.isForType(r)||a===this.plugins&&r.id?this._exec(t,a,r):Ar(r,l=>{const h=i||this._getRegistryForType(l);this._exec(t,h,l)})})}_exec(t,n,i){const r=UP(t);Kr(i["before"+r],[],i),n[t](i),Kr(i["after"+r],[],i)}_getRegistryForType(t){for(let n=0;n<this._typedRegistries.length;n++){const i=this._typedRegistries[n];if(i.isForType(t))return i}return this.plugins}_get(t,n,i){const r=n.get(t);if(r===void 0)throw new Error('"'+t+'" is not a registered '+i+".");return r}}var ju=new Iue;class Aue{constructor(){this._init=void 0}notify(t,n,i,r){if(n==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install")),this._init===void 0)return;const a=r?this._descriptors(t).filter(r):this._descriptors(t),l=this._notify(a,t,n,i);return n==="afterDestroy"&&(this._notify(a,t,"stop"),this._notify(this._init,t,"uninstall"),this._init=void 0),l}_notify(t,n,i,r){r=r||{};for(const a of t){const l=a.plugin,h=l[i],s=[n,r,a.options];if(Kr(h,s,l)===!1&&r.cancelable)return!1}return!0}invalidate(){Bi(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),n}_createDescriptors(t,n){const i=t&&t.config,r=wi(i.options&&i.options.plugins,{}),a=Pue(i);return r===!1&&!n?[]:Due(t,a,r,n)}_notifyStateChanges(t){const n=this._oldCache||[],i=this._cache,r=(a,l)=>a.filter(h=>!l.some(s=>h.plugin.id===s.plugin.id));this._notify(r(n,i),t,"stop"),this._notify(r(i,n),t,"start")}}function Pue(e){const t={},n=[],i=Object.keys(ju.plugins.items);for(let a=0;a<i.length;a++)n.push(ju.getPlugin(i[a]));const r=e.plugins||[];for(let a=0;a<r.length;a++){const l=r[a];n.indexOf(l)===-1&&(n.push(l),t[l.id]=!0)}return{plugins:n,localIds:t}}function Mue(e,t){return!t&&e===!1?null:e===!0?{}:e}function Due(e,{plugins:t,localIds:n},i,r){const a=[],l=e.getContext();for(const h of t){const s=h.id,p=Mue(i[s],r);p!==null&&a.push({plugin:h,options:Lue(e.config,{plugin:h,local:n[s]},p,l)})}return a}function Lue(e,{plugin:t,local:n},i,r){const a=e.pluginScopeKeys(t),l=e.getOptionScopes(i,a);return n&&t.defaults&&l.push(t.defaults),e.createResolver(l,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function eI(e,t){const n=ds.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function Rue(e,t){let n=e;return e==="_index_"?n=t:e==="_value_"&&(n=t==="x"?"y":"x"),n}function Oue(e,t){return e===t?"_index_":"_value_"}function bO(e){if(e==="x"||e==="y"||e==="r")return e}function Vue(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function tI(e,...t){if(bO(e))return e;for(const n of t){const i=n.axis||Vue(n.position)||e.length>1&&bO(e[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function xO(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function Bue(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter(i=>i.xAxisID===e||i.yAxisID===e);if(n.length)return xO(e,"x",n[0])||xO(e,"y",n[0])}return{}}function Fue(e,t){const n=Gp[e.type]||{scales:{}},i=t.scales||{},r=eI(e.type,t),a=Object.create(null);return Object.keys(i).forEach(l=>{const h=i[l];if(!$i(h))return console.error(`Invalid scale configuration for scale: ${l}`);if(h._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${l}`);const s=tI(l,h,Bue(l,e),ds.scales[h.type]),p=Oue(s,r),_=n.scales||{};a[l]=f0(Object.create(null),[{axis:s},h,_[s],_[p]])}),e.data.datasets.forEach(l=>{const h=l.type||e.type,s=l.indexAxis||eI(h,t),_=(Gp[h]||{}).scales||{};Object.keys(_).forEach(x=>{const T=Rue(x,s),k=l[T+"AxisID"]||T;a[k]=a[k]||Object.create(null),f0(a[k],[{axis:T},i[k],_[x]])})}),Object.keys(a).forEach(l=>{const h=a[l];f0(h,[ds.scales[h.type],ds.scale])}),a}function c9(e){const t=e.options||(e.options={});t.plugins=wi(t.plugins,{}),t.scales=Fue(e,t)}function u9(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function zue(e){return e=e||{},e.data=u9(e.data),c9(e),e}const wO=new Map,d9=new Set;function r1(e,t){let n=wO.get(e);return n||(n=t(),wO.set(e,n),d9.add(n)),n}const My=(e,t,n)=>{const i=sm(t,n);i!==void 0&&e.add(i)};class Nue{constructor(t){this._config=zue(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=u9(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),c9(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return r1(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,n){return r1(`${t}.transition.${n}`,()=>[[`datasets.${t}.transitions.${n}`,`transitions.${n}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,n){return r1(`${t}-${n}`,()=>[[`datasets.${t}.elements.${n}`,`datasets.${t}`,`elements.${n}`,""]])}pluginScopeKeys(t){const n=t.id,i=this.type;return r1(`${i}-plugin-${n}`,()=>[[`plugins.${n}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,n){const i=this._scopeCache;let r=i.get(t);return(!r||n)&&(r=new Map,i.set(t,r)),r}getOptionScopes(t,n,i){const{options:r,type:a}=this,l=this._cachedScopes(t,i),h=l.get(n);if(h)return h;const s=new Set;n.forEach(_=>{t&&(s.add(t),_.forEach(x=>My(s,t,x))),_.forEach(x=>My(s,r,x)),_.forEach(x=>My(s,Gp[a]||{},x)),_.forEach(x=>My(s,ds,x)),_.forEach(x=>My(s,Jk,x))});const p=Array.from(s);return p.length===0&&p.push(Object.create(null)),d9.has(n)&&l.set(n,p),p}chartOptionScopes(){const{options:t,type:n}=this;return[t,Gp[n]||{},ds.datasets[n]||{},{type:n},ds,Jk]}resolveNamedOptions(t,n,i,r=[""]){const a={$shared:!0},{resolver:l,subPrefixes:h}=TO(this._resolverCache,t,r);let s=l;if(Uue(l,n)){a.$shared=!1,i=om(i)?i():i;const p=this.createResolver(t,i,h);s=c_(l,i,p)}for(const p of n)a[p]=s[p];return a}createResolver(t,n,i=[""],r){const{resolver:a}=TO(this._resolverCache,t,i);return $i(n)?c_(a,n,void 0,r):a}}function TO(e,t,n){let i=e.get(t);i||(i=new Map,e.set(t,i));const r=n.join();let a=i.get(r);return a||(a={resolver:KP(t,n),subPrefixes:n.filter(h=>!h.toLowerCase().includes("hover"))},i.set(r,a)),a}const $ue=e=>$i(e)&&Object.getOwnPropertyNames(e).some(t=>om(e[t]));function Uue(e,t){const{isScriptable:n,isIndexable:i}=U8(e);for(const r of t){const a=n(r),l=i(r),h=(l||a)&&e[r];if(a&&(om(h)||$ue(h))||l&&us(h))return!0}return!1}var jue="4.5.1";const Wue=["top","bottom","left","right","chartArea"];function SO(e,t){return e==="top"||e==="bottom"||Wue.indexOf(e)===-1&&t==="x"}function EO(e,t){return function(n,i){return n[e]===i[e]?n[t]-i[t]:n[e]-i[e]}}function CO(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),Kr(n&&n.onComplete,[e],t)}function Hue(e){const t=e.chart,n=t.options.animation;Kr(n&&n.onProgress,[e],t)}function h9(e){return ZP()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const D1={},kO=e=>{const t=h9(e);return Object.values(D1).filter(n=>n.canvas===t).pop()};function Gue(e,t,n){const i=Object.keys(e);for(const r of i){const a=+r;if(a>=t){const l=e[r];delete e[r],(n>0||a>t)&&(e[a+n]=l)}}}function que(e,t,n,i){return!n||e.type==="mouseout"?null:i?t:e}class tM{static defaults=ds;static instances=D1;static overrides=Gp;static registry=ju;static version=jue;static getChart=kO;static register(...t){ju.add(...t),IO()}static unregister(...t){ju.remove(...t),IO()}constructor(t,n){const i=this.config=new Nue(n),r=h9(t),a=kO(r);if(a)throw new Error("Canvas is already in use. Chart with ID '"+a.id+"' must be destroyed before the canvas with ID '"+a.canvas.id+"' can be reused.");const l=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||due(r)),this.platform.updateConfig(i);const h=this.platform.acquireContext(r,l.aspectRatio),s=h&&h.canvas,p=s&&s.height,_=s&&s.width;if(this.id=Uae(),this.ctx=h,this.canvas=s,this.width=_,this.height=p,this._options=l,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Aue,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=sle(x=>this.update(x),l.resizeDelay||0),this._dataChanges=[],D1[this.id]=this,!h||!s){console.error("Failed to create chart: can't acquire context from the given item");return}Xd.listen(this,"complete",CO),Xd.listen(this,"progress",Hue),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:n},width:i,height:r,_aspectRatio:a}=this;return Bi(t)?n&&a?a:r?i/r:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return ju}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Y4(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return q4(this.canvas,this.ctx),this}stop(){return Xd.stop(this),this}resize(t,n){Xd.running(this)?this._resizeBeforeDraw={width:t,height:n}:this._resize(t,n)}_resize(t,n){const i=this.options,r=this.canvas,a=i.maintainAspectRatio&&this.aspectRatio,l=this.platform.getMaximumSize(r,t,n,a),h=i.devicePixelRatio||this.platform.getDevicePixelRatio(),s=this.width?"resize":"attach";this.width=l.width,this.height=l.height,this._aspectRatio=this.aspectRatio,Y4(this,h,!0)&&(this.notifyPlugins("resize",{size:l}),Kr(i.onResize,[this,l],this),this.attached&&this._doResize(s)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};Ar(n,(i,r)=>{i.id=r})}buildOrUpdateScales(){const t=this.options,n=t.scales,i=this.scales,r=Object.keys(i).reduce((l,h)=>(l[h]=!1,l),{});let a=[];n&&(a=a.concat(Object.keys(n).map(l=>{const h=n[l],s=tI(l,h),p=s==="r",_=s==="x";return{options:h,dposition:p?"chartArea":_?"bottom":"left",dtype:p?"radialLinear":_?"category":"linear"}}))),Ar(a,l=>{const h=l.options,s=h.id,p=tI(s,h),_=wi(h.type,l.dtype);(h.position===void 0||SO(h.position,p)!==SO(l.dposition))&&(h.position=l.dposition),r[s]=!0;let x=null;if(s in i&&i[s].type===_)x=i[s];else{const T=ju.getScale(_);x=new T({id:s,type:_,ctx:this.ctx,chart:this}),i[x.id]=x}x.init(h,t)}),Ar(r,(l,h)=>{l||delete i[h]}),Ar(i,l=>{$a.configure(this,l,l.options),$a.addBox(this,l)})}_updateMetasets(){const t=this._metasets,n=this.data.datasets.length,i=t.length;if(t.sort((r,a)=>r.index-a.index),i>n){for(let r=n;r<i;++r)this._destroyDatasetMeta(r);t.splice(n,i-n)}this._sortedMetasets=t.slice(0).sort(EO("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:n}}=this;t.length>n.length&&delete this._stacks,t.forEach((i,r)=>{n.filter(a=>a===i._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const t=[],n=this.data.datasets;let i,r;for(this._removeUnreferencedMetasets(),i=0,r=n.length;i<r;i++){const a=n[i];let l=this.getDatasetMeta(i);const h=a.type||this.config.type;if(l.type&&l.type!==h&&(this._destroyDatasetMeta(i),l=this.getDatasetMeta(i)),l.type=h,l.indexAxis=a.indexAxis||eI(h,this.options),l.order=a.order||0,l.index=i,l.label=""+a.label,l.visible=this.isDatasetVisible(i),l.controller)l.controller.updateIndex(i),l.controller.linkScales();else{const s=ju.getController(h),{datasetElementType:p,dataElementType:_}=ds.datasets[h];Object.assign(s,{dataElementType:ju.getElement(_),datasetElementType:p&&ju.getElement(p)}),l.controller=new s(this,i),t.push(l.controller)}}return this._updateMetasets(),t}_resetElements(){Ar(this.data.datasets,(t,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const n=this.config;n.update();const i=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const a=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let l=0;for(let p=0,_=this.data.datasets.length;p<_;p++){const{controller:x}=this.getDatasetMeta(p),T=!r&&a.indexOf(x)===-1;x.buildOrUpdateElements(T),l=Math.max(+x.getMaxOverflow(),l)}l=this._minPadding=i.layout.autoPadding?l:0,this._updateLayout(l),r||Ar(a,p=>{p.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(EO("z","_idx"));const{_active:h,_lastEvent:s}=this;s?this._eventHandler(s,!0):h.length&&this._updateHoverStyles(h,h,!0),this.render()}_updateScales(){Ar(this.scales,t=>{$a.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,n=new Set(Object.keys(this._listeners)),i=new Set(t.events);(!F4(n,i)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,n=this._getUniformDataChanges()||[];for(const{method:i,start:r,count:a}of n){const l=i==="_removeElements"?-a:a;Gue(t,r,l)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const n=this.data.datasets.length,i=a=>new Set(t.filter(l=>l[0]===a).map((l,h)=>h+","+l.splice(1).join(","))),r=i(0);for(let a=1;a<n;a++)if(!F4(r,i(a)))return;return Array.from(r).map(a=>a.split(",")).map(a=>({method:a[1],start:+a[2],count:+a[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;$a.update(this,this.width,this.height,t);const n=this.chartArea,i=n.width<=0||n.height<=0;this._layers=[],Ar(this.boxes,r=>{i&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,a)=>{r._idx=a}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let n=0,i=this.data.datasets.length;n<i;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,i=this.data.datasets.length;n<i;++n)this._updateDataset(n,om(t)?t({datasetIndex:n}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,n){const i=this.getDatasetMeta(t),r={meta:i,index:t,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(i.controller._update(n),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Xd.has(this)?this.attached&&!Xd.running(this)&&Xd.start(this):(this.draw(),CO({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:i,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(t=0;t<n.length&&n[t].z<=0;++t)n[t].draw(this.chartArea);for(this._drawDatasets();t<n.length;++t)n[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const n=this._sortedMetasets,i=[];let r,a;for(r=0,a=n.length;r<a;++r){const l=n[r];(!t||l.visible)&&i.push(l)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let n=t.length-1;n>=0;--n)this._drawDataset(t[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const n=this.ctx,i={meta:t,index:t.index,cancelable:!0},r=Q8(this,t);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(r&&WT(n,r),t.controller.draw(),r&&HT(n),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(t){return dh(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,n,i,r){const a=Wce.modes[n];return typeof a=="function"?a(this,t,i,r):[]}getDatasetMeta(t){const n=this.data.datasets[t],i=this._metasets;let r=i.filter(a=>a&&a._dataset===n).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:t,_dataset:n,_parsed:[],_sorted:!1},i.push(r)),r}getContext(){return this.$context||(this.$context=mm(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const n=this.data.datasets[t];if(!n)return!1;const i=this.getDatasetMeta(t);return typeof i.hidden=="boolean"?!i.hidden:!n.hidden}setDatasetVisibility(t,n){const i=this.getDatasetMeta(t);i.hidden=!n}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,n,i){const r=i?"show":"hide",a=this.getDatasetMeta(t),l=a.controller._resolveAnimations(void 0,r);nb(n)?(a.data[n].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),l.update(a,{visible:i}),this.update(h=>h.datasetIndex===t?r:void 0))}hide(t,n){this._updateVisibility(t,n,!1)}show(t,n){this._updateVisibility(t,n,!0)}_destroyDatasetMeta(t){const n=this._metasets[t];n&&n.controller&&n.controller._destroy(),delete this._metasets[t]}_stop(){let t,n;for(this.stop(),Xd.remove(this),t=0,n=this.data.datasets.length;t<n;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:n}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),q4(t,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete D1[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,n=this.platform,i=(a,l)=>{n.addEventListener(this,a,l),t[a]=l},r=(a,l,h)=>{a.offsetX=l,a.offsetY=h,this._eventHandler(a)};Ar(this.options.events,a=>i(a,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,n=this.platform,i=(s,p)=>{n.addEventListener(this,s,p),t[s]=p},r=(s,p)=>{t[s]&&(n.removeEventListener(this,s,p),delete t[s])},a=(s,p)=>{this.canvas&&this.resize(s,p)};let l;const h=()=>{r("attach",h),this.attached=!0,this.resize(),i("resize",a),i("detach",l)};l=()=>{this.attached=!1,r("resize",a),this._stop(),this._resize(0,0),i("attach",h)},n.isAttached(this.canvas)?h():l()}unbindEvents(){Ar(this._listeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._listeners={},Ar(this._responsiveListeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,n,i){const r=i?"set":"remove";let a,l,h,s;for(n==="dataset"&&(a=this.getDatasetMeta(t[0].datasetIndex),a.controller["_"+r+"DatasetHoverStyle"]()),h=0,s=t.length;h<s;++h){l=t[h];const p=l&&this.getDatasetMeta(l.datasetIndex).controller;p&&p[r+"HoverStyle"](l.element,l.datasetIndex,l.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const n=this._active||[],i=t.map(({datasetIndex:a,index:l})=>{const h=this.getDatasetMeta(a);if(!h)throw new Error("No dataset found at index "+a);return{datasetIndex:a,element:h.data[l],index:l}});!Vw(i,n)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,n))}notifyPlugins(t,n,i){return this._plugins.notify(this,t,n,i)}isPluginEnabled(t){return this._plugins._cache.filter(n=>n.plugin.id===t).length===1}_updateHoverStyles(t,n,i){const r=this.options.hover,a=(s,p)=>s.filter(_=>!p.some(x=>_.datasetIndex===x.datasetIndex&&_.index===x.index)),l=a(n,t),h=i?t:a(t,n);l.length&&this.updateHoverStyle(l,r.mode,!1),h.length&&r.mode&&this.updateHoverStyle(h,r.mode,!0)}_eventHandler(t,n){const i={event:t,replay:n,cancelable:!0,inChartArea:this.isPointInArea(t)},r=l=>(l.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",i,r)===!1)return;const a=this._handleEvent(t,n,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,r),(a||i.changed)&&this.render(),this}_handleEvent(t,n,i){const{_active:r=[],options:a}=this,l=n,h=this._getActiveElements(t,r,i,l),s=Kae(t),p=que(t,this._lastEvent,i,s);i&&(this._lastEvent=null,Kr(a.onHover,[t,h,this],this),s&&Kr(a.onClick,[t,h,this],this));const _=!Vw(h,r);return(_||n)&&(this._active=h,this._updateHoverStyles(h,r,n)),this._lastEvent=p,_}_getActiveElements(t,n,i,r){if(t.type==="mouseout")return[];if(!i)return n;const a=this.options.hover;return this.getElementsAtEventForMode(t,a.mode,a,r)}}function IO(){return Ar(tM.instances,e=>e._plugins.invalidate())}function Kue(e,t,n){const{startAngle:i,x:r,y:a,outerRadius:l,innerRadius:h,options:s}=t,{borderWidth:p,borderJoinStyle:_}=s,x=Math.min(p/l,La(i-n));if(e.beginPath(),e.arc(r,a,l-p/2,i+x/2,n-x/2),h>0){const T=Math.min(p/h,La(i-n));e.arc(r,a,h+p/2,n-T/2,i+T/2,!0)}else{const T=Math.min(p/2,l*La(i-n));if(_==="round")e.arc(r,a,T,n-dr/2,i+dr/2,!0);else if(_==="bevel"){const k=2*T*T,A=-k*Math.cos(n+dr/2)+r,M=-k*Math.sin(n+dr/2)+a,R=k*Math.cos(i+dr/2)+r,F=k*Math.sin(i+dr/2)+a;e.lineTo(A,M),e.lineTo(R,F)}}e.closePath(),e.moveTo(0,0),e.rect(0,0,e.canvas.width,e.canvas.height),e.clip("evenodd")}function Xue(e,t,n){const{startAngle:i,pixelMargin:r,x:a,y:l,outerRadius:h,innerRadius:s}=t;let p=r/h;e.beginPath(),e.arc(a,l,h,i-p,n+p),s>r?(p=r/s,e.arc(a,l,s,n+p,i-p,!0)):e.arc(a,l,r,n+Gs,i-Gs),e.closePath(),e.clip()}function Yue(e){return qP(e,["outerStart","outerEnd","innerStart","innerEnd"])}function Zue(e,t,n,i){const r=Yue(e.options.borderRadius),a=(n-t)/2,l=Math.min(a,i*t/2),h=s=>{const p=(n-Math.min(a,s))*i/2;return Fo(s,0,Math.min(a,p))};return{outerStart:h(r.outerStart),outerEnd:h(r.outerEnd),innerStart:Fo(r.innerStart,0,l),innerEnd:Fo(r.innerEnd,0,l)}}function cv(e,t,n,i){return{x:n+e*Math.cos(t),y:i+e*Math.sin(t)}}function Uw(e,t,n,i,r,a){const{x:l,y:h,startAngle:s,pixelMargin:p,innerRadius:_}=t,x=Math.max(t.outerRadius+i+n-p,0),T=_>0?_+i+n+p:0;let k=0;const A=r-s;if(i){const Re=_>0?_-i:0,Be=x>0?x-i:0,Je=(Re+Be)/2,nt=Je!==0?A*Je/(Je+i):A;k=(A-nt)/2}const M=Math.max(.001,A*x-n/dr)/x,R=(A-M)/2,F=s+R+k,z=r-R-k,{outerStart:G,outerEnd:Y,innerStart:J,innerEnd:re}=Zue(t,T,x,z-F),X=x-G,U=x-Y,H=F+G/X,W=z-Y/U,ie=T+J,Q=T+re,te=F+J/ie,ke=z-re/Q;if(e.beginPath(),a){const Re=(H+W)/2;if(e.arc(l,h,x,H,Re),e.arc(l,h,x,Re,W),Y>0){const De=cv(U,W,l,h);e.arc(De.x,De.y,Y,W,z+Gs)}const Be=cv(Q,z,l,h);if(e.lineTo(Be.x,Be.y),re>0){const De=cv(Q,ke,l,h);e.arc(De.x,De.y,re,z+Gs,ke+Math.PI)}const Je=(z-re/T+(F+J/T))/2;if(e.arc(l,h,T,z-re/T,Je,!0),e.arc(l,h,T,Je,F+J/T,!0),J>0){const De=cv(ie,te,l,h);e.arc(De.x,De.y,J,te+Math.PI,F-Gs)}const nt=cv(X,F,l,h);if(e.lineTo(nt.x,nt.y),G>0){const De=cv(X,H,l,h);e.arc(De.x,De.y,G,F-Gs,H)}}else{e.moveTo(l,h);const Re=Math.cos(H)*x+l,Be=Math.sin(H)*x+h;e.lineTo(Re,Be);const Je=Math.cos(W)*x+l,nt=Math.sin(W)*x+h;e.lineTo(Je,nt)}e.closePath()}function Jue(e,t,n,i,r){const{fullCircles:a,startAngle:l,circumference:h}=t;let s=t.endAngle;if(a){Uw(e,t,n,i,s,r);for(let p=0;p<a;++p)e.fill();isNaN(h)||(s=l+(h%Qr||Qr))}return Uw(e,t,n,i,s,r),e.fill(),s}function Que(e,t,n,i,r){const{fullCircles:a,startAngle:l,circumference:h,options:s}=t,{borderWidth:p,borderJoinStyle:_,borderDash:x,borderDashOffset:T,borderRadius:k}=s,A=s.borderAlign==="inner";if(!p)return;e.setLineDash(x||[]),e.lineDashOffset=T,A?(e.lineWidth=p*2,e.lineJoin=_||"round"):(e.lineWidth=p,e.lineJoin=_||"bevel");let M=t.endAngle;if(a){Uw(e,t,n,i,M,r);for(let R=0;R<a;++R)e.stroke();isNaN(h)||(M=l+(h%Qr||Qr))}A&&Xue(e,t,M),s.selfJoin&&M-l>=dr&&k===0&&_!=="miter"&&Kue(e,t,M),a||(Uw(e,t,n,i,M,r),e.stroke())}class ede extends Lh{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,n,i){const r=this.getProps(["x","y"],i),{angle:a,distance:l}=D8(r,{x:t,y:n}),{startAngle:h,endAngle:s,innerRadius:p,outerRadius:_,circumference:x}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),T=(this.options.spacing+this.options.borderWidth)/2,k=wi(x,s-h),A=ib(a,h,s)&&h!==s,M=k>=Qr||A,R=ch(l,p+T,_+T);return M&&R}getCenterPoint(t){const{x:n,y:i,startAngle:r,endAngle:a,innerRadius:l,outerRadius:h}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:s,spacing:p}=this.options,_=(r+a)/2,x=(l+h+p+s)/2;return{x:n+Math.cos(_)*x,y:i+Math.sin(_)*x}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:n,circumference:i}=this,r=(n.offset||0)/4,a=(n.spacing||0)/2,l=n.circular;if(this.pixelMargin=n.borderAlign==="inner"?.33:0,this.fullCircles=i>Qr?Math.floor(i/Qr):0,i===0||this.innerRadius<0||this.outerRadius<0)return;t.save();const h=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(h)*r,Math.sin(h)*r);const s=1-Math.sin(Math.min(dr,i||0)),p=r*s;t.fillStyle=n.backgroundColor,t.strokeStyle=n.borderColor,Jue(t,this,p,a,l),Que(t,this,p,a,l),t.restore()}}function f9(e,t,n=t){e.lineCap=wi(n.borderCapStyle,t.borderCapStyle),e.setLineDash(wi(n.borderDash,t.borderDash)),e.lineDashOffset=wi(n.borderDashOffset,t.borderDashOffset),e.lineJoin=wi(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=wi(n.borderWidth,t.borderWidth),e.strokeStyle=wi(n.borderColor,t.borderColor)}function tde(e,t,n){e.lineTo(n.x,n.y)}function nde(e){return e.stepped?vle:e.tension||e.cubicInterpolationMode==="monotone"?_le:tde}function m9(e,t,n={}){const i=e.length,{start:r=0,end:a=i-1}=n,{start:l,end:h}=t,s=Math.max(r,l),p=Math.min(a,h),_=r<l&&a<l||r>h&&a>h;return{count:i,start:s,loop:t.loop,ilen:p<s&&!_?i+p-s:p-s}}function ide(e,t,n,i){const{points:r,options:a}=t,{count:l,start:h,loop:s,ilen:p}=m9(r,n,i),_=nde(a);let{move:x=!0,reverse:T}=i||{},k,A,M;for(k=0;k<=p;++k)A=r[(h+(T?p-k:k))%l],!A.skip&&(x?(e.moveTo(A.x,A.y),x=!1):_(e,M,A,T,a.stepped),M=A);return s&&(A=r[(h+(T?p:0))%l],_(e,M,A,T,a.stepped)),!!s}function rde(e,t,n,i){const r=t.points,{count:a,start:l,ilen:h}=m9(r,n,i),{move:s=!0,reverse:p}=i||{};let _=0,x=0,T,k,A,M,R,F;const z=Y=>(l+(p?h-Y:Y))%a,G=()=>{M!==R&&(e.lineTo(_,R),e.lineTo(_,M),e.lineTo(_,F))};for(s&&(k=r[z(0)],e.moveTo(k.x,k.y)),T=0;T<=h;++T){if(k=r[z(T)],k.skip)continue;const Y=k.x,J=k.y,re=Y|0;re===A?(J<M?M=J:J>R&&(R=J),_=(x*_+Y)/++x):(G(),e.lineTo(Y,J),A=re,x=0,M=R=J),F=J}G()}function nI(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!n?rde:ide}function sde(e){return e.stepped?Yle:e.tension||e.cubicInterpolationMode==="monotone"?Zle:mp}function ode(e,t,n,i){let r=t._path;r||(r=t._path=new Path2D,t.path(r,n,i)&&r.closePath()),f9(e,t.options),e.stroke(r)}function ade(e,t,n,i){const{segments:r,options:a}=t,l=nI(t);for(const h of r)f9(e,a,h.style),e.beginPath(),l(e,t,h,{start:n,end:n+i-1})&&e.closePath(),e.stroke()}const lde=typeof Path2D=="function";function cde(e,t,n,i){lde&&!t.options.segment?ode(e,t,n,i):ade(e,t,n,i)}class KT extends Lh{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,n){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const r=i.spanGaps?this._loop:this._fullLoop;Ule(this._points,i,t,r,n),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=ice(this,this.options.segment))}first(){const t=this.segments,n=this.points;return t.length&&n[t[0].start]}last(){const t=this.segments,n=this.points,i=t.length;return i&&n[t[i-1].end]}interpolate(t,n){const i=this.options,r=t[n],a=this.points,l=J8(this,{property:n,start:r,end:r});if(!l.length)return;const h=[],s=sde(i);let p,_;for(p=0,_=l.length;p<_;++p){const{start:x,end:T}=l[p],k=a[x],A=a[T];if(k===A){h.push(k);continue}const M=Math.abs((r-k[n])/(A[n]-k[n])),R=s(k,A,M,i.stepped);R[n]=t[n],h.push(R)}return h.length===1?h[0]:h}pathSegment(t,n,i){return nI(this)(t,this,n,i)}path(t,n,i){const r=this.segments,a=nI(this);let l=this._loop;n=n||0,i=i||this.points.length-n;for(const h of r)l&=a(t,this,h,{start:n,end:n+i-1});return!!l}draw(t,n,i,r){const a=this.options||{};(this.points||[]).length&&a.borderWidth&&(t.save(),cde(t,this,i,r),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function AO(e,t,n,i){const r=e.options,{[n]:a}=e.getProps([n],i);return Math.abs(t-a)<r.radius+r.hitRadius}class ude extends Lh{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,n,i){const r=this.options,{x:a,y:l}=this.getProps(["x","y"],i);return Math.pow(t-a,2)+Math.pow(n-l,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(t,n){return AO(this,t,"x",n)}inYRange(t,n){return AO(this,t,"y",n)}getCenterPoint(t){const{x:n,y:i}=this.getProps(["x","y"],t);return{x:n,y:i}}size(t){t=t||this.options||{};let n=t.radius||0;n=Math.max(n,n&&t.hoverRadius||0);const i=n&&t.borderWidth||0;return(n+i)*2}draw(t,n){const i=this.options;this.skip||i.radius<.1||!dh(this,n,this.size(i)/2)||(t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.fillStyle=i.backgroundColor,Qk(t,i,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}function p9(e,t){const{x:n,y:i,base:r,width:a,height:l}=e.getProps(["x","y","base","width","height"],t);let h,s,p,_,x;return e.horizontal?(x=l/2,h=Math.min(n,r),s=Math.max(n,r),p=i-x,_=i+x):(x=a/2,h=n-x,s=n+x,p=Math.min(i,r),_=Math.max(i,r)),{left:h,top:p,right:s,bottom:_}}function Lf(e,t,n,i){return e?0:Fo(t,n,i)}function dde(e,t,n){const i=e.options.borderWidth,r=e.borderSkipped,a=$8(i);return{t:Lf(r.top,a.top,0,n),r:Lf(r.right,a.right,0,t),b:Lf(r.bottom,a.bottom,0,n),l:Lf(r.left,a.left,0,t)}}function hde(e,t,n){const{enableBorderRadius:i}=e.getProps(["enableBorderRadius"]),r=e.options.borderRadius,a=Lp(r),l=Math.min(t,n),h=e.borderSkipped,s=i||$i(r);return{topLeft:Lf(!s||h.top||h.left,a.topLeft,0,l),topRight:Lf(!s||h.top||h.right,a.topRight,0,l),bottomLeft:Lf(!s||h.bottom||h.left,a.bottomLeft,0,l),bottomRight:Lf(!s||h.bottom||h.right,a.bottomRight,0,l)}}function fde(e){const t=p9(e),n=t.right-t.left,i=t.bottom-t.top,r=dde(e,n/2,i/2),a=hde(e,n/2,i/2);return{outer:{x:t.left,y:t.top,w:n,h:i,radius:a},inner:{x:t.left+r.l,y:t.top+r.t,w:n-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,a.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,a.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,a.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,a.bottomRight-Math.max(r.b,r.r))}}}}function EC(e,t,n,i){const r=t===null,a=n===null,h=e&&!(r&&a)&&p9(e,i);return h&&(r||ch(t,h.left,h.right))&&(a||ch(n,h.top,h.bottom))}function mde(e){return e.topLeft||e.topRight||e.bottomLeft||e.bottomRight}function pde(e,t){e.rect(t.x,t.y,t.w,t.h)}function CC(e,t,n={}){const i=e.x!==n.x?-t:0,r=e.y!==n.y?-t:0,a=(e.x+e.w!==n.x+n.w?t:0)-i,l=(e.y+e.h!==n.y+n.h?t:0)-r;return{x:e.x+i,y:e.y+r,w:e.w+a,h:e.h+l,radius:e.radius}}class gde extends Lh{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:n,options:{borderColor:i,backgroundColor:r}}=this,{inner:a,outer:l}=fde(this),h=mde(l.radius)?rb:pde;t.save(),(l.w!==a.w||l.h!==a.h)&&(t.beginPath(),h(t,CC(l,n,a)),t.clip(),h(t,CC(a,-n,l)),t.fillStyle=i,t.fill("evenodd")),t.beginPath(),h(t,CC(a,n)),t.fillStyle=r,t.fill(),t.restore()}inRange(t,n,i){return EC(this,t,n,i)}inXRange(t,n){return EC(this,t,null,n)}inYRange(t,n){return EC(this,null,t,n)}getCenterPoint(t){const{x:n,y:i,base:r,horizontal:a}=this.getProps(["x","y","base","horizontal"],t);return{x:a?(n+r)/2:n,y:a?i:(i+r)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}var vde=Object.freeze({__proto__:null,ArcElement:ede,BarElement:gde,LineElement:KT,PointElement:ude});const iI=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],PO=iI.map(e=>e.replace("rgb(","rgba(").replace(")",", 0.5)"));function g9(e){return iI[e%iI.length]}function v9(e){return PO[e%PO.length]}function _de(e,t){return e.borderColor=g9(t),e.backgroundColor=v9(t),++t}function yde(e,t){return e.backgroundColor=e.data.map(()=>g9(t++)),t}function bde(e,t){return e.backgroundColor=e.data.map(()=>v9(t++)),t}function xde(e){let t=0;return(n,i)=>{const r=e.getDatasetMeta(i).controller;r instanceof QP?t=yde(n,t):r instanceof i9?t=bde(n,t):r&&(t=_de(n,t))}}function MO(e){let t;for(t in e)if(e[t].borderColor||e[t].backgroundColor)return!0;return!1}function wde(e){return e&&(e.borderColor||e.backgroundColor)}function Tde(){return ds.borderColor!=="rgba(0,0,0,0.1)"||ds.backgroundColor!=="rgba(0,0,0,0.1)"}var Sde={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(e,t,n){if(!n.enabled)return;const{data:{datasets:i},options:r}=e.config,{elements:a}=r,l=MO(i)||wde(r)||a&&MO(a)||Tde();if(!n.forceOverride&&l)return;const h=xde(e);i.forEach(h)}};function Ede(e,t,n,i,r){const a=r.samples||i;if(a>=n)return e.slice(t,t+n);const l=[],h=(n-2)/(a-2);let s=0;const p=t+n-1;let _=t,x,T,k,A,M;for(l[s++]=e[_],x=0;x<a-2;x++){let R=0,F=0,z;const G=Math.floor((x+1)*h)+1+t,Y=Math.min(Math.floor((x+2)*h)+1,n)+t,J=Y-G;for(z=G;z<Y;z++)R+=e[z].x,F+=e[z].y;R/=J,F/=J;const re=Math.floor(x*h)+1+t,X=Math.min(Math.floor((x+1)*h)+1,n)+t,{x:U,y:H}=e[_];for(k=A=-1,z=re;z<X;z++)A=.5*Math.abs((U-R)*(e[z].y-H)-(U-e[z].x)*(F-H)),A>k&&(k=A,T=e[z],M=z);l[s++]=T,_=M}return l[s++]=e[p],l}function Cde(e,t,n,i){let r=0,a=0,l,h,s,p,_,x,T,k,A,M;const R=[],F=t+n-1,z=e[t].x,Y=e[F].x-z;for(l=t;l<t+n;++l){h=e[l],s=(h.x-z)/Y*i,p=h.y;const J=s|0;if(J===_)p<A?(A=p,x=l):p>M&&(M=p,T=l),r=(a*r+h.x)/++a;else{const re=l-1;if(!Bi(x)&&!Bi(T)){const X=Math.min(x,T),U=Math.max(x,T);X!==k&&X!==re&&R.push({...e[X],x:r}),U!==k&&U!==re&&R.push({...e[U],x:r})}l>0&&re!==k&&R.push(e[re]),R.push(h),_=J,a=0,A=M=p,x=T=k=l}}return R}function _9(e){if(e._decimated){const t=e._data;delete e._decimated,delete e._data,Object.defineProperty(e,"data",{configurable:!0,enumerable:!0,writable:!0,value:t})}}function DO(e){e.data.datasets.forEach(t=>{_9(t)})}function kde(e,t){const n=t.length;let i=0,r;const{iScale:a}=e,{min:l,max:h,minDefined:s,maxDefined:p}=a.getUserBounds();return s&&(i=Fo(uh(t,a.axis,l).lo,0,n-1)),p?r=Fo(uh(t,a.axis,h).hi+1,i,n)-i:r=n-i,{start:i,count:r}}var Ide={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(e,t,n)=>{if(!n.enabled){DO(e);return}const i=e.width;e.data.datasets.forEach((r,a)=>{const{_data:l,indexAxis:h}=r,s=e.getDatasetMeta(a),p=l||r.data;if(Hy([h,e.options.indexAxis])==="y"||!s.controller.supportsDecimation)return;const _=e.scales[s.xAxisID];if(_.type!=="linear"&&_.type!=="time"||e.options.parsing)return;let{start:x,count:T}=kde(s,p);const k=n.threshold||4*i;if(T<=k){_9(r);return}Bi(l)&&(r._data=p,delete r.data,Object.defineProperty(r,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(M){this._data=M}}));let A;switch(n.algorithm){case"lttb":A=Ede(p,x,T,i,n);break;case"min-max":A=Cde(p,x,T,i);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}r._decimated=A})},destroy(e){DO(e)}};function Ade(e,t,n){const i=e.segments,r=e.points,a=t.points,l=[];for(const h of i){let{start:s,end:p}=h;p=XT(s,p,r);const _=rI(n,r[s],r[p],h.loop);if(!t.segments){l.push({source:h,target:_,start:r[s],end:r[p]});continue}const x=J8(t,_);for(const T of x){const k=rI(n,a[T.start],a[T.end],T.loop),A=Z8(h,r,k);for(const M of A)l.push({source:M,target:T,start:{[n]:LO(_,k,"start",Math.max)},end:{[n]:LO(_,k,"end",Math.min)}})}}return l}function rI(e,t,n,i){if(i)return;let r=t[e],a=n[e];return e==="angle"&&(r=La(r),a=La(a)),{property:e,start:r,end:a}}function Pde(e,t){const{x:n=null,y:i=null}=e||{},r=t.points,a=[];return t.segments.forEach(({start:l,end:h})=>{h=XT(l,h,r);const s=r[l],p=r[h];i!==null?(a.push({x:s.x,y:i}),a.push({x:p.x,y:i})):n!==null&&(a.push({x:n,y:s.y}),a.push({x:n,y:p.y}))}),a}function XT(e,t,n){for(;t>e;t--){const i=n[t];if(!isNaN(i.x)&&!isNaN(i.y))break}return t}function LO(e,t,n,i){return e&&t?i(e[n],t[n]):e?e[n]:t?t[n]:0}function y9(e,t){let n=[],i=!1;return us(e)?(i=!0,n=e):n=Pde(e,t),n.length?new KT({points:n,options:{tension:0},_loop:i,_fullLoop:i}):null}function RO(e){return e&&e.fill!==!1}function Mde(e,t,n){let r=e[t].fill;const a=[t];let l;if(!n)return r;for(;r!==!1&&a.indexOf(r)===-1;){if(!Os(r))return r;if(l=e[r],!l)return!1;if(l.visible)return r;a.push(r),r=l.fill}return!1}function Dde(e,t,n){const i=Vde(e);if($i(i))return isNaN(i.value)?!1:i;let r=parseFloat(i);return Os(r)&&Math.floor(r)===r?Lde(i[0],t,r,n):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function Lde(e,t,n,i){return(e==="-"||e==="+")&&(n=t+n),n===t||n<0||n>=i?!1:n}function Rde(e,t){let n=null;return e==="start"?n=t.bottom:e==="end"?n=t.top:$i(e)?n=t.getPixelForValue(e.value):t.getBasePixel&&(n=t.getBasePixel()),n}function Ode(e,t,n){let i;return e==="start"?i=n:e==="end"?i=t.options.reverse?t.min:t.max:$i(e)?i=e.value:i=t.getBaseValue(),i}function Vde(e){const t=e.options,n=t.fill;let i=wi(n&&n.target,n);return i===void 0&&(i=!!t.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function Bde(e){const{scale:t,index:n,line:i}=e,r=[],a=i.segments,l=i.points,h=Fde(t,n);h.push(y9({x:null,y:t.bottom},i));for(let s=0;s<a.length;s++){const p=a[s];for(let _=p.start;_<=p.end;_++)zde(r,l[_],h)}return new KT({points:r,options:{}})}function Fde(e,t){const n=[],i=e.getMatchingVisibleMetas("line");for(let r=0;r<i.length;r++){const a=i[r];if(a.index===t)break;a.hidden||n.unshift(a.dataset)}return n}function zde(e,t,n){const i=[];for(let r=0;r<n.length;r++){const a=n[r],{first:l,last:h,point:s}=Nde(a,t,"x");if(!(!s||l&&h)){if(l)i.unshift(s);else if(e.push(s),!h)break}}e.push(...i)}function Nde(e,t,n){const i=e.interpolate(t,n);if(!i)return{};const r=i[n],a=e.segments,l=e.points;let h=!1,s=!1;for(let p=0;p<a.length;p++){const _=a[p],x=l[_.start][n],T=l[_.end][n];if(ch(r,x,T)){h=r===x,s=r===T;break}}return{first:h,last:s,point:i}}class b9{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,n,i){const{x:r,y:a,radius:l}=this;return n=n||{start:0,end:Qr},t.arc(r,a,l,n.end,n.start,!0),!i.bounds}interpolate(t){const{x:n,y:i,radius:r}=this,a=t.angle;return{x:n+Math.cos(a)*r,y:i+Math.sin(a)*r,angle:a}}}function $de(e){const{chart:t,fill:n,line:i}=e;if(Os(n))return Ude(t,n);if(n==="stack")return Bde(e);if(n==="shape")return!0;const r=jde(e);return r instanceof b9?r:y9(r,i)}function Ude(e,t){const n=e.getDatasetMeta(t);return n&&e.isDatasetVisible(t)?n.dataset:null}function jde(e){return(e.scale||{}).getPointPositionForValue?Hde(e):Wde(e)}function Wde(e){const{scale:t={},fill:n}=e,i=Rde(n,t);if(Os(i)){const r=t.isHorizontal();return{x:r?i:null,y:r?null:i}}return null}function Hde(e){const{scale:t,fill:n}=e,i=t.options,r=t.getLabels().length,a=i.reverse?t.max:t.min,l=Ode(n,t,a),h=[];if(i.grid.circular){const s=t.getPointPositionForValue(0,a);return new b9({x:s.x,y:s.y,radius:t.getDistanceFromCenterForValue(l)})}for(let s=0;s<r;++s)h.push(t.getPointPositionForValue(s,l));return h}function kC(e,t,n){const i=$de(t),{chart:r,index:a,line:l,scale:h,axis:s}=t,p=l.options,_=p.fill,x=p.backgroundColor,{above:T=x,below:k=x}=_||{},A=r.getDatasetMeta(a),M=Q8(r,A);i&&l.points.length&&(WT(e,n),Gde(e,{line:l,target:i,above:T,below:k,area:n,scale:h,axis:s,clip:M}),HT(e))}function Gde(e,t){const{line:n,target:i,above:r,below:a,area:l,scale:h,clip:s}=t,p=n._loop?"angle":t.axis;e.save();let _=a;a!==r&&(p==="x"?(OO(e,i,l.top),IC(e,{line:n,target:i,color:r,scale:h,property:p,clip:s}),e.restore(),e.save(),OO(e,i,l.bottom)):p==="y"&&(VO(e,i,l.left),IC(e,{line:n,target:i,color:a,scale:h,property:p,clip:s}),e.restore(),e.save(),VO(e,i,l.right),_=r)),IC(e,{line:n,target:i,color:_,scale:h,property:p,clip:s}),e.restore()}function OO(e,t,n){const{segments:i,points:r}=t;let a=!0,l=!1;e.beginPath();for(const h of i){const{start:s,end:p}=h,_=r[s],x=r[XT(s,p,r)];a?(e.moveTo(_.x,_.y),a=!1):(e.lineTo(_.x,n),e.lineTo(_.x,_.y)),l=!!t.pathSegment(e,h,{move:l}),l?e.closePath():e.lineTo(x.x,n)}e.lineTo(t.first().x,n),e.closePath(),e.clip()}function VO(e,t,n){const{segments:i,points:r}=t;let a=!0,l=!1;e.beginPath();for(const h of i){const{start:s,end:p}=h,_=r[s],x=r[XT(s,p,r)];a?(e.moveTo(_.x,_.y),a=!1):(e.lineTo(n,_.y),e.lineTo(_.x,_.y)),l=!!t.pathSegment(e,h,{move:l}),l?e.closePath():e.lineTo(n,x.y)}e.lineTo(n,t.first().y),e.closePath(),e.clip()}function IC(e,t){const{line:n,target:i,property:r,color:a,scale:l,clip:h}=t,s=Ade(n,i,r);for(const{source:p,target:_,start:x,end:T}of s){const{style:{backgroundColor:k=a}={}}=p,A=i!==!0;e.save(),e.fillStyle=k,qde(e,l,h,A&&rI(r,x,T)),e.beginPath();const M=!!n.pathSegment(e,p);let R;if(A){M?e.closePath():BO(e,i,T,r);const F=!!i.pathSegment(e,_,{move:M,reverse:!0});R=M&&F,R||BO(e,i,x,r)}e.closePath(),e.fill(R?"evenodd":"nonzero"),e.restore()}}function qde(e,t,n,i){const r=t.chart.chartArea,{property:a,start:l,end:h}=i||{};if(a==="x"||a==="y"){let s,p,_,x;a==="x"?(s=l,p=r.top,_=h,x=r.bottom):(s=r.left,p=l,_=r.right,x=h),e.beginPath(),n&&(s=Math.max(s,n.left),_=Math.min(_,n.right),p=Math.max(p,n.top),x=Math.min(x,n.bottom)),e.rect(s,p,_-s,x-p),e.clip()}}function BO(e,t,n,i){const r=t.interpolate(n,i);r&&e.lineTo(r.x,r.y)}var Kde={id:"filler",afterDatasetsUpdate(e,t,n){const i=(e.data.datasets||[]).length,r=[];let a,l,h,s;for(l=0;l<i;++l)a=e.getDatasetMeta(l),h=a.dataset,s=null,h&&h.options&&h instanceof KT&&(s={visible:e.isDatasetVisible(l),index:l,fill:Dde(h,l,i),chart:e,axis:a.controller.options.indexAxis,scale:a.vScale,line:h}),a.$filler=s,r.push(s);for(l=0;l<i;++l)s=r[l],!(!s||s.fill===!1)&&(s.fill=Mde(r,l,n.propagate))},beforeDraw(e,t,n){const i=n.drawTime==="beforeDraw",r=e.getSortedVisibleDatasetMetas(),a=e.chartArea;for(let l=r.length-1;l>=0;--l){const h=r[l].$filler;h&&(h.line.updateControlPoints(a,h.axis),i&&h.fill&&kC(e.ctx,h,a))}},beforeDatasetsDraw(e,t,n){if(n.drawTime!=="beforeDatasetsDraw")return;const i=e.getSortedVisibleDatasetMetas();for(let r=i.length-1;r>=0;--r){const a=i[r].$filler;RO(a)&&kC(e.ctx,a,e.chartArea)}},beforeDatasetDraw(e,t,n){const i=t.meta.$filler;!RO(i)||n.drawTime!=="beforeDatasetDraw"||kC(e.ctx,i,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const FO=(e,t)=>{let{boxHeight:n=t,boxWidth:i=t}=e;return e.usePointStyle&&(n=Math.min(n,t),i=e.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(t,n)}},Xde=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class zO extends Lh{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n,i){this.maxWidth=t,this.maxHeight=n,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let n=Kr(t.generateLabels,[this.chart],this)||[];t.filter&&(n=n.filter(i=>t.filter(i,this.chart.data))),t.sort&&(n=n.sort((i,r)=>t.sort(i,r,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:t,ctx:n}=this;if(!t.display){this.width=this.height=0;return}const i=t.labels,r=_o(i.font),a=r.size,l=this._computeTitleHeight(),{boxWidth:h,itemHeight:s}=FO(i,a);let p,_;n.font=r.string,this.isHorizontal()?(p=this.maxWidth,_=this._fitRows(l,a,h,s)+10):(_=this.maxHeight,p=this._fitCols(l,r,h,s)+10),this.width=Math.min(p,t.maxWidth||this.maxWidth),this.height=Math.min(_,t.maxHeight||this.maxHeight)}_fitRows(t,n,i,r){const{ctx:a,maxWidth:l,options:{labels:{padding:h}}}=this,s=this.legendHitBoxes=[],p=this.lineWidths=[0],_=r+h;let x=t;a.textAlign="left",a.textBaseline="middle";let T=-1,k=-_;return this.legendItems.forEach((A,M)=>{const R=i+n/2+a.measureText(A.text).width;(M===0||p[p.length-1]+R+2*h>l)&&(x+=_,p[p.length-(M>0?0:1)]=0,k+=_,T++),s[M]={left:0,top:k,row:T,width:R,height:r},p[p.length-1]+=R+h}),x}_fitCols(t,n,i,r){const{ctx:a,maxHeight:l,options:{labels:{padding:h}}}=this,s=this.legendHitBoxes=[],p=this.columnSizes=[],_=l-t;let x=h,T=0,k=0,A=0,M=0;return this.legendItems.forEach((R,F)=>{const{itemWidth:z,itemHeight:G}=Yde(i,n,a,R,r);F>0&&k+G+2*h>_&&(x+=T+h,p.push({width:T,height:k}),A+=T+h,M++,T=k=0),s[F]={left:A,top:k,col:M,width:z,height:G},T=Math.max(T,z),k+=G+h}),x+=T,p.push({width:T,height:k}),x}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:i,labels:{padding:r},rtl:a}}=this,l=Bv(a,this.left,this.width);if(this.isHorizontal()){let h=0,s=Pa(i,this.left+r,this.right-this.lineWidths[h]);for(const p of n)h!==p.row&&(h=p.row,s=Pa(i,this.left+r,this.right-this.lineWidths[h])),p.top+=this.top+t+r,p.left=l.leftForLtr(l.x(s),p.width),s+=p.width+r}else{let h=0,s=Pa(i,this.top+t+r,this.bottom-this.columnSizes[h].height);for(const p of n)p.col!==h&&(h=p.col,s=Pa(i,this.top+t+r,this.bottom-this.columnSizes[h].height)),p.top=s,p.left+=this.left+r,p.left=l.leftForLtr(l.x(p.left),p.width),s+=p.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;WT(t,this),this._draw(),HT(t)}}_draw(){const{options:t,columnSizes:n,lineWidths:i,ctx:r}=this,{align:a,labels:l}=t,h=ds.color,s=Bv(t.rtl,this.left,this.width),p=_o(l.font),{padding:_}=l,x=p.size,T=x/2;let k;this.drawTitle(),r.textAlign=s.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=p.string;const{boxWidth:A,boxHeight:M,itemHeight:R}=FO(l,x),F=function(re,X,U){if(isNaN(A)||A<=0||isNaN(M)||M<0)return;r.save();const H=wi(U.lineWidth,1);if(r.fillStyle=wi(U.fillStyle,h),r.lineCap=wi(U.lineCap,"butt"),r.lineDashOffset=wi(U.lineDashOffset,0),r.lineJoin=wi(U.lineJoin,"miter"),r.lineWidth=H,r.strokeStyle=wi(U.strokeStyle,h),r.setLineDash(wi(U.lineDash,[])),l.usePointStyle){const W={radius:M*Math.SQRT2/2,pointStyle:U.pointStyle,rotation:U.rotation,borderWidth:H},ie=s.xPlus(re,A/2),Q=X+T;N8(r,W,ie,Q,l.pointStyleWidth&&A)}else{const W=X+Math.max((x-M)/2,0),ie=s.leftForLtr(re,A),Q=Lp(U.borderRadius);r.beginPath(),Object.values(Q).some(te=>te!==0)?rb(r,{x:ie,y:W,w:A,h:M,radius:Q}):r.rect(ie,W,A,M),r.fill(),H!==0&&r.stroke()}r.restore()},z=function(re,X,U){qp(r,U.text,re,X+R/2,p,{strikethrough:U.hidden,textAlign:s.textAlign(U.textAlign)})},G=this.isHorizontal(),Y=this._computeTitleHeight();G?k={x:Pa(a,this.left+_,this.right-i[0]),y:this.top+_+Y,line:0}:k={x:this.left+_,y:Pa(a,this.top+Y+_,this.bottom-n[0].height),line:0},K8(this.ctx,t.textDirection);const J=R+_;this.legendItems.forEach((re,X)=>{r.strokeStyle=re.fontColor,r.fillStyle=re.fontColor;const U=r.measureText(re.text).width,H=s.textAlign(re.textAlign||(re.textAlign=l.textAlign)),W=A+T+U;let ie=k.x,Q=k.y;s.setWidth(this.width),G?X>0&&ie+W+_>this.right&&(Q=k.y+=J,k.line++,ie=k.x=Pa(a,this.left+_,this.right-i[k.line])):X>0&&Q+J>this.bottom&&(ie=k.x=ie+n[k.line].width+_,k.line++,Q=k.y=Pa(a,this.top+Y+_,this.bottom-n[k.line].height));const te=s.x(ie);if(F(te,Q,re),ie=ole(H,ie+A+T,G?ie+W:this.right,t.rtl),z(s.x(ie),Q,re),G)k.x+=W+_;else if(typeof re.text!="string"){const ke=p.lineHeight;k.y+=x9(re,ke)+_}else k.y+=J}),X8(this.ctx,t.textDirection)}drawTitle(){const t=this.options,n=t.title,i=_o(n.font),r=Ga(n.padding);if(!n.display)return;const a=Bv(t.rtl,this.left,this.width),l=this.ctx,h=n.position,s=i.size/2,p=r.top+s;let _,x=this.left,T=this.width;if(this.isHorizontal())T=Math.max(...this.lineWidths),_=this.top+p,x=Pa(t.align,x,this.right-T);else{const A=this.columnSizes.reduce((M,R)=>Math.max(M,R.height),0);_=p+Pa(t.align,this.top,this.bottom-A-t.labels.padding-this._computeTitleHeight())}const k=Pa(h,x,x+T);l.textAlign=a.textAlign(HP(h)),l.textBaseline="middle",l.strokeStyle=n.color,l.fillStyle=n.color,l.font=i.string,qp(l,n.text,k,_,i)}_computeTitleHeight(){const t=this.options.title,n=_o(t.font),i=Ga(t.padding);return t.display?n.lineHeight+i.height:0}_getLegendItemAt(t,n){let i,r,a;if(ch(t,this.left,this.right)&&ch(n,this.top,this.bottom)){for(a=this.legendHitBoxes,i=0;i<a.length;++i)if(r=a[i],ch(t,r.left,r.left+r.width)&&ch(n,r.top,r.top+r.height))return this.legendItems[i]}return null}handleEvent(t){const n=this.options;if(!Qde(t.type,n))return;const i=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const r=this._hoveredItem,a=Xde(r,i);r&&!a&&Kr(n.onLeave,[t,r,this],this),this._hoveredItem=i,i&&!a&&Kr(n.onHover,[t,i,this],this)}else i&&Kr(n.onClick,[t,i,this],this)}}function Yde(e,t,n,i,r){const a=Zde(i,e,t,n),l=Jde(r,i,t.lineHeight);return{itemWidth:a,itemHeight:l}}function Zde(e,t,n,i){let r=e.text;return r&&typeof r!="string"&&(r=r.reduce((a,l)=>a.length>l.length?a:l)),t+n.size/2+i.measureText(r).width}function Jde(e,t,n){let i=e;return typeof t.text!="string"&&(i=x9(t,n)),i}function x9(e,t){const n=e.text?e.text.length:0;return t*n}function Qde(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var ehe={id:"legend",_element:zO,start(e,t,n){const i=e.legend=new zO({ctx:e.ctx,options:n,chart:e});$a.configure(e,i,n),$a.addBox(e,i)},stop(e){$a.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const i=e.legend;$a.configure(e,i,n),i.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const i=t.datasetIndex,r=n.chart;r.isDatasetVisible(i)?(r.hide(i),t.hidden=!0):(r.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:r,color:a,useBorderRadius:l,borderRadius:h}}=e.legend.options;return e._getSortedDatasetMetas().map(s=>{const p=s.controller.getStyle(n?0:void 0),_=Ga(p.borderWidth);return{text:t[s.index].label,fillStyle:p.backgroundColor,fontColor:a,hidden:!s.visible,lineCap:p.borderCapStyle,lineDash:p.borderDash,lineDashOffset:p.borderDashOffset,lineJoin:p.borderJoinStyle,lineWidth:(_.width+_.height)/4,strokeStyle:p.borderColor,pointStyle:i||p.pointStyle,rotation:p.rotation,textAlign:r||p.textAlign,borderRadius:l&&(h||p.borderRadius),datasetIndex:s.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class nM extends Lh{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=n;const r=us(i.text)?i.text.length:1;this._padding=Ga(i.padding);const a=r*_o(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=a:this.width=a}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:n,left:i,bottom:r,right:a,options:l}=this,h=l.align;let s=0,p,_,x;return this.isHorizontal()?(_=Pa(h,i,a),x=n+t,p=a-i):(l.position==="left"?(_=i+t,x=Pa(h,r,n),s=dr*-.5):(_=a-t,x=Pa(h,n,r),s=dr*.5),p=r-n),{titleX:_,titleY:x,maxWidth:p,rotation:s}}draw(){const t=this.ctx,n=this.options;if(!n.display)return;const i=_o(n.font),a=i.lineHeight/2+this._padding.top,{titleX:l,titleY:h,maxWidth:s,rotation:p}=this._drawArgs(a);qp(t,n.text,0,0,i,{color:n.color,maxWidth:s,rotation:p,textAlign:HP(n.align),textBaseline:"middle",translation:[l,h]})}}function the(e,t){const n=new nM({ctx:e.ctx,options:t,chart:e});$a.configure(e,n,t),$a.addBox(e,n),e.titleBlock=n}var nhe={id:"title",_element:nM,start(e,t,n){the(e,n)},stop(e){const t=e.titleBlock;$a.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const i=e.titleBlock;$a.configure(e,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const s1=new WeakMap;var ihe={id:"subtitle",start(e,t,n){const i=new nM({ctx:e.ctx,options:n,chart:e});$a.configure(e,i,n),$a.addBox(e,i),s1.set(e,i)},stop(e){$a.removeBox(e,s1.get(e)),s1.delete(e)},beforeUpdate(e,t,n){const i=s1.get(e);$a.configure(e,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const qy={average(e){if(!e.length)return!1;let t,n,i=new Set,r=0,a=0;for(t=0,n=e.length;t<n;++t){const h=e[t].element;if(h&&h.hasValue()){const s=h.tooltipPosition();i.add(s.x),r+=s.y,++a}}return a===0||i.size===0?!1:{x:[...i].reduce((h,s)=>h+s)/i.size,y:r/a}},nearest(e,t){if(!e.length)return!1;let n=t.x,i=t.y,r=Number.POSITIVE_INFINITY,a,l,h;for(a=0,l=e.length;a<l;++a){const s=e[a].element;if(s&&s.hasValue()){const p=s.getCenterPoint(),_=Zk(t,p);_<r&&(r=_,h=s)}}if(h){const s=h.tooltipPosition();n=s.x,i=s.y}return{x:n,y:i}}};function $u(e,t){return t&&(us(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function Yd(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function rhe(e,t){const{element:n,datasetIndex:i,index:r}=t,a=e.getDatasetMeta(i).controller,{label:l,value:h}=a.getLabelAndValue(r);return{chart:e,label:l,parsed:a.getParsed(r),raw:e.data.datasets[i].data[r],formattedValue:h,dataset:a.getDataset(),dataIndex:r,datasetIndex:i,element:n}}function NO(e,t){const n=e.chart.ctx,{body:i,footer:r,title:a}=e,{boxWidth:l,boxHeight:h}=t,s=_o(t.bodyFont),p=_o(t.titleFont),_=_o(t.footerFont),x=a.length,T=r.length,k=i.length,A=Ga(t.padding);let M=A.height,R=0,F=i.reduce((Y,J)=>Y+J.before.length+J.lines.length+J.after.length,0);if(F+=e.beforeBody.length+e.afterBody.length,x&&(M+=x*p.lineHeight+(x-1)*t.titleSpacing+t.titleMarginBottom),F){const Y=t.displayColors?Math.max(h,s.lineHeight):s.lineHeight;M+=k*Y+(F-k)*s.lineHeight+(F-1)*t.bodySpacing}T&&(M+=t.footerMarginTop+T*_.lineHeight+(T-1)*t.footerSpacing);let z=0;const G=function(Y){R=Math.max(R,n.measureText(Y).width+z)};return n.save(),n.font=p.string,Ar(e.title,G),n.font=s.string,Ar(e.beforeBody.concat(e.afterBody),G),z=t.displayColors?l+2+t.boxPadding:0,Ar(i,Y=>{Ar(Y.before,G),Ar(Y.lines,G),Ar(Y.after,G)}),z=0,n.font=_.string,Ar(e.footer,G),n.restore(),R+=A.width,{width:R,height:M}}function she(e,t){const{y:n,height:i}=t;return n<i/2?"top":n>e.height-i/2?"bottom":"center"}function ohe(e,t,n,i){const{x:r,width:a}=i,l=n.caretSize+n.caretPadding;if(e==="left"&&r+a+l>t.width||e==="right"&&r-a-l<0)return!0}function ahe(e,t,n,i){const{x:r,width:a}=n,{width:l,chartArea:{left:h,right:s}}=e;let p="center";return i==="center"?p=r<=(h+s)/2?"left":"right":r<=a/2?p="left":r>=l-a/2&&(p="right"),ohe(p,e,t,n)&&(p="center"),p}function $O(e,t,n){const i=n.yAlign||t.yAlign||she(e,n);return{xAlign:n.xAlign||t.xAlign||ahe(e,t,n,i),yAlign:i}}function lhe(e,t){let{x:n,width:i}=e;return t==="right"?n-=i:t==="center"&&(n-=i/2),n}function che(e,t,n){let{y:i,height:r}=e;return t==="top"?i+=n:t==="bottom"?i-=r+n:i-=r/2,i}function UO(e,t,n,i){const{caretSize:r,caretPadding:a,cornerRadius:l}=e,{xAlign:h,yAlign:s}=n,p=r+a,{topLeft:_,topRight:x,bottomLeft:T,bottomRight:k}=Lp(l);let A=lhe(t,h);const M=che(t,s,p);return s==="center"?h==="left"?A+=p:h==="right"&&(A-=p):h==="left"?A-=Math.max(_,T)+r:h==="right"&&(A+=Math.max(x,k)+r),{x:Fo(A,0,i.width-t.width),y:Fo(M,0,i.height-t.height)}}function o1(e,t,n){const i=Ga(n.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-i.right:e.x+i.left}function jO(e){return $u([],Yd(e))}function uhe(e,t,n){return mm(e,{tooltip:t,tooltipItems:n,type:"tooltip"})}function WO(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const w9={beforeTitle:Kd,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,i=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return n[t.dataIndex]}return""},afterTitle:Kd,beforeBody:Kd,beforeLabel:Kd,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return Bi(n)||(t+=n),t},labelColor(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Kd,afterBody:Kd,beforeFooter:Kd,footer:Kd,afterFooter:Kd};function Cl(e,t,n,i){const r=e[t].call(n,i);return typeof r>"u"?w9[t].call(n,i):r}let HO=class extends Lh{static positioners=qy;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const n=this.chart,i=this.options.setContext(this.getContext()),r=i.enabled&&n.options.animation&&i.animations,a=new e9(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(a)),a}getContext(){return this.$context||(this.$context=uhe(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,n){const{callbacks:i}=n,r=Cl(i,"beforeTitle",this,t),a=Cl(i,"title",this,t),l=Cl(i,"afterTitle",this,t);let h=[];return h=$u(h,Yd(r)),h=$u(h,Yd(a)),h=$u(h,Yd(l)),h}getBeforeBody(t,n){return jO(Cl(n.callbacks,"beforeBody",this,t))}getBody(t,n){const{callbacks:i}=n,r=[];return Ar(t,a=>{const l={before:[],lines:[],after:[]},h=WO(i,a);$u(l.before,Yd(Cl(h,"beforeLabel",this,a))),$u(l.lines,Cl(h,"label",this,a)),$u(l.after,Yd(Cl(h,"afterLabel",this,a))),r.push(l)}),r}getAfterBody(t,n){return jO(Cl(n.callbacks,"afterBody",this,t))}getFooter(t,n){const{callbacks:i}=n,r=Cl(i,"beforeFooter",this,t),a=Cl(i,"footer",this,t),l=Cl(i,"afterFooter",this,t);let h=[];return h=$u(h,Yd(r)),h=$u(h,Yd(a)),h=$u(h,Yd(l)),h}_createItems(t){const n=this._active,i=this.chart.data,r=[],a=[],l=[];let h=[],s,p;for(s=0,p=n.length;s<p;++s)h.push(rhe(this.chart,n[s]));return t.filter&&(h=h.filter((_,x,T)=>t.filter(_,x,T,i))),t.itemSort&&(h=h.sort((_,x)=>t.itemSort(_,x,i))),Ar(h,_=>{const x=WO(t.callbacks,_);r.push(Cl(x,"labelColor",this,_)),a.push(Cl(x,"labelPointStyle",this,_)),l.push(Cl(x,"labelTextColor",this,_))}),this.labelColors=r,this.labelPointStyles=a,this.labelTextColors=l,this.dataPoints=h,h}update(t,n){const i=this.options.setContext(this.getContext()),r=this._active;let a,l=[];if(!r.length)this.opacity!==0&&(a={opacity:0});else{const h=qy[i.position].call(this,r,this._eventPosition);l=this._createItems(i),this.title=this.getTitle(l,i),this.beforeBody=this.getBeforeBody(l,i),this.body=this.getBody(l,i),this.afterBody=this.getAfterBody(l,i),this.footer=this.getFooter(l,i);const s=this._size=NO(this,i),p=Object.assign({},h,s),_=$O(this.chart,i,p),x=UO(i,p,_,this.chart);this.xAlign=_.xAlign,this.yAlign=_.yAlign,a={opacity:1,x:x.x,y:x.y,width:s.width,height:s.height,caretX:h.x,caretY:h.y}}this._tooltipItems=l,this.$context=void 0,a&&this._resolveAnimations().update(this,a),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(t,n,i,r){const a=this.getCaretPosition(t,i,r);n.lineTo(a.x1,a.y1),n.lineTo(a.x2,a.y2),n.lineTo(a.x3,a.y3)}getCaretPosition(t,n,i){const{xAlign:r,yAlign:a}=this,{caretSize:l,cornerRadius:h}=i,{topLeft:s,topRight:p,bottomLeft:_,bottomRight:x}=Lp(h),{x:T,y:k}=t,{width:A,height:M}=n;let R,F,z,G,Y,J;return a==="center"?(Y=k+M/2,r==="left"?(R=T,F=R-l,G=Y+l,J=Y-l):(R=T+A,F=R+l,G=Y-l,J=Y+l),z=R):(r==="left"?F=T+Math.max(s,_)+l:r==="right"?F=T+A-Math.max(p,x)-l:F=this.caretX,a==="top"?(G=k,Y=G-l,R=F-l,z=F+l):(G=k+M,Y=G+l,R=F+l,z=F-l),J=G),{x1:R,x2:F,x3:z,y1:G,y2:Y,y3:J}}drawTitle(t,n,i){const r=this.title,a=r.length;let l,h,s;if(a){const p=Bv(i.rtl,this.x,this.width);for(t.x=o1(this,i.titleAlign,i),n.textAlign=p.textAlign(i.titleAlign),n.textBaseline="middle",l=_o(i.titleFont),h=i.titleSpacing,n.fillStyle=i.titleColor,n.font=l.string,s=0;s<a;++s)n.fillText(r[s],p.x(t.x),t.y+l.lineHeight/2),t.y+=l.lineHeight+h,s+1===a&&(t.y+=i.titleMarginBottom-h)}}_drawColorBox(t,n,i,r,a){const l=this.labelColors[i],h=this.labelPointStyles[i],{boxHeight:s,boxWidth:p}=a,_=_o(a.bodyFont),x=o1(this,"left",a),T=r.x(x),k=s<_.lineHeight?(_.lineHeight-s)/2:0,A=n.y+k;if(a.usePointStyle){const M={radius:Math.min(p,s)/2,pointStyle:h.pointStyle,rotation:h.rotation,borderWidth:1},R=r.leftForLtr(T,p)+p/2,F=A+s/2;t.strokeStyle=a.multiKeyBackground,t.fillStyle=a.multiKeyBackground,Qk(t,M,R,F),t.strokeStyle=l.borderColor,t.fillStyle=l.backgroundColor,Qk(t,M,R,F)}else{t.lineWidth=$i(l.borderWidth)?Math.max(...Object.values(l.borderWidth)):l.borderWidth||1,t.strokeStyle=l.borderColor,t.setLineDash(l.borderDash||[]),t.lineDashOffset=l.borderDashOffset||0;const M=r.leftForLtr(T,p),R=r.leftForLtr(r.xPlus(T,1),p-2),F=Lp(l.borderRadius);Object.values(F).some(z=>z!==0)?(t.beginPath(),t.fillStyle=a.multiKeyBackground,rb(t,{x:M,y:A,w:p,h:s,radius:F}),t.fill(),t.stroke(),t.fillStyle=l.backgroundColor,t.beginPath(),rb(t,{x:R,y:A+1,w:p-2,h:s-2,radius:F}),t.fill()):(t.fillStyle=a.multiKeyBackground,t.fillRect(M,A,p,s),t.strokeRect(M,A,p,s),t.fillStyle=l.backgroundColor,t.fillRect(R,A+1,p-2,s-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,n,i){const{body:r}=this,{bodySpacing:a,bodyAlign:l,displayColors:h,boxHeight:s,boxWidth:p,boxPadding:_}=i,x=_o(i.bodyFont);let T=x.lineHeight,k=0;const A=Bv(i.rtl,this.x,this.width),M=function(U){n.fillText(U,A.x(t.x+k),t.y+T/2),t.y+=T+a},R=A.textAlign(l);let F,z,G,Y,J,re,X;for(n.textAlign=l,n.textBaseline="middle",n.font=x.string,t.x=o1(this,R,i),n.fillStyle=i.bodyColor,Ar(this.beforeBody,M),k=h&&R!=="right"?l==="center"?p/2+_:p+2+_:0,Y=0,re=r.length;Y<re;++Y){for(F=r[Y],z=this.labelTextColors[Y],n.fillStyle=z,Ar(F.before,M),G=F.lines,h&&G.length&&(this._drawColorBox(n,t,Y,A,i),T=Math.max(x.lineHeight,s)),J=0,X=G.length;J<X;++J)M(G[J]),T=x.lineHeight;Ar(F.after,M)}k=0,T=x.lineHeight,Ar(this.afterBody,M),t.y-=a}drawFooter(t,n,i){const r=this.footer,a=r.length;let l,h;if(a){const s=Bv(i.rtl,this.x,this.width);for(t.x=o1(this,i.footerAlign,i),t.y+=i.footerMarginTop,n.textAlign=s.textAlign(i.footerAlign),n.textBaseline="middle",l=_o(i.footerFont),n.fillStyle=i.footerColor,n.font=l.string,h=0;h<a;++h)n.fillText(r[h],s.x(t.x),t.y+l.lineHeight/2),t.y+=l.lineHeight+i.footerSpacing}}drawBackground(t,n,i,r){const{xAlign:a,yAlign:l}=this,{x:h,y:s}=t,{width:p,height:_}=i,{topLeft:x,topRight:T,bottomLeft:k,bottomRight:A}=Lp(r.cornerRadius);n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.beginPath(),n.moveTo(h+x,s),l==="top"&&this.drawCaret(t,n,i,r),n.lineTo(h+p-T,s),n.quadraticCurveTo(h+p,s,h+p,s+T),l==="center"&&a==="right"&&this.drawCaret(t,n,i,r),n.lineTo(h+p,s+_-A),n.quadraticCurveTo(h+p,s+_,h+p-A,s+_),l==="bottom"&&this.drawCaret(t,n,i,r),n.lineTo(h+k,s+_),n.quadraticCurveTo(h,s+_,h,s+_-k),l==="center"&&a==="left"&&this.drawCaret(t,n,i,r),n.lineTo(h,s+x),n.quadraticCurveTo(h,s,h+x,s),n.closePath(),n.fill(),r.borderWidth>0&&n.stroke()}_updateAnimationTarget(t){const n=this.chart,i=this.$animations,r=i&&i.x,a=i&&i.y;if(r||a){const l=qy[t.position].call(this,this._active,this._eventPosition);if(!l)return;const h=this._size=NO(this,t),s=Object.assign({},l,this._size),p=$O(n,t,s),_=UO(t,s,p,n);(r._to!==_.x||a._to!==_.y)&&(this.xAlign=p.xAlign,this.yAlign=p.yAlign,this.width=h.width,this.height=h.height,this.caretX=l.x,this.caretY=l.y,this._resolveAnimations().update(this,_))}}_willRender(){return!!this.opacity}draw(t){const n=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(n);const r={width:this.width,height:this.height},a={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const l=Ga(n.padding),h=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&h&&(t.save(),t.globalAlpha=i,this.drawBackground(a,t,r,n),K8(t,n.textDirection),a.y+=l.top,this.drawTitle(a,t,n),this.drawBody(a,t,n),this.drawFooter(a,t,n),X8(t,n.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,n){const i=this._active,r=t.map(({datasetIndex:h,index:s})=>{const p=this.chart.getDatasetMeta(h);if(!p)throw new Error("Cannot find a dataset at index "+h);return{datasetIndex:h,element:p.data[s],index:s}}),a=!Vw(i,r),l=this._positionChanged(r,n);(a||l)&&(this._active=r,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,n,i=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,a=this._active||[],l=this._getActiveElements(t,a,n,i),h=this._positionChanged(l,t),s=n||!Vw(l,a)||h;return s&&(this._active=l,(r.enabled||r.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,n))),s}_getActiveElements(t,n,i,r){const a=this.options;if(t.type==="mouseout")return[];if(!r)return n.filter(h=>this.chart.data.datasets[h.datasetIndex]&&this.chart.getDatasetMeta(h.datasetIndex).controller.getParsed(h.index)!==void 0);const l=this.chart.getElementsAtEventForMode(t,a.mode,a,i);return a.reverse&&l.reverse(),l}_positionChanged(t,n){const{caretX:i,caretY:r,options:a}=this,l=qy[a.position].call(this,t,n);return l!==!1&&(i!==l.x||r!==l.y)}};var dhe={id:"tooltip",_element:HO,positioners:qy,afterInit(e,t,n){n&&(e.tooltip=new HO({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:w9},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},hhe=Object.freeze({__proto__:null,Colors:Sde,Decimation:Ide,Filler:Kde,Legend:ehe,SubTitle:ihe,Title:nhe,Tooltip:dhe});const fhe=(e,t,n,i)=>(typeof t=="string"?(n=e.push(t)-1,i.unshift({index:n,label:t})):isNaN(t)&&(n=null),n);function mhe(e,t,n,i){const r=e.indexOf(t);if(r===-1)return fhe(e,t,n,i);const a=e.lastIndexOf(t);return r!==a?n:r}const phe=(e,t)=>e===null?null:Fo(Math.round(e),0,t);function GO(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class ghe extends mg{static id="category";static defaults={ticks:{callback:GO}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const n=this._addedLabels;if(n.length){const i=this.getLabels();for(const{index:r,label:a}of n)i[r]===a&&i.splice(r,1);this._addedLabels=[]}super.init(t)}parse(t,n){if(Bi(t))return null;const i=this.getLabels();return n=isFinite(n)&&i[n]===t?n:mhe(i,t,wi(n,t),this._addedLabels),phe(n,i.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:i,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(i=0),n||(r=this.getLabels().length-1)),this.min=i,this.max=r}buildTicks(){const t=this.min,n=this.max,i=this.options.offset,r=[];let a=this.getLabels();a=t===0&&n===a.length-1?a:a.slice(t,n+1),this._valueRange=Math.max(a.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let l=t;l<=n;l++)r.push({value:l});return r}getLabelForValue(t){return GO.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}function vhe(e,t){const n=[],{bounds:r,step:a,min:l,max:h,precision:s,count:p,maxTicks:_,maxDigits:x,includeBounds:T}=e,k=a||1,A=_-1,{min:M,max:R}=t,F=!Bi(l),z=!Bi(h),G=!Bi(p),Y=(R-M)/(x+1);let J=N4((R-M)/A/k)*k,re,X,U,H;if(J<1e-14&&!F&&!z)return[{value:M},{value:R}];H=Math.ceil(R/J)-Math.floor(M/J),H>A&&(J=N4(H*J/A/k)*k),Bi(s)||(re=Math.pow(10,s),J=Math.ceil(J*re)/re),r==="ticks"?(X=Math.floor(M/J)*J,U=Math.ceil(R/J)*J):(X=M,U=R),F&&z&&a&&Qae((h-l)/a,J/1e3)?(H=Math.round(Math.min((h-l)/J,_)),J=(h-l)/H,X=l,U=h):G?(X=F?l:X,U=z?h:U,H=p-1,J=(U-X)/H):(H=(U-X)/J,m0(H,Math.round(H),J/1e3)?H=Math.round(H):H=Math.ceil(H));const W=Math.max($4(J),$4(X));re=Math.pow(10,Bi(s)?W:s),X=Math.round(X*re)/re,U=Math.round(U*re)/re;let ie=0;for(F&&(T&&X!==l?(n.push({value:l}),X<l&&ie++,m0(Math.round((X+ie*J)*re)/re,l,qO(l,Y,e))&&ie++):X<l&&ie++);ie<H;++ie){const Q=Math.round((X+ie*J)*re)/re;if(z&&Q>h)break;n.push({value:Q})}return z&&T&&U!==h?n.length&&m0(n[n.length-1].value,h,qO(h,Y,e))?n[n.length-1].value=h:n.push({value:h}):(!z||U===h)&&n.push({value:U}),n}function qO(e,t,{horizontal:n,minRotation:i}){const r=uu(i),a=(n?Math.sin(r):Math.cos(r))||.001,l=.75*t*(""+e).length;return Math.min(t/a,l)}class jw extends mg{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,n){return Bi(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:n,maxDefined:i}=this.getUserBounds();let{min:r,max:a}=this;const l=s=>r=n?r:s,h=s=>a=i?a:s;if(t){const s=id(r),p=id(a);s<0&&p<0?h(0):s>0&&p>0&&l(0)}if(r===a){let s=a===0?1:Math.abs(a*.05);h(a+s),t||l(r-s)}this.min=r,this.max=a}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:n,stepSize:i}=t,r;return i?(r=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),n=n||11),n&&(r=Math.min(n,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,n=t.ticks;let i=this.getTickLimit();i=Math.max(2,i);const r={maxTicks:i,bounds:t.bounds,min:t.min,max:t.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},a=this._range||this,l=vhe(r,a);return t.bounds==="ticks"&&M8(l,this,"value"),t.reverse?(l.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),l}configure(){const t=this.ticks;let n=this.min,i=this.max;if(super.configure(),this.options.offset&&t.length){const r=(i-n)/Math.max(t.length-1,1)/2;n-=r,i+=r}this._startValue=n,this._endValue=i,this._valueRange=i-n}getLabelForValue(t){return Wb(t,this.chart.options.locale,this.options.ticks.format)}}class _he extends jw{static id="linear";static defaults={ticks:{callback:jT.formatters.numeric}};determineDataLimits(){const{min:t,max:n}=this.getMinMax(!0);this.min=Os(t)?t:0,this.max=Os(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),n=t?this.width:this.height,i=uu(this.options.ticks.minRotation),r=(t?Math.sin(i):Math.cos(i))||.001,a=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,a.lineHeight/r))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}const ob=e=>Math.floor(Mf(e)),lp=(e,t)=>Math.pow(10,ob(e)+t);function KO(e){return e/Math.pow(10,ob(e))===1}function XO(e,t,n){const i=Math.pow(10,n),r=Math.floor(e/i);return Math.ceil(t/i)-r}function yhe(e,t){const n=t-e;let i=ob(n);for(;XO(e,t,i)>10;)i++;for(;XO(e,t,i)<10;)i--;return Math.min(i,ob(e))}function bhe(e,{min:t,max:n}){t=Zl(e.min,t);const i=[],r=ob(t);let a=yhe(t,n),l=a<0?Math.pow(10,Math.abs(a)):1;const h=Math.pow(10,a),s=r>a?Math.pow(10,r):0,p=Math.round((t-s)*l)/l,_=Math.floor((t-s)/h/10)*h*10;let x=Math.floor((p-_)/Math.pow(10,a)),T=Zl(e.min,Math.round((s+_+x*Math.pow(10,a))*l)/l);for(;T<n;)i.push({value:T,major:KO(T),significand:x}),x>=10?x=x<15?15:20:x++,x>=20&&(a++,x=2,l=a>=0?1:l),T=Math.round((s+_+x*Math.pow(10,a))*l)/l;const k=Zl(e.max,T);return i.push({value:k,major:KO(k),significand:x}),i}class xhe extends mg{static id="logarithmic";static defaults={ticks:{callback:jT.formatters.logarithmic,major:{enabled:!0}}};constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,n){const i=jw.prototype.parse.apply(this,[t,n]);if(i===0){this._zero=!0;return}return Os(i)&&i>0?i:null}determineDataLimits(){const{min:t,max:n}=this.getMinMax(!0);this.min=Os(t)?Math.max(0,t):null,this.max=Os(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Os(this._userMin)&&(this.min=t===lp(this.min,0)?lp(this.min,-1):lp(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:n}=this.getUserBounds();let i=this.min,r=this.max;const a=h=>i=t?i:h,l=h=>r=n?r:h;i===r&&(i<=0?(a(1),l(10)):(a(lp(i,-1)),l(lp(r,1)))),i<=0&&a(lp(r,-1)),r<=0&&l(lp(i,1)),this.min=i,this.max=r}buildTicks(){const t=this.options,n={min:this._userMin,max:this._userMax},i=bhe(n,this);return t.bounds==="ticks"&&M8(i,this,"value"),t.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(t){return t===void 0?"0":Wb(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=Mf(t),this._valueRange=Mf(this.max)-Mf(t)}getPixelForValue(t){return(t===void 0||t===0)&&(t=this.min),t===null||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(Mf(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const n=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+n*this._valueRange)}}function sI(e){const t=e.ticks;if(t.display&&e.display){const n=Ga(t.backdropPadding);return wi(t.font&&t.font.size,ds.font.size)+n.height}return 0}function whe(e,t,n){return n=us(n)?n:[n],{w:gle(e,t.string,n),h:n.length*t.lineHeight}}function YO(e,t,n,i,r){return e===i||e===r?{start:t-n/2,end:t+n/2}:e<i||e>r?{start:t-n,end:t}:{start:t,end:t+n}}function The(e){const t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},n=Object.assign({},t),i=[],r=[],a=e._pointLabels.length,l=e.options.pointLabels,h=l.centerPointLabels?dr/a:0;for(let s=0;s<a;s++){const p=l.setContext(e.getPointLabelContext(s));r[s]=p.padding;const _=e.getPointPosition(s,e.drawingArea+r[s],h),x=_o(p.font),T=whe(e.ctx,x,e._pointLabels[s]);i[s]=T;const k=La(e.getIndexAngle(s)+h),A=Math.round(jP(k)),M=YO(A,_.x,T.w,0,180),R=YO(A,_.y,T.h,90,270);She(n,t,k,M,R)}e.setCenterPoint(t.l-n.l,n.r-t.r,t.t-n.t,n.b-t.b),e._pointLabelItems=khe(e,i,r)}function She(e,t,n,i,r){const a=Math.abs(Math.sin(n)),l=Math.abs(Math.cos(n));let h=0,s=0;i.start<t.l?(h=(t.l-i.start)/a,e.l=Math.min(e.l,t.l-h)):i.end>t.r&&(h=(i.end-t.r)/a,e.r=Math.max(e.r,t.r+h)),r.start<t.t?(s=(t.t-r.start)/l,e.t=Math.min(e.t,t.t-s)):r.end>t.b&&(s=(r.end-t.b)/l,e.b=Math.max(e.b,t.b+s))}function Ehe(e,t,n){const i=e.drawingArea,{extra:r,additionalAngle:a,padding:l,size:h}=n,s=e.getPointPosition(t,i+r+l,a),p=Math.round(jP(La(s.angle+Gs))),_=Phe(s.y,h.h,p),x=Ihe(p),T=Ahe(s.x,h.w,x);return{visible:!0,x:s.x,y:_,textAlign:x,left:T,top:_,right:T+h.w,bottom:_+h.h}}function Che(e,t){if(!t)return!0;const{left:n,top:i,right:r,bottom:a}=e;return!(dh({x:n,y:i},t)||dh({x:n,y:a},t)||dh({x:r,y:i},t)||dh({x:r,y:a},t))}function khe(e,t,n){const i=[],r=e._pointLabels.length,a=e.options,{centerPointLabels:l,display:h}=a.pointLabels,s={extra:sI(a)/2,additionalAngle:l?dr/r:0};let p;for(let _=0;_<r;_++){s.padding=n[_],s.size=t[_];const x=Ehe(e,_,s);i.push(x),h==="auto"&&(x.visible=Che(x,p),x.visible&&(p=x))}return i}function Ihe(e){return e===0||e===180?"center":e<180?"left":"right"}function Ahe(e,t,n){return n==="right"?e-=t:n==="center"&&(e-=t/2),e}function Phe(e,t,n){return n===90||n===270?e-=t/2:(n>270||n<90)&&(e-=t),e}function Mhe(e,t,n){const{left:i,top:r,right:a,bottom:l}=n,{backdropColor:h}=t;if(!Bi(h)){const s=Lp(t.borderRadius),p=Ga(t.backdropPadding);e.fillStyle=h;const _=i-p.left,x=r-p.top,T=a-i+p.width,k=l-r+p.height;Object.values(s).some(A=>A!==0)?(e.beginPath(),rb(e,{x:_,y:x,w:T,h:k,radius:s}),e.fill()):e.fillRect(_,x,T,k)}}function Dhe(e,t){const{ctx:n,options:{pointLabels:i}}=e;for(let r=t-1;r>=0;r--){const a=e._pointLabelItems[r];if(!a.visible)continue;const l=i.setContext(e.getPointLabelContext(r));Mhe(n,l,a);const h=_o(l.font),{x:s,y:p,textAlign:_}=a;qp(n,e._pointLabels[r],s,p+h.lineHeight/2,h,{color:l.color,textAlign:_,textBaseline:"middle"})}}function T9(e,t,n,i){const{ctx:r}=e;if(n)r.arc(e.xCenter,e.yCenter,t,0,Qr);else{let a=e.getPointPosition(0,t);r.moveTo(a.x,a.y);for(let l=1;l<i;l++)a=e.getPointPosition(l,t),r.lineTo(a.x,a.y)}}function Lhe(e,t,n,i,r){const a=e.ctx,l=t.circular,{color:h,lineWidth:s}=t;!l&&!i||!h||!s||n<0||(a.save(),a.strokeStyle=h,a.lineWidth=s,a.setLineDash(r.dash||[]),a.lineDashOffset=r.dashOffset,a.beginPath(),T9(e,n,l,i),a.closePath(),a.stroke(),a.restore())}function Rhe(e,t,n){return mm(e,{label:n,index:t,type:"pointLabel"})}class Ohe extends jw{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:jT.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(t){return t},padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=Ga(sI(this.options)/2),n=this.width=this.maxWidth-t.width,i=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+n/2+t.left),this.yCenter=Math.floor(this.top+i/2+t.top),this.drawingArea=Math.floor(Math.min(n,i)/2)}determineDataLimits(){const{min:t,max:n}=this.getMinMax(!1);this.min=Os(t)&&!isNaN(t)?t:0,this.max=Os(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/sI(this.options))}generateTickLabels(t){jw.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((n,i)=>{const r=Kr(this.options.pointLabels.callback,[n,i],this);return r||r===0?r:""}).filter((n,i)=>this.chart.getDataVisibility(i))}fit(){const t=this.options;t.display&&t.pointLabels.display?The(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,n,i,r){this.xCenter+=Math.floor((t-n)/2),this.yCenter+=Math.floor((i-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,n,i,r))}getIndexAngle(t){const n=Qr/(this._pointLabels.length||1),i=this.options.startAngle||0;return La(t*n+uu(i))}getDistanceFromCenterForValue(t){if(Bi(t))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*n:(t-this.min)*n}getValueForDistanceFromCenter(t){if(Bi(t))return NaN;const n=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(t){const n=this._pointLabels||[];if(t>=0&&t<n.length){const i=n[t];return Rhe(this.getContext(),t,i)}}getPointPosition(t,n,i=0){const r=this.getIndexAngle(t)-Gs+i;return{x:Math.cos(r)*n+this.xCenter,y:Math.sin(r)*n+this.yCenter,angle:r}}getPointPositionForValue(t,n){return this.getPointPosition(t,this.getDistanceFromCenterForValue(n))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:n,top:i,right:r,bottom:a}=this._pointLabelItems[t];return{left:n,top:i,right:r,bottom:a}}drawBackground(){const{backgroundColor:t,grid:{circular:n}}=this.options;if(t){const i=this.ctx;i.save(),i.beginPath(),T9(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),i.closePath(),i.fillStyle=t,i.fill(),i.restore()}}drawGrid(){const t=this.ctx,n=this.options,{angleLines:i,grid:r,border:a}=n,l=this._pointLabels.length;let h,s,p;if(n.pointLabels.display&&Dhe(this,l),r.display&&this.ticks.forEach((_,x)=>{if(x!==0||x===0&&this.min<0){s=this.getDistanceFromCenterForValue(_.value);const T=this.getContext(x),k=r.setContext(T),A=a.setContext(T);Lhe(this,k,s,l,A)}}),i.display){for(t.save(),h=l-1;h>=0;h--){const _=i.setContext(this.getPointLabelContext(h)),{color:x,lineWidth:T}=_;!T||!x||(t.lineWidth=T,t.strokeStyle=x,t.setLineDash(_.borderDash),t.lineDashOffset=_.borderDashOffset,s=this.getDistanceFromCenterForValue(n.reverse?this.min:this.max),p=this.getPointPosition(h,s),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(p.x,p.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,n=this.options,i=n.ticks;if(!i.display)return;const r=this.getIndexAngle(0);let a,l;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(r),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((h,s)=>{if(s===0&&this.min>=0&&!n.reverse)return;const p=i.setContext(this.getContext(s)),_=_o(p.font);if(a=this.getDistanceFromCenterForValue(this.ticks[s].value),p.showLabelBackdrop){t.font=_.string,l=t.measureText(h.label).width,t.fillStyle=p.backdropColor;const x=Ga(p.backdropPadding);t.fillRect(-l/2-x.left,-a-_.size/2-x.top,l+x.width,_.size+x.height)}qp(t,h.label,0,-a,_,{color:p.color,strokeColor:p.textStrokeColor,strokeWidth:p.textStrokeWidth})}),t.restore()}drawTitle(){}}const YT={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Al=Object.keys(YT);function ZO(e,t){return e-t}function JO(e,t){if(Bi(t))return null;const n=e._adapter,{parser:i,round:r,isoWeekday:a}=e._parseOpts;let l=t;return typeof i=="function"&&(l=i(l)),Os(l)||(l=typeof i=="string"?n.parse(l,i):n.parse(l)),l===null?null:(r&&(l=r==="week"&&(l_(a)||a===!0)?n.startOf(l,"isoWeek",a):n.startOf(l,r)),+l)}function QO(e,t,n,i){const r=Al.length;for(let a=Al.indexOf(e);a<r-1;++a){const l=YT[Al[a]],h=l.steps?l.steps:Number.MAX_SAFE_INTEGER;if(l.common&&Math.ceil((n-t)/(h*l.size))<=i)return Al[a]}return Al[r-1]}function Vhe(e,t,n,i,r){for(let a=Al.length-1;a>=Al.indexOf(n);a--){const l=Al[a];if(YT[l].common&&e._adapter.diff(r,i,l)>=t-1)return l}return Al[n?Al.indexOf(n):0]}function Bhe(e){for(let t=Al.indexOf(e)+1,n=Al.length;t<n;++t)if(YT[Al[t]].common)return Al[t]}function eV(e,t,n){if(!n)e[t]=!0;else if(n.length){const{lo:i,hi:r}=WP(n,t),a=n[i]>=t?n[i]:n[r];e[a]=!0}}function Fhe(e,t,n,i){const r=e._adapter,a=+r.startOf(t[0].value,i),l=t[t.length-1].value;let h,s;for(h=a;h<=l;h=+r.add(h,1,i))s=n[h],s>=0&&(t[s].major=!0);return t}function tV(e,t,n){const i=[],r={},a=t.length;let l,h;for(l=0;l<a;++l)h=t[l],r[h]=l,i.push({value:h,major:!1});return a===0||!n?i:Fhe(e,i,r,n)}class oI extends mg{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,n={}){const i=t.time||(t.time={}),r=this._adapter=new zce._date(t.adapters.date);r.init(n),f0(i.displayFormats,r.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=n.normalized}parse(t,n){return t===void 0?null:JO(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,n=this._adapter,i=t.time.unit||"day";let{min:r,max:a,minDefined:l,maxDefined:h}=this.getUserBounds();function s(p){!l&&!isNaN(p.min)&&(r=Math.min(r,p.min)),!h&&!isNaN(p.max)&&(a=Math.max(a,p.max))}(!l||!h)&&(s(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&s(this.getMinMax(!1))),r=Os(r)&&!isNaN(r)?r:+n.startOf(Date.now(),i),a=Os(a)&&!isNaN(a)?a:+n.endOf(Date.now(),i)+1,this.min=Math.min(r,a-1),this.max=Math.max(r+1,a)}_getLabelBounds(){const t=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(n=t[0],i=t[t.length-1]),{min:n,max:i}}buildTicks(){const t=this.options,n=t.time,i=t.ticks,r=i.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const a=this.min,l=this.max,h=ile(r,a,l);return this._unit=n.unit||(i.autoSkip?QO(n.minUnit,this.min,this.max,this._getLabelCapacity(a)):Vhe(this,h.length,n.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:Bhe(this._unit),this.initOffsets(r),t.reverse&&h.reverse(),tV(this,h,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let n=0,i=0,r,a;this.options.offset&&t.length&&(r=this.getDecimalForValue(t[0]),t.length===1?n=1-r:n=(this.getDecimalForValue(t[1])-r)/2,a=this.getDecimalForValue(t[t.length-1]),t.length===1?i=a:i=(a-this.getDecimalForValue(t[t.length-2]))/2);const l=t.length<3?.5:.25;n=Fo(n,0,l),i=Fo(i,0,l),this._offsets={start:n,end:i,factor:1/(n+1+i)}}_generate(){const t=this._adapter,n=this.min,i=this.max,r=this.options,a=r.time,l=a.unit||QO(a.minUnit,n,i,this._getLabelCapacity(n)),h=wi(r.ticks.stepSize,1),s=l==="week"?a.isoWeekday:!1,p=l_(s)||s===!0,_={};let x=n,T,k;if(p&&(x=+t.startOf(x,"isoWeek",s)),x=+t.startOf(x,p?"day":l),t.diff(i,n,l)>1e5*h)throw new Error(n+" and "+i+" are too far apart with stepSize of "+h+" "+l);const A=r.ticks.source==="data"&&this.getDataTimestamps();for(T=x,k=0;T<i;T=+t.add(T,h,l),k++)eV(_,T,A);return(T===i||r.bounds==="ticks"||k===1)&&eV(_,T,A),Object.keys(_).sort(ZO).map(M=>+M)}getLabelForValue(t){const n=this._adapter,i=this.options.time;return i.tooltipFormat?n.format(t,i.tooltipFormat):n.format(t,i.displayFormats.datetime)}format(t,n){const r=this.options.time.displayFormats,a=this._unit,l=n||r[a];return this._adapter.format(t,l)}_tickFormatFunction(t,n,i,r){const a=this.options,l=a.ticks.callback;if(l)return Kr(l,[t,n,i],this);const h=a.time.displayFormats,s=this._unit,p=this._majorUnit,_=s&&h[s],x=p&&h[p],T=i[n],k=p&&x&&T&&T.major;return this._adapter.format(t,r||(k?x:_))}generateTickLabels(t){let n,i,r;for(n=0,i=t.length;n<i;++n)r=t[n],r.label=this._tickFormatFunction(r.value,n,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const n=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((n.start+i)*n.factor)}getValueForPixel(t){const n=this._offsets,i=this.getDecimalForPixel(t)/n.factor-n.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){const n=this.options.ticks,i=this.ctx.measureText(t).width,r=uu(this.isHorizontal()?n.maxRotation:n.minRotation),a=Math.cos(r),l=Math.sin(r),h=this._resolveTickFontOptions(0).size;return{w:i*a+h*l,h:i*l+h*a}}_getLabelCapacity(t){const n=this.options.time,i=n.displayFormats,r=i[n.unit]||i.millisecond,a=this._tickFormatFunction(t,0,tV(this,[t],this._majorUnit),r),l=this._getLabelSize(a),h=Math.floor(this.isHorizontal()?this.width/l.w:this.height/l.h)-1;return h>0?h:1}getDataTimestamps(){let t=this._cache.data||[],n,i;if(t.length)return t;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(n=0,i=r.length;n<i;++n)t=t.concat(r[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let n,i;if(t.length)return t;const r=this.getLabels();for(n=0,i=r.length;n<i;++n)t.push(JO(this,r[n]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return R8(t.sort(ZO))}}function a1(e,t,n){let i=0,r=e.length-1,a,l,h,s;n?(t>=e[i].pos&&t<=e[r].pos&&({lo:i,hi:r}=uh(e,"pos",t)),{pos:a,time:h}=e[i],{pos:l,time:s}=e[r]):(t>=e[i].time&&t<=e[r].time&&({lo:i,hi:r}=uh(e,"time",t)),{time:a,pos:h}=e[i],{time:l,pos:s}=e[r]);const p=l-a;return p?h+(s-h)*(t-a)/p:h}class zhe extends oI{static id="timeseries";static defaults=oI.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(t);this._minPos=a1(n,this.min),this._tableRange=a1(n,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:n,max:i}=this,r=[],a=[];let l,h,s,p,_;for(l=0,h=t.length;l<h;++l)p=t[l],p>=n&&p<=i&&r.push(p);if(r.length<2)return[{time:n,pos:0},{time:i,pos:1}];for(l=0,h=r.length;l<h;++l)_=r[l+1],s=r[l-1],p=r[l],Math.round((_+s)/2)!==p&&a.push({time:p,pos:l/(h-1)});return a}_generate(){const t=this.min,n=this.max;let i=super.getDataTimestamps();return(!i.includes(t)||!i.length)&&i.splice(0,0,t),(!i.includes(n)||i.length===1)&&i.push(n),i.sort((r,a)=>r-a)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const n=this.getDataTimestamps(),i=this.getLabelTimestamps();return n.length&&i.length?t=this.normalize(n.concat(i)):t=n.length?n:i,t=this._cache.all=t,t}getDecimalForValue(t){return(a1(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const n=this._offsets,i=this.getDecimalForPixel(t)/n.factor-n.end;return a1(this._table,i*this._tableRange+this._minPos,!0)}}var Nhe=Object.freeze({__proto__:null,CategoryScale:ghe,LinearScale:_he,LogarithmicScale:xhe,RadialLinearScale:Ohe,TimeScale:oI,TimeSeriesScale:zhe});const $he=[Fce,vde,hhe,Nhe];tM.register(...$he);const iM=Symbol.for("vuetify:v-slider");function aI(e,t,n){const i=n==="vertical",r=t.getBoundingClientRect(),a="touches"in e?e.touches[0]:e;return i?a.clientY-(r.top+r.height/2):a.clientX-(r.left+r.width/2)}function Uhe(e,t){return"touches"in e&&e.touches.length?e.touches[0][t]:"changedTouches"in e&&e.changedTouches.length?e.changedTouches[0][t]:e[t]}const S9=lt({disabled:{type:Boolean,default:null},error:Boolean,readonly:{type:Boolean,default:null},max:{type:[Number,String],default:100},min:{type:[Number,String],default:0},step:{type:[Number,String],default:0},thumbColor:String,thumbLabel:{type:[Boolean,String],default:void 0,validator:e=>typeof e=="boolean"||e==="always"},thumbSize:{type:[Number,String],default:20},showTicks:{type:[Boolean,String],default:!1,validator:e=>typeof e=="boolean"||e==="always"},ticks:{type:[Array,Object]},tickSize:{type:[Number,String],default:2},color:String,trackColor:String,trackFillColor:String,trackSize:{type:[Number,String],default:4},direction:{type:String,default:"horizontal",validator:e=>["vertical","horizontal"].includes(e)},reverse:Boolean,noKeyboard:Boolean,...Wr(),...Ks({elevation:2}),ripple:{type:Boolean,default:!0}},"Slider"),E9=e=>{const t=me(()=>parseFloat(e.min)),n=me(()=>parseFloat(e.max)),i=me(()=>Number(e.step)>0?parseFloat(e.step):0),r=me(()=>Math.max(D5(i.value),D5(t.value)));function a(l){if(l=parseFloat(l),i.value<=0)return l;const h=Cr(l,t.value,n.value),s=t.value%i.value;let p=Math.round((h-s)/i.value)*i.value+s;return h>p&&p+i.value>n.value&&(p=n.value),parseFloat(Math.min(p,n.value).toFixed(r.value))}return{min:t,max:n,step:i,decimals:r,roundValue:a}},C9=e=>{let{props:t,steps:n,onSliderStart:i,onSliderMove:r,onSliderEnd:a,getActiveThumb:l}=e;const h=C_(t),{isRtl:s}=qs(),p=$e(()=>t.reverse),_=me(()=>t.direction==="vertical"),x=me(()=>_.value!==p.value),{min:T,max:k,step:A,decimals:M,roundValue:R}=n,F=me(()=>parseInt(t.thumbSize,10)),z=me(()=>parseInt(t.tickSize,10)),G=me(()=>parseInt(t.trackSize,10)),Y=me(()=>(k.value-T.value)/A.value),J=me(()=>t.error||h.isDisabled.value?void 0:t.thumbColor??t.color),re=me(()=>t.error||h.isDisabled.value?void 0:t.thumbColor),X=me(()=>t.error||h.isDisabled.value?void 0:t.trackColor??t.color),U=me(()=>t.error||h.isDisabled.value?void 0:t.trackFillColor??t.color),H=tn(!1),W=tn(0),ie=tt(),Q=tt();function te(ct){const ht=ie.value?.$el;if(!ht)return;const Qe=t.direction==="vertical",kt=Qe?"top":"left",Ue=Qe?"height":"width",ue=Qe?"clientY":"clientX",{[kt]:we,[Ue]:fe}=ht.getBoundingClientRect(),Ie=Uhe(ct,ue);let je=Cr((Ie-we-W.value)/fe)||0;return(Qe?x.value:x.value!==s.value)&&(je=1-je),R(T.value+je*(k.value-T.value))}const ke=ct=>{const ht=te(ct);ht!=null&&a({value:ht}),H.value=!1,W.value=0},Re=ct=>{const ht=te(ct);Q.value=l(ct),Q.value&&(H.value=!0,Q.value.contains(ct.target)?W.value=aI(ct,Q.value,t.direction):(W.value=0,ht!=null&&r({value:ht})),ht!=null&&i({value:ht}),Hn(()=>Q.value?.focus()))},Be={passive:!0,capture:!0};function Je(ct){const ht=te(ct);ht!=null&&r({value:ht})}function nt(ct){ct.stopPropagation(),ct.preventDefault(),ke(ct),window.removeEventListener("mousemove",Je,Be),window.removeEventListener("mouseup",nt)}function De(ct){ke(ct),window.removeEventListener("touchmove",Je,Be),ct.target?.removeEventListener("touchend",De)}function Ge(ct){Re(ct),window.addEventListener("touchmove",Je,Be),ct.target?.addEventListener("touchend",De,{passive:!1})}function Ee(ct){ct.button===0&&(ct.preventDefault(),Re(ct),window.addEventListener("mousemove",Je,Be),window.addEventListener("mouseup",nt,{passive:!1}))}const it=ct=>{const ht=(ct-T.value)/(k.value-T.value)*100;return Cr(isNaN(ht)?0:ht,0,100)},ot=$e(()=>t.showTicks),mt=me(()=>ot.value?t.ticks?Array.isArray(t.ticks)?t.ticks.map(ct=>({value:ct,position:it(ct),label:ct.toString()})):Object.keys(t.ticks).map(ct=>({value:parseFloat(ct),position:it(parseFloat(ct)),label:t.ticks[ct]})):Y.value!==1/0?rc(Y.value+1).map(ct=>{const ht=T.value+ct*A.value;return{value:ht,position:it(ht)}}):[]:[]),Pt=me(()=>mt.value.some(ct=>{let{label:ht}=ct;return!!ht})),$t={activeThumbRef:Q,color:$e(()=>t.color),decimals:M,disabled:h.isDisabled,direction:$e(()=>t.direction),elevation:$e(()=>t.elevation),hasLabels:Pt,isReversed:p,indexFromEnd:x,min:T,max:k,mousePressed:H,noKeyboard:$e(()=>t.noKeyboard),numTicks:Y,onSliderMousedown:Ee,onSliderTouchstart:Ge,parsedTicks:mt,parseMouseMove:te,position:it,readonly:h.isReadonly,rounded:$e(()=>t.rounded),roundValue:R,showTicks:ot,startOffset:W,step:A,thumbSize:F,thumbColor:J,thumbLabelColor:re,thumbLabel:$e(()=>t.thumbLabel),ticks:$e(()=>t.ticks),tickSize:z,trackColor:X,trackContainerRef:ie,trackFillColor:U,trackSize:G,vertical:_};return Rr(iM,$t),$t},jhe=lt({focused:Boolean,max:{type:Number,required:!0},min:{type:Number,required:!0},modelValue:{type:Number,required:!0},position:{type:Number,required:!0},ripple:{type:[Boolean,Object],default:!0},name:String,noKeyboard:Boolean,...Tn()},"VSliderThumb"),lI=Mt()({name:"VSliderThumb",directives:{vRipple:Ha},props:jhe(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n,emit:i}=t;const r=Si(iM),{isRtl:a,rtlClasses:l}=qs();if(!r)throw new Error("[Vuetify] v-slider-thumb must be used inside v-slider or v-range-slider");const{min:h,max:s,thumbColor:p,thumbLabelColor:_,step:x,disabled:T,thumbSize:k,thumbLabel:A,direction:M,isReversed:R,vertical:F,readonly:z,elevation:G,mousePressed:Y,decimals:J,indexFromEnd:re}=r,X=me(()=>T.value?void 0:G.value),{elevationClasses:U}=wo(X),{textColorClasses:H,textColorStyles:W}=Uo(p),{backgroundColorClasses:ie,backgroundColorStyles:Q}=ir(_),{pageup:te,pagedown:ke,end:Re,home:Be,left:Je,right:nt,down:De,up:Ge}=Pk,Ee=[te,ke,Re,Be,Je,nt,De,Ge],it=me(()=>x.value?[1,2,3]:[1,5,10]);function ot(Pt,$t){if(e.noKeyboard||T.value||!Ee.includes(Pt.key))return;Pt.preventDefault();const ct=x.value||.1,ht=(s.value-h.value)/ct;if([Je,nt,De,Ge].includes(Pt.key)){const kt=(F.value?[a.value?Je:nt,R.value?De:Ge]:re.value!==a.value?[Je,Ge]:[nt,Ge]).includes(Pt.key)?1:-1,Ue=Pt.shiftKey?2:Pt.ctrlKey?1:0;kt===-1&&$t===s.value&&!Ue&&!Number.isInteger(ht)?$t=$t-ht%1*ct:$t=$t+kt*ct*it.value[Ue]}else if(Pt.key===Be)$t=h.value;else if(Pt.key===Re)$t=s.value;else{const Qe=Pt.key===ke?1:-1;$t=$t-Qe*ct*(ht>100?ht/10:10)}return Math.max(e.min,Math.min(e.max,$t))}function mt(Pt){const $t=ot(Pt,e.modelValue);$t!=null&&i("update:modelValue",$t)}return zt(()=>{const Pt=pn(re.value?100-e.position:e.position,"%");return V("div",{class:_t(["v-slider-thumb",{"v-slider-thumb--focused":e.focused,"v-slider-thumb--pressed":e.focused&&Y.value},e.class,l.value]),style:Xt([{"--v-slider-thumb-position":Pt,"--v-slider-thumb-size":pn(k.value)},e.style]),role:"slider",tabindex:T.value?-1:0,"aria-label":e.name,"aria-valuemin":h.value,"aria-valuemax":s.value,"aria-valuenow":e.modelValue,"aria-readonly":!!z.value,"aria-orientation":M.value,onKeydown:z.value?void 0:mt},[V("div",{class:_t(["v-slider-thumb__surface",H.value,U.value]),style:Xt(W.value)},null),Li(V("div",{class:_t(["v-slider-thumb__ripple",H.value]),style:Xt(W.value)},null),[[Ha,e.ripple,null,{circle:!0,center:!0}]]),ce(bP,{origin:"bottom center"},{default:()=>[Li(V("div",{class:"v-slider-thumb__label-container"},[V("div",{class:_t(["v-slider-thumb__label",ie.value]),style:Xt(Q.value)},[V("div",null,[n["thumb-label"]?.({modelValue:e.modelValue})??e.modelValue.toFixed(x.value?J.value:1)]),V("div",{class:"v-slider-thumb__label-wedge"},null)])]),[[_u,A.value&&e.focused||A.value==="always"]])]})])}),{}}}),Whe=lt({start:{type:Number,required:!0},stop:{type:Number,required:!0},...Tn()},"VSliderTrack"),k9=Mt()({name:"VSliderTrack",props:Whe(),emits:{},setup(e,t){let{slots:n}=t;const i=Si(iM);if(!i)throw new Error("[Vuetify] v-slider-track must be inside v-slider or v-range-slider");const{color:r,parsedTicks:a,rounded:l,showTicks:h,tickSize:s,trackColor:p,trackFillColor:_,trackSize:x,vertical:T,min:k,max:A,indexFromEnd:M}=i,{roundedClasses:R}=ns(l),{backgroundColorClasses:F,backgroundColorStyles:z}=ir(_),{backgroundColorClasses:G,backgroundColorStyles:Y}=ir(p),J=me(()=>`inset-${T.value?"block":"inline"}-${M.value?"end":"start"}`),re=me(()=>T.value?"height":"width"),X=me(()=>({[J.value]:"0%",[re.value]:"100%"})),U=me(()=>e.stop-e.start),H=me(()=>({[J.value]:pn(e.start,"%"),[re.value]:pn(U.value,"%")})),W=me(()=>h.value?(T.value?a.value.slice().reverse():a.value).map((Q,te)=>{const ke=Q.value!==k.value&&Q.value!==A.value?pn(Q.position,"%"):void 0;return V("div",{key:Q.value,class:_t(["v-slider-track__tick",{"v-slider-track__tick--filled":Q.position>=e.start&&Q.position<=e.stop,"v-slider-track__tick--first":Q.value===k.value,"v-slider-track__tick--last":Q.value===A.value}]),style:{[J.value]:ke}},[(Q.label||n["tick-label"])&&V("div",{class:"v-slider-track__tick-label"},[n["tick-label"]?.({tick:Q,index:te})??Q.label])])}):[]);return zt(()=>V("div",{class:_t(["v-slider-track",R.value,e.class]),style:Xt([{"--v-slider-track-size":pn(x.value),"--v-slider-tick-size":pn(s.value)},e.style])},[V("div",{class:_t(["v-slider-track__background",G.value,{"v-slider-track__background--opacity":!!r.value||!_.value}]),style:{...X.value,...Y.value}},null),V("div",{class:_t(["v-slider-track__fill",F.value]),style:{...H.value,...z.value}},null),h.value&&V("div",{class:_t(["v-slider-track__ticks",{"v-slider-track__ticks--always-show":h.value==="always"}])},[W.value])])),{}}}),Hhe=lt({...zb(),...S9(),...Dh(),modelValue:{type:[Number,String],default:0}},"VSlider"),ab=Mt()({name:"VSlider",props:Hhe(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,start:e=>!0,end:e=>!0},setup(e,t){let{slots:n,emit:i}=t;const r=tt(),a=tt(),{rtlClasses:l}=qs(),h=E9(e),s=Pn(e,"modelValue",void 0,H=>h.roundValue(H??h.min.value)),{min:p,max:_,mousePressed:x,roundValue:T,onSliderMousedown:k,onSliderTouchstart:A,trackContainerRef:M,position:R,hasLabels:F,disabled:z,readonly:G,noKeyboard:Y}=C9({props:e,steps:h,onSliderStart:()=>{!z.value&&!G.value&&i("start",s.value)},onSliderEnd:H=>{let{value:W}=H;const ie=T(W);!z.value&&!G.value&&(s.value=ie),i("end",ie)},onSliderMove:H=>{let{value:W}=H;!z.value&&!G.value&&(s.value=T(W))},getActiveThumb:()=>r.value?.$el}),{isFocused:J,focus:re,blur:X}=Mh(e),U=me(()=>R(s.value));return zt(()=>{const H=da.filterProps(e),W=!!(e.label||n.label||n.prepend);return ce(da,At({ref:a,class:["v-slider",{"v-slider--has-labels":!!n["tick-label"]||F.value,"v-slider--focused":J.value,"v-slider--pressed":x.value,"v-slider--disabled":z.value},l.value,e.class],style:e.style},H,{focused:J.value}),{...n,prepend:W?ie=>V(an,null,[n.label?.(ie)??(e.label?ce(E_,{id:ie.id.value,class:"v-slider__label",text:e.label},null):void 0),n.prepend?.(ie)]):void 0,default:ie=>{let{id:Q,messagesId:te}=ie;return V("div",{class:"v-slider__container",onMousedown:G.value?void 0:k,onTouchstartPassive:G.value?void 0:A},[V("input",{id:Q.value,name:e.name||Q.value,disabled:z.value,readonly:G.value,tabindex:"-1",value:s.value},null),ce(k9,{ref:M,start:0,stop:U.value},{"tick-label":n["tick-label"]}),ce(lI,{ref:r,"aria-describedby":te.value,focused:J.value,noKeyboard:Y.value,min:p.value,max:_.value,modelValue:s.value,"onUpdate:modelValue":ke=>s.value=ke,position:U.value,elevation:e.elevation,onFocus:re,onBlur:X,ripple:e.ripple,name:e.name},{"thumb-label":n["thumb-label"]})])}})}),To({focus:()=>r.value?.$el.focus()},a)}}),Ghe={class:"section-card"},qhe={class:"row g-3 align-items-end"},Khe={class:"col-md-4"},Xhe={class:"col-md-4"},Yhe={class:"col-md-4"},Zhe={class:"col-12"},Jhe={class:"fare-actions"},Qhe={key:0,class:"mt-4 feature-result-animate"},efe={class:"row g-3"},tfe={class:"col-lg-4"},nfe={class:"fare-result-amount"},ife={class:"fare-result-commuter"},rfe={class:"fare-result-route text-muted"},sfe={class:"fare-stat-chip-group"},ofe={class:"col-lg-8"},afe={class:"fare-route-header"},lfe={class:"fare-route-timeline"},cfe={class:"timeline-dot"},ufe={class:"timeline-body"},dfe={class:"d-flex align-items-center gap-2 mb-2 flex-wrap"},hfe={class:"fw-semibold text-dark"},ffe={key:0,class:"mt-4"},mfe={class:"d-flex flex-wrap align-items-center gap-2 mb-3"},pfe={class:"row g-3"},gfe={class:"col-md-4"},vfe={class:"fare-input-header"},_fe={class:"fare-slider"},yfe={class:"d-flex justify-content-between align-items-center mb-2"},bfe={class:"col-md-4"},xfe={class:"fare-input-header"},wfe={class:"fare-slider"},Tfe={class:"d-flex justify-content-between align-items-center mb-2"},Sfe={class:"col-md-4"},Efe={class:"fare-input-header"},Cfe={class:"fare-metric-display"},kfe={class:"fare-metric-value"},Ife={key:0,class:"row g-3 mt-1"},Afe={class:"col-lg-4"},Pfe={class:"reco-header"},Mfe={class:"reco-icon"},Dfe={class:"reco-heading"},Lfe={class:"reco-title mb-0"},Rfe={class:"reco-body"},Ofe={class:"reco-summary mb-3"},Vfe={class:"reco-metrics"},Bfe={class:"reco-metric"},Ffe={class:"reco-metric-value"},zfe={class:"reco-metric"},Nfe={class:"reco-metric-value"},$fe={class:"reco-metric"},Ufe={class:"col-lg-8"},jfe={class:"card-body"},Wfe={class:"chart-header"},Hfe={class:"chart-meta mt-3"},Gfe={class:"chart-meta-item"},qfe={class:"chart-meta-value"},Kfe={class:"chart-meta-item"},Xfe={class:"chart-wrapper mt-3"},Yfe={class:"col-12"},Zfe={class:"table-responsive shadow-sm border rounded-3"},Jfe={class:"table align-middle mb-0 table-modern"},Qfe={class:"text-center"},eme={class:"table-pass-name"},tme={key:0,class:"table-pass-tag"},nme={key:0,class:"alert alert-danger mt-4"},ime={__name:"FareCalculator",setup(e){const{allStations:t,shortestPath:n,estimateDistanceKm:i,estimateTimeMinutes:r,summariseSegments:a}=gP(),{fareByType:l,analyseMonthlyPass:h}=e2(),s=[{value:"adult",label:"Adult"},{value:"primary",label:"Primary School Student"},{value:"secondary",label:"Secondary School Student"},{value:"polytechnic",label:"Polytechnic Student"},{value:"university",label:"University Student"},{value:"ns",label:"National Serviceman"},{value:"senior",label:"Senior Citizen"},{value:"disability",label:"Person with Disabilities"},{value:"workfare",label:"Workfare Concession"}],p={NSL:{name:"North South Line"},EWL:{name:"East West Line"},CGL:{name:"Changi Airport Branch"},DTL:{name:"Downtown Line"},CCL:{name:"Circle Line"},NEL:{name:"North East Line"},TEL:{name:"ThomsonEast Coast Line"},BPL:{name:"Bukit Panjang LRT"},SWPL:{name:"Sengkang West LRT"},SEPL:{name:"Sengkang East LRT"},PEPLRT:{name:"Punggol East LRT"},PWLRT:{name:"Punggol West LRT"}},_={train:"Train-only",bus:"Bus-only",hybrid:"Hybrid (Bus + Train)"},x=tt("Jurong East"),T=tt("City Hall"),k=tt("adult"),A=tt(null),M=tt(null),R=tt(""),F=tt(!1),z=tt(!1),G=tt(2),Y=tt(22),J=tt(null);let re=null;const X=new Intl.NumberFormat("en-SG",{style:"currency",currency:"SGD",currencyDisplay:"narrowSymbol",minimumFractionDigits:2}),U=me(()=>s.find(kt=>kt.value===k.value)?.label??"Adult"),H=me(()=>Math.max(0,G.value*Y.value*2)),W=me(()=>M.value?M.value.breakdown.reduce((kt,Ue)=>kt?Ue.savings>kt.savings?Ue:kt:Ue,null):null),ie=me(()=>W.value?.worth?"success":"error"),Q=me(()=>{if(!M.value)return 0;const kt=Math.max(M.value.monthlyTotal,1),Ue=Math.abs(W.value?.savings??0);return Math.min(100,Math.round(Ue/kt*100))}),te=me(()=>W.value?.mode??null),ke=me(()=>W.value?.worth?"is-positive":"is-negative"),Re=me(()=>W.value?W.value.worth?"Monthly pass pays off":"Stick to pay-per-ride":"Compare options"),Be=me(()=>{if(!W.value)return"Run a calculation to see personalised advice tailored to your commute.";const kt=it(W.value.mode);return W.value.worth?`The ${kt} pass could save ${nt(W.value.savings)} this month compared to pay-per-ride.`:`Pay-per-ride stays cheaper  the ${kt} pass would cost ${nt(Math.abs(W.value.savings))} more.`}),Je=me(()=>W.value?.worth?"mdi-ticket-percent":"mdi-cash-minus");function nt(kt){return X.format(kt)}function De(kt){const Ue=X.format(Math.abs(kt));return`${kt>=0?"+":"-"}${Ue}`}function Ge(kt){return p[kt]?.name??kt}function Ee(kt){return kt?`line-${kt.toLowerCase()}`:""}function it(kt){return _[kt]??kt}function ot(kt){return oh(Ge(kt))||"#6b7280"}async function mt(){if(z.value)return;if(R.value="",M.value=null,x.value===T.value){A.value=null,ct(),R.value="Please choose two different stations.",F.value=!1;return}const kt=n(x.value,T.value);if(!kt){A.value=null,ct(),R.value="No valid MRT route found between these stations.",F.value=!1;return}z.value=!0;const Ue=Date.now();try{F.value=!1,await new Promise(Lt=>setTimeout(Lt,420));const ue=i(kt.totalWeight),we=r(kt.totalWeight),fe=a(kt)??[],Ie=fe.reduce((Lt,Dt)=>Lt+Dt.stops,0),je=Math.max(0,fe.length-1),Xe=l(ue,k.value);A.value={fare:Xe,distanceKm:ue,minutes:we,segments:fe,totalStops:Ie,transfers:je},F.value=!1,await Pt();const yt=Date.now()-Ue,wt=Math.max(0,2e3-yt);await new Promise(Lt=>setTimeout(Lt,wt))}catch(ue){console.error(ue),A.value=null,M.value=null,ct(),F.value=!1,R.value="Unable to calculate fare at the moment. Please try again in a moment.";const we=Date.now()-Ue,fe=Math.max(0,2e3-we);await new Promise(Ie=>setTimeout(Ie,fe))}finally{z.value=!1}}async function Pt(){if(!A.value){M.value=null,ct();return}M.value=h({distanceKm:A.value.distanceKm,type:k.value,dailyTrips:G.value,workingDays:Y.value}),await Hn(),$t(M.value)}function $t(kt){if(!kt||!J.value){ct();return}const Ue=kt.breakdown.map(we=>it(we.mode)),ue=kt.breakdown.map(we=>Number(we.savings.toFixed(2)));re&&re.destroy(),re=new tM(J.value,{type:"bar",data:{labels:Ue,datasets:[{label:"Net savings vs monthly pass ($)",data:ue,backgroundColor:ue.map(we=>we>=0?"rgba(25,135,84,0.6)":"rgba(220,53,69,0.65)"),borderRadius:8,borderSkipped:!1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{label(we){const fe=we.parsed?.y??0,Ie=X.format(Math.abs(fe));return`${fe>=0?"+":""}${Ie}`}}}},scales:{y:{ticks:{callback(we){return typeof we=="number"?X.format(we):we}},grid:{color:"rgba(0,0,0,0.05)"}},x:{grid:{display:!1}}}}})}function ct(){re&&(re.destroy(),re=null)}function ht(){x.value="Jurong East",T.value="City Hall",k.value="adult",A.value=null,M.value=null,R.value="",G.value=2,Y.value=22,F.value=!1,ct()}function Qe(){[x.value,T.value]=[T.value,x.value]}return Yt([x,T,k],()=>{A.value&&(F.value=!0)}),Yt(k,async()=>{A.value&&await mt()}),yae([G,Y],async()=>{A.value&&await Pt()},{debounce:300,maxWait:800}),Ur(()=>{ct()}),(kt,Ue)=>(Gt(),on("section",Ghe,[Ue[31]||(Ue[31]=V("div",{class:"d-flex flex-wrap justify-content-between align-items-center gap-3 mb-4"},[V("div",null,[V("h2",{class:"section-title mb-1"},"Fare Calculator"),V("p",{class:"tab-desc"}," Distance-based fares with the latest LTA tables. Estimate concession pricing, understand line changes, and see whether a monthly pass could save you more. ")])],-1)),V("form",{class:"fare-form",onSubmit:ra(mt,["prevent"])},[V("div",qhe,[V("div",Khe,[ce(Vv,{modelValue:x.value,"onUpdate:modelValue":Ue[0]||(Ue[0]=ue=>x.value=ue),items:bi(t),label:"From station","prepend-inner-icon":"mdi-map-marker",variant:"solo-filled",density:"comfortable",color:"primary","hide-details":"auto",class:"fare-field"},null,8,["modelValue","items"])]),V("div",Xhe,[ce(Vv,{modelValue:T.value,"onUpdate:modelValue":Ue[1]||(Ue[1]=ue=>T.value=ue),items:bi(t),label:"To station","prepend-inner-icon":"mdi-flag",variant:"solo-filled",density:"comfortable",color:"primary","hide-details":"auto",class:"fare-field"},null,8,["modelValue","items"])]),V("div",Yhe,[ce(Vv,{modelValue:k.value,"onUpdate:modelValue":Ue[2]||(Ue[2]=ue=>k.value=ue),items:s,"item-title":"label","item-value":"value",label:"Commuter type","prepend-inner-icon":"mdi-account-group-outline",variant:"solo-filled",density:"comfortable",color:"primary","hide-details":"auto",class:"fare-field"},null,8,["modelValue"])]),V("div",Zhe,[V("div",Jhe,[ce(mi,{type:"submit",color:"primary","prepend-icon":"mdi-cash-multiple",class:"fare-action-btn",elevation:"2",loading:z.value,disabled:z.value},{default:vi(()=>[Bn(en(z.value?"Crunching fares":A.value?"Recalculate":"Calculate fare"),1)]),_:1},8,["loading","disabled"]),ce(mi,{type:"button",variant:"tonal",color:"primary","prepend-icon":"mdi-swap-horizontal",class:"fare-action-btn",onClick:Qe},{default:vi(()=>[...Ue[5]||(Ue[5]=[Bn(" Swap stations ",-1)])]),_:1}),ce(mi,{type:"button",variant:"text",color:"error","prepend-icon":"mdi-restart",class:"fare-action-btn",onClick:ht},{default:vi(()=>[...Ue[6]||(Ue[6]=[Bn(" Reset ",-1)])]),_:1}),F.value?(Gt(),Fa(Ds,{key:0,color:"warning",variant:"flat",size:"small","prepend-icon":"mdi-information-outline",class:"ms-auto"},{default:vi(()=>[...Ue[7]||(Ue[7]=[Bn(" Inputs changed  calculate again to refresh. ",-1)])]),_:1})):xi("",!0)])])])],32),V("div",{class:_t(["fare-output-region",{"is-active":A.value,"is-loading":z.value}])},[V("div",{class:_t(["map-loading-overlay",{show:z.value}])},[...Ue[8]||(Ue[8]=[H1('<div class="map-loading-content" data-v-85a623fe><div class="capybaraloader" data-v-85a623fe><div class="capybara" data-v-85a623fe><div class="capy" data-v-85a623fe><div class="capyhead" data-v-85a623fe><div class="capyear" data-v-85a623fe><div class="capyear2" data-v-85a623fe></div></div><div class="capyear" data-v-85a623fe><div class="capyear2" data-v-85a623fe></div></div><div class="capymouth" data-v-85a623fe><div class="capylips" data-v-85a623fe></div><div class="capylips" data-v-85a623fe></div></div><div class="capyeye" data-v-85a623fe></div><div class="capyeye" data-v-85a623fe></div></div><div class="capyleg" data-v-85a623fe><div class="capyleg2" data-v-85a623fe></div><div class="capyleg2" data-v-85a623fe></div></div></div></div><div class="loader" data-v-85a623fe><div class="loaderline" data-v-85a623fe></div></div></div></div>',1)])],2),ce(X0,{mode:"out-in"},{default:vi(()=>[A.value?(Gt(),on("div",Qhe,[V("div",efe,[V("div",tfe,[ce(xv,{class:"fare-result-card h-100",elevation:"4"},{default:vi(()=>[V("div",nfe,en(nt(A.value.fare)),1),V("div",ife,en(U.value),1),V("div",rfe,en(x.value)+"  "+en(T.value),1),V("div",sfe,[ce(Ds,{variant:"tonal",color:"primary","prepend-icon":"mdi-map-marker-distance"},{default:vi(()=>[Bn(en(Number(A.value.distanceKm).toFixed(1))+" km ",1)]),_:1}),ce(Ds,{variant:"tonal",color:"primary","prepend-icon":"mdi-timer-sand"},{default:vi(()=>[Bn(en(Math.round(A.value.minutes))+" mins ",1)]),_:1}),ce(Ds,{variant:"tonal",color:"primary","prepend-icon":"mdi-transit-connection"},{default:vi(()=>[Bn(en(A.value.totalStops)+" "+en(A.value.totalStops===1?"stop":"stops"),1)]),_:1}),ce(Ds,{variant:"outlined",color:"primary","prepend-icon":"mdi-transfer"},{default:vi(()=>[Bn(en(A.value.transfers)+" "+en(A.value.transfers===1?"transfer":"transfers"),1)]),_:1})])]),_:1})]),V("div",ofe,[ce(xv,{class:"fare-route-card h-100",elevation:"4"},{default:vi(()=>[V("div",afe,[Ue[9]||(Ue[9]=V("div",null,[V("h5",{class:"text-dark mb-1"},"Route overview"),V("p",{class:"text-muted mb-0 small"}," We recommend the quickest MRT path. Look out for timeline dots to spot transfers at a glance. ")],-1)),ce(Ds,{variant:"tonal",color:"primary",size:"small"},{default:vi(()=>[Bn(en(A.value.segments.length)+" "+en(A.value.segments.length===1?"segment":"segments"),1)]),_:1})]),V("div",lfe,[(Gt(!0),on(an,null,cs(A.value.segments,ue=>(Gt(),on("div",{key:`${ue.line}-${ue.from}-${ue.to}`,class:"timeline-node",style:Xt({"--segment-color":ot(ue.line)})},[V("div",cfe,[ce(Pi,{icon:"mdi-train-variant",size:"20"})]),V("div",ufe,[V("div",dfe,[V("span",{class:_t(["route-line-badge",Ee(ue.line)])},en(Ge(ue.line)),3),ce(Ds,{variant:"tonal",color:"primary",size:"small"},{default:vi(()=>[Bn(en(ue.stops===0?"Transfer":`${ue.stops} ${ue.stops===1?"stop":"stops"}`),1)]),_:2},1024)]),V("div",hfe,en(ue.from)+"  "+en(ue.to),1)])],4))),128))])]),_:1})])])])):xi("",!0)]),_:1}),ce(X0,{mode:"out-in"},{default:vi(()=>[A.value?(Gt(),on("div",ffe,[V("div",mfe,[Ue[11]||(Ue[11]=V("h5",{class:"mb-0"},"Monthly Pass Companion",-1)),ce(Ds,{color:"info",variant:"tonal",size:"small","prepend-icon":"mdi-update"},{default:vi(()=>[...Ue[10]||(Ue[10]=[Bn(" Auto-updates with your inputs ",-1)])]),_:1})]),V("div",pfe,[V("div",gfe,[ce(nd,{class:"fare-input-sheet h-100",elevation:"2"},{default:vi(()=>[V("div",vfe,[ce(Pi,{icon:"mdi-repeat-variant",size:"22"}),Ue[12]||(Ue[12]=V("div",null,[V("div",{class:"fw-semibold"},"Trips per day"),V("div",{class:"small text-muted"},"Enter how many MRT rides you usually take daily.")],-1))]),V("div",_fe,[V("div",yfe,[Ue[13]||(Ue[13]=V("span",{class:"small text-muted"},"1",-1)),ce(Ds,{size:"small",variant:"flat",color:"primary"},{default:vi(()=>[Bn(en(G.value),1)]),_:1}),Ue[14]||(Ue[14]=V("span",{class:"small text-muted"},"10",-1))]),ce(ab,{modelValue:G.value,"onUpdate:modelValue":Ue[3]||(Ue[3]=ue=>G.value=ue),min:1,max:10,step:1,color:"primary","thumb-label":"always","show-ticks":"always","tick-size":"3"},null,8,["modelValue"])])]),_:1})]),V("div",bfe,[ce(nd,{class:"fare-input-sheet h-100",elevation:"2"},{default:vi(()=>[V("div",xfe,[ce(Pi,{icon:"mdi-calendar-blank-outline",size:"22"}),Ue[15]||(Ue[15]=V("div",null,[V("div",{class:"fw-semibold"},"Days travelled each month"),V("div",{class:"small text-muted"},"Adjust to match your regular commute schedule.")],-1))]),V("div",wfe,[V("div",Tfe,[Ue[16]||(Ue[16]=V("span",{class:"small text-muted"},"1",-1)),ce(Ds,{size:"small",variant:"flat",color:"primary"},{default:vi(()=>[Bn(en(Y.value),1)]),_:1}),Ue[17]||(Ue[17]=V("span",{class:"small text-muted"},"31",-1))]),ce(ab,{modelValue:Y.value,"onUpdate:modelValue":Ue[4]||(Ue[4]=ue=>Y.value=ue),min:1,max:31,step:1,color:"primary","thumb-label":"always","show-ticks":"always","tick-size":"3"},null,8,["modelValue"])])]),_:1})]),V("div",Sfe,[ce(nd,{class:"fare-input-sheet h-100",elevation:"2"},{default:vi(()=>[V("div",Efe,[ce(Pi,{icon:"mdi-chart-line",size:"22"}),Ue[18]||(Ue[18]=V("div",null,[V("div",{class:"fw-semibold"},"Projected rides"),V("div",{class:"small text-muted"},"Used for the monthly pass comparison.")],-1))]),V("div",Cfe,[V("div",kfe,en(H.value),1),Ue[19]||(Ue[19]=V("div",{class:"small text-muted"},"rides / month",-1))])]),_:1})])]),M.value?(Gt(),on("div",Ife,[V("div",Afe,[ce(xv,{class:_t(["fare-reco-card h-100",ke.value]),elevation:"4"},{default:vi(()=>[V("div",Pfe,[V("div",Mfe,[ce(Pi,{icon:Je.value,size:"28"},null,8,["icon"])]),V("div",Dfe,[Ue[20]||(Ue[20]=V("span",{class:"reco-eyebrow"},"Recommendation",-1)),V("h5",Lfe,en(Re.value),1)]),W.value?(Gt(),Fa(Ds,{key:0,size:"x-small",variant:"flat",color:W.value?.worth?"success":"error","prepend-icon":"mdi-star-circle-outline"},{default:vi(()=>[Bn(en(it(W.value.mode)),1)]),_:1},8,["color"])):xi("",!0)]),V("div",Rfe,[V("p",Ofe,en(Be.value),1),V("div",Vfe,[V("div",Bfe,[Ue[21]||(Ue[21]=V("span",{class:"reco-metric-label"},"Single fare",-1)),V("span",Ffe,en(nt(M.value.singleFare)),1)]),V("div",zfe,[Ue[22]||(Ue[22]=V("span",{class:"reco-metric-label"},"Monthly spend",-1)),V("span",Nfe,en(nt(M.value.monthlyTotal)),1)]),V("div",$fe,[Ue[23]||(Ue[23]=V("span",{class:"reco-metric-label"},"Net impact",-1)),V("span",{class:_t(["reco-metric-value",W.value?.worth?"text-success":"text-danger"])},en(De(W.value?.savings??0)),3)])]),ce(Rb,{class:"reco-progress mt-4","model-value":Q.value,color:ie.value,height:"8",rounded:"pill"},null,8,["model-value","color"]),Ue[24]||(Ue[24]=V("div",{class:"reco-progress-caption"}," Potential savings captured (percentage of projected monthly spend) ",-1))])]),_:1},8,["class"])]),V("div",Ufe,[ce(xv,{class:"fare-chart-card h-100",elevation:"4"},{default:vi(()=>[V("div",jfe,[V("div",Wfe,[Ue[25]||(Ue[25]=V("div",null,[V("h6",{class:"text-uppercase text-muted mb-2 pl-2"},"Savings vs monthly passes"),V("p",{class:"chart-subtitle mb-0"}," Compare how each pass stacks up against your projected rides. ")],-1)),ce(Ds,{variant:"flat",color:"primary",size:"small","prepend-icon":"mdi-counter"},{default:vi(()=>[Bn(en(H.value)+" rides / month ",1)]),_:1})]),V("div",Hfe,[V("div",Gfe,[Ue[26]||(Ue[26]=V("span",{class:"chart-meta-label"},"Best option",-1)),V("span",qfe,en(W.value?it(W.value.mode):""),1)]),V("div",Kfe,[Ue[27]||(Ue[27]=V("span",{class:"chart-meta-label"},"Net impact",-1)),V("span",{class:_t(["chart-meta-value",W.value?.worth?"positive":"negative"])},en(De(W.value?.savings??0)),3)])]),V("div",Xfe,[V("canvas",{ref_key:"passChartRef",ref:J},null,512)])])]),_:1})]),V("div",Yfe,[V("div",Zfe,[V("table",Jfe,[Ue[30]||(Ue[30]=V("thead",{class:"table-light"},[V("tr",{class:"text-center"},[V("th",{scope:"col"},"Pass type"),V("th",{scope:"col"},"Pass price"),V("th",{scope:"col"},"Net savings"),V("th",{scope:"col"},"Recommendation")])],-1)),V("tbody",Qfe,[(Gt(!0),on(an,null,cs(M.value.breakdown,ue=>(Gt(),on("tr",{key:ue.mode,class:_t([{"table-highlight":ue.mode===te.value},ue.worth?"pass-worth":"pass-loss"])},[V("td",null,[V("div",eme,[Bn(en(it(ue.mode))+" ",1),ue.mode===te.value?(Gt(),on("span",tme,"Recommended")):xi("",!0)])]),V("td",null,en(nt(ue.passPrice)),1),V("td",{class:_t(ue.worth?"text-success fw-semibold":"text-danger fw-semibold")},en(De(ue.savings)),3),V("td",null,[ue.worth?(Gt(),Fa(Ds,{key:0,color:"success",variant:"flat",size:"small","prepend-icon":"mdi-check-circle-outline"},{default:vi(()=>[...Ue[28]||(Ue[28]=[Bn(" Worth it ",-1)])]),_:1})):(Gt(),Fa(Ds,{key:1,color:"error",variant:"flat",size:"small","prepend-icon":"mdi-close-circle-outline"},{default:vi(()=>[...Ue[29]||(Ue[29]=[Bn(" Skip it ",-1)])]),_:1}))])],2))),128))])])])])])):xi("",!0)])):xi("",!0)]),_:1})],2),R.value?(Gt(),on("div",nme,en(R.value),1)):xi("",!0)]))}},rme=fg(ime,[["__scopeId","data-v-85a623fe"]]),sme={class:"text-generate-effect mb-0"},ome={class:"text-blur"},ame={class:"text-clear"},lme={key:0,class:"cursor"},cme={__name:"TextGenerateEffect",props:{words:{type:String,required:!0},duration:{type:Number,default:2e3},className:{type:String,default:""}},setup(e){const t=e,n=tt(""),i=tt(!0);Mr(()=>{r()});function r(){const a=t.words,l=a.length,h=t.duration/l;let s=0;n.value="",i.value=!0;function p(){if(s>=l){i.value=!1;return}n.value=a.substring(0,s+1),s++,setTimeout(p,h)}p()}return Yt(()=>t.words,()=>{n.value="",i.value=!0,r()}),(a,l)=>(Gt(),on("p",sme,[V("span",ome,en(t.words),1),V("span",ame,en(n.value),1),i.value?(Gt(),on("span",lme,"|")):xi("",!0)]))}},ume=fg(cme,[["__scopeId","data-v-4e85abe1"]]),dme={class:"section-card"},hme={class:"d-flex flex-wrap justify-content-between align-items-start gap-3 mb-4"},fme={class:"meetup-container"},mme={class:"person-header"},pme={class:"person-avatar"},gme={class:"person-info"},vme=["onClick"],_me={class:"station-selector position-relative"},yme={class:"input-container"},bme={class:"input-with-badges"},xme={class:"input-wrapper"},wme=["value","placeholder","onInput","onKeydown","onFocus","onBlur"],Tme={key:0,class:"input-autocomplete"},Sme={class:"autocomplete-typed"},Eme={class:"autocomplete-suggestion"},Cme={key:0,class:"input-badges"},kme={class:"mb-3 d-flex align-items-center gap-3"},Ime={class:"mb-0 d-flex align-items-center flex-wrap gap-2 flex-grow-1",style:{color:"var(--color-text)"}},Ame={class:"d-flex align-items-center gap-2 ms-2"},Pme={class:"row g-3"},Mme={class:"col-md-4"},Dme={class:"border rounded-3 p-3 h-100",style:{background:"var(--color-surface)","border-color":"var(--color-border) !important"}},Lme={class:"mb-2",style:{color:"var(--color-text)"}},Rme={class:"mb-0",style:{color:"var(--color-text)"}},Ome={class:"col-md-8"},Vme={class:"border rounded-3 p-3",style:{"border-color":"var(--color-border) !important"}},Bme={class:"fw-semibold",style:{color:"var(--color-text)"}},Fme={class:"small",style:{color:"var(--color-muted)"}},zme={class:"badge bg-warning text-dark fs-6 meetup-time-badge"},Nme={class:"meetup-actions"},$me={class:"star-1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 512 512",style:{"enable-background":"new 0 0 512 512"},"xml:space":"preserve",width:"512",height:"512"},Ume={class:"star-2",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 512 512",style:{"enable-background":"new 0 0 512 512"},"xml:space":"preserve",width:"512",height:"512"},jme={class:"star-3",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 512 512",style:{"enable-background":"new 0 0 512 512"},"xml:space":"preserve",width:"512",height:"512"},Wme={class:"star-4",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 512 512",style:{"enable-background":"new 0 0 512 512"},"xml:space":"preserve",width:"512",height:"512"},Hme={class:"star-5",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 512 512",style:{"enable-background":"new 0 0 512 512"},"xml:space":"preserve",width:"512",height:"512"},Gme={class:"star-6",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 512 512",style:{"enable-background":"new 0 0 512 512"},"xml:space":"preserve",width:"512",height:"512"},qme={class:"star-1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 512 512",style:{"enable-background":"new 0 0 512 512"},"xml:space":"preserve",width:"512",height:"512"},Kme={class:"star-2",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 512 512",style:{"enable-background":"new 0 0 512 512"},"xml:space":"preserve",width:"512",height:"512"},Xme={class:"star-3",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 512 512",style:{"enable-background":"new 0 0 512 512"},"xml:space":"preserve",width:"512",height:"512"},Yme={class:"star-4",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 512 512",style:{"enable-background":"new 0 0 512 512"},"xml:space":"preserve",width:"512",height:"512"},Zme={class:"star-5",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 512 512",style:{"enable-background":"new 0 0 512 512"},"xml:space":"preserve",width:"512",height:"512"},Jme={class:"star-6",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 512 512",style:{"enable-background":"new 0 0 512 512"},"xml:space":"preserve",width:"512",height:"512"},Qme={class:"star-1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 512 512",style:{"enable-background":"new 0 0 512 512"},"xml:space":"preserve",width:"512",height:"512"},epe={class:"star-2",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 512 512",style:{"enable-background":"new 0 0 512 512"},"xml:space":"preserve",width:"512",height:"512"},tpe={class:"star-3",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 512 512",style:{"enable-background":"new 0 0 512 512"},"xml:space":"preserve",width:"512",height:"512"},npe={class:"star-4",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 512 512",style:{"enable-background":"new 0 0 512 512"},"xml:space":"preserve",width:"512",height:"512"},ipe={class:"star-5",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 512 512",style:{"enable-background":"new 0 0 512 512"},"xml:space":"preserve",width:"512",height:"512"},rpe={class:"star-6",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 512 512",style:{"enable-background":"new 0 0 512 512"},"xml:space":"preserve",width:"512",height:"512"},spe={class:"map-panel mt-5"},ope={class:"map-wrapper"},ape={key:0,class:"alert alert-warning map-overlay-message mb-0"},lpe={key:0,class:"map-overlay-message"},cpe={key:0,class:"alert alert-danger mt-4"},upe="pk.eyJ1IjoiY2hlZWF1biIsImEiOiJja2NydG83cWMwaGJsMnBqdjR5aHc3MzdlIn0.YGTZpi7JQMquEOv9E8K_bg",dpe="/sg-rail.geojson",l1=10,hpe={__name:"MeetupFinder",setup(e){function t(Ue){const ue=yv[Ue];if(!ue)return null;const we=Object.keys(ue).filter(fe=>fe!=="LRT Line");return we.length===0?null:we.length===1?{primary:Vy[we[0]],secondary:null}:{primary:Vy[we[0]],secondary:Vy[we[1]]}}const{allStations:n,shortestPath:i,estimateTimeMinutes:r,summariseSegments:a}=gP();let l=0;const h=tt([{id:++l,station:"",searchInput:"",showDropdown:!1,filteredStations:[],autocompleteSuggestion:""},{id:++l,station:"",searchInput:"",showDropdown:!1,filteredStations:[],autocompleteSuggestion:""}]),s=tt(!1),p=tt(""),_=tt(null),x=tt(!1),T=tt(null),k=tt(null),A=tt(null),M=tt(!1),R=tt(""),F=tt("");let z=null;const G=new Map,Y=new Map;let J=null,re=null;me(()=>!M.value&&!R.value);function X(){return h.value.length>=l1?(Ge(`Maximum of ${l1} people reached.`),!1):(h.value.push({id:++l,station:"",searchInput:"",showDropdown:!1,filteredStations:[],autocompleteSuggestion:""}),!0)}function U(Ue){if(h.value.length<=2){Ge("At least 2 persons are required.");return}h.value=h.value.filter(ue=>ue.id!==Ue),mt()}function H(Ue,ue){const we=parseInt(Ue.slice(1,3),16),fe=parseInt(Ue.slice(3,5),16),Ie=parseInt(Ue.slice(5,7),16);return`rgba(${we}, ${fe}, ${Ie}, ${ue})`}function W(Ue){if(!Ue)return[];let ue=yv[Ue];if(!ue){const fe=Ue.trim(),Ie=Object.keys(yv).find(je=>je.toLowerCase()===fe.toLowerCase());Ie&&(ue=yv[Ie])}if(!ue)return console.warn(`Station "${Ue}" not found in STATION_CODES_BY_LINE`),[];const we=[];return Object.entries(ue).forEach(([fe,Ie])=>{const je=Vy[fe];je&&Ie&&we.push({code:Ie,color:je,lineName:fe,bgColor:H(je,.12),borderColor:H(je,.3)})}),we}function ie(){_.value&&(T.value={..._.value}),x.value=!0,_.value=null,p.value="",ct(),Qe(),setTimeout(()=>{x.value=!1,T.value=null,Pt()},800)}function Q(Ue){const ue=Ue.searchInput?Ue.searchInput.toLowerCase().trim():"";if(!ue){Ue.filteredStations=[],Ue.showDropdown=!1,Ue.autocompleteSuggestion="";return}Ue.filteredStations=n.filter(we=>we.toLowerCase().includes(ue)).slice(0,20),Ue.autocompleteSuggestion=Ue.filteredStations.length>0?Ue.filteredStations[0]:"",Ue.showDropdown=!1}function te(Ue,ue){const we=ue.target.value;Ue.searchInput=we,Ue.searchInput&&(Ue.station=""),Q(Ue)}function ke(Ue,ue){ue.key==="Tab"||ue.key==="Enter"?Ue.autocompleteSuggestion&&(ue.preventDefault(),Ue.searchInput=Ue.autocompleteSuggestion,Be(Ue,Ue.autocompleteSuggestion)):ue.key==="Escape"&&(Ue.autocompleteSuggestion="")}function Re(Ue){Ue.station&&!Ue.searchInput?(Ue.searchInput="",Ue.filteredStations=[],Ue.autocompleteSuggestion=""):Ue.searchInput&&Q(Ue)}function Be(Ue,ue){Ue.station=ue,Ue.searchInput="",Ue.showDropdown=!1,Ue.filteredStations=[],Ue.autocompleteSuggestion=""}function Je(Ue){setTimeout(()=>{Ue.searchInput="",Ue.autocompleteSuggestion="",Ue.filteredStations=[]},200)}function nt(){h.value=[{id:++l,station:"",searchInput:"",showDropdown:!1,filteredStations:[],autocompleteSuggestion:""},{id:++l,station:"",searchInput:"",showDropdown:!1,filteredStations:[],autocompleteSuggestion:""}],_.value=null,p.value="",mt(),Pt(),Qe()}async function De(){p.value="",_.value=null;const Ue=h.value.map(Dt=>Dt.station).filter(Boolean);if(Ue.length<2){p.value="Please provide at least two starting stations.";return}s.value=!0;const ue=Date.now();await new Promise(Dt=>setTimeout(Dt,450));let we=null,fe=1/0,Ie=1/0,je=null;if(n.forEach(Dt=>{const gn=[],Kt=[];for(const Fn of Ue){if(Fn===Dt){Kt.push(0),gn.push({origin:Fn,path:{steps:[{station:Fn,line:""}],totalWeight:0},minutes:0,segments:[],steps:[{station:Fn,line:""}]});continue}const ni=i(Fn,Dt);if(!ni)return;const Ut=r(ni.totalWeight);Kt.push(Ut),gn.push({origin:Fn,path:ni,minutes:Ut,segments:a(ni),steps:ni.steps})}const Cn=Math.max(...Kt),Dn=Kt.reduce((Fn,ni)=>Fn+ni,0)/Kt.length;(Cn<fe||Cn===fe&&Dn<Ie)&&(fe=Cn,Ie=Dn,we=Dt,je=gn)}),!we||!je?.length){p.value="Unable to locate a fair meet-up point for the provided stations.";const Dt=Date.now()-ue,gn=Math.max(0,2e3-Dt);await new Promise(Kt=>setTimeout(Kt,gn)),s.value=!1;return}const Xe=je.reduce((Dt,gn)=>Dt+gn.minutes,0),yt=Math.max(...je.map(Dt=>Dt.minutes));_.value={station:we,totalMinutes:Xe,averageMinutes:Xe/je.length,maxTravelTime:yt,details:je};const wt=Date.now()-ue,Lt=Math.max(0,2e3-wt);await new Promise(Dt=>setTimeout(Dt,Lt)),s.value=!1,Hn(()=>{$t(we),setTimeout(()=>{ht(we),Pt()},300)}),Ge(`Suggested meeting point: ${we}`)}function Ge(Ue){Ue&&(F.value=Ue,z&&(clearTimeout(z),z=null),z=window.setTimeout(()=>{F.value="",z=null},3500))}function Ee(Ue){if(!A.value||!M.value||!Ue||(re&&(clearTimeout(re),it()),J=Ue.trim().toLowerCase().replace(/\s+/g," "),!A.value.getLayer("singatrain-stations")))return;const ue=[{time:0,radius:6,strokeWidth:2},{time:50,radius:18,strokeWidth:5},{time:140,radius:20,strokeWidth:5},{time:170,radius:15,strokeWidth:5},{time:200,radius:19,strokeWidth:5},{time:245,radius:17,strokeWidth:5},{time:275,radius:18,strokeWidth:5},{time:350,radius:6,strokeWidth:2}];let we=0;const fe=()=>{if(we>=ue.length){it();return}const Ie=ue[we];if(A.value.setPaintProperty("singatrain-stations","circle-radius",["case",["==",["get","name_lower"],J],Ie.radius,6]),A.value.setPaintProperty("singatrain-stations","circle-stroke-width",["case",["==",["get","name_lower"],J],Ie.strokeWidth,2]),A.value.setPaintProperty("singatrain-stations","circle-stroke-color",["case",["==",["get","name_lower"],J],"#ffffff",["coalesce",["get","secondary_color"],"#fff"]]),we++,we<ue.length){const Xe=ue[we].time-Ie.time;setTimeout(fe,Xe)}else re=setTimeout(()=>{it()},50)};fe()}function it(){if(!A.value||!M.value)return;J=null;const Ue=_.value?.station;A.value.getLayer("singatrain-stations")&&(Ue?$t(Ue):(A.value.setPaintProperty("singatrain-stations","circle-radius",6),A.value.setPaintProperty("singatrain-stations","circle-stroke-width",2),A.value.setPaintProperty("singatrain-stations","circle-stroke-color",["coalesce",["get","secondary_color"],"#fff"]),A.value.setPaintProperty("singatrain-stations","circle-opacity",1)))}function ot(Ue,ue){if(!Ue)return;if(_.value&&_.value.station===Ue){Ge("Cannot assign the suggested meet-up station. Click Cancel to modify participants.");return}Ee(Ue);const we=h.value.findIndex(Xe=>Xe.station===Ue);if(we!==-1){h.value[we].station="",Ge(`${Ue} removed from Person ${we+1}.`);return}const fe=h.value.findIndex(Xe=>!Xe.station);if(fe!==-1){h.value[fe].station=Ue,Ge(`${Ue} assigned to Person ${fe+1}.`);return}if(h.value.length>=l1){Ge(`Cannot add ${Ue}; maximum of ${l1} people reached.`);return}if(!X())return;const je=h.value.length-1;h.value[je].station=Ue,Ge(`${Ue} assigned to new Person ${je+1}.`)}function mt(){!A.value||!M.value||(Y.forEach(Ue=>Ue.remove()),Y.clear())}function Pt(){if(!A.value||!M.value)return;const Ue=_.value?.station;Ue&&($t(Ue),ht(Ue))}function $t(Ue){if(!A.value||!M.value||!Ue)return;const ue=Ue.trim().toLowerCase().replace(/\s+/g," ");console.log("Highlighting meetup station:",Ue,"normalized:",ue),A.value.getLayer("singatrain-stations")&&(A.value.setPaintProperty("singatrain-stations","circle-color",["case",["==",["get","name_lower"],ue],["coalesce",["get","primary_color"],["match",["get","station_colors"],"red","#d42e12","green","#009645","orange","#fa9e0d","brown","#9D5B25","purple","#9900aa","blue","#005ec4","#748477"]],"#9ca3af"]),A.value.setPaintProperty("singatrain-stations","circle-radius",["case",["==",["get","name_lower"],ue],10,6]),A.value.setPaintProperty("singatrain-stations","circle-stroke-width",["case",["==",["get","name_lower"],ue],4,2]),A.value.setPaintProperty("singatrain-stations","circle-stroke-color",["case",["==",["get","name_lower"],ue],["coalesce",["get","secondary_color"],"#fff"],"#9ca3af"])),A.value.getLayer("singatrain-labels")&&(A.value.setPaintProperty("singatrain-labels","text-color",["case",["==",["get","name_lower"],ue],"#2f3640","#9ca3af"]),A.value.setLayoutProperty("singatrain-labels","text-size",["case",["==",["get","name_lower"],ue],14,12])),A.value.getLayer("singatrain-lines")&&(A.value.setPaintProperty("singatrain-lines","line-color","#9ca3af"),A.value.setPaintProperty("singatrain-lines","line-opacity",.4))}function ct(){!A.value||!M.value||(A.value.getLayer("singatrain-stations")&&(A.value.setPaintProperty("singatrain-stations","circle-color",["coalesce",["get","primary_color"],["match",["get","station_colors"],"red","#d42e12","green","#009645","orange","#fa9e0d","brown","#9D5B25","purple","#9900aa","blue","#005ec4","#748477"]]),A.value.setPaintProperty("singatrain-stations","circle-radius",6),A.value.setPaintProperty("singatrain-stations","circle-stroke-width",["case",["has","secondary_color"],3,2]),A.value.setPaintProperty("singatrain-stations","circle-stroke-color",["coalesce",["get","secondary_color"],"#fff"])),A.value.getLayer("singatrain-labels")&&(A.value.setPaintProperty("singatrain-labels","text-color","#2f3640"),A.value.setLayoutProperty("singatrain-labels","text-size",12)),A.value.getLayer("singatrain-lines")&&(A.value.setPaintProperty("singatrain-lines","line-color",["match",["get","line_color"],"orangered","#d42e12","mediumseagreen","#009645","orange","#fa9e0d","saddlebrown","#9D5B25","darkmagenta","#9900aa","darkslateblue","#005ec4","#748477"]),A.value.setPaintProperty("singatrain-lines","line-opacity",.8)))}function ht(Ue){if(!A.value||!M.value||!Ue)return;const ue=G.get(Ue.toLowerCase());if(!ue)return;const we=W(Ue).map(fe=>fe.code);console.log("Zooming to station:",Ue,"with codes:",we),A.value.flyTo({center:ue.geometry.coordinates,zoom:17.5,pitch:60,bearing:0,essential:!0,speed:1.2})}function Qe(){!A.value||!M.value||(A.value.flyTo({center:[103.8475,1.3011],zoom:11,pitch:0,bearing:0,essential:!0,speed:.8}),ct())}async function kt(){if(A.value||!k.value)return;h0.accessToken=upe,A.value=new h0.Map({container:k.value,style:"mapbox://styles/mapbox/streets-v11",center:[103.8475,1.3011],zoom:11,pitch:0,bearing:0,renderWorldCopies:!1,pitchWithRotate:!0,attributionControl:!1,cooperativeGestures:!0}),A.value.addControl(new h0.NavigationControl({showCompass:!1}));const Ue=()=>{const we=k.value?.querySelector(".mapboxgl-ctrl-cooperative-gesture-hint");we&&we.remove()};Ue(),setTimeout(Ue,100),setTimeout(Ue,500);const ue=new MutationObserver(()=>{Ue()});k.value&&ue.observe(k.value,{childList:!0,subtree:!0}),A.value.on("load",async()=>{try{const we=await fetch(dpe);if(!we.ok)throw new Error(`Unable to load map data (HTTP ${we.status})`);const fe=await we.json();fe.features.filter(wt=>wt.geometry?.type==="Point"&&wt.properties?.stop_type==="station").forEach(wt=>{const Lt=wt.properties.name,Dt=t(Lt);Dt&&(wt.properties.primary_color=Dt.primary,Dt.secondary&&(wt.properties.secondary_color=Dt.secondary));const gn=Lt.trim().toLowerCase().replace(/\s+/g," ");wt.properties.name_lower=gn,G.set(gn,wt)}),A.value.addSource("singatrain-rail",{type:"geojson",data:fe}),A.value.addLayer({id:"singatrain-lines",source:"singatrain-rail",filter:["==",["geometry-type"],"LineString"],type:"line",paint:{"line-width":["interpolate",["linear"],["zoom"],10,2,16,6],"line-color":["match",["get","line_color"],"orangered","#d42e12","mediumseagreen","#009645","orange","#fa9e0d","saddlebrown","#9D5B25","darkmagenta","#9900aa","darkslateblue","#005ec4","#748477"],"line-opacity":.8},layout:{"line-cap":"round","line-join":"round"}}),A.value.addLayer({id:"singatrain-stations",source:"singatrain-rail",filter:["all",["==",["geometry-type"],"Point"],["==",["get","stop_type"],"station"]],type:"circle",paint:{"circle-radius":6,"circle-color":["coalesce",["get","primary_color"],["match",["get","station_colors"],"red","#d42e12","green","#009645","orange","#fa9e0d","brown","#9D5B25","purple","#9900aa","blue","#005ec4","#748477"]],"circle-stroke-color":["coalesce",["get","secondary_color"],"#fff"],"circle-stroke-width":["case",["has","secondary_color"],3,2]}}),A.value.addLayer({id:"singatrain-labels",source:"singatrain-rail",filter:["==",["get","stop_type"],"station"],type:"symbol",layout:{"text-field":["get","name"],"text-size":12,"text-anchor":"top","text-offset":[0,.8],"text-font":["DIN Pro Medium","Arial Unicode MS Bold"]},paint:{"text-color":"#2f3640","text-halo-color":"#fff","text-halo-width":1}}),A.value.on("mouseenter","singatrain-stations",()=>{A.value&&(A.value.getCanvas().style.cursor="pointer")}),A.value.on("mouseleave","singatrain-stations",()=>{A.value&&(A.value.getCanvas().style.cursor="")}),A.value.on("click","singatrain-stations",wt=>{const Dt=wt.features?.[0]?.properties?.name;ot(Dt,wt)});let Ie=0,je=null;const Xe=400,yt=1e-4;A.value.on("click",wt=>{if(A.value.queryRenderedFeatures(wt.point,{layers:["singatrain-stations"]}).length>0){Ie=0,je=null;return}const Dt=Date.now(),gn=wt.lngLat;Dt-Ie<Xe&&je&&Math.abs(gn.lng-je.lng)<yt&&Math.abs(gn.lat-je.lat)<yt?(A.value.getPitch()>0?Qe():_.value?.station&&ht(_.value.station),Ie=0,je=null):(Ie=Dt,je=gn)}),M.value=!0,R.value="",mt(),Pt()}catch(we){console.error("Failed to load rail GeoJSON",we),R.value="Map data is unavailable right now. Please try again later."}})}return Mr(()=>{kt()}),Ur(()=>{Y.forEach(Ue=>Ue.remove()),Y.clear(),A.value&&(A.value.remove(),A.value=null),z&&(clearTimeout(z),z=null)}),Yt(h,()=>{mt()},{deep:!0}),Yt(()=>_.value?.station,()=>{Pt()}),Yt(M,Ue=>{Ue&&(mt(),Pt())}),(Ue,ue)=>(Gt(),on("section",dme,[V("div",hme,[V("div",null,[ue[1]||(ue[1]=V("h2",{class:"section-title mb-2"},"Meet-up Point Finder",-1)),ce(ume,{words:"Where are you starting from? Enter your home MRT, and we'll find the fairest meeting point for your group!",duration:2500})])]),V("div",fme,[_.value===null&&!x.value?(Gt(!0),on(an,{key:0},cs(h.value,(we,fe)=>(Gt(),on("div",{key:we.id,class:_t(["person-card",{active:!!we.station}])},[V("div",mme,[V("div",pme,en(fe+1),1),V("div",gme,[V("h6",null,"Person "+en(fe+1),1)]),h.value.length>2?(Gt(),on("button",{key:0,class:"btn btn-sm btn-outline-danger ms-auto",type:"button",onClick:Ie=>U(we.id)},[...ue[2]||(ue[2]=[V("span",{class:"material-icons"},"delete",-1)])],8,vme)):xi("",!0)]),V("div",_me,[V("div",yme,[V("div",bme,[V("div",xme,[V("input",{ref_for:!0,ref:"inputRef",value:we.searchInput||we.station||"",type:"text",class:_t(["input",{"has-badges":we.station&&!we.searchInput}]),placeholder:!we.station&&!we.searchInput?"-- Select station --":"",autocomplete:"off",onInput:Ie=>te(we,Ie),onKeydown:Ie=>ke(we,Ie),onFocus:Ie=>Re(we),onBlur:Ie=>Je(we)},null,42,wme),we.autocompleteSuggestion&&we.searchInput&&we.searchInput.length>0&&we.autocompleteSuggestion.toLowerCase().startsWith(we.searchInput.toLowerCase())?(Gt(),on("span",Tme,[V("span",Sme,en(we.searchInput),1),V("span",Eme,en(we.autocompleteSuggestion.substring(we.searchInput.length)),1)])):xi("",!0)]),we.station&&!we.searchInput?(Gt(),on("div",Cme,[(Gt(!0),on(an,null,cs(W(we.station),Ie=>(Gt(),on("span",{key:Ie.code,class:"input-line-badge",style:Xt({backgroundColor:Ie.bgColor,color:Ie.color,borderColor:Ie.borderColor})},[V("strong",null,en(Ie.code),1)],4))),128))])):xi("",!0),V("span",{class:_t(["icon material-icons",{"icon-active":we.searchInput||we.station}])},"place",2)])])])],2))),128)):xi("",!0),ce(Rl,{name:"meetup-result",mode:"out-in"},{default:vi(()=>[_.value!==null||x.value?(Gt(),on("div",{key:(_.value||T.value)?.station||"hiding",class:"meetup-results-card person-card"},[V("div",kme,[V("h4",Ime,[ue[3]||(ue[3]=V("span",{class:"material-icons me-2 text-danger"},"place",-1)),V("span",{class:"meetup-station-name",style:{cursor:"pointer",transition:"color 0.2s ease"},onClick:ue[0]||(ue[0]=we=>ht((_.value||T.value)?.station))},[V("strong",null,"Suggested meet-up: "+en((_.value||T.value)?.station||""),1)]),V("div",Ame,[(Gt(!0),on(an,null,cs(W((_.value||T.value)?.station),we=>(Gt(),on("span",{key:we.code,class:"station-code-badge",style:Xt({backgroundColor:we.bgColor,color:we.color,borderColor:we.borderColor})},[V("strong",null,en(we.code),1)],4))),128))])]),V("button",{class:"pushable pushable-cancel",type:"button",onClick:ie},[...ue[4]||(ue[4]=[V("span",{class:"shadow"},null,-1),V("span",{class:"edge"},null,-1),V("span",{class:"front"},"Cancel",-1)])])]),V("div",Pme,[V("div",Mme,[V("div",Dme,[V("p",Lme,[ue[5]||(ue[5]=V("strong",null,"Total travel time:",-1)),Bn(" "+en((_.value||T.value)?.totalMinutes||0)+" minutes ",1)]),V("p",Rme,[ue[6]||(ue[6]=V("strong",null,"Average per person:",-1)),Bn(" "+en((_.value||T.value)?.averageMinutes?.toFixed(1)||"0.0")+" minutes ",1)])])]),V("div",Ome,[V("div",Vme,[ue[7]||(ue[7]=V("h6",{class:"text-uppercase fw-semibold mb-2",style:{color:"var(--color-text)"}},"Individual journeys",-1)),(Gt(!0),on(an,null,cs((_.value||T.value)?.details||[],we=>(Gt(),on("div",{key:we.origin,class:"d-flex justify-content-between align-items-center border-bottom py-2",style:{"border-bottom-color":"var(--color-border) !important"}},[V("div",null,[V("div",Bme,en(we.origin),1),V("div",Fme,en(we.steps.length)+" stops / "+en(we.segments.length)+" segment(s) ",1)]),V("span",zme,en(we.minutes)+" min",1)]))),128))])])])])):xi("",!0)]),_:1})]),V("div",Nme,[V("button",{class:"custom-btn",type:"button",onClick:De},[ue[14]||(ue[14]=V("span",{class:"material-icons me-1"},"travel_explore",-1)),ue[15]||(ue[15]=Bn(" Meet-up ",-1)),(Gt(),on("svg",$me,[...ue[8]||(ue[8]=[V("polygon",{class:"fil0",points:"259.216,29.942 330.286,193.919 512,222.877 378,357.736 404.58,439.15 259.216,378.062 113.852,439.15 140.432,357.736 6,222.877 188.146,193.919 "},null,-1)])])),(Gt(),on("svg",Ume,[...ue[9]||(ue[9]=[V("polygon",{class:"fil0",points:"259.216,29.942 330.286,193.919 512,222.877 378,357.736 404.58,439.15 259.216,378.062 113.852,439.15 140.432,357.736 6,222.877 188.146,193.919 "},null,-1)])])),(Gt(),on("svg",jme,[...ue[10]||(ue[10]=[V("polygon",{class:"fil0",points:"259.216,29.942 330.286,193.919 512,222.877 378,357.736 404.58,439.15 259.216,378.062 113.852,439.15 140.432,357.736 6,222.877 188.146,193.919 "},null,-1)])])),(Gt(),on("svg",Wme,[...ue[11]||(ue[11]=[V("polygon",{class:"fil0",points:"259.216,29.942 330.286,193.919 512,222.877 378,357.736 404.58,439.15 259.216,378.062 113.852,439.15 140.432,357.736 6,222.877 188.146,193.919 "},null,-1)])])),(Gt(),on("svg",Hme,[...ue[12]||(ue[12]=[V("polygon",{class:"fil0",points:"259.216,29.942 330.286,193.919 512,222.877 378,357.736 404.58,439.15 259.216,378.062 113.852,439.15 140.432,357.736 6,222.877 188.146,193.919 "},null,-1)])])),(Gt(),on("svg",Gme,[...ue[13]||(ue[13]=[V("polygon",{class:"fil0",points:"259.216,29.942 330.286,193.919 512,222.877 378,357.736 404.58,439.15 259.216,378.062 113.852,439.15 140.432,357.736 6,222.877 188.146,193.919 "},null,-1)])]))]),V("button",{class:"custom-btn",type:"button",onClick:X},[ue[22]||(ue[22]=V("span",{class:"material-icons me-1"},"person_add",-1)),ue[23]||(ue[23]=Bn(" Add person ",-1)),(Gt(),on("svg",qme,[...ue[16]||(ue[16]=[V("polygon",{class:"fil0",points:"259.216,29.942 330.286,193.919 512,222.877 378,357.736 404.58,439.15 259.216,378.062 113.852,439.15 140.432,357.736 6,222.877 188.146,193.919 "},null,-1)])])),(Gt(),on("svg",Kme,[...ue[17]||(ue[17]=[V("polygon",{class:"fil0",points:"259.216,29.942 330.286,193.919 512,222.877 378,357.736 404.58,439.15 259.216,378.062 113.852,439.15 140.432,357.736 6,222.877 188.146,193.919 "},null,-1)])])),(Gt(),on("svg",Xme,[...ue[18]||(ue[18]=[V("polygon",{class:"fil0",points:"259.216,29.942 330.286,193.919 512,222.877 378,357.736 404.58,439.15 259.216,378.062 113.852,439.15 140.432,357.736 6,222.877 188.146,193.919 "},null,-1)])])),(Gt(),on("svg",Yme,[...ue[19]||(ue[19]=[V("polygon",{class:"fil0",points:"259.216,29.942 330.286,193.919 512,222.877 378,357.736 404.58,439.15 259.216,378.062 113.852,439.15 140.432,357.736 6,222.877 188.146,193.919 "},null,-1)])])),(Gt(),on("svg",Zme,[...ue[20]||(ue[20]=[V("polygon",{class:"fil0",points:"259.216,29.942 330.286,193.919 512,222.877 378,357.736 404.58,439.15 259.216,378.062 113.852,439.15 140.432,357.736 6,222.877 188.146,193.919 "},null,-1)])])),(Gt(),on("svg",Jme,[...ue[21]||(ue[21]=[V("polygon",{class:"fil0",points:"259.216,29.942 330.286,193.919 512,222.877 378,357.736 404.58,439.15 259.216,378.062 113.852,439.15 140.432,357.736 6,222.877 188.146,193.919 "},null,-1)])]))]),V("button",{class:"custom-btn",type:"button",onClick:nt},[ue[30]||(ue[30]=V("span",{class:"material-icons me-1"},"restart_alt",-1)),ue[31]||(ue[31]=Bn(" Clear ",-1)),(Gt(),on("svg",Qme,[...ue[24]||(ue[24]=[V("polygon",{class:"fil0",points:"259.216,29.942 330.286,193.919 512,222.877 378,357.736 404.58,439.15 259.216,378.062 113.852,439.15 140.432,357.736 6,222.877 188.146,193.919 "},null,-1)])])),(Gt(),on("svg",epe,[...ue[25]||(ue[25]=[V("polygon",{class:"fil0",points:"259.216,29.942 330.286,193.919 512,222.877 378,357.736 404.58,439.15 259.216,378.062 113.852,439.15 140.432,357.736 6,222.877 188.146,193.919 "},null,-1)])])),(Gt(),on("svg",tpe,[...ue[26]||(ue[26]=[V("polygon",{class:"fil0",points:"259.216,29.942 330.286,193.919 512,222.877 378,357.736 404.58,439.15 259.216,378.062 113.852,439.15 140.432,357.736 6,222.877 188.146,193.919 "},null,-1)])])),(Gt(),on("svg",npe,[...ue[27]||(ue[27]=[V("polygon",{class:"fil0",points:"259.216,29.942 330.286,193.919 512,222.877 378,357.736 404.58,439.15 259.216,378.062 113.852,439.15 140.432,357.736 6,222.877 188.146,193.919 "},null,-1)])])),(Gt(),on("svg",ipe,[...ue[28]||(ue[28]=[V("polygon",{class:"fil0",points:"259.216,29.942 330.286,193.919 512,222.877 378,357.736 404.58,439.15 259.216,378.062 113.852,439.15 140.432,357.736 6,222.877 188.146,193.919 "},null,-1)])])),(Gt(),on("svg",rpe,[...ue[29]||(ue[29]=[V("polygon",{class:"fil0",points:"259.216,29.942 330.286,193.919 512,222.877 378,357.736 404.58,439.15 259.216,378.062 113.852,439.15 140.432,357.736 6,222.877 188.146,193.919 "},null,-1)])]))])]),V("div",spe,[ue[33]||(ue[33]=H1('<div class="d-flex flex-wrap align-items-center justify-content-between gap-3 mb-3" data-v-771bb694><div class="d-flex align-items-center gap-2" data-v-771bb694><span class="material-icons text-danger" data-v-771bb694>map</span><h5 class="mb-0" data-v-771bb694>Interactive MRT Network</h5></div><div class="small" data-v-771bb694>Click a station to assign or remove it for the next available person.</div></div>',1)),V("div",ope,[V("div",{ref_key:"mapContainer",ref:k,class:"meetup-map rounded-4"},null,512),V("div",{class:_t(["map-loading-overlay",{show:s.value}])},[...ue[32]||(ue[32]=[H1('<div class="map-loading-content" data-v-771bb694><div class="capybaraloader" data-v-771bb694><div class="capybara" data-v-771bb694><div class="capy" data-v-771bb694><div class="capyhead" data-v-771bb694><div class="capyear" data-v-771bb694><div class="capyear2" data-v-771bb694></div></div><div class="capyear" data-v-771bb694><div class="capyear2" data-v-771bb694></div></div><div class="capymouth" data-v-771bb694><div class="capylips" data-v-771bb694></div><div class="capylips" data-v-771bb694></div></div><div class="capyeye" data-v-771bb694></div><div class="capyeye" data-v-771bb694></div></div><div class="capyleg" data-v-771bb694><div class="capyleg2" data-v-771bb694></div><div class="capyleg2" data-v-771bb694></div></div></div></div><div class="loader" data-v-771bb694><div class="loaderline" data-v-771bb694></div></div></div></div>',1)])],2),R.value?(Gt(),on("div",ape,en(R.value),1)):xi("",!0)]),F.value?(Gt(),on("div",lpe,en(F.value),1)):xi("",!0)]),p.value?(Gt(),on("div",cpe,en(p.value),1)):xi("",!0)]))}},fpe=fg(hpe,[["__scopeId","data-v-771bb694"]]),mpe={id:"profile",class:"section-card"},ppe={key:0,class:"overlay-wrapper"},gpe={key:0,class:"overlay-message error"},vpe={key:1,class:"overlay-message success"},_pe={key:1,id:"auth-section"},ype={key:0,id:"password-requirements"},bpe={class:"auth-links"},xpe={key:2,class:"modal-overlay"},wpe={class:"modal-content"},Tpe={class:"modal-buttons"},Spe={key:3,id:"dashboard-section"},Epe={class:"profile-layout"},Cpe={class:"left-column"},kpe={class:"card",id:"change-name-div"},Ipe={class:"card",id:"add-favorite-div"},Ape=["value"],Ppe={class:"flip-card-back"},Mpe={class:"card-header"},Dpe={class:"account-info"},Lpe={class:"account-row"},Rpe={class:"account-row"},Ope={class:"favorites-list"},Vpe={id:"favoriteList"},Bpe=["onClick"],Fpe={key:4,class:"modal-overlay"},zpe={class:"modal-content"},Npe={key:0,style:{color:"var(--bs-body-color)"},class:"error-message"},$pe={key:5,class:"loading-overlay"},Upe={__name:"Profile",setup(e){const t=tt(null),n=tt(""),i=tt(""),r=tt(""),a=tt(""),l=tt("");let h=null;const s=tt(!1),p=tt(!1),_=tt(""),x=tt("--/--/----"),{state:T,addFavorite:k,removeFavorite:A}=Gv(),M=me(()=>T.favorites),R=tt(""),F=tt(""),z=tt(!1),G=tt(""),Y=tt(!1),J=tt(!1),re=tt(!1),X=tt(!1),U=tt(!1),H=tt(""),W=tt(!1),ie=tt(!1),Q=tt($6);function te(ht,Qe,kt=3e3){ht==="error"?(a.value=Qe,l.value=""):(l.value=Qe,a.value=""),h&&clearTimeout(h),h=setTimeout(()=>{a.value="",l.value="",h=null},kt)}Ur(()=>{h&&clearTimeout(h),p.value=!1,z.value=!1,W.value=!1});let ke=null;Mr(()=>{ke=E5(ht=>{t.value=ht,p.value=!1,z.value=!1,a.value="",l.value=""})}),Ur(()=>{ke&&ke()});function Re(){a.value="",l.value=""}function Be(ht){switch(ht){case"auth/email-already-in-use":return"This email is already in use. Try signing in or resetting your password.";case"auth/invalid-email":return"Invalid email format.";case"auth/operation-not-allowed":return"Email/password accounts are not enabled.";case"auth/weak-password":return"Password too weak. Please use a stronger one.";case"auth/user-not-found":return"No user found with this email.";case"auth/wrong-password":case"auth/invalid-credential":case"auth/invalid-login-credentials":return"Invalid email or password.";case"auth/too-many-requests":return"Too many attempts. Please try again later.";case"auth/network-request-failed":return"Network error. Please check your internet connection.";default:return"An unknown error occurred. Please try again."}}const Je=async()=>{Re();const ht=await Xee(n.value,i.value);ht.success?(a.value="",te("success","Welcome back!"),t.value=ht.user):(te("error",ht.message),l.value="")},nt=async()=>{Re();const ht=i.value||"";if(!/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%^&*(),.?":{}|<>]).{8,}$/.test(ht)){a.value="Password must include at least 8 characters, one uppercase letter, one lowercase letter, one number, and one special character.",l.value="";return}const kt=await Kee(n.value,ht);kt.success?(a.value="",te("success","Account created successfully!"),t.value=kt.user,await $t(kt.user)):(te("error",kt.message),l.value="")};Yt(i,ht=>{const Qe=(ht||"").toString();s.value=Qe.length>0,Y.value=Qe.length>=6,J.value=/[A-Z]/.test(Qe),re.value=/[a-z]/.test(Qe),X.value=/[0-9]/.test(Qe),U.value=/[!@#$%^&*(),.?":{}|<>]/.test(Qe)});const De=async()=>{try{await Yee(),Re(),te("success","You have been signed out.")}catch(ht){te("error",Be(ht.code))}},Ge=async()=>{if(!t.value){te("error","No user is currently logged in.");return}if(!G.value){H.value="Please enter your password to confirm deletion.";return}W.value=!0;try{const ht=tg.credential(t.value.email,G.value);await aY(t.value,ht);const Qe=t.value.uid;await Hee(kp(Ap,"users",Qe)),await mY(t.value),te("success","Your account has been deleted."),z.value=!1,H.value="",setTimeout(()=>{t.value=null,_.value="",x.value="--/--/----",M.value=[],G.value="",W.value=!1},1200)}catch(ht){console.error("Delete account error:",ht),W.value=!1,H.value=ht.code==="auth/invalid-credential"?"Incorrect password. Please try again.":"Account deletion failed. Please try again."}},Ee=()=>{z.value=!1,G.value="",H.value=""},it=async()=>{if(Re(),!r.value)return te("error","Enter your email first.");try{await Zee(r.value),te("success","Password reset email sent!"),p.value=!1,r.value=""}catch(ht){te("error",Be(ht.code))}},ot=async()=>{try{await Jee(t.value.uid,_.value),te("success","Profile updated!")}catch{te("error","Failed to update profile.")}},mt=async()=>{if(!R.value||!F.value){te("error","Enter both label and station.");return}const ht={label:R.value,station:F.value};try{t.value?.uid&&(await Qee(t.value.uid,ht),k(ht),R.value="",F.value="",te("success","Successfully added new station."))}catch(Qe){console.error("Add favorite error:",Qe),te("error","Failed to add favorite.")}},Pt=async ht=>{try{if(!t.value?.uid)return;A(ht);const Qe=T.favorites.map(kt=>({...kt}));await AT(kp(Ap,"users",t.value.uid),{favorite_stations:Qe}),te("success","Favorite removed!")}catch(Qe){console.error("Remove favorite error:",Qe),te("error","Failed to remove favorite.")}};E5(async ht=>{t.value=ht,Re(),ht?await $t(ht):(_.value="",x.value="--/--/----",M.value=[])});async function $t(ht){if(!ht)return;const Qe=kp(Ap,"users",ht.uid),kt=await jee(Qe);if(kt.exists()){const Ue=kt.data();_.value=Ue.name||"Anonymous",x.value=Ue.created_at?.toDate?Ue.created_at.toDate().toLocaleDateString():"--/--/----",T.favorites.splice(0,T.favorites.length),Array.isArray(Ue.favorite_stations)&&Ue.favorite_stations.forEach(ue=>k(ue))}else{const Ue={name:"Anonymous",email:ht.email,created_at:new Date,favorite_stations:[]};await uN(Qe,Ue),_.value=Ue.name,x.value=Ue.created_at.toLocaleDateString(),T.favorites.splice(0,T.favorites.length)}}const ct=()=>{window.innerWidth<=992&&(ie.value=!ie.value)};return(ht,Qe)=>(Gt(),on("section",mpe,[a.value||l.value?(Gt(),on("div",ppe,[a.value?(Gt(),on("div",gpe,en(a.value),1)):xi("",!0),l.value?(Gt(),on("div",vpe,en(l.value),1)):xi("",!0)])):xi("",!0),t.value?xi("",!0):(Gt(),on("div",_pe,[Qe[11]||(Qe[11]=V("h2",{class:"mt-5 pt-5"},"Join or Sign In",-1)),Qe[12]||(Qe[12]=V("label",{for:"auth-email"},"Email:",-1)),Li(V("input",{type:"email",id:"auth-email","onUpdate:modelValue":Qe[0]||(Qe[0]=kt=>n.value=kt),placeholder:"Enter your email",class:_t({"has-value":n.value})},null,2),[[_f,n.value]]),Qe[13]||(Qe[13]=V("label",{for:"auth-password"},"Password:",-1)),Li(V("input",{type:"password",id:"auth-password","onUpdate:modelValue":Qe[1]||(Qe[1]=kt=>i.value=kt),placeholder:"Enter your password",class:_t({"has-value":i.value})},null,2),[[_f,i.value]]),s.value?(Gt(),on("div",ype,[Qe[10]||(Qe[10]=V("p",null,"Password must contain:",-1)),V("span",{class:_t({met:Y.value,"not-met":!Y.value})},"- At least 6 characters",2),V("span",{class:_t({met:J.value,"not-met":!J.value})},"- An uppercase letter",2),V("span",{class:_t({met:re.value,"not-met":!re.value})},"- A lowercase letter",2),V("span",{class:_t({met:X.value,"not-met":!X.value})},"- A number",2),V("span",{class:_t({met:U.value,"not-met":!U.value})},"- A special character (!@#$%^&*)",2)])):xi("",!0),V("div",{class:"auth-buttons"},[V("button",{id:"login-btn",onClick:Je},"Sign In")]),V("div",bpe,[V("a",{href:"#",onClick:Qe[2]||(Qe[2]=ra(kt=>{p.value=!0,Re()},["prevent"]))},"Forgot Password?"),V("a",{href:"#",onClick:ra(nt,["prevent"]),class:"register-link"},"Register New Account")])])),p.value?(Gt(),on("div",xpe,[V("div",wpe,[Qe[14]||(Qe[14]=V("h3",null,"Reset Your Password",-1)),Qe[15]||(Qe[15]=V("p",null,"Enter your email to receive a password reset link.",-1)),Li(V("input",{type:"email","onUpdate:modelValue":Qe[3]||(Qe[3]=kt=>r.value=kt),placeholder:"Enter your email"},null,512),[[_f,r.value]]),V("div",Tpe,[V("button",{type:"button",class:"cancel",onClick:Qe[4]||(Qe[4]=kt=>p.value=!1)}," Cancel "),V("button",{type:"button",class:"confirm",onClick:it}," Send Reset Email ")])])])):xi("",!0),t.value?(Gt(),on("div",Spe,[Qe[28]||(Qe[28]=V("h2",{class:"mt-5 pt-5"},"Welcome to SingaTrain!",-1)),V("p",null,[Qe[16]||(Qe[16]=Bn("You are logged in as: ",-1)),V("strong",null,en(t.value.email),1)]),V("div",Epe,[V("div",Cpe,[V("div",kpe,[Qe[17]||(Qe[17]=V("h3",null,"Change Display Name",-1)),Li(V("input",{type:"text","onUpdate:modelValue":Qe[5]||(Qe[5]=kt=>_.value=kt),placeholder:"Current name"},null,512),[[_f,_.value]]),V("button",{onClick:ot},"Save Profile")]),V("div",Ipe,[Qe[19]||(Qe[19]=V("h3",null,"Add New Favorite Station",-1)),Qe[20]||(Qe[20]=V("label",{for:"favoriteLabel"},"Label:",-1)),Li(V("input",{type:"text",id:"favoriteLabel","onUpdate:modelValue":Qe[6]||(Qe[6]=kt=>R.value=kt),placeholder:"Favorite name"},null,512),[[_f,R.value]]),Qe[21]||(Qe[21]=V("label",{for:"favoriteStation"},"Station:",-1)),Li(V("select",{id:"favoriteStation","onUpdate:modelValue":Qe[7]||(Qe[7]=kt=>F.value=kt)},[Qe[18]||(Qe[18]=V("option",{disabled:"",value:""},"Select a station",-1)),(Gt(!0),on(an,null,cs(Q.value,kt=>(Gt(),on("option",{key:kt,value:kt},en(kt),9,Ape))),128))],512),[[T0,F.value]]),V("button",{onClick:mt},"Add Favorite Station")])]),V("div",{class:"card flip-card",id:"user-info-card",onClick:ct},[V("div",{class:_t(["flip-card-inner",{"is-flipped":ie.value}])},[Qe[27]||(Qe[27]=V("div",{class:"flip-card-front"},[V("img",{src:z6,alt:"SingaTrain Logo",class:"logo"}),V("p",{class:"hover-hint"})],-1)),V("div",Ppe,[V("div",Mpe,[V("h2",null,en(_.value||"User Name"),1)]),V("div",Dpe,[V("div",Lpe,[Qe[23]||(Qe[23]=V("span",{class:"material-icons",style:{color:"#c2410c"}},"calendar_today",-1)),V("div",null,[Qe[22]||(Qe[22]=V("p",{class:"label"},"Member Since",-1)),V("p",null,en(x.value),1)])]),V("div",Rpe,[Qe[25]||(Qe[25]=V("span",{class:"material-icons",style:{color:"#c2410c"}},"star",-1)),V("div",null,[Qe[24]||(Qe[24]=V("p",{class:"label"},"Favorite Stations",-1)),V("p",null,en(M.value.length)+" stations",1)])])]),Qe[26]||(Qe[26]=V("h3",{class:"favorites-title"},"Your Favorite Stations",-1)),V("div",Ope,[V("ul",Vpe,[(Gt(!0),on(an,null,cs(M.value,(kt,Ue)=>(Gt(),on("li",{key:Ue},[V("span",null,[V("strong",null,en(kt.label),1),Bn(" "+en(kt.station),1)]),V("button",{onClick:ue=>Pt(kt)},"Remove",8,Bpe)]))),128))])])])],2)])]),V("button",{id:"logout-btn",onClick:De},"Sign Out"),V("button",{id:"delete-account-btn",onClick:Qe[8]||(Qe[8]=kt=>z.value=!0)}," Delete Account ")])):xi("",!0),z.value?(Gt(),on("div",Fpe,[V("div",zpe,[Qe[29]||(Qe[29]=V("h3",null,"Confirm Account Deletion",-1)),Qe[30]||(Qe[30]=V("p",null,"Enter your password to confirm deletion. This action cannot be undone.",-1)),Li(V("input",{type:"password","onUpdate:modelValue":Qe[9]||(Qe[9]=kt=>G.value=kt),placeholder:"Password"},null,512),[[_f,G.value]]),H.value?(Gt(),on("div",Npe,en(H.value),1)):xi("",!0),V("div",{class:"modal-buttons"},[V("button",{type:"button",class:"cancel",onClick:Ee},"Cancel"),V("button",{type:"button",class:"confirm",onClick:Ge},"Yes, Delete")])])])):xi("",!0),W.value?(Gt(),on("div",$pe,[...Qe[31]||(Qe[31]=[H1('<div class="train-loader"><div class="track-wrapper"><div class="track"></div><div class="train" aria-hidden="true"><div class="engine"></div><div class="car"></div><div class="car"></div></div></div><p>Clearing your data... please wait </p></div>',1)])])):xi("",!0)]))}},AC={"Downtown Line":{"Towards Expo":[{code:"DT1",station:"Bukit Panjang",first:"5:30 AM",last:"11:35 PM"},{code:"DT7",station:"Sixth Avenue",first:"5:38 AM",last:"11:42 PM"},{code:"DT14",station:"Bugis",first:"5:44 AM",last:"11:55 PM"},{code:"DT21",station:"Bencoolen",first:"5:47 AM",last:"12:02 AM"},{code:"DT35",station:"Expo",first:"5:50 AM",last:"12:15 AM"}],"Towards Bukit Panjang":[{code:"DT35",station:"Expo",first:"5:32 AM",last:"11:40 PM"},{code:"DT29",station:"Bedok North",first:"5:41 AM",last:"11:52 PM"},{code:"DT20",station:"Fort Canning",first:"5:49 AM",last:"12:08 AM"},{code:"DT9",station:"Newton",first:"5:55 AM",last:"12:18 AM"},{code:"DT1",station:"Bukit Panjang",first:"6:03 AM",last:"12:33 AM"}]},"North East Line":{"Towards HarbourFront":[{code:"NE17",station:"Punggol",first:"5:36 AM",last:"11:47 PM"},{code:"NE12",station:"Serangoon",first:"5:42 AM",last:"11:59 PM"},{code:"NE7",station:"Little India",first:"5:47 AM",last:"12:08 AM"},{code:"NE3",station:"Outram Park",first:"5:53 AM",last:"12:20 AM"},{code:"NE1",station:"HarbourFront",first:"5:56 AM",last:"12:24 AM"}],"Towards Punggol Coast":[{code:"NE1",station:"HarbourFront",first:"5:34 AM",last:"11:45 PM"},{code:"NE4",station:"Chinatown",first:"5:38 AM",last:"11:53 PM"},{code:"NE10",station:"Potong Pasir",first:"5:46 AM",last:"12:05 AM"},{code:"NE14",station:"Hougang",first:"5:51 AM",last:"12:15 AM"},{code:"NE18",station:"Punggol Coast (future)",first:"",last:""}]},"North-South Line":{},"East-West Line":{},"Thomson-East Coast Line":{},"Circle Line":{},"LRT Line":{}},jpe={class:"section-card"},Wpe={class:"row g-3 align-items-end"},Hpe={class:"col-md-4"},Gpe=["value"],qpe={class:"col-md-4"},Kpe=["value"],Xpe={class:"col-md-4"},Ype={class:"border rounded-3 p-3 mt-4"},Zpe={class:"d-flex justify-content-between align-items-center mb-3"},Jpe={class:"badge bg-secondary"},Qpe={key:0,class:"text-muted"},ege={class:"fw-semibold"},tge={class:"text-muted small"},nge={class:"text-end"},ige={class:"text-muted small"},rge={__name:"FirstLastTrain",setup(e){const t=Object.keys(AC),n=tt(t[0]),i=me(()=>Object.keys(AC[n.value]||{})),r=tt(""),a=tt("");Yt(i,h=>{h.includes(r.value)||(r.value=h[0]||"")},{immediate:!0});const l=me(()=>{const h=AC[n.value]?.[r.value]||[];if(!a.value)return h;const s=a.value.toLowerCase();return h.filter(p=>p.station.toLowerCase().includes(s)||p.code.toLowerCase().includes(s))});return(h,s)=>(Gt(),on("section",jpe,[s[8]||(s[8]=V("h2",{class:"section-title mb-3"},"First & Last Train Timings",-1)),s[9]||(s[9]=V("p",{class:"text-muted"},[Bn(" Reference departures for selected lines and directions. Integrate with the real LTA DataMall feed by replacing the static dataset in "),V("code",null,"src/data/trainTimings.js"),Bn(". ")],-1)),V("div",Wpe,[V("div",Hpe,[s[3]||(s[3]=V("label",{class:"form-label",for:"timingLine"},"Line",-1)),Li(V("select",{id:"timingLine","onUpdate:modelValue":s[0]||(s[0]=p=>n.value=p),class:"form-select"},[(Gt(!0),on(an,null,cs(bi(t),p=>(Gt(),on("option",{key:p,value:p},en(p),9,Gpe))),128))],512),[[T0,n.value]])]),V("div",qpe,[s[4]||(s[4]=V("label",{class:"form-label",for:"timingDirection"},"Direction",-1)),Li(V("select",{id:"timingDirection","onUpdate:modelValue":s[1]||(s[1]=p=>r.value=p),class:"form-select"},[(Gt(!0),on(an,null,cs(i.value,p=>(Gt(),on("option",{key:p,value:p},en(p),9,Kpe))),128))],512),[[T0,r.value]])]),V("div",Xpe,[s[5]||(s[5]=V("label",{class:"form-label",for:"timingSearch"},"Search station",-1)),Li(V("input",{id:"timingSearch","onUpdate:modelValue":s[2]||(s[2]=p=>a.value=p),type:"search",class:"form-control",placeholder:"Start typing a station"},null,512),[[_f,a.value]])])]),V("div",Ype,[V("div",Zpe,[V("strong",null,en(n.value)+"  "+en(r.value),1),V("span",Jpe,en(l.value.length)+" station(s)",1)]),l.value.length?xi("",!0):(Gt(),on("div",Qpe,"No stations match your search.")),(Gt(!0),on(an,null,cs(l.value,p=>(Gt(),on("div",{key:p.code,class:"d-flex justify-content-between py-2 border-top"},[V("div",null,[V("div",ege,en(p.station),1),V("div",tge,en(p.code),1)]),V("div",nge,[V("div",null,[s[6]||(s[6]=V("strong",null,"First",-1)),Bn(" "+en(p.first),1)]),V("div",ige,[s[7]||(s[7]=V("strong",null,"Last",-1)),Bn(" "+en(p.last),1)])])]))),128))])]))}},sge={key:0,class:"train-reveal-overlay"},oge={__name:"TrainReveal",setup(e){const t=tt(!0);return Mr(()=>{setTimeout(()=>{t.value=!1},4e3)}),(n,i)=>(Gt(),Fa(Rl,{name:"train-reveal"},{default:vi(()=>[t.value?(Gt(),on("div",sge,[...i[0]||(i[0]=[V("svg",{class:"reveal-mask",width:"100%",height:"100%"},[V("defs",null,[V("mask",{id:"headlightMask"},[V("rect",{width:"100%",height:"100%",fill:"white"}),V("circle",{cx:"35%",cy:"50%",r:"0",fill:"black"},[V("animate",{attributeName:"r",from:"0",to:"150%",dur:"1.5s",begin:"2.5s",fill:"freeze"})]),V("circle",{cx:"65%",cy:"50%",r:"0",fill:"black"},[V("animate",{attributeName:"r",from:"0",to:"150%",dur:"1.5s",begin:"2.5s",fill:"freeze"})])])]),V("rect",{width:"100%",height:"100%",fill:"#000",mask:"url(#headlightMask)"})],-1),V("div",{class:"headlight headlight-left"},null,-1),V("div",{class:"headlight headlight-right"},null,-1)])])):xi("",!0)]),_:1}))}},age=fg(oge,[["__scopeId","data-v-3a90dece"]]),lge=""+new URL("../singatrain.png",import.meta.url).href,cge=["d","stroke"],uge={class:"content-wrapper"},dge={__name:"BackgroundLines",props:{className:{type:String,default:""},svgOptions:{type:Object,default:()=>({})}},setup(e){const t=e,n=["M720 450C720 450 742.459 440.315 755.249 425.626C768.039 410.937 778.88 418.741 789.478 401.499C800.076 384.258 817.06 389.269 826.741 380.436C836.423 371.603 851.957 364.826 863.182 356.242C874.408 347.657 877.993 342.678 898.867 333.214C919.741 323.75 923.618 319.88 934.875 310.177C946.133 300.474 960.784 300.837 970.584 287.701C980.384 274.564 993.538 273.334 1004.85 263.087C1016.15 252.84 1026.42 250.801 1038.22 242.1C1050.02 233.399 1065.19 230.418 1074.63 215.721C1084.07 201.024 1085.49 209.128 1112.65 194.884C1139.8 180.64 1132.49 178.205 1146.43 170.636C1160.37 163.066 1168.97 158.613 1181.46 147.982C1193.95 137.35 1191.16 131.382 1217.55 125.645C1243.93 119.907 1234.19 118.899 1254.53 100.846C1274.86 82.7922 1275.12 92.8914 1290.37 76.09C1305.62 59.2886 1313.91 62.1868 1323.19 56.7536C1332.48 51.3204 1347.93 42.8082 1361.95 32.1468C1375.96 21.4855 1374.06 25.168 1397.08 10.1863C1420.09 -4.79534 1421.41 -3.16992 1431.52 -15.0078","M720 450C720 450 741.044 435.759 753.062 410.636C765.079 385.514 770.541 386.148 782.73 370.489C794.918 354.83 799.378 353.188 811.338 332.597C823.298 312.005 825.578 306.419 843.707 295.493C861.837 284.568 856.194 273.248 877.376 256.48C898.558 239.713 887.536 227.843 909.648 214.958C931.759 202.073 925.133 188.092 941.063 177.621C956.994 167.151 952.171 154.663 971.197 135.041C990.222 115.418 990.785 109.375 999.488 96.1291C1008.19 82.8827 1011.4 82.2181 1032.65 61.8861C1053.9 41.5541 1045.74 48.0281 1064.01 19.5798C1082.29 -8.86844 1077.21 -3.89415 1093.7 -19.66C1110.18 -35.4258 1105.91 -46.1146 1127.68 -60.2834C1149.46 -74.4523 1144.37 -72.1024 1154.18 -97.6802C1163.99 -123.258 1165.6 -111.332 1186.21 -135.809C1206.81 -160.285 1203.29 -160.861 1220.31 -177.633C1237.33 -194.406 1236.97 -204.408 1250.42 -214.196","M720 450C720 450 712.336 437.768 690.248 407.156C668.161 376.544 672.543 394.253 665.951 365.784C659.358 337.316 647.903 347.461 636.929 323.197C625.956 298.933 626.831 303.639 609.939 281.01C593.048 258.381 598.7 255.282 582.342 242.504C565.985 229.726 566.053 217.66 559.169 197.116C552.284 176.572 549.348 171.846 529.347 156.529C509.345 141.211 522.053 134.054 505.192 115.653C488.33 97.2527 482.671 82.5627 473.599 70.7833C464.527 59.0039 464.784 50.2169 447 32.0721C429.215 13.9272 436.29 0.858563 423.534 -12.6868C410.777 -26.2322 407.424 -44.0808 394.364 -56.4916C381.303 -68.9024 373.709 -72.6804 365.591 -96.1992C357.473 -119.718 358.364 -111.509 338.222 -136.495C318.08 -161.481 322.797 -149.499 315.32 -181.761C307.843 -214.023 294.563 -202.561 285.795 -223.25C277.026 -243.94 275.199 -244.055 258.602 -263.871","M720 450C720 450 738.983 448.651 790.209 446.852C841.436 445.052 816.31 441.421 861.866 437.296C907.422 433.172 886.273 437.037 930.656 436.651C975.04 436.264 951.399 432.343 1001.57 425.74C1051.73 419.138 1020.72 425.208 1072.85 424.127C1124.97 423.047 1114.39 420.097 1140.02 414.426C1165.65 408.754 1173.1 412.143 1214.55 411.063C1256.01 409.983 1242.78 406.182 1285.56 401.536C1328.35 396.889 1304.66 400.796 1354.41 399.573C1404.16 398.35 1381.34 394.315 1428.34 389.376C1475.35 384.438 1445.96 386.509 1497.93 385.313C1549.9 384.117 1534.63 382.499 1567.23 381.48","M720 450C720 450 696.366 458.841 682.407 472.967C668.448 487.093 673.23 487.471 647.919 492.882C622.608 498.293 636.85 499.899 609.016 512.944C581.182 525.989 596.778 528.494 571.937 533.778C547.095 539.062 551.762 548.656 536.862 556.816C521.962 564.975 515.626 563.279 497.589 575.159C479.552 587.04 484.343 590.435 461.111 598.728C437.879 607.021 442.512 605.226 423.603 618.397C404.694 631.569 402.411 629.541 390.805 641.555C379.2 653.568 369.754 658.175 353.238 663.929C336.722 669.683 330.161 674.689 312.831 684.116C295.5 693.543 288.711 698.815 278.229 704.041C267.747 709.267 258.395 712.506 240.378 726.65C222.361 740.795 230.097 738.379 203.447 745.613C176.797 752.847 193.747 752.523 166.401 767.148C139.056 781.774 151.342 783.641 130.156 791.074C108.97 798.507 116.461 802.688 96.0974 808.817C75.7334 814.946 83.8553 819.505 59.4513 830.576C35.0473 841.648 48.2548 847.874 21.8337 853.886C-4.58739 859.898 10.5966 869.102 -16.396 874.524","M720 450C720 450 695.644 482.465 682.699 506.197C669.755 529.929 671.059 521.996 643.673 556.974C616.286 591.951 625.698 590.8 606.938 615.255C588.178 639.71 592.715 642.351 569.76 665.92C546.805 689.49 557.014 687.498 538.136 722.318C519.258 757.137 520.671 760.818 503.256 774.428C485.841 788.038 491.288 790.063 463.484 831.358C435.681 872.653 437.554 867.001 425.147 885.248C412.74 903.495 411.451 911.175 389.505 934.331C367.559 957.486 375.779 966.276 352.213 990.918C328.647 1015.56 341.908 1008.07 316.804 1047.24C291.699 1086.42 301.938 1060.92 276.644 1100.23C251.349 1139.54 259.792 1138.78 243.151 1153.64","M719.974 450C719.974 450 765.293 459.346 789.305 476.402C813.318 493.459 825.526 487.104 865.093 495.586C904.659 504.068 908.361 510.231 943.918 523.51C979.475 536.789 963.13 535.277 1009.79 547.428C1056.45 559.579 1062.34 555.797 1089.82 568.96C1117.31 582.124 1133.96 582.816 1159.12 592.861C1184.28 602.906 1182.84 603.359 1233.48 614.514C1284.12 625.67 1254.63 632.207 1306.33 644.465C1358.04 656.723 1359.27 656.568 1378.67 670.21C1398.07 683.852 1406.16 676.466 1456.34 692.827C1506.51 709.188 1497.73 708.471 1527.54 715.212","M720 450C720 450 727.941 430.821 734.406 379.251C740.87 327.681 742.857 359.402 757.864 309.798C772.871 260.194 761.947 271.093 772.992 244.308C784.036 217.524 777.105 200.533 786.808 175.699C796.511 150.864 797.141 144.333 808.694 107.307C820.247 70.2821 812.404 88.4169 819.202 37.1016C826 -14.2137 829.525 -0.990829 839.341 -30.3874C849.157 -59.784 844.404 -61.5924 855.042 -98.7516C865.68 -135.911 862.018 -144.559 876.924 -167.488C891.83 -190.418 886.075 -213.535 892.87 -237.945C899.664 -262.355 903.01 -255.031 909.701 -305.588C916.393 -356.144 917.232 -330.612 925.531 -374.777","M720 450C720 450 722.468 499.363 726.104 520.449C729.739 541.535 730.644 550.025 738.836 589.07C747.028 628.115 743.766 639.319 746.146 659.812C748.526 680.306 754.006 693.598 757.006 732.469C760.007 771.34 760.322 765.244 763.893 805.195C767.465 845.146 769.92 822.227 773.398 868.469C776.875 914.71 776.207 901.365 778.233 940.19C780.259 979.015 782.53 990.477 787.977 1010.39C793.424 1030.3 791.788 1060.01 797.243 1082.24C802.698 1104.47 801.758 1130.29 808.181 1149.64C814.604 1168.99 813.135 1171.5 818.026 1225.28C822.918 1279.06 820.269 1267.92 822.905 1293.75","M720 450C720 450 737.033 492.46 757.251 515.772C777.468 539.084 768.146 548.687 785.517 570.846C802.887 593.005 814.782 609.698 824.589 634.112C834.395 658.525 838.791 656.702 855.55 695.611C872.31 734.519 875.197 724.854 890.204 764.253C905.21 803.653 899.844 790.872 919.927 820.763C940.01 850.654 939.071 862.583 954.382 886.946C969.693 911.309 968.683 909.254 993.997 945.221C1019.31 981.187 1006.67 964.436 1023.49 1007.61C1040.32 1050.79 1046.15 1038.25 1059.01 1073.05C1071.88 1107.86 1081.39 1096.19 1089.45 1131.96C1097.51 1167.73 1106.52 1162.12 1125.77 1196.89","M720 450C720 450 687.302 455.326 670.489 467.898C653.676 480.47 653.159 476.959 626.58 485.127C600.002 493.295 599.626 495.362 577.94 503.841C556.254 512.319 556.35 507.426 533.958 517.44C511.566 527.454 505.82 526.441 486.464 539.172C467.108 551.904 461.312 546.36 439.357 553.508C417.402 560.657 406.993 567.736 389.393 572.603C371.794 577.47 371.139 583.76 344.54 587.931C317.941 592.102 327.375 593.682 299.411 607.275C271.447 620.868 283.617 615.022 249.868 622.622C216.119 630.223 227.07 630.86 203.77 638.635C180.47 646.41 168.948 652.487 156.407 657.28C143.866 662.073 132.426 669.534 110.894 675.555C89.3615 681.575 90.3234 680.232 61.1669 689.897C32.0105 699.562 34.3696 702.021 15.9011 709.789C-2.56738 717.558 2.38861 719.841 -29.9494 729.462C-62.2873 739.083 -52.5552 738.225 -77.4307 744.286","M720 450C720 450 743.97 465.061 754.884 490.648C765.798 516.235 781.032 501.34 791.376 525.115C801.72 548.889 808.417 538.333 829.306 564.807C850.195 591.281 852.336 582.531 865.086 601.843C877.835 621.155 874.512 621.773 902.383 643.857C930.255 665.94 921.885 655.976 938.025 681.74C954.164 707.505 959.384 709.719 977.273 720.525C995.162 731.33 994.233 731.096 1015.92 757.676C1037.61 784.257 1025.74 768.848 1047.82 795.343C1069.91 821.837 1065.95 815.45 1085.93 834.73C1105.91 854.009 1110.53 848.089 1124.97 869.759C1139.4 891.428 1140.57 881.585 1158.53 911.499C1176.5 941.414 1184.96 933.829 1194.53 948.792C1204.09 963.755 1221.35 973.711 1232.08 986.224C1242.8 998.738 1257.34 1015.61 1269.99 1026.53C1282.63 1037.45 1293.81 1040.91 1307.21 1064.56","M720 450C720 450 718.24 412.717 716.359 397.31C714.478 381.902 713.988 362.237 710.785 344.829C707.582 327.42 708.407 322.274 701.686 292.106C694.965 261.937 699.926 270.857 694.84 240.765C689.753 210.674 693.055 217.076 689.674 184.902C686.293 152.728 686.041 149.091 682.676 133.657C679.311 118.223 682.23 106.005 681.826 80.8297C681.423 55.6545 677.891 60.196 675.66 30.0226C673.429 -0.150848 672.665 -7.94842 668.592 -26.771C664.52 -45.5935 664.724 -43.0755 661.034 -78.7766C657.343 -114.478 658.509 -103.181 653.867 -133.45C649.226 -163.719 650.748 -150.38 647.052 -182.682C643.357 -214.984 646.125 -214.921 645.216 -238.402C644.307 -261.883 640.872 -253.4 637.237 -291.706C633.602 -330.012 634.146 -309.868 630.717 -343.769C627.288 -377.669 628.008 -370.682 626.514 -394.844","M720 450C720 450 730.384 481.55 739.215 507.557C748.047 533.564 751.618 537.619 766.222 562.033C780.825 586.447 774.187 582.307 787.606 618.195C801.025 654.082 793.116 653.536 809.138 678.315C825.16 703.095 815.485 717.073 829.898 735.518C844.311 753.964 845.351 773.196 852.197 786.599C859.042 800.001 862.876 805.65 872.809 845.974C882.742 886.297 885.179 874.677 894.963 903.246C904.747 931.816 911.787 924.243 921.827 961.809C931.867 999.374 927.557 998.784 940.377 1013.59C953.197 1028.4 948.555 1055.77 966.147 1070.54C983.739 1085.31 975.539 1105.69 988.65 1125.69C1001.76 1145.69 1001.82 1141.59 1007.54 1184.37C1013.27 1227.15 1018.98 1198.8 1029.67 1241.58","M720 450C720 450 684.591 447.135 657.288 439.014C629.985 430.894 618.318 435.733 600.698 431.723C583.077 427.714 566.975 425.639 537.839 423.315C508.704 420.991 501.987 418.958 476.29 413.658C450.592 408.359 460.205 410.268 416.97 408.927C373.736 407.586 396.443 401.379 359.262 396.612C322.081 391.844 327.081 393.286 300.224 391.917C273.368 390.547 264.902 385.49 241.279 382.114C217.655 378.739 205.497 378.95 181.98 377.253C158.464 375.556 150.084 369.938 117.474 366.078C84.8644 362.218 81.5401 361.501 58.8734 358.545C36.2067 355.59 33.6442 351.938 -3.92281 346.728C-41.4898 341.519 -18.6466 345.082 -61.4654 341.179C-104.284 337.275 -102.32 338.048 -121.821 332.369","M720 450C720 450 714.384 428.193 708.622 410.693C702.86 393.193 705.531 397.066 703.397 372.66C701.264 348.254 697.8 345.181 691.079 330.466C684.357 315.751 686.929 312.356 683.352 292.664C679.776 272.973 679.079 273.949 674.646 255.07C670.213 236.192 670.622 244.371 665.271 214.561C659.921 184.751 659.864 200.13 653.352 172.377C646.841 144.623 647.767 151.954 644.123 136.021C640.48 120.088 638.183 107.491 636.127 96.8178C634.072 86.1443 632.548 77.5871 626.743 54.0492C620.938 30.5112 622.818 28.9757 618.613 16.577C614.407 4.17831 615.555 -13.1527 608.752 -24.5691C601.95 -35.9855 603.375 -51.0511 599.526 -60.1492C595.678 -69.2472 593.676 -79.3623 587.865 -100.431C582.053 -121.5 584.628 -117.913 578.882 -139.408C573.137 -160.903 576.516 -161.693 571.966 -182.241C567.416 -202.789 567.42 -198.681 562.834 -218.28C558.248 -237.879 555.335 -240.47 552.072 -260.968C548.808 -281.466 547.605 -280.956 541.772 -296.427C535.94 -311.898 537.352 -315.211 535.128 -336.018C532.905 -356.826 531.15 -360.702 524.129 -377.124","M720 450C720 450 711.433 430.82 707.745 409.428C704.056 388.035 704.937 381.711 697.503 370.916C690.069 360.121 691.274 359.999 685.371 334.109C679.469 308.22 677.496 323.883 671.24 294.303C664.984 264.724 667.608 284.849 662.065 258.116C656.522 231.383 656.357 229.024 647.442 216.172C638.527 203.319 640.134 192.925 635.555 178.727C630.976 164.529 630.575 150.179 624.994 139.987C619.413 129.794 615.849 112.779 612.251 103.074C608.654 93.3696 606.942 85.6729 603.041 63.0758C599.14 40.4787 595.242 36.9267 589.533 23.8967C583.823 10.8666 581.18 -2.12401 576.96 -14.8333C572.739 -27.5425 572.696 -37.7703 568.334 -51.3441C563.972 -64.9179 562.14 -67.2124 556.992 -93.299C551.844 -119.386 550.685 -109.743 544.056 -129.801C537.428 -149.859 534.97 -151.977 531.034 -170.076C527.099 -188.175 522.979 -185.119 519.996 -207.061C517.012 -229.004 511.045 -224.126 507.478 -247.077C503.912 -270.029 501.417 -271.033 495.534 -287C489.651 -302.968 491.488 -300.977 484.68 -326.317C477.872 -351.657 476.704 -348.494 472.792 -363.258","M720 450C720 450 723.524 466.673 728.513 497.319C733.503 527.964 731.894 519.823 740.001 542.706C748.108 565.589 744.225 560.598 748.996 588.365C753.766 616.131 756.585 602.096 761.881 636.194C767.178 670.293 768.155 649.089 771.853 679.845C775.551 710.6 775.965 703.738 781.753 724.555C787.54 745.372 787.248 758.418 791.422 773.79C795.596 789.162 798.173 807.631 804.056 819.914C809.938 832.197 806.864 843.07 811.518 865.275C816.171 887.48 816.551 892.1 822.737 912.643C828.922 933.185 830.255 942.089 833.153 956.603C836.052 971.117 839.475 969.242 846.83 1003.98C854.185 1038.71 850.193 1028.86 854.119 1048.67C858.045 1068.48 857.963 1074.39 863.202 1094.94C868.44 1115.49 867.891 1108.03 874.497 1138.67C881.102 1169.31 880.502 1170.72 887.307 1186.56C894.111 1202.4 890.388 1209.75 896.507 1231.25C902.627 1252.76 902.54 1245.39 906.742 1279.23","M720 450C720 450 698.654 436.893 669.785 424.902C640.916 412.91 634.741 410.601 615.568 402.586C596.396 394.571 594.829 395.346 568.66 378.206C542.492 361.067 547.454 359.714 514.087 348.978C480.721 338.242 479.79 334.731 467.646 329.846C455.502 324.96 448.63 312.156 416.039 303.755C383.448 295.354 391.682 293.73 365.021 280.975C338.36 268.219 328.715 267.114 309.809 252.575C290.903 238.036 277.185 246.984 259.529 230.958C241.873 214.931 240.502 224.403 211.912 206.241C183.323 188.078 193.288 190.89 157.03 181.714C120.772 172.538 127.621 170.109 108.253 154.714C88.8857 139.319 75.4927 138.974 56.9647 132.314C38.4366 125.654 33.8997 118.704 4.77584 106.7C-24.348 94.6959 -19.1326 90.266 -46.165 81.9082","M720 450C720 450 711.596 475.85 701.025 516.114C690.455 556.378 697.124 559.466 689.441 579.079C681.758 598.693 679.099 597.524 675.382 642.732C671.665 687.94 663.4 677.024 657.844 700.179C652.288 723.333 651.086 724.914 636.904 764.536C622.723 804.158 631.218 802.853 625.414 827.056C619.611 851.259 613.734 856.28 605.94 892.262C598.146 928.244 595.403 924.314 588.884 957.785C582.364 991.255 583.079 991.176 575.561 1022.63C568.044 1054.08 566.807 1058.45 558.142 1084.32C549.476 1110.2 553.961 1129.13 542.367 1149.25C530.772 1169.37 538.268 1180.37 530.338 1207.27C522.407 1234.17 520.826 1245.53 512.156 1274.2","M720 450C720 450 730.571 424.312 761.424 411.44C792.277 398.569 772.385 393.283 804.069 377.232C835.752 361.182 829.975 361.373 848.987 342.782C867.999 324.192 877.583 330.096 890.892 303.897C904.201 277.698 910.277 282.253 937.396 264.293C964.514 246.333 949.357 246.834 978.7 230.438C1008.04 214.042 990.424 217.952 1021.51 193.853C1052.6 169.753 1054.28 184.725 1065.97 158.075C1077.65 131.425 1087.76 139.068 1111.12 120.345C1134.49 101.622 1124.9 104.858 1151.67 86.3162C1178.43 67.7741 1167.09 66.2676 1197.53 47.2606C1227.96 28.2536 1225.78 23.2186 1239.27 12.9649C1252.76 2.7112 1269.32 -9.47929 1282.88 -28.5587C1296.44 -47.6381 1305.81 -41.3853 1323.82 -62.7027C1341.83 -84.0202 1340.32 -82.3794 1368.98 -98.9326"],i=["#46A5CA","#8C2F2F","#4FAE4D","#D6590C","#811010","#247AFB","#A534A0","#A8A438","#D6590C","#46A29C","#670F6D","#D7C200","#59BBEB","#504F1C","#55BC54","#4D3568","#9F39A5","#363636","#860909","#6A286F","#604483"],r=tt(0),a=me(()=>{const s=n.map((_,x)=>({path:_,color:i[x%i.length]})),p=n.map((_,x)=>({path:_,color:i[x%i.length]}));return[...s,...p]}),l=tt([]);function h(s){const p=t.svgOptions?.duration||10,_=l.value[s]||0,x=Math.floor(Math.random()*10+2);return{"--duration":`${p}s`,"--delay":`${_}s`,"--repeat-delay":`${x}s`,animationDelay:`${_}s`,animationDuration:`${p}s`}}return Mr(()=>{l.value=a.value.map(()=>Math.floor(Math.random()*10)),setTimeout(()=>{r.value=1},100)}),(s,p)=>(Gt(),on("div",{class:_t(["background-lines",e.className])},[(Gt(),on("svg",{class:"lines-svg",viewBox:"0 0 1440 900",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:Xt({opacity:r.value})},[(Gt(!0),on(an,null,cs(a.value,(_,x)=>(Gt(),on("path",{key:`path-${x}`,d:_.path,stroke:_.color,"stroke-width":"2.3","stroke-linecap":"round",style:Xt(h(x)),class:"animated-path"},null,12,cge))),128))],4)),V("div",uge,[wW(s.$slots,"default",{},void 0)])],2))}},hge=fg(dge,[["__scopeId","data-v-f8af4667"]]),fge={__name:"LoadingPage",emits:["loaded"],setup(e,{emit:t}){const n=tt(!0),i=t;function r(){n.value=!1,i("loaded")}return(a,l)=>(Gt(),Fa(Rl,{name:"loading-fade"},{default:vi(()=>[n.value?(Gt(),on("div",{key:0,class:"loading-page",onClick:r},[ce(hge,{class:"flex items-center justify-center w-full flex-col px-4"},{default:vi(()=>[...l[0]||(l[0]=[V("img",{src:lge,alt:"SingaTrain",class:"loading-logo"},null,-1),V("p",{class:"loading-subtitle"}," Your Singapore MRT companion ",-1),V("p",{class:"loading-hint"}," Click anywhere to continue ",-1)])]),_:1})])):xi("",!0)]),_:1}))}},mge=fg(fge,[["__scopeId","data-v-70cf6ef1"]]),pge={key:1},gge={class:"container main-content"},vge={__name:"App",setup(e){const{state:t}=Gv(),n=tt(!1);function i(){n.value=!0}const r={dashboard:C5,live:ine,route:mae,fare:rme,meetup:fpe,profile:Upe,firstLast:rge},a=me(()=>r[t.activeTab]||C5);function l(){if(!_1)return;const h=document.querySelectorAll(".dashboard-view .section-card"),s=document.querySelectorAll(".section-card:not(.dashboard-view .section-card)");h.forEach(p=>{_1.set(p,{opacity:1,visibility:"visible",display:"block"})}),s.length>0&&_1.from(s,{opacity:0,duration:.35,ease:"power2.out"})}return Mr(()=>{Ox&&Ox.init({once:!0,duration:550,easing:"ease-out"}),Hn(()=>{const h=document.querySelectorAll(".section-card");h.forEach(_=>{_.removeAttribute("data-aos"),_.removeAttribute("data-aos-delay"),_.removeAttribute("data-aos-duration"),_.removeAttribute("data-aos-easing")});const s=document.querySelectorAll(".dashboard-view .section-card, .dashboard-view [data-aos]");s.forEach(_=>{_.style.opacity="1",_.style.visibility="visible",_.style.display="block",_.style.transform="none"}),l();const p=()=>{h.forEach(_=>{_.style.setProperty("margin-top","0","important"),_.style.setProperty("margin-bottom","0","important"),_.style.marginTop="0",_.style.marginBottom="0"}),s.forEach(_=>{_.style.opacity="1",_.style.visibility="visible",_.style.display="block"})};p(),setTimeout(p,100),setTimeout(p,600)})}),Yt(()=>t.activeTab,()=>{Hn(()=>{const h=document.querySelectorAll(".section-card");h.forEach(_=>{_.removeAttribute("data-aos"),_.removeAttribute("data-aos-delay"),_.removeAttribute("data-aos-duration"),_.removeAttribute("data-aos-easing")});const s=document.querySelectorAll(".dashboard-view .section-card, .dashboard-view [data-aos]");s.forEach(_=>{_.style.opacity="1",_.style.visibility="visible",_.style.display="block",_.style.transform="none"}),Ox&&Ox.refresh(),l();const p=()=>{h.forEach(_=>{_.style.setProperty("margin-top","0","important"),_.style.setProperty("margin-bottom","0","important"),_.style.marginTop="0",_.style.marginBottom="0"}),s.forEach(_=>{_.style.opacity="1",_.style.visibility="visible",_.style.display="block"})};p(),setTimeout(p,100),setTimeout(p,600)})}),(h,s)=>(Gt(),on(an,null,[n.value?xi("",!0):(Gt(),Fa(mge,{key:0,onLoaded:i})),n.value?(Gt(),on("div",pge,[ce(age),V("div",null,[s[0]||(s[0]=V("div",{class:"video-background"},[V("video",{autoplay:"",muted:"",loop:"",playsinline:"",class:"bg-video"},[V("source",{src:FB,type:"video/mp4"})]),V("div",{class:"video-overlay"})],-1)),ce(bq),V("main",gge,[ce(Rl,{name:"fade-slide",mode:"out-in"},{default:vi(()=>[(Gt(),Fa(pW,{include:"RoutePlanner"},[(Gt(),Fa(oB(a.value),{key:bi(t).activeTab}))],1024))]),_:1})])])])):xi("",!0)],64))}};var L1={exports:{}};/*!
  * Bootstrap v5.3.8 (https://getbootstrap.com/)
  * Copyright 2011-2025 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */var _ge=L1.exports,nV;function yge(){return nV||(nV=1,(function(e,t){(function(n,i){e.exports=i()})(_ge,function(){const n=new Map,i={set(ve,B,se){n.has(ve)||n.set(ve,new Map);const Ae=n.get(ve);Ae.has(B)||Ae.size===0?Ae.set(B,se):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(Ae.keys())[0]}.`)},get:(ve,B)=>n.has(ve)&&n.get(ve).get(B)||null,remove(ve,B){if(!n.has(ve))return;const se=n.get(ve);se.delete(B),se.size===0&&n.delete(ve)}},r="transitionend",a=ve=>(ve&&window.CSS&&window.CSS.escape&&(ve=ve.replace(/#([^\s"#']+)/g,(B,se)=>`#${CSS.escape(se)}`)),ve),l=ve=>ve==null?`${ve}`:Object.prototype.toString.call(ve).match(/\s([a-z]+)/i)[1].toLowerCase(),h=ve=>{ve.dispatchEvent(new Event(r))},s=ve=>!(!ve||typeof ve!="object")&&(ve.jquery!==void 0&&(ve=ve[0]),ve.nodeType!==void 0),p=ve=>s(ve)?ve.jquery?ve[0]:ve:typeof ve=="string"&&ve.length>0?document.querySelector(a(ve)):null,_=ve=>{if(!s(ve)||ve.getClientRects().length===0)return!1;const B=getComputedStyle(ve).getPropertyValue("visibility")==="visible",se=ve.closest("details:not([open])");if(!se)return B;if(se!==ve){const Ae=ve.closest("summary");if(Ae&&Ae.parentNode!==se||Ae===null)return!1}return B},x=ve=>!ve||ve.nodeType!==Node.ELEMENT_NODE||!!ve.classList.contains("disabled")||(ve.disabled!==void 0?ve.disabled:ve.hasAttribute("disabled")&&ve.getAttribute("disabled")!=="false"),T=ve=>{if(!document.documentElement.attachShadow)return null;if(typeof ve.getRootNode=="function"){const B=ve.getRootNode();return B instanceof ShadowRoot?B:null}return ve instanceof ShadowRoot?ve:ve.parentNode?T(ve.parentNode):null},k=()=>{},A=ve=>{ve.offsetHeight},M=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,R=[],F=()=>document.documentElement.dir==="rtl",z=ve=>{var B;B=()=>{const se=M();if(se){const Ae=ve.NAME,v=se.fn[Ae];se.fn[Ae]=ve.jQueryInterface,se.fn[Ae].Constructor=ve,se.fn[Ae].noConflict=()=>(se.fn[Ae]=v,ve.jQueryInterface)}},document.readyState==="loading"?(R.length||document.addEventListener("DOMContentLoaded",()=>{for(const se of R)se()}),R.push(B)):B()},G=(ve,B=[],se=ve)=>typeof ve=="function"?ve.call(...B):se,Y=(ve,B,se=!0)=>{if(!se)return void G(ve);const Ae=(m=>{if(!m)return 0;let{transitionDuration:y,transitionDelay:S}=window.getComputedStyle(m);const C=Number.parseFloat(y),L=Number.parseFloat(S);return C||L?(y=y.split(",")[0],S=S.split(",")[0],1e3*(Number.parseFloat(y)+Number.parseFloat(S))):0})(B)+5;let v=!1;const u=({target:m})=>{m===B&&(v=!0,B.removeEventListener(r,u),G(ve))};B.addEventListener(r,u),setTimeout(()=>{v||h(B)},Ae)},J=(ve,B,se,Ae)=>{const v=ve.length;let u=ve.indexOf(B);return u===-1?!se&&Ae?ve[v-1]:ve[0]:(u+=se?1:-1,Ae&&(u=(u+v)%v),ve[Math.max(0,Math.min(u,v-1))])},re=/[^.]*(?=\..*)\.|.*/,X=/\..*/,U=/::\d+$/,H={};let W=1;const ie={mouseenter:"mouseover",mouseleave:"mouseout"},Q=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function te(ve,B){return B&&`${B}::${W++}`||ve.uidEvent||W++}function ke(ve){const B=te(ve);return ve.uidEvent=B,H[B]=H[B]||{},H[B]}function Re(ve,B,se=null){return Object.values(ve).find(Ae=>Ae.callable===B&&Ae.delegationSelector===se)}function Be(ve,B,se){const Ae=typeof B=="string",v=Ae?se:B||se;let u=Ge(ve);return Q.has(u)||(u=ve),[Ae,v,u]}function Je(ve,B,se,Ae,v){if(typeof B!="string"||!ve)return;let[u,m,y]=Be(B,se,Ae);B in ie&&(m=(K=>function(ae){if(!ae.relatedTarget||ae.relatedTarget!==ae.delegateTarget&&!ae.delegateTarget.contains(ae.relatedTarget))return K.call(this,ae)})(m));const S=ke(ve),C=S[y]||(S[y]={}),L=Re(C,m,u?se:null);if(L)return void(L.oneOff=L.oneOff&&v);const O=te(m,B.replace(re,"")),$=u?(function(q,K,ae){return function pe(be){const Se=q.querySelectorAll(K);for(let{target:xe}=be;xe&&xe!==this;xe=xe.parentNode)for(const Ce of Se)if(Ce===xe)return it(be,{delegateTarget:xe}),pe.oneOff&&Ee.off(q,be.type,K,ae),ae.apply(xe,[be])}})(ve,se,m):(function(q,K){return function ae(pe){return it(pe,{delegateTarget:q}),ae.oneOff&&Ee.off(q,pe.type,K),K.apply(q,[pe])}})(ve,m);$.delegationSelector=u?se:null,$.callable=m,$.oneOff=v,$.uidEvent=O,C[O]=$,ve.addEventListener(y,$,u)}function nt(ve,B,se,Ae,v){const u=Re(B[se],Ae,v);u&&(ve.removeEventListener(se,u,!!v),delete B[se][u.uidEvent])}function De(ve,B,se,Ae){const v=B[se]||{};for(const[u,m]of Object.entries(v))u.includes(Ae)&&nt(ve,B,se,m.callable,m.delegationSelector)}function Ge(ve){return ve=ve.replace(X,""),ie[ve]||ve}const Ee={on(ve,B,se,Ae){Je(ve,B,se,Ae,!1)},one(ve,B,se,Ae){Je(ve,B,se,Ae,!0)},off(ve,B,se,Ae){if(typeof B!="string"||!ve)return;const[v,u,m]=Be(B,se,Ae),y=m!==B,S=ke(ve),C=S[m]||{},L=B.startsWith(".");if(u===void 0){if(L)for(const O of Object.keys(S))De(ve,S,O,B.slice(1));for(const[O,$]of Object.entries(C)){const q=O.replace(U,"");y&&!B.includes(q)||nt(ve,S,m,$.callable,$.delegationSelector)}}else{if(!Object.keys(C).length)return;nt(ve,S,m,u,v?se:null)}},trigger(ve,B,se){if(typeof B!="string"||!ve)return null;const Ae=M();let v=null,u=!0,m=!0,y=!1;B!==Ge(B)&&Ae&&(v=Ae.Event(B,se),Ae(ve).trigger(v),u=!v.isPropagationStopped(),m=!v.isImmediatePropagationStopped(),y=v.isDefaultPrevented());const S=it(new Event(B,{bubbles:u,cancelable:!0}),se);return y&&S.preventDefault(),m&&ve.dispatchEvent(S),S.defaultPrevented&&v&&v.preventDefault(),S}};function it(ve,B={}){for(const[se,Ae]of Object.entries(B))try{ve[se]=Ae}catch{Object.defineProperty(ve,se,{configurable:!0,get:()=>Ae})}return ve}function ot(ve){if(ve==="true")return!0;if(ve==="false")return!1;if(ve===Number(ve).toString())return Number(ve);if(ve===""||ve==="null")return null;if(typeof ve!="string")return ve;try{return JSON.parse(decodeURIComponent(ve))}catch{return ve}}function mt(ve){return ve.replace(/[A-Z]/g,B=>`-${B.toLowerCase()}`)}const Pt={setDataAttribute(ve,B,se){ve.setAttribute(`data-bs-${mt(B)}`,se)},removeDataAttribute(ve,B){ve.removeAttribute(`data-bs-${mt(B)}`)},getDataAttributes(ve){if(!ve)return{};const B={},se=Object.keys(ve.dataset).filter(Ae=>Ae.startsWith("bs")&&!Ae.startsWith("bsConfig"));for(const Ae of se){let v=Ae.replace(/^bs/,"");v=v.charAt(0).toLowerCase()+v.slice(1),B[v]=ot(ve.dataset[Ae])}return B},getDataAttribute:(ve,B)=>ot(ve.getAttribute(`data-bs-${mt(B)}`))};class $t{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(B){return B=this._mergeConfigObj(B),B=this._configAfterMerge(B),this._typeCheckConfig(B),B}_configAfterMerge(B){return B}_mergeConfigObj(B,se){const Ae=s(se)?Pt.getDataAttribute(se,"config"):{};return{...this.constructor.Default,...typeof Ae=="object"?Ae:{},...s(se)?Pt.getDataAttributes(se):{},...typeof B=="object"?B:{}}}_typeCheckConfig(B,se=this.constructor.DefaultType){for(const[Ae,v]of Object.entries(se)){const u=B[Ae],m=s(u)?"element":l(u);if(!new RegExp(v).test(m))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${Ae}" provided type "${m}" but expected type "${v}".`)}}}class ct extends $t{constructor(B,se){super(),(B=p(B))&&(this._element=B,this._config=this._getConfig(se),i.set(this._element,this.constructor.DATA_KEY,this))}dispose(){i.remove(this._element,this.constructor.DATA_KEY),Ee.off(this._element,this.constructor.EVENT_KEY);for(const B of Object.getOwnPropertyNames(this))this[B]=null}_queueCallback(B,se,Ae=!0){Y(B,se,Ae)}_getConfig(B){return B=this._mergeConfigObj(B,this._element),B=this._configAfterMerge(B),this._typeCheckConfig(B),B}static getInstance(B){return i.get(p(B),this.DATA_KEY)}static getOrCreateInstance(B,se={}){return this.getInstance(B)||new this(B,typeof se=="object"?se:null)}static get VERSION(){return"5.3.8"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(B){return`${B}${this.EVENT_KEY}`}}const ht=ve=>{let B=ve.getAttribute("data-bs-target");if(!B||B==="#"){let se=ve.getAttribute("href");if(!se||!se.includes("#")&&!se.startsWith("."))return null;se.includes("#")&&!se.startsWith("#")&&(se=`#${se.split("#")[1]}`),B=se&&se!=="#"?se.trim():null}return B?B.split(",").map(se=>a(se)).join(","):null},Qe={find:(ve,B=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(B,ve)),findOne:(ve,B=document.documentElement)=>Element.prototype.querySelector.call(B,ve),children:(ve,B)=>[].concat(...ve.children).filter(se=>se.matches(B)),parents(ve,B){const se=[];let Ae=ve.parentNode.closest(B);for(;Ae;)se.push(Ae),Ae=Ae.parentNode.closest(B);return se},prev(ve,B){let se=ve.previousElementSibling;for(;se;){if(se.matches(B))return[se];se=se.previousElementSibling}return[]},next(ve,B){let se=ve.nextElementSibling;for(;se;){if(se.matches(B))return[se];se=se.nextElementSibling}return[]},focusableChildren(ve){const B=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(se=>`${se}:not([tabindex^="-"])`).join(",");return this.find(B,ve).filter(se=>!x(se)&&_(se))},getSelectorFromElement(ve){const B=ht(ve);return B&&Qe.findOne(B)?B:null},getElementFromSelector(ve){const B=ht(ve);return B?Qe.findOne(B):null},getMultipleElementsFromSelector(ve){const B=ht(ve);return B?Qe.find(B):[]}},kt=(ve,B="hide")=>{const se=`click.dismiss${ve.EVENT_KEY}`,Ae=ve.NAME;Ee.on(document,se,`[data-bs-dismiss="${Ae}"]`,function(v){if(["A","AREA"].includes(this.tagName)&&v.preventDefault(),x(this))return;const u=Qe.getElementFromSelector(this)||this.closest(`.${Ae}`);ve.getOrCreateInstance(u)[B]()})},Ue=".bs.alert",ue=`close${Ue}`,we=`closed${Ue}`;class fe extends ct{static get NAME(){return"alert"}close(){if(Ee.trigger(this._element,ue).defaultPrevented)return;this._element.classList.remove("show");const B=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,B)}_destroyElement(){this._element.remove(),Ee.trigger(this._element,we),this.dispose()}static jQueryInterface(B){return this.each(function(){const se=fe.getOrCreateInstance(this);if(typeof B=="string"){if(se[B]===void 0||B.startsWith("_")||B==="constructor")throw new TypeError(`No method named "${B}"`);se[B](this)}})}}kt(fe,"close"),z(fe);const Ie='[data-bs-toggle="button"]';class je extends ct{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(B){return this.each(function(){const se=je.getOrCreateInstance(this);B==="toggle"&&se[B]()})}}Ee.on(document,"click.bs.button.data-api",Ie,ve=>{ve.preventDefault();const B=ve.target.closest(Ie);je.getOrCreateInstance(B).toggle()}),z(je);const Xe=".bs.swipe",yt=`touchstart${Xe}`,wt=`touchmove${Xe}`,Lt=`touchend${Xe}`,Dt=`pointerdown${Xe}`,gn=`pointerup${Xe}`,Kt={endCallback:null,leftCallback:null,rightCallback:null},Cn={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Dn extends $t{constructor(B,se){super(),this._element=B,B&&Dn.isSupported()&&(this._config=this._getConfig(se),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return Kt}static get DefaultType(){return Cn}static get NAME(){return"swipe"}dispose(){Ee.off(this._element,Xe)}_start(B){this._supportPointerEvents?this._eventIsPointerPenTouch(B)&&(this._deltaX=B.clientX):this._deltaX=B.touches[0].clientX}_end(B){this._eventIsPointerPenTouch(B)&&(this._deltaX=B.clientX-this._deltaX),this._handleSwipe(),G(this._config.endCallback)}_move(B){this._deltaX=B.touches&&B.touches.length>1?0:B.touches[0].clientX-this._deltaX}_handleSwipe(){const B=Math.abs(this._deltaX);if(B<=40)return;const se=B/this._deltaX;this._deltaX=0,se&&G(se>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(Ee.on(this._element,Dt,B=>this._start(B)),Ee.on(this._element,gn,B=>this._end(B)),this._element.classList.add("pointer-event")):(Ee.on(this._element,yt,B=>this._start(B)),Ee.on(this._element,wt,B=>this._move(B)),Ee.on(this._element,Lt,B=>this._end(B)))}_eventIsPointerPenTouch(B){return this._supportPointerEvents&&(B.pointerType==="pen"||B.pointerType==="touch")}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const Fn=".bs.carousel",ni=".data-api",Ut="ArrowLeft",fn="ArrowRight",wn="next",Ln="prev",Ci="left",xr="right",Ss=`slide${Fn}`,rr=`slid${Fn}`,wr=`keydown${Fn}`,jo=`mouseenter${Fn}`,So=`mouseleave${Fn}`,$c=`dragstart${Fn}`,ze=`load${Fn}${ni}`,ge=`click${Fn}${ni}`,_e="carousel",Fe="active",Ke=".active",st=".carousel-item",vt=Ke+st,pt={[Ut]:xr,[fn]:Ci},rt={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},Ct={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class nn extends ct{constructor(B,se){super(B,se),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=Qe.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===_e&&this.cycle()}static get Default(){return rt}static get DefaultType(){return Ct}static get NAME(){return"carousel"}next(){this._slide(wn)}nextWhenVisible(){!document.hidden&&_(this._element)&&this.next()}prev(){this._slide(Ln)}pause(){this._isSliding&&h(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?Ee.one(this._element,rr,()=>this.cycle()):this.cycle())}to(B){const se=this._getItems();if(B>se.length-1||B<0)return;if(this._isSliding)return void Ee.one(this._element,rr,()=>this.to(B));const Ae=this._getItemIndex(this._getActive());if(Ae===B)return;const v=B>Ae?wn:Ln;this._slide(v,se[B])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(B){return B.defaultInterval=B.interval,B}_addEventListeners(){this._config.keyboard&&Ee.on(this._element,wr,B=>this._keydown(B)),this._config.pause==="hover"&&(Ee.on(this._element,jo,()=>this.pause()),Ee.on(this._element,So,()=>this._maybeEnableCycle())),this._config.touch&&Dn.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const se of Qe.find(".carousel-item img",this._element))Ee.on(se,$c,Ae=>Ae.preventDefault());const B={leftCallback:()=>this._slide(this._directionToOrder(Ci)),rightCallback:()=>this._slide(this._directionToOrder(xr)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}};this._swipeHelper=new Dn(this._element,B)}_keydown(B){if(/input|textarea/i.test(B.target.tagName))return;const se=pt[B.key];se&&(B.preventDefault(),this._slide(this._directionToOrder(se)))}_getItemIndex(B){return this._getItems().indexOf(B)}_setActiveIndicatorElement(B){if(!this._indicatorsElement)return;const se=Qe.findOne(Ke,this._indicatorsElement);se.classList.remove(Fe),se.removeAttribute("aria-current");const Ae=Qe.findOne(`[data-bs-slide-to="${B}"]`,this._indicatorsElement);Ae&&(Ae.classList.add(Fe),Ae.setAttribute("aria-current","true"))}_updateInterval(){const B=this._activeElement||this._getActive();if(!B)return;const se=Number.parseInt(B.getAttribute("data-bs-interval"),10);this._config.interval=se||this._config.defaultInterval}_slide(B,se=null){if(this._isSliding)return;const Ae=this._getActive(),v=B===wn,u=se||J(this._getItems(),Ae,v,this._config.wrap);if(u===Ae)return;const m=this._getItemIndex(u),y=O=>Ee.trigger(this._element,O,{relatedTarget:u,direction:this._orderToDirection(B),from:this._getItemIndex(Ae),to:m});if(y(Ss).defaultPrevented||!Ae||!u)return;const S=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(m),this._activeElement=u;const C=v?"carousel-item-start":"carousel-item-end",L=v?"carousel-item-next":"carousel-item-prev";u.classList.add(L),A(u),Ae.classList.add(C),u.classList.add(C),this._queueCallback(()=>{u.classList.remove(C,L),u.classList.add(Fe),Ae.classList.remove(Fe,L,C),this._isSliding=!1,y(rr)},Ae,this._isAnimated()),S&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return Qe.findOne(vt,this._element)}_getItems(){return Qe.find(st,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(B){return F()?B===Ci?Ln:wn:B===Ci?wn:Ln}_orderToDirection(B){return F()?B===Ln?Ci:xr:B===Ln?xr:Ci}static jQueryInterface(B){return this.each(function(){const se=nn.getOrCreateInstance(this,B);if(typeof B!="number"){if(typeof B=="string"){if(se[B]===void 0||B.startsWith("_")||B==="constructor")throw new TypeError(`No method named "${B}"`);se[B]()}}else se.to(B)})}}Ee.on(document,ge,"[data-bs-slide], [data-bs-slide-to]",function(ve){const B=Qe.getElementFromSelector(this);if(!B||!B.classList.contains(_e))return;ve.preventDefault();const se=nn.getOrCreateInstance(B),Ae=this.getAttribute("data-bs-slide-to");return Ae?(se.to(Ae),void se._maybeEnableCycle()):Pt.getDataAttribute(this,"slide")==="next"?(se.next(),void se._maybeEnableCycle()):(se.prev(),void se._maybeEnableCycle())}),Ee.on(window,ze,()=>{const ve=Qe.find('[data-bs-ride="carousel"]');for(const B of ve)nn.getOrCreateInstance(B)}),z(nn);const dn=".bs.collapse",rn=`show${dn}`,Kn=`shown${dn}`,Jn=`hide${dn}`,jn=`hidden${dn}`,ai=`click${dn}.data-api`,Xn="show",Ri="collapse",mr="collapsing",is=`:scope .${Ri} .${Ri}`,Tr='[data-bs-toggle="collapse"]',Wo={parent:null,toggle:!0},rs={parent:"(null|element)",toggle:"boolean"};class Or extends ct{constructor(B,se){super(B,se),this._isTransitioning=!1,this._triggerArray=[];const Ae=Qe.find(Tr);for(const v of Ae){const u=Qe.getSelectorFromElement(v),m=Qe.find(u).filter(y=>y===this._element);u!==null&&m.length&&this._triggerArray.push(v)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Wo}static get DefaultType(){return rs}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let B=[];if(this._config.parent&&(B=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(v=>v!==this._element).map(v=>Or.getOrCreateInstance(v,{toggle:!1}))),B.length&&B[0]._isTransitioning||Ee.trigger(this._element,rn).defaultPrevented)return;for(const v of B)v.hide();const se=this._getDimension();this._element.classList.remove(Ri),this._element.classList.add(mr),this._element.style[se]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const Ae=`scroll${se[0].toUpperCase()+se.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(mr),this._element.classList.add(Ri,Xn),this._element.style[se]="",Ee.trigger(this._element,Kn)},this._element,!0),this._element.style[se]=`${this._element[Ae]}px`}hide(){if(this._isTransitioning||!this._isShown()||Ee.trigger(this._element,Jn).defaultPrevented)return;const B=this._getDimension();this._element.style[B]=`${this._element.getBoundingClientRect()[B]}px`,A(this._element),this._element.classList.add(mr),this._element.classList.remove(Ri,Xn);for(const se of this._triggerArray){const Ae=Qe.getElementFromSelector(se);Ae&&!this._isShown(Ae)&&this._addAriaAndCollapsedClass([se],!1)}this._isTransitioning=!0,this._element.style[B]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(mr),this._element.classList.add(Ri),Ee.trigger(this._element,jn)},this._element,!0)}_isShown(B=this._element){return B.classList.contains(Xn)}_configAfterMerge(B){return B.toggle=!!B.toggle,B.parent=p(B.parent),B}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const B=this._getFirstLevelChildren(Tr);for(const se of B){const Ae=Qe.getElementFromSelector(se);Ae&&this._addAriaAndCollapsedClass([se],this._isShown(Ae))}}_getFirstLevelChildren(B){const se=Qe.find(is,this._config.parent);return Qe.find(B,this._config.parent).filter(Ae=>!se.includes(Ae))}_addAriaAndCollapsedClass(B,se){if(B.length)for(const Ae of B)Ae.classList.toggle("collapsed",!se),Ae.setAttribute("aria-expanded",se)}static jQueryInterface(B){const se={};return typeof B=="string"&&/show|hide/.test(B)&&(se.toggle=!1),this.each(function(){const Ae=Or.getOrCreateInstance(this,se);if(typeof B=="string"){if(Ae[B]===void 0)throw new TypeError(`No method named "${B}"`);Ae[B]()}})}}Ee.on(document,ai,Tr,function(ve){(ve.target.tagName==="A"||ve.delegateTarget&&ve.delegateTarget.tagName==="A")&&ve.preventDefault();for(const B of Qe.getMultipleElementsFromSelector(this))Or.getOrCreateInstance(B,{toggle:!1}).toggle()}),z(Or);var Hr="top",Es="bottom",zs="right",qn="left",fa="auto",Cs=[Hr,Es,zs,qn],Ho="start",Ka="end",Eo="clippingParents",Co="viewport",Xa="popper",fc="reference",Go=Cs.reduce(function(ve,B){return ve.concat([B+"-"+Ho,B+"-"+Ka])},[]),ko=[].concat(Cs,[fa]).reduce(function(ve,B){return ve.concat([B,B+"-"+Ho,B+"-"+Ka])},[]),zl="beforeRead",Ot="read",ma="afterRead",Ui="beforeMain",Yi="main",Nl="afterMain",Ns="beforeWrite",mc="write",er="afterWrite",pa=[zl,Ot,ma,Ui,Yi,Nl,Ns,mc,er];function hn(ve){return ve?(ve.nodeName||"").toLowerCase():null}function Nn(ve){if(ve==null)return window;if(ve.toString()!=="[object Window]"){var B=ve.ownerDocument;return B&&B.defaultView||window}return ve}function Yn(ve){return ve instanceof Nn(ve).Element||ve instanceof Element}function pr(ve){return ve instanceof Nn(ve).HTMLElement||ve instanceof HTMLElement}function lo(ve){return typeof ShadowRoot<"u"&&(ve instanceof Nn(ve).ShadowRoot||ve instanceof ShadowRoot)}const ii={name:"applyStyles",enabled:!0,phase:"write",fn:function(ve){var B=ve.state;Object.keys(B.elements).forEach(function(se){var Ae=B.styles[se]||{},v=B.attributes[se]||{},u=B.elements[se];pr(u)&&hn(u)&&(Object.assign(u.style,Ae),Object.keys(v).forEach(function(m){var y=v[m];y===!1?u.removeAttribute(m):u.setAttribute(m,y===!0?"":y)}))})},effect:function(ve){var B=ve.state,se={popper:{position:B.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(B.elements.popper.style,se.popper),B.styles=se,B.elements.arrow&&Object.assign(B.elements.arrow.style,se.arrow),function(){Object.keys(B.elements).forEach(function(Ae){var v=B.elements[Ae],u=B.attributes[Ae]||{},m=Object.keys(B.styles.hasOwnProperty(Ae)?B.styles[Ae]:se[Ae]).reduce(function(y,S){return y[S]="",y},{});pr(v)&&hn(v)&&(Object.assign(v.style,m),Object.keys(u).forEach(function(y){v.removeAttribute(y)}))})}},requires:["computeStyles"]};function Dr(ve){return ve.split("-")[0]}var qo=Math.max,Xs=Math.min,Ir=Math.round;function ji(){var ve=navigator.userAgentData;return ve!=null&&ve.brands&&Array.isArray(ve.brands)?ve.brands.map(function(B){return B.brand+"/"+B.version}).join(" "):navigator.userAgent}function yu(){return!/^((?!chrome|android).)*safari/i.test(ji())}function $s(ve,B,se){B===void 0&&(B=!1),se===void 0&&(se=!1);var Ae=ve.getBoundingClientRect(),v=1,u=1;B&&pr(ve)&&(v=ve.offsetWidth>0&&Ir(Ae.width)/ve.offsetWidth||1,u=ve.offsetHeight>0&&Ir(Ae.height)/ve.offsetHeight||1);var m=(Yn(ve)?Nn(ve):window).visualViewport,y=!yu()&&se,S=(Ae.left+(y&&m?m.offsetLeft:0))/v,C=(Ae.top+(y&&m?m.offsetTop:0))/u,L=Ae.width/v,O=Ae.height/u;return{width:L,height:O,top:C,right:S+L,bottom:C+O,left:S,x:S,y:C}}function ul(ve){var B=$s(ve),se=ve.offsetWidth,Ae=ve.offsetHeight;return Math.abs(B.width-se)<=1&&(se=B.width),Math.abs(B.height-Ae)<=1&&(Ae=B.height),{x:ve.offsetLeft,y:ve.offsetTop,width:se,height:Ae}}function $l(ve,B){var se=B.getRootNode&&B.getRootNode();if(ve.contains(B))return!0;if(se&&lo(se)){var Ae=B;do{if(Ae&&ve.isSameNode(Ae))return!0;Ae=Ae.parentNode||Ae.host}while(Ae)}return!1}function ks(ve){return Nn(ve).getComputedStyle(ve)}function Rh(ve){return["table","td","th"].indexOf(hn(ve))>=0}function Io(ve){return((Yn(ve)?ve.ownerDocument:ve.document)||window.document).documentElement}function dl(ve){return hn(ve)==="html"?ve:ve.assignedSlot||ve.parentNode||(lo(ve)?ve.host:null)||Io(ve)}function Ao(ve){return pr(ve)&&ks(ve).position!=="fixed"?ve.offsetParent:null}function ga(ve){for(var B=Nn(ve),se=Ao(ve);se&&Rh(se)&&ks(se).position==="static";)se=Ao(se);return se&&(hn(se)==="html"||hn(se)==="body"&&ks(se).position==="static")?B:se||(function(Ae){var v=/firefox/i.test(ji());if(/Trident/i.test(ji())&&pr(Ae)&&ks(Ae).position==="fixed")return null;var u=dl(Ae);for(lo(u)&&(u=u.host);pr(u)&&["html","body"].indexOf(hn(u))<0;){var m=ks(u);if(m.transform!=="none"||m.perspective!=="none"||m.contain==="paint"||["transform","perspective"].indexOf(m.willChange)!==-1||v&&m.willChange==="filter"||v&&m.filter&&m.filter!=="none")return u;u=u.parentNode}return null})(ve)||B}function ss(ve){return["top","bottom"].indexOf(ve)>=0?"x":"y"}function Wi(ve,B,se){return qo(ve,Xs(B,se))}function Uc(ve){return Object.assign({},{top:0,right:0,bottom:0,left:0},ve)}function hl(ve,B){return B.reduce(function(se,Ae){return se[Ae]=ve,se},{})}const Yr={name:"arrow",enabled:!0,phase:"main",fn:function(ve){var B,se=ve.state,Ae=ve.name,v=ve.options,u=se.elements.arrow,m=se.modifiersData.popperOffsets,y=Dr(se.placement),S=ss(y),C=[qn,zs].indexOf(y)>=0?"height":"width";if(u&&m){var L=(function(Le,We){return Uc(typeof(Le=typeof Le=="function"?Le(Object.assign({},We.rects,{placement:We.placement})):Le)!="number"?Le:hl(Le,Cs))})(v.padding,se),O=ul(u),$=S==="y"?Hr:qn,q=S==="y"?Es:zs,K=se.rects.reference[C]+se.rects.reference[S]-m[S]-se.rects.popper[C],ae=m[S]-se.rects.reference[S],pe=ga(u),be=pe?S==="y"?pe.clientHeight||0:pe.clientWidth||0:0,Se=K/2-ae/2,xe=L[$],Ce=be-O[C]-L[q],le=be/2-O[C]/2+Se,ye=Wi(xe,le,Ce),Pe=S;se.modifiersData[Ae]=((B={})[Pe]=ye,B.centerOffset=ye-le,B)}},effect:function(ve){var B=ve.state,se=ve.options.element,Ae=se===void 0?"[data-popper-arrow]":se;Ae!=null&&(typeof Ae!="string"||(Ae=B.elements.popper.querySelector(Ae)))&&$l(B.elements.popper,Ae)&&(B.elements.arrow=Ae)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function os(ve){return ve.split("-")[1]}var bu={top:"auto",right:"auto",bottom:"auto",left:"auto"};function tr(ve){var B,se=ve.popper,Ae=ve.popperRect,v=ve.placement,u=ve.variation,m=ve.offsets,y=ve.position,S=ve.gpuAcceleration,C=ve.adaptive,L=ve.roundOffsets,O=ve.isFixed,$=m.x,q=$===void 0?0:$,K=m.y,ae=K===void 0?0:K,pe=typeof L=="function"?L({x:q,y:ae}):{x:q,y:ae};q=pe.x,ae=pe.y;var be=m.hasOwnProperty("x"),Se=m.hasOwnProperty("y"),xe=qn,Ce=Hr,le=window;if(C){var ye=ga(se),Pe="clientHeight",Le="clientWidth";ye===Nn(se)&&ks(ye=Io(se)).position!=="static"&&y==="absolute"&&(Pe="scrollHeight",Le="scrollWidth"),(v===Hr||(v===qn||v===zs)&&u===Ka)&&(Ce=Es,ae-=(O&&ye===le&&le.visualViewport?le.visualViewport.height:ye[Pe])-Ae.height,ae*=S?1:-1),v!==qn&&(v!==Hr&&v!==Es||u!==Ka)||(xe=zs,q-=(O&&ye===le&&le.visualViewport?le.visualViewport.width:ye[Le])-Ae.width,q*=S?1:-1)}var We,qe=Object.assign({position:y},C&&bu),Ye=L===!0?(function(ut,at){var gt=ut.x,qt=ut.y,dt=at.devicePixelRatio||1;return{x:Ir(gt*dt)/dt||0,y:Ir(qt*dt)/dt||0}})({x:q,y:ae},Nn(se)):{x:q,y:ae};return q=Ye.x,ae=Ye.y,S?Object.assign({},qe,((We={})[Ce]=Se?"0":"",We[xe]=be?"0":"",We.transform=(le.devicePixelRatio||1)<=1?"translate("+q+"px, "+ae+"px)":"translate3d("+q+"px, "+ae+"px, 0)",We)):Object.assign({},qe,((B={})[Ce]=Se?ae+"px":"",B[xe]=be?q+"px":"",B.transform="",B))}const gr={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(ve){var B=ve.state,se=ve.options,Ae=se.gpuAcceleration,v=Ae===void 0||Ae,u=se.adaptive,m=u===void 0||u,y=se.roundOffsets,S=y===void 0||y,C={placement:Dr(B.placement),variation:os(B.placement),popper:B.elements.popper,popperRect:B.rects.popper,gpuAcceleration:v,isFixed:B.options.strategy==="fixed"};B.modifiersData.popperOffsets!=null&&(B.styles.popper=Object.assign({},B.styles.popper,tr(Object.assign({},C,{offsets:B.modifiersData.popperOffsets,position:B.options.strategy,adaptive:m,roundOffsets:S})))),B.modifiersData.arrow!=null&&(B.styles.arrow=Object.assign({},B.styles.arrow,tr(Object.assign({},C,{offsets:B.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:S})))),B.attributes.popper=Object.assign({},B.attributes.popper,{"data-popper-placement":B.placement})},data:{}};var fl={passive:!0};const pc={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(ve){var B=ve.state,se=ve.instance,Ae=ve.options,v=Ae.scroll,u=v===void 0||v,m=Ae.resize,y=m===void 0||m,S=Nn(B.elements.popper),C=[].concat(B.scrollParents.reference,B.scrollParents.popper);return u&&C.forEach(function(L){L.addEventListener("scroll",se.update,fl)}),y&&S.addEventListener("resize",se.update,fl),function(){u&&C.forEach(function(L){L.removeEventListener("scroll",se.update,fl)}),y&&S.removeEventListener("resize",se.update,fl)}},data:{}};var ml={left:"right",right:"left",bottom:"top",top:"bottom"};function Vr(ve){return ve.replace(/left|right|bottom|top/g,function(B){return ml[B]})}var gc={start:"end",end:"start"};function Ko(ve){return ve.replace(/start|end/g,function(B){return gc[B]})}function Po(ve){var B=Nn(ve);return{scrollLeft:B.pageXOffset,scrollTop:B.pageYOffset}}function va(ve){return $s(Io(ve)).left+Po(ve).scrollLeft}function _a(ve){var B=ks(ve),se=B.overflow,Ae=B.overflowX,v=B.overflowY;return/auto|scroll|overlay|hidden/.test(se+v+Ae)}function pd(ve){return["html","body","#document"].indexOf(hn(ve))>=0?ve.ownerDocument.body:pr(ve)&&_a(ve)?ve:pd(dl(ve))}function Ya(ve,B){var se;B===void 0&&(B=[]);var Ae=pd(ve),v=Ae===((se=ve.ownerDocument)==null?void 0:se.body),u=Nn(Ae),m=v?[u].concat(u.visualViewport||[],_a(Ae)?Ae:[]):Ae,y=B.concat(m);return v?y:y.concat(Ya(dl(m)))}function Xo(ve){return Object.assign({},ve,{left:ve.x,top:ve.y,right:ve.x+ve.width,bottom:ve.y+ve.height})}function Mo(ve,B,se){return B===Co?Xo((function(Ae,v){var u=Nn(Ae),m=Io(Ae),y=u.visualViewport,S=m.clientWidth,C=m.clientHeight,L=0,O=0;if(y){S=y.width,C=y.height;var $=yu();($||!$&&v==="fixed")&&(L=y.offsetLeft,O=y.offsetTop)}return{width:S,height:C,x:L+va(Ae),y:O}})(ve,se)):Yn(B)?(function(Ae,v){var u=$s(Ae,!1,v==="fixed");return u.top=u.top+Ae.clientTop,u.left=u.left+Ae.clientLeft,u.bottom=u.top+Ae.clientHeight,u.right=u.left+Ae.clientWidth,u.width=Ae.clientWidth,u.height=Ae.clientHeight,u.x=u.left,u.y=u.top,u})(B,se):Xo((function(Ae){var v,u=Io(Ae),m=Po(Ae),y=(v=Ae.ownerDocument)==null?void 0:v.body,S=qo(u.scrollWidth,u.clientWidth,y?y.scrollWidth:0,y?y.clientWidth:0),C=qo(u.scrollHeight,u.clientHeight,y?y.scrollHeight:0,y?y.clientHeight:0),L=-m.scrollLeft+va(Ae),O=-m.scrollTop;return ks(y||u).direction==="rtl"&&(L+=qo(u.clientWidth,y?y.clientWidth:0)-S),{width:S,height:C,x:L,y:O}})(Io(ve)))}function Ul(ve){var B,se=ve.reference,Ae=ve.element,v=ve.placement,u=v?Dr(v):null,m=v?os(v):null,y=se.x+se.width/2-Ae.width/2,S=se.y+se.height/2-Ae.height/2;switch(u){case Hr:B={x:y,y:se.y-Ae.height};break;case Es:B={x:y,y:se.y+se.height};break;case zs:B={x:se.x+se.width,y:S};break;case qn:B={x:se.x-Ae.width,y:S};break;default:B={x:se.x,y:se.y}}var C=u?ss(u):null;if(C!=null){var L=C==="y"?"height":"width";switch(m){case Ho:B[C]=B[C]-(se[L]/2-Ae[L]/2);break;case Ka:B[C]=B[C]+(se[L]/2-Ae[L]/2)}}return B}function Do(ve,B){B===void 0&&(B={});var se=B,Ae=se.placement,v=Ae===void 0?ve.placement:Ae,u=se.strategy,m=u===void 0?ve.strategy:u,y=se.boundary,S=y===void 0?Eo:y,C=se.rootBoundary,L=C===void 0?Co:C,O=se.elementContext,$=O===void 0?Xa:O,q=se.altBoundary,K=q!==void 0&&q,ae=se.padding,pe=ae===void 0?0:ae,be=Uc(typeof pe!="number"?pe:hl(pe,Cs)),Se=$===Xa?fc:Xa,xe=ve.rects.popper,Ce=ve.elements[K?Se:$],le=(function(at,gt,qt,dt){var Vt=gt==="clippingParents"?(function(Et){var Ht=Ya(dl(Et)),Nt=["absolute","fixed"].indexOf(ks(Et).position)>=0&&pr(Et)?ga(Et):Et;return Yn(Nt)?Ht.filter(function(Jt){return Yn(Jt)&&$l(Jt,Nt)&&hn(Jt)!=="body"}):[]})(at):[].concat(gt),xt=[].concat(Vt,[qt]),Zt=xt[0],ft=xt.reduce(function(Et,Ht){var Nt=Mo(at,Ht,dt);return Et.top=qo(Nt.top,Et.top),Et.right=Xs(Nt.right,Et.right),Et.bottom=Xs(Nt.bottom,Et.bottom),Et.left=qo(Nt.left,Et.left),Et},Mo(at,Zt,dt));return ft.width=ft.right-ft.left,ft.height=ft.bottom-ft.top,ft.x=ft.left,ft.y=ft.top,ft})(Yn(Ce)?Ce:Ce.contextElement||Io(ve.elements.popper),S,L,m),ye=$s(ve.elements.reference),Pe=Ul({reference:ye,element:xe,placement:v}),Le=Xo(Object.assign({},xe,Pe)),We=$===Xa?Le:ye,qe={top:le.top-We.top+be.top,bottom:We.bottom-le.bottom+be.bottom,left:le.left-We.left+be.left,right:We.right-le.right+be.right},Ye=ve.modifiersData.offset;if($===Xa&&Ye){var ut=Ye[v];Object.keys(qe).forEach(function(at){var gt=[zs,Es].indexOf(at)>=0?1:-1,qt=[Hr,Es].indexOf(at)>=0?"y":"x";qe[at]+=ut[qt]*gt})}return qe}function ya(ve,B){B===void 0&&(B={});var se=B,Ae=se.placement,v=se.boundary,u=se.rootBoundary,m=se.padding,y=se.flipVariations,S=se.allowedAutoPlacements,C=S===void 0?ko:S,L=os(Ae),O=L?y?Go:Go.filter(function(K){return os(K)===L}):Cs,$=O.filter(function(K){return C.indexOf(K)>=0});$.length===0&&($=O);var q=$.reduce(function(K,ae){return K[ae]=Do(ve,{placement:ae,boundary:v,rootBoundary:u,padding:m})[Dr(ae)],K},{});return Object.keys(q).sort(function(K,ae){return q[K]-q[ae]})}const ba={name:"flip",enabled:!0,phase:"main",fn:function(ve){var B=ve.state,se=ve.options,Ae=ve.name;if(!B.modifiersData[Ae]._skip){for(var v=se.mainAxis,u=v===void 0||v,m=se.altAxis,y=m===void 0||m,S=se.fallbackPlacements,C=se.padding,L=se.boundary,O=se.rootBoundary,$=se.altBoundary,q=se.flipVariations,K=q===void 0||q,ae=se.allowedAutoPlacements,pe=B.options.placement,be=Dr(pe),Se=S||(be!==pe&&K?(function(Et){if(Dr(Et)===fa)return[];var Ht=Vr(Et);return[Ko(Et),Ht,Ko(Ht)]})(pe):[Vr(pe)]),xe=[pe].concat(Se).reduce(function(Et,Ht){return Et.concat(Dr(Ht)===fa?ya(B,{placement:Ht,boundary:L,rootBoundary:O,padding:C,flipVariations:K,allowedAutoPlacements:ae}):Ht)},[]),Ce=B.rects.reference,le=B.rects.popper,ye=new Map,Pe=!0,Le=xe[0],We=0;We<xe.length;We++){var qe=xe[We],Ye=Dr(qe),ut=os(qe)===Ho,at=[Hr,Es].indexOf(Ye)>=0,gt=at?"width":"height",qt=Do(B,{placement:qe,boundary:L,rootBoundary:O,altBoundary:$,padding:C}),dt=at?ut?zs:qn:ut?Es:Hr;Ce[gt]>le[gt]&&(dt=Vr(dt));var Vt=Vr(dt),xt=[];if(u&&xt.push(qt[Ye]<=0),y&&xt.push(qt[dt]<=0,qt[Vt]<=0),xt.every(function(Et){return Et})){Le=qe,Pe=!1;break}ye.set(qe,xt)}if(Pe)for(var Zt=function(Et){var Ht=xe.find(function(Nt){var Jt=ye.get(Nt);if(Jt)return Jt.slice(0,Et).every(function(Mn){return Mn})});if(Ht)return Le=Ht,"break"},ft=K?3:1;ft>0&&Zt(ft)!=="break";ft--);B.placement!==Le&&(B.modifiersData[Ae]._skip=!0,B.placement=Le,B.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function Yo(ve,B,se){return se===void 0&&(se={x:0,y:0}),{top:ve.top-B.height-se.y,right:ve.right-B.width+se.x,bottom:ve.bottom-B.height+se.y,left:ve.left-B.width-se.x}}function vc(ve){return[Hr,zs,Es,qn].some(function(B){return ve[B]>=0})}const Za={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(ve){var B=ve.state,se=ve.name,Ae=B.rects.reference,v=B.rects.popper,u=B.modifiersData.preventOverflow,m=Do(B,{elementContext:"reference"}),y=Do(B,{altBoundary:!0}),S=Yo(m,Ae),C=Yo(y,v,u),L=vc(S),O=vc(C);B.modifiersData[se]={referenceClippingOffsets:S,popperEscapeOffsets:C,isReferenceHidden:L,hasPopperEscaped:O},B.attributes.popper=Object.assign({},B.attributes.popper,{"data-popper-reference-hidden":L,"data-popper-escaped":O})}},pl={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(ve){var B=ve.state,se=ve.options,Ae=ve.name,v=se.offset,u=v===void 0?[0,0]:v,m=ko.reduce(function(L,O){return L[O]=(function($,q,K){var ae=Dr($),pe=[qn,Hr].indexOf(ae)>=0?-1:1,be=typeof K=="function"?K(Object.assign({},q,{placement:$})):K,Se=be[0],xe=be[1];return Se=Se||0,xe=(xe||0)*pe,[qn,zs].indexOf(ae)>=0?{x:xe,y:Se}:{x:Se,y:xe}})(O,B.rects,u),L},{}),y=m[B.placement],S=y.x,C=y.y;B.modifiersData.popperOffsets!=null&&(B.modifiersData.popperOffsets.x+=S,B.modifiersData.popperOffsets.y+=C),B.modifiersData[Ae]=m}},jc={name:"popperOffsets",enabled:!0,phase:"read",fn:function(ve){var B=ve.state,se=ve.name;B.modifiersData[se]=Ul({reference:B.rects.reference,element:B.rects.popper,placement:B.placement})},data:{}},gl={name:"preventOverflow",enabled:!0,phase:"main",fn:function(ve){var B=ve.state,se=ve.options,Ae=ve.name,v=se.mainAxis,u=v===void 0||v,m=se.altAxis,y=m!==void 0&&m,S=se.boundary,C=se.rootBoundary,L=se.altBoundary,O=se.padding,$=se.tether,q=$===void 0||$,K=se.tetherOffset,ae=K===void 0?0:K,pe=Do(B,{boundary:S,rootBoundary:C,padding:O,altBoundary:L}),be=Dr(B.placement),Se=os(B.placement),xe=!Se,Ce=ss(be),le=Ce==="x"?"y":"x",ye=B.modifiersData.popperOffsets,Pe=B.rects.reference,Le=B.rects.popper,We=typeof ae=="function"?ae(Object.assign({},B.rects,{placement:B.placement})):ae,qe=typeof We=="number"?{mainAxis:We,altAxis:We}:Object.assign({mainAxis:0,altAxis:0},We),Ye=B.modifiersData.offset?B.modifiersData.offset[B.placement]:null,ut={x:0,y:0};if(ye){if(u){var at,gt=Ce==="y"?Hr:qn,qt=Ce==="y"?Es:zs,dt=Ce==="y"?"height":"width",Vt=ye[Ce],xt=Vt+pe[gt],Zt=Vt-pe[qt],ft=q?-Le[dt]/2:0,Et=Se===Ho?Pe[dt]:Le[dt],Ht=Se===Ho?-Le[dt]:-Pe[dt],Nt=B.elements.arrow,Jt=q&&Nt?ul(Nt):{width:0,height:0},Mn=B.modifiersData["arrow#persistent"]?B.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},Gn=Mn[gt],En=Mn[qt],Rn=Wi(0,Pe[dt],Jt[dt]),gi=xe?Pe[dt]/2-ft-Rn-Gn-qe.mainAxis:Et-Rn-Gn-qe.mainAxis,pi=xe?-Pe[dt]/2+ft+Rn+En+qe.mainAxis:Ht+Rn+En+qe.mainAxis,An=B.elements.arrow&&ga(B.elements.arrow),Oi=An?Ce==="y"?An.clientTop||0:An.clientLeft||0:0,Hi=(at=Ye?.[Ce])!=null?at:0,Zi=Vt+pi-Hi,Gi=Wi(q?Xs(xt,Vt+gi-Hi-Oi):xt,Vt,q?qo(Zt,Zi):Zt);ye[Ce]=Gi,ut[Ce]=Gi-Vt}if(y){var js,Ps=Ce==="x"?Hr:qn,Ta=Ce==="x"?Es:zs,Zs=ye[le],nr=le==="y"?"height":"width",qi=Zs+pe[Ps],Ai=Zs-pe[Ta],Br=[Hr,qn].indexOf(be)!==-1,Js=(js=Ye?.[le])!=null?js:0,or=Br?qi:Zs-Pe[nr]-Le[nr]-Js+qe.altAxis,ho=Br?Zs+Pe[nr]+Le[nr]-Js-qe.altAxis:Ai,Vd=q&&Br?(function(Jc,Bd,il){var ql=Wi(Jc,Bd,il);return ql>il?il:ql})(or,Zs,ho):Wi(q?or:qi,Zs,q?ho:Ai);ye[le]=Vd,ut[le]=Vd-Zs}B.modifiersData[Ae]=ut}},requiresIfExists:["offset"]};function xu(ve,B,se){se===void 0&&(se=!1);var Ae,v,u=pr(B),m=pr(B)&&(function(O){var $=O.getBoundingClientRect(),q=Ir($.width)/O.offsetWidth||1,K=Ir($.height)/O.offsetHeight||1;return q!==1||K!==1})(B),y=Io(B),S=$s(ve,m,se),C={scrollLeft:0,scrollTop:0},L={x:0,y:0};return(u||!u&&!se)&&((hn(B)!=="body"||_a(y))&&(C=(Ae=B)!==Nn(Ae)&&pr(Ae)?{scrollLeft:(v=Ae).scrollLeft,scrollTop:v.scrollTop}:Po(Ae)),pr(B)?((L=$s(B,!0)).x+=B.clientLeft,L.y+=B.clientTop):y&&(L.x=va(y))),{x:S.left+C.scrollLeft-L.x,y:S.top+C.scrollTop-L.y,width:S.width,height:S.height}}function wu(ve){var B=new Map,se=new Set,Ae=[];function v(u){se.add(u.name),[].concat(u.requires||[],u.requiresIfExists||[]).forEach(function(m){if(!se.has(m)){var y=B.get(m);y&&v(y)}}),Ae.push(u)}return ve.forEach(function(u){B.set(u.name,u)}),ve.forEach(function(u){se.has(u.name)||v(u)}),Ae}var co={placement:"bottom",modifiers:[],strategy:"absolute"};function Ei(){for(var ve=arguments.length,B=new Array(ve),se=0;se<ve;se++)B[se]=arguments[se];return!B.some(function(Ae){return!(Ae&&typeof Ae.getBoundingClientRect=="function")})}function Wc(ve){ve===void 0&&(ve={});var B=ve,se=B.defaultModifiers,Ae=se===void 0?[]:se,v=B.defaultOptions,u=v===void 0?co:v;return function(m,y,S){S===void 0&&(S=u);var C,L,O={placement:"bottom",orderedModifiers:[],options:Object.assign({},co,u),modifiersData:{},elements:{reference:m,popper:y},attributes:{},styles:{}},$=[],q=!1,K={state:O,setOptions:function(pe){var be=typeof pe=="function"?pe(O.options):pe;ae(),O.options=Object.assign({},u,O.options,be),O.scrollParents={reference:Yn(m)?Ya(m):m.contextElement?Ya(m.contextElement):[],popper:Ya(y)};var Se,xe,Ce=(function(le){var ye=wu(le);return pa.reduce(function(Pe,Le){return Pe.concat(ye.filter(function(We){return We.phase===Le}))},[])})((Se=[].concat(Ae,O.options.modifiers),xe=Se.reduce(function(le,ye){var Pe=le[ye.name];return le[ye.name]=Pe?Object.assign({},Pe,ye,{options:Object.assign({},Pe.options,ye.options),data:Object.assign({},Pe.data,ye.data)}):ye,le},{}),Object.keys(xe).map(function(le){return xe[le]})));return O.orderedModifiers=Ce.filter(function(le){return le.enabled}),O.orderedModifiers.forEach(function(le){var ye=le.name,Pe=le.options,Le=Pe===void 0?{}:Pe,We=le.effect;if(typeof We=="function"){var qe=We({state:O,name:ye,instance:K,options:Le});$.push(qe||function(){})}}),K.update()},forceUpdate:function(){if(!q){var pe=O.elements,be=pe.reference,Se=pe.popper;if(Ei(be,Se)){O.rects={reference:xu(be,ga(Se),O.options.strategy==="fixed"),popper:ul(Se)},O.reset=!1,O.placement=O.options.placement,O.orderedModifiers.forEach(function(We){return O.modifiersData[We.name]=Object.assign({},We.data)});for(var xe=0;xe<O.orderedModifiers.length;xe++)if(O.reset!==!0){var Ce=O.orderedModifiers[xe],le=Ce.fn,ye=Ce.options,Pe=ye===void 0?{}:ye,Le=Ce.name;typeof le=="function"&&(O=le({state:O,options:Pe,name:Le,instance:K})||O)}else O.reset=!1,xe=-1}}},update:(C=function(){return new Promise(function(pe){K.forceUpdate(),pe(O)})},function(){return L||(L=new Promise(function(pe){Promise.resolve().then(function(){L=void 0,pe(C())})})),L}),destroy:function(){ae(),q=!0}};if(!Ei(m,y))return K;function ae(){$.forEach(function(pe){return pe()}),$=[]}return K.setOptions(S).then(function(pe){!q&&S.onFirstUpdate&&S.onFirstUpdate(pe)}),K}}var Tu=Wc(),gd=Wc({defaultModifiers:[pc,jc,gr,ii]}),vl=Wc({defaultModifiers:[pc,jc,gr,ii,pl,ba,gl,Yr,Za]});const Us=Object.freeze(Object.defineProperty({__proto__:null,afterMain:Nl,afterRead:ma,afterWrite:er,applyStyles:ii,arrow:Yr,auto:fa,basePlacements:Cs,beforeMain:Ui,beforeRead:zl,beforeWrite:Ns,bottom:Es,clippingParents:Eo,computeStyles:gr,createPopper:vl,createPopperBase:Tu,createPopperLite:gd,detectOverflow:Do,end:Ka,eventListeners:pc,flip:ba,hide:Za,left:qn,main:Yi,modifierPhases:pa,offset:pl,placements:ko,popper:Xa,popperGenerator:Wc,popperOffsets:jc,preventOverflow:gl,read:Ot,reference:fc,right:zs,start:Ho,top:Hr,variationPlacements:Go,viewport:Co,write:mc},Symbol.toStringTag,{value:"Module"})),Hc="dropdown",uo=".bs.dropdown",Zo=".data-api",P="ArrowUp",ee="ArrowDown",de=`hide${uo}`,Me=`hidden${uo}`,St=`show${uo}`,Rt=`shown${uo}`,bn=`click${uo}${Zo}`,di=`keydown${uo}${Zo}`,Lr=`keyup${uo}${Zo}`,ki="show",sr='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',Qn=`${sr}.${ki}`,Ys=".dropdown-menu",Ja=F()?"top-end":"top-start",xa=F()?"top-start":"top-end",Gc=F()?"bottom-end":"bottom-start",Qa=F()?"bottom-start":"bottom-end",gm=F()?"left-start":"right-start",P_=F()?"right-start":"left-start",M_={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},D_={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Jo extends ct{constructor(B,se){super(B,se),this._popper=null,this._parent=this._element.parentNode,this._menu=Qe.next(this._element,Ys)[0]||Qe.prev(this._element,Ys)[0]||Qe.findOne(Ys,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return M_}static get DefaultType(){return D_}static get NAME(){return Hc}toggle(){return this._isShown()?this.hide():this.show()}show(){if(x(this._element)||this._isShown())return;const B={relatedTarget:this._element};if(!Ee.trigger(this._element,St,B).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const se of[].concat(...document.body.children))Ee.on(se,"mouseover",k);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(ki),this._element.classList.add(ki),Ee.trigger(this._element,Rt,B)}}hide(){if(x(this._element)||!this._isShown())return;const B={relatedTarget:this._element};this._completeHide(B)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(B){if(!Ee.trigger(this._element,de,B).defaultPrevented){if("ontouchstart"in document.documentElement)for(const se of[].concat(...document.body.children))Ee.off(se,"mouseover",k);this._popper&&this._popper.destroy(),this._menu.classList.remove(ki),this._element.classList.remove(ki),this._element.setAttribute("aria-expanded","false"),Pt.removeDataAttribute(this._menu,"popper"),Ee.trigger(this._element,Me,B)}}_getConfig(B){if(typeof(B=super._getConfig(B)).reference=="object"&&!s(B.reference)&&typeof B.reference.getBoundingClientRect!="function")throw new TypeError(`${Hc.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return B}_createPopper(){if(Us===void 0)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org/docs/v2/)");let B=this._element;this._config.reference==="parent"?B=this._parent:s(this._config.reference)?B=p(this._config.reference):typeof this._config.reference=="object"&&(B=this._config.reference);const se=this._getPopperConfig();this._popper=vl(B,this._menu,se)}_isShown(){return this._menu.classList.contains(ki)}_getPlacement(){const B=this._parent;if(B.classList.contains("dropend"))return gm;if(B.classList.contains("dropstart"))return P_;if(B.classList.contains("dropup-center"))return"top";if(B.classList.contains("dropdown-center"))return"bottom";const se=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return B.classList.contains("dropup")?se?xa:Ja:se?Qa:Gc}_detectNavbar(){return this._element.closest(".navbar")!==null}_getOffset(){const{offset:B}=this._config;return typeof B=="string"?B.split(",").map(se=>Number.parseInt(se,10)):typeof B=="function"?se=>B(se,this._element):B}_getPopperConfig(){const B={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(Pt.setDataAttribute(this._menu,"popper","static"),B.modifiers=[{name:"applyStyles",enabled:!1}]),{...B,...G(this._config.popperConfig,[void 0,B])}}_selectMenuItem({key:B,target:se}){const Ae=Qe.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(v=>_(v));Ae.length&&J(Ae,se,B===ee,!Ae.includes(se)).focus()}static jQueryInterface(B){return this.each(function(){const se=Jo.getOrCreateInstance(this,B);if(typeof B=="string"){if(se[B]===void 0)throw new TypeError(`No method named "${B}"`);se[B]()}})}static clearMenus(B){if(B.button===2||B.type==="keyup"&&B.key!=="Tab")return;const se=Qe.find(Qn);for(const Ae of se){const v=Jo.getInstance(Ae);if(!v||v._config.autoClose===!1)continue;const u=B.composedPath(),m=u.includes(v._menu);if(u.includes(v._element)||v._config.autoClose==="inside"&&!m||v._config.autoClose==="outside"&&m||v._menu.contains(B.target)&&(B.type==="keyup"&&B.key==="Tab"||/input|select|option|textarea|form/i.test(B.target.tagName)))continue;const y={relatedTarget:v._element};B.type==="click"&&(y.clickEvent=B),v._completeHide(y)}}static dataApiKeydownHandler(B){const se=/input|textarea/i.test(B.target.tagName),Ae=B.key==="Escape",v=[P,ee].includes(B.key);if(!v&&!Ae||se&&!Ae)return;B.preventDefault();const u=this.matches(sr)?this:Qe.prev(this,sr)[0]||Qe.next(this,sr)[0]||Qe.findOne(sr,B.delegateTarget.parentNode),m=Jo.getOrCreateInstance(u);if(v)return B.stopPropagation(),m.show(),void m._selectMenuItem(B);m._isShown()&&(B.stopPropagation(),m.hide(),u.focus())}}Ee.on(document,di,sr,Jo.dataApiKeydownHandler),Ee.on(document,di,Ys,Jo.dataApiKeydownHandler),Ee.on(document,bn,Jo.clearMenus),Ee.on(document,Lr,Jo.clearMenus),Ee.on(document,bn,sr,function(ve){ve.preventDefault(),Jo.getOrCreateInstance(this).toggle()}),z(Jo);const Oh="backdrop",Vh="show",vd=`mousedown.bs.${Oh}`,pg={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},gg={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class vg extends $t{constructor(B){super(),this._config=this._getConfig(B),this._isAppended=!1,this._element=null}static get Default(){return pg}static get DefaultType(){return gg}static get NAME(){return Oh}show(B){if(!this._config.isVisible)return void G(B);this._append();const se=this._getElement();this._config.isAnimated&&A(se),se.classList.add(Vh),this._emulateAnimation(()=>{G(B)})}hide(B){this._config.isVisible?(this._getElement().classList.remove(Vh),this._emulateAnimation(()=>{this.dispose(),G(B)})):G(B)}dispose(){this._isAppended&&(Ee.off(this._element,vd),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const B=document.createElement("div");B.className=this._config.className,this._config.isAnimated&&B.classList.add("fade"),this._element=B}return this._element}_configAfterMerge(B){return B.rootElement=p(B.rootElement),B}_append(){if(this._isAppended)return;const B=this._getElement();this._config.rootElement.append(B),Ee.on(B,vd,()=>{G(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(B){Y(B,this._getElement(),this._config.isAnimated)}}const _c=".bs.focustrap",Su=`focusin${_c}`,vm=`keydown.tab${_c}`,Eu="backward",_m={autofocus:!0,trapElement:null},_l={autofocus:"boolean",trapElement:"element"};class _d extends $t{constructor(B){super(),this._config=this._getConfig(B),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return _m}static get DefaultType(){return _l}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),Ee.off(document,_c),Ee.on(document,Su,B=>this._handleFocusin(B)),Ee.on(document,vm,B=>this._handleKeydown(B)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,Ee.off(document,_c))}_handleFocusin(B){const{trapElement:se}=this._config;if(B.target===document||B.target===se||se.contains(B.target))return;const Ae=Qe.focusableChildren(se);Ae.length===0?se.focus():this._lastTabNavDirection===Eu?Ae[Ae.length-1].focus():Ae[0].focus()}_handleKeydown(B){B.key==="Tab"&&(this._lastTabNavDirection=B.shiftKey?Eu:"forward")}}const Bh=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",yd=".sticky-top",bd="padding-right",Fh="margin-right";class ym{constructor(){this._element=document.body}getWidth(){const B=document.documentElement.clientWidth;return Math.abs(window.innerWidth-B)}hide(){const B=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,bd,se=>se+B),this._setElementAttributes(Bh,bd,se=>se+B),this._setElementAttributes(yd,Fh,se=>se-B)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,bd),this._resetElementAttributes(Bh,bd),this._resetElementAttributes(yd,Fh)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(B,se,Ae){const v=this.getWidth();this._applyManipulationCallback(B,u=>{if(u!==this._element&&window.innerWidth>u.clientWidth+v)return;this._saveInitialAttribute(u,se);const m=window.getComputedStyle(u).getPropertyValue(se);u.style.setProperty(se,`${Ae(Number.parseFloat(m))}px`)})}_saveInitialAttribute(B,se){const Ae=B.style.getPropertyValue(se);Ae&&Pt.setDataAttribute(B,se,Ae)}_resetElementAttributes(B,se){this._applyManipulationCallback(B,Ae=>{const v=Pt.getDataAttribute(Ae,se);v!==null?(Pt.removeDataAttribute(Ae,se),Ae.style.setProperty(se,v)):Ae.style.removeProperty(se)})}_applyManipulationCallback(B,se){if(s(B))se(B);else for(const Ae of Qe.find(B,this._element))se(Ae)}}const Lo=".bs.modal",zh=`hide${Lo}`,xd=`hidePrevented${Lo}`,bm=`hidden${Lo}`,Nh=`show${Lo}`,L_=`shown${Lo}`,xm=`resize${Lo}`,_g=`click.dismiss${Lo}`,wd=`mousedown.dismiss${Lo}`,yg=`keydown.dismiss${Lo}`,$h=`click${Lo}.data-api`,wm="modal-open",qc="show",Tm="modal-static",R_={backdrop:!0,focus:!0,keyboard:!0},O_={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Kc extends ct{constructor(B,se){super(B,se),this._dialog=Qe.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new ym,this._addEventListeners()}static get Default(){return R_}static get DefaultType(){return O_}static get NAME(){return"modal"}toggle(B){return this._isShown?this.hide():this.show(B)}show(B){this._isShown||this._isTransitioning||Ee.trigger(this._element,Nh,{relatedTarget:B}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(wm),this._adjustDialog(),this._backdrop.show(()=>this._showElement(B)))}hide(){this._isShown&&!this._isTransitioning&&(Ee.trigger(this._element,zh).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(qc),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated())))}dispose(){Ee.off(window,Lo),Ee.off(this._dialog,Lo),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new vg({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new _d({trapElement:this._element})}_showElement(B){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const se=Qe.findOne(".modal-body",this._dialog);se&&(se.scrollTop=0),A(this._element),this._element.classList.add(qc),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,Ee.trigger(this._element,L_,{relatedTarget:B})},this._dialog,this._isAnimated())}_addEventListeners(){Ee.on(this._element,yg,B=>{B.key==="Escape"&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())}),Ee.on(window,xm,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),Ee.on(this._element,wd,B=>{Ee.one(this._element,_g,se=>{this._element===B.target&&this._element===se.target&&(this._config.backdrop!=="static"?this._config.backdrop&&this.hide():this._triggerBackdropTransition())})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(wm),this._resetAdjustments(),this._scrollBar.reset(),Ee.trigger(this._element,bm)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(Ee.trigger(this._element,xd).defaultPrevented)return;const B=this._element.scrollHeight>document.documentElement.clientHeight,se=this._element.style.overflowY;se==="hidden"||this._element.classList.contains(Tm)||(B||(this._element.style.overflowY="hidden"),this._element.classList.add(Tm),this._queueCallback(()=>{this._element.classList.remove(Tm),this._queueCallback(()=>{this._element.style.overflowY=se},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const B=this._element.scrollHeight>document.documentElement.clientHeight,se=this._scrollBar.getWidth(),Ae=se>0;if(Ae&&!B){const v=F()?"paddingLeft":"paddingRight";this._element.style[v]=`${se}px`}if(!Ae&&B){const v=F()?"paddingRight":"paddingLeft";this._element.style[v]=`${se}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(B,se){return this.each(function(){const Ae=Kc.getOrCreateInstance(this,B);if(typeof B=="string"){if(Ae[B]===void 0)throw new TypeError(`No method named "${B}"`);Ae[B](se)}})}}Ee.on(document,$h,'[data-bs-toggle="modal"]',function(ve){const B=Qe.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&ve.preventDefault(),Ee.one(B,Nh,Ae=>{Ae.defaultPrevented||Ee.one(B,bm,()=>{_(this)&&this.focus()})});const se=Qe.findOne(".modal.show");se&&Kc.getInstance(se).hide(),Kc.getOrCreateInstance(B).toggle(this)}),kt(Kc),z(Kc);const jl=".bs.offcanvas",Sm=".data-api",Uh=`load${jl}${Sm}`,Xc="show",Em="showing",Cm="hiding",yl=".offcanvas.show",jh=`show${jl}`,wa=`shown${jl}`,Td=`hide${jl}`,km=`hidePrevented${jl}`,yc=`hidden${jl}`,Cu=`resize${jl}`,Wh=`click${jl}${Sm}`,Hh=`keydown.dismiss${jl}`,Ii={backdrop:!0,keyboard:!0,scroll:!1},Sd={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class bl extends ct{constructor(B,se){super(B,se),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Ii}static get DefaultType(){return Sd}static get NAME(){return"offcanvas"}toggle(B){return this._isShown?this.hide():this.show(B)}show(B){this._isShown||Ee.trigger(this._element,jh,{relatedTarget:B}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||new ym().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Em),this._queueCallback(()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(Xc),this._element.classList.remove(Em),Ee.trigger(this._element,wa,{relatedTarget:B})},this._element,!0))}hide(){this._isShown&&(Ee.trigger(this._element,Td).defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Cm),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove(Xc,Cm),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new ym().reset(),Ee.trigger(this._element,yc)},this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const B=!!this._config.backdrop;return new vg({className:"offcanvas-backdrop",isVisible:B,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:B?()=>{this._config.backdrop!=="static"?this.hide():Ee.trigger(this._element,km)}:null})}_initializeFocusTrap(){return new _d({trapElement:this._element})}_addEventListeners(){Ee.on(this._element,Hh,B=>{B.key==="Escape"&&(this._config.keyboard?this.hide():Ee.trigger(this._element,km))})}static jQueryInterface(B){return this.each(function(){const se=bl.getOrCreateInstance(this,B);if(typeof B=="string"){if(se[B]===void 0||B.startsWith("_")||B==="constructor")throw new TypeError(`No method named "${B}"`);se[B](this)}})}}Ee.on(document,Wh,'[data-bs-toggle="offcanvas"]',function(ve){const B=Qe.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&ve.preventDefault(),x(this))return;Ee.one(B,yc,()=>{_(this)&&this.focus()});const se=Qe.findOne(yl);se&&se!==B&&bl.getInstance(se).hide(),bl.getOrCreateInstance(B).toggle(this)}),Ee.on(window,Uh,()=>{for(const ve of Qe.find(yl))bl.getOrCreateInstance(ve).show()}),Ee.on(window,Cu,()=>{for(const ve of Qe.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(ve).position!=="fixed"&&bl.getOrCreateInstance(ve).hide()}),kt(bl),z(bl);const Ed={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},ku=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),bg=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,Gh=(ve,B)=>{const se=ve.nodeName.toLowerCase();return B.includes(se)?!ku.has(se)||!!bg.test(ve.nodeValue):B.filter(Ae=>Ae instanceof RegExp).some(Ae=>Ae.test(se))},Wl={allowList:Ed,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},xg={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},qh={entry:"(string|element|function|null)",selector:"(string|element)"};class Iu extends $t{constructor(B){super(),this._config=this._getConfig(B)}static get Default(){return Wl}static get DefaultType(){return xg}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(B=>this._resolvePossibleFunction(B)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(B){return this._checkContent(B),this._config.content={...this._config.content,...B},this}toHtml(){const B=document.createElement("div");B.innerHTML=this._maybeSanitize(this._config.template);for(const[v,u]of Object.entries(this._config.content))this._setContent(B,u,v);const se=B.children[0],Ae=this._resolvePossibleFunction(this._config.extraClass);return Ae&&se.classList.add(...Ae.split(" ")),se}_typeCheckConfig(B){super._typeCheckConfig(B),this._checkContent(B.content)}_checkContent(B){for(const[se,Ae]of Object.entries(B))super._typeCheckConfig({selector:se,entry:Ae},qh)}_setContent(B,se,Ae){const v=Qe.findOne(Ae,B);v&&((se=this._resolvePossibleFunction(se))?s(se)?this._putElementInTemplate(p(se),v):this._config.html?v.innerHTML=this._maybeSanitize(se):v.textContent=se:v.remove())}_maybeSanitize(B){return this._config.sanitize?(function(se,Ae,v){if(!se.length)return se;if(v&&typeof v=="function")return v(se);const u=new window.DOMParser().parseFromString(se,"text/html"),m=[].concat(...u.body.querySelectorAll("*"));for(const y of m){const S=y.nodeName.toLowerCase();if(!Object.keys(Ae).includes(S)){y.remove();continue}const C=[].concat(...y.attributes),L=[].concat(Ae["*"]||[],Ae[S]||[]);for(const O of C)Gh(O,L)||y.removeAttribute(O.nodeName)}return u.body.innerHTML})(B,this._config.allowList,this._config.sanitizeFn):B}_resolvePossibleFunction(B){return G(B,[void 0,this])}_putElementInTemplate(B,se){if(this._config.html)return se.innerHTML="",void se.append(B);se.textContent=B.textContent}}const Au=new Set(["sanitize","allowList","sanitizeFn"]),Cd="fade",bc="show",kd=".tooltip-inner",Id=".modal",Ad="hide.bs.modal",vn="hover",Qo="focus",Kh="click",Pd={AUTO:"auto",TOP:"top",RIGHT:F()?"left":"right",BOTTOM:"bottom",LEFT:F()?"right":"left"},Md={allowList:Ed,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},Is={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class el extends ct{constructor(B,se){if(Us===void 0)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org/docs/v2/)");super(B,se),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return Md}static get DefaultType(){return Is}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),Ee.off(this._element.closest(Id),Ad,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const B=Ee.trigger(this._element,this.constructor.eventName("show")),se=(T(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(B.defaultPrevented||!se)return;this._disposePopper();const Ae=this._getTipElement();this._element.setAttribute("aria-describedby",Ae.getAttribute("id"));const{container:v}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(v.append(Ae),Ee.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(Ae),Ae.classList.add(bc),"ontouchstart"in document.documentElement)for(const u of[].concat(...document.body.children))Ee.on(u,"mouseover",k);this._queueCallback(()=>{Ee.trigger(this._element,this.constructor.eventName("shown")),this._isHovered===!1&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(this._isShown()&&!Ee.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(bc),"ontouchstart"in document.documentElement)for(const B of[].concat(...document.body.children))Ee.off(B,"mouseover",k);this._activeTrigger[Kh]=!1,this._activeTrigger[Qo]=!1,this._activeTrigger[vn]=!1,this._isHovered=null,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),Ee.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(B){const se=this._getTemplateFactory(B).toHtml();if(!se)return null;se.classList.remove(Cd,bc),se.classList.add(`bs-${this.constructor.NAME}-auto`);const Ae=(v=>{do v+=Math.floor(1e6*Math.random());while(document.getElementById(v));return v})(this.constructor.NAME).toString();return se.setAttribute("id",Ae),this._isAnimated()&&se.classList.add(Cd),se}setContent(B){this._newContent=B,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(B){return this._templateFactory?this._templateFactory.changeContent(B):this._templateFactory=new Iu({...this._config,content:B,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[kd]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(B){return this.constructor.getOrCreateInstance(B.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(Cd)}_isShown(){return this.tip&&this.tip.classList.contains(bc)}_createPopper(B){const se=G(this._config.placement,[this,B,this._element]),Ae=Pd[se.toUpperCase()];return vl(this._element,B,this._getPopperConfig(Ae))}_getOffset(){const{offset:B}=this._config;return typeof B=="string"?B.split(",").map(se=>Number.parseInt(se,10)):typeof B=="function"?se=>B(se,this._element):B}_resolvePossibleFunction(B){return G(B,[this._element,this._element])}_getPopperConfig(B){const se={placement:B,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:Ae=>{this._getTipElement().setAttribute("data-popper-placement",Ae.state.placement)}}]};return{...se,...G(this._config.popperConfig,[void 0,se])}}_setListeners(){const B=this._config.trigger.split(" ");for(const se of B)if(se==="click")Ee.on(this._element,this.constructor.eventName("click"),this._config.selector,Ae=>{const v=this._initializeOnDelegatedTarget(Ae);v._activeTrigger[Kh]=!(v._isShown()&&v._activeTrigger[Kh]),v.toggle()});else if(se!=="manual"){const Ae=se===vn?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),v=se===vn?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");Ee.on(this._element,Ae,this._config.selector,u=>{const m=this._initializeOnDelegatedTarget(u);m._activeTrigger[u.type==="focusin"?Qo:vn]=!0,m._enter()}),Ee.on(this._element,v,this._config.selector,u=>{const m=this._initializeOnDelegatedTarget(u);m._activeTrigger[u.type==="focusout"?Qo:vn]=m._element.contains(u.relatedTarget),m._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},Ee.on(this._element.closest(Id),Ad,this._hideModalHandler)}_fixTitle(){const B=this._element.getAttribute("title");B&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",B),this._element.setAttribute("data-bs-original-title",B),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(B,se){clearTimeout(this._timeout),this._timeout=setTimeout(B,se)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(B){const se=Pt.getDataAttributes(this._element);for(const Ae of Object.keys(se))Au.has(Ae)&&delete se[Ae];return B={...se,...typeof B=="object"&&B?B:{}},B=this._mergeConfigObj(B),B=this._configAfterMerge(B),this._typeCheckConfig(B),B}_configAfterMerge(B){return B.container=B.container===!1?document.body:p(B.container),typeof B.delay=="number"&&(B.delay={show:B.delay,hide:B.delay}),typeof B.title=="number"&&(B.title=B.title.toString()),typeof B.content=="number"&&(B.content=B.content.toString()),B}_getDelegateConfig(){const B={};for(const[se,Ae]of Object.entries(this._config))this.constructor.Default[se]!==Ae&&(B[se]=Ae);return B.selector=!1,B.trigger="manual",B}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(B){return this.each(function(){const se=el.getOrCreateInstance(this,B);if(typeof B=="string"){if(se[B]===void 0)throw new TypeError(`No method named "${B}"`);se[B]()}})}}z(el);const Xh=".popover-header",Im=".popover-body",Yh={...el.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},wg={...el.DefaultType,content:"(null|string|element|function)"};class Yc extends el{static get Default(){return Yh}static get DefaultType(){return wg}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[Xh]:this._getTitle(),[Im]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(B){return this.each(function(){const se=Yc.getOrCreateInstance(this,B);if(typeof B=="string"){if(se[B]===void 0)throw new TypeError(`No method named "${B}"`);se[B]()}})}}z(Yc);const xc=".bs.scrollspy",Am=`activate${xc}`,Tg=`click${xc}`,Sg=`load${xc}.data-api`,tl="active",Dd="[href]",Zh=".nav-link",Pm=`${Zh}, .nav-item > ${Zh}, .list-group-item`,Jh={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},Ld={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class Hl extends ct{constructor(B,se){super(B,se),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return Jh}static get DefaultType(){return Ld}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const B of this._observableSections.values())this._observer.observe(B)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(B){return B.target=p(B.target)||document.body,B.rootMargin=B.offset?`${B.offset}px 0px -30%`:B.rootMargin,typeof B.threshold=="string"&&(B.threshold=B.threshold.split(",").map(se=>Number.parseFloat(se))),B}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(Ee.off(this._config.target,Tg),Ee.on(this._config.target,Tg,Dd,B=>{const se=this._observableSections.get(B.target.hash);if(se){B.preventDefault();const Ae=this._rootElement||window,v=se.offsetTop-this._element.offsetTop;if(Ae.scrollTo)return void Ae.scrollTo({top:v,behavior:"smooth"});Ae.scrollTop=v}}))}_getNewObserver(){const B={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(se=>this._observerCallback(se),B)}_observerCallback(B){const se=m=>this._targetLinks.get(`#${m.target.id}`),Ae=m=>{this._previousScrollData.visibleEntryTop=m.target.offsetTop,this._process(se(m))},v=(this._rootElement||document.documentElement).scrollTop,u=v>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=v;for(const m of B){if(!m.isIntersecting){this._activeTarget=null,this._clearActiveClass(se(m));continue}const y=m.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(u&&y){if(Ae(m),!v)return}else u||y||Ae(m)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const B=Qe.find(Dd,this._config.target);for(const se of B){if(!se.hash||x(se))continue;const Ae=Qe.findOne(decodeURI(se.hash),this._element);_(Ae)&&(this._targetLinks.set(decodeURI(se.hash),se),this._observableSections.set(se.hash,Ae))}}_process(B){this._activeTarget!==B&&(this._clearActiveClass(this._config.target),this._activeTarget=B,B.classList.add(tl),this._activateParents(B),Ee.trigger(this._element,Am,{relatedTarget:B}))}_activateParents(B){if(B.classList.contains("dropdown-item"))Qe.findOne(".dropdown-toggle",B.closest(".dropdown")).classList.add(tl);else for(const se of Qe.parents(B,".nav, .list-group"))for(const Ae of Qe.prev(se,Pm))Ae.classList.add(tl)}_clearActiveClass(B){B.classList.remove(tl);const se=Qe.find(`${Dd}.${tl}`,B);for(const Ae of se)Ae.classList.remove(tl)}static jQueryInterface(B){return this.each(function(){const se=Hl.getOrCreateInstance(this,B);if(typeof B=="string"){if(se[B]===void 0||B.startsWith("_")||B==="constructor")throw new TypeError(`No method named "${B}"`);se[B]()}})}}Ee.on(window,Sg,()=>{for(const ve of Qe.find('[data-bs-spy="scroll"]'))Hl.getOrCreateInstance(ve)}),z(Hl);const Gl=".bs.tab",Eg=`hide${Gl}`,Mm=`hidden${Gl}`,Cg=`show${Gl}`,wc=`shown${Gl}`,kg=`click${Gl}`,Ig=`keydown${Gl}`,V_=`load${Gl}`,Ag="ArrowLeft",Qh="ArrowRight",Pg="ArrowUp",Dm="ArrowDown",As="Home",Mg="End",Tc="active",Dg="fade",Lm="show",ea=".dropdown-toggle",ef=`:not(${ea})`,Lg='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',ta=`.nav-link${ef}, .list-group-item${ef}, [role="tab"]${ef}, ${Lg}`,xl=`.${Tc}[data-bs-toggle="tab"], .${Tc}[data-bs-toggle="pill"], .${Tc}[data-bs-toggle="list"]`;class na extends ct{constructor(B){super(B),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),Ee.on(this._element,Ig,se=>this._keydown(se)))}static get NAME(){return"tab"}show(){const B=this._element;if(this._elemIsActive(B))return;const se=this._getActiveElem(),Ae=se?Ee.trigger(se,Eg,{relatedTarget:B}):null;Ee.trigger(B,Cg,{relatedTarget:se}).defaultPrevented||Ae&&Ae.defaultPrevented||(this._deactivate(se,B),this._activate(B,se))}_activate(B,se){B&&(B.classList.add(Tc),this._activate(Qe.getElementFromSelector(B)),this._queueCallback(()=>{B.getAttribute("role")==="tab"?(B.removeAttribute("tabindex"),B.setAttribute("aria-selected",!0),this._toggleDropDown(B,!0),Ee.trigger(B,wc,{relatedTarget:se})):B.classList.add(Lm)},B,B.classList.contains(Dg)))}_deactivate(B,se){B&&(B.classList.remove(Tc),B.blur(),this._deactivate(Qe.getElementFromSelector(B)),this._queueCallback(()=>{B.getAttribute("role")==="tab"?(B.setAttribute("aria-selected",!1),B.setAttribute("tabindex","-1"),this._toggleDropDown(B,!1),Ee.trigger(B,Mm,{relatedTarget:se})):B.classList.remove(Lm)},B,B.classList.contains(Dg)))}_keydown(B){if(![Ag,Qh,Pg,Dm,As,Mg].includes(B.key))return;B.stopPropagation(),B.preventDefault();const se=this._getChildren().filter(v=>!x(v));let Ae;if([As,Mg].includes(B.key))Ae=se[B.key===As?0:se.length-1];else{const v=[Qh,Dm].includes(B.key);Ae=J(se,B.target,v,!0)}Ae&&(Ae.focus({preventScroll:!0}),na.getOrCreateInstance(Ae).show())}_getChildren(){return Qe.find(ta,this._parent)}_getActiveElem(){return this._getChildren().find(B=>this._elemIsActive(B))||null}_setInitialAttributes(B,se){this._setAttributeIfNotExists(B,"role","tablist");for(const Ae of se)this._setInitialAttributesOnChild(Ae)}_setInitialAttributesOnChild(B){B=this._getInnerElement(B);const se=this._elemIsActive(B),Ae=this._getOuterElement(B);B.setAttribute("aria-selected",se),Ae!==B&&this._setAttributeIfNotExists(Ae,"role","presentation"),se||B.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(B,"role","tab"),this._setInitialAttributesOnTargetPanel(B)}_setInitialAttributesOnTargetPanel(B){const se=Qe.getElementFromSelector(B);se&&(this._setAttributeIfNotExists(se,"role","tabpanel"),B.id&&this._setAttributeIfNotExists(se,"aria-labelledby",`${B.id}`))}_toggleDropDown(B,se){const Ae=this._getOuterElement(B);if(!Ae.classList.contains("dropdown"))return;const v=(u,m)=>{const y=Qe.findOne(u,Ae);y&&y.classList.toggle(m,se)};v(ea,Tc),v(".dropdown-menu",Lm),Ae.setAttribute("aria-expanded",se)}_setAttributeIfNotExists(B,se,Ae){B.hasAttribute(se)||B.setAttribute(se,Ae)}_elemIsActive(B){return B.classList.contains(Tc)}_getInnerElement(B){return B.matches(ta)?B:Qe.findOne(ta,B)}_getOuterElement(B){return B.closest(".nav-item, .list-group-item")||B}static jQueryInterface(B){return this.each(function(){const se=na.getOrCreateInstance(this);if(typeof B=="string"){if(se[B]===void 0||B.startsWith("_")||B==="constructor")throw new TypeError(`No method named "${B}"`);se[B]()}})}}Ee.on(document,kg,Lg,function(ve){["A","AREA"].includes(this.tagName)&&ve.preventDefault(),x(this)||na.getOrCreateInstance(this).show()}),Ee.on(window,V_,()=>{for(const ve of Qe.find(xl))na.getOrCreateInstance(ve)}),z(na);const nl=".bs.toast",Sn=`mouseover${nl}`,Rm=`mouseout${nl}`,Om=`focusin${nl}`,Pu=`focusout${nl}`,Zc=`hide${nl}`,yn=`hidden${nl}`,Vm=`show${nl}`,B_=`shown${nl}`,Bm="hide",Mu="show",Rd="showing",Rg={animation:"boolean",autohide:"boolean",delay:"number"},F_={animation:!0,autohide:!0,delay:5e3};class Od extends ct{constructor(B,se){super(B,se),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return F_}static get DefaultType(){return Rg}static get NAME(){return"toast"}show(){Ee.trigger(this._element,Vm).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove(Bm),A(this._element),this._element.classList.add(Mu,Rd),this._queueCallback(()=>{this._element.classList.remove(Rd),Ee.trigger(this._element,B_),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&(Ee.trigger(this._element,Zc).defaultPrevented||(this._element.classList.add(Rd),this._queueCallback(()=>{this._element.classList.add(Bm),this._element.classList.remove(Rd,Mu),Ee.trigger(this._element,yn)},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Mu),super.dispose()}isShown(){return this._element.classList.contains(Mu)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(B,se){switch(B.type){case"mouseover":case"mouseout":this._hasMouseInteraction=se;break;case"focusin":case"focusout":this._hasKeyboardInteraction=se}if(se)return void this._clearTimeout();const Ae=B.relatedTarget;this._element===Ae||this._element.contains(Ae)||this._maybeScheduleHide()}_setListeners(){Ee.on(this._element,Sn,B=>this._onInteraction(B,!0)),Ee.on(this._element,Rm,B=>this._onInteraction(B,!1)),Ee.on(this._element,Om,B=>this._onInteraction(B,!0)),Ee.on(this._element,Pu,B=>this._onInteraction(B,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(B){return this.each(function(){const se=Od.getOrCreateInstance(this,B);if(typeof B=="string"){if(se[B]===void 0)throw new TypeError(`No method named "${B}"`);se[B](this)}})}}return kt(Od),z(Od),{Alert:fe,Button:je,Carousel:nn,Collapse:Or,Dropdown:Jo,Modal:Kc,Offcanvas:bl,Popover:Yc,ScrollSpy:Hl,Tab:na,Toast:Od,Tooltip:el}})})(L1)),L1.exports}yge();const bge=lt({...Tn(),...hr(XN(),["fullHeight"]),...Mi()},"VApp"),xge=Mt()({name:"VApp",props:bge(),setup(e,t){let{slots:n}=t;const i=Qi(e),{layoutClasses:r,getLayoutItem:a,items:l,layoutRef:h}=ZN({...e,fullHeight:!0}),{rtlClasses:s}=qs();return zt(()=>V("div",{ref:h,class:_t(["v-application",i.themeClasses.value,r.value,s.value,e.class]),style:Xt([e.style])},[V("div",{class:"v-application__wrap"},[n.default?.()])])),{getLayoutItem:a,items:l,theme:i}}}),I9=lt({text:String,...Tn(),...ti()},"VToolbarTitle"),rM=Mt()({name:"VToolbarTitle",props:I9(),setup(e,t){let{slots:n}=t;return zt(()=>{const i=!!(n.default||n.text||e.text);return ce(e.tag,{class:_t(["v-toolbar-title",e.class]),style:Xt(e.style)},{default:()=>[i&&V("div",{class:"v-toolbar-title__placeholder"},[n.text?n.text():e.text,n.default?.()])]})}),{}}}),wge=[null,"prominent","default","comfortable","compact"],A9=lt({absolute:Boolean,collapse:Boolean,color:String,density:{type:String,default:"default",validator:e=>wge.includes(e)},extended:{type:Boolean,default:null},extensionHeight:{type:[Number,String],default:48},flat:Boolean,floating:Boolean,height:{type:[Number,String],default:64},image:String,title:String,...cl(),...Tn(),...Ks(),...Wr(),...ti({tag:"header"}),...Mi()},"VToolbar"),cI=Mt()({name:"VToolbar",props:A9(),setup(e,t){let{slots:n}=t;const{backgroundColorClasses:i,backgroundColorStyles:r}=ir(()=>e.color),{borderClasses:a}=Fl(e),{elevationClasses:l}=wo(e),{roundedClasses:h}=ns(e),{themeClasses:s}=Qi(e),{rtlClasses:p}=qs(),_=tn(e.extended===null?!!n.extension?.():e.extended),x=me(()=>parseInt(Number(e.height)+(e.density==="prominent"?Number(e.height):0)-(e.density==="comfortable"?8:0)-(e.density==="compact"?16:0),10)),T=me(()=>_.value?parseInt(Number(e.extensionHeight)+(e.density==="prominent"?Number(e.extensionHeight):0)-(e.density==="comfortable"?4:0)-(e.density==="compact"?8:0),10):0);return ts({VBtn:{variant:"text"}}),zt(()=>{const k=!!(e.title||n.title),A=!!(n.image||e.image),M=n.extension?.();return _.value=e.extended===null?!!M:e.extended,ce(e.tag,{class:_t(["v-toolbar",{"v-toolbar--absolute":e.absolute,"v-toolbar--collapse":e.collapse,"v-toolbar--flat":e.flat,"v-toolbar--floating":e.floating,[`v-toolbar--density-${e.density}`]:!0},i.value,a.value,l.value,h.value,s.value,p.value,e.class]),style:Xt([r.value,e.style])},{default:()=>[A&&V("div",{key:"image",class:"v-toolbar__image"},[n.image?ce(ui,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},n.image):ce(xh,{key:"image-img",cover:!0,src:e.image},null)]),ce(ui,{defaults:{VTabs:{height:pn(x.value)}}},{default:()=>[V("div",{class:"v-toolbar__content",style:{height:pn(x.value)}},[n.prepend&&V("div",{class:"v-toolbar__prepend"},[n.prepend?.()]),k&&ce(rM,{key:"title",text:e.title},{text:n.title}),n.default?.(),n.append&&V("div",{class:"v-toolbar__append"},[n.append?.()])])]}),ce(ui,{defaults:{VTabs:{height:pn(T.value)}}},{default:()=>[ce(NT,null,{default:()=>[_.value&&V("div",{class:"v-toolbar__extension",style:{height:pn(T.value)}},[M])]})]})]})}),{contentHeight:x,extensionHeight:T}}}),Tge=lt({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function Sge(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:n}=t;let i=0,r=0;const a=tt(null),l=tn(0),h=tn(0),s=tn(0),p=tn(!1),_=tn(!1),x=me(()=>Number(e.scrollThreshold)),T=me(()=>Cr((x.value-l.value)/x.value||0)),k=()=>{const A=a.value;if(!A||n&&!n.value)return;i=l.value,l.value="window"in A?A.pageYOffset:A.scrollTop;const M=A instanceof Window?document.documentElement.scrollHeight:A.scrollHeight;if(r!==M){r=M;return}_.value=l.value<i,s.value=Math.abs(l.value-x.value)};return Yt(_,()=>{h.value=h.value||l.value}),Yt(p,()=>{h.value=0}),Mr(()=>{Yt(()=>e.scrollTarget,A=>{const M=A?document.querySelector(A):window;M&&M!==a.value&&(a.value?.removeEventListener("scroll",k),a.value=M,a.value.addEventListener("scroll",k,{passive:!0}))},{immediate:!0})}),Ur(()=>{a.value?.removeEventListener("scroll",k)}),n&&Yt(n,k,{immediate:!0}),{scrollThreshold:x,currentScroll:l,currentThreshold:s,isScrollActive:p,scrollRatio:T,isScrollingUp:_,savedScroll:h}}const Ege=lt({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...A9(),...sg(),...Tge(),height:{type:[Number,String],default:64}},"VAppBar"),Cge=Mt()({name:"VAppBar",props:Ege(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const i=tt(),r=Pn(e,"modelValue"),a=me(()=>{const z=new Set(e.scrollBehavior?.split(" ")??[]);return{hide:z.has("hide"),fullyHide:z.has("fully-hide"),inverted:z.has("inverted"),collapse:z.has("collapse"),elevate:z.has("elevate"),fadeImage:z.has("fade-image")}}),l=me(()=>{const z=a.value;return z.hide||z.fullyHide||z.inverted||z.collapse||z.elevate||z.fadeImage||!r.value}),{currentScroll:h,scrollThreshold:s,isScrollingUp:p,scrollRatio:_}=Sge(e,{canScroll:l}),x=$e(()=>a.value.hide||a.value.fullyHide),T=me(()=>e.collapse||a.value.collapse&&(a.value.inverted?_.value>0:_.value===0)),k=me(()=>e.flat||a.value.fullyHide&&!r.value||a.value.elevate&&(a.value.inverted?h.value>0:h.value===0)),A=me(()=>a.value.fadeImage?a.value.inverted?1-_.value:_.value:void 0),M=me(()=>{if(a.value.hide&&a.value.inverted)return 0;const z=i.value?.contentHeight??0,G=i.value?.extensionHeight??0;return x.value?h.value<s.value||a.value.fullyHide?z+G:z:z+G});ca(()=>!!e.scrollBehavior,()=>{jr(()=>{x.value?a.value.inverted?r.value=h.value>s.value:r.value=p.value||h.value<s.value:r.value=!0})});const{ssrBootStyles:R}=dg(),{layoutItemStyles:F}=og({id:e.name,order:me(()=>parseInt(e.order,10)),position:$e(()=>e.location),layoutSize:M,elementSize:tn(void 0),active:r,absolute:$e(()=>e.absolute)});return zt(()=>{const z=cI.filterProps(e);return ce(cI,At({ref:i,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{...F.value,"--v-toolbar-image-opacity":A.value,height:void 0,...R.value},e.style]},z,{collapse:T.value,flat:k.value}),n)}),{}}}),kge=lt({...hr(BT({icon:"$menu",variant:"text"}),["spaced"])},"VAppBarNavIcon"),Ige=Mt()({name:"VAppBarNavIcon",props:kge(),setup(e,t){let{slots:n}=t;return zt(()=>ce(mi,At(e,{class:["v-app-bar-nav-icon"]}),n)),{}}}),Age=Mt()({name:"VAppBarTitle",props:I9(),setup(e,t){let{slots:n}=t;return zt(()=>ce(rM,At(e,{class:"v-app-bar-title"}),n)),{}}}),Pge=lt({bordered:Boolean,color:String,content:[Number,String],dot:Boolean,floating:Boolean,icon:In,inline:Boolean,label:{type:String,default:"$vuetify.badge"},max:[Number,String],modelValue:{type:Boolean,default:!0},offsetX:[Number,String],offsetY:[Number,String],textColor:String,...Tn(),...Ah({location:"top end"}),...Wr(),...ti(),...Mi(),...Ph({transition:"scale-rotate-transition"}),...Bs()},"VBadge"),Mge=Mt()({name:"VBadge",inheritAttrs:!1,props:Pge(),setup(e,t){const{backgroundColorClasses:n,backgroundColorStyles:i}=ir(()=>e.color),{roundedClasses:r}=ns(e),{t:a}=fr(),{textColorClasses:l,textColorStyles:h}=Uo(()=>e.textColor),{themeClasses:s}=OT(),{locationStyles:p}=ug(e,!0,x=>(e.floating?e.dot?2:4:e.dot?8:12)+(["top","bottom"].includes(x)?Number(e.offsetY??0):["left","right"].includes(x)?Number(e.offsetX??0):0)),{dimensionStyles:_}=Fs(e);return zt(()=>{const x=Number(e.content),T=!e.max||isNaN(x)?e.content:x<=Number(e.max)?x:`${e.max}+`,[k,A]=Mk(t.attrs,["aria-atomic","aria-label","aria-live","role","title"]);return ce(e.tag,At({class:["v-badge",{"v-badge--bordered":e.bordered,"v-badge--dot":e.dot,"v-badge--floating":e.floating,"v-badge--inline":e.inline},e.class]},A,{style:e.style}),{default:()=>[V("div",{class:"v-badge__wrapper"},[t.slots.default?.(),ce(Na,{transition:e.transition},{default:()=>[Li(V("span",At({class:["v-badge__badge",s.value,n.value,r.value,l.value],style:[i.value,h.value,_.value,e.inline?{}:p.value],"aria-atomic":"true","aria-label":a(e.label,x),"aria-live":"polite",role:"status"},k),[e.dot?void 0:t.slots.badge?t.slots.badge?.():e.icon?ce(Pi,{icon:e.icon},null):T]),[[_u,e.modelValue]])]})])]})}),{}}}),Dge=lt({color:String,density:String,...Tn()},"VBannerActions"),P9=Mt()({name:"VBannerActions",props:Dge(),setup(e,t){let{slots:n}=t;return ts({VBtn:{color:e.color,density:e.density,slim:!0,variant:"text"}}),zt(()=>V("div",{class:_t(["v-banner-actions",e.class]),style:Xt(e.style)},[n.default?.()])),{}}}),M9=Ih("v-banner-text"),Lge=lt({avatar:String,bgColor:String,color:String,icon:In,lines:String,stacked:Boolean,sticky:Boolean,text:String,...cl(),...Tn(),...Ts(),...Bs(),...rg({mobile:null}),...Ks(),...Ah(),...T_(),...Wr(),...ti(),...Mi()},"VBanner"),Rge=Mt()({name:"VBanner",props:Lge(),setup(e,t){let{slots:n}=t;const{backgroundColorClasses:i,backgroundColorStyles:r}=ir(()=>e.bgColor),{borderClasses:a}=Fl(e),{densityClasses:l}=qa(e),{displayClasses:h,mobile:s}=Bl(e),{dimensionStyles:p}=Fs(e),{elevationClasses:_}=wo(e),{locationStyles:x}=ug(e),{positionClasses:T}=S_(e),{roundedClasses:k}=ns(e),{themeClasses:A}=Qi(e),M=$e(()=>e.color),R=$e(()=>e.density);ts({VBannerActions:{color:M,density:R}}),zt(()=>{const F=!!(e.text||n.text),z=!!(e.avatar||e.icon),G=!!(z||n.prepend);return ce(e.tag,{class:_t(["v-banner",{"v-banner--stacked":e.stacked||s.value,"v-banner--sticky":e.sticky,[`v-banner--${e.lines}-line`]:!!e.lines},A.value,i.value,a.value,l.value,h.value,_.value,T.value,k.value,e.class]),style:Xt([r.value,p.value,x.value,e.style]),role:"banner"},{default:()=>[G&&V("div",{key:"prepend",class:"v-banner__prepend"},[n.prepend?ce(ui,{key:"prepend-defaults",disabled:!z,defaults:{VAvatar:{color:M.value,density:R.value,icon:e.icon,image:e.avatar}}},n.prepend):ce(uc,{key:"prepend-avatar",color:M.value,density:R.value,icon:e.icon,image:e.avatar},null)]),V("div",{class:"v-banner__content"},[F&&ce(M9,{key:"text"},{default:()=>[n.text?.()??e.text]}),n.default?.()]),n.actions&&ce(P9,{key:"actions"},n.actions)]})})}}),Oge=lt({baseColor:String,bgColor:String,color:String,grow:Boolean,mode:{type:String,validator:e=>!e||["horizontal","shift"].includes(e)},height:{type:[Number,String],default:56},active:{type:Boolean,default:!0},...cl(),...Tn(),...Ts(),...Ks(),...Wr(),...sg({name:"bottom-navigation"}),...ti({tag:"header"}),...lg({selectedClass:"v-btn--selected"}),...Mi()},"VBottomNavigation"),Vge=Mt()({name:"VBottomNavigation",props:Oge(),emits:{"update:active":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{themeClasses:i}=OT(),{borderClasses:r}=Fl(e),{backgroundColorClasses:a,backgroundColorStyles:l}=ir(()=>e.bgColor),{densityClasses:h}=qa(e),{elevationClasses:s}=wo(e),{roundedClasses:p}=ns(e),{ssrBootStyles:_}=dg(),x=me(()=>Number(e.height)-(e.density==="comfortable"?8:0)-(e.density==="compact"?16:0)),T=Pn(e,"active",e.active),{layoutItemStyles:k}=og({id:e.name,order:me(()=>parseInt(e.order,10)),position:$e(()=>"bottom"),layoutSize:$e(()=>T.value?x.value:0),elementSize:x,active:T,absolute:$e(()=>e.absolute)});return fm(e,_P),ts({VBtn:{baseColor:$e(()=>e.baseColor),color:$e(()=>e.color),density:$e(()=>e.density),stacked:$e(()=>e.mode!=="horizontal"),variant:"text"}},{scoped:!0}),zt(()=>ce(e.tag,{class:_t(["v-bottom-navigation",{"v-bottom-navigation--active":T.value,"v-bottom-navigation--grow":e.grow,"v-bottom-navigation--shift":e.mode==="shift"},i.value,a.value,r.value,h.value,s.value,p.value,e.class]),style:Xt([l.value,k.value,{height:pn(x.value)},_.value,e.style])},{default:()=>[n.default&&V("div",{class:"v-bottom-navigation__content"},[n.default()])]})),{}}}),D9=lt({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...Nb({origin:"center center",scrollStrategy:"block",transition:{component:zT},zIndex:2400})},"VDialog"),uI=Mt()({name:"VDialog",props:D9(),emits:{"update:modelValue":e=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(e,t){let{emit:n,slots:i}=t;const r=Pn(e,"modelValue"),{scopeId:a}=hg(),l=tt();async function h(x){const T=x.relatedTarget,k=x.target;await Hn(),r.value&&T!==k&&l.value?.contentEl&&l.value?.globalTop&&![document,l.value.contentEl].includes(k)&&!l.value.contentEl.contains(k)&&t_(l.value.contentEl)[0]?.focus()}function s(x){if(x.key!=="Tab"||!l.value?.contentEl)return;const T=t_(l.value.contentEl);if(!T.length)return;const k=T[0],A=T[T.length-1],M=document.activeElement;x.shiftKey&&M===k?(x.preventDefault(),A.focus()):!x.shiftKey&&M===A&&(x.preventDefault(),k.focus())}Ur(()=>{document.removeEventListener("focusin",h),document.removeEventListener("keydown",s)}),Xi&&Yt(()=>r.value&&e.retainFocus,x=>{x?(document.addEventListener("focusin",h,{once:!0}),document.addEventListener("keydown",s)):(document.removeEventListener("focusin",h),document.removeEventListener("keydown",s))},{immediate:!0});function p(){n("afterEnter"),(e.scrim||e.retainFocus)&&l.value?.contentEl&&!l.value.contentEl.contains(document.activeElement)&&l.value.contentEl.focus({preventScroll:!0})}function _(){n("afterLeave")}return Yt(r,async x=>{x||(await Hn(),l.value.activatorEl?.focus({preventScroll:!0}))}),zt(()=>{const x=dd.filterProps(e),T=At({"aria-haspopup":"dialog"},e.activatorProps),k=At({tabindex:-1},e.contentProps);return ce(dd,At({ref:l,class:["v-dialog",{"v-dialog--fullscreen":e.fullscreen,"v-dialog--scrollable":e.scrollable},e.class],style:e.style},x,{modelValue:r.value,"onUpdate:modelValue":A=>r.value=A,"aria-modal":"true",activatorProps:T,contentProps:k,height:e.fullscreen?void 0:e.height,width:e.fullscreen?void 0:e.width,maxHeight:e.fullscreen?void 0:e.maxHeight,maxWidth:e.fullscreen?void 0:e.maxWidth,role:"dialog",onAfterEnter:p,onAfterLeave:_},a),{activator:i.activator,default:function(){for(var A=arguments.length,M=new Array(A),R=0;R<A;R++)M[R]=arguments[R];return ce(ui,{root:"VDialog"},{default:()=>[i.default?.(...M)]})}})}),To({},l)}}),Bge=lt({inset:Boolean,...D9({transition:"bottom-sheet-transition"})},"VBottomSheet"),Fge=Mt()({name:"VBottomSheet",props:Bge(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const i=Pn(e,"modelValue");return zt(()=>{const r=uI.filterProps(e);return ce(uI,At(r,{contentClass:["v-bottom-sheet__content",e.contentClass],modelValue:i.value,"onUpdate:modelValue":a=>i.value=a,class:["v-bottom-sheet",{"v-bottom-sheet--inset":e.inset},e.class],style:e.style}),n)}),{}}}),zge=lt({divider:[Number,String],...Tn()},"VBreadcrumbsDivider"),L9=Mt()({name:"VBreadcrumbsDivider",props:zge(),setup(e,t){let{slots:n}=t;return zt(()=>V("li",{"aria-hidden":"true",class:_t(["v-breadcrumbs-divider",e.class]),style:Xt(e.style)},[n?.default?.()??e.divider])),{}}}),Nge=lt({active:Boolean,activeClass:String,activeColor:String,color:String,disabled:Boolean,title:String,...Tn(),...Fb(),...ti({tag:"li"})},"VBreadcrumbsItem"),R9=Mt()({name:"VBreadcrumbsItem",props:Nge(),setup(e,t){let{slots:n,attrs:i}=t;const r=Bb(e,i),a=me(()=>e.active||r.isActive?.value),{textColorClasses:l,textColorStyles:h}=Uo(()=>a.value?e.activeColor:e.color);return zt(()=>ce(e.tag,{class:_t(["v-breadcrumbs-item",{"v-breadcrumbs-item--active":a.value,"v-breadcrumbs-item--disabled":e.disabled,[`${e.activeClass}`]:a.value&&e.activeClass},l.value,e.class]),style:Xt([h.value,e.style]),"aria-current":a.value?"page":void 0},{default:()=>[r.isLink.value?V("a",At({class:"v-breadcrumbs-item--link",onClick:r.navigate},r.linkProps),[n.default?.()??e.title]):n.default?.()??e.title]})),{}}}),$ge=lt({activeClass:String,activeColor:String,bgColor:String,color:String,disabled:Boolean,divider:{type:String,default:"/"},icon:In,items:{type:Array,default:()=>[]},...Tn(),...Ts(),...Wr(),...ti({tag:"ul"})},"VBreadcrumbs"),Uge=Mt()({name:"VBreadcrumbs",props:$ge(),setup(e,t){let{slots:n}=t;const{backgroundColorClasses:i,backgroundColorStyles:r}=ir(()=>e.bgColor),{densityClasses:a}=qa(e),{roundedClasses:l}=ns(e);ts({VBreadcrumbsDivider:{divider:$e(()=>e.divider)},VBreadcrumbsItem:{activeClass:$e(()=>e.activeClass),activeColor:$e(()=>e.activeColor),color:$e(()=>e.color),disabled:$e(()=>e.disabled)}});const h=me(()=>e.items.map(s=>typeof s=="string"?{item:{title:s},raw:s}:{item:s,raw:s}));return zt(()=>{const s=!!(n.prepend||e.icon);return ce(e.tag,{class:_t(["v-breadcrumbs",i.value,a.value,l.value,e.class]),style:Xt([r.value,e.style])},{default:()=>[s&&V("li",{key:"prepend",class:"v-breadcrumbs__prepend"},[n.prepend?ce(ui,{key:"prepend-defaults",disabled:!e.icon,defaults:{VIcon:{icon:e.icon,start:!0}}},n.prepend):ce(Pi,{key:"prepend-icon",start:!0,icon:e.icon},null)]),h.value.map((p,_,x)=>{let{item:T,raw:k}=p;return V(an,null,[n.item?.({item:T,index:_})??ce(R9,At({key:_,disabled:_>=x.length-1},typeof T=="string"?{title:T}:T),{default:n.title?()=>n.title?.({item:T,index:_}):void 0}),_<x.length-1&&ce(L9,null,{default:n.divider?()=>n.divider?.({item:k,index:_}):void 0})])}),n.default?.()]})}),{}}}),jge=e=>{const{touchstartX:t,touchendX:n,touchstartY:i,touchendY:r}=e,a=.5,l=16;e.offsetX=n-t,e.offsetY=r-i,Math.abs(e.offsetY)<a*Math.abs(e.offsetX)&&(e.left&&n<t-l&&e.left(e),e.right&&n>t+l&&e.right(e)),Math.abs(e.offsetX)<a*Math.abs(e.offsetY)&&(e.up&&r<i-l&&e.up(e),e.down&&r>i+l&&e.down(e))};function Wge(e,t){const n=e.changedTouches[0];t.touchstartX=n.clientX,t.touchstartY=n.clientY,t.start?.({originalEvent:e,...t})}function Hge(e,t){const n=e.changedTouches[0];t.touchendX=n.clientX,t.touchendY=n.clientY,t.end?.({originalEvent:e,...t}),jge(t)}function Gge(e,t){const n=e.changedTouches[0];t.touchmoveX=n.clientX,t.touchmoveY=n.clientY,t.move?.({originalEvent:e,...t})}function qge(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:e.left,right:e.right,up:e.up,down:e.down,start:e.start,move:e.move,end:e.end};return{touchstart:n=>Wge(n,t),touchend:n=>Hge(n,t),touchmove:n=>Gge(n,t)}}function Kge(e,t){const n=t.value,i=n?.parent?e.parentElement:e,r=n?.options??{passive:!0},a=t.instance?.$.uid;if(!i||a===void 0)return;const l=qge(t.value);i._touchHandlers=i._touchHandlers??Object.create(null),i._touchHandlers[a]=l,vN(l).forEach(h=>{i.addEventListener(h,l[h],r)})}function Xge(e,t){const n=t.value?.parent?e.parentElement:e,i=t.instance?.$.uid;if(!n?._touchHandlers||i===void 0)return;const r=n._touchHandlers[i];vN(r).forEach(a=>{n.removeEventListener(a,r[a])}),delete n._touchHandlers[i]}const Ww={mounted:Kge,unmounted:Xge},O9=Symbol.for("vuetify:v-window"),V9=Symbol.for("vuetify:v-window-group"),ZT=lt({continuous:Boolean,nextIcon:{type:[Boolean,String,Function,Object],default:"$next"},prevIcon:{type:[Boolean,String,Function,Object],default:"$prev"},reverse:Boolean,showArrows:{type:[Boolean,String],validator:e=>typeof e=="boolean"||e==="hover"},verticalArrows:[Boolean,String],touch:{type:[Object,Boolean],default:void 0},direction:{type:String,default:"horizontal"},modelValue:null,disabled:Boolean,selectedClass:{type:String,default:"v-window-item--active"},mandatory:{type:[Boolean,String],default:"force"},crossfade:Boolean,transitionDuration:Number,...Tn(),...ti(),...Mi()},"VWindow"),Kp=Mt()({name:"VWindow",directives:{vTouch:Ww},props:ZT(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{themeClasses:i}=Qi(e),{isRtl:r}=qs(),{t:a}=fr(),l=fm(e,V9),h=tt(),s=me(()=>r.value?!e.reverse:e.reverse),p=tn(!1),_=me(()=>{if(e.crossfade)return"v-window-crossfade-transition";const Y=e.direction==="vertical"?"y":"x",re=(s.value?!p.value:p.value)?"-reverse":"";return`v-window-${Y}${re}-transition`}),x=tn(0),T=tt(void 0),k=me(()=>l.items.value.findIndex(Y=>l.selected.value.includes(Y.id)));Yt(k,(Y,J)=>{let re;const X={left:0,top:0};Xi&&J>=0&&(re=DT(h.value),X.left=re?.scrollLeft,X.top=re?.scrollTop);const U=l.items.value.length,H=U-1;U<=2?p.value=Y<J:Y===H&&J===0?p.value=!0:Y===0&&J===H?p.value=!1:p.value=Y<J,Hn(()=>{if(!Xi||!re)return;re.scrollTop!==X.top&&re.scrollTo({...X,behavior:"instant"}),requestAnimationFrame(()=>{if(!re)return;re.scrollTop!==X.top&&re.scrollTo({...X,behavior:"instant"})})})},{flush:"sync"}),Rr(O9,{transition:_,isReversed:p,transitionCount:x,transitionHeight:T,rootRef:h});const A=$e(()=>e.continuous||k.value!==0),M=$e(()=>e.continuous||k.value!==l.items.value.length-1);function R(){A.value&&l.prev()}function F(){M.value&&l.next()}const z=me(()=>{const Y=[],J={icon:r.value?e.nextIcon:e.prevIcon,class:`v-window__${s.value?"right":"left"}`,onClick:l.prev,"aria-label":a("$vuetify.carousel.prev")};Y.push(A.value?n.prev?n.prev({props:J}):ce(mi,J,null):V("div",null,null));const re={icon:r.value?e.prevIcon:e.nextIcon,class:`v-window__${s.value?"left":"right"}`,onClick:l.next,"aria-label":a("$vuetify.carousel.next")};return Y.push(M.value?n.next?n.next({props:re}):ce(mi,re,null):V("div",null,null)),Y}),G=me(()=>e.touch===!1?e.touch:{...{left:()=>{s.value?R():F()},right:()=>{s.value?F():R()},start:J=>{let{originalEvent:re}=J;re.stopPropagation()}},...e.touch===!0?{}:e.touch});return zt(()=>Li(ce(e.tag,{ref:h,class:_t(["v-window",{"v-window--show-arrows-on-hover":e.showArrows==="hover","v-window--vertical-arrows":!!e.verticalArrows,"v-window--crossfade":!!e.crossfade},i.value,e.class]),style:Xt([e.style,e.transitionDuration&&!ld?{"--v-window-transition-duration":pn(e.transitionDuration,"ms")}:void 0])},{default:()=>[V("div",{class:"v-window__container",style:{height:T.value}},[n.default?.({group:l}),e.showArrows!==!1&&V("div",{class:_t(["v-window__controls",{"v-window__controls--left":e.verticalArrows==="left"||e.verticalArrows===!0},{"v-window__controls--right":e.verticalArrows==="right"}])},[z.value])]),n.additional?.({group:l})]}),[[Ww,G.value]])),{group:l}}}),Yge=lt({color:String,cycle:Boolean,delimiterIcon:{type:In,default:"$delimiter"},height:{type:[Number,String],default:500},hideDelimiters:Boolean,hideDelimiterBackground:Boolean,interval:{type:[Number,String],default:6e3,validator:e=>Number(e)>0},progress:[Boolean,String],verticalDelimiters:[Boolean,String],...ZT({continuous:!0,mandatory:"force",showArrows:!0})},"VCarousel"),Zge=Mt()({name:"VCarousel",props:Yge(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const i=Pn(e,"modelValue"),{t:r}=fr(),a=tt();let l=-1;Yt(i,s),Yt(()=>e.interval,s),Yt(()=>e.cycle,p=>{p?s():window.clearTimeout(l)}),Mr(h);function h(){!e.cycle||!a.value||(l=window.setTimeout(a.value.group.next,Number(e.interval)>0?Number(e.interval):6e3))}function s(){window.clearTimeout(l),window.requestAnimationFrame(h)}return zt(()=>{const p=Kp.filterProps(e);return ce(Kp,At({ref:a},p,{modelValue:i.value,"onUpdate:modelValue":_=>i.value=_,class:["v-carousel",{"v-carousel--hide-delimiter-background":e.hideDelimiterBackground,"v-carousel--vertical-delimiters":e.verticalDelimiters},e.class],style:[{height:pn(e.height)},e.style]}),{default:n.default,additional:_=>{let{group:x}=_;return V(an,null,[!e.hideDelimiters&&V("div",{class:"v-carousel__controls",style:{left:e.verticalDelimiters==="left"&&e.verticalDelimiters?0:"auto",right:e.verticalDelimiters==="right"?0:"auto"}},[x.items.value.length>0&&ce(ui,{defaults:{VBtn:{color:e.color,icon:e.delimiterIcon,size:"x-small",variant:"text"}},scoped:!0},{default:()=>[x.items.value.map((T,k)=>{const A={id:`carousel-item-${T.id}`,"aria-label":r("$vuetify.carousel.ariaLabel.delimiter",k+1,x.items.value.length),class:["v-carousel__controls__item",x.isSelected(T.id)&&"v-btn--active"],onClick:()=>x.select(T.id,!0)};return n.item?n.item({props:A,item:T}):ce(mi,At(T,A),null)})]})]),e.progress&&ce(Rb,{absolute:!0,class:"v-carousel__progress",color:typeof e.progress=="string"?e.progress:void 0,modelValue:(x.getItemIndex(i.value)+1)/x.items.value.length*100},null)])},prev:n.prev,next:n.next})}),{}}}),JT=lt({reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},...Tn(),...cg(),...MP()},"VWindowItem"),Xp=Mt()({name:"VWindowItem",directives:{vTouch:Ww},props:JT(),emits:{"group:selected":e=>!0},setup(e,t){let{slots:n}=t;const i=Si(O9),r=nm(e,V9),{isBooted:a}=dg();if(!i||!r)throw new Error("[Vuetify] VWindowItem must be used inside VWindow");const l=tn(!1),h=me(()=>a.value&&(i.isReversed.value?e.reverseTransition!==!1:e.transition!==!1));function s(){!l.value||!i||(l.value=!1,i.transitionCount.value>0&&(i.transitionCount.value-=1,i.transitionCount.value===0&&(i.transitionHeight.value=void 0)))}function p(){l.value||!i||(l.value=!0,i.transitionCount.value===0&&(i.transitionHeight.value=pn(i.rootRef.value?.clientHeight)),i.transitionCount.value+=1)}function _(){s()}function x(A){l.value&&Hn(()=>{!h.value||!l.value||!i||(i.transitionHeight.value=pn(A.clientHeight))})}const T=me(()=>{const A=i.isReversed.value?e.reverseTransition:e.transition;return h.value?{name:typeof A!="string"?i.transition.value:A,onBeforeEnter:p,onAfterEnter:s,onEnterCancelled:_,onBeforeLeave:p,onAfterLeave:s,onLeaveCancelled:_,onEnter:x}:!1}),{hasContent:k}=DP(e,r.isSelected);return zt(()=>ce(Na,{transition:T.value,disabled:!a.value},{default:()=>[Li(V("div",{class:_t(["v-window-item",r.selectedClass.value,e.class]),style:Xt(e.style)},[k.value&&n.default?.()]),[[_u,r.isSelected.value]])]})),{groupItem:r}}}),Jge=lt({...p2(),...JT()},"VCarouselItem"),Qge=Mt()({name:"VCarouselItem",inheritAttrs:!1,props:Jge(),setup(e,t){let{slots:n,attrs:i}=t;zt(()=>{const r=xh.filterProps(e),a=Xp.filterProps(e);return ce(Xp,At({class:["v-carousel-item",e.class]},a),{default:()=>[ce(xh,At(i,r),n)]})})}}),eve=Ih("v-code","code"),tve=lt({color:{type:Object},disabled:Boolean,dotSize:{type:[Number,String],default:10},height:{type:[Number,String],default:150},width:{type:[Number,String],default:300},...Tn()},"VColorPickerCanvas"),nve=dc({name:"VColorPickerCanvas",props:tve(),emits:{"update:color":e=>!0,"update:position":e=>!0},setup(e,t){let{emit:n}=t;const i=tn(!1),r=tt(),a=tn(parseFloat(e.width)),l=tn(parseFloat(e.height)),h=tt({x:0,y:0}),s=me({get:()=>h.value,set(R){if(!r.value)return;const{x:F,y:z}=R;h.value=R,n("update:color",{h:e.color?.h??0,s:Cr(F,0,a.value)/a.value,v:1-Cr(z,0,l.value)/l.value,a:e.color?.a??1})}}),p=me(()=>{const{x:R,y:F}=s.value,z=parseInt(e.dotSize,10)/2;return{width:pn(e.dotSize),height:pn(e.dotSize),transform:`translate(${pn(R-z)}, ${pn(F-z)})`}}),{resizeRef:_}=zc(R=>{if(!_.el?.offsetParent)return;const{width:F,height:z}=R[0].contentRect;a.value=F,l.value=z});function x(R,F,z){const{left:G,top:Y,width:J,height:re}=z;s.value={x:Cr(R-G,0,J),y:Cr(F-Y,0,re)}}function T(R){R.type==="mousedown"&&R.preventDefault(),!e.disabled&&(k(R),window.addEventListener("mousemove",k),window.addEventListener("mouseup",A),window.addEventListener("touchmove",k),window.addEventListener("touchend",A))}function k(R){if(e.disabled||!r.value)return;i.value=!0;const F=fne(R);x(F.clientX,F.clientY,r.value.getBoundingClientRect())}function A(){window.removeEventListener("mousemove",k),window.removeEventListener("mouseup",A),window.removeEventListener("touchmove",k),window.removeEventListener("touchend",A)}function M(){if(!r.value)return;const R=r.value,F=R.getContext("2d");if(!F)return;const z=F.createLinearGradient(0,0,R.width,0);z.addColorStop(0,"hsla(0, 0%, 100%, 1)"),z.addColorStop(1,`hsla(${e.color?.h??0}, 100%, 50%, 1)`),F.fillStyle=z,F.fillRect(0,0,R.width,R.height);const G=F.createLinearGradient(0,0,0,R.height);G.addColorStop(0,"hsla(0, 0%, 0%, 0)"),G.addColorStop(1,"hsla(0, 0%, 0%, 1)"),F.fillStyle=G,F.fillRect(0,0,R.width,R.height)}return Yt(()=>e.color?.h,M,{immediate:!0}),Yt(()=>[a.value,l.value],(R,F)=>{M(),h.value={x:s.value.x*R[0]/F[0],y:s.value.y*R[1]/F[1]}},{flush:"post"}),Yt(()=>e.color,()=>{if(i.value){i.value=!1;return}h.value=e.color?{x:e.color.s*a.value,y:(1-e.color.v)*l.value}:{x:0,y:0}},{deep:!0,immediate:!0}),Mr(()=>M()),zt(()=>V("div",{ref:_,class:_t(["v-color-picker-canvas",e.class]),style:Xt(e.style),onMousedown:T,onTouchstartPassive:T},[V("canvas",{ref:r,width:a.value,height:l.value},null),e.color&&V("div",{class:_t(["v-color-picker-canvas__dot",{"v-color-picker-canvas__dot--disabled":e.disabled}]),style:Xt(p.value)},null)])),{}}});function ive(e,t){if(t){const{a:n,...i}=e;return i}return e}function rve(e,t){if(t==null||typeof t=="string"){const n=e.a!==1;if(t?.startsWith("rgb(")){const{r,g:a,b:l,a:h}=cd(e);return`rgb(${r} ${a} ${l}`+(n?` / ${h})`:")")}else if(t?.startsWith("hsl(")){const{h:r,s:a,l,a:h}=Ok(e);return`hsl(${r} ${Math.round(a*100)} ${Math.round(l*100)}`+(n?` / ${h})`:")")}const i=RN(e);return e.a===1?i.slice(0,7):i}if(typeof t=="object"){let n;return _p(t,["r","g","b"])?n=cd(e):_p(t,["h","s","l"])?n=Ok(e):_p(t,["h","s","v"])&&(n=e),ive(n,!_p(t,["a"])&&e.a===1)}return e}const wv={h:0,s:0,v:0,a:1},dI={inputProps:{type:"number",min:0},inputs:[{label:"R",max:255,step:1,getValue:e=>Math.round(e.r),getColor:(e,t)=>({...e,r:Number(t)}),localeKey:"redInput"},{label:"G",max:255,step:1,getValue:e=>Math.round(e.g),getColor:(e,t)=>({...e,g:Number(t)}),localeKey:"greenInput"},{label:"B",max:255,step:1,getValue:e=>Math.round(e.b),getColor:(e,t)=>({...e,b:Number(t)}),localeKey:"blueInput"},{label:"A",max:1,step:.01,getValue:e=>{let{a:t}=e;return t!=null?Math.round(t*100)/100:1},getColor:(e,t)=>({...e,a:Number(t)}),localeKey:"alphaInput"}],to:cd,from:Pb},sve={...dI,inputs:dI.inputs?.slice(0,3)},hI={inputProps:{type:"number",min:0},inputs:[{label:"H",max:360,step:1,getValue:e=>Math.round(e.h),getColor:(e,t)=>({...e,h:Number(t)}),localeKey:"hueInput"},{label:"S",max:1,step:.01,getValue:e=>Math.round(e.s*100)/100,getColor:(e,t)=>({...e,s:Number(t)}),localeKey:"saturationInput"},{label:"L",max:1,step:.01,getValue:e=>Math.round(e.l*100)/100,getColor:(e,t)=>({...e,l:Number(t)}),localeKey:"lightnessInput"},{label:"A",max:1,step:.01,getValue:e=>{let{a:t}=e;return t!=null?Math.round(t*100)/100:1},getColor:(e,t)=>({...e,a:Number(t)}),localeKey:"alphaInput"}],to:Ok,from:lP},ove={...hI,inputs:hI.inputs.slice(0,3)},B9={inputProps:{type:"text"},inputs:[{label:"HEXA",getValue:e=>e,getColor:(e,t)=>t,localeKey:"hexaInput"}],to:RN,from:Fne},ave={...B9,inputs:[{label:"HEX",getValue:e=>e.slice(0,7),getColor:(e,t)=>t,localeKey:"hexInput"}]},Op={rgb:sve,rgba:dI,hsl:ove,hsla:hI,hex:ave,hexa:B9},lve=e=>{let{label:t,...n}=e;return V("div",{class:"v-color-picker-edit__input"},[V("input",Ij(EB(n)),null),V("span",null,[t])])},cve=lt({color:Object,disabled:Boolean,mode:{type:String,default:"rgba",validator:e=>Object.keys(Op).includes(e)},modes:{type:Array,default:()=>Object.keys(Op),validator:e=>Array.isArray(e)&&e.every(t=>Object.keys(Op).includes(t))},...Tn()},"VColorPickerEdit"),uve=dc({name:"VColorPickerEdit",props:cve(),emits:{"update:color":e=>!0,"update:mode":e=>!0},setup(e,t){let{emit:n}=t;const{t:i}=fr(),r=me(()=>e.modes.map(l=>({...Op[l],name:l}))),a=me(()=>{const l=r.value.find(s=>s.name===e.mode);if(!l)return[];const h=e.color?l.to(e.color):null;return l.inputs?.map(s=>{let{getValue:p,getColor:_,localeKey:x,...T}=s;return{...l.inputProps,...T,ariaLabel:i(`$vuetify.colorPicker.ariaLabel.${x}`),disabled:e.disabled,value:h&&p(h),onChange:k=>{const A=k.target;A&&n("update:color",l.from(_(h??l.to(wv),A.value)))}}})});return zt(()=>V("div",{class:_t(["v-color-picker-edit",e.class]),style:Xt(e.style)},[a.value?.map(l=>ce(lve,l,null)),r.value.length>1&&ce(mi,{icon:"$unfold",size:"x-small",variant:"plain","aria-label":i("$vuetify.colorPicker.ariaLabel.changeFormat"),onClick:()=>{const l=r.value.findIndex(h=>h.name===e.mode);n("update:mode",r.value[(l+1)%r.value.length].name)}},null)])),{}}}),F9=lt({color:{type:Object},disabled:Boolean,hideAlpha:Boolean,hideEyeDropper:Boolean,eyeDropperIcon:{type:In,default:"$eyeDropper"},...Tn()},"VColorPickerPreview"),dve=dc({name:"VColorPickerPreview",props:F9(),emits:{"update:color":e=>!0},setup(e,t){let{emit:n}=t;const{t:i}=fr(),r=new AbortController;zI(()=>r.abort());async function a(){if(!A5||e.disabled)return;const l=new window.EyeDropper;try{const h=await l.open({signal:r.signal}),s=Pb(sc(h.sRGBHex));n("update:color",{...e.color??wv,...s})}catch{}}return zt(()=>V("div",{class:_t(["v-color-picker-preview",{"v-color-picker-preview--hide-alpha":e.hideAlpha},e.class]),style:Xt(e.style)},[A5&&!e.hideEyeDropper&&V("div",{class:"v-color-picker-preview__eye-dropper",key:"eyeDropper"},[ce(mi,{"aria-label":i("$vuetify.colorPicker.ariaLabel.eyedropper"),density:"comfortable",disabled:e.disabled,icon:e.eyeDropperIcon,variant:"plain",onClick:a},null)]),V("div",{class:"v-color-picker-preview__dot"},[V("div",{style:{background:MN(e.color??wv)}},null)]),V("div",{class:"v-color-picker-preview__sliders"},[ce(ab,{class:"v-color-picker-preview__track v-color-picker-preview__hue",name:i("$vuetify.colorPicker.ariaLabel.hueSlider"),modelValue:e.color?.h,"onUpdate:modelValue":l=>n("update:color",{...e.color??wv,h:l}),step:1,min:0,max:360,disabled:e.disabled,thumbSize:14,trackSize:8,trackFillColor:"white",hideDetails:!0},null),!e.hideAlpha&&ce(ab,{class:"v-color-picker-preview__track v-color-picker-preview__alpha",name:i("$vuetify.colorPicker.ariaLabel.alphaSlider"),modelValue:e.color?.a??1,"onUpdate:modelValue":l=>n("update:color",{...e.color??wv,a:l}),step:.01,min:0,max:1,disabled:e.disabled,thumbSize:14,trackSize:8,trackFillColor:"white",hideDetails:!0},null)])])),{}}}),hve={base:"#f44336",lighten5:"#ffebee",lighten4:"#ffcdd2",lighten3:"#ef9a9a",lighten2:"#e57373",lighten1:"#ef5350",darken1:"#e53935",darken2:"#d32f2f",darken3:"#c62828",darken4:"#b71c1c",accent1:"#ff8a80",accent2:"#ff5252",accent3:"#ff1744",accent4:"#d50000"},fve={base:"#e91e63",lighten5:"#fce4ec",lighten4:"#f8bbd0",lighten3:"#f48fb1",lighten2:"#f06292",lighten1:"#ec407a",darken1:"#d81b60",darken2:"#c2185b",darken3:"#ad1457",darken4:"#880e4f",accent1:"#ff80ab",accent2:"#ff4081",accent3:"#f50057",accent4:"#c51162"},mve={base:"#9c27b0",lighten5:"#f3e5f5",lighten4:"#e1bee7",lighten3:"#ce93d8",lighten2:"#ba68c8",lighten1:"#ab47bc",darken1:"#8e24aa",darken2:"#7b1fa2",darken3:"#6a1b9a",darken4:"#4a148c",accent1:"#ea80fc",accent2:"#e040fb",accent3:"#d500f9",accent4:"#aa00ff"},pve={base:"#673ab7",lighten5:"#ede7f6",lighten4:"#d1c4e9",lighten3:"#b39ddb",lighten2:"#9575cd",lighten1:"#7e57c2",darken1:"#5e35b1",darken2:"#512da8",darken3:"#4527a0",darken4:"#311b92",accent1:"#b388ff",accent2:"#7c4dff",accent3:"#651fff",accent4:"#6200ea"},gve={base:"#3f51b5",lighten5:"#e8eaf6",lighten4:"#c5cae9",lighten3:"#9fa8da",lighten2:"#7986cb",lighten1:"#5c6bc0",darken1:"#3949ab",darken2:"#303f9f",darken3:"#283593",darken4:"#1a237e",accent1:"#8c9eff",accent2:"#536dfe",accent3:"#3d5afe",accent4:"#304ffe"},vve={base:"#2196f3",lighten5:"#e3f2fd",lighten4:"#bbdefb",lighten3:"#90caf9",lighten2:"#64b5f6",lighten1:"#42a5f5",darken1:"#1e88e5",darken2:"#1976d2",darken3:"#1565c0",darken4:"#0d47a1",accent1:"#82b1ff",accent2:"#448aff",accent3:"#2979ff",accent4:"#2962ff"},_ve={base:"#03a9f4",lighten5:"#e1f5fe",lighten4:"#b3e5fc",lighten3:"#81d4fa",lighten2:"#4fc3f7",lighten1:"#29b6f6",darken1:"#039be5",darken2:"#0288d1",darken3:"#0277bd",darken4:"#01579b",accent1:"#80d8ff",accent2:"#40c4ff",accent3:"#00b0ff",accent4:"#0091ea"},yve={base:"#00bcd4",lighten5:"#e0f7fa",lighten4:"#b2ebf2",lighten3:"#80deea",lighten2:"#4dd0e1",lighten1:"#26c6da",darken1:"#00acc1",darken2:"#0097a7",darken3:"#00838f",darken4:"#006064",accent1:"#84ffff",accent2:"#18ffff",accent3:"#00e5ff",accent4:"#00b8d4"},bve={base:"#009688",lighten5:"#e0f2f1",lighten4:"#b2dfdb",lighten3:"#80cbc4",lighten2:"#4db6ac",lighten1:"#26a69a",darken1:"#00897b",darken2:"#00796b",darken3:"#00695c",darken4:"#004d40",accent1:"#a7ffeb",accent2:"#64ffda",accent3:"#1de9b6",accent4:"#00bfa5"},xve={base:"#4caf50",lighten5:"#e8f5e9",lighten4:"#c8e6c9",lighten3:"#a5d6a7",lighten2:"#81c784",lighten1:"#66bb6a",darken1:"#43a047",darken2:"#388e3c",darken3:"#2e7d32",darken4:"#1b5e20",accent1:"#b9f6ca",accent2:"#69f0ae",accent3:"#00e676",accent4:"#00c853"},wve={base:"#8bc34a",lighten5:"#f1f8e9",lighten4:"#dcedc8",lighten3:"#c5e1a5",lighten2:"#aed581",lighten1:"#9ccc65",darken1:"#7cb342",darken2:"#689f38",darken3:"#558b2f",darken4:"#33691e",accent1:"#ccff90",accent2:"#b2ff59",accent3:"#76ff03",accent4:"#64dd17"},Tve={base:"#cddc39",lighten5:"#f9fbe7",lighten4:"#f0f4c3",lighten3:"#e6ee9c",lighten2:"#dce775",lighten1:"#d4e157",darken1:"#c0ca33",darken2:"#afb42b",darken3:"#9e9d24",darken4:"#827717",accent1:"#f4ff81",accent2:"#eeff41",accent3:"#c6ff00",accent4:"#aeea00"},Sve={base:"#ffeb3b",lighten5:"#fffde7",lighten4:"#fff9c4",lighten3:"#fff59d",lighten2:"#fff176",lighten1:"#ffee58",darken1:"#fdd835",darken2:"#fbc02d",darken3:"#f9a825",darken4:"#f57f17",accent1:"#ffff8d",accent2:"#ffff00",accent3:"#ffea00",accent4:"#ffd600"},Eve={base:"#ffc107",lighten5:"#fff8e1",lighten4:"#ffecb3",lighten3:"#ffe082",lighten2:"#ffd54f",lighten1:"#ffca28",darken1:"#ffb300",darken2:"#ffa000",darken3:"#ff8f00",darken4:"#ff6f00",accent1:"#ffe57f",accent2:"#ffd740",accent3:"#ffc400",accent4:"#ffab00"},Cve={base:"#ff9800",lighten5:"#fff3e0",lighten4:"#ffe0b2",lighten3:"#ffcc80",lighten2:"#ffb74d",lighten1:"#ffa726",darken1:"#fb8c00",darken2:"#f57c00",darken3:"#ef6c00",darken4:"#e65100",accent1:"#ffd180",accent2:"#ffab40",accent3:"#ff9100",accent4:"#ff6d00"},kve={base:"#ff5722",lighten5:"#fbe9e7",lighten4:"#ffccbc",lighten3:"#ffab91",lighten2:"#ff8a65",lighten1:"#ff7043",darken1:"#f4511e",darken2:"#e64a19",darken3:"#d84315",darken4:"#bf360c",accent1:"#ff9e80",accent2:"#ff6e40",accent3:"#ff3d00",accent4:"#dd2c00"},Ive={base:"#795548",lighten5:"#efebe9",lighten4:"#d7ccc8",lighten3:"#bcaaa4",lighten2:"#a1887f",lighten1:"#8d6e63",darken1:"#6d4c41",darken2:"#5d4037",darken3:"#4e342e",darken4:"#3e2723"},Ave={base:"#607d8b",lighten5:"#eceff1",lighten4:"#cfd8dc",lighten3:"#b0bec5",lighten2:"#90a4ae",lighten1:"#78909c",darken1:"#546e7a",darken2:"#455a64",darken3:"#37474f",darken4:"#263238"},Pve={base:"#9e9e9e",lighten5:"#fafafa",lighten4:"#f5f5f5",lighten3:"#eeeeee",lighten2:"#e0e0e0",lighten1:"#bdbdbd",darken1:"#757575",darken2:"#616161",darken3:"#424242",darken4:"#212121"},Mve={black:"#000000",white:"#ffffff",transparent:"#ffffff00"},Dve={red:hve,pink:fve,purple:mve,deepPurple:pve,indigo:gve,blue:vve,lightBlue:_ve,cyan:yve,teal:bve,green:xve,lightGreen:wve,lime:Tve,yellow:Sve,amber:Eve,orange:Cve,deepOrange:kve,brown:Ive,blueGrey:Ave,grey:Pve,shades:Mve},Lve=lt({swatches:{type:Array,default:()=>Rve(Dve)},disabled:Boolean,color:Object,maxHeight:[Number,String],...Tn()},"VColorPickerSwatches");function Rve(e){return Object.keys(e).map(t=>{const n=e[t];return n.base?[n.base,n.darken4,n.darken3,n.darken2,n.darken1,n.lighten1,n.lighten2,n.lighten3,n.lighten4,n.lighten5]:[n.black,n.white,n.transparent]})}const Ove=dc({name:"VColorPickerSwatches",props:Lve(),emits:{"update:color":e=>!0},setup(e,t){let{emit:n}=t;return zt(()=>V("div",{class:_t(["v-color-picker-swatches",e.class]),style:Xt([{maxHeight:pn(e.maxHeight)},e.style])},[V("div",null,[e.swatches.map(i=>V("div",{class:"v-color-picker-swatches__swatch"},[i.map(r=>{const a=sc(r),l=Pb(a),h=PN(a);return V("div",{class:"v-color-picker-swatches__color",onClick:()=>l&&n("update:color",l)},[V("div",{style:{background:h}},[e.color&&bo(e.color,l)?ce(Pi,{size:"x-small",icon:"$success",color:Une(r,"#FFFFFF")>2?"white":"black"},null):void 0])])})]))])])),{}}}),Vve=Ih("v-picker-title"),QT=lt({bgColor:String,divided:Boolean,landscape:Boolean,title:String,hideHeader:Boolean,hideTitle:Boolean,...FP()},"VPicker"),d_=Mt()({name:"VPicker",props:QT(),setup(e,t){let{slots:n}=t;const{backgroundColorClasses:i,backgroundColorStyles:r}=ir(()=>e.color);return zt(()=>{const a=nd.filterProps(e),l=!e.hideTitle&&!!(e.title||n.title);return ce(nd,At(a,{color:e.bgColor,class:["v-picker",{"v-picker--divided":e.divided,"v-picker--landscape":e.landscape,"v-picker--with-actions":!!n.actions},e.class],style:e.style}),{default:()=>[!e.hideHeader&&V("div",{key:"header",class:_t([i.value]),style:Xt([r.value])},[l&&ce(Vve,{key:"picker-title"},{default:()=>[n.title?.()??e.title]}),n.header&&V("div",{class:"v-picker__header"},[n.header()])]),V("div",{class:"v-picker__body"},[n.default?.()]),n.actions&&ce(ui,{defaults:{VBtn:{slim:!0,variant:"text"}}},{default:()=>[V("div",{class:"v-picker__actions"},[n.actions()])]})]})}),{}}}),Bve=lt({canvasHeight:{type:[String,Number],default:150},disabled:Boolean,dotSize:{type:[Number,String],default:10},hideCanvas:Boolean,hideSliders:Boolean,hideInputs:Boolean,mode:{type:String,default:"rgba",validator:e=>Object.keys(Op).includes(e)},modes:{type:Array,default:()=>Object.keys(Op),validator:e=>Array.isArray(e)&&e.every(t=>Object.keys(Op).includes(t))},showSwatches:Boolean,swatches:Array,swatchesMaxHeight:{type:[Number,String],default:150},modelValue:{type:[Object,String]},...QT({hideHeader:!0}),...Vl(F9(),["hideEyeDropper","eyeDropperIcon"])},"VColorPicker"),Fve=dc({name:"VColorPicker",props:Bve(),emits:{"update:modelValue":e=>!0,"update:mode":e=>!0},setup(e,t){let{slots:n}=t;const i=Pn(e,"mode"),r=tt(null),a=Pn(e,"modelValue",void 0,_=>{if(_==null||_==="")return null;let x;try{x=Pb(sc(_))}catch{return null}return x},_=>_?rve(_,e.modelValue):null),l=me(()=>a.value?{...a.value,h:r.value??a.value.h}:null),{rtlClasses:h}=qs();let s=!0;Yt(a,_=>{if(!s){s=!0;return}_&&(r.value=_.h)},{immediate:!0});const p=_=>{s=!1,r.value=_.h,a.value=_};return m_(()=>{e.modes.includes(i.value)||(i.value=e.modes[0])}),ts({VSlider:{color:void 0,trackColor:void 0,trackFillColor:void 0}}),zt(()=>{const _=d_.filterProps(e);return ce(d_,At(_,{class:["v-color-picker",h.value,e.class],style:[{"--v-color-picker-color-hsv":MN({...l.value??wv,a:1})},e.style]}),{...n,default:()=>V(an,null,[!e.hideCanvas&&ce(nve,{key:"canvas",color:l.value,"onUpdate:color":p,disabled:e.disabled,dotSize:e.dotSize,width:e.width,height:e.canvasHeight},null),(!e.hideSliders||!e.hideInputs)&&V("div",{key:"controls",class:"v-color-picker__controls"},[!e.hideSliders&&ce(dve,{key:"preview",color:l.value,"onUpdate:color":p,hideAlpha:!i.value.endsWith("a"),disabled:e.disabled,hideEyeDropper:e.hideEyeDropper,eyeDropperIcon:e.eyeDropperIcon},null),!e.hideInputs&&ce(uve,{key:"edit",modes:e.modes,mode:i.value,"onUpdate:mode":x=>i.value=x,color:l.value,"onUpdate:color":p,disabled:e.disabled},null)]),e.showSwatches&&ce(Ove,{key:"swatches",color:l.value,"onUpdate:color":p,maxHeight:e.swatchesMaxHeight,swatches:e.swatches,disabled:e.disabled},null)])})}),{}}}),zve=lt({alwaysFilter:Boolean,autoSelectFirst:{type:[Boolean,String]},clearOnSelect:{type:Boolean,default:!0},delimiters:Array,...I_({filterKeys:["title"]}),...OP({hideNoData:!0,returnObject:!0}),...hr(Ub({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"])},"VCombobox"),Nve=Mt()({name:"VCombobox",props:zve(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:search":e=>!0,"update:menu":e=>!0},setup(e,t){let{emit:n,slots:i}=t;const{t:r}=fr(),a=tt(),l=tn(!1),h=tn(!0),s=tn(!1),p=tt(),_=tt(),x=tn(-1);let T=!1;const{items:k,transformIn:A,transformOut:M}=CP(e),{textColorClasses:R,textColorStyles:F}=Uo(()=>a.value?.color),z=Pn(e,"modelValue",[],fe=>A(Xr(fe)),fe=>{const Ie=M(fe);return e.multiple?Ie:Ie[0]??null}),G=C_(e),Y=me(()=>!!(e.chips||i.chip)),J=me(()=>Y.value||!!i.selection),re=tn(!e.multiple&&!J.value?z.value[0]?.title??"":""),X=tn(null),U=me({get:()=>re.value,set:async fe=>{if(re.value=fe??"",fe===null||fe===""&&!e.multiple&&!J.value?z.value=[]:!e.multiple&&!J.value&&(z.value=[lu(e,fe)],Hn(()=>_.value?.scrollToIndex(0))),fe&&e.multiple&&e.delimiters?.length){const Ie=e.delimiters.map(kw).join("|"),je=fe.split(new RegExp(`(?:${Ie})+`));if(je.length>1){for(let Xe of je)Xe=Xe.trim(),Xe&&(Ue(lu(e,Xe)),await Hn());re.value=""}}fe||(x.value=-1),h.value=!fe}}),H=me(()=>typeof e.counterValue=="function"?e.counterValue(z.value):typeof e.counterValue=="number"?e.counterValue:e.multiple?z.value.length:U.value.length),{filteredItems:W,getMatches:ie}=A_(e,k,()=>X.value??(e.alwaysFilter||!h.value?U.value:"")),Q=me(()=>e.hideSelected&&X.value===null?W.value.filter(fe=>!z.value.some(Ie=>Ie.value===fe.value)):W.value),te=me(()=>e.hideNoData&&!Q.value.length||G.isReadonly.value||G.isDisabled.value),ke=Pn(e,"menu"),Re=me({get:()=>ke.value,set:fe=>{ke.value&&!fe&&p.value?.openChildren.size||fe&&te.value||(ke.value=fe)}}),{menuId:Be,ariaExpanded:Je,ariaControls:nt,ariaLabel:De}=RP(e,Re);Yt(re,fe=>{T?Hn(()=>T=!1):l.value&&!Re.value&&(Re.value=!0),n("update:search",fe)}),Yt(z,fe=>{!e.multiple&&!J.value&&(re.value=fe[0]?.title??"")});const Ge=me(()=>z.value.map(fe=>fe.value)),Ee=me(()=>(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&U.value===Q.value[0]?.title)&&Q.value.length>0&&!h.value&&!s.value),it=tt(),ot=LP(it,a);function mt(fe){T=!0,Hn(()=>T=!1),e.openOnClear&&(Re.value=!0)}function Pt(){te.value||(Re.value=!0)}function $t(fe){te.value||(l.value&&(fe.preventDefault(),fe.stopPropagation()),Re.value=!Re.value)}function ct(fe){(i_(fe)||fe.key==="Backspace")&&a.value?.focus()}function ht(fe){if(dne(fe)||G.isReadonly.value)return;const Ie=a.value?.selectionStart,je=z.value.length;if(["Enter","ArrowDown","ArrowUp"].includes(fe.key)&&fe.preventDefault(),["Enter","ArrowDown"].includes(fe.key)&&(Re.value=!0),["Escape"].includes(fe.key)&&(Re.value=!1),Ee.value&&["Enter","Tab"].includes(fe.key)&&!z.value.some(Xe=>{let{value:yt}=Xe;return yt===Q.value[0].value})&&Ue(W.value[0]),fe.key==="ArrowDown"&&Ee.value&&it.value?.focus("next"),fe.key==="Enter"&&U.value&&(Ue(lu(e,U.value),!0,!0),J.value&&(re.value="")),["Backspace","Delete"].includes(fe.key)){if(!e.multiple&&J.value&&z.value.length>0&&!U.value)return Ue(z.value[0],!1);if(~x.value){fe.preventDefault();const Xe=x.value;Ue(z.value[x.value],!1),x.value=Xe>=je-1?je-2:Xe}else fe.key==="Backspace"&&!U.value&&(x.value=je-1);return}if(e.multiple)if(fe.key==="ArrowLeft"){if(x.value<0&&Ie&&Ie>0)return;const Xe=x.value>-1?x.value-1:je-1;z.value[Xe]?x.value=Xe:(x.value=-1,a.value?.setSelectionRange(U.value.length,U.value.length))}else if(fe.key==="ArrowRight"){if(x.value<0)return;const Xe=x.value+1;z.value[Xe]?x.value=Xe:(x.value=-1,a.value?.setSelectionRange(0,0))}else~x.value&&i_(fe)&&(x.value=-1)}function Qe(){e.eager&&_.value?.calculateVisibleItems()}function kt(){l.value&&a.value?.focus(),h.value=!0,X.value=null}function Ue(fe){let Ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,je=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(!(!fe||fe.props.disabled))if(e.multiple){const Xe=z.value.findIndex(wt=>(e.valueComparator||bo)(wt.value,fe.value)),yt=Ie??!~Xe;if(~Xe){const wt=yt?[...z.value,fe]:[...z.value];wt.splice(Xe,1),z.value=wt}else yt&&(z.value=[...z.value,fe]);e.clearOnSelect&&(U.value="")}else{const Xe=Ie!==!1;z.value=Xe?[fe]:[],(!h.value||e.alwaysFilter)&&re.value&&(X.value=re.value),re.value=Xe&&!J.value?fe.title:"",Hn(()=>{Re.value=je,h.value=!0})}}function ue(fe){l.value=!0,setTimeout(()=>{s.value=!0})}function we(fe){s.value=!1}return Yt(l,(fe,Ie)=>{if(!(fe||fe===Ie)&&(x.value=-1,Re.value=!1,U.value)){if(e.multiple){Ue(lu(e,U.value));return}if(!J.value)return;z.value.some(je=>{let{title:Xe}=je;return Xe===U.value})?re.value="":Ue(lu(e,U.value))}}),Yt(Re,fe=>{if(!e.hideSelected&&fe&&z.value.length&&h.value){const Ie=Q.value.findIndex(je=>z.value.some(Xe=>(e.valueComparator||bo)(Xe.value,je.value)));Xi&&window.requestAnimationFrame(()=>{Ie>=0&&_.value?.scrollToIndex(Ie)})}fe&&(X.value=null)}),Yt(k,(fe,Ie)=>{Re.value||l.value&&!Ie.length&&fe.length&&(Re.value=!0)}),zt(()=>{const fe=!!(!e.hideNoData||Q.value.length||i["prepend-item"]||i["append-item"]||i["no-data"]),Ie=z.value.length>0,je=wh.filterProps(e);return ce(wh,At({ref:a},je,{modelValue:U.value,"onUpdate:modelValue":Xe=>U.value=Xe,focused:l.value,"onUpdate:focused":Xe=>l.value=Xe,validationValue:z.externalValue,counterValue:H.value,dirty:Ie,class:["v-combobox",{"v-combobox--active-menu":Re.value,"v-combobox--chips":!!e.chips,"v-combobox--selection-slot":!!J.value,"v-combobox--selecting-index":x.value>-1,[`v-combobox--${e.multiple?"multiple":"single"}`]:!0},e.class],style:e.style,readonly:G.isReadonly.value,placeholder:Ie?void 0:e.placeholder,"onClick:clear":mt,"onMousedown:control":Pt,onKeydown:ht,"aria-expanded":Je.value,"aria-controls":nt.value}),{...i,default:()=>V(an,null,[ce(a_,At({id:Be.value,ref:p,modelValue:Re.value,"onUpdate:modelValue":Xe=>Re.value=Xe,activator:"parent",contentClass:"v-combobox__content",disabled:te.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,onAfterEnter:Qe,onAfterLeave:kt},e.menuProps),{default:()=>[fe&&ce(o_,At({ref:it,filterable:!0,selected:Ge.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:Xe=>Xe.preventDefault(),selectable:!0,onKeydown:ct,onFocusin:ue,onFocusout:we,tabindex:"-1","aria-live":"polite",color:e.itemColor??e.color},ot,e.listProps),{default:()=>[i["prepend-item"]?.(),!Q.value.length&&!e.hideNoData&&(i["no-data"]?.()??ce(vu,{key:"no-data",title:r(e.noDataText)},null)),ce(UT,{ref:_,renderless:!0,items:Q.value,itemKey:"value"},{default:Xe=>{let{item:yt,index:wt,itemRef:Lt}=Xe;const Dt=At(yt.props,{ref:Lt,key:yt.value,active:Ee.value&&wt===0?!0:void 0,onClick:()=>Ue(yt,null)});return yt.type==="divider"?i.divider?.({props:yt.raw,index:wt})??ce(oc,At(yt.props,{key:`divider-${wt}`}),null):yt.type==="subheader"?i.subheader?.({props:yt.raw,index:wt})??ce(k_,At(yt.props,{key:`subheader-${wt}`}),null):i.item?.({item:yt,index:wt,props:Dt})??ce(vu,At(Dt,{role:"option"}),{prepend:gn=>{let{isSelected:Kt}=gn;return V(an,null,[e.multiple&&!e.hideSelected?ce(ud,{key:yt.value,modelValue:Kt,ripple:!1,tabindex:"-1",onClick:Cn=>Cn.preventDefault()},null):void 0,yt.props.prependAvatar&&ce(uc,{image:yt.props.prependAvatar},null),yt.props.prependIcon&&ce(Pi,{icon:yt.props.prependIcon},null)])},title:()=>h.value?yt.title:a8("v-combobox",yt.title,ie(yt)?.title)})}}),i["append-item"]?.()]})]}),z.value.map((Xe,yt)=>{function wt(Kt){Kt.stopPropagation(),Kt.preventDefault(),Ue(Xe,!1)}const Lt={"onClick:close":wt,onKeydown(Kt){Kt.key!=="Enter"&&Kt.key!==" "||(Kt.preventDefault(),Kt.stopPropagation(),wt(Kt))},onMousedown(Kt){Kt.preventDefault(),Kt.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},Dt=Y.value?!!i.chip:!!i.selection,gn=Dt?MT(Y.value?i.chip({item:Xe,index:yt,props:Lt}):i.selection({item:Xe,index:yt})):void 0;if(!(Dt&&!gn))return V("div",{key:Xe.value,class:_t(["v-combobox__selection",yt===x.value&&["v-combobox__selection--selected",R.value]]),style:Xt(yt===x.value?F.value:{})},[Y.value?i.chip?ce(ui,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:Xe.title}}},{default:()=>[gn]}):ce(Ds,At({key:"chip",closable:e.closableChips,size:"small",text:Xe.title,disabled:Xe.props.disabled},Lt),null):gn??V("span",{class:"v-combobox__selection-text"},[Xe.title,e.multiple&&yt<z.value.length-1&&V("span",{class:"v-combobox__selection-comma"},[Bn(",")])])])})]),"append-inner":function(){for(var Xe=arguments.length,yt=new Array(Xe),wt=0;wt<Xe;wt++)yt[wt]=arguments[wt];return V(an,null,[i["append-inner"]?.(...yt),(!e.hideNoData||e.items.length)&&e.menuIcon?ce(Pi,{class:"v-combobox__menu-icon",color:a.value?.fieldIconColor,icon:e.menuIcon,onMousedown:$t,onClick:SN,"aria-label":De.value,title:De.value,tabindex:"-1"},null):void 0])}})}),To({isFocused:l,isPristine:h,menu:Re,search:U,selectionIndex:x,filteredItems:W,select:Ue},a)}}),$ve=lt({modelValue:null,color:String,cancelText:{type:String,default:"$vuetify.confirmEdit.cancel"},okText:{type:String,default:"$vuetify.confirmEdit.ok"},disabled:{type:[Boolean,Array],default:void 0},hideActions:Boolean},"VConfirmEdit"),Uve=Mt()({name:"VConfirmEdit",props:$ve(),emits:{cancel:()=>!0,save:e=>!0,"update:modelValue":e=>!0},setup(e,t){let{emit:n,slots:i}=t;const r=Pn(e,"modelValue"),a=tt();jr(()=>{a.value=structuredClone(B5(r.value))});const{t:l}=fr(),h=me(()=>bo(r.value,a.value));function s(M){return typeof e.disabled=="boolean"?e.disabled:Array.isArray(e.disabled)?e.disabled.includes(M):h.value}const p=me(()=>s("save")),_=me(()=>s("cancel"));function x(){r.value=a.value,n("save",a.value)}function T(){a.value=structuredClone(B5(r.value)),n("cancel")}function k(M){return V(an,null,[ce(mi,At({disabled:_.value,variant:"text",color:e.color,onClick:T,text:l(e.cancelText)},M),null),ce(mi,At({disabled:p.value,variant:"text",color:e.color,onClick:x,text:l(e.okText)},M),null)])}let A=!1;return zt(()=>V(an,null,[i.default?.({model:a,save:x,cancel:T,isPristine:h.value,get actions(){return A=!0,k}}),!e.hideActions&&!A&&k()])),{save:x,cancel:T,isPristine:h}}}),z9=lt({expandOnClick:Boolean,showExpand:Boolean,expanded:{type:Array,default:()=>[]}},"DataTable-expand"),N9=Symbol.for("vuetify:datatable:expanded");function eS(e){const t=$e(()=>e.expandOnClick),n=Pn(e,"expanded",e.expanded,h=>new Set(h),h=>[...h.values()]);function i(h,s){const p=new Set(n.value),_=Un(h.value);if(s)p.add(_);else{const x=[...n.value].find(T=>Un(T)===_);p.delete(x)}n.value=p}function r(h){const s=Un(h.value);return[...n.value].some(p=>Un(p)===s)}function a(h){i(h,!r(h))}const l={expand:i,expanded:n,expandOnClick:t,isExpanded:r,toggleExpand:a};return Rr(N9,l),l}function $9(){const e=Si(N9);if(!e)throw new Error("foo");return e}const sM=lt({groupBy:{type:Array,default:()=>[]}},"DataTable-group"),U9=Symbol.for("vuetify:data-table-group");function oM(e){return{groupBy:Pn(e,"groupBy")}}function tS(e){const{disableSort:t,groupBy:n,sortBy:i}=e,r=tt(new Set),a=me(()=>n.value.map(_=>({..._,order:_.order??!1})).concat(t?.value?[]:i.value));function l(_){return r.value.has(_.id)}function h(_){const x=new Set(r.value);l(_)?x.delete(_.id):x.add(_.id),r.value=x}function s(_){function x(T){const k=[];for(const A of T.items)"type"in A&&A.type==="group"?k.push(...x(A)):k.push(A);return[...new Set(k)]}return x({items:_})}const p={sortByWithGroups:a,toggleGroup:h,opened:r,groupBy:n,extractRows:s,isGroupOpen:l};return Rr(U9,p),p}function j9(){const e=Si(U9);if(!e)throw new Error("Missing group!");return e}function jve(e,t){if(!e.length)return[];const n=new Map;for(const i of e){const r=Wp(i.raw,t);n.has(r)||n.set(r,[]),n.get(r).push(i)}return n}function W9(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"root";if(!t.length)return[];const r=jve(e,t[0]),a=[],l=t.slice(1);return r.forEach((h,s)=>{const p=t[0],_=`${i}_${p}_${s}`;a.push({depth:n,id:_,key:p,value:s,items:l.length?W9(h,l,n+1,_):h,type:"group"})}),a}function H9(e,t,n){const i=[];for(const r of e)"type"in r&&r.type==="group"?(r.value!=null&&i.push(r),(t.has(r.id)||r.value==null)&&(i.push(...H9(r.items,t,n)),n&&i.push({...r,type:"group-summary"}))):i.push(r);return i}function nS(e,t,n,i){return{flatItems:me(()=>{if(!t.value.length)return e.value;const a=W9(e.value,t.value.map(l=>l.key));return H9(a,n.value,Ua(i))})}}function iS(e){let{page:t,itemsPerPage:n,sortBy:i,groupBy:r,search:a}=e;const l=ws("VDataTable"),h=()=>({page:t.value,itemsPerPage:n.value,sortBy:i.value,groupBy:r.value,search:a.value});let s=null;Yt(h,p=>{bo(s,p)||(s&&s.search!==p.search&&(t.value=1),l.emit("update:options",p),s=p)},{deep:!0,immediate:!0})}const aM=lt({page:{type:[Number,String],default:1},itemsPerPage:{type:[Number,String],default:10}},"DataTable-paginate"),G9=Symbol.for("vuetify:data-table-pagination");function lM(e){const t=Pn(e,"page",void 0,i=>Number(i??1)),n=Pn(e,"itemsPerPage",void 0,i=>Number(i??10));return{page:t,itemsPerPage:n}}function cM(e){const{page:t,itemsPerPage:n,itemsLength:i}=e,r=me(()=>n.value===-1?0:n.value*(t.value-1)),a=me(()=>n.value===-1?i.value:Math.min(i.value,r.value+n.value)),l=me(()=>n.value===-1||i.value===0?1:Math.ceil(i.value/n.value));Yt([t,l],()=>{t.value>l.value&&(t.value=l.value)});function h(T){n.value=T,t.value=1}function s(){t.value=Cr(t.value+1,1,l.value)}function p(){t.value=Cr(t.value-1,1,l.value)}function _(T){t.value=Cr(T,1,l.value)}const x={page:t,itemsPerPage:n,startIndex:r,stopIndex:a,pageCount:l,itemsLength:i,nextPage:s,prevPage:p,setPage:_,setItemsPerPage:h};return Rr(G9,x),x}function Wve(){const e=Si(G9);if(!e)throw new Error("Missing pagination!");return e}function q9(e){const t=ws("usePaginatedItems"),{items:n,startIndex:i,stopIndex:r,itemsPerPage:a}=e,l=me(()=>a.value<=0?n.value:n.value.slice(i.value,r.value));return Yt(l,h=>{t.emit("update:currentItems",h)},{immediate:!0}),{paginatedItems:l}}const Hve={showSelectAll:!1,allSelected:()=>[],select:e=>{let{items:t,value:n}=e;return new Set(n?[t[0]?.value]:[])},selectAll:e=>{let{selected:t}=e;return t}},K9={showSelectAll:!0,allSelected:e=>{let{currentPage:t}=e;return t},select:e=>{let{items:t,value:n,selected:i}=e;for(const r of t)n?i.add(r.value):i.delete(r.value);return i},selectAll:e=>{let{value:t,currentPage:n,selected:i}=e;return K9.select({items:n,value:t,selected:i})}},Gve={showSelectAll:!0,allSelected:e=>{let{allItems:t}=e;return t},select:e=>{let{items:t,value:n,selected:i}=e;for(const r of t)n?i.add(r.value):i.delete(r.value);return i},selectAll:e=>{let{value:t,allItems:n}=e;return new Set(t?n.map(i=>i.value):[])}},X9=lt({showSelect:Boolean,selectStrategy:{type:[String,Object],default:"page"},modelValue:{type:Array,default:()=>[]},valueComparator:Function},"DataTable-select"),Y9=Symbol.for("vuetify:data-table-selection");function rS(e,t){let{allItems:n,currentPage:i}=t;const r=Pn(e,"modelValue",e.modelValue,z=>{const G=e.valueComparator;return G?new Set(Xr(z).map(Y=>n.value.find(J=>G(Y,J.value))?.value??Y)):new Set(Xr(z).map(Y=>tm(Y)?n.value.find(J=>Y===J.value)?.value??Y:n.value.find(J=>bo(Y,J.value))?.value??Y))},z=>[...z.values()]),a=me(()=>n.value.filter(z=>z.selectable)),l=me(()=>i.value.filter(z=>z.selectable)),h=me(()=>{if(typeof e.selectStrategy=="object")return e.selectStrategy;switch(e.selectStrategy){case"single":return Hve;case"all":return Gve;case"page":default:return K9}}),s=tn(null);function p(z){return Xr(z).every(G=>r.value.has(G.value))}function _(z){return Xr(z).some(G=>r.value.has(G.value))}function x(z,G){const Y=h.value.select({items:z,value:G,selected:new Set(r.value)});r.value=Y}function T(z,G,Y){const J=[];if(G=G??i.value.findIndex(re=>re.value===z.value),e.selectStrategy!=="single"&&Y?.shiftKey&&s.value!==null){const[re,X]=[s.value,G].sort((U,H)=>U-H);J.push(...i.value.slice(re,X+1).filter(U=>U.selectable))}else J.push(z),s.value=G;x(J,!p([z]))}function k(z){const G=h.value.selectAll({value:z,allItems:a.value,currentPage:l.value,selected:new Set(r.value)});r.value=G}const A=me(()=>r.value.size>0),M=me(()=>{const z=h.value.allSelected({allItems:a.value,currentPage:l.value});return!!z.length&&p(z)}),R=$e(()=>h.value.showSelectAll),F={toggleSelect:T,select:x,selectAll:k,isSelected:p,isSomeSelected:_,someSelected:A,allSelected:M,showSelectAll:R,lastSelectedIndex:s,selectStrategy:h};return Rr(Y9,F),F}function sS(){const e=Si(Y9);if(!e)throw new Error("Missing selection!");return e}const Z9=lt({sortBy:{type:Array,default:()=>[]},customKeySort:Object,multiSort:Boolean,mustSort:Boolean},"DataTable-sort"),J9=Symbol.for("vuetify:data-table-sort");function oS(e){const t=Pn(e,"sortBy"),n=$e(()=>e.mustSort),i=$e(()=>e.multiSort);return{sortBy:t,mustSort:n,multiSort:i}}function aS(e){const{sortBy:t,mustSort:n,multiSort:i,page:r}=e,a=s=>{if(s.key==null)return;let p=t.value.map(x=>({...x}))??[];const _=p.find(x=>x.key===s.key);_?_.order==="desc"?n.value&&p.length===1?_.order="asc":p=p.filter(x=>x.key!==s.key):_.order="desc":i.value?p.push({key:s.key,order:"asc"}):p=[{key:s.key,order:"asc"}],t.value=p,r&&(r.value=1)};function l(s){return!!t.value.find(p=>p.key===s.key)}const h={sortBy:t,toggleSort:a,isSorted:l};return Rr(J9,h),h}function Q9(){const e=Si(J9);if(!e)throw new Error("Missing sort!");return e}function uM(e,t,n,i){const r=fr();return{sortedItems:me(()=>n.value.length?qve(t.value,n.value,r.current.value,{transform:i?.transform,sortFunctions:{...e.customKeySort,...i?.sortFunctions?.value},sortRawFunctions:i?.sortRawFunctions?.value}):t.value)}}function qve(e,t,n,i){const r=new Intl.Collator(n,{sensitivity:"accent",usage:"sort"});return e.map(l=>[l,i?.transform?i.transform(l):l]).sort((l,h)=>{for(let s=0;s<t.length;s++){let p=!1;const _=t[s].key,x=t[s].order??"asc";if(x===!1)continue;let T=Wp(l[1],_),k=Wp(h[1],_),A=l[0].raw,M=h[0].raw;if(x==="desc"&&([T,k]=[k,T],[A,M]=[M,A]),i?.sortRawFunctions?.[_]){const R=i.sortRawFunctions[_](A,M);if(R==null)continue;if(p=!0,R)return R}if(i?.sortFunctions?.[_]){const R=i.sortFunctions[_](T,k);if(R==null)continue;if(p=!0,R)return R}if(!p&&(T instanceof Date&&k instanceof Date&&(T=T.getTime(),k=k.getTime()),[T,k]=[T,k].map(R=>R!=null?R.toString().toLocaleLowerCase():R),T!==k))return Wx(T)&&Wx(k)?0:Wx(T)?-1:Wx(k)?1:!isNaN(T)&&!isNaN(k)?Number(T)-Number(k):r.compare(T,k)}return 0}).map(l=>{let[h]=l;return h})}const Kve=lt({items:{type:Array,default:()=>[]},itemValue:{type:[String,Array,Function],default:"id"},itemSelectable:{type:[String,Array,Function],default:null},returnObject:Boolean},"DataIterator-items");function Xve(e,t){const n=e.returnObject?t:Ls(t,e.itemValue),i=Ls(t,e.itemSelectable,!0);return{type:"item",value:n,selectable:i,raw:t}}function Yve(e,t){const n=[];for(const i of t)n.push(Xve(e,i));return n}function Zve(e){return{items:me(()=>Yve(e,e.items))}}const Jve=lt({search:String,loading:Boolean,...Tn(),...Kve(),...X9(),...Z9(),...aM({itemsPerPage:5}),...z9(),...sM(),...I_(),...ti(),...Ph({transition:{component:K0,hideOnLeave:!0}})},"VDataIterator"),Qve=Mt()({name:"VDataIterator",props:Jve(),emits:{"update:modelValue":e=>!0,"update:groupBy":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:expanded":e=>!0,"update:currentItems":e=>!0},setup(e,t){let{slots:n}=t;const i=Pn(e,"groupBy"),r=$e(()=>e.search),{items:a}=Zve(e),{filteredItems:l}=A_(e,a,r,{transform:Ee=>Ee.raw}),{sortBy:h,multiSort:s,mustSort:p}=oS(e),{page:_,itemsPerPage:x}=lM(e),{toggleSort:T}=aS({sortBy:h,multiSort:s,mustSort:p,page:_}),{sortByWithGroups:k,opened:A,extractRows:M,isGroupOpen:R,toggleGroup:F}=tS({groupBy:i,sortBy:h}),{sortedItems:z}=uM(e,l,k,{transform:Ee=>Ee.raw}),{flatItems:G}=nS(z,i,A,!1),Y=$e(()=>G.value.length),{startIndex:J,stopIndex:re,pageCount:X,prevPage:U,nextPage:H,setItemsPerPage:W,setPage:ie}=cM({page:_,itemsPerPage:x,itemsLength:Y}),{paginatedItems:Q}=q9({items:G,startIndex:J,stopIndex:re,itemsPerPage:x}),te=me(()=>M(Q.value)),{isSelected:ke,select:Re,selectAll:Be,toggleSelect:Je}=rS(e,{allItems:a,currentPage:te}),{isExpanded:nt,toggleExpand:De}=eS(e);iS({page:_,itemsPerPage:x,sortBy:h,groupBy:i,search:r});const Ge=me(()=>({page:_.value,itemsPerPage:x.value,sortBy:h.value,pageCount:X.value,toggleSort:T,prevPage:U,nextPage:H,setPage:ie,setItemsPerPage:W,isSelected:ke,select:Re,selectAll:Be,toggleSelect:Je,isExpanded:nt,toggleExpand:De,isGroupOpen:R,toggleGroup:F,items:te.value,itemsCount:l.value.length,groupedItems:Q.value}));return zt(()=>ce(e.tag,{class:_t(["v-data-iterator",{"v-data-iterator--loading":e.loading},e.class]),style:Xt(e.style)},{default:()=>[n.header?.(Ge.value),ce(Na,{transition:e.transition},{default:()=>[e.loading?ce(Vb,{key:"loader",name:"v-data-iterator",active:!0},{default:Ee=>n.loader?.(Ee)}):V("div",{key:"items"},[Q.value.length?n.default?.(Ge.value):n["no-data"]?.()])]}),n.footer?.(Ge.value)]})),{}}});function e_e(){const e=tt([]);iB(()=>e.value=[]);function t(n,i){e.value[i]=n}return{refs:e,updateRef:t}}const t_e=lt({activeColor:String,start:{type:[Number,String],default:1},modelValue:{type:Number,default:e=>e.start},disabled:Boolean,length:{type:[Number,String],default:1,validator:e=>e%1===0},totalVisible:[Number,String],firstIcon:{type:In,default:"$first"},prevIcon:{type:In,default:"$prev"},nextIcon:{type:In,default:"$next"},lastIcon:{type:In,default:"$last"},ariaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.root"},pageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.page"},currentPageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.currentPage"},firstAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.first"},previousAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.previous"},nextAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.next"},lastAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.last"},ellipsis:{type:String,default:"..."},showFirstLastPage:Boolean,...cl(),...Tn(),...Ts(),...Ks(),...Wr(),...md(),...ti({tag:"nav"}),...Mi(),...Nc({variant:"text"})},"VPagination"),fI=Mt()({name:"VPagination",props:t_e(),emits:{"update:modelValue":e=>!0,first:e=>!0,prev:e=>!0,next:e=>!0,last:e=>!0},setup(e,t){let{slots:n,emit:i}=t;const r=Pn(e,"modelValue"),{t:a,n:l}=fr(),{isRtl:h}=qs(),{themeClasses:s}=Qi(e),{width:p}=Bl(),_=tn(-1);ts(void 0,{scoped:!0});const{resizeRef:x}=zc(U=>{if(!U.length)return;const{target:H,contentRect:W}=U[0],ie=H.querySelector(".v-pagination__list > *");if(!ie)return;const Q=W.width,te=ie.offsetWidth+parseFloat(getComputedStyle(ie).marginRight)*2;_.value=M(Q,te)}),T=me(()=>parseInt(e.length,10)),k=me(()=>parseInt(e.start,10)),A=me(()=>e.totalVisible!=null?parseInt(e.totalVisible,10):_.value>=0?_.value:M(p.value,58));function M(U,H){const W=e.showFirstLastPage?5:3;return Math.max(0,Math.floor(Number(((U-H*W)/H).toFixed(2))))}const R=me(()=>{if(T.value<=0||isNaN(T.value)||T.value>Number.MAX_SAFE_INTEGER)return[];if(A.value<=0)return[];if(A.value===1)return[r.value];if(T.value<=A.value)return rc(T.value,k.value);const U=A.value%2===0,H=U?A.value/2:Math.floor(A.value/2),W=U?H:H+1,ie=T.value-H;if(W-r.value>=0)return[...rc(Math.max(1,A.value-1),k.value),e.ellipsis,T.value];if(r.value-ie>=(U?1:0)){const Q=A.value-1,te=T.value-Q+k.value;return[k.value,e.ellipsis,...rc(Q,te)]}else{const Q=Math.max(1,A.value-2),te=Q===1?r.value:r.value-Math.ceil(Q/2)+k.value;return[k.value,e.ellipsis,...rc(Q,te),e.ellipsis,T.value]}});function F(U,H,W){U.preventDefault(),r.value=H,W&&i(W,H)}const{refs:z,updateRef:G}=e_e();ts({VPaginationBtn:{color:$e(()=>e.color),border:$e(()=>e.border),density:$e(()=>e.density),size:$e(()=>e.size),variant:$e(()=>e.variant),rounded:$e(()=>e.rounded),elevation:$e(()=>e.elevation)}});const Y=me(()=>R.value.map((U,H)=>{const W=ie=>G(ie,H);if(typeof U=="string")return{isActive:!1,key:`ellipsis-${H}`,page:U,props:{ref:W,ellipsis:!0,icon:!0,disabled:!0}};{const ie=U===r.value;return{isActive:ie,key:U,page:l(U),props:{ref:W,ellipsis:!1,icon:!0,disabled:!!e.disabled||Number(e.length)<2,color:ie?e.activeColor:e.color,"aria-current":ie,"aria-label":a(ie?e.currentPageAriaLabel:e.pageAriaLabel,U),onClick:Q=>F(Q,U)}}}})),J=me(()=>{const U=!!e.disabled||r.value<=k.value,H=!!e.disabled||r.value>=k.value+T.value-1;return{first:e.showFirstLastPage?{icon:h.value?e.lastIcon:e.firstIcon,onClick:W=>F(W,k.value,"first"),disabled:U,"aria-label":a(e.firstAriaLabel),"aria-disabled":U}:void 0,prev:{icon:h.value?e.nextIcon:e.prevIcon,onClick:W=>F(W,r.value-1,"prev"),disabled:U,"aria-label":a(e.previousAriaLabel),"aria-disabled":U},next:{icon:h.value?e.prevIcon:e.nextIcon,onClick:W=>F(W,r.value+1,"next"),disabled:H,"aria-label":a(e.nextAriaLabel),"aria-disabled":H},last:e.showFirstLastPage?{icon:h.value?e.firstIcon:e.lastIcon,onClick:W=>F(W,k.value+T.value-1,"last"),disabled:H,"aria-label":a(e.lastAriaLabel),"aria-disabled":H}:void 0}});function re(){const U=r.value-k.value;z.value[U]?.$el.focus()}function X(U){U.key===Pk.left&&!e.disabled&&r.value>Number(e.start)?(r.value=r.value-1,Hn(re)):U.key===Pk.right&&!e.disabled&&r.value<k.value+T.value-1&&(r.value=r.value+1,Hn(re))}return zt(()=>ce(e.tag,{ref:x,class:_t(["v-pagination",s.value,e.class]),style:Xt(e.style),role:"navigation","aria-label":a(e.ariaLabel),onKeydown:X,"data-test":"v-pagination-root"},{default:()=>[V("ul",{class:"v-pagination__list"},[e.showFirstLastPage&&V("li",{key:"first",class:"v-pagination__first","data-test":"v-pagination-first"},[n.first?n.first(J.value.first):ce(mi,At({_as:"VPaginationBtn"},J.value.first),null)]),V("li",{key:"prev",class:"v-pagination__prev","data-test":"v-pagination-prev"},[n.prev?n.prev(J.value.prev):ce(mi,At({_as:"VPaginationBtn"},J.value.prev),null)]),Y.value.map((U,H)=>V("li",{key:U.key,class:_t(["v-pagination__item",{"v-pagination__item--is-active":U.isActive}]),"data-test":"v-pagination-item"},[n.item?n.item(U):ce(mi,At({_as:"VPaginationBtn"},U.props),{default:()=>[U.page]})])),V("li",{key:"next",class:"v-pagination__next","data-test":"v-pagination-next"},[n.next?n.next(J.value.next):ce(mi,At({_as:"VPaginationBtn"},J.value.next),null)]),e.showFirstLastPage&&V("li",{key:"last",class:"v-pagination__last","data-test":"v-pagination-last"},[n.last?n.last(J.value.last):ce(mi,At({_as:"VPaginationBtn"},J.value.last),null)])])]})),{}}}),dM=lt({prevIcon:{type:In,default:"$prev"},nextIcon:{type:In,default:"$next"},firstIcon:{type:In,default:"$first"},lastIcon:{type:In,default:"$last"},itemsPerPageText:{type:String,default:"$vuetify.dataFooter.itemsPerPageText"},pageText:{type:String,default:"$vuetify.dataFooter.pageText"},firstPageLabel:{type:String,default:"$vuetify.dataFooter.firstPage"},prevPageLabel:{type:String,default:"$vuetify.dataFooter.prevPage"},nextPageLabel:{type:String,default:"$vuetify.dataFooter.nextPage"},lastPageLabel:{type:String,default:"$vuetify.dataFooter.lastPage"},itemsPerPageOptions:{type:Array,default:()=>[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}]},showCurrentPage:Boolean},"VDataTableFooter"),lb=Mt()({name:"VDataTableFooter",props:dM(),setup(e,t){let{slots:n}=t;const{t:i}=fr(),{page:r,pageCount:a,startIndex:l,stopIndex:h,itemsLength:s,itemsPerPage:p,setItemsPerPage:_}=Wve(),x=me(()=>e.itemsPerPageOptions.map(T=>typeof T=="number"?{value:T,title:T===-1?i("$vuetify.dataFooter.itemsPerPageAll"):String(T)}:{...T,title:isNaN(Number(T.title))?i(T.title):T.title}));return zt(()=>{const T=fI.filterProps(e);return V("div",{class:"v-data-table-footer"},[n.prepend?.(),V("div",{class:"v-data-table-footer__items-per-page"},[V("span",{"aria-label":i(e.itemsPerPageText)},[i(e.itemsPerPageText)]),ce(Vv,{items:x.value,modelValue:p.value,"onUpdate:modelValue":k=>_(Number(k)),density:"compact",variant:"outlined",hideDetails:!0},null)]),V("div",{class:"v-data-table-footer__info"},[V("div",null,[i(e.pageText,s.value?l.value+1:0,h.value,s.value)])]),V("div",{class:"v-data-table-footer__pagination"},[ce(fI,At({modelValue:r.value,"onUpdate:modelValue":k=>r.value=k,density:"comfortable",firstAriaLabel:e.firstPageLabel,lastAriaLabel:e.lastPageLabel,length:a.value,nextAriaLabel:e.nextPageLabel,previousAriaLabel:e.prevPageLabel,rounded:!0,showFirstLastPage:!0,totalVisible:e.showCurrentPage?1:0,variant:"plain"},T),null)])])}),{}}}),cb=qne({align:{type:String,default:"start"},fixed:{type:[Boolean,String],default:!1},fixedOffset:[Number,String],fixedEndOffset:[Number,String],height:[Number,String],lastFixed:Boolean,firstFixedEnd:Boolean,noPadding:Boolean,indent:[Number,String],empty:Boolean,tag:String,width:[Number,String],maxWidth:[Number,String],nowrap:Boolean},(e,t)=>{let{slots:n}=t;const i=e.tag??"td",r=typeof e.fixed=="string"?e.fixed:e.fixed?"start":"none";return ce(i,{class:_t(["v-data-table__td",{"v-data-table-column--fixed":r==="start","v-data-table-column--fixed-end":r==="end","v-data-table-column--last-fixed":e.lastFixed,"v-data-table-column--first-fixed-end":e.firstFixedEnd,"v-data-table-column--no-padding":e.noPadding,"v-data-table-column--nowrap":e.nowrap,"v-data-table-column--empty":e.empty},`v-data-table-column--align-${e.align}`]),style:{height:pn(e.height),width:pn(e.width),maxWidth:pn(e.maxWidth),left:r==="start"?pn(e.fixedOffset||null):void 0,right:r==="end"?pn(e.fixedEndOffset||null):void 0,paddingInlineStart:e.indent?pn(e.indent):void 0}},{default:()=>[n.default?.()]})}),n_e=lt({headers:Array},"DataTable-header"),e7=Symbol.for("vuetify:data-table-headers"),t7={title:"",sortable:!1},i_e={...t7,width:48};function r_e(){const t=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).map(n=>({element:n,priority:0}));return{enqueue:(n,i)=>{let r=!1;for(let a=0;a<t.length;a++)if(t[a].priority>i){t.splice(a,0,{element:n,priority:i}),r=!0;break}r||t.push({element:n,priority:i})},size:()=>t.length,count:()=>{let n=0;if(!t.length)return 0;const i=Math.floor(t[0].priority);for(let r=0;r<t.length;r++)Math.floor(t[r].priority)===i&&(n+=1);return n},dequeue:()=>t.shift()}}function mI(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];if(!e.children)t.push(e);else for(const n of e.children)mI(n,t);return t}function n7(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new Set;for(const n of e)n.key&&t.add(n.key),n.children&&n7(n.children,t);return t}function s_e(e){if(e.key){if(e.key==="data-table-group")return t7;if(["data-table-expand","data-table-select"].includes(e.key))return i_e}}function hM(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.children?Math.max(t,...e.children.map(n=>hM(n,t+1))):t}function o_e(e){let t=!1;function n(a,l){let h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"none";if(a)if(h!=="none"&&(a.fixed=h),a.fixed===!0&&(a.fixed="start"),a.fixed===l)if(a.children)if(l==="start")for(let s=a.children.length-1;s>=0;s--)n(a.children[s],l,l);else for(let s=0;s<a.children.length;s++)n(a.children[s],l,l);else!t&&l==="start"?a.lastFixed=!0:!t&&l==="end"?a.firstFixedEnd=!0:isNaN(Number(a.width))?(`${a.key}`,void 0):a.minWidth=Math.max(Number(a.width)||0,Number(a.minWidth)||0),t=!0;else if(a.children)if(l==="start")for(let s=a.children.length-1;s>=0;s--)n(a.children[s],l);else for(let s=0;s<a.children.length;s++)n(a.children[s],l);else t=!1}for(let a=e.length-1;a>=0;a--)n(e[a],"start");for(let a=0;a<e.length;a++)n(e[a],"end");let i=0;for(let a=0;a<e.length;a++)i=i7(e[a],i);let r=0;for(let a=e.length-1;a>=0;a--)r=r7(e[a],r)}function i7(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!e)return t;if(e.children){e.fixedOffset=t;for(const n of e.children)t=i7(n,t)}else e.fixed&&e.fixed!=="end"&&(e.fixedOffset=t,t+=parseFloat(e.width||"0")||0);return t}function r7(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!e)return t;if(e.children){e.fixedEndOffset=t;for(const n of e.children)t=r7(n,t)}else e.fixed==="end"&&(e.fixedEndOffset=t,t+=parseFloat(e.width||"0")||0);return t}function a_e(e,t){const n=[];let i=0;const r=r_e(e);for(;r.size()>0;){let l=r.count();const h=[];let s=1;for(;l>0;){const{element:p,priority:_}=r.dequeue(),x=t-i-hM(p);if(h.push({...p,rowspan:x??1,colspan:p.children?mI(p).length:1}),p.children)for(const T of p.children){const k=_%1+s/Math.pow(10,i+2);r.enqueue(T,i+x+k)}s+=1,l-=1}i+=1,n.push(h)}return{columns:e.map(l=>mI(l)).flat(),headers:n}}function s7(e){const t=[];for(const n of e){const i={...s_e(n),...n},r=i.key??(typeof i.value=="string"?i.value:null),a=i.value??r??null,l={...i,key:r,value:a,sortable:i.sortable??(i.key!=null||!!i.sort),children:i.children?s7(i.children):void 0};t.push(l)}return t}function fM(e,t){const n=tt([]),i=tt([]),r=tt({}),a=tt({}),l=tt({});jr(()=>{const p=(e.headers||Object.keys(e.items[0]??{}).map(M=>({key:M,title:hd(M)}))).slice(),_=n7(p);t?.groupBy?.value.length&&!_.has("data-table-group")&&p.unshift({key:"data-table-group",title:"Group"}),t?.showSelect?.value&&!_.has("data-table-select")&&p.unshift({key:"data-table-select"}),t?.showExpand?.value&&!_.has("data-table-expand")&&p.push({key:"data-table-expand"});const x=s7(p);o_e(x);const T=Math.max(...x.map(M=>hM(M)))+1,k=a_e(x,T);n.value=k.headers,i.value=k.columns;const A=k.headers.flat(1);for(const M of A)M.key&&(M.sortable&&(M.sort&&(r.value[M.key]=M.sort),M.sortRaw&&(a.value[M.key]=M.sortRaw)),M.filter&&(l.value[M.key]=M.filter))});const h={headers:n,columns:i,sortFunctions:r,sortRawFunctions:a,filterFunctions:l};return Rr(e7,h),h}function lS(){const e=Si(e7);if(!e)throw new Error("Missing headers!");return e}const o7=lt({color:String,disableSort:Boolean,fixedHeader:Boolean,multiSort:Boolean,sortAscIcon:{type:In,default:"$sortAsc"},sortDescIcon:{type:In,default:"$sortDesc"},headerProps:{type:Object},sticky:Boolean,...Ts(),...rg(),...VT()},"VDataTableHeaders"),Yp=Mt()({name:"VDataTableHeaders",props:o7(),setup(e,t){let{slots:n}=t;const{t:i}=fr(),{toggleSort:r,sortBy:a,isSorted:l}=Q9(),{someSelected:h,allSelected:s,selectAll:p,showSelectAll:_}=sS(),{columns:x,headers:T}=lS(),{loaderClasses:k}=Ob(e);function A(H,W){if(!(e.sticky||e.fixedHeader)&&!H.fixed)return;const ie=typeof H.fixed=="string"?H.fixed:H.fixed?"start":"none";return{position:"sticky",left:ie==="start"?pn(H.fixedOffset):void 0,right:ie==="end"?pn(H.fixedEndOffset):void 0,top:e.sticky||e.fixedHeader?`calc(var(--v-table-header-height) * ${W})`:void 0}}function M(H,W){H.key==="Enter"&&!e.disableSort&&r(W)}function R(H){const W=a.value.find(ie=>ie.key===H.key);return W?W.order==="asc"?e.sortAscIcon:e.sortDescIcon:e.sortAscIcon}const{backgroundColorClasses:F,backgroundColorStyles:z}=ir(()=>e.color),{displayClasses:G,mobile:Y}=Bl(e),J=me(()=>({headers:T.value,columns:x.value,toggleSort:r,isSorted:l,sortBy:a.value,someSelected:h.value,allSelected:s.value,selectAll:p,getSortIcon:R})),re=me(()=>["v-data-table__th",{"v-data-table__th--sticky":e.sticky||e.fixedHeader},G.value,k.value]),X=H=>{let{column:W,x:ie,y:Q}=H;const te=W.key==="data-table-select"||W.key==="data-table-expand",ke=W.key==="data-table-group"&&W.width===0&&!W.title,Re=At(e.headerProps??{},W.headerProps??{});return ce(cb,At({tag:"th",align:W.align,class:[{"v-data-table__th--sortable":W.sortable&&!e.disableSort,"v-data-table__th--sorted":l(W),"v-data-table__th--fixed":W.fixed},...re.value],style:{width:pn(W.width),minWidth:pn(W.minWidth),maxWidth:pn(W.maxWidth),...A(W,Q)},colspan:W.colspan,rowspan:W.rowspan,fixed:W.fixed,nowrap:W.nowrap,lastFixed:W.lastFixed,firstFixedEnd:W.firstFixedEnd,noPadding:te,empty:ke,tabindex:W.sortable?0:void 0,onClick:W.sortable?()=>r(W):void 0,onKeydown:W.sortable?Be=>M(Be,W):void 0},Re),{default:()=>{const Be=`header.${W.key}`,Je={column:W,selectAll:p,isSorted:l,toggleSort:r,sortBy:a.value,someSelected:h.value,allSelected:s.value,getSortIcon:R};return n[Be]?n[Be](Je):ke?"":W.key==="data-table-select"?n["header.data-table-select"]?.(Je)??(_.value&&ce(ud,{density:e.density,modelValue:s.value,indeterminate:h.value&&!s.value,"onUpdate:modelValue":p},null)):V("div",{class:"v-data-table-header__content"},[V("span",null,[W.title]),W.sortable&&!e.disableSort&&ce(Pi,{key:"icon",class:"v-data-table-header__sort-icon",icon:R(W)},null),e.multiSort&&l(W)&&V("div",{key:"badge",class:_t(["v-data-table-header__sort-badge",...F.value]),style:Xt(z.value)},[a.value.findIndex(nt=>nt.key===W.key)+1])])}})},U=()=>{const H=me(()=>x.value.filter(ie=>ie?.sortable&&!e.disableSort)),W=me(()=>{if(x.value.find(Q=>Q.key==="data-table-select")!=null)return s.value?"$checkboxOn":h.value?"$checkboxIndeterminate":"$checkboxOff"});return ce(cb,At({tag:"th",class:[...re.value],colspan:T.value.length+1},e.headerProps),{default:()=>[V("div",{class:"v-data-table-header__content"},[ce(Vv,{chips:!0,class:"v-data-table__td-sort-select",clearable:!0,density:"default",items:H.value,label:i("$vuetify.dataTable.sortBy"),multiple:e.multiSort,variant:"underlined","onClick:clear":()=>a.value=[],appendIcon:W.value,"onClick:append":()=>p(!s.value)},{chip:ie=>ce(Ds,{onClick:ie.item.raw?.sortable?()=>r(ie.item.raw):void 0,onMousedown:Q=>{Q.preventDefault(),Q.stopPropagation()}},{default:()=>[ie.item.title,ce(Pi,{class:_t(["v-data-table__td-sort-icon",l(ie.item.raw)&&"v-data-table__td-sort-icon-active"]),icon:R(ie.item.raw),size:"small"},null)]})})])]})};zt(()=>Y.value?V("tr",null,[ce(U,null,null)]):V(an,null,[n.headers?n.headers(J.value):T.value.map((H,W)=>V("tr",null,[H.map((ie,Q)=>ce(X,{column:ie,x:Q,y:W},null))])),e.loading&&V("tr",{class:"v-data-table-progress"},[V("th",{colspan:x.value.length},[ce(Vb,{name:"v-data-table-progress",absolute:!0,active:!0,color:typeof e.loading=="boolean"?void 0:e.loading,indeterminate:!0},{default:n.loader})])])]))}}),a7=lt({item:{type:Object,required:!0},groupCollapseIcon:{type:In,default:"$tableGroupCollapse"},groupExpandIcon:{type:In,default:"$tableGroupExpand"},...Ts()},"VDataTableGroupHeaderRow"),l_e=Mt()({name:"VDataTableGroupHeaderRow",props:a7(),setup(e,t){let{slots:n}=t;const{isGroupOpen:i,toggleGroup:r,extractRows:a}=j9(),{isSelected:l,isSomeSelected:h,select:s}=sS(),{columns:p}=lS(),_=me(()=>a([e.item])),x=$e(()=>p.value.length-(p.value.some(T=>T.key==="data-table-select")?1:0));return()=>V("tr",{class:"v-data-table-group-header-row",style:{"--v-data-table-group-header-row-depth":e.item.depth}},[p.value.map(T=>{if(T.key==="data-table-group"){const k=i(e.item)?e.groupCollapseIcon:e.groupExpandIcon,A=()=>r(e.item);return n["data-table-group"]?.({item:e.item,count:_.value.length,props:{icon:k,onClick:A}})??ce(cb,{class:"v-data-table-group-header-row__column",colspan:x.value},{default:()=>[ce(mi,{size:"small",variant:"text",icon:k,onClick:A},null),V("span",null,[e.item.value]),V("span",null,[Bn("("),_.value.length,Bn(")")])]})}else if(T.key==="data-table-select"){const k=l(_.value),A=h(_.value)&&!k,M=R=>s(_.value,R);return n["data-table-select"]?.({props:{modelValue:k,indeterminate:A,"onUpdate:modelValue":M}})??ce(cb,{class:"v-data-table__td--select-row",noPadding:!0},{default:()=>[ce(ud,{density:e.density,modelValue:k,indeterminate:A,"onUpdate:modelValue":M},null)]})}return""})])}}),l7=lt({index:Number,item:Object,cellProps:[Object,Function],collapseIcon:{type:In,default:"$collapse"},expandIcon:{type:In,default:"$expand"},onClick:zo(),onContextmenu:zo(),onDblclick:zo(),...Ts(),...rg()},"VDataTableRow"),mM=Mt()({name:"VDataTableRow",props:l7(),setup(e,t){let{slots:n}=t;const{displayClasses:i,mobile:r}=Bl(e,"v-data-table__tr"),{isSelected:a,toggleSelect:l,someSelected:h,allSelected:s,selectAll:p}=sS(),{isExpanded:_,toggleExpand:x}=$9(),{toggleSort:T,sortBy:k,isSorted:A}=Q9(),{columns:M}=lS();zt(()=>V("tr",{class:_t(["v-data-table__tr",{"v-data-table__tr--clickable":!!(e.onClick||e.onContextmenu||e.onDblclick)},i.value]),onClick:e.onClick,onContextmenu:e.onContextmenu,onDblclick:e.onDblclick},[e.item&&M.value.map((R,F)=>{const z=e.item,G=`item.${R.key}`,Y=`header.${R.key}`,J={index:e.index,item:z.raw,internalItem:z,value:Wp(z.columns,R.key),column:R,isSelected:a,toggleSelect:l,isExpanded:_,toggleExpand:x},re={column:R,selectAll:p,isSorted:A,toggleSort:T,sortBy:k.value,someSelected:h.value,allSelected:s.value,getSortIcon:()=>""},X=typeof e.cellProps=="function"?e.cellProps({index:J.index,item:J.item,internalItem:J.internalItem,value:J.value,column:R}):e.cellProps,U=typeof R.cellProps=="function"?R.cellProps({index:J.index,item:J.item,internalItem:J.internalItem,value:J.value}):R.cellProps,H=R.key==="data-table-select"||R.key==="data-table-expand",W=R.key==="data-table-group"&&R.width===0&&!R.title;return ce(cb,At({align:R.align,indent:R.intent,class:{"v-data-table__td--expanded-row":R.key==="data-table-expand","v-data-table__td--select-row":R.key==="data-table-select"},fixed:R.fixed,fixedOffset:R.fixedOffset,fixedEndOffset:R.fixedEndOffset,lastFixed:R.lastFixed,firstFixedEnd:R.firstFixedEnd,maxWidth:r.value?void 0:R.maxWidth,noPadding:H,empty:W,nowrap:R.nowrap,width:r.value?void 0:R.width},X,U),{default:()=>{if(R.key==="data-table-select")return n["item.data-table-select"]?.({...J,props:{disabled:!z.selectable,modelValue:a([z]),onClick:ra(()=>l(z),["stop"])}})??ce(ud,{disabled:!z.selectable,density:e.density,modelValue:a([z]),onClick:ra(Q=>l(z,e.index,Q),["stop"])},null);if(R.key==="data-table-expand")return n["item.data-table-expand"]?.({...J,props:{icon:_(z)?e.collapseIcon:e.expandIcon,size:"small",variant:"text",onClick:ra(()=>x(z),["stop"])}})??ce(mi,{icon:_(z)?e.collapseIcon:e.expandIcon,size:"small",variant:"text",onClick:ra(()=>x(z),["stop"])},null);if(n[G]&&!r.value)return n[G](J);const ie=en(J.value);return r.value?V(an,null,[V("div",{class:"v-data-table__td-title"},[n[Y]?.(re)??R.title]),V("div",{class:"v-data-table__td-value"},[n[G]?.(J)??ie])]):ie}})})]))}}),c7=lt({loading:[Boolean,String],loadingText:{type:String,default:"$vuetify.dataIterator.loadingText"},hideNoData:Boolean,items:{type:Array,default:()=>[]},noDataText:{type:String,default:"$vuetify.noDataText"},rowProps:[Object,Function],cellProps:[Object,Function],...Vl(l7(),["collapseIcon","expandIcon","density"]),...Vl(a7(),["groupCollapseIcon","groupExpandIcon","density"]),...rg()},"VDataTableRows"),Zp=Mt()({name:"VDataTableRows",inheritAttrs:!1,props:c7(),setup(e,t){let{attrs:n,slots:i}=t;const{columns:r}=lS(),{expandOnClick:a,toggleExpand:l,isExpanded:h}=$9(),{isSelected:s,toggleSelect:p}=sS(),{toggleGroup:_,isGroupOpen:x}=j9(),{t:T}=fr(),{mobile:k}=Bl(e);return zt(()=>{const A=Vl(e,["groupCollapseIcon","groupExpandIcon","density"]);return e.loading&&(!e.items.length||i.loading)?V("tr",{class:"v-data-table-rows-loading",key:"loading"},[V("td",{colspan:r.value.length},[i.loading?.()??T(e.loadingText)])]):!e.loading&&!e.items.length&&!e.hideNoData?V("tr",{class:"v-data-table-rows-no-data",key:"no-data"},[V("td",{colspan:r.value.length},[i["no-data"]?.()??T(e.noDataText)])]):V(an,null,[e.items.map((M,R)=>{if(M.type==="group"){const G={index:R,item:M,columns:r.value,isExpanded:h,toggleExpand:l,isSelected:s,toggleSelect:p,toggleGroup:_,isGroupOpen:x};return i["group-header"]?i["group-header"](G):ce(l_e,At({key:`group-header_${M.id}`,item:M},Q5(n,":groupHeader",()=>G),A),i)}if(M.type==="group-summary"){const G={index:R,item:M,columns:r.value,toggleGroup:_};return i["group-summary"]?.(G)??""}const F={index:R,item:M.raw,internalItem:M,columns:r.value,isExpanded:h,toggleExpand:l,isSelected:s,toggleSelect:p},z={...F,props:At({key:`item_${M.key??M.index}`,onClick:a.value?()=>{l(M)}:void 0,index:R,item:M,cellProps:e.cellProps,collapseIcon:e.collapseIcon,expandIcon:e.expandIcon,density:e.density,mobile:k.value},Q5(n,":row",()=>F),typeof e.rowProps=="function"?e.rowProps({item:F.item,index:F.index,internalItem:F.internalItem}):e.rowProps)};return V(an,{key:z.props.key},[i.item?i.item(z):ce(mM,z.props,i),h(M)&&i["expanded-row"]?.(F)])})])}),{}}}),u7=lt({fixedHeader:Boolean,fixedFooter:Boolean,height:[Number,String],hover:Boolean,striped:{type:String,default:null,validator:e=>["even","odd"].includes(e)},...Tn(),...Ts(),...ti(),...Mi()},"VTable"),Jp=Mt()({name:"VTable",props:u7(),setup(e,t){let{slots:n,emit:i}=t;const{themeClasses:r}=Qi(e),{densityClasses:a}=qa(e);return zt(()=>ce(e.tag,{class:_t(["v-table",{"v-table--fixed-height":!!e.height,"v-table--fixed-header":e.fixedHeader,"v-table--fixed-footer":e.fixedFooter,"v-table--has-top":!!n.top,"v-table--has-bottom":!!n.bottom,"v-table--hover":e.hover,"v-table--striped-even":e.striped==="even","v-table--striped-odd":e.striped==="odd"},r.value,a.value,e.class]),style:Xt(e.style)},{default:()=>[n.top?.(),n.default?V("div",{class:"v-table__wrapper",style:{height:pn(e.height)}},[V("table",null,[n.default()])]):n.wrapper?.(),n.bottom?.()]})),{}}}),c_e=lt({items:{type:Array,default:()=>[]},itemValue:{type:[String,Array,Function],default:"id"},itemSelectable:{type:[String,Array,Function],default:null},rowProps:[Object,Function],cellProps:[Object,Function],returnObject:Boolean},"DataTable-items");function u_e(e,t,n,i){const r=e.returnObject?t:Ls(t,e.itemValue),a=Ls(t,e.itemSelectable,!0),l=i.reduce((h,s)=>(s.key!=null&&(h[s.key]=Ls(t,s.value)),h),{});return{type:"item",key:e.returnObject?Ls(t,e.itemValue):r,index:n,value:r,selectable:a,columns:l,raw:t}}function d_e(e,t,n){return t.map((i,r)=>u_e(e,i,r,n))}function pM(e,t){return{items:me(()=>d_e(e,e.items,t.value))}}const gM=lt({...c7(),hideDefaultBody:Boolean,hideDefaultFooter:Boolean,hideDefaultHeader:Boolean,width:[String,Number],search:String,...z9(),...sM(),...n_e(),...c_e(),...X9(),...Z9(),...o7(),...u7()},"DataTable"),h_e=lt({...aM(),...gM(),...I_(),...dM()},"VDataTable"),f_e=Mt()({name:"VDataTable",props:h_e(),emits:{"update:modelValue":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:groupBy":e=>!0,"update:expanded":e=>!0,"update:currentItems":e=>!0},setup(e,t){let{attrs:n,slots:i}=t;const{groupBy:r}=oM(e),{sortBy:a,multiSort:l,mustSort:h}=oS(e),{page:s,itemsPerPage:p}=lM(e),{disableSort:_}=f_(e),{columns:x,headers:T,sortFunctions:k,sortRawFunctions:A,filterFunctions:M}=fM(e,{groupBy:r,showSelect:$e(()=>e.showSelect),showExpand:$e(()=>e.showExpand)}),{items:R}=pM(e,x),F=$e(()=>e.search),{filteredItems:z}=A_(e,R,F,{transform:ct=>ct.columns,customKeyFilter:M}),{toggleSort:G}=aS({sortBy:a,multiSort:l,mustSort:h,page:s}),{sortByWithGroups:Y,opened:J,extractRows:re,isGroupOpen:X,toggleGroup:U}=tS({groupBy:r,sortBy:a,disableSort:_}),{sortedItems:H}=uM(e,z,Y,{transform:ct=>({...ct.raw,...ct.columns}),sortFunctions:k,sortRawFunctions:A}),{flatItems:W}=nS(H,r,J,()=>!!i["group-summary"]),ie=me(()=>W.value.length),{startIndex:Q,stopIndex:te,pageCount:ke,setItemsPerPage:Re}=cM({page:s,itemsPerPage:p,itemsLength:ie}),{paginatedItems:Be}=q9({items:W,startIndex:Q,stopIndex:te,itemsPerPage:p}),Je=me(()=>re(Be.value)),{isSelected:nt,select:De,selectAll:Ge,toggleSelect:Ee,someSelected:it,allSelected:ot}=rS(e,{allItems:R,currentPage:Je}),{isExpanded:mt,toggleExpand:Pt}=eS(e);iS({page:s,itemsPerPage:p,sortBy:a,groupBy:r,search:F}),ts({VDataTableRows:{hideNoData:$e(()=>e.hideNoData),noDataText:$e(()=>e.noDataText),loading:$e(()=>e.loading),loadingText:$e(()=>e.loadingText)}});const $t=me(()=>({page:s.value,itemsPerPage:p.value,sortBy:a.value,pageCount:ke.value,toggleSort:G,setItemsPerPage:Re,someSelected:it.value,allSelected:ot.value,isSelected:nt,select:De,selectAll:Ge,toggleSelect:Ee,isExpanded:mt,toggleExpand:Pt,isGroupOpen:X,toggleGroup:U,items:Je.value.map(ct=>ct.raw),internalItems:Je.value,groupedItems:Be.value,columns:x.value,headers:T.value}));return zt(()=>{const ct=lb.filterProps(e),ht=Yp.filterProps(e),Qe=Zp.filterProps(e),kt=Jp.filterProps(e);return ce(Jp,At({class:["v-data-table",{"v-data-table--show-select":e.showSelect,"v-data-table--loading":e.loading},e.class],style:e.style},kt,{fixedHeader:e.fixedHeader||e.sticky}),{top:()=>i.top?.($t.value),default:()=>i.default?i.default($t.value):V(an,null,[i.colgroup?.($t.value),!e.hideDefaultHeader&&V("thead",{key:"thead"},[ce(Yp,ht,i)]),i.thead?.($t.value),!e.hideDefaultBody&&V("tbody",null,[i["body.prepend"]?.($t.value),i.body?i.body($t.value):ce(Zp,At(n,Qe,{items:Be.value}),i),i["body.append"]?.($t.value)]),i.tbody?.($t.value),i.tfoot?.($t.value)]),bottom:()=>i.bottom?i.bottom($t.value):!e.hideDefaultFooter&&V(an,null,[ce(oc,null,null),ce(lb,ct,{prepend:i["footer.prepend"]})])})}),{}}}),m_e=lt({...hr(gM(),["hideDefaultFooter"]),...sM(),...s8(),...I_()},"VDataTableVirtual"),p_e=Mt()({name:"VDataTableVirtual",props:m_e(),emits:{"update:modelValue":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:groupBy":e=>!0,"update:expanded":e=>!0},setup(e,t){let{attrs:n,slots:i}=t;const{groupBy:r}=oM(e),{sortBy:a,multiSort:l,mustSort:h}=oS(e),{disableSort:s}=f_(e),{columns:p,headers:_,filterFunctions:x,sortFunctions:T,sortRawFunctions:k}=fM(e,{groupBy:r,showSelect:$e(()=>e.showSelect),showExpand:$e(()=>e.showExpand)}),{items:A}=pM(e,p),M=$e(()=>e.search),{filteredItems:R}=A_(e,A,M,{transform:kt=>kt.columns,customKeyFilter:x}),{toggleSort:F}=aS({sortBy:a,multiSort:l,mustSort:h}),{sortByWithGroups:z,opened:G,extractRows:Y,isGroupOpen:J,toggleGroup:re}=tS({groupBy:r,sortBy:a,disableSort:s}),{sortedItems:X}=uM(e,R,z,{transform:kt=>({...kt.raw,...kt.columns}),sortFunctions:T,sortRawFunctions:k}),{flatItems:U}=nS(X,r,G,()=>!!i["group-summary"]),H=me(()=>Y(U.value)),{isSelected:W,select:ie,selectAll:Q,toggleSelect:te,someSelected:ke,allSelected:Re}=rS(e,{allItems:H,currentPage:H}),{isExpanded:Be,toggleExpand:Je}=eS(e),{containerRef:nt,markerRef:De,paddingTop:Ge,paddingBottom:Ee,computedItems:it,handleItemResize:ot,handleScroll:mt,handleScrollend:Pt,calculateVisibleItems:$t,scrollToIndex:ct}=o8(e,U),ht=me(()=>it.value.map(kt=>kt.raw));iS({sortBy:a,page:tn(1),itemsPerPage:tn(-1),groupBy:r,search:M}),ts({VDataTableRows:{hideNoData:$e(()=>e.hideNoData),noDataText:$e(()=>e.noDataText),loading:$e(()=>e.loading),loadingText:$e(()=>e.loadingText)}});const Qe=me(()=>({sortBy:a.value,toggleSort:F,someSelected:ke.value,allSelected:Re.value,isSelected:W,select:ie,selectAll:Q,toggleSelect:te,isExpanded:Be,toggleExpand:Je,isGroupOpen:J,toggleGroup:re,items:H.value.map(kt=>kt.raw),internalItems:H.value,groupedItems:U.value,columns:p.value,headers:_.value}));return zt(()=>{const kt=Yp.filterProps(e),Ue=Zp.filterProps(e),ue=Jp.filterProps(e);return ce(Jp,At({class:["v-data-table",{"v-data-table--loading":e.loading},e.class],style:e.style},ue,{fixedHeader:e.fixedHeader||e.sticky}),{top:()=>i.top?.(Qe.value),wrapper:()=>V("div",{ref:nt,onScrollPassive:mt,onScrollend:Pt,class:"v-table__wrapper",style:{height:pn(e.height)}},[V("table",null,[i.colgroup?.(Qe.value),!e.hideDefaultHeader&&V("thead",{key:"thead"},[ce(Yp,kt,i)]),i.thead?.(Qe.value),!e.hideDefaultBody&&V("tbody",{key:"tbody"},[V("tr",{ref:De,style:{height:pn(Ge.value),border:0}},[V("td",{colspan:p.value.length,style:{height:0,border:0}},null)]),i["body.prepend"]?.(Qe.value),ce(Zp,At(n,Ue,{items:ht.value}),{...i,item:we=>ce(r8,{key:we.internalItem.index,renderless:!0,"onUpdate:height":fe=>ot(we.internalItem.index,fe)},{default:fe=>{let{itemRef:Ie}=fe;return i.item?.({...we,itemRef:Ie})??ce(mM,At(we.props,{ref:Ie,key:we.internalItem.index,index:we.internalItem.index}),i)}})}),i["body.append"]?.(Qe.value),V("tr",{style:{height:pn(Ee.value),border:0}},[V("td",{colspan:p.value.length,style:{height:0,border:0}},null)])]),i.tbody?.(Qe.value),i.tfoot?.(Qe.value)])]),bottom:()=>i.bottom?.(Qe.value)})}),{calculateVisibleItems:$t,scrollToIndex:ct}}}),g_e=lt({itemsLength:{type:[Number,String],required:!0},...aM(),...gM(),...dM()},"VDataTableServer"),v_e=Mt()({name:"VDataTableServer",props:g_e(),emits:{"update:modelValue":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:expanded":e=>!0,"update:groupBy":e=>!0},setup(e,t){let{attrs:n,slots:i}=t;const{groupBy:r}=oM(e),{sortBy:a,multiSort:l,mustSort:h}=oS(e),{page:s,itemsPerPage:p}=lM(e),{disableSort:_}=f_(e),x=me(()=>parseInt(e.itemsLength,10)),{columns:T,headers:k}=fM(e,{groupBy:r,showSelect:$e(()=>e.showSelect),showExpand:$e(()=>e.showExpand)}),{items:A}=pM(e,T),{toggleSort:M}=aS({sortBy:a,multiSort:l,mustSort:h,page:s}),{opened:R,isGroupOpen:F,toggleGroup:z,extractRows:G}=tS({groupBy:r,sortBy:a,disableSort:_}),{pageCount:Y,setItemsPerPage:J}=cM({page:s,itemsPerPage:p,itemsLength:x}),{flatItems:re}=nS(A,r,R,()=>!!i["group-summary"]),{isSelected:X,select:U,selectAll:H,toggleSelect:W,someSelected:ie,allSelected:Q}=rS(e,{allItems:A,currentPage:A}),{isExpanded:te,toggleExpand:ke}=eS(e),Re=me(()=>G(A.value));iS({page:s,itemsPerPage:p,sortBy:a,groupBy:r,search:$e(()=>e.search)}),Rr("v-data-table",{toggleSort:M,sortBy:a}),ts({VDataTableRows:{hideNoData:$e(()=>e.hideNoData),noDataText:$e(()=>e.noDataText),loading:$e(()=>e.loading),loadingText:$e(()=>e.loadingText)}});const Be=me(()=>({page:s.value,itemsPerPage:p.value,sortBy:a.value,pageCount:Y.value,toggleSort:M,setItemsPerPage:J,someSelected:ie.value,allSelected:Q.value,isSelected:X,select:U,selectAll:H,toggleSelect:W,isExpanded:te,toggleExpand:ke,isGroupOpen:F,toggleGroup:z,items:Re.value.map(Je=>Je.raw),internalItems:Re.value,groupedItems:re.value,columns:T.value,headers:k.value}));zt(()=>{const Je=lb.filterProps(e),nt=Yp.filterProps(e),De=Zp.filterProps(e),Ge=Jp.filterProps(e);return ce(Jp,At({class:["v-data-table",{"v-data-table--loading":e.loading},e.class],style:e.style},Ge,{fixedHeader:e.fixedHeader||e.sticky}),{top:()=>i.top?.(Be.value),default:()=>i.default?i.default(Be.value):V(an,null,[i.colgroup?.(Be.value),!e.hideDefaultHeader&&V("thead",{key:"thead",class:"v-data-table__thead",role:"rowgroup"},[ce(Yp,nt,i)]),i.thead?.(Be.value),!e.hideDefaultBody&&V("tbody",{class:"v-data-table__tbody",role:"rowgroup"},[i["body.prepend"]?.(Be.value),i.body?i.body(Be.value):ce(Zp,At(n,De,{items:re.value}),i),i["body.append"]?.(Be.value)]),i.tbody?.(Be.value),i.tfoot?.(Be.value)]),bottom:()=>i.bottom?i.bottom(Be.value):!e.hideDefaultFooter&&V(an,null,[ce(oc,null,null),ce(lb,Je,{prepend:i["footer.prepend"]})])})})}}),d7=lt({active:{type:[String,Array],default:void 0},controlHeight:[Number,String],disabled:{type:[Boolean,String,Array],default:null},nextIcon:{type:In,default:"$next"},prevIcon:{type:In,default:"$prev"},modeIcon:{type:In,default:"$subgroup"},text:String,viewMode:{type:String,default:"month"}},"VDatePickerControls"),pI=Mt()({name:"VDatePickerControls",props:d7(),emits:{"click:year":()=>!0,"click:month":()=>!0,"click:prev":()=>!0,"click:next":()=>!0,"click:text":()=>!0},setup(e,t){let{emit:n}=t;const{t:i}=fr(),r=me(()=>Array.isArray(e.disabled)?e.disabled.includes("text"):!!e.disabled),a=me(()=>Array.isArray(e.disabled)?e.disabled.includes("mode"):!!e.disabled),l=me(()=>Array.isArray(e.disabled)?e.disabled.includes("prev"):!!e.disabled),h=me(()=>Array.isArray(e.disabled)?e.disabled.includes("next"):!!e.disabled);function s(){n("click:prev")}function p(){n("click:next")}function _(){n("click:year")}function x(){n("click:month")}return zt(()=>V("div",{class:_t(["v-date-picker-controls"]),style:{"--v-date-picker-controls-height":pn(e.controlHeight)}},[ce(mi,{class:"v-date-picker-controls__month-btn","data-testid":"month-btn",disabled:r.value,text:e.text,variant:"text",rounded:!0,onClick:x},null),ce(mi,{class:"v-date-picker-controls__mode-btn","data-testid":"year-btn",disabled:a.value,density:"comfortable",icon:e.modeIcon,variant:"text","aria-label":i("$vuetify.datePicker.ariaLabel.selectYear"),onClick:_},null),ce(S8,null,null),V("div",{class:"v-date-picker-controls__month"},[ce(mi,{"data-testid":"prev-month",disabled:l.value,density:"comfortable",icon:e.prevIcon,variant:"text","aria-label":i("$vuetify.datePicker.ariaLabel.previousMonth"),onClick:s},null),ce(mi,{"data-testid":"next-month",disabled:h.value,icon:e.nextIcon,density:"comfortable",variant:"text","aria-label":i("$vuetify.datePicker.ariaLabel.nextMonth"),onClick:p},null)])])),{}}}),__e=lt({appendIcon:In,color:String,header:String,transition:String,onClick:zo()},"VDatePickerHeader"),gI=Mt()({name:"VDatePickerHeader",props:__e(),emits:{click:()=>!0,"click:append":()=>!0},setup(e,t){let{emit:n,slots:i}=t;const{backgroundColorClasses:r,backgroundColorStyles:a}=ir(()=>e.color);function l(){n("click")}function h(){n("click:append")}return zt(()=>{const s=!!(i.default||e.header),p=!!(i.append||e.appendIcon);return V("div",{class:_t(["v-date-picker-header",{"v-date-picker-header--clickable":!!e.onClick},r.value]),style:Xt(a.value),onClick:l},[i.prepend&&V("div",{key:"prepend",class:"v-date-picker-header__prepend"},[i.prepend()]),s&&ce(Na,{key:"content",name:e.transition},{default:()=>[V("div",{key:e.header,class:"v-date-picker-header__content"},[i.default?.()??e.header])]}),p&&V("div",{class:"v-date-picker-header__append"},[i.append?ce(ui,{key:"append-defaults",disabled:!e.appendIcon,defaults:{VBtn:{icon:e.appendIcon,variant:"text"}}},{default:()=>[i.append?.()]}):ce(mi,{key:"append-btn",icon:e.appendIcon,variant:"text",onClick:h},null)])])}),{}}}),y_e=lt({allowedDates:[Array,Function],disabled:{type:Boolean,default:null},displayValue:null,modelValue:Array,month:[Number,String],max:null,min:null,showAdjacentMonths:Boolean,year:[Number,String],weekdays:{type:Array,default:()=>[0,1,2,3,4,5,6]},weeksInMonth:{type:String,default:"dynamic"},firstDayOfWeek:{type:[Number,String],default:void 0},firstDayOfYear:{type:[Number,String],default:void 0},weekdayFormat:String},"calendar");function b_e(e){const t=Db(),n=Pn(e,"modelValue",[],k=>Xr(k).map(A=>t.date(A))),i=me(()=>e.displayValue?t.date(e.displayValue):n.value.length>0?t.date(n.value[0]):e.min?t.date(e.min):Array.isArray(e.allowedDates)?t.date(e.allowedDates[0]):t.date()),r=Pn(e,"year",void 0,k=>{const A=k!=null?Number(k):t.getYear(i.value);return t.startOfYear(t.setYear(t.date(),A))},k=>t.getYear(k)),a=Pn(e,"month",void 0,k=>{const A=k!=null?Number(k):t.getMonth(i.value),M=t.setYear(t.startOfMonth(t.date()),t.getYear(r.value));return t.setMonth(M,A)},k=>t.getMonth(k)),l=me(()=>{const k=t.toJsDate(t.startOfWeek(t.date(),e.firstDayOfWeek)).getDay();return t.getWeekdays(e.firstDayOfWeek,e.weekdayFormat).filter((A,M)=>e.weekdays.includes((M+k)%7))}),h=me(()=>{const k=t.getWeekArray(a.value,e.firstDayOfWeek),A=k.flat(),M=42;if(e.weeksInMonth==="static"&&A.length<M){const R=A[A.length-1];let F=[];for(let z=1;z<=M-A.length;z++)F.push(t.addDays(R,z)),z%7===0&&(k.push(F),F=[])}return k});function s(k,A){return k.filter(M=>e.weekdays.includes(t.toJsDate(M).getDay())).map((M,R)=>{const F=t.toISO(M),z=!t.isSameMonth(M,a.value),G=t.isSameDay(M,t.startOfMonth(a.value)),Y=t.isSameDay(M,t.endOfMonth(a.value)),J=t.isSameDay(M,a.value),re=e.weekdays.length;return{date:M,formatted:t.format(M,"keyboardDate"),isAdjacent:z,isDisabled:T(M),isEnd:Y,isHidden:z&&!e.showAdjacentMonths,isSame:J,isSelected:n.value.some(X=>t.isSameDay(M,X)),isStart:G,isToday:t.isSameDay(M,A),isWeekEnd:R%re===re-1,isWeekStart:R%re===0,isoDate:F,localized:t.format(M,"dayOfMonth"),month:t.getMonth(M),year:t.getYear(M)}})}const p=me(()=>{const k=t.startOfWeek(i.value,e.firstDayOfWeek),A=[];for(let R=0;R<=6;R++)A.push(t.addDays(k,R));const M=t.date();return s(A,M)}),_=me(()=>{const k=h.value.flat(),A=t.date();return s(k,A)}),x=me(()=>h.value.map(k=>k.length?t.getWeek(k[0],e.firstDayOfWeek,e.firstDayOfYear):null));function T(k){if(e.disabled)return!0;const A=t.date(k);return e.min&&t.isBefore(t.endOfDay(A),t.date(e.min))||e.max&&t.isAfter(A,t.date(e.max))?!0:Array.isArray(e.allowedDates)&&e.allowedDates.length>0?!e.allowedDates.some(M=>t.isSameDay(t.date(M),A)):typeof e.allowedDates=="function"?!e.allowedDates(A):!1}return{displayValue:i,daysInMonth:_,daysInWeek:p,genDays:s,model:n,weeksInMonth:h,weekdayLabels:l,weekNumbers:x}}const h7=lt({color:String,hideWeekdays:Boolean,multiple:[Boolean,Number,String],showWeek:Boolean,transition:{type:String,default:"picker-transition"},reverseTransition:{type:String,default:"picker-reverse-transition"},...hr(y_e(),["displayValue"])},"VDatePickerMonth"),vI=Mt()({name:"VDatePickerMonth",props:h7(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0},setup(e,t){let{emit:n,slots:i}=t;const r=tt(),{t:a}=fr(),{daysInMonth:l,model:h,weekNumbers:s,weekdayLabels:p}=b_e(e),_=Db(),x=tn(),T=tn(),k=tn(!1),A=$e(()=>k.value?e.reverseTransition:e.transition);e.multiple==="range"&&h.value.length>0&&(x.value=h.value[0],h.value.length>1&&(T.value=h.value[h.value.length-1]));const M=me(()=>{const Y=["number","string"].includes(typeof e.multiple)?Number(e.multiple):1/0;return h.value.length>=Y});Yt(l,(Y,J)=>{J&&(k.value=_.isBefore(Y[0].date,J[0].date))});function R(Y){const J=_.startOfDay(Y);if(h.value.length===0?x.value=void 0:h.value.length===1&&(x.value=h.value[0],T.value=void 0),!x.value)x.value=J,h.value=[x.value];else if(T.value)x.value=Y,T.value=void 0,h.value=[x.value];else{if(_.isSameDay(J,x.value)){x.value=void 0,h.value=[];return}else _.isBefore(J,x.value)?(T.value=_.endOfDay(x.value),x.value=J):T.value=_.endOfDay(J);h.value=Gie(_,x.value,T.value)}}function F(Y){const J=_.format(Y.date,"fullDateWithWeekday"),re=Y.isToday?"currentDate":"selectDate";return a(`$vuetify.datePicker.ariaLabel.${re}`,J)}function z(Y){const J=h.value.findIndex(re=>_.isSameDay(re,Y));if(J===-1)h.value=[...h.value,Y];else{const re=[...h.value];re.splice(J,1),h.value=re}}function G(Y){e.multiple==="range"?R(Y):e.multiple?z(Y):h.value=[Y]}zt(()=>V("div",{class:"v-date-picker-month",style:{"--v-date-picker-days-in-week":e.weekdays.length}},[e.showWeek&&V("div",{key:"weeks",class:"v-date-picker-month__weeks"},[!e.hideWeekdays&&V("div",{key:"hide-week-days",class:"v-date-picker-month__day"},[Bn("")]),s.value.map(Y=>V("div",{class:_t(["v-date-picker-month__day","v-date-picker-month__day--adjacent"])},[Y]))]),ce(Na,{name:A.value},{default:()=>[V("div",{ref:r,key:l.value[0].date?.toString(),class:"v-date-picker-month__days"},[!e.hideWeekdays&&p.value.map(Y=>V("div",{class:_t(["v-date-picker-month__day","v-date-picker-month__weekday"])},[Y])),l.value.map((Y,J)=>{const re={props:{class:"v-date-picker-month__day-btn",color:Y.isSelected||Y.isToday?e.color:void 0,disabled:Y.isDisabled,icon:!0,ripple:!1,text:Y.localized,variant:Y.isSelected?"flat":Y.isToday?"outlined":"text","aria-label":F(Y),"aria-current":Y.isToday?"date":void 0,onClick:()=>G(Y.date)},item:Y,i:J};return M.value&&!Y.isSelected&&(Y.isDisabled=!0),V("div",{class:_t(["v-date-picker-month__day",{"v-date-picker-month__day--adjacent":Y.isAdjacent,"v-date-picker-month__day--hide-adjacent":Y.isHidden,"v-date-picker-month__day--selected":Y.isSelected,"v-date-picker-month__day--week-end":Y.isWeekEnd,"v-date-picker-month__day--week-start":Y.isWeekStart}]),"data-v-date":Y.isDisabled?void 0:Y.isoDate},[(e.showAdjacentMonths||!Y.isAdjacent)&&(i.day?.(re)??ce(mi,re.props,null))])})])]})]))}}),f7=lt({color:String,height:[String,Number],min:null,max:null,modelValue:Number,year:Number,allowedMonths:[Array,Function]},"VDatePickerMonths"),_I=Mt()({name:"VDatePickerMonths",props:f7(),emits:{"update:modelValue":e=>!0},setup(e,t){let{emit:n,slots:i}=t;const r=Db(),a=Pn(e,"modelValue"),l=me(()=>{let s=r.startOfYear(r.date());return e.year&&(s=r.setYear(s,e.year)),rc(12).map(p=>{const _=r.format(s,"monthShort"),x=r.format(s,"month"),T=!!(!h(p)||e.min&&r.isAfter(r.startOfMonth(r.date(e.min)),s)||e.max&&r.isAfter(s,r.startOfMonth(r.date(e.max))));return s=r.getNextMonth(s),{isDisabled:T,text:_,label:x,value:p}})});jr(()=>{a.value=a.value??r.getMonth(r.date())});function h(s){return Array.isArray(e.allowedMonths)&&e.allowedMonths.length?e.allowedMonths.includes(s):typeof e.allowedMonths=="function"?e.allowedMonths(s):!0}return zt(()=>V("div",{class:"v-date-picker-months",style:{height:pn(e.height)}},[V("div",{class:"v-date-picker-months__content"},[l.value.map((s,p)=>{const _={active:a.value===p,ariaLabel:s.label,color:a.value===p?e.color:void 0,disabled:s.isDisabled,rounded:!0,text:s.text,variant:a.value===s.value?"flat":"text",onClick:()=>x(p)};function x(T){if(a.value===T){n("update:modelValue",a.value);return}a.value=T}return i.month?.({month:s,i:p,props:_})??ce(mi,At({key:"month"},_),null)})])])),{}}}),m7=lt({color:String,height:[String,Number],min:null,max:null,modelValue:Number,allowedYears:[Array,Function]},"VDatePickerYears"),yI=Mt()({name:"VDatePickerYears",props:m7(),directives:{vIntersect:gu},emits:{"update:modelValue":e=>!0},setup(e,t){let{emit:n,slots:i}=t;const r=Db(),a=Pn(e,"modelValue"),l=me(()=>{const _=r.getYear(r.date());let x=_-100,T=_+52;e.min&&(x=r.getYear(r.date(e.min))),e.max&&(T=r.getYear(r.date(e.max)));let k=r.startOfYear(r.date());return k=r.setYear(k,x),rc(T-x+1,x).map(A=>{const M=r.format(k,"year");return k=r.setYear(k,r.getYear(k)+1),{text:M,value:A,isDisabled:!p(A)}})});jr(()=>{a.value=a.value??r.getYear(r.date())});const h=Cw();function s(){h.el?.focus(),h.el?.scrollIntoView({block:"center"})}function p(_){return Array.isArray(e.allowedYears)&&e.allowedYears.length?e.allowedYears.includes(_):typeof e.allowedYears=="function"?e.allowedYears(_):!0}return zt(()=>Li(V("div",{class:"v-date-picker-years",style:{height:pn(e.height)}},[V("div",{class:"v-date-picker-years__content"},[l.value.map((_,x)=>{const T={ref:a.value===_.value?h:void 0,active:a.value===_.value,color:a.value===_.value?e.color:void 0,rounded:!0,text:_.text,disabled:_.isDisabled,variant:a.value===_.value?"flat":"text",onClick:()=>{if(a.value===_.value){n("update:modelValue",a.value);return}a.value=_.value}};return i.year?.({year:_,i:x,props:T})??ce(mi,At({key:"month"},T),null)})])]),[[gu,{handler:s},null,{once:!0}]])),{}}}),x_e=lt({header:{type:String,default:"$vuetify.datePicker.header"},headerColor:String,...d7(),...h7({weeksInMonth:"static"}),...hr(f7(),["modelValue"]),...hr(m7(),["modelValue"]),...QT({title:"$vuetify.datePicker.title"}),modelValue:null},"VDatePicker"),w_e=Mt()({name:"VDatePicker",props:x_e(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0,"update:viewMode":e=>!0},setup(e,t){let{emit:n,slots:i}=t;const r=Db(),{t:a}=fr(),{rtlClasses:l}=qs(),h=Pn(e,"modelValue",void 0,nt=>Xr(nt).map(De=>r.date(De)),nt=>e.multiple?nt:nt[0]),s=Pn(e,"viewMode"),p=me(()=>{const nt=r.date(e.min);return e.min&&r.isValid(nt)?nt:null}),_=me(()=>{const nt=r.date(e.max);return e.max&&r.isValid(nt)?nt:null}),x=me(()=>{const nt=r.date();let De=nt;return h.value?.[0]?De=r.date(h.value[0]):p.value&&r.isBefore(nt,p.value)?De=p.value:_.value&&r.isAfter(nt,_.value)&&(De=_.value),De&&r.isValid(De)?De:nt}),T=$e(()=>e.headerColor??e.color),k=Pn(e,"month"),A=me({get:()=>Number(k.value??r.getMonth(r.startOfMonth(x.value))),set:nt=>k.value=nt}),M=Pn(e,"year"),R=me({get:()=>Number(M.value??r.getYear(r.startOfYear(r.setMonth(x.value,A.value)))),set:nt=>M.value=nt}),F=tn(!1),z=me(()=>e.multiple&&h.value.length>1?a("$vuetify.datePicker.itemsSelected",h.value.length):h.value[0]&&r.isValid(h.value[0])?r.format(r.date(h.value[0]),"normalDateWithWeekday"):a(e.header)),G=me(()=>{let nt=r.date();return nt=r.setDate(nt,1),nt=r.setMonth(nt,A.value),nt=r.setYear(nt,R.value),r.format(nt,"monthAndYear")}),Y=$e(()=>`date-picker-header${F.value?"-reverse":""}-transition`),J=me(()=>{if(e.disabled)return!0;const nt=[];if(s.value!=="month")nt.push("prev","next");else{let De=r.date();if(De=r.startOfMonth(De),De=r.setMonth(De,A.value),De=r.setYear(De,R.value),p.value){const Ge=r.addDays(r.startOfMonth(De),-1);r.isAfter(p.value,Ge)&&nt.push("prev")}if(_.value){const Ge=r.addDays(r.endOfMonth(De),1);r.isAfter(Ge,_.value)&&nt.push("next")}}return nt}),re=me(()=>e.allowedYears||H),X=me(()=>e.allowedMonths||W);function U(nt,De){const Ge=e.allowedDates;if(typeof Ge!="function")return!0;const Ee=1+WN(r,nt,De);for(let it=0;it<Ee;it++)if(Ge(r.addDays(nt,it)))return!0;return!1}function H(nt){if(typeof e.allowedDates=="function"){const De=r.parseISO(`${nt}-01-01`);return U(De,r.endOfYear(De))}if(Array.isArray(e.allowedDates)&&e.allowedDates.length){for(const De of e.allowedDates)if(r.getYear(r.date(De))===nt)return!0;return!1}return!0}function W(nt){if(typeof e.allowedDates=="function"){const De=String(nt+1).padStart(2,"0"),Ge=r.parseISO(`${R.value}-${De}-01`);return U(Ge,r.endOfMonth(Ge))}if(Array.isArray(e.allowedDates)&&e.allowedDates.length){for(const De of e.allowedDates)if(r.getYear(r.date(De))===R.value&&r.getMonth(r.date(De))===nt)return!0;return!1}return!0}function ie(){A.value<11?A.value++:(R.value++,A.value=0,Je()),Be()}function Q(){A.value>0?A.value--:(R.value--,A.value=11,Je()),Be()}function te(){s.value="month"}function ke(){s.value=s.value==="months"?"month":"months"}function Re(){s.value=s.value==="year"?"month":"year"}function Be(){s.value==="months"&&ke()}function Je(){s.value==="year"&&Re()}return Yt(h,(nt,De)=>{const Ge=Xr(De),Ee=Xr(nt);if(!Ee.length)return;const it=r.date(Ge[Ge.length-1]),ot=r.date(Ee[Ee.length-1]),mt=r.getMonth(ot),Pt=r.getYear(ot);mt!==A.value&&(A.value=mt,Be()),Pt!==R.value&&(R.value=Pt,Je()),F.value=r.isBefore(it,ot)}),zt(()=>{const nt=d_.filterProps(e),De=pI.filterProps(e),Ge=gI.filterProps(e),Ee=vI.filterProps(e),it=hr(_I.filterProps(e),["modelValue"]),ot=hr(yI.filterProps(e),["modelValue"]),mt={color:T.value,header:z.value,transition:Y.value};return ce(d_,At(nt,{color:T.value,class:["v-date-picker",`v-date-picker--${s.value}`,{"v-date-picker--show-week":e.showWeek},l.value,e.class],style:e.style}),{title:()=>i.title?.()??V("div",{class:"v-date-picker__title"},[a(e.title)]),header:()=>i.header?ce(ui,{defaults:{VDatePickerHeader:{...mt}}},{default:()=>[i.header?.(mt)]}):ce(gI,At({key:"header"},Ge,mt,{onClick:s.value!=="month"?te:void 0}),{prepend:i.prepend,append:i.append}),default:()=>V(an,null,[ce(pI,At(De,{disabled:J.value,text:G.value,"onClick:next":ie,"onClick:prev":Q,"onClick:month":ke,"onClick:year":Re}),null),ce(K0,{hideOnLeave:!0},{default:()=>[s.value==="months"?ce(_I,At({key:"date-picker-months"},it,{modelValue:A.value,"onUpdate:modelValue":[Pt=>A.value=Pt,Be],min:p.value,max:_.value,year:R.value,allowedMonths:X.value}),{month:i.month}):s.value==="year"?ce(yI,At({key:"date-picker-years"},ot,{modelValue:R.value,"onUpdate:modelValue":[Pt=>R.value=Pt,Je],min:p.value,max:_.value,allowedYears:re.value}),{year:i.year}):ce(vI,At({key:"date-picker-month"},Ee,{modelValue:h.value,"onUpdate:modelValue":Pt=>h.value=Pt,month:A.value,"onUpdate:month":[Pt=>A.value=Pt,Be],year:R.value,"onUpdate:year":[Pt=>R.value=Pt,Je],min:p.value,max:_.value}),{day:i.day})]})]),actions:i.actions})}),{}}}),T_e=lt({actionText:String,bgColor:String,color:String,icon:In,image:String,justify:{type:String,default:"center"},headline:String,title:String,text:String,textWidth:{type:[Number,String],default:500},href:String,to:String,...Tn(),...Bs(),...md({size:void 0}),...Mi()},"VEmptyState"),S_e=Mt()({name:"VEmptyState",props:T_e(),emits:{"click:action":e=>!0},setup(e,t){let{emit:n,slots:i}=t;const{themeClasses:r}=Qi(e),{backgroundColorClasses:a,backgroundColorStyles:l}=ir(()=>e.bgColor),{dimensionStyles:h}=Fs(e),{displayClasses:s}=Bl();function p(_){n("click:action",_)}return zt(()=>{const _=!!(i.actions||e.actionText),x=!!(i.headline||e.headline),T=!!(i.title||e.title),k=!!(i.text||e.text),A=!!(i.media||e.image||e.icon),M=e.size||(e.image?200:96);return V("div",{class:_t(["v-empty-state",{[`v-empty-state--${e.justify}`]:!0},r.value,a.value,s.value,e.class]),style:Xt([l.value,h.value,e.style])},[A&&V("div",{key:"media",class:"v-empty-state__media"},[i.media?ce(ui,{key:"media-defaults",defaults:{VImg:{src:e.image,height:M},VIcon:{size:M,icon:e.icon}}},{default:()=>[i.media()]}):V(an,null,[e.image?ce(xh,{key:"image",src:e.image,height:M},null):e.icon?ce(Pi,{key:"icon",color:e.color,size:M,icon:e.icon},null):void 0])]),x&&V("div",{key:"headline",class:"v-empty-state__headline"},[i.headline?.()??e.headline]),T&&V("div",{key:"title",class:"v-empty-state__title"},[i.title?.()??e.title]),k&&V("div",{key:"text",class:"v-empty-state__text",style:{maxWidth:pn(e.textWidth)}},[i.text?.()??e.text]),i.default&&V("div",{key:"content",class:"v-empty-state__content"},[i.default()]),_&&V("div",{key:"actions",class:"v-empty-state__actions"},[ce(ui,{defaults:{VBtn:{class:"v-empty-state__action-btn",color:e.color??"surface-variant",href:e.href,text:e.actionText,to:e.to}}},{default:()=>[i.actions?.({props:{onClick:p}})??ce(mi,{onClick:p},null)]})])])}),{}}}),ub=Symbol.for("vuetify:v-expansion-panel"),p7=lt({...Tn(),...MP()},"VExpansionPanelText"),bI=Mt()({name:"VExpansionPanelText",props:p7(),setup(e,t){let{slots:n}=t;const i=Si(ub);if(!i)throw new Error("[Vuetify] v-expansion-panel-text needs to be placed inside v-expansion-panel");const{hasContent:r,onAfterLeave:a}=DP(e,i.isSelected);return zt(()=>ce(NT,{onAfterLeave:a},{default:()=>[Li(V("div",{class:_t(["v-expansion-panel-text",e.class]),style:Xt(e.style)},[n.default&&r.value&&V("div",{class:"v-expansion-panel-text__wrapper"},[n.default?.()])]),[[_u,i.isSelected.value]])]})),{}}}),g7=lt({color:String,expandIcon:{type:In,default:"$expand"},collapseIcon:{type:In,default:"$collapse"},hideActions:Boolean,focusable:Boolean,static:Boolean,ripple:{type:[Boolean,Object],default:!1},readonly:Boolean,...Tn(),...Bs()},"VExpansionPanelTitle"),xI=Mt()({name:"VExpansionPanelTitle",directives:{vRipple:Ha},props:g7(),setup(e,t){let{slots:n}=t;const i=Si(ub);if(!i)throw new Error("[Vuetify] v-expansion-panel-title needs to be placed inside v-expansion-panel");const{backgroundColorClasses:r,backgroundColorStyles:a}=ir(()=>e.color),{dimensionStyles:l}=Fs(e),h=me(()=>({collapseIcon:e.collapseIcon,disabled:i.disabled.value,expanded:i.isSelected.value,expandIcon:e.expandIcon,readonly:e.readonly})),s=$e(()=>i.isSelected.value?e.collapseIcon:e.expandIcon);return zt(()=>Li(V("button",{class:_t(["v-expansion-panel-title",{"v-expansion-panel-title--active":i.isSelected.value,"v-expansion-panel-title--focusable":e.focusable,"v-expansion-panel-title--static":e.static},r.value,e.class]),style:Xt([a.value,l.value,e.style]),type:"button",tabindex:i.disabled.value?-1:void 0,disabled:i.disabled.value,"aria-expanded":i.isSelected.value,onClick:e.readonly?void 0:i.toggle},[V("span",{class:"v-expansion-panel-title__overlay"},null),n.default?.(h.value),!e.hideActions&&ce(ui,{defaults:{VIcon:{icon:s.value}}},{default:()=>[V("span",{class:"v-expansion-panel-title__icon"},[n.actions?.(h.value)??ce(Pi,null,null)])]})]),[[Ha,e.ripple]])),{}}}),v7=lt({title:String,text:String,bgColor:String,...Ks(),...cg(),...Wr(),...ti(),...g7(),...p7()},"VExpansionPanel"),E_e=Mt()({name:"VExpansionPanel",props:v7(),emits:{"group:selected":e=>!0},setup(e,t){let{slots:n}=t;const i=nm(e,ub),{backgroundColorClasses:r,backgroundColorStyles:a}=ir(()=>e.bgColor),{elevationClasses:l}=wo(e),{roundedClasses:h}=ns(e),s=$e(()=>i?.disabled.value||e.disabled),p=me(()=>i.group.items.value.reduce((T,k,A)=>(i.group.selected.value.includes(k.id)&&T.push(A),T),[])),_=me(()=>{const T=i.group.items.value.findIndex(k=>k.id===i.id);return!i.isSelected.value&&p.value.some(k=>k-T===1)}),x=me(()=>{const T=i.group.items.value.findIndex(k=>k.id===i.id);return!i.isSelected.value&&p.value.some(k=>k-T===-1)});return Rr(ub,i),zt(()=>{const T=!!(n.text||e.text),k=!!(n.title||e.title),A=xI.filterProps(e),M=bI.filterProps(e);return ce(e.tag,{class:_t(["v-expansion-panel",{"v-expansion-panel--active":i.isSelected.value,"v-expansion-panel--before-active":_.value,"v-expansion-panel--after-active":x.value,"v-expansion-panel--disabled":s.value},h.value,r.value,e.class]),style:Xt([a.value,e.style])},{default:()=>[V("div",{class:_t(["v-expansion-panel__shadow",...l.value])},null),ce(ui,{defaults:{VExpansionPanelTitle:{...A},VExpansionPanelText:{...M}}},{default:()=>[k&&ce(xI,{key:"title"},{default:()=>[n.title?n.title():e.title]}),T&&ce(bI,{key:"text"},{default:()=>[n.text?n.text():e.text]}),n.default?.()]})]})}),{groupItem:i}}}),C_e=["default","accordion","inset","popout"],k_e=lt({flat:Boolean,...lg(),...Vl(v7(),["bgColor","collapseIcon","color","eager","elevation","expandIcon","focusable","hideActions","readonly","ripple","rounded","tile","static"]),...Mi(),...Tn(),...ti(),variant:{type:String,default:"default",validator:e=>C_e.includes(e)}},"VExpansionPanels"),I_e=Mt()({name:"VExpansionPanels",props:k_e(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{next:i,prev:r}=fm(e,ub),{themeClasses:a}=Qi(e),l=$e(()=>e.variant&&`v-expansion-panels--variant-${e.variant}`);return ts({VExpansionPanel:{bgColor:$e(()=>e.bgColor),collapseIcon:$e(()=>e.collapseIcon),color:$e(()=>e.color),eager:$e(()=>e.eager),elevation:$e(()=>e.elevation),expandIcon:$e(()=>e.expandIcon),focusable:$e(()=>e.focusable),hideActions:$e(()=>e.hideActions),readonly:$e(()=>e.readonly),ripple:$e(()=>e.ripple),rounded:$e(()=>e.rounded),static:$e(()=>e.static)}}),zt(()=>ce(e.tag,{class:_t(["v-expansion-panels",{"v-expansion-panels--flat":e.flat,"v-expansion-panels--tile":e.tile},a.value,l.value,e.class]),style:Xt(e.style)},{default:()=>[n.default?.({prev:r,next:i})]})),{next:i,prev:r}}}),A_e=lt({app:Boolean,appear:Boolean,extended:Boolean,layout:Boolean,offset:Boolean,modelValue:{type:Boolean,default:!0},...hr(BT({active:!0}),["location","spaced"]),...sg(),...Ah(),...Ph({transition:"fab-transition"})},"VFab"),P_e=Mt()({name:"VFab",props:A_e(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const i=Pn(e,"modelValue"),r=tn(56),a=tt(),{resizeRef:l}=zc(x=>{x.length&&(r.value=x[0].target.clientHeight)}),h=$e(()=>e.app||e.absolute),s=me(()=>h.value?e.location?.split(" ").shift()??"bottom":!1),p=me(()=>h.value?e.location?.split(" ")[1]??"end":!1);ca(()=>e.app,()=>{const x=og({id:e.name,order:me(()=>parseInt(e.order,10)),position:s,layoutSize:me(()=>e.layout?r.value+24:0),elementSize:me(()=>r.value+24),active:me(()=>e.app&&i.value),absolute:$e(()=>e.absolute)});jr(()=>{a.value=x.layoutItemStyles.value})});const _=tt();return zt(()=>{const x=mi.filterProps(e);return V("div",{ref:_,class:_t(["v-fab",{"v-fab--absolute":e.absolute,"v-fab--app":!!e.app,"v-fab--extended":e.extended,"v-fab--offset":e.offset,[`v-fab--${s.value}`]:h.value,[`v-fab--${p.value}`]:h.value},e.class]),style:Xt([e.app?{...a.value}:{height:e.absolute?"100%":"inherit"},e.style])},[V("div",{class:"v-fab__container"},[ce(Na,{appear:e.appear,transition:e.transition},{default:()=>[Li(ce(mi,At({ref:l},x,{active:void 0,location:void 0}),n),[[_u,e.active]])]})])])}),{}}});function M_e(){function e(n){return[...n.dataTransfer?.items??[]].filter(r=>r.kind==="file").map(r=>r.webkitGetAsEntry()).filter(Boolean).length>0||[...n.dataTransfer?.files??[]].length>0}async function t(n){const i=[],r=[...n.dataTransfer?.items??[]].filter(a=>a.kind==="file").map(a=>a.webkitGetAsEntry()).filter(Boolean);if(r.length)for(const a of r){const l=await _7(a,y7(".",a));i.push(...l.map(h=>h.file))}else i.push(...n.dataTransfer?.files??[]);return i}return{handleDrop:t,hasFilesOrFolders:e}}function _7(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return new Promise((n,i)=>{e.isFile?e.file(a=>n([{file:a,path:t}]),i):e.isDirectory&&e.createReader().readEntries(async a=>{const l=[];for(const h of a)l.push(...await _7(h,y7(t,h)));n(l)})})}function y7(e,t){return t.isDirectory?`${e}/${t.name}`:e}const D_e=lt({filterByType:String},"file-accept");function L_e(e){const t=me(()=>e.filterByType?R_e(e.filterByType):null);function n(i){if(t.value){const r=i.filter(t.value);return{accepted:r,rejected:i.filter(a=>!r.includes(a))}}return{accepted:i,rejected:[]}}return{filterAccepted:n}}function R_e(e){const t=e.split(",").map(a=>a.trim().toLowerCase()),n=t.filter(a=>a.startsWith(".")),i=t.filter(a=>a.endsWith("/*")),r=t.filter(a=>!n.includes(a)&&!i.includes(a));return a=>{const l=a.name.split(".").at(-1)?.toLowerCase()??"",h=a.type.split("/").at(0)?.toLowerCase()??"";return r.includes(a.type)||n.includes(`.${l}`)||i.includes(`${h}/*`)}}const O_e=lt({chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},hideInput:Boolean,multiple:Boolean,showSize:{type:[Boolean,Number,String],default:!1,validator:e=>typeof e=="boolean"||[1e3,1024].includes(Number(e))},truncateLength:{type:[Number,String],default:22},...Dh({prependIcon:"$file"}),modelValue:{type:[Array,Object],default:e=>e.multiple?[]:null,validator:e=>Xr(e).every(t=>t!=null&&typeof t=="object")},...D_e(),...$b({clearable:!0})},"VFileInput"),V_e=Mt()({name:"VFileInput",inheritAttrs:!1,props:O_e(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0,rejected:e=>!0},setup(e,t){let{attrs:n,emit:i,slots:r}=t;const{t:a}=fr(),{filterAccepted:l}=L_e(e),h=Pn(e,"modelValue",e.modelValue,De=>Xr(De),De=>!e.multiple&&Array.isArray(De)?De[0]:De),{isFocused:s,focus:p,blur:_}=Mh(e),x=me(()=>typeof e.showSize!="boolean"?e.showSize:void 0),T=me(()=>(h.value??[]).reduce((De,Ge)=>{let{size:Ee=0}=Ge;return De+Ee},0)),k=me(()=>O5(T.value,x.value)),A=me(()=>(h.value??[]).map(De=>{const{name:Ge="",size:Ee=0}=De,it=te(Ge);return e.showSize?`${it} (${O5(Ee,x.value)})`:it})),M=me(()=>{const De=h.value?.length??0;return e.showSize?a(e.counterSizeString,De,k.value):a(e.counterString,De)}),R=tt(),F=tt(),z=tt(),G=$e(()=>s.value||e.active),Y=me(()=>["plain","underlined"].includes(e.variant)),J=tn(!1),{handleDrop:re,hasFilesOrFolders:X}=M_e();function U(){z.value!==document.activeElement&&z.value?.focus(),s.value||p()}function H(De){z.value?.click()}function W(De){i("mousedown:control",De)}function ie(De){z.value?.click(),i("click:control",De)}function Q(De){De.stopPropagation(),U(),Hn(()=>{h.value=[],Ab(e["onClick:clear"],De)})}function te(De){if(De.length<Number(e.truncateLength))return De;const Ge=Math.floor((Number(e.truncateLength)-1)/2);return`${De.slice(0,Ge)}${De.slice(De.length-Ge)}`}function ke(De){De.preventDefault(),De.stopImmediatePropagation(),J.value=!0}function Re(De){De.preventDefault(),J.value=!1}async function Be(De){if(De.preventDefault(),De.stopImmediatePropagation(),J.value=!1,!z.value||!X(De))return;const Ge=await re(De);nt(Ge)}function Je(De){if(!(!De.target||De.repack))if(e.filterByType)nt([...De.target.files]);else{const Ge=De.target;h.value=[...Ge.files??[]]}}function nt(De){const Ge=new DataTransfer,{accepted:Ee,rejected:it}=l(De);it.length&&i("rejected",it);for(const mt of Ee)Ge.items.add(mt);z.value.files=Ge.files,h.value=[...Ge.files];const ot=new Event("change",{bubbles:!0});ot.repack=!0,z.value.dispatchEvent(ot)}return Yt(h,De=>{(!Array.isArray(De)||!De.length)&&z.value&&(z.value.value="")}),zt(()=>{const De=!!(r.counter||e.counter),Ge=!!(De||r.details),[Ee,it]=dm(n),{modelValue:ot,...mt}=da.filterProps(e),Pt={...rm.filterProps(e),"onClick:clear":Q},$t=n.webkitdirectory!==void 0&&n.webkitdirectory!==!1,ct=n.accept?String(n.accept):void 0,ht=$t?void 0:e.filterByType??ct;return ce(da,At({ref:R,modelValue:e.multiple?h.value:h.value[0],class:["v-file-input",{"v-file-input--chips":!!e.chips,"v-file-input--dragging":J.value,"v-file-input--hide":e.hideInput,"v-input--plain-underlined":Y.value},e.class],style:e.style,"onClick:prepend":H},Ee,mt,{centerAffix:!Y.value,focused:s.value}),{...r,default:Qe=>{let{id:kt,isDisabled:Ue,isDirty:ue,isReadonly:we,isValid:fe,hasDetails:Ie}=Qe;return ce(rm,At({ref:F,prependIcon:e.prependIcon,onMousedown:W,onClick:ie,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},Pt,{id:kt.value,active:G.value||ue.value,dirty:ue.value||e.dirty,disabled:Ue.value,focused:s.value,details:Ie.value,error:fe.value===!1,onDragover:ke,onDrop:Be}),{...r,default:je=>{let{props:{class:Xe,...yt},controlRef:wt}=je;return V(an,null,[V("input",At({ref:Lt=>z.value=wt.value=Lt,type:"file",accept:ht,readonly:we.value,disabled:Ue.value,multiple:e.multiple,name:e.name,onClick:Lt=>{Lt.stopPropagation(),we.value&&Lt.preventDefault(),U()},onChange:Je,onDragleave:Re,onFocus:U,onBlur:_},yt,it),null),V("div",{class:_t(Xe)},[!!h.value?.length&&!e.hideInput&&(r.selection?r.selection({fileNames:A.value,totalBytes:T.value,totalBytesReadable:k.value}):e.chips?A.value.map(Lt=>ce(Ds,{key:Lt,size:"small",text:Lt},null)):A.value.join(", "))])])}})},details:Ge?Qe=>V(an,null,[r.details?.(Qe),De&&V(an,null,[V("span",null,null),ce($T,{active:!!h.value?.length,value:M.value,disabled:e.disabled},r.counter)])]):void 0})}),To({},R,F,z)}}),B_e=lt({app:Boolean,color:String,height:{type:[Number,String],default:"auto"},...cl(),...Tn(),...Ks(),...sg(),...Wr(),...ti({tag:"footer"}),...Mi()},"VFooter"),F_e=Mt()({name:"VFooter",props:B_e(),setup(e,t){let{slots:n}=t;const i=tt(),{themeClasses:r}=Qi(e),{backgroundColorClasses:a,backgroundColorStyles:l}=ir(()=>e.color),{borderClasses:h}=Fl(e),{elevationClasses:s}=wo(e),{roundedClasses:p}=ns(e),_=tn(32),{resizeRef:x}=zc(k=>{k.length&&(_.value=k[0].target.clientHeight)}),T=me(()=>e.height==="auto"?_.value:parseInt(e.height,10));return ca(()=>e.app,()=>{const k=og({id:e.name,order:me(()=>parseInt(e.order,10)),position:$e(()=>"bottom"),layoutSize:T,elementSize:me(()=>e.height==="auto"?void 0:T.value),active:$e(()=>e.app),absolute:$e(()=>e.absolute)});jr(()=>{i.value=k.layoutItemStyles.value})}),zt(()=>ce(e.tag,{ref:x,class:_t(["v-footer",r.value,a.value,h.value,s.value,p.value,e.class]),style:Xt([l.value,e.app?i.value:{height:pn(e.height)},e.style])},n)),{}}}),z_e=lt({...Tn(),...xse()},"VForm"),N_e=Mt()({name:"VForm",props:z_e(),emits:{"update:modelValue":e=>!0,submit:e=>!0},setup(e,t){let{slots:n,emit:i}=t;const r=wse(e),a=tt();function l(s){s.preventDefault(),r.reset()}function h(s){const p=s,_=r.validate();p.then=_.then.bind(_),p.catch=_.catch.bind(_),p.finally=_.finally.bind(_),i("submit",p),p.defaultPrevented||_.then(x=>{let{valid:T}=x;T&&a.value?.submit()}),p.preventDefault()}return zt(()=>V("form",{ref:a,class:_t(["v-form",e.class]),style:Xt(e.style),novalidate:!0,onReset:l,onSubmit:h},[n.default?.(r)])),To(r,a)}}),$_e=lt({disabled:Boolean,modelValue:{type:Boolean,default:null},...AP()},"VHover"),U_e=Mt()({name:"VHover",props:$_e(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const i=Pn(e,"modelValue"),{runOpenDelay:r,runCloseDelay:a}=PP(e,l=>!e.disabled&&(i.value=l));return()=>n.default?.({isHovering:i.value,props:{onMouseenter:r,onMouseleave:a}})}}),j_e=lt({color:String,direction:{type:String,default:"vertical",validator:e=>["vertical","horizontal"].includes(e)},side:{type:String,default:"end",validator:e=>["start","end","both"].includes(e)},mode:{type:String,default:"intersect",validator:e=>["intersect","manual"].includes(e)},margin:[Number,String],loadMoreText:{type:String,default:"$vuetify.infiniteScroll.loadMore"},emptyText:{type:String,default:"$vuetify.infiniteScroll.empty"},...Bs(),...ti()},"VInfiniteScroll"),iV=dc({name:"VInfiniteScrollIntersect",props:{side:{type:String,required:!0},rootMargin:String},emits:{intersect:(e,t)=>!0},setup(e,t){let{emit:n}=t;const{intersectionRef:i,isIntersecting:r}=Lb();return Yt(r,async a=>{n("intersect",e.side,a)}),zt(()=>V("div",{class:"v-infinite-scroll-intersect",style:{"--v-infinite-margin-size":e.rootMargin},ref:i},[Bn("")])),{}}}),W_e=Mt()({name:"VInfiniteScroll",props:j_e(),emits:{load:e=>!0},setup(e,t){let{slots:n,emit:i}=t;const r=tt(),a=tn("ok"),l=tn("ok"),h=me(()=>pn(e.margin)),s=tn(!1);function p(re){if(!r.value)return;const X=e.direction==="vertical"?"scrollTop":"scrollLeft";r.value[X]=re}function _(){if(!r.value)return 0;const re=e.direction==="vertical"?"scrollTop":"scrollLeft";return r.value[re]}function x(){if(!r.value)return 0;const re=e.direction==="vertical"?"scrollHeight":"scrollWidth";return r.value[re]}function T(){if(!r.value)return 0;const re=e.direction==="vertical"?"clientHeight":"clientWidth";return r.value[re]}Mr(()=>{r.value&&(e.side==="start"?p(x()):e.side==="both"&&p(x()/2-T()/2))});function k(re,X){re==="start"?a.value=X:re==="end"?l.value=X:re==="both"&&(a.value=X,l.value=X)}function A(re){return re==="start"?a.value:l.value}let M=0;function R(re,X){s.value=X,s.value&&F(re)}function F(re){if(e.mode!=="manual"&&!s.value)return;const X=A(re);if(!r.value||["empty","loading"].includes(X))return;M=x(),k(re,"loading");function U(H){k(re,H),Hn(()=>{H==="empty"||H==="error"||(H==="ok"&&re==="start"&&p(x()-M+_()),e.mode!=="manual"&&Hn(()=>{window.requestAnimationFrame(()=>{window.requestAnimationFrame(()=>{window.requestAnimationFrame(()=>{F(re)})})})}))})}i("load",{side:re,done:U})}const{t:z}=fr();function G(re,X){if(e.side!==re&&e.side!=="both")return;const U=()=>F(re),H={side:re,props:{onClick:U,color:e.color}};return X==="error"?n.error?.(H):X==="empty"?n.empty?.(H)??V("div",null,[z(e.emptyText)]):e.mode==="manual"?X==="loading"?n.loading?.(H)??ce(Hp,{indeterminate:!0,color:e.color},null):n["load-more"]?.(H)??ce(mi,{variant:"outlined",color:e.color,onClick:U},{default:()=>[z(e.loadMoreText)]}):n.loading?.(H)??ce(Hp,{indeterminate:!0,color:e.color},null)}const{dimensionStyles:Y}=Fs(e);zt(()=>{const re=e.tag,X=e.side==="start"||e.side==="both",U=e.side==="end"||e.side==="both",H=e.mode==="intersect";return ce(re,{ref:r,class:_t(["v-infinite-scroll",`v-infinite-scroll--${e.direction}`,{"v-infinite-scroll--start":X,"v-infinite-scroll--end":U}]),style:Xt(Y.value)},{default:()=>[V("div",{class:"v-infinite-scroll__side"},[G("start",a.value)]),X&&H&&ce(iV,{key:"start",side:"start",onIntersect:R,rootMargin:h.value},null),n.default?.(),U&&H&&ce(iV,{key:"end",side:"end",onIntersect:R,rootMargin:h.value},null),V("div",{class:"v-infinite-scroll__side"},[G("end",l.value)])]})});function J(re){const X=re??e.side;k(X,"ok"),Hn(()=>{p(x()-M+_()),e.mode!=="manual"&&Hn(()=>{window.requestAnimationFrame(()=>{window.requestAnimationFrame(()=>{window.requestAnimationFrame(()=>{X==="both"?(F("start"),F("end")):F(X)})})})})})}return{reset:J}}}),b7=Symbol.for("vuetify:v-item-group"),H_e=lt({...Tn(),...lg({selectedClass:"v-item--selected"}),...ti(),...Mi()},"VItemGroup"),G_e=Mt()({name:"VItemGroup",props:H_e(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{themeClasses:i}=Qi(e),{isSelected:r,select:a,next:l,prev:h,selected:s}=fm(e,b7);return()=>ce(e.tag,{class:_t(["v-item-group",i.value,e.class]),style:Xt(e.style)},{default:()=>[n.default?.({isSelected:r,select:a,next:l,prev:h,selected:s.value})]})}}),q_e=Mt()({name:"VItem",props:cg(),emits:{"group:selected":e=>!0},setup(e,t){let{slots:n}=t;const{isSelected:i,select:r,toggle:a,selectedClass:l,value:h,disabled:s}=nm(e,b7);return()=>n.default?.({isSelected:i.value,selectedClass:l.value,select:r,toggle:a,value:h.value,disabled:s.value})}}),K_e=lt({color:String,...cl(),...Tn(),...Wr(),...ti({tag:"kbd"}),...Mi(),...Ks()},"VKbd"),X_e=Mt()({name:"VKbd",props:K_e(),setup(e,t){let{slots:n}=t;const{themeClasses:i}=Qi(e),{borderClasses:r}=Fl(e),{roundedClasses:a}=ns(e),{backgroundColorClasses:l,backgroundColorStyles:h}=ir(()=>e.color),{elevationClasses:s}=wo(e);return zt(()=>ce(e.tag,{class:_t(["v-kbd",i.value,l.value,r.value,s.value,a.value,e.class]),style:Xt([h.value,e.style])},n)),{}}}),Y_e=lt({...Tn(),...Bs(),...XN()},"VLayout"),Z_e=Mt()({name:"VLayout",props:Y_e(),setup(e,t){let{slots:n}=t;const{layoutClasses:i,layoutStyles:r,getLayoutItem:a,items:l,layoutRef:h}=ZN(e),{dimensionStyles:s}=Fs(e);return zt(()=>V("div",{ref:h,class:_t([i.value,e.class]),style:Xt([s.value,r.value,e.style])},[n.default?.()])),{getLayoutItem:a,items:l}}}),J_e=lt({position:{type:String,required:!0},size:{type:[Number,String],default:300},modelValue:Boolean,...Tn(),...sg()},"VLayoutItem"),Q_e=Mt()({name:"VLayoutItem",props:J_e(),setup(e,t){let{slots:n}=t;const{layoutItemStyles:i}=og({id:e.name,order:me(()=>parseInt(e.order,10)),position:$e(()=>e.position),elementSize:$e(()=>e.size),layoutSize:$e(()=>e.size),active:$e(()=>e.modelValue),absolute:$e(()=>e.absolute)});return()=>V("div",{class:_t(["v-layout-item",e.class]),style:Xt([i.value,e.style])},[n.default?.()])}}),eye=lt({modelValue:Boolean,options:{type:Object,default:()=>({root:void 0,rootMargin:void 0,threshold:void 0})},...Tn(),...Bs(),...ti(),...Ph({transition:"fade-transition"})},"VLazy"),tye=Mt()({name:"VLazy",directives:{vIntersect:gu},props:eye(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{dimensionStyles:i}=Fs(e),r=Pn(e,"modelValue");function a(l){r.value||(r.value=l)}return zt(()=>Li(ce(e.tag,{class:_t(["v-lazy",e.class]),style:Xt([i.value,e.style])},{default:()=>[r.value&&ce(Na,{transition:e.transition,appear:!0},{default:()=>[n.default?.()]})]}),[[gu,{handler:a,options:e.options},null]])),{}}}),nye=lt({locale:String,fallbackLocale:String,messages:Object,rtl:{type:Boolean,default:void 0},...Tn()},"VLocaleProvider"),iye=Mt()({name:"VLocaleProvider",props:nye(),setup(e,t){let{slots:n}=t;const{rtlClasses:i}=sie(e);return zt(()=>V("div",{class:_t(["v-locale-provider",i.value,e.class]),style:Xt(e.style)},[n.default?.()])),{}}}),rye=lt({scrollable:Boolean,...Tn(),...Bs(),...ti({tag:"main"})},"VMain"),sye=Mt()({name:"VMain",props:rye(),setup(e,t){let{slots:n}=t;const{dimensionStyles:i}=Fs(e),{mainStyles:r}=YN(),{ssrBootStyles:a}=dg();return zt(()=>ce(e.tag,{class:_t(["v-main",{"v-main--scrollable":e.scrollable},e.class]),style:Xt([r.value,a.value,i.value,e.style])},{default:()=>[e.scrollable?V("div",{class:"v-main__scroller"},[n.default?.()]):n.default?.()]})),{}}});function oye(e){let{rootEl:t,isSticky:n,layoutItemStyles:i}=e;const r=tn(!1),a=tn(0),l=me(()=>{const p=typeof r.value=="boolean"?"top":r.value;return[n.value?{top:"auto",bottom:"auto",height:void 0}:void 0,r.value?{[p]:pn(a.value)}:{top:i.value.top}]});Mr(()=>{Yt(n,p=>{p?window.addEventListener("scroll",s,{passive:!0}):window.removeEventListener("scroll",s)},{immediate:!0})}),Ur(()=>{window.removeEventListener("scroll",s)});let h=0;function s(){const p=h>window.scrollY?"up":"down",_=t.value.getBoundingClientRect(),x=parseFloat(i.value.top??0),T=window.scrollY-Math.max(0,a.value-x),k=_.height+Math.max(a.value,x)-window.scrollY-window.innerHeight,A=parseFloat(getComputedStyle(t.value).getPropertyValue("--v-body-scroll-y"))||0;_.height<window.innerHeight-x?(r.value="top",a.value=x):p==="up"&&r.value==="bottom"||p==="down"&&r.value==="top"?(a.value=window.scrollY+_.top-A,r.value=!0):p==="down"&&k<=0?(a.value=0,r.value="bottom"):p==="up"&&T<=0&&(A?r.value!=="top"&&(a.value=-T+A+x,r.value="top"):(a.value=_.top+T,r.value="top")),h=window.scrollY}return{isStuck:r,stickyStyles:l}}const aye=100,lye=20;function rV(e){return(e<0?-1:1)*Math.sqrt(Math.abs(e))*1.41421356237}function sV(e){if(e.length<2)return 0;if(e.length===2)return e[1].t===e[0].t?0:(e[1].d-e[0].d)/(e[1].t-e[0].t);let t=0;for(let n=e.length-1;n>0;n--){if(e[n].t===e[n-1].t)continue;const i=rV(t),r=(e[n].d-e[n-1].d)/(e[n].t-e[n-1].t);t+=(r-i)*Math.abs(r),n===e.length-1&&(t*=.5)}return rV(t)*1e3}function cye(){const e={};function t(r){Array.from(r.changedTouches).forEach(a=>{(e[a.identifier]??(e[a.identifier]=new xN(lye))).push([r.timeStamp,a])})}function n(r){Array.from(r.changedTouches).forEach(a=>{delete e[a.identifier]})}function i(r){const a=e[r]?.values().reverse();if(!a)throw new Error(`No samples for touch id ${r}`);const l=a[0],h=[],s=[];for(const p of a){if(l[0]-p[0]>aye)break;h.push({t:p[0],d:p[1].clientX}),s.push({t:p[0],d:p[1].clientY})}return{x:sV(h),y:sV(s),get direction(){const{x:p,y:_}=this,[x,T]=[Math.abs(p),Math.abs(_)];return x>T&&p>=0?"right":x>T&&p<=0?"left":T>x&&_>=0?"down":T>x&&_<=0?"up":uye()}}}return{addMovement:t,endTouch:n,getVelocity:i}}function uye(){throw new Error}function dye(e){let{el:t,isActive:n,isTemporary:i,width:r,touchless:a,position:l}=e;Mr(()=>{window.addEventListener("touchstart",z,{passive:!0}),window.addEventListener("touchmove",G,{passive:!1}),window.addEventListener("touchend",Y,{passive:!0})}),Ur(()=>{window.removeEventListener("touchstart",z),window.removeEventListener("touchmove",G),window.removeEventListener("touchend",Y)});const h=me(()=>["left","right"].includes(l.value)),{addMovement:s,endTouch:p,getVelocity:_}=cye();let x=!1;const T=tn(!1),k=tn(0),A=tn(0);let M;function R(re,X){return(l.value==="left"?re:l.value==="right"?document.documentElement.clientWidth-re:l.value==="top"?re:l.value==="bottom"?document.documentElement.clientHeight-re:uv())-(X?r.value:0)}function F(re){let X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const U=l.value==="left"?(re-A.value)/r.value:l.value==="right"?(document.documentElement.clientWidth-re-A.value)/r.value:l.value==="top"?(re-A.value)/r.value:l.value==="bottom"?(document.documentElement.clientHeight-re-A.value)/r.value:uv();return X?Cr(U):U}function z(re){if(a.value)return;const X=re.changedTouches[0].clientX,U=re.changedTouches[0].clientY,H=25,W=l.value==="left"?X<H:l.value==="right"?X>document.documentElement.clientWidth-H:l.value==="top"?U<H:l.value==="bottom"?U>document.documentElement.clientHeight-H:uv(),ie=n.value&&(l.value==="left"?X<r.value:l.value==="right"?X>document.documentElement.clientWidth-r.value:l.value==="top"?U<r.value:l.value==="bottom"?U>document.documentElement.clientHeight-r.value:uv());(W||ie||n.value&&i.value)&&(M=[X,U],A.value=R(h.value?X:U,n.value),k.value=F(h.value?X:U),x=A.value>-20&&A.value<80,p(re),s(re))}function G(re){const X=re.changedTouches[0].clientX,U=re.changedTouches[0].clientY;if(x){if(!re.cancelable){x=!1;return}const W=Math.abs(X-M[0]),ie=Math.abs(U-M[1]);(h.value?W>ie&&W>3:ie>W&&ie>3)?(T.value=!0,x=!1):(h.value?ie:W)>3&&(x=!1)}if(!T.value)return;re.preventDefault(),s(re);const H=F(h.value?X:U,!1);k.value=Math.max(0,Math.min(1,H)),H>1?A.value=R(h.value?X:U,!0):H<0&&(A.value=R(h.value?X:U,!1))}function Y(re){if(x=!1,!T.value)return;s(re),T.value=!1;const X=_(re.changedTouches[0].identifier),U=Math.abs(X.x),H=Math.abs(X.y);(h.value?U>H&&U>400:H>U&&H>3)?n.value=X.direction===({left:"right",right:"left",top:"down",bottom:"up"}[l.value]||uv()):n.value=k.value>.5}const J=me(()=>T.value?{transform:l.value==="left"?`translateX(calc(-100% + ${k.value*r.value}px))`:l.value==="right"?`translateX(calc(100% - ${k.value*r.value}px))`:l.value==="top"?`translateY(calc(-100% + ${k.value*r.value}px))`:l.value==="bottom"?`translateY(calc(100% - ${k.value*r.value}px))`:uv(),transition:"none"}:void 0);return ca(T,()=>{const re=t.value?.style.transform??null,X=t.value?.style.transition??null;jr(()=>{t.value?.style.setProperty("transform",J.value?.transform||"none"),t.value?.style.setProperty("transition",J.value?.transition||null)}),ao(()=>{t.value?.style.setProperty("transform",re),t.value?.style.setProperty("transition",X)})}),{isDragging:T,dragProgress:k,dragStyles:J}}function uv(){throw new Error}const hye=["start","end","left","right","top","bottom"],fye=lt({color:String,disableResizeWatcher:Boolean,disableRouteWatcher:Boolean,expandOnHover:Boolean,floating:Boolean,modelValue:{type:Boolean,default:null},permanent:Boolean,rail:{type:Boolean,default:null},railWidth:{type:[Number,String],default:56},scrim:{type:[Boolean,String],default:!0},image:String,temporary:Boolean,persistent:Boolean,touchless:Boolean,width:{type:[Number,String],default:256},location:{type:String,default:"start",validator:e=>hye.includes(e)},sticky:Boolean,...cl(),...Tn(),...AP(),...rg({mobile:null}),...Ks(),...sg(),...Wr(),...ti({tag:"nav"}),...Mi()},"VNavigationDrawer"),mye=Mt()({name:"VNavigationDrawer",props:fye(),emits:{"update:modelValue":e=>!0,"update:rail":e=>!0},setup(e,t){let{attrs:n,emit:i,slots:r}=t;const{isRtl:a}=qs(),{themeClasses:l}=Qi(e),{borderClasses:h}=Fl(e),{backgroundColorClasses:s,backgroundColorStyles:p}=ir(()=>e.color),{elevationClasses:_}=wo(e),{displayClasses:x,mobile:T}=Bl(e),{roundedClasses:k}=ns(e),A=r2(),M=Pn(e,"modelValue",null,Ge=>!!Ge),{ssrBootStyles:R}=dg(),{scopeId:F}=hg(),z=tt(),G=tn(!1),{runOpenDelay:Y,runCloseDelay:J}=PP(e,Ge=>{G.value=Ge}),re=me(()=>e.rail&&e.expandOnHover&&G.value?Number(e.width):Number(e.rail?e.railWidth:e.width)),X=me(()=>Lk(e.location,a.value)),U=$e(()=>e.persistent),H=me(()=>!e.permanent&&(T.value||e.temporary)),W=me(()=>e.sticky&&!H.value&&X.value!=="bottom");ca(()=>e.expandOnHover&&e.rail!=null,()=>{Yt(G,Ge=>i("update:rail",!Ge))}),ca(()=>!e.disableResizeWatcher,()=>{Yt(H,Ge=>!e.permanent&&Hn(()=>M.value=!Ge))}),ca(()=>!e.disableRouteWatcher&&!!A,()=>{Yt(A.currentRoute,()=>H.value&&(M.value=!1))}),Yt(()=>e.permanent,Ge=>{Ge&&(M.value=!0)}),e.modelValue==null&&!H.value&&(M.value=e.permanent||!T.value);const{isDragging:ie,dragProgress:Q}=dye({el:z,isActive:M,isTemporary:H,width:re,touchless:$e(()=>e.touchless),position:X}),te=me(()=>{const Ge=H.value?0:e.rail&&e.expandOnHover?Number(e.railWidth):re.value;return ie.value?Ge*Q.value:Ge}),{layoutItemStyles:ke,layoutItemScrimStyles:Re}=og({id:e.name,order:me(()=>parseInt(e.order,10)),position:X,layoutSize:te,elementSize:re,active:Vp(M),disableTransitions:$e(()=>ie.value),absolute:me(()=>e.absolute||W.value&&typeof Be.value!="string")}),{isStuck:Be,stickyStyles:Je}=oye({rootEl:z,isSticky:W,layoutItemStyles:ke}),nt=ir(()=>typeof e.scrim=="string"?e.scrim:null),De=me(()=>({...ie.value?{opacity:Q.value*.2,transition:"none"}:void 0,...Re.value}));return ts({VList:{bgColor:"transparent"}}),zt(()=>{const Ge=r.image||e.image;return V(an,null,[ce(e.tag,At({ref:z,onMouseenter:Y,onMouseleave:J,class:["v-navigation-drawer",`v-navigation-drawer--${X.value}`,{"v-navigation-drawer--expand-on-hover":e.expandOnHover,"v-navigation-drawer--floating":e.floating,"v-navigation-drawer--is-hovering":G.value,"v-navigation-drawer--rail":e.rail,"v-navigation-drawer--temporary":H.value,"v-navigation-drawer--persistent":U.value,"v-navigation-drawer--active":M.value,"v-navigation-drawer--sticky":W.value},l.value,s.value,h.value,x.value,_.value,k.value,e.class],style:[p.value,ke.value,R.value,Je.value,e.style]},F,n),{default:()=>[Ge&&V("div",{key:"image",class:"v-navigation-drawer__img"},[r.image?ce(ui,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{alt:"",cover:!0,height:"inherit",src:e.image}}},r.image):ce(xh,{key:"image-img",alt:"",cover:!0,height:"inherit",src:e.image},null)]),r.prepend&&V("div",{class:"v-navigation-drawer__prepend"},[r.prepend?.()]),V("div",{class:"v-navigation-drawer__content"},[r.default?.()]),r.append&&V("div",{class:"v-navigation-drawer__append"},[r.append?.()])]}),ce(Rl,{name:"fade-transition"},{default:()=>[H.value&&(ie.value||M.value)&&!!e.scrim&&V("div",At({class:["v-navigation-drawer__scrim",nt.backgroundColorClasses.value],style:[De.value,nt.backgroundColorStyles.value],onClick:()=>{U.value||(M.value=!1)}},F),null)]})])}),{isStuck:Be}}}),pye=dc({name:"VNoSsr",setup(e,t){let{slots:n}=t;const i=Z2();return()=>i.value&&n.default?.()}}),gye=50,vye=500;function _ye(e){let{toggleUpDown:t}=e,n=-1,i=-1;ao(a);function r(h){a(),l(h),window.addEventListener("pointerup",a),document.addEventListener("blur",a),n=window.setTimeout(()=>{i=window.setInterval(()=>l(h),gye)},vye)}function a(){window.clearTimeout(n),window.clearInterval(i),window.removeEventListener("pointerup",a),document.removeEventListener("blur",a)}function l(h){t(h==="up")}return{holdStart:r,holdStop:a}}const yye=lt({controlVariant:{type:String,default:"default"},inset:Boolean,hideInput:Boolean,modelValue:{type:Number,default:null},min:{type:Number,default:Number.MIN_SAFE_INTEGER},max:{type:Number,default:Number.MAX_SAFE_INTEGER},step:{type:Number,default:1},precision:{type:Number,default:0},minFractionDigits:{type:Number,default:null},decimalSeparator:{type:String,validator:e=>!e||e.length===1},...hr(Ub(),["modelValue","validationValue"])},"VNumberInput"),bye=Mt()({name:"VNumberInput",props:{...yye()},emits:{"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const i=tt(),{holdStart:r,holdStop:a}=_ye({toggleUpDown:H}),l=C_(e),h=me(()=>l.isDisabled.value||l.isReadonly.value),s=tn(e.focused),{decimalSeparator:p}=fr(),_=me(()=>e.decimalSeparator?.[0]||p.value);function x(Ee){let it=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e.precision,ot=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const mt=it==null?String(Ee):Ee.toFixed(it);if(s.value&&ot)return Number(mt).toString().replace(".",_.value);if(e.minFractionDigits===null||it!==null&&it<e.minFractionDigits)return mt.replace(".",_.value);let[Pt,$t]=mt.split(".");return $t=($t??"").padEnd(e.minFractionDigits,"0").replace(new RegExp(`(?<=\\d{${e.minFractionDigits}})0+$`,"g"),""),[Pt,$t].filter(Boolean).join(_.value)}const T=Pn(e,"modelValue",null,Ee=>Ee??null,Ee=>Ee==null?Ee??null:Cr(Number(Ee),e.min,e.max)),k=tn(null);jr(()=>{s.value&&!h.value&&Number(k.value?.replace(_.value,"."))===T.value||(T.value==null?k.value=null:isNaN(T.value)||(k.value=x(T.value)))});const A=me({get:()=>k.value,set(Ee){if(Ee===null||Ee===""){T.value=null,k.value=null;return}const it=Number(Ee.replace(_.value,"."));!isNaN(it)&&it<=e.max&&it>=e.min&&(T.value=it,k.value=Ee)}}),M=me(()=>h.value?!1:(T.value??0)+e.step<=e.max),R=me(()=>h.value?!1:(T.value??0)-e.step>=e.min),F=me(()=>e.hideInput?"stacked":e.controlVariant),z=$e(()=>F.value==="split"?"$plus":"$collapse"),G=$e(()=>F.value==="split"?"$minus":"$expand"),Y=$e(()=>F.value==="split"?"default":"small"),J=$e(()=>F.value==="stacked"?"auto":"100%"),re={props:{onClick:Q,onPointerup:te,onPointerdown:ke,onPointercancel:te}},X={props:{onClick:Q,onPointerup:te,onPointerdown:Re,onPointercancel:te}};Yt(()=>e.precision,()=>Je()),Yt(()=>e.minFractionDigits,()=>Je()),Mr(()=>{Be()});function U(Ee){if(Ee==null)return 0;const it=Ee.toString(),ot=it.indexOf(".");return~ot?it.length-ot:0}function H(){let Ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;if(h.value)return;if(T.value==null){A.value=x(Cr(0,e.min,e.max));return}let it=Math.max(U(T.value),U(e.step));e.precision!=null&&(it=Math.max(it,e.precision)),Ee?M.value&&(A.value=x(T.value+e.step,it)):R.value&&(A.value=x(T.value-e.step,it))}function W(Ee){if(!Ee.data)return;const it=Ee.target,{value:ot,selectionStart:mt,selectionEnd:Pt}=it??{},$t=ot?ot.slice(0,mt)+Ee.data+ot.slice(Pt):Ee.data,ct=gne($t,e.precision,_.value);if(new RegExp(`^-?\\d*${kw(_.value)}?\\d*$`).test($t)||(Ee.preventDefault(),it.value=ct,Hn(()=>A.value=ct)),e.precision!=null){if($t.split(_.value)[1]?.length>e.precision){Ee.preventDefault(),it.value=ct,Hn(()=>A.value=ct);const ht=(mt??0)+Ee.data.length;it.setSelectionRange(ht,ht)}e.precision===0&&$t.endsWith(_.value)&&(Ee.preventDefault(),it.value=ct,Hn(()=>A.value=ct))}}async function ie(Ee){["Enter","ArrowLeft","ArrowRight","Backspace","Delete","Tab"].includes(Ee.key)||Ee.ctrlKey||["ArrowDown","ArrowUp"].includes(Ee.key)&&(Ee.preventDefault(),Ee.stopPropagation(),Be(),await Hn(),Ee.key==="ArrowDown"?H(!1):H())}function Q(Ee){Ee.stopPropagation()}function te(Ee){Ee.currentTarget?.releasePointerCapture(Ee.pointerId),Ee.preventDefault(),a()}function ke(Ee){Ee.currentTarget?.setPointerCapture(Ee.pointerId),Ee.preventDefault(),Ee.stopPropagation(),r("up")}function Re(Ee){Ee.currentTarget?.setPointerCapture(Ee.pointerId),Ee.preventDefault(),Ee.stopPropagation(),r("down")}function Be(){if(h.value||!i.value)return;const Ee=i.value.value,it=Number(Ee.replace(_.value,"."));Ee&&!isNaN(it)?A.value=x(Cr(it,e.min,e.max)):A.value=null}function Je(){h.value||(A.value=T.value!==null&&!isNaN(T.value)?x(T.value,e.precision,!1):null)}function nt(){if(!h.value){if(T.value===null||isNaN(T.value)){A.value=null;return}A.value=T.value.toString().replace(".",_.value)}}function De(){nt()}function Ge(){Be()}return zt(()=>{const{modelValue:Ee,type:it,...ot}=wh.filterProps(e);function mt(){return n.increment?ce(ui,{key:"increment-defaults",defaults:{VBtn:{disabled:!M.value,height:J.value,size:Y.value,icon:z.value,variant:"text"}}},{default:()=>[n.increment(re)]}):ce(mi,{"aria-hidden":"true","data-testid":"increment",disabled:!M.value,height:J.value,icon:z.value,key:"increment-btn",onClick:Q,onPointerdown:ke,onPointerup:te,onPointercancel:te,size:Y.value,variant:"text",tabindex:"-1"},null)}function Pt(){return n.decrement?ce(ui,{key:"decrement-defaults",defaults:{VBtn:{disabled:!R.value,height:J.value,size:Y.value,icon:G.value,variant:"text"}}},{default:()=>[n.decrement(X)]}):ce(mi,{"aria-hidden":"true","data-testid":"decrement",disabled:!R.value,height:J.value,icon:G.value,key:"decrement-btn",onClick:Q,onPointerdown:Re,onPointerup:te,onPointercancel:te,size:Y.value,variant:"text",tabindex:"-1"},null)}function $t(){return V("div",{class:"v-number-input__control"},[Pt(),ce(oc,{vertical:F.value!=="stacked"},null),mt()])}function ct(){return!e.hideInput&&!e.inset?ce(oc,{vertical:!0},null):void 0}const ht=F.value==="split"?V("div",{class:"v-number-input__control"},[ce(oc,{vertical:!0},null),mt()]):e.reverse||F.value==="hidden"?void 0:V(an,null,[ct(),$t()]),Qe=n["append-inner"]||ht,kt=F.value==="split"?V("div",{class:"v-number-input__control"},[Pt(),ce(oc,{vertical:!0},null)]):e.reverse&&F.value!=="hidden"?V(an,null,[$t(),ct()]):void 0,Ue=n["prepend-inner"]||kt;return ce(wh,At({ref:i},ot,{modelValue:A.value,"onUpdate:modelValue":ue=>A.value=ue,focused:s.value,"onUpdate:focused":ue=>s.value=ue,validationValue:T.value,onBeforeinput:W,onFocus:De,onBlur:Ge,onKeydown:ie,class:["v-number-input",{"v-number-input--default":F.value==="default","v-number-input--hide-input":e.hideInput,"v-number-input--inset":e.inset,"v-number-input--reverse":e.reverse,"v-number-input--split":F.value==="split","v-number-input--stacked":F.value==="stacked"},e.class],style:e.style,inputmode:"decimal"}),{...n,"append-inner":Qe?function(){for(var ue=arguments.length,we=new Array(ue),fe=0;fe<ue;fe++)we[fe]=arguments[fe];return V(an,null,[n["append-inner"]?.(...we),ht])}:void 0,"prepend-inner":Ue?function(){for(var ue=arguments.length,we=new Array(ue),fe=0;fe<ue;fe++)we[fe]=arguments[fe];return V(an,null,[kt,n["prepend-inner"]?.(...we)])}:void 0})}),To({},i)}}),xye=lt({autofocus:Boolean,divider:String,focusAll:Boolean,label:{type:String,default:"$vuetify.input.otp"},length:{type:[Number,String],default:6},modelValue:{type:[Number,String],default:void 0},placeholder:String,type:{type:String,default:"number"},...Bs(),...zb(),...Vl($b({variant:"outlined"}),["baseColor","bgColor","class","color","disabled","error","loading","rounded","style","theme","variant"])},"VOtpInput"),wye=Mt()({name:"VOtpInput",props:xye(),emits:{finish:e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{attrs:n,emit:i,slots:r}=t;const{dimensionStyles:a}=Fs(e),{isFocused:l,focus:h,blur:s}=Mh(e),p=Pn(e,"modelValue","",W=>W==null?[]:String(W).split(""),W=>W.join("")),{t:_}=fr(),x=me(()=>Number(e.length)),T=me(()=>Array(x.value).fill(0)),k=tt(-1),A=tt(),M=tt([]),R=me(()=>M.value[k.value]);let F=!1;ca(()=>e.autofocus,()=>{const W=Fv();W.run(()=>{const{intersectionRef:ie,isIntersecting:Q}=Lb();jr(()=>{ie.value=M.value[0]}),Yt(Q,te=>{te&&(ie.value?.focus(),W.stop())})})});function z(){if(H(R.value.value)){R.value.value="";return}if(F)return;const W=p.value.slice(),ie=R.value.value;W[k.value]=ie;let Q=null;k.value>p.value.length?Q=p.value.length+1:k.value+1!==x.value&&(Q="next"),p.value=W,Q&&Mp(A.value,Q)}function G(){F=!1,z()}function Y(W){const ie=p.value.slice(),Q=k.value;let te=null;["ArrowLeft","ArrowRight","Backspace","Delete"].includes(W.key)&&(W.preventDefault(),W.key==="ArrowLeft"?te="prev":W.key==="ArrowRight"?te="next":["Backspace","Delete"].includes(W.key)&&(ie[k.value]="",p.value=ie,k.value>0&&W.key==="Backspace"?te="prev":requestAnimationFrame(()=>{M.value[Q]?.select()})),requestAnimationFrame(()=>{te!=null&&Mp(A.value,te)}))}function J(W,ie){ie.preventDefault(),ie.stopPropagation();const Q=ie?.clipboardData?.getData("Text").trim().slice(0,x.value)??"",te=Q.length-1===-1?W:Q.length-1;H(Q)||(p.value=Q.split(""),k.value=te)}function re(){p.value=[]}function X(W,ie){h(),k.value=ie}function U(){s(),k.value=-1}function H(W){return e.type==="number"&&/[^0-9]/g.test(W)}return ts({VField:{color:$e(()=>e.color),bgColor:$e(()=>e.color),baseColor:$e(()=>e.baseColor),disabled:$e(()=>e.disabled),error:$e(()=>e.error),variant:$e(()=>e.variant)}},{scoped:!0}),Yt(p,W=>{W.length===x.value&&i("finish",W.join(""))},{deep:!0}),Yt(k,W=>{W<0||Hn(()=>{M.value[W]?.select()})}),zt(()=>{const[W,ie]=dm(n);return V("div",At({class:["v-otp-input",{"v-otp-input--divided":!!e.divider},e.class],style:[e.style]},W),[V("div",{ref:A,class:"v-otp-input__content",style:Xt([a.value])},[T.value.map((Q,te)=>V(an,null,[e.divider&&te!==0&&V("span",{class:"v-otp-input__divider"},[e.divider]),ce(rm,{focused:l.value&&e.focusAll||k.value===te,key:te},{...r,loader:void 0,default:()=>V("input",{ref:ke=>M.value[te]=ke,"aria-label":_(e.label,te+1),autofocus:te===0&&e.autofocus,autocomplete:"one-time-code",class:_t(["v-otp-input__field"]),disabled:e.disabled,inputmode:e.type==="number"?"numeric":"text",min:e.type==="number"?0:void 0,maxlength:te===0?x.value:"1",placeholder:e.placeholder,type:e.type==="number"?"text":e.type,value:p.value[te],onInput:z,onFocus:ke=>X(ke,te),onBlur:U,onKeydown:Y,onCompositionstart:()=>F=!0,onCompositionend:G,onPaste:ke=>J(te,ke)},null)})])),V("input",At({class:"v-otp-input-input",type:"hidden"},ie,{value:p.value.join("")}),null),ce(dd,{contained:!0,contentClass:"v-otp-input__loader",modelValue:!!e.loading,persistent:!0},{default:()=>[r.loader?.()??ce(Hp,{color:typeof e.loading=="boolean"?void 0:e.loading,indeterminate:!0,size:"24",width:"2"},null)]}),r.default?.()])])}),{blur:()=>{M.value?.some(W=>W.blur())},focus:()=>{M.value?.[0].focus()},reset:re,isFocused:l}}});function Tye(e){return Math.floor(Math.abs(e))*Math.sign(e)}const Sye=lt({scale:{type:[Number,String],default:.5},...Tn()},"VParallax"),Eye=Mt()({name:"VParallax",props:Sye(),setup(e,t){let{slots:n}=t;const{intersectionRef:i,isIntersecting:r}=Lb(),{resizeRef:a,contentRect:l}=zc(),{height:h}=Bl(),s=tt();jr(()=>{i.value=a.value=s.value?.$el});let p;Yt(r,k=>{k?(p=DT(i.value),p=p===document.scrollingElement?document:p,p.addEventListener("scroll",T,{passive:!0}),T()):p.removeEventListener("scroll",T)}),Ur(()=>{p?.removeEventListener("scroll",T)}),Yt(h,T),Yt(()=>l.value?.height,T);const _=me(()=>1-Cr(Number(e.scale)));let x=-1;function T(){!r.value||ld()||(cancelAnimationFrame(x),x=requestAnimationFrame(()=>{const k=(s.value?.$el).querySelector(".v-img__img");if(!k)return;const A=p instanceof Document?document.documentElement.clientHeight:p.clientHeight,M=p instanceof Document?window.scrollY:p.scrollTop,R=i.value.getBoundingClientRect().top+M,F=l.value.height,z=R+(F-A)/2,G=Tye((M-z)*_.value),Y=Math.max(1,(_.value*(A-F)+F)/F);k.style.setProperty("transform",`translateY(${G}px) scale(${Y})`)}))}return zt(()=>ce(xh,{class:_t(["v-parallax",{"v-parallax--active":r.value},e.class]),style:Xt(e.style),ref:s,cover:!0,onLoadstart:T,onLoad:T},n)),{}}}),Cye=lt({...FT({falseIcon:"$radioOff",trueIcon:"$radioOn"})},"VRadio"),kye=Mt()({name:"VRadio",props:Cye(),setup(e,t){let{slots:n}=t;return zt(()=>{const i=im.filterProps(e);return ce(im,At(i,{class:["v-radio",e.class],style:e.style,type:"radio"}),n)}),{}}}),Iye=lt({height:{type:[Number,String],default:"auto"},...Dh(),...hr(yP(),["multiple"]),trueIcon:{type:In,default:"$radioOn"},falseIcon:{type:In,default:"$radioOff"},type:{type:String,default:"radio"}},"VRadioGroup"),Aye=Mt()({name:"VRadioGroup",inheritAttrs:!1,props:Iye(),emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:n,slots:i}=t;const r=ha(),a=me(()=>e.id||`radio-group-${r}`),l=Pn(e,"modelValue"),h=tt();return zt(()=>{const[s,p]=dm(n),_=da.filterProps(e),x=im.filterProps(e),T=i.label?i.label({label:e.label,props:{for:a.value}}):e.label;return ce(da,At({ref:h,class:["v-radio-group",e.class],style:e.style},s,_,{modelValue:l.value,"onUpdate:modelValue":k=>l.value=k,id:a.value}),{...i,default:k=>{let{id:A,messagesId:M,isDisabled:R,isReadonly:F}=k;return V(an,null,[T&&ce(E_,{id:A.value},{default:()=>[T]}),ce(v2,At(x,{id:A.value,"aria-describedby":M.value,defaultsTarget:"VRadio",trueIcon:e.trueIcon,falseIcon:e.falseIcon,type:e.type,disabled:R.value,readonly:F.value,"aria-labelledby":T?A.value:void 0,multiple:!1},p,{modelValue:l.value,"onUpdate:modelValue":z=>l.value=z}),i)])}})}),To({},h)}}),Pye=lt({...zb(),...Dh(),...S9(),strict:Boolean,modelValue:{type:Array,default:()=>[0,0]}},"VRangeSlider"),Mye=Mt()({name:"VRangeSlider",props:Pye(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,end:e=>!0,start:e=>!0},setup(e,t){let{slots:n,emit:i}=t;const r=tt(),a=tt(),l=tt(),{rtlClasses:h}=qs();function s(ie){if(!r.value||!a.value)return;const Q=aI(ie,r.value.$el,e.direction),te=aI(ie,a.value.$el,e.direction),ke=Math.abs(Q),Re=Math.abs(te);return ke<Re||ke===Re&&Q<0?r.value.$el:a.value.$el}const p=E9(e),_=Pn(e,"modelValue",void 0,ie=>ie?.length?ie.map(Q=>p.roundValue(Q)):[0,0]),{activeThumbRef:x,hasLabels:T,max:k,min:A,mousePressed:M,onSliderMousedown:R,onSliderTouchstart:F,position:z,trackContainerRef:G,disabled:Y,readonly:J}=C9({props:e,steps:p,onSliderStart:()=>{if(Y.value||J.value){x.value?.blur();return}i("start",_.value)},onSliderEnd:ie=>{let{value:Q}=ie;if(Y.value||J.value)x.value?.blur();else{const te=x.value===r.value?.$el?[Q,_.value[1]]:[_.value[0],Q];!e.strict&&te[0]<te[1]&&(_.value=te)}i("end",_.value)},onSliderMove:ie=>{let{value:Q}=ie;const[te,ke]=_.value;if(Y.value||J.value){x.value?.blur();return}!e.strict&&te===ke&&te!==A.value&&(x.value=Q>te?a.value?.$el:r.value?.$el,x.value?.focus()),x.value===r.value?.$el?_.value=[Math.min(Q,ke),ke]:_.value=[te,Math.max(te,Q)]},getActiveThumb:s}),{isFocused:re,focus:X,blur:U}=Mh(e),H=me(()=>z(_.value[0])),W=me(()=>z(_.value[1]));return zt(()=>{const ie=da.filterProps(e),Q=!!(e.label||n.label||n.prepend);return ce(da,At({class:["v-slider","v-range-slider",{"v-slider--has-labels":!!n["tick-label"]||T.value,"v-slider--focused":re.value,"v-slider--pressed":M.value,"v-slider--disabled":Y.value},h.value,e.class],style:e.style,ref:l},ie,{focused:re.value}),{...n,prepend:Q?te=>V(an,null,[n.label?.(te)??(e.label?ce(E_,{class:"v-slider__label",text:e.label},null):void 0),n.prepend?.(te)]):void 0,default:te=>{let{id:ke,messagesId:Re}=te;return V("div",{class:"v-slider__container",onMousedown:J.value?void 0:R,onTouchstartPassive:J.value?void 0:F},[V("input",{id:`${ke.value}_start`,name:e.name||ke.value,disabled:Y.value,readonly:J.value,tabindex:"-1",value:_.value[0]},null),V("input",{id:`${ke.value}_stop`,name:e.name||ke.value,disabled:Y.value,readonly:J.value,tabindex:"-1",value:_.value[1]},null),ce(k9,{ref:G,start:H.value,stop:W.value},{"tick-label":n["tick-label"]}),ce(lI,{ref:r,"aria-describedby":Re.value,focused:re&&x.value===r.value?.$el,modelValue:_.value[0],"onUpdate:modelValue":Be=>_.value=[Be,_.value[1]],onFocus:Be=>{X(),x.value=r.value?.$el,k.value!==A.value&&_.value[0]===_.value[1]&&_.value[1]===A.value&&Be.relatedTarget!==a.value?.$el&&(r.value?.$el.blur(),a.value?.$el.focus())},onBlur:()=>{U(),x.value=void 0},min:A.value,max:_.value[1],position:H.value,ripple:e.ripple},{"thumb-label":n["thumb-label"]}),ce(lI,{ref:a,"aria-describedby":Re.value,focused:re&&x.value===a.value?.$el,modelValue:_.value[1],"onUpdate:modelValue":Be=>_.value=[_.value[0],Be],onFocus:Be=>{X(),x.value=a.value?.$el,k.value!==A.value&&_.value[0]===_.value[1]&&_.value[0]===k.value&&Be.relatedTarget!==r.value?.$el&&(a.value?.$el.blur(),r.value?.$el.focus())},onBlur:()=>{U(),x.value=void 0},min:_.value[0],max:k.value,position:W.value,ripple:e.ripple},{"thumb-label":n["thumb-label"]})])}})}),To({focus:()=>r.value?.$el.focus()},l)}}),Dye=lt({name:String,itemAriaLabel:{type:String,default:"$vuetify.rating.ariaLabel.item"},activeColor:String,color:String,clearable:Boolean,disabled:Boolean,emptyIcon:{type:In,default:"$ratingEmpty"},fullIcon:{type:In,default:"$ratingFull"},halfIncrements:Boolean,hover:Boolean,length:{type:[Number,String],default:5},readonly:Boolean,modelValue:{type:[Number,String],default:0},itemLabels:Array,itemLabelPosition:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},ripple:Boolean,...Tn(),...Ts(),...md(),...ti(),...Mi()},"VRating"),Lye=Mt()({name:"VRating",props:Dye(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{t:i}=fr(),{themeClasses:r}=Qi(e),a=Pn(e,"modelValue"),l=me(()=>Cr(parseFloat(a.value),0,Number(e.length))),h=me(()=>rc(Number(e.length),1)),s=me(()=>h.value.flatMap(R=>e.halfIncrements?[R-.5,R]:[R])),p=tn(-1),_=me(()=>s.value.map(R=>{const F=e.hover&&p.value>-1,z=l.value>=R,G=p.value>=R,J=(F?G:z)?e.fullIcon:e.emptyIcon,re=e.activeColor??e.color,X=z||G?re:e.color;return{isFilled:z,isHovered:G,icon:J,color:X}})),x=me(()=>[0,...s.value].map(R=>{function F(){p.value=R}function z(){p.value=-1}function G(){e.disabled||e.readonly||(a.value=l.value===R&&e.clearable?0:R)}return{onMouseenter:e.hover?F:void 0,onMouseleave:e.hover?z:void 0,onClick:G}})),T=ha(),k=me(()=>e.name??`v-rating-${T}`);function A(R){let{value:F,index:z,showStar:G=!0}=R;const{onMouseenter:Y,onMouseleave:J,onClick:re}=x.value[z+1],X=`${k.value}-${String(F).replace(".","-")}`,U={color:_.value[z]?.color,density:e.density,disabled:e.disabled,icon:_.value[z]?.icon,ripple:e.ripple,size:e.size,variant:"plain"};return V(an,null,[V("label",{for:X,class:_t({"v-rating__item--half":e.halfIncrements&&F%1>0,"v-rating__item--full":e.halfIncrements&&F%1===0}),onMouseenter:Y,onMouseleave:J,onClick:re},[V("span",{class:"v-rating__hidden"},[i(e.itemAriaLabel,F,e.length)]),G?n.item?n.item({..._.value[z],props:U,value:F,index:z,rating:l.value}):ce(mi,At({"aria-label":i(e.itemAriaLabel,F,e.length)},U),null):void 0]),V("input",{class:"v-rating__hidden",name:k.value,id:X,type:"radio",value:F,checked:l.value===F,tabindex:-1,readonly:e.readonly,disabled:e.disabled},null)])}function M(R){return n["item-label"]?n["item-label"](R):R.label?V("span",null,[R.label]):V("span",null,[Bn("")])}return zt(()=>{const R=!!e.itemLabels?.length||n["item-label"];return ce(e.tag,{class:_t(["v-rating",{"v-rating--hover":e.hover,"v-rating--readonly":e.readonly},r.value,e.class]),style:Xt(e.style)},{default:()=>[ce(A,{value:0,index:-1,showStar:!1},null),h.value.map((F,z)=>V("div",{class:"v-rating__wrapper"},[R&&e.itemLabelPosition==="top"?M({value:F,index:z,label:e.itemLabels?.[z]}):void 0,V("div",{class:"v-rating__item"},[e.halfIncrements?V(an,null,[ce(A,{value:F-.5,index:z*2},null),ce(A,{value:F,index:z*2+1},null)]):ce(A,{value:F,index:z},null)]),R&&e.itemLabelPosition==="bottom"?M({value:F,index:z,label:e.itemLabels?.[z]}):void 0]))]})}),{}}}),Rye={actions:"button@2",article:"heading, paragraph",avatar:"avatar",button:"button",card:"image, heading","card-avatar":"image, list-item-avatar",chip:"chip","date-picker":"list-item, heading, divider, date-picker-options, date-picker-days, actions","date-picker-options":"text, avatar@2","date-picker-days":"avatar@28",divider:"divider",heading:"heading",image:"image","list-item":"text","list-item-avatar":"avatar, text","list-item-two-line":"sentences","list-item-avatar-two-line":"avatar, sentences","list-item-three-line":"paragraph","list-item-avatar-three-line":"avatar, paragraph",ossein:"ossein",paragraph:"text@3",sentences:"text@2",subtitle:"text",table:"table-heading, table-thead, table-tbody, table-tfoot","table-heading":"chip, text","table-thead":"heading@6","table-tbody":"table-row-divider@6","table-row-divider":"table-row, divider","table-row":"text@6","table-tfoot":"text@2, avatar@2",text:"text"};function Oye(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return V("div",{class:_t(["v-skeleton-loader__bone",`v-skeleton-loader__${e}`])},[t])}function oV(e){const[t,n]=e.split("@");return Array.from({length:n}).map(()=>cS(t))}function cS(e){let t=[];if(!e)return t;const n=Rye[e];if(e!==n){if(e.includes(","))return aV(e);if(e.includes("@"))return oV(e);n.includes(",")?t=aV(n):n.includes("@")?t=oV(n):n&&t.push(cS(n))}return[Oye(e,t)]}function aV(e){return e.replace(/\s/g,"").split(",").map(cS)}const Vye=lt({boilerplate:Boolean,color:String,loading:Boolean,loadingText:{type:String,default:"$vuetify.loading"},type:{type:[String,Array],default:"ossein"},...Bs(),...Ks(),...Mi()},"VSkeletonLoader"),Bye=Mt()({name:"VSkeletonLoader",inheritAttrs:!1,props:Vye(),setup(e,t){let{attrs:n,slots:i}=t;const{backgroundColorClasses:r,backgroundColorStyles:a}=ir(()=>e.color),{dimensionStyles:l}=Fs(e),{elevationClasses:h}=wo(e),{themeClasses:s}=Qi(e),{t:p}=fr(),_=me(()=>cS(Xr(e.type).join(",")));return zt(()=>{const x=!i.default||e.loading,T=e.boilerplate||!x?{}:{ariaLive:"polite",ariaLabel:p(e.loadingText),role:"alert"};return x?V("div",At({class:["v-skeleton-loader",{"v-skeleton-loader--boilerplate":e.boilerplate},s.value,r.value,h.value],style:[a.value,l.value]},T,n),[_.value]):V(an,null,[i.default?.()])}),{}}}),Fye=Mt()({name:"VSlideGroupItem",props:cg(),emits:{"group:selected":e=>!0},setup(e,t){let{slots:n}=t;const i=nm(e,wP);return()=>n.default?.({isSelected:i.isSelected.value,select:i.select,toggle:i.toggle,selectedClass:i.selectedClass.value})}}),zye=lt({closable:[Boolean,String],closeText:{type:String,default:"$vuetify.dismiss"},modelValue:{type:Array,default:()=>[]},...hr(E8(),["modelValue"])},"VSnackbarQueue"),Nye=Mt()({name:"VSnackbarQueue",props:zye(),emits:{"update:modelValue":e=>!0},setup(e,t){let{emit:n,slots:i}=t;const{t:r}=fr(),a=tn(!1),l=tn(!1),h=tn();Yt(()=>e.modelValue.length,(T,k)=>{!l.value&&T>k&&p()}),Yt(a,T=>{T&&(l.value=!0)});function s(){e.modelValue.length?p():(h.value=void 0,l.value=!1)}function p(){const[T,...k]=e.modelValue;n("update:modelValue",k),h.value=typeof T=="string"?{text:T}:T,Hn(()=>{a.value=!0})}function _(){a.value=!1}const x=me(()=>({color:typeof e.closable=="string"?e.closable:void 0,text:r(e.closeText)}));zt(()=>{const T=!!(e.closable||i.actions),{modelValue:k,...A}=Ow.filterProps(e);return V(an,null,[l.value&&!!h.value&&(i.default?ce(ui,{defaults:{VSnackbar:h.value}},{default:()=>[i.default({item:h.value})]}):ce(Ow,At(A,h.value,{modelValue:a.value,"onUpdate:modelValue":M=>a.value=M,onAfterLeave:s}),{text:i.text?()=>i.text?.({item:h.value}):void 0,actions:T?()=>V(an,null,[i.actions?ce(ui,{defaults:{VBtn:x.value}},{default:()=>[i.actions({item:h.value,props:{onClick:_}})]}):ce(mi,At(x.value,{onClick:_}),null)]):void 0}))])})}}),x7=lt({autoDraw:Boolean,autoDrawDuration:[Number,String],autoDrawEasing:{type:String,default:"ease"},color:String,gradient:{type:Array,default:()=>[]},gradientDirection:{type:String,validator:e=>["top","bottom","left","right"].includes(e),default:"top"},height:{type:[String,Number],default:75},labels:{type:Array,default:()=>[]},labelSize:{type:[Number,String],default:7},lineWidth:{type:[String,Number],default:4},id:String,itemValue:{type:String,default:"value"},modelValue:{type:Array,default:()=>[]},min:[String,Number],max:[String,Number],padding:{type:[String,Number],default:8},showLabels:Boolean,smooth:[Boolean,String,Number],width:{type:[Number,String],default:300}},"Line"),w7=lt({autoLineWidth:Boolean,...x7()},"VBarline"),lV=Mt()({name:"VBarline",props:w7(),setup(e,t){let{slots:n}=t;const i=ha(),r=me(()=>e.id||`barline-${i}`),a=me(()=>Number(e.autoDrawDuration)||500),l=me(()=>!!(e.showLabels||e.labels.length>0||n?.label)),h=me(()=>parseFloat(e.lineWidth)||4),s=me(()=>Math.max(e.modelValue.length*h.value,Number(e.width))),p=me(()=>({minX:0,maxX:s.value,minY:0,maxY:parseInt(e.height,10)})),_=me(()=>e.modelValue.map(R=>Ls(R,e.itemValue,R)));function x(R,F){const{minX:z,maxX:G,minY:Y,maxY:J}=F,re=R.length;let X=e.max!=null?Number(e.max):Math.max(...R),U=e.min!=null?Number(e.min):Math.min(...R);U>0&&e.min==null&&(U=0),X<0&&e.max==null&&(X=0);const H=G/(re===1?2:re),W=(J-Y)/(X-U||1),ie=J-Math.abs(U*W);return R.map((Q,te)=>{const ke=Math.abs(W*Q);return{x:z+te*H,y:ie-ke+ +(Q<0)*ke,height:ke,value:Q}})}const T=me(()=>{const R=[],F=x(_.value,p.value),z=F.length;for(let G=0;R.length<z;G++){const Y=F[G];let J=e.labels[G];J||(J=typeof Y=="object"?Y.value:Y),R.push({x:Y.x,value:String(J)})}return R}),k=me(()=>x(_.value,p.value)),A=me(()=>k.value.length===1?(p.value.maxX-h.value)/2:(Math.abs(k.value[0].x-k.value[1].x)-h.value)/2),M=me(()=>typeof e.smooth=="boolean"?e.smooth?2:0:Number(e.smooth));zt(()=>{const R=e.gradient.slice().length?e.gradient.slice().reverse():[""];return V("svg",{display:"block"},[V("defs",null,[V("linearGradient",{id:r.value,gradientUnits:"userSpaceOnUse",x1:e.gradientDirection==="left"?"100%":"0",y1:e.gradientDirection==="top"?"100%":"0",x2:e.gradientDirection==="right"?"100%":"0",y2:e.gradientDirection==="bottom"?"100%":"0"},[R.map((F,z)=>V("stop",{offset:z/Math.max(R.length-1,1),"stop-color":F||"currentColor"},null))])]),V("clipPath",{id:`${r.value}-clip`},[k.value.map(F=>V("rect",{x:F.x+A.value,y:F.y,width:h.value,height:F.height,rx:M.value,ry:M.value},[e.autoDraw&&!ld()&&V(an,null,[V("animate",{attributeName:"y",from:F.y+F.height,to:F.y,dur:`${a.value}ms`,fill:"freeze"},null),V("animate",{attributeName:"height",from:"0",to:F.height,dur:`${a.value}ms`,fill:"freeze"},null)])]))]),l.value&&V("g",{key:"labels",style:{textAnchor:"middle",dominantBaseline:"mathematical",fill:"currentColor"}},[T.value.map((F,z)=>V("text",{x:F.x+A.value+h.value/2,y:parseInt(e.height,10)-2+(parseInt(e.labelSize,10)||7*.75),"font-size":Number(e.labelSize)||7},[n.label?.({index:z,value:F.value})??F.value]))]),V("g",{"clip-path":`url(#${r.value}-clip)`,fill:`url(#${r.value})`},[V("rect",{x:0,y:0,width:Math.max(e.modelValue.length*h.value,Number(e.width)),height:e.height},null)])])})}});function $ye(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:75;if(e.length===0)return"";const r=e.shift(),a=e[e.length-1];return(n?`M${r.x} ${i-r.x+2} L${r.x} ${r.y}`:`M${r.x} ${r.y}`)+e.map((l,h)=>{const s=e[h+1],p=e[h-1]||r,_=s&&Uye(s,l,p);if(!s||_)return`L${l.x} ${l.y}`;const x=Math.min(cV(p,l),cV(s,l)),k=x/2<t?x/2:t,A=uV(p,l,k),M=uV(s,l,k);return`L${A.x} ${A.y}S${l.x} ${l.y} ${M.x} ${M.y}`}).join("")+(n?`L${a.x} ${i-r.x+2} Z`:"")}function c1(e){return parseInt(e,10)}function Uye(e,t,n){return c1(e.x+n.x)===c1(2*t.x)&&c1(e.y+n.y)===c1(2*t.y)}function cV(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function uV(e,t,n){const i={x:e.x-t.x,y:e.y-t.y},r=Math.sqrt(i.x*i.x+i.y*i.y),a={x:i.x/r,y:i.y/r};return{x:t.x+a.x*n,y:t.y+a.y*n}}const T7=lt({fill:Boolean,...x7()},"VTrendline"),dV=Mt()({name:"VTrendline",props:T7(),setup(e,t){let{slots:n}=t;const i=ha(),r=me(()=>e.id||`trendline-${i}`),a=me(()=>Number(e.autoDrawDuration)||(e.fill?500:2e3)),l=tt(0),h=tt(null);function s(R,F){const{minX:z,maxX:G,minY:Y,maxY:J}=F;R.length===1&&(R=[R[0],R[0]]);const re=R.length,X=e.max!=null?Number(e.max):Math.max(...R),U=e.min!=null?Number(e.min):Math.min(...R),H=(G-z)/(re-1),W=(J-Y)/(X-U||1);return R.map((ie,Q)=>({x:z+Q*H,y:J-(ie-U)*W,value:ie}))}const p=me(()=>!!(e.showLabels||e.labels.length>0||n?.label)),_=me(()=>parseFloat(e.lineWidth)||4),x=me(()=>Number(e.width)),T=me(()=>{const R=Number(e.padding);return{minX:R,maxX:x.value-R,minY:R,maxY:parseInt(e.height,10)-R}}),k=me(()=>e.modelValue.map(R=>Ls(R,e.itemValue,R))),A=me(()=>{const R=[],F=s(k.value,T.value),z=F.length;for(let G=0;R.length<z;G++){const Y=F[G];let J=e.labels[G];J||(J=typeof Y=="object"?Y.value:Y),R.push({x:Y.x,value:String(J)})}return R});Yt(()=>e.modelValue,async()=>{if(await Hn(),!e.autoDraw||!h.value||ld())return;const R=h.value,F=R.getTotalLength();e.fill?(R.style.transformOrigin="bottom center",R.style.transition="none",R.style.transform="scaleY(0)",R.getBoundingClientRect(),R.style.transition=`transform ${a.value}ms ${e.autoDrawEasing}`,R.style.transform="scaleY(1)"):(R.style.strokeDasharray=`${F}`,R.style.strokeDashoffset=`${F}`,R.getBoundingClientRect(),R.style.transition=`stroke-dashoffset ${a.value}ms ${e.autoDrawEasing}`,R.style.strokeDashoffset="0"),l.value=F},{immediate:!0});function M(R){const F=typeof e.smooth=="boolean"?e.smooth?8:0:Number(e.smooth);return $ye(s(k.value,T.value),F,R,parseInt(e.height,10))}zt(()=>{const R=e.gradient.slice().length?e.gradient.slice().reverse():[""];return V("svg",{display:"block","stroke-width":parseFloat(e.lineWidth)??4},[V("defs",null,[V("linearGradient",{id:r.value,gradientUnits:"userSpaceOnUse",x1:e.gradientDirection==="left"?"100%":"0",y1:e.gradientDirection==="top"?"100%":"0",x2:e.gradientDirection==="right"?"100%":"0",y2:e.gradientDirection==="bottom"?"100%":"0"},[R.map((F,z)=>V("stop",{offset:z/Math.max(R.length-1,1),"stop-color":F||"currentColor"},null))])]),p.value&&V("g",{key:"labels",style:{textAnchor:"middle",dominantBaseline:"mathematical",fill:"currentColor"}},[A.value.map((F,z)=>V("text",{x:F.x+_.value/2+_.value/2,y:parseInt(e.height,10)-4+(parseInt(e.labelSize,10)||7*.75),"font-size":Number(e.labelSize)||7},[n.label?.({index:z,value:F.value})??F.value]))]),V("path",{ref:h,d:M(e.fill),fill:e.fill?`url(#${r.value})`:"none",stroke:e.fill?"none":`url(#${r.value})`},null),e.fill&&V("path",{d:M(!1),fill:"none",stroke:e.color??e.gradient?.[0]},null)])})}}),jye=lt({type:{type:String,default:"trend"},...w7(),...T7()},"VSparkline"),Wye=Mt()({name:"VSparkline",props:jye(),setup(e,t){let{slots:n}=t;const{textColorClasses:i,textColorStyles:r}=Uo(()=>e.color),a=me(()=>!!(e.showLabels||e.labels.length>0||n?.label)),l=me(()=>{let h=parseInt(e.height,10);return a.value&&(h+=parseInt(e.labelSize,10)*1.5),h});zt(()=>{const h=e.type==="trend"?dV:lV,s=e.type==="trend"?dV.filterProps(e):lV.filterProps(e);return ce(h,At({key:e.type,class:i.value,style:r.value,viewBox:`0 0 ${e.width} ${parseInt(l.value,10)}`},s),n)})}}),Hye=lt({...Tn(),...e8({offset:8,minWidth:0,openDelay:0,closeDelay:100,location:"top center",transition:"scale-transition"})},"VSpeedDial"),Gye=Mt()({name:"VSpeedDial",props:Hye(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const i=Pn(e,"modelValue"),r=tt(),a=me(()=>{const[h,s="center"]=e.location?.split(" ")??[];return`${h} ${s}`}),l=me(()=>({[`v-speed-dial__content--${a.value.replace(" ","-")}`]:!0}));return zt(()=>{const h=a_.filterProps(e);return ce(a_,At(h,{modelValue:i.value,"onUpdate:modelValue":s=>i.value=s,class:e.class,style:e.style,contentClass:["v-speed-dial__content",l.value,e.contentClass],location:a.value,ref:r,transition:"fade-transition"}),{...n,default:s=>ce(ui,{defaults:{VBtn:{size:"small"}}},{default:()=>[ce(Na,{appear:!0,group:!0,transition:e.transition},{default:()=>[n.default?.(s)]})]})})}),{}}}),vM=Symbol.for("vuetify:v-stepper"),S7=lt({color:String,disabled:{type:[Boolean,String],default:!1},prevText:{type:String,default:"$vuetify.stepper.prev"},nextText:{type:String,default:"$vuetify.stepper.next"}},"VStepperActions"),E7=Mt()({name:"VStepperActions",props:S7(),emits:{"click:prev":()=>!0,"click:next":()=>!0},setup(e,t){let{emit:n,slots:i}=t;const{t:r}=fr();function a(){n("click:prev")}function l(){n("click:next")}return zt(()=>{const h={onClick:a},s={onClick:l};return V("div",{class:"v-stepper-actions"},[ce(ui,{defaults:{VBtn:{disabled:["prev",!0].includes(e.disabled),text:r(e.prevText),variant:"text"}}},{default:()=>[i.prev?.({props:h})??ce(mi,h,null)]}),ce(ui,{defaults:{VBtn:{color:e.color,disabled:["next",!0].includes(e.disabled),text:r(e.nextText),variant:"tonal"}}},{default:()=>[i.next?.({props:s})??ce(mi,s,null)]})])}),{}}}),C7=Ih("v-stepper-header"),qye=lt({color:String,title:String,subtitle:String,complete:Boolean,completeIcon:{type:In,default:"$complete"},editable:Boolean,editIcon:{type:In,default:"$edit"},error:Boolean,errorIcon:{type:In,default:"$error"},icon:In,ripple:{type:[Boolean,Object],default:!0},rules:{type:Array,default:()=>[]}},"StepperItem"),Kye=lt({...qye(),...cg()},"VStepperItem"),k7=Mt()({name:"VStepperItem",directives:{vRipple:Ha},props:Kye(),emits:{"group:selected":e=>!0},setup(e,t){let{slots:n}=t;const i=nm(e,vM,!0),r=me(()=>i?.value.value??e.value),a=me(()=>e.rules.every(T=>T()===!0)),l=me(()=>!e.disabled&&e.editable),h=me(()=>!e.disabled&&e.editable),s=me(()=>e.error||!a.value),p=me(()=>e.complete||e.rules.length>0&&a.value),_=me(()=>s.value?e.errorIcon:p.value?e.completeIcon:i.isSelected.value&&e.editable?e.editIcon:e.icon),x=me(()=>({canEdit:h.value,hasError:s.value,hasCompleted:p.value,title:e.title,subtitle:e.subtitle,step:r.value,value:e.value}));return zt(()=>{const T=(!i||i.isSelected.value||p.value||h.value)&&!s.value&&!e.disabled,k=!!(e.title!=null||n.title),A=!!(e.subtitle!=null||n.subtitle);function M(){i?.toggle()}return Li(V("button",{class:_t(["v-stepper-item",{"v-stepper-item--complete":p.value,"v-stepper-item--disabled":e.disabled,"v-stepper-item--error":s.value},i?.selectedClass.value]),disabled:!e.editable,type:"button",onClick:M},[l.value&&hm(!0,"v-stepper-item"),ce(uc,{key:"stepper-avatar",class:"v-stepper-item__avatar",color:T?e.color:void 0,size:24},{default:()=>[n.icon?.(x.value)??(_.value?ce(Pi,{icon:_.value},null):r.value)]}),V("div",{class:"v-stepper-item__content"},[k&&V("div",{key:"title",class:"v-stepper-item__title"},[n.title?.(x.value)??e.title]),A&&V("div",{key:"subtitle",class:"v-stepper-item__subtitle"},[n.subtitle?.(x.value)??e.subtitle]),n.default?.(x.value)])]),[[Ha,e.editable&&e.ripple,null]])}),{}}}),Xye=lt({...hr(ZT(),["continuous","nextIcon","prevIcon","showArrows","touch","mandatory"])},"VStepperWindow"),I7=Mt()({name:"VStepperWindow",props:Xye(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const i=Si(vM,null),r=Pn(e,"modelValue"),a=me({get(){return r.value!=null||!i?r.value:i.items.value.find(l=>i.selected.value.includes(l.id))?.value},set(l){r.value=l}});return zt(()=>{const l=Kp.filterProps(e);return ce(Kp,At({_as:"VStepperWindow"},l,{modelValue:a.value,"onUpdate:modelValue":h=>a.value=h,class:["v-stepper-window",e.class],style:e.style,mandatory:!1,touch:!1}),n)}),{}}}),Yye=lt({...JT()},"VStepperWindowItem"),A7=Mt()({name:"VStepperWindowItem",props:Yye(),setup(e,t){let{slots:n}=t;return zt(()=>{const i=Xp.filterProps(e);return ce(Xp,At({_as:"VStepperWindowItem"},i,{class:["v-stepper-window-item",e.class],style:e.style}),n)}),{}}}),Zye=lt({altLabels:Boolean,bgColor:String,completeIcon:In,editIcon:In,editable:Boolean,errorIcon:In,hideActions:Boolean,items:{type:Array,default:()=>[]},itemTitle:{type:String,default:"title"},itemValue:{type:String,default:"value"},nonLinear:Boolean,flat:Boolean,...rg()},"Stepper"),Jye=lt({...Zye(),...lg({mandatory:"force",selectedClass:"v-stepper-item--selected"}),...FP(),...Vl(S7(),["prevText","nextText"])},"VStepper"),Qye=Mt()({name:"VStepper",props:Jye(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{items:i,next:r,prev:a,selected:l}=fm(e,vM),{displayClasses:h,mobile:s}=Bl(e),{completeIcon:p,editIcon:_,errorIcon:x,color:T,editable:k,prevText:A,nextText:M}=f_(e),R=me(()=>e.items.map((G,Y)=>{const J=Ls(G,e.itemTitle,G),re=Ls(G,e.itemValue,Y+1);return{title:J,value:re,raw:G}})),F=me(()=>i.value.findIndex(G=>l.value.includes(G.id))),z=me(()=>e.disabled?e.disabled:F.value===0?"prev":F.value===i.value.length-1?"next":!1);return ts({VStepperItem:{editable:k,errorIcon:x,completeIcon:p,editIcon:_,prevText:A,nextText:M},VStepperActions:{color:T,disabled:z,prevText:A,nextText:M}}),zt(()=>{const G=nd.filterProps(e),Y=!!(n.header||e.items.length),J=e.items.length>0,re=!e.hideActions&&!!(J||n.actions);return ce(nd,At(G,{color:e.bgColor,class:["v-stepper",{"v-stepper--alt-labels":e.altLabels,"v-stepper--flat":e.flat,"v-stepper--non-linear":e.nonLinear,"v-stepper--mobile":s.value},h.value,e.class],style:e.style}),{default:()=>[Y&&ce(C7,{key:"stepper-header"},{default:()=>[R.value.map((X,U)=>{let{raw:H,...W}=X;return V(an,null,[!!U&&ce(oc,null,null),ce(k7,W,{default:n[`header-item.${W.value}`]??n.header,icon:n.icon,title:n.title,subtitle:n.subtitle})])})]}),J&&ce(I7,{key:"stepper-window"},{default:()=>[R.value.map(X=>ce(A7,{value:X.value},{default:()=>n[`item.${X.value}`]?.(X)??n.item?.(X)}))]}),n.default?.({prev:a,next:r}),re&&(n.actions?.({next:r,prev:a})??ce(E7,{key:"stepper-actions","onClick:prev":a,"onClick:next":r},n))]})}),{prev:a,next:r}}}),e0e=lt({indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...Dh(),...FT()},"VSwitch"),t0e=Mt()({name:"VSwitch",inheritAttrs:!1,props:e0e(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:indeterminate":e=>!0},setup(e,t){let{attrs:n,slots:i}=t;const r=Pn(e,"indeterminate"),a=Pn(e,"modelValue"),{loaderClasses:l}=Ob(e),{isFocused:h,focus:s,blur:p}=Mh(e),_=tt(),x=tt(),T=nP&&window.matchMedia("(forced-colors: active)").matches,k=$e(()=>typeof e.loading=="string"&&e.loading!==""?e.loading:e.color),A=ha(),M=$e(()=>e.id||`switch-${A}`);function R(){r.value&&(r.value=!1)}function F(z){z.stopPropagation(),z.preventDefault(),_.value?.input?.click()}return zt(()=>{const[z,G]=dm(n),Y=da.filterProps(e),J=im.filterProps(e);return ce(da,At({ref:x,class:["v-switch",{"v-switch--flat":e.flat},{"v-switch--inset":e.inset},{"v-switch--indeterminate":r.value},l.value,e.class]},z,Y,{modelValue:a.value,"onUpdate:modelValue":re=>a.value=re,id:M.value,focused:h.value,style:e.style}),{...i,default:re=>{let{id:X,messagesId:U,isDisabled:H,isReadonly:W,isValid:ie}=re;const Q={model:a,isValid:ie};return ce(im,At({ref:_},J,{modelValue:a.value,"onUpdate:modelValue":[te=>a.value=te,R],id:X.value,"aria-describedby":U.value,type:"checkbox","aria-checked":r.value?"mixed":void 0,disabled:H.value,readonly:W.value,onFocus:s,onBlur:p},G),{...i,default:te=>{let{backgroundColorClasses:ke,backgroundColorStyles:Re}=te;return V("div",{class:_t(["v-switch__track",T?void 0:ke.value]),style:Xt(Re.value),onClick:F},[i["track-true"]&&V("div",{key:"prepend",class:"v-switch__track-true"},[i["track-true"](Q)]),i["track-false"]&&V("div",{key:"append",class:"v-switch__track-false"},[i["track-false"](Q)])])},input:te=>{let{inputNode:ke,icon:Re,backgroundColorClasses:Be,backgroundColorStyles:Je}=te;return V(an,null,[ke,V("div",{class:_t(["v-switch__thumb",{"v-switch__thumb--filled":Re||e.loading},e.inset||T?void 0:Be.value]),style:Xt(e.inset?void 0:Je.value)},[i.thumb?ce(ui,{defaults:{VIcon:{icon:Re,size:"x-small"}}},{default:()=>[i.thumb({...Q,icon:Re})]}):ce(bP,null,{default:()=>[e.loading?ce(Vb,{name:"v-switch",active:!0,color:ie.value===!1?void 0:k.value},{default:nt=>i.loader?i.loader(nt):ce(Hp,{active:nt.isActive,color:nt.color,indeterminate:!0,size:"16",width:"2"},null)}):Re&&ce(Pi,{key:String(Re),icon:Re,size:"x-small"},null)]})])])}})}})}),To({},x)}}),n0e=lt({color:String,height:[Number,String],window:Boolean,...Tn(),...Ks(),...sg(),...Wr(),...ti(),...Mi()},"VSystemBar"),i0e=Mt()({name:"VSystemBar",props:n0e(),setup(e,t){let{slots:n}=t;const{themeClasses:i}=Qi(e),{backgroundColorClasses:r,backgroundColorStyles:a}=ir(()=>e.color),{elevationClasses:l}=wo(e),{roundedClasses:h}=ns(e),{ssrBootStyles:s}=dg(),p=me(()=>e.height??(e.window?32:24)),{layoutItemStyles:_}=og({id:e.name,order:me(()=>parseInt(e.order,10)),position:tn("top"),layoutSize:p,elementSize:p,active:me(()=>!0),absolute:$e(()=>e.absolute)});return zt(()=>ce(e.tag,{class:_t(["v-system-bar",{"v-system-bar--window":e.window},i.value,r.value,l.value,h.value,e.class]),style:Xt([a.value,_.value,s.value,e.style])},n)),{}}}),_M=Symbol.for("vuetify:v-tabs"),P7=lt({fixed:Boolean,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},...hr(BT({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},"VTab"),M7=Mt()({name:"VTab",props:P7(),setup(e,t){let{slots:n,attrs:i}=t;const{textColorClasses:r,textColorStyles:a}=Uo(()=>e.sliderColor),l=tt(),h=tt(),s=me(()=>e.direction==="horizontal"),p=me(()=>l.value?.group?.isSelected.value??!1);function _(x){let{value:T}=x;if(T){const k=l.value?.$el.parentElement?.querySelector(".v-tab--selected .v-tab__slider"),A=h.value;if(!k||!A)return;const M=getComputedStyle(k).color,R=k.getBoundingClientRect(),F=A.getBoundingClientRect(),z=s.value?"x":"y",G=s.value?"X":"Y",Y=s.value?"right":"bottom",J=s.value?"width":"height",re=R[z],X=F[z],U=re>X?R[Y]-F[Y]:R[z]-F[z],H=Math.sign(U)>0?s.value?"right":"bottom":Math.sign(U)<0?s.value?"left":"top":"center",ie=(Math.abs(U)+(Math.sign(U)<0?R[J]:F[J]))/Math.max(R[J],F[J])||0,Q=R[J]/F[J]||0,te=1.5;nh(A,{backgroundColor:[M,"currentcolor"],transform:[`translate${G}(${U}px) scale${G}(${Q})`,`translate${G}(${U/te}px) scale${G}(${(ie-1)/te+1})`,"none"],transformOrigin:Array(3).fill(H)},{duration:225,easing:$0})}}return zt(()=>{const x=mi.filterProps(e);return ce(mi,At({symbol:_M,ref:l,class:["v-tab",e.class],style:e.style,tabindex:p.value?0:-1,role:"tab","aria-selected":String(p.value),active:!1},x,i,{block:e.fixed,maxWidth:e.fixed?300:void 0,"onGroup:selected":_}),{...n,default:()=>V(an,null,[n.default?.()??e.text,!e.hideSlider&&V("div",{ref:h,class:_t(["v-tab__slider",r.value]),style:Xt(a.value)},null)])})}),To({},l)}}),r0e=lt({...hr(ZT(),["continuous","nextIcon","prevIcon","showArrows","touch","mandatory"])},"VTabsWindow"),D7=Mt()({name:"VTabsWindow",props:r0e(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const i=Si(_M,null),r=Pn(e,"modelValue"),a=me({get(){return r.value!=null||!i?r.value:i.items.value.find(l=>i.selected.value.includes(l.id))?.value},set(l){r.value=l}});return zt(()=>{const l=Kp.filterProps(e);return ce(Kp,At({_as:"VTabsWindow"},l,{modelValue:a.value,"onUpdate:modelValue":h=>a.value=h,class:["v-tabs-window",e.class],style:e.style,mandatory:!1,touch:!1}),n)}),{}}}),s0e=lt({...JT()},"VTabsWindowItem"),L7=Mt()({name:"VTabsWindowItem",props:s0e(),setup(e,t){let{slots:n}=t;return zt(()=>{const i=Xp.filterProps(e);return ce(Xp,At({_as:"VTabsWindowItem"},i,{class:["v-tabs-window-item",e.class],style:e.style}),n)}),{}}});function o0e(e){return e?e.map(t=>N0(t)?t:{text:t,value:t}):[]}const a0e=lt({alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,...Vl(P7(),["spaced"]),...TP({mandatory:"force",selectedClass:"v-tab-item--selected"}),...Ts(),...ti()},"VTabs"),l0e=Mt()({name:"VTabs",props:a0e(),emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:n,slots:i}=t;const r=Pn(e,"modelValue"),a=me(()=>o0e(e.items)),{densityClasses:l}=qa(e),{backgroundColorClasses:h,backgroundColorStyles:s}=ir(()=>e.bgColor),{scopeId:p}=hg();return ts({VTab:{color:$e(()=>e.color),direction:$e(()=>e.direction),stacked:$e(()=>e.stacked),fixed:$e(()=>e.fixedTabs),sliderColor:$e(()=>e.sliderColor),hideSlider:$e(()=>e.hideSlider)}}),zt(()=>{const _=Z0.filterProps(e),x=!!(i.window||e.items.length>0);return V(an,null,[ce(Z0,At(_,{modelValue:r.value,"onUpdate:modelValue":T=>r.value=T,class:["v-tabs",`v-tabs--${e.direction}`,`v-tabs--align-tabs-${e.alignTabs}`,{"v-tabs--fixed-tabs":e.fixedTabs,"v-tabs--grow":e.grow,"v-tabs--stacked":e.stacked},l.value,h.value,e.class],style:[{"--v-tabs-height":pn(e.height)},s.value,e.style],role:"tablist",symbol:_M},p,n),{default:()=>[i.default?.()??a.value.map(T=>i.tab?.({item:T})??ce(M7,At(T,{key:T.text,value:T.value,spaced:e.spaced}),{default:i[`tab.${T.value}`]?()=>i[`tab.${T.value}`]?.({item:T}):void 0}))]}),x&&ce(D7,At({modelValue:r.value,"onUpdate:modelValue":T=>r.value=T,key:"tabs-window"},p),{default:()=>[a.value.map(T=>i.item?.({item:T})??ce(L7,{value:T.value},{default:()=>i[`item.${T.value}`]?.({item:T})})),i.window?.()]})])}),{}}}),c0e=lt({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseFloat(e))},maxRows:{type:[Number,String],validator:e=>!isNaN(parseFloat(e))},suffix:String,modelModifiers:Object,...t8(),...Dh(),...$b()},"VTextarea"),u0e=Mt()({name:"VTextarea",directives:{vIntersect:gu},inheritAttrs:!1,props:c0e(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0,"update:rows":e=>!0},setup(e,t){let{attrs:n,emit:i,slots:r}=t;const a=Pn(e,"modelValue"),{isFocused:l,focus:h,blur:s}=Mh(e),{onIntersect:p}=i8(e),_=me(()=>typeof e.counterValue=="function"?e.counterValue(a.value):(a.value||"").toString().length),x=me(()=>{if(n.maxlength)return n.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter}),T=tt(),k=tt(),A=tn(""),M=tt(),R=tt(0),{platform:F}=Bl(),z=n8(e),G=me(()=>e.persistentPlaceholder||l.value||e.active);function Y(){z.isSuppressing.value&&z.update(),M.value!==document.activeElement&&M.value?.focus(),l.value||h()}function J(ke){Y(),i("click:control",ke)}function re(ke){i("mousedown:control",ke)}function X(ke){ke.stopPropagation(),Y(),Hn(()=>{a.value="",Ab(e["onClick:clear"],ke)})}function U(ke){const Re=ke.target;if(a.value=Re.value,e.modelModifiers?.trim){const Be=[Re.selectionStart,Re.selectionEnd];Hn(()=>{Re.selectionStart=Be[0],Re.selectionEnd=Be[1]})}}const H=tt(),W=tt(Number(e.rows)),ie=me(()=>["plain","underlined"].includes(e.variant));jr(()=>{e.autoGrow||(W.value=Number(e.rows))});function Q(){Hn(()=>{if(!M.value)return;if(F.value.firefox){R.value=12;return}const{offsetWidth:ke,clientWidth:Re}=M.value;R.value=Math.max(0,ke-Re)}),e.autoGrow&&Hn(()=>{if(!H.value||!k.value)return;const ke=getComputedStyle(H.value),Re=getComputedStyle(k.value.$el),Be=parseFloat(ke.getPropertyValue("--v-field-padding-top"))+parseFloat(ke.getPropertyValue("--v-input-padding-top"))+parseFloat(ke.getPropertyValue("--v-field-padding-bottom")),Je=H.value.scrollHeight,nt=parseFloat(ke.lineHeight),De=Math.max(parseFloat(e.rows)*nt+Be,parseFloat(Re.getPropertyValue("--v-input-control-height"))),Ge=parseFloat(e.maxRows)*nt+Be||1/0,Ee=Cr(Je??0,De,Ge);W.value=Math.floor((Ee-Be)/nt),A.value=pn(Ee)})}Mr(Q),Yt(a,Q),Yt(()=>e.rows,Q),Yt(()=>e.maxRows,Q),Yt(()=>e.density,Q),Yt(W,ke=>{i("update:rows",ke)});let te;return Yt(H,ke=>{ke?(te=new ResizeObserver(Q),te.observe(H.value)):te?.disconnect()}),Ur(()=>{te?.disconnect()}),zt(()=>{const ke=!!(r.counter||e.counter||e.counterValue),Re=!!(ke||r.details),[Be,Je]=dm(n),{modelValue:nt,...De}=da.filterProps(e),Ge={...rm.filterProps(e),"onClick:clear":X};return ce(da,At({ref:T,modelValue:a.value,"onUpdate:modelValue":Ee=>a.value=Ee,class:["v-textarea v-text-field",{"v-textarea--prefixed":e.prefix,"v-textarea--suffixed":e.suffix,"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-textarea--auto-grow":e.autoGrow,"v-textarea--no-resize":e.noResize||e.autoGrow,"v-input--plain-underlined":ie.value},e.class],style:[{"--v-textarea-scroll-bar-width":pn(R.value)},e.style]},Be,De,{centerAffix:W.value===1&&!ie.value,focused:l.value}),{...r,default:Ee=>{let{id:it,isDisabled:ot,isDirty:mt,isReadonly:Pt,isValid:$t,hasDetails:ct}=Ee;return ce(rm,At({ref:k,style:{"--v-textarea-control-height":A.value},onClick:J,onMousedown:re,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},Ge,{id:it.value,active:G.value||mt.value,centerAffix:W.value===1&&!ie.value,dirty:mt.value||e.dirty,disabled:ot.value,focused:l.value,details:ct.value,error:$t.value===!1}),{...r,default:ht=>{let{props:{class:Qe,...kt},controlRef:Ue}=ht;return V(an,null,[e.prefix&&V("span",{class:"v-text-field__prefix"},[e.prefix]),Li(V("textarea",At({ref:ue=>M.value=Ue.value=ue,class:Qe,value:a.value,onInput:U,autofocus:e.autofocus,readonly:Pt.value,disabled:ot.value,placeholder:e.placeholder,rows:e.rows,name:z.fieldName.value,autocomplete:z.fieldAutocomplete.value,onFocus:Y,onBlur:s},kt,Je),null),[[gu,{handler:p},null,{once:!0}]]),e.autoGrow&&Li(V("textarea",{class:_t([Qe,"v-textarea__sizer"]),id:`${kt.id}-sizer`,"onUpdate:modelValue":ue=>a.value=ue,ref:H,readonly:!0,"aria-hidden":"true"},null),[[_f,a.value]]),e.suffix&&V("span",{class:"v-text-field__suffix"},[e.suffix])])}})},details:Re?Ee=>V(an,null,[r.details?.(Ee),ke&&V(an,null,[V("span",null,null),ce($T,{active:e.persistentCounter||l.value,value:_.value,max:x.value,disabled:e.disabled},r.counter)])]):void 0})}),To({},T,k,M)}}),d0e=lt({withBackground:Boolean,...Tn(),...Mi(),...ti()},"VThemeProvider"),h0e=Mt()({name:"VThemeProvider",props:d0e(),setup(e,t){let{slots:n}=t;const{themeClasses:i}=Qi(e);return()=>e.withBackground?ce(e.tag,{class:_t(["v-theme-provider",i.value,e.class]),style:Xt(e.style)},{default:()=>[n.default?.()]}):n.default?.()}}),f0e=lt({dotColor:String,fillDot:Boolean,hideDot:Boolean,icon:In,iconColor:String,lineColor:String,...Tn(),...Wr(),...md(),...Ks()},"VTimelineDivider"),m0e=Mt()({name:"VTimelineDivider",props:f0e(),setup(e,t){let{slots:n}=t;const{sizeClasses:i,sizeStyles:r}=w_(e,"v-timeline-divider__dot"),{backgroundColorStyles:a,backgroundColorClasses:l}=ir(()=>e.dotColor),{roundedClasses:h}=ns(e,"v-timeline-divider__dot"),{elevationClasses:s}=wo(e),{backgroundColorClasses:p,backgroundColorStyles:_}=ir(()=>e.lineColor);return zt(()=>V("div",{class:_t(["v-timeline-divider",{"v-timeline-divider--fill-dot":e.fillDot},e.class]),style:Xt(e.style)},[V("div",{class:_t(["v-timeline-divider__before",p.value]),style:Xt(_.value)},null),!e.hideDot&&V("div",{key:"dot",class:_t(["v-timeline-divider__dot",s.value,h.value,i.value]),style:Xt(r.value)},[V("div",{class:_t(["v-timeline-divider__inner-dot",l.value,h.value]),style:Xt(a.value)},[n.default?ce(ui,{key:"icon-defaults",disabled:!e.icon,defaults:{VIcon:{color:e.iconColor,icon:e.icon,size:e.size}}},n.default):ce(Pi,{key:"icon",color:e.iconColor,icon:e.icon,size:e.size},null)])]),V("div",{class:_t(["v-timeline-divider__after",p.value]),style:Xt(_.value)},null)])),{}}}),R7=lt({density:String,dotColor:String,fillDot:Boolean,hideDot:Boolean,hideOpposite:{type:Boolean,default:void 0},icon:In,iconColor:String,lineInset:[Number,String],side:{type:String,validator:e=>e==null||["start","end"].includes(e)},...Tn(),...Bs(),...Ks(),...Wr(),...md(),...ti()},"VTimelineItem"),p0e=Mt()({name:"VTimelineItem",props:R7(),setup(e,t){let{slots:n}=t;const{dimensionStyles:i}=Fs(e),r=tn(0),a=tt();return Yt(a,l=>{l&&(r.value=l.$el.querySelector(".v-timeline-divider__dot")?.getBoundingClientRect().width??0)},{flush:"post"}),zt(()=>V("div",{class:_t(["v-timeline-item",{"v-timeline-item--fill-dot":e.fillDot,"v-timeline-item--side-start":e.side==="start","v-timeline-item--side-end":e.side==="end"},e.class]),style:Xt([{"--v-timeline-dot-size":pn(r.value),"--v-timeline-line-inset":e.lineInset?`calc(var(--v-timeline-dot-size) / 2 + ${pn(e.lineInset)})`:pn(0)},e.style])},[V("div",{class:"v-timeline-item__body",style:Xt(i.value)},[n.default?.()]),ce(m0e,{ref:a,hideDot:e.hideDot,icon:e.icon,iconColor:e.iconColor,size:e.size,elevation:e.elevation,dotColor:e.dotColor,fillDot:e.fillDot,rounded:e.rounded},{default:n.icon}),e.density!=="compact"&&V("div",{class:"v-timeline-item__opposite"},[!e.hideOpposite&&n.opposite?.()])])),{}}}),g0e=lt({align:{type:String,default:"center",validator:e=>["center","start"].includes(e)},direction:{type:String,default:"vertical",validator:e=>["vertical","horizontal"].includes(e)},justify:{type:String,default:"auto",validator:e=>["auto","center"].includes(e)},side:{type:String,validator:e=>e==null||["start","end"].includes(e)},lineThickness:{type:[String,Number],default:2},lineColor:String,truncateLine:{type:String,validator:e=>["start","end","both"].includes(e)},...Vl(R7({lineInset:0}),["dotColor","fillDot","hideOpposite","iconColor","lineInset","size"]),...Tn(),...Ts(),...ti(),...Mi()},"VTimeline"),v0e=Mt()({name:"VTimeline",props:g0e(),setup(e,t){let{slots:n}=t;const{themeClasses:i}=Qi(e),{densityClasses:r}=qa(e),{rtlClasses:a}=qs();ts({VTimelineDivider:{lineColor:$e(()=>e.lineColor)},VTimelineItem:{density:$e(()=>e.density),dotColor:$e(()=>e.dotColor),fillDot:$e(()=>e.fillDot),hideOpposite:$e(()=>e.hideOpposite),iconColor:$e(()=>e.iconColor),lineColor:$e(()=>e.lineColor),lineInset:$e(()=>e.lineInset),size:$e(()=>e.size)}});const l=me(()=>{const s=e.side?e.side:e.density!=="default"?"end":null;return s&&`v-timeline--side-${s}`}),h=me(()=>{const s=["v-timeline--truncate-line-start","v-timeline--truncate-line-end"];switch(e.truncateLine){case"both":return s;case"start":return s[0];case"end":return s[1];default:return null}});return zt(()=>ce(e.tag,{class:_t(["v-timeline",`v-timeline--${e.direction}`,`v-timeline--align-${e.align}`,`v-timeline--justify-${e.justify}`,h.value,{"v-timeline--inset-line":!!e.lineInset},i.value,r.value,l.value,a.value,e.class]),style:Xt([{"--v-timeline-line-thickness":pn(e.lineThickness)},e.style])},n)),{}}});function yp(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return String(e).padStart(t,"0")}const _0e=lt({allowedValues:Function,ampm:Boolean,color:String,disabled:Boolean,displayedValue:null,double:Boolean,format:{type:Function,default:e=>e},max:{type:Number,required:!0},min:{type:Number,required:!0},scrollable:Boolean,readonly:Boolean,rotate:{type:Number,default:0},step:{type:Number,default:1},modelValue:{type:Number}},"VTimePickerClock"),wI=Mt()({name:"VTimePickerClock",props:_0e(),emits:{change:e=>!0,input:e=>!0},setup(e,t){let{emit:n}=t;const i=tt(null),r=tt(null),a=tt(void 0),l=tt(!1),h=tt(null),s=tt(null),p=yN(De=>n("change",De),750),{textColorClasses:_,textColorStyles:x}=Uo(()=>e.color),{backgroundColorClasses:T,backgroundColorStyles:k}=ir(()=>e.color),A=me(()=>e.max-e.min+1),M=me(()=>e.double?A.value/2:A.value),R=me(()=>360/M.value),F=me(()=>R.value*Math.PI/180),z=me(()=>e.modelValue==null?e.min:e.modelValue),G=me(()=>.62),Y=me(()=>{const De=[];for(let Ge=e.min;Ge<=e.max;Ge=Ge+e.step)De.push(Ge);return De});Yt(()=>e.modelValue,De=>{a.value=De});function J(De){a.value!==De&&(a.value=De),n("input",De)}function re(De){return!e.allowedValues||e.allowedValues(De)}function X(De){if(!e.scrollable||e.disabled)return;De.preventDefault();const Ge=Math.sign(-De.deltaY||1);let Ee=z.value;do Ee=Ee+Ge,Ee=(Ee-e.min+A.value)%A.value+e.min;while(!re(Ee)&&Ee!==z.value);Ee!==e.displayedValue&&J(Ee),p(Ee)}function U(De){return e.double&&De-e.min>=M.value}function H(De){return U(De)?G.value:1}function W(De){const Ge=e.rotate*Math.PI/180;return{x:Math.sin((De-e.min)*F.value+Ge)*H(De),y:-Math.cos((De-e.min)*F.value+Ge)*H(De)}}function ie(De,Ge){const Ee=(Math.round(De/R.value)+(Ge?M.value:0))%A.value+e.min;return De<360-R.value/2?Ee:Ge?e.max-M.value+1:e.min}function Q(De){const{x:Ge,y:Ee}=W(De);return{left:`${Math.round(50+Ge*50)}%`,top:`${Math.round(50+Ee*50)}%`}}function te(De,Ge){const Ee=Ge.x-De.x,it=Ge.y-De.y;return Math.sqrt(Ee*Ee+it*it)}function ke(De,Ge){const Ee=2*Math.atan2(Ge.y-De.y-te(De,Ge),Ge.x-De.x);return Math.abs(Ee*180/Math.PI)}function Re(De){h.value===null&&(h.value=De),s.value=De,J(De)}function Be(De){if(De.preventDefault(),!l.value&&De.type!=="click"||!i.value)return;const{width:Ge,top:Ee,left:it}=i.value?.getBoundingClientRect(),{width:ot}=r.value?.getBoundingClientRect()??{width:0},{clientX:mt,clientY:Pt}="touches"in De?De.touches[0]:De,$t={x:Ge/2,y:-Ge/2},ct={x:mt-it,y:Ee-Pt},ht=Math.round(ke($t,ct)-e.rotate+360)%360,Qe=e.double&&te($t,ct)<(ot+ot*G.value)/4,kt=Math.ceil(15/R.value);let Ue;for(let ue=0;ue<kt;ue++)if(Ue=ie(ht+ue*R.value,Qe),re(Ue)||(Ue=ie(ht-ue*R.value,Qe),re(Ue)))return Re(Ue)}function Je(De){e.disabled||(De.preventDefault(),window.addEventListener("mousemove",Be),window.addEventListener("touchmove",Be),window.addEventListener("mouseup",nt),window.addEventListener("touchend",nt),h.value=null,s.value=null,l.value=!0,Be(De))}function nt(De){De.stopPropagation(),window.removeEventListener("mousemove",Be),window.removeEventListener("touchmove",Be),window.removeEventListener("mouseup",nt),window.removeEventListener("touchend",nt),l.value=!1,s.value!==null&&re(s.value)&&n("change",s.value)}zt(()=>V("div",{class:_t([{"v-time-picker-clock":!0,"v-time-picker-clock--indeterminate":e.modelValue==null,"v-time-picker-clock--readonly":e.readonly}]),onMousedown:Je,onTouchstart:Je,onWheel:X,ref:i},[V("div",{class:"v-time-picker-clock__inner",ref:r},[V("div",{class:_t([{"v-time-picker-clock__hand":!0,"v-time-picker-clock__hand--inner":U(e.modelValue)},_.value]),style:Xt([{transform:`rotate(${e.rotate+R.value*(z.value-e.min)}deg) scaleY(${H(z.value)})`},x.value])},null),Y.value.map(De=>{const Ge=De===z.value;return V("div",{class:_t([{"v-time-picker-clock__item":!0,"v-time-picker-clock__item--active":Ge,"v-time-picker-clock__item--disabled":e.disabled||!re(De)},Ge&&T.value]),style:Xt([Q(De),Ge&&k.value])},[V("span",null,[e.format(De)])])})])]))}}),y0e=lt({ampm:Boolean,color:String,disabled:Boolean,hour:Number,minute:Number,second:Number,period:String,readonly:Boolean,useSeconds:Boolean,value:Number,viewMode:String},"VTimePickerControls"),TI=Mt()({name:"VTimePickerControls",props:y0e(),emits:{"update:period":e=>!0,"update:viewMode":e=>!0},setup(e,t){let{emit:n,slots:i}=t;const{t:r}=fr();return zt(()=>{let a=e.hour;return e.ampm&&(a=a?(a-1)%12+1:12),V("div",{class:"v-time-picker-controls"},[V("div",{class:_t({"v-time-picker-controls__time":!0,"v-time-picker-controls__time--with-seconds":e.useSeconds})},[ce(mi,{active:e.viewMode==="hour",color:e.viewMode==="hour"?e.color:void 0,disabled:e.disabled,variant:"tonal",class:_t({"v-time-picker-controls__time__btn":!0,"v-time-picker-controls__time--with-ampm__btn":e.ampm,"v-time-picker-controls__time--with-seconds__btn":e.useSeconds}),text:e.hour==null?"--":yp(`${a}`),onClick:()=>n("update:viewMode","hour")},null),V("span",{class:_t(["v-time-picker-controls__time__separator",{"v-time-picker-controls--with-seconds__time__separator":e.useSeconds}])},[Bn(":")]),ce(mi,{active:e.viewMode==="minute",color:e.viewMode==="minute"?e.color:void 0,class:_t({"v-time-picker-controls__time__btn":!0,"v-time-picker-controls__time__btn__active":e.viewMode==="minute","v-time-picker-controls__time--with-ampm__btn":e.ampm,"v-time-picker-controls__time--with-seconds__btn":e.useSeconds}),disabled:e.disabled,variant:"tonal",text:e.minute==null?"--":yp(e.minute),onClick:()=>n("update:viewMode","minute")},null),e.useSeconds&&V("span",{class:_t(["v-time-picker-controls__time__separator",{"v-time-picker-controls--with-seconds__time__separator":e.useSeconds}]),key:"secondsDivider"},[Bn(":")]),e.useSeconds&&ce(mi,{key:"secondsVal",active:e.viewMode==="second",color:e.viewMode==="second"?e.color:void 0,variant:"tonal",onClick:()=>n("update:viewMode","second"),class:_t({"v-time-picker-controls__time__btn":!0,"v-time-picker-controls__time__btn__active":e.viewMode==="second","v-time-picker-controls__time--with-seconds__btn":e.useSeconds}),disabled:e.disabled,text:e.second==null?"--":yp(e.second)},null),e.ampm&&V("div",{class:"v-time-picker-controls__ampm"},[ce(mi,{active:e.period==="am",color:e.period==="am"?e.color:void 0,class:_t({"v-time-picker-controls__ampm__am":!0,"v-time-picker-controls__ampm__btn":!0,"v-time-picker-controls__ampm__btn__active":e.period==="am"}),disabled:e.disabled,text:r("$vuetify.timePicker.am"),variant:e.disabled&&e.period==="am"?"elevated":"tonal",onClick:()=>e.period!=="am"?n("update:period","am"):null},null),ce(mi,{active:e.period==="pm",color:e.period==="pm"?e.color:void 0,class:_t({"v-time-picker-controls__ampm__pm":!0,"v-time-picker-controls__ampm__btn":!0,"v-time-picker-controls__ampm__btn__active":e.period==="pm"}),disabled:e.disabled,text:r("$vuetify.timePicker.pm"),variant:e.disabled&&e.period==="pm"?"elevated":"tonal",onClick:()=>e.period!=="pm"?n("update:period","pm"):null},null)])])])}),{}}}),b0e=rc(24),O7=rc(12),x0e=O7.map(e=>e+12);rc(60);const w0e=lt({allowedHours:[Function,Array],allowedMinutes:[Function,Array],allowedSeconds:[Function,Array],disabled:Boolean,format:{type:String,default:"ampm"},max:String,min:String,viewMode:{type:String,default:"hour"},period:{type:String,default:"am",validator:e=>["am","pm"].includes(e)},modelValue:null,readonly:Boolean,scrollable:Boolean,useSeconds:Boolean,...hr(QT({title:"$vuetify.timePicker.title"}),["landscape"])},"VTimePicker"),T0e=Mt()({name:"VTimePicker",props:w0e(),emits:{"update:hour":e=>!0,"update:minute":e=>!0,"update:period":e=>!0,"update:second":e=>!0,"update:modelValue":e=>!0,"update:viewMode":e=>!0},setup(e,t){let{emit:n,slots:i}=t;const{t:r}=fr(),a=tt(null),l=tt(null),h=tt(null),s=tt(null),p=tt(null),_=tt(null),x=Pn(e,"period","am"),T=Pn(e,"viewMode","hour"),k=tt(null),A=tt(null),M=me(()=>{let Q;if(e.allowedHours instanceof Array?Q=Re=>e.allowedHours.includes(Re):Q=e.allowedHours,!e.min&&!e.max)return Q;const te=e.min?Number(e.min.split(":")[0]):0,ke=e.max?Number(e.max.split(":")[0]):23;return Re=>Re>=Number(te)&&Re<=Number(ke)&&(!Q||Q(Re))}),R=me(()=>{let Q;const te=!M.value||a.value===null||M.value(a.value);if(e.allowedMinutes instanceof Array?Q=Ge=>e.allowedMinutes.includes(Ge):Q=e.allowedMinutes,!e.min&&!e.max)return te?Q:()=>!1;const[ke,Re]=e.min?e.min.split(":").map(Number):[0,0],[Be,Je]=e.max?e.max.split(":").map(Number):[23,59],nt=ke*60+Number(Re),De=Be*60+Number(Je);return Ge=>{const Ee=60*a.value+Ge;return Ee>=nt&&Ee<=De&&te&&(!Q||Q(Ge))}}),F=me(()=>{let Q;const ke=(!M.value||a.value===null||M.value(a.value))&&(!R.value||l.value===null||R.value(l.value));if(e.allowedSeconds instanceof Array?Q=ot=>e.allowedSeconds.includes(ot):Q=e.allowedSeconds,!e.min&&!e.max)return ke?Q:()=>!1;const[Re,Be,Je]=e.min?e.min.split(":").map(Number):[0,0,0],[nt,De,Ge]=e.max?e.max.split(":").map(Number):[23,59,59],Ee=Re*3600+Be*60+Number(Je||0),it=nt*3600+De*60+Number(Ge||0);return ot=>{const mt=3600*a.value+60*l.value+ot;return mt>=Ee&&mt<=it&&ke&&(!Q||Q(ot))}}),z=me(()=>e.format==="ampm");Yt(()=>e.period,Q=>H(Q)),Yt(()=>e.modelValue,Q=>X(Q)),Mr(()=>{X(e.modelValue)});function G(){return a.value!=null&&l.value!=null&&(!e.useSeconds||h.value!=null)?`${yp(a.value)}:${yp(l.value)}`+(e.useSeconds?`:${yp(h.value)}`:""):null}function Y(){const Q=G();Q!==null&&n("update:modelValue",Q)}function J(Q){return Q?(Q-1)%12+1:12}function re(Q,te){return Q%12+(te==="pm"?12:0)}function X(Q){if(Q==null||Q==="")a.value=null,l.value=null,h.value=null;else if(Q instanceof Date)a.value=Q.getHours(),l.value=Q.getMinutes(),h.value=Q.getSeconds();else{const[te,,ke,,Re,Be]=Q.trim().toLowerCase().match(/^(\d+):(\d+)(:(\d+))?([ap]m)?$/)||new Array(6);a.value=Be?re(parseInt(te,10),Be):parseInt(te,10),l.value=parseInt(ke,10),h.value=parseInt(Re||0,10)}x.value=a.value==null||a.value<12?"am":"pm"}function U(Q,te){const ke=M.value;if(!ke)return te;const Re=z.value?te<12?O7:x0e:b0e;return((Re.find(Je=>ke((Je+te)%Re.length+Re[0]))||0)+te)%Re.length+Re[0]}function H(Q){if(x.value=Q,a.value!=null){const te=a.value+(x.value==="am"?-12:12);a.value=U("hour",te)}return n("update:period",Q),Y(),!0}function W(Q){T.value==="hour"?a.value=z.value?re(Q,x.value):Q:T.value==="minute"?l.value=Q:h.value=Q}function ie(Q){switch(T.value||"hour"){case"hour":n("update:hour",Q);break;case"minute":n("update:minute",Q);break;case"second":n("update:second",Q);break}const te=a.value!==null&&l.value!==null&&(e.useSeconds?h.value!==null:!0);T.value==="hour"?T.value="minute":e.useSeconds&&T.value==="minute"&&(T.value="second"),!(a.value===s.value&&l.value===p.value&&(!e.useSeconds||h.value===_.value)||G()===null)&&(s.value=a.value,p.value=l.value,e.useSeconds&&(_.value=h.value),te&&Y())}zt(()=>{const Q=d_.filterProps(e),te=TI.filterProps(e),ke=wI.filterProps(hr(e,["format","modelValue","min","max"]));return ce(d_,At(Q,{color:void 0,class:["v-time-picker",e.class],style:e.style}),{title:()=>i.title?.()??V("div",{class:"v-time-picker__title"},[r(e.title)]),header:()=>ce(TI,At(te,{ampm:z.value,hour:a.value,minute:l.value,period:x.value,second:h.value,viewMode:T.value,"onUpdate:period":Re=>H(Re),"onUpdate:viewMode":Re=>T.value=Re,ref:k}),null),default:()=>ce(wI,At(ke,{allowedValues:T.value==="hour"?M.value:T.value==="minute"?R.value:F.value,double:T.value==="hour"&&!z.value,format:T.value==="hour"?z.value?J:Re=>Re:Re=>yp(Re,2),max:T.value==="hour"?z.value&&x.value==="am"?11:23:59,min:T.value==="hour"&&z.value&&x.value==="pm"?12:0,size:20,step:T.value==="hour"?1:5,modelValue:T.value==="hour"?a.value:T.value==="minute"?l.value:h.value,onChange:ie,onInput:W,ref:A}),null),actions:i.actions})})}}),S0e=lt({...Tn(),...Nc({variant:"text"})},"VToolbarItems"),E0e=Mt()({name:"VToolbarItems",props:S0e(),setup(e,t){let{slots:n}=t;return ts({VBtn:{color:$e(()=>e.color),height:"inherit",variant:$e(()=>e.variant)}}),zt(()=>V("div",{class:_t(["v-toolbar-items",e.class]),style:Xt(e.style)},[n.default?.()])),{}}}),C0e=lt({id:String,interactive:Boolean,text:String,...hr(Nb({closeOnBack:!1,location:"end",locationStrategy:"connected",eager:!0,minWidth:0,offset:10,openOnClick:!1,openOnHover:!0,origin:"auto",scrim:!1,scrollStrategy:"reposition",transition:null}),["absolute","persistent"])},"VTooltip"),V7=Mt()({name:"VTooltip",props:C0e(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const i=Pn(e,"modelValue"),{scopeId:r}=hg(),a=ha(),l=$e(()=>e.id||`v-tooltip-${a}`),h=tt(),s=me(()=>e.location.split(" ").length>1?e.location:e.location+" center"),p=me(()=>e.origin==="auto"||e.origin==="overlap"||e.origin.split(" ").length>1||e.location.split(" ").length>1?e.origin:e.origin+" center"),_=$e(()=>e.transition!=null?e.transition:i.value?"scale-transition":"fade-transition"),x=me(()=>At({"aria-describedby":l.value},e.activatorProps));return zt(()=>{const T=dd.filterProps(e);return ce(dd,At({ref:h,class:["v-tooltip",{"v-tooltip--interactive":e.interactive},e.class],style:e.style,id:l.value},T,{modelValue:i.value,"onUpdate:modelValue":k=>i.value=k,transition:_.value,absolute:!0,location:s.value,origin:p.value,persistent:!0,role:"tooltip",activatorProps:x.value,_disableGlobalStack:!0},r),{activator:n.activator,default:function(){for(var k=arguments.length,A=new Array(k),M=0;M<k;M++)A[M]=arguments[M];return n.default?.(...A)??e.text}})}),To({},h)}}),k0e=lt({...hr(B2({collapseIcon:"$treeviewCollapse",expandIcon:"$treeviewExpand"}),["subgroup"])},"VTreeviewGroup"),SI=Mt()({name:"VTreeviewGroup",props:k0e(),setup(e,t){let{slots:n}=t;const i=tt(),r=me(()=>i.value?.isOpen?e.collapseIcon:e.expandIcon),a=me(()=>({VTreeviewItem:{prependIcon:void 0,appendIcon:void 0,toggleIcon:r.value}}));return zt(()=>{const l=Q0.filterProps(e);return ce(Q0,At(l,{ref:i,class:["v-treeview-group",e.class],subgroup:!0}),{...n,activator:n.activator?h=>V(an,null,[ce(ui,{defaults:a.value},{default:()=>[n.activator?.(h)]})]):void 0})}),{}}}),B7=Symbol.for("vuetify:v-treeview"),F7=lt({loading:Boolean,hideActions:Boolean,hasCustomPrepend:Boolean,indentLines:Array,toggleIcon:In,...N2({slim:!0})},"VTreeviewItem"),EI=Mt()({name:"VTreeviewItem",props:F7(),emits:{toggleExpand:e=>!0},setup(e,t){let{slots:n,emit:i}=t;const r=Si(B7,{visibleIds:tt()}).visibleIds,a=tt(),l=me(()=>a.value?.root.activatable.value&&a.value?.isGroupActivator),h=me(()=>a.value?.link.isClickable.value||e.value!=null&&!!a.value?.list),s=me(()=>!e.disabled&&e.link!==!1&&(e.link||h.value||l.value)),p=me(()=>r.value&&!r.value.has(Un(a.value?.id)));function _(T){s.value&&l.value&&a.value?.activate(!a.value?.isActivated,T)}function x(T){T.preventDefault(),T.stopPropagation(),i("toggleExpand",T)}return zt(()=>{const T=vu.filterProps(e),k=n.prepend||e.toggleIcon||e.indentLines||e.prependIcon||e.prependAvatar;return ce(vu,At({ref:a},T,{active:a.value?.isActivated||void 0,class:["v-treeview-item",{"v-treeview-item--activatable-group-activator":l.value,"v-treeview-item--filtered":p.value},e.class],ripple:!1,onClick:_}),{...n,prepend:k?A=>V(an,null,[e.indentLines&&e.indentLines.length>0?V("div",{key:"indent-lines",class:"v-treeview-indent-lines",style:{"--v-indent-parts":e.indentLines.length}},[e.indentLines.map(M=>V("div",{class:_t(`v-treeview-indent-line v-treeview-indent-line--${M}`)},null))]):"",!e.hideActions&&ce(kP,{start:!0},{default:()=>[e.toggleIcon?V(an,null,[n.toggle?ce(ui,{key:"prepend-defaults",defaults:{VBtn:{density:"compact",icon:e.toggleIcon,variant:"text",loading:e.loading},VProgressCircular:{indeterminate:"disable-shrink",size:20,width:2}}},{default:()=>[n.toggle({...A,loading:e.loading,props:{onClick:x}})]}):ce(mi,{key:"prepend-toggle",density:"compact",icon:e.toggleIcon,loading:e.loading,variant:"text",onClick:x},{loader:()=>ce(Hp,{indeterminate:"disable-shrink",size:"20",width:"2"},null)})]):V("div",{class:"v-treeview-item__level"},null)]}),e.hasCustomPrepend?ce(ui,{key:"prepend-defaults",defaults:{VAvatar:{density:e.density,image:e.appendAvatar},VIcon:{density:e.density,icon:e.appendIcon},VListItemAction:{start:!0}}},{default:()=>[n.prepend?.(A)]}):V(an,null,[n.prepend?.(A),e.prependAvatar&&ce(uc,{key:"prepend-avatar",density:e.density,image:e.prependAvatar},null),e.prependIcon&&ce(Pi,{key:"prepend-icon",density:e.density,icon:e.prependIcon},null)])]):void 0})}),To({},a)}}),z7=lt({fluid:Boolean,disabled:Boolean,loadChildren:Function,loadingIcon:{type:String,default:"$loading"},items:Array,openOnClick:{type:Boolean,default:void 0},indeterminateIcon:{type:In,default:"$checkboxIndeterminate"},falseIcon:In,trueIcon:In,returnObject:Boolean,activatable:Boolean,selectable:Boolean,selectedColor:String,selectStrategy:[String,Function,Object],index:Number,isLastGroup:Boolean,separateRoots:Boolean,parentIndentLines:Array,indentLinesVariant:String,path:{type:Array,default:()=>[]},...Vl(F7(),["hideActions"]),...Ts()},"VTreeviewChildren"),Hw=Mt()({name:"VTreeviewChildren",props:z7(),setup(e,t){let{slots:n}=t;const i=so(new Set),r=tt([]),a=me(()=>!e.disabled&&(e.openOnClick!=null?e.openOnClick:e.selectable&&!e.activatable));async function l(s){try{if(!e.items?.length||!e.loadChildren)return;s?.children?.length===0&&(i.add(s.value),await e.loadChildren(s.raw))}finally{i.delete(s.value)}}function h(s,p){e.selectable&&s(p)}return()=>n.default?.()??e.items?.map((s,p,_)=>{const{children:x,props:T}=s,k=i.has(s.value),A=!!_.at(p+1)?.children,M=e.path?.length??0,R=_.length-1===p,F={index:p,depth:M,isFirst:p===0,isLast:R,path:[...e.path,p],hideAction:e.hideActions},z=Jne({depth:M,isLast:R,isLastGroup:e.isLastGroup,leafLinks:!e.hideActions&&!e.fluid,separateRoots:e.separateRoots,parentIndentLines:e.parentIndentLines,variant:e.indentLinesVariant}),G={toggle:n.toggle?re=>n.toggle?.({...re,...F,item:s.raw,internalItem:s,loading:k}):void 0,prepend:re=>V(an,null,[e.selectable&&(!x||x&&!["leaf","single-leaf"].includes(e.selectStrategy))&&ce(kP,{start:!0},{default:()=>[ce(ud,{key:s.value,modelValue:re.isSelected,disabled:e.disabled,loading:k,color:e.selectedColor,density:e.density,indeterminate:re.isIndeterminate,indeterminateIcon:e.indeterminateIcon,falseIcon:e.falseIcon,trueIcon:e.trueIcon,"onUpdate:modelValue":X=>h(re.select,X),onClick:X=>X.stopPropagation(),onKeydown:X=>{["Enter","Space"].includes(X.key)&&(X.stopPropagation(),h(re.select,re.isSelected))}},null)]}),n.prepend?.({...re,...F,item:s.raw,internalItem:s})]),append:n.append?re=>n.append?.({...re,...F,item:s.raw,internalItem:s}):void 0,title:n.title?re=>n.title?.({...re,item:s.raw,internalItem:s}):void 0,subtitle:n.subtitle?re=>n.subtitle?.({...re,item:s.raw,internalItem:s}):void 0},Y=SI.filterProps(T),J=Hw.filterProps({...e,...F});return x?ce(SI,At(Y,{value:e.returnObject?s.raw:Y?.value,rawId:Y?.value}),{activator:re=>{let{props:X}=re;const U={...T,...X,value:T?.value,indentLines:z.node,onToggleExpand:[()=>l(s),X.onClick],onClick:a.value?[()=>l(s),X.onClick]:()=>h(r.value[p]?.select,!r.value[p]?.isSelected)};return Hx(n.header,{props:U,item:s.raw,internalItem:s,loading:k},()=>ce(EI,At({ref:H=>r.value[p]=H},U,{hasCustomPrepend:!!n.prepend,hideActions:e.hideActions,value:e.returnObject?s.raw:T.value,loading:k}),G))},default:()=>ce(Hw,At(J,{items:x,indentLinesVariant:e.indentLinesVariant,parentIndentLines:z.children,isLastGroup:A,returnObject:e.returnObject}),n)}):Hx(n.item,{props:T,item:s.raw,internalItem:s},()=>s.type==="divider"?Hx(n.divider,{props:s.raw},()=>ce(oc,s.props,null)):s.type==="subheader"?Hx(n.subheader,{props:s.raw},()=>ce(k_,s.props,null)):ce(EI,At(T,{hasCustomPrepend:!!n.prepend,hideActions:e.hideActions,indentLines:z.leaf,value:e.returnObject?Un(s.raw):T.value}),G))})}});function N7(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];for(const n of e)t.push(n),n.children&&N7(n.children,t);return t}const I0e=lt({openAll:Boolean,indentLines:[Boolean,String],search:String,...I_({filterKeys:["title"]}),...hr(z7(),["index","path","indentLinesVariant","parentIndentLines","isLastGroup"]),...hr(G2({collapseIcon:"$treeviewCollapse",expandIcon:"$treeviewExpand",slim:!0}),["nav","openStrategy"]),modelValue:Array},"VTreeview"),A0e=Mt()({name:"VTreeview",props:I0e(),emits:{"update:opened":e=>!0,"update:activated":e=>!0,"update:selected":e=>!0,"update:modelValue":e=>!0,"click:open":e=>!0,"click:select":e=>!0},setup(e,t){let{slots:n,emit:i}=t;const{items:r}=H2(e),a=$e(()=>e.activeColor),l=$e(()=>e.baseColor),h=$e(()=>e.color),s=Pn(e,"activated"),p=Pn(e,"selected"),_=me({get:()=>e.modelValue??p.value,set(G){p.value=G,i("update:modelValue",G)}}),x=tt(),T=me(()=>e.openAll?z(r.value):e.opened),k=me(()=>N7(r.value)),A=$e(()=>e.search),{filteredItems:M}=A_(e,k,A),R=me(()=>{if(!A.value)return null;const G=x.value?.getPath;return G?new Set(M.value.flatMap(Y=>{const J=e.returnObject?Y.raw:Y.props.value;return[...G(J),...F(J)].map(Un)})):null});function F(G){const Y=[],J=(x.value?.children.get(G)??[]).slice();for(;J.length;){const re=J.shift();re&&(Y.push(re),J.push(...(x.value?.children.get(re)??[]).slice()))}return Y}function z(G){let Y=[];for(const J of G)J.children&&(Y.push(e.returnObject?Un(J.raw):J.value),J.children&&(Y=Y.concat(z(J.children))));return Y}return Rr(B7,{visibleIds:R}),ts({VTreeviewGroup:{activeColor:a,baseColor:l,color:h,collapseIcon:$e(()=>e.collapseIcon),expandIcon:$e(()=>e.expandIcon)},VTreeviewItem:{activeClass:$e(()=>e.activeClass),activeColor:a,baseColor:l,color:h,density:$e(()=>e.density),disabled:$e(()=>e.disabled),lines:$e(()=>e.lines),variant:$e(()=>e.variant)}}),zt(()=>{const G=o_.filterProps(e),Y=Hw.filterProps(e),J=typeof e.indentLines=="boolean"?"default":e.indentLines;return ce(o_,At({ref:x},G,{class:["v-treeview",{"v-treeview--fluid":e.fluid},e.class],openStrategy:"multiple",style:e.style,opened:T.value,activated:s.value,"onUpdate:activated":re=>s.value=re,selected:_.value,"onUpdate:selected":re=>_.value=re}),{default:()=>[ce(Hw,At(Y,{density:e.density,returnObject:e.returnObject,items:r.value,parentIndentLines:e.indentLines?[]:void 0,indentLinesVariant:J}),n)]})}),{}}}),P0e=Mt()({name:"VValidation",props:S2(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const i=E2(e,"validation");return()=>n.default?.(i)}}),M0e=Object.freeze(Object.defineProperty({__proto__:null,VAlert:h2,VAlertTitle:t2,VApp:xge,VAppBar:Cge,VAppBarNavIcon:Ige,VAppBarTitle:Age,VAutocomplete:Xk,VAvatar:uc,VBadge:Mge,VBanner:Rge,VBannerActions:P9,VBannerText:M9,VBottomNavigation:Vge,VBottomSheet:Fge,VBreadcrumbs:Uge,VBreadcrumbsDivider:L9,VBreadcrumbsItem:R9,VBtn:mi,VBtnGroup:Nk,VBtnToggle:Ore,VCard:xv,VCardActions:l8,VCardItem:d8,VCardSubtitle:c8,VCardText:h8,VCardTitle:u8,VCarousel:Zge,VCarouselItem:Qge,VCheckbox:Cse,VCheckboxBtn:ud,VChip:Ds,VChipGroup:Mse,VClassIcon:pP,VCode:eve,VCol:Woe,VColorPicker:Fve,VCombobox:Nve,VComponentIcon:zk,VConfirmEdit:Uve,VContainer:f8,VCounter:$T,VDataIterator:Qve,VDataTable:f_e,VDataTableFooter:lb,VDataTableHeaders:Yp,VDataTableRow:mM,VDataTableRows:Zp,VDataTableServer:v_e,VDataTableVirtual:p_e,VDatePicker:w_e,VDatePickerControls:pI,VDatePickerHeader:gI,VDatePickerMonth:vI,VDatePickerMonths:_I,VDatePickerYears:yI,VDefaultsProvider:ui,VDialog:uI,VDialogBottomTransition:dse,VDialogTopTransition:hse,VDialogTransition:zT,VDivider:oc,VEmptyState:S_e,VExpandTransition:NT,VExpandXTransition:xP,VExpansionPanel:E_e,VExpansionPanelText:bI,VExpansionPanelTitle:xI,VExpansionPanels:I_e,VFab:P_e,VFabTransition:use,VFadeTransition:K0,VField:rm,VFieldLabel:jy,VFileInput:V_e,VFooter:F_e,VForm:N_e,VHover:U_e,VIcon:Pi,VImg:xh,VInfiniteScroll:W_e,VInput:da,VItem:q_e,VItemGroup:G_e,VKbd:X_e,VLabel:E_,VLayout:Z_e,VLayoutItem:Q_e,VLazy:tye,VLigatureIcon:tre,VList:o_,VListGroup:Q0,VListImg:Zse,VListItem:vu,VListItemAction:kP,VListItemMedia:eoe,VListItemSubtitle:F2,VListItemTitle:z2,VListSubheader:k_,VLocaleProvider:iye,VMain:sye,VMenu:a_,VMessages:w2,VNavigationDrawer:mye,VNoSsr:pye,VNumberInput:bye,VOtpInput:wye,VOverlay:dd,VPagination:fI,VParallax:Eye,VProgressCircular:Hp,VProgressLinear:Rb,VRadio:kye,VRadioGroup:Aye,VRangeSlider:Mye,VRating:Lye,VResponsive:jk,VRow:Zoe,VScaleTransition:bP,VScrollXReverseTransition:mse,VScrollXTransition:fse,VScrollYReverseTransition:gse,VScrollYTransition:pse,VSelect:Vv,VSelectionControl:im,VSelectionControlGroup:v2,VSheet:nd,VSkeletonLoader:Bye,VSlideGroup:Z0,VSlideGroupItem:Fye,VSlideXReverseTransition:_se,VSlideXTransition:vse,VSlideYReverseTransition:yse,VSlideYTransition:X0,VSlider:ab,VSnackbar:Ow,VSnackbarQueue:Nye,VSpacer:S8,VSparkline:Wye,VSpeedDial:Gye,VStepper:Qye,VStepperActions:E7,VStepperHeader:C7,VStepperItem:k7,VStepperWindow:I7,VStepperWindowItem:A7,VSvgIcon:mP,VSwitch:t0e,VSystemBar:i0e,VTab:M7,VTable:Jp,VTabs:l0e,VTabsWindow:D7,VTabsWindowItem:L7,VTextField:wh,VTextarea:u0e,VThemeProvider:h0e,VTimePicker:T0e,VTimePickerClock:wI,VTimePickerControls:TI,VTimeline:v0e,VTimelineItem:p0e,VToolbar:cI,VToolbarItems:E0e,VToolbarTitle:rM,VTooltip:V7,VTreeview:A0e,VTreeviewGroup:SI,VTreeviewItem:EI,VValidation:P0e,VVirtualScroll:UT,VWindow:Kp,VWindowItem:Xp},Symbol.toStringTag,{value:"Module"}));function D0e(e,t){const n=t.modifiers||{},i=t.value,{once:r,immediate:a,...l}=n,h=!Object.keys(l).length,{handler:s,options:p}=typeof i=="object"?i:{handler:i,options:{attributes:l?.attr??h,characterData:l?.char??h,childList:l?.child??h,subtree:l?.sub??h}},_=new MutationObserver(function(){let x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],T=arguments.length>1?arguments[1]:void 0;s?.(x,T),r&&$7(e,t)});a&&s?.([],_),e._mutate=Object(e._mutate),e._mutate[t.instance.$.uid]={observer:_},_.observe(e,p)}function $7(e,t){e._mutate?.[t.instance.$.uid]&&(e._mutate[t.instance.$.uid].observer.disconnect(),delete e._mutate[t.instance.$.uid])}const L0e={mounted:D0e,unmounted:$7};function R0e(e,t){const n=t.value,i={passive:!t.modifiers?.active};window.addEventListener("resize",n,i),e._onResize=Object(e._onResize),e._onResize[t.instance.$.uid]={handler:n,options:i},t.modifiers?.quiet||n()}function O0e(e,t){if(!e._onResize?.[t.instance.$.uid])return;const{handler:n,options:i}=e._onResize[t.instance.$.uid];window.removeEventListener("resize",n,i),delete e._onResize[t.instance.$.uid]}const V0e={mounted:R0e,unmounted:O0e};function U7(e,t){const{self:n=!1}=t.modifiers??{},i=t.value,r=typeof i=="object"&&i.options||{passive:!0},a=typeof i=="function"||"handleEvent"in i?i:i.handler,l=n?e:t.arg?document.querySelector(t.arg):window;l&&(l.addEventListener("scroll",a,r),e._onScroll=Object(e._onScroll),e._onScroll[t.instance.$.uid]={handler:a,options:r,target:n?void 0:l})}function j7(e,t){if(!e._onScroll?.[t.instance.$.uid])return;const{handler:n,options:i,target:r=e}=e._onScroll[t.instance.$.uid];r.removeEventListener("scroll",n,i),delete e._onScroll[t.instance.$.uid]}function B0e(e,t){t.value!==t.oldValue&&(j7(e,t),U7(e,t))}const F0e={mounted:U7,unmounted:j7,updated:B0e};function z0e(e,t){const n=typeof e=="string"?xW(e):e,i=N0e(n,t);return{mounted:i,updated:i,unmounted(r){BB(null,r)}}}function N0e(e,t){return function(n,i,r){const a=typeof t=="function"?t(i):t,l=i.value?.text??i.value??a?.text,h=N0(i.value)?i.value:{},s=()=>l??n.textContent,p=(r.ctx===i.instance.$?$0e(r,i.instance.$)?.provides:r.ctx?.provides)??i.instance.$.provides,_=Sh(e,At(a,h),s);_.appContext=Object.assign(Object.create(null),i.instance.$.appContext,{provides:p}),BB(_,n)}}function $0e(e,t){const n=new Set,i=a=>{for(const l of a){if(!l)continue;if(l===e||l.el&&e.el&&l.el===e.el)return!0;n.add(l);let h;if(l.suspense?h=i([l.ssContent]):Array.isArray(l.children)?h=i(l.children):l.component?.vnode&&(h=i([l.component?.subTree])),h)return h;n.delete(l)}return!1};if(!i([t.subTree]))return t;const r=Array.from(n).reverse();for(const a of r)if(a.component)return a.component;return t}const U0e=z0e(V7,e=>({activator:"parent",location:e.arg?.replace("-"," "),text:typeof e.value=="boolean"?void 0:e.value})),j0e=Object.freeze(Object.defineProperty({__proto__:null,ClickOutside:Kk,Intersect:gu,Mutate:L0e,Resize:V0e,Ripple:Ha,Scroll:F0e,Tooltip:U0e,Touch:Ww},Symbol.toStringTag,{value:"Module"})),W0e=JN({components:M0e,directives:j0e,theme:{defaultTheme:"light",themes:{light:{dark:!1,colors:{primary:"#f97316"}},dark:{dark:!0,colors:{primary:"#f97316"}}}}});zH(vge).use(W0e).mount("#app");
