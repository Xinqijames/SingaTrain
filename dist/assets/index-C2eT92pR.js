(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();/**
* @vue/shared v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function CI(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const zr={},xv=[],Yu=()=>{},fF=()=>!1,Y1=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),kI=e=>e.startsWith("onUpdate:"),yo=Object.assign,II=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},mW=Object.prototype.hasOwnProperty,Sr=(e,t)=>mW.call(e,t),Zn=Array.isArray,wv=e=>p_(e)==="[object Map]",Z1=e=>p_(e)==="[object Set]",YL=e=>p_(e)==="[object Date]",pW=e=>p_(e)==="[object RegExp]",gi=e=>typeof e=="function",Qr=e=>typeof e=="string",rd=e=>typeof e=="symbol",Ar=e=>e!==null&&typeof e=="object",mF=e=>(Ar(e)||gi(e))&&gi(e.then)&&gi(e.catch),pF=Object.prototype.toString,p_=e=>pF.call(e),gW=e=>p_(e).slice(8,-1),gF=e=>p_(e)==="[object Object]",AI=e=>Qr(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Yy=CI(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),J1=e=>{const t=Object.create(null);return(n=>t[n]||(t[n]=e(n)))},vW=/-\w/g,ll=J1(e=>e.replace(vW,t=>t.slice(1).toUpperCase())),_W=/\B([A-Z])/g,eg=J1(e=>e.replace(_W,"-$1").toLowerCase()),md=J1(e=>e.charAt(0).toUpperCase()+e.slice(1)),wE=J1(e=>e?`on${md(e)}`:""),Bf=(e,t)=>!Object.is(e,t),Tv=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},vF=(e,t,n,i=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:i,value:n})},Bw=e=>{const t=parseFloat(e);return isNaN(t)?e:t},yW=e=>{const t=Qr(e)?Number(e):NaN;return isNaN(t)?e:t};let ZL;const Q1=()=>ZL||(ZL=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Yt(e){if(Zn(e)){const t={};for(let n=0;n<e.length;n++){const i=e[n],r=Qr(i)?TW(i):Yt(i);if(r)for(const a in r)t[a]=r[a]}return t}else if(Qr(e)||Ar(e))return e}const bW=/;(?![^(]*\))/g,xW=/:([^]+)/,wW=/\/\*[^]*?\*\//g;function TW(e){const t={};return e.replace(wW,"").split(bW).forEach(n=>{if(n){const i=n.split(xW);i.length>1&&(t[i[0].trim()]=i[1].trim())}}),t}function xt(e){let t="";if(Qr(e))t=e;else if(Zn(e))for(let n=0;n<e.length;n++){const i=xt(e[n]);i&&(t+=i+" ")}else if(Ar(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}function SW(e){if(!e)return null;let{class:t,style:n}=e;return t&&!Qr(t)&&(e.class=xt(t)),n&&(e.style=Yt(n)),e}const EW="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",CW=CI(EW);function _F(e){return!!e||e===""}function kW(e,t){if(e.length!==t.length)return!1;let n=!0;for(let i=0;n&&i<e.length;i++)n=eT(e[i],t[i]);return n}function eT(e,t){if(e===t)return!0;let n=YL(e),i=YL(t);if(n||i)return n&&i?e.getTime()===t.getTime():!1;if(n=rd(e),i=rd(t),n||i)return e===t;if(n=Zn(e),i=Zn(t),n||i)return n&&i?kW(e,t):!1;if(n=Ar(e),i=Ar(t),n||i){if(!n||!i)return!1;const r=Object.keys(e).length,a=Object.keys(t).length;if(r!==a)return!1;for(const l in e){const h=e.hasOwnProperty(l),s=t.hasOwnProperty(l);if(h&&!s||!h&&s||!eT(e[l],t[l]))return!1}}return String(e)===String(t)}function IW(e,t){return e.findIndex(n=>eT(n,t))}const yF=e=>!!(e&&e.__v_isRef===!0),sn=e=>Qr(e)?e:e==null?"":Zn(e)||Ar(e)&&(e.toString===pF||!gi(e.toString))?yF(e)?sn(e.value):JSON.stringify(e,bF,2):String(e),bF=(e,t)=>yF(t)?bF(e,t.value):wv(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[i,r],a)=>(n[TE(i,a)+" =>"]=r,n),{})}:Z1(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>TE(n))}:rd(t)?TE(t):Ar(t)&&!Zn(t)&&!gF(t)?String(t):t,TE=(e,t="")=>{var n;return rd(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Pa;class xF{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Pa,!t&&Pa&&(this.index=(Pa.scopes||(Pa.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=Pa;try{return Pa=this,t()}finally{Pa=n}}}on(){++this._on===1&&(this.prevScope=Pa,Pa=this)}off(){this._on>0&&--this._on===0&&(Pa=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,i;for(n=0,i=this.effects.length;n<i;n++)this.effects[n].stop();for(this.effects.length=0,n=0,i=this.cleanups.length;n<i;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,i=this.scopes.length;n<i;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function zv(e){return new xF(e)}function wF(){return Pa}function so(e,t=!1){Pa&&Pa.cleanups.push(e)}let Hr;const SE=new WeakSet;class TF{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Pa&&Pa.active&&Pa.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,SE.has(this)&&(SE.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||EF(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,JL(this),CF(this);const t=Hr,n=hu;Hr=this,hu=!0;try{return this.fn()}finally{kF(this),Hr=t,hu=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)DI(t);this.deps=this.depsTail=void 0,JL(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?SE.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){MC(this)&&this.run()}get dirty(){return MC(this)}}let SF=0,Zy,Jy;function EF(e,t=!1){if(e.flags|=8,t){e.next=Jy,Jy=e;return}e.next=Zy,Zy=e}function PI(){SF++}function MI(){if(--SF>0)return;if(Jy){let t=Jy;for(Jy=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;Zy;){let t=Zy;for(Zy=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(i){e||(e=i)}t=n}}if(e)throw e}function CF(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function kF(e){let t,n=e.depsTail,i=n;for(;i;){const r=i.prevDep;i.version===-1?(i===n&&(n=r),DI(i),AW(i)):t=i,i.dep.activeLink=i.prevActiveLink,i.prevActiveLink=void 0,i=r}e.deps=t,e.depsTail=n}function MC(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(IF(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function IF(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===yb)||(e.globalVersion=yb,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!MC(e))))return;e.flags|=2;const t=e.dep,n=Hr,i=hu;Hr=e,hu=!0;try{CF(e);const r=e.fn(e._value);(t.version===0||Bf(r,e._value))&&(e.flags|=128,e._value=r,t.version++)}catch(r){throw t.version++,r}finally{Hr=n,hu=i,kF(e),e.flags&=-3}}function DI(e,t=!1){const{dep:n,prevSub:i,nextSub:r}=e;if(i&&(i.nextSub=r,e.prevSub=void 0),r&&(r.prevSub=i,e.nextSub=void 0),n.subs===e&&(n.subs=i,!i&&n.computed)){n.computed.flags&=-5;for(let a=n.computed.deps;a;a=a.nextDep)DI(a,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function AW(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let hu=!0;const AF=[];function mh(){AF.push(hu),hu=!1}function ph(){const e=AF.pop();hu=e===void 0?!0:e}function JL(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=Hr;Hr=void 0;try{t()}finally{Hr=n}}}let yb=0;class PW{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class LI{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!Hr||!hu||Hr===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Hr)n=this.activeLink=new PW(Hr,this),Hr.deps?(n.prevDep=Hr.depsTail,Hr.depsTail.nextDep=n,Hr.depsTail=n):Hr.deps=Hr.depsTail=n,PF(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const i=n.nextDep;i.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=i),n.prevDep=Hr.depsTail,n.nextDep=void 0,Hr.depsTail.nextDep=n,Hr.depsTail=n,Hr.deps===n&&(Hr.deps=i)}return n}trigger(t){this.version++,yb++,this.notify(t)}notify(t){PI();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{MI()}}}function PF(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let i=t.deps;i;i=i.nextDep)PF(i)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const Fw=new WeakMap,Ep=Symbol(""),DC=Symbol(""),bb=Symbol("");function La(e,t,n){if(hu&&Hr){let i=Fw.get(e);i||Fw.set(e,i=new Map);let r=i.get(n);r||(i.set(n,r=new LI),r.map=i,r.key=n),r.track()}}function oh(e,t,n,i,r,a){const l=Fw.get(e);if(!l){yb++;return}const h=s=>{s&&s.trigger()};if(PI(),t==="clear")l.forEach(h);else{const s=Zn(e),p=s&&AI(n);if(s&&n==="length"){const _=Number(i);l.forEach((x,T)=>{(T==="length"||T===bb||!rd(T)&&T>=_)&&h(x)})}else switch((n!==void 0||l.has(void 0))&&h(l.get(n)),p&&h(l.get(bb)),t){case"add":s?p&&h(l.get("length")):(h(l.get(Ep)),wv(e)&&h(l.get(DC)));break;case"delete":s||(h(l.get(Ep)),wv(e)&&h(l.get(DC)));break;case"set":wv(e)&&h(l.get(Ep));break}}MI()}function MW(e,t){const n=Fw.get(e);return n&&n.get(t)}function iv(e){const t=$n(e);return t===e?t:(La(t,"iterate",bb),Fc(e)?t:t.map(ia))}function tT(e){return La(e=$n(e),"iterate",bb),e}const DW={__proto__:null,[Symbol.iterator](){return EE(this,Symbol.iterator,ia)},concat(...e){return iv(this).concat(...e.map(t=>Zn(t)?iv(t):t))},entries(){return EE(this,"entries",e=>(e[1]=ia(e[1]),e))},every(e,t){return Kd(this,"every",e,t,void 0,arguments)},filter(e,t){return Kd(this,"filter",e,t,n=>n.map(ia),arguments)},find(e,t){return Kd(this,"find",e,t,ia,arguments)},findIndex(e,t){return Kd(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Kd(this,"findLast",e,t,ia,arguments)},findLastIndex(e,t){return Kd(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Kd(this,"forEach",e,t,void 0,arguments)},includes(...e){return CE(this,"includes",e)},indexOf(...e){return CE(this,"indexOf",e)},join(e){return iv(this).join(e)},lastIndexOf(...e){return CE(this,"lastIndexOf",e)},map(e,t){return Kd(this,"map",e,t,void 0,arguments)},pop(){return Sy(this,"pop")},push(...e){return Sy(this,"push",e)},reduce(e,...t){return QL(this,"reduce",e,t)},reduceRight(e,...t){return QL(this,"reduceRight",e,t)},shift(){return Sy(this,"shift")},some(e,t){return Kd(this,"some",e,t,void 0,arguments)},splice(...e){return Sy(this,"splice",e)},toReversed(){return iv(this).toReversed()},toSorted(e){return iv(this).toSorted(e)},toSpliced(...e){return iv(this).toSpliced(...e)},unshift(...e){return Sy(this,"unshift",e)},values(){return EE(this,"values",ia)}};function EE(e,t,n){const i=tT(e),r=i[t]();return i!==e&&!Fc(e)&&(r._next=r.next,r.next=()=>{const a=r._next();return a.done||(a.value=n(a.value)),a}),r}const LW=Array.prototype;function Kd(e,t,n,i,r,a){const l=tT(e),h=l!==e&&!Fc(e),s=l[t];if(s!==LW[t]){const x=s.apply(e,a);return h?ia(x):x}let p=n;l!==e&&(h?p=function(x,T){return n.call(this,ia(x),T,e)}:n.length>2&&(p=function(x,T){return n.call(this,x,T,e)}));const _=s.call(l,p,i);return h&&r?r(_):_}function QL(e,t,n,i){const r=tT(e);let a=n;return r!==e&&(Fc(e)?n.length>3&&(a=function(l,h,s){return n.call(this,l,h,s,e)}):a=function(l,h,s){return n.call(this,l,ia(h),s,e)}),r[t](a,...i)}function CE(e,t,n){const i=$n(e);La(i,"iterate",bb);const r=i[t](...n);return(r===-1||r===!1)&&nT(n[0])?(n[0]=$n(n[0]),i[t](...n)):r}function Sy(e,t,n=[]){mh(),PI();const i=$n(e)[t].apply(e,n);return MI(),ph(),i}const RW=CI("__proto__,__v_isRef,__isVue"),MF=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(rd));function OW(e){rd(e)||(e=String(e));const t=$n(this);return La(t,"has",e),t.hasOwnProperty(e)}class DF{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,i){if(n==="__v_skip")return t.__v_skip;const r=this._isReadonly,a=this._isShallow;if(n==="__v_isReactive")return!r;if(n==="__v_isReadonly")return r;if(n==="__v_isShallow")return a;if(n==="__v_raw")return i===(r?a?HW:VF:a?OF:RF).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(i)?t:void 0;const l=Zn(t);if(!r){let s;if(l&&(s=DW[n]))return s;if(n==="hasOwnProperty")return OW}const h=Reflect.get(t,n,Rs(t)?t:i);if((rd(n)?MF.has(n):RW(n))||(r||La(t,"get",n),a))return h;if(Rs(h)){const s=l&&AI(n)?h:h.value;return r&&Ar(s)?Fp(s):s}return Ar(h)?r?Fp(h):io(h):h}}class LF extends DF{constructor(t=!1){super(!1,t)}set(t,n,i,r){let a=t[n];if(!this._isShallow){const s=qf(a);if(!Fc(i)&&!qf(i)&&(a=$n(a),i=$n(i)),!Zn(t)&&Rs(a)&&!Rs(i))return s||(a.value=i),!0}const l=Zn(t)&&AI(n)?Number(n)<t.length:Sr(t,n),h=Reflect.set(t,n,i,Rs(t)?t:r);return t===$n(r)&&(l?Bf(i,a)&&oh(t,"set",n,i):oh(t,"add",n,i)),h}deleteProperty(t,n){const i=Sr(t,n);t[n];const r=Reflect.deleteProperty(t,n);return r&&i&&oh(t,"delete",n,void 0),r}has(t,n){const i=Reflect.has(t,n);return(!rd(n)||!MF.has(n))&&La(t,"has",n),i}ownKeys(t){return La(t,"iterate",Zn(t)?"length":Ep),Reflect.ownKeys(t)}}class VW extends DF{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const BW=new LF,FW=new VW,zW=new LF(!0);const LC=e=>e,Px=e=>Reflect.getPrototypeOf(e);function NW(e,t,n){return function(...i){const r=this.__v_raw,a=$n(r),l=wv(a),h=e==="entries"||e===Symbol.iterator&&l,s=e==="keys"&&l,p=r[e](...i),_=n?LC:t?zw:ia;return!t&&La(a,"iterate",s?DC:Ep),{next(){const{value:x,done:T}=p.next();return T?{value:x,done:T}:{value:h?[_(x[0]),_(x[1])]:_(x),done:T}},[Symbol.iterator](){return this}}}}function Mx(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function UW(e,t){const n={get(r){const a=this.__v_raw,l=$n(a),h=$n(r);e||(Bf(r,h)&&La(l,"get",r),La(l,"get",h));const{has:s}=Px(l),p=t?LC:e?zw:ia;if(s.call(l,r))return p(a.get(r));if(s.call(l,h))return p(a.get(h));a!==l&&a.get(r)},get size(){const r=this.__v_raw;return!e&&La($n(r),"iterate",Ep),r.size},has(r){const a=this.__v_raw,l=$n(a),h=$n(r);return e||(Bf(r,h)&&La(l,"has",r),La(l,"has",h)),r===h?a.has(r):a.has(r)||a.has(h)},forEach(r,a){const l=this,h=l.__v_raw,s=$n(h),p=t?LC:e?zw:ia;return!e&&La(s,"iterate",Ep),h.forEach((_,x)=>r.call(a,p(_),p(x),l))}};return yo(n,e?{add:Mx("add"),set:Mx("set"),delete:Mx("delete"),clear:Mx("clear")}:{add(r){!t&&!Fc(r)&&!qf(r)&&(r=$n(r));const a=$n(this);return Px(a).has.call(a,r)||(a.add(r),oh(a,"add",r,r)),this},set(r,a){!t&&!Fc(a)&&!qf(a)&&(a=$n(a));const l=$n(this),{has:h,get:s}=Px(l);let p=h.call(l,r);p||(r=$n(r),p=h.call(l,r));const _=s.call(l,r);return l.set(r,a),p?Bf(a,_)&&oh(l,"set",r,a):oh(l,"add",r,a),this},delete(r){const a=$n(this),{has:l,get:h}=Px(a);let s=l.call(a,r);s||(r=$n(r),s=l.call(a,r)),h&&h.call(a,r);const p=a.delete(r);return s&&oh(a,"delete",r,void 0),p},clear(){const r=$n(this),a=r.size!==0,l=r.clear();return a&&oh(r,"clear",void 0,void 0),l}}),["keys","values","entries",Symbol.iterator].forEach(r=>{n[r]=NW(r,e,t)}),n}function RI(e,t){const n=UW(e,t);return(i,r,a)=>r==="__v_isReactive"?!e:r==="__v_isReadonly"?e:r==="__v_raw"?i:Reflect.get(Sr(n,r)&&r in i?n:i,r,a)}const $W={get:RI(!1,!1)},jW={get:RI(!1,!0)},WW={get:RI(!0,!1)};const RF=new WeakMap,OF=new WeakMap,VF=new WeakMap,HW=new WeakMap;function GW(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function qW(e){return e.__v_skip||!Object.isExtensible(e)?0:GW(gW(e))}function io(e){return qf(e)?e:OI(e,!1,BW,$W,RF)}function KW(e){return OI(e,!1,zW,jW,OF)}function Fp(e){return OI(e,!0,FW,WW,VF)}function OI(e,t,n,i,r){if(!Ar(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const a=qW(e);if(a===0)return e;const l=r.get(e);if(l)return l;const h=new Proxy(e,a===2?i:n);return r.set(e,h),h}function Cp(e){return qf(e)?Cp(e.__v_raw):!!(e&&e.__v_isReactive)}function qf(e){return!!(e&&e.__v_isReadonly)}function Fc(e){return!!(e&&e.__v_isShallow)}function nT(e){return e?!!e.__v_raw:!1}function $n(e){const t=e&&e.__v_raw;return t?$n(t):e}function BF(e){return!Sr(e,"__v_skip")&&Object.isExtensible(e)&&vF(e,"__v_skip",!0),e}const ia=e=>Ar(e)?io(e):e,zw=e=>Ar(e)?Fp(e):e;function Rs(e){return e?e.__v_isRef===!0:!1}function tt(e){return FF(e,!1)}function Zt(e){return FF(e,!0)}function FF(e,t){return Rs(e)?e:new XW(e,t)}class XW{constructor(t,n){this.dep=new LI,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:$n(t),this._value=n?t:ia(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,i=this.__v_isShallow||Fc(t)||qf(t);t=i?t:$n(t),Bf(t,n)&&(this._rawValue=t,this._value=i?t:ia(t),this.dep.trigger())}}function xi(e){return Rs(e)?e.value:e}function Ua(e){return gi(e)?e():xi(e)}const YW={get:(e,t,n)=>t==="__v_raw"?e:xi(Reflect.get(e,t,n)),set:(e,t,n,i)=>{const r=e[t];return Rs(r)&&!Rs(n)?(r.value=n,!0):Reflect.set(e,t,n,i)}};function zF(e){return Cp(e)?e:new Proxy(e,YW)}function g_(e){const t=Zn(e)?new Array(e.length):{};for(const n in e)t[n]=NF(e,n);return t}class ZW{constructor(t,n,i){this._object=t,this._key=n,this._defaultValue=i,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return MW($n(this._object),this._key)}}class JW{constructor(t){this._getter=t,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function Ne(e,t,n){return Rs(e)?e:gi(e)?new JW(e):Ar(e)&&arguments.length>1?NF(e,t,n):tt(e)}function NF(e,t,n){const i=e[t];return Rs(i)?i:new ZW(e,t,n)}class QW{constructor(t,n,i){this.fn=t,this.setter=n,this._value=void 0,this.dep=new LI(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=yb-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=i}notify(){if(this.flags|=16,!(this.flags&8)&&Hr!==this)return EF(this,!0),!0}get value(){const t=this.dep.track();return IF(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function e7(e,t,n=!1){let i,r;return gi(e)?i=e:(i=e.get,r=e.set),new QW(i,r,n)}const Dx={},Nw=new WeakMap;let fp;function t7(e,t=!1,n=fp){if(n){let i=Nw.get(n);i||Nw.set(n,i=[]),i.push(e)}}function n7(e,t,n=zr){const{immediate:i,deep:r,once:a,scheduler:l,augmentJob:h,call:s}=n,p=G=>r?G:Fc(G)||r===!1||r===0?ah(G,1):ah(G);let _,x,T,k,P=!1,M=!1;if(Rs(e)?(x=()=>e.value,P=Fc(e)):Cp(e)?(x=()=>p(e),P=!0):Zn(e)?(M=!0,P=e.some(G=>Cp(G)||Fc(G)),x=()=>e.map(G=>{if(Rs(G))return G.value;if(Cp(G))return p(G);if(gi(G))return s?s(G,2):G()})):gi(e)?t?x=s?()=>s(e,2):e:x=()=>{if(T){mh();try{T()}finally{ph()}}const G=fp;fp=_;try{return s?s(e,3,[k]):e(k)}finally{fp=G}}:x=Yu,t&&r){const G=x,ee=r===!0?1/0:r;x=()=>ah(G(),ee)}const R=wF(),F=()=>{_.stop(),R&&R.active&&II(R.effects,_)};if(a&&t){const G=t;t=(...ee)=>{G(...ee),F()}}let B=M?new Array(e.length).fill(Dx):Dx;const H=G=>{if(!(!(_.flags&1)||!_.dirty&&!G))if(t){const ee=_.run();if(r||P||(M?ee.some((ie,J)=>Bf(ie,B[J])):Bf(ee,B))){T&&T();const ie=fp;fp=_;try{const J=[ee,B===Dx?void 0:M&&B[0]===Dx?[]:B,k];B=ee,s?s(t,3,J):t(...J)}finally{fp=ie}}}else _.run()};return h&&h(H),_=new TF(x),_.scheduler=l?()=>l(H,!1):H,k=G=>t7(G,!1,_),T=_.onStop=()=>{const G=Nw.get(_);if(G){if(s)s(G,4);else for(const ee of G)ee();Nw.delete(_)}},t?i?H(!0):B=_.run():l?l(H.bind(null,!0),!0):_.run(),F.pause=_.pause.bind(_),F.resume=_.resume.bind(_),F.stop=F,F}function ah(e,t=1/0,n){if(t<=0||!Ar(e)||e.__v_skip||(n=n||new Map,(n.get(e)||0)>=t))return e;if(n.set(e,t),t--,Rs(e))ah(e.value,t,n);else if(Zn(e))for(let i=0;i<e.length;i++)ah(e[i],t,n);else if(Z1(e)||wv(e))e.forEach(i=>{ah(i,t,n)});else if(gF(e)){for(const i in e)ah(e[i],t,n);for(const i of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,i)&&ah(e[i],t,n)}return e}/**
* @vue/runtime-core v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function u0(e,t,n,i){try{return i?e(...i):e()}catch(r){iT(r,t,n)}}function mu(e,t,n,i){if(gi(e)){const r=u0(e,t,n,i);return r&&mF(r)&&r.catch(a=>{iT(a,t,n)}),r}if(Zn(e)){const r=[];for(let a=0;a<e.length;a++)r.push(mu(e[a],t,n,i));return r}}function iT(e,t,n,i=!0){const r=t?t.vnode:null,{errorHandler:a,throwUnhandledErrorInProduction:l}=t&&t.appContext.config||zr;if(t){let h=t.parent;const s=t.proxy,p=`https://vuejs.org/error-reference/#runtime-${n}`;for(;h;){const _=h.ec;if(_){for(let x=0;x<_.length;x++)if(_[x](e,s,p)===!1)return}h=h.parent}if(a){mh(),u0(a,null,10,[e,s,p]),ph();return}}i7(e,n,r,i,l)}function i7(e,t,n,i=!0,r=!1){if(r)throw e;console.error(e)}const sl=[];let $u=-1;const Sv=[];let _f=null,dv=0;const UF=Promise.resolve();let Uw=null;function Hn(e){const t=Uw||UF;return e?t.then(this?e.bind(this):e):t}function r7(e){let t=$u+1,n=sl.length;for(;t<n;){const i=t+n>>>1,r=sl[i],a=xb(r);a<e||a===e&&r.flags&2?t=i+1:n=i}return t}function VI(e){if(!(e.flags&1)){const t=xb(e),n=sl[sl.length-1];!n||!(e.flags&2)&&t>=xb(n)?sl.push(e):sl.splice(r7(t),0,e),e.flags|=1,$F()}}function $F(){Uw||(Uw=UF.then(WF))}function s7(e){Zn(e)?Sv.push(...e):_f&&e.id===-1?_f.splice(dv+1,0,e):e.flags&1||(Sv.push(e),e.flags|=1),$F()}function eR(e,t,n=$u+1){for(;n<sl.length;n++){const i=sl[n];if(i&&i.flags&2){if(e&&i.id!==e.uid)continue;sl.splice(n,1),n--,i.flags&4&&(i.flags&=-2),i(),i.flags&4||(i.flags&=-2)}}}function jF(e){if(Sv.length){const t=[...new Set(Sv)].sort((n,i)=>xb(n)-xb(i));if(Sv.length=0,_f){_f.push(...t);return}for(_f=t,dv=0;dv<_f.length;dv++){const n=_f[dv];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}_f=null,dv=0}}const xb=e=>e.id==null?e.flags&2?-1:1/0:e.id;function WF(e){try{for($u=0;$u<sl.length;$u++){const t=sl[$u];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),u0(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;$u<sl.length;$u++){const t=sl[$u];t&&(t.flags&=-2)}$u=-1,sl.length=0,jF(),Uw=null,(sl.length||Sv.length)&&WF()}}let ec=null,HF=null;function $w(e){const t=ec;return ec=e,HF=e&&e.type.__scopeId||null,t}function An(e,t=ec,n){if(!t||e._n)return e;const i=(...r)=>{i._d&&qw(-1);const a=$w(t);let l;try{l=e(...r)}finally{$w(a),i._d&&qw(1)}return l};return i._n=!0,i._c=!0,i._d=!0,i}function Ii(e,t){if(ec===null)return e;const n=cT(ec),i=e.dirs||(e.dirs=[]);for(let r=0;r<t.length;r++){let[a,l,h,s=zr]=t[r];a&&(gi(a)&&(a={mounted:a,updated:a}),a.deep&&ah(l),i.push({dir:a,instance:n,value:l,oldValue:void 0,arg:h,modifiers:s}))}return e}function np(e,t,n,i){const r=e.dirs,a=t&&t.dirs;for(let l=0;l<r.length;l++){const h=r[l];a&&(h.oldValue=a[l].value);let s=h.dir[i];s&&(mh(),mu(s,n,8,[e.el,h,e,t]),ph())}}const GF=Symbol("_vte"),qF=e=>e.__isTeleport,Qy=e=>e&&(e.disabled||e.disabled===""),tR=e=>e&&(e.defer||e.defer===""),nR=e=>typeof SVGElement<"u"&&e instanceof SVGElement,iR=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,RC=(e,t)=>{const n=e&&e.to;return Qr(n)?t?t(n):null:n},KF={name:"Teleport",__isTeleport:!0,process(e,t,n,i,r,a,l,h,s,p){const{mc:_,pc:x,pbc:T,o:{insert:k,querySelector:P,createText:M,createComment:R}}=p,F=Qy(t.props);let{shapeFlag:B,children:H,dynamicChildren:G}=t;if(e==null){const ee=t.el=M(""),ie=t.anchor=M("");k(ee,n,i),k(ie,n,i);const J=(W,X)=>{B&16&&_(H,W,X,r,a,l,h,s)},$=()=>{const W=t.target=RC(t.props,P),X=XF(W,t,M,k);W&&(l!=="svg"&&nR(W)?l="svg":l!=="mathml"&&iR(W)&&(l="mathml"),r&&r.isCE&&(r.ce._teleportTargets||(r.ce._teleportTargets=new Set)).add(W),F||(J(W,X),hw(t,!1)))};F&&(J(n,ie),hw(t,!0)),tR(t.props)?(t.el.__isMounted=!1,fo(()=>{$(),delete t.el.__isMounted},a)):$()}else{if(tR(t.props)&&e.el.__isMounted===!1){fo(()=>{KF.process(e,t,n,i,r,a,l,h,s,p)},a);return}t.el=e.el,t.targetStart=e.targetStart;const ee=t.anchor=e.anchor,ie=t.target=e.target,J=t.targetAnchor=e.targetAnchor,$=Qy(e.props),W=$?n:ie,X=$?ee:J;if(l==="svg"||nR(ie)?l="svg":(l==="mathml"||iR(ie))&&(l="mathml"),G?(T(e.dynamicChildren,G,W,r,a,l,h),$I(e,t,!0)):s||x(e,t,W,X,r,a,l,h,!1),F)$?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):Lx(t,n,ee,p,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const re=t.target=RC(t.props,P);re&&Lx(t,re,null,p,0)}else $&&Lx(t,ie,J,p,1);hw(t,F)}},remove(e,t,n,{um:i,o:{remove:r}},a){const{shapeFlag:l,children:h,anchor:s,targetStart:p,targetAnchor:_,target:x,props:T}=e;if(x&&(r(p),r(_)),a&&r(s),l&16){const k=a||!Qy(T);for(let P=0;P<h.length;P++){const M=h[P];i(M,t,n,k,!!M.dynamicChildren)}}},move:Lx,hydrate:o7};function Lx(e,t,n,{o:{insert:i},m:r},a=2){a===0&&i(e.targetAnchor,t,n);const{el:l,anchor:h,shapeFlag:s,children:p,props:_}=e,x=a===2;if(x&&i(l,t,n),(!x||Qy(_))&&s&16)for(let T=0;T<p.length;T++)r(p[T],t,n,2);x&&i(h,t,n)}function o7(e,t,n,i,r,a,{o:{nextSibling:l,parentNode:h,querySelector:s,insert:p,createText:_}},x){function T(M,R,F,B){R.anchor=x(l(M),R,h(M),n,i,r,a),R.targetStart=F,R.targetAnchor=B}const k=t.target=RC(t.props,s),P=Qy(t.props);if(k){const M=k._lpa||k.firstChild;if(t.shapeFlag&16)if(P)T(e,t,M,M&&l(M));else{t.anchor=l(e);let R=M;for(;R;){if(R&&R.nodeType===8){if(R.data==="teleport start anchor")t.targetStart=R;else if(R.data==="teleport anchor"){t.targetAnchor=R,k._lpa=t.targetAnchor&&l(t.targetAnchor);break}}R=l(R)}t.targetAnchor||XF(k,t,_,p),x(M&&l(M),t,k,n,i,r,a)}hw(t,P)}else P&&t.shapeFlag&16&&T(e,t,e,l(e));return t.anchor&&l(t.anchor)}const a7=KF;function hw(e,t){const n=e.ctx;if(n&&n.ut){let i,r;for(t?(i=e.el,r=e.anchor):(i=e.targetStart,r=e.targetAnchor);i&&i!==r;)i.nodeType===1&&i.setAttribute("data-v-owner",n.uid),i=i.nextSibling;n.ut()}}function XF(e,t,n,i){const r=t.targetStart=n(""),a=t.targetAnchor=n("");return r[GF]=a,e&&(i(r,e),i(a,e)),a}const nh=Symbol("_leaveCb"),Rx=Symbol("_enterCb");function YF(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Kr(()=>{e.isMounted=!0}),Nr(()=>{e.isUnmounting=!0}),e}const kc=[Function,Array],ZF={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:kc,onEnter:kc,onAfterEnter:kc,onEnterCancelled:kc,onBeforeLeave:kc,onLeave:kc,onAfterLeave:kc,onLeaveCancelled:kc,onBeforeAppear:kc,onAppear:kc,onAfterAppear:kc,onAppearCancelled:kc},JF=e=>{const t=e.subTree;return t.component?JF(t.component):t},l7={name:"BaseTransition",props:ZF,setup(e,{slots:t}){const n=__(),i=YF();return()=>{const r=t.default&&BI(t.default(),!0);if(!r||!r.length)return;const a=QF(r),l=$n(e),{mode:h}=l;if(i.isLeaving)return kE(a);const s=rR(a);if(!s)return kE(a);let p=wb(s,l,i,n,x=>p=x);s.type!==ra&&Kf(s,p);let _=n.subTree&&rR(n.subTree);if(_&&_.type!==ra&&!wf(_,s)&&JF(n).type!==ra){let x=wb(_,l,i,n);if(Kf(_,x),h==="out-in"&&s.type!==ra)return i.isLeaving=!0,x.afterLeave=()=>{i.isLeaving=!1,n.job.flags&8||n.update(),delete x.afterLeave,_=void 0},kE(a);h==="in-out"&&s.type!==ra?x.delayLeave=(T,k,P)=>{const M=ez(i,_);M[String(_.key)]=_,T[nh]=()=>{k(),T[nh]=void 0,delete p.delayedLeave,_=void 0},p.delayedLeave=()=>{P(),delete p.delayedLeave,_=void 0}}:_=void 0}else _&&(_=void 0);return a}}};function QF(e){let t=e[0];if(e.length>1){for(const n of e)if(n.type!==ra){t=n;break}}return t}const c7=l7;function ez(e,t){const{leavingVNodes:n}=e;let i=n.get(t.type);return i||(i=Object.create(null),n.set(t.type,i)),i}function wb(e,t,n,i,r){const{appear:a,mode:l,persisted:h=!1,onBeforeEnter:s,onEnter:p,onAfterEnter:_,onEnterCancelled:x,onBeforeLeave:T,onLeave:k,onAfterLeave:P,onLeaveCancelled:M,onBeforeAppear:R,onAppear:F,onAfterAppear:B,onAppearCancelled:H}=t,G=String(e.key),ee=ez(n,e),ie=(W,X)=>{W&&mu(W,i,9,X)},J=(W,X)=>{const re=X[1];ie(W,X),Zn(W)?W.every(Y=>Y.length<=1)&&re():W.length<=1&&re()},$={mode:l,persisted:h,beforeEnter(W){let X=s;if(!n.isMounted)if(a)X=R||s;else return;W[nh]&&W[nh](!0);const re=ee[G];re&&wf(e,re)&&re.el[nh]&&re.el[nh](),ie(X,[W])},enter(W){let X=p,re=_,Y=x;if(!n.isMounted)if(a)X=F||p,re=B||_,Y=H||x;else return;let Z=!1;const ge=W[Rx]=be=>{Z||(Z=!0,be?ie(Y,[W]):ie(re,[W]),$.delayedLeave&&$.delayedLeave(),W[Rx]=void 0)};X?J(X,[W,ge]):ge()},leave(W,X){const re=String(e.key);if(W[Rx]&&W[Rx](!0),n.isUnmounting)return X();ie(T,[W]);let Y=!1;const Z=W[nh]=ge=>{Y||(Y=!0,X(),ge?ie(M,[W]):ie(P,[W]),W[nh]=void 0,ee[re]===e&&delete ee[re])};ee[re]=e,k?J(k,[W,Z]):Z()},clone(W){const X=wb(W,t,n,i,r);return r&&r(X),X}};return $}function kE(e){if(rT(e))return e=sd(e),e.children=null,e}function rR(e){if(!rT(e))return qF(e.type)&&e.children?QF(e.children):e;if(e.component)return e.component.subTree;const{shapeFlag:t,children:n}=e;if(n){if(t&16)return n[0];if(t&32&&gi(n.default))return n.default()}}function Kf(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Kf(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function BI(e,t=!1,n){let i=[],r=0;for(let a=0;a<e.length;a++){let l=e[a];const h=n==null?l.key:String(n)+String(l.key!=null?l.key:a);l.type===un?(l.patchFlag&128&&r++,i=i.concat(BI(l.children,t,h))):(t||l.type!==ra)&&i.push(h!=null?sd(l,{key:h}):l)}if(r>1)for(let a=0;a<i.length;a++)i[a].patchFlag=-2;return i}function tz(e,t){return gi(e)?yo({name:e.name},t,{setup:e}):e}function ua(){const e=__();return e?(e.appContext.config.idPrefix||"v")+"-"+e.ids[0]+e.ids[1]++:""}function nz(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const jw=new WeakMap;function eb(e,t,n,i,r=!1){if(Zn(e)){e.forEach((P,M)=>eb(P,t&&(Zn(t)?t[M]:t),n,i,r));return}if(Ev(i)&&!r){i.shapeFlag&512&&i.type.__asyncResolved&&i.component.subTree.component&&eb(e,t,n,i.component.subTree);return}const a=i.shapeFlag&4?cT(i.component):i.el,l=r?null:a,{i:h,r:s}=e,p=t&&t.r,_=h.refs===zr?h.refs={}:h.refs,x=h.setupState,T=$n(x),k=x===zr?fF:P=>Sr(T,P);if(p!=null&&p!==s){if(sR(t),Qr(p))_[p]=null,k(p)&&(x[p]=null);else if(Rs(p)){p.value=null;const P=t;P.k&&(_[P.k]=null)}}if(gi(s))u0(s,h,12,[l,_]);else{const P=Qr(s),M=Rs(s);if(P||M){const R=()=>{if(e.f){const F=P?k(s)?x[s]:_[s]:s.value;if(r)Zn(F)&&II(F,a);else if(Zn(F))F.includes(a)||F.push(a);else if(P)_[s]=[a],k(s)&&(x[s]=_[s]);else{const B=[a];s.value=B,e.k&&(_[e.k]=B)}}else P?(_[s]=l,k(s)&&(x[s]=l)):M&&(s.value=l,e.k&&(_[e.k]=l))};if(l){const F=()=>{R(),jw.delete(e)};F.id=-1,jw.set(e,F),fo(F,n)}else sR(e),R()}}}function sR(e){const t=jw.get(e);t&&(t.flags|=8,jw.delete(e))}Q1().requestIdleCallback;Q1().cancelIdleCallback;const Ev=e=>!!e.type.__asyncLoader,rT=e=>e.type.__isKeepAlive,u7={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(e,{slots:t}){const n=__(),i=n.ctx;if(!i.renderer)return()=>{const B=t.default&&t.default();return B&&B.length===1?B[0]:B};const r=new Map,a=new Set;let l=null;const h=n.suspense,{renderer:{p:s,m:p,um:_,o:{createElement:x}}}=i,T=x("div");i.activate=(B,H,G,ee,ie)=>{const J=B.component;p(B,H,G,0,h),s(J.vnode,B,H,G,J,h,ee,B.slotScopeIds,ie),fo(()=>{J.isDeactivated=!1,J.a&&Tv(J.a);const $=B.props&&B.props.onVnodeMounted;$&&Ac($,J.parent,B)},h)},i.deactivate=B=>{const H=B.component;Hw(H.m),Hw(H.a),p(B,T,null,1,h),fo(()=>{H.da&&Tv(H.da);const G=B.props&&B.props.onVnodeUnmounted;G&&Ac(G,H.parent,B),H.isDeactivated=!0},h)};function k(B){IE(B),_(B,n,h,!0)}function P(B){r.forEach((H,G)=>{const ee=NC(H.type);ee&&!B(ee)&&M(G)})}function M(B){const H=r.get(B);H&&(!l||!wf(H,l))?k(H):l&&IE(l),r.delete(B),a.delete(B)}qt(()=>[e.include,e.exclude],([B,H])=>{B&&P(G=>Oy(B,G)),H&&P(G=>!Oy(H,G))},{flush:"post",deep:!0});let R=null;const F=()=>{R!=null&&(Gw(n.subTree.type)?fo(()=>{r.set(R,Ox(n.subTree))},n.subTree.suspense):r.set(R,Ox(n.subTree)))};return Kr(F),aT(F),Nr(()=>{r.forEach(B=>{const{subTree:H,suspense:G}=n,ee=Ox(H);if(B.type===ee.type&&B.key===ee.key){IE(ee);const ie=ee.component.da;ie&&fo(ie,G);return}k(B)})}),()=>{if(R=null,!t.default)return l=null;const B=t.default(),H=B[0];if(B.length>1)return l=null,B;if(!Nv(H)||!(H.shapeFlag&4)&&!(H.shapeFlag&128))return l=null,H;let G=Ox(H);if(G.type===ra)return l=null,G;const ee=G.type,ie=NC(Ev(G)?G.type.__asyncResolved||{}:ee),{include:J,exclude:$,max:W}=e;if(J&&(!ie||!Oy(J,ie))||$&&ie&&Oy($,ie))return G.shapeFlag&=-257,l=G,H;const X=G.key==null?ee:G.key,re=r.get(X);return G.el&&(G=sd(G),H.shapeFlag&128&&(H.ssContent=G)),R=X,re?(G.el=re.el,G.component=re.component,G.transition&&Kf(G,G.transition),G.shapeFlag|=512,a.delete(X),a.add(X)):(a.add(X),W&&a.size>parseInt(W,10)&&M(a.values().next().value)),G.shapeFlag|=256,l=G,Gw(H.type)?H:G}}},d7=u7;function Oy(e,t){return Zn(e)?e.some(n=>Oy(n,t)):Qr(e)?e.split(",").includes(t):pW(e)?(e.lastIndex=0,e.test(t)):!1}function FI(e,t){iz(e,"a",t)}function sT(e,t){iz(e,"da",t)}function iz(e,t,n=Oa){const i=e.__wdc||(e.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return e()});if(oT(t,i,n),n){let r=n.parent;for(;r&&r.parent;)rT(r.parent.vnode)&&h7(i,t,n,r),r=r.parent}}function h7(e,t,n,i){const r=oT(t,e,i,!0);zI(()=>{II(i[t],r)},n)}function IE(e){e.shapeFlag&=-257,e.shapeFlag&=-513}function Ox(e){return e.shapeFlag&128?e.ssContent:e}function oT(e,t,n=Oa,i=!1){if(n){const r=n[e]||(n[e]=[]),a=t.__weh||(t.__weh=(...l)=>{mh();const h=h0(n),s=mu(t,n,e,l);return h(),ph(),s});return i?r.unshift(a):r.push(a),a}}const Sh=e=>(t,n=Oa)=>{(!Sb||e==="sp")&&oT(e,(...i)=>t(...i),n)},v_=Sh("bm"),Kr=Sh("m"),rz=Sh("bu"),aT=Sh("u"),Nr=Sh("bum"),zI=Sh("um"),f7=Sh("sp"),m7=Sh("rtg"),p7=Sh("rtc");function g7(e,t=Oa){oT("ec",e,t)}const sz="components";function v7(e,t){return lz(sz,e,!0,t)||e}const oz=Symbol.for("v-ndc");function az(e){return Qr(e)?lz(sz,e,!1)||e:e||oz}function lz(e,t,n=!0,i=!1){const r=ec||Oa;if(r){const a=r.type;{const h=NC(a,!1);if(h&&(h===t||h===ll(t)||h===md(ll(t))))return a}const l=oR(r[e]||a[e],t)||oR(r.appContext[e],t);return!l&&i?a:l}}function oR(e,t){return e&&(e[t]||e[ll(t)]||e[md(ll(t))])}function Ws(e,t,n,i){let r;const a=n,l=Zn(e);if(l||Qr(e)){const h=l&&Cp(e);let s=!1,p=!1;h&&(s=!Fc(e),p=qf(e),e=tT(e)),r=new Array(e.length);for(let _=0,x=e.length;_<x;_++)r[_]=t(s?p?zw(ia(e[_])):ia(e[_]):e[_],_,void 0,a)}else if(typeof e=="number"){r=new Array(e);for(let h=0;h<e;h++)r[h]=t(h+1,h,void 0,a)}else if(Ar(e))if(e[Symbol.iterator])r=Array.from(e,(h,s)=>t(h,s,void 0,a));else{const h=Object.keys(e);r=new Array(h.length);for(let s=0,p=h.length;s<p;s++){const _=h[s];r[s]=t(e[_],_,s,a)}}else r=[];return r}const OC=e=>e?Cz(e)?cT(e):OC(e.parent):null,tb=yo(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>OC(e.parent),$root:e=>OC(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>uz(e),$forceUpdate:e=>e.f||(e.f=()=>{VI(e.update)}),$nextTick:e=>e.n||(e.n=Hn.bind(e.proxy)),$watch:e=>F7.bind(e)}),AE=(e,t)=>e!==zr&&!e.__isScriptSetup&&Sr(e,t),_7={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:i,data:r,props:a,accessCache:l,type:h,appContext:s}=e;let p;if(t[0]!=="$"){const k=l[t];if(k!==void 0)switch(k){case 1:return i[t];case 2:return r[t];case 4:return n[t];case 3:return a[t]}else{if(AE(i,t))return l[t]=1,i[t];if(r!==zr&&Sr(r,t))return l[t]=2,r[t];if((p=e.propsOptions[0])&&Sr(p,t))return l[t]=3,a[t];if(n!==zr&&Sr(n,t))return l[t]=4,n[t];VC&&(l[t]=0)}}const _=tb[t];let x,T;if(_)return t==="$attrs"&&La(e.attrs,"get",""),_(e);if((x=h.__cssModules)&&(x=x[t]))return x;if(n!==zr&&Sr(n,t))return l[t]=4,n[t];if(T=s.config.globalProperties,Sr(T,t))return T[t]},set({_:e},t,n){const{data:i,setupState:r,ctx:a}=e;return AE(r,t)?(r[t]=n,!0):i!==zr&&Sr(i,t)?(i[t]=n,!0):Sr(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(a[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:i,appContext:r,propsOptions:a,type:l}},h){let s,p;return!!(n[h]||e!==zr&&h[0]!=="$"&&Sr(e,h)||AE(t,h)||(s=a[0])&&Sr(s,h)||Sr(i,h)||Sr(tb,h)||Sr(r.config.globalProperties,h)||(p=l.__cssModules)&&p[h])},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:Sr(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function aR(e){return Zn(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let VC=!0;function y7(e){const t=uz(e),n=e.proxy,i=e.ctx;VC=!1,t.beforeCreate&&lR(t.beforeCreate,e,"bc");const{data:r,computed:a,methods:l,watch:h,provide:s,inject:p,created:_,beforeMount:x,mounted:T,beforeUpdate:k,updated:P,activated:M,deactivated:R,beforeDestroy:F,beforeUnmount:B,destroyed:H,unmounted:G,render:ee,renderTracked:ie,renderTriggered:J,errorCaptured:$,serverPrefetch:W,expose:X,inheritAttrs:re,components:Y,directives:Z,filters:ge}=t;if(p&&b7(p,i,null),l)for(const nt in l){const We=l[nt];gi(We)&&(i[nt]=We.bind(n))}if(r){const nt=r.call(n,n);Ar(nt)&&(e.data=io(nt))}if(VC=!0,a)for(const nt in a){const We=a[nt],Le=gi(We)?We.bind(n,n):gi(We.get)?We.get.bind(n,n):Yu,Ze=!gi(We)&&gi(We.set)?We.set.bind(n):Yu,Ee=fe({get:Le,set:Ze});Object.defineProperty(i,nt,{enumerable:!0,configurable:!0,get:()=>Ee.value,set:Je=>Ee.value=Je})}if(h)for(const nt in h)cz(h[nt],i,n,nt);if(s){const nt=gi(s)?s.call(n):s;Reflect.ownKeys(nt).forEach(We=>{Dr(We,nt[We])})}_&&lR(_,e,"c");function Be(nt,We){Zn(We)?We.forEach(Le=>nt(Le.bind(n))):We&&nt(We.bind(n))}if(Be(v_,x),Be(Kr,T),Be(rz,k),Be(aT,P),Be(FI,M),Be(sT,R),Be(g7,$),Be(p7,ie),Be(m7,J),Be(Nr,B),Be(zI,G),Be(f7,W),Zn(X))if(X.length){const nt=e.exposed||(e.exposed={});X.forEach(We=>{Object.defineProperty(nt,We,{get:()=>n[We],set:Le=>n[We]=Le,enumerable:!0})})}else e.exposed||(e.exposed={});ee&&e.render===Yu&&(e.render=ee),re!=null&&(e.inheritAttrs=re),Y&&(e.components=Y),Z&&(e.directives=Z),W&&nz(e)}function b7(e,t,n=Yu){Zn(e)&&(e=BC(e));for(const i in e){const r=e[i];let a;Ar(r)?"default"in r?a=wi(r.from||i,r.default,!0):a=wi(r.from||i):a=wi(r),Rs(a)?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>a.value,set:l=>a.value=l}):t[i]=a}}function lR(e,t,n){mu(Zn(e)?e.map(i=>i.bind(t.proxy)):e.bind(t.proxy),t,n)}function cz(e,t,n,i){let r=i.includes(".")?xz(n,i):()=>n[i];if(Qr(e)){const a=t[e];gi(a)&&qt(r,a)}else if(gi(e))qt(r,e.bind(n));else if(Ar(e))if(Zn(e))e.forEach(a=>cz(a,t,n,i));else{const a=gi(e.handler)?e.handler.bind(n):t[e.handler];gi(a)&&qt(r,a,e)}}function uz(e){const t=e.type,{mixins:n,extends:i}=t,{mixins:r,optionsCache:a,config:{optionMergeStrategies:l}}=e.appContext,h=a.get(t);let s;return h?s=h:!r.length&&!n&&!i?s=t:(s={},r.length&&r.forEach(p=>Ww(s,p,l,!0)),Ww(s,t,l)),Ar(t)&&a.set(t,s),s}function Ww(e,t,n,i=!1){const{mixins:r,extends:a}=t;a&&Ww(e,a,n,!0),r&&r.forEach(l=>Ww(e,l,n,!0));for(const l in t)if(!(i&&l==="expose")){const h=x7[l]||n&&n[l];e[l]=h?h(e[l],t[l]):t[l]}return e}const x7={data:cR,props:uR,emits:uR,methods:Vy,computed:Vy,beforeCreate:rl,created:rl,beforeMount:rl,mounted:rl,beforeUpdate:rl,updated:rl,beforeDestroy:rl,beforeUnmount:rl,destroyed:rl,unmounted:rl,activated:rl,deactivated:rl,errorCaptured:rl,serverPrefetch:rl,components:Vy,directives:Vy,watch:T7,provide:cR,inject:w7};function cR(e,t){return t?e?function(){return yo(gi(e)?e.call(this,this):e,gi(t)?t.call(this,this):t)}:t:e}function w7(e,t){return Vy(BC(e),BC(t))}function BC(e){if(Zn(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function rl(e,t){return e?[...new Set([].concat(e,t))]:t}function Vy(e,t){return e?yo(Object.create(null),e,t):t}function uR(e,t){return e?Zn(e)&&Zn(t)?[...new Set([...e,...t])]:yo(Object.create(null),aR(e),aR(t??{})):t}function T7(e,t){if(!e)return t;if(!t)return e;const n=yo(Object.create(null),e);for(const i in t)n[i]=rl(e[i],t[i]);return n}function dz(){return{app:null,config:{isNativeTag:fF,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let S7=0;function E7(e,t){return function(i,r=null){gi(i)||(i=yo({},i)),r!=null&&!Ar(r)&&(r=null);const a=dz(),l=new WeakSet,h=[];let s=!1;const p=a.app={_uid:S7++,_component:i,_props:r,_container:null,_context:a,_instance:null,version:iH,get config(){return a.config},set config(_){},use(_,...x){return l.has(_)||(_&&gi(_.install)?(l.add(_),_.install(p,...x)):gi(_)&&(l.add(_),_(p,...x))),p},mixin(_){return a.mixins.includes(_)||a.mixins.push(_),p},component(_,x){return x?(a.components[_]=x,p):a.components[_]},directive(_,x){return x?(a.directives[_]=x,p):a.directives[_]},mount(_,x,T){if(!s){const k=p._ceVNode||se(i,r);return k.appContext=a,T===!0?T="svg":T===!1&&(T=void 0),e(k,_,T),s=!0,p._container=_,_.__vue_app__=p,cT(k.component)}},onUnmount(_){h.push(_)},unmount(){s&&(mu(h,p._instance,16),e(null,p._container),delete p._container.__vue_app__)},provide(_,x){return a.provides[_]=x,p},runWithContext(_){const x=Cv;Cv=p;try{return _()}finally{Cv=x}}};return p}}let Cv=null;function Dr(e,t){if(Oa){let n=Oa.provides;const i=Oa.parent&&Oa.parent.provides;i===n&&(n=Oa.provides=Object.create(i)),n[e]=t}}function wi(e,t,n=!1){const i=__();if(i||Cv){let r=Cv?Cv._context.provides:i?i.parent==null||i.ce?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:void 0;if(r&&e in r)return r[e];if(arguments.length>1)return n&&gi(t)?t.call(i&&i.proxy):t}}const hz={},fz=()=>Object.create(hz),mz=e=>Object.getPrototypeOf(e)===hz;function C7(e,t,n,i=!1){const r={},a=fz();e.propsDefaults=Object.create(null),pz(e,t,r,a);for(const l in e.propsOptions[0])l in r||(r[l]=void 0);n?e.props=i?r:KW(r):e.type.props?e.props=r:e.props=a,e.attrs=a}function k7(e,t,n,i){const{props:r,attrs:a,vnode:{patchFlag:l}}=e,h=$n(r),[s]=e.propsOptions;let p=!1;if((i||l>0)&&!(l&16)){if(l&8){const _=e.vnode.dynamicProps;for(let x=0;x<_.length;x++){let T=_[x];if(lT(e.emitsOptions,T))continue;const k=t[T];if(s)if(Sr(a,T))k!==a[T]&&(a[T]=k,p=!0);else{const P=ll(T);r[P]=FC(s,h,P,k,e,!1)}else k!==a[T]&&(a[T]=k,p=!0)}}}else{pz(e,t,r,a)&&(p=!0);let _;for(const x in h)(!t||!Sr(t,x)&&((_=eg(x))===x||!Sr(t,_)))&&(s?n&&(n[x]!==void 0||n[_]!==void 0)&&(r[x]=FC(s,h,x,void 0,e,!0)):delete r[x]);if(a!==h)for(const x in a)(!t||!Sr(t,x))&&(delete a[x],p=!0)}p&&oh(e.attrs,"set","")}function pz(e,t,n,i){const[r,a]=e.propsOptions;let l=!1,h;if(t)for(let s in t){if(Yy(s))continue;const p=t[s];let _;r&&Sr(r,_=ll(s))?!a||!a.includes(_)?n[_]=p:(h||(h={}))[_]=p:lT(e.emitsOptions,s)||(!(s in i)||p!==i[s])&&(i[s]=p,l=!0)}if(a){const s=$n(n),p=h||zr;for(let _=0;_<a.length;_++){const x=a[_];n[x]=FC(r,s,x,p[x],e,!Sr(p,x))}}return l}function FC(e,t,n,i,r,a){const l=e[n];if(l!=null){const h=Sr(l,"default");if(h&&i===void 0){const s=l.default;if(l.type!==Function&&!l.skipFactory&&gi(s)){const{propsDefaults:p}=r;if(n in p)i=p[n];else{const _=h0(r);i=p[n]=s.call(null,t),_()}}else i=s;r.ce&&r.ce._setProp(n,i)}l[0]&&(a&&!h?i=!1:l[1]&&(i===""||i===eg(n))&&(i=!0))}return i}const I7=new WeakMap;function gz(e,t,n=!1){const i=n?I7:t.propsCache,r=i.get(e);if(r)return r;const a=e.props,l={},h=[];let s=!1;if(!gi(e)){const _=x=>{s=!0;const[T,k]=gz(x,t,!0);yo(l,T),k&&h.push(...k)};!n&&t.mixins.length&&t.mixins.forEach(_),e.extends&&_(e.extends),e.mixins&&e.mixins.forEach(_)}if(!a&&!s)return Ar(e)&&i.set(e,xv),xv;if(Zn(a))for(let _=0;_<a.length;_++){const x=ll(a[_]);dR(x)&&(l[x]=zr)}else if(a)for(const _ in a){const x=ll(_);if(dR(x)){const T=a[_],k=l[x]=Zn(T)||gi(T)?{type:T}:yo({},T),P=k.type;let M=!1,R=!0;if(Zn(P))for(let F=0;F<P.length;++F){const B=P[F],H=gi(B)&&B.name;if(H==="Boolean"){M=!0;break}else H==="String"&&(R=!1)}else M=gi(P)&&P.name==="Boolean";k[0]=M,k[1]=R,(M||Sr(k,"default"))&&h.push(x)}}const p=[l,h];return Ar(e)&&i.set(e,p),p}function dR(e){return e[0]!=="$"&&!Yy(e)}const NI=e=>e==="_"||e==="_ctx"||e==="$stable",UI=e=>Zn(e)?e.map(qu):[qu(e)],A7=(e,t,n)=>{if(t._n)return t;const i=An((...r)=>UI(t(...r)),n);return i._c=!1,i},vz=(e,t,n)=>{const i=e._ctx;for(const r in e){if(NI(r))continue;const a=e[r];if(gi(a))t[r]=A7(r,a,i);else if(a!=null){const l=UI(a);t[r]=()=>l}}},_z=(e,t)=>{const n=UI(t);e.slots.default=()=>n},yz=(e,t,n)=>{for(const i in t)(n||!NI(i))&&(e[i]=t[i])},P7=(e,t,n)=>{const i=e.slots=fz();if(e.vnode.shapeFlag&32){const r=t._;r?(yz(i,t,n),n&&vF(i,"_",r,!0)):vz(t,i)}else t&&_z(e,t)},M7=(e,t,n)=>{const{vnode:i,slots:r}=e;let a=!0,l=zr;if(i.shapeFlag&32){const h=t._;h?n&&h===1?a=!1:yz(r,t,n):(a=!t.$stable,vz(t,r)),l=t}else t&&(_z(e,t),l={default:1});if(a)for(const h in r)!NI(h)&&l[h]==null&&delete r[h]},fo=G7;function D7(e){return L7(e)}function L7(e,t){const n=Q1();n.__VUE__=!0;const{insert:i,remove:r,patchProp:a,createElement:l,createText:h,createComment:s,setText:p,setElementText:_,parentNode:x,nextSibling:T,setScopeId:k=Yu,insertStaticContent:P}=e,M=(ke,Ae,he,et=null,dt=null,Qe=null,Ct=void 0,Pt=null,Bt=!!Ae.dynamicChildren)=>{if(ke===Ae)return;ke&&!wf(ke,Ae)&&(et=Ye(ke),Je(ke,dt,Qe,!0),ke=null),Ae.patchFlag===-2&&(Bt=!1,Ae.dynamicChildren=null);const{type:Ht,ref:En,shapeFlag:Jt}=Ae;switch(Ht){case d0:R(ke,Ae,he,et);break;case ra:F(ke,Ae,he,et);break;case fw:ke==null&&B(Ae,he,et,Ct);break;case un:Y(ke,Ae,he,et,dt,Qe,Ct,Pt,Bt);break;default:Jt&1?ee(ke,Ae,he,et,dt,Qe,Ct,Pt,Bt):Jt&6?Z(ke,Ae,he,et,dt,Qe,Ct,Pt,Bt):(Jt&64||Jt&128)&&Ht.process(ke,Ae,he,et,dt,Qe,Ct,Pt,Bt,jt)}En!=null&&dt?eb(En,ke&&ke.ref,Qe,Ae||ke,!Ae):En==null&&ke&&ke.ref!=null&&eb(ke.ref,null,Qe,ke,!0)},R=(ke,Ae,he,et)=>{if(ke==null)i(Ae.el=h(Ae.children),he,et);else{const dt=Ae.el=ke.el;Ae.children!==ke.children&&p(dt,Ae.children)}},F=(ke,Ae,he,et)=>{ke==null?i(Ae.el=s(Ae.children||""),he,et):Ae.el=ke.el},B=(ke,Ae,he,et)=>{[ke.el,ke.anchor]=P(ke.children,Ae,he,et,ke.el,ke.anchor)},H=({el:ke,anchor:Ae},he,et)=>{let dt;for(;ke&&ke!==Ae;)dt=T(ke),i(ke,he,et),ke=dt;i(Ae,he,et)},G=({el:ke,anchor:Ae})=>{let he;for(;ke&&ke!==Ae;)he=T(ke),r(ke),ke=he;r(Ae)},ee=(ke,Ae,he,et,dt,Qe,Ct,Pt,Bt)=>{Ae.type==="svg"?Ct="svg":Ae.type==="math"&&(Ct="mathml"),ke==null?ie(Ae,he,et,dt,Qe,Ct,Pt,Bt):W(ke,Ae,dt,Qe,Ct,Pt,Bt)},ie=(ke,Ae,he,et,dt,Qe,Ct,Pt)=>{let Bt,Ht;const{props:En,shapeFlag:Jt,transition:Mn,dirs:Ln}=ke;if(Bt=ke.el=l(ke.type,Qe,En&&En.is,En),Jt&8?_(Bt,ke.children):Jt&16&&$(ke.children,Bt,null,et,dt,PE(ke,Qe),Ct,Pt),Ln&&np(ke,null,et,"created"),J(Bt,ke,ke.scopeId,Ct,et),En){for(const rn in En)rn!=="value"&&!Yy(rn)&&a(Bt,rn,null,En[rn],Qe,et);"value"in En&&a(Bt,"value",null,En.value,Qe),(Ht=En.onVnodeBeforeMount)&&Ac(Ht,et,ke)}Ln&&np(ke,null,et,"beforeMount");const Ut=R7(dt,Mn);Ut&&Mn.beforeEnter(Bt),i(Bt,Ae,he),((Ht=En&&En.onVnodeMounted)||Ut||Ln)&&fo(()=>{Ht&&Ac(Ht,et,ke),Ut&&Mn.enter(Bt),Ln&&np(ke,null,et,"mounted")},dt)},J=(ke,Ae,he,et,dt)=>{if(he&&k(ke,he),et)for(let Qe=0;Qe<et.length;Qe++)k(ke,et[Qe]);if(dt){let Qe=dt.subTree;if(Ae===Qe||Gw(Qe.type)&&(Qe.ssContent===Ae||Qe.ssFallback===Ae)){const Ct=dt.vnode;J(ke,Ct,Ct.scopeId,Ct.slotScopeIds,dt.parent)}}},$=(ke,Ae,he,et,dt,Qe,Ct,Pt,Bt=0)=>{for(let Ht=Bt;Ht<ke.length;Ht++){const En=ke[Ht]=Pt?yf(ke[Ht]):qu(ke[Ht]);M(null,En,Ae,he,et,dt,Qe,Ct,Pt)}},W=(ke,Ae,he,et,dt,Qe,Ct)=>{const Pt=Ae.el=ke.el;let{patchFlag:Bt,dynamicChildren:Ht,dirs:En}=Ae;Bt|=ke.patchFlag&16;const Jt=ke.props||zr,Mn=Ae.props||zr;let Ln;if(he&&ip(he,!1),(Ln=Mn.onVnodeBeforeUpdate)&&Ac(Ln,he,Ae,ke),En&&np(Ae,ke,he,"beforeUpdate"),he&&ip(he,!0),(Jt.innerHTML&&Mn.innerHTML==null||Jt.textContent&&Mn.textContent==null)&&_(Pt,""),Ht?X(ke.dynamicChildren,Ht,Pt,he,et,PE(Ae,dt),Qe):Ct||We(ke,Ae,Pt,null,he,et,PE(Ae,dt),Qe,!1),Bt>0){if(Bt&16)re(Pt,Jt,Mn,he,dt);else if(Bt&2&&Jt.class!==Mn.class&&a(Pt,"class",null,Mn.class,dt),Bt&4&&a(Pt,"style",Jt.style,Mn.style,dt),Bt&8){const Ut=Ae.dynamicProps;for(let rn=0;rn<Ut.length;rn++){const fn=Ut[rn],Bn=Jt[fn],ki=Mn[fn];(ki!==Bn||fn==="value")&&a(Pt,fn,Bn,ki,dt,he)}}Bt&1&&ke.children!==Ae.children&&_(Pt,Ae.children)}else!Ct&&Ht==null&&re(Pt,Jt,Mn,he,dt);((Ln=Mn.onVnodeUpdated)||En)&&fo(()=>{Ln&&Ac(Ln,he,Ae,ke),En&&np(Ae,ke,he,"updated")},et)},X=(ke,Ae,he,et,dt,Qe,Ct)=>{for(let Pt=0;Pt<Ae.length;Pt++){const Bt=ke[Pt],Ht=Ae[Pt],En=Bt.el&&(Bt.type===un||!wf(Bt,Ht)||Bt.shapeFlag&198)?x(Bt.el):he;M(Bt,Ht,En,null,et,dt,Qe,Ct,!0)}},re=(ke,Ae,he,et,dt)=>{if(Ae!==he){if(Ae!==zr)for(const Qe in Ae)!Yy(Qe)&&!(Qe in he)&&a(ke,Qe,Ae[Qe],null,dt,et);for(const Qe in he){if(Yy(Qe))continue;const Ct=he[Qe],Pt=Ae[Qe];Ct!==Pt&&Qe!=="value"&&a(ke,Qe,Pt,Ct,dt,et)}"value"in he&&a(ke,"value",Ae.value,he.value,dt)}},Y=(ke,Ae,he,et,dt,Qe,Ct,Pt,Bt)=>{const Ht=Ae.el=ke?ke.el:h(""),En=Ae.anchor=ke?ke.anchor:h("");let{patchFlag:Jt,dynamicChildren:Mn,slotScopeIds:Ln}=Ae;Ln&&(Pt=Pt?Pt.concat(Ln):Ln),ke==null?(i(Ht,he,et),i(En,he,et),$(Ae.children||[],he,En,dt,Qe,Ct,Pt,Bt)):Jt>0&&Jt&64&&Mn&&ke.dynamicChildren?(X(ke.dynamicChildren,Mn,he,dt,Qe,Ct,Pt),(Ae.key!=null||dt&&Ae===dt.subTree)&&$I(ke,Ae,!0)):We(ke,Ae,he,En,dt,Qe,Ct,Pt,Bt)},Z=(ke,Ae,he,et,dt,Qe,Ct,Pt,Bt)=>{Ae.slotScopeIds=Pt,ke==null?Ae.shapeFlag&512?dt.ctx.activate(Ae,he,et,Ct,Bt):ge(Ae,he,et,dt,Qe,Ct,Bt):be(ke,Ae,Bt)},ge=(ke,Ae,he,et,dt,Qe,Ct)=>{const Pt=ke.component=Z7(ke,et,dt);if(rT(ke)&&(Pt.ctx.renderer=jt),J7(Pt,!1,Ct),Pt.asyncDep){if(dt&&dt.registerDep(Pt,Be,Ct),!ke.el){const Bt=Pt.subTree=se(ra);F(null,Bt,Ae,he),ke.placeholder=Bt.el}}else Be(Pt,ke,Ae,he,dt,Qe,Ct)},be=(ke,Ae,he)=>{const et=Ae.component=ke.component;if(W7(ke,Ae,he))if(et.asyncDep&&!et.asyncResolved){nt(et,Ae,he);return}else et.next=Ae,et.update();else Ae.el=ke.el,et.vnode=Ae},Be=(ke,Ae,he,et,dt,Qe,Ct)=>{const Pt=()=>{if(ke.isMounted){let{next:Jt,bu:Mn,u:Ln,parent:Ut,vnode:rn}=ke;{const fr=bz(ke);if(fr){Jt&&(Jt.el=rn.el,nt(ke,Jt,Ct)),fr.asyncDep.then(()=>{ke.isUnmounted||Pt()});return}}let fn=Jt,Bn;ip(ke,!1),Jt?(Jt.el=rn.el,nt(ke,Jt,Ct)):Jt=rn,Mn&&Tv(Mn),(Bn=Jt.props&&Jt.props.onVnodeBeforeUpdate)&&Ac(Bn,Ut,Jt,rn),ip(ke,!0);const ki=hR(ke),qi=ke.subTree;ke.subTree=ki,M(qi,ki,x(qi.el),Ye(qi),ke,dt,Qe),Jt.el=ki.el,fn===null&&H7(ke,ki.el),Ln&&fo(Ln,dt),(Bn=Jt.props&&Jt.props.onVnodeUpdated)&&fo(()=>Ac(Bn,Ut,Jt,rn),dt)}else{let Jt;const{el:Mn,props:Ln}=Ae,{bm:Ut,m:rn,parent:fn,root:Bn,type:ki}=ke,qi=Ev(Ae);ip(ke,!1),Ut&&Tv(Ut),!qi&&(Jt=Ln&&Ln.onVnodeBeforeMount)&&Ac(Jt,fn,Ae),ip(ke,!0);{Bn.ce&&Bn.ce._def.shadowRoot!==!1&&Bn.ce._injectChildStyle(ki);const fr=ke.subTree=hR(ke);M(null,fr,he,et,ke,dt,Qe),Ae.el=fr.el}if(rn&&fo(rn,dt),!qi&&(Jt=Ln&&Ln.onVnodeMounted)){const fr=Ae;fo(()=>Ac(Jt,fn,fr),dt)}(Ae.shapeFlag&256||fn&&Ev(fn.vnode)&&fn.vnode.shapeFlag&256)&&ke.a&&fo(ke.a,dt),ke.isMounted=!0,Ae=he=et=null}};ke.scope.on();const Bt=ke.effect=new TF(Pt);ke.scope.off();const Ht=ke.update=Bt.run.bind(Bt),En=ke.job=Bt.runIfDirty.bind(Bt);En.i=ke,En.id=ke.uid,Bt.scheduler=()=>VI(En),ip(ke,!0),Ht()},nt=(ke,Ae,he)=>{Ae.component=ke;const et=ke.vnode.props;ke.vnode=Ae,ke.next=null,k7(ke,Ae.props,et,he),M7(ke,Ae.children,he),mh(),eR(ke),ph()},We=(ke,Ae,he,et,dt,Qe,Ct,Pt,Bt=!1)=>{const Ht=ke&&ke.children,En=ke?ke.shapeFlag:0,Jt=Ae.children,{patchFlag:Mn,shapeFlag:Ln}=Ae;if(Mn>0){if(Mn&128){Ze(Ht,Jt,he,et,dt,Qe,Ct,Pt,Bt);return}else if(Mn&256){Le(Ht,Jt,he,et,dt,Qe,Ct,Pt,Bt);return}}Ln&8?(En&16&&ot(Ht,dt,Qe),Jt!==Ht&&_(he,Jt)):En&16?Ln&16?Ze(Ht,Jt,he,et,dt,Qe,Ct,Pt,Bt):ot(Ht,dt,Qe,!0):(En&8&&_(he,""),Ln&16&&$(Jt,he,et,dt,Qe,Ct,Pt,Bt))},Le=(ke,Ae,he,et,dt,Qe,Ct,Pt,Bt)=>{ke=ke||xv,Ae=Ae||xv;const Ht=ke.length,En=Ae.length,Jt=Math.min(Ht,En);let Mn;for(Mn=0;Mn<Jt;Mn++){const Ln=Ae[Mn]=Bt?yf(Ae[Mn]):qu(Ae[Mn]);M(ke[Mn],Ln,he,null,dt,Qe,Ct,Pt,Bt)}Ht>En?ot(ke,dt,Qe,!0,!1,Jt):$(Ae,he,et,dt,Qe,Ct,Pt,Bt,Jt)},Ze=(ke,Ae,he,et,dt,Qe,Ct,Pt,Bt)=>{let Ht=0;const En=Ae.length;let Jt=ke.length-1,Mn=En-1;for(;Ht<=Jt&&Ht<=Mn;){const Ln=ke[Ht],Ut=Ae[Ht]=Bt?yf(Ae[Ht]):qu(Ae[Ht]);if(wf(Ln,Ut))M(Ln,Ut,he,null,dt,Qe,Ct,Pt,Bt);else break;Ht++}for(;Ht<=Jt&&Ht<=Mn;){const Ln=ke[Jt],Ut=Ae[Mn]=Bt?yf(Ae[Mn]):qu(Ae[Mn]);if(wf(Ln,Ut))M(Ln,Ut,he,null,dt,Qe,Ct,Pt,Bt);else break;Jt--,Mn--}if(Ht>Jt){if(Ht<=Mn){const Ln=Mn+1,Ut=Ln<En?Ae[Ln].el:et;for(;Ht<=Mn;)M(null,Ae[Ht]=Bt?yf(Ae[Ht]):qu(Ae[Ht]),he,Ut,dt,Qe,Ct,Pt,Bt),Ht++}}else if(Ht>Mn)for(;Ht<=Jt;)Je(ke[Ht],dt,Qe,!0),Ht++;else{const Ln=Ht,Ut=Ht,rn=new Map;for(Ht=Ut;Ht<=Mn;Ht++){const ir=Ae[Ht]=Bt?yf(Ae[Ht]):qu(Ae[Ht]);ir.key!=null&&rn.set(ir.key,Ht)}let fn,Bn=0;const ki=Mn-Ut+1;let qi=!1,fr=0;const ns=new Array(ki);for(Ht=0;Ht<ki;Ht++)ns[Ht]=0;for(Ht=Ln;Ht<=Jt;Ht++){const ir=ke[Ht];if(Bn>=ki){Je(ir,dt,Qe,!0);continue}let xr;if(ir.key!=null)xr=rn.get(ir.key);else for(fn=Ut;fn<=Mn;fn++)if(ns[fn-Ut]===0&&wf(ir,Ae[fn])){xr=fn;break}xr===void 0?Je(ir,dt,Qe,!0):(ns[xr-Ut]=Ht+1,xr>=fr?fr=xr:qi=!0,M(ir,Ae[xr],he,null,dt,Qe,Ct,Pt,Bt),Bn++)}const wo=qi?O7(ns):xv;for(fn=wo.length-1,Ht=ki-1;Ht>=0;Ht--){const ir=Ut+Ht,xr=Ae[ir],$o=Ae[ir+1],To=ir+1<En?$o.el||$o.placeholder:et;ns[Ht]===0?M(null,xr,he,To,dt,Qe,Ct,Pt,Bt):qi&&(fn<0||Ht!==wo[fn]?Ee(xr,he,To,2):fn--)}}},Ee=(ke,Ae,he,et,dt=null)=>{const{el:Qe,type:Ct,transition:Pt,children:Bt,shapeFlag:Ht}=ke;if(Ht&6){Ee(ke.component.subTree,Ae,he,et);return}if(Ht&128){ke.suspense.move(Ae,he,et);return}if(Ht&64){Ct.move(ke,Ae,he,jt);return}if(Ct===un){i(Qe,Ae,he);for(let Jt=0;Jt<Bt.length;Jt++)Ee(Bt[Jt],Ae,he,et);i(ke.anchor,Ae,he);return}if(Ct===fw){H(ke,Ae,he);return}if(et!==2&&Ht&1&&Pt)if(et===0)Pt.beforeEnter(Qe),i(Qe,Ae,he),fo(()=>Pt.enter(Qe),dt);else{const{leave:Jt,delayLeave:Mn,afterLeave:Ln}=Pt,Ut=()=>{ke.ctx.isUnmounted?r(Qe):i(Qe,Ae,he)},rn=()=>{Qe._isLeaving&&Qe[nh](!0),Jt(Qe,()=>{Ut(),Ln&&Ln()})};Mn?Mn(Qe,Ut,rn):rn()}else i(Qe,Ae,he)},Je=(ke,Ae,he,et=!1,dt=!1)=>{const{type:Qe,props:Ct,ref:Pt,children:Bt,dynamicChildren:Ht,shapeFlag:En,patchFlag:Jt,dirs:Mn,cacheIndex:Ln}=ke;if(Jt===-2&&(dt=!1),Pt!=null&&(mh(),eb(Pt,null,he,ke,!0),ph()),Ln!=null&&(Ae.renderCache[Ln]=void 0),En&256){Ae.ctx.deactivate(ke);return}const Ut=En&1&&Mn,rn=!Ev(ke);let fn;if(rn&&(fn=Ct&&Ct.onVnodeBeforeUnmount)&&Ac(fn,Ae,ke),En&6)mt(ke.component,he,et);else{if(En&128){ke.suspense.unmount(he,et);return}Ut&&np(ke,null,Ae,"beforeUnmount"),En&64?ke.type.remove(ke,Ae,he,jt,et):Ht&&!Ht.hasOnce&&(Qe!==un||Jt>0&&Jt&64)?ot(Ht,Ae,he,!1,!0):(Qe===un&&Jt&384||!dt&&En&16)&&ot(Bt,Ae,he),et&&it(ke)}(rn&&(fn=Ct&&Ct.onVnodeUnmounted)||Ut)&&fo(()=>{fn&&Ac(fn,Ae,ke),Ut&&np(ke,null,Ae,"unmounted")},he)},it=ke=>{const{type:Ae,el:he,anchor:et,transition:dt}=ke;if(Ae===un){vt(he,et);return}if(Ae===fw){G(ke);return}const Qe=()=>{r(he),dt&&!dt.persisted&&dt.afterLeave&&dt.afterLeave()};if(ke.shapeFlag&1&&dt&&!dt.persisted){const{leave:Ct,delayLeave:Pt}=dt,Bt=()=>Ct(he,Qe);Pt?Pt(ke.el,Qe,Bt):Bt()}else Qe()},vt=(ke,Ae)=>{let he;for(;ke!==Ae;)he=T(ke),r(ke),ke=he;r(Ae)},mt=(ke,Ae,he)=>{const{bum:et,scope:dt,job:Qe,subTree:Ct,um:Pt,m:Bt,a:Ht}=ke;Hw(Bt),Hw(Ht),et&&Tv(et),dt.stop(),Qe&&(Qe.flags|=8,Je(Ct,ke,Ae,he)),Pt&&fo(Pt,Ae),fo(()=>{ke.isUnmounted=!0},Ae)},ot=(ke,Ae,he,et=!1,dt=!1,Qe=0)=>{for(let Ct=Qe;Ct<ke.length;Ct++)Je(ke[Ct],Ae,he,et,dt)},Ye=ke=>{if(ke.shapeFlag&6)return Ye(ke.component.subTree);if(ke.shapeFlag&128)return ke.suspense.next();const Ae=T(ke.anchor||ke.el),he=Ae&&Ae[GF];return he?T(he):Ae};let ut=!1;const Ke=(ke,Ae,he)=>{ke==null?Ae._vnode&&Je(Ae._vnode,null,null,!0):M(Ae._vnode||null,ke,Ae,null,null,null,he),Ae._vnode=ke,ut||(ut=!0,eR(),jF(),ut=!1)},jt={p:M,um:Je,m:Ee,r:it,mt:ge,mc:$,pc:We,pbc:X,n:Ye,o:e};return{render:Ke,hydrate:void 0,createApp:E7(Ke)}}function PE({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function ip({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function R7(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function $I(e,t,n=!1){const i=e.children,r=t.children;if(Zn(i)&&Zn(r))for(let a=0;a<i.length;a++){const l=i[a];let h=r[a];h.shapeFlag&1&&!h.dynamicChildren&&((h.patchFlag<=0||h.patchFlag===32)&&(h=r[a]=yf(r[a]),h.el=l.el),!n&&h.patchFlag!==-2&&$I(l,h)),h.type===d0&&h.patchFlag!==-1&&(h.el=l.el),h.type===ra&&!h.el&&(h.el=l.el)}}function O7(e){const t=e.slice(),n=[0];let i,r,a,l,h;const s=e.length;for(i=0;i<s;i++){const p=e[i];if(p!==0){if(r=n[n.length-1],e[r]<p){t[i]=r,n.push(i);continue}for(a=0,l=n.length-1;a<l;)h=a+l>>1,e[n[h]]<p?a=h+1:l=h;p<e[n[a]]&&(a>0&&(t[i]=n[a-1]),n[a]=i)}}for(a=n.length,l=n[a-1];a-- >0;)n[a]=l,l=t[l];return n}function bz(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:bz(t)}function Hw(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const V7=Symbol.for("v-scx"),B7=()=>wi(V7);function Ur(e,t){return jI(e,null,t)}function qt(e,t,n){return jI(e,t,n)}function jI(e,t,n=zr){const{immediate:i,deep:r,flush:a,once:l}=n,h=yo({},n),s=t&&i||!t&&a!=="post";let p;if(Sb){if(a==="sync"){const k=B7();p=k.__watcherHandles||(k.__watcherHandles=[])}else if(!s){const k=()=>{};return k.stop=Yu,k.resume=Yu,k.pause=Yu,k}}const _=Oa;h.call=(k,P,M)=>mu(k,_,P,M);let x=!1;a==="post"?h.scheduler=k=>{fo(k,_&&_.suspense)}:a!=="sync"&&(x=!0,h.scheduler=(k,P)=>{P?k():VI(k)}),h.augmentJob=k=>{t&&(k.flags|=4),x&&(k.flags|=2,_&&(k.id=_.uid,k.i=_))};const T=n7(e,t,h);return Sb&&(p?p.push(T):s&&T()),T}function F7(e,t,n){const i=this.proxy,r=Qr(e)?e.includes(".")?xz(i,e):()=>i[e]:e.bind(i,i);let a;gi(t)?a=t:(a=t.handler,n=t);const l=h0(this),h=jI(r,a.bind(i),n);return l(),h}function xz(e,t){const n=t.split(".");return()=>{let i=e;for(let r=0;r<n.length&&i;r++)i=i[n[r]];return i}}const z7=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${ll(t)}Modifiers`]||e[`${eg(t)}Modifiers`];function N7(e,t,...n){if(e.isUnmounted)return;const i=e.vnode.props||zr;let r=n;const a=t.startsWith("update:"),l=a&&z7(i,t.slice(7));l&&(l.trim&&(r=n.map(_=>Qr(_)?_.trim():_)),l.number&&(r=n.map(Bw)));let h,s=i[h=wE(t)]||i[h=wE(ll(t))];!s&&a&&(s=i[h=wE(eg(t))]),s&&mu(s,e,6,r);const p=i[h+"Once"];if(p){if(!e.emitted)e.emitted={};else if(e.emitted[h])return;e.emitted[h]=!0,mu(p,e,6,r)}}const U7=new WeakMap;function wz(e,t,n=!1){const i=n?U7:t.emitsCache,r=i.get(e);if(r!==void 0)return r;const a=e.emits;let l={},h=!1;if(!gi(e)){const s=p=>{const _=wz(p,t,!0);_&&(h=!0,yo(l,_))};!n&&t.mixins.length&&t.mixins.forEach(s),e.extends&&s(e.extends),e.mixins&&e.mixins.forEach(s)}return!a&&!h?(Ar(e)&&i.set(e,null),null):(Zn(a)?a.forEach(s=>l[s]=null):yo(l,a),Ar(e)&&i.set(e,l),l)}function lT(e,t){return!e||!Y1(t)?!1:(t=t.slice(2).replace(/Once$/,""),Sr(e,t[0].toLowerCase()+t.slice(1))||Sr(e,eg(t))||Sr(e,t))}function hR(e){const{type:t,vnode:n,proxy:i,withProxy:r,propsOptions:[a],slots:l,attrs:h,emit:s,render:p,renderCache:_,props:x,data:T,setupState:k,ctx:P,inheritAttrs:M}=e,R=$w(e);let F,B;try{if(n.shapeFlag&4){const G=r||i,ee=G;F=qu(p.call(ee,G,_,x,k,T,P)),B=h}else{const G=t;F=qu(G.length>1?G(x,{attrs:h,slots:l,emit:s}):G(x,null)),B=t.props?h:$7(h)}}catch(G){nb.length=0,iT(G,e,1),F=se(ra)}let H=F;if(B&&M!==!1){const G=Object.keys(B),{shapeFlag:ee}=H;G.length&&ee&7&&(a&&G.some(kI)&&(B=j7(B,a)),H=sd(H,B,!1,!0))}return n.dirs&&(H=sd(H,null,!1,!0),H.dirs=H.dirs?H.dirs.concat(n.dirs):n.dirs),n.transition&&Kf(H,n.transition),F=H,$w(R),F}const $7=e=>{let t;for(const n in e)(n==="class"||n==="style"||Y1(n))&&((t||(t={}))[n]=e[n]);return t},j7=(e,t)=>{const n={};for(const i in e)(!kI(i)||!(i.slice(9)in t))&&(n[i]=e[i]);return n};function W7(e,t,n){const{props:i,children:r,component:a}=e,{props:l,children:h,patchFlag:s}=t,p=a.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&s>=0){if(s&1024)return!0;if(s&16)return i?fR(i,l,p):!!l;if(s&8){const _=t.dynamicProps;for(let x=0;x<_.length;x++){const T=_[x];if(l[T]!==i[T]&&!lT(p,T))return!0}}}else return(r||h)&&(!h||!h.$stable)?!0:i===l?!1:i?l?fR(i,l,p):!0:!!l;return!1}function fR(e,t,n){const i=Object.keys(t);if(i.length!==Object.keys(e).length)return!0;for(let r=0;r<i.length;r++){const a=i[r];if(t[a]!==e[a]&&!lT(n,a))return!0}return!1}function H7({vnode:e,parent:t},n){for(;t;){const i=t.subTree;if(i.suspense&&i.suspense.activeBranch===e&&(i.el=e.el),i===e)(e=t.vnode).el=n,t=t.parent;else break}}const Gw=e=>e.__isSuspense;function G7(e,t){t&&t.pendingBranch?Zn(e)?t.effects.push(...e):t.effects.push(e):s7(e)}const un=Symbol.for("v-fgt"),d0=Symbol.for("v-txt"),ra=Symbol.for("v-cmt"),fw=Symbol.for("v-stc"),nb=[];let tc=null;function nn(e=!1){nb.push(tc=e?null:[])}function q7(){nb.pop(),tc=nb[nb.length-1]||null}let Tb=1;function qw(e,t=!1){Tb+=e,e<0&&tc&&t&&(tc.hasOnce=!0)}function Tz(e){return e.dynamicChildren=Tb>0?tc||xv:null,q7(),Tb>0&&tc&&tc.push(e),e}function mn(e,t,n,i,r,a){return Tz(z(e,t,n,i,r,a,!0))}function Mc(e,t,n,i,r){return Tz(se(e,t,n,i,r,!0))}function Nv(e){return e?e.__v_isVNode===!0:!1}function wf(e,t){return e.type===t.type&&e.key===t.key}const Sz=({key:e})=>e??null,mw=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?Qr(e)||Rs(e)||gi(e)?{i:ec,r:e,k:t,f:!!n}:e:null);function z(e,t=null,n=null,i=0,r=null,a=e===un?0:1,l=!1,h=!1){const s={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Sz(t),ref:t&&mw(t),scopeId:HF,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:i,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:ec};return h?(WI(s,n),a&128&&e.normalize(s)):n&&(s.shapeFlag|=Qr(n)?8:16),Tb>0&&!l&&tc&&(s.patchFlag>0||a&6)&&s.patchFlag!==32&&tc.push(s),s}const se=K7;function K7(e,t=null,n=null,i=0,r=null,a=!1){if((!e||e===oz)&&(e=ra),Nv(e)){const h=sd(e,t,!0);return n&&WI(h,n),Tb>0&&!a&&tc&&(h.shapeFlag&6?tc[tc.indexOf(e)]=h:tc.push(h)),h.patchFlag=-2,h}if(nH(e)&&(e=e.__vccOpts),t){t=Ez(t);let{class:h,style:s}=t;h&&!Qr(h)&&(t.class=xt(h)),Ar(s)&&(nT(s)&&!Zn(s)&&(s=yo({},s)),t.style=Yt(s))}const l=Qr(e)?1:Gw(e)?128:qF(e)?64:Ar(e)?4:gi(e)?2:0;return z(e,t,n,i,r,l,a,!0)}function Ez(e){return e?nT(e)||mz(e)?yo({},e):e:null}function sd(e,t,n=!1,i=!1){const{props:r,ref:a,patchFlag:l,children:h,transition:s}=e,p=t?It(r||{},t):r,_={__v_isVNode:!0,__v_skip:!0,type:e.type,props:p,key:p&&Sz(p),ref:t&&t.ref?n&&a?Zn(a)?a.concat(mw(t)):[a,mw(t)]:mw(t):a,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:h,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==un?l===-1?16:l|16:l,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:s,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&sd(e.ssContent),ssFallback:e.ssFallback&&sd(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return s&&i&&Kf(_,s.clone(_)),_}function Fn(e=" ",t=0){return se(d0,null,e,t)}function pw(e,t){const n=se(fw,null,e);return n.staticCount=t,n}function tr(e="",t=!1){return t?(nn(),Mc(ra,null,e)):se(ra,null,e)}function qu(e){return e==null||typeof e=="boolean"?se(ra):Zn(e)?se(un,null,e.slice()):Nv(e)?yf(e):se(d0,null,String(e))}function yf(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:sd(e)}function WI(e,t){let n=0;const{shapeFlag:i}=e;if(t==null)t=null;else if(Zn(t))n=16;else if(typeof t=="object")if(i&65){const r=t.default;r&&(r._c&&(r._d=!1),WI(e,r()),r._c&&(r._d=!0));return}else{n=32;const r=t._;!r&&!mz(t)?t._ctx=ec:r===3&&ec&&(ec.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else gi(t)?(t={default:t,_ctx:ec},n=32):(t=String(t),i&64?(n=16,t=[Fn(t)]):n=8);e.children=t,e.shapeFlag|=n}function It(...e){const t={};for(let n=0;n<e.length;n++){const i=e[n];for(const r in i)if(r==="class")t.class!==i.class&&(t.class=xt([t.class,i.class]));else if(r==="style")t.style=Yt([t.style,i.style]);else if(Y1(r)){const a=t[r],l=i[r];l&&a!==l&&!(Zn(a)&&a.includes(l))&&(t[r]=a?[].concat(a,l):l)}else r!==""&&(t[r]=i[r])}return t}function Ac(e,t,n,i=null){mu(e,t,7,[n,i])}const X7=dz();let Y7=0;function Z7(e,t,n){const i=e.type,r=(t?t.appContext:e.appContext)||X7,a={uid:Y7++,vnode:e,type:i,parent:t,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new xF(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(r.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:gz(i,r),emitsOptions:wz(i,r),emit:null,emitted:null,propsDefaults:zr,inheritAttrs:i.inheritAttrs,ctx:zr,data:zr,props:zr,attrs:zr,slots:zr,refs:zr,setupState:zr,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=t?t.root:a,a.emit=N7.bind(null,a),e.ce&&e.ce(a),a}let Oa=null;const __=()=>Oa||ec;let Kw,zC;{const e=Q1(),t=(n,i)=>{let r;return(r=e[n])||(r=e[n]=[]),r.push(i),a=>{r.length>1?r.forEach(l=>l(a)):r[0](a)}};Kw=t("__VUE_INSTANCE_SETTERS__",n=>Oa=n),zC=t("__VUE_SSR_SETTERS__",n=>Sb=n)}const h0=e=>{const t=Oa;return Kw(e),e.scope.on(),()=>{e.scope.off(),Kw(t)}},mR=()=>{Oa&&Oa.scope.off(),Kw(null)};function Cz(e){return e.vnode.shapeFlag&4}let Sb=!1;function J7(e,t=!1,n=!1){t&&zC(t);const{props:i,children:r}=e.vnode,a=Cz(e);C7(e,i,a,t),P7(e,r,n||t);const l=a?Q7(e,t):void 0;return t&&zC(!1),l}function Q7(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,_7);const{setup:i}=n;if(i){mh();const r=e.setupContext=i.length>1?tH(e):null,a=h0(e),l=u0(i,e,0,[e.props,r]),h=mF(l);if(ph(),a(),(h||e.sp)&&!Ev(e)&&nz(e),h){if(l.then(mR,mR),t)return l.then(s=>{pR(e,s)}).catch(s=>{iT(s,e,0)});e.asyncDep=l}else pR(e,l)}else kz(e)}function pR(e,t,n){gi(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Ar(t)&&(e.setupState=zF(t)),kz(e)}function kz(e,t,n){const i=e.type;e.render||(e.render=i.render||Yu);{const r=h0(e);mh();try{y7(e)}finally{ph(),r()}}}const eH={get(e,t){return La(e,"get",""),e[t]}};function tH(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,eH),slots:e.slots,emit:e.emit,expose:t}}function cT(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(zF(BF(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in tb)return tb[n](e)},has(t,n){return n in t||n in tb}})):e.proxy}function NC(e,t=!0){return gi(e)?e.displayName||e.name:e.name||t&&e.__name}function nH(e){return gi(e)&&"__vccOpts"in e}const fe=(e,t)=>e7(e,t,Sb);function Eh(e,t,n){try{qw(-1);const i=arguments.length;return i===2?Ar(t)&&!Zn(t)?Nv(t)?se(e,null,[t]):se(e,t):se(e,null,t):(i>3?n=Array.prototype.slice.call(arguments,2):i===3&&Nv(n)&&(n=[n]),se(e,t,n))}finally{qw(1)}}const iH="3.5.22";/**
* @vue/runtime-dom v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let UC;const gR=typeof window<"u"&&window.trustedTypes;if(gR)try{UC=gR.createPolicy("vue",{createHTML:e=>e})}catch{}const Iz=UC?e=>UC.createHTML(e):e=>e,rH="http://www.w3.org/2000/svg",sH="http://www.w3.org/1998/Math/MathML",Qd=typeof document<"u"?document:null,vR=Qd&&Qd.createElement("template"),oH={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,i)=>{const r=t==="svg"?Qd.createElementNS(rH,e):t==="mathml"?Qd.createElementNS(sH,e):n?Qd.createElement(e,{is:n}):Qd.createElement(e);return e==="select"&&i&&i.multiple!=null&&r.setAttribute("multiple",i.multiple),r},createText:e=>Qd.createTextNode(e),createComment:e=>Qd.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Qd.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,i,r,a){const l=n?n.previousSibling:t.lastChild;if(r&&(r===a||r.nextSibling))for(;t.insertBefore(r.cloneNode(!0),n),!(r===a||!(r=r.nextSibling)););else{vR.innerHTML=Iz(i==="svg"?`<svg>${e}</svg>`:i==="mathml"?`<math>${e}</math>`:e);const h=vR.content;if(i==="svg"||i==="mathml"){const s=h.firstChild;for(;s.firstChild;)h.appendChild(s.firstChild);h.removeChild(s)}t.insertBefore(h,n)}return[l?l.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},mf="transition",Ey="animation",Uv=Symbol("_vtc"),Az={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Pz=yo({},ZF,Az),aH=e=>(e.displayName="Transition",e.props=Pz,e),od=aH((e,{slots:t})=>Eh(c7,Mz(e),t)),rp=(e,t=[])=>{Zn(e)?e.forEach(n=>n(...t)):e&&e(...t)},_R=e=>e?Zn(e)?e.some(t=>t.length>1):e.length>1:!1;function Mz(e){const t={};for(const Y in e)Y in Az||(t[Y]=e[Y]);if(e.css===!1)return t;const{name:n="v",type:i,duration:r,enterFromClass:a=`${n}-enter-from`,enterActiveClass:l=`${n}-enter-active`,enterToClass:h=`${n}-enter-to`,appearFromClass:s=a,appearActiveClass:p=l,appearToClass:_=h,leaveFromClass:x=`${n}-leave-from`,leaveActiveClass:T=`${n}-leave-active`,leaveToClass:k=`${n}-leave-to`}=e,P=lH(r),M=P&&P[0],R=P&&P[1],{onBeforeEnter:F,onEnter:B,onEnterCancelled:H,onLeave:G,onLeaveCancelled:ee,onBeforeAppear:ie=F,onAppear:J=B,onAppearCancelled:$=H}=t,W=(Y,Z,ge,be)=>{Y._enterCancelled=be,gf(Y,Z?_:h),gf(Y,Z?p:l),ge&&ge()},X=(Y,Z)=>{Y._isLeaving=!1,gf(Y,x),gf(Y,k),gf(Y,T),Z&&Z()},re=Y=>(Z,ge)=>{const be=Y?J:B,Be=()=>W(Z,Y,ge);rp(be,[Z,Be]),yR(()=>{gf(Z,Y?s:a),Nu(Z,Y?_:h),_R(be)||bR(Z,i,M,Be)})};return yo(t,{onBeforeEnter(Y){rp(F,[Y]),Nu(Y,a),Nu(Y,l)},onBeforeAppear(Y){rp(ie,[Y]),Nu(Y,s),Nu(Y,p)},onEnter:re(!1),onAppear:re(!0),onLeave(Y,Z){Y._isLeaving=!0;const ge=()=>X(Y,Z);Nu(Y,x),Y._enterCancelled?(Nu(Y,T),$C(Y)):($C(Y),Nu(Y,T)),yR(()=>{Y._isLeaving&&(gf(Y,x),Nu(Y,k),_R(G)||bR(Y,i,R,ge))}),rp(G,[Y,ge])},onEnterCancelled(Y){W(Y,!1,void 0,!0),rp(H,[Y])},onAppearCancelled(Y){W(Y,!0,void 0,!0),rp($,[Y])},onLeaveCancelled(Y){X(Y),rp(ee,[Y])}})}function lH(e){if(e==null)return null;if(Ar(e))return[ME(e.enter),ME(e.leave)];{const t=ME(e);return[t,t]}}function ME(e){return yW(e)}function Nu(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e[Uv]||(e[Uv]=new Set)).add(t)}function gf(e,t){t.split(/\s+/).forEach(i=>i&&e.classList.remove(i));const n=e[Uv];n&&(n.delete(t),n.size||(e[Uv]=void 0))}function yR(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let cH=0;function bR(e,t,n,i){const r=e._endId=++cH,a=()=>{r===e._endId&&i()};if(n!=null)return setTimeout(a,n);const{type:l,timeout:h,propCount:s}=Dz(e,t);if(!l)return i();const p=l+"end";let _=0;const x=()=>{e.removeEventListener(p,T),a()},T=k=>{k.target===e&&++_>=s&&x()};setTimeout(()=>{_<s&&x()},h+1),e.addEventListener(p,T)}function Dz(e,t){const n=window.getComputedStyle(e),i=P=>(n[P]||"").split(", "),r=i(`${mf}Delay`),a=i(`${mf}Duration`),l=xR(r,a),h=i(`${Ey}Delay`),s=i(`${Ey}Duration`),p=xR(h,s);let _=null,x=0,T=0;t===mf?l>0&&(_=mf,x=l,T=a.length):t===Ey?p>0&&(_=Ey,x=p,T=s.length):(x=Math.max(l,p),_=x>0?l>p?mf:Ey:null,T=_?_===mf?a.length:s.length:0);const k=_===mf&&/\b(?:transform|all)(?:,|$)/.test(i(`${mf}Property`).toString());return{type:_,timeout:x,propCount:T,hasTransform:k}}function xR(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,i)=>wR(n)+wR(e[i])))}function wR(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function $C(e){return(e?e.ownerDocument:document).body.offsetHeight}function uH(e,t,n){const i=e[Uv];i&&(t=(t?[t,...i]:[...i]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const Xw=Symbol("_vod"),Lz=Symbol("_vsh"),_u={name:"show",beforeMount(e,{value:t},{transition:n}){e[Xw]=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):Cy(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:i}){!t!=!n&&(i?t?(i.beforeEnter(e),Cy(e,!0),i.enter(e)):i.leave(e,()=>{Cy(e,!1)}):Cy(e,t))},beforeUnmount(e,{value:t}){Cy(e,t)}};function Cy(e,t){e.style.display=t?e[Xw]:"none",e[Lz]=!t}const dH=Symbol(""),hH=/(?:^|;)\s*display\s*:/;function fH(e,t,n){const i=e.style,r=Qr(n);let a=!1;if(n&&!r){if(t)if(Qr(t))for(const l of t.split(";")){const h=l.slice(0,l.indexOf(":")).trim();n[h]==null&&gw(i,h,"")}else for(const l in t)n[l]==null&&gw(i,l,"");for(const l in n)l==="display"&&(a=!0),gw(i,l,n[l])}else if(r){if(t!==n){const l=i[dH];l&&(n+=";"+l),i.cssText=n,a=hH.test(n)}}else t&&e.removeAttribute("style");Xw in e&&(e[Xw]=a?i.display:"",e[Lz]&&(i.display="none"))}const TR=/\s*!important$/;function gw(e,t,n){if(Zn(n))n.forEach(i=>gw(e,t,i));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const i=mH(e,t);TR.test(n)?e.setProperty(eg(i),n.replace(TR,""),"important"):e[i]=n}}const SR=["Webkit","Moz","ms"],DE={};function mH(e,t){const n=DE[t];if(n)return n;let i=ll(t);if(i!=="filter"&&i in e)return DE[t]=i;i=md(i);for(let r=0;r<SR.length;r++){const a=SR[r]+i;if(a in e)return DE[t]=a}return t}const ER="http://www.w3.org/1999/xlink";function CR(e,t,n,i,r,a=CW(t)){i&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(ER,t.slice(6,t.length)):e.setAttributeNS(ER,t,n):n==null||a&&!_F(n)?e.removeAttribute(t):e.setAttribute(t,a?"":rd(n)?String(n):n)}function kR(e,t,n,i,r){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?Iz(n):n);return}const a=e.tagName;if(t==="value"&&a!=="PROGRESS"&&!a.includes("-")){const h=a==="OPTION"?e.getAttribute("value")||"":e.value,s=n==null?e.type==="checkbox"?"on":"":String(n);(h!==s||!("_value"in e))&&(e.value=s),n==null&&e.removeAttribute(t),e._value=n;return}let l=!1;if(n===""||n==null){const h=typeof e[t];h==="boolean"?n=_F(n):n==null&&h==="string"?(n="",l=!0):h==="number"&&(n=0,l=!0)}try{e[t]=n}catch{}l&&e.removeAttribute(r||t)}function yp(e,t,n,i){e.addEventListener(t,n,i)}function pH(e,t,n,i){e.removeEventListener(t,n,i)}const IR=Symbol("_vei");function gH(e,t,n,i,r=null){const a=e[IR]||(e[IR]={}),l=a[t];if(i&&l)l.value=i;else{const[h,s]=vH(t);if(i){const p=a[t]=bH(i,r);yp(e,h,p,s)}else l&&(pH(e,h,l,s),a[t]=void 0)}}const AR=/(?:Once|Passive|Capture)$/;function vH(e){let t;if(AR.test(e)){t={};let i;for(;i=e.match(AR);)e=e.slice(0,e.length-i[0].length),t[i[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):eg(e.slice(2)),t]}let LE=0;const _H=Promise.resolve(),yH=()=>LE||(_H.then(()=>LE=0),LE=Date.now());function bH(e,t){const n=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=n.attached)return;mu(xH(i,n.value),t,5,[i])};return n.value=e,n.attached=yH(),n}function xH(e,t){if(Zn(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(i=>r=>!r._stopped&&i&&i(r))}else return t}const PR=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,wH=(e,t,n,i,r,a)=>{const l=r==="svg";t==="class"?uH(e,i,l):t==="style"?fH(e,n,i):Y1(t)?kI(t)||gH(e,t,n,i,a):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):TH(e,t,i,l))?(kR(e,t,i),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&CR(e,t,i,l,a,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Qr(i))?kR(e,ll(t),i,a,t):(t==="true-value"?e._trueValue=i:t==="false-value"&&(e._falseValue=i),CR(e,t,i,l))};function TH(e,t,n,i){if(i)return!!(t==="innerHTML"||t==="textContent"||t in e&&PR(t)&&gi(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const r=e.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return PR(t)&&Qr(n)?!1:t in e}const Rz=new WeakMap,Oz=new WeakMap,Yw=Symbol("_moveCb"),MR=Symbol("_enterCb"),SH=e=>(delete e.props.mode,e),EH=SH({name:"TransitionGroup",props:yo({},Pz,{tag:String,moveClass:String}),setup(e,{slots:t}){const n=__(),i=YF();let r,a;return aT(()=>{if(!r.length)return;const l=e.moveClass||`${e.name||"v"}-move`;if(!AH(r[0].el,n.vnode.el,l)){r=[];return}r.forEach(CH),r.forEach(kH);const h=r.filter(IH);$C(n.vnode.el),h.forEach(s=>{const p=s.el,_=p.style;Nu(p,l),_.transform=_.webkitTransform=_.transitionDuration="";const x=p[Yw]=T=>{T&&T.target!==p||(!T||T.propertyName.endsWith("transform"))&&(p.removeEventListener("transitionend",x),p[Yw]=null,gf(p,l))};p.addEventListener("transitionend",x)}),r=[]}),()=>{const l=$n(e),h=Mz(l);let s=l.tag||un;if(r=[],a)for(let p=0;p<a.length;p++){const _=a[p];_.el&&_.el instanceof Element&&(r.push(_),Kf(_,wb(_,h,i,n)),Rz.set(_,_.el.getBoundingClientRect()))}a=t.default?BI(t.default()):[];for(let p=0;p<a.length;p++){const _=a[p];_.key!=null&&Kf(_,wb(_,h,i,n))}return se(s,null,a)}}}),HI=EH;function CH(e){const t=e.el;t[Yw]&&t[Yw](),t[MR]&&t[MR]()}function kH(e){Oz.set(e,e.el.getBoundingClientRect())}function IH(e){const t=Rz.get(e),n=Oz.get(e),i=t.left-n.left,r=t.top-n.top;if(i||r){const a=e.el.style;return a.transform=a.webkitTransform=`translate(${i}px,${r}px)`,a.transitionDuration="0s",e}}function AH(e,t,n){const i=e.cloneNode(),r=e[Uv];r&&r.forEach(h=>{h.split(/\s+/).forEach(s=>s&&i.classList.remove(s))}),n.split(/\s+/).forEach(h=>h&&i.classList.add(h)),i.style.display="none";const a=t.nodeType===1?t:t.parentNode;a.appendChild(i);const{hasTransform:l}=Dz(i);return a.removeChild(i),l}const Zw=e=>{const t=e.props["onUpdate:modelValue"]||!1;return Zn(t)?n=>Tv(t,n):t};function PH(e){e.target.composing=!0}function DR(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const kv=Symbol("_assign"),bf={created(e,{modifiers:{lazy:t,trim:n,number:i}},r){e[kv]=Zw(r);const a=i||r.props&&r.props.type==="number";yp(e,t?"change":"input",l=>{if(l.target.composing)return;let h=e.value;n&&(h=h.trim()),a&&(h=Bw(h)),e[kv](h)}),n&&yp(e,"change",()=>{e.value=e.value.trim()}),t||(yp(e,"compositionstart",PH),yp(e,"compositionend",DR),yp(e,"change",DR))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:i,trim:r,number:a}},l){if(e[kv]=Zw(l),e.composing)return;const h=(a||e.type==="number")&&!/^0\d/.test(e.value)?Bw(e.value):e.value,s=t??"";h!==s&&(document.activeElement===e&&e.type!=="range"&&(i&&t===n||r&&e.value.trim()===s)||(e.value=s))}},$v={deep:!0,created(e,{value:t,modifiers:{number:n}},i){const r=Z1(t);yp(e,"change",()=>{const a=Array.prototype.filter.call(e.options,l=>l.selected).map(l=>n?Bw(Jw(l)):Jw(l));e[kv](e.multiple?r?new Set(a):a:a[0]),e._assigning=!0,Hn(()=>{e._assigning=!1})}),e[kv]=Zw(i)},mounted(e,{value:t}){LR(e,t)},beforeUpdate(e,t,n){e[kv]=Zw(n)},updated(e,{value:t}){e._assigning||LR(e,t)}};function LR(e,t){const n=e.multiple,i=Zn(t);if(!(n&&!i&&!Z1(t))){for(let r=0,a=e.options.length;r<a;r++){const l=e.options[r],h=Jw(l);if(n)if(i){const s=typeof h;s==="string"||s==="number"?l.selected=t.some(p=>String(p)===String(h)):l.selected=IW(t,h)>-1}else l.selected=t.has(h);else if(eT(Jw(l),t)){e.selectedIndex!==r&&(e.selectedIndex=r);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function Jw(e){return"_value"in e?e._value:e.value}const MH=["ctrl","shift","alt","meta"],DH={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>MH.some(n=>e[`${n}Key`]&&!t.includes(n))},ol=(e,t)=>{const n=e._withMods||(e._withMods={}),i=t.join(".");return n[i]||(n[i]=((r,...a)=>{for(let l=0;l<t.length;l++){const h=DH[t[l]];if(h&&h(r,t))return}return e(r,...a)}))},LH=yo({patchProp:wH},oH);let RR;function Vz(){return RR||(RR=D7(LH))}const Bz=((...e)=>{Vz().render(...e)}),RH=((...e)=>{const t=Vz().createApp(...e),{mount:n}=t;return t.mount=i=>{const r=VH(i);if(!r)return;const a=t._component;!gi(a)&&!a.render&&!a.template&&(a.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const l=n(r,!1,OH(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),l},t});function OH(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function VH(e){return Qr(e)?document.querySelector(e):e}const BH="/assets/MrtFootage-IFblOD9w.mp4";function Fz(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var vw={exports:{}},FH=vw.exports,OR;function zH(){return OR||(OR=1,(function(e,t){(function(n,i){e.exports=i()})(FH,function(){return(function(n){function i(a){if(r[a])return r[a].exports;var l=r[a]={exports:{},id:a,loaded:!1};return n[a].call(l.exports,l,l.exports,i),l.loaded=!0,l.exports}var r={};return i.m=n,i.c=r,i.p="dist/",i(0)})([function(n,i,r){function a(ge){return ge&&ge.__esModule?ge:{default:ge}}var l=Object.assign||function(ge){for(var be=1;be<arguments.length;be++){var Be=arguments[be];for(var nt in Be)Object.prototype.hasOwnProperty.call(Be,nt)&&(ge[nt]=Be[nt])}return ge},h=r(1),s=(a(h),r(6)),p=a(s),_=r(7),x=a(_),T=r(8),k=a(T),P=r(9),M=a(P),R=r(10),F=a(R),B=r(11),H=a(B),G=r(14),ee=a(G),ie=[],J=!1,$={offset:120,delay:0,easing:"ease",duration:400,disable:!1,once:!1,startEvent:"DOMContentLoaded",throttleDelay:99,debounceDelay:50,disableMutationObserver:!1},W=function(){var ge=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(ge&&(J=!0),J)return ie=(0,H.default)(ie,$),(0,F.default)(ie,$.once),ie},X=function(){ie=(0,ee.default)(),W()},re=function(){ie.forEach(function(ge,be){ge.node.removeAttribute("data-aos"),ge.node.removeAttribute("data-aos-easing"),ge.node.removeAttribute("data-aos-duration"),ge.node.removeAttribute("data-aos-delay")})},Y=function(ge){return ge===!0||ge==="mobile"&&M.default.mobile()||ge==="phone"&&M.default.phone()||ge==="tablet"&&M.default.tablet()||typeof ge=="function"&&ge()===!0},Z=function(ge){$=l($,ge),ie=(0,ee.default)();var be=document.all&&!window.atob;return Y($.disable)||be?re():($.disableMutationObserver||k.default.isSupported()||(console.info(`
      aos: MutationObserver is not supported on this browser,
      code mutations observing has been disabled.
      You may have to call "refreshHard()" by yourself.
    `),$.disableMutationObserver=!0),document.querySelector("body").setAttribute("data-aos-easing",$.easing),document.querySelector("body").setAttribute("data-aos-duration",$.duration),document.querySelector("body").setAttribute("data-aos-delay",$.delay),$.startEvent==="DOMContentLoaded"&&["complete","interactive"].indexOf(document.readyState)>-1?W(!0):$.startEvent==="load"?window.addEventListener($.startEvent,function(){W(!0)}):document.addEventListener($.startEvent,function(){W(!0)}),window.addEventListener("resize",(0,x.default)(W,$.debounceDelay,!0)),window.addEventListener("orientationchange",(0,x.default)(W,$.debounceDelay,!0)),window.addEventListener("scroll",(0,p.default)(function(){(0,F.default)(ie,$.once)},$.throttleDelay)),$.disableMutationObserver||k.default.ready("[data-aos]",X),ie)};n.exports={init:Z,refresh:W,refreshHard:X}},function(n,i){},,,,,function(n,i){(function(r){function a(Y,Z,ge){function be(he){var et=vt,dt=mt;return vt=mt=void 0,jt=he,Ye=Y.apply(dt,et)}function Be(he){return jt=he,ut=setTimeout(Le,Z),xn?be(he):Ye}function nt(he){var et=he-Ke,dt=he-jt,Qe=Z-et;return ke?X(Qe,ot-dt):Qe}function We(he){var et=he-Ke,dt=he-jt;return Ke===void 0||et>=Z||et<0||ke&&dt>=ot}function Le(){var he=re();return We(he)?Ze(he):void(ut=setTimeout(Le,nt(he)))}function Ze(he){return ut=void 0,Ae&&vt?be(he):(vt=mt=void 0,Ye)}function Ee(){ut!==void 0&&clearTimeout(ut),jt=0,vt=Ke=mt=ut=void 0}function Je(){return ut===void 0?Ye:Ze(re())}function it(){var he=re(),et=We(he);if(vt=arguments,mt=this,Ke=he,et){if(ut===void 0)return Be(Ke);if(ke)return ut=setTimeout(Le,Z),be(Ke)}return ut===void 0&&(ut=setTimeout(Le,Z)),Ye}var vt,mt,ot,Ye,ut,Ke,jt=0,xn=!1,ke=!1,Ae=!0;if(typeof Y!="function")throw new TypeError(T);return Z=_(Z)||0,h(ge)&&(xn=!!ge.leading,ke="maxWait"in ge,ot=ke?W(_(ge.maxWait)||0,Z):ot,Ae="trailing"in ge?!!ge.trailing:Ae),it.cancel=Ee,it.flush=Je,it}function l(Y,Z,ge){var be=!0,Be=!0;if(typeof Y!="function")throw new TypeError(T);return h(ge)&&(be="leading"in ge?!!ge.leading:be,Be="trailing"in ge?!!ge.trailing:Be),a(Y,Z,{leading:be,maxWait:Z,trailing:Be})}function h(Y){var Z=typeof Y>"u"?"undefined":x(Y);return!!Y&&(Z=="object"||Z=="function")}function s(Y){return!!Y&&(typeof Y>"u"?"undefined":x(Y))=="object"}function p(Y){return(typeof Y>"u"?"undefined":x(Y))=="symbol"||s(Y)&&$.call(Y)==P}function _(Y){if(typeof Y=="number")return Y;if(p(Y))return k;if(h(Y)){var Z=typeof Y.valueOf=="function"?Y.valueOf():Y;Y=h(Z)?Z+"":Z}if(typeof Y!="string")return Y===0?Y:+Y;Y=Y.replace(M,"");var ge=F.test(Y);return ge||B.test(Y)?H(Y.slice(2),ge?2:8):R.test(Y)?k:+Y}var x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y},T="Expected a function",k=NaN,P="[object Symbol]",M=/^\s+|\s+$/g,R=/^[-+]0x[0-9a-f]+$/i,F=/^0b[01]+$/i,B=/^0o[0-7]+$/i,H=parseInt,G=(typeof r>"u"?"undefined":x(r))=="object"&&r&&r.Object===Object&&r,ee=(typeof self>"u"?"undefined":x(self))=="object"&&self&&self.Object===Object&&self,ie=G||ee||Function("return this")(),J=Object.prototype,$=J.toString,W=Math.max,X=Math.min,re=function(){return ie.Date.now()};n.exports=l}).call(i,(function(){return this})())},function(n,i){(function(r){function a(re,Y,Z){function ge(Ae){var he=it,et=vt;return it=vt=void 0,Ke=Ae,ot=re.apply(et,he)}function be(Ae){return Ke=Ae,Ye=setTimeout(We,Y),jt?ge(Ae):ot}function Be(Ae){var he=Ae-ut,et=Ae-Ke,dt=Y-he;return xn?W(dt,mt-et):dt}function nt(Ae){var he=Ae-ut,et=Ae-Ke;return ut===void 0||he>=Y||he<0||xn&&et>=mt}function We(){var Ae=X();return nt(Ae)?Le(Ae):void(Ye=setTimeout(We,Be(Ae)))}function Le(Ae){return Ye=void 0,ke&&it?ge(Ae):(it=vt=void 0,ot)}function Ze(){Ye!==void 0&&clearTimeout(Ye),Ke=0,it=ut=vt=Ye=void 0}function Ee(){return Ye===void 0?ot:Le(X())}function Je(){var Ae=X(),he=nt(Ae);if(it=arguments,vt=this,ut=Ae,he){if(Ye===void 0)return be(ut);if(xn)return Ye=setTimeout(We,Y),ge(ut)}return Ye===void 0&&(Ye=setTimeout(We,Y)),ot}var it,vt,mt,ot,Ye,ut,Ke=0,jt=!1,xn=!1,ke=!0;if(typeof re!="function")throw new TypeError(x);return Y=p(Y)||0,l(Z)&&(jt=!!Z.leading,xn="maxWait"in Z,mt=xn?$(p(Z.maxWait)||0,Y):mt,ke="trailing"in Z?!!Z.trailing:ke),Je.cancel=Ze,Je.flush=Ee,Je}function l(re){var Y=typeof re>"u"?"undefined":_(re);return!!re&&(Y=="object"||Y=="function")}function h(re){return!!re&&(typeof re>"u"?"undefined":_(re))=="object"}function s(re){return(typeof re>"u"?"undefined":_(re))=="symbol"||h(re)&&J.call(re)==k}function p(re){if(typeof re=="number")return re;if(s(re))return T;if(l(re)){var Y=typeof re.valueOf=="function"?re.valueOf():re;re=l(Y)?Y+"":Y}if(typeof re!="string")return re===0?re:+re;re=re.replace(P,"");var Z=R.test(re);return Z||F.test(re)?B(re.slice(2),Z?2:8):M.test(re)?T:+re}var _=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(re){return typeof re}:function(re){return re&&typeof Symbol=="function"&&re.constructor===Symbol&&re!==Symbol.prototype?"symbol":typeof re},x="Expected a function",T=NaN,k="[object Symbol]",P=/^\s+|\s+$/g,M=/^[-+]0x[0-9a-f]+$/i,R=/^0b[01]+$/i,F=/^0o[0-7]+$/i,B=parseInt,H=(typeof r>"u"?"undefined":_(r))=="object"&&r&&r.Object===Object&&r,G=(typeof self>"u"?"undefined":_(self))=="object"&&self&&self.Object===Object&&self,ee=H||G||Function("return this")(),ie=Object.prototype,J=ie.toString,$=Math.max,W=Math.min,X=function(){return ee.Date.now()};n.exports=a}).call(i,(function(){return this})())},function(n,i){function r(_){var x=void 0,T=void 0;for(x=0;x<_.length;x+=1)if(T=_[x],T.dataset&&T.dataset.aos||T.children&&r(T.children))return!0;return!1}function a(){return window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver}function l(){return!!a()}function h(_,x){var T=window.document,k=a(),P=new k(s);p=x,P.observe(T.documentElement,{childList:!0,subtree:!0,removedNodes:!0})}function s(_){_&&_.forEach(function(x){var T=Array.prototype.slice.call(x.addedNodes),k=Array.prototype.slice.call(x.removedNodes),P=T.concat(k);if(r(P))return p()})}Object.defineProperty(i,"__esModule",{value:!0});var p=function(){};i.default={isSupported:l,ready:h}},function(n,i){function r(T,k){if(!(T instanceof k))throw new TypeError("Cannot call a class as a function")}function a(){return navigator.userAgent||navigator.vendor||window.opera||""}Object.defineProperty(i,"__esModule",{value:!0});var l=(function(){function T(k,P){for(var M=0;M<P.length;M++){var R=P[M];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(k,R.key,R)}}return function(k,P,M){return P&&T(k.prototype,P),M&&T(k,M),k}})(),h=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,s=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,p=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i,_=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,x=(function(){function T(){r(this,T)}return l(T,[{key:"phone",value:function(){var k=a();return!(!h.test(k)&&!s.test(k.substr(0,4)))}},{key:"mobile",value:function(){var k=a();return!(!p.test(k)&&!_.test(k.substr(0,4)))}},{key:"tablet",value:function(){return this.mobile()&&!this.phone()}}]),T})();i.default=new x},function(n,i){Object.defineProperty(i,"__esModule",{value:!0});var r=function(l,h,s){var p=l.node.getAttribute("data-aos-once");h>l.position?l.node.classList.add("aos-animate"):typeof p<"u"&&(p==="false"||!s&&p!=="true")&&l.node.classList.remove("aos-animate")},a=function(l,h){var s=window.pageYOffset,p=window.innerHeight;l.forEach(function(_,x){r(_,p+s,h)})};i.default=a},function(n,i,r){function a(p){return p&&p.__esModule?p:{default:p}}Object.defineProperty(i,"__esModule",{value:!0});var l=r(12),h=a(l),s=function(p,_){return p.forEach(function(x,T){x.node.classList.add("aos-init"),x.position=(0,h.default)(x.node,_.offset)}),p};i.default=s},function(n,i,r){function a(p){return p&&p.__esModule?p:{default:p}}Object.defineProperty(i,"__esModule",{value:!0});var l=r(13),h=a(l),s=function(p,_){var x=0,T=0,k=window.innerHeight,P={offset:p.getAttribute("data-aos-offset"),anchor:p.getAttribute("data-aos-anchor"),anchorPlacement:p.getAttribute("data-aos-anchor-placement")};switch(P.offset&&!isNaN(P.offset)&&(T=parseInt(P.offset)),P.anchor&&document.querySelectorAll(P.anchor)&&(p=document.querySelectorAll(P.anchor)[0]),x=(0,h.default)(p).top,P.anchorPlacement){case"top-bottom":break;case"center-bottom":x+=p.offsetHeight/2;break;case"bottom-bottom":x+=p.offsetHeight;break;case"top-center":x+=k/2;break;case"bottom-center":x+=k/2+p.offsetHeight;break;case"center-center":x+=k/2+p.offsetHeight/2;break;case"top-top":x+=k;break;case"bottom-top":x+=p.offsetHeight+k;break;case"center-top":x+=p.offsetHeight/2+k}return P.anchorPlacement||P.offset||isNaN(_)||(T=_),x+T};i.default=s},function(n,i){Object.defineProperty(i,"__esModule",{value:!0});var r=function(a){for(var l=0,h=0;a&&!isNaN(a.offsetLeft)&&!isNaN(a.offsetTop);)l+=a.offsetLeft-(a.tagName!="BODY"?a.scrollLeft:0),h+=a.offsetTop-(a.tagName!="BODY"?a.scrollTop:0),a=a.offsetParent;return{top:h,left:l}};i.default=r},function(n,i){Object.defineProperty(i,"__esModule",{value:!0});var r=function(a){return a=a||document.querySelectorAll("[data-aos]"),Array.prototype.map.call(a,function(l){return{node:l}})};i.default=r}])})})(vw)),vw.exports}var NH=zH();const Vx=Fz(NH);function eh(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zz(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}/*!
 * GSAP 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var oc={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},jv={duration:.5,overwrite:!1,delay:0},GI,oa,ls,Rc=1e8,Fr=1/Rc,jC=Math.PI*2,UH=jC/4,$H=0,Nz=Math.sqrt,jH=Math.cos,WH=Math.sin,zo=function(t){return typeof t=="string"},Ds=function(t){return typeof t=="function"},gh=function(t){return typeof t=="number"},qI=function(t){return typeof t>"u"},ad=function(t){return typeof t=="object"},Pl=function(t){return t!==!1},KI=function(){return typeof window<"u"},Bx=function(t){return Ds(t)||zo(t)},Uz=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},$a=Array.isArray,WC=/(?:-?\.?\d|\.)+/gi,$z=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,gv=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,RE=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,jz=/[+-]=-?[.\d]+/,Wz=/[^,'"\[\]\s]+/gi,HH=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,vs,Hu,HC,XI,ac={},Qw={},Hz,Gz=function(t){return(Qw=Wv(t,ac))&&Rl},YI=function(t,n){return console.warn("Invalid property",t,"set to",n,"Missing plugin? gsap.registerPlugin()")},Eb=function(t,n){return!n&&console.warn(t)},qz=function(t,n){return t&&(ac[t]=n)&&Qw&&(Qw[t]=n)||ac},Cb=function(){return 0},GH={suppressEvents:!0,isStart:!0,kill:!1},_w={suppressEvents:!0,kill:!1},qH={suppressEvents:!0},ZI={},Ff=[],GC={},Kz,Zl={},OE={},VR=30,yw=[],JI="",QI=function(t){var n=t[0],i,r;if(ad(n)||Ds(n)||(t=[t]),!(i=(n._gsap||{}).harness)){for(r=yw.length;r--&&!yw[r].targetTest(n););i=yw[r]}for(r=t.length;r--;)t[r]&&(t[r]._gsap||(t[r]._gsap=new _N(t[r],i)))||t.splice(r,1);return t},kp=function(t){return t._gsap||QI(Oc(t))[0]._gsap},Xz=function(t,n,i){return(i=t[n])&&Ds(i)?t[n]():qI(i)&&t.getAttribute&&t.getAttribute(n)||i},Ml=function(t,n){return(t=t.split(",")).forEach(n)||t},$s=function(t){return Math.round(t*1e5)/1e5||0},no=function(t){return Math.round(t*1e7)/1e7||0},Iv=function(t,n){var i=n.charAt(0),r=parseFloat(n.substr(2));return t=parseFloat(t),i==="+"?t+r:i==="-"?t-r:i==="*"?t*r:t/r},KH=function(t,n){for(var i=n.length,r=0;t.indexOf(n[r])<0&&++r<i;);return r<i},e1=function(){var t=Ff.length,n=Ff.slice(0),i,r;for(GC={},Ff.length=0,i=0;i<t;i++)r=n[i],r&&r._lazy&&(r.render(r._lazy[0],r._lazy[1],!0)._lazy=0)},eA=function(t){return!!(t._initted||t._startAt||t.add)},Yz=function(t,n,i,r){Ff.length&&!oa&&e1(),t.render(n,i,!!(oa&&n<0&&eA(t))),Ff.length&&!oa&&e1()},Zz=function(t){var n=parseFloat(t);return(n||n===0)&&(t+"").match(Wz).length<2?n:zo(t)?t.trim():t},Jz=function(t){return t},lc=function(t,n){for(var i in n)i in t||(t[i]=n[i]);return t},XH=function(t){return function(n,i){for(var r in i)r in n||r==="duration"&&t||r==="ease"||(n[r]=i[r])}},Wv=function(t,n){for(var i in n)t[i]=n[i];return t},BR=function e(t,n){for(var i in n)i!=="__proto__"&&i!=="constructor"&&i!=="prototype"&&(t[i]=ad(n[i])?e(t[i]||(t[i]={}),n[i]):n[i]);return t},t1=function(t,n){var i={},r;for(r in t)r in n||(i[r]=t[r]);return i},ib=function(t){var n=t.parent||vs,i=t.keyframes?XH($a(t.keyframes)):lc;if(Pl(t.inherit))for(;n;)i(t,n.vars.defaults),n=n.parent||n._dp;return t},YH=function(t,n){for(var i=t.length,r=i===n.length;r&&i--&&t[i]===n[i];);return i<0},Qz=function(t,n,i,r,a){var l=t[r],h;if(a)for(h=n[a];l&&l[a]>h;)l=l._prev;return l?(n._next=l._next,l._next=n):(n._next=t[i],t[i]=n),n._next?n._next._prev=n:t[r]=n,n._prev=l,n.parent=n._dp=t,n},uT=function(t,n,i,r){i===void 0&&(i="_first"),r===void 0&&(r="_last");var a=n._prev,l=n._next;a?a._next=l:t[i]===n&&(t[i]=l),l?l._prev=a:t[r]===n&&(t[r]=a),n._next=n._prev=n.parent=null},Xf=function(t,n){t.parent&&(!n||t.parent.autoRemoveChildren)&&t.parent.remove&&t.parent.remove(t),t._act=0},Ip=function(t,n){if(t&&(!n||n._end>t._dur||n._start<0))for(var i=t;i;)i._dirty=1,i=i.parent;return t},ZH=function(t){for(var n=t.parent;n&&n.parent;)n._dirty=1,n.totalDuration(),n=n.parent;return t},qC=function(t,n,i,r){return t._startAt&&(oa?t._startAt.revert(_w):t.vars.immediateRender&&!t.vars.autoRevert||t._startAt.render(n,!0,r))},JH=function e(t){return!t||t._ts&&e(t.parent)},FR=function(t){return t._repeat?Hv(t._tTime,t=t.duration()+t._rDelay)*t:0},Hv=function(t,n){var i=Math.floor(t=no(t/n));return t&&i===t?i-1:i},n1=function(t,n){return(t-n._start)*n._ts+(n._ts>=0?0:n._dirty?n.totalDuration():n._tDur)},dT=function(t){return t._end=no(t._start+(t._tDur/Math.abs(t._ts||t._rts||Fr)||0))},hT=function(t,n){var i=t._dp;return i&&i.smoothChildTiming&&t._ts&&(t._start=no(i._time-(t._ts>0?n/t._ts:((t._dirty?t.totalDuration():t._tDur)-n)/-t._ts)),dT(t),i._dirty||Ip(i,t)),t},eN=function(t,n){var i;if((n._time||!n._dur&&n._initted||n._start<t._time&&(n._dur||!n.add))&&(i=n1(t.rawTime(),n),(!n._dur||f0(0,n.totalDuration(),i)-n._tTime>Fr)&&n.render(i,!0)),Ip(t,n)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(i=t;i._dp;)i.rawTime()>=0&&i.totalTime(i._tTime),i=i._dp;t._zTime=-Fr}},Ku=function(t,n,i,r){return n.parent&&Xf(n),n._start=no((gh(i)?i:i||t!==vs?Pc(t,i,n):t._time)+n._delay),n._end=no(n._start+(n.totalDuration()/Math.abs(n.timeScale())||0)),Qz(t,n,"_first","_last",t._sort?"_start":0),KC(n)||(t._recent=n),r||eN(t,n),t._ts<0&&hT(t,t._tTime),t},tN=function(t,n){return(ac.ScrollTrigger||YI("scrollTrigger",n))&&ac.ScrollTrigger.create(n,t)},nN=function(t,n,i,r,a){if(nA(t,n,a),!t._initted)return 1;if(!i&&t._pt&&!oa&&(t._dur&&t.vars.lazy!==!1||!t._dur&&t.vars.lazy)&&Kz!==Jl.frame)return Ff.push(t),t._lazy=[a,r],1},QH=function e(t){var n=t.parent;return n&&n._ts&&n._initted&&!n._lock&&(n.rawTime()<0||e(n))},KC=function(t){var n=t.data;return n==="isFromStart"||n==="isStart"},eG=function(t,n,i,r){var a=t.ratio,l=n<0||!n&&(!t._start&&QH(t)&&!(!t._initted&&KC(t))||(t._ts<0||t._dp._ts<0)&&!KC(t))?0:1,h=t._rDelay,s=0,p,_,x;if(h&&t._repeat&&(s=f0(0,t._tDur,n),_=Hv(s,h),t._yoyo&&_&1&&(l=1-l),_!==Hv(t._tTime,h)&&(a=1-l,t.vars.repeatRefresh&&t._initted&&t.invalidate())),l!==a||oa||r||t._zTime===Fr||!n&&t._zTime){if(!t._initted&&nN(t,n,r,i,s))return;for(x=t._zTime,t._zTime=n||(i?Fr:0),i||(i=n&&!x),t.ratio=l,t._from&&(l=1-l),t._time=0,t._tTime=s,p=t._pt;p;)p.r(l,p.d),p=p._next;n<0&&qC(t,n,i,!0),t._onUpdate&&!i&&nc(t,"onUpdate"),s&&t._repeat&&!i&&t.parent&&nc(t,"onRepeat"),(n>=t._tDur||n<0)&&t.ratio===l&&(l&&Xf(t,1),!i&&!oa&&(nc(t,l?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=n)},tG=function(t,n,i){var r;if(i>n)for(r=t._first;r&&r._start<=i;){if(r.data==="isPause"&&r._start>n)return r;r=r._next}else for(r=t._last;r&&r._start>=i;){if(r.data==="isPause"&&r._start<n)return r;r=r._prev}},Gv=function(t,n,i,r){var a=t._repeat,l=no(n)||0,h=t._tTime/t._tDur;return h&&!r&&(t._time*=l/t._dur),t._dur=l,t._tDur=a?a<0?1e10:no(l*(a+1)+t._rDelay*a):l,h>0&&!r&&hT(t,t._tTime=t._tDur*h),t.parent&&dT(t),i||Ip(t.parent,t),t},zR=function(t){return t instanceof al?Ip(t):Gv(t,t._dur)},nG={_start:0,endTime:Cb,totalDuration:Cb},Pc=function e(t,n,i){var r=t.labels,a=t._recent||nG,l=t.duration()>=Rc?a.endTime(!1):t._dur,h,s,p;return zo(n)&&(isNaN(n)||n in r)?(s=n.charAt(0),p=n.substr(-1)==="%",h=n.indexOf("="),s==="<"||s===">"?(h>=0&&(n=n.replace(/=/,"")),(s==="<"?a._start:a.endTime(a._repeat>=0))+(parseFloat(n.substr(1))||0)*(p?(h<0?a:i).totalDuration()/100:1)):h<0?(n in r||(r[n]=l),r[n]):(s=parseFloat(n.charAt(h-1)+n.substr(h+1)),p&&i&&(s=s/100*($a(i)?i[0]:i).totalDuration()),h>1?e(t,n.substr(0,h-1),i)+s:l+s)):n==null?l:+n},rb=function(t,n,i){var r=gh(n[1]),a=(r?2:1)+(t<2?0:1),l=n[a],h,s;if(r&&(l.duration=n[1]),l.parent=i,t){for(h=l,s=i;s&&!("immediateRender"in h);)h=s.vars.defaults||{},s=Pl(s.vars.inherit)&&s.parent;l.immediateRender=Pl(h.immediateRender),t<2?l.runBackwards=1:l.startAt=n[a-1]}return new to(n[0],l,n[a+1])},dm=function(t,n){return t||t===0?n(t):n},f0=function(t,n,i){return i<t?t:i>n?n:i},Va=function(t,n){return!zo(t)||!(n=HH.exec(t))?"":n[1]},iG=function(t,n,i){return dm(i,function(r){return f0(t,n,r)})},XC=[].slice,iN=function(t,n){return t&&ad(t)&&"length"in t&&(!n&&!t.length||t.length-1 in t&&ad(t[0]))&&!t.nodeType&&t!==Hu},rG=function(t,n,i){return i===void 0&&(i=[]),t.forEach(function(r){var a;return zo(r)&&!n||iN(r,1)?(a=i).push.apply(a,Oc(r)):i.push(r)})||i},Oc=function(t,n,i){return ls&&!n&&ls.selector?ls.selector(t):zo(t)&&!i&&(HC||!qv())?XC.call((n||XI).querySelectorAll(t),0):$a(t)?rG(t,i):iN(t)?XC.call(t,0):t?[t]:[]},YC=function(t){return t=Oc(t)[0]||Eb("Invalid scope")||{},function(n){var i=t.current||t.nativeElement||t;return Oc(n,i.querySelectorAll?i:i===t?Eb("Invalid scope")||XI.createElement("div"):t)}},rN=function(t){return t.sort(function(){return .5-Math.random()})},sN=function(t){if(Ds(t))return t;var n=ad(t)?t:{each:t},i=Ap(n.ease),r=n.from||0,a=parseFloat(n.base)||0,l={},h=r>0&&r<1,s=isNaN(r)||h,p=n.axis,_=r,x=r;return zo(r)?_=x={center:.5,edges:.5,end:1}[r]||0:!h&&s&&(_=r[0],x=r[1]),function(T,k,P){var M=(P||n).length,R=l[M],F,B,H,G,ee,ie,J,$,W;if(!R){if(W=n.grid==="auto"?0:(n.grid||[1,Rc])[1],!W){for(J=-Rc;J<(J=P[W++].getBoundingClientRect().left)&&W<M;);W<M&&W--}for(R=l[M]=[],F=s?Math.min(W,M)*_-.5:r%W,B=W===Rc?0:s?M*x/W-.5:r/W|0,J=0,$=Rc,ie=0;ie<M;ie++)H=ie%W-F,G=B-(ie/W|0),R[ie]=ee=p?Math.abs(p==="y"?G:H):Nz(H*H+G*G),ee>J&&(J=ee),ee<$&&($=ee);r==="random"&&rN(R),R.max=J-$,R.min=$,R.v=M=(parseFloat(n.amount)||parseFloat(n.each)*(W>M?M-1:p?p==="y"?M/W:W:Math.max(W,M/W))||0)*(r==="edges"?-1:1),R.b=M<0?a-M:a,R.u=Va(n.amount||n.each)||0,i=i&&M<0?pN(i):i}return M=(R[T]-R.min)/R.max||0,no(R.b+(i?i(M):M)*R.v)+R.u}},ZC=function(t){var n=Math.pow(10,((t+"").split(".")[1]||"").length);return function(i){var r=no(Math.round(parseFloat(i)/t)*t*n);return(r-r%1)/n+(gh(i)?0:Va(i))}},oN=function(t,n){var i=$a(t),r,a;return!i&&ad(t)&&(r=i=t.radius||Rc,t.values?(t=Oc(t.values),(a=!gh(t[0]))&&(r*=r)):t=ZC(t.increment)),dm(n,i?Ds(t)?function(l){return a=t(l),Math.abs(a-l)<=r?a:l}:function(l){for(var h=parseFloat(a?l.x:l),s=parseFloat(a?l.y:0),p=Rc,_=0,x=t.length,T,k;x--;)a?(T=t[x].x-h,k=t[x].y-s,T=T*T+k*k):T=Math.abs(t[x]-h),T<p&&(p=T,_=x);return _=!r||p<=r?t[_]:l,a||_===l||gh(l)?_:_+Va(l)}:ZC(t))},aN=function(t,n,i,r){return dm($a(t)?!n:i===!0?!!(i=0):!r,function(){return $a(t)?t[~~(Math.random()*t.length)]:(i=i||1e-5)&&(r=i<1?Math.pow(10,(i+"").length-2):1)&&Math.floor(Math.round((t-i/2+Math.random()*(n-t+i*.99))/i)*i*r)/r})},sG=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return function(r){return n.reduce(function(a,l){return l(a)},r)}},oG=function(t,n){return function(i){return t(parseFloat(i))+(n||Va(i))}},aG=function(t,n,i){return cN(t,n,0,1,i)},lN=function(t,n,i){return dm(i,function(r){return t[~~n(r)]})},lG=function e(t,n,i){var r=n-t;return $a(t)?lN(t,e(0,t.length),n):dm(i,function(a){return(r+(a-t)%r)%r+t})},cG=function e(t,n,i){var r=n-t,a=r*2;return $a(t)?lN(t,e(0,t.length-1),n):dm(i,function(l){return l=(a+(l-t)%a)%a||0,t+(l>r?a-l:l)})},kb=function(t){for(var n=0,i="",r,a,l,h;~(r=t.indexOf("random(",n));)l=t.indexOf(")",r),h=t.charAt(r+7)==="[",a=t.substr(r+7,l-r-7).match(h?Wz:WC),i+=t.substr(n,r-n)+aN(h?a:+a[0],h?0:+a[1],+a[2]||1e-5),n=l+1;return i+t.substr(n,t.length-n)},cN=function(t,n,i,r,a){var l=n-t,h=r-i;return dm(a,function(s){return i+((s-t)/l*h||0)})},uG=function e(t,n,i,r){var a=isNaN(t+n)?0:function(k){return(1-k)*t+k*n};if(!a){var l=zo(t),h={},s,p,_,x,T;if(i===!0&&(r=1)&&(i=null),l)t={p:t},n={p:n};else if($a(t)&&!$a(n)){for(_=[],x=t.length,T=x-2,p=1;p<x;p++)_.push(e(t[p-1],t[p]));x--,a=function(P){P*=x;var M=Math.min(T,~~P);return _[M](P-M)},i=n}else r||(t=Wv($a(t)?[]:{},t));if(!_){for(s in n)tA.call(h,t,s,"get",n[s]);a=function(P){return sA(P,h)||(l?t.p:t)}}}return dm(i,a)},NR=function(t,n,i){var r=t.labels,a=Rc,l,h,s;for(l in r)h=r[l]-n,h<0==!!i&&h&&a>(h=Math.abs(h))&&(s=l,a=h);return s},nc=function(t,n,i){var r=t.vars,a=r[n],l=ls,h=t._ctx,s,p,_;if(a)return s=r[n+"Params"],p=r.callbackScope||t,i&&Ff.length&&e1(),h&&(ls=h),_=s?a.apply(p,s):a.call(p),ls=l,_},By=function(t){return Xf(t),t.scrollTrigger&&t.scrollTrigger.kill(!!oa),t.progress()<1&&nc(t,"onInterrupt"),t},vv,uN=[],dN=function(t){if(t)if(t=!t.name&&t.default||t,KI()||t.headless){var n=t.name,i=Ds(t),r=n&&!i&&t.init?function(){this._props=[]}:t,a={init:Cb,render:sA,add:tA,kill:CG,modifier:EG,rawVars:0},l={targetTest:0,get:0,getSetter:rA,aliases:{},register:0};if(qv(),t!==r){if(Zl[n])return;lc(r,lc(t1(t,a),l)),Wv(r.prototype,Wv(a,t1(t,l))),Zl[r.prop=n]=r,t.targetTest&&(yw.push(r),ZI[n]=1),n=(n==="css"?"CSS":n.charAt(0).toUpperCase()+n.substr(1))+"Plugin"}qz(n,r),t.register&&t.register(Rl,r,Dl)}else uN.push(t)},Br=255,Fy={aqua:[0,Br,Br],lime:[0,Br,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Br],navy:[0,0,128],white:[Br,Br,Br],olive:[128,128,0],yellow:[Br,Br,0],orange:[Br,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Br,0,0],pink:[Br,192,203],cyan:[0,Br,Br],transparent:[Br,Br,Br,0]},VE=function(t,n,i){return t+=t<0?1:t>1?-1:0,(t*6<1?n+(i-n)*t*6:t<.5?i:t*3<2?n+(i-n)*(2/3-t)*6:n)*Br+.5|0},hN=function(t,n,i){var r=t?gh(t)?[t>>16,t>>8&Br,t&Br]:0:Fy.black,a,l,h,s,p,_,x,T,k,P;if(!r){if(t.substr(-1)===","&&(t=t.substr(0,t.length-1)),Fy[t])r=Fy[t];else if(t.charAt(0)==="#"){if(t.length<6&&(a=t.charAt(1),l=t.charAt(2),h=t.charAt(3),t="#"+a+a+l+l+h+h+(t.length===5?t.charAt(4)+t.charAt(4):"")),t.length===9)return r=parseInt(t.substr(1,6),16),[r>>16,r>>8&Br,r&Br,parseInt(t.substr(7),16)/255];t=parseInt(t.substr(1),16),r=[t>>16,t>>8&Br,t&Br]}else if(t.substr(0,3)==="hsl"){if(r=P=t.match(WC),!n)s=+r[0]%360/360,p=+r[1]/100,_=+r[2]/100,l=_<=.5?_*(p+1):_+p-_*p,a=_*2-l,r.length>3&&(r[3]*=1),r[0]=VE(s+1/3,a,l),r[1]=VE(s,a,l),r[2]=VE(s-1/3,a,l);else if(~t.indexOf("="))return r=t.match($z),i&&r.length<4&&(r[3]=1),r}else r=t.match(WC)||Fy.transparent;r=r.map(Number)}return n&&!P&&(a=r[0]/Br,l=r[1]/Br,h=r[2]/Br,x=Math.max(a,l,h),T=Math.min(a,l,h),_=(x+T)/2,x===T?s=p=0:(k=x-T,p=_>.5?k/(2-x-T):k/(x+T),s=x===a?(l-h)/k+(l<h?6:0):x===l?(h-a)/k+2:(a-l)/k+4,s*=60),r[0]=~~(s+.5),r[1]=~~(p*100+.5),r[2]=~~(_*100+.5)),i&&r.length<4&&(r[3]=1),r},fN=function(t){var n=[],i=[],r=-1;return t.split(zf).forEach(function(a){var l=a.match(gv)||[];n.push.apply(n,l),i.push(r+=l.length+1)}),n.c=i,n},UR=function(t,n,i){var r="",a=(t+r).match(zf),l=n?"hsla(":"rgba(",h=0,s,p,_,x;if(!a)return t;if(a=a.map(function(T){return(T=hN(T,n,1))&&l+(n?T[0]+","+T[1]+"%,"+T[2]+"%,"+T[3]:T.join(","))+")"}),i&&(_=fN(t),s=i.c,s.join(r)!==_.c.join(r)))for(p=t.replace(zf,"1").split(gv),x=p.length-1;h<x;h++)r+=p[h]+(~s.indexOf(h)?a.shift()||l+"0,0,0,0)":(_.length?_:a.length?a:i).shift());if(!p)for(p=t.split(zf),x=p.length-1;h<x;h++)r+=p[h]+a[h];return r+p[x]},zf=(function(){var e="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",t;for(t in Fy)e+="|"+t+"\\b";return new RegExp(e+")","gi")})(),dG=/hsl[a]?\(/,mN=function(t){var n=t.join(" "),i;if(zf.lastIndex=0,zf.test(n))return i=dG.test(n),t[1]=UR(t[1],i),t[0]=UR(t[0],i,fN(t[1])),!0},Ib,Jl=(function(){var e=Date.now,t=500,n=33,i=e(),r=i,a=1e3/240,l=a,h=[],s,p,_,x,T,k,P=function M(R){var F=e()-r,B=R===!0,H,G,ee,ie;if((F>t||F<0)&&(i+=F-n),r+=F,ee=r-i,H=ee-l,(H>0||B)&&(ie=++x.frame,T=ee-x.time*1e3,x.time=ee=ee/1e3,l+=H+(H>=a?4:a-H),G=1),B||(s=p(M)),G)for(k=0;k<h.length;k++)h[k](ee,T,ie,R)};return x={time:0,frame:0,tick:function(){P(!0)},deltaRatio:function(R){return T/(1e3/(R||60))},wake:function(){Hz&&(!HC&&KI()&&(Hu=HC=window,XI=Hu.document||{},ac.gsap=Rl,(Hu.gsapVersions||(Hu.gsapVersions=[])).push(Rl.version),Gz(Qw||Hu.GreenSockGlobals||!Hu.gsap&&Hu||{}),uN.forEach(dN)),_=typeof requestAnimationFrame<"u"&&requestAnimationFrame,s&&x.sleep(),p=_||function(R){return setTimeout(R,l-x.time*1e3+1|0)},Ib=1,P(2))},sleep:function(){(_?cancelAnimationFrame:clearTimeout)(s),Ib=0,p=Cb},lagSmoothing:function(R,F){t=R||1/0,n=Math.min(F||33,t)},fps:function(R){a=1e3/(R||240),l=x.time*1e3+a},add:function(R,F,B){var H=F?function(G,ee,ie,J){R(G,ee,ie,J),x.remove(H)}:R;return x.remove(R),h[B?"unshift":"push"](H),qv(),H},remove:function(R,F){~(F=h.indexOf(R))&&h.splice(F,1)&&k>=F&&k--},_listeners:h},x})(),qv=function(){return!Ib&&Jl.wake()},Hi={},hG=/^[\d.\-M][\d.\-,\s]/,fG=/["']/g,mG=function(t){for(var n={},i=t.substr(1,t.length-3).split(":"),r=i[0],a=1,l=i.length,h,s,p;a<l;a++)s=i[a],h=a!==l-1?s.lastIndexOf(","):s.length,p=s.substr(0,h),n[r]=isNaN(p)?p.replace(fG,"").trim():+p,r=s.substr(h+1).trim();return n},pG=function(t){var n=t.indexOf("(")+1,i=t.indexOf(")"),r=t.indexOf("(",n);return t.substring(n,~r&&r<i?t.indexOf(")",i+1):i)},gG=function(t){var n=(t+"").split("("),i=Hi[n[0]];return i&&n.length>1&&i.config?i.config.apply(null,~t.indexOf("{")?[mG(n[1])]:pG(t).split(",").map(Zz)):Hi._CE&&hG.test(t)?Hi._CE("",t):i},pN=function(t){return function(n){return 1-t(1-n)}},gN=function e(t,n){for(var i=t._first,r;i;)i instanceof al?e(i,n):i.vars.yoyoEase&&(!i._yoyo||!i._repeat)&&i._yoyo!==n&&(i.timeline?e(i.timeline,n):(r=i._ease,i._ease=i._yEase,i._yEase=r,i._yoyo=n)),i=i._next},Ap=function(t,n){return t&&(Ds(t)?t:Hi[t]||gG(t))||n},tg=function(t,n,i,r){i===void 0&&(i=function(s){return 1-n(1-s)}),r===void 0&&(r=function(s){return s<.5?n(s*2)/2:1-n((1-s)*2)/2});var a={easeIn:n,easeOut:i,easeInOut:r},l;return Ml(t,function(h){Hi[h]=ac[h]=a,Hi[l=h.toLowerCase()]=i;for(var s in a)Hi[l+(s==="easeIn"?".in":s==="easeOut"?".out":".inOut")]=Hi[h+"."+s]=a[s]}),a},vN=function(t){return function(n){return n<.5?(1-t(1-n*2))/2:.5+t((n-.5)*2)/2}},BE=function e(t,n,i){var r=n>=1?n:1,a=(i||(t?.3:.45))/(n<1?n:1),l=a/jC*(Math.asin(1/r)||0),h=function(_){return _===1?1:r*Math.pow(2,-10*_)*WH((_-l)*a)+1},s=t==="out"?h:t==="in"?function(p){return 1-h(1-p)}:vN(h);return a=jC/a,s.config=function(p,_){return e(t,p,_)},s},FE=function e(t,n){n===void 0&&(n=1.70158);var i=function(l){return l?--l*l*((n+1)*l+n)+1:0},r=t==="out"?i:t==="in"?function(a){return 1-i(1-a)}:vN(i);return r.config=function(a){return e(t,a)},r};Ml("Linear,Quad,Cubic,Quart,Quint,Strong",function(e,t){var n=t<5?t+1:t;tg(e+",Power"+(n-1),t?function(i){return Math.pow(i,n)}:function(i){return i},function(i){return 1-Math.pow(1-i,n)},function(i){return i<.5?Math.pow(i*2,n)/2:1-Math.pow((1-i)*2,n)/2})});Hi.Linear.easeNone=Hi.none=Hi.Linear.easeIn;tg("Elastic",BE("in"),BE("out"),BE());(function(e,t){var n=1/t,i=2*n,r=2.5*n,a=function(h){return h<n?e*h*h:h<i?e*Math.pow(h-1.5/t,2)+.75:h<r?e*(h-=2.25/t)*h+.9375:e*Math.pow(h-2.625/t,2)+.984375};tg("Bounce",function(l){return 1-a(1-l)},a)})(7.5625,2.75);tg("Expo",function(e){return Math.pow(2,10*(e-1))*e+e*e*e*e*e*e*(1-e)});tg("Circ",function(e){return-(Nz(1-e*e)-1)});tg("Sine",function(e){return e===1?1:-jH(e*UH)+1});tg("Back",FE("in"),FE("out"),FE());Hi.SteppedEase=Hi.steps=ac.SteppedEase={config:function(t,n){t===void 0&&(t=1);var i=1/t,r=t+(n?0:1),a=n?1:0,l=1-Fr;return function(h){return((r*f0(0,l,h)|0)+a)*i}}};jv.ease=Hi["quad.out"];Ml("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(e){return JI+=e+","+e+"Params,"});var _N=function(t,n){this.id=$H++,t._gsap=this,this.target=t,this.harness=n,this.get=n?n.get:Xz,this.set=n?n.getSetter:rA},Ab=(function(){function e(n){this.vars=n,this._delay=+n.delay||0,(this._repeat=n.repeat===1/0?-2:n.repeat||0)&&(this._rDelay=n.repeatDelay||0,this._yoyo=!!n.yoyo||!!n.yoyoEase),this._ts=1,Gv(this,+n.duration,1,1),this.data=n.data,ls&&(this._ctx=ls,ls.data.push(this)),Ib||Jl.wake()}var t=e.prototype;return t.delay=function(i){return i||i===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+i-this._delay),this._delay=i,this):this._delay},t.duration=function(i){return arguments.length?this.totalDuration(this._repeat>0?i+(i+this._rDelay)*this._repeat:i):this.totalDuration()&&this._dur},t.totalDuration=function(i){return arguments.length?(this._dirty=0,Gv(this,this._repeat<0?i:(i-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(i,r){if(qv(),!arguments.length)return this._tTime;var a=this._dp;if(a&&a.smoothChildTiming&&this._ts){for(hT(this,i),!a._dp||a.parent||eN(a,this);a&&a.parent;)a.parent._time!==a._start+(a._ts>=0?a._tTime/a._ts:(a.totalDuration()-a._tTime)/-a._ts)&&a.totalTime(a._tTime,!0),a=a.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&i<this._tDur||this._ts<0&&i>0||!this._tDur&&!i)&&Ku(this._dp,this,this._start-this._delay)}return(this._tTime!==i||!this._dur&&!r||this._initted&&Math.abs(this._zTime)===Fr||!i&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=i),Yz(this,i,r)),this},t.time=function(i,r){return arguments.length?this.totalTime(Math.min(this.totalDuration(),i+FR(this))%(this._dur+this._rDelay)||(i?this._dur:0),r):this._time},t.totalProgress=function(i,r){return arguments.length?this.totalTime(this.totalDuration()*i,r):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},t.progress=function(i,r){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-i:i)+FR(this),r):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},t.iteration=function(i,r){var a=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(i-1)*a,r):this._repeat?Hv(this._tTime,a)+1:1},t.timeScale=function(i,r){if(!arguments.length)return this._rts===-Fr?0:this._rts;if(this._rts===i)return this;var a=this.parent&&this._ts?n1(this.parent._time,this):this._tTime;return this._rts=+i||0,this._ts=this._ps||i===-Fr?0:this._rts,this.totalTime(f0(-Math.abs(this._delay),this.totalDuration(),a),r!==!1),dT(this),ZH(this)},t.paused=function(i){return arguments.length?(this._ps!==i&&(this._ps=i,i?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(qv(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Fr&&(this._tTime-=Fr)))),this):this._ps},t.startTime=function(i){if(arguments.length){this._start=i;var r=this.parent||this._dp;return r&&(r._sort||!this.parent)&&Ku(r,this,i-this._delay),this}return this._start},t.endTime=function(i){return this._start+(Pl(i)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},t.rawTime=function(i){var r=this.parent||this._dp;return r?i&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?n1(r.rawTime(i),this):this._tTime:this._tTime},t.revert=function(i){i===void 0&&(i=qH);var r=oa;return oa=i,eA(this)&&(this.timeline&&this.timeline.revert(i),this.totalTime(-.01,i.suppressEvents)),this.data!=="nested"&&i.kill!==!1&&this.kill(),oa=r,this},t.globalTime=function(i){for(var r=this,a=arguments.length?i:r.rawTime();r;)a=r._start+a/(Math.abs(r._ts)||1),r=r._dp;return!this.parent&&this._sat?this._sat.globalTime(i):a},t.repeat=function(i){return arguments.length?(this._repeat=i===1/0?-2:i,zR(this)):this._repeat===-2?1/0:this._repeat},t.repeatDelay=function(i){if(arguments.length){var r=this._time;return this._rDelay=i,zR(this),r?this.time(r):this}return this._rDelay},t.yoyo=function(i){return arguments.length?(this._yoyo=i,this):this._yoyo},t.seek=function(i,r){return this.totalTime(Pc(this,i),Pl(r))},t.restart=function(i,r){return this.play().totalTime(i?-this._delay:0,Pl(r)),this._dur||(this._zTime=-Fr),this},t.play=function(i,r){return i!=null&&this.seek(i,r),this.reversed(!1).paused(!1)},t.reverse=function(i,r){return i!=null&&this.seek(i||this.totalDuration(),r),this.reversed(!0).paused(!1)},t.pause=function(i,r){return i!=null&&this.seek(i,r),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(i){return arguments.length?(!!i!==this.reversed()&&this.timeScale(-this._rts||(i?-Fr:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-Fr,this},t.isActive=function(){var i=this.parent||this._dp,r=this._start,a;return!!(!i||this._ts&&this._initted&&i.isActive()&&(a=i.rawTime(!0))>=r&&a<this.endTime(!0)-Fr)},t.eventCallback=function(i,r,a){var l=this.vars;return arguments.length>1?(r?(l[i]=r,a&&(l[i+"Params"]=a),i==="onUpdate"&&(this._onUpdate=r)):delete l[i],this):l[i]},t.then=function(i){var r=this;return new Promise(function(a){var l=Ds(i)?i:Jz,h=function(){var p=r.then;r.then=null,Ds(l)&&(l=l(r))&&(l.then||l===r)&&(r.then=p),a(l),r.then=p};r._initted&&r.totalProgress()===1&&r._ts>=0||!r._tTime&&r._ts<0?h():r._prom=h})},t.kill=function(){By(this)},e})();lc(Ab.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-Fr,_prom:0,_ps:!1,_rts:1});var al=(function(e){zz(t,e);function t(i,r){var a;return i===void 0&&(i={}),a=e.call(this,i)||this,a.labels={},a.smoothChildTiming=!!i.smoothChildTiming,a.autoRemoveChildren=!!i.autoRemoveChildren,a._sort=Pl(i.sortChildren),vs&&Ku(i.parent||vs,eh(a),r),i.reversed&&a.reverse(),i.paused&&a.paused(!0),i.scrollTrigger&&tN(eh(a),i.scrollTrigger),a}var n=t.prototype;return n.to=function(r,a,l){return rb(0,arguments,this),this},n.from=function(r,a,l){return rb(1,arguments,this),this},n.fromTo=function(r,a,l,h){return rb(2,arguments,this),this},n.set=function(r,a,l){return a.duration=0,a.parent=this,ib(a).repeatDelay||(a.repeat=0),a.immediateRender=!!a.immediateRender,new to(r,a,Pc(this,l),1),this},n.call=function(r,a,l){return Ku(this,to.delayedCall(0,r,a),l)},n.staggerTo=function(r,a,l,h,s,p,_){return l.duration=a,l.stagger=l.stagger||h,l.onComplete=p,l.onCompleteParams=_,l.parent=this,new to(r,l,Pc(this,s)),this},n.staggerFrom=function(r,a,l,h,s,p,_){return l.runBackwards=1,ib(l).immediateRender=Pl(l.immediateRender),this.staggerTo(r,a,l,h,s,p,_)},n.staggerFromTo=function(r,a,l,h,s,p,_,x){return h.startAt=l,ib(h).immediateRender=Pl(h.immediateRender),this.staggerTo(r,a,h,s,p,_,x)},n.render=function(r,a,l){var h=this._time,s=this._dirty?this.totalDuration():this._tDur,p=this._dur,_=r<=0?0:no(r),x=this._zTime<0!=r<0&&(this._initted||!p),T,k,P,M,R,F,B,H,G,ee,ie,J;if(this!==vs&&_>s&&r>=0&&(_=s),_!==this._tTime||l||x){if(h!==this._time&&p&&(_+=this._time-h,r+=this._time-h),T=_,G=this._start,H=this._ts,F=!H,x&&(p||(h=this._zTime),(r||!a)&&(this._zTime=r)),this._repeat){if(ie=this._yoyo,R=p+this._rDelay,this._repeat<-1&&r<0)return this.totalTime(R*100+r,a,l);if(T=no(_%R),_===s?(M=this._repeat,T=p):(ee=no(_/R),M=~~ee,M&&M===ee&&(T=p,M--),T>p&&(T=p)),ee=Hv(this._tTime,R),!h&&this._tTime&&ee!==M&&this._tTime-ee*R-this._dur<=0&&(ee=M),ie&&M&1&&(T=p-T,J=1),M!==ee&&!this._lock){var $=ie&&ee&1,W=$===(ie&&M&1);if(M<ee&&($=!$),h=$?0:_%p?p:_,this._lock=1,this.render(h||(J?0:no(M*R)),a,!p)._lock=0,this._tTime=_,!a&&this.parent&&nc(this,"onRepeat"),this.vars.repeatRefresh&&!J&&(this.invalidate()._lock=1),h&&h!==this._time||F!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(p=this._dur,s=this._tDur,W&&(this._lock=2,h=$?p:-1e-4,this.render(h,!0),this.vars.repeatRefresh&&!J&&this.invalidate()),this._lock=0,!this._ts&&!F)return this;gN(this,J)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(B=tG(this,no(h),no(T)),B&&(_-=T-(T=B._start))),this._tTime=_,this._time=T,this._act=!H,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=r,h=0),!h&&_&&!a&&!ee&&(nc(this,"onStart"),this._tTime!==_))return this;if(T>=h&&r>=0)for(k=this._first;k;){if(P=k._next,(k._act||T>=k._start)&&k._ts&&B!==k){if(k.parent!==this)return this.render(r,a,l);if(k.render(k._ts>0?(T-k._start)*k._ts:(k._dirty?k.totalDuration():k._tDur)+(T-k._start)*k._ts,a,l),T!==this._time||!this._ts&&!F){B=0,P&&(_+=this._zTime=-Fr);break}}k=P}else{k=this._last;for(var X=r<0?r:T;k;){if(P=k._prev,(k._act||X<=k._end)&&k._ts&&B!==k){if(k.parent!==this)return this.render(r,a,l);if(k.render(k._ts>0?(X-k._start)*k._ts:(k._dirty?k.totalDuration():k._tDur)+(X-k._start)*k._ts,a,l||oa&&eA(k)),T!==this._time||!this._ts&&!F){B=0,P&&(_+=this._zTime=X?-Fr:Fr);break}}k=P}}if(B&&!a&&(this.pause(),B.render(T>=h?0:-Fr)._zTime=T>=h?1:-1,this._ts))return this._start=G,dT(this),this.render(r,a,l);this._onUpdate&&!a&&nc(this,"onUpdate",!0),(_===s&&this._tTime>=this.totalDuration()||!_&&h)&&(G===this._start||Math.abs(H)!==Math.abs(this._ts))&&(this._lock||((r||!p)&&(_===s&&this._ts>0||!_&&this._ts<0)&&Xf(this,1),!a&&!(r<0&&!h)&&(_||h||!s)&&(nc(this,_===s&&r>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(_<s&&this.timeScale()>0)&&this._prom())))}return this},n.add=function(r,a){var l=this;if(gh(a)||(a=Pc(this,a,r)),!(r instanceof Ab)){if($a(r))return r.forEach(function(h){return l.add(h,a)}),this;if(zo(r))return this.addLabel(r,a);if(Ds(r))r=to.delayedCall(0,r);else return this}return this!==r?Ku(this,r,a):this},n.getChildren=function(r,a,l,h){r===void 0&&(r=!0),a===void 0&&(a=!0),l===void 0&&(l=!0),h===void 0&&(h=-Rc);for(var s=[],p=this._first;p;)p._start>=h&&(p instanceof to?a&&s.push(p):(l&&s.push(p),r&&s.push.apply(s,p.getChildren(!0,a,l)))),p=p._next;return s},n.getById=function(r){for(var a=this.getChildren(1,1,1),l=a.length;l--;)if(a[l].vars.id===r)return a[l]},n.remove=function(r){return zo(r)?this.removeLabel(r):Ds(r)?this.killTweensOf(r):(r.parent===this&&uT(this,r),r===this._recent&&(this._recent=this._last),Ip(this))},n.totalTime=function(r,a){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=no(Jl.time-(this._ts>0?r/this._ts:(this.totalDuration()-r)/-this._ts))),e.prototype.totalTime.call(this,r,a),this._forcing=0,this):this._tTime},n.addLabel=function(r,a){return this.labels[r]=Pc(this,a),this},n.removeLabel=function(r){return delete this.labels[r],this},n.addPause=function(r,a,l){var h=to.delayedCall(0,a||Cb,l);return h.data="isPause",this._hasPause=1,Ku(this,h,Pc(this,r))},n.removePause=function(r){var a=this._first;for(r=Pc(this,r);a;)a._start===r&&a.data==="isPause"&&Xf(a),a=a._next},n.killTweensOf=function(r,a,l){for(var h=this.getTweensOf(r,l),s=h.length;s--;)If!==h[s]&&h[s].kill(r,a);return this},n.getTweensOf=function(r,a){for(var l=[],h=Oc(r),s=this._first,p=gh(a),_;s;)s instanceof to?KH(s._targets,h)&&(p?(!If||s._initted&&s._ts)&&s.globalTime(0)<=a&&s.globalTime(s.totalDuration())>a:!a||s.isActive())&&l.push(s):(_=s.getTweensOf(h,a)).length&&l.push.apply(l,_),s=s._next;return l},n.tweenTo=function(r,a){a=a||{};var l=this,h=Pc(l,r),s=a,p=s.startAt,_=s.onStart,x=s.onStartParams,T=s.immediateRender,k,P=to.to(l,lc({ease:a.ease||"none",lazy:!1,immediateRender:!1,time:h,overwrite:"auto",duration:a.duration||Math.abs((h-(p&&"time"in p?p.time:l._time))/l.timeScale())||Fr,onStart:function(){if(l.pause(),!k){var R=a.duration||Math.abs((h-(p&&"time"in p?p.time:l._time))/l.timeScale());P._dur!==R&&Gv(P,R,0,1).render(P._time,!0,!0),k=1}_&&_.apply(P,x||[])}},a));return T?P.render(0):P},n.tweenFromTo=function(r,a,l){return this.tweenTo(a,lc({startAt:{time:Pc(this,r)}},l))},n.recent=function(){return this._recent},n.nextLabel=function(r){return r===void 0&&(r=this._time),NR(this,Pc(this,r))},n.previousLabel=function(r){return r===void 0&&(r=this._time),NR(this,Pc(this,r),1)},n.currentLabel=function(r){return arguments.length?this.seek(r,!0):this.previousLabel(this._time+Fr)},n.shiftChildren=function(r,a,l){l===void 0&&(l=0);for(var h=this._first,s=this.labels,p;h;)h._start>=l&&(h._start+=r,h._end+=r),h=h._next;if(a)for(p in s)s[p]>=l&&(s[p]+=r);return Ip(this)},n.invalidate=function(r){var a=this._first;for(this._lock=0;a;)a.invalidate(r),a=a._next;return e.prototype.invalidate.call(this,r)},n.clear=function(r){r===void 0&&(r=!0);for(var a=this._first,l;a;)l=a._next,this.remove(a),a=l;return this._dp&&(this._time=this._tTime=this._pTime=0),r&&(this.labels={}),Ip(this)},n.totalDuration=function(r){var a=0,l=this,h=l._last,s=Rc,p,_,x;if(arguments.length)return l.timeScale((l._repeat<0?l.duration():l.totalDuration())/(l.reversed()?-r:r));if(l._dirty){for(x=l.parent;h;)p=h._prev,h._dirty&&h.totalDuration(),_=h._start,_>s&&l._sort&&h._ts&&!l._lock?(l._lock=1,Ku(l,h,_-h._delay,1)._lock=0):s=_,_<0&&h._ts&&(a-=_,(!x&&!l._dp||x&&x.smoothChildTiming)&&(l._start+=_/l._ts,l._time-=_,l._tTime-=_),l.shiftChildren(-_,!1,-1/0),s=0),h._end>a&&h._ts&&(a=h._end),h=p;Gv(l,l===vs&&l._time>a?l._time:a,1,1),l._dirty=0}return l._tDur},t.updateRoot=function(r){if(vs._ts&&(Yz(vs,n1(r,vs)),Kz=Jl.frame),Jl.frame>=VR){VR+=oc.autoSleep||120;var a=vs._first;if((!a||!a._ts)&&oc.autoSleep&&Jl._listeners.length<2){for(;a&&!a._ts;)a=a._next;a||Jl.sleep()}}},t})(Ab);lc(al.prototype,{_lock:0,_hasPause:0,_forcing:0});var vG=function(t,n,i,r,a,l,h){var s=new Dl(this._pt,t,n,0,1,SN,null,a),p=0,_=0,x,T,k,P,M,R,F,B;for(s.b=i,s.e=r,i+="",r+="",(F=~r.indexOf("random("))&&(r=kb(r)),l&&(B=[i,r],l(B,t,n),i=B[0],r=B[1]),T=i.match(RE)||[];x=RE.exec(r);)P=x[0],M=r.substring(p,x.index),k?k=(k+1)%5:M.substr(-5)==="rgba("&&(k=1),P!==T[_++]&&(R=parseFloat(T[_-1])||0,s._pt={_next:s._pt,p:M||_===1?M:",",s:R,c:P.charAt(1)==="="?Iv(R,P)-R:parseFloat(P)-R,m:k&&k<4?Math.round:0},p=RE.lastIndex);return s.c=p<r.length?r.substring(p,r.length):"",s.fp=h,(jz.test(r)||F)&&(s.e=0),this._pt=s,s},tA=function(t,n,i,r,a,l,h,s,p,_){Ds(r)&&(r=r(a||0,t,l));var x=t[n],T=i!=="get"?i:Ds(x)?p?t[n.indexOf("set")||!Ds(t["get"+n.substr(3)])?n:"get"+n.substr(3)](p):t[n]():x,k=Ds(x)?p?wG:wN:iA,P;if(zo(r)&&(~r.indexOf("random(")&&(r=kb(r)),r.charAt(1)==="="&&(P=Iv(T,r)+(Va(T)||0),(P||P===0)&&(r=P))),!_||T!==r||JC)return!isNaN(T*r)&&r!==""?(P=new Dl(this._pt,t,n,+T||0,r-(T||0),typeof x=="boolean"?SG:TN,0,k),p&&(P.fp=p),h&&P.modifier(h,this,t),this._pt=P):(!x&&!(n in t)&&YI(n,r),vG.call(this,t,n,T,r,k,s||oc.stringFilter,p))},_G=function(t,n,i,r,a){if(Ds(t)&&(t=sb(t,a,n,i,r)),!ad(t)||t.style&&t.nodeType||$a(t)||Uz(t))return zo(t)?sb(t,a,n,i,r):t;var l={},h;for(h in t)l[h]=sb(t[h],a,n,i,r);return l},yN=function(t,n,i,r,a,l){var h,s,p,_;if(Zl[t]&&(h=new Zl[t]).init(a,h.rawVars?n[t]:_G(n[t],r,a,l,i),i,r,l)!==!1&&(i._pt=s=new Dl(i._pt,a,t,0,1,h.render,h,0,h.priority),i!==vv))for(p=i._ptLookup[i._targets.indexOf(a)],_=h._props.length;_--;)p[h._props[_]]=s;return h},If,JC,nA=function e(t,n,i){var r=t.vars,a=r.ease,l=r.startAt,h=r.immediateRender,s=r.lazy,p=r.onUpdate,_=r.runBackwards,x=r.yoyoEase,T=r.keyframes,k=r.autoRevert,P=t._dur,M=t._startAt,R=t._targets,F=t.parent,B=F&&F.data==="nested"?F.vars.targets:R,H=t._overwrite==="auto"&&!GI,G=t.timeline,ee,ie,J,$,W,X,re,Y,Z,ge,be,Be,nt;if(G&&(!T||!a)&&(a="none"),t._ease=Ap(a,jv.ease),t._yEase=x?pN(Ap(x===!0?a:x,jv.ease)):0,x&&t._yoyo&&!t._repeat&&(x=t._yEase,t._yEase=t._ease,t._ease=x),t._from=!G&&!!r.runBackwards,!G||T&&!r.stagger){if(Y=R[0]?kp(R[0]).harness:0,Be=Y&&r[Y.prop],ee=t1(r,ZI),M&&(M._zTime<0&&M.progress(1),n<0&&_&&h&&!k?M.render(-1,!0):M.revert(_&&P?_w:GH),M._lazy=0),l){if(Xf(t._startAt=to.set(R,lc({data:"isStart",overwrite:!1,parent:F,immediateRender:!0,lazy:!M&&Pl(s),startAt:null,delay:0,onUpdate:p&&function(){return nc(t,"onUpdate")},stagger:0},l))),t._startAt._dp=0,t._startAt._sat=t,n<0&&(oa||!h&&!k)&&t._startAt.revert(_w),h&&P&&n<=0&&i<=0){n&&(t._zTime=n);return}}else if(_&&P&&!M){if(n&&(h=!1),J=lc({overwrite:!1,data:"isFromStart",lazy:h&&!M&&Pl(s),immediateRender:h,stagger:0,parent:F},ee),Be&&(J[Y.prop]=Be),Xf(t._startAt=to.set(R,J)),t._startAt._dp=0,t._startAt._sat=t,n<0&&(oa?t._startAt.revert(_w):t._startAt.render(-1,!0)),t._zTime=n,!h)e(t._startAt,Fr,Fr);else if(!n)return}for(t._pt=t._ptCache=0,s=P&&Pl(s)||s&&!P,ie=0;ie<R.length;ie++){if(W=R[ie],re=W._gsap||QI(R)[ie]._gsap,t._ptLookup[ie]=ge={},GC[re.id]&&Ff.length&&e1(),be=B===R?ie:B.indexOf(W),Y&&(Z=new Y).init(W,Be||ee,t,be,B)!==!1&&(t._pt=$=new Dl(t._pt,W,Z.name,0,1,Z.render,Z,0,Z.priority),Z._props.forEach(function(We){ge[We]=$}),Z.priority&&(X=1)),!Y||Be)for(J in ee)Zl[J]&&(Z=yN(J,ee,t,be,W,B))?Z.priority&&(X=1):ge[J]=$=tA.call(t,W,J,"get",ee[J],be,B,0,r.stringFilter);t._op&&t._op[ie]&&t.kill(W,t._op[ie]),H&&t._pt&&(If=t,vs.killTweensOf(W,ge,t.globalTime(n)),nt=!t.parent,If=0),t._pt&&s&&(GC[re.id]=1)}X&&EN(t),t._onInit&&t._onInit(t)}t._onUpdate=p,t._initted=(!t._op||t._pt)&&!nt,T&&n<=0&&G.render(Rc,!0,!0)},yG=function(t,n,i,r,a,l,h,s){var p=(t._pt&&t._ptCache||(t._ptCache={}))[n],_,x,T,k;if(!p)for(p=t._ptCache[n]=[],T=t._ptLookup,k=t._targets.length;k--;){if(_=T[k][n],_&&_.d&&_.d._pt)for(_=_.d._pt;_&&_.p!==n&&_.fp!==n;)_=_._next;if(!_)return JC=1,t.vars[n]="+=0",nA(t,h),JC=0,s?Eb(n+" not eligible for reset"):1;p.push(_)}for(k=p.length;k--;)x=p[k],_=x._pt||x,_.s=(r||r===0)&&!a?r:_.s+(r||0)+l*_.c,_.c=i-_.s,x.e&&(x.e=$s(i)+Va(x.e)),x.b&&(x.b=_.s+Va(x.b))},bG=function(t,n){var i=t[0]?kp(t[0]).harness:0,r=i&&i.aliases,a,l,h,s;if(!r)return n;a=Wv({},n);for(l in r)if(l in a)for(s=r[l].split(","),h=s.length;h--;)a[s[h]]=a[l];return a},xG=function(t,n,i,r){var a=n.ease||r||"power1.inOut",l,h;if($a(n))h=i[t]||(i[t]=[]),n.forEach(function(s,p){return h.push({t:p/(n.length-1)*100,v:s,e:a})});else for(l in n)h=i[l]||(i[l]=[]),l==="ease"||h.push({t:parseFloat(t),v:n[l],e:a})},sb=function(t,n,i,r,a){return Ds(t)?t.call(n,i,r,a):zo(t)&&~t.indexOf("random(")?kb(t):t},bN=JI+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",xN={};Ml(bN+",id,stagger,delay,duration,paused,scrollTrigger",function(e){return xN[e]=1});var to=(function(e){zz(t,e);function t(i,r,a,l){var h;typeof r=="number"&&(a.duration=r,r=a,a=null),h=e.call(this,l?r:ib(r))||this;var s=h.vars,p=s.duration,_=s.delay,x=s.immediateRender,T=s.stagger,k=s.overwrite,P=s.keyframes,M=s.defaults,R=s.scrollTrigger,F=s.yoyoEase,B=r.parent||vs,H=($a(i)||Uz(i)?gh(i[0]):"length"in r)?[i]:Oc(i),G,ee,ie,J,$,W,X,re;if(h._targets=H.length?QI(H):Eb("GSAP target "+i+" not found. https://gsap.com",!oc.nullTargetWarn)||[],h._ptLookup=[],h._overwrite=k,P||T||Bx(p)||Bx(_)){if(r=h.vars,G=h.timeline=new al({data:"nested",defaults:M||{},targets:B&&B.data==="nested"?B.vars.targets:H}),G.kill(),G.parent=G._dp=eh(h),G._start=0,T||Bx(p)||Bx(_)){if(J=H.length,X=T&&sN(T),ad(T))for($ in T)~bN.indexOf($)&&(re||(re={}),re[$]=T[$]);for(ee=0;ee<J;ee++)ie=t1(r,xN),ie.stagger=0,F&&(ie.yoyoEase=F),re&&Wv(ie,re),W=H[ee],ie.duration=+sb(p,eh(h),ee,W,H),ie.delay=(+sb(_,eh(h),ee,W,H)||0)-h._delay,!T&&J===1&&ie.delay&&(h._delay=_=ie.delay,h._start+=_,ie.delay=0),G.to(W,ie,X?X(ee,W,H):0),G._ease=Hi.none;G.duration()?p=_=0:h.timeline=0}else if(P){ib(lc(G.vars.defaults,{ease:"none"})),G._ease=Ap(P.ease||r.ease||"none");var Y=0,Z,ge,be;if($a(P))P.forEach(function(Be){return G.to(H,Be,">")}),G.duration();else{ie={};for($ in P)$==="ease"||$==="easeEach"||xG($,P[$],ie,P.easeEach);for($ in ie)for(Z=ie[$].sort(function(Be,nt){return Be.t-nt.t}),Y=0,ee=0;ee<Z.length;ee++)ge=Z[ee],be={ease:ge.e,duration:(ge.t-(ee?Z[ee-1].t:0))/100*p},be[$]=ge.v,G.to(H,be,Y),Y+=be.duration;G.duration()<p&&G.to({},{duration:p-G.duration()})}}p||h.duration(p=G.duration())}else h.timeline=0;return k===!0&&!GI&&(If=eh(h),vs.killTweensOf(H),If=0),Ku(B,eh(h),a),r.reversed&&h.reverse(),r.paused&&h.paused(!0),(x||!p&&!P&&h._start===no(B._time)&&Pl(x)&&JH(eh(h))&&B.data!=="nested")&&(h._tTime=-Fr,h.render(Math.max(0,-_)||0)),R&&tN(eh(h),R),h}var n=t.prototype;return n.render=function(r,a,l){var h=this._time,s=this._tDur,p=this._dur,_=r<0,x=r>s-Fr&&!_?s:r<Fr?0:r,T,k,P,M,R,F,B,H,G;if(!p)eG(this,r,a,l);else if(x!==this._tTime||!r||l||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==_||this._lazy){if(T=x,H=this.timeline,this._repeat){if(M=p+this._rDelay,this._repeat<-1&&_)return this.totalTime(M*100+r,a,l);if(T=no(x%M),x===s?(P=this._repeat,T=p):(R=no(x/M),P=~~R,P&&P===R?(T=p,P--):T>p&&(T=p)),F=this._yoyo&&P&1,F&&(G=this._yEase,T=p-T),R=Hv(this._tTime,M),T===h&&!l&&this._initted&&P===R)return this._tTime=x,this;P!==R&&(H&&this._yEase&&gN(H,F),this.vars.repeatRefresh&&!F&&!this._lock&&T!==M&&this._initted&&(this._lock=l=1,this.render(no(M*P),!0).invalidate()._lock=0))}if(!this._initted){if(nN(this,_?r:T,l,a,x))return this._tTime=0,this;if(h!==this._time&&!(l&&this.vars.repeatRefresh&&P!==R))return this;if(p!==this._dur)return this.render(r,a,l)}if(this._tTime=x,this._time=T,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=B=(G||this._ease)(T/p),this._from&&(this.ratio=B=1-B),!h&&x&&!a&&!R&&(nc(this,"onStart"),this._tTime!==x))return this;for(k=this._pt;k;)k.r(B,k.d),k=k._next;H&&H.render(r<0?r:H._dur*H._ease(T/this._dur),a,l)||this._startAt&&(this._zTime=r),this._onUpdate&&!a&&(_&&qC(this,r,a,l),nc(this,"onUpdate")),this._repeat&&P!==R&&this.vars.onRepeat&&!a&&this.parent&&nc(this,"onRepeat"),(x===this._tDur||!x)&&this._tTime===x&&(_&&!this._onUpdate&&qC(this,r,!0,!0),(r||!p)&&(x===this._tDur&&this._ts>0||!x&&this._ts<0)&&Xf(this,1),!a&&!(_&&!h)&&(x||h||F)&&(nc(this,x===s?"onComplete":"onReverseComplete",!0),this._prom&&!(x<s&&this.timeScale()>0)&&this._prom()))}return this},n.targets=function(){return this._targets},n.invalidate=function(r){return(!r||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(r),e.prototype.invalidate.call(this,r)},n.resetTo=function(r,a,l,h,s){Ib||Jl.wake(),this._ts||this.play();var p=Math.min(this._dur,(this._dp._time-this._start)*this._ts),_;return this._initted||nA(this,p),_=this._ease(p/this._dur),yG(this,r,a,l,h,_,p,s)?this.resetTo(r,a,l,h,1):(hT(this,0),this.parent||Qz(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},n.kill=function(r,a){if(a===void 0&&(a="all"),!r&&(!a||a==="all"))return this._lazy=this._pt=0,this.parent?By(this):this.scrollTrigger&&this.scrollTrigger.kill(!!oa),this;if(this.timeline){var l=this.timeline.totalDuration();return this.timeline.killTweensOf(r,a,If&&If.vars.overwrite!==!0)._first||By(this),this.parent&&l!==this.timeline.totalDuration()&&Gv(this,this._dur*this.timeline._tDur/l,0,1),this}var h=this._targets,s=r?Oc(r):h,p=this._ptLookup,_=this._pt,x,T,k,P,M,R,F;if((!a||a==="all")&&YH(h,s))return a==="all"&&(this._pt=0),By(this);for(x=this._op=this._op||[],a!=="all"&&(zo(a)&&(M={},Ml(a,function(B){return M[B]=1}),a=M),a=bG(h,a)),F=h.length;F--;)if(~s.indexOf(h[F])){T=p[F],a==="all"?(x[F]=a,P=T,k={}):(k=x[F]=x[F]||{},P=a);for(M in P)R=T&&T[M],R&&((!("kill"in R.d)||R.d.kill(M)===!0)&&uT(this,R,"_pt"),delete T[M]),k!=="all"&&(k[M]=1)}return this._initted&&!this._pt&&_&&By(this),this},t.to=function(r,a){return new t(r,a,arguments[2])},t.from=function(r,a){return rb(1,arguments)},t.delayedCall=function(r,a,l,h){return new t(a,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:r,onComplete:a,onReverseComplete:a,onCompleteParams:l,onReverseCompleteParams:l,callbackScope:h})},t.fromTo=function(r,a,l){return rb(2,arguments)},t.set=function(r,a){return a.duration=0,a.repeatDelay||(a.repeat=0),new t(r,a)},t.killTweensOf=function(r,a,l){return vs.killTweensOf(r,a,l)},t})(Ab);lc(to.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});Ml("staggerTo,staggerFrom,staggerFromTo",function(e){to[e]=function(){var t=new al,n=XC.call(arguments,0);return n.splice(e==="staggerFromTo"?5:4,0,0),t[e].apply(t,n)}});var iA=function(t,n,i){return t[n]=i},wN=function(t,n,i){return t[n](i)},wG=function(t,n,i,r){return t[n](r.fp,i)},TG=function(t,n,i){return t.setAttribute(n,i)},rA=function(t,n){return Ds(t[n])?wN:qI(t[n])&&t.setAttribute?TG:iA},TN=function(t,n){return n.set(n.t,n.p,Math.round((n.s+n.c*t)*1e6)/1e6,n)},SG=function(t,n){return n.set(n.t,n.p,!!(n.s+n.c*t),n)},SN=function(t,n){var i=n._pt,r="";if(!t&&n.b)r=n.b;else if(t===1&&n.e)r=n.e;else{for(;i;)r=i.p+(i.m?i.m(i.s+i.c*t):Math.round((i.s+i.c*t)*1e4)/1e4)+r,i=i._next;r+=n.c}n.set(n.t,n.p,r,n)},sA=function(t,n){for(var i=n._pt;i;)i.r(t,i.d),i=i._next},EG=function(t,n,i,r){for(var a=this._pt,l;a;)l=a._next,a.p===r&&a.modifier(t,n,i),a=l},CG=function(t){for(var n=this._pt,i,r;n;)r=n._next,n.p===t&&!n.op||n.op===t?uT(this,n,"_pt"):n.dep||(i=1),n=r;return!i},kG=function(t,n,i,r){r.mSet(t,n,r.m.call(r.tween,i,r.mt),r)},EN=function(t){for(var n=t._pt,i,r,a,l;n;){for(i=n._next,r=a;r&&r.pr>n.pr;)r=r._next;(n._prev=r?r._prev:l)?n._prev._next=n:a=n,(n._next=r)?r._prev=n:l=n,n=i}t._pt=a},Dl=(function(){function e(n,i,r,a,l,h,s,p,_){this.t=i,this.s=a,this.c=l,this.p=r,this.r=h||TN,this.d=s||this,this.set=p||iA,this.pr=_||0,this._next=n,n&&(n._prev=this)}var t=e.prototype;return t.modifier=function(i,r,a){this.mSet=this.mSet||this.set,this.set=kG,this.m=i,this.mt=a,this.tween=r},e})();Ml(JI+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(e){return ZI[e]=1});ac.TweenMax=ac.TweenLite=to;ac.TimelineLite=ac.TimelineMax=al;vs=new al({sortChildren:!1,defaults:jv,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});oc.stringFilter=mN;var Pp=[],bw={},IG=[],$R=0,AG=0,zE=function(t){return(bw[t]||IG).map(function(n){return n()})},QC=function(){var t=Date.now(),n=[];t-$R>2&&(zE("matchMediaInit"),Pp.forEach(function(i){var r=i.queries,a=i.conditions,l,h,s,p;for(h in r)l=Hu.matchMedia(r[h]).matches,l&&(s=1),l!==a[h]&&(a[h]=l,p=1);p&&(i.revert(),s&&n.push(i))}),zE("matchMediaRevert"),n.forEach(function(i){return i.onMatch(i,function(r){return i.add(null,r)})}),$R=t,zE("matchMedia"))},CN=(function(){function e(n,i){this.selector=i&&YC(i),this.data=[],this._r=[],this.isReverted=!1,this.id=AG++,n&&this.add(n)}var t=e.prototype;return t.add=function(i,r,a){Ds(i)&&(a=r,r=i,i=Ds);var l=this,h=function(){var p=ls,_=l.selector,x;return p&&p!==l&&p.data.push(l),a&&(l.selector=YC(a)),ls=l,x=r.apply(l,arguments),Ds(x)&&l._r.push(x),ls=p,l.selector=_,l.isReverted=!1,x};return l.last=h,i===Ds?h(l,function(s){return l.add(null,s)}):i?l[i]=h:h},t.ignore=function(i){var r=ls;ls=null,i(this),ls=r},t.getTweens=function(){var i=[];return this.data.forEach(function(r){return r instanceof e?i.push.apply(i,r.getTweens()):r instanceof to&&!(r.parent&&r.parent.data==="nested")&&i.push(r)}),i},t.clear=function(){this._r.length=this.data.length=0},t.kill=function(i,r){var a=this;if(i?(function(){for(var h=a.getTweens(),s=a.data.length,p;s--;)p=a.data[s],p.data==="isFlip"&&(p.revert(),p.getChildren(!0,!0,!1).forEach(function(_){return h.splice(h.indexOf(_),1)}));for(h.map(function(_){return{g:_._dur||_._delay||_._sat&&!_._sat.vars.immediateRender?_.globalTime(0):-1/0,t:_}}).sort(function(_,x){return x.g-_.g||-1/0}).forEach(function(_){return _.t.revert(i)}),s=a.data.length;s--;)p=a.data[s],p instanceof al?p.data!=="nested"&&(p.scrollTrigger&&p.scrollTrigger.revert(),p.kill()):!(p instanceof to)&&p.revert&&p.revert(i);a._r.forEach(function(_){return _(i,a)}),a.isReverted=!0})():this.data.forEach(function(h){return h.kill&&h.kill()}),this.clear(),r)for(var l=Pp.length;l--;)Pp[l].id===this.id&&Pp.splice(l,1)},t.revert=function(i){this.kill(i||{})},e})(),PG=(function(){function e(n){this.contexts=[],this.scope=n,ls&&ls.data.push(this)}var t=e.prototype;return t.add=function(i,r,a){ad(i)||(i={matches:i});var l=new CN(0,a||this.scope),h=l.conditions={},s,p,_;ls&&!l.selector&&(l.selector=ls.selector),this.contexts.push(l),r=l.add("onMatch",r),l.queries=i;for(p in i)p==="all"?_=1:(s=Hu.matchMedia(i[p]),s&&(Pp.indexOf(l)<0&&Pp.push(l),(h[p]=s.matches)&&(_=1),s.addListener?s.addListener(QC):s.addEventListener("change",QC)));return _&&r(l,function(x){return l.add(null,x)}),this},t.revert=function(i){this.kill(i||{})},t.kill=function(i){this.contexts.forEach(function(r){return r.kill(i,!0)})},e})(),i1={registerPlugin:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];n.forEach(function(r){return dN(r)})},timeline:function(t){return new al(t)},getTweensOf:function(t,n){return vs.getTweensOf(t,n)},getProperty:function(t,n,i,r){zo(t)&&(t=Oc(t)[0]);var a=kp(t||{}).get,l=i?Jz:Zz;return i==="native"&&(i=""),t&&(n?l((Zl[n]&&Zl[n].get||a)(t,n,i,r)):function(h,s,p){return l((Zl[h]&&Zl[h].get||a)(t,h,s,p))})},quickSetter:function(t,n,i){if(t=Oc(t),t.length>1){var r=t.map(function(_){return Rl.quickSetter(_,n,i)}),a=r.length;return function(_){for(var x=a;x--;)r[x](_)}}t=t[0]||{};var l=Zl[n],h=kp(t),s=h.harness&&(h.harness.aliases||{})[n]||n,p=l?function(_){var x=new l;vv._pt=0,x.init(t,i?_+i:_,vv,0,[t]),x.render(1,x),vv._pt&&sA(1,vv)}:h.set(t,s);return l?p:function(_){return p(t,s,i?_+i:_,h,1)}},quickTo:function(t,n,i){var r,a=Rl.to(t,lc((r={},r[n]="+=0.1",r.paused=!0,r.stagger=0,r),i||{})),l=function(s,p,_){return a.resetTo(n,s,p,_)};return l.tween=a,l},isTweening:function(t){return vs.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=Ap(t.ease,jv.ease)),BR(jv,t||{})},config:function(t){return BR(oc,t||{})},registerEffect:function(t){var n=t.name,i=t.effect,r=t.plugins,a=t.defaults,l=t.extendTimeline;(r||"").split(",").forEach(function(h){return h&&!Zl[h]&&!ac[h]&&Eb(n+" effect requires "+h+" plugin.")}),OE[n]=function(h,s,p){return i(Oc(h),lc(s||{},a),p)},l&&(al.prototype[n]=function(h,s,p){return this.add(OE[n](h,ad(s)?s:(p=s)&&{},this),p)})},registerEase:function(t,n){Hi[t]=Ap(n)},parseEase:function(t,n){return arguments.length?Ap(t,n):Hi},getById:function(t){return vs.getById(t)},exportRoot:function(t,n){t===void 0&&(t={});var i=new al(t),r,a;for(i.smoothChildTiming=Pl(t.smoothChildTiming),vs.remove(i),i._dp=0,i._time=i._tTime=vs._time,r=vs._first;r;)a=r._next,(n||!(!r._dur&&r instanceof to&&r.vars.onComplete===r._targets[0]))&&Ku(i,r,r._start-r._delay),r=a;return Ku(vs,i,0),i},context:function(t,n){return t?new CN(t,n):ls},matchMedia:function(t){return new PG(t)},matchMediaRefresh:function(){return Pp.forEach(function(t){var n=t.conditions,i,r;for(r in n)n[r]&&(n[r]=!1,i=1);i&&t.revert()})||QC()},addEventListener:function(t,n){var i=bw[t]||(bw[t]=[]);~i.indexOf(n)||i.push(n)},removeEventListener:function(t,n){var i=bw[t],r=i&&i.indexOf(n);r>=0&&i.splice(r,1)},utils:{wrap:lG,wrapYoyo:cG,distribute:sN,random:aN,snap:oN,normalize:aG,getUnit:Va,clamp:iG,splitColor:hN,toArray:Oc,selector:YC,mapRange:cN,pipe:sG,unitize:oG,interpolate:uG,shuffle:rN},install:Gz,effects:OE,ticker:Jl,updateRoot:al.updateRoot,plugins:Zl,globalTimeline:vs,core:{PropTween:Dl,globals:qz,Tween:to,Timeline:al,Animation:Ab,getCache:kp,_removeLinkedListItem:uT,reverting:function(){return oa},context:function(t){return t&&ls&&(ls.data.push(t),t._ctx=ls),ls},suppressOverwrites:function(t){return GI=t}}};Ml("to,from,fromTo,delayedCall,set,killTweensOf",function(e){return i1[e]=to[e]});Jl.add(al.updateRoot);vv=i1.to({},{duration:0});var MG=function(t,n){for(var i=t._pt;i&&i.p!==n&&i.op!==n&&i.fp!==n;)i=i._next;return i},DG=function(t,n){var i=t._targets,r,a,l;for(r in n)for(a=i.length;a--;)l=t._ptLookup[a][r],l&&(l=l.d)&&(l._pt&&(l=MG(l,r)),l&&l.modifier&&l.modifier(n[r],t,i[a],r))},NE=function(t,n){return{name:t,headless:1,rawVars:1,init:function(r,a,l){l._onInit=function(h){var s,p;if(zo(a)&&(s={},Ml(a,function(_){return s[_]=1}),a=s),n){s={};for(p in a)s[p]=n(a[p]);a=s}DG(h,a)}}}},Rl=i1.registerPlugin({name:"attr",init:function(t,n,i,r,a){var l,h,s;this.tween=i;for(l in n)s=t.getAttribute(l)||"",h=this.add(t,"setAttribute",(s||0)+"",n[l],r,a,0,0,l),h.op=l,h.b=s,this._props.push(l)},render:function(t,n){for(var i=n._pt;i;)oa?i.set(i.t,i.p,i.b,i):i.r(t,i.d),i=i._next}},{name:"endArray",headless:1,init:function(t,n){for(var i=n.length;i--;)this.add(t,i,t[i]||0,n[i],0,0,0,0,0,1)}},NE("roundProps",ZC),NE("modifiers"),NE("snap",oN))||i1;to.version=al.version=Rl.version="3.13.0";Hz=1;KI()&&qv();Hi.Power0;Hi.Power1;Hi.Power2;Hi.Power3;Hi.Power4;Hi.Linear;Hi.Quad;Hi.Cubic;Hi.Quart;Hi.Quint;Hi.Strong;Hi.Elastic;Hi.Back;Hi.SteppedEase;Hi.Bounce;Hi.Sine;Hi.Expo;Hi.Circ;/*!
 * CSSPlugin 3.13.0
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var jR,Af,Av,oA,xp,WR,aA,LG=function(){return typeof window<"u"},vh={},mp=180/Math.PI,Pv=Math.PI/180,rv=Math.atan2,HR=1e8,lA=/([A-Z])/g,RG=/(left|right|width|margin|padding|x)/i,OG=/[\s,\(]\S/,Xu={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},ek=function(t,n){return n.set(n.t,n.p,Math.round((n.s+n.c*t)*1e4)/1e4+n.u,n)},VG=function(t,n){return n.set(n.t,n.p,t===1?n.e:Math.round((n.s+n.c*t)*1e4)/1e4+n.u,n)},BG=function(t,n){return n.set(n.t,n.p,t?Math.round((n.s+n.c*t)*1e4)/1e4+n.u:n.b,n)},FG=function(t,n){var i=n.s+n.c*t;n.set(n.t,n.p,~~(i+(i<0?-.5:.5))+n.u,n)},kN=function(t,n){return n.set(n.t,n.p,t?n.e:n.b,n)},IN=function(t,n){return n.set(n.t,n.p,t!==1?n.b:n.e,n)},zG=function(t,n,i){return t.style[n]=i},NG=function(t,n,i){return t.style.setProperty(n,i)},UG=function(t,n,i){return t._gsap[n]=i},$G=function(t,n,i){return t._gsap.scaleX=t._gsap.scaleY=i},jG=function(t,n,i,r,a){var l=t._gsap;l.scaleX=l.scaleY=i,l.renderTransform(a,l)},WG=function(t,n,i,r,a){var l=t._gsap;l[n]=i,l.renderTransform(a,l)},ys="transform",Ll=ys+"Origin",HG=function e(t,n){var i=this,r=this.target,a=r.style,l=r._gsap;if(t in vh&&a){if(this.tfm=this.tfm||{},t!=="transform")t=Xu[t]||t,~t.indexOf(",")?t.split(",").forEach(function(h){return i.tfm[h]=ih(r,h)}):this.tfm[t]=l.x?l[t]:ih(r,t),t===Ll&&(this.tfm.zOrigin=l.zOrigin);else return Xu.transform.split(",").forEach(function(h){return e.call(i,h,n)});if(this.props.indexOf(ys)>=0)return;l.svg&&(this.svgo=r.getAttribute("data-svg-origin"),this.props.push(Ll,n,"")),t=ys}(a||n)&&this.props.push(t,n,a[t])},AN=function(t){t.translate&&(t.removeProperty("translate"),t.removeProperty("scale"),t.removeProperty("rotate"))},GG=function(){var t=this.props,n=this.target,i=n.style,r=n._gsap,a,l;for(a=0;a<t.length;a+=3)t[a+1]?t[a+1]===2?n[t[a]](t[a+2]):n[t[a]]=t[a+2]:t[a+2]?i[t[a]]=t[a+2]:i.removeProperty(t[a].substr(0,2)==="--"?t[a]:t[a].replace(lA,"-$1").toLowerCase());if(this.tfm){for(l in this.tfm)r[l]=this.tfm[l];r.svg&&(r.renderTransform(),n.setAttribute("data-svg-origin",this.svgo||"")),a=aA(),(!a||!a.isStart)&&!i[ys]&&(AN(i),r.zOrigin&&i[Ll]&&(i[Ll]+=" "+r.zOrigin+"px",r.zOrigin=0,r.renderTransform()),r.uncache=1)}},PN=function(t,n){var i={target:t,props:[],revert:GG,save:HG};return t._gsap||Rl.core.getCache(t),n&&t.style&&t.nodeType&&n.split(",").forEach(function(r){return i.save(r)}),i},MN,tk=function(t,n){var i=Af.createElementNS?Af.createElementNS((n||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):Af.createElement(t);return i&&i.style?i:Af.createElement(t)},Vc=function e(t,n,i){var r=getComputedStyle(t);return r[n]||r.getPropertyValue(n.replace(lA,"-$1").toLowerCase())||r.getPropertyValue(n)||!i&&e(t,Kv(n)||n,1)||""},GR="O,Moz,ms,Ms,Webkit".split(","),Kv=function(t,n,i){var r=n||xp,a=r.style,l=5;if(t in a&&!i)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);l--&&!(GR[l]+t in a););return l<0?null:(l===3?"ms":l>=0?GR[l]:"")+t},nk=function(){LG()&&window.document&&(jR=window,Af=jR.document,Av=Af.documentElement,xp=tk("div")||{style:{}},tk("div"),ys=Kv(ys),Ll=ys+"Origin",xp.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",MN=!!Kv("perspective"),aA=Rl.core.reverting,oA=1)},qR=function(t){var n=t.ownerSVGElement,i=tk("svg",n&&n.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),r=t.cloneNode(!0),a;r.style.display="block",i.appendChild(r),Av.appendChild(i);try{a=r.getBBox()}catch{}return i.removeChild(r),Av.removeChild(i),a},KR=function(t,n){for(var i=n.length;i--;)if(t.hasAttribute(n[i]))return t.getAttribute(n[i])},DN=function(t){var n,i;try{n=t.getBBox()}catch{n=qR(t),i=1}return n&&(n.width||n.height)||i||(n=qR(t)),n&&!n.width&&!n.x&&!n.y?{x:+KR(t,["x","cx","x1"])||0,y:+KR(t,["y","cy","y1"])||0,width:0,height:0}:n},LN=function(t){return!!(t.getCTM&&(!t.parentNode||t.ownerSVGElement)&&DN(t))},zp=function(t,n){if(n){var i=t.style,r;n in vh&&n!==Ll&&(n=ys),i.removeProperty?(r=n.substr(0,2),(r==="ms"||n.substr(0,6)==="webkit")&&(n="-"+n),i.removeProperty(r==="--"?n:n.replace(lA,"-$1").toLowerCase())):i.removeAttribute(n)}},Pf=function(t,n,i,r,a,l){var h=new Dl(t._pt,n,i,0,1,l?IN:kN);return t._pt=h,h.b=r,h.e=a,t._props.push(i),h},XR={deg:1,rad:1,turn:1},qG={grid:1,flex:1},Yf=function e(t,n,i,r){var a=parseFloat(i)||0,l=(i+"").trim().substr((a+"").length)||"px",h=xp.style,s=RG.test(n),p=t.tagName.toLowerCase()==="svg",_=(p?"client":"offset")+(s?"Width":"Height"),x=100,T=r==="px",k=r==="%",P,M,R,F;if(r===l||!a||XR[r]||XR[l])return a;if(l!=="px"&&!T&&(a=e(t,n,i,"px")),F=t.getCTM&&LN(t),(k||l==="%")&&(vh[n]||~n.indexOf("adius")))return P=F?t.getBBox()[s?"width":"height"]:t[_],$s(k?a/P*x:a/100*P);if(h[s?"width":"height"]=x+(T?l:r),M=r!=="rem"&&~n.indexOf("adius")||r==="em"&&t.appendChild&&!p?t:t.parentNode,F&&(M=(t.ownerSVGElement||{}).parentNode),(!M||M===Af||!M.appendChild)&&(M=Af.body),R=M._gsap,R&&k&&R.width&&s&&R.time===Jl.time&&!R.uncache)return $s(a/R.width*x);if(k&&(n==="height"||n==="width")){var B=t.style[n];t.style[n]=x+r,P=t[_],B?t.style[n]=B:zp(t,n)}else(k||l==="%")&&!qG[Vc(M,"display")]&&(h.position=Vc(t,"position")),M===t&&(h.position="static"),M.appendChild(xp),P=xp[_],M.removeChild(xp),h.position="absolute";return s&&k&&(R=kp(M),R.time=Jl.time,R.width=M[_]),$s(T?P*a/x:P&&a?x/P*a:0)},ih=function(t,n,i,r){var a;return oA||nk(),n in Xu&&n!=="transform"&&(n=Xu[n],~n.indexOf(",")&&(n=n.split(",")[0])),vh[n]&&n!=="transform"?(a=Mb(t,r),a=n!=="transformOrigin"?a[n]:a.svg?a.origin:s1(Vc(t,Ll))+" "+a.zOrigin+"px"):(a=t.style[n],(!a||a==="auto"||r||~(a+"").indexOf("calc("))&&(a=r1[n]&&r1[n](t,n,i)||Vc(t,n)||Xz(t,n)||(n==="opacity"?1:0))),i&&!~(a+"").trim().indexOf(" ")?Yf(t,n,a,i)+i:a},KG=function(t,n,i,r){if(!i||i==="none"){var a=Kv(n,t,1),l=a&&Vc(t,a,1);l&&l!==i?(n=a,i=l):n==="borderColor"&&(i=Vc(t,"borderTopColor"))}var h=new Dl(this._pt,t.style,n,0,1,SN),s=0,p=0,_,x,T,k,P,M,R,F,B,H,G,ee;if(h.b=i,h.e=r,i+="",r+="",r.substring(0,6)==="var(--"&&(r=Vc(t,r.substring(4,r.indexOf(")")))),r==="auto"&&(M=t.style[n],t.style[n]=r,r=Vc(t,n)||r,M?t.style[n]=M:zp(t,n)),_=[i,r],mN(_),i=_[0],r=_[1],T=i.match(gv)||[],ee=r.match(gv)||[],ee.length){for(;x=gv.exec(r);)R=x[0],B=r.substring(s,x.index),P?P=(P+1)%5:(B.substr(-5)==="rgba("||B.substr(-5)==="hsla(")&&(P=1),R!==(M=T[p++]||"")&&(k=parseFloat(M)||0,G=M.substr((k+"").length),R.charAt(1)==="="&&(R=Iv(k,R)+G),F=parseFloat(R),H=R.substr((F+"").length),s=gv.lastIndex-H.length,H||(H=H||oc.units[n]||G,s===r.length&&(r+=H,h.e+=H)),G!==H&&(k=Yf(t,n,M,H)||0),h._pt={_next:h._pt,p:B||p===1?B:",",s:k,c:F-k,m:P&&P<4||n==="zIndex"?Math.round:0});h.c=s<r.length?r.substring(s,r.length):""}else h.r=n==="display"&&r==="none"?IN:kN;return jz.test(r)&&(h.e=0),this._pt=h,h},YR={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},XG=function(t){var n=t.split(" "),i=n[0],r=n[1]||"50%";return(i==="top"||i==="bottom"||r==="left"||r==="right")&&(t=i,i=r,r=t),n[0]=YR[i]||i,n[1]=YR[r]||r,n.join(" ")},YG=function(t,n){if(n.tween&&n.tween._time===n.tween._dur){var i=n.t,r=i.style,a=n.u,l=i._gsap,h,s,p;if(a==="all"||a===!0)r.cssText="",s=1;else for(a=a.split(","),p=a.length;--p>-1;)h=a[p],vh[h]&&(s=1,h=h==="transformOrigin"?Ll:ys),zp(i,h);s&&(zp(i,ys),l&&(l.svg&&i.removeAttribute("transform"),r.scale=r.rotate=r.translate="none",Mb(i,1),l.uncache=1,AN(r)))}},r1={clearProps:function(t,n,i,r,a){if(a.data!=="isFromStart"){var l=t._pt=new Dl(t._pt,n,i,0,0,YG);return l.u=r,l.pr=-10,l.tween=a,t._props.push(i),1}}},Pb=[1,0,0,1,0,0],RN={},ON=function(t){return t==="matrix(1, 0, 0, 1, 0, 0)"||t==="none"||!t},ZR=function(t){var n=Vc(t,ys);return ON(n)?Pb:n.substr(7).match($z).map($s)},cA=function(t,n){var i=t._gsap||kp(t),r=t.style,a=ZR(t),l,h,s,p;return i.svg&&t.getAttribute("transform")?(s=t.transform.baseVal.consolidate().matrix,a=[s.a,s.b,s.c,s.d,s.e,s.f],a.join(",")==="1,0,0,1,0,0"?Pb:a):(a===Pb&&!t.offsetParent&&t!==Av&&!i.svg&&(s=r.display,r.display="block",l=t.parentNode,(!l||!t.offsetParent&&!t.getBoundingClientRect().width)&&(p=1,h=t.nextElementSibling,Av.appendChild(t)),a=ZR(t),s?r.display=s:zp(t,"display"),p&&(h?l.insertBefore(t,h):l?l.appendChild(t):Av.removeChild(t))),n&&a.length>6?[a[0],a[1],a[4],a[5],a[12],a[13]]:a)},ik=function(t,n,i,r,a,l){var h=t._gsap,s=a||cA(t,!0),p=h.xOrigin||0,_=h.yOrigin||0,x=h.xOffset||0,T=h.yOffset||0,k=s[0],P=s[1],M=s[2],R=s[3],F=s[4],B=s[5],H=n.split(" "),G=parseFloat(H[0])||0,ee=parseFloat(H[1])||0,ie,J,$,W;i?s!==Pb&&(J=k*R-P*M)&&($=G*(R/J)+ee*(-M/J)+(M*B-R*F)/J,W=G*(-P/J)+ee*(k/J)-(k*B-P*F)/J,G=$,ee=W):(ie=DN(t),G=ie.x+(~H[0].indexOf("%")?G/100*ie.width:G),ee=ie.y+(~(H[1]||H[0]).indexOf("%")?ee/100*ie.height:ee)),r||r!==!1&&h.smooth?(F=G-p,B=ee-_,h.xOffset=x+(F*k+B*M)-F,h.yOffset=T+(F*P+B*R)-B):h.xOffset=h.yOffset=0,h.xOrigin=G,h.yOrigin=ee,h.smooth=!!r,h.origin=n,h.originIsAbsolute=!!i,t.style[Ll]="0px 0px",l&&(Pf(l,h,"xOrigin",p,G),Pf(l,h,"yOrigin",_,ee),Pf(l,h,"xOffset",x,h.xOffset),Pf(l,h,"yOffset",T,h.yOffset)),t.setAttribute("data-svg-origin",G+" "+ee)},Mb=function(t,n){var i=t._gsap||new _N(t);if("x"in i&&!n&&!i.uncache)return i;var r=t.style,a=i.scaleX<0,l="px",h="deg",s=getComputedStyle(t),p=Vc(t,Ll)||"0",_,x,T,k,P,M,R,F,B,H,G,ee,ie,J,$,W,X,re,Y,Z,ge,be,Be,nt,We,Le,Ze,Ee,Je,it,vt,mt;return _=x=T=M=R=F=B=H=G=0,k=P=1,i.svg=!!(t.getCTM&&LN(t)),s.translate&&((s.translate!=="none"||s.scale!=="none"||s.rotate!=="none")&&(r[ys]=(s.translate!=="none"?"translate3d("+(s.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(s.rotate!=="none"?"rotate("+s.rotate+") ":"")+(s.scale!=="none"?"scale("+s.scale.split(" ").join(",")+") ":"")+(s[ys]!=="none"?s[ys]:"")),r.scale=r.rotate=r.translate="none"),J=cA(t,i.svg),i.svg&&(i.uncache?(We=t.getBBox(),p=i.xOrigin-We.x+"px "+(i.yOrigin-We.y)+"px",nt=""):nt=!n&&t.getAttribute("data-svg-origin"),ik(t,nt||p,!!nt||i.originIsAbsolute,i.smooth!==!1,J)),ee=i.xOrigin||0,ie=i.yOrigin||0,J!==Pb&&(re=J[0],Y=J[1],Z=J[2],ge=J[3],_=be=J[4],x=Be=J[5],J.length===6?(k=Math.sqrt(re*re+Y*Y),P=Math.sqrt(ge*ge+Z*Z),M=re||Y?rv(Y,re)*mp:0,B=Z||ge?rv(Z,ge)*mp+M:0,B&&(P*=Math.abs(Math.cos(B*Pv))),i.svg&&(_-=ee-(ee*re+ie*Z),x-=ie-(ee*Y+ie*ge))):(mt=J[6],it=J[7],Ze=J[8],Ee=J[9],Je=J[10],vt=J[11],_=J[12],x=J[13],T=J[14],$=rv(mt,Je),R=$*mp,$&&(W=Math.cos(-$),X=Math.sin(-$),nt=be*W+Ze*X,We=Be*W+Ee*X,Le=mt*W+Je*X,Ze=be*-X+Ze*W,Ee=Be*-X+Ee*W,Je=mt*-X+Je*W,vt=it*-X+vt*W,be=nt,Be=We,mt=Le),$=rv(-Z,Je),F=$*mp,$&&(W=Math.cos(-$),X=Math.sin(-$),nt=re*W-Ze*X,We=Y*W-Ee*X,Le=Z*W-Je*X,vt=ge*X+vt*W,re=nt,Y=We,Z=Le),$=rv(Y,re),M=$*mp,$&&(W=Math.cos($),X=Math.sin($),nt=re*W+Y*X,We=be*W+Be*X,Y=Y*W-re*X,Be=Be*W-be*X,re=nt,be=We),R&&Math.abs(R)+Math.abs(M)>359.9&&(R=M=0,F=180-F),k=$s(Math.sqrt(re*re+Y*Y+Z*Z)),P=$s(Math.sqrt(Be*Be+mt*mt)),$=rv(be,Be),B=Math.abs($)>2e-4?$*mp:0,G=vt?1/(vt<0?-vt:vt):0),i.svg&&(nt=t.getAttribute("transform"),i.forceCSS=t.setAttribute("transform","")||!ON(Vc(t,ys)),nt&&t.setAttribute("transform",nt))),Math.abs(B)>90&&Math.abs(B)<270&&(a?(k*=-1,B+=M<=0?180:-180,M+=M<=0?180:-180):(P*=-1,B+=B<=0?180:-180)),n=n||i.uncache,i.x=_-((i.xPercent=_&&(!n&&i.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-_)?-50:0)))?t.offsetWidth*i.xPercent/100:0)+l,i.y=x-((i.yPercent=x&&(!n&&i.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-x)?-50:0)))?t.offsetHeight*i.yPercent/100:0)+l,i.z=T+l,i.scaleX=$s(k),i.scaleY=$s(P),i.rotation=$s(M)+h,i.rotationX=$s(R)+h,i.rotationY=$s(F)+h,i.skewX=B+h,i.skewY=H+h,i.transformPerspective=G+l,(i.zOrigin=parseFloat(p.split(" ")[2])||!n&&i.zOrigin||0)&&(r[Ll]=s1(p)),i.xOffset=i.yOffset=0,i.force3D=oc.force3D,i.renderTransform=i.svg?JG:MN?VN:ZG,i.uncache=0,i},s1=function(t){return(t=t.split(" "))[0]+" "+t[1]},UE=function(t,n,i){var r=Va(n);return $s(parseFloat(n)+parseFloat(Yf(t,"x",i+"px",r)))+r},ZG=function(t,n){n.z="0px",n.rotationY=n.rotationX="0deg",n.force3D=0,VN(t,n)},sp="0deg",ky="0px",op=") ",VN=function(t,n){var i=n||this,r=i.xPercent,a=i.yPercent,l=i.x,h=i.y,s=i.z,p=i.rotation,_=i.rotationY,x=i.rotationX,T=i.skewX,k=i.skewY,P=i.scaleX,M=i.scaleY,R=i.transformPerspective,F=i.force3D,B=i.target,H=i.zOrigin,G="",ee=F==="auto"&&t&&t!==1||F===!0;if(H&&(x!==sp||_!==sp)){var ie=parseFloat(_)*Pv,J=Math.sin(ie),$=Math.cos(ie),W;ie=parseFloat(x)*Pv,W=Math.cos(ie),l=UE(B,l,J*W*-H),h=UE(B,h,-Math.sin(ie)*-H),s=UE(B,s,$*W*-H+H)}R!==ky&&(G+="perspective("+R+op),(r||a)&&(G+="translate("+r+"%, "+a+"%) "),(ee||l!==ky||h!==ky||s!==ky)&&(G+=s!==ky||ee?"translate3d("+l+", "+h+", "+s+") ":"translate("+l+", "+h+op),p!==sp&&(G+="rotate("+p+op),_!==sp&&(G+="rotateY("+_+op),x!==sp&&(G+="rotateX("+x+op),(T!==sp||k!==sp)&&(G+="skew("+T+", "+k+op),(P!==1||M!==1)&&(G+="scale("+P+", "+M+op),B.style[ys]=G||"translate(0, 0)"},JG=function(t,n){var i=n||this,r=i.xPercent,a=i.yPercent,l=i.x,h=i.y,s=i.rotation,p=i.skewX,_=i.skewY,x=i.scaleX,T=i.scaleY,k=i.target,P=i.xOrigin,M=i.yOrigin,R=i.xOffset,F=i.yOffset,B=i.forceCSS,H=parseFloat(l),G=parseFloat(h),ee,ie,J,$,W;s=parseFloat(s),p=parseFloat(p),_=parseFloat(_),_&&(_=parseFloat(_),p+=_,s+=_),s||p?(s*=Pv,p*=Pv,ee=Math.cos(s)*x,ie=Math.sin(s)*x,J=Math.sin(s-p)*-T,$=Math.cos(s-p)*T,p&&(_*=Pv,W=Math.tan(p-_),W=Math.sqrt(1+W*W),J*=W,$*=W,_&&(W=Math.tan(_),W=Math.sqrt(1+W*W),ee*=W,ie*=W)),ee=$s(ee),ie=$s(ie),J=$s(J),$=$s($)):(ee=x,$=T,ie=J=0),(H&&!~(l+"").indexOf("px")||G&&!~(h+"").indexOf("px"))&&(H=Yf(k,"x",l,"px"),G=Yf(k,"y",h,"px")),(P||M||R||F)&&(H=$s(H+P-(P*ee+M*J)+R),G=$s(G+M-(P*ie+M*$)+F)),(r||a)&&(W=k.getBBox(),H=$s(H+r/100*W.width),G=$s(G+a/100*W.height)),W="matrix("+ee+","+ie+","+J+","+$+","+H+","+G+")",k.setAttribute("transform",W),B&&(k.style[ys]=W)},QG=function(t,n,i,r,a){var l=360,h=zo(a),s=parseFloat(a)*(h&&~a.indexOf("rad")?mp:1),p=s-r,_=r+p+"deg",x,T;return h&&(x=a.split("_")[1],x==="short"&&(p%=l,p!==p%(l/2)&&(p+=p<0?l:-l)),x==="cw"&&p<0?p=(p+l*HR)%l-~~(p/l)*l:x==="ccw"&&p>0&&(p=(p-l*HR)%l-~~(p/l)*l)),t._pt=T=new Dl(t._pt,n,i,r,p,VG),T.e=_,T.u="deg",t._props.push(i),T},JR=function(t,n){for(var i in n)t[i]=n[i];return t},eq=function(t,n,i){var r=JR({},i._gsap),a="perspective,force3D,transformOrigin,svgOrigin",l=i.style,h,s,p,_,x,T,k,P;r.svg?(p=i.getAttribute("transform"),i.setAttribute("transform",""),l[ys]=n,h=Mb(i,1),zp(i,ys),i.setAttribute("transform",p)):(p=getComputedStyle(i)[ys],l[ys]=n,h=Mb(i,1),l[ys]=p);for(s in vh)p=r[s],_=h[s],p!==_&&a.indexOf(s)<0&&(k=Va(p),P=Va(_),x=k!==P?Yf(i,s,p,P):parseFloat(p),T=parseFloat(_),t._pt=new Dl(t._pt,h,s,x,T-x,ek),t._pt.u=P||0,t._props.push(s));JR(h,r)};Ml("padding,margin,Width,Radius",function(e,t){var n="Top",i="Right",r="Bottom",a="Left",l=(t<3?[n,i,r,a]:[n+a,n+i,r+i,r+a]).map(function(h){return t<2?e+h:"border"+h+e});r1[t>1?"border"+e:e]=function(h,s,p,_,x){var T,k;if(arguments.length<4)return T=l.map(function(P){return ih(h,P,p)}),k=T.join(" "),k.split(T[0]).length===5?T[0]:k;T=(_+"").split(" "),k={},l.forEach(function(P,M){return k[P]=T[M]=T[M]||T[(M-1)/2|0]}),h.init(s,k,x)}});var BN={name:"css",register:nk,targetTest:function(t){return t.style&&t.nodeType},init:function(t,n,i,r,a){var l=this._props,h=t.style,s=i.vars.startAt,p,_,x,T,k,P,M,R,F,B,H,G,ee,ie,J,$;oA||nk(),this.styles=this.styles||PN(t),$=this.styles.props,this.tween=i;for(M in n)if(M!=="autoRound"&&(_=n[M],!(Zl[M]&&yN(M,n,i,r,t,a)))){if(k=typeof _,P=r1[M],k==="function"&&(_=_.call(i,r,t,a),k=typeof _),k==="string"&&~_.indexOf("random(")&&(_=kb(_)),P)P(this,t,M,_,i)&&(J=1);else if(M.substr(0,2)==="--")p=(getComputedStyle(t).getPropertyValue(M)+"").trim(),_+="",zf.lastIndex=0,zf.test(p)||(R=Va(p),F=Va(_)),F?R!==F&&(p=Yf(t,M,p,F)+F):R&&(_+=R),this.add(h,"setProperty",p,_,r,a,0,0,M),l.push(M),$.push(M,0,h[M]);else if(k!=="undefined"){if(s&&M in s?(p=typeof s[M]=="function"?s[M].call(i,r,t,a):s[M],zo(p)&&~p.indexOf("random(")&&(p=kb(p)),Va(p+"")||p==="auto"||(p+=oc.units[M]||Va(ih(t,M))||""),(p+"").charAt(1)==="="&&(p=ih(t,M))):p=ih(t,M),T=parseFloat(p),B=k==="string"&&_.charAt(1)==="="&&_.substr(0,2),B&&(_=_.substr(2)),x=parseFloat(_),M in Xu&&(M==="autoAlpha"&&(T===1&&ih(t,"visibility")==="hidden"&&x&&(T=0),$.push("visibility",0,h.visibility),Pf(this,h,"visibility",T?"inherit":"hidden",x?"inherit":"hidden",!x)),M!=="scale"&&M!=="transform"&&(M=Xu[M],~M.indexOf(",")&&(M=M.split(",")[0]))),H=M in vh,H){if(this.styles.save(M),k==="string"&&_.substring(0,6)==="var(--"&&(_=Vc(t,_.substring(4,_.indexOf(")"))),x=parseFloat(_)),G||(ee=t._gsap,ee.renderTransform&&!n.parseTransform||Mb(t,n.parseTransform),ie=n.smoothOrigin!==!1&&ee.smooth,G=this._pt=new Dl(this._pt,h,ys,0,1,ee.renderTransform,ee,0,-1),G.dep=1),M==="scale")this._pt=new Dl(this._pt,ee,"scaleY",ee.scaleY,(B?Iv(ee.scaleY,B+x):x)-ee.scaleY||0,ek),this._pt.u=0,l.push("scaleY",M),M+="X";else if(M==="transformOrigin"){$.push(Ll,0,h[Ll]),_=XG(_),ee.svg?ik(t,_,0,ie,0,this):(F=parseFloat(_.split(" ")[2])||0,F!==ee.zOrigin&&Pf(this,ee,"zOrigin",ee.zOrigin,F),Pf(this,h,M,s1(p),s1(_)));continue}else if(M==="svgOrigin"){ik(t,_,1,ie,0,this);continue}else if(M in RN){QG(this,ee,M,T,B?Iv(T,B+_):_);continue}else if(M==="smoothOrigin"){Pf(this,ee,"smooth",ee.smooth,_);continue}else if(M==="force3D"){ee[M]=_;continue}else if(M==="transform"){eq(this,_,t);continue}}else M in h||(M=Kv(M)||M);if(H||(x||x===0)&&(T||T===0)&&!OG.test(_)&&M in h)R=(p+"").substr((T+"").length),x||(x=0),F=Va(_)||(M in oc.units?oc.units[M]:R),R!==F&&(T=Yf(t,M,p,F)),this._pt=new Dl(this._pt,H?ee:h,M,T,(B?Iv(T,B+x):x)-T,!H&&(F==="px"||M==="zIndex")&&n.autoRound!==!1?FG:ek),this._pt.u=F||0,R!==F&&F!=="%"&&(this._pt.b=p,this._pt.r=BG);else if(M in h)KG.call(this,t,M,p,B?B+_:_);else if(M in t)this.add(t,M,p||t[M],B?B+_:_,r,a);else if(M!=="parseTransform"){YI(M,_);continue}H||(M in h?$.push(M,0,h[M]):typeof t[M]=="function"?$.push(M,2,t[M]()):$.push(M,1,p||t[M])),l.push(M)}}J&&EN(this)},render:function(t,n){if(n.tween._time||!aA())for(var i=n._pt;i;)i.r(t,i.d),i=i._next;else n.styles.revert()},get:ih,aliases:Xu,getSetter:function(t,n,i){var r=Xu[n];return r&&r.indexOf(",")<0&&(n=r),n in vh&&n!==Ll&&(t._gsap.x||ih(t,"x"))?i&&WR===i?n==="scale"?$G:UG:(WR=i||{})&&(n==="scale"?jG:WG):t.style&&!qI(t.style[n])?zG:~n.indexOf("-")?NG:rA(t,n)},core:{_removeProperty:zp,_getMatrix:cA}};Rl.utils.checkPrefix=Kv;Rl.core.getStyleSaver=PN;(function(e,t,n,i){var r=Ml(e+","+t+","+n,function(a){vh[a]=1});Ml(t,function(a){oc.units[a]="deg",RN[a]=1}),Xu[r[13]]=e+","+t,Ml(i,function(a){var l=a.split(":");Xu[l[1]]=r[l[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");Ml("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(e){oc.units[e]="px"});Rl.registerPlugin(BN);var xw=Rl.registerPlugin(BN)||Rl;xw.core.Tween;const FN="/singatrainlogo.png",zN="singatrain-app-state";function tq(){if(typeof window>"u")return null;try{const e=window.localStorage.getItem(zN);return e?JSON.parse(e):null}catch{return null}}function Fx(e){typeof window>"u"||window.localStorage.setItem(zN,JSON.stringify({favorites:e.favorites,user:e.user,darkMode:e.darkMode}))}const nq={name:"Guest User",email:"",memberSince:"",favorites:[]},$E=tq(),Ps=io({activeTab:"dashboard",darkMode:$E?.darkMode??(typeof window>"u"||!window.matchMedia?!1:window.matchMedia("(prefers-color-scheme: dark)").matches),favorites:$E?.favorites??[],user:{...nq,...$E?.user||{}}});function m0(){const e=fe(()=>Ps.favorites.length);function t(s){Ps.activeTab=s}function n(s){Ps.darkMode=s,typeof document<"u"&&document.body.classList.toggle("dark-mode",s)}function i(){Ps.darkMode=!Ps.darkMode,typeof document<"u"&&document.body.classList.toggle("dark-mode",Ps.darkMode),Fx(Ps)}function r(s){if(!s||!s.station)return;Ps.favorites.some(_=>_.station===s.station&&_.label===s.label)||Ps.favorites.push({...s})}function a(s){Ps.favorites=Ps.favorites.filter(p=>p.label!==s.label||p.station!==s.station)}function l(){Ps.favorites.splice(0,Ps.favorites.length)}function h(s){Ps.user={...Ps.user,...s}}return qt(()=>Ps.darkMode,s=>{typeof document<"u"&&document.body.classList.toggle("dark-mode",s),Fx(Ps)},{immediate:!0}),qt(()=>Ps.favorites,()=>Fx(Ps),{deep:!0}),qt(()=>Ps.user,()=>Fx(Ps),{deep:!0}),{state:Ps,favoritesCount:e,setActiveTab:t,setDarkMode:n,toggleDarkMode:i,addFavorite:r,removeFavorite:a,clearFavorites:l,updateUser:h}}const iq={class:"premium-navbar"},rq={class:"container"},sq={class:"navbar-nav desktop-only"},oq=["onClick"],aq={class:"material-icons me-1"},lq={class:"right-controls"},cq={class:"theme-toggle-wrapper"},uq={class:"theme-switch"},dq=["checked"],hq={class:"navbar-nav"},fq=["onClick"],mq={class:"material-icons me-1"},pq={__name:"Navbar",setup(e){const t=[{key:"dashboard",label:"Dashboard",icon:"space_dashboard"},{key:"live",label:"Live Tracker",icon:"tram"},{key:"route",label:"Route Planner",icon:"alt_route"},{key:"fare",label:"Fare Calculator",icon:"payments"},{key:"meetup",label:"Meet-up",icon:"groups"},{key:"profile",label:"Profile",icon:"account_circle"}],n=tt(!1),{state:i,setActiveTab:r,toggleDarkMode:a}=m0(),l=tt(window.innerWidth),h=()=>{l.value=window.innerWidth,l.value>=992&&(n.value=!1)};return Kr(()=>{window.addEventListener("resize",h)}),Nr(()=>{window.removeEventListener("resize",h)}),(s,p)=>(nn(),mn("nav",iq,[z("div",rq,[z("a",{class:"navbar-brand",href:"#",onClick:p[0]||(p[0]=ol(_=>xi(r)("dashboard"),["prevent"]))},[...p[3]||(p[3]=[z("img",{src:FN,alt:"SingaTrain logo",class:"logo"},null,-1),z("span",null,"SingaTrain",-1)])]),z("ul",sq,[(nn(),mn(un,null,Ws(t,_=>z("li",{key:_.key,class:"nav-item"},[z("a",{href:"#",class:xt(["nav-link",{active:xi(i).activeTab===_.key}]),onClick:ol(x=>xi(r)(_.key),["prevent"])},[z("span",aq,sn(_.icon),1),z("span",null,sn(_.label),1)],10,oq)])),64))]),z("div",lq,[z("div",cq,[z("label",uq,[z("input",{type:"checkbox",checked:xi(i).darkMode,onChange:p[1]||(p[1]=(..._)=>xi(a)&&xi(a)(..._))},null,40,dq),p[4]||(p[4]=z("span",{class:"slider"},[z("span",{class:"icon sun material-icons"},"light_mode"),z("span",{class:"icon moon material-icons"},"dark_mode")],-1))])]),z("button",{class:"navbar-toggler",type:"button",onClick:p[2]||(p[2]=_=>n.value=!n.value)},[...p[5]||(p[5]=[z("span",{class:"material-icons"},"menu",-1)])])])]),z("div",{class:xt(["collapse-menu",n.value?"open":""])},[z("ul",hq,[(nn(),mn(un,null,Ws(t,(_,x)=>z("li",{key:_.key,class:"nav-item",style:Yt({transitionDelay:n.value?`${x*80}ms`:"0ms"})},[z("a",{href:"#",class:xt(["nav-link",{active:xi(i).activeTab===_.key}]),onClick:ol(T=>xi(r)(_.key),["prevent"])},[z("span",mq,sn(_.icon),1),z("span",null,sn(_.label),1)],10,fq)],4)),64))])],2)]))}},QR="/MRT-Map.png",Mf={NSL:["Jurong East","Bukit Batok","Bukit Gombak","Choa Chu Kang","Yew Tee","Kranji","Marsiling","Woodlands","Admiralty","Sembawang","Canberra","Yishun","Khatib","Yio Chu Kang","Ang Mo Kio","Bishan","Braddell","Toa Payoh","Novena","Newton","Orchard","Somerset","Dhoby Ghaut","City Hall","Raffles Place","Marina Bay","Marina South Pier"],EWL:["Pasir Ris","Tampines","Simei","Tanah Merah","Bedok","Kembangan","Eunos","Paya Lebar","Aljunied","Kallang","Lavender","Bugis","City Hall","Raffles Place","Tanjong Pagar","Outram Park","Tiong Bahru","Redhill","Queenstown","Commonwealth","Buona Vista","Dover","Clementi","Jurong East","Chinese Garden","Lakeside","Boon Lay","Pioneer","Joo Koon","Gul Circle","Tuas Crescent","Tuas West Road","Tuas Link"],CGL:["Tanah Merah","Expo","Changi Airport"],DTL:["Bukit Panjang","Cashew","Hillview","Beauty World","King Albert Park","Sixth Avenue","Tan Kah Kee","Botanic Gardens","Stevens","Newton","Little India","Rochor","Bugis","Promenade","Bayfront","Downtown","Telok Ayer","Chinatown","Fort Canning","Bencoolen","Jalan Besar","Bendemeer","Geylang Bahru","Mattar","MacPherson","Ubi","Kaki Bukit","Bedok North","Bedok Reservoir","Tampines West","Tampines","Tampines East","Upper Changi","Expo"],CCL:["Dhoby Ghaut","Bras Basah","Esplanade","Promenade","Bayfront","Nicoll Highway","Stadium","Mountbatten","Dakota","Paya Lebar","MacPherson","Tai Seng","Bartley","Serangoon","Lorong Chuan","Bishan","Marymount","Caldecott","Botanic Gardens","Farrer Road","Holland Village","Buona Vista","one-north","Kent Ridge","Haw Par Villa","Pasir Panjang","Labrador Park","Telok Blangah","HarbourFront"],NEL:["HarbourFront","Outram Park","Chinatown","Clarke Quay","Dhoby Ghaut","Little India","Farrer Park","Boon Keng","Potong Pasir","Woodleigh","Serangoon","Kovan","Hougang","Buangkok","Sengkang","Punggol","Punggol Coast"],TEL:["Woodlands North","Woodlands","Woodlands South","Springleaf","Lentor","Mayflower","Bright Hill","Upper Thomson","Caldecott","Stevens","Napier","Orchard Boulevard","Orchard","Great World","Havelock","Outram Park","Maxwell","Shenton Way","Marina Bay","Gardens By The Bay","Tanjong Rhu","Katong Park","Tanjong Katong","Marine Parade","Marine Terrace","Siglap","Bayshore"],BPL:["Choa Chu Kang","South View","Keat Hong","Teck Whye","Phoenix","Bukit Panjang","Petir","Pending","Bangkit","Fajar","Segar","Jelapang","Senja"],SWPL:["Sengkang","Cheng Lim","Farmway","Kupang","Thanggam","Fernvale","Layar","Tongkang","Renjong"],SEPL:["Sengkang","Compassvale","Rumbia","Bakau","Kangkar","Ranggung"],PEPLRT:["Punggol","Cove","Meridian","Coral Edge","Riviera","Kadaloor","Oasis","Damai"],PWLRT:["Punggol","Sam Kee","Punggol Point","Samudera","Nibong","Sumang","Soo Teck"]},NN=[...new Set(Object.values(Mf).flat())].sort((e,t)=>e.localeCompare(t)),ob={"Jurong East":["North-South Line","East-West Line"],"Bukit Batok":["North-South Line"],"Bukit Gombak":["North-South Line"],"Choa Chu Kang":["North-South Line","LRT Line"],"Yew Tee":["North-South Line"],Kranji:["North-South Line"],Marsiling:["North-South Line"],Woodlands:["North-South Line","Thomson-East Coast Line"],Admiralty:["North-South Line"],Sembawang:["North-South Line"],Canberra:["North-South Line"],Yishun:["North-South Line"],Khatib:["North-South Line"],"Yio Chu Kang":["North-South Line"],"Ang Mo Kio":["North-South Line"],Bishan:["North-South Line","Circle Line"],Braddell:["North-South Line"],"Toa Payoh":["North-South Line"],Novena:["North-South Line"],Newton:["North-South Line","Downtown Line"],Orchard:["North-South Line","Thomson-East Coast Line"],Somerset:["North-South Line"],"Dhoby Ghaut":["North-South Line","North-East Line","Circle Line"],"City Hall":["North-South Line","East-West Line"],"Raffles Place":["North-South Line","East-West Line"],"Marina Bay":["North-South Line","Thomson-East Coast Line"],"Marina South Pier":["North-South Line"],"Pasir Ris":["East-West Line"],Tampines:["East-West Line","Downtown Line"],Simei:["East-West Line"],"Tanah Merah":["East-West Line"],Bedok:["East-West Line"],Kembangan:["East-West Line"],Eunos:["East-West Line"],"Paya Lebar":["East-West Line","Circle Line"],Aljunied:["East-West Line"],Kallang:["East-West Line"],Lavender:["East-West Line"],Bugis:["East-West Line","Downtown Line"],"Tanjong Pagar":["East-West Line"],"Outram Park":["East-West Line","North-East Line","Thomson-East Coast Line"],"Tiong Bahru":["East-West Line"],Redhill:["East-West Line"],Queenstown:["East-West Line"],Commonwealth:["East-West Line"],"Buona Vista":["East-West Line","Circle Line"],Dover:["East-West Line"],Clementi:["East-West Line"],"Chinese Garden":["East-West Line"],Lakeside:["East-West Line"],"Boon Lay":["East-West Line"],Pioneer:["East-West Line"],"Joo Koon":["East-West Line"],"Gul Circle":["East-West Line"],"Tuas Crescent":["East-West Line"],"Tuas West Road":["East-West Line"],"Tuas Link":["East-West Line"],Expo:["Downtown Line"],"Changi Airport":["East-West Line"],"Bukit Panjang":["Downtown Line","LRT Line"],Cashew:["Downtown Line"],Hillview:["Downtown Line"],"Beauty World":["Downtown Line"],"King Albert Park":["Downtown Line"],"Sixth Avenue":["Downtown Line"],"Tan Kah Kee":["Downtown Line"],"Botanic Gardens":["Downtown Line","Circle Line"],Stevens:["Downtown Line","Thomson-East Coast Line"],"Little India":["Downtown Line","North-East Line"],Rochor:["Downtown Line"],Promenade:["Downtown Line","Circle Line"],Bayfront:["Downtown Line","Circle Line"],Downtown:["Downtown Line"],"Telok Ayer":["Downtown Line"],Chinatown:["Downtown Line","North-East Line"],"Fort Canning":["Downtown Line"],Bencoolen:["Downtown Line"],"Jalan Besar":["Downtown Line"],Bendemeer:["Downtown Line"],"Geylang Bahru":["Downtown Line"],Mattar:["Downtown Line"],MacPherson:["Downtown Line","Circle Line"],Ubi:["Downtown Line"],"Kaki Bukit":["Downtown Line"],"Bedok North":["Downtown Line"],"Bedok Reservoir":["Downtown Line"],"Tampines West":["Downtown Line"],"Tampines East":["Downtown Line"],"Upper Changi":["Downtown Line"],"Bras Basah":["Circle Line"],Esplanade:["Circle Line"],"Nicoll Highway":["Circle Line"],Stadium:["Circle Line"],Mountbatten:["Circle Line"],Dakota:["Circle Line"],"Tai Seng":["Circle Line"],Bartley:["Circle Line"],Serangoon:["Circle Line","North-East Line"],"Lorong Chuan":["Circle Line"],Marymount:["Circle Line"],Caldecott:["Circle Line","Thomson-East Coast Line"],"Farrer Road":["Circle Line"],"Holland Village":["Circle Line"],"one-north":["Circle Line"],"Kent Ridge":["Circle Line"],"Haw Par Villa":["Circle Line"],"Pasir Panjang":["Circle Line"],"Labrador Park":["Circle Line"],"Telok Blangah":["Circle Line"],HarbourFront:["Circle Line","North-East Line"],"Clarke Quay":["North-East Line"],"Farrer Park":["North-East Line"],"Boon Keng":["North-East Line"],"Potong Pasir":["North-East Line"],Woodleigh:["North-East Line"],Kovan:["North-East Line"],Hougang:["North-East Line"],Buangkok:["North-East Line"],Sengkang:["North-East Line","LRT Line"],Punggol:["North-East Line","LRT Line"],"Punggol Coast":["North-East Line"],"Woodlands North":["Thomson-East Coast Line"],"Woodlands South":["Thomson-East Coast Line"],Springleaf:["Thomson-East Coast Line"],Lentor:["Thomson-East Coast Line"],Mayflower:["Thomson-East Coast Line"],"Bright Hill":["Thomson-East Coast Line"],"Upper Thomson":["Thomson-East Coast Line"],Napier:["Thomson-East Coast Line"],"Orchard Boulevard":["Thomson-East Coast Line"],"Great World":["Thomson-East Coast Line"],Havelock:["Thomson-East Coast Line"],Maxwell:["Thomson-East Coast Line"],"Shenton Way":["Thomson-East Coast Line"],"Gardens By The Bay":["Thomson-East Coast Line"],"Tanjong Rhu":["Thomson-East Coast Line"],"Katong Park":["Thomson-East Coast Line"],"Tanjong Katong":["Thomson-East Coast Line"],"Marine Parade":["Thomson-East Coast Line"],"Marine Terrace":["Thomson-East Coast Line"],Siglap:["Thomson-East Coast Line"],Bayshore:["Thomson-East Coast Line"],"South View":["LRT Line"],"Keat Hong":["LRT Line"],"Teck Whye":["LRT Line"],Phoenix:["LRT Line"],Petir:["LRT Line"],Pending:["LRT Line"],Bangkit:["LRT Line"],Fajar:["LRT Line"],Segar:["LRT Line"],Jelapang:["LRT Line"],Senja:["LRT Line"],"Cheng Lim":["LRT Line"],Farmway:["LRT Line"],Kupang:["LRT Line"],Thanggam:["LRT Line"],Fernvale:["LRT Line"],Layar:["LRT Line"],Tongkang:["LRT Line"],Renjong:["LRT Line"],Compassvale:["LRT Line"],Rumbia:["LRT Line"],Bakau:["LRT Line"],Kangkar:["LRT Line"],Ranggung:["LRT Line"],Cove:["LRT Line"],Meridian:["LRT Line"],"Coral Edge":["LRT Line"],Riviera:["LRT Line"],Kadaloor:["LRT Line"],Oasis:["LRT Line"],Damai:["LRT Line"],"Sam Kee":["LRT Line"],"Punggol Point":["LRT Line"],Samudera:["LRT Line"],Nibong:["LRT Line"],Sumang:["LRT Line"],"Soo Teck":["LRT Line"]},gq={"North-South Line":"#d42e12","East-West Line":"#009645","Circle Line":"#fa9e0d","Downtown Line":"#005ec4","North-East Line":"#9900aa","Thomson-East Coast Line":"#9d5b25","Jurong Region Line":"#00a0a8","LRT Line":"#748477"},zx=[{station:"Marina Bay",line:"North-South Line"},{station:"Paya Lebar",line:"Circle Line"},{station:"Woodlands",line:"Thomson-East Coast Line"},{station:"Dhoby Ghaut",line:"North-East Line"},{station:"Jurong East",line:"East-West Line"}],vq=5e3,_q={default:{peak:[60,180],shoulder:[120,240],offPeak:[180,360]}},eO={enabled:!0,probability:.2,checkEvery:4,durationRangeSeconds:[180,300]};function pp(e,t){return Math.floor(Math.random()*(t-e+1))+e}function yq(e,t,n){const i=e[t]||e.default,r=i[n]||i.offPeak||e.default.offPeak;return Array.isArray(r)?r:e.default.offPeak}function jE(e=new Date){const t=e.getHours();return t>=7&&t<9||t>=17&&t<20?"peak":t>=6&&t<7||t>=9&&t<11||t>=16&&t<17||t>=20&&t<22?"shoulder":"offPeak"}function WE(e,t,n,i){const[r,a]=yq(e,t,i),l=pp(r,a);return n+l}function Tf(e){return gq[e]||"#6b7280"}function UN(e={}){const t={stationLines:ob,lineIntervals:_q,updateIntervalMs:3e4,trainsPerLine:3,delay:{...eO},...e,delay:{...eO,...e.delay||{}}},n={arrivals:{},delayFlags:{},cycles:0,intervalId:null};function i(k,P){n.arrivals[k]||(n.arrivals[k]={}),Array.isArray(n.arrivals[k][P])||(n.arrivals[k][P]=[])}function r(k,P){i(k,P);const M=n.arrivals[k][P];M.length=0;const R=jE();let F=pp(60,240);for(let B=0;B<t.trainsPerLine;B+=1)M.push(F),F=WE(t.lineIntervals,P,F,R)}function a(){Object.entries(t.stationLines).forEach(([k,P])=>{P.forEach(M=>{i(k,M);const R=n.arrivals[k][M];if(!R.length)r(k,M);else for(;R.length<t.trainsPerLine;){const F=R[R.length-1]||pp(120,480);R.push(WE(t.lineIntervals,M,F,jE()))}})})}function l(k=Date.now()){Object.keys(n.delayFlags).forEach(P=>{const M=n.delayFlags[P];M&&(Object.keys(M).forEach(R=>{M[R]<k&&delete M[R]}),Object.keys(M).length||delete n.delayFlags[P])})}function h(){if(!t.delay.enabled||n.cycles%t.delay.checkEvery!==0||Math.random()>t.delay.probability)return;const k=Object.keys(n.arrivals);if(!k.length)return;const P=k[pp(0,k.length-1)],M=Object.keys(n.arrivals[P]||{});if(!M.length)return;const R=M[pp(0,M.length-1)],F=n.arrivals[P][R];if(!F?.length)return;const[B,H]=t.delay.durationRangeSeconds,G=pp(B,H);for(let ee=0;ee<F.length;ee+=1)F[ee]+=G;n.delayFlags[P]||(n.delayFlags[P]={}),n.delayFlags[P][R]=Date.now()+G*1e3}function s(){n.cycles+=1;const k=t.updateIntervalMs/1e3;l(),Object.entries(n.arrivals).forEach(([P,M])=>{Object.entries(M).forEach(([R,F])=>{for(let B=0;B<F.length;B+=1)F[B]=Math.max(0,F[B]-k);for(;F.length&&F[0]<=0;)F.shift();for(;F.length<t.trainsPerLine;){const B=F.length?F[F.length-1]:pp(120,480);F.push(WE(t.lineIntervals,R,B,jE()))}})}),h()}function p(){a(),n.intervalId===null&&(n.intervalId=setInterval(s,t.updateIntervalMs))}function _(){n.intervalId!==null&&(clearInterval(n.intervalId),n.intervalId=null)}function x({returnSeconds:k=!1}={}){const P={};return Object.entries(n.arrivals).forEach(([M,R])=>{P[M]={},Object.entries(R).forEach(([F,B])=>{P[M][F]=B.map(H=>k?Math.max(0,Math.round(H)):Math.max(0,Math.ceil(H/60)))})}),P}function T(k){return x()[k]||{}}return{config:t,start:p,stop:_,refresh:s,getArrivals:x,getStationArrivals:T}}const bq=()=>{};var tO={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $N=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=r&63|128):(r&64512)===55296&&i+1<e.length&&(e.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(e.charCodeAt(++i)&1023),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=r&63|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=r&63|128)}return t},xq=function(e){const t=[];let n=0,i=0;for(;n<e.length;){const r=e[n++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){const a=e[n++];t[i++]=String.fromCharCode((r&31)<<6|a&63)}else if(r>239&&r<365){const a=e[n++],l=e[n++],h=e[n++],s=((r&7)<<18|(a&63)<<12|(l&63)<<6|h&63)-65536;t[i++]=String.fromCharCode(55296+(s>>10)),t[i++]=String.fromCharCode(56320+(s&1023))}else{const a=e[n++],l=e[n++];t[i++]=String.fromCharCode((r&15)<<12|(a&63)<<6|l&63)}}return t.join("")},jN={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<e.length;r+=3){const a=e[r],l=r+1<e.length,h=l?e[r+1]:0,s=r+2<e.length,p=s?e[r+2]:0,_=a>>2,x=(a&3)<<4|h>>4;let T=(h&15)<<2|p>>6,k=p&63;s||(k=64,l||(T=64)),i.push(n[_],n[x],n[T],n[k])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray($N(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):xq(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<e.length;){const a=n[e.charAt(r++)],h=r<e.length?n[e.charAt(r)]:0;++r;const p=r<e.length?n[e.charAt(r)]:64;++r;const x=r<e.length?n[e.charAt(r)]:64;if(++r,a==null||h==null||p==null||x==null)throw new wq;const T=a<<2|h>>4;if(i.push(T),p!==64){const k=h<<4&240|p>>2;if(i.push(k),x!==64){const P=p<<6&192|x;i.push(P)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class wq extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Tq=function(e){const t=$N(e);return jN.encodeByteArray(t,!0)},o1=function(e){return Tq(e).replace(/\./g,"")},WN=function(e){try{return jN.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sq(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eq=()=>Sq().__FIREBASE_DEFAULTS__,Cq=()=>{if(typeof process>"u"||typeof tO>"u")return;const e=tO.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},kq=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&WN(e[1]);return t&&JSON.parse(t)},fT=()=>{try{return bq()||Eq()||Cq()||kq()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},HN=e=>fT()?.emulatorHosts?.[e],Iq=e=>{const t=HN(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),i]:[t.substring(0,n),i]},GN=()=>fT()?.config,qN=e=>fT()?.[`_${e}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aq{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y_(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function KN(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pq(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=t||"demo-project",r=e.iat||0,a=e.sub||e.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...e};return[o1(JSON.stringify(n)),o1(JSON.stringify(l)),""].join(".")}const ab={};function Mq(){const e={prod:[],emulator:[]};for(const t of Object.keys(ab))ab[t]?e.emulator.push(t):e.prod.push(t);return e}function Dq(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let nO=!1;function XN(e,t){if(typeof window>"u"||typeof document>"u"||!y_(window.location.host)||ab[e]===t||ab[e]||nO)return;ab[e]=t;function n(T){return`__firebase__banner__${T}`}const i="__firebase__banner",a=Mq().prod.length>0;function l(){const T=document.getElementById(i);T&&T.remove()}function h(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function s(T,k){T.setAttribute("width","24"),T.setAttribute("id",k),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function p(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{nO=!0,l()},T}function _(T,k){T.setAttribute("id",k),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function x(){const T=Dq(i),k=n("text"),P=document.getElementById(k)||document.createElement("span"),M=n("learnmore"),R=document.getElementById(M)||document.createElement("a"),F=n("preprendIcon"),B=document.getElementById(F)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const H=T.element;h(H),_(R,M);const G=p();s(B,F),H.append(B,P,R,G),document.body.appendChild(H)}a?(P.innerText="Preview backend disconnected.",B.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(B.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,P.innerText="Preview backend running in this workspace."),P.setAttribute("id",k)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",x):x()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ja(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Lq(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ja())}function Rq(){const e=fT()?.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Oq(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Vq(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function Bq(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Fq(){const e=ja();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function zq(){return!Rq()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Nq(){try{return typeof indexedDB=="object"}catch{return!1}}function Uq(){return new Promise((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{t(r.error?.message||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $q="FirebaseError";class Ch extends Error{constructor(t,n,i){super(n),this.code=t,this.customData=i,this.name=$q,Object.setPrototypeOf(this,Ch.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,p0.prototype.create)}}class p0{constructor(t,n,i){this.service=t,this.serviceName=n,this.errors=i}create(t,...n){const i=n[0]||{},r=`${this.service}/${t}`,a=this.errors[t],l=a?jq(a,i):"Error",h=`${this.serviceName}: ${l} (${r}).`;return new Ch(r,h,i)}}function jq(e,t){return e.replace(Wq,(n,i)=>{const r=t[i];return r!=null?String(r):`<${i}?>`})}const Wq=/\{\$([^}]+)}/g;function Hq(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Zf(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const r of n){if(!i.includes(r))return!1;const a=e[r],l=t[r];if(iO(a)&&iO(l)){if(!Zf(a,l))return!1}else if(a!==l)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function iO(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g0(e){const t=[];for(const[n,i]of Object.entries(e))Array.isArray(i)?i.forEach(r=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function zy(e){const t={};return e.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,a]=i.split("=");t[decodeURIComponent(r)]=decodeURIComponent(a)}}),t}function Ny(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function Gq(e,t){const n=new qq(e,t);return n.subscribe.bind(n)}class qq{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,i){let r;if(t===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");Kq(t,["next","error","complete"])?r=t:r={next:t,error:n,complete:i},r.next===void 0&&(r.next=HE),r.error===void 0&&(r.error=HE),r.complete===void 0&&(r.complete=HE);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),a}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Kq(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function HE(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function No(e){return e&&e._delegate?e._delegate:e}class Np{constructor(t,n,i){this.name=t,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gp="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xq{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const i=new Aq;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t?.identifier),i=t?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(Zq(t))try{this.getOrInitializeService({instanceIdentifier:gp})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:r});i.resolve(a)}catch{}}}}clearInstance(t=gp){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=gp){return this.instances.has(t)}getOptions(t=gp){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[a,l]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(a);i===h&&l.resolve(r)}return r}onInit(t,n){const i=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(i)??new Set;r.add(t),this.onInitCallbacks.set(i,r);const a=this.instances.get(i);return a&&t(a,i),()=>{r.delete(t)}}invokeOnInitCallbacks(t,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:Yq(t),options:n}),this.instances.set(t,i),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=gp){return this.component?this.component.multipleInstances?t:gp:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Yq(e){return e===gp?void 0:e}function Zq(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jq{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new Xq(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Oi;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Oi||(Oi={}));const Qq={debug:Oi.DEBUG,verbose:Oi.VERBOSE,info:Oi.INFO,warn:Oi.WARN,error:Oi.ERROR,silent:Oi.SILENT},eK=Oi.INFO,tK={[Oi.DEBUG]:"log",[Oi.VERBOSE]:"log",[Oi.INFO]:"info",[Oi.WARN]:"warn",[Oi.ERROR]:"error"},nK=(e,t,...n)=>{if(t<e.logLevel)return;const i=new Date().toISOString(),r=tK[t];if(r)console[r](`[${i}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class uA{constructor(t){this.name=t,this._logLevel=eK,this._logHandler=nK,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Oi))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Qq[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Oi.DEBUG,...t),this._logHandler(this,Oi.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Oi.VERBOSE,...t),this._logHandler(this,Oi.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Oi.INFO,...t),this._logHandler(this,Oi.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Oi.WARN,...t),this._logHandler(this,Oi.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Oi.ERROR,...t),this._logHandler(this,Oi.ERROR,...t)}}const iK=(e,t)=>t.some(n=>e instanceof n);let rO,sO;function rK(){return rO||(rO=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function sK(){return sO||(sO=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const YN=new WeakMap,rk=new WeakMap,ZN=new WeakMap,GE=new WeakMap,dA=new WeakMap;function oK(e){const t=new Promise((n,i)=>{const r=()=>{e.removeEventListener("success",a),e.removeEventListener("error",l)},a=()=>{n(Nf(e.result)),r()},l=()=>{i(e.error),r()};e.addEventListener("success",a),e.addEventListener("error",l)});return t.then(n=>{n instanceof IDBCursor&&YN.set(n,e)}).catch(()=>{}),dA.set(t,e),t}function aK(e){if(rk.has(e))return;const t=new Promise((n,i)=>{const r=()=>{e.removeEventListener("complete",a),e.removeEventListener("error",l),e.removeEventListener("abort",l)},a=()=>{n(),r()},l=()=>{i(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",a),e.addEventListener("error",l),e.addEventListener("abort",l)});rk.set(e,t)}let sk={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return rk.get(e);if(t==="objectStoreNames")return e.objectStoreNames||ZN.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Nf(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function lK(e){sk=e(sk)}function cK(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const i=e.call(qE(this),t,...n);return ZN.set(i,t.sort?t.sort():[t]),Nf(i)}:sK().includes(e)?function(...t){return e.apply(qE(this),t),Nf(YN.get(this))}:function(...t){return Nf(e.apply(qE(this),t))}}function uK(e){return typeof e=="function"?cK(e):(e instanceof IDBTransaction&&aK(e),iK(e,rK())?new Proxy(e,sk):e)}function Nf(e){if(e instanceof IDBRequest)return oK(e);if(GE.has(e))return GE.get(e);const t=uK(e);return t!==e&&(GE.set(e,t),dA.set(t,e)),t}const qE=e=>dA.get(e);function dK(e,t,{blocked:n,upgrade:i,blocking:r,terminated:a}={}){const l=indexedDB.open(e,t),h=Nf(l);return i&&l.addEventListener("upgradeneeded",s=>{i(Nf(l.result),s.oldVersion,s.newVersion,Nf(l.transaction),s)}),n&&l.addEventListener("blocked",s=>n(s.oldVersion,s.newVersion,s)),h.then(s=>{a&&s.addEventListener("close",()=>a()),r&&s.addEventListener("versionchange",p=>r(p.oldVersion,p.newVersion,p))}).catch(()=>{}),h}const hK=["get","getKey","getAll","getAllKeys","count"],fK=["put","add","delete","clear"],KE=new Map;function oO(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(KE.get(t))return KE.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,r=fK.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||hK.includes(n)))return;const a=async function(l,...h){const s=this.transaction(l,r?"readwrite":"readonly");let p=s.store;return i&&(p=p.index(h.shift())),(await Promise.all([p[n](...h),r&&s.done]))[0]};return KE.set(t,a),a}lK(e=>({...e,get:(t,n,i)=>oO(t,n)||e.get(t,n,i),has:(t,n)=>!!oO(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mK{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(pK(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function pK(e){return e.getComponent()?.type==="VERSION"}const ok="@firebase/app",aO="0.14.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _h=new uA("@firebase/app"),gK="@firebase/app-compat",vK="@firebase/analytics-compat",_K="@firebase/analytics",yK="@firebase/app-check-compat",bK="@firebase/app-check",xK="@firebase/auth",wK="@firebase/auth-compat",TK="@firebase/database",SK="@firebase/data-connect",EK="@firebase/database-compat",CK="@firebase/functions",kK="@firebase/functions-compat",IK="@firebase/installations",AK="@firebase/installations-compat",PK="@firebase/messaging",MK="@firebase/messaging-compat",DK="@firebase/performance",LK="@firebase/performance-compat",RK="@firebase/remote-config",OK="@firebase/remote-config-compat",VK="@firebase/storage",BK="@firebase/storage-compat",FK="@firebase/firestore",zK="@firebase/ai",NK="@firebase/firestore-compat",UK="firebase",$K="12.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ak="[DEFAULT]",jK={[ok]:"fire-core",[gK]:"fire-core-compat",[_K]:"fire-analytics",[vK]:"fire-analytics-compat",[bK]:"fire-app-check",[yK]:"fire-app-check-compat",[xK]:"fire-auth",[wK]:"fire-auth-compat",[TK]:"fire-rtdb",[SK]:"fire-data-connect",[EK]:"fire-rtdb-compat",[CK]:"fire-fn",[kK]:"fire-fn-compat",[IK]:"fire-iid",[AK]:"fire-iid-compat",[PK]:"fire-fcm",[MK]:"fire-fcm-compat",[DK]:"fire-perf",[LK]:"fire-perf-compat",[RK]:"fire-rc",[OK]:"fire-rc-compat",[VK]:"fire-gcs",[BK]:"fire-gcs-compat",[FK]:"fire-fst",[NK]:"fire-fst-compat",[zK]:"fire-vertex","fire-js":"fire-js",[UK]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a1=new Map,WK=new Map,lk=new Map;function lO(e,t){try{e.container.addComponent(t)}catch(n){_h.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Xv(e){const t=e.name;if(lk.has(t))return _h.debug(`There were multiple attempts to register component ${t}.`),!1;lk.set(t,e);for(const n of a1.values())lO(n,e);for(const n of WK.values())lO(n,e);return!0}function hA(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Dc(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HK={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Uf=new p0("app","Firebase",HK);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GK{constructor(t,n,i){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Np("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Uf.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b_=$K;function JN(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const i={name:ak,automaticDataCollectionEnabled:!0,...t},r=i.name;if(typeof r!="string"||!r)throw Uf.create("bad-app-name",{appName:String(r)});if(n||(n=GN()),!n)throw Uf.create("no-options");const a=a1.get(r);if(a){if(Zf(n,a.options)&&Zf(i,a.config))return a;throw Uf.create("duplicate-app",{appName:r})}const l=new Jq(r);for(const s of lk.values())l.addComponent(s);const h=new GK(n,i,l);return a1.set(r,h),h}function QN(e=ak){const t=a1.get(e);if(!t&&e===ak&&GN())return JN();if(!t)throw Uf.create("no-app",{appName:e});return t}function $f(e,t,n){let i=jK[e]??e;n&&(i+=`-${n}`);const r=i.match(/\s|\//),a=t.match(/\s|\//);if(r||a){const l=[`Unable to register library "${i}" with version "${t}":`];r&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&a&&l.push("and"),a&&l.push(`version name "${t}" contains illegal characters (whitespace or "/")`),_h.warn(l.join(" "));return}Xv(new Np(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qK="firebase-heartbeat-database",KK=1,Db="firebase-heartbeat-store";let XE=null;function e5(){return XE||(XE=dK(qK,KK,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(Db)}catch(n){console.warn(n)}}}}).catch(e=>{throw Uf.create("idb-open",{originalErrorMessage:e.message})})),XE}async function XK(e){try{const n=(await e5()).transaction(Db),i=await n.objectStore(Db).get(t5(e));return await n.done,i}catch(t){if(t instanceof Ch)_h.warn(t.message);else{const n=Uf.create("idb-get",{originalErrorMessage:t?.message});_h.warn(n.message)}}}async function cO(e,t){try{const i=(await e5()).transaction(Db,"readwrite");await i.objectStore(Db).put(t,t5(e)),await i.done}catch(n){if(n instanceof Ch)_h.warn(n.message);else{const i=Uf.create("idb-set",{originalErrorMessage:n?.message});_h.warn(i.message)}}}function t5(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YK=1024,ZK=30;class JK{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new eX(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=uO();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(r=>r.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats.length>ZK){const r=tX(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(r,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){_h.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=uO(),{heartbeatsToSend:n,unsentEntries:i}=QK(this._heartbeatsCache.heartbeats),r=o1(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(t){return _h.warn(t),""}}}function uO(){return new Date().toISOString().substring(0,10)}function QK(e,t=YK){const n=[];let i=e.slice();for(const r of e){const a=n.find(l=>l.agent===r.agent);if(a){if(a.dates.push(r.date),dO(n)>t){a.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),dO(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class eX{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Nq()?Uq().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await XK(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return cO(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return cO(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function dO(e){return o1(JSON.stringify({version:2,heartbeats:e})).length}function tX(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let i=1;i<e.length;i++)e[i].date<n&&(n=e[i].date,t=i);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nX(e){Xv(new Np("platform-logger",t=>new mK(t),"PRIVATE")),Xv(new Np("heartbeat",t=>new JK(t),"PRIVATE")),$f(ok,aO,e),$f(ok,aO,"esm2020"),$f("fire-js","")}nX("");var iX="firebase",rX="12.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$f(iX,rX,"app");function n5(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const sX=n5,i5=new p0("auth","Firebase",n5());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l1=new uA("@firebase/auth");function oX(e,...t){l1.logLevel<=Oi.WARN&&l1.warn(`Auth (${b_}): ${e}`,...t)}function ww(e,...t){l1.logLevel<=Oi.ERROR&&l1.error(`Auth (${b_}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pu(e,...t){throw fA(e,...t)}function Zu(e,...t){return fA(e,...t)}function r5(e,t,n){const i={...sX(),[t]:n};return new p0("auth","Firebase",i).create(t,{appName:e.name})}function fh(e){return r5(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function fA(e,...t){if(typeof e!="string"){const n=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=e.name),e._errorFactory.create(n,...i)}return i5.create(e,...t)}function hi(e,t,...n){if(!e)throw fA(t,...n)}function lh(e){const t="INTERNAL ASSERTION FAILED: "+e;throw ww(t),new Error(t)}function yh(e,t){e||lh(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ck(){return typeof self<"u"&&self.location?.href||""}function aX(){return hO()==="http:"||hO()==="https:"}function hO(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lX(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(aX()||Vq()||"connection"in navigator)?navigator.onLine:!0}function cX(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v0{constructor(t,n){this.shortDelay=t,this.longDelay=n,yh(n>t,"Short delay should be less than long delay!"),this.isMobile=Lq()||Bq()}get(){return lX()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mA(e,t){yh(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s5{static initialize(t,n,i){this.fetchImpl=t,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;lh("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;lh("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;lh("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uX={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dX=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],hX=new v0(3e4,6e4);function kh(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function Ih(e,t,n,i,r={}){return o5(e,r,async()=>{let a={},l={};i&&(t==="GET"?l=i:a={body:JSON.stringify(i)});const h=g0({key:e.config.apiKey,...l}).slice(1),s=await e._getAdditionalHeaders();s["Content-Type"]="application/json",e.languageCode&&(s["X-Firebase-Locale"]=e.languageCode);const p={method:t,headers:s,...a};return Oq()||(p.referrerPolicy="no-referrer"),e.emulatorConfig&&y_(e.emulatorConfig.host)&&(p.credentials="include"),s5.fetch()(await a5(e,e.config.apiHost,n,h),p)})}async function o5(e,t,n){e._canInitEmulator=!1;const i={...uX,...t};try{const r=new mX(e),a=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const l=await a.json();if("needConfirmation"in l)throw Nx(e,"account-exists-with-different-credential",l);if(a.ok&&!("errorMessage"in l))return l;{const h=a.ok?l.errorMessage:l.error.message,[s,p]=h.split(" : ");if(s==="FEDERATED_USER_ID_ALREADY_LINKED")throw Nx(e,"credential-already-in-use",l);if(s==="EMAIL_EXISTS")throw Nx(e,"email-already-in-use",l);if(s==="USER_DISABLED")throw Nx(e,"user-disabled",l);const _=i[s]||s.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw r5(e,_,p);pu(e,_)}}catch(r){if(r instanceof Ch)throw r;pu(e,"network-request-failed",{message:String(r)})}}async function _0(e,t,n,i,r={}){const a=await Ih(e,t,n,i,r);return"mfaPendingCredential"in a&&pu(e,"multi-factor-auth-required",{_serverResponse:a}),a}async function a5(e,t,n,i){const r=`${t}${n}?${i}`,a=e,l=a.config.emulator?mA(e.config,r):`${e.config.apiScheme}://${r}`;return dX.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(l).toString():l}function fX(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class mX{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Zu(this.auth,"network-request-failed")),hX.get())})}}function Nx(e,t,n){const i={appName:e.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Zu(e,t,i);return r.customData._tokenResponse=n,r}function fO(e){return e!==void 0&&e.enterprise!==void 0}class pX{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===t)return fX(n.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function gX(e,t){return Ih(e,"GET","/v2/recaptchaConfig",kh(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vX(e,t){return Ih(e,"POST","/v1/accounts:delete",t)}async function c1(e,t){return Ih(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lb(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function _X(e,t=!1){const n=No(e),i=await n.getIdToken(t),r=pA(i);hi(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const a=typeof r.firebase=="object"?r.firebase:void 0,l=a?.sign_in_provider;return{claims:r,token:i,authTime:lb(YE(r.auth_time)),issuedAtTime:lb(YE(r.iat)),expirationTime:lb(YE(r.exp)),signInProvider:l||null,signInSecondFactor:a?.sign_in_second_factor||null}}function YE(e){return Number(e)*1e3}function pA(e){const[t,n,i]=e.split(".");if(t===void 0||n===void 0||i===void 0)return ww("JWT malformed, contained fewer than 3 sections"),null;try{const r=WN(n);return r?JSON.parse(r):(ww("Failed to decode base64 JWT payload"),null)}catch(r){return ww("Caught error parsing JWT payload as JSON",r?.toString()),null}}function mO(e){const t=pA(e);return hi(t,"internal-error"),hi(typeof t.exp<"u","internal-error"),hi(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lb(e,t,n=!1){if(n)return t;try{return await t}catch(i){throw i instanceof Ch&&yX(i)&&e.auth.currentUser===e&&await e.auth.signOut(),i}}function yX({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bX{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uk{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=lb(this.lastLoginAt),this.creationTime=lb(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u1(e){const t=e.auth,n=await e.getIdToken(),i=await Lb(e,c1(t,{idToken:n}));hi(i?.users.length,t,"internal-error");const r=i.users[0];e._notifyReloadListener(r);const a=r.providerUserInfo?.length?l5(r.providerUserInfo):[],l=wX(e.providerData,a),h=e.isAnonymous,s=!(e.email&&r.passwordHash)&&!l?.length,p=h?s:!1,_={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:l,metadata:new uk(r.createdAt,r.lastLoginAt),isAnonymous:p};Object.assign(e,_)}async function xX(e){const t=No(e);await u1(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function wX(e,t){return[...e.filter(i=>!t.some(r=>r.providerId===i.providerId)),...t]}function l5(e){return e.map(({providerId:t,...n})=>({providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TX(e,t){const n=await o5(e,{},async()=>{const i=g0({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:a}=e.config,l=await a5(e,r,"/v1/token",`key=${a}`),h=await e._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const s={method:"POST",headers:h,body:i};return e.emulatorConfig&&y_(e.emulatorConfig.host)&&(s.credentials="include"),s5.fetch()(l,s)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function SX(e,t){return Ih(e,"POST","/v2/accounts:revokeToken",kh(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){hi(t.idToken,"internal-error"),hi(typeof t.idToken<"u","internal-error"),hi(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):mO(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){hi(t.length!==0,"internal-error");const n=mO(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(hi(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:i,refreshToken:r,expiresIn:a}=await TX(t,n);this.updateTokensAndExpiration(i,r,Number(a))}updateTokensAndExpiration(t,n,i){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,n){const{refreshToken:i,accessToken:r,expirationTime:a}=n,l=new Mv;return i&&(hi(typeof i=="string","internal-error",{appName:t}),l.refreshToken=i),r&&(hi(typeof r=="string","internal-error",{appName:t}),l.accessToken=r),a&&(hi(typeof a=="number","internal-error",{appName:t}),l.expirationTime=a),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Mv,this.toJSON())}_performRefresh(){return lh("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pf(e,t){hi(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class cu{constructor({uid:t,auth:n,stsTokenManager:i,...r}){this.providerId="firebase",this.proactiveRefresh=new bX(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new uk(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(t){const n=await Lb(this,this.stsTokenManager.getToken(this.auth,t));return hi(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return _X(this,t)}reload(){return xX(this)}_assign(t){this!==t&&(hi(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>({...n})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new cu({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(t){hi(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),n&&await u1(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Dc(this.auth.app))return Promise.reject(fh(this.auth));const t=await this.getIdToken();return await Lb(this,vX(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){const i=n.displayName??void 0,r=n.email??void 0,a=n.phoneNumber??void 0,l=n.photoURL??void 0,h=n.tenantId??void 0,s=n._redirectEventId??void 0,p=n.createdAt??void 0,_=n.lastLoginAt??void 0,{uid:x,emailVerified:T,isAnonymous:k,providerData:P,stsTokenManager:M}=n;hi(x&&M,t,"internal-error");const R=Mv.fromJSON(this.name,M);hi(typeof x=="string",t,"internal-error"),pf(i,t.name),pf(r,t.name),hi(typeof T=="boolean",t,"internal-error"),hi(typeof k=="boolean",t,"internal-error"),pf(a,t.name),pf(l,t.name),pf(h,t.name),pf(s,t.name),pf(p,t.name),pf(_,t.name);const F=new cu({uid:x,auth:t,email:r,emailVerified:T,displayName:i,isAnonymous:k,photoURL:l,phoneNumber:a,tenantId:h,stsTokenManager:R,createdAt:p,lastLoginAt:_});return P&&Array.isArray(P)&&(F.providerData=P.map(B=>({...B}))),s&&(F._redirectEventId=s),F}static async _fromIdTokenResponse(t,n,i=!1){const r=new Mv;r.updateFromServerResponse(n);const a=new cu({uid:n.localId,auth:t,stsTokenManager:r,isAnonymous:i});return await u1(a),a}static async _fromGetAccountInfoResponse(t,n,i){const r=n.users[0];hi(r.localId!==void 0,"internal-error");const a=r.providerUserInfo!==void 0?l5(r.providerUserInfo):[],l=!(r.email&&r.passwordHash)&&!a?.length,h=new Mv;h.updateFromIdToken(i);const s=new cu({uid:r.localId,auth:t,stsTokenManager:h,isAnonymous:l}),p={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new uk(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!a?.length};return Object.assign(s,p),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pO=new Map;function ch(e){yh(e instanceof Function,"Expected a class definition");let t=pO.get(e);return t?(yh(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,pO.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c5{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}c5.type="NONE";const gO=c5;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tw(e,t,n){return`firebase:${e}:${t}:${n}`}class Dv{constructor(t,n,i){this.persistence=t,this.auth=n,this.userKey=i;const{config:r,name:a}=this.auth;this.fullUserKey=Tw(this.userKey,r.apiKey,a),this.fullPersistenceKey=Tw("persistence",r.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await c1(this.auth,{idToken:t}).catch(()=>{});return n?cu._fromGetAccountInfoResponse(this.auth,n,t):null}return cu._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,i="authUser"){if(!n.length)return new Dv(ch(gO),t,i);const r=(await Promise.all(n.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let a=r[0]||ch(gO);const l=Tw(i,t.config.apiKey,t.name);let h=null;for(const p of n)try{const _=await p._get(l);if(_){let x;if(typeof _=="string"){const T=await c1(t,{idToken:_}).catch(()=>{});if(!T)break;x=await cu._fromGetAccountInfoResponse(t,T,_)}else x=cu._fromJSON(t,_);p!==a&&(h=x),a=p;break}}catch{}const s=r.filter(p=>p._shouldAllowMigration);return!a._shouldAllowMigration||!s.length?new Dv(a,t,i):(a=s[0],h&&await a._set(l,h.toJSON()),await Promise.all(n.map(async p=>{if(p!==a)try{await p._remove(l)}catch{}})),new Dv(a,t,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vO(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(f5(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(u5(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(p5(t))return"Blackberry";if(g5(t))return"Webos";if(d5(t))return"Safari";if((t.includes("chrome/")||h5(t))&&!t.includes("edge/"))return"Chrome";if(m5(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=e.match(n);if(i?.length===2)return i[1]}return"Other"}function u5(e=ja()){return/firefox\//i.test(e)}function d5(e=ja()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function h5(e=ja()){return/crios\//i.test(e)}function f5(e=ja()){return/iemobile/i.test(e)}function m5(e=ja()){return/android/i.test(e)}function p5(e=ja()){return/blackberry/i.test(e)}function g5(e=ja()){return/webos/i.test(e)}function gA(e=ja()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function EX(e=ja()){return gA(e)&&!!window.navigator?.standalone}function CX(){return Fq()&&document.documentMode===10}function v5(e=ja()){return gA(e)||m5(e)||g5(e)||p5(e)||/windows phone/i.test(e)||f5(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _5(e,t=[]){let n;switch(e){case"Browser":n=vO(ja());break;case"Worker":n=`${vO(ja())}-${e}`;break;default:n=e}const i=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${b_}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kX{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const i=a=>new Promise((l,h)=>{try{const s=t(a);l(s)}catch(s){h(s)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const i of this.queue)await i(t),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IX(e,t={}){return Ih(e,"GET","/v2/passwordPolicy",kh(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AX=6;class PX{constructor(t){const n=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??AX,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=t.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,n),this.validatePasswordCharacterOptions(t,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(t,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=t.length>=i),r&&(n.meetsMaxPasswordLength=t.length<=r)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<t.length;r++)i=t.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(t,n,i,r,a){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MX{constructor(t,n,i,r){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _O(this),this.idTokenSubscription=new _O(this),this.beforeStateQueue=new kX(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=i5,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=ch(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Dv.create(this,t),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await c1(this,{idToken:t}),i=await cu._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){if(Dc(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=this.redirectUser?._redirectEventId,l=i?._redirectEventId,h=await this.tryRedirectSignIn(t);(!a||a===l)&&h?.user&&(i=h.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return hi(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await u1(t)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=cX()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Dc(this.app))return Promise.reject(fh(this));const n=t?No(t):null;return n&&hi(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&hi(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Dc(this.app)?Promise.reject(fh(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Dc(this.app)?Promise.reject(fh(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ch(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await IX(this),n=new PX(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new p0("auth","Firebase",t())}onAuthStateChanged(t,n,i){return this.registerStateListener(this.authStateSubscription,t,n,i)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,i){return this.registerStateListener(this.idTokenSubscription,t,n,i)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const i=this.onAuthStateChanged(()=>{i(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await SX(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(t,n){const i=await this.getOrInitRedirectPersistenceManager(n);return t===null?i.removeCurrentUser():i.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&ch(t)||this._popupRedirectResolver;hi(n,this,"argument-error"),this.redirectPersistenceManager=await Dv.create(this,[ch(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===t?this._currentUser:this.redirectUser?._redirectEventId===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=this.currentUser?.uid??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,i,r){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let l=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(hi(h,this,"internal-error"),h.then(()=>{l||a(this.currentUser)}),typeof n=="function"){const s=t.addObserver(n,i,r);return()=>{l=!0,s()}}else{const s=t.addObserver(n);return()=>{l=!0,s()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return hi(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=_5(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(t["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){if(Dc(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return t?.error&&oX(`Error while retrieving App Check token: ${t.error}`),t?.token}}function hm(e){return No(e)}class _O{constructor(t){this.auth=t,this.observer=null,this.addObserver=Gq(n=>this.observer=n)}get next(){return hi(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mT={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function DX(e){mT=e}function y5(e){return mT.loadJS(e)}function LX(){return mT.recaptchaEnterpriseScript}function RX(){return mT.gapiScript}function OX(e){return`__${e}${Math.floor(Math.random()*1e6)}`}class VX{constructor(){this.enterprise=new BX}ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}class BX{ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}const FX="recaptcha-enterprise",b5="NO_RECAPTCHA";class zX{constructor(t){this.type=FX,this.auth=hm(t)}async verify(t="verify",n=!1){async function i(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(l,h)=>{gX(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(s=>{if(s.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const p=new pX(s);return a.tenantId==null?a._agentRecaptchaConfig=p:a._tenantRecaptchaConfigs[a.tenantId]=p,l(p.siteKey)}}).catch(s=>{h(s)})})}function r(a,l,h){const s=window.grecaptcha;fO(s)?s.enterprise.ready(()=>{s.enterprise.execute(a,{action:t}).then(p=>{l(p)}).catch(()=>{l(b5)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new VX().execute("siteKey",{action:"verify"}):new Promise((a,l)=>{i(this.auth).then(h=>{if(!n&&fO(window.grecaptcha))r(h,a,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let s=LX();s.length!==0&&(s+=h),y5(s).then(()=>{r(h,a,l)}).catch(p=>{l(p)})}}).catch(h=>{l(h)})})}}async function yO(e,t,n,i=!1,r=!1){const a=new zX(e);let l;if(r)l=b5;else try{l=await a.verify(n)}catch{l=await a.verify(n,!0)}const h={...t};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const s=h.phoneEnrollmentInfo.phoneNumber,p=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:s,recaptchaToken:p,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const s=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:s,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return i?Object.assign(h,{captchaResp:l}):Object.assign(h,{captchaResponse:l}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function d1(e,t,n,i,r){if(e._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await yO(e,t,n,n==="getOobCode");return i(e,a)}else return i(e,t).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await yO(e,t,n,n==="getOobCode");return i(e,l)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NX(e,t){const n=hA(e,"auth");if(n.isInitialized()){const r=n.getImmediate(),a=n.getOptions();if(Zf(a,t??{}))return r;pu(r,"already-initialized")}return n.initialize({options:t})}function UX(e,t){const n=t?.persistence||[],i=(Array.isArray(n)?n:[n]).map(ch);t?.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(i,t?.popupRedirectResolver)}function $X(e,t,n){const i=hm(e);hi(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const r=!1,a=x5(t),{host:l,port:h}=jX(t),s=h===null?"":`:${h}`,p={url:`${a}//${l}${s}/`},_=Object.freeze({host:l,port:h,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){hi(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),hi(Zf(p,i.config.emulator)&&Zf(_,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=p,i.emulatorConfig=_,i.settings.appVerificationDisabledForTesting=!0,y_(l)?(KN(`${a}//${l}${s}`),XN("Auth",!0)):WX()}function x5(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function jX(e){const t=x5(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const a=r[1];return{host:a,port:bO(i.substr(a.length+1))}}else{const[a,l]=i.split(":");return{host:a,port:bO(l)}}}function bO(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function WX(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return lh("not implemented")}_getIdTokenResponse(t){return lh("not implemented")}_linkToIdToken(t,n){return lh("not implemented")}_getReauthenticationResolver(t){return lh("not implemented")}}async function HX(e,t){return Ih(e,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GX(e,t){return _0(e,"POST","/v1/accounts:signInWithPassword",kh(e,t))}async function qX(e,t){return Ih(e,"POST","/v1/accounts:sendOobCode",kh(e,t))}async function KX(e,t){return qX(e,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XX(e,t){return _0(e,"POST","/v1/accounts:signInWithEmailLink",kh(e,t))}async function YX(e,t){return _0(e,"POST","/v1/accounts:signInWithEmailLink",kh(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rb extends vA{constructor(t,n,i,r=null){super("password",i),this._email=t,this._password=n,this._tenantId=r}static _fromEmailAndPassword(t,n){return new Rb(t,n,"password")}static _fromEmailAndCode(t,n,i=null){return new Rb(t,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return d1(t,n,"signInWithPassword",GX);case"emailLink":return XX(t,{email:this._email,oobCode:this._password});default:pu(t,"internal-error")}}async _linkToIdToken(t,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return d1(t,i,"signUpPassword",HX);case"emailLink":return YX(t,{idToken:n,email:this._email,oobCode:this._password});default:pu(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lv(e,t){return _0(e,"POST","/v1/accounts:signInWithIdp",kh(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZX="http://localhost";class Up extends vA{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new Up(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):pu("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:r,...a}=n;if(!i||!r)return null;const l=new Up(i,r);return l.idToken=a.idToken||void 0,l.accessToken=a.accessToken||void 0,l.secret=a.secret,l.nonce=a.nonce,l.pendingToken=a.pendingToken||null,l}_getIdTokenResponse(t){const n=this.buildRequest();return Lv(t,n)}_linkToIdToken(t,n){const i=this.buildRequest();return i.idToken=n,Lv(t,i)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,Lv(t,n)}buildRequest(){const t={requestUri:ZX,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=g0(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JX(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function QX(e){const t=zy(Ny(e)).link,n=t?zy(Ny(t)).deep_link_id:null,i=zy(Ny(e)).deep_link_id;return(i?zy(Ny(i)).link:null)||i||n||t||e}class _A{constructor(t){const n=zy(Ny(t)),i=n.apiKey??null,r=n.oobCode??null,a=JX(n.mode??null);hi(i&&r&&a,"argument-error"),this.apiKey=i,this.operation=a,this.code=r,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(t){const n=QX(t);try{return new _A(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng{constructor(){this.providerId=ng.PROVIDER_ID}static credential(t,n){return Rb._fromEmailAndPassword(t,n)}static credentialWithLink(t,n){const i=_A.parseLink(n);return hi(i,"argument-error"),Rb._fromEmailAndCode(t,i.code,i.tenantId)}}ng.PROVIDER_ID="password";ng.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ng.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w5{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0 extends w5{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf extends y0{constructor(){super("facebook.com")}static credential(t){return Up._fromParams({providerId:Sf.PROVIDER_ID,signInMethod:Sf.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Sf.credentialFromTaggedObject(t)}static credentialFromError(t){return Sf.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Sf.credential(t.oauthAccessToken)}catch{return null}}}Sf.FACEBOOK_SIGN_IN_METHOD="facebook.com";Sf.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef extends y0{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return Up._fromParams({providerId:Ef.PROVIDER_ID,signInMethod:Ef.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Ef.credentialFromTaggedObject(t)}static credentialFromError(t){return Ef.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:i}=t;if(!n&&!i)return null;try{return Ef.credential(n,i)}catch{return null}}}Ef.GOOGLE_SIGN_IN_METHOD="google.com";Ef.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf extends y0{constructor(){super("github.com")}static credential(t){return Up._fromParams({providerId:Cf.PROVIDER_ID,signInMethod:Cf.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Cf.credentialFromTaggedObject(t)}static credentialFromError(t){return Cf.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Cf.credential(t.oauthAccessToken)}catch{return null}}}Cf.GITHUB_SIGN_IN_METHOD="github.com";Cf.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf extends y0{constructor(){super("twitter.com")}static credential(t,n){return Up._fromParams({providerId:kf.PROVIDER_ID,signInMethod:kf.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return kf.credentialFromTaggedObject(t)}static credentialFromError(t){return kf.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=t;if(!n||!i)return null;try{return kf.credential(n,i)}catch{return null}}}kf.TWITTER_SIGN_IN_METHOD="twitter.com";kf.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eY(e,t){return _0(e,"POST","/v1/accounts:signUp",kh(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,i,r=!1){const a=await cu._fromIdTokenResponse(t,i,r),l=xO(i);return new $p({user:a,providerId:l,_tokenResponse:i,operationType:n})}static async _forOperation(t,n,i){await t._updateTokensIfNecessary(i,!0);const r=xO(i);return new $p({user:t,providerId:r,_tokenResponse:i,operationType:n})}}function xO(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1 extends Ch{constructor(t,n,i,r){super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,h1.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,n,i,r){return new h1(t,n,i,r)}}function T5(e,t,n,i){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?h1._fromErrorAndOperation(e,a,t,i):a})}async function tY(e,t,n=!1){const i=await Lb(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return $p._forOperation(e,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S5(e,t,n=!1){const{auth:i}=e;if(Dc(i.app))return Promise.reject(fh(i));const r="reauthenticate";try{const a=await Lb(e,T5(i,r,t,e),n);hi(a.idToken,i,"internal-error");const l=pA(a.idToken);hi(l,i,"internal-error");const{sub:h}=l;return hi(e.uid===h,i,"user-mismatch"),$p._forOperation(e,r,a)}catch(a){throw a?.code==="auth/user-not-found"&&pu(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E5(e,t,n=!1){if(Dc(e.app))return Promise.reject(fh(e));const i="signIn",r=await T5(e,i,t),a=await $p._fromIdTokenResponse(e,i,r);return n||await e._updateCurrentUser(a.user),a}async function nY(e,t){return E5(hm(e),t)}async function iY(e,t){return S5(No(e),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C5(e){const t=hm(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function rY(e,t,n){const i=hm(e);await d1(i,{requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"},"getOobCode",KX)}async function sY(e,t,n){if(Dc(e.app))return Promise.reject(fh(e));const i=hm(e),l=await d1(i,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",eY).catch(s=>{throw s.code==="auth/password-does-not-meet-requirements"&&C5(e),s}),h=await $p._fromIdTokenResponse(i,"signIn",l);return await i._updateCurrentUser(h.user),h}function oY(e,t,n){return Dc(e.app)?Promise.reject(fh(e)):nY(No(e),ng.credential(t,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&C5(e),i})}function aY(e,t,n,i){return No(e).onIdTokenChanged(t,n,i)}function lY(e,t,n){return No(e).beforeAuthStateChanged(t,n)}function cY(e,t,n,i){return No(e).onAuthStateChanged(t,n,i)}function uY(e){return No(e).signOut()}async function dY(e){return No(e).delete()}const f1="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k5{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(f1,"1"),this.storage.removeItem(f1),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hY=1e3,fY=10;class I5 extends k5{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=v5(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&t(n,r,i)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((l,h,s)=>{this.notifyListeners(l,s)});return}const i=t.key;n?this.detachListener():this.stopPolling();const r=()=>{const l=this.storage.getItem(i);!n&&this.localCache[i]===l||this.notifyListeners(i,l)},a=this.storage.getItem(i);CX()&&a!==t.newValue&&t.newValue!==t.oldValue?setTimeout(r,fY):r()}notifyListeners(t,n){this.localCache[t]=n;const i=this.listeners[t];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:i}),!0)})},hY)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}I5.type="LOCAL";const mY=I5;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A5 extends k5{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}A5.type="SESSION";const P5=A5;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pY(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(r=>r.isListeningto(t));if(n)return n;const i=new pT(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:i,eventType:r,data:a}=n.data,l=this.handlersMap[r];if(!l?.size)return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const h=Array.from(l).map(async p=>p(n.origin,a)),s=await pY(h);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:s})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}pT.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yA(e="",t=10){let n="";for(let i=0;i<t;i++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gY{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let a,l;return new Promise((h,s)=>{const p=yA("",20);r.port1.start();const _=setTimeout(()=>{s(new Error("unsupported_event"))},i);l={messageChannel:r,onMessage(x){const T=x;if(T.data.eventId===p)switch(T.data.status){case"ack":clearTimeout(_),a=setTimeout(()=>{s(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),h(T.data.response);break;default:clearTimeout(_),clearTimeout(a),s(new Error("invalid_response"));break}}},this.handlers.add(l),r.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:t,eventId:p,data:n},[r.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ju(){return window}function vY(e){Ju().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M5(){return typeof Ju().WorkerGlobalScope<"u"&&typeof Ju().importScripts=="function"}async function _Y(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function yY(){return navigator?.serviceWorker?.controller||null}function bY(){return M5()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D5="firebaseLocalStorageDb",xY=1,m1="firebaseLocalStorage",L5="fbase_key";class b0{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function gT(e,t){return e.transaction([m1],t?"readwrite":"readonly").objectStore(m1)}function wY(){const e=indexedDB.deleteDatabase(D5);return new b0(e).toPromise()}function dk(){const e=indexedDB.open(D5,xY);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const i=e.result;try{i.createObjectStore(m1,{keyPath:L5})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const i=e.result;i.objectStoreNames.contains(m1)?t(i):(i.close(),await wY(),t(await dk()))})})}async function wO(e,t,n){const i=gT(e,!0).put({[L5]:t,value:n});return new b0(i).toPromise()}async function TY(e,t){const n=gT(e,!1).get(t),i=await new b0(n).toPromise();return i===void 0?null:i.value}function TO(e,t){const n=gT(e,!0).delete(t);return new b0(n).toPromise()}const SY=800,EY=3;class R5{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await dk(),this.db)}async _withRetries(t){let n=0;for(;;)try{const i=await this._openDb();return await t(i)}catch(i){if(n++>EY)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return M5()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=pT._getInstance(bY()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await _Y(),!this.activeServiceWorker)return;this.sender=new gY(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||yY()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await dk();return await wO(t,f1,"1"),await TO(t,f1),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>wO(i,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(i=>TY(i,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>TO(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(r=>{const a=gT(r,!1).getAll();return new b0(a).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(t.length!==0)for(const{fbase_key:r,value:a}of t)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(a)&&(this.notifyListeners(r,a),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(t,n){this.localCache[t]=n;const i=this.listeners[t];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),SY)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}R5.type="LOCAL";const CY=R5;new v0(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kY(e,t){return t?ch(t):(hi(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA extends vA{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Lv(t,this._buildIdpRequest())}_linkToIdToken(t,n){return Lv(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return Lv(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function IY(e){return E5(e.auth,new bA(e),e.bypassAuthState)}function AY(e){const{auth:t,user:n}=e;return hi(n,t,"internal-error"),S5(n,new bA(e),e.bypassAuthState)}async function PY(e){const{auth:t,user:n}=e;return hi(n,t,"internal-error"),tY(n,new bA(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O5{constructor(t,n,i,r,a=!1){this.auth=t,this.resolver=i,this.user=r,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:i,postBody:r,tenantId:a,error:l,type:h}=t;if(l){this.reject(l);return}const s={auth:this.auth,requestUri:n,sessionId:i,tenantId:a||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(s))}catch(p){this.reject(p)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return IY;case"linkViaPopup":case"linkViaRedirect":return PY;case"reauthViaPopup":case"reauthViaRedirect":return AY;default:pu(this.auth,"internal-error")}}resolve(t){yh(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){yh(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MY=new v0(2e3,1e4);class _v extends O5{constructor(t,n,i,r,a){super(t,n,r,a),this.provider=i,this.authWindow=null,this.pollId=null,_v.currentPopupAction&&_v.currentPopupAction.cancel(),_v.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return hi(t,this.auth,"internal-error"),t}async onExecution(){yh(this.filter.length===1,"Popup operations only handle one event");const t=yA();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Zu(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Zu(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_v.currentPopupAction=null}pollUserCancellation(){const t=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Zu(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,MY.get())};t()}}_v.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DY="pendingRedirect",Sw=new Map;class LY extends O5{constructor(t,n,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let t=Sw.get(this.auth._key());if(!t){try{const i=await RY(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(i)}catch(n){t=()=>Promise.reject(n)}Sw.set(this.auth._key(),t)}return this.bypassAuthState||Sw.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function RY(e,t){const n=BY(t),i=VY(e);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function OY(e,t){Sw.set(e._key(),t)}function VY(e){return ch(e._redirectPersistence)}function BY(e){return Tw(DY,e.config.apiKey,e.name)}async function FY(e,t,n=!1){if(Dc(e.app))return Promise.reject(fh(e));const i=hm(e),r=kY(i,t),l=await new LY(i,r,n).execute();return l&&!n&&(delete l.user._redirectEventId,await i._persistUserIfCurrent(l.user),await i._setRedirectUser(null,t)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zY=600*1e3;class NY{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(n=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!UY(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){if(t.error&&!V5(t)){const i=t.error.code?.split("auth/")[1]||"internal-error";n.onError(Zu(this.auth,i))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const i=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=zY&&this.cachedEventUids.clear(),this.cachedEventUids.has(SO(t))}saveEventToCache(t){this.cachedEventUids.add(SO(t)),this.lastProcessedEventTime=Date.now()}}function SO(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function V5({type:e,error:t}){return e==="unknown"&&t?.code==="auth/no-auth-event"}function UY(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return V5(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $Y(e,t={}){return Ih(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jY=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,WY=/^https?/;async function HY(e){if(e.config.emulator)return;const{authorizedDomains:t}=await $Y(e);for(const n of t)try{if(GY(n))return}catch{}pu(e,"unauthorized-domain")}function GY(e){const t=ck(),{protocol:n,hostname:i}=new URL(t);if(e.startsWith("chrome-extension://")){const l=new URL(e);return l.hostname===""&&i===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===i}if(!WY.test(n))return!1;if(jY.test(e))return i===e;const r=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qY=new v0(3e4,6e4);function EO(){const e=Ju().___jsl;if(e?.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function KY(e){return new Promise((t,n)=>{function i(){EO(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{EO(),n(Zu(e,"network-request-failed"))},timeout:qY.get()})}if(Ju().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(Ju().gapi?.load)i();else{const r=OX("iframefcb");return Ju()[r]=()=>{gapi.load?i():n(Zu(e,"network-request-failed"))},y5(`${RX()}?onload=${r}`).catch(a=>n(a))}}).catch(t=>{throw Ew=null,t})}let Ew=null;function XY(e){return Ew=Ew||KY(e),Ew}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YY=new v0(5e3,15e3),ZY="__/auth/iframe",JY="emulator/auth/iframe",QY={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},eZ=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function tZ(e){const t=e.config;hi(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?mA(t,JY):`https://${e.config.authDomain}/${ZY}`,i={apiKey:t.apiKey,appName:e.name,v:b_},r=eZ.get(e.config.apiHost);r&&(i.eid=r);const a=e._getFrameworks();return a.length&&(i.fw=a.join(",")),`${n}?${g0(i).slice(1)}`}async function nZ(e){const t=await XY(e),n=Ju().gapi;return hi(n,e,"internal-error"),t.open({where:document.body,url:tZ(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:QY,dontclear:!0},i=>new Promise(async(r,a)=>{await i.restyle({setHideOnLeave:!1});const l=Zu(e,"network-request-failed"),h=Ju().setTimeout(()=>{a(l)},YY.get());function s(){Ju().clearTimeout(h),r(i)}i.ping(s).then(s,()=>{a(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iZ={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},rZ=500,sZ=600,oZ="_blank",aZ="http://localhost";class CO{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function lZ(e,t,n,i=rZ,r=sZ){const a=Math.max((window.screen.availHeight-r)/2,0).toString(),l=Math.max((window.screen.availWidth-i)/2,0).toString();let h="";const s={...iZ,width:i.toString(),height:r.toString(),top:a,left:l},p=ja().toLowerCase();n&&(h=h5(p)?oZ:n),u5(p)&&(t=t||aZ,s.scrollbars="yes");const _=Object.entries(s).reduce((T,[k,P])=>`${T}${k}=${P},`,"");if(EX(p)&&h!=="_self")return cZ(t||"",h),new CO(null);const x=window.open(t||"",h,_);hi(x,e,"popup-blocked");try{x.focus()}catch{}return new CO(x)}function cZ(e,t){const n=document.createElement("a");n.href=e,n.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uZ="__/auth/handler",dZ="emulator/auth/handler",hZ=encodeURIComponent("fac");async function kO(e,t,n,i,r,a){hi(e.config.authDomain,e,"auth-domain-config-required"),hi(e.config.apiKey,e,"invalid-api-key");const l={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:i,v:b_,eventId:r};if(t instanceof w5){t.setDefaultLanguage(e.languageCode),l.providerId=t.providerId||"",Hq(t.getCustomParameters())||(l.customParameters=JSON.stringify(t.getCustomParameters()));for(const[_,x]of Object.entries({}))l[_]=x}if(t instanceof y0){const _=t.getScopes().filter(x=>x!=="");_.length>0&&(l.scopes=_.join(","))}e.tenantId&&(l.tid=e.tenantId);const h=l;for(const _ of Object.keys(h))h[_]===void 0&&delete h[_];const s=await e._getAppCheckToken(),p=s?`#${hZ}=${encodeURIComponent(s)}`:"";return`${fZ(e)}?${g0(h).slice(1)}${p}`}function fZ({config:e}){return e.emulator?mA(e,dZ):`https://${e.authDomain}/${uZ}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZE="webStorageSupport";class mZ{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=P5,this._completeRedirectFn=FY,this._overrideRedirectResult=OY}async _openPopup(t,n,i,r){yh(this.eventManagers[t._key()]?.manager,"_initialize() not called before _openPopup()");const a=await kO(t,n,i,ck(),r);return lZ(t,a,yA())}async _openRedirect(t,n,i,r){await this._originValidation(t);const a=await kO(t,n,i,ck(),r);return vY(a),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:r,promise:a}=this.eventManagers[n];return r?Promise.resolve(r):(yh(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(t);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(t){const n=await nZ(t),i=new NY(t);return n.register("authEvent",r=>(hi(r?.authEvent,t,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=n,i}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(ZE,{type:ZE},r=>{const a=r?.[0]?.[ZE];a!==void 0&&n(!!a),pu(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=HY(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return v5()||d5()||gA()}}const pZ=mZ;var IO="@firebase/auth",AO="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gZ{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(i=>{t(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){hi(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vZ(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function _Z(e){Xv(new Np("auth",(t,{options:n})=>{const i=t.getProvider("app").getImmediate(),r=t.getProvider("heartbeat"),a=t.getProvider("app-check-internal"),{apiKey:l,authDomain:h}=i.options;hi(l&&!l.includes(":"),"invalid-api-key",{appName:i.name});const s={apiKey:l,authDomain:h,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_5(e)},p=new MX(i,r,a,s);return UX(p,n),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,i)=>{t.getProvider("auth-internal").initialize()})),Xv(new Np("auth-internal",t=>{const n=hm(t.getProvider("auth").getImmediate());return(i=>new gZ(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),$f(IO,AO,vZ(e)),$f(IO,AO,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yZ=300,bZ=qN("authIdTokenMaxAge")||yZ;let PO=null;const xZ=e=>async t=>{const n=t&&await t.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>bZ)return;const r=n?.token;PO!==r&&(PO=r,await fetch(e,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function B5(e=QN()){const t=hA(e,"auth");if(t.isInitialized())return t.getImmediate();const n=NX(e,{popupRedirectResolver:pZ,persistence:[CY,mY,P5]}),i=qN("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const l=xZ(a.toString());lY(n,l,()=>l(n.currentUser)),aY(n,h=>l(h))}}const r=HN("auth");return r&&$X(n,`http://${r}`),n}function wZ(){return document.getElementsByTagName("head")?.[0]??document}DX({loadJS(e){return new Promise((t,n)=>{const i=document.createElement("script");i.setAttribute("src",e),i.onload=t,i.onerror=r=>{const a=Zu("internal-error");a.customData=r,n(a)},i.type="text/javascript",i.charset="UTF-8",wZ().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});_Z("Browser");var MO=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var jf,F5;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(J,$){function W(){}W.prototype=$.prototype,J.F=$.prototype,J.prototype=new W,J.prototype.constructor=J,J.D=function(X,re,Y){for(var Z=Array(arguments.length-2),ge=2;ge<arguments.length;ge++)Z[ge-2]=arguments[ge];return $.prototype[re].apply(X,Z)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(J,$,W){W||(W=0);const X=Array(16);if(typeof $=="string")for(var re=0;re<16;++re)X[re]=$.charCodeAt(W++)|$.charCodeAt(W++)<<8|$.charCodeAt(W++)<<16|$.charCodeAt(W++)<<24;else for(re=0;re<16;++re)X[re]=$[W++]|$[W++]<<8|$[W++]<<16|$[W++]<<24;$=J.g[0],W=J.g[1],re=J.g[2];let Y=J.g[3],Z;Z=$+(Y^W&(re^Y))+X[0]+3614090360&4294967295,$=W+(Z<<7&4294967295|Z>>>25),Z=Y+(re^$&(W^re))+X[1]+3905402710&4294967295,Y=$+(Z<<12&4294967295|Z>>>20),Z=re+(W^Y&($^W))+X[2]+606105819&4294967295,re=Y+(Z<<17&4294967295|Z>>>15),Z=W+($^re&(Y^$))+X[3]+3250441966&4294967295,W=re+(Z<<22&4294967295|Z>>>10),Z=$+(Y^W&(re^Y))+X[4]+4118548399&4294967295,$=W+(Z<<7&4294967295|Z>>>25),Z=Y+(re^$&(W^re))+X[5]+1200080426&4294967295,Y=$+(Z<<12&4294967295|Z>>>20),Z=re+(W^Y&($^W))+X[6]+2821735955&4294967295,re=Y+(Z<<17&4294967295|Z>>>15),Z=W+($^re&(Y^$))+X[7]+4249261313&4294967295,W=re+(Z<<22&4294967295|Z>>>10),Z=$+(Y^W&(re^Y))+X[8]+1770035416&4294967295,$=W+(Z<<7&4294967295|Z>>>25),Z=Y+(re^$&(W^re))+X[9]+2336552879&4294967295,Y=$+(Z<<12&4294967295|Z>>>20),Z=re+(W^Y&($^W))+X[10]+4294925233&4294967295,re=Y+(Z<<17&4294967295|Z>>>15),Z=W+($^re&(Y^$))+X[11]+2304563134&4294967295,W=re+(Z<<22&4294967295|Z>>>10),Z=$+(Y^W&(re^Y))+X[12]+1804603682&4294967295,$=W+(Z<<7&4294967295|Z>>>25),Z=Y+(re^$&(W^re))+X[13]+4254626195&4294967295,Y=$+(Z<<12&4294967295|Z>>>20),Z=re+(W^Y&($^W))+X[14]+2792965006&4294967295,re=Y+(Z<<17&4294967295|Z>>>15),Z=W+($^re&(Y^$))+X[15]+1236535329&4294967295,W=re+(Z<<22&4294967295|Z>>>10),Z=$+(re^Y&(W^re))+X[1]+4129170786&4294967295,$=W+(Z<<5&4294967295|Z>>>27),Z=Y+(W^re&($^W))+X[6]+3225465664&4294967295,Y=$+(Z<<9&4294967295|Z>>>23),Z=re+($^W&(Y^$))+X[11]+643717713&4294967295,re=Y+(Z<<14&4294967295|Z>>>18),Z=W+(Y^$&(re^Y))+X[0]+3921069994&4294967295,W=re+(Z<<20&4294967295|Z>>>12),Z=$+(re^Y&(W^re))+X[5]+3593408605&4294967295,$=W+(Z<<5&4294967295|Z>>>27),Z=Y+(W^re&($^W))+X[10]+38016083&4294967295,Y=$+(Z<<9&4294967295|Z>>>23),Z=re+($^W&(Y^$))+X[15]+3634488961&4294967295,re=Y+(Z<<14&4294967295|Z>>>18),Z=W+(Y^$&(re^Y))+X[4]+3889429448&4294967295,W=re+(Z<<20&4294967295|Z>>>12),Z=$+(re^Y&(W^re))+X[9]+568446438&4294967295,$=W+(Z<<5&4294967295|Z>>>27),Z=Y+(W^re&($^W))+X[14]+3275163606&4294967295,Y=$+(Z<<9&4294967295|Z>>>23),Z=re+($^W&(Y^$))+X[3]+4107603335&4294967295,re=Y+(Z<<14&4294967295|Z>>>18),Z=W+(Y^$&(re^Y))+X[8]+1163531501&4294967295,W=re+(Z<<20&4294967295|Z>>>12),Z=$+(re^Y&(W^re))+X[13]+2850285829&4294967295,$=W+(Z<<5&4294967295|Z>>>27),Z=Y+(W^re&($^W))+X[2]+4243563512&4294967295,Y=$+(Z<<9&4294967295|Z>>>23),Z=re+($^W&(Y^$))+X[7]+1735328473&4294967295,re=Y+(Z<<14&4294967295|Z>>>18),Z=W+(Y^$&(re^Y))+X[12]+2368359562&4294967295,W=re+(Z<<20&4294967295|Z>>>12),Z=$+(W^re^Y)+X[5]+4294588738&4294967295,$=W+(Z<<4&4294967295|Z>>>28),Z=Y+($^W^re)+X[8]+2272392833&4294967295,Y=$+(Z<<11&4294967295|Z>>>21),Z=re+(Y^$^W)+X[11]+1839030562&4294967295,re=Y+(Z<<16&4294967295|Z>>>16),Z=W+(re^Y^$)+X[14]+4259657740&4294967295,W=re+(Z<<23&4294967295|Z>>>9),Z=$+(W^re^Y)+X[1]+2763975236&4294967295,$=W+(Z<<4&4294967295|Z>>>28),Z=Y+($^W^re)+X[4]+1272893353&4294967295,Y=$+(Z<<11&4294967295|Z>>>21),Z=re+(Y^$^W)+X[7]+4139469664&4294967295,re=Y+(Z<<16&4294967295|Z>>>16),Z=W+(re^Y^$)+X[10]+3200236656&4294967295,W=re+(Z<<23&4294967295|Z>>>9),Z=$+(W^re^Y)+X[13]+681279174&4294967295,$=W+(Z<<4&4294967295|Z>>>28),Z=Y+($^W^re)+X[0]+3936430074&4294967295,Y=$+(Z<<11&4294967295|Z>>>21),Z=re+(Y^$^W)+X[3]+3572445317&4294967295,re=Y+(Z<<16&4294967295|Z>>>16),Z=W+(re^Y^$)+X[6]+76029189&4294967295,W=re+(Z<<23&4294967295|Z>>>9),Z=$+(W^re^Y)+X[9]+3654602809&4294967295,$=W+(Z<<4&4294967295|Z>>>28),Z=Y+($^W^re)+X[12]+3873151461&4294967295,Y=$+(Z<<11&4294967295|Z>>>21),Z=re+(Y^$^W)+X[15]+530742520&4294967295,re=Y+(Z<<16&4294967295|Z>>>16),Z=W+(re^Y^$)+X[2]+3299628645&4294967295,W=re+(Z<<23&4294967295|Z>>>9),Z=$+(re^(W|~Y))+X[0]+4096336452&4294967295,$=W+(Z<<6&4294967295|Z>>>26),Z=Y+(W^($|~re))+X[7]+1126891415&4294967295,Y=$+(Z<<10&4294967295|Z>>>22),Z=re+($^(Y|~W))+X[14]+2878612391&4294967295,re=Y+(Z<<15&4294967295|Z>>>17),Z=W+(Y^(re|~$))+X[5]+4237533241&4294967295,W=re+(Z<<21&4294967295|Z>>>11),Z=$+(re^(W|~Y))+X[12]+1700485571&4294967295,$=W+(Z<<6&4294967295|Z>>>26),Z=Y+(W^($|~re))+X[3]+2399980690&4294967295,Y=$+(Z<<10&4294967295|Z>>>22),Z=re+($^(Y|~W))+X[10]+4293915773&4294967295,re=Y+(Z<<15&4294967295|Z>>>17),Z=W+(Y^(re|~$))+X[1]+2240044497&4294967295,W=re+(Z<<21&4294967295|Z>>>11),Z=$+(re^(W|~Y))+X[8]+1873313359&4294967295,$=W+(Z<<6&4294967295|Z>>>26),Z=Y+(W^($|~re))+X[15]+4264355552&4294967295,Y=$+(Z<<10&4294967295|Z>>>22),Z=re+($^(Y|~W))+X[6]+2734768916&4294967295,re=Y+(Z<<15&4294967295|Z>>>17),Z=W+(Y^(re|~$))+X[13]+1309151649&4294967295,W=re+(Z<<21&4294967295|Z>>>11),Z=$+(re^(W|~Y))+X[4]+4149444226&4294967295,$=W+(Z<<6&4294967295|Z>>>26),Z=Y+(W^($|~re))+X[11]+3174756917&4294967295,Y=$+(Z<<10&4294967295|Z>>>22),Z=re+($^(Y|~W))+X[2]+718787259&4294967295,re=Y+(Z<<15&4294967295|Z>>>17),Z=W+(Y^(re|~$))+X[9]+3951481745&4294967295,J.g[0]=J.g[0]+$&4294967295,J.g[1]=J.g[1]+(re+(Z<<21&4294967295|Z>>>11))&4294967295,J.g[2]=J.g[2]+re&4294967295,J.g[3]=J.g[3]+Y&4294967295}i.prototype.v=function(J,$){$===void 0&&($=J.length);const W=$-this.blockSize,X=this.C;let re=this.h,Y=0;for(;Y<$;){if(re==0)for(;Y<=W;)r(this,J,Y),Y+=this.blockSize;if(typeof J=="string"){for(;Y<$;)if(X[re++]=J.charCodeAt(Y++),re==this.blockSize){r(this,X),re=0;break}}else for(;Y<$;)if(X[re++]=J[Y++],re==this.blockSize){r(this,X),re=0;break}}this.h=re,this.o+=$},i.prototype.A=function(){var J=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);J[0]=128;for(var $=1;$<J.length-8;++$)J[$]=0;$=this.o*8;for(var W=J.length-8;W<J.length;++W)J[W]=$&255,$/=256;for(this.v(J),J=Array(16),$=0,W=0;W<4;++W)for(let X=0;X<32;X+=8)J[$++]=this.g[W]>>>X&255;return J};function a(J,$){var W=h;return Object.prototype.hasOwnProperty.call(W,J)?W[J]:W[J]=$(J)}function l(J,$){this.h=$;const W=[];let X=!0;for(let re=J.length-1;re>=0;re--){const Y=J[re]|0;X&&Y==$||(W[re]=Y,X=!1)}this.g=W}var h={};function s(J){return-128<=J&&J<128?a(J,function($){return new l([$|0],$<0?-1:0)}):new l([J|0],J<0?-1:0)}function p(J){if(isNaN(J)||!isFinite(J))return x;if(J<0)return R(p(-J));const $=[];let W=1;for(let X=0;J>=W;X++)$[X]=J/W|0,W*=4294967296;return new l($,0)}function _(J,$){if(J.length==0)throw Error("number format error: empty string");if($=$||10,$<2||36<$)throw Error("radix out of range: "+$);if(J.charAt(0)=="-")return R(_(J.substring(1),$));if(J.indexOf("-")>=0)throw Error('number format error: interior "-" character');const W=p(Math.pow($,8));let X=x;for(let Y=0;Y<J.length;Y+=8){var re=Math.min(8,J.length-Y);const Z=parseInt(J.substring(Y,Y+re),$);re<8?(re=p(Math.pow($,re)),X=X.j(re).add(p(Z))):(X=X.j(W),X=X.add(p(Z)))}return X}var x=s(0),T=s(1),k=s(16777216);e=l.prototype,e.m=function(){if(M(this))return-R(this).m();let J=0,$=1;for(let W=0;W<this.g.length;W++){const X=this.i(W);J+=(X>=0?X:4294967296+X)*$,$*=4294967296}return J},e.toString=function(J){if(J=J||10,J<2||36<J)throw Error("radix out of range: "+J);if(P(this))return"0";if(M(this))return"-"+R(this).toString(J);const $=p(Math.pow(J,6));var W=this;let X="";for(;;){const re=G(W,$).g;W=F(W,re.j($));let Y=((W.g.length>0?W.g[0]:W.h)>>>0).toString(J);if(W=re,P(W))return Y+X;for(;Y.length<6;)Y="0"+Y;X=Y+X}},e.i=function(J){return J<0?0:J<this.g.length?this.g[J]:this.h};function P(J){if(J.h!=0)return!1;for(let $=0;$<J.g.length;$++)if(J.g[$]!=0)return!1;return!0}function M(J){return J.h==-1}e.l=function(J){return J=F(this,J),M(J)?-1:P(J)?0:1};function R(J){const $=J.g.length,W=[];for(let X=0;X<$;X++)W[X]=~J.g[X];return new l(W,~J.h).add(T)}e.abs=function(){return M(this)?R(this):this},e.add=function(J){const $=Math.max(this.g.length,J.g.length),W=[];let X=0;for(let re=0;re<=$;re++){let Y=X+(this.i(re)&65535)+(J.i(re)&65535),Z=(Y>>>16)+(this.i(re)>>>16)+(J.i(re)>>>16);X=Z>>>16,Y&=65535,Z&=65535,W[re]=Z<<16|Y}return new l(W,W[W.length-1]&-2147483648?-1:0)};function F(J,$){return J.add(R($))}e.j=function(J){if(P(this)||P(J))return x;if(M(this))return M(J)?R(this).j(R(J)):R(R(this).j(J));if(M(J))return R(this.j(R(J)));if(this.l(k)<0&&J.l(k)<0)return p(this.m()*J.m());const $=this.g.length+J.g.length,W=[];for(var X=0;X<2*$;X++)W[X]=0;for(X=0;X<this.g.length;X++)for(let re=0;re<J.g.length;re++){const Y=this.i(X)>>>16,Z=this.i(X)&65535,ge=J.i(re)>>>16,be=J.i(re)&65535;W[2*X+2*re]+=Z*be,B(W,2*X+2*re),W[2*X+2*re+1]+=Y*be,B(W,2*X+2*re+1),W[2*X+2*re+1]+=Z*ge,B(W,2*X+2*re+1),W[2*X+2*re+2]+=Y*ge,B(W,2*X+2*re+2)}for(J=0;J<$;J++)W[J]=W[2*J+1]<<16|W[2*J];for(J=$;J<2*$;J++)W[J]=0;return new l(W,0)};function B(J,$){for(;(J[$]&65535)!=J[$];)J[$+1]+=J[$]>>>16,J[$]&=65535,$++}function H(J,$){this.g=J,this.h=$}function G(J,$){if(P($))throw Error("division by zero");if(P(J))return new H(x,x);if(M(J))return $=G(R(J),$),new H(R($.g),R($.h));if(M($))return $=G(J,R($)),new H(R($.g),$.h);if(J.g.length>30){if(M(J)||M($))throw Error("slowDivide_ only works with positive integers.");for(var W=T,X=$;X.l(J)<=0;)W=ee(W),X=ee(X);var re=ie(W,1),Y=ie(X,1);for(X=ie(X,2),W=ie(W,2);!P(X);){var Z=Y.add(X);Z.l(J)<=0&&(re=re.add(W),Y=Z),X=ie(X,1),W=ie(W,1)}return $=F(J,re.j($)),new H(re,$)}for(re=x;J.l($)>=0;){for(W=Math.max(1,Math.floor(J.m()/$.m())),X=Math.ceil(Math.log(W)/Math.LN2),X=X<=48?1:Math.pow(2,X-48),Y=p(W),Z=Y.j($);M(Z)||Z.l(J)>0;)W-=X,Y=p(W),Z=Y.j($);P(Y)&&(Y=T),re=re.add(Y),J=F(J,Z)}return new H(re,J)}e.B=function(J){return G(this,J).h},e.and=function(J){const $=Math.max(this.g.length,J.g.length),W=[];for(let X=0;X<$;X++)W[X]=this.i(X)&J.i(X);return new l(W,this.h&J.h)},e.or=function(J){const $=Math.max(this.g.length,J.g.length),W=[];for(let X=0;X<$;X++)W[X]=this.i(X)|J.i(X);return new l(W,this.h|J.h)},e.xor=function(J){const $=Math.max(this.g.length,J.g.length),W=[];for(let X=0;X<$;X++)W[X]=this.i(X)^J.i(X);return new l(W,this.h^J.h)};function ee(J){const $=J.g.length+1,W=[];for(let X=0;X<$;X++)W[X]=J.i(X)<<1|J.i(X-1)>>>31;return new l(W,J.h)}function ie(J,$){const W=$>>5;$%=32;const X=J.g.length-W,re=[];for(let Y=0;Y<X;Y++)re[Y]=$>0?J.i(Y+W)>>>$|J.i(Y+W+1)<<32-$:J.i(Y+W);return new l(re,J.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,F5=i,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.B,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=p,l.fromString=_,jf=l}).apply(typeof MO<"u"?MO:typeof self<"u"?self:typeof window<"u"?window:{});var Ux=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var z5,Uy,N5,Cw,hk,U5,$5,j5;(function(){var e,t=Object.defineProperty;function n(A){A=[typeof globalThis=="object"&&globalThis,A,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ux=="object"&&Ux];for(var te=0;te<A.length;++te){var ue=A[te];if(ue&&ue.Math==Math)return ue}throw Error("Cannot find global object")}var i=n(this);function r(A,te){if(te)e:{var ue=i;A=A.split(".");for(var Me=0;Me<A.length-1;Me++){var Tt=A[Me];if(!(Tt in ue))break e;ue=ue[Tt]}A=A[A.length-1],Me=ue[A],te=te(Me),te!=Me&&te!=null&&t(ue,A,{configurable:!0,writable:!0,value:te})}}r("Symbol.dispose",function(A){return A||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(A){return A||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(A){return A||function(te){var ue=[],Me;for(Me in te)Object.prototype.hasOwnProperty.call(te,Me)&&ue.push([Me,te[Me]]);return ue}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function h(A){var te=typeof A;return te=="object"&&A!=null||te=="function"}function s(A,te,ue){return A.call.apply(A.bind,arguments)}function p(A,te,ue){return p=s,p.apply(null,arguments)}function _(A,te){var ue=Array.prototype.slice.call(arguments,1);return function(){var Me=ue.slice();return Me.push.apply(Me,arguments),A.apply(this,Me)}}function x(A,te){function ue(){}ue.prototype=te.prototype,A.Z=te.prototype,A.prototype=new ue,A.prototype.constructor=A,A.Ob=function(Me,Tt,Mt){for(var yn=Array(arguments.length-2),di=2;di<arguments.length;di++)yn[di-2]=arguments[di];return te.prototype[Tt].apply(Me,yn)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?A=>A&&AsyncContext.Snapshot.wrap(A):A=>A;function k(A){const te=A.length;if(te>0){const ue=Array(te);for(let Me=0;Me<te;Me++)ue[Me]=A[Me];return ue}return[]}function P(A,te){for(let Me=1;Me<arguments.length;Me++){const Tt=arguments[Me];var ue=typeof Tt;if(ue=ue!="object"?ue:Tt?Array.isArray(Tt)?"array":ue:"null",ue=="array"||ue=="object"&&typeof Tt.length=="number"){ue=A.length||0;const Mt=Tt.length||0;A.length=ue+Mt;for(let yn=0;yn<Mt;yn++)A[ue+yn]=Tt[yn]}else A.push(Tt)}}class M{constructor(te,ue){this.i=te,this.j=ue,this.h=0,this.g=null}get(){let te;return this.h>0?(this.h--,te=this.g,this.g=te.next,te.next=null):te=this.i(),te}}function R(A){l.setTimeout(()=>{throw A},0)}function F(){var A=J;let te=null;return A.g&&(te=A.g,A.g=A.g.next,A.g||(A.h=null),te.next=null),te}class B{constructor(){this.h=this.g=null}add(te,ue){const Me=H.get();Me.set(te,ue),this.h?this.h.next=Me:this.g=Me,this.h=Me}}var H=new M(()=>new G,A=>A.reset());class G{constructor(){this.next=this.g=this.h=null}set(te,ue){this.h=te,this.g=ue,this.next=null}reset(){this.next=this.g=this.h=null}}let ee,ie=!1,J=new B,$=()=>{const A=Promise.resolve(void 0);ee=()=>{A.then(W)}};function W(){for(var A;A=F();){try{A.h.call(A.g)}catch(ue){R(ue)}var te=H;te.j(A),te.h<100&&(te.h++,A.next=te.g,te.g=A)}ie=!1}function X(){this.u=this.u,this.C=this.C}X.prototype.u=!1,X.prototype.dispose=function(){this.u||(this.u=!0,this.N())},X.prototype[Symbol.dispose]=function(){this.dispose()},X.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function re(A,te){this.type=A,this.g=this.target=te,this.defaultPrevented=!1}re.prototype.h=function(){this.defaultPrevented=!0};var Y=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var A=!1,te=Object.defineProperty({},"passive",{get:function(){A=!0}});try{const ue=()=>{};l.addEventListener("test",ue,te),l.removeEventListener("test",ue,te)}catch{}return A})();function Z(A){return/^[\s\xa0]*$/.test(A)}function ge(A,te){re.call(this,A?A.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,A&&this.init(A,te)}x(ge,re),ge.prototype.init=function(A,te){const ue=this.type=A.type,Me=A.changedTouches&&A.changedTouches.length?A.changedTouches[0]:null;this.target=A.target||A.srcElement,this.g=te,te=A.relatedTarget,te||(ue=="mouseover"?te=A.fromElement:ue=="mouseout"&&(te=A.toElement)),this.relatedTarget=te,Me?(this.clientX=Me.clientX!==void 0?Me.clientX:Me.pageX,this.clientY=Me.clientY!==void 0?Me.clientY:Me.pageY,this.screenX=Me.screenX||0,this.screenY=Me.screenY||0):(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0),this.button=A.button,this.key=A.key||"",this.ctrlKey=A.ctrlKey,this.altKey=A.altKey,this.shiftKey=A.shiftKey,this.metaKey=A.metaKey,this.pointerId=A.pointerId||0,this.pointerType=A.pointerType,this.state=A.state,this.i=A,A.defaultPrevented&&ge.Z.h.call(this)},ge.prototype.h=function(){ge.Z.h.call(this);const A=this.i;A.preventDefault?A.preventDefault():A.returnValue=!1};var be="closure_listenable_"+(Math.random()*1e6|0),Be=0;function nt(A,te,ue,Me,Tt){this.listener=A,this.proxy=null,this.src=te,this.type=ue,this.capture=!!Me,this.ha=Tt,this.key=++Be,this.da=this.fa=!1}function We(A){A.da=!0,A.listener=null,A.proxy=null,A.src=null,A.ha=null}function Le(A,te,ue){for(const Me in A)te.call(ue,A[Me],Me,A)}function Ze(A,te){for(const ue in A)te.call(void 0,A[ue],ue,A)}function Ee(A){const te={};for(const ue in A)te[ue]=A[ue];return te}const Je="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function it(A,te){let ue,Me;for(let Tt=1;Tt<arguments.length;Tt++){Me=arguments[Tt];for(ue in Me)A[ue]=Me[ue];for(let Mt=0;Mt<Je.length;Mt++)ue=Je[Mt],Object.prototype.hasOwnProperty.call(Me,ue)&&(A[ue]=Me[ue])}}function vt(A){this.src=A,this.g={},this.h=0}vt.prototype.add=function(A,te,ue,Me,Tt){const Mt=A.toString();A=this.g[Mt],A||(A=this.g[Mt]=[],this.h++);const yn=ot(A,te,Me,Tt);return yn>-1?(te=A[yn],ue||(te.fa=!1)):(te=new nt(te,this.src,Mt,!!Me,Tt),te.fa=ue,A.push(te)),te};function mt(A,te){const ue=te.type;if(ue in A.g){var Me=A.g[ue],Tt=Array.prototype.indexOf.call(Me,te,void 0),Mt;(Mt=Tt>=0)&&Array.prototype.splice.call(Me,Tt,1),Mt&&(We(te),A.g[ue].length==0&&(delete A.g[ue],A.h--))}}function ot(A,te,ue,Me){for(let Tt=0;Tt<A.length;++Tt){const Mt=A[Tt];if(!Mt.da&&Mt.listener==te&&Mt.capture==!!ue&&Mt.ha==Me)return Tt}return-1}var Ye="closure_lm_"+(Math.random()*1e6|0),ut={};function Ke(A,te,ue,Me,Tt){if(Array.isArray(te)){for(let Mt=0;Mt<te.length;Mt++)Ke(A,te[Mt],ue,Me,Tt);return null}return ue=Ct(ue),A&&A[be]?A.J(te,ue,h(Me)?!!Me.capture:!1,Tt):jt(A,te,ue,!1,Me,Tt)}function jt(A,te,ue,Me,Tt,Mt){if(!te)throw Error("Invalid event type");const yn=h(Tt)?!!Tt.capture:!!Tt;let di=dt(A);if(di||(A[Ye]=di=new vt(A)),ue=di.add(te,ue,Me,yn,Mt),ue.proxy)return ue;if(Me=xn(),ue.proxy=Me,Me.src=A,Me.listener=ue,A.addEventListener)Y||(Tt=yn),Tt===void 0&&(Tt=!1),A.addEventListener(te.toString(),Me,Tt);else if(A.attachEvent)A.attachEvent(he(te.toString()),Me);else if(A.addListener&&A.removeListener)A.addListener(Me);else throw Error("addEventListener and attachEvent are unavailable.");return ue}function xn(){function A(ue){return te.call(A.src,A.listener,ue)}const te=et;return A}function ke(A,te,ue,Me,Tt){if(Array.isArray(te))for(var Mt=0;Mt<te.length;Mt++)ke(A,te[Mt],ue,Me,Tt);else Me=h(Me)?!!Me.capture:!!Me,ue=Ct(ue),A&&A[be]?(A=A.i,Mt=String(te).toString(),Mt in A.g&&(te=A.g[Mt],ue=ot(te,ue,Me,Tt),ue>-1&&(We(te[ue]),Array.prototype.splice.call(te,ue,1),te.length==0&&(delete A.g[Mt],A.h--)))):A&&(A=dt(A))&&(te=A.g[te.toString()],A=-1,te&&(A=ot(te,ue,Me,Tt)),(ue=A>-1?te[A]:null)&&Ae(ue))}function Ae(A){if(typeof A!="number"&&A&&!A.da){var te=A.src;if(te&&te[be])mt(te.i,A);else{var ue=A.type,Me=A.proxy;te.removeEventListener?te.removeEventListener(ue,Me,A.capture):te.detachEvent?te.detachEvent(he(ue),Me):te.addListener&&te.removeListener&&te.removeListener(Me),(ue=dt(te))?(mt(ue,A),ue.h==0&&(ue.src=null,te[Ye]=null)):We(A)}}}function he(A){return A in ut?ut[A]:ut[A]="on"+A}function et(A,te){if(A.da)A=!0;else{te=new ge(te,this);const ue=A.listener,Me=A.ha||A.src;A.fa&&Ae(A),A=ue.call(Me,te)}return A}function dt(A){return A=A[Ye],A instanceof vt?A:null}var Qe="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ct(A){return typeof A=="function"?A:(A[Qe]||(A[Qe]=function(te){return A.handleEvent(te)}),A[Qe])}function Pt(){X.call(this),this.i=new vt(this),this.M=this,this.G=null}x(Pt,X),Pt.prototype[be]=!0,Pt.prototype.removeEventListener=function(A,te,ue,Me){ke(this,A,te,ue,Me)};function Bt(A,te){var ue,Me=A.G;if(Me)for(ue=[];Me;Me=Me.G)ue.push(Me);if(A=A.M,Me=te.type||te,typeof te=="string")te=new re(te,A);else if(te instanceof re)te.target=te.target||A;else{var Tt=te;te=new re(Me,A),it(te,Tt)}Tt=!0;let Mt,yn;if(ue)for(yn=ue.length-1;yn>=0;yn--)Mt=te.g=ue[yn],Tt=Ht(Mt,Me,!0,te)&&Tt;if(Mt=te.g=A,Tt=Ht(Mt,Me,!0,te)&&Tt,Tt=Ht(Mt,Me,!1,te)&&Tt,ue)for(yn=0;yn<ue.length;yn++)Mt=te.g=ue[yn],Tt=Ht(Mt,Me,!1,te)&&Tt}Pt.prototype.N=function(){if(Pt.Z.N.call(this),this.i){var A=this.i;for(const te in A.g){const ue=A.g[te];for(let Me=0;Me<ue.length;Me++)We(ue[Me]);delete A.g[te],A.h--}}this.G=null},Pt.prototype.J=function(A,te,ue,Me){return this.i.add(String(A),te,!1,ue,Me)},Pt.prototype.K=function(A,te,ue,Me){return this.i.add(String(A),te,!0,ue,Me)};function Ht(A,te,ue,Me){if(te=A.i.g[String(te)],!te)return!0;te=te.concat();let Tt=!0;for(let Mt=0;Mt<te.length;++Mt){const yn=te[Mt];if(yn&&!yn.da&&yn.capture==ue){const di=yn.listener,Mr=yn.ha||yn.src;yn.fa&&mt(A.i,yn),Tt=di.call(Mr,Me)!==!1&&Tt}}return Tt&&!Me.defaultPrevented}function En(A,te){if(typeof A!="function")if(A&&typeof A.handleEvent=="function")A=p(A.handleEvent,A);else throw Error("Invalid listener argument");return Number(te)>2147483647?-1:l.setTimeout(A,te||0)}function Jt(A){A.g=En(()=>{A.g=null,A.i&&(A.i=!1,Jt(A))},A.l);const te=A.h;A.h=null,A.m.apply(null,te)}class Mn extends X{constructor(te,ue){super(),this.m=te,this.l=ue,this.h=null,this.i=!1,this.g=null}j(te){this.h=arguments,this.g?this.i=!0:Jt(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ln(A){X.call(this),this.h=A,this.g={}}x(Ln,X);var Ut=[];function rn(A){Le(A.g,function(te,ue){this.g.hasOwnProperty(ue)&&Ae(te)},A),A.g={}}Ln.prototype.N=function(){Ln.Z.N.call(this),rn(this)},Ln.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var fn=l.JSON.stringify,Bn=l.JSON.parse,ki=class{stringify(A){return l.JSON.stringify(A,void 0)}parse(A){return l.JSON.parse(A,void 0)}};function qi(){}function fr(){}var ns={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function wo(){re.call(this,"d")}x(wo,re);function ir(){re.call(this,"c")}x(ir,re);var xr={},$o=null;function To(){return $o=$o||new Pt}xr.Ia="serverreachability";function Uc(A){re.call(this,xr.Ia,A)}x(Uc,re);function Fe(A){const te=To();Bt(te,new Uc(te))}xr.STAT_EVENT="statevent";function pe(A,te){re.call(this,xr.STAT_EVENT,A),this.stat=te}x(pe,re);function _e(A){const te=To();Bt(te,new pe(te,A))}xr.Ja="timingevent";function Ve(A,te){re.call(this,xr.Ja,A),this.size=te}x(Ve,re);function He(A,te){if(typeof A!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){A()},te)}function st(){this.g=!0}st.prototype.ua=function(){this.g=!1};function _t(A,te,ue,Me,Tt,Mt){A.info(function(){if(A.g)if(Mt){var yn="",di=Mt.split("&");for(let Si=0;Si<di.length;Si++){var Mr=di[Si].split("=");if(Mr.length>1){const rr=Mr[0];Mr=Mr[1];const Qn=rr.split("_");yn=Qn.length>=2&&Qn[1]=="type"?yn+(rr+"="+Mr+"&"):yn+(rr+"=redacted&")}}}else yn=null;else yn=Mt;return"XMLHTTP REQ ("+Me+") [attempt "+Tt+"]: "+te+`
`+ue+`
`+yn})}function pt(A,te,ue,Me,Tt,Mt,yn){A.info(function(){return"XMLHTTP RESP ("+Me+") [ attempt "+Tt+"]: "+te+`
`+ue+`
`+Mt+" "+yn})}function rt(A,te,ue,Me){A.info(function(){return"XMLHTTP TEXT ("+te+"): "+Qt(A,ue)+(Me?" "+Me:"")})}function Et(A,te){A.info(function(){return"TIMEOUT: "+te})}st.prototype.info=function(){};function Qt(A,te){if(!A.g)return te;if(!te)return null;try{const Mt=JSON.parse(te);if(Mt){for(A=0;A<Mt.length;A++)if(Array.isArray(Mt[A])){var ue=Mt[A];if(!(ue.length<2)){var Me=ue[1];if(Array.isArray(Me)&&!(Me.length<1)){var Tt=Me[0];if(Tt!="noop"&&Tt!="stop"&&Tt!="close")for(let yn=1;yn<Me.length;yn++)Me[yn]=""}}}}return fn(Mt)}catch{return te}}var cn={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},en={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Kn;function Jn(){}x(Jn,qi),Jn.prototype.g=function(){return new XMLHttpRequest},Kn=new Jn;function jn(A){return encodeURIComponent(String(A))}function oi(A){var te=1;A=A.split(":");const ue=[];for(;te>0&&A.length;)ue.push(A.shift()),te--;return A.length&&ue.push(A.join(":")),ue}function Xn(A,te,ue,Me){this.j=A,this.i=te,this.l=ue,this.S=Me||1,this.V=new Ln(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Mi}function Mi(){this.i=null,this.g="",this.h=!1}var mr={},is={};function wr(A,te,ue){A.M=1,A.A=fa(Ki(te)),A.u=ue,A.R=!0,jo(A,null)}function jo(A,te){A.F=Date.now(),Ts(A),A.B=Ki(A.A);var ue=A.B,Me=A.S;Array.isArray(Me)||(Me=[String(Me)]),ul(ue.i,"t",Me),A.C=0,ue=A.j.L,A.h=new Mi,A.g=Tu(A.j,ue?te:null,!A.u),A.P>0&&(A.O=new Mn(p(A.Y,A,A.g),A.P)),te=A.V,ue=A.g,Me=A.ba;var Tt="readystatechange";Array.isArray(Tt)||(Tt&&(Ut[0]=Tt.toString()),Tt=Ut);for(let Mt=0;Mt<Tt.length;Mt++){const yn=Ke(ue,Tt[Mt],Me||te.handleEvent,!1,te.h||te);if(!yn)break;te.g[yn.key]=yn}te=A.J?Ee(A.J):{},A.u?(A.v||(A.v="POST"),te["Content-Type"]="application/x-www-form-urlencoded",A.g.ea(A.B,A.v,A.u,te)):(A.v="GET",A.g.ea(A.B,A.v,null,te)),Fe(),_t(A.i,A.v,A.B,A.l,A.S,A.u)}Xn.prototype.ba=function(A){A=A.target;const te=this.O;te&&qo(A)==3?te.j():this.Y(A)},Xn.prototype.Y=function(A){try{if(A==this.g)e:{const di=qo(this.g),Mr=this.g.ya(),Si=this.g.ca();if(!(di<3)&&(di!=3||this.g&&(this.h.h||this.g.la()||Ao(this.g)))){this.K||di!=4||Mr==7||(Mr==8||Si<=0?Fe(3):Fe(2)),qn(this);var te=this.g.ca();this.X=te;var ue=rs(this);if(this.o=te==200,pt(this.i,this.v,this.B,this.l,this.S,di,te),this.o){if(this.U&&!this.L){t:{if(this.g){var Me,Tt=this.g;if((Me=Tt.g?Tt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Z(Me)){var Mt=Me;break t}}Mt=null}if(A=Mt)rt(this.i,this.l,A,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Wo(this,A);else{this.o=!1,this.m=3,_e(12),Ss(this),da(this);break e}}if(this.R){A=!0;let rr;for(;!this.K&&this.C<ue.length;)if(rr=jr(this,ue),rr==is){di==4&&(this.m=4,_e(14),A=!1),rt(this.i,this.l,null,"[Incomplete Response]");break}else if(rr==mr){this.m=4,_e(15),rt(this.i,this.l,ue,"[Invalid Chunk]"),A=!1;break}else rt(this.i,this.l,rr,null),Wo(this,rr);if(Lr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),di!=4||ue.length!=0||this.h.h||(this.m=1,_e(16),A=!1),this.o=this.o&&A,!A)rt(this.i,this.l,ue,"[Invalid Chunked Response]"),Ss(this),da(this);else if(ue.length>0&&!this.W){this.W=!0;var yn=this.j;yn.g==this&&yn.aa&&!yn.P&&(yn.j.info("Great, no buffering proxy detected. Bytes received: "+ue.length),pl(yn),yn.P=!0,_e(11))}}else rt(this.i,this.l,ue,null),Wo(this,ue);di==4&&Ss(this),this.o&&!this.K&&(di==4?xu(this.j,this):(this.o=!1,Ts(this)))}else pa(this.g),te==400&&ue.indexOf("Unknown SID")>0?(this.m=3,_e(12)):(this.m=0,_e(13)),Ss(this),da(this)}}}catch{}finally{}};function rs(A){if(!Lr(A))return A.g.la();const te=Ao(A.g);if(te==="")return"";let ue="";const Me=te.length,Tt=qo(A.g)==4;if(!A.h.i){if(typeof TextDecoder>"u")return Ss(A),da(A),"";A.h.i=new l.TextDecoder}for(let Mt=0;Mt<Me;Mt++)A.h.h=!0,ue+=A.h.i.decode(te[Mt],{stream:!(Tt&&Mt==Me-1)});return te.length=0,A.h.g+=ue,A.C=0,A.h.g}function Lr(A){return A.g?A.v=="GET"&&A.M!=2&&A.j.Aa:!1}function jr(A,te){var ue=A.C,Me=te.indexOf(`
`,ue);return Me==-1?is:(ue=Number(te.substring(ue,Me)),isNaN(ue)?mr:(Me+=1,Me+ue>te.length?is:(te=te.slice(Me,Me+ue),A.C=Me+ue,te)))}Xn.prototype.cancel=function(){this.K=!0,Ss(this)};function Ts(A){A.T=Date.now()+A.H,Bs(A,A.H)}function Bs(A,te){if(A.D!=null)throw Error("WatchDog timer not null");A.D=He(p(A.aa,A),te)}function qn(A){A.D&&(l.clearTimeout(A.D),A.D=null)}Xn.prototype.aa=function(){this.D=null;const A=Date.now();A-this.T>=0?(Et(this.i,this.B),this.M!=2&&(Fe(),_e(17)),Ss(this),this.m=2,da(this)):Bs(this,this.T-A)};function da(A){A.j.I==0||A.K||xu(A.j,A)}function Ss(A){qn(A);var te=A.O;te&&typeof te.dispose=="function"&&te.dispose(),A.O=null,rn(A.V),A.g&&(te=A.g,A.g=null,te.abort(),te.dispose())}function Wo(A,te){try{var ue=A.j;if(ue.I!=0&&(ue.g==A||hc(ue.h,A))){if(!A.L&&hc(ue.h,A)&&ue.I==3){try{var Me=ue.Ba.g.parse(te)}catch{Me=null}if(Array.isArray(Me)&&Me.length==3){var Tt=Me;if(Tt[0]==0){e:if(!ue.v){if(ue.g)if(ue.g.F+3e3<A.F)gl(ue),Ko(ue);else break e;Ya(ue),_e(18)}}else ue.xa=Tt[1],0<ue.xa-ue.K&&Tt[2]<37500&&ue.F&&ue.A==0&&!ue.C&&(ue.C=He(p(ue.Va,ue),6e3));Ka(ue.h)<=1&&ue.ta&&(ue.ta=void 0)}else ao(ue,11)}else if((A.L||ue.g==A)&&gl(ue),!Z(te))for(Tt=ue.Ba.g.parse(te),te=0;te<Tt.length;te++){let Si=Tt[te];const rr=Si[0];if(!(rr<=ue.K))if(ue.K=rr,Si=Si[1],ue.I==2)if(Si[0]=="c"){ue.M=Si[1],ue.ba=Si[2];const Qn=Si[3];Qn!=null&&(ue.ka=Qn,ue.j.info("VER="+ue.ka));const Xs=Si[4];Xs!=null&&(ue.za=Xs,ue.j.info("SVER="+ue.za));const Za=Si[5];Za!=null&&typeof Za=="number"&&Za>0&&(Me=1.5*Za,ue.O=Me,ue.j.info("backChannelRequestTimeoutMs_="+Me)),Me=ue;const ya=A.g;if(ya){const Gc=ya.g?ya.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Gc){var Mt=Me.h;Mt.g||Gc.indexOf("spdy")==-1&&Gc.indexOf("quic")==-1&&Gc.indexOf("h2")==-1||(Mt.j=Mt.l,Mt.g=new Set,Mt.h&&(Ho(Mt,Mt.h),Mt.h=null))}if(Me.G){const Ja=ya.g?ya.g.getResponseHeader("X-HTTP-Session-Id"):null;Ja&&(Me.wa=Ja,Ji(Me.J,Me.G,Ja))}}ue.I=3,ue.l&&ue.l.ra(),ue.aa&&(ue.T=Date.now()-A.F,ue.j.info("Handshake RTT: "+ue.T+"ms")),Me=ue;var yn=A;if(Me.na=Wc(Me,Me.L?Me.ba:null,Me.W),yn.L){Co(Me.h,yn);var di=yn,Mr=Me.O;Mr&&(di.H=Mr),di.D&&(qn(di),Ts(di)),Me.g=yn}else gc(Me);ue.i.length>0&&Ul(ue)}else Si[0]!="stop"&&Si[0]!="close"||ao(ue,7);else ue.I==3&&(Si[0]=="stop"||Si[0]=="close"?Si[0]=="stop"?ao(ue,7):Xa(ue):Si[0]!="noop"&&ue.l&&ue.l.qa(Si),ue.A=0)}}Fe(4)}catch{}}var qa=class{constructor(A,te){this.g=A,this.map=te}};function So(A){this.l=A||10,l.PerformanceNavigationTiming?(A=l.performance.getEntriesByType("navigation"),A=A.length>0&&(A[0].nextHopProtocol=="hq"||A[0].nextHopProtocol=="h2")):A=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=A?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Eo(A){return A.h?!0:A.g?A.g.size>=A.j:!1}function Ka(A){return A.h?1:A.g?A.g.size:0}function hc(A,te){return A.h?A.h==te:A.g?A.g.has(te):!1}function Ho(A,te){A.g?A.g.add(te):A.h=te}function Co(A,te){A.h&&A.h==te?A.h=null:A.g&&A.g.has(te)&&A.g.delete(te)}So.prototype.cancel=function(){if(this.i=Fl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const A of this.g.values())A.cancel();this.g.clear()}};function Fl(A){if(A.h!=null)return A.i.concat(A.h.G);if(A.g!=null&&A.g.size!==0){let te=A.i;for(const ue of A.g.values())te=te.concat(ue.G);return te}return k(A.i)}var Dt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ha(A,te){if(A){A=A.split("&");for(let ue=0;ue<A.length;ue++){const Me=A[ue].indexOf("=");let Tt,Mt=null;Me>=0?(Tt=A[ue].substring(0,Me),Mt=A[ue].substring(Me+1)):Tt=A[ue],te(Tt,Mt?decodeURIComponent(Mt.replace(/\+/g," ")):"")}}}function zi(A){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let te;A instanceof zi?(this.l=A.l,zl(this,A.j),this.o=A.o,this.g=A.g,Fs(this,A.u),this.h=A.h,fc(this,Nl(A.i)),this.m=A.m):A&&(te=String(A).match(Dt))?(this.l=!1,zl(this,te[1]||"",!0),this.o=dn(te[2]||""),this.g=dn(te[3]||"",!0),Fs(this,te[4]),this.h=dn(te[5]||"",!0),fc(this,te[6]||"",!0),this.m=dn(te[7]||"")):(this.l=!1,this.i=new Ks(null,this.l))}zi.prototype.toString=function(){const A=[];var te=this.j;te&&A.push(Nn(te,pr,!0),":");var ue=this.g;return(ue||te=="file")&&(A.push("//"),(te=this.o)&&A.push(Nn(te,pr,!0),"@"),A.push(jn(ue).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),ue=this.u,ue!=null&&A.push(":",String(ue))),(ue=this.h)&&(this.g&&ue.charAt(0)!="/"&&A.push("/"),A.push(Nn(ue,ue.charAt(0)=="/"?ni:oo,!0))),(ue=this.i.toString())&&A.push("?",ue),(ue=this.m)&&A.push("#",Nn(ue,Go)),A.join("")},zi.prototype.resolve=function(A){const te=Ki(this);let ue=!!A.j;ue?zl(te,A.j):ue=!!A.o,ue?te.o=A.o:ue=!!A.g,ue?te.g=A.g:ue=A.u!=null;var Me=A.h;if(ue)Fs(te,A.u);else if(ue=!!A.h){if(Me.charAt(0)!="/")if(this.g&&!this.h)Me="/"+Me;else{var Tt=te.h.lastIndexOf("/");Tt!=-1&&(Me=te.h.slice(0,Tt+1)+Me)}if(Tt=Me,Tt==".."||Tt==".")Me="";else if(Tt.indexOf("./")!=-1||Tt.indexOf("/.")!=-1){Me=Tt.lastIndexOf("/",0)==0,Tt=Tt.split("/");const Mt=[];for(let yn=0;yn<Tt.length;){const di=Tt[yn++];di=="."?Me&&yn==Tt.length&&Mt.push(""):di==".."?((Mt.length>1||Mt.length==1&&Mt[0]!="")&&Mt.pop(),Me&&yn==Tt.length&&Mt.push("")):(Mt.push(di),Me=!0)}Me=Mt.join("/")}else Me=Tt}return ue?te.h=Me:ue=A.i.toString()!=="",ue?fc(te,Nl(A.i)):ue=!!A.m,ue&&(te.m=A.m),te};function Ki(A){return new zi(A)}function zl(A,te,ue){A.j=ue?dn(te,!0):te,A.j&&(A.j=A.j.replace(/:$/,""))}function Fs(A,te){if(te){if(te=Number(te),isNaN(te)||te<0)throw Error("Bad port number "+te);A.u=te}else A.u=null}function fc(A,te,ue){te instanceof Ks?(A.i=te,Oh(A.i,A.l)):(ue||(te=Nn(te,Pr)),A.i=new Ks(te,A.l))}function Ji(A,te,ue){A.i.set(te,ue)}function fa(A){return Ji(A,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),A}function dn(A,te){return A?te?decodeURI(A.replace(/%25/g,"%2525")):decodeURIComponent(A):""}function Nn(A,te,ue){return typeof A=="string"?(A=encodeURI(A).replace(te,Yn),ue&&(A=A.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),A):null}function Yn(A){return A=A.charCodeAt(0),"%"+(A>>4&15).toString(16)+(A&15).toString(16)}var pr=/[#\/\?@]/g,oo=/[#\?:]/g,ni=/[#\?]/g,Pr=/[#\?@]/g,Go=/#/g;function Ks(A,te){this.h=this.g=null,this.i=A||null,this.j=!!te}function kr(A){A.g||(A.g=new Map,A.h=0,A.i&&ha(A.i,function(te,ue){A.add(decodeURIComponent(te.replace(/\+/g," ")),ue)}))}e=Ks.prototype,e.add=function(A,te){kr(this),this.i=null,A=Es(this,A);let ue=this.g.get(A);return ue||this.g.set(A,ue=[]),ue.push(te),this.h+=1,this};function Ni(A,te){kr(A),te=Es(A,te),A.g.has(te)&&(A.i=null,A.h-=A.g.get(te).length,A.g.delete(te))}function yu(A,te){return kr(A),te=Es(A,te),A.g.has(te)}e.forEach=function(A,te){kr(this),this.g.forEach(function(ue,Me){ue.forEach(function(Tt){A.call(te,Tt,Me,this)},this)},this)};function zs(A,te){kr(A);let ue=[];if(typeof te=="string")yu(A,te)&&(ue=ue.concat(A.g.get(Es(A,te))));else for(A=Array.from(A.g.values()),te=0;te<A.length;te++)ue=ue.concat(A[te]);return ue}e.set=function(A,te){return kr(this),this.i=null,A=Es(this,A),yu(this,A)&&(this.h-=this.g.get(A).length),this.g.set(A,[te]),this.h+=1,this},e.get=function(A,te){return A?(A=zs(this,A),A.length>0?String(A[0]):te):te};function ul(A,te,ue){Ni(A,te),ue.length>0&&(A.i=null,A.g.set(Es(A,te),k(ue)),A.h+=ue.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const A=[],te=Array.from(this.g.keys());for(let Me=0;Me<te.length;Me++){var ue=te[Me];const Tt=jn(ue);ue=zs(this,ue);for(let Mt=0;Mt<ue.length;Mt++){let yn=Tt;ue[Mt]!==""&&(yn+="="+jn(ue[Mt])),A.push(yn)}}return this.i=A.join("&")};function Nl(A){const te=new Ks;return te.i=A.i,A.g&&(te.g=new Map(A.g),te.h=A.h),te}function Es(A,te){return te=String(te),A.j&&(te=te.toLowerCase()),te}function Oh(A,te){te&&!A.j&&(kr(A),A.i=null,A.g.forEach(function(ue,Me){const Tt=Me.toLowerCase();Me!=Tt&&(Ni(this,Me),ul(this,Tt,ue))},A)),A.j=te}function ko(A,te){const ue=new st;if(l.Image){const Me=new Image;Me.onload=_(Io,ue,"TestLoadImage: loaded",!0,te,Me),Me.onerror=_(Io,ue,"TestLoadImage: error",!1,te,Me),Me.onabort=_(Io,ue,"TestLoadImage: abort",!1,te,Me),Me.ontimeout=_(Io,ue,"TestLoadImage: timeout",!1,te,Me),l.setTimeout(function(){Me.ontimeout&&Me.ontimeout()},1e4),Me.src=A}else te(!1)}function dl(A,te){const ue=new st,Me=new AbortController,Tt=setTimeout(()=>{Me.abort(),Io(ue,"TestPingServer: timeout",!1,te)},1e4);fetch(A,{signal:Me.signal}).then(Mt=>{clearTimeout(Tt),Mt.ok?Io(ue,"TestPingServer: ok",!0,te):Io(ue,"TestPingServer: server error",!1,te)}).catch(()=>{clearTimeout(Tt),Io(ue,"TestPingServer: error",!1,te)})}function Io(A,te,ue,Me,Tt){try{Tt&&(Tt.onload=null,Tt.onerror=null,Tt.onabort=null,Tt.ontimeout=null),Me(ue)}catch{}}function ma(){this.g=new ki}function ss(A){this.i=A.Sb||null,this.h=A.ab||!1}x(ss,qi),ss.prototype.g=function(){return new Ui(this.i,this.h)};function Ui(A,te){Pt.call(this),this.H=A,this.o=te,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}x(Ui,Pt),e=Ui.prototype,e.open=function(A,te){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=A,this.D=te,this.readyState=1,Xr(this)},e.send=function(A){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const te={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};A&&(te.body=A),(this.H||l).fetch(new Request(this.D,te)).then(this.Pa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,hl(this)),this.readyState=0},e.Pa=function(A){if(this.g&&(this.l=A,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=A.headers,this.readyState=2,Xr(this)),this.g&&(this.readyState=3,Xr(this),this.g)))if(this.responseType==="arraybuffer")A.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in A){if(this.j=A.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;$c(this)}else A.text().then(this.Oa.bind(this),this.ga.bind(this))};function $c(A){A.j.read().then(A.Ma.bind(A)).catch(A.ga.bind(A))}e.Ma=function(A){if(this.g){if(this.o&&A.value)this.response.push(A.value);else if(!this.o){var te=A.value?A.value:new Uint8Array(0);(te=this.B.decode(te,{stream:!A.done}))&&(this.response=this.responseText+=te)}A.done?hl(this):Xr(this),this.readyState==3&&$c(this)}},e.Oa=function(A){this.g&&(this.response=this.responseText=A,hl(this))},e.Na=function(A){this.g&&(this.response=A,hl(this))},e.ga=function(){this.g&&hl(this)};function hl(A){A.readyState=4,A.l=null,A.j=null,A.B=null,Xr(A)}e.setRequestHeader=function(A,te){this.A.append(A,te)},e.getResponseHeader=function(A){return this.h&&this.h.get(A.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const A=[],te=this.h.entries();for(var ue=te.next();!ue.done;)ue=ue.value,A.push(ue[0]+": "+ue[1]),ue=te.next();return A.join(`\r
`)};function Xr(A){A.onreadystatechange&&A.onreadystatechange.call(A)}Object.defineProperty(Ui.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(A){this.m=A?"include":"same-origin"}});function os(A){let te="";return Le(A,function(ue,Me){te+=Me,te+=":",te+=ue,te+=`\r
`}),te}function bu(A,te,ue){e:{for(Me in ue){var Me=!1;break e}Me=!0}Me||(ue=os(ue),typeof A=="string"?ue!=null&&jn(ue):Ji(A,te,ue))}function Qi(A){Pt.call(this),this.headers=new Map,this.L=A||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}x(Qi,Pt);var gr=/^https?$/i,fl=["POST","PUT"];e=Qi.prototype,e.Fa=function(A){this.H=A},e.ea=function(A,te,ue,Me){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+A);te=te?te.toUpperCase():"GET",this.D=A,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Kn.g(),this.g.onreadystatechange=T(p(this.Ca,this));try{this.B=!0,this.g.open(te,String(A),!0),this.B=!1}catch(Mt){mc(this,Mt);return}if(A=ue||"",ue=new Map(this.headers),Me)if(Object.getPrototypeOf(Me)===Object.prototype)for(var Tt in Me)ue.set(Tt,Me[Tt]);else if(typeof Me.keys=="function"&&typeof Me.get=="function")for(const Mt of Me.keys())ue.set(Mt,Me.get(Mt));else throw Error("Unknown input type for opt_headers: "+String(Me));Me=Array.from(ue.keys()).find(Mt=>Mt.toLowerCase()=="content-type"),Tt=l.FormData&&A instanceof l.FormData,!(Array.prototype.indexOf.call(fl,te,void 0)>=0)||Me||Tt||ue.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Mt,yn]of ue)this.g.setRequestHeader(Mt,yn);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(A),this.v=!1}catch(Mt){mc(this,Mt)}};function mc(A,te){A.h=!1,A.g&&(A.j=!0,A.g.abort(),A.j=!1),A.l=te,A.o=5,ml(A),pc(A)}function ml(A){A.A||(A.A=!0,Bt(A,"complete"),Bt(A,"error"))}e.abort=function(A){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=A||7,Bt(this,"complete"),Bt(this,"abort"),pc(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),pc(this,!0)),Qi.Z.N.call(this)},e.Ca=function(){this.u||(this.B||this.v||this.j?Rr(this):this.Xa())},e.Xa=function(){Rr(this)};function Rr(A){if(A.h&&typeof a<"u"){if(A.v&&qo(A)==4)setTimeout(A.Ca.bind(A),0);else if(Bt(A,"readystatechange"),qo(A)==4){A.h=!1;try{const Mt=A.ca();e:switch(Mt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var te=!0;break e;default:te=!1}var ue;if(!(ue=te)){var Me;if(Me=Mt===0){let yn=String(A.D).match(Dt)[1]||null;!yn&&l.self&&l.self.location&&(yn=l.self.location.protocol.slice(0,-1)),Me=!gr.test(yn?yn.toLowerCase():"")}ue=Me}if(ue)Bt(A,"complete"),Bt(A,"success");else{A.o=6;try{var Tt=qo(A)>2?A.g.statusText:""}catch{Tt=""}A.l=Tt+" ["+A.ca()+"]",ml(A)}}finally{pc(A)}}}}function pc(A,te){if(A.g){A.m&&(clearTimeout(A.m),A.m=null);const ue=A.g;A.g=null,te||Bt(A,"ready");try{ue.onreadystatechange=null}catch{}}}e.isActive=function(){return!!this.g};function qo(A){return A.g?A.g.readyState:0}e.ca=function(){try{return qo(this)>2?this.g.status:-1}catch{return-1}},e.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.La=function(A){if(this.g){var te=this.g.responseText;return A&&te.indexOf(A)==0&&(te=te.substring(A.length)),Bn(te)}};function Ao(A){try{if(!A.g)return null;if("response"in A.g)return A.g.response;switch(A.F){case"":case"text":return A.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in A.g)return A.g.mozResponseArrayBuffer}return null}catch{return null}}function pa(A){const te={};A=(A.g&&qo(A)>=2&&A.g.getAllResponseHeaders()||"").split(`\r
`);for(let Me=0;Me<A.length;Me++){if(Z(A[Me]))continue;var ue=oi(A[Me]);const Tt=ue[0];if(ue=ue[1],typeof ue!="string")continue;ue=ue.trim();const Mt=te[Tt]||[];te[Tt]=Mt,Mt.push(ue)}Ze(te,function(Me){return Me.join(", ")})}e.ya=function(){return this.o},e.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ga(A,te,ue){return ue&&ue.internalChannelParams&&ue.internalChannelParams[A]||te}function vd(A){this.za=0,this.i=[],this.j=new st,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ga("failFast",!1,A),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ga("baseRetryDelayMs",5e3,A),this.Za=ga("retryDelaySeedMs",1e4,A),this.Ta=ga("forwardChannelMaxRetries",2,A),this.va=ga("forwardChannelRequestTimeoutMs",2e4,A),this.ma=A&&A.xmlHttpFactory||void 0,this.Ua=A&&A.Rb||void 0,this.Aa=A&&A.useFetchStreams||!1,this.O=void 0,this.L=A&&A.supportsCrossDomainXhr||!1,this.M="",this.h=new So(A&&A.concurrentRequestLimit),this.Ba=new ma,this.S=A&&A.fastHandshake||!1,this.R=A&&A.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=A&&A.Pb||!1,A&&A.ua&&this.j.ua(),A&&A.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&A&&A.detectBufferingProxy||!1,this.ia=void 0,A&&A.longPollingTimeout&&A.longPollingTimeout>0&&(this.ia=A.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}e=vd.prototype,e.ka=8,e.I=1,e.connect=function(A,te,ue,Me){_e(0),this.W=A,this.H=te||{},ue&&Me!==void 0&&(this.H.OSID=ue,this.H.OAID=Me),this.F=this.X,this.J=Wc(this,null,this.W),Ul(this)};function Xa(A){if(Po(A),A.I==3){var te=A.V++,ue=Ki(A.J);if(Ji(ue,"SID",A.M),Ji(ue,"RID",te),Ji(ue,"TYPE","terminate"),_a(A,ue),te=new Xn(A,A.j,te),te.M=2,te.A=fa(Ki(ue)),ue=!1,l.navigator&&l.navigator.sendBeacon)try{ue=l.navigator.sendBeacon(te.A.toString(),"")}catch{}!ue&&l.Image&&(new Image().src=te.A,ue=!0),ue||(te.g=Tu(te.j,null),te.g.ea(te.A)),te.F=Date.now(),Ts(te)}Ti(A)}function Ko(A){A.g&&(pl(A),A.g.cancel(),A.g=null)}function Po(A){Ko(A),A.v&&(l.clearTimeout(A.v),A.v=null),gl(A),A.h.cancel(),A.m&&(typeof A.m=="number"&&l.clearTimeout(A.m),A.m=null)}function Ul(A){if(!Eo(A.h)&&!A.m){A.m=!0;var te=A.Ea;ee||$(),ie||(ee(),ie=!0),J.add(te,A),A.D=0}}function Mo(A,te){return Ka(A.h)>=A.h.j-(A.m?1:0)?!1:A.m?(A.i=te.G.concat(A.i),!0):A.I==1||A.I==2||A.D>=(A.Sa?0:A.Ta)?!1:(A.m=He(p(A.Ea,A,te),wu(A,A.D)),A.D++,!0)}e.Ea=function(A){if(this.m)if(this.m=null,this.I==1){if(!A){this.V=Math.floor(Math.random()*1e5),A=this.V++;const Tt=new Xn(this,this.j,A);let Mt=this.o;if(this.U&&(Mt?(Mt=Ee(Mt),it(Mt,this.U)):Mt=this.U),this.u!==null||this.R||(Tt.J=Mt,Mt=null),this.S)e:{for(var te=0,ue=0;ue<this.i.length;ue++){t:{var Me=this.i[ue];if("__data__"in Me.map&&(Me=Me.map.__data__,typeof Me=="string")){Me=Me.length;break t}Me=void 0}if(Me===void 0)break;if(te+=Me,te>4096){te=ue;break e}if(te===4096||ue===this.i.length-1){te=ue+1;break e}}te=1e3}else te=1e3;te=Xo(this,Tt,te),ue=Ki(this.J),Ji(ue,"RID",A),Ji(ue,"CVER",22),this.G&&Ji(ue,"X-HTTP-Session-Id",this.G),_a(this,ue),Mt&&(this.R?te="headers="+jn(os(Mt))+"&"+te:this.u&&bu(ue,this.u,Mt)),Ho(this.h,Tt),this.Ra&&Ji(ue,"TYPE","init"),this.S?(Ji(ue,"$req",te),Ji(ue,"SID","null"),Tt.U=!0,wr(Tt,ue,null)):wr(Tt,ue,te),this.I=2}}else this.I==3&&(A?va(this,A):this.i.length==0||Eo(this.h)||va(this))};function va(A,te){var ue;te?ue=te.l:ue=A.V++;const Me=Ki(A.J);Ji(Me,"SID",A.M),Ji(Me,"RID",ue),Ji(Me,"AID",A.K),_a(A,Me),A.u&&A.o&&bu(Me,A.u,A.o),ue=new Xn(A,A.j,ue,A.D+1),A.u===null&&(ue.J=A.o),te&&(A.i=te.G.concat(A.i)),te=Xo(A,ue,1e3),ue.H=Math.round(A.va*.5)+Math.round(A.va*.5*Math.random()),Ho(A.h,ue),wr(ue,Me,te)}function _a(A,te){A.H&&Le(A.H,function(ue,Me){Ji(te,Me,ue)}),A.l&&Le({},function(ue,Me){Ji(te,Me,ue)})}function Xo(A,te,ue){ue=Math.min(A.i.length,ue);const Me=A.l?p(A.l.Ka,A.l,A):null;e:{var Tt=A.i;let di=-1;for(;;){const Mr=["count="+ue];di==-1?ue>0?(di=Tt[0].g,Mr.push("ofs="+di)):di=0:Mr.push("ofs="+di);let Si=!0;for(let rr=0;rr<ue;rr++){var Mt=Tt[rr].g;const Qn=Tt[rr].map;if(Mt-=di,Mt<0)di=Math.max(0,Tt[rr].g-100),Si=!1;else try{Mt="req"+Mt+"_"||"";try{var yn=Qn instanceof Map?Qn:Object.entries(Qn);for(const[Xs,Za]of yn){let ya=Za;h(Za)&&(ya=fn(Za)),Mr.push(Mt+Xs+"="+encodeURIComponent(ya))}}catch(Xs){throw Mr.push(Mt+"type="+encodeURIComponent("_badmap")),Xs}}catch{Me&&Me(Qn)}}if(Si){yn=Mr.join("&");break e}}yn=void 0}return A=A.i.splice(0,ue),te.G=A,yn}function gc(A){if(!A.g&&!A.v){A.Y=1;var te=A.Da;ee||$(),ie||(ee(),ie=!0),J.add(te,A),A.A=0}}function Ya(A){return A.g||A.v||A.A>=3?!1:(A.Y++,A.v=He(p(A.Da,A),wu(A,A.A)),A.A++,!0)}e.Da=function(){if(this.v=null,jc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var A=4*this.T;this.j.info("BP detection timer enabled: "+A),this.B=He(p(this.Wa,this),A)}},e.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,_e(10),Ko(this),jc(this))};function pl(A){A.B!=null&&(l.clearTimeout(A.B),A.B=null)}function jc(A){A.g=new Xn(A,A.j,"rpc",A.Y),A.u===null&&(A.g.J=A.o),A.g.P=0;var te=Ki(A.na);Ji(te,"RID","rpc"),Ji(te,"SID",A.M),Ji(te,"AID",A.K),Ji(te,"CI",A.F?"0":"1"),!A.F&&A.ia&&Ji(te,"TO",A.ia),Ji(te,"TYPE","xmlhttp"),_a(A,te),A.u&&A.o&&bu(te,A.u,A.o),A.O&&(A.g.H=A.O);var ue=A.g;A=A.ba,ue.M=1,ue.A=fa(Ki(te)),ue.u=null,ue.R=!0,jo(ue,A)}e.Va=function(){this.C!=null&&(this.C=null,Ko(this),Ya(this),_e(19))};function gl(A){A.C!=null&&(l.clearTimeout(A.C),A.C=null)}function xu(A,te){var ue=null;if(A.g==te){gl(A),pl(A),A.g=null;var Me=2}else if(hc(A.h,te))ue=te.G,Co(A.h,te),Me=1;else return;if(A.I!=0){if(te.o)if(Me==1){ue=te.u?te.u.length:0,te=Date.now()-te.F;var Tt=A.D;Me=To(),Bt(Me,new Ve(Me,ue)),Ul(A)}else gc(A);else if(Tt=te.m,Tt==3||Tt==0&&te.X>0||!(Me==1&&Mo(A,te)||Me==2&&Ya(A)))switch(ue&&ue.length>0&&(te=A.h,te.i=te.i.concat(ue)),Tt){case 1:ao(A,5);break;case 4:ao(A,10);break;case 3:ao(A,6);break;default:ao(A,2)}}}function wu(A,te){let ue=A.Qa+Math.floor(Math.random()*A.Za);return A.isActive()||(ue*=2),ue*te}function ao(A,te){if(A.j.info("Error code "+te),te==2){var ue=p(A.bb,A),Me=A.Ua;const Tt=!Me;Me=new zi(Me||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||zl(Me,"https"),fa(Me),Tt?ko(Me.toString(),ue):dl(Me.toString(),ue)}else _e(2);A.I=0,A.l&&A.l.pa(te),Ti(A),Po(A)}e.bb=function(A){A?(this.j.info("Successfully pinged google.com"),_e(2)):(this.j.info("Failed to ping google.com"),_e(1))};function Ti(A){if(A.I=0,A.ja=[],A.l){const te=Fl(A.h);(te.length!=0||A.i.length!=0)&&(P(A.ja,te),P(A.ja,A.i),A.h.i.length=0,k(A.i),A.i.length=0),A.l.oa()}}function Wc(A,te,ue){var Me=ue instanceof zi?Ki(ue):new zi(ue);if(Me.g!="")te&&(Me.g=te+"."+Me.g),Fs(Me,Me.u);else{var Tt=l.location;Me=Tt.protocol,te=te?te+"."+Tt.hostname:Tt.hostname,Tt=+Tt.port;const Mt=new zi(null);Me&&zl(Mt,Me),te&&(Mt.g=te),Tt&&Fs(Mt,Tt),ue&&(Mt.h=ue),Me=Mt}return ue=A.G,te=A.wa,ue&&te&&Ji(Me,ue,te),Ji(Me,"VER",A.ka),_a(A,Me),Me}function Tu(A,te,ue){if(te&&!A.L)throw Error("Can't create secondary domain capable XhrIo object.");return te=A.Aa&&!A.ma?new Qi(new ss({ab:ue})):new Qi(A.ma),te.Fa(A.L),te}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function _d(){}e=_d.prototype,e.ra=function(){},e.qa=function(){},e.pa=function(){},e.oa=function(){},e.isActive=function(){return!0},e.Ka=function(){};function vl(){}vl.prototype.g=function(A,te){return new Ns(A,te)};function Ns(A,te){Pt.call(this),this.g=new vd(te),this.l=A,this.h=te&&te.messageUrlParams||null,A=te&&te.messageHeaders||null,te&&te.clientProtocolHeaderRequired&&(A?A["X-Client-Protocol"]="webchannel":A={"X-Client-Protocol":"webchannel"}),this.g.o=A,A=te&&te.initMessageHeaders||null,te&&te.messageContentType&&(A?A["X-WebChannel-Content-Type"]=te.messageContentType:A={"X-WebChannel-Content-Type":te.messageContentType}),te&&te.sa&&(A?A["X-WebChannel-Client-Profile"]=te.sa:A={"X-WebChannel-Client-Profile":te.sa}),this.g.U=A,(A=te&&te.Qb)&&!Z(A)&&(this.g.u=A),this.A=te&&te.supportsCrossDomainXhr||!1,this.v=te&&te.sendRawJson||!1,(te=te&&te.httpSessionIdParam)&&!Z(te)&&(this.g.G=te,A=this.h,A!==null&&te in A&&(A=this.h,te in A&&delete A[te])),this.j=new Yo(this)}x(Ns,Pt),Ns.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ns.prototype.close=function(){Xa(this.g)},Ns.prototype.o=function(A){var te=this.g;if(typeof A=="string"){var ue={};ue.__data__=A,A=ue}else this.v&&(ue={},ue.__data__=fn(A),A=ue);te.i.push(new qa(te.Ya++,A)),te.I==3&&Ul(te)},Ns.prototype.N=function(){this.g.l=null,delete this.j,Xa(this.g),delete this.g,Ns.Z.N.call(this)};function Hc(A){wo.call(this),A.__headers__&&(this.headers=A.__headers__,this.statusCode=A.__status__,delete A.__headers__,delete A.__status__);var te=A.__sm__;if(te){e:{for(const ue in te){A=ue;break e}A=void 0}(this.i=A)&&(A=this.i,te=te!==null&&A in te?te[A]:void 0),this.data=te}else this.data=A}x(Hc,wo);function lo(){ir.call(this),this.status=1}x(lo,ir);function Yo(A){this.g=A}x(Yo,_d),Yo.prototype.ra=function(){Bt(this.g,"a")},Yo.prototype.qa=function(A){Bt(this.g,new Hc(A))},Yo.prototype.pa=function(A){Bt(this.g,new lo)},Yo.prototype.oa=function(){Bt(this.g,"b")},vl.prototype.createWebChannel=vl.prototype.g,Ns.prototype.send=Ns.prototype.o,Ns.prototype.open=Ns.prototype.m,Ns.prototype.close=Ns.prototype.close,j5=function(){return new vl},$5=function(){return To()},U5=xr,hk={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},cn.NO_ERROR=0,cn.TIMEOUT=8,cn.HTTP_ERROR=6,Cw=cn,en.COMPLETE="complete",N5=en,fr.EventType=ns,ns.OPEN="a",ns.CLOSE="b",ns.ERROR="c",ns.MESSAGE="d",Pt.prototype.listen=Pt.prototype.J,Uy=fr,Qi.prototype.listenOnce=Qi.prototype.K,Qi.prototype.getLastError=Qi.prototype.Ha,Qi.prototype.getLastErrorCode=Qi.prototype.ya,Qi.prototype.getStatus=Qi.prototype.ca,Qi.prototype.getResponseJson=Qi.prototype.La,Qi.prototype.getResponseText=Qi.prototype.la,Qi.prototype.send=Qi.prototype.ea,Qi.prototype.setWithCredentials=Qi.prototype.Fa,z5=Qi}).apply(typeof Ux<"u"?Ux:typeof self<"u"?self:typeof window<"u"?window:{});const DO="@firebase/firestore",LO="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Ma.UNAUTHENTICATED=new Ma(null),Ma.GOOGLE_CREDENTIALS=new Ma("google-credentials-uid"),Ma.FIRST_PARTY=new Ma("first-party-uid"),Ma.MOCK_USER=new Ma("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let x_="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jp=new uA("@firebase/firestore");function hv(){return jp.logLevel}function On(e,...t){if(jp.logLevel<=Oi.DEBUG){const n=t.map(xA);jp.debug(`Firestore (${x_}): ${e}`,...n)}}function bh(e,...t){if(jp.logLevel<=Oi.ERROR){const n=t.map(xA);jp.error(`Firestore (${x_}): ${e}`,...n)}}function Yv(e,...t){if(jp.logLevel<=Oi.WARN){const n=t.map(xA);jp.warn(`Firestore (${x_}): ${e}`,...n)}}function xA(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fi(e,t,n){let i="Unexpected state";typeof t=="string"?i=t:n=t,W5(e,i,n)}function W5(e,t,n){let i=`FIRESTORE (${x_}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw bh(i),new Error(i)}function Cr(e,t,n,i){let r="Unexpected state";typeof n=="string"?r=n:i=n,e||W5(t,r,i)}function bi(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hn={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Wn extends Ch{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(){this.promise=new Promise(((t,n)=>{this.resolve=t,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H5{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class TZ{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable((()=>n(Ma.UNAUTHENTICATED)))}shutdown(){}}class SZ{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class EZ{constructor(t){this.t=t,this.currentUser=Ma.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){Cr(this.o===void 0,42304);let i=this.i;const r=s=>this.i!==i?(i=this.i,n(s)):Promise.resolve();let a=new Wf;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Wf,t.enqueueRetryable((()=>r(this.currentUser)))};const l=()=>{const s=a;t.enqueueRetryable((async()=>{await s.promise,await r(this.currentUser)}))},h=s=>{On("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=s,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((s=>h(s))),setTimeout((()=>{if(!this.auth){const s=this.t.getImmediate({optional:!0});s?h(s):(On("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Wf)}}),0),l()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((i=>this.i!==t?(On("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Cr(typeof i.accessToken=="string",31837,{l:i}),new H5(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Cr(t===null||typeof t=="string",2055,{h:t}),new Ma(t)}}class CZ{constructor(t,n,i){this.P=t,this.T=n,this.I=i,this.type="FirstParty",this.user=Ma.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class kZ{constructor(t,n,i){this.P=t,this.T=n,this.I=i}getToken(){return Promise.resolve(new CZ(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable((()=>n(Ma.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class RO{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class IZ{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Dc(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){Cr(this.o===void 0,3512);const i=a=>{a.error!=null&&On("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.m;return this.m=a.token,On("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(a.token):Promise.resolve()};this.o=a=>{t.enqueueRetryable((()=>i(a)))};const r=a=>{On("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>r(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?r(a):On("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new RO(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((n=>n?(Cr(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new RO(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AZ(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let i=0;i<e;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=AZ(40);for(let a=0;a<r.length;++a)i.length<20&&r[a]<n&&(i+=t.charAt(r[a]%62))}return i}}function Vi(e,t){return e<t?-1:e>t?1:0}function fk(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const r=e.charAt(i),a=t.charAt(i);if(r!==a)return JE(r)===JE(a)?Vi(r,a):JE(r)?1:-1}return Vi(e.length,t.length)}const PZ=55296,MZ=57343;function JE(e){const t=e.charCodeAt(0);return t>=PZ&&t<=MZ}function Zv(e,t,n){return e.length===t.length&&e.every(((i,r)=>n(i,t[r])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OO="__name__";class Gu{constructor(t,n,i){n===void 0?n=0:n>t.length&&fi(637,{offset:n,range:t.length}),i===void 0?i=t.length-n:i>t.length-n&&fi(1746,{length:i,range:t.length-n}),this.segments=t,this.offset=n,this.len=i}get length(){return this.len}isEqual(t){return Gu.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof Gu?t.forEach((i=>{n.push(i)})):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,i=this.limit();n<i;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const i=Math.min(t.length,n.length);for(let r=0;r<i;r++){const a=Gu.compareSegments(t.get(r),n.get(r));if(a!==0)return a}return Vi(t.length,n.length)}static compareSegments(t,n){const i=Gu.isNumericId(t),r=Gu.isNumericId(n);return i&&!r?-1:!i&&r?1:i&&r?Gu.extractNumericId(t).compare(Gu.extractNumericId(n)):fk(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return jf.fromString(t.substring(4,t.length-2))}}class _s extends Gu{construct(t,n,i){return new _s(t,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const i of t){if(i.indexOf("//")>=0)throw new Wn(hn.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter((r=>r.length>0)))}return new _s(n)}static emptyPath(){return new _s([])}}const DZ=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class sa extends Gu{construct(t,n,i){return new sa(t,n,i)}static isValidIdentifier(t){return DZ.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),sa.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===OO}static keyField(){return new sa([OO])}static fromServerFormat(t){const n=[];let i="",r=0;const a=()=>{if(i.length===0)throw new Wn(hn.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let l=!1;for(;r<t.length;){const h=t[r];if(h==="\\"){if(r+1===t.length)throw new Wn(hn.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const s=t[r+1];if(s!=="\\"&&s!=="."&&s!=="`")throw new Wn(hn.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=s,r+=2}else h==="`"?(l=!l,r++):h!=="."||l?(i+=h,r++):(a(),r++)}if(a(),l)throw new Wn(hn.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new sa(n)}static emptyPath(){return new sa([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(t){this.path=t}static fromPath(t){return new ei(_s.fromString(t))}static fromName(t){return new ei(_s.fromString(t).popFirst(5))}static empty(){return new ei(_s.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&_s.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return _s.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new ei(new _s(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LZ(e,t,n){if(!n)throw new Wn(hn.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function RZ(e,t,n,i){if(t===!0&&i===!0)throw new Wn(hn.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function VO(e){if(!ei.isDocumentKey(e))throw new Wn(hn.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function G5(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function TA(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=(function(i){return i.constructor?i.constructor.name:null})(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":fi(12329,{type:typeof e})}function Jf(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Wn(hn.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=TA(e);throw new Wn(hn.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ro(e,t){const n={typeString:e};return t&&(n.value=t),n}function x0(e,t){if(!G5(e))throw new Wn(hn.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in t)if(t[i]){const r=t[i].typeString,a="value"in t[i]?{value:t[i].value}:void 0;if(!(i in e)){n=`JSON missing required field: '${i}'`;break}const l=e[i];if(r&&typeof l!==r){n=`JSON field '${i}' must be a ${r}.`;break}if(a!==void 0&&l!==a.value){n=`Expected '${i}' field to equal '${a.value}'`;break}}if(n)throw new Wn(hn.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BO=-62135596800,FO=1e6;class Zr{static now(){return Zr.fromMillis(Date.now())}static fromDate(t){return Zr.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),i=Math.floor((t-1e3*n)*FO);return new Zr(n,i)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new Wn(hn.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Wn(hn.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<BO)throw new Wn(hn.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Wn(hn.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/FO}_compareTo(t){return this.seconds===t.seconds?Vi(this.nanoseconds,t.nanoseconds):Vi(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Zr._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(x0(t,Zr._jsonSchema))return new Zr(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-BO;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Zr._jsonSchemaVersion="firestore/timestamp/1.0",Zr._jsonSchema={type:ro("string",Zr._jsonSchemaVersion),seconds:ro("number"),nanoseconds:ro("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{static fromTimestamp(t){return new vi(t)}static min(){return new vi(new Zr(0,0))}static max(){return new vi(new Zr(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ob=-1;function OZ(e,t){const n=e.toTimestamp().seconds,i=e.toTimestamp().nanoseconds+1,r=vi.fromTimestamp(i===1e9?new Zr(n+1,0):new Zr(n,i));return new Qf(r,ei.empty(),t)}function VZ(e){return new Qf(e.readTime,e.key,Ob)}class Qf{constructor(t,n,i){this.readTime=t,this.documentKey=n,this.largestBatchId=i}static min(){return new Qf(vi.min(),ei.empty(),Ob)}static max(){return new Qf(vi.max(),ei.empty(),Ob)}}function BZ(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=ei.comparator(e.documentKey,t.documentKey),n!==0?n:Vi(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FZ="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class zZ{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w_(e){if(e.code!==hn.FAILED_PRECONDITION||e.message!==FZ)throw e;On("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&fi(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new on(((i,r)=>{this.nextCallback=a=>{this.wrapSuccess(t,a).next(i,r)},this.catchCallback=a=>{this.wrapFailure(n,a).next(i,r)}}))}toPromise(){return new Promise(((t,n)=>{this.next(t,n)}))}wrapUserFunction(t){try{const n=t();return n instanceof on?n:on.resolve(n)}catch(n){return on.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction((()=>t(n))):on.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction((()=>t(n))):on.reject(n)}static resolve(t){return new on(((n,i)=>{n(t)}))}static reject(t){return new on(((n,i)=>{i(t)}))}static waitFor(t){return new on(((n,i)=>{let r=0,a=0,l=!1;t.forEach((h=>{++r,h.next((()=>{++a,l&&a===r&&n()}),(s=>i(s)))})),l=!0,a===r&&n()}))}static or(t){let n=on.resolve(!1);for(const i of t)n=n.next((r=>r?on.resolve(r):i()));return n}static forEach(t,n){const i=[];return t.forEach(((r,a)=>{i.push(n.call(this,r,a))})),this.waitFor(i)}static mapArray(t,n){return new on(((i,r)=>{const a=t.length,l=new Array(a);let h=0;for(let s=0;s<a;s++){const p=s;n(t[p]).next((_=>{l[p]=_,++h,h===a&&i(l)}),(_=>r(_)))}}))}static doWhile(t,n){return new on(((i,r)=>{const a=()=>{t()===!0?n().next((()=>{a()}),r):i()};a()}))}}function NZ(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function T_(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}vT.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SA=-1;function _T(e){return e==null}function p1(e){return e===0&&1/e==-1/0}function UZ(e){return typeof e=="number"&&Number.isInteger(e)&&!p1(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q5="";function $Z(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=zO(t)),t=jZ(e.get(n),t);return zO(t)}function jZ(e,t){let n=t;const i=e.length;for(let r=0;r<i;r++){const a=e.charAt(r);switch(a){case"\0":n+="";break;case q5:n+="";break;default:n+=a}}return n}function zO(e){return e+q5+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NO(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function fm(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function K5(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(t,n){this.comparator=t,this.root=n||na.EMPTY}insert(t,n){return new bs(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,na.BLACK,null,null))}remove(t){return new bs(this.comparator,this.root.remove(t,this.comparator).copy(null,null,na.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(t){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((n,i)=>(t(n,i),!1)))}toString(){const t=[];return this.inorderTraversal(((n,i)=>(t.push(`${n}:${i}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new $x(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new $x(this.root,t,this.comparator,!1)}getReverseIterator(){return new $x(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new $x(this.root,t,this.comparator,!0)}}class $x{constructor(t,n,i,r){this.isReverse=r,this.nodeStack=[];let a=1;for(;!t.isEmpty();)if(a=n?i(t.key,n):1,n&&r&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(a===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class na{constructor(t,n,i,r,a){this.key=t,this.value=n,this.color=i??na.RED,this.left=r??na.EMPTY,this.right=a??na.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,i,r,a){return new na(t??this.key,n??this.value,i??this.color,r??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,i){let r=this;const a=i(t,r.key);return r=a<0?r.copy(null,null,null,r.left.insert(t,n,i),null):a===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(t,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return na.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let i,r=this;if(n(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(t,r.key)===0){if(r.right.isEmpty())return na.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,na.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,na.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw fi(43730,{key:this.key,value:this.value});if(this.right.isRed())throw fi(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw fi(27949);return t+(this.isRed()?0:1)}}na.EMPTY=null,na.RED=!0,na.BLACK=!1;na.EMPTY=new class{constructor(){this.size=0}get key(){throw fi(57766)}get value(){throw fi(16141)}get color(){throw fi(16727)}get left(){throw fi(29726)}get right(){throw fi(36894)}copy(t,n,i,r,a){return this}insert(t,n,i){return new na(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(t){this.comparator=t,this.data=new bs(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((n,i)=>(t(n),!1)))}forEachInRange(t,n){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;n(r.key)}}forEachWhile(t,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new UO(this.data.getIterator())}getIteratorFrom(t){return new UO(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach((i=>{n=n.add(i)})),n}isEqual(t){if(!(t instanceof vo)||this.size!==t.size)return!1;const n=this.data.getIterator(),i=t.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,a=i.getNext().key;if(this.comparator(r,a)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((n=>{t.push(n)})),t}toString(){const t=[];return this.forEach((n=>t.push(n))),"SortedSet("+t.toString()+")"}copy(t){const n=new vo(this.comparator);return n.data=t,n}}class UO{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic{constructor(t){this.fields=t,t.sort(sa.comparator)}static empty(){return new ic([])}unionWith(t){let n=new vo(sa.comparator);for(const i of this.fields)n=n.add(i);for(const i of t)n=n.add(i);return new ic(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Zv(this.fields,t.fields,((n,i)=>n.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X5 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(t){this.binaryString=t}static fromBase64String(t){const n=(function(r){try{return atob(r)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new X5("Invalid base64 string: "+a):a}})(t);return new la(n)}static fromUint8Array(t){const n=(function(r){let a="";for(let l=0;l<r.length;++l)a+=String.fromCharCode(r[l]);return a})(t);return new la(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Vi(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}la.EMPTY_BYTE_STRING=new la("");const WZ=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function em(e){if(Cr(!!e,39018),typeof e=="string"){let t=0;const n=WZ.exec(e);if(Cr(!!n,46558,{timestamp:e}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}const i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:js(e.seconds),nanos:js(e.nanos)}}function js(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function tm(e){return typeof e=="string"?la.fromBase64String(e):la.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y5="server_timestamp",Z5="__type__",J5="__previous_value__",Q5="__local_write_time__";function EA(e){return(e?.mapValue?.fields||{})[Z5]?.stringValue===Y5}function yT(e){const t=e.mapValue.fields[J5];return EA(t)?yT(t):t}function Vb(e){const t=em(e.mapValue.fields[Q5].timestampValue);return new Zr(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HZ{constructor(t,n,i,r,a,l,h,s,p,_){this.databaseId=t,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.longPollingOptions=s,this.useFetchStreams=p,this.isUsingEmulator=_}}const g1="(default)";class Bb{constructor(t,n){this.projectId=t,this.database=n||g1}static empty(){return new Bb("","")}get isDefaultDatabase(){return this.database===g1}isEqual(t){return t instanceof Bb&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e4="__type__",GZ="__max__",jx={mapValue:{}},t4="__vector__",v1="value";function nm(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?EA(e)?4:KZ(e)?9007199254740991:qZ(e)?10:11:fi(28295,{value:e})}function ld(e,t){if(e===t)return!0;const n=nm(e);if(n!==nm(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Vb(e).isEqual(Vb(t));case 3:return(function(r,a){if(typeof r.timestampValue=="string"&&typeof a.timestampValue=="string"&&r.timestampValue.length===a.timestampValue.length)return r.timestampValue===a.timestampValue;const l=em(r.timestampValue),h=em(a.timestampValue);return l.seconds===h.seconds&&l.nanos===h.nanos})(e,t);case 5:return e.stringValue===t.stringValue;case 6:return(function(r,a){return tm(r.bytesValue).isEqual(tm(a.bytesValue))})(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return(function(r,a){return js(r.geoPointValue.latitude)===js(a.geoPointValue.latitude)&&js(r.geoPointValue.longitude)===js(a.geoPointValue.longitude)})(e,t);case 2:return(function(r,a){if("integerValue"in r&&"integerValue"in a)return js(r.integerValue)===js(a.integerValue);if("doubleValue"in r&&"doubleValue"in a){const l=js(r.doubleValue),h=js(a.doubleValue);return l===h?p1(l)===p1(h):isNaN(l)&&isNaN(h)}return!1})(e,t);case 9:return Zv(e.arrayValue.values||[],t.arrayValue.values||[],ld);case 10:case 11:return(function(r,a){const l=r.mapValue.fields||{},h=a.mapValue.fields||{};if(NO(l)!==NO(h))return!1;for(const s in l)if(l.hasOwnProperty(s)&&(h[s]===void 0||!ld(l[s],h[s])))return!1;return!0})(e,t);default:return fi(52216,{left:e})}}function Fb(e,t){return(e.values||[]).find((n=>ld(n,t)))!==void 0}function Jv(e,t){if(e===t)return 0;const n=nm(e),i=nm(t);if(n!==i)return Vi(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Vi(e.booleanValue,t.booleanValue);case 2:return(function(a,l){const h=js(a.integerValue||a.doubleValue),s=js(l.integerValue||l.doubleValue);return h<s?-1:h>s?1:h===s?0:isNaN(h)?isNaN(s)?0:-1:1})(e,t);case 3:return $O(e.timestampValue,t.timestampValue);case 4:return $O(Vb(e),Vb(t));case 5:return fk(e.stringValue,t.stringValue);case 6:return(function(a,l){const h=tm(a),s=tm(l);return h.compareTo(s)})(e.bytesValue,t.bytesValue);case 7:return(function(a,l){const h=a.split("/"),s=l.split("/");for(let p=0;p<h.length&&p<s.length;p++){const _=Vi(h[p],s[p]);if(_!==0)return _}return Vi(h.length,s.length)})(e.referenceValue,t.referenceValue);case 8:return(function(a,l){const h=Vi(js(a.latitude),js(l.latitude));return h!==0?h:Vi(js(a.longitude),js(l.longitude))})(e.geoPointValue,t.geoPointValue);case 9:return jO(e.arrayValue,t.arrayValue);case 10:return(function(a,l){const h=a.fields||{},s=l.fields||{},p=h[v1]?.arrayValue,_=s[v1]?.arrayValue,x=Vi(p?.values?.length||0,_?.values?.length||0);return x!==0?x:jO(p,_)})(e.mapValue,t.mapValue);case 11:return(function(a,l){if(a===jx.mapValue&&l===jx.mapValue)return 0;if(a===jx.mapValue)return 1;if(l===jx.mapValue)return-1;const h=a.fields||{},s=Object.keys(h),p=l.fields||{},_=Object.keys(p);s.sort(),_.sort();for(let x=0;x<s.length&&x<_.length;++x){const T=fk(s[x],_[x]);if(T!==0)return T;const k=Jv(h[s[x]],p[_[x]]);if(k!==0)return k}return Vi(s.length,_.length)})(e.mapValue,t.mapValue);default:throw fi(23264,{he:n})}}function $O(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return Vi(e,t);const n=em(e),i=em(t),r=Vi(n.seconds,i.seconds);return r!==0?r:Vi(n.nanos,i.nanos)}function jO(e,t){const n=e.values||[],i=t.values||[];for(let r=0;r<n.length&&r<i.length;++r){const a=Jv(n[r],i[r]);if(a)return a}return Vi(n.length,i.length)}function Qv(e){return mk(e)}function mk(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?(function(n){const i=em(n);return`time(${i.seconds},${i.nanos})`})(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?(function(n){return tm(n).toBase64()})(e.bytesValue):"referenceValue"in e?(function(n){return ei.fromName(n).toString()})(e.referenceValue):"geoPointValue"in e?(function(n){return`geo(${n.latitude},${n.longitude})`})(e.geoPointValue):"arrayValue"in e?(function(n){let i="[",r=!0;for(const a of n.values||[])r?r=!1:i+=",",i+=mk(a);return i+"]"})(e.arrayValue):"mapValue"in e?(function(n){const i=Object.keys(n.fields||{}).sort();let r="{",a=!0;for(const l of i)a?a=!1:r+=",",r+=`${l}:${mk(n.fields[l])}`;return r+"}"})(e.mapValue):fi(61005,{value:e})}function kw(e){switch(nm(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=yT(e);return t?16+kw(t):16;case 5:return 2*e.stringValue.length;case 6:return tm(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((r,a)=>r+kw(a)),0)})(e.arrayValue);case 10:case 11:return(function(i){let r=0;return fm(i.fields,((a,l)=>{r+=a.length+kw(l)})),r})(e.mapValue);default:throw fi(13486,{value:e})}}function pk(e){return!!e&&"integerValue"in e}function CA(e){return!!e&&"arrayValue"in e}function WO(e){return!!e&&"nullValue"in e}function HO(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Iw(e){return!!e&&"mapValue"in e}function qZ(e){return(e?.mapValue?.fields||{})[e4]?.stringValue===t4}function cb(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return fm(e.mapValue.fields,((n,i)=>t.mapValue.fields[n]=cb(i))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=cb(e.arrayValue.values[n]);return t}return{...e}}function KZ(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===GZ}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(t){this.value=t}static empty(){return new Il({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let i=0;i<t.length-1;++i)if(n=(n.mapValue.fields||{})[t.get(i)],!Iw(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=cb(n)}setAll(t){let n=sa.emptyPath(),i={},r=[];t.forEach(((l,h)=>{if(!n.isImmediateParentOf(h)){const s=this.getFieldsMap(n);this.applyChanges(s,i,r),i={},r=[],n=h.popLast()}l?i[h.lastSegment()]=cb(l):r.push(h.lastSegment())}));const a=this.getFieldsMap(n);this.applyChanges(a,i,r)}delete(t){const n=this.field(t.popLast());Iw(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return ld(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=n.mapValue.fields[t.get(i)];Iw(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[t.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(t,n,i){fm(n,((r,a)=>t[r]=a));for(const r of i)delete t[r]}clone(){return new Il(cb(this.value))}}function n4(e){const t=[];return fm(e.fields,((n,i)=>{const r=new sa([n]);if(Iw(i)){const a=n4(i.mapValue).fields;if(a.length===0)t.push(r);else for(const l of a)t.push(r.child(l))}else t.push(r)})),new ic(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(t,n,i,r,a,l,h){this.key=t,this.documentType=n,this.version=i,this.readTime=r,this.createTime=a,this.data=l,this.documentState=h}static newInvalidDocument(t){return new Ra(t,0,vi.min(),vi.min(),vi.min(),Il.empty(),0)}static newFoundDocument(t,n,i,r){return new Ra(t,1,n,vi.min(),i,r,0)}static newNoDocument(t,n){return new Ra(t,2,n,vi.min(),vi.min(),Il.empty(),0)}static newUnknownDocument(t,n){return new Ra(t,3,n,vi.min(),vi.min(),Il.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(vi.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Il.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Il.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=vi.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Ra&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Ra(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1{constructor(t,n){this.position=t,this.inclusive=n}}function GO(e,t,n){let i=0;for(let r=0;r<e.position.length;r++){const a=t[r],l=e.position[r];if(a.field.isKeyField()?i=ei.comparator(ei.fromName(l.referenceValue),n.key):i=Jv(l,n.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function qO(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!ld(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y1{constructor(t,n="asc"){this.field=t,this.dir=n}}function XZ(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i4{}class mo extends i4{constructor(t,n,i){super(),this.field=t,this.op=n,this.value=i}static create(t,n,i){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,i):new ZZ(t,n,i):n==="array-contains"?new eJ(t,i):n==="in"?new tJ(t,i):n==="not-in"?new nJ(t,i):n==="array-contains-any"?new iJ(t,i):new mo(t,n,i)}static createKeyFieldInFilter(t,n,i){return n==="in"?new JZ(t,i):new QZ(t,i)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Jv(n,this.value)):n!==null&&nm(this.value)===nm(n)&&this.matchesComparison(Jv(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return fi(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class cd extends i4{constructor(t,n){super(),this.filters=t,this.op=n,this.Pe=null}static create(t,n){return new cd(t,n)}matches(t){return r4(this)?this.filters.find((n=>!n.matches(t)))===void 0:this.filters.find((n=>n.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,n)=>t.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function r4(e){return e.op==="and"}function s4(e){return YZ(e)&&r4(e)}function YZ(e){for(const t of e.filters)if(t instanceof cd)return!1;return!0}function gk(e){if(e instanceof mo)return e.field.canonicalString()+e.op.toString()+Qv(e.value);if(s4(e))return e.filters.map((t=>gk(t))).join(",");{const t=e.filters.map((n=>gk(n))).join(",");return`${e.op}(${t})`}}function o4(e,t){return e instanceof mo?(function(i,r){return r instanceof mo&&i.op===r.op&&i.field.isEqual(r.field)&&ld(i.value,r.value)})(e,t):e instanceof cd?(function(i,r){return r instanceof cd&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce(((a,l,h)=>a&&o4(l,r.filters[h])),!0):!1})(e,t):void fi(19439)}function a4(e){return e instanceof mo?(function(n){return`${n.field.canonicalString()} ${n.op} ${Qv(n.value)}`})(e):e instanceof cd?(function(n){return n.op.toString()+" {"+n.getFilters().map(a4).join(" ,")+"}"})(e):"Filter"}class ZZ extends mo{constructor(t,n,i){super(t,n,i),this.key=ei.fromName(i.referenceValue)}matches(t){const n=ei.comparator(t.key,this.key);return this.matchesComparison(n)}}class JZ extends mo{constructor(t,n){super(t,"in",n),this.keys=l4("in",n)}matches(t){return this.keys.some((n=>n.isEqual(t.key)))}}class QZ extends mo{constructor(t,n){super(t,"not-in",n),this.keys=l4("not-in",n)}matches(t){return!this.keys.some((n=>n.isEqual(t.key)))}}function l4(e,t){return(t.arrayValue?.values||[]).map((n=>ei.fromName(n.referenceValue)))}class eJ extends mo{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return CA(n)&&Fb(n.arrayValue,this.value)}}class tJ extends mo{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&Fb(this.value.arrayValue,n)}}class nJ extends mo{constructor(t,n){super(t,"not-in",n)}matches(t){if(Fb(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Fb(this.value.arrayValue,n)}}class iJ extends mo{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!CA(n)||!n.arrayValue.values)&&n.arrayValue.values.some((i=>Fb(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rJ{constructor(t,n=null,i=[],r=[],a=null,l=null,h=null){this.path=t,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=a,this.startAt=l,this.endAt=h,this.Te=null}}function KO(e,t=null,n=[],i=[],r=null,a=null,l=null){return new rJ(e,t,n,i,r,a,l)}function kA(e){const t=bi(e);if(t.Te===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((i=>gk(i))).join(","),n+="|ob:",n+=t.orderBy.map((i=>(function(a){return a.field.canonicalString()+a.dir})(i))).join(","),_T(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((i=>Qv(i))).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((i=>Qv(i))).join(",")),t.Te=n}return t.Te}function IA(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!XZ(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!o4(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!qO(e.startAt,t.startAt)&&qO(e.endAt,t.endAt)}function vk(e){return ei.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(t,n=null,i=[],r=[],a=null,l="F",h=null,s=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=a,this.limitType=l,this.startAt=h,this.endAt=s,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function sJ(e,t,n,i,r,a,l,h){return new bT(e,t,n,i,r,a,l,h)}function AA(e){return new bT(e)}function XO(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function oJ(e){return e.collectionGroup!==null}function ub(e){const t=bi(e);if(t.Ie===null){t.Ie=[];const n=new Set;for(const a of t.explicitOrderBy)t.Ie.push(a),n.add(a.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(l){let h=new vo(sa.comparator);return l.filters.forEach((s=>{s.getFlattenedFilters().forEach((p=>{p.isInequality()&&(h=h.add(p.field))}))})),h})(t).forEach((a=>{n.has(a.canonicalString())||a.isKeyField()||t.Ie.push(new y1(a,i))})),n.has(sa.keyField().canonicalString())||t.Ie.push(new y1(sa.keyField(),i))}return t.Ie}function Qu(e){const t=bi(e);return t.Ee||(t.Ee=aJ(t,ub(e))),t.Ee}function aJ(e,t){if(e.limitType==="F")return KO(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((r=>{const a=r.dir==="desc"?"asc":"desc";return new y1(r.field,a)}));const n=e.endAt?new _1(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new _1(e.startAt.position,e.startAt.inclusive):null;return KO(e.path,e.collectionGroup,t,e.filters,e.limit,n,i)}}function _k(e,t,n){return new bT(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function xT(e,t){return IA(Qu(e),Qu(t))&&e.limitType===t.limitType}function c4(e){return`${kA(Qu(e))}|lt:${e.limitType}`}function fv(e){return`Query(target=${(function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map((r=>a4(r))).join(", ")}]`),_T(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map((r=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(r))).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map((r=>Qv(r))).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map((r=>Qv(r))).join(",")),`Target(${i})`})(Qu(e))}; limitType=${e.limitType})`}function wT(e,t){return t.isFoundDocument()&&(function(i,r){const a=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):ei.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)})(e,t)&&(function(i,r){for(const a of ub(i))if(!a.field.isKeyField()&&r.data.field(a.field)===null)return!1;return!0})(e,t)&&(function(i,r){for(const a of i.filters)if(!a.matches(r))return!1;return!0})(e,t)&&(function(i,r){return!(i.startAt&&!(function(l,h,s){const p=GO(l,h,s);return l.inclusive?p<=0:p<0})(i.startAt,ub(i),r)||i.endAt&&!(function(l,h,s){const p=GO(l,h,s);return l.inclusive?p>=0:p>0})(i.endAt,ub(i),r))})(e,t)}function lJ(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function u4(e){return(t,n)=>{let i=!1;for(const r of ub(e)){const a=cJ(r,t,n);if(a!==0)return a;i=i||r.field.isKeyField()}return 0}}function cJ(e,t,n){const i=e.field.isKeyField()?ei.comparator(t.key,n.key):(function(a,l,h){const s=l.data.field(a),p=h.data.field(a);return s!==null&&p!==null?Jv(s,p):fi(42886)})(e.field,t,n);switch(e.dir){case"asc":return i;case"desc":return-1*i;default:return fi(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i!==void 0){for(const[r,a]of i)if(this.equalsFn(r,t))return a}}has(t){return this.get(t)!==void 0}set(t,n){const i=this.mapKeyFn(t),r=this.inner[i];if(r===void 0)return this.inner[i]=[[t,n]],void this.innerSize++;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],t))return void(r[a]=[t,n]);r.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){fm(this.inner,((n,i)=>{for(const[r,a]of i)t(r,a)}))}isEmpty(){return K5(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uJ=new bs(ei.comparator);function xh(){return uJ}const d4=new bs(ei.comparator);function $y(...e){let t=d4;for(const n of e)t=t.insert(n.key,n);return t}function h4(e){let t=d4;return e.forEach(((n,i)=>t=t.insert(n,i.overlayedDocument))),t}function wp(){return db()}function f4(){return db()}function db(){return new ig((e=>e.toString()),((e,t)=>e.isEqual(t)))}const dJ=new bs(ei.comparator),hJ=new vo(ei.comparator);function Bi(...e){let t=hJ;for(const n of e)t=t.add(n);return t}const fJ=new vo(Vi);function mJ(){return fJ}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PA(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:p1(t)?"-0":t}}function m4(e){return{integerValue:""+e}}function pJ(e,t){return UZ(t)?m4(t):PA(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(){this._=void 0}}function gJ(e,t,n){return e instanceof b1?(function(r,a){const l={fields:{[Z5]:{stringValue:Y5},[Q5]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return a&&EA(a)&&(a=yT(a)),a&&(l.fields[J5]=a),{mapValue:l}})(n,t):e instanceof e_?g4(e,t):e instanceof zb?v4(e,t):(function(r,a){const l=p4(r,a),h=YO(l)+YO(r.Ae);return pk(l)&&pk(r.Ae)?m4(h):PA(r.serializer,h)})(e,t)}function vJ(e,t,n){return e instanceof e_?g4(e,t):e instanceof zb?v4(e,t):n}function p4(e,t){return e instanceof x1?(function(i){return pk(i)||(function(a){return!!a&&"doubleValue"in a})(i)})(t)?t:{integerValue:0}:null}class b1 extends TT{}class e_ extends TT{constructor(t){super(),this.elements=t}}function g4(e,t){const n=_4(t);for(const i of e.elements)n.some((r=>ld(r,i)))||n.push(i);return{arrayValue:{values:n}}}class zb extends TT{constructor(t){super(),this.elements=t}}function v4(e,t){let n=_4(t);for(const i of e.elements)n=n.filter((r=>!ld(r,i)));return{arrayValue:{values:n}}}class x1 extends TT{constructor(t,n){super(),this.serializer=t,this.Ae=n}}function YO(e){return js(e.integerValue||e.doubleValue)}function _4(e){return CA(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _J{constructor(t,n){this.field=t,this.transform=n}}function yJ(e,t){return e.field.isEqual(t.field)&&(function(i,r){return i instanceof e_&&r instanceof e_||i instanceof zb&&r instanceof zb?Zv(i.elements,r.elements,ld):i instanceof x1&&r instanceof x1?ld(i.Ae,r.Ae):i instanceof b1&&r instanceof b1})(e.transform,t.transform)}class bJ{constructor(t,n){this.version=t,this.transformResults=n}}class fu{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new fu}static exists(t){return new fu(void 0,t)}static updateTime(t){return new fu(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Aw(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class ST{}function y4(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new MA(e.key,fu.none()):new w0(e.key,e.data,fu.none());{const n=e.data,i=Il.empty();let r=new vo(sa.comparator);for(let a of t.fields)if(!r.has(a)){let l=n.field(a);l===null&&a.length>1&&(a=a.popLast(),l=n.field(a)),l===null?i.delete(a):i.set(a,l),r=r.add(a)}return new mm(e.key,i,new ic(r.toArray()),fu.none())}}function xJ(e,t,n){e instanceof w0?(function(r,a,l){const h=r.value.clone(),s=JO(r.fieldTransforms,a,l.transformResults);h.setAll(s),a.convertToFoundDocument(l.version,h).setHasCommittedMutations()})(e,t,n):e instanceof mm?(function(r,a,l){if(!Aw(r.precondition,a))return void a.convertToUnknownDocument(l.version);const h=JO(r.fieldTransforms,a,l.transformResults),s=a.data;s.setAll(b4(r)),s.setAll(h),a.convertToFoundDocument(l.version,s).setHasCommittedMutations()})(e,t,n):(function(r,a,l){a.convertToNoDocument(l.version).setHasCommittedMutations()})(0,t,n)}function hb(e,t,n,i){return e instanceof w0?(function(a,l,h,s){if(!Aw(a.precondition,l))return h;const p=a.value.clone(),_=QO(a.fieldTransforms,s,l);return p.setAll(_),l.convertToFoundDocument(l.version,p).setHasLocalMutations(),null})(e,t,n,i):e instanceof mm?(function(a,l,h,s){if(!Aw(a.precondition,l))return h;const p=QO(a.fieldTransforms,s,l),_=l.data;return _.setAll(b4(a)),_.setAll(p),l.convertToFoundDocument(l.version,_).setHasLocalMutations(),h===null?null:h.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((x=>x.field)))})(e,t,n,i):(function(a,l,h){return Aw(a.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):h})(e,t,n)}function wJ(e,t){let n=null;for(const i of e.fieldTransforms){const r=t.data.field(i.field),a=p4(i.transform,r||null);a!=null&&(n===null&&(n=Il.empty()),n.set(i.field,a))}return n||null}function ZO(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!(function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Zv(i,r,((a,l)=>yJ(a,l)))})(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class w0 extends ST{constructor(t,n,i,r=[]){super(),this.key=t,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class mm extends ST{constructor(t,n,i,r,a=[]){super(),this.key=t,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function b4(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=e.data.field(n);t.set(n,i)}})),t}function JO(e,t,n){const i=new Map;Cr(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let r=0;r<n.length;r++){const a=e[r],l=a.transform,h=t.data.field(a.field);i.set(a.field,vJ(l,h,n[r]))}return i}function QO(e,t,n){const i=new Map;for(const r of e){const a=r.transform,l=n.data.field(r.field);i.set(r.field,gJ(a,l,t))}return i}class MA extends ST{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class TJ extends ST{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SJ{constructor(t,n,i,r){this.batchId=t,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const a=this.mutations[r];a.key.isEqual(t.key)&&xJ(a,t,i[r])}}applyToLocalView(t,n){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(n=hb(i,t,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(n=hb(i,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const i=f4();return this.mutations.forEach((r=>{const a=t.get(r.key),l=a.overlayedDocument;let h=this.applyToLocalView(l,a.mutatedFields);h=n.has(r.key)?null:h;const s=y4(l,h);s!==null&&i.set(r.key,s),l.isValidDocument()||l.convertToNoDocument(vi.min())})),i}keys(){return this.mutations.reduce(((t,n)=>t.add(n.key)),Bi())}isEqual(t){return this.batchId===t.batchId&&Zv(this.mutations,t.mutations,((n,i)=>ZO(n,i)))&&Zv(this.baseMutations,t.baseMutations,((n,i)=>ZO(n,i)))}}class DA{constructor(t,n,i,r){this.batch=t,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(t,n,i){Cr(t.mutations.length===i.length,58842,{me:t.mutations.length,fe:i.length});let r=(function(){return dJ})();const a=t.mutations;for(let l=0;l<a.length;l++)r=r.insert(a[l].key,i[l].version);return new DA(t,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EJ{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CJ{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var eo,Yi;function kJ(e){switch(e){case hn.OK:return fi(64938);case hn.CANCELLED:case hn.UNKNOWN:case hn.DEADLINE_EXCEEDED:case hn.RESOURCE_EXHAUSTED:case hn.INTERNAL:case hn.UNAVAILABLE:case hn.UNAUTHENTICATED:return!1;case hn.INVALID_ARGUMENT:case hn.NOT_FOUND:case hn.ALREADY_EXISTS:case hn.PERMISSION_DENIED:case hn.FAILED_PRECONDITION:case hn.ABORTED:case hn.OUT_OF_RANGE:case hn.UNIMPLEMENTED:case hn.DATA_LOSS:return!0;default:return fi(15467,{code:e})}}function x4(e){if(e===void 0)return bh("GRPC error has no .code"),hn.UNKNOWN;switch(e){case eo.OK:return hn.OK;case eo.CANCELLED:return hn.CANCELLED;case eo.UNKNOWN:return hn.UNKNOWN;case eo.DEADLINE_EXCEEDED:return hn.DEADLINE_EXCEEDED;case eo.RESOURCE_EXHAUSTED:return hn.RESOURCE_EXHAUSTED;case eo.INTERNAL:return hn.INTERNAL;case eo.UNAVAILABLE:return hn.UNAVAILABLE;case eo.UNAUTHENTICATED:return hn.UNAUTHENTICATED;case eo.INVALID_ARGUMENT:return hn.INVALID_ARGUMENT;case eo.NOT_FOUND:return hn.NOT_FOUND;case eo.ALREADY_EXISTS:return hn.ALREADY_EXISTS;case eo.PERMISSION_DENIED:return hn.PERMISSION_DENIED;case eo.FAILED_PRECONDITION:return hn.FAILED_PRECONDITION;case eo.ABORTED:return hn.ABORTED;case eo.OUT_OF_RANGE:return hn.OUT_OF_RANGE;case eo.UNIMPLEMENTED:return hn.UNIMPLEMENTED;case eo.DATA_LOSS:return hn.DATA_LOSS;default:return fi(39323,{code:e})}}(Yi=eo||(eo={}))[Yi.OK=0]="OK",Yi[Yi.CANCELLED=1]="CANCELLED",Yi[Yi.UNKNOWN=2]="UNKNOWN",Yi[Yi.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Yi[Yi.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Yi[Yi.NOT_FOUND=5]="NOT_FOUND",Yi[Yi.ALREADY_EXISTS=6]="ALREADY_EXISTS",Yi[Yi.PERMISSION_DENIED=7]="PERMISSION_DENIED",Yi[Yi.UNAUTHENTICATED=16]="UNAUTHENTICATED",Yi[Yi.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Yi[Yi.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Yi[Yi.ABORTED=10]="ABORTED",Yi[Yi.OUT_OF_RANGE=11]="OUT_OF_RANGE",Yi[Yi.UNIMPLEMENTED=12]="UNIMPLEMENTED",Yi[Yi.INTERNAL=13]="INTERNAL",Yi[Yi.UNAVAILABLE=14]="UNAVAILABLE",Yi[Yi.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IJ(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AJ=new jf([4294967295,4294967295],0);function eV(e){const t=IJ().encode(e),n=new F5;return n.update(t),new Uint8Array(n.digest())}function tV(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),i=t.getUint32(4,!0),r=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new jf([n,i],0),new jf([r,a],0)]}class LA{constructor(t,n,i){if(this.bitmap=t,this.padding=n,this.hashCount=i,n<0||n>=8)throw new jy(`Invalid padding: ${n}`);if(i<0)throw new jy(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new jy(`Invalid hash count: ${i}`);if(t.length===0&&n!==0)throw new jy(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*t.length-n,this.pe=jf.fromNumber(this.ge)}ye(t,n,i){let r=t.add(n.multiply(jf.fromNumber(i)));return r.compare(AJ)===1&&(r=new jf([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const n=eV(t),[i,r]=tV(n);for(let a=0;a<this.hashCount;a++){const l=this.ye(i,r,a);if(!this.we(l))return!1}return!0}static create(t,n,i){const r=t%8==0?0:8-t%8,a=new Uint8Array(Math.ceil(t/8)),l=new LA(a,r,n);return i.forEach((h=>l.insert(h))),l}insert(t){if(this.ge===0)return;const n=eV(t),[i,r]=tV(n);for(let a=0;a<this.hashCount;a++){const l=this.ye(i,r,a);this.Se(l)}}Se(t){const n=Math.floor(t/8),i=t%8;this.bitmap[n]|=1<<i}}class jy extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{constructor(t,n,i,r,a){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(t,n,i){const r=new Map;return r.set(t,T0.createSynthesizedTargetChangeForCurrentChange(t,n,i)),new ET(vi.min(),r,new bs(Vi),xh(),Bi())}}class T0{constructor(t,n,i,r,a){this.resumeToken=t,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(t,n,i){return new T0(i,n,Bi(),Bi(),Bi())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pw{constructor(t,n,i,r){this.be=t,this.removedTargetIds=n,this.key=i,this.De=r}}class w4{constructor(t,n){this.targetId=t,this.Ce=n}}class T4{constructor(t,n,i=la.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=n,this.resumeToken=i,this.cause=r}}class nV{constructor(){this.ve=0,this.Fe=iV(),this.Me=la.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Bi(),n=Bi(),i=Bi();return this.Fe.forEach(((r,a)=>{switch(a){case 0:t=t.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:fi(38017,{changeType:a})}})),new T0(this.Me,this.xe,t,n,i)}qe(){this.Oe=!1,this.Fe=iV()}Qe(t,n){this.Oe=!0,this.Fe=this.Fe.insert(t,n)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,Cr(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class PJ{constructor(t){this.Ge=t,this.ze=new Map,this.je=xh(),this.Je=Wx(),this.He=Wx(),this.Ye=new bs(Vi)}Ze(t){for(const n of t.be)t.De&&t.De.isFoundDocument()?this.Xe(n,t.De):this.et(n,t.key,t.De);for(const n of t.removedTargetIds)this.et(n,t.key,t.De)}tt(t){this.forEachTarget(t,(n=>{const i=this.nt(n);switch(t.state){case 0:this.rt(n)&&i.Le(t.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(t.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(t.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(t.resumeToken));break;default:fi(56790,{state:t.state})}}))}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ze.forEach(((i,r)=>{this.rt(r)&&n(r)}))}st(t){const n=t.targetId,i=t.Ce.count,r=this.ot(n);if(r){const a=r.target;if(vk(a))if(i===0){const l=new ei(a.path);this.et(n,l,Ra.newNoDocument(l,vi.min()))}else Cr(i===1,20013,{expectedCount:i});else{const l=this._t(n);if(l!==i){const h=this.ut(t),s=h?this.ct(h,t,l):1;if(s!==0){this.it(n);const p=s===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,p)}}}}}ut(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:a=0}=n;let l,h;try{l=tm(i).toUint8Array()}catch(s){if(s instanceof X5)return Yv("Decoding the base64 bloom filter in existence filter failed ("+s.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw s}try{h=new LA(l,r,a)}catch(s){return Yv(s instanceof jy?"BloomFilter error: ":"Applying bloom filter failed: ",s),null}return h.ge===0?null:h}ct(t,n,i){return n.Ce.count===i-this.Pt(t,n.targetId)?0:2}Pt(t,n){const i=this.Ge.getRemoteKeysForTarget(n);let r=0;return i.forEach((a=>{const l=this.Ge.ht(),h=`projects/${l.projectId}/databases/${l.database}/documents/${a.path.canonicalString()}`;t.mightContain(h)||(this.et(n,a,null),r++)})),r}Tt(t){const n=new Map;this.ze.forEach(((a,l)=>{const h=this.ot(l);if(h){if(a.current&&vk(h.target)){const s=new ei(h.target.path);this.It(s).has(l)||this.Et(l,s)||this.et(l,s,Ra.newNoDocument(s,t))}a.Be&&(n.set(l,a.ke()),a.qe())}}));let i=Bi();this.He.forEach(((a,l)=>{let h=!0;l.forEachWhile((s=>{const p=this.ot(s);return!p||p.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(i=i.add(a))})),this.je.forEach(((a,l)=>l.setReadTime(t)));const r=new ET(t,n,this.Ye,this.je,i);return this.je=xh(),this.Je=Wx(),this.He=Wx(),this.Ye=new bs(Vi),r}Xe(t,n){if(!this.rt(t))return;const i=this.Et(t,n.key)?2:0;this.nt(t).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(t)),this.He=this.He.insert(n.key,this.dt(n.key).add(t))}et(t,n,i){if(!this.rt(t))return;const r=this.nt(t);this.Et(t,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(t)),this.He=this.He.insert(n,this.dt(n).add(t)),i&&(this.je=this.je.insert(n,i))}removeTarget(t){this.ze.delete(t)}_t(t){const n=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let n=this.ze.get(t);return n||(n=new nV,this.ze.set(t,n)),n}dt(t){let n=this.He.get(t);return n||(n=new vo(Vi),this.He=this.He.insert(t,n)),n}It(t){let n=this.Je.get(t);return n||(n=new vo(Vi),this.Je=this.Je.insert(t,n)),n}rt(t){const n=this.ot(t)!==null;return n||On("WatchChangeAggregator","Detected inactive target",t),n}ot(t){const n=this.ze.get(t);return n&&n.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new nV),this.Ge.getRemoteKeysForTarget(t).forEach((n=>{this.et(t,n,null)}))}Et(t,n){return this.Ge.getRemoteKeysForTarget(t).has(n)}}function Wx(){return new bs(ei.comparator)}function iV(){return new bs(ei.comparator)}const MJ={asc:"ASCENDING",desc:"DESCENDING"},DJ={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},LJ={and:"AND",or:"OR"};class RJ{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function yk(e,t){return e.useProto3Json||_T(t)?t:{value:t}}function w1(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function S4(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function OJ(e,t){return w1(e,t.toTimestamp())}function ed(e){return Cr(!!e,49232),vi.fromTimestamp((function(n){const i=em(n);return new Zr(i.seconds,i.nanos)})(e))}function RA(e,t){return bk(e,t).canonicalString()}function bk(e,t){const n=(function(r){return new _s(["projects",r.projectId,"databases",r.database])})(e).child("documents");return t===void 0?n:n.child(t)}function E4(e){const t=_s.fromString(e);return Cr(P4(t),10190,{key:t.toString()}),t}function xk(e,t){return RA(e.databaseId,t.path)}function QE(e,t){const n=E4(t);if(n.get(1)!==e.databaseId.projectId)throw new Wn(hn.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Wn(hn.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ei(k4(n))}function C4(e,t){return RA(e.databaseId,t)}function VJ(e){const t=E4(e);return t.length===4?_s.emptyPath():k4(t)}function wk(e){return new _s(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function k4(e){return Cr(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function rV(e,t,n){return{name:xk(e,t),fields:n.value.mapValue.fields}}function BJ(e,t){let n;if("targetChange"in t){t.targetChange;const i=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:fi(39313,{state:p})})(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],a=(function(p,_){return p.useProto3Json?(Cr(_===void 0||typeof _=="string",58123),la.fromBase64String(_||"")):(Cr(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),la.fromUint8Array(_||new Uint8Array))})(e,t.targetChange.resumeToken),l=t.targetChange.cause,h=l&&(function(p){const _=p.code===void 0?hn.UNKNOWN:x4(p.code);return new Wn(_,p.message||"")})(l);n=new T4(i,r,a,h||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const r=QE(e,i.document.name),a=ed(i.document.updateTime),l=i.document.createTime?ed(i.document.createTime):vi.min(),h=new Il({mapValue:{fields:i.document.fields}}),s=Ra.newFoundDocument(r,a,l,h),p=i.targetIds||[],_=i.removedTargetIds||[];n=new Pw(p,_,s.key,s)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const r=QE(e,i.document),a=i.readTime?ed(i.readTime):vi.min(),l=Ra.newNoDocument(r,a),h=i.removedTargetIds||[];n=new Pw([],h,l.key,l)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const r=QE(e,i.document),a=i.removedTargetIds||[];n=new Pw([],a,r,null)}else{if(!("filter"in t))return fi(11601,{Rt:t});{t.filter;const i=t.filter;i.targetId;const{count:r=0,unchangedNames:a}=i,l=new CJ(r,a),h=i.targetId;n=new w4(h,l)}}return n}function FJ(e,t){let n;if(t instanceof w0)n={update:rV(e,t.key,t.value)};else if(t instanceof MA)n={delete:xk(e,t.key)};else if(t instanceof mm)n={update:rV(e,t.key,t.data),updateMask:qJ(t.fieldMask)};else{if(!(t instanceof TJ))return fi(16599,{Vt:t.type});n={verify:xk(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((i=>(function(a,l){const h=l.transform;if(h instanceof b1)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof e_)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof zb)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof x1)return{fieldPath:l.field.canonicalString(),increment:h.Ae};throw fi(20930,{transform:l.transform})})(0,i)))),t.precondition.isNone||(n.currentDocument=(function(r,a){return a.updateTime!==void 0?{updateTime:OJ(r,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:fi(27497)})(e,t.precondition)),n}function zJ(e,t){return e&&e.length>0?(Cr(t!==void 0,14353),e.map((n=>(function(r,a){let l=r.updateTime?ed(r.updateTime):ed(a);return l.isEqual(vi.min())&&(l=ed(a)),new bJ(l,r.transformResults||[])})(n,t)))):[]}function NJ(e,t){return{documents:[C4(e,t.path)]}}function UJ(e,t){const n={structuredQuery:{}},i=t.path;let r;t.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=C4(e,r);const a=(function(p){if(p.length!==0)return A4(cd.create(p,"and"))})(t.filters);a&&(n.structuredQuery.where=a);const l=(function(p){if(p.length!==0)return p.map((_=>(function(T){return{field:mv(T.field),direction:WJ(T.dir)}})(_)))})(t.orderBy);l&&(n.structuredQuery.orderBy=l);const h=yk(e,t.limit);return h!==null&&(n.structuredQuery.limit=h),t.startAt&&(n.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(t.startAt)),t.endAt&&(n.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(t.endAt)),{ft:n,parent:r}}function $J(e){let t=VJ(e.parent);const n=e.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){Cr(i===1,65062);const _=n.from[0];_.allDescendants?r=_.collectionId:t=t.child(_.collectionId)}let a=[];n.where&&(a=(function(x){const T=I4(x);return T instanceof cd&&s4(T)?T.getFilters():[T]})(n.where));let l=[];n.orderBy&&(l=(function(x){return x.map((T=>(function(P){return new y1(pv(P.field),(function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(P.direction))})(T)))})(n.orderBy));let h=null;n.limit&&(h=(function(x){let T;return T=typeof x=="object"?x.value:x,_T(T)?null:T})(n.limit));let s=null;n.startAt&&(s=(function(x){const T=!!x.before,k=x.values||[];return new _1(k,T)})(n.startAt));let p=null;return n.endAt&&(p=(function(x){const T=!x.before,k=x.values||[];return new _1(k,T)})(n.endAt)),sJ(t,r,l,a,h,"F",s,p)}function jJ(e,t){const n=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return fi(28987,{purpose:r})}})(t.purpose);return n==null?null:{"goog-listen-tags":n}}function I4(e){return e.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=pv(n.unaryFilter.field);return mo.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=pv(n.unaryFilter.field);return mo.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=pv(n.unaryFilter.field);return mo.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=pv(n.unaryFilter.field);return mo.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return fi(61313);default:return fi(60726)}})(e):e.fieldFilter!==void 0?(function(n){return mo.create(pv(n.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return fi(58110);default:return fi(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(e):e.compositeFilter!==void 0?(function(n){return cd.create(n.compositeFilter.filters.map((i=>I4(i))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return fi(1026)}})(n.compositeFilter.op))})(e):fi(30097,{filter:e})}function WJ(e){return MJ[e]}function HJ(e){return DJ[e]}function GJ(e){return LJ[e]}function mv(e){return{fieldPath:e.canonicalString()}}function pv(e){return sa.fromServerFormat(e.fieldPath)}function A4(e){return e instanceof mo?(function(n){if(n.op==="=="){if(HO(n.value))return{unaryFilter:{field:mv(n.field),op:"IS_NAN"}};if(WO(n.value))return{unaryFilter:{field:mv(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(HO(n.value))return{unaryFilter:{field:mv(n.field),op:"IS_NOT_NAN"}};if(WO(n.value))return{unaryFilter:{field:mv(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:mv(n.field),op:HJ(n.op),value:n.value}}})(e):e instanceof cd?(function(n){const i=n.getFilters().map((r=>A4(r)));return i.length===1?i[0]:{compositeFilter:{op:GJ(n.op),filters:i}}})(e):fi(54877,{filter:e})}function qJ(e){const t=[];return e.fields.forEach((n=>t.push(n.canonicalString()))),{fieldPaths:t}}function P4(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(t,n,i,r,a=vi.min(),l=vi.min(),h=la.EMPTY_BYTE_STRING,s=null){this.target=t,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h,this.expectedCount=s}withSequenceNumber(t){return new Df(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Df(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Df(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Df(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KJ{constructor(t){this.yt=t}}function XJ(e){const t=$J({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?_k(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YJ{constructor(){this.Cn=new ZJ}addToCollectionParentIndex(t,n){return this.Cn.add(n),on.resolve()}getCollectionParents(t,n){return on.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return on.resolve()}deleteFieldIndex(t,n){return on.resolve()}deleteAllFieldIndexes(t){return on.resolve()}createTargetIndexes(t,n){return on.resolve()}getDocumentsMatchingTarget(t,n){return on.resolve(null)}getIndexType(t,n){return on.resolve(0)}getFieldIndexes(t,n){return on.resolve([])}getNextCollectionGroupToUpdate(t){return on.resolve(null)}getMinOffset(t,n){return on.resolve(Qf.min())}getMinOffsetFromCollectionGroup(t,n){return on.resolve(Qf.min())}updateCollectionGroup(t,n,i){return on.resolve()}updateIndexEntries(t,n){return on.resolve()}}class ZJ{constructor(){this.index={}}add(t){const n=t.lastSegment(),i=t.popLast(),r=this.index[n]||new vo(_s.comparator),a=!r.has(i);return this.index[n]=r.add(i),a}has(t){const n=t.lastSegment(),i=t.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(t){return(this.index[t]||new vo(_s.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sV={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},M4=41943040;class kl{static withCacheSize(t){return new kl(t,kl.DEFAULT_COLLECTION_PERCENTILE,kl.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */kl.DEFAULT_COLLECTION_PERCENTILE=10,kl.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,kl.DEFAULT=new kl(M4,kl.DEFAULT_COLLECTION_PERCENTILE,kl.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),kl.DISABLED=new kl(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new t_(0)}static cr(){return new t_(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oV="LruGarbageCollector",JJ=1048576;function aV([e,t],[n,i]){const r=Vi(e,n);return r===0?Vi(t,i):r}class QJ{constructor(t){this.Ir=t,this.buffer=new vo(aV),this.Er=0}dr(){return++this.Er}Ar(t){const n=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();aV(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class eQ{constructor(t,n,i){this.garbageCollector=t,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){On(oV,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){T_(n)?On(oV,"Ignoring IndexedDB error during garbage collection: ",n):await w_(n)}await this.Vr(3e5)}))}}class tQ{constructor(t,n){this.mr=t,this.params=n}calculateTargetCount(t,n){return this.mr.gr(t).next((i=>Math.floor(n/100*i)))}nthSequenceNumber(t,n){if(n===0)return on.resolve(vT.ce);const i=new QJ(n);return this.mr.forEachTarget(t,(r=>i.Ar(r.sequenceNumber))).next((()=>this.mr.pr(t,(r=>i.Ar(r))))).next((()=>i.maxValue))}removeTargets(t,n,i){return this.mr.removeTargets(t,n,i)}removeOrphanedDocuments(t,n){return this.mr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(On("LruGarbageCollector","Garbage collection skipped; disabled"),on.resolve(sV)):this.getCacheSize(t).next((i=>i<this.params.cacheSizeCollectionThreshold?(On("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),sV):this.yr(t,n)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,n){let i,r,a,l,h,s,p;const _=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((x=>(x>this.params.maximumSequenceNumbersToCollect?(On("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),r=this.params.maximumSequenceNumbersToCollect):r=x,l=Date.now(),this.nthSequenceNumber(t,r)))).next((x=>(i=x,h=Date.now(),this.removeTargets(t,i,n)))).next((x=>(a=x,s=Date.now(),this.removeOrphanedDocuments(t,i)))).next((x=>(p=Date.now(),hv()<=Oi.DEBUG&&On("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-_}ms
	Determined least recently used ${r} in `+(h-l)+`ms
	Removed ${a} targets in `+(s-h)+`ms
	Removed ${x} documents in `+(p-s)+`ms
Total Duration: ${p-_}ms`),on.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:a,documentsRemoved:x}))))}}function nQ(e,t){return new tQ(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iQ{constructor(){this.changes=new ig((t=>t.toString()),((t,n)=>t.isEqual(n))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,Ra.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?on.resolve(i):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rQ{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sQ{constructor(t,n,i,r){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(t,n){let i=null;return this.documentOverlayCache.getOverlay(t,n).next((r=>(i=r,this.remoteDocumentCache.getEntry(t,n)))).next((r=>(i!==null&&hb(i.mutation,r,ic.empty(),Zr.now()),r)))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next((i=>this.getLocalViewOfDocuments(t,i,Bi()).next((()=>i))))}getLocalViewOfDocuments(t,n,i=Bi()){const r=wp();return this.populateOverlays(t,r,n).next((()=>this.computeViews(t,n,r,i).next((a=>{let l=$y();return a.forEach(((h,s)=>{l=l.insert(h,s.overlayedDocument)})),l}))))}getOverlayedDocuments(t,n){const i=wp();return this.populateOverlays(t,i,n).next((()=>this.computeViews(t,n,i,Bi())))}populateOverlays(t,n,i){const r=[];return i.forEach((a=>{n.has(a)||r.push(a)})),this.documentOverlayCache.getOverlays(t,r).next((a=>{a.forEach(((l,h)=>{n.set(l,h)}))}))}computeViews(t,n,i,r){let a=xh();const l=db(),h=(function(){return db()})();return n.forEach(((s,p)=>{const _=i.get(p.key);r.has(p.key)&&(_===void 0||_.mutation instanceof mm)?a=a.insert(p.key,p):_!==void 0?(l.set(p.key,_.mutation.getFieldMask()),hb(_.mutation,p,_.mutation.getFieldMask(),Zr.now())):l.set(p.key,ic.empty())})),this.recalculateAndSaveOverlays(t,a).next((s=>(s.forEach(((p,_)=>l.set(p,_))),n.forEach(((p,_)=>h.set(p,new rQ(_,l.get(p)??null)))),h)))}recalculateAndSaveOverlays(t,n){const i=db();let r=new bs(((l,h)=>l-h)),a=Bi();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next((l=>{for(const h of l)h.keys().forEach((s=>{const p=n.get(s);if(p===null)return;let _=i.get(s)||ic.empty();_=h.applyToLocalView(p,_),i.set(s,_);const x=(r.get(h.batchId)||Bi()).add(s);r=r.insert(h.batchId,x)}))})).next((()=>{const l=[],h=r.getReverseIterator();for(;h.hasNext();){const s=h.getNext(),p=s.key,_=s.value,x=f4();_.forEach((T=>{if(!a.has(T)){const k=y4(n.get(T),i.get(T));k!==null&&x.set(T,k),a=a.add(T)}})),l.push(this.documentOverlayCache.saveOverlays(t,p,x))}return on.waitFor(l)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next((i=>this.recalculateAndSaveOverlays(t,i)))}getDocumentsMatchingQuery(t,n,i,r){return(function(l){return ei.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):oJ(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,i,r):this.getDocumentsMatchingCollectionQuery(t,n,i,r)}getNextDocuments(t,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,i,r).next((a=>{const l=r-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,i.largestBatchId,r-a.size):on.resolve(wp());let h=Ob,s=a;return l.next((p=>on.forEach(p,((_,x)=>(h<x.largestBatchId&&(h=x.largestBatchId),a.get(_)?on.resolve():this.remoteDocumentCache.getEntry(t,_).next((T=>{s=s.insert(_,T)}))))).next((()=>this.populateOverlays(t,p,a))).next((()=>this.computeViews(t,s,p,Bi()))).next((_=>({batchId:h,changes:h4(_)})))))}))}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new ei(n)).next((i=>{let r=$y();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r}))}getDocumentsMatchingCollectionGroupQuery(t,n,i,r){const a=n.collectionGroup;let l=$y();return this.indexManager.getCollectionParents(t,a).next((h=>on.forEach(h,(s=>{const p=(function(x,T){return new bT(T,null,x.explicitOrderBy.slice(),x.filters.slice(),x.limit,x.limitType,x.startAt,x.endAt)})(n,s.child(a));return this.getDocumentsMatchingCollectionQuery(t,p,i,r).next((_=>{_.forEach(((x,T)=>{l=l.insert(x,T)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(t,n,i,r){let a;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,i.largestBatchId).next((l=>(a=l,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,i,a,r)))).next((l=>{a.forEach(((s,p)=>{const _=p.getKey();l.get(_)===null&&(l=l.insert(_,Ra.newInvalidDocument(_)))}));let h=$y();return l.forEach(((s,p)=>{const _=a.get(s);_!==void 0&&hb(_.mutation,p,ic.empty(),Zr.now()),wT(n,p)&&(h=h.insert(s,p))})),h}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oQ{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,n){return on.resolve(this.Lr.get(n))}saveBundleMetadata(t,n){return this.Lr.set(n.id,(function(r){return{id:r.id,version:r.version,createTime:ed(r.createTime)}})(n)),on.resolve()}getNamedQuery(t,n){return on.resolve(this.kr.get(n))}saveNamedQuery(t,n){return this.kr.set(n.name,(function(r){return{name:r.name,query:XJ(r.bundledQuery),readTime:ed(r.readTime)}})(n)),on.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aQ{constructor(){this.overlays=new bs(ei.comparator),this.qr=new Map}getOverlay(t,n){return on.resolve(this.overlays.get(n))}getOverlays(t,n){const i=wp();return on.forEach(n,(r=>this.getOverlay(t,r).next((a=>{a!==null&&i.set(r,a)})))).next((()=>i))}saveOverlays(t,n,i){return i.forEach(((r,a)=>{this.St(t,n,a)})),on.resolve()}removeOverlaysForBatchId(t,n,i){const r=this.qr.get(i);return r!==void 0&&(r.forEach((a=>this.overlays=this.overlays.remove(a))),this.qr.delete(i)),on.resolve()}getOverlaysForCollection(t,n,i){const r=wp(),a=n.length+1,l=new ei(n.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const s=h.getNext().value,p=s.getKey();if(!n.isPrefixOf(p.path))break;p.path.length===a&&s.largestBatchId>i&&r.set(s.getKey(),s)}return on.resolve(r)}getOverlaysForCollectionGroup(t,n,i,r){let a=new bs(((p,_)=>p-_));const l=this.overlays.getIterator();for(;l.hasNext();){const p=l.getNext().value;if(p.getKey().getCollectionGroup()===n&&p.largestBatchId>i){let _=a.get(p.largestBatchId);_===null&&(_=wp(),a=a.insert(p.largestBatchId,_)),_.set(p.getKey(),p)}}const h=wp(),s=a.getIterator();for(;s.hasNext()&&(s.getNext().value.forEach(((p,_)=>h.set(p,_))),!(h.size()>=r)););return on.resolve(h)}St(t,n,i){const r=this.overlays.get(i.key);if(r!==null){const l=this.qr.get(r.largestBatchId).delete(i.key);this.qr.set(r.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new EJ(n,i));let a=this.qr.get(n);a===void 0&&(a=Bi(),this.qr.set(n,a)),this.qr.set(n,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lQ{constructor(){this.sessionToken=la.EMPTY_BYTE_STRING}getSessionToken(t){return on.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,on.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA{constructor(){this.Qr=new vo(Oo.$r),this.Ur=new vo(Oo.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,n){const i=new Oo(t,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(t,n){t.forEach((i=>this.addReference(i,n)))}removeReference(t,n){this.Gr(new Oo(t,n))}zr(t,n){t.forEach((i=>this.removeReference(i,n)))}jr(t){const n=new ei(new _s([])),i=new Oo(n,t),r=new Oo(n,t+1),a=[];return this.Ur.forEachInRange([i,r],(l=>{this.Gr(l),a.push(l.key)})),a}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const n=new ei(new _s([])),i=new Oo(n,t),r=new Oo(n,t+1);let a=Bi();return this.Ur.forEachInRange([i,r],(l=>{a=a.add(l.key)})),a}containsKey(t){const n=new Oo(t,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&t.isEqual(i.key)}}class Oo{constructor(t,n){this.key=t,this.Yr=n}static $r(t,n){return ei.comparator(t.key,n.key)||Vi(t.Yr,n.Yr)}static Kr(t,n){return Vi(t.Yr,n.Yr)||ei.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cQ{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new vo(Oo.$r)}checkEmpty(t){return on.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,i,r){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new SJ(a,n,i,r);this.mutationQueue.push(l);for(const h of r)this.Zr=this.Zr.add(new Oo(h.key,a)),this.indexManager.addToCollectionParentIndex(t,h.key.path.popLast());return on.resolve(l)}lookupMutationBatch(t,n){return on.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(t,n){const i=n+1,r=this.ei(i),a=r<0?0:r;return on.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return on.resolve(this.mutationQueue.length===0?SA:this.tr-1)}getAllMutationBatches(t){return on.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const i=new Oo(n,0),r=new Oo(n,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([i,r],(l=>{const h=this.Xr(l.Yr);a.push(h)})),on.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(t,n){let i=new vo(Vi);return n.forEach((r=>{const a=new Oo(r,0),l=new Oo(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,l],(h=>{i=i.add(h.Yr)}))})),on.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(t,n){const i=n.path,r=i.length+1;let a=i;ei.isDocumentKey(a)||(a=a.child(""));const l=new Oo(new ei(a),0);let h=new vo(Vi);return this.Zr.forEachWhile((s=>{const p=s.key.path;return!!i.isPrefixOf(p)&&(p.length===r&&(h=h.add(s.Yr)),!0)}),l),on.resolve(this.ti(h))}ti(t){const n=[];return t.forEach((i=>{const r=this.Xr(i);r!==null&&n.push(r)})),n}removeMutationBatch(t,n){Cr(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return on.forEach(n.mutations,(r=>{const a=new Oo(r.key,n.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)})).next((()=>{this.Zr=i}))}ir(t){}containsKey(t,n){const i=new Oo(n,0),r=this.Zr.firstAfterOrEqual(i);return on.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,on.resolve()}ni(t,n){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const n=this.ei(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uQ{constructor(t){this.ri=t,this.docs=(function(){return new bs(ei.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const i=n.key,r=this.docs.get(i),a=r?r.size:0,l=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const i=this.docs.get(n);return on.resolve(i?i.document.mutableCopy():Ra.newInvalidDocument(n))}getEntries(t,n){let i=xh();return n.forEach((r=>{const a=this.docs.get(r);i=i.insert(r,a?a.document.mutableCopy():Ra.newInvalidDocument(r))})),on.resolve(i)}getDocumentsMatchingQuery(t,n,i,r){let a=xh();const l=n.path,h=new ei(l.child("__id-9223372036854775808__")),s=this.docs.getIteratorFrom(h);for(;s.hasNext();){const{key:p,value:{document:_}}=s.getNext();if(!l.isPrefixOf(p.path))break;p.path.length>l.length+1||BZ(VZ(_),i)<=0||(r.has(_.key)||wT(n,_))&&(a=a.insert(_.key,_.mutableCopy()))}return on.resolve(a)}getAllFromCollectionGroup(t,n,i,r){fi(9500)}ii(t,n){return on.forEach(this.docs,(i=>n(i)))}newChangeBuffer(t){return new dQ(this)}getSize(t){return on.resolve(this.size)}}class dQ extends iQ{constructor(t){super(),this.Nr=t}applyChanges(t){const n=[];return this.changes.forEach(((i,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(t,r)):this.Nr.removeEntry(i)})),on.waitFor(n)}getFromCache(t,n){return this.Nr.getEntry(t,n)}getAllFromCache(t,n){return this.Nr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hQ{constructor(t){this.persistence=t,this.si=new ig((n=>kA(n)),IA),this.lastRemoteSnapshotVersion=vi.min(),this.highestTargetId=0,this.oi=0,this._i=new OA,this.targetCount=0,this.ai=t_.ur()}forEachTarget(t,n){return this.si.forEach(((i,r)=>n(r))),on.resolve()}getLastRemoteSnapshotVersion(t){return on.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return on.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),on.resolve(this.highestTargetId)}setTargetsMetadata(t,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),on.resolve()}Pr(t){this.si.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ai=new t_(n),this.highestTargetId=n),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,n){return this.Pr(n),this.targetCount+=1,on.resolve()}updateTargetData(t,n){return this.Pr(n),on.resolve()}removeTargetData(t,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,on.resolve()}removeTargets(t,n,i){let r=0;const a=[];return this.si.forEach(((l,h)=>{h.sequenceNumber<=n&&i.get(h.targetId)===null&&(this.si.delete(l),a.push(this.removeMatchingKeysForTargetId(t,h.targetId)),r++)})),on.waitFor(a).next((()=>r))}getTargetCount(t){return on.resolve(this.targetCount)}getTargetData(t,n){const i=this.si.get(n)||null;return on.resolve(i)}addMatchingKeys(t,n,i){return this._i.Wr(n,i),on.resolve()}removeMatchingKeys(t,n,i){this._i.zr(n,i);const r=this.persistence.referenceDelegate,a=[];return r&&n.forEach((l=>{a.push(r.markPotentiallyOrphaned(t,l))})),on.waitFor(a)}removeMatchingKeysForTargetId(t,n){return this._i.jr(n),on.resolve()}getMatchingKeysForTargetId(t,n){const i=this._i.Hr(n);return on.resolve(i)}containsKey(t,n){return on.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D4{constructor(t,n){this.ui={},this.overlays={},this.ci=new vT(0),this.li=!1,this.li=!0,this.hi=new lQ,this.referenceDelegate=t(this),this.Pi=new hQ(this),this.indexManager=new YJ,this.remoteDocumentCache=(function(r){return new uQ(r)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new KJ(n),this.Ii=new oQ(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new aQ,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let i=this.ui[t.toKey()];return i||(i=new cQ(n,this.referenceDelegate),this.ui[t.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,n,i){On("MemoryPersistence","Starting transaction:",t);const r=new fQ(this.ci.next());return this.referenceDelegate.Ei(),i(r).next((a=>this.referenceDelegate.di(r).next((()=>a)))).toPromise().then((a=>(r.raiseOnCommittedEvent(),a)))}Ai(t,n){return on.or(Object.values(this.ui).map((i=>()=>i.containsKey(t,n))))}}class fQ extends zZ{constructor(t){super(),this.currentSequenceNumber=t}}class VA{constructor(t){this.persistence=t,this.Ri=new OA,this.Vi=null}static mi(t){return new VA(t)}get fi(){if(this.Vi)return this.Vi;throw fi(60996)}addReference(t,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),on.resolve()}removeReference(t,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),on.resolve()}markPotentiallyOrphaned(t,n){return this.fi.add(n.toString()),on.resolve()}removeTarget(t,n){this.Ri.jr(n.targetId).forEach((r=>this.fi.add(r.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,n.targetId).next((r=>{r.forEach((a=>this.fi.add(a.toString())))})).next((()=>i.removeTargetData(t,n)))}Ei(){this.Vi=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return on.forEach(this.fi,(i=>{const r=ei.fromPath(i);return this.gi(t,r).next((a=>{a||n.removeEntry(r,vi.min())}))})).next((()=>(this.Vi=null,n.apply(t))))}updateLimboDocument(t,n){return this.gi(t,n).next((i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(t){return 0}gi(t,n){return on.or([()=>on.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ai(t,n)])}}class T1{constructor(t,n){this.persistence=t,this.pi=new ig((i=>$Z(i.path)),((i,r)=>i.isEqual(r))),this.garbageCollector=nQ(this,n)}static mi(t,n){return new T1(t,n)}Ei(){}di(t){return on.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}gr(t){const n=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((i=>n.next((r=>i+r))))}wr(t){let n=0;return this.pr(t,(i=>{n++})).next((()=>n))}pr(t,n){return on.forEach(this.pi,((i,r)=>this.br(t,i,r).next((a=>a?on.resolve():n(r)))))}removeTargets(t,n,i){return this.persistence.getTargetCache().removeTargets(t,n,i)}removeOrphanedDocuments(t,n){let i=0;const r=this.persistence.getRemoteDocumentCache(),a=r.newChangeBuffer();return r.ii(t,(l=>this.br(t,l,n).next((h=>{h||(i++,a.removeEntry(l,vi.min()))})))).next((()=>a.apply(t))).next((()=>i))}markPotentiallyOrphaned(t,n){return this.pi.set(n,t.currentSequenceNumber),on.resolve()}removeTarget(t,n){const i=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,n,i){return this.pi.set(i,t.currentSequenceNumber),on.resolve()}removeReference(t,n,i){return this.pi.set(i,t.currentSequenceNumber),on.resolve()}updateLimboDocument(t,n){return this.pi.set(n,t.currentSequenceNumber),on.resolve()}Ti(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=kw(t.data.value)),n}br(t,n,i){return on.or([()=>this.persistence.Ai(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const r=this.pi.get(n);return on.resolve(r!==void 0&&r>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(t,n,i,r){this.targetId=t,this.fromCache=n,this.Es=i,this.ds=r}static As(t,n){let i=Bi(),r=Bi();for(const a of n.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:r=r.add(a.doc.key)}return new BA(t,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mQ{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pQ{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return zq()?8:NZ(ja())>0?6:4})()}initialize(t,n){this.ps=t,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(t,n,i,r){const a={result:null};return this.ys(t,n).next((l=>{a.result=l})).next((()=>{if(!a.result)return this.ws(t,n,r,i).next((l=>{a.result=l}))})).next((()=>{if(a.result)return;const l=new mQ;return this.Ss(t,n,l).next((h=>{if(a.result=h,this.Vs)return this.bs(t,n,l,h.size)}))})).next((()=>a.result))}bs(t,n,i,r){return i.documentReadCount<this.fs?(hv()<=Oi.DEBUG&&On("QueryEngine","SDK will not create cache indexes for query:",fv(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),on.resolve()):(hv()<=Oi.DEBUG&&On("QueryEngine","Query:",fv(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.gs*r?(hv()<=Oi.DEBUG&&On("QueryEngine","The SDK decides to create cache indexes for query:",fv(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Qu(n))):on.resolve())}ys(t,n){if(XO(n))return on.resolve(null);let i=Qu(n);return this.indexManager.getIndexType(t,i).next((r=>r===0?null:(n.limit!==null&&r===1&&(n=_k(n,null,"F"),i=Qu(n)),this.indexManager.getDocumentsMatchingTarget(t,i).next((a=>{const l=Bi(...a);return this.ps.getDocuments(t,l).next((h=>this.indexManager.getMinOffset(t,i).next((s=>{const p=this.Ds(n,h);return this.Cs(n,p,l,s.readTime)?this.ys(t,_k(n,null,"F")):this.vs(t,p,n,s)}))))})))))}ws(t,n,i,r){return XO(n)||r.isEqual(vi.min())?on.resolve(null):this.ps.getDocuments(t,i).next((a=>{const l=this.Ds(n,a);return this.Cs(n,l,i,r)?on.resolve(null):(hv()<=Oi.DEBUG&&On("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),fv(n)),this.vs(t,l,n,OZ(r,Ob)).next((h=>h)))}))}Ds(t,n){let i=new vo(u4(t));return n.forEach(((r,a)=>{wT(t,a)&&(i=i.add(a))})),i}Cs(t,n,i,r){if(t.limit===null)return!1;if(i.size!==n.size)return!0;const a=t.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(r)>0)}Ss(t,n,i){return hv()<=Oi.DEBUG&&On("QueryEngine","Using full collection scan to execute query:",fv(n)),this.ps.getDocumentsMatchingQuery(t,n,Qf.min(),i)}vs(t,n,i,r){return this.ps.getDocumentsMatchingQuery(t,i,r).next((a=>(n.forEach((l=>{a=a.insert(l.key,l)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FA="LocalStore",gQ=3e8;class vQ{constructor(t,n,i,r){this.persistence=t,this.Fs=n,this.serializer=r,this.Ms=new bs(Vi),this.xs=new ig((a=>kA(a)),IA),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(i)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new sQ(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>t.collect(n,this.Ms)))}}function _Q(e,t,n,i){return new vQ(e,t,n,i)}async function L4(e,t){const n=bi(e);return await n.persistence.runTransaction("Handle user change","readonly",(i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next((a=>(r=a,n.Bs(t),n.mutationQueue.getAllMutationBatches(i)))).next((a=>{const l=[],h=[];let s=Bi();for(const p of r){l.push(p.batchId);for(const _ of p.mutations)s=s.add(_.key)}for(const p of a){h.push(p.batchId);for(const _ of p.mutations)s=s.add(_.key)}return n.localDocuments.getDocuments(i,s).next((p=>({Ls:p,removedBatchIds:l,addedBatchIds:h})))}))}))}function yQ(e,t){const n=bi(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const r=t.batch.keys(),a=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(h,s,p,_){const x=p.batch,T=x.keys();let k=on.resolve();return T.forEach((P=>{k=k.next((()=>_.getEntry(s,P))).next((M=>{const R=p.docVersions.get(P);Cr(R!==null,48541),M.version.compareTo(R)<0&&(x.applyToRemoteDocument(M,p),M.isValidDocument()&&(M.setReadTime(p.commitVersion),_.addEntry(M)))}))})),k.next((()=>h.mutationQueue.removeMutationBatch(s,x)))})(n,i,t,a).next((()=>a.apply(i))).next((()=>n.mutationQueue.performConsistencyCheck(i))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(h){let s=Bi();for(let p=0;p<h.mutationResults.length;++p)h.mutationResults[p].transformResults.length>0&&(s=s.add(h.batch.mutations[p].key));return s})(t)))).next((()=>n.localDocuments.getDocuments(i,r)))}))}function R4(e){const t=bi(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>t.Pi.getLastRemoteSnapshotVersion(n)))}function bQ(e,t){const n=bi(e),i=t.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const l=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const h=[];t.targetChanges.forEach(((_,x)=>{const T=r.get(x);if(!T)return;h.push(n.Pi.removeMatchingKeys(a,_.removedDocuments,x).next((()=>n.Pi.addMatchingKeys(a,_.addedDocuments,x))));let k=T.withSequenceNumber(a.currentSequenceNumber);t.targetMismatches.get(x)!==null?k=k.withResumeToken(la.EMPTY_BYTE_STRING,vi.min()).withLastLimboFreeSnapshotVersion(vi.min()):_.resumeToken.approximateByteSize()>0&&(k=k.withResumeToken(_.resumeToken,i)),r=r.insert(x,k),(function(M,R,F){return M.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=gQ?!0:F.addedDocuments.size+F.modifiedDocuments.size+F.removedDocuments.size>0})(T,k,_)&&h.push(n.Pi.updateTargetData(a,k))}));let s=xh(),p=Bi();if(t.documentUpdates.forEach((_=>{t.resolvedLimboDocuments.has(_)&&h.push(n.persistence.referenceDelegate.updateLimboDocument(a,_))})),h.push(xQ(a,l,t.documentUpdates).next((_=>{s=_.ks,p=_.qs}))),!i.isEqual(vi.min())){const _=n.Pi.getLastRemoteSnapshotVersion(a).next((x=>n.Pi.setTargetsMetadata(a,a.currentSequenceNumber,i)));h.push(_)}return on.waitFor(h).next((()=>l.apply(a))).next((()=>n.localDocuments.getLocalViewOfDocuments(a,s,p))).next((()=>s))})).then((a=>(n.Ms=r,a)))}function xQ(e,t,n){let i=Bi(),r=Bi();return n.forEach((a=>i=i.add(a))),t.getEntries(e,i).next((a=>{let l=xh();return n.forEach(((h,s)=>{const p=a.get(h);s.isFoundDocument()!==p.isFoundDocument()&&(r=r.add(h)),s.isNoDocument()&&s.version.isEqual(vi.min())?(t.removeEntry(h,s.readTime),l=l.insert(h,s)):!p.isValidDocument()||s.version.compareTo(p.version)>0||s.version.compareTo(p.version)===0&&p.hasPendingWrites?(t.addEntry(s),l=l.insert(h,s)):On(FA,"Ignoring outdated watch update for ",h,". Current version:",p.version," Watch version:",s.version)})),{ks:l,qs:r}}))}function wQ(e,t){const n=bi(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(i=>(t===void 0&&(t=SA),n.mutationQueue.getNextMutationBatchAfterBatchId(i,t))))}function TQ(e,t){const n=bi(e);return n.persistence.runTransaction("Allocate target","readwrite",(i=>{let r;return n.Pi.getTargetData(i,t).next((a=>a?(r=a,on.resolve(r)):n.Pi.allocateTargetId(i).next((l=>(r=new Df(t,l,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,r).next((()=>r)))))))})).then((i=>{const r=n.Ms.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(t,i.targetId)),i}))}async function Tk(e,t,n){const i=bi(e),r=i.Ms.get(t),a=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",a,(l=>i.persistence.referenceDelegate.removeTarget(l,r)))}catch(l){if(!T_(l))throw l;On(FA,`Failed to update sequence numbers for target ${t}: ${l}`)}i.Ms=i.Ms.remove(t),i.xs.delete(r.target)}function lV(e,t,n){const i=bi(e);let r=vi.min(),a=Bi();return i.persistence.runTransaction("Execute query","readwrite",(l=>(function(s,p,_){const x=bi(s),T=x.xs.get(_);return T!==void 0?on.resolve(x.Ms.get(T)):x.Pi.getTargetData(p,_)})(i,l,Qu(t)).next((h=>{if(h)return r=h.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(l,h.targetId).next((s=>{a=s}))})).next((()=>i.Fs.getDocumentsMatchingQuery(l,t,n?r:vi.min(),n?a:Bi()))).next((h=>(SQ(i,lJ(t),h),{documents:h,Qs:a})))))}function SQ(e,t,n){let i=e.Os.get(t)||vi.min();n.forEach(((r,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)})),e.Os.set(t,i)}class cV{constructor(){this.activeTargetIds=mJ()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class EQ{constructor(){this.Mo=new cV,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,i){}addLocalQueryTarget(t,n=!0){return n&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,n,i){this.xo[t]=n}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new cV,Promise.resolve()}handleUserChange(t,n,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CQ{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uV="ConnectivityMonitor";class dV{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){On(uV,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){On(uV,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hx=null;function Sk(){return Hx===null?Hx=(function(){return 268435456+Math.round(2147483648*Math.random())})():Hx++,"0x"+Hx.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eC="RestConnection",kQ={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class IQ{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+t.host,this.Ko=`projects/${i}/databases/${r}`,this.Wo=this.databaseId.database===g1?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Go(t,n,i,r,a){const l=Sk(),h=this.zo(t,n.toUriEncodedString());On(eC,`Sending RPC '${t}' ${l}:`,h,i);const s={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(s,r,a);const{host:p}=new URL(h),_=y_(p);return this.Jo(t,h,s,i,_).then((x=>(On(eC,`Received RPC '${t}' ${l}: `,x),x)),(x=>{throw Yv(eC,`RPC '${t}' ${l} failed with error: `,x,"url: ",h,"request:",i),x}))}Ho(t,n,i,r,a,l){return this.Go(t,n,i,r,a)}jo(t,n,i){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+x_})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((r,a)=>t[a]=r)),i&&i.headers.forEach(((r,a)=>t[a]=r))}zo(t,n){const i=kQ[t];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AQ{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ka="WebChannelConnection";class PQ extends IQ{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,i,r,a){const l=Sk();return new Promise(((h,s)=>{const p=new z5;p.setWithCredentials(!0),p.listenOnce(N5.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case Cw.NO_ERROR:const x=p.getResponseJson();On(ka,`XHR for RPC '${t}' ${l} received:`,JSON.stringify(x)),h(x);break;case Cw.TIMEOUT:On(ka,`RPC '${t}' ${l} timed out`),s(new Wn(hn.DEADLINE_EXCEEDED,"Request time out"));break;case Cw.HTTP_ERROR:const T=p.getStatus();if(On(ka,`RPC '${t}' ${l} failed with status:`,T,"response text:",p.getResponseText()),T>0){let k=p.getResponseJson();Array.isArray(k)&&(k=k[0]);const P=k?.error;if(P&&P.status&&P.message){const M=(function(F){const B=F.toLowerCase().replace(/_/g,"-");return Object.values(hn).indexOf(B)>=0?B:hn.UNKNOWN})(P.status);s(new Wn(M,P.message))}else s(new Wn(hn.UNKNOWN,"Server responded with status "+p.getStatus()))}else s(new Wn(hn.UNAVAILABLE,"Connection failed."));break;default:fi(9055,{l_:t,streamId:l,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{On(ka,`RPC '${t}' ${l} completed.`)}}));const _=JSON.stringify(r);On(ka,`RPC '${t}' ${l} sending request:`,r),p.send(n,"POST",_,i,15)}))}T_(t,n,i){const r=Sk(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],l=j5(),h=$5(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(s.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(s.useFetchStreams=!0),this.jo(s.initMessageHeaders,n,i),s.encodeInitMessageHeaders=!0;const _=a.join("");On(ka,`Creating RPC '${t}' stream ${r}: ${_}`,s);const x=l.createWebChannel(_,s);this.I_(x);let T=!1,k=!1;const P=new AQ({Yo:R=>{k?On(ka,`Not sending because RPC '${t}' stream ${r} is closed:`,R):(T||(On(ka,`Opening RPC '${t}' stream ${r} transport.`),x.open(),T=!0),On(ka,`RPC '${t}' stream ${r} sending:`,R),x.send(R))},Zo:()=>x.close()}),M=(R,F,B)=>{R.listen(F,(H=>{try{B(H)}catch(G){setTimeout((()=>{throw G}),0)}}))};return M(x,Uy.EventType.OPEN,(()=>{k||(On(ka,`RPC '${t}' stream ${r} transport opened.`),P.o_())})),M(x,Uy.EventType.CLOSE,(()=>{k||(k=!0,On(ka,`RPC '${t}' stream ${r} transport closed`),P.a_(),this.E_(x))})),M(x,Uy.EventType.ERROR,(R=>{k||(k=!0,Yv(ka,`RPC '${t}' stream ${r} transport errored. Name:`,R.name,"Message:",R.message),P.a_(new Wn(hn.UNAVAILABLE,"The operation could not be completed")))})),M(x,Uy.EventType.MESSAGE,(R=>{if(!k){const F=R.data[0];Cr(!!F,16349);const B=F,H=B?.error||B[0]?.error;if(H){On(ka,`RPC '${t}' stream ${r} received error:`,H);const G=H.status;let ee=(function($){const W=eo[$];if(W!==void 0)return x4(W)})(G),ie=H.message;ee===void 0&&(ee=hn.INTERNAL,ie="Unknown error status: "+G+" with message "+H.message),k=!0,P.a_(new Wn(ee,ie)),x.close()}else On(ka,`RPC '${t}' stream ${r} received:`,F),P.u_(F)}})),M(h,U5.STAT_EVENT,(R=>{R.stat===hk.PROXY?On(ka,`RPC '${t}' stream ${r} detected buffering proxy`):R.stat===hk.NOPROXY&&On(ka,`RPC '${t}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{P.__()}),0),P}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((n=>n===t))}}function tC(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CT(e){return new RJ(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O4{constructor(t,n,i=1e3,r=1.5,a=6e4){this.Mi=t,this.timerId=n,this.d_=i,this.A_=r,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-i);r>0&&On("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hV="PersistentStream";class V4{constructor(t,n,i,r,a,l,h,s){this.Mi=t,this.S_=i,this.b_=r,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=s,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new O4(t,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():n&&n.code===hn.RESOURCE_EXHAUSTED?(bh(n.toString()),bh("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===hn.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(n)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,r])=>{this.D_===n&&this.G_(i,r)}),(i=>{t((()=>{const r=new Wn(hn.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(r)}))}))}G_(t,n){const i=this.W_(this.D_);this.stream=this.j_(t,n),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((r=>{i((()=>this.z_(r)))})),this.stream.onMessage((r=>{i((()=>++this.F_==1?this.J_(r):this.onNext(r)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return On(hV,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return n=>{this.Mi.enqueueAndForget((()=>this.D_===t?n():(On(hV,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class MQ extends V4{constructor(t,n,i,r,a,l){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,l),this.serializer=a}j_(t,n){return this.connection.T_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const n=BJ(this.serializer,t),i=(function(a){if(!("targetChange"in a))return vi.min();const l=a.targetChange;return l.targetIds&&l.targetIds.length?vi.min():l.readTime?ed(l.readTime):vi.min()})(t);return this.listener.H_(n,i)}Y_(t){const n={};n.database=wk(this.serializer),n.addTarget=(function(a,l){let h;const s=l.target;if(h=vk(s)?{documents:NJ(a,s)}:{query:UJ(a,s).ft},h.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){h.resumeToken=S4(a,l.resumeToken);const p=yk(a,l.expectedCount);p!==null&&(h.expectedCount=p)}else if(l.snapshotVersion.compareTo(vi.min())>0){h.readTime=w1(a,l.snapshotVersion.toTimestamp());const p=yk(a,l.expectedCount);p!==null&&(h.expectedCount=p)}return h})(this.serializer,t);const i=jJ(this.serializer,t);i&&(n.labels=i),this.q_(n)}Z_(t){const n={};n.database=wk(this.serializer),n.removeTarget=t,this.q_(n)}}class DQ extends V4{constructor(t,n,i,r,a,l){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,l),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,n){return this.connection.T_("Write",t,n)}J_(t){return Cr(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Cr(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){Cr(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const n=zJ(t.writeResults,t.commitTime),i=ed(t.commitTime);return this.listener.na(i,n)}ra(){const t={};t.database=wk(this.serializer),this.q_(t)}ea(t){const n={streamToken:this.lastStreamToken,writes:t.map((i=>FJ(this.serializer,i)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LQ{}class RQ extends LQ{constructor(t,n,i,r){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new Wn(hn.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,n,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,l])=>this.connection.Go(t,bk(n,i),r,a,l))).catch((a=>{throw a.name==="FirebaseError"?(a.code===hn.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Wn(hn.UNKNOWN,a.toString())}))}Ho(t,n,i,r,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,h])=>this.connection.Ho(t,bk(n,i),r,l,h,a))).catch((l=>{throw l.name==="FirebaseError"?(l.code===hn.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Wn(hn.UNKNOWN,l.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class OQ{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(bh(n),this.aa=!1):On("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wp="RemoteStore";class VQ{constructor(t,n,i,r,a){this.localStore=t,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo((l=>{i.enqueueAndForget((async()=>{rg(this)&&(On(Wp,"Restarting streams for network reachability change."),await(async function(s){const p=bi(s);p.Ea.add(4),await S0(p),p.Ra.set("Unknown"),p.Ea.delete(4),await kT(p)})(this))}))})),this.Ra=new OQ(i,r)}}async function kT(e){if(rg(e))for(const t of e.da)await t(!0)}async function S0(e){for(const t of e.da)await t(!1)}function B4(e,t){const n=bi(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),$A(n)?UA(n):S_(n).O_()&&NA(n,t))}function zA(e,t){const n=bi(e),i=S_(n);n.Ia.delete(t),i.O_()&&F4(n,t),n.Ia.size===0&&(i.O_()?i.L_():rg(n)&&n.Ra.set("Unknown"))}function NA(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(vi.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}S_(e).Y_(t)}function F4(e,t){e.Va.Ue(t),S_(e).Z_(t)}function UA(e){e.Va=new PJ({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),S_(e).start(),e.Ra.ua()}function $A(e){return rg(e)&&!S_(e).x_()&&e.Ia.size>0}function rg(e){return bi(e).Ea.size===0}function z4(e){e.Va=void 0}async function BQ(e){e.Ra.set("Online")}async function FQ(e){e.Ia.forEach(((t,n)=>{NA(e,t)}))}async function zQ(e,t){z4(e),$A(e)?(e.Ra.ha(t),UA(e)):e.Ra.set("Unknown")}async function NQ(e,t,n){if(e.Ra.set("Online"),t instanceof T4&&t.state===2&&t.cause)try{await(async function(r,a){const l=a.cause;for(const h of a.targetIds)r.Ia.has(h)&&(await r.remoteSyncer.rejectListen(h,l),r.Ia.delete(h),r.Va.removeTarget(h))})(e,t)}catch(i){On(Wp,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),await S1(e,i)}else if(t instanceof Pw?e.Va.Ze(t):t instanceof w4?e.Va.st(t):e.Va.tt(t),!n.isEqual(vi.min()))try{const i=await R4(e.localStore);n.compareTo(i)>=0&&await(function(a,l){const h=a.Va.Tt(l);return h.targetChanges.forEach(((s,p)=>{if(s.resumeToken.approximateByteSize()>0){const _=a.Ia.get(p);_&&a.Ia.set(p,_.withResumeToken(s.resumeToken,l))}})),h.targetMismatches.forEach(((s,p)=>{const _=a.Ia.get(s);if(!_)return;a.Ia.set(s,_.withResumeToken(la.EMPTY_BYTE_STRING,_.snapshotVersion)),F4(a,s);const x=new Df(_.target,s,p,_.sequenceNumber);NA(a,x)})),a.remoteSyncer.applyRemoteEvent(h)})(e,n)}catch(i){On(Wp,"Failed to raise snapshot:",i),await S1(e,i)}}async function S1(e,t,n){if(!T_(t))throw t;e.Ea.add(1),await S0(e),e.Ra.set("Offline"),n||(n=()=>R4(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{On(Wp,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await kT(e)}))}function N4(e,t){return t().catch((n=>S1(e,n,t)))}async function IT(e){const t=bi(e),n=im(t);let i=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:SA;for(;UQ(t);)try{const r=await wQ(t.localStore,i);if(r===null){t.Ta.length===0&&n.L_();break}i=r.batchId,$Q(t,r)}catch(r){await S1(t,r)}U4(t)&&$4(t)}function UQ(e){return rg(e)&&e.Ta.length<10}function $Q(e,t){e.Ta.push(t);const n=im(e);n.O_()&&n.X_&&n.ea(t.mutations)}function U4(e){return rg(e)&&!im(e).x_()&&e.Ta.length>0}function $4(e){im(e).start()}async function jQ(e){im(e).ra()}async function WQ(e){const t=im(e);for(const n of e.Ta)t.ea(n.mutations)}async function HQ(e,t,n){const i=e.Ta.shift(),r=DA.from(i,t,n);await N4(e,(()=>e.remoteSyncer.applySuccessfulWrite(r))),await IT(e)}async function GQ(e,t){t&&im(e).X_&&await(async function(i,r){if((function(l){return kJ(l)&&l!==hn.ABORTED})(r.code)){const a=i.Ta.shift();im(i).B_(),await N4(i,(()=>i.remoteSyncer.rejectFailedWrite(a.batchId,r))),await IT(i)}})(e,t),U4(e)&&$4(e)}async function fV(e,t){const n=bi(e);n.asyncQueue.verifyOperationInProgress(),On(Wp,"RemoteStore received new credentials");const i=rg(n);n.Ea.add(3),await S0(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await kT(n)}async function qQ(e,t){const n=bi(e);t?(n.Ea.delete(2),await kT(n)):t||(n.Ea.add(2),await S0(n),n.Ra.set("Unknown"))}function S_(e){return e.ma||(e.ma=(function(n,i,r){const a=bi(n);return a.sa(),new MQ(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,r)})(e.datastore,e.asyncQueue,{Xo:BQ.bind(null,e),t_:FQ.bind(null,e),r_:zQ.bind(null,e),H_:NQ.bind(null,e)}),e.da.push((async t=>{t?(e.ma.B_(),$A(e)?UA(e):e.Ra.set("Unknown")):(await e.ma.stop(),z4(e))}))),e.ma}function im(e){return e.fa||(e.fa=(function(n,i,r){const a=bi(n);return a.sa(),new DQ(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,r)})(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:jQ.bind(null,e),r_:GQ.bind(null,e),ta:WQ.bind(null,e),na:HQ.bind(null,e)}),e.da.push((async t=>{t?(e.fa.B_(),await IT(e)):(await e.fa.stop(),e.Ta.length>0&&(On(Wp,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))}))),e.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(t,n,i,r,a){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=a,this.deferred=new Wf,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,n,i,r,a){const l=Date.now()+i,h=new jA(t,n,l,r,a);return h.start(i),h}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Wn(hn.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function WA(e,t){if(bh("AsyncQueue",`${t}: ${e}`),T_(e))return new Wn(hn.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rv{static emptySet(t){return new Rv(t.comparator)}constructor(t){this.comparator=t?(n,i)=>t(n,i)||ei.comparator(n.key,i.key):(n,i)=>ei.comparator(n.key,i.key),this.keyedMap=$y(),this.sortedSet=new bs(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((n,i)=>(t(n),!1)))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Rv)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,a=i.getNext().key;if(!r.isEqual(a))return!1}return!0}toString(){const t=[];return this.forEach((n=>{t.push(n.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const i=new Rv;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mV{constructor(){this.ga=new bs(ei.comparator)}track(t){const n=t.doc.key,i=this.ga.get(n);i?t.type!==0&&i.type===3?this.ga=this.ga.insert(n,t):t.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.ga=this.ga.remove(n):t.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):fi(63341,{Rt:t,pa:i}):this.ga=this.ga.insert(n,t)}ya(){const t=[];return this.ga.inorderTraversal(((n,i)=>{t.push(i)})),t}}class n_{constructor(t,n,i,r,a,l,h,s,p){this.query=t,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=s,this.hasCachedResults=p}static fromInitialDocuments(t,n,i,r,a){const l=[];return n.forEach((h=>{l.push({type:0,doc:h})})),new n_(t,n,Rv.emptySet(n),l,i,r,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&xT(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,i=t.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KQ{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class XQ{constructor(){this.queries=pV(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const r=bi(n),a=r.queries;r.queries=pV(),a.forEach(((l,h)=>{for(const s of h.Sa)s.onError(i)}))})(this,new Wn(hn.ABORTED,"Firestore shutting down"))}}function pV(){return new ig((e=>c4(e)),xT)}async function YQ(e,t){const n=bi(e);let i=3;const r=t.query;let a=n.queries.get(r);a?!a.ba()&&t.Da()&&(i=2):(a=new KQ,i=t.Da()?0:1);try{switch(i){case 0:a.wa=await n.onListen(r,!0);break;case 1:a.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(l){const h=WA(l,`Initialization of query '${fv(t.query)}' failed`);return void t.onError(h)}n.queries.set(r,a),a.Sa.push(t),t.va(n.onlineState),a.wa&&t.Fa(a.wa)&&HA(n)}async function ZQ(e,t){const n=bi(e),i=t.query;let r=3;const a=n.queries.get(i);if(a){const l=a.Sa.indexOf(t);l>=0&&(a.Sa.splice(l,1),a.Sa.length===0?r=t.Da()?0:1:!a.ba()&&t.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function JQ(e,t){const n=bi(e);let i=!1;for(const r of t){const a=r.query,l=n.queries.get(a);if(l){for(const h of l.Sa)h.Fa(r)&&(i=!0);l.wa=r}}i&&HA(n)}function QQ(e,t,n){const i=bi(e),r=i.queries.get(t);if(r)for(const a of r.Sa)a.onError(n);i.queries.delete(t)}function HA(e){e.Ca.forEach((t=>{t.next()}))}var Ek,gV;(gV=Ek||(Ek={})).Ma="default",gV.Cache="cache";class eee{constructor(t,n,i){this.query=t,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(t){if(!this.options.includeMetadataChanges){const i=[];for(const r of t.docChanges)r.type!==3&&i.push(r);t=new n_(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),n=!0):this.La(t,this.onlineState)&&(this.ka(t),n=!0),this.Na=t,n}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),n=!0),n}La(t,n){if(!t.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(t){t=n_.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==Ek.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j4{constructor(t){this.key=t}}class W4{constructor(t){this.key=t}}class tee{constructor(t,n){this.query=t,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Bi(),this.mutatedKeys=Bi(),this.eu=u4(t),this.tu=new Rv(this.eu)}get nu(){return this.Ya}ru(t,n){const i=n?n.iu:new mV,r=n?n.tu:this.tu;let a=n?n.mutatedKeys:this.mutatedKeys,l=r,h=!1;const s=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,p=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal(((_,x)=>{const T=r.get(_),k=wT(this.query,x)?x:null,P=!!T&&this.mutatedKeys.has(T.key),M=!!k&&(k.hasLocalMutations||this.mutatedKeys.has(k.key)&&k.hasCommittedMutations);let R=!1;T&&k?T.data.isEqual(k.data)?P!==M&&(i.track({type:3,doc:k}),R=!0):this.su(T,k)||(i.track({type:2,doc:k}),R=!0,(s&&this.eu(k,s)>0||p&&this.eu(k,p)<0)&&(h=!0)):!T&&k?(i.track({type:0,doc:k}),R=!0):T&&!k&&(i.track({type:1,doc:T}),R=!0,(s||p)&&(h=!0)),R&&(k?(l=l.add(k),a=M?a.add(_):a.delete(_)):(l=l.delete(_),a=a.delete(_)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const _=this.query.limitType==="F"?l.last():l.first();l=l.delete(_.key),a=a.delete(_.key),i.track({type:1,doc:_})}return{tu:l,iu:i,Cs:h,mutatedKeys:a}}su(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,i,r){const a=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const l=t.iu.ya();l.sort(((_,x)=>(function(k,P){const M=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return fi(20277,{Rt:R})}};return M(k)-M(P)})(_.type,x.type)||this.eu(_.doc,x.doc))),this.ou(i),r=r??!1;const h=n&&!r?this._u():[],s=this.Xa.size===0&&this.current&&!r?1:0,p=s!==this.Za;return this.Za=s,l.length!==0||p?{snapshot:new n_(this.query,t.tu,a,l,t.mutatedKeys,s===0,p,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new mV,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),t.modifiedDocuments.forEach((n=>{})),t.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Bi(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const n=[];return t.forEach((i=>{this.Xa.has(i)||n.push(new W4(i))})),this.Xa.forEach((i=>{t.has(i)||n.push(new j4(i))})),n}cu(t){this.Ya=t.Qs,this.Xa=Bi();const n=this.ru(t.documents);return this.applyChanges(n,!0)}lu(){return n_.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const GA="SyncEngine";class nee{constructor(t,n,i){this.query=t,this.targetId=n,this.view=i}}class iee{constructor(t){this.key=t,this.hu=!1}}class ree{constructor(t,n,i,r,a,l){this.localStore=t,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new ig((h=>c4(h)),xT),this.Iu=new Map,this.Eu=new Set,this.du=new bs(ei.comparator),this.Au=new Map,this.Ru=new OA,this.Vu={},this.mu=new Map,this.fu=t_.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function see(e,t,n=!0){const i=Y4(e);let r;const a=i.Tu.get(t);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),r=a.view.lu()):r=await H4(i,t,n,!0),r}async function oee(e,t){const n=Y4(e);await H4(n,t,!0,!1)}async function H4(e,t,n,i){const r=await TQ(e.localStore,Qu(t)),a=r.targetId,l=e.sharedClientState.addLocalQueryTarget(a,n);let h;return i&&(h=await aee(e,t,a,l==="current",r.resumeToken)),e.isPrimaryClient&&n&&B4(e.remoteStore,r),h}async function aee(e,t,n,i,r){e.pu=(x,T,k)=>(async function(M,R,F,B){let H=R.view.ru(F);H.Cs&&(H=await lV(M.localStore,R.query,!1).then((({documents:J})=>R.view.ru(J,H))));const G=B&&B.targetChanges.get(R.targetId),ee=B&&B.targetMismatches.get(R.targetId)!=null,ie=R.view.applyChanges(H,M.isPrimaryClient,G,ee);return _V(M,R.targetId,ie.au),ie.snapshot})(e,x,T,k);const a=await lV(e.localStore,t,!0),l=new tee(t,a.Qs),h=l.ru(a.documents),s=T0.createSynthesizedTargetChangeForCurrentChange(n,i&&e.onlineState!=="Offline",r),p=l.applyChanges(h,e.isPrimaryClient,s);_V(e,n,p.au);const _=new nee(t,n,l);return e.Tu.set(t,_),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),p.snapshot}async function lee(e,t,n){const i=bi(e),r=i.Tu.get(t),a=i.Iu.get(r.targetId);if(a.length>1)return i.Iu.set(r.targetId,a.filter((l=>!xT(l,t)))),void i.Tu.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await Tk(i.localStore,r.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(r.targetId),n&&zA(i.remoteStore,r.targetId),Ck(i,r.targetId)})).catch(w_)):(Ck(i,r.targetId),await Tk(i.localStore,r.targetId,!0))}async function cee(e,t){const n=bi(e),i=n.Tu.get(t),r=n.Iu.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),zA(n.remoteStore,i.targetId))}async function uee(e,t,n){const i=vee(e);try{const r=await(function(l,h){const s=bi(l),p=Zr.now(),_=h.reduce(((k,P)=>k.add(P.key)),Bi());let x,T;return s.persistence.runTransaction("Locally write mutations","readwrite",(k=>{let P=xh(),M=Bi();return s.Ns.getEntries(k,_).next((R=>{P=R,P.forEach(((F,B)=>{B.isValidDocument()||(M=M.add(F))}))})).next((()=>s.localDocuments.getOverlayedDocuments(k,P))).next((R=>{x=R;const F=[];for(const B of h){const H=wJ(B,x.get(B.key).overlayedDocument);H!=null&&F.push(new mm(B.key,H,n4(H.value.mapValue),fu.exists(!0)))}return s.mutationQueue.addMutationBatch(k,p,F,h)})).next((R=>{T=R;const F=R.applyToLocalDocumentSet(x,M);return s.documentOverlayCache.saveOverlays(k,R.batchId,F)}))})).then((()=>({batchId:T.batchId,changes:h4(x)})))})(i.localStore,t);i.sharedClientState.addPendingMutation(r.batchId),(function(l,h,s){let p=l.Vu[l.currentUser.toKey()];p||(p=new bs(Vi)),p=p.insert(h,s),l.Vu[l.currentUser.toKey()]=p})(i,r.batchId,n),await E0(i,r.changes),await IT(i.remoteStore)}catch(r){const a=WA(r,"Failed to persist write");n.reject(a)}}async function G4(e,t){const n=bi(e);try{const i=await bQ(n.localStore,t);t.targetChanges.forEach(((r,a)=>{const l=n.Au.get(a);l&&(Cr(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?l.hu=!0:r.modifiedDocuments.size>0?Cr(l.hu,14607):r.removedDocuments.size>0&&(Cr(l.hu,42227),l.hu=!1))})),await E0(n,i,t)}catch(i){await w_(i)}}function vV(e,t,n){const i=bi(e);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Tu.forEach(((a,l)=>{const h=l.view.va(t);h.snapshot&&r.push(h.snapshot)})),(function(l,h){const s=bi(l);s.onlineState=h;let p=!1;s.queries.forEach(((_,x)=>{for(const T of x.Sa)T.va(h)&&(p=!0)})),p&&HA(s)})(i.eventManager,t),r.length&&i.Pu.H_(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function dee(e,t,n){const i=bi(e);i.sharedClientState.updateQueryState(t,"rejected",n);const r=i.Au.get(t),a=r&&r.key;if(a){let l=new bs(ei.comparator);l=l.insert(a,Ra.newNoDocument(a,vi.min()));const h=Bi().add(a),s=new ET(vi.min(),new Map,new bs(Vi),l,h);await G4(i,s),i.du=i.du.remove(a),i.Au.delete(t),qA(i)}else await Tk(i.localStore,t,!1).then((()=>Ck(i,t,n))).catch(w_)}async function hee(e,t){const n=bi(e),i=t.batch.batchId;try{const r=await yQ(n.localStore,t);K4(n,i,null),q4(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await E0(n,r)}catch(r){await w_(r)}}async function fee(e,t,n){const i=bi(e);try{const r=await(function(l,h){const s=bi(l);return s.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let _;return s.mutationQueue.lookupMutationBatch(p,h).next((x=>(Cr(x!==null,37113),_=x.keys(),s.mutationQueue.removeMutationBatch(p,x)))).next((()=>s.mutationQueue.performConsistencyCheck(p))).next((()=>s.documentOverlayCache.removeOverlaysForBatchId(p,_,h))).next((()=>s.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,_))).next((()=>s.localDocuments.getDocuments(p,_)))}))})(i.localStore,t);K4(i,t,n),q4(i,t),i.sharedClientState.updateMutationState(t,"rejected",n),await E0(i,r)}catch(r){await w_(r)}}function q4(e,t){(e.mu.get(t)||[]).forEach((n=>{n.resolve()})),e.mu.delete(t)}function K4(e,t,n){const i=bi(e);let r=i.Vu[i.currentUser.toKey()];if(r){const a=r.get(t);a&&(n?a.reject(n):a.resolve(),r=r.remove(t)),i.Vu[i.currentUser.toKey()]=r}}function Ck(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const i of e.Iu.get(t))e.Tu.delete(i),n&&e.Pu.yu(i,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach((i=>{e.Ru.containsKey(i)||X4(e,i)}))}function X4(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);n!==null&&(zA(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),qA(e))}function _V(e,t,n){for(const i of n)i instanceof j4?(e.Ru.addReference(i.key,t),mee(e,i)):i instanceof W4?(On(GA,"Document no longer in limbo: "+i.key),e.Ru.removeReference(i.key,t),e.Ru.containsKey(i.key)||X4(e,i.key)):fi(19791,{wu:i})}function mee(e,t){const n=t.key,i=n.path.canonicalString();e.du.get(n)||e.Eu.has(i)||(On(GA,"New document in limbo: "+n),e.Eu.add(i),qA(e))}function qA(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new ei(_s.fromString(t)),i=e.fu.next();e.Au.set(i,new iee(n)),e.du=e.du.insert(n,i),B4(e.remoteStore,new Df(Qu(AA(n.path)),i,"TargetPurposeLimboResolution",vT.ce))}}async function E0(e,t,n){const i=bi(e),r=[],a=[],l=[];i.Tu.isEmpty()||(i.Tu.forEach(((h,s)=>{l.push(i.pu(s,t,n).then((p=>{if((p||n)&&i.isPrimaryClient){const _=p?!p.fromCache:n?.targetChanges.get(s.targetId)?.current;i.sharedClientState.updateQueryState(s.targetId,_?"current":"not-current")}if(p){r.push(p);const _=BA.As(s.targetId,p);a.push(_)}})))})),await Promise.all(l),i.Pu.H_(r),await(async function(s,p){const _=bi(s);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(x=>on.forEach(p,(T=>on.forEach(T.Es,(k=>_.persistence.referenceDelegate.addReference(x,T.targetId,k))).next((()=>on.forEach(T.ds,(k=>_.persistence.referenceDelegate.removeReference(x,T.targetId,k)))))))))}catch(x){if(!T_(x))throw x;On(FA,"Failed to update sequence numbers: "+x)}for(const x of p){const T=x.targetId;if(!x.fromCache){const k=_.Ms.get(T),P=k.snapshotVersion,M=k.withLastLimboFreeSnapshotVersion(P);_.Ms=_.Ms.insert(T,M)}}})(i.localStore,a))}async function pee(e,t){const n=bi(e);if(!n.currentUser.isEqual(t)){On(GA,"User change. New user:",t.toKey());const i=await L4(n.localStore,t);n.currentUser=t,(function(a,l){a.mu.forEach((h=>{h.forEach((s=>{s.reject(new Wn(hn.CANCELLED,l))}))})),a.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await E0(n,i.Ls)}}function gee(e,t){const n=bi(e),i=n.Au.get(t);if(i&&i.hu)return Bi().add(i.key);{let r=Bi();const a=n.Iu.get(t);if(!a)return r;for(const l of a){const h=n.Tu.get(l);r=r.unionWith(h.view.nu)}return r}}function Y4(e){const t=bi(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=G4.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=gee.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=dee.bind(null,t),t.Pu.H_=JQ.bind(null,t.eventManager),t.Pu.yu=QQ.bind(null,t.eventManager),t}function vee(e){const t=bi(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=hee.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=fee.bind(null,t),t}class E1{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=CT(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,n){return null}Mu(t,n){return null}vu(t){return _Q(this.persistence,new pQ,t.initialUser,this.serializer)}Cu(t){return new D4(VA.mi,this.serializer)}Du(t){return new EQ}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}E1.provider={build:()=>new E1};class _ee extends E1{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,n){Cr(this.persistence.referenceDelegate instanceof T1,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new eQ(i,t.asyncQueue,n)}Cu(t){const n=this.cacheSizeBytes!==void 0?kl.withCacheSize(this.cacheSizeBytes):kl.DEFAULT;return new D4((i=>T1.mi(i,n)),this.serializer)}}class kk{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>vV(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=pee.bind(null,this.syncEngine),await qQ(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new XQ})()}createDatastore(t){const n=CT(t.databaseInfo.databaseId),i=(function(a){return new PQ(a)})(t.databaseInfo);return(function(a,l,h,s){return new RQ(a,l,h,s)})(t.authCredentials,t.appCheckCredentials,i,n)}createRemoteStore(t){return(function(i,r,a,l,h){return new VQ(i,r,a,l,h)})(this.localStore,this.datastore,t.asyncQueue,(n=>vV(this.syncEngine,n,0)),(function(){return dV.v()?new dV:new CQ})())}createSyncEngine(t,n){return(function(r,a,l,h,s,p,_){const x=new ree(r,a,l,h,s,p);return _&&(x.gu=!0),x})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const i=bi(n);On(Wp,"RemoteStore shutting down."),i.Ea.add(5),await S0(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}kk.provider={build:()=>new kk};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yee{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):bh("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,n){setTimeout((()=>{this.muted||t(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rm="FirestoreClient";class bee{constructor(t,n,i,r,a){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=Ma.UNAUTHENTICATED,this.clientId=wA.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,(async l=>{On(rm,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(i,(l=>(On(rm,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Wf;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const i=WA(n,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}async function nC(e,t){e.asyncQueue.verifyOperationInProgress(),On(rm,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let i=n.initialUser;e.setCredentialChangeListener((async r=>{i.isEqual(r)||(await L4(t.localStore,r),i=r)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function yV(e,t){e.asyncQueue.verifyOperationInProgress();const n=await xee(e);On(rm,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((i=>fV(t.remoteStore,i))),e.setAppCheckTokenChangeListener(((i,r)=>fV(t.remoteStore,r))),e._onlineComponents=t}async function xee(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){On(rm,"Using user provided OfflineComponentProvider");try{await nC(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!(function(r){return r.name==="FirebaseError"?r.code===hn.FAILED_PRECONDITION||r.code===hn.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(n))throw n;Yv("Error using user provided cache. Falling back to memory cache: "+n),await nC(e,new E1)}}else On(rm,"Using default OfflineComponentProvider"),await nC(e,new _ee(void 0));return e._offlineComponents}async function Z4(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(On(rm,"Using user provided OnlineComponentProvider"),await yV(e,e._uninitializedComponentsProvider._online)):(On(rm,"Using default OnlineComponentProvider"),await yV(e,new kk))),e._onlineComponents}function wee(e){return Z4(e).then((t=>t.syncEngine))}async function Tee(e){const t=await Z4(e),n=t.eventManager;return n.onListen=see.bind(null,t.syncEngine),n.onUnlisten=lee.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=oee.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=cee.bind(null,t.syncEngine),n}function See(e,t,n={}){const i=new Wf;return e.asyncQueue.enqueueAndForget((async()=>(function(a,l,h,s,p){const _=new yee({next:T=>{_.Nu(),l.enqueueAndForget((()=>ZQ(a,x)));const k=T.docs.has(h);!k&&T.fromCache?p.reject(new Wn(hn.UNAVAILABLE,"Failed to get document because the client is offline.")):k&&T.fromCache&&s&&s.source==="server"?p.reject(new Wn(hn.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(T)},error:T=>p.reject(T)}),x=new eee(AA(h.path),_,{includeMetadataChanges:!0,qa:!0});return YQ(a,x)})(await Tee(e),e.asyncQueue,t,n,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J4(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bV=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q4="firestore.googleapis.com",xV=!0;class wV{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new Wn(hn.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Q4,this.ssl=xV}else this.host=t.host,this.ssl=t.ssl??xV;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=M4;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<JJ)throw new Wn(hn.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}RZ("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=J4(t.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Wn(hn.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Wn(hn.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Wn(hn.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(i,r){return i.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class KA{constructor(t,n,i,r){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new wV({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Wn(hn.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Wn(hn.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new wV(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new TZ;switch(i.type){case"firstParty":return new kZ(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Wn(hn.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const i=bV.get(n);i&&(On("ComponentProvider","Removing Datastore"),bV.delete(n),i.terminate())})(this),Promise.resolve()}}function Eee(e,t,n,i={}){e=Jf(e,KA);const r=y_(t),a=e._getSettings(),l={...a,emulatorOptions:e._getEmulatorOptions()},h=`${t}:${n}`;r&&(KN(`https://${h}`),XN("Firestore",!0)),a.host!==Q4&&a.host!==h&&Yv("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const s={...a,host:h,ssl:r,emulatorOptions:i};if(!Zf(s,l)&&(e._setSettings(s),i.mockUserToken)){let p,_;if(typeof i.mockUserToken=="string")p=i.mockUserToken,_=Ma.MOCK_USER;else{p=Pq(i.mockUserToken,e._app?.options.projectId);const x=i.mockUserToken.sub||i.mockUserToken.user_id;if(!x)throw new Wn(hn.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new Ma(x)}e._authCredentials=new SZ(new H5(p,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{constructor(t,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new XA(this.firestore,t,this._query)}}class po{constructor(t,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Nb(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new po(this.firestore,t,this._key)}toJSON(){return{type:po._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,i){if(x0(n,po._jsonSchema))return new po(t,i||null,new ei(_s.fromString(n.referencePath)))}}po._jsonSchemaVersion="firestore/documentReference/1.0",po._jsonSchema={type:ro("string",po._jsonSchemaVersion),referencePath:ro("string")};class Nb extends XA{constructor(t,n,i){super(t,n,AA(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new po(this.firestore,null,new ei(t))}withConverter(t){return new Nb(this.firestore,t,this._path)}}function Ov(e,t,...n){if(e=No(e),arguments.length===1&&(t=wA.newId()),LZ("doc","path",t),e instanceof KA){const i=_s.fromString(t,...n);return VO(i),new po(e,null,new ei(i))}{if(!(e instanceof po||e instanceof Nb))throw new Wn(hn.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(_s.fromString(t,...n));return VO(i),new po(e.firestore,e instanceof Nb?e.converter:null,new ei(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TV="AsyncQueue";class SV{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new O4(this,"async_queue_retry"),this._c=()=>{const i=tC();i&&On(TV,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=t;const n=tC();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const n=tC();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Wf;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!T_(t))throw t;On(TV,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const n=this.ac.then((()=>(this.rc=!0,t().catch((i=>{throw this.nc=i,this.rc=!1,bh("INTERNAL UNHANDLED ERROR: ",EV(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=n,n}enqueueAfterDelay(t,n,i){this.uc(),this.oc.indexOf(t)>-1&&(n=0);const r=jA.createAndSchedule(this,t,n,i,(a=>this.hc(a)));return this.tc.push(r),r}uc(){this.nc&&fi(47125,{Pc:EV(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const n of this.tc)if(n.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((n,i)=>n.targetTimeMs-i.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const n=this.tc.indexOf(t);this.tc.splice(n,1)}}function EV(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}class C0 extends KA{constructor(t,n,i,r){super(t,n,i,r),this.type="firestore",this._queue=new SV,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new SV(t),this._firestoreClient=void 0,await t}}}function Cee(e,t){const n=typeof e=="object"?e:QN(),i=typeof e=="string"?e:g1,r=hA(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const a=Iq("firestore");a&&Eee(r,...a)}return r}function e6(e){if(e._terminated)throw new Wn(hn.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||kee(e),e._firestoreClient}function kee(e){const t=e._freezeSettings(),n=(function(r,a,l,h){return new HZ(r,a,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,J4(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(e._databaseId,e._app?.options.appId||"",e._persistenceKey,t);e._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new bee(e._authCredentials,e._appCheckCredentials,e._queue,n,e._componentsProvider&&(function(r){const a=r?._online.build();return{_offline:r?._offline.build(a),_online:a}})(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Lc(la.fromBase64String(t))}catch(n){throw new Wn(hn.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Lc(la.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Lc._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(x0(t,Lc._jsonSchema))return Lc.fromBase64String(t.bytes)}}Lc._jsonSchemaVersion="firestore/bytes/1.0",Lc._jsonSchema={type:ro("string",Lc._jsonSchemaVersion),bytes:ro("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new Wn(hn.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new sa(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new Wn(hn.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Wn(hn.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Vi(this._lat,t._lat)||Vi(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:td._jsonSchemaVersion}}static fromJSON(t){if(x0(t,td._jsonSchema))return new td(t.latitude,t.longitude)}}td._jsonSchemaVersion="firestore/geoPoint/1.0",td._jsonSchema={type:ro("string",td._jsonSchemaVersion),latitude:ro("number"),longitude:ro("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(t){this._values=(t||[]).map((n=>n))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(i,r){if(i.length!==r.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==r[a])return!1;return!0})(this._values,t._values)}toJSON(){return{type:nd._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(x0(t,nd._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((n=>typeof n=="number")))return new nd(t.vectorValues);throw new Wn(hn.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}nd._jsonSchemaVersion="firestore/vectorValue/1.0",nd._jsonSchema={type:ro("string",nd._jsonSchemaVersion),vectorValues:ro("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iee=/^__.*__$/;class Aee{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return this.fieldMask!==null?new mm(t,this.data,this.fieldMask,n,this.fieldTransforms):new w0(t,this.data,n,this.fieldTransforms)}}class t6{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return new mm(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function n6(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fi(40011,{Ac:e})}}class MT{constructor(t,n,i,r,a,l){this.settings=t,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new MT({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const n=this.path?.child(t),i=this.Vc({path:n,fc:!1});return i.gc(t),i}yc(t){const n=this.path?.child(t),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return C1(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((n=>t.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>t.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(n6(this.Ac)&&Iee.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class Pee{constructor(t,n,i){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=i||CT(t)}Cc(t,n,i,r=!1){return new MT({Ac:t,methodName:n,Dc:i,path:sa.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function i6(e){const t=e._freezeSettings(),n=CT(e._databaseId);return new Pee(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Mee(e,t,n,i,r,a={}){const l=e.Cc(a.merge||a.mergeFields?2:0,t,n,r);ZA("Data must be an object, but it was:",l,i);const h=r6(i,l);let s,p;if(a.merge)s=new ic(l.fieldMask),p=l.fieldTransforms;else if(a.mergeFields){const _=[];for(const x of a.mergeFields){const T=Ik(t,x,n);if(!l.contains(T))throw new Wn(hn.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);o6(_,T)||_.push(T)}s=new ic(_),p=l.fieldTransforms.filter((x=>s.covers(x.field)))}else s=null,p=l.fieldTransforms;return new Aee(new Il(h),s,p)}class DT extends PT{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof DT}}function Dee(e,t,n){return new MT({Ac:3,Dc:t.settings.Dc,methodName:e._methodName,fc:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class YA extends PT{constructor(t,n){super(t),this.vc=n}_toFieldTransform(t){const n=Dee(this,t,!0),i=this.vc.map((a=>k0(a,n))),r=new e_(i);return new _J(t.path,r)}isEqual(t){return t instanceof YA&&Zf(this.vc,t.vc)}}function Lee(e,t,n,i){const r=e.Cc(1,t,n);ZA("Data must be an object, but it was:",r,i);const a=[],l=Il.empty();fm(i,((s,p)=>{const _=JA(t,s,n);p=No(p);const x=r.yc(_);if(p instanceof DT)a.push(_);else{const T=k0(p,x);T!=null&&(a.push(_),l.set(_,T))}}));const h=new ic(a);return new t6(l,h,r.fieldTransforms)}function Ree(e,t,n,i,r,a){const l=e.Cc(1,t,n),h=[Ik(t,i,n)],s=[r];if(a.length%2!=0)throw new Wn(hn.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<a.length;T+=2)h.push(Ik(t,a[T])),s.push(a[T+1]);const p=[],_=Il.empty();for(let T=h.length-1;T>=0;--T)if(!o6(p,h[T])){const k=h[T];let P=s[T];P=No(P);const M=l.yc(k);if(P instanceof DT)p.push(k);else{const R=k0(P,M);R!=null&&(p.push(k),_.set(k,R))}}const x=new ic(p);return new t6(_,x,l.fieldTransforms)}function k0(e,t){if(s6(e=No(e)))return ZA("Unsupported field value:",t,e),r6(e,t);if(e instanceof PT)return(function(i,r){if(!n6(r.Ac))throw r.Sc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(r);a&&r.fieldTransforms.push(a)})(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(i,r){const a=[];let l=0;for(const h of i){let s=k0(h,r.wc(l));s==null&&(s={nullValue:"NULL_VALUE"}),a.push(s),l++}return{arrayValue:{values:a}}})(e,t)}return(function(i,r){if((i=No(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return pJ(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=Zr.fromDate(i);return{timestampValue:w1(r.serializer,a)}}if(i instanceof Zr){const a=new Zr(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:w1(r.serializer,a)}}if(i instanceof td)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Lc)return{bytesValue:S4(r.serializer,i._byteString)};if(i instanceof po){const a=r.databaseId,l=i.firestore._databaseId;if(!l.isEqual(a))throw r.Sc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:RA(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof nd)return(function(l,h){return{mapValue:{fields:{[e4]:{stringValue:t4},[v1]:{arrayValue:{values:l.toArray().map((p=>{if(typeof p!="number")throw h.Sc("VectorValues must only contain numeric values.");return PA(h.serializer,p)}))}}}}}})(i,r);throw r.Sc(`Unsupported field value: ${TA(i)}`)})(e,t)}function r6(e,t){const n={};return K5(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):fm(e,((i,r)=>{const a=k0(r,t.mc(i));a!=null&&(n[i]=a)})),{mapValue:{fields:n}}}function s6(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Zr||e instanceof td||e instanceof Lc||e instanceof po||e instanceof PT||e instanceof nd)}function ZA(e,t,n){if(!s6(n)||!G5(n)){const i=TA(n);throw i==="an object"?t.Sc(e+" a custom object"):t.Sc(e+" "+i)}}function Ik(e,t,n){if((t=No(t))instanceof AT)return t._internalPath;if(typeof t=="string")return JA(e,t);throw C1("Field path arguments must be of type string or ",e,!1,void 0,n)}const Oee=new RegExp("[~\\*/\\[\\]]");function JA(e,t,n){if(t.search(Oee)>=0)throw C1(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new AT(...t.split("."))._internalPath}catch{throw C1(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function C1(e,t,n,i,r){const a=i&&!i.isEmpty(),l=r!==void 0;let h=`Function ${t}() called with invalid data`;n&&(h+=" (via `toFirestore()`)"),h+=". ";let s="";return(a||l)&&(s+=" (found",a&&(s+=` in field ${i}`),l&&(s+=` in document ${r}`),s+=")"),new Wn(hn.INVALID_ARGUMENT,h+e+s)}function o6(e,t){return e.some((n=>n.isEqual(t)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a6{constructor(t,n,i,r,a){this._firestore=t,this._userDataWriter=n,this._key=i,this._document=r,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new po(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new Vee(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(l6("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Vee extends a6{data(){return super.data()}}function l6(e,t){return typeof t=="string"?JA(e,t):t instanceof AT?t._internalPath:t._delegate._internalPath}class Bee{convertValue(t,n="none"){switch(nm(t)){case 0:return null;case 1:return t.booleanValue;case 2:return js(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(tm(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw fi(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const i={};return fm(t,((r,a)=>{i[r]=this.convertValue(a,n)})),i}convertVectorValue(t){const n=t.fields?.[v1].arrayValue?.values?.map((i=>js(i.doubleValue)));return new nd(n)}convertGeoPoint(t){return new td(js(t.latitude),js(t.longitude))}convertArray(t,n){return(t.values||[]).map((i=>this.convertValue(i,n)))}convertServerTimestamp(t,n){switch(n){case"previous":const i=yT(t);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Vb(t));default:return null}}convertTimestamp(t){const n=em(t);return new Zr(n.seconds,n.nanos)}convertDocumentKey(t,n){const i=_s.fromString(t);Cr(P4(i),9688,{name:t});const r=new Bb(i.get(1),i.get(3)),a=new ei(i.popFirst(5));return r.isEqual(n)||bh(`Document ${a} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fee(e,t,n){let i;return i=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,i}class Wy{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Mp extends a6{constructor(t,n,i,r,a,l){super(t,n,i,r,l),this._firestore=t,this._firestoreImpl=t,this.metadata=a}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new Mw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const i=this._document.data.field(l6("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Wn(hn.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=Mp._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Mp._jsonSchemaVersion="firestore/documentSnapshot/1.0",Mp._jsonSchema={type:ro("string",Mp._jsonSchemaVersion),bundleSource:ro("string","DocumentSnapshot"),bundleName:ro("string"),bundle:ro("string")};class Mw extends Mp{data(t={}){return super.data(t)}}class fb{constructor(t,n,i,r){this._firestore=t,this._userDataWriter=n,this._snapshot=r,this.metadata=new Wy(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const t=[];return this.forEach((n=>t.push(n))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach((i=>{t.call(n,new Mw(this._firestore,this._userDataWriter,i.key,i,new Wy(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Wn(hn.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(r,a){if(r._snapshot.oldDocs.isEmpty()){let l=0;return r._snapshot.docChanges.map((h=>{const s=new Mw(r._firestore,r._userDataWriter,h.doc.key,h.doc,new Wy(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);return h.doc,{type:"added",doc:s,oldIndex:-1,newIndex:l++}}))}{let l=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((h=>a||h.type!==3)).map((h=>{const s=new Mw(r._firestore,r._userDataWriter,h.doc.key,h.doc,new Wy(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);let p=-1,_=-1;return h.type!==0&&(p=l.indexOf(h.doc.key),l=l.delete(h.doc.key)),h.type!==1&&(l=l.add(h.doc),_=l.indexOf(h.doc.key)),{type:zee(h.type),doc:s,oldIndex:p,newIndex:_}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Wn(hn.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=fb._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=wA.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],r=[];return this.docs.forEach((a=>{a._document!==null&&(n.push(a._document),i.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),r.push(a.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function zee(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return fi(61501,{type:e})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nee(e){e=Jf(e,po);const t=Jf(e.firestore,C0);return See(e6(t),e._key).then((n=>jee(t,e,n)))}fb._jsonSchemaVersion="firestore/querySnapshot/1.0",fb._jsonSchema={type:ro("string",fb._jsonSchemaVersion),bundleSource:ro("string","QuerySnapshot"),bundleName:ro("string"),bundle:ro("string")};class Uee extends Bee{constructor(t){super(),this.firestore=t}convertBytes(t){return new Lc(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new po(this.firestore,null,n)}}function c6(e,t,n){e=Jf(e,po);const i=Jf(e.firestore,C0),r=Fee(e.converter,t,n);return eP(i,[Mee(i6(i),"setDoc",e._key,r,e.converter!==null,n).toMutation(e._key,fu.none())])}function QA(e,t,n,...i){e=Jf(e,po);const r=Jf(e.firestore,C0),a=i6(r);let l;return l=typeof(t=No(t))=="string"||t instanceof AT?Ree(a,"updateDoc",e._key,t,n,i):Lee(a,"updateDoc",e._key,t),eP(r,[l.toMutation(e._key,fu.exists(!0))])}function $ee(e){return eP(Jf(e.firestore,C0),[new MA(e._key,fu.none())])}function eP(e,t){return(function(i,r){const a=new Wf;return i.asyncQueue.enqueueAndForget((async()=>uee(await wee(i),r,a))),a.promise})(e6(e),t)}function jee(e,t,n){const i=n.docs.get(t._key),r=new Uee(e);return new Mp(e,r,t._key,i,new Wy(n.hasPendingWrites,n.fromCache),t.converter)}function Wee(...e){return new YA("arrayUnion",e)}(function(t,n=!0){(function(r){x_=r})(b_),Xv(new Np("firestore",((i,{instanceIdentifier:r,options:a})=>{const l=i.getProvider("app").getImmediate(),h=new C0(new EZ(i.getProvider("auth-internal")),new IZ(l,i.getProvider("app-check-internal")),(function(p,_){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new Wn(hn.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Bb(p.options.projectId,_)})(l,r),l);return a={useFetchStreams:n,...a},h._setSettings(a),h}),"PUBLIC").setMultipleInstances(!0)),$f(DO,LO,t),$f(DO,LO,"esm2020")})();const Hee={apiKey:"AIzaSyBTy0tRrYfIvPYhZ-k49IsU_IS9WuTVxKA",authDomain:"singatrain.firebaseapp.com",projectId:"singatrain",storageBucket:"singatrain.firebasestorage.app",messagingSenderId:"773752736023",appId:"1:773752736023:web:456315abd28b9854058f52",measurementId:"G-ZQHSRHNBCB"},u6=JN(Hee),I0=B5(u6),Vv=Cee(u6);async function Gee(e,t){try{return{success:!0,user:(await sY(I0,e,t)).user}}catch(n){console.error=()=>{},setTimeout(()=>console.error=console.__proto__.error);let i="";switch(n.code){case"auth/email-already-in-use":i="This email is already registered.";break;case"auth/invalid-email":i="Please enter a valid email address.";break;case"auth/weak-password":i="Password should be at least 6 characters.";break;default:i="An unexpected error occurred during registration."}return{success:!1,message:i}}}async function qee(e,t){if(!e||!t)return{success:!1,message:"Please enter both email and password."};try{return{success:!0,user:(await oY(I0,e,t)).user}}catch(n){let i="";switch(n.code){case"auth/invalid-email":i="Please enter a valid email address.";break;case"auth/user-not-found":i="No account found with this email.";break;case"auth/wrong-password":i="Incorrect password. Please try again.";break;default:i="Login failed. Please check your details and try again."}return{success:!1,message:i}}}async function Kee(){try{return await uY(I0),{success:!0}}catch(e){return LT(e)}}async function Xee(e){try{return await rY(I0,e),{success:!0}}catch(t){return LT(t)}}const CV=e=>{try{return cY(I0,e)}catch(t){console.warn("Auth observer failed:",t.message)}};async function Yee(e,t){try{return await c6(Ov(Vv,"users",e),{name:t},{merge:!0}),{success:!0}}catch(n){return LT(n)}}async function Zee(e,t){try{const n=Ov(Vv,"users",e);return await QA(n,{favorite_stations:Wee(t)}),{success:!0}}catch(n){return LT(n)}}function LT(e){const t={"auth/invalid-email":"Invalid email address.","auth/user-not-found":"No user found with this email.","auth/wrong-password":"Incorrect password.","auth/weak-password":"Password should be at least 6 characters.","auth/email-already-in-use":"This email is already registered.","auth/network-request-failed":"Network error. Please check your connection.","permission-denied":"You do not have permission to perform this action."};return{success:!1,code:e.code,message:t[e.code]||"An unexpected error occurred."}}const d6={"Jurong East":{"North-South Line":"NS1","East-West Line":"EW24"},"Bukit Batok":{"North-South Line":"NS2"},"Bukit Gombak":{"North-South Line":"NS3"},"Choa Chu Kang":{"North-South Line":"NS4","LRT Line":"BP1"},"Yew Tee":{"North-South Line":"NS5"},Kranji:{"North-South Line":"NS7"},Marsiling:{"North-South Line":"NS8"},Woodlands:{"North-South Line":"NS9","Thomson-East Coast Line":"TE2"},Admiralty:{"North-South Line":"NS10"},Sembawang:{"North-South Line":"NS11"},Canberra:{"North-South Line":"NS12"},Yishun:{"North-South Line":"NS13"},Khatib:{"North-South Line":"NS14"},"Yio Chu Kang":{"North-South Line":"NS15"},"Ang Mo Kio":{"North-South Line":"NS16"},Bishan:{"North-South Line":"NS17","Circle Line":"CC15"},Braddell:{"North-South Line":"NS18"},"Toa Payoh":{"North-South Line":"NS19"},Novena:{"North-South Line":"NS20"},Newton:{"North-South Line":"NS21","Downtown Line":"DT11"},Orchard:{"North-South Line":"NS22","Thomson-East Coast Line":"TE14"},Somerset:{"North-South Line":"NS23"},"Dhoby Ghaut":{"North-South Line":"NS24","North-East Line":"NE6","Circle Line":"CC1"},"City Hall":{"North-South Line":"NS25","East-West Line":"EW13"},"Raffles Place":{"North-South Line":"NS26","East-West Line":"EW14"},"Marina Bay":{"North-South Line":"NS27","Thomson-East Coast Line":"TE20"},"Marina South Pier":{"North-South Line":"NS28"},"Pasir Ris":{"East-West Line":"EW1"},Tampines:{"East-West Line":"EW2","Downtown Line":"DT32"},Simei:{"East-West Line":"EW3","Downtown Line":"DT33"},"Tanah Merah":{"East-West Line":"EW4","Downtown Line":"DT34"},Bedok:{"East-West Line":"EW5"},Kembangan:{"East-West Line":"EW6"},Eunos:{"East-West Line":"EW7"},"Paya Lebar":{"East-West Line":"EW8","Circle Line":"CC9"},Aljunied:{"East-West Line":"EW9"},Kallang:{"East-West Line":"EW10"},Lavender:{"East-West Line":"EW11"},Bugis:{"East-West Line":"EW12","Downtown Line":"DT14"},"Tanjong Pagar":{"East-West Line":"EW15"},"Outram Park":{"East-West Line":"EW16","North-East Line":"NE3","Thomson-East Coast Line":"TE15"},"Tiong Bahru":{"East-West Line":"EW17"},Redhill:{"East-West Line":"EW18"},Queenstown:{"East-West Line":"EW19"},Commonwealth:{"East-West Line":"EW20"},"Buona Vista":{"East-West Line":"EW21","Circle Line":"CC22"},Dover:{"East-West Line":"EW22"},Clementi:{"East-West Line":"EW23"},"Chinese Garden":{"East-West Line":"EW25"},Lakeside:{"East-West Line":"EW26"},"Boon Lay":{"East-West Line":"EW27"},Pioneer:{"East-West Line":"EW28"},"Joo Koon":{"East-West Line":"EW29"},"Gul Circle":{"East-West Line":"EW30"},"Tuas Crescent":{"East-West Line":"EW31"},"Tuas West Road":{"East-West Line":"EW32"},"Tuas Link":{"East-West Line":"EW33"},"Dhoby Ghaut":{"Circle Line":"CC1","North-South Line":"NS24","North-East Line":"NE6"},"Bras Basah":{"Circle Line":"CC2"},Esplanade:{"Circle Line":"CC3"},Promenade:{"Circle Line":"CC4","Downtown Line":"DT15"},Bayfront:{"Circle Line":"CC5","Downtown Line":"DT16"},"Nicoll Highway":{"Circle Line":"CC6"},Stadium:{"Circle Line":"CC7"},Mountbatten:{"Circle Line":"CC8"},"Paya Lebar":{"Circle Line":"CC9","East-West Line":"EW8"},MacPherson:{"Circle Line":"CC10","Downtown Line":"DT26"},"Tai Seng":{"Circle Line":"CC11"},Bartley:{"Circle Line":"CC12"},Serangoon:{"Circle Line":"CC13","North-East Line":"NE12"},"Lorong Chuan":{"Circle Line":"CC14"},Bishan:{"Circle Line":"CC15","North-South Line":"NS17"},Marymount:{"Circle Line":"CC16"},Caldecott:{"Circle Line":"CC17","Thomson-East Coast Line":"TE9"},"Botanic Gardens":{"Circle Line":"CC19","Downtown Line":"DT9"},"Farrer Road":{"Circle Line":"CC20"},"Holland Village":{"Circle Line":"CC21"},"Buona Vista":{"Circle Line":"CC22","East-West Line":"EW21"},"one-north":{"Circle Line":"CC23"},"Kent Ridge":{"Circle Line":"CC24"},"Haw Par Villa":{"Circle Line":"CC25"},"Pasir Panjang":{"Circle Line":"CC26"},"Labrador Park":{"Circle Line":"CC27"},HarbourFront:{"Circle Line":"CC29","North-East Line":"NE1"},HarbourFront:{"North-East Line":"NE1","Circle Line":"CC29"},"Outram Park":{"North-East Line":"NE3","East-West Line":"EW16","Thomson-East Coast Line":"TE15"},Chinatown:{"North-East Line":"NE4","Downtown Line":"DT19"},"Clarke Quay":{"North-East Line":"NE5"},"Dhoby Ghaut":{"North-East Line":"NE6","North-South Line":"NS24","Circle Line":"CC1"},"Little India":{"North-East Line":"NE7","Downtown Line":"DT12"},"Farrer Park":{"North-East Line":"NE8"},"Boon Keng":{"North-East Line":"NE9"},"Potong Pasir":{"North-East Line":"NE10"},Woodleigh:{"North-East Line":"NE11"},Serangoon:{"North-East Line":"NE12","Circle Line":"CC13"},Kovan:{"North-East Line":"NE13"},Hougang:{"North-East Line":"NE14"},Buangkok:{"North-East Line":"NE15"},Sengkang:{"North-East Line":"NE16","LRT Line":"SW1"},Punggol:{"North-East Line":"NE17","LRT Line":"PW1"},"Punggol Coast":{"North-East Line":"NE18"},"Woodlands North":{"Thomson-East Coast Line":"TE1"},Woodlands:{"Thomson-East Coast Line":"TE2","North-South Line":"NS9"},"Woodlands South":{"Thomson-East Coast Line":"TE3"},Springleaf:{"Thomson-East Coast Line":"TE4"},Lentor:{"Thomson-East Coast Line":"TE5"},Mayflower:{"Thomson-East Coast Line":"TE6"},"Bright Hill":{"Thomson-East Coast Line":"TE7"},"Upper Thomson":{"Thomson-East Coast Line":"TE8"},Caldecott:{"Thomson-East Coast Line":"TE9","Circle Line":"CC17"},Stevens:{"Thomson-East Coast Line":"TE10","Downtown Line":"DT10"},Orchard:{"Thomson-East Coast Line":"TE14","North-South Line":"NS22"},"Shenton Way":{"Thomson-East Coast Line":"TE18"},"Gardens By The Bay":{"Thomson-East Coast Line":"TE19"},"Marina Bay":{"Thomson-East Coast Line":"TE20","North-South Line":"NS27"},"Bukit Panjang":{"Downtown Line":"DT1","LRT Line":"BP6"},Cashew:{"Downtown Line":"DT2"},Hillview:{"Downtown Line":"DT3"},"Beauty World":{"Downtown Line":"DT5"},"King Albert Park":{"Downtown Line":"DT6"},"Sixth Avenue":{"Downtown Line":"DT7"},"Tan Kah Kee":{"Downtown Line":"DT8"},"Botanic Gardens":{"Downtown Line":"DT9","Circle Line":"CC19"},Stevens:{"Downtown Line":"DT10","Thomson-East Coast Line":"TE10"},Newton:{"Downtown Line":"DT11","North-South Line":"NS21"},"Little India":{"Downtown Line":"DT12","North-East Line":"NE7"},Rochor:{"Downtown Line":"DT13"},Bugis:{"Downtown Line":"DT14","East-West Line":"EW12"},Promenade:{"Downtown Line":"DT15","Circle Line":"CC4"},Bayfront:{"Downtown Line":"DT16","Circle Line":"CC5"},Downtown:{"Downtown Line":"DT17"},"Telok Ayer":{"Downtown Line":"DT18"},Chinatown:{"Downtown Line":"DT19","North-East Line":"NE4"},"Fort Canning":{"Downtown Line":"DT20"},Bencoolen:{"Downtown Line":"DT21"},"Jalan Besar":{"Downtown Line":"DT22"},Bendemeer:{"Downtown Line":"DT23"},"Geylang Bahru":{"Downtown Line":"DT24"},Mattar:{"Downtown Line":"DT25"},MacPherson:{"Downtown Line":"DT26","Circle Line":"CC10"},Ubi:{"Downtown Line":"DT27"},"Kaki Bukit":{"Downtown Line":"DT28"},"Bedok North":{"Downtown Line":"DT29"},"Bedok Reservoir":{"Downtown Line":"DT30"},"Upper Changi":{"Downtown Line":"DT31"},Tampines:{"Downtown Line":"DT32","East-West Line":"EW2"},Simei:{"Downtown Line":"DT33","East-West Line":"EW3"},Expo:{"Downtown Line":"DT34","East-West Line":"EW35"},"Changi Airport":{"Downtown Line":"DT36","East-West Line":"EW4"},"Choa Chu Kang":{"LRT Line":"BP1","North-South Line":"NS4"},"Keat Hong":{"LRT Line":"BP2"},"Teck Whye":{"LRT Line":"BP3"},Phoenix:{"LRT Line":"BP4"},Senja:{"LRT Line":"BP5"},"Bukit Panjang":{"LRT Line":"BP6","Downtown Line":"DT1"},Sengkang:{"LRT Line":"SW1","North-East Line":"NE16"},Compassvale:{"LRT Line":"SW2"},Rumbia:{"LRT Line":"SW3"},Bakau:{"LRT Line":"SW4"},Kangkar:{"LRT Line":"SW5"},Renjong:{"LRT Line":"SW6"},Thanggam:{"LRT Line":"SW7"},Fernvale:{"LRT Line":"SW8"},Punggol:{"LRT Line":"PW1","North-East Line":"NE17"},Oasis:{"LRT Line":"PW2"},Damai:{"LRT Line":"PW3"},Sumang:{"LRT Line":"PW4"},Prentice:{"LRT Line":"PW5"},"Sam Kee":{"LRT Line":"PW6"},"Punggol Point":{"LRT Line":"PW7"},Cove:{"LRT Line":"PW8"}},Ak="cC6wlxIHROGAyH+80wpqbg==",Jee={class:"dashboard-view"},Qee={class:"hero row align-items-center gy-5"},ete={class:"col-lg-12 hero-intro","data-aos":"fade-up"},tte={class:"hero-cta container-fluid"},nte={class:"col-lg-12 hero-illustration text-center","data-aos":"fade-left"},ite={key:0,class:"station-highlight-overlay"},rte={class:"live-tools mt-5","data-aos":"fade-up","data-aos-delay":"150"},ste={class:"ticker-station d-flex align-items-center gap-2"},ote={class:"ticker-line tab-desc mt-1"},ate={class:"live-clock"},lte={class:"ticker-times"},cte={key:0,class:"tab-desc small"},ute={class:"row g-4 mt-4"},dte={class:"col-lg-6","data-aos":"fade-up","data-aos-delay":"250"},hte={class:"section-card h-100"},fte={class:"list-unstyled mt-3"},mte={key:0,class:"tab-desc"},pte={class:"flex-grow-1 d-flex flex-column gap-2"},gte={class:"d-flex justify-content-between align-items-start"},vte={class:"favorite-label"},_te={class:"text-muted small"},yte=["onClick"],bte={class:"arrival-times d-flex flex-wrap gap-2"},xte={class:"first-crowd d-flex gap-3 small text-muted"},wte={class:"col-lg-6","data-aos":"fade-up","data-aos-delay":"350"},Tte={class:"section-card h-100"},Ste={class:"list-unstyled mb-0"},Ete="https://corsproxy.io/?",kV={__name:"Dashboard",setup(e){const t=UN({updateIntervalMs:1e3}),n=tt(!1),i=tt(!1),r=tt(!0),a=tt(!1),l=tt(1),h=tt(0),s=tt(0),p=tt(!1),_=tt({x:0,y:0}),x=tt(null),T=tt(null);B5();const k=tt(null),P=tt({x:0,y:0}),M=tt(null),R=tt([]),F=tt("Never");function B(Ae){if(Ae.line)return Ae.line;const he=ob[Ae.station];return!he||!he.length?null:he[0]}function H(Ae,he){const et=d6[Ae];if(et)return et[he]}const G=io({index:0,station:zx[0],arrivals:[],lineColor:Tf(zx[0].line)}),ee=tt("--:--:--"),ie=tt(null),J=tt(null),{state:$,setActiveTab:W,removeFavorite:X}=m0(),re=fe(()=>$.favorites);function Y(Ae){return Ae<=0?"Arriving":`${Math.round(Ae)} min`}async function Z(){const Ae=await Promise.all(re.value.map(async he=>{const et=B(he);if(!et)return he;const Qe=(t.getArrivals()[he.station]||{})[et]||[],Ct=mt[et];let Pt=Ct?await ge(Ct):null,Bt="NA";if(Pt?.length){const Ht=H(he.station,et),En=Pt.find(Jt=>Jt.stationCode===Ht);En&&(Bt=En.crowdLevel)}return{...he,line:et,arrivals:Qe.slice(0,3),firstTrainTime:vt[et]||"N/A",lastTrainTime:"",crowdLevel:Bt}}));$.favorites=Ae}async function ge(Ae){try{const he=Ete+encodeURIComponent(`https://datamall2.mytransport.sg/ltaodataservice/PCDRealTime?TrainLine=${Ae}`),et=await fetch(he,{method:"GET",headers:{AccountKey:Ak,accept:"application/json"}});if(!et.ok)return null;const dt=await et.json();return!dt.value||!Array.isArray(dt.value)?null:dt.value.map(Qe=>({stationCode:Qe.Station,crowdLevel:Qe.CrowdLevel}))}catch(he){return console.error("Error fetching crowd data:",he),null}}async function be(){console.log("Simulator station keys:",Object.keys(t.getArrivals()));const Ae=t.getArrivals()[G.station.station]||{};R.value=Object.entries(Ae).map(([he,et])=>({name:he,times:et})),F.value=new Date().toLocaleTimeString()}function Be(Ae=!1){Ae||(G.index=(G.index+1)%zx.length),G.station=zx[G.index],G.lineColor=Tf(G.station.line);let he=t.getStationArrivals(G.station.station);G.arrivals=(he?.[G.station.line]||[]).slice(0,3),n.value=!1,document.querySelector(".live-ticker-card").offsetWidth,n.value=!0}function nt(){const Ae=new Date;ee.value=Ae.toLocaleTimeString(void 0,{hour12:!1})}const We=Ae=>{if(Ae&&r.value){const he=Ae.target.getBoundingClientRect();P.value={x:Ae.clientX-he.left,y:Ae.clientY-he.top}}i.value=!0,a.value=!0,l.value=1,h.value=0,s.value=0,r.value?setTimeout(()=>{a.value=!1,r.value=!1},1e3):a.value=!1},Le=()=>{i.value=!1,a.value=!1,l.value=1,h.value=0,s.value=0},Ze=Ae=>{l.value+=Ae.deltaY<0?.1:-.1,l.value=Math.min(Math.max(l.value,1),4)},Ee=Ae=>{p.value=!0,_.value={x:Ae.clientX-h.value,y:Ae.clientY-s.value}},Je=Ae=>{p.value&&(h.value=Ae.clientX-_.value.x,s.value=Ae.clientY-_.value.y)},it=()=>{p.value=!1},vt={"North-South Line":"5:30 AM","East-West Line":"5:31 AM","Circle Line":"5:32 AM","North East Line":"5:42 AM","Downtown Line":"5:33 AM","Thomson-East Coast Line":"5:30 AM"},mt={"East-West Line":"EWL","North-South Line":"NSL","Circle Line":"CCL","Downtown Line":"DTL","North-East Line":"NEL","Thomson-East Coast Line":"TEL","Bukit Panjang LRT":"BPL","Sengkang LRT":"SLRT","Punggol LRT":"PLRT","Circle Line Extension":"CEL","Changi Extension":"CGL"},ot=Ae=>{if(Ae.touches.length===2){const he=Ae.touches[0].clientX-Ae.touches[1].clientX,et=Ae.touches[0].clientY-Ae.touches[1].clientY;x.value=Math.sqrt(he*he+et*et)}else Ae.touches.length===1&&(p.value=!0,_.value={x:Ae.touches[0].clientX-h.value,y:Ae.touches[0].clientY-s.value})},Ye=Ae=>{if(Ae.touches.length===2){const he=Ae.touches[0].clientX-Ae.touches[1].clientX,et=Ae.touches[0].clientY-Ae.touches[1].clientY,dt=Math.sqrt(he*he+et*et);if(x.value){const Qe=dt-x.value;l.value+=Qe*.005,l.value=Math.min(Math.max(l.value,1),4)}x.value=dt}else Ae.touches.length===1&&p.value&&(h.value=Ae.touches[0].clientX-_.value.x,s.value=Ae.touches[0].clientY-_.value.y)},ut=()=>{x.value=null,p.value=!1},Ke=fe(()=>({transform:`translate(${h.value}px, ${s.value}px) scale(${l.value})`,transition:p.value?"none":"transform 0.1s ease-out"})),jt=async Ae=>{try{if(!T.value?.uid)return;X(Ae);const he=$.favorites.map(et=>({...et}));await QA(Ov(Vv,"users",T.value.uid),{favorite_stations:he}),console.log("Favorite removed successfully.")}catch(he){console.error("Error removing favorite:",he)}};function xn(Ae){return{l:"Low",m:"Moderate",h:"High"}[Ae]||"Unknown"}function ke(Ae){return{l:"crowd-low",m:"crowd-moderate",h:"crowd-high"}[Ae]||""}return Kr(()=>{t.start(),Be(!0),nt(),be(),Z(),ie.value=setInterval(()=>Be(!1),vq),J.value=setInterval(nt,1e3),M.value=setInterval(()=>{be(),Z()},3e4)}),Nr(()=>{t.stop(),ie.value&&clearInterval(ie.value),J.value&&clearInterval(J.value),M.value&&clearInterval(M.value)}),(Ae,he)=>(nn(),mn("section",Jee,[z("div",Qee,[z("div",ete,[he[9]||(he[9]=z("h1",{class:"mb-3"},"Singapores MRT companion",-1)),he[10]||(he[10]=z("p",null," Plan, monitor, and optimise every MRT journey with live arrivals, disruption-aware routing, fare insights, and collaborative meet-up tools  all in one polished interface. ",-1)),z("div",tte,[z("button",{class:"btn btn-primary px-4 py-3 hover-float",onClick:he[0]||(he[0]=et=>xi(W)("live"))},[...he[7]||(he[7]=[z("span",{class:"material-icons me-2"},"tram",-1),Fn(" Live Tracker ",-1)])]),z("button",{class:"btn btn-outline-danger px-4 py-3 hover-float",onClick:he[1]||(he[1]=et=>xi(W)("route"))},[...he[8]||(he[8]=[z("span",{class:"material-icons me-2"},"alt_route",-1),Fn(" Plan a Route ",-1)])])])]),z("div",nte,[z("img",{src:QR,alt:"SingaTrain map illustration",class:"img-fluid rounded-4 shadow map-preview",role:"button",onClick:We}),se(od,{name:"map-fullscreen"},{default:An(()=>[i.value?(nn(),mn("div",{key:0,class:xt(["mrt-map-fullscreen",{"first-open":r.value,animating:a.value}]),onClick:ol(Le,["self"])},[z("button",{class:"close-map-btn",onClick:Le},[...he[11]||(he[11]=[z("span",{class:"material-icons"},"close",-1)])]),z("div",{class:"zoom-container",onWheel:ol(Ze,["prevent"]),onMousedown:Ee,onMouseup:it,onMouseleave:it,onMousemove:Je,onTouchstart:ot,onTouchmove:ol(Ye,["prevent"]),onTouchend:ut},[z("img",{ref_key:"mapImage",ref:k,src:QR,alt:"Interactive MRT Map",class:xt(["zoomable-map",{"first-open-animate":r.value}]),style:Yt(Ke.value)},null,6)],32),r.value?(nn(),mn("div",ite,[...he[12]||(he[12]=[z("div",{class:"highlight-pulse"},null,-1)])])):tr("",!0)],2)):tr("",!0)]),_:1})])]),z("div",rte,[(nn(),mn("div",{class:xt(["live-ticker-card w-100",{cycle:n.value}]),key:G.station.station,style:Yt({borderColor:G.lineColor})},[z("div",null,[he[14]||(he[14]=z("div",{class:"ticker-label text-uppercase fw-semibold"},"Next arrivals",-1)),z("div",ste,[he[13]||(he[13]=z("span",{class:"material-icons text-danger"},"ev_station",-1)),z("span",null,sn(G.station?.station),1)]),z("div",ote,[z("span",{class:"material-icons",style:Yt({color:G.lineColor})},"timeline",4),Fn(" "+sn(G.station?.line),1)])]),z("div",ate,[z("span",null,sn(ee.value),1)]),z("div",lte,[(nn(!0),mn(un,null,Ws(G.arrivals,(et,dt)=>(nn(),mn("span",{key:dt,class:"ticker-pill",style:Yt({borderColor:G.lineColor,color:G.lineColor})},[he[15]||(he[15]=z("span",{class:"material-icons"},"train",-1)),Fn(" "+sn(Y(et)),1)],4))),128)),G.arrivals.length?tr("",!0):(nn(),mn("span",cte,"Fetching arrivals"))])],6))]),z("div",ute,[z("div",dte,[z("div",hte,[he[25]||(he[25]=z("h2",{class:"section-title mb-3"},"Personalised commute",-1)),he[26]||(he[26]=z("p",{class:"tab-desc"}," Your favourite stations are pinned across dashboards and live tracking for quick access wherever you roam. ",-1)),z("ul",fte,[re.value.length?tr("",!0):(nn(),mn("li",mte,[he[16]||(he[16]=z("span",{class:"material-icons align-middle"},"star_border",-1)),he[17]||(he[17]=Fn(" Add favourites from ",-1)),z("a",{href:"#",class:"interactive-link fw-semibold",onClick:he[2]||(he[2]=ol(et=>xi(W)("live"),["prevent"]))}," Live Tracker"),he[18]||(he[18]=Fn(" or ",-1)),z("a",{href:"#",class:"interactive-link fw-semibold",onClick:he[3]||(he[3]=ol(et=>xi(W)("profile"),["prevent"]))}," Profile"),he[19]||(he[19]=Fn(" to see them here. ",-1))])),(nn(!0),mn(un,null,Ws(re.value,et=>(nn(),mn("li",{key:et.station,class:"favorite-card d-flex flex-column flex-md-row align-items-start gap-3 p-3 rounded-3 shadow-sm"},[z("div",{class:"line-color-indicator",style:Yt({backgroundColor:xi(Tf)(et.line)})},null,4),z("div",pte,[z("div",gte,[z("div",null,[z("strong",vte,sn(et.label),1),z("div",_te,sn(et.station),1)]),z("button",{class:"btn btn-sm btn-outline-danger",onClick:dt=>jt(et)},[...he[20]||(he[20]=[z("span",{class:"material-icons"},"close",-1)])],8,yte)]),z("div",bte,[(nn(!0),mn(un,null,Ws(et.arrivals,(dt,Qe)=>(nn(),mn("span",{key:Qe,class:"arrival-pill",style:Yt({borderColor:xi(Tf)(et.line),color:xi(Tf)(et.line)})},[he[21]||(he[21]=z("span",{class:"material-icons"},"train",-1)),Fn(" "+sn(Y(dt)),1)],4))),128))]),z("div",xte,[z("div",null,[he[22]||(he[22]=z("span",{class:"material-icons",style:{"font-size":"16px"}},"schedule",-1)),Fn(" First: "+sn(et.firstTrainTime),1)]),z("div",null,[he[23]||(he[23]=z("span",{class:"material-icons",style:{"font-size":"16px"}},"people",-1)),he[24]||(he[24]=Fn(" Crowd: ",-1)),z("span",{class:xt(["crowd-badge",ke(et.crowdLevel)])},sn(xn(et.crowdLevel)),3)])])])]))),128))])])]),z("div",wte,[z("div",Tte,[he[30]||(he[30]=z("h2",{class:"section-title mb-3"},"Explore Our Features",-1)),z("ul",Ste,[z("li",{class:"feature-item py-2 border-bottom",onClick:he[4]||(he[4]=et=>xi(W)("route"))},[...he[27]||(he[27]=[z("div",{class:"d-flex align-items-center gap-3",role:"button"},[z("span",{class:"material-icons text-primary"},"flash_on"),z("div",null,[z("div",{class:"fw-semibold feature-title"},"Dynamic Route Visualiser"),z("div",{class:"tab-desc small"},"Visualise your journey with transfer-aware walking times on an interactive map.")])],-1)])]),z("li",{class:"feature-item py-2 border-bottom",onClick:he[5]||(he[5]=et=>xi(W)("fare"))},[...he[28]||(he[28]=[z("div",{class:"d-flex align-items-center gap-3",role:"button"},[z("span",{class:"material-icons text-success"},"insights"),z("div",null,[z("div",{class:"fw-semibold feature-title"},"Fare Insights"),z("div",{class:"tab-desc small"},"See distance-based fares and monthly pass break-even points for smarter travel.")])],-1)])]),z("li",{class:"feature-item py-2",onClick:he[6]||(he[6]=et=>xi(W)("meetup"))},[...he[29]||(he[29]=[z("div",{class:"d-flex align-items-center gap-3",role:"button"},[z("span",{class:"material-icons text-warning"},"diversity_3"),z("div",null,[z("div",{class:"fw-semibold feature-title"},"Meet Halfway"),z("div",{class:"tab-desc small"},"Find the fairest interchange point for your group in seconds.")])],-1)])])])])])])]))}},Cte={class:"section-card"},kte={class:"row g-3 mb-4"},Ite={class:"col-md-6"},Ate=["value"],Pte={class:"col-md-6"},Mte=["value"],Dte={key:0,class:"mb-4"},Lte={class:"d-flex justify-content-between align-items-start"},Rte={class:"mb-0 mt-1"},Ote={class:"badge bg-warning text-dark"},Vte={class:"live-tools mb-4"},Bte={class:"ticker-station d-flex align-items-center gap-2"},Fte={class:"ticker-line text-muted mt-1"},zte={class:"material-icons"},Nte={class:"ticker-times"},Ute={key:0,class:"text-muted small"},$te={class:"mb-4"},jte={class:"mb-3"},Wte={key:0,class:"spinner-border spinner-border-sm ms-2",role:"status"},Hte={class:"arrival-details flex-grow-1"},Gte={class:"d-flex justify-content-between align-items-center mb-2"},qte={class:"d-flex justify-content-between align-items-center"},Kte={class:"d-flex align-items-center gap-2"},Xte={class:"d-flex align-items-center gap-2"},Yte={class:"text-center"},Zte={class:"text-muted"},IV="https://corsproxy.io/?",Jte="https://datamall2.mytransport.sg/ltaodataservice/TrainServiceAlerts",Qte={__name:"LiveTracker",setup(e){const t=UN({updateIntervalMs:1e3}),n=tt(null),i=tt([]),r=tt(!1),a=tt(!1),l=tt("Never"),h={"North South Line":"5:30 AM","East West Line":"5:31 AM","Circle Line":"5:32 AM","North East Line":"5:42 AM","Downtown Line":"5:33 AM","Thomson-East Coast Line":"5:30 AM"},s={"East-West Line":"EWL","North-South Line":"NSL","Circle Line":"CCL","Downtown Line":"DTL","North-East Line":"NEL","Thomson-East Coast Line":"TEL","Bukit Panjang LRT":"BPL","Sengkang LRT":"SLRT","Punggol LRT":"PLRT","Circle Line Extension":"CEL","Changi Extension":"CGL"},p=Object.keys(ob),_=tt(p[0]),x=tt(ob[_.value][0]),T=tt([]),{addFavorite:k}=m0(),P=fe(()=>ob[_.value]||[]),M=fe(()=>{const Y=T.value.find(Z=>Z.name===x.value);return Y?Y.times:[]}),R=fe(()=>Tf(x.value)),F=fe(()=>{const Y=M.value[0]??1/0;return Y<=60?"Arriving":Y<=240?"On Time":Y<=420?"Slight delay":"Delayed"}),B=fe(()=>{switch(F.value){case"Arriving":return"status-arriving";case"On Time":return"status-on-time";case"Slight delay":return"status-departing";default:return"status-delayed"}}),H=fe(()=>{switch(F.value){case"Arriving":return"directions_subway";case"On Time":return"check_circle";case"Slight delay":return"schedule";default:return"error"}});function G(Y){return Y<=0?"Arriving":Y<60?"<1 min":`${Math.ceil(Y/60)} min`}function ee(Y){return{l:"Low",m:"Moderate",h:"High"}[Y]||"Unknown"}function ie(Y){return{l:"crowd-low",m:"crowd-moderate",h:"crowd-high"}[Y]||""}function J(Y,Z){const ge=d6[Y];if(ge)return ge[Z]}async function $(Y){try{const Z=IV+encodeURIComponent(`https://datamall2.mytransport.sg/ltaodataservice/PCDRealTime?TrainLine=${Y}`),ge=await fetch(Z,{method:"GET",headers:{AccountKey:Ak,accept:"application/json"}});if(!ge.ok)return null;const be=await ge.json();return!be.value||!Array.isArray(be.value)?null:be.value.map(Be=>({stationCode:Be.Station,crowdLevel:Be.CrowdLevel}))}catch(Z){return console.error("Error fetching crowd data:",Z),null}}async function W(){try{const Y=await fetch(IV+encodeURIComponent(Jte),{method:"GET",headers:{AccountKey:Ak,Accept:"application/json"}});if(!Y.ok){console.warn(`Service Alerts API returned ${Y.status} ${Y.statusText}`),a.value=!0,i.value.length===0&&(i.value=[{AffectedSegments:"DataMall Service",Message:"Unable to fetch live alerts (API temporary error)",Status:"Unavailable"}]);return}const Z=await Y.json();Z?.value&&Array.isArray(Z.value)?i.value=Z.value.filter(ge=>ge.Status!=="Normal"&&ge.Status!=="Cleared"):i.value=[],a.value=!1,l.value=new Date().toLocaleTimeString()}catch(Y){console.error("Error fetching service alerts:",Y),a.value=!0,i.value.length===0&&(i.value=[{AffectedSegments:"Train Network",Message:"Unable to retrieve live alerts (network issue)",Status:"Error"}])}}async function X(){r.value=!0;const Y=t.getArrivals({returnSeconds:!0})[_.value]||{},Z=s[x.value];let ge=null;Z&&(ge=await $(Z));let be="NA";const Be=J(_.value,x.value);if(console.log("Selected Station:",_.value),console.log("Mapped Station Code:",Be),console.log("Real Crowd Data:",ge),ge&&ge.length){ge.forEach(We=>{console.log("Crowd data stationCode:",We.stationCode,"crowdLevel:",We.crowdLevel)});const nt=ge.find(We=>We.stationCode===Be);console.log("Matched station data:",nt),nt?be=nt.crowdLevel:console.warn("No matching station found in realCrowdData for",Be)}T.value=Object.entries(Y).filter(([nt])=>nt===x.value).map(([nt,We])=>({name:nt,times:We,progress:We.length?Math.max(0,1-Math.min(We[0],600)/600):0,firstTrainTime:h[nt]||"5:30 AM",crowdLevel:be})),await W(),r.value=!1}function re(){k({station:_.value,label:`${_.value}  ${x.value}`})}return qt(_,()=>{const Y=P.value;Y.length&&!Y.includes(x.value)&&(x.value=Y[0]),X()}),qt(x,X),Kr(()=>{t.start(),X(),n.value=setInterval(X,3e4)}),Nr(()=>{t.stop(),n.value&&clearInterval(n.value)}),(Y,Z)=>(nn(),mn("section",Cte,[z("div",{class:"d-flex flex-wrap justify-content-between align-items-center gap-3 mb-4"},[Z[4]||(Z[4]=z("div",null,[z("h2",{class:"section-title mb-1"},"Live Train Tracker"),z("p",{class:"text-muted mb-0"}," Real-time train service alerts and simulated arrivals. Switch stations to monitor your regular journeys. ")],-1)),z("div",{class:"d-flex gap-2"},[z("button",{class:"btn btn-outline-danger hover-float",onClick:X},[...Z[2]||(Z[2]=[z("span",{class:"material-icons me-1"},"refresh",-1),Fn(" Refresh ",-1)])]),z("button",{class:"btn btn-primary hover-float",onClick:re},[...Z[3]||(Z[3]=[z("span",{class:"material-icons me-1"},"star",-1),Fn(" Add Favourite ",-1)])])])]),z("div",kte,[z("div",Ite,[Z[5]||(Z[5]=z("label",{class:"form-label"},"Station",-1)),Ii(z("select",{"onUpdate:modelValue":Z[0]||(Z[0]=ge=>_.value=ge),class:"form-select"},[(nn(!0),mn(un,null,Ws(xi(p),ge=>(nn(),mn("option",{key:ge,value:ge},sn(ge),9,Ate))),128))],512),[[$v,_.value]])]),z("div",Pte,[Z[6]||(Z[6]=z("label",{class:"form-label"},"Line",-1)),Ii(z("select",{"onUpdate:modelValue":Z[1]||(Z[1]=ge=>x.value=ge),class:"form-select"},[(nn(!0),mn(un,null,Ws(P.value,ge=>(nn(),mn("option",{key:ge,value:ge},sn(ge),9,Mte))),128))],512),[[$v,x.value]])])]),i.value.length>0?(nn(),mn("div",Dte,[Z[7]||(Z[7]=z("h5",{class:"mb-3 d-flex align-items-center gap-2"},[z("span",{class:"material-icons text-warning"},"warning"),Fn(" Service Alerts ")],-1)),(nn(!0),mn(un,null,Ws(i.value,(ge,be)=>(nn(),mn("div",{key:be,class:"alert alert-warning mb-2"},[z("div",Lte,[z("div",null,[z("strong",null,sn(ge.AffectedSegments),1),z("p",Rte,sn(ge.Message),1)]),z("span",Ote,sn(ge.Status),1)])]))),128))])):tr("",!0),z("div",Vte,[z("div",{class:"live-ticker-card w-100",style:Yt({borderColor:R.value})},[z("div",null,[Z[9]||(Z[9]=z("div",{class:"ticker-label"},"Monitoring",-1)),z("div",Bte,[Z[8]||(Z[8]=z("span",{class:"material-icons text-danger"},"location_on",-1)),z("span",null,sn(_.value),1)]),z("div",Fte,[z("span",{class:"material-icons",style:Yt({color:R.value})},"timeline",4),Fn(" "+sn(x.value),1)])]),z("div",null,[Z[10]||(Z[10]=z("div",{class:"small text-muted text-uppercase fw-semibold mb-1"},"Status",-1)),z("span",{class:xt(["status-pill",B.value])},[z("span",zte,sn(H.value),1),Fn(" "+sn(F.value),1)],2)]),z("div",Nte,[(nn(!0),mn(un,null,Ws(M.value,(ge,be)=>(nn(),mn("span",{key:be,class:"ticker-pill",style:Yt({borderColor:R.value,color:R.value})},[Z[11]||(Z[11]=z("span",{class:"material-icons"},"train",-1)),Fn(" "+sn(G(ge)),1)],4))),128)),M.value.length?tr("",!0):(nn(),mn("span",Ute,"Awaiting updates"))])],4)]),z("div",$te,[z("h5",jte,[Fn(" First Train & Crowd Level at "+sn(_.value)+" ",1),r.value?(nn(),mn("span",Wte,[...Z[12]||(Z[12]=[z("span",{class:"visually-hidden"},"Loading...",-1)])])):tr("",!0)]),(nn(!0),mn(un,null,Ws(T.value,ge=>(nn(),mn("div",{key:ge.name,class:"arrival-row"},[z("div",{class:"train-icon",style:Yt({color:xi(Tf)(ge.name)})},[...Z[13]||(Z[13]=[z("span",{class:"material-icons"},"subway",-1)])],4),z("div",Hte,[z("div",Gte,[z("strong",null,sn(ge.name),1)]),z("div",qte,[z("div",Kte,[Z[14]||(Z[14]=z("span",{class:"material-icons",style:{"font-size":"18px"}},"schedule",-1)),Z[15]||(Z[15]=z("span",{class:"small text-muted"},"First Train:",-1)),z("strong",null,sn(ge.firstTrainTime),1)]),z("div",Xte,[Z[16]||(Z[16]=z("span",{class:"material-icons",style:{"font-size":"18px"}},"people",-1)),Z[17]||(Z[17]=z("span",{class:"small text-muted"},"Crowd:",-1)),z("span",{class:xt(["crowd-badge",ie(ge.crowdLevel)])},sn(ee(ge.crowdLevel)),3)])])])]))),128))]),z("div",Yte,[z("small",Zte," Last updated: "+sn(l.value),1)])]))}};var Dw={exports:{}},ene=Dw.exports,AV;function tne(){return AV||(AV=1,(function(e,t){var n={};(function(i,r){e.exports=r()})(ene,(function(){var i,r,a;function l(s,p){if(!i)i=p;else if(!r)r=p;else{var _="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+i+")(sharedChunk); ("+r+")(sharedChunk); self.onerror = null;",x={};i(x),a=p(x),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(a.workerUrl=window.URL.createObjectURL(new Blob([_],{type:"text/javascript"})))}}l(["exports"],(function(s){var p=typeof self<"u"?self:{},_="2.15.0";let x;const T={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(x==null){const c=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{x=n.API_URL_REGEX!=null?new RegExp(n.API_URL_REGEX):c}catch{x=c}}return x},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!T.API_URL)return null;try{const c=new URL(T.API_URL);return c.hostname==="api.mapbox.cn"?"https://events.mapbox.cn/events/v2":c.hostname==="api.mapbox.com"?"https://events.mapbox.com/events/v2":null}catch{return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},k={supported:!1,testSupport:function(c){!R&&M&&(F?B(c):P=c)}};let P,M,R=!1,F=!1;function B(c){const o=c.createTexture();c.bindTexture(c.TEXTURE_2D,o);try{if(c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,M),c.isContextLost())return;k.supported=!0}catch{}c.deleteTexture(o),R=!0}p.document&&(M=p.document.createElement("img"),M.onload=function(){P&&B(P),P=null,F=!0},M.onerror=function(){R=!0,P=null},M.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const H="01";function G(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var ee=ie;function ie(c,o,d,f){this.cx=3*c,this.bx=3*(d-c)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*o,this.by=3*(f-o)-this.cy,this.ay=1-this.cy-this.by,this.p1x=c,this.p1y=o,this.p2x=d,this.p2y=f}ie.prototype={sampleCurveX:function(c){return((this.ax*c+this.bx)*c+this.cx)*c},sampleCurveY:function(c){return((this.ay*c+this.by)*c+this.cy)*c},sampleCurveDerivativeX:function(c){return(3*this.ax*c+2*this.bx)*c+this.cx},solveCurveX:function(c,o){if(o===void 0&&(o=1e-6),c<0)return 0;if(c>1)return 1;for(var d=c,f=0;f<8;f++){var g=this.sampleCurveX(d)-c;if(Math.abs(g)<o)return d;var b=this.sampleCurveDerivativeX(d);if(Math.abs(b)<1e-6)break;d-=g/b}var w=0,E=1;for(d=c,f=0;f<20&&(g=this.sampleCurveX(d),!(Math.abs(g-c)<o));f++)c>g?w=d:E=d,d=.5*(E-w)+w;return d},solve:function(c,o){return this.sampleCurveY(this.solveCurveX(c,o))}};var J=G(ee),$=W;function W(c,o){this.x=c,this.y=o}W.prototype={clone:function(){return new W(this.x,this.y)},add:function(c){return this.clone()._add(c)},sub:function(c){return this.clone()._sub(c)},multByPoint:function(c){return this.clone()._multByPoint(c)},divByPoint:function(c){return this.clone()._divByPoint(c)},mult:function(c){return this.clone()._mult(c)},div:function(c){return this.clone()._div(c)},rotate:function(c){return this.clone()._rotate(c)},rotateAround:function(c,o){return this.clone()._rotateAround(c,o)},matMult:function(c){return this.clone()._matMult(c)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(c){return this.x===c.x&&this.y===c.y},dist:function(c){return Math.sqrt(this.distSqr(c))},distSqr:function(c){var o=c.x-this.x,d=c.y-this.y;return o*o+d*d},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(c){return Math.atan2(this.y-c.y,this.x-c.x)},angleWith:function(c){return this.angleWithSep(c.x,c.y)},angleWithSep:function(c,o){return Math.atan2(this.x*o-this.y*c,this.x*c+this.y*o)},_matMult:function(c){var o=c[2]*this.x+c[3]*this.y;return this.x=c[0]*this.x+c[1]*this.y,this.y=o,this},_add:function(c){return this.x+=c.x,this.y+=c.y,this},_sub:function(c){return this.x-=c.x,this.y-=c.y,this},_mult:function(c){return this.x*=c,this.y*=c,this},_div:function(c){return this.x/=c,this.y/=c,this},_multByPoint:function(c){return this.x*=c.x,this.y*=c.y,this},_divByPoint:function(c){return this.x/=c.x,this.y/=c.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var c=this.y;return this.y=this.x,this.x=-c,this},_rotate:function(c){var o=Math.cos(c),d=Math.sin(c),f=d*this.x+o*this.y;return this.x=o*this.x-d*this.y,this.y=f,this},_rotateAround:function(c,o){var d=Math.cos(c),f=Math.sin(c),g=o.y+f*(this.x-o.x)+d*(this.y-o.y);return this.x=o.x+d*(this.x-o.x)-f*(this.y-o.y),this.y=g,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},W.convert=function(c){return c instanceof W?c:Array.isArray(c)?new W(c[0],c[1]):c};var X=G($);const re=Math.PI/180,Y=180/Math.PI;function Z(c){return c*re}function ge(c){return c*Y}const be=[[0,0],[1,0],[1,1],[0,1]];function Be(c){if(c<=0)return 0;if(c>=1)return 1;const o=c*c,d=o*c;return 4*(c<.5?d:3*(c-o)+d-.75)}function nt(c,o,d,f){const g=new J(c,o,d,f);return function(b){return g.solve(b)}}const We=nt(.25,.1,.25,1);function Le(c,o,d){return Math.min(d,Math.max(o,c))}function Ze(c,o,d){return(d=Le((d-c)/(o-c),0,1))*d*(3-2*d)}function Ee(c,o,d){const f=d-o,g=((c-o)%f+f)%f+o;return g===o?d:g}function Je(c,o,d){if(!c.length)return d(null,[]);let f=c.length;const g=new Array(c.length);let b=null;c.forEach(((w,E)=>{o(w,((I,D)=>{I&&(b=I),g[E]=D,--f==0&&d(b,g)}))}))}function it(c){const o=[];for(const d in c)o.push(c[d]);return o}function vt(c,...o){for(const d of o)for(const f in d)c[f]=d[f];return c}let mt=1;function ot(){return mt++}function Ye(){return(function c(o){return o?(o^Math.random()*(16>>o/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,c)})()}function ut(c){return c<=1?1:Math.pow(2,Math.ceil(Math.log(c)/Math.LN2))}function Ke(c){return!!c&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(c)}function jt(c,o){c.forEach((d=>{o[d]&&(o[d]=o[d].bind(o))}))}function xn(c,o){return c.indexOf(o,c.length-o.length)!==-1}function ke(c,o,d){const f={};for(const g in c)f[g]=o.call(this,c[g],g,c);return f}function Ae(c,o,d){const f={};for(const g in c)o.call(d||this,c[g],g,c)&&(f[g]=c[g]);return f}function he(c){return Array.isArray(c)?c.map(he):typeof c=="object"&&c?ke(c,he):c}const et={};function dt(c){et[c]||(typeof console<"u"&&console.warn(c),et[c]=!0)}function Qe(c,o,d){return(d.y-c.y)*(o.x-c.x)>(o.y-c.y)*(d.x-c.x)}function Ct(c){let o=0;for(let d,f,g=0,b=c.length,w=b-1;g<b;w=g++)d=c[g],f=c[w],o+=(f.x-d.x)*(d.y+f.y);return o}function Pt(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Bt(c){const o={};if(c.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((d,f,g,b)=>{const w=g||b;return o[f]=!w||w.toLowerCase(),""})),o["max-age"]){const d=parseInt(o["max-age"],10);isNaN(d)?delete o["max-age"]:o["max-age"]=d}return o}let Ht=null;function En(c){if(Ht==null){const o=c.navigator?c.navigator.userAgent:null;Ht=!!c.safari||!(!o||!(/\b(iPad|iPhone|iPod)\b/.test(o)||o.match("Safari")&&!o.match("Chrome")))}return Ht}function Jt(c){try{const o=p[c];return o.setItem("_mapbox_test_",1),o.removeItem("_mapbox_test_"),!0}catch{return!1}}function Mn(c,o){return[c[4*o],c[4*o+1],c[4*o+2],c[4*o+3]]}const Ln="mapbox-tiles";let Ut=500,rn=50,fn,Bn;function ki(){try{return p.caches}catch{}}function qi(){ki()&&!fn&&(fn=p.caches.open(Ln))}function fr(c){const o=c.indexOf("?");if(o<0)return c;const d=(function(g){const b=g.indexOf("?");return b>0?g.slice(b+1).split("&"):[]})(c),f=d.filter((g=>{const b=g.split("=");return b[0]==="language"||b[0]==="worldview"}));return f.length?`${c.slice(0,o)}?${f.join("&")}`:c.slice(0,o)}let ns=1/0;const wo={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(wo);class ir extends Error{constructor(o,d,f){d===401&&_t(f)&&(o+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(o),this.status=d,this.url=f}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const xr=Pt()?()=>self.worker&&self.worker.referrer:()=>(p.location.protocol==="blob:"?p.parent:p).location.href,$o=function(c,o){if(!(/^file:/.test(d=c.url)||/^file:/.test(xr())&&!/^\w+:/.test(d))){if(p.fetch&&p.Request&&p.AbortController&&p.Request.prototype.hasOwnProperty("signal"))return(function(f,g){const b=new p.AbortController,w=new p.Request(f.url,{method:f.method||"GET",body:f.body,credentials:f.credentials,headers:f.headers,referrer:xr(),referrerPolicy:f.referrerPolicy,signal:b.signal});let E=!1,I=!1;const D=(N=w.url).indexOf("sku=")>0&&_t(N);var N;f.type==="json"&&w.headers.set("Accept","application/json");const j=(ne,ae,de)=>{if(I)return;if(ne&&ne.message!=="SecurityError"&&dt(ne.toString()),ae&&de)return Q(ae);const Te=Date.now();p.fetch(w).then((Re=>{if(Re.ok){const $e=D?Re.clone():null;return Q(Re,$e,Te)}return g(new ir(Re.statusText,Re.status,f.url))})).catch((Re=>{Re.name!=="AbortError"&&g(new Error(`${Re.message} ${f.url}`))}))},Q=(ne,ae,de)=>{(f.type==="arrayBuffer"?ne.arrayBuffer():f.type==="json"?ne.json():ne.text()).then((Te=>{I||(ae&&de&&(function(Re,$e,Oe){if(qi(),!fn)return;const ze={status:$e.status,statusText:$e.statusText,headers:new p.Headers};$e.headers.forEach(((wt,yt)=>ze.headers.set(yt,wt)));const Xe=Bt($e.headers.get("Cache-Control")||"");if(Xe["no-store"])return;Xe["max-age"]&&ze.headers.set("Expires",new Date(Oe+1e3*Xe["max-age"]).toUTCString());const qe=ze.headers.get("Expires");qe&&(new Date(qe).getTime()-Oe<42e4||(function(wt,yt){if(Bn===void 0)try{new Response(new ReadableStream),Bn=!0}catch{Bn=!1}Bn?yt(wt.body):wt.blob().then(yt)})($e,(wt=>{const yt=new p.Response(wt,ze);qi(),fn&&fn.then((Ot=>Ot.put(fr(Re.url),yt))).catch((Ot=>dt(Ot.message)))})))})(w,ae,de),E=!0,g(null,Te,ne.headers.get("Cache-Control"),ne.headers.get("Expires")))})).catch((Te=>{I||g(new Error(Te.message))}))};return D?(function(ne,ae){if(qi(),!fn)return ae(null);const de=fr(ne.url);fn.then((Te=>{Te.match(de).then((Re=>{const $e=(function(Oe){if(!Oe)return!1;const ze=new Date(Oe.headers.get("Expires")||0),Xe=Bt(Oe.headers.get("Cache-Control")||"");return ze>Date.now()&&!Xe["no-cache"]})(Re);Te.delete(de),$e&&Te.put(de,Re.clone()),ae(null,Re,$e)})).catch(ae)})).catch(ae)})(w,j):j(null,null),{cancel:()=>{I=!0,E||b.abort()}}})(c,o);if(Pt()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",c,o,void 0,!0)}var d;return(function(f,g){const b=new p.XMLHttpRequest;b.open(f.method||"GET",f.url,!0),f.type==="arrayBuffer"&&(b.responseType="arraybuffer");for(const w in f.headers)b.setRequestHeader(w,f.headers[w]);return f.type==="json"&&(b.responseType="text",b.setRequestHeader("Accept","application/json")),b.withCredentials=f.credentials==="include",b.onerror=()=>{g(new Error(b.statusText))},b.onload=()=>{if((b.status>=200&&b.status<300||b.status===0)&&b.response!==null){let w=b.response;if(f.type==="json")try{w=JSON.parse(b.response)}catch(E){return g(E)}g(null,w,b.getResponseHeader("Cache-Control"),b.getResponseHeader("Expires"))}else g(new ir(b.statusText,b.status,f.url))},b.send(f.body),{cancel:()=>b.abort()}})(c,o)},To=function(c,o){return $o(vt(c,{type:"arrayBuffer"}),o)};function Uc(c){const o=p.document.createElement("a");return o.href=c,o.protocol===p.document.location.protocol&&o.host===p.document.location.host}const Fe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let pe,_e;pe=[],_e=0;const Ve=function(c,o){if(k.supported&&(c.headers||(c.headers={}),c.headers.accept="image/webp,*/*"),_e>=T.MAX_PARALLEL_IMAGE_REQUESTS){const b={requestParameters:c,callback:o,cancelled:!1,cancel(){this.cancelled=!0}};return pe.push(b),b}_e++;let d=!1;const f=()=>{if(!d)for(d=!0,_e--;pe.length&&_e<T.MAX_PARALLEL_IMAGE_REQUESTS;){const b=pe.shift(),{requestParameters:w,callback:E,cancelled:I}=b;I||(b.cancel=Ve(w,E).cancel)}},g=To(c,((b,w,E,I)=>{f(),b?o(b):w&&(p.createImageBitmap?(function(D,N){const j=new p.Blob([new Uint8Array(D)],{type:"image/png"});p.createImageBitmap(j).then((Q=>{N(null,Q)})).catch((Q=>{N(new Error(`Could not load image because of ${Q.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))}))})(w,((D,N)=>o(D,N,E,I))):(function(D,N){const j=new p.Image,Q=p.URL;j.onload=()=>{N(null,j),Q.revokeObjectURL(j.src),j.onload=null,p.requestAnimationFrame((()=>{j.src=Fe}))},j.onerror=()=>N(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const ne=new p.Blob([new Uint8Array(D)],{type:"image/png"});j.src=D.byteLength?Q.createObjectURL(ne):Fe})(w,((D,N)=>o(D,N,E,I))))}));return{cancel:()=>{g.cancel(),f()}}},He="NO_ACCESS_TOKEN";function st(c){return c.indexOf("mapbox:")===0}function _t(c){return T.API_URL_REGEX.test(c)}function pt(c){return T.API_CDN_URL_REGEX.test(c)}function rt(c){return T.API_STYLE_REGEX.test(c)&&!Et(c)}function Et(c){return T.API_SPRITE_REGEX.test(c)}const Qt=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function cn(c){const o=c.match(Qt);if(!o)throw new Error("Unable to parse URL object");return{protocol:o[1],authority:o[2],path:o[3]||"/",params:o[4]?o[4].split("&"):[]}}function en(c){const o=c.params.length?`?${c.params.join("&")}`:"";return`${c.protocol}://${c.authority}${c.path}${o}`}const Kn="mapbox.eventData";function Jn(c){if(!c)return null;const o=c.split(".");if(!o||o.length!==3)return null;try{return JSON.parse(decodeURIComponent(p.atob(o[1]).split("").map((d=>"%"+("00"+d.charCodeAt(0).toString(16)).slice(-2))).join("")))}catch{return null}}class jn{constructor(o){this.type=o,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(o){const d=Jn(T.ACCESS_TOKEN);let f="";return f=d&&d.u?p.btoa(encodeURIComponent(d.u).replace(/%([0-9A-F]{2})/g,((g,b)=>String.fromCharCode(+("0x"+b))))):T.ACCESS_TOKEN||"",o?`${Kn}.${o}:${f}`:`${Kn}:${f}`}fetchEventData(){const o=Jt("localStorage"),d=this.getStorageKey(),f=this.getStorageKey("uuid");if(o)try{const g=p.localStorage.getItem(d);g&&(this.eventData=JSON.parse(g));const b=p.localStorage.getItem(f);b&&(this.anonId=b)}catch{dt("Unable to read from LocalStorage")}}saveEventData(){const o=Jt("localStorage"),d=this.getStorageKey(),f=this.getStorageKey("uuid");if(o)try{p.localStorage.setItem(f,this.anonId),Object.keys(this.eventData).length>=1&&p.localStorage.setItem(d,JSON.stringify(this.eventData))}catch{dt("Unable to write to LocalStorage")}}processRequests(o){}postEvent(o,d,f,g){if(!T.EVENTS_URL)return;const b=cn(T.EVENTS_URL);b.params.push(`access_token=${g||T.ACCESS_TOKEN||""}`);const w={event:this.type,created:new Date(o).toISOString()},E=d?vt(w,d):w,I={url:en(b),headers:{"Content-Type":"text/plain"},body:JSON.stringify([E])};this.pendingRequest=(function(D,N){return $o(vt(D,{method:"POST"}),N)})(I,(D=>{this.pendingRequest=null,f(D),this.saveEventData(),this.processRequests(g)}))}queueRequest(o,d){this.queue.push(o),this.processRequests(d)}}const oi=new class extends jn{constructor(c){super("appUserTurnstile"),this._customAccessToken=c}postTurnstileEvent(c,o){T.EVENTS_URL&&T.ACCESS_TOKEN&&Array.isArray(c)&&c.some((d=>st(d)||_t(d)))&&this.queueRequest(Date.now(),o)}processRequests(c){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const o=Jn(T.ACCESS_TOKEN),d=o?o.u:T.ACCESS_TOKEN;let f=d!==this.eventData.tokenU;Ke(this.anonId)||(this.anonId=Ye(),f=!0);const g=this.queue.shift();if(this.eventData.lastSuccess){const b=new Date(this.eventData.lastSuccess),w=new Date(g),E=(g-this.eventData.lastSuccess)/864e5;f=f||E>=1||E<-1||b.getDate()!==w.getDate()}else f=!0;f?this.postEvent(g,{sdkIdentifier:"mapbox-gl-js",sdkVersion:_,skuId:H,"enabled.telemetry":!1,userId:this.anonId},(b=>{b||(this.eventData.lastSuccess=g,this.eventData.tokenU=d)}),c):this.processRequests()}},Xn=oi.postTurnstileEvent.bind(oi),Mi=new class extends jn{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(c,o,d,f){this.skuToken=o,this.errorCb=f,T.EVENTS_URL&&(d||T.ACCESS_TOKEN?this.queueRequest({id:c,timestamp:Date.now()},d):this.errorCb(new Error(He)))}processRequests(c){if(this.pendingRequest||this.queue.length===0)return;const{id:o,timestamp:d}=this.queue.shift();o&&this.success[o]||(this.anonId||this.fetchEventData(),Ke(this.anonId)||(this.anonId=Ye()),this.postEvent(d,{sdkIdentifier:"mapbox-gl-js",sdkVersion:_,skuId:H,skuToken:this.skuToken,userId:this.anonId},(f=>{f?this.errorCb(f):o&&(this.success[o]=!0)}),c))}},mr=Mi.postMapLoadEvent.bind(Mi),is=new class extends jn{constructor(){super("gljs.performance")}postPerformanceEvent(c,o){T.EVENTS_URL&&(c||T.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:o},c)}processRequests(c){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:o,performanceData:d}=this.queue.shift(),f=(function(g){const b=p.performance.getEntriesByType("resource"),w=p.performance.getEntriesByType("mark"),E=(function(Q){const ne={};if(Q){for(const ae in Q)if(ae!=="other")for(const de of Q[ae]){const Te=`${ae}ResolveRangeMin`,Re=`${ae}ResolveRangeMax`,$e=`${ae}RequestCount`,Oe=`${ae}RequestCachedCount`;ne[Te]=Math.min(ne[Te]||1/0,de.startTime),ne[Re]=Math.max(ne[Re]||-1/0,de.responseEnd);const ze=Xe=>{ne[Xe]===void 0&&(ne[Xe]=0),++ne[Xe]};de.transferSize!==void 0&&de.transferSize===0&&ze(Oe),ze($e)}}return ne})((function(Q,ne){const ae={};if(Q)for(const de of Q){const Te=ne(de);ae[Te]===void 0&&(ae[Te]=[]),ae[Te].push(de)}return ae})(b,Bs)),I=p.devicePixelRatio,D=p.navigator.connection||p.navigator.mozConnection||p.navigator.webkitConnection,N={counters:[],metadata:[],attributes:[]},j=(Q,ne,ae)=>{ae!=null&&Q.push({name:ne,value:ae.toString()})};for(const Q in E)j(N.counters,Q,E[Q]);if(g.interactionRange[0]!==1/0&&g.interactionRange[1]!==-1/0&&(j(N.counters,"interactionRangeMin",g.interactionRange[0]),j(N.counters,"interactionRangeMax",g.interactionRange[1])),w)for(const Q of Object.keys(jr)){const ne=jr[Q],ae=w.find((de=>de.name===ne));ae&&j(N.counters,ne,ae.startTime)}return j(N.counters,"visibilityHidden",g.visibilityHidden),j(N.attributes,"style",(function(Q){if(Q)for(const ne of Q){const ae=ne.name.split("?")[0];if(rt(ae)){const de=ae.split("/").slice(-2);if(de.length===2)return`mapbox://styles/${de[0]}/${de[1]}`}}})(b)),j(N.attributes,"terrainEnabled",g.terrainEnabled?"true":"false"),j(N.attributes,"fogEnabled",g.fogEnabled?"true":"false"),j(N.attributes,"projection",g.projection),j(N.attributes,"zoom",g.zoom),j(N.metadata,"devicePixelRatio",I),j(N.metadata,"connectionEffectiveType",D?D.effectiveType:void 0),j(N.metadata,"navigatorUserAgent",p.navigator.userAgent),j(N.metadata,"screenWidth",p.screen.width),j(N.metadata,"screenHeight",p.screen.height),j(N.metadata,"windowWidth",p.innerWidth),j(N.metadata,"windowHeight",p.innerHeight),j(N.metadata,"mapWidth",g.width/I),j(N.metadata,"mapHeight",g.height/I),j(N.metadata,"webglRenderer",g.renderer),j(N.metadata,"webglVendor",g.vendor),j(N.metadata,"sdkVersion",_),j(N.metadata,"sdkIdentifier","mapbox-gl-js"),N})(d);for(const g of f.metadata);for(const g of f.counters);for(const g of f.attributes);this.postEvent(o,f,(()=>{}),c)}},wr=is.postPerformanceEvent.bind(is),jo=new class extends jn{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(c,o,d,f){if(!T.API_URL||!T.SESSION_PATH)return;const g=cn(T.API_URL+T.SESSION_PATH);g.params.push(`sku=${o||""}`),g.params.push(`access_token=${f||T.ACCESS_TOKEN||""}`);const b={url:en(g),headers:{"Content-Type":"text/plain"}};this.pendingRequest=(function(w,E){return $o(vt(w,{method:"GET"}),E)})(b,(w=>{this.pendingRequest=null,d(w),this.saveEventData(),this.processRequests(f)}))}getSessionAPI(c,o,d,f){this.skuToken=o,this.errorCb=f,T.SESSION_PATH&&T.API_URL&&(d||T.ACCESS_TOKEN?this.queueRequest({id:c,timestamp:Date.now()},d):this.errorCb(new Error(He)))}processRequests(c){if(this.pendingRequest||this.queue.length===0)return;const{id:o,timestamp:d}=this.queue.shift();o&&this.success[o]||this.getSession(d,this.skuToken,(f=>{f?this.errorCb(f):o&&(this.success[o]=!0)}),c)}},rs=jo.getSessionAPI.bind(jo),Lr=new Set,jr={create:"create",load:"load",fullLoad:"fullLoad"},Ts={mark(c){p.performance.mark(c)},measure(c,o,d){p.performance.measure(c,o,d)}};function Bs(c){const o=c.name.split("?")[0];return pt(o)&&o.includes("mapbox-gl.js")?"javascript":pt(o)&&o.includes("mapbox-gl.css")?"css":(function(d){return T.API_FONTS_REGEX.test(d)})(o)?"fontRange":Et(o)?"sprite":rt(o)?"style":(function(d){return T.API_TILEJSON_REGEX.test(d)})(o)?"tilejson":"other"}const qn=p.performance;function da(c){const o=c?c.url.toString():void 0;return qn.getEntriesByName(o)}let Ss,Wo,qa,So;const Eo={now:()=>qa!==void 0?qa:p.performance.now(),setNow(c){qa=c},restoreNow(){qa=void 0},frame(c){const o=p.requestAnimationFrame(c);return{cancel:()=>p.cancelAnimationFrame(o)}},getImageData(c,o=0){const{width:d,height:f}=c;So||(So=p.document.createElement("canvas"));const g=So.getContext("2d",{willReadFrequently:!0});if(!g)throw new Error("failed to create canvas 2d context");return(d>So.width||f>So.height)&&(So.width=d,So.height=f),g.clearRect(-o,-o,d+2*o,f+2*o),g.drawImage(c,0,0,d,f),g.getImageData(-o,-o,d+2*o,f+2*o)},resolveURL:c=>(Ss||(Ss=p.document.createElement("a")),Ss.href=c,Ss.href),get devicePixelRatio(){return p.devicePixelRatio},get prefersReducedMotion(){return!!p.matchMedia&&(Wo==null&&(Wo=p.matchMedia("(prefers-reduced-motion: reduce)")),Wo.matches)}};function Ka(c,o,d){d[c]&&d[c].indexOf(o)!==-1||(d[c]=d[c]||[],d[c].push(o))}function hc(c,o,d){if(d&&d[c]){const f=d[c].indexOf(o);f!==-1&&d[c].splice(f,1)}}class Ho{constructor(o,d={}){vt(this,d),this.type=o}}class Co extends Ho{constructor(o,d={}){super("error",vt({error:o},d))}}class Fl{on(o,d){return this._listeners=this._listeners||{},Ka(o,d,this._listeners),this}off(o,d){return hc(o,d,this._listeners),hc(o,d,this._oneTimeListeners),this}once(o,d){return d?(this._oneTimeListeners=this._oneTimeListeners||{},Ka(o,d,this._oneTimeListeners),this):new Promise((f=>this.once(o,f)))}fire(o,d){typeof o=="string"&&(o=new Ho(o,d||{}));const f=o.type;if(this.listens(f)){o.target=this;const g=this._listeners&&this._listeners[f]?this._listeners[f].slice():[];for(const E of g)E.call(this,o);const b=this._oneTimeListeners&&this._oneTimeListeners[f]?this._oneTimeListeners[f].slice():[];for(const E of b)hc(f,E,this._oneTimeListeners),E.call(this,o);const w=this._eventedParent;w&&(vt(o,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),w.fire(o))}else o instanceof Co&&console.error(o.error);return this}listens(o){return!!(this._listeners&&this._listeners[o]&&this._listeners[o].length>0||this._oneTimeListeners&&this._oneTimeListeners[o]&&this._oneTimeListeners[o].length>0||this._eventedParent&&this._eventedParent.listens(o))}setEventedParent(o,d){return this._eventedParent=o,this._eventedParentData=d,this}}var Dt=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["fill-extrusion-edge-radius"]},"fill-extrusion-rounded-roof":{"type":"boolean","default":true,"requires":["fill-extrusion-edge-radius"],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":false,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function ha(c,...o){for(const d of o)for(const f in d)c[f]=d[f];return c}function zi(c){return c instanceof Number||c instanceof String||c instanceof Boolean?c.valueOf():c}function Ki(c){if(Array.isArray(c))return c.map(Ki);if(c instanceof Object&&!(c instanceof Number||c instanceof String||c instanceof Boolean)){const o={};for(const d in c)o[d]=Ki(c[d]);return o}return zi(c)}class zl extends Error{constructor(o,d){super(d),this.message=d,this.key=o}}var Fs=zl;class fc{constructor(o,d=[]){this.parent=o,this.bindings={};for(const[f,g]of d)this.bindings[f]=g}concat(o){return new fc(this,o)}get(o){if(this.bindings[o])return this.bindings[o];if(this.parent)return this.parent.get(o);throw new Error(`${o} not found in scope.`)}has(o){return!!this.bindings[o]||!!this.parent&&this.parent.has(o)}}var Ji=fc;const fa={kind:"null"},dn={kind:"number"},Nn={kind:"string"},Yn={kind:"boolean"},pr={kind:"color"},oo={kind:"object"},ni={kind:"value"},Pr={kind:"collator"},Go={kind:"formatted"},Ks={kind:"resolvedImage"};function kr(c,o){return{kind:"array",itemType:c,N:o}}function Ni(c){if(c.kind==="array"){const o=Ni(c.itemType);return typeof c.N=="number"?`array<${o}, ${c.N}>`:c.itemType.kind==="value"?"array":`array<${o}>`}return c.kind}const yu=[fa,dn,Nn,Yn,pr,Go,oo,kr(ni),Ks];function zs(c,o){if(o.kind==="error")return null;if(c.kind==="array"){if(o.kind==="array"&&(o.N===0&&o.itemType.kind==="value"||!zs(c.itemType,o.itemType))&&(typeof c.N!="number"||c.N===o.N))return null}else{if(c.kind===o.kind)return null;if(c.kind==="value"){for(const d of yu)if(!zs(d,o))return null}}return`Expected ${Ni(c)} but found ${Ni(o)} instead.`}function ul(c,o){return o.some((d=>d.kind===c.kind))}function Nl(c,o){return o.some((d=>d==="null"?c===null:d==="array"?Array.isArray(c):d==="object"?c&&!Array.isArray(c)&&typeof c=="object":d===typeof c))}var Es,Oh={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function ko(c){return(c=Math.round(c))<0?0:c>255?255:c}function dl(c){return ko(c[c.length-1]==="%"?parseFloat(c)/100*255:parseInt(c))}function Io(c){return(o=c[c.length-1]==="%"?parseFloat(c)/100:parseFloat(c))<0?0:o>1?1:o;var o}function ma(c,o,d){return d<0?d+=1:d>1&&(d-=1),6*d<1?c+(o-c)*d*6:2*d<1?o:3*d<2?c+(o-c)*(2/3-d)*6:c}try{Es={}.parseCSSColor=function(c){var o,d=c.replace(/ /g,"").toLowerCase();if(d in Oh)return Oh[d].slice();if(d[0]==="#")return d.length===4?(o=parseInt(d.substr(1),16))>=0&&o<=4095?[(3840&o)>>4|(3840&o)>>8,240&o|(240&o)>>4,15&o|(15&o)<<4,1]:null:d.length===7&&(o=parseInt(d.substr(1),16))>=0&&o<=16777215?[(16711680&o)>>16,(65280&o)>>8,255&o,1]:null;var f=d.indexOf("("),g=d.indexOf(")");if(f!==-1&&g+1===d.length){var b=d.substr(0,f),w=d.substr(f+1,g-(f+1)).split(","),E=1;switch(b){case"rgba":if(w.length!==4)return null;E=Io(w.pop());case"rgb":return w.length!==3?null:[dl(w[0]),dl(w[1]),dl(w[2]),E];case"hsla":if(w.length!==4)return null;E=Io(w.pop());case"hsl":if(w.length!==3)return null;var I=(parseFloat(w[0])%360+360)%360/360,D=Io(w[1]),N=Io(w[2]),j=N<=.5?N*(D+1):N+D-N*D,Q=2*N-j;return[ko(255*ma(Q,j,I+1/3)),ko(255*ma(Q,j,I)),ko(255*ma(Q,j,I-1/3)),E];default:return null}}return null}}catch{}class ss{constructor(o,d,f,g=1){this.r=o,this.g=d,this.b=f,this.a=g}static parse(o){if(!o)return;if(o instanceof ss)return o;if(typeof o!="string")return;const d=Es(o);return d?new ss(d[0]/255*d[3],d[1]/255*d[3],d[2]/255*d[3],d[3]):void 0}toString(){const[o,d,f,g]=this.toArray();return`rgba(${Math.round(o)},${Math.round(d)},${Math.round(f)},${g})`}toArray(){const{r:o,g:d,b:f,a:g}=this;return g===0?[0,0,0,0]:[255*o/g,255*d/g,255*f/g,g]}toArray01(){const{r:o,g:d,b:f,a:g}=this;return g===0?[0,0,0,0]:[o/g,d/g,f/g,g]}toArray01PremultipliedAlpha(){const{r:o,g:d,b:f,a:g}=this;return[o,d,f,g]}}ss.black=new ss(0,0,0,1),ss.white=new ss(1,1,1,1),ss.transparent=new ss(0,0,0,0),ss.red=new ss(1,0,0,1),ss.blue=new ss(0,0,1,1);var Ui=ss;class $c{constructor(o,d,f){this.sensitivity=o?d?"variant":"case":d?"accent":"base",this.locale=f,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(o,d){return this.collator.compare(o,d)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class hl{constructor(o,d,f,g,b){this.text=o.normalize?o.normalize():o,this.image=d,this.scale=f,this.fontStack=g,this.textColor=b}}class Xr{constructor(o){this.sections=o}static fromString(o){return new Xr([new hl(o,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some((o=>o.text.length!==0||o.image&&o.image.name.length!==0))}static factory(o){return o instanceof Xr?o:Xr.fromString(o)}toString(){return this.sections.length===0?"":this.sections.map((o=>o.text)).join("")}serialize(){const o=["format"];for(const d of this.sections){if(d.image){o.push(["image",d.image.name]);continue}o.push(d.text);const f={};d.fontStack&&(f["text-font"]=["literal",d.fontStack.split(",")]),d.scale&&(f["font-scale"]=d.scale),d.textColor&&(f["text-color"]=["rgba"].concat(d.textColor.toArray())),o.push(f)}return o}}class os{constructor(o){this.name=o.name,this.available=o.available}toString(){return this.name}static fromString(o){return o?new os({name:o,available:!1}):null}serialize(){return["image",this.name]}}function bu(c,o,d,f){return typeof c=="number"&&c>=0&&c<=255&&typeof o=="number"&&o>=0&&o<=255&&typeof d=="number"&&d>=0&&d<=255?f===void 0||typeof f=="number"&&f>=0&&f<=1?null:`Invalid rgba value [${[c,o,d,f].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof f=="number"?[c,o,d,f]:[c,o,d]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Qi(c){if(c===null||typeof c=="string"||typeof c=="boolean"||typeof c=="number"||c instanceof Ui||c instanceof $c||c instanceof Xr||c instanceof os)return!0;if(Array.isArray(c)){for(const o of c)if(!Qi(o))return!1;return!0}if(typeof c=="object"){for(const o in c)if(!Qi(c[o]))return!1;return!0}return!1}function gr(c){if(c===null)return fa;if(typeof c=="string")return Nn;if(typeof c=="boolean")return Yn;if(typeof c=="number")return dn;if(c instanceof Ui)return pr;if(c instanceof $c)return Pr;if(c instanceof Xr)return Go;if(c instanceof os)return Ks;if(Array.isArray(c)){const o=c.length;let d;for(const f of c){const g=gr(f);if(d){if(d===g)continue;d=ni;break}d=g}return kr(d||ni,o)}return oo}function fl(c){const o=typeof c;return c===null?"":o==="string"||o==="number"||o==="boolean"?String(c):c instanceof Ui||c instanceof Xr||c instanceof os?c.toString():JSON.stringify(c)}class mc{constructor(o,d){this.type=o,this.value=d}static parse(o,d){if(o.length!==2)return d.error(`'literal' expression requires exactly one argument, but found ${o.length-1} instead.`);if(!Qi(o[1]))return d.error("invalid value");const f=o[1];let g=gr(f);const b=d.expectedType;return g.kind!=="array"||g.N!==0||!b||b.kind!=="array"||typeof b.N=="number"&&b.N!==0||(g=b),new mc(g,f)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Ui?["rgba"].concat(this.value.toArray()):this.value instanceof Xr?this.value.serialize():this.value}}var ml=mc,Rr=class{constructor(c){this.name="ExpressionEvaluationError",this.message=c}toJSON(){return this.message}};const pc={string:Nn,number:dn,boolean:Yn,object:oo};class qo{constructor(o,d){this.type=o,this.args=d}static parse(o,d){if(o.length<2)return d.error("Expected at least one argument.");let f,g=1;const b=o[0];if(b==="array"){let E,I;if(o.length>2){const D=o[1];if(typeof D!="string"||!(D in pc)||D==="object")return d.error('The item type argument of "array" must be one of string, number, boolean',1);E=pc[D],g++}else E=ni;if(o.length>3){if(o[2]!==null&&(typeof o[2]!="number"||o[2]<0||o[2]!==Math.floor(o[2])))return d.error('The length argument to "array" must be a positive integer literal',2);I=o[2],g++}f=kr(E,I)}else f=pc[b];const w=[];for(;g<o.length;g++){const E=d.parse(o[g],g,ni);if(!E)return null;w.push(E)}return new qo(f,w)}evaluate(o){for(let d=0;d<this.args.length;d++){const f=this.args[d].evaluate(o);if(!zs(this.type,gr(f)))return f;if(d===this.args.length-1)throw new Rr(`Expected value to be of type ${Ni(this.type)}, but found ${Ni(gr(f))} instead.`)}return null}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every((o=>o.outputDefined()))}serialize(){const o=this.type,d=[o.kind];if(o.kind==="array"){const f=o.itemType;if(f.kind==="string"||f.kind==="number"||f.kind==="boolean"){d.push(f.kind);const g=o.N;(typeof g=="number"||this.args.length>1)&&d.push(g)}}return d.concat(this.args.map((f=>f.serialize())))}}var Ao=qo;class pa{constructor(o){this.type=Go,this.sections=o}static parse(o,d){if(o.length<2)return d.error("Expected at least one argument.");const f=o[1];if(!Array.isArray(f)&&typeof f=="object")return d.error("First argument must be an image or text section.");const g=[];let b=!1;for(let w=1;w<=o.length-1;++w){const E=o[w];if(b&&typeof E=="object"&&!Array.isArray(E)){b=!1;let I=null;if(E["font-scale"]&&(I=d.parse(E["font-scale"],1,dn),!I))return null;let D=null;if(E["text-font"]&&(D=d.parse(E["text-font"],1,kr(Nn)),!D))return null;let N=null;if(E["text-color"]&&(N=d.parse(E["text-color"],1,pr),!N))return null;const j=g[g.length-1];j.scale=I,j.font=D,j.textColor=N}else{const I=d.parse(o[w],1,ni);if(!I)return null;const D=I.type.kind;if(D!=="string"&&D!=="value"&&D!=="null"&&D!=="resolvedImage")return d.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");b=!0,g.push({content:I,scale:null,font:null,textColor:null})}}return new pa(g)}evaluate(o){return new Xr(this.sections.map((d=>{const f=d.content.evaluate(o);return gr(f)===Ks?new hl("",f,null,null,null):new hl(fl(f),null,d.scale?d.scale.evaluate(o):null,d.font?d.font.evaluate(o).join(","):null,d.textColor?d.textColor.evaluate(o):null)})))}eachChild(o){for(const d of this.sections)o(d.content),d.scale&&o(d.scale),d.font&&o(d.font),d.textColor&&o(d.textColor)}outputDefined(){return!1}serialize(){const o=["format"];for(const d of this.sections){o.push(d.content.serialize());const f={};d.scale&&(f["font-scale"]=d.scale.serialize()),d.font&&(f["text-font"]=d.font.serialize()),d.textColor&&(f["text-color"]=d.textColor.serialize()),o.push(f)}return o}}class ga{constructor(o){this.type=Ks,this.input=o}static parse(o,d){if(o.length!==2)return d.error("Expected two arguments.");const f=d.parse(o[1],1,Nn);return f?new ga(f):d.error("No image name provided.")}evaluate(o){const d=this.input.evaluate(o),f=os.fromString(d);return f&&o.availableImages&&(f.available=o.availableImages.indexOf(d)>-1),f}eachChild(o){o(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const vd={"to-boolean":Yn,"to-color":pr,"to-number":dn,"to-string":Nn};class Xa{constructor(o,d){this.type=o,this.args=d}static parse(o,d){if(o.length<2)return d.error("Expected at least one argument.");const f=o[0];if((f==="to-boolean"||f==="to-string")&&o.length!==2)return d.error("Expected one argument.");const g=vd[f],b=[];for(let w=1;w<o.length;w++){const E=d.parse(o[w],w,ni);if(!E)return null;b.push(E)}return new Xa(g,b)}evaluate(o){if(this.type.kind==="boolean")return!!this.args[0].evaluate(o);if(this.type.kind==="color"){let d,f;for(const g of this.args){if(d=g.evaluate(o),f=null,d instanceof Ui)return d;if(typeof d=="string"){const b=o.parseColor(d);if(b)return b}else if(Array.isArray(d)&&(f=d.length<3||d.length>4?`Invalid rbga value ${JSON.stringify(d)}: expected an array containing either three or four numeric values.`:bu(d[0],d[1],d[2],d[3]),!f))return new Ui(d[0]/255,d[1]/255,d[2]/255,d[3])}throw new Rr(f||`Could not parse color from value '${typeof d=="string"?d:String(JSON.stringify(d))}'`)}if(this.type.kind==="number"){let d=null;for(const f of this.args){if(d=f.evaluate(o),d===null)return 0;const g=Number(d);if(!isNaN(g))return g}throw new Rr(`Could not convert ${JSON.stringify(d)} to number.`)}return this.type.kind==="formatted"?Xr.fromString(fl(this.args[0].evaluate(o))):this.type.kind==="resolvedImage"?os.fromString(fl(this.args[0].evaluate(o))):fl(this.args[0].evaluate(o))}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every((o=>o.outputDefined()))}serialize(){if(this.type.kind==="formatted")return new pa([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new ga(this.args[0]).serialize();const o=[`to-${this.type.kind}`];return this.eachChild((d=>{o.push(d.serialize())})),o}}var Ko=Xa;const Po=["Unknown","Point","LineString","Polygon"];var Ul=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Po[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const c=this.featureDistanceData.center,o=this.featureDistanceData.scale,{x:d,y:f}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(d*o-c[0])+this.featureDistanceData.bearing[1]*(f*o-c[1])}return 0}parseColor(c){let o=this._parseColorCache[c];return o||(o=this._parseColorCache[c]=Ui.parse(c)),o}};class Mo{constructor(o,d,f,g){this.name=o,this.type=d,this._evaluate=f,this.args=g}evaluate(o){return this._evaluate(o,this.args)}eachChild(o){this.args.forEach(o)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map((o=>o.serialize())))}static parse(o,d){const f=o[0],g=Mo.definitions[f];if(!g)return d.error(`Unknown expression "${f}". If you wanted a literal array, use ["literal", [...]].`,0);const b=Array.isArray(g)?g[0]:g.type,w=Array.isArray(g)?[[g[1],g[2]]]:g.overloads,E=w.filter((([D])=>!Array.isArray(D)||D.length===o.length-1));let I=null;for(const[D,N]of E){I=new yn(d.registry,d.path,null,d.scope);const j=[];let Q=!1;for(let ne=1;ne<o.length;ne++){const ae=o[ne],de=Array.isArray(D)?D[ne-1]:D.type,Te=I.parse(ae,1+j.length,de);if(!Te){Q=!0;break}j.push(Te)}if(!Q)if(Array.isArray(D)&&D.length!==j.length)I.error(`Expected ${D.length} arguments, but found ${j.length} instead.`);else{for(let ne=0;ne<j.length;ne++){const ae=Array.isArray(D)?D[ne]:D.type,de=j[ne];I.concat(ne+1).checkSubtype(ae,de.type)}if(I.errors.length===0)return new Mo(f,b,N,j)}}if(E.length===1)d.errors.push(...I.errors);else{const D=(E.length?E:w).map((([j])=>{return Q=j,Array.isArray(Q)?`(${Q.map(Ni).join(", ")})`:`(${Ni(Q.type)}...)`;var Q})).join(" | "),N=[];for(let j=1;j<o.length;j++){const Q=d.parse(o[j],1+N.length);if(!Q)return null;N.push(Ni(Q.type))}d.error(`Expected arguments of type ${D}, but found (${N.join(", ")}) instead.`)}return null}static register(o,d){Mo.definitions=d;for(const f in d)o[f]=Mo}}var va=Mo;class _a{constructor(o,d,f){this.type=Pr,this.locale=f,this.caseSensitive=o,this.diacriticSensitive=d}static parse(o,d){if(o.length!==2)return d.error("Expected one argument.");const f=o[1];if(typeof f!="object"||Array.isArray(f))return d.error("Collator options argument must be an object.");const g=d.parse(f["case-sensitive"]!==void 0&&f["case-sensitive"],1,Yn);if(!g)return null;const b=d.parse(f["diacritic-sensitive"]!==void 0&&f["diacritic-sensitive"],1,Yn);if(!b)return null;let w=null;return f.locale&&(w=d.parse(f.locale,1,Nn),!w)?null:new _a(g,b,w)}evaluate(o){return new $c(this.caseSensitive.evaluate(o),this.diacriticSensitive.evaluate(o),this.locale?this.locale.evaluate(o):null)}eachChild(o){o(this.caseSensitive),o(this.diacriticSensitive),this.locale&&o(this.locale)}outputDefined(){return!1}serialize(){const o={};return o["case-sensitive"]=this.caseSensitive.serialize(),o["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(o.locale=this.locale.serialize()),["collator",o]}}const Xo=8192;function gc(c,o){c[0]=Math.min(c[0],o[0]),c[1]=Math.min(c[1],o[1]),c[2]=Math.max(c[2],o[0]),c[3]=Math.max(c[3],o[1])}function Ya(c,o){return!(c[0]<=o[0]||c[2]>=o[2]||c[1]<=o[1]||c[3]>=o[3])}function pl(c,o){const d=(180+c[0])/360,f=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c[1]*Math.PI/360)))/360,g=Math.pow(2,o.z);return[Math.round(d*g*Xo),Math.round(f*g*Xo)]}function jc(c,o,d){const f=c[0]-o[0],g=c[1]-o[1],b=c[0]-d[0],w=c[1]-d[1];return f*w-b*g==0&&f*b<=0&&g*w<=0}function gl(c,o){let d=!1;for(let w=0,E=o.length;w<E;w++){const I=o[w];for(let D=0,N=I.length;D<N-1;D++){if(jc(c,I[D],I[D+1]))return!1;(g=I[D])[1]>(f=c)[1]!=(b=I[D+1])[1]>f[1]&&f[0]<(b[0]-g[0])*(f[1]-g[1])/(b[1]-g[1])+g[0]&&(d=!d)}}var f,g,b;return d}function xu(c,o){for(let d=0;d<o.length;d++)if(gl(c,o[d]))return!0;return!1}function wu(c,o,d,f){const g=f[0]-d[0],b=f[1]-d[1],w=(c[0]-d[0])*b-g*(c[1]-d[1]),E=(o[0]-d[0])*b-g*(o[1]-d[1]);return w>0&&E<0||w<0&&E>0}function ao(c,o,d){for(const D of d)for(let N=0;N<D.length-1;++N)if((E=[(w=D[N+1])[0]-(b=D[N])[0],w[1]-b[1]])[0]*(I=[(g=o)[0]-(f=c)[0],g[1]-f[1]])[1]-E[1]*I[0]!=0&&wu(f,g,b,w)&&wu(b,w,f,g))return!0;var f,g,b,w,E,I;return!1}function Ti(c,o){for(let d=0;d<c.length;++d)if(!gl(c[d],o))return!1;for(let d=0;d<c.length-1;++d)if(ao(c[d],c[d+1],o))return!1;return!0}function Wc(c,o){for(let d=0;d<o.length;d++)if(Ti(c,o[d]))return!0;return!1}function Tu(c,o,d){const f=[];for(let g=0;g<c.length;g++){const b=[];for(let w=0;w<c[g].length;w++){const E=pl(c[g][w],d);gc(o,E),b.push(E)}f.push(b)}return f}function _d(c,o,d){const f=[];for(let g=0;g<c.length;g++){const b=Tu(c[g],o,d);f.push(b)}return f}function vl(c,o,d,f){if(c[0]<d[0]||c[0]>d[2]){const g=.5*f;let b=c[0]-d[0]>g?-f:d[0]-c[0]>g?f:0;b===0&&(b=c[0]-d[2]>g?-f:d[2]-c[0]>g?f:0),c[0]+=b}gc(o,c)}function Ns(c,o,d,f){const g=Math.pow(2,f.z)*Xo,b=[f.x*Xo,f.y*Xo],w=[];if(!c)return w;for(const E of c)for(const I of E){const D=[I.x+b[0],I.y+b[1]];vl(D,o,d,g),w.push(D)}return w}function Hc(c,o,d,f){const g=Math.pow(2,f.z)*Xo,b=[f.x*Xo,f.y*Xo],w=[];if(!c)return w;for(const I of c){const D=[];for(const N of I){const j=[N.x+b[0],N.y+b[1]];gc(o,j),D.push(j)}w.push(D)}if(o[2]-o[0]<=g/2){(E=o)[0]=E[1]=1/0,E[2]=E[3]=-1/0;for(const I of w)for(const D of I)vl(D,o,d,g)}var E;return w}class lo{constructor(o,d){this.type=Yn,this.geojson=o,this.geometries=d}static parse(o,d){if(o.length!==2)return d.error(`'within' expression requires exactly one argument, but found ${o.length-1} instead.`);if(Qi(o[1])){const f=o[1];if(f.type==="FeatureCollection")for(let g=0;g<f.features.length;++g){const b=f.features[g].geometry.type;if(b==="Polygon"||b==="MultiPolygon")return new lo(f,f.features[g].geometry)}else if(f.type==="Feature"){const g=f.geometry.type;if(g==="Polygon"||g==="MultiPolygon")return new lo(f,f.geometry)}else if(f.type==="Polygon"||f.type==="MultiPolygon")return new lo(f,f)}return d.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(o){if(o.geometry()!=null&&o.canonicalID()!=null){if(o.geometryType()==="Point")return(function(d,f){const g=[1/0,1/0,-1/0,-1/0],b=[1/0,1/0,-1/0,-1/0],w=d.canonicalID();if(!w)return!1;if(f.type==="Polygon"){const E=Tu(f.coordinates,b,w),I=Ns(d.geometry(),g,b,w);if(!Ya(g,b))return!1;for(const D of I)if(!gl(D,E))return!1}if(f.type==="MultiPolygon"){const E=_d(f.coordinates,b,w),I=Ns(d.geometry(),g,b,w);if(!Ya(g,b))return!1;for(const D of I)if(!xu(D,E))return!1}return!0})(o,this.geometries);if(o.geometryType()==="LineString")return(function(d,f){const g=[1/0,1/0,-1/0,-1/0],b=[1/0,1/0,-1/0,-1/0],w=d.canonicalID();if(!w)return!1;if(f.type==="Polygon"){const E=Tu(f.coordinates,b,w),I=Hc(d.geometry(),g,b,w);if(!Ya(g,b))return!1;for(const D of I)if(!Ti(D,E))return!1}if(f.type==="MultiPolygon"){const E=_d(f.coordinates,b,w),I=Hc(d.geometry(),g,b,w);if(!Ya(g,b))return!1;for(const D of I)if(!Wc(D,E))return!1}return!0})(o,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var Yo=lo;function A(c){if(c instanceof va&&(c.name==="get"&&c.args.length===1||c.name==="feature-state"||c.name==="has"&&c.args.length===1||c.name==="properties"||c.name==="geometry-type"||c.name==="id"||/^filter-/.test(c.name))||c instanceof Yo)return!1;let o=!0;return c.eachChild((d=>{o&&!A(d)&&(o=!1)})),o}function te(c){if(c instanceof va&&c.name==="feature-state")return!1;let o=!0;return c.eachChild((d=>{o&&!te(d)&&(o=!1)})),o}function ue(c,o){if(c instanceof va&&o.indexOf(c.name)>=0)return!1;let d=!0;return c.eachChild((f=>{d&&!ue(f,o)&&(d=!1)})),d}class Me{constructor(o,d){this.type=d.type,this.name=o,this.boundExpression=d}static parse(o,d){if(o.length!==2||typeof o[1]!="string")return d.error("'var' expression requires exactly one string literal argument.");const f=o[1];return d.scope.has(f)?new Me(f,d.scope.get(f)):d.error(`Unknown variable "${f}". Make sure "${f}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(o){return this.boundExpression.evaluate(o)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var Tt=Me;class Mt{constructor(o,d=[],f,g=new Ji,b=[]){this.registry=o,this.path=d,this.key=d.map((w=>`[${w}]`)).join(""),this.scope=g,this.errors=b,this.expectedType=f}parse(o,d,f,g,b={}){return d?this.concat(d,f,g)._parse(o,b):this._parse(o,b)}_parse(o,d){function f(g,b,w){return w==="assert"?new Ao(b,[g]):w==="coerce"?new Ko(b,[g]):g}if(o!==null&&typeof o!="string"&&typeof o!="boolean"&&typeof o!="number"||(o=["literal",o]),Array.isArray(o)){if(o.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const g=o[0];if(typeof g!="string")return this.error(`Expression name must be a string, but found ${typeof g} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const b=this.registry[g];if(b){let w=b.parse(o,this);if(!w)return null;if(this.expectedType){const E=this.expectedType,I=w.type;if(E.kind!=="string"&&E.kind!=="number"&&E.kind!=="boolean"&&E.kind!=="object"&&E.kind!=="array"||I.kind!=="value")if(E.kind!=="color"&&E.kind!=="formatted"&&E.kind!=="resolvedImage"||I.kind!=="value"&&I.kind!=="string"){if(this.checkSubtype(E,I))return null}else w=f(w,E,d.typeAnnotation||"coerce");else w=f(w,E,d.typeAnnotation||"assert")}if(!(w instanceof ml)&&w.type.kind!=="resolvedImage"&&di(w)){const E=new Ul;try{w=new ml(w.type,w.evaluate(E))}catch(I){return this.error(I.message),null}}return w}return this.error(`Unknown expression "${g}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(o===void 0?"'undefined' value invalid. Use null instead.":typeof o=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof o} instead.`)}concat(o,d,f){const g=typeof o=="number"?this.path.concat(o):this.path,b=f?this.scope.concat(f):this.scope;return new Mt(this.registry,g,d||null,b,this.errors)}error(o,...d){const f=`${this.key}${d.map((g=>`[${g}]`)).join("")}`;this.errors.push(new Fs(f,o))}checkSubtype(o,d){const f=zs(o,d);return f&&this.error(f),f}}var yn=Mt;function di(c){if(c instanceof Tt)return di(c.boundExpression);if(c instanceof va&&c.name==="error"||c instanceof _a||c instanceof Yo)return!1;const o=c instanceof Ko||c instanceof Ao;let d=!0;return c.eachChild((f=>{d=o?d&&di(f):d&&f instanceof ml})),!!d&&A(c)&&ue(c,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function Mr(c,o){const d=c.length-1;let f,g,b=0,w=d,E=0;for(;b<=w;)if(E=Math.floor((b+w)/2),f=c[E],g=c[E+1],f<=o){if(E===d||o<g)return E;b=E+1}else{if(!(f>o))throw new Rr("Input is not a number.");w=E-1}return 0}class Si{constructor(o,d,f){this.type=o,this.input=d,this.labels=[],this.outputs=[];for(const[g,b]of f)this.labels.push(g),this.outputs.push(b)}static parse(o,d){if(o.length-1<4)return d.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if((o.length-1)%2!=0)return d.error("Expected an even number of arguments.");const f=d.parse(o[1],1,dn);if(!f)return null;const g=[];let b=null;d.expectedType&&d.expectedType.kind!=="value"&&(b=d.expectedType);for(let w=1;w<o.length;w+=2){const E=w===1?-1/0:o[w],I=o[w+1],D=w,N=w+1;if(typeof E!="number")return d.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',D);if(g.length&&g[g.length-1][0]>=E)return d.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',D);const j=d.parse(I,N,b);if(!j)return null;b=b||j.type,g.push([E,j])}return new Si(b,f,g)}evaluate(o){const d=this.labels,f=this.outputs;if(d.length===1)return f[0].evaluate(o);const g=this.input.evaluate(o);if(g<=d[0])return f[0].evaluate(o);const b=d.length;return g>=d[b-1]?f[b-1].evaluate(o):f[Mr(d,g)].evaluate(o)}eachChild(o){o(this.input);for(const d of this.outputs)o(d)}outputDefined(){return this.outputs.every((o=>o.outputDefined()))}serialize(){const o=["step",this.input.serialize()];for(let d=0;d<this.labels.length;d++)d>0&&o.push(this.labels[d]),o.push(this.outputs[d].serialize());return o}}var rr=Si;function Qn(c,o,d){return c*(1-d)+o*d}var Xs=Object.freeze({__proto__:null,array:function(c,o,d){return c.map(((f,g)=>Qn(f,o[g],d)))},color:function(c,o,d){return new Ui(Qn(c.r,o.r,d),Qn(c.g,o.g,d),Qn(c.b,o.b,d),Qn(c.a,o.a,d))},number:Qn});const Za=.95047,ya=1.08883,Gc=4/29,Ja=6/29,bm=3*Ja*Ja,L_=Ja*Ja*Ja,R_=Math.PI/180,O_=180/Math.PI;function Zo(c){return c>L_?Math.pow(c,1/3):c/bm+Gc}function Vh(c){return c>Ja?c*c*c:bm*(c-Gc)}function Bh(c){return 255*(c<=.0031308?12.92*c:1.055*Math.pow(c,1/2.4)-.055)}function yd(c){return(c/=255)<=.04045?c/12.92:Math.pow((c+.055)/1.055,2.4)}function pg(c){const o=yd(c.r),d=yd(c.g),f=yd(c.b),g=Zo((.4124564*o+.3575761*d+.1804375*f)/Za),b=Zo((.2126729*o+.7151522*d+.072175*f)/1);return{l:116*b-16,a:500*(g-b),b:200*(b-Zo((.0193339*o+.119192*d+.9503041*f)/ya)),alpha:c.a}}function gg(c){let o=(c.l+16)/116,d=isNaN(c.a)?o:o+c.a/500,f=isNaN(c.b)?o:o-c.b/200;return o=1*Vh(o),d=Za*Vh(d),f=ya*Vh(f),new Ui(Bh(3.2404542*d-1.5371385*o-.4985314*f),Bh(-.969266*d+1.8760108*o+.041556*f),Bh(.0556434*d-.2040259*o+1.0572252*f),c.alpha)}function vg(c,o,d){const f=o-c;return c+d*(f>180||f<-180?f-360*Math.round(f/360):f)}const vc={forward:pg,reverse:gg,interpolate:function(c,o,d){return{l:Qn(c.l,o.l,d),a:Qn(c.a,o.a,d),b:Qn(c.b,o.b,d),alpha:Qn(c.alpha,o.alpha,d)}}},Su={forward:function(c){const{l:o,a:d,b:f}=pg(c),g=Math.atan2(f,d)*O_;return{h:g<0?g+360:g,c:Math.sqrt(d*d+f*f),l:o,alpha:c.a}},reverse:function(c){const o=c.h*R_,d=c.c;return gg({l:c.l,a:Math.cos(o)*d,b:Math.sin(o)*d,alpha:c.alpha})},interpolate:function(c,o,d){return{h:vg(c.h,o.h,d),c:Qn(c.c,o.c,d),l:Qn(c.l,o.l,d),alpha:Qn(c.alpha,o.alpha,d)}}};var xm=Object.freeze({__proto__:null,hcl:Su,lab:vc});class Eu{constructor(o,d,f,g,b){this.type=o,this.operator=d,this.interpolation=f,this.input=g,this.labels=[],this.outputs=[];for(const[w,E]of b)this.labels.push(w),this.outputs.push(E)}static interpolationFactor(o,d,f,g){let b=0;if(o.name==="exponential")b=wm(d,o.base,f,g);else if(o.name==="linear")b=wm(d,1,f,g);else if(o.name==="cubic-bezier"){const w=o.controlPoints;b=new J(w[0],w[1],w[2],w[3]).solve(wm(d,1,f,g))}return b}static parse(o,d){let[f,g,b,...w]=o;if(!Array.isArray(g)||g.length===0)return d.error("Expected an interpolation type expression.",1);if(g[0]==="linear")g={name:"linear"};else if(g[0]==="exponential"){const D=g[1];if(typeof D!="number")return d.error("Exponential interpolation requires a numeric base.",1,1);g={name:"exponential",base:D}}else{if(g[0]!=="cubic-bezier")return d.error(`Unknown interpolation type ${String(g[0])}`,1,0);{const D=g.slice(1);if(D.length!==4||D.some((N=>typeof N!="number"||N<0||N>1)))return d.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);g={name:"cubic-bezier",controlPoints:D}}}if(o.length-1<4)return d.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if((o.length-1)%2!=0)return d.error("Expected an even number of arguments.");if(b=d.parse(b,2,dn),!b)return null;const E=[];let I=null;f==="interpolate-hcl"||f==="interpolate-lab"?I=pr:d.expectedType&&d.expectedType.kind!=="value"&&(I=d.expectedType);for(let D=0;D<w.length;D+=2){const N=w[D],j=w[D+1],Q=D+3,ne=D+4;if(typeof N!="number")return d.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Q);if(E.length&&E[E.length-1][0]>=N)return d.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Q);const ae=d.parse(j,ne,I);if(!ae)return null;I=I||ae.type,E.push([N,ae])}return I.kind==="number"||I.kind==="color"||I.kind==="array"&&I.itemType.kind==="number"&&typeof I.N=="number"?new Eu(I,f,g,b,E):d.error(`Type ${Ni(I)} is not interpolatable.`)}evaluate(o){const d=this.labels,f=this.outputs;if(d.length===1)return f[0].evaluate(o);const g=this.input.evaluate(o);if(g<=d[0])return f[0].evaluate(o);const b=d.length;if(g>=d[b-1])return f[b-1].evaluate(o);const w=Mr(d,g),E=Eu.interpolationFactor(this.interpolation,g,d[w],d[w+1]),I=f[w].evaluate(o),D=f[w+1].evaluate(o);return this.operator==="interpolate"?Xs[this.type.kind.toLowerCase()](I,D,E):this.operator==="interpolate-hcl"?Su.reverse(Su.interpolate(Su.forward(I),Su.forward(D),E)):vc.reverse(vc.interpolate(vc.forward(I),vc.forward(D),E))}eachChild(o){o(this.input);for(const d of this.outputs)o(d)}outputDefined(){return this.outputs.every((o=>o.outputDefined()))}serialize(){let o;o=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const d=[this.operator,o,this.input.serialize()];for(let f=0;f<this.labels.length;f++)d.push(this.labels[f],this.outputs[f].serialize());return d}}function wm(c,o,d,f){const g=f-d,b=c-d;return g===0?0:o===1?b/g:(Math.pow(o,b)-1)/(Math.pow(o,g)-1)}var _l=Eu;class bd{constructor(o,d){this.type=o,this.args=d}static parse(o,d){if(o.length<2)return d.error("Expectected at least one argument.");let f=null;const g=d.expectedType;g&&g.kind!=="value"&&(f=g);const b=[];for(const E of o.slice(1)){const I=d.parse(E,1+b.length,f,void 0,{typeAnnotation:"omit"});if(!I)return null;f=f||I.type,b.push(I)}const w=g&&b.some((E=>zs(g,E.type)));return new bd(w?ni:f,b)}evaluate(o){let d,f=null,g=0;for(const b of this.args){if(g++,f=b.evaluate(o),f&&f instanceof os&&!f.available&&(d||(d=f),f=null,g===this.args.length))return d;if(f!==null)break}return f}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every((o=>o.outputDefined()))}serialize(){const o=["coalesce"];return this.eachChild((d=>{o.push(d.serialize())})),o}}var Fh=bd;class xd{constructor(o,d){this.type=d.type,this.bindings=[].concat(o),this.result=d}evaluate(o){return this.result.evaluate(o)}eachChild(o){for(const d of this.bindings)o(d[1]);o(this.result)}static parse(o,d){if(o.length<4)return d.error(`Expected at least 3 arguments, but found ${o.length-1} instead.`);const f=[];for(let b=1;b<o.length-1;b+=2){const w=o[b];if(typeof w!="string")return d.error(`Expected string, but found ${typeof w} instead.`,b);if(/[^a-zA-Z0-9_]/.test(w))return d.error("Variable names must contain only alphanumeric characters or '_'.",b);const E=d.parse(o[b+1],b+1);if(!E)return null;f.push([w,E])}const g=d.parse(o[o.length-1],o.length-1,d.expectedType,f);return g?new xd(f,g):null}outputDefined(){return this.result.outputDefined()}serialize(){const o=["let"];for(const[d,f]of this.bindings)o.push(d,f.serialize());return o.push(this.result.serialize()),o}}var wd=xd;class zh{constructor(o,d,f){this.type=o,this.index=d,this.input=f}static parse(o,d){if(o.length!==3)return d.error(`Expected 2 arguments, but found ${o.length-1} instead.`);const f=d.parse(o[1],1,dn),g=d.parse(o[2],2,kr(d.expectedType||ni));return f&&g?new zh(g.type.itemType,f,g):null}evaluate(o){const d=this.index.evaluate(o),f=this.input.evaluate(o);if(d<0)throw new Rr(`Array index out of bounds: ${d} < 0.`);if(d>=f.length)throw new Rr(`Array index out of bounds: ${d} > ${f.length-1}.`);if(d!==Math.floor(d))throw new Rr(`Array index must be an integer, but found ${d} instead.`);return f[d]}eachChild(o){o(this.index),o(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var Tm=zh;class Do{constructor(o,d){this.type=Yn,this.needle=o,this.haystack=d}static parse(o,d){if(o.length!==3)return d.error(`Expected 2 arguments, but found ${o.length-1} instead.`);const f=d.parse(o[1],1,ni),g=d.parse(o[2],2,ni);return f&&g?ul(f.type,[Yn,Nn,dn,fa,ni])?new Do(f,g):d.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ni(f.type)} instead`):null}evaluate(o){const d=this.needle.evaluate(o),f=this.haystack.evaluate(o);if(f==null)return!1;if(!Nl(d,["boolean","string","number","null"]))throw new Rr(`Expected first argument to be of type boolean, string, number or null, but found ${Ni(gr(d))} instead.`);if(!Nl(f,["string","array"]))throw new Rr(`Expected second argument to be of type array or string, but found ${Ni(gr(f))} instead.`);return f.indexOf(d)>=0}eachChild(o){o(this.needle),o(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var Nh=Do;class Td{constructor(o,d,f){this.type=dn,this.needle=o,this.haystack=d,this.fromIndex=f}static parse(o,d){if(o.length<=2||o.length>=5)return d.error(`Expected 3 or 4 arguments, but found ${o.length-1} instead.`);const f=d.parse(o[1],1,ni),g=d.parse(o[2],2,ni);if(!f||!g)return null;if(!ul(f.type,[Yn,Nn,dn,fa,ni]))return d.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ni(f.type)} instead`);if(o.length===4){const b=d.parse(o[3],3,dn);return b?new Td(f,g,b):null}return new Td(f,g)}evaluate(o){const d=this.needle.evaluate(o),f=this.haystack.evaluate(o);if(!Nl(d,["boolean","string","number","null"]))throw new Rr(`Expected first argument to be of type boolean, string, number or null, but found ${Ni(gr(d))} instead.`);if(!Nl(f,["string","array"]))throw new Rr(`Expected second argument to be of type array or string, but found ${Ni(gr(f))} instead.`);if(this.fromIndex){const g=this.fromIndex.evaluate(o);return f.indexOf(d,g)}return f.indexOf(d)}eachChild(o){o(this.needle),o(this.haystack),this.fromIndex&&o(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const o=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),o]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var Sm=Td;class Uh{constructor(o,d,f,g,b,w){this.inputType=o,this.type=d,this.input=f,this.cases=g,this.outputs=b,this.otherwise=w}static parse(o,d){if(o.length<5)return d.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if(o.length%2!=1)return d.error("Expected an even number of arguments.");let f,g;d.expectedType&&d.expectedType.kind!=="value"&&(g=d.expectedType);const b={},w=[];for(let D=2;D<o.length-1;D+=2){let N=o[D];const j=o[D+1];Array.isArray(N)||(N=[N]);const Q=d.concat(D);if(N.length===0)return Q.error("Expected at least one branch label.");for(const ae of N){if(typeof ae!="number"&&typeof ae!="string")return Q.error("Branch labels must be numbers or strings.");if(typeof ae=="number"&&Math.abs(ae)>Number.MAX_SAFE_INTEGER)return Q.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof ae=="number"&&Math.floor(ae)!==ae)return Q.error("Numeric branch labels must be integer values.");if(f){if(Q.checkSubtype(f,gr(ae)))return null}else f=gr(ae);if(b[String(ae)]!==void 0)return Q.error("Branch labels must be unique.");b[String(ae)]=w.length}const ne=d.parse(j,D,g);if(!ne)return null;g=g||ne.type,w.push(ne)}const E=d.parse(o[1],1,ni);if(!E)return null;const I=d.parse(o[o.length-1],o.length-1,g);return I?E.type.kind!=="value"&&d.concat(1).checkSubtype(f,E.type)?null:new Uh(f,g,E,b,w,I):null}evaluate(o){const d=this.input.evaluate(o);return(gr(d)===this.inputType&&this.outputs[this.cases[d]]||this.otherwise).evaluate(o)}eachChild(o){o(this.input),this.outputs.forEach(o),o(this.otherwise)}outputDefined(){return this.outputs.every((o=>o.outputDefined()))&&this.otherwise.outputDefined()}serialize(){const o=["match",this.input.serialize()],d=Object.keys(this.cases).sort(),f=[],g={};for(const w of d){const E=g[this.cases[w]];E===void 0?(g[this.cases[w]]=f.length,f.push([this.cases[w],[w]])):f[E][1].push(w)}const b=w=>this.inputType.kind==="number"?Number(w):w;for(const[w,E]of f)o.push(E.length===1?b(E[0]):E.map(b)),o.push(this.outputs[w].serialize());return o.push(this.otherwise.serialize()),o}}var V_=Uh;class Em{constructor(o,d,f){this.type=o,this.branches=d,this.otherwise=f}static parse(o,d){if(o.length<4)return d.error(`Expected at least 3 arguments, but found only ${o.length-1}.`);if(o.length%2!=0)return d.error("Expected an odd number of arguments.");let f;d.expectedType&&d.expectedType.kind!=="value"&&(f=d.expectedType);const g=[];for(let w=1;w<o.length-1;w+=2){const E=d.parse(o[w],w,Yn);if(!E)return null;const I=d.parse(o[w+1],w+1,f);if(!I)return null;g.push([E,I]),f=f||I.type}const b=d.parse(o[o.length-1],o.length-1,f);return b?new Em(f,g,b):null}evaluate(o){for(const[d,f]of this.branches)if(d.evaluate(o))return f.evaluate(o);return this.otherwise.evaluate(o)}eachChild(o){for(const[d,f]of this.branches)o(d),o(f);o(this.otherwise)}outputDefined(){return this.branches.every((([o,d])=>d.outputDefined()))&&this.otherwise.outputDefined()}serialize(){const o=["case"];return this.eachChild((d=>{o.push(d.serialize())})),o}}var _g=Em;class Sd{constructor(o,d,f,g){this.type=o,this.input=d,this.beginIndex=f,this.endIndex=g}static parse(o,d){if(o.length<=2||o.length>=5)return d.error(`Expected 3 or 4 arguments, but found ${o.length-1} instead.`);const f=d.parse(o[1],1,ni),g=d.parse(o[2],2,dn);if(!f||!g)return null;if(!ul(f.type,[kr(ni),Nn,ni]))return d.error(`Expected first argument to be of type array or string, but found ${Ni(f.type)} instead`);if(o.length===4){const b=d.parse(o[3],3,dn);return b?new Sd(f.type,f,g,b):null}return new Sd(f.type,f,g)}evaluate(o){const d=this.input.evaluate(o),f=this.beginIndex.evaluate(o);if(!Nl(d,["string","array"]))throw new Rr(`Expected first argument to be of type array or string, but found ${Ni(gr(d))} instead.`);if(this.endIndex){const g=this.endIndex.evaluate(o);return d.slice(f,g)}return d.slice(f)}eachChild(o){o(this.input),o(this.beginIndex),this.endIndex&&o(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const o=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),o]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var yg=Sd;function $h(c,o){return c==="=="||c==="!="?o.kind==="boolean"||o.kind==="string"||o.kind==="number"||o.kind==="null"||o.kind==="value":o.kind==="string"||o.kind==="number"||o.kind==="value"}function Cm(c,o,d,f){return f.compare(o,d)===0}function qc(c,o,d){const f=c!=="=="&&c!=="!=";return class h6{constructor(b,w,E){this.type=Yn,this.lhs=b,this.rhs=w,this.collator=E,this.hasUntypedArgument=b.type.kind==="value"||w.type.kind==="value"}static parse(b,w){if(b.length!==3&&b.length!==4)return w.error("Expected two or three arguments.");const E=b[0];let I=w.parse(b[1],1,ni);if(!I)return null;if(!$h(E,I.type))return w.concat(1).error(`"${E}" comparisons are not supported for type '${Ni(I.type)}'.`);let D=w.parse(b[2],2,ni);if(!D)return null;if(!$h(E,D.type))return w.concat(2).error(`"${E}" comparisons are not supported for type '${Ni(D.type)}'.`);if(I.type.kind!==D.type.kind&&I.type.kind!=="value"&&D.type.kind!=="value")return w.error(`Cannot compare types '${Ni(I.type)}' and '${Ni(D.type)}'.`);f&&(I.type.kind==="value"&&D.type.kind!=="value"?I=new Ao(D.type,[I]):I.type.kind!=="value"&&D.type.kind==="value"&&(D=new Ao(I.type,[D])));let N=null;if(b.length===4){if(I.type.kind!=="string"&&D.type.kind!=="string"&&I.type.kind!=="value"&&D.type.kind!=="value")return w.error("Cannot use collator to compare non-string types.");if(N=w.parse(b[3],3,Pr),!N)return null}return new h6(I,D,N)}evaluate(b){const w=this.lhs.evaluate(b),E=this.rhs.evaluate(b);if(f&&this.hasUntypedArgument){const I=gr(w),D=gr(E);if(I.kind!==D.kind||I.kind!=="string"&&I.kind!=="number")throw new Rr(`Expected arguments for "${c}" to be (string, string) or (number, number), but found (${I.kind}, ${D.kind}) instead.`)}if(this.collator&&!f&&this.hasUntypedArgument){const I=gr(w),D=gr(E);if(I.kind!=="string"||D.kind!=="string")return o(b,w,E)}return this.collator?d(b,w,E,this.collator.evaluate(b)):o(b,w,E)}eachChild(b){b(this.lhs),b(this.rhs),this.collator&&b(this.collator)}outputDefined(){return!0}serialize(){const b=[c];return this.eachChild((w=>{b.push(w.serialize())})),b}}}const km=qc("==",(function(c,o,d){return o===d}),Cm),B_=qc("!=",(function(c,o,d){return o!==d}),(function(c,o,d,f){return!Cm(0,o,d,f)})),F_=qc("<",(function(c,o,d){return o<d}),(function(c,o,d,f){return f.compare(o,d)<0})),Kc=qc(">",(function(c,o,d){return o>d}),(function(c,o,d,f){return f.compare(o,d)>0})),$l=qc("<=",(function(c,o,d){return o<=d}),(function(c,o,d,f){return f.compare(o,d)<=0})),Im=qc(">=",(function(c,o,d){return o>=d}),(function(c,o,d,f){return f.compare(o,d)>=0}));class jh{constructor(o,d,f,g,b,w){this.type=Nn,this.number=o,this.locale=d,this.currency=f,this.unit=g,this.minFractionDigits=b,this.maxFractionDigits=w}static parse(o,d){if(o.length!==3)return d.error("Expected two arguments.");const f=d.parse(o[1],1,dn);if(!f)return null;const g=o[2];if(typeof g!="object"||Array.isArray(g))return d.error("NumberFormat options argument must be an object.");let b=null;if(g.locale&&(b=d.parse(g.locale,1,Nn),!b))return null;let w=null;if(g.currency&&(w=d.parse(g.currency,1,Nn),!w))return null;let E=null;if(g.unit&&(E=d.parse(g.unit,1,Nn),!E))return null;let I=null;if(g["min-fraction-digits"]&&(I=d.parse(g["min-fraction-digits"],1,dn),!I))return null;let D=null;return g["max-fraction-digits"]&&(D=d.parse(g["max-fraction-digits"],1,dn),!D)?null:new jh(f,b,w,E,I,D)}evaluate(o){return new Intl.NumberFormat(this.locale?this.locale.evaluate(o):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(o):void 0,unit:this.unit?this.unit.evaluate(o):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(o):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(o):void 0}).format(this.number.evaluate(o))}eachChild(o){o(this.number),this.locale&&o(this.locale),this.currency&&o(this.currency),this.unit&&o(this.unit),this.minFractionDigits&&o(this.minFractionDigits),this.maxFractionDigits&&o(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const o={};return this.locale&&(o.locale=this.locale.serialize()),this.currency&&(o.currency=this.currency.serialize()),this.unit&&(o.unit=this.unit.serialize()),this.minFractionDigits&&(o["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(o["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),o]}}class Xc{constructor(o){this.type=dn,this.input=o}static parse(o,d){if(o.length!==2)return d.error(`Expected 1 argument, but found ${o.length-1} instead.`);const f=d.parse(o[1],1);return f?f.type.kind!=="array"&&f.type.kind!=="string"&&f.type.kind!=="value"?d.error(`Expected argument of type string or array, but found ${Ni(f.type)} instead.`):new Xc(f):null}evaluate(o){const d=this.input.evaluate(o);if(typeof d=="string"||Array.isArray(d))return d.length;throw new Rr(`Expected value to be of type string or array, but found ${Ni(gr(d))} instead.`)}eachChild(o){o(this.input)}outputDefined(){return!1}serialize(){const o=["length"];return this.eachChild((d=>{o.push(d.serialize())})),o}}const Am={"==":km,"!=":B_,">":Kc,"<":F_,">=":Im,"<=":$l,array:Ao,at:Tm,boolean:Ao,case:_g,coalesce:Fh,collator:_a,format:pa,image:ga,in:Nh,"index-of":Sm,interpolate:_l,"interpolate-hcl":_l,"interpolate-lab":_l,length:Xc,let:wd,literal:ml,match:V_,number:Ao,"number-format":jh,object:Ao,slice:yg,step:rr,string:Ao,"to-boolean":Ko,"to-color":Ko,"to-number":Ko,"to-string":Ko,var:Tt,within:Yo};function Pm(c,[o,d,f,g]){o=o.evaluate(c),d=d.evaluate(c),f=f.evaluate(c);const b=g?g.evaluate(c):1,w=bu(o,d,f,b);if(w)throw new Rr(w);return new Ui(o/255*b,d/255*b,f/255*b,b)}function yl(c,o){return c in o}function Wh(c,o){const d=o[c];return d===void 0?null:d}function ba(c){return{type:c}}va.register(Am,{error:[{kind:"error"},[Nn],(c,[o])=>{throw new Rr(o.evaluate(c))}],typeof:[Nn,[ni],(c,[o])=>Ni(gr(o.evaluate(c)))],"to-rgba":[kr(dn,4),[pr],(c,[o])=>o.evaluate(c).toArray()],rgb:[pr,[dn,dn,dn],Pm],rgba:[pr,[dn,dn,dn,dn],Pm],has:{type:Yn,overloads:[[[Nn],(c,[o])=>yl(o.evaluate(c),c.properties())],[[Nn,oo],(c,[o,d])=>yl(o.evaluate(c),d.evaluate(c))]]},get:{type:ni,overloads:[[[Nn],(c,[o])=>Wh(o.evaluate(c),c.properties())],[[Nn,oo],(c,[o,d])=>Wh(o.evaluate(c),d.evaluate(c))]]},"feature-state":[ni,[Nn],(c,[o])=>Wh(o.evaluate(c),c.featureState||{})],properties:[oo,[],c=>c.properties()],"geometry-type":[Nn,[],c=>c.geometryType()],id:[ni,[],c=>c.id()],zoom:[dn,[],c=>c.globals.zoom],pitch:[dn,[],c=>c.globals.pitch||0],"distance-from-center":[dn,[],c=>c.distanceFromCenter()],"heatmap-density":[dn,[],c=>c.globals.heatmapDensity||0],"line-progress":[dn,[],c=>c.globals.lineProgress||0],"sky-radial-progress":[dn,[],c=>c.globals.skyRadialProgress||0],accumulated:[ni,[],c=>c.globals.accumulated===void 0?null:c.globals.accumulated],"+":[dn,ba(dn),(c,o)=>{let d=0;for(const f of o)d+=f.evaluate(c);return d}],"*":[dn,ba(dn),(c,o)=>{let d=1;for(const f of o)d*=f.evaluate(c);return d}],"-":{type:dn,overloads:[[[dn,dn],(c,[o,d])=>o.evaluate(c)-d.evaluate(c)],[[dn],(c,[o])=>-o.evaluate(c)]]},"/":[dn,[dn,dn],(c,[o,d])=>o.evaluate(c)/d.evaluate(c)],"%":[dn,[dn,dn],(c,[o,d])=>o.evaluate(c)%d.evaluate(c)],ln2:[dn,[],()=>Math.LN2],pi:[dn,[],()=>Math.PI],e:[dn,[],()=>Math.E],"^":[dn,[dn,dn],(c,[o,d])=>Math.pow(o.evaluate(c),d.evaluate(c))],sqrt:[dn,[dn],(c,[o])=>Math.sqrt(o.evaluate(c))],log10:[dn,[dn],(c,[o])=>Math.log(o.evaluate(c))/Math.LN10],ln:[dn,[dn],(c,[o])=>Math.log(o.evaluate(c))],log2:[dn,[dn],(c,[o])=>Math.log(o.evaluate(c))/Math.LN2],sin:[dn,[dn],(c,[o])=>Math.sin(o.evaluate(c))],cos:[dn,[dn],(c,[o])=>Math.cos(o.evaluate(c))],tan:[dn,[dn],(c,[o])=>Math.tan(o.evaluate(c))],asin:[dn,[dn],(c,[o])=>Math.asin(o.evaluate(c))],acos:[dn,[dn],(c,[o])=>Math.acos(o.evaluate(c))],atan:[dn,[dn],(c,[o])=>Math.atan(o.evaluate(c))],min:[dn,ba(dn),(c,o)=>Math.min(...o.map((d=>d.evaluate(c))))],max:[dn,ba(dn),(c,o)=>Math.max(...o.map((d=>d.evaluate(c))))],abs:[dn,[dn],(c,[o])=>Math.abs(o.evaluate(c))],round:[dn,[dn],(c,[o])=>{const d=o.evaluate(c);return d<0?-Math.round(-d):Math.round(d)}],floor:[dn,[dn],(c,[o])=>Math.floor(o.evaluate(c))],ceil:[dn,[dn],(c,[o])=>Math.ceil(o.evaluate(c))],"filter-==":[Yn,[Nn,ni],(c,[o,d])=>c.properties()[o.value]===d.value],"filter-id-==":[Yn,[ni],(c,[o])=>c.id()===o.value],"filter-type-==":[Yn,[Nn],(c,[o])=>c.geometryType()===o.value],"filter-<":[Yn,[Nn,ni],(c,[o,d])=>{const f=c.properties()[o.value],g=d.value;return typeof f==typeof g&&f<g}],"filter-id-<":[Yn,[ni],(c,[o])=>{const d=c.id(),f=o.value;return typeof d==typeof f&&d<f}],"filter->":[Yn,[Nn,ni],(c,[o,d])=>{const f=c.properties()[o.value],g=d.value;return typeof f==typeof g&&f>g}],"filter-id->":[Yn,[ni],(c,[o])=>{const d=c.id(),f=o.value;return typeof d==typeof f&&d>f}],"filter-<=":[Yn,[Nn,ni],(c,[o,d])=>{const f=c.properties()[o.value],g=d.value;return typeof f==typeof g&&f<=g}],"filter-id-<=":[Yn,[ni],(c,[o])=>{const d=c.id(),f=o.value;return typeof d==typeof f&&d<=f}],"filter->=":[Yn,[Nn,ni],(c,[o,d])=>{const f=c.properties()[o.value],g=d.value;return typeof f==typeof g&&f>=g}],"filter-id->=":[Yn,[ni],(c,[o])=>{const d=c.id(),f=o.value;return typeof d==typeof f&&d>=f}],"filter-has":[Yn,[ni],(c,[o])=>o.value in c.properties()],"filter-has-id":[Yn,[],c=>c.id()!==null&&c.id()!==void 0],"filter-type-in":[Yn,[kr(Nn)],(c,[o])=>o.value.indexOf(c.geometryType())>=0],"filter-id-in":[Yn,[kr(ni)],(c,[o])=>o.value.indexOf(c.id())>=0],"filter-in-small":[Yn,[Nn,kr(ni)],(c,[o,d])=>d.value.indexOf(c.properties()[o.value])>=0],"filter-in-large":[Yn,[Nn,kr(ni)],(c,[o,d])=>(function(f,g,b,w){for(;b<=w;){const E=b+w>>1;if(g[E]===f)return!0;g[E]>f?w=E-1:b=E+1}return!1})(c.properties()[o.value],d.value,0,d.value.length-1)],all:{type:Yn,overloads:[[[Yn,Yn],(c,[o,d])=>o.evaluate(c)&&d.evaluate(c)],[ba(Yn),(c,o)=>{for(const d of o)if(!d.evaluate(c))return!1;return!0}]]},any:{type:Yn,overloads:[[[Yn,Yn],(c,[o,d])=>o.evaluate(c)||d.evaluate(c)],[ba(Yn),(c,o)=>{for(const d of o)if(d.evaluate(c))return!0;return!1}]]},"!":[Yn,[Yn],(c,[o])=>!o.evaluate(c)],"is-supported-script":[Yn,[Nn],(c,[o])=>{const d=c.globals&&c.globals.isSupportedScript;return!d||d(o.evaluate(c))}],upcase:[Nn,[Nn],(c,[o])=>o.evaluate(c).toUpperCase()],downcase:[Nn,[Nn],(c,[o])=>o.evaluate(c).toLowerCase()],concat:[Nn,ba(ni),(c,o)=>o.map((d=>fl(d.evaluate(c)))).join("")],"resolved-locale":[Nn,[Pr],(c,[o])=>o.evaluate(c).resolvedLocale()]});var Ed=Am;function Mm(c){return{result:"success",value:c}}function _c(c){return{result:"error",value:c}}function Cu(c){return c["property-type"]==="data-driven"}function Hh(c){return!!c.expression&&c.expression.parameters.indexOf("zoom")>-1}function Gh(c){return!!c.expression&&c.expression.interpolated}function Ei(c){return c instanceof Number?"number":c instanceof String?"string":c instanceof Boolean?"boolean":Array.isArray(c)?"array":c===null?"null":typeof c}function Cd(c){return typeof c=="object"&&c!==null&&!Array.isArray(c)}function bl(c){return c}function kd(c,o){const d=o.type==="color",f=c.stops&&typeof c.stops[0][0]=="object",g=f||!(f||c.property!==void 0),b=c.type||(Gh(o)?"exponential":"interval");if(d&&((c=ha({},c)).stops&&(c.stops=c.stops.map((D=>[D[0],Ui.parse(D[1])]))),c.default=Ui.parse(c.default?c.default:o.default)),c.colorSpace&&c.colorSpace!=="rgb"&&!xm[c.colorSpace])throw new Error(`Unknown color space: ${c.colorSpace}`);let w,E,I;if(b==="exponential")w=jl;else if(b==="interval")w=qh;else if(b==="categorical"){w=bg,E=Object.create(null);for(const D of c.stops)E[D[0]]=D[1];I=typeof c.stops[0][0]}else{if(b!=="identity")throw new Error(`Unknown function type "${b}"`);w=xg}if(f){const D={},N=[];for(let ne=0;ne<c.stops.length;ne++){const ae=c.stops[ne],de=ae[0].zoom;D[de]===void 0&&(D[de]={zoom:de,type:c.type,property:c.property,default:c.default,stops:[]},N.push(de)),D[de].stops.push([ae[0].value,ae[1]])}const j=[];for(const ne of N)j.push([D[ne].zoom,kd(D[ne],o)]);const Q={name:"linear"};return{kind:"composite",interpolationType:Q,interpolationFactor:_l.interpolationFactor.bind(void 0,Q),zoomStops:j.map((ne=>ne[0])),evaluate:({zoom:ne},ae)=>jl({stops:j,base:c.base},o,ne).evaluate(ne,ae)}}if(g){const D=b==="exponential"?{name:"exponential",base:c.base!==void 0?c.base:1}:null;return{kind:"camera",interpolationType:D,interpolationFactor:_l.interpolationFactor.bind(void 0,D),zoomStops:c.stops.map((N=>N[0])),evaluate:({zoom:N})=>w(c,o,N,E,I)}}return{kind:"source",evaluate(D,N){const j=N&&N.properties?N.properties[c.property]:void 0;return j===void 0?ku(c.default,o.default):w(c,o,j,E,I)}}}function ku(c,o,d){return c!==void 0?c:o!==void 0?o:d!==void 0?d:void 0}function bg(c,o,d,f,g){return ku(typeof d===g?f[d]:void 0,c.default,o.default)}function qh(c,o,d){if(Ei(d)!=="number")return ku(c.default,o.default);const f=c.stops.length;if(f===1||d<=c.stops[0][0])return c.stops[0][1];if(d>=c.stops[f-1][0])return c.stops[f-1][1];const g=Mr(c.stops.map((b=>b[0])),d);return c.stops[g][1]}function jl(c,o,d){const f=c.base!==void 0?c.base:1;if(Ei(d)!=="number")return ku(c.default,o.default);const g=c.stops.length;if(g===1||d<=c.stops[0][0])return c.stops[0][1];if(d>=c.stops[g-1][0])return c.stops[g-1][1];const b=Mr(c.stops.map((N=>N[0])),d),w=(function(N,j,Q,ne){const ae=ne-Q,de=N-Q;return ae===0?0:j===1?de/ae:(Math.pow(j,de)-1)/(Math.pow(j,ae)-1)})(d,f,c.stops[b][0],c.stops[b+1][0]),E=c.stops[b][1],I=c.stops[b+1][1];let D=Xs[o.type]||bl;if(c.colorSpace&&c.colorSpace!=="rgb"){const N=xm[c.colorSpace];D=(j,Q)=>N.reverse(N.interpolate(N.forward(j),N.forward(Q),w))}return typeof E.evaluate=="function"?{evaluate(...N){const j=E.evaluate.apply(void 0,N),Q=I.evaluate.apply(void 0,N);if(j!==void 0&&Q!==void 0)return D(j,Q,w)}}:D(E,I,w)}function xg(c,o,d){return o.type==="color"?d=Ui.parse(d):o.type==="formatted"?d=Xr.fromString(d.toString()):o.type==="resolvedImage"?d=os.fromString(d.toString()):Ei(d)===o.type||o.type==="enum"&&o.values[d]||(d=void 0),ku(d,c.default,o.default)}class Kh{constructor(o,d){this.expression=o,this._warningHistory={},this._evaluator=new Ul,this._defaultValue=d?(function(f){return f.type==="color"&&(Cd(f.default)||Array.isArray(f.default))?new Ui(0,0,0,0):f.type==="color"?Ui.parse(f.default)||null:f.default===void 0?null:f.default})(d):null,this._enumValues=d&&d.type==="enum"?d.values:null}evaluateWithoutErrorHandling(o,d,f,g,b,w,E,I){return this._evaluator.globals=o,this._evaluator.feature=d,this._evaluator.featureState=f,this._evaluator.canonical=g||null,this._evaluator.availableImages=b||null,this._evaluator.formattedSection=w,this._evaluator.featureTileCoord=E||null,this._evaluator.featureDistanceData=I||null,this.expression.evaluate(this._evaluator)}evaluate(o,d,f,g,b,w,E,I){this._evaluator.globals=o,this._evaluator.feature=d||null,this._evaluator.featureState=f||null,this._evaluator.canonical=g||null,this._evaluator.availableImages=b||null,this._evaluator.formattedSection=w||null,this._evaluator.featureTileCoord=E||null,this._evaluator.featureDistanceData=I||null;try{const D=this.expression.evaluate(this._evaluator);if(D==null||typeof D=="number"&&D!=D)return this._defaultValue;if(this._enumValues&&!(D in this._enumValues))throw new Rr(`Expected value to be one of ${Object.keys(this._enumValues).map((N=>JSON.stringify(N))).join(", ")}, but found ${JSON.stringify(D)} instead.`);return D}catch(D){return this._warningHistory[D.message]||(this._warningHistory[D.message]=!0,typeof console<"u"&&console.warn(D.message)),this._defaultValue}}}function Iu(c){return Array.isArray(c)&&c.length>0&&typeof c[0]=="string"&&c[0]in Ed}function Au(c,o){const d=new yn(Ed,[],o?(function(g){const b={color:pr,string:Nn,number:dn,enum:Nn,boolean:Yn,formatted:Go,resolvedImage:Ks};return g.type==="array"?kr(b[g.value]||ni,g.length):b[g.type]})(o):void 0),f=d.parse(c,void 0,void 0,void 0,o&&o.type==="string"?{typeAnnotation:"coerce"}:void 0);return f?Mm(new Kh(f,o)):_c(d.errors)}class Id{constructor(o,d){this.kind=o,this._styleExpression=d,this.isStateDependent=o!=="constant"&&!te(d.expression)}evaluateWithoutErrorHandling(o,d,f,g,b,w){return this._styleExpression.evaluateWithoutErrorHandling(o,d,f,g,b,w)}evaluate(o,d,f,g,b,w){return this._styleExpression.evaluate(o,d,f,g,b,w)}}class yc{constructor(o,d,f,g){this.kind=o,this.zoomStops=f,this._styleExpression=d,this.isStateDependent=o!=="camera"&&!te(d.expression),this.interpolationType=g}evaluateWithoutErrorHandling(o,d,f,g,b,w){return this._styleExpression.evaluateWithoutErrorHandling(o,d,f,g,b,w)}evaluate(o,d,f,g,b,w){return this._styleExpression.evaluate(o,d,f,g,b,w)}interpolationFactor(o,d,f){return this.interpolationType?_l.interpolationFactor(this.interpolationType,o,d,f):0}}function Ad(c,o){if((c=Au(c,o)).result==="error")return c;const d=c.value.expression,f=A(d);if(!f&&!Cu(o))return _c([new Fs("","data expressions not supported")]);const g=ue(d,["zoom","pitch","distance-from-center"]);if(!g&&!Hh(o))return _c([new Fs("","zoom expressions not supported")]);const b=Md(d);return b||g?b instanceof Fs?_c([b]):b instanceof _l&&!Gh(o)?_c([new Fs("",'"interpolate" expressions cannot be used with this property')]):Mm(b?new yc(f?"camera":"composite",c.value,b.labels,b instanceof _l?b.interpolation:void 0):new Id(f?"constant":"source",c.value)):_c([new Fs("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Pd{constructor(o,d){this._parameters=o,this._specification=d,ha(this,kd(this._parameters,this._specification))}static deserialize(o){return new Pd(o._parameters,o._specification)}static serialize(o){return{_parameters:o._parameters,_specification:o._specification}}}function Md(c){let o=null;if(c instanceof wd)o=Md(c.result);else if(c instanceof Fh){for(const d of c.args)if(o=Md(d),o)break}else(c instanceof rr||c instanceof _l)&&c.input instanceof va&&c.input.name==="zoom"&&(o=c);return o instanceof Fs||c.eachChild((d=>{const f=Md(d);f instanceof Fs?o=f:!o&&f?o=new Fs("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):o&&f&&o!==f&&(o=new Fs("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),o}class gn{constructor(o,d,f,g){this.message=(o?`${o}: `:"")+f,g&&(this.identifier=g),d!=null&&d.__line__&&(this.line=d.__line__)}}function Jo(c){const o=c.key,d=c.value,f=c.valueSpec||{},g=c.objectElementValidators||{},b=c.style,w=c.styleSpec;let E=[];const I=Ei(d);if(I!=="object")return[new gn(o,d,`object expected, ${I} found`)];for(const D in d){const N=D.split(".")[0];let j;g[N]?j=g[N]:f[N]?j=ks:g["*"]?j=g["*"]:f["*"]&&(j=ks),j?E=E.concat(j({key:(o&&`${o}.`)+D,value:d[D],valueSpec:f[N]||f["*"],style:b,styleSpec:w,object:d,objectKey:D},d)):E.push(new gn(o,d[D],`unknown property "${D}"`))}for(const D in f)g[D]||f[D].required&&f[D].default===void 0&&d[D]===void 0&&E.push(new gn(o,d,`missing required property "${D}"`));return E}function Xh(c){const o=c.value,d=c.valueSpec,f=c.style,g=c.styleSpec,b=c.key,w=c.arrayElementValidator||ks;if(Ei(o)!=="array")return[new gn(b,o,`array expected, ${Ei(o)} found`)];if(d.length&&o.length!==d.length)return[new gn(b,o,`array length ${d.length} expected, length ${o.length} found`)];if(d["min-length"]&&o.length<d["min-length"])return[new gn(b,o,`array length at least ${d["min-length"]} expected, length ${o.length} found`)];let E={type:d.value,values:d.values,minimum:d.minimum,maximum:d.maximum,function:void 0};g.$version<7&&(E.function=d.function),Ei(d.value)==="object"&&(E=d.value);let I=[];for(let D=0;D<o.length;D++)I=I.concat(w({array:o,arrayIndex:D,value:o[D],valueSpec:E,style:f,styleSpec:g,key:`${b}[${D}]`}));return I}function Dd(c){const o=c.key,d=c.value,f=c.valueSpec;let g=Ei(d);if(g==="number"&&d!=d&&(g="NaN"),g!=="number")return[new gn(o,d,`number expected, ${g} found`)];if("minimum"in f){let b=f.minimum;if(Ei(f.minimum)==="array"&&(b=f.minimum[c.arrayIndex]),d<b)return[new gn(o,d,`${d} is less than the minimum value ${b}`)]}if("maximum"in f){let b=f.maximum;if(Ei(f.maximum)==="array"&&(b=f.maximum[c.arrayIndex]),d>b)return[new gn(o,d,`${d} is greater than the maximum value ${b}`)]}return[]}function Ld(c){const o=c.valueSpec,d=zi(c.value.type);let f,g,b,w={};const E=d!=="categorical"&&c.value.property===void 0,I=!E,D=Ei(c.value.stops)==="array"&&Ei(c.value.stops[0])==="array"&&Ei(c.value.stops[0][0])==="object",N=Jo({key:c.key,value:c.value,valueSpec:c.styleSpec.function,style:c.style,styleSpec:c.styleSpec,objectElementValidators:{stops:function(ne){if(d==="identity")return[new gn(ne.key,ne.value,'identity function may not have a "stops" property')];let ae=[];const de=ne.value;return ae=ae.concat(Xh({key:ne.key,value:de,valueSpec:ne.valueSpec,style:ne.style,styleSpec:ne.styleSpec,arrayElementValidator:j})),Ei(de)==="array"&&de.length===0&&ae.push(new gn(ne.key,de,"array must have at least one stop")),ae},default:function(ne){return ks({key:ne.key,value:ne.value,valueSpec:o,style:ne.style,styleSpec:ne.styleSpec})}}});return d==="identity"&&E&&N.push(new gn(c.key,c.value,'missing required property "property"')),d==="identity"||c.value.stops||N.push(new gn(c.key,c.value,'missing required property "stops"')),d==="exponential"&&c.valueSpec.expression&&!Gh(c.valueSpec)&&N.push(new gn(c.key,c.value,"exponential functions not supported")),c.styleSpec.$version>=8&&(I&&!Cu(c.valueSpec)?N.push(new gn(c.key,c.value,"property functions not supported")):E&&!Hh(c.valueSpec)&&N.push(new gn(c.key,c.value,"zoom functions not supported"))),d!=="categorical"&&!D||c.value.property!==void 0||N.push(new gn(c.key,c.value,'"property" property is required')),N;function j(ne){let ae=[];const de=ne.value,Te=ne.key;if(Ei(de)!=="array")return[new gn(Te,de,`array expected, ${Ei(de)} found`)];if(de.length!==2)return[new gn(Te,de,`array length 2 expected, length ${de.length} found`)];if(D){if(Ei(de[0])!=="object")return[new gn(Te,de,`object expected, ${Ei(de[0])} found`)];if(de[0].zoom===void 0)return[new gn(Te,de,"object stop key must have zoom")];if(de[0].value===void 0)return[new gn(Te,de,"object stop key must have value")];const Re=zi(de[0].zoom);if(typeof Re!="number")return[new gn(Te,de[0].zoom,"stop zoom values must be numbers")];if(b&&b>Re)return[new gn(Te,de[0].zoom,"stop zoom values must appear in ascending order")];Re!==b&&(b=Re,g=void 0,w={}),ae=ae.concat(Jo({key:`${Te}[0]`,value:de[0],valueSpec:{zoom:{}},style:ne.style,styleSpec:ne.styleSpec,objectElementValidators:{zoom:Dd,value:Q}}))}else ae=ae.concat(Q({key:`${Te}[0]`,value:de[0],style:ne.style,styleSpec:ne.styleSpec},de));return Iu(Ki(de[1]))?ae.concat([new gn(`${Te}[1]`,de[1],"expressions are not allowed in function stops.")]):ae.concat(ks({key:`${Te}[1]`,value:de[1],valueSpec:o,style:ne.style,styleSpec:ne.styleSpec}))}function Q(ne,ae){const de=Ei(ne.value),Te=zi(ne.value),Re=ne.value!==null?ne.value:ae;if(f){if(de!==f)return[new gn(ne.key,Re,`${de} stop domain type must match previous stop domain type ${f}`)]}else f=de;if(de!=="number"&&de!=="string"&&de!=="boolean"&&typeof Te!="number"&&typeof Te!="string"&&typeof Te!="boolean")return[new gn(ne.key,Re,"stop domain value must be a number, string, or boolean")];if(de!=="number"&&d!=="categorical"){let $e=`number expected, ${de} found`;return Cu(o)&&d===void 0&&($e+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new gn(ne.key,Re,$e)]}return d!=="categorical"||de!=="number"||typeof Te=="number"&&isFinite(Te)&&Math.floor(Te)===Te?d!=="categorical"&&de==="number"&&typeof Te=="number"&&typeof g=="number"&&g!==void 0&&Te<g?[new gn(ne.key,Re,"stop domain values must appear in ascending order")]:(g=Te,d==="categorical"&&Te in w?[new gn(ne.key,Re,"stop domain values must be unique")]:(w[Te]=!0,[])):[new gn(ne.key,Re,`integer expected, found ${String(Te)}`)]}}function Cs(c){const o=(c.expressionContext==="property"?Ad:Au)(Ki(c.value),c.valueSpec);if(o.result==="error")return o.value.map((f=>new gn(`${c.key}${f.key}`,c.value,f.message)));const d=o.value.expression||o.value._styleExpression.expression;if(c.expressionContext==="property"&&c.propertyKey==="text-font"&&!d.outputDefined())return[new gn(c.key,c.value,`Invalid data expression for "${c.propertyKey}". Output values must be contained as literals within the expression.`)];if(c.expressionContext==="property"&&c.propertyType==="layout"&&!te(d))return[new gn(c.key,c.value,'"feature-state" data expressions are not supported with layout properties.')];if(c.expressionContext==="filter")return Qa(d,c);if(c.expressionContext&&c.expressionContext.indexOf("cluster")===0){if(!ue(d,["zoom","feature-state"]))return[new gn(c.key,c.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(c.expressionContext==="cluster-initial"&&!A(d))return[new gn(c.key,c.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Qa(c,o){const d=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(o.valueSpec&&o.valueSpec.expression)for(const g of o.valueSpec.expression.parameters)d.delete(g);if(d.size===0)return[];const f=[];return c instanceof va&&d.has(c.name)?[new gn(o.key,o.value,`["${c.name}"] expression is not supported in a filter for a ${o.object.type} layer with id: ${o.object.id}`)]:(c.eachChild((g=>{f.push(...Qa(g,o))})),f)}function Yh(c){const o=c.key,d=c.value,f=c.valueSpec,g=[];return Array.isArray(f.values)?f.values.indexOf(zi(d))===-1&&g.push(new gn(o,d,`expected one of [${f.values.join(", ")}], ${JSON.stringify(d)} found`)):Object.keys(f.values).indexOf(zi(d))===-1&&g.push(new gn(o,d,`expected one of [${Object.keys(f.values).join(", ")}], ${JSON.stringify(d)} found`)),g}function Dm(c){if(c===!0||c===!1)return!0;if(!Array.isArray(c)||c.length===0)return!1;switch(c[0]){case"has":return c.length>=2&&c[1]!=="$id"&&c[1]!=="$type";case"in":return c.length>=3&&(typeof c[1]!="string"||Array.isArray(c[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return c.length!==3||Array.isArray(c[1])||Array.isArray(c[2]);case"any":case"all":for(const o of c.slice(1))if(!Dm(o)&&typeof o!="boolean")return!1;return!0;default:return!0}}function Zh(c,o="fill"){if(c==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};Dm(c)||(c=el(c));const d=c;let f=!0;try{f=(function(D){if(!bc(D))return D;let N=Ki(D);return Yc(N),N=wg(N),N})(d)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(d,null,2)}
        `)}const g=Dt[`filter_${o}`],b=Au(f,g);let w=null;if(b.result==="error")throw new Error(b.value.map((D=>`${D.key}: ${D.message}`)).join(", "));w=(D,N,j)=>b.value.evaluate(D,N,{},j);let E=null,I=null;if(f!==d){const D=Au(d,g);if(D.result==="error")throw new Error(D.value.map((N=>`${N.key}: ${N.message}`)).join(", "));E=(N,j,Q,ne,ae)=>D.value.evaluate(N,j,{},Q,void 0,void 0,ne,ae),I=!A(D.value.expression)}return{filter:w,dynamicFilter:E||void 0,needGeometry:Sg(f),needFeature:!!I}}function wg(c){if(!Array.isArray(c))return c;const o=(function(d){if(Lm.has(d[0])){for(let f=1;f<d.length;f++)if(bc(d[f]))return!0}return d})(c);return o===!0?o:o.map((d=>wg(d)))}function Yc(c){let o=!1;const d=[];if(c[0]==="case"){for(let f=1;f<c.length-1;f+=2)o=o||bc(c[f]),d.push(c[f+1]);d.push(c[c.length-1])}else if(c[0]==="match"){o=o||bc(c[1]);for(let f=2;f<c.length-1;f+=2)d.push(c[f+1]);d.push(c[c.length-1])}else if(c[0]==="step"){o=o||bc(c[1]);for(let f=1;f<c.length-1;f+=2)d.push(c[f+1])}o&&(c.length=0,c.push("any",...d));for(let f=1;f<c.length;f++)Yc(c[f])}function bc(c){if(!Array.isArray(c))return!1;if((o=c[0])==="pitch"||o==="distance-from-center")return!0;var o;for(let d=1;d<c.length;d++)if(bc(c[d]))return!0;return!1}const Lm=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function Tg(c,o){return c<o?-1:c>o?1:0}function Sg(c){if(!Array.isArray(c))return!1;if(c[0]==="within")return!0;for(let o=1;o<c.length;o++)if(Sg(c[o]))return!0;return!1}function el(c){if(!c)return!0;const o=c[0];return c.length<=1?o!=="any":o==="=="?Rd(c[1],c[2],"=="):o==="!="?Qh(Rd(c[1],c[2],"==")):o==="<"||o===">"||o==="<="||o===">="?Rd(c[1],c[2],o):o==="any"?(d=c.slice(1),["any"].concat(d.map(el))):o==="all"?["all"].concat(c.slice(1).map(el)):o==="none"?["all"].concat(c.slice(1).map(el).map(Qh)):o==="in"?Jh(c[1],c.slice(2)):o==="!in"?Qh(Jh(c[1],c.slice(2))):o==="has"?Rm(c[1]):o==="!has"?Qh(Rm(c[1])):o!=="within"||c;var d}function Rd(c,o,d){switch(c){case"$type":return[`filter-type-${d}`,o];case"$id":return[`filter-id-${d}`,o];default:return[`filter-${d}`,c,o]}}function Jh(c,o){if(o.length===0)return!1;switch(c){case"$type":return["filter-type-in",["literal",o]];case"$id":return["filter-id-in",["literal",o]];default:return o.length>200&&!o.some((d=>typeof d!=typeof o[0]))?["filter-in-large",c,["literal",o.sort(Tg)]]:["filter-in-small",c,["literal",o]]}}function Rm(c){switch(c){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",c]}}function Qh(c){return["!",c]}function Od(c){return Dm(Ki(c.value))?Cs(ha({},c,{expressionContext:"filter",valueSpec:c.styleSpec[`filter_${c.layerType||"fill"}`]})):Wl(c)}function Wl(c){const o=c.value,d=c.key;if(Ei(o)!=="array")return[new gn(d,o,`array expected, ${Ei(o)} found`)];const f=c.styleSpec;let g,b=[];if(o.length<1)return[new gn(d,o,"filter array must have at least 1 element")];switch(b=b.concat(Yh({key:`${d}[0]`,value:o[0],valueSpec:f.filter_operator,style:c.style,styleSpec:c.styleSpec})),zi(o[0])){case"<":case"<=":case">":case">=":o.length>=2&&zi(o[1])==="$type"&&b.push(new gn(d,o,`"$type" cannot be use with operator "${o[0]}"`));case"==":case"!=":o.length!==3&&b.push(new gn(d,o,`filter array for operator "${o[0]}" must have 3 elements`));case"in":case"!in":o.length>=2&&(g=Ei(o[1]),g!=="string"&&b.push(new gn(`${d}[1]`,o[1],`string expected, ${g} found`)));for(let w=2;w<o.length;w++)g=Ei(o[w]),zi(o[1])==="$type"?b=b.concat(Yh({key:`${d}[${w}]`,value:o[w],valueSpec:f.geometry_type,style:c.style,styleSpec:c.styleSpec})):g!=="string"&&g!=="number"&&g!=="boolean"&&b.push(new gn(`${d}[${w}]`,o[w],`string, number, or boolean expected, ${g} found`));break;case"any":case"all":case"none":for(let w=1;w<o.length;w++)b=b.concat(Wl({key:`${d}[${w}]`,value:o[w],style:c.style,styleSpec:c.styleSpec}));break;case"has":case"!has":g=Ei(o[1]),o.length!==2?b.push(new gn(d,o,`filter array for "${o[0]}" operator must have 2 elements`)):g!=="string"&&b.push(new gn(`${d}[1]`,o[1],`string expected, ${g} found`));break;case"within":g=Ei(o[1]),o.length!==2?b.push(new gn(d,o,`filter array for "${o[0]}" operator must have 2 elements`)):g!=="object"&&b.push(new gn(`${d}[1]`,o[1],`object expected, ${g} found`))}return b}function Hl(c,o){const d=c.key,f=c.style,g=c.styleSpec,b=c.value,w=c.objectKey,E=g[`${o}_${c.layerType}`];if(!E)return[];const I=w.match(/^(.*)-transition$/);if(o==="paint"&&I&&E[I[1]]&&E[I[1]].transition)return ks({key:d,value:b,valueSpec:g.transition,style:f,styleSpec:g});const D=c.valueSpec||E[w];if(!D)return[new gn(d,b,`unknown property "${w}"`)];let N;if(Ei(b)==="string"&&Cu(D)&&!D.tokens&&(N=/^{([^}]+)}$/.exec(b))){const Q=`\`{ "type": "identity", "property": ${N?JSON.stringify(N[1]):'"_"'} }\``;return[new gn(d,b,`"${w}" does not support interpolation syntax
Use an identity property function instead: ${Q}.`)]}const j=[];return c.layerType==="symbol"&&(w==="text-field"&&f&&!f.glyphs&&j.push(new gn(d,b,'use of "text-field" requires a style "glyphs" property')),w==="text-font"&&Cd(Ki(b))&&zi(b.type)==="identity"&&j.push(new gn(d,b,'"text-font" does not support identity functions'))),j.concat(ks({key:c.key,value:b,valueSpec:D,style:f,styleSpec:g,expressionContext:"property",propertyType:o,propertyKey:w}))}function Eg(c){return Hl(c,"paint")}function Om(c){return Hl(c,"layout")}function Cg(c){let o=[];const d=c.value,f=c.key,g=c.style,b=c.styleSpec;d.type||d.ref||o.push(new gn(f,d,'either "type" or "ref" is required'));let w=zi(d.type);const E=zi(d.ref);if(d.id){const I=zi(d.id);for(let D=0;D<c.arrayIndex;D++){const N=g.layers[D];zi(N.id)===I&&o.push(new gn(f,d.id,`duplicate layer id "${d.id}", previously used at line ${N.id.__line__}`))}}if("ref"in d){let I;["type","source","source-layer","filter","layout"].forEach((D=>{D in d&&o.push(new gn(f,d[D],`"${D}" is prohibited for ref layers`))})),g.layers.forEach((D=>{zi(D.id)===E&&(I=D)})),I?I.ref?o.push(new gn(f,d.ref,"ref cannot reference another ref layer")):w=zi(I.type):typeof E=="string"&&o.push(new gn(f,d.ref,`ref layer "${E}" not found`))}else if(w!=="background"&&w!=="sky")if(d.source){const I=g.sources&&g.sources[d.source],D=I&&zi(I.type);I?D==="vector"&&w==="raster"?o.push(new gn(f,d.source,`layer "${d.id}" requires a raster source`)):D==="raster"&&w!=="raster"?o.push(new gn(f,d.source,`layer "${d.id}" requires a vector source`)):D!=="vector"||d["source-layer"]?D==="raster-dem"&&w!=="hillshade"?o.push(new gn(f,d.source,"raster-dem source can only be used with layer type 'hillshade'.")):w!=="line"||!d.paint||!d.paint["line-gradient"]&&!d.paint["line-trim-offset"]||D==="geojson"&&I.lineMetrics||o.push(new gn(f,d,`layer "${d.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):o.push(new gn(f,d,`layer "${d.id}" must specify a "source-layer"`)):o.push(new gn(f,d.source,`source "${d.source}" not found`))}else o.push(new gn(f,d,'missing required property "source"'));return o=o.concat(Jo({key:f,value:d,valueSpec:b.layer,style:c.style,styleSpec:c.styleSpec,objectElementValidators:{"*":()=>[],type:()=>ks({key:`${f}.type`,value:d.type,valueSpec:b.layer.type,style:c.style,styleSpec:c.styleSpec,object:d,objectKey:"type"}),filter:I=>Od(ha({layerType:w},I)),layout:I=>Jo({layer:d,key:I.key,value:I.value,valueSpec:{},style:I.style,styleSpec:I.styleSpec,objectElementValidators:{"*":D=>Om(ha({layerType:w},D))}}),paint:I=>Jo({layer:d,key:I.key,value:I.value,valueSpec:{},style:I.style,styleSpec:I.styleSpec,objectElementValidators:{"*":D=>Eg(ha({layerType:w},D))}})}})),o}function xc(c){const o=c.value,d=c.key,f=Ei(o);return f!=="string"?[new gn(d,o,`string expected, ${f} found`)]:[]}const kg={promoteId:function({key:c,value:o}){if(Ei(o)==="string")return xc({key:c,value:o});{const d=[];for(const f in o)d.push(...xc({key:`${c}.${f}`,value:o[f]}));return d}}};function Ig(c){const o=c.value,d=c.key,f=c.styleSpec,g=c.style;if(!o.type)return[new gn(d,o,'"type" is required')];const b=zi(o.type);let w;switch(b){case"vector":case"raster":case"raster-dem":return w=Jo({key:d,value:o,valueSpec:f[`source_${b.replace("-","_")}`],style:c.style,styleSpec:f,objectElementValidators:kg}),w;case"geojson":if(w=Jo({key:d,value:o,valueSpec:f.source_geojson,style:g,styleSpec:f,objectElementValidators:kg}),o.cluster)for(const E in o.clusterProperties){const[I,D]=o.clusterProperties[E],N=typeof I=="string"?[I,["accumulated"],["get",E]]:I;w.push(...Cs({key:`${d}.${E}.map`,value:D,expressionContext:"cluster-map"})),w.push(...Cs({key:`${d}.${E}.reduce`,value:N,expressionContext:"cluster-reduce"}))}return w;case"video":return Jo({key:d,value:o,valueSpec:f.source_video,style:g,styleSpec:f});case"image":return Jo({key:d,value:o,valueSpec:f.source_image,style:g,styleSpec:f});case"canvas":return[new gn(d,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Yh({key:`${d}.type`,value:o.type,valueSpec:{values:z_(f)}})}}function z_(c){return c.source.reduce(((o,d)=>{const f=c[d];return f.type.type==="enum"&&(o=o.concat(Object.keys(f.type.values))),o}),[])}function Ag(c){const o=c.value,d=c.styleSpec,f=d.light,g=c.style;let b=[];const w=Ei(o);if(o===void 0)return b;if(w!=="object")return b=b.concat([new gn("light",o,`object expected, ${w} found`)]),b;for(const E in o){const I=E.match(/^(.*)-transition$/);b=b.concat(I&&f[I[1]]&&f[I[1]].transition?ks({key:E,value:o[E],valueSpec:d.transition,style:g,styleSpec:d}):f[E]?ks({key:E,value:o[E],valueSpec:f[E],style:g,styleSpec:d}):[new gn(E,o[E],`unknown property "${E}"`)])}return b}function ef(c){const o=c.value,d=c.key,f=c.style,g=c.styleSpec,b=g.terrain;let w=[];const E=Ei(o);if(o===void 0)return w;if(E!=="object")return w=w.concat([new gn("terrain",o,`object expected, ${E} found`)]),w;for(const I in o){const D=I.match(/^(.*)-transition$/);w=w.concat(D&&b[D[1]]&&b[D[1]].transition?ks({key:I,value:o[I],valueSpec:g.transition,style:f,styleSpec:g}):b[I]?ks({key:I,value:o[I],valueSpec:b[I],style:f,styleSpec:g}):[new gn(I,o[I],`unknown property "${I}"`)])}if(o.source){const I=f.sources&&f.sources[o.source],D=I&&zi(I.type);I?D!=="raster-dem"&&w.push(new gn(d,o.source,`terrain cannot be used with a source of type ${String(D)}, it only be used with a "raster-dem" source type`)):w.push(new gn(d,o.source,`source "${o.source}" not found`))}else w.push(new gn(d,o,'terrain is missing required property "source"'));return w}function Pg(c){const o=c.value,d=c.style,f=c.styleSpec,g=f.fog;let b=[];const w=Ei(o);if(o===void 0)return b;if(w!=="object")return b=b.concat([new gn("fog",o,`object expected, ${w} found`)]),b;for(const E in o){const I=E.match(/^(.*)-transition$/);b=b.concat(I&&g[I[1]]&&g[I[1]].transition?ks({key:E,value:o[E],valueSpec:f.transition,style:d,styleSpec:f}):g[E]?ks({key:E,value:o[E],valueSpec:g[E],style:d,styleSpec:f}):[new gn(E,o[E],`unknown property "${E}"`)])}return b}const Vm={"*":()=>[],array:Xh,boolean:function(c){const o=c.value,d=c.key,f=Ei(o);return f!=="boolean"?[new gn(d,o,`boolean expected, ${f} found`)]:[]},number:Dd,color:function(c){const o=c.key,d=c.value,f=Ei(d);return f!=="string"?[new gn(o,d,`color expected, ${f} found`)]:Es(d)===null?[new gn(o,d,`color expected, "${d}" found`)]:[]},enum:Yh,filter:Od,function:Ld,layer:Cg,object:Jo,source:Ig,light:Ag,terrain:ef,fog:Pg,string:xc,formatted:function(c){return xc(c).length===0?[]:Cs(c)},resolvedImage:function(c){return xc(c).length===0?[]:Cs(c)},projection:function(c){const o=c.value,d=c.styleSpec,f=d.projection,g=c.style;let b=[];const w=Ei(o);if(w==="object")for(const E in o)b=b.concat(ks({key:E,value:o[E],valueSpec:f[E],style:g,styleSpec:d}));else w!=="string"&&(b=b.concat([new gn("projection",o,`object or string expected, ${w} found`)]));return b}};function ks(c){const o=c.value,d=c.valueSpec,f=c.styleSpec;return d.expression&&Cd(zi(o))?Ld(c):d.expression&&Iu(Ki(o))?Cs(c):d.type&&Vm[d.type]?Vm[d.type](c):Jo(ha({},c,{valueSpec:d.type?f[d.type]:d}))}function Mg(c){const o=c.value,d=c.key,f=xc(c);return f.length||(o.indexOf("{fontstack}")===-1&&f.push(new gn(d,o,'"glyphs" url must include a "{fontstack}" token')),o.indexOf("{range}")===-1&&f.push(new gn(d,o,'"glyphs" url must include a "{range}" token'))),f}function wc(c,o=Dt){return Qo(ks({key:"",value:c,valueSpec:o.$root,styleSpec:o,style:c,objectElementValidators:{glyphs:Mg,"*":()=>[]}}))}const Dg=c=>Qo(Eg(c)),Bm=c=>Qo(Om(c));function Qo(c){return c.slice().sort(((o,d)=>o.line&&d.line?o.line-d.line:0))}function tf(c,o){let d=!1;if(o&&o.length)for(const f of o)c.fire(new Co(new Error(f.message))),d=!0;return d}var Lg=xl,ea=3;function xl(c,o,d){var f=this.cells=[];if(c instanceof ArrayBuffer){this.arrayBuffer=c;var g=new Int32Array(this.arrayBuffer);c=g[0],this.d=(o=g[1])+2*(d=g[2]);for(var b=0;b<this.d*this.d;b++){var w=g[ea+b],E=g[ea+b+1];f.push(w===E?null:g.subarray(w,E))}var I=g[ea+f.length+1];this.keys=g.subarray(g[ea+f.length],I),this.bboxes=g.subarray(I),this.insert=this._insertReadonly}else{this.d=o+2*d;for(var D=0;D<this.d*this.d;D++)f.push([]);this.keys=[],this.bboxes=[]}this.n=o,this.extent=c,this.padding=d,this.scale=o/c,this.uid=0;var N=d/o*c;this.min=-N,this.max=c+N}xl.prototype.insert=function(c,o,d,f,g){this._forEachCell(o,d,f,g,this._insertCell,this.uid++),this.keys.push(c),this.bboxes.push(o),this.bboxes.push(d),this.bboxes.push(f),this.bboxes.push(g)},xl.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},xl.prototype._insertCell=function(c,o,d,f,g,b){this.cells[g].push(b)},xl.prototype.query=function(c,o,d,f,g){var b=this.min,w=this.max;if(c<=b&&o<=b&&w<=d&&w<=f&&!g)return Array.prototype.slice.call(this.keys);var E=[];return this._forEachCell(c,o,d,f,this._queryCell,E,{},g),E},xl.prototype._queryCell=function(c,o,d,f,g,b,w,E){var I=this.cells[g];if(I!==null)for(var D=this.keys,N=this.bboxes,j=0;j<I.length;j++){var Q=I[j];if(w[Q]===void 0){var ne=4*Q;(E?E(N[ne+0],N[ne+1],N[ne+2],N[ne+3]):c<=N[ne+2]&&o<=N[ne+3]&&d>=N[ne+0]&&f>=N[ne+1])?(w[Q]=!0,b.push(D[Q])):w[Q]=!1}}},xl.prototype._forEachCell=function(c,o,d,f,g,b,w,E){for(var I=this._convertToCellCoord(c),D=this._convertToCellCoord(o),N=this._convertToCellCoord(d),j=this._convertToCellCoord(f),Q=I;Q<=N;Q++)for(var ne=D;ne<=j;ne++){var ae=this.d*ne+Q;if((!E||E(this._convertFromCellCoord(Q),this._convertFromCellCoord(ne),this._convertFromCellCoord(Q+1),this._convertFromCellCoord(ne+1)))&&g.call(this,c,o,d,f,ae,b,w,E))return}},xl.prototype._convertFromCellCoord=function(c){return(c-this.padding)/this.scale},xl.prototype._convertToCellCoord=function(c){return Math.max(0,Math.min(this.d-1,Math.floor(c*this.scale)+this.padding))},xl.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var c=this.cells,o=ea+this.cells.length+1+1,d=0,f=0;f<this.cells.length;f++)d+=this.cells[f].length;var g=new Int32Array(o+d+this.keys.length+this.bboxes.length);g[0]=this.extent,g[1]=this.n,g[2]=this.padding;for(var b=o,w=0;w<c.length;w++){var E=c[w];g[ea+w]=b,g.set(E,b),b+=E.length}return g[ea+c.length]=b,g.set(this.keys,b),g[ea+c.length+1]=b+=this.keys.length,g.set(this.bboxes,b),b+=this.bboxes.length,g.buffer};var ta=G(Lg);const tl={};function Tn(c,o,d={}){Object.defineProperty(c,"_classRegistryKey",{value:o,writeable:!1}),tl[o]={klass:c,omit:d.omit||[]}}Tn(Object,"Object"),ta.serialize=function(c,o){const d=c.toArrayBuffer();return o&&o.push(d),{buffer:d}},ta.deserialize=function(c){return new ta(c.buffer)},Object.defineProperty(ta,"name",{value:"Grid"}),Tn(ta,"Grid"),Tn(Ui,"Color"),Tn(Error,"Error"),Tn(ir,"AJAXError"),Tn(os,"ResolvedImage"),Tn(Pd,"StylePropertyFunction"),Tn(Kh,"StyleExpression",{omit:["_evaluator"]}),Tn(yc,"ZoomDependentExpression"),Tn(Id,"ZoomConstantExpression"),Tn(va,"CompoundExpression",{omit:["_evaluate"]});for(const c in Ed)tl[Ed[c]._classRegistryKey]||Tn(Ed[c],`Expression${c}`);function Fm(c){return c&&typeof ArrayBuffer<"u"&&(c instanceof ArrayBuffer||c.constructor&&c.constructor.name==="ArrayBuffer")}function zm(c){return p.ImageBitmap&&c instanceof p.ImageBitmap}function Pu(c,o){if(c==null||typeof c=="boolean"||typeof c=="number"||typeof c=="string"||c instanceof Boolean||c instanceof Number||c instanceof String||c instanceof Date||c instanceof RegExp)return c;if(Fm(c)||zm(c))return o&&o.push(c),c;if(ArrayBuffer.isView(c)){const d=c;return o&&o.push(d.buffer),d}if(c instanceof p.ImageData)return o&&o.push(c.data.buffer),c;if(Array.isArray(c)){const d=[];for(const f of c)d.push(Pu(f,o));return d}if(typeof c=="object"){const d=c.constructor,f=d._classRegistryKey;if(!f)throw new Error(`can't serialize object of unregistered class ${f}`);const g=d.serialize?d.serialize(c,o):{};if(!d.serialize){for(const b in c)c.hasOwnProperty(b)&&(tl[f].omit.indexOf(b)>=0||(g[b]=Pu(c[b],o)));c instanceof Error&&(g.message=c.message)}if(g.$name)throw new Error("$name property is reserved for worker serialization logic.");return f!=="Object"&&(g.$name=f),g}throw new Error("can't serialize object of type "+typeof c)}function Zc(c){if(c==null||typeof c=="boolean"||typeof c=="number"||typeof c=="string"||c instanceof Boolean||c instanceof Number||c instanceof String||c instanceof Date||c instanceof RegExp||Fm(c)||zm(c)||ArrayBuffer.isView(c)||c instanceof p.ImageData)return c;if(Array.isArray(c))return c.map(Zc);if(typeof c=="object"){const o=c.$name||"Object",{klass:d}=tl[o];if(!d)throw new Error(`can't deserialize unregistered class ${o}`);if(d.deserialize)return d.deserialize(c);const f=Object.create(d.prototype);for(const g of Object.keys(c))g!=="$name"&&(f[g]=Zc(c[g]));return f}throw new Error("can't deserialize object of type "+typeof c)}const _n={"Latin-1 Supplement":c=>c>=128&&c<=255,Arabic:c=>c>=1536&&c<=1791,"Arabic Supplement":c=>c>=1872&&c<=1919,"Arabic Extended-A":c=>c>=2208&&c<=2303,"Hangul Jamo":c=>c>=4352&&c<=4607,"Unified Canadian Aboriginal Syllabics":c=>c>=5120&&c<=5759,Khmer:c=>c>=6016&&c<=6143,"Unified Canadian Aboriginal Syllabics Extended":c=>c>=6320&&c<=6399,"General Punctuation":c=>c>=8192&&c<=8303,"Letterlike Symbols":c=>c>=8448&&c<=8527,"Number Forms":c=>c>=8528&&c<=8591,"Miscellaneous Technical":c=>c>=8960&&c<=9215,"Control Pictures":c=>c>=9216&&c<=9279,"Optical Character Recognition":c=>c>=9280&&c<=9311,"Enclosed Alphanumerics":c=>c>=9312&&c<=9471,"Geometric Shapes":c=>c>=9632&&c<=9727,"Miscellaneous Symbols":c=>c>=9728&&c<=9983,"Miscellaneous Symbols and Arrows":c=>c>=11008&&c<=11263,"CJK Radicals Supplement":c=>c>=11904&&c<=12031,"Kangxi Radicals":c=>c>=12032&&c<=12255,"Ideographic Description Characters":c=>c>=12272&&c<=12287,"CJK Symbols and Punctuation":c=>c>=12288&&c<=12351,Hiragana:c=>c>=12352&&c<=12447,Katakana:c=>c>=12448&&c<=12543,Bopomofo:c=>c>=12544&&c<=12591,"Hangul Compatibility Jamo":c=>c>=12592&&c<=12687,Kanbun:c=>c>=12688&&c<=12703,"Bopomofo Extended":c=>c>=12704&&c<=12735,"CJK Strokes":c=>c>=12736&&c<=12783,"Katakana Phonetic Extensions":c=>c>=12784&&c<=12799,"Enclosed CJK Letters and Months":c=>c>=12800&&c<=13055,"CJK Compatibility":c=>c>=13056&&c<=13311,"CJK Unified Ideographs Extension A":c=>c>=13312&&c<=19903,"Yijing Hexagram Symbols":c=>c>=19904&&c<=19967,"CJK Unified Ideographs":c=>c>=19968&&c<=40959,"Yi Syllables":c=>c>=40960&&c<=42127,"Yi Radicals":c=>c>=42128&&c<=42191,"Hangul Jamo Extended-A":c=>c>=43360&&c<=43391,"Hangul Syllables":c=>c>=44032&&c<=55215,"Hangul Jamo Extended-B":c=>c>=55216&&c<=55295,"Private Use Area":c=>c>=57344&&c<=63743,"CJK Compatibility Ideographs":c=>c>=63744&&c<=64255,"Arabic Presentation Forms-A":c=>c>=64336&&c<=65023,"Vertical Forms":c=>c>=65040&&c<=65055,"CJK Compatibility Forms":c=>c>=65072&&c<=65103,"Small Form Variants":c=>c>=65104&&c<=65135,"Arabic Presentation Forms-B":c=>c>=65136&&c<=65279,"Halfwidth and Fullwidth Forms":c=>c>=65280&&c<=65519};function Nm(c){for(const o of c)if(Mu(o.charCodeAt(0)))return!0;return!1}function N_(c){for(const o of c)if(!Um(o.charCodeAt(0)))return!1;return!0}function Um(c){return!(_n.Arabic(c)||_n["Arabic Supplement"](c)||_n["Arabic Extended-A"](c)||_n["Arabic Presentation Forms-A"](c)||_n["Arabic Presentation Forms-B"](c))}function Mu(c){return!(c!==746&&c!==747&&(c<4352||!(_n["Bopomofo Extended"](c)||_n.Bopomofo(c)||_n["CJK Compatibility Forms"](c)&&!(c>=65097&&c<=65103)||_n["CJK Compatibility Ideographs"](c)||_n["CJK Compatibility"](c)||_n["CJK Radicals Supplement"](c)||_n["CJK Strokes"](c)||!(!_n["CJK Symbols and Punctuation"](c)||c>=12296&&c<=12305||c>=12308&&c<=12319||c===12336)||_n["CJK Unified Ideographs Extension A"](c)||_n["CJK Unified Ideographs"](c)||_n["Enclosed CJK Letters and Months"](c)||_n["Hangul Compatibility Jamo"](c)||_n["Hangul Jamo Extended-A"](c)||_n["Hangul Jamo Extended-B"](c)||_n["Hangul Jamo"](c)||_n["Hangul Syllables"](c)||_n.Hiragana(c)||_n["Ideographic Description Characters"](c)||_n.Kanbun(c)||_n["Kangxi Radicals"](c)||_n["Katakana Phonetic Extensions"](c)||_n.Katakana(c)&&c!==12540||!(!_n["Halfwidth and Fullwidth Forms"](c)||c===65288||c===65289||c===65293||c>=65306&&c<=65310||c===65339||c===65341||c===65343||c>=65371&&c<=65503||c===65507||c>=65512&&c<=65519)||!(!_n["Small Form Variants"](c)||c>=65112&&c<=65118||c>=65123&&c<=65126)||_n["Unified Canadian Aboriginal Syllabics"](c)||_n["Unified Canadian Aboriginal Syllabics Extended"](c)||_n["Vertical Forms"](c)||_n["Yijing Hexagram Symbols"](c)||_n["Yi Syllables"](c)||_n["Yi Radicals"](c))))}function Vd(c){return!(Mu(c)||(function(o){return!!(_n["Latin-1 Supplement"](o)&&(o===167||o===169||o===174||o===177||o===188||o===189||o===190||o===215||o===247)||_n["General Punctuation"](o)&&(o===8214||o===8224||o===8225||o===8240||o===8241||o===8251||o===8252||o===8258||o===8263||o===8264||o===8265||o===8273)||_n["Letterlike Symbols"](o)||_n["Number Forms"](o)||_n["Miscellaneous Technical"](o)&&(o>=8960&&o<=8967||o>=8972&&o<=8991||o>=8996&&o<=9e3||o===9003||o>=9085&&o<=9114||o>=9150&&o<=9165||o===9167||o>=9169&&o<=9179||o>=9186&&o<=9215)||_n["Control Pictures"](o)&&o!==9251||_n["Optical Character Recognition"](o)||_n["Enclosed Alphanumerics"](o)||_n["Geometric Shapes"](o)||_n["Miscellaneous Symbols"](o)&&!(o>=9754&&o<=9759)||_n["Miscellaneous Symbols and Arrows"](o)&&(o>=11026&&o<=11055||o>=11088&&o<=11097||o>=11192&&o<=11243)||_n["CJK Symbols and Punctuation"](o)||_n.Katakana(o)||_n["Private Use Area"](o)||_n["CJK Compatibility Forms"](o)||_n["Small Form Variants"](o)||_n["Halfwidth and Fullwidth Forms"](o)||o===8734||o===8756||o===8757||o>=9984&&o<=10087||o>=10102&&o<=10131||o===65532||o===65533)})(c))}function Rg(c){return c>=1424&&c<=2303||_n["Arabic Presentation Forms-A"](c)||_n["Arabic Presentation Forms-B"](c)}function U_(c,o){return!(!o&&Rg(c)||c>=2304&&c<=3583||c>=3840&&c<=4255||_n.Khmer(c))}function Bd(c){for(const o of c)if(Rg(o.charCodeAt(0)))return!0;return!1}const ve="deferred",V="loading",oe="loaded";let Ie=null,v="unavailable",u=null;const m=function(c){c&&typeof c=="string"&&c.indexOf("NetworkError")>-1&&(v="error"),Ie&&Ie(c)};function y(){S.fire(new Ho("pluginStateChange",{pluginStatus:v,pluginURL:u}))}const S=new Fl,C=function(){return v},L=function(){if(v!==ve||!u)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");v=V,y(),u&&To({url:u},(c=>{c?m(c):(v=oe,y())}))},O={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>v===oe||O.applyArabicShaping!=null,isLoading:()=>v===V,setState(c){v=c.pluginStatus,u=c.pluginURL},isParsed:()=>O.applyArabicShaping!=null&&O.processBidirectionalText!=null&&O.processStyledBidirectionalText!=null,getPluginURL:()=>u};class U{constructor(o,d){this.zoom=o,d?(this.now=d.now,this.fadeDuration=d.fadeDuration,this.transition=d.transition,this.pitch=d.pitch):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0)}isSupportedScript(o){return(function(d,f){for(const g of d)if(!U_(g.charCodeAt(0),f))return!1;return!0})(o,O.isLoaded())}}class q{constructor(o,d){this.property=o,this.value=d,this.expression=(function(f,g){if(Cd(f))return new Pd(f,g);if(Iu(f)){const b=Ad(f,g);if(b.result==="error")throw new Error(b.value.map((w=>`${w.key}: ${w.message}`)).join(", "));return b.value}{let b=f;return typeof f=="string"&&g.type==="color"&&(b=Ui.parse(f)),{kind:"constant",evaluate:()=>b}}})(d===void 0?o.specification.default:d,o.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(o,d,f){return this.property.possiblyEvaluate(this,o,d,f)}}class K{constructor(o){this.property=o,this.value=new q(o,void 0)}transitioned(o,d){return new me(this.property,this.value,d,vt({},o.transition,this.transition),o.now)}untransitioned(){return new me(this.property,this.value,null,{},0)}}class le{constructor(o){this._properties=o,this._values=Object.create(o.defaultTransitionablePropertyValues)}getValue(o){return he(this._values[o].value.value)}setValue(o,d){this._values.hasOwnProperty(o)||(this._values[o]=new K(this._values[o].property)),this._values[o].value=new q(this._values[o].property,d===null?void 0:he(d))}getTransition(o){return he(this._values[o].transition)}setTransition(o,d){this._values.hasOwnProperty(o)||(this._values[o]=new K(this._values[o].property)),this._values[o].transition=he(d)||void 0}serialize(){const o={};for(const d of Object.keys(this._values)){const f=this.getValue(d);f!==void 0&&(o[d]=f);const g=this.getTransition(d);g!==void 0&&(o[`${d}-transition`]=g)}return o}transitioned(o,d){const f=new xe(this._properties);for(const g of Object.keys(this._values))f._values[g]=this._values[g].transitioned(o,d._values[g]);return f}untransitioned(){const o=new xe(this._properties);for(const d of Object.keys(this._values))o._values[d]=this._values[d].untransitioned();return o}}class me{constructor(o,d,f,g,b){const w=g.delay||0,E=g.duration||0;b=b||0,this.property=o,this.value=d,this.begin=b+w,this.end=this.begin+E,o.specification.transition&&(g.delay||g.duration)&&(this.prior=f)}possiblyEvaluate(o,d,f){const g=o.now||0,b=this.value.possiblyEvaluate(o,d,f),w=this.prior;if(w){if(g>this.end)return this.prior=null,b;if(this.value.isDataDriven())return this.prior=null,b;if(g<this.begin)return w.possiblyEvaluate(o,d,f);{const E=(g-this.begin)/(this.end-this.begin);return this.property.interpolate(w.possiblyEvaluate(o,d,f),b,Be(E))}}return b}}class xe{constructor(o){this._properties=o,this._values=Object.create(o.defaultTransitioningPropertyValues)}possiblyEvaluate(o,d,f){const g=new Ce(this._properties);for(const b of Object.keys(this._values))g._values[b]=this._values[b].possiblyEvaluate(o,d,f);return g}hasTransition(){for(const o of Object.keys(this._values))if(this._values[o].prior)return!0;return!1}}class Se{constructor(o){this._properties=o,this._values=Object.create(o.defaultPropertyValues)}getValue(o){return he(this._values[o].value)}setValue(o,d){this._values[o]=new q(this._values[o].property,d===null?void 0:he(d))}serialize(){const o={};for(const d of Object.keys(this._values)){const f=this.getValue(d);f!==void 0&&(o[d]=f)}return o}possiblyEvaluate(o,d,f){const g=new Ce(this._properties);for(const b of Object.keys(this._values))g._values[b]=this._values[b].possiblyEvaluate(o,d,f);return g}}class we{constructor(o,d,f){this.property=o,this.value=d,this.parameters=f}isConstant(){return this.value.kind==="constant"}constantOr(o){return this.value.kind==="constant"?this.value.value:o}evaluate(o,d,f,g){return this.property.evaluate(this.value,this.parameters,o,d,f,g)}}class Ce{constructor(o){this._properties=o,this._values=Object.create(o.defaultPossiblyEvaluatedValues)}get(o){return this._values[o]}}class ce{constructor(o){this.specification=o}possiblyEvaluate(o,d){return o.expression.evaluate(d)}interpolate(o,d,f){const g=Xs[this.specification.type];return g?g(o,d,f):o}}class ye{constructor(o,d){this.specification=o,this.overrides=d}possiblyEvaluate(o,d,f,g){return new we(this,o.expression.kind==="constant"||o.expression.kind==="camera"?{kind:"constant",value:o.expression.evaluate(d,null,{},f,g)}:o.expression,d)}interpolate(o,d,f){if(o.value.kind!=="constant"||d.value.kind!=="constant")return o;if(o.value.value===void 0||d.value.value===void 0)return new we(this,{kind:"constant",value:void 0},o.parameters);const g=Xs[this.specification.type];return g?new we(this,{kind:"constant",value:g(o.value.value,d.value.value,f)},o.parameters):o}evaluate(o,d,f,g,b,w){return o.kind==="constant"?o.value:o.evaluate(d,f,g,b,w)}}class Pe{constructor(o){this.specification=o}possiblyEvaluate(o,d,f,g){return!!o.expression.evaluate(d,null,{},f,g)}interpolate(){return!1}}class De{constructor(o){this.properties=o,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const d=new U(0,{});for(const f in o){const g=o[f];g.specification.overridable&&this.overridableProperties.push(f);const b=this.defaultPropertyValues[f]=new q(g,void 0),w=this.defaultTransitionablePropertyValues[f]=new K(g);this.defaultTransitioningPropertyValues[f]=w.untransitioned(),this.defaultPossiblyEvaluatedValues[f]=b.possiblyEvaluate(d)}}}function Ue(c,o){return 256*(c=Le(Math.floor(c),0,255))+Le(Math.floor(o),0,255)}Tn(ye,"DataDrivenProperty"),Tn(ce,"DataConstantProperty"),Tn(Pe,"ColorRampProperty");const je={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Ge{constructor(o,d){this._structArray=o,this._pos1=d*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class ct{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(o,d){return o._trim(),d&&(o.isTransferred=!0,d.push(o.arrayBuffer)),{length:o.length,arrayBuffer:o.arrayBuffer}}static deserialize(o){const d=Object.create(this.prototype);return d.arrayBuffer=o.arrayBuffer,d.length=o.length,d.capacity=o.arrayBuffer.byteLength/d.bytesPerElement,d._refreshViews(),d}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(o){this.reserve(o),this.length=o}reserve(o){if(o>this.capacity){this.capacity=Math.max(o,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const d=this.uint8;this._refreshViews(),d&&this.uint8.set(d)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function at(c,o=1){let d=0,f=0;return{members:c.map((g=>{const b=je[g.type].BYTES_PER_ELEMENT,w=d=gt(d,Math.max(o,b)),E=g.components||1;return f=Math.max(f,b),d+=b*E,{name:g.name,type:g.type,components:E,offset:w}})),size:gt(d,Math.max(f,o)),alignment:o}}function gt(c,o){return Math.ceil(c/o)*o}class Wt extends ct{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,d){const f=this.length;return this.resize(f+1),this.emplace(f,o,d)}emplace(o,d,f){const g=2*o;return this.int16[g+0]=d,this.int16[g+1]=f,o}}Wt.prototype.bytesPerElement=4,Tn(Wt,"StructArrayLayout2i4");class ht extends ct{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,d,f){const g=this.length;return this.resize(g+1),this.emplace(g,o,d,f)}emplace(o,d,f,g){const b=3*o;return this.int16[b+0]=d,this.int16[b+1]=f,this.int16[b+2]=g,o}}ht.prototype.bytesPerElement=6,Tn(ht,"StructArrayLayout3i6");class Lt extends ct{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,d,f,g){const b=this.length;return this.resize(b+1),this.emplace(b,o,d,f,g)}emplace(o,d,f,g,b){const w=4*o;return this.int16[w+0]=d,this.int16[w+1]=f,this.int16[w+2]=g,this.int16[w+3]=b,o}}Lt.prototype.bytesPerElement=8,Tn(Lt,"StructArrayLayout4i8");class bt extends ct{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,d,f,g,b,w,E){const I=this.length;return this.resize(I+1),this.emplace(I,o,d,f,g,b,w,E)}emplace(o,d,f,g,b,w,E,I){const D=6*o,N=12*o,j=3*o;return this.int16[D+0]=d,this.int16[D+1]=f,this.uint8[N+4]=g,this.uint8[N+5]=b,this.uint8[N+6]=w,this.uint8[N+7]=E,this.float32[j+2]=I,o}}bt.prototype.bytesPerElement=12,Tn(bt,"StructArrayLayout2i4ub1f12");class Gt extends ct{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,d,f,g){const b=this.length;return this.resize(b+1),this.emplace(b,o,d,f,g)}emplace(o,d,f,g,b){const w=4*o;return this.float32[w+0]=d,this.float32[w+1]=f,this.float32[w+2]=g,this.float32[w+3]=b,o}}Gt.prototype.bytesPerElement=16,Tn(Gt,"StructArrayLayout4f16");class ft extends ct{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,d,f,g,b){const w=this.length;return this.resize(w+1),this.emplace(w,o,d,f,g,b)}emplace(o,d,f,g,b,w){const E=6*o,I=3*o;return this.uint16[E+0]=d,this.uint16[E+1]=f,this.uint16[E+2]=g,this.uint16[E+3]=b,this.float32[I+2]=w,o}}ft.prototype.bytesPerElement=12,Tn(ft,"StructArrayLayout4ui1f12");class St extends ct{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,d,f,g){const b=this.length;return this.resize(b+1),this.emplace(b,o,d,f,g)}emplace(o,d,f,g,b){const w=4*o;return this.uint16[w+0]=d,this.uint16[w+1]=f,this.uint16[w+2]=g,this.uint16[w+3]=b,o}}St.prototype.bytesPerElement=8,Tn(St,"StructArrayLayout4ui8");class $t extends ct{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,d,f,g,b,w){const E=this.length;return this.resize(E+1),this.emplace(E,o,d,f,g,b,w)}emplace(o,d,f,g,b,w,E){const I=6*o;return this.int16[I+0]=d,this.int16[I+1]=f,this.int16[I+2]=g,this.int16[I+3]=b,this.int16[I+4]=w,this.int16[I+5]=E,o}}$t.prototype.bytesPerElement=12,Tn($t,"StructArrayLayout6i12");class Ft extends ct{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,d,f,g,b,w,E,I,D,N,j,Q){const ne=this.length;return this.resize(ne+1),this.emplace(ne,o,d,f,g,b,w,E,I,D,N,j,Q)}emplace(o,d,f,g,b,w,E,I,D,N,j,Q,ne){const ae=12*o;return this.int16[ae+0]=d,this.int16[ae+1]=f,this.int16[ae+2]=g,this.int16[ae+3]=b,this.uint16[ae+4]=w,this.uint16[ae+5]=E,this.uint16[ae+6]=I,this.uint16[ae+7]=D,this.int16[ae+8]=N,this.int16[ae+9]=j,this.int16[ae+10]=Q,this.int16[ae+11]=ne,o}}Ft.prototype.bytesPerElement=24,Tn(Ft,"StructArrayLayout4i4ui4i24");class Kt extends ct{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,d,f,g,b,w){const E=this.length;return this.resize(E+1),this.emplace(E,o,d,f,g,b,w)}emplace(o,d,f,g,b,w,E){const I=10*o,D=5*o;return this.int16[I+0]=d,this.int16[I+1]=f,this.int16[I+2]=g,this.float32[D+2]=b,this.float32[D+3]=w,this.float32[D+4]=E,o}}Kt.prototype.bytesPerElement=20,Tn(Kt,"StructArrayLayout3i3f20");class Dn extends ct{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(o){const d=this.length;return this.resize(d+1),this.emplace(d,o)}emplace(o,d){return this.uint32[1*o+0]=d,o}}Dn.prototype.bytesPerElement=4,Tn(Dn,"StructArrayLayout1ul4");class Gn extends ct{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,d,f,g,b,w,E,I,D,N,j,Q,ne){const ae=this.length;return this.resize(ae+1),this.emplace(ae,o,d,f,g,b,w,E,I,D,N,j,Q,ne)}emplace(o,d,f,g,b,w,E,I,D,N,j,Q,ne,ae){const de=20*o,Te=10*o;return this.int16[de+0]=d,this.int16[de+1]=f,this.int16[de+2]=g,this.int16[de+3]=b,this.int16[de+4]=w,this.float32[Te+3]=E,this.float32[Te+4]=I,this.float32[Te+5]=D,this.float32[Te+6]=N,this.int16[de+14]=j,this.uint32[Te+8]=Q,this.uint16[de+18]=ne,this.uint16[de+19]=ae,o}}Gn.prototype.bytesPerElement=40,Tn(Gn,"StructArrayLayout5i4f1i1ul2ui40");class Sn extends ct{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,d,f,g,b,w,E){const I=this.length;return this.resize(I+1),this.emplace(I,o,d,f,g,b,w,E)}emplace(o,d,f,g,b,w,E,I){const D=8*o;return this.int16[D+0]=d,this.int16[D+1]=f,this.int16[D+2]=g,this.int16[D+4]=b,this.int16[D+5]=w,this.int16[D+6]=E,this.int16[D+7]=I,o}}Sn.prototype.bytesPerElement=16,Tn(Sn,"StructArrayLayout3i2i2i16");class Rn extends ct{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,d,f,g,b){const w=this.length;return this.resize(w+1),this.emplace(w,o,d,f,g,b)}emplace(o,d,f,g,b,w){const E=4*o,I=8*o;return this.float32[E+0]=d,this.float32[E+1]=f,this.float32[E+2]=g,this.int16[I+6]=b,this.int16[I+7]=w,o}}Rn.prototype.bytesPerElement=16,Tn(Rn,"StructArrayLayout2f1f2i16");class pi extends ct{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,d,f,g){const b=this.length;return this.resize(b+1),this.emplace(b,o,d,f,g)}emplace(o,d,f,g,b){const w=12*o,E=3*o;return this.uint8[w+0]=d,this.uint8[w+1]=f,this.float32[E+1]=g,this.float32[E+2]=b,o}}pi.prototype.bytesPerElement=12,Tn(pi,"StructArrayLayout2ub2f12");class mi extends ct{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,d,f){const g=this.length;return this.resize(g+1),this.emplace(g,o,d,f)}emplace(o,d,f,g){const b=3*o;return this.float32[b+0]=d,this.float32[b+1]=f,this.float32[b+2]=g,o}}mi.prototype.bytesPerElement=12,Tn(mi,"StructArrayLayout3f12");class In extends ct{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,d,f){const g=this.length;return this.resize(g+1),this.emplace(g,o,d,f)}emplace(o,d,f,g){const b=3*o;return this.uint16[b+0]=d,this.uint16[b+1]=f,this.uint16[b+2]=g,o}}In.prototype.bytesPerElement=6,Tn(In,"StructArrayLayout3ui6");class Di extends ct{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(o,d,f,g,b,w,E,I,D,N,j,Q,ne,ae,de,Te,Re,$e,Oe,ze,Xe){const qe=this.length;return this.resize(qe+1),this.emplace(qe,o,d,f,g,b,w,E,I,D,N,j,Q,ne,ae,de,Te,Re,$e,Oe,ze,Xe)}emplace(o,d,f,g,b,w,E,I,D,N,j,Q,ne,ae,de,Te,Re,$e,Oe,ze,Xe,qe){const wt=30*o,yt=15*o,Ot=60*o;return this.int16[wt+0]=d,this.int16[wt+1]=f,this.int16[wt+2]=g,this.float32[yt+2]=b,this.float32[yt+3]=w,this.uint16[wt+8]=E,this.uint16[wt+9]=I,this.uint32[yt+5]=D,this.uint32[yt+6]=N,this.uint32[yt+7]=j,this.uint16[wt+16]=Q,this.uint16[wt+17]=ne,this.uint16[wt+18]=ae,this.float32[yt+10]=de,this.float32[yt+11]=Te,this.uint8[Ot+48]=Re,this.uint8[Ot+49]=$e,this.uint8[Ot+50]=Oe,this.uint32[yt+13]=ze,this.int16[wt+28]=Xe,this.uint8[Ot+58]=qe,o}}Di.prototype.bytesPerElement=60,Tn(Di,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class $i extends ct{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(o,d,f,g,b,w,E,I,D,N,j,Q,ne,ae,de,Te,Re,$e,Oe,ze,Xe,qe,wt,yt,Ot,tn,kt,zt,Nt,Xt){const an=this.length;return this.resize(an+1),this.emplace(an,o,d,f,g,b,w,E,I,D,N,j,Q,ne,ae,de,Te,Re,$e,Oe,ze,Xe,qe,wt,yt,Ot,tn,kt,zt,Nt,Xt)}emplace(o,d,f,g,b,w,E,I,D,N,j,Q,ne,ae,de,Te,Re,$e,Oe,ze,Xe,qe,wt,yt,Ot,tn,kt,zt,Nt,Xt,an){const Rt=38*o,vn=19*o;return this.int16[Rt+0]=d,this.int16[Rt+1]=f,this.int16[Rt+2]=g,this.float32[vn+2]=b,this.float32[vn+3]=w,this.int16[Rt+8]=E,this.int16[Rt+9]=I,this.int16[Rt+10]=D,this.int16[Rt+11]=N,this.int16[Rt+12]=j,this.int16[Rt+13]=Q,this.uint16[Rt+14]=ne,this.uint16[Rt+15]=ae,this.uint16[Rt+16]=de,this.uint16[Rt+17]=Te,this.uint16[Rt+18]=Re,this.uint16[Rt+19]=$e,this.uint16[Rt+20]=Oe,this.uint16[Rt+21]=ze,this.uint16[Rt+22]=Xe,this.uint16[Rt+23]=qe,this.uint16[Rt+24]=wt,this.uint16[Rt+25]=yt,this.uint16[Rt+26]=Ot,this.uint16[Rt+27]=tn,this.uint16[Rt+28]=kt,this.uint32[vn+15]=zt,this.float32[vn+16]=Nt,this.float32[vn+17]=Xt,this.float32[vn+18]=an,o}}$i.prototype.bytesPerElement=76,Tn($i,"StructArrayLayout3i2f6i15ui1ul3f76");class Xi extends ct{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o){const d=this.length;return this.resize(d+1),this.emplace(d,o)}emplace(o,d){return this.float32[1*o+0]=d,o}}Xi.prototype.bytesPerElement=4,Tn(Xi,"StructArrayLayout1f4");class ji extends ct{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,d,f,g,b){const w=this.length;return this.resize(w+1),this.emplace(w,o,d,f,g,b)}emplace(o,d,f,g,b,w){const E=5*o;return this.float32[E+0]=d,this.float32[E+1]=f,this.float32[E+2]=g,this.float32[E+3]=b,this.float32[E+4]=w,o}}ji.prototype.bytesPerElement=20,Tn(ji,"StructArrayLayout5f20");class Us extends ct{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,d,f,g){const b=this.length;return this.resize(b+1),this.emplace(b,o,d,f,g)}emplace(o,d,f,g,b){const w=6*o;return this.uint32[3*o+0]=d,this.uint16[w+2]=f,this.uint16[w+3]=g,this.uint16[w+4]=b,o}}Us.prototype.bytesPerElement=12,Tn(Us,"StructArrayLayout1ul3ui12");class Is extends ct{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,d){const f=this.length;return this.resize(f+1),this.emplace(f,o,d)}emplace(o,d,f){const g=2*o;return this.uint16[g+0]=d,this.uint16[g+1]=f,o}}Is.prototype.bytesPerElement=4,Tn(Is,"StructArrayLayout2ui4");class xa extends ct{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o){const d=this.length;return this.resize(d+1),this.emplace(d,o)}emplace(o,d){return this.uint16[1*o+0]=d,o}}xa.prototype.bytesPerElement=2,Tn(xa,"StructArrayLayout1ui2");class Ys extends ct{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,d){const f=this.length;return this.resize(f+1),this.emplace(f,o,d)}emplace(o,d,f){const g=2*o;return this.float32[g+0]=d,this.float32[g+1]=f,o}}Ys.prototype.bytesPerElement=8,Tn(Ys,"StructArrayLayout2f8");class er extends Ge{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}er.prototype.size=40;class Wi extends Gn{get(o){return new er(this,o)}}Tn(Wi,"CollisionBoxArray");class Ci extends Ge{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(o){this._structArray.uint8[this._pos1+49]=o}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(o){this._structArray.uint8[this._pos1+50]=o}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(o){this._structArray.uint32[this._pos4+13]=o}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(o){this._structArray.uint8[this._pos1+58]=o}}Ci.prototype.size=60;class Or extends Di{get(o){return new Ci(this,o)}}Tn(Or,"PlacedSymbolArray");class Zs extends Ge{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(o){this._structArray.uint32[this._pos4+15]=o}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}Zs.prototype.size=76;class sr extends $i{get(o){return new Zs(this,o)}}Tn(sr,"SymbolInstanceArray");class co extends Xi{getoffsetX(o){return this.float32[1*o+0]}}Tn(co,"GlyphOffsetArray");class Fd extends Wt{getx(o){return this.int16[2*o+0]}gety(o){return this.int16[2*o+1]}}Tn(Fd,"SymbolLineVertexArray");class Jc extends Ge{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}Jc.prototype.size=12;class zd extends Us{get(o){return new Jc(this,o)}}Tn(zd,"FeatureIndexArray");class nl extends Is{geta_centroid_pos0(o){return this.uint16[2*o+0]}geta_centroid_pos1(o){return this.uint16[2*o+1]}}Tn(nl,"FillExtrusionCentroidArray");const Gl=at([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),Nd=at([{name:"a_dash",components:4,type:"Uint16"}]);var Og={exports:{}},$m={exports:{}};$m.exports=function(c,o){var d,f,g,b,w,E,I,D;for(f=c.length-(d=3&c.length),g=o,w=3432918353,E=461845907,D=0;D<f;)I=255&c.charCodeAt(D)|(255&c.charCodeAt(++D))<<8|(255&c.charCodeAt(++D))<<16|(255&c.charCodeAt(++D))<<24,++D,g=27492+(65535&(b=5*(65535&(g=(g^=I=(65535&(I=(I=(65535&I)*w+(((I>>>16)*w&65535)<<16)&4294967295)<<15|I>>>17))*E+(((I>>>16)*E&65535)<<16)&4294967295)<<13|g>>>19))+((5*(g>>>16)&65535)<<16)&4294967295))+((58964+(b>>>16)&65535)<<16);switch(I=0,d){case 3:I^=(255&c.charCodeAt(D+2))<<16;case 2:I^=(255&c.charCodeAt(D+1))<<8;case 1:g^=I=(65535&(I=(I=(65535&(I^=255&c.charCodeAt(D)))*w+(((I>>>16)*w&65535)<<16)&4294967295)<<15|I>>>17))*E+(((I>>>16)*E&65535)<<16)&4294967295}return g^=c.length,g=2246822507*(65535&(g^=g>>>16))+((2246822507*(g>>>16)&65535)<<16)&4294967295,g=3266489909*(65535&(g^=g>>>13))+((3266489909*(g>>>16)&65535)<<16)&4294967295,(g^=g>>>16)>>>0};var $_=$m.exports,bM={exports:{}};bM.exports=function(c,o){for(var d,f=c.length,g=o^f,b=0;f>=4;)d=1540483477*(65535&(d=255&c.charCodeAt(b)|(255&c.charCodeAt(++b))<<8|(255&c.charCodeAt(++b))<<16|(255&c.charCodeAt(++b))<<24))+((1540483477*(d>>>16)&65535)<<16),g=1540483477*(65535&g)+((1540483477*(g>>>16)&65535)<<16)^(d=1540483477*(65535&(d^=d>>>24))+((1540483477*(d>>>16)&65535)<<16)),f-=4,++b;switch(f){case 3:g^=(255&c.charCodeAt(b+2))<<16;case 2:g^=(255&c.charCodeAt(b+1))<<8;case 1:g=1540483477*(65535&(g^=255&c.charCodeAt(b)))+((1540483477*(g>>>16)&65535)<<16)}return g=1540483477*(65535&(g^=g>>>13))+((1540483477*(g>>>16)&65535)<<16),(g^=g>>>15)>>>0};var xM=$_,N9=bM.exports;Og.exports=xM,Og.exports.murmur3=xM,Og.exports.murmur2=N9;var hS=G(Og.exports);class G0{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(o,d,f,g){this.ids.push(wM(o)),this.positions.push(d,f,g)}getPositions(o){const d=wM(o);let f=0,g=this.ids.length-1;for(;f<g;){const w=f+g>>1;this.ids[w]>=d?g=w:f=w+1}const b=[];for(;this.ids[f]===d;)b.push({index:this.positions[3*f],start:this.positions[3*f+1],end:this.positions[3*f+2]}),f++;return b}static serialize(o,d){const f=new Float64Array(o.ids),g=new Uint32Array(o.positions);return fS(f,g,0,f.length-1),d&&d.push(f.buffer,g.buffer),{ids:f,positions:g}}static deserialize(o){const d=new G0;return d.ids=o.ids,d.positions=o.positions,d.indexed=!0,d}}function wM(c){const o=+c;return!isNaN(o)&&Number.MIN_SAFE_INTEGER<=o&&o<=Number.MAX_SAFE_INTEGER?o:hS(String(c))}function fS(c,o,d,f){for(;d<f;){const g=c[d+f>>1];let b=d-1,w=f+1;for(;;){do b++;while(c[b]<g);do w--;while(c[w]>g);if(b>=w)break;q0(c,b,w),q0(o,3*b,3*w),q0(o,3*b+1,3*w+1),q0(o,3*b+2,3*w+2)}w-d<f-w?(fS(c,o,d,w),d=w+1):(fS(c,o,w+1,f),f=w)}}function q0(c,o,d){const f=c[o];c[o]=c[d],c[d]=f}Tn(G0,"FeaturePositionMap");class Ud{constructor(o){this.gl=o.gl,this.initialized=!1}fetchUniformLocation(o,d){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(o,d),this.initialized=!0),!!this.location}}class K0 extends Ud{constructor(o){super(o),this.current=0}set(o,d,f){this.fetchUniformLocation(o,d)&&this.current!==f&&(this.current=f,this.gl.uniform1f(this.location,f))}}class TM extends Ud{constructor(o){super(o),this.current=[0,0,0,0]}set(o,d,f){this.fetchUniformLocation(o,d)&&(f[0]===this.current[0]&&f[1]===this.current[1]&&f[2]===this.current[2]&&f[3]===this.current[3]||(this.current=f,this.gl.uniform4f(this.location,f[0],f[1],f[2],f[3])))}}class SM extends Ud{constructor(o){super(o),this.current=Ui.transparent}set(o,d,f){this.fetchUniformLocation(o,d)&&(f.r===this.current.r&&f.g===this.current.g&&f.b===this.current.b&&f.a===this.current.a||(this.current=f,this.gl.uniform4f(this.location,f.r,f.g,f.b,f.a)))}}const U9=new Float32Array(16),$9=new Float32Array(9),j9=new Float32Array(4);function mS(c){return[Ue(255*c.r,255*c.g),Ue(255*c.b,255*c.a)]}class j_{constructor(o,d,f){this.value=o,this.uniformNames=d.map((g=>`u_${g}`)),this.type=f}setUniform(o,d,f,g,b){d.set(o,b,g.constantOr(this.value))}getBinding(o,d){return this.type==="color"?new SM(o):new K0(o)}}class Vg{constructor(o,d){this.uniformNames=d.map((f=>`u_${f}`)),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(o){this.pixelRatio=o.pixelRatio||1,this.pattern=o.tl.concat(o.br)}setUniform(o,d,f,g,b){const w=b==="u_pattern"||b==="u_dash"?this.pattern:b==="u_pixel_ratio"?this.pixelRatio:null;w&&d.set(o,b,w)}getBinding(o,d){return d==="u_pattern"||d==="u_dash"?new TM(o):new K0(o)}}class $d{constructor(o,d,f,g){this.expression=o,this.type=f,this.maxValue=0,this.paintVertexAttributes=d.map((b=>({name:`a_${b}`,type:"Float32",components:f==="color"?2:1,offset:0}))),this.paintVertexArray=new g}populatePaintArray(o,d,f,g,b,w){const E=this.paintVertexArray.length,I=this.expression.evaluate(new U(0),d,{},b,g,w);this.paintVertexArray.resize(o),this._setPaintValue(E,o,I)}updatePaintArray(o,d,f,g,b){const w=this.expression.evaluate({zoom:0},f,g,void 0,b);this._setPaintValue(o,d,w)}_setPaintValue(o,d,f){if(this.type==="color"){const g=mS(f);for(let b=o;b<d;b++)this.paintVertexArray.emplace(b,g[0],g[1])}else{for(let g=o;g<d;g++)this.paintVertexArray.emplace(g,f);this.maxValue=Math.max(this.maxValue,Math.abs(f))}}upload(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Qc{constructor(o,d,f,g,b,w){this.expression=o,this.uniformNames=d.map((E=>`u_${E}_t`)),this.type=f,this.useIntegerZoom=g,this.zoom=b,this.maxValue=0,this.paintVertexAttributes=d.map((E=>({name:`a_${E}`,type:"Float32",components:f==="color"?4:2,offset:0}))),this.paintVertexArray=new w}populatePaintArray(o,d,f,g,b,w){const E=this.expression.evaluate(new U(this.zoom),d,{},b,g,w),I=this.expression.evaluate(new U(this.zoom+1),d,{},b,g,w),D=this.paintVertexArray.length;this.paintVertexArray.resize(o),this._setPaintValue(D,o,E,I)}updatePaintArray(o,d,f,g,b){const w=this.expression.evaluate({zoom:this.zoom},f,g,void 0,b),E=this.expression.evaluate({zoom:this.zoom+1},f,g,void 0,b);this._setPaintValue(o,d,w,E)}_setPaintValue(o,d,f,g){if(this.type==="color"){const b=mS(f),w=mS(g);for(let E=o;E<d;E++)this.paintVertexArray.emplace(E,b[0],b[1],w[0],w[1])}else{for(let b=o;b<d;b++)this.paintVertexArray.emplace(b,f,g);this.maxValue=Math.max(this.maxValue,Math.abs(f),Math.abs(g))}}upload(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(o,d,f,g,b){const w=this.useIntegerZoom?Math.floor(f.zoom):f.zoom,E=Le(this.expression.interpolationFactor(w,this.zoom,this.zoom+1),0,1);d.set(o,b,E)}getBinding(o,d){return new K0(o)}}class nf{constructor(o,d,f,g,b){this.expression=o,this.layerId=b,this.paintVertexAttributes=(f==="array"?Nd:Gl).members;for(let w=0;w<d.length;++w);this.paintVertexArray=new g}populatePaintArray(o,d,f){const g=this.paintVertexArray.length;this.paintVertexArray.resize(o),this._setPaintValues(g,o,d.patterns&&d.patterns[this.layerId],f)}updatePaintArray(o,d,f,g,b,w){this._setPaintValues(o,d,f.patterns&&f.patterns[this.layerId],w)}_setPaintValues(o,d,f,g){if(!g||!f)return;const b=g[f];if(!b)return;const{tl:w,br:E,pixelRatio:I}=b;for(let D=o;D<d;D++)this.paintVertexArray.emplace(D,w[0],w[1],E[0],E[1],I)}upload(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class rf{constructor(o,d,f=(()=>!0)){this.binders={},this._buffers=[];const g=[];for(const b in o.paint._values){if(!f(b))continue;const w=o.paint.get(b);if(!(w instanceof we&&Cu(w.property.specification)))continue;const E=H9(b,o.type),I=w.value,D=w.property.specification.type,N=!!w.property.useIntegerZoom,j=b==="line-dasharray"||b.endsWith("pattern"),Q=b==="line-dasharray"&&o.layout.get("line-cap").value.kind!=="constant";if(I.kind!=="constant"||Q)if(I.kind==="source"||Q||j){const ne=EM(b,D,"source");this.binders[b]=j?new nf(I,E,D,ne,o.id):new $d(I,E,D,ne),g.push(`/a_${b}`)}else{const ne=EM(b,D,"composite");this.binders[b]=new Qc(I,E,D,N,d,ne),g.push(`/z_${b}`)}else this.binders[b]=j?new Vg(I.value,E):new j_(I.value,E,D),g.push(`/u_${b}`)}this.cacheKey=g.sort().join("")}getMaxValue(o){const d=this.binders[o];return d instanceof $d||d instanceof Qc?d.maxValue:0}populatePaintArrays(o,d,f,g,b,w){for(const E in this.binders){const I=this.binders[E];(I instanceof $d||I instanceof Qc||I instanceof nf)&&I.populatePaintArray(o,d,f,g,b,w)}}setConstantPatternPositions(o){for(const d in this.binders){const f=this.binders[d];f instanceof Vg&&f.setConstantPatternPositions(o)}}updatePaintArrays(o,d,f,g,b,w){let E=!1;for(const I in o){const D=d.getPositions(I);for(const N of D){const j=f.feature(N.index);for(const Q in this.binders){const ne=this.binders[Q];if((ne instanceof $d||ne instanceof Qc||ne instanceof nf)&&ne.expression.isStateDependent===!0){const ae=g.paint.get(Q);ne.expression=ae.value,ne.updatePaintArray(N.start,N.end,j,o[I],b,w),E=!0}}}}return E}defines(){const o=[];for(const d in this.binders){const f=this.binders[d];(f instanceof j_||f instanceof Vg)&&o.push(...f.uniformNames.map((g=>`#define HAS_UNIFORM_${g}`)))}return o}getBinderAttributes(){const o=[];for(const d in this.binders){const f=this.binders[d];if(f instanceof $d||f instanceof Qc||f instanceof nf)for(let g=0;g<f.paintVertexAttributes.length;g++)o.push(f.paintVertexAttributes[g].name)}return o}getBinderUniforms(){const o=[];for(const d in this.binders){const f=this.binders[d];if(f instanceof j_||f instanceof Vg||f instanceof Qc)for(const g of f.uniformNames)o.push(g)}return o}getPaintVertexBuffers(){return this._buffers}getUniforms(o){const d=[];for(const f in this.binders){const g=this.binders[f];if(g instanceof j_||g instanceof Vg||g instanceof Qc)for(const b of g.uniformNames)d.push({name:b,property:f,binding:g.getBinding(o,b)})}return d}setUniforms(o,d,f,g,b){for(const{name:w,property:E,binding:I}of f)this.binders[E].setUniform(o,I,b,g.get(E),w)}updatePaintBuffers(){this._buffers=[];for(const o in this.binders){const d=this.binders[o];(d instanceof $d||d instanceof Qc||d instanceof nf)&&d.paintVertexBuffer&&this._buffers.push(d.paintVertexBuffer)}}upload(o){for(const d in this.binders){const f=this.binders[d];(f instanceof $d||f instanceof Qc||f instanceof nf)&&f.upload(o)}this.updatePaintBuffers()}destroy(){for(const o in this.binders){const d=this.binders[o];(d instanceof $d||d instanceof Qc||d instanceof nf)&&d.destroy()}}}class jm{constructor(o,d,f=(()=>!0)){this.programConfigurations={};for(const g of o)this.programConfigurations[g.id]=new rf(g,d,f);this.needsUpload=!1,this._featureMap=new G0,this._bufferOffset=0}populatePaintArrays(o,d,f,g,b,w,E){for(const I in this.programConfigurations)this.programConfigurations[I].populatePaintArrays(o,d,g,b,w,E);d.id!==void 0&&this._featureMap.add(d.id,f,this._bufferOffset,o),this._bufferOffset=o,this.needsUpload=!0}updatePaintArrays(o,d,f,g,b){for(const w of f)this.needsUpload=this.programConfigurations[w.id].updatePaintArrays(o,this._featureMap,d,w,g,b)||this.needsUpload}get(o){return this.programConfigurations[o]}upload(o){if(this.needsUpload){for(const d in this.programConfigurations)this.programConfigurations[d].upload(o);this.needsUpload=!1}}destroy(){for(const o in this.programConfigurations)this.programConfigurations[o].destroy()}}const W9={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function H9(c,o){return W9[c]||[c.replace(`${o}-`,"").replace(/-/g,"_")]}const G9={"line-pattern":{source:ft,composite:ft},"fill-pattern":{source:ft,composite:ft},"fill-extrusion-pattern":{source:ft,composite:ft},"line-dasharray":{source:St,composite:St}},q9={color:{source:Ys,composite:Gt},number:{source:Xi,composite:Ys}};function EM(c,o,d){const f=G9[c];return f&&f[d]||q9[o][d]}Tn(j_,"ConstantBinder"),Tn(Vg,"PatternConstantBinder"),Tn($d,"SourceExpressionBinder"),Tn(nf,"PatternCompositeBinder"),Tn(Qc,"CompositeExpressionBinder"),Tn(rf,"ProgramConfiguration",{omit:["_buffers"]}),Tn(jm,"ProgramConfigurationSet");const CM="-transition";class eu extends Fl{constructor(o,d){if(super(),this.id=o.id,this.type=o.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,o.type!=="custom"&&(this.metadata=o.metadata,this.minzoom=o.minzoom,this.maxzoom=o.maxzoom,o.type!=="background"&&o.type!=="sky"&&(this.source=o.source,this.sourceLayer=o["source-layer"],this.filter=o.filter),d.layout&&(this._unevaluatedLayout=new Se(d.layout)),d.paint)){this._transitionablePaint=new le(d.paint);for(const f in o.paint)this.setPaintProperty(f,o.paint[f],{validate:!1});for(const f in o.layout)this.setLayoutProperty(f,o.layout[f],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Ce(d.paint)}}getLayoutProperty(o){return o==="visibility"?this.visibility:this._unevaluatedLayout.getValue(o)}setLayoutProperty(o,d,f={}){d!=null&&this._validate(Bm,`layers.${this.id}.layout.${o}`,o,d,f)||(o!=="visibility"?this._unevaluatedLayout.setValue(o,d):this.visibility=d)}getPaintProperty(o){return xn(o,CM)?this._transitionablePaint.getTransition(o.slice(0,-11)):this._transitionablePaint.getValue(o)}setPaintProperty(o,d,f={}){if(d!=null&&this._validate(Dg,`layers.${this.id}.paint.${o}`,o,d,f))return!1;if(xn(o,CM))return this._transitionablePaint.setTransition(o.slice(0,-11),d||void 0),!1;{const g=this._transitionablePaint._values[o],b=g.value.isDataDriven(),w=g.value;this._transitionablePaint.setValue(o,d),this._handleSpecialPaintPropertyUpdate(o);const E=this._transitionablePaint._values[o].value,I=E.isDataDriven(),D=xn(o,"pattern")||o==="line-dasharray";return I||b||D||this._handleOverridablePaintPropertyUpdate(o,w,E)}}_handleSpecialPaintPropertyUpdate(o){}getProgramIds(){return null}getProgramConfiguration(o){return null}_handleOverridablePaintPropertyUpdate(o,d,f){return!1}isHidden(o){return!!(this.minzoom&&o<this.minzoom)||!!(this.maxzoom&&o>=this.maxzoom)||this.visibility==="none"}updateTransitions(o){this._transitioningPaint=this._transitionablePaint.transitioned(o,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(o,d){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(o,void 0,d)),this.paint=this._transitioningPaint.possiblyEvaluate(o,void 0,d)}serialize(){const o={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(o.layout=o.layout||{},o.layout.visibility=this.visibility),Ae(o,((d,f)=>!(d===void 0||f==="layout"&&!Object.keys(d).length||f==="paint"&&!Object.keys(d).length)))}_validate(o,d,f,g,b={}){return(!b||b.validate!==!1)&&tf(this,o.call(wc,{key:d,layerType:this.type,objectKey:f,value:g,styleSpec:Dt,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const o in this.paint._values){const d=this.paint.get(o);if(d instanceof we&&Cu(d.property.specification)&&(d.value.kind==="source"||d.value.kind==="composite")&&d.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=Zh(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const K9=at([{name:"a_pos",components:2,type:"Int16"}],4),X9=at([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class ds{constructor(o=[]){this.segments=o}prepareSegment(o,d,f,g){let b=this.segments[this.segments.length-1];return o>ds.MAX_VERTEX_ARRAY_LENGTH&&dt(`Max vertices per segment is ${ds.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${o}`),(!b||b.vertexLength+o>ds.MAX_VERTEX_ARRAY_LENGTH||b.sortKey!==g)&&(b={vertexOffset:d.length,primitiveOffset:f.length,vertexLength:0,primitiveLength:0},g!==void 0&&(b.sortKey=g),this.segments.push(b)),b}get(){return this.segments}destroy(){for(const o of this.segments)for(const d in o.vaos)o.vaos[d].destroy()}static simpleSegment(o,d,f,g){return new ds([{vertexOffset:o,primitiveOffset:d,vertexLength:f,primitiveLength:g,vaos:{},sortKey:0}])}}ds.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Tn(ds,"SegmentVector");var zn=8192;class sf{constructor(o,d){o&&(d?this.setSouthWest(o).setNorthEast(d):o.length===4?this.setSouthWest([o[0],o[1]]).setNorthEast([o[2],o[3]]):this.setSouthWest(o[0]).setNorthEast(o[1]))}setNorthEast(o){return this._ne=o instanceof or?new or(o.lng,o.lat):or.convert(o),this}setSouthWest(o){return this._sw=o instanceof or?new or(o.lng,o.lat):or.convert(o),this}extend(o){const d=this._sw,f=this._ne;let g,b;if(o instanceof or)g=o,b=o;else{if(!(o instanceof sf))return Array.isArray(o)?o.length===4||o.every(Array.isArray)?this.extend(sf.convert(o)):this.extend(or.convert(o)):typeof o=="object"&&o!==null&&o.hasOwnProperty("lat")&&(o.hasOwnProperty("lon")||o.hasOwnProperty("lng"))?this.extend(or.convert(o)):this;if(g=o._sw,b=o._ne,!g||!b)return this}return d||f?(d.lng=Math.min(g.lng,d.lng),d.lat=Math.min(g.lat,d.lat),f.lng=Math.max(b.lng,f.lng),f.lat=Math.max(b.lat,f.lat)):(this._sw=new or(g.lng,g.lat),this._ne=new or(b.lng,b.lat)),this}getCenter(){return new or((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new or(this.getWest(),this.getNorth())}getSouthEast(){return new or(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(o){const{lng:d,lat:f}=or.convert(o);let g=this._sw.lng<=d&&d<=this._ne.lng;return this._sw.lng>this._ne.lng&&(g=this._sw.lng>=d&&d>=this._ne.lng),this._sw.lat<=f&&f<=this._ne.lat&&g}static convert(o){return!o||o instanceof sf?o:new sf(o)}}var X0=1e-6,wl=typeof Float32Array<"u"?Float32Array:Array;function kM(){var c=new wl(9);return wl!=Float32Array&&(c[1]=0,c[2]=0,c[3]=0,c[5]=0,c[6]=0,c[7]=0),c[0]=1,c[4]=1,c[8]=1,c}function IM(c,o,d){var f=o[0],g=o[1],b=o[2],w=o[3],E=o[4],I=o[5],D=o[6],N=o[7],j=o[8],Q=d[0],ne=d[1],ae=d[2],de=d[3],Te=d[4],Re=d[5],$e=d[6],Oe=d[7],ze=d[8];return c[0]=Q*f+ne*w+ae*D,c[1]=Q*g+ne*E+ae*N,c[2]=Q*b+ne*I+ae*j,c[3]=de*f+Te*w+Re*D,c[4]=de*g+Te*E+Re*N,c[5]=de*b+Te*I+Re*j,c[6]=$e*f+Oe*w+ze*D,c[7]=$e*g+Oe*E+ze*N,c[8]=$e*b+Oe*I+ze*j,c}function tu(c){return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}function pS(c,o){var d=o[0],f=o[1],g=o[2],b=o[3],w=o[4],E=o[5],I=o[6],D=o[7],N=o[8],j=o[9],Q=o[10],ne=o[11],ae=o[12],de=o[13],Te=o[14],Re=o[15],$e=d*E-f*w,Oe=d*I-g*w,ze=d*D-b*w,Xe=f*I-g*E,qe=f*D-b*E,wt=g*D-b*I,yt=N*de-j*ae,Ot=N*Te-Q*ae,tn=N*Re-ne*ae,kt=j*Te-Q*de,zt=j*Re-ne*de,Nt=Q*Re-ne*Te,Xt=$e*Nt-Oe*zt+ze*kt+Xe*tn-qe*Ot+wt*yt;return Xt?(c[0]=(E*Nt-I*zt+D*kt)*(Xt=1/Xt),c[1]=(g*zt-f*Nt-b*kt)*Xt,c[2]=(de*wt-Te*qe+Re*Xe)*Xt,c[3]=(Q*qe-j*wt-ne*Xe)*Xt,c[4]=(I*tn-w*Nt-D*Ot)*Xt,c[5]=(d*Nt-g*tn+b*Ot)*Xt,c[6]=(Te*ze-ae*wt-Re*Oe)*Xt,c[7]=(N*wt-Q*ze+ne*Oe)*Xt,c[8]=(w*zt-E*tn+D*yt)*Xt,c[9]=(f*tn-d*zt-b*yt)*Xt,c[10]=(ae*qe-de*ze+Re*$e)*Xt,c[11]=(j*ze-N*qe-ne*$e)*Xt,c[12]=(E*Ot-w*kt-I*yt)*Xt,c[13]=(d*kt-f*Ot+g*yt)*Xt,c[14]=(de*Oe-ae*Xe-Te*$e)*Xt,c[15]=(N*Xe-j*Oe+Q*$e)*Xt,c):null}function Wm(c,o,d){var f=o[0],g=o[1],b=o[2],w=o[3],E=o[4],I=o[5],D=o[6],N=o[7],j=o[8],Q=o[9],ne=o[10],ae=o[11],de=o[12],Te=o[13],Re=o[14],$e=o[15],Oe=d[0],ze=d[1],Xe=d[2],qe=d[3];return c[0]=Oe*f+ze*E+Xe*j+qe*de,c[1]=Oe*g+ze*I+Xe*Q+qe*Te,c[2]=Oe*b+ze*D+Xe*ne+qe*Re,c[3]=Oe*w+ze*N+Xe*ae+qe*$e,c[4]=(Oe=d[4])*f+(ze=d[5])*E+(Xe=d[6])*j+(qe=d[7])*de,c[5]=Oe*g+ze*I+Xe*Q+qe*Te,c[6]=Oe*b+ze*D+Xe*ne+qe*Re,c[7]=Oe*w+ze*N+Xe*ae+qe*$e,c[8]=(Oe=d[8])*f+(ze=d[9])*E+(Xe=d[10])*j+(qe=d[11])*de,c[9]=Oe*g+ze*I+Xe*Q+qe*Te,c[10]=Oe*b+ze*D+Xe*ne+qe*Re,c[11]=Oe*w+ze*N+Xe*ae+qe*$e,c[12]=(Oe=d[12])*f+(ze=d[13])*E+(Xe=d[14])*j+(qe=d[15])*de,c[13]=Oe*g+ze*I+Xe*Q+qe*Te,c[14]=Oe*b+ze*D+Xe*ne+qe*Re,c[15]=Oe*w+ze*N+Xe*ae+qe*$e,c}function W_(c,o,d){var f,g,b,w,E,I,D,N,j,Q,ne,ae,de=d[0],Te=d[1],Re=d[2];return o===c?(c[12]=o[0]*de+o[4]*Te+o[8]*Re+o[12],c[13]=o[1]*de+o[5]*Te+o[9]*Re+o[13],c[14]=o[2]*de+o[6]*Te+o[10]*Re+o[14],c[15]=o[3]*de+o[7]*Te+o[11]*Re+o[15]):(g=o[1],b=o[2],w=o[3],E=o[4],I=o[5],D=o[6],N=o[7],j=o[8],Q=o[9],ne=o[10],ae=o[11],c[0]=f=o[0],c[1]=g,c[2]=b,c[3]=w,c[4]=E,c[5]=I,c[6]=D,c[7]=N,c[8]=j,c[9]=Q,c[10]=ne,c[11]=ae,c[12]=f*de+E*Te+j*Re+o[12],c[13]=g*de+I*Te+Q*Re+o[13],c[14]=b*de+D*Te+ne*Re+o[14],c[15]=w*de+N*Te+ae*Re+o[15]),c}function Hm(c,o,d){var f=d[0],g=d[1],b=d[2];return c[0]=o[0]*f,c[1]=o[1]*f,c[2]=o[2]*f,c[3]=o[3]*f,c[4]=o[4]*g,c[5]=o[5]*g,c[6]=o[6]*g,c[7]=o[7]*g,c[8]=o[8]*b,c[9]=o[9]*b,c[10]=o[10]*b,c[11]=o[11]*b,c[12]=o[12],c[13]=o[13],c[14]=o[14],c[15]=o[15],c}function gS(c,o,d){var f=Math.sin(d),g=Math.cos(d),b=o[4],w=o[5],E=o[6],I=o[7],D=o[8],N=o[9],j=o[10],Q=o[11];return o!==c&&(c[0]=o[0],c[1]=o[1],c[2]=o[2],c[3]=o[3],c[12]=o[12],c[13]=o[13],c[14]=o[14],c[15]=o[15]),c[4]=b*g+D*f,c[5]=w*g+N*f,c[6]=E*g+j*f,c[7]=I*g+Q*f,c[8]=D*g-b*f,c[9]=N*g-w*f,c[10]=j*g-E*f,c[11]=Q*g-I*f,c}function Y0(c,o,d){var f=Math.sin(d),g=Math.cos(d),b=o[0],w=o[1],E=o[2],I=o[3],D=o[8],N=o[9],j=o[10],Q=o[11];return o!==c&&(c[4]=o[4],c[5]=o[5],c[6]=o[6],c[7]=o[7],c[12]=o[12],c[13]=o[13],c[14]=o[14],c[15]=o[15]),c[0]=b*g-D*f,c[1]=w*g-N*f,c[2]=E*g-j*f,c[3]=I*g-Q*f,c[8]=b*f+D*g,c[9]=w*f+N*g,c[10]=E*f+j*g,c[11]=I*f+Q*g,c}function AM(c,o){return c[0]=o[0],c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=o[1],c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=o[2],c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}function PM(c,o,d){var f,g,b,w=d[0],E=d[1],I=d[2],D=Math.hypot(w,E,I);return D<X0?null:(w*=D=1/D,E*=D,I*=D,f=Math.sin(o),g=Math.cos(o),c[0]=w*w*(b=1-g)+g,c[1]=E*w*b+I*f,c[2]=I*w*b-E*f,c[3]=0,c[4]=w*E*b-I*f,c[5]=E*E*b+g,c[6]=I*E*b+w*f,c[7]=0,c[8]=w*I*b+E*f,c[9]=E*I*b-w*f,c[10]=I*I*b+g,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c)}Math.hypot||(Math.hypot=function(){for(var c=0,o=arguments.length;o--;)c+=arguments[o]*arguments[o];return Math.sqrt(c)});var Y9=Wm;function vS(){var c=new wl(3);return wl!=Float32Array&&(c[0]=0,c[1]=0,c[2]=0),c}function MM(c){var o=new wl(3);return o[0]=c[0],o[1]=c[1],o[2]=c[2],o}function H_(c){return Math.hypot(c[0],c[1],c[2])}function Bg(c,o,d){var f=new wl(3);return f[0]=c,f[1]=o,f[2]=d,f}function jd(c,o,d){return c[0]=o[0]+d[0],c[1]=o[1]+d[1],c[2]=o[2]+d[2],c}function _S(c,o,d){return c[0]=o[0]-d[0],c[1]=o[1]-d[1],c[2]=o[2]-d[2],c}function DM(c,o,d){return c[0]=o[0]*d[0],c[1]=o[1]*d[1],c[2]=o[2]*d[2],c}function G_(c,o,d){return c[0]=Math.min(o[0],d[0]),c[1]=Math.min(o[1],d[1]),c[2]=Math.min(o[2],d[2]),c}function q_(c,o,d){return c[0]=Math.max(o[0],d[0]),c[1]=Math.max(o[1],d[1]),c[2]=Math.max(o[2],d[2]),c}function ql(c,o,d){return c[0]=o[0]*d,c[1]=o[1]*d,c[2]=o[2]*d,c}function K_(c,o,d,f){return c[0]=o[0]+d[0]*f,c[1]=o[1]+d[1]*f,c[2]=o[2]+d[2]*f,c}function wa(c,o){var d=o[0],f=o[1],g=o[2],b=d*d+f*f+g*g;return b>0&&(b=1/Math.sqrt(b)),c[0]=o[0]*b,c[1]=o[1]*b,c[2]=o[2]*b,c}function Tc(c,o){return c[0]*o[0]+c[1]*o[1]+c[2]*o[2]}function yS(c,o,d){var f=o[0],g=o[1],b=o[2],w=d[0],E=d[1],I=d[2];return c[0]=g*I-b*E,c[1]=b*w-f*I,c[2]=f*E-g*w,c}function as(c,o,d){var f=o[0],g=o[1],b=o[2],w=d[3]*f+d[7]*g+d[11]*b+d[15];return c[0]=(d[0]*f+d[4]*g+d[8]*b+d[12])/(w=w||1),c[1]=(d[1]*f+d[5]*g+d[9]*b+d[13])/w,c[2]=(d[2]*f+d[6]*g+d[10]*b+d[14])/w,c}function LM(c,o,d){var f=d[0],g=d[1],b=d[2],w=o[0],E=o[1],I=o[2],D=g*I-b*E,N=b*w-f*I,j=f*E-g*w,Q=g*j-b*N,ne=b*D-f*j,ae=f*N-g*D,de=2*d[3];return N*=de,j*=de,ne*=2,ae*=2,c[0]=w+(D*=de)+(Q*=2),c[1]=E+N+ne,c[2]=I+j+ae,c}var X_,nu=_S,Z9=DM,J9=H_;function RM(c,o,d){return c[0]=o[0]*d,c[1]=o[1]*d,c[2]=o[2]*d,c[3]=o[3]*d,c}function OM(c,o){var d=o[0],f=o[1],g=o[2],b=o[3],w=d*d+f*f+g*g+b*b;return w>0&&(w=1/Math.sqrt(w)),c[0]=d*w,c[1]=f*w,c[2]=g*w,c[3]=b*w,c}function Gm(c,o,d){var f=o[0],g=o[1],b=o[2],w=o[3];return c[0]=d[0]*f+d[4]*g+d[8]*b+d[12]*w,c[1]=d[1]*f+d[5]*g+d[9]*b+d[13]*w,c[2]=d[2]*f+d[6]*g+d[10]*b+d[14]*w,c[3]=d[3]*f+d[7]*g+d[11]*b+d[15]*w,c}function VM(){var c=new wl(4);return wl!=Float32Array&&(c[0]=0,c[1]=0,c[2]=0),c[3]=1,c}function BM(c){return c[0]=0,c[1]=0,c[2]=0,c[3]=1,c}function FM(c,o,d){d*=.5;var f=o[0],g=o[1],b=o[2],w=o[3],E=Math.sin(d),I=Math.cos(d);return c[0]=f*I+w*E,c[1]=g*I+b*E,c[2]=b*I-g*E,c[3]=w*I-f*E,c}function zM(c,o,d){d*=.5;var f=o[0],g=o[1],b=o[2],w=o[3],E=Math.sin(d),I=Math.cos(d);return c[0]=f*I-b*E,c[1]=g*I+w*E,c[2]=b*I+f*E,c[3]=w*I-g*E,c}vS(),X_=new wl(4),wl!=Float32Array&&(X_[0]=0,X_[1]=0,X_[2]=0,X_[3]=0);var Q9=OM;vS(),Bg(1,0,0),Bg(0,1,0),VM(),VM(),kM();const e2=at([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:NM}=e2,UM=at([{name:"a_pos_3",components:3,type:"Int16"}]);var Y_=at([{name:"a_pos",type:"Int16",components:2}]);class bS{constructor(o,d){this.pos=o,this.dir=d}intersectsPlane(o,d,f){const g=Tc(d,this.dir);if(Math.abs(g)<1e-6)return!1;const b=((o[0]-this.pos[0])*d[0]+(o[1]-this.pos[1])*d[1]+(o[2]-this.pos[2])*d[2])/g;return f[0]=this.pos[0]+this.dir[0]*b,f[1]=this.pos[1]+this.dir[1]*b,f[2]=this.pos[2]+this.dir[2]*b,!0}closestPointOnSphere(o,d,f){if((function(ne,ae){var de=ne[0],Te=ne[1],Re=ne[2],$e=ae[0],Oe=ae[1],ze=ae[2];return Math.abs(de-$e)<=X0*Math.max(1,Math.abs(de),Math.abs($e))&&Math.abs(Te-Oe)<=X0*Math.max(1,Math.abs(Te),Math.abs(Oe))&&Math.abs(Re-ze)<=X0*Math.max(1,Math.abs(Re),Math.abs(ze))})(this.pos,o)||d===0)return f[0]=f[1]=f[2]=0,!1;const[g,b,w]=this.dir,E=this.pos[0]-o[0],I=this.pos[1]-o[1],D=this.pos[2]-o[2],N=g*g+b*b+w*w,j=2*(E*g+I*b+D*w),Q=j*j-4*N*(E*E+I*I+D*D-d*d);if(Q<0){const ne=Math.max(-j/2,0),ae=E+g*ne,de=I+b*ne,Te=D+w*ne,Re=Math.hypot(ae,de,Te);return f[0]=ae*d/Re,f[1]=de*d/Re,f[2]=Te*d/Re,!1}{const ne=(-j-Math.sqrt(Q))/(2*N);if(ne<0){const ae=Math.hypot(E,I,D);return f[0]=E*d/ae,f[1]=I*d/ae,f[2]=D*d/ae,!1}return f[0]=E+g*ne,f[1]=I+b*ne,f[2]=D+w*ne,!0}}}class xS{constructor(o,d,f,g,b){this.TL=o,this.TR=d,this.BR=f,this.BL=g,this.horizon=b}static fromInvProjectionMatrix(o,d,f){const g=[-1,1,1],b=[1,1,1],w=[1,-1,1],E=[-1,-1,1],I=as(g,g,o),D=as(b,b,o),N=as(w,w,o),j=as(E,E,o);return new xS(I,D,N,j,d/f)}}class wS{constructor(o,d){this.points=o,this.planes=d}static fromInvProjectionMatrix(o,d,f,g){const b=Math.pow(2,f),w=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((I=>{const D=Gm([],I,o),N=1/D[3]/d*b;return(function(j,Q,ne){return j[0]=Q[0]*ne[0],j[1]=Q[1]*ne[1],j[2]=Q[2]*ne[2],j[3]=Q[3]*ne[3],j})(D,D,[N,N,g?1/D[3]:N,N])})),E=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((I=>{const D=wa([],yS([],nu([],w[I[0]],w[I[1]]),nu([],w[I[2]],w[I[1]]))),N=-Tc(D,w[I[1]]);return D.concat(N)}));return new wS(w,E)}}class Ta{static fromPoints(o){const d=[1/0,1/0,1/0],f=[-1/0,-1/0,-1/0];for(const g of o)G_(d,d,g),q_(f,f,g);return new Ta(d,f)}static applyTransform(o,d){const f=o.getCorners();for(let g=0;g<f.length;++g)as(f[g],f[g],d);return Ta.fromPoints(f)}constructor(o,d){this.min=o,this.max=d,this.center=ql([],jd([],this.min,this.max),.5)}quadrant(o){const d=[o%2==0,o<2],f=MM(this.min),g=MM(this.max);for(let b=0;b<d.length;b++)f[b]=d[b]?this.min[b]:this.center[b],g[b]=d[b]?this.center[b]:this.max[b];return g[2]=this.max[2],new Ta(f,g)}distanceX(o){return Math.max(Math.min(this.max[0],o[0]),this.min[0])-o[0]}distanceY(o){return Math.max(Math.min(this.max[1],o[1]),this.min[1])-o[1]}distanceZ(o){return Math.max(Math.min(this.max[2],o[2]),this.min[2])-o[2]}getCorners(){const o=this.min,d=this.max;return[[o[0],o[1],o[2]],[d[0],o[1],o[2]],[d[0],d[1],o[2]],[o[0],d[1],o[2]],[o[0],o[1],d[2]],[d[0],o[1],d[2]],[d[0],d[1],d[2]],[o[0],d[1],d[2]]]}intersects(o){const d=this.getCorners();let f=!0;for(let g=0;g<o.planes.length;g++){const b=o.planes[g];let w=0;for(let E=0;E<d.length;E++)w+=Tc(b,d[E])+b[3]>=0;if(w===0)return 0;w!==d.length&&(f=!1)}if(f)return 2;for(let g=0;g<3;g++){let b=Number.MAX_VALUE,w=-Number.MAX_VALUE;for(let E=0;E<o.points.length;E++){const I=o.points[E][g]-this.min[g];b=Math.min(b,I),w=Math.max(w,I)}if(w<0||b>this.max[g]-this.min[g])return 0}return 1}}const TS=5,$M=6,Du=zn/Math.PI/2,t2=16383,qm=64,Z_=[qm,32,16],Sc=-Du,Ec=Du,n2=[new Ta([Sc,Sc,Sc],[Ec,Ec,Ec]),new Ta([Sc,Sc,Sc],[0,0,Ec]),new Ta([0,Sc,Sc],[Ec,0,Ec]),new Ta([Sc,0,Sc],[0,Ec,Ec]),new Ta([0,0,Sc],[Ec,Ec,Ec])];function Z0(c){return c*Du/ey}function jM(c,o,d,f=!0){const g=ql([],c._camera.position,c.worldSize),b=[o,d,1,1];Gm(b,b,c.pixelMatrixInverse),RM(b,b,1/b[3]);const w=wa([],nu([],b,g)),E=c.globeMatrix,I=[E[12],E[13],E[14]],D=nu([],I,g),N=H_(D),j=wa([],D),Q=c.worldSize/(2*Math.PI),ne=Tc(j,w),ae=Math.asin(Q/N);if(ae<Math.acos(ne)){if(!f)return null;const tn=[],kt=[];ql(tn,w,N/ne),wa(kt,nu(kt,tn,D)),wa(w,jd(w,D,ql(w,kt,Math.tan(ae)*N)))}const de=[];new bS(g,w).closestPointOnSphere(I,Q,de);const Te=wa([],Mn(E,0)),Re=wa([],Mn(E,1)),$e=wa([],Mn(E,2)),Oe=Tc(Te,de),ze=Tc(Re,de),Xe=Tc($e,de),qe=ge(Math.asin(-ze/Q));let wt=ge(Math.atan2(Oe,Xe));wt=c.center.lng+(function(tn,kt){const zt=(kt-tn+180)%360-180;return zt<-180?zt+360:zt})(c.center.lng,wt);const yt=Ru(wt),Ot=Le(Ou(qe),0,1);return new Ug(yt,Ot)}class i2{constructor(o,d,f){this.a=nu([],o,f),this.b=nu([],d,f),this.center=f;const g=wa([],this.a),b=wa([],this.b);this.angle=Math.acos(Tc(g,b))}}function SS(c,o){if(c.angle===0)return null;let d;return d=c.a[o]===0?1/c.angle*.5*Math.PI:1/c.angle*Math.atan(c.b[o]/c.a[o]/Math.sin(c.angle)-1/Math.tan(c.angle)),d<0||d>1?null:(function(f,g,b,w){const E=Math.sin(b);return f*(Math.sin((1-w)*b)/E)+g*(Math.sin(w*b)/E)})(c.a[o],c.b[o],c.angle,Le(d,0,1))+c.center[o]}function Lu(c){if(c.z<=1)return n2[c.z+2*c.y+c.x];const o=ES(J0(c));return Ta.fromPoints(o)}function Km(c,o,d){return ql(c,c,1-d),K_(c,c,o,d)}function WM(c,o){const d=Ng(o.zoom);if(d===0)return Lu(c);const f=J0(c),g=ES(f),b=Ru(f.getWest())*o.worldSize,w=Ru(f.getEast())*o.worldSize,E=Ou(f.getNorth())*o.worldSize,I=Ou(f.getSouth())*o.worldSize,D=[b,E,0],N=[w,E,0],j=[b,I,0],Q=[w,I,0],ne=pS([],o.globeMatrix);return as(D,D,ne),as(N,N,ne),as(j,j,ne),as(Q,Q,ne),g[0]=Km(g[0],j,d),g[1]=Km(g[1],Q,d),g[2]=Km(g[2],N,d),g[3]=Km(g[3],D,d),Ta.fromPoints(g)}function HM(c,o,d){for(const f of c)as(f,f,o),ql(f,f,d)}function r2(c,o,d){const f=o/c.worldSize,g=c.globeMatrix;if(d.z<=1){const yt=Lu(d).getCorners();return HM(yt,g,f),Ta.fromPoints(yt)}const b=J0(d),w=ES(b);HM(w,g,f);const E=Number.MAX_VALUE,I=[-E,-E,-E],D=[E,E,E];if(b.contains(c.center)){for(const tn of w)G_(D,D,tn),q_(I,I,tn);I[2]=0;const yt=c.point,Ot=[yt.x*f,yt.y*f,0];return G_(D,D,Ot),q_(I,I,Ot),new Ta(D,I)}const N=[g[12]*f,g[13]*f,g[14]*f],j=b.getCenter(),Q=Le(c.center.lat,-Ro,Ro),ne=Le(j.lat,-Ro,Ro),ae=Ru(c.center.lng),de=Ou(Q);let Te=ae-Ru(j.lng);const Re=de-Ou(ne);Te>.5?Te-=1:Te<-.5&&(Te+=1);let $e=0;Math.abs(Te)>Math.abs(Re)?$e=Te>=0?1:3:($e=Re>=0?0:2,K_(N,N,[g[4]*f,g[5]*f,g[6]*f],-Math.sin(Z(Re>=0?b.getSouth():b.getNorth()))*Du));const Oe=w[$e],ze=w[($e+1)%4],Xe=new i2(Oe,ze,N),qe=[SS(Xe,0)||Oe[0],SS(Xe,1)||Oe[1],SS(Xe,2)||Oe[2]],wt=Ng(c.zoom);if(wt>0){const yt=(function({x:tn,y:kt,z:zt},Nt,Xt,an,Rt){const vn=1/(1<<zt);let Cn=tn*vn,bn=Cn+vn,ii=kt*vn,ln=ii+vn,Vn=0;const ri=(Cn+bn)/2-an;return ri>.5?Vn=-1:ri<-.5&&(Vn=1),Cn=((Cn+Vn)*Nt-(an*=Nt))*Xt+an,bn=((bn+Vn)*Nt-an)*Xt+an,ii=(ii*Nt-(Rt*=Nt))*Xt+Rt,ln=(ln*Nt-Rt)*Xt+Rt,[[Cn,ln,0],[bn,ln,0],[bn,ii,0],[Cn,ii,0]]})(d,o,c._pixelsPerMercatorPixel,ae,de);for(let tn=0;tn<w.length;tn++)Km(w[tn],yt[tn],wt);const Ot=jd([],yt[$e],yt[($e+1)%4]);ql(Ot,Ot,.5),Km(qe,Ot,wt)}for(const yt of w)G_(D,D,yt),q_(I,I,yt);return D[2]=Math.min(Oe[2],ze[2]),G_(D,D,qe),q_(I,I,qe),new Ta(D,I)}function J0({x:c,y:o,z:d}){const f=1/(1<<d),g=new or(Kl(c*f),Lo((o+1)*f)),b=new or(Kl((c+1)*f),Lo(o*f));return new sf(g,b)}function ES(c){const o=Z(c.getNorth()),d=Z(c.getSouth()),f=Math.cos(o),g=Math.cos(d),b=Math.sin(o),w=Math.sin(d),E=c.getWest(),I=c.getEast();return[Fg(g,w,E),Fg(g,w,I),Fg(f,b,I),Fg(f,b,E)]}function Fg(c,o,d,f=Du){return d=Z(d),[c*Math.sin(d)*f,-o*f,c*Math.cos(d)*f]}function zg(c,o,d){return Fg(Math.cos(Z(c)),Math.sin(Z(c)),o,d)}function J_(c,o,d,f){const g=1<<d.z,b=(c/zn+d.x)/g;return zg(Lo((o/zn+d.y)/g),Kl(b),f)}function Q0({min:c,max:o}){return t2/Math.max(o[0]-c[0],o[1]-c[1],o[2]-c[2])}const GM=new Float64Array(16);function Q_(c){const o=Q0(c),d=AM(GM,[o,o,o]);return W_(d,d,((f=[])[0]=-(g=c.min)[0],f[1]=-g[1],f[2]=-g[2],f));var f,g}function CS(c){const o=(f=c.min,(d=GM)[0]=1,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=1,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=1,d[11]=0,d[12]=f[0],d[13]=f[1],d[14]=f[2],d[15]=1,d);var d,f;const g=1/Q0(c);return Hm(o,o,[g,g,g])}function qM(c,o,d,f,g){const b=(function(I){const D=zn/(2*Math.PI);return I/(2*Math.PI)/D})(d),w=[c,o,-d/(2*Math.PI)],E=tu(new Float64Array(16));return W_(E,E,w),Hm(E,E,[b,b,b]),gS(E,E,Z(-g)),Y0(E,E,Z(-f)),E}function Ng(c){return Ze(TS,$M,c)}function KM(c,o){const d=zg(o.lat,o.lng),f=(function(ae){const de=zg(ae._center.lat,ae._center.lng);let Te=yS([],Bg(0,1,0),de);const Re=PM([],-ae.angle,de);Te=as(Te,Te,Re),PM(Re,-ae._pitch,Te);const $e=wa([],de);return ql($e,$e,Z0(ae.cameraToCenterDistance/ae.pixelsPerMeter)),as($e,$e,Re),jd([],de,$e)})(c);return w=(g=_S([],f,d))[0],E=g[1],I=g[2],D=(b=d)[0],N=b[1],j=b[2],ne=(Q=Math.sqrt(w*w+E*E+I*I)*Math.sqrt(D*D+N*N+j*j))&&Tc(g,b)/Q,Math.acos(Math.min(Math.max(ne,-1),1));var g,b,w,E,I,D,N,j,Q,ne}function kS(c,o){return KM(c,o)>Math.PI/2*1.01}const XM=Z(85),s2=Math.cos(XM),o2=Math.sin(XM),ey=63710088e-1,YM=2*Math.PI*ey;class of{constructor(o,d){if(isNaN(o)||isNaN(d))throw new Error(`Invalid LngLat object: (${o}, ${d})`);if(this.lng=+o,this.lat=+d,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new of(Ee(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(o){const d=Math.PI/180,f=this.lat*d,g=o.lat*d,b=Math.sin(f)*Math.sin(g)+Math.cos(f)*Math.cos(g)*Math.cos((o.lng-this.lng)*d);return ey*Math.acos(Math.min(b,1))}toBounds(o=0){const d=360*o/40075017,f=d/Math.cos(Math.PI/180*this.lat);return new sf(new of(this.lng-f,this.lat-d),new of(this.lng+f,this.lat+d))}toEcef(o){const d=Z0(o);return zg(this.lat,this.lng,Du+d)}static convert(o){if(o instanceof of)return o;if(Array.isArray(o)&&(o.length===2||o.length===3))return new of(Number(o[0]),Number(o[1]));if(!Array.isArray(o)&&typeof o=="object"&&o!==null)return new of(Number("lng"in o?o.lng:o.lon),Number(o.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}var or=of;function IS(c){return YM*Math.cos(c*Math.PI/180)}function Ru(c){return(180+c)/360}function Ou(c){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c*Math.PI/360)))/360}function iu(c,o){return c/IS(o)}function Kl(c){return 360*c-180}function Lo(c){return 360/Math.PI*Math.atan(Math.exp((180-360*c)*Math.PI/180))-90}function ZM(c,o){return c*IS(Lo(o))}const Ro=85.051129;function JM(c){return 1/Math.cos(c*Math.PI/180)}class Ug{constructor(o,d,f=0){this.x=+o,this.y=+d,this.z=+f}static fromLngLat(o,d=0){const f=or.convert(o);return new Ug(Ru(f.lng),Ou(f.lat),iu(d,f.lat))}toLngLat(){return new or(Kl(this.x),Lo(this.y))}toAltitude(){return ZM(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/YM*JM(Lo(this.y))}}function AS(c,o,d,f,g,b,w,E,I){const D=(o+f)/2,N=(d+g)/2,j=new X(D,N);E(j),(function(Q,ne,ae,de,Te,Re){const $e=ae-Te,Oe=de-Re;return Math.abs((de-ne)*$e-(ae-Q)*Oe)/Math.hypot($e,Oe)})(j.x,j.y,b.x,b.y,w.x,w.y)>=I?(AS(c,o,d,D,N,b,j,E,I),AS(c,D,N,f,g,j,w,E,I)):c.push(w)}function QM(c,o,d){let f=c[0],g=f.x,b=f.y;o(f);const w=[f];for(let E=1;E<c.length;E++){const I=c[E],{x:D,y:N}=I;o(I),AS(w,g,b,D,N,f,I,o,d),g=D,b=N,f=I}return w}function PS(c,o,d,f){if(f(o,d)){const g=o.add(d)._mult(.5);PS(c,o,g,f),PS(c,g,d,f)}else c.push(d)}function a2(c,o){let d=c[0];const f=[d];for(let g=1;g<c.length;g++){const b=c[g];PS(f,d,b,o),d=b}return f}const MS=Math.pow(2,14)-1,eD=-MS-1;function l2(c,o){const d=Math.round(c.x*o),f=Math.round(c.y*o);return c.x=Le(d,eD,MS),c.y=Le(f,eD,MS),(d<c.x||d>c.x+1||f<c.y||f>c.y+1)&&dt("Geometry exceeds allowed extent, reduce your vector tile buffer size"),c}function Wd(c,o,d){const f=c.loadGeometry(),g=c.extent,b=zn/g;if(o&&d&&d.projection.isReprojectedInTileSpace){const w=1<<o.z,{scale:E,x:I,y:D,projection:N}=d,j=Q=>{const ne=Kl((o.x+Q.x/g)/w),ae=Lo((o.y+Q.y/g)/w),de=N.project(ne,ae);Q.x=(de.x*E-I)*g,Q.y=(de.y*E-D)*g};for(let Q=0;Q<f.length;Q++)if(c.type!==1)f[Q]=QM(f[Q],j,1);else{const ne=[];for(const ae of f[Q])ae.x<0||ae.x>=g||ae.y<0||ae.y>=g||(j(ae),ne.push(ae));f[Q]=ne}}for(const w of f)for(const E of w)l2(E,b);return f}function Xm(c,o){return{type:c.type,id:c.id,properties:c.properties,geometry:o?Wd(c):[]}}function ex(c,o,d,f,g){c.emplaceBack(2*o+(f+1)/2,2*d+(g+1)/2)}function tx(c,o,d){c.emplaceBack(o.x,o.y,o.z,d[0]*16384,d[1]*16384,d[2]*16384)}class DS{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map((d=>d.id)),this.index=o.index,this.hasPattern=!1,this.projection=o.projection,this.layoutVertexArray=new Wt,this.indexArray=new In,this.segments=new ds,this.programConfigurations=new jm(o.layers,o.zoom),this.stateDependentLayerIds=this.layers.filter((d=>d.isStateDependent())).map((d=>d.id))}populate(o,d,f,g){const b=this.layers[0],w=[];let E=null;b.type==="circle"&&(E=b.layout.get("circle-sort-key"));for(const{feature:D,id:N,index:j,sourceLayerIndex:Q}of o){const ne=this.layers[0]._featureFilter.needGeometry,ae=Xm(D,ne);if(!this.layers[0]._featureFilter.filter(new U(this.zoom),ae,f))continue;const de=E?E.evaluate(ae,{},f):void 0,Te={id:N,properties:D.properties,type:D.type,sourceLayerIndex:Q,index:j,geometry:ne?ae.geometry:Wd(D,f,g),patterns:{},sortKey:de};w.push(Te)}E&&w.sort(((D,N)=>D.sortKey-N.sortKey));let I=null;g.projection.name==="globe"&&(this.globeExtVertexArray=new $t,I=g.projection);for(const D of w){const{geometry:N,index:j,sourceLayerIndex:Q}=D,ne=o[j].feature;this.addFeature(D,N,j,d.availableImages,f,I),d.featureIndex.insert(ne,N,j,Q,this.index)}}update(o,d,f,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,d,this.stateDependentLayers,f,g)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,K9.members),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=o.createVertexBuffer(this.globeExtVertexArray,X9.members))),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(o,d,f,g,b,w){for(const E of d)for(const I of E){const D=I.x,N=I.y;if(D<0||D>=zn||N<0||N>=zn)continue;if(w){const ne=w.projectTilePoint(D,N,b),ae=w.upVector(b,D,N),de=this.globeExtVertexArray;tx(de,ne,ae),tx(de,ne,ae),tx(de,ne,ae),tx(de,ne,ae)}const j=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,o.sortKey),Q=j.vertexLength;ex(this.layoutVertexArray,D,N,-1,-1),ex(this.layoutVertexArray,D,N,1,-1),ex(this.layoutVertexArray,D,N,1,1),ex(this.layoutVertexArray,D,N,-1,1),this.indexArray.emplaceBack(Q,Q+1,Q+2),this.indexArray.emplaceBack(Q,Q+2,Q+3),j.vertexLength+=4,j.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,f,{},g,b)}}function tD(c,o){for(let d=0;d<c.length;d++)if(Ym(o,c[d]))return!0;for(let d=0;d<o.length;d++)if(Ym(c,o[d]))return!0;return!!LS(c,o)}function c2(c,o,d){return!!Ym(c,o)||!!RS(o,c,d)}function nD(c,o){if(c.length===1)return rD(o,c[0]);for(let d=0;d<o.length;d++){const f=o[d];for(let g=0;g<f.length;g++)if(Ym(c,f[g]))return!0}for(let d=0;d<c.length;d++)if(rD(o,c[d]))return!0;for(let d=0;d<o.length;d++)if(LS(c,o[d]))return!0;return!1}function u2(c,o,d){if(c.length>1){if(LS(c,o))return!0;for(let f=0;f<o.length;f++)if(RS(o[f],c,d))return!0}for(let f=0;f<c.length;f++)if(RS(c[f],o,d))return!0;return!1}function LS(c,o){if(c.length===0||o.length===0)return!1;for(let d=0;d<c.length-1;d++){const f=c[d],g=c[d+1];for(let b=0;b<o.length-1;b++)if(d2(f,g,o[b],o[b+1]))return!0}return!1}function d2(c,o,d,f){return Qe(c,d,f)!==Qe(o,d,f)&&Qe(c,o,d)!==Qe(c,o,f)}function RS(c,o,d){const f=d*d;if(o.length===1)return c.distSqr(o[0])<f;for(let g=1;g<o.length;g++)if(iD(c,o[g-1],o[g])<f)return!0;return!1}function iD(c,o,d){const f=o.distSqr(d);if(f===0)return c.distSqr(o);const g=((c.x-o.x)*(d.x-o.x)+(c.y-o.y)*(d.y-o.y))/f;return c.distSqr(g<0?o:g>1?d:d.sub(o)._mult(g)._add(o))}function rD(c,o){let d,f,g,b=!1;for(let w=0;w<c.length;w++){d=c[w];for(let E=0,I=d.length-1;E<d.length;I=E++)f=d[E],g=d[I],f.y>o.y!=g.y>o.y&&o.x<(g.x-f.x)*(o.y-f.y)/(g.y-f.y)+f.x&&(b=!b)}return b}function Ym(c,o){let d=!1;for(let f=0,g=c.length-1;f<c.length;g=f++){const b=c[f],w=c[g];b.y>o.y!=w.y>o.y&&o.x<(w.x-b.x)*(o.y-b.y)/(w.y-b.y)+b.x&&(d=!d)}return d}function sD(c,o,d,f,g){for(const w of c)if(o<=w.x&&d<=w.y&&f>=w.x&&g>=w.y)return!0;const b=[new X(o,d),new X(o,g),new X(f,g),new X(f,d)];if(c.length>2){for(const w of b)if(Ym(c,w))return!0}for(let w=0;w<c.length-1;w++)if(h2(c[w],c[w+1],b))return!0;return!1}function h2(c,o,d){const f=d[0],g=d[2];if(c.x<f.x&&o.x<f.x||c.x>g.x&&o.x>g.x||c.y<f.y&&o.y<f.y||c.y>g.y&&o.y>g.y)return!1;const b=Qe(c,o,d[0]);return b!==Qe(c,o,d[1])||b!==Qe(c,o,d[2])||b!==Qe(c,o,d[3])}function $g(c,o,d){const f=o.paint.get(c).value;return f.kind==="constant"?f.value:d.programConfigurations.get(o.id).getMaxValue(c)}function nx(c){return Math.sqrt(c[0]*c[0]+c[1]*c[1])}function oD(c,o,d,f,g){if(!o[0]&&!o[1])return c;const b=X.convert(o)._mult(g);d==="viewport"&&b._rotate(-f);const w=[];for(let E=0;E<c.length;E++)w.push(c[E].sub(b));return w}function aD(c,o,d,f){const g=X.convert(c)._mult(f);return o==="viewport"&&g._rotate(-d),g}Tn(DS,"CircleBucket",{omit:["layers"]});const f2=new De({"circle-sort-key":new ye(Dt.layout_circle["circle-sort-key"])});var m2={paint:new De({"circle-radius":new ye(Dt.paint_circle["circle-radius"]),"circle-color":new ye(Dt.paint_circle["circle-color"]),"circle-blur":new ye(Dt.paint_circle["circle-blur"]),"circle-opacity":new ye(Dt.paint_circle["circle-opacity"]),"circle-translate":new ce(Dt.paint_circle["circle-translate"]),"circle-translate-anchor":new ce(Dt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new ce(Dt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new ce(Dt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new ye(Dt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new ye(Dt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new ye(Dt.paint_circle["circle-stroke-opacity"])}),layout:f2};function lD(c,o,d,f,g,b,w,E,I){if(b&&c.queryGeometry.isAboveHorizon)return!1;b&&(I*=c.pixelToTileUnitsFactor);const D=c.tileID.canonical,N=d.projection.upVectorScale(D,d.center.lat,d.worldSize).metersToTile;for(const j of o)for(const Q of j){const ne=Q.add(E),ae=g&&d.elevation?d.elevation.exaggeration()*g.getElevationAt(ne.x,ne.y,!0):0,de=d.projection.projectTilePoint(ne.x,ne.y,D);if(ae>0){const Oe=d.projection.upVector(D,ne.x,ne.y);de.x+=Oe[0]*N*ae,de.y+=Oe[1]*N*ae,de.z+=Oe[2]*N*ae}const Te=b?ne:p2(de.x,de.y,de.z,f),Re=b?c.tilespaceRays.map((Oe=>v2(Oe,ae))):c.queryGeometry.screenGeometry,$e=Gm([],[de.x,de.y,de.z,1],f);if(!w&&b?I*=$e[3]/d.cameraToCenterDistance:w&&!b&&(I*=d.cameraToCenterDistance/$e[3]),b){const Oe=Lo((Q.y/zn+D.y)/(1<<D.z));I/=d.projection.pixelsPerMeter(Oe,1)/iu(1,Oe)}if(c2(Re,Te,I))return!0}return!1}function p2(c,o,d,f){const g=Gm([],[c,o,d,1],f);return new X(g[0]/g[3],g[1]/g[3])}const cD=Bg(0,0,0),g2=Bg(0,0,1);function v2(c,o){const d=vS();return cD[2]=o,c.intersectsPlane(cD,g2,d),new X(d[0],d[1])}class uD extends DS{}function dD(c,{width:o,height:d},f,g){if(g){if(g instanceof Uint8ClampedArray)g=new Uint8Array(g.buffer);else if(g.length!==o*d*f)throw new RangeError("mismatched image size")}else g=new Uint8Array(o*d*f);return c.width=o,c.height=d,c.data=g,c}function hD(c,o,d){const{width:f,height:g}=o;f===c.width&&g===c.height||(OS(c,o,{x:0,y:0},{x:0,y:0},{width:Math.min(c.width,f),height:Math.min(c.height,g)},d),c.width=f,c.height=g,c.data=o.data)}function OS(c,o,d,f,g,b){if(g.width===0||g.height===0)return o;if(g.width>c.width||g.height>c.height||d.x>c.width-g.width||d.y>c.height-g.height)throw new RangeError("out of range source coordinates for image copy");if(g.width>o.width||g.height>o.height||f.x>o.width-g.width||f.y>o.height-g.height)throw new RangeError("out of range destination coordinates for image copy");const w=c.data,E=o.data;for(let I=0;I<g.height;I++){const D=((d.y+I)*c.width+d.x)*b,N=((f.y+I)*o.width+f.x)*b;for(let j=0;j<g.width*b;j++)E[N+j]=w[D+j]}return o}Tn(uD,"HeatmapBucket",{omit:["layers"]});class Hd{constructor(o,d){dD(this,o,1,d)}resize(o){hD(this,new Hd(o),1)}clone(){return new Hd({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(o,d,f,g,b){OS(o,d,f,g,b,1)}}class Tl{constructor(o,d){dD(this,o,4,d)}resize(o){hD(this,new Tl(o),4)}replace(o,d){d?this.data.set(o):this.data=o instanceof Uint8ClampedArray?new Uint8Array(o.buffer):o}clone(){return new Tl({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(o,d,f,g,b){OS(o,d,f,g,b,4)}}Tn(Hd,"AlphaImage"),Tn(Tl,"RGBAImage");var _2={paint:new De({"heatmap-radius":new ye(Dt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new ye(Dt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new ce(Dt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Pe(Dt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new ce(Dt.paint_heatmap["heatmap-opacity"])})};function VS(c){const o={},d=c.resolution||256,f=c.clips?c.clips.length:1,g=c.image||new Tl({width:d,height:f}),b=(w,E,I)=>{o[c.evaluationKey]=I;const D=c.expression.evaluate(o);g.data[w+E+0]=Math.floor(255*D.r/D.a),g.data[w+E+1]=Math.floor(255*D.g/D.a),g.data[w+E+2]=Math.floor(255*D.b/D.a),g.data[w+E+3]=Math.floor(255*D.a)};if(c.clips)for(let w=0,E=0;w<f;++w,E+=4*d)for(let I=0,D=0;I<d;I++,D+=4){const N=I/(d-1),{start:j,end:Q}=c.clips[w];b(E,D,j*(1-N)+Q*N)}else for(let w=0,E=0;w<d;w++,E+=4)b(0,E,w/(d-1));return g}var y2={paint:new De({"hillshade-illumination-direction":new ce(Dt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new ce(Dt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new ce(Dt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new ce(Dt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new ce(Dt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new ce(Dt.paint_hillshade["hillshade-accent-color"])})};const b2=at([{name:"a_pos",components:2,type:"Int16"}],4),{members:x2}=b2;var BS={exports:{}};function ix(c,o,d){d=d||2;var f,g,b,w,E,I,D,N=o&&o.length,j=N?o[0]*d:c.length,Q=fD(c,0,j,d,!0),ne=[];if(!Q||Q.next===Q.prev)return ne;if(N&&(Q=(function(de,Te,Re,$e){var Oe,ze,Xe,qe=[];for(Oe=0,ze=Te.length;Oe<ze;Oe++)(Xe=fD(de,Te[Oe]*$e,Oe<ze-1?Te[Oe+1]*$e:de.length,$e,!1))===Xe.next&&(Xe.steiner=!0),qe.push(A2(Xe));for(qe.sort(C2),Oe=0;Oe<qe.length;Oe++)Re=k2(qe[Oe],Re);return Re})(c,o,Q,d)),c.length>80*d){f=b=c[0],g=w=c[1];for(var ae=d;ae<j;ae+=d)(E=c[ae])<f&&(f=E),(I=c[ae+1])<g&&(g=I),E>b&&(b=E),I>w&&(w=I);D=(D=Math.max(b-f,w-g))!==0?32767/D:0}return ty(Q,ne,d,f,g,D,0),ne}function fD(c,o,d,f,g){var b,w;if(g===NS(c,o,d,f)>0)for(b=o;b<d;b+=f)w=gD(b,c[b],c[b+1],w);else for(b=d-f;b>=o;b-=f)w=gD(b,c[b],c[b+1],w);return w&&rx(w,w.next)&&(iy(w),w=w.next),w}function Zm(c,o){if(!c)return c;o||(o=c);var d,f=c;do if(d=!1,f.steiner||!rx(f,f.next)&&hs(f.prev,f,f.next)!==0)f=f.next;else{if(iy(f),(f=o=f.prev)===f.next)break;d=!0}while(d||f!==o);return o}function ty(c,o,d,f,g,b,w){if(c){!w&&b&&(function(N,j,Q,ne){var ae=N;do ae.z===0&&(ae.z=FS(ae.x,ae.y,j,Q,ne)),ae.prevZ=ae.prev,ae.nextZ=ae.next,ae=ae.next;while(ae!==N);ae.prevZ.nextZ=null,ae.prevZ=null,(function(de){var Te,Re,$e,Oe,ze,Xe,qe,wt,yt=1;do{for(Re=de,de=null,ze=null,Xe=0;Re;){for(Xe++,$e=Re,qe=0,Te=0;Te<yt&&(qe++,$e=$e.nextZ);Te++);for(wt=yt;qe>0||wt>0&&$e;)qe!==0&&(wt===0||!$e||Re.z<=$e.z)?(Oe=Re,Re=Re.nextZ,qe--):(Oe=$e,$e=$e.nextZ,wt--),ze?ze.nextZ=Oe:de=Oe,Oe.prevZ=ze,ze=Oe;Re=$e}ze.nextZ=null,yt*=2}while(Xe>1)})(ae)})(c,f,g,b);for(var E,I,D=c;c.prev!==c.next;)if(E=c.prev,I=c.next,b?T2(c,f,g,b):w2(c))o.push(E.i/d|0),o.push(c.i/d|0),o.push(I.i/d|0),iy(c),c=I.next,D=I.next;else if((c=I)===D){w?w===1?ty(c=S2(Zm(c),o,d),o,d,f,g,b,2):w===2&&E2(c,o,d,f,g,b):ty(Zm(c),o,d,f,g,b,1);break}}}function w2(c){var o=c.prev,d=c,f=c.next;if(hs(o,d,f)>=0)return!1;for(var g=o.x,b=d.x,w=f.x,E=o.y,I=d.y,D=f.y,N=g<b?g<w?g:w:b<w?b:w,j=E<I?E<D?E:D:I<D?I:D,Q=g>b?g>w?g:w:b>w?b:w,ne=E>I?E>D?E:D:I>D?I:D,ae=f.next;ae!==o;){if(ae.x>=N&&ae.x<=Q&&ae.y>=j&&ae.y<=ne&&jg(g,E,b,I,w,D,ae.x,ae.y)&&hs(ae.prev,ae,ae.next)>=0)return!1;ae=ae.next}return!0}function T2(c,o,d,f){var g=c.prev,b=c,w=c.next;if(hs(g,b,w)>=0)return!1;for(var E=g.x,I=b.x,D=w.x,N=g.y,j=b.y,Q=w.y,ne=E<I?E<D?E:D:I<D?I:D,ae=N<j?N<Q?N:Q:j<Q?j:Q,de=E>I?E>D?E:D:I>D?I:D,Te=N>j?N>Q?N:Q:j>Q?j:Q,Re=FS(ne,ae,o,d,f),$e=FS(de,Te,o,d,f),Oe=c.prevZ,ze=c.nextZ;Oe&&Oe.z>=Re&&ze&&ze.z<=$e;){if(Oe.x>=ne&&Oe.x<=de&&Oe.y>=ae&&Oe.y<=Te&&Oe!==g&&Oe!==w&&jg(E,N,I,j,D,Q,Oe.x,Oe.y)&&hs(Oe.prev,Oe,Oe.next)>=0||(Oe=Oe.prevZ,ze.x>=ne&&ze.x<=de&&ze.y>=ae&&ze.y<=Te&&ze!==g&&ze!==w&&jg(E,N,I,j,D,Q,ze.x,ze.y)&&hs(ze.prev,ze,ze.next)>=0))return!1;ze=ze.nextZ}for(;Oe&&Oe.z>=Re;){if(Oe.x>=ne&&Oe.x<=de&&Oe.y>=ae&&Oe.y<=Te&&Oe!==g&&Oe!==w&&jg(E,N,I,j,D,Q,Oe.x,Oe.y)&&hs(Oe.prev,Oe,Oe.next)>=0)return!1;Oe=Oe.prevZ}for(;ze&&ze.z<=$e;){if(ze.x>=ne&&ze.x<=de&&ze.y>=ae&&ze.y<=Te&&ze!==g&&ze!==w&&jg(E,N,I,j,D,Q,ze.x,ze.y)&&hs(ze.prev,ze,ze.next)>=0)return!1;ze=ze.nextZ}return!0}function S2(c,o,d){var f=c;do{var g=f.prev,b=f.next.next;!rx(g,b)&&mD(g,f,f.next,b)&&ny(g,b)&&ny(b,g)&&(o.push(g.i/d|0),o.push(f.i/d|0),o.push(b.i/d|0),iy(f),iy(f.next),f=c=b),f=f.next}while(f!==c);return Zm(f)}function E2(c,o,d,f,g,b){var w=c;do{for(var E=w.next.next;E!==w.prev;){if(w.i!==E.i&&P2(w,E)){var I=pD(w,E);return w=Zm(w,w.next),I=Zm(I,I.next),ty(w,o,d,f,g,b,0),void ty(I,o,d,f,g,b,0)}E=E.next}w=w.next}while(w!==c)}function C2(c,o){return c.x-o.x}function k2(c,o){var d=(function(g,b){var w,E=b,I=g.x,D=g.y,N=-1/0;do{if(D<=E.y&&D>=E.next.y&&E.next.y!==E.y){var j=E.x+(D-E.y)*(E.next.x-E.x)/(E.next.y-E.y);if(j<=I&&j>N&&(N=j,w=E.x<E.next.x?E:E.next,j===I))return w}E=E.next}while(E!==b);if(!w)return null;var Q,ne=w,ae=w.x,de=w.y,Te=1/0;E=w;do I>=E.x&&E.x>=ae&&I!==E.x&&jg(D<de?I:N,D,ae,de,D<de?N:I,D,E.x,E.y)&&(Q=Math.abs(D-E.y)/(I-E.x),ny(E,g)&&(Q<Te||Q===Te&&(E.x>w.x||E.x===w.x&&I2(w,E)))&&(w=E,Te=Q)),E=E.next;while(E!==ne);return w})(c,o);if(!d)return o;var f=pD(d,c);return Zm(f,f.next),Zm(d,d.next)}function I2(c,o){return hs(c.prev,c,o.prev)<0&&hs(o.next,c,c.next)<0}function FS(c,o,d,f,g){return(c=1431655765&((c=858993459&((c=252645135&((c=16711935&((c=(c-d)*g|0)|c<<8))|c<<4))|c<<2))|c<<1))|(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-f)*g|0)|o<<8))|o<<4))|o<<2))|o<<1))<<1}function A2(c){var o=c,d=c;do(o.x<d.x||o.x===d.x&&o.y<d.y)&&(d=o),o=o.next;while(o!==c);return d}function jg(c,o,d,f,g,b,w,E){return(g-w)*(o-E)>=(c-w)*(b-E)&&(c-w)*(f-E)>=(d-w)*(o-E)&&(d-w)*(b-E)>=(g-w)*(f-E)}function P2(c,o){return c.next.i!==o.i&&c.prev.i!==o.i&&!(function(d,f){var g=d;do{if(g.i!==d.i&&g.next.i!==d.i&&g.i!==f.i&&g.next.i!==f.i&&mD(g,g.next,d,f))return!0;g=g.next}while(g!==d);return!1})(c,o)&&(ny(c,o)&&ny(o,c)&&(function(d,f){var g=d,b=!1,w=(d.x+f.x)/2,E=(d.y+f.y)/2;do g.y>E!=g.next.y>E&&g.next.y!==g.y&&w<(g.next.x-g.x)*(E-g.y)/(g.next.y-g.y)+g.x&&(b=!b),g=g.next;while(g!==d);return b})(c,o)&&(hs(c.prev,c,o.prev)||hs(c,o.prev,o))||rx(c,o)&&hs(c.prev,c,c.next)>0&&hs(o.prev,o,o.next)>0)}function hs(c,o,d){return(o.y-c.y)*(d.x-o.x)-(o.x-c.x)*(d.y-o.y)}function rx(c,o){return c.x===o.x&&c.y===o.y}function mD(c,o,d,f){var g=ox(hs(c,o,d)),b=ox(hs(c,o,f)),w=ox(hs(d,f,c)),E=ox(hs(d,f,o));return g!==b&&w!==E||!(g!==0||!sx(c,d,o))||!(b!==0||!sx(c,f,o))||!(w!==0||!sx(d,c,f))||!(E!==0||!sx(d,o,f))}function sx(c,o,d){return o.x<=Math.max(c.x,d.x)&&o.x>=Math.min(c.x,d.x)&&o.y<=Math.max(c.y,d.y)&&o.y>=Math.min(c.y,d.y)}function ox(c){return c>0?1:c<0?-1:0}function ny(c,o){return hs(c.prev,c,c.next)<0?hs(c,o,c.next)>=0&&hs(c,c.prev,o)>=0:hs(c,o,c.prev)<0||hs(c,c.next,o)<0}function pD(c,o){var d=new zS(c.i,c.x,c.y),f=new zS(o.i,o.x,o.y),g=c.next,b=o.prev;return c.next=o,o.prev=c,d.next=g,g.prev=d,f.next=d,d.prev=f,b.next=f,f.prev=b,f}function gD(c,o,d,f){var g=new zS(c,o,d);return f?(g.next=f.next,g.prev=f,f.next.prev=g,f.next=g):(g.prev=g,g.next=g),g}function iy(c){c.next.prev=c.prev,c.prev.next=c.next,c.prevZ&&(c.prevZ.nextZ=c.nextZ),c.nextZ&&(c.nextZ.prevZ=c.prevZ)}function zS(c,o,d){this.i=c,this.x=o,this.y=d,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function NS(c,o,d,f){for(var g=0,b=o,w=d-f;b<d;b+=f)g+=(c[w]-c[b])*(c[b+1]+c[w+1]),w=b;return g}BS.exports=ix,BS.exports.default=ix,ix.deviation=function(c,o,d,f){var g=o&&o.length,b=Math.abs(NS(c,0,g?o[0]*d:c.length,d));if(g)for(var w=0,E=o.length;w<E;w++)b-=Math.abs(NS(c,o[w]*d,w<E-1?o[w+1]*d:c.length,d));var I=0;for(w=0;w<f.length;w+=3){var D=f[w]*d,N=f[w+1]*d,j=f[w+2]*d;I+=Math.abs((c[D]-c[j])*(c[N+1]-c[D+1])-(c[D]-c[N])*(c[j+1]-c[D+1]))}return b===0&&I===0?0:Math.abs((I-b)/b)},ix.flatten=function(c){for(var o=c[0][0].length,d={vertices:[],holes:[],dimensions:o},f=0,g=0;g<c.length;g++){for(var b=0;b<c[g].length;b++)for(var w=0;w<o;w++)d.vertices.push(c[g][b][w]);g>0&&d.holes.push(f+=c[g-1].length)}return d};var US=G(BS.exports);function M2(c,o,d,f,g){vD(c,o,d,f||c.length-1,g||D2)}function vD(c,o,d,f,g){for(;f>d;){if(f-d>600){var b=f-d+1,w=o-d+1,E=Math.log(b),I=.5*Math.exp(2*E/3),D=.5*Math.sqrt(E*I*(b-I)/b)*(w-b/2<0?-1:1);vD(c,o,Math.max(d,Math.floor(o-w*I/b+D)),Math.min(f,Math.floor(o+(b-w)*I/b+D)),g)}var N=c[o],j=d,Q=f;for(ry(c,d,o),g(c[f],N)>0&&ry(c,d,f);j<Q;){for(ry(c,j,Q),j++,Q--;g(c[j],N)<0;)j++;for(;g(c[Q],N)>0;)Q--}g(c[d],N)===0?ry(c,d,Q):ry(c,++Q,f),Q<=o&&(d=Q+1),o<=Q&&(f=Q-1)}}function ry(c,o,d){var f=c[o];c[o]=c[d],c[d]=f}function D2(c,o){return c<o?-1:c>o?1:0}function $S(c,o){const d=c.length;if(d<=1)return[c];const f=[];let g,b;for(let w=0;w<d;w++){const E=Ct(c[w]);E!==0&&(c[w].area=Math.abs(E),b===void 0&&(b=E<0),b===E<0?(g&&f.push(g),g=[c[w]]):g.push(c[w]))}if(g&&f.push(g),o>1)for(let w=0;w<f.length;w++)f[w].length<=o||(M2(f[w],o,1,f[w].length-1,L2),f[w]=f[w].slice(0,o));return f}function L2(c,o){return o.area-c.area}function jS(c,o,d){const f=d.patternDependencies;let g=!1;for(const b of o){const w=b.paint.get(`${c}-pattern`);w.isConstant()||(g=!0);const E=w.constantOr(null);E&&(g=!0,f[E]=!0)}return g}function WS(c,o,d,f,g){const b=g.patternDependencies;for(const w of o){const E=w.paint.get(`${c}-pattern`).value;if(E.kind!=="constant"){let I=E.evaluate({zoom:f},d,{},g.availableImages);I=I&&I.name?I.name:I,b[I]=!0,d.patterns[w.id]=I}}return d}class ax{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map((d=>d.id)),this.index=o.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Wt,this.indexArray=new In,this.indexArray2=new Is,this.programConfigurations=new jm(o.layers,o.zoom),this.segments=new ds,this.segments2=new ds,this.stateDependentLayerIds=this.layers.filter((d=>d.isStateDependent())).map((d=>d.id)),this.projection=o.projection}populate(o,d,f,g){this.hasPattern=jS("fill",this.layers,d);const b=this.layers[0].layout.get("fill-sort-key"),w=[];for(const{feature:E,id:I,index:D,sourceLayerIndex:N}of o){const j=this.layers[0]._featureFilter.needGeometry,Q=Xm(E,j);if(!this.layers[0]._featureFilter.filter(new U(this.zoom),Q,f))continue;const ne=b?b.evaluate(Q,{},f,d.availableImages):void 0,ae={id:I,properties:E.properties,type:E.type,sourceLayerIndex:N,index:D,geometry:j?Q.geometry:Wd(E,f,g),patterns:{},sortKey:ne};w.push(ae)}b&&w.sort(((E,I)=>E.sortKey-I.sortKey));for(const E of w){const{geometry:I,index:D,sourceLayerIndex:N}=E;if(this.hasPattern){const j=WS("fill",this.layers,E,this.zoom,d);this.patternFeatures.push(j)}else this.addFeature(E,I,D,f,{},d.availableImages);d.featureIndex.insert(o[D].feature,I,D,N,this.index)}}update(o,d,f,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,d,this.stateDependentLayers,f,g)}addFeatures(o,d,f,g,b){for(const w of this.patternFeatures)this.addFeature(w,w.geometry,w.index,d,f,g)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,x2),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.indexBuffer2=o.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(o,d,f,g,b,w=[]){for(const E of $S(d,500)){let I=0;for(const ae of E)I+=ae.length;const D=this.segments.prepareSegment(I,this.layoutVertexArray,this.indexArray),N=D.vertexLength,j=[],Q=[];for(const ae of E){if(ae.length===0)continue;ae!==E[0]&&Q.push(j.length/2);const de=this.segments2.prepareSegment(ae.length,this.layoutVertexArray,this.indexArray2),Te=de.vertexLength;this.layoutVertexArray.emplaceBack(ae[0].x,ae[0].y),this.indexArray2.emplaceBack(Te+ae.length-1,Te),j.push(ae[0].x),j.push(ae[0].y);for(let Re=1;Re<ae.length;Re++)this.layoutVertexArray.emplaceBack(ae[Re].x,ae[Re].y),this.indexArray2.emplaceBack(Te+Re-1,Te+Re),j.push(ae[Re].x),j.push(ae[Re].y);de.vertexLength+=ae.length,de.primitiveLength+=ae.length}const ne=US(j,Q);for(let ae=0;ae<ne.length;ae+=3)this.indexArray.emplaceBack(N+ne[ae],N+ne[ae+1],N+ne[ae+2]);D.vertexLength+=I,D.primitiveLength+=ne.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,f,b,w,g)}}Tn(ax,"FillBucket",{omit:["layers","patternFeatures"]});const R2=new De({"fill-sort-key":new ye(Dt.layout_fill["fill-sort-key"])});var O2={paint:new De({"fill-antialias":new ce(Dt.paint_fill["fill-antialias"]),"fill-opacity":new ye(Dt.paint_fill["fill-opacity"]),"fill-color":new ye(Dt.paint_fill["fill-color"]),"fill-outline-color":new ye(Dt.paint_fill["fill-outline-color"]),"fill-translate":new ce(Dt.paint_fill["fill-translate"]),"fill-translate-anchor":new ce(Dt.paint_fill["fill-translate-anchor"]),"fill-pattern":new ye(Dt.paint_fill["fill-pattern"])}),layout:R2};const V2=at([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),B2=at([{name:"a_centroid_pos",components:2,type:"Uint16"}]),F2=at([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:z2}=V2;var lx={},N2=$,_D=Wg;function Wg(c,o,d,f,g){this.properties={},this.extent=d,this.type=0,this._pbf=c,this._geometry=-1,this._keys=f,this._values=g,c.readFields(U2,this,o)}function U2(c,o,d){c==1?o.id=d.readVarint():c==2?(function(f,g){for(var b=f.readVarint()+f.pos;f.pos<b;){var w=g._keys[f.readVarint()],E=g._values[f.readVarint()];g.properties[w]=E}})(d,o):c==3?o.type=d.readVarint():c==4&&(o._geometry=d.pos)}function $2(c){for(var o,d,f=0,g=0,b=c.length,w=b-1;g<b;w=g++)f+=((d=c[w]).x-(o=c[g]).x)*(o.y+d.y);return f}Wg.types=["Unknown","Point","LineString","Polygon"],Wg.prototype.loadGeometry=function(){var c=this._pbf;c.pos=this._geometry;for(var o,d=c.readVarint()+c.pos,f=1,g=0,b=0,w=0,E=[];c.pos<d;){if(g<=0){var I=c.readVarint();f=7&I,g=I>>3}if(g--,f===1||f===2)b+=c.readSVarint(),w+=c.readSVarint(),f===1&&(o&&E.push(o),o=[]),o.push(new N2(b,w));else{if(f!==7)throw new Error("unknown command "+f);o&&o.push(o[0].clone())}}return o&&E.push(o),E},Wg.prototype.bbox=function(){var c=this._pbf;c.pos=this._geometry;for(var o=c.readVarint()+c.pos,d=1,f=0,g=0,b=0,w=1/0,E=-1/0,I=1/0,D=-1/0;c.pos<o;){if(f<=0){var N=c.readVarint();d=7&N,f=N>>3}if(f--,d===1||d===2)(g+=c.readSVarint())<w&&(w=g),g>E&&(E=g),(b+=c.readSVarint())<I&&(I=b),b>D&&(D=b);else if(d!==7)throw new Error("unknown command "+d)}return[w,I,E,D]},Wg.prototype.toGeoJSON=function(c,o,d){var f,g,b=this.extent*Math.pow(2,d),w=this.extent*c,E=this.extent*o,I=this.loadGeometry(),D=Wg.types[this.type];function N(ne){for(var ae=0;ae<ne.length;ae++){var de=ne[ae];ne[ae]=[360*(de.x+w)/b-180,360/Math.PI*Math.atan(Math.exp((180-360*(de.y+E)/b)*Math.PI/180))-90]}}switch(this.type){case 1:var j=[];for(f=0;f<I.length;f++)j[f]=I[f][0];N(I=j);break;case 2:for(f=0;f<I.length;f++)N(I[f]);break;case 3:for(I=(function(ne){var ae=ne.length;if(ae<=1)return[ne];for(var de,Te,Re=[],$e=0;$e<ae;$e++){var Oe=$2(ne[$e]);Oe!==0&&(Te===void 0&&(Te=Oe<0),Te===Oe<0?(de&&Re.push(de),de=[ne[$e]]):de.push(ne[$e]))}return de&&Re.push(de),Re})(I),f=0;f<I.length;f++)for(g=0;g<I[f].length;g++)N(I[f][g])}I.length===1?I=I[0]:D="Multi"+D;var Q={type:"Feature",geometry:{type:D,coordinates:I},properties:this.properties};return"id"in this&&(Q.id=this.id),Q};var j2=_D,yD=bD;function bD(c,o){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=c,this._keys=[],this._values=[],this._features=[],c.readFields(W2,this,o),this.length=this._features.length}function W2(c,o,d){c===15?o.version=d.readVarint():c===1?o.name=d.readString():c===5?o.extent=d.readVarint():c===2?o._features.push(d.pos):c===3?o._keys.push(d.readString()):c===4&&o._values.push((function(f){for(var g=null,b=f.readVarint()+f.pos;f.pos<b;){var w=f.readVarint()>>3;g=w===1?f.readString():w===2?f.readFloat():w===3?f.readDouble():w===4?f.readVarint64():w===5?f.readVarint():w===6?f.readSVarint():w===7?f.readBoolean():null}return g})(d))}bD.prototype.feature=function(c){if(c<0||c>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[c];var o=this._pbf.readVarint()+this._pbf.pos;return new j2(this._pbf,o,this.extent,this._keys,this._values)};var H2=yD;function G2(c,o,d){if(c===3){var f=new H2(d,d.readVarint()+d.pos);f.length&&(o[f.name]=f)}}var HS=lx.VectorTile=function(c,o){this.layers=c.readFields(G2,{},o)},cx=lx.VectorTileFeature=_D;function ux(c,o,d,f){const g=[],b=f===0?(w,E,I,D,N,j)=>{w.push(new X(j,I+(j-E)/(D-E)*(N-I)))}:(w,E,I,D,N,j)=>{w.push(new X(E+(j-I)/(N-I)*(D-E),j))};for(const w of c){const E=[];for(const I of w){if(I.length<=2)continue;const D=[];for(let Q=0;Q<I.length-1;Q++){const ne=I[Q].x,ae=I[Q].y,de=I[Q+1].x,Te=I[Q+1].y,Re=f===0?ne:ae,$e=f===0?de:Te;Re<o?$e>o&&b(D,ne,ae,de,Te,o):Re>d?$e<d&&b(D,ne,ae,de,Te,d):D.push(I[Q]),$e<o&&Re>=o&&b(D,ne,ae,de,Te,o),$e>d&&Re<=d&&b(D,ne,ae,de,Te,d)}let N=I[I.length-1];const j=f===0?N.x:N.y;j>=o&&j<=d&&D.push(N),D.length&&(N=D[D.length-1],D[0].x===N.x&&D[0].y===N.y||D.push(D[0]),E.push(D))}E.length&&g.push(E)}return g}lx.VectorTileLayer=yD;const q2=cx.types,K2=Math.pow(2,13);function sy(c,o,d,f,g,b,w,E){c.emplaceBack((o<<1)+w,(d<<1)+b,(Math.floor(f*K2)<<1)+g,Math.round(E))}function oy(c,o,d){c.emplaceBack(o.x,o.y,o.z,d[0]*16384,d[1]*16384,d[2]*16384)}class xD{constructor(){this.acc=new X(0,0),this.polyCount=[]}startRing(o){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new X(o.x,o.y),this.max=new X(o.x,o.y))}append(o,d){this.currentPolyCount.edges++,this.acc._add(o);const f=this.min,g=this.max;o.x<f.x?f.x=o.x:o.x>g.x&&(g.x=o.x),o.y<f.y?f.y=o.y:o.y>g.y&&(g.y=o.y),((o.x===0||o.x===zn)&&o.x===d.x)!=((o.y===0||o.y===zn)&&o.y===d.y)&&this.processBorderOverlap(o,d),d.x<0!=o.x<0&&this.addBorderIntersection(0,Qn(d.y,o.y,(0-d.x)/(o.x-d.x))),d.x>zn!=o.x>zn&&this.addBorderIntersection(1,Qn(d.y,o.y,(zn-d.x)/(o.x-d.x))),d.y<0!=o.y<0&&this.addBorderIntersection(2,Qn(d.x,o.x,(0-d.y)/(o.y-d.y))),d.y>zn!=o.y>zn&&this.addBorderIntersection(3,Qn(d.x,o.x,(zn-d.y)/(o.y-d.y)))}addBorderIntersection(o,d){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const f=this.borders[o];d<f[0]&&(f[0]=d),d>f[1]&&(f[1]=d)}processBorderOverlap(o,d){if(o.x===d.x){if(o.y===d.y)return;const f=o.x===0?0:1;this.addBorderIntersection(f,d.y),this.addBorderIntersection(f,o.y)}else{const f=o.y===0?2:3;this.addBorderIntersection(f,d.x),this.addBorderIntersection(f,o.x)}}centroid(){const o=this.polyCount.reduce(((d,f)=>d+f.edges),0);return o!==0?this.acc.div(o)._round():new X(0,0)}span(){return new X(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce(((o,d)=>o+ +(d[0]!==Number.MAX_VALUE)),0)}}class ay{constructor(o){this.zoom=o.zoom,this.canonical=o.canonical,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map((d=>d.id)),this.index=o.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=o.projection,this.layoutVertexArray=new Lt,this.centroidVertexArray=new nl,this.indexArray=new In,this.programConfigurations=new jm(o.layers,o.zoom),this.segments=new ds,this.stateDependentLayerIds=this.layers.filter((d=>d.isStateDependent())).map((d=>d.id)),this.enableTerrain=o.enableTerrain}populate(o,d,f,g){this.features=[],this.hasPattern=jS("fill-extrusion",this.layers,d),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=(function(b){const w=Math.exp(Math.PI*(1-b.y/(1<<b.z)*2));return 80150034*w/(w*w+1)/zn/(1<<b.z)})(f),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:b,id:w,index:E,sourceLayerIndex:I}of o){const D=this.layers[0]._featureFilter.needGeometry,N=Xm(b,D);if(!this.layers[0]._featureFilter.filter(new U(this.zoom),N,f))continue;const j={id:w,sourceLayerIndex:I,index:E,geometry:D?N.geometry:Wd(b,f,g),properties:b.properties,type:b.type,patterns:{}},Q=this.layoutVertexArray.length;this.hasPattern?this.features.push(WS("fill-extrusion",this.layers,j,this.zoom,d)):this.addFeature(j,j.geometry,E,f,{},d.availableImages,g),d.featureIndex.insert(b,j.geometry,E,I,this.index,Q)}this.sortBorders()}addFeatures(o,d,f,g,b){for(const w of this.features){const{geometry:E}=w;this.addFeature(w,E,w.index,d,f,g,b)}this.sortBorders()}update(o,d,f,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,d,this.stateDependentLayers,f,g)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,z2),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=o.createVertexBuffer(this.layoutVertexExtArray,F2.members,!0))),this.programConfigurations.upload(o),this.uploaded=!0}uploadCentroid(o){this.centroidVertexArray.length!==0&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=o.createVertexBuffer(this.centroidVertexArray,B2.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(o,d,f,g,b,w,E){const I=[new X(0,0),new X(zn,zn)],D=E.projection,N=D.name==="globe",j=this.enableTerrain&&!N?new xD:null,Q=q2[o.type]==="Polygon";N&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new $t);const ne=$S(d,500);for(let Re=ne.length-1;Re>=0;Re--){const $e=ne[Re];($e.length===0||(ae=$e[0]).every((Oe=>Oe.x<=0))||ae.every((Oe=>Oe.x>=zn))||ae.every((Oe=>Oe.y<=0))||ae.every((Oe=>Oe.y>=zn)))&&ne.splice(Re,1)}var ae;let de;if(N)de=ID(ne,I,g);else{de=[];for(const Re of ne)de.push({polygon:Re,bounds:I})}const Te=Q?this.edgeRadius:0;for(const{polygon:Re,bounds:$e}of de){let Oe=0,ze=0;for(const qe of Re)Q&&!qe[0].equals(qe[qe.length-1])&&qe.push(qe[0]),ze+=Q?qe.length-1:qe.length;const Xe=this.segments.prepareSegment((Q?5:4)*ze,this.layoutVertexArray,this.indexArray);if(Q){const qe=[],wt=[];Oe=Xe.vertexLength;for(const Ot of Re){let tn,kt;Ot.length&&Ot!==Re[0]&&wt.push(qe.length/2),tn=Ot[1].sub(Ot[0])._perp()._unit();for(let zt=1;zt<Ot.length;zt++){const Nt=Ot[zt],Xt=Ot[zt===Ot.length-1?1:zt+1];let{x:an,y:Rt}=Nt;if(Te){kt=Xt.sub(Nt)._perp()._unit();const vn=tn.add(kt)._unit(),Cn=Te*Math.min(4,1/(tn.x*vn.x+tn.y*vn.y));an+=Cn*vn.x,Rt+=Cn*vn.y,tn=kt}sy(this.layoutVertexArray,an,Rt,0,0,1,1,0),Xe.vertexLength++,qe.push(Nt.x,Nt.y),N&&oy(this.layoutVertexExtArray,D.projectTilePoint(an,Rt,g),D.upVector(g,an,Rt))}}const yt=US(qe,wt);for(let Ot=0;Ot<yt.length;Ot+=3)this.indexArray.emplaceBack(Oe+yt[Ot],Oe+yt[Ot+2],Oe+yt[Ot+1]),Xe.primitiveLength++}for(const qe of Re){j&&qe.length&&j.startRing(qe[0]);let wt,yt,Ot,tn=qe.length>4&&ED(qe[qe.length-2],qe[0],qe[1]),kt=Te?X2(qe[qe.length-2],qe[0],qe[1],Te):0;yt=qe[1].sub(qe[0])._perp()._unit();let zt=!0;for(let Nt=1,Xt=0;Nt<qe.length;Nt++){let an=qe[Nt-1],Rt=qe[Nt];const vn=qe[Nt===qe.length-1?1:Nt+1];if(j&&Q&&j.currentPolyCount.top++,SD(Rt,an,$e)){Te&&(yt=vn.sub(Rt)._perp()._unit(),zt=!zt);continue}j&&j.append(Rt,an);const Cn=Rt.sub(an)._perp(),bn=Cn.x/(Math.abs(Cn.x)+Math.abs(Cn.y)),ii=Cn.y>0?1:0,ln=an.dist(Rt);if(Xt+ln>32768&&(Xt=0),Te){Ot=vn.sub(Rt)._perp()._unit();let si=TD(an,Rt,vn,wD(yt,Ot),Te);isNaN(si)&&(si=0);const Un=Rt.sub(an)._unit();an=an.add(Un.mult(kt))._round(),Rt=Rt.add(Un.mult(-si))._round(),kt=si,yt=Ot}const Vn=Xe.vertexLength,ri=qe.length>4&&ED(an,Rt,vn);let Pi=CD(Xt,tn,zt);if(sy(this.layoutVertexArray,an.x,an.y,bn,ii,0,0,Pi),sy(this.layoutVertexArray,an.x,an.y,bn,ii,0,1,Pi),Xt+=ln,Pi=CD(Xt,ri,!zt),tn=ri,sy(this.layoutVertexArray,Rt.x,Rt.y,bn,ii,0,0,Pi),sy(this.layoutVertexArray,Rt.x,Rt.y,bn,ii,0,1,Pi),Xe.vertexLength+=4,this.indexArray.emplaceBack(Vn+0,Vn+1,Vn+2),this.indexArray.emplaceBack(Vn+1,Vn+3,Vn+2),Xe.primitiveLength+=2,Te){const si=Oe+(Nt===1?qe.length-2:Nt-2),Un=Nt===1?Oe:si+1;if(this.indexArray.emplaceBack(Vn+1,si,Vn+3),this.indexArray.emplaceBack(si,Un,Vn+3),Xe.primitiveLength+=2,wt===void 0&&(wt=Vn),!SD(vn,qe[Nt],$e)){const Tr=Nt===qe.length-1?wt:Xe.vertexLength;this.indexArray.emplaceBack(Vn+2,Vn+3,Tr),this.indexArray.emplaceBack(Vn+3,Tr+1,Tr),this.indexArray.emplaceBack(Vn+3,Un,Tr+1),Xe.primitiveLength+=3}zt=!zt}if(N){const si=this.layoutVertexExtArray,Un=D.projectTilePoint(an.x,an.y,g),Tr=D.projectTilePoint(Rt.x,Rt.y,g),ai=D.upVector(g,an.x,an.y),li=D.upVector(g,Rt.x,Rt.y);oy(si,Un,ai),oy(si,Un,ai),oy(si,Tr,li),oy(si,Tr,li)}}Q&&(Oe+=qe.length-1)}}if(j&&j.polyCount.length>0){if(j.borders){j.vertexArrayOffset=this.centroidVertexArray.length;const Re=j.borders,$e=this.featuresOnBorder.push(j)-1;for(let Oe=0;Oe<4;Oe++)Re[Oe][0]!==Number.MAX_VALUE&&this.borders[Oe].push($e)}this.encodeCentroid(j.borders?void 0:j.centroid(),j)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,f,b,w,g)}sortBorders(){for(let o=0;o<4;o++)this.borders[o].sort(((d,f)=>this.featuresOnBorder[d].borders[o][0]-this.featuresOnBorder[f].borders[o][0]))}encodeCentroid(o,d,f=!0){let g,b;if(o)if(o.y!==0){const E=d.span()._mult(this.tileToMeter);g=(Math.max(o.x,1)<<3)+Math.min(7,Math.round(E.x/10)),b=(Math.max(o.y,1)<<3)+Math.min(7,Math.round(E.y/10))}else g=Math.ceil(7*(o.x+450)),b=0;else g=0,b=+f;let w=f?this.centroidVertexArray.length:d.vertexArrayOffset;for(const E of d.polyCount){f&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*E.edges+E.top);for(let I=0;I<E.top;I++)this.centroidVertexArray.emplace(w++,g,b);for(let I=0;I<2*E.edges;I++)this.centroidVertexArray.emplace(w++,0,b),this.centroidVertexArray.emplace(w++,g,b)}}}function wD(c,o){const d=c.add(o)._unit();return c.x*d.x+c.y*d.y}function X2(c,o,d,f){const g=o.sub(c)._perp()._unit(),b=d.sub(o)._perp()._unit();return TD(c,o,d,wD(g,b),f)}function TD(c,o,d,f,g){const b=Math.sqrt(1-f*f);return Math.min(c.dist(o)/3,o.dist(d)/3,g*b/f)}function SD(c,o,d){return c.x<d[0].x&&o.x<d[0].x||c.x>d[1].x&&o.x>d[1].x||c.y<d[0].y&&o.y<d[0].y||c.y>d[1].y&&o.y>d[1].y}function ED(c,o,d){if(c.x<0||c.x>=zn||o.x<0||o.x>=zn||d.x<0||d.x>=zn)return!1;const f=d.sub(o),g=f.perp(),b=c.sub(o);return(f.x*b.x+f.y*b.y)/Math.sqrt((f.x*f.x+f.y*f.y)*(b.x*b.x+b.y*b.y))>-.866&&g.x*b.x+g.y*b.y<0}function CD(c,o,d){const f=o?2|c:-3&c;return d?1|f:-2&f}function kD(){const c=Math.PI/32,o=Math.tan(c),d=ey;return d*Math.sqrt(1+2*o*o)-d}function ID(c,o,d){const f=1<<d.z,g=Kl(d.x/f),b=Kl((d.x+1)/f),w=Lo(d.y/f),E=Lo((d.y+1)/f);return(function(I,D,N,j,Q=0,ne){const ae=[];if(!I.length||!N||!j)return ae;const de=(qe,wt)=>{for(const yt of qe)ae.push({polygon:yt,bounds:wt})},Te=Math.ceil(Math.log2(N)),Re=Math.ceil(Math.log2(j)),$e=Te-Re,Oe=[];for(let qe=0;qe<Math.abs($e);qe++)Oe.push($e>0?0:1);for(let qe=0;qe<Math.min(Te,Re);qe++)Oe.push(0),Oe.push(1);let ze=I;if(ze=ux(ze,D[0].y-Q,D[1].y+Q,1),ze=ux(ze,D[0].x-Q,D[1].x+Q,0),!ze.length)return ae;const Xe=[];for(Oe.length?Xe.push({polygons:ze,bounds:D,depth:0}):de(ze,D);Xe.length;){const qe=Xe.pop(),wt=qe.depth,yt=Oe[wt],Ot=qe.bounds[0],tn=qe.bounds[1],kt=yt===0?Ot.x:Ot.y,zt=yt===0?tn.x:tn.y,Nt=ne?ne(yt,kt,zt):.5*(kt+zt),Xt=ux(qe.polygons,kt-Q,Nt+Q,yt),an=ux(qe.polygons,Nt-Q,zt+Q,yt);if(Xt.length){const Rt=[Ot,new X(yt===0?Nt:tn.x,yt===1?Nt:tn.y)];Oe.length>wt+1?Xe.push({polygons:Xt,bounds:Rt,depth:wt+1}):de(Xt,Rt)}if(an.length){const Rt=[new X(yt===0?Nt:Ot.x,yt===1?Nt:Ot.y),tn];Oe.length>wt+1?Xe.push({polygons:an,bounds:Rt,depth:wt+1}):de(an,Rt)}}return ae})(c,o,Math.ceil((b-g)/11.25),Math.ceil((w-E)/11.25),1,((I,D,N)=>{if(I===0)return .5*(D+N);{const j=Lo((d.y+D/zn)/f);return(Ou(.5*(Lo((d.y+N/zn)/f)+j))*f-d.y)*zn}}))}Tn(ay,"FillExtrusionBucket",{omit:["layers","features"]}),Tn(xD,"PartMetadata");const Y2=new De({"fill-extrusion-edge-radius":new ce(Dt["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var Z2={paint:new De({"fill-extrusion-opacity":new ce(Dt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new ye(Dt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new ce(Dt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new ce(Dt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new ye(Dt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new ye(Dt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new ye(Dt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new ce(Dt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new ce(Dt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new ce(Dt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-rounded-roof":new ce(Dt["paint_fill-extrusion"]["fill-extrusion-rounded-roof"])}),layout:Y2};function AD(c,o,d){var f=2*Math.PI*6378137/256/Math.pow(2,d);return[c*f-2*Math.PI*6378137/2,o*f-2*Math.PI*6378137/2]}class dx{constructor(o,d,f){this.z=o,this.x=d,this.y=f,this.key=ly(0,o,o,d,f)}equals(o){return this.z===o.z&&this.x===o.x&&this.y===o.y}url(o,d){const f=(function(b,w,E){var I=AD(256*b,256*(w=Math.pow(2,E)-w-1),E),D=AD(256*(b+1),256*(w+1),E);return I[0]+","+I[1]+","+D[0]+","+D[1]})(this.x,this.y,this.z),g=(function(b,w,E){let I,D="";for(let N=b;N>0;N--)I=1<<N-1,D+=(w&I?1:0)+(E&I?2:0);return D})(this.z,this.x,this.y);return o[(this.x+this.y)%o.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(d==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",g).replace("{bbox-epsg-3857}",f)}toString(){return`${this.z}/${this.x}/${this.y}`}}class PD{constructor(o,d){this.wrap=o,this.canonical=d,this.key=ly(o,d.z,d.z,d.x,d.y)}}class Sa{constructor(o,d,f,g,b){this.overscaledZ=o,this.wrap=d,this.canonical=new dx(f,+g,+b),this.key=d===0&&o===f?this.canonical.key:ly(d,o,f,g,b)}equals(o){return this.overscaledZ===o.overscaledZ&&this.wrap===o.wrap&&this.canonical.equals(o.canonical)}scaledTo(o){const d=this.canonical.z-o;return o>this.canonical.z?new Sa(o,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Sa(o,this.wrap,o,this.canonical.x>>d,this.canonical.y>>d)}calculateScaledKey(o,d=!0){if(this.overscaledZ===o&&d)return this.key;if(o>this.canonical.z)return ly(this.wrap*+d,o,this.canonical.z,this.canonical.x,this.canonical.y);{const f=this.canonical.z-o;return ly(this.wrap*+d,o,o,this.canonical.x>>f,this.canonical.y>>f)}}isChildOf(o){if(o.wrap!==this.wrap)return!1;const d=this.canonical.z-o.canonical.z;return o.overscaledZ===0||o.overscaledZ<this.overscaledZ&&o.canonical.x===this.canonical.x>>d&&o.canonical.y===this.canonical.y>>d}children(o){if(this.overscaledZ>=o)return[new Sa(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const d=this.canonical.z+1,f=2*this.canonical.x,g=2*this.canonical.y;return[new Sa(d,this.wrap,d,f,g),new Sa(d,this.wrap,d,f+1,g),new Sa(d,this.wrap,d,f,g+1),new Sa(d,this.wrap,d,f+1,g+1)]}isLessThan(o){return this.wrap<o.wrap||!(this.wrap>o.wrap)&&(this.overscaledZ<o.overscaledZ||!(this.overscaledZ>o.overscaledZ)&&(this.canonical.x<o.canonical.x||!(this.canonical.x>o.canonical.x)&&this.canonical.y<o.canonical.y))}wrapped(){return new Sa(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(o){return new Sa(this.overscaledZ,o,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new PD(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function ly(c,o,d,f,g){const b=1<<Math.min(d,22);let w=b*(g%b)+f%b;return c&&d<22&&(w+=b*b*((c<0?-2*c-1:2*c)%(1<<2*(22-d)))),16*(32*w+d)+(o-d)}Tn(dx,"CanonicalTileID"),Tn(Sa,"OverscaledTileID",{omit:["projMatrix"]});class Hg extends X{constructor(o,d,f){super(o,d),this.z=f}}function cy(c,o){return c.x*o.x+c.y*o.y}function MD(c,o){if(c.length===1){let d=0;const f=o[d++];let g;for(;!g||f.equals(g);)if(g=o[d++],!g)return 1/0;for(;d<o.length;d++){const b=o[d],w=c[0],E=g.sub(f),I=b.sub(f),D=w.sub(f),N=cy(E,E),j=cy(E,I),Q=cy(I,I),ne=cy(D,E),ae=cy(D,I),de=N*Q-j*j,Te=(Q*ne-j*ae)/de,Re=(N*ae-j*ne)/de,$e=f.z*(1-Te-Re)+g.z*Te+b.z*Re;if(isFinite($e))return $e}return 1/0}{let d=1/0;for(const f of o)d=Math.min(d,f.z);return d}}function DD(c,o,d,f,g,b,w,E){const I=w*g.getElevationAt(c,o,!0,!0),D=b[0]!==0,N=D?b[1]===0?w*(b[0]/7-450):w*(function(j,Q,ne){const ae=Math.floor(Q[0]/8),de=Math.floor(Q[1]/8),Te=10*(Q[0]-8*ae),Re=10*(Q[1]-8*de),$e=j.getElevationAt(ae,de,!0,!0),Oe=j.getMeterToDEM(ne),ze=Math.floor(.5*(Te*Oe-1)),Xe=Math.floor(.5*(Re*Oe-1)),qe=j.tileCoordToPixel(ae,de),wt=2*ze+1,yt=2*Xe+1,Ot=(function(an,Rt,vn,Cn,bn){return[an.getElevationAtPixel(Rt,vn,!0),an.getElevationAtPixel(Rt+bn,vn,!0),an.getElevationAtPixel(Rt,vn+bn,!0),an.getElevationAtPixel(Rt+Cn,vn+bn,!0)]})(j,qe.x-ze,qe.y-Xe,wt,yt),tn=Math.abs(Ot[0]-Ot[1]),kt=Math.abs(Ot[2]-Ot[3]),zt=Math.abs(Ot[0]-Ot[2])+Math.abs(Ot[1]-Ot[3]),Nt=Math.min(.25,.5*Oe*(tn+kt)/wt),Xt=Math.min(.25,.5*Oe*zt/yt);return $e+Math.max(Nt*Te,Xt*Re)})(g,b,E):I;return{base:I+(d===0)?-1:d,top:D?Math.max(N+f,I+d+2):I+f}}const J2=at([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:Q2}=J2,e8=at([{name:"a_packed",components:4,type:"Float32"}]),{members:t8}=e8,n8=cx.types,i8=Math.cos(Math.PI/180*37.5);class hx{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map((d=>d.id)),this.index=o.index,this.projection=o.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((d=>{this.gradients[d.id]={}})),this.layoutVertexArray=new bt,this.layoutVertexArray2=new Gt,this.indexArray=new In,this.programConfigurations=new jm(o.layers,o.zoom),this.segments=new ds,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((d=>d.isStateDependent())).map((d=>d.id))}populate(o,d,f,g){this.hasPattern=jS("line",this.layers,d);const b=this.layers[0].layout.get("line-sort-key"),w=[];for(const{feature:N,id:j,index:Q,sourceLayerIndex:ne}of o){const ae=this.layers[0]._featureFilter.needGeometry,de=Xm(N,ae);if(!this.layers[0]._featureFilter.filter(new U(this.zoom),de,f))continue;const Te=b?b.evaluate(de,{},f):void 0,Re={id:j,properties:N.properties,type:N.type,sourceLayerIndex:ne,index:Q,geometry:ae?de.geometry:Wd(N,f,g),patterns:{},sortKey:Te};w.push(Re)}b&&w.sort(((N,j)=>N.sortKey-j.sortKey));const{lineAtlas:E,featureIndex:I}=d,D=this.addConstantDashes(E);for(const N of w){const{geometry:j,index:Q,sourceLayerIndex:ne}=N;if(D&&this.addFeatureDashes(N,E),this.hasPattern){const ae=WS("line",this.layers,N,this.zoom,d);this.patternFeatures.push(ae)}else this.addFeature(N,j,Q,f,E.positions,d.availableImages);I.insert(o[Q].feature,j,Q,ne,this.index)}}addConstantDashes(o){let d=!1;for(const f of this.layers){const g=f.paint.get("line-dasharray").value,b=f.layout.get("line-cap").value;if(g.kind!=="constant"||b.kind!=="constant")d=!0;else{const w=b.value,E=g.value;if(!E)continue;o.addDash(E,w)}}return d}addFeatureDashes(o,d){const f=this.zoom;for(const g of this.layers){const b=g.paint.get("line-dasharray").value,w=g.layout.get("line-cap").value;if(b.kind==="constant"&&w.kind==="constant")continue;let E,I;if(b.kind==="constant"){if(E=b.value,!E)continue}else E=b.evaluate({zoom:f},o);I=w.kind==="constant"?w.value:w.evaluate({zoom:f},o),d.addDash(E,I),o.patterns[g.id]=d.getKey(E,I)}}update(o,d,f,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,d,this.stateDependentLayers,f,g)}addFeatures(o,d,f,g,b){for(const w of this.patternFeatures)this.addFeature(w,w.geometry,w.index,d,f,g)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=o.createVertexBuffer(this.layoutVertexArray2,t8)),this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,Q2),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(o){if(o.properties&&o.properties.hasOwnProperty("mapbox_clip_start")&&o.properties.hasOwnProperty("mapbox_clip_end"))return{start:+o.properties.mapbox_clip_start,end:+o.properties.mapbox_clip_end}}addFeature(o,d,f,g,b,w){const E=this.layers[0].layout,I=E.get("line-join").evaluate(o,{}),D=E.get("line-cap").evaluate(o,{}),N=E.get("line-miter-limit"),j=E.get("line-round-limit");this.lineClips=this.lineFeatureClips(o);for(const Q of d)this.addLine(Q,o,I,D,N,j);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,f,b,w,g)}addLine(o,d,f,g,b,w){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Re=0;Re<o.length-1;Re++)this.totalDistance+=o[Re].dist(o[Re+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const E=n8[d.type]==="Polygon";let I=o.length;for(;I>=2&&o[I-1].equals(o[I-2]);)I--;let D=0;for(;D<I-1&&o[D].equals(o[D+1]);)D++;if(I<(E?3:2))return;f==="bevel"&&(b=1.05);const N=this.overscaling<=16?15*zn/(512*this.overscaling):0,j=this.segments.prepareSegment(10*I,this.layoutVertexArray,this.indexArray);let Q,ne,ae,de,Te;this.e1=this.e2=-1,E&&(Q=o[I-2],Te=o[D].sub(Q)._unit()._perp());for(let Re=D;Re<I;Re++){if(ae=Re===I-1?E?o[D+1]:void 0:o[Re+1],ae&&o[Re].equals(ae))continue;Te&&(de=Te),Q&&(ne=Q),Q=o[Re],Te=ae?ae.sub(Q)._unit()._perp():de,de=de||Te;let $e=de.add(Te);$e.x===0&&$e.y===0||$e._unit();const Oe=de.x*Te.x+de.y*Te.y,ze=$e.x*Te.x+$e.y*Te.y,Xe=ze!==0?1/ze:1/0,qe=2*Math.sqrt(2-2*ze),wt=ze<i8&&ne&&ae,yt=de.x*Te.y-de.y*Te.x>0;if(wt&&Re>D){const kt=Q.dist(ne);if(kt>2*N){const zt=Q.sub(Q.sub(ne)._mult(N/kt)._round());this.updateDistance(ne,zt),this.addCurrentVertex(zt,de,0,0,j),ne=zt}}const Ot=ne&&ae;let tn=Ot?f:E?"butt":g;if(Ot&&tn==="round"&&(Xe<w?tn="miter":Xe<=2&&(tn="fakeround")),tn==="miter"&&Xe>b&&(tn="bevel"),tn==="bevel"&&(Xe>2&&(tn="flipbevel"),Xe<b&&(tn="miter")),ne&&this.updateDistance(ne,Q),tn==="miter")$e._mult(Xe),this.addCurrentVertex(Q,$e,0,0,j);else if(tn==="flipbevel"){if(Xe>100)$e=Te.mult(-1);else{const kt=Xe*de.add(Te).mag()/de.sub(Te).mag();$e._perp()._mult(kt*(yt?-1:1))}this.addCurrentVertex(Q,$e,0,0,j),this.addCurrentVertex(Q,$e.mult(-1),0,0,j)}else if(tn==="bevel"||tn==="fakeround"){const kt=-Math.sqrt(Xe*Xe-1),zt=yt?kt:0,Nt=yt?0:kt;if(ne&&this.addCurrentVertex(Q,de,zt,Nt,j),tn==="fakeround"){const Xt=Math.round(180*qe/Math.PI/20);for(let an=1;an<Xt;an++){let Rt=an/Xt;if(Rt!==.5){const Cn=Rt-.5;Rt+=Rt*Cn*(Rt-1)*((1.0904+Oe*(Oe*(3.55645-1.43519*Oe)-3.2452))*Cn*Cn+(.848013+Oe*(.215638*Oe-1.06021)))}const vn=Te.sub(de)._mult(Rt)._add(de)._unit()._mult(yt?-1:1);this.addHalfVertex(Q,vn.x,vn.y,!1,yt,0,j)}}ae&&this.addCurrentVertex(Q,Te,-zt,-Nt,j)}else if(tn==="butt")this.addCurrentVertex(Q,$e,0,0,j);else if(tn==="square"){const kt=ne?1:-1;ne||this.addCurrentVertex(Q,$e,kt,kt,j),this.addCurrentVertex(Q,$e,0,0,j),ne&&this.addCurrentVertex(Q,$e,kt,kt,j)}else tn==="round"&&(ne&&(this.addCurrentVertex(Q,de,0,0,j),this.addCurrentVertex(Q,de,1,1,j,!0)),ae&&(this.addCurrentVertex(Q,Te,-1,-1,j,!0),this.addCurrentVertex(Q,Te,0,0,j)));if(wt&&Re<I-1){const kt=Q.dist(ae);if(kt>2*N){const zt=Q.add(ae.sub(Q)._mult(N/kt)._round());this.updateDistance(Q,zt),this.addCurrentVertex(zt,Te,0,0,j),Q=zt}}}}addCurrentVertex(o,d,f,g,b,w=!1){const E=d.y*g-d.x,I=-d.y-d.x*g;this.addHalfVertex(o,d.x+d.y*f,d.y-d.x*f,w,!1,f,b),this.addHalfVertex(o,E,I,w,!0,-g,b)}addHalfVertex({x:o,y:d},f,g,b,w,E,I){this.layoutVertexArray.emplaceBack((o<<1)+(b?1:0),(d<<1)+(w?1:0),Math.round(63*f)+128,Math.round(63*g)+128,1+(E===0?0:E<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const D=I.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,D),I.primitiveLength++),w?this.e2=D:this.e1=D}updateScaledDistance(){if(this.lineClips){const o=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=o*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(o,d){this.distance+=o.dist(d),this.updateScaledDistance()}}Tn(hx,"LineBucket",{omit:["layers","patternFeatures"]});const r8=new De({"line-cap":new ye(Dt.layout_line["line-cap"]),"line-join":new ye(Dt.layout_line["line-join"]),"line-miter-limit":new ce(Dt.layout_line["line-miter-limit"]),"line-round-limit":new ce(Dt.layout_line["line-round-limit"]),"line-sort-key":new ye(Dt.layout_line["line-sort-key"])});var LD={paint:new De({"line-opacity":new ye(Dt.paint_line["line-opacity"]),"line-color":new ye(Dt.paint_line["line-color"]),"line-translate":new ce(Dt.paint_line["line-translate"]),"line-translate-anchor":new ce(Dt.paint_line["line-translate-anchor"]),"line-width":new ye(Dt.paint_line["line-width"]),"line-gap-width":new ye(Dt.paint_line["line-gap-width"]),"line-offset":new ye(Dt.paint_line["line-offset"]),"line-blur":new ye(Dt.paint_line["line-blur"]),"line-dasharray":new ye(Dt.paint_line["line-dasharray"]),"line-pattern":new ye(Dt.paint_line["line-pattern"]),"line-gradient":new Pe(Dt.paint_line["line-gradient"]),"line-trim-offset":new ce(Dt.paint_line["line-trim-offset"])}),layout:r8};const RD=new class extends ye{possiblyEvaluate(c,o){return o=new U(Math.floor(o.zoom),{now:o.now,fadeDuration:o.fadeDuration,transition:o.transition}),super.possiblyEvaluate(c,o)}evaluate(c,o,d,f){return o=vt({},o,{zoom:Math.floor(o.zoom)}),super.evaluate(c,o,d,f)}}(LD.paint.properties["line-width"].specification);function OD(c,o){return o>0?o+2*c:c}RD.useIntegerZoom=!0;const s8=at([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),o8=at([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),a8=at([{name:"a_projected_pos",components:4,type:"Float32"}],4);at([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const l8=at([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),c8=at([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);at([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const VD=at([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),u8=at([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);at([{name:"triangle",components:3,type:"Uint16"}]),at([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),at([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),at([{type:"Float32",name:"offsetX"}]),at([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var uo=24;const ru=128;function GS(c,o){const{expression:d}=o;if(d.kind==="constant")return{kind:"constant",layoutSize:d.evaluate(new U(c+1))};if(d.kind==="source")return{kind:"source"};{const{zoomStops:f,interpolationType:g}=d;let b=0;for(;b<f.length&&f[b]<=c;)b++;b=Math.max(0,b-1);let w=b;for(;w<f.length&&f[w]<c+1;)w++;w=Math.min(f.length-1,w);const E=f[b],I=f[w];return d.kind==="composite"?{kind:"composite",minZoom:E,maxZoom:I,interpolationType:g}:{kind:"camera",minZoom:E,maxZoom:I,minSize:d.evaluate(new U(E)),maxSize:d.evaluate(new U(I)),interpolationType:g}}}function fx(c,{uSize:o,uSizeT:d},{lowerSize:f,upperSize:g}){return c.kind==="source"?f/ru:c.kind==="composite"?Qn(f/ru,g/ru,d):o}function Gg(c,o){let d=0,f=0;if(c.kind==="constant")f=c.layoutSize;else if(c.kind!=="source"){const{interpolationType:g,minZoom:b,maxZoom:w}=c,E=g?Le(_l.interpolationFactor(g,o,b,w),0,1):0;c.kind==="camera"?f=Qn(c.minSize,c.maxSize,E):d=E}return{uSizeT:d,uSize:f}}var d8=Object.freeze({__proto__:null,SIZE_PACK_FACTOR:ru,evaluateSizeForFeature:fx,evaluateSizeForZoom:Gg,getSizeData:GS});function h8(c,o,d){return c.sections.forEach((f=>{f.text=(function(g,b,w){const E=b.layout.get("text-transform").evaluate(w,{});return E==="uppercase"?g=g.toLocaleUpperCase():E==="lowercase"&&(g=g.toLocaleLowerCase()),O.applyArabicShaping&&(g=O.applyArabicShaping(g)),g})(f.text,o,d)})),c}const uy={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};function f8(c){return c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""}function m8(c){return c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""}var BD=vr,FD=function(c,o,d,f,g){var b,w,E=8*g-f-1,I=(1<<E)-1,D=I>>1,N=-7,j=g-1,Q=-1,ne=c[o+j];for(j+=Q,b=ne&(1<<-N)-1,ne>>=-N,N+=E;N>0;b=256*b+c[o+j],j+=Q,N-=8);for(w=b&(1<<-N)-1,b>>=-N,N+=f;N>0;w=256*w+c[o+j],j+=Q,N-=8);if(b===0)b=1-D;else{if(b===I)return w?NaN:1/0*(ne?-1:1);w+=Math.pow(2,f),b-=D}return(ne?-1:1)*w*Math.pow(2,b-f)},zD=function(c,o,d,f,g,b){var w,E,I,D=8*b-g-1,N=(1<<D)-1,j=N>>1,Q=g===23?Math.pow(2,-24)-Math.pow(2,-77):0,ne=0,ae=1,de=o<0||o===0&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(E=isNaN(o)?1:0,w=N):(w=Math.floor(Math.log(o)/Math.LN2),o*(I=Math.pow(2,-w))<1&&(w--,I*=2),(o+=w+j>=1?Q/I:Q*Math.pow(2,1-j))*I>=2&&(w++,I/=2),w+j>=N?(E=0,w=N):w+j>=1?(E=(o*I-1)*Math.pow(2,g),w+=j):(E=o*Math.pow(2,j-1)*Math.pow(2,g),w=0));g>=8;c[d+ne]=255&E,ne+=ae,E/=256,g-=8);for(w=w<<g|E,D+=g;D>0;c[d+ne]=255&w,ne+=ae,w/=256,D-=8);c[d+ne-ae]|=128*de};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function vr(c){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(c)?c:new Uint8Array(c||0),this.pos=0,this.type=0,this.length=this.buf.length}vr.Varint=0,vr.Fixed64=1,vr.Bytes=2,vr.Fixed32=5;var qS=4294967296,ND=1/qS,UD=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Gd(c){return c.type===vr.Bytes?c.readVarint()+c.pos:c.pos+1}function qg(c,o,d){return d?4294967296*o+(c>>>0):4294967296*(o>>>0)+(c>>>0)}function $D(c,o,d){var f=o<=16383?1:o<=2097151?2:o<=268435455?3:Math.floor(Math.log(o)/(7*Math.LN2));d.realloc(f);for(var g=d.pos-1;g>=c;g--)d.buf[g+f]=d.buf[g]}function p8(c,o){for(var d=0;d<c.length;d++)o.writeVarint(c[d])}function g8(c,o){for(var d=0;d<c.length;d++)o.writeSVarint(c[d])}function v8(c,o){for(var d=0;d<c.length;d++)o.writeFloat(c[d])}function _8(c,o){for(var d=0;d<c.length;d++)o.writeDouble(c[d])}function y8(c,o){for(var d=0;d<c.length;d++)o.writeBoolean(c[d])}function b8(c,o){for(var d=0;d<c.length;d++)o.writeFixed32(c[d])}function x8(c,o){for(var d=0;d<c.length;d++)o.writeSFixed32(c[d])}function w8(c,o){for(var d=0;d<c.length;d++)o.writeFixed64(c[d])}function T8(c,o){for(var d=0;d<c.length;d++)o.writeSFixed64(c[d])}function mx(c,o){return(c[o]|c[o+1]<<8|c[o+2]<<16)+16777216*c[o+3]}function Kg(c,o,d){c[d]=o,c[d+1]=o>>>8,c[d+2]=o>>>16,c[d+3]=o>>>24}function jD(c,o){return(c[o]|c[o+1]<<8|c[o+2]<<16)+(c[o+3]<<24)}vr.prototype={destroy:function(){this.buf=null},readFields:function(c,o,d){for(d=d||this.length;this.pos<d;){var f=this.readVarint(),g=f>>3,b=this.pos;this.type=7&f,c(g,o,this),this.pos===b&&this.skip(f)}return o},readMessage:function(c,o){return this.readFields(c,o,this.readVarint()+this.pos)},readFixed32:function(){var c=mx(this.buf,this.pos);return this.pos+=4,c},readSFixed32:function(){var c=jD(this.buf,this.pos);return this.pos+=4,c},readFixed64:function(){var c=mx(this.buf,this.pos)+mx(this.buf,this.pos+4)*qS;return this.pos+=8,c},readSFixed64:function(){var c=mx(this.buf,this.pos)+jD(this.buf,this.pos+4)*qS;return this.pos+=8,c},readFloat:function(){var c=FD(this.buf,this.pos,!0,23,4);return this.pos+=4,c},readDouble:function(){var c=FD(this.buf,this.pos,!0,52,8);return this.pos+=8,c},readVarint:function(c){var o,d,f=this.buf;return o=127&(d=f[this.pos++]),d<128?o:(o|=(127&(d=f[this.pos++]))<<7,d<128?o:(o|=(127&(d=f[this.pos++]))<<14,d<128?o:(o|=(127&(d=f[this.pos++]))<<21,d<128?o:(function(g,b,w){var E,I,D=w.buf;if(E=(112&(I=D[w.pos++]))>>4,I<128||(E|=(127&(I=D[w.pos++]))<<3,I<128)||(E|=(127&(I=D[w.pos++]))<<10,I<128)||(E|=(127&(I=D[w.pos++]))<<17,I<128)||(E|=(127&(I=D[w.pos++]))<<24,I<128)||(E|=(1&(I=D[w.pos++]))<<31,I<128))return qg(g,E,b);throw new Error("Expected varint not more than 10 bytes")})(o|=(15&(d=f[this.pos]))<<28,c,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var c=this.readVarint();return c%2==1?(c+1)/-2:c/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var c=this.readVarint()+this.pos,o=this.pos;return this.pos=c,c-o>=12&&UD?(function(d,f,g){return UD.decode(d.subarray(f,g))})(this.buf,o,c):(function(d,f,g){for(var b="",w=f;w<g;){var E,I,D,N=d[w],j=null,Q=N>239?4:N>223?3:N>191?2:1;if(w+Q>g)break;Q===1?N<128&&(j=N):Q===2?(192&(E=d[w+1]))==128&&(j=(31&N)<<6|63&E)<=127&&(j=null):Q===3?(I=d[w+2],(192&(E=d[w+1]))==128&&(192&I)==128&&((j=(15&N)<<12|(63&E)<<6|63&I)<=2047||j>=55296&&j<=57343)&&(j=null)):Q===4&&(I=d[w+2],D=d[w+3],(192&(E=d[w+1]))==128&&(192&I)==128&&(192&D)==128&&((j=(15&N)<<18|(63&E)<<12|(63&I)<<6|63&D)<=65535||j>=1114112)&&(j=null)),j===null?(j=65533,Q=1):j>65535&&(j-=65536,b+=String.fromCharCode(j>>>10&1023|55296),j=56320|1023&j),b+=String.fromCharCode(j),w+=Q}return b})(this.buf,o,c)},readBytes:function(){var c=this.readVarint()+this.pos,o=this.buf.subarray(this.pos,c);return this.pos=c,o},readPackedVarint:function(c,o){if(this.type!==vr.Bytes)return c.push(this.readVarint(o));var d=Gd(this);for(c=c||[];this.pos<d;)c.push(this.readVarint(o));return c},readPackedSVarint:function(c){if(this.type!==vr.Bytes)return c.push(this.readSVarint());var o=Gd(this);for(c=c||[];this.pos<o;)c.push(this.readSVarint());return c},readPackedBoolean:function(c){if(this.type!==vr.Bytes)return c.push(this.readBoolean());var o=Gd(this);for(c=c||[];this.pos<o;)c.push(this.readBoolean());return c},readPackedFloat:function(c){if(this.type!==vr.Bytes)return c.push(this.readFloat());var o=Gd(this);for(c=c||[];this.pos<o;)c.push(this.readFloat());return c},readPackedDouble:function(c){if(this.type!==vr.Bytes)return c.push(this.readDouble());var o=Gd(this);for(c=c||[];this.pos<o;)c.push(this.readDouble());return c},readPackedFixed32:function(c){if(this.type!==vr.Bytes)return c.push(this.readFixed32());var o=Gd(this);for(c=c||[];this.pos<o;)c.push(this.readFixed32());return c},readPackedSFixed32:function(c){if(this.type!==vr.Bytes)return c.push(this.readSFixed32());var o=Gd(this);for(c=c||[];this.pos<o;)c.push(this.readSFixed32());return c},readPackedFixed64:function(c){if(this.type!==vr.Bytes)return c.push(this.readFixed64());var o=Gd(this);for(c=c||[];this.pos<o;)c.push(this.readFixed64());return c},readPackedSFixed64:function(c){if(this.type!==vr.Bytes)return c.push(this.readSFixed64());var o=Gd(this);for(c=c||[];this.pos<o;)c.push(this.readSFixed64());return c},skip:function(c){var o=7&c;if(o===vr.Varint)for(;this.buf[this.pos++]>127;);else if(o===vr.Bytes)this.pos=this.readVarint()+this.pos;else if(o===vr.Fixed32)this.pos+=4;else{if(o!==vr.Fixed64)throw new Error("Unimplemented type: "+o);this.pos+=8}},writeTag:function(c,o){this.writeVarint(c<<3|o)},realloc:function(c){for(var o=this.length||16;o<this.pos+c;)o*=2;if(o!==this.length){var d=new Uint8Array(o);d.set(this.buf),this.buf=d,this.length=o}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(c){this.realloc(4),Kg(this.buf,c,this.pos),this.pos+=4},writeSFixed32:function(c){this.realloc(4),Kg(this.buf,c,this.pos),this.pos+=4},writeFixed64:function(c){this.realloc(8),Kg(this.buf,-1&c,this.pos),Kg(this.buf,Math.floor(c*ND),this.pos+4),this.pos+=8},writeSFixed64:function(c){this.realloc(8),Kg(this.buf,-1&c,this.pos),Kg(this.buf,Math.floor(c*ND),this.pos+4),this.pos+=8},writeVarint:function(c){(c=+c||0)>268435455||c<0?(function(o,d){var f,g;if(o>=0?(f=o%4294967296|0,g=o/4294967296|0):(g=~(-o/4294967296),4294967295^(f=~(-o%4294967296))?f=f+1|0:(f=0,g=g+1|0)),o>=18446744073709552e3||o<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");d.realloc(10),(function(b,w,E){E.buf[E.pos++]=127&b|128,b>>>=7,E.buf[E.pos++]=127&b|128,b>>>=7,E.buf[E.pos++]=127&b|128,b>>>=7,E.buf[E.pos++]=127&b|128,E.buf[E.pos]=127&(b>>>=7)})(f,0,d),(function(b,w){var E=(7&b)<<4;w.buf[w.pos++]|=E|((b>>>=3)?128:0),b&&(w.buf[w.pos++]=127&b|((b>>>=7)?128:0),b&&(w.buf[w.pos++]=127&b|((b>>>=7)?128:0),b&&(w.buf[w.pos++]=127&b|((b>>>=7)?128:0),b&&(w.buf[w.pos++]=127&b|((b>>>=7)?128:0),b&&(w.buf[w.pos++]=127&b)))))})(g,d)})(c,this):(this.realloc(4),this.buf[this.pos++]=127&c|(c>127?128:0),c<=127||(this.buf[this.pos++]=127&(c>>>=7)|(c>127?128:0),c<=127||(this.buf[this.pos++]=127&(c>>>=7)|(c>127?128:0),c<=127||(this.buf[this.pos++]=c>>>7&127))))},writeSVarint:function(c){this.writeVarint(c<0?2*-c-1:2*c)},writeBoolean:function(c){this.writeVarint(!!c)},writeString:function(c){c=String(c),this.realloc(4*c.length),this.pos++;var o=this.pos;this.pos=(function(f,g,b){for(var w,E,I=0;I<g.length;I++){if((w=g.charCodeAt(I))>55295&&w<57344){if(!E){w>56319||I+1===g.length?(f[b++]=239,f[b++]=191,f[b++]=189):E=w;continue}if(w<56320){f[b++]=239,f[b++]=191,f[b++]=189,E=w;continue}w=E-55296<<10|w-56320|65536,E=null}else E&&(f[b++]=239,f[b++]=191,f[b++]=189,E=null);w<128?f[b++]=w:(w<2048?f[b++]=w>>6|192:(w<65536?f[b++]=w>>12|224:(f[b++]=w>>18|240,f[b++]=w>>12&63|128),f[b++]=w>>6&63|128),f[b++]=63&w|128)}return b})(this.buf,c,this.pos);var d=this.pos-o;d>=128&&$D(o,d,this),this.pos=o-1,this.writeVarint(d),this.pos+=d},writeFloat:function(c){this.realloc(4),zD(this.buf,c,this.pos,!0,23,4),this.pos+=4},writeDouble:function(c){this.realloc(8),zD(this.buf,c,this.pos,!0,52,8),this.pos+=8},writeBytes:function(c){var o=c.length;this.writeVarint(o),this.realloc(o);for(var d=0;d<o;d++)this.buf[this.pos++]=c[d]},writeRawMessage:function(c,o){this.pos++;var d=this.pos;c(o,this);var f=this.pos-d;f>=128&&$D(d,f,this),this.pos=d-1,this.writeVarint(f),this.pos+=f},writeMessage:function(c,o,d){this.writeTag(c,vr.Bytes),this.writeRawMessage(o,d)},writePackedVarint:function(c,o){o.length&&this.writeMessage(c,p8,o)},writePackedSVarint:function(c,o){o.length&&this.writeMessage(c,g8,o)},writePackedBoolean:function(c,o){o.length&&this.writeMessage(c,y8,o)},writePackedFloat:function(c,o){o.length&&this.writeMessage(c,v8,o)},writePackedDouble:function(c,o){o.length&&this.writeMessage(c,_8,o)},writePackedFixed32:function(c,o){o.length&&this.writeMessage(c,b8,o)},writePackedSFixed32:function(c,o){o.length&&this.writeMessage(c,x8,o)},writePackedFixed64:function(c,o){o.length&&this.writeMessage(c,w8,o)},writePackedSFixed64:function(c,o){o.length&&this.writeMessage(c,T8,o)},writeBytesField:function(c,o){this.writeTag(c,vr.Bytes),this.writeBytes(o)},writeFixed32Field:function(c,o){this.writeTag(c,vr.Fixed32),this.writeFixed32(o)},writeSFixed32Field:function(c,o){this.writeTag(c,vr.Fixed32),this.writeSFixed32(o)},writeFixed64Field:function(c,o){this.writeTag(c,vr.Fixed64),this.writeFixed64(o)},writeSFixed64Field:function(c,o){this.writeTag(c,vr.Fixed64),this.writeSFixed64(o)},writeVarintField:function(c,o){this.writeTag(c,vr.Varint),this.writeVarint(o)},writeSVarintField:function(c,o){this.writeTag(c,vr.Varint),this.writeSVarint(o)},writeStringField:function(c,o){this.writeTag(c,vr.Bytes),this.writeString(o)},writeFloatField:function(c,o){this.writeTag(c,vr.Fixed32),this.writeFloat(o)},writeDoubleField:function(c,o){this.writeTag(c,vr.Fixed64),this.writeDouble(o)},writeBooleanField:function(c,o){this.writeVarintField(c,!!o)}};var px=G(BD);const KS=3;function S8(c,o,d){o.glyphs=[],c===1&&d.readMessage(E8,o)}function E8(c,o,d){if(c===3){const{id:f,bitmap:g,width:b,height:w,left:E,top:I,advance:D}=d.readMessage(C8,{});o.glyphs.push({id:f,bitmap:new Hd({width:b+2*KS,height:w+2*KS},g),metrics:{width:b,height:w,left:E,top:I,advance:D}})}else c===4?o.ascender=d.readSVarint():c===5&&(o.descender=d.readSVarint())}function C8(c,o,d){c===1?o.id=d.readVarint():c===2?o.bitmap=d.readBytes():c===3?o.width=d.readVarint():c===4?o.height=d.readVarint():c===5?o.left=d.readSVarint():c===6?o.top=d.readSVarint():c===7&&(o.advance=d.readVarint())}const WD=KS;function XS(c){let o=0,d=0;for(const w of c)o+=w.w*w.h,d=Math.max(d,w.w);c.sort(((w,E)=>E.h-w.h));const f=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(o/.95)),d),h:1/0}];let g=0,b=0;for(const w of c)for(let E=f.length-1;E>=0;E--){const I=f[E];if(!(w.w>I.w||w.h>I.h)){if(w.x=I.x,w.y=I.y,b=Math.max(b,w.y+w.h),g=Math.max(g,w.x+w.w),w.w===I.w&&w.h===I.h){const D=f.pop();E<f.length&&(f[E]=D)}else w.h===I.h?(I.x+=w.w,I.w-=w.w):w.w===I.w?(I.y+=w.h,I.h-=w.h):(f.push({x:I.x+w.w,y:I.y,w:I.w-w.w,h:w.h}),I.y+=w.h,I.h-=w.h);break}}return{w:g,h:b,fill:o/(g*b)||0}}const il=1;class YS{constructor(o,{pixelRatio:d,version:f,stretchX:g,stretchY:b,content:w}){this.paddedRect=o,this.pixelRatio=d,this.stretchX=g,this.stretchY=b,this.content=w,this.version=f}get tl(){return[this.paddedRect.x+il,this.paddedRect.y+il]}get br(){return[this.paddedRect.x+this.paddedRect.w-il,this.paddedRect.y+this.paddedRect.h-il]}get displaySize(){return[(this.paddedRect.w-2*il)/this.pixelRatio,(this.paddedRect.h-2*il)/this.pixelRatio]}}class HD{constructor(o,d){const f={},g={};this.haveRenderCallbacks=[];const b=[];this.addImages(o,f,b),this.addImages(d,g,b);const{w,h:E}=XS(b),I=new Tl({width:w||1,height:E||1});for(const D in o){const N=o[D],j=f[D].paddedRect;Tl.copy(N.data,I,{x:0,y:0},{x:j.x+il,y:j.y+il},N.data)}for(const D in d){const N=d[D],j=g[D].paddedRect,Q=j.x+il,ne=j.y+il,ae=N.data.width,de=N.data.height;Tl.copy(N.data,I,{x:0,y:0},{x:Q,y:ne},N.data),Tl.copy(N.data,I,{x:0,y:de-1},{x:Q,y:ne-1},{width:ae,height:1}),Tl.copy(N.data,I,{x:0,y:0},{x:Q,y:ne+de},{width:ae,height:1}),Tl.copy(N.data,I,{x:ae-1,y:0},{x:Q-1,y:ne},{width:1,height:de}),Tl.copy(N.data,I,{x:0,y:0},{x:Q+ae,y:ne},{width:1,height:de})}this.image=I,this.iconPositions=f,this.patternPositions=g}addImages(o,d,f){for(const g in o){const b=o[g],w={x:0,y:0,w:b.data.width+2*il,h:b.data.height+2*il};f.push(w),d[g]=new YS(w,b),b.hasRenderCallback&&this.haveRenderCallbacks.push(g)}}patchUpdatedImages(o,d){this.haveRenderCallbacks=this.haveRenderCallbacks.filter((f=>o.hasImage(f))),o.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const f in o.updatedImages)this.patchUpdatedImage(this.iconPositions[f],o.getImage(f),d),this.patchUpdatedImage(this.patternPositions[f],o.getImage(f),d)}patchUpdatedImage(o,d,f){if(!o||!d||o.version===d.version)return;o.version=d.version;const[g,b]=o.tl;f.update(d.data,void 0,{x:g,y:b})}}Tn(YS,"ImagePosition"),Tn(HD,"ImageAtlas");const Xl={horizontal:1,vertical:2,horizontalOnly:3},GD=-17;class dy{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(o,d){const f=new dy;return f.scale=o||1,f.fontStack=d,f}static forImage(o){const d=new dy;return d.imageName=o,d}}class Xg{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(o,d){const f=new Xg;for(let g=0;g<o.sections.length;g++){const b=o.sections[g];b.image?f.addImageSection(b):f.addTextSection(b,d)}return f}length(){return this.text.length}getSection(o){return this.sections[this.sectionIndex[o]]}getSections(){return this.sections}getSectionIndex(o){return this.sectionIndex[o]}getCharCode(o){return this.text.charCodeAt(o)}verticalizePunctuation(o){this.text=(function(d,f){let g="";for(let b=0;b<d.length;b++){const w=d.charCodeAt(b+1)||null,E=d.charCodeAt(b-1)||null;g+=!f&&(w&&Vd(w)&&!uy[d[b+1]]||E&&Vd(E)&&!uy[d[b-1]])||!uy[d[b]]?d[b]:uy[d[b]]}return g})(this.text,o)}trim(){let o=0;for(let f=0;f<this.text.length&&gx[this.text.charCodeAt(f)];f++)o++;let d=this.text.length;for(let f=this.text.length-1;f>=0&&f>=o&&gx[this.text.charCodeAt(f)];f--)d--;this.text=this.text.substring(o,d),this.sectionIndex=this.sectionIndex.slice(o,d)}substring(o,d){const f=new Xg;return f.text=this.text.substring(o,d),f.sectionIndex=this.sectionIndex.slice(o,d),f.sections=this.sections,f}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((o,d)=>Math.max(o,this.sections[d].scale)),0)}addTextSection(o,d){this.text+=o.text,this.sections.push(dy.forText(o.scale,o.fontStack||d));const f=this.sections.length-1;for(let g=0;g<o.text.length;++g)this.sectionIndex.push(f)}addImageSection(o){const d=o.image?o.image.name:"";if(d.length===0)return void dt("Can't add FormattedSection with an empty image.");const f=this.getNextImageSectionCharCode();f?(this.text+=String.fromCharCode(f),this.sections.push(dy.forImage(d)),this.sectionIndex.push(this.sections.length-1)):dt("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function ZS(c,o,d,f,g,b,w,E,I,D,N,j,Q,ne,ae){const de=Xg.fromFeature(c,g);j===Xl.vertical&&de.verticalizePunctuation(Q);let Te=[];const Re=(function(qe,wt,yt,Ot,tn,kt){if(!qe)return[];const zt=[],Nt=(function(vn,Cn,bn,ii,ln,Vn){let ri=0;for(let Pi=0;Pi<vn.length();Pi++){const si=vn.getSection(Pi);ri+=qD(vn.getCharCode(Pi),si,ii,ln,Cn,Vn)}return ri/Math.max(1,Math.ceil(ri/bn))})(qe,wt,yt,Ot,tn,kt),Xt=qe.text.indexOf("")>=0;let an=0;for(let vn=0;vn<qe.length();vn++){const Cn=qe.getSection(vn),bn=qe.getCharCode(vn);if(gx[bn]||(an+=qD(bn,Cn,Ot,tn,wt,kt)),vn<qe.length()-1){const ii=!((Rt=bn)<11904||!(_n["Bopomofo Extended"](Rt)||_n.Bopomofo(Rt)||_n["CJK Compatibility Forms"](Rt)||_n["CJK Compatibility Ideographs"](Rt)||_n["CJK Compatibility"](Rt)||_n["CJK Radicals Supplement"](Rt)||_n["CJK Strokes"](Rt)||_n["CJK Symbols and Punctuation"](Rt)||_n["CJK Unified Ideographs Extension A"](Rt)||_n["CJK Unified Ideographs"](Rt)||_n["Enclosed CJK Letters and Months"](Rt)||_n["Halfwidth and Fullwidth Forms"](Rt)||_n.Hiragana(Rt)||_n["Ideographic Description Characters"](Rt)||_n["Kangxi Radicals"](Rt)||_n["Katakana Phonetic Extensions"](Rt)||_n.Katakana(Rt)||_n["Vertical Forms"](Rt)||_n["Yi Radicals"](Rt)||_n["Yi Syllables"](Rt)));(k8[bn]||ii||Cn.imageName)&&zt.push(XD(vn+1,an,Nt,zt,I8(bn,qe.getCharCode(vn+1),ii&&Xt),!1))}}var Rt;return YD(XD(qe.length(),an,Nt,zt,0,!0))})(de,D,b,o,f,ne),{processBidirectionalText:$e,processStyledBidirectionalText:Oe}=O;if($e&&de.sections.length===1){const qe=$e(de.toString(),Re);for(const wt of qe){const yt=new Xg;yt.text=wt,yt.sections=de.sections;for(let Ot=0;Ot<wt.length;Ot++)yt.sectionIndex.push(0);Te.push(yt)}}else if(Oe){const qe=Oe(de.text,de.sectionIndex,Re);for(const wt of qe){const yt=new Xg;yt.text=wt[0],yt.sectionIndex=wt[1],yt.sections=de.sections,Te.push(yt)}}else Te=(function(qe,wt){const yt=[],Ot=qe.text;let tn=0;for(const kt of wt)yt.push(qe.substring(tn,kt)),tn=kt;return tn<Ot.length&&yt.push(qe.substring(tn,Ot.length)),yt})(de,Re);const ze=[],Xe={positionedLines:ze,text:de.toString(),top:N[1],bottom:N[1],left:N[0],right:N[0],writingMode:j,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return(function(qe,wt,yt,Ot,tn,kt,zt,Nt,Xt,an,Rt,vn){let Cn=0,bn=0,ii=0;const ln=Nt==="right"?1:Nt==="left"?0:.5;let Vn=!1;for(const ai of tn){const li=ai.getSections();for(const ar of li){if(ar.imageName)continue;const _r=wt[ar.fontStack];if(_r&&(Vn=_r.ascender!==void 0&&_r.descender!==void 0,!Vn))break}if(!Vn)break}let ri=0;for(const ai of tn){ai.trim();const li=ai.getMaxScale(),ar=(li-1)*uo,_r={positionedGlyphs:[],lineOffset:0};qe.positionedLines[ri]=_r;const yr=_r.positionedGlyphs;let lr=0;if(!ai.length()){bn+=kt,++ri;continue}let Vr=0,Yr=0;for(let cr=0;cr<ai.length();cr++){const As=ai.getSection(cr),ms=ai.getSectionIndex(cr),Wr=ai.getCharCode(cr);let Li=As.scale,ps=null,br=null,Ea=null,gs=uo,ho=0;const Js=!(Xt===Xl.horizontal||!Rt&&!Mu(Wr)||Rt&&(gx[Wr]||(Pi=Wr,_n.Arabic(Pi)||_n["Arabic Supplement"](Pi)||_n["Arabic Extended-A"](Pi)||_n["Arabic Presentation Forms-A"](Pi)||_n["Arabic Presentation Forms-B"](Pi))));if(As.imageName){const Ca=Ot[As.imageName];if(!Ca)continue;Ea=As.imageName,qe.iconsInText=qe.iconsInText||!0,br=Ca.paddedRect;const Qs=Ca.displaySize;Li=Li*uo/vn,ps={width:Qs[0],height:Qs[1],left:il,top:-WD,advance:Js?Qs[1]:Qs[0],localGlyph:!1},ho=Vn?-ps.height*Li:GD+li*uo-Qs[1]*Li,gs=ps.advance;const au=(Js?Qs[0]:Qs[1])*Li-uo*li;au>0&&au>lr&&(lr=au)}else{const Ca=yt[As.fontStack];if(!Ca)continue;Ca[Wr]&&(br=Ca[Wr]);const Qs=wt[As.fontStack];if(!Qs)continue;const au=Qs.glyphs[Wr];if(!au)continue;if(ps=au.metrics,gs=Wr!==8203?uo:0,Vn){const nv=Qs.ascender!==void 0?Math.abs(Qs.ascender):0,xy=Qs.descender!==void 0?Math.abs(Qs.descender):0,wy=(nv+xy)*Li;Vr<wy&&(Vr=wy,Yr=(nv-xy)/2*Li),ho=-nv*Li}else ho=GD+(li-Li)*uo}Js?(qe.verticalizable=!0,yr.push({glyph:Wr,imageName:Ea,x:Cn,y:bn+ho,vertical:Js,scale:Li,localGlyph:ps.localGlyph,fontStack:As.fontStack,sectionIndex:ms,metrics:ps,rect:br}),Cn+=gs*Li+an):(yr.push({glyph:Wr,imageName:Ea,x:Cn,y:bn+ho,vertical:Js,scale:Li,localGlyph:ps.localGlyph,fontStack:As.fontStack,sectionIndex:ms,metrics:ps,rect:br}),Cn+=ps.advance*Li+an)}yr.length!==0&&(ii=Math.max(Cn-an,ii),Vn?ZD(yr,ln,lr,Yr,kt*li/2):ZD(yr,ln,lr,0,kt/2)),Cn=0;const fs=kt*li+lr;_r.lineOffset=Math.max(lr,ar),bn+=fs,++ri}var Pi;const si=bn,{horizontalAlign:Un,verticalAlign:Tr}=JS(zt);(function(ai,li,ar,_r,yr,lr){const Vr=(li-ar)*yr,Yr=-lr*_r;for(const fs of ai)for(const cr of fs.positionedGlyphs)cr.x+=Vr,cr.y+=Yr})(qe.positionedLines,ln,Un,Tr,ii,si),qe.top+=-Tr*si,qe.bottom=qe.top+si,qe.left+=-Un*ii,qe.right=qe.left+ii,qe.hasBaseline=Vn})(Xe,o,d,f,Te,w,E,I,j,D,Q,ae),!(function(qe){for(const wt of qe)if(wt.positionedGlyphs.length!==0)return!1;return!0})(ze)&&Xe}const gx={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},k8={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function qD(c,o,d,f,g,b){if(o.imageName){const w=f[o.imageName];return w?w.displaySize[0]*o.scale*uo/b+g:0}{const w=d[o.fontStack],E=w&&w.glyphs[c];return E?E.metrics.advance*o.scale+g:0}}function KD(c,o,d,f){const g=Math.pow(c-o,2);return f?c<o?g/2:2*g:g+Math.abs(d)*d}function I8(c,o,d){let f=0;return c===10&&(f-=1e4),d&&(f+=150),c!==40&&c!==65288||(f+=50),o!==41&&o!==65289||(f+=50),f}function XD(c,o,d,f,g,b){let w=null,E=KD(o,d,g,b);for(const I of f){const D=KD(o-I.x,d,g,b)+I.badness;D<=E&&(w=I,E=D)}return{index:c,x:o,priorBreak:w,badness:E}}function YD(c){return c?YD(c.priorBreak).concat(c.index):[]}function JS(c){let o=.5,d=.5;switch(c){case"right":case"top-right":case"bottom-right":o=1;break;case"left":case"top-left":case"bottom-left":o=0}switch(c){case"bottom":case"bottom-right":case"bottom-left":d=1;break;case"top":case"top-right":case"top-left":d=0}return{horizontalAlign:o,verticalAlign:d}}function ZD(c,o,d,f,g){if(!(o||d||f||g))return;const b=c.length-1,w=c[b],E=(w.x+w.metrics.advance*w.scale)*o;for(let I=0;I<=b;I++)c[I].x-=E,c[I].y+=d+f+g}function A8(c,o,d){const{horizontalAlign:f,verticalAlign:g}=JS(d),b=o[0]-c.displaySize[0]*f,w=o[1]-c.displaySize[1]*g;return{image:c,top:w,bottom:w+c.displaySize[1],left:b,right:b+c.displaySize[0]}}function JD(c,o,d,f,g,b){const w=c.image;let E;if(w.content){const Te=w.content,Re=w.pixelRatio||1;E=[Te[0]/Re,Te[1]/Re,w.displaySize[0]-Te[2]/Re,w.displaySize[1]-Te[3]/Re]}const I=o.left*b,D=o.right*b;let N,j,Q,ne;d==="width"||d==="both"?(ne=g[0]+I-f[3],j=g[0]+D+f[1]):(ne=g[0]+(I+D-w.displaySize[0])/2,j=ne+w.displaySize[0]);const ae=o.top*b,de=o.bottom*b;return d==="height"||d==="both"?(N=g[1]+ae-f[0],Q=g[1]+de+f[2]):(N=g[1]+(ae+de-w.displaySize[1])/2,Q=N+w.displaySize[1]),{image:w,top:N,right:j,bottom:Q,left:ne,collisionPadding:E}}class qd extends X{constructor(o,d,f,g,b){super(o,d),this.angle=g,this.z=f,b!==void 0&&(this.segment=b)}clone(){return new qd(this.x,this.y,this.z,this.angle,this.segment)}}function QD(c,o,d,f,g){if(o.segment===void 0)return!0;let b=o,w=o.segment+1,E=0;for(;E>-d/2;){if(w--,w<0)return!1;E-=c[w].dist(b),b=c[w]}E+=c[w].dist(c[w+1]),w++;const I=[];let D=0;for(;E<d/2;){const N=c[w],j=c[w+1];if(!j)return!1;let Q=c[w-1].angleTo(N)-N.angleTo(j);for(Q=Math.abs((Q+3*Math.PI)%(2*Math.PI)-Math.PI),I.push({distance:E,angleDelta:Q}),D+=Q;E-I[0].distance>f;)D-=I.shift().angleDelta;if(D>g)return!1;w++,E+=N.dist(j)}return!0}function eL(c){let o=0;for(let d=0;d<c.length-1;d++)o+=c[d].dist(c[d+1]);return o}function tL(c,o,d){return c?.6*o*d:0}function nL(c,o){return Math.max(c?c.right-c.left:0,o?o.right-o.left:0)}function P8(c,o,d,f,g,b){const w=tL(d,g,b),E=nL(d,f)*b;let I=0;const D=eL(c)/2;for(let N=0;N<c.length-1;N++){const j=c[N],Q=c[N+1],ne=j.dist(Q);if(I+ne>D){const ae=(D-I)/ne,de=Qn(j.x,Q.x,ae),Te=Qn(j.y,Q.y,ae),Re=new qd(de,Te,0,Q.angleTo(j),N);return!w||QD(c,Re,E,w,o)?Re:void 0}I+=ne}}function M8(c,o,d,f,g,b,w,E,I){const D=tL(f,b,w),N=nL(f,g),j=N*w,Q=c[0].x===0||c[0].x===I||c[0].y===0||c[0].y===I;return o-j<o/4&&(o=j+o/4),iL(c,Q?o/2*E%o:(N/2+2*b)*w*E%o,o,D,d,j,Q,!1,I)}function iL(c,o,d,f,g,b,w,E,I){const D=b/2,N=eL(c);let j=0,Q=o-d,ne=[];for(let ae=0;ae<c.length-1;ae++){const de=c[ae],Te=c[ae+1],Re=de.dist(Te),$e=Te.angleTo(de);for(;Q+d<j+Re;){Q+=d;const Oe=(Q-j)/Re,ze=Qn(de.x,Te.x,Oe),Xe=Qn(de.y,Te.y,Oe);if(ze>=0&&ze<I&&Xe>=0&&Xe<I&&Q-D>=0&&Q+D<=N){const qe=new qd(ze,Xe,0,$e,ae);qe._round(),f&&!QD(c,qe,b,f,g)||ne.push(qe)}}j+=Re}return E||ne.length||w||(ne=iL(c,j/2,d,f,g,b,w,!0,I)),ne}function rL(c,o,d,f,g){const b=[];for(let w=0;w<c.length;w++){const E=c[w];let I;for(let D=0;D<E.length-1;D++){let N=E[D],j=E[D+1];N.x<o&&j.x<o||(N.x<o?N=new X(o,N.y+(o-N.x)/(j.x-N.x)*(j.y-N.y))._round():j.x<o&&(j=new X(o,N.y+(o-N.x)/(j.x-N.x)*(j.y-N.y))._round()),N.y<d&&j.y<d||(N.y<d?N=new X(N.x+(d-N.y)/(j.y-N.y)*(j.x-N.x),d)._round():j.y<d&&(j=new X(N.x+(d-N.y)/(j.y-N.y)*(j.x-N.x),d)._round()),N.x>=f&&j.x>=f||(N.x>=f?N=new X(f,N.y+(f-N.x)/(j.x-N.x)*(j.y-N.y))._round():j.x>=f&&(j=new X(f,N.y+(f-N.x)/(j.x-N.x)*(j.y-N.y))._round()),N.y>=g&&j.y>=g||(N.y>=g?N=new X(N.x+(g-N.y)/(j.y-N.y)*(j.x-N.x),g)._round():j.y>=g&&(j=new X(N.x+(g-N.y)/(j.y-N.y)*(j.x-N.x),g)._round()),I&&N.equals(I[I.length-1])||(I=[N],b.push(I)),I.push(j)))))}}return b}Tn(qd,"Anchor");const hy=1e20;function sL(c,o,d,f,g,b,w,E,I){for(let D=o;D<o+f;D++)oL(c,d*b+D,b,g,w,E,I);for(let D=d;D<d+g;D++)oL(c,D*b+o,1,f,w,E,I)}function oL(c,o,d,f,g,b,w){b[0]=0,w[0]=-hy,w[1]=hy,g[0]=c[o];for(let E=1,I=0,D=0;E<f;E++){g[E]=c[o+E*d];const N=E*E;do{const j=b[I];D=(g[E]-g[j]+N-j*j)/(E-j)/2}while(D<=w[I]&&--I>-1);I++,b[I]=E,w[I]=D,w[I+1]=hy}for(let E=0,I=0;E<f;E++){for(;w[I+1]<E;)I++;const D=b[I],N=E-D;c[o+E*d]=g[D]+N*N}}const su=2,QS={none:0,ideographs:1,all:2};class Yg{constructor(o,d,f){this.requestManager=o,this.localGlyphMode=d,this.localFontFamily=f,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(o){this.url=o}getGlyphs(o,d){const f=[];for(const g in o)for(const b of o[g])f.push({stack:g,id:b});Je(f,(({stack:g,id:b},w)=>{let E=this.entries[g];E||(E=this.entries[g]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let I=E.glyphs[b];if(I!==void 0)return void w(null,{stack:g,id:b,glyph:I});if(I=this._tinySDF(E,g,b),I)return E.glyphs[b]=I,void w(null,{stack:g,id:b,glyph:I});const D=Math.floor(b/256);if(256*D>65535)return void w(new Error("glyphs > 65535 not supported"));if(E.ranges[D])return void w(null,{stack:g,id:b,glyph:I});let N=E.requests[D];N||(N=E.requests[D]=[],Yg.loadGlyphRange(g,D,this.url,this.requestManager,((j,Q)=>{if(Q){E.ascender=Q.ascender,E.descender=Q.descender;for(const ne in Q.glyphs)this._doesCharSupportLocalGlyph(+ne)||(E.glyphs[+ne]=Q.glyphs[+ne]);E.ranges[D]=!0}for(const ne of N)ne(j,Q);delete E.requests[D]}))),N.push(((j,Q)=>{j?w(j):Q&&w(null,{stack:g,id:b,glyph:Q.glyphs[b]||null})}))}),((g,b)=>{if(g)d(g);else if(b){const w={};for(const{stack:E,id:I,glyph:D}of b)w[E]===void 0&&(w[E]={}),w[E].glyphs===void 0&&(w[E].glyphs={}),w[E].glyphs[I]=D&&{id:D.id,bitmap:D.bitmap.clone(),metrics:D.metrics},w[E].ascender=this.entries[E].ascender,w[E].descender=this.entries[E].descender;d(null,w)}}))}_doesCharSupportLocalGlyph(o){return this.localGlyphMode!==QS.none&&(this.localGlyphMode===QS.all?!!this.localFontFamily:!!this.localFontFamily&&(_n["CJK Unified Ideographs"](o)||_n["Hangul Syllables"](o)||_n.Hiragana(o)||_n.Katakana(o)||_n["CJK Symbols and Punctuation"](o)))}_tinySDF(o,d,f){const g=this.localFontFamily;if(!g||!this._doesCharSupportLocalGlyph(f))return;let b=o.tinySDF;if(!b){let de="400";/bold/i.test(d)?de="900":/medium/i.test(d)?de="500":/light/i.test(d)&&(de="200"),b=o.tinySDF=new Yg.TinySDF({fontFamily:g,fontWeight:de,fontSize:24*su,buffer:3*su,radius:8*su}),b.fontWeight=de}if(this.localGlyphs[b.fontWeight][f])return this.localGlyphs[b.fontWeight][f];const w=String.fromCharCode(f),{data:E,width:I,height:D,glyphWidth:N,glyphHeight:j,glyphLeft:Q,glyphTop:ne,glyphAdvance:ae}=b.draw(w);return this.localGlyphs[b.fontWeight][f]={id:f,bitmap:new Hd({width:I,height:D},E),metrics:{width:N/su,height:j/su,left:Q/su,top:ne/su-27,advance:ae/su,localGlyph:!0}}}}Yg.loadGlyphRange=function(c,o,d,f,g){const b=256*o,w=b+255,E=f.transformRequest(f.normalizeGlyphsURL(d).replace("{fontstack}",c).replace("{range}",`${b}-${w}`),wo.Glyphs);To(E,((I,D)=>{if(I)g(I);else if(D){const N={},j=(function(Q){return new px(Q).readFields(S8,{})})(D);for(const Q of j.glyphs)N[Q.id]=Q;g(null,{glyphs:N,ascender:j.ascender,descender:j.descender})}}))},Yg.TinySDF=class{constructor({fontSize:c=24,buffer:o=3,radius:d=8,cutoff:f=.25,fontFamily:g="sans-serif",fontWeight:b="normal",fontStyle:w="normal"}={}){this.buffer=o,this.cutoff=f,this.radius=d;const E=this.size=c+4*o,I=this._createCanvas(E),D=this.ctx=I.getContext("2d",{willReadFrequently:!0});D.font=`${w} ${b} ${c}px ${g}`,D.textBaseline="alphabetic",D.textAlign="left",D.fillStyle="black",this.gridOuter=new Float64Array(E*E),this.gridInner=new Float64Array(E*E),this.f=new Float64Array(E),this.z=new Float64Array(E+1),this.v=new Uint16Array(E)}_createCanvas(c){const o=document.createElement("canvas");return o.width=o.height=c,o}draw(c){const{width:o,actualBoundingBoxAscent:d,actualBoundingBoxDescent:f,actualBoundingBoxLeft:g,actualBoundingBoxRight:b}=this.ctx.measureText(c),w=Math.ceil(d),E=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(b-g))),I=Math.min(this.size-this.buffer,w+Math.ceil(f)),D=E+2*this.buffer,N=I+2*this.buffer,j=Math.max(D*N,0),Q=new Uint8ClampedArray(j),ne={data:Q,width:D,height:N,glyphWidth:E,glyphHeight:I,glyphTop:w,glyphLeft:0,glyphAdvance:o};if(E===0||I===0)return ne;const{ctx:ae,buffer:de,gridInner:Te,gridOuter:Re}=this;ae.clearRect(de,de,E,I),ae.fillText(c,de,de+w);const $e=ae.getImageData(de,de,E,I);Re.fill(hy,0,j),Te.fill(0,0,j);for(let Oe=0;Oe<I;Oe++)for(let ze=0;ze<E;ze++){const Xe=$e.data[4*(Oe*E+ze)+3]/255;if(Xe===0)continue;const qe=(Oe+de)*D+ze+de;if(Xe===1)Re[qe]=0,Te[qe]=hy;else{const wt=.5-Xe;Re[qe]=wt>0?wt*wt:0,Te[qe]=wt<0?wt*wt:0}}sL(Re,0,0,D,N,D,this.f,this.v,this.z),sL(Te,de,de,E,I,D,this.f,this.v,this.z);for(let Oe=0;Oe<j;Oe++){const ze=Math.sqrt(Re[Oe])-Math.sqrt(Te[Oe]);Q[Oe]=Math.round(255-255*(ze/this.radius+this.cutoff))}return ne}};const Zg=il;function aL(c,o,d,f){const g=[],b=c.image,w=b.pixelRatio,E=b.paddedRect.w-2*Zg,I=b.paddedRect.h-2*Zg,D=c.right-c.left,N=c.bottom-c.top,j=b.stretchX||[[0,E]],Q=b.stretchY||[[0,I]],ne=(kt,zt)=>kt+zt[1]-zt[0],ae=j.reduce(ne,0),de=Q.reduce(ne,0),Te=E-ae,Re=I-de;let $e=0,Oe=ae,ze=0,Xe=de,qe=0,wt=Te,yt=0,Ot=Re;if(b.content&&f){const kt=b.content;$e=vx(j,0,kt[0]),ze=vx(Q,0,kt[1]),Oe=vx(j,kt[0],kt[2]),Xe=vx(Q,kt[1],kt[3]),qe=kt[0]-$e,yt=kt[1]-ze,wt=kt[2]-kt[0]-Oe,Ot=kt[3]-kt[1]-Xe}const tn=(kt,zt,Nt,Xt)=>{const an=_x(kt.stretch-$e,Oe,D,c.left),Rt=yx(kt.fixed-qe,wt,kt.stretch,ae),vn=_x(zt.stretch-ze,Xe,N,c.top),Cn=yx(zt.fixed-yt,Ot,zt.stretch,de),bn=_x(Nt.stretch-$e,Oe,D,c.left),ii=yx(Nt.fixed-qe,wt,Nt.stretch,ae),ln=_x(Xt.stretch-ze,Xe,N,c.top),Vn=yx(Xt.fixed-yt,Ot,Xt.stretch,de),ri=new X(an,vn),Pi=new X(bn,vn),si=new X(bn,ln),Un=new X(an,ln),Tr=new X(Rt/w,Cn/w),ai=new X(ii/w,Vn/w),li=o*Math.PI/180;if(li){const yr=Math.sin(li),lr=Math.cos(li),Vr=[lr,-yr,yr,lr];ri._matMult(Vr),Pi._matMult(Vr),Un._matMult(Vr),si._matMult(Vr)}const ar=kt.stretch+kt.fixed,_r=zt.stretch+zt.fixed;return{tl:ri,tr:Pi,bl:Un,br:si,tex:{x:b.paddedRect.x+Zg+ar,y:b.paddedRect.y+Zg+_r,w:Nt.stretch+Nt.fixed-ar,h:Xt.stretch+Xt.fixed-_r},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Tr,pixelOffsetBR:ai,minFontScaleX:wt/w/D,minFontScaleY:Ot/w/N,isSDF:d}};if(f&&(b.stretchX||b.stretchY)){const kt=lL(j,Te,ae),zt=lL(Q,Re,de);for(let Nt=0;Nt<kt.length-1;Nt++){const Xt=kt[Nt],an=kt[Nt+1];for(let Rt=0;Rt<zt.length-1;Rt++)g.push(tn(Xt,zt[Rt],an,zt[Rt+1]))}}else g.push(tn({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:E+1},{fixed:0,stretch:I+1}));return g}function vx(c,o,d){let f=0;for(const g of c)f+=Math.max(o,Math.min(d,g[1]))-Math.max(o,Math.min(d,g[0]));return f}function lL(c,o,d){const f=[{fixed:-Zg,stretch:0}];for(const[g,b]of c){const w=f[f.length-1];f.push({fixed:g-w.stretch,stretch:w.stretch}),f.push({fixed:g-w.stretch,stretch:w.stretch+(b-g)})}return f.push({fixed:o+Zg,stretch:d}),f}function _x(c,o,d,f){return c/o*d+f}function yx(c,o,d,f){return c-o*d/f}function D8(c,o,d,f){const g=o+c.positionedLines[f].lineOffset;return f===0?d+g/2:d+(g+(o+c.positionedLines[f-1].lineOffset))/2}class L8{constructor(o=[],d=R8){if(this.data=o,this.length=this.data.length,this.compare=d,this.length>0)for(let f=(this.length>>1)-1;f>=0;f--)this._down(f)}push(o){this.data.push(o),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const o=this.data[0],d=this.data.pop();return this.length--,this.length>0&&(this.data[0]=d,this._down(0)),o}peek(){return this.data[0]}_up(o){const{data:d,compare:f}=this,g=d[o];for(;o>0;){const b=o-1>>1,w=d[b];if(f(g,w)>=0)break;d[o]=w,o=b}d[o]=g}_down(o){const{data:d,compare:f}=this,g=this.length>>1,b=d[o];for(;o<g;){let w=1+(o<<1),E=d[w];const I=w+1;if(I<this.length&&f(d[I],E)<0&&(w=I,E=d[I]),f(E,b)>=0)break;d[o]=E,o=w}d[o]=b}}function R8(c,o){return c<o?-1:c>o?1:0}function O8(c,o=1,d=!1){let f=1/0,g=1/0,b=-1/0,w=-1/0;const E=c[0];for(let ne=0;ne<E.length;ne++){const ae=E[ne];(!ne||ae.x<f)&&(f=ae.x),(!ne||ae.y<g)&&(g=ae.y),(!ne||ae.x>b)&&(b=ae.x),(!ne||ae.y>w)&&(w=ae.y)}const I=Math.min(b-f,w-g);let D=I/2;const N=new L8([],V8);if(I===0)return new X(f,g);for(let ne=f;ne<b;ne+=I)for(let ae=g;ae<w;ae+=I)N.push(new Jg(ne+D,ae+D,D,c));let j=(function(ne){let ae=0,de=0,Te=0;const Re=ne[0];for(let $e=0,Oe=Re.length,ze=Oe-1;$e<Oe;ze=$e++){const Xe=Re[$e],qe=Re[ze],wt=Xe.x*qe.y-qe.x*Xe.y;de+=(Xe.x+qe.x)*wt,Te+=(Xe.y+qe.y)*wt,ae+=3*wt}return new Jg(de/ae,Te/ae,0,ne)})(c),Q=N.length;for(;N.length;){const ne=N.pop();(ne.d>j.d||!j.d)&&(j=ne,d&&console.log("found best %d after %d probes",Math.round(1e4*ne.d)/1e4,Q)),ne.max-j.d<=o||(D=ne.h/2,N.push(new Jg(ne.p.x-D,ne.p.y-D,D,c)),N.push(new Jg(ne.p.x+D,ne.p.y-D,D,c)),N.push(new Jg(ne.p.x-D,ne.p.y+D,D,c)),N.push(new Jg(ne.p.x+D,ne.p.y+D,D,c)),Q+=4)}return d&&(console.log(`num probes: ${Q}`),console.log(`best distance: ${j.d}`)),j.p}function V8(c,o){return o.max-c.max}class Jg{constructor(o,d,f,g){this.p=new X(o,d),this.h=f,this.d=(function(b,w){let E=!1,I=1/0;for(let D=0;D<w.length;D++){const N=w[D];for(let j=0,Q=N.length,ne=Q-1;j<Q;ne=j++){const ae=N[j],de=N[ne];ae.y>b.y!=de.y>b.y&&b.x<(de.x-ae.x)*(b.y-ae.y)/(de.y-ae.y)+ae.x&&(E=!E),I=Math.min(I,iD(b,ae,de))}}return(E?1:-1)*Math.sqrt(I)})(this.p,g),this.max=this.d+this.h*Math.SQRT2}}const Qg=7,eE=Number.POSITIVE_INFINITY,B8=Math.sqrt(2);function cL(c,[o,d]){let f=0,g=0;if(d===eE){o<0&&(o=0);const b=o/B8;switch(c){case"top-right":case"top-left":g=b-Qg;break;case"bottom-right":case"bottom-left":g=-b+Qg;break;case"bottom":g=-o+Qg;break;case"top":g=o-Qg}switch(c){case"top-right":case"bottom-right":f=-b;break;case"top-left":case"bottom-left":f=b;break;case"left":f=o;break;case"right":f=-o}}else{switch(o=Math.abs(o),d=Math.abs(d),c){case"top-right":case"top-left":case"top":g=d-Qg;break;case"bottom-right":case"bottom-left":case"bottom":g=-d+Qg}switch(c){case"top-right":case"bottom-right":case"right":f=-o;break;case"top-left":case"bottom-left":case"left":f=o}}return[f,g]}function F8(c,o,d,f,g,b,w,E,I,D){c.createArrays(),c.tilePixelRatio=zn/(512*c.overscaling),c.compareText={},c.iconsNeedLinear=!1;const N=c.layers[0].layout,j=c.layers[0]._unevaluatedLayout._values,Q={};if(c.textSizeData.kind==="composite"){const{minZoom:de,maxZoom:Te}=c.textSizeData;Q.compositeTextSizes=[j["text-size"].possiblyEvaluate(new U(de),E),j["text-size"].possiblyEvaluate(new U(Te),E)]}if(c.iconSizeData.kind==="composite"){const{minZoom:de,maxZoom:Te}=c.iconSizeData;Q.compositeIconSizes=[j["icon-size"].possiblyEvaluate(new U(de),E),j["icon-size"].possiblyEvaluate(new U(Te),E)]}Q.layoutTextSize=j["text-size"].possiblyEvaluate(new U(I+1),E),Q.layoutIconSize=j["icon-size"].possiblyEvaluate(new U(I+1),E),Q.textMaxSize=j["text-size"].possiblyEvaluate(new U(18),E);const ne=N.get("text-rotation-alignment")==="map"&&N.get("symbol-placement")!=="point",ae=N.get("text-size");for(const de of c.features){const Te=N.get("text-font").evaluate(de,{},E).join(","),Re=ae.evaluate(de,{},E),$e=Q.layoutTextSize.evaluate(de,{},E),Oe=(Q.layoutIconSize.evaluate(de,{},E),{horizontal:{},vertical:void 0}),ze=de.text;let Xe,qe=[0,0];if(ze){const Ot=ze.toString(),tn=N.get("text-letter-spacing").evaluate(de,{},E)*uo,kt=N.get("text-line-height").evaluate(de,{},E)*uo,zt=N_(Ot)?tn:0,Nt=N.get("text-anchor").evaluate(de,{},E),Xt=N.get("text-variable-anchor");if(!Xt){const bn=N.get("text-radial-offset").evaluate(de,{},E);qe=bn?cL(Nt,[bn*uo,eE]):N.get("text-offset").evaluate(de,{},E).map((ii=>ii*uo))}let an=ne?"center":N.get("text-justify").evaluate(de,{},E);const Rt=N.get("symbol-placement")==="point",vn=Rt?N.get("text-max-width").evaluate(de,{},E)*uo:1/0,Cn=bn=>{c.allowVerticalPlacement&&Nm(Ot)&&(Oe.vertical=ZS(ze,o,d,g,Te,vn,kt,Nt,bn,zt,qe,Xl.vertical,!0,$e,Re))};if(!ne&&Xt){const bn=an==="auto"?Xt.map((ln=>tE(ln))):[an];let ii=!1;for(let ln=0;ln<bn.length;ln++){const Vn=bn[ln];if(!Oe.horizontal[Vn])if(ii)Oe.horizontal[Vn]=Oe.horizontal[0];else{const ri=ZS(ze,o,d,g,Te,vn,kt,"center",Vn,zt,qe,Xl.horizontal,!1,$e,Re);ri&&(Oe.horizontal[Vn]=ri,ii=ri.positionedLines.length===1)}}Cn("left")}else{if(an==="auto"&&(an=tE(Nt)),Rt||N.get("text-writing-mode").indexOf("horizontal")>=0||!Nm(Ot)){const bn=ZS(ze,o,d,g,Te,vn,kt,Nt,an,zt,qe,Xl.horizontal,!1,$e,Re);bn&&(Oe.horizontal[an]=bn)}Cn(Rt?"left":an)}}let wt=!1;if(de.icon&&de.icon.name){const Ot=f[de.icon.name];Ot&&(Xe=A8(g[de.icon.name],N.get("icon-offset").evaluate(de,{},E),N.get("icon-anchor").evaluate(de,{},E)),wt=Ot.sdf,c.sdfIcons===void 0?c.sdfIcons=Ot.sdf:c.sdfIcons!==Ot.sdf&&dt("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ot.pixelRatio!==c.pixelRatio||N.get("icon-rotate").constantOr(1)!==0)&&(c.iconsNeedLinear=!0))}const yt=dL(Oe.horizontal)||Oe.vertical;c.iconsInText||(c.iconsInText=!!yt&&yt.iconsInText),(yt||Xe)&&z8(c,de,Oe,Xe,f,Q,$e,0,qe,wt,w,E,D)}b&&c.generateCollisionDebugBuffers(I,c.collisionBoxArray)}function tE(c){switch(c){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function z8(c,o,d,f,g,b,w,E,I,D,N,j,Q){let ne=b.textMaxSize.evaluate(o,{},j);ne===void 0&&(ne=w);const ae=c.layers[0].layout,de=ae.get("icon-offset").evaluate(o,{},j),Te=dL(d.horizontal)||d.vertical,Re=Q.name==="globe",$e=uo,Oe=w/$e,ze=c.tilePixelRatio*ne/$e,Xe=(Nt=c.overscaling,c.zoom>18&&Nt>2&&(Nt>>=1),Math.max(zn/(512*Nt),1)*ae.get("symbol-spacing")),qe=ae.get("text-padding")*c.tilePixelRatio,wt=ae.get("icon-padding")*c.tilePixelRatio,yt=Z(ae.get("text-max-angle")),Ot=ae.get("text-rotation-alignment")==="map"&&ae.get("symbol-placement")!=="point",tn=ae.get("icon-rotation-alignment")==="map"&&ae.get("symbol-placement")!=="point",kt=ae.get("symbol-placement"),zt=Xe/2;var Nt;const Xt=ae.get("icon-text-fit");let an;f&&Xt!=="none"&&(c.allowVerticalPlacement&&d.vertical&&(an=JD(f,d.vertical,Xt,ae.get("icon-text-fit-padding"),de,Oe)),Te&&(f=JD(f,Te,Xt,ae.get("icon-text-fit-padding"),de,Oe)));const Rt=(vn,Cn,bn)=>{if(Cn.x<0||Cn.x>=zn||Cn.y<0||Cn.y>=zn)return;let ii=null;if(Re){const{x:ln,y:Vn,z:ri}=Q.projectTilePoint(Cn.x,Cn.y,bn);ii={anchor:new qd(ln,Vn,ri,0,void 0),up:Q.upVector(bn,Cn.x,Cn.y)}}(function(ln,Vn,ri,Pi,si,Un,Tr,ai,li,ar,_r,yr,lr,Vr,Yr,fs,cr,As,ms,Wr,Li,ps,br,Ea,gs){const ho=ln.addToLineVertexArray(Vn,Pi);let Js,Ca,Qs,au,nv,xy,wy,WL=0,HL=0,GL=0,qL=0,gE=-1,vE=-1;const zu={};let KL=hS("");const ep=ri?ri.anchor:Vn;let _E=0,yE=0;if(li._unevaluatedLayout.getValue("text-radial-offset")===void 0?[_E,yE]=li.layout.get("text-offset").evaluate(Li,{},gs).map((Sl=>Sl*uo)):(_E=li.layout.get("text-radial-offset").evaluate(Li,{},gs)*uo,yE=eE),ln.allowVerticalPlacement&&si.vertical){const Sl=si.vertical;if(Yr)xy=nE(Sl),ai&&(wy=nE(ai));else{const El=li.layout.get("text-rotate").evaluate(Li,{},gs)+90;Qs=bx(ar,ep,Vn,_r,yr,lr,Sl,Vr,El,fs),ai&&(au=bx(ar,ep,Vn,_r,yr,lr,ai,As,El))}}if(Un){const Sl=li.layout.get("icon-rotate").evaluate(Li,{},gs),El=li.layout.get("icon-text-fit")!=="none",Ty=aL(Un,Sl,br,El),xE=ai?aL(ai,Sl,br,El):void 0;Ca=bx(ar,ep,Vn,_r,yr,lr,Un,As,Sl),WL=4*Ty.length;const XL=ln.iconSizeData;let tp=null;XL.kind==="source"?(tp=[ru*li.layout.get("icon-size").evaluate(Li,{},gs)],tp[0]>af&&dt(`${ln.layerIds[0]}: Value for "icon-size" is >= ${fy}. Reduce your "icon-size".`)):XL.kind==="composite"&&(tp=[ru*ps.compositeIconSizes[0].evaluate(Li,{},gs),ru*ps.compositeIconSizes[1].evaluate(Li,{},gs)],(tp[0]>af||tp[1]>af)&&dt(`${ln.layerIds[0]}: Value for "icon-size" is >= ${fy}. Reduce your "icon-size".`)),ln.addSymbols(ln.icon,Ty,tp,Wr,ms,Li,!1,ri,Vn,ho.lineStartIndex,ho.lineLength,-1,Ea,gs),gE=ln.icon.placedSymbolArray.length-1,xE&&(HL=4*xE.length,ln.addSymbols(ln.icon,xE,tp,Wr,ms,Li,Xl.vertical,ri,Vn,ho.lineStartIndex,ho.lineLength,-1,Ea,gs),vE=ln.icon.placedSymbolArray.length-1)}for(const Sl in si.horizontal){const El=si.horizontal[Sl];Js||(KL=hS(El.text),Yr?nv=nE(El):Js=bx(ar,ep,Vn,_r,yr,lr,El,Vr,li.layout.get("text-rotate").evaluate(Li,{},gs),fs));const Ty=El.positionedLines.length===1;if(GL+=uL(ln,ri,Vn,El,Tr,li,Yr,Li,fs,ho,si.vertical?Xl.horizontal:Xl.horizontalOnly,Ty?Object.keys(si.horizontal):[Sl],zu,gE,ps,Ea,gs),Ty)break}si.vertical&&(qL+=uL(ln,ri,Vn,si.vertical,Tr,li,Yr,Li,fs,ho,Xl.vertical,["vertical"],zu,vE,ps,Ea,gs));let ff=-1;const bE=(Sl,El)=>Sl?Math.max(Sl,El):El;ff=bE(nv,ff),ff=bE(xy,ff),ff=bE(wy,ff);const fW=ff>-1?1:0;ln.glyphOffsetArray.length>=cf.MAX_GLYPHS&&dt("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Li.sortKey!==void 0&&ln.addToSortKeyRanges(ln.symbolInstances.length,Li.sortKey),ln.symbolInstances.emplaceBack(ep.x,ep.y,ep.z,Vn.x,Vn.y,zu.right>=0?zu.right:-1,zu.center>=0?zu.center:-1,zu.left>=0?zu.left:-1,zu.vertical>=0?zu.vertical:-1,gE,vE,KL,Js!==void 0?Js:ln.collisionBoxArray.length,Js!==void 0?Js+1:ln.collisionBoxArray.length,Qs!==void 0?Qs:ln.collisionBoxArray.length,Qs!==void 0?Qs+1:ln.collisionBoxArray.length,Ca!==void 0?Ca:ln.collisionBoxArray.length,Ca!==void 0?Ca+1:ln.collisionBoxArray.length,au||ln.collisionBoxArray.length,au?au+1:ln.collisionBoxArray.length,_r,GL,qL,WL,HL,fW,0,_E,yE,ff)})(c,Cn,ii,vn,d,f,g,an,c.layers[0],c.collisionBoxArray,o.index,o.sourceLayerIndex,c.index,qe,Ot,I,0,wt,tn,de,o,b,D,N,j)};if(kt==="line")for(const vn of rL(o.geometry,0,0,zn,zn)){const Cn=M8(vn,Xe,yt,d.vertical||Te,f,$e,ze,c.overscaling,zn);for(const bn of Cn)Te&&N8(c,Te.text,zt,bn)||Rt(vn,bn,j)}else if(kt==="line-center"){for(const vn of o.geometry)if(vn.length>1){const Cn=P8(vn,yt,d.vertical||Te,f,$e,ze);Cn&&Rt(vn,Cn,j)}}else if(o.type==="Polygon")for(const vn of $S(o.geometry,0)){const Cn=O8(vn,16);Rt(vn[0],new qd(Cn.x,Cn.y,0,0,void 0),j)}else if(o.type==="LineString")for(const vn of o.geometry)Rt(vn,new qd(vn[0].x,vn[0].y,0,0,void 0),j);else if(o.type==="Point")for(const vn of o.geometry)for(const Cn of vn)Rt([Cn],new qd(Cn.x,Cn.y,0,0,void 0),j)}const fy=255,af=fy*ru;function uL(c,o,d,f,g,b,w,E,I,D,N,j,Q,ne,ae,de,Te){const Re=(function(ze,Xe,qe,wt,yt,Ot,tn,kt){const zt=[];if(Xe.positionedLines.length===0)return zt;const Nt=wt.layout.get("text-rotate").evaluate(Ot,{})*Math.PI/180,Xt=(function(bn){const ii=bn[0],ln=bn[1],Vn=ii*ln;return Vn>0?[ii,-ln]:Vn<0?[-ii,ln]:ii===0?[ln,ii]:[ln,-ii]})(qe);let an=Math.abs(Xe.top-Xe.bottom);for(const bn of Xe.positionedLines)an-=bn.lineOffset;const Rt=Xe.positionedLines.length,vn=an/Rt;let Cn=Xe.top-qe[1];for(let bn=0;bn<Rt;++bn){const ii=Xe.positionedLines[bn];Cn=D8(Xe,vn,Cn,bn);for(const ln of ii.positionedGlyphs){if(!ln.rect)continue;const Vn=ln.rect||{};let ri=WD+1,Pi=!0,si=1,Un=0;if(ln.imageName){const br=tn[ln.imageName];if(!br)continue;if(br.sdf){dt("SDF images are not supported in formatted text and will be ignored.");continue}Pi=!1,si=br.pixelRatio,ri=il/si}const Tr=(yt||kt)&&ln.vertical,ai=ln.metrics.advance*ln.scale/2,li=ln.metrics,ar=ln.rect;if(ar===null)continue;kt&&Xe.verticalizable&&(Un=ln.imageName?ai-ln.metrics.width*ln.scale/2:0);const _r=yt?[ln.x+ai,ln.y]:[0,0];let yr=[0,0],lr=[0,0],Vr=!1;yt||(Tr?(lr=[ln.x+ai+Xt[0],ln.y+Xt[1]-Un],Vr=!0):yr=[ln.x+ai+qe[0],ln.y+qe[1]-Un]);const Yr=ar.w*ln.scale/(si*(ln.localGlyph?su:1)),fs=ar.h*ln.scale/(si*(ln.localGlyph?su:1));let cr,As,ms,Wr;if(Tr){const br=ln.y-Cn,Ea=new X(-ai,ai-br),gs=-Math.PI/2,ho=new X(...lr);cr=new X(-ai+yr[0],yr[1]),cr._rotateAround(gs,Ea)._add(ho),cr.x+=-br+ai,cr.y-=(li.left-ri)*ln.scale;const Js=ln.imageName?li.advance*ln.scale:uo*ln.scale,Ca=String.fromCharCode(ln.glyph);f8(Ca)?cr.x+=(1-ri)*ln.scale:m8(Ca)?cr.x+=Js-li.height*ln.scale+(-ri-1)*ln.scale:cr.x+=ln.imageName||li.width+2*ri===ar.w&&li.height+2*ri===ar.h?(Js-fs)/2:(Js-(li.height+2*ri)*ln.scale)/2,As=new X(cr.x,cr.y-Yr),ms=new X(cr.x+fs,cr.y),Wr=new X(cr.x+fs,cr.y-Yr)}else{const br=(li.left-ri)*ln.scale-ai+yr[0],Ea=(-li.top-ri)*ln.scale+yr[1],gs=br+Yr,ho=Ea+fs;cr=new X(br,Ea),As=new X(gs,Ea),ms=new X(br,ho),Wr=new X(gs,ho)}if(Nt){let br;br=yt?new X(0,0):Vr?new X(Xt[0],Xt[1]):new X(qe[0],qe[1]),cr._rotateAround(Nt,br),As._rotateAround(Nt,br),ms._rotateAround(Nt,br),Wr._rotateAround(Nt,br)}const Li=new X(0,0),ps=new X(0,0);zt.push({tl:cr,tr:As,bl:ms,br:Wr,tex:Vn,writingMode:Xe.writingMode,glyphOffset:_r,sectionIndex:ln.sectionIndex,isSDF:Pi,pixelOffsetTL:Li,pixelOffsetBR:ps,minFontScaleX:0,minFontScaleY:0})}}return zt})(0,f,I,b,w,E,g,c.allowVerticalPlacement),$e=c.textSizeData;let Oe=null;$e.kind==="source"?(Oe=[ru*b.layout.get("text-size").evaluate(E,{},Te)],Oe[0]>af&&dt(`${c.layerIds[0]}: Value for "text-size" is >= ${fy}. Reduce your "text-size".`)):$e.kind==="composite"&&(Oe=[ru*ae.compositeTextSizes[0].evaluate(E,{},Te),ru*ae.compositeTextSizes[1].evaluate(E,{},Te)],(Oe[0]>af||Oe[1]>af)&&dt(`${c.layerIds[0]}: Value for "text-size" is >= ${fy}. Reduce your "text-size".`)),c.addSymbols(c.text,Re,Oe,I,w,E,N,o,d,D.lineStartIndex,D.lineLength,ne,de,Te);for(const ze of j)Q[ze]=c.text.placedSymbolArray.length-1;return 4*Re.length}function dL(c){for(const o in c)return c[o];return null}function bx(c,o,d,f,g,b,w,E,I,D){let N=w.top,j=w.bottom,Q=w.left,ne=w.right;const ae=w.collisionPadding;if(ae&&(Q-=ae[0],N-=ae[1],ne+=ae[2],j+=ae[3]),I){const de=new X(Q,N),Te=new X(ne,N),Re=new X(Q,j),$e=new X(ne,j),Oe=Z(I);let ze=new X(0,0);D&&(ze=new X(D[0],D[1])),de._rotateAround(Oe,ze),Te._rotateAround(Oe,ze),Re._rotateAround(Oe,ze),$e._rotateAround(Oe,ze),Q=Math.min(de.x,Te.x,Re.x,$e.x),ne=Math.max(de.x,Te.x,Re.x,$e.x),N=Math.min(de.y,Te.y,Re.y,$e.y),j=Math.max(de.y,Te.y,Re.y,$e.y)}return c.emplaceBack(o.x,o.y,o.z,d.x,d.y,Q,N,ne,j,E,f,g,b),c.length-1}function nE(c){c.collisionPadding&&(c.top-=c.collisionPadding[1],c.bottom+=c.collisionPadding[3]);const o=c.bottom-c.top;return o>0?Math.max(10,o):null}function N8(c,o,d,f){const g=c.compareText;if(o in g){const b=g[o];for(let w=b.length-1;w>=0;w--)if(f.dist(b[w])<d)return!0}else g[o]=[];return g[o].push(f),!1}function hL(c,o){const d=c.fovAboveCenter,f=c.elevation?c.elevation.getMinElevationBelowMSL()*o:0,g=(c._camera.position[2]*c.worldSize-f)/Math.cos(c._pitch),b=Math.sin(d)*g/Math.sin(Math.max(Math.PI/2-c._pitch-d,.01)),w=Math.sin(c._pitch)*b+g;return Math.min(1.01*w,g*(1/c._horizonShift))}function Jm(c,o){if(!o.isReprojectedInTileSpace)return{scale:1<<c.z,x:c.x,y:c.y,x2:c.x+1,y2:c.y+1,projection:o};const d=Math.pow(2,-c.z),f=c.x*d,g=(c.x+1)*d,b=c.y*d,w=(c.y+1)*d,E=Kl(f),I=Kl(g),D=Lo(b),N=Lo(w),j=o.project(E,D),Q=o.project(I,D),ne=o.project(I,N),ae=o.project(E,N);let de=Math.min(j.x,Q.x,ne.x,ae.x),Te=Math.min(j.y,Q.y,ne.y,ae.y),Re=Math.max(j.x,Q.x,ne.x,ae.x),$e=Math.max(j.y,Q.y,ne.y,ae.y);const Oe=d/16;function ze(qe,wt,yt,Ot,tn,kt){const zt=(yt+tn)/2,Nt=(Ot+kt)/2,Xt=o.project(Kl(zt),Lo(Nt)),an=Math.max(0,de-Xt.x,Te-Xt.y,Xt.x-Re,Xt.y-$e);de=Math.min(de,Xt.x),Re=Math.max(Re,Xt.x),Te=Math.min(Te,Xt.y),$e=Math.max($e,Xt.y),an>Oe&&(ze(qe,Xt,yt,Ot,zt,Nt),ze(Xt,wt,zt,Nt,tn,kt))}ze(j,Q,f,b,g,b),ze(Q,ne,g,b,g,w),ze(ne,ae,g,w,f,w),ze(ae,j,f,w,f,b),de-=Oe,Te-=Oe,Re+=Oe,$e+=Oe;const Xe=1/Math.max(Re-de,$e-Te);return{scale:Xe,x:de*Xe,y:Te*Xe,x2:Re*Xe,y2:$e*Xe,projection:o}}const U8=tu(new Float32Array(16));class lf{constructor(o){this.spec=o,this.name=o.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(o,d){return{x:0,y:0,z:0}}unproject(o,d){return new or(0,0)}projectTilePoint(o,d,f){return{x:o,y:d,z:0}}locationPoint(o,d,f=!0){return o._coordinatePoint(o.locationCoordinate(d),f)}pixelsPerMeter(o,d){return iu(1,o)*d}pixelSpaceConversion(o,d,f){return 1}farthestPixelDistance(o){return hL(o,o.pixelsPerMeter)}pointCoordinate(o,d,f,g){const b=o.horizonLineFromTop(!1),w=new X(d,Math.max(b,f));return o.rayIntersectionCoordinate(o.pointRayIntersection(w,g))}pointCoordinate3D(o,d,f){const g=new X(d,f);if(o.elevation)return o.elevation.pointCoordinate(g);{const b=this.pointCoordinate(o,g.x,g.y,0);return[b.x,b.y,b.z]}}isPointAboveHorizon(o,d){if(o.elevation)return!this.pointCoordinate3D(o,d.x,d.y);const f=o.horizonLineFromTop();return d.y<f}createInversionMatrix(o,d){return U8}createTileMatrix(o,d,f){let g,b,w;const E=f.canonical,I=tu(new Float64Array(16));if(this.isReprojectedInTileSpace){const D=Jm(E,this);g=1,b=D.x+f.wrap*D.scale,w=D.y,Hm(I,I,[g/D.scale,g/D.scale,o.pixelsPerMeter/d])}else g=d/o.zoomScale(E.z),b=(E.x+Math.pow(2,E.z)*f.wrap)*g,w=E.y*g;return W_(I,I,[b,w,0]),Hm(I,I,[g/zn,g/zn,1]),I}upVector(o,d,f){return[0,0,1]}upVectorScale(o,d,f){return{metersToTile:1}}}class $8 extends lf{constructor(o){super(o),this.range=[4,7],this.center=o.center||[-96,37.5];const[d,f]=this.parallels=o.parallels||[29.5,45.5],g=Math.sin(Z(d));this.n=(g+Math.sin(Z(f)))/2,this.c=1+g*(2*this.n-g),this.r0=Math.sqrt(this.c)/this.n}project(o,d){const{n:f,c:g,r0:b}=this,w=Z(o-this.center[0]),E=Z(d),I=Math.sqrt(g-2*f*Math.sin(E))/f;return{x:I*Math.sin(w*f),y:I*Math.cos(w*f)-b,z:0}}unproject(o,d){const{n:f,c:g,r0:b}=this,w=b+d;let E=Math.atan2(o,Math.abs(w))*Math.sign(w);w*f<0&&(E-=Math.PI*Math.sign(o)*Math.sign(w));const I=Z(this.center[0])*f;E=Ee(E,-Math.PI-I,Math.PI-I);const D=Le(ge(E/f)+this.center[0],-180,180),N=Math.asin(Le((g-(o*o+w*w)*f*f)/(2*f),-1,1)),j=Le(ge(N),-Ro,Ro);return new or(D,j)}}const my=1.340264,py=-.081106,gy=893e-6,vy=.003796,xx=Math.sqrt(3)/2;class j8 extends lf{project(o,d){d=d/180*Math.PI,o=o/180*Math.PI;const f=Math.asin(xx*Math.sin(d)),g=f*f,b=g*g*g;return{x:.5*(o*Math.cos(f)/(xx*(my+3*py*g+b*(7*gy+9*vy*g)))/Math.PI+.5),y:1-.5*(f*(my+py*g+b*(gy+vy*g))/Math.PI+1),z:0}}unproject(o,d){o=(2*o-.5)*Math.PI;let f=d=(2*(1-d)-1)*Math.PI,g=f*f,b=g*g*g;for(let N,j,Q,ne=0;ne<12&&(j=f*(my+py*g+b*(gy+vy*g))-d,Q=my+3*py*g+b*(7*gy+9*vy*g),N=j/Q,f=Le(f-N,-Math.PI/3,Math.PI/3),g=f*f,b=g*g*g,!(Math.abs(N)<1e-12));++ne);const w=xx*o*(my+3*py*g+b*(7*gy+9*vy*g))/Math.cos(f),E=Math.asin(Math.sin(f)/xx),I=Le(180*w/Math.PI,-180,180),D=Le(180*E/Math.PI,-Ro,Ro);return new or(I,D)}}class W8 extends lf{constructor(o){super(o),this.wrap=!0,this.supportsWorldCopies=!0}project(o,d){return{x:.5+o/360,y:.5-d/360,z:0}}unproject(o,d){const f=360*(o-.5),g=Le(360*(.5-d),-Ro,Ro);return new or(f,g)}}const ev=Math.PI/2;function wx(c){return Math.tan((ev+c)/2)}class H8 extends lf{constructor(o){super(o),this.center=o.center||[0,30];const[d,f]=this.parallels=o.parallels||[30,30];let g=Z(d),b=Z(f);this.southernCenter=g+b<0,this.southernCenter&&(g=-g,b=-b);const w=Math.cos(g),E=wx(g);this.n=g===b?Math.sin(g):Math.log(w/Math.cos(b))/Math.log(wx(b)/E),this.f=w*Math.pow(wx(g),this.n)/this.n}project(o,d){d=Z(d),this.southernCenter&&(d=-d),o=Z(o-this.center[0]);const f=1e-6,{n:g,f:b}=this;b>0?d<-ev+f&&(d=-ev+f):d>ev-f&&(d=ev-f);const w=b/Math.pow(wx(d),g);let E=w*Math.sin(g*o),I=b-w*Math.cos(g*o);return E=.5*(E/Math.PI+.5),I=.5*(I/Math.PI+.5),{x:E,y:this.southernCenter?I:1-I,z:0}}unproject(o,d){o=(2*o-.5)*Math.PI,this.southernCenter&&(d=1-d),d=(2*(1-d)-.5)*Math.PI;const{n:f,f:g}=this,b=g-d,w=Math.sign(b),E=Math.sign(f)*Math.sqrt(o*o+b*b);let I=Math.atan2(o,Math.abs(b))*w;b*f<0&&(I-=Math.PI*Math.sign(o)*w);const D=Le(ge(I/f)+this.center[0],-180,180),N=Le(ge(2*Math.atan(Math.pow(g/E,1/f))-ev),-Ro,Ro);return new or(D,this.southernCenter?-N:N)}}class fL extends lf{constructor(o){super(o),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(o,d){return{x:Ru(o),y:Ou(d),z:0}}unproject(o,d){const f=Kl(o),g=Lo(d);return new or(f,g)}}const mL=Z(Ro);class G8 extends lf{project(o,d){const f=(d=Z(d))*d,g=f*f;return{x:.5*((o=Z(o))*(.8707-.131979*f+g*(g*(.003971*f-.001529*g)-.013791))/Math.PI+.5),y:1-.5*(d*(1.007226+f*(.015085+g*(.028874*f-.044475-.005916*g)))/Math.PI+1),z:0}}unproject(o,d){o=(2*o-.5)*Math.PI;let f=d=(2*(1-d)-1)*Math.PI,g=25,b=0,w=f*f;do{w=f*f;const D=w*w;b=(f*(1.007226+w*(.015085+D*(.028874*w-.044475-.005916*D)))-d)/(1.007226+w*(.045255+D*(.259866*w-.311325-.005916*11*D))),f=Le(f-b,-mL,mL)}while(Math.abs(b)>1e-6&&--g>0);w=f*f;const E=Le(ge(o/(.8707+w*(w*(w*w*w*(.003971-.001529*w)-.013791)-.131979))),-180,180),I=ge(f);return new or(E,I)}}const pL=Z(Ro);class q8 extends lf{project(o,d){d=Z(d),o=Z(o);const f=Math.cos(d),g=2/Math.PI,b=Math.acos(f*Math.cos(o/2)),w=Math.sin(b)/b,E=.5*(o*g+2*f*Math.sin(o/2)/w)||0,I=.5*(d+Math.sin(d)/w)||0;return{x:.5*(E/Math.PI+.5),y:1-.5*(I/Math.PI+1),z:0}}unproject(o,d){let f=o=(2*o-.5)*Math.PI,g=d=(2*(1-d)-1)*Math.PI,b=25;const w=1e-6;let E=0,I=0;do{const D=Math.cos(g),N=Math.sin(g),j=2*N*D,Q=N*N,ne=D*D,ae=Math.cos(f/2),de=Math.sin(f/2),Te=2*ae*de,Re=de*de,$e=1-ne*ae*ae,Oe=$e?1/$e:0,ze=$e?Math.acos(D*ae)*Math.sqrt(1/$e):0,Xe=.5*(2*ze*D*de+2*f/Math.PI)-o,qe=.5*(ze*N+g)-d,wt=.5*Oe*(ne*Re+ze*D*ae*Q)+1/Math.PI,yt=Oe*(Te*j/4-ze*N*de),Ot=.125*Oe*(j*de-ze*N*ne*Te),tn=.5*Oe*(Q*ae+ze*Re*D)+.5,kt=yt*Ot-tn*wt;E=(qe*yt-Xe*tn)/kt,I=(Xe*Ot-qe*wt)/kt,f=Le(f-E,-Math.PI,Math.PI),g=Le(g-I,-pL,pL)}while((Math.abs(E)>w||Math.abs(I)>w)&&--b>0);return new or(ge(f),ge(g))}}class gL extends lf{constructor(o){super(o),this.center=o.center||[0,0],this.parallels=o.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(Z(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(o,d){const{scale:f,cosPhi:g}=this;return{x:Z(o)*g*f+.5,y:-Math.sin(Z(d))/g*f+.5,z:0}}unproject(o,d){const{scale:f,cosPhi:g}=this,b=-(d-.5)/f,w=Le(ge((o-.5)/f)/g,-180,180),E=Math.asin(Le(b*g,-1,1)),I=Le(ge(E),-Ro,Ro);return new or(w,I)}}class K8 extends fL{constructor(o){super(o),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(o,d,f){const g=J_(o,d,f);return as(g,g,Q_(Lu(f))),{x:g[0],y:g[1],z:g[2]}}locationPoint(o,d){const f=zg(d.lat,d.lng),g=wa([],f),b=o.elevation?o.elevation.getAtPointOrZero(o.locationCoordinate(d),o._centerAltitude):o._centerAltitude;K_(f,f,g,iu(1,0)*zn*b);const w=tu(new Float64Array(16));return Wm(w,o.pixelMatrix,o.globeMatrix),as(f,f,w),new X(f[0],f[1])}pixelsPerMeter(o,d){return iu(1,0)*d}pixelSpaceConversion(o,d,f){const g=iu(1,o)*d,b=Qn(iu(1,45)*d,g,f);return this.pixelsPerMeter(o,d)/b}createTileMatrix(o,d,f){const g=CS(Lu(f.canonical));return Wm(new Float64Array(16),o.globeMatrix,g)}createInversionMatrix(o,d){const{center:f}=o,g=Q_(Lu(d));return Y0(g,g,Z(f.lng)),gS(g,g,Z(f.lat)),Hm(g,g,[o._pixelsPerMercatorPixel,o._pixelsPerMercatorPixel,1]),Float32Array.from(g)}pointCoordinate(o,d,f,g){return jM(o,d,f,!0)||new Ug(0,0)}pointCoordinate3D(o,d,f){const g=this.pointCoordinate(o,d,f,0);return[g.x,g.y,g.z]}isPointAboveHorizon(o,d){return!jM(o,d.x,d.y,!1)}farthestPixelDistance(o){const d=(function(g,b){const w=g.cameraToCenterDistance,E=g._centerAltitude*b,I=g._camera,D=g._camera.forward(),N=jd([],ql([],D,-w),[0,0,E]),j=g.worldSize/(2*Math.PI),Q=[0,0,-j],ne=g.width/g.height,ae=Math.tan(g.fovAboveCenter),de=ql([],I.up(),ae),Te=ql([],I.right(),ae*ne),Re=wa([],jd([],jd([],D,de),Te)),$e=[];let Oe;if(new bS(N,Re).closestPointOnSphere(Q,j,$e)){const ze=jd([],$e,Q),Xe=nu([],ze,N);Oe=Math.cos(g.fovAboveCenter)*H_(Xe)}else{const ze=nu([],N,Q),Xe=nu([],Q,N);wa(Xe,Xe);const qe=H_(ze)-j;Oe=Math.sqrt(qe*(qe+2*j));const wt=Math.acos(Oe/(j+qe))-Math.acos(Tc(D,Xe));Oe*=Math.cos(wt)}return 1.01*Oe})(o,this.pixelsPerMeter(o.center.lat,o.worldSize)),f=Ng(o.zoom);if(f>0){const g=hL(o,iu(1,o.center.lat)*o.worldSize),b=o.worldSize/(2*Math.PI),w=Math.max(o.width,o.height)/o.worldSize*Math.PI;return Qn(d,g+b*(1-Math.cos(w)),Math.pow(f,10))}return d}upVector(o,d,f){return J_(d,f,o,1)}upVectorScale(o){return{metersToTile:Z0(Q0(Lu(o)))}}}function vL(c){const o=c.parallels,d=!!o&&Math.abs(o[0]+o[1])<.01;switch(c.name){case"mercator":return new fL(c);case"equirectangular":return new W8(c);case"naturalEarth":return new G8(c);case"equalEarth":return new j8(c);case"winkelTripel":return new q8(c);case"albers":return d?new gL(c):new $8(c);case"lambertConformalConic":return d?new gL(c):new H8(c);case"globe":return new K8(c)}throw new Error(`Invalid projection name: ${c.name}`)}const X8=cx.types,Y8=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Tx(c,o,d,f,g,b,w,E,I,D,N,j,Q){const ne=E?Math.min(af,Math.round(E[0])):0,ae=E?Math.min(af,Math.round(E[1])):0;c.emplaceBack(o,d,Math.round(32*f),Math.round(32*g),b,w,(ne<<1)+(I?1:0),ae,16*D,16*N,256*j,256*Q)}function Sx(c,o,d,f,g,b,w){c.emplaceBack(o,d,f,g,b,w)}function Ex(c,o,d,f,g){c.emplaceBack(o,d,f,g),c.emplaceBack(o,d,f,g),c.emplaceBack(o,d,f,g),c.emplaceBack(o,d,f,g)}function Z8(c){for(const o of c.sections)if(Bd(o.text))return!0;return!1}class iE{constructor(o){this.layoutVertexArray=new Ft,this.indexArray=new In,this.programConfigurations=o,this.segments=new ds,this.dynamicLayoutVertexArray=new Gt,this.opacityVertexArray=new Dn,this.placedSymbolArray=new Or,this.globeExtVertexArray=new Kt}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(o,d,f,g){this.isEmpty()||(f&&(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,s8.members),this.indexBuffer=o.createIndexBuffer(this.indexArray,d),this.dynamicLayoutVertexBuffer=o.createVertexBuffer(this.dynamicLayoutVertexArray,a8.members,!0),this.opacityVertexBuffer=o.createVertexBuffer(this.opacityVertexArray,Y8,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=o.createVertexBuffer(this.globeExtVertexArray,o8.members,!0)),this.opacityVertexBuffer.itemSize=1),(f||g)&&this.programConfigurations.upload(o))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}Tn(iE,"SymbolBuffers");class rE{constructor(o,d,f){this.layoutVertexArray=new o,this.layoutAttributes=d,this.indexArray=new f,this.segments=new ds,this.collisionVertexArray=new pi,this.collisionVertexArrayExt=new mi}upload(o){this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=o.createVertexBuffer(this.collisionVertexArray,l8.members,!0),this.collisionVertexBufferExt=o.createVertexBuffer(this.collisionVertexArrayExt,c8.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}Tn(rE,"CollisionBuffers");class cf{constructor(o){this.collisionBoxArray=o.collisionBoxArray,this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map((w=>w.id)),this.index=o.index,this.pixelRatio=o.pixelRatio,this.sourceLayerIndex=o.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=tu([]),this.placementViewportMatrix=tu([]);const d=this.layers[0]._unevaluatedLayout._values;this.textSizeData=GS(this.zoom,d["text-size"]),this.iconSizeData=GS(this.zoom,d["icon-size"]);const f=this.layers[0].layout,g=f.get("symbol-sort-key"),b=f.get("symbol-z-order");this.canOverlap=f.get("text-allow-overlap")||f.get("icon-allow-overlap")||f.get("text-ignore-placement")||f.get("icon-ignore-placement"),this.sortFeaturesByKey=b!=="viewport-y"&&g.constantOr(1)!==void 0,this.sortFeaturesByY=(b==="viewport-y"||b==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=f.get("text-writing-mode").map((w=>Xl[w])),this.stateDependentLayerIds=this.layers.filter((w=>w.isStateDependent())).map((w=>w.id)),this.sourceID=o.sourceID,this.projection=o.projection}createArrays(){this.text=new iE(new jm(this.layers,this.zoom,(o=>/^text/.test(o)))),this.icon=new iE(new jm(this.layers,this.zoom,(o=>/^icon/.test(o)))),this.glyphOffsetArray=new co,this.lineVertexArray=new Fd,this.symbolInstances=new sr}calculateGlyphDependencies(o,d,f,g,b){for(let w=0;w<o.length;w++)if(d[o.charCodeAt(w)]=!0,g&&b){const E=uy[o.charAt(w)];E&&(d[E.charCodeAt(0)]=!0)}}populate(o,d,f,g){const b=this.layers[0],w=b.layout,E=this.projection.name==="globe",I=w.get("text-font"),D=w.get("text-field"),N=w.get("icon-image"),j=(D.value.kind!=="constant"||D.value.value instanceof Xr&&!D.value.value.isEmpty()||D.value.value.toString().length>0)&&(I.value.kind!=="constant"||I.value.value.length>0),Q=N.value.kind!=="constant"||!!N.value.value||Object.keys(N.parameters).length>0,ne=w.get("symbol-sort-key");if(this.features=[],!j&&!Q)return;const ae=d.iconDependencies,de=d.glyphDependencies,Te=d.availableImages,Re=new U(this.zoom);for(const{feature:$e,id:Oe,index:ze,sourceLayerIndex:Xe}of o){const qe=b._featureFilter.needGeometry,wt=Xm($e,qe);if(!b._featureFilter.filter(Re,wt,f))continue;if(qe||(wt.geometry=Wd($e,f,g)),E&&$e.type!==1&&f.z<=5){const kt=wt.geometry,zt=.98078528056,Nt=(Xt,an)=>Tc(J_(Xt.x,Xt.y,f,1),J_(an.x,an.y,f,1))<zt;for(let Xt=0;Xt<kt.length;Xt++)kt[Xt]=a2(kt[Xt],Nt)}let yt,Ot;if(j){const kt=b.getValueAndResolveTokens("text-field",wt,f,Te),zt=Xr.factory(kt);Z8(zt)&&(this.hasRTLText=!0),(!this.hasRTLText||C()==="unavailable"||this.hasRTLText&&O.isParsed())&&(yt=h8(zt,b,wt))}if(Q){const kt=b.getValueAndResolveTokens("icon-image",wt,f,Te);Ot=kt instanceof os?kt:os.fromString(kt)}if(!yt&&!Ot)continue;const tn=this.sortFeaturesByKey?ne.evaluate(wt,{},f):void 0;if(this.features.push({id:Oe,text:yt,icon:Ot,index:ze,sourceLayerIndex:Xe,geometry:wt.geometry,properties:$e.properties,type:X8[$e.type],sortKey:tn}),Ot&&(ae[Ot.name]=!0),yt){const kt=I.evaluate(wt,{},f).join(","),zt=w.get("text-rotation-alignment")==="map"&&w.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Xl.vertical)>=0;for(const Nt of yt.sections)if(Nt.image)ae[Nt.image.name]=!0;else{const Xt=Nm(yt.toString()),an=Nt.fontStack||kt,Rt=de[an]=de[an]||{};this.calculateGlyphDependencies(Nt.text,Rt,zt,this.allowVerticalPlacement,Xt)}}}w.get("symbol-placement")==="line"&&(this.features=(function($e){const Oe={},ze={},Xe=[];let qe=0;function wt(kt){Xe.push($e[kt]),qe++}function yt(kt,zt,Nt){const Xt=ze[kt];return delete ze[kt],ze[zt]=Xt,Xe[Xt].geometry[0].pop(),Xe[Xt].geometry[0]=Xe[Xt].geometry[0].concat(Nt[0]),Xt}function Ot(kt,zt,Nt){const Xt=Oe[zt];return delete Oe[zt],Oe[kt]=Xt,Xe[Xt].geometry[0].shift(),Xe[Xt].geometry[0]=Nt[0].concat(Xe[Xt].geometry[0]),Xt}function tn(kt,zt,Nt){const Xt=Nt?zt[0][zt[0].length-1]:zt[0][0];return`${kt}:${Xt.x}:${Xt.y}`}for(let kt=0;kt<$e.length;kt++){const zt=$e[kt],Nt=zt.geometry,Xt=zt.text?zt.text.toString():null;if(!Xt){wt(kt);continue}const an=tn(Xt,Nt),Rt=tn(Xt,Nt,!0);if(an in ze&&Rt in Oe&&ze[an]!==Oe[Rt]){const vn=Ot(an,Rt,Nt),Cn=yt(an,Rt,Xe[vn].geometry);delete Oe[an],delete ze[Rt],ze[tn(Xt,Xe[Cn].geometry,!0)]=Cn,Xe[vn].geometry=null}else an in ze?yt(an,Rt,Nt):Rt in Oe?Ot(an,Rt,Nt):(wt(kt),Oe[an]=qe-1,ze[Rt]=qe-1)}return Xe.filter((kt=>kt.geometry))})(this.features)),this.sortFeaturesByKey&&this.features.sort((($e,Oe)=>$e.sortKey-Oe.sortKey))}update(o,d,f,g){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(o,d,this.layers,f,g),this.icon.programConfigurations.updatePaintArrays(o,d,this.layers,f,g))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(o){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(o),this.iconCollisionBox.upload(o)),this.text.upload(o,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(o,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=vL(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(o,d){const f=this.lineVertexArray.length;if(o.segment!==void 0)for(const{x:g,y:b}of d)this.lineVertexArray.emplaceBack(g,b);return{lineStartIndex:f,lineLength:this.lineVertexArray.length-f}}addSymbols(o,d,f,g,b,w,E,I,D,N,j,Q,ne,ae){const de=o.indexArray,Te=o.layoutVertexArray,Re=o.globeExtVertexArray,$e=o.segments.prepareSegment(4*d.length,Te,de,this.canOverlap?w.sortKey:void 0),Oe=this.glyphOffsetArray.length,ze=$e.vertexLength,Xe=this.allowVerticalPlacement&&E===Xl.vertical?Math.PI/2:0,qe=w.text&&w.text.sections;for(let yt=0;yt<d.length;yt++){const{tl:Ot,tr:tn,bl:kt,br:zt,tex:Nt,pixelOffsetTL:Xt,pixelOffsetBR:an,minFontScaleX:Rt,minFontScaleY:vn,glyphOffset:Cn,isSDF:bn,sectionIndex:ii}=d[yt],ln=$e.vertexLength,Vn=Cn[1];if(Tx(Te,D.x,D.y,Ot.x,Vn+Ot.y,Nt.x,Nt.y,f,bn,Xt.x,Xt.y,Rt,vn),Tx(Te,D.x,D.y,tn.x,Vn+tn.y,Nt.x+Nt.w,Nt.y,f,bn,an.x,Xt.y,Rt,vn),Tx(Te,D.x,D.y,kt.x,Vn+kt.y,Nt.x,Nt.y+Nt.h,f,bn,Xt.x,an.y,Rt,vn),Tx(Te,D.x,D.y,zt.x,Vn+zt.y,Nt.x+Nt.w,Nt.y+Nt.h,f,bn,an.x,an.y,Rt,vn),I){const{x:ri,y:Pi,z:si}=I.anchor,[Un,Tr,ai]=I.up;Sx(Re,ri,Pi,si,Un,Tr,ai),Sx(Re,ri,Pi,si,Un,Tr,ai),Sx(Re,ri,Pi,si,Un,Tr,ai),Sx(Re,ri,Pi,si,Un,Tr,ai),Ex(o.dynamicLayoutVertexArray,ri,Pi,si,Xe)}else Ex(o.dynamicLayoutVertexArray,D.x,D.y,D.z,Xe);de.emplaceBack(ln,ln+1,ln+2),de.emplaceBack(ln+1,ln+2,ln+3),$e.vertexLength+=4,$e.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Cn[0]),yt!==d.length-1&&ii===d[yt+1].sectionIndex||o.programConfigurations.populatePaintArrays(Te.length,w,w.index,{},ne,ae,qe&&qe[ii])}const wt=I?I.anchor:D;o.placedSymbolArray.emplaceBack(wt.x,wt.y,wt.z,D.x,D.y,Oe,this.glyphOffsetArray.length-Oe,ze,N,j,D.segment,f?f[0]:0,f?f[1]:0,g[0],g[1],E,0,!1,0,Q,0)}_commitLayoutVertex(o,d,f,g,b,w,E){o.emplaceBack(d,f,g,b,w,Math.round(E.x),Math.round(E.y))}_addCollisionDebugVertices(o,d,f,g,b,w,E){const I=f.segments.prepareSegment(4,f.layoutVertexArray,f.indexArray),D=I.vertexLength,N=E.tileAnchorX,j=E.tileAnchorY;for(let ne=0;ne<4;ne++)f.collisionVertexArray.emplaceBack(0,0,0,0);f.collisionVertexArrayExt.emplaceBack(d,-o.padding,-o.padding),f.collisionVertexArrayExt.emplaceBack(d,o.padding,-o.padding),f.collisionVertexArrayExt.emplaceBack(d,o.padding,o.padding),f.collisionVertexArrayExt.emplaceBack(d,-o.padding,o.padding),this._commitLayoutVertex(f.layoutVertexArray,g,b,w,N,j,new X(o.x1,o.y1)),this._commitLayoutVertex(f.layoutVertexArray,g,b,w,N,j,new X(o.x2,o.y1)),this._commitLayoutVertex(f.layoutVertexArray,g,b,w,N,j,new X(o.x2,o.y2)),this._commitLayoutVertex(f.layoutVertexArray,g,b,w,N,j,new X(o.x1,o.y2)),I.vertexLength+=4;const Q=f.indexArray;Q.emplaceBack(D,D+1),Q.emplaceBack(D+1,D+2),Q.emplaceBack(D+2,D+3),Q.emplaceBack(D+3,D),I.primitiveLength+=4}_addTextDebugCollisionBoxes(o,d,f,g,b,w){for(let E=g;E<b;E++){const I=f.get(E),D=this.getSymbolInstanceTextSize(o,w,d,E);this._addCollisionDebugVertices(I,D,this.textCollisionBox,I.projectedAnchorX,I.projectedAnchorY,I.projectedAnchorZ,w)}}_addIconDebugCollisionBoxes(o,d,f,g,b,w){for(let E=g;E<b;E++){const I=f.get(E),D=this.getSymbolInstanceIconSize(o,d,w.placedIconSymbolIndex);this._addCollisionDebugVertices(I,D,this.iconCollisionBox,I.projectedAnchorX,I.projectedAnchorY,I.projectedAnchorZ,w)}}generateCollisionDebugBuffers(o,d){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new rE(Sn,VD.members,Is),this.iconCollisionBox=new rE(Sn,VD.members,Is);const f=Gg(this.iconSizeData,o),g=Gg(this.textSizeData,o);for(let b=0;b<this.symbolInstances.length;b++){const w=this.symbolInstances.get(b);this._addTextDebugCollisionBoxes(g,o,d,w.textBoxStartIndex,w.textBoxEndIndex,w),this._addTextDebugCollisionBoxes(g,o,d,w.verticalTextBoxStartIndex,w.verticalTextBoxEndIndex,w),this._addIconDebugCollisionBoxes(f,o,d,w.iconBoxStartIndex,w.iconBoxEndIndex,w),this._addIconDebugCollisionBoxes(f,o,d,w.verticalIconBoxStartIndex,w.verticalIconBoxEndIndex,w)}}getSymbolInstanceTextSize(o,d,f,g){const b=this.text.placedSymbolArray.get(d.rightJustifiedTextSymbolIndex>=0?d.rightJustifiedTextSymbolIndex:d.centerJustifiedTextSymbolIndex>=0?d.centerJustifiedTextSymbolIndex:d.leftJustifiedTextSymbolIndex>=0?d.leftJustifiedTextSymbolIndex:d.verticalPlacedTextSymbolIndex>=0?d.verticalPlacedTextSymbolIndex:g),w=fx(this.textSizeData,o,b)/uo;return this.tilePixelRatio*w}getSymbolInstanceIconSize(o,d,f){const g=this.icon.placedSymbolArray.get(f),b=fx(this.iconSizeData,o,g);return this.tilePixelRatio*b}_commitDebugCollisionVertexUpdate(o,d,f){o.emplaceBack(d,-f,-f),o.emplaceBack(d,f,-f),o.emplaceBack(d,f,f),o.emplaceBack(d,-f,f)}_updateTextDebugCollisionBoxes(o,d,f,g,b,w){for(let E=g;E<b;E++){const I=f.get(E),D=this.getSymbolInstanceTextSize(o,w,d,E);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,D,I.padding)}}_updateIconDebugCollisionBoxes(o,d,f,g,b,w){for(let E=g;E<b;E++){const I=f.get(E),D=this.getSymbolInstanceIconSize(o,d,w);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,D,I.padding)}}updateCollisionDebugBuffers(o,d){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const f=Gg(this.iconSizeData,o),g=Gg(this.textSizeData,o);for(let b=0;b<this.symbolInstances.length;b++){const w=this.symbolInstances.get(b);this._updateTextDebugCollisionBoxes(g,o,d,w.textBoxStartIndex,w.textBoxEndIndex,w),this._updateTextDebugCollisionBoxes(g,o,d,w.verticalTextBoxStartIndex,w.verticalTextBoxEndIndex,w),this._updateIconDebugCollisionBoxes(f,o,d,w.iconBoxStartIndex,w.iconBoxEndIndex,w.placedIconSymbolIndex),this._updateIconDebugCollisionBoxes(f,o,d,w.verticalIconBoxStartIndex,w.verticalIconBoxEndIndex,w.placedIconSymbolIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(o,d,f,g,b,w,E,I,D){const N={};if(d<f){const{x1:j,y1:Q,x2:ne,y2:ae,padding:de,projectedAnchorX:Te,projectedAnchorY:Re,projectedAnchorZ:$e,tileAnchorX:Oe,tileAnchorY:ze,featureIndex:Xe}=o.get(d);N.textBox={x1:j,y1:Q,x2:ne,y2:ae,padding:de,projectedAnchorX:Te,projectedAnchorY:Re,projectedAnchorZ:$e,tileAnchorX:Oe,tileAnchorY:ze},N.textFeatureIndex=Xe}if(g<b){const{x1:j,y1:Q,x2:ne,y2:ae,padding:de,projectedAnchorX:Te,projectedAnchorY:Re,projectedAnchorZ:$e,tileAnchorX:Oe,tileAnchorY:ze,featureIndex:Xe}=o.get(g);N.verticalTextBox={x1:j,y1:Q,x2:ne,y2:ae,padding:de,projectedAnchorX:Te,projectedAnchorY:Re,projectedAnchorZ:$e,tileAnchorX:Oe,tileAnchorY:ze},N.verticalTextFeatureIndex=Xe}if(w<E){const{x1:j,y1:Q,x2:ne,y2:ae,padding:de,projectedAnchorX:Te,projectedAnchorY:Re,projectedAnchorZ:$e,tileAnchorX:Oe,tileAnchorY:ze,featureIndex:Xe}=o.get(w);N.iconBox={x1:j,y1:Q,x2:ne,y2:ae,padding:de,projectedAnchorX:Te,projectedAnchorY:Re,projectedAnchorZ:$e,tileAnchorX:Oe,tileAnchorY:ze},N.iconFeatureIndex=Xe}if(I<D){const{x1:j,y1:Q,x2:ne,y2:ae,padding:de,projectedAnchorX:Te,projectedAnchorY:Re,projectedAnchorZ:$e,tileAnchorX:Oe,tileAnchorY:ze,featureIndex:Xe}=o.get(I);N.verticalIconBox={x1:j,y1:Q,x2:ne,y2:ae,padding:de,projectedAnchorX:Te,projectedAnchorY:Re,projectedAnchorZ:$e,tileAnchorX:Oe,tileAnchorY:ze},N.verticalIconFeatureIndex=Xe}return N}deserializeCollisionBoxes(o){this.collisionArrays=[];for(let d=0;d<this.symbolInstances.length;d++){const f=this.symbolInstances.get(d);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(o,f.textBoxStartIndex,f.textBoxEndIndex,f.verticalTextBoxStartIndex,f.verticalTextBoxEndIndex,f.iconBoxStartIndex,f.iconBoxEndIndex,f.verticalIconBoxStartIndex,f.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(o,d){const f=o.placedSymbolArray.get(d),g=f.vertexStartIndex+4*f.numGlyphs;for(let b=f.vertexStartIndex;b<g;b+=4)o.indexArray.emplaceBack(b,b+1,b+2),o.indexArray.emplaceBack(b+1,b+2,b+3)}getSortedSymbolIndexes(o){if(this.sortedAngle===o&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const d=Math.sin(o),f=Math.cos(o),g=[],b=[],w=[];for(let E=0;E<this.symbolInstances.length;++E){w.push(E);const I=this.symbolInstances.get(E);g.push(0|Math.round(d*I.tileAnchorX+f*I.tileAnchorY)),b.push(I.featureIndex)}return w.sort(((E,I)=>g[E]-g[I]||b[I]-b[E])),w}addToSortKeyRanges(o,d){const f=this.sortKeyRanges[this.sortKeyRanges.length-1];f&&f.sortKey===d?f.symbolInstanceEnd=o+1:this.sortKeyRanges.push({sortKey:d,symbolInstanceStart:o,symbolInstanceEnd:o+1})}sortFeatures(o){if(this.sortFeaturesByY&&this.sortedAngle!==o&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(o),this.sortedAngle=o,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const d of this.symbolInstanceIndexes){const f=this.symbolInstances.get(d);this.featureSortOrder.push(f.featureIndex);const{rightJustifiedTextSymbolIndex:g,centerJustifiedTextSymbolIndex:b,leftJustifiedTextSymbolIndex:w,verticalPlacedTextSymbolIndex:E,placedIconSymbolIndex:I,verticalPlacedIconSymbolIndex:D}=f;g>=0&&this.addIndicesForPlacedSymbol(this.text,g),b>=0&&b!==g&&this.addIndicesForPlacedSymbol(this.text,b),w>=0&&w!==b&&w!==g&&this.addIndicesForPlacedSymbol(this.text,w),E>=0&&this.addIndicesForPlacedSymbol(this.text,E),I>=0&&this.addIndicesForPlacedSymbol(this.icon,I),D>=0&&this.addIndicesForPlacedSymbol(this.icon,D)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}Tn(cf,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),cf.MAX_GLYPHS=65535,cf.addDynamicAttributes=Ex;const J8=new De({"symbol-placement":new ce(Dt.layout_symbol["symbol-placement"]),"symbol-spacing":new ce(Dt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new ce(Dt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new ye(Dt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new ce(Dt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new ce(Dt.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new ce(Dt.layout_symbol["icon-ignore-placement"]),"icon-optional":new ce(Dt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new ce(Dt.layout_symbol["icon-rotation-alignment"]),"icon-size":new ye(Dt.layout_symbol["icon-size"]),"icon-text-fit":new ce(Dt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new ce(Dt.layout_symbol["icon-text-fit-padding"]),"icon-image":new ye(Dt.layout_symbol["icon-image"]),"icon-rotate":new ye(Dt.layout_symbol["icon-rotate"]),"icon-padding":new ce(Dt.layout_symbol["icon-padding"]),"icon-keep-upright":new ce(Dt.layout_symbol["icon-keep-upright"]),"icon-offset":new ye(Dt.layout_symbol["icon-offset"]),"icon-anchor":new ye(Dt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new ce(Dt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new ce(Dt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new ce(Dt.layout_symbol["text-rotation-alignment"]),"text-field":new ye(Dt.layout_symbol["text-field"]),"text-font":new ye(Dt.layout_symbol["text-font"]),"text-size":new ye(Dt.layout_symbol["text-size"]),"text-max-width":new ye(Dt.layout_symbol["text-max-width"]),"text-line-height":new ye(Dt.layout_symbol["text-line-height"]),"text-letter-spacing":new ye(Dt.layout_symbol["text-letter-spacing"]),"text-justify":new ye(Dt.layout_symbol["text-justify"]),"text-radial-offset":new ye(Dt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new ce(Dt.layout_symbol["text-variable-anchor"]),"text-anchor":new ye(Dt.layout_symbol["text-anchor"]),"text-max-angle":new ce(Dt.layout_symbol["text-max-angle"]),"text-writing-mode":new ce(Dt.layout_symbol["text-writing-mode"]),"text-rotate":new ye(Dt.layout_symbol["text-rotate"]),"text-padding":new ce(Dt.layout_symbol["text-padding"]),"text-keep-upright":new ce(Dt.layout_symbol["text-keep-upright"]),"text-transform":new ye(Dt.layout_symbol["text-transform"]),"text-offset":new ye(Dt.layout_symbol["text-offset"]),"text-allow-overlap":new ce(Dt.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new ce(Dt.layout_symbol["text-ignore-placement"]),"text-optional":new ce(Dt.layout_symbol["text-optional"])});var sE={paint:new De({"icon-opacity":new ye(Dt.paint_symbol["icon-opacity"]),"icon-color":new ye(Dt.paint_symbol["icon-color"]),"icon-halo-color":new ye(Dt.paint_symbol["icon-halo-color"]),"icon-halo-width":new ye(Dt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new ye(Dt.paint_symbol["icon-halo-blur"]),"icon-translate":new ce(Dt.paint_symbol["icon-translate"]),"icon-translate-anchor":new ce(Dt.paint_symbol["icon-translate-anchor"]),"text-opacity":new ye(Dt.paint_symbol["text-opacity"]),"text-color":new ye(Dt.paint_symbol["text-color"],{runtimeType:pr,getOverride:c=>c.textColor,hasOverride:c=>!!c.textColor}),"text-halo-color":new ye(Dt.paint_symbol["text-halo-color"]),"text-halo-width":new ye(Dt.paint_symbol["text-halo-width"]),"text-halo-blur":new ye(Dt.paint_symbol["text-halo-blur"]),"text-translate":new ce(Dt.paint_symbol["text-translate"]),"text-translate-anchor":new ce(Dt.paint_symbol["text-translate-anchor"])}),layout:J8};class _L{constructor(o){this.type=o.property.overrides?o.property.overrides.runtimeType:fa,this.defaultValue=o}evaluate(o){if(o.formattedSection){const d=this.defaultValue.property.overrides;if(d&&d.hasOverride(o.formattedSection))return d.getOverride(o.formattedSection)}return o.feature&&o.featureState?this.defaultValue.evaluate(o.feature,o.featureState):this.defaultValue.property.specification.default}eachChild(o){this.defaultValue.isConstant()||o(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Tn(_L,"FormatSectionOverride",{omit:["defaultValue"]});class Cx extends eu{constructor(o){super(o,sE)}recalculate(o,d){super.recalculate(o,d),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const f=this.layout.get("text-writing-mode");if(f){const g=[];for(const b of f)g.indexOf(b)<0&&g.push(b);this.layout._values["text-writing-mode"]=g}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(o,d,f,g){const b=this.layout.get(o).evaluate(d,{},f,g),w=this._unevaluatedLayout._values[o];return w.isDataDriven()||Iu(w.value)||!b?b:(function(E,I){return I.replace(/{([^{}]+)}/g,((D,N)=>N in E?String(E[N]):""))})(d.properties,b)}createBucket(o){return new cf(o)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const o of sE.paint.overridableProperties){if(!Cx.hasPaintOverride(this.layout,o))continue;const d=this.paint.get(o),f=new _L(d),g=new Kh(f,d.property.specification);let b=null;b=d.value.kind==="constant"||d.value.kind==="source"?new Id("source",g):new yc("composite",g,d.value.zoomStops,d.value._interpolationType),this.paint._values[o]=new we(d.property,b,d.parameters)}}_handleOverridablePaintPropertyUpdate(o,d,f){return!(!this.layout||d.isDataDriven()||f.isDataDriven())&&Cx.hasPaintOverride(this.layout,o)}static hasPaintOverride(o,d){const f=o.get("text-field"),g=sE.paint.properties[d];let b=!1;const w=E=>{for(const I of E)if(g.overrides&&g.overrides.hasOverride(I))return void(b=!0)};if(f.value.kind==="constant"&&f.value.value instanceof Xr)w(f.value.value.sections);else if(f.value.kind==="source"){const E=D=>{b||(D instanceof ml&&gr(D.value)===Go?w(D.value.sections):D instanceof pa?w(D.sections):D.eachChild(E))},I=f.value;I._styleExpression&&E(I._styleExpression.expression)}return b}getProgramConfiguration(o){return new rf(this,o)}}var Q8={paint:new De({"background-color":new ce(Dt.paint_background["background-color"]),"background-pattern":new ce(Dt.paint_background["background-pattern"]),"background-opacity":new ce(Dt.paint_background["background-opacity"])})},eW={paint:new De({"raster-opacity":new ce(Dt.paint_raster["raster-opacity"]),"raster-hue-rotate":new ce(Dt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new ce(Dt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new ce(Dt.paint_raster["raster-brightness-max"]),"raster-saturation":new ce(Dt.paint_raster["raster-saturation"]),"raster-contrast":new ce(Dt.paint_raster["raster-contrast"]),"raster-resampling":new ce(Dt.paint_raster["raster-resampling"]),"raster-fade-duration":new ce(Dt.paint_raster["raster-fade-duration"])})};class tW extends eu{constructor(o){super(o,{}),this.implementation=o}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}isLayerDraped(){return this.implementation.renderToTile!==void 0}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(o){this.implementation.onAdd&&this.implementation.onAdd(o,o.painter.context.gl)}onRemove(o){this.implementation.onRemove&&this.implementation.onRemove(o,o.painter.context.gl)}}var nW={paint:new De({"sky-type":new ce(Dt.paint_sky["sky-type"]),"sky-atmosphere-sun":new ce(Dt.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new ce(Dt.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new ce(Dt.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new ce(Dt.paint_sky["sky-gradient-radius"]),"sky-gradient":new Pe(Dt.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new ce(Dt.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new ce(Dt.paint_sky["sky-atmosphere-color"]),"sky-opacity":new ce(Dt.paint_sky["sky-opacity"])})};function oE(c,o,d){const f=[0,0,1],g=BM([]);return zM(g,g,d?-Z(c)+Math.PI:Z(c)),FM(g,g,-Z(o)),LM(f,f,g),wa(f,f)}const iW={circle:class extends eu{constructor(c){super(c,m2)}createBucket(c){return new DS(c)}queryRadius(c){const o=c;return $g("circle-radius",this,o)+$g("circle-stroke-width",this,o)+nx(this.paint.get("circle-translate"))}queryIntersectsFeature(c,o,d,f,g,b,w,E){const I=aD(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),b.angle,c.pixelToTileUnitsFactor),D=this.paint.get("circle-radius").evaluate(o,d)+this.paint.get("circle-stroke-width").evaluate(o,d);return lD(c,f,b,w,E,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",I,D)}getProgramIds(){return["circle"]}getProgramConfiguration(c){return new rf(this,c)}},heatmap:class extends eu{createBucket(c){return new uD(c)}constructor(c){super(c,_2),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(c){c==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=VS({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(c){return $g("heatmap-radius",this,c)}queryIntersectsFeature(c,o,d,f,g,b,w,E){const I=this.paint.get("heatmap-radius").evaluate(o,d);return lD(c,f,b,w,E,!0,!0,new X(0,0),I)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(c){return new rf(this,c)}},hillshade:class extends eu{constructor(c){super(c,y2)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends eu{constructor(c){super(c,O2)}getProgramIds(){const c=this.paint.get("fill-pattern"),o=c&&c.constantOr(1),d=[o?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&d.push(o&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),d}getProgramConfiguration(c){return new rf(this,c)}recalculate(c,o){super.recalculate(c,o);const d=this.paint._values["fill-outline-color"];d.value.kind==="constant"&&d.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(c){return new ax(c)}queryRadius(){return nx(this.paint.get("fill-translate"))}queryIntersectsFeature(c,o,d,f,g,b){return!c.queryGeometry.isAboveHorizon&&nD(oD(c.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),b.angle,c.pixelToTileUnitsFactor),f)}isTileClipped(){return!0}},"fill-extrusion":class extends eu{constructor(c){super(c,Z2)}createBucket(c){return new ay(c)}queryRadius(){return nx(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(c){return new rf(this,c)}queryIntersectsFeature(c,o,d,f,g,b,w,E,I){const D=aD(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),b.angle,c.pixelToTileUnitsFactor),N=this.paint.get("fill-extrusion-height").evaluate(o,d),j=this.paint.get("fill-extrusion-base").evaluate(o,d),Q=[0,0],ne=E&&b.elevation,ae=b.elevation?b.elevation.exaggeration():1,de=c.tile.getBucket(this);if(ne&&de instanceof ay){const ze=de.centroidVertexArray,Xe=I+1;Xe<ze.length&&(Q[0]=ze.geta_centroid_pos0(Xe),Q[1]=ze.geta_centroid_pos1(Xe))}if(Q[0]===0&&Q[1]===1)return!1;b.projection.name==="globe"&&(f=ID([f],[new X(0,0),new X(zn,zn)],c.tileID.canonical).map((ze=>ze.polygon)).flat());const Te=ne?E:null,[Re,$e]=(function(ze,Xe,qe,wt,yt,Ot,tn,kt,zt,Nt,Xt){return ze.projection.name==="globe"?(function(an,Rt,vn,Cn,bn,ii,ln,Vn,ri,Pi,si){const Un=[],Tr=[],ai=an.projection.upVectorScale(si,an.center.lat,an.worldSize).metersToTile,li=[0,0,0,1],ar=[0,0,0,1],_r=(lr,Vr,Yr,fs)=>{lr[0]=Vr,lr[1]=Yr,lr[2]=fs,lr[3]=1},yr=kD();vn>0&&(vn+=yr),Cn+=yr;for(const lr of Rt){const Vr=[],Yr=[];for(const fs of lr){const cr=fs.x+bn.x,As=fs.y+bn.y,ms=an.projection.projectTilePoint(cr,As,si),Wr=an.projection.upVector(si,fs.x,fs.y);let Li=vn,ps=Cn;if(ln){const br=DD(cr,As,vn,Cn,ln,Vn,ri,Pi);Li+=br.base,ps+=br.top}vn!==0?_r(li,ms.x+Wr[0]*ai*Li,ms.y+Wr[1]*ai*Li,ms.z+Wr[2]*ai*Li):_r(li,ms.x,ms.y,ms.z),_r(ar,ms.x+Wr[0]*ai*ps,ms.y+Wr[1]*ai*ps,ms.z+Wr[2]*ai*ps),as(li,li,ii),as(ar,ar,ii),Vr.push(new Hg(li[0],li[1],li[2])),Yr.push(new Hg(ar[0],ar[1],ar[2]))}Un.push(Vr),Tr.push(Yr)}return[Un,Tr]})(ze,Xe,qe,wt,yt,Ot,tn,kt,zt,Nt,Xt):tn?(function(an,Rt,vn,Cn,bn,ii,ln,Vn,ri){const Pi=[],si=[],Un=[0,0,0,1];for(const Tr of an){const ai=[],li=[];for(const ar of Tr){const _r=ar.x+Cn.x,yr=ar.y+Cn.y,lr=DD(_r,yr,Rt,vn,ii,ln,Vn,ri);Un[0]=_r,Un[1]=yr,Un[2]=lr.base,Un[3]=1,Gm(Un,Un,bn),Un[3]=Math.max(Un[3],1e-5);const Vr=new Hg(Un[0]/Un[3],Un[1]/Un[3],Un[2]/Un[3]);Un[0]=_r,Un[1]=yr,Un[2]=lr.top,Un[3]=1,Gm(Un,Un,bn),Un[3]=Math.max(Un[3],1e-5);const Yr=new Hg(Un[0]/Un[3],Un[1]/Un[3],Un[2]/Un[3]);ai.push(Vr),li.push(Yr)}Pi.push(ai),si.push(li)}return[Pi,si]})(Xe,qe,wt,yt,Ot,tn,kt,zt,Nt):(function(an,Rt,vn,Cn,bn){const ii=[],ln=[],Vn=bn[8]*Rt,ri=bn[9]*Rt,Pi=bn[10]*Rt,si=bn[11]*Rt,Un=bn[8]*vn,Tr=bn[9]*vn,ai=bn[10]*vn,li=bn[11]*vn;for(const ar of an){const _r=[],yr=[];for(const lr of ar){const Vr=lr.x+Cn.x,Yr=lr.y+Cn.y,fs=bn[0]*Vr+bn[4]*Yr+bn[12],cr=bn[1]*Vr+bn[5]*Yr+bn[13],As=bn[2]*Vr+bn[6]*Yr+bn[14],ms=bn[3]*Vr+bn[7]*Yr+bn[15],Wr=fs+Vn,Li=cr+ri,ps=As+Pi,br=Math.max(ms+si,1e-5),Ea=fs+Un,gs=cr+Tr,ho=As+ai,Js=Math.max(ms+li,1e-5);_r.push(new Hg(Wr/br,Li/br,ps/br)),yr.push(new Hg(Ea/Js,gs/Js,ho/Js))}ii.push(_r),ln.push(yr)}return[ii,ln]})(Xe,qe,wt,yt,Ot)})(b,f,j,N,D,w,Te,Q,ae,b.center.lat,c.tileID.canonical),Oe=c.queryGeometry;return(function(ze,Xe,qe){let wt=1/0;nD(qe,Xe)&&(wt=MD(qe,Xe[0]));for(let yt=0;yt<Xe.length;yt++){const Ot=Xe[yt],tn=ze[yt];for(let kt=0;kt<Ot.length-1;kt++){const zt=Ot[kt],Nt=[zt,Ot[kt+1],tn[kt+1],tn[kt],zt];tD(qe,Nt)&&(wt=Math.min(wt,MD(qe,Nt)))}}return wt!==1/0&&wt})(Re,$e,Oe.isPointQuery()?Oe.screenBounds:Oe.screenGeometry)}},line:class extends eu{constructor(c){super(c,LD),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(c){if(c==="line-gradient"){const o=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=o._styleExpression&&o._styleExpression.expression instanceof rr,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(c,o){super.recalculate(c,o),this.paint._values["line-floorwidth"]=RD.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,c)}createBucket(c){return new hx(c)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(c){return new rf(this,c)}queryRadius(c){const o=c,d=OD($g("line-width",this,o),$g("line-gap-width",this,o)),f=$g("line-offset",this,o);return d/2+Math.abs(f)+nx(this.paint.get("line-translate"))}queryIntersectsFeature(c,o,d,f,g,b){if(c.queryGeometry.isAboveHorizon)return!1;const w=oD(c.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),b.angle,c.pixelToTileUnitsFactor),E=c.pixelToTileUnitsFactor/2*OD(this.paint.get("line-width").evaluate(o,d),this.paint.get("line-gap-width").evaluate(o,d)),I=this.paint.get("line-offset").evaluate(o,d);return I&&(f=(function(D,N){const j=[],Q=new X(0,0);for(let ne=0;ne<D.length;ne++){const ae=D[ne],de=[];for(let Te=0;Te<ae.length;Te++){const Re=ae[Te],$e=ae[Te+1],Oe=Te===0?Q:Re.sub(ae[Te-1])._unit()._perp(),ze=Te===ae.length-1?Q:$e.sub(Re)._unit()._perp(),Xe=Oe._add(ze)._unit();Xe._mult(1/(Xe.x*ze.x+Xe.y*ze.y)),de.push(Xe._mult(N)._add(Re))}j.push(de)}return j})(f,I*c.pixelToTileUnitsFactor)),(function(D,N,j){for(let Q=0;Q<N.length;Q++){const ne=N[Q];if(D.length>=3){for(let ae=0;ae<ne.length;ae++)if(Ym(D,ne[ae]))return!0}if(u2(D,ne,j))return!0}return!1})(w,f,E)}isTileClipped(){return!0}},symbol:Cx,background:class extends eu{constructor(c){super(c,Q8)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends eu{constructor(c){super(c,eW)}getProgramIds(){return["raster"]}},sky:class extends eu{constructor(c){super(c,nW),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(c){c==="sky-gradient"?this._updateColorRamp():c!=="sky-atmosphere-sun"&&c!=="sky-atmosphere-halo-color"&&c!=="sky-atmosphere-color"&&c!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=VS({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(c){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const o=c.style.light.properties.get("position");return this._lightPosition.azimuthal!==o.azimuthal||this._lightPosition.polar!==o.polar}return!1}getCenter(c,o){if(this.paint.get("sky-type")==="atmosphere"){const f=this.paint.get("sky-atmosphere-sun"),g=!f,b=c.style.light,w=b.properties.get("position");return g&&b.properties.get("anchor")==="viewport"&&dt("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),g?oE(w.azimuthal,90-w.polar,o):oE(f[0],90-f[1],o)}const d=this.paint.get("sky-gradient-center");return oE(d[0],90-d[1],o)}is3D(){return!1}isSky(){return!0}markSkyboxValid(c){this._skyboxInvalidated=!1,this._lightPosition=c.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const c=this.paint.get("sky-type");return c==="atmosphere"?["skyboxCapture","skybox"]:c==="gradient"?["skyboxGradient"]:null}}};class _y{constructor(o,d,f,g){this.context=o,this.format=f,this.texture=o.gl.createTexture(),this.update(d,g)}update(o,d,f){const{width:g,height:b}=o,{context:w}=this,{gl:E}=w,{HTMLImageElement:I,HTMLCanvasElement:D,HTMLVideoElement:N,ImageData:j,ImageBitmap:Q}=p;if(E.bindTexture(E.TEXTURE_2D,this.texture),w.pixelStoreUnpackFlipY.set(!1),w.pixelStoreUnpack.set(1),w.pixelStoreUnpackPremultiplyAlpha.set(this.format===E.RGBA&&(!d||d.premultiply!==!1)),f||this.size&&this.size[0]===g&&this.size[1]===b){const{x:ne,y:ae}=f||{x:0,y:0};o instanceof I||o instanceof D||o instanceof N||o instanceof j||Q&&o instanceof Q?E.texSubImage2D(E.TEXTURE_2D,0,ne,ae,E.RGBA,E.UNSIGNED_BYTE,o):E.texSubImage2D(E.TEXTURE_2D,0,ne,ae,g,b,E.RGBA,E.UNSIGNED_BYTE,o.data)}else this.size=[g,b],o instanceof I||o instanceof D||o instanceof N||o instanceof j||Q&&o instanceof Q?E.texImage2D(E.TEXTURE_2D,0,this.format,this.format,E.UNSIGNED_BYTE,o):E.texImage2D(E.TEXTURE_2D,0,this.format,g,b,0,this.format,E.UNSIGNED_BYTE,o.data);this.useMipmap=!!(d&&d.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&E.generateMipmap(E.TEXTURE_2D)}bind(o,d){const{context:f}=this,{gl:g}=f;g.bindTexture(g.TEXTURE_2D,this.texture),o!==this.filter&&(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,o),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,this.useMipmap?o===g.NEAREST?g.NEAREST_MIPMAP_NEAREST:g.LINEAR_MIPMAP_NEAREST:o),this.filter=o),d!==this.wrap&&(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,d),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,d),this.wrap=d)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:o}=this.context;o.deleteTexture(this.texture),this.texture=null}}class rW{constructor(o){this._callback=o,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._callback()}),0))}remove(){this._channel=void 0,this._callback=()=>{}}}class sW{constructor(){this.tasks={},this.taskQueue=[],jt(["process"],this),this.invoker=new rW(this.process),this.nextId=0}add(o,d){const f=this.nextId++,g=(function({type:b,isSymbolTile:w,zoom:E}){return E=E||0,b==="message"?0:b!=="maybePrepare"||w?b!=="parseTile"||w?b==="parseTile"&&w?300-E:b==="maybePrepare"&&w?400-E:500:200-E:100-E})(d);if(g===0){Pt();try{o()}finally{}return{cancel:()=>{}}}return this.tasks[f]={fn:o,metadata:d,priority:g,id:f},this.taskQueue.push(f),this.invoker.trigger(),{cancel:()=>{delete this.tasks[f]}}}process(){Pt();try{if(this.taskQueue=this.taskQueue.filter((f=>!!this.tasks[f])),!this.taskQueue.length)return;const o=this.pick();if(o===null)return;const d=this.tasks[o];if(delete this.tasks[o],this.taskQueue.length&&this.invoker.trigger(),!d)return;d.fn()}finally{}}pick(){let o=null,d=1/0;for(let g=0;g<this.taskQueue.length;g++){const b=this.tasks[this.taskQueue[g]];b.priority<d&&(d=b.priority,o=g)}if(o===null)return null;const f=this.taskQueue[o];return this.taskQueue.splice(o,1),f}remove(){this.invoker.remove()}}class yL{constructor(o){this._stringToNumber={},this._numberToString=[];for(let d=0;d<o.length;d++){const f=o[d];this._stringToNumber[f]=d,this._numberToString[d]=f}}encode(o){return this._stringToNumber[o]}decode(o){return this._numberToString[o]}}const oW=["tile","layer","source","sourceLayer","state"];class bL{constructor(o,d,f,g,b){this.type="Feature",this._vectorTileFeature=o,this._z=d,this._x=f,this._y=g,this.properties=o.properties,this.id=b}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(o){this._geometry=o}toJSON(){const o={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};this.id!==void 0&&(o.id=this.id);for(const d of oW)this[d]!==void 0&&(o[d]=this[d]);return o}}const Cc=32,Vu=33,uf=new Uint16Array(8184);for(let c=0;c<2046;c++){let o=c+2,d=0,f=0,g=0,b=0,w=0,E=0;for(1&o?g=b=w=Cc:d=f=E=Cc;(o>>=1)>1;){const D=d+g>>1,N=f+b>>1;1&o?(g=d,b=f,d=w,f=E):(d=g,f=b,g=w,b=E),w=D,E=N}const I=4*c;uf[I+0]=d,uf[I+1]=f,uf[I+2]=g,uf[I+3]=b}const Bu=new Uint16Array(2178),df=new Uint8Array(1089),kx=new Uint16Array(1089);function xL(c){return c===0?-.03125:c===32?.03125:0}var wL=at([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const TL={type:2,extent:zn,loadGeometry:()=>[[new X(0,0),new X(zn+1,0),new X(zn+1,zn+1),new X(0,zn+1),new X(0,0)]]};class aE{constructor(o,d,f,g,b){this.tileID=o,this.uid=ot(),this.uses=0,this.tileSize=d,this.tileZoom=f,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=b,this.expiredRequestCount=0,this.state="loading",g&&g.transform&&(this.projection=g.transform.projection)}registerFadeDuration(o){const d=o+this.timeAdded;d<Eo.now()||this.fadeEndTime&&d<this.fadeEndTime||(this.fadeEndTime=d)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=Jm(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(o,d,f){if(this.unloadVectorData(),this.state="loaded",o){o.featureIndex&&(this.latestFeatureIndex=o.featureIndex,o.rawTileData?(this.latestRawTileData=o.rawTileData,this.latestFeatureIndex.rawTileData=o.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=o.collisionBoxArray,this.buckets=(function(g,b){const w={};if(!b)return w;for(const E of g){const I=E.layerIds.map((D=>b.getLayer(D))).filter(Boolean);if(I.length!==0){E.layers=I,E.stateDependentLayerIds&&(E.stateDependentLayers=E.stateDependentLayerIds.map((D=>I.filter((N=>N.id===D))[0])));for(const D of I)w[D.id]=E}}return w})(o.buckets,d.style),this.hasSymbolBuckets=!1;for(const g in this.buckets){const b=this.buckets[g];if(b instanceof cf){if(this.hasSymbolBuckets=!0,!f)break;b.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const g in this.buckets){const b=this.buckets[g];if(b instanceof cf&&b.hasRTLText){this.hasRTLText=!0,O.isLoading()||O.isLoaded()||C()!=="deferred"||L();break}}this.queryPadding=0;for(const g in this.buckets){const b=this.buckets[g];this.queryPadding=Math.max(this.queryPadding,d.style.getLayer(g).queryRadius(b))}o.imageAtlas&&(this.imageAtlas=o.imageAtlas),o.glyphAtlasImage&&(this.glyphAtlasImage=o.glyphAtlasImage),o.lineAtlas&&(this.lineAtlas=o.lineAtlas)}else this.collisionBoxArray=new Wi}unloadVectorData(){if(this.hasData()){for(const o in this.buckets)this.buckets[o].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(o){return this.buckets[o.id]}upload(o){for(const f in this.buckets){const g=this.buckets[f];g.uploadPending()&&g.upload(o)}const d=o.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new _y(o,this.imageAtlas.image,d.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new _y(o,this.glyphAtlasImage,d.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new _y(o,this.lineAtlas.image,d.ALPHA),this.lineAtlas.uploaded=!0)}prepare(o){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(o,this.imageAtlasTexture)}queryRenderedFeatures(o,d,f,g,b,w,E,I){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:g,pixelPosMatrix:E,transform:w,params:b,tileTransform:this.tileTransform},o,d,f):{}}querySourceFeatures(o,d){const f=this.latestFeatureIndex;if(!f||!f.rawTileData)return;const g=f.loadVTLayers(),b=d?d.sourceLayer:"",w=g._geojsonTileLayer||g[b];if(!w)return;const E=Zh(d&&d.filter),{z:I,x:D,y:N}=this.tileID.canonical,j={z:I,x:D,y:N};for(let Q=0;Q<w.length;Q++){const ne=w.feature(Q);if(E.needGeometry){const Te=Xm(ne,!0);if(!E.filter(new U(this.tileID.overscaledZ),Te,this.tileID.canonical))continue}else if(!E.filter(new U(this.tileID.overscaledZ),ne))continue;const ae=f.getId(ne,b),de=new bL(ne,I,D,N,ae);de.tile=j,o.push(de)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(o){const d=this.expirationTime;if(o.cacheControl){const f=Bt(o.cacheControl);f["max-age"]&&(this.expirationTime=Date.now()+1e3*f["max-age"])}else o.expires&&(this.expirationTime=new Date(o.expires).getTime());if(this.expirationTime){const f=Date.now();let g=!1;if(this.expirationTime>f)g=!1;else if(d)if(this.expirationTime<d)g=!0;else{const b=this.expirationTime-d;b?this.expirationTime=f+Math.max(b,3e4):g=!0}else g=!0;g?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(o,d){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(o).length===0||!d)return;const f=this.latestFeatureIndex.loadVTLayers(),g=d.style.listImages();for(const b in this.buckets){if(!d.style.hasLayer(b))continue;const w=this.buckets[b],E=w.layers[0].sourceLayer||"_geojsonTileLayer",I=f[E],D=o[E];if(!I||!D||Object.keys(D).length===0)continue;if(w.update(D,I,g,this.imageAtlas&&this.imageAtlas.patternPositions||{}),w instanceof hx||w instanceof ax){const j=d.style._getSourceCache(w.layers[0].source);d._terrain&&d._terrain.enabled&&j&&w.programConfigurations.needsUpload&&d._terrain._clearRenderCacheForTile(j.id,this.tileID)}const N=d&&d.style&&d.style.getLayer(b);N&&(this.queryPadding=Math.max(this.queryPadding,N.queryRadius(w)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Eo.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(o){this.symbolFadeHoldUntil=Eo.now()+o}setTexture(o,d){const f=d.context,g=f.gl;this.texture=this.texture||d.getTileTexture(o.width),this.texture?this.texture.update(o,{useMipmap:!0}):(this.texture=new _y(f,o,g.RGBA,{useMipmap:!0}),this.texture.bind(g.LINEAR,g.CLAMP_TO_EDGE))}setDependencies(o,d){const f={};for(const g of d)f[g]=!0;this.dependencies[o]=f}hasDependency(o,d){for(const f of o){const g=this.dependencies[f];if(g){for(const b of d)if(g[b])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(o,d){if(!d||d.name==="mercator"||this._tileDebugBuffer)return;const f=Wd(TL,this.tileID.canonical,this.tileTransform)[0],g=new Wt,b=new xa;for(let w=0;w<f.length;w++){const{x:E,y:I}=f[w];g.emplaceBack(E,I),b.emplaceBack(w)}b.emplaceBack(0),this._tileDebugIndexBuffer=o.createIndexBuffer(b),this._tileDebugBuffer=o.createVertexBuffer(g,Y_.members),this._tileDebugSegments=ds.simpleSegment(0,0,g.length,b.length)}_makeTileBoundsBuffers(o,d){if(this._tileBoundsBuffer||!d||d.name==="mercator")return;const f=Wd(TL,this.tileID.canonical,this.tileTransform)[0];let g,b;if(this.isRaster){const w=(function(E,I){const D=Jm(E,I),N=Math.pow(2,E.z);for(let Te=0;Te<Vu;Te++)for(let Re=0;Re<Vu;Re++){const $e=Kl((E.x+(Re+xL(Re))/Cc)/N),Oe=Lo((E.y+(Te+xL(Te))/Cc)/N),ze=I.project($e,Oe),Xe=Te*Vu+Re;Bu[2*Xe+0]=Math.round((ze.x*D.scale-D.x)*zn),Bu[2*Xe+1]=Math.round((ze.y*D.scale-D.y)*zn)}df.fill(0),kx.fill(0);for(let Te=2045;Te>=0;Te--){const Re=4*Te,$e=uf[Re+0],Oe=uf[Re+1],ze=uf[Re+2],Xe=uf[Re+3],qe=$e+ze>>1,wt=Oe+Xe>>1,yt=qe+wt-Oe,Ot=wt+$e-qe,tn=Oe*Vu+$e,kt=Xe*Vu+ze,zt=wt*Vu+qe,Nt=Math.hypot((Bu[2*tn+0]+Bu[2*kt+0])/2-Bu[2*zt+0],(Bu[2*tn+1]+Bu[2*kt+1])/2-Bu[2*zt+1])>=16;df[zt]=df[zt]||(Nt?1:0),Te<1022&&(df[zt]=df[zt]||df[(Oe+Ot>>1)*Vu+($e+yt>>1)]||df[(Xe+Ot>>1)*Vu+(ze+yt>>1)])}const j=new Lt,Q=new In;let ne=0;function ae(Te,Re){const $e=Re*Vu+Te;return kx[$e]===0&&(j.emplaceBack(Bu[2*$e+0],Bu[2*$e+1],Te*zn/Cc,Re*zn/Cc),kx[$e]=++ne),kx[$e]-1}function de(Te,Re,$e,Oe,ze,Xe){const qe=Te+$e>>1,wt=Re+Oe>>1;if(Math.abs(Te-ze)+Math.abs(Re-Xe)>1&&df[wt*Vu+qe])de(ze,Xe,Te,Re,qe,wt),de($e,Oe,ze,Xe,qe,wt);else{const yt=ae(Te,Re),Ot=ae($e,Oe),tn=ae(ze,Xe);Q.emplaceBack(yt,Ot,tn)}}return de(0,0,Cc,Cc,Cc,0),de(Cc,Cc,0,0,0,Cc),{vertices:j,indices:Q}})(this.tileID.canonical,d);g=w.vertices,b=w.indices}else{g=new Lt,b=new In;for(const{x:E,y:I}of f)g.emplaceBack(E,I,0,0);const w=US(g.int16,void 0,4);for(let E=0;E<w.length;E+=3)b.emplaceBack(w[E],w[E+1],w[E+2])}this._tileBoundsBuffer=o.createVertexBuffer(g,wL.members),this._tileBoundsIndexBuffer=o.createIndexBuffer(b),this._tileBoundsSegments=ds.simpleSegment(0,0,g.length,b.length)}_makeGlobeTileDebugBuffers(o,d){const f=d.projection;if(!f||f.name!=="globe"||d.freezeTileCoverage)return;const g=this.tileID.canonical,b=Q_(WM(g,d)),w=Ng(d.zoom);let E;w>0&&(E=pS(new Float64Array(16),d.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(o,g,d,b,E,w),this._makeGlobeTileDebugTextBuffer(o,g,d,b,E,w)}_globePoint(o,d,f,g,b,w,E){let I=J_(o,d,f);if(w){const D=1<<f.z,N=Ru(g.center.lng),j=Ou(g.center.lat),Q=(f.x+.5)/D-N;let ne=0;Q>.5?ne=-1:Q<-.5&&(ne=1);let ae=(o/zn+f.x)/D+ne,de=(d/zn+f.y)/D;ae=(ae-N)*g._pixelsPerMercatorPixel+N,de=(de-j)*g._pixelsPerMercatorPixel+j;const Te=[ae*g.worldSize,de*g.worldSize,0];as(Te,Te,w),I=Km(I,Te,E)}return as(I,I,b)}_makeGlobeTileDebugBorderBuffer(o,d,f,g,b,w){const E=new Wt,I=new xa,D=new ht,N=(Q,ne,ae,de,Te)=>{const Re=(ae-Q)/(Te-1),$e=(de-ne)/(Te-1),Oe=E.length;for(let ze=0;ze<Te;ze++){const Xe=Q+ze*Re,qe=ne+ze*$e;E.emplaceBack(Xe,qe);const wt=this._globePoint(Xe,qe,d,f,g,b,w);D.emplaceBack(wt[0],wt[1],wt[2]),I.emplaceBack(Oe+ze)}},j=zn;N(0,0,j,0,16),N(j,0,j,j,16),N(j,j,0,j,16),N(0,j,0,0,16),this._tileDebugIndexBuffer=o.createIndexBuffer(I),this._tileDebugBuffer=o.createVertexBuffer(E,Y_.members),this._globeTileDebugBorderBuffer=o.createVertexBuffer(D,UM.members),this._tileDebugSegments=ds.simpleSegment(0,0,E.length,I.length)}_makeGlobeTileDebugTextBuffer(o,d,f,g,b,w){const E=zn/4,I=new Wt,D=new In,N=new ht,j=25;D.reserve(32),I.reserve(j),N.reserve(j);const Q=(ne,ae)=>j*ne+ae;for(let ne=0;ne<j;ne++){const ae=ne*E;for(let de=0;de<j;de++){const Te=de*E;I.emplaceBack(Te,ae);const Re=this._globePoint(Te,ae,d,f,g,b,w);N.emplaceBack(Re[0],Re[1],Re[2])}}for(let ne=0;ne<4;ne++)for(let ae=0;ae<4;ae++){const de=Q(ne,ae),Te=Q(ne,ae+1),Re=Q(ne+1,ae),$e=Q(ne+1,ae+1);D.emplaceBack(de,Te,Re),D.emplaceBack(Re,Te,$e)}this._tileDebugTextIndexBuffer=o.createIndexBuffer(D),this._tileDebugTextBuffer=o.createVertexBuffer(I,Y_.members),this._globeTileDebugTextBuffer=o.createVertexBuffer(N,UM.members),this._tileDebugTextSegments=ds.simpleSegment(0,0,j,32)}}class aW{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(o,d,f){const g=String(d);if(this.stateChanges[o]=this.stateChanges[o]||{},this.stateChanges[o][g]=this.stateChanges[o][g]||{},vt(this.stateChanges[o][g],f),this.deletedStates[o]===null){this.deletedStates[o]={};for(const b in this.state[o])b!==g&&(this.deletedStates[o][b]=null)}else if(this.deletedStates[o]&&this.deletedStates[o][g]===null){this.deletedStates[o][g]={};for(const b in this.state[o][g])f[b]||(this.deletedStates[o][g][b]=null)}else for(const b in f)this.deletedStates[o]&&this.deletedStates[o][g]&&this.deletedStates[o][g][b]===null&&delete this.deletedStates[o][g][b]}removeFeatureState(o,d,f){if(this.deletedStates[o]===null)return;const g=String(d);if(this.deletedStates[o]=this.deletedStates[o]||{},f&&d!==void 0)this.deletedStates[o][g]!==null&&(this.deletedStates[o][g]=this.deletedStates[o][g]||{},this.deletedStates[o][g][f]=null);else if(d!==void 0)if(this.stateChanges[o]&&this.stateChanges[o][g])for(f in this.deletedStates[o][g]={},this.stateChanges[o][g])this.deletedStates[o][g][f]=null;else this.deletedStates[o][g]=null;else this.deletedStates[o]=null}getState(o,d){const f=String(d),g=vt({},(this.state[o]||{})[f],(this.stateChanges[o]||{})[f]);if(this.deletedStates[o]===null)return{};if(this.deletedStates[o]){const b=this.deletedStates[o][d];if(b===null)return{};for(const w in b)delete g[w]}return g}initializeTileState(o,d){o.setFeatureState(this.state,d)}coalesceChanges(o,d){const f={};for(const g in this.stateChanges){this.state[g]=this.state[g]||{};const b={};for(const w in this.stateChanges[g])this.state[g][w]||(this.state[g][w]={}),vt(this.state[g][w],this.stateChanges[g][w]),b[w]=this.state[g][w];f[g]=b}for(const g in this.deletedStates){this.state[g]=this.state[g]||{};const b={};if(this.deletedStates[g]===null)for(const w in this.state[g])b[w]={},this.state[g][w]={};else for(const w in this.deletedStates[g]){if(this.deletedStates[g][w]===null)this.state[g][w]={};else if(this.state[g][w])for(const E of Object.keys(this.deletedStates[g][w]))delete this.state[g][w][E];b[w]=this.state[g][w]}f[g]=f[g]||{},vt(f[g],b)}if(this.stateChanges={},this.deletedStates={},Object.keys(f).length!==0)for(const g in o)o[g].setFeatureState(f,d)}}class SL{constructor(o){this.size=o,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(o,d){const f=this.toIdx(o,d);return{min:this.minimums[f],max:this.maximums[f]}}isLeaf(o,d){return this.leaves[this.toIdx(o,d)]}toIdx(o,d){return d*this.size+o}}function EL(c,o,d,f){let g=0,b=Number.MAX_VALUE;for(let w=0;w<3;w++)if(Math.abs(f[w])<1e-15){if(d[w]<c[w]||d[w]>o[w])return null}else{const E=1/f[w];let I=(c[w]-d[w])*E,D=(o[w]-d[w])*E;if(I>D){const N=I;I=D,D=N}if(I>g&&(g=I),D<b&&(b=D),g>b)return null}return g}function CL(c,o,d,f,g,b,w,E,I,D,N){const j=f-c,Q=g-o,ne=b-d,ae=w-c,de=E-o,Te=I-d,Re=N[1]*Te-N[2]*de,$e=N[2]*ae-N[0]*Te,Oe=N[0]*de-N[1]*ae,ze=j*Re+Q*$e+ne*Oe;if(Math.abs(ze)<1e-15)return null;const Xe=1/ze,qe=D[0]-c,wt=D[1]-o,yt=D[2]-d,Ot=(qe*Re+wt*$e+yt*Oe)*Xe;if(Ot<0||Ot>1)return null;const tn=wt*ne-yt*Q,kt=yt*j-qe*ne,zt=qe*Q-wt*j,Nt=(N[0]*tn+N[1]*kt+N[2]*zt)*Xe;return Nt<0||Ot+Nt>1?null:(ae*tn+de*kt+Te*zt)*Xe}function kL(c,o,d){return(c-o)/(d-o)}function IL(c,o,d,f,g,b,w,E,I){const D=1<<d,N=b-f,j=w-g,Q=(c+1)/D*N+f,ne=(o+0)/D*j+g,ae=(o+1)/D*j+g;E[0]=(c+0)/D*N+f,E[1]=ne,I[0]=Q,I[1]=ae}class AL{constructor(o){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=o,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const d=(function(b){const w=Math.ceil(Math.log2(b.dim/8)),E=[];let I=Math.ceil(Math.pow(2,w));const D=1/I,N=(ne,ae,de,Te,Re)=>{const $e=Te?1:0,Oe=(ne+1)*de-$e,ze=ae*de,Xe=(ae+1)*de-$e;Re[0]=ne*de,Re[1]=ze,Re[2]=Oe,Re[3]=Xe};let j=new SL(I);const Q=[];for(let ne=0;ne<I*I;ne++){N(ne%I,Math.floor(ne/I),D,!1,Q);const ae=hf(Q[0],Q[1],b),de=hf(Q[2],Q[1],b),Te=hf(Q[2],Q[3],b),Re=hf(Q[0],Q[3],b);j.minimums.push(Math.min(ae,de,Te,Re)),j.maximums.push(Math.max(ae,de,Te,Re)),j.leaves.push(1)}for(E.push(j),I/=2;I>=1;I/=2){const ne=E[E.length-1];j=new SL(I);for(let ae=0;ae<I*I;ae++){N(ae%I,Math.floor(ae/I),2,!0,Q);const de=ne.getElevation(Q[0],Q[1]),Te=ne.getElevation(Q[2],Q[1]),Re=ne.getElevation(Q[2],Q[3]),$e=ne.getElevation(Q[0],Q[3]),Oe=ne.isLeaf(Q[0],Q[1]),ze=ne.isLeaf(Q[2],Q[1]),Xe=ne.isLeaf(Q[2],Q[3]),qe=ne.isLeaf(Q[0],Q[3]),wt=Math.min(de.min,Te.min,Re.min,$e.min),yt=Math.max(de.max,Te.max,Re.max,$e.max),Ot=Oe&&ze&&Xe&&qe;j.maximums.push(yt),j.minimums.push(wt),j.leaves.push(yt-wt<=5&&Ot?1:0)}E.push(j)}return E})(this.dem),f=d.length-1,g=d[f];this._addNode(g.minimums[0],g.maximums[0],g.leaves[0]),this._construct(d,0,0,f,0)}raycastRoot(o,d,f,g,b,w,E=1){return EL([o,d,-100],[f,g,this.maximums[0]*E],b,w)}raycast(o,d,f,g,b,w,E=1){if(!this.nodeCount)return null;const I=this.raycastRoot(o,d,f,g,b,w,E);if(I==null)return null;const D=[],N=[],j=[],Q=[],ne=[{idx:0,t:I,nodex:0,nodey:0,depth:0}];for(;ne.length>0;){const{idx:ae,t:de,nodex:Te,nodey:Re,depth:$e}=ne.pop();if(this.leaves[ae]){IL(Te,Re,$e,o,d,f,g,j,Q);const ze=1<<$e,Xe=(Te+0)/ze,qe=(Te+1)/ze,wt=(Re+0)/ze,yt=(Re+1)/ze,Ot=hf(Xe,wt,this.dem)*E,tn=hf(qe,wt,this.dem)*E,kt=hf(qe,yt,this.dem)*E,zt=hf(Xe,yt,this.dem)*E,Nt=CL(j[0],j[1],Ot,Q[0],j[1],tn,Q[0],Q[1],kt,b,w),Xt=CL(Q[0],Q[1],kt,j[0],Q[1],zt,j[0],j[1],Ot,b,w),an=Math.min(Nt!==null?Nt:Number.MAX_VALUE,Xt!==null?Xt:Number.MAX_VALUE);if(an!==Number.MAX_VALUE)return an;{const Rt=K_([],b,w,de);if(PL(Ot,tn,zt,kt,kL(Rt[0],j[0],Q[0]),kL(Rt[1],j[1],Q[1]))>=Rt[2])return de}continue}let Oe=0;for(let ze=0;ze<this._siblingOffset.length;ze++){IL((Te<<1)+this._siblingOffset[ze][0],(Re<<1)+this._siblingOffset[ze][1],$e+1,o,d,f,g,j,Q),j[2]=-100,Q[2]=this.maximums[this.childOffsets[ae]+ze]*E;const Xe=EL(j,Q,b,w);if(Xe!=null){const qe=Xe;D[ze]=qe;let wt=!1;for(let yt=0;yt<Oe&&!wt;yt++)qe>=D[N[yt]]&&(N.splice(yt,0,ze),wt=!0);wt||(N[Oe]=ze),Oe++}}for(let ze=0;ze<Oe;ze++){const Xe=N[ze];ne.push({idx:this.childOffsets[ae]+Xe,t:D[Xe],nodex:(Te<<1)+this._siblingOffset[Xe][0],nodey:(Re<<1)+this._siblingOffset[Xe][1],depth:$e+1})}}return null}_addNode(o,d,f){return this.minimums.push(o),this.maximums.push(d),this.leaves.push(f),this.childOffsets.push(0),this.nodeCount++}_construct(o,d,f,g,b){if(o[g].isLeaf(d,f)===1)return;this.childOffsets[b]||(this.childOffsets[b]=this.nodeCount);const w=g-1,E=o[w];let I=0,D=0;for(let N=0;N<this._siblingOffset.length;N++){const j=2*d+this._siblingOffset[N][0],Q=2*f+this._siblingOffset[N][1],ne=E.getElevation(j,Q),ae=E.isLeaf(j,Q),de=this._addNode(ne.min,ne.max,ae);ae&&(I|=1<<N),D||(D=de)}for(let N=0;N<this._siblingOffset.length;N++)I&1<<N||this._construct(o,2*d+this._siblingOffset[N][0],2*f+this._siblingOffset[N][1],w,D+N)}}function PL(c,o,d,f,g,b){return Qn(Qn(c,d,b),Qn(o,f,b),g)}function hf(c,o,d){const f=d.dim,g=Le(c*f-.5,0,f-1),b=Le(o*f-.5,0,f-1),w=Math.floor(g),E=Math.floor(b),I=Math.min(w+1,f-1),D=Math.min(E+1,f-1);return PL(d.get(w,E),d.get(I,E),d.get(w,D),d.get(I,D),g-w,b-E)}const ML={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function lW(c,o,d){return(256*c*256+256*o+d)/10-1e4}function cW(c,o,d){return 256*c+o+d/256-32768}class Ix{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(o,d,f,g=!1,b=!1){if(this.uid=o,d.height!==d.width)throw new RangeError("DEM tiles must be square");if(f&&f!=="mapbox"&&f!=="terrarium")return dt(`"${f}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=d.height;const w=this.dim=d.height-2,E=new Uint32Array(d.data.buffer);if(this.pixels=new Uint8Array(d.data.buffer),this.encoding=f||"mapbox",this.borderReady=g,!g){for(let I=0;I<w;I++)E[this._idx(-1,I)]=E[this._idx(0,I)],E[this._idx(w,I)]=E[this._idx(w-1,I)],E[this._idx(I,-1)]=E[this._idx(I,0)],E[this._idx(I,w)]=E[this._idx(I,w-1)];E[this._idx(-1,-1)]=E[this._idx(0,0)],E[this._idx(w,-1)]=E[this._idx(w-1,0)],E[this._idx(-1,w)]=E[this._idx(0,w-1)],E[this._idx(w,w)]=E[this._idx(w-1,w-1)],b&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new AL(this)}get(o,d,f=!1){f&&(o=Le(o,-1,this.dim),d=Le(d,-1,this.dim));const g=4*this._idx(o,d);return(this.encoding==="terrarium"?cW:lW)(this.pixels[g],this.pixels[g+1],this.pixels[g+2])}static getUnpackVector(o){return ML[o]}get unpackVector(){return ML[this.encoding]}_idx(o,d){if(o<-1||o>=this.dim+1||d<-1||d>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(d+1)*this.stride+(o+1)}static pack(o,d){const f=[0,0,0,0],g=Ix.getUnpackVector(d);let b=Math.floor((o+g[3])/g[2]);return f[2]=b%256,b=Math.floor(b/256),f[1]=b%256,b=Math.floor(b/256),f[0]=b,f}getPixels(){return new Tl({width:this.stride,height:this.stride},this.pixels)}backfillBorder(o,d,f){if(this.dim!==o.dim)throw new Error("dem dimension mismatch");let g=d*this.dim,b=d*this.dim+this.dim,w=f*this.dim,E=f*this.dim+this.dim;switch(d){case-1:g=b-1;break;case 1:b=g+1}switch(f){case-1:w=E-1;break;case 1:E=w+1}const I=-d*this.dim,D=-f*this.dim;for(let N=w;N<E;N++)for(let j=g;j<b;j++){const Q=4*this._idx(j,N),ne=4*this._idx(j+I,N+D);this.pixels[Q+0]=o.pixels[ne+0],this.pixels[Q+1]=o.pixels[ne+1],this.pixels[Q+2]=o.pixels[ne+2],this.pixels[Q+3]=o.pixels[ne+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}Tn(Ix,"DEMData"),Tn(AL,"DemMinMaxQuadTree",{omit:["dem"]});class uW{constructor(o,d){this.max=o,this.onRemove=d,this.reset()}reset(){for(const o in this.data)for(const d of this.data[o])d.timeout&&clearTimeout(d.timeout),this.onRemove(d.value);return this.data={},this.order=[],this}add(o,d,f){const g=o.wrapped().key;this.data[g]===void 0&&(this.data[g]=[]);const b={value:d,timeout:void 0};if(f!==void 0&&(b.timeout=setTimeout((()=>{this.remove(o,b)}),f)),this.data[g].push(b),this.order.push(g),this.order.length>this.max){const w=this._getAndRemoveByKey(this.order[0]);w&&this.onRemove(w)}return this}has(o){return o.wrapped().key in this.data}getAndRemove(o){return this.has(o)?this._getAndRemoveByKey(o.wrapped().key):null}_getAndRemoveByKey(o){const d=this.data[o].shift();return d.timeout&&clearTimeout(d.timeout),this.data[o].length===0&&delete this.data[o],this.order.splice(this.order.indexOf(o),1),d.value}getByKey(o){const d=this.data[o];return d?d[0].value:null}get(o){return this.has(o)?this.data[o.wrapped().key][0].value:null}remove(o,d){if(!this.has(o))return this;const f=o.wrapped().key,g=d===void 0?0:this.data[f].indexOf(d),b=this.data[f][g];return this.data[f].splice(g,1),b.timeout&&clearTimeout(b.timeout),this.data[f].length===0&&delete this.data[f],this.onRemove(b.value),this.order.splice(this.order.indexOf(f),1),this}setMaxSize(o){for(this.max=o;this.order.length>this.max;){const d=this._getAndRemoveByKey(this.order[0]);d&&this.onRemove(d)}return this}filter(o){const d=[];for(const f in this.data)for(const g of this.data[f])o(g.value)||d.push(g);for(const f of d)this.remove(f.value.tileID,f)}}class tv{constructor(o,d,f){this.func=o,this.mask=d,this.range=f}}tv.ReadOnly=!1,tv.ReadWrite=!0,tv.disabled=new tv(519,tv.ReadOnly,[0,1]);const lE=7680;class cE{constructor(o,d,f,g,b,w){this.test=o,this.ref=d,this.mask=f,this.fail=g,this.depthFail=b,this.pass=w}}cE.disabled=new cE({func:519,mask:0},0,0,lE,lE,lE);class Fu{constructor(o,d,f){this.blendFunction=o,this.blendColor=d,this.mask=f}}Fu.Replace=[1,0],Fu.disabled=new Fu(Fu.Replace,Ui.transparent,[!1,!1,!1,!1]),Fu.unblended=new Fu(Fu.Replace,Ui.transparent,[!0,!0,!0,!0]),Fu.alphaBlended=new Fu([1,771],Ui.transparent,[!0,!0,!0,!0]);const uE=1029,dE=2305;class ou{constructor(o,d,f){this.enable=o,this.mode=d,this.frontFace=f}}ou.disabled=new ou(!1,uE,dE),ou.backCCW=new ou(!0,uE,dE),ou.backCW=new ou(!0,uE,2304),ou.frontCW=new ou(!0,1028,2304),ou.frontCCW=new ou(!0,1028,dE);class Qm extends Fl{constructor(o,d,f){super(),this.id=o,this._onlySymbols=f,d.on("data",(g=>{g.dataType==="source"&&g.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&g.dataType==="source"&&g.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))})),d.on("error",(()=>{this._sourceErrored=!0})),this._source=d,this._tiles={},this._cache=new uW(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=d.minTileCacheSize,this._maxTileCacheSize=d.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new aW,this._isRaster=this._source.type==="raster"||this._source.type==="raster-dem"||this._source.type==="custom"&&this._source._dataType==="raster"}onAdd(o){this.map=o,this._minTileCacheSize=this._minTileCacheSize===void 0&&o?o._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=this._maxTileCacheSize===void 0&&o?o._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const o in this._tiles){const d=this._tiles[o];if(d.state!=="loaded"&&d.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const o=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,o&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(o,d){return o.isSymbolTile=this._onlySymbols,this._source.loadTile(o,d)}_unloadTile(o){if(this._source.unloadTile)return this._source.unloadTile(o,(()=>{}))}_abortTile(o){if(this._source.abortTile)return this._source.abortTile(o,(()=>{}))}serialize(){return this._source.serialize()}prepare(o){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const d in this._tiles){const f=this._tiles[d];f.upload(o),f.prepare(this.map.style.imageManager)}}getIds(){return it(this._tiles).map((o=>o.tileID)).sort(DL).map((o=>o.key))}getRenderableIds(o){const d=[];for(const f in this._tiles)this._isIdRenderable(+f,o)&&d.push(this._tiles[f]);return o?d.sort(((f,g)=>{const b=f.tileID,w=g.tileID,E=new X(b.canonical.x,b.canonical.y)._rotate(this.transform.angle),I=new X(w.canonical.x,w.canonical.y)._rotate(this.transform.angle);return b.overscaledZ-w.overscaledZ||I.y-E.y||I.x-E.x})).map((f=>f.tileID.key)):d.map((f=>f.tileID)).sort(DL).map((f=>f.key))}hasRenderableParent(o){const d=this.findLoadedParent(o,0);return!!d&&this._isIdRenderable(d.tileID.key)}_isIdRenderable(o,d){return this._tiles[o]&&this._tiles[o].hasData()&&!this._coveredTiles[o]&&(d||!this._tiles[o].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const o in this._tiles)this._tiles[o].state!=="errored"&&this._reloadTile(+o,"reloading")}}_reloadTile(o,d){const f=this._tiles[o];f&&(f.state!=="loading"&&(f.state=d),this._loadTile(f,this._tileLoaded.bind(this,f,o,d)))}_tileLoaded(o,d,f,g){if(g)if(o.state="errored",g.status!==404)this._source.fire(new Co(g,{tile:o}));else if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){const b=this.map.painter.terrain;this.update(this.transform,b.getScaledDemTileSize(),!0),b.resetTileLookupCache(this.id)}else this.update(this.transform);else o.timeAdded=Eo.now(),f==="expired"&&(o.refreshedUponExpiration=!0),this._setTileReloadTimer(d,o),this._source.type==="raster-dem"&&o.dem&&this._backfillDEM(o),this._state.initializeTileState(o,this.map?this.map.painter:null),this._source.fire(new Ho("data",{dataType:"source",tile:o,coord:o.tileID,sourceCacheId:this.id}))}_backfillDEM(o){const d=this.getRenderableIds();for(let g=0;g<d.length;g++){const b=d[g];if(o.neighboringTiles&&o.neighboringTiles[b]){const w=this.getTileByID(b);f(o,w),f(w,o)}}function f(g,b){if(!g.dem||g.dem.borderReady)return;g.needsHillshadePrepare=!0,g.needsDEMTextureUpload=!0;let w=b.tileID.canonical.x-g.tileID.canonical.x;const E=b.tileID.canonical.y-g.tileID.canonical.y,I=Math.pow(2,g.tileID.canonical.z),D=b.tileID.key;w===0&&E===0||Math.abs(E)>1||(Math.abs(w)>1&&(Math.abs(w+I)===1?w+=I:Math.abs(w-I)===1&&(w-=I)),b.dem&&g.dem&&(g.dem.backfillBorder(b.dem,w,E),g.neighboringTiles&&g.neighboringTiles[D]&&(g.neighboringTiles[D].backfilled=!0)))}}getTile(o){return this.getTileByID(o.key)}getTileByID(o){return this._tiles[o]}_retainLoadedChildren(o,d,f,g){for(const b in this._tiles){let w=this._tiles[b];if(g[b]||!w.hasData()||w.tileID.overscaledZ<=d||w.tileID.overscaledZ>f)continue;let E=w.tileID;for(;w&&w.tileID.overscaledZ>d+1;){const D=w.tileID.scaledTo(w.tileID.overscaledZ-1);w=this._tiles[D.key],w&&w.hasData()&&(E=D)}let I=E;for(;I.overscaledZ>d;)if(I=I.scaledTo(I.overscaledZ-1),o[I.key]){g[E.key]=E;break}}}findLoadedParent(o,d){if(o.key in this._loadedParentTiles){const f=this._loadedParentTiles[o.key];return f&&f.tileID.overscaledZ>=d?f:null}for(let f=o.overscaledZ-1;f>=d;f--){const g=o.scaledTo(f),b=this._getLoadedTile(g);if(b)return b}}_getLoadedTile(o){const d=this._tiles[o.key];return d&&d.hasData()?d:this._cache.getByKey(this._source.reparseOverscaled?o.wrapped().key:o.canonical.key)}updateCacheSize(o,d){d=d||this._source.tileSize;const f=Math.ceil(o.width/d)+1,g=Math.ceil(o.height/d)+1,b=Math.floor(f*g*5),w=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,b):b,E=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,w):w;this._cache.setMaxSize(E)}handleWrapJump(o){const d=Math.round((o-(this._prevLng===void 0?o:this._prevLng))/360);if(this._prevLng=o,d){const f={};for(const g in this._tiles){const b=this._tiles[g];b.tileID=b.tileID.unwrapTo(b.tileID.wrap+d),f[b.tileID.key]=b}this._tiles=f;for(const g in this._timers)clearTimeout(this._timers[g]),delete this._timers[g];for(const g in this._tiles)this._setTileReloadTimer(+g,this._tiles[g])}}update(o,d,f){if(this.transform=o,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!f)return;let g;this.updateCacheSize(o,d),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?g=o.getVisibleUnwrappedCoordinates(this._source.tileID).map((E=>new Sa(E.canonical.z,E.wrap,E.canonical.z,E.canonical.x,E.canonical.y))):(g=o.coveringTiles({tileSize:d||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!f,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(g=g.filter((E=>this._source.hasTile(E))))):g=[];const b=this._updateRetainedTiles(g);if(LL(this._source.type)&&g.length!==0){const E={},I={},D=Object.keys(b);for(const j of D){const Q=b[j],ne=this._tiles[j];if(!ne||ne.fadeEndTime&&ne.fadeEndTime<=Eo.now())continue;const ae=this.findLoadedParent(Q,Math.max(Q.overscaledZ-Qm.maxOverzooming,this._source.minzoom));ae&&(this._addTile(ae.tileID),E[ae.tileID.key]=ae.tileID),I[j]=Q}const N=g[g.length-1].overscaledZ;for(const j in this._tiles){const Q=this._tiles[j];if(b[j]||!Q.hasData())continue;let ne=Q.tileID;for(;ne.overscaledZ>N;){ne=ne.scaledTo(ne.overscaledZ-1);const ae=this._tiles[ne.key];if(ae&&ae.hasData()&&I[ne.key]){b[j]=Q.tileID;break}}}for(const j in E)b[j]||(this._coveredTiles[j]=!0,b[j]=E[j])}for(const E in b)this._tiles[E].clearFadeHold();const w=(function(E,I){const D=[];for(const N in E)N in I||D.push(N);return D})(this._tiles,b);for(const E of w){const I=this._tiles[E];I.hasSymbolBuckets&&!I.holdingForFade()?I.setHoldDuration(this.map._fadeDuration):I.hasSymbolBuckets&&!I.symbolFadeFinished()||this._removeTile(+E)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const o in this._tiles)this._tiles[o].holdingForFade()&&this._removeTile(+o)}_updateRetainedTiles(o){const d={};if(o.length===0)return d;const f={},g=o.reduce(((D,N)=>Math.min(D,N.overscaledZ)),1/0),b=o[0].overscaledZ,w=Math.max(b-Qm.maxOverzooming,this._source.minzoom),E=Math.max(b+Qm.maxUnderzooming,this._source.minzoom),I={};for(const D of o){const N=this._addTile(D);d[D.key]=D,N.hasData()||g<this._source.maxzoom&&(I[D.key]=D)}this._retainLoadedChildren(I,g,E,d);for(const D of o){let N=this._tiles[D.key];if(N.hasData())continue;if(D.canonical.z>=this._source.maxzoom){const Q=D.children(this._source.maxzoom)[0],ne=this.getTile(Q);if(ne&&ne.hasData()){d[Q.key]=Q;continue}}else{const Q=D.children(this._source.maxzoom);if(d[Q[0].key]&&d[Q[1].key]&&d[Q[2].key]&&d[Q[3].key])continue}let j=N.wasRequested();for(let Q=D.overscaledZ-1;Q>=w;--Q){const ne=D.scaledTo(Q);if(f[ne.key]||(f[ne.key]=!0,N=this.getTile(ne),!N&&j&&(N=this._addTile(ne)),N&&(d[ne.key]=ne,j=N.wasRequested(),N.hasData())))break}}return d}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const o in this._tiles){const d=[];let f,g=this._tiles[o].tileID;for(;g.overscaledZ>0;){if(g.key in this._loadedParentTiles){f=this._loadedParentTiles[g.key];break}d.push(g.key);const b=g.scaledTo(g.overscaledZ-1);if(f=this._getLoadedTile(b),f)break;g=b}for(const b of d)this._loadedParentTiles[b]=f}}_addTile(o){let d=this._tiles[o.key];if(d)return d;d=this._cache.getAndRemove(o),d&&(this._setTileReloadTimer(o.key,d),d.tileID=o,this._state.initializeTileState(d,this.map?this.map.painter:null),this._cacheTimers[o.key]&&(clearTimeout(this._cacheTimers[o.key]),delete this._cacheTimers[o.key],this._setTileReloadTimer(o.key,d)));const f=!!d;if(!f){const g=this.map?this.map.painter:null;d=new aE(o,this._source.tileSize*o.overscaleFactor(),this.transform.tileZoom,g,this._isRaster),this._loadTile(d,this._tileLoaded.bind(this,d,o.key,d.state))}return d?(d.uses++,this._tiles[o.key]=d,f||this._source.fire(new Ho("dataloading",{tile:d,coord:d.tileID,dataType:"source"})),d):null}_setTileReloadTimer(o,d){o in this._timers&&(clearTimeout(this._timers[o]),delete this._timers[o]);const f=d.getExpiryTimeout();f&&(this._timers[o]=setTimeout((()=>{this._reloadTile(o,"expired"),delete this._timers[o]}),f))}_removeTile(o){const d=this._tiles[o];d&&(d.uses--,delete this._tiles[o],this._timers[o]&&(clearTimeout(this._timers[o]),delete this._timers[o]),d.uses>0||(d.hasData()&&d.state!=="reloading"?this._cache.add(d.tileID,d,d.getExpiryTimeout()):(d.aborted=!0,this._abortTile(d),this._unloadTile(d))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const o in this._tiles)this._removeTile(+o);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(o,d,f){const g=[],b=this.transform;if(!b)return g;const w=b.projection.name==="globe",E=Ru(b.center.lng);for(const I in this._tiles){const D=this._tiles[I];if(f&&D.clearQueryDebugViz(),D.holdingForFade())continue;let N;if(w){const j=D.tileID.canonical;if(j.z===0){const Q=[Math.abs(Le(E,...yy(j,-1))-E),Math.abs(Le(E,...yy(j,1))-E)];N=[0,2*Q.indexOf(Math.min(...Q))-1]}else{const Q=[Math.abs(Le(E,...yy(j,-1))-E),Math.abs(Le(E,...yy(j,0))-E),Math.abs(Le(E,...yy(j,1))-E)];N=[Q.indexOf(Math.min(...Q))-1]}}else N=[0];for(const j of N){const Q=o.containsTile(D,b,d,j);Q&&g.push(Q)}}return g}getVisibleCoordinates(o){const d=this.getRenderableIds(o).map((f=>this._tiles[f].tileID));for(const f of d)f.projMatrix=this.transform.calculateProjMatrix(f.toUnwrapped());return d}hasTransition(){if(this._source.hasTransition())return!0;if(LL(this._source.type))for(const o in this._tiles){const d=this._tiles[o];if(d.fadeEndTime!==void 0&&d.fadeEndTime>=Eo.now())return!0}return!1}setFeatureState(o,d,f){this._state.updateState(o=o||"_geojsonTileLayer",d,f)}removeFeatureState(o,d,f){this._state.removeFeatureState(o=o||"_geojsonTileLayer",d,f)}getFeatureState(o,d){return this._state.getState(o=o||"_geojsonTileLayer",d)}setDependencies(o,d,f){const g=this._tiles[o];g&&g.setDependencies(d,f)}reloadTilesForDependencies(o,d){for(const f in this._tiles)this._tiles[f].hasDependency(o,d)&&this._reloadTile(+f,"reloading");this._cache.filter((f=>!f.hasDependency(o,d)))}_preloadTiles(o,d){if(!this._sourceLoaded){const E=()=>{this._sourceLoaded&&(this._source.off("data",E),this._preloadTiles(o,d))};return void this._source.on("data",E)}const f=new Map,g=Array.isArray(o)?o:[o],b=this.map.painter.terrain,w=this.usedForTerrain&&b?b.getScaledDemTileSize():this._source.tileSize;for(const E of g){const I=E.coveringTiles({tileSize:w,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const D of I)f.set(D.key,D);this.usedForTerrain&&E.updateElevation(!1)}Je(Array.from(f.values()),((E,I)=>{const D=new aE(E,this._source.tileSize*E.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(D,(N=>{this._source.type==="raster-dem"&&D.dem&&this._backfillDEM(D),I(N,D)}))}),d)}}function DL(c,o){const d=Math.abs(2*c.wrap)-+(c.wrap<0),f=Math.abs(2*o.wrap)-+(o.wrap<0);return c.overscaledZ-o.overscaledZ||f-d||o.canonical.y-c.canonical.y||o.canonical.x-c.canonical.x}function LL(c){return c==="raster"||c==="image"||c==="video"||c==="custom"}function yy(c,o){const d=1<<c.z;return[c.x/d+o,(c.x+1)/d+o]}Qm.maxOverzooming=10,Qm.maxUnderzooming=3;class Ax{constructor(o,d,f){this._demTile=o,this._dem=this._demTile.dem,this._scale=d,this._offset=f}static create(o,d,f){const g=f||o.findDEMTileFor(d);if(!g||!g.dem)return;const b=g.dem,w=g.tileID,E=1<<d.canonical.z-w.canonical.z;return new Ax(g,g.tileSize/zn/E,[(d.canonical.x/E-w.canonical.x)*b.dim,(d.canonical.y/E-w.canonical.y)*b.dim])}tileCoordToPixel(o,d){const f=d*this._scale+this._offset[1],g=Math.floor(o*this._scale+this._offset[0]),b=Math.floor(f);return new X(g,b)}getElevationAt(o,d,f,g){const b=o*this._scale+this._offset[0],w=d*this._scale+this._offset[1],E=Math.floor(b),I=Math.floor(w),D=this._dem;return g=!!g,f?Qn(Qn(D.get(E,I,g),D.get(E,I+1,g),w-I),Qn(D.get(E+1,I,g),D.get(E+1,I+1,g),w-I),b-E):D.get(E,I,g)}getElevationAtPixel(o,d,f){return this._dem.get(o,d,!!f)}getMeterToDEM(o){return(1<<this._demTile.tileID.canonical.z)*iu(1,o)*this._dem.stride}}class RL{constructor(o,d){this.tileID=o,this.x=o.canonical.x,this.y=o.canonical.y,this.z=o.canonical.z,this.grid=new ta(zn,16,0),this.featureIndexArray=new zd,this.promoteId=d}insert(o,d,f,g,b,w=0){const E=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(f,g,b,w);const I=this.grid;for(let D=0;D<d.length;D++){const N=d[D],j=[1/0,1/0,-1/0,-1/0];for(let Q=0;Q<N.length;Q++){const ne=N[Q];j[0]=Math.min(j[0],ne.x),j[1]=Math.min(j[1],ne.y),j[2]=Math.max(j[2],ne.x),j[3]=Math.max(j[3],ne.y)}j[0]<zn&&j[1]<zn&&j[2]>=0&&j[3]>=0&&I.insert(E,j[0],j[1],j[2],j[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new HS(new px(this.rawTileData)).layers,this.sourceLayerCoder=new yL(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const o in this.vtLayers)this.vtFeatures[o]=[]}return this.vtLayers}query(o,d,f,g){this.loadVTLayers();const b=o.params||{},w=Zh(b.filter),E=o.tileResult,I=o.transform,D=E.bufferedTilespaceBounds,N=this.grid.query(D.min.x,D.min.y,D.max.x,D.max.y,((ae,de,Te,Re)=>sD(E.bufferedTilespaceGeometry,ae,de,Te,Re)));N.sort(dW);let j=null;I.elevation&&N.length>0&&(j=Ax.create(I.elevation,this.tileID));const Q={};let ne;for(let ae=0;ae<N.length;ae++){const de=N[ae];if(de===ne)continue;ne=de;const Te=this.featureIndexArray.get(de);let Re=null;this.loadMatchingFeature(Q,Te,w,b.layers,b.availableImages,d,f,g,(($e,Oe,ze,Xe=0)=>(Re||(Re=Wd($e,this.tileID.canonical,o.tileTransform)),Oe.queryIntersectsFeature(E,$e,ze,Re,this.z,o.transform,o.pixelPosMatrix,j,Xe))))}return Q}loadMatchingFeature(o,d,f,g,b,w,E,I,D){const{featureIndex:N,bucketIndex:j,sourceLayerIndex:Q,layoutVertexArrayOffset:ne}=d,ae=this.bucketLayerIDs[j];if(g&&!(function($e,Oe){for(let ze=0;ze<$e.length;ze++)if(Oe.indexOf($e[ze])>=0)return!0;return!1})(g,ae))return;const de=this.sourceLayerCoder.decode(Q),Te=this.vtLayers[de].feature(N);if(f.needGeometry){const $e=Xm(Te,!0);if(!f.filter(new U(this.tileID.overscaledZ),$e,this.tileID.canonical))return}else if(!f.filter(new U(this.tileID.overscaledZ),Te))return;const Re=this.getId(Te,de);for(let $e=0;$e<ae.length;$e++){const Oe=ae[$e];if(g&&g.indexOf(Oe)<0)continue;const ze=w[Oe];if(!ze)continue;let Xe={};Re!==void 0&&I&&(Xe=I.getState(ze.sourceLayer||"_geojsonTileLayer",Re));const qe=vt({},E[Oe]);qe.paint=OL(qe.paint,ze.paint,Te,Xe,b),qe.layout=OL(qe.layout,ze.layout,Te,Xe,b);const wt=!D||D(Te,ze,Xe,ne);if(!wt)continue;const yt=new bL(Te,this.z,this.x,this.y,Re);yt.layer=qe;let Ot=o[Oe];Ot===void 0&&(Ot=o[Oe]=[]),Ot.push({featureIndex:N,feature:yt,intersectionZ:wt})}}lookupSymbolFeatures(o,d,f,g,b,w,E,I){const D={};this.loadVTLayers();const N=Zh(b);for(const j of o)this.loadMatchingFeature(D,{bucketIndex:f,sourceLayerIndex:g,featureIndex:j,layoutVertexArrayOffset:0},N,w,E,I,d);return D}loadFeature(o){const{featureIndex:d,sourceLayerIndex:f}=o;this.loadVTLayers();const g=this.sourceLayerCoder.decode(f),b=this.vtFeatures[g];if(b[d])return b[d];const w=this.vtLayers[g].feature(d);return b[d]=w,w}hasLayer(o){for(const d of this.bucketLayerIDs)for(const f of d)if(o===f)return!0;return!1}getId(o,d){let f=o.id;if(this.promoteId){const g=typeof this.promoteId=="string"?this.promoteId:this.promoteId[d];g!=null&&(f=o.properties[g]),typeof f=="boolean"&&(f=Number(f))}return f}}function OL(c,o,d,f,g){return ke(c,((b,w)=>{const E=o instanceof Ce?o.get(w):null;return E&&E.evaluate?E.evaluate(d,f,g):E}))}function dW(c,o){return o-c}Tn(RL,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class VL{constructor(o,d){this.width=o,this.height=d,this.nextRow=0,this.image=new Hd({width:o,height:d}),this.positions={},this.uploaded=!1}getDash(o,d){const f=this.getKey(o,d);return this.positions[f]}trim(){const o=this.width,d=this.height=ut(this.nextRow);this.image.resize({width:o,height:d})}getKey(o,d){return o.join(",")+d}getDashRanges(o,d,f){const g=[];let b=o.length%2==1?-o[o.length-1]*f:0,w=o[0]*f,E=!0;g.push({left:b,right:w,isDash:E,zeroLength:o[0]===0});let I=o[0];for(let D=1;D<o.length;D++){E=!E;const N=o[D];b=I*f,I+=N,w=I*f,g.push({left:b,right:w,isDash:E,zeroLength:N===0})}return g}addRoundDash(o,d,f){const g=d/2;for(let b=-f;b<=f;b++){const w=this.width*(this.nextRow+f+b);let E=0,I=o[E];for(let D=0;D<this.width;D++){D/I.right>1&&(I=o[++E]);const N=Math.abs(D-I.left),j=Math.abs(D-I.right),Q=Math.min(N,j);let ne;const ae=b/f*(g+1);if(I.isDash){const de=g-Math.abs(ae);ne=Math.sqrt(Q*Q+de*de)}else ne=g-Math.sqrt(Q*Q+ae*ae);this.image.data[w+D]=Math.max(0,Math.min(255,ne+128))}}}addRegularDash(o,d){for(let I=o.length-1;I>=0;--I){const D=o[I],N=o[I+1];D.zeroLength?o.splice(I,1):N&&N.isDash===D.isDash&&(N.left=D.left,o.splice(I,1))}const f=o[0],g=o[o.length-1];f.isDash===g.isDash&&(f.left=g.left-this.width,g.right=f.right+this.width);const b=this.width*this.nextRow;let w=0,E=o[w];for(let I=0;I<this.width;I++){I/E.right>1&&(E=o[++w]);const D=Math.abs(I-E.left),N=Math.abs(I-E.right),j=Math.min(D,N);this.image.data[b+I]=Math.max(0,Math.min(255,(E.isDash?j:-j)+d+128))}}addDash(o,d){const f=this.getKey(o,d);if(this.positions[f])return this.positions[f];const g=d==="round",b=g?7:0,w=2*b+1;if(this.nextRow+w>this.height)return dt("LineAtlas out of space"),null;o.length===0&&o.push(1);let E=0;for(let N=0;N<o.length;N++)o[N]<0&&(dt("Negative value is found in line dasharray, replacing values with 0"),o[N]=0),E+=o[N];if(E!==0){const N=this.width/E,j=this.getDashRanges(o,this.width,N);g?this.addRoundDash(j,N,b):this.addRegularDash(j,d==="square"?.5*N:0)}const I=this.nextRow+b;this.nextRow+=w;const D={tl:[I,b],br:[E,0]};return this.positions[f]=D,D}}Tn(VL,"LineAtlas");const BL=1*su;class FL{constructor(o){const d={},f=[];for(const E in o){const I=o[E],D=d[E]={};for(const N in I.glyphs){const j=I.glyphs[+N];if(!j||j.bitmap.width===0||j.bitmap.height===0)continue;const Q=j.metrics.localGlyph?BL:1,ne={x:0,y:0,w:j.bitmap.width+2*Q,h:j.bitmap.height+2*Q};f.push(ne),D[N]=ne}}const{w:g,h:b}=XS(f),w=new Hd({width:g||1,height:b||1});for(const E in o){const I=o[E];for(const D in I.glyphs){const N=I.glyphs[+D];if(!N||N.bitmap.width===0||N.bitmap.height===0)continue;const j=d[E][D],Q=N.metrics.localGlyph?BL:1;Hd.copy(N.bitmap,w,{x:0,y:0},{x:j.x+Q,y:j.y+Q},N.bitmap)}}this.image=w,this.positions=d}}Tn(FL,"GlyphAtlas");class hW{constructor(o){this.tileID=new Sa(o.tileID.overscaledZ,o.tileID.wrap,o.tileID.canonical.z,o.tileID.canonical.x,o.tileID.canonical.y),this.tileZoom=o.tileZoom,this.uid=o.uid,this.zoom=o.zoom,this.canonical=o.tileID.canonical,this.pixelRatio=o.pixelRatio,this.tileSize=o.tileSize,this.source=o.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=o.showCollisionBoxes,this.collectResourceTiming=!!o.collectResourceTiming,this.returnDependencies=!!o.returnDependencies,this.promoteId=o.promoteId,this.enableTerrain=!!o.enableTerrain,this.isSymbolTile=o.isSymbolTile,this.tileTransform=Jm(o.tileID.canonical,o.projection),this.projection=o.projection}parse(o,d,f,g,b){this.status="parsing",this.data=o,this.collisionBoxArray=new Wi;const w=new yL(Object.keys(o.layers).sort()),E=new RL(this.tileID,this.promoteId);E.bucketLayerIDs=[];const I={},D=new VL(256,256),N={featureIndex:E,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:D,availableImages:f},j=d.familiesBySource[this.source];for(const Xe in j){const qe=o.layers[Xe];if(!qe)continue;let wt=!1,yt=!1;for(const kt of j[Xe])kt[0].type==="symbol"?wt=!0:yt=!0;if(this.isSymbolTile===!0&&!wt||this.isSymbolTile===!1&&!yt)continue;qe.version===1&&dt(`Vector tile source "${this.source}" layer "${Xe}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Ot=w.encode(Xe),tn=[];for(let kt=0;kt<qe.length;kt++){const zt=qe.feature(kt),Nt=E.getId(zt,Xe);tn.push({feature:zt,id:Nt,index:kt,sourceLayerIndex:Ot})}for(const kt of j[Xe]){const zt=kt[0];this.isSymbolTile!==void 0&&zt.type==="symbol"!==this.isSymbolTile||zt.minzoom&&this.zoom<Math.floor(zt.minzoom)||zt.maxzoom&&this.zoom>=zt.maxzoom||zt.visibility!=="none"&&(hE(kt,this.zoom,f),(I[zt.id]=zt.createBucket({index:E.bucketLayerIDs.length,layers:kt,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Ot,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:f})).populate(tn,N,this.tileID.canonical,this.tileTransform),E.bucketLayerIDs.push(kt.map((Nt=>Nt.id))))}}let Q,ne,ae,de;D.trim();const Te={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},Re=()=>{if(Q)return b(Q);if(ne&&ae&&de){const Xe=new FL(ne),qe=new HD(ae,de);for(const wt in I){const yt=I[wt];yt instanceof cf?(hE(yt.layers,this.zoom,f),F8(yt,ne,Xe.positions,ae,qe.iconPositions,this.showCollisionBoxes,f,this.tileID.canonical,this.tileZoom,this.projection)):yt.hasPattern&&(yt instanceof hx||yt instanceof ax||yt instanceof ay)&&(hE(yt.layers,this.zoom,f),yt.addFeatures(N,this.tileID.canonical,qe.patternPositions,f,this.tileTransform))}this.status="done",b(null,{buckets:it(I).filter((wt=>!wt.isEmpty())),featureIndex:E,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Xe.image,lineAtlas:D,imageAtlas:qe,glyphMap:this.returnDependencies?ne:null,iconMap:this.returnDependencies?ae:null,glyphPositions:this.returnDependencies?Xe.positions:null})}},$e=ke(N.glyphDependencies,(Xe=>Object.keys(Xe).map(Number)));Object.keys($e).length?g.send("getGlyphs",{uid:this.uid,stacks:$e},((Xe,qe)=>{Q||(Q=Xe,ne=qe,Re())}),void 0,!1,Te):ne={};const Oe=Object.keys(N.iconDependencies);Oe.length?g.send("getImages",{icons:Oe,source:this.source,tileID:this.tileID,type:"icons"},((Xe,qe)=>{Q||(Q=Xe,ae=qe,Re())}),void 0,!1,Te):ae={};const ze=Object.keys(N.patternDependencies);ze.length?g.send("getImages",{icons:ze,source:this.source,tileID:this.tileID,type:"patterns"},((Xe,qe)=>{Q||(Q=Xe,de=qe,Re())}),void 0,!1,Te):de={},Re()}}function hE(c,o,d){const f=new U(o);for(const g of c)g.recalculate(f,d)}class zL{constructor(o){this.entries={},this.scheduler=o}request(o,d,f,g){const b=this.entries[o]=this.entries[o]||{callbacks:[]};if(b.result){const[w,E]=b.result;return this.scheduler?this.scheduler.add((()=>{g(w,E)}),d):g(w,E),()=>{}}return b.callbacks.push(g),b.cancel||(b.cancel=f(((w,E)=>{b.result=[w,E];for(const I of b.callbacks)this.scheduler?this.scheduler.add((()=>{I(w,E)}),d):I(w,E);setTimeout((()=>delete this.entries[o]),3e3)}))),()=>{b.result||(b.callbacks=b.callbacks.filter((w=>w!==g)),b.callbacks.length||(b.cancel(),delete this.entries[o]))}}}function NL(c,o,d){const f=JSON.stringify(c.request);return c.data&&(this.deduped.entries[f]={result:[null,c.data]}),this.deduped.request(f,{type:"parseTile",isSymbolTile:c.isSymbolTile,zoom:c.tileZoom},(g=>{const b=To(c.request,((w,E,I,D)=>{w?g(w):E&&g(null,{vectorTile:d?void 0:new HS(new px(E)),rawData:E,cacheControl:I,expires:D})}));return()=>{b.cancel(),g()}}),o)}const UL=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class fE{static from(o){if(!(o instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[d,f]=new Uint8Array(o,0,2);if(d!==219)throw new Error("Data does not appear to be in a KDBush format.");const g=f>>4;if(g!==1)throw new Error(`Got v${g} data when expected v1.`);const b=UL[15&f];if(!b)throw new Error("Unrecognized array type.");const[w]=new Uint16Array(o,2,1),[E]=new Uint32Array(o,4,1);return new fE(E,w,b,o)}constructor(o,d=64,f=Float64Array,g){if(isNaN(o)||o<0)throw new Error(`Unpexpected numItems value: ${o}.`);this.numItems=+o,this.nodeSize=Math.min(Math.max(+d,2),65535),this.ArrayType=f,this.IndexArrayType=o<65536?Uint16Array:Uint32Array;const b=UL.indexOf(this.ArrayType),w=2*o*this.ArrayType.BYTES_PER_ELEMENT,E=o*this.IndexArrayType.BYTES_PER_ELEMENT,I=(8-E%8)%8;if(b<0)throw new Error(`Unexpected typed array class: ${f}.`);g&&g instanceof ArrayBuffer?(this.data=g,this.ids=new this.IndexArrayType(this.data,8,o),this.coords=new this.ArrayType(this.data,8+E+I,2*o),this._pos=2*o,this._finished=!0):(this.data=new ArrayBuffer(8+w+E+I),this.ids=new this.IndexArrayType(this.data,8,o),this.coords=new this.ArrayType(this.data,8+E+I,2*o),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+b]),new Uint16Array(this.data,2,1)[0]=d,new Uint32Array(this.data,4,1)[0]=o)}add(o,d){const f=this._pos>>1;return this.ids[f]=f,this.coords[this._pos++]=o,this.coords[this._pos++]=d,f}finish(){const o=this._pos>>1;if(o!==this.numItems)throw new Error(`Added ${o} items when expected ${this.numItems}.`);return mE(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(o,d,f,g){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:b,coords:w,nodeSize:E}=this,I=[0,b.length-1,0],D=[];for(;I.length;){const N=I.pop()||0,j=I.pop()||0,Q=I.pop()||0;if(j-Q<=E){for(let Te=Q;Te<=j;Te++){const Re=w[2*Te],$e=w[2*Te+1];Re>=o&&Re<=f&&$e>=d&&$e<=g&&D.push(b[Te])}continue}const ne=Q+j>>1,ae=w[2*ne],de=w[2*ne+1];ae>=o&&ae<=f&&de>=d&&de<=g&&D.push(b[ne]),(N===0?o<=ae:d<=de)&&(I.push(Q),I.push(ne-1),I.push(1-N)),(N===0?f>=ae:g>=de)&&(I.push(ne+1),I.push(j),I.push(1-N))}return D}within(o,d,f){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:g,coords:b,nodeSize:w}=this,E=[0,g.length-1,0],I=[],D=f*f;for(;E.length;){const N=E.pop()||0,j=E.pop()||0,Q=E.pop()||0;if(j-Q<=w){for(let Te=Q;Te<=j;Te++)jL(b[2*Te],b[2*Te+1],o,d)<=D&&I.push(g[Te]);continue}const ne=Q+j>>1,ae=b[2*ne],de=b[2*ne+1];jL(ae,de,o,d)<=D&&I.push(g[ne]),(N===0?o-f<=ae:d-f<=de)&&(E.push(Q),E.push(ne-1),E.push(1-N)),(N===0?o+f>=ae:d+f>=de)&&(E.push(ne+1),E.push(j),E.push(1-N))}return I}}function mE(c,o,d,f,g,b){if(g-f<=d)return;const w=f+g>>1;$L(c,o,w,f,g,b),mE(c,o,d,f,w-1,1-b),mE(c,o,d,w+1,g,1-b)}function $L(c,o,d,f,g,b){for(;g>f;){if(g-f>600){const D=g-f+1,N=d-f+1,j=Math.log(D),Q=.5*Math.exp(2*j/3),ne=.5*Math.sqrt(j*Q*(D-Q)/D)*(N-D/2<0?-1:1);$L(c,o,d,Math.max(f,Math.floor(d-N*Q/D+ne)),Math.min(g,Math.floor(d+(D-N)*Q/D+ne)),b)}const w=o[2*d+b];let E=f,I=g;for(by(c,o,f,d),o[2*g+b]>w&&by(c,o,f,g);E<I;){for(by(c,o,E,I),E++,I--;o[2*E+b]<w;)E++;for(;o[2*I+b]>w;)I--}o[2*f+b]===w?by(c,o,f,I):(I++,by(c,o,I,g)),I<=d&&(f=I+1),d<=I&&(g=I-1)}}function by(c,o,d,f){pE(c,d,f),pE(o,2*d,2*f),pE(o,2*d+1,2*f+1)}function pE(c,o,d){const f=c[o];c[o]=c[d],c[d]=f}function jL(c,o,d,f){const g=c-d,b=o-f;return g*g+b*b}s.ARRAY_TYPE=wl,s.AUTH_ERR_MSG=He,s.Aabb=Ta,s.Actor=class{constructor(c,o,d){this.target=c,this.parent=o,this.mapId=d,this.callbacks={},this.cancelCallbacks={},jt(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=Pt()?c:p,this.scheduler=new sW}send(c,o,d,f,g=!1,b){const w=Math.round(1e18*Math.random()).toString(36).substring(0,10);d&&(d.metadata=b,this.callbacks[w]=d);const E=En(this.globalScope)?void 0:[];return this.target.postMessage({id:w,type:c,hasCallback:!!d,targetMapId:f,mustQueue:g,sourceMapId:this.mapId,data:Pu(o,E)},E),{cancel:()=>{d&&delete this.callbacks[w],this.target.postMessage({id:w,type:"<cancel>",targetMapId:f,sourceMapId:this.mapId})}}}receive(c){const o=c.data,d=o.id;if(d&&(!o.targetMapId||this.mapId===o.targetMapId))if(o.type==="<cancel>"){const f=this.cancelCallbacks[d];delete this.cancelCallbacks[d],f&&f.cancel()}else if(o.mustQueue||Pt()){const f=this.callbacks[d];this.cancelCallbacks[d]=this.scheduler.add((()=>this.processTask(d,o)),f&&f.metadata||{type:"message"})}else this.processTask(d,o)}processTask(c,o){if(o.type==="<response>"){const d=this.callbacks[c];delete this.callbacks[c],d&&(o.error?d(Zc(o.error)):d(null,Zc(o.data)))}else{const d=En(this.globalScope)?void 0:[],f=o.hasCallback?(b,w)=>{delete this.cancelCallbacks[c],this.target.postMessage({id:c,type:"<response>",sourceMapId:this.mapId,error:b?Pu(b):null,data:Pu(w,d)},d)}:b=>{},g=Zc(o.data);if(this.parent[o.type])this.parent[o.type](o.sourceMapId,g,f);else if(this.parent.getWorkerSource){const b=o.type.split(".");this.parent.getWorkerSource(o.sourceMapId,b[0],g.source)[b[1]](g,f)}else f(new Error(`Could not find function ${o.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},s.CanonicalTileID=dx,s.Color=Ui,s.ColorMode=Fu,s.CullFaceMode=ou,s.DEMData=Ix,s.DataConstantProperty=ce,s.DedupedRequest=zL,s.DepthMode=tv,s.EXTENT=zn,s.Elevation=class{isDataAvailableAtPoint(c){const o=this._source();if(this.isUsingMockSource()||!o||c.y<0||c.y>1)return!1;const d=o.getSource().maxzoom,f=1<<d,g=Math.floor(c.x),b=Math.floor((c.x-g)*f),w=Math.floor(c.y*f),E=this.findDEMTileFor(new Sa(d,g,d,b,w));return!(!E||!E.dem)}getAtPointOrZero(c,o=0){return this.getAtPoint(c,o)||0}getAtPoint(c,o,d=!0){if(this.isUsingMockSource())return null;o==null&&(o=null);const f=this._source();if(!f||c.y<0||c.y>1)return o;const g=f.getSource().maxzoom,b=1<<g,w=Math.floor(c.x),E=c.x-w,I=new Sa(g,w,g,Math.floor(E*b),Math.floor(c.y*b)),D=this.findDEMTileFor(I);if(!D||!D.dem)return o;const N=D.dem,j=1<<D.tileID.canonical.z,Q=(E*j-D.tileID.canonical.x)*N.dim,ne=(c.y*j-D.tileID.canonical.y)*N.dim,ae=Math.floor(Q),de=Math.floor(ne);return(d?this.exaggeration():1)*Qn(Qn(N.get(ae,de),N.get(ae,de+1),ne-de),Qn(N.get(ae+1,de),N.get(ae+1,de+1),ne-de),Q-ae)}getAtTileOffset(c,o,d){const f=1<<c.canonical.z;return this.getAtPointOrZero(new Ug(c.wrap+(c.canonical.x+o/zn)/f,(c.canonical.y+d/zn)/f))}getAtTileOffsetFunc(c,o,d,f){return g=>{const b=this.getAtTileOffset(c,g.x,g.y),w=f.upVector(c.canonical,g.x,g.y);return ql(w,w,b*f.upVectorScale(c.canonical,o,d).metersToTile),w}}getForTilePoints(c,o,d,f){if(this.isUsingMockSource())return!1;const g=Ax.create(this,c,f);return!!g&&(o.forEach((b=>{b[2]=this.exaggeration()*g.getElevationAt(b[0],b[1],d)})),!0)}getMinMaxForTile(c){if(this.isUsingMockSource())return null;const o=this.findDEMTileFor(c);if(!o||!o.dem)return null;const d=o.dem.tree,f=o.tileID,g=1<<c.canonical.z-f.canonical.z;let b=c.canonical.x/g-f.canonical.x,w=c.canonical.y/g-f.canonical.y,E=0;for(let I=0;I<c.canonical.z-f.canonical.z&&!d.leaves[E];I++){b*=2,w*=2;const D=2*Math.floor(w)+Math.floor(b);E=d.childOffsets[E]+D,b%=1,w%=1}return{min:this.exaggeration()*d.minimums[E],max:this.exaggeration()*d.maximums[E]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(c,o,d){throw new Error("Pure virtual method called.")}pointCoordinate(c){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(c){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},s.ErrorEvent=Co,s.EvaluationParameters=U,s.Event=Ho,s.Evented=Fl,s.FillExtrusionBucket=ay,s.Frustum=wS,s.FrustumCorners=xS,s.GLOBE_RADIUS=Du,s.GLOBE_SCALE_MATCH_LATITUDE=45,s.GLOBE_ZOOM_THRESHOLD_MAX=$M,s.GLOBE_ZOOM_THRESHOLD_MIN=TS,s.GlobeSharedBuffers=class{constructor(c){this._createGrid(c),this._createPoles(c)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const c of this._poleSegments)c.destroy();for(const c of this._gridSegments)c.withSkirts.destroy(),c.withoutSkirts.destroy();if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();for(const c of this._wireframeSegments)c.destroy()}}_fillGridMeshWithLods(c,o){const d=new Wt,f=new In,g=[],b=c+1+2,w=o[0]+1,E=o[0]+1+(1+o.length),I=(D,N,j)=>{let Q=D===b-1?D-2:D===0?D:D-1;return Q+=j?24575:0,[Q,N]};for(let D=0;D<b;++D)d.emplaceBack(...I(D,0,!0));for(let D=0;D<w;++D)for(let N=0;N<b;++N)d.emplaceBack(...I(N,D,(N===0||N===b-1)&&!0));for(let D=0;D<o.length;++D){const N=o[D];for(let j=0;j<b;++j)d.emplaceBack(...I(j,N,!0))}for(let D=0;D<o.length;++D){const N=f.length,j=o[D]+1+2,Q=new In;for(let de=0;de<j-1;de++){const Te=de===j-2,Re=Te?b*(E-o.length+D-de):b;for(let $e=0;$e<b-1;$e++){const Oe=de*b+$e;de===0||Te||$e===0||$e===b-2?(Q.emplaceBack(Oe+1,Oe,Oe+Re),Q.emplaceBack(Oe+Re,Oe+Re+1,Oe+1)):(f.emplaceBack(Oe+1,Oe,Oe+Re),f.emplaceBack(Oe+Re,Oe+Re+1,Oe+1))}}const ne=ds.simpleSegment(0,N,d.length,f.length-N);for(let de=0;de<Q.uint16.length;de+=3)f.emplaceBack(Q.uint16[de],Q.uint16[de+1],Q.uint16[de+2]);const ae=ds.simpleSegment(0,N,d.length,f.length-N);g.push({withoutSkirts:ne,withSkirts:ae})}return{vertices:d,indices:f,segments:g}}_createGrid(c){const o=this._fillGridMeshWithLods(qm,Z_);this._gridSegments=o.segments,this._gridBuffer=c.createVertexBuffer(o.vertices,Y_.members),this._gridIndexBuffer=c.createIndexBuffer(o.indices,!0)}_createPoles(c){const o=new In;for(let g=0;g<=qm;g++)o.emplaceBack(0,g+1,g+2);this._poleIndexBuffer=c.createIndexBuffer(o,!0);const d=new ji,f=new ji;this._poleSegments=[];for(let g=0,b=0;g<TS;g++){const w=360/(1<<g);d.emplaceBack(0,-Du,0,.5,0),f.emplaceBack(0,-Du,0,.5,1);for(let E=0;E<=qm;E++){const I=E/qm,D=Qn(0,w,I),[N,j,Q]=Fg(s2,o2,D,Du);d.emplaceBack(N,j,Q,I,0),f.emplaceBack(N,j,Q,I,1)}this._poleSegments.push(ds.simpleSegment(b,0,66,64)),b+=66}this._poleNorthVertexBuffer=c.createVertexBuffer(d,NM,!1),this._poleSouthVertexBuffer=c.createVertexBuffer(f,NM,!1)}getGridBuffers(c,o){return[this._gridBuffer,this._gridIndexBuffer,o?this._gridSegments[c].withSkirts:this._gridSegments[c].withoutSkirts]}getPoleBuffers(c){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[c]]}getWirefameBuffers(c,o){if(!this._wireframeSegments){const d=new Is,f=qm,g=f+1+2,b=1;this._wireframeSegments=[];for(let w=0,E=0;w<Z_.length;w++){const I=Z_[w];for(let N=b;N<I+b;N++)for(let j=b;j<f+b;j++){const Q=N*g+j;d.emplaceBack(Q,Q+1),d.emplaceBack(Q,Q+g),d.emplaceBack(Q,Q+g+1)}const D=I*f*3;this._wireframeSegments.push(ds.simpleSegment(0,E,(I+1)*g,D)),E+=D}this._wireframeIndexBuffer=c.createIndexBuffer(d)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[o]]}},s.GlyphManager=Yg,s.ImagePosition=YS,s.KDBush=fE,s.LivePerformanceUtils=Ts,s.LngLat=or,s.LngLatBounds=sf,s.LocalGlyphMode=QS,s.MAX_MERCATOR_LATITUDE=Ro,s.MercatorCoordinate=Ug,s.ONE_EM=uo,s.OverscaledTileID=Sa,s.PerformanceMarkers=jr,s.Point=X,s.Properties=De,s.RGBAImage=Tl,s.Ray=bS,s.RequestManager=class{constructor(c,o,d){this._transformRequestFn=c,this._customAccessToken=o,this._silenceAuthErrors=!!d,this._createSkuToken()}_createSkuToken(){const c=(function(){let o="";for(let d=0;d<10;d++)o+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",H,o].join(""),tokenExpiresAt:Date.now()+432e5}})();this._skuToken=c.token,this._skuTokenExpiresAt=c.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(c,o){return this._transformRequestFn&&this._transformRequestFn(c,o)||{url:c}}normalizeStyleURL(c,o){if(!st(c))return c;const d=cn(c);return d.path=`/styles/v1${d.path}`,this._makeAPIURL(d,this._customAccessToken||o)}normalizeGlyphsURL(c,o){if(!st(c))return c;const d=cn(c);return d.path=`/fonts/v1${d.path}`,this._makeAPIURL(d,this._customAccessToken||o)}normalizeSourceURL(c,o,d,f){if(!st(c))return c;const g=cn(c);return g.path=`/v4/${g.authority}.json`,g.params.push("secure"),d&&g.params.push(`language=${d}`),f&&g.params.push(`worldview=${f}`),this._makeAPIURL(g,this._customAccessToken||o)}normalizeSpriteURL(c,o,d,f){const g=cn(c);return st(c)?(g.path=`/styles/v1${g.path}/sprite${o}${d}`,this._makeAPIURL(g,this._customAccessToken||f)):(g.path+=`${o}${d}`,en(g))}normalizeTileURL(c,o,d){if(this._isSkuTokenExpired()&&this._createSkuToken(),c&&!st(c))return c;const f=cn(c);f.path=f.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${o||d&&f.authority!=="raster"&&d===512?"@2x":""}${k.supported?".webp":"$1"}`),f.authority==="raster"?f.path=`/${T.RASTER_URL_PREFIX}${f.path}`:(f.path=f.path.replace(/^.+\/v4\//,"/"),f.path=`/${T.TILE_URL_VERSION}${f.path}`);const g=this._customAccessToken||(function(b){for(const w of b){const E=w.match(/^access_token=(.*)$/);if(E)return E[1]}return null})(f.params)||T.ACCESS_TOKEN;return T.REQUIRE_ACCESS_TOKEN&&g&&this._skuToken&&f.params.push(`sku=${this._skuToken}`),this._makeAPIURL(f,g)}canonicalizeTileURL(c,o){const d=cn(c);if(!d.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!d.path.match(/\.[\w]+$/))return c;let f="mapbox://";d.path.match(/^\/raster\/v1\//)?f+=`raster/${d.path.replace(`/${T.RASTER_URL_PREFIX}/`,"")}`:f+=`tiles/${d.path.replace(`/${T.TILE_URL_VERSION}/`,"")}`;let g=d.params;return o&&(g=g.filter((b=>!b.match(/^access_token=/)))),g.length&&(f+=`?${g.join("&")}`),f}canonicalizeTileset(c,o){const d=!!o&&st(o),f=[];for(const g of c.tiles||[])_t(g)?f.push(this.canonicalizeTileURL(g,d)):f.push(g);return f}_makeAPIURL(c,o){const d="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",f=cn(T.API_URL);if(c.protocol=f.protocol,c.authority=f.authority,c.protocol==="http"){const g=c.params.indexOf("secure");g>=0&&c.params.splice(g,1)}if(f.path!=="/"&&(c.path=`${f.path}${c.path}`),!T.REQUIRE_ACCESS_TOKEN)return en(c);if(o=o||T.ACCESS_TOKEN,!this._silenceAuthErrors){if(!o)throw new Error(`An API access token is required to use Mapbox GL. ${d}`);if(o[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${d}`)}return c.params=c.params.filter((g=>g.indexOf("access_token")===-1)),c.params.push(`access_token=${o||""}`),en(c)}},s.ResourceType=wo,s.SegmentVector=ds,s.SourceCache=Qm,s.StencilMode=cE,s.StructArrayLayout1ui2=xa,s.StructArrayLayout2f1f2i16=Rn,s.StructArrayLayout2i4=Wt,s.StructArrayLayout2ui4=Is,s.StructArrayLayout3f12=mi,s.StructArrayLayout3ui6=In,s.StructArrayLayout4i8=Lt,s.StructArrayLayout5f20=ji,s.Texture=_y,s.Tile=aE,s.Transitionable=le,s.Uniform1f=K0,s.Uniform1i=class extends Ud{constructor(c){super(c),this.current=0}set(c,o,d){this.fetchUniformLocation(c,o)&&this.current!==d&&(this.current=d,this.gl.uniform1i(this.location,d))}},s.Uniform2f=class extends Ud{constructor(c){super(c),this.current=[0,0]}set(c,o,d){this.fetchUniformLocation(c,o)&&(d[0]===this.current[0]&&d[1]===this.current[1]||(this.current=d,this.gl.uniform2f(this.location,d[0],d[1])))}},s.Uniform3f=class extends Ud{constructor(c){super(c),this.current=[0,0,0]}set(c,o,d){this.fetchUniformLocation(c,o)&&(d[0]===this.current[0]&&d[1]===this.current[1]&&d[2]===this.current[2]||(this.current=d,this.gl.uniform3f(this.location,d[0],d[1],d[2])))}},s.Uniform4f=TM,s.UniformColor=SM,s.UniformMatrix2f=class extends Ud{constructor(c){super(c),this.current=j9}set(c,o,d){if(this.fetchUniformLocation(c,o)){for(let f=0;f<4;f++)if(d[f]!==this.current[f]){this.current=d,this.gl.uniformMatrix2fv(this.location,!1,d);break}}}},s.UniformMatrix3f=class extends Ud{constructor(c){super(c),this.current=$9}set(c,o,d){if(this.fetchUniformLocation(c,o)){for(let f=0;f<9;f++)if(d[f]!==this.current[f]){this.current=d,this.gl.uniformMatrix3fv(this.location,!1,d);break}}}},s.UniformMatrix4f=class extends Ud{constructor(c){super(c),this.current=U9}set(c,o,d){if(this.fetchUniformLocation(c,o)){if(d[12]!==this.current[12]||d[0]!==this.current[0])return this.current=d,void this.gl.uniformMatrix4fv(this.location,!1,d);for(let f=1;f<16;f++)if(d[f]!==this.current[f]){this.current=d,this.gl.uniformMatrix4fv(this.location,!1,d);break}}}},s.UnwrappedTileID=PD,s.ValidationError=gn,s.VectorTileFeature=cx,s.VectorTileWorkerSource=class extends Fl{constructor(c,o,d,f,g){super(),this.actor=c,this.layerIndex=o,this.availableImages=d,this.loadVectorData=g||NL,this.loading={},this.loaded={},this.deduped=new zL(c.scheduler),this.isSpriteLoaded=f,this.scheduler=c.scheduler}loadTile(c,o){const d=c.uid,f=c&&c.request,g=f&&f.collectResourceTiming,b=this.loading[d]=new hW(c);b.abort=this.loadVectorData(c,((w,E)=>{const I=!this.loading[d];if(delete this.loading[d],I||w||!E)return b.status="done",I||(this.loaded[d]=b),o(w);const D=E.rawData,N={};E.expires&&(N.expires=E.expires),E.cacheControl&&(N.cacheControl=E.cacheControl),b.vectorTile=E.vectorTile||new HS(new px(D));const j=()=>{b.parse(b.vectorTile,this.layerIndex,this.availableImages,this.actor,((Q,ne)=>{if(Q||!ne)return o(Q);const ae={};if(g){const de=da(f);de.length>0&&(ae.resourceTiming=JSON.parse(JSON.stringify(de)))}o(null,vt({rawTileData:D.slice(0)},ne,N,ae))}))};this.isSpriteLoaded?j():this.once("isSpriteLoaded",(()=>{this.scheduler?this.scheduler.add(j,{type:"parseTile",isSymbolTile:c.isSymbolTile,zoom:c.tileZoom}):j()})),this.loaded=this.loaded||{},this.loaded[d]=b}))}reloadTile(c,o){const d=this.loaded,f=c.uid,g=this;if(d&&d[f]){const b=d[f];b.showCollisionBoxes=c.showCollisionBoxes,b.enableTerrain=!!c.enableTerrain,b.projection=c.projection,b.tileTransform=Jm(c.tileID.canonical,c.projection);const w=(E,I)=>{const D=b.reloadCallback;D&&(delete b.reloadCallback,b.parse(b.vectorTile,g.layerIndex,this.availableImages,g.actor,D)),o(E,I)};b.status==="parsing"?b.reloadCallback=w:b.status==="done"&&(b.vectorTile?b.parse(b.vectorTile,this.layerIndex,this.availableImages,this.actor,w):w())}}abortTile(c,o){const d=c.uid,f=this.loading[d];f&&(f.abort&&f.abort(),delete this.loading[d]),o()}removeTile(c,o){const d=this.loaded,f=c.uid;d&&d[f]&&delete d[f],o()}},s.WritingMode=Xl,s.ZoomDependentExpression=yc,s.add=jd,s.addDynamicAttributes=Ex,s.adjoint=function(c,o){var d=o[0],f=o[1],g=o[2],b=o[3],w=o[4],E=o[5],I=o[6],D=o[7],N=o[8];return c[0]=w*N-E*D,c[1]=g*D-f*N,c[2]=f*E-g*w,c[3]=E*I-b*N,c[4]=d*N-g*I,c[5]=g*b-d*E,c[6]=b*D-w*I,c[7]=f*I-d*D,c[8]=d*w-f*b,c},s.asyncAll=Je,s.bezier=nt,s.bindAll=jt,s.boundsAttributes=wL,s.bufferConvexPolygon=function(c,o){const d=[];for(let f=0;f<c.length;f++){const g=Ee(f-1,-1,c.length-1),b=Ee(f+1,-1,c.length-1),w=c[f],E=c[b],I=c[g].sub(w).unit(),D=E.sub(w).unit(),N=D.angleWithSep(I.x,I.y),j=I.add(D).unit().mult(-1*o/Math.sin(N/2));d.push(w.add(j))}return d},s.cacheEntryPossiblyAdded=function(c){ns++,ns>rn&&(c.getActor().send("enforceCacheSizeLimit",Ut),ns=0)},s.calculateGlobeLabelMatrix=function(c,o){const{x:d,y:f}=c.point,g=qM(d,f,c.worldSize/c._pixelsPerMercatorPixel,0,0);return Wm(g,g,CS(Lu(o)))},s.calculateGlobeMatrix=function(c){const{x:o,y:d}=c.point,{lng:f,lat:g}=c._center;return qM(o,d,c.worldSize,f,g)},s.calculateGlobeMercatorMatrix=function(c){const o=c.pixelsPerMeter,d=o/iu(1,c.center.lat),f=tu(new Float64Array(16));return W_(f,f,[c.point.x,c.point.y,0]),Hm(f,f,[d,d,o]),Float32Array.from(f)},s.circumferenceAtLatitude=IS,s.clamp=Le,s.clearTileCache=function(c){if(!ki())return;const o=p.caches.delete(Ln);c&&o.catch(c).then((()=>c()))},s.clipLine=rL,s.clone=function(c){var o=new wl(16);return o[0]=c[0],o[1]=c[1],o[2]=c[2],o[3]=c[3],o[4]=c[4],o[5]=c[5],o[6]=c[6],o[7]=c[7],o[8]=c[8],o[9]=c[9],o[10]=c[10],o[11]=c[11],o[12]=c[12],o[13]=c[13],o[14]=c[14],o[15]=c[15],o},s.clone$1=he,s.collisionCircleLayout=u8,s.config=T,s.conjugate=function(c,o){return c[0]=-o[0],c[1]=-o[1],c[2]=-o[2],c[3]=o[3],c},s.create=function(){var c=new wl(16);return wl!=Float32Array&&(c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=0,c[12]=0,c[13]=0,c[14]=0),c[0]=1,c[5]=1,c[10]=1,c[15]=1,c},s.create$1=kM,s.createExpression=Au,s.createLayout=at,s.createStyleLayer=function(c){return c.type==="custom"?new tW(c):new iW[c.type](c)},s.cross=yS,s.degToRad=Z,s.distance=function(c,o){return Math.hypot(o[0]-c[0],o[1]-c[1],o[2]-c[2])},s.div=function(c,o,d){return c[0]=o[0]/d[0],c[1]=o[1]/d[1],c[2]=o[2]/d[2],c},s.dot=Tc,s.earthRadius=ey,s.ease=We,s.easeCubicInOut=Be,s.ecefToLatLng=function([c,o,d]){const f=Math.hypot(c,o,d),g=Math.atan2(c,d),b=.5*Math.PI-Math.acos(-o/f);return new or(ge(g),ge(b))},s.emitValidationErrors=tf,s.endsWith=xn,s.enforceCacheSizeLimit=function(c){qi(),fn&&fn.then((o=>{o.keys().then((d=>{for(let f=0;f<d.length-c;f++)o.delete(d[f])}))}))},s.evaluateSizeForFeature=fx,s.evaluateSizeForZoom=Gg,s.evaluateVariableOffset=cL,s.evented=S,s.exactEquals=function(c,o){return c[0]===o[0]&&c[1]===o[1]&&c[2]===o[2]&&c[3]===o[3]},s.exactEquals$1=function(c,o){return c[0]===o[0]&&c[1]===o[1]&&c[2]===o[2]},s.exported=Eo,s.exported$1=k,s.extend=vt,s.extend$1=ha,s.fillExtrusionHeightLift=kD,s.filterObject=Ae,s.fromMat4=function(c,o){return c[0]=o[0],c[1]=o[1],c[2]=o[2],c[3]=o[4],c[4]=o[5],c[5]=o[6],c[6]=o[8],c[7]=o[9],c[8]=o[10],c},s.fromQuat=function(c,o){var d=o[0],f=o[1],g=o[2],b=o[3],w=d+d,E=f+f,I=g+g,D=d*w,N=f*w,j=f*E,Q=g*w,ne=g*E,ae=g*I,de=b*w,Te=b*E,Re=b*I;return c[0]=1-j-ae,c[1]=N+Re,c[2]=Q-Te,c[3]=0,c[4]=N-Re,c[5]=1-D-ae,c[6]=ne+de,c[7]=0,c[8]=Q+Te,c[9]=ne-de,c[10]=1-D-j,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c},s.fromRotation=function(c,o){var d=Math.sin(o),f=Math.cos(o);return c[0]=f,c[1]=d,c[2]=0,c[3]=-d,c[4]=f,c[5]=0,c[6]=0,c[7]=0,c[8]=1,c},s.fromScaling=AM,s.furthestTileCorner=function(c){const o=Math.round((c+45+360)%360/90)%4;return be[o]},s.getAABBPointSquareDist=function(c,o,d){let f=0;for(let g=0;g<2;++g){const b=d?d[g]:0;c[g]>b&&(f+=(c[g]-b)*(c[g]-b)),o[g]<b&&(f+=(b-o[g])*(b-o[g]))}return f},s.getAnchorAlignment=JS,s.getAnchorJustification=tE,s.getBounds=function(c){let o=1/0,d=1/0,f=-1/0,g=-1/0;for(const b of c)o=Math.min(o,b.x),d=Math.min(d,b.y),f=Math.max(f,b.x),g=Math.max(g,b.y);return{min:new X(o,d),max:new X(f,g)}},s.getColumn=Mn,s.getDefaultExportFromCjs=G,s.getGridMatrix=function(c,o,d,f){const g=o.getNorth(),b=o.getSouth(),w=o.getWest(),E=o.getEast(),I=1<<c.z,D=E-w,N=g-b,j=D/qm,Q=-N/Z_[d],ne=[0,j,0,Q,0,0,g,w,0];if(c.z>0){const ae=180/f;IM(ne,ne,[ae/D+1,0,0,0,ae/N+1,0,-.5*ae/j,.5*ae/Q,1])}return ne[2]=I,ne[5]=c.x,ne[8]=c.y,ne},s.getImage=Ve,s.getJSON=function(c,o){return $o(vt(c,{type:"json"}),o)},s.getLatitudinalLod=function(c){const o=Ro-5;c=Le(c,-o,o)/o*90;const d=Math.pow(Math.abs(Math.sin(Z(c))),3);return Math.round(d*(Z_.length-1))},s.getMapSessionAPI=rs,s.getPerformanceMeasurement=da,s.getProjection=vL,s.getRTLTextPluginStatus=C,s.getReferrer=xr,s.getTilePoint=function(c,{x:o,y:d},f=0){return new X(((o-f)*c.scale-c.x)*zn,(d*c.scale-c.y)*zn)},s.getTileVec3=function(c,o,d=0){return Bg(((o.x-d)*c.scale-c.x)*zn,(o.y*c.scale-c.y)*zn,ZM(o.z,o.y))},s.getVideo=function(c,o){const d=p.document.createElement("video");d.muted=!0,d.onloadstart=function(){o(null,d)};for(let f=0;f<c.length;f++){const g=p.document.createElement("source");Uc(c[f])||(d.crossOrigin="Anonymous"),g.src=c[f],d.appendChild(g)}return{cancel:()=>{}}},s.globeCenterToScreenPoint=function(c){const o=[0,0,0],d=tu(new Float64Array(16));return Wm(d,c.pixelMatrix,c.globeMatrix),as(o,o,d),new X(o[0],o[1])},s.globeDenormalizeECEF=CS,s.globeECEFOrigin=function(c,o){const d=[0,0,0];return as(d,d,Q_(Lu(o.canonical))),as(d,d,c),d},s.globeMetersToEcef=Z0,s.globeNormalizeECEF=Q_,s.globePixelsToTileUnits=function(c,o){return zn/(512*Math.pow(2,c))*Q0(Lu(o))},s.globePoleMatrixForTile=function(c,o,d){const f=tu(new Float64Array(16)),g=(o/(1<<c)-.5)*Math.PI*2;return Y0(f,d.globeMatrix,g),Float32Array.from(f)},s.globeTileBounds=Lu,s.globeTiltAtLngLat=KM,s.globeToMercatorTransition=Ng,s.globeUseCustomAntiAliasing=function(c,o,d){const f=Ng(d.zoom),g=c.style.map._antialias,b=!!o.extStandardDerivatives,w=o.extStandardDerivativesForceOff||c.terrain&&c.terrain.exaggeration()>0;return f===0&&!g&&!w&&b},s.identity=tu,s.identity$1=BM,s.invert=pS,s.isFullscreen=function(){return!!p.document.fullscreenElement||!!p.document.webkitFullscreenElement},s.isLngLatBehindGlobe=kS,s.isMapAuthenticated=function(c){return Lr.has(c)},s.isMapboxURL=st,s.isSafariWithAntialiasingBug=function(c){const o=c.navigator?c.navigator.userAgent:null;return!!En(c)&&o&&(o.match("Version/15.4")||o.match("Version/15.5")||o.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},s.latFromMercatorY=Lo,s.latLngToECEF=zg,s.len=J9,s.length=H_,s.length$1=function(c){return Math.hypot(c[0],c[1],c[2],c[3])},s.lngFromMercatorX=Kl,s.loadVectorTile=NL,s.makeRequest=$o,s.mapValue=function(c,o,d,f,g){return Le((c-o)/(d-o)*(g-f)+f,f,g)},s.mercatorScale=JM,s.mercatorXfromLng=Ru,s.mercatorYfromLat=Ou,s.mercatorZfromAltitude=iu,s.mul=Y9,s.mul$1=Z9,s.multiply=Wm,s.multiply$1=IM,s.multiply$2=DM,s.nextPowerOfTwo=ut,s.normalize=wa,s.normalize$1=Q9,s.normalize$2=OM,s.number=Qn,s.ortho=function(c,o,d,f,g,b,w){var E=1/(o-d),I=1/(f-g),D=1/(b-w);return c[0]=-2*E,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=-2*I,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=2*D,c[11]=0,c[12]=(o+d)*E,c[13]=(g+f)*I,c[14]=(w+b)*D,c[15]=1,c},s.pbf=BD,s.perspective=function(c,o,d,f,g){var b,w=1/Math.tan(o/2);return c[0]=w/d,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=w,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=-1,c[12]=0,c[13]=0,c[15]=0,g!=null&&g!==1/0?(c[10]=(g+f)*(b=1/(f-g)),c[14]=2*g*f*b):(c[10]=-1,c[14]=-2*f),c},s.pick=function(c,o){const d={};for(let f=0;f<o.length;f++){const g=o[f];g in c&&(d[g]=c[g])}return d},s.plugin=O,s.pointGeometry=$,s.polesInViewport=function(c){const o=tu(new Float64Array(16));Wm(o,c.pixelMatrix,c.globeMatrix);const d=[0,Sc,0],f=[0,Ec,0];return as(d,d,o),as(f,f,o),[d[0]>0&&d[0]<=c.width&&d[1]>0&&d[1]<=c.height&&!kS(c,new or(c.center.lat,90)),f[0]>0&&f[0]<=c.width&&f[1]>0&&f[1]<=c.height&&!kS(c,new or(c.center.lat,-90))]},s.polygonContainsPoint=Ym,s.polygonIntersectsBox=sD,s.polygonIntersectsPolygon=tD,s.polygonizeBounds=function(c,o,d=0,f=!0){const g=new X(d,d),b=c.sub(g),w=o.add(g),E=[b,new X(w.x,b.y),w,new X(b.x,w.y)];return f&&E.push(b.clone()),E},s.posAttributes=Y_,s.postMapLoadEvent=mr,s.postPerformanceEvent=wr,s.postTurnstileEvent=Xn,s.potpack=XS,s.prevPowerOfTwo=function(c){return c<=1?1:Math.pow(2,Math.floor(Math.log(c)/Math.LN2))},s.radToDeg=ge,s.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],s.registerForPluginStateChange=function(c){return c({pluginStatus:v,pluginURL:u}),S.on("pluginStateChange",c),c},s.removeAuthState=function(c){Lr.delete(c)},s.renderColorRamp=VS,s.resample=QM,s.rotateX=gS,s.rotateX$1=FM,s.rotateY=Y0,s.rotateY$1=zM,s.rotateZ=function(c,o,d){var f=Math.sin(d),g=Math.cos(d),b=o[0],w=o[1],E=o[2],I=o[3],D=o[4],N=o[5],j=o[6],Q=o[7];return o!==c&&(c[8]=o[8],c[9]=o[9],c[10]=o[10],c[11]=o[11],c[12]=o[12],c[13]=o[13],c[14]=o[14],c[15]=o[15]),c[0]=b*g+D*f,c[1]=w*g+N*f,c[2]=E*g+j*f,c[3]=I*g+Q*f,c[4]=D*g-b*f,c[5]=N*g-w*f,c[6]=j*g-E*f,c[7]=Q*g-I*f,c},s.rotateZ$1=function(c,o,d){d*=.5;var f=o[0],g=o[1],b=o[2],w=o[3],E=Math.sin(d),I=Math.cos(d);return c[0]=f*I+g*E,c[1]=g*I-f*E,c[2]=b*I+w*E,c[3]=w*I-b*E,c},s.scale=Hm,s.scale$1=RM,s.scale$2=ql,s.scaleAndAdd=K_,s.set=function(c,o,d,f){return c[0]=o,c[1]=d,c[2]=f,c},s.setCacheLimits=function(c,o){Ut=c,rn=o},s.setColumn=function(c,o,d){c[4*o+0]=d[0],c[4*o+1]=d[1],c[4*o+2]=d[2],c[4*o+3]=d[3]},s.setRTLTextPlugin=function(c,o,d=!1){if(v===ve||v===V||v===oe)throw new Error("setRTLTextPlugin cannot be called multiple times.");u=Eo.resolveURL(c),v=ve,Ie=o,y(),d||L()},s.smoothstep=Ze,s.spec=Dt,s.squaredLength=function(c){var o=c[0],d=c[1],f=c[2];return o*o+d*d+f*f},s.storeAuthState=function(c,o){o?Lr.add(c):Lr.delete(c)},s.sub=nu,s.subtract=_S,s.symbolSize=d8,s.tileAABB=function(c,o,d,f,g,b,w,E,I){if(I.name==="globe")return r2(c,o,new dx(d,f,g));const D=Jm({z:d,x:f,y:g},I);return new Ta([(b+D.x/D.scale)*o,o*(D.y/D.scale),w],[(b+D.x2/D.scale)*o,o*(D.y2/D.scale),E])},s.tileCornersToBounds=J0,s.tileTransform=Jm,s.transformMat3=function(c,o,d){var f=o[0],g=o[1],b=o[2];return c[0]=f*d[0]+g*d[3]+b*d[6],c[1]=f*d[1]+g*d[4]+b*d[7],c[2]=f*d[2]+g*d[5]+b*d[8],c},s.transformMat4=as,s.transformMat4$1=Gm,s.transformQuat=LM,s.transitionTileAABBinECEF=WM,s.translate=W_,s.transpose=function(c,o){if(c===o){var d=o[1],f=o[2],g=o[5];c[1]=o[3],c[2]=o[6],c[3]=d,c[5]=o[7],c[6]=f,c[7]=g}else c[0]=o[0],c[1]=o[3],c[2]=o[6],c[3]=o[1],c[4]=o[4],c[5]=o[7],c[6]=o[2],c[7]=o[5],c[8]=o[8];return c},s.triggerPluginCompletionEvent=m,s.uniqueId=ot,s.updateGlobeVertexNormal=function(c,o,d,f,g){const b=5*o+2;c.float32[b+0]=d,c.float32[b+1]=f,c.float32[b+2]=g},s.validateCustomStyleLayer=function(c){const o=[],d=c.id;return d===void 0&&o.push({message:`layers.${d}: missing required property "id"`}),c.render===void 0&&o.push({message:`layers.${d}: missing required method "render"`}),c.renderingMode&&c.renderingMode!=="2d"&&c.renderingMode!=="3d"&&o.push({message:`layers.${d}: property "renderingMode" must be either "2d" or "3d"`}),o},s.validateFilter=c=>Qo(Od(c)),s.validateFog=c=>Qo(Pg(c)),s.validateLayer=c=>Qo(Cg(c)),s.validateLight=c=>Qo(Ag(c)),s.validateSource=c=>Qo(Ig(c)),s.validateStyle=wc,s.validateTerrain=c=>Qo(ef(c)),s.values=it,s.vectorTile=lx,s.version=_,s.warnOnce=dt,s.window=p,s.wrap=Ee})),l(["./shared"],(function(s){function p(Fe){if(typeof Fe=="number"||typeof Fe=="boolean"||typeof Fe=="string"||Fe==null)return JSON.stringify(Fe);if(Array.isArray(Fe)){let _e="[";for(const Ve of Fe)_e+=`${p(Ve)},`;return`${_e}]`}let pe="{";for(const _e of Object.keys(Fe).sort())pe+=`${_e}:${p(Fe[_e])},`;return`${pe}}`}function _(Fe){let pe="";for(const _e of s.refProperties)pe+=`/${p(Fe[_e])}`;return pe}class x{constructor(pe){this.keyCache={},pe&&this.replace(pe)}replace(pe){this._layerConfigs={},this._layers={},this.update(pe,[])}update(pe,_e){for(const He of pe)this._layerConfigs[He.id]=He,(this._layers[He.id]=s.createStyleLayer(He)).compileFilter(),this.keyCache[He.id]&&delete this.keyCache[He.id];for(const He of _e)delete this.keyCache[He],delete this._layerConfigs[He],delete this._layers[He];this.familiesBySource={};const Ve=(function(He,st){const _t={};for(let rt=0;rt<He.length;rt++){const Et=st&&st[He[rt].id]||_(He[rt]);st&&(st[He[rt].id]=Et);let Qt=_t[Et];Qt||(Qt=_t[Et]=[]),Qt.push(He[rt])}const pt=[];for(const rt in _t)pt.push(_t[rt]);return pt})(s.values(this._layerConfigs),this.keyCache);for(const He of Ve){const st=He.map((cn=>this._layers[cn.id])),_t=st[0];if(_t.visibility==="none")continue;const pt=_t.source||"";let rt=this.familiesBySource[pt];rt||(rt=this.familiesBySource[pt]={});const Et=_t.sourceLayer||"_geojsonTileLayer";let Qt=rt[Et];Qt||(Qt=rt[Et]=[]),Qt.push(st)}}}class T{loadTile(pe,_e){const{uid:Ve,encoding:He,rawImageData:st,padding:_t,buildQuadTree:pt}=pe,rt=s.window.ImageBitmap&&st instanceof s.window.ImageBitmap?this.getImageData(st,_t):st;_e(null,new s.DEMData(Ve,rt,He,_t<1,pt))}getImageData(pe,_e){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(pe.width,pe.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=pe.width,this.offscreenCanvas.height=pe.height,this.offscreenCanvasContext.drawImage(pe,0,0,pe.width,pe.height);const Ve=this.offscreenCanvasContext.getImageData(-_e,-_e,pe.width+2*_e,pe.height+2*_e);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),Ve}}function k(Fe,pe){if(Fe.length!==0){P(Fe[0],pe);for(var _e=1;_e<Fe.length;_e++)P(Fe[_e],!pe)}}function P(Fe,pe){for(var _e=0,Ve=0,He=0,st=Fe.length,_t=st-1;He<st;_t=He++){var pt=(Fe[He][0]-Fe[_t][0])*(Fe[_t][1]+Fe[He][1]),rt=_e+pt;Ve+=Math.abs(_e)>=Math.abs(pt)?_e-rt+pt:pt-rt+_e,_e=rt}_e+Ve>=0!=!!pe&&Fe.reverse()}var M=s.getDefaultExportFromCjs((function Fe(pe,_e){var Ve,He=pe&&pe.type;if(He==="FeatureCollection")for(Ve=0;Ve<pe.features.length;Ve++)Fe(pe.features[Ve],_e);else if(He==="GeometryCollection")for(Ve=0;Ve<pe.geometries.length;Ve++)Fe(pe.geometries[Ve],_e);else if(He==="Feature")Fe(pe.geometry,_e);else if(He==="Polygon")k(pe.coordinates,_e);else if(He==="MultiPolygon")for(Ve=0;Ve<pe.coordinates.length;Ve++)k(pe.coordinates[Ve],_e);return pe}));const R=s.VectorTileFeature.prototype.toGeoJSON;var F={exports:{}},B=s.pointGeometry,H=s.vectorTile.VectorTileFeature,G=ee;function ee(Fe,pe){this.options=pe||{},this.features=Fe,this.length=Fe.length}function ie(Fe,pe){this.id=typeof Fe.id=="number"?Fe.id:void 0,this.type=Fe.type,this.rawGeometry=Fe.type===1?[Fe.geometry]:Fe.geometry,this.properties=Fe.tags,this.extent=pe||4096}ee.prototype.feature=function(Fe){return new ie(this.features[Fe],this.options.extent)},ie.prototype.loadGeometry=function(){var Fe=this.rawGeometry;this.geometry=[];for(var pe=0;pe<Fe.length;pe++){for(var _e=Fe[pe],Ve=[],He=0;He<_e.length;He++)Ve.push(new B(_e[He][0],_e[He][1]));this.geometry.push(Ve)}return this.geometry},ie.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Fe=this.geometry,pe=1/0,_e=-1/0,Ve=1/0,He=-1/0,st=0;st<Fe.length;st++)for(var _t=Fe[st],pt=0;pt<_t.length;pt++){var rt=_t[pt];pe=Math.min(pe,rt.x),_e=Math.max(_e,rt.x),Ve=Math.min(Ve,rt.y),He=Math.max(He,rt.y)}return[pe,Ve,_e,He]},ie.prototype.toGeoJSON=H.prototype.toGeoJSON;var J=s.pbf,$=G;function W(Fe){var pe=new J;return(function(_e,Ve){for(var He in _e.layers)Ve.writeMessage(3,X,_e.layers[He])})(Fe,pe),pe.finish()}function X(Fe,pe){var _e;pe.writeVarintField(15,Fe.version||1),pe.writeStringField(1,Fe.name||""),pe.writeVarintField(5,Fe.extent||4096);var Ve={keys:[],values:[],keycache:{},valuecache:{}};for(_e=0;_e<Fe.length;_e++)Ve.feature=Fe.feature(_e),pe.writeMessage(2,re,Ve);var He=Ve.keys;for(_e=0;_e<He.length;_e++)pe.writeStringField(3,He[_e]);var st=Ve.values;for(_e=0;_e<st.length;_e++)pe.writeMessage(4,Be,st[_e])}function re(Fe,pe){var _e=Fe.feature;_e.id!==void 0&&pe.writeVarintField(1,_e.id),pe.writeMessage(2,Y,Fe),pe.writeVarintField(3,_e.type),pe.writeMessage(4,be,_e)}function Y(Fe,pe){var _e=Fe.feature,Ve=Fe.keys,He=Fe.values,st=Fe.keycache,_t=Fe.valuecache;for(var pt in _e.properties){var rt=_e.properties[pt],Et=st[pt];if(rt!==null){Et===void 0&&(Ve.push(pt),st[pt]=Et=Ve.length-1),pe.writeVarint(Et);var Qt=typeof rt;Qt!=="string"&&Qt!=="boolean"&&Qt!=="number"&&(rt=JSON.stringify(rt));var cn=Qt+":"+rt,en=_t[cn];en===void 0&&(He.push(rt),_t[cn]=en=He.length-1),pe.writeVarint(en)}}}function Z(Fe,pe){return(pe<<3)+(7&Fe)}function ge(Fe){return Fe<<1^Fe>>31}function be(Fe,pe){for(var _e=Fe.loadGeometry(),Ve=Fe.type,He=0,st=0,_t=_e.length,pt=0;pt<_t;pt++){var rt=_e[pt],Et=1;Ve===1&&(Et=rt.length),pe.writeVarint(Z(1,Et));for(var Qt=Ve===3?rt.length-1:rt.length,cn=0;cn<Qt;cn++){cn===1&&Ve!==1&&pe.writeVarint(Z(2,Qt-1));var en=rt[cn].x-He,Kn=rt[cn].y-st;pe.writeVarint(ge(en)),pe.writeVarint(ge(Kn)),He+=en,st+=Kn}Ve===3&&pe.writeVarint(Z(7,1))}}function Be(Fe,pe){var _e=typeof Fe;_e==="string"?pe.writeStringField(1,Fe):_e==="boolean"?pe.writeBooleanField(7,Fe):_e==="number"&&(Fe%1!=0?pe.writeDoubleField(3,Fe):Fe<0?pe.writeSVarintField(6,Fe):pe.writeVarintField(5,Fe))}F.exports=W,F.exports.fromVectorTileJs=W,F.exports.fromGeojsonVt=function(Fe,pe){pe=pe||{};var _e={};for(var Ve in Fe)_e[Ve]=new $(Fe[Ve].features,pe),_e[Ve].name=Ve,_e[Ve].version=pe.version,_e[Ve].extent=pe.extent;return W({layers:_e})},F.exports.GeoJSONWrapper=$;var nt=s.getDefaultExportFromCjs(F.exports);const We={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Fe=>Fe},Le=Math.fround||(Ze=new Float32Array(1),Fe=>(Ze[0]=+Fe,Ze[0]));var Ze;const Ee=3,Je=5,it=6;class vt{constructor(pe){this.options=Object.assign(Object.create(We),pe),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(pe){const{log:_e,minZoom:Ve,maxZoom:He}=this.options;_e&&console.time("total time");const st=`prepare ${pe.length} points`;_e&&console.time(st),this.points=pe;const _t=[];for(let rt=0;rt<pe.length;rt++){const Et=pe[rt];if(!Et.geometry)continue;const[Qt,cn]=Et.geometry.coordinates,en=Le(Ye(Qt)),Kn=Le(ut(cn));_t.push(en,Kn,1/0,rt,-1,1),this.options.reduce&&_t.push(0)}let pt=this.trees[He+1]=this._createTree(_t);_e&&console.timeEnd(st);for(let rt=He;rt>=Ve;rt--){const Et=+Date.now();pt=this.trees[rt]=this._createTree(this._cluster(pt,rt)),_e&&console.log("z%d: %d clusters in %dms",rt,pt.numItems,+Date.now()-Et)}return _e&&console.timeEnd("total time"),this}getClusters(pe,_e){let Ve=((pe[0]+180)%360+360)%360-180;const He=Math.max(-90,Math.min(90,pe[1]));let st=pe[2]===180?180:((pe[2]+180)%360+360)%360-180;const _t=Math.max(-90,Math.min(90,pe[3]));if(pe[2]-pe[0]>=360)Ve=-180,st=180;else if(Ve>st){const cn=this.getClusters([Ve,He,180,_t],_e),en=this.getClusters([-180,He,st,_t],_e);return cn.concat(en)}const pt=this.trees[this._limitZoom(_e)],rt=pt.range(Ye(Ve),ut(_t),Ye(st),ut(He)),Et=pt.data,Qt=[];for(const cn of rt){const en=this.stride*cn;Qt.push(Et[en+Je]>1?mt(Et,en,this.clusterProps):this.points[Et[en+Ee]])}return Qt}getChildren(pe){const _e=this._getOriginId(pe),Ve=this._getOriginZoom(pe),He="No cluster with the specified id.",st=this.trees[Ve];if(!st)throw new Error(He);const _t=st.data;if(_e*this.stride>=_t.length)throw new Error(He);const pt=this.options.radius/(this.options.extent*Math.pow(2,Ve-1)),rt=st.within(_t[_e*this.stride],_t[_e*this.stride+1],pt),Et=[];for(const Qt of rt){const cn=Qt*this.stride;_t[cn+4]===pe&&Et.push(_t[cn+Je]>1?mt(_t,cn,this.clusterProps):this.points[_t[cn+Ee]])}if(Et.length===0)throw new Error(He);return Et}getLeaves(pe,_e,Ve){const He=[];return this._appendLeaves(He,pe,_e=_e||10,Ve=Ve||0,0),He}getTile(pe,_e,Ve){const He=this.trees[this._limitZoom(pe)],st=Math.pow(2,pe),{extent:_t,radius:pt}=this.options,rt=pt/_t,Et=(Ve-rt)/st,Qt=(Ve+1+rt)/st,cn={features:[]};return this._addTileFeatures(He.range((_e-rt)/st,Et,(_e+1+rt)/st,Qt),He.data,_e,Ve,st,cn),_e===0&&this._addTileFeatures(He.range(1-rt/st,Et,1,Qt),He.data,st,Ve,st,cn),_e===st-1&&this._addTileFeatures(He.range(0,Et,rt/st,Qt),He.data,-1,Ve,st,cn),cn.features.length?cn:null}getClusterExpansionZoom(pe){let _e=this._getOriginZoom(pe)-1;for(;_e<=this.options.maxZoom;){const Ve=this.getChildren(pe);if(_e++,Ve.length!==1)break;pe=Ve[0].properties.cluster_id}return _e}_appendLeaves(pe,_e,Ve,He,st){const _t=this.getChildren(_e);for(const pt of _t){const rt=pt.properties;if(rt&&rt.cluster?st+rt.point_count<=He?st+=rt.point_count:st=this._appendLeaves(pe,rt.cluster_id,Ve,He,st):st<He?st++:pe.push(pt),pe.length===Ve)break}return st}_createTree(pe){const _e=new s.KDBush(pe.length/this.stride|0,this.options.nodeSize,Float32Array);for(let Ve=0;Ve<pe.length;Ve+=this.stride)_e.add(pe[Ve],pe[Ve+1]);return _e.finish(),_e.data=pe,_e}_addTileFeatures(pe,_e,Ve,He,st,_t){for(const pt of pe){const rt=pt*this.stride,Et=_e[rt+Je]>1;let Qt,cn,en;if(Et)Qt=ot(_e,rt,this.clusterProps),cn=_e[rt],en=_e[rt+1];else{const jn=this.points[_e[rt+Ee]];Qt=jn.properties;const[oi,Xn]=jn.geometry.coordinates;cn=Ye(oi),en=ut(Xn)}const Kn={type:1,geometry:[[Math.round(this.options.extent*(cn*st-Ve)),Math.round(this.options.extent*(en*st-He))]],tags:Qt};let Jn;Jn=Et||this.options.generateId?_e[rt+Ee]:this.points[_e[rt+Ee]].id,Jn!==void 0&&(Kn.id=Jn),_t.features.push(Kn)}}_limitZoom(pe){return Math.max(this.options.minZoom,Math.min(Math.floor(+pe),this.options.maxZoom+1))}_cluster(pe,_e){const{radius:Ve,extent:He,reduce:st,minPoints:_t}=this.options,pt=Ve/(He*Math.pow(2,_e)),rt=pe.data,Et=[],Qt=this.stride;for(let cn=0;cn<rt.length;cn+=Qt){if(rt[cn+2]<=_e)continue;rt[cn+2]=_e;const en=rt[cn],Kn=rt[cn+1],Jn=pe.within(rt[cn],rt[cn+1],pt),jn=rt[cn+Je];let oi=jn;for(const Xn of Jn){const Mi=Xn*Qt;rt[Mi+2]>_e&&(oi+=rt[Mi+Je])}if(oi>jn&&oi>=_t){let Xn,Mi=en*jn,mr=Kn*jn,is=-1;const wr=((cn/Qt|0)<<5)+(_e+1)+this.points.length;for(const jo of Jn){const rs=jo*Qt;if(rt[rs+2]<=_e)continue;rt[rs+2]=_e;const Lr=rt[rs+Je];Mi+=rt[rs]*Lr,mr+=rt[rs+1]*Lr,rt[rs+4]=wr,st&&(Xn||(Xn=this._map(rt,cn,!0),is=this.clusterProps.length,this.clusterProps.push(Xn)),st(Xn,this._map(rt,rs)))}rt[cn+4]=wr,Et.push(Mi/oi,mr/oi,1/0,wr,-1,oi),st&&Et.push(is)}else{for(let Xn=0;Xn<Qt;Xn++)Et.push(rt[cn+Xn]);if(oi>1)for(const Xn of Jn){const Mi=Xn*Qt;if(!(rt[Mi+2]<=_e)){rt[Mi+2]=_e;for(let mr=0;mr<Qt;mr++)Et.push(rt[Mi+mr])}}}}return Et}_getOriginId(pe){return pe-this.points.length>>5}_getOriginZoom(pe){return(pe-this.points.length)%32}_map(pe,_e,Ve){if(pe[_e+Je]>1){const _t=this.clusterProps[pe[_e+it]];return Ve?Object.assign({},_t):_t}const He=this.points[pe[_e+Ee]].properties,st=this.options.map(He);return Ve&&st===He?Object.assign({},st):st}}function mt(Fe,pe,_e){return{type:"Feature",id:Fe[pe+Ee],properties:ot(Fe,pe,_e),geometry:{type:"Point",coordinates:[(Ve=Fe[pe],360*(Ve-.5)),Ke(Fe[pe+1])]}};var Ve}function ot(Fe,pe,_e){const Ve=Fe[pe+Je],He=Ve>=1e4?`${Math.round(Ve/1e3)}k`:Ve>=1e3?Math.round(Ve/100)/10+"k":Ve,st=Fe[pe+it],_t=st===-1?{}:Object.assign({},_e[st]);return Object.assign(_t,{cluster:!0,cluster_id:Fe[pe+Ee],point_count:Ve,point_count_abbreviated:He})}function Ye(Fe){return Fe/360+.5}function ut(Fe){const pe=Math.sin(Fe*Math.PI/180),_e=.5-.25*Math.log((1+pe)/(1-pe))/Math.PI;return _e<0?0:_e>1?1:_e}function Ke(Fe){const pe=(180-360*Fe)*Math.PI/180;return 360*Math.atan(Math.exp(pe))/Math.PI-90}function jt(Fe,pe,_e,Ve){for(var He,st=Ve,_t=_e-pe>>1,pt=_e-pe,rt=Fe[pe],Et=Fe[pe+1],Qt=Fe[_e],cn=Fe[_e+1],en=pe+3;en<_e;en+=3){var Kn=xn(Fe[en],Fe[en+1],rt,Et,Qt,cn);if(Kn>st)He=en,st=Kn;else if(Kn===st){var Jn=Math.abs(en-_t);Jn<pt&&(He=en,pt=Jn)}}st>Ve&&(He-pe>3&&jt(Fe,pe,He,Ve),Fe[He+2]=st,_e-He>3&&jt(Fe,He,_e,Ve))}function xn(Fe,pe,_e,Ve,He,st){var _t=He-_e,pt=st-Ve;if(_t!==0||pt!==0){var rt=((Fe-_e)*_t+(pe-Ve)*pt)/(_t*_t+pt*pt);rt>1?(_e=He,Ve=st):rt>0&&(_e+=_t*rt,Ve+=pt*rt)}return(_t=Fe-_e)*_t+(pt=pe-Ve)*pt}function ke(Fe,pe,_e,Ve){var He={id:Fe===void 0?null:Fe,type:pe,geometry:_e,tags:Ve,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return(function(st){var _t=st.geometry,pt=st.type;if(pt==="Point"||pt==="MultiPoint"||pt==="LineString")Ae(st,_t);else if(pt==="Polygon"||pt==="MultiLineString")for(var rt=0;rt<_t.length;rt++)Ae(st,_t[rt]);else if(pt==="MultiPolygon")for(rt=0;rt<_t.length;rt++)for(var Et=0;Et<_t[rt].length;Et++)Ae(st,_t[rt][Et])})(He),He}function Ae(Fe,pe){for(var _e=0;_e<pe.length;_e+=3)Fe.minX=Math.min(Fe.minX,pe[_e]),Fe.minY=Math.min(Fe.minY,pe[_e+1]),Fe.maxX=Math.max(Fe.maxX,pe[_e]),Fe.maxY=Math.max(Fe.maxY,pe[_e+1])}function he(Fe,pe,_e,Ve){if(pe.geometry){var He=pe.geometry.coordinates,st=pe.geometry.type,_t=Math.pow(_e.tolerance/((1<<_e.maxZoom)*_e.extent),2),pt=[],rt=pe.id;if(_e.promoteId?rt=pe.properties[_e.promoteId]:_e.generateId&&(rt=Ve||0),st==="Point")et(He,pt);else if(st==="MultiPoint")for(var Et=0;Et<He.length;Et++)et(He[Et],pt);else if(st==="LineString")dt(He,pt,_t,!1);else if(st==="MultiLineString"){if(_e.lineMetrics){for(Et=0;Et<He.length;Et++)dt(He[Et],pt=[],_t,!1),Fe.push(ke(rt,"LineString",pt,pe.properties));return}Qe(He,pt,_t,!1)}else if(st==="Polygon")Qe(He,pt,_t,!0);else{if(st!=="MultiPolygon"){if(st==="GeometryCollection"){for(Et=0;Et<pe.geometry.geometries.length;Et++)he(Fe,{id:rt,geometry:pe.geometry.geometries[Et],properties:pe.properties},_e,Ve);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Et=0;Et<He.length;Et++){var Qt=[];Qe(He[Et],Qt,_t,!0),pt.push(Qt)}}Fe.push(ke(rt,st,pt,pe.properties))}}function et(Fe,pe){pe.push(Ct(Fe[0])),pe.push(Pt(Fe[1])),pe.push(0)}function dt(Fe,pe,_e,Ve){for(var He,st,_t=0,pt=0;pt<Fe.length;pt++){var rt=Ct(Fe[pt][0]),Et=Pt(Fe[pt][1]);pe.push(rt),pe.push(Et),pe.push(0),pt>0&&(_t+=Ve?(He*Et-rt*st)/2:Math.sqrt(Math.pow(rt-He,2)+Math.pow(Et-st,2))),He=rt,st=Et}var Qt=pe.length-3;pe[2]=1,jt(pe,0,Qt,_e),pe[Qt+2]=1,pe.size=Math.abs(_t),pe.start=0,pe.end=pe.size}function Qe(Fe,pe,_e,Ve){for(var He=0;He<Fe.length;He++){var st=[];dt(Fe[He],st,_e,Ve),pe.push(st)}}function Ct(Fe){return Fe/360+.5}function Pt(Fe){var pe=Math.sin(Fe*Math.PI/180),_e=.5-.25*Math.log((1+pe)/(1-pe))/Math.PI;return _e<0?0:_e>1?1:_e}function Bt(Fe,pe,_e,Ve,He,st,_t,pt){if(Ve/=pe,st>=(_e/=pe)&&_t<Ve)return Fe;if(_t<_e||st>=Ve)return null;for(var rt=[],Et=0;Et<Fe.length;Et++){var Qt=Fe[Et],cn=Qt.geometry,en=Qt.type,Kn=He===0?Qt.minX:Qt.minY,Jn=He===0?Qt.maxX:Qt.maxY;if(Kn>=_e&&Jn<Ve)rt.push(Qt);else if(!(Jn<_e||Kn>=Ve)){var jn=[];if(en==="Point"||en==="MultiPoint")Ht(cn,jn,_e,Ve,He);else if(en==="LineString")En(cn,jn,_e,Ve,He,!1,pt.lineMetrics);else if(en==="MultiLineString")Mn(cn,jn,_e,Ve,He,!1);else if(en==="Polygon")Mn(cn,jn,_e,Ve,He,!0);else if(en==="MultiPolygon")for(var oi=0;oi<cn.length;oi++){var Xn=[];Mn(cn[oi],Xn,_e,Ve,He,!0),Xn.length&&jn.push(Xn)}if(jn.length){if(pt.lineMetrics&&en==="LineString"){for(oi=0;oi<jn.length;oi++)rt.push(ke(Qt.id,en,jn[oi],Qt.tags));continue}en!=="LineString"&&en!=="MultiLineString"||(jn.length===1?(en="LineString",jn=jn[0]):en="MultiLineString"),en!=="Point"&&en!=="MultiPoint"||(en=jn.length===3?"Point":"MultiPoint"),rt.push(ke(Qt.id,en,jn,Qt.tags))}}}return rt.length?rt:null}function Ht(Fe,pe,_e,Ve,He){for(var st=0;st<Fe.length;st+=3){var _t=Fe[st+He];_t>=_e&&_t<=Ve&&(pe.push(Fe[st]),pe.push(Fe[st+1]),pe.push(Fe[st+2]))}}function En(Fe,pe,_e,Ve,He,st,_t){for(var pt,rt,Et=Jt(Fe),Qt=He===0?Ut:rn,cn=Fe.start,en=0;en<Fe.length-3;en+=3){var Kn=Fe[en],Jn=Fe[en+1],jn=Fe[en+2],oi=Fe[en+3],Xn=Fe[en+4],Mi=He===0?Kn:Jn,mr=He===0?oi:Xn,is=!1;_t&&(pt=Math.sqrt(Math.pow(Kn-oi,2)+Math.pow(Jn-Xn,2))),Mi<_e?mr>_e&&(rt=Qt(Et,Kn,Jn,oi,Xn,_e),_t&&(Et.start=cn+pt*rt)):Mi>Ve?mr<Ve&&(rt=Qt(Et,Kn,Jn,oi,Xn,Ve),_t&&(Et.start=cn+pt*rt)):Ln(Et,Kn,Jn,jn),mr<_e&&Mi>=_e&&(rt=Qt(Et,Kn,Jn,oi,Xn,_e),is=!0),mr>Ve&&Mi<=Ve&&(rt=Qt(Et,Kn,Jn,oi,Xn,Ve),is=!0),!st&&is&&(_t&&(Et.end=cn+pt*rt),pe.push(Et),Et=Jt(Fe)),_t&&(cn+=pt)}var wr=Fe.length-3;Kn=Fe[wr],Jn=Fe[wr+1],jn=Fe[wr+2],(Mi=He===0?Kn:Jn)>=_e&&Mi<=Ve&&Ln(Et,Kn,Jn,jn),wr=Et.length-3,st&&wr>=3&&(Et[wr]!==Et[0]||Et[wr+1]!==Et[1])&&Ln(Et,Et[0],Et[1],Et[2]),Et.length&&pe.push(Et)}function Jt(Fe){var pe=[];return pe.size=Fe.size,pe.start=Fe.start,pe.end=Fe.end,pe}function Mn(Fe,pe,_e,Ve,He,st){for(var _t=0;_t<Fe.length;_t++)En(Fe[_t],pe,_e,Ve,He,st,!1)}function Ln(Fe,pe,_e,Ve){Fe.push(pe),Fe.push(_e),Fe.push(Ve)}function Ut(Fe,pe,_e,Ve,He,st){var _t=(st-pe)/(Ve-pe);return Fe.push(st),Fe.push(_e+(He-_e)*_t),Fe.push(1),_t}function rn(Fe,pe,_e,Ve,He,st){var _t=(st-_e)/(He-_e);return Fe.push(pe+(Ve-pe)*_t),Fe.push(st),Fe.push(1),_t}function fn(Fe,pe){for(var _e=[],Ve=0;Ve<Fe.length;Ve++){var He,st=Fe[Ve],_t=st.type;if(_t==="Point"||_t==="MultiPoint"||_t==="LineString")He=Bn(st.geometry,pe);else if(_t==="MultiLineString"||_t==="Polygon"){He=[];for(var pt=0;pt<st.geometry.length;pt++)He.push(Bn(st.geometry[pt],pe))}else if(_t==="MultiPolygon")for(He=[],pt=0;pt<st.geometry.length;pt++){for(var rt=[],Et=0;Et<st.geometry[pt].length;Et++)rt.push(Bn(st.geometry[pt][Et],pe));He.push(rt)}_e.push(ke(st.id,_t,He,st.tags))}return _e}function Bn(Fe,pe){var _e=[];_e.size=Fe.size,Fe.start!==void 0&&(_e.start=Fe.start,_e.end=Fe.end);for(var Ve=0;Ve<Fe.length;Ve+=3)_e.push(Fe[Ve]+pe,Fe[Ve+1],Fe[Ve+2]);return _e}function ki(Fe,pe){if(Fe.transformed)return Fe;var _e,Ve,He,st=1<<Fe.z,_t=Fe.x,pt=Fe.y;for(_e=0;_e<Fe.features.length;_e++){var rt=Fe.features[_e],Et=rt.geometry,Qt=rt.type;if(rt.geometry=[],Qt===1)for(Ve=0;Ve<Et.length;Ve+=2)rt.geometry.push(qi(Et[Ve],Et[Ve+1],pe,st,_t,pt));else for(Ve=0;Ve<Et.length;Ve++){var cn=[];for(He=0;He<Et[Ve].length;He+=2)cn.push(qi(Et[Ve][He],Et[Ve][He+1],pe,st,_t,pt));rt.geometry.push(cn)}}return Fe.transformed=!0,Fe}function qi(Fe,pe,_e,Ve,He,st){return[Math.round(_e*(Fe*Ve-He)),Math.round(_e*(pe*Ve-st))]}function fr(Fe,pe,_e,Ve,He){for(var st=pe===He.maxZoom?0:He.tolerance/((1<<pe)*He.extent),_t={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:_e,y:Ve,z:pe,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},pt=0;pt<Fe.length;pt++){_t.numFeatures++,ns(_t,Fe[pt],st,He);var rt=Fe[pt].minX,Et=Fe[pt].minY,Qt=Fe[pt].maxX,cn=Fe[pt].maxY;rt<_t.minX&&(_t.minX=rt),Et<_t.minY&&(_t.minY=Et),Qt>_t.maxX&&(_t.maxX=Qt),cn>_t.maxY&&(_t.maxY=cn)}return _t}function ns(Fe,pe,_e,Ve){var He=pe.geometry,st=pe.type,_t=[];if(st==="Point"||st==="MultiPoint")for(var pt=0;pt<He.length;pt+=3)_t.push(He[pt]),_t.push(He[pt+1]),Fe.numPoints++,Fe.numSimplified++;else if(st==="LineString")wo(_t,He,Fe,_e,!1,!1);else if(st==="MultiLineString"||st==="Polygon")for(pt=0;pt<He.length;pt++)wo(_t,He[pt],Fe,_e,st==="Polygon",pt===0);else if(st==="MultiPolygon")for(var rt=0;rt<He.length;rt++){var Et=He[rt];for(pt=0;pt<Et.length;pt++)wo(_t,Et[pt],Fe,_e,!0,pt===0)}if(_t.length){var Qt=pe.tags||null;if(st==="LineString"&&Ve.lineMetrics){for(var cn in Qt={},pe.tags)Qt[cn]=pe.tags[cn];Qt.mapbox_clip_start=He.start/He.size,Qt.mapbox_clip_end=He.end/He.size}var en={geometry:_t,type:st==="Polygon"||st==="MultiPolygon"?3:st==="LineString"||st==="MultiLineString"?2:1,tags:Qt};pe.id!==null&&(en.id=pe.id),Fe.features.push(en)}}function wo(Fe,pe,_e,Ve,He,st){var _t=Ve*Ve;if(Ve>0&&pe.size<(He?_t:Ve))_e.numPoints+=pe.length/3;else{for(var pt=[],rt=0;rt<pe.length;rt+=3)(Ve===0||pe[rt+2]>_t)&&(_e.numSimplified++,pt.push(pe[rt]),pt.push(pe[rt+1])),_e.numPoints++;He&&(function(Et,Qt){for(var cn=0,en=0,Kn=Et.length,Jn=Kn-2;en<Kn;Jn=en,en+=2)cn+=(Et[en]-Et[Jn])*(Et[en+1]+Et[Jn+1]);if(cn>0===Qt)for(en=0,Kn=Et.length;en<Kn/2;en+=2){var jn=Et[en],oi=Et[en+1];Et[en]=Et[Kn-2-en],Et[en+1]=Et[Kn-1-en],Et[Kn-2-en]=jn,Et[Kn-1-en]=oi}})(pt,st),Fe.push(pt)}}function ir(Fe,pe){var _e=(pe=this.options=(function(He,st){for(var _t in st)He[_t]=st[_t];return He})(Object.create(this.options),pe)).debug;if(_e&&console.time("preprocess data"),pe.maxZoom<0||pe.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(pe.promoteId&&pe.generateId)throw new Error("promoteId and generateId cannot be used together.");var Ve=(function(He,st){var _t=[];if(He.type==="FeatureCollection")for(var pt=0;pt<He.features.length;pt++)he(_t,He.features[pt],st,pt);else he(_t,He.type==="Feature"?He:{geometry:He},st);return _t})(Fe,pe);this.tiles={},this.tileCoords=[],_e&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",pe.indexMaxZoom,pe.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Ve=(function(He,st){var _t=st.buffer/st.extent,pt=He,rt=Bt(He,1,-1-_t,_t,0,-1,2,st),Et=Bt(He,1,1-_t,2+_t,0,-1,2,st);return(rt||Et)&&(pt=Bt(He,1,-_t,1+_t,0,-1,2,st)||[],rt&&(pt=fn(rt,1).concat(pt)),Et&&(pt=pt.concat(fn(Et,-1)))),pt})(Ve,pe),Ve.length&&this.splitTile(Ve,0,0,0),_e&&(Ve.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function xr(Fe,pe,_e){return 32*((1<<Fe)*_e+pe)+Fe}function $o(Fe,pe){const _e=Fe.tileID.canonical;if(!this._geoJSONIndex)return pe(null,null);const Ve=this._geoJSONIndex.getTile(_e.z,_e.x,_e.y);if(!Ve)return pe(null,null);const He=new class{constructor(_t){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=s.EXTENT,this.length=_t.length,this._features=_t}feature(_t){return new class{constructor(pt){this._feature=pt,this.extent=s.EXTENT,this.type=pt.type,this.properties=pt.tags,"id"in pt&&!isNaN(pt.id)&&(this.id=parseInt(pt.id,10))}loadGeometry(){if(this._feature.type===1){const pt=[];for(const rt of this._feature.geometry)pt.push([new s.Point(rt[0],rt[1])]);return pt}{const pt=[];for(const rt of this._feature.geometry){const Et=[];for(const Qt of rt)Et.push(new s.Point(Qt[0],Qt[1]));pt.push(Et)}return pt}}toGeoJSON(pt,rt,Et){return R.call(this,pt,rt,Et)}}(this._features[_t])}}(Ve.features);let st=nt(He);st.byteOffset===0&&st.byteLength===st.buffer.byteLength||(st=new Uint8Array(st)),pe(null,{vectorTile:He,rawData:st.buffer})}ir.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},ir.prototype.splitTile=function(Fe,pe,_e,Ve,He,st,_t){for(var pt=[Fe,pe,_e,Ve],rt=this.options,Et=rt.debug;pt.length;){Ve=pt.pop(),_e=pt.pop(),pe=pt.pop(),Fe=pt.pop();var Qt=1<<pe,cn=xr(pe,_e,Ve),en=this.tiles[cn];if(!en&&(Et>1&&console.time("creation"),en=this.tiles[cn]=fr(Fe,pe,_e,Ve,rt),this.tileCoords.push({z:pe,x:_e,y:Ve}),Et)){Et>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",pe,_e,Ve,en.numFeatures,en.numPoints,en.numSimplified),console.timeEnd("creation"));var Kn="z"+pe;this.stats[Kn]=(this.stats[Kn]||0)+1,this.total++}if(en.source=Fe,He){if(pe===rt.maxZoom||pe===He)continue;var Jn=1<<He-pe;if(_e!==Math.floor(st/Jn)||Ve!==Math.floor(_t/Jn))continue}else if(pe===rt.indexMaxZoom||en.numPoints<=rt.indexMaxPoints)continue;if(en.source=null,Fe.length!==0){Et>1&&console.time("clipping");var jn,oi,Xn,Mi,mr,is,wr=.5*rt.buffer/rt.extent,jo=.5-wr,rs=.5+wr,Lr=1+wr;jn=oi=Xn=Mi=null,mr=Bt(Fe,Qt,_e-wr,_e+rs,0,en.minX,en.maxX,rt),is=Bt(Fe,Qt,_e+jo,_e+Lr,0,en.minX,en.maxX,rt),Fe=null,mr&&(jn=Bt(mr,Qt,Ve-wr,Ve+rs,1,en.minY,en.maxY,rt),oi=Bt(mr,Qt,Ve+jo,Ve+Lr,1,en.minY,en.maxY,rt),mr=null),is&&(Xn=Bt(is,Qt,Ve-wr,Ve+rs,1,en.minY,en.maxY,rt),Mi=Bt(is,Qt,Ve+jo,Ve+Lr,1,en.minY,en.maxY,rt),is=null),Et>1&&console.timeEnd("clipping"),pt.push(jn||[],pe+1,2*_e,2*Ve),pt.push(oi||[],pe+1,2*_e,2*Ve+1),pt.push(Xn||[],pe+1,2*_e+1,2*Ve),pt.push(Mi||[],pe+1,2*_e+1,2*Ve+1)}}},ir.prototype.getTile=function(Fe,pe,_e){var Ve=this.options,He=Ve.extent,st=Ve.debug;if(Fe<0||Fe>24)return null;var _t=1<<Fe,pt=xr(Fe,pe=(pe%_t+_t)%_t,_e);if(this.tiles[pt])return ki(this.tiles[pt],He);st>1&&console.log("drilling down to z%d-%d-%d",Fe,pe,_e);for(var rt,Et=Fe,Qt=pe,cn=_e;!rt&&Et>0;)Et--,Qt=Math.floor(Qt/2),cn=Math.floor(cn/2),rt=this.tiles[xr(Et,Qt,cn)];return rt&&rt.source?(st>1&&console.log("found parent tile z%d-%d-%d",Et,Qt,cn),st>1&&console.time("drilling down"),this.splitTile(rt.source,Et,Qt,cn,Fe,pe,_e),st>1&&console.timeEnd("drilling down"),this.tiles[pt]?ki(this.tiles[pt],He):null):null};class To extends s.VectorTileWorkerSource{constructor(pe,_e,Ve,He,st){super(pe,_e,Ve,He,$o),st&&(this.loadGeoJSON=st)}loadData(pe,_e){const Ve=pe&&pe.request,He=Ve&&Ve.collectResourceTiming;this.loadGeoJSON(pe,((st,_t)=>{if(st||!_t)return _e(st);if(typeof _t!="object")return _e(new Error(`Input data given to '${pe.source}' is not a valid GeoJSON object.`));{M(_t,!0);try{if(pe.filter){const rt=s.createExpression(pe.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(rt.result==="error")throw new Error(rt.value.map((Qt=>`${Qt.key}: ${Qt.message}`)).join(", "));_t={type:"FeatureCollection",features:_t.features.filter((Qt=>rt.value.evaluate({zoom:0},Qt)))}}this._geoJSONIndex=pe.cluster?new vt((function({superclusterOptions:rt,clusterProperties:Et}){if(!Et||!rt)return rt;const Qt={},cn={},en={accumulated:null,zoom:0},Kn={properties:null},Jn=Object.keys(Et);for(const jn of Jn){const[oi,Xn]=Et[jn],Mi=s.createExpression(Xn),mr=s.createExpression(typeof oi=="string"?[oi,["accumulated"],["get",jn]]:oi);Qt[jn]=Mi.value,cn[jn]=mr.value}return rt.map=jn=>{Kn.properties=jn;const oi={};for(const Xn of Jn)oi[Xn]=Qt[Xn].evaluate(en,Kn);return oi},rt.reduce=(jn,oi)=>{Kn.properties=oi;for(const Xn of Jn)en.accumulated=jn[Xn],jn[Xn]=cn[Xn].evaluate(en,Kn)},rt})(pe)).load(_t.features):(function(rt,Et){return new ir(rt,Et)})(_t,pe.geojsonVtOptions)}catch(rt){return _e(rt)}this.loaded={};const pt={};if(He){const rt=s.getPerformanceMeasurement(Ve);rt&&(pt.resourceTiming={},pt.resourceTiming[pe.source]=JSON.parse(JSON.stringify(rt)))}_e(null,pt)}}))}reloadTile(pe,_e){const Ve=this.loaded;return Ve&&Ve[pe.uid]?super.reloadTile(pe,_e):this.loadTile(pe,_e)}loadGeoJSON(pe,_e){if(pe.request)s.getJSON(pe.request,_e);else{if(typeof pe.data!="string")return _e(new Error(`Input data given to '${pe.source}' is not a valid GeoJSON object.`));try{return _e(null,JSON.parse(pe.data))}catch{return _e(new Error(`Input data given to '${pe.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(pe,_e){try{_e(null,this._geoJSONIndex.getClusterExpansionZoom(pe.clusterId))}catch(Ve){_e(Ve)}}getClusterChildren(pe,_e){try{_e(null,this._geoJSONIndex.getChildren(pe.clusterId))}catch(Ve){_e(Ve)}}getClusterLeaves(pe,_e){try{_e(null,this._geoJSONIndex.getLeaves(pe.clusterId,pe.limit,pe.offset))}catch(Ve){_e(Ve)}}}class Uc{constructor(pe){this.self=pe,this.actor=new s.Actor(pe,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=s.getProjection({name:"mercator"}),this.workerSourceTypes={vector:s.VectorTileWorkerSource,geojson:To},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(_e,Ve)=>{if(this.workerSourceTypes[_e])throw new Error(`Worker source with name "${_e}" already registered.`);this.workerSourceTypes[_e]=Ve},this.self.registerRTLTextPlugin=_e=>{if(s.plugin.isParsed())throw new Error("RTL text plugin already registered.");s.plugin.applyArabicShaping=_e.applyArabicShaping,s.plugin.processBidirectionalText=_e.processBidirectionalText,s.plugin.processStyledBidirectionalText=_e.processStyledBidirectionalText}}clearCaches(pe,_e,Ve){delete this.layerIndexes[pe],delete this.availableImages[pe],delete this.workerSources[pe],delete this.demWorkerSources[pe],Ve()}checkIfReady(pe,_e,Ve){Ve()}setReferrer(pe,_e){this.referrer=_e}spriteLoaded(pe,_e){this.isSpriteLoaded[pe]=_e;for(const Ve in this.workerSources[pe]){const He=this.workerSources[pe][Ve];for(const st in He)He[st]instanceof s.VectorTileWorkerSource&&(He[st].isSpriteLoaded=_e,He[st].fire(new s.Event("isSpriteLoaded")))}}setImages(pe,_e,Ve){this.availableImages[pe]=_e;for(const He in this.workerSources[pe]){const st=this.workerSources[pe][He];for(const _t in st)st[_t].availableImages=_e}Ve()}enableTerrain(pe,_e,Ve){this.terrain=_e,Ve()}setProjection(pe,_e){this.projections[pe]=s.getProjection(_e)}setLayers(pe,_e,Ve){this.getLayerIndex(pe).replace(_e),Ve()}updateLayers(pe,_e,Ve){this.getLayerIndex(pe).update(_e.layers,_e.removedIds),Ve()}loadTile(pe,_e,Ve){const He=this.enableTerrain?s.extend({enableTerrain:this.terrain},_e):_e;He.projection=this.projections[pe]||this.defaultProjection,this.getWorkerSource(pe,_e.type,_e.source).loadTile(He,Ve)}loadDEMTile(pe,_e,Ve){const He=this.enableTerrain?s.extend({buildQuadTree:this.terrain},_e):_e;this.getDEMWorkerSource(pe,_e.source).loadTile(He,Ve)}reloadTile(pe,_e,Ve){const He=this.enableTerrain?s.extend({enableTerrain:this.terrain},_e):_e;He.projection=this.projections[pe]||this.defaultProjection,this.getWorkerSource(pe,_e.type,_e.source).reloadTile(He,Ve)}abortTile(pe,_e,Ve){this.getWorkerSource(pe,_e.type,_e.source).abortTile(_e,Ve)}removeTile(pe,_e,Ve){this.getWorkerSource(pe,_e.type,_e.source).removeTile(_e,Ve)}removeSource(pe,_e,Ve){if(!this.workerSources[pe]||!this.workerSources[pe][_e.type]||!this.workerSources[pe][_e.type][_e.source])return;const He=this.workerSources[pe][_e.type][_e.source];delete this.workerSources[pe][_e.type][_e.source],He.removeSource!==void 0?He.removeSource(_e,Ve):Ve()}loadWorkerSource(pe,_e,Ve){try{this.self.importScripts(_e.url),Ve()}catch(He){Ve(He.toString())}}syncRTLPluginState(pe,_e,Ve){try{s.plugin.setState(_e);const He=s.plugin.getPluginURL();if(s.plugin.isLoaded()&&!s.plugin.isParsed()&&He!=null){this.self.importScripts(He);const st=s.plugin.isParsed();Ve(st?void 0:new Error(`RTL Text Plugin failed to import scripts from ${He}`),st)}}catch(He){Ve(He.toString())}}getAvailableImages(pe){let _e=this.availableImages[pe];return _e||(_e=[]),_e}getLayerIndex(pe){let _e=this.layerIndexes[pe];return _e||(_e=this.layerIndexes[pe]=new x),_e}getWorkerSource(pe,_e,Ve){if(this.workerSources[pe]||(this.workerSources[pe]={}),this.workerSources[pe][_e]||(this.workerSources[pe][_e]={}),!this.workerSources[pe][_e][Ve]){const He={send:(st,_t,pt,rt,Et,Qt)=>{this.actor.send(st,_t,pt,pe,Et,Qt)},scheduler:this.actor.scheduler};this.workerSources[pe][_e][Ve]=new this.workerSourceTypes[_e](He,this.getLayerIndex(pe),this.getAvailableImages(pe),this.isSpriteLoaded[pe])}return this.workerSources[pe][_e][Ve]}getDEMWorkerSource(pe,_e){return this.demWorkerSources[pe]||(this.demWorkerSources[pe]={}),this.demWorkerSources[pe][_e]||(this.demWorkerSources[pe][_e]=new T),this.demWorkerSources[pe][_e]}enforceCacheSizeLimit(pe,_e){s.enforceCacheSizeLimit(_e)}getWorkerPerformanceMetrics(pe,_e,Ve){Ve(void 0,void 0)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new Uc(self)),Uc})),l(["./shared"],(function(s){function p(v,u){if(Array.isArray(v)){if(!Array.isArray(u)||v.length!==u.length)return!1;for(let m=0;m<v.length;m++)if(!p(v[m],u[m]))return!1;return!0}if(typeof v=="object"&&v!==null&&u!==null){if(typeof u!="object"||Object.keys(v).length!==Object.keys(u).length)return!1;for(const m in v)if(!p(v[m],u[m]))return!1;return!0}return v===u}var _=x;function x(v){return!(function(u){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?(function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var y,S,C=new Blob([""],{type:"text/javascript"}),L=URL.createObjectURL(C);try{S=new Worker(L),y=!0}catch{y=!1}return S&&S.terminate(),URL.revokeObjectURL(L),y})()?"Uint8ClampedArray"in window?ArrayBuffer.isView?(function(){var y=document.createElement("canvas");y.width=y.height=1;var S=y.getContext("2d");if(!S)return!1;var C=S.getImageData(0,0,1,1);return C&&C.width===y.width})()?(T[m=u&&u.failIfMajorPerformanceCaveat]===void 0&&(T[m]=(function(y){var S,C=(function(L){var O=document.createElement("canvas"),U=Object.create(x.webGLContextAttributes);return U.failIfMajorPerformanceCaveat=L,O.getContext("webgl",U)||O.getContext("experimental-webgl",U)})(y);if(!C)return!1;try{S=C.createShader(C.VERTEX_SHADER)}catch{return!1}return!(!S||C.isContextLost())&&(C.shaderSource(S,"void main() {}"),C.compileShader(S),C.getShaderParameter(S,C.COMPILE_STATUS)===!0)})(m)),T[m]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var m})(v)}var T={};function k(v,u,m){const y=s.window.document.createElement(v);return u!==void 0&&(y.className=u),m&&m.appendChild(y),y}function P(v,u,m){const y=s.window.document.createElementNS("http://www.w3.org/2000/svg",v);for(const S of Object.keys(u))y.setAttributeNS(null,S,u[S]);return m&&m.appendChild(y),y}x.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const M=s.window.document&&s.window.document.documentElement.style,R=M&&M.userSelect!==void 0?"userSelect":"WebkitUserSelect";let F;function B(){M&&R&&(F=M[R],M[R]="none")}function H(){M&&R&&(M[R]=F)}function G(v){v.preventDefault(),v.stopPropagation(),s.window.removeEventListener("click",G,!0)}function ee(){s.window.addEventListener("click",G,!0),s.window.setTimeout((()=>{s.window.removeEventListener("click",G,!0)}),0)}function ie(v,u){const m=v.getBoundingClientRect();return W(v,m,u)}function J(v,u){const m=v.getBoundingClientRect(),y=[];for(let S=0;S<u.length;S++)y.push(W(v,m,u[S]));return y}function $(v){return s.window.InstallTrigger!==void 0&&v.button===2&&v.ctrlKey&&s.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:v.button}function W(v,u,m){const y=v.offsetWidth===u.width?1:v.offsetWidth/u.width;return new s.Point((m.clientX-u.left)*y,(m.clientY-u.top)*y)}function X(v,u){var m=u[0],y=u[1],S=u[2],C=u[3],L=m*C-S*y;return L?(v[0]=C*(L=1/L),v[1]=-y*L,v[2]=-S*L,v[3]=m*L,v):null}function re(v){const{userImage:u}=v;return!!(u&&u.render&&u.render())&&(v.data.replace(new Uint8Array(u.data.buffer)),!0)}class Y extends s.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new s.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(u){if(this.loaded!==u&&(this.loaded=u,u)){for(const{ids:m,callback:y}of this.requestors)this._notify(m,y);this.requestors=[]}}hasImage(u){return!!this.getImage(u)}getImage(u){return this.images[u]}addImage(u,m){this._validate(u,m)&&(this.images[u]=m)}_validate(u,m){let y=!0;return this._validateStretch(m.stretchX,m.data&&m.data.width)||(this.fire(new s.ErrorEvent(new Error(`Image "${u}" has invalid "stretchX" value`))),y=!1),this._validateStretch(m.stretchY,m.data&&m.data.height)||(this.fire(new s.ErrorEvent(new Error(`Image "${u}" has invalid "stretchY" value`))),y=!1),this._validateContent(m.content,m)||(this.fire(new s.ErrorEvent(new Error(`Image "${u}" has invalid "content" value`))),y=!1),y}_validateStretch(u,m){if(!u)return!0;let y=0;for(const S of u){if(S[0]<y||S[1]<S[0]||m<S[1])return!1;y=S[1]}return!0}_validateContent(u,m){return!(u&&(u.length!==4||u[0]<0||m.data.width<u[0]||u[1]<0||m.data.height<u[1]||u[2]<0||m.data.width<u[2]||u[3]<0||m.data.height<u[3]||u[2]<u[0]||u[3]<u[1]))}updateImage(u,m){m.version=this.images[u].version+1,this.images[u]=m,this.updatedImages[u]=!0}removeImage(u){const m=this.images[u];delete this.images[u],delete this.patterns[u],m.userImage&&m.userImage.onRemove&&m.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(u,m){let y=!0;if(!this.isLoaded())for(const S of u)this.images[S]||(y=!1);this.isLoaded()||y?this._notify(u,m):this.requestors.push({ids:u,callback:m})}_notify(u,m){const y={};for(const S of u){this.images[S]||this.fire(new s.Event("styleimagemissing",{id:S}));const C=this.images[S];C?y[S]={data:C.data.clone(),pixelRatio:C.pixelRatio,sdf:C.sdf,version:C.version,stretchX:C.stretchX,stretchY:C.stretchY,content:C.content,hasRenderCallback:!!(C.userImage&&C.userImage.render)}:s.warnOnce(`Image "${S}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}m(null,y)}getPixelSize(){const{width:u,height:m}=this.atlasImage;return{width:u,height:m}}getPattern(u){const m=this.patterns[u],y=this.getImage(u);if(!y)return null;if(m&&m.position.version===y.version)return m.position;if(m)m.position.version=y.version;else{const S={w:y.data.width+2,h:y.data.height+2,x:0,y:0},C=new s.ImagePosition(S,y);this.patterns[u]={bin:S,position:C}}return this._updatePatternAtlas(),this.patterns[u].position}bind(u){const m=u.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new s.Texture(u,this.atlasImage,m.RGBA),this.atlasTexture&&this.atlasTexture.bind(m.LINEAR,m.CLAMP_TO_EDGE)}_updatePatternAtlas(){const u=[];for(const C in this.patterns)u.push(this.patterns[C].bin);const{w:m,h:y}=s.potpack(u),S=this.atlasImage;S.resize({width:m||1,height:y||1});for(const C in this.patterns){const{bin:L}=this.patterns[C],O=L.x+1,U=L.y+1,q=this.images[C].data,K=q.width,le=q.height;s.RGBAImage.copy(q,S,{x:0,y:0},{x:O,y:U},{width:K,height:le}),s.RGBAImage.copy(q,S,{x:0,y:le-1},{x:O,y:U-1},{width:K,height:1}),s.RGBAImage.copy(q,S,{x:0,y:0},{x:O,y:U+le},{width:K,height:1}),s.RGBAImage.copy(q,S,{x:K-1,y:0},{x:O-1,y:U},{width:1,height:le}),s.RGBAImage.copy(q,S,{x:0,y:0},{x:O+K,y:U},{width:1,height:le})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(u){for(const m of u){if(this.callbackDispatchedThisFrame[m])continue;this.callbackDispatchedThisFrame[m]=!0;const y=this.images[m];re(y)&&this.updateImage(m,y)}}}const Z=new s.Properties({anchor:new s.DataConstantProperty(s.spec.light.anchor),position:new class{constructor(){this.specification=s.spec.light.position}possiblyEvaluate(v,u){return(function([m,y,S]){const C=s.degToRad(y+90),L=s.degToRad(S);return{x:m*Math.cos(C)*Math.sin(L),y:m*Math.sin(C)*Math.sin(L),z:m*Math.cos(L),azimuthal:y,polar:S}})(v.expression.evaluate(u))}interpolate(v,u,m){return{x:s.number(v.x,u.x,m),y:s.number(v.y,u.y,m),z:s.number(v.z,u.z,m),azimuthal:s.number(v.azimuthal,u.azimuthal,m),polar:s.number(v.polar,u.polar,m)}}},color:new s.DataConstantProperty(s.spec.light.color),intensity:new s.DataConstantProperty(s.spec.light.intensity)});class ge extends s.Evented{constructor(u){super(),this._transitionable=new s.Transitionable(Z),this.setLight(u),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(u,m={}){if(!this._validate(s.validateLight,u,m))for(const y in u){const S=u[y];s.endsWith(y,"-transition")?this._transitionable.setTransition(y.slice(0,-11),S):this._transitionable.setValue(y,S)}}updateTransitions(u){this._transitioning=this._transitionable.transitioned(u,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(u){this.properties=this._transitioning.possiblyEvaluate(u)}_validate(u,m,y){return(!y||y.validate!==!1)&&s.emitValidationErrors(this,u.call(s.validateStyle,s.extend({value:m,style:{glyphs:!0,sprite:!0},styleSpec:s.spec})))}}const be=new s.Properties({source:new s.DataConstantProperty(s.spec.terrain.source),exaggeration:new s.DataConstantProperty(s.spec.terrain.exaggeration)});let Be=class extends s.Evented{constructor(v,u){super(),this._transitionable=new s.Transitionable(be),this.set(v),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=u}get(){return this._transitionable.serialize()}set(v){for(const u in v){const m=v[u];s.endsWith(u,"-transition")?this._transitionable.setTransition(u.slice(0,-11),m):this._transitionable.setValue(u,m)}}updateTransitions(v){this._transitioning=this._transitionable.transitioned(v,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(v){this.properties=this._transitioning.possiblyEvaluate(v)}};function nt(v,u,m,y){const S=s.smoothstep(45,65,m),[C,L]=We(v,y),O=s.length(u);let U=1-Math.min(1,Math.exp((O-C)/(L-C)*-6));return U*=U*U,U=Math.min(1,1.00747*U),U*S*v.alpha}function We(v,u){const m=.5/Math.tan(.5*u);return[v.range[0]+m,v.range[1]+m]}const Le=new s.Properties({range:new s.DataConstantProperty(s.spec.fog.range),color:new s.DataConstantProperty(s.spec.fog.color),"high-color":new s.DataConstantProperty(s.spec.fog["high-color"]),"space-color":new s.DataConstantProperty(s.spec.fog["space-color"]),"horizon-blend":new s.DataConstantProperty(s.spec.fog["horizon-blend"]),"star-intensity":new s.DataConstantProperty(s.spec.fog["star-intensity"])});class Ze extends s.Evented{constructor(u,m){super(),this._transitionable=new s.Transitionable(Le),this.set(u),this._transitioning=this._transitionable.untransitioned(),this._transform=m}get state(){const u=this._transform,m=u.projection.name==="globe",y=s.globeToMercatorTransition(u.zoom),S=this.properties.get("range"),C=[.5,3];return{range:m?[s.number(C[0],S[0],y),s.number(C[1],S[1],y)]:S,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(u,m={}){if(!this._validate(s.validateFog,u,m)){for(const y of Object.keys(s.spec.fog))u&&u[y]===void 0&&(u[y]=s.spec.fog[y].default);for(const y in u){const S=u[y];s.endsWith(y,"-transition")?this._transitionable.setTransition(y.slice(0,-11),S):this._transitionable.setValue(y,S)}}}getOpacity(u){if(!this._transform.projection.supportsFog)return 0;const m=this.properties&&this.properties.get("color")||1;return(this._transform.projection.name==="globe"?1:s.smoothstep(45,65,u))*m.a}getOpacityAtLatLng(u,m){return this._transform.projection.supportsFog?(function(y,S,C){const L=s.MercatorCoordinate.fromLngLat(S),O=C.elevation?C.elevation.getAtPointOrZero(L):0,U=[L.x,L.y,O];return s.transformMat4(U,U,C.mercatorFogMatrix),nt(y,U,C.pitch,C._fov)})(this.state,u,m):0}getFovAdjustedRange(u){return this._transform.projection.supportsFog?We(this.state,u):[0,1]}updateTransitions(u){this._transitioning=this._transitionable.transitioned(u,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(u){this.properties=this._transitioning.possiblyEvaluate(u)}_validate(u,m,y){return(!y||y.validate!==!1)&&s.emitValidationErrors(this,u.call(s.validateStyle,s.extend({value:m,style:{glyphs:!0,sprite:!0},styleSpec:s.spec})))}}class Ee{constructor(u,m){this.workerPool=u,this.actors=[],this.currentActor=0,this.id=s.uniqueId();const y=this.workerPool.acquire(this.id);for(let S=0;S<y.length;S++){const C=new Ee.Actor(y[S],m,this.id);C.name=`Worker ${S}`,this.actors.push(C)}this.ready=!1,this.broadcast("checkIfReady",null,(()=>{this.ready=!0}))}broadcast(u,m,y){s.asyncAll(this.actors,((S,C)=>{S.send(u,m,C)}),y=y||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach((u=>{u.remove()})),this.actors=[],this.workerPool.release(this.id)}}function Je(v,u,m){return u*(s.EXTENT/(v.tileSize*Math.pow(2,m-v.tileID.overscaledZ)))}Ee.Actor=s.Actor;class it{constructor(u,m,y,S){this.screenBounds=u,this.cameraPoint=m,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=y,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,S)}static createFromScreenPoints(u,m){let y,S;if(u instanceof s.Point||typeof u[0]=="number"){const C=s.Point.convert(u);y=[C],S=m.isPointAboveHorizon(C)}else{const C=s.Point.convert(u[0]),L=s.Point.convert(u[1]);y=[C,L],S=s.polygonizeBounds(C,L).every((O=>m.isPointAboveHorizon(O)))}return new it(y,m.getCameraPoint(),S,m)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(u){return s.polygonizeBounds(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],u)}bufferedCameraGeometry(u){const m=this.screenBounds[0],y=this.screenBounds.length===1?this.screenBounds[0].add(new s.Point(1,1)):this.screenBounds[1],S=s.polygonizeBounds(m,y,0,!1);return this.cameraPoint.y>y.y&&(this.cameraPoint.x>m.x&&this.cameraPoint.x<y.x?S.splice(3,0,this.cameraPoint):this.cameraPoint.x>=y.x?S[2]=this.cameraPoint:this.cameraPoint.x<=m.x&&(S[3]=this.cameraPoint)),s.bufferConvexPolygon(S,u)}bufferedCameraGeometryGlobe(u){const m=this.screenBounds[0],y=this.screenBounds.length===1?this.screenBounds[0].add(new s.Point(1,1)):this.screenBounds[1],S=s.polygonizeBounds(m,y,u),C=this.cameraPoint.clone();switch(3*((C.y>m.y)+(C.y>y.y))+((C.x>m.x)+(C.x>y.x))){case 0:S[0]=C,S[4]=C.clone();break;case 1:S.splice(1,0,C);break;case 2:S[1]=C;break;case 3:S.splice(4,0,C);break;case 5:S.splice(2,0,C);break;case 6:S[3]=C;break;case 7:S.splice(3,0,C);break;case 8:S[2]=C}return S}containsTile(u,m,y,S=0){const C=u.queryPadding/m._pixelsPerMercatorPixel+1,L=y?this._bufferedCameraMercator(C,m):this._bufferedScreenMercator(C,m);let O=u.tileID.wrap+(L.unwrapped?S:0);const U=L.polygon.map((Ce=>s.getTilePoint(u.tileTransform,Ce,O)));if(!s.polygonIntersectsBox(U,0,0,s.EXTENT,s.EXTENT))return;O=u.tileID.wrap+(this.screenGeometryMercator.unwrapped?S:0);const q=this.screenGeometryMercator.polygon.map((Ce=>s.getTileVec3(u.tileTransform,Ce,O))),K=q.map((Ce=>new s.Point(Ce[0],Ce[1]))),le=m.getFreeCameraOptions().position||new s.MercatorCoordinate(0,0,0),me=s.getTileVec3(u.tileTransform,le,O),xe=q.map((Ce=>{const ce=s.sub(Ce,Ce,me);return s.normalize(ce,ce),new s.Ray(me,ce)})),Se=Je(u,1,m.zoom)*m._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:K,tilespaceRays:xe,bufferedTilespaceGeometry:U,bufferedTilespaceBounds:(we=s.getBounds(U),we.min.x=s.clamp(we.min.x,0,s.EXTENT),we.min.y=s.clamp(we.min.y,0,s.EXTENT),we.max.x=s.clamp(we.max.x,0,s.EXTENT),we.max.y=s.clamp(we.max.y,0,s.EXTENT),we),tile:u,tileID:u.tileID,pixelToTileUnitsFactor:Se};var we}_bufferedScreenMercator(u,m){const y=ot(u);if(this._screenRaycastCache[y])return this._screenRaycastCache[y];{let S;return S=m.projection.name==="globe"?this._projectAndResample(this.bufferedScreenGeometry(u),m):{polygon:this.bufferedScreenGeometry(u).map((C=>m.pointCoordinate3D(C))),unwrapped:!0},this._screenRaycastCache[y]=S,S}}_bufferedCameraMercator(u,m){const y=ot(u);if(this._cameraRaycastCache[y])return this._cameraRaycastCache[y];{let S;return S=m.projection.name==="globe"?this._projectAndResample(this.bufferedCameraGeometryGlobe(u),m):{polygon:this.bufferedCameraGeometry(u).map((C=>m.pointCoordinate3D(C))),unwrapped:!0},this._cameraRaycastCache[y]=S,S}}_projectAndResample(u,m){const y=(function(C,L){const O=s.multiply([],L.pixelMatrix,L.globeMatrix),U=[0,-s.GLOBE_RADIUS,0,1],q=[0,s.GLOBE_RADIUS,0,1],K=[0,0,0,1];s.transformMat4$1(U,U,O),s.transformMat4$1(q,q,O),s.transformMat4$1(K,K,O);const le=new s.Point(U[0]/U[3],U[1]/U[3]),me=new s.Point(q[0]/q[3],q[1]/q[3]),xe=s.polygonContainsPoint(C,le)&&U[3]<K[3],Se=s.polygonContainsPoint(C,me)&&q[3]<K[3];if(!xe&&!Se)return null;const we=(function(Ge,ct,at){for(let gt=1;gt<Ge.length;gt++){const Wt=mt(ct.pointCoordinate3D(Ge[gt-1]).x),ht=mt(ct.pointCoordinate3D(Ge[gt]).x);if(at<0){if(Wt<ht)return{idx:gt,t:-Wt/(ht-1-Wt)}}else if(ht<Wt)return{idx:gt,t:(1-Wt)/(ht+1-Wt)}}return null})(C,L,xe?-1:1);if(!we)return null;const{idx:Ce,t:ce}=we;let ye=Ce>1?vt(C.slice(0,Ce),L):[],Pe=Ce<C.length?vt(C.slice(Ce),L):[];ye=ye.map((Ge=>new s.Point(mt(Ge.x),Ge.y))),Pe=Pe.map((Ge=>new s.Point(mt(Ge.x),Ge.y)));const De=[...ye];De.length===0&&De.push(Pe[Pe.length-1]);const Ue=s.number(De[De.length-1].y,(Pe.length===0?ye[0]:Pe[0]).y,ce);let je;return je=xe?[new s.Point(0,Ue),new s.Point(0,0),new s.Point(1,0),new s.Point(1,Ue)]:[new s.Point(1,Ue),new s.Point(1,1),new s.Point(0,1),new s.Point(0,Ue)],De.push(...je),Pe.length===0?De.push(ye[0]):De.push(...Pe),{polygon:De.map((Ge=>new s.MercatorCoordinate(Ge.x,Ge.y))),unwrapped:!1}})(u,m);if(y)return y;const S=(function(C,L){let O=!1,U=-1/0,q=0;for(let le=0;le<C.length-1;le++)C[le].x>U&&(U=C[le].x,q=le);for(let le=0;le<C.length-1;le++){const me=(q+le)%(C.length-1),xe=C[me],Se=C[me+1];Math.abs(xe.x-Se.x)>.5&&(xe.x<Se.x?(xe.x+=1,me===0&&(C[C.length-1].x+=1)):(Se.x+=1,me+1===C.length-1&&(C[0].x+=1)),O=!0)}const K=s.mercatorXfromLng(L.center.lng);return O&&K<Math.abs(K-1)&&C.forEach((le=>{le.x-=1})),{polygon:C,unwrapped:O}})(vt(u,m).map((C=>new s.Point(mt(C.x),C.y))),m);return{polygon:S.polygon.map((C=>new s.MercatorCoordinate(C.x,C.y))),unwrapped:S.unwrapped}}}function vt(v,u){return s.resample(v,(m=>{const y=u.pointCoordinate3D(m);m.x=y.x,m.y=y.y}),1/256)}function mt(v){return v<0?1+v%1:v%1}function ot(v){return 100*v|0}function Ye(v,u,m,y,S){const C=function(L,O){if(L)return S(L);if(O){v.url&&O.tiles&&v.tiles&&delete v.tiles;const U=s.pick(s.extend(O,v),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);O.vector_layers&&(U.vectorLayers=O.vector_layers,U.vectorLayerIds=U.vectorLayers.map((q=>q.id))),U.tiles=u.canonicalizeTileset(U,v.url),S(null,U)}};return v.url?s.getJSON(u.transformRequest(u.normalizeSourceURL(v.url,null,m,y),s.ResourceType.Source),C):s.exported.frame((()=>C(null,v)))}class ut{constructor(u,m,y){this.bounds=s.LngLatBounds.convert(this.validateBounds(u)),this.minzoom=m||0,this.maxzoom=y||24}validateBounds(u){return Array.isArray(u)&&u.length===4?[Math.max(-180,u[0]),Math.max(-90,u[1]),Math.min(180,u[2]),Math.min(90,u[3])]:[-180,-90,180,90]}contains(u){const m=Math.pow(2,u.z),y=Math.floor(s.mercatorXfromLng(this.bounds.getWest())*m),S=Math.floor(s.mercatorYfromLat(this.bounds.getNorth())*m),C=Math.ceil(s.mercatorXfromLng(this.bounds.getEast())*m),L=Math.ceil(s.mercatorYfromLat(this.bounds.getSouth())*m);return u.x>=y&&u.x<C&&u.y>=S&&u.y<L}}class Ke{constructor(u,m,y){this.context=u;const S=u.gl;this.buffer=S.createBuffer(),this.dynamicDraw=!!y,this.context.unbindVAO(),u.bindElementBuffer.set(this.buffer),S.bufferData(S.ELEMENT_ARRAY_BUFFER,m.arrayBuffer,this.dynamicDraw?S.DYNAMIC_DRAW:S.STATIC_DRAW),this.dynamicDraw||m.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(u){const m=this.context.gl;this.context.unbindVAO(),this.bind(),m.bufferSubData(m.ELEMENT_ARRAY_BUFFER,0,u.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const jt={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class xn{constructor(u,m,y,S){this.length=m.length,this.attributes=y,this.itemSize=m.bytesPerElement,this.dynamicDraw=S,this.context=u;const C=u.gl;this.buffer=C.createBuffer(),u.bindVertexBuffer.set(this.buffer),C.bufferData(C.ARRAY_BUFFER,m.arrayBuffer,this.dynamicDraw?C.DYNAMIC_DRAW:C.STATIC_DRAW),this.dynamicDraw||m.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(u){const m=this.context.gl;this.bind(),m.bufferSubData(m.ARRAY_BUFFER,0,u.arrayBuffer)}enableAttributes(u,m){for(let y=0;y<this.attributes.length;y++){const S=m.attributes[this.attributes[y].name];S!==void 0&&u.enableVertexAttribArray(S)}}setVertexAttribPointers(u,m,y){for(let S=0;S<this.attributes.length;S++){const C=this.attributes[S],L=m.attributes[C.name];L!==void 0&&u.vertexAttribPointer(L,C.components,u[jt[C.type]],!1,this.itemSize,C.offset+this.itemSize*(y||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class ke{constructor(u){this.gl=u.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(u){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Ae extends ke{getDefault(){return s.Color.transparent}set(u){const m=this.current;(u.r!==m.r||u.g!==m.g||u.b!==m.b||u.a!==m.a||this.dirty)&&(this.gl.clearColor(u.r,u.g,u.b,u.a),this.current=u,this.dirty=!1)}}class he extends ke{getDefault(){return 1}set(u){(u!==this.current||this.dirty)&&(this.gl.clearDepth(u),this.current=u,this.dirty=!1)}}class et extends ke{getDefault(){return 0}set(u){(u!==this.current||this.dirty)&&(this.gl.clearStencil(u),this.current=u,this.dirty=!1)}}class dt extends ke{getDefault(){return[!0,!0,!0,!0]}set(u){const m=this.current;(u[0]!==m[0]||u[1]!==m[1]||u[2]!==m[2]||u[3]!==m[3]||this.dirty)&&(this.gl.colorMask(u[0],u[1],u[2],u[3]),this.current=u,this.dirty=!1)}}class Qe extends ke{getDefault(){return!0}set(u){(u!==this.current||this.dirty)&&(this.gl.depthMask(u),this.current=u,this.dirty=!1)}}class Ct extends ke{getDefault(){return 255}set(u){(u!==this.current||this.dirty)&&(this.gl.stencilMask(u),this.current=u,this.dirty=!1)}}class Pt extends ke{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(u){const m=this.current;(u.func!==m.func||u.ref!==m.ref||u.mask!==m.mask||this.dirty)&&(this.gl.stencilFunc(u.func,u.ref,u.mask),this.current=u,this.dirty=!1)}}class Bt extends ke{getDefault(){const u=this.gl;return[u.KEEP,u.KEEP,u.KEEP]}set(u){const m=this.current;(u[0]!==m[0]||u[1]!==m[1]||u[2]!==m[2]||this.dirty)&&(this.gl.stencilOp(u[0],u[1],u[2]),this.current=u,this.dirty=!1)}}class Ht extends ke{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;u?m.enable(m.STENCIL_TEST):m.disable(m.STENCIL_TEST),this.current=u,this.dirty=!1}}class En extends ke{getDefault(){return[0,1]}set(u){const m=this.current;(u[0]!==m[0]||u[1]!==m[1]||this.dirty)&&(this.gl.depthRange(u[0],u[1]),this.current=u,this.dirty=!1)}}class Jt extends ke{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;u?m.enable(m.DEPTH_TEST):m.disable(m.DEPTH_TEST),this.current=u,this.dirty=!1}}class Mn extends ke{getDefault(){return this.gl.LESS}set(u){(u!==this.current||this.dirty)&&(this.gl.depthFunc(u),this.current=u,this.dirty=!1)}}class Ln extends ke{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;u?m.enable(m.BLEND):m.disable(m.BLEND),this.current=u,this.dirty=!1}}class Ut extends ke{getDefault(){const u=this.gl;return[u.ONE,u.ZERO]}set(u){const m=this.current;(u[0]!==m[0]||u[1]!==m[1]||this.dirty)&&(this.gl.blendFunc(u[0],u[1]),this.current=u,this.dirty=!1)}}class rn extends ke{getDefault(){return s.Color.transparent}set(u){const m=this.current;(u.r!==m.r||u.g!==m.g||u.b!==m.b||u.a!==m.a||this.dirty)&&(this.gl.blendColor(u.r,u.g,u.b,u.a),this.current=u,this.dirty=!1)}}class fn extends ke{getDefault(){return this.gl.FUNC_ADD}set(u){(u!==this.current||this.dirty)&&(this.gl.blendEquation(u),this.current=u,this.dirty=!1)}}class Bn extends ke{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;u?m.enable(m.CULL_FACE):m.disable(m.CULL_FACE),this.current=u,this.dirty=!1}}class ki extends ke{getDefault(){return this.gl.BACK}set(u){(u!==this.current||this.dirty)&&(this.gl.cullFace(u),this.current=u,this.dirty=!1)}}class qi extends ke{getDefault(){return this.gl.CCW}set(u){(u!==this.current||this.dirty)&&(this.gl.frontFace(u),this.current=u,this.dirty=!1)}}let fr,ns=class extends ke{getDefault(){return null}set(v){(v!==this.current||this.dirty)&&(this.gl.useProgram(v),this.current=v,this.dirty=!1)}};class wo extends ke{getDefault(){return this.gl.TEXTURE0}set(u){(u!==this.current||this.dirty)&&(this.gl.activeTexture(u),this.current=u,this.dirty=!1)}}class ir extends ke{getDefault(){const u=this.gl;return[0,0,u.drawingBufferWidth,u.drawingBufferHeight]}set(u){const m=this.current;(u[0]!==m[0]||u[1]!==m[1]||u[2]!==m[2]||u[3]!==m[3]||this.dirty)&&(this.gl.viewport(u[0],u[1],u[2],u[3]),this.current=u,this.dirty=!1)}}class xr extends ke{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;m.bindFramebuffer(m.FRAMEBUFFER,u),this.current=u,this.dirty=!1}}class $o extends ke{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;m.bindRenderbuffer(m.RENDERBUFFER,u),this.current=u,this.dirty=!1}}class To extends ke{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;m.bindTexture(m.TEXTURE_2D,u),this.current=u,this.dirty=!1}}class Uc extends ke{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;m.bindBuffer(m.ARRAY_BUFFER,u),this.current=u,this.dirty=!1}}class Fe extends ke{getDefault(){return null}set(u){const m=this.gl;m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,u),this.current=u,this.dirty=!1}}class pe extends ke{constructor(u){super(u),this.vao=u.extVertexArrayObject}getDefault(){return null}set(u){this.vao&&(u!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(u),this.current=u,this.dirty=!1)}}class _e extends ke{getDefault(){return 4}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;m.pixelStorei(m.UNPACK_ALIGNMENT,u),this.current=u,this.dirty=!1}}class Ve extends ke{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;m.pixelStorei(m.UNPACK_PREMULTIPLY_ALPHA_WEBGL,u),this.current=u,this.dirty=!1}}class He extends ke{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;m.pixelStorei(m.UNPACK_FLIP_Y_WEBGL,u),this.current=u,this.dirty=!1}}class st extends ke{constructor(u,m){super(u),this.context=u,this.parent=m}getDefault(){return null}}class _t extends st{setDirty(){this.dirty=!0}set(u){if(u===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const m=this.gl;m.framebufferTexture2D(m.FRAMEBUFFER,m.COLOR_ATTACHMENT0,m.TEXTURE_2D,u,0),this.current=u,this.dirty=!1}}class pt extends st{attachment(){return this.gl.DEPTH_ATTACHMENT}set(u){if(u===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const m=this.gl;m.framebufferRenderbuffer(m.FRAMEBUFFER,this.attachment(),m.RENDERBUFFER,u),this.current=u,this.dirty=!1}}class rt extends pt{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class Et{constructor(u,m,y,S){this.context=u,this.width=m,this.height=y;const C=this.framebuffer=u.gl.createFramebuffer();this.colorAttachment=new _t(u,C),S&&(this.depthAttachment=new pt(u,C))}destroy(){const u=this.context.gl,m=this.colorAttachment.get();if(m&&u.deleteTexture(m),this.depthAttachment){const y=this.depthAttachment.get();y&&u.deleteRenderbuffer(y)}u.deleteFramebuffer(this.framebuffer)}}class Qt{constructor(u,m=!1){if(this.gl=u,this.isWebGL2=m,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),m){const y=u;this.extVertexArrayObject={createVertexArrayOES:y.createVertexArray.bind(u),deleteVertexArrayOES:y.deleteVertexArray.bind(u),bindVertexArrayOES:y.bindVertexArray.bind(u)}}this.clearColor=new Ae(this),this.clearDepth=new he(this),this.clearStencil=new et(this),this.colorMask=new dt(this),this.depthMask=new Qe(this),this.stencilMask=new Ct(this),this.stencilFunc=new Pt(this),this.stencilOp=new Bt(this),this.stencilTest=new Ht(this),this.depthRange=new En(this),this.depthTest=new Jt(this),this.depthFunc=new Mn(this),this.blend=new Ln(this),this.blendFunc=new Ut(this),this.blendColor=new rn(this),this.blendEquation=new fn(this),this.cullFace=new Bn(this),this.cullFaceSide=new ki(this),this.frontFace=new qi(this),this.program=new ns(this),this.activeTexture=new wo(this),this.viewport=new ir(this),this.bindFramebuffer=new xr(this),this.bindRenderbuffer=new $o(this),this.bindTexture=new To(this),this.bindVertexBuffer=new Uc(this),this.bindElementBuffer=new Fe(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new pe(this),this.pixelStoreUnpack=new _e(this),this.pixelStoreUnpackPremultiplyAlpha=new Ve(this),this.pixelStoreUnpackFlipY=new He(this),this.extTextureFilterAnisotropic=u.getExtension("EXT_texture_filter_anisotropic")||u.getExtension("MOZ_EXT_texture_filter_anisotropic")||u.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=u.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extDebugRendererInfo=u.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=u.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=u.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),m||(this.extTextureHalfFloat=u.getExtension("OES_texture_half_float")),(m||this.extTextureHalfFloat&&u.getExtension("OES_texture_half_float_linear"))&&(this.extRenderToTextureHalfFloat=u.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=m||u.getExtension("OES_standard_derivatives"),this.extTimerQuery=u.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=u.getParameter(u.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(u,m){return new Ke(this,u,m)}createVertexBuffer(u,m,y){return new xn(this,u,m,y)}createRenderbuffer(u,m,y){const S=this.gl,C=S.createRenderbuffer();return this.bindRenderbuffer.set(C),S.renderbufferStorage(S.RENDERBUFFER,u,m,y),this.bindRenderbuffer.set(null),C}createFramebuffer(u,m,y){return new Et(this,u,m,y)}clear({color:u,depth:m,stencil:y}){const S=this.gl;let C=0;u&&(C|=S.COLOR_BUFFER_BIT,this.clearColor.set(u),this.colorMask.set([!0,!0,!0,!0])),m!==void 0&&(C|=S.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(m),this.depthMask.set(!0)),y!==void 0&&(C|=S.STENCIL_BUFFER_BIT,this.clearStencil.set(y),this.stencilMask.set(255)),S.clear(C)}setCullFace(u){u.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(u.mode),this.frontFace.set(u.frontFace))}setDepthMode(u){u.func!==this.gl.ALWAYS||u.mask?(this.depthTest.set(!0),this.depthFunc.set(u.func),this.depthMask.set(u.mask),this.depthRange.set(u.range)):this.depthTest.set(!1)}setStencilMode(u){u.test.func!==this.gl.ALWAYS||u.mask?(this.stencilTest.set(!0),this.stencilMask.set(u.mask),this.stencilOp.set([u.fail,u.depthFail,u.pass]),this.stencilFunc.set({func:u.test.func,ref:u.ref,mask:u.test.mask})):this.stencilTest.set(!1)}setColorMode(u){p(u.blendFunction,s.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(u.blendFunction),this.blendColor.set(u.blendColor)),this.colorMask.set(u.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class cn extends s.Evented{constructor(u,m,y,S){if(super(),this.id=u,this.dispatcher=y,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,s.extend(this,s.pick(m,["url","scheme","tileSize","promoteId"])),this._options=s.extend({type:"vector"},m),this._collectResourceTiming=m.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(S),this._tileWorkers={},this._deduped=new s.DedupedRequest}load(u){this._loaded=!1,this.fire(new s.Event("dataloading",{dataType:"source"}));const m=Array.isArray(this.map._language)?this.map._language.join():this.map._language,y=this.map._worldview;this._tileJSONRequest=Ye(this._options,this.map._requestManager,m,y,((S,C)=>{this._tileJSONRequest=null,this._loaded=!0,S?(m&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${m}`),y&&y.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${y}`),this.fire(new s.ErrorEvent(S))):C&&(s.extend(this,C),C.bounds&&(this.tileBounds=new ut(C.bounds,this.minzoom,this.maxzoom)),s.postTurnstileEvent(C.tiles,this.map._requestManager._customAccessToken),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"}))),u&&u(S)}))}loaded(){return this._loaded}hasTile(u){return!this.tileBounds||this.tileBounds.contains(u.canonical)}onAdd(u){this.map=u,this.load()}reload(){this.cancelTileJSONRequest(),this.load((()=>this.map.style._clearSource(this.id)))}setTiles(u){return this._options.tiles=u,this.reload(),this}setUrl(u){return this.url=u,this._options.url=u,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return s.extend({},this._options)}loadTile(u,m){const y=this.map._requestManager.normalizeTileURL(u.tileID.canonical.url(this.tiles,this.scheme)),S={request:this.map._requestManager.transformRequest(y,s.ResourceType.Tile),data:void 0,uid:u.uid,tileID:u.tileID,tileZoom:u.tileZoom,zoom:u.tileID.overscaledZ,tileSize:this.tileSize*u.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:s.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:u.isSymbolTile};if(S.request.collectResourceTiming=this._collectResourceTiming,u.actor&&u.state!=="expired")u.state==="loading"?u.reloadCallback=m:u.request=u.actor.send("reloadTile",S,C.bind(this));else if(u.actor=this._tileWorkers[y]=this._tileWorkers[y]||this.dispatcher.getActor(),this.dispatcher.ready)u.request=u.actor.send("loadTile",S,C.bind(this),void 0,!0);else{const L=s.loadVectorTile.call({deduped:this._deduped},S,((O,U)=>{O||!U?C.call(this,O):(S.data={cacheControl:U.cacheControl,expires:U.expires,rawData:U.rawData.slice(0)},u.actor&&u.actor.send("loadTile",S,C.bind(this),void 0,!0))}),!0);u.request={cancel:L}}function C(L,O){return delete u.request,u.aborted?m(null):L&&L.status!==404?m(L):(O&&O.resourceTiming&&(u.resourceTiming=O.resourceTiming),this.map._refreshExpiredTiles&&O&&u.setExpiryData(O),u.loadVectorData(O,this.map.painter),s.cacheEntryPossiblyAdded(this.dispatcher),m(null),void(u.reloadCallback&&(this.loadTile(u,u.reloadCallback),u.reloadCallback=null)))}}abortTile(u){u.request&&(u.request.cancel(),delete u.request),u.actor&&u.actor.send("abortTile",{uid:u.uid,type:this.type,source:this.id})}unloadTile(u){u.unloadVectorData(),u.actor&&u.actor.send("removeTile",{uid:u.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class en extends s.Evented{constructor(u,m,y,S){super(),this.id=u,this.dispatcher=y,this.setEventedParent(S),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=s.extend({type:"raster"},m),s.extend(this,s.pick(m,["url","scheme","tileSize"]))}load(u){this._loaded=!1,this.fire(new s.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Ye(this._options,this.map._requestManager,null,null,((m,y)=>{this._tileJSONRequest=null,this._loaded=!0,m?this.fire(new s.ErrorEvent(m)):y&&(s.extend(this,y),y.bounds&&(this.tileBounds=new ut(y.bounds,this.minzoom,this.maxzoom)),s.postTurnstileEvent(y.tiles),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"}))),u&&u(m)}))}loaded(){return this._loaded}onAdd(u){this.map=u,this.load()}reload(){this.cancelTileJSONRequest(),this.load((()=>this.map.style._clearSource(this.id)))}setTiles(u){return this._options.tiles=u,this.reload(),this}setUrl(u){return this.url=u,this._options.url=u,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return s.extend({},this._options)}hasTile(u){return!this.tileBounds||this.tileBounds.contains(u.canonical)}loadTile(u,m){const y=s.exported.devicePixelRatio>=2,S=this.map._requestManager.normalizeTileURL(u.tileID.canonical.url(this.tiles,this.scheme),y,this.tileSize);u.request=s.getImage(this.map._requestManager.transformRequest(S,s.ResourceType.Tile),((C,L,O,U)=>(delete u.request,u.aborted?(u.state="unloaded",m(null)):C?(u.state="errored",m(C)):L?(this.map._refreshExpiredTiles&&u.setExpiryData({cacheControl:O,expires:U}),u.setTexture(L,this.map.painter),u.state="loaded",s.cacheEntryPossiblyAdded(this.dispatcher),void m(null)):m(null))))}static loadTileData(u,m,y){u.setTexture(m,y)}static unloadTileData(u,m){u.texture&&m.saveTileTexture(u.texture)}abortTile(u,m){u.request&&(u.request.cancel(),delete u.request),m()}unloadTile(u,m){u.texture&&this.map.painter.saveTileTexture(u.texture),m()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}function Kn(v,u,m,y,S,C,L,O){const U=[v,m,S,u,y,C,1,1,1],q=[L,O,1],K=s.adjoint([],U),[le,me,xe]=s.transformMat3(q,q,s.transpose(K,K));return s.multiply$1(U,[le,0,0,0,me,0,0,0,xe],U)}class Jn extends s.Evented{constructor(u,m,y,S){super(),this.id=u,this.dispatcher=y,this.coordinates=m.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(S),this.options=m,this._dirty=!1}load(u,m){this._loaded=m||!1,this.fire(new s.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._imageRequest=s.getImage(this.map._requestManager.transformRequest(this.url,s.ResourceType.Image),((y,S)=>{if(this._imageRequest=null,this._loaded=!0,y)this.fire(new s.ErrorEvent(y));else if(S){const{HTMLImageElement:C}=s.window;this.image=S instanceof C?s.exported.getImageData(S):S,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,u&&(this.coordinates=u),this._finishLoading()}}))}loaded(){return this._loaded}updateImage(u){return this.image&&u.url?(this._imageRequest&&u.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=u.url,this.load(u.coordinates,this._loaded),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(u){this.map=u,this.load()}onRemove(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),this.texture&&this.texture.destroy()}setCoordinates(u){this.coordinates=u,this._boundsArray=void 0;const m=u.map(s.MercatorCoordinate.fromLngLat);return this.tileID=(function(y){let S=1/0,C=1/0,L=-1/0,O=-1/0;for(const le of y)S=Math.min(S,le.x),C=Math.min(C,le.y),L=Math.max(L,le.x),O=Math.max(O,le.y);const U=Math.max(L-S,O-C),q=Math.max(0,Math.floor(-Math.log(U)/Math.LN2)),K=Math.pow(2,q);return new s.CanonicalTileID(q,Math.floor((S+L)/2*K),Math.floor((C+O)/2*K))})(m),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(u){for(const U in this.tiles){const q=this.tiles[U];q.state!=="loaded"&&(q.state="loaded",q.texture=this.texture)}if(this._boundsArray)return;const m=s.tileTransform(this.tileID,this.map.transform.projection),[y,S,C,L]=this.coordinates.map((U=>{const q=m.projection.project(U[0],U[1]);return s.getTilePoint(m,q)._round()}));this.perspectiveTransform=(function(U,q,K,le,me,xe,Se,we,Ce,ce){const ye=Kn(0,0,U,0,0,q,U,q),Pe=Kn(K,le,me,xe,Se,we,Ce,ce);return s.multiply$1(Pe,s.adjoint(ye,ye),Pe),[Pe[6]/Pe[8]*U/s.EXTENT,Pe[7]/Pe[8]*q/s.EXTENT]})(this.width,this.height,y.x,y.y,S.x,S.y,L.x,L.y,C.x,C.y);const O=this._boundsArray=new s.StructArrayLayout4i8;O.emplaceBack(y.x,y.y,0,0),O.emplaceBack(S.x,S.y,s.EXTENT,0),O.emplaceBack(L.x,L.y,0,s.EXTENT),O.emplaceBack(C.x,C.y,s.EXTENT,s.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=u.createVertexBuffer(O,s.boundsAttributes.members),this.boundsSegments=s.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const u=this.map.painter.context,m=u.gl;this._dirty&&(this.texture?this.texture.update(this.image):(this.texture=new s.Texture(u,this.image,m.RGBA),this.texture.bind(m.LINEAR,m.CLAMP_TO_EDGE)),this._dirty=!1),this._prepareData(u)}loadTile(u,m){this.tileID&&this.tileID.equals(u.tileID.canonical)?(this.tiles[String(u.tileID.wrap)]=u,u.buckets={},m(null)):(u.state="errored",m(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const jn={vector:cn,raster:en,"raster-dem":class extends en{constructor(v,u,m,y){super(v,u,m,y),this.type="raster-dem",this.maxzoom=22,this._options=s.extend({type:"raster-dem"},u),this.encoding=u.encoding||"mapbox"}loadTile(v,u){const m=this.map._requestManager.normalizeTileURL(v.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function y(S,C){S&&(v.state="errored",u(S)),C&&(v.dem=C,v.dem.onDeserialize(),v.needsHillshadePrepare=!0,v.needsDEMTextureUpload=!0,v.state="loaded",u(null))}v.request=s.getImage(this.map._requestManager.transformRequest(m,s.ResourceType.Tile),(function(S,C,L,O){if(delete v.request,v.aborted)v.state="unloaded",u(null);else if(S)v.state="errored",u(S);else if(C){this.map._refreshExpiredTiles&&v.setExpiryData({cacheControl:L,expires:O});const U=s.window.ImageBitmap&&C instanceof s.window.ImageBitmap&&(fr==null&&(fr=s.window.OffscreenCanvas&&new s.window.OffscreenCanvas(1,1).getContext("2d")&&typeof s.window.createImageBitmap=="function"),fr),q=1-(C.width-s.prevPowerOfTwo(C.width))/2;q<1||v.neighboringTiles||(v.neighboringTiles=this._getNeighboringTiles(v.tileID));const K=U?C:s.exported.getImageData(C,q),le={uid:v.uid,coord:v.tileID,source:this.id,rawImageData:K,encoding:this.encoding,padding:q};v.actor&&v.state!=="expired"||(v.actor=this.dispatcher.getActor(),v.actor.send("loadDEMTile",le,y.bind(this),void 0,!0))}}).bind(this))}_getNeighboringTiles(v){const u=v.canonical,m=Math.pow(2,u.z),y=(u.x-1+m)%m,S=u.x===0?v.wrap-1:v.wrap,C=(u.x+1+m)%m,L=u.x+1===m?v.wrap+1:v.wrap,O={};return O[new s.OverscaledTileID(v.overscaledZ,S,u.z,y,u.y).key]={backfilled:!1},O[new s.OverscaledTileID(v.overscaledZ,L,u.z,C,u.y).key]={backfilled:!1},u.y>0&&(O[new s.OverscaledTileID(v.overscaledZ,S,u.z,y,u.y-1).key]={backfilled:!1},O[new s.OverscaledTileID(v.overscaledZ,v.wrap,u.z,u.x,u.y-1).key]={backfilled:!1},O[new s.OverscaledTileID(v.overscaledZ,L,u.z,C,u.y-1).key]={backfilled:!1}),u.y+1<m&&(O[new s.OverscaledTileID(v.overscaledZ,S,u.z,y,u.y+1).key]={backfilled:!1},O[new s.OverscaledTileID(v.overscaledZ,v.wrap,u.z,u.x,u.y+1).key]={backfilled:!1},O[new s.OverscaledTileID(v.overscaledZ,L,u.z,C,u.y+1).key]={backfilled:!1}),O}unloadTile(v){v.demTexture&&this.map.painter.saveTileTexture(v.demTexture),v.fbo&&(v.fbo.destroy(),delete v.fbo),v.dem&&delete v.dem,delete v.neighboringTiles,v.state="unloaded"}},geojson:class extends s.Evented{constructor(v,u,m,y){super(),this.id=v,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=m.getActor(),this.setEventedParent(y),this._data=u.data,this._options=s.extend({},u),this._collectResourceTiming=u.collectResourceTiming,u.maxzoom!==void 0&&(this.maxzoom=u.maxzoom),u.type&&(this.type=u.type),u.attribution&&(this.attribution=u.attribution),this.promoteId=u.promoteId;const S=s.EXTENT/this.tileSize;this.workerOptions=s.extend({source:this.id,cluster:u.cluster||!1,geojsonVtOptions:{buffer:(u.buffer!==void 0?u.buffer:128)*S,tolerance:(u.tolerance!==void 0?u.tolerance:.375)*S,extent:s.EXTENT,maxZoom:this.maxzoom,lineMetrics:u.lineMetrics||!1,generateId:u.generateId||!1},superclusterOptions:{maxZoom:u.clusterMaxZoom!==void 0?u.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,u.clusterMinPoints||2),extent:s.EXTENT,radius:(u.clusterRadius!==void 0?u.clusterRadius:50)*S,log:!1,generateId:u.generateId||!1},clusterProperties:u.clusterProperties,filter:u.filter},u.workerOptions)}onAdd(v){this.map=v,this.setData(this._data)}setData(v){return this._data=v,this._updateWorkerData(),this}getClusterExpansionZoom(v,u){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:v,source:this.id},u),this}getClusterChildren(v,u){return this.actor.send("geojson.getClusterChildren",{clusterId:v,source:this.id},u),this}getClusterLeaves(v,u,m,y){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:v,limit:u,offset:m},y),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new s.Event("dataloading",{dataType:"source"})),this._loaded=!1;const v=s.extend({},this.workerOptions),u=this._data;typeof u=="string"?(v.request=this.map._requestManager.transformRequest(s.exported.resolveURL(u),s.ResourceType.Source),v.request.collectResourceTiming=this._collectResourceTiming):v.data=JSON.stringify(u),this._pendingLoad=this.actor.send(`${this.type}.loadData`,v,((m,y)=>{if(this._loaded=!0,this._pendingLoad=null,m)this.fire(new s.ErrorEvent(m));else{const S={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&y&&y.resourceTiming&&y.resourceTiming[this.id]&&(S.resourceTiming=y.resourceTiming[this.id]),this.fire(new s.Event("data",S)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)}))}loaded(){return this._loaded}loadTile(v,u){const m=v.actor?"reloadTile":"loadTile";v.actor=this.actor,v.request=this.actor.send(m,{type:this.type,uid:v.uid,tileID:v.tileID,tileZoom:v.tileZoom,zoom:v.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:s.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},((y,S)=>(delete v.request,v.unloadVectorData(),v.aborted?u(null):y?u(y):(v.loadVectorData(S,this.map.painter,m==="reloadTile"),u(null)))),void 0,m==="loadTile")}abortTile(v){v.request&&(v.request.cancel(),delete v.request),v.aborted=!0}unloadTile(v){v.unloadVectorData(),this.actor.send("removeTile",{uid:v.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return s.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends Jn{constructor(v,u,m,y){super(v,u,m,y),this.roundZoom=!0,this.type="video",this.options=u}load(){this._loaded=!1;const v=this.options;this.urls=[];for(const u of v.urls)this.urls.push(this.map._requestManager.transformRequest(u,s.ResourceType.Source).url);s.getVideo(this.urls,((u,m)=>{this._loaded=!0,u?this.fire(new s.ErrorEvent(u)):m&&(this.video=m,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading())}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(v){if(this.video){const u=this.video.seekable;v<u.start(0)||v>u.end(0)?this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${u.start(0)} and ${u.end(0)}-second mark.`))):this.video.currentTime=v}}getVideo(){return this.video}onAdd(v){this.map||(this.map=v,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const v=this.map.painter.context,u=v.gl;this.texture?this.video.paused||(this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE),u.texSubImage2D(u.TEXTURE_2D,0,0,0,u.RGBA,u.UNSIGNED_BYTE,this.video)):(this.texture=new s.Texture(v,this.video,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(v)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:Jn,canvas:class extends Jn{constructor(v,u,m,y){super(v,u,m,y),u.coordinates?Array.isArray(u.coordinates)&&u.coordinates.length===4&&!u.coordinates.some((S=>!Array.isArray(S)||S.length!==2||S.some((C=>typeof C!="number"))))||this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${v}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${v}`,null,'missing required property "coordinates"'))),u.animate&&typeof u.animate!="boolean"&&this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${v}`,null,'optional "animate" property must be a boolean value'))),u.canvas?typeof u.canvas=="string"||u.canvas instanceof s.window.HTMLCanvasElement||this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${v}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${v}`,null,'missing required property "canvas"'))),this.options=u,this.animate=u.animate===void 0||u.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof s.window.HTMLCanvasElement?this.options.canvas:s.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new s.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(v){this.map=v,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let v=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,v=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,v=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const u=this.map.painter.context;this.texture?(v||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new s.Texture(u,this.canvas,u.gl.RGBA,{premultiply:!0}),this._prepareData(u)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const v of[this.canvas.width,this.canvas.height])if(isNaN(v)||v<=0)return!0;return!1}},custom:class extends s.Evented{constructor(v,u,m,y){super(),this.id=v,this.type="custom",this._dataType="raster",this._dispatcher=m,this._implementation=u,this.setEventedParent(y),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new s.ErrorEvent(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new s.ErrorEvent(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new ut(this._implementation.bounds,this.minzoom,this.maxzoom)),u.update=this._update.bind(this),u.clearTiles=this._clearTiles.bind(this),u.coveringTiles=this._coveringTiles.bind(this),s.extend(this,s.pick(u,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return s.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(v){this._map=v,this._loaded=!1,this.fire(new s.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(v),this.load()}onRemove(v){this._implementation.onRemove&&this._implementation.onRemove(v)}hasTile(v){if(this._implementation.hasTile){const{x:u,y:m,z:y}=v.canonical;return this._implementation.hasTile({x:u,y:m,z:y})}return!this.tileBounds||this.tileBounds.contains(v.canonical)}loadTile(v,u){const{x:m,y,z:S}=v.tileID.canonical,C=new s.window.AbortController;v.request=Promise.resolve(this._implementation.loadTile({x:m,y,z:S},{signal:C.signal})).then((function(L){return delete v.request,v.aborted?(v.state="unloaded",u(null)):L===void 0?(v.state="errored",u(null)):L===null?(this.loadTileData(v,{width:this.tileSize,height:this.tileSize,data:null}),v.state="loaded",u(null)):(function(O){return O instanceof s.window.ImageData||O instanceof s.window.HTMLCanvasElement||O instanceof s.window.ImageBitmap||O instanceof s.window.HTMLImageElement})(L)?(this.loadTileData(v,L),v.state="loaded",void u(null)):(v.state="errored",u(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}).bind(this)).catch((L=>{L.code!==20&&(v.state="errored",u(L))})),v.request.cancel=()=>C.abort()}loadTileData(v,u){en.loadTileData(v,u,this._map.painter)}unloadTileData(v){en.unloadTileData(v,this._map.painter)}unloadTile(v,u){if(this.unloadTileData(v),this._implementation.unloadTile){const{x:m,y,z:S}=v.tileID.canonical;this._implementation.unloadTile({x:m,y,z:S})}u()}abortTile(v,u){v.request&&v.request.cancel&&(v.request.cancel(),delete v.request),u()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map((v=>({x:v.canonical.x,y:v.canonical.y,z:v.canonical.z})))}_clearTiles(){this._map.style._clearSource(this.id)}_update(){this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"}))}}},oi=function(v,u,m,y){const S=new jn[u.type](v,u,m,y);if(S.id!==v)throw new Error(`Expected Source id to be ${v} instead of ${S.id}`);return s.bindAll(["load","abort","unload","serialize","prepare"],S),S};function Xn(v,u){const m=s.identity([]);return s.scale(m,m,[.5*v.width,.5*-v.height,1]),s.translate(m,m,[1,-1,0]),s.multiply(m,m,v.calculateProjMatrix(u.toUnwrapped())),Float32Array.from(m)}function Mi(v,u,m,y,S,C,L,O=!1){const U=v.tilesIn(y,L,O);U.sort(is);const q=[];for(const le of U)q.push({wrappedTileID:le.tile.tileID.wrapped().key,queryResults:le.tile.queryRenderedFeatures(u,m,v._state,le,S,C,Xn(v.transform,le.tile.tileID),O)});const K=(function(le){const me={},xe={};for(const Se of le){const we=Se.queryResults,Ce=Se.wrappedTileID,ce=xe[Ce]=xe[Ce]||{};for(const ye in we){const Pe=we[ye],De=ce[ye]=ce[ye]||{},Ue=me[ye]=me[ye]||[];for(const je of Pe)De[je.featureIndex]||(De[je.featureIndex]=!0,Ue.push(je))}}return me})(q);for(const le in K)K[le].forEach((me=>{const xe=me.feature,Se=xe.layer;Se&&Se.type!=="background"&&Se.type!=="sky"&&(xe.source=Se.source,Se["source-layer"]&&(xe.sourceLayer=Se["source-layer"]),xe.state=xe.id!==void 0?v.getFeatureState(Se["source-layer"],xe.id):{})}));return K}function mr(v,u){const m=v.getRenderableIds().map((C=>v.getTileByID(C))),y=[],S={};for(let C=0;C<m.length;C++){const L=m[C],O=L.tileID.canonical.key;S[O]||(S[O]=!0,L.querySourceFeatures(y,u))}return y}function is(v,u){const m=v.tileID,y=u.tileID;return m.overscaledZ-y.overscaledZ||m.canonical.y-y.canonical.y||m.wrap-y.wrap||m.canonical.x-y.canonical.x}function wr(){return Ie.workerClass!=null?new Ie.workerClass:new s.window.Worker(Ie.workerUrl)}const jo="mapboxgl_preloaded_worker_pool";class rs{constructor(){this.active={}}acquire(u){if(!this.workers)for(this.workers=[];this.workers.length<rs.workerCount;)this.workers.push(new wr);return this.active[u]=!0,this.workers.slice()}release(u){delete this.active[u],this.numActive()===0&&(this.workers.forEach((m=>{m.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[jo]}numActive(){return Object.keys(this.active).length}}let Lr;function jr(){return Lr||(Lr=new rs),Lr}function Ts(v,u){const m={};for(const y in v)y!=="ref"&&(m[y]=v[y]);return s.refProperties.forEach((y=>{y in u&&(m[y]=u[y])})),m}function Bs(v){v=v.slice();const u=Object.create(null);for(let m=0;m<v.length;m++)u[v[m].id]=v[m];for(let m=0;m<v.length;m++)"ref"in v[m]&&(v[m]=Ts(v[m],u[v[m].ref]));return v}rs.workerCount=2;const qn={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function da(v,u,m){m.push({command:qn.addSource,args:[v,u[v]]})}function Ss(v,u,m){u.push({command:qn.removeSource,args:[v]}),m[v]=!0}function Wo(v,u,m,y){Ss(v,m,y),da(v,u,m)}function qa(v,u,m){let y;for(y in v[m])if(v[m].hasOwnProperty(y)&&y!=="data"&&!p(v[m][y],u[m][y]))return!1;for(y in u[m])if(u[m].hasOwnProperty(y)&&y!=="data"&&!p(v[m][y],u[m][y]))return!1;return!0}function So(v,u,m,y,S,C){let L;for(L in u=u||{},v=v||{})v.hasOwnProperty(L)&&(p(v[L],u[L])||m.push({command:C,args:[y,L,u[L],S]}));for(L in u)u.hasOwnProperty(L)&&!v.hasOwnProperty(L)&&(p(v[L],u[L])||m.push({command:C,args:[y,L,u[L],S]}))}function Eo(v){return v.id}function Ka(v,u){return v[u.id]=u,v}class hc{constructor(u,m){this.reset(u,m)}reset(u,m){this.points=u||[],this._distances=[0];for(let y=1;y<this.points.length;y++)this._distances[y]=this._distances[y-1]+this.points[y].dist(this.points[y-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(m||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(u){if(this.points.length===1)return this.points[0];u=s.clamp(u,0,1);let m=1,y=this._distances[m];const S=u*this.paddedLength+this.padding;for(;y<S&&m<this._distances.length;)y=this._distances[++m];const C=m-1,L=this._distances[C],O=y-L,U=O>0?(S-L)/O:0;return this.points[C].mult(1-U).add(this.points[m].mult(U))}}class Ho{constructor(u,m,y){const S=this.boxCells=[],C=this.circleCells=[];this.xCellCount=Math.ceil(u/y),this.yCellCount=Math.ceil(m/y);for(let L=0;L<this.xCellCount*this.yCellCount;L++)S.push([]),C.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=u,this.height=m,this.xScale=this.xCellCount/u,this.yScale=this.yCellCount/m,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(u,m,y,S,C){this._forEachCell(m,y,S,C,this._insertBoxCell,this.boxUid++),this.boxKeys.push(u),this.bboxes.push(m),this.bboxes.push(y),this.bboxes.push(S),this.bboxes.push(C)}insertCircle(u,m,y,S){this._forEachCell(m-S,y-S,m+S,y+S,this._insertCircleCell,this.circleUid++),this.circleKeys.push(u),this.circles.push(m),this.circles.push(y),this.circles.push(S)}_insertBoxCell(u,m,y,S,C,L){this.boxCells[C].push(L)}_insertCircleCell(u,m,y,S,C,L){this.circleCells[C].push(L)}_query(u,m,y,S,C,L){if(y<0||u>this.width||S<0||m>this.height)return!C&&[];const O=[];if(u<=0&&m<=0&&this.width<=y&&this.height<=S){if(C)return!0;for(let U=0;U<this.boxKeys.length;U++)O.push({key:this.boxKeys[U],x1:this.bboxes[4*U],y1:this.bboxes[4*U+1],x2:this.bboxes[4*U+2],y2:this.bboxes[4*U+3]});for(let U=0;U<this.circleKeys.length;U++){const q=this.circles[3*U],K=this.circles[3*U+1],le=this.circles[3*U+2];O.push({key:this.circleKeys[U],x1:q-le,y1:K-le,x2:q+le,y2:K+le})}return L?O.filter(L):O}return this._forEachCell(u,m,y,S,this._queryCell,O,{hitTest:C,seenUids:{box:{},circle:{}}},L),C?O.length>0:O}_queryCircle(u,m,y,S,C){const L=u-y,O=u+y,U=m-y,q=m+y;if(O<0||L>this.width||q<0||U>this.height)return!S&&[];const K=[];return this._forEachCell(L,U,O,q,this._queryCellCircle,K,{hitTest:S,circle:{x:u,y:m,radius:y},seenUids:{box:{},circle:{}}},C),S?K.length>0:K}query(u,m,y,S,C){return this._query(u,m,y,S,!1,C)}hitTest(u,m,y,S,C){return this._query(u,m,y,S,!0,C)}hitTestCircle(u,m,y,S){return this._queryCircle(u,m,y,!0,S)}_queryCell(u,m,y,S,C,L,O,U){const q=O.seenUids,K=this.boxCells[C];if(K!==null){const me=this.bboxes;for(const xe of K)if(!q.box[xe]){q.box[xe]=!0;const Se=4*xe;if(u<=me[Se+2]&&m<=me[Se+3]&&y>=me[Se+0]&&S>=me[Se+1]&&(!U||U(this.boxKeys[xe]))){if(O.hitTest)return L.push(!0),!0;L.push({key:this.boxKeys[xe],x1:me[Se],y1:me[Se+1],x2:me[Se+2],y2:me[Se+3]})}}}const le=this.circleCells[C];if(le!==null){const me=this.circles;for(const xe of le)if(!q.circle[xe]){q.circle[xe]=!0;const Se=3*xe;if(this._circleAndRectCollide(me[Se],me[Se+1],me[Se+2],u,m,y,S)&&(!U||U(this.circleKeys[xe]))){if(O.hitTest)return L.push(!0),!0;{const we=me[Se],Ce=me[Se+1],ce=me[Se+2];L.push({key:this.circleKeys[xe],x1:we-ce,y1:Ce-ce,x2:we+ce,y2:Ce+ce})}}}}}_queryCellCircle(u,m,y,S,C,L,O,U){const q=O.circle,K=O.seenUids,le=this.boxCells[C];if(le!==null){const xe=this.bboxes;for(const Se of le)if(!K.box[Se]){K.box[Se]=!0;const we=4*Se;if(this._circleAndRectCollide(q.x,q.y,q.radius,xe[we+0],xe[we+1],xe[we+2],xe[we+3])&&(!U||U(this.boxKeys[Se])))return L.push(!0),!0}}const me=this.circleCells[C];if(me!==null){const xe=this.circles;for(const Se of me)if(!K.circle[Se]){K.circle[Se]=!0;const we=3*Se;if(this._circlesCollide(xe[we],xe[we+1],xe[we+2],q.x,q.y,q.radius)&&(!U||U(this.circleKeys[Se])))return L.push(!0),!0}}}_forEachCell(u,m,y,S,C,L,O,U){const q=this._convertToXCellCoord(u),K=this._convertToYCellCoord(m),le=this._convertToXCellCoord(y),me=this._convertToYCellCoord(S);for(let xe=q;xe<=le;xe++)for(let Se=K;Se<=me;Se++)if(C.call(this,u,m,y,S,this.xCellCount*Se+xe,L,O,U))return}_convertToXCellCoord(u){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(u*this.xScale)))}_convertToYCellCoord(u){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(u*this.yScale)))}_circlesCollide(u,m,y,S,C,L){const O=S-u,U=C-m,q=y+L;return q*q>O*O+U*U}_circleAndRectCollide(u,m,y,S,C,L,O){const U=(L-S)/2,q=Math.abs(u-(S+U));if(q>U+y)return!1;const K=(O-C)/2,le=Math.abs(m-(C+K));if(le>K+y)return!1;if(q<=U||le<=K)return!0;const me=q-U,xe=le-K;return me*me+xe*xe<=y*y}}const Co={unknown:0,flipRequired:1,flipNotRequired:2},Fl=Math.tan(85*Math.PI/180);function Dt(v,u,m,y,S,C,L){const O=s.create();if(m)if(C.name==="globe"){const U=s.calculateGlobeLabelMatrix(S,u);s.multiply(O,O,U)}else{const U=X([],L);O[0]=U[0],O[1]=U[1],O[4]=U[2],O[5]=U[3],y||s.rotateZ(O,O,S.angle)}else s.multiply(O,S.labelPlaneMatrix,v);return O}function ha(v,u,m,y,S,C,L){const O=Dt(v,u,m,y,S,C,L);return C.name==="globe"&&m||(O[2]=O[6]=O[10]=O[14]=0),O}function zi(v,u,m,y,S,C,L){if(m){if(C.name==="globe"){const O=Dt(v,u,m,y,S,C,L);return s.invert(O,O),s.multiply(O,v,O),O}{const O=s.clone(v),U=s.identity([]);return U[0]=L[0],U[1]=L[1],U[4]=L[2],U[5]=L[3],s.multiply(O,O,U),y||s.rotateZ(O,O,-S.angle),O}}return S.glCoordMatrix}function Ki(v,u,m,y){const S=[v,u,m,1];m?s.transformMat4$1(S,S,y):ni(S,S,y);const C=S[3];return S[0]/=C,S[1]/=C,S[2]/=C,S}function zl(v,u){return Math.min(.5+v/u*.5,1.5)}function Fs(v,u){const m=v[0]/v[3],y=v[1]/v[3];return m>=-u[0]&&m<=u[0]&&y>=-u[1]&&y<=u[1]}function fc(v,u,m,y,S,C,L,O,U,q){const K=m.transform,le=y?v.textSizeData:v.iconSizeData,me=s.evaluateSizeForZoom(le,m.transform.zoom),xe=K.projection.name==="globe",Se=[256/m.width*2+1,256/m.height*2+1],we=y?v.text.dynamicLayoutVertexArray:v.icon.dynamicLayoutVertexArray;we.clear();let Ce=null;xe&&(Ce=y?v.text.globeExtVertexArray:v.icon.globeExtVertexArray);const ce=v.lineVertexArray,ye=y?v.text.placedSymbolArray:v.icon.placedSymbolArray,Pe=m.transform.width/m.transform.height;let De,Ue=!1;for(let je=0;je<ye.length;je++){const Ge=ye.get(je),{numGlyphs:ct,writingMode:at}=Ge;if(at!==s.WritingMode.vertical||Ue||De===s.WritingMode.horizontal||(Ue=!0),De=at,(Ge.hidden||at===s.WritingMode.vertical)&&!Ue){oo(ct,we);continue}Ue=!1;const gt=new s.Point(Ge.tileAnchorX,Ge.tileAnchorY);let{x:Wt,y:ht,z:Lt}=K.projection.projectTilePoint(gt.x,gt.y,q.canonical);if(U){const[Gn,Sn,Rn]=U(gt);Wt+=Gn,ht+=Sn,Lt+=Rn}const bt=[Wt,ht,Lt,1];if(s.transformMat4$1(bt,bt,u),!Fs(bt,Se)){oo(ct,we);continue}const Gt=zl(m.transform.cameraToCenterDistance,bt[3]),ft=s.evaluateSizeForFeature(le,me,Ge),St=L?ft/Gt:ft*Gt,$t=Ki(Wt,ht,Lt,S);if($t[3]<=0){oo(ct,we);continue}let Ft={};const Kt=L?null:U,Dn=dn(Ge,St,!1,O,u,S,C,v.glyphOffsetArray,ce,we,Ce,$t,gt,Ft,Pe,Kt,K.projection,q,L);Ue=Dn.useVertical,Kt&&Dn.needsFlipping&&(Ft={}),(Dn.notEnoughRoom||Ue||Dn.needsFlipping&&dn(Ge,St,!0,O,u,S,C,v.glyphOffsetArray,ce,we,Ce,$t,gt,Ft,Pe,Kt,K.projection,q,L).notEnoughRoom)&&oo(ct,we)}y?(v.text.dynamicLayoutVertexBuffer.updateData(we),Ce&&v.text.globeExtVertexBuffer.updateData(Ce)):(v.icon.dynamicLayoutVertexBuffer.updateData(we),Ce&&v.icon.globeExtVertexBuffer.updateData(Ce))}function Ji(v,u,m,y,S,C,L,O,U,q,K,le,me,xe,Se,we){const{lineStartIndex:Ce,glyphStartIndex:ce,segment:ye}=O,Pe=ce+O.numGlyphs,De=Ce+O.lineLength,Ue=u.getoffsetX(ce),je=u.getoffsetX(Pe-1),Ge=pr(v*Ue,m,y,S,C,L,ye,Ce,De,U,q,K,le,me,!0,xe,Se,we);if(!Ge)return null;const ct=pr(v*je,m,y,S,C,L,ye,Ce,De,U,q,K,le,me,!0,xe,Se,we);return ct?{first:Ge,last:ct}:null}function fa(v,u,m,y){return v===s.WritingMode.horizontal&&Math.abs(y)>Math.abs(m)?{useVertical:!0}:v===s.WritingMode.vertical?y>0?{needsFlipping:!0}:null:u!==Co.unknown&&(function(S,C){return S===0||Math.abs(C/S)>Fl})(m,y)?u===Co.flipRequired?{needsFlipping:!0}:null:m<0?{needsFlipping:!0}:null}function dn(v,u,m,y,S,C,L,O,U,q,K,le,me,xe,Se,we,Ce,ce,ye){const Pe=u/24,De=v.lineOffsetX*Pe,Ue=v.lineOffsetY*Pe,{lineStartIndex:je,glyphStartIndex:Ge,numGlyphs:ct,segment:at,writingMode:gt,flipState:Wt}=v,ht=je+v.lineLength,Lt=bt=>{if(K){const[$t,Ft,Kt]=bt.up,Dn=q.length;s.updateGlobeVertexNormal(K,Dn+0,$t,Ft,Kt),s.updateGlobeVertexNormal(K,Dn+1,$t,Ft,Kt),s.updateGlobeVertexNormal(K,Dn+2,$t,Ft,Kt),s.updateGlobeVertexNormal(K,Dn+3,$t,Ft,Kt)}const[Gt,ft,St]=bt.point;s.addDynamicAttributes(q,Gt,ft,St,bt.angle)};if(ct>1){const bt=Ji(Pe,O,De,Ue,m,le,me,v,U,C,xe,we,!1,Ce,ce,ye);if(!bt)return{notEnoughRoom:!0};if(y&&!m){let[Gt,ft,St]=bt.first.point,[$t,Ft,Kt]=bt.last.point;[Gt,ft]=Ki(Gt,ft,St,L),[$t,Ft]=Ki($t,Ft,Kt,L);const Dn=fa(gt,Wt,($t-Gt)*Se,Ft-ft);if(v.flipState=Dn&&Dn.needsFlipping?Co.flipRequired:Co.flipNotRequired,Dn)return Dn}Lt(bt.first);for(let Gt=Ge+1;Gt<Ge+ct-1;Gt++){const ft=pr(Pe*O.getoffsetX(Gt),De,Ue,m,le,me,at,je,ht,U,C,xe,we,!1,!1,Ce,ce,ye);if(!ft)return q.length-=4*(Gt-Ge),{notEnoughRoom:!0};Lt(ft)}Lt(bt.last)}else{if(y&&!m){const Gt=Ki(me.x,me.y,0,S),ft=je+at+1,St=new s.Point(U.getx(ft),U.gety(ft)),$t=Ki(St.x,St.y,0,S),Ft=$t[3]>0?$t:Yn(me,St,Gt,1,S,void 0,Ce,ce.canonical),Kt=fa(gt,Wt,(Ft[0]-Gt[0])*Se,Ft[1]-Gt[1]);if(v.flipState=Kt&&Kt.needsFlipping?Co.flipRequired:Co.flipNotRequired,Kt)return Kt}const bt=pr(Pe*O.getoffsetX(Ge),De,Ue,m,le,me,at,je,ht,U,C,xe,we,!1,!1,Ce,ce,ye);if(!bt)return{notEnoughRoom:!0};Lt(bt)}return{}}function Nn(v,u,m,y,S){const{x:C,y:L,z:O}=y.projectTilePoint(v.x,v.y,u);if(!S)return Ki(C,L,O,m);const[U,q,K]=S(v);return Ki(C+U,L+q,O+K,m)}function Yn(v,u,m,y,S,C,L,O){const U=Nn(v.sub(u)._unit()._add(v),O,S,L,C);return s.sub(U,m,U),s.normalize(U,U),s.scaleAndAdd(U,m,U,y)}function pr(v,u,m,y,S,C,L,O,U,q,K,le,me,xe,Se,we,Ce,ce){const ye=y?v-u:v+u;let Pe=ye>0?1:-1,De=0;y&&(Pe*=-1,De=Math.PI),Pe<0&&(De+=Math.PI);let Ue=O+L+(Pe>0?0:1)|0,je=S,Ge=S,ct=0,at=0;const gt=Math.abs(ye),Wt=[],ht=[];let Lt=C,bt=Lt;const Gt=()=>Yn(bt,Lt,Ge,gt-ct+1,K,me,we,Ce.canonical);for(;ct+at<=gt;){if(Ue+=Pe,Ue<O||Ue>=U)return null;if(Ge=je,bt=Lt,Wt.push(Ge),xe&&ht.push(bt),Lt=new s.Point(q.getx(Ue),q.gety(Ue)),je=le[Ue],!je){const Rn=Nn(Lt,Ce.canonical,K,we,me);je=Rn[3]>0?le[Ue]=Rn:Gt()}ct+=at,at=s.distance(Ge,je)}Se&&me&&(le[Ue]&&(je=Gt(),at=s.distance(Ge,je)),le[Ue]=je);const ft=(gt-ct)/at,St=Lt.sub(bt)._mult(ft)._add(bt),$t=s.sub([],je,Ge),Ft=s.scaleAndAdd([],Ge,$t,ft);let Kt=[0,0,1],Dn=$t[0],Gn=$t[1];if(ce&&(Kt=we.upVector(Ce.canonical,St.x,St.y),Kt[0]!==0||Kt[1]!==0||Kt[2]!==1)){const Rn=[Kt[2],0,-Kt[0]],pi=s.cross([],Kt,Rn);s.normalize(Rn,Rn),s.normalize(pi,pi),Dn=s.dot($t,Rn),Gn=s.dot($t,pi)}if(m){const Rn=s.cross([],Kt,$t);s.normalize(Rn,Rn),s.scaleAndAdd(Ft,Ft,Rn,m*Pe)}const Sn=De+Math.atan2(Gn,Dn);return Wt.push(Ft),xe&&ht.push(St),{point:Ft,angle:Sn,path:Wt,tilePath:ht,up:Kt}}function oo(v,u){const m=u.length,y=m+4*v;u.resize(y),u.float32.fill(-1/0,4*m,4*y)}function ni(v,u,m){const y=u[0],S=u[1];return v[0]=m[0]*y+m[4]*S+m[12],v[1]=m[1]*y+m[5]*S+m[13],v[3]=m[3]*y+m[7]*S+m[15],v}const Pr=100;class Go{constructor(u,m,y=new Ho(u.width+200,u.height+200,25),S=new Ho(u.width+200,u.height+200,25)){this.transform=u,this.grid=y,this.ignoredGrid=S,this.pitchfactor=Math.cos(u._pitch)*u.cameraToCenterDistance,this.screenRightBoundary=u.width+Pr,this.screenBottomBoundary=u.height+Pr,this.gridRightBoundary=u.width+200,this.gridBottomBoundary=u.height+200,this.fogState=m}placeCollisionBox(u,m,y,S,C,L,O,U){let q=y.projectedAnchorX,K=y.projectedAnchorY,le=y.projectedAnchorZ;const me=y.elevation,xe=y.tileID,Se=u.getProjection();if(me&&xe){const[je,Ge,ct]=Se.upVector(xe.canonical,y.tileAnchorX,y.tileAnchorY),at=Se.upVectorScale(xe.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;q+=je*me*at,K+=Ge*me*at,le+=ct*me*at}const we=this.projectAndGetPerspectiveRatio(O,q,K,le,y.tileID,Se.name==="globe"||!!me||this.transform.pitch>0,Se),Ce=L*we.perspectiveRatio,ce=(y.x1*m+S.x-y.padding)*Ce+we.point.x,ye=(y.y1*m+S.y-y.padding)*Ce+we.point.y,Pe=(y.x2*m+S.x+y.padding)*Ce+we.point.x,De=(y.y2*m+S.y+y.padding)*Ce+we.point.y,Ue=we.perspectiveRatio<=.55||we.occluded;return!this.isInsideGrid(ce,ye,Pe,De)||!C&&this.grid.hitTest(ce,ye,Pe,De,U)||Ue?{box:[],offscreen:!1,occluded:we.occluded}:{box:[ce,ye,Pe,De],offscreen:this.isOffscreen(ce,ye,Pe,De),occluded:!1}}placeCollisionCircles(u,m,y,S,C,L,O,U,q,K,le,me,xe,Se,we){const Ce=[],ce=this.transform.elevation,ye=u.getProjection(),Pe=ce?ce.getAtTileOffsetFunc(we,this.transform.center.lat,this.transform.worldSize,ye):null,De=new s.Point(y.tileAnchorX,y.tileAnchorY);let{x:Ue,y:je,z:Ge}=ye.projectTilePoint(De.x,De.y,we.canonical);if(Pe){const[St,$t,Ft]=Pe(De);Ue+=St,je+=$t,Ge+=Ft}const ct=ye.name==="globe",at=this.projectAndGetPerspectiveRatio(O,Ue,je,Ge,we,ct||!!ce||this.transform.pitch>0,ye),{perspectiveRatio:gt}=at,Wt=(le?L/gt:L*gt)/s.ONE_EM,ht=Ki(Ue,je,Ge,U),Lt=at.signedDistanceFromCamera>0?Ji(Wt,C,y.lineOffsetX*Wt,y.lineOffsetY*Wt,!1,ht,De,y,S,U,{},ce&&!le?Pe:null,le&&!!ce,ye,we,le):null;let bt=!1,Gt=!1,ft=!0;if(Lt&&!at.occluded){const St=.5*xe*gt+Se,$t=new s.Point(-100,-100),Ft=new s.Point(this.screenRightBoundary,this.screenBottomBoundary),Kt=new hc,{first:Dn,last:Gn}=Lt,Sn=Dn.path.length;let Rn=[];for(let In=Sn-1;In>=1;In--)Rn.push(Dn.path[In]);for(let In=1;In<Gn.path.length;In++)Rn.push(Gn.path[In]);const pi=2.5*St;q&&(Rn=Rn.map((([In,Di,$i],Xi)=>(Pe&&!ct&&($i=Pe(Xi<Sn-1?Dn.tilePath[Sn-1-Xi]:Gn.tilePath[Xi-Sn+2])[2]),Ki(In,Di,$i,q)))),Rn.some((In=>In[3]<=0))&&(Rn=[]));let mi=[];if(Rn.length>0){let In=1/0,Di=-1/0,$i=1/0,Xi=-1/0;for(const ji of Rn)In=Math.min(In,ji[0]),$i=Math.min($i,ji[1]),Di=Math.max(Di,ji[0]),Xi=Math.max(Xi,ji[1]);Di>=$t.x&&In<=Ft.x&&Xi>=$t.y&&$i<=Ft.y&&(mi=[Rn.map((ji=>new s.Point(ji[0],ji[1])))],(In<$t.x||Di>Ft.x||$i<$t.y||Xi>Ft.y)&&(mi=s.clipLine(mi,$t.x,$t.y,Ft.x,Ft.y)))}for(const In of mi){Kt.reset(In,.25*St);let Di=0;Di=Kt.length<=.5*St?1:Math.ceil(Kt.paddedLength/pi)+1;for(let $i=0;$i<Di;$i++){const Xi=$i/Math.max(Di-1,1),ji=Kt.lerp(Xi),Us=ji.x+Pr,Is=ji.y+Pr;Ce.push(Us,Is,St,0);const xa=Us-St,Ys=Is-St,er=Us+St,Wi=Is+St;if(ft=ft&&this.isOffscreen(xa,Ys,er,Wi),Gt=Gt||this.isInsideGrid(xa,Ys,er,Wi),!m&&this.grid.hitTestCircle(Us,Is,St,me)&&(bt=!0,!K))return{circles:[],offscreen:!1,collisionDetected:bt,occluded:!1}}}}return{circles:!K&&bt||!Gt?[]:Ce,offscreen:ft,collisionDetected:bt,occluded:at.occluded}}queryRenderedSymbols(u){if(u.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const m=[];let y=1/0,S=1/0,C=-1/0,L=-1/0;for(const K of u){const le=new s.Point(K.x+Pr,K.y+Pr);y=Math.min(y,le.x),S=Math.min(S,le.y),C=Math.max(C,le.x),L=Math.max(L,le.y),m.push(le)}const O=this.grid.query(y,S,C,L).concat(this.ignoredGrid.query(y,S,C,L)),U={},q={};for(const K of O){const le=K.key;if(U[le.bucketInstanceId]===void 0&&(U[le.bucketInstanceId]={}),U[le.bucketInstanceId][le.featureIndex])continue;const me=[new s.Point(K.x1,K.y1),new s.Point(K.x2,K.y1),new s.Point(K.x2,K.y2),new s.Point(K.x1,K.y2)];s.polygonIntersectsPolygon(m,me)&&(U[le.bucketInstanceId][le.featureIndex]=!0,q[le.bucketInstanceId]===void 0&&(q[le.bucketInstanceId]=[]),q[le.bucketInstanceId].push(le.featureIndex))}return q}insertCollisionBox(u,m,y,S,C){(m?this.ignoredGrid:this.grid).insert({bucketInstanceId:y,featureIndex:S,collisionGroupID:C},u[0],u[1],u[2],u[3])}insertCollisionCircles(u,m,y,S,C){const L=m?this.ignoredGrid:this.grid,O={bucketInstanceId:y,featureIndex:S,collisionGroupID:C};for(let U=0;U<u.length;U+=4)L.insertCircle(O,u[U],u[U+1],u[U+2])}projectAndGetPerspectiveRatio(u,m,y,S,C,L,O){const U=[m,y,S,1];let q=!1;S||this.transform.pitch>0?(s.transformMat4$1(U,U,u),this.fogState&&C&&O.name!=="globe"&&(q=(function(me,xe,Se,we,Ce,ce){const ye=ce.calculateFogTileMatrix(Ce),Pe=[xe,Se,we];return s.transformMat4(Pe,Pe,ye),nt(me,Pe,ce.pitch,ce._fov)})(this.fogState,m,y,S,C.toUnwrapped(),this.transform)>.9)):ni(U,U,u);const K=U[3];return{point:new s.Point((U[0]/K+1)/2*this.transform.width+Pr,(-U[1]/K+1)/2*this.transform.height+Pr),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(O)/K*.5,1.5),signedDistanceFromCamera:K,occluded:L&&U[2]>K||q}}isOffscreen(u,m,y,S){return y<Pr||u>=this.screenRightBoundary||S<Pr||m>this.screenBottomBoundary}isInsideGrid(u,m,y,S){return y>=0&&u<this.gridRightBoundary&&S>=0&&m<this.gridBottomBoundary}getViewportMatrix(){const u=s.identity([]);return s.translate(u,u,[-100,-100,0]),u}}function Ks(v,u,m){const y=u.createTileMatrix(v,v.worldSize,m.toUnwrapped());return s.multiply(new Float32Array(16),v.projMatrix,y)}function kr(v,u,m){if(u.projection.name===m.projection.name)return v.projMatrix;const y=m.clone();return y.setProjection(u.projection),Ks(y,u.getProjection(),v)}function Ni(v,u,m){return u.name===m.projection.name?v.projMatrix:Ks(m,u,v)}class yu{constructor(u,m,y,S){this.opacity=u?Math.max(0,Math.min(1,u.opacity+(u.placed?m:-m))):S&&y?1:0,this.placed=y}isHidden(){return this.opacity===0&&!this.placed}}class zs{constructor(u,m,y,S,C,L=!1){this.text=new yu(u?u.text:null,m,y,C),this.icon=new yu(u?u.icon:null,m,S,C),this.clipped=L}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class ul{constructor(u,m,y,S=!1){this.text=u,this.icon=m,this.skipFade=y,this.clipped=S}}class Nl{constructor(){this.invProjMatrix=s.create(),this.viewportMatrix=s.create(),this.circles=[]}}class Es{constructor(u,m,y,S,C){this.bucketInstanceId=u,this.featureIndex=m,this.sourceLayerIndex=y,this.bucketIndex=S,this.tileID=C}}class Oh{constructor(u){this.crossSourceCollisions=u,this.maxGroupID=0,this.collisionGroups={}}get(u){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[u]){const m=++this.maxGroupID;this.collisionGroups[u]={ID:m,predicate:y=>y.collisionGroupID===m}}return this.collisionGroups[u]}}function ko(v,u,m,y,S){const{horizontalAlign:C,verticalAlign:L}=s.getAnchorAlignment(v),O=-(C-.5)*u,U=-(L-.5)*m,q=s.evaluateVariableOffset(v,y);return new s.Point(O+q[0]*S,U+q[1]*S)}function dl(v,u,m,y,S){const C=new s.Point(v,u);return m&&C._rotate(y?S:-S),C}class Io{constructor(u,m,y,S,C){this.transform=u.clone(),this.projection=u.projection.name,this.collisionIndex=new Go(this.transform,C),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=m,this.retainedQueryData={},this.collisionGroups=new Oh(y),this.collisionCircleArrays={},this.prevPlacement=S,S&&(S.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(u,m,y,S){const C=y.getBucket(m),L=y.latestFeatureIndex;if(!C||!L||m.id!==C.layerIds[0])return;const O=C.layers[0].layout,U=y.collisionBoxArray,q=Math.pow(2,this.transform.zoom-y.tileID.overscaledZ),K=y.tileSize/s.EXTENT,le=y.tileID.toUnwrapped();this.transform.setProjection(C.projection);const me=(xe=y.tileID,Se=C.getProjection(),we=this.transform,Se.name===this.projection?we.calculateProjMatrix(xe.toUnwrapped()):Ks(we,Se,xe));var xe,Se,we;const Ce=O.get("text-pitch-alignment")==="map",ce=O.get("text-rotation-alignment")==="map";m.compileFilter();const ye=m.dynamicFilter(),Pe=m.dynamicFilterNeedsFeature(),De=this.transform.calculatePixelsToTileUnitsMatrix(y),Ue=ha(me,y.tileID.canonical,Ce,ce,this.transform,C.getProjection(),De);let je=null;if(Ce){const at=zi(me,y.tileID.canonical,Ce,ce,this.transform,C.getProjection(),De);je=s.multiply([],this.transform.labelPlaneMatrix,at)}let Ge=null;ye&&y.latestFeatureIndex&&(Ge={unwrappedTileID:le,dynamicFilter:ye,dynamicFilterNeedsFeature:Pe,featureIndex:y.latestFeatureIndex}),this.retainedQueryData[C.bucketInstanceId]=new Es(C.bucketInstanceId,L,C.sourceLayerIndex,C.index,y.tileID);const ct={bucket:C,layout:O,posMatrix:me,textLabelPlaneMatrix:Ue,labelToScreenMatrix:je,clippingData:Ge,scale:q,textPixelRatio:K,holdingForFade:y.holdingForFade(),collisionBoxArray:U,partiallyEvaluatedTextSize:s.evaluateSizeForZoom(C.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:s.evaluateSizeForZoom(C.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(C.sourceID)};if(S)for(const at of C.sortKeyRanges){const{sortKey:gt,symbolInstanceStart:Wt,symbolInstanceEnd:ht}=at;u.push({sortKey:gt,symbolInstanceStart:Wt,symbolInstanceEnd:ht,parameters:ct})}else u.push({symbolInstanceStart:0,symbolInstanceEnd:C.symbolInstances.length,parameters:ct})}attemptAnchorPlacement(u,m,y,S,C,L,O,U,q,K,le,me,xe,Se,we,Ce,ce,ye){const{textOffset0:Pe,textOffset1:De,crossTileID:Ue}=me,je=[Pe,De],Ge=ko(u,y,S,je,C),ct=this.collisionIndex.placeCollisionBox(Se,C,m,dl(Ge.x,Ge.y,L,O,this.transform.angle),le,U,q,K.predicate);if(Ce){const at=Se.getSymbolInstanceIconSize(ye,this.transform.zoom,me.placedIconSymbolIndex);if(this.collisionIndex.placeCollisionBox(Se,at,Ce,dl(Ge.x,Ge.y,L,O,this.transform.angle),le,U,q,K.predicate).box.length===0)return}if(ct.box.length>0){let at;return this.prevPlacement&&this.prevPlacement.variableOffsets[Ue]&&this.prevPlacement.placements[Ue]&&this.prevPlacement.placements[Ue].text&&(at=this.prevPlacement.variableOffsets[Ue].anchor),this.variableOffsets[Ue]={textOffset:je,width:y,height:S,anchor:u,textScale:C,prevAnchor:at},this.markUsedJustification(Se,u,me,we),Se.allowVerticalPlacement&&(this.markUsedOrientation(Se,we,me),this.placedOrientations[Ue]=we),{shift:Ge,placedGlyphBoxes:ct}}}placeLayerBucketPart(u,m,y,S){const{bucket:C,layout:L,posMatrix:O,textLabelPlaneMatrix:U,labelToScreenMatrix:q,clippingData:K,textPixelRatio:le,holdingForFade:me,collisionBoxArray:xe,partiallyEvaluatedTextSize:Se,partiallyEvaluatedIconSize:we,collisionGroup:Ce}=u.parameters,ce=L.get("text-optional"),ye=L.get("icon-optional"),Pe=L.get("text-allow-overlap"),De=L.get("icon-allow-overlap"),Ue=L.get("text-rotation-alignment")==="map",je=L.get("text-pitch-alignment")==="map",Ge=L.get("icon-text-fit")!=="none",ct=L.get("symbol-z-order")==="viewport-y";this.transform.setProjection(C.projection);let at=Pe&&(De||!C.hasIconData()||ye),gt=De&&(Pe||!C.hasTextData()||ce);!C.collisionArrays&&xe&&C.deserializeCollisionBoxes(xe),y&&S&&C.updateCollisionDebugBuffers(this.transform.zoom,xe);const Wt=(ht,Lt,bt)=>{const{crossTileID:Gt,numVerticalGlyphVertices:ft}=ht;if(K){const er={zoom:this.transform.zoom,pitch:this.transform.pitch};let Wi=null;if(K.dynamicFilterNeedsFeature){const Ci=this.retainedQueryData[C.bucketInstanceId];Wi=K.featureIndex.loadFeature({featureIndex:ht.featureIndex,bucketIndex:Ci.bucketIndex,sourceLayerIndex:Ci.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,K.dynamicFilter)(er,Wi,this.retainedQueryData[C.bucketInstanceId].tileID.canonical,new s.Point(ht.tileAnchorX,ht.tileAnchorY),this.transform.calculateDistanceTileData(K.unwrappedTileID)))return this.placements[Gt]=new ul(!1,!1,!1,!0),void m.add(Gt)}if(m.has(Gt))return;if(me)return void(this.placements[Gt]=new ul(!1,!1,!1));let St=!1,$t=!1,Ft=!0,Kt=!1,Dn=!1,Gn=null,Sn={box:null,offscreen:null,occluded:null},Rn={box:null},pi=null,mi=null,In=null,Di=0,$i=0,Xi=0;bt.textFeatureIndex?Di=bt.textFeatureIndex:ht.useRuntimeCollisionCircles&&(Di=ht.featureIndex),bt.verticalTextFeatureIndex&&($i=bt.verticalTextFeatureIndex);const ji=er=>{er.tileID=this.retainedQueryData[C.bucketInstanceId].tileID;const Wi=this.transform.elevation;(Wi||er.elevation)&&(er.elevation=Wi?Wi.getAtTileOffset(er.tileID,er.tileAnchorX,er.tileAnchorY):0)},Us=bt.textBox;if(Us){ji(Us);const er=Ci=>{let Or=s.WritingMode.horizontal;if(C.allowVerticalPlacement&&!Ci&&this.prevPlacement){const Zs=this.prevPlacement.placedOrientations[Gt];Zs&&(this.placedOrientations[Gt]=Zs,Or=Zs,this.markUsedOrientation(C,Or,ht))}return Or},Wi=(Ci,Or)=>{if(C.allowVerticalPlacement&&ft>0&&bt.verticalTextBox){for(const Zs of C.writingModes)if(Zs===s.WritingMode.vertical?(Sn=Or(),Rn=Sn):Sn=Ci(),Sn&&Sn.box&&Sn.box.length)break}else Sn=Ci()};if(L.get("text-variable-anchor")){let Ci=L.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[Gt]){const sr=this.prevPlacement.variableOffsets[Gt];Ci.indexOf(sr.anchor)>0&&(Ci=Ci.filter((co=>co!==sr.anchor)),Ci.unshift(sr.anchor))}const Or=(sr,co,Fd)=>{const Jc=C.getSymbolInstanceTextSize(Se,ht,this.transform.zoom,Lt),zd=(sr.x2-sr.x1)*Jc+2*sr.padding,nl=(sr.y2-sr.y1)*Jc+2*sr.padding,Gl=Ge&&!De?co:null;Gl&&ji(Gl);let Nd={box:[],offscreen:!1,occluded:!1};const Og=Pe?2*Ci.length:Ci.length;for(let $m=0;$m<Og;++$m){const $_=this.attemptAnchorPlacement(Ci[$m%Ci.length],sr,zd,nl,Jc,Ue,je,le,O,Ce,$m>=Ci.length,ht,Lt,C,Fd,Gl,Se,we);if($_&&(Nd=$_.placedGlyphBoxes,Nd&&Nd.box&&Nd.box.length)){St=!0,Gn=$_.shift;break}}return Nd};Wi((()=>Or(Us,bt.iconBox,s.WritingMode.horizontal)),(()=>{const sr=bt.verticalTextBox;return sr&&ji(sr),C.allowVerticalPlacement&&!(Sn&&Sn.box&&Sn.box.length)&&ft>0&&sr?Or(sr,bt.verticalIconBox,s.WritingMode.vertical):{box:null,offscreen:null,occluded:null}})),Sn&&(St=Sn.box,Ft=Sn.offscreen,Kt=Sn.occluded);const Zs=er(!(!Sn||!Sn.box));if(!St&&this.prevPlacement){const sr=this.prevPlacement.variableOffsets[Gt];sr&&(this.variableOffsets[Gt]=sr,this.markUsedJustification(C,sr.anchor,ht,Zs))}}else{const Ci=(Or,Zs)=>{const sr=C.getSymbolInstanceTextSize(Se,ht,this.transform.zoom,Lt),co=this.collisionIndex.placeCollisionBox(C,sr,Or,new s.Point(0,0),Pe,le,O,Ce.predicate);return co&&co.box&&co.box.length&&(this.markUsedOrientation(C,Zs,ht),this.placedOrientations[Gt]=Zs),co};Wi((()=>Ci(Us,s.WritingMode.horizontal)),(()=>{const Or=bt.verticalTextBox;return C.allowVerticalPlacement&&ft>0&&Or?(ji(Or),Ci(Or,s.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}})),er(!!(Sn&&Sn.box&&Sn.box.length))}}if(pi=Sn,St=pi&&pi.box&&pi.box.length>0,Ft=pi&&pi.offscreen,Kt=pi&&pi.occluded,ht.useRuntimeCollisionCircles){const er=C.text.placedSymbolArray.get(ht.centerJustifiedTextSymbolIndex>=0?ht.centerJustifiedTextSymbolIndex:ht.verticalPlacedTextSymbolIndex),Wi=s.evaluateSizeForFeature(C.textSizeData,Se,er),Ci=L.get("text-padding");mi=this.collisionIndex.placeCollisionCircles(C,Pe,er,C.lineVertexArray,C.glyphOffsetArray,Wi,O,U,q,y,je,Ce.predicate,ht.collisionCircleDiameter*Wi/s.ONE_EM,Ci,this.retainedQueryData[C.bucketInstanceId].tileID),St=Pe||mi.circles.length>0&&!mi.collisionDetected,Ft=Ft&&mi.offscreen,Kt=mi.occluded}if(bt.iconFeatureIndex&&(Xi=bt.iconFeatureIndex),bt.iconBox){const er=Wi=>{ji(Wi);const Ci=Ge&&Gn?dl(Gn.x,Gn.y,Ue,je,this.transform.angle):new s.Point(0,0),Or=C.getSymbolInstanceIconSize(we,this.transform.zoom,ht.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(C,Or,Wi,Ci,De,le,O,Ce.predicate)};Rn&&Rn.box&&Rn.box.length&&bt.verticalIconBox?(In=er(bt.verticalIconBox),$t=In.box.length>0):(In=er(bt.iconBox),$t=In.box.length>0),Ft=Ft&&In.offscreen,Dn=In.occluded}const Is=ce||ht.numHorizontalGlyphVertices===0&&ft===0,xa=ye||ht.numIconVertices===0;if(Is||xa?xa?Is||($t=$t&&St):St=$t&&St:$t=St=$t&&St,St&&pi&&pi.box&&this.collisionIndex.insertCollisionBox(pi.box,L.get("text-ignore-placement"),C.bucketInstanceId,Rn&&Rn.box&&$i?$i:Di,Ce.ID),$t&&In&&this.collisionIndex.insertCollisionBox(In.box,L.get("icon-ignore-placement"),C.bucketInstanceId,Xi,Ce.ID),mi&&(St&&this.collisionIndex.insertCollisionCircles(mi.circles,L.get("text-ignore-placement"),C.bucketInstanceId,Di,Ce.ID),y)){const er=C.bucketInstanceId;let Wi=this.collisionCircleArrays[er];Wi===void 0&&(Wi=this.collisionCircleArrays[er]=new Nl);for(let Ci=0;Ci<mi.circles.length;Ci+=4)Wi.circles.push(mi.circles[Ci+0]),Wi.circles.push(mi.circles[Ci+1]),Wi.circles.push(mi.circles[Ci+2]),Wi.circles.push(mi.collisionDetected?1:0)}const Ys=C.projection.name!=="globe";at=at&&(Ys||!Kt),gt=gt&&(Ys||!Dn),this.placements[Gt]=new ul(St||at,$t||gt,Ft||C.justReloaded),m.add(Gt)};if(ct){const ht=C.getSortedSymbolIndexes(this.transform.angle);for(let Lt=ht.length-1;Lt>=0;--Lt){const bt=ht[Lt];Wt(C.symbolInstances.get(bt),bt,C.collisionArrays[bt])}}else for(let ht=u.symbolInstanceStart;ht<u.symbolInstanceEnd;ht++)Wt(C.symbolInstances.get(ht),ht,C.collisionArrays[ht]);if(y&&C.bucketInstanceId in this.collisionCircleArrays){const ht=this.collisionCircleArrays[C.bucketInstanceId];s.invert(ht.invProjMatrix,O),ht.viewportMatrix=this.collisionIndex.getViewportMatrix()}C.justReloaded=!1}markUsedJustification(u,m,y,S){const{leftJustifiedTextSymbolIndex:C,centerJustifiedTextSymbolIndex:L,rightJustifiedTextSymbolIndex:O,verticalPlacedTextSymbolIndex:U,crossTileID:q}=y,K=s.getAnchorJustification(m),le=S===s.WritingMode.vertical?U:K==="left"?C:K==="center"?L:K==="right"?O:-1;C>=0&&(u.text.placedSymbolArray.get(C).crossTileID=le>=0&&C!==le?0:q),L>=0&&(u.text.placedSymbolArray.get(L).crossTileID=le>=0&&L!==le?0:q),O>=0&&(u.text.placedSymbolArray.get(O).crossTileID=le>=0&&O!==le?0:q),U>=0&&(u.text.placedSymbolArray.get(U).crossTileID=le>=0&&U!==le?0:q)}markUsedOrientation(u,m,y){const S=m===s.WritingMode.horizontal||m===s.WritingMode.horizontalOnly?m:0,C=m===s.WritingMode.vertical?m:0,{leftJustifiedTextSymbolIndex:L,centerJustifiedTextSymbolIndex:O,rightJustifiedTextSymbolIndex:U,verticalPlacedTextSymbolIndex:q}=y,K=u.text.placedSymbolArray;L>=0&&(K.get(L).placedOrientation=S),O>=0&&(K.get(O).placedOrientation=S),U>=0&&(K.get(U).placedOrientation=S),q>=0&&(K.get(q).placedOrientation=C)}commit(u){this.commitTime=u,this.zoomAtLastRecencyCheck=this.transform.zoom;const m=this.prevPlacement;let y=!1;this.prevZoomAdjustment=m?m.zoomAdjustment(this.transform.zoom):0;const S=m?m.symbolFadeChange(u):1,C=m?m.opacities:{},L=m?m.variableOffsets:{},O=m?m.placedOrientations:{};for(const U in this.placements){const q=this.placements[U],K=C[U];K?(this.opacities[U]=new zs(K,S,q.text,q.icon,null,q.clipped),y=y||q.text!==K.text.placed||q.icon!==K.icon.placed):(this.opacities[U]=new zs(null,S,q.text,q.icon,q.skipFade,q.clipped),y=y||q.text||q.icon)}for(const U in C){const q=C[U];if(!this.opacities[U]){const K=new zs(q,S,!1,!1);K.isHidden()||(this.opacities[U]=K,y=y||q.text.placed||q.icon.placed)}}for(const U in L)this.variableOffsets[U]||!this.opacities[U]||this.opacities[U].isHidden()||(this.variableOffsets[U]=L[U]);for(const U in O)this.placedOrientations[U]||!this.opacities[U]||this.opacities[U].isHidden()||(this.placedOrientations[U]=O[U]);y?this.lastPlacementChangeTime=u:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=m?m.lastPlacementChangeTime:u)}updateLayerOpacities(u,m){const y=new Set;for(const S of m){const C=S.getBucket(u);C&&S.latestFeatureIndex&&u.id===C.layerIds[0]&&this.updateBucketOpacities(C,y,S.collisionBoxArray)}}updateBucketOpacities(u,m,y){u.hasTextData()&&u.text.opacityVertexArray.clear(),u.hasIconData()&&u.icon.opacityVertexArray.clear(),u.hasIconCollisionBoxData()&&u.iconCollisionBox.collisionVertexArray.clear(),u.hasTextCollisionBoxData()&&u.textCollisionBox.collisionVertexArray.clear();const S=u.layers[0].layout,C=!!u.layers[0].dynamicFilter(),L=new zs(null,0,!1,!1,!0),O=S.get("text-allow-overlap"),U=S.get("icon-allow-overlap"),q=S.get("text-variable-anchor"),K=S.get("text-rotation-alignment")==="map",le=S.get("text-pitch-alignment")==="map",me=S.get("icon-text-fit")!=="none",xe=new zs(null,0,O&&(U||!u.hasIconData()||S.get("icon-optional")),U&&(O||!u.hasTextData()||S.get("text-optional")),!0);!u.collisionArrays&&y&&(u.hasIconCollisionBoxData()||u.hasTextCollisionBoxData())&&u.deserializeCollisionBoxes(y);const Se=(Ce,ce,ye)=>{for(let Pe=0;Pe<ce/4;Pe++)Ce.opacityVertexArray.emplaceBack(ye)};let we=0;for(let Ce=0;Ce<u.symbolInstances.length;Ce++){const ce=u.symbolInstances.get(Ce),{numHorizontalGlyphVertices:ye,numVerticalGlyphVertices:Pe,crossTileID:De,numIconVertices:Ue}=ce,je=m.has(De);let Ge=this.opacities[De];je?Ge=L:Ge||(Ge=xe,this.opacities[De]=Ge),m.add(De);const ct=ye>0||Pe>0,at=Ue>0,gt=this.placedOrientations[De],Wt=gt===s.WritingMode.vertical,ht=gt===s.WritingMode.horizontal||gt===s.WritingMode.horizontalOnly;if(!ct&&!at||Ge.isHidden()||we++,ct){const Lt=Qi(Ge.text);Se(u.text,ye,Wt?gr:Lt),Se(u.text,Pe,ht?gr:Lt);const bt=Ge.text.isHidden(),{leftJustifiedTextSymbolIndex:Gt,centerJustifiedTextSymbolIndex:ft,rightJustifiedTextSymbolIndex:St,verticalPlacedTextSymbolIndex:$t}=ce,Ft=u.text.placedSymbolArray,Kt=bt||Wt?1:0;Gt>=0&&(Ft.get(Gt).hidden=Kt),ft>=0&&(Ft.get(ft).hidden=Kt),St>=0&&(Ft.get(St).hidden=Kt),$t>=0&&(Ft.get($t).hidden=bt||ht?1:0);const Dn=this.variableOffsets[De];Dn&&this.markUsedJustification(u,Dn.anchor,ce,gt);const Gn=this.placedOrientations[De];Gn&&(this.markUsedJustification(u,"left",ce,Gn),this.markUsedOrientation(u,Gn,ce))}if(at){const Lt=Qi(Ge.icon),{placedIconSymbolIndex:bt,verticalPlacedIconSymbolIndex:Gt}=ce,ft=u.icon.placedSymbolArray,St=Ge.icon.isHidden()?1:0;bt>=0&&(Se(u.icon,Ue,Wt?gr:Lt),ft.get(bt).hidden=St),Gt>=0&&(Se(u.icon,ce.numVerticalIconVertices,ht?gr:Lt),ft.get(Gt).hidden=St)}if(u.hasIconCollisionBoxData()||u.hasTextCollisionBoxData()){const Lt=u.collisionArrays[Ce];if(Lt){let bt=new s.Point(0,0),Gt=!0;if(Lt.textBox||Lt.verticalTextBox){if(q){const St=this.variableOffsets[De];St?(bt=ko(St.anchor,St.width,St.height,St.textOffset,St.textScale),K&&bt._rotate(le?this.transform.angle:-this.transform.angle)):Gt=!1}C&&(Gt=!Ge.clipped),Lt.textBox&&ma(u.textCollisionBox.collisionVertexArray,Ge.text.placed,!Gt||Wt,bt.x,bt.y),Lt.verticalTextBox&&ma(u.textCollisionBox.collisionVertexArray,Ge.text.placed,!Gt||ht,bt.x,bt.y)}const ft=Gt&&!!(!ht&&Lt.verticalIconBox);Lt.iconBox&&ma(u.iconCollisionBox.collisionVertexArray,Ge.icon.placed,ft,me?bt.x:0,me?bt.y:0),Lt.verticalIconBox&&ma(u.iconCollisionBox.collisionVertexArray,Ge.icon.placed,!ft,me?bt.x:0,me?bt.y:0)}}}if(u.fullyClipped=we===0,u.sortFeatures(this.transform.angle),this.retainedQueryData[u.bucketInstanceId]&&(this.retainedQueryData[u.bucketInstanceId].featureSortOrder=u.featureSortOrder),u.hasTextData()&&u.text.opacityVertexBuffer&&u.text.opacityVertexBuffer.updateData(u.text.opacityVertexArray),u.hasIconData()&&u.icon.opacityVertexBuffer&&u.icon.opacityVertexBuffer.updateData(u.icon.opacityVertexArray),u.hasIconCollisionBoxData()&&u.iconCollisionBox.collisionVertexBuffer&&u.iconCollisionBox.collisionVertexBuffer.updateData(u.iconCollisionBox.collisionVertexArray),u.hasTextCollisionBoxData()&&u.textCollisionBox.collisionVertexBuffer&&u.textCollisionBox.collisionVertexBuffer.updateData(u.textCollisionBox.collisionVertexArray),u.bucketInstanceId in this.collisionCircleArrays){const Ce=this.collisionCircleArrays[u.bucketInstanceId];u.placementInvProjMatrix=Ce.invProjMatrix,u.placementViewportMatrix=Ce.viewportMatrix,u.collisionCircleArray=Ce.circles,delete this.collisionCircleArrays[u.bucketInstanceId]}}symbolFadeChange(u){return this.fadeDuration===0?1:(u-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(u){return Math.max(0,(this.transform.zoom-u)/1.5)}hasTransitions(u){return this.stale||u-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(u,m){const y=this.zoomAtLastRecencyCheck===m?1-this.zoomAdjustment(m):1;return this.zoomAtLastRecencyCheck=m,this.commitTime+this.fadeDuration*y>u}setStale(){this.stale=!0}}function ma(v,u,m,y,S){v.emplaceBack(u?1:0,m?1:0,y||0,S||0),v.emplaceBack(u?1:0,m?1:0,y||0,S||0),v.emplaceBack(u?1:0,m?1:0,y||0,S||0),v.emplaceBack(u?1:0,m?1:0,y||0,S||0)}const ss=Math.pow(2,25),Ui=Math.pow(2,24),$c=Math.pow(2,17),hl=Math.pow(2,16),Xr=Math.pow(2,9),os=Math.pow(2,8),bu=Math.pow(2,1);function Qi(v){if(v.opacity===0&&!v.placed)return 0;if(v.opacity===1&&v.placed)return 4294967295;const u=v.placed?1:0,m=Math.floor(127*v.opacity);return m*ss+u*Ui+m*$c+u*hl+m*Xr+u*os+m*bu+u}const gr=0;class fl{constructor(u){this._sortAcrossTiles=u.layout.get("symbol-z-order")!=="viewport-y"&&u.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(u,m,y,S,C){const L=this._bucketParts;for(;this._currentTileIndex<u.length;)if(m.getBucketParts(L,S,u[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,C())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,L.sort(((O,U)=>O.sortKey-U.sortKey)));this._currentPartIndex<L.length;){const O=L[this._currentPartIndex];if(m.placeLayerBucketPart(O,this._seenCrossTileIDs,y,O.symbolInstanceStart===0),this._currentPartIndex++,C())return!0}return!1}}class mc{constructor(u,m,y,S,C,L,O,U){this.placement=new Io(u,C,L,O,U),this._currentPlacementIndex=m.length-1,this._forceFullPlacement=y,this._showCollisionBoxes=S,this._done=!1}isDone(){return this._done}continuePlacement(u,m,y){const S=s.exported.now(),C=()=>{const L=s.exported.now()-S;return!this._forceFullPlacement&&L>2};for(;this._currentPlacementIndex>=0;){const L=m[u[this._currentPlacementIndex]],O=this.placement.collisionIndex.transform.zoom;if(L.type==="symbol"&&(!L.minzoom||L.minzoom<=O)&&(!L.maxzoom||L.maxzoom>O)){if(this._inProgressLayer||(this._inProgressLayer=new fl(L)),this._inProgressLayer.continuePlacement(y[L.source],this.placement,this._showCollisionBoxes,L,C))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(u){return this.placement.commit(u),this.placement}}const ml=512/s.EXTENT/2;class Rr{constructor(u,m,y){this.tileID=u,this.bucketInstanceId=y,this.index=new s.KDBush(m.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const S=u.canonical.x*s.EXTENT,C=u.canonical.y*s.EXTENT;for(let L=0;L<m.length;L++){const{key:O,crossTileID:U,tileAnchorX:q,tileAnchorY:K}=m.get(L),le=Math.floor((S+q)*ml),me=Math.floor((C+K)*ml);this.index.add(le,me),this.keys.push(O),this.crossTileIDs.push(U)}this.index.finish()}findMatches(u,m,y){const S=this.tileID.canonical.z<m.canonical.z?1:Math.pow(2,this.tileID.canonical.z-m.canonical.z),C=ml/Math.pow(2,m.canonical.z-this.tileID.canonical.z),L=m.canonical.x*s.EXTENT,O=m.canonical.y*s.EXTENT;for(let U=0;U<u.length;U++){const q=u.get(U);if(q.crossTileID)continue;const{key:K,tileAnchorX:le,tileAnchorY:me}=q,xe=Math.floor((L+le)*C),Se=Math.floor((O+me)*C),we=this.index.range(xe-S,Se-S,xe+S,Se+S);for(const Ce of we){const ce=this.crossTileIDs[Ce];if(this.keys[Ce]===K&&!y.has(ce)){y.add(ce),q.crossTileID=ce;break}}}}}class pc{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class qo{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(u){const m=Math.round((u-this.lng)/360);if(m!==0)for(const y in this.indexes){const S=this.indexes[y],C={};for(const L in S){const O=S[L];O.tileID=O.tileID.unwrapTo(O.tileID.wrap+m),C[O.tileID.key]=O}this.indexes[y]=C}this.lng=u}addBucket(u,m,y){if(this.indexes[u.overscaledZ]&&this.indexes[u.overscaledZ][u.key]){if(this.indexes[u.overscaledZ][u.key].bucketInstanceId===m.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(u.overscaledZ,this.indexes[u.overscaledZ][u.key])}for(let C=0;C<m.symbolInstances.length;C++)m.symbolInstances.get(C).crossTileID=0;this.usedCrossTileIDs[u.overscaledZ]||(this.usedCrossTileIDs[u.overscaledZ]=new Set);const S=this.usedCrossTileIDs[u.overscaledZ];for(const C in this.indexes){const L=this.indexes[C];if(Number(C)>u.overscaledZ)for(const O in L){const U=L[O];U.tileID.isChildOf(u)&&U.findMatches(m.symbolInstances,u,S)}else{const O=L[u.scaledTo(Number(C)).key];O&&O.findMatches(m.symbolInstances,u,S)}}for(let C=0;C<m.symbolInstances.length;C++){const L=m.symbolInstances.get(C);L.crossTileID||(L.crossTileID=y.generate(),S.add(L.crossTileID))}return this.indexes[u.overscaledZ]===void 0&&(this.indexes[u.overscaledZ]={}),this.indexes[u.overscaledZ][u.key]=new Rr(u,m.symbolInstances,m.bucketInstanceId),!0}removeBucketCrossTileIDs(u,m){for(const y of m.crossTileIDs)this.usedCrossTileIDs[u].delete(y)}removeStaleBuckets(u){let m=!1;for(const y in this.indexes){const S=this.indexes[y];for(const C in S)u[S[C].bucketInstanceId]||(this.removeBucketCrossTileIDs(y,S[C]),delete S[C],m=!0)}return m}}class Ao{constructor(){this.layerIndexes={},this.crossTileIDs=new pc,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(u,m,y,S){let C=this.layerIndexes[u.id];C===void 0&&(C=this.layerIndexes[u.id]=new qo);let L=!1;const O={};S.name!=="globe"&&C.handleWrapJump(y);for(const U of m){const q=U.getBucket(u);q&&u.id===q.layerIds[0]&&(q.bucketInstanceId||(q.bucketInstanceId=++this.maxBucketInstanceId),C.addBucket(U.tileID,q,this.crossTileIDs)&&(L=!0),O[q.bucketInstanceId]=!0)}return C.removeStaleBuckets(O)&&(L=!0),L}pruneUnusedLayers(u){const m={};u.forEach((y=>{m[y]=!0}));for(const y in this.layerIndexes)m[y]||delete this.layerIndexes[y]}}const pa=(v,u)=>s.emitValidationErrors(v,u&&u.filter((m=>m.identifier!=="source.canvas"))),ga=s.pick(qn,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),vd=s.pick(qn,["setCenter","setZoom","setBearing","setPitch"]),Xa={version:8,layers:[],sources:{}},Ko={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class Po extends s.Evented{constructor(u,m={}){super(),this.map=u,this.dispatcher=new Ee(jr(),this),this.imageManager=new Y,this.imageManager.setEventedParent(this),this.glyphManager=new s.GlyphManager(u._requestManager,m.localFontFamily?s.LocalGlyphMode.all:m.localIdeographFontFamily?s.LocalGlyphMode.ideographs:s.LocalGlyphMode.none,m.localFontFamily||m.localIdeographFontFamily),this.crossTileSymbolIndex=new Ao,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",s.getReferrer());const y=this;this._rtlTextPluginCallback=Po.registerForPluginStateChange((S=>{y.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:S.pluginStatus,pluginURL:S.pluginURL},((C,L)=>{if(s.triggerPluginCompletionEvent(C),L&&L.every((O=>O)))for(const O in y._sourceCaches){const U=y._sourceCaches[O],q=U.getSource().type;q!=="vector"&&q!=="geojson"||U.reload()}}))})),this.on("data",(S=>{if(S.dataType!=="source"||S.sourceDataType!=="metadata")return;const C=this.getSource(S.sourceId);if(C&&C.vectorLayerIds)for(const L in this._layers){const O=this._layers[L];O.source===C.id&&this._validateLayer(O)}}))}loadURL(u,m={}){this.fire(new s.Event("dataloading",{dataType:"style"}));const y=typeof m.validate=="boolean"?m.validate:!s.isMapboxURL(u);u=this.map._requestManager.normalizeStyleURL(u,m.accessToken);const S=this.map._requestManager.transformRequest(u,s.ResourceType.Style);this._request=s.getJSON(S,((C,L)=>{this._request=null,C?this.fire(new s.ErrorEvent(C)):L&&this._load(L,y)}))}loadJSON(u,m={}){this.fire(new s.Event("dataloading",{dataType:"style"})),this._request=s.exported.frame((()=>{this._request=null,this._load(u,m.validate!==!1)}))}loadEmpty(){this.fire(new s.Event("dataloading",{dataType:"style"})),this._load(Xa,!1)}_updateLayerCount(u,m){const y=m?1:-1;u.is3D()&&(this._num3DLayers+=y),u.type==="circle"&&(this._numCircleLayers+=y),u.type==="symbol"&&(this._numSymbolLayers+=y)}_load(u,m){if(m&&pa(this,s.validateStyle(u)))return;this._loaded=!0,this.stylesheet=s.clone$1(u),this._updateMapProjection();for(const S in u.sources)this.addSource(S,u.sources[S],{validate:!1});this._changed=!1,u.sprite?this._loadSprite(u.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(u.glyphs);const y=Bs(this.stylesheet.layers);this._order=y.map((S=>S.id)),this._layers={},this._serializedLayers={};for(const S of y){const C=s.createStyleLayer(S);C.setEventedParent(this,{layer:{id:C.id}}),this._layers[C.id]=C,this._serializedLayers[C.id]=C.serialize(),this._updateLayerCount(C,!0)}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new ge(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new s.Event("data",{dataType:"style"})),this.fire(new s.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&this.terrain.drapeRenderMode===0}setProjection(u){u?this.stylesheet.projection=u:delete this.stylesheet.projection,this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_updateMapProjection(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}_loadSprite(u){this._spriteRequest=(function(m,y,S){let C,L,O;const U=s.exported.devicePixelRatio>1?"@2x":"";let q=s.getJSON(y.transformRequest(y.normalizeSpriteURL(m,U,".json"),s.ResourceType.SpriteJSON),((me,xe)=>{q=null,O||(O=me,C=xe,le())})),K=s.getImage(y.transformRequest(y.normalizeSpriteURL(m,U,".png"),s.ResourceType.SpriteImage),((me,xe)=>{K=null,O||(O=me,L=xe,le())}));function le(){if(O)S(O);else if(C&&L){const me=s.exported.getImageData(L),xe={};for(const Se in C){const{width:we,height:Ce,x:ce,y:ye,sdf:Pe,pixelRatio:De,stretchX:Ue,stretchY:je,content:Ge}=C[Se],ct=new s.RGBAImage({width:we,height:Ce});s.RGBAImage.copy(me,ct,{x:ce,y:ye},{x:0,y:0},{width:we,height:Ce}),xe[Se]={data:ct,pixelRatio:De,sdf:Pe,stretchX:Ue,stretchY:je,content:Ge}}S(null,xe)}}return{cancel(){q&&(q.cancel(),q=null),K&&(K.cancel(),K=null)}}})(u,this.map._requestManager,((m,y)=>{if(this._spriteRequest=null,m)this.fire(new s.ErrorEvent(m));else if(y)for(const S in y)this.imageManager.addImage(S,y[S]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new s.Event("data",{dataType:"style"}))}))}_validateLayer(u){const m=this.getSource(u.source);if(!m)return;const y=u.sourceLayer;y&&(m.type==="geojson"||m.vectorLayerIds&&m.vectorLayerIds.indexOf(y)===-1)&&this.fire(new s.ErrorEvent(new Error(`Source layer "${y}" does not exist on source "${m.id}" as specified by style layer "${u.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const u in this._sourceCaches)if(!this._sourceCaches[u].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(u){const m=[];for(const y of u){const S=this._layers[y];S.type!=="custom"&&m.push(S.serialize())}return m}hasTransitions(){if(this.light&&this.light.hasTransition()||this.fog&&this.fog.hasTransition())return!0;for(const u in this._sourceCaches)if(this._sourceCaches[u].hasTransition())return!0;for(const u in this._layers)if(this._layers[u].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(u){return!!this.terrain&&(typeof u.isLayerDraped=="function"?u.isLayerDraped():Ko[u.type])}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(u){if(!this._loaded)return;const m=this._changed;if(this._changed){const S=Object.keys(this._updatedLayers),C=Object.keys(this._removedLayers);(S.length||C.length)&&this._updateWorkerLayers(S,C);for(const L in this._updatedSources){const O=this._updatedSources[L];O==="reload"?this._reloadSource(L):O==="clear"&&this._clearSource(L)}this._updateTilesForChangedImages();for(const L in this._updatedPaintProps)this._layers[L].updateTransitions(u);this.light.updateTransitions(u),this.fog&&this.fog.updateTransitions(u),this._resetUpdates()}const y={};for(const S in this._sourceCaches){const C=this._sourceCaches[S];y[S]=C.used,C.used=!1}for(const S of this._order){const C=this._layers[S];if(C.recalculate(u,this._availableImages),!C.isHidden(u.zoom)){const O=this._getLayerSourceCache(C);O&&(O.used=!0)}const L=this.map.painter;if(L){const O=C.getProgramIds();if(!O)continue;const U=C.getProgramConfiguration(u.zoom);for(const q of O)L.useProgram(q,U)}}for(const S in y){const C=this._sourceCaches[S];y[S]!==C.used&&C.getSource().fire(new s.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:C.getSource().id}))}this.light.recalculate(u),this.terrain&&this.terrain.recalculate(u),this.fog&&this.fog.recalculate(u),this.z=u.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),m&&this.fire(new s.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const u=Object.keys(this._changedImages);if(u.length){for(const m in this._sourceCaches)this._sourceCaches[m].reloadTilesForDependencies(["icons","patterns"],u);this._changedImages={}}}_updateWorkerLayers(u,m){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(u),removedIds:m})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(u){if(this._checkLoaded(),pa(this,s.validateStyle(u)))return!1;(u=s.clone$1(u)).layers=Bs(u.layers);const m=(function(S,C){if(!S)return[{command:qn.setStyle,args:[C]}];let L=[];try{if(!p(S.version,C.version))return[{command:qn.setStyle,args:[C]}];p(S.center,C.center)||L.push({command:qn.setCenter,args:[C.center]}),p(S.zoom,C.zoom)||L.push({command:qn.setZoom,args:[C.zoom]}),p(S.bearing,C.bearing)||L.push({command:qn.setBearing,args:[C.bearing]}),p(S.pitch,C.pitch)||L.push({command:qn.setPitch,args:[C.pitch]}),p(S.sprite,C.sprite)||L.push({command:qn.setSprite,args:[C.sprite]}),p(S.glyphs,C.glyphs)||L.push({command:qn.setGlyphs,args:[C.glyphs]}),p(S.transition,C.transition)||L.push({command:qn.setTransition,args:[C.transition]}),p(S.light,C.light)||L.push({command:qn.setLight,args:[C.light]}),p(S.fog,C.fog)||L.push({command:qn.setFog,args:[C.fog]}),p(S.projection,C.projection)||L.push({command:qn.setProjection,args:[C.projection]});const O={},U=[];(function(le,me,xe,Se){let we;for(we in me=me||{},le=le||{})le.hasOwnProperty(we)&&(me.hasOwnProperty(we)||Ss(we,xe,Se));for(we in me){if(!me.hasOwnProperty(we))continue;const Ce=me[we];le.hasOwnProperty(we)?p(le[we],Ce)||(le[we].type==="geojson"&&Ce.type==="geojson"&&qa(le,me,we)?xe.push({command:qn.setGeoJSONSourceData,args:[we,Ce.data]}):Wo(we,me,xe,Se)):da(we,me,xe)}})(S.sources,C.sources,U,O);const q=[];S.layers&&S.layers.forEach((le=>{le.source&&O[le.source]?L.push({command:qn.removeLayer,args:[le.id]}):q.push(le)}));let K=S.terrain;K&&O[K.source]&&(L.push({command:qn.setTerrain,args:[void 0]}),K=void 0),L=L.concat(U),p(K,C.terrain)||L.push({command:qn.setTerrain,args:[C.terrain]}),(function(le,me,xe){me=me||[];const Se=(le=le||[]).map(Eo),we=me.map(Eo),Ce=le.reduce(Ka,{}),ce=me.reduce(Ka,{}),ye=Se.slice(),Pe=Object.create(null);let De,Ue,je,Ge,ct,at,gt;for(De=0,Ue=0;De<Se.length;De++)je=Se[De],ce.hasOwnProperty(je)?Ue++:(xe.push({command:qn.removeLayer,args:[je]}),ye.splice(ye.indexOf(je,Ue),1));for(De=0,Ue=0;De<we.length;De++)je=we[we.length-1-De],ye[ye.length-1-De]!==je&&(Ce.hasOwnProperty(je)?(xe.push({command:qn.removeLayer,args:[je]}),ye.splice(ye.lastIndexOf(je,ye.length-Ue),1)):Ue++,at=ye[ye.length-De],xe.push({command:qn.addLayer,args:[ce[je],at]}),ye.splice(ye.length-De,0,je),Pe[je]=!0);for(De=0;De<we.length;De++)if(je=we[De],Ge=Ce[je],ct=ce[je],!Pe[je]&&!p(Ge,ct))if(p(Ge.source,ct.source)&&p(Ge["source-layer"],ct["source-layer"])&&p(Ge.type,ct.type)){for(gt in So(Ge.layout,ct.layout,xe,je,null,qn.setLayoutProperty),So(Ge.paint,ct.paint,xe,je,null,qn.setPaintProperty),p(Ge.filter,ct.filter)||xe.push({command:qn.setFilter,args:[je,ct.filter]}),p(Ge.minzoom,ct.minzoom)&&p(Ge.maxzoom,ct.maxzoom)||xe.push({command:qn.setLayerZoomRange,args:[je,ct.minzoom,ct.maxzoom]}),Ge)Ge.hasOwnProperty(gt)&&gt!=="layout"&&gt!=="paint"&&gt!=="filter"&&gt!=="metadata"&&gt!=="minzoom"&&gt!=="maxzoom"&&(gt.indexOf("paint.")===0?So(Ge[gt],ct[gt],xe,je,gt.slice(6),qn.setPaintProperty):p(Ge[gt],ct[gt])||xe.push({command:qn.setLayerProperty,args:[je,gt,ct[gt]]}));for(gt in ct)ct.hasOwnProperty(gt)&&!Ge.hasOwnProperty(gt)&&gt!=="layout"&&gt!=="paint"&&gt!=="filter"&&gt!=="metadata"&&gt!=="minzoom"&&gt!=="maxzoom"&&(gt.indexOf("paint.")===0?So(Ge[gt],ct[gt],xe,je,gt.slice(6),qn.setPaintProperty):p(Ge[gt],ct[gt])||xe.push({command:qn.setLayerProperty,args:[je,gt,ct[gt]]}))}else xe.push({command:qn.removeLayer,args:[je]}),at=ye[ye.lastIndexOf(je)+1],xe.push({command:qn.addLayer,args:[ct,at]})})(q,C.layers,L)}catch(O){console.warn("Unable to compute style diff:",O),L=[{command:qn.setStyle,args:[C]}]}return L})(this.serialize(),u).filter((S=>!(S.command in vd)));if(m.length===0)return!1;const y=m.filter((S=>!(S.command in ga)));if(y.length>0)throw new Error(`Unimplemented: ${y.map((S=>S.command)).join(", ")}.`);return m.forEach((S=>{S.command!=="setTransition"&&S.command!=="setProjection"&&this[S.command].apply(this,S.args)})),this.stylesheet=u,this._updateMapProjection(),!0}addImage(u,m){return this.getImage(u)?this.fire(new s.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(u,m),this._afterImageUpdated(u),this)}updateImage(u,m){this.imageManager.updateImage(u,m)}getImage(u){return this.imageManager.getImage(u)}removeImage(u){return this.getImage(u)?(this.imageManager.removeImage(u),this._afterImageUpdated(u),this):this.fire(new s.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(u){this._availableImages=this.imageManager.listImages(),this._changedImages[u]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new s.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(u,m,y={}){if(this._checkLoaded(),this.getSource(u)!==void 0)throw new Error("There is already a source with this ID");if(!m.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(m).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(m.type)>=0&&this._validate(s.validateSource,`sources.${u}`,m,null,y))return;this.map&&this.map._collectResourceTiming&&(m.collectResourceTiming=!0);const S=oi(u,m,this.dispatcher,this);S.setEventedParent(this,(()=>({isSourceLoaded:this._isSourceCacheLoaded(u),source:S.serialize(),sourceId:u})));const C=L=>{const O=(L?"symbol:":"other:")+u,U=this._sourceCaches[O]=new s.SourceCache(O,S,L);(L?this._symbolSourceCaches:this._otherSourceCaches)[u]=U,U.style=this,U.onAdd(this.map)};C(!1),m.type!=="vector"&&m.type!=="geojson"||C(!0),S.onAdd&&S.onAdd(this.map),this._changed=!0}removeSource(u){this._checkLoaded();const m=this.getSource(u);if(!m)throw new Error("There is no source with this ID");for(const S in this._layers)if(this._layers[S].source===u)return this.fire(new s.ErrorEvent(new Error(`Source "${u}" cannot be removed while layer "${S}" is using it.`)));if(this.terrain&&this.terrain.get().source===u)return this.fire(new s.ErrorEvent(new Error(`Source "${u}" cannot be removed while terrain is using it.`)));const y=this._getSourceCaches(u);for(const S of y)delete this._sourceCaches[S.id],delete this._updatedSources[S.id],S.fire(new s.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:S.getSource().id})),S.setEventedParent(null),S.clearTiles();return delete this._otherSourceCaches[u],delete this._symbolSourceCaches[u],m.setEventedParent(null),m.onRemove&&m.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(u,m){this._checkLoaded(),this.getSource(u).setData(m),this._changed=!0}getSource(u){const m=this._getSourceCache(u);return m&&m.getSource()}_getSources(){const u=[];for(const m in this._otherSourceCaches){const y=this._getSourceCache(m);y&&u.push(y.getSource())}return u}addLayer(u,m,y={}){this._checkLoaded();const S=u.id;if(this.getLayer(S))return void this.fire(new s.ErrorEvent(new Error(`Layer with id "${S}" already exists on this map`)));let C;if(u.type==="custom"){if(pa(this,s.validateCustomStyleLayer(u)))return;C=s.createStyleLayer(u)}else{if(typeof u.source=="object"&&(this.addSource(S,u.source),u=s.clone$1(u),u=s.extend(u,{source:S})),this._validate(s.validateLayer,`layers.${S}`,u,{arrayIndex:-1},y))return;C=s.createStyleLayer(u),this._validateLayer(C),C.setEventedParent(this,{layer:{id:S}}),this._serializedLayers[C.id]=C.serialize(),this._updateLayerCount(C,!0)}const L=m?this._order.indexOf(m):this._order.length;if(m&&L===-1)return void this.fire(new s.ErrorEvent(new Error(`Layer with id "${m}" does not exist on this map.`)));this._order.splice(L,0,S),this._layerOrderChanged=!0,this._layers[S]=C;const O=this._getLayerSourceCache(C);if(this._removedLayers[S]&&C.source&&O&&C.type!=="custom"){const U=this._removedLayers[S];delete this._removedLayers[S],U.type!==C.type?this._updatedSources[C.source]="clear":(this._updatedSources[C.source]="reload",O.pause())}this._updateLayer(C),C.onAdd&&C.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(u,m){if(this._checkLoaded(),this._changed=!0,!this._layers[u])return void this.fire(new s.ErrorEvent(new Error(`The layer '${u}' does not exist in the map's style and cannot be moved.`)));if(u===m)return;const y=this._order.indexOf(u);this._order.splice(y,1);const S=m?this._order.indexOf(m):this._order.length;m&&S===-1?this.fire(new s.ErrorEvent(new Error(`Layer with id "${m}" does not exist on this map.`))):(this._order.splice(S,0,u),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(u){this._checkLoaded();const m=this._layers[u];if(!m)return void this.fire(new s.ErrorEvent(new Error(`The layer '${u}' does not exist in the map's style and cannot be removed.`)));m.setEventedParent(null),this._updateLayerCount(m,!1);const y=this._order.indexOf(u);this._order.splice(y,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[u]=m,delete this._layers[u],delete this._serializedLayers[u],delete this._updatedLayers[u],delete this._updatedPaintProps[u],m.onRemove&&m.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(u){return this._layers[u]}hasLayer(u){return u in this._layers}hasLayerType(u){for(const m in this._layers)if(this._layers[m].type===u)return!0;return!1}setLayerZoomRange(u,m,y){this._checkLoaded();const S=this.getLayer(u);S?S.minzoom===m&&S.maxzoom===y||(m!=null&&(S.minzoom=m),y!=null&&(S.maxzoom=y),this._updateLayer(S)):this.fire(new s.ErrorEvent(new Error(`The layer '${u}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(u,m,y={}){this._checkLoaded();const S=this.getLayer(u);if(S){if(!p(S.filter,m))return m==null?(S.filter=void 0,void this._updateLayer(S)):void(this._validate(s.validateFilter,`layers.${S.id}.filter`,m,{layerType:S.type},y)||(S.filter=s.clone$1(m),this._updateLayer(S)))}else this.fire(new s.ErrorEvent(new Error(`The layer '${u}' does not exist in the map's style and cannot be filtered.`)))}getFilter(u){const m=this.getLayer(u);return m&&s.clone$1(m.filter)}setLayoutProperty(u,m,y,S={}){this._checkLoaded();const C=this.getLayer(u);C?p(C.getLayoutProperty(m),y)||(C.setLayoutProperty(m,y,S),this._updateLayer(C)):this.fire(new s.ErrorEvent(new Error(`The layer '${u}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(u,m){const y=this.getLayer(u);if(y)return y.getLayoutProperty(m);this.fire(new s.ErrorEvent(new Error(`The layer '${u}' does not exist in the map's style.`)))}setPaintProperty(u,m,y,S={}){this._checkLoaded();const C=this.getLayer(u);C?p(C.getPaintProperty(m),y)||(C.setPaintProperty(m,y,S)&&this._updateLayer(C),this._changed=!0,this._updatedPaintProps[u]=!0):this.fire(new s.ErrorEvent(new Error(`The layer '${u}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(u,m){const y=this.getLayer(u);return y&&y.getPaintProperty(m)}setFeatureState(u,m){this._checkLoaded();const y=u.source,S=u.sourceLayer,C=this.getSource(y);if(!C)return void this.fire(new s.ErrorEvent(new Error(`The source '${y}' does not exist in the map's style.`)));const L=C.type;if(L==="geojson"&&S)return void this.fire(new s.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(L==="vector"&&!S)return void this.fire(new s.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));u.id===void 0&&this.fire(new s.ErrorEvent(new Error("The feature id parameter must be provided.")));const O=this._getSourceCaches(y);for(const U of O)U.setFeatureState(S,u.id,m)}removeFeatureState(u,m){this._checkLoaded();const y=u.source,S=this.getSource(y);if(!S)return void this.fire(new s.ErrorEvent(new Error(`The source '${y}' does not exist in the map's style.`)));const C=S.type,L=C==="vector"?u.sourceLayer:void 0;if(C==="vector"&&!L)return void this.fire(new s.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(m&&typeof u.id!="string"&&typeof u.id!="number")return void this.fire(new s.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const O=this._getSourceCaches(y);for(const U of O)U.removeFeatureState(L,u.id,m)}getFeatureState(u){this._checkLoaded();const m=u.source,y=u.sourceLayer,S=this.getSource(m);if(S){if(S.type!=="vector"||y)return u.id===void 0&&this.fire(new s.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(m)[0].getFeatureState(y,u.id);this.fire(new s.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new s.ErrorEvent(new Error(`The source '${m}' does not exist in the map's style.`)))}getTransition(){return s.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const u={};for(const m in this._sourceCaches){const y=this._sourceCaches[m].getSource();u[y.id]||(u[y.id]=y.serialize())}return s.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.getTerrain()||void 0,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:u,layers:this._serializeLayers(this._order)},(m=>m!==void 0))}_updateLayer(u){this._updatedLayers[u.id]=!0;const m=this._getLayerSourceCache(u);u.source&&!this._updatedSources[u.source]&&m&&m.getSource().type!=="raster"&&(this._updatedSources[u.source]="reload",m.pause()),this._changed=!0,u.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(u){const m=L=>this._layers[L].type==="fill-extrusion",y={},S=[];for(let L=this._order.length-1;L>=0;L--){const O=this._order[L];if(m(O)){y[O]=L;for(const U of u){const q=U[O];if(q)for(const K of q)S.push(K)}}}S.sort(((L,O)=>O.intersectionZ-L.intersectionZ));const C=[];for(let L=this._order.length-1;L>=0;L--){const O=this._order[L];if(m(O))for(let U=S.length-1;U>=0;U--){const q=S[U].feature;if(y[q.layer.id]<L)break;C.push(q),S.pop()}else for(const U of u){const q=U[O];if(q)for(const K of q)C.push(K.feature)}}return C}queryRenderedFeatures(u,m,y){m&&m.filter&&this._validate(s.validateFilter,"queryRenderedFeatures.filter",m.filter,null,m);const S={};if(m&&m.layers){if(!Array.isArray(m.layers))return this.fire(new s.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const U of m.layers){const q=this._layers[U];if(!q)return this.fire(new s.ErrorEvent(new Error(`The layer '${U}' does not exist in the map's style and cannot be queried for features.`))),[];S[q.source]=!0}}const C=[];m.availableImages=this._availableImages;const L=m&&m.layers?m.layers.some((U=>{const q=this.getLayer(U);return q&&q.is3D()})):this.has3DLayers(),O=it.createFromScreenPoints(u,y);for(const U in this._sourceCaches){const q=this._sourceCaches[U].getSource().id;m.layers&&!S[q]||C.push(Mi(this._sourceCaches[U],this._layers,this._serializedLayers,O,m,y,L,!!this.map._showQueryGeometry))}return this.placement&&C.push((function(U,q,K,le,me,xe,Se){const we={},Ce=xe.queryRenderedSymbols(le),ce=[];for(const ye of Object.keys(Ce).map(Number))ce.push(Se[ye]);ce.sort(is);for(const ye of ce){const Pe=ye.featureIndex.lookupSymbolFeatures(Ce[ye.bucketInstanceId],q,ye.bucketIndex,ye.sourceLayerIndex,me.filter,me.layers,me.availableImages,U);for(const De in Pe){const Ue=we[De]=we[De]||[],je=Pe[De];je.sort(((Ge,ct)=>{const at=ye.featureSortOrder;if(at){const gt=at.indexOf(Ge.featureIndex);return at.indexOf(ct.featureIndex)-gt}return ct.featureIndex-Ge.featureIndex}));for(const Ge of je)Ue.push(Ge)}}for(const ye in we)we[ye].forEach((Pe=>{const De=Pe.feature,Ue=K(U[ye]);if(!Ue)return;const je=Ue.getFeatureState(De.layer["source-layer"],De.id);De.source=De.layer.source,De.layer["source-layer"]&&(De.sourceLayer=De.layer["source-layer"]),De.state=je}));return we})(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),O.screenGeometry,m,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(C)}querySourceFeatures(u,m){m&&m.filter&&this._validate(s.validateFilter,"querySourceFeatures.filter",m.filter,null,m);const y=this._getSourceCaches(u);let S=[];for(const C of y)S=S.concat(mr(C,m));return S}addSourceType(u,m,y){return Po.getSourceType(u)?y(new Error(`A source type called "${u}" already exists.`)):(Po.setSourceType(u,m),m.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:u,url:m.workerSourceURL},y):y(null,null))}getLight(){return this.light.getLight()}setLight(u,m={}){this._checkLoaded();const y=this.light.getLight();let S=!1;for(const L in u)if(!p(u[L],y[L])){S=!0;break}if(!S)return;const C=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(u,m),this.light.updateTransitions(C)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(u,m=1){if(this._checkLoaded(),!u)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);let y=u;if(m===1){if(typeof y.source=="object"){const S="terrain-dem-src";this.addSource(S,y.source),y=s.clone$1(y),y=s.extend(y,{source:S})}if(this._validate(s.validateTerrain,"terrain",y))return}if(!this.terrain||this.terrain&&m!==this.terrain.drapeRenderMode){if(!y)return;this._createTerrain(y,m)}else{const S=this.terrain,C=S.get();for(const L of Object.keys(s.spec.terrain))!y.hasOwnProperty(L)&&s.spec.terrain[L].default&&(y[L]=s.spec.terrain[L].default);for(const L in y)if(!p(y[L],C[L])){S.set(y),this.stylesheet.terrain=y;const O=this._setTransitionParameters({duration:0});S.updateTransitions(O);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(u){const m=this.fog=new Ze(u,this.map.transform);this.stylesheet.fog=u;const y=this._setTransitionParameters({duration:0});m.updateTransitions(y)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask((()=>{for(const u of this.map._markers)u._evaluateOpacity()}))}getFog(){return this.fog?this.fog.get():null}setFog(u){if(this._checkLoaded(),!u)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const m=this.fog,y=m.get();Object.keys(u).length===0&&m.set(u);for(const S in u)if(!p(u[S],y[S])){m.set(u),this.stylesheet.fog=u;const C=this._setTransitionParameters({duration:0});m.updateTransitions(C);break}}else this._createFog(u);this._markersNeedUpdate=!0}_setTransitionParameters(u){return{now:s.exported.now(),transition:s.extend(u,this.stylesheet.transition)}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const u=this._order.filter((y=>this.isLayerDraped(this._layers[y]))),m=this._order.filter((y=>!this.isLayerDraped(this._layers[y])));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...u),this._drapedFirstOrder.push(...m)}_createTerrain(u,m){const y=this.terrain=new Be(u,m);this.stylesheet.terrain=u,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const S=this._setTransitionParameters({duration:0});y.updateTransitions(S)}_force3DLayerUpdate(){for(const u in this._layers){const m=this._layers[u];m.type==="fill-extrusion"&&this._updateLayer(m)}}_forceSymbolLayerUpdate(){for(const u in this._layers){const m=this._layers[u];m.type==="symbol"&&this._updateLayer(m)}}_validate(u,m,y,S,C={}){return(!C||C.validate!==!1)&&pa(this,u.call(s.validateStyle,s.extend({key:m,style:this.serialize(),value:y,styleSpec:s.spec},S)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),s.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const u in this._layers)this._layers[u].setEventedParent(null);for(const u in this._sourceCaches)this._sourceCaches[u].clearTiles(),this._sourceCaches[u].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(u){const m=this._getSourceCaches(u);for(const y of m)y.clearTiles()}_reloadSource(u){const m=this._getSourceCaches(u);for(const y of m)y.resume(),y.reload()}_reloadSources(){for(const u of this._getSources())u.reload&&u.reload()}_updateSources(u){for(const m in this._sourceCaches)this._sourceCaches[m].update(u)}_generateCollisionBoxes(){for(const u in this._sourceCaches){const m=this._sourceCaches[u];m.resume(),m.reload()}}_updatePlacement(u,m,y,S,C=!1){let L=!1,O=!1;const U={};for(const q of this._order){const K=this._layers[q];if(K.type!=="symbol")continue;if(!U[K.source]){const me=this._getLayerSourceCache(K);if(!me)continue;U[K.source]=me.getRenderableIds(!0).map((xe=>me.getTileByID(xe))).sort(((xe,Se)=>Se.tileID.overscaledZ-xe.tileID.overscaledZ||(xe.tileID.isLessThan(Se.tileID)?-1:1)))}const le=this.crossTileSymbolIndex.addLayer(K,U[K.source],u.center.lng,u.projection);L=L||le}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),C=C||this._layerOrderChanged||y===0,this._layerOrderChanged&&this.fire(new s.Event("neworder")),(C||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(s.exported.now(),u.zoom))&&(this.pauseablePlacement=new mc(u,this._order,C,m,y,S,this.placement,this.fog&&u.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,U),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(s.exported.now()),O=!0),L&&this.pauseablePlacement.placement.setStale()),O||L)for(const q of this._order){const K=this._layers[q];K.type==="symbol"&&this.placement.updateLayerOpacities(K,U[K.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(s.exported.now())}_releaseSymbolFadeTiles(){for(const u in this._sourceCaches)this._sourceCaches[u].releaseSymbolFadeTiles()}getImages(u,m,y){this.imageManager.getImages(m.icons,y),this._updateTilesForChangedImages();const S=C=>{C&&C.setDependencies(m.tileID.key,m.type,m.icons)};S(this._otherSourceCaches[m.source]),S(this._symbolSourceCaches[m.source])}getGlyphs(u,m,y){this.glyphManager.getGlyphs(m.stacks,y)}getResource(u,m,y){return s.makeRequest(m,y)}_getSourceCache(u){return this._otherSourceCaches[u]}_getLayerSourceCache(u){return u.type==="symbol"?this._symbolSourceCaches[u.source]:this._otherSourceCaches[u.source]}_getSourceCaches(u){const m=[];return this._otherSourceCaches[u]&&m.push(this._otherSourceCaches[u]),this._symbolSourceCaches[u]&&m.push(this._symbolSourceCaches[u]),m}_isSourceCacheLoaded(u){const m=this._getSourceCaches(u);return m.length===0?(this.fire(new s.ErrorEvent(new Error(`There is no source with ID '${u}'`))),!1):m.every((y=>y.loaded()))}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}Po.getSourceType=function(v){return jn[v]},Po.setSourceType=function(v,u){jn[v]=u},Po.registerForPluginStateChange=s.registerForPluginStateChange;var Ul=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#define EXTENT 8192.0
#define HALF_PI PI/2.0
#define QUARTER_PI PI/4.0
#define RAD_TO_DEG 180.0/PI
#define DEG_TO_RAD PI/180.0
#define GLOBE_RADIUS EXTENT/PI/2.0`,Mo="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",va=`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
const float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)
{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}
#ifdef TERRAIN
#ifdef TERRAIN_DEM_FLOAT_FORMAT
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;
#else
uniform sampler2D u_dem;uniform sampler2D u_dem_prev;
#endif
uniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));
#ifdef TERRAIN_DEM_NEAREST_FILTER
return u_exaggeration*tl;
#endif
float tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
return currentElevation(apos);}
#endif
highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(
unpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))
);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
float tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;
#else
vec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);
#endif
return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }
#endif`,_a=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,Xo=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`;let gc={},Ya={};const pl=[];ao(Ul,pl),ao(va,pl),ao(_a,pl),ao(Xo,pl),gc=Ti("",va),Ya=Ti(Xo,_a);const jc=Ti(`
#if __VERSION__ >=300
#define varying in
#define gl_FragColor glFragColor
#define texture2D texture
#define textureCube texture
out vec4 glFragColor;
#endif
highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}`,`
#if __VERSION__ >=300
#define attribute in
#define varying out
#define texture2D texture
#endif
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#ifndef PROJECTED_POS_ON_VIEWPORT
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered.`),gl=Ul,xu=`
#ifdef GL_ES
precision mediump float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`;var wu={background:Ti(`uniform vec4 u_color;uniform float u_opacity;
#ifdef LIGHTING_3D_MODE
varying vec4 v_color;
#endif
void main() {vec4 out_color;
#ifdef LIGHTING_3D_MODE
out_color=v_color;
#else
out_color=u_color;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#ifdef LIGHTING_3D_MODE
uniform vec4 u_color;varying vec4 v_color;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting(u_color);
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:Ti(`uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos;void main() {vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),circle:Ti(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
gl_FragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);
#else 
surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;
#else
occlusion_world_center=world_center;occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:Ti("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Ti(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
if (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:Ti(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:Ti("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:Ti("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}",`attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:Ti("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}",`attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;
#endif
varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),fill:Ti(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutline:Ti(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:Ti(`uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;varying vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;varying vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:Ti(`uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:Ti(`varying vec4 v_color;
#ifdef RENDER_SHADOWS
varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef ZERO_ROOF_RADIUS
varying vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
varying highp vec3 v_normal;
#endif
void main() {
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
vec3 normal=v_normal;
#endif
float z;vec4 color;
#ifdef ZERO_ROOF_RADIUS
z=float(normal.z > 0.00001);color=mix(v_color,v_roof_color,z);
#else
color=v_color;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;
#ifdef ZERO_ROOF_RADIUS
concave*=(1.0-z);
#endif
float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;
#endif
#ifdef RENDER_SHADOWS
#ifdef ZERO_ROOF_RADIUS
normal=mix(normal,vec3(0.0,0.0,1.0),z);
#endif
color.xyz=shadowed_color_normal(color.xyz,normalize(normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec4 v_color;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;
#endif
#ifdef ZERO_ROOF_RADIUS
varying vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
varying highp vec3 v_normal;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
v_normal=normal;
#endif
base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=0.0;float c_ele;vec3 pos;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);
#else
h=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);
#ifdef RENDER_SHADOWS
v_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_depth=gl_Position.w;
#endif
float NdotL=0.0;float colorvalue=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}v_color=vec4(0.0,0.0,0.0,1.0);
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting(color,NdotL);
#else
v_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));
#endif
v_color*=u_opacity;
#ifdef ZERO_ROOF_RADIUS
v_roof_color=vec4(0.0,0.0,0.0,1.0);
#ifdef LIGHTING_3D_MODE
v_roof_color=apply_lighting(color,calculate_NdotL(vec3(0.0,0.0,1.0)));
#else
float roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));
#endif
v_roof_color*=u_opacity;
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),fillExtrusionPattern:Ti(`uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
varying float v_NdotL;
#endif
varying vec2 v_pos;varying vec4 v_lighting;uniform lowp float u_opacity;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color,v_NdotL)*u_opacity;
#else
out_color=out_color*v_lighting;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec2 v_pos;varying vec4 v_lighting;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
varying float v_NdotL;
#endif
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=z;vec3 p;float c_ele;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);
#else
p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_NdotL=NdotL;
#else
v_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#endif 
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),hillshadePrepare:Ti(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
return texture2D(u_image,coord).a/4.0;
#else
vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;
#endif
}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Ti(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef LIGHTING_3D_MODE
gl_FragColor=apply_lighting(gl_FragColor);
#endif
#ifdef FOG
gl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:Ti(`uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;varying vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;
#endif
uniform float u_border_width;uniform vec4 u_border_color;float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
float linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef RENDER_LINE_DASH
float sdfdist=texture2D(u_dash_image,v_tex).a;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);
#endif
highp vec4 out_color;
#ifdef RENDER_LINE_GRADIENT
out_color=texture2D(u_gradient_image,v_uv.xy);
#else
out_color=color;
#endif
float trimmed=1.0;
#ifdef RENDER_LINE_TRIM_OFFSET
highp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);trimmed=0.0;}}
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef RENDER_LINE_ALPHA_DISCARD
if (alpha < u_alpha_discard_threshold) {discard;}
#endif
#ifdef RENDER_LINE_BORDER
float edgeBlur=(u_border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);
#ifdef RENDER_LINE_BORDER_AUTO
float Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}
#else
out_color.rgb=mix(u_border_color.rgb*u_border_color.a*trimmed,out_color.rgb,smoothAlpha);
#endif
}
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define EXTRUDE_SCALE 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
attribute highp vec4 a_packed;
#endif
#ifdef RENDER_LINE_DASH
attribute float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;varying vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
float a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];
#ifdef RENDER_LINE_GRADIENT
highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);
#else
v_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);
#endif
#endif
#ifdef RENDER_LINE_DASH
float scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),linePattern:Ti(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;vec2 pattern_size=vec2(display_size.x/u_tile_units_to_pixels,display_size.y);float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x=mod(v_linesofar/pattern_size.x*aspect,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));vec4 color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
color=apply_lighting(color);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),raster:Ti(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply(out_color,v_fog_pos));
#endif
gl_FragColor=vec4(out_color*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),symbolIcon:Ti(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}`),symbolSDF:Ti(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}`),symbolTextAndIcon:Ti(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}`),terrainRaster:Ti(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
void main() {vec4 color=texture2D(u_image0,v_pos0);
#ifdef RENDER_SHADOWS
color.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
#ifdef ZERO_EXAGGERATION
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#else
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
const float wireframeOffset=0.00015;void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;
#ifdef TERRAIN_WIREFRAME
elevation+=wireframeOffset;
#endif
v_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
#ifdef ZERO_EXAGGERATION
v_fog_pos=fog_position(decodedPos);
#else
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
#endif
#ifdef RENDER_SHADOWS
vec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;
#endif
}`),terrainDepth:Ti(`#ifdef GL_ES
precision highp float;
#endif
varying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}`,"uniform mat4 u_matrix;attribute vec2 a_pos;varying float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:Ti(`
varying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Mo),skyboxGradient:Ti(`varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Mo),skyboxCapture:Ti(`
varying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;
#ifdef GL_ES
precision highp float;
#endif
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}`,"attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:Ti(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifndef FOG
uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;
#endif
void main() {vec4 color;
#ifdef CUSTOM_ANTIALIASING
vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);color=vec4(raster.rgb*antialias,raster.a*antialias);
#else
color=texture2D(u_image0,v_pos0);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;
#ifdef GLOBE_POLES
attribute vec3 a_globe_pos;attribute vec2 a_uv;
#else
attribute vec2 a_pos;
#endif
varying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;vec2 uv=a_uv;
#else
float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);
#endif
v_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;
#ifdef GLOBE_POLES
vec3 up_vector=globe_derived_up_vector;
#else
vec3 up_vector=elevationVector(tile_pos);
#endif
float height=elevation(tile_pos);
#ifdef TERRAIN_WIREFRAME
height+=wireframeOffset;
#endif
globe_pos+=up_vector*height;
#ifndef GLOBE_POLES
globe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;
#endif
#ifdef GLOBE_POLES
vec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);
#else
vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);
#endif
gl_Position=u_proj_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
}`),globeAtmosphere:Ti(`uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;
#ifdef PROJECTION_GLOBE_VIEW
globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}
#endif
highp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?
0.0 : max(acos(dot(dir,horizon_dir)),0.0);float horizon_angle;
#ifdef PROJECTION_GLOBE_VIEW
highp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?
PI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);
#else
horizon_angle=horizon_angle_mercator;
#endif
horizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:
(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:
uv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}`,`attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(
mix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}`)};function ao(v,u){const m=v.replace(/\s*\/\/[^\n]*\n/g,`
`).split(`
`);for(let y of m)if(y=y.trim(),y[0]==="#"&&y.includes("if")&&!y.includes("endif")){y=y.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const S=y.split(" ");for(const C of S)u.includes(C)||u.push(C)}}function Ti(v,u){const m=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,y=u.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),S={},C=[...pl];return ao(v,C),ao(u,C),{fragmentSource:v=v.replace(m,((L,O,U,q,K)=>(S[K]=!0,O==="define"?`
#ifndef HAS_UNIFORM_u_${K}
varying ${U} ${q} ${K};
#else
uniform ${U} ${q} u_${K};
#endif
`:`
#ifdef HAS_UNIFORM_u_${K}
    ${U} ${q} ${K} = u_${K};
#endif
`))),vertexSource:u=u.replace(m,((L,O,U,q,K)=>{const le=q==="float"?"vec2":"vec4",me=K.match(/color/)?"color":le;return S[K]?O==="define"?`
#ifndef HAS_UNIFORM_u_${K}
uniform lowp float u_${K}_t;
attribute ${U} ${le} a_${K};
varying ${U} ${q} ${K};
#else
uniform ${U} ${q} u_${K};
#endif
`:me==="vec4"?`
#ifndef HAS_UNIFORM_u_${K}
    ${K} = a_${K};
#else
    ${U} ${q} ${K} = u_${K};
#endif
`:`
#ifndef HAS_UNIFORM_u_${K}
    ${K} = unpack_mix_${me}(a_${K}, u_${K}_t);
#else
    ${U} ${q} ${K} = u_${K};
#endif
`:O==="define"?`
#ifndef HAS_UNIFORM_u_${K}
uniform lowp float u_${K}_t;
attribute ${U} ${le} a_${K};
#else
uniform ${U} ${q} u_${K};
#endif
`:me==="vec4"?`
#ifndef HAS_UNIFORM_u_${K}
    ${U} ${q} ${K} = a_${K};
#else
    ${U} ${q} ${K} = u_${K};
#endif
`:`
#ifndef HAS_UNIFORM_u_${K}
    ${U} ${q} ${K} = unpack_mix_${me}(a_${K}, u_${K}_t);
#else
    ${U} ${q} ${K} = u_${K};
#endif
`})),staticAttributes:y,usedDefines:C}}class Wc{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(u,m,y,S,C,L,O){this.context=u;let U=this.boundPaintVertexBuffers.length!==S.length;for(let K=0;!U&&K<S.length;K++)this.boundPaintVertexBuffers[K]!==S[K]&&(U=!0);let q=this.boundDynamicVertexBuffers.length!==O.length;for(let K=0;!q&&K<O.length;K++)this.boundDynamicVertexBuffers[K]!==O[K]&&(q=!0);if(!u.extVertexArrayObject||!this.vao||this.boundProgram!==m||this.boundLayoutVertexBuffer!==y||U||q||this.boundIndexBuffer!==C||this.boundVertexOffset!==L)this.freshBind(m,y,S,C,L,O);else{u.bindVertexArrayOES.set(this.vao);for(const K of O)K&&K.bind();C&&C.dynamicDraw&&C.bind()}}freshBind(u,m,y,S,C,L){let O;const U=u.numAttributes,q=this.context,K=q.gl;if(q.extVertexArrayObject)this.vao&&this.destroy(),this.vao=q.extVertexArrayObject.createVertexArrayOES(),q.bindVertexArrayOES.set(this.vao),O=0,this.boundProgram=u,this.boundLayoutVertexBuffer=m,this.boundPaintVertexBuffers=y,this.boundIndexBuffer=S,this.boundVertexOffset=C,this.boundDynamicVertexBuffers=L;else{O=q.currentNumAttributes||0;for(let le=U;le<O;le++)K.disableVertexAttribArray(le)}m.enableAttributes(K,u),m.bind(),m.setVertexAttribPointers(K,u,C);for(const le of y)le.enableAttributes(K,u),le.bind(),le.setVertexAttribPointers(K,u,C);for(const le of L)le&&(le.enableAttributes(K,u),le.bind(),le.setVertexAttribPointers(K,u,C));S&&S.bind(),q.currentNumAttributes=U}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function Tu(v,u){const m=Math.pow(2,u.canonical.z),y=u.canonical.y;return[new s.MercatorCoordinate(0,y/m).toLngLat().lat,new s.MercatorCoordinate(0,(y+1)/m).toLngLat().lat]}function _d(v,u,m,y,S,C,L){const O=v.context,U=O.gl,q=m.fbo;if(!q)return;v.prepareDrawTile();const K=v.useProgram("hillshade");O.activeTexture.set(U.TEXTURE0),U.bindTexture(U.TEXTURE_2D,q.colorAttachment.get());const le=((we,Ce,ce,ye)=>{const Pe=ce.paint.get("hillshade-shadow-color"),De=ce.paint.get("hillshade-highlight-color"),Ue=ce.paint.get("hillshade-accent-color");let je=ce.paint.get("hillshade-illumination-direction")*(Math.PI/180);ce.paint.get("hillshade-illumination-anchor")==="viewport"&&(je-=we.transform.angle);const Ge=!we.options.moving;return{u_matrix:ye||we.transform.calculateProjMatrix(Ce.tileID.toUnwrapped(),Ge),u_image:0,u_latrange:Tu(0,Ce.tileID),u_light:[ce.paint.get("hillshade-exaggeration"),je],u_shadow:Pe,u_highlight:De,u_accent:Ue}})(v,m,y,v.terrain?u.projMatrix:null);v.prepareDrawProgram(O,K,u.toUnwrapped());const{tileBoundsBuffer:me,tileBoundsIndexBuffer:xe,tileBoundsSegments:Se}=v.getTileBoundsBuffers(m);K.draw(O,U.TRIANGLES,S,C,L,s.CullFaceMode.disabled,le,y.id,me,xe,Se)}function vl(v,u,m){if(!u.needsDEMTextureUpload)return;const y=v.context,S=y.gl;y.pixelStoreUnpackPremultiplyAlpha.set(!1),u.demTexture=u.demTexture||v.getTileTexture(m.stride);const C=m.getPixels();u.demTexture?u.demTexture.update(C,{premultiply:!1}):u.demTexture=new s.Texture(y,C,S.RGBA,{premultiply:!1}),u.needsDEMTextureUpload=!1}function Ns(v,u,m,y,S,C){const L=v.context,O=L.gl;if(!u.dem)return;const U=u.dem;if(L.activeTexture.set(O.TEXTURE1),vl(v,u,U),!u.demTexture)return;u.demTexture.bind(O.NEAREST,O.CLAMP_TO_EDGE);const q=U.dim;L.activeTexture.set(O.TEXTURE0);let K=u.fbo;if(!K){const Se=new s.Texture(L,{width:q,height:q,data:null},O.RGBA);Se.bind(O.LINEAR,O.CLAMP_TO_EDGE),K=u.fbo=L.createFramebuffer(q,q,!0),K.colorAttachment.set(Se.texture)}L.bindFramebuffer.set(K.framebuffer),L.viewport.set([0,0,q,q]);const{tileBoundsBuffer:le,tileBoundsIndexBuffer:me,tileBoundsSegments:xe}=v.getMercatorTileBoundsBuffers();v.useProgram("hillshadePrepare").draw(L,O.TRIANGLES,y,S,C,s.CullFaceMode.disabled,((Se,we)=>{const Ce=we.stride,ce=s.create();return s.ortho(ce,0,s.EXTENT,-s.EXTENT,0,0,1),s.translate(ce,ce,[0,-s.EXTENT,0]),{u_matrix:ce,u_image:1,u_dimension:[Ce,Ce],u_zoom:Se.overscaledZ,u_unpack:we.unpackVector}})(u.tileID,U),m.id,le,me,xe),u.needsHillshadePrepare=!1}const Hc=v=>({u_matrix:new s.UniformMatrix4f(v),u_image0:new s.Uniform1i(v),u_skirt_height:new s.Uniform1f(v)}),lo=(v,u)=>({u_matrix:v,u_image0:0,u_skirt_height:u}),Yo=(v,u,m,y,S,C,L,O,U,q,K,le,me,xe,Se)=>({u_proj_matrix:Float32Array.from(v),u_globe_matrix:u,u_normalize_matrix:Float32Array.from(y),u_merc_matrix:m,u_zoom_transition:S,u_merc_center:C,u_image0:0,u_frustum_tl:L,u_frustum_tr:O,u_frustum_br:U,u_frustum_bl:q,u_globe_pos:K,u_globe_radius:le,u_viewport:me,u_grid_matrix:Se?Float32Array.from(Se):new Float32Array(9),u_skirt_height:xe});function A(v,u){return v!=null&&u!=null&&!(!v.hasData()||!u.hasData())&&v.demTexture!=null&&u.demTexture!=null&&v.tileID.key!==u.tileID.key}const te=new class{constructor(){this.operations={}}newMorphing(v,u,m,y,S){if(v in this.operations){const C=this.operations[v];C.to.tileID.key!==m.tileID.key&&(C.queued=m)}else this.operations[v]={startTime:y,phase:0,duration:S,from:u,to:m,queued:null}}getMorphValuesForProxy(v){if(!(v in this.operations))return null;const u=this.operations[v];return{from:u.from,to:u.to,phase:u.phase}}update(v){for(const u in this.operations){const m=this.operations[u];for(m.phase=(v-m.startTime)/m.duration;m.phase>=1||!this._validOp(m);)if(!this._nextOp(m,v)){delete this.operations[u];break}}}_nextOp(v,u){return!!v.queued&&(v.from=v.to,v.to=v.queued,v.queued=null,v.phase=0,v.startTime=u,!0)}_validOp(v){return v.from.hasData()&&v.to.hasData()}},ue={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function Me(v){return 6*Math.pow(1.5,22-v)}function Tt(v,u){const m=1<<v.z;return!u&&(v.x===0||v.x===m-1)||v.y===0||v.y===m-1}const Mt=v=>({u_matrix:v});function yn(v,u,m,y,S){if(S>0){const C=s.exported.now(),L=(C-v.timeAdded)/S,O=u?(C-u.timeAdded)/S:-1,U=m.getSource(),q=y.coveringZoomLevel({tileSize:U.tileSize,roundZoom:U.roundZoom}),K=!u||Math.abs(u.tileID.overscaledZ-q)>Math.abs(v.tileID.overscaledZ-q),le=K&&v.refreshedUponExpiration?1:s.clamp(K?L:1-O,0,1);return v.refreshedUponExpiration&&L>=1&&(v.refreshedUponExpiration=!1),u?{opacity:1,mix:1-le}:{opacity:le,mix:0}}return{opacity:1,mix:0}}class di extends s.SourceCache{constructor(u){const m={type:"raster-dem",maxzoom:u.transform.maxZoom},y=new Ee(jr(),null),S=oi("mock-dem",m,y,u.style);super("mock-dem",S,!1),S.setEventedParent(this),this._sourceLoaded=!0}_loadTile(u,m){u.state="loaded",m(null)}}class Mr extends s.SourceCache{constructor(u){const m=oi("proxy",{type:"geojson",maxzoom:u.transform.maxZoom},new Ee(jr(),null),u.style);super("proxy",m,!1),m.setEventedParent(this),this.map=this.getSource().map=u,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(u,m,y){if(u.freezeTileCoverage)return;this.transform=u;const S=u.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce(((C,L)=>{if(C[L.key]="",!this._tiles[L.key]){const O=new s.Tile(L,this._source.tileSize*L.overscaleFactor(),u.tileZoom);O.state="loaded",this._tiles[L.key]=O}return C}),{});for(const C in this._tiles)C in S||(this.freeFBO(C),this._tiles[C].unloadVectorData(),delete this._tiles[C])}freeFBO(u){const m=this.proxyCachedFBO[u];if(m!==void 0){const y=Object.values(m);this.renderCachePool.push(...y),delete this.proxyCachedFBO[u]}}deallocRenderCache(){this.renderCache.forEach((u=>u.fb.destroy())),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class Si extends s.OverscaledTileID{constructor(u,m,y){super(u.overscaledZ,u.wrap,u.canonical.z,u.canonical.x,u.canonical.y),this.proxyTileKey=m,this.projMatrix=y}}class rr extends s.Elevation{constructor(u,m){super(),this.painter=u,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[y,S,C]=(function(U){const q=new s.StructArrayLayout2i4,K=new s.StructArrayLayout3ui6,le=131;q.reserve(17161),K.reserve(33800);const me=s.EXTENT/128,xe=s.EXTENT+me/2,Se=xe+me;for(let Ce=-me;Ce<Se;Ce+=me)for(let ce=-me;ce<Se;ce+=me){const ye=ce<0||ce>xe||Ce<0||Ce>xe?24575:0,Pe=s.clamp(Math.round(ce),0,s.EXTENT),De=s.clamp(Math.round(Ce),0,s.EXTENT);q.emplaceBack(Pe+ye,De)}const we=(Ce,ce)=>{const ye=ce*le+Ce;K.emplaceBack(ye+1,ye,ye+le),K.emplaceBack(ye+le,ye+le+1,ye+1)};for(let Ce=1;Ce<129;Ce++)for(let ce=1;ce<129;ce++)we(ce,Ce);return[0,129].forEach((Ce=>{for(let ce=0;ce<130;ce++)we(ce,Ce),we(Ce,ce)})),[q,K,32768]})(),L=u.context;this.gridBuffer=L.createVertexBuffer(y,s.posAttributes.members),this.gridIndexBuffer=L.createIndexBuffer(S),this.gridSegments=s.SegmentVector.simpleSegment(0,0,y.length,S.length),this.gridNoSkirtSegments=s.SegmentVector.simpleSegment(0,0,y.length,C),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new Mr(m.map),this.orthoMatrix=s.create(),s.ortho(this.orthoMatrix,this.painter.transform.projection.name==="globe"?.015:0,s.EXTENT,0,s.EXTENT,0,1);const O=L.gl;this._overlapStencilMode=new s.StencilMode({func:O.GEQUAL,mask:255},0,255,O.KEEP,O.KEEP,O.REPLACE),this._previousZoom=u.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=m,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new di(m.map)}set style(u){u.on("data",this._onStyleDataEvent.bind(this)),u.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=u,this._checkRenderCacheEfficiency(),this._style.map.on("moveend",(()=>{this._clearLineLayersFromRenderCache()}))}update(u,m,y){if(u&&u.terrain){this._style!==u&&(this.style=u),this.enabled=!0;const S=u.terrain.properties;this.sourceCache=u.terrain.drapeRenderMode===0?this._mockSourceCache:u._getSourceCache(S.get("source")),this._exaggeration=S.get("exaggeration");const C=()=>{this.sourceCache.used&&s.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const L=this.getScaledDemTileSize();this.sourceCache.update(m,L,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,C(),this._initializing=!0),C(),m.updateElevation(!0,y),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(m),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(u){this._findCoveringTileCache[u]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const u=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||u.efficiency!==100&&s.warnOnce(`Terrain render cache efficiency is not optimal (${u.efficiency}%) and performance
                may be affected negatively, consider placing all background, fill and line layers before layer
                with id '${u.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(u){u.coord&&u.dataType==="source"?this._clearRenderCacheForTile(u.sourceCacheId,u.coord):u.dataType==="style"&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const u in this._style._sourceCaches)this._style._sourceCaches[u].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach((u=>u.fb.destroy())),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const u=2*this.proxySourceCache.getSource().tileSize;return[u,u]}set useVertexMorphing(u){this._useVertexMorphing=u}updateTileBinding(u){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const m=this.proxySourceCache,y=this.painter.transform;this._initializing&&(this._initializing=y._centerAltitude===0&&this.getAtPointOrZero(s.MercatorCoordinate.fromLngLat(y.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);const S=this.proxyCoords=m.getIds().map((U=>{const q=m.getTileByID(U).tileID;return q.projMatrix=y.calculateProjMatrix(q.toUnwrapped()),q}));(function(U,q){const K=q.transform.pointCoordinate(q.transform.getCameraPoint()),le=new s.Point(K.x,K.y);U.sort(((me,xe)=>{if(xe.overscaledZ-me.overscaledZ)return xe.overscaledZ-me.overscaledZ;const Se=new s.Point(me.canonical.x+(1<<me.canonical.z)*me.wrap,me.canonical.y),we=new s.Point(xe.canonical.x+(1<<xe.canonical.z)*xe.wrap,xe.canonical.y),Ce=le.mult(1<<me.canonical.z);return Ce.x-=.5,Ce.y-=.5,Ce.distSqr(Se)-Ce.distSqr(we)}))})(S,this.painter),this._previousZoom=y.zoom;const C=this.proxyToSource||{};this.proxyToSource={},S.forEach((U=>{this.proxyToSource[U.key]={}})),this.terrainTileForTile={};const L=this._style._sourceCaches;for(const U in L){const q=L[U];if(!q.used||(q!==this.sourceCache&&this.resetTileLookupCache(q.id),this._setupProxiedCoordsForOrtho(q,u[U],C),q.usedForTerrain))continue;const K=u[U];q.getSource().reparseOverscaled&&this._assignTerrainTiles(K)}this.proxiedCoords[m.id]=S.map((U=>new Si(U,U.key,this.orthoMatrix))),this._assignTerrainTiles(S),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(C),this.renderingToTexture=!1,this._updateTimestamp=s.exported.now();const O={};this._visibleDemTiles=[];for(const U of this.proxyCoords){const q=this.terrainTileForTile[U.key];if(!q)continue;const K=q.tileID.key;K in O||(this._visibleDemTiles.push(q),O[K]=K)}}_assignTerrainTiles(u){this._initializing||u.forEach((m=>{if(this.terrainTileForTile[m.key])return;const y=this._findTileCoveringTileID(m,this.sourceCache);y&&(this.terrainTileForTile[m.key]=y)}))}_prepareDEMTextures(){const u=this.painter.context,m=u.gl;for(const y in this.terrainTileForTile){const S=this.terrainTileForTile[y],C=S.dem;!C||S.demTexture&&!S.needsDEMTextureUpload||(u.activeTexture.set(m.TEXTURE1),vl(this.painter,S,C))}}_prepareDemTileUniforms(u,m,y,S){if(!m||m.demTexture==null)return!1;const C=u.tileID.canonical,L=Math.pow(2,m.tileID.canonical.z-C.z),O=S||"";return y[`u_dem_tl${O}`]=[C.x*L%1,C.y*L%1],y[`u_dem_scale${O}`]=L,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const u=this.painter.context,m=u.gl;if(!this._emptyDepthBufferTexture){const y=new s.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new s.Texture(u,y,m.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let u=0;const m=this._visibleDemTiles.reduce(((y,S)=>{if(!S.dem)return y;const C=S.dem.tree.minimums[0];return C>0&&u++,y+C}),0);return u?m/u:0}_updateEmptyDEMTexture(){const u=this.painter.context,m=u.gl;u.activeTexture.set(m.TEXTURE2);const y=this._getLoadedAreaMinimum(),S=new s.RGBAImage({width:1,height:1},new Uint8Array(s.DEMData.pack(y,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let C=this._emptyDEMTexture;return C?C.update(S,{premultiply:!1}):C=this._emptyDEMTexture=new s.Texture(u,S,m.RGBA,{premultiply:!1}),C}setupElevationDraw(u,m,y){const S=this.painter.context,C=S.gl,L=(O=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:s.DEMData.getUnpackVector(O),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});var O;L.u_dem_size=this.sourceCache.getSource().tileSize,L.u_exaggeration=this.exaggeration();let U=null,q=null,K=1;if(y&&y.morphing&&this._useVertexMorphing){const le=y.morphing.srcDemTile,me=y.morphing.dstDemTile;K=y.morphing.phase,le&&me&&(this._prepareDemTileUniforms(u,le,L,"_prev")&&(q=le),this._prepareDemTileUniforms(u,me,L)&&(U=me))}if(q&&U?(S.activeTexture.set(C.TEXTURE2),U.demTexture.bind(C.NEAREST,C.CLAMP_TO_EDGE,C.NEAREST),S.activeTexture.set(C.TEXTURE4),q.demTexture.bind(C.NEAREST,C.CLAMP_TO_EDGE,C.NEAREST),L.u_dem_lerp=K):(U=this.terrainTileForTile[u.tileID.key],S.activeTexture.set(C.TEXTURE2),(this._prepareDemTileUniforms(u,U,L)?U.demTexture:this.emptyDEMTexture).bind(C.NEAREST,C.CLAMP_TO_EDGE)),S.activeTexture.set(C.TEXTURE3),y&&y.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(C.NEAREST,C.CLAMP_TO_EDGE),this._depthFBO&&(L.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(C.NEAREST,C.CLAMP_TO_EDGE),L.u_depth_size_inv=[1,1]),y&&y.useMeterToDem&&U){const le=(1<<U.tileID.canonical.z)*s.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;L.u_meter_to_dem=le}if(y&&y.labelPlaneMatrixInv&&(L.u_label_plane_matrix_inv=y.labelPlaneMatrixInv),m.setTerrainUniformValues(S,L),this.painter.transform.projection.name==="globe"){const le=this.globeUniformValues(this.painter.transform,u.tileID.canonical,y&&y.useDenormalizedUpVectorScale);m.setGlobeUniformValues(S,le)}}globeUniformValues(u,m,y){const S=u.projection;return{u_tile_tl_up:S.upVector(m,0,0),u_tile_tr_up:S.upVector(m,s.EXTENT,0),u_tile_br_up:S.upVector(m,s.EXTENT,s.EXTENT),u_tile_bl_up:S.upVector(m,0,s.EXTENT),u_tile_up_scale:y?s.globeMetersToEcef(1):S.upVectorScale(m,u.center.lat,u.worldSize).metersToTile}}renderToBackBuffer(u){const m=this.painter,y=this.painter.context;u.length!==0&&(y.bindFramebuffer.set(null),y.viewport.set([0,0,m.width,m.height]),m.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,(function(S,C,L,O,U){if(S.transform.projection.name==="globe")(function(q,K,le,me,xe){const Se=q.context,we=Se.gl;let Ce,ce;const ye=q.options.showTerrainWireframe?2:0,Pe=q.transform,De=s.globeUseCustomAntiAliasing(q,Se,Pe),Ue=(Gt,ft)=>{if(ce===Gt)return;const St=[ue[Gt],"PROJECTION_GLOBE_VIEW"];De&&St.push("CUSTOM_ANTIALIASING"),ft&&St.push(ue[ye]),Ce=q.useProgram("globeRaster",null,St),ce=Gt},je=q.colorModeForRenderPass(),Ge=new s.DepthMode(we.LEQUAL,s.DepthMode.ReadWrite,q.depthRangeFor3D);te.update(xe);const ct=s.calculateGlobeMercatorMatrix(Pe),at=[s.mercatorXfromLng(Pe.center.lng),s.mercatorYfromLat(Pe.center.lat)],gt=ye?[!1,!0]:[!1],Wt=q.globeSharedBuffers,ht=[Pe.width*s.exported.devicePixelRatio,Pe.height*s.exported.devicePixelRatio],Lt=Float32Array.from(Pe.globeMatrix),bt={useDenormalizedUpVectorScale:!0};if(gt.forEach((Gt=>{const ft=q.transform,St=Me(ft.zoom)*K.exaggeration();ce=-1;const $t=Gt?we.LINES:we.TRIANGLES;for(const Ft of me){const Kt=le.getTile(Ft),Dn=s.StencilMode.disabled,Gn=K.prevTerrainTileForTile[Ft.key],Sn=K.terrainTileForTile[Ft.key];A(Gn,Sn)&&te.newMorphing(Ft.key,Gn,Sn,xe,250),Se.activeTexture.set(we.TEXTURE0),Kt.texture.bind(we.LINEAR,we.CLAMP_TO_EDGE);const Rn=te.getMorphValuesForProxy(Ft.key),pi=Rn?1:0;Rn&&s.extend$1(bt,{morphing:{srcDemTile:Rn.from,dstDemTile:Rn.to,phase:s.easeCubicInOut(Rn.phase)}});const mi=s.tileCornersToBounds(Ft.canonical),In=s.getLatitudinalLod(mi.getCenter().lat),Di=s.getGridMatrix(Ft.canonical,mi,In,ft.worldSize/ft._pixelsPerMercatorPixel),$i=s.globeNormalizeECEF(s.globeTileBounds(Ft.canonical)),Xi=Yo(ft.projMatrix,Lt,ct,$i,s.globeToMercatorTransition(ft.zoom),at,ft.frustumCorners.TL,ft.frustumCorners.TR,ft.frustumCorners.BR,ft.frustumCorners.BL,ft.globeCenterInViewSpace,ft.globeRadius,ht,St,Di);if(Ue(pi,Gt),K.setupElevationDraw(Kt,Ce,bt),q.prepareDrawProgram(Se,Ce,Ft.toUnwrapped()),Wt){const[ji,Us,Is]=Gt?Wt.getWirefameBuffers(q.context,In):Wt.getGridBuffers(In,St!==0);Ce.draw(Se,$t,Ge,Dn,je,s.CullFaceMode.backCCW,Xi,"globe_raster",ji,Us,Is)}}})),Wt){const Gt=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];De&&Gt.push("CUSTOM_ANTIALIASING"),Ce=q.useProgram("globeRaster",null,Gt);for(const ft of me){const{x:St,y:$t,z:Ft}=ft.canonical,Kt=$t===0,Dn=$t===(1<<Ft)-1,[Gn,Sn,Rn,pi]=Wt.getPoleBuffers(Ft);if(pi&&(Kt||Dn)){const mi=le.getTile(ft);Se.activeTexture.set(we.TEXTURE0),mi.texture.bind(we.LINEAR,we.CLAMP_TO_EDGE);let In=s.globePoleMatrixForTile(Ft,St,Pe);const Di=s.globeNormalizeECEF(s.globeTileBounds(ft.canonical)),$i=(Xi,ji)=>Xi.draw(Se,we.TRIANGLES,Ge,s.StencilMode.disabled,je,s.CullFaceMode.disabled,Yo(Pe.projMatrix,In,In,Di,0,at,Pe.frustumCorners.TL,Pe.frustumCorners.TR,Pe.frustumCorners.BR,Pe.frustumCorners.BL,Pe.globeCenterInViewSpace,Pe.globeRadius,ht,0),"globe_pole_raster",ji,Rn,pi);K.setupElevationDraw(mi,Ce,bt),q.prepareDrawProgram(Se,Ce,ft.toUnwrapped()),Kt&&$i(Ce,Gn),Dn&&(In=s.scale(s.create(),In,[1,-1,1]),$i(Ce,Sn))}}}})(S,C,L,O,U);else{const q=S.context,K=q.gl;let le,me;const xe=S.options.showTerrainWireframe?2:0,Se=(Pe,De)=>{if(me===Pe)return;const Ue=[ue[Pe]];De&&Ue.push(ue[xe]),le=S.useProgram("terrainRaster",null,Ue),me=Pe},we=S.colorModeForRenderPass(),Ce=new s.DepthMode(K.LEQUAL,s.DepthMode.ReadWrite,S.depthRangeFor3D);te.update(U);const ce=S.transform,ye=Me(ce.zoom)*C.exaggeration();(xe?[!1,!0]:[!1]).forEach((Pe=>{me=-1;const De=Pe?K.LINES:K.TRIANGLES,[Ue,je]=Pe?C.getWirefameBuffer():[C.gridIndexBuffer,C.gridSegments];for(const Ge of O){const ct=L.getTile(Ge),at=s.StencilMode.disabled,gt=C.prevTerrainTileForTile[Ge.key],Wt=C.terrainTileForTile[Ge.key];A(gt,Wt)&&te.newMorphing(Ge.key,gt,Wt,U,250),q.activeTexture.set(K.TEXTURE0),ct.texture.bind(K.LINEAR,K.CLAMP_TO_EDGE,K.LINEAR_MIPMAP_NEAREST);const ht=te.getMorphValuesForProxy(Ge.key),Lt=ht?1:0;let bt;ht&&(bt={morphing:{srcDemTile:ht.from,dstDemTile:ht.to,phase:s.easeCubicInOut(ht.phase)}});const Gt=lo(Ge.projMatrix,Tt(Ge.canonical,ce.renderWorldCopies)?ye/10:ye);Se(Lt,Pe),C.setupElevationDraw(ct,le,bt),S.prepareDrawProgram(q,le,Ge.toUnwrapped()),le.draw(q,De,Ce,at,we,s.CullFaceMode.backCCW,Gt,"terrain_raster",C.gridBuffer,Ue,je)}}))}})(m,this,this.proxySourceCache,u,this._updateTimestamp),this.renderingToTexture=!0,m.gpuTimingDeferredRenderEnd(),u.splice(0,u.length))}renderBatch(u){if(this._drapedRenderBatches.length===0)return u+1;this.renderingToTexture=!0;const m=this.painter,y=this.painter.context,S=this.proxySourceCache,C=this.proxiedCoords[S.id],L=this._drapedRenderBatches.shift(),O=[],U=m.style.order;let q=0;for(const K of C){const le=S.getTileByID(K.proxyTileKey),me=S.proxyCachedFBO[K.key]?S.proxyCachedFBO[K.key][u]:void 0,xe=me!==void 0?S.renderCache[me]:this.pool[q++],Se=me!==void 0;if(le.texture=xe.tex,Se&&!xe.dirty){O.push(le.tileID);continue}let we;y.bindFramebuffer.set(xe.fb.framebuffer),this.renderedToTile=!1,xe.dirty&&(y.clear({color:s.Color.transparent,stencil:0}),xe.dirty=!1);for(let Ce=L.start;Ce<=L.end;++Ce){const ce=m.style._layers[U[Ce]];if(ce.isHidden(m.transform.zoom))continue;const ye=m.style._getLayerSourceCache(ce),Pe=ye?this.proxyToSource[K.key][ye.id]:[K];if(!Pe)continue;const De=Pe;y.viewport.set([0,0,xe.fb.width,xe.fb.height]),we!==(ye?ye.id:null)&&(this._setupStencil(xe,Pe,ce,ye),we=ye?ye.id:null),m.renderLayer(m,ye,ce,De)}this.renderedToTile?(xe.dirty=!0,O.push(le.tileID)):Se||--q,q===5&&(q=0,this.renderToBackBuffer(O))}return this.renderToBackBuffer(O),this.renderingToTexture=!1,y.bindFramebuffer.set(null),y.viewport.set([0,0,m.width,m.height]),L.end+1}postRender(){}renderCacheEfficiency(u){const m=u.order.length;if(m===0)return{efficiency:100};let y,S=0,C=0,L=!1;for(let O=0;O<m;++O){const U=u._layers[u.order[O]];this._style.isLayerDraped(U)?(L&&++S,++C):L||(L=!0,y=U.id)}return C===0?{efficiency:100}:{efficiency:100*(1-S/C),firstUndrapedLayer:y}}getMinElevationBelowMSL(){let u=0;return this._visibleDemTiles.filter((m=>m.dem)).forEach((m=>{u=Math.min(u,m.dem.tree.minimums[0])})),u===0?u:(u-30)*this._exaggeration}raycast(u,m,y){if(!this._visibleDemTiles)return null;const S=this._visibleDemTiles.filter((C=>C.dem)).map((C=>{const L=C.tileID,O=1<<L.overscaledZ,{x:U,y:q}=L.canonical,K=U/O,le=(U+1)/O,me=q/O,xe=(q+1)/O;return{minx:K,miny:me,maxx:le,maxy:xe,t:C.dem.tree.raycastRoot(K,me,le,xe,u,m,y),tile:C}}));S.sort(((C,L)=>(C.t!==null?C.t:Number.MAX_VALUE)-(L.t!==null?L.t:Number.MAX_VALUE)));for(const C of S){if(C.t==null)return null;const L=C.tile.dem.tree.raycast(C.minx,C.miny,C.maxx,C.maxy,u,m,y);if(L!=null)return L}return null}_createFBO(){const u=this.painter.context,m=u.gl,y=this.drapeBufferSize;u.activeTexture.set(m.TEXTURE0);const S=new s.Texture(u,{width:y[0],height:y[1],data:null},m.RGBA);S.bind(m.LINEAR,m.CLAMP_TO_EDGE);const C=u.createFramebuffer(y[0],y[1],!1);return C.colorAttachment.set(S.texture),C.depthAttachment=new rt(u,C.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=u.createRenderbuffer(u.gl.DEPTH_STENCIL,y[0],y[1]),this._stencilRef=0,C.depthAttachment.set(this._sharedDepthStencil),u.clear({stencil:0})):C.depthAttachment.set(this._sharedDepthStencil),u.extTextureFilterAnisotropic&&!u.extTextureFilterAnisotropicForceOff&&m.texParameterf(m.TEXTURE_2D,u.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,u.extTextureFilterAnisotropicMax),{fb:C,tex:S,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const u in this._style._sourceCaches)if(this._style._sourceCaches[u].hasTransition())return!0;return this._style.order.some((u=>{const m=this._style._layers[u],y=m.isHidden(this.painter.transform.zoom);return m.type==="custom"?!y&&m.shouldRedrape():!y&&m.hasTransition()}))}_clearLineLayersFromRenderCache(){let u=!1;for(const y of this._style._getSources())if(y instanceof cn){u=!0;break}if(!u)return;const m={};for(let y=0;y<this._style.order.length;++y){const S=this._style._layers[this._style.order[y]],C=this._style._getLayerSourceCache(S);if(C&&!m[C.id]&&!S.isHidden(this.painter.transform.zoom)&&S.type==="line"&&S.widthExpression()instanceof s.ZoomDependentExpression){m[C.id]=!0;for(const L of this.proxyCoords){const O=this.proxyToSource[L.key][C.id];if(O)for(const U of O)this._clearRenderCacheForTile(C.id,U)}}}}_clearRasterLayersFromRenderCache(){let u=!1;for(const y in this._style._sourceCaches)if(this._style._sourceCaches[y]._source instanceof en){u=!0;break}if(!u)return;const m={};for(let y=0;y<this._style.order.length;++y){const S=this._style._layers[this._style.order[y]],C=this._style._getLayerSourceCache(S);if(!C||m[C.id]||S.isHidden(this.painter.transform.zoom)||S.type!=="raster")continue;const L=S.paint.get("raster-fade-duration");for(const O of this.proxyCoords){const U=this.proxyToSource[O.key][C.id];if(U)for(const q of U){const K=yn(C.getTile(q),C.findLoadedParent(q,0),C,this.painter.transform,L);(K.opacity!==1||K.mix!==0)&&this._clearRenderCacheForTile(C.id,q)}}}}_setupDrapedRenderBatches(){const u=this._style.order,m=u.length;if(m===0)return;const y=[];let S,C=0,L=this._style._layers[u[C]];for(;!this._style.isLayerDraped(L)&&L.isHidden(this.painter.transform.zoom)&&++C<m;)L=this._style._layers[u[C]];for(;C<m;++C){const O=this._style._layers[u[C]];O.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(O)?S===void 0&&(S=C):S!==void 0&&(y.push({start:S,end:C-1}),S=void 0))}S!==void 0&&y.push({start:S,end:C-1}),this._drapedRenderBatches=y}_setupRenderCache(u){const m=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,m.renderCache.length>m.renderCachePool.length){const L=Object.values(m.proxyCachedFBO);m.proxyCachedFBO={};for(let O=0;O<L.length;++O){const U=Object.values(L[O]);m.renderCachePool.push(...U)}}return}this._clearRasterLayersFromRenderCache();const y=this.proxyCoords,S=this._tilesDirty;for(let L=y.length-1;L>=0;L--){const O=y[L];if(m.getTileByID(O.key),m.proxyCachedFBO[O.key]!==void 0){const U=u[O.key],q=this.proxyToSource[O.key];let K=0;for(const le in q){const me=q[le],xe=U[le];if(!xe||xe.length!==me.length||me.some(((Se,we)=>Se!==xe[we]||S[le]&&S[le].hasOwnProperty(Se.key)))){K=-1;break}++K}for(const le in m.proxyCachedFBO[O.key])m.renderCache[m.proxyCachedFBO[O.key][le]].dirty=K<0||K!==Object.values(U).length}}const C=[...this._drapedRenderBatches];C.sort(((L,O)=>O.end-O.start-(L.end-L.start)));for(const L of C)for(const O of y){if(m.proxyCachedFBO[O.key])continue;let U=m.renderCachePool.pop();U===void 0&&m.renderCache.length<50&&(U=m.renderCache.length,m.renderCache.push(this._createFBO())),U!==void 0&&(m.proxyCachedFBO[O.key]={},m.proxyCachedFBO[O.key][L.start]=U,m.renderCache[U].dirty=!0)}this._tilesDirty={}}_setupStencil(u,m,y,S){if(!S||!this._sourceTilesOverlap[S.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const C=this.painter.context,L=C.gl;if(m.length<=1)return void(this._overlapStencilType=!1);let O;if(y.isTileClipped())O=m.length,this._overlapStencilMode.test={func:L.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(m[0].overscaledZ>m[m.length-1].overscaledZ))return void(this._overlapStencilType=!1);O=1,this._overlapStencilMode.test={func:L.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+O>255&&(C.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=O,this._overlapStencilMode.ref=this._stencilRef,y.isTileClipped()&&this._renderTileClippingMasks(m,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(u){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[u.key]),this._overlapStencilMode):s.StencilMode.disabled}_renderTileClippingMasks(u,m){const y=this.painter,S=this.painter.context,C=S.gl;y._tileClippingMaskIDs={},S.setColorMode(s.ColorMode.disabled),S.setDepthMode(s.DepthMode.disabled);const L=y.useProgram("clippingMask");for(const O of u){const U=y._tileClippingMaskIDs[O.key]=--m;L.draw(S,C.TRIANGLES,s.DepthMode.disabled,new s.StencilMode({func:C.ALWAYS,mask:0},U,255,C.KEEP,C.KEEP,C.REPLACE),s.ColorMode.disabled,s.CullFaceMode.disabled,Mt(O.projMatrix),"$clipping",y.tileExtentBuffer,y.quadTriangleIndexBuffer,y.tileExtentSegments)}}pointCoordinate(u){const m=this.painter.transform;if(u.x<0||u.x>m.width||u.y<0||u.y>m.height)return null;const y=[u.x,u.y,1,1];s.transformMat4$1(y,y,m.pixelMatrixInverse),s.scale$1(y,y,1/y[3]),y[0]/=m.worldSize,y[1]/=m.worldSize;const S=m._camera.position,C=s.mercatorZfromAltitude(1,m.center.lat),L=[S[0],S[1],S[2]/C,0],O=s.subtract([],y.slice(0,3),L);s.normalize(O,O);const U=this.raycast(L,O,this._exaggeration);return U!==null&&U?(s.scaleAndAdd(L,L,O,U),L[3]=L[2],L[2]*=C,L):null}drawDepth(){const u=this.painter,m=u.context,y=this.proxySourceCache,S=Math.ceil(u.width),C=Math.ceil(u.height);if(!this._depthFBO||this._depthFBO.width===S&&this._depthFBO.height===C||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const L=m.gl,O=m.createFramebuffer(S,C,!0);m.activeTexture.set(L.TEXTURE0);const U=new s.Texture(m,{width:S,height:C,data:null},L.RGBA);U.bind(L.NEAREST,L.CLAMP_TO_EDGE),O.colorAttachment.set(U.texture);const q=m.createRenderbuffer(m.gl.DEPTH_COMPONENT16,S,C);O.depthAttachment.set(q),this._depthFBO=O,this._depthTexture=U}m.bindFramebuffer.set(this._depthFBO.framebuffer),m.viewport.set([0,0,S,C]),(function(L,O,U,q){if(L.transform.projection.name==="globe")return;const K=L.context,le=K.gl;K.clear({depth:1});const me=L.useProgram("terrainDepth"),xe=new s.DepthMode(le.LESS,s.DepthMode.ReadWrite,L.depthRangeFor3D);for(const Se of q){const we=U.getTile(Se),Ce=lo(Se.projMatrix,0);O.setupElevationDraw(we,me),me.draw(K,le.TRIANGLES,xe,s.StencilMode.disabled,s.ColorMode.unblended,s.CullFaceMode.backCCW,Ce,"terrain_depth",O.gridBuffer,O.gridIndexBuffer,O.gridNoSkirtSegments)}})(u,this,y,this.proxyCoords)}_setupProxiedCoordsForOrtho(u,m,y){if(u.getSource()instanceof Jn)return this._setupProxiedCoordsForImageSource(u,m,y);this._findCoveringTileCache[u.id]=this._findCoveringTileCache[u.id]||{};const S=this.proxiedCoords[u.id]=[],C=this.proxyCoords;for(let O=0;O<C.length;O++){const U=C[O],q=this._findTileCoveringTileID(U,u);if(q){const K=this._createProxiedId(U,q,y[U.key]&&y[U.key][u.id]);S.push(K),this.proxyToSource[U.key][u.id]=[K]}}let L=!1;for(let O=0;O<m.length;O++){const U=u.getTile(m[O]);if(!U||!U.hasData())continue;const q=this._findTileCoveringTileID(U.tileID,this.proxySourceCache);if(q&&q.tileID.canonical.z!==U.tileID.canonical.z){const K=this.proxyToSource[q.tileID.key][u.id],le=this._createProxiedId(q.tileID,U,y[q.tileID.key]&&y[q.tileID.key][u.id]);K?K.splice(K.length-1,0,le):this.proxyToSource[q.tileID.key][u.id]=[le],S.push(le),L=!0}}this._sourceTilesOverlap[u.id]=L}_setupProxiedCoordsForImageSource(u,m,y){if(!u.getSource().loaded())return;const S=this.proxiedCoords[u.id]=[],C=this.proxyCoords,L=u.getSource(),O=new s.Point(L.tileID.x,L.tileID.y)._div(1<<L.tileID.z),U=L.coordinates.map(s.MercatorCoordinate.fromLngLat).reduce(((K,le)=>(K.min.x=Math.min(K.min.x,le.x-O.x),K.min.y=Math.min(K.min.y,le.y-O.y),K.max.x=Math.max(K.max.x,le.x-O.x),K.max.y=Math.max(K.max.y,le.y-O.y),K)),{min:new s.Point(Number.MAX_VALUE,Number.MAX_VALUE),max:new s.Point(-Number.MAX_VALUE,-Number.MAX_VALUE)}),q=(K,le)=>{const me=K.wrap+K.canonical.x/(1<<K.canonical.z),xe=K.canonical.y/(1<<K.canonical.z),Se=s.EXTENT/(1<<K.canonical.z),we=le.wrap+le.canonical.x/(1<<le.canonical.z),Ce=le.canonical.y/(1<<le.canonical.z);return me+Se<we+U.min.x||me>we+U.max.x||xe+Se<Ce+U.min.y||xe>Ce+U.max.y};for(let K=0;K<C.length;K++){const le=C[K];for(let me=0;me<m.length;me++){const xe=u.getTile(m[me]);if(!xe||!xe.hasData()||q(le,xe.tileID))continue;const Se=this._createProxiedId(le,xe,y[le.key]&&y[le.key][u.id]),we=this.proxyToSource[le.key][u.id];we?we.push(Se):this.proxyToSource[le.key][u.id]=[Se],S.push(Se)}}}_createProxiedId(u,m,y){let S=this.orthoMatrix;if(y){const C=y.find((L=>L.key===m.tileID.key));if(C)return C}if(m.tileID.key!==u.key){const C=u.canonical.z-m.tileID.canonical.z;let L,O,U;S=s.create();const q=m.tileID.wrap-u.wrap<<u.overscaledZ;C>0?(L=s.EXTENT>>C,O=L*((m.tileID.canonical.x<<C)-u.canonical.x+q),U=L*((m.tileID.canonical.y<<C)-u.canonical.y)):(L=s.EXTENT<<-C,O=s.EXTENT*(m.tileID.canonical.x-(u.canonical.x+q<<-C)),U=s.EXTENT*(m.tileID.canonical.y-(u.canonical.y<<-C))),s.ortho(S,0,L,0,L,0,1),s.translate(S,S,[O,U,0])}return new Si(m.tileID,u.key,S)}_findTileCoveringTileID(u,m){let y=m.getTile(u);if(y&&y.hasData())return y;const S=this._findCoveringTileCache[m.id],C=S[u.key];if(y=C?m.getTileByID(C):null,y&&y.hasData()||C===null)return y;let L=y?y.tileID:u,O=L.overscaledZ;const U=m.getSource().minzoom,q=[];if(!C){const le=m.getSource().maxzoom;if(u.canonical.z>=le){const me=u.canonical.z-le;m.getSource().reparseOverscaled?(O=Math.max(u.canonical.z+2,m.transform.tileZoom),L=new s.OverscaledTileID(O,u.wrap,le,u.canonical.x>>me,u.canonical.y>>me)):me!==0&&(O=le,L=new s.OverscaledTileID(O,u.wrap,le,u.canonical.x>>me,u.canonical.y>>me))}L.key!==u.key&&(q.push(L.key),y=m.getTile(L))}const K=le=>{q.forEach((me=>{S[me]=le})),q.length=0};for(O-=1;O>=U&&(!y||!y.hasData());O--){y&&K(y.tileID.key);const le=L.calculateScaledKey(O);if(y=m.getTileByID(le),y&&y.hasData())break;const me=S[le];if(me===null)break;me===void 0?q.push(le):y=m.getTileByID(me)}return K(y?y.tileID.key:null),y&&y.hasData()?y:null}findDEMTileFor(u){return this.enabled?this._findTileCoveringTileID(u,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(u,m){let y=this._tilesDirty[u];y||(y=this._tilesDirty[u]={}),y[m.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const u=(function(m){let y=0;const S=new s.StructArrayLayout2ui4,C=131;for(let L=1;L<129;L++){for(let O=1;O<129;O++)y=L*C+O,S.emplaceBack(y,y+1),S.emplaceBack(y,y+C),S.emplaceBack(y+1,y+C),L===128&&S.emplaceBack(y+C,y+C+1);S.emplaceBack(y+1,y+1+C)}return S})();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(u),this.wireframeSegments=s.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,u.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}class Qn{static cacheKey(u,m,y,S){let C=`${m}${S?S.cacheKey:""}`;for(const L of y)u.usedDefines.includes(L)&&(C+=`/${L}`);return C}constructor(u,m,y,S,C,L){const O=u.gl;this.program=O.createProgram();const U=(function(ce){const ye=[];for(let Pe=0;Pe<ce.length;Pe++){if(ce[Pe]===null)continue;const De=ce[Pe].split(" ");ye.push(De.pop())}return ye})(y.staticAttributes),q=S?S.getBinderAttributes():[],K=U.concat(q);let le=S?S.defines():[];le=le.concat(L.map((ce=>`#define ${ce}`)));const me=u.isWebGL2?`#version 300 es
`:"",xe=me+le.concat(u.extStandardDerivatives&&me.length===0?`#extension GL_OES_standard_derivatives : enable
`.concat(xu):xu,xu,gl,jc.fragmentSource,Ya.fragmentSource,y.fragmentSource).join(`
`),Se=me+le.concat(`
#ifdef GL_ES
precision highp float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`,gl,jc.vertexSource,Ya.vertexSource,gc.vertexSource,y.vertexSource).join(`
`),we=O.createShader(O.FRAGMENT_SHADER);if(O.isContextLost())return void(this.failedToCreate=!0);O.shaderSource(we,xe),O.compileShader(we),O.attachShader(this.program,we);const Ce=O.createShader(O.VERTEX_SHADER);if(O.isContextLost())this.failedToCreate=!0;else{O.shaderSource(Ce,Se),O.compileShader(Ce),O.attachShader(this.program,Ce),this.attributes={},this.numAttributes=K.length;for(let ce=0;ce<this.numAttributes;ce++)K[ce]&&(O.bindAttribLocation(this.program,ce,K[ce]),this.attributes[K[ce]]=ce);O.linkProgram(this.program),O.deleteShader(Ce),O.deleteShader(we),this.fixedUniforms=C(u),this.binderUniforms=S?S.getUniforms(u):[],L.includes("TERRAIN")&&(this.terrainUniforms=(ce=>({u_dem:new s.Uniform1i(ce),u_dem_prev:new s.Uniform1i(ce),u_dem_unpack:new s.Uniform4f(ce),u_dem_tl:new s.Uniform2f(ce),u_dem_scale:new s.Uniform1f(ce),u_dem_tl_prev:new s.Uniform2f(ce),u_dem_scale_prev:new s.Uniform1f(ce),u_dem_size:new s.Uniform1f(ce),u_dem_lerp:new s.Uniform1f(ce),u_exaggeration:new s.Uniform1f(ce),u_depth:new s.Uniform1i(ce),u_depth_size_inv:new s.Uniform2f(ce),u_meter_to_dem:new s.Uniform1f(ce),u_label_plane_matrix_inv:new s.UniformMatrix4f(ce)}))(u)),L.includes("GLOBE")&&(this.globeUniforms=(ce=>({u_tile_tl_up:new s.Uniform3f(ce),u_tile_tr_up:new s.Uniform3f(ce),u_tile_br_up:new s.Uniform3f(ce),u_tile_bl_up:new s.Uniform3f(ce),u_tile_up_scale:new s.Uniform1f(ce)}))(u)),L.includes("FOG")&&(this.fogUniforms=(ce=>({u_fog_matrix:new s.UniformMatrix4f(ce),u_fog_range:new s.Uniform2f(ce),u_fog_color:new s.Uniform4f(ce),u_fog_horizon_blend:new s.Uniform1f(ce),u_fog_temporal_offset:new s.Uniform1f(ce),u_frustum_tl:new s.Uniform3f(ce),u_frustum_tr:new s.Uniform3f(ce),u_frustum_br:new s.Uniform3f(ce),u_frustum_bl:new s.Uniform3f(ce),u_globe_pos:new s.Uniform3f(ce),u_globe_radius:new s.Uniform1f(ce),u_globe_transition:new s.Uniform1f(ce),u_is_globe:new s.Uniform1i(ce),u_viewport:new s.Uniform2f(ce)}))(u))}}setTerrainUniformValues(u,m){if(!this.terrainUniforms)return;const y=this.terrainUniforms;if(!this.failedToCreate){u.program.set(this.program);for(const S in m)y[S]&&y[S].set(this.program,S,m[S])}}setGlobeUniformValues(u,m){if(!this.globeUniforms)return;const y=this.globeUniforms;if(!this.failedToCreate){u.program.set(this.program);for(const S in m)y[S]&&y[S].set(this.program,S,m[S])}}setFogUniformValues(u,m){if(!this.fogUniforms)return;const y=this.fogUniforms;if(!this.failedToCreate){u.program.set(this.program);for(const S in m)y[S].set(this.program,S,m[S])}}draw(u,m,y,S,C,L,O,U,q,K,le,me,xe,Se,we){const Ce=u.gl;if(this.failedToCreate)return;u.program.set(this.program),u.setDepthMode(y),u.setStencilMode(S),u.setColorMode(C),u.setCullFace(L);for(const ye of Object.keys(this.fixedUniforms))this.fixedUniforms[ye].set(this.program,ye,O[ye]);Se&&Se.setUniforms(this.program,u,this.binderUniforms,me,{zoom:xe});const ce={[Ce.LINES]:2,[Ce.TRIANGLES]:3,[Ce.LINE_STRIP]:1}[m];for(const ye of le.get()){const Pe=ye.vaos||(ye.vaos={});(Pe[U]||(Pe[U]=new Wc)).bind(u,this,q,Se?Se.getPaintVertexBuffers():[],K,ye.vertexOffset,we||[]),Ce.drawElements(m,ye.primitiveLength*ce,Ce.UNSIGNED_SHORT,ye.primitiveOffset*ce*2)}}}function Xs(v,u){const m=Math.pow(2,u.tileID.overscaledZ),y=u.tileSize*Math.pow(2,v.transform.tileZoom)/m,S=y*(u.tileID.canonical.x+u.tileID.wrap*m),C=y*u.tileID.canonical.y;return{u_image:0,u_texsize:u.imageAtlasTexture.size,u_tile_units_to_pixels:1/Je(u,1,v.transform.tileZoom),u_pixel_coord_upper:[S>>16,C>>16],u_pixel_coord_lower:[65535&S,65535&C]}}const Za=s.create(),ya=(v,u,m,y,S,C,L,O,U,q,K)=>{const le=u.style.light,me=le.properties.get("position"),xe=[me.x,me.y,me.z],Se=s.create$1();le.properties.get("anchor")==="viewport"&&(s.fromRotation(Se,-u.transform.angle),s.transformMat3(xe,xe,Se));const we=le.properties.get("color"),Ce=u.transform,ce={u_matrix:v,u_lightpos:xe,u_lightintensity:le.properties.get("intensity"),u_lightcolor:[we.r,we.g,we.b],u_vertical_gradient:+m,u_opacity:y,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Za,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:S,u_edge_radius:C};return Ce.projection.name==="globe"&&(ce.u_tile_id=[L.canonical.x,L.canonical.y,1<<L.canonical.z],ce.u_zoom_transition=U,ce.u_inv_rot_matrix=K,ce.u_merc_center=q,ce.u_up_dir=Ce.projection.upVector(new s.CanonicalTileID(0,0,0),q[0]*s.EXTENT,q[1]*s.EXTENT),ce.u_height_lift=O),ce},Gc=(v,u,m,y,S,C,L,O,U,q,K,le)=>{const me=ya(v,u,m,y,S,C,L,U,q,K,le),xe={u_height_factor:-Math.pow(2,L.overscaledZ)/O.tileSize/8};return s.extend(me,Xs(u,O),xe)},Ja=v=>({u_matrix:v}),bm=(v,u,m)=>s.extend(Ja(v),Xs(u,m)),L_=(v,u)=>({u_matrix:v,u_world:u}),R_=(v,u,m,y)=>s.extend(bm(v,u,m),{u_world:y}),O_=s.create(),Zo=(v,u,m,y,S,C)=>{const L=v.transform,O=L.projection.name==="globe";let U;if(C.paint.get("circle-pitch-alignment")==="map")if(O){const K=s.globePixelsToTileUnits(L.zoom,u.canonical)*L._pixelsPerMercatorPixel;U=Float32Array.from([K,0,0,K])}else U=L.calculatePixelsToTileUnitsMatrix(m);else U=new Float32Array([L.pixelsToGLUnits[0],0,0,L.pixelsToGLUnits[1]]);const q={u_camera_to_center_distance:L.cameraToCenterDistance,u_matrix:v.translatePosMatrix(u.projMatrix,m,C.paint.get("circle-translate"),C.paint.get("circle-translate-anchor")),u_device_pixel_ratio:s.exported.devicePixelRatio,u_extrude_scale:U,u_inv_rot_matrix:O_,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(O){q.u_inv_rot_matrix=y,q.u_merc_center=S,q.u_tile_id=[u.canonical.x,u.canonical.y,1<<u.canonical.z],q.u_zoom_transition=s.globeToMercatorTransition(L.zoom);const K=S[0]*s.EXTENT,le=S[1]*s.EXTENT;q.u_up_dir=L.projection.upVector(new s.CanonicalTileID(0,0,0),K,le)}return q},Vh=v=>{const u=[];return v.paint.get("circle-pitch-alignment")==="map"&&u.push("PITCH_WITH_MAP"),v.paint.get("circle-pitch-scale")==="map"&&u.push("SCALE_WITH_MAP"),u},Bh=(v,u,m,y)=>{const S=s.EXTENT/m.tileSize;return{u_matrix:v,u_camera_to_center_distance:u.getCameraToCenterDistance(y),u_extrude_scale:[u.pixelsToGLUnits[0]/S,u.pixelsToGLUnits[1]/S]}},yd=(v,u,m=1)=>({u_matrix:v,u_color:u,u_overlay:0,u_overlay_scale:m}),pg=s.create(),gg=(v,u,m,y,S,C,L)=>{const O=v.transform,U=O.projection.name==="globe",q=U?s.globePixelsToTileUnits(O.zoom,u.canonical)*O._pixelsPerMercatorPixel:Je(m,1,C),K={u_matrix:u.projMatrix,u_extrude_scale:q,u_intensity:L,u_inv_rot_matrix:pg,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(U){K.u_inv_rot_matrix=y,K.u_merc_center=S,K.u_tile_id=[u.canonical.x,u.canonical.y,1<<u.canonical.z],K.u_zoom_transition=s.globeToMercatorTransition(O.zoom);const le=S[0]*s.EXTENT,me=S[1]*s.EXTENT;K.u_up_dir=O.projection.upVector(new s.CanonicalTileID(0,0,0),le,me)}return K},vg=(v,u,m,y,S,C,L)=>{const O=v.transform,U=O.calculatePixelsToTileUnitsMatrix(u);return{u_matrix:xm(v,u,m,y),u_pixels_to_tile_units:U,u_device_pixel_ratio:C,u_units_to_pixels:[1/O.pixelsToGLUnits[0],1/O.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:S,u_texsize:Eu(m)?u.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:Su(u,v.transform),u_alpha_discard_threshold:0,u_trim_offset:L}},vc=(v,u,m,y,S)=>{const C=v.transform;return{u_matrix:xm(v,u,m,y),u_texsize:u.imageAtlasTexture.size,u_pixels_to_tile_units:C.calculatePixelsToTileUnitsMatrix(u),u_device_pixel_ratio:S,u_image:0,u_tile_units_to_pixels:Su(u,C),u_units_to_pixels:[1/C.pixelsToGLUnits[0],1/C.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function Su(v,u){return 1/Je(v,1,u.tileZoom)}function xm(v,u,m,y){return v.translatePosMatrix(y||u.tileID.projMatrix,u,m.paint.get("line-translate"),m.paint.get("line-translate-anchor"))}function Eu(v){const u=v.paint.get("line-dasharray").value;return u.value||u.kind!=="constant"}const wm=(v,u,m,y,S,C)=>{return{u_matrix:v,u_tl_parent:u,u_scale_parent:m,u_fade_t:y.mix,u_opacity:y.opacity*S.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:S.paint.get("raster-brightness-min"),u_brightness_high:S.paint.get("raster-brightness-max"),u_saturation_factor:(O=S.paint.get("raster-saturation"),O>0?1-1/(1.001-O):-O),u_contrast_factor:(L=S.paint.get("raster-contrast"),L>0?1/(1-L):1+L),u_spin_weights:_l(S.paint.get("raster-hue-rotate")),u_perspective_transform:C};var L,O};function _l(v){v*=Math.PI/180;const u=Math.sin(v),m=Math.cos(v);return[(2*m+1)/3,(-Math.sqrt(3)*u-m+1)/3,(Math.sqrt(3)*u-m+1)/3]}const bd=s.create(),Fh=(v,u,m,y,S,C,L,O,U,q,K,le,me,xe,Se,we)=>{const Ce=S.transform,ce={u_is_size_zoom_constant:+(v==="constant"||v==="source"),u_is_size_feature_constant:+(v==="constant"||v==="camera"),u_size_t:u?u.uSizeT:0,u_size:u?u.uSize:0,u_camera_to_center_distance:Ce.cameraToCenterDistance,u_rotate_symbol:+m,u_aspect_ratio:Ce.width/Ce.height,u_fade_change:S.options.fadeDuration?S.symbolFadeChange:1,u_matrix:C,u_label_plane_matrix:L,u_coord_matrix:O,u_is_text:+U,u_pitch_with_map:+y,u_texsize:q,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:bd,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:bd,u_up_vector:[0,-1,0]};return we.name==="globe"&&(ce.u_tile_id=[K.canonical.x,K.canonical.y,1<<K.canonical.z],ce.u_zoom_transition=le,ce.u_inv_rot_matrix=xe,ce.u_merc_center=me,ce.u_camera_forward=Ce._camera.forward(),ce.u_ecef_origin=s.globeECEFOrigin(Ce.globeMatrix,K.toUnwrapped()),ce.u_tile_matrix=Float32Array.from(Ce.globeMatrix),ce.u_up_vector=Se),ce},xd=(v,u,m,y,S,C,L,O,U,q,K,le,me,xe,Se,we,Ce)=>s.extend(Fh(v,u,m,y,S,C,L,O,U,q,le,me,xe,Se,we,Ce),{u_gamma_scale:y?S.transform.cameraToCenterDistance*Math.cos(S.terrain?0:S.transform._pitch):1,u_device_pixel_ratio:s.exported.devicePixelRatio,u_is_halo:1}),wd=(v,u,m,y,S,C,L,O,U,q,K,le,me,xe,Se,we)=>s.extend(xd(v,u,m,y,S,C,L,O,!0,U,!0,K,le,me,xe,Se,we),{u_texsize_icon:q,u_texture_icon:1}),zh=(v,u,m)=>({u_matrix:v,u_opacity:u,u_color:m}),Tm=(v,u,m,y,S)=>s.extend((function(C,L,O){const U=L.imageManager.getPattern(C.toString()),{width:q,height:K}=L.imageManager.getPixelSize(),le=Math.pow(2,O.tileID.overscaledZ),me=O.tileSize*Math.pow(2,L.transform.tileZoom)/le,xe=me*(O.tileID.canonical.x+O.tileID.wrap*le),Se=me*O.tileID.canonical.y;return{u_image:0,u_pattern_tl:U.tl,u_pattern_br:U.br,u_texsize:[q,K],u_pattern_size:U.displaySize,u_tile_units_to_pixels:1/Je(O,1,L.transform.tileZoom),u_pixel_coord_upper:[xe>>16,Se>>16],u_pixel_coord_lower:[65535&xe,65535&Se]}})(y,m,S),{u_matrix:v,u_opacity:u}),Do={fillExtrusion:v=>({u_matrix:new s.UniformMatrix4f(v),u_lightpos:new s.Uniform3f(v),u_lightintensity:new s.Uniform1f(v),u_lightcolor:new s.Uniform3f(v),u_vertical_gradient:new s.Uniform1f(v),u_opacity:new s.Uniform1f(v),u_edge_radius:new s.Uniform1f(v),u_ao:new s.Uniform2f(v),u_tile_id:new s.Uniform3f(v),u_zoom_transition:new s.Uniform1f(v),u_inv_rot_matrix:new s.UniformMatrix4f(v),u_merc_center:new s.Uniform2f(v),u_up_dir:new s.Uniform3f(v),u_height_lift:new s.Uniform1f(v)}),fillExtrusionPattern:v=>({u_matrix:new s.UniformMatrix4f(v),u_lightpos:new s.Uniform3f(v),u_lightintensity:new s.Uniform1f(v),u_lightcolor:new s.Uniform3f(v),u_vertical_gradient:new s.Uniform1f(v),u_height_factor:new s.Uniform1f(v),u_edge_radius:new s.Uniform1f(v),u_ao:new s.Uniform2f(v),u_tile_id:new s.Uniform3f(v),u_zoom_transition:new s.Uniform1f(v),u_inv_rot_matrix:new s.UniformMatrix4f(v),u_merc_center:new s.Uniform2f(v),u_up_dir:new s.Uniform3f(v),u_height_lift:new s.Uniform1f(v),u_image:new s.Uniform1i(v),u_texsize:new s.Uniform2f(v),u_pixel_coord_upper:new s.Uniform2f(v),u_pixel_coord_lower:new s.Uniform2f(v),u_tile_units_to_pixels:new s.Uniform1f(v),u_opacity:new s.Uniform1f(v)}),fill:v=>({u_matrix:new s.UniformMatrix4f(v)}),fillPattern:v=>({u_matrix:new s.UniformMatrix4f(v),u_image:new s.Uniform1i(v),u_texsize:new s.Uniform2f(v),u_pixel_coord_upper:new s.Uniform2f(v),u_pixel_coord_lower:new s.Uniform2f(v),u_tile_units_to_pixels:new s.Uniform1f(v)}),fillOutline:v=>({u_matrix:new s.UniformMatrix4f(v),u_world:new s.Uniform2f(v)}),fillOutlinePattern:v=>({u_matrix:new s.UniformMatrix4f(v),u_world:new s.Uniform2f(v),u_image:new s.Uniform1i(v),u_texsize:new s.Uniform2f(v),u_pixel_coord_upper:new s.Uniform2f(v),u_pixel_coord_lower:new s.Uniform2f(v),u_tile_units_to_pixels:new s.Uniform1f(v)}),circle:v=>({u_camera_to_center_distance:new s.Uniform1f(v),u_extrude_scale:new s.UniformMatrix2f(v),u_device_pixel_ratio:new s.Uniform1f(v),u_matrix:new s.UniformMatrix4f(v),u_inv_rot_matrix:new s.UniformMatrix4f(v),u_merc_center:new s.Uniform2f(v),u_tile_id:new s.Uniform3f(v),u_zoom_transition:new s.Uniform1f(v),u_up_dir:new s.Uniform3f(v)}),collisionBox:v=>({u_matrix:new s.UniformMatrix4f(v),u_camera_to_center_distance:new s.Uniform1f(v),u_extrude_scale:new s.Uniform2f(v)}),collisionCircle:v=>({u_matrix:new s.UniformMatrix4f(v),u_inv_matrix:new s.UniformMatrix4f(v),u_camera_to_center_distance:new s.Uniform1f(v),u_viewport_size:new s.Uniform2f(v)}),debug:v=>({u_color:new s.UniformColor(v),u_matrix:new s.UniformMatrix4f(v),u_overlay:new s.Uniform1i(v),u_overlay_scale:new s.Uniform1f(v)}),clippingMask:v=>({u_matrix:new s.UniformMatrix4f(v)}),heatmap:v=>({u_extrude_scale:new s.Uniform1f(v),u_intensity:new s.Uniform1f(v),u_matrix:new s.UniformMatrix4f(v),u_inv_rot_matrix:new s.UniformMatrix4f(v),u_merc_center:new s.Uniform2f(v),u_tile_id:new s.Uniform3f(v),u_zoom_transition:new s.Uniform1f(v),u_up_dir:new s.Uniform3f(v)}),heatmapTexture:v=>({u_image:new s.Uniform1i(v),u_color_ramp:new s.Uniform1i(v),u_opacity:new s.Uniform1f(v)}),hillshade:v=>({u_matrix:new s.UniformMatrix4f(v),u_image:new s.Uniform1i(v),u_latrange:new s.Uniform2f(v),u_light:new s.Uniform2f(v),u_shadow:new s.UniformColor(v),u_highlight:new s.UniformColor(v),u_accent:new s.UniformColor(v)}),hillshadePrepare:v=>({u_matrix:new s.UniformMatrix4f(v),u_image:new s.Uniform1i(v),u_dimension:new s.Uniform2f(v),u_zoom:new s.Uniform1f(v),u_unpack:new s.Uniform4f(v)}),line:v=>({u_matrix:new s.UniformMatrix4f(v),u_pixels_to_tile_units:new s.UniformMatrix2f(v),u_device_pixel_ratio:new s.Uniform1f(v),u_units_to_pixels:new s.Uniform2f(v),u_dash_image:new s.Uniform1i(v),u_gradient_image:new s.Uniform1i(v),u_image_height:new s.Uniform1f(v),u_texsize:new s.Uniform2f(v),u_tile_units_to_pixels:new s.Uniform1f(v),u_alpha_discard_threshold:new s.Uniform1f(v),u_trim_offset:new s.Uniform2f(v)}),linePattern:v=>({u_matrix:new s.UniformMatrix4f(v),u_texsize:new s.Uniform2f(v),u_pixels_to_tile_units:new s.UniformMatrix2f(v),u_device_pixel_ratio:new s.Uniform1f(v),u_image:new s.Uniform1i(v),u_units_to_pixels:new s.Uniform2f(v),u_tile_units_to_pixels:new s.Uniform1f(v),u_alpha_discard_threshold:new s.Uniform1f(v)}),raster:v=>({u_matrix:new s.UniformMatrix4f(v),u_tl_parent:new s.Uniform2f(v),u_scale_parent:new s.Uniform1f(v),u_fade_t:new s.Uniform1f(v),u_opacity:new s.Uniform1f(v),u_image0:new s.Uniform1i(v),u_image1:new s.Uniform1i(v),u_brightness_low:new s.Uniform1f(v),u_brightness_high:new s.Uniform1f(v),u_saturation_factor:new s.Uniform1f(v),u_contrast_factor:new s.Uniform1f(v),u_spin_weights:new s.Uniform3f(v),u_perspective_transform:new s.Uniform2f(v)}),symbolIcon:v=>({u_is_size_zoom_constant:new s.Uniform1i(v),u_is_size_feature_constant:new s.Uniform1i(v),u_size_t:new s.Uniform1f(v),u_size:new s.Uniform1f(v),u_camera_to_center_distance:new s.Uniform1f(v),u_rotate_symbol:new s.Uniform1i(v),u_aspect_ratio:new s.Uniform1f(v),u_fade_change:new s.Uniform1f(v),u_matrix:new s.UniformMatrix4f(v),u_label_plane_matrix:new s.UniformMatrix4f(v),u_coord_matrix:new s.UniformMatrix4f(v),u_is_text:new s.Uniform1i(v),u_pitch_with_map:new s.Uniform1i(v),u_texsize:new s.Uniform2f(v),u_tile_id:new s.Uniform3f(v),u_zoom_transition:new s.Uniform1f(v),u_inv_rot_matrix:new s.UniformMatrix4f(v),u_merc_center:new s.Uniform2f(v),u_camera_forward:new s.Uniform3f(v),u_tile_matrix:new s.UniformMatrix4f(v),u_up_vector:new s.Uniform3f(v),u_ecef_origin:new s.Uniform3f(v),u_texture:new s.Uniform1i(v)}),symbolSDF:v=>({u_is_size_zoom_constant:new s.Uniform1i(v),u_is_size_feature_constant:new s.Uniform1i(v),u_size_t:new s.Uniform1f(v),u_size:new s.Uniform1f(v),u_camera_to_center_distance:new s.Uniform1f(v),u_rotate_symbol:new s.Uniform1i(v),u_aspect_ratio:new s.Uniform1f(v),u_fade_change:new s.Uniform1f(v),u_matrix:new s.UniformMatrix4f(v),u_label_plane_matrix:new s.UniformMatrix4f(v),u_coord_matrix:new s.UniformMatrix4f(v),u_is_text:new s.Uniform1i(v),u_pitch_with_map:new s.Uniform1i(v),u_texsize:new s.Uniform2f(v),u_texture:new s.Uniform1i(v),u_gamma_scale:new s.Uniform1f(v),u_device_pixel_ratio:new s.Uniform1f(v),u_tile_id:new s.Uniform3f(v),u_zoom_transition:new s.Uniform1f(v),u_inv_rot_matrix:new s.UniformMatrix4f(v),u_merc_center:new s.Uniform2f(v),u_camera_forward:new s.Uniform3f(v),u_tile_matrix:new s.UniformMatrix4f(v),u_up_vector:new s.Uniform3f(v),u_ecef_origin:new s.Uniform3f(v),u_is_halo:new s.Uniform1i(v)}),symbolTextAndIcon:v=>({u_is_size_zoom_constant:new s.Uniform1i(v),u_is_size_feature_constant:new s.Uniform1i(v),u_size_t:new s.Uniform1f(v),u_size:new s.Uniform1f(v),u_camera_to_center_distance:new s.Uniform1f(v),u_rotate_symbol:new s.Uniform1i(v),u_aspect_ratio:new s.Uniform1f(v),u_fade_change:new s.Uniform1f(v),u_matrix:new s.UniformMatrix4f(v),u_label_plane_matrix:new s.UniformMatrix4f(v),u_coord_matrix:new s.UniformMatrix4f(v),u_is_text:new s.Uniform1i(v),u_pitch_with_map:new s.Uniform1i(v),u_texsize:new s.Uniform2f(v),u_texsize_icon:new s.Uniform2f(v),u_texture:new s.Uniform1i(v),u_texture_icon:new s.Uniform1i(v),u_gamma_scale:new s.Uniform1f(v),u_device_pixel_ratio:new s.Uniform1f(v),u_is_halo:new s.Uniform1i(v)}),background:v=>({u_matrix:new s.UniformMatrix4f(v),u_opacity:new s.Uniform1f(v),u_color:new s.UniformColor(v)}),backgroundPattern:v=>({u_matrix:new s.UniformMatrix4f(v),u_opacity:new s.Uniform1f(v),u_image:new s.Uniform1i(v),u_pattern_tl:new s.Uniform2f(v),u_pattern_br:new s.Uniform2f(v),u_texsize:new s.Uniform2f(v),u_pattern_size:new s.Uniform2f(v),u_pixel_coord_upper:new s.Uniform2f(v),u_pixel_coord_lower:new s.Uniform2f(v),u_tile_units_to_pixels:new s.Uniform1f(v)}),terrainRaster:Hc,terrainDepth:Hc,skybox:v=>({u_matrix:new s.UniformMatrix4f(v),u_sun_direction:new s.Uniform3f(v),u_cubemap:new s.Uniform1i(v),u_opacity:new s.Uniform1f(v),u_temporal_offset:new s.Uniform1f(v)}),skyboxGradient:v=>({u_matrix:new s.UniformMatrix4f(v),u_color_ramp:new s.Uniform1i(v),u_center_direction:new s.Uniform3f(v),u_radius:new s.Uniform1f(v),u_opacity:new s.Uniform1f(v),u_temporal_offset:new s.Uniform1f(v)}),skyboxCapture:v=>({u_matrix_3f:new s.UniformMatrix3f(v),u_sun_direction:new s.Uniform3f(v),u_sun_intensity:new s.Uniform1f(v),u_color_tint_r:new s.Uniform4f(v),u_color_tint_m:new s.Uniform4f(v),u_luminance:new s.Uniform1f(v)}),globeRaster:v=>({u_proj_matrix:new s.UniformMatrix4f(v),u_globe_matrix:new s.UniformMatrix4f(v),u_normalize_matrix:new s.UniformMatrix4f(v),u_merc_matrix:new s.UniformMatrix4f(v),u_zoom_transition:new s.Uniform1f(v),u_merc_center:new s.Uniform2f(v),u_image0:new s.Uniform1i(v),u_grid_matrix:new s.UniformMatrix3f(v),u_skirt_height:new s.Uniform1f(v),u_frustum_tl:new s.Uniform3f(v),u_frustum_tr:new s.Uniform3f(v),u_frustum_br:new s.Uniform3f(v),u_frustum_bl:new s.Uniform3f(v),u_globe_pos:new s.Uniform3f(v),u_globe_radius:new s.Uniform1f(v),u_viewport:new s.Uniform2f(v)}),globeAtmosphere:v=>({u_frustum_tl:new s.Uniform3f(v),u_frustum_tr:new s.Uniform3f(v),u_frustum_br:new s.Uniform3f(v),u_frustum_bl:new s.Uniform3f(v),u_horizon:new s.Uniform1f(v),u_transition:new s.Uniform1f(v),u_fadeout_range:new s.Uniform1f(v),u_color:new s.Uniform4f(v),u_high_color:new s.Uniform4f(v),u_space_color:new s.Uniform4f(v),u_star_intensity:new s.Uniform1f(v),u_star_density:new s.Uniform1f(v),u_star_size:new s.Uniform1f(v),u_temporal_offset:new s.Uniform1f(v),u_horizon_angle:new s.Uniform1f(v),u_rotation_matrix:new s.UniformMatrix4f(v)})};let Nh;function Td(v,u,m,y,S,C,L){const O=v.context,U=O.gl,q=v.transform,K=v.useProgram("collisionBox"),le=[];let me=0,xe=0;for(let De=0;De<y.length;De++){const Ue=y[De],je=u.getTile(Ue),Ge=je.getBucket(m);if(!Ge)continue;const ct=kr(Ue,Ge,q);let at=ct;S[0]===0&&S[1]===0||(at=v.translatePosMatrix(ct,je,S,C));const gt=L?Ge.textCollisionBox:Ge.iconCollisionBox,Wt=Ge.collisionCircleArray;if(Wt.length>0){const ht=s.create(),Lt=at;s.mul(ht,Ge.placementInvProjMatrix,q.glCoordMatrix),s.mul(ht,ht,Ge.placementViewportMatrix),le.push({circleArray:Wt,circleOffset:xe,transform:Lt,invTransform:ht,projection:Ge.getProjection()}),me+=Wt.length/4,xe=me}gt&&(v.terrain&&v.terrain.setupElevationDraw(je,K),K.draw(O,U.LINES,s.DepthMode.disabled,s.StencilMode.disabled,v.colorModeForRenderPass(),s.CullFaceMode.disabled,Bh(at,q,je,Ge.getProjection()),m.id,gt.layoutVertexBuffer,gt.indexBuffer,gt.segments,null,q.zoom,null,[gt.collisionVertexBuffer,gt.collisionVertexBufferExt]))}if(!L||!le.length)return;const Se=v.useProgram("collisionCircle"),we=new s.StructArrayLayout2f1f2i16;we.resize(4*me),we._trim();let Ce=0;for(const De of le)for(let Ue=0;Ue<De.circleArray.length/4;Ue++){const je=4*Ue,Ge=De.circleArray[je+0],ct=De.circleArray[je+1],at=De.circleArray[je+2],gt=De.circleArray[je+3];we.emplace(Ce++,Ge,ct,at,gt,0),we.emplace(Ce++,Ge,ct,at,gt,1),we.emplace(Ce++,Ge,ct,at,gt,2),we.emplace(Ce++,Ge,ct,at,gt,3)}(!Nh||Nh.length<2*me)&&(Nh=(function(De){const Ue=2*De,je=new s.StructArrayLayout3ui6;je.resize(Ue),je._trim();for(let Ge=0;Ge<Ue;Ge++){const ct=6*Ge;je.uint16[ct+0]=4*Ge+0,je.uint16[ct+1]=4*Ge+1,je.uint16[ct+2]=4*Ge+2,je.uint16[ct+3]=4*Ge+2,je.uint16[ct+4]=4*Ge+3,je.uint16[ct+5]=4*Ge+0}return je})(me));const ce=O.createIndexBuffer(Nh,!0),ye=O.createVertexBuffer(we,s.collisionCircleLayout.members,!0);for(const De of le){const Ue={u_matrix:De.transform,u_inv_matrix:De.invTransform,u_camera_to_center_distance:(Pe=q).getCameraToCenterDistance(De.projection),u_viewport_size:[Pe.width,Pe.height]};Se.draw(O,U.TRIANGLES,s.DepthMode.disabled,s.StencilMode.disabled,v.colorModeForRenderPass(),s.CullFaceMode.disabled,Ue,m.id,ye,ce,s.SegmentVector.simpleSegment(0,2*De.circleOffset,De.circleArray.length,De.circleArray.length/2),null,q.zoom)}var Pe;ye.destroy(),ce.destroy()}const Sm=s.create();function Uh({width:v,height:u,anchor:m,textOffset:y,textScale:S},C){const{horizontalAlign:L,verticalAlign:O}=s.getAnchorAlignment(m),U=-(L-.5)*v,q=-(O-.5)*u,K=s.evaluateVariableOffset(m,y);return new s.Point((U/S+K[0])*C,(q/S+K[1])*C)}function V_(v,u,m,y,S,C,L,O,U,q,K){const le=v.text.placedSymbolArray,me=v.text.dynamicLayoutVertexArray,xe=v.icon.dynamicLayoutVertexArray,Se={},we=v.getProjection(),Ce=Ni(O,we,C),ce=C.elevation,ye=we.upVectorScale(O.canonical,C.center.lat,C.worldSize).metersToTile;me.clear();for(let Pe=0;Pe<le.length;Pe++){const De=le.get(Pe),{tileAnchorX:Ue,tileAnchorY:je,numGlyphs:Ge}=De,ct=De.hidden||!De.crossTileID||v.allowVerticalPlacement&&!De.placedOrientation?null:y[De.crossTileID];if(ct){let at=0,gt=0,Wt=0;if(ce){const Kt=ce?ce.getAtTileOffset(O,Ue,je):0,[Dn,Gn,Sn]=we.upVector(O.canonical,Ue,je);at=Kt*Dn*ye,gt=Kt*Gn*ye,Wt=Kt*Sn*ye}let[ht,Lt,bt,Gt]=Ki(De.projectedAnchorX+at,De.projectedAnchorY+gt,De.projectedAnchorZ+Wt,m?Ce:L);const ft=zl(C.getCameraToCenterDistance(we),Gt);let St=S.evaluateSizeForFeature(v.textSizeData,q,De)*ft/s.ONE_EM;m&&(St*=v.tilePixelRatio/U);const $t=Uh(ct,St);m?({x:ht,y:Lt,z:bt}=we.projectTilePoint(Ue+$t.x,je+$t.y,O.canonical),[ht,Lt,bt]=Ki(ht+at,Lt+gt,bt+Wt,L)):(u&&$t._rotate(-C.angle),ht+=$t.x,Lt+=$t.y,bt=0);const Ft=v.allowVerticalPlacement&&De.placedOrientation===s.WritingMode.vertical?Math.PI/2:0;for(let Kt=0;Kt<Ge;Kt++)s.addDynamicAttributes(me,ht,Lt,bt,Ft);K&&De.associatedIconIndex>=0&&(Se[De.associatedIconIndex]={x:ht,y:Lt,z:bt,angle:Ft})}else oo(Ge,me)}if(K){xe.clear();const Pe=v.icon.placedSymbolArray;for(let De=0;De<Pe.length;De++){const Ue=Pe.get(De),{numGlyphs:je}=Ue,Ge=Se[De];if(Ue.hidden||!Ge)oo(je,xe);else{const{x:ct,y:at,z:gt,angle:Wt}=Ge;for(let ht=0;ht<je;ht++)s.addDynamicAttributes(xe,ct,at,gt,Wt)}}v.icon.dynamicLayoutVertexBuffer.updateData(xe)}v.text.dynamicLayoutVertexBuffer.updateData(me)}function Em(v,u,m){return m.iconsInText&&u?"symbolTextAndIcon":v?"symbolSDF":"symbolIcon"}function _g(v,u,m,y,S,C,L,O,U,q,K,le){const me=v.context,xe=me.gl,Se=v.transform,we=O==="map",Ce=U==="map",ce=we&&m.layout.get("symbol-placement")!=="point",ye=we&&!Ce&&!ce,Pe=m.layout.get("symbol-sort-key").constantOr(1)!==void 0;let De=!1;const Ue=v.depthModeForSublayer(0,s.DepthMode.ReadOnly),je=[s.mercatorXfromLng(Se.center.lng),s.mercatorYfromLat(Se.center.lat)],Ge=m.layout.get("text-variable-anchor"),ct=Se.projection.name==="globe",at=[],gt=[0,-1,0];let Wt=gt;!ct&&!Se.mercatorFromTransition||we||(Wt=(function(ht){const Lt=ht._camera.getWorldToCamera(ht.worldSize,1),bt=s.multiply([],Lt,ht.globeMatrix);s.invert(bt,bt);const Gt=[0,0,0],ft=[0,1,0,0];return s.transformMat4$1(ft,ft,bt),Gt[0]=ft[0],Gt[1]=ft[1],Gt[2]=ft[2],s.normalize(Gt,Gt),Gt})(Se));for(const ht of y){const Lt=u.getTile(ht),bt=Lt.getBucket(m);if(!bt||bt.projection.name==="mercator"&&ct)continue;const Gt=S?bt.text:bt.icon;if(!Gt||bt.fullyClipped||!Gt.segments.get().length)continue;const ft=Gt.programConfigurations.get(m.id),St=S||bt.sdfIcons,$t=S?bt.textSizeData:bt.iconSizeData,Ft=Ce||Se.pitch!==0,Kt=s.evaluateSizeForZoom($t,Se.zoom);let Dn,Gn,Sn,Rn,pi=[0,0],mi=null;if(S)Gn=Lt.glyphAtlasTexture,Sn=xe.LINEAR,Dn=Lt.glyphAtlasTexture.size,bt.iconsInText&&(pi=Lt.imageAtlasTexture.size,mi=Lt.imageAtlasTexture,Rn=Ft||v.options.rotating||v.options.zooming||$t.kind==="composite"||$t.kind==="camera"?xe.LINEAR:xe.NEAREST);else{const nl=m.layout.get("icon-size").constantOr(0)!==1||bt.iconsNeedLinear;Gn=Lt.imageAtlasTexture,Sn=St||v.options.rotating||v.options.zooming||nl||Ft?xe.LINEAR:xe.NEAREST,Dn=Lt.imageAtlasTexture.size}const In=bt.projection.name==="globe",Di=In?Wt:gt,$i=In?s.globeToMercatorTransition(Se.zoom):0,Xi=Ni(ht,bt.getProjection(),Se),ji=Se.calculatePixelsToTileUnitsMatrix(Lt),Us=Dt(Xi,Lt.tileID.canonical,Ce,we,Se,bt.getProjection(),ji),Is=v.terrain&&Ce&&ce?s.invert(s.create(),Us):Sm,xa=zi(Xi,Lt.tileID.canonical,Ce,we,Se,bt.getProjection(),ji),Ys=Ge&&bt.hasTextData(),er=m.layout.get("icon-text-fit")!=="none"&&Ys&&bt.hasIconData();if(ce){const nl=Se.elevation,Gl=nl?nl.getAtTileOffsetFunc(ht,Se.center.lat,Se.worldSize,bt.getProjection()):null,Nd=ha(Xi,Lt.tileID.canonical,Ce,we,Se,bt.getProjection(),ji);fc(bt,Xi,v,S,Nd,xa,Ce,q,Gl,ht)}const Wi=ce||S&&Ge||er,Ci=v.translatePosMatrix(Xi,Lt,C,L),Or=Wi?Sm:Us,Zs=v.translatePosMatrix(xa,Lt,C,L,!0),sr=bt.getProjection().createInversionMatrix(Se,ht.canonical),co=[];v.terrainRenderModeElevated()&&Ce&&co.push("PITCH_WITH_MAP_TERRAIN"),In&&co.push("PROJECTION_GLOBE_VIEW"),Wi&&co.push("PROJECTED_POS_ON_VIEWPORT");const Fd=St&&m.paint.get(S?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Jc;Jc=St?bt.iconsInText?wd($t.kind,Kt,ye,Ce,v,Ci,Or,Zs,Dn,pi,ht,$i,je,sr,Di,bt.getProjection()):xd($t.kind,Kt,ye,Ce,v,Ci,Or,Zs,S,Dn,!0,ht,$i,je,sr,Di,bt.getProjection()):Fh($t.kind,Kt,ye,Ce,v,Ci,Or,Zs,S,Dn,ht,$i,je,sr,Di,bt.getProjection());const zd={program:v.useProgram(Em(St,S,bt),ft,co),buffers:Gt,uniformValues:Jc,atlasTexture:Gn,atlasTextureIcon:mi,atlasInterpolation:Sn,atlasInterpolationIcon:Rn,isSDF:St,hasHalo:Fd,tile:Lt,labelPlaneMatrixInv:Is};if(Pe&&bt.canOverlap){De=!0;const nl=Gt.segments.get();for(const Gl of nl)at.push({segments:new s.SegmentVector([Gl]),sortKey:Gl.sortKey,state:zd})}else at.push({segments:Gt.segments,sortKey:0,state:zd})}De&&at.sort(((ht,Lt)=>ht.sortKey-Lt.sortKey));for(const ht of at){const Lt=ht.state;if(v.terrain&&v.terrain.setupElevationDraw(Lt.tile,Lt.program,{useDepthForOcclusion:!ct,labelPlaneMatrixInv:Lt.labelPlaneMatrixInv}),me.activeTexture.set(xe.TEXTURE0),Lt.atlasTexture.bind(Lt.atlasInterpolation,xe.CLAMP_TO_EDGE),Lt.atlasTextureIcon&&(me.activeTexture.set(xe.TEXTURE1),Lt.atlasTextureIcon&&Lt.atlasTextureIcon.bind(Lt.atlasInterpolationIcon,xe.CLAMP_TO_EDGE)),Lt.isSDF){const bt=Lt.uniformValues;Lt.hasHalo&&(bt.u_is_halo=1,Sd(Lt.buffers,ht.segments,m,v,Lt.program,Ue,K,le,bt)),bt.u_is_halo=0}Sd(Lt.buffers,ht.segments,m,v,Lt.program,Ue,K,le,Lt.uniformValues)}}function Sd(v,u,m,y,S,C,L,O,U){const q=y.context,K=[v.dynamicLayoutVertexBuffer,v.opacityVertexBuffer,v.globeExtVertexBuffer];S.draw(q,q.gl.TRIANGLES,C,L,O,s.CullFaceMode.disabled,U,m.id,v.layoutVertexBuffer,v.indexBuffer,u,m.paint,y.transform.zoom,v.programConfigurations.get(m.id),K)}function yg(v,u,m,y,S,C,L){const O=v.context.gl,U=m.paint.get("fill-pattern"),q=U&&U.constantOr(1);let K,le,me,xe,Se;L?(le=q&&!m.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",K=O.LINES):(le=q?"fillPattern":"fill",K=O.TRIANGLES);for(const we of y){const Ce=u.getTile(we);if(q&&!Ce.patternsLoaded())continue;const ce=Ce.getBucket(m);if(!ce)continue;v.prepareDrawTile();const ye=ce.programConfigurations.get(m.id),Pe=v.useProgram(le,ye);q&&(v.context.activeTexture.set(O.TEXTURE0),Ce.imageAtlasTexture.bind(O.LINEAR,O.CLAMP_TO_EDGE),ye.updatePaintBuffers());const De=U.constantOr(null);if(De&&Ce.imageAtlas){const je=Ce.imageAtlas.patternPositions[De.toString()];je&&ye.setConstantPatternPositions(je)}const Ue=v.translatePosMatrix(we.projMatrix,Ce,m.paint.get("fill-translate"),m.paint.get("fill-translate-anchor"));if(L){xe=ce.indexBuffer2,Se=ce.segments2;const je=v.terrain&&v.terrain.renderingToTexture?v.terrain.drapeBufferSize:[O.drawingBufferWidth,O.drawingBufferHeight];me=le==="fillOutlinePattern"&&q?R_(Ue,v,Ce,je):L_(Ue,je)}else xe=ce.indexBuffer,Se=ce.segments,me=q?bm(Ue,v,Ce):Ja(Ue);v.prepareDrawProgram(v.context,Pe,we.toUnwrapped()),Pe.draw(v.context,K,S,v.stencilModeForClipping(we),C,s.CullFaceMode.disabled,me,m.id,ce.layoutVertexBuffer,xe,Se,m.paint,v.transform.zoom,ye)}}function $h(v,u,m,y,S,C,L){const O=v.context,U=O.gl,q=v.transform,K=m.paint.get("fill-extrusion-pattern"),le=K.constantOr(1),me=m.paint.get("fill-extrusion-opacity"),xe=[m.paint.get("fill-extrusion-ambient-occlusion-intensity"),m.paint.get("fill-extrusion-ambient-occlusion-radius")],Se=m.layout.get("fill-extrusion-edge-radius"),we=Se>0&&!m.paint.get("fill-extrusion-rounded-roof"),Ce=we?0:Se,ce=q.projection.name==="globe"?s.fillExtrusionHeightLift():0,ye=q.projection.name==="globe",Pe=ye?s.globeToMercatorTransition(q.zoom):0,De=[s.mercatorXfromLng(q.center.lng),s.mercatorYfromLat(q.center.lat)],Ue=[];ye&&Ue.push("PROJECTION_GLOBE_VIEW"),xe[0]>0&&Ue.push("FAUX_AO"),we&&Ue.push("ZERO_ROOF_RADIUS");for(const je of y){const Ge=u.getTile(je),ct=Ge.getBucket(m);if(!ct||ct.projection.name!==q.projection.name)continue;const at=ct.programConfigurations.get(m.id),gt=v.useProgram(le?"fillExtrusionPattern":"fillExtrusion",at,Ue);if(v.terrain){const St=v.terrain;if(v.style.terrainSetForDrapingOnly())St.setupElevationDraw(Ge,gt,{useMeterToDem:!0});else{if(!ct.enableTerrain)continue;if(St.setupElevationDraw(Ge,gt,{useMeterToDem:!0}),Cm(O,u,je,ct,m,St),!ct.centroidVertexBuffer){const $t=gt.attributes.a_centroid_pos;$t!==void 0&&U.vertexAttrib2f($t,0,0)}}}le&&(v.context.activeTexture.set(U.TEXTURE0),Ge.imageAtlasTexture.bind(U.LINEAR,U.CLAMP_TO_EDGE),at.updatePaintBuffers());const Wt=K.constantOr(null);if(Wt&&Ge.imageAtlas){const St=Ge.imageAtlas.patternPositions[Wt.toString()];St&&at.setConstantPatternPositions(St)}const ht=v.translatePosMatrix(je.projMatrix,Ge,m.paint.get("fill-extrusion-translate"),m.paint.get("fill-extrusion-translate-anchor")),Lt=q.projection.createInversionMatrix(q,je.canonical),bt=m.paint.get("fill-extrusion-vertical-gradient"),Gt=le?Gc(ht,v,bt,me,xe,Ce,je,Ge,ce,Pe,De,Lt):ya(ht,v,bt,me,xe,Ce,je,ce,Pe,De,Lt);v.prepareDrawProgram(O,gt,je.toUnwrapped());const ft=[];v.terrain&&ft.push(ct.centroidVertexBuffer),ye&&ft.push(ct.layoutVertexExtBuffer),gt.draw(O,O.gl.TRIANGLES,S,C,L,s.CullFaceMode.backCCW,Gt,m.id,ct.layoutVertexBuffer,ct.indexBuffer,ct.segments,m.paint,v.transform.zoom,at,ft)}}function Cm(v,u,m,y,S,C){const L=[ce=>{let ye=ce.canonical.x-1,Pe=ce.wrap;return ye<0&&(ye=(1<<ce.canonical.z)-1,Pe--),new s.OverscaledTileID(ce.overscaledZ,Pe,ce.canonical.z,ye,ce.canonical.y)},ce=>{let ye=ce.canonical.x+1,Pe=ce.wrap;return ye===1<<ce.canonical.z&&(ye=0,Pe++),new s.OverscaledTileID(ce.overscaledZ,Pe,ce.canonical.z,ye,ce.canonical.y)},ce=>new s.OverscaledTileID(ce.overscaledZ,ce.wrap,ce.canonical.z,ce.canonical.x,(ce.canonical.y===0?1<<ce.canonical.z:ce.canonical.y)-1),ce=>new s.OverscaledTileID(ce.overscaledZ,ce.wrap,ce.canonical.z,ce.canonical.x,ce.canonical.y===(1<<ce.canonical.z)-1?0:ce.canonical.y+1)],O=ce=>{const ye=u.getSource().minzoom,Pe=Ue=>{const je=u.getTileByID(Ue);if(je&&je.hasData())return je.getBucket(S)},De=[0,-1,1];for(const Ue of De){if(ce.overscaledZ+Ue<ye)continue;const je=Pe(ce.calculateScaledKey(ce.overscaledZ+Ue));if(je)return je}},U=[0,0,0],q=(ce,ye)=>(U[0]=Math.min(ce.min.y,ye.min.y),U[1]=Math.max(ce.max.y,ye.max.y),U[2]=s.EXTENT-ye.min.x>ce.max.x?ye.min.x-s.EXTENT:ce.max.x,U),K=(ce,ye)=>(U[0]=Math.min(ce.min.x,ye.min.x),U[1]=Math.max(ce.max.x,ye.max.x),U[2]=s.EXTENT-ye.min.y>ce.max.y?ye.min.y-s.EXTENT:ce.max.y,U),le=[(ce,ye)=>q(ce,ye),(ce,ye)=>q(ye,ce),(ce,ye)=>K(ce,ye),(ce,ye)=>K(ye,ce)],me=new s.Point(0,0);let xe,Se,we;const Ce=(ce,ye,Pe,De,Ue)=>{const je=[[De?Pe:ce,De?ce:Pe,0],[De?Pe:ye,De?ye:Pe,0]],Ge=Ue<0?s.EXTENT+Ue:Ue,ct=[De?Ge:(ce+ye)/2,De?(ce+ye)/2:Ge,0];return Pe===0&&Ue<0||Pe!==0&&Ue>0?C.getForTilePoints(we,[ct],!0,Se):je.push(ct),C.getForTilePoints(m,je,!0,xe),Math.max(je[0][2],je[1][2],ct[2])/C.exaggeration()};for(let ce=0;ce<4;ce++){const ye=(ce<2?1:5)-ce,Pe=y.borders[ce];if(Pe.length===0)continue;const De=we=L[ce](m),Ue=O(De);if(!(Ue&&Ue instanceof s.FillExtrusionBucket&&Ue.enableTerrain)||y.borderDoneWithNeighborZ[ce]===Ue.canonical.z&&Ue.borderDoneWithNeighborZ[ye]===y.canonical.z||(Se=C.findDEMTileFor(De),!Se||!Se.dem))continue;if(!xe){const at=C.findDEMTileFor(m);if(!at||!at.dem)return;xe=at}const je=Ue.borders[ye];let Ge=0;const ct=Ue.borderDoneWithNeighborZ[ye]!==y.canonical.z;if(y.canonical.z===Ue.canonical.z){for(let at=0;at<Pe.length;at++){const gt=y.featuresOnBorder[Pe[at]],Wt=gt.borders[ce];let ht;for(;Ge<je.length&&(ht=Ue.featuresOnBorder[je[Ge]],!(ht.borders[ye][1]>Wt[0]+3));)ct&&Ue.encodeCentroid(void 0,ht,!1),Ge++;if(ht&&Ge<je.length){const Lt=Ge;let bt=0;for(;!(ht.borders[ye][0]>Wt[1]-3)&&(bt++,++Ge!==je.length);)ht=Ue.featuresOnBorder[je[Ge]];if(ht=Ue.featuresOnBorder[je[Lt]],gt.intersectsCount()>1||ht.intersectsCount()>1||bt!==1){bt!==1&&(Ge=Lt),y.encodeCentroid(void 0,gt,!1),ct&&Ue.encodeCentroid(void 0,ht,!1);continue}const Gt=le[ce](gt,ht),ft=ce%2?s.EXTENT-1:0;me.x=Ce(Gt[0],Math.min(s.EXTENT-1,Gt[1]),ft,ce<2,Gt[2]),me.y=0,y.encodeCentroid(me,gt,!1),ct&&Ue.encodeCentroid(me,ht,!1)}else y.encodeCentroid(void 0,gt,!1)}y.borderDoneWithNeighborZ[ce]=Ue.canonical.z,y.needsCentroidUpdate=!0,ct&&(Ue.borderDoneWithNeighborZ[ye]=y.canonical.z,Ue.needsCentroidUpdate=!0)}else{for(const at of Pe)y.encodeCentroid(void 0,y.featuresOnBorder[at],!1);if(ct){for(const at of je)Ue.encodeCentroid(void 0,Ue.featuresOnBorder[at],!1);Ue.borderDoneWithNeighborZ[ye]=y.canonical.z,Ue.needsCentroidUpdate=!0}y.borderDoneWithNeighborZ[ce]=Ue.canonical.z,y.needsCentroidUpdate=!0}}(y.needsCentroidUpdate||!y.centroidVertexBuffer&&y.centroidVertexArray.length!==0)&&y.uploadCentroid(v)}const qc=new s.Color(1,0,0,1),km=new s.Color(0,1,0,1),B_=new s.Color(0,0,1,1),F_=new s.Color(1,0,1,1),Kc=new s.Color(0,1,1,1);function $l(v,u,m){const y=v.context,S=v.transform,C=y.gl,L=S.projection.name==="globe",O=L?["PROJECTION_GLOBE_VIEW"]:null;let U=m.projMatrix;if(L&&s.globeToMercatorTransition(S.zoom)>0){const gt=s.transitionTileAABBinECEF(m.canonical,S),Wt=s.globeDenormalizeECEF(gt);U=s.multiply(new Float32Array(16),S.globeMatrix,Wt),s.multiply(U,S.projMatrix,U)}const q=v.useProgram("debug",null,O),K=u.getTileByID(m.key);v.terrain&&v.terrain.setupElevationDraw(K,q);const le=s.DepthMode.disabled,me=s.StencilMode.disabled,xe=v.colorModeForRenderPass(),Se="$debug";y.activeTexture.set(C.TEXTURE0),v.emptyTexture.bind(C.LINEAR,C.CLAMP_TO_EDGE),L?K._makeGlobeTileDebugBuffers(v.context,S):K._makeDebugTileBoundsBuffers(v.context,S.projection);const we=K._tileDebugBuffer||v.debugBuffer,Ce=K._tileDebugIndexBuffer||v.debugIndexBuffer,ce=K._tileDebugSegments||v.debugSegments;q.draw(y,C.LINE_STRIP,le,me,xe,s.CullFaceMode.disabled,yd(U,s.Color.red),Se,we,Ce,ce,null,null,null,[K._globeTileDebugBorderBuffer]);const ye=K.latestRawTileData,Pe=Math.floor((ye&&ye.byteLength||0)/1024),De=u.getTile(m).tileSize,Ue=512/Math.min(De,512)*(m.overscaledZ/S.zoom)*.5;let je=m.canonical.toString();m.overscaledZ!==m.canonical.z&&(je+=` => ${m.overscaledZ}`),je+=` ${Pe}kb`,(function(gt,Wt){gt.initDebugOverlayCanvas();const ht=gt.debugOverlayCanvas,Lt=gt.context.gl,bt=gt.debugOverlayCanvas.getContext("2d");bt.clearRect(0,0,ht.width,ht.height),bt.shadowColor="white",bt.shadowBlur=2,bt.lineWidth=1.5,bt.strokeStyle="white",bt.textBaseline="top",bt.font="bold 36px Open Sans, sans-serif",bt.fillText(Wt,5,5),bt.strokeText(Wt,5,5),gt.debugOverlayTexture.update(ht),gt.debugOverlayTexture.bind(Lt.LINEAR,Lt.CLAMP_TO_EDGE)})(v,je);const Ge=K._tileDebugTextBuffer||v.debugBuffer,ct=K._tileDebugTextIndexBuffer||v.quadTriangleIndexBuffer,at=K._tileDebugTextSegments||v.debugSegments;q.draw(y,C.TRIANGLES,le,me,s.ColorMode.alphaBlended,s.CullFaceMode.disabled,yd(U,s.Color.transparent,Ue),Se,Ge,ct,at,null,null,null,[K._globeTileDebugTextBuffer])}function Im(v,u,m,y){Xc(v,0,u+m/2,v.transform.width,m,y)}function jh(v,u,m,y){Xc(v,u-m/2,0,m,v.transform.height,y)}function Xc(v,u,m,y,S,C){const L=v.context,O=L.gl;O.enable(O.SCISSOR_TEST),O.scissor(u*s.exported.devicePixelRatio,m*s.exported.devicePixelRatio,y*s.exported.devicePixelRatio,S*s.exported.devicePixelRatio),L.clear({color:C}),O.disable(O.SCISSOR_TEST)}const Am=s.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:Pm}=Am;function yl(v,u,m,y){v.emplaceBack(u,m,y)}class Wh{constructor(u){this.vertexArray=new s.StructArrayLayout3f12,this.indices=new s.StructArrayLayout3ui6,yl(this.vertexArray,-1,-1,1),yl(this.vertexArray,1,-1,1),yl(this.vertexArray,-1,1,1),yl(this.vertexArray,1,1,1),yl(this.vertexArray,-1,-1,-1),yl(this.vertexArray,1,-1,-1),yl(this.vertexArray,-1,1,-1),yl(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=u.createVertexBuffer(this.vertexArray,Pm),this.indexBuffer=u.createIndexBuffer(this.indices),this.segment=s.SegmentVector.simpleSegment(0,0,36,12)}}function ba(v,u,m,y,S,C){const L=v.gl,O=u.paint.get("sky-atmosphere-color"),U=u.paint.get("sky-atmosphere-halo-color"),q=u.paint.get("sky-atmosphere-sun-intensity"),K=((le,me,xe,Se,we)=>({u_matrix_3f:le,u_sun_direction:me,u_sun_intensity:xe,u_color_tint_r:[Se.r,Se.g,Se.b,Se.a],u_color_tint_m:[we.r,we.g,we.b,we.a],u_luminance:5e-5}))(s.fromMat4(s.create$1(),y),S,q,O,U);L.framebufferTexture2D(L.FRAMEBUFFER,L.COLOR_ATTACHMENT0,L.TEXTURE_CUBE_MAP_POSITIVE_X+C,u.skyboxTexture,0),m.draw(v,L.TRIANGLES,s.DepthMode.disabled,s.StencilMode.disabled,s.ColorMode.unblended,s.CullFaceMode.frontCW,K,"skyboxCapture",u.skyboxGeometry.vertexBuffer,u.skyboxGeometry.indexBuffer,u.skyboxGeometry.segment)}const Ed=s.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class Mm{constructor(u){const m=new s.StructArrayLayout5f20;m.emplaceBack(-1,1,1,0,0),m.emplaceBack(1,1,1,1,0),m.emplaceBack(1,-1,1,1,1),m.emplaceBack(-1,-1,1,0,1);const y=new s.StructArrayLayout3ui6;y.emplaceBack(0,1,2),y.emplaceBack(2,3,0),this.vertexBuffer=u.createVertexBuffer(m,Ed.members),this.indexBuffer=u.createIndexBuffer(y),this.segments=s.SegmentVector.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const _c={symbol:function(v,u,m,y,S){if(v.renderPass!=="translucent")return;const C=s.StencilMode.disabled,L=v.colorModeForRenderPass();m.layout.get("text-variable-anchor")&&(function(O,U,q,K,le,me,xe){const Se=U.transform,we=le==="map",Ce=me==="map";for(const ce of O){const ye=K.getTile(ce),Pe=ye.getBucket(q);if(!Pe||!Pe.text||!Pe.text.segments.get().length)continue;const De=s.evaluateSizeForZoom(Pe.textSizeData,Se.zoom),Ue=Ni(ce,Pe.getProjection(),Se),je=Se.calculatePixelsToTileUnitsMatrix(ye),Ge=Dt(Ue,ye.tileID.canonical,Ce,we,Se,Pe.getProjection(),je),ct=q.layout.get("icon-text-fit")!=="none"&&Pe.hasIconData();if(De){const at=Math.pow(2,Se.zoom-ye.tileID.overscaledZ);V_(Pe,we,Ce,xe,s.symbolSize,Se,Ge,ce,at,De,ct)}}})(y,v,m,u,m.layout.get("text-rotation-alignment"),m.layout.get("text-pitch-alignment"),S),m.paint.get("icon-opacity").constantOr(1)!==0&&_g(v,u,m,y,!1,m.paint.get("icon-translate"),m.paint.get("icon-translate-anchor"),m.layout.get("icon-rotation-alignment"),m.layout.get("icon-pitch-alignment"),m.layout.get("icon-keep-upright"),C,L),m.paint.get("text-opacity").constantOr(1)!==0&&_g(v,u,m,y,!0,m.paint.get("text-translate"),m.paint.get("text-translate-anchor"),m.layout.get("text-rotation-alignment"),m.layout.get("text-pitch-alignment"),m.layout.get("text-keep-upright"),C,L),u.map.showCollisionBoxes&&(Td(v,u,m,y,m.paint.get("text-translate"),m.paint.get("text-translate-anchor"),!0),Td(v,u,m,y,m.paint.get("icon-translate"),m.paint.get("icon-translate-anchor"),!1))},circle:function(v,u,m,y){if(v.renderPass!=="translucent")return;const S=m.paint.get("circle-opacity"),C=m.paint.get("circle-stroke-width"),L=m.paint.get("circle-stroke-opacity"),O=m.layout.get("circle-sort-key").constantOr(1)!==void 0;if(S.constantOr(1)===0&&(C.constantOr(1)===0||L.constantOr(1)===0))return;const U=v.context,q=U.gl,K=v.transform,le=v.depthModeForSublayer(0,s.DepthMode.ReadOnly),me=s.StencilMode.disabled,xe=v.colorModeForRenderPass(),Se=K.projection.name==="globe",we=[s.mercatorXfromLng(K.center.lng),s.mercatorYfromLat(K.center.lat)],Ce=[];for(let ye=0;ye<y.length;ye++){const Pe=y[ye],De=u.getTile(Pe),Ue=De.getBucket(m);if(!Ue||Ue.projection.name!==K.projection.name)continue;const je=Ue.programConfigurations.get(m.id),Ge=Vh(m);Se&&Ge.push("PROJECTION_GLOBE_VIEW");const ct=v.useProgram("circle",je,Ge),at=Ue.layoutVertexBuffer,gt=Ue.globeExtVertexBuffer,Wt=Ue.indexBuffer,ht=K.projection.createInversionMatrix(K,Pe.canonical),Lt={programConfiguration:je,program:ct,layoutVertexBuffer:at,globeExtVertexBuffer:gt,indexBuffer:Wt,uniformValues:Zo(v,Pe,De,ht,we,m),tile:De};if(O){const bt=Ue.segments.get();for(const Gt of bt)Ce.push({segments:new s.SegmentVector([Gt]),sortKey:Gt.sortKey,state:Lt})}else Ce.push({segments:Ue.segments,sortKey:0,state:Lt})}O&&Ce.sort(((ye,Pe)=>ye.sortKey-Pe.sortKey));const ce={useDepthForOcclusion:!Se};for(const ye of Ce){const{programConfiguration:Pe,program:De,layoutVertexBuffer:Ue,globeExtVertexBuffer:je,indexBuffer:Ge,uniformValues:ct,tile:at}=ye.state,gt=ye.segments;v.terrain&&v.terrain.setupElevationDraw(at,De,ce),v.prepareDrawProgram(U,De,at.tileID.toUnwrapped()),De.draw(U,q.TRIANGLES,le,me,xe,s.CullFaceMode.disabled,ct,m.id,Ue,Ge,gt,m.paint,K.zoom,Pe,[je])}},heatmap:function(v,u,m,y){if(m.paint.get("heatmap-opacity")!==0)if(v.renderPass==="offscreen"){const S=v.context,C=S.gl,L=s.StencilMode.disabled,O=new s.ColorMode([C.ONE,C.ONE],s.Color.transparent,[!0,!0,!0,!0]);(function(xe,Se,we,Ce){const ce=xe.gl,ye=Se.width*Ce,Pe=Se.height*Ce;xe.activeTexture.set(ce.TEXTURE1),xe.viewport.set([0,0,ye,Pe]);let De=we.heatmapFbo;if(!De||De&&(De.width!==ye||De.height!==Pe)){De&&De.destroy();const Ue=ce.createTexture();ce.bindTexture(ce.TEXTURE_2D,Ue),ce.texParameteri(ce.TEXTURE_2D,ce.TEXTURE_WRAP_S,ce.CLAMP_TO_EDGE),ce.texParameteri(ce.TEXTURE_2D,ce.TEXTURE_WRAP_T,ce.CLAMP_TO_EDGE),ce.texParameteri(ce.TEXTURE_2D,ce.TEXTURE_MIN_FILTER,ce.LINEAR),ce.texParameteri(ce.TEXTURE_2D,ce.TEXTURE_MAG_FILTER,ce.LINEAR),De=we.heatmapFbo=xe.createFramebuffer(ye,Pe,!1),(function(je,Ge,ct,at,gt,Wt){const ht=je.gl;ht.texImage2D(ht.TEXTURE_2D,0,je.isWebGL2&&je.extRenderToTextureHalfFloat?ht.RGBA16F:ht.RGBA,gt,Wt,0,ht.RGBA,je.extRenderToTextureHalfFloat?je.isWebGL2?ht.HALF_FLOAT:je.extTextureHalfFloat.HALF_FLOAT_OES:ht.UNSIGNED_BYTE,null),at.colorAttachment.set(ct)})(xe,0,Ue,De,ye,Pe)}else ce.bindTexture(ce.TEXTURE_2D,De.colorAttachment.get()),xe.bindFramebuffer.set(De.framebuffer)})(S,v,m,v.transform.projection.name==="globe"?.5:.25),S.clear({color:s.Color.transparent});const U=v.transform,q=U.projection.name==="globe",K=q?["PROJECTION_GLOBE_VIEW"]:null,le=q?s.CullFaceMode.frontCCW:s.CullFaceMode.disabled,me=[s.mercatorXfromLng(U.center.lng),s.mercatorYfromLat(U.center.lat)];for(let xe=0;xe<y.length;xe++){const Se=y[xe];if(u.hasRenderableParent(Se))continue;const we=u.getTile(Se),Ce=we.getBucket(m);if(!Ce||Ce.projection.name!==U.projection.name)continue;const ce=Ce.programConfigurations.get(m.id),ye=v.useProgram("heatmap",ce,K),{zoom:Pe}=v.transform;v.terrain&&v.terrain.setupElevationDraw(we,ye),v.prepareDrawProgram(S,ye,Se.toUnwrapped());const De=U.projection.createInversionMatrix(U,Se.canonical);ye.draw(S,C.TRIANGLES,s.DepthMode.disabled,L,O,le,gg(v,Se,we,De,me,Pe,m.paint.get("heatmap-intensity")),m.id,Ce.layoutVertexBuffer,Ce.indexBuffer,Ce.segments,m.paint,v.transform.zoom,ce,q?[Ce.globeExtVertexBuffer]:null)}S.viewport.set([0,0,v.width,v.height])}else v.renderPass==="translucent"&&(v.context.setColorMode(v.colorModeForRenderPass()),(function(S,C){const L=S.context,O=L.gl,U=C.heatmapFbo;if(!U)return;L.activeTexture.set(O.TEXTURE0),O.bindTexture(O.TEXTURE_2D,U.colorAttachment.get()),L.activeTexture.set(O.TEXTURE1);let q=C.colorRampTexture;q||(q=C.colorRampTexture=new s.Texture(L,C.colorRamp,O.RGBA)),q.bind(O.LINEAR,O.CLAMP_TO_EDGE),S.useProgram("heatmapTexture").draw(L,O.TRIANGLES,s.DepthMode.disabled,s.StencilMode.disabled,S.colorModeForRenderPass(),s.CullFaceMode.disabled,((K,le,me,xe)=>({u_image:0,u_color_ramp:1,u_opacity:le.paint.get("heatmap-opacity")}))(0,C),C.id,S.viewportBuffer,S.quadTriangleIndexBuffer,S.viewportSegments,C.paint,S.transform.zoom)})(v,m))},line:function(v,u,m,y){if(v.renderPass!=="translucent")return;const S=m.paint.get("line-opacity"),C=m.paint.get("line-width");if(S.constantOr(1)===0||C.constantOr(1)===0)return;const L=v.depthModeForSublayer(0,s.DepthMode.ReadOnly),O=v.colorModeForRenderPass(),U=v.terrain&&v.terrain.renderingToTexture?1:s.exported.devicePixelRatio,q=m.paint.get("line-dasharray"),K=q.constantOr(1),le=m.layout.get("line-cap"),me=m.paint.get("line-pattern"),xe=me.constantOr(1),Se=m.paint.get("line-gradient"),we=xe?"linePattern":"line",Ce=v.context,ce=Ce.gl,ye=(De=>{const Ue=[];Eu(De)&&Ue.push("RENDER_LINE_DASH"),De.paint.get("line-gradient")&&Ue.push("RENDER_LINE_GRADIENT");const je=De.paint.get("line-trim-offset");je[0]===0&&je[1]===0||Ue.push("RENDER_LINE_TRIM_OFFSET");const Ge=De.paint.get("line-pattern").constantOr(1),ct=De.paint.get("line-opacity").constantOr(1)!==1;return!Ge&&ct&&Ue.push("RENDER_LINE_ALPHA_DISCARD"),Ue})(m);let Pe=ye.includes("RENDER_LINE_ALPHA_DISCARD");v.terrain&&v.terrain.clipOrMaskOverlapStencilType()&&(Pe=!1);for(const De of y){const Ue=u.getTile(De);if(xe&&!Ue.patternsLoaded())continue;const je=Ue.getBucket(m);if(!je)continue;v.prepareDrawTile();const Ge=je.programConfigurations.get(m.id),ct=v.useProgram(we,Ge,ye),at=me.constantOr(null);if(at&&Ue.imageAtlas){const St=Ue.imageAtlas.patternPositions[at.toString()];St&&Ge.setConstantPatternPositions(St)}const gt=q.constantOr(null),Wt=le.constantOr(null);if(!xe&&gt&&Wt&&Ue.lineAtlas){const St=Ue.lineAtlas.getDash(gt,Wt);St&&Ge.setConstantPatternPositions(St)}let[ht,Lt]=m.paint.get("line-trim-offset");(Wt==="round"||Wt==="square")&&ht!==Lt&&(ht===0&&(ht-=1),Lt===1&&(Lt+=1));const bt=v.terrain?De.projMatrix:null,Gt=xe?vc(v,Ue,m,bt,U):vg(v,Ue,m,bt,je.lineClipsArray.length,U,[ht,Lt]);if(Se){const St=je.gradients[m.id];let $t=St.texture;if(m.gradientVersion!==St.version){let Ft=256;if(m.stepInterpolant){const Kt=u.getSource().maxzoom,Dn=De.canonical.z===Kt?Math.ceil(1<<v.transform.maxZoom-De.canonical.z):1;Ft=s.clamp(s.nextPowerOfTwo(je.maxLineLength/s.EXTENT*1024*Dn),256,Ce.maxTextureSize)}St.gradient=s.renderColorRamp({expression:m.gradientExpression(),evaluationKey:"lineProgress",resolution:Ft,image:St.gradient||void 0,clips:je.lineClipsArray}),St.texture?St.texture.update(St.gradient):St.texture=new s.Texture(Ce,St.gradient,ce.RGBA),St.version=m.gradientVersion,$t=St.texture}Ce.activeTexture.set(ce.TEXTURE1),$t.bind(m.stepInterpolant?ce.NEAREST:ce.LINEAR,ce.CLAMP_TO_EDGE)}K&&(Ce.activeTexture.set(ce.TEXTURE0),Ue.lineAtlasTexture.bind(ce.LINEAR,ce.REPEAT),Ge.updatePaintBuffers()),xe&&(Ce.activeTexture.set(ce.TEXTURE0),Ue.imageAtlasTexture.bind(ce.LINEAR,ce.CLAMP_TO_EDGE),Ge.updatePaintBuffers()),v.prepareDrawProgram(Ce,ct,De.toUnwrapped());const ft=St=>{ct.draw(Ce,ce.TRIANGLES,L,St,O,s.CullFaceMode.disabled,Gt,m.id,je.layoutVertexBuffer,je.indexBuffer,je.segments,m.paint,v.transform.zoom,Ge,[je.layoutVertexBuffer2])};if(Pe){const St=v.stencilModeForClipping(De).ref;St===0&&v.terrain&&Ce.clear({stencil:0});const $t={func:ce.EQUAL,mask:255};Gt.u_alpha_discard_threshold=.8,ft(new s.StencilMode($t,St,255,ce.KEEP,ce.KEEP,ce.INVERT)),Gt.u_alpha_discard_threshold=0,ft(new s.StencilMode($t,St,255,ce.KEEP,ce.KEEP,ce.KEEP))}else ft(v.stencilModeForClipping(De))}Pe&&(v.resetStencilClippingMasks(),v.terrain&&Ce.clear({stencil:0}))},fill:function(v,u,m,y){const S=m.paint.get("fill-color"),C=m.paint.get("fill-opacity");if(C.constantOr(1)===0)return;const L=v.colorModeForRenderPass(),O=m.paint.get("fill-pattern"),U=v.opaquePassEnabledForLayer()&&!O.constantOr(1)&&S.constantOr(s.Color.transparent).a===1&&C.constantOr(0)===1?"opaque":"translucent";if(v.renderPass===U){const q=v.depthModeForSublayer(1,v.renderPass==="opaque"?s.DepthMode.ReadWrite:s.DepthMode.ReadOnly);yg(v,u,m,y,q,L,!1)}if(v.renderPass==="translucent"&&m.paint.get("fill-antialias")){const q=v.depthModeForSublayer(m.getPaintProperty("fill-outline-color")?2:0,s.DepthMode.ReadOnly);yg(v,u,m,y,q,L,!0)}},"fill-extrusion":function(v,u,m,y){const S=m.paint.get("fill-extrusion-opacity");if(S!==0&&v.renderPass==="translucent"){const C=new s.DepthMode(v.context.gl.LEQUAL,s.DepthMode.ReadWrite,v.depthRangeFor3D);if(S!==1||m.paint.get("fill-extrusion-pattern").constantOr(1))$h(v,u,m,y,C,s.StencilMode.disabled,s.ColorMode.disabled),$h(v,u,m,y,C,v.stencilModeFor3D(),v.colorModeForRenderPass()),v.resetStencilClippingMasks();else{const L=v.colorModeForRenderPass();$h(v,u,m,y,C,s.StencilMode.disabled,L)}}},hillshade:function(v,u,m,y){if(v.renderPass!=="offscreen"&&v.renderPass!=="translucent")return;const S=v.context,C=v.depthModeForSublayer(0,s.DepthMode.ReadOnly),L=v.colorModeForRenderPass(),O=v.terrain&&v.terrain.renderingToTexture,[U,q]=v.renderPass!=="translucent"||O?[{},y]:v.stencilConfigForOverlap(y);for(const K of q){const le=u.getTile(K);if(le.needsHillshadePrepare&&v.renderPass==="offscreen")Ns(v,le,m,C,s.StencilMode.disabled,L);else if(v.renderPass==="translucent"){const me=O&&v.terrain?v.terrain.stencilModeForRTTOverlap(K):U[K.overscaledZ];_d(v,K,le,m,C,me,L)}}S.viewport.set([0,0,v.width,v.height]),v.resetStencilClippingMasks()},raster:function(v,u,m,y,S,C){if(v.renderPass!=="translucent"||m.paint.get("raster-opacity")===0||!y.length)return;const L=v.context,O=L.gl,U=u.getSource(),q=v.useProgram("raster"),K=v.colorModeForRenderPass(),le=v.terrain&&v.terrain.renderingToTexture,[me,xe]=U instanceof Jn||le?[{},y]:v.stencilConfigForOverlap(y),Se=xe[xe.length-1].overscaledZ,we=!v.options.moving;for(const Ce of xe){const ce=le?s.DepthMode.disabled:v.depthModeForSublayer(Ce.overscaledZ-Se,m.paint.get("raster-opacity")===1?s.DepthMode.ReadWrite:s.DepthMode.ReadOnly,O.LESS),ye=Ce.toUnwrapped(),Pe=u.getTile(Ce);if(le&&(!Pe||!Pe.hasData()))continue;const De=le?Ce.projMatrix:v.transform.calculateProjMatrix(ye,we),Ue=v.terrain&&le?v.terrain.stencilModeForRTTOverlap(Ce):me[Ce.overscaledZ],je=C?0:m.paint.get("raster-fade-duration");Pe.registerFadeDuration(je);const Ge=u.findLoadedParent(Ce,0),ct=yn(Pe,Ge,u,v.transform,je);let at,gt;v.terrain&&v.terrain.prepareDrawTile();const Wt=m.paint.get("raster-resampling")==="nearest"?O.NEAREST:O.LINEAR;L.activeTexture.set(O.TEXTURE0),Pe.texture.bind(Wt,O.CLAMP_TO_EDGE),L.activeTexture.set(O.TEXTURE1),Ge?(Ge.texture.bind(Wt,O.CLAMP_TO_EDGE),at=Math.pow(2,Ge.tileID.overscaledZ-Pe.tileID.overscaledZ),gt=[Pe.tileID.canonical.x*at%1,Pe.tileID.canonical.y*at%1]):Pe.texture.bind(Wt,O.CLAMP_TO_EDGE),Pe.texture.useMipmap&&L.extTextureFilterAnisotropic&&v.transform.pitch>20&&O.texParameterf(O.TEXTURE_2D,L.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,L.extTextureFilterAnisotropicMax);const ht=wm(De,gt||[0,0],at||1,ct,m,U instanceof Jn?U.perspectiveTransform:[0,0]);if(v.prepareDrawProgram(L,q,ye),U instanceof Jn)U.boundsBuffer&&U.boundsSegments&&q.draw(L,O.TRIANGLES,ce,s.StencilMode.disabled,K,s.CullFaceMode.disabled,ht,m.id,U.boundsBuffer,v.quadTriangleIndexBuffer,U.boundsSegments);else{const{tileBoundsBuffer:Lt,tileBoundsIndexBuffer:bt,tileBoundsSegments:Gt}=v.getTileBoundsBuffers(Pe);q.draw(L,O.TRIANGLES,ce,Ue,K,s.CullFaceMode.disabled,ht,m.id,Lt,bt,Gt)}}v.resetStencilClippingMasks()},background:function(v,u,m,y){const S=m.paint.get("background-color"),C=m.paint.get("background-opacity");if(C===0)return;const L=v.context,O=L.gl,U=v.transform,q=U.tileSize,K=m.paint.get("background-pattern");if(v.isPatternMissing(K))return;const le=!K&&S.a===1&&C===1&&v.opaquePassEnabledForLayer()?"opaque":"translucent";if(v.renderPass!==le)return;const me=s.StencilMode.disabled,xe=v.depthModeForSublayer(0,le==="opaque"?s.DepthMode.ReadWrite:s.DepthMode.ReadOnly),Se=v.colorModeForRenderPass(),we=v.useProgram(K?"backgroundPattern":"background");let Ce,ce=y;ce||(Ce=v.getBackgroundTiles(),ce=Object.values(Ce).map((ye=>ye.tileID))),K&&(L.activeTexture.set(O.TEXTURE0),v.imageManager.bind(v.context));for(const ye of ce){const Pe=ye.toUnwrapped(),De=y?ye.projMatrix:v.transform.calculateProjMatrix(Pe);v.prepareDrawTile();const Ue=u?u.getTile(ye):Ce?Ce[ye.key]:new s.Tile(ye,q,U.zoom,v),je=K?Tm(De,C,v,K,{tileID:ye,tileSize:q}):zh(De,C,S);v.prepareDrawProgram(L,we,Pe);const{tileBoundsBuffer:Ge,tileBoundsIndexBuffer:ct,tileBoundsSegments:at}=v.getTileBoundsBuffers(Ue);we.draw(L,O.TRIANGLES,xe,me,Se,s.CullFaceMode.disabled,je,m.id,Ge,ct,at)}},sky:function(v,u,m){const y=v.transform,S=y.projection.name==="mercator"||y.projection.name==="globe"?1:s.smoothstep(7,8,y.zoom),C=m.paint.get("sky-opacity")*S;if(C===0)return;const L=v.context,O=m.paint.get("sky-type"),U=new s.DepthMode(L.gl.LEQUAL,s.DepthMode.ReadOnly,[0,1]),q=v.frameCounter/1e3%1;O==="atmosphere"?v.renderPass==="offscreen"?m.needsSkyboxCapture(v)&&((function(K,le,me,xe){const Se=K.context,we=Se.gl;let Ce=le.skyboxFbo;if(!Ce){Ce=le.skyboxFbo=Se.createFramebuffer(32,32,!1),le.skyboxGeometry=new Wh(Se),le.skyboxTexture=Se.gl.createTexture(),we.bindTexture(we.TEXTURE_CUBE_MAP,le.skyboxTexture),we.texParameteri(we.TEXTURE_CUBE_MAP,we.TEXTURE_WRAP_S,we.CLAMP_TO_EDGE),we.texParameteri(we.TEXTURE_CUBE_MAP,we.TEXTURE_WRAP_T,we.CLAMP_TO_EDGE),we.texParameteri(we.TEXTURE_CUBE_MAP,we.TEXTURE_MIN_FILTER,we.LINEAR),we.texParameteri(we.TEXTURE_CUBE_MAP,we.TEXTURE_MAG_FILTER,we.LINEAR);for(let De=0;De<6;++De)we.texImage2D(we.TEXTURE_CUBE_MAP_POSITIVE_X+De,0,we.RGBA,32,32,0,we.RGBA,we.UNSIGNED_BYTE,null)}Se.bindFramebuffer.set(Ce.framebuffer),Se.viewport.set([0,0,32,32]);const ce=le.getCenter(K,!0),ye=K.useProgram("skyboxCapture"),Pe=new Float64Array(16);s.identity(Pe),s.rotateY(Pe,Pe,.5*-Math.PI),ba(Se,le,ye,Pe,ce,0),s.identity(Pe),s.rotateY(Pe,Pe,.5*Math.PI),ba(Se,le,ye,Pe,ce,1),s.identity(Pe),s.rotateX(Pe,Pe,.5*-Math.PI),ba(Se,le,ye,Pe,ce,2),s.identity(Pe),s.rotateX(Pe,Pe,.5*Math.PI),ba(Se,le,ye,Pe,ce,3),s.identity(Pe),ba(Se,le,ye,Pe,ce,4),s.identity(Pe),s.rotateY(Pe,Pe,Math.PI),ba(Se,le,ye,Pe,ce,5),Se.viewport.set([0,0,K.width,K.height])})(v,m),m.markSkyboxValid(v)):v.renderPass==="sky"&&(function(K,le,me,xe,Se){const we=K.context,Ce=we.gl,ce=K.transform,ye=K.useProgram("skybox");we.activeTexture.set(Ce.TEXTURE0),Ce.bindTexture(Ce.TEXTURE_CUBE_MAP,le.skyboxTexture);const Pe=((De,Ue,je,Ge,ct)=>({u_matrix:De,u_sun_direction:Ue,u_cubemap:0,u_opacity:Ge,u_temporal_offset:ct}))(ce.skyboxMatrix,le.getCenter(K,!1),0,xe,Se);K.prepareDrawProgram(we,ye),ye.draw(we,Ce.TRIANGLES,me,s.StencilMode.disabled,K.colorModeForRenderPass(),s.CullFaceMode.backCW,Pe,"skybox",le.skyboxGeometry.vertexBuffer,le.skyboxGeometry.indexBuffer,le.skyboxGeometry.segment)})(v,m,U,C,q):O==="gradient"&&v.renderPass==="sky"&&(function(K,le,me,xe,Se){const we=K.context,Ce=we.gl,ce=K.transform,ye=K.useProgram("skyboxGradient");le.skyboxGeometry||(le.skyboxGeometry=new Wh(we)),we.activeTexture.set(Ce.TEXTURE0);let Pe=le.colorRampTexture;Pe||(Pe=le.colorRampTexture=new s.Texture(we,le.colorRamp,Ce.RGBA)),Pe.bind(Ce.LINEAR,Ce.CLAMP_TO_EDGE);const De=((Ue,je,Ge,ct,at)=>({u_matrix:Ue,u_color_ramp:0,u_center_direction:je,u_radius:s.degToRad(Ge),u_opacity:ct,u_temporal_offset:at}))(ce.skyboxMatrix,le.getCenter(K,!1),le.paint.get("sky-gradient-radius"),xe,Se);K.prepareDrawProgram(we,ye),ye.draw(we,Ce.TRIANGLES,me,s.StencilMode.disabled,K.colorModeForRenderPass(),s.CullFaceMode.backCW,De,"skyboxGradient",le.skyboxGeometry.vertexBuffer,le.skyboxGeometry.indexBuffer,le.skyboxGeometry.segment)})(v,m,U,C,q)},debug:function(v,u,m){for(let y=0;y<m.length;y++)$l(v,u,m[y])},custom:function(v,u,m,y){const S=v.context,C=m.implementation;if(!v.transform.projection.unsupportedLayers||!v.transform.projection.unsupportedLayers.includes("custom")||v.terrain&&(v.terrain.renderingToTexture||v.renderPass==="offscreen")&&m.isLayerDraped()){if(v.renderPass==="offscreen"){const L=C.prerender;if(L){if(v.setCustomLayerDefaults(),S.setColorMode(v.colorModeForRenderPass()),v.transform.projection.name==="globe"){const O=v.transform.pointMerc;L.call(C,S.gl,v.transform.customLayerMatrix(),v.transform.getProjection(),v.transform.globeToMercatorMatrix(),s.globeToMercatorTransition(v.transform.zoom),[O.x,O.y],v.transform.pixelsPerMeterRatio)}else L.call(C,S.gl,v.transform.customLayerMatrix());S.setDirty(),v.setBaseState()}}else if(v.renderPass==="translucent"){if(v.terrain&&v.terrain.renderingToTexture){const O=C.renderToTile;if(O){const U=y[0].canonical,q=new s.MercatorCoordinate(U.x+y[0].wrap*(1<<U.z),U.y,U.z);S.setDepthMode(s.DepthMode.disabled),S.setStencilMode(s.StencilMode.disabled),S.setColorMode(v.colorModeForRenderPass()),v.setCustomLayerDefaults(),O.call(C,S.gl,q),S.setDirty(),v.setBaseState()}return}v.setCustomLayerDefaults(),S.setColorMode(v.colorModeForRenderPass()),S.setStencilMode(s.StencilMode.disabled);const L=C.renderingMode==="3d"?new s.DepthMode(v.context.gl.LEQUAL,s.DepthMode.ReadWrite,v.depthRangeFor3D):v.depthModeForSublayer(0,s.DepthMode.ReadOnly);if(S.setDepthMode(L),v.transform.projection.name==="globe"){const O=v.transform.pointMerc;C.render(S.gl,v.transform.customLayerMatrix(),v.transform.getProjection(),v.transform.globeToMercatorMatrix(),s.globeToMercatorTransition(v.transform.zoom),[O.x,O.y],v.transform.pixelsPerMeterRatio)}else C.render(S.gl,v.transform.customLayerMatrix());S.setDirty(),v.setBaseState(),S.bindFramebuffer.set(null)}}else s.warnOnce("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")}};class Cu{constructor(u,m,y=!1){this.context=new Qt(u,y),this.transform=m,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=s.SourceCache.maxUnderzooming+s.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(u,m){const y=!!u&&!!u.terrain&&this.transform.projection.supportsTerrain;if(!(y||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new rr(this,u));const S=this._terrain;this.transform.elevation=y?S:null,S.update(u,this.transform,m)}_updateFog(u){const m=u.fog;if(!m||this.transform.projection.name==="globe"||m.getOpacity(this.transform.pitch)<1||m.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[y,S]=m.getFovAdjustedRange(this.transform._fov);if(y>S)return void(this.transform.fogCullDistSq=null);const C=y+.78*(S-y);this.transform.fogCullDistSq=C*C}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(u,m){if(this.width=u*s.exported.devicePixelRatio,this.height=m*s.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const y of this.style.order)this.style._layers[y].resize()}setup(){const u=this.context,m=new s.StructArrayLayout2i4;m.emplaceBack(0,0),m.emplaceBack(s.EXTENT,0),m.emplaceBack(0,s.EXTENT),m.emplaceBack(s.EXTENT,s.EXTENT),this.tileExtentBuffer=u.createVertexBuffer(m,s.posAttributes.members),this.tileExtentSegments=s.SegmentVector.simpleSegment(0,0,4,2);const y=new s.StructArrayLayout2i4;y.emplaceBack(0,0),y.emplaceBack(s.EXTENT,0),y.emplaceBack(0,s.EXTENT),y.emplaceBack(s.EXTENT,s.EXTENT),this.debugBuffer=u.createVertexBuffer(y,s.posAttributes.members),this.debugSegments=s.SegmentVector.simpleSegment(0,0,4,5);const S=new s.StructArrayLayout2i4;S.emplaceBack(-1,-1),S.emplaceBack(1,-1),S.emplaceBack(-1,1),S.emplaceBack(1,1),this.viewportBuffer=u.createVertexBuffer(S,s.posAttributes.members),this.viewportSegments=s.SegmentVector.simpleSegment(0,0,4,2);const C=new s.StructArrayLayout4i8;C.emplaceBack(0,0,0,0),C.emplaceBack(s.EXTENT,0,s.EXTENT,0),C.emplaceBack(0,s.EXTENT,0,s.EXTENT),C.emplaceBack(s.EXTENT,s.EXTENT,s.EXTENT,s.EXTENT),this.mercatorBoundsBuffer=u.createVertexBuffer(C,s.boundsAttributes.members),this.mercatorBoundsSegments=s.SegmentVector.simpleSegment(0,0,4,2);const L=new s.StructArrayLayout3ui6;L.emplaceBack(0,1,2),L.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=u.createIndexBuffer(L);const O=new s.StructArrayLayout1ui2;for(const q of[0,1,3,2,0])O.emplaceBack(q);this.debugIndexBuffer=u.createIndexBuffer(O),this.emptyTexture=new s.Texture(u,new s.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),u.gl.RGBA),this.identityMat=s.create();const U=this.context.gl;this.stencilClearMode=new s.StencilMode({func:U.ALWAYS,mask:0},0,255,U.ZERO,U.ZERO,U.ZERO),this.loadTimeStamps.push(s.window.performance.now()),this.atmosphereBuffer=new Mm(this.context)}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(u){return u._makeTileBoundsBuffers(this.context,this.transform.projection),u._tileBoundsBuffer?{tileBoundsBuffer:u._tileBoundsBuffer,tileBoundsIndexBuffer:u._tileBoundsIndexBuffer,tileBoundsSegments:u._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const u=this.context,m=u.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(u,m.TRIANGLES,s.DepthMode.disabled,this.stencilClearMode,s.ColorMode.disabled,s.CullFaceMode.disabled,Mt(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(u,m,y){if(!m||this.currentStencilSource===m.id||!u.isTileClipped()||!y||y.length===0)return;if(this._tileClippingMaskIDs&&!this.terrain){let O=!1;for(const U of y)if(this._tileClippingMaskIDs[U.key]===void 0){O=!0;break}if(!O)return}this.currentStencilSource=m.id;const S=this.context,C=S.gl;this.nextStencilID+y.length>256&&this.clearStencil(),S.setColorMode(s.ColorMode.disabled),S.setDepthMode(s.DepthMode.disabled);const L=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const O of y){const U=m.getTile(O),q=this._tileClippingMaskIDs[O.key]=this.nextStencilID++,{tileBoundsBuffer:K,tileBoundsIndexBuffer:le,tileBoundsSegments:me}=this.getTileBoundsBuffers(U);L.draw(S,C.TRIANGLES,s.DepthMode.disabled,new s.StencilMode({func:C.ALWAYS,mask:0},q,255,C.KEEP,C.KEEP,C.REPLACE),s.ColorMode.disabled,s.CullFaceMode.disabled,Mt(O.projMatrix),"$clipping",K,le,me)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const u=this.nextStencilID++,m=this.context.gl;return new s.StencilMode({func:m.NOTEQUAL,mask:255},u,255,m.KEEP,m.KEEP,m.REPLACE)}stencilModeForClipping(u){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(u);const m=this.context.gl;return new s.StencilMode({func:m.EQUAL,mask:255},this._tileClippingMaskIDs[u.key],0,m.KEEP,m.KEEP,m.REPLACE)}stencilConfigForOverlap(u){const m=this.context.gl,y=u.sort(((L,O)=>O.overscaledZ-L.overscaledZ)),S=y[y.length-1].overscaledZ,C=y[0].overscaledZ-S+1;if(C>1){this.currentStencilSource=void 0,this.nextStencilID+C>256&&this.clearStencil();const L={};for(let O=0;O<C;O++)L[O+S]=new s.StencilMode({func:m.GEQUAL,mask:255},O+this.nextStencilID,255,m.KEEP,m.KEEP,m.REPLACE);return this.nextStencilID+=C,[L,y]}return[{[S]:s.StencilMode.disabled},y]}colorModeForRenderPass(){const u=this.context.gl;return this._showOverdrawInspector?new s.ColorMode([u.CONSTANT_COLOR,u.ONE],new s.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?s.ColorMode.unblended:s.ColorMode.alphaBlended}depthModeForSublayer(u,m,y){if(!this.opaquePassEnabledForLayer())return s.DepthMode.disabled;const S=1-((1+this.currentLayer)*this.numSublayers+u)*this.depthEpsilon;return new s.DepthMode(y||this.context.gl.LEQUAL,m,[S,S])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(u,m){this.style=u,this.options=m,this.imageManager=u.imageManager,this.glyphManager=u.glyphManager,this.symbolFadeChange=u.placement.symbolFadeChange(s.exported.now()),this.imageManager.beginFrame();const y=this.style.order,S=this.style._sourceCaches;for(const q in S){const K=S[q];K.used&&K.prepare(this.context)}const C={},L={},O={};for(const q in S){const K=S[q];C[q]=K.getVisibleCoordinates(),L[q]=C[q].slice().reverse(),O[q]=K.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let q=0;q<y.length;q++)if(this.style._layers[y[q]].is3D()){this.opaquePassCutoff=q;break}if(this.terrain&&(this.terrain.updateTileBinding(O),this.opaquePassCutoff=0),this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new s.GlobeSharedBuffers(this.context)),!s.isMapAuthenticated(this.context.gl))return;this.renderPass="offscreen";for(const q of y){const K=this.style._layers[q],le=u._getLayerSourceCache(K);if(!K.hasOffscreenPass()||K.isHidden(this.transform.zoom))continue;const me=le?L[le.id]:void 0;(K.type==="custom"||K.isSky()||me&&me.length)&&this.renderLayer(this,le,K,me)}this.depthRangeFor3D=[0,1-(u.order.length+2)*this.numSublayers*this.depthEpsilon];const U=this.terrain;if(U&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&U.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:m.showOverdrawInspector?s.Color.black:s.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=m.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=y.length-1;this.currentLayer>=0;this.currentLayer--){const q=this.style._layers[y[this.currentLayer]],K=u._getLayerSourceCache(q);if(q.isSky())continue;const le=K?L[K.id]:void 0;this._renderTileClippingMasks(q,K,le),this.renderLayer(this,K,q,le)}if(this.style.fog&&this.transform.projection.supportsFog&&(function(q,K){const le=q.context,me=le.gl,xe=q.transform,Se=new s.DepthMode(me.LEQUAL,s.DepthMode.ReadOnly,[0,1]),we=q.useProgram("globeAtmosphere",null,xe.projection.name==="globe"?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),Ce=s.globeToMercatorTransition(xe.zoom),ce=K.properties.get("color").toArray01(),ye=K.properties.get("high-color").toArray01(),Pe=K.properties.get("space-color").toArray01PremultipliedAlpha(),De=s.identity$1([]);s.rotateY$1(De,De,-s.degToRad(xe._center.lng)),s.rotateX$1(De,De,s.degToRad(xe._center.lat)),s.rotateZ$1(De,De,xe.angle),s.rotateX$1(De,De,-xe._pitch);const Ue=s.fromQuat(new Float32Array(16),De),je=s.mapValue(K.properties.get("star-intensity"),0,1,0,.25),Ge=5e-4,ct=s.mapValue(K.properties.get("horizon-blend"),0,1,Ge,.25),at=s.globeUseCustomAntiAliasing(q,le,xe)&&ct===Ge?xe.worldSize/(2*Math.PI*1.025)-1:xe.globeRadius,gt=q.frameCounter/1e3%1,Wt=s.length(xe.globeCenterInViewSpace),ht=Math.sqrt(Math.pow(Wt,2)-Math.pow(at,2)),Lt=Math.acos(ht/Wt),bt=((ft,St,$t,Ft,Kt,Dn,Gn,Sn,Rn,pi,mi,In,Di,$i)=>({u_frustum_tl:ft,u_frustum_tr:St,u_frustum_br:$t,u_frustum_bl:Ft,u_horizon:Kt,u_transition:Dn,u_fadeout_range:Gn,u_color:Sn,u_high_color:Rn,u_space_color:pi,u_star_intensity:mi,u_star_size:5*s.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:In,u_horizon_angle:Di,u_rotation_matrix:$i}))(xe.frustumCorners.TL,xe.frustumCorners.TR,xe.frustumCorners.BR,xe.frustumCorners.BL,xe.frustumCorners.horizon,Ce,ct,ce,ye,Pe,je,gt,Lt,Ue);q.prepareDrawProgram(le,we);const Gt=q.atmosphereBuffer;Gt&&we.draw(le,me.TRIANGLES,Se,s.StencilMode.disabled,s.ColorMode.alphaBlended,s.CullFaceMode.backCW,bt,"skybox",Gt.vertexBuffer,Gt.indexBuffer,Gt.segments)})(this,this.style.fog),this.renderPass="sky",(s.globeToMercatorTransition(this.transform.zoom)>0||this.transform.projection.name!=="globe")&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<y.length;this.currentLayer++){const q=this.style._layers[y[this.currentLayer]],K=u._getLayerSourceCache(q);q.isSky()&&this.renderLayer(this,K,q,K?L[K.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<y.length;){const q=this.style._layers[y[this.currentLayer]],K=u._getLayerSourceCache(q);if(q.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(q)){if(q.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const le=K?(q.type==="symbol"?O:L)[K.id]:void 0;this._renderTileClippingMasks(q,K,K?C[K.id]:void 0),this.renderLayer(this,K,q,le),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let q=null;s.values(this.style._layers).forEach((K=>{const le=u._getLayerSourceCache(K);le&&!K.isHidden(this.transform.zoom)&&(!q||q.getSource().maxzoom<le.getSource().maxzoom)&&(q=le)})),q&&this.options.showTileBoundaries&&_c.debug(this,q,q.getVisibleCoordinates())}this.options.showPadding&&(function(q){const K=q.transform.padding;Im(q,q.transform.height-(K.top||0),3,qc),Im(q,K.bottom||0,3,km),jh(q,K.left||0,3,B_),jh(q,q.transform.width-(K.right||0),3,F_);const le=q.transform.centerPoint;(function(me,xe,Se,we){Xc(me,xe-1,Se-10,2,20,we),Xc(me,xe-10,Se-1,20,2,we)})(q,le.x,q.transform.height-le.y,Kc)})(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(s.window.performance.now()),this.saveCanvasCopy())}renderLayer(u,m,y,S){y.isHidden(this.transform.zoom)||(y.type==="background"||y.type==="sky"||y.type==="custom"||S&&S.length)&&(this.id=y.id,this.gpuTimingStart(y),(!u.transform.projection.unsupportedLayers||!u.transform.projection.unsupportedLayers.includes(y.type)||u.terrain&&y.type==="custom")&&_c[y.type](u,m,y,S,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(u){if(!this.options.gpuTiming)return;const m=this.context.extTimerQuery;let y=this.gpuTimers[u.id];y||(y=this.gpuTimers[u.id]={calls:0,cpuTime:0,query:m.createQueryEXT()}),y.calls++,m.beginQueryEXT(m.TIME_ELAPSED_EXT,y.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const u=this.context.extTimerQuery,m=u.createQueryEXT();this.deferredRenderGpuTimeQueries.push(m),u.beginQueryEXT(u.TIME_ELAPSED_EXT,m)}}gpuTimingDeferredRenderEnd(){if(!this.options.gpuTimingDeferredRender)return;const u=this.context.extTimerQuery;u.endQueryEXT(u.TIME_ELAPSED_EXT)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const u=this.context.extTimerQuery;u.endQueryEXT(u.TIME_ELAPSED_EXT)}collectGpuTimers(){const u=this.gpuTimers;return this.gpuTimers={},u}collectDeferredRenderGpuQueries(){const u=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],u}queryGpuTimers(u){const m={};for(const y in u){const S=u[y],C=this.context.extTimerQuery,L=C.getQueryObjectEXT(S.query,C.QUERY_RESULT_EXT)/1e6;C.deleteQueryEXT(S.query),m[y]=L}return m}queryGpuTimeDeferredRender(u){if(!this.options.gpuTimingDeferredRender)return 0;const m=this.context.extTimerQuery;let y=0;for(const S of u)y+=m.getQueryObjectEXT(S,m.QUERY_RESULT_EXT)/1e6,m.deleteQueryEXT(S);return y}translatePosMatrix(u,m,y,S,C){if(!y[0]&&!y[1])return u;const L=C?S==="map"?this.transform.angle:0:S==="viewport"?-this.transform.angle:0;if(L){const q=Math.sin(L),K=Math.cos(L);y=[y[0]*K-y[1]*q,y[0]*q+y[1]*K]}const O=[C?y[0]:Je(m,y[0],this.transform.zoom),C?y[1]:Je(m,y[1],this.transform.zoom),0],U=new Float32Array(16);return s.translate(U,u,O),U}saveTileTexture(u){const m=this._tileTextures[u.size[0]];m?m.push(u):this._tileTextures[u.size[0]]=[u]}getTileTexture(u){const m=this._tileTextures[u];return m&&m.length>0?m.pop():null}isPatternMissing(u){return u===null||u!==void 0&&!this.imageManager.getPattern(u.toString())}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}currentGlobalDefines(){const u=this.terrain&&this.terrain.renderingToTexture,m=this.terrain&&this.terrain.exaggeration()===0,y=this.style&&this.style.fog,S=[];return this.terrainRenderModeElevated()&&S.push("TERRAIN"),this.transform.projection.name==="globe"&&S.push("GLOBE"),m&&S.push("ZERO_EXAGGERATION"),y&&!u&&y.getOpacity(this.transform.pitch)!==0&&S.push("FOG"),u&&S.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&S.push("OVERDRAW_INSPECTOR"),S}useProgram(u,m,y){this.cache=this.cache||{};const S=y||[],C=this.currentGlobalDefines().concat(S),L=Qn.cacheKey(wu[u],u,C,m);return this.cache[L]||(this.cache[L]=new Qn(this.context,u,wu[u],m,Do[u],C)),this.cache[L]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const u=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(u.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=s.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new s.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(u,m,y){if(this.terrain&&this.terrain.renderingToTexture)return;const S=this.style.fog;if(S){const C=S.getOpacity(this.transform.pitch),L=((O,U,q,K,le,me,xe,Se,we,Ce,ce)=>{const ye=O.transform,Pe=U.properties.get("color").toArray01();Pe[3]=K;const De=O.frameCounter/1e3%1;return{u_fog_matrix:q?ye.calculateFogTileMatrix(q):O.identityMat,u_fog_range:U.getFovAdjustedRange(ye._fov),u_fog_color:Pe,u_fog_horizon_blend:U.properties.get("horizon-blend"),u_fog_temporal_offset:De,u_frustum_tl:le,u_frustum_tr:me,u_frustum_br:xe,u_frustum_bl:Se,u_globe_pos:we,u_globe_radius:Ce,u_viewport:ce,u_globe_transition:s.globeToMercatorTransition(ye.zoom),u_is_globe:+(ye.projection.name==="globe")}})(this,S,y,C,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*s.exported.devicePixelRatio,this.transform.height*s.exported.devicePixelRatio]);m.setFogUniformValues(u,L)}}setTileLoadedFlag(u){this.tileLoaded=u}saveCanvasCopy(){const u=this.canvasCopy();u&&(this.frameCopies.push(u),this.tileLoaded=!1)}canvasCopy(){const u=this.context.gl,m=u.createTexture();return u.bindTexture(u.TEXTURE_2D,m),u.copyTexImage2D(u.TEXTURE_2D,0,u.RGBA,0,0,u.drawingBufferWidth,u.drawingBufferHeight,0),m}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const u=this.style&&this.style.fog;return!!u&&u.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){const u=this._backgroundTiles,m=this._backgroundTiles={},y=this.transform.coveringTiles({tileSize:512});for(const S of y)m[S.key]=u[S.key]||new s.Tile(S,512,this.transform.tileZoom,this);return m}clearBackgroundTiles(){this._backgroundTiles={}}}class Hh{constructor(u=0,m=0,y=0,S=0){if(isNaN(u)||u<0||isNaN(m)||m<0||isNaN(y)||y<0||isNaN(S)||S<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=u,this.bottom=m,this.left=y,this.right=S}interpolate(u,m,y){return m.top!=null&&u.top!=null&&(this.top=s.number(u.top,m.top,y)),m.bottom!=null&&u.bottom!=null&&(this.bottom=s.number(u.bottom,m.bottom,y)),m.left!=null&&u.left!=null&&(this.left=s.number(u.left,m.left,y)),m.right!=null&&u.right!=null&&(this.right=s.number(u.right,m.right,y)),this}getCenter(u,m){const y=s.clamp((this.left+u-this.right)/2,0,u),S=s.clamp((this.top+m-this.bottom)/2,0,m);return new s.Point(y,S)}equals(u){return this.top===u.top&&this.bottom===u.bottom&&this.left===u.left&&this.right===u.right}clone(){return new Hh(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Gh(v,u){const m=s.getColumn(v,3);s.fromQuat(v,u),s.setColumn(v,3,m)}function Ei(v,u){const m=s.identity$1([]);return s.rotateZ$1(m,m,-u),s.rotateX$1(m,m,-v),m}function Cd(v,u){const m=[v[0],v[1],0],y=[u[0],u[1],0];if(s.length(m)>=1e-15){const L=s.normalize([],m);s.scale$2(y,L,s.dot(y,L)),u[0]=y[0],u[1]=y[1]}const S=s.cross([],u,v);if(s.len(S)<1e-15)return null;const C=Math.atan2(-S[1],S[0]);return Ei(Math.atan2(Math.sqrt(v[0]*v[0]+v[1]*v[1]),-v[2]),C)}class bl{constructor(u,m){this.position=u,this.orientation=m}get position(){return this._position}set position(u){if(u){const m=u instanceof s.MercatorCoordinate?u:new s.MercatorCoordinate(u[0],u[1],u[2]);this._renderWorldCopies&&(m.x=s.wrap(m.x,0,1)),this._position=m}else this._position=null}lookAtPoint(u,m){if(this.orientation=null,!this.position)return;const y=this.position,S=this._elevation?this._elevation.getAtPointOrZero(s.MercatorCoordinate.fromLngLat(u)):0,C=s.MercatorCoordinate.fromLngLat(u,S),L=[C.x-y.x,C.y-y.y,C.z-y.z];m||(m=[0,0,1]),m[2]=Math.abs(m[2]),this.orientation=Cd(L,m)}setPitchBearing(u,m){this.orientation=Ei(s.degToRad(u),s.degToRad(-m))}}class kd{constructor(u,m){this._transform=s.identity([]),this.orientation=m,this.position=u}get mercatorPosition(){const u=this.position;return new s.MercatorCoordinate(u[0],u[1],u[2])}get position(){const u=s.getColumn(this._transform,3);return[u[0],u[1],u[2]]}set position(u){var m;u&&s.setColumn(this._transform,3,[(m=u)[0],m[1],m[2],1])}get orientation(){return this._orientation}set orientation(u){this._orientation=u||s.identity$1([]),u&&Gh(this._transform,this._orientation)}getPitchBearing(){const u=this.forward(),m=this.right();return{bearing:Math.atan2(-m[1],m[0]),pitch:Math.atan2(Math.sqrt(u[0]*u[0]+u[1]*u[1]),-u[2])}}setPitchBearing(u,m){this._orientation=Ei(u,m),Gh(this._transform,this._orientation)}forward(){const u=s.getColumn(this._transform,2);return[-u[0],-u[1],-u[2]]}up(){const u=s.getColumn(this._transform,1);return[-u[0],-u[1],-u[2]]}right(){const u=s.getColumn(this._transform,0);return[u[0],u[1],u[2]]}getCameraToWorld(u,m){const y=new Float64Array(16);return s.invert(y,this.getWorldToCamera(u,m)),y}getWorldToCameraPosition(u,m,y){const S=this.position;s.scale$2(S,S,-u);const C=new Float64Array(16);return s.fromScaling(C,[y,y,y]),s.translate(C,C,S),C[10]*=m,C}getWorldToCamera(u,m){const y=new Float64Array(16),S=new Float64Array(4),C=this.position;return s.conjugate(S,this._orientation),s.scale$2(C,C,-u),s.fromQuat(y,S),s.translate(y,y,C),y[1]*=-1,y[5]*=-1,y[9]*=-1,y[13]*=-1,y[8]*=m,y[9]*=m,y[10]*=m,y[11]*=m,y}getCameraToClipPerspective(u,m,y,S){const C=new Float64Array(16);return s.perspective(C,u,m,y,S),C}getDistanceToElevation(u,m=!1){const y=u===0?0:s.mercatorZfromAltitude(u,m?s.latFromMercatorY(this.position[1]):this.position[1]),S=this.forward();return(y-this.position[2])/S[2]}clone(){return new kd([...this.position],[...this.orientation])}}function ku(v,u){const m=qh(v.projection,v.zoom,v.width,v.height),y=(function(C,L,O,U,q){const K=new s.LngLat(O.lng-180*jl,O.lat),le=new s.LngLat(O.lng+180*jl,O.lat),me=C.project(K.lng,K.lat),xe=C.project(le.lng,le.lat),Se=-Math.atan2(xe.y-me.y,xe.x-me.x),we=s.MercatorCoordinate.fromLngLat(O);we.y=s.clamp(we.y,-1+jl,1-jl);const Ce=we.toLngLat(),ce=C.project(Ce.lng,Ce.lat),ye=s.MercatorCoordinate.fromLngLat(Ce);ye.x+=jl;const Pe=ye.toLngLat(),De=C.project(Pe.lng,Pe.lat),Ue=Kh(De.x-ce.x,De.y-ce.y,Se),je=s.MercatorCoordinate.fromLngLat(Ce);je.y+=jl;const Ge=je.toLngLat(),ct=C.project(Ge.lng,Ge.lat),at=Kh(ct.x-ce.x,ct.y-ce.y,Se),gt=Math.abs(Ue.x)/Math.abs(at.y),Wt=s.identity([]);s.rotateZ(Wt,Wt,-Se*(1-(q?0:U)));const ht=s.identity([]);return s.scale(ht,ht,[1,1-(1-gt)*U,1]),ht[4]=-at.x/at.y*U,s.rotateZ(ht,ht,Se),s.multiply(ht,Wt,ht),ht})(v.projection,0,v.center,m,u),S=bg(v);return s.scale(y,y,[S,S,1]),y}function bg(v){const u=v.projection,m=qh(v.projection,v.zoom,v.width,v.height),y=xg(u,v.center),S=xg(u,s.LngLat.convert(u.center));return Math.pow(2,y*m+(1-m)*S)}function qh(v,u,m,y,S=1/0){const C=v.range;if(!C)return 0;const L=Math.min(S,Math.max(m,y)),O=Math.log(L/1024)/Math.LN2;return s.smoothstep(C[0]+O,C[1]+O,u)}const jl=1/4e4;function xg(v,u){const m=s.clamp(u.lat,-s.MAX_MERCATOR_LATITUDE,s.MAX_MERCATOR_LATITUDE),y=new s.LngLat(u.lng-180*jl,m),S=new s.LngLat(u.lng+180*jl,m),C=v.project(y.lng,m),L=v.project(S.lng,m),O=s.MercatorCoordinate.fromLngLat(y),U=s.MercatorCoordinate.fromLngLat(S),q=L.x-C.x,K=L.y-C.y,le=U.x-O.x,me=U.y-O.y,xe=Math.sqrt((le*le+me*me)/(q*q+K*K));return Math.log(xe)/Math.LN2}function Kh(v,u,m){const y=Math.cos(m),S=Math.sin(m);return{x:v*y-u*S,y:v*S+u*y}}class Iu{constructor(u,m,y,S,C,L,O){this.tileSize=512,this._renderWorldCopies=C===void 0||C,this._minZoom=u||0,this._maxZoom=m||22,this._minPitch=y??0,this._maxPitch=S??60,this.setProjection(L),this.setMaxBounds(O),this.width=0,this.height=0,this._center=new s.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new Hh,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new kd,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}clone(){const u=new Iu(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return u._elevation=this._elevation,u._centerAltitude=this._centerAltitude,u._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,u.tileSize=this.tileSize,u.mercatorFromTransition=this.mercatorFromTransition,u.width=this.width,u.height=this.height,u.cameraElevationReference=this.cameraElevationReference,u._center=this._center,u._setZoom(this.zoom),u._seaLevelZoom=this._seaLevelZoom,u.angle=this.angle,u._fov=this._fov,u._pitch=this._pitch,u._nearZ=this._nearZ,u._farZ=this._farZ,u._averageElevation=this._averageElevation,u._unmodified=this._unmodified,u._edgeInsets=this._edgeInsets.clone(),u._camera=this._camera.clone(),u._calcMatrices(),u.freezeTileCoverage=this.freezeTileCoverage,u.frustumCorners=this.frustumCorners,u}get elevation(){return this._elevation}set elevation(u){this._elevation!==u&&(this._elevation=u,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(u,m=!1){const y=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(this._seaLevelZoom==null||y)&&this._updateCameraOnTerrain(),(u||y)&&this._constrainCamera(m),this._calcMatrices()}getProjection(){return s.pick(this.projection,["name","center","parallels"])}setProjection(u){this.projectionOptions=u||{name:"mercator"};const m=this.projection?this.getProjection():void 0;this.projection=s.getProjection(this.projectionOptions);const y=!p(m,this.getProjection());return y&&this._calcMatrices(),this.mercatorFromTransition=!1,y}setMercatorFromTransition(){const u=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=s.getProjection({name:"mercator"});const m=u!==this.projection.name;return m&&this._calcMatrices(),m}get minZoom(){return this._minZoom}set minZoom(u){this._minZoom!==u&&(this._minZoom=u,this.zoom=Math.max(this.zoom,u))}get maxZoom(){return this._maxZoom}set maxZoom(u){this._maxZoom!==u&&(this._maxZoom=u,this.zoom=Math.min(this.zoom,u))}get minPitch(){return this._minPitch}set minPitch(u){this._minPitch!==u&&(this._minPitch=u,this.pitch=Math.max(this.pitch,u))}get maxPitch(){return this._maxPitch}set maxPitch(u){this._maxPitch!==u&&(this._maxPitch=u,this.pitch=Math.min(this.pitch,u))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(u){u===void 0?u=!0:u===null&&(u=!1),this._renderWorldCopies=u}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const u=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(u))}get cameraWorldSize(){const u=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(u))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return s.mercatorZfromAltitude(this.center.lat,this.cameraWorldSizeForFog)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new s.Point(this.width,this.height)}get bearing(){return s.wrap(this.rotation,-180,180)}set bearing(u){this.rotation=u}get rotation(){return-this.angle/Math.PI*180}set rotation(u){const m=-u*Math.PI/180;var y;this.angle!==m&&(this._unmodified=!1,this.angle=m,this._calcMatrices(),this.rotationMatrix=(y=new s.ARRAY_TYPE(4),s.ARRAY_TYPE!=Float32Array&&(y[1]=0,y[2]=0),y[0]=1,y[3]=1,y),(function(S,C,L){var O=C[0],U=C[1],q=C[2],K=C[3],le=Math.sin(L),me=Math.cos(L);S[0]=O*me+q*le,S[1]=U*me+K*le,S[2]=O*-le+q*me,S[3]=U*-le+K*me})(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(u){const m=s.clamp(u,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==m&&(this._unmodified=!1,this._pitch=m,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}get fovX(){return this._fov}get fovY(){const u=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/u)}set fov(u){u=Math.max(.01,Math.min(60,u)),this._fov!==u&&(this._unmodified=!1,this._fov=s.degToRad(u),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(u){this._averageElevation=u,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(u){const m=Math.min(Math.max(u,this.minZoom),this.maxZoom);this._zoom!==m&&(this._unmodified=!1,this._setZoom(m),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(u){this._zoom=u,this.scale=this.zoomScale(u),this.tileZoom=Math.floor(u),this.zoomFraction=u-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const u=this._elevation;this._centerAltitude=u.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=u.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){this._centerAltitudeValidForExaggeration!==void 0&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const u=this._elevation,m=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],y=this.horizonLineFromTop();let S=0,C=0;for(let L=0;L<m.length;L++){const O=new s.Point(m[L][0]*this.width,y+m[L][1]*(this.height-y)),U=u.pointCoordinate(O);if(!U)continue;const q=1/Math.hypot(U[0]-this._camera.position[0],U[1]-this._camera.position[1]);S+=U[3]*q,C+=q}return C===0?NaN:S/C}get center(){return this._center}set center(u){u.lat===this._center.lat&&u.lng===this._center.lng||(this._unmodified=!1,this._center=u,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._seaLevelZoom==null||!this._elevation)return;const u=this._seaLevelZoom,m=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),y=this.pixelsPerMeter/this.worldSize*m,S=this._mercatorZfromZoom(u),C=this._mercatorZfromZoom(this._maxZoom),L=Math.max(S-y,C);this._setZoom(this._zoomFromMercatorZ(L))}get padding(){return this._edgeInsets.toJSON()}set padding(u){this._edgeInsets.equals(u)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,u,1),this._calcMatrices())}computeZoomRelativeTo(u){const m=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,u.toAltitude()));let y;y=u.z<this._camera.position[2]?[m.x,m.y,m.z]:[u.x,u.y,u.z];const S=s.length(s.sub([],this._camera.position,y));return s.clamp(this._zoomFromMercatorZ(S),this._minZoom,this._maxZoom)}setFreeCameraOptions(u){if(!this.height||!u.position&&!u.orientation)return;this._updateCameraState();let m=!1;if(u.orientation&&!s.exactEquals(u.orientation,this._camera.orientation)&&(m=this._setCameraOrientation(u.orientation)),u.position){const y=[u.position.x,u.position.y,u.position.z];s.exactEquals$1(y,this._camera.position)||(this._setCameraPosition(y),m=!0)}m&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const u=this._camera.position,m=new bl;return m.position=new s.MercatorCoordinate(u[0],u[1],u[2]),m.orientation=this._camera.orientation,m._elevation=this.elevation,m._renderWorldCopies=this.renderWorldCopies,m}_setCameraOrientation(u){if(!s.length$1(u))return!1;s.normalize$1(u,u);const m=s.transformQuat([],[0,0,-1],u),y=s.transformQuat([],[0,-1,0],u);if(y[2]<0)return!1;const S=Cd(m,y);return!!S&&(this._camera.orientation=S,!0)}_setCameraPosition(u){const m=this.zoomScale(this.minZoom)*this.tileSize,y=this.zoomScale(this.maxZoom)*this.tileSize,S=this.cameraToCenterDistance;u[2]=s.clamp(u[2],S/y,S/m),this._camera.position=u}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(u){return this._edgeInsets.equals(u)}interpolatePadding(u,m,y){this._unmodified=!1,this._edgeInsets.interpolate(u,m,y),this._constrain(),this._calcMatrices()}coveringZoomLevel(u){const m=(u.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/u.tileSize));return Math.max(0,m)}getVisibleUnwrappedCoordinates(u){const m=[new s.UnwrappedTileID(0,u)];if(this.renderWorldCopies){const y=this.pointCoordinate(new s.Point(0,0)),S=this.pointCoordinate(new s.Point(this.width,0)),C=this.pointCoordinate(new s.Point(this.width,this.height)),L=this.pointCoordinate(new s.Point(0,this.height)),O=Math.floor(Math.min(y.x,S.x,C.x,L.x)),U=Math.floor(Math.max(y.x,S.x,C.x,L.x)),q=1;for(let K=O-q;K<=U+q;K++)K!==0&&m.push(new s.UnwrappedTileID(K,u))}return m}coveringTiles(u){let m=this.coveringZoomLevel(u);const y=m,S=this.elevation&&!u.isTerrainDEM,C=this.projection.name==="mercator";if(u.minzoom!==void 0&&m<u.minzoom)return[];u.maxzoom!==void 0&&m>u.maxzoom&&(m=u.maxzoom);const L=this.locationCoordinate(this.center),O=this.center.lat,U=1<<m,q=[U*L.x,U*L.y,0],K=this.projection.name==="globe",le=!K,me=s.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,m,le),xe=K?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),Se=U*s.mercatorZfromAltitude(1,this.center.lat),we=this._camera.position[2]/s.mercatorZfromAltitude(1,this.center.lat),Ce=[U*xe.x,U*xe.y,we*(le?1:Se)],ce=this.cameraToCenterDistance/u.tileSize*(u.roundZoom?1:.502),ye=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?m:0,Pe=u.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,De=u.isTerrainDEM?-Pe:this._elevation?this._elevation.getMinElevationBelowMSL():0,Ue=this.projection.isReprojectedInTileSpace?bg(this):1,je=ft=>{const $t=new s.MercatorCoordinate(ft.x+25e-6,ft.y,ft.z),Ft=new s.MercatorCoordinate(ft.x,ft.y+25e-6,ft.z),Kt=ft.toLngLat(),Dn=$t.toLngLat(),Gn=Ft.toLngLat(),Sn=this.locationCoordinate(Kt),Rn=this.locationCoordinate(Dn),pi=this.locationCoordinate(Gn),mi=Math.hypot(Rn.x-Sn.x,Rn.y-Sn.y),In=Math.hypot(pi.x-Sn.x,pi.y-Sn.y);return Math.sqrt(mi*In)*Ue/25e-6},Ge=ft=>{const St=Pe,$t=De;return{aabb:s.tileAABB(this,U,0,0,0,ft,$t,St,this.projection),zoom:0,x:0,y:0,minZ:$t,maxZ:St,wrap:ft,fullyVisible:!1}},ct=[];let at=[];const gt=m,Wt=u.reparseOverscaled?y:m,ht=ft=>ft*ft,Lt=ht((we-this._centerAltitude)*Se),bt=ft=>{if(!this._elevation||!ft.tileID||!C)return;const St=this._elevation.getMinMaxForTile(ft.tileID),$t=ft.aabb;St?($t.min[2]=St.min,$t.max[2]=St.max,$t.center[2]=($t.min[2]+$t.max[2])/2):(ft.shouldSplit=Gt(ft),ft.shouldSplit||($t.min[2]=$t.max[2]=$t.center[2]=this._centerAltitude))},Gt=ft=>{if(ft.zoom<ye)return!0;if(ft.zoom===gt)return!1;if(ft.shouldSplit!=null)return ft.shouldSplit;const St=ft.aabb.distanceX(Ce),$t=ft.aabb.distanceY(Ce);let Ft=Lt,Kt=1;if(K){Ft=ht(ft.aabb.distanceZ(Ce));const Sn=Math.pow(2,ft.zoom),Rn=s.latFromMercatorY((ft.y+1)/Sn),pi=s.latFromMercatorY(ft.y/Sn),mi=Math.min(Math.max(O,Rn),pi),In=s.circumferenceAtLatitude(mi)/s.circumferenceAtLatitude(O);if(Kt=mi===O?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,In/this._mercatorScaleRatio),this.zoom<=s.GLOBE_ZOOM_THRESHOLD_MIN&&ft.zoom===gt-1&&In>=.9)return!0}else if(S&&(Ft=ht(ft.aabb.distanceZ(Ce)*Se)),this.projection.isReprojectedInTileSpace&&y<=5){const Sn=Math.pow(2,ft.zoom),Rn=je(new s.MercatorCoordinate((ft.x+.5)/Sn,(ft.y+.5)/Sn));Kt=Rn>.85?1:Rn}const Dn=St*St+$t*$t+Ft,Gn=ht((1<<gt-ft.zoom)*ce*Kt*((Sn,Rn)=>{if(Rn*ht(.707)<Sn)return 1;const pi=Math.sqrt(Rn/Sn);return pi/(1.4144271570014144+(Math.pow(1.1,pi-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(Ft,Lt),Dn));return Dn<Gn};if(this.renderWorldCopies)for(let ft=1;ft<=3;ft++)ct.push(Ge(-ft)),ct.push(Ge(ft));for(ct.push(Ge(0));ct.length>0;){const ft=ct.pop(),St=ft.x,$t=ft.y;let Ft=ft.fullyVisible;if(!Ft){const Kt=ft.aabb.intersects(me);if(Kt===0)continue;Ft=Kt===2}if(ft.zoom!==gt&&Gt(ft))for(let Kt=0;Kt<4;Kt++){const Dn=(St<<1)+Kt%2,Gn=($t<<1)+(Kt>>1),Sn={aabb:C?ft.aabb.quadrant(Kt):s.tileAABB(this,U,ft.zoom+1,Dn,Gn,ft.wrap,ft.minZ,ft.maxZ,this.projection),zoom:ft.zoom+1,x:Dn,y:Gn,wrap:ft.wrap,fullyVisible:Ft,tileID:void 0,shouldSplit:void 0,minZ:ft.minZ,maxZ:ft.maxZ};S&&!K&&(Sn.tileID=new s.OverscaledTileID(ft.zoom+1===gt?Wt:ft.zoom+1,ft.wrap,ft.zoom+1,Dn,Gn),bt(Sn)),ct.push(Sn)}else{const Kt=ft.zoom===gt?Wt:ft.zoom;if(u.minzoom&&u.minzoom>Kt)continue;const Dn=q[0]-(.5+St+(ft.wrap<<ft.zoom))*(1<<m-ft.zoom),Gn=q[1]-.5-$t,Sn=ft.tileID?ft.tileID:new s.OverscaledTileID(Kt,ft.wrap,ft.zoom,St,$t);at.push({tileID:Sn,distanceSq:Dn*Dn+Gn*Gn})}}if(this.fogCullDistSq){const ft=this.fogCullDistSq,St=this.horizonLineFromTop();at=at.filter(($t=>{const Ft=[0,0,0,1],Kt=[s.EXTENT,s.EXTENT,0,1],Dn=this.calculateFogTileMatrix($t.tileID.toUnwrapped());s.transformMat4$1(Ft,Ft,Dn),s.transformMat4$1(Kt,Kt,Dn);const Gn=s.getAABBPointSquareDist(Ft,Kt);if(Gn===0)return!0;let Sn=!1;const Rn=this._elevation;if(Rn&&Gn>ft&&St!==0){const pi=this.calculateProjMatrix($t.tileID.toUnwrapped());let mi;u.isTerrainDEM||(mi=Rn.getMinMaxForTile($t.tileID)),mi||(mi={min:De,max:Pe});const In=s.furthestTileCorner(this.rotation),Di=[In[0]*s.EXTENT,In[1]*s.EXTENT,mi.max];s.transformMat4(Di,Di,pi),Sn=(1-Di[1])*this.height*.5<St}return Gn<ft||Sn}))}return at.sort(((ft,St)=>ft.distanceSq-St.distanceSq)).map((ft=>ft.tileID))}resize(u,m){this.width=u,this.height=m,this.pixelsToGLUnits=[2/u,-2/m],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(u){return Math.pow(2,u)}scaleZoom(u){return Math.log(u)/Math.LN2}project(u){const m=s.clamp(u.lat,-s.MAX_MERCATOR_LATITUDE,s.MAX_MERCATOR_LATITUDE),y=this.projection.project(u.lng,m);return new s.Point(y.x*this.worldSize,y.y*this.worldSize)}unproject(u){return this.projection.unproject(u.x/this.worldSize,u.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/s.mercatorZfromAltitude(1,this.center.lat)/this.worldSize}setLocationAtPoint(u,m){let y,S;const C=this.centerPoint;if(this.projection.name==="globe"){const O=this.worldSize;y=(m.x-C.x)/O,S=(m.y-C.y)/O}else{const O=this.pointCoordinate(m),U=this.pointCoordinate(C);y=O.x-U.x,S=O.y-U.y}const L=this.locationCoordinate(u);this.setLocation(new s.MercatorCoordinate(L.x-y,L.y-S))}setLocation(u){this.center=this.coordinateLocation(u),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(u){return this.projection.locationPoint(this,u)}locationPoint3D(u){return this.projection.locationPoint(this,u,!0)}pointLocation(u){return this.coordinateLocation(this.pointCoordinate(u))}pointLocation3D(u){return this.coordinateLocation(this.pointCoordinate3D(u))}locationCoordinate(u,m){const y=m?s.mercatorZfromAltitude(m,u.lat):void 0,S=this.projection.project(u.lng,u.lat);return new s.MercatorCoordinate(S.x,S.y,y)}coordinateLocation(u){return this.projection.unproject(u.x,u.y)}pointRayIntersection(u,m){const y=m??this._centerAltitude,S=[u.x,u.y,0,1],C=[u.x,u.y,1,1];s.transformMat4$1(S,S,this.pixelMatrixInverse),s.transformMat4$1(C,C,this.pixelMatrixInverse);const L=C[3];s.scale$1(S,S,1/S[3]),s.scale$1(C,C,1/L);const O=S[2],U=C[2];return{p0:S,p1:C,t:O===U?0:(y-O)/(U-O)}}screenPointToMercatorRay(u){const m=[u.x,u.y,0,1],y=[u.x,u.y,1,1];return s.transformMat4$1(m,m,this.pixelMatrixInverse),s.transformMat4$1(y,y,this.pixelMatrixInverse),s.scale$1(m,m,1/m[3]),s.scale$1(y,y,1/y[3]),m[2]=s.mercatorZfromAltitude(m[2],this._center.lat)*this.worldSize,y[2]=s.mercatorZfromAltitude(y[2],this._center.lat)*this.worldSize,s.scale$1(m,m,1/this.worldSize),s.scale$1(y,y,1/this.worldSize),new s.Ray([m[0],m[1],m[2]],s.normalize([],s.sub([],y,m)))}rayIntersectionCoordinate(u){const{p0:m,p1:y,t:S}=u,C=s.mercatorZfromAltitude(m[2],this._center.lat),L=s.mercatorZfromAltitude(y[2],this._center.lat);return new s.MercatorCoordinate(s.number(m[0],y[0],S)/this.worldSize,s.number(m[1],y[1],S)/this.worldSize,s.number(C,L,S))}pointCoordinate(u,m=this._centerAltitude){return this.projection.pointCoordinate(this,u.x,u.y,m)}pointCoordinate3D(u){if(!this.elevation)return this.pointCoordinate(u);let m=this.projection.pointCoordinate3D(this,u.x,u.y);if(m)return new s.MercatorCoordinate(m[0],m[1],m[2]);let y=0,S=this.horizonLineFromTop();if(u.y>S)return this.pointCoordinate(u);const C=.02*S,L=u.clone();for(let O=0;O<10&&S-y>C;O++){L.y=s.number(y,S,.66);const U=this.projection.pointCoordinate3D(this,L.x,L.y);U?(S=L.y,m=U):y=L.y}return m?new s.MercatorCoordinate(m[0],m[1],m[2]):this.pointCoordinate(u)}isPointAboveHorizon(u){return this.projection.isPointAboveHorizon(this,u)}isPointOnSurface(u){if(u.y<0||u.y>this.height||u.x<0||u.x>this.width)return!1;if(this.elevation||this.zoom>=s.GLOBE_ZOOM_THRESHOLD_MAX)return!this.isPointAboveHorizon(u);const m=this.pointCoordinate(u);return m.y>=0&&m.y<=1}_coordinatePoint(u,m){const y=m&&this.elevation?this.elevation.getAtPointOrZero(u,this._centerAltitude):this._centerAltitude,S=[u.x*this.worldSize,u.y*this.worldSize,y+u.toAltitude(),1];return s.transformMat4$1(S,S,this.pixelMatrix),S[3]>0?new s.Point(S[0]/S[3],S[1]/S[3]):new s.Point(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:u,left:m}=this._edgeInsets,y=this.height-this._edgeInsets.bottom,S=this.width-this._edgeInsets.right,C=this.pointLocation3D(new s.Point(m,u)),L=this.pointLocation3D(new s.Point(S,u)),O=this.pointLocation3D(new s.Point(S,y)),U=this.pointLocation3D(new s.Point(m,y));let q=Math.min(C.lng,L.lng,O.lng,U.lng),K=Math.max(C.lng,L.lng,O.lng,U.lng),le=Math.min(C.lat,L.lat,O.lat,U.lat),me=Math.max(C.lat,L.lat,O.lat,U.lat);const xe=Math.pow(2,-this.zoom)/16*270,Se=this.projection.name==="globe"?1:4,we=(Ce,ce,ye,Pe,De)=>{const Ue=(Ce+ye)/2,je=(ce+Pe)/2,Ge=new s.Point(Ue,je),{lng:ct,lat:at}=this.pointLocation3D(Ge),gt=Math.max(0,q-ct,le-at,ct-K,at-me);q=Math.min(q,ct),K=Math.max(K,ct),le=Math.min(le,at),me=Math.max(me,at),(De<Se||gt>xe)&&(we(Ce,ce,Ue,je,De+1),we(Ue,je,ye,Pe,De+1))};if(we(m,u,S,u,1),we(S,u,S,y,1),we(S,y,m,y,1),we(m,y,m,u,1),this.projection.name==="globe"){const[Ce,ce]=s.polesInViewport(this);Ce?(me=90,K=180,q=-180):ce&&(le=-90,K=180,q=-180)}return new s.LngLatBounds(new s.LngLat(q,le),new s.LngLat(K,me))}_getBoundsRectangular(u,m){const{top:y,left:S}=this._edgeInsets,C=this.height-this._edgeInsets.bottom,L=this.width-this._edgeInsets.right,O=new s.Point(S,y),U=new s.Point(L,y),q=new s.Point(L,C),K=new s.Point(S,C);let le=this.pointCoordinate(O,u),me=this.pointCoordinate(U,u);const xe=this.pointCoordinate(q,m),Se=this.pointCoordinate(K,m),we=(Ce,ce)=>(ce.y-Ce.y)/(ce.x-Ce.x);return le.y>1&&me.y>=0?le=new s.MercatorCoordinate((1-Se.y)/we(Se,le)+Se.x,1):le.y<0&&me.y<=1&&(le=new s.MercatorCoordinate(-Se.y/we(Se,le)+Se.x,0)),me.y>1&&le.y>=0?me=new s.MercatorCoordinate((1-xe.y)/we(xe,me)+xe.x,1):me.y<0&&le.y<=1&&(me=new s.MercatorCoordinate(-xe.y/we(xe,me)+xe.x,0)),new s.LngLatBounds().extend(this.coordinateLocation(le)).extend(this.coordinateLocation(me)).extend(this.coordinateLocation(Se)).extend(this.coordinateLocation(xe))}_getBoundsRectangularTerrain(){const u=this.elevation;if(!u.visibleDemTiles.length||u.isUsingMockSource())return this._getBoundsRectangular(0,0);const m=u.visibleDemTiles.reduce(((y,S)=>{if(S.dem){const C=S.dem.tree;y.min=Math.min(y.min,C.minimums[0]),y.max=Math.max(y.max,C.maximums[0])}return y}),{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(m.min*u.exaggeration(),m.max*u.exaggeration())}getBounds(){return this.projection.name==="mercator"||this.projection.name==="equirectangular"?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(u=!0){const m=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,y=this.height/2-m*(1-this._horizonShift);return u?Math.max(0,y):y}getMaxBounds(){return this.maxBounds}setMaxBounds(u){this.maxBounds=u,this.minLat=-s.MAX_MERCATOR_LATITUDE,this.maxLat=s.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,u&&(this.minLat=u.getSouth(),this.maxLat=u.getNorth(),this.minLng=u.getWest(),this.maxLng=u.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=s.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=s.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=s.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=s.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(u,m){return this.projection.createTileMatrix(this,m,u)}calculateDistanceTileData(u){const m=u.key,y=this._distanceTileDataCache;if(y[m])return y[m];const S=u.canonical,C=1/this.height,L=this.cameraWorldSize,O=L/this.zoomScale(S.z),U=(S.x+Math.pow(2,S.z)*u.wrap)*O,q=S.y*O,K=this.point;K.x*=L/this.worldSize,K.y*=L/this.worldSize;const le=this.angle,me=Math.sin(-le),xe=-Math.cos(-le);return y[m]={bearing:[me,xe],center:[(K.x-U)*C,(K.y-q)*C],scale:O/s.EXTENT*C},y[m]}calculateFogTileMatrix(u){const m=u.key,y=this._fogTileMatrixCache;if(y[m])return y[m];const S=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,u);return s.multiply(S,this.worldToFogMatrix,S),y[m]=new Float32Array(S),y[m]}calculateProjMatrix(u,m=!1){const y=u.key,S=m?this._alignedProjMatrixCache:this._projMatrixCache;if(S[y])return S[y];const C=this.calculatePosMatrix(u,this.worldSize);return s.multiply(C,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:m?this.alignedProjMatrix:this.projMatrix,C),S[y]=new Float32Array(C),S[y]}calculatePixelsToTileUnitsMatrix(u){const m=u.tileID.key,y=this._pixelsToTileUnitsCache;if(y[m])return y[m];const S=(function(C,L){const{scale:O}=C.tileTransform,U=O*s.EXTENT/(C.tileSize*Math.pow(2,L.zoom-C.tileID.overscaledZ+C.tileID.canonical.z));return q=new Float32Array(4),me=(K=L.inverseAdjustmentMatrix)[1],xe=K[2],Se=K[3],Ce=(le=[U,U])[1],q[0]=K[0]*(we=le[0]),q[1]=me*we,q[2]=xe*Ce,q[3]=Se*Ce,q;var q,K,le,me,xe,Se,we,Ce})(u,this);return y[m]=S,y[m]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if(this.projection.name==="globe"){const u=1/this.worldSize,m=s.fromScaling([],[u,u,u]);return s.multiply(m,m,this.globeMatrix),m}}recenterOnTerrain(){if(!this._elevation||this.projection.name==="globe")return;const u=this._elevation;this._updateCameraState();const m=s.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,y=this._computeCameraPosition(m),S=this._camera.forward(),C=s.mercatorZfromAltitude(1,this._center.lat);y[2]/=C,S[2]/=C,s.normalize(S,S);const L=u.raycast(y,S,u.exaggeration());if(L){const O=s.scaleAndAdd([],y,S,L),U=new s.MercatorCoordinate(O[0],O[1],s.mercatorZfromAltitude(O[2],s.latFromMercatorY(O[1]))),q=(U.z+s.length([U.x-y[0],U.y-y[1],U.z-y[2]*C]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(q),this._centerAltitude=U.toAltitude(),this._center=this.coordinateLocation(U),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(u=!1){if(!this._elevation)return;const m=this._elevation,y=s.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,S=this._computeCameraPosition(y),C=m.getAtPointOrZero(new s.MercatorCoordinate(...S)),L=this.pixelsPerMeter/this.worldSize*C,O=this._minimumHeightOverTerrain(),U=S[2]-L;if(U<=O)if(U<0||u){const q=this.locationCoordinate(this._center,this._centerAltitude),K=[S[0],S[1],q.z-S[2]],le=s.length(K);K[2]-=(O-U)/this._pixelsPerMercatorPixel;const me=s.length(K);if(me===0)return;s.scale$2(K,K,le/me*this._pixelsPerMercatorPixel),this._camera.position=[S[0],S[1],q.z*this._pixelsPerMercatorPixel-K[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const u=this.projection.name==="globe"||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||u){const me=this.center;return me.lat=s.clamp(me.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!u)&&(me.lng=s.clamp(me.lng,this.minLng,this.maxLng)),this.center=me,void(this._constraining=!1)}const m=this._unmodified,{x:y,y:S}=this.point;let C=0,L=y,O=S;const U=this.width/2,q=this.height/2,K=this.worldMinY*this.scale,le=this.worldMaxY*this.scale;if(S-q<K&&(O=K+q),S+q>le&&(O=le-q),le-K<this.height&&(C=Math.max(C,this.height/(le-K)),O=(le+K)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const me=this.worldMinX*this.scale,xe=this.worldMaxX*this.scale,Se=this.worldSize/2-(me+xe)/2;L=(y+Se+this.worldSize)%this.worldSize-Se,L-U<me&&(L=me+U),L+U>xe&&(L=xe-U),xe-me<this.width&&(C=Math.max(C,this.width/(xe-me)),L=(xe+me)/2)}L===y&&O===S||(this.center=this.unproject(new s.Point(L,O))),C&&(this.zoom+=this.scaleZoom(C)),this._constrainCamera(),this._unmodified=m,this._constraining=!1}_minZoomForBounds(){let u=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(u=Math.max(u,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),u}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const u=this.centerOffset,m=this.pixelsPerMeter;this.projection.name==="globe"&&(this._mercatorScaleRatio=s.mercatorZfromAltitude(1,this.center.lat)/s.mercatorZfromAltitude(1,s.GLOBE_SCALE_MATCH_LATITUDE));const y=qh(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,y),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const S=this.projection.zAxisUnit==="meters"?m:1,C=this._camera.getWorldToCamera(this.worldSize,S),L=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);L[8]=2*-u.x/this.width,L[9]=2*u.y/this.height;let O=s.mul([],L,C);if(this.projection.isReprojectedInTileSpace){const je=this.locationCoordinate(this.center),Ge=s.identity([]);s.translate(Ge,Ge,[je.x*this.worldSize,je.y*this.worldSize,0]),s.multiply(Ge,Ge,ku(this)),s.translate(Ge,Ge,[-je.x*this.worldSize,-je.y*this.worldSize,0]),s.multiply(O,O,Ge),this.inverseAdjustmentMatrix=(function(ct){const at=ku(ct,!0);return X([],[at[0],at[1],at[4],at[5]])})(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=s.scale([],O,[this.worldSize,this.worldSize,this.worldSize/S,1]),this.projMatrix=O,this.invProjMatrix=s.invert(new Float64Array(16),this.projMatrix);const U=s.invert([],L);this.frustumCorners=s.FrustumCorners.fromInvProjectionMatrix(U,this.horizonLineFromTop(),this.height);const q=new Float32Array(16);s.identity(q),s.scale(q,q,[1,-1,1]),s.rotateX(q,q,this._pitch),s.rotateZ(q,q,this.angle);const K=s.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),le=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;K[8]=2*-u.x/this.width,K[9]=2*(u.y+le)/this.height,this.skyboxMatrix=s.multiply(q,K,q);const me=this.point,xe=me.x,Se=me.y,we=this.width%2/2,Ce=this.height%2/2,ce=Math.cos(this.angle),ye=Math.sin(this.angle),Pe=xe-Math.round(xe)+ce*we+ye*Ce,De=Se-Math.round(Se)+ce*Ce+ye*we,Ue=new Float64Array(O);if(s.translate(Ue,Ue,[Pe>.5?Pe-1:Pe,De>.5?De-1:De,0]),this.alignedProjMatrix=Ue,O=s.create(),s.scale(O,O,[this.width/2,-this.height/2,1]),s.translate(O,O,[1,-1,0]),this.labelPlaneMatrix=O,O=s.create(),s.scale(O,O,[1,-1,1]),s.translate(O,O,[-1,-1,0]),s.scale(O,O,[2/this.width,2/this.height,1]),this.glCoordMatrix=O,this.pixelMatrix=s.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},O=s.invert(new Float64Array(16),this.pixelMatrix),!O)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=O,this.projection.name==="globe"||this.mercatorFromTransition){this.globeMatrix=s.calculateGlobeMatrix(this);const je=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=s.transformMat4(je,je,C),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=O;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const u=this.cameraWorldSizeForFog,m=this.cameraPixelsPerMeter,y=this._camera.position,S=1/this.height/this._pixelsPerMercatorPixel,C=[u,u,m];s.scale$2(C,C,S),s.scale$2(y,y,-1),s.multiply$2(y,y,C);const L=s.create();s.translate(L,L,y),s.scale(L,L,C),this.mercatorFogMatrix=L,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(u,m,S)}_computeCameraPosition(u){const m=(u=u||this.pixelsPerMeter)/this.pixelsPerMeter,y=this._camera.forward(),S=this.point,C=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*m-u/this.worldSize*this._centerAltitude;return[S.x/this.worldSize-y[0]*C,S.y/this.worldSize-y[1]*C,u/this.worldSize*this._centerAltitude-y[2]*C]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(u){const m=this._maxCameraBoundsDistance()*Math.cos(this._pitch),y=this._camera.position[2],S=u[2];let C=1;this.projection.wrap&&(this.center=this.center.wrap()),S>0&&(C=Math.min((m-y)/S,1)),this._camera.position=s.scaleAndAdd([],this._camera.position,u,C),this._updateStateFromCamera()}_updateStateFromCamera(){const u=this._camera.position,m=this._camera.forward(),{pitch:y,bearing:S}=this._camera.getPitchBearing(),C=s.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,L=this._mercatorZfromZoom(this._maxZoom)*Math.cos(s.degToRad(this._maxPitch)),O=Math.max((u[2]-C)/Math.cos(y),L),U=this._zoomFromMercatorZ(O);s.scaleAndAdd(u,u,m,O),this._pitch=s.clamp(y,s.degToRad(this.minPitch),s.degToRad(this.maxPitch)),this.angle=s.wrap(S,-Math.PI,Math.PI),this._setZoom(s.clamp(U,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new s.MercatorCoordinate(u[0],u[1],u[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(u){return Math.pow(2,u)*this.tileSize}_mercatorZfromZoom(u){return this.cameraToCenterDistance/this._worldSizeFromZoom(u)}_minimumHeightOverTerrain(){const u=Math.min((this._seaLevelZoom!=null?this._seaLevelZoom:this._zoom)+4,this._maxZoom);return this._mercatorZfromZoom(u)}_zoomFromMercatorZ(u){return this.scaleZoom(this.cameraToCenterDistance/(u*this.tileSize))}zoomFromMercatorZAdjusted(u){let m=0,y=s.GLOBE_ZOOM_THRESHOLD_MAX,S=0,C=1/0;for(;y-m>1e-6&&y>m;){const L=m+.5*(y-m),O=this.tileSize*Math.pow(2,L),U=this.getCameraToCenterDistance(this.projection,L,O),q=this.scaleZoom(U/(u*this.tileSize)),K=Math.abs(L-q);K<C&&(C=K,S=L),L<q?m=L:y=L}return S}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(s.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(u,m){const y=Math.min(u.x,m.x),S=Math.max(u.x,m.x),C=Math.min(u.y,m.y),L=Math.max(u.y,m.y);if(C<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;const O=[new s.Point(y,C),new s.Point(S,L),new s.Point(y,L),new s.Point(S,C)],U=this.renderWorldCopies?-3:0,q=this.renderWorldCopies?4:1;for(const K of O){const le=this.pointRayIntersection(K);if(le.t<0)return!0;const me=this.rayIntersectionCoordinate(le);if(me.x<U||me.y<0||me.x>q||me.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+s.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new s.Point(0,0),new s.Point(this.width,this.height))}zoomDeltaToMovement(u,m){const y=s.length(s.sub([],this._camera.position,u)),S=this._zoomFromMercatorZ(y)+m;return y-this._mercatorZfromZoom(S)}getCameraPoint(){if(this.projection.name==="globe"){const u=(function([m,y,S],C){const L=[m,y,S,1];s.transformMat4$1(L,L,C);const O=L[3]=Math.max(L[3],1e-6);return L[0]/=O,L[1]/=O,L[2]/=O,L})([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new s.Point(u[0],u[1])}{const u=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new s.Point(0,u))}}getCameraToCenterDistance(u,m=this.zoom,y=this.worldSize){const S=qh(u,m,this.width,this.height,1024),C=u.pixelSpaceConversion(this.center.lat,y,S);return .5/Math.tan(.5*this._fov)*this.height*C}getWorldToCameraMatrix(){const u=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?this.pixelsPerMeter:1);return this.projection.name==="globe"&&s.multiply(u,u,this.globeMatrix),u}}function Au(v,u){let m=!1,y=null;const S=()=>{y=null,m&&(v(),y=setTimeout(S,u),m=!1)};return()=>(m=!0,y||S(),y)}class Id{constructor(u){this._hashName=u&&encodeURIComponent(u),s.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=Au(this._updateHashUnthrottled.bind(this),300)}addTo(u){return this._map=u,s.window.addEventListener("hashchange",this._onHashChange,!1),u.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),s.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const u=this._map;if(!u)return"";const m=yc(u);if(this._hashName){const y=this._hashName;let S=!1;const C=s.window.location.hash.slice(1).split("&").map((L=>{const O=L.split("=")[0];return O===y?(S=!0,`${O}=${m}`):L})).filter((L=>L));return S||C.push(`${y}=${m}`),`#${C.join("&")}`}return`#${m}`}_getCurrentHash(){const u=s.window.location.hash.replace("#","");if(this._hashName){let m;return u.split("&").map((y=>y.split("="))).forEach((y=>{y[0]===this._hashName&&(m=y)})),(m&&m[1]||"").split("/")}return u.split("/")}_onHashChange(){const u=this._map;if(!u)return!1;const m=this._getCurrentHash();if(m.length>=3&&!m.some((y=>isNaN(y)))){const y=u.dragRotate.isEnabled()&&u.touchZoomRotate.isEnabled()?+(m[3]||0):u.getBearing();return u.jumpTo({center:[+m[2],+m[1]],zoom:+m[0],bearing:y,pitch:+(m[4]||0)}),!0}return!1}_updateHashUnthrottled(){const u=s.window.location.href.replace(/(#.+)?$/,this.getHashString());s.window.history.replaceState(s.window.history.state,null,u)}}function yc(v,u){const m=v.getCenter(),y=Math.round(100*v.getZoom())/100,S=Math.ceil((y*Math.LN2+Math.log(512/360/.5))/Math.LN10),C=Math.pow(10,S),L=Math.round(m.lng*C)/C,O=Math.round(m.lat*C)/C,U=v.getBearing(),q=v.getPitch();let K=u?`/${L}/${O}/${y}`:`${y}/${O}/${L}`;return(U||q)&&(K+="/"+Math.round(10*U)/10),q&&(K+=`/${Math.round(q)}`),K}const Ad={linearity:.3,easing:s.bezier(0,0,.3,1)},Pd=s.extend({deceleration:2500,maxSpeed:1400},Ad),Md=s.extend({deceleration:20,maxSpeed:1400},Ad),gn=s.extend({deceleration:1e3,maxSpeed:360},Ad),Jo=s.extend({deceleration:1e3,maxSpeed:90},Ad);class Xh{constructor(u){this._map=u,this.clear()}clear(){this._inertiaBuffer=[]}record(u){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:s.exported.now(),settings:u})}_drainInertiaBuffer(){const u=this._inertiaBuffer,m=s.exported.now();for(;u.length>0&&m-u[0].time>160;)u.shift()}_onMoveEnd(u){if(this._map._prefersReducedMotion()||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;const m={zoom:0,bearing:0,pitch:0,pan:new s.Point(0,0),pinchAround:void 0,around:void 0};for(const{settings:C}of this._inertiaBuffer)m.zoom+=C.zoomDelta||0,m.bearing+=C.bearingDelta||0,m.pitch+=C.pitchDelta||0,C.panDelta&&m.pan._add(C.panDelta),C.around&&(m.around=C.around),C.pinchAround&&(m.pinchAround=C.pinchAround);const y=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,S={};if(m.pan.mag()){const C=Ld(m.pan.mag(),y,s.extend({},Pd,u||{}));S.offset=m.pan.mult(C.amount/m.pan.mag()),S.center=this._map.transform.center,Dd(S,C)}if(m.zoom){const C=Ld(m.zoom,y,Md);S.zoom=this._map.transform.zoom+C.amount,Dd(S,C)}if(m.bearing){const C=Ld(m.bearing,y,gn);S.bearing=this._map.transform.bearing+s.clamp(C.amount,-179,179),Dd(S,C)}if(m.pitch){const C=Ld(m.pitch,y,Jo);S.pitch=this._map.transform.pitch+C.amount,Dd(S,C)}if(S.zoom||S.bearing){const C=m.pinchAround===void 0?m.around:m.pinchAround;S.around=C?this._map.unproject(C):this._map.getCenter()}return this.clear(),S.noMoveStart=!0,S}}function Dd(v,u){(!v.duration||v.duration<u.duration)&&(v.duration=u.duration,v.easing=u.easing)}function Ld(v,u,m){const{maxSpeed:y,linearity:S,deceleration:C}=m,L=s.clamp(v*S/(u/1e3),-y,y),O=Math.abs(L)/(C*S);return{easing:m.easing,duration:1e3*O,amount:L*(O/2)}}class Cs extends s.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(u,m,y,S={}){const C=ie(m.getCanvasContainer(),y),L=m.unproject(C);super(u,s.extend({point:C,lngLat:L,originalEvent:y},S)),this._defaultPrevented=!1,this.target=m}}class Qa extends s.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(u,m,y){const S=u==="touchend"?y.changedTouches:y.touches,C=J(m.getCanvasContainer(),S),L=C.map((U=>m.unproject(U))),O=C.reduce(((U,q,K,le)=>U.add(q.div(le.length))),new s.Point(0,0));super(u,{points:C,point:O,lngLats:L,lngLat:m.unproject(O),originalEvent:y}),this._defaultPrevented=!1}}class Yh extends s.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(u,m,y){super(u,{originalEvent:y}),this._defaultPrevented=!1}}class Dm{constructor(u,m){this._map=u,this._clickTolerance=m.clickTolerance}reset(){this._mousedownPos=void 0}wheel(u){return this._firePreventable(new Yh(u.type,this._map,u))}mousedown(u,m){return this._mousedownPos=m,this._firePreventable(new Cs(u.type,this._map,u))}mouseup(u){this._map.fire(new Cs(u.type,this._map,u))}preclick(u){const m=s.extend({},u);m.type="preclick",this._map.fire(new Cs(m.type,this._map,m))}click(u,m){this._mousedownPos&&this._mousedownPos.dist(m)>=this._clickTolerance||(this.preclick(u),this._map.fire(new Cs(u.type,this._map,u)))}dblclick(u){return this._firePreventable(new Cs(u.type,this._map,u))}mouseover(u){this._map.fire(new Cs(u.type,this._map,u))}mouseout(u){this._map.fire(new Cs(u.type,this._map,u))}touchstart(u){return this._firePreventable(new Qa(u.type,this._map,u))}touchmove(u){this._map.fire(new Qa(u.type,this._map,u))}touchend(u){this._map.fire(new Qa(u.type,this._map,u))}touchcancel(u){this._map.fire(new Qa(u.type,this._map,u))}_firePreventable(u){if(this._map.fire(u),u.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Zh{constructor(u){this._map=u}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(u){this._map.fire(new Cs(u.type,this._map,u))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Cs("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(u){this._delayContextMenu?this._contextMenuEvent=u:this._map.fire(new Cs(u.type,this._map,u)),this._map.listens("contextmenu")&&u.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class wg{constructor(u,m){this._map=u,this._el=u.getCanvasContainer(),this._container=u.getContainer(),this._clickTolerance=m.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(u,m){this.isEnabled()&&u.shiftKey&&u.button===0&&(B(),this._startPos=this._lastPos=m,this._active=!0)}mousemoveWindow(u,m){if(!this._active)return;const y=m,S=this._startPos,C=this._lastPos;if(!S||!C||C.equals(y)||!this._box&&y.dist(S)<this._clickTolerance)return;this._lastPos=y,this._box||(this._box=k("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",u));const L=Math.min(S.x,y.x),O=Math.max(S.x,y.x),U=Math.min(S.y,y.y),q=Math.max(S.y,y.y);this._map._requestDomTask((()=>{this._box&&(this._box.style.transform=`translate(${L}px,${U}px)`,this._box.style.width=O-L+"px",this._box.style.height=q-U+"px")}))}mouseupWindow(u,m){if(!this._active)return;const y=this._startPos,S=m;if(y&&u.button===0){if(this.reset(),ee(),y.x!==S.x||y.y!==S.y)return this._map.fire(new s.Event("boxzoomend",{originalEvent:u})),{cameraAnimation:C=>C.fitScreenCoordinates(y,S,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",u)}}keydown(u){this._active&&u.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",u))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),H(),delete this._startPos,delete this._lastPos}_fireEvent(u,m){return this._map.fire(new s.Event(u,{originalEvent:m}))}}function Yc(v,u){const m={};for(let y=0;y<v.length;y++)m[v[y].identifier]=u[y];return m}class bc{constructor(u){this.reset(),this.numTouches=u.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(u,m,y){(this.centroid||y.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===0&&(this.startTime=u.timeStamp),y.length===this.numTouches&&(this.centroid=(function(S){const C=new s.Point(0,0);for(const L of S)C._add(L);return C.div(S.length)})(m),this.touches=Yc(y,m)))}touchmove(u,m,y){if(this.aborted||!this.centroid)return;const S=Yc(y,m);for(const C in this.touches){const L=S[C];(!L||L.dist(this.touches[C])>30)&&(this.aborted=!0)}}touchend(u,m,y){if((!this.centroid||u.timeStamp-this.startTime>500)&&(this.aborted=!0),y.length===0){const S=!this.aborted&&this.centroid;if(this.reset(),S)return S}}}class Lm{constructor(u){this.singleTap=new bc(u),this.numTaps=u.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(u,m,y){this.singleTap.touchstart(u,m,y)}touchmove(u,m,y){this.singleTap.touchmove(u,m,y)}touchend(u,m,y){const S=this.singleTap.touchend(u,m,y);if(S){const C=u.timeStamp-this.lastTime<500,L=!this.lastTap||this.lastTap.dist(S)<30;if(C&&L||this.reset(),this.count++,this.lastTime=u.timeStamp,this.lastTap=S,this.count===this.numTaps)return this.reset(),S}}}class Tg{constructor(){this._zoomIn=new Lm({numTouches:1,numTaps:2}),this._zoomOut=new Lm({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(u,m,y){this._zoomIn.touchstart(u,m,y),this._zoomOut.touchstart(u,m,y)}touchmove(u,m,y){this._zoomIn.touchmove(u,m,y),this._zoomOut.touchmove(u,m,y)}touchend(u,m,y){const S=this._zoomIn.touchend(u,m,y),C=this._zoomOut.touchend(u,m,y);return S?(this._active=!0,u.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:L=>L.easeTo({duration:300,zoom:L.getZoom()+1,around:L.unproject(S)},{originalEvent:u})}):C?(this._active=!0,u.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:L=>L.easeTo({duration:300,zoom:L.getZoom()-1,around:L.unproject(C)},{originalEvent:u})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const Sg={0:1,2:2};class el{constructor(u){this.reset(),this._clickTolerance=u.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(u,m){return!1}_move(u,m){return{}}mousedown(u,m){if(this._lastPoint)return;const y=$(u);this._correctButton(u,y)&&(this._lastPoint=m,this._eventButton=y)}mousemoveWindow(u,m){const y=this._lastPoint;if(y){if(u.preventDefault(),this._eventButton!=null&&(function(S,C){const L=Sg[C];return S.buttons===void 0||(S.buttons&L)!==L})(u,this._eventButton))this.reset();else if(this._moved||!(m.dist(y)<this._clickTolerance))return this._moved=!0,this._lastPoint=m,this._move(y,m)}}mouseupWindow(u){this._lastPoint&&$(u)===this._eventButton&&(this._moved&&ee(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Rd extends el{mousedown(u,m){super.mousedown(u,m),this._lastPoint&&(this._active=!0)}_correctButton(u,m){return m===0&&!u.ctrlKey}_move(u,m){return{around:m,panDelta:m.sub(u)}}}class Jh extends el{_correctButton(u,m){return m===0&&u.ctrlKey||m===2}_move(u,m){const y=.8*(m.x-u.x);if(y)return this._active=!0,{bearingDelta:y}}contextmenu(u){u.preventDefault()}}class Rm extends el{_correctButton(u,m){return m===0&&u.ctrlKey||m===2}_move(u,m){const y=-.5*(m.y-u.y);if(y)return this._active=!0,{pitchDelta:y}}contextmenu(u){u.preventDefault()}}class Qh{constructor(u,m){this._map=u,this._el=u.getCanvasContainer(),this._minTouches=1,this._clickTolerance=m.clickTolerance||1,this.reset(),s.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new s.Point(0,0)}touchstart(u,m,y){return this._calculateTransform(u,m,y)}touchmove(u,m,y){if(this._active&&!(y.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(y.length===1&&!s.isFullscreen())return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return u.cancelable&&u.preventDefault(),this._calculateTransform(u,m,y)}}touchend(u,m,y){this._calculateTransform(u,m,y),this._active&&y.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(u,m,y){y.length>0&&(this._active=!0);const S=Yc(y,m),C=new s.Point(0,0),L=new s.Point(0,0);let O=0;for(const q in S){const K=S[q],le=this._touches[q];le&&(C._add(K),L._add(K.sub(le)),O++,S[q]=K)}if(this._touches=S,O<this._minTouches||!L.mag())return;const U=L.div(O);return this._sum._add(U),this._sum.mag()<this._clickTolerance?void 0:{around:C.div(O),panDelta:U}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=k("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout((()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","null")}),500)}}class Od{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(u){}_move(u,m,y){return{}}touchstart(u,m,y){this._firstTwoTouches||y.length<2||(this._firstTwoTouches=[y[0].identifier,y[1].identifier],this._start([m[0],m[1]]))}touchmove(u,m,y){const S=this._firstTwoTouches;if(!S)return;u.preventDefault();const[C,L]=S,O=Wl(y,m,C),U=Wl(y,m,L);if(!O||!U)return;const q=this._aroundCenter?null:O.add(U).div(2);return this._move([O,U],q,u)}touchend(u,m,y){if(!this._firstTwoTouches)return;const[S,C]=this._firstTwoTouches,L=Wl(y,m,S),O=Wl(y,m,C);L&&O||(this._active&&ee(),this.reset())}touchcancel(){this.reset()}enable(u){this._enabled=!0,this._aroundCenter=!!u&&u.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Wl(v,u,m){for(let y=0;y<v.length;y++)if(v[y].identifier===m)return u[y]}function Hl(v,u){return Math.log(v/u)/Math.LN2}class Eg extends Od{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(u){this._startDistance=this._distance=u[0].dist(u[1])}_move(u,m){const y=this._distance;if(this._distance=u[0].dist(u[1]),this._active||!(Math.abs(Hl(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Hl(this._distance,y),pinchAround:m}}}function Om(v,u){return 180*v.angleWith(u)/Math.PI}class Cg extends Od{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(u){this._startVector=this._vector=u[0].sub(u[1]),this._minDiameter=u[0].dist(u[1])}_move(u,m){const y=this._vector;if(this._vector=u[0].sub(u[1]),y&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:Om(this._vector,y),pinchAround:m}}_isBelowThreshold(u){this._minDiameter=Math.min(this._minDiameter,u.mag());const m=25/(Math.PI*this._minDiameter)*360,y=this._startVector;if(!y)return!1;const S=Om(u,y);return Math.abs(S)<m}}function xc(v){return Math.abs(v.y)>Math.abs(v.x)}class kg extends Od{constructor(u){super(),this._map=u}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(u){this._lastPoints=u,xc(u[0].sub(u[1]))&&(this._valid=!1)}_move(u,m,y){const S=this._lastPoints;if(!S)return;const C=u[0].sub(S[0]),L=u[1].sub(S[1]);return this._map._cooperativeGestures&&!s.isFullscreen()&&y.touches.length<3||(this._valid=this.gestureBeginsVertically(C,L,y.timeStamp),!this._valid)?void 0:(this._lastPoints=u,this._active=!0,{pitchDelta:(C.y+L.y)/2*-.5})}gestureBeginsVertically(u,m,y){if(this._valid!==void 0)return this._valid;const S=u.mag()>=2,C=m.mag()>=2;if(!S&&!C)return;if(!S||!C)return this._firstMove==null&&(this._firstMove=y),y-this._firstMove<100&&void 0;const L=u.y>0==m.y>0;return xc(u)&&xc(m)&&L}}const Ig={panStep:100,bearingStep:15,pitchStep:10};class z_{constructor(){const u=Ig;this._panStep=u.panStep,this._bearingStep=u.bearingStep,this._pitchStep=u.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(u){if(u.altKey||u.ctrlKey||u.metaKey)return;let m=0,y=0,S=0,C=0,L=0;switch(u.keyCode){case 61:case 107:case 171:case 187:m=1;break;case 189:case 109:case 173:m=-1;break;case 37:u.shiftKey?y=-1:(u.preventDefault(),C=-1);break;case 39:u.shiftKey?y=1:(u.preventDefault(),C=1);break;case 38:u.shiftKey?S=1:(u.preventDefault(),L=-1);break;case 40:u.shiftKey?S=-1:(u.preventDefault(),L=1);break;default:return}return this._rotationDisabled&&(y=0,S=0),{cameraAnimation:O=>{const U=O.getZoom();O.easeTo({duration:300,easeId:"keyboardHandler",easing:Ag,zoom:m?Math.round(U)+m*(u.shiftKey?2:1):U,bearing:O.getBearing()+y*this._bearingStep,pitch:O.getPitch()+S*this._pitchStep,offset:[-C*this._panStep,-L*this._panStep],center:O.getCenter()},{originalEvent:u})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Ag(v){return v*(2-v)}const ef=4.000244140625;class Pg{constructor(u,m){this._map=u,this._el=u.getCanvasContainer(),this._handler=m,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,s.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(u){this._defaultZoomRate=u}setWheelZoomRate(u){this._wheelZoomRate=u}isEnabled(){return!!this._enabled}isActive(){return this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(u){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!u&&u.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(u){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(u.ctrlKey||u.metaKey||this.isZooming()||s.isFullscreen()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let m=u.deltaMode===s.window.WheelEvent.DOM_DELTA_LINE?40*u.deltaY:u.deltaY;const y=s.exported.now(),S=y-(this._lastWheelEventTime||0);this._lastWheelEventTime=y,m!==0&&m%ef==0?this._type="wheel":m!==0&&Math.abs(m)<4?this._type="trackpad":S>400?(this._type=null,this._lastValue=m,this._timeout=setTimeout(this._onTimeout,40,u)):this._type||(this._type=Math.abs(S*m)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,m+=this._lastValue)),u.shiftKey&&m&&(m/=4),this._type&&(this._lastWheelEvent=u,this._delta-=m,this._active||this._start(u)),u.preventDefault()}_onTimeout(u){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(u)}_start(u){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const m=ie(this._el,u);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:m,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const u=this._map.transform;this._type==="wheel"&&u.projection.wrap&&(u._center.lng>=180||u._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const m=()=>u._terrainEnabled()&&this._aroundCoord?u.computeZoomRelativeTo(this._aroundCoord):u.zoom;if(this._delta!==0){const U=this._type==="wheel"&&Math.abs(this._delta)>ef?this._wheelZoomRate:this._defaultZoomRate;let q=2/(1+Math.exp(-Math.abs(this._delta*U)));this._delta<0&&q!==0&&(q=1/q);const K=m(),le=Math.pow(2,K),me=typeof this._targetZoom=="number"?u.zoomScale(this._targetZoom):le;this._targetZoom=Math.min(u.maxZoom,Math.max(u.minZoom,u.scaleZoom(me*q))),this._type==="wheel"&&(this._startZoom=K,this._easing=this._smoothOutEasing(200)),this._delta=0}const y=typeof this._targetZoom=="number"?this._targetZoom:m(),S=this._startZoom,C=this._easing;let L,O=!1;if(this._type==="wheel"&&S&&C){const U=Math.min((s.exported.now()-this._lastWheelEventTime)/200,1),q=C(U);L=s.number(S,y,q),U<1?this._frameId||(this._frameId=!0):O=!0}else L=y,O=!0;return this._active=!0,O&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!O,zoomDelta:L-m(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(u){let m=s.ease;if(this._prevEase){const y=this._prevEase,S=(s.exported.now()-y.start)/y.duration,C=y.easing(S+.01)-y.easing(S),L=.27/Math.sqrt(C*C+1e-4)*.01,O=Math.sqrt(.0729-L*L);m=s.bezier(L,O,.25,1)}return this._prevEase={start:s.exported.now(),duration:u,easing:m},m}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=k("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(s.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout((()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","null")}),200)}}class Vm{constructor(u,m){this._clickZoom=u,this._tapZoom=m}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class ks{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(u,m){return u.preventDefault(),{cameraAnimation:y=>{y.easeTo({duration:300,zoom:y.getZoom()+(u.shiftKey?-1:1),around:y.unproject(m)},{originalEvent:u})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Mg{constructor(){this._tap=new Lm({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(u,m,y){this._swipePoint||(this._tapTime&&u.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?y.length>0&&(this._swipePoint=m[0],this._swipeTouch=y[0].identifier):this._tap.touchstart(u,m,y))}touchmove(u,m,y){if(this._tapTime){if(this._swipePoint){if(y[0].identifier!==this._swipeTouch)return;const S=m[0],C=S.y-this._swipePoint.y;return this._swipePoint=S,u.preventDefault(),this._active=!0,{zoomDelta:C/128}}}else this._tap.touchmove(u,m,y)}touchend(u,m,y){this._tapTime?this._swipePoint&&y.length===0&&this.reset():this._tap.touchend(u,m,y)&&(this._tapTime=u.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class wc{constructor(u,m,y){this._el=u,this._mousePan=m,this._touchPan=y}enable(u){this._inertiaOptions=u||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Dg{constructor(u,m,y){this._pitchWithRotate=u.pitchWithRotate,this._mouseRotate=m,this._mousePitch=y}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Bm{constructor(u,m,y,S){this._el=u,this._touchZoom=m,this._touchRotate=y,this._tapDragZoom=S,this._rotationDisabled=!1,this._enabled=!0}enable(u){this._touchZoom.enable(u),this._rotationDisabled||this._touchRotate.enable(u),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Qo=v=>v.zoom||v.drag||v.pitch||v.rotate;class tf extends s.Event{}class Lg{constructor(){this.constants=[1,1,.01],this.radius=0}setup(u,m){const y=s.sub([],m,u);this.radius=s.length(y[2]<0?s.div([],y,this.constants):[y[0],y[1],0])}projectRay(u){s.div(u,u,this.constants),s.normalize(u,u),s.mul$1(u,u,this.constants);const m=s.scale$2([],u,this.radius);if(m[2]>0){const y=s.scale$2([],[0,0,1],s.dot(m,[0,0,1])),S=s.scale$2([],s.normalize([],[m[0],m[1],0]),this.radius),C=s.add([],m,s.scale$2([],s.sub([],s.add([],S,y),m),2));m[0]=C[0],m[1]=C[1]}return m}}function ea(v){return v.panDelta&&v.panDelta.mag()||v.zoomDelta||v.bearingDelta||v.pitchDelta}class xl{constructor(u,m){this._map=u,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Xh(u),this._bearingSnap=m.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new Lg,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(m),s.bindAll(["handleEvent","handleWindowEvent"],this);const y=this._el;this._listeners=[[y,"touchstart",{passive:!0}],[y,"touchmove",{passive:!1}],[y,"touchend",void 0],[y,"touchcancel",void 0],[y,"mousedown",void 0],[y,"mousemove",void 0],[y,"mouseup",void 0],[s.window.document,"mousemove",{capture:!0}],[s.window.document,"mouseup",void 0],[y,"mouseover",void 0],[y,"mouseout",void 0],[y,"dblclick",void 0],[y,"click",void 0],[y,"keydown",{capture:!1}],[y,"keyup",void 0],[y,"wheel",{passive:!1}],[y,"contextmenu",void 0],[s.window,"blur",void 0]];for(const[S,C,L]of this._listeners)S.addEventListener(C,S===s.window.document?this.handleWindowEvent:this.handleEvent,L)}destroy(){for(const[u,m,y]of this._listeners)u.removeEventListener(m,u===s.window.document?this.handleWindowEvent:this.handleEvent,y)}_addDefaultHandlers(u){const m=this._map,y=m.getCanvasContainer();this._add("mapEvent",new Dm(m,u));const S=m.boxZoom=new wg(m,u);this._add("boxZoom",S);const C=new Tg,L=new ks;m.doubleClickZoom=new Vm(L,C),this._add("tapZoom",C),this._add("clickZoom",L);const O=new Mg;this._add("tapDragZoom",O);const U=m.touchPitch=new kg(m);this._add("touchPitch",U);const q=new Jh(u),K=new Rm(u);m.dragRotate=new Dg(u,q,K),this._add("mouseRotate",q,["mousePitch"]),this._add("mousePitch",K,["mouseRotate"]);const le=new Rd(u),me=new Qh(m,u);m.dragPan=new wc(y,le,me),this._add("mousePan",le),this._add("touchPan",me,["touchZoom","touchRotate"]);const xe=new Cg,Se=new Eg;m.touchZoomRotate=new Bm(y,Se,xe,O),this._add("touchRotate",xe,["touchPan","touchZoom"]),this._add("touchZoom",Se,["touchPan","touchRotate"]),this._add("blockableMapEvent",new Zh(m));const we=m.scrollZoom=new Pg(m,this);this._add("scrollZoom",we,["mousePan"]);const Ce=m.keyboard=new z_;this._add("keyboard",Ce);for(const ce of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])u.interactive&&u[ce]&&m[ce].enable(u[ce])}_add(u,m,y){this._handlers.push({handlerName:u,handler:m,allowed:y}),this._handlersById[u]=m}stop(u){if(!this._updatingCamera){for(const{handler:m}of this._handlers)m.reset();this._inertia.clear(),this._fireEvents({},{},u),this._changes=[]}}isActive(){for(const{handler:u}of this._handlers)if(u.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Qo(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(u,m,y){for(const S in u)if(S!==y&&(!m||m.indexOf(S)<0))return!0;return!1}handleWindowEvent(u){this.handleEvent(u,`${u.type}Window`)}_getMapTouches(u){const m=[];for(const y of u)this._el.contains(y.target)&&m.push(y);return m}handleEvent(u,m){this._updatingCamera=!0;const y=u.type==="renderFrame",S=y?void 0:u,C={needsRenderFrame:!1},L={},O={},U=u.touches?this._getMapTouches(u.touches):void 0,q=U?J(this._el,U):y?void 0:ie(this._el,u);for(const{handlerName:me,handler:xe,allowed:Se}of this._handlers){if(!xe.isEnabled())continue;let we;this._blockedByActive(O,Se,me)?xe.reset():xe[m||u.type]&&(we=xe[m||u.type](u,q,U),this.mergeHandlerResult(C,L,we,me,S),we&&we.needsRenderFrame&&this._triggerRenderFrame()),(we||xe.isActive())&&(O[me]=xe)}const K={};for(const me in this._previousActiveHandlers)O[me]||(K[me]=S);this._previousActiveHandlers=O,(Object.keys(K).length||ea(C))&&(this._changes.push([C,L,K]),this._triggerRenderFrame()),(Object.keys(O).length||ea(C))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:le}=C;le&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],le(this._map))}mergeHandlerResult(u,m,y,S,C){if(!y)return;s.extend(u,y);const L={handlerName:S,originalEvent:y.originalEvent||C};y.zoomDelta!==void 0&&(m.zoom=L),y.panDelta!==void 0&&(m.drag=L),y.pitchDelta!==void 0&&(m.pitch=L),y.bearingDelta!==void 0&&(m.rotate=L)}_applyChanges(){const u={},m={},y={};for(const[S,C,L]of this._changes)S.panDelta&&(u.panDelta=(u.panDelta||new s.Point(0,0))._add(S.panDelta)),S.zoomDelta&&(u.zoomDelta=(u.zoomDelta||0)+S.zoomDelta),S.bearingDelta&&(u.bearingDelta=(u.bearingDelta||0)+S.bearingDelta),S.pitchDelta&&(u.pitchDelta=(u.pitchDelta||0)+S.pitchDelta),S.around!==void 0&&(u.around=S.around),S.aroundCoord!==void 0&&(u.aroundCoord=S.aroundCoord),S.pinchAround!==void 0&&(u.pinchAround=S.pinchAround),S.noInertia&&(u.noInertia=S.noInertia),s.extend(m,C),s.extend(y,L);this._updateMapTransform(u,m,y),this._changes=[]}_updateMapTransform(u,m,y){const S=this._map,C=S.transform,L=ye=>[ye.x,ye.y,ye.z];if((ye=>{const Pe=this._eventsInProgress.drag;return Pe&&!this._handlersById[Pe.handlerName].isActive()})()&&!ea(u)){const ye=C.zoom;C.cameraElevationReference="sea",C.recenterOnTerrain(),C.cameraElevationReference="ground",ye!==C.zoom&&this._map._update(!0)}if(C._isCameraConstrained&&S._stop(!0),!ea(u))return void this._fireEvents(m,y,!0);let{panDelta:O,zoomDelta:U,bearingDelta:q,pitchDelta:K,around:le,aroundCoord:me,pinchAround:xe}=u;C._isCameraConstrained&&(U>0&&(U=0),C._isCameraConstrained=!1),xe!==void 0&&(le=xe),(U||(ye=>m[ye]&&!this._eventsInProgress[ye])("drag"))&&le&&(this._dragOrigin=L(C.pointCoordinate3D(le)),this._trackingEllipsoid.setup(C._camera.position,this._dragOrigin)),C.cameraElevationReference="sea",S._stop(!0),le=le||S.transform.centerPoint,q&&(C.bearing+=q),K&&(C.pitch+=K),C._updateCameraState();const Se=[0,0,0];if(O)if(C.projection.name==="mercator"){const ye=this._trackingEllipsoid.projectRay(C.screenPointToMercatorRay(le).dir),Pe=this._trackingEllipsoid.projectRay(C.screenPointToMercatorRay(le.sub(O)).dir);Se[0]=Pe[0]-ye[0],Se[1]=Pe[1]-ye[1]}else{const ye=C.pointCoordinate(le);if(C.projection.name==="globe"){O=O.rotate(-C.angle);const Pe=C._pixelsPerMercatorPixel/C.worldSize;Se[0]=-O.x*s.mercatorScale(s.latFromMercatorY(ye.y))*Pe,Se[1]=-O.y*s.mercatorScale(C.center.lat)*Pe}else{const Pe=C.pointCoordinate(le.sub(O));ye&&Pe&&(Se[0]=Pe.x-ye.x,Se[1]=Pe.y-ye.y)}}const we=C.zoom,Ce=[0,0,0];if(U){const ye=L(me||C.pointCoordinate3D(le)),Pe={dir:s.normalize([],s.sub([],ye,C._camera.position))};if(Pe.dir[2]<0){const De=C.zoomDeltaToMovement(ye,U);s.scale$2(Ce,Pe.dir,De)}}const ce=s.add(Se,Se,Ce);C._translateCameraConstrained(ce),U&&Math.abs(C.zoom-we)>1e-4&&C.recenterOnTerrain(),C.cameraElevationReference="ground",this._map._update(),u.noInertia||this._inertia.record(u),this._fireEvents(m,y,!0)}_fireEvents(u,m,y){const S=Qo(this._eventsInProgress),C=Qo(u),L={};for(const K in u){const{originalEvent:le}=u[K];this._eventsInProgress[K]||(L[`${K}start`]=le),this._eventsInProgress[K]=u[K]}!S&&C&&this._fireEvent("movestart",C.originalEvent);for(const K in L)this._fireEvent(K,L[K]);C&&this._fireEvent("move",C.originalEvent);for(const K in u){const{originalEvent:le}=u[K];this._fireEvent(K,le)}const O={};let U;for(const K in this._eventsInProgress){const{handlerName:le,originalEvent:me}=this._eventsInProgress[K];this._handlersById[le].isActive()||(delete this._eventsInProgress[K],U=m[le]||me,O[`${K}end`]=U)}for(const K in O)this._fireEvent(K,O[K]);const q=Qo(this._eventsInProgress);if(y&&(S||C)&&!q){this._updatingCamera=!0;const K=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),le=me=>me!==0&&-this._bearingSnap<me&&me<this._bearingSnap;K?(le(K.bearing||this._map.getBearing())&&(K.bearing=0),this._map.easeTo(K,{originalEvent:U})):(this._map.fire(new s.Event("moveend",{originalEvent:U})),le(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(u,m){this._map.fire(new s.Event(u,m?{originalEvent:m}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((u=>{this._frameId=void 0,this.handleEvent(new tf("renderFrame",{timeStamp:u})),this._applyChanges()}))}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const ta="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class tl extends s.Evented{constructor(u,m){super(),this._moving=!1,this._zooming=!1,this.transform=u,this._bearingSnap=m.bearingSnap,this._respectPrefersReducedMotion=m.respectPrefersReducedMotion!==!1,s.bindAll(["_renderFrameCallback"],this)}getCenter(){return new s.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(u,m){return this.jumpTo({center:u},m)}panBy(u,m,y){return u=s.Point.convert(u).mult(-1),this.panTo(this.transform.center,s.extend({offset:u},m),y)}panTo(u,m,y){return this.easeTo(s.extend({center:u},m),y)}getZoom(){return this.transform.zoom}setZoom(u,m){return this.jumpTo({zoom:u},m),this}zoomTo(u,m,y){return this.easeTo(s.extend({zoom:u},m),y)}zoomIn(u,m){return this.zoomTo(this.getZoom()+1,u,m),this}zoomOut(u,m){return this.zoomTo(this.getZoom()-1,u,m),this}getBearing(){return this.transform.bearing}setBearing(u,m){return this.jumpTo({bearing:u},m),this}getPadding(){return this.transform.padding}setPadding(u,m){return this.jumpTo({padding:u},m),this}rotateTo(u,m,y){return this.easeTo(s.extend({bearing:u},m),y)}resetNorth(u,m){return this.rotateTo(0,s.extend({duration:1e3},u),m),this}resetNorthPitch(u,m){return this.easeTo(s.extend({bearing:0,pitch:0,duration:1e3},u),m),this}snapToNorth(u,m){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(u,m):this}getPitch(){return this.transform.pitch}setPitch(u,m){return this.jumpTo({pitch:u},m),this}cameraForBounds(u,m){u=s.LngLatBounds.convert(u);const y=m&&m.bearing||0,S=m&&m.pitch||0,C=u.getNorthWest(),L=u.getSouthEast();return this._cameraForBounds(this.transform,C,L,y,S,m)}_extendCameraOptions(u){const m={top:0,bottom:0,right:0,left:0};if(typeof(u=s.extend({padding:m,offset:[0,0],maxZoom:this.transform.maxZoom},u)).padding=="number"){const y=u.padding;u.padding={top:y,bottom:y,right:y,left:y}}return u.padding=s.extend(m,u.padding),u}_minimumAABBFrustumDistance(u,m){const y=m.max[0]-m.min[0],S=m.max[1]-m.min[1];return y/S>u.aspect?y/(2*Math.tan(.5*u.fovX)*u.aspect):S/(2*Math.tan(.5*u.fovY)*u.aspect)}_cameraForBoundsOnGlobe(u,m,y,S,C,L){const O=u.clone(),U=this._extendCameraOptions(L);O.bearing=S,O.pitch=C;const q=s.LngLat.convert(m),K=s.LngLat.convert(y),le=.5*(q.lat+K.lat),me=.5*(q.lng+K.lng),xe=s.latLngToECEF(le,me),Se=s.normalize([],xe),we=s.normalize([],s.cross([],Se,[0,1,0])),Ce=s.cross([],we,Se),ce=[we[0],we[1],we[2],0,Ce[0],Ce[1],Ce[2],0,Se[0],Se[1],Se[2],0,0,0,0,1],ye=[xe,s.latLngToECEF(q.lat,q.lng),s.latLngToECEF(K.lat,q.lng),s.latLngToECEF(K.lat,K.lng),s.latLngToECEF(q.lat,K.lng),s.latLngToECEF(le,q.lng),s.latLngToECEF(le,K.lng),s.latLngToECEF(q.lat,me),s.latLngToECEF(K.lat,me)];let Pe=s.Aabb.fromPoints(ye.map((Ft=>[s.dot(we,Ft),s.dot(Ce,Ft),s.dot(Se,Ft)])));const De=s.transformMat4([],Pe.center,ce);s.squaredLength(De)===0&&s.set(De,0,0,1),s.normalize(De,De),s.scale$2(De,De,s.GLOBE_RADIUS),O.center=s.ecefToLatLng(De);const Ue=O.getWorldToCameraMatrix(),je=s.invert(new Float64Array(16),Ue);Pe=s.Aabb.applyTransform(Pe,s.multiply([],Ue,ce)),s.transformMat4(De,De,Ue);const Ge=.5*(Pe.max[2]-Pe.min[2]),ct=this._minimumAABBFrustumDistance(O,Pe),at=s.scale$2([],[0,0,1],Ge),gt=s.add(at,De,at),Wt=ct+(O.pitch===0?0:s.distance(De,gt)),ht=O.globeCenterInViewSpace,Lt=s.sub([],De,[ht[0],ht[1],ht[2]]);s.normalize(Lt,Lt),s.scale$2(Lt,Lt,Wt);const bt=s.add([],De,Lt);s.transformMat4(bt,bt,je);const Gt=s.earthRadius/s.GLOBE_RADIUS,ft=s.length(bt),St=s.mercatorZfromAltitude(Math.max(ft*Gt-s.earthRadius,Number.EPSILON),0),$t=Math.min(O.zoomFromMercatorZAdjusted(St),U.maxZoom);return $t>.5*(s.GLOBE_ZOOM_THRESHOLD_MIN+s.GLOBE_ZOOM_THRESHOLD_MAX)?(O.setProjection({name:"mercator"}),O.zoom=$t,this._cameraForBounds(O,m,y,S,C,L)):{center:O.center,zoom:$t,bearing:S,pitch:C}}queryTerrainElevation(u,m){const y=this.transform.elevation;return y?(m=s.extend({},{exaggerated:!0},m),y.getAtPoint(s.MercatorCoordinate.fromLngLat(u),null,m.exaggerated)):null}_cameraForBounds(u,m,y,S,C,L){if(u.projection.name==="globe")return this._cameraForBoundsOnGlobe(u,m,y,S,C,L);const O=u.clone(),U=this._extendCameraOptions(L),q=O.padding;O.bearing=S,O.pitch=C;const K=s.LngLat.convert(m),le=s.LngLat.convert(y),me=new s.LngLat(K.lng,le.lat),xe=new s.LngLat(le.lng,K.lat),Se=O.project(K),we=O.project(le),Ce=this.queryTerrainElevation(K),ce=this.queryTerrainElevation(le),ye=this.queryTerrainElevation(me),Pe=this.queryTerrainElevation(xe),De=[[Se.x,Se.y,Math.min(Ce||0,ce||0,ye||0,Pe||0)],[we.x,we.y,Math.max(Ce||0,ce||0,ye||0,Pe||0)]];let Ue=s.Aabb.fromPoints(De);const je=O.getWorldToCameraMatrix(),Ge=s.invert(new Float64Array(16),je);Ue=s.Aabb.applyTransform(Ue,je);const ct=s.sub([],Ue.max,Ue.min),at=q.left||0,gt=q.right||0,Wt=q.bottom||0,ht=q.top||0,{left:Lt,right:bt,top:Gt,bottom:ft}=U.padding,St=.5*(at+gt),$t=.5*(ht+Wt),Ft=Math.min(O.scaleZoom(O.scale*Math.min((O.width-(at+gt+Lt+bt))/ct[0],(O.height-(Wt+ht+ft+Gt))/ct[1])),U.maxZoom),Kt=O.scale/O.zoomScale(Ft);Ue=new s.Aabb([Ue.min[0]-(Lt+St)*Kt,Ue.min[1]-(ft+$t)*Kt,Ue.min[2]],[Ue.max[0]+(bt+St)*Kt,Ue.max[1]+(Gt+$t)*Kt,Ue.max[2]]);const Dn=.5*ct[2],Gn=this._minimumAABBFrustumDistance(O,Ue),Sn=[0,0,1,0];s.transformMat4$1(Sn,Sn,je),s.normalize$2(Sn,Sn);const Rn=s.scale$2([],Sn,Gn+Dn),pi=s.add([],Ue.center,Rn),mi=(typeof U.offset.x=="number"&&typeof U.offset.y=="number"?new s.Point(U.offset.x,U.offset.y):s.Point.convert(U.offset)).rotate(-s.degToRad(S));Ue.center[0]-=mi.x*Kt,Ue.center[1]+=mi.y*Kt,s.transformMat4(Ue.center,Ue.center,Ge),s.transformMat4(pi,pi,Ge);const In=[Ue.center[0],Ue.center[1],pi[2]*O.pixelsPerMeter];s.scale$2(In,In,1/O.worldSize);const Di=s.lngFromMercatorX(In[0]),$i=s.latFromMercatorY(In[1]),Xi=Math.min(O._zoomFromMercatorZ(In[2]),U.maxZoom),ji=new s.LngLat(Di,$i);return O.mercatorFromTransition&&Xi<.5*(s.GLOBE_ZOOM_THRESHOLD_MIN+s.GLOBE_ZOOM_THRESHOLD_MAX)?(O.setProjection({name:"globe"}),O.zoom=Xi,this._cameraForBounds(O,m,y,S,C,L)):{center:ji,zoom:Xi,bearing:S,pitch:C}}fitBounds(u,m,y){const S=this.cameraForBounds(u,m);return this._fitInternal(S,m,y)}fitScreenCoordinates(u,m,y,S,C){const L=s.Point.convert(u),O=s.Point.convert(m),U=new s.Point(Math.min(L.x,O.x),Math.min(L.y,O.y)),q=new s.Point(Math.max(L.x,O.x),Math.max(L.y,O.y));if(this.transform.projection.name==="mercator"&&this.transform.anyCornerOffEdge(L,O))return this;const K=this.transform.pointLocation3D(U),le=this.transform.pointLocation3D(q),me=this.transform.pointLocation3D(new s.Point(U.x,q.y)),xe=this.transform.pointLocation3D(new s.Point(q.x,U.y)),Se=[Math.min(K.lng,le.lng,me.lng,xe.lng),Math.min(K.lat,le.lat,me.lat,xe.lat)],we=[Math.max(K.lng,le.lng,me.lng,xe.lng),Math.max(K.lat,le.lat,me.lat,xe.lat)],Ce=S&&S.pitch?S.pitch:this.getPitch(),ce=this._cameraForBounds(this.transform,Se,we,y,Ce,S);return this._fitInternal(ce,S,C)}_fitInternal(u,m,y){return u?(delete(m=s.extend(u,m)).padding,m.linear?this.easeTo(m,y):this.flyTo(m,y)):this}jumpTo(u,m){this.stop();const y=u.preloadOnly?this.transform.clone():this.transform;let S=!1,C=!1,L=!1;return"zoom"in u&&y.zoom!==+u.zoom&&(S=!0,y.zoom=+u.zoom),u.center!==void 0&&(y.center=s.LngLat.convert(u.center)),"bearing"in u&&y.bearing!==+u.bearing&&(C=!0,y.bearing=+u.bearing),"pitch"in u&&y.pitch!==+u.pitch&&(L=!0,y.pitch=+u.pitch),u.padding==null||y.isPaddingEqual(u.padding)||(y.padding=u.padding),u.preloadOnly?(this._preloadTiles(y),this):(this.fire(new s.Event("movestart",m)).fire(new s.Event("move",m)),S&&this.fire(new s.Event("zoomstart",m)).fire(new s.Event("zoom",m)).fire(new s.Event("zoomend",m)),C&&this.fire(new s.Event("rotatestart",m)).fire(new s.Event("rotate",m)).fire(new s.Event("rotateend",m)),L&&this.fire(new s.Event("pitchstart",m)).fire(new s.Event("pitch",m)).fire(new s.Event("pitchend",m)),this.fire(new s.Event("moveend",m)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||s.warnOnce(ta),this.transform.getFreeCameraOptions()}setFreeCameraOptions(u,m){const y=this.transform;if(!y.projection.supportsFreeCamera)return s.warnOnce(ta),this;this.stop();const S=y.zoom,C=y.pitch,L=y.bearing;y.setFreeCameraOptions(u);const O=S!==y.zoom,U=C!==y.pitch,q=L!==y.bearing;return this.fire(new s.Event("movestart",m)).fire(new s.Event("move",m)),O&&this.fire(new s.Event("zoomstart",m)).fire(new s.Event("zoom",m)).fire(new s.Event("zoomend",m)),q&&this.fire(new s.Event("rotatestart",m)).fire(new s.Event("rotate",m)).fire(new s.Event("rotateend",m)),U&&this.fire(new s.Event("pitchstart",m)).fire(new s.Event("pitch",m)).fire(new s.Event("pitchend",m)),this.fire(new s.Event("moveend",m)),this}easeTo(u,m){this._stop(!1,u.easeId),((u=s.extend({offset:[0,0],duration:500,easing:s.ease},u)).animate===!1||this._prefersReducedMotion(u))&&(u.duration=0);const y=this.transform,S=this.getZoom(),C=this.getBearing(),L=this.getPitch(),O=this.getPadding(),U="zoom"in u?+u.zoom:S,q="bearing"in u?this._normalizeBearing(u.bearing,C):C,K="pitch"in u?+u.pitch:L,le="padding"in u?u.padding:y.padding,me=s.Point.convert(u.offset);let xe,Se,we;if(y.projection.name==="globe"){const at=s.MercatorCoordinate.fromLngLat(y.center),gt=me.rotate(-y.angle);at.x+=gt.x/y.worldSize,at.y+=gt.y/y.worldSize;const Wt=at.toLngLat(),ht=s.LngLat.convert(u.center||Wt);this._normalizeCenter(ht),xe=y.centerPoint.add(gt),Se=new s.Point(at.x,at.y).mult(y.worldSize),we=new s.Point(s.mercatorXfromLng(ht.lng),s.mercatorYfromLat(ht.lat)).mult(y.worldSize).sub(Se)}else{xe=y.centerPoint.add(me);const at=y.pointLocation(xe),gt=s.LngLat.convert(u.center||at);this._normalizeCenter(gt),Se=y.project(at),we=y.project(gt).sub(Se)}const Ce=y.zoomScale(U-S);let ce,ye;u.around&&(ce=s.LngLat.convert(u.around),ye=y.locationPoint(ce));const Pe=this._zooming||U!==S,De=this._rotating||C!==q,Ue=this._pitching||K!==L,je=!y.isPaddingEqual(le),Ge=at=>gt=>{if(Pe&&(at.zoom=s.number(S,U,gt)),De&&(at.bearing=s.number(C,q,gt)),Ue&&(at.pitch=s.number(L,K,gt)),je&&(at.interpolatePadding(O,le,gt),xe=at.centerPoint.add(me)),ce)at.setLocationAtPoint(ce,ye);else{const Wt=at.zoomScale(at.zoom-S),ht=U>S?Math.min(2,Ce):Math.max(.5,Ce),Lt=Math.pow(ht,1-gt),bt=at.unproject(Se.add(we.mult(gt*Lt)).mult(Wt));at.setLocationAtPoint(at.renderWorldCopies?bt.wrap():bt,xe)}return u.preloadOnly||this._fireMoveEvents(m),at};if(u.preloadOnly){const at=this._emulate(Ge,u.duration,y);return this._preloadTiles(at),this}const ct={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=Pe,this._rotating=De,this._pitching=Ue,this._padding=je,this._easeId=u.easeId,this._prepareEase(m,u.noMoveStart,ct),this._ease(Ge(y),(at=>{y.recenterOnTerrain(),this._afterEase(m,at)}),u),this}_prepareEase(u,m,y={}){this._moving=!0,this.transform.cameraElevationReference="sea",m||y.moving||this.fire(new s.Event("movestart",u)),this._zooming&&!y.zooming&&this.fire(new s.Event("zoomstart",u)),this._rotating&&!y.rotating&&this.fire(new s.Event("rotatestart",u)),this._pitching&&!y.pitching&&this.fire(new s.Event("pitchstart",u))}_fireMoveEvents(u){this.fire(new s.Event("move",u)),this._zooming&&this.fire(new s.Event("zoom",u)),this._rotating&&this.fire(new s.Event("rotate",u)),this._pitching&&this.fire(new s.Event("pitch",u))}_afterEase(u,m){if(this._easeId&&m&&this._easeId===m)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const y=this._zooming,S=this._rotating,C=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,y&&this.fire(new s.Event("zoomend",u)),S&&this.fire(new s.Event("rotateend",u)),C&&this.fire(new s.Event("pitchend",u)),this.fire(new s.Event("moveend",u))}flyTo(u,m){if(this._prefersReducedMotion(u)){const Ft=s.pick(u,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Ft,m)}this.stop(),u=s.extend({offset:[0,0],speed:1.2,curve:1.42,easing:s.ease},u);const y=this.transform,S=this.getZoom(),C=this.getBearing(),L=this.getPitch(),O=this.getPadding(),U="zoom"in u?s.clamp(+u.zoom,y.minZoom,y.maxZoom):S,q="bearing"in u?this._normalizeBearing(u.bearing,C):C,K="pitch"in u?+u.pitch:L,le="padding"in u?u.padding:y.padding,me=y.zoomScale(U-S),xe=s.Point.convert(u.offset);let Se=y.centerPoint.add(xe);const we=y.pointLocation(Se),Ce=s.LngLat.convert(u.center||we);this._normalizeCenter(Ce);const ce=y.project(we),ye=y.project(Ce).sub(ce);let Pe=u.curve;const De=Math.max(y.width,y.height),Ue=De/me,je=ye.mag();if("minZoom"in u){const Ft=s.clamp(Math.min(u.minZoom,S,U),y.minZoom,y.maxZoom),Kt=De/y.zoomScale(Ft-S);Pe=Math.sqrt(Kt/je*2)}const Ge=Pe*Pe;function ct(Ft){const Kt=(Ue*Ue-De*De+(Ft?-1:1)*Ge*Ge*je*je)/(2*(Ft?Ue:De)*Ge*je);return Math.log(Math.sqrt(Kt*Kt+1)-Kt)}function at(Ft){return(Math.exp(Ft)-Math.exp(-Ft))/2}function gt(Ft){return(Math.exp(Ft)+Math.exp(-Ft))/2}const Wt=ct(0);let ht=function(Ft){return gt(Wt)/gt(Wt+Pe*Ft)},Lt=function(Ft){return De*((gt(Wt)*(at(Kt=Wt+Pe*Ft)/gt(Kt))-at(Wt))/Ge)/je;var Kt},bt=(ct(1)-Wt)/Pe;if(Math.abs(je)<1e-6||!isFinite(bt)){if(Math.abs(De-Ue)<1e-6)return this.easeTo(u,m);const Ft=Ue<De?-1:1;bt=Math.abs(Math.log(Ue/De))/Pe,Lt=function(){return 0},ht=function(Kt){return Math.exp(Ft*Pe*Kt)}}u.duration="duration"in u?+u.duration:1e3*bt/("screenSpeed"in u?+u.screenSpeed/Pe:+u.speed),u.maxDuration&&u.duration>u.maxDuration&&(u.duration=0);const Gt=C!==q,ft=K!==L,St=!y.isPaddingEqual(le),$t=Ft=>Kt=>{const Dn=Kt*bt,Gn=1/ht(Dn);Ft.zoom=Kt===1?U:S+Ft.scaleZoom(Gn),Gt&&(Ft.bearing=s.number(C,q,Kt)),ft&&(Ft.pitch=s.number(L,K,Kt)),St&&(Ft.interpolatePadding(O,le,Kt),Se=Ft.centerPoint.add(xe));const Sn=Kt===1?Ce:Ft.unproject(ce.add(ye.mult(Lt(Dn))).mult(Gn));return Ft.setLocationAtPoint(Ft.renderWorldCopies?Sn.wrap():Sn,Se),Ft._updateCameraOnTerrain(),u.preloadOnly||this._fireMoveEvents(m),Ft};if(u.preloadOnly){const Ft=this._emulate($t,u.duration,y);return this._preloadTiles(Ft),this}return this._zooming=!0,this._rotating=Gt,this._pitching=ft,this._padding=St,this._prepareEase(m,!1),this._ease($t(y),(()=>this._afterEase(m)),u),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(u,m){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const y=this._onEaseEnd;this._onEaseEnd=void 0,y.call(this,m)}if(!u){const y=this.handlers;y&&y.stop(!1)}return this}_ease(u,m,y){y.animate===!1||y.duration===0?(u(1),m()):(this._easeStart=s.exported.now(),this._easeOptions=y,this._onEaseFrame=u,this._onEaseEnd=m,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const u=Math.min((s.exported.now()-this._easeStart)/this._easeOptions.duration,1),m=this._onEaseFrame;m&&m(this._easeOptions.easing(u)),u<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(u,m){u=s.wrap(u,-180,180);const y=Math.abs(u-m);return Math.abs(u-360-m)<y&&(u-=360),Math.abs(u+360-m)<y&&(u+=360),u}_normalizeCenter(u){const m=this.transform;if(!m.renderWorldCopies||m.maxBounds)return;const y=u.lng-m.center.lng;u.lng+=y>180?-360:y<-180?360:0}_prefersReducedMotion(u){return this._respectPrefersReducedMotion&&s.exported.prefersReducedMotion&&!(u&&u.essential)}_emulate(u,m,y){const S=Math.ceil(15*m/1e3),C=[],L=u(y.clone());for(let O=0;O<=S;O++){const U=L(O/S);C.push(U.clone())}return C}}class Tn{constructor(u={}){this.options=u,s.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(u){const m=this.options&&this.options.compact;return this._map=u,this._container=k("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=k("button","mapboxgl-ctrl-attrib-button",this._container),k("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=k("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),m&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),m===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(u,m){const y=this._map._getUIString(`AttributionControl.${m}`);u.setAttribute("aria-label",y),u.removeAttribute("title"),u.firstElementChild&&u.firstElementChild.setAttribute("title",y)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let u=this._editLink;u||(u=this._editLink=this._container.querySelector(".mapbox-improve-map"));const m=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||s.config.ACCESS_TOKEN}];if(u){const y=m.reduce(((S,C,L)=>(C.value&&(S+=`${C.key}=${C.value}${L<m.length-1?"&":""}`),S)),"?");u.href=`${s.config.FEEDBACK_URL}/${y}#${yc(this._map,!0)}`,u.rel="noopener nofollow",this._setElementTitle(u,"MapFeedback")}}_updateData(u){!u||u.sourceDataType!=="metadata"&&u.sourceDataType!=="visibility"&&u.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let u=[];if(this._map.style.stylesheet){const S=this._map.style.stylesheet;this.styleOwner=S.owner,this.styleId=S.id}const m=this._map.style._sourceCaches;for(const S in m){const C=m[S];if(C.used){const L=C.getSource();L.attribution&&u.indexOf(L.attribution)<0&&u.push(L.attribution)}}u.sort(((S,C)=>S.length-C.length)),u=u.filter(((S,C)=>{for(let L=C+1;L<u.length;L++)if(u[L].indexOf(S)>=0)return!1;return!0})),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?u=[...this.options.customAttribution,...u]:u.unshift(this.options.customAttribution));const y=u.join(" | ");y!==this._attribHTML&&(this._attribHTML=y,u.length?(this._innerContainer.innerHTML=y,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class Fm{constructor(){s.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(u){this._map=u,this._container=k("div","mapboxgl-ctrl");const m=k("a","mapboxgl-ctrl-logo");return m.target="_blank",m.rel="noopener nofollow",m.href="https://www.mapbox.com/",m.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),m.setAttribute("rel","noopener nofollow"),this._container.appendChild(m),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(u){u&&u.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const u=this._map.style._sourceCaches;if(Object.entries(u).length===0)return!0;for(const m in u){const y=u[m].getSource();if(y.hasOwnProperty("mapbox_logo")&&!y.mapbox_logo)return!1}return!0}_updateCompact(){const u=this._container.children;if(u.length){const m=u[0];this._map.getCanvasContainer().offsetWidth<250?m.classList.add("mapboxgl-compact"):m.classList.remove("mapboxgl-compact")}}}class zm{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(u){const m=++this._id;return this._queue.push({callback:u,id:m,cancelled:!1}),m}remove(u){const m=this._currentlyRunning,y=m?this._queue.concat(m):this._queue;for(const S of y)if(S.id===u)return void(S.cancelled=!0)}run(u=0){const m=this._currentlyRunning=this._queue;this._queue=[];for(const y of m)if(!y.cancelled&&(y.callback(u),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function Pu(v,u,m){if(v=new s.LngLat(v.lng,v.lat),u){const y=new s.LngLat(v.lng-360,v.lat),S=new s.LngLat(v.lng+360,v.lat),C=360*Math.ceil(Math.abs(v.lng-m.center.lng)/360),L=m.locationPoint(v).distSqr(u),O=u.x<0||u.y<0||u.x>m.width||u.y>m.height;m.locationPoint(y).distSqr(u)<L&&(O||Math.abs(y.lng-m.center.lng)<C)?v=y:m.locationPoint(S).distSqr(u)<L&&(O||Math.abs(S.lng-m.center.lng)<C)&&(v=S)}for(;Math.abs(v.lng-m.center.lng)>180;){const y=m.locationPoint(v);if(y.x>=0&&y.y>=0&&y.x<=m.width&&y.y<=m.height)break;v.lng>m.center.lng?v.lng-=360:v.lng+=360}return v}const Zc={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class _n extends s.Evented{constructor(u,m){if(super(),(u instanceof s.window.HTMLElement||m)&&(u=s.extend({element:u},m)),s.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=u&&u.anchor||"center",this._color=u&&u.color||"#3FB1CE",this._scale=u&&u.scale||1,this._draggable=u&&u.draggable||!1,this._clickTolerance=u&&u.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=u&&u.rotation||0,this._rotationAlignment=u&&u.rotationAlignment||"auto",this._pitchAlignment=u&&u.pitchAlignment&&u.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=u&&u.occludedOpacity||.2,u&&u.element)this._element=u.element,this._offset=s.Point.convert(u&&u.offset||[0,0]);else{this._defaultMarker=!0,this._element=k("div");const S=41,C=27,L=P("svg",{display:"block",height:S*this._scale+"px",width:C*this._scale+"px",viewBox:`0 0 ${C} ${S}`},this._element),O=P("radialGradient",{id:"shadowGradient"},P("defs",{},L));P("stop",{offset:"10%","stop-opacity":.4},O),P("stop",{offset:"100%","stop-opacity":.05},O),P("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},L),P("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},L),P("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},L),P("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},L),this._offset=s.Point.convert(u&&u.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",(S=>{S.preventDefault()})),this._element.addEventListener("mousedown",(S=>{S.preventDefault()}));const y=this._element.classList;for(const S in Zc)y.remove(`mapboxgl-marker-anchor-${S}`);y.add(`mapboxgl-marker-anchor-${this._anchor}`),this._popup=null}addTo(u){return u===this._map||(this.remove(),this._map=u,u.getCanvasContainer().appendChild(this._element),u.on("move",this._updateMoving),u.on("moveend",this._update),u.on("remove",this._clearFadeTimer),u._addMarker(this),this.setDraggable(this._draggable),this._update(),u.on("click",this._onMapClick)),this}remove(){const u=this._map;return u&&(u.off("click",this._onMapClick),u.off("move",this._updateMoving),u.off("moveend",this._update),u.off("mousedown",this._addDragHandler),u.off("touchstart",this._addDragHandler),u.off("mouseup",this._onUp),u.off("touchend",this._onUp),u.off("mousemove",this._onMove),u.off("touchmove",this._onMove),u.off("remove",this._clearFadeTimer),u._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(u){return this._lngLat=s.LngLat.convert(u),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(u){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),u){if(!("offset"in u.options)){const S=Math.sqrt(Math.pow(13.5,2)/2);u.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[S,-1*(38.1-13.5+S)],"bottom-right":[-S,-1*(38.1-13.5+S)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=u,u._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(u){const m=u.code,y=u.charCode||u.keyCode;m!=="Space"&&m!=="Enter"&&y!==32&&y!==13||this.togglePopup()}_onMapClick(u){const m=u.originalEvent.target,y=this._element;this._popup&&(m===y||y.contains(m))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const u=this._popup;return u?(u.isOpen()?(u.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(u.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const u=this._map,m=this._pos;if(!u||!m)return!1;const y=u.unproject(m),S=u.getFreeCameraOptions();if(!S.position)return!1;const C=S.position.toLngLat();return C.distanceTo(y)<.9*C.distanceTo(this._lngLat)}_evaluateOpacity(){const u=this._map;if(!u)return;const m=this._pos;if(!m||m.x<0||m.x>u.transform.width||m.y<0||m.y>u.transform.height)return void this._clearFadeTimer();const y=u.unproject(m);let S;u._showingGlobe()&&s.isLngLatBehindGlobe(u.transform,this._lngLat)?S=0:(S=1-u._queryFogOpacity(y),u.transform._terrainEnabled()&&u.getTerrain()&&this._behindTerrain()&&(S*=this._occludedOpacity)),this._element.style.opacity=`${S}`,this._element.style.pointerEvents=S>0?"auto":"none",this._popup&&this._popup._setOpacity(S),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const u=this._pos;if(!u||!this._map)return;const m=this._offset.mult(this._scale);this._element.style.transform=`
            translate(${u.x}px,${u.y}px)
            ${Zc[this._anchor]}
            ${this._calculateXYTransform()} ${this._calculateZTransform()}
            translate(${m.x}px,${m.y}px)
        `}_calculateXYTransform(){const u=this._pos,m=this._map,y=this.getPitchAlignment();if(!m||!u||y!=="map")return"";if(!m._showingGlobe()){const U=m.getPitch();return U?`rotateX(${U}deg)`:""}const S=s.radToDeg(s.globeTiltAtLngLat(m.transform,this._lngLat)),C=u.sub(s.globeCenterToScreenPoint(m.transform)),L=Math.abs(C.x)+Math.abs(C.y);if(L===0)return"";const O=S/L;return`rotateX(${-C.y*O}deg) rotateY(${C.x*O}deg)`}_calculateZTransform(){const u=this._pos,m=this._map;if(!m||!u)return"";let y=0;const S=this.getRotationAlignment();if(S==="map")if(m._showingGlobe()){const C=m.project(new s.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),L=m.project(new s.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(C);y=s.radToDeg(Math.atan2(L.y,L.x))-90}else y=-m.getBearing();else if(S==="horizon"){const C=s.smoothstep(4,6,m.getZoom()),L=s.globeCenterToScreenPoint(m.transform);L.y+=C*m.transform.height;const O=u.sub(L),U=s.radToDeg(Math.atan2(O.y,O.x));y=(U>90?U-270:U+90)*(1-C)}return y+=this._rotation,y?`rotateZ(${y}deg)`:""}_update(u){s.window.cancelAnimationFrame(this._updateFrameId);const m=this._map;m&&(m.transform.renderWorldCopies&&(this._lngLat=Pu(this._lngLat,this._pos,m.transform)),this._pos=m.project(this._lngLat),u===!0?this._updateFrameId=s.window.requestAnimationFrame((()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())})):this._pos=this._pos.round(),m._requestDomTask((()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(m._showingGlobe()||m.getTerrain()||m.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))})))}getOffset(){return this._offset}setOffset(u){return this._offset=s.Point.convert(u),this._update(),this}_onMove(u){const m=this._map;if(!m)return;const y=this._pointerdownPos,S=this._positionDelta;if(y&&S){if(!this._isDragging){const C=this._clickTolerance||m._clickTolerance;if(u.point.dist(y)<C)return;this._isDragging=!0}this._pos=u.point.sub(S),this._lngLat=m.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new s.Event("dragstart"))),this.fire(new s.Event("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const u=this._map;u&&(u.off("mousemove",this._onMove),u.off("touchmove",this._onMove)),this._state==="active"&&this.fire(new s.Event("dragend")),this._state="inactive"}_addDragHandler(u){const m=this._map,y=this._pos;m&&y&&this._element.contains(u.originalEvent.target)&&(u.preventDefault(),this._positionDelta=u.point.sub(y),this._pointerdownPos=u.point,this._state="pending",m.on("mousemove",this._onMove),m.on("touchmove",this._onMove),m.once("mouseup",this._onUp),m.once("touchend",this._onUp))}setDraggable(u){this._draggable=!!u;const m=this._map;return m&&(u?(m.on("mousedown",this._addDragHandler),m.on("touchstart",this._addDragHandler)):(m.off("mousedown",this._addDragHandler),m.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(u){return this._rotation=u||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(u){return this._rotationAlignment=u||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment==="auto"||this._rotationAlignment==="horizon"&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(u){return this._pitchAlignment=u||"auto",this._update(),this}getPitchAlignment(){return this._pitchAlignment==="auto"?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(u){return this._occludedOpacity=u||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const Nm={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},N_=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Um(v=new s.Point(0,0),u="bottom"){if(typeof v=="number"){const m=Math.round(Math.sqrt(.5*Math.pow(v,2)));switch(u){case"top":return new s.Point(0,v);case"top-left":return new s.Point(m,m);case"top-right":return new s.Point(-m,m);case"bottom":return new s.Point(0,-v);case"bottom-left":return new s.Point(m,-m);case"bottom-right":return new s.Point(-m,-m);case"left":return new s.Point(v,0);case"right":return new s.Point(-v,0)}return new s.Point(0,0)}return v instanceof s.Point||Array.isArray(v)?s.Point.convert(v):s.Point.convert(v[u]||[0,0])}class Mu{constructor(u){this.jumpTo(u)}getValue(u){if(u<=this._startTime)return this._start;if(u>=this._endTime)return this._end;const m=s.easeCubicInOut((u-this._startTime)/(this._endTime-this._startTime));return this._start*(1-m)+this._end*m}isEasing(u){return u>=this._startTime&&u<=this._endTime}jumpTo(u){this._startTime=-1/0,this._endTime=-1/0,this._start=u,this._end=u}easeTo(u,m,y){this._start=this.getValue(m),this._end=u,this._startTime=m,this._endTime=m+y}}const Vd={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use  + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},Rg={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0},U_={showCompass:!0,showZoom:!0,visualizePitch:!1};class Bd{constructor(u,m,y=!1){this._clickTolerance=10,this.element=m,this.mouseRotate=new Jh({clickTolerance:u.dragRotate._mouseRotate._clickTolerance}),this.map=u,y&&(this.mousePitch=new Rm({clickTolerance:u.dragRotate._mousePitch._clickTolerance})),s.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),m.addEventListener("mousedown",this.mousedown),m.addEventListener("touchstart",this.touchstart,{passive:!1}),m.addEventListener("touchmove",this.touchmove),m.addEventListener("touchend",this.touchend),m.addEventListener("touchcancel",this.reset)}down(u,m){this.mouseRotate.mousedown(u,m),this.mousePitch&&this.mousePitch.mousedown(u,m),B()}move(u,m){const y=this.map,S=this.mouseRotate.mousemoveWindow(u,m),C=S&&S.bearingDelta;if(C&&y.setBearing(y.getBearing()+C),this.mousePitch){const L=this.mousePitch.mousemoveWindow(u,m),O=L&&L.pitchDelta;O&&y.setPitch(y.getPitch()+O)}}off(){const u=this.element;u.removeEventListener("mousedown",this.mousedown),u.removeEventListener("touchstart",this.touchstart,{passive:!1}),u.removeEventListener("touchmove",this.touchmove),u.removeEventListener("touchend",this.touchend),u.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){H(),s.window.removeEventListener("mousemove",this.mousemove),s.window.removeEventListener("mouseup",this.mouseup)}mousedown(u){this.down(s.extend({},u,{ctrlKey:!0,preventDefault:()=>u.preventDefault()}),ie(this.element,u)),s.window.addEventListener("mousemove",this.mousemove),s.window.addEventListener("mouseup",this.mouseup)}mousemove(u){this.move(u,ie(this.element,u))}mouseup(u){this.mouseRotate.mouseupWindow(u),this.mousePitch&&this.mousePitch.mouseupWindow(u),this.offTemp()}touchstart(u){u.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=J(this.element,u.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>u.preventDefault()},this._startPos))}touchmove(u){u.targetTouches.length!==1?this.reset():(this._lastPos=J(this.element,u.targetTouches)[0],this.move({preventDefault:()=>u.preventDefault()},this._lastPos))}touchend(u){u.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const ve={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},V={maxWidth:100,unit:"metric"},oe={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"},Ie={version:s.version,supported:_,setRTLTextPlugin:s.setRTLTextPlugin,getRTLTextPluginStatus:s.getRTLTextPluginStatus,Map:class extends tl{constructor(v){if(s.LivePerformanceUtils.mark(s.PerformanceMarkers.create),(v=s.extend({},Rg,v)).minZoom!=null&&v.maxZoom!=null&&v.minZoom>v.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(v.minPitch!=null&&v.maxPitch!=null&&v.minPitch>v.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(v.minPitch!=null&&v.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(v.maxPitch!=null&&v.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(v.antialias&&s.isSafariWithAntialiasingBug(s.window)&&(v.antialias=!1,s.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new Iu(v.minZoom,v.maxZoom,v.minPitch,v.maxPitch,v.renderWorldCopies),v),this._interactive=v.interactive,this._minTileCacheSize=v.minTileCacheSize,this._maxTileCacheSize=v.maxTileCacheSize,this._failIfMajorPerformanceCaveat=v.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=v.preserveDrawingBuffer,this._antialias=v.antialias,this._useWebGL2=v.useWebGL2,this._trackResize=v.trackResize,this._bearingSnap=v.bearingSnap,this._refreshExpiredTiles=v.refreshExpiredTiles,this._fadeDuration=v.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=v.crossSourceCollisions,this._collectResourceTiming=v.collectResourceTiming,this._optimizeForTerrain=v.optimizeForTerrain,this._language=this._parseLanguage(v.language),this._worldview=v.worldview,this._renderTaskQueue=new zm,this._domRenderTaskQueue=new zm,this._controls=[],this._markers=[],this._popups=[],this._mapId=s.uniqueId(),this._locale=s.extend({},Vd,v.locale),this._clickTolerance=v.clickTolerance,this._cooperativeGestures=v.cooperativeGestures,this._performanceMetricsCollection=v.performanceMetricsCollection,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new Mu(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._requestManager=new s.RequestManager(v.transformRequest,v.accessToken,v.testMode),this._silenceAuthErrors=!!v.testMode,typeof v.container=="string"){if(this._container=s.window.document.getElementById(v.container),!this._container)throw new Error(`Container '${v.container}' not found.`)}else{if(!(v.container instanceof s.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=v.container}if(this._container.childNodes.length>0&&s.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),v.maxBounds&&this.setMaxBounds(v.maxBounds),s.bindAll(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),s.window!==void 0&&(s.window.addEventListener("online",this._onWindowOnline,!1),s.window.addEventListener("resize",this._onWindowResize,!1),s.window.addEventListener("orientationchange",this._onWindowResize,!1),s.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1),s.window.addEventListener("visibilitychange",this._onVisibilityChange,!1)),this.handlers=new xl(this,v),this._localFontFamily=v.localFontFamily,this._localIdeographFontFamily=v.localIdeographFontFamily,v.style&&this.setStyle(v.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),v.projection&&this.setProjection(v.projection),this._hash=v.hash&&new Id(typeof v.hash=="string"&&v.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:v.center,zoom:v.zoom,bearing:v.bearing,pitch:v.pitch}),v.bounds&&(this.resize(),this.fitBounds(v.bounds,s.extend({},v.fitBoundsOptions,{duration:0})))),this.resize(),v.attributionControl&&this.addControl(new Tn({customAttribution:v.customAttribution})),this._logoControl=new Fm,this.addControl(this._logoControl,v.logoPosition),this.on("style.load",(()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)})),this.on("data",(u=>{this._update(u.dataType==="style"),this.fire(new s.Event(`${u.dataType}data`,u))})),this.on("dataloading",(u=>{this.fire(new s.Event(`${u.dataType}dataloading`,u))}))}_getMapId(){return this._mapId}addControl(v,u){if(u===void 0&&(u=v.getDefaultPosition?v.getDefaultPosition():"top-right"),!v||!v.onAdd)return this.fire(new s.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const m=v.onAdd(this);this._controls.push(v);const y=this._controlPositions[u];return u.indexOf("bottom")!==-1?y.insertBefore(m,y.firstChild):y.appendChild(m),this}removeControl(v){if(!v||!v.onRemove)return this.fire(new s.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const u=this._controls.indexOf(v);return u>-1&&this._controls.splice(u,1),v.onRemove(this),this}hasControl(v){return this._controls.indexOf(v)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(v){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const u=!this._moving;return u&&this.fire(new s.Event("movestart",v)).fire(new s.Event("move",v)),this.fire(new s.Event("resize",v)),u&&this.fire(new s.Event("moveend",v)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(v){return this.transform.setMaxBounds(s.LngLatBounds.convert(v)),this._update()}setMinZoom(v){if((v=v??-2)>=-2&&v<=this.transform.maxZoom)return this.transform.minZoom=v,this._update(),this.getZoom()<v?this.setZoom(v):this.fire(new s.Event("zoomstart")).fire(new s.Event("zoom")).fire(new s.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(v){if((v=v??22)>=this.transform.minZoom)return this.transform.maxZoom=v,this._update(),this.getZoom()>v?this.setZoom(v):this.fire(new s.Event("zoomstart")).fire(new s.Event("zoom")).fire(new s.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(v){if((v=v??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(v>=0&&v<=this.transform.maxPitch)return this.transform.minPitch=v,this._update(),this.getPitch()<v?this.setPitch(v):this.fire(new s.Event("pitchstart")).fire(new s.Event("pitch")).fire(new s.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(v){if((v=v??85)>85)throw new Error("maxPitch must be less than or equal to 85");if(v>=this.transform.minPitch)return this.transform.maxPitch=v,this._update(),this.getPitch()>v?this.setPitch(v):this.fire(new s.Event("pitchstart")).fire(new s.Event("pitch")).fire(new s.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(v){return this.transform.renderWorldCopies=v,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(v){return v==="auto"?s.window.navigator.language:Array.isArray(v)?v.length===0?void 0:v.map((u=>u==="auto"?s.window.navigator.language:u)):v}setLanguage(v){const u=this._parseLanguage(v);if(!this.style||u===this._language)return this;this._language=u,this.style._reloadSources();for(const m of this._controls)m._setLanguage&&m._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(v){return this.style&&v!==this._worldview?(this._worldview=v,this.style._reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return this.transform.projection.name==="globe"}setProjection(v){return this._lazyInitEmptyStyle(),v?typeof v=="string"&&(v={name:v}):v=null,this._useExplicitProjection=!!v,this._prioritizeAndUpdateProjection(v,this.style.stylesheet?this.style.stylesheet.projection:null)}_updateProjectionTransition(){if(this.getProjection().name!=="globe")return;const v=this.transform,u=v.projection.name;let m;u==="globe"&&v.zoom>=s.GLOBE_ZOOM_THRESHOLD_MAX?(v.setMercatorFromTransition(),m=!0):u==="mercator"&&v.zoom<s.GLOBE_ZOOM_THRESHOLD_MAX&&(v.setProjection({name:"globe"}),m=!0),m&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(v,u){return this._updateProjection(v||u||{name:"mercator"})}_updateProjection(v){let u;if(u=v.name==="globe"&&this.transform.zoom>=s.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(v),this.style.applyProjectionUpdate(),u){this.painter.clearBackgroundTiles();for(const m in this.style._sourceCaches)this.style._sourceCaches[m].clearTiles();this._update(!0),this._forceMarkerAndPopupUpdate(!0)}return this}project(v){return this.transform.locationPoint3D(s.LngLat.convert(v))}unproject(v){return this.transform.pointLocation3D(s.Point.convert(v))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(v,u,m){if(v==="mouseenter"||v==="mouseover"){let y=!1;const S=L=>{const O=u.filter((q=>this.getLayer(q))),U=O.length?this.queryRenderedFeatures(L.point,{layers:O}):[];U.length?y||(y=!0,m.call(this,new Cs(v,this,L.originalEvent,{features:U}))):y=!1},C=()=>{y=!1};return{layers:new Set(u),listener:m,delegates:{mousemove:S,mouseout:C}}}if(v==="mouseleave"||v==="mouseout"){let y=!1;const S=L=>{const O=u.filter((U=>this.getLayer(U)));(O.length?this.queryRenderedFeatures(L.point,{layers:O}):[]).length?y=!0:y&&(y=!1,m.call(this,new Cs(v,this,L.originalEvent)))},C=L=>{y&&(y=!1,m.call(this,new Cs(v,this,L.originalEvent)))};return{layers:new Set(u),listener:m,delegates:{mousemove:S,mouseout:C}}}{const y=S=>{const C=u.filter((O=>this.getLayer(O))),L=C.length?this.queryRenderedFeatures(S.point,{layers:C}):[];L.length&&(S.features=L,m.call(this,S),delete S.features)};return{layers:new Set(u),listener:m,delegates:{[v]:y}}}}on(v,u,m){if(m===void 0)return super.on(v,u);Array.isArray(u)||(u=[u]);const y=this._createDelegatedListener(v,u,m);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[v]=this._delegatedListeners[v]||[],this._delegatedListeners[v].push(y);for(const S in y.delegates)this.on(S,y.delegates[S]);return this}once(v,u,m){if(m===void 0)return super.once(v,u);Array.isArray(u)||(u=[u]);const y=this._createDelegatedListener(v,u,m);for(const S in y.delegates)this.once(S,y.delegates[S]);return this}off(v,u,m){if(m===void 0)return super.off(v,u);u=new Set(Array.isArray(u)?u:[u]);const y=(C,L)=>{if(C.size!==L.size)return!1;for(const O of C)if(!L.has(O))return!1;return!0},S=this._delegatedListeners?this._delegatedListeners[v]:void 0;return S&&(C=>{for(let L=0;L<C.length;L++){const O=C[L];if(O.listener===m&&y(O.layers,u)){for(const U in O.delegates)this.off(U,O.delegates[U]);return C.splice(L,1),this}}})(S),this}queryRenderedFeatures(v,u){return this.style?(u!==void 0||v===void 0||v instanceof s.Point||Array.isArray(v)||(u=v,v=void 0),this.style.queryRenderedFeatures(v=v||[[0,0],[this.transform.width,this.transform.height]],u=u||{},this.transform)):[]}querySourceFeatures(v,u){return this.style.querySourceFeatures(v,u)}isPointOnSurface(v){const{name:u}=this.transform.projection;return u!=="globe"&&u!=="mercator"&&s.warnOnce(`${u} projection does not support isPointOnSurface, this API may behave unexpectedly.`),this.transform.isPointOnSurface(s.Point.convert(v))}setStyle(v,u){return(u=s.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},u)).diff!==!1&&u.localIdeographFontFamily===this._localIdeographFontFamily&&u.localFontFamily===this._localFontFamily&&this.style&&v?(this._diffStyle(v,u),this):(this._localIdeographFontFamily=u.localIdeographFontFamily,this._localFontFamily=u.localFontFamily,this._updateStyle(v,u))}_getUIString(v){const u=this._locale[v];if(u==null)throw new Error(`Missing UI string '${v}'`);return u}_updateStyle(v,u){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),v&&(this.style=new Po(this,u||{}),this.style.setEventedParent(this,{style:this.style}),typeof v=="string"?this.style.loadURL(v):this.style.loadJSON(v)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new Po(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(v,u){if(typeof v=="string"){const m=this._requestManager.normalizeStyleURL(v),y=this._requestManager.transformRequest(m,s.ResourceType.Style);s.getJSON(y,((S,C)=>{S?this.fire(new s.ErrorEvent(S)):C&&this._updateDiff(C,u)}))}else typeof v=="object"&&this._updateDiff(v,u)}_updateDiff(v,u){try{this.style.setState(v)&&this._update(!0)}catch(m){s.warnOnce(`Unable to perform style diff: ${m.message||m.error||m}.  Rebuilding the style from scratch.`),this._updateStyle(v,u)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(s.warnOnce("There is no style added to the map."),!1)}addSource(v,u){return this._lazyInitEmptyStyle(),this.style.addSource(v,u),this._update(!0)}isSourceLoaded(v){return!!this.style&&this.style._isSourceCacheLoaded(v)}areTilesLoaded(){const v=this.style&&this.style._sourceCaches;for(const u in v){const m=v[u]._tiles;for(const y in m){const S=m[y];if(S.state!=="loaded"&&S.state!=="errored")return!1}}return!0}addSourceType(v,u,m){this._lazyInitEmptyStyle(),this.style.addSourceType(v,u,m)}removeSource(v){return this.style.removeSource(v),this._updateTerrain(),this._update(!0)}getSource(v){return this.style.getSource(v)}addImage(v,u,{pixelRatio:m=1,sdf:y=!1,stretchX:S,stretchY:C,content:L}={}){if(this._lazyInitEmptyStyle(),u instanceof s.window.HTMLImageElement||s.window.ImageBitmap&&u instanceof s.window.ImageBitmap){const{width:O,height:U,data:q}=s.exported.getImageData(u);this.style.addImage(v,{data:new s.RGBAImage({width:O,height:U},q),pixelRatio:m,stretchX:S,stretchY:C,content:L,sdf:y,version:0})}else if(u.width===void 0||u.height===void 0)this.fire(new s.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:O,height:U}=u,q=u;this.style.addImage(v,{data:new s.RGBAImage({width:O,height:U},new Uint8Array(q.data)),pixelRatio:m,stretchX:S,stretchY:C,content:L,sdf:y,version:0,userImage:q}),q.onAdd&&q.onAdd(this,v)}}updateImage(v,u){const m=this.style.getImage(v);if(!m)return void this.fire(new s.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const y=u instanceof s.window.HTMLImageElement||s.window.ImageBitmap&&u instanceof s.window.ImageBitmap?s.exported.getImageData(u):u,{width:S,height:C}=y;S!==void 0&&C!==void 0?S===m.data.width&&C===m.data.height?(m.data.replace(y.data,!(u instanceof s.window.HTMLImageElement||s.window.ImageBitmap&&u instanceof s.window.ImageBitmap)),this.style.updateImage(v,m)):this.fire(new s.ErrorEvent(new Error(`The width and height of the updated image (${S}, ${C})
                must be that same as the previous version of the image
                (${m.data.width}, ${m.data.height})`))):this.fire(new s.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(v){return v?!!this.style.getImage(v):(this.fire(new s.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(v){this.style.removeImage(v)}loadImage(v,u){s.getImage(this._requestManager.transformRequest(v,s.ResourceType.Image),((m,y)=>{u(m,y instanceof s.window.HTMLImageElement?s.exported.getImageData(y):y)}))}listImages(){return this.style.listImages()}addLayer(v,u){return this._lazyInitEmptyStyle(),this.style.addLayer(v,u),this._update(!0)}moveLayer(v,u){return this.style.moveLayer(v,u),this._update(!0)}removeLayer(v){return this.style.removeLayer(v),this._update(!0)}getLayer(v){return this.style.getLayer(v)}setLayerZoomRange(v,u,m){return this.style.setLayerZoomRange(v,u,m),this._update(!0)}setFilter(v,u,m={}){return this.style.setFilter(v,u,m),this._update(!0)}getFilter(v){return this.style.getFilter(v)}setPaintProperty(v,u,m,y={}){return this.style.setPaintProperty(v,u,m,y),this._update(!0)}getPaintProperty(v,u){return this.style.getPaintProperty(v,u)}setLayoutProperty(v,u,m,y={}){return this.style.setLayoutProperty(v,u,m,y),this._update(!0)}getLayoutProperty(v,u){return this.style.getLayoutProperty(v,u)}setLight(v,u={}){return this._lazyInitEmptyStyle(),this.style.setLight(v,u),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(v){return this._lazyInitEmptyStyle(),!v&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(v),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(v){return this._lazyInitEmptyStyle(),this.style.setFog(v),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(v){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(s.LngLat.convert(v),this.transform):0}setFeatureState(v,u){return this.style.setFeatureState(v,u),this._update()}removeFeatureState(v,u){return this.style.removeFeatureState(v,u),this._update()}getFeatureState(v){return this.style.getFeatureState(v)}_updateContainerDimensions(){if(!this._container)return;const v=this._container.getBoundingClientRect().width||400,u=this._container.getBoundingClientRect().height||300;let m,y,S,C=this._container;for(;C&&(!y||!S);){const L=s.window.getComputedStyle(C).transform;L&&L!=="none"&&(m=L.match(/matrix.*\((.+)\)/)[1].split(", "),m[0]&&m[0]!=="0"&&m[0]!=="1"&&(y=m[0]),m[3]&&m[3]!=="0"&&m[3]!=="1"&&(S=m[3])),C=C.parentElement}this._containerWidth=y?Math.abs(v/y):v,this._containerHeight=S?Math.abs(u/S):u}_detectMissingCSS(){s.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&s.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const v=this._container;v.classList.add("mapboxgl-map"),(this._missingCSSCanary=k("div","mapboxgl-canary",v)).style.visibility="hidden",this._detectMissingCSS();const u=this._canvasContainer=k("div","mapboxgl-canvas-container",v);this._interactive&&u.classList.add("mapboxgl-interactive"),this._canvas=k("canvas","mapboxgl-canvas",u),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const m=this._controlContainer=k("div","mapboxgl-control-container",v),y=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((S=>{y[S]=k("div",`mapboxgl-ctrl-${S}`,m)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(v,u){const m=s.exported.devicePixelRatio||1;this._canvas.width=m*Math.ceil(v),this._canvas.height=m*Math.ceil(u),this._canvas.style.width=`${v}px`,this._canvas.style.height=`${u}px`}_addMarker(v){this._markers.push(v)}_removeMarker(v){const u=this._markers.indexOf(v);u!==-1&&this._markers.splice(u,1)}_addPopup(v){this._popups.push(v)}_removePopup(v){const u=this._popups.indexOf(v);u!==-1&&this._popups.splice(u,1)}_setupPainter(){const v=s.extend({},_.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),u=this._useWebGL2&&this._canvas.getContext("webgl2",v),m=u||this._canvas.getContext("webgl",v)||this._canvas.getContext("experimental-webgl",v);m?(this._useWebGL2&&!u&&s.warnOnce("Failed to create WebGL 2 context. Using WebGL 1."),s.storeAuthState(m,!0),this.painter=new Cu(m,this.transform,!!u),this.on("data",(y=>{y.dataType==="source"&&this.painter.setTileLoadedFlag(!0)})),s.exported$1.testSupport(m)):this.fire(new s.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(v){v.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new s.Event("webglcontextlost",{originalEvent:v}))}_contextRestored(v){this._setupPainter(),this.resize(),this._update(),this.fire(new s.Event("webglcontextrestored",{originalEvent:v}))}_onMapScroll(v){if(v.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(v){return this.style?(this._styleDirty=this._styleDirty||v,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(v){return this._update(),this._renderTaskQueue.add(v)}_cancelRenderFrame(v){this._renderTaskQueue.remove(v)}_requestDomTask(v){!this.loaded()||this.loaded()&&!this.isMoving()?v():this._domRenderTaskQueue.add(v)}_render(v){let u;const m=this.painter.context.extTimerQuery,y=s.exported.now();if(this.listens("gpu-timing-frame")&&(u=m.createQueryEXT(),m.beginQueryEXT(m.TIME_ELAPSED_EXT,u)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],s.window.performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],s.window.performance.now())),this._renderTaskQueue.run(v),this._domRenderTaskQueue.run(v),this._removed)return;this._updateProjectionTransition();const S=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const O=this.transform.zoom,U=this.transform.pitch,q=s.exported.now(),K=new s.EvaluationParameters(O,{now:q,fadeDuration:S,pitch:U,transition:this.style.getTransition()});this.style.update(K)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let C=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),C=this._updateAverageElevation(y),this.style._updateSources(this.transform),this._forceMarkerAndPopupUpdate()):C=this._updateAverageElevation(y),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,S,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:S,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new s.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new s.Event("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),u){const O=s.exported.now()-y;m.endQueryEXT(m.TIME_ELAPSED_EXT,u),setTimeout((()=>{const U=m.getQueryObjectEXT(u,m.QUERY_RESULT_EXT)/1e6;m.deleteQueryEXT(u),this.fire(new s.Event("gpu-timing-frame",{cpuTime:O,gpuTime:U})),s.window.performance.mark("frame-gpu",{startTime:y,detail:{gpuTime:U}})}),50)}if(this.listens("gpu-timing-layer")){const O=this.painter.collectGpuTimers();setTimeout((()=>{const U=this.painter.queryGpuTimers(O);this.fire(new s.Event("gpu-timing-layer",{layerTimes:U}))}),50)}if(this.listens("gpu-timing-deferred-render")){const O=this.painter.collectDeferredRenderGpuQueries();setTimeout((()=>{const U=this.painter.queryGpuTimeDeferredRender(O);this.fire(new s.Event("gpu-timing-deferred-render",{gpuTime:U}))}),50)}const L=this._sourcesDirty||this._styleDirty||this._placementDirty||C;if(L||this._repaint)this.triggerRepaint();else{const O=!this.isMoving()&&this.loaded();if(O&&(C=this._updateAverageElevation(y,!0)),C)this.triggerRepaint();else if(this._triggerFrame(!1),O&&(this.fire(new s.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const U=this._calculateSpeedIndex();this.fire(new s.Event("speedindexcompleted",{speedIndex:U})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||L||(this._fullyLoaded=!0,s.LivePerformanceUtils.mark(s.PerformanceMarkers.fullLoad),this._performanceMetricsCollection&&s.postPerformanceEvent(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(v){for(const u of this._markers)v&&!this.getRenderWorldCopies()&&(u._lngLat=u._lngLat.wrap()),u._update();for(const u of this._popups)!v||this.getRenderWorldCopies()||u._trackPointer||(u._lngLat=u._lngLat.wrap()),u._update()}_updateAverageElevation(v,u=!1){const m=y=>(this.transform.averageElevation=y,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&m(0);if((u||v-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(v)){const y=this.transform.averageElevation;let S=this.transform.sampleAverageElevation(),C=!1;this.transform.elevation&&(C=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(S)?S=0:this._averageElevationLastSampledAt=v;const L=Math.abs(y-S);if(L>1){if(this._isInitialLoad||C)return this._averageElevation.jumpTo(S),m(S);this._averageElevation.easeTo(S,v,300)}else if(L>1e-4)return this._averageElevation.jumpTo(S),m(S)}return!!this._averageElevation.isEasing(v)&&m(this._averageElevation.getValue(v))}_authenticate(){s.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,(v=>{if(v&&(v.message===s.AUTH_ERR_MSG||v.status===401)){const u=this.painter.context.gl;s.storeAuthState(u,!1),this._logoControl instanceof Fm&&this._logoControl._updateLogo(),u&&u.clear(u.DEPTH_BUFFER_BIT|u.COLOR_BUFFER_BIT|u.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new s.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}})),s.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,(()=>{}))}_updateTerrain(){const v=this._isDragging();this.painter.updateTerrain(this.style,v)}_calculateSpeedIndex(){const v=this.painter.canvasCopy(),u=this.painter.getCanvasCopiesAndTimestamps();u.timeStamps.push(performance.now());const m=this.painter.context.gl,y=m.createFramebuffer();function S(C){m.framebufferTexture2D(m.FRAMEBUFFER,m.COLOR_ATTACHMENT0,m.TEXTURE_2D,C,0);const L=new Uint8Array(m.drawingBufferWidth*m.drawingBufferHeight*4);return m.readPixels(0,0,m.drawingBufferWidth,m.drawingBufferHeight,m.RGBA,m.UNSIGNED_BYTE,L),L}return m.bindFramebuffer(m.FRAMEBUFFER,y),this._canvasPixelComparison(S(v),u.canvasCopies.map(S),u.timeStamps)}_canvasPixelComparison(v,u,m){let y=m[1]-m[0];const S=v.length/4;for(let C=0;C<u.length;C++){const L=u[C];let O=0;for(let U=0;U<L.length;U+=4)L[U]===v[U]&&L[U+1]===v[U+1]&&L[U+2]===v[U+2]&&L[U+3]===v[U+3]&&(O+=1);y+=(m[C+2]-m[C+1])*(1-O/S)}return y}remove(){this._hash&&this._hash.remove();for(const u of this._controls)u.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),s.window!==void 0&&(s.window.removeEventListener("resize",this._onWindowResize,!1),s.window.removeEventListener("orientationchange",this._onWindowResize,!1),s.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),s.window.removeEventListener("online",this._onWindowOnline,!1),s.window.removeEventListener("visibilitychange",this._onVisibilityChange,!1));const v=this.painter.context.gl.getExtension("WEBGL_lose_context");v&&v.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),s.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new s.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(v){this._renderNextFrame=this._renderNextFrame||v,this.style&&!this._frame&&(this._frame=s.exported.frame((u=>{const m=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,m&&this._render(u)})))}_preloadTiles(v){const u=this.style?Object.values(this.style._sourceCaches):[];return s.asyncAll(u,((m,y)=>m._preloadTiles(v,y)),(()=>{this.triggerRepaint()})),this}_onWindowOnline(){this._update()}_onWindowResize(v){this._trackResize&&this.resize({originalEvent:v})._update()}_onVisibilityChange(){s.window.document.visibilityState==="hidden"&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(v){this._showTileBoundaries!==v&&(this._showTileBoundaries=v,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(v){this._showTerrainWireframe!==v&&(this._showTerrainWireframe=v,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(v){this._speedIndexTiming!==v&&(this._speedIndexTiming=v,this._update())}get showPadding(){return!!this._showPadding}set showPadding(v){this._showPadding!==v&&(this._showPadding=v,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(v){this._showCollisionBoxes!==v&&(this._showCollisionBoxes=v,v?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(v){this._showOverdrawInspector!==v&&(this._showOverdrawInspector=v,this._update())}get repaint(){return!!this._repaint}set repaint(v){this._repaint!==v&&(this._repaint=v,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(v){this._vertices=v,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(v){this._showTileAABBs!==v&&(this._showTileAABBs=v,v&&this._update())}_setCacheLimits(v,u){s.setCacheLimits(v,u)}get version(){return s.version}},NavigationControl:class{constructor(v){this.options=s.extend({},U_,v),this._container=k("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",(u=>u.preventDefault())),this.options.showZoom&&(s.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",(u=>{this._map&&this._map.zoomIn({},{originalEvent:u})})),k("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",(u=>{this._map&&this._map.zoomOut({},{originalEvent:u})})),k("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(s.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",(u=>{const m=this._map;m&&(this.options.visualizePitch?m.resetNorthPitch({},{originalEvent:u}):m.resetNorth({},{originalEvent:u}))})),this._compassIcon=k("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const v=this._map;if(!v)return;const u=v.getZoom(),m=u===v.getMaxZoom(),y=u===v.getMinZoom();this._zoomInButton.disabled=m,this._zoomOutButton.disabled=y,this._zoomInButton.setAttribute("aria-disabled",m.toString()),this._zoomOutButton.setAttribute("aria-disabled",y.toString())}_rotateCompassArrow(){const v=this._map;if(!v)return;const u=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(v.transform.pitch*(Math.PI/180)),.5)}) rotateX(${v.transform.pitch}deg) rotateZ(${v.transform.angle*(180/Math.PI)}deg)`:`rotate(${v.transform.angle*(180/Math.PI)}deg)`;v._requestDomTask((()=>{this._compassIcon&&(this._compassIcon.style.transform=u)}))}onAdd(v){return this._map=v,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),v.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&v.on("pitch",this._rotateCompassArrow),v.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Bd(v,this._compass,this.options.visualizePitch)),this._container}onRemove(){const v=this._map;v&&(this._container.remove(),this.options.showZoom&&v.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&v.off("pitch",this._rotateCompassArrow),v.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(v,u){const m=k("button",v,this._container);return m.type="button",m.addEventListener("click",u),m}_setButtonTitle(v,u){if(!this._map)return;const m=this._map._getUIString(`NavigationControl.${u}`);v.setAttribute("aria-label",m),v.firstElementChild&&v.firstElementChild.setAttribute("title",m)}},GeolocateControl:class extends s.Evented{constructor(v){super(),this.options=s.extend({geolocation:s.window.navigator.geolocation},ve,v),s.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=Au(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(v){return this._map=v,this._container=k("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(v){const u=(m=!!this.options.geolocation)=>{this._supportsGeolocation=m,v(m)};this._supportsGeolocation!==void 0?v(this._supportsGeolocation):s.window.navigator.permissions!==void 0?s.window.navigator.permissions.query({name:"geolocation"}).then((m=>u(m.state!=="denied"))).catch((()=>u())):u()}_isOutOfMapMaxBounds(v){const u=this._map.getMaxBounds(),m=v.coords;return!!u&&(m.longitude<u.getWest()||m.longitude>u.getEast()||m.latitude<u.getSouth()||m.latitude>u.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(v){if(this._map){if(this._isOutOfMapMaxBounds(v))return this._setErrorState(),this.fire(new s.Event("outofmaxbounds",v)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=v,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(v),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(v),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new s.Event("geolocate",v)),this._finish()}}_updateCamera(v){const u=new s.LngLat(v.coords.longitude,v.coords.latitude),m=v.coords.accuracy,y=this._map.getBearing(),S=s.extend({bearing:y},this.options.fitBoundsOptions);this._map.fitBounds(u.toBounds(m),S,{geolocateSource:!0})}_updateMarker(v){if(v){const u=new s.LngLat(v.coords.longitude,v.coords.latitude);this._accuracyCircleMarker.setLngLat(u).addTo(this._map),this._userLocationDotMarker.setLngLat(u).addTo(this._map),this._accuracy=v.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const v=this._map.transform,u=s.mercatorZfromAltitude(1,v._center.lat)*v.worldSize,m=Math.ceil(2*this._accuracy*u);this._circleElement.style.width=`${m}px`,this._circleElement.style.height=`${m}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(v){if(this._map){if(this.options.trackUserLocation)if(v.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",u),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",u),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(v.code===3&&this._noTimeout)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new s.Event("error",v)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(v){if(this._map!==void 0){if(this._container.addEventListener("contextmenu",(u=>u.preventDefault())),this._geolocateButton=k("button","mapboxgl-ctrl-geolocate",this._container),k("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",v===!1){s.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",u),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",u)}else{const u=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",u),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",u)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=k("div","mapboxgl-user-location"),this._dotElement.appendChild(k("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(k("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new _n({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=k("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new _n({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(u=>{u.geolocateSource||this._watchState!=="ACTIVE_LOCK"||u.originalEvent&&u.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new s.Event("trackuserlocationend")))}))}}_onDeviceOrientation(v){this._userLocationDotMarker&&(v.webkitCompassHeading?this._heading=v.webkitCompassHeading:v.absolute===!0&&(this._heading=-1*v.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return s.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new s.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new s.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new s.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let v;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(v={maximumAge:6e5,timeout:0},this._noTimeout=!0):(v=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,v),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const v=()=>{s.window.addEventListener("ondeviceorientationabsolute"in s.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};s.window.DeviceMotionEvent!==void 0&&typeof s.window.DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then((u=>{u==="granted"&&v()})).catch(console.error):v()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),s.window.removeEventListener("deviceorientation",this._onDeviceOrientation),s.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Tn,ScaleControl:class{constructor(v){this.options=s.extend({},V,v),this._isNumberFormatSupported=(function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch{return!1}})(),s.bindAll(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const v=this.options.maxWidth||100,u=this._map,m=u._containerHeight/2,y=u._containerWidth/2-v/2,S=u.unproject([y,m]),C=u.unproject([y+v,m]),L=S.distanceTo(C);if(this.options.unit==="imperial"){const O=3.2808*L;O>5280?this._setScale(v,O/5280,"mile"):this._setScale(v,O,"foot")}else this.options.unit==="nautical"?this._setScale(v,L/1852,"nautical-mile"):L>=1e3?this._setScale(v,L/1e3,"kilometer"):this._setScale(v,L,"meter")}_setScale(v,u,m){this._map._requestDomTask((()=>{const y=(function(C){const L=Math.pow(10,`${Math.floor(C)}`.length-1);let O=C/L;return O=O>=10?10:O>=5?5:O>=3?3:O>=2?2:O>=1?1:(function(U){const q=Math.pow(10,Math.ceil(-Math.log(U)/Math.LN10));return Math.round(U*q)/q})(O),L*O})(u),S=y/u;this._container.innerHTML=this._isNumberFormatSupported&&m!=="nautical-mile"?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:m}).format(y):`${y}&nbsp;${oe[m]}`,this._container.style.width=v*S+"px"}))}onAdd(v){return this._map=v,this._language=v.getLanguage(),this._container=k("div","mapboxgl-ctrl mapboxgl-ctrl-scale",v.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(v){this._language=v,this._update()}setUnit(v){this.options.unit=v,this._update()}},FullscreenControl:class{constructor(v){this._fullscreen=!1,v&&v.container&&(v.container instanceof s.window.HTMLElement?this._container=v.container:s.warnOnce("Full screen control 'container' must be a DOM element.")),s.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in s.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in s.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(v){return this._map=v,this._container||(this._container=this._map.getContainer()),this._controlContainer=k("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",s.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,s.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!s.window.document.fullscreenEnabled&&!s.window.document.webkitFullscreenEnabled)}_setupUI(){const v=this._fullscreenButton=k("button","mapboxgl-ctrl-fullscreen",this._controlContainer);k("span","mapboxgl-ctrl-icon",v).setAttribute("aria-hidden","true"),v.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),s.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const v=this._getTitle();this._fullscreenButton.setAttribute("aria-label",v),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",v)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(s.window.document.fullscreenElement||s.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?s.window.document.exitFullscreen?s.window.document.exitFullscreen():s.window.document.webkitCancelFullScreen&&s.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends s.Evented{constructor(v){super(),this.options=s.extend(Object.create(Nm),v),s.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(v&&v.className?v.className.trim().split(/\s+/):[])}addTo(v){return this._map&&this.remove(),this._map=v,this.options.closeOnClick&&v.on("preclick",this._onClose),this.options.closeOnMove&&v.on("move",this._onClose),v.on("remove",this.remove),this._update(),v._addPopup(this),this._focusFirstElement(),this._trackPointer?(v.on("mousemove",this._onMouseEvent),v.on("mouseup",this._onMouseEvent),v._canvasContainer.classList.add("mapboxgl-track-pointer")):v.on("move",this._update),this.fire(new s.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const v=this._map;return v&&(v.off("move",this._update),v.off("move",this._onClose),v.off("preclick",this._onClose),v.off("click",this._onClose),v.off("remove",this.remove),v.off("mousemove",this._onMouseEvent),v.off("mouseup",this._onMouseEvent),v.off("drag",this._onMouseEvent),v._canvasContainer&&v._canvasContainer.classList.remove("mapboxgl-track-pointer"),v._removePopup(this),this._map=void 0),this.fire(new s.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(v){this._lngLat=s.LngLat.convert(v),this._pos=null,this._trackPointer=!1,this._update();const u=this._map;return u&&(u.on("move",this._update),u.off("mousemove",this._onMouseEvent),u._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const v=this._map;return v&&(v.off("move",this._update),v.on("mousemove",this._onMouseEvent),v.on("drag",this._onMouseEvent),v._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(v){return this.setDOMContent(s.window.document.createTextNode(v))}setHTML(v){const u=s.window.document.createDocumentFragment(),m=s.window.document.createElement("body");let y;for(m.innerHTML=v;y=m.firstChild,y;)u.appendChild(y);return this.setDOMContent(u)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(v){return this.options.maxWidth=v,this._update(),this}setDOMContent(v){let u=this._content;if(u)for(;u.hasChildNodes();)u.firstChild&&u.removeChild(u.firstChild);else u=this._content=k("div","mapboxgl-popup-content",this._container||void 0);if(u.appendChild(v),this.options.closeButton){const m=this._closeButton=k("button","mapboxgl-popup-close-button",u);m.type="button",m.setAttribute("aria-label","Close popup"),m.setAttribute("aria-hidden","true"),m.innerHTML="&#215;",m.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(v){return this._classList.add(v),this._updateClassList(),this}removeClassName(v){return this._classList.delete(v),this._updateClassList(),this}setOffset(v){return this.options.offset=v,this._update(),this}toggleClassName(v){let u;return this._classList.delete(v)?u=!1:(this._classList.add(v),u=!0),this._updateClassList(),u}_onMouseEvent(v){this._update(v.point)}_getAnchor(v){if(this.options.anchor)return this.options.anchor;const u=this._map,m=this._container,y=this._pos;if(!u||!m||!y)return"bottom";const S=m.offsetWidth,C=m.offsetHeight,L=y.x<S/2,O=y.x>u.transform.width-S/2;if(y.y+v<C)return L?"top-left":O?"top-right":"top";if(y.y>u.transform.height-C){if(L)return"bottom-left";if(O)return"bottom-right"}return L?"left":O?"right":"bottom"}_updateClassList(){const v=this._container;if(!v)return;const u=[...this._classList];u.push("mapboxgl-popup"),this._anchor&&u.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&u.push("mapboxgl-popup-track-pointer"),v.className=u.join(" ")}_update(v){const u=this._map,m=this._content;if(!u||!this._lngLat&&!this._trackPointer||!m)return;let y=this._container;if(y||(y=this._container=k("div","mapboxgl-popup",u.getContainer()),this._tip=k("div","mapboxgl-popup-tip",y),y.appendChild(m)),this.options.maxWidth&&y.style.maxWidth!==this.options.maxWidth&&(y.style.maxWidth=this.options.maxWidth),u.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Pu(this._lngLat,this._pos,u.transform)),!this._trackPointer||v){const S=this._pos=this._trackPointer&&v?v:u.project(this._lngLat),C=Um(this.options.offset),L=this._anchor=this._getAnchor(C.y),O=Um(this.options.offset,L),U=S.add(O).round();u._requestDomTask((()=>{this._container&&L&&(this._container.style.transform=`${Zc[L]} translate(${U.x}px,${U.y}px)`)}))}if(!this._marker&&u._showingGlobe()){const S=s.isLngLatBehindGlobe(u.transform,this._lngLat)?0:1;this._setOpacity(S)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const v=this._container.querySelector(N_);v&&v.focus()}_onClose(){this.remove()}_setOpacity(v){this._container&&(this._container.style.opacity=`${v}`),this._content&&(this._content.style.pointerEvents=v?"auto":"none")}},Marker:_n,Style:Po,LngLat:s.LngLat,LngLatBounds:s.LngLatBounds,Point:s.Point,MercatorCoordinate:s.MercatorCoordinate,FreeCameraOptions:bl,Evented:s.Evented,config:s.config,prewarm:function(){jr().acquire(jo)},clearPrewarmedResources:function(){const v=Lr;v&&(v.isPreloaded()&&v.numActive()===1?(v.release(jo),Lr=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return s.config.ACCESS_TOKEN},set accessToken(v){s.config.ACCESS_TOKEN=v},get baseApiUrl(){return s.config.API_URL},set baseApiUrl(v){s.config.API_URL=v},get workerCount(){return rs.workerCount},set workerCount(v){rs.workerCount=v},get maxParallelImageRequests(){return s.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(v){s.config.MAX_PARALLEL_IMAGE_REQUESTS=v},clearStorage(v){s.clearTileCache(v)},workerUrl:"",workerClass:null,setNow:s.exported.setNow,restoreNow:s.exported.restoreNow};return Ie}));var h=a;return h}))})(Dw)),Dw.exports}var nne=tne();const bp=Fz(nne);function aa(e,t){let n;function i(){n=zv(),n.run(()=>t.length?t(()=>{n?.stop(),i()}):t())}qt(e,r=>{r&&!n?i():r||(n?.stop(),n=void 0)},{immediate:!0}),so(()=>{n?.stop()})}function f6(e,t){t=Array.isArray(t)?t.slice(0,-1).map(n=>`'${n}'`).join(", ")+` or '${t.at(-1)}'`:`'${t}'`}const Gi=typeof window<"u",tP=Gi&&"IntersectionObserver"in window,ine=Gi&&("ontouchstart"in window||window.navigator.maxTouchPoints>0),PV=Gi&&"EyeDropper"in window,nP=Gi&&"matchMedia"in window&&typeof window.matchMedia=="function",ud=()=>nP&&window.matchMedia("(prefers-reduced-motion: reduce)").matches;function MV(e,t,n){rne(e,t),t.set(e,n)}function rne(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function DV(e,t,n){return e.set(m6(e,t),n),n}function Xd(e,t){return e.get(m6(e,t))}function m6(e,t,n){if(typeof e=="function"?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}function p6(e,t,n){const i=t.length-1;if(i<0)return e===void 0?n:e;for(let r=0;r<i;r++){if(e==null)return n;e=e[t[r]]}return e==null||e[t[i]]===void 0?n:e[t[i]]}function Hp(e,t,n){return e==null||!t||typeof t!="string"?n:e[t]!==void 0?e[t]:(t=t.replace(/\[(\w+)\]/g,".$1"),t=t.replace(/^\./,""),p6(e,t.split("."),n))}function Ms(e,t,n){if(t===!0)return e===void 0?n:e;if(t==null||typeof t=="boolean")return n;if(e!==Object(e)){if(typeof t!="function")return n;const r=t(e,n);return typeof r>"u"?n:r}if(typeof t=="string")return Hp(e,t,n);if(Array.isArray(t))return p6(e,t,n);if(typeof t!="function")return n;const i=t(e,n);return typeof i>"u"?n:i}function rc(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return Array.from({length:e},(n,i)=>t+i)}function pn(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"px";if(e==null||e==="")return;const n=Number(e);return isNaN(n)?String(e):isFinite(n)?`${n}${t}`:void 0}function Ub(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}function Pk(e){let t;return e!==null&&typeof e=="object"&&((t=Object.getPrototypeOf(e))===Object.prototype||t===null)}function iP(e){if(e&&"$el"in e){const t=e.$el;return t?.nodeType===Node.TEXT_NODE?t.nextElementSibling:t}return e}const Mk=Object.freeze({enter:"Enter",tab:"Tab",delete:"Delete",esc:"Escape",space:"Space",up:"ArrowUp",down:"ArrowDown",left:"ArrowLeft",right:"ArrowRight",end:"End",home:"Home",del:"Delete",backspace:"Backspace",insert:"Insert",pageup:"PageUp",pagedown:"PageDown",shift:"Shift"});function g6(e){return Object.keys(e)}function Tp(e,t){return t.every(n=>e.hasOwnProperty(n))}function Ol(e,t){const n={};for(const i of t)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}function Dk(e,t,n){const i=Object.create(null),r=Object.create(null);for(const a in e)t.some(l=>l instanceof RegExp?l.test(a):l===a)?i[a]=e[a]:r[a]=e[a];return[i,r]}function dr(e,t){const n={...e};return t.forEach(i=>delete n[i]),n}const v6=/^on[^a-z]/,rP=e=>v6.test(e),sne=["onAfterscriptexecute","onAnimationcancel","onAnimationend","onAnimationiteration","onAnimationstart","onAuxclick","onBeforeinput","onBeforescriptexecute","onChange","onClick","onCompositionend","onCompositionstart","onCompositionupdate","onContextmenu","onCopy","onCut","onDblclick","onFocusin","onFocusout","onFullscreenchange","onFullscreenerror","onGesturechange","onGestureend","onGesturestart","onGotpointercapture","onInput","onKeydown","onKeypress","onKeyup","onLostpointercapture","onMousedown","onMousemove","onMouseout","onMouseover","onMouseup","onMousewheel","onPaste","onPointercancel","onPointerdown","onPointerenter","onPointerleave","onPointermove","onPointerout","onPointerover","onPointerup","onReset","onSelect","onSubmit","onTouchcancel","onTouchend","onTouchmove","onTouchstart","onTransitioncancel","onTransitionend","onTransitionrun","onTransitionstart","onWheel"],one=["ArrowUp","ArrowDown","ArrowRight","ArrowLeft","Enter","Escape","Tab"," "];function ane(e){return e.isComposing&&one.includes(e.key)}function pm(e){const[t,n]=Dk(e,[v6]),i=dr(t,sne),[r,a]=Dk(n,["class","style","id",/^data-/]);return Object.assign(r,t),Object.assign(a,i),[r,a]}function qr(e){return e==null?[]:Array.isArray(e)?e:[e]}function _6(e,t){let n=0;const i=function(){for(var r=arguments.length,a=new Array(r),l=0;l<r;l++)a[l]=arguments[l];clearTimeout(n),n=setTimeout(()=>e(...a),xi(t))};return i.clear=()=>{clearTimeout(n)},i.immediate=e,i}function Er(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;return Math.max(t,Math.min(n,e))}function LV(e){const t=e.toString().trim();return t.includes(".")?t.length-t.indexOf(".")-1:0}function RV(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"0";return e+n.repeat(Math.max(0,t-e.length))}function OV(e,t){return(arguments.length>2&&arguments[2]!==void 0?arguments[2]:"0").repeat(Math.max(0,t-e.length))+e}function lne(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const n=[];let i=0;for(;i<e.length;)n.push(e.substr(i,t)),i+=t;return n}function VV(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;if(e<t)return`${e} B`;const n=t===1024?["Ki","Mi","Gi"]:["k","M","G"];let i=-1;for(;Math.abs(e)>=t&&i<n.length-1;)e/=t,++i;return`${e.toFixed(1)} ${n[i]}B`}function Ba(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const i={};for(const r in e)i[r]=e[r];for(const r in t){const a=e[r],l=t[r];if(Pk(a)&&Pk(l)){i[r]=Ba(a,l,n);continue}if(n&&Array.isArray(a)&&Array.isArray(l)){i[r]=n(a,l);continue}i[r]=l}return i}function y6(e){return e.map(t=>t.type===un?y6(t.children):t).flat()}function Dp(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";if(Dp.cache.has(e))return Dp.cache.get(e);const t=e.replace(/[^a-z]/gi,"-").replace(/\B([A-Z])/g,"-$1").toLowerCase();return Dp.cache.set(e,t),t}Dp.cache=new Map;function yv(e,t){if(!t||typeof t!="object")return[];if(Array.isArray(t))return t.map(n=>yv(e,n)).flat(1);if(t.suspense)return yv(e,t.ssContent);if(Array.isArray(t.children))return t.children.map(n=>yv(e,n)).flat(1);if(t.component){if(Object.getOwnPropertySymbols(t.component.provides).includes(e))return[t.component];if(t.component.subTree)return yv(e,t.component.subTree).flat(1)}return[]}var sv=new WeakMap,ap=new WeakMap;class b6{constructor(t){MV(this,sv,[]),MV(this,ap,0),this.size=t}get isFull(){return Xd(sv,this).length===this.size}push(t){Xd(sv,this)[Xd(ap,this)]=t,DV(ap,this,(Xd(ap,this)+1)%this.size)}values(){return Xd(sv,this).slice(Xd(ap,this)).concat(Xd(sv,this).slice(0,Xd(ap,this)))}clear(){Xd(sv,this).length=0,DV(ap,this,0)}}function cne(e){return"touches"in e?{clientX:e.touches[0].clientX,clientY:e.touches[0].clientY}:{clientX:e.clientX,clientY:e.clientY}}function sP(e){const t=io({});Ur(()=>{const i=e();for(const r in i)t[r]=i[r]},{flush:"sync"});const n={};for(const i in t)n[i]=Ne(()=>t[i]);return n}function k1(e,t){return e.includes(t)}function x6(e){return e[2].toLowerCase()+e.slice(3)}const Fo=()=>[Function,Array];function BV(e,t){return t="on"+md(t),!!(e[t]||e[`${t}Once`]||e[`${t}Capture`]||e[`${t}OnceCapture`]||e[`${t}CaptureOnce`])}function A0(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(Array.isArray(e))for(const r of e)r(...n);else typeof e=="function"&&e(...n)}function i_(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const n=["button","[href]",'input:not([type="hidden"])',"select","textarea","details:not(:has(> summary))","details > summary","[tabindex]",'[contenteditable]:not([contenteditable="false"])',"audio[controls]","video[controls]"].map(r=>`${r}${t?':not([tabindex="-1"])':""}:not([disabled], [inert])`).join(", ");let i;try{i=[...e.querySelectorAll(n)]}catch{return[]}return i.filter(r=>!r.closest("[inert]")).filter(r=>!!r.offsetParent||r.getClientRects().length>0).filter(r=>!r.parentElement?.closest("details:not([open])")||r.tagName==="SUMMARY"&&r.parentElement?.tagName==="DETAILS")}function w6(e,t,n){let i,r=e.indexOf(document.activeElement);const a=t==="next"?1:-1;do r+=a,i=e[r];while((!i||i.offsetParent==null||!(n?.(i)??!0))&&r<e.length&&r>=0);return i}function Lp(e,t){const n=i_(e);if(t==null)(e===document.activeElement||!e.contains(document.activeElement))&&n[0]?.focus();else if(t==="first")n[0]?.focus();else if(t==="last")n.at(-1)?.focus();else if(typeof t=="number")n[t]?.focus();else{const i=w6(n,t);i?i.focus():Lp(e,t==="next"?"first":"last")}}function Gx(e){return e==null||typeof e=="string"&&e.trim()===""}function T6(){}function r_(e,t){if(!(Gi&&typeof CSS<"u"&&typeof CSS.supports<"u"&&CSS.supports(`selector(${t})`)))return null;try{return!!e&&e.matches(t)}catch{return null}}function RT(e){return e.some(t=>Nv(t)?t.type===ra?!1:t.type!==un||RT(t.children):!0)?e:null}function qx(e,t,n){return e?.(t)??n?.(t)}function une(e,t){if(!Gi||e===0)return t(),()=>{};const n=window.setTimeout(t,e);return()=>window.clearTimeout(n)}function dne(e,t){const n=e.clientX,i=e.clientY,r=t.getBoundingClientRect(),a=r.left,l=r.top,h=r.right,s=r.bottom;return n>=a&&n<=h&&i>=l&&i<=s}function I1(){const e=Zt(),t=n=>{e.value=n};return Object.defineProperty(t,"value",{enumerable:!0,get:()=>e.value,set:n=>e.value=n}),Object.defineProperty(t,"el",{enumerable:!0,get:()=>iP(e.value)}),t}function s_(e){const t=e.key.length===1,n=!e.ctrlKey&&!e.metaKey&&!e.altKey;return t&&n}function sm(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="bigint"}function A1(e){return"\\^$*+?.()|{}[]".includes(e)?`\\${e}`:e}function hne(e,t,n){const i=new RegExp(`[\\d\\-${A1(n)}]`),r=e.split("").filter(l=>i.test(l)).filter((l,h,s)=>h===0&&/[-]/.test(l)||l===n&&h===s.indexOf(l)||/\d/.test(l)).join("");if(t===0)return r.split(n)[0];const a=new RegExp(`${A1(n)}\\d`);if(t!==null&&a.test(r)){const l=r.split(n);return[l[0],l[1].substring(0,t)].join(n)}return r}function fne(e){const t={};for(const n in e)t[ll(n)]=e[n];return t}function mne(e){const t=["checked","disabled"];return Object.fromEntries(Object.entries(e).filter(n=>{let[i,r]=n;return t.includes(i)?!!r:r!==void 0}))}function FV(e){const t=n=>Array.isArray(n)?n.map(i=>t(i)):Rs(n)||Cp(n)||nT(n)?t($n(n)):Pk(n)?Object.keys(n).reduce((i,r)=>(i[r]=t(n[r]),i),{}):n;return t(e)}const S6=["top","bottom"],pne=["start","end","left","right"];function Lk(e,t){let[n,i]=e.split(" ");return i||(i=k1(S6,n)?"start":k1(pne,n)?"top":"center"),{side:Rk(n,t),align:Rk(i,t)}}function Rk(e,t){return e==="start"?t?"right":"left":e==="end"?t?"left":"right":e}function iC(e){return{side:{center:"center",top:"bottom",bottom:"top",left:"right",right:"left"}[e.side],align:e.align}}function rC(e){return{side:e.side,align:{center:"center",top:"bottom",bottom:"top",left:"right",right:"left"}[e.align]}}function zV(e){return{side:e.align,align:e.side}}function NV(e){return k1(S6,e.side)?"y":"x"}class Bc{constructor(t){const n=document.body.currentCSSZoom??1,i=t instanceof DOMRect?1+(1-n)/n:1,{x:r,y:a,width:l,height:h}=t;this.x=r*i,this.y=a*i,this.width=l*i,this.height=h*i}get top(){return this.y}get bottom(){return this.y+this.height}get left(){return this.x}get right(){return this.x+this.width}}function UV(e,t){return{x:{before:Math.max(0,t.left-e.left),after:Math.max(0,e.right-t.right)},y:{before:Math.max(0,t.top-e.top),after:Math.max(0,e.bottom-t.bottom)}}}function E6(e){if(Array.isArray(e)){const t=document.body.currentCSSZoom??1,n=1+(1-t)/t;return new Bc({x:e[0]*n,y:e[1]*n,width:0*n,height:0*n})}else return new Bc(e.getBoundingClientRect())}function gne(e){if(e===document.documentElement)if(visualViewport){const t=document.body.currentCSSZoom??1;return new Bc({x:visualViewport.scale>1?0:visualViewport.offsetLeft,y:visualViewport.scale>1?0:visualViewport.offsetTop,width:visualViewport.width*visualViewport.scale/t,height:visualViewport.height*visualViewport.scale/t})}else return new Bc({x:0,y:0,width:document.documentElement.clientWidth,height:document.documentElement.clientHeight});else{const t=e.getBoundingClientRect();return new Bc({x:t.x,y:t.y,width:e.clientWidth,height:e.clientHeight})}}function oP(e){const t=new Bc(e.getBoundingClientRect()),n=getComputedStyle(e),i=n.transform;if(i){let r,a,l,h,s;if(i.startsWith("matrix3d("))r=i.slice(9,-1).split(/, /),a=Number(r[0]),l=Number(r[5]),h=Number(r[12]),s=Number(r[13]);else if(i.startsWith("matrix("))r=i.slice(7,-1).split(/, /),a=Number(r[0]),l=Number(r[3]),h=Number(r[4]),s=Number(r[5]);else return new Bc(t);const p=n.transformOrigin,_=t.x-h-(1-a)*parseFloat(p),x=t.y-s-(1-l)*parseFloat(p.slice(p.indexOf(" ")+1)),T=a?t.width/a:e.offsetWidth+1,k=l?t.height/l:e.offsetHeight+1;return new Bc({x:_,y:x,width:T,height:k})}else return new Bc(t)}function rh(e,t,n){if(typeof e.animate>"u")return{finished:Promise.resolve()};let i;try{i=e.animate(t,n)}catch{return{finished:Promise.resolve()}}return typeof i.finished>"u"&&(i.finished=new Promise(r=>{i.onfinish=()=>{r(i)}})),i}const Lw=new WeakMap;function vne(e,t){Object.keys(t).forEach(n=>{if(rP(n)){const i=x6(n),r=Lw.get(e);if(t[n]==null)r?.forEach(a=>{const[l,h]=a;l===i&&(e.removeEventListener(i,h),r.delete(a))});else if(!r||![...r].some(a=>a[0]===i&&a[1]===t[n])){e.addEventListener(i,t[n]);const a=r||new Set;a.add([i,t[n]]),Lw.has(e)||Lw.set(e,a)}}else t[n]==null?e.removeAttribute(n):e.setAttribute(n,t[n])})}function _ne(e,t){Object.keys(t).forEach(n=>{if(rP(n)){const i=x6(n),r=Lw.get(e);r?.forEach(a=>{const[l,h]=a;l===i&&(e.removeEventListener(i,h),r.delete(a))})}else e.removeAttribute(n)})}const ov=2.4,$V=.2126729,jV=.7151522,WV=.072175,yne=.55,bne=.58,xne=.57,wne=.62,Kx=.03,HV=1.45,Tne=5e-4,Sne=1.25,Ene=1.25,GV=.078,qV=12.82051282051282,Xx=.06,KV=.001;function XV(e,t){const n=(e.r/255)**ov,i=(e.g/255)**ov,r=(e.b/255)**ov,a=(t.r/255)**ov,l=(t.g/255)**ov,h=(t.b/255)**ov;let s=n*$V+i*jV+r*WV,p=a*$V+l*jV+h*WV;if(s<=Kx&&(s+=(Kx-s)**HV),p<=Kx&&(p+=(Kx-p)**HV),Math.abs(p-s)<Tne)return 0;let _;if(p>s){const x=(p**yne-s**bne)*Sne;_=x<KV?0:x<GV?x-x*qV*Xx:x-Xx}else{const x=(p**wne-s**xne)*Ene;_=x>-KV?0:x>-GV?x-x*qV*Xx:x+Xx}return _*100}const P1=.20689655172413793,Cne=e=>e>P1**3?Math.cbrt(e):e/(3*P1**2)+4/29,kne=e=>e>P1?e**3:3*P1**2*(e-4/29);function C6(e){const t=Cne,n=t(e[1]);return[116*n-16,500*(t(e[0]/.95047)-n),200*(n-t(e[2]/1.08883))]}function k6(e){const t=kne,n=(e[0]+16)/116;return[t(n+e[1]/500)*.95047,t(n),t(n-e[2]/200)*1.08883]}const Ine=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]],Ane=e=>e<=.0031308?e*12.92:1.055*e**(1/2.4)-.055,Pne=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],Mne=e=>e<=.04045?e/12.92:((e+.055)/1.055)**2.4;function I6(e){const t=Array(3),n=Ane,i=Ine;for(let r=0;r<3;++r)t[r]=Math.round(Er(n(i[r][0]*e[0]+i[r][1]*e[1]+i[r][2]*e[2]))*255);return{r:t[0],g:t[1],b:t[2]}}function aP(e){let{r:t,g:n,b:i}=e;const r=[0,0,0],a=Mne,l=Pne;t=a(t/255),n=a(n/255),i=a(i/255);for(let h=0;h<3;++h)r[h]=l[h][0]*t+l[h][1]*n+l[h][2]*i;return r}function Ok(e){return!!e&&/^(#|var\(--|(rgb|hsl)a?\()/.test(e)}function Dne(e){return Ok(e)&&!/^((rgb|hsl)a?\()?var\(--/.test(e)}const YV=/^(?<fn>(?:rgb|hsl)a?)\((?<values>.+)\)/,Lne={rgb:(e,t,n,i)=>({r:e,g:t,b:n,a:i}),rgba:(e,t,n,i)=>({r:e,g:t,b:n,a:i}),hsl:(e,t,n,i)=>ZV({h:e,s:t,l:n,a:i}),hsla:(e,t,n,i)=>ZV({h:e,s:t,l:n,a:i}),hsv:(e,t,n,i)=>dd({h:e,s:t,v:n,a:i}),hsva:(e,t,n,i)=>dd({h:e,s:t,v:n,a:i})};function sc(e){if(typeof e=="number")return{r:(e&16711680)>>16,g:(e&65280)>>8,b:e&255};if(typeof e=="string"&&YV.test(e)){const{groups:t}=e.match(YV),{fn:n,values:i}=t,r=i.split(/,\s*|\s*\/\s*|\s+/).map((a,l)=>a.endsWith("%")||l>0&&l<3&&["hsl","hsla","hsv","hsva"].includes(n)?parseFloat(a)/100:parseFloat(a));return Lne[n](...r)}else if(typeof e=="string"){let t=e.startsWith("#")?e.slice(1):e;return[3,4].includes(t.length)?t=t.split("").map(n=>n+n).join(""):[6,8].includes(t.length),D6(t)}else if(typeof e=="object"){if(Tp(e,["r","g","b"]))return e;if(Tp(e,["h","s","l"]))return dd(lP(e));if(Tp(e,["h","s","v"]))return dd(e)}throw new TypeError(`Invalid color: ${e==null?e:String(e)||e.constructor.name}
Expected #hex, #hexa, rgb(), rgba(), hsl(), hsla(), object or number`)}function dd(e){const{h:t,s:n,v:i,a:r}=e,a=h=>{const s=(h+t/60)%6;return i-i*n*Math.max(Math.min(s,4-s,1),0)},l=[a(5),a(3),a(1)].map(h=>Math.round(h*255));return{r:l[0],g:l[1],b:l[2],a:r}}function ZV(e){return dd(lP(e))}function P0(e){if(!e)return{h:0,s:1,v:1,a:1};const t=e.r/255,n=e.g/255,i=e.b/255,r=Math.max(t,n,i),a=Math.min(t,n,i);let l=0;r!==a&&(r===t?l=60*(0+(n-i)/(r-a)):r===n?l=60*(2+(i-t)/(r-a)):r===i&&(l=60*(4+(t-n)/(r-a)))),l<0&&(l=l+360);const h=r===0?0:(r-a)/r,s=[l,h,r];return{h:s[0],s:s[1],v:s[2],a:e.a}}function Vk(e){const{h:t,s:n,v:i,a:r}=e,a=i-i*n/2,l=a===1||a===0?0:(i-a)/Math.min(a,1-a);return{h:t,s:l,l:a,a:r}}function lP(e){const{h:t,s:n,l:i,a:r}=e,a=i+n*Math.min(i,1-i),l=a===0?0:2-2*i/a;return{h:t,s:l,v:a,a:r}}function A6(e){let{r:t,g:n,b:i,a:r}=e;return r===void 0?`rgb(${t}, ${n}, ${i})`:`rgba(${t}, ${n}, ${i}, ${r})`}function P6(e){return A6(dd(e))}function Yx(e){const t=Math.round(e).toString(16);return("00".substr(0,2-t.length)+t).toUpperCase()}function M6(e){let{r:t,g:n,b:i,a:r}=e;return`#${[Yx(t),Yx(n),Yx(i),r!==void 0?Yx(Math.round(r*255)):""].join("")}`}function D6(e){e=One(e);let[t,n,i,r]=lne(e,2).map(a=>parseInt(a,16));return r=r===void 0?r:r/255,{r:t,g:n,b:i,a:r}}function Rne(e){const t=D6(e);return P0(t)}function L6(e){return M6(dd(e))}function One(e){return e.startsWith("#")&&(e=e.slice(1)),e=e.replace(/([^0-9a-f])/gi,"F"),(e.length===3||e.length===4)&&(e=e.split("").map(t=>t+t).join("")),e.length!==6&&(e=RV(RV(e,6),8,"F")),e}function Vne(e,t){const n=C6(aP(e));return n[0]=n[0]+t*10,I6(k6(n))}function Bne(e,t){const n=C6(aP(e));return n[0]=n[0]-t*10,I6(k6(n))}function Bk(e){const t=sc(e);return aP(t)[1]}function Fne(e,t){const n=Bk(e),i=Bk(t),r=Math.max(n,i),a=Math.min(n,i);return(r+.05)/(a+.05)}function R6(e){const t=Math.abs(XV(sc(0),sc(e)));return Math.abs(XV(sc(16777215),sc(e)))>Math.min(t,50)?"#fff":"#000"}function lt(e,t){return n=>Object.keys(e).reduce((i,r)=>{const l=typeof e[r]=="object"&&e[r]!=null&&!Array.isArray(e[r])?e[r]:{type:e[r]};return n&&r in n?i[r]={...l,default:n[r]}:i[r]=l,t&&!i[r].source&&(i[r].source=t),i},{})}const wn=lt({class:[String,Array,Object],style:{type:[String,Array,Object],default:null}},"component");function xs(e,t){const n=__();if(!n)throw new Error(`[Vuetify] ${e} must be called from inside a setup function`);return n}function pd(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"composables";const t=xs(e).type;return Dp(t?.aliasName||t?.name)}function zne(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:xs("injectSelf");const{provides:n}=t;if(n&&e in n)return n[e]}const o_=Symbol.for("vuetify:defaults");function Nne(e){return tt(e)}function cP(){const e=wi(o_);if(!e)throw new Error("[Vuetify] Could not find defaults instance");return e}function es(e,t){const n=cP(),i=tt(e),r=fe(()=>{if(xi(t?.disabled))return n.value;const l=xi(t?.scoped),h=xi(t?.reset),s=xi(t?.root);if(i.value==null&&!(l||h||s))return n.value;let p=Ba(i.value,{prev:n.value});if(l)return p;if(h||s){const _=Number(h||1/0);for(let x=0;x<=_&&!(!p||!("prev"in p));x++)p=p.prev;return p&&typeof s=="string"&&s in p&&(p=Ba(Ba(p,{prev:p}),p[s])),p}return p.prev?Ba(p.prev,p):p});return Dr(o_,r),r}function Une(e,t){return e.props&&(typeof e.props[t]<"u"||typeof e.props[Dp(t)]<"u")}function $ne(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:cP();const i=xs("useDefaults");if(t=t??i.type.name??i.type.__name,!t)throw new Error("[Vuetify] Could not determine component name");const r=fe(()=>n.value?.[e._as??t]),a=new Proxy(e,{get(s,p){const _=Reflect.get(s,p);if(p==="class"||p==="style")return[r.value?.[p],_].filter(k=>k!=null);if(Une(i.vnode,p))return _;const x=r.value?.[p];if(x!==void 0)return x;const T=n.value?.global?.[p];return T!==void 0?T:_}}),l=Zt();Ur(()=>{if(r.value){const s=Object.entries(r.value).filter(p=>{let[_]=p;return _.startsWith(_[0].toUpperCase())});l.value=s.length?Object.fromEntries(s):void 0}else l.value=void 0});function h(){const s=zne(o_,i);Dr(o_,fe(()=>l.value?Ba(s?.value??{},l.value):s?.value))}return{props:a,provideSubDefaults:h}}function uc(e){if(e._setup=e._setup??e.setup,!e.name)return e;if(e._setup){e.props=lt(e.props??{},e.name)();const t=Object.keys(e.props).filter(n=>n!=="class"&&n!=="style");e.filterProps=function(i){return Ol(i,t)},e.props._as=String,e.setup=function(i,r){const a=cP();if(!a.value)return e._setup(i,r);const{props:l,provideSubDefaults:h}=$ne(i,i._as??e.name,a),s=e._setup(l,r);return h(),s}}return e}function At(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return t=>(e?uc:tz)(t)}function jne(e,t){return t.props=e,t}function Ah(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"div",n=arguments.length>2?arguments[2]:void 0;return At()({name:n??md(ll(e.replace(/__/g,"-"))),props:{tag:{type:String,default:t},...wn()},setup(i,r){let{slots:a}=r;return()=>Eh(i.tag,{class:[e,i.class],style:i.style},a.default?.())}})}function Wne(e,t,n,i){if(!n||sm(e)||sm(t))return;const r=n.get(e);if(r)r.set(t,i);else{const a=new WeakMap;a.set(t,i),n.set(e,a)}}function Hne(e,t,n){if(!n||sm(e)||sm(t))return null;const i=n.get(e)?.get(t);if(typeof i=="boolean")return i;const r=n.get(t)?.get(e);return typeof r=="boolean"?r:null}function _o(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:new WeakMap;if(e===t)return!0;if(e instanceof Date&&t instanceof Date&&e.getTime()!==t.getTime()||e!==Object(e)||t!==Object(t))return!1;const i=Object.keys(e);if(i.length!==Object.keys(t).length)return!1;const r=Hne(e,t,n);return r||(Wne(e,t,n,!0),i.every(a=>_o(e[a],t[a],n)))}function O6(e){if(typeof e.getRootNode!="function"){for(;e.parentNode;)e=e.parentNode;return e!==document?null:document}const t=e.getRootNode();return t!==document&&t.getRootNode({composed:!0})!==document?null:t}const $b="cubic-bezier(0.4, 0, 0.2, 1)",JV="cubic-bezier(0.0, 0, 0.2, 1)",QV="cubic-bezier(0.4, 0, 1, 1)",Gne={linear:e=>e,easeInQuad:e=>e**2,easeOutQuad:e=>e*(2-e),easeInOutQuad:e=>e<.5?2*e**2:-1+(4-2*e)*e,easeInCubic:e=>e**3,easeOutCubic:e=>--e**3+1,easeInOutCubic:e=>e<.5?4*e**3:(e-1)*(2*e-2)*(2*e-2)+1,easeInQuart:e=>e**4,easeOutQuart:e=>1- --e**4,easeInOutQuart:e=>e<.5?8*e**4:1-8*--e**4,easeInQuint:e=>e**5,easeOutQuint:e=>1+--e**5,easeInOutQuint:e=>e<.5?16*e**5:1+16*--e**5,instant:e=>1};function e3(e,t,n){return Object.keys(e).filter(i=>rP(i)&&i.endsWith(t)).reduce((i,r)=>(i[r.slice(0,-t.length)]=a=>A0(e[r],a,n(a)),i),{})}function OT(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;for(;e;){if(t?qne(e):uP(e))return e;e=e.parentElement}return document.scrollingElement}function M1(e,t){const n=[];if(t&&e&&!t.contains(e))return n;for(;e&&(uP(e)&&n.push(e),e!==t);)e=e.parentElement;return n}function uP(e){if(!e||e.nodeType!==Node.ELEMENT_NODE)return!1;const t=window.getComputedStyle(e),n=t.overflowY==="scroll"||t.overflowY==="auto"&&e.scrollHeight>e.clientHeight,i=t.overflowX==="scroll"||t.overflowX==="auto"&&e.scrollWidth>e.clientWidth;return n||i}function qne(e){if(!e||e.nodeType!==Node.ELEMENT_NODE)return!1;const t=window.getComputedStyle(e);return["scroll","auto"].includes(t.overflowY)}function Kne(e){let{depth:t,isLast:n,isLastGroup:i,leafLinks:r,separateRoots:a,parentIndentLines:l,variant:h}=e;if(!l||!t)return{leaf:void 0,node:void 0,children:l};if(h==="simple")return{leaf:[...l,"line"],node:[...l,"line"],children:[...l,"line"]};const s=n&&(!i||a||t>1);return{leaf:[...l,s?"last-leaf":"leaf",...r?["leaf-link"]:[]],node:[...l,s?"last-leaf":"leaf"],children:[...l,s?"none":"line"]}}function Xne(e){for(;e;){if(window.getComputedStyle(e).position==="fixed")return!0;e=e.offsetParent}return!1}function Vt(e){const t=xs("useRender");t.render=e}function Yne(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{leading:!0,trailing:!0},i=0,r=0,a=!1,l=0;function h(){clearTimeout(i),a=!1,l=0}const s=function(){for(var p=arguments.length,_=new Array(p),x=0;x<p;x++)_[x]=arguments[x];clearTimeout(i);const T=Date.now();l||(l=T);const k=T-Math.max(l,r);function P(){r=Date.now(),i=window.setTimeout(h,t),e(..._)}a?k>=t?P():n.trailing&&(i=window.setTimeout(P,t-k)):(a=!0,n.leading&&P())};return s.clear=h,s.immediate=e,s}function Pn(e,t,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:x=>x,r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:x=>x;const a=xs("useProxiedModel"),l=tt(e[t]!==void 0?e[t]:n),h=Dp(t),p=fe(h!==t?()=>(e[t],!!((a.vnode.props?.hasOwnProperty(t)||a.vnode.props?.hasOwnProperty(h))&&(a.vnode.props?.hasOwnProperty(`onUpdate:${t}`)||a.vnode.props?.hasOwnProperty(`onUpdate:${h}`)))):()=>(e[t],!!(a.vnode.props?.hasOwnProperty(t)&&a.vnode.props?.hasOwnProperty(`onUpdate:${t}`))));aa(()=>!p.value,()=>{qt(()=>e[t],x=>{l.value=x})});const _=fe({get(){const x=e[t];return i(p.value?x:l.value)},set(x){const T=r(x),k=$n(p.value?e[t]:l.value);k===T||i(k)===x||(l.value=T,a?.emit(`update:${t}`,T))}});return Object.defineProperty(_,"externalValue",{get:()=>p.value?e[t]:l.value}),_}const Zne={badge:"Badge",open:"Open",close:"Close",dismiss:"Dismiss",confirmEdit:{ok:"OK",cancel:"Cancel"},dataIterator:{noResultsText:"No matching records found",loadingText:"Loading items..."},dataTable:{itemsPerPageText:"Rows per page:",ariaLabel:{sortDescending:"Sorted descending.",sortAscending:"Sorted ascending.",sortNone:"Not sorted.",activateNone:"Activate to remove sorting.",activateDescending:"Activate to sort descending.",activateAscending:"Activate to sort ascending."},sortBy:"Sort by"},dataFooter:{itemsPerPageText:"Items per page:",itemsPerPageAll:"All",nextPage:"Next page",prevPage:"Previous page",firstPage:"First page",lastPage:"Last page",pageText:"{0}-{1} of {2}"},dateRangeInput:{divider:"to"},datePicker:{itemsSelected:"{0} selected",range:{title:"Select dates",header:"Enter dates"},title:"Select date",header:"Enter date",input:{placeholder:"Enter date"},ariaLabel:{previousMonth:"Previous month",nextMonth:"Next month",selectYear:"Select year",selectDate:"{0}",currentDate:"Today, {0}"}},noDataText:"No data available",carousel:{prev:"Previous visual",next:"Next visual",ariaLabel:{delimiter:"Carousel slide {0} of {1}"}},calendar:{moreEvents:"{0} more",today:"Today"},input:{clear:"Clear {0}",prependAction:"{0} prepended action",appendAction:"{0} appended action",otp:"Please enter OTP character {0}"},fileInput:{counter:"{0} files",counterSize:"{0} files ({1} in total)"},fileUpload:{title:"Drag and drop files here",divider:"or",browse:"Browse Files"},timePicker:{am:"AM",pm:"PM",title:"Select Time"},pagination:{ariaLabel:{root:"Pagination Navigation",next:"Next page",previous:"Previous page",page:"Go to page {0}",currentPage:"Page {0}, Current page",first:"First page",last:"Last page"}},stepper:{next:"Next",prev:"Previous"},rating:{ariaLabel:{item:"Rating {0} of {1}"}},loading:"Loading...",infiniteScroll:{loadMore:"Load more",empty:"No more"},rules:{required:"This field is required",email:"Please enter a valid email",number:"This field can only contain numbers",integer:"This field can only contain integer values",capital:"This field can only contain uppercase letters",maxLength:"You must enter a maximum of {0} characters",minLength:"You must enter a minimum of {0} characters",strictLength:"The length of the entered field is invalid",exclude:"The {0} character is not allowed",notEmpty:"Please choose at least one value",pattern:"Invalid format"},hotkey:{then:"then",ctrl:"Ctrl",command:"Command",space:"Space",shift:"Shift",alt:"Alt",enter:"Enter",escape:"Escape",upArrow:"Up Arrow",downArrow:"Down Arrow",leftArrow:"Left Arrow",rightArrow:"Right Arrow",backspace:"Backspace",option:"Option",plus:"plus",shortcut:"Keyboard shortcut: {0}"},video:{play:"Play",pause:"Pause",seek:"Seek",volume:"Volume",showVolume:"Show volume control",mute:"Mute",unmute:"Unmute",enterFullscreen:"Full screen",exitFullscreen:"Exit full screen"},colorPicker:{ariaLabel:{eyedropper:"Select color with eyedropper",hueSlider:"Hue",alphaSlider:"Alpha",redInput:"Red value",greenInput:"Green value",blueInput:"Blue value",alphaInput:"Alpha value",hueInput:"Hue value",saturationInput:"Saturation value",lightnessInput:"Lightness value",hexInput:"HEX value",hexaInput:"HEX with alpha value",changeFormat:"Change color format"}}},t3="$vuetify.",n3=(e,t)=>e.replace(/\{(\d+)\}/g,(n,i)=>String(t[Number(i)])),V6=(e,t,n)=>function(i){for(var r=arguments.length,a=new Array(r>1?r-1:0),l=1;l<r;l++)a[l-1]=arguments[l];if(!i.startsWith(t3))return n3(i,a);const h=i.replace(t3,""),s=e.value&&n.value[e.value],p=t.value&&n.value[t.value];let _=Hp(s,h,null);return _||(`${i}${e.value}`,_=Hp(p,h,null)),_||(_=i),typeof _!="string"&&(_=i),n3(_,a)};function dP(e,t){return(n,i)=>new Intl.NumberFormat([e.value,t.value],i).format(n)}function B6(e,t){return dP(e,t)(.1).includes(",")?",":"."}function sC(e,t,n){const i=Pn(e,t,e[t]??n.value);return i.value=e[t]??n.value,qt(n,r=>{e[t]==null&&(i.value=n.value)}),i}function F6(e){return t=>{const n=sC(t,"locale",e.current),i=sC(t,"fallback",e.fallback),r=sC(t,"messages",e.messages);return{name:"vuetify",current:n,fallback:i,messages:r,decimalSeparator:Ne(()=>B6(n,i)),t:V6(n,i,r),n:dP(n,i),provide:F6({current:n,fallback:i,messages:r})}}}function Jne(e){const t=Zt(e?.locale??"en"),n=Zt(e?.fallback??"en"),i=tt({en:Zne,...e?.messages});return{name:"vuetify",current:t,fallback:n,messages:i,decimalSeparator:Ne(()=>e?.decimalSeparator??B6(t,n)),t:V6(t,n,i),n:dP(t,n),provide:F6({current:t,fallback:n,messages:i})}}const a_=Symbol.for("vuetify:locale");function Qne(e){return e.name!=null}function eie(e){const t=e?.adapter&&Qne(e?.adapter)?e?.adapter:Jne(e),n=iie(t,e);return{...t,...n}}function hr(){const e=wi(a_);if(!e)throw new Error("[Vuetify] Could not find injected locale instance");return e}function tie(e){const t=wi(a_);if(!t)throw new Error("[Vuetify] Could not find injected locale instance");const n=t.provide(e),i=rie(n,t.rtl,e),r={...n,...i};return Dr(a_,r),r}function nie(){return{af:!1,ar:!0,bg:!1,ca:!1,ckb:!1,cs:!1,de:!1,el:!1,en:!1,es:!1,et:!1,fa:!0,fi:!1,fr:!1,hr:!1,hu:!1,he:!0,id:!1,it:!1,ja:!1,km:!1,ko:!1,lv:!1,lt:!1,nl:!1,no:!1,pl:!1,pt:!1,ro:!1,ru:!1,sk:!1,sl:!1,srCyrl:!1,srLatn:!1,sv:!1,th:!1,tr:!1,az:!1,uk:!1,vi:!1,zhHans:!1,zhHant:!1}}function iie(e,t){const n=tt(t?.rtl??nie()),i=fe(()=>n.value[e.current.value]??!1);return{isRtl:i,rtl:n,rtlClasses:Ne(()=>`v-locale--is-${i.value?"rtl":"ltr"}`)}}function rie(e,t,n){const i=fe(()=>n.rtl??t.value[e.current.value]??!1);return{isRtl:i,rtl:t,rtlClasses:Ne(()=>`v-locale--is-${i.value?"rtl":"ltr"}`)}}function Gs(){const e=wi(a_);if(!e)throw new Error("[Vuetify] Could not find injected rtl instance");return{isRtl:e.isRtl,rtlClasses:e.rtlClasses}}function M0(e){const t=e.slice(-2).toUpperCase();switch(!0){case e==="GB-alt-variant":return{firstDay:0,firstWeekSize:4};case e==="001":return{firstDay:1,firstWeekSize:1};case`AG AS BD BR BS BT BW BZ CA CO DM DO ET GT GU HK HN ID IL IN JM JP KE
    KH KR LA MH MM MO MT MX MZ NI NP PA PE PH PK PR PY SA SG SV TH TT TW UM US
    VE VI WS YE ZA ZW`.includes(t):return{firstDay:0,firstWeekSize:1};case`AI AL AM AR AU AZ BA BM BN BY CL CM CN CR CY EC GE HR KG KZ LB LK LV
    MD ME MK MN MY NZ RO RS SI TJ TM TR UA UY UZ VN XK`.includes(t):return{firstDay:1,firstWeekSize:1};case`AD AN AT AX BE BG CH CZ DE DK EE ES FI FJ FO FR GB GF GP GR HU IE IS
    IT LI LT LU MC MQ NL NO PL RE RU SE SK SM VA`.includes(t):return{firstDay:1,firstWeekSize:4};case"AE AF BH DJ DZ EG IQ IR JO KW LY OM QA SD SY".includes(t):return{firstDay:6,firstWeekSize:1};case t==="MV":return{firstDay:5,firstWeekSize:1};case t==="PT":return{firstDay:0,firstWeekSize:4};default:return null}}function sie(e,t,n){const i=[];let r=[];const a=z6(e),l=N6(e),h=n??M0(t)?.firstDay??0,s=(a.getDay()-h+7)%7,p=(l.getDay()-h+7)%7;for(let _=0;_<s;_++){const x=new Date(a);x.setDate(x.getDate()-(s-_)),r.push(x)}for(let _=1;_<=l.getDate();_++){const x=new Date(e.getFullYear(),e.getMonth(),_);r.push(x),r.length===7&&(i.push(r),r=[])}for(let _=1;_<7-p;_++){const x=new Date(l);x.setDate(x.getDate()+_),r.push(x)}return r.length>0&&i.push(r),i}function D1(e,t,n){let i=(n??M0(t)?.firstDay??0)%7;[0,1,2,3,4,5,6].includes(i)||(i=0);const r=new Date(e);for(;r.getDay()!==i;)r.setDate(r.getDate()-1);return r}function oie(e,t){const n=new Date(e),i=((M0(t)?.firstDay??0)+6)%7;for(;n.getDay()!==i;)n.setDate(n.getDate()+1);return n}function z6(e){return new Date(e.getFullYear(),e.getMonth(),1)}function N6(e){return new Date(e.getFullYear(),e.getMonth()+1,0)}function aie(e){const t=e.split("-").map(Number);return new Date(t[0],t[1]-1,t[2])}const lie=/^([12]\d{3}-([1-9]|0[1-9]|1[0-2])-([1-9]|0[1-9]|[12]\d|3[01]))$/;function U6(e){if(e==null)return new Date;if(e instanceof Date)return e;if(typeof e=="string"){let t;if(lie.test(e))return aie(e);if(t=Date.parse(e),!isNaN(t))return new Date(t)}return null}const i3=new Date(2e3,0,2);function cie(e,t,n){const i=t??M0(e)?.firstDay??0;return rc(7).map(r=>{const a=new Date(i3);return a.setDate(i3.getDate()+i+r),new Intl.DateTimeFormat(e,{weekday:n??"narrow"}).format(a)})}function uie(e,t,n,i){const r=U6(e)??new Date,a=i?.[t];if(typeof a=="function")return a(r,t,n);let l={};switch(t){case"fullDate":l={year:"numeric",month:"short",day:"numeric"};break;case"fullDateWithWeekday":l={weekday:"long",year:"numeric",month:"long",day:"numeric"};break;case"normalDate":const h=r.getDate(),s=new Intl.DateTimeFormat(n,{month:"long"}).format(r);return`${h} ${s}`;case"normalDateWithWeekday":l={weekday:"short",day:"numeric",month:"short"};break;case"shortDate":l={month:"short",day:"numeric"};break;case"year":l={year:"numeric"};break;case"month":l={month:"long"};break;case"monthShort":l={month:"short"};break;case"monthAndYear":l={month:"long",year:"numeric"};break;case"monthAndDate":l={month:"long",day:"numeric"};break;case"weekday":l={weekday:"long"};break;case"weekdayShort":l={weekday:"short"};break;case"dayOfMonth":return new Intl.NumberFormat(n).format(r.getDate());case"hours12h":l={hour:"numeric",hour12:!0};break;case"hours24h":l={hour:"numeric",hour12:!1};break;case"minutes":l={minute:"numeric"};break;case"seconds":l={second:"numeric"};break;case"fullTime":l={hour:"numeric",minute:"numeric"};break;case"fullTime12h":l={hour:"numeric",minute:"numeric",hour12:!0};break;case"fullTime24h":l={hour:"numeric",minute:"numeric",hour12:!1};break;case"fullDateTime":l={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"};break;case"fullDateTime12h":l={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0};break;case"fullDateTime24h":l={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1};break;case"keyboardDate":l={year:"numeric",month:"2-digit",day:"2-digit"};break;case"keyboardDateTime":return l={year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric"},new Intl.DateTimeFormat(n,l).format(r).replace(/, /g," ");case"keyboardDateTime12h":return l={year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric",hour12:!0},new Intl.DateTimeFormat(n,l).format(r).replace(/, /g," ");case"keyboardDateTime24h":return l={year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric",hour12:!1},new Intl.DateTimeFormat(n,l).format(r).replace(/, /g," ");default:l=a??{timeZone:"UTC",timeZoneName:"short"}}return new Intl.DateTimeFormat(n,l).format(r)}function die(e,t){const n=e.toJsDate(t),i=n.getFullYear(),r=OV(String(n.getMonth()+1),2,"0"),a=OV(String(n.getDate()),2,"0");return`${i}-${r}-${a}`}function hie(e){const[t,n,i]=e.split("-").map(Number);return new Date(t,n-1,i)}function fie(e,t){const n=new Date(e);return n.setMinutes(n.getMinutes()+t),n}function mie(e,t){const n=new Date(e);return n.setHours(n.getHours()+t),n}function Rp(e,t){const n=new Date(e);return n.setDate(n.getDate()+t),n}function pie(e,t){const n=new Date(e);return n.setDate(n.getDate()+t*7),n}function gie(e,t){const n=new Date(e);return n.setDate(1),n.setMonth(n.getMonth()+t),n}function jb(e){return e.getFullYear()}function vie(e){return e.getMonth()}function _ie(e,t,n,i){const r=M0(t),a=n??r?.firstDay??0,l=r?.firstWeekSize??1;return i!==void 0?yie(e,t,a,i):bie(e,t,a,l)}function yie(e,t,n,i){const r=(7+i-n)%7,a=D1(e,t,n),l=Rp(a,6);function h(T){return(7+new Date(T,0,1).getDay()-n)%7}let s=jb(e);s<jb(l)&&h(s+1)<=r&&s++;const p=new Date(s,0,1),_=h(s),x=_<=r?Rp(p,-_):Rp(p,7-_);return 1+R1(hP(e),Wb(x),"weeks")}function bie(e,t,n,i){const r=Rp(D1(e,t,n),6);function a(_){const x=new Date(_,0,1);return 7-R1(x,D1(x,t,n),"days")}let l=jb(e);l<jb(r)&&a(l+1)>=i&&l++;const h=new Date(l,0,1),s=a(l),p=s>=i?Rp(h,s-7):Rp(h,s);return 1+R1(hP(e),Wb(p),"weeks")}function xie(e){return e.getDate()}function wie(e){return new Date(e.getFullYear(),e.getMonth()+1,1)}function Tie(e){return new Date(e.getFullYear(),e.getMonth()-1,1)}function Sie(e){return e.getHours()}function Eie(e){return e.getMinutes()}function Cie(e){return new Date(e.getFullYear(),0,1)}function kie(e){return new Date(e.getFullYear(),11,31)}function Iie(e,t){return L1(e,t[0])&&Mie(e,t[1])}function Aie(e){const t=new Date(e);return t instanceof Date&&!isNaN(t.getTime())}function L1(e,t){return e.getTime()>t.getTime()}function Pie(e,t){return L1(Wb(e),Wb(t))}function Mie(e,t){return e.getTime()<t.getTime()}function r3(e,t){return e.getTime()===t.getTime()}function Die(e,t){return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}function Lie(e,t){return e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}function Rie(e,t){return e.getFullYear()===t.getFullYear()}function R1(e,t,n){const i=new Date(e),r=new Date(t);switch(n){case"years":return i.getFullYear()-r.getFullYear();case"quarters":return Math.floor((i.getMonth()-r.getMonth()+(i.getFullYear()-r.getFullYear())*12)/4);case"months":return i.getMonth()-r.getMonth()+(i.getFullYear()-r.getFullYear())*12;case"weeks":return Math.floor((i.getTime()-r.getTime())/(1e3*60*60*24*7));case"days":return Math.floor((i.getTime()-r.getTime())/(1e3*60*60*24));case"hours":return Math.floor((i.getTime()-r.getTime())/(1e3*60*60));case"minutes":return Math.floor((i.getTime()-r.getTime())/(1e3*60));case"seconds":return Math.floor((i.getTime()-r.getTime())/1e3);default:return i.getTime()-r.getTime()}}function Oie(e,t){const n=new Date(e);return n.setHours(t),n}function Vie(e,t){const n=new Date(e);return n.setMinutes(t),n}function Bie(e,t){const n=new Date(e);return n.setMonth(t),n}function Fie(e,t){const n=new Date(e);return n.setDate(t),n}function zie(e,t){const n=new Date(e);return n.setFullYear(t),n}function Wb(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0,0)}function hP(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),23,59,59,999)}class Nie{constructor(t){this.locale=t.locale,this.formats=t.formats}date(t){return U6(t)}toJsDate(t){return t}toISO(t){return die(this,t)}parseISO(t){return hie(t)}addMinutes(t,n){return fie(t,n)}addHours(t,n){return mie(t,n)}addDays(t,n){return Rp(t,n)}addWeeks(t,n){return pie(t,n)}addMonths(t,n){return gie(t,n)}getWeekArray(t,n){const i=n!==void 0?Number(n):void 0;return sie(t,this.locale,i)}startOfWeek(t,n){const i=n!==void 0?Number(n):void 0;return D1(t,this.locale,i)}endOfWeek(t){return oie(t,this.locale)}startOfMonth(t){return z6(t)}endOfMonth(t){return N6(t)}format(t,n){return uie(t,n,this.locale,this.formats)}isEqual(t,n){return r3(t,n)}isValid(t){return Aie(t)}isWithinRange(t,n){return Iie(t,n)}isAfter(t,n){return L1(t,n)}isAfterDay(t,n){return Pie(t,n)}isBefore(t,n){return!L1(t,n)&&!r3(t,n)}isSameDay(t,n){return Die(t,n)}isSameMonth(t,n){return Lie(t,n)}isSameYear(t,n){return Rie(t,n)}setMinutes(t,n){return Vie(t,n)}setHours(t,n){return Oie(t,n)}setMonth(t,n){return Bie(t,n)}setDate(t,n){return Fie(t,n)}setYear(t,n){return zie(t,n)}getDiff(t,n,i){return R1(t,n,i)}getWeekdays(t,n){const i=t!==void 0?Number(t):void 0;return cie(this.locale,i,n)}getYear(t){return jb(t)}getMonth(t){return vie(t)}getWeek(t,n,i){const r=n!==void 0?Number(n):void 0,a=i!==void 0?Number(i):void 0;return _ie(t,this.locale,r,a)}getDate(t){return xie(t)}getNextMonth(t){return wie(t)}getPreviousMonth(t){return Tie(t)}getHours(t){return Sie(t)}getMinutes(t){return Eie(t)}startOfDay(t){return Wb(t)}endOfDay(t){return hP(t)}startOfYear(t){return Cie(t)}endOfYear(t){return kie(t)}}const $6=Symbol.for("vuetify:date-options"),s3=Symbol.for("vuetify:date-adapter");function Uie(e,t){const n=Ba({adapter:Nie,locale:{af:"af-ZA",bg:"bg-BG",ca:"ca-ES",ckb:"",cs:"cs-CZ",de:"de-DE",el:"el-GR",en:"en-US",et:"et-EE",fa:"fa-IR",fi:"fi-FI",hr:"hr-HR",hu:"hu-HU",he:"he-IL",id:"id-ID",it:"it-IT",ja:"ja-JP",ko:"ko-KR",lv:"lv-LV",lt:"lt-LT",nl:"nl-NL",no:"no-NO",pl:"pl-PL",pt:"pt-PT",ro:"ro-RO",ru:"ru-RU",sk:"sk-SK",sl:"sl-SI",srCyrl:"sr-SP",srLatn:"sr-SP",sv:"sv-SE",th:"th-TH",tr:"tr-TR",az:"az-AZ",uk:"uk-UA",vi:"vi-VN",zhHans:"zh-CN",zhHant:"zh-TW"}},e);return{options:n,instance:W6(n,t)}}function $ie(e,t,n){const i=j6(e,t,n),r=[t];for(let a=1;a<i;a++){const l=e.addDays(t,a);r.push(l)}return n&&r.push(e.endOfDay(n)),r}function j6(e,t,n){const i=[`${e.toISO(n??t).split("T")[0]}T00:00:00Z`,`${e.toISO(t).split("T")[0]}T00:00:00Z`];return typeof e.date()=="string"?e.getDiff(i[0],i[1],"days"):e.getDiff(e.date(i[0]),e.date(i[1]),"days")}function W6(e,t){const n=io(typeof e.adapter=="function"?new e.adapter({locale:e.locale[t.current.value]??t.current.value,formats:e.formats}):e.adapter);return qt(t.current,i=>{n.locale=e.locale[i]??i??n.locale}),n}function D0(){const e=wi($6);if(!e)throw new Error("[Vuetify] Could not find injected date options");const t=hr();return W6(e,t)}const VT=["sm","md","lg","xl","xxl"],Fk=Symbol.for("vuetify:display"),o3={mobileBreakpoint:"lg",thresholds:{xs:0,sm:600,md:960,lg:1280,xl:1920,xxl:2560}},jie=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:o3;return Ba(o3,e)};function a3(e){return Gi&&!e?window.innerWidth:typeof e=="object"&&e.clientWidth||0}function l3(e){return Gi&&!e?window.innerHeight:typeof e=="object"&&e.clientHeight||0}function c3(e){const t=Gi&&!e?window.navigator.userAgent:"ssr";function n(P){return!!t.match(P)}const i=n(/android/i),r=n(/iphone|ipad|ipod/i),a=n(/cordova/i),l=n(/electron/i),h=n(/chrome/i),s=n(/edge/i),p=n(/firefox/i),_=n(/opera/i),x=n(/win/i),T=n(/mac/i),k=n(/linux/i);return{android:i,ios:r,cordova:a,electron:l,chrome:h,edge:s,firefox:p,opera:_,win:x,mac:T,linux:k,touch:ine,ssr:t==="ssr"}}function Wie(e,t){const{thresholds:n,mobileBreakpoint:i}=jie(e),r=Zt(l3(t)),a=Zt(c3(t)),l=io({}),h=Zt(a3(t));function s(){r.value=l3(),h.value=a3()}function p(){s(),a.value=c3()}return Ur(()=>{const _=h.value<n.sm,x=h.value<n.md&&!_,T=h.value<n.lg&&!(x||_),k=h.value<n.xl&&!(T||x||_),P=h.value<n.xxl&&!(k||T||x||_),M=h.value>=n.xxl,R=_?"xs":x?"sm":T?"md":k?"lg":P?"xl":"xxl",F=typeof i=="number"?i:n[i],B=h.value<F;l.xs=_,l.sm=x,l.md=T,l.lg=k,l.xl=P,l.xxl=M,l.smAndUp=!_,l.mdAndUp=!(_||x),l.lgAndUp=!(_||x||T),l.xlAndUp=!(_||x||T||k),l.smAndDown=!(T||k||P||M),l.mdAndDown=!(k||P||M),l.lgAndDown=!(P||M),l.xlAndDown=!M,l.name=R,l.height=r.value,l.width=h.value,l.mobile=B,l.mobileBreakpoint=i,l.platform=a.value,l.thresholds=n}),Gi&&(window.addEventListener("resize",s,{passive:!0}),so(()=>{window.removeEventListener("resize",s)},!0)),{...g_(l),update:p,ssr:!!t}}const sg=lt({mobile:{type:Boolean,default:!1},mobileBreakpoint:[Number,String]},"display");function Vl(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{mobile:null},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:pd();const n=wi(Fk);if(!n)throw new Error("Could not find Vuetify display injection");const i=fe(()=>e.mobile?!0:typeof e.mobileBreakpoint=="number"?n.width.value<e.mobileBreakpoint:e.mobileBreakpoint?n.width.value<n.thresholds.value[e.mobileBreakpoint]:e.mobile===null?n.mobile.value:!1),r=Ne(()=>t?{[`${t}--mobile`]:i.value}:{});return{...n,displayClasses:r,mobile:i}}const H6=Symbol.for("vuetify:goto");function G6(){return{container:void 0,duration:300,layout:!1,offset:0,easing:"easeInOutCubic",patterns:Gne}}function Hie(e){return fP(e)??(document.scrollingElement||document.body)}function fP(e){return typeof e=="string"?document.querySelector(e):iP(e)}function oC(e,t,n){if(typeof e=="number")return t&&n?-e:e;let i=fP(e),r=0;for(;i;)r+=t?i.offsetLeft:i.offsetTop,i=i.offsetParent;return r}function Gie(e,t){return{rtl:t.isRtl,options:Ba(G6(),e)}}async function u3(e,t,n,i){const r=n?"scrollLeft":"scrollTop",a=Ba(i?.options??G6(),t),l=i?.rtl.value,h=(typeof e=="number"?e:fP(e))??0,s=a.container==="parent"&&h instanceof HTMLElement?h.parentElement:Hie(a.container),p=ud()?a.patterns.instant:typeof a.easing=="function"?a.easing:a.patterns[a.easing];if(!p)throw new TypeError(`Easing function "${a.easing}" not found.`);let _;if(typeof h=="number")_=oC(h,n,l);else if(_=oC(h,n,l)-oC(s,n,l),a.layout){const P=window.getComputedStyle(h).getPropertyValue("--v-layout-top");P&&(_-=parseInt(P,10))}_+=a.offset,_=Kie(s,_,!!l,!!n);const x=s[r]??0;if(_===x)return Promise.resolve(_);const T=performance.now();return new Promise(k=>requestAnimationFrame(function P(M){const F=(M-T)/a.duration,B=Math.floor(x+(_-x)*p(Er(F,0,1)));if(s[r]=B,F>=1&&Math.abs(B-s[r])<10)return k(_);if(F>2)return k(s[r]);requestAnimationFrame(P)}))}function qie(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=wi(H6),{isRtl:n}=Gs();if(!t)throw new Error("[Vuetify] Could not find injected goto instance");const i={...t,rtl:Ne(()=>t.rtl.value||n.value)};async function r(a,l){return u3(a,Ba(e,l),!1,i)}return r.horizontal=async(a,l)=>u3(a,Ba(e,l),!0,i),r}function Kie(e,t,n,i){const{scrollWidth:r,scrollHeight:a}=e,[l,h]=e===document.scrollingElement?[window.innerWidth,window.innerHeight]:[e.offsetWidth,e.offsetHeight];let s,p;return i?n?(s=-(r-l),p=0):(s=0,p=r-l):(s=0,p=a+-h),Er(t,s,p)}const Xie={collapse:"mdi-chevron-up",complete:"mdi-check",cancel:"mdi-close-circle",close:"mdi-close",delete:"mdi-close-circle",clear:"mdi-close-circle",success:"mdi-check-circle",info:"mdi-information",warning:"mdi-alert-circle",error:"mdi-close-circle",prev:"mdi-chevron-left",next:"mdi-chevron-right",checkboxOn:"mdi-checkbox-marked",checkboxOff:"mdi-checkbox-blank-outline",checkboxIndeterminate:"mdi-minus-box",delimiter:"mdi-circle",sortAsc:"mdi-arrow-up",sortDesc:"mdi-arrow-down",expand:"mdi-chevron-down",menu:"mdi-menu",subgroup:"mdi-menu-down",dropdown:"mdi-menu-down",radioOn:"mdi-radiobox-marked",radioOff:"mdi-radiobox-blank",edit:"mdi-pencil",ratingEmpty:"mdi-star-outline",ratingFull:"mdi-star",ratingHalf:"mdi-star-half-full",loading:"mdi-cached",first:"mdi-page-first",last:"mdi-page-last",unfold:"mdi-unfold-more-horizontal",file:"mdi-paperclip",plus:"mdi-plus",minus:"mdi-minus",calendar:"mdi-calendar",treeviewCollapse:"mdi-menu-down",treeviewExpand:"mdi-menu-right",tableGroupCollapse:"mdi-chevron-down",tableGroupExpand:"mdi-chevron-right",eyeDropper:"mdi-eyedropper",upload:"mdi-cloud-upload",color:"mdi-palette",command:"mdi-apple-keyboard-command",ctrl:"mdi-apple-keyboard-control",space:"mdi-keyboard-space",shift:"mdi-apple-keyboard-shift",alt:"mdi-apple-keyboard-option",enter:"mdi-keyboard-return",arrowup:"mdi-arrow-up",arrowdown:"mdi-arrow-down",arrowleft:"mdi-arrow-left",arrowright:"mdi-arrow-right",backspace:"mdi-backspace",play:"mdi-play",pause:"mdi-pause",fullscreen:"mdi-fullscreen",fullscreenExit:"mdi-fullscreen-exit",volumeHigh:"mdi-volume-high",volumeMedium:"mdi-volume-medium",volumeLow:"mdi-volume-low",volumeOff:"mdi-volume-variant-off"},Yie={component:e=>Eh(pP,{...e,class:"mdi"})},kn=[String,Function,Object,Array],zk=Symbol.for("vuetify:icons"),BT=lt({icon:{type:kn},tag:{type:[String,Object,Function],required:!0}},"icon"),Nk=At()({name:"VComponentIcon",props:BT(),setup(e,t){let{slots:n}=t;return()=>{const i=e.icon;return se(e.tag,null,{default:()=>[e.icon?se(i,null,null):n.default?.()]})}}}),mP=uc({name:"VSvgIcon",inheritAttrs:!1,props:BT(),setup(e,t){let{attrs:n}=t;return()=>se(e.tag,It(n,{style:null}),{default:()=>[z("svg",{class:"v-icon__svg",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",role:"img","aria-hidden":"true"},[Array.isArray(e.icon)?e.icon.map(i=>Array.isArray(i)?z("path",{d:i[0],"fill-opacity":i[1]},null):z("path",{d:i},null)):z("path",{d:e.icon},null)])]})}}),Zie=uc({name:"VLigatureIcon",props:BT(),setup(e){return()=>se(e.tag,null,{default:()=>[e.icon]})}}),pP=uc({name:"VClassIcon",props:BT(),setup(e){return()=>se(e.tag,{class:xt(e.icon)},null)}});function Jie(){return{svg:{component:mP},class:{component:pP}}}function Qie(e){const t=Jie(),n=e?.defaultSet??"mdi";return n==="mdi"&&!t.mdi&&(t.mdi=Yie),Ba({defaultSet:n,sets:t,aliases:{...Xie,vuetify:["M8.2241 14.2009L12 21L22 3H14.4459L8.2241 14.2009Z",["M7.26303 12.4733L7.00113 12L2 3H12.5261C12.5261 3 12.5261 3 12.5261 3L7.26303 12.4733Z",.6]],"vuetify-outline":"svg:M7.26 12.47 12.53 3H2L7.26 12.47ZM14.45 3 8.22 14.2 12 21 22 3H14.45ZM18.6 5 12 16.88 10.51 14.2 15.62 5ZM7.26 8.35 5.4 5H9.13L7.26 8.35Z","vuetify-play":["m6.376 13.184-4.11-7.192C1.505 4.66 2.467 3 4.003 3h8.532l-.953 1.576-.006.01-.396.677c-.429.732-.214 1.507.194 2.015.404.503 1.092.878 1.869.806a3.72 3.72 0 0 1 1.005.022c.276.053.434.143.523.237.138.146.38.635-.25 2.09-.893 1.63-1.553 1.722-1.847 1.677-.213-.033-.468-.158-.756-.406a4.95 4.95 0 0 1-.8-.927c-.39-.564-1.04-.84-1.66-.846-.625-.006-1.316.27-1.693.921l-.478.826-.911 1.506Z",["M9.093 11.552c.046-.079.144-.15.32-.148a.53.53 0 0 1 .43.207c.285.414.636.847 1.046 1.2.405.35.914.662 1.516.754 1.334.205 2.502-.698 3.48-2.495l.014-.028.013-.03c.687-1.574.774-2.852-.005-3.675-.37-.391-.861-.586-1.333-.676a5.243 5.243 0 0 0-1.447-.044c-.173.016-.393-.073-.54-.257-.145-.18-.127-.316-.082-.392l.393-.672L14.287 3h5.71c1.536 0 2.499 1.659 1.737 2.992l-7.997 13.996c-.768 1.344-2.706 1.344-3.473 0l-3.037-5.314 1.377-2.278.004-.006.004-.007.481-.831Z",.6]]}},e)}const ere=e=>{const t=wi(zk);if(!t)throw new Error("Missing Vuetify Icons provide!");return{iconData:fe(()=>{const i=Ua(e);if(!i)return{component:Nk};let r=i;if(typeof r=="string"&&(r=r.trim(),r.startsWith("$")&&(r=t.aliases?.[r.slice(1)])),Array.isArray(r))return{component:mP,icon:r};if(typeof r!="string")return{component:Nk,icon:r};const a=Object.keys(t.sets).find(s=>typeof r=="string"&&r.startsWith(`${s}:`)),l=a?r.slice(a.length+1):r;return{component:t.sets[a??t.defaultSet].component,icon:l}})}},Hb=Symbol.for("vuetify:theme"),Ai=lt({theme:String},"theme");function d3(){return{defaultTheme:"light",prefix:"v-",variations:{colors:[],lighten:0,darken:0},themes:{light:{dark:!1,colors:{background:"#FFFFFF",surface:"#FFFFFF","surface-bright":"#FFFFFF","surface-light":"#EEEEEE","surface-variant":"#424242","on-surface-variant":"#EEEEEE",primary:"#1867C0","primary-darken-1":"#1F5592",secondary:"#48A9A6","secondary-darken-1":"#018786",error:"#B00020",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"},variables:{"border-color":"#000000","border-opacity":.12,"high-emphasis-opacity":.87,"medium-emphasis-opacity":.6,"disabled-opacity":.38,"idle-opacity":.04,"hover-opacity":.04,"focus-opacity":.12,"selected-opacity":.08,"activated-opacity":.12,"pressed-opacity":.12,"dragged-opacity":.08,"theme-kbd":"#EEEEEE","theme-on-kbd":"#000000","theme-code":"#F5F5F5","theme-on-code":"#000000"}},dark:{dark:!0,colors:{background:"#121212",surface:"#212121","surface-bright":"#ccbfd6","surface-light":"#424242","surface-variant":"#c8c8c8","on-surface-variant":"#000000",primary:"#2196F3","primary-darken-1":"#277CC1",secondary:"#54B6B2","secondary-darken-1":"#48A9A6",error:"#CF6679",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"},variables:{"border-color":"#FFFFFF","border-opacity":.12,"high-emphasis-opacity":1,"medium-emphasis-opacity":.7,"disabled-opacity":.5,"idle-opacity":.1,"hover-opacity":.04,"focus-opacity":.12,"selected-opacity":.08,"activated-opacity":.12,"pressed-opacity":.16,"dragged-opacity":.08,"theme-kbd":"#424242","theme-on-kbd":"#FFFFFF","theme-code":"#343434","theme-on-code":"#CCCCCC"}}},stylesheetId:"vuetify-theme-stylesheet",scoped:!1,unimportant:!1,utilities:!0}}function tre(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:d3();const t=d3();if(!e)return{...t,isDisabled:!0};const n={};for(const[i,r]of Object.entries(e.themes??{})){const a=r.dark||i==="dark"?t.themes?.dark:t.themes?.light;n[i]=Ba(a,r)}return Ba(t,{...e,themes:n})}function lp(e,t,n,i){e.push(`${sre(t,i)} {
`,...n.map(r=>`  ${r};
`),`}
`)}function h3(e,t){const n=e.dark?2:1,i=e.dark?1:2,r=[];for(const[a,l]of Object.entries(e.colors)){const h=sc(l);r.push(`--${t}theme-${a}: ${h.r},${h.g},${h.b}`),a.startsWith("on-")||r.push(`--${t}theme-${a}-overlay-multiplier: ${Bk(l)>.18?n:i}`)}for(const[a,l]of Object.entries(e.variables)){const h=typeof l=="string"&&l.startsWith("#")?sc(l):void 0,s=h?`${h.r}, ${h.g}, ${h.b}`:void 0;r.push(`--${t}${a}: ${s??l}`)}return r}function nre(e,t,n){const i={};if(n)for(const r of["lighten","darken"]){const a=r==="lighten"?Vne:Bne;for(const l of rc(n[r],1))i[`${e}-${r}-${l}`]=M6(a(sc(t),l))}return i}function ire(e,t){if(!t)return{};let n={};for(const i of t.colors){const r=e[i];r&&(n={...n,...nre(i,r,t)})}return n}function rre(e){const t={};for(const n of Object.keys(e)){if(n.startsWith("on-")||e[`on-${n}`])continue;const i=`on-${n}`,r=sc(e[n]);t[i]=R6(r)}return t}function sre(e,t){if(!t)return e;const n=`:where(${t})`;return e===":root"?n:`${n} ${e}`}function ore(e,t,n){const i=are(e,t);i&&(i.innerHTML=n)}function are(e,t){if(!Gi)return null;let n=document.getElementById(e);return n||(n=document.createElement("style"),n.id=e,n.type="text/css",t&&n.setAttribute("nonce",t),document.head.appendChild(n)),n}function lre(e){const t=tre(e),n=Zt(t.defaultTheme),i=tt(t.themes),r=Zt("light"),a=fe({get(){return n.value==="system"?r.value:n.value},set(B){n.value=B}}),l=fe(()=>{const B={};for(const[H,G]of Object.entries(i.value)){const ee={...G.colors,...ire(G.colors,t.variations)};B[H]={...G,colors:{...ee,...rre(ee)}}}return B}),h=Ne(()=>l.value[a.value]),s=Ne(()=>n.value==="system"),p=fe(()=>{const B=[],H=t.unimportant?"":" !important",G=t.scoped?t.prefix:"";h.value?.dark&&lp(B,":root",["color-scheme: dark"],t.scope),lp(B,":root",h3(h.value,t.prefix),t.scope);for(const[ee,ie]of Object.entries(l.value))lp(B,`.${t.prefix}theme--${ee}`,[`color-scheme: ${ie.dark?"dark":"normal"}`,...h3(ie,t.prefix)],t.scope);if(t.utilities){const ee=[],ie=[],J=new Set(Object.values(l.value).flatMap($=>Object.keys($.colors)));for(const $ of J)$.startsWith("on-")?lp(ie,`.${$}`,[`color: rgb(var(--${t.prefix}theme-${$}))${H}`],t.scope):(lp(ee,`.${G}bg-${$}`,[`--${t.prefix}theme-overlay-multiplier: var(--${t.prefix}theme-${$}-overlay-multiplier)`,`background-color: rgb(var(--${t.prefix}theme-${$}))${H}`,`color: rgb(var(--${t.prefix}theme-on-${$}))${H}`],t.scope),lp(ie,`.${G}text-${$}`,[`color: rgb(var(--${t.prefix}theme-${$}))${H}`],t.scope),lp(ie,`.${G}border-${$}`,[`--${t.prefix}border-color: var(--${t.prefix}theme-${$})`],t.scope));B.push(...ee,...ie)}return B.map((ee,ie)=>ie===0?ee:`    ${ee}`).join("")}),_=Ne(()=>t.isDisabled?void 0:`${t.prefix}theme--${a.value}`),x=Ne(()=>Object.keys(l.value));if(nP){let H=function(){r.value=B.matches?"dark":"light"};var F=H;const B=window.matchMedia("(prefers-color-scheme: dark)");H(),B.addEventListener("change",H,{passive:!0}),wF()&&so(()=>{B.removeEventListener("change",H)})}function T(B){if(t.isDisabled)return;const H=B._context.provides.usehead;if(H){let ie=function(){return{style:[{textContent:p.value,id:t.stylesheetId,nonce:t.cspNonce||!1}]}};var G=ie;if(H.push){const J=H.push(ie);Gi&&qt(p,()=>{J.patch(ie)})}else Gi?(H.addHeadObjs(Ne(ie)),Ur(()=>H.updateDOM())):H.addHeadObjs(ie())}else{let ie=function(){ore(t.stylesheetId,t.cspNonce,p.value)};var ee=ie;Gi?qt(p,ie,{immediate:!0}):ie()}}function k(B){B!=="system"&&!x.value.includes(B)||(a.value=B)}function P(){let B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:x.value;const H=B.indexOf(a.value),G=H===-1?0:(H+1)%B.length;k(B[G])}function M(){let B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["light","dark"];P(B)}const R=new Proxy(a,{get(B,H){return Reflect.get(B,H)},set(B,H,G){return H==="value"&&f6(`theme.global.name.value = ${G}`,`theme.change('${G}')`),Reflect.set(B,H,G)}});return{install:T,change:k,cycle:P,toggle:M,isDisabled:t.isDisabled,isSystem:s,name:a,themes:i,current:h,computedThemes:l,prefix:t.prefix,themeClasses:_,styles:p,global:{name:R,current:h}}}function Zi(e){xs("provideTheme");const t=wi(Hb,null);if(!t)throw new Error("Could not find Vuetify theme injection");const n=Ne(()=>e.theme??t.name.value),i=Ne(()=>t.themes.value[n.value]),r=Ne(()=>t.isDisabled?void 0:`${t.prefix}theme--${n.value}`),a={...t,name:n,current:i,themeClasses:r};return Dr(Hb,a),a}function FT(){xs("useTheme");const e=wi(Hb,null);if(!e)throw new Error("Could not find Vuetify theme injection");return e}function zc(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"content";const n=I1(),i=tt();if(Gi){const r=new ResizeObserver(a=>{e?.(a,r),a.length&&(t==="content"?i.value=a[0].contentRect:i.value=a[0].target.getBoundingClientRect())});Nr(()=>{r.disconnect()}),qt(()=>n.el,(a,l)=>{l&&(r.unobserve(l),i.value=void 0),a&&r.observe(a)},{flush:"post"})}return{resizeRef:n,contentRect:Fp(i)}}const Gb=Symbol.for("vuetify:layout"),q6=Symbol.for("vuetify:layout-item"),f3=1e3,K6=lt({overlaps:{type:Array,default:()=>[]},fullHeight:Boolean},"layout"),og=lt({name:{type:String},order:{type:[Number,String],default:0},absolute:Boolean},"layout-item");function X6(){const e=wi(Gb);if(!e)throw new Error("[Vuetify] Could not find injected layout");return{getLayoutItem:e.getLayoutItem,mainRect:e.mainRect,mainStyles:e.mainStyles}}function ag(e){const t=wi(Gb);if(!t)throw new Error("[Vuetify] Could not find injected layout");const n=e.id??`layout-item-${ua()}`,i=xs("useLayoutItem");Dr(q6,{id:n});const r=Zt(!1);sT(()=>r.value=!0),FI(()=>r.value=!1);const{layoutItemStyles:a,layoutItemScrimStyles:l}=t.register(i,{...e,active:fe(()=>r.value?!1:e.active.value),id:n});return Nr(()=>t.unregister(n)),{layoutItemStyles:a,layoutRect:t.layoutRect,layoutItemScrimStyles:l}}const cre=(e,t,n,i)=>{let r={top:0,left:0,right:0,bottom:0};const a=[{id:"",layer:{...r}}];for(const l of e){const h=t.get(l),s=n.get(l),p=i.get(l);if(!h||!s||!p)continue;const _={...r,[h.value]:parseInt(r[h.value],10)+(p.value?parseInt(s.value,10):0)};a.push({id:l,layer:_}),r=_}return a};function Y6(e){const t=wi(Gb,null),n=fe(()=>t?t.rootZIndex.value-100:f3),i=tt([]),r=io(new Map),a=io(new Map),l=io(new Map),h=io(new Map),s=io(new Map),{resizeRef:p,contentRect:_}=zc(),x=fe(()=>{const ie=new Map,J=e.overlaps??[];for(const $ of J.filter(W=>W.includes(":"))){const[W,X]=$.split(":");if(!i.value.includes(W)||!i.value.includes(X))continue;const re=r.get(W),Y=r.get(X),Z=a.get(W),ge=a.get(X);!re||!Y||!Z||!ge||(ie.set(X,{position:re.value,amount:parseInt(Z.value,10)}),ie.set(W,{position:Y.value,amount:-parseInt(ge.value,10)}))}return ie}),T=fe(()=>{const ie=[...new Set([...l.values()].map($=>$.value))].sort(($,W)=>$-W),J=[];for(const $ of ie){const W=i.value.filter(X=>l.get(X)?.value===$);J.push(...W)}return cre(J,r,a,h)}),k=fe(()=>!Array.from(s.values()).some(ie=>ie.value)),P=fe(()=>T.value[T.value.length-1].layer),M=Ne(()=>({"--v-layout-left":pn(P.value.left),"--v-layout-right":pn(P.value.right),"--v-layout-top":pn(P.value.top),"--v-layout-bottom":pn(P.value.bottom),...k.value?void 0:{transition:"none"}})),R=fe(()=>T.value.slice(1).map((ie,J)=>{let{id:$}=ie;const{layer:W}=T.value[J],X=a.get($),re=r.get($);return{id:$,...W,size:Number(X.value),position:re.value}})),F=ie=>R.value.find(J=>J.id===ie),B=xs("createLayout"),H=Zt(!1);Kr(()=>{H.value=!0}),Dr(Gb,{register:(ie,J)=>{let{id:$,order:W,position:X,layoutSize:re,elementSize:Y,active:Z,disableTransitions:ge,absolute:be}=J;l.set($,W),r.set($,X),a.set($,re),h.set($,Z),ge&&s.set($,ge);const nt=yv(q6,B?.vnode).indexOf(ie);nt>-1?i.value.splice(nt,0,$):i.value.push($);const We=fe(()=>R.value.findIndex(Je=>Je.id===$)),Le=fe(()=>n.value+T.value.length*2-We.value*2),Ze=fe(()=>{const Je=X.value==="left"||X.value==="right",it=X.value==="right",vt=X.value==="bottom",mt=Y.value??re.value,ot=mt===0?"%":"px",Ye={[X.value]:0,zIndex:Le.value,transform:`translate${Je?"X":"Y"}(${(Z.value?0:-(mt===0?100:mt))*(it||vt?-1:1)}${ot})`,position:be.value||n.value!==f3?"absolute":"fixed",...k.value?void 0:{transition:"none"}};if(!H.value)return Ye;const ut=R.value[We.value],Ke=x.value.get($);return Ke&&(ut[Ke.position]+=Ke.amount),{...Ye,height:Je?`calc(100% - ${ut.top}px - ${ut.bottom}px)`:Y.value?`${Y.value}px`:void 0,left:it?void 0:`${ut.left}px`,right:it?`${ut.right}px`:void 0,top:X.value!=="bottom"?`${ut.top}px`:void 0,bottom:X.value!=="top"?`${ut.bottom}px`:void 0,width:Je?Y.value?`${Y.value}px`:void 0:`calc(100% - ${ut.left}px - ${ut.right}px)`}}),Ee=fe(()=>({zIndex:Le.value-1}));return{layoutItemStyles:Ze,layoutItemScrimStyles:Ee,zIndex:Le}},unregister:ie=>{l.delete(ie),r.delete(ie),a.delete(ie),h.delete(ie),s.delete(ie),i.value=i.value.filter(J=>J!==ie)},mainRect:P,mainStyles:M,getLayoutItem:F,items:R,layoutRect:_,rootZIndex:n});const G=Ne(()=>["v-layout",{"v-layout--full-height":e.fullHeight}]),ee=Ne(()=>({zIndex:t?n.value:void 0,position:t?"relative":void 0,overflow:t?"hidden":void 0}));return{layoutClasses:G,layoutStyles:ee,getLayoutItem:F,items:R,layoutRect:_,layoutRef:p}}function Z6(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{blueprint:t,...n}=e,i=Ba(t,n),{aliases:r={},components:a={},directives:l={}}=i,h=zv();return h.run(()=>{const s=Nne(i.defaults),p=Wie(i.display,i.ssr),_=lre(i.theme),x=Qie(i.icons),T=eie(i.locale),k=Uie(i.date,T),P=Gie(i.goTo,T);function M(F){for(const H in l)F.directive(H,l[H]);for(const H in a)F.component(H,a[H]);for(const H in r)F.component(H,uc({...r[H],name:H,aliasName:r[H].name}));const B=zv();if(B.run(()=>{_.install(F)}),F.onUnmount(()=>B.stop()),F.provide(o_,s),F.provide(Fk,p),F.provide(Hb,_),F.provide(zk,x),F.provide(a_,T),F.provide($6,k.options),F.provide(s3,k.instance),F.provide(H6,P),Gi&&i.ssr)if(F.$nuxt)F.$nuxt.hook("app:suspense:resolve",()=>{p.update()});else{const{mount:H}=F;F.mount=function(){const G=H(...arguments);return Hn(()=>p.update()),F.mount=H,G}}F.mixin({computed:{$vuetify(){return io({defaults:av.call(this,o_),display:av.call(this,Fk),theme:av.call(this,Hb),icons:av.call(this,zk),locale:av.call(this,a_),date:av.call(this,s3)})}}})}function R(){h.stop()}return{install:M,unmount:R,defaults:s,display:p,theme:_,icons:x,locale:T,date:k,goTo:P}})}const ure="3.10.8";Z6.version=ure;function av(e){const t=this.$,n=t.parent?.provides??t.vnode.appContext?.provides;if(n&&e in n)return n[e]}const m3="route-animation-arrived",dre=950;function hre(){const e=tt(!1),t=tt(0),n=tt(0),i=tt(0),r=tt([]);let a=null,l=0,h=null;function s(R){h=R}function p(){h=null}function _(){a!=null&&(cancelAnimationFrame(a),a=null)}function x(){_(),t.value=0,n.value=0,e.value=!1,h?.(t.value)}function T(){if(r.value.length){if(_(),i.value=r.value.length,t.value=Math.min(t.value,i.value-1),n.value=0,h?.(t.value),r.value.length<=1){window.dispatchEvent(new CustomEvent(m3));return}e.value=!0,l=performance.now(),a=requestAnimationFrame(P)}}function k(){e.value=!1,_()}function P(R){if(!e.value)return;const F=R-l;for(l=R,n.value+=F/dre;n.value>=1&&e.value;)if(n.value-=1,t.value<Math.max(r.value.length-1,0))t.value+=1,h?.(t.value);else{M();return}a=requestAnimationFrame(P)}function M(){_(),e.value=!1,n.value=0,window.dispatchEvent(new CustomEvent(m3))}return{isPlaying:e,progressIndex:t,segmentProgress:n,totalStops:i,routeStationIds:r,startAnimation:T,pauseAnimation:k,resetAnimation:x,attachRenderer:s,detachRenderer:p}}const p3=new Set(["BPL","SWPL","SEPL","PEPLRT","PWLRT"]),xf=new Map;let g3=!1;function th(e,t){return`${e} (${t})`}function Iy(e,t,n=1){xf.has(e)||xf.set(e,[]),xf.has(t)||xf.set(t,[]),xf.get(e).push({to:t,weight:n}),xf.get(t).push({to:e,weight:n})}function fre(){if(g3)return;Object.entries(Mf).forEach(([t,n])=>{n.forEach((i,r)=>{const a=th(i,t);if(r>0&&Iy(a,th(n[r-1],t),1),r<n.length-1&&Iy(a,th(n[r+1],t),1),p3.has(t)&&r===n.length-1&&r>0){const l=th(n[1],t);Iy(a,l,1)}if(p3.has(t)&&r===1&&n.length>2){const l=th(n[n.length-1],t);Iy(a,l,1)}})});const e=new Map;Object.entries(Mf).forEach(([t,n])=>{n.forEach(i=>{e.has(i)||e.set(i,[]),e.get(i).push(t)})}),e.forEach((t,n)=>{if(!(t.length<2))for(let i=0;i<t.length;i+=1)for(let r=i+1;r<t.length;r+=1)Iy(th(n,t[i]),th(n,t[r]),.5)}),g3=!0}function mre(e,t){if(!e||!t)return null;fre();const n=Object.keys(Mf).filter(T=>Mf[T].includes(e)).map(T=>th(e,T)),i=Object.keys(Mf).filter(T=>Mf[T].includes(t)).map(T=>th(t,T));if(!n.length||!i.length)return null;const r=new Map,a=new Map,l=[];function h(T,k){l.push({node:T,distance:k}),l.sort((P,M)=>P.distance-M.distance)}xf.forEach((T,k)=>r.set(k,1/0)),n.forEach(T=>{r.set(T,0),h(T,0)});const s=new Set(i);let p=null;for(;l.length;){const{node:T,distance:k}=l.shift();if(k!==r.get(T))continue;if(s.has(T)){p=T;break}(xf.get(T)||[]).forEach(({to:M,weight:R})=>{const F=k+R;F<r.get(M)&&(r.set(M,F),a.set(M,T),h(M,F))})}if(!p)return null;const _=[];let x=p;for(;x;){const T=x.match(/^(.*) \((.*)\)$/);_.unshift({station:T?T[1]:x,line:T?T[2]:"?"}),x=a.get(x)}return{steps:_,totalWeight:r.get(p)}}function pre(e){const t=Math.max(0,Math.round(e)),n=Math.max(0,Math.round((e-t)*2));return Math.round(t*2.2+n*4+3)}function gre(e){const t=Math.max(0,Math.round(e)),n=Math.round((e-t)*2);return Number((t*1.1+n*.3).toFixed(1))}function vre(e,t){const n=Mf[e.line]||[],i=n.indexOf(e.station),r=n.indexOf(t.station);return Math.abs(r-i)}function _re(e){if(!e?.steps?.length)return[];const t=[];let n=0;for(;n<e.steps.length-1;){const i=e.steps[n];let r=n+1;for(;r<e.steps.length&&e.steps[r].line===i.line;)r+=1;const a=e.steps[r-1];t.push({line:i.line,from:i.station,to:a.station,stops:vre(i,a)}),n=r}return t}function gP(){return{allStations:NN,shortestPath:mre,estimateTimeMinutes:pre,estimateDistanceKm:gre,summariseSegments:_re}}const yre=[{max:3.2,fare:1.19},{max:4.2,fare:1.29},{max:5.2,fare:1.4},{max:6.2,fare:1.5},{max:7.2,fare:1.59},{max:8.2,fare:1.66},{max:9.2,fare:1.73},{max:10.2,fare:1.77},{max:11.2,fare:1.81},{max:12.2,fare:1.85},{max:13.2,fare:1.89},{max:14.2,fare:1.93},{max:15.2,fare:1.98},{max:16.2,fare:2.02},{max:17.2,fare:2.06},{max:18.2,fare:2.1},{max:19.2,fare:2.14},{max:20.2,fare:2.17},{max:21.2,fare:2.2},{max:22.2,fare:2.23},{max:23.2,fare:2.26},{max:24.2,fare:2.28},{max:25.2,fare:2.3},{max:26.2,fare:2.32},{max:27.2,fare:2.33},{max:28.2,fare:2.34},{max:29.2,fare:2.35},{max:30.2,fare:2.36},{max:31.2,fare:2.37},{max:32.2,fare:2.38},{max:33.2,fare:2.39},{max:34.2,fare:2.4},{max:35.2,fare:2.41},{max:36.2,fare:2.42},{max:37.2,fare:2.43},{max:38.2,fare:2.44},{max:39.2,fare:2.45},{max:40.2,fare:2.46},{max:1/0,fare:2.47}],bre=[{max:3.2,fare:.52},{max:4.2,fare:.57},{max:5.2,fare:.63},{max:6.2,fare:.68},{max:7.2,fare:.71},{max:1/0,fare:.74}],xre=[{max:3.2,fare:.69},{max:4.2,fare:.76},{max:5.2,fare:.84},{max:6.2,fare:.91},{max:7.2,fare:.97},{max:1/0,fare:1.03}],wre=[{max:3.2,fare:.78},{max:4.2,fare:.86},{max:5.2,fare:.95},{max:6.2,fare:1.03},{max:7.2,fare:1.1},{max:8.2,fare:1.16},{max:9.2,fare:1.22},{max:10.2,fare:1.25},{max:11.2,fare:1.28},{max:12.2,fare:1.31},{max:13.2,fare:1.34},{max:14.2,fare:1.37},{max:15.2,fare:1.4},{max:16.2,fare:1.43},{max:17.2,fare:1.46},{max:18.2,fare:1.49},{max:19.2,fare:1.52},{max:20.2,fare:1.55},{max:21.2,fare:1.58},{max:22.2,fare:1.61},{max:23.2,fare:1.64},{max:24.2,fare:1.66},{max:25.2,fare:1.67},{max:26.2,fare:1.68},{max:27.2,fare:1.69},{max:28.2,fare:1.7},{max:29.2,fare:1.71},{max:30.2,fare:1.72},{max:31.2,fare:1.73},{max:32.2,fare:1.74},{max:33.2,fare:1.75},{max:34.2,fare:1.76},{max:35.2,fare:1.77},{max:36.2,fare:1.78},{max:37.2,fare:1.79},{max:38.2,fare:1.8},{max:39.2,fare:1.81},{max:40.2,fare:1.82},{max:1/0,fare:1.83}],v3={train:{primary:21,secondary:26.5,polytechnic:26.5,university:48,ns:48,senior:58,disability:58,workfare:96,adult:128},bus:{primary:24,secondary:29,polytechnic:29,university:55.5,ns:55.5,senior:58,disability:58,workfare:96,adult:128},hybrid:{primary:39,secondary:49,polytechnic:49,university:81,ns:81,senior:58,disability:58,workfare:96,adult:128}};function Tre(e){switch(e){case"primary":case"secondary":case"polytechnic":return bre;case"senior":case"disability":return xre;case"workfare":return wre;case"university":case"ns":case"adult":default:return yre}}function J6(e,t){const n=Tre(t);for(const i of n)if(e<=i.max)return i.fare;return n[n.length-1].fare}function Sre({distanceKm:e,type:t,dailyTrips:n,workingDays:i}){const r=J6(e,t),a=r*n*i,h=["train","bus","hybrid"].map(s=>{const p=v3[s][t]??v3[s].adult,_=a-p;return{mode:s,passPrice:p,savings:_,worth:_>0}});return{singleFare:r,monthlyTotal:a,breakdown:h}}function Q6(){return{fareByType:J6,analyseMonthlyPass:Sre}}const eU=Ah("v-alert-title"),cl=lt({border:[Boolean,Number,String]},"border");function Bl(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:pd();return{borderClasses:fe(()=>{const i=e.border;return i===!0||i===""?`${t}--border`:typeof i=="string"||i===0?String(i).split(" ").map(r=>`border-${r}`):[]})}}const Ere=[null,"default","comfortable","compact"],ws=lt({density:{type:String,default:"default",validator:e=>Ere.includes(e)}},"density");function Ga(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:pd();return{densityClasses:Ne(()=>`${t}--density-${e.density}`)}}const qs=lt({elevation:{type:[Number,String],validator(e){const t=parseInt(e);return!isNaN(t)&&t>=0&&t<=24}}},"elevation");function bo(e){return{elevationClasses:Ne(()=>{const n=Rs(e)?e.value:e.elevation;return n==null?[]:[`elevation-${n}`]})}}const $r=lt({rounded:{type:[Boolean,Number,String],default:void 0},tile:Boolean},"rounded");function ts(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:pd();return{roundedClasses:fe(()=>{const i=Rs(e)?e.value:e.rounded,r=Rs(e)?!1:e.tile,a=[];if(r||i===!1)a.push("rounded-0");else if(i===!0||i==="")a.push(`${t}--rounded`);else if(typeof i=="string"||i===0)for(const l of String(i).split(" "))a.push(`rounded-${l}`);return a})}}const ti=lt({tag:{type:[String,Object,Function],default:"div"}},"tag");function vP(e){return sP(()=>{const{class:t,style:n}=Cre(e);return{colorClasses:t,colorStyles:n}})}function Uo(e){const{colorClasses:t,colorStyles:n}=vP(()=>({text:Ua(e)}));return{textColorClasses:t,textColorStyles:n}}function nr(e){const{colorClasses:t,colorStyles:n}=vP(()=>({background:Ua(e)}));return{backgroundColorClasses:t,backgroundColorStyles:n}}function Cre(e){const t=Ua(e),n=[],i={};if(t.background)if(Ok(t.background)){if(i.backgroundColor=t.background,!t.text&&Dne(t.background)){const r=sc(t.background);if(r.a==null||r.a===1){const a=R6(r);i.color=a,i.caretColor=a}}}else n.push(`bg-${t.background}`);return t.text&&(Ok(t.text)?(i.color=t.text,i.caretColor=t.text):n.push(`text-${t.text}`)),{class:n,style:i}}const kre=["elevated","flat","tonal","outlined","text","plain"];function gm(e,t){return z(un,null,[e&&z("span",{key:"overlay",class:xt(`${t}__overlay`)},null),z("span",{key:"underlay",class:xt(`${t}__underlay`)},null)])}const Nc=lt({color:String,variant:{type:String,default:"elevated",validator:e=>kre.includes(e)}},"variant");function lg(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:pd();const n=Ne(()=>{const{variant:a}=Ua(e);return`${t}--variant-${a}`}),{colorClasses:i,colorStyles:r}=vP(()=>{const{variant:a,color:l}=Ua(e);return{[["elevated","flat"].includes(a)?"background":"text"]:l}});return{colorClasses:i,colorStyles:r,variantClasses:n}}const tU=lt({baseColor:String,divided:Boolean,direction:{type:String,default:"horizontal"},...cl(),...wn(),...ws(),...qs(),...$r(),...ti(),...Ai(),...Nc()},"VBtnGroup"),Uk=At()({name:"VBtnGroup",props:tU(),setup(e,t){let{slots:n}=t;const{themeClasses:i}=Zi(e),{densityClasses:r}=Ga(e),{borderClasses:a}=Bl(e),{elevationClasses:l}=bo(e),{roundedClasses:h}=ts(e);es({VBtn:{height:Ne(()=>e.direction==="horizontal"?"auto":null),baseColor:Ne(()=>e.baseColor),color:Ne(()=>e.color),density:Ne(()=>e.density),flat:!0,variant:Ne(()=>e.variant)}}),Vt(()=>se(e.tag,{class:xt(["v-btn-group",`v-btn-group--${e.direction}`,{"v-btn-group--divided":e.divided},i.value,a.value,r.value,l.value,h.value,e.class]),style:Yt(e.style)},n))}}),cg=lt({modelValue:{type:null,default:void 0},multiple:Boolean,mandatory:[Boolean,String],max:Number,selectedClass:String,disabled:Boolean},"group"),ug=lt({value:null,disabled:Boolean,selectedClass:String},"group-item");function om(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const i=xs("useGroupItem");if(!i)throw new Error("[Vuetify] useGroupItem composable must be used inside a component setup function");const r=ua();Dr(Symbol.for(`${t.description}:id`),r);const a=wi(t,null);if(!a){if(!n)return a;throw new Error(`[Vuetify] Could not find useGroup injection with symbol ${t.description}`)}const l=Ne(()=>e.value),h=fe(()=>!!(a.disabled.value||e.disabled));function s(){a?.register({id:r,value:l,disabled:h},i)}function p(){a?.unregister(r)}s(),Nr(()=>p());const _=fe(()=>a.isSelected(r)),x=fe(()=>a.items.value[0].id===r),T=fe(()=>a.items.value[a.items.value.length-1].id===r),k=fe(()=>_.value&&[a.selectedClass.value,e.selectedClass]);return qt(_,P=>{i.emit("group:selected",{value:P})},{flush:"sync"}),{id:r,isSelected:_,isFirst:x,isLast:T,toggle:()=>a.select(r,!_.value),select:P=>a.select(r,P),selectedClass:k,value:l,disabled:h,group:a,register:s,unregister:p}}function vm(e,t){let n=!1;const i=io([]),r=Pn(e,"modelValue",[],T=>T===void 0?[]:nU(i,T===null?[null]:qr(T)),T=>{const k=Are(i,T);return e.multiple?k:k[0]}),a=xs("useGroup");function l(T,k){const P=T,M=Symbol.for(`${t.description}:id`),F=yv(M,a?.vnode).indexOf(k);xi(P.value)===void 0&&(P.value=F,P.useIndexAsValue=!0),F>-1?i.splice(F,0,P):i.push(P)}function h(T){if(n)return;s();const k=i.findIndex(P=>P.id===T);i.splice(k,1)}function s(){const T=i.find(k=>!k.disabled);T&&e.mandatory==="force"&&!r.value.length&&(r.value=[T.id])}Kr(()=>{s()}),Nr(()=>{n=!0}),aT(()=>{for(let T=0;T<i.length;T++)i[T].useIndexAsValue&&(i[T].value=T)});function p(T,k){const P=i.find(M=>M.id===T);if(!(k&&P?.disabled))if(e.multiple){const M=r.value.slice(),R=M.findIndex(B=>B===T),F=~R;if(k=k??!F,F&&e.mandatory&&M.length<=1||!F&&e.max!=null&&M.length+1>e.max)return;R<0&&k?M.push(T):R>=0&&!k&&M.splice(R,1),r.value=M}else{const M=r.value.includes(T);if(e.mandatory&&M||!M&&!k)return;r.value=k??!M?[T]:[]}}function _(T){if(e.multiple,r.value.length){const k=r.value[0],P=i.findIndex(F=>F.id===k);let M=(P+T)%i.length,R=i[M];for(;R.disabled&&M!==P;)M=(M+T)%i.length,R=i[M];if(R.disabled)return;r.value=[i[M].id]}else{const k=i.find(P=>!P.disabled);k&&(r.value=[k.id])}}const x={register:l,unregister:h,selected:r,select:p,disabled:Ne(()=>e.disabled),prev:()=>_(i.length-1),next:()=>_(1),isSelected:T=>r.value.includes(T),selectedClass:Ne(()=>e.selectedClass),items:Ne(()=>i),getItemIndex:T=>Ire(i,T)};return Dr(t,x),x}function Ire(e,t){const n=nU(e,[t]);return n.length?e.findIndex(i=>i.id===n[0]):-1}function nU(e,t){const n=[];return t.forEach(i=>{const r=e.find(l=>_o(i,l.value)),a=e[i];r?.value!==void 0?n.push(r.id):a?.useIndexAsValue&&n.push(a.id)}),n}function Are(e,t){const n=[];return t.forEach(i=>{const r=e.findIndex(a=>a.id===i);if(~r){const a=e[r];n.push(a.value!==void 0?a.value:r)}}),n}const _P=Symbol.for("vuetify:v-btn-toggle"),Pre=lt({...tU(),...cg()},"VBtnToggle"),Mre=At()({name:"VBtnToggle",props:Pre(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{isSelected:i,next:r,prev:a,select:l,selected:h}=vm(e,_P);return Vt(()=>{const s=Uk.filterProps(e);return se(Uk,It({class:["v-btn-toggle",e.class]},s,{style:e.style}),{default:()=>[n.default?.({isSelected:i,next:r,prev:a,select:l,selected:h})]})}),{next:r,prev:a,select:l}}}),Dre=lt({defaults:Object,disabled:Boolean,reset:[Number,String],root:[Boolean,String],scoped:Boolean},"VDefaultsProvider"),ui=At(!1)({name:"VDefaultsProvider",props:Dre(),setup(e,t){let{slots:n}=t;const{defaults:i,disabled:r,reset:a,root:l,scoped:h}=g_(e);return es(i,{reset:a,root:l,scoped:h,disabled:r}),()=>n.default?.()}}),Lre=["x-small","small","default","large","x-large"],gd=lt({size:{type:[String,Number],default:"default"}},"size");function E_(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:pd();return sP(()=>{const n=e.size;let i,r;return k1(Lre,n)?i=`${t}--size-${n}`:n&&(r={width:pn(n),height:pn(n)}),{sizeClasses:i,sizeStyles:r}})}const Rre=lt({color:String,disabled:Boolean,start:Boolean,end:Boolean,icon:kn,opacity:[String,Number],...wn(),...gd(),...ti({tag:"i"}),...Ai()},"VIcon"),_i=At()({name:"VIcon",props:Rre(),setup(e,t){let{attrs:n,slots:i}=t;const r=Zt(),{themeClasses:a}=FT(),{iconData:l}=ere(()=>r.value||e.icon),{sizeClasses:h}=E_(e),{textColorClasses:s,textColorStyles:p}=Uo(()=>e.color);return Vt(()=>{const _=i.default?.();_&&(r.value=y6(_).filter(T=>T.type===d0&&T.children&&typeof T.children=="string")[0]?.children);const x=!!(n.onClick||n.onClickOnce);return se(l.value.component,{tag:e.tag,icon:l.value.icon,class:xt(["v-icon","notranslate",a.value,h.value,s.value,{"v-icon--clickable":x,"v-icon--disabled":e.disabled,"v-icon--start":e.start,"v-icon--end":e.end},e.class]),style:Yt([{"--v-icon-opacity":e.opacity},h.value?void 0:{fontSize:pn(e.size),height:pn(e.size),width:pn(e.size)},p.value,e.style]),role:x?"button":void 0,"aria-hidden":!x,tabindex:x?e.disabled?-1:0:void 0},{default:()=>[_]})}),{}}});function L0(e,t){const n=tt(),i=Zt(!1);if(tP){const r=new IntersectionObserver(a=>{i.value=!!a.find(l=>l.isIntersecting)},t);so(()=>{r.disconnect()}),qt(n,(a,l)=>{l&&(r.unobserve(l),i.value=!1),a&&r.observe(a)},{flush:"post"})}return{intersectionRef:n,isIntersecting:i}}const Ore=lt({bgColor:String,color:String,indeterminate:[Boolean,String],modelValue:{type:[Number,String],default:0},rotate:{type:[Number,String],default:0},width:{type:[Number,String],default:4},...wn(),...gd(),...ti({tag:"div"}),...Ai()},"VProgressCircular"),Gp=At()({name:"VProgressCircular",props:Ore(),setup(e,t){let{slots:n}=t;const i=20,r=2*Math.PI*i,a=tt(),{themeClasses:l}=Zi(e),{sizeClasses:h,sizeStyles:s}=E_(e),{textColorClasses:p,textColorStyles:_}=Uo(()=>e.color),{textColorClasses:x,textColorStyles:T}=Uo(()=>e.bgColor),{intersectionRef:k,isIntersecting:P}=L0(),{resizeRef:M,contentRect:R}=zc(),F=Ne(()=>Er(parseFloat(e.modelValue),0,100)),B=Ne(()=>Number(e.width)),H=Ne(()=>s.value?Number(e.size):R.value?R.value.width:Math.max(B.value,32)),G=Ne(()=>i/(1-B.value/H.value)*2),ee=Ne(()=>B.value/H.value*G.value),ie=Ne(()=>pn((100-F.value)/100*r));return Ur(()=>{k.value=a.value,M.value=a.value}),Vt(()=>se(e.tag,{ref:a,class:xt(["v-progress-circular",{"v-progress-circular--indeterminate":!!e.indeterminate,"v-progress-circular--visible":P.value,"v-progress-circular--disable-shrink":e.indeterminate&&(e.indeterminate==="disable-shrink"||ud())},l.value,h.value,p.value,e.class]),style:Yt([s.value,_.value,e.style]),role:"progressbar","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":e.indeterminate?void 0:F.value},{default:()=>[z("svg",{style:{transform:`rotate(calc(-90deg + ${Number(e.rotate)}deg))`},xmlns:"http://www.w3.org/2000/svg",viewBox:`0 0 ${G.value} ${G.value}`},[z("circle",{class:xt(["v-progress-circular__underlay",x.value]),style:Yt(T.value),fill:"transparent",cx:"50%",cy:"50%",r:i,"stroke-width":ee.value,"stroke-dasharray":r,"stroke-dashoffset":0},null),z("circle",{class:"v-progress-circular__overlay",fill:"transparent",cx:"50%",cy:"50%",r:i,"stroke-width":ee.value,"stroke-dasharray":r,"stroke-dashoffset":ie.value},null)]),n.default&&z("div",{class:"v-progress-circular__content"},[n.default({value:F.value})])]})),{}}}),Os=lt({height:[Number,String],maxHeight:[Number,String],maxWidth:[Number,String],minHeight:[Number,String],minWidth:[Number,String],width:[Number,String]},"dimension");function Vs(e){return{dimensionStyles:fe(()=>{const n={},i=pn(e.height),r=pn(e.maxHeight),a=pn(e.maxWidth),l=pn(e.minHeight),h=pn(e.minWidth),s=pn(e.width);return i!=null&&(n.height=i),r!=null&&(n.maxHeight=r),a!=null&&(n.maxWidth=a),l!=null&&(n.minHeight=l),h!=null&&(n.minWidth=h),s!=null&&(n.width=s),n})}}const _3={center:"center",top:"bottom",bottom:"top",left:"right",right:"left"},Ph=lt({location:String},"location");function dg(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2?arguments[2]:void 0;const{isRtl:i}=Gs();return{locationStyles:fe(()=>{if(!e.location)return{};const{side:a,align:l}=Lk(e.location.split(" ").length>1?e.location:`${e.location} center`,i.value);function h(p){return n?n(p):0}const s={};return a!=="center"&&(t?s[_3[a]]=`calc(100% - ${h(a)}px)`:s[a]=0),l!=="center"?t?s[_3[l]]=`calc(100% - ${h(l)}px)`:s[l]=0:(a==="center"?s.top=s.left="50%":s[{top:"left",bottom:"left",left:"top",right:"top"}[a]]="50%",s.transform={top:"translateX(-50%)",bottom:"translateX(-50%)",left:"translateY(-50%)",right:"translateY(-50%)",center:"translate(-50%, -50%)"}[a]),s})}}const Vre=lt({chunkCount:{type:[Number,String],default:null},chunkWidth:{type:[Number,String],default:null},chunkGap:{type:[Number,String],default:4}},"chunks");function Bre(e,t){const n=Ne(()=>!!e.chunkCount||!!e.chunkWidth),i=fe(()=>{const h=Ua(t);if(!h)return 0;if(!e.chunkCount)return Number(e.chunkWidth);const s=Number(e.chunkCount);return(h-Number(e.chunkGap)*(s-1))/s}),r=Ne(()=>Number(e.chunkGap)),a=fe(()=>{if(!n.value)return{};const h=pn(r.value),s=pn(i.value);return{maskRepeat:"repeat-x",maskImage:`linear-gradient(90deg, #000, #000 ${s}, transparent ${s}, transparent)`,maskSize:`calc(${s} + ${h}) 100%`}});function l(h){const s=Ua(t);if(!s)return h;const p=100*r.value/s,_=100*(i.value+r.value)/s,x=Math.floor((h+p)/_);return Er(0,x*_-p/2,100)}return{hasChunks:n,chunksMaskStyles:a,snapValueToChunk:l}}const Fre=lt({absolute:Boolean,active:{type:Boolean,default:!0},bgColor:String,bgOpacity:[Number,String],bufferValue:{type:[Number,String],default:0},bufferColor:String,bufferOpacity:[Number,String],clickable:Boolean,color:String,height:{type:[Number,String],default:4},indeterminate:Boolean,max:{type:[Number,String],default:100},modelValue:{type:[Number,String],default:0},opacity:[Number,String],reverse:Boolean,stream:Boolean,striped:Boolean,roundedBar:Boolean,...Vre(),...wn(),...Ph({location:"top"}),...$r(),...ti(),...Ai()},"VProgressLinear"),R0=At()({name:"VProgressLinear",props:Fre(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const i=tt(),r=Pn(e,"modelValue"),{isRtl:a,rtlClasses:l}=Gs(),{themeClasses:h}=Zi(e),{locationStyles:s}=dg(e),{textColorClasses:p,textColorStyles:_}=Uo(()=>e.color),{backgroundColorClasses:x,backgroundColorStyles:T}=nr(()=>e.bgColor||e.color),{backgroundColorClasses:k,backgroundColorStyles:P}=nr(()=>e.bufferColor||e.bgColor||e.color),{backgroundColorClasses:M,backgroundColorStyles:R}=nr(()=>e.color),{roundedClasses:F}=ts(e),{intersectionRef:B,isIntersecting:H}=L0(),G=fe(()=>parseFloat(e.max)),ee=fe(()=>parseFloat(e.height)),ie=fe(()=>Er(parseFloat(e.bufferValue)/G.value*100,0,100)),J=fe(()=>Er(parseFloat(r.value)/G.value*100,0,100)),$=fe(()=>a.value!==e.reverse),W=fe(()=>e.indeterminate?"fade-transition":"slide-x-transition"),X=Zt(0),{hasChunks:re,chunksMaskStyles:Y,snapValueToChunk:Z}=Bre(e,X);aa(re,()=>{const{resizeRef:nt}=zc(We=>X.value=We[0].contentRect.width);Ur(()=>nt.value=i.value)});const ge=fe(()=>re.value?Z(ie.value):ie.value),be=fe(()=>re.value?Z(J.value):J.value);function Be(nt){if(!B.value)return;const{left:We,right:Le,width:Ze}=B.value.getBoundingClientRect(),Ee=$.value?Ze-nt.clientX+(Le-Ze):nt.clientX-We;r.value=Math.round(Ee/Ze*G.value)}return Ur(()=>{B.value=i.value}),Vt(()=>se(e.tag,{ref:i,class:xt(["v-progress-linear",{"v-progress-linear--absolute":e.absolute,"v-progress-linear--active":e.active&&H.value,"v-progress-linear--reverse":$.value,"v-progress-linear--rounded":e.rounded,"v-progress-linear--rounded-bar":e.roundedBar,"v-progress-linear--striped":e.striped,"v-progress-linear--clickable":e.clickable},F.value,h.value,l.value,e.class]),style:Yt([{bottom:e.location==="bottom"?0:void 0,top:e.location==="top"?0:void 0,height:e.active?pn(ee.value):0,"--v-progress-linear-height":pn(ee.value),...e.absolute?s.value:{}},Y.value,e.style]),role:"progressbar","aria-hidden":e.active?"false":"true","aria-valuemin":"0","aria-valuemax":e.max,"aria-valuenow":e.indeterminate?void 0:Math.min(parseFloat(r.value),G.value),onClick:e.clickable&&Be},{default:()=>[e.stream&&z("div",{key:"stream",class:xt(["v-progress-linear__stream",p.value]),style:{..._.value,[$.value?"left":"right"]:pn(-ee.value),borderTop:`${pn(ee.value/2)} dotted`,opacity:parseFloat(e.bufferOpacity),top:`calc(50% - ${pn(ee.value/4)})`,width:pn(100-ie.value,"%"),"--v-progress-linear-stream-to":pn(ee.value*($.value?1:-1))}},null),z("div",{class:xt(["v-progress-linear__background",x.value]),style:Yt([T.value,{opacity:parseFloat(e.bgOpacity),width:e.stream?0:void 0}])},null),z("div",{class:xt(["v-progress-linear__buffer",k.value]),style:Yt([P.value,{opacity:parseFloat(e.bufferOpacity),width:pn(ge.value,"%")}])},null),se(od,{name:W.value},{default:()=>[e.indeterminate?z("div",{class:"v-progress-linear__indeterminate"},[["long","short"].map(nt=>z("div",{key:nt,class:xt(["v-progress-linear__indeterminate",nt,M.value]),style:Yt(R.value)},null))]):z("div",{class:xt(["v-progress-linear__determinate",M.value]),style:Yt([R.value,{width:pn(be.value,"%")}])},null)]}),n.default&&z("div",{class:"v-progress-linear__content"},[n.default({value:J.value,buffer:ie.value})])]})),{}}}),zT=lt({loading:[Boolean,String]},"loader");function O0(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:pd();return{loaderClasses:Ne(()=>({[`${t}--loading`]:e.loading}))}}function V0(e,t){let{slots:n}=t;return z("div",{class:xt(`${e.name}__loader`)},[n.default?.({color:e.color,isActive:e.active})||se(R0,{absolute:e.absolute,active:e.active,color:e.color,height:"2",indeterminate:!0},null)])}const zre=["static","relative","fixed","absolute","sticky"],C_=lt({position:{type:String,validator:e=>zre.includes(e)}},"position");function k_(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:pd();return{positionClasses:Ne(()=>e.position?`${t}--${e.position}`:void 0)}}function Nre(){const e=xs("useRoute");return fe(()=>e?.proxy?.$route)}function iU(){return xs("useRouter")?.proxy?.$router}function B0(e,t){const n=az("RouterLink"),i=Ne(()=>!!(e.href||e.to)),r=fe(()=>i?.value||BV(t,"click")||BV(e,"click"));if(typeof n=="string"||!("useLink"in n)){const x=Ne(()=>e.href);return{isLink:i,isRouterLink:Ne(()=>!1),isClickable:r,href:x,linkProps:io({href:x})}}const a=n.useLink({to:Ne(()=>e.to||""),replace:Ne(()=>e.replace)}),l=fe(()=>e.to?a:void 0),h=Nre(),s=fe(()=>l.value?e.exact?h.value?l.value.isExactActive?.value&&_o(l.value.route.value.query,h.value.query):l.value.isExactActive?.value??!1:l.value.isActive?.value??!1:!1),p=fe(()=>e.to?l.value?.route.value.href:e.href),_=Ne(()=>!!e.to);return{isLink:i,isRouterLink:_,isClickable:r,isActive:s,route:l.value?.route,navigate:l.value?.navigate,href:p,linkProps:io({href:p,"aria-current":Ne(()=>s.value?"page":void 0),"aria-disabled":Ne(()=>e.disabled&&i.value?"true":void 0),tabindex:Ne(()=>e.disabled&&i.value?"-1":void 0)})}}const F0=lt({href:String,replace:Boolean,to:[String,Object],exact:Boolean},"router");let aC=!1;function Ure(e,t){let n=!1,i,r;Gi&&e?.beforeEach&&(Hn(()=>{window.addEventListener("popstate",a),i=e.beforeEach((l,h,s)=>{aC?n?t(s):s():setTimeout(()=>n?t(s):s()),aC=!0}),r=e?.afterEach(()=>{aC=!1})}),so(()=>{window.removeEventListener("popstate",a),i?.(),r?.()}));function a(l){l.state?.replaced||(n=!0,setTimeout(()=>n=!1))}}function $re(e,t){qt(()=>e.isActive?.value,n=>{e.isLink.value&&n!=null&&t&&Hn(()=>{t(n)})},{immediate:!0})}const $k=Symbol("rippleStop"),jre=80;function y3(e,t){e.style.transform=t,e.style.webkitTransform=t}function jk(e){return e.constructor.name==="TouchEvent"}function rU(e){return e.constructor.name==="KeyboardEvent"}const Wre=function(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=0,r=0;if(!rU(e)){const x=t.getBoundingClientRect(),T=jk(e)?e.touches[e.touches.length-1]:e;i=T.clientX-x.left,r=T.clientY-x.top}let a=0,l=.3;t._ripple?.circle?(l=.15,a=t.clientWidth/2,a=n.center?a:a+Math.sqrt((i-a)**2+(r-a)**2)/4):a=Math.sqrt(t.clientWidth**2+t.clientHeight**2)/2;const h=`${(t.clientWidth-a*2)/2}px`,s=`${(t.clientHeight-a*2)/2}px`,p=n.center?h:`${i-a}px`,_=n.center?s:`${r-a}px`;return{radius:a,scale:l,x:p,y:_,centerX:h,centerY:s}},O1={show(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!t?._ripple?.enabled)return;const i=document.createElement("span"),r=document.createElement("span");i.appendChild(r),i.className="v-ripple__container",n.class&&(i.className+=` ${n.class}`);const{radius:a,scale:l,x:h,y:s,centerX:p,centerY:_}=Wre(e,t,n),x=`${a*2}px`;r.className="v-ripple__animation",r.style.width=x,r.style.height=x,t.appendChild(i);const T=window.getComputedStyle(t);T&&T.position==="static"&&(t.style.position="relative",t.dataset.previousPosition="static"),r.classList.add("v-ripple__animation--enter"),r.classList.add("v-ripple__animation--visible"),y3(r,`translate(${h}, ${s}) scale3d(${l},${l},${l})`),r.dataset.activated=String(performance.now()),requestAnimationFrame(()=>{requestAnimationFrame(()=>{r.classList.remove("v-ripple__animation--enter"),r.classList.add("v-ripple__animation--in"),y3(r,`translate(${p}, ${_}) scale3d(1,1,1)`)})})},hide(e){if(!e?._ripple?.enabled)return;const t=e.getElementsByClassName("v-ripple__animation");if(t.length===0)return;const n=Array.from(t).findLast(a=>!a.dataset.isHiding);if(n)n.dataset.isHiding="true";else return;const i=performance.now()-Number(n.dataset.activated),r=Math.max(250-i,0);setTimeout(()=>{n.classList.remove("v-ripple__animation--in"),n.classList.add("v-ripple__animation--out"),setTimeout(()=>{e.getElementsByClassName("v-ripple__animation").length===1&&e.dataset.previousPosition&&(e.style.position=e.dataset.previousPosition,delete e.dataset.previousPosition),n.parentNode?.parentNode===e&&e.removeChild(n.parentNode)},300)},r)}};function sU(e){return typeof e>"u"||!!e}function qb(e){const t={},n=e.currentTarget;if(!(!n?._ripple||n._ripple.touched||e[$k])){if(e[$k]=!0,jk(e))n._ripple.touched=!0,n._ripple.isTouch=!0;else if(n._ripple.isTouch)return;if(t.center=n._ripple.centered||rU(e),n._ripple.class&&(t.class=n._ripple.class),jk(e)){if(n._ripple.showTimerCommit)return;n._ripple.showTimerCommit=()=>{O1.show(e,n,t)},n._ripple.showTimer=window.setTimeout(()=>{n?._ripple?.showTimerCommit&&(n._ripple.showTimerCommit(),n._ripple.showTimerCommit=null)},jre)}else O1.show(e,n,t)}}function b3(e){e[$k]=!0}function Ql(e){const t=e.currentTarget;if(t?._ripple){if(window.clearTimeout(t._ripple.showTimer),e.type==="touchend"&&t._ripple.showTimerCommit){t._ripple.showTimerCommit(),t._ripple.showTimerCommit=null,t._ripple.showTimer=window.setTimeout(()=>{Ql(e)});return}window.setTimeout(()=>{t._ripple&&(t._ripple.touched=!1)}),O1.hide(t)}}function oU(e){const t=e.currentTarget;t?._ripple&&(t._ripple.showTimerCommit&&(t._ripple.showTimerCommit=null),window.clearTimeout(t._ripple.showTimer))}let Kb=!1;function x3(e,t){!Kb&&t.includes(e.key)&&(Kb=!0,qb(e))}function aU(e){Kb=!1,Ql(e)}function lU(e){Kb&&(Kb=!1,Ql(e))}function cU(e,t,n){const{value:i,modifiers:r}=t,a=sU(i);a||O1.hide(e),e._ripple=e._ripple??{},e._ripple.enabled=a,e._ripple.centered=r.center,e._ripple.circle=r.circle;const l=Ub(i)?i:{};l.class&&(e._ripple.class=l.class);const h=l.keys??["Enter","Space"];if(e._ripple.keyDownHandler=s=>x3(s,h),a&&!n){if(r.stop){e.addEventListener("touchstart",b3,{passive:!0}),e.addEventListener("mousedown",b3);return}e.addEventListener("touchstart",qb,{passive:!0}),e.addEventListener("touchend",Ql,{passive:!0}),e.addEventListener("touchmove",oU,{passive:!0}),e.addEventListener("touchcancel",Ql),e.addEventListener("mousedown",qb),e.addEventListener("mouseup",Ql),e.addEventListener("mouseleave",Ql),e.addEventListener("keydown",s=>x3(s,h)),e.addEventListener("keyup",aU),e.addEventListener("blur",lU),e.addEventListener("dragstart",Ql,{passive:!0})}else!a&&n&&uU(e)}function uU(e){e.removeEventListener("mousedown",qb),e.removeEventListener("touchstart",qb),e.removeEventListener("touchend",Ql),e.removeEventListener("touchmove",oU),e.removeEventListener("touchcancel",Ql),e.removeEventListener("mouseup",Ql),e.removeEventListener("mouseleave",Ql),e._ripple?.keyDownHandler&&e.removeEventListener("keydown",e._ripple.keyDownHandler),e.removeEventListener("keyup",aU),e.removeEventListener("dragstart",Ql),e.removeEventListener("blur",lU)}function Hre(e,t){cU(e,t,!1)}function Gre(e){uU(e),delete e._ripple}function qre(e,t){if(t.value===t.oldValue)return;const n=sU(t.oldValue);cU(e,t,n)}const Wa={mounted:Hre,unmounted:Gre,updated:qre},NT=lt({active:{type:Boolean,default:void 0},activeColor:String,baseColor:String,symbol:{type:null,default:_P},flat:Boolean,icon:[Boolean,String,Function,Object],prependIcon:kn,appendIcon:kn,block:Boolean,readonly:Boolean,slim:Boolean,stacked:Boolean,spaced:String,ripple:{type:[Boolean,Object],default:!0},text:{type:[String,Number,Boolean],default:void 0},...cl(),...wn(),...ws(),...Os(),...qs(),...ug(),...zT(),...Ph(),...C_(),...$r(),...F0(),...gd(),...ti({tag:"button"}),...Ai(),...Nc({variant:"elevated"})},"VBtn"),ci=At()({name:"VBtn",props:NT(),emits:{"group:selected":e=>!0},setup(e,t){let{attrs:n,slots:i}=t;const{themeClasses:r}=Zi(e),{borderClasses:a}=Bl(e),{densityClasses:l}=Ga(e),{dimensionStyles:h}=Vs(e),{elevationClasses:s}=bo(e),{loaderClasses:p}=O0(e),{locationStyles:_}=dg(e),{positionClasses:x}=k_(e),{roundedClasses:T}=ts(e),{sizeClasses:k,sizeStyles:P}=E_(e),M=om(e,e.symbol,!1),R=B0(e,n),F=fe(()=>e.active!==void 0?e.active:R.isRouterLink.value?R.isActive?.value:M?.isSelected.value),B=Ne(()=>F.value?e.activeColor??e.color:e.color),H=fe(()=>({color:M?.isSelected.value&&(!R.isLink.value||R.isActive?.value)||!M||R.isActive?.value?B.value??e.baseColor:e.baseColor,variant:e.variant})),{colorClasses:G,colorStyles:ee,variantClasses:ie}=lg(H),J=fe(()=>M?.disabled.value||e.disabled),$=Ne(()=>e.variant==="elevated"&&!(e.disabled||e.flat||e.border)),W=fe(()=>{if(!(e.value===void 0||typeof e.value=="symbol"))return Object(e.value)===e.value?JSON.stringify(e.value,null,0):e.value});function X(re){J.value||R.isLink.value&&(re.metaKey||re.ctrlKey||re.shiftKey||re.button!==0||n.target==="_blank")||(R.isRouterLink.value?R.navigate?.(re):M?.toggle())}return $re(R,M?.select),Vt(()=>{const re=R.isLink.value?"a":e.tag,Y=!!(e.prependIcon||i.prepend),Z=!!(e.appendIcon||i.append),ge=!!(e.icon&&e.icon!==!0);return Ii(se(re,It(R.linkProps,{type:re==="a"?void 0:"button",class:["v-btn",M?.selectedClass.value,{"v-btn--active":F.value,"v-btn--block":e.block,"v-btn--disabled":J.value,"v-btn--elevated":$.value,"v-btn--flat":e.flat,"v-btn--icon":!!e.icon,"v-btn--loading":e.loading,"v-btn--readonly":e.readonly,"v-btn--slim":e.slim,"v-btn--stacked":e.stacked},e.spaced?["v-btn--spaced",`v-btn--spaced-${e.spaced}`]:[],r.value,a.value,G.value,l.value,s.value,p.value,x.value,T.value,k.value,ie.value,e.class],style:[ee.value,h.value,_.value,P.value,e.style],"aria-busy":e.loading?!0:void 0,disabled:J.value&&re!=="a"||void 0,tabindex:e.loading||e.readonly?-1:void 0,onClick:X,value:W.value}),{default:()=>[gm(!0,"v-btn"),!e.icon&&Y&&z("span",{key:"prepend",class:"v-btn__prepend"},[i.prepend?se(ui,{key:"prepend-defaults",disabled:!e.prependIcon,defaults:{VIcon:{icon:e.prependIcon}}},i.prepend):se(_i,{key:"prepend-icon",icon:e.prependIcon},null)]),z("span",{class:"v-btn__content","data-no-activator":""},[!i.default&&ge?se(_i,{key:"content-icon",icon:e.icon},null):se(ui,{key:"content-defaults",disabled:!ge,defaults:{VIcon:{icon:e.icon}}},{default:()=>[i.default?.()??sn(e.text)]})]),!e.icon&&Z&&z("span",{key:"append",class:"v-btn__append"},[i.append?se(ui,{key:"append-defaults",disabled:!e.appendIcon,defaults:{VIcon:{icon:e.appendIcon}}},i.append):se(_i,{key:"append-icon",icon:e.appendIcon},null)]),!!e.loading&&z("span",{key:"loader",class:"v-btn__loader"},[i.loader?.()??se(Gp,{color:typeof e.loading=="boolean"?void 0:e.loading,indeterminate:!0,width:"2"},null)])]}),[[Wa,!J.value&&e.ripple,"",{center:!!e.icon}]])}),{group:M}}}),Kre=lt({iconSize:[Number,String],iconSizes:{type:Array,default:()=>[["x-small",10],["small",16],["default",24],["large",28],["x-large",32]]}},"iconSize");function Xre(e,t){return{iconSize:fe(()=>{const i=new Map(e.iconSizes),r=e.iconSize??t()??"default";return i.has(r)?i.get(r):r})}}const Yre=["success","info","warning","error"],Zre=lt({border:{type:[Boolean,String],validator:e=>typeof e=="boolean"||["top","end","bottom","start"].includes(e)},borderColor:String,closable:Boolean,closeIcon:{type:kn,default:"$close"},closeLabel:{type:String,default:"$vuetify.close"},icon:{type:[Boolean,String,Function,Object],default:null},modelValue:{type:Boolean,default:!0},prominent:Boolean,title:String,text:String,type:{type:String,validator:e=>Yre.includes(e)},...wn(),...ws(),...Os(),...qs(),...Kre(),...Ph(),...C_(),...$r(),...ti(),...Ai(),...Nc({variant:"flat"})},"VAlert"),V1=At()({name:"VAlert",props:Zre(),emits:{"click:close":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{emit:n,slots:i}=t;const r=Pn(e,"modelValue"),a=Ne(()=>{if(e.icon!==!1)return e.type?e.icon??`$${e.type}`:e.icon}),{iconSize:l}=Xre(e,()=>e.prominent?44:void 0),{themeClasses:h}=Zi(e),{colorClasses:s,colorStyles:p,variantClasses:_}=lg(()=>({color:e.color??e.type,variant:e.variant})),{densityClasses:x}=Ga(e),{dimensionStyles:T}=Vs(e),{elevationClasses:k}=bo(e),{locationStyles:P}=dg(e),{positionClasses:M}=k_(e),{roundedClasses:R}=ts(e),{textColorClasses:F,textColorStyles:B}=Uo(()=>e.borderColor),{t:H}=hr(),G=Ne(()=>({"aria-label":H(e.closeLabel),onClick(ee){r.value=!1,n("click:close",ee)}}));return()=>{const ee=!!(i.prepend||a.value),ie=!!(i.title||e.title),J=!!(i.close||e.closable),$={density:e.density,icon:a.value,size:e.iconSize||e.prominent?l.value:void 0};return r.value&&se(e.tag,{class:xt(["v-alert",e.border&&{"v-alert--border":!!e.border,[`v-alert--border-${e.border===!0?"start":e.border}`]:!0},{"v-alert--prominent":e.prominent},h.value,s.value,x.value,k.value,M.value,R.value,_.value,e.class]),style:Yt([p.value,T.value,P.value,e.style]),role:"alert"},{default:()=>[gm(!1,"v-alert"),e.border&&z("div",{key:"border",class:xt(["v-alert__border",F.value]),style:Yt(B.value)},null),ee&&z("div",{key:"prepend",class:"v-alert__prepend"},[i.prepend?se(ui,{key:"prepend-defaults",disabled:!a.value,defaults:{VIcon:{...$}}},i.prepend):se(_i,It({key:"prepend-icon"},$),null)]),z("div",{class:"v-alert__content"},[ie&&se(eU,{key:"title"},{default:()=>[i.title?.()??e.title]}),i.text?.()??e.text,i.default?.()]),i.append&&z("div",{key:"append",class:"v-alert__append"},[i.append()]),J&&z("div",{key:"close",class:"v-alert__close"},[i.close?se(ui,{key:"close-defaults",defaults:{VBtn:{icon:e.closeIcon,size:"x-small",variant:"text"}}},{default:()=>[i.close?.({props:G.value})]}):se(ci,It({key:"close-btn",icon:e.closeIcon,size:"x-small",variant:"text"},G.value),null)])]})}}}),Jre=lt({...wn(),...ti()},"VCardActions"),dU=At()({name:"VCardActions",props:Jre(),setup(e,t){let{slots:n}=t;return es({VBtn:{slim:!0,variant:"text"}}),Vt(()=>se(e.tag,{class:xt(["v-card-actions",e.class]),style:Yt(e.style)},n)),{}}}),Qre=lt({opacity:[Number,String],...wn(),...ti()},"VCardSubtitle"),hU=At()({name:"VCardSubtitle",props:Qre(),setup(e,t){let{slots:n}=t;return Vt(()=>se(e.tag,{class:xt(["v-card-subtitle",e.class]),style:Yt([{"--v-card-subtitle-opacity":e.opacity},e.style])},n)),{}}}),fU=Ah("v-card-title");function ese(e){return{aspectStyles:fe(()=>{const t=Number(e.aspectRatio);return t?{paddingBottom:String(1/t*100)+"%"}:void 0})}}const mU=lt({aspectRatio:[String,Number],contentClass:null,inline:Boolean,...wn(),...Os()},"VResponsive"),Wk=At()({name:"VResponsive",props:mU(),setup(e,t){let{slots:n}=t;const{aspectStyles:i}=ese(e),{dimensionStyles:r}=Vs(e);return Vt(()=>z("div",{class:xt(["v-responsive",{"v-responsive--inline":e.inline},e.class]),style:Yt([r.value,e.style])},[z("div",{class:"v-responsive__sizer",style:Yt(i.value)},null),n.additional?.(),n.default&&z("div",{class:xt(["v-responsive__content",e.contentClass])},[n.default()])])),{}}}),Mh=lt({transition:{type:null,default:"fade-transition",validator:e=>e!==!0}},"transition"),Fa=(e,t)=>{let{slots:n}=t;const{transition:i,disabled:r,group:a,...l}=e,{component:h=a?HI:od,...s}=Ub(i)?i:{};let p;return Ub(i)?p=It(s,mne({disabled:r,group:a}),l):p=It({name:r||!i?"":i},l),Eh(h,p,n)};function tse(e,t){if(!tP)return;const n=t.modifiers||{},i=t.value,{handler:r,options:a}=typeof i=="object"?i:{handler:i,options:{}},l=new IntersectionObserver(function(){let h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],s=arguments.length>1?arguments[1]:void 0;const p=e._observe?.[t.instance.$.uid];if(!p)return;const _=h.some(x=>x.isIntersecting);r&&(!n.quiet||p.init)&&(!n.once||_||p.init)&&r(_,h,s),_&&n.once?pU(e,t):p.init=!0},a);e._observe=Object(e._observe),e._observe[t.instance.$.uid]={init:!1,observer:l},l.observe(e)}function pU(e,t){const n=e._observe?.[t.instance.$.uid];n&&(n.observer.unobserve(e),delete e._observe[t.instance.$.uid])}const gu={mounted:tse,unmounted:pU},gU=lt({absolute:Boolean,alt:String,cover:Boolean,color:String,draggable:{type:[Boolean,String],default:void 0},eager:Boolean,gradient:String,lazySrc:String,options:{type:Object,default:()=>({root:void 0,rootMargin:void 0,threshold:void 0})},sizes:String,src:{type:[String,Object],default:""},crossorigin:String,referrerpolicy:String,srcset:String,position:String,...mU(),...wn(),...$r(),...Mh()},"VImg"),wh=At()({name:"VImg",directives:{vIntersect:gu},props:gU(),emits:{loadstart:e=>!0,load:e=>!0,error:e=>!0},setup(e,t){let{emit:n,slots:i}=t;const{backgroundColorClasses:r,backgroundColorStyles:a}=nr(()=>e.color),{roundedClasses:l}=ts(e),h=xs("VImg"),s=Zt(""),p=tt(),_=Zt(e.eager?"loading":"idle"),x=Zt(),T=Zt(),k=fe(()=>e.src&&typeof e.src=="object"?{src:e.src.src,srcset:e.srcset||e.src.srcset,lazySrc:e.lazySrc||e.src.lazySrc,aspect:Number(e.aspectRatio||e.src.aspect||0)}:{src:e.src,srcset:e.srcset,lazySrc:e.lazySrc,aspect:Number(e.aspectRatio||0)}),P=fe(()=>k.value.aspect||x.value/T.value||0);qt(()=>e.src,()=>{M(_.value!=="idle")}),qt(P,(Y,Z)=>{!Y&&Z&&p.value&&G(p.value)}),v_(()=>M());function M(Y){if(!(e.eager&&Y)&&!(tP&&!Y&&!e.eager)){if(_.value="loading",k.value.lazySrc){const Z=new Image;Z.src=k.value.lazySrc,G(Z,null)}k.value.src&&Hn(()=>{n("loadstart",p.value?.currentSrc||k.value.src),setTimeout(()=>{if(!h.isUnmounted)if(p.value?.complete){if(p.value.naturalWidth||F(),_.value==="error")return;P.value||G(p.value,null),_.value==="loading"&&R()}else P.value||G(p.value),B()})})}}function R(){h.isUnmounted||(B(),G(p.value),_.value="loaded",n("load",p.value?.currentSrc||k.value.src))}function F(){h.isUnmounted||(_.value="error",n("error",p.value?.currentSrc||k.value.src))}function B(){const Y=p.value;Y&&(s.value=Y.currentSrc||Y.src)}let H=-1;Nr(()=>{clearTimeout(H)});function G(Y){let Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100;const ge=()=>{if(clearTimeout(H),h.isUnmounted)return;const{naturalHeight:be,naturalWidth:Be}=Y;be||Be?(x.value=Be,T.value=be):!Y.complete&&_.value==="loading"&&Z!=null?H=window.setTimeout(ge,Z):(Y.currentSrc.endsWith(".svg")||Y.currentSrc.startsWith("data:image/svg+xml"))&&(x.value=1,T.value=1)};ge()}const ee=Ne(()=>({"v-img__img--cover":e.cover,"v-img__img--contain":!e.cover})),ie=()=>{if(!k.value.src||_.value==="idle")return null;const Y=z("img",{class:xt(["v-img__img",ee.value]),style:{objectPosition:e.position},crossorigin:e.crossorigin,src:k.value.src,srcset:k.value.srcset,alt:e.alt,referrerpolicy:e.referrerpolicy,draggable:e.draggable,sizes:e.sizes,ref:p,onLoad:R,onError:F},null),Z=i.sources?.();return se(Fa,{transition:e.transition,appear:!0},{default:()=>[Ii(Z?z("picture",{class:"v-img__picture"},[Z,Y]):Y,[[_u,_.value==="loaded"]])]})},J=()=>se(Fa,{transition:e.transition},{default:()=>[k.value.lazySrc&&_.value!=="loaded"&&z("img",{class:xt(["v-img__img","v-img__img--preload",ee.value]),style:{objectPosition:e.position},crossorigin:e.crossorigin,src:k.value.lazySrc,alt:e.alt,referrerpolicy:e.referrerpolicy,draggable:e.draggable},null)]}),$=()=>i.placeholder?se(Fa,{transition:e.transition,appear:!0},{default:()=>[(_.value==="loading"||_.value==="error"&&!i.error)&&z("div",{class:"v-img__placeholder"},[i.placeholder()])]}):null,W=()=>i.error?se(Fa,{transition:e.transition,appear:!0},{default:()=>[_.value==="error"&&z("div",{class:"v-img__error"},[i.error()])]}):null,X=()=>e.gradient?z("div",{class:"v-img__gradient",style:{backgroundImage:`linear-gradient(${e.gradient})`}},null):null,re=Zt(!1);{const Y=qt(P,Z=>{Z&&(requestAnimationFrame(()=>{requestAnimationFrame(()=>{re.value=!0})}),Y())})}return Vt(()=>{const Y=Wk.filterProps(e);return Ii(se(Wk,It({class:["v-img",{"v-img--absolute":e.absolute,"v-img--booting":!re.value},r.value,l.value,e.class],style:[{width:pn(e.width==="auto"?x.value:e.width)},a.value,e.style]},Y,{aspectRatio:P.value,"aria-label":e.alt,role:e.alt?"img":void 0}),{additional:()=>z(un,null,[se(ie,null,null),se(J,null,null),se(X,null,null),se($,null,null),se(W,null,null)]),default:i.default}),[[gu,{handler:M,options:e.options},null,{once:!0}]])}),{currentSrc:s,image:p,state:_,naturalWidth:x,naturalHeight:T}}}),nse=lt({start:Boolean,end:Boolean,icon:kn,image:String,text:String,...cl(),...wn(),...ws(),...$r(),...gd(),...ti(),...Ai(),...Nc({variant:"flat"})},"VAvatar"),cc=At()({name:"VAvatar",props:nse(),setup(e,t){let{slots:n}=t;const{themeClasses:i}=Zi(e),{borderClasses:r}=Bl(e),{colorClasses:a,colorStyles:l,variantClasses:h}=lg(e),{densityClasses:s}=Ga(e),{roundedClasses:p}=ts(e),{sizeClasses:_,sizeStyles:x}=E_(e);return Vt(()=>se(e.tag,{class:xt(["v-avatar",{"v-avatar--start":e.start,"v-avatar--end":e.end},i.value,r.value,a.value,s.value,p.value,_.value,h.value,e.class]),style:Yt([l.value,x.value,e.style])},{default:()=>[n.default?se(ui,{key:"content-defaults",defaults:{VImg:{cover:!0,src:e.image},VIcon:{icon:e.icon}}},{default:()=>[n.default()]}):e.image?se(wh,{key:"image",src:e.image,alt:"",cover:!0},null):e.icon?se(_i,{key:"icon",icon:e.icon},null):e.text,gm(!1,"v-avatar")]})),{}}}),ise=lt({appendAvatar:String,appendIcon:kn,prependAvatar:String,prependIcon:kn,subtitle:{type:[String,Number,Boolean],default:void 0},title:{type:[String,Number,Boolean],default:void 0},...wn(),...ws(),...ti()},"VCardItem"),vU=At()({name:"VCardItem",props:ise(),setup(e,t){let{slots:n}=t;return Vt(()=>{const i=!!(e.prependAvatar||e.prependIcon),r=!!(i||n.prepend),a=!!(e.appendAvatar||e.appendIcon),l=!!(a||n.append),h=!!(e.title!=null||n.title),s=!!(e.subtitle!=null||n.subtitle);return se(e.tag,{class:xt(["v-card-item",e.class]),style:Yt(e.style)},{default:()=>[r&&z("div",{key:"prepend",class:"v-card-item__prepend"},[n.prepend?se(ui,{key:"prepend-defaults",disabled:!i,defaults:{VAvatar:{density:e.density,image:e.prependAvatar},VIcon:{density:e.density,icon:e.prependIcon}}},n.prepend):z(un,null,[e.prependAvatar&&se(cc,{key:"prepend-avatar",density:e.density,image:e.prependAvatar},null),e.prependIcon&&se(_i,{key:"prepend-icon",density:e.density,icon:e.prependIcon},null)])]),z("div",{class:"v-card-item__content"},[h&&se(fU,{key:"title"},{default:()=>[n.title?.()??sn(e.title)]}),s&&se(hU,{key:"subtitle"},{default:()=>[n.subtitle?.()??sn(e.subtitle)]}),n.default?.()]),l&&z("div",{key:"append",class:"v-card-item__append"},[n.append?se(ui,{key:"append-defaults",disabled:!a,defaults:{VAvatar:{density:e.density,image:e.appendAvatar},VIcon:{density:e.density,icon:e.appendIcon}}},n.append):z(un,null,[e.appendIcon&&se(_i,{key:"append-icon",density:e.density,icon:e.appendIcon},null),e.appendAvatar&&se(cc,{key:"append-avatar",density:e.density,image:e.appendAvatar},null)])])]})}),{}}}),rse=lt({opacity:[Number,String],...wn(),...ti()},"VCardText"),mb=At()({name:"VCardText",props:rse(),setup(e,t){let{slots:n}=t;return Vt(()=>se(e.tag,{class:xt(["v-card-text",e.class]),style:Yt([{"--v-card-text-opacity":e.opacity},e.style])},n)),{}}}),sse=lt({appendAvatar:String,appendIcon:kn,disabled:Boolean,flat:Boolean,hover:Boolean,image:String,link:{type:Boolean,default:void 0},prependAvatar:String,prependIcon:kn,ripple:{type:[Boolean,Object],default:!0},subtitle:{type:[String,Number,Boolean],default:void 0},text:{type:[String,Number,Boolean],default:void 0},title:{type:[String,Number,Boolean],default:void 0},...cl(),...wn(),...ws(),...Os(),...qs(),...zT(),...Ph(),...C_(),...$r(),...F0(),...ti(),...Ai(),...Nc({variant:"elevated"})},"VCard"),ju=At()({name:"VCard",directives:{vRipple:Wa},props:sse(),setup(e,t){let{attrs:n,slots:i}=t;const{themeClasses:r}=Zi(e),{borderClasses:a}=Bl(e),{colorClasses:l,colorStyles:h,variantClasses:s}=lg(e),{densityClasses:p}=Ga(e),{dimensionStyles:_}=Vs(e),{elevationClasses:x}=bo(e),{loaderClasses:T}=O0(e),{locationStyles:k}=dg(e),{positionClasses:P}=k_(e),{roundedClasses:M}=ts(e),R=B0(e,n);return Vt(()=>{const F=e.link!==!1&&R.isLink.value,B=!e.disabled&&e.link!==!1&&(e.link||R.isClickable.value),H=F?"a":e.tag,G=!!(i.title||e.title!=null),ee=!!(i.subtitle||e.subtitle!=null),ie=G||ee,J=!!(i.append||e.appendAvatar||e.appendIcon),$=!!(i.prepend||e.prependAvatar||e.prependIcon),W=!!(i.image||e.image),X=ie||$||J,re=!!(i.text||e.text!=null);return Ii(se(H,It(R.linkProps,{class:["v-card",{"v-card--disabled":e.disabled,"v-card--flat":e.flat,"v-card--hover":e.hover&&!(e.disabled||e.flat),"v-card--link":B},r.value,a.value,l.value,p.value,x.value,T.value,P.value,M.value,s.value,e.class],style:[h.value,_.value,k.value,e.style],onClick:B&&R.navigate,tabindex:e.disabled?-1:void 0}),{default:()=>[W&&z("div",{key:"image",class:"v-card__image"},[i.image?se(ui,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},i.image):se(wh,{key:"image-img",cover:!0,src:e.image},null)]),se(V0,{name:"v-card",active:!!e.loading,color:typeof e.loading=="boolean"?void 0:e.loading},{default:i.loader}),X&&se(vU,{key:"item",prependAvatar:e.prependAvatar,prependIcon:e.prependIcon,title:e.title,subtitle:e.subtitle,appendAvatar:e.appendAvatar,appendIcon:e.appendIcon},{default:i.item,prepend:i.prepend,title:i.title,subtitle:i.subtitle,append:i.append}),re&&se(mb,{key:"text"},{default:()=>[i.text?.()??e.text]}),i.default?.(),i.actions&&se(dU,null,{default:i.actions}),gm(B,"v-card")]}),[[Wa,B&&e.ripple]])}),{}}}),ose=lt({disabled:Boolean,group:Boolean,hideOnLeave:Boolean,leaveAbsolute:Boolean,mode:String,origin:String},"transition");function dc(e,t,n){return At()({name:e,props:ose({mode:n,origin:t}),setup(i,r){let{slots:a}=r;const l={onBeforeEnter(h){i.origin&&(h.style.transformOrigin=i.origin)},onLeave(h){if(i.leaveAbsolute){const{offsetTop:s,offsetLeft:p,offsetWidth:_,offsetHeight:x}=h;h._transitionInitialStyles={position:h.style.position,top:h.style.top,left:h.style.left,width:h.style.width,height:h.style.height},h.style.position="absolute",h.style.top=`${s}px`,h.style.left=`${p}px`,h.style.width=`${_}px`,h.style.height=`${x}px`}i.hideOnLeave&&h.style.setProperty("display","none","important")},onAfterLeave(h){if(i.leaveAbsolute&&h?._transitionInitialStyles){const{position:s,top:p,left:_,width:x,height:T}=h._transitionInitialStyles;delete h._transitionInitialStyles,h.style.position=s||"",h.style.top=p||"",h.style.left=_||"",h.style.width=x||"",h.style.height=T||""}}};return()=>{const h=i.group?HI:od;return Eh(h,{name:i.disabled?"":e,css:!i.disabled,...i.group?void 0:{mode:i.mode},...i.disabled?{}:l},a.default)}}})}function _U(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"in-out";return At()({name:e,props:{mode:{type:String,default:n},disabled:{type:Boolean,default:ud()},group:Boolean},setup(i,r){let{slots:a}=r;const l=i.group?HI:od;return()=>Eh(l,{name:i.disabled?"":e,css:!i.disabled,...i.disabled?{}:t},a.default)}})}function yU(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";const n=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)?"width":"height",i=ll(`offset-${n}`);return{onBeforeEnter(l){l._parent=l.parentNode,l._initialStyle={transition:l.style.transition,overflow:l.style.overflow,[n]:l.style[n]}},onEnter(l){const h=l._initialStyle;if(!h)return;l.style.setProperty("transition","none","important"),l.style.overflow="hidden";const s=`${l[i]}px`;l.style[n]="0",l.offsetHeight,l.style.transition=h.transition,e&&l._parent&&l._parent.classList.add(e),requestAnimationFrame(()=>{l.style[n]=s})},onAfterEnter:a,onEnterCancelled:a,onLeave(l){l._initialStyle={transition:"",overflow:l.style.overflow,[n]:l.style[n]},l.style.overflow="hidden",l.style[n]=`${l[i]}px`,l.offsetHeight,requestAnimationFrame(()=>l.style[n]="0")},onAfterLeave:r,onLeaveCancelled:r};function r(l){e&&l._parent&&l._parent.classList.remove(e),a(l)}function a(l){if(!l._initialStyle)return;const h=l._initialStyle[n];l.style.overflow=l._initialStyle.overflow,h!=null&&(l.style[n]=h),delete l._initialStyle}}const ase=lt({target:[Object,Array]},"v-dialog-transition"),lC=new WeakMap,UT=At()({name:"VDialogTransition",props:ase(),setup(e,t){let{slots:n}=t;const i={onBeforeEnter(r){r.style.pointerEvents="none",r.style.visibility="hidden"},async onEnter(r,a){await new Promise(T=>requestAnimationFrame(T)),await new Promise(T=>requestAnimationFrame(T)),r.style.visibility="";const l=T3(e.target,r),{x:h,y:s,sx:p,sy:_,speed:x}=l;if(lC.set(r,l),ud())rh(r,[{opacity:0},{}],{duration:125*x,easing:JV}).finished.then(()=>a());else{const T=rh(r,[{transform:`translate(${h}px, ${s}px) scale(${p}, ${_})`,opacity:0},{}],{duration:225*x,easing:JV});w3(r)?.forEach(k=>{rh(k,[{opacity:0},{opacity:0,offset:.33},{}],{duration:450*x,easing:$b})}),T.finished.then(()=>a())}},onAfterEnter(r){r.style.removeProperty("pointer-events")},onBeforeLeave(r){r.style.pointerEvents="none"},async onLeave(r,a){await new Promise(T=>requestAnimationFrame(T));let l;!lC.has(r)||Array.isArray(e.target)||e.target.offsetParent||e.target.getClientRects().length?l=T3(e.target,r):l=lC.get(r);const{x:h,y:s,sx:p,sy:_,speed:x}=l;ud()?rh(r,[{},{opacity:0}],{duration:85*x,easing:QV}).finished.then(()=>a()):(rh(r,[{},{transform:`translate(${h}px, ${s}px) scale(${p}, ${_})`,opacity:0}],{duration:125*x,easing:QV}).finished.then(()=>a()),w3(r)?.forEach(k=>{rh(k,[{},{opacity:0,offset:.2},{opacity:0}],{duration:250*x,easing:$b})}))},onAfterLeave(r){r.style.removeProperty("pointer-events")}};return()=>e.target?se(od,It({name:"dialog-transition"},i,{css:!1}),n):se(od,{name:"dialog-transition"},n)}});function w3(e){const t=e.querySelector(":scope > .v-card, :scope > .v-sheet, :scope > .v-list")?.children;return t&&[...t]}function T3(e,t){const n=E6(e),i=oP(t),[r,a]=getComputedStyle(t).transformOrigin.split(" ").map(F=>parseFloat(F)),[l,h]=getComputedStyle(t).getPropertyValue("--v-overlay-anchor-origin").split(" ");let s=n.left+n.width/2;l==="left"||h==="left"?s-=n.width/2:(l==="right"||h==="right")&&(s+=n.width/2);let p=n.top+n.height/2;l==="top"||h==="top"?p-=n.height/2:(l==="bottom"||h==="bottom")&&(p+=n.height/2);const _=n.width/i.width,x=n.height/i.height,T=Math.max(1,_,x),k=_/T||0,P=x/T||0,M=i.width*i.height/(window.innerWidth*window.innerHeight),R=M>.12?Math.min(1.5,(M-.12)*10+1):1;return{x:s-(r+i.left),y:p-(a+i.top),sx:k,sy:P,speed:R}}const lse=dc("fab-transition","center center","out-in"),cse=dc("dialog-bottom-transition"),use=dc("dialog-top-transition"),l_=dc("fade-transition"),yP=dc("scale-transition"),dse=dc("scroll-x-transition"),hse=dc("scroll-x-reverse-transition"),fse=dc("scroll-y-transition"),mse=dc("scroll-y-reverse-transition"),pse=dc("slide-x-transition"),gse=dc("slide-x-reverse-transition"),Bv=dc("slide-y-transition"),vse=dc("slide-y-reverse-transition"),z0=_U("expand-transition",yU()),bP=_U("expand-x-transition",yU("",!0));function _se(e){let{selectedElement:t,containerElement:n,isRtl:i,isHorizontal:r}=e;const a=Xb(r,n),l=bU(r,i,n),h=Xb(r,t),s=xU(r,t),p=h*.4;return l>s?s-p:l+a<s+h?s-a+h+p:l}function yse(e){let{selectedElement:t,containerElement:n,isHorizontal:i}=e;const r=Xb(i,n),a=xU(i,t),l=Xb(i,t);return a-r/2+l/2}function S3(e,t){return t?.[e?"scrollWidth":"scrollHeight"]||0}function bse(e,t){return t?.[e?"clientWidth":"clientHeight"]||0}function bU(e,t,n){if(!n)return 0;const{scrollLeft:i,offsetWidth:r,scrollWidth:a}=n;return e?t?a-r+i:i:n.scrollTop}function Xb(e,t){return t?.[e?"offsetWidth":"offsetHeight"]||0}function xU(e,t){return t?.[e?"offsetLeft":"offsetTop"]||0}const xP=Symbol.for("vuetify:v-slide-group"),wP=lt({centerActive:Boolean,scrollToActive:{type:Boolean,default:!0},contentClass:null,direction:{type:String,default:"horizontal"},symbol:{type:null,default:xP},nextIcon:{type:kn,default:"$next"},prevIcon:{type:kn,default:"$prev"},showArrows:{type:[Boolean,String],validator:e=>typeof e=="boolean"||["always","desktop","mobile"].includes(e)},...wn(),...sg({mobile:null}),...ti(),...cg({selectedClass:"v-slide-group-item--active"})},"VSlideGroup"),Yb=At()({name:"VSlideGroup",props:wP(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{isRtl:i}=Gs(),{displayClasses:r,mobile:a}=Vl(e),l=vm(e,e.symbol),h=Zt(!1),s=Zt(0),p=Zt(0),_=Zt(0),x=fe(()=>e.direction==="horizontal"),{resizeRef:T,contentRect:k}=zc(),{resizeRef:P,contentRect:M}=zc(),R=qie(),F=fe(()=>({container:T.el,duration:200,easing:"easeOutQuart"})),B=fe(()=>l.selected.value.length?l.items.value.findIndex(Je=>Je.id===l.selected.value[0]):-1),H=fe(()=>l.selected.value.length?l.items.value.findIndex(Je=>Je.id===l.selected.value[l.selected.value.length-1]):-1);if(Gi){let Je=-1;qt(()=>[l.selected.value,k.value,M.value,x.value],()=>{cancelAnimationFrame(Je),Je=requestAnimationFrame(()=>{if(k.value&&M.value){const it=x.value?"width":"height";p.value=k.value[it],_.value=M.value[it],h.value=p.value+1<_.value}if(e.scrollToActive&&B.value>=0&&P.el){const it=P.el.children[H.value];ee(it,e.centerActive)}})})}const G=Zt(!1);function ee(Je,it){let vt=0;it?vt=yse({containerElement:T.el,isHorizontal:x.value,selectedElement:Je}):vt=_se({containerElement:T.el,isHorizontal:x.value,isRtl:i.value,selectedElement:Je}),ie(vt)}function ie(Je){if(!Gi||!T.el)return;const it=Xb(x.value,T.el),vt=bU(x.value,i.value,T.el);if(!(S3(x.value,T.el)<=it||Math.abs(Je-vt)<16)){if(x.value&&i.value&&T.el){const{scrollWidth:ot,offsetWidth:Ye}=T.el;Je=ot-Ye-Je}x.value?R.horizontal(Je,F.value):R(Je,F.value)}}function J(Je){const{scrollTop:it,scrollLeft:vt}=Je.target;s.value=x.value?vt:it}function $(Je){if(G.value=!0,!(!h.value||!P.el)){for(const it of Je.composedPath())for(const vt of P.el.children)if(vt===it){ee(vt);return}}}function W(Je){G.value=!1}let X=!1;function re(Je){!X&&!G.value&&!(Je.relatedTarget&&P.el?.contains(Je.relatedTarget))&&be(),X=!1}function Y(){X=!0}function Z(Je){if(!P.el)return;function it(vt){Je.preventDefault(),be(vt)}x.value?Je.key==="ArrowRight"?it(i.value?"prev":"next"):Je.key==="ArrowLeft"&&it(i.value?"next":"prev"):Je.key==="ArrowDown"?it("next"):Je.key==="ArrowUp"&&it("prev"),Je.key==="Home"?it("first"):Je.key==="End"&&it("last")}function ge(Je,it){if(!Je)return;let vt=Je;do vt=vt?.[it==="next"?"nextElementSibling":"previousElementSibling"];while(vt?.hasAttribute("disabled"));return vt}function be(Je){if(!P.el)return;let it;if(!Je)it=i_(P.el)[0];else if(Je==="next"){if(it=ge(P.el.querySelector(":focus"),Je),!it)return be("first")}else if(Je==="prev"){if(it=ge(P.el.querySelector(":focus"),Je),!it)return be("last")}else Je==="first"?(it=P.el.firstElementChild,it?.hasAttribute("disabled")&&(it=ge(it,"next"))):Je==="last"&&(it=P.el.lastElementChild,it?.hasAttribute("disabled")&&(it=ge(it,"prev")));it&&it.focus({preventScroll:!0})}function Be(Je){const it=x.value&&i.value?-1:1,vt=(Je==="prev"?-it:it)*p.value;let mt=s.value+vt;if(x.value&&i.value&&T.el){const{scrollWidth:ot,offsetWidth:Ye}=T.el;mt+=ot-Ye}ie(mt)}const nt=fe(()=>({next:l.next,prev:l.prev,select:l.select,isSelected:l.isSelected})),We=fe(()=>h.value||Math.abs(s.value)>0),Le=fe(()=>{switch(e.showArrows){case"always":return!0;case"desktop":return!a.value;case!0:return We.value;case"mobile":return a.value||We.value;default:return!a.value&&We.value}}),Ze=fe(()=>Math.abs(s.value)>1),Ee=fe(()=>{if(!T.value||!We.value)return!1;const Je=S3(x.value,T.el),it=bse(x.value,T.el);return Je-it-Math.abs(s.value)>1});return Vt(()=>se(e.tag,{class:xt(["v-slide-group",{"v-slide-group--vertical":!x.value,"v-slide-group--has-affixes":Le.value,"v-slide-group--is-overflowing":h.value},r.value,e.class]),style:Yt(e.style),tabindex:G.value||l.selected.value.length?-1:0,onFocus:re},{default:()=>[Le.value&&z("div",{key:"prev",class:xt(["v-slide-group__prev",{"v-slide-group__prev--disabled":!Ze.value}]),onMousedown:Y,onClick:()=>Ze.value&&Be("prev")},[n.prev?.(nt.value)??se(l_,null,{default:()=>[se(_i,{icon:i.value?e.nextIcon:e.prevIcon},null)]})]),z("div",{key:"container",ref:T,class:xt(["v-slide-group__container",e.contentClass]),onScroll:J},[z("div",{ref:P,class:"v-slide-group__content",onFocusin:$,onFocusout:W,onKeydown:Z},[n.default?.(nt.value)])]),Le.value&&z("div",{key:"next",class:xt(["v-slide-group__next",{"v-slide-group__next--disabled":!Ee.value}]),onMousedown:Y,onClick:()=>Ee.value&&Be("next")},[n.next?.(nt.value)??se(l_,null,{default:()=>[se(_i,{icon:i.value?e.prevIcon:e.nextIcon},null)]})])]})),{selected:l.selected,scrollTo:Be,scrollOffset:s,focus:be,hasPrev:Ze,hasNext:Ee}}}),wU=Symbol.for("vuetify:v-chip-group"),xse=lt({baseColor:String,column:Boolean,filter:Boolean,valueComparator:{type:Function,default:_o},...wP({scrollToActive:!1}),...wn(),...cg({selectedClass:"v-chip--selected"}),...ti(),...Ai(),...Nc({variant:"tonal"})},"VChipGroup"),wse=At()({name:"VChipGroup",props:xse(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{themeClasses:i}=Zi(e),{isSelected:r,select:a,next:l,prev:h,selected:s}=vm(e,wU);return es({VChip:{baseColor:Ne(()=>e.baseColor),color:Ne(()=>e.color),disabled:Ne(()=>e.disabled),filter:Ne(()=>e.filter),variant:Ne(()=>e.variant)}}),Vt(()=>{const p=Yb.filterProps(e);return se(Yb,It(p,{class:["v-chip-group",{"v-chip-group--column":e.column},i.value,e.class],style:e.style}),{default:()=>[n.default?.({isSelected:r,select:a,next:l,prev:h,selected:s.value})]})}),{}}}),Tse=lt({activeClass:String,appendAvatar:String,appendIcon:kn,baseColor:String,closable:Boolean,closeIcon:{type:kn,default:"$delete"},closeLabel:{type:String,default:"$vuetify.close"},draggable:Boolean,filter:Boolean,filterIcon:{type:kn,default:"$complete"},label:Boolean,link:{type:Boolean,default:void 0},pill:Boolean,prependAvatar:String,prependIcon:kn,ripple:{type:[Boolean,Object],default:!0},text:{type:[String,Number,Boolean],default:void 0},modelValue:{type:Boolean,default:!0},onClick:Fo(),onClickOnce:Fo(),...cl(),...wn(),...ws(),...qs(),...ug(),...$r(),...F0(),...gd(),...ti({tag:"span"}),...Ai(),...Nc({variant:"tonal"})},"VChip"),Vo=At()({name:"VChip",directives:{vRipple:Wa},props:Tse(),emits:{"click:close":e=>!0,"update:modelValue":e=>!0,"group:selected":e=>!0,click:e=>!0},setup(e,t){let{attrs:n,emit:i,slots:r}=t;const{t:a}=hr(),{borderClasses:l}=Bl(e),{densityClasses:h}=Ga(e),{elevationClasses:s}=bo(e),{roundedClasses:p}=ts(e),{sizeClasses:_}=E_(e),{themeClasses:x}=Zi(e),T=Pn(e,"modelValue"),k=om(e,wU,!1),P=om(e,xP,!1),M=B0(e,n),R=Ne(()=>e.link!==!1&&M.isLink.value),F=fe(()=>!e.disabled&&e.link!==!1&&(!!k||e.link||M.isClickable.value)),B=Ne(()=>({"aria-label":a(e.closeLabel),disabled:e.disabled,onClick($){$.preventDefault(),$.stopPropagation(),T.value=!1,i("click:close",$)}}));qt(T,$=>{$?(k?.register(),P?.register()):(k?.unregister(),P?.unregister())});const{colorClasses:H,colorStyles:G,variantClasses:ee}=lg(()=>({color:!k||k.isSelected.value?e.color??e.baseColor:e.baseColor,variant:e.variant}));function ie($){i("click",$),F.value&&(M.navigate?.($),k?.toggle())}function J($){($.key==="Enter"||$.key===" ")&&($.preventDefault(),ie($))}return()=>{const $=M.isLink.value?"a":e.tag,W=!!(e.appendIcon||e.appendAvatar),X=!!(W||r.append),re=!!(r.close||e.closable),Y=!!(r.filter||e.filter)&&k,Z=!!(e.prependIcon||e.prependAvatar),ge=!!(Z||r.prepend);return T.value&&Ii(se($,It(M.linkProps,{class:["v-chip",{"v-chip--disabled":e.disabled,"v-chip--label":e.label,"v-chip--link":F.value,"v-chip--filter":Y,"v-chip--pill":e.pill,[`${e.activeClass}`]:e.activeClass&&M.isActive?.value},x.value,l.value,H.value,h.value,s.value,p.value,_.value,ee.value,k?.selectedClass.value,e.class],style:[G.value,e.style],disabled:e.disabled||void 0,draggable:e.draggable,tabindex:F.value?0:void 0,onClick:ie,onKeydown:F.value&&!R.value&&J}),{default:()=>[gm(F.value,"v-chip"),Y&&se(bP,{key:"filter"},{default:()=>[Ii(z("div",{class:"v-chip__filter"},[r.filter?se(ui,{key:"filter-defaults",disabled:!e.filterIcon,defaults:{VIcon:{icon:e.filterIcon}}},r.filter):se(_i,{key:"filter-icon",icon:e.filterIcon},null)]),[[_u,k.isSelected.value]])]}),ge&&z("div",{key:"prepend",class:"v-chip__prepend"},[r.prepend?se(ui,{key:"prepend-defaults",disabled:!Z,defaults:{VAvatar:{image:e.prependAvatar,start:!0},VIcon:{icon:e.prependIcon,start:!0}}},r.prepend):z(un,null,[e.prependIcon&&se(_i,{key:"prepend-icon",icon:e.prependIcon,start:!0},null),e.prependAvatar&&se(cc,{key:"prepend-avatar",image:e.prependAvatar,start:!0},null)])]),z("div",{class:"v-chip__content","data-no-activator":""},[r.default?.({isSelected:k?.isSelected.value,selectedClass:k?.selectedClass.value,select:k?.select,toggle:k?.toggle,value:k?.value.value,disabled:e.disabled})??sn(e.text)]),X&&z("div",{key:"append",class:"v-chip__append"},[r.append?se(ui,{key:"append-defaults",disabled:!W,defaults:{VAvatar:{end:!0,image:e.appendAvatar},VIcon:{end:!0,icon:e.appendIcon}}},r.append):z(un,null,[e.appendIcon&&se(_i,{key:"append-icon",end:!0,icon:e.appendIcon},null),e.appendAvatar&&se(cc,{key:"append-avatar",end:!0,image:e.appendAvatar},null)])]),re&&z("button",It({key:"close",class:"v-chip__close",type:"button","data-testid":"close-chip"},B.value),[r.close?se(ui,{key:"close-defaults",defaults:{VIcon:{icon:e.closeIcon,size:"x-small"}}},r.close):se(_i,{key:"close-icon",icon:e.closeIcon,size:"x-small"},null)])]}),[[Wa,F.value&&e.ripple,null]])}}}),Sse=lt({fluid:{type:Boolean,default:!1},...wn(),...Os(),...ti()},"VContainer"),B1=At()({name:"VContainer",props:Sse(),setup(e,t){let{slots:n}=t;const{rtlClasses:i}=Gs(),{dimensionStyles:r}=Vs(e);return Vt(()=>se(e.tag,{class:xt(["v-container",{"v-container--fluid":e.fluid},i.value,e.class]),style:Yt([r.value,e.style])},n)),{}}}),TU=VT.reduce((e,t)=>(e[t]={type:[Boolean,String,Number],default:!1},e),{}),SU=VT.reduce((e,t)=>{const n="offset"+md(t);return e[n]={type:[String,Number],default:null},e},{}),EU=VT.reduce((e,t)=>{const n="order"+md(t);return e[n]={type:[String,Number],default:null},e},{}),E3={col:Object.keys(TU),offset:Object.keys(SU),order:Object.keys(EU)};function Ese(e,t,n){let i=e;if(!(n==null||n===!1)){if(t){const r=t.replace(e,"");i+=`-${r}`}return e==="col"&&(i="v-"+i),e==="col"&&(n===""||n===!0)||(i+=`-${n}`),i.toLowerCase()}}const Cse=["auto","start","end","center","baseline","stretch"],kse=lt({cols:{type:[Boolean,String,Number],default:!1},...TU,offset:{type:[String,Number],default:null},...SU,order:{type:[String,Number],default:null},...EU,alignSelf:{type:String,default:null,validator:e=>Cse.includes(e)},...wn(),...ti()},"VCol"),Ia=At()({name:"VCol",props:kse(),setup(e,t){let{slots:n}=t;const i=fe(()=>{const r=[];let a;for(a in E3)E3[a].forEach(h=>{const s=e[h],p=Ese(a,h,s);p&&r.push(p)});const l=r.some(h=>h.startsWith("v-col-"));return r.push({"v-col":!l||!e.cols,[`v-col-${e.cols}`]:e.cols,[`offset-${e.offset}`]:e.offset,[`order-${e.order}`]:e.order,[`align-self-${e.alignSelf}`]:e.alignSelf}),r});return()=>Eh(e.tag,{class:[i.value,e.class],style:e.style},n.default?.())}}),TP=["start","end","center"],CU=["space-between","space-around","space-evenly"];function SP(e,t){return VT.reduce((n,i)=>{const r=e+md(i);return n[r]=t(),n},{})}const Ise=[...TP,"baseline","stretch"],kU=e=>Ise.includes(e),IU=SP("align",()=>({type:String,default:null,validator:kU})),Ase=[...TP,...CU],AU=e=>Ase.includes(e),PU=SP("justify",()=>({type:String,default:null,validator:AU})),Pse=[...TP,...CU,"stretch"],MU=e=>Pse.includes(e),DU=SP("alignContent",()=>({type:String,default:null,validator:MU})),C3={align:Object.keys(IU),justify:Object.keys(PU),alignContent:Object.keys(DU)},Mse={align:"align",justify:"justify",alignContent:"align-content"};function Dse(e,t,n){let i=Mse[e];if(n!=null){if(t){const r=t.replace(e,"");i+=`-${r}`}return i+=`-${n}`,i.toLowerCase()}}const Lse=lt({dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:kU},...IU,justify:{type:String,default:null,validator:AU},...PU,alignContent:{type:String,default:null,validator:MU},...DU,...wn(),...ti()},"VRow"),vf=At()({name:"VRow",props:Lse(),setup(e,t){let{slots:n}=t;const i=fe(()=>{const r=[];let a;for(a in C3)C3[a].forEach(l=>{const h=e[l],s=Dse(a,l,h);s&&r.push(s)});return r.push({"v-row--no-gutters":e.noGutters,"v-row--dense":e.dense,[`align-${e.align}`]:e.align,[`justify-${e.justify}`]:e.justify,[`align-content-${e.alignContent}`]:e.alignContent}),r});return()=>Eh(e.tag,{class:["v-row",i.value,e.class],style:e.style},n.default?.())}}),LU=Ah("v-spacer","div","VSpacer"),Rse=lt({text:String,onClick:Fo(),...wn(),...Ai()},"VLabel"),I_=At()({name:"VLabel",props:Rse(),setup(e,t){let{slots:n}=t;return Vt(()=>z("label",{class:xt(["v-label",{"v-label--clickable":!!e.onClick},e.class]),style:Yt(e.style),onClick:e.onClick},[e.text,n.default?.()])),{}}}),RU=Symbol.for("vuetify:selection-control-group"),EP=lt({color:String,disabled:{type:Boolean,default:null},defaultsTarget:String,error:Boolean,id:String,inline:Boolean,falseIcon:kn,trueIcon:kn,ripple:{type:[Boolean,Object],default:!0},multiple:{type:Boolean,default:null},name:String,readonly:{type:Boolean,default:null},modelValue:null,type:String,valueComparator:{type:Function,default:_o},...wn(),...ws(),...Ai()},"SelectionControlGroup"),Ose=lt({...EP({defaultsTarget:"VSelectionControl"})},"VSelectionControlGroup"),OU=At()({name:"VSelectionControlGroup",props:Ose(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const i=Pn(e,"modelValue"),r=ua(),a=Ne(()=>e.id||`v-selection-control-group-${r}`),l=Ne(()=>e.name||a.value),h=new Set;return Dr(RU,{modelValue:i,forceUpdate:()=>{h.forEach(s=>s())},onForceUpdate:s=>{h.add(s),so(()=>{h.delete(s)})}}),es({[e.defaultsTarget]:{color:Ne(()=>e.color),disabled:Ne(()=>e.disabled),density:Ne(()=>e.density),error:Ne(()=>e.error),inline:Ne(()=>e.inline),modelValue:i,multiple:Ne(()=>!!e.multiple||e.multiple==null&&Array.isArray(i.value)),name:l,falseIcon:Ne(()=>e.falseIcon),trueIcon:Ne(()=>e.trueIcon),readonly:Ne(()=>e.readonly),ripple:Ne(()=>e.ripple),type:Ne(()=>e.type),valueComparator:Ne(()=>e.valueComparator)}}),Vt(()=>z("div",{class:xt(["v-selection-control-group",{"v-selection-control-group--inline":e.inline},e.class]),style:Yt(e.style),role:e.type==="radio"?"radiogroup":void 0},[n.default?.()])),{}}}),$T=lt({label:String,baseColor:String,trueValue:null,falseValue:null,value:null,...wn(),...EP()},"VSelectionControl");function Vse(e){const t=wi(RU,void 0),{densityClasses:n}=Ga(e),i=Pn(e,"modelValue"),r=fe(()=>e.trueValue!==void 0?e.trueValue:e.value!==void 0?e.value:!0),a=fe(()=>e.falseValue!==void 0?e.falseValue:!1),l=fe(()=>!!e.multiple||e.multiple==null&&Array.isArray(i.value)),h=fe({get(){const k=t?t.modelValue.value:i.value;return l.value?qr(k).some(P=>e.valueComparator(P,r.value)):e.valueComparator(k,r.value)},set(k){if(e.readonly)return;const P=k?r.value:a.value;let M=P;l.value&&(M=k?[...qr(i.value),P]:qr(i.value).filter(R=>!e.valueComparator(R,r.value))),t?t.modelValue.value=M:i.value=M}}),{textColorClasses:s,textColorStyles:p}=Uo(()=>{if(!(e.error||e.disabled))return h.value?e.color:e.baseColor}),{backgroundColorClasses:_,backgroundColorStyles:x}=nr(()=>h.value&&!e.error&&!e.disabled?e.color:e.baseColor),T=fe(()=>h.value?e.trueIcon:e.falseIcon);return{group:t,densityClasses:n,trueValue:r,falseValue:a,model:h,textColorClasses:s,textColorStyles:p,backgroundColorClasses:_,backgroundColorStyles:x,icon:T}}const am=At()({name:"VSelectionControl",directives:{vRipple:Wa},inheritAttrs:!1,props:$T(),emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:n,slots:i}=t;const{group:r,densityClasses:a,icon:l,model:h,textColorClasses:s,textColorStyles:p,backgroundColorClasses:_,backgroundColorStyles:x,trueValue:T}=Vse(e),k=ua(),P=Zt(!1),M=Zt(!1),R=tt(),F=Ne(()=>e.id||`input-${k}`),B=Ne(()=>!e.disabled&&!e.readonly);r?.onForceUpdate(()=>{R.value&&(R.value.checked=h.value)});function H(J){B.value&&(P.value=!0,r_(J.target,":focus-visible")!==!1&&(M.value=!0))}function G(){P.value=!1,M.value=!1}function ee(J){J.stopPropagation()}function ie(J){if(!B.value){R.value&&(R.value.checked=h.value);return}e.readonly&&r&&Hn(()=>r.forceUpdate()),h.value=J.target.checked}return Vt(()=>{const J=i.label?i.label({label:e.label,props:{for:F.value}}):e.label,[$,W]=pm(n),X=z("input",It({ref:R,checked:h.value,disabled:!!e.disabled,id:F.value,onBlur:G,onFocus:H,onInput:ie,"aria-disabled":!!e.disabled,"aria-label":e.label,type:e.type,value:T.value,name:e.name,"aria-checked":e.type==="checkbox"?h.value:void 0},W),null);return z("div",It({class:["v-selection-control",{"v-selection-control--dirty":h.value,"v-selection-control--disabled":e.disabled,"v-selection-control--error":e.error,"v-selection-control--focused":P.value,"v-selection-control--focus-visible":M.value,"v-selection-control--inline":e.inline},a.value,e.class]},$,{style:e.style}),[z("div",{class:xt(["v-selection-control__wrapper",s.value]),style:Yt(p.value)},[i.default?.({backgroundColorClasses:_,backgroundColorStyles:x}),Ii(z("div",{class:xt(["v-selection-control__input"])},[i.input?.({model:h,textColorClasses:s,textColorStyles:p,backgroundColorClasses:_,backgroundColorStyles:x,inputNode:X,icon:l.value,props:{onFocus:H,onBlur:G,id:F.value}})??z(un,null,[l.value&&se(_i,{key:"icon",icon:l.value},null),X])]),[[Wa,!e.disabled&&!e.readonly&&e.ripple,null,{center:!0,circle:!0}]])]),J&&se(I_,{for:F.value,onClick:ee},{default:()=>[J]})])}),{isFocused:P,input:R}}}),VU=lt({indeterminate:Boolean,indeterminateIcon:{type:kn,default:"$checkboxIndeterminate"},...$T({falseIcon:"$checkboxOff",trueIcon:"$checkboxOn"})},"VCheckboxBtn"),hd=At()({name:"VCheckboxBtn",props:VU(),emits:{"update:modelValue":e=>!0,"update:indeterminate":e=>!0},setup(e,t){let{slots:n}=t;const i=Pn(e,"indeterminate"),r=Pn(e,"modelValue");function a(s){i.value&&(i.value=!1)}const l=Ne(()=>i.value?e.indeterminateIcon:e.falseIcon),h=Ne(()=>i.value?e.indeterminateIcon:e.trueIcon);return Vt(()=>{const s=dr(am.filterProps(e),["modelValue"]);return se(am,It(s,{modelValue:r.value,"onUpdate:modelValue":[p=>r.value=p,a],class:["v-checkbox-btn",e.class],style:e.style,type:"checkbox",falseIcon:l.value,trueIcon:h.value,"aria-checked":i.value?"mixed":void 0}),n)}),{}}});function BU(e){const{t}=hr();function n(i){let{name:r,color:a,...l}=i;const h={prepend:"prependAction",prependInner:"prependAction",append:"appendAction",appendInner:"appendAction",clear:"clear"}[r],s=e[`onClick:${r}`];function p(x){x.key!=="Enter"&&x.key!==" "||(x.preventDefault(),x.stopPropagation(),A0(s,new PointerEvent("click",x)))}const _=s&&h?t(`$vuetify.input.${h}`,e.label??""):void 0;return se(_i,It({icon:e[`${r}Icon`],"aria-label":_,onClick:s,onKeydown:p,color:a},l),null)}return{InputIcon:n}}const Bse=lt({active:Boolean,color:String,messages:{type:[Array,String],default:()=>[]},...wn(),...Mh({transition:{component:Bv,leaveAbsolute:!0,group:!0}})},"VMessages"),FU=At()({name:"VMessages",props:Bse(),setup(e,t){let{slots:n}=t;const i=fe(()=>qr(e.messages)),{textColorClasses:r,textColorStyles:a}=Uo(()=>e.color);return Vt(()=>se(Fa,{transition:e.transition,tag:"div",class:xt(["v-messages",r.value,e.class]),style:Yt([a.value,e.style])},{default:()=>[e.active&&i.value.map((l,h)=>z("div",{class:"v-messages__message",key:`${h}-${i.value}`},[n.message?n.message({message:l}):l]))]})),{}}}),N0=lt({focused:Boolean,"onUpdate:focused":Fo()},"focus");function Dh(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:pd();const n=Pn(e,"focused"),i=Ne(()=>({[`${t}--focused`]:n.value}));function r(){n.value=!0}function a(){n.value=!1}return{focusClasses:i,isFocused:n,focus:r,blur:a}}const zU=Symbol.for("vuetify:form"),Fse=lt({disabled:Boolean,fastFail:Boolean,readonly:Boolean,modelValue:{type:Boolean,default:null},validateOn:{type:String,default:"input"}},"form");function zse(e){const t=Pn(e,"modelValue"),n=Ne(()=>e.disabled),i=Ne(()=>e.readonly),r=Zt(!1),a=tt([]),l=tt([]);async function h(){const _=[];let x=!0;l.value=[],r.value=!0;for(const T of a.value){const k=await T.validate();if(k.length>0&&(x=!1,_.push({id:T.id,errorMessages:k})),!x&&e.fastFail)break}return l.value=_,r.value=!1,{valid:x,errors:l.value}}function s(){a.value.forEach(_=>_.reset())}function p(){a.value.forEach(_=>_.resetValidation())}return qt(a,()=>{let _=0,x=0;const T=[];for(const k of a.value)k.isValid===!1?(x++,T.push({id:k.id,errorMessages:k.errorMessages})):k.isValid===!0&&_++;l.value=T,t.value=x>0?!1:_===a.value.length?!0:null},{deep:!0,flush:"post"}),Dr(zU,{register:_=>{let{id:x,vm:T,validate:k,reset:P,resetValidation:M}=_;a.value.some(R=>R.id===x),a.value.push({id:x,validate:k,reset:P,resetValidation:M,vm:BF(T),isValid:null,errorMessages:[]})},unregister:_=>{a.value=a.value.filter(x=>x.id!==_)},update:(_,x,T)=>{const k=a.value.find(P=>P.id===_);k&&(k.isValid=x,k.errorMessages=T)},isDisabled:n,isReadonly:i,isValidating:r,isValid:t,items:a,validateOn:Ne(()=>e.validateOn)}),{errors:l,isDisabled:n,isReadonly:i,isValidating:r,isValid:t,items:a,validate:h,reset:s,resetValidation:p}}function A_(e){const t=wi(zU,null);return{...t,isReadonly:fe(()=>!!(e?.readonly??t?.isReadonly.value)),isDisabled:fe(()=>!!(e?.disabled??t?.isDisabled.value))}}const Nse=Symbol.for("vuetify:rules");function Use(e){const t=wi(Nse,null);if(!e){if(!t)throw new Error("Could not find Vuetify rules injection");return t.aliases}return t?.resolve(e)??Ne(e)}const NU=lt({disabled:{type:Boolean,default:null},error:Boolean,errorMessages:{type:[Array,String],default:()=>[]},maxErrors:{type:[Number,String],default:1},name:String,label:String,readonly:{type:Boolean,default:null},rules:{type:Array,default:()=>[]},modelValue:null,validateOn:String,validationValue:null,...N0()},"validation");function UU(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:pd(),n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ua();const i=Pn(e,"modelValue"),r=fe(()=>e.validationValue===void 0?i.value:e.validationValue),a=A_(e),l=Use(()=>e.rules),h=tt([]),s=Zt(!0),p=fe(()=>!!(qr(i.value===""?null:i.value).length||qr(r.value===""?null:r.value).length)),_=fe(()=>e.errorMessages?.length?qr(e.errorMessages).concat(h.value).slice(0,Math.max(0,Number(e.maxErrors))):h.value),x=fe(()=>{let G=(e.validateOn??a.validateOn?.value)||"input";G==="lazy"&&(G="input lazy"),G==="eager"&&(G="input eager");const ee=new Set(G?.split(" ")??[]);return{input:ee.has("input"),blur:ee.has("blur")||ee.has("input")||ee.has("invalid-input"),invalidInput:ee.has("invalid-input"),lazy:ee.has("lazy"),eager:ee.has("eager")}}),T=fe(()=>e.error||e.errorMessages?.length?!1:e.rules.length?s.value?h.value.length||x.value.lazy?null:!0:!h.value.length:!0),k=Zt(!1),P=fe(()=>({[`${t}--error`]:T.value===!1,[`${t}--dirty`]:p.value,[`${t}--disabled`]:a.isDisabled.value,[`${t}--readonly`]:a.isReadonly.value})),M=xs("validation"),R=fe(()=>e.name??xi(n));v_(()=>{a.register?.({id:R.value,vm:M,validate:H,reset:F,resetValidation:B})}),Nr(()=>{a.unregister?.(R.value)}),Kr(async()=>{x.value.lazy||await H(!x.value.eager),a.update?.(R.value,T.value,_.value)}),aa(()=>x.value.input||x.value.invalidInput&&T.value===!1,()=>{qt(r,()=>{if(r.value!=null)H();else if(e.focused){const G=qt(()=>e.focused,ee=>{ee||H(),G()})}})}),aa(()=>x.value.blur,()=>{qt(()=>e.focused,G=>{G||H()})}),qt([T,_],()=>{a.update?.(R.value,T.value,_.value)});async function F(){i.value=null,await Hn(),await B()}async function B(){s.value=!0,x.value.lazy?h.value=[]:await H(!x.value.eager)}async function H(){let G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const ee=[];k.value=!0;for(const ie of l.value){if(ee.length>=Number(e.maxErrors??1))break;const $=await(typeof ie=="function"?ie:()=>ie)(r.value);if($!==!0){if($!==!1&&typeof $!="string"){console.warn(`${$} is not a valid value. Rule functions must return boolean true or a string.`);continue}ee.push($||"")}}return h.value=ee,k.value=!1,s.value=G,h.value}return{errorMessages:_,isDirty:p,isDisabled:a.isDisabled,isReadonly:a.isReadonly,isPristine:s,isValid:T,isValidating:k,reset:F,resetValidation:B,validate:H,validationClasses:P}}const Lh=lt({id:String,appendIcon:kn,baseColor:String,centerAffix:{type:Boolean,default:!0},color:String,glow:Boolean,iconColor:[Boolean,String],prependIcon:kn,hideDetails:[Boolean,String],hideSpinButtons:Boolean,hint:String,persistentHint:Boolean,messages:{type:[Array,String],default:()=>[]},direction:{type:String,default:"horizontal",validator:e=>["horizontal","vertical"].includes(e)},"onClick:prepend":Fo(),"onClick:append":Fo(),...wn(),...ws(),...Ol(Os(),["maxWidth","minWidth","width"]),...Ai(),...NU()},"VInput"),ca=At()({name:"VInput",props:{...Lh()},emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:n,slots:i,emit:r}=t;const{densityClasses:a}=Ga(e),{dimensionStyles:l}=Vs(e),{themeClasses:h}=Zi(e),{rtlClasses:s}=Gs(),{InputIcon:p}=BU(e),_=ua(),x=fe(()=>e.id||`input-${_}`),{errorMessages:T,isDirty:k,isDisabled:P,isReadonly:M,isPristine:R,isValid:F,isValidating:B,reset:H,resetValidation:G,validate:ee,validationClasses:ie}=UU(e,"v-input",x),J=fe(()=>e.errorMessages?.length||!R.value&&T.value.length?T.value:e.hint&&(e.persistentHint||e.focused)?e.hint:e.messages),$=Ne(()=>J.value.length>0),W=Ne(()=>!e.hideDetails||e.hideDetails==="auto"&&($.value||!!i.details)),X=fe(()=>W.value?`${x.value}-messages`:void 0),re=fe(()=>({id:x,messagesId:X,isDirty:k,isDisabled:P,isReadonly:M,isPristine:R,isValid:F,isValidating:B,hasDetails:W,reset:H,resetValidation:G,validate:ee})),Y=Ne(()=>e.error||e.disabled?void 0:e.focused?e.color:e.baseColor),Z=Ne(()=>{if(e.iconColor)return e.iconColor===!0?Y.value:e.iconColor});return Vt(()=>{const ge=!!(i.prepend||e.prependIcon),be=!!(i.append||e.appendIcon);return z("div",{class:xt(["v-input",`v-input--${e.direction}`,{"v-input--center-affix":e.centerAffix,"v-input--focused":e.focused,"v-input--glow":e.glow,"v-input--hide-spin-buttons":e.hideSpinButtons},a.value,h.value,s.value,ie.value,e.class]),style:Yt([l.value,e.style])},[ge&&z("div",{key:"prepend",class:"v-input__prepend"},[i.prepend?.(re.value),e.prependIcon&&se(p,{key:"prepend-icon",name:"prepend",color:Z.value},null)]),i.default&&z("div",{class:"v-input__control"},[i.default?.(re.value)]),be&&z("div",{key:"append",class:"v-input__append"},[e.appendIcon&&se(p,{key:"append-icon",name:"append",color:Z.value},null),i.append?.(re.value)]),W.value&&z("div",{id:X.value,class:"v-input__details",role:"alert","aria-live":"polite"},[se(FU,{active:$.value,messages:J.value},{message:i.message}),i.details?.(re.value)])])}),{reset:H,resetValidation:G,validate:ee,isValid:F,errorMessages:T}}}),cC=Symbol("Forwarded refs");function uC(e,t){let n=e;for(;n;){const i=Reflect.getOwnPropertyDescriptor(n,t);if(i)return i;n=Object.getPrototypeOf(n)}}function xo(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return e[cC]=n,new Proxy(e,{get(r,a){if(Reflect.has(r,a))return Reflect.get(r,a);if(!(typeof a=="symbol"||a.startsWith("$")||a.startsWith("__"))){for(const l of n)if(l.value&&Reflect.has(l.value,a)){const h=Reflect.get(l.value,a);return typeof h=="function"?h.bind(l.value):h}}},has(r,a){if(Reflect.has(r,a))return!0;if(typeof a=="symbol"||a.startsWith("$")||a.startsWith("__"))return!1;for(const l of n)if(l.value&&Reflect.has(l.value,a))return!0;return!1},set(r,a,l){if(Reflect.has(r,a))return Reflect.set(r,a,l);if(typeof a=="symbol"||a.startsWith("$")||a.startsWith("__"))return!1;for(const h of n)if(h.value&&Reflect.has(h.value,a))return Reflect.set(h.value,a,l);return!1},getOwnPropertyDescriptor(r,a){const l=Reflect.getOwnPropertyDescriptor(r,a);if(l)return l;if(!(typeof a=="symbol"||a.startsWith("$")||a.startsWith("__"))){for(const h of n){if(!h.value)continue;const s=uC(h.value,a)??("_"in h.value?uC(h.value._?.setupState,a):void 0);if(s)return s}for(const h of n){const s=h.value&&h.value[cC];if(!s)continue;const p=s.slice();for(;p.length;){const _=p.shift(),x=uC(_.value,a);if(x)return x;const T=_.value&&_.value[cC];T&&p.push(...T)}}}}})}const $se=lt({...Lh(),...dr(VU(),["inline"])},"VCheckbox"),jse=At()({name:"VCheckbox",inheritAttrs:!1,props:$se(),emits:{"update:modelValue":e=>!0,"update:focused":e=>!0},setup(e,t){let{attrs:n,slots:i}=t;const r=Pn(e,"modelValue"),{isFocused:a,focus:l,blur:h}=Dh(e),s=tt(),p=ua();return Vt(()=>{const[_,x]=pm(n),T=ca.filterProps(e),k=hd.filterProps(e);return se(ca,It({ref:s,class:["v-checkbox",e.class]},_,T,{modelValue:r.value,"onUpdate:modelValue":P=>r.value=P,id:e.id||`checkbox-${p}`,focused:a.value,style:e.style}),{...i,default:P=>{let{id:M,messagesId:R,isDisabled:F,isReadonly:B,isValid:H}=P;return se(hd,It(k,{id:M.value,"aria-describedby":R.value,disabled:F.value,readonly:B.value},x,{error:H.value===!1,modelValue:r.value,"onUpdate:modelValue":G=>r.value=G,onFocus:l,onBlur:h}),i)}})}),xo({},s)}}),Wse=lt({color:String,inset:Boolean,length:[Number,String],opacity:[Number,String],thickness:[Number,String],vertical:Boolean,...wn(),...Ai()},"VDivider"),za=At()({name:"VDivider",props:Wse(),setup(e,t){let{attrs:n,slots:i}=t;const{themeClasses:r}=Zi(e),{textColorClasses:a,textColorStyles:l}=Uo(()=>e.color),h=fe(()=>{const s={};return e.length&&(s[e.vertical?"height":"width"]=pn(e.length)),e.thickness&&(s[e.vertical?"borderRightWidth":"borderTopWidth"]=pn(e.thickness)),s});return Vt(()=>{const s=z("hr",{class:xt([{"v-divider":!0,"v-divider--inset":e.inset,"v-divider--vertical":e.vertical},r.value,a.value,e.class]),style:Yt([h.value,l.value,{"--v-border-opacity":e.opacity},e.style]),"aria-orientation":!n.role||n.role==="separator"?e.vertical?"vertical":"horizontal":void 0,role:`${n.role||"separator"}`},null);return i.default?z("div",{class:xt(["v-divider__wrapper",{"v-divider__wrapper--vertical":e.vertical,"v-divider__wrapper--inset":e.inset}])},[s,z("div",{class:"v-divider__content"},[i.default()]),s]):s}),{}}}),Hk=Symbol.for("vuetify:list");function $U(){let{filterable:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{filterable:!1};const t=wi(Hk,{filterable:!1,hasPrepend:Zt(!1),updateHasPrepend:()=>null}),n={filterable:t.filterable||e,hasPrepend:Zt(!1),updateHasPrepend:i=>{i&&(n.hasPrepend.value=i)}};return Dr(Hk,n),t}function jU(){return wi(Hk,null)}const CP=e=>{const t={activate:n=>{let{id:i,value:r,activated:a}=n;return i=$n(i),e&&!r&&a.size===1&&a.has(i)||(r?a.add(i):a.delete(i)),a},in:(n,i,r)=>{let a=new Set;if(n!=null)for(const l of qr(n))a=t.activate({id:l,value:!0,activated:new Set(a),children:i,parents:r});return a},out:n=>Array.from(n)};return t},WU=e=>{const t=CP(e);return{activate:i=>{let{activated:r,id:a,...l}=i;a=$n(a);const h=r.has(a)?new Set([a]):new Set;return t.activate({...l,id:a,activated:h})},in:(i,r,a)=>{let l=new Set;if(i!=null){const h=qr(i);h.length&&(l=t.in(h.slice(0,1),r,a))}return l},out:(i,r,a)=>t.out(i,r,a)}},Hse=e=>{const t=CP(e);return{activate:i=>{let{id:r,activated:a,children:l,...h}=i;return r=$n(r),l.has(r)?a:t.activate({id:r,activated:a,children:l,...h})},in:t.in,out:t.out}},Gse=e=>{const t=WU(e);return{activate:i=>{let{id:r,activated:a,children:l,...h}=i;return r=$n(r),l.has(r)?a:t.activate({id:r,activated:a,children:l,...h})},in:t.in,out:t.out}},qse={open:e=>{let{id:t,value:n,opened:i,parents:r}=e;if(n){const a=new Set;a.add(t);let l=r.get(t);for(;l!=null;)a.add(l),l=r.get(l);return a}else return i.delete(t),i},select:()=>null},HU={open:e=>{let{id:t,value:n,opened:i,parents:r}=e;if(n){let a=r.get(t);for(i.add(t);a!=null&&a!==t;)i.add(a),a=r.get(a);return i}else i.delete(t);return i},select:()=>null},Kse={open:HU.open,select:e=>{let{id:t,value:n,opened:i,parents:r}=e;if(!n)return i;const a=[];let l=r.get(t);for(;l!=null;)a.push(l),l=r.get(l);return new Set(a)}},kP=e=>{const t={select:n=>{let{id:i,value:r,selected:a}=n;if(i=$n(i),e&&!r){const l=Array.from(a.entries()).reduce((h,s)=>{let[p,_]=s;return _==="on"&&h.push(p),h},[]);if(l.length===1&&l[0]===i)return a}return a.set(i,r?"on":"off"),a},in:(n,i,r,a)=>{const l=new Map;for(const h of n||[])t.select({id:h,value:!0,selected:l,children:i,parents:r,disabled:a});return l},out:n=>{const i=[];for(const[r,a]of n.entries())a==="on"&&i.push(r);return i}};return t},GU=e=>{const t=kP(e);return{select:i=>{let{selected:r,id:a,...l}=i;a=$n(a);const h=r.has(a)?new Map([[a,r.get(a)]]):new Map;return t.select({...l,id:a,selected:h})},in:(i,r,a,l)=>i?.length?t.in(i.slice(0,1),r,a,l):new Map,out:(i,r,a)=>t.out(i,r,a)}},Xse=e=>{const t=kP(e);return{select:i=>{let{id:r,selected:a,children:l,...h}=i;return r=$n(r),l.has(r)?a:t.select({id:r,selected:a,children:l,...h})},in:t.in,out:t.out}},Yse=e=>{const t=GU(e);return{select:i=>{let{id:r,selected:a,children:l,...h}=i;return r=$n(r),l.has(r)?a:t.select({id:r,selected:a,children:l,...h})},in:t.in,out:t.out}},qU=e=>{const t={select:n=>{let{id:i,value:r,selected:a,children:l,parents:h,disabled:s}=n;i=$n(i);const p=new Map(a),_=[i];for(;_.length;){const T=_.shift();s.has(T)||a.set($n(T),r?"on":"off"),l.has(T)&&_.push(...l.get(T))}let x=$n(h.get(i));for(;x;){let T=!0,k=!0;for(const P of l.get(x)){const M=$n(P);if(!s.has(M)&&(a.get(M)!=="on"&&(T=!1),a.has(M)&&a.get(M)!=="off"&&(k=!1),!T&&!k))break}a.set(x,T?"on":k?"off":"indeterminate"),x=$n(h.get(x))}return e&&!r&&Array.from(a.entries()).reduce((k,P)=>{let[M,R]=P;return R==="on"&&k.push(M),k},[]).length===0?p:a},in:(n,i,r,a)=>{let l=new Map;for(const h of n||[])l=t.select({id:h,value:!0,selected:l,children:i,parents:r,disabled:a});return l},out:(n,i)=>{const r=[];for(const[a,l]of n.entries())l==="on"&&!i.has(a)&&r.push(a);return r}};return t},Zse=e=>{const t=qU(e);return{select:t.select,in:t.in,out:(i,r,a)=>{const l=[];for(const[h,s]of i.entries())if(s==="on"){if(a.has(h)){const p=a.get(h);if(i.get(p)==="on")continue}l.push(h)}return l}}},Zb=Symbol.for("vuetify:nested"),KU={id:Zt(),root:{register:()=>null,unregister:()=>null,children:tt(new Map),parents:tt(new Map),disabled:tt(new Set),open:()=>null,openOnSelect:()=>null,activate:()=>null,select:()=>null,activatable:tt(!1),selectable:tt(!1),opened:tt(new Set),activated:tt(new Set),selected:tt(new Map),selectedValues:tt([]),getPath:()=>[]}},Jse=lt({activatable:Boolean,selectable:Boolean,activeStrategy:[String,Function,Object],selectStrategy:[String,Function,Object],openStrategy:[String,Object],opened:null,activated:null,selected:null,mandatory:Boolean},"nested"),Qse=e=>{let t=!1;const n=Zt(new Map),i=Zt(new Map),r=Zt(new Set),a=Pn(e,"opened",e.opened,R=>new Set(Array.isArray(R)?R.map(F=>$n(F)):R),R=>[...R.values()]),l=fe(()=>{if(typeof e.activeStrategy=="object")return e.activeStrategy;if(typeof e.activeStrategy=="function")return e.activeStrategy(e.mandatory);switch(e.activeStrategy){case"leaf":return Hse(e.mandatory);case"single-leaf":return Gse(e.mandatory);case"independent":return CP(e.mandatory);case"single-independent":default:return WU(e.mandatory)}}),h=fe(()=>{if(typeof e.selectStrategy=="object")return e.selectStrategy;if(typeof e.selectStrategy=="function")return e.selectStrategy(e.mandatory);switch(e.selectStrategy){case"single-leaf":return Yse(e.mandatory);case"leaf":return Xse(e.mandatory);case"independent":return kP(e.mandatory);case"single-independent":return GU(e.mandatory);case"trunk":return Zse(e.mandatory);case"classic":default:return qU(e.mandatory)}}),s=fe(()=>{if(typeof e.openStrategy=="object")return e.openStrategy;switch(e.openStrategy){case"list":return Kse;case"single":return qse;case"multiple":default:return HU}}),p=Pn(e,"activated",e.activated,R=>l.value.in(R,n.value,i.value),R=>l.value.out(R,n.value,i.value)),_=Pn(e,"selected",e.selected,R=>h.value.in(R,n.value,i.value,r.value),R=>h.value.out(R,n.value,i.value));Nr(()=>{t=!0});function x(R){const F=[];let B=$n(R);for(;B!==void 0;)F.unshift(B),B=i.value.get(B);return F}const T=xs("nested"),k=new Set,P=Yne(()=>{Hn(()=>{n.value=new Map(n.value),i.value=new Map(i.value)})},100),M={id:Zt(),root:{opened:a,activatable:Ne(()=>e.activatable),selectable:Ne(()=>e.selectable),activated:p,selected:_,selectedValues:fe(()=>{const R=[];for(const[F,B]of _.value.entries())B==="on"&&R.push(F);return R}),register:(R,F,B,H)=>{if(k.has(R)){x(R).map(String).join(" -> "),x(F).concat(R).map(String).join(" -> ");return}else k.add(R);F&&R!==F&&i.value.set(R,F),B&&r.value.add(R),H&&n.value.set(R,[]),F!=null&&n.value.set(F,[...n.value.get(F)||[],R]),P()},unregister:R=>{if(t)return;k.delete(R),n.value.delete(R),r.value.delete(R);const F=i.value.get(R);if(F){const B=n.value.get(F)??[];n.value.set(F,B.filter(H=>H!==R))}i.value.delete(R),P()},open:(R,F,B)=>{T.emit("click:open",{id:R,value:F,path:x(R),event:B});const H=s.value.open({id:R,value:F,opened:new Set(a.value),children:n.value,parents:i.value,event:B});H&&(a.value=H)},openOnSelect:(R,F,B)=>{const H=s.value.select({id:R,value:F,selected:new Map(_.value),opened:new Set(a.value),children:n.value,parents:i.value,event:B});H&&(a.value=H)},select:(R,F,B)=>{T.emit("click:select",{id:R,value:F,path:x(R),event:B});const H=h.value.select({id:R,value:F,selected:new Map(_.value),children:n.value,parents:i.value,disabled:r.value,event:B});H&&(_.value=H),M.root.openOnSelect(R,F,B)},activate:(R,F,B)=>{if(!e.activatable)return M.root.select(R,!0,B);T.emit("click:activate",{id:R,value:F,path:x(R),event:B});const H=l.value.activate({id:R,value:F,activated:new Set(p.value),children:n.value,parents:i.value,event:B});if(H.size!==p.value.size)p.value=H;else{for(const G of H)if(!p.value.has(G)){p.value=H;return}for(const G of p.value)if(!H.has(G)){p.value=H;return}}},children:n,parents:i,disabled:r,getPath:x}};return Dr(Zb,M),M.root},XU=(e,t,n)=>{const i=wi(Zb,KU),r=Symbol("nested item"),a=fe(()=>{const h=$n(Ua(e));return h!==void 0?h:r}),l={...i,id:a,open:(h,s)=>i.root.open(a.value,h,s),openOnSelect:(h,s)=>i.root.openOnSelect(a.value,h,s),isOpen:fe(()=>i.root.opened.value.has(a.value)),parent:fe(()=>i.root.parents.value.get(a.value)),activate:(h,s)=>i.root.activate(a.value,h,s),isActivated:fe(()=>i.root.activated.value.has(a.value)),select:(h,s)=>i.root.select(a.value,h,s),isSelected:fe(()=>i.root.selected.value.get(a.value)==="on"),isIndeterminate:fe(()=>i.root.selected.value.get(a.value)==="indeterminate"),isLeaf:fe(()=>!i.root.children.value.get(a.value)),isGroupActivator:i.isGroupActivator};return v_(()=>{i.isGroupActivator||Hn(()=>{i.root.register(a.value,i.id.value,Ua(t),n)})}),Nr(()=>{i.isGroupActivator||i.root.unregister(a.value)}),qt(a,(h,s)=>{i.isGroupActivator||(i.root.unregister(s),Hn(()=>{i.root.register(h,i.id.value,Ua(t),n)}))}),n&&Dr(Zb,l),l},eoe=()=>{const e=wi(Zb,KU);Dr(Zb,{...e,isGroupActivator:!0})};function hg(){const e=Zt(!1);return Kr(()=>{window.requestAnimationFrame(()=>{e.value=!0})}),{ssrBootStyles:Ne(()=>e.value?void 0:{transition:"none !important"}),isBooted:Fp(e)}}const toe=uc({name:"VListGroupActivator",setup(e,t){let{slots:n}=t;return eoe(),()=>n.default?.()}}),YU=lt({activeColor:String,baseColor:String,color:String,collapseIcon:{type:kn,default:"$collapse"},disabled:Boolean,expandIcon:{type:kn,default:"$expand"},rawId:[String,Number],prependIcon:kn,appendIcon:kn,fluid:Boolean,subgroup:Boolean,title:String,value:null,...wn(),...ti()},"VListGroup"),Jb=At()({name:"VListGroup",props:YU(),setup(e,t){let{slots:n}=t;const{isOpen:i,open:r,id:a}=XU(()=>e.value,()=>e.disabled,!0),l=fe(()=>`v-list-group--id-${String(e.rawId??a.value)}`),h=jU(),{isBooted:s}=hg();function p(k){["INPUT","TEXTAREA"].includes(k.target?.tagName)||r(!i.value,k)}const _=fe(()=>({onClick:p,class:"v-list-group__header",id:l.value})),x=fe(()=>i.value?e.collapseIcon:e.expandIcon),T=fe(()=>({VListItem:{activeColor:e.activeColor,baseColor:e.baseColor,color:e.color,prependIcon:e.prependIcon||e.subgroup&&x.value,appendIcon:e.appendIcon||!e.subgroup&&x.value,title:e.title,value:e.value}}));return Vt(()=>se(e.tag,{class:xt(["v-list-group",{"v-list-group--prepend":h?.hasPrepend.value,"v-list-group--fluid":e.fluid,"v-list-group--subgroup":e.subgroup,"v-list-group--open":i.value},e.class]),style:Yt(e.style)},{default:()=>[n.activator&&se(ui,{defaults:T.value},{default:()=>[se(toe,null,{default:()=>[n.activator({props:_.value,isOpen:i.value})]})]}),se(Fa,{transition:{component:z0},disabled:!s.value},{default:()=>[Ii(z("div",{class:"v-list-group__items",role:"group","aria-labelledby":l.value},[n.default?.()]),[[_u,i.value]])]})]})),{isOpen:i}}}),noe=lt({opacity:[Number,String],...wn(),...ti()},"VListItemSubtitle"),ZU=At()({name:"VListItemSubtitle",props:noe(),setup(e,t){let{slots:n}=t;return Vt(()=>se(e.tag,{class:xt(["v-list-item-subtitle",e.class]),style:Yt([{"--v-list-item-subtitle-opacity":e.opacity},e.style])},n)),{}}}),JU=Ah("v-list-item-title"),QU=lt({active:{type:Boolean,default:void 0},activeClass:String,activeColor:String,appendAvatar:String,appendIcon:kn,baseColor:String,disabled:Boolean,lines:[Boolean,String],link:{type:Boolean,default:void 0},nav:Boolean,prependAvatar:String,prependIcon:kn,ripple:{type:[Boolean,Object],default:!0},slim:Boolean,subtitle:{type:[String,Number,Boolean],default:void 0},title:{type:[String,Number,Boolean],default:void 0},value:null,onClick:Fo(),onClickOnce:Fo(),...cl(),...wn(),...ws(),...Os(),...qs(),...$r(),...F0(),...ti(),...Ai(),...Nc({variant:"text"})},"VListItem"),vu=At()({name:"VListItem",directives:{vRipple:Wa},props:QU(),emits:{click:e=>!0},setup(e,t){let{attrs:n,slots:i,emit:r}=t;const a=B0(e,n),l=fe(()=>e.value===void 0?a.href.value:e.value),{activate:h,isActivated:s,select:p,isOpen:_,isSelected:x,isIndeterminate:T,isGroupActivator:k,root:P,parent:M,openOnSelect:R,id:F}=XU(l,()=>e.disabled,!1),B=jU(),H=fe(()=>e.active!==!1&&(e.active||a.isActive?.value||(P.activatable.value?s.value:x.value))),G=Ne(()=>e.link!==!1&&a.isLink.value),ee=fe(()=>!!B&&(P.selectable.value||P.activatable.value||e.value!=null)),ie=fe(()=>!e.disabled&&e.link!==!1&&(e.link||a.isClickable.value||ee.value)),J=fe(()=>B?G.value?"link":ee.value?"option":"listitem":void 0),$=fe(()=>{if(ee.value)return P.activatable.value?s.value:P.selectable.value?x.value:H.value}),W=Ne(()=>e.rounded||e.nav),X=Ne(()=>e.color??e.activeColor),re=Ne(()=>({color:H.value?X.value??e.baseColor:e.baseColor,variant:e.variant}));qt(()=>a.isActive?.value,Ye=>{Ye&&Y()}),v_(()=>{a.isActive?.value&&Hn(()=>Y())});function Y(){M.value!=null&&P.open(M.value,!0),R(!0)}const{themeClasses:Z}=Zi(e),{borderClasses:ge}=Bl(e),{colorClasses:be,colorStyles:Be,variantClasses:nt}=lg(re),{densityClasses:We}=Ga(e),{dimensionStyles:Le}=Vs(e),{elevationClasses:Ze}=bo(e),{roundedClasses:Ee}=ts(W),Je=Ne(()=>e.lines?`v-list-item--${e.lines}-line`:void 0),it=Ne(()=>e.ripple!==void 0&&e.ripple&&B?.filterable?{keys:["Enter"]}:e.ripple),vt=fe(()=>({isActive:H.value,select:p,isOpen:_.value,isSelected:x.value,isIndeterminate:T.value}));function mt(Ye){r("click",Ye),!["INPUT","TEXTAREA"].includes(Ye.target?.tagName)&&ie.value&&(a.navigate?.(Ye),!k&&(P.activatable.value?h(!s.value,Ye):(P.selectable.value||e.value!=null&&!G.value)&&p(!x.value,Ye)))}function ot(Ye){const ut=Ye.target;["INPUT","TEXTAREA"].includes(ut.tagName)||(Ye.key==="Enter"||Ye.key===" "&&!B?.filterable)&&(Ye.preventDefault(),Ye.stopPropagation(),Ye.target.dispatchEvent(new MouseEvent("click",Ye)))}return Vt(()=>{const Ye=G.value?"a":e.tag,ut=i.title||e.title!=null,Ke=i.subtitle||e.subtitle!=null,jt=!!(e.appendAvatar||e.appendIcon),xn=!!(jt||i.append),ke=!!(e.prependAvatar||e.prependIcon),Ae=!!(ke||i.prepend);return B?.updateHasPrepend(Ae),e.activeColor&&f6("active-color",["color","base-color"]),Ii(se(Ye,It(a.linkProps,{class:["v-list-item",{"v-list-item--active":H.value,"v-list-item--disabled":e.disabled,"v-list-item--link":ie.value,"v-list-item--nav":e.nav,"v-list-item--prepend":!Ae&&B?.hasPrepend.value,"v-list-item--slim":e.slim,[`${e.activeClass}`]:e.activeClass&&H.value},Z.value,ge.value,be.value,We.value,Ze.value,Je.value,Ee.value,nt.value,e.class],style:[Be.value,Le.value,e.style],tabindex:ie.value?B?-2:0:void 0,"aria-selected":$.value,role:J.value,onClick:mt,onKeydown:ie.value&&!G.value&&ot}),{default:()=>[gm(ie.value||H.value,"v-list-item"),Ae&&z("div",{key:"prepend",class:"v-list-item__prepend"},[i.prepend?se(ui,{key:"prepend-defaults",disabled:!ke,defaults:{VAvatar:{density:e.density,image:e.prependAvatar},VIcon:{density:e.density,icon:e.prependIcon},VListItemAction:{start:!0}}},{default:()=>[i.prepend?.(vt.value)]}):z(un,null,[e.prependAvatar&&se(cc,{key:"prepend-avatar",density:e.density,image:e.prependAvatar},null),e.prependIcon&&se(_i,{key:"prepend-icon",density:e.density,icon:e.prependIcon},null)]),z("div",{class:"v-list-item__spacer"},null)]),z("div",{class:"v-list-item__content","data-no-activator":""},[ut&&se(JU,{key:"title"},{default:()=>[i.title?.({title:e.title})??sn(e.title)]}),Ke&&se(ZU,{key:"subtitle"},{default:()=>[i.subtitle?.({subtitle:e.subtitle})??sn(e.subtitle)]}),i.default?.(vt.value)]),xn&&z("div",{key:"append",class:"v-list-item__append"},[i.append?se(ui,{key:"append-defaults",disabled:!jt,defaults:{VAvatar:{density:e.density,image:e.appendAvatar},VIcon:{density:e.density,icon:e.appendIcon},VListItemAction:{end:!0}}},{default:()=>[i.append?.(vt.value)]}):z(un,null,[e.appendIcon&&se(_i,{key:"append-icon",density:e.density,icon:e.appendIcon},null),e.appendAvatar&&se(cc,{key:"append-avatar",density:e.density,image:e.appendAvatar},null)]),z("div",{class:"v-list-item__spacer"},null)])]}),[[Wa,ie.value&&it.value]])}),{activate:h,isActivated:s,isGroupActivator:k,isSelected:x,list:B,select:p,root:P,id:F,link:a}}}),ioe=lt({color:String,inset:Boolean,sticky:Boolean,title:String,...wn(),...ti()},"VListSubheader"),P_=At()({name:"VListSubheader",props:ioe(),setup(e,t){let{slots:n}=t;const{textColorClasses:i,textColorStyles:r}=Uo(()=>e.color);return Vt(()=>{const a=!!(n.default||e.title);return se(e.tag,{class:xt(["v-list-subheader",{"v-list-subheader--inset":e.inset,"v-list-subheader--sticky":e.sticky},i.value,e.class]),style:Yt([{textColorStyles:r},e.style])},{default:()=>[a&&z("div",{class:"v-list-subheader__text"},[n.default?.()??e.title])]})}),{}}}),roe=lt({items:Array,returnObject:Boolean},"VListChildren"),e$=At()({name:"VListChildren",props:roe(),setup(e,t){let{slots:n}=t;return $U(),()=>n.default?.()??e.items?.map(i=>{let{children:r,props:a,type:l,raw:h}=i;if(l==="divider")return n.divider?.({props:a})??se(za,a,null);if(l==="subheader")return n.subheader?.({props:a})??se(P_,a,null);const s={subtitle:n.subtitle?_=>n.subtitle?.({..._,item:h}):void 0,prepend:n.prepend?_=>n.prepend?.({..._,item:h}):void 0,append:n.append?_=>n.append?.({..._,item:h}):void 0,title:n.title?_=>n.title?.({..._,item:h}):void 0},p=Jb.filterProps(a);return r?se(Jb,It(p,{value:e.returnObject?h:a?.value,rawId:a?.value}),{activator:_=>{let{props:x}=_;const T=It(a,x,{value:e.returnObject?h:a.value});return n.header?n.header({props:T}):se(vu,T,s)},default:()=>se(e$,{items:r,returnObject:e.returnObject},n)}):n.item?n.item({props:a}):se(vu,It(a,{value:e.returnObject?h:a.value}),s)})}}),t$=lt({items:{type:Array,default:()=>[]},itemTitle:{type:[String,Array,Function],default:"title"},itemValue:{type:[String,Array,Function],default:"value"},itemChildren:{type:[Boolean,String,Array,Function],default:"children"},itemProps:{type:[Boolean,String,Array,Function],default:"props"},itemType:{type:[Boolean,String,Array,Function],default:"type"},returnObject:Boolean,valueComparator:Function},"list-items"),soe=new Set(["item","divider","subheader"]);function lu(e,t){const n=Ms(t,e.itemTitle,t),i=Ms(t,e.itemValue,n),r=Ms(t,e.itemChildren),a=e.itemProps===!0?typeof t=="object"&&t!=null&&!Array.isArray(t)?"children"in t?dr(t,["children"]):t:void 0:Ms(t,e.itemProps);let l=Ms(t,e.itemType,"item");soe.has(l)||(l="item");const h={title:n,value:i,...a};return{type:l,title:String(h.title??""),value:h.value,props:h,children:l==="item"&&Array.isArray(r)?n$(e,r):void 0,raw:t}}lu.neededProps=["itemTitle","itemValue","itemChildren","itemProps","itemType"];function n$(e,t){const n=Ol(e,lu.neededProps),i=[];for(const r of t)i.push(lu(n,r));return i}function IP(e){const t=fe(()=>n$(e,e.items)),n=fe(()=>t.value.some(h=>h.value===null)),i=Zt(new Map),r=Zt([]);Ur(()=>{const h=t.value,s=new Map,p=[];for(let _=0;_<h.length;_++){const x=h[_];if(sm(x.value)||x.value===null){let T=s.get(x.value);T||(T=[],s.set(x.value,T)),T.push(x)}else p.push(x)}i.value=s,r.value=p});function a(h){const s=i.value,p=t.value,_=r.value,x=n.value,T=e.returnObject,k=!!e.valueComparator,P=e.valueComparator||_o,M=Ol(e,lu.neededProps),R=[];e:for(const F of h){if(!x&&F===null)continue;if(T&&typeof F=="string"){R.push(lu(M,F));continue}const B=s.get(F);if(k||!B){for(const H of k?p:_)if(P(F,H.value)){R.push(H);continue e}R.push(lu(M,F));continue}R.push(...B)}return R}function l(h){return e.returnObject?h.map(s=>{let{raw:p}=s;return p}):h.map(s=>{let{value:p}=s;return p})}return{items:t,transformIn:a,transformOut:l}}const ooe=new Set(["item","divider","subheader"]);function aoe(e,t){const n=sm(t)?t:Ms(t,e.itemTitle),i=sm(t)?t:Ms(t,e.itemValue,void 0),r=Ms(t,e.itemChildren),a=e.itemProps===!0?dr(t,["children"]):Ms(t,e.itemProps);let l=Ms(t,e.itemType,"item");ooe.has(l)||(l="item");const h={title:n,value:i,...a};return{type:l,title:h.title,value:h.value,props:h,children:l==="item"&&r?i$(e,r):void 0,raw:t}}function i$(e,t){const n=[];for(const i of t)n.push(aoe(e,i));return n}function r$(e){return{items:fe(()=>i$(e,e.items))}}const s$=lt({baseColor:String,activeColor:String,activeClass:String,bgColor:String,disabled:Boolean,filterable:Boolean,expandIcon:kn,collapseIcon:kn,lines:{type:[Boolean,String],default:"one"},slim:Boolean,nav:Boolean,"onClick:open":Fo(),"onClick:select":Fo(),"onUpdate:opened":Fo(),...Jse({selectStrategy:"single-leaf",openStrategy:"list"}),...cl(),...wn(),...ws(),...Os(),...qs(),...t$(),...$r(),...ti(),...Ai(),...Nc({variant:"text"})},"VList"),c_=At()({name:"VList",props:s$(),emits:{"update:selected":e=>!0,"update:activated":e=>!0,"update:opened":e=>!0,"click:open":e=>!0,"click:activate":e=>!0,"click:select":e=>!0},setup(e,t){let{slots:n}=t;const{items:i}=r$(e),{themeClasses:r}=Zi(e),{backgroundColorClasses:a,backgroundColorStyles:l}=nr(()=>e.bgColor),{borderClasses:h}=Bl(e),{densityClasses:s}=Ga(e),{dimensionStyles:p}=Vs(e),{elevationClasses:_}=bo(e),{roundedClasses:x}=ts(e),{children:T,open:k,parents:P,select:M,getPath:R}=Qse(e),F=Ne(()=>e.lines?`v-list--${e.lines}-line`:void 0),B=Ne(()=>e.activeColor),H=Ne(()=>e.baseColor),G=Ne(()=>e.color),ee=Ne(()=>e.selectable||e.activatable);$U({filterable:e.filterable}),es({VListGroup:{activeColor:B,baseColor:H,color:G,expandIcon:Ne(()=>e.expandIcon),collapseIcon:Ne(()=>e.collapseIcon)},VListItem:{activeClass:Ne(()=>e.activeClass),activeColor:B,baseColor:H,color:G,density:Ne(()=>e.density),disabled:Ne(()=>e.disabled),lines:Ne(()=>e.lines),nav:Ne(()=>e.nav),slim:Ne(()=>e.slim),variant:Ne(()=>e.variant)}});const ie=Zt(!1),J=tt();function $(ge){ie.value=!0}function W(ge){ie.value=!1}function X(ge){!ie.value&&!(ge.relatedTarget&&J.value?.contains(ge.relatedTarget))&&Z()}function re(ge){const be=ge.target;if(!(!J.value||be.tagName==="INPUT"&&["Home","End"].includes(ge.key)||be.tagName==="TEXTAREA")){if(ge.key==="ArrowDown")Z("next");else if(ge.key==="ArrowUp")Z("prev");else if(ge.key==="Home")Z("first");else if(ge.key==="End")Z("last");else return;ge.preventDefault()}}function Y(ge){ie.value=!0}function Z(ge){if(J.value)return Lp(J.value,ge)}return Vt(()=>se(e.tag,{ref:J,class:xt(["v-list",{"v-list--disabled":e.disabled,"v-list--nav":e.nav,"v-list--slim":e.slim},r.value,a.value,h.value,s.value,_.value,F.value,x.value,e.class]),style:Yt([l.value,p.value,e.style]),tabindex:e.disabled?-1:0,role:ee.value?"listbox":"list","aria-activedescendant":void 0,onFocusin:$,onFocusout:W,onFocus:X,onKeydown:re,onMousedown:Y},{default:()=>[se(e$,{items:i.value,returnObject:e.returnObject},n)]})),{open:k,select:M,focus:Z,children:T,parents:P,getPath:R}}}),loe=Ah("v-list-img"),coe=lt({start:Boolean,end:Boolean,...wn(),...ti()},"VListItemAction"),AP=At()({name:"VListItemAction",props:coe(),setup(e,t){let{slots:n}=t;return Vt(()=>se(e.tag,{class:xt(["v-list-item-action",{"v-list-item-action--start":e.start,"v-list-item-action--end":e.end},e.class]),style:Yt(e.style)},n)),{}}}),uoe=lt({start:Boolean,end:Boolean,...wn(),...ti()},"VListItemMedia"),doe=At()({name:"VListItemMedia",props:uoe(),setup(e,t){let{slots:n}=t;return Vt(()=>se(e.tag,{class:xt(["v-list-item-media",{"v-list-item-media--start":e.start,"v-list-item-media--end":e.end},e.class]),style:Yt(e.style)},n)),{}}});function dC(e,t){return{x:e.x+t.x,y:e.y+t.y}}function hoe(e,t){return{x:e.x-t.x,y:e.y-t.y}}function k3(e,t){if(e.side==="top"||e.side==="bottom"){const{side:n,align:i}=e,r=i==="left"?0:i==="center"?t.width/2:i==="right"?t.width:i,a=n==="top"?0:n==="bottom"?t.height:n;return dC({x:r,y:a},t)}else if(e.side==="left"||e.side==="right"){const{side:n,align:i}=e,r=n==="left"?0:n==="right"?t.width:n,a=i==="top"?0:i==="center"?t.height/2:i==="bottom"?t.height:i;return dC({x:r,y:a},t)}return dC({x:t.width/2,y:t.height/2},t)}const o$={static:poe,connected:voe},foe=lt({locationStrategy:{type:[String,Function],default:"static",validator:e=>typeof e=="function"||e in o$},location:{type:String,default:"bottom"},origin:{type:String,default:"auto"},offset:[Number,String,Array],stickToTarget:Boolean},"VOverlay-location-strategies");function moe(e,t){const n=tt({}),i=tt();Gi&&aa(()=>!!(t.isActive.value&&e.locationStrategy),h=>{qt(()=>e.locationStrategy,h),so(()=>{window.removeEventListener("resize",r),visualViewport?.removeEventListener("resize",a),visualViewport?.removeEventListener("scroll",l),i.value=void 0}),window.addEventListener("resize",r,{passive:!0}),visualViewport?.addEventListener("resize",a,{passive:!0}),visualViewport?.addEventListener("scroll",l,{passive:!0}),typeof e.locationStrategy=="function"?i.value=e.locationStrategy(t,e,n)?.updateLocation:i.value=o$[e.locationStrategy](t,e,n)?.updateLocation});function r(h){i.value?.(h)}function a(h){i.value?.(h)}function l(h){i.value?.(h)}return{contentStyles:n,updateLocation:i}}function poe(){}function goe(e,t){const n=oP(e);return t?n.x+=parseFloat(e.style.right||0):n.x-=parseFloat(e.style.left||0),n.y-=parseFloat(e.style.top||0),n}function voe(e,t,n){(Array.isArray(e.target.value)||Xne(e.target.value))&&Object.assign(n.value,{position:"fixed",top:0,[e.isRtl.value?"right":"left"]:0});const{preferredAnchor:r,preferredOrigin:a}=sP(()=>{const F=Lk(t.location,e.isRtl.value),B=t.origin==="overlap"?F:t.origin==="auto"?iC(F):Lk(t.origin,e.isRtl.value);return F.side===B.side&&F.align===rC(B).align?{preferredAnchor:zV(F),preferredOrigin:zV(B)}:{preferredAnchor:F,preferredOrigin:B}}),[l,h,s,p]=["minWidth","minHeight","maxWidth","maxHeight"].map(F=>fe(()=>{const B=parseFloat(t[F]);return isNaN(B)?1/0:B})),_=fe(()=>{if(Array.isArray(t.offset))return t.offset;if(typeof t.offset=="string"){const F=t.offset.split(" ").map(parseFloat);return F.length<2&&F.push(0),F}return typeof t.offset=="number"?[t.offset,0]:[0,0]});let x=!1,T=-1;const k=new b6(4),P=new ResizeObserver(()=>{if(!x)return;if(requestAnimationFrame(B=>{B!==T&&k.clear(),requestAnimationFrame(H=>{T=H})}),k.isFull){const B=k.values();if(_o(B.at(-1),B.at(-3))&&!_o(B.at(-1),B.at(-2)))return}const F=R();F&&k.push(F.flipped)});let M=new Bc({x:0,y:0,width:0,height:0});qt(e.target,(F,B)=>{B&&!Array.isArray(B)&&P.unobserve(B),Array.isArray(F)?_o(F,B)||R():F&&P.observe(F)},{immediate:!0}),qt(e.contentEl,(F,B)=>{B&&P.unobserve(B),F&&P.observe(F)},{immediate:!0}),so(()=>{P.disconnect()});function R(){if(x=!1,requestAnimationFrame(()=>x=!0),!e.target.value||!e.contentEl.value)return;(Array.isArray(e.target.value)||e.target.value.offsetParent||e.target.value.getClientRects().length)&&(M=E6(e.target.value));const F=goe(e.contentEl.value,e.isRtl.value),B=M1(e.contentEl.value),H=t.stickToTarget?0:12;B.length||(B.push(document.documentElement),e.contentEl.value.style.top&&e.contentEl.value.style.left||(F.x-=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-x")||0),F.y-=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-y")||0)));const G=B.reduce((Z,ge)=>{const be=gne(ge);return Z?new Bc({x:Math.max(Z.left,be.left),y:Math.max(Z.top,be.top),width:Math.min(Z.right,be.right)-Math.max(Z.left,be.left),height:Math.min(Z.bottom,be.bottom)-Math.max(Z.top,be.top)}):be},void 0);t.stickToTarget?(G.x+=Math.min(0,M.x),G.y+=Math.min(0,M.y),G.width=Math.max(G.width,M.x+M.width),G.height=Math.max(G.height,M.y+M.height)):(G.x+=H,G.y+=H,G.width-=H*2,G.height-=H*2);let ee={anchor:r.value,origin:a.value};function ie(Z){const ge=new Bc(F),be=k3(Z.anchor,M),Be=k3(Z.origin,ge);let{x:nt,y:We}=hoe(be,Be);switch(Z.anchor.side){case"top":We-=_.value[0];break;case"bottom":We+=_.value[0];break;case"left":nt-=_.value[0];break;case"right":nt+=_.value[0];break}switch(Z.anchor.align){case"top":We-=_.value[1];break;case"bottom":We+=_.value[1];break;case"left":nt-=_.value[1];break;case"right":nt+=_.value[1];break}return ge.x+=nt,ge.y+=We,ge.width=Math.min(ge.width,s.value),ge.height=Math.min(ge.height,p.value),{overflows:UV(ge,G),x:nt,y:We}}let J=0,$=0;const W={x:0,y:0},X={x:!1,y:!1};let re=-1;for(;!(re++>10);){const{x:Z,y:ge,overflows:be}=ie(ee);J+=Z,$+=ge,F.x+=Z,F.y+=ge;{const Be=NV(ee.anchor),nt=be.x.before||be.x.after,We=be.y.before||be.y.after;let Le=!1;if(["x","y"].forEach(Ze=>{if(Ze==="x"&&nt&&!X.x||Ze==="y"&&We&&!X.y){const Ee={anchor:{...ee.anchor},origin:{...ee.origin}},Je=Ze==="x"?Be==="y"?rC:iC:Be==="y"?iC:rC;Ee.anchor=Je(Ee.anchor),Ee.origin=Je(Ee.origin);const{overflows:it}=ie(Ee);(it[Ze].before<=be[Ze].before&&it[Ze].after<=be[Ze].after||it[Ze].before+it[Ze].after<(be[Ze].before+be[Ze].after)/2)&&(ee=Ee,Le=X[Ze]=!0)}}),Le)continue}be.x.before&&(J+=be.x.before,F.x+=be.x.before),be.x.after&&(J-=be.x.after,F.x-=be.x.after),be.y.before&&($+=be.y.before,F.y+=be.y.before),be.y.after&&($-=be.y.after,F.y-=be.y.after);{const Be=UV(F,G);W.x=G.width-Be.x.before-Be.x.after,W.y=G.height-Be.y.before-Be.y.after,J+=Be.x.before,F.x+=Be.x.before,$+=Be.y.before,F.y+=Be.y.before}break}const Y=NV(ee.anchor);return Object.assign(n.value,{"--v-overlay-anchor-origin":`${ee.anchor.side} ${ee.anchor.align}`,transformOrigin:`${ee.origin.side} ${ee.origin.align}`,top:pn(hC($)),left:e.isRtl.value?void 0:pn(hC(J)),right:e.isRtl.value?pn(hC(-J)):void 0,minWidth:pn(Y==="y"?Math.min(l.value,M.width):l.value),maxWidth:pn(I3(Er(W.x,l.value===1/0?0:l.value,s.value))),maxHeight:pn(I3(Er(W.y,h.value===1/0?0:h.value,p.value)))}),{available:W,contentBox:F,flipped:X}}return qt(()=>[r.value,a.value,t.offset,t.minWidth,t.minHeight,t.maxWidth,t.maxHeight],()=>R()),Hn(()=>{const F=R();if(!F)return;const{available:B,contentBox:H}=F;H.height>B.y&&requestAnimationFrame(()=>{R(),requestAnimationFrame(()=>{R()})})}),{updateLocation:R}}function hC(e){return Math.round(e*devicePixelRatio)/devicePixelRatio}function I3(e){return Math.ceil(e*devicePixelRatio)/devicePixelRatio}let Gk=!0;const F1=[];function _oe(e){!Gk||F1.length?(F1.push(e),qk()):(Gk=!1,e(),qk())}let A3=-1;function qk(){cancelAnimationFrame(A3),A3=requestAnimationFrame(()=>{const e=F1.shift();e&&e(),F1.length?qk():Gk=!0})}const a$={none:null,close:xoe,block:woe,reposition:Toe},yoe=lt({scrollStrategy:{type:[String,Function],default:"block",validator:e=>typeof e=="function"||e in a$}},"VOverlay-scroll-strategies");function boe(e,t){if(!Gi)return;let n;Ur(async()=>{n?.stop(),t.isActive.value&&e.scrollStrategy&&(n=zv(),await new Promise(i=>setTimeout(i)),n.active&&n.run(()=>{typeof e.scrollStrategy=="function"?e.scrollStrategy(t,e,n):a$[e.scrollStrategy]?.(t,e,n)}))}),so(()=>{n?.stop()})}function xoe(e){function t(n){e.isActive.value=!1}l$(PP(e.target.value,e.contentEl.value),t)}function woe(e,t){const n=e.root.value?.offsetParent,i=PP(e.target.value,e.contentEl.value),r=[...new Set([...M1(i,t.contained?n:void 0),...M1(e.contentEl.value,t.contained?n:void 0)])].filter(h=>!h.classList.contains("v-overlay-scroll-blocked")),a=window.innerWidth-document.documentElement.offsetWidth,l=(h=>uP(h)&&h)(n||document.documentElement);l&&e.root.value.classList.add("v-overlay--scroll-blocked"),r.forEach((h,s)=>{h.style.setProperty("--v-body-scroll-x",pn(-h.scrollLeft)),h.style.setProperty("--v-body-scroll-y",pn(-h.scrollTop)),h!==document.documentElement&&h.style.setProperty("--v-scrollbar-offset",pn(a)),h.classList.add("v-overlay-scroll-blocked")}),so(()=>{r.forEach((h,s)=>{const p=parseFloat(h.style.getPropertyValue("--v-body-scroll-x")),_=parseFloat(h.style.getPropertyValue("--v-body-scroll-y")),x=h.style.scrollBehavior;h.style.scrollBehavior="auto",h.style.removeProperty("--v-body-scroll-x"),h.style.removeProperty("--v-body-scroll-y"),h.style.removeProperty("--v-scrollbar-offset"),h.classList.remove("v-overlay-scroll-blocked"),h.scrollLeft=-p,h.scrollTop=-_,h.style.scrollBehavior=x}),l&&e.root.value.classList.remove("v-overlay--scroll-blocked")})}function Toe(e,t,n){let i=!1,r=-1,a=-1;function l(h){_oe(()=>{const s=performance.now();e.updateLocation.value?.(h),i=(performance.now()-s)/(1e3/60)>2})}a=(typeof requestIdleCallback>"u"?h=>h():requestIdleCallback)(()=>{n.run(()=>{l$(PP(e.target.value,e.contentEl.value),h=>{i?(cancelAnimationFrame(r),r=requestAnimationFrame(()=>{r=requestAnimationFrame(()=>{l(h)})})):l(h)})})}),so(()=>{typeof cancelIdleCallback<"u"&&cancelIdleCallback(a),cancelAnimationFrame(r)})}function PP(e,t){return Array.isArray(e)?document.elementsFromPoint(...e).find(n=>!t?.contains(n)):e??t}function l$(e,t){const n=[document,...M1(e)];n.forEach(i=>{i.addEventListener("scroll",t,{passive:!0})}),so(()=>{n.forEach(i=>{i.removeEventListener("scroll",t)})})}const Kk=Symbol.for("vuetify:v-menu"),MP=lt({closeDelay:[Number,String],openDelay:[Number,String]},"delay");function DP(e,t){let n=()=>{};function i(l,h){n?.();const s=Math.max(h?.minDelay??0,Number(l?e.openDelay:e.closeDelay));return new Promise(p=>{n=une(s,()=>{t?.(l),p(l)})})}function r(){return i(!0)}function a(l){return i(!1,l)}return{clearDelay:n,runOpenDelay:r,runCloseDelay:a}}const Soe=lt({target:[String,Object],activator:[String,Object],activatorProps:{type:Object,default:()=>({})},openOnClick:{type:Boolean,default:void 0},openOnHover:Boolean,openOnFocus:{type:Boolean,default:void 0},closeOnContentClick:Boolean,...MP()},"VOverlay-activator");function Eoe(e,t){let{isActive:n,isTop:i,contentEl:r}=t;const a=xs("useActivator"),l=tt();let h=!1,s=!1,p=!0;const _=fe(()=>e.openOnFocus||e.openOnFocus==null&&e.openOnHover),x=fe(()=>e.openOnClick||e.openOnClick==null&&!e.openOnHover&&!_.value),{runOpenDelay:T,runCloseDelay:k}=DP(e,$=>{$===(e.openOnHover&&h||_.value&&s)&&!(e.openOnHover&&n.value&&!i.value)&&(n.value!==$&&(p=!0),n.value=$)}),P=tt(),M={onClick:$=>{$.stopPropagation(),l.value=$.currentTarget||$.target,n.value||(P.value=[$.clientX,$.clientY]),n.value=!n.value},onMouseenter:$=>{h=!0,l.value=$.currentTarget||$.target,T()},onMouseleave:$=>{h=!1,k()},onFocus:$=>{r_($.target,":focus-visible")!==!1&&(s=!0,$.stopPropagation(),l.value=$.currentTarget||$.target,T())},onBlur:$=>{s=!1,$.stopPropagation(),k({minDelay:1})}},R=fe(()=>{const $={};return x.value&&($.onClick=M.onClick),e.openOnHover&&($.onMouseenter=M.onMouseenter,$.onMouseleave=M.onMouseleave),_.value&&($.onFocus=M.onFocus,$.onBlur=M.onBlur),$}),F=fe(()=>{const $={};if(e.openOnHover&&($.onMouseenter=()=>{h=!0,T()},$.onMouseleave=()=>{h=!1,k()}),_.value&&($.onFocusin=()=>{s=!0,T()},$.onFocusout=()=>{s=!1,k({minDelay:1})}),e.closeOnContentClick){const W=wi(Kk,null);$.onClick=()=>{n.value=!1,W?.closeParents()}}return $}),B=fe(()=>{const $={};return e.openOnHover&&($.onMouseenter=()=>{p&&(h=!0,p=!1,T())},$.onMouseleave=()=>{h=!1,k()}),$});qt(i,$=>{$&&(e.openOnHover&&!h&&(!_.value||!s)||_.value&&!s&&(!e.openOnHover||!h))&&!r.value?.contains(document.activeElement)&&(n.value=!1)}),qt(n,$=>{$||setTimeout(()=>{P.value=void 0})},{flush:"post"});const H=I1();Ur(()=>{H.value&&Hn(()=>{l.value=H.el})});const G=I1(),ee=fe(()=>e.target==="cursor"&&P.value?P.value:G.value?G.el:c$(e.target,a)||l.value),ie=fe(()=>Array.isArray(ee.value)?void 0:ee.value);let J;return qt(()=>!!e.activator,$=>{$&&Gi?(J=zv(),J.run(()=>{Coe(e,a,{activatorEl:l,activatorEvents:R})})):J&&J.stop()},{flush:"post",immediate:!0}),so(()=>{J?.stop()}),{activatorEl:l,activatorRef:H,target:ee,targetEl:ie,targetRef:G,activatorEvents:R,contentEvents:F,scrimEvents:B}}function Coe(e,t,n){let{activatorEl:i,activatorEvents:r}=n;qt(()=>e.activator,(s,p)=>{if(p&&s!==p){const _=h(p);_&&l(_)}s&&Hn(()=>a())},{immediate:!0}),qt(()=>e.activatorProps,()=>{a()}),so(()=>{l()});function a(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:h(),p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e.activatorProps;s&&vne(s,It(r.value,p))}function l(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:h(),p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e.activatorProps;s&&_ne(s,It(r.value,p))}function h(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:e.activator;const p=c$(s,t);return i.value=p?.nodeType===Node.ELEMENT_NODE?p:void 0,i.value}}function c$(e,t){if(!e)return;let n;if(e==="parent"){let i=t?.proxy?.$el?.parentNode;for(;i?.hasAttribute("data-no-activator");)i=i.parentNode;n=i}else typeof e=="string"?n=document.querySelector(e):"$el"in e?n=e.$el:n=e;return n}function u$(){if(!Gi)return Zt(!1);const{ssr:e}=Vl();if(e){const t=Zt(!1);return Kr(()=>{t.value=!0}),t}else return Zt(!0)}const LP=lt({eager:Boolean},"lazy");function RP(e,t){const n=Zt(!1),i=Ne(()=>n.value||e.eager||t.value);qt(t,()=>n.value=!0);function r(){e.eager||(n.value=!1)}return{isBooted:n,hasContent:i,onAfterLeave:r}}function fg(){const t=xs("useScopeId").vnode.scopeId;return{scopeId:t?{[t]:""}:void 0}}const P3=Symbol.for("vuetify:stack"),Ay=io([]);function koe(e,t,n){const i=xs("useStack"),r=!n,a=wi(P3,void 0),l=io({activeChildren:new Set});Dr(P3,l);const h=Zt(Number(Ua(t)));aa(e,()=>{const _=Ay.at(-1)?.[1];h.value=_?_+10:Number(Ua(t)),r&&Ay.push([i.uid,h.value]),a?.activeChildren.add(i.uid),so(()=>{if(r){const x=$n(Ay).findIndex(T=>T[0]===i.uid);Ay.splice(x,1)}a?.activeChildren.delete(i.uid)})});const s=Zt(!0);r&&Ur(()=>{const _=Ay.at(-1)?.[0]===i.uid;setTimeout(()=>s.value=_)});const p=Ne(()=>!l.activeChildren.size);return{globalTop:Fp(s),localTop:p,stackStyles:Ne(()=>({zIndex:h.value}))}}function Ioe(e){return{teleportTarget:fe(()=>{const n=e();if(n===!0||!Gi)return;const i=n===!1?document.body:typeof n=="string"?document.querySelector(n):n;if(i==null)return;let r=[...i.children].find(a=>a.matches(".v-overlay-container"));return r||(r=document.createElement("div"),r.className="v-overlay-container",i.appendChild(r)),r})}}function Aoe(){return!0}function d$(e,t,n){if(!e||h$(e,n)===!1)return!1;const i=O6(t);if(typeof ShadowRoot<"u"&&i instanceof ShadowRoot&&i.host===e.target)return!1;const r=(typeof n.value=="object"&&n.value.include||(()=>[]))();return r.push(t),!r.some(a=>a?.contains(e.target))}function h$(e,t){return(typeof t.value=="object"&&t.value.closeConditional||Aoe)(e)}function Poe(e,t,n){const i=typeof n.value=="function"?n.value:n.value.handler;e.shadowTarget=e.target,t._clickOutside.lastMousedownWasOutside&&d$(e,t,n)&&setTimeout(()=>{h$(e,n)&&i&&i(e)},0)}function M3(e,t){const n=O6(e);t(document),typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&t(n)}const Xk={mounted(e,t){const n=r=>Poe(r,e,t),i=r=>{e._clickOutside.lastMousedownWasOutside=d$(r,e,t)};M3(e,r=>{r.addEventListener("click",n,!0),r.addEventListener("mousedown",i,!0)}),e._clickOutside||(e._clickOutside={lastMousedownWasOutside:!1}),e._clickOutside[t.instance.$.uid]={onClick:n,onMousedown:i}},beforeUnmount(e,t){e._clickOutside&&(M3(e,n=>{if(!n||!e._clickOutside?.[t.instance.$.uid])return;const{onClick:i,onMousedown:r}=e._clickOutside[t.instance.$.uid];n.removeEventListener("click",i,!0),n.removeEventListener("mousedown",r,!0)}),delete e._clickOutside[t.instance.$.uid])}};function Moe(e){const{modelValue:t,color:n,...i}=e;return se(od,{name:"fade-transition",appear:!0},{default:()=>[e.modelValue&&z("div",It({class:["v-overlay__scrim",e.color.backgroundColorClasses.value],style:e.color.backgroundColorStyles.value},i),null)]})}const U0=lt({absolute:Boolean,attach:[Boolean,String,Object],closeOnBack:{type:Boolean,default:!0},contained:Boolean,contentClass:null,contentProps:null,disabled:Boolean,opacity:[Number,String],noClickAnimation:Boolean,modelValue:Boolean,persistent:Boolean,scrim:{type:[Boolean,String],default:!0},zIndex:{type:[Number,String],default:2e3},...Soe(),...wn(),...Os(),...LP(),...foe(),...yoe(),...Ai(),...Mh()},"VOverlay"),fd=At()({name:"VOverlay",directives:{vClickOutside:Xk},inheritAttrs:!1,props:{_disableGlobalStack:Boolean,...U0()},emits:{"click:outside":e=>!0,"update:modelValue":e=>!0,keydown:e=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(e,t){let{slots:n,attrs:i,emit:r}=t;const a=xs("VOverlay"),l=tt(),h=tt(),s=tt(),p=Pn(e,"modelValue"),_=fe({get:()=>p.value,set:Ye=>{Ye&&e.disabled||(p.value=Ye)}}),{themeClasses:x}=Zi(e),{rtlClasses:T,isRtl:k}=Gs(),{hasContent:P,onAfterLeave:M}=RP(e,_),R=nr(()=>typeof e.scrim=="string"?e.scrim:null),{globalTop:F,localTop:B,stackStyles:H}=koe(_,()=>e.zIndex,e._disableGlobalStack),{activatorEl:G,activatorRef:ee,target:ie,targetEl:J,targetRef:$,activatorEvents:W,contentEvents:X,scrimEvents:re}=Eoe(e,{isActive:_,isTop:B,contentEl:s}),{teleportTarget:Y}=Ioe(()=>{const Ye=e.attach||e.contained;if(Ye)return Ye;const ut=G?.value?.getRootNode()||a.proxy?.$el?.getRootNode();return ut instanceof ShadowRoot?ut:!1}),{dimensionStyles:Z}=Vs(e),ge=u$(),{scopeId:be}=fg();qt(()=>e.disabled,Ye=>{Ye&&(_.value=!1)});const{contentStyles:Be,updateLocation:nt}=moe(e,{isRtl:k,contentEl:s,target:ie,isActive:_});boe(e,{root:l,contentEl:s,targetEl:J,target:ie,isActive:_,updateLocation:nt});function We(Ye){r("click:outside",Ye),e.persistent?vt():_.value=!1}function Le(Ye){return _.value&&F.value&&(!e.scrim||Ye.target===h.value||Ye instanceof MouseEvent&&Ye.shadowTarget===h.value)}Gi&&qt(_,Ye=>{Ye?window.addEventListener("keydown",Ze):window.removeEventListener("keydown",Ze)},{immediate:!0}),Nr(()=>{Gi&&window.removeEventListener("keydown",Ze)});function Ze(Ye){Ye.key==="Escape"&&F.value&&(s.value?.contains(document.activeElement)||r("keydown",Ye),e.persistent?vt():(_.value=!1,s.value?.contains(document.activeElement)&&G.value?.focus()))}function Ee(Ye){Ye.key==="Escape"&&!F.value||r("keydown",Ye)}const Je=iU();aa(()=>e.closeOnBack,()=>{Ure(Je,Ye=>{F.value&&_.value?(Ye(!1),e.persistent?vt():_.value=!1):Ye()})});const it=tt();qt(()=>_.value&&(e.absolute||e.contained)&&Y.value==null,Ye=>{if(Ye){const ut=OT(l.value);ut&&ut!==document.scrollingElement&&(it.value=ut.scrollTop)}});function vt(){e.noClickAnimation||s.value&&rh(s.value,[{transformOrigin:"center"},{transform:"scale(1.03)"},{transformOrigin:"center"}],{duration:150,easing:$b})}function mt(){r("afterEnter")}function ot(){M(),r("afterLeave")}return Vt(()=>z(un,null,[n.activator?.({isActive:_.value,targetRef:$,props:It({ref:ee},W.value,e.activatorProps)}),ge.value&&P.value&&se(a7,{disabled:!Y.value,to:Y.value},{default:()=>[z("div",It({class:["v-overlay",{"v-overlay--absolute":e.absolute||e.contained,"v-overlay--active":_.value,"v-overlay--contained":e.contained},x.value,T.value,e.class],style:[H.value,{"--v-overlay-opacity":e.opacity,top:pn(it.value)},e.style],ref:l,onKeydown:Ee},be,i),[se(Moe,It({color:R,modelValue:_.value&&!!e.scrim,ref:h},re.value),null),se(Fa,{appear:!0,persisted:!0,transition:e.transition,target:ie.value,onAfterEnter:mt,onAfterLeave:ot},{default:()=>[Ii(z("div",It({ref:s,class:["v-overlay__content",e.contentClass],style:[Z.value,Be.value]},X.value,e.contentProps),[n.default?.({isActive:_})]),[[_u,_.value],[Xk,{handler:We,closeConditional:Le,include:()=>[G.value]}]])]})])]})])),{activatorEl:G,scrimEl:h,target:ie,animateClick:vt,contentEl:s,rootEl:l,globalTop:F,localTop:B,updateLocation:nt}}}),f$=lt({id:String,submenu:Boolean,disableInitialFocus:Boolean,...dr(U0({closeDelay:250,closeOnContentClick:!0,locationStrategy:"connected",location:void 0,openDelay:300,scrim:!1,scrollStrategy:"reposition",transition:{component:UT}}),["absolute"])},"VMenu"),u_=At()({name:"VMenu",props:f$(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const i=Pn(e,"modelValue"),{scopeId:r}=fg(),{isRtl:a}=Gs(),l=ua(),h=Ne(()=>e.id||`v-menu-${l}`),s=tt(),p=wi(Kk,null),_=Zt(new Set);Dr(Kk,{register(){_.value.add(l)},unregister(){_.value.delete(l)},closeParents(H){setTimeout(()=>{!_.value.size&&!e.persistent&&(H==null||s.value?.contentEl&&!dne(H,s.value.contentEl))&&(i.value=!1,p?.closeParents())},40)}}),Nr(()=>{p?.unregister(),document.removeEventListener("focusin",P)}),sT(()=>i.value=!1);let x=!1,T=-1;async function k(){x=!0,T=window.setTimeout(()=>{x=!1},100)}async function P(H){const G=H.relatedTarget,ee=H.target;await Hn(),i.value&&G!==ee&&s.value?.rootEl&&s.value?.contentEl&&s.value?.localTop&&![document,s.value.rootEl].includes(ee)&&!s.value.rootEl.contains(ee)&&(x?!e.openOnHover&&!s.value.activatorEl?.contains(ee)&&(i.value=!1):(i_(s.value.contentEl)[0]?.focus(),document.removeEventListener("pointerdown",k)))}qt(i,H=>{H?(p?.register(),Gi&&!e.disableInitialFocus&&(document.addEventListener("pointerdown",k),document.addEventListener("focusin",P,{once:!0}))):(p?.unregister(),Gi&&(clearTimeout(T),document.removeEventListener("pointerdown",k),document.removeEventListener("focusin",P)))},{immediate:!0});function M(H){p?.closeParents(H)}function R(H){if(!e.disabled)if(H.key==="Tab"||H.key==="Enter"&&!e.closeOnContentClick){if(H.key==="Enter"&&(H.target instanceof HTMLTextAreaElement||H.target instanceof HTMLInputElement&&H.target.closest("form")))return;H.key==="Enter"&&H.preventDefault(),w6(i_(s.value?.contentEl,!1),H.shiftKey?"prev":"next",ee=>ee.tabIndex>=0)||(i.value=!1,s.value?.activatorEl?.focus())}else e.submenu&&H.key===(a.value?"ArrowRight":"ArrowLeft")&&(i.value=!1,s.value?.activatorEl?.focus())}function F(H){if(e.disabled)return;const G=s.value?.contentEl;G&&i.value?H.key==="ArrowDown"?(H.preventDefault(),H.stopImmediatePropagation(),Lp(G,"next")):H.key==="ArrowUp"?(H.preventDefault(),H.stopImmediatePropagation(),Lp(G,"prev")):e.submenu&&(H.key===(a.value?"ArrowRight":"ArrowLeft")?i.value=!1:H.key===(a.value?"ArrowLeft":"ArrowRight")&&(H.preventDefault(),Lp(G,"first"))):(e.submenu?H.key===(a.value?"ArrowLeft":"ArrowRight"):["ArrowDown","ArrowUp"].includes(H.key))&&(i.value=!0,H.preventDefault(),setTimeout(()=>setTimeout(()=>F(H))))}const B=fe(()=>It({"aria-haspopup":"menu","aria-expanded":String(i.value),"aria-controls":h.value,"aria-owns":h.value,onKeydown:F},e.activatorProps));return Vt(()=>{const H=fd.filterProps(e);return se(fd,It({ref:s,id:h.value,class:["v-menu",e.class],style:e.style},H,{modelValue:i.value,"onUpdate:modelValue":G=>i.value=G,absolute:!0,activatorProps:B.value,location:e.location??(e.submenu?"end":"bottom"),"onClick:outside":M,onKeydown:R},r),{activator:n.activator,default:function(){for(var G=arguments.length,ee=new Array(G),ie=0;ie<G;ie++)ee[ie]=arguments[ie];return se(ui,{root:"VMenu"},{default:()=>[n.default?.(...ee)]})}})}),xo({id:h,openChildren:_},s)}}),Doe=lt({active:Boolean,disabled:Boolean,max:[Number,String],value:{type:[Number,String],default:0},...wn(),...Mh({transition:{component:Bv}})},"VCounter"),jT=At()({name:"VCounter",functional:!0,props:Doe(),setup(e,t){let{slots:n}=t;const i=Ne(()=>e.max?`${e.value} / ${e.max}`:String(e.value));return Vt(()=>se(Fa,{transition:e.transition},{default:()=>[Ii(z("div",{class:xt(["v-counter",{"text-error":e.max&&!e.disabled&&parseFloat(e.value)>parseFloat(e.max)},e.class]),style:Yt(e.style)},[n.default?n.default({counter:i.value,max:e.max,value:e.value}):i.value]),[[_u,e.active]])]})),{}}}),Loe=lt({floating:Boolean,...wn()},"VFieldLabel"),Hy=At()({name:"VFieldLabel",props:Loe(),setup(e,t){let{slots:n}=t;return Vt(()=>se(I_,{class:xt(["v-field-label",{"v-field-label--floating":e.floating},e.class]),style:Yt(e.style)},n)),{}}}),Roe=["underlined","outlined","filled","solo","solo-inverted","solo-filled","plain"],$0=lt({appendInnerIcon:kn,bgColor:String,clearable:Boolean,clearIcon:{type:kn,default:"$clear"},active:Boolean,centerAffix:{type:Boolean,default:void 0},color:String,baseColor:String,details:Boolean,dirty:Boolean,disabled:{type:Boolean,default:null},glow:Boolean,error:Boolean,flat:Boolean,iconColor:[Boolean,String],label:String,persistentClear:Boolean,prependInnerIcon:kn,reverse:Boolean,singleLine:Boolean,variant:{type:String,default:"filled",validator:e=>Roe.includes(e)},"onClick:clear":Fo(),"onClick:appendInner":Fo(),"onClick:prependInner":Fo(),...wn(),...zT(),...$r(),...Ai()},"VField"),lm=At()({name:"VField",inheritAttrs:!1,props:{id:String,...N0(),...$0()},emits:{"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{attrs:n,emit:i,slots:r}=t;const{themeClasses:a}=Zi(e),{loaderClasses:l}=O0(e),{focusClasses:h,isFocused:s,focus:p,blur:_}=Dh(e),{InputIcon:x}=BU(e),{roundedClasses:T}=ts(e),{rtlClasses:k}=Gs(),P=Ne(()=>e.dirty||e.active),M=Ne(()=>!!(e.label||r.label)),R=Ne(()=>!e.singleLine&&M.value),F=ua(),B=fe(()=>e.id||`input-${F}`),H=Ne(()=>e.details?`${B.value}-messages`:void 0),G=tt(),ee=tt(),ie=tt(),J=fe(()=>["plain","underlined"].includes(e.variant)),$=fe(()=>e.error||e.disabled?void 0:P.value&&s.value?e.color:e.baseColor),W=fe(()=>{if(!(!e.iconColor||e.glow&&!s.value))return e.iconColor===!0?$.value:e.iconColor}),{backgroundColorClasses:X,backgroundColorStyles:re}=nr(()=>e.bgColor),{textColorClasses:Y,textColorStyles:Z}=Uo($);qt(P,Be=>{if(R.value&&!ud()){const nt=G.value.$el,We=ee.value.$el;requestAnimationFrame(()=>{const Le=oP(nt),Ze=We.getBoundingClientRect(),Ee=Ze.x-Le.x,Je=Ze.y-Le.y-(Le.height/2-Ze.height/2),it=Ze.width/.75,vt=Math.abs(it-Le.width)>1?{maxWidth:pn(it)}:void 0,mt=getComputedStyle(nt),ot=getComputedStyle(We),Ye=parseFloat(mt.transitionDuration)*1e3||150,ut=parseFloat(ot.getPropertyValue("--v-field-label-scale")),Ke=ot.getPropertyValue("color");nt.style.visibility="visible",We.style.visibility="hidden",rh(nt,{transform:`translate(${Ee}px, ${Je}px) scale(${ut})`,color:Ke,...vt},{duration:Ye,easing:$b,direction:Be?"normal":"reverse"}).finished.then(()=>{nt.style.removeProperty("visibility"),We.style.removeProperty("visibility")})})}},{flush:"post"});const ge=fe(()=>({isActive:P,isFocused:s,controlRef:ie,blur:_,focus:p}));function be(Be){Be.target!==document.activeElement&&Be.preventDefault()}return Vt(()=>{const Be=e.variant==="outlined",nt=!!(r["prepend-inner"]||e.prependInnerIcon),We=!!(e.clearable||r.clear)&&!e.disabled,Le=!!(r["append-inner"]||e.appendInnerIcon||We),Ze=()=>r.label?r.label({...ge.value,label:e.label,props:{for:B.value}}):e.label;return z("div",It({class:["v-field",{"v-field--active":P.value,"v-field--appended":Le,"v-field--center-affix":e.centerAffix??!J.value,"v-field--disabled":e.disabled,"v-field--dirty":e.dirty,"v-field--error":e.error,"v-field--glow":e.glow,"v-field--flat":e.flat,"v-field--has-background":!!e.bgColor,"v-field--persistent-clear":e.persistentClear,"v-field--prepended":nt,"v-field--reverse":e.reverse,"v-field--single-line":e.singleLine,"v-field--no-label":!Ze(),[`v-field--variant-${e.variant}`]:!0},a.value,X.value,h.value,l.value,T.value,k.value,e.class],style:[re.value,e.style],onClick:be},n),[z("div",{class:"v-field__overlay"},null),se(V0,{name:"v-field",active:!!e.loading,color:e.error?"error":typeof e.loading=="string"?e.loading:e.color},{default:r.loader}),nt&&z("div",{key:"prepend",class:"v-field__prepend-inner"},[e.prependInnerIcon&&se(x,{key:"prepend-icon",name:"prependInner",color:W.value},null),r["prepend-inner"]?.(ge.value)]),z("div",{class:"v-field__field","data-no-activator":""},[["filled","solo","solo-inverted","solo-filled"].includes(e.variant)&&R.value&&se(Hy,{key:"floating-label",ref:ee,class:xt([Y.value]),floating:!0,for:B.value,"aria-hidden":!P.value,style:Yt(Z.value)},{default:()=>[Ze()]}),M.value&&se(Hy,{key:"label",ref:G,for:B.value},{default:()=>[Ze()]}),r.default?.({...ge.value,props:{id:B.value,class:"v-field__input","aria-describedby":H.value},focus:p,blur:_})??z("div",{id:B.value,class:"v-field__input","aria-describedby":H.value},null)]),We&&se(bP,{key:"clear"},{default:()=>[Ii(z("div",{class:"v-field__clearable",onMousedown:Ee=>{Ee.preventDefault(),Ee.stopPropagation()}},[se(ui,{defaults:{VIcon:{icon:e.clearIcon}}},{default:()=>[r.clear?r.clear({...ge.value,props:{onFocus:p,onBlur:_,onClick:e["onClick:clear"],tabindex:-1}}):se(x,{name:"clear",onFocus:p,onBlur:_,tabindex:-1},null)]})]),[[_u,e.dirty]])]}),Le&&z("div",{key:"append",class:"v-field__append-inner"},[r["append-inner"]?.(ge.value),e.appendInnerIcon&&se(x,{key:"append-icon",name:"appendInner",color:W.value},null)]),z("div",{class:xt(["v-field__outline",Y.value]),style:Yt(Z.value)},[Be&&z(un,null,[z("div",{class:"v-field__outline__start"},null),R.value&&z("div",{class:"v-field__outline__notch"},[se(Hy,{ref:ee,floating:!0,for:B.value,"aria-hidden":!P.value},{default:()=>[Ze()]})]),z("div",{class:"v-field__outline__end"},null)]),J.value&&R.value&&se(Hy,{ref:ee,floating:!0,for:B.value,"aria-hidden":!P.value},{default:()=>[Ze()]})])])}),{controlRef:ie,fieldIconColor:W}}}),m$=lt({autocomplete:String},"autocomplete");function p$(e){const t=ua(),n=Zt(0),i=Ne(()=>e.autocomplete==="suppress"),r=Ne(()=>i.value?`${e.name}-${t}-${n.value}`:e.name),a=Ne(()=>i.value?"off":e.autocomplete);return{isSuppressing:i,fieldAutocomplete:a,fieldName:r,update:()=>n.value=new Date().getTime()}}function g$(e){function t(n,i){!e.autofocus||!n||i[0].target?.focus?.()}return{onIntersect:t}}const Ooe=["color","file","time","date","datetime-local","week","month"],j0=lt({autofocus:Boolean,counter:[Boolean,Number,String],counterValue:[Number,Function],prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,suffix:String,role:String,type:{type:String,default:"text"},modelModifiers:Object,...m$(),...Lh(),...$0()},"VTextField"),Th=At()({name:"VTextField",directives:{vIntersect:gu},inheritAttrs:!1,props:j0(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{attrs:n,emit:i,slots:r}=t;const a=Pn(e,"modelValue"),{isFocused:l,focus:h,blur:s}=Dh(e),{onIntersect:p}=g$(e),_=fe(()=>typeof e.counterValue=="function"?e.counterValue(a.value):typeof e.counterValue=="number"?e.counterValue:(a.value??"").toString().length),x=fe(()=>{if(n.maxlength)return n.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter}),T=fe(()=>["plain","underlined"].includes(e.variant)),k=tt(),P=tt(),M=tt(),R=p$(e),F=fe(()=>Ooe.includes(e.type)||e.persistentPlaceholder||l.value||e.active);function B(){R.isSuppressing.value&&R.update(),l.value||h(),Hn(()=>{M.value!==document.activeElement&&M.value?.focus()})}function H(J){i("mousedown:control",J),J.target!==M.value&&(B(),J.preventDefault())}function G(J){i("click:control",J)}function ee(J,$){J.stopPropagation(),B(),Hn(()=>{$(),A0(e["onClick:clear"],J)})}function ie(J){const $=J.target;if(a.value=$.value,e.modelModifiers?.trim&&["text","search","password","tel","url"].includes(e.type)){const W=[$.selectionStart,$.selectionEnd];Hn(()=>{$.selectionStart=W[0],$.selectionEnd=W[1]})}}return Vt(()=>{const J=!!(r.counter||e.counter!==!1&&e.counter!=null),$=!!(J||r.details),[W,X]=pm(n),{modelValue:re,...Y}=ca.filterProps(e),Z=lm.filterProps(e);return se(ca,It({ref:k,modelValue:a.value,"onUpdate:modelValue":ge=>a.value=ge,class:["v-text-field",{"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-input--plain-underlined":T.value},e.class],style:e.style},W,Y,{centerAffix:!T.value,focused:l.value}),{...r,default:ge=>{let{id:be,isDisabled:Be,isDirty:nt,isReadonly:We,isValid:Le,hasDetails:Ze,reset:Ee}=ge;return se(lm,It({ref:P,onMousedown:H,onClick:G,"onClick:clear":Je=>ee(Je,Ee),role:e.role},dr(Z,["onClick:clear"]),{id:be.value,active:F.value||nt.value,dirty:nt.value||e.dirty,disabled:Be.value,focused:l.value,details:Ze.value,error:Le.value===!1}),{...r,default:Je=>{let{props:{class:it,...vt},controlRef:mt}=Je;const ot=Ii(z("input",It({ref:Ye=>M.value=mt.value=Ye,value:a.value,onInput:ie,autofocus:e.autofocus,readonly:We.value,disabled:Be.value,name:R.fieldName.value,autocomplete:R.fieldAutocomplete.value,placeholder:e.placeholder,size:1,role:e.role,type:e.type,onFocus:h,onBlur:s},vt,X),null),[[gu,{handler:p},null,{once:!0}]]);return z(un,null,[e.prefix&&z("span",{class:"v-text-field__prefix"},[z("span",{class:"v-text-field__prefix__text"},[e.prefix])]),r.default?z("div",{class:xt(it),"data-no-activator":""},[r.default(),ot]):sd(ot,{class:it}),e.suffix&&z("span",{class:"v-text-field__suffix"},[z("span",{class:"v-text-field__suffix__text"},[e.suffix])])])}})},details:$?ge=>z(un,null,[r.details?.(ge),J&&z(un,null,[z("span",null,null),se(jT,{active:e.persistentCounter||l.value,value:_.value,max:x.value,disabled:e.disabled},r.counter)])]):void 0})}),xo({},k,P,M)}}),Voe=lt({renderless:Boolean,...wn()},"VVirtualScrollItem"),v$=At()({name:"VVirtualScrollItem",inheritAttrs:!1,props:Voe(),emits:{"update:height":e=>!0},setup(e,t){let{attrs:n,emit:i,slots:r}=t;const{resizeRef:a,contentRect:l}=zc(void 0,"border");qt(()=>l.value?.height,h=>{h!=null&&i("update:height",h)}),Vt(()=>e.renderless?z(un,null,[r.default?.({itemRef:a})]):z("div",It({ref:a,class:["v-virtual-scroll__item",e.class],style:e.style},n),[r.default?.()]))}}),Boe=-1,Foe=1,fC=100,_$=lt({itemHeight:{type:[Number,String],default:null},itemKey:{type:[String,Array,Function],default:null},height:[Number,String]},"virtual");function y$(e,t){const n=Vl(),i=Zt(0);Ur(()=>{i.value=parseFloat(e.itemHeight||0)});const r=Zt(0),a=Zt(Math.ceil((parseInt(e.height)||n.height.value)/(i.value||16))||1),l=Zt(0),h=Zt(0),s=tt(),p=tt();let _=0;const{resizeRef:x,contentRect:T}=zc();Ur(()=>{x.value=s.value});const k=fe(()=>s.value===document.documentElement?n.height.value:T.value?.height||parseInt(e.height)||0),P=fe(()=>!!(s.value&&p.value&&k.value&&i.value));let M=Array.from({length:t.value.length}),R=Array.from({length:t.value.length});const F=Zt(0);let B=-1;function H(Ze){return M[Ze]||i.value}const G=_6(()=>{const Ze=performance.now();R[0]=0;const Ee=t.value.length;for(let Je=1;Je<=Ee;Je++)R[Je]=(R[Je-1]||0)+H(Je-1);F.value=Math.max(F.value,performance.now()-Ze)},F),ee=qt(P,Ze=>{Ze&&(ee(),_=p.value.offsetTop,G.immediate(),Be(),~B&&Hn(()=>{Gi&&window.requestAnimationFrame(()=>{We(B),B=-1})}))});so(()=>{G.clear()});function ie(Ze,Ee){const Je=M[Ze],it=i.value;i.value=it?Math.min(i.value,Ee):Ee,(Je!==Ee||it!==i.value)&&(M[Ze]=Ee,G())}function J(Ze){Ze=Er(Ze,0,t.value.length);const Ee=Math.floor(Ze),Je=Ze%1,it=Ee+1,vt=R[Ee]||0,mt=R[it]||vt;return vt+(mt-vt)*Je}function $(Ze){return zoe(R,Ze)}let W=0,X=0,re=0;qt(k,(Ze,Ee)=>{Ee&&(Be(),Ze<Ee&&requestAnimationFrame(()=>{X=0,Be()}))});let Y=-1;function Z(){if(!s.value||!p.value)return;const Ze=s.value.scrollTop,Ee=performance.now();Ee-re>500?(X=Math.sign(Ze-W),_=p.value.offsetTop):X=Ze-W,W=Ze,re=Ee,window.clearTimeout(Y),Y=window.setTimeout(ge,500),Be()}function ge(){!s.value||!p.value||(X=0,re=0,window.clearTimeout(Y),Be())}let be=-1;function Be(){cancelAnimationFrame(be),be=requestAnimationFrame(nt)}function nt(){if(!s.value||!k.value||!i.value)return;const Ze=W-_,Ee=Math.sign(X),Je=Math.max(0,Ze-fC),it=Er($(Je),0,t.value.length),vt=Ze+k.value+fC,mt=Er($(vt)+1,it+1,t.value.length);if((Ee!==Boe||it<r.value)&&(Ee!==Foe||mt>a.value)){const ot=J(r.value)-J(it),Ye=J(mt)-J(a.value);Math.max(ot,Ye)>fC?(r.value=it,a.value=mt):(it<=0&&(r.value=it),mt>=t.value.length&&(a.value=mt))}l.value=J(r.value),h.value=J(t.value.length)-J(a.value)}function We(Ze){const Ee=J(Ze);!s.value||Ze&&!Ee?B=Ze:s.value.scrollTop=Ee}const Le=fe(()=>t.value.slice(r.value,a.value).map((Ze,Ee)=>{const Je=Ee+r.value;return{raw:Ze,index:Je,key:Ms(Ze,e.itemKey,Je)}}));return qt(t,()=>{M=Array.from({length:t.value.length}),R=Array.from({length:t.value.length}),G.immediate(),Be()},{deep:1}),{calculateVisibleItems:Be,containerRef:s,markerRef:p,computedItems:Le,paddingTop:l,paddingBottom:h,scrollToIndex:We,handleScroll:Z,handleScrollend:ge,handleItemResize:ie}}function zoe(e,t){let n=e.length-1,i=0,r=0,a=null,l=-1;if(e[n]<t)return n;for(;i<=n;)if(r=i+n>>1,a=e[r],a>t)n=r-1;else if(a<t)l=r,i=r+1;else return a===t?r:i;return l}const Noe=lt({items:{type:Array,default:()=>[]},renderless:Boolean,..._$(),...wn(),...Os()},"VVirtualScroll"),WT=At()({name:"VVirtualScroll",props:Noe(),setup(e,t){let{slots:n}=t;const i=xs("VVirtualScroll"),{dimensionStyles:r}=Vs(e),{calculateVisibleItems:a,containerRef:l,markerRef:h,handleScroll:s,handleScrollend:p,handleItemResize:_,scrollToIndex:x,paddingTop:T,paddingBottom:k,computedItems:P}=y$(e,Ne(()=>e.items));return aa(()=>e.renderless,()=>{function M(){const F=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)?"addEventListener":"removeEventListener";l.value===document.documentElement?(document[F]("scroll",s,{passive:!0}),document[F]("scrollend",p)):(l.value?.[F]("scroll",s,{passive:!0}),l.value?.[F]("scrollend",p))}Kr(()=>{l.value=OT(i.vnode.el,!0),M(!0)}),so(M)}),Vt(()=>{const M=P.value.map(R=>se(v$,{key:R.key,renderless:e.renderless,"onUpdate:height":F=>_(R.index,F)},{default:F=>n.default?.({item:R.raw,index:R.index,...F})}));return e.renderless?z(un,null,[z("div",{ref:h,class:"v-virtual-scroll__spacer",style:{paddingTop:pn(T.value)}},null),M,z("div",{class:"v-virtual-scroll__spacer",style:{paddingBottom:pn(k.value)}},null)]):z("div",{ref:l,class:xt(["v-virtual-scroll",e.class]),onScrollPassive:s,onScrollend:p,style:Yt([r.value,e.style])},[z("div",{ref:h,class:"v-virtual-scroll__container",style:{paddingTop:pn(T.value),paddingBottom:pn(k.value)}},[M])])}),{calculateVisibleItems:a,scrollToIndex:x}}});function OP(e,t){const n=Zt(!1);let i;function r(h){cancelAnimationFrame(i),n.value=!0,i=requestAnimationFrame(()=>{i=requestAnimationFrame(()=>{n.value=!1})})}async function a(){await new Promise(h=>requestAnimationFrame(h)),await new Promise(h=>requestAnimationFrame(h)),await new Promise(h=>requestAnimationFrame(h)),await new Promise(h=>{if(n.value){const s=qt(n,()=>{s(),h()})}else h()})}async function l(h){if(h.key==="Tab"&&t.value?.focus(),!["PageDown","PageUp","Home","End"].includes(h.key))return;const s=e.value?.$el;if(!s)return;(h.key==="Home"||h.key==="End")&&s.scrollTo({top:h.key==="Home"?0:s.scrollHeight,behavior:"smooth"}),await a();const p=s.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(h.key==="PageDown"||h.key==="Home"){const _=s.getBoundingClientRect().top;for(const x of p)if(x.getBoundingClientRect().top>=_){x.focus();break}}else{const _=s.getBoundingClientRect().bottom;for(const x of[...p].reverse())if(x.getBoundingClientRect().bottom<=_){x.focus();break}}}return{onScrollPassive:r,onKeydown:l}}const Uoe=lt({closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"}},"autocomplete");function VP(e,t){const{t:n}=hr(),i=ua(),r=fe(()=>`menu-${i}`),a=Ne(()=>Ua(t)),l=Ne(()=>r.value),h=Ne(()=>n(Ua(t)?e.closeText:e.openText));return{menuId:r,ariaExpanded:a,ariaControls:l,ariaLabel:h}}const BP=lt({chips:Boolean,closableChips:Boolean,eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,listProps:{type:Object},menu:Boolean,menuIcon:{type:kn,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,itemColor:String,noAutoScroll:Boolean,...Uoe(),...t$({itemChildren:!1})},"Select"),$oe=lt({...BP(),...dr(j0({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...Mh({transition:{component:UT}})},"VSelect"),Hf=At()({name:"VSelect",props:$oe(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,t){let{slots:n}=t;const{t:i}=hr(),r=tt(),a=tt(),l=tt(),{items:h,transformIn:s,transformOut:p}=IP(e),_=Pn(e,"modelValue",[],it=>s(it===null?[null]:qr(it)),it=>{const vt=p(it);return e.multiple?vt:vt[0]??null}),x=fe(()=>typeof e.counterValue=="function"?e.counterValue(_.value):typeof e.counterValue=="number"?e.counterValue:_.value.length),T=A_(e),k=fe(()=>_.value.map(it=>it.value)),P=Zt(!1);let M="",R=-1,F;const B=fe(()=>e.hideSelected?h.value.filter(it=>!_.value.some(vt=>(e.valueComparator||_o)(vt,it))):h.value),H=fe(()=>e.hideNoData&&!B.value.length||T.isReadonly.value||T.isDisabled.value),G=Pn(e,"menu"),ee=fe({get:()=>G.value,set:it=>{G.value&&!it&&a.value?.openChildren.size||it&&H.value||(G.value=it)}}),{menuId:ie,ariaExpanded:J,ariaControls:$,ariaLabel:W}=VP(e,ee),X=fe(()=>({...e.menuProps,activatorProps:{...e.menuProps?.activatorProps||{},"aria-haspopup":"listbox"}})),re=tt(),Y=OP(re,r);function Z(it){e.openOnClear&&(ee.value=!0)}function ge(){H.value||(ee.value=!ee.value)}function be(it){s_(it)&&Be(it)}function Be(it){if(!it.key||T.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(it.key)&&it.preventDefault(),["Enter","ArrowDown"," "].includes(it.key)&&(ee.value=!0),["Escape","Tab"].includes(it.key)&&(ee.value=!1),it.key==="Home"?re.value?.focus("first"):it.key==="End"&&re.value?.focus("last");const vt=1e3;if(!s_(it))return;const mt=performance.now();mt-F>vt&&(M="",R=-1),M+=it.key.toLowerCase(),F=mt;const ot=B.value;function Ye(){let ke=ut();return ke||M.at(-1)===M.at(-2)&&(M=M.slice(0,-1),ke=ut(),ke)||(R=-1,ke=ut(),ke)?ke:(M=it.key.toLowerCase(),ut())}function ut(){for(let ke=R+1;ke<ot.length;ke++){const Ae=ot[ke];if(Ae.title.toLowerCase().startsWith(M))return[Ae,ke]}}const Ke=Ye();if(!Ke)return;const[jt,xn]=Ke;R=xn,re.value?.focus(xn),e.multiple||(_.value=[jt])}function nt(it){let vt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!it.props.disabled)if(e.multiple){const mt=_.value.findIndex(Ye=>(e.valueComparator||_o)(Ye.value,it.value)),ot=vt??!~mt;if(~mt){const Ye=ot?[..._.value,it]:[..._.value];Ye.splice(mt,1),_.value=Ye}else ot&&(_.value=[..._.value,it])}else{const mt=vt!==!1;_.value=mt?[it]:[],Hn(()=>{ee.value=!1})}}function We(it){re.value?.$el.contains(it.relatedTarget)||(ee.value=!1)}function Le(){e.eager&&l.value?.calculateVisibleItems()}function Ze(){P.value&&r.value?.focus()}function Ee(it){P.value=!0}function Je(it){if(it==null)_.value=[];else if(r_(r.value,":autofill")||r_(r.value,":-webkit-autofill")){const vt=h.value.find(mt=>mt.title===it);vt&&nt(vt)}else r.value&&(r.value.value="")}return qt(ee,()=>{if(!e.hideSelected&&ee.value&&_.value.length){const it=B.value.findIndex(vt=>_.value.some(mt=>(e.valueComparator||_o)(mt.value,vt.value)));Gi&&!e.noAutoScroll&&window.requestAnimationFrame(()=>{it>=0&&l.value?.scrollToIndex(it)})}}),qt(h,(it,vt)=>{ee.value||P.value&&e.hideNoData&&!vt.length&&it.length&&(ee.value=!0)}),Vt(()=>{const it=!!(e.chips||n.chip),vt=!!(!e.hideNoData||B.value.length||n["prepend-item"]||n["append-item"]||n["no-data"]),mt=_.value.length>0,ot=Th.filterProps(e),Ye=mt||!P.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return se(Th,It({ref:r},ot,{modelValue:_.value.map(ut=>ut.props.value).join(", "),"onUpdate:modelValue":Je,focused:P.value,"onUpdate:focused":ut=>P.value=ut,validationValue:_.externalValue,counterValue:x.value,dirty:mt,class:["v-select",{"v-select--active-menu":ee.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0,"v-select--selected":_.value.length,"v-select--selection-slot":!!n.selection},e.class],style:e.style,inputmode:"none",placeholder:Ye,"onClick:clear":Z,"onMousedown:control":ge,onBlur:We,onKeydown:Be,"aria-expanded":J.value,"aria-controls":$.value,"aria-label":W.value,title:W.value}),{...n,default:()=>z(un,null,[se(u_,It({id:ie.value,ref:a,modelValue:ee.value,"onUpdate:modelValue":ut=>ee.value=ut,activator:"parent",contentClass:"v-select__content",disabled:H.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:Le,onAfterLeave:Ze},X.value),{default:()=>[vt&&se(c_,It({ref:re,selected:k.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:ut=>ut.preventDefault(),onKeydown:be,onFocusin:Ee,tabindex:"-1",selectable:!0,"aria-live":"polite","aria-label":`${e.label}-list`,color:e.itemColor??e.color},Y,e.listProps),{default:()=>[n["prepend-item"]?.(),!B.value.length&&!e.hideNoData&&(n["no-data"]?.()??se(vu,{key:"no-data",title:i(e.noDataText)},null)),se(WT,{ref:l,renderless:!0,items:B.value,itemKey:"value"},{default:ut=>{let{item:Ke,index:jt,itemRef:xn}=ut;const ke=fne(Ke.props),Ae=It(Ke.props,{ref:xn,key:Ke.value,onClick:()=>nt(Ke,null)});return Ke.type==="divider"?n.divider?.({props:Ke.raw,index:jt})??se(za,It(Ke.props,{key:`divider-${jt}`}),null):Ke.type==="subheader"?n.subheader?.({props:Ke.raw,index:jt})??se(P_,It(Ke.props,{key:`subheader-${jt}`}),null):n.item?.({item:Ke,index:jt,props:Ae})??se(vu,It(Ae,{role:"option"}),{prepend:he=>{let{isSelected:et}=he;return z(un,null,[e.multiple&&!e.hideSelected?se(hd,{key:Ke.value,modelValue:et,ripple:!1,tabindex:"-1",onClick:dt=>dt.preventDefault()},null):void 0,ke.prependAvatar&&se(cc,{image:ke.prependAvatar},null),ke.prependIcon&&se(_i,{icon:ke.prependIcon},null)])}})}}),n["append-item"]?.()]})]}),_.value.map((ut,Ke)=>{function jt(he){he.stopPropagation(),he.preventDefault(),nt(ut,!1)}const xn={"onClick:close":jt,onKeydown(he){he.key!=="Enter"&&he.key!==" "||(he.preventDefault(),he.stopPropagation(),jt(he))},onMousedown(he){he.preventDefault(),he.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},ke=it?!!n.chip:!!n.selection,Ae=ke?RT(it?n.chip({item:ut,index:Ke,props:xn}):n.selection({item:ut,index:Ke})):void 0;if(!(ke&&!Ae))return z("div",{key:ut.value,class:"v-select__selection"},[it?n.chip?se(ui,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:ut.title}}},{default:()=>[Ae]}):se(Vo,It({key:"chip",closable:e.closableChips,size:"small",text:ut.title,disabled:ut.props.disabled},xn),null):Ae??z("span",{class:"v-select__selection-text"},[ut.title,e.multiple&&Ke<_.value.length-1&&z("span",{class:"v-select__selection-comma"},[Fn(",")])])])})]),"append-inner":function(){for(var ut=arguments.length,Ke=new Array(ut),jt=0;jt<ut;jt++)Ke[jt]=arguments[jt];return z(un,null,[n["append-inner"]?.(...Ke),e.menuIcon?se(_i,{class:"v-select__menu-icon",color:r.value?.fieldIconColor,icon:e.menuIcon},null):void 0])}})}),xo({isFocused:P,menu:ee,select:nt},r)}}),FP=lt({color:String,...cl(),...wn(),...Os(),...qs(),...Ph(),...C_(),...$r(),...ti(),...Ai()},"VSheet"),uu=At()({name:"VSheet",props:FP(),setup(e,t){let{slots:n}=t;const{themeClasses:i}=Zi(e),{backgroundColorClasses:r,backgroundColorStyles:a}=nr(()=>e.color),{borderClasses:l}=Bl(e),{dimensionStyles:h}=Vs(e),{elevationClasses:s}=bo(e),{locationStyles:p}=dg(e),{positionClasses:_}=k_(e),{roundedClasses:x}=ts(e);return Vt(()=>se(e.tag,{class:xt(["v-sheet",i.value,r.value,l.value,s.value,_.value,x.value,e.class]),style:Yt([a.value,h.value,p.value,e.style])},n)),{}}});function joe(e){const t=Zt(e());let n=-1;function i(){clearInterval(n)}function r(){i(),Hn(()=>t.value=e())}function a(l){const h=l?getComputedStyle(l):{transitionDuration:.2},s=parseFloat(h.transitionDuration)*1e3||200;if(i(),t.value<=0)return;const p=performance.now();n=window.setInterval(()=>{const _=performance.now()-p+s;t.value=Math.max(e()-_,0),t.value<=0&&i()},s)}return so(i),{clear:i,time:t,start:a,reset:r}}const b$=lt({multiLine:Boolean,text:String,timer:[Boolean,String],timeout:{type:[Number,String],default:5e3},vertical:Boolean,...Ph({location:"bottom"}),...C_(),...$r(),...Nc(),...Ai(),...dr(U0({transition:"v-snackbar-transition"}),["persistent","noClickAnimation","scrim","scrollStrategy","stickToTarget"])},"VSnackbar"),z1=At()({name:"VSnackbar",props:b$(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const i=Pn(e,"modelValue"),{positionClasses:r}=k_(e),{scopeId:a}=fg(),{themeClasses:l}=Zi(e),{colorClasses:h,colorStyles:s,variantClasses:p}=lg(e),{roundedClasses:_}=ts(e),x=joe(()=>Number(e.timeout)),T=tt(),k=tt(),P=Zt(!1),M=Zt(0),R=tt(),F=wi(Gb,void 0);aa(()=>!!F,()=>{const re=X6();Ur(()=>{R.value=re.mainStyles.value})}),qt(i,H),qt(()=>e.timeout,H),Kr(()=>{i.value&&H()});let B=-1;function H(){x.reset(),window.clearTimeout(B);const re=Number(e.timeout);if(!i.value||re===-1)return;const Y=iP(k.value);x.start(Y),B=window.setTimeout(()=>{i.value=!1},re)}function G(){x.reset(),window.clearTimeout(B)}function ee(){P.value=!0,G()}function ie(){P.value=!1,H()}function J(re){M.value=re.touches[0].clientY}function $(re){Math.abs(M.value-re.changedTouches[0].clientY)>50&&(i.value=!1)}function W(){P.value&&ie()}const X=fe(()=>e.location.split(" ").reduce((re,Y)=>(re[`v-snackbar--${Y}`]=!0,re),{}));return Vt(()=>{const re=fd.filterProps(e),Y=!!(n.default||n.text||e.text);return se(fd,It({ref:T,class:["v-snackbar",{"v-snackbar--active":i.value,"v-snackbar--multi-line":e.multiLine&&!e.vertical,"v-snackbar--timer":!!e.timer,"v-snackbar--vertical":e.vertical},X.value,r.value,e.class],style:[R.value,e.style]},re,{modelValue:i.value,"onUpdate:modelValue":Z=>i.value=Z,contentProps:It({class:["v-snackbar__wrapper",l.value,h.value,_.value,p.value],style:[s.value],onPointerenter:ee,onPointerleave:ie},re.contentProps),persistent:!0,noClickAnimation:!0,scrim:!1,scrollStrategy:"none",_disableGlobalStack:!0,onTouchstartPassive:J,onTouchend:$,onAfterLeave:W},a),{default:()=>[gm(!1,"v-snackbar"),e.timer&&!P.value&&z("div",{key:"timer",class:"v-snackbar__timer"},[se(R0,{ref:k,color:typeof e.timer=="string"?e.timer:"info",max:e.timeout,modelValue:x.time.value},null)]),Y&&z("div",{key:"content",class:"v-snackbar__content",role:"status","aria-live":"polite"},[n.text?.()??e.text,n.default?.()]),n.actions&&se(ui,{defaults:{VBtn:{variant:"text",ripple:!1,slim:!0}}},{default:()=>[z("div",{class:"v-snackbar__actions"},[n.actions({isActive:i})])]})],activator:n.activator})}),xo({},T)}}),Woe={class:"rp-header"},Hoe={class:"rp-actions"},Goe={class:"rp-map-wrap"},qoe={class:"rp-ctrl-left"},Koe={key:0},Xoe={key:1},Yoe={class:"rp-ctrl-right"},Zoe={key:1,class:"rp-fare"},Joe={key:2,class:"rp-segments"},Qoe={class:"segment-line"},eae={class:"segment-line-name"},tae={class:"segment-stops"},nae={class:"segment-route"},iae={class:"segment-station"},rae={class:"segment-station"},mC="singatrain-railrouter-neutralize",sae=tz({name:"RoutePlanner",__name:"RoutePlanner",setup(e){const t=tt("Jurong East"),n=tt("Marina Bay"),i=tt(!1),r=tt(null),a=tt(null),l=tt([]),h=tt(null),s=tt(null),p=FT(),{smAndDown:_}=Vl(),x=fe(()=>p.global.current.value.dark),T=tt(!1),k=tt(null);let P=null,M=null;const R=new Map,F=tt([]),B=[];let H=null;const G=tt(!1);let ee=null;const{progressIndex:ie,segmentProgress:J,routeStationIds:$,totalStops:W,startAnimation:X,resetAnimation:re,attachRenderer:Y,detachRenderer:Z}=hre(),{allStations:ge,shortestPath:be,estimateTimeMinutes:Be,estimateDistanceKm:nt,summariseSegments:We}=gP(),{fareByType:Le}=Q6();l.value=ge.map(Ut=>({id:Ut,name:Ut})),!t.value&&l.value.length&&(t.value=l.value[0].id),!n.value&&l.value.length>1&&(n.value=l.value[1].id);const Ze="/",Ee=`${Ze}railrouter/index.61d3354a.css`,Je=`${Ze}railrouter/index.975ef6c8.js`,it=`${Ze}sg-rail.geojson`;async function vt(){if(!R.size)try{const Ut=await fetch(it);if(!Ut.ok)throw new Error("Failed to load station coordinates.");((await Ut.json()).features??[]).filter(Bn=>Bn.properties.stop_type==="station").forEach(Bn=>{R.set(Bn.properties.name,{coords:Bn.geometry.coordinates,codes:Bn.properties.station_codes,id:Bn.id})})}catch(Ut){throw console.error(Ut),new Error("Could not load station metadata. Please refresh and try again.")}}function mt(Ut){return new Promise((rn,fn)=>{if(document.querySelector(`link[data-railrouter="true"][href="${Ut}"]`)){rn();return}const Bn=document.createElement("link");Bn.rel="stylesheet",Bn.href=Ut,Bn.dataset.railrouter="true",Bn.onload=()=>rn(),Bn.onerror=()=>fn(new Error(`Failed to load RailRouter stylesheet: ${Ut}`)),document.head.appendChild(Bn)})}function ot(Ut){return new Promise((rn,fn)=>{if(document.querySelector(`script[data-railrouter="true"][src="${Ut}"]`)){rn();return}const Bn=document.createElement("script");Bn.src=Ut,Bn.async=!0,Bn.dataset.railrouter="true",Bn.onload=()=>rn(),Bn.onerror=()=>fn(new Error(`Failed to load RailRouter script: ${Ut}`)),document.body.appendChild(Bn)})}async function Ye(){Mn(),T.value||(await Promise.all([mt(Ee),ot(Je)]),T.value=!0)}function ut(Ut=1e4){return new Promise(rn=>{const fn=performance.now(),Bn=()=>{if(window.$map){rn(window.$map);return}if(performance.now()-fn>Ut){rn(null);return}requestAnimationFrame(Bn)};Bn()})}function Ke(){if(!P)return;const Ut=P,rn="singatrain-route",fn="singatrain-route-glow",Bn="singatrain-route-line",ki=()=>{Ut.getSource(rn)||Ut.addSource(rn,{type:"geojson",data:{type:"Feature",geometry:{type:"LineString",coordinates:[]}}}),Ut.getLayer(fn)||Ut.addLayer({id:fn,type:"line",source:rn,paint:{"line-color":"#f97316","line-width":12,"line-opacity":.25}}),Ut.getLayer(Bn)||Ut.addLayer({id:Bn,type:"line",source:rn,paint:{"line-color":"#f97316","line-width":5}})};Ut.isStyleLoaded()?ki():Ut.once("styledata",ki)}function jt(){if(!P)return;const Ut=P.getSource("singatrain-route");if(!Ut)return;const rn=F.value.filter(fn=>Array.isArray(fn));Ut.setData({type:"Feature",geometry:{type:"LineString",coordinates:rn}})}function xn(){B.forEach(Ut=>Ut?.marker.remove()),B.length=0,H?.remove(),H=null}function ke(){if(!P)return;xn(),F.value.forEach((rn,fn)=>{if(!rn){B.push(null);return}const Bn=document.createElement("div");Bn.className="route-stop route-stop-upcoming",Bn.dataset.index=String(fn);const ki=new bp.Marker({element:Bn,anchor:"center"}).setLngLat(rn).addTo(P);B.push({marker:ki,el:Bn})});const Ut=document.createElement("div");Ut.className="route-train-marker",Ut.innerHTML='<span class="material-icons">train</span>',H=new bp.Marker({element:Ut,anchor:"center"}),F.value[0]&&H.setLngLat(F.value[0]).addTo(P)}function Ae(Ut){B.forEach((rn,fn)=>{rn&&(rn.el.classList.toggle("route-stop-active",fn===Ut),rn.el.classList.toggle("route-stop-visited",fn<Ut),rn.el.classList.toggle("route-stop-upcoming",fn>Ut))})}function he(){if(!P||!H)return;const Ut=ie.value,rn=F.value[Ut],fn=F.value[Ut+1]??rn;if(!rn)return;if(!fn){H.setLngLat(rn);return}const Bn=J.value,ki=rn[0]+(fn[0]-rn[0])*Bn,qi=rn[1]+(fn[1]-rn[1])*Bn;H.setLngLat([ki,qi])}function et(Ut){if(!P)return;const rn=F.value[Ut];if(!rn)return;const fn=_.value?12.3:13.2;P.easeTo({center:rn,zoom:Math.max(P.getZoom(),fn),duration:850})}function dt(Ut){if(!P)return;const rn=P.getCanvas();rn.style.filter=Ut?"invert(0.92) hue-rotate(180deg)":""}async function Qe(){await Ye(),await vt(),await Hn();const Ut=await ut();if(!Ut){r.value="Unable to initialise RailRouter map.";return}P=Ut,Ke(),dt(x.value),M=new ResizeObserver(()=>P?.resize()),k.value&&M.observe(k.value),Ut.resize(),Ut.isStyleLoaded()?Ut.easeTo({center:[103.8198,1.3521],zoom:11.5,duration:0}):Ut.once("styledata",()=>{Ut.easeTo({center:[103.8198,1.3521],zoom:11.5,duration:0})})}function Ct(){Z(),xn(),M&&k.value&&M.unobserve(k.value),M?.disconnect(),M=null,P&&(P.getLayer("singatrain-route-line")&&P.removeLayer("singatrain-route-line"),P.getLayer("singatrain-route-glow")&&P.removeLayer("singatrain-route-glow"),P.getSource("singatrain-route")&&P.removeSource("singatrain-route"),P.remove()),P=null,Ln()}async function Pt(Ut,rn){const fn=be(Ut,rn);if(!fn||!fn.steps?.length)throw new Error("No valid route found.");const Bn=Be(fn.totalWeight),ki=nt(fn.totalWeight),qi=We(fn);return h.value={estimatedTime:Bn,distanceKm:ki,segments:qi},fn.steps.map(fr=>fr.station)}async function Bt(Ut,rn){if(!h.value)return;const fn=Le(h.value.distanceKm,"adult");s.value={amount:fn,currency:"SGD"}}async function Ht(){r.value=null,s.value=null,h.value=null,i.value=!0;try{if(!t.value||!n.value)throw new Error("Please select a start and end station.");if(t.value===n.value)throw new Error("Pick two different stations to plan a journey.");if(Z(),re(),P||await Qe(),!P)throw new Error("RailRouter map is still initialising. Please try again shortly.");const Ut=await Pt(t.value,n.value);if(!Ut||Ut.length<2)throw new Error("No valid route found.");$.value=Ut,W.value=Ut.length,F.value=Ut.map(rn=>{const fn=R.get(rn);return fn?fn.coords:(console.warn("Missing coordinates for station:",rn),null)}),Ke(),jt(),ke(),Ae(0),he(),et(0),await Bt(t.value,n.value),Y(rn=>{Ae(rn),et(rn)}),X(),a.value=Date.now()}catch(Ut){r.value=Ut?.message??"Failed to plan route."}finally{i.value=!1}}function En(){re(),$.value.length>1&&(Ae(0),et(0),X())}function Jt(){G.value=!0,ee&&window.clearTimeout(ee),ee=window.setTimeout(()=>{G.value=!1,ee=null},3200)}qt(x,Ut=>dt(Ut)),qt([ie,J],he),qt($,()=>{G.value=!1});function Mn(){if(typeof window>"u"||document.getElementById(mC))return;const Ut=document.createElement("style");Ut.id=mC,Ut.textContent=`
    html {
      position: static !important;
      inset: auto !important;
      overflow: auto !important;
      height: 100% !important;
    }
    body {
      overflow: auto !important;
      position: static !important;
      min-height: 100vh !important;
      height: 100% !important;
    }
  `,document.head.appendChild(Ut)}function Ln(){if(typeof window>"u")return;const Ut=document.getElementById(mC);Ut?.parentNode&&Ut.parentNode.removeChild(Ut)}return Kr(async()=>{window.addEventListener("route-animation-arrived",Jt),await Qe()}),FI(()=>{Mn()}),sT(()=>{Ln()}),Nr(()=>{window.removeEventListener("route-animation-arrived",Jt),ee&&window.clearTimeout(ee),Ct(),Ln()}),(Ut,rn)=>(nn(),Mc(B1,{class:"pa-0"},{default:An(()=>[se(ju,{class:"rp-card",rounded:"xl",elevation:"1"},{default:An(()=>[z("div",Woe,[rn[5]||(rn[5]=z("div",{class:"rp-title"},[z("h1",null,"Plan your MRT route"),z("p",{class:"subtitle"}," Smart MRT navigation for Singapore ")],-1)),z("div",Hoe,[se(ci,{variant:"outlined",class:"action-btn","prepend-icon":"mdi-crosshairs-gps",onClick:()=>{}},{default:An(()=>[...rn[4]||(rn[4]=[Fn(" Locate me ",-1)])]),_:1})])]),z("div",{class:xt(["rp-form",{stacked:xi(_)}])},[se(Hf,{class:"rp-input",items:l.value,"item-title":"name","item-value":"id",modelValue:t.value,"onUpdate:modelValue":rn[0]||(rn[0]=fn=>t.value=fn),label:"Start station",variant:"outlined",density:"comfortable","hide-details":"","menu-props":{maxHeight:320},"prepend-inner-icon":"mdi-map-marker"},null,8,["items","modelValue"]),se(Hf,{class:"rp-input",items:l.value,"item-title":"name","item-value":"id",modelValue:n.value,"onUpdate:modelValue":rn[1]||(rn[1]=fn=>n.value=fn),label:"End station",variant:"outlined",density:"comfortable","hide-details":"","menu-props":{maxHeight:320},"prepend-inner-icon":"mdi-flag-checkered"},null,8,["items","modelValue"]),se(ci,{class:"rp-plan",color:"orange",variant:"flat",height:"48","prepend-icon":"mdi-transit-connection-variant",loading:i.value,onClick:Ht},{default:An(()=>[...rn[6]||(rn[6]=[Fn(" Plan Route ",-1)])]),_:1},8,["loading"])],2),r.value?(nn(),Mc(V1,{key:0,type:"error",variant:"tonal",class:"mt-2",density:"comfortable"},{default:An(()=>[Fn(sn(r.value),1)]),_:1})):tr("",!0),z("div",Goe,[z("div",{ref_key:"railRouterShell",ref:k,class:"railrouter-shell"},[...rn[7]||(rn[7]=[z("div",{id:"station",class:"sheet"},null,-1),z("button",{type:"button",class:"sheet-close"},null,-1),z("div",{id:"map",class:"railrouter-map"},null,-1),z("div",{id:"home",class:"sheet modal"},[z("button",{type:"button",class:"btn",id:"btn-close-home"},"Let's explore!")],-1),z("details",{id:"legend"},[z("summary",null,"Legend"),z("div",{id:"crowded-timing"})],-1),z("div",{id:"logo",tabindex:"-1"},null,-1),z("div",{id:"search",hidden:""},[z("div",{id:"search-field-container"},[z("input",{id:"search-field",type:"search",autocomplete:"off",spellcheck:"false"}),z("button",{type:"button",id:"search-cancel"},"Cancel")]),z("ul",{id:"search-results"})],-1)])],512),se(uu,{class:"rp-controls",rounded:"lg",elevation:"1"},{default:An(()=>[z("div",qoe,[se(Vo,{size:"small",class:"mr-2",color:"success",variant:"flat","prepend-icon":"mdi-clock-outline"},{default:An(()=>[a.value?(nn(),mn("span",Koe,"Updated "+sn(new Date(a.value).toLocaleTimeString()),1)):(nn(),mn("span",Xoe,"Ready"))]),_:1}),se(Vo,{size:"small",variant:"tonal","prepend-icon":"mdi-counter"},{default:An(()=>[Fn(sn(xi(ie)+1)+" / "+sn(Math.max(xi(W),0))+" stops ",1)]),_:1}),h.value?(nn(),Mc(Vo,{key:0,size:"small",color:"primary",variant:"outlined","prepend-icon":"mdi-timer-sand"},{default:An(()=>[Fn(sn(h.value.estimatedTime)+" min  "+sn(h.value.distanceKm.toFixed(1))+" km ",1)]),_:1})):tr("",!0)]),z("div",Yoe,[se(ci,{class:"ctrl-btn",variant:"outlined",height:"40","prepend-icon":"mdi-restart",onClick:En},{default:An(()=>[...rn[8]||(rn[8]=[Fn(" Restart ",-1)])]),_:1})])]),_:1})]),s.value?(nn(),mn("div",Zoe,[se(Vo,{size:"large",color:"orange",variant:"flat","prepend-icon":"mdi-cash"},{default:An(()=>[Fn(" Estimated Fare: "+sn(s.value.amount.toFixed(2))+" "+sn(s.value.currency),1)]),_:1})])):tr("",!0),h.value?.segments?.length?(nn(),mn("div",Joe,[(nn(!0),mn(un,null,Ws(h.value.segments,fn=>(nn(),Mc(uu,{key:fn.line+fn.from,class:"segment-sheet",rounded:"lg",elevation:"0"},{default:An(()=>[z("div",Qoe,[z("span",eae,sn(fn.line),1),z("small",tae,sn(fn.stops)+" stops",1)]),z("div",nae,[z("span",iae,sn(fn.from),1),rn[9]||(rn[9]=z("span",{class:"material-icons segment-arrow"},"arrow_forward",-1)),z("span",rae,sn(fn.to),1)])]),_:2},1024))),128))])):tr("",!0)]),_:1}),se(z1,{modelValue:G.value,"onUpdate:modelValue":rn[3]||(rn[3]=fn=>G.value=fn),timeout:"0",location:"bottom"},{actions:An(()=>[se(ci,{color:"orange",variant:"text",onClick:rn[2]||(rn[2]=fn=>G.value=!1)},{default:An(()=>[...rn[10]||(rn[10]=[Fn("Close",-1)])]),_:1})]),default:An(()=>[rn[11]||(rn[11]=Fn(" Youve arrived at your destination  ",-1))]),_:1},8,["modelValue"])]),_:1}))}}),zP=(e,t)=>{const n=e.__vccOpts||e;for(const[i,r]of t)n[i]=r;return n},oae=zP(sae,[["__scopeId","data-v-e6ef3554"]]);function D3(e){return typeof e=="function"?e():xi(e)}typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const L3=()=>{};function aae(e,t){function n(...i){return new Promise((r,a)=>{Promise.resolve(e(()=>t.apply(this,i),{fn:t,thisArg:this,args:i})).then(r).catch(a)})}return n}const lae=e=>e();function cae(e,t={}){let n,i,r=L3;const a=h=>{clearTimeout(h),r(),r=L3};return h=>{const s=D3(e),p=D3(t.maxWait);return n&&a(n),s<=0||p!==void 0&&p<=0?(i&&(a(i),i=null),Promise.resolve(h())):new Promise((_,x)=>{r=t.rejectOnCancel?x:_,p&&!i&&(i=setTimeout(()=>{n&&a(n),i=null,_(h())},p)),n=setTimeout(()=>{i&&a(i),i=null,_(h())},s)})}}function uae(e,t,n={}){const{eventFilter:i=lae,...r}=n;return qt(e,aae(i,t),r)}function dae(e,t,n={}){const{debounce:i=0,maxWait:r=void 0,...a}=n;return uae(e,t,{...a,eventFilter:cae(i,{maxWait:r})})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function W0(e){return e+.5|0}const Lf=(e,t,n)=>Math.max(Math.min(e,n),t);function Gy(e){return Lf(W0(e*2.55),0,255)}function Gf(e){return Lf(W0(e*255),0,255)}function sh(e){return Lf(W0(e/2.55)/100,0,1)}function R3(e){return Lf(W0(e*100),0,100)}const Ic={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Yk=[..."0123456789ABCDEF"],hae=e=>Yk[e&15],fae=e=>Yk[(e&240)>>4]+Yk[e&15],Zx=e=>(e&240)>>4===(e&15),mae=e=>Zx(e.r)&&Zx(e.g)&&Zx(e.b)&&Zx(e.a);function pae(e){var t=e.length,n;return e[0]==="#"&&(t===4||t===5?n={r:255&Ic[e[1]]*17,g:255&Ic[e[2]]*17,b:255&Ic[e[3]]*17,a:t===5?Ic[e[4]]*17:255}:(t===7||t===9)&&(n={r:Ic[e[1]]<<4|Ic[e[2]],g:Ic[e[3]]<<4|Ic[e[4]],b:Ic[e[5]]<<4|Ic[e[6]],a:t===9?Ic[e[7]]<<4|Ic[e[8]]:255})),n}const gae=(e,t)=>e<255?t(e):"";function vae(e){var t=mae(e)?hae:fae;return e?"#"+t(e.r)+t(e.g)+t(e.b)+gae(e.a,t):void 0}const _ae=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function x$(e,t,n){const i=t*Math.min(n,1-n),r=(a,l=(a+e/30)%12)=>n-i*Math.max(Math.min(l-3,9-l,1),-1);return[r(0),r(8),r(4)]}function yae(e,t,n){const i=(r,a=(r+e/60)%6)=>n-n*t*Math.max(Math.min(a,4-a,1),0);return[i(5),i(3),i(1)]}function bae(e,t,n){const i=x$(e,1,.5);let r;for(t+n>1&&(r=1/(t+n),t*=r,n*=r),r=0;r<3;r++)i[r]*=1-t-n,i[r]+=t;return i}function xae(e,t,n,i,r){return e===r?(t-n)/i+(t<n?6:0):t===r?(n-e)/i+2:(e-t)/i+4}function NP(e){const n=e.r/255,i=e.g/255,r=e.b/255,a=Math.max(n,i,r),l=Math.min(n,i,r),h=(a+l)/2;let s,p,_;return a!==l&&(_=a-l,p=h>.5?_/(2-a-l):_/(a+l),s=xae(n,i,r,_,a),s=s*60+.5),[s|0,p||0,h]}function UP(e,t,n,i){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,i)).map(Gf)}function $P(e,t,n){return UP(x$,e,t,n)}function wae(e,t,n){return UP(bae,e,t,n)}function Tae(e,t,n){return UP(yae,e,t,n)}function w$(e){return(e%360+360)%360}function Sae(e){const t=_ae.exec(e);let n=255,i;if(!t)return;t[5]!==i&&(n=t[6]?Gy(+t[5]):Gf(+t[5]));const r=w$(+t[2]),a=+t[3]/100,l=+t[4]/100;return t[1]==="hwb"?i=wae(r,a,l):t[1]==="hsv"?i=Tae(r,a,l):i=$P(r,a,l),{r:i[0],g:i[1],b:i[2],a:n}}function Eae(e,t){var n=NP(e);n[0]=w$(n[0]+t),n=$P(n),e.r=n[0],e.g=n[1],e.b=n[2]}function Cae(e){if(!e)return;const t=NP(e),n=t[0],i=R3(t[1]),r=R3(t[2]);return e.a<255?`hsla(${n}, ${i}%, ${r}%, ${sh(e.a)})`:`hsl(${n}, ${i}%, ${r}%)`}const O3={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},V3={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function kae(){const e={},t=Object.keys(V3),n=Object.keys(O3);let i,r,a,l,h;for(i=0;i<t.length;i++){for(l=h=t[i],r=0;r<n.length;r++)a=n[r],h=h.replace(a,O3[a]);a=parseInt(V3[l],16),e[h]=[a>>16&255,a>>8&255,a&255]}return e}let Jx;function Iae(e){Jx||(Jx=kae(),Jx.transparent=[0,0,0,0]);const t=Jx[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const Aae=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Pae(e){const t=Aae.exec(e);let n=255,i,r,a;if(t){if(t[7]!==i){const l=+t[7];n=t[8]?Gy(l):Lf(l*255,0,255)}return i=+t[1],r=+t[3],a=+t[5],i=255&(t[2]?Gy(i):Lf(i,0,255)),r=255&(t[4]?Gy(r):Lf(r,0,255)),a=255&(t[6]?Gy(a):Lf(a,0,255)),{r:i,g:r,b:a,a:n}}}function Mae(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${sh(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const pC=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,lv=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function Dae(e,t,n){const i=lv(sh(e.r)),r=lv(sh(e.g)),a=lv(sh(e.b));return{r:Gf(pC(i+n*(lv(sh(t.r))-i))),g:Gf(pC(r+n*(lv(sh(t.g))-r))),b:Gf(pC(a+n*(lv(sh(t.b))-a))),a:e.a+n*(t.a-e.a)}}function Qx(e,t,n){if(e){let i=NP(e);i[t]=Math.max(0,Math.min(i[t]+i[t]*n,t===0?360:1)),i=$P(i),e.r=i[0],e.g=i[1],e.b=i[2]}}function T$(e,t){return e&&Object.assign(t||{},e)}function B3(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=Gf(e[3]))):(t=T$(e,{r:0,g:0,b:0,a:1}),t.a=Gf(t.a)),t}function Lae(e){return e.charAt(0)==="r"?Pae(e):Sae(e)}class Qb{constructor(t){if(t instanceof Qb)return t;const n=typeof t;let i;n==="object"?i=B3(t):n==="string"&&(i=pae(t)||Iae(t)||Lae(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=T$(this._rgb);return t&&(t.a=sh(t.a)),t}set rgb(t){this._rgb=B3(t)}rgbString(){return this._valid?Mae(this._rgb):void 0}hexString(){return this._valid?vae(this._rgb):void 0}hslString(){return this._valid?Cae(this._rgb):void 0}mix(t,n){if(t){const i=this.rgb,r=t.rgb;let a;const l=n===a?.5:n,h=2*l-1,s=i.a-r.a,p=((h*s===-1?h:(h+s)/(1+h*s))+1)/2;a=1-p,i.r=255&p*i.r+a*r.r+.5,i.g=255&p*i.g+a*r.g+.5,i.b=255&p*i.b+a*r.b+.5,i.a=l*i.a+(1-l)*r.a,this.rgb=i}return this}interpolate(t,n){return t&&(this._rgb=Dae(this._rgb,t._rgb,n)),this}clone(){return new Qb(this.rgb)}alpha(t){return this._rgb.a=Gf(t),this}clearer(t){const n=this._rgb;return n.a*=1-t,this}greyscale(){const t=this._rgb,n=W0(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=n,this}opaquer(t){const n=this._rgb;return n.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Qx(this._rgb,2,t),this}darken(t){return Qx(this._rgb,2,-t),this}saturate(t){return Qx(this._rgb,1,t),this}desaturate(t){return Qx(this._rgb,1,-t),this}rotate(t){return Eae(this._rgb,t),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Yd(){}const Rae=(()=>{let e=0;return()=>e++})();function Ri(e){return e==null}function cs(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function Fi(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function Ls(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function Yl(e,t){return Ls(e)?e:t}function yi(e,t){return typeof e>"u"?t:e}const Oae=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100:+e/t,S$=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function Gr(e,t,n){if(e&&typeof e.call=="function")return e.apply(n,t)}function Ir(e,t,n,i){let r,a,l;if(cs(e))for(a=e.length,r=0;r<a;r++)t.call(n,e[r],r);else if(Fi(e))for(l=Object.keys(e),a=l.length,r=0;r<a;r++)t.call(n,e[l[r]],l[r])}function N1(e,t){let n,i,r,a;if(!e||!t||e.length!==t.length)return!1;for(n=0,i=e.length;n<i;++n)if(r=e[n],a=t[n],r.datasetIndex!==a.datasetIndex||r.index!==a.index)return!1;return!0}function U1(e){if(cs(e))return e.map(U1);if(Fi(e)){const t=Object.create(null),n=Object.keys(e),i=n.length;let r=0;for(;r<i;++r)t[n[r]]=U1(e[n[r]]);return t}return e}function E$(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function Vae(e,t,n,i){if(!E$(e))return;const r=t[e],a=n[e];Fi(r)&&Fi(a)?e0(r,a,i):t[e]=U1(a)}function e0(e,t,n){const i=cs(t)?t:[t],r=i.length;if(!Fi(e))return e;n=n||{};const a=n.merger||Vae;let l;for(let h=0;h<r;++h){if(l=i[h],!Fi(l))continue;const s=Object.keys(l);for(let p=0,_=s.length;p<_;++p)a(s[p],e,l,n)}return e}function pb(e,t){return e0(e,t,{merger:Bae})}function Bae(e,t,n){if(!E$(e))return;const i=t[e],r=n[e];Fi(i)&&Fi(r)?pb(i,r):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=U1(r))}const F3={"":e=>e,x:e=>e.x,y:e=>e.y};function Fae(e){const t=e.split("."),n=[];let i="";for(const r of t)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}function zae(e){const t=Fae(e);return n=>{for(const i of t){if(i==="")break;n=n&&n[i]}return n}}function cm(e,t){return(F3[t]||(F3[t]=zae(t)))(e)}function jP(e){return e.charAt(0).toUpperCase()+e.slice(1)}const t0=e=>typeof e<"u",um=e=>typeof e=="function",z3=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};function Nae(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const ur=Math.PI,Jr=2*ur,Uae=Jr+ur,$1=Number.POSITIVE_INFINITY,$ae=ur/180,Hs=ur/2,cp=ur/4,N3=ur*2/3,Rf=Math.log10,id=Math.sign;function gb(e,t,n){return Math.abs(e-t)<n}function U3(e){const t=Math.round(e);e=gb(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(Rf(e))),i=e/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function jae(e){const t=[],n=Math.sqrt(e);let i;for(i=1;i<n;i++)e%i===0&&(t.push(i),t.push(e/i));return n===(n|0)&&t.push(n),t.sort((r,a)=>r-a).pop(),t}function Wae(e){return typeof e=="symbol"||typeof e=="object"&&e!==null&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}function d_(e){return!Wae(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function Hae(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}function C$(e,t,n){let i,r,a;for(i=0,r=e.length;i<r;i++)a=e[i][n],isNaN(a)||(t.min=Math.min(t.min,a),t.max=Math.max(t.max,a))}function du(e){return e*(ur/180)}function WP(e){return e*(180/ur)}function $3(e){if(!Ls(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function k$(e,t){const n=t.x-e.x,i=t.y-e.y,r=Math.sqrt(n*n+i*i);let a=Math.atan2(i,n);return a<-.5*ur&&(a+=Jr),{angle:a,distance:r}}function Zk(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Gae(e,t){return(e-t+Uae)%Jr-ur}function Da(e){return(e%Jr+Jr)%Jr}function n0(e,t,n,i){const r=Da(e),a=Da(t),l=Da(n),h=Da(a-r),s=Da(l-r),p=Da(r-a),_=Da(r-l);return r===a||r===l||i&&a===l||h>s&&p<_}function Bo(e,t,n){return Math.max(t,Math.min(n,e))}function qae(e){return Bo(e,-32768,32767)}function uh(e,t,n,i=1e-6){return e>=Math.min(t,n)-i&&e<=Math.max(t,n)+i}function HP(e,t,n){n=n||(l=>e[l]<t);let i=e.length-1,r=0,a;for(;i-r>1;)a=r+i>>1,n(a)?r=a:i=a;return{lo:r,hi:i}}const dh=(e,t,n,i)=>HP(e,n,i?r=>{const a=e[r][t];return a<n||a===n&&e[r+1][t]===n}:r=>e[r][t]<n),Kae=(e,t,n)=>HP(e,n,i=>e[i][t]>=n);function Xae(e,t,n){let i=0,r=e.length;for(;i<r&&e[i]<t;)i++;for(;r>i&&e[r-1]>n;)r--;return i>0||r<e.length?e.slice(i,r):e}const I$=["push","pop","shift","splice","unshift"];function Yae(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),I$.forEach(n=>{const i="_onData"+jP(n),r=e[n];Object.defineProperty(e,n,{configurable:!0,enumerable:!1,value(...a){const l=r.apply(this,a);return e._chartjs.listeners.forEach(h=>{typeof h[i]=="function"&&h[i](...a)}),l}})})}function j3(e,t){const n=e._chartjs;if(!n)return;const i=n.listeners,r=i.indexOf(t);r!==-1&&i.splice(r,1),!(i.length>0)&&(I$.forEach(a=>{delete e[a]}),delete e._chartjs)}function A$(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const P$=(function(){return typeof window>"u"?function(e){return e()}:window.requestAnimationFrame})();function M$(e,t){let n=[],i=!1;return function(...r){n=r,i||(i=!0,P$.call(window,()=>{i=!1,e.apply(t,n)}))}}function Zae(e,t){let n;return function(...i){return t?(clearTimeout(n),n=setTimeout(e,t,i)):e.apply(this,i),t}}const GP=e=>e==="start"?"left":e==="end"?"right":"center",Aa=(e,t,n)=>e==="start"?t:e==="end"?n:(t+n)/2,Jae=(e,t,n,i)=>e===(i?"left":"right")?n:e==="center"?(t+n)/2:t;function D$(e,t,n){const i=t.length;let r=0,a=i;if(e._sorted){const{iScale:l,vScale:h,_parsed:s}=e,p=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,_=l.axis,{min:x,max:T,minDefined:k,maxDefined:P}=l.getUserBounds();if(k){if(r=Math.min(dh(s,_,x).lo,n?i:dh(t,_,l.getPixelForValue(x)).lo),p){const M=s.slice(0,r+1).reverse().findIndex(R=>!Ri(R[h.axis]));r-=Math.max(0,M)}r=Bo(r,0,i-1)}if(P){let M=Math.max(dh(s,l.axis,T,!0).hi+1,n?0:dh(t,_,l.getPixelForValue(T),!0).hi+1);if(p){const R=s.slice(M-1).findIndex(F=>!Ri(F[h.axis]));M+=Math.max(0,R)}a=Bo(M,r,i)-r}else a=i-r}return{start:r,count:a}}function L$(e){const{xScale:t,yScale:n,_scaleRanges:i}=e,r={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!i)return e._scaleRanges=r,!0;const a=i.xmin!==t.min||i.xmax!==t.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,r),a}const ew=e=>e===0||e===1,W3=(e,t,n)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*Jr/n)),H3=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*Jr/n)+1,vb={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*Hs)+1,easeOutSine:e=>Math.sin(e*Hs),easeInOutSine:e=>-.5*(Math.cos(ur*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>ew(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>ew(e)?e:W3(e,.075,.3),easeOutElastic:e=>ew(e)?e:H3(e,.075,.3),easeInOutElastic(e){return ew(e)?e:e<.5?.5*W3(e*2,.1125,.45):.5+.5*H3(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-vb.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?vb.easeInBounce(e*2)*.5:vb.easeOutBounce(e*2-1)*.5+.5};function qP(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function G3(e){return qP(e)?e:new Qb(e)}function gC(e){return qP(e)?e:new Qb(e).saturate(.5).darken(.1).hexString()}const Qae=["x","y","borderWidth","radius","tension"],ele=["color","borderColor","backgroundColor"];function tle(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),e.set("animations",{colors:{type:"color",properties:ele},numbers:{type:"number",properties:Qae}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function nle(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const q3=new Map;function ile(e,t){t=t||{};const n=e+JSON.stringify(t);let i=q3.get(n);return i||(i=new Intl.NumberFormat(e,t),q3.set(n,i)),i}function H0(e,t,n){return ile(t,n).format(e)}const R$={values(e){return cs(e)?e:""+e},numeric(e,t,n){if(e===0)return"0";const i=this.chart.options.locale;let r,a=e;if(n.length>1){const p=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(p<1e-4||p>1e15)&&(r="scientific"),a=rle(e,n)}const l=Rf(Math.abs(a)),h=isNaN(l)?1:Math.max(Math.min(-1*Math.floor(l),20),0),s={notation:r,minimumFractionDigits:h,maximumFractionDigits:h};return Object.assign(s,this.options.ticks.format),H0(e,i,s)},logarithmic(e,t,n){if(e===0)return"0";const i=n[t].significand||e/Math.pow(10,Math.floor(Rf(e)));return[1,2,3,5,10,15].includes(i)||t>.8*n.length?R$.numeric.call(this,e,t,n):""}};function rle(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e)),n}var HT={formatters:R$};function sle(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,n)=>n.lineWidth,tickColor:(t,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:HT.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const qp=Object.create(null),Jk=Object.create(null);function _b(e,t){if(!t)return e;const n=t.split(".");for(let i=0,r=n.length;i<r;++i){const a=n[i];e=e[a]||(e[a]=Object.create(null))}return e}function vC(e,t,n){return typeof t=="string"?e0(_b(e,t),n):e0(_b(e,""),t)}class ole{constructor(t,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,r)=>gC(r.backgroundColor),this.hoverBorderColor=(i,r)=>gC(r.borderColor),this.hoverColor=(i,r)=>gC(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(n)}set(t,n){return vC(this,t,n)}get(t){return _b(this,t)}describe(t,n){return vC(Jk,t,n)}override(t,n){return vC(qp,t,n)}route(t,n,i,r){const a=_b(this,t),l=_b(this,i),h="_"+n;Object.defineProperties(a,{[h]:{value:a[n],writable:!0},[n]:{enumerable:!0,get(){const s=this[h],p=l[r];return Fi(s)?Object.assign({},p,s):yi(s,p)},set(s){this[h]=s}}})}apply(t){t.forEach(n=>n(this))}}var us=new ole({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[tle,nle,sle]);function ale(e){return!e||Ri(e.size)||Ri(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function j1(e,t,n,i,r){let a=t[r];return a||(a=t[r]=e.measureText(r).width,n.push(r)),a>i&&(i=a),i}function lle(e,t,n,i){i=i||{};let r=i.data=i.data||{},a=i.garbageCollect=i.garbageCollect||[];i.font!==t&&(r=i.data={},a=i.garbageCollect=[],i.font=t),e.save(),e.font=t;let l=0;const h=n.length;let s,p,_,x,T;for(s=0;s<h;s++)if(x=n[s],x!=null&&!cs(x))l=j1(e,r,a,l,x);else if(cs(x))for(p=0,_=x.length;p<_;p++)T=x[p],T!=null&&!cs(T)&&(l=j1(e,r,a,l,T));e.restore();const k=a.length/2;if(k>n.length){for(s=0;s<k;s++)delete r[a[s]];a.splice(0,k)}return l}function up(e,t,n){const i=e.currentDevicePixelRatio,r=n!==0?Math.max(n/2,.5):0;return Math.round((t-r)*i)/i+r}function K3(e,t){!t&&!e||(t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function Qk(e,t,n,i){O$(e,t,n,i,null)}function O$(e,t,n,i,r){let a,l,h,s,p,_,x,T;const k=t.pointStyle,P=t.rotation,M=t.radius;let R=(P||0)*$ae;if(k&&typeof k=="object"&&(a=k.toString(),a==="[object HTMLImageElement]"||a==="[object HTMLCanvasElement]")){e.save(),e.translate(n,i),e.rotate(R),e.drawImage(k,-k.width/2,-k.height/2,k.width,k.height),e.restore();return}if(!(isNaN(M)||M<=0)){switch(e.beginPath(),k){default:r?e.ellipse(n,i,r/2,M,0,0,Jr):e.arc(n,i,M,0,Jr),e.closePath();break;case"triangle":_=r?r/2:M,e.moveTo(n+Math.sin(R)*_,i-Math.cos(R)*M),R+=N3,e.lineTo(n+Math.sin(R)*_,i-Math.cos(R)*M),R+=N3,e.lineTo(n+Math.sin(R)*_,i-Math.cos(R)*M),e.closePath();break;case"rectRounded":p=M*.516,s=M-p,l=Math.cos(R+cp)*s,x=Math.cos(R+cp)*(r?r/2-p:s),h=Math.sin(R+cp)*s,T=Math.sin(R+cp)*(r?r/2-p:s),e.arc(n-x,i-h,p,R-ur,R-Hs),e.arc(n+T,i-l,p,R-Hs,R),e.arc(n+x,i+h,p,R,R+Hs),e.arc(n-T,i+l,p,R+Hs,R+ur),e.closePath();break;case"rect":if(!P){s=Math.SQRT1_2*M,_=r?r/2:s,e.rect(n-_,i-s,2*_,2*s);break}R+=cp;case"rectRot":x=Math.cos(R)*(r?r/2:M),l=Math.cos(R)*M,h=Math.sin(R)*M,T=Math.sin(R)*(r?r/2:M),e.moveTo(n-x,i-h),e.lineTo(n+T,i-l),e.lineTo(n+x,i+h),e.lineTo(n-T,i+l),e.closePath();break;case"crossRot":R+=cp;case"cross":x=Math.cos(R)*(r?r/2:M),l=Math.cos(R)*M,h=Math.sin(R)*M,T=Math.sin(R)*(r?r/2:M),e.moveTo(n-x,i-h),e.lineTo(n+x,i+h),e.moveTo(n+T,i-l),e.lineTo(n-T,i+l);break;case"star":x=Math.cos(R)*(r?r/2:M),l=Math.cos(R)*M,h=Math.sin(R)*M,T=Math.sin(R)*(r?r/2:M),e.moveTo(n-x,i-h),e.lineTo(n+x,i+h),e.moveTo(n+T,i-l),e.lineTo(n-T,i+l),R+=cp,x=Math.cos(R)*(r?r/2:M),l=Math.cos(R)*M,h=Math.sin(R)*M,T=Math.sin(R)*(r?r/2:M),e.moveTo(n-x,i-h),e.lineTo(n+x,i+h),e.moveTo(n+T,i-l),e.lineTo(n-T,i+l);break;case"line":l=r?r/2:Math.cos(R)*M,h=Math.sin(R)*M,e.moveTo(n-l,i-h),e.lineTo(n+l,i+h);break;case"dash":e.moveTo(n,i),e.lineTo(n+Math.cos(R)*(r?r/2:M),i+Math.sin(R)*M);break;case!1:e.closePath();break}e.fill(),t.borderWidth>0&&e.stroke()}}function hh(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function GT(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function qT(e){e.restore()}function cle(e,t,n,i,r){if(!t)return e.lineTo(n.x,n.y);if(r==="middle"){const a=(t.x+n.x)/2;e.lineTo(a,t.y),e.lineTo(a,n.y)}else r==="after"!=!!i?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function ule(e,t,n,i){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(i?t.cp1x:t.cp2x,i?t.cp1y:t.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function dle(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),Ri(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function hle(e,t,n,i,r){if(r.strikethrough||r.underline){const a=e.measureText(i),l=t-a.actualBoundingBoxLeft,h=t+a.actualBoundingBoxRight,s=n-a.actualBoundingBoxAscent,p=n+a.actualBoundingBoxDescent,_=r.strikethrough?(s+p)/2:p;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=r.decorationWidth||2,e.moveTo(l,_),e.lineTo(h,_),e.stroke()}}function fle(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function Kp(e,t,n,i,r,a={}){const l=cs(t)?t:[t],h=a.strokeWidth>0&&a.strokeColor!=="";let s,p;for(e.save(),e.font=r.string,dle(e,a),s=0;s<l.length;++s)p=l[s],a.backdrop&&fle(e,a.backdrop),h&&(a.strokeColor&&(e.strokeStyle=a.strokeColor),Ri(a.strokeWidth)||(e.lineWidth=a.strokeWidth),e.strokeText(p,n,i,a.maxWidth)),e.fillText(p,n,i,a.maxWidth),hle(e,n,i,p,a),i+=Number(r.lineHeight);e.restore()}function i0(e,t){const{x:n,y:i,w:r,h:a,radius:l}=t;e.arc(n+l.topLeft,i+l.topLeft,l.topLeft,1.5*ur,ur,!0),e.lineTo(n,i+a-l.bottomLeft),e.arc(n+l.bottomLeft,i+a-l.bottomLeft,l.bottomLeft,ur,Hs,!0),e.lineTo(n+r-l.bottomRight,i+a),e.arc(n+r-l.bottomRight,i+a-l.bottomRight,l.bottomRight,Hs,0,!0),e.lineTo(n+r,i+l.topRight),e.arc(n+r-l.topRight,i+l.topRight,l.topRight,0,-Hs,!0),e.lineTo(n+l.topLeft,i)}const mle=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,ple=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function gle(e,t){const n=(""+e).match(mle);if(!n||n[1]==="normal")return t*1.2;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100;break}return t*e}const vle=e=>+e||0;function KP(e,t){const n={},i=Fi(t),r=i?Object.keys(t):t,a=Fi(e)?i?l=>yi(e[l],e[t[l]]):l=>e[l]:()=>e;for(const l of r)n[l]=vle(a(l));return n}function V$(e){return KP(e,{top:"y",right:"x",bottom:"y",left:"x"})}function Op(e){return KP(e,["topLeft","topRight","bottomLeft","bottomRight"])}function Ha(e){const t=V$(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function go(e,t){e=e||{},t=t||us.font;let n=yi(e.size,t.size);typeof n=="string"&&(n=parseInt(n,10));let i=yi(e.style,t.style);i&&!(""+i).match(ple)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:yi(e.family,t.family),lineHeight:gle(yi(e.lineHeight,t.lineHeight),n),size:n,style:i,weight:yi(e.weight,t.weight),string:""};return r.string=ale(r),r}function qy(e,t,n,i){let r,a,l;for(r=0,a=e.length;r<a;++r)if(l=e[r],l!==void 0&&l!==void 0)return l}function _le(e,t,n){const{min:i,max:r}=e,a=S$(t,(r-i)/2),l=(h,s)=>n&&h===0?0:h+s;return{min:l(i,-Math.abs(a)),max:l(r,a)}}function _m(e,t){return Object.assign(Object.create(e),t)}function XP(e,t=[""],n,i,r=()=>e[0]){const a=n||e;typeof i>"u"&&(i=N$("_fallback",e));const l={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:a,_fallback:i,_getTarget:r,override:h=>XP([h,...e],t,a,i)};return new Proxy(l,{deleteProperty(h,s){return delete h[s],delete h._keys,delete e[0][s],!0},get(h,s){return F$(h,s,()=>Cle(s,t,e,h))},getOwnPropertyDescriptor(h,s){return Reflect.getOwnPropertyDescriptor(h._scopes[0],s)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(h,s){return Y3(h).includes(s)},ownKeys(h){return Y3(h)},set(h,s,p){const _=h._storage||(h._storage=r());return h[s]=_[s]=p,delete h._keys,!0}})}function h_(e,t,n,i){const r={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:B$(e,i),setContext:a=>h_(e,a,n,i),override:a=>h_(e.override(a),t,n,i)};return new Proxy(r,{deleteProperty(a,l){return delete a[l],delete e[l],!0},get(a,l,h){return F$(a,l,()=>ble(a,l,h))},getOwnPropertyDescriptor(a,l){return a._descriptors.allKeys?Reflect.has(e,l)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,l)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(a,l){return Reflect.has(e,l)},ownKeys(){return Reflect.ownKeys(e)},set(a,l,h){return e[l]=h,delete a[l],!0}})}function B$(e,t={scriptable:!0,indexable:!0}){const{_scriptable:n=t.scriptable,_indexable:i=t.indexable,_allKeys:r=t.allKeys}=e;return{allKeys:r,scriptable:n,indexable:i,isScriptable:um(n)?n:()=>n,isIndexable:um(i)?i:()=>i}}const yle=(e,t)=>e?e+jP(t):t,YP=(e,t)=>Fi(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function F$(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t)||t==="constructor")return e[t];const i=n();return e[t]=i,i}function ble(e,t,n){const{_proxy:i,_context:r,_subProxy:a,_descriptors:l}=e;let h=i[t];return um(h)&&l.isScriptable(t)&&(h=xle(t,h,e,n)),cs(h)&&h.length&&(h=wle(t,h,e,l.isIndexable)),YP(t,h)&&(h=h_(h,r,a&&a[t],l)),h}function xle(e,t,n,i){const{_proxy:r,_context:a,_subProxy:l,_stack:h}=n;if(h.has(e))throw new Error("Recursion detected: "+Array.from(h).join("->")+"->"+e);h.add(e);let s=t(a,l||i);return h.delete(e),YP(e,s)&&(s=ZP(r._scopes,r,e,s)),s}function wle(e,t,n,i){const{_proxy:r,_context:a,_subProxy:l,_descriptors:h}=n;if(typeof a.index<"u"&&i(e))return t[a.index%t.length];if(Fi(t[0])){const s=t,p=r._scopes.filter(_=>_!==s);t=[];for(const _ of s){const x=ZP(p,r,e,_);t.push(h_(x,a,l&&l[e],h))}}return t}function z$(e,t,n){return um(e)?e(t,n):e}const Tle=(e,t)=>e===!0?t:typeof e=="string"?cm(t,e):void 0;function Sle(e,t,n,i,r){for(const a of t){const l=Tle(n,a);if(l){e.add(l);const h=z$(l._fallback,n,r);if(typeof h<"u"&&h!==n&&h!==i)return h}else if(l===!1&&typeof i<"u"&&n!==i)return null}return!1}function ZP(e,t,n,i){const r=t._rootScopes,a=z$(t._fallback,n,i),l=[...e,...r],h=new Set;h.add(i);let s=X3(h,l,n,a||n,i);return s===null||typeof a<"u"&&a!==n&&(s=X3(h,l,a,s,i),s===null)?!1:XP(Array.from(h),[""],r,a,()=>Ele(t,n,i))}function X3(e,t,n,i,r){for(;n;)n=Sle(e,t,n,i,r);return n}function Ele(e,t,n){const i=e._getTarget();t in i||(i[t]={});const r=i[t];return cs(r)&&Fi(n)?n:r||{}}function Cle(e,t,n,i){let r;for(const a of t)if(r=N$(yle(a,e),n),typeof r<"u")return YP(e,r)?ZP(n,i,e,r):r}function N$(e,t){for(const n of t){if(!n)continue;const i=n[e];if(typeof i<"u")return i}}function Y3(e){let t=e._keys;return t||(t=e._keys=kle(e._scopes)),t}function kle(e){const t=new Set;for(const n of e)for(const i of Object.keys(n).filter(r=>!r.startsWith("_")))t.add(i);return Array.from(t)}function U$(e,t,n,i){const{iScale:r}=e,{key:a="r"}=this._parsing,l=new Array(i);let h,s,p,_;for(h=0,s=i;h<s;++h)p=h+n,_=t[p],l[h]={r:r.parse(cm(_,a),p)};return l}const Ile=Number.EPSILON||1e-14,f_=(e,t)=>t<e.length&&!e[t].skip&&e[t],$$=e=>e==="x"?"y":"x";function Ale(e,t,n,i){const r=e.skip?t:e,a=t,l=n.skip?t:n,h=Zk(a,r),s=Zk(l,a);let p=h/(h+s),_=s/(h+s);p=isNaN(p)?0:p,_=isNaN(_)?0:_;const x=i*p,T=i*_;return{previous:{x:a.x-x*(l.x-r.x),y:a.y-x*(l.y-r.y)},next:{x:a.x+T*(l.x-r.x),y:a.y+T*(l.y-r.y)}}}function Ple(e,t,n){const i=e.length;let r,a,l,h,s,p=f_(e,0);for(let _=0;_<i-1;++_)if(s=p,p=f_(e,_+1),!(!s||!p)){if(gb(t[_],0,Ile)){n[_]=n[_+1]=0;continue}r=n[_]/t[_],a=n[_+1]/t[_],h=Math.pow(r,2)+Math.pow(a,2),!(h<=9)&&(l=3/Math.sqrt(h),n[_]=r*l*t[_],n[_+1]=a*l*t[_])}}function Mle(e,t,n="x"){const i=$$(n),r=e.length;let a,l,h,s=f_(e,0);for(let p=0;p<r;++p){if(l=h,h=s,s=f_(e,p+1),!h)continue;const _=h[n],x=h[i];l&&(a=(_-l[n])/3,h[`cp1${n}`]=_-a,h[`cp1${i}`]=x-a*t[p]),s&&(a=(s[n]-_)/3,h[`cp2${n}`]=_+a,h[`cp2${i}`]=x+a*t[p])}}function Dle(e,t="x"){const n=$$(t),i=e.length,r=Array(i).fill(0),a=Array(i);let l,h,s,p=f_(e,0);for(l=0;l<i;++l)if(h=s,s=p,p=f_(e,l+1),!!s){if(p){const _=p[t]-s[t];r[l]=_!==0?(p[n]-s[n])/_:0}a[l]=h?p?id(r[l-1])!==id(r[l])?0:(r[l-1]+r[l])/2:r[l-1]:r[l]}Ple(e,r,a),Mle(e,a,t)}function tw(e,t,n){return Math.max(Math.min(e,n),t)}function Lle(e,t){let n,i,r,a,l,h=hh(e[0],t);for(n=0,i=e.length;n<i;++n)l=a,a=h,h=n<i-1&&hh(e[n+1],t),a&&(r=e[n],l&&(r.cp1x=tw(r.cp1x,t.left,t.right),r.cp1y=tw(r.cp1y,t.top,t.bottom)),h&&(r.cp2x=tw(r.cp2x,t.left,t.right),r.cp2y=tw(r.cp2y,t.top,t.bottom)))}function Rle(e,t,n,i,r){let a,l,h,s;if(t.spanGaps&&(e=e.filter(p=>!p.skip)),t.cubicInterpolationMode==="monotone")Dle(e,r);else{let p=i?e[e.length-1]:e[0];for(a=0,l=e.length;a<l;++a)h=e[a],s=Ale(p,h,e[Math.min(a+1,l-(i?0:1))%l],t.tension),h.cp1x=s.previous.x,h.cp1y=s.previous.y,h.cp2x=s.next.x,h.cp2y=s.next.y,p=h}t.capBezierPoints&&Lle(e,n)}function JP(){return typeof window<"u"&&typeof document<"u"}function QP(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function W1(e,t,n){let i;return typeof e=="string"?(i=parseInt(e,10),e.indexOf("%")!==-1&&(i=i/100*t.parentNode[n])):i=e,i}const KT=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function Ole(e,t){return KT(e).getPropertyValue(t)}const Vle=["top","right","bottom","left"];function Vp(e,t,n){const i={};n=n?"-"+n:"";for(let r=0;r<4;r++){const a=Vle[r];i[a]=parseFloat(e[t+"-"+a+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const Ble=(e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot);function Fle(e,t){const n=e.touches,i=n&&n.length?n[0]:e,{offsetX:r,offsetY:a}=i;let l=!1,h,s;if(Ble(r,a,e.target))h=r,s=a;else{const p=t.getBoundingClientRect();h=i.clientX-p.left,s=i.clientY-p.top,l=!0}return{x:h,y:s,box:l}}function vp(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:i}=t,r=KT(n),a=r.boxSizing==="border-box",l=Vp(r,"padding"),h=Vp(r,"border","width"),{x:s,y:p,box:_}=Fle(e,n),x=l.left+(_&&h.left),T=l.top+(_&&h.top);let{width:k,height:P}=t;return a&&(k-=l.width+h.width,P-=l.height+h.height),{x:Math.round((s-x)/k*n.width/i),y:Math.round((p-T)/P*n.height/i)}}function zle(e,t,n){let i,r;if(t===void 0||n===void 0){const a=e&&QP(e);if(!a)t=e.clientWidth,n=e.clientHeight;else{const l=a.getBoundingClientRect(),h=KT(a),s=Vp(h,"border","width"),p=Vp(h,"padding");t=l.width-p.width-s.width,n=l.height-p.height-s.height,i=W1(h.maxWidth,a,"clientWidth"),r=W1(h.maxHeight,a,"clientHeight")}}return{width:t,height:n,maxWidth:i||$1,maxHeight:r||$1}}const Of=e=>Math.round(e*10)/10;function Nle(e,t,n,i){const r=KT(e),a=Vp(r,"margin"),l=W1(r.maxWidth,e,"clientWidth")||$1,h=W1(r.maxHeight,e,"clientHeight")||$1,s=zle(e,t,n);let{width:p,height:_}=s;if(r.boxSizing==="content-box"){const T=Vp(r,"border","width"),k=Vp(r,"padding");p-=k.width+T.width,_-=k.height+T.height}return p=Math.max(0,p-a.width),_=Math.max(0,i?p/i:_-a.height),p=Of(Math.min(p,l,s.maxWidth)),_=Of(Math.min(_,h,s.maxHeight)),p&&!_&&(_=Of(p/2)),(t!==void 0||n!==void 0)&&i&&s.height&&_>s.height&&(_=s.height,p=Of(Math.floor(_*i))),{width:p,height:_}}function Z3(e,t,n){const i=t||1,r=Of(e.height*i),a=Of(e.width*i);e.height=Of(e.height),e.width=Of(e.width);const l=e.canvas;return l.style&&(n||!l.style.height&&!l.style.width)&&(l.style.height=`${e.height}px`,l.style.width=`${e.width}px`),e.currentDevicePixelRatio!==i||l.height!==r||l.width!==a?(e.currentDevicePixelRatio=i,l.height=r,l.width=a,e.ctx.setTransform(i,0,0,i,0,0),!0):!1}const Ule=(function(){let e=!1;try{const t={get passive(){return e=!0,!1}};JP()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return e})();function J3(e,t){const n=Ole(e,t),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function _p(e,t,n,i){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function $le(e,t,n,i){return{x:e.x+n*(t.x-e.x),y:i==="middle"?n<.5?e.y:t.y:i==="after"?n<1?e.y:t.y:n>0?t.y:e.y}}function jle(e,t,n,i){const r={x:e.cp2x,y:e.cp2y},a={x:t.cp1x,y:t.cp1y},l=_p(e,r,n),h=_p(r,a,n),s=_p(a,t,n),p=_p(l,h,n),_=_p(h,s,n);return _p(p,_,n)}const Wle=function(e,t){return{x(n){return e+e+t-n},setWidth(n){t=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,i){return n-i},leftForLtr(n,i){return n-i}}},Hle=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function Fv(e,t,n){return e?Wle(t,n):Hle()}function j$(e,t){let n,i;(t==="ltr"||t==="rtl")&&(n=e.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=i)}function W$(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function H$(e){return e==="angle"?{between:n0,compare:Gae,normalize:Da}:{between:uh,compare:(t,n)=>t-n,normalize:t=>t}}function Q3({start:e,end:t,count:n,loop:i,style:r}){return{start:e%n,end:t%n,loop:i&&(t-e+1)%n===0,style:r}}function Gle(e,t,n){const{property:i,start:r,end:a}=n,{between:l,normalize:h}=H$(i),s=t.length;let{start:p,end:_,loop:x}=e,T,k;if(x){for(p+=s,_+=s,T=0,k=s;T<k&&l(h(t[p%s][i]),r,a);++T)p--,_--;p%=s,_%=s}return _<p&&(_+=s),{start:p,end:_,loop:x,style:e.style}}function G$(e,t,n){if(!n)return[e];const{property:i,start:r,end:a}=n,l=t.length,{compare:h,between:s,normalize:p}=H$(i),{start:_,end:x,loop:T,style:k}=Gle(e,t,n),P=[];let M=!1,R=null,F,B,H;const G=()=>s(r,H,F)&&h(r,H)!==0,ee=()=>h(a,F)===0||s(a,H,F),ie=()=>M||G(),J=()=>!M||ee();for(let $=_,W=_;$<=x;++$)B=t[$%l],!B.skip&&(F=p(B[i]),F!==H&&(M=s(F,r,a),R===null&&ie()&&(R=h(F,r)===0?$:W),R!==null&&J()&&(P.push(Q3({start:R,end:$,loop:T,count:l,style:k})),R=null),W=$,H=F));return R!==null&&P.push(Q3({start:R,end:x,loop:T,count:l,style:k})),P}function q$(e,t){const n=[],i=e.segments;for(let r=0;r<i.length;r++){const a=G$(i[r],e.points,t);a.length&&n.push(...a)}return n}function qle(e,t,n,i){let r=0,a=t-1;if(n&&!i)for(;r<t&&!e[r].skip;)r++;for(;r<t&&e[r].skip;)r++;for(r%=t,n&&(a+=r);a>r&&e[a%t].skip;)a--;return a%=t,{start:r,end:a}}function Kle(e,t,n,i){const r=e.length,a=[];let l=t,h=e[t],s;for(s=t+1;s<=n;++s){const p=e[s%r];p.skip||p.stop?h.skip||(i=!1,a.push({start:t%r,end:(s-1)%r,loop:i}),t=l=p.stop?s:null):(l=s,h.skip&&(t=s)),h=p}return l!==null&&a.push({start:t%r,end:l%r,loop:i}),a}function Xle(e,t){const n=e.points,i=e.options.spanGaps,r=n.length;if(!r)return[];const a=!!e._loop,{start:l,end:h}=qle(n,r,a,i);if(i===!0)return eB(e,[{start:l,end:h,loop:a}],n,t);const s=h<l?h+r:h,p=!!e._fullLoop&&l===0&&h===r-1;return eB(e,Kle(n,l,s,p),n,t)}function eB(e,t,n,i){return!i||!i.setContext||!n?t:Yle(e,t,n,i)}function Yle(e,t,n,i){const r=e._chart.getContext(),a=tB(e.options),{_datasetIndex:l,options:{spanGaps:h}}=e,s=n.length,p=[];let _=a,x=t[0].start,T=x;function k(P,M,R,F){const B=h?-1:1;if(P!==M){for(P+=s;n[P%s].skip;)P-=B;for(;n[M%s].skip;)M+=B;P%s!==M%s&&(p.push({start:P%s,end:M%s,loop:R,style:F}),_=F,x=M%s)}}for(const P of t){x=h?x:P.start;let M=n[x%s],R;for(T=x+1;T<=P.end;T++){const F=n[T%s];R=tB(i.setContext(_m(r,{type:"segment",p0:M,p1:F,p0DataIndex:(T-1)%s,p1DataIndex:T%s,datasetIndex:l}))),Zle(R,_)&&k(x,T-1,P.loop,_),M=F,_=R}x<T-1&&k(x,T-1,P.loop,_)}return p}function tB(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function Zle(e,t){if(!t)return!1;const n=[],i=function(r,a){return qP(a)?(n.includes(a)||n.push(a),n.indexOf(a)):a};return JSON.stringify(e,i)!==JSON.stringify(t,i)}function nw(e,t,n){return e.options.clip?e[n]:t[n]}function Jle(e,t){const{xScale:n,yScale:i}=e;return n&&i?{left:nw(n,t,"left"),right:nw(n,t,"right"),top:nw(i,t,"top"),bottom:nw(i,t,"bottom")}:t}function K$(e,t){const n=t._clip;if(n.disabled)return!1;const i=Jle(t,e.chartArea);return{left:n.left===!1?0:i.left-(n.left===!0?0:n.left),right:n.right===!1?e.width:i.right+(n.right===!0?0:n.right),top:n.top===!1?0:i.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?e.height:i.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class Qle{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,n,i,r){const a=n.listeners[r],l=n.duration;a.forEach(h=>h({chart:t,initial:n.initial,numSteps:l,currentStep:Math.min(i-n.start,l)}))}_refresh(){this._request||(this._running=!0,this._request=P$.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let n=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;const a=i.items;let l=a.length-1,h=!1,s;for(;l>=0;--l)s=a[l],s._active?(s._total>i.duration&&(i.duration=s._total),s.tick(t),h=!0):(a[l]=a[a.length-1],a.pop());h&&(r.draw(),this._notify(r,i,t,"progress")),a.length||(i.running=!1,this._notify(r,i,t,"complete"),i.initial=!1),n+=a.length}),this._lastDate=t,n===0&&(this._running=!1)}_getAnims(t){const n=this._charts;let i=n.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(t,i)),i}listen(t,n,i){this._getAnims(t).listeners[n].push(i)}add(t,n){!n||!n.length||this._getAnims(t).items.push(...n)}has(t){return this._getAnims(t).items.length>0}start(t){const n=this._charts.get(t);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(t){if(!this._running)return!1;const n=this._charts.get(t);return!(!n||!n.running||!n.items.length)}stop(t){const n=this._charts.get(t);if(!n||!n.items.length)return;const i=n.items;let r=i.length-1;for(;r>=0;--r)i[r].cancel();n.items=[],this._notify(t,n,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var Zd=new Qle;const nB="transparent",ece={boolean(e,t,n){return n>.5?t:e},color(e,t,n){const i=G3(e||nB),r=i.valid&&G3(t||nB);return r&&r.valid?r.mix(i,n).hexString():t},number(e,t,n){return e+(t-e)*n}};class tce{constructor(t,n,i,r){const a=n[i];r=qy([t.to,r,a,t.from]);const l=qy([t.from,a,r]);this._active=!0,this._fn=t.fn||ece[t.type||typeof l],this._easing=vb[t.easing]||vb.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=n,this._prop=i,this._from=l,this._to=r,this._promises=void 0}active(){return this._active}update(t,n,i){if(this._active){this._notify(!1);const r=this._target[this._prop],a=i-this._start,l=this._duration-a;this._start=i,this._duration=Math.floor(Math.max(l,t.duration)),this._total+=a,this._loop=!!t.loop,this._to=qy([t.to,n,r,t.from]),this._from=qy([t.from,r,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const n=t-this._start,i=this._duration,r=this._prop,a=this._from,l=this._loop,h=this._to;let s;if(this._active=a!==h&&(l||n<i),!this._active){this._target[r]=h,this._notify(!0);return}if(n<0){this._target[r]=a;return}s=n/i%2,s=l&&s>1?2-s:s,s=this._easing(Math.min(1,Math.max(0,s))),this._target[r]=this._fn(a,h,s)}wait(){const t=this._promises||(this._promises=[]);return new Promise((n,i)=>{t.push({res:n,rej:i})})}_notify(t){const n=t?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][n]()}}class X${constructor(t,n){this._chart=t,this._properties=new Map,this.configure(n)}configure(t){if(!Fi(t))return;const n=Object.keys(us.animation),i=this._properties;Object.getOwnPropertyNames(t).forEach(r=>{const a=t[r];if(!Fi(a))return;const l={};for(const h of n)l[h]=a[h];(cs(a.properties)&&a.properties||[r]).forEach(h=>{(h===r||!i.has(h))&&i.set(h,l)})})}_animateOptions(t,n){const i=n.options,r=ice(t,i);if(!r)return[];const a=this._createAnimations(r,i);return i.$shared&&nce(t.options.$animations,i).then(()=>{t.options=i},()=>{}),a}_createAnimations(t,n){const i=this._properties,r=[],a=t.$animations||(t.$animations={}),l=Object.keys(n),h=Date.now();let s;for(s=l.length-1;s>=0;--s){const p=l[s];if(p.charAt(0)==="$")continue;if(p==="options"){r.push(...this._animateOptions(t,n));continue}const _=n[p];let x=a[p];const T=i.get(p);if(x)if(T&&x.active()){x.update(T,_,h);continue}else x.cancel();if(!T||!T.duration){t[p]=_;continue}a[p]=x=new tce(T,t,p,_),r.push(x)}return r}update(t,n){if(this._properties.size===0){Object.assign(t,n);return}const i=this._createAnimations(t,n);if(i.length)return Zd.add(this._chart,i),!0}}function nce(e,t){const n=[],i=Object.keys(t);for(let r=0;r<i.length;r++){const a=e[i[r]];a&&a.active()&&n.push(a.wait())}return Promise.all(n)}function ice(e,t){if(!t)return;let n=e.options;if(!n){e.options=t;return}return n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function iB(e,t){const n=e&&e.options||{},i=n.reverse,r=n.min===void 0?t:0,a=n.max===void 0?t:0;return{start:i?a:r,end:i?r:a}}function rce(e,t,n){if(n===!1)return!1;const i=iB(e,n),r=iB(t,n);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}function sce(e){let t,n,i,r;return Fi(e)?(t=e.top,n=e.right,i=e.bottom,r=e.left):t=n=i=r=e,{top:t,right:n,bottom:i,left:r,disabled:e===!1}}function Y$(e,t){const n=[],i=e._getSortedDatasetMetas(t);let r,a;for(r=0,a=i.length;r<a;++r)n.push(i[r].index);return n}function rB(e,t,n,i={}){const r=e.keys,a=i.mode==="single";let l,h,s,p;if(t===null)return;let _=!1;for(l=0,h=r.length;l<h;++l){if(s=+r[l],s===n){if(_=!0,i.all)continue;break}p=e.values[s],Ls(p)&&(a||t===0||id(t)===id(p))&&(t+=p)}return!_&&!i.all?0:t}function oce(e,t){const{iScale:n,vScale:i}=t,r=n.axis==="x"?"x":"y",a=i.axis==="x"?"x":"y",l=Object.keys(e),h=new Array(l.length);let s,p,_;for(s=0,p=l.length;s<p;++s)_=l[s],h[s]={[r]:_,[a]:e[_]};return h}function _C(e,t){const n=e&&e.options.stacked;return n||n===void 0&&t.stack!==void 0}function ace(e,t,n){return`${e.id}.${t.id}.${n.stack||n.type}`}function lce(e){const{min:t,max:n,minDefined:i,maxDefined:r}=e.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}function cce(e,t,n){const i=e[t]||(e[t]={});return i[n]||(i[n]={})}function sB(e,t,n,i){for(const r of t.getMatchingVisibleMetas(i).reverse()){const a=e[r.index];if(n&&a>0||!n&&a<0)return r.index}return null}function oB(e,t){const{chart:n,_cachedMeta:i}=e,r=n._stacks||(n._stacks={}),{iScale:a,vScale:l,index:h}=i,s=a.axis,p=l.axis,_=ace(a,l,i),x=t.length;let T;for(let k=0;k<x;++k){const P=t[k],{[s]:M,[p]:R}=P,F=P._stacks||(P._stacks={});T=F[p]=cce(r,_,M),T[h]=R,T._top=sB(T,l,!0,i.type),T._bottom=sB(T,l,!1,i.type);const B=T._visualValues||(T._visualValues={});B[h]=R}}function yC(e,t){const n=e.scales;return Object.keys(n).filter(i=>n[i].axis===t).shift()}function uce(e,t){return _m(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function dce(e,t,n){return _m(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}function Py(e,t){const n=e.controller.index,i=e.vScale&&e.vScale.axis;if(i){t=t||e._parsed;for(const r of t){const a=r._stacks;if(!a||a[i]===void 0||a[i][n]===void 0)return;delete a[i][n],a[i]._visualValues!==void 0&&a[i]._visualValues[n]!==void 0&&delete a[i]._visualValues[n]}}}const bC=e=>e==="reset"||e==="none",aB=(e,t)=>t?e:Object.assign({},e),hce=(e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:Y$(n,!0),values:null};class ym{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,n){this.chart=t,this._ctx=t.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=_C(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Py(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,n=this._cachedMeta,i=this.getDataset(),r=(x,T,k,P)=>x==="x"?T:x==="r"?P:k,a=n.xAxisID=yi(i.xAxisID,yC(t,"x")),l=n.yAxisID=yi(i.yAxisID,yC(t,"y")),h=n.rAxisID=yi(i.rAxisID,yC(t,"r")),s=n.indexAxis,p=n.iAxisID=r(s,a,l,h),_=n.vAxisID=r(s,l,a,h);n.xScale=this.getScaleForId(a),n.yScale=this.getScaleForId(l),n.rScale=this.getScaleForId(h),n.iScale=this.getScaleForId(p),n.vScale=this.getScaleForId(_)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const n=this._cachedMeta;return t===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&j3(this._data,this),t._stacked&&Py(t)}_dataCheck(){const t=this.getDataset(),n=t.data||(t.data=[]),i=this._data;if(Fi(n)){const r=this._cachedMeta;this._data=oce(n,r)}else if(i!==n){if(i){j3(i,this);const r=this._cachedMeta;Py(r),r._parsed=[]}n&&Object.isExtensible(n)&&Yae(n,this),this._syncList=[],this._data=n}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const n=this._cachedMeta,i=this.getDataset();let r=!1;this._dataCheck();const a=n._stacked;n._stacked=_C(n.vScale,n),n.stack!==i.stack&&(r=!0,Py(n),n.stack=i.stack),this._resyncElements(t),(r||a!==n._stacked)&&(oB(this,n._parsed),n._stacked=_C(n.vScale,n))}configure(){const t=this.chart.config,n=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),n,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,n){const{_cachedMeta:i,_data:r}=this,{iScale:a,_stacked:l}=i,h=a.axis;let s=t===0&&n===r.length?!0:i._sorted,p=t>0&&i._parsed[t-1],_,x,T;if(this._parsing===!1)i._parsed=r,i._sorted=!0,T=r;else{cs(r[t])?T=this.parseArrayData(i,r,t,n):Fi(r[t])?T=this.parseObjectData(i,r,t,n):T=this.parsePrimitiveData(i,r,t,n);const k=()=>x[h]===null||p&&x[h]<p[h];for(_=0;_<n;++_)i._parsed[_+t]=x=T[_],s&&(k()&&(s=!1),p=x);i._sorted=s}l&&oB(this,T)}parsePrimitiveData(t,n,i,r){const{iScale:a,vScale:l}=t,h=a.axis,s=l.axis,p=a.getLabels(),_=a===l,x=new Array(r);let T,k,P;for(T=0,k=r;T<k;++T)P=T+i,x[T]={[h]:_||a.parse(p[P],P),[s]:l.parse(n[P],P)};return x}parseArrayData(t,n,i,r){const{xScale:a,yScale:l}=t,h=new Array(r);let s,p,_,x;for(s=0,p=r;s<p;++s)_=s+i,x=n[_],h[s]={x:a.parse(x[0],_),y:l.parse(x[1],_)};return h}parseObjectData(t,n,i,r){const{xScale:a,yScale:l}=t,{xAxisKey:h="x",yAxisKey:s="y"}=this._parsing,p=new Array(r);let _,x,T,k;for(_=0,x=r;_<x;++_)T=_+i,k=n[T],p[_]={x:a.parse(cm(k,h),T),y:l.parse(cm(k,s),T)};return p}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,n,i){const r=this.chart,a=this._cachedMeta,l=n[t.axis],h={keys:Y$(r,!0),values:n._stacks[t.axis]._visualValues};return rB(h,l,a.index,{mode:i})}updateRangeFromParsed(t,n,i,r){const a=i[n.axis];let l=a===null?NaN:a;const h=r&&i._stacks[n.axis];r&&h&&(r.values=h,l=rB(r,a,this._cachedMeta.index)),t.min=Math.min(t.min,l),t.max=Math.max(t.max,l)}getMinMax(t,n){const i=this._cachedMeta,r=i._parsed,a=i._sorted&&t===i.iScale,l=r.length,h=this._getOtherScale(t),s=hce(n,i,this.chart),p={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:_,max:x}=lce(h);let T,k;function P(){k=r[T];const M=k[h.axis];return!Ls(k[t.axis])||_>M||x<M}for(T=0;T<l&&!(!P()&&(this.updateRangeFromParsed(p,t,k,s),a));++T);if(a){for(T=l-1;T>=0;--T)if(!P()){this.updateRangeFromParsed(p,t,k,s);break}}return p}getAllParsedValues(t){const n=this._cachedMeta._parsed,i=[];let r,a,l;for(r=0,a=n.length;r<a;++r)l=n[r][t.axis],Ls(l)&&i.push(l);return i}getMaxOverflow(){return!1}getLabelAndValue(t){const n=this._cachedMeta,i=n.iScale,r=n.vScale,a=this.getParsed(t);return{label:i?""+i.getLabelForValue(a[i.axis]):"",value:r?""+r.getLabelForValue(a[r.axis]):""}}_update(t){const n=this._cachedMeta;this.update(t||"default"),n._clip=sce(yi(this.options.clip,rce(n.xScale,n.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,n=this.chart,i=this._cachedMeta,r=i.data||[],a=n.chartArea,l=[],h=this._drawStart||0,s=this._drawCount||r.length-h,p=this.options.drawActiveElementsOnTop;let _;for(i.dataset&&i.dataset.draw(t,a,h,s),_=h;_<h+s;++_){const x=r[_];x.hidden||(x.active&&p?l.push(x):x.draw(t,a))}for(_=0;_<l.length;++_)l[_].draw(t,a)}getStyle(t,n){const i=n?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,n,i){const r=this.getDataset();let a;if(t>=0&&t<this._cachedMeta.data.length){const l=this._cachedMeta.data[t];a=l.$context||(l.$context=dce(this.getContext(),t,l)),a.parsed=this.getParsed(t),a.raw=r.data[t],a.index=a.dataIndex=t}else a=this.$context||(this.$context=uce(this.chart.getContext(),this.index)),a.dataset=r,a.index=a.datasetIndex=this.index;return a.active=!!n,a.mode=i,a}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,n){return this._resolveElementOptions(this.dataElementType.id,n,t)}_resolveElementOptions(t,n="default",i){const r=n==="active",a=this._cachedDataOpts,l=t+"-"+n,h=a[l],s=this.enableOptionSharing&&t0(i);if(h)return aB(h,s);const p=this.chart.config,_=p.datasetElementScopeKeys(this._type,t),x=r?[`${t}Hover`,"hover",t,""]:[t,""],T=p.getOptionScopes(this.getDataset(),_),k=Object.keys(us.elements[t]),P=()=>this.getContext(i,r,n),M=p.resolveNamedOptions(T,k,P,x);return M.$shared&&(M.$shared=s,a[l]=Object.freeze(aB(M,s))),M}_resolveAnimations(t,n,i){const r=this.chart,a=this._cachedDataOpts,l=`animation-${n}`,h=a[l];if(h)return h;let s;if(r.options.animation!==!1){const _=this.chart.config,x=_.datasetAnimationScopeKeys(this._type,n),T=_.getOptionScopes(this.getDataset(),x);s=_.createResolver(T,this.getContext(t,i,n))}const p=new X$(r,s&&s.animations);return s&&s._cacheable&&(a[l]=Object.freeze(p)),p}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,n){return!n||bC(t)||this.chart._animationsDisabled}_getSharedOptions(t,n){const i=this.resolveDataElementOptions(t,n),r=this._sharedOptions,a=this.getSharedOptions(i),l=this.includeOptions(n,a)||a!==r;return this.updateSharedOptions(a,n,i),{sharedOptions:a,includeOptions:l}}updateElement(t,n,i,r){bC(r)?Object.assign(t,i):this._resolveAnimations(n,r).update(t,i)}updateSharedOptions(t,n,i){t&&!bC(n)&&this._resolveAnimations(void 0,n).update(t,i)}_setStyle(t,n,i,r){t.active=r;const a=this.getStyle(n,r);this._resolveAnimations(n,i,r).update(t,{options:!r&&this.getSharedOptions(a)||a})}removeHoverStyle(t,n,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,n,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const n=this._data,i=this._cachedMeta.data;for(const[h,s,p]of this._syncList)this[h](s,p);this._syncList=[];const r=i.length,a=n.length,l=Math.min(a,r);l&&this.parse(0,l),a>r?this._insertElements(r,a-r,t):a<r&&this._removeElements(a,r-a)}_insertElements(t,n,i=!0){const r=this._cachedMeta,a=r.data,l=t+n;let h;const s=p=>{for(p.length+=n,h=p.length-1;h>=l;h--)p[h]=p[h-n]};for(s(a),h=t;h<l;++h)a[h]=new this.dataElementType;this._parsing&&s(r._parsed),this.parse(t,n),i&&this.updateElements(a,t,n,"reset")}updateElements(t,n,i,r){}_removeElements(t,n){const i=this._cachedMeta;if(this._parsing){const r=i._parsed.splice(t,n);i._stacked&&Py(i,r)}i.data.splice(t,n)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[n,i,r]=t;this[n](i,r)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,n){n&&this._sync(["_removeElements",t,n]);const i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function fce(e,t){if(!e._cache.$bar){const n=e.getMatchingVisibleMetas(t);let i=[];for(let r=0,a=n.length;r<a;r++)i=i.concat(n[r].controller.getAllParsedValues(e));e._cache.$bar=A$(i.sort((r,a)=>r-a))}return e._cache.$bar}function mce(e){const t=e.iScale,n=fce(t,e.type);let i=t._length,r,a,l,h;const s=()=>{l===32767||l===-32768||(t0(h)&&(i=Math.min(i,Math.abs(l-h)||i)),h=l)};for(r=0,a=n.length;r<a;++r)l=t.getPixelForValue(n[r]),s();for(h=void 0,r=0,a=t.ticks.length;r<a;++r)l=t.getPixelForTick(r),s();return i}function pce(e,t,n,i){const r=n.barThickness;let a,l;return Ri(r)?(a=t.min*n.categoryPercentage,l=n.barPercentage):(a=r*i,l=1),{chunk:a/i,ratio:l,start:t.pixels[e]-a/2}}function gce(e,t,n,i){const r=t.pixels,a=r[e];let l=e>0?r[e-1]:null,h=e<r.length-1?r[e+1]:null;const s=n.categoryPercentage;l===null&&(l=a-(h===null?t.end-t.start:h-a)),h===null&&(h=a+a-l);const p=a-(a-Math.min(l,h))/2*s;return{chunk:Math.abs(h-l)/2*s/i,ratio:n.barPercentage,start:p}}function vce(e,t,n,i){const r=n.parse(e[0],i),a=n.parse(e[1],i),l=Math.min(r,a),h=Math.max(r,a);let s=l,p=h;Math.abs(l)>Math.abs(h)&&(s=h,p=l),t[n.axis]=p,t._custom={barStart:s,barEnd:p,start:r,end:a,min:l,max:h}}function Z$(e,t,n,i){return cs(e)?vce(e,t,n,i):t[n.axis]=n.parse(e,i),t}function lB(e,t,n,i){const r=e.iScale,a=e.vScale,l=r.getLabels(),h=r===a,s=[];let p,_,x,T;for(p=n,_=n+i;p<_;++p)T=t[p],x={},x[r.axis]=h||r.parse(l[p],p),s.push(Z$(T,x,a,p));return s}function xC(e){return e&&e.barStart!==void 0&&e.barEnd!==void 0}function _ce(e,t,n){return e!==0?id(e):(t.isHorizontal()?1:-1)*(t.min>=n?1:-1)}function yce(e){let t,n,i,r,a;return e.horizontal?(t=e.base>e.x,n="left",i="right"):(t=e.base<e.y,n="bottom",i="top"),t?(r="end",a="start"):(r="start",a="end"),{start:n,end:i,reverse:t,top:r,bottom:a}}function bce(e,t,n,i){let r=t.borderSkipped;const a={};if(!r){e.borderSkipped=a;return}if(r===!0){e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:l,end:h,reverse:s,top:p,bottom:_}=yce(e);r==="middle"&&n&&(e.enableBorderRadius=!0,(n._top||0)===i?r=p:(n._bottom||0)===i?r=_:(a[cB(_,l,h,s)]=!0,r=p)),a[cB(r,l,h,s)]=!0,e.borderSkipped=a}function cB(e,t,n,i){return i?(e=xce(e,t,n),e=uB(e,n,t)):e=uB(e,t,n),e}function xce(e,t,n){return e===t?n:e===n?t:e}function uB(e,t,n){return e==="start"?t:e==="end"?n:e}function wce(e,{inflateAmount:t},n){e.inflateAmount=t==="auto"?n===1?.33:0:t}class Tce extends ym{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,n,i,r){return lB(t,n,i,r)}parseArrayData(t,n,i,r){return lB(t,n,i,r)}parseObjectData(t,n,i,r){const{iScale:a,vScale:l}=t,{xAxisKey:h="x",yAxisKey:s="y"}=this._parsing,p=a.axis==="x"?h:s,_=l.axis==="x"?h:s,x=[];let T,k,P,M;for(T=i,k=i+r;T<k;++T)M=n[T],P={},P[a.axis]=a.parse(cm(M,p),T),x.push(Z$(cm(M,_),P,l,T));return x}updateRangeFromParsed(t,n,i,r){super.updateRangeFromParsed(t,n,i,r);const a=i._custom;a&&n===this._cachedMeta.vScale&&(t.min=Math.min(t.min,a.min),t.max=Math.max(t.max,a.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const n=this._cachedMeta,{iScale:i,vScale:r}=n,a=this.getParsed(t),l=a._custom,h=xC(l)?"["+l.start+", "+l.end+"]":""+r.getLabelForValue(a[r.axis]);return{label:""+i.getLabelForValue(a[i.axis]),value:h}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,t)}updateElements(t,n,i,r){const a=r==="reset",{index:l,_cachedMeta:{vScale:h}}=this,s=h.getBasePixel(),p=h.isHorizontal(),_=this._getRuler(),{sharedOptions:x,includeOptions:T}=this._getSharedOptions(n,r);for(let k=n;k<n+i;k++){const P=this.getParsed(k),M=a||Ri(P[h.axis])?{base:s,head:s}:this._calculateBarValuePixels(k),R=this._calculateBarIndexPixels(k,_),F=(P._stacks||{})[h.axis],B={horizontal:p,base:M.base,enableBorderRadius:!F||xC(P._custom)||l===F._top||l===F._bottom,x:p?M.head:R.center,y:p?R.center:M.head,height:p?R.size:Math.abs(M.size),width:p?Math.abs(M.size):R.size};T&&(B.options=x||this.resolveDataElementOptions(k,t[k].active?"active":r));const H=B.options||t[k].options;bce(B,H,F,l),wce(B,H,_.ratio),this.updateElement(t[k],k,B,r)}}_getStacks(t,n){const{iScale:i}=this._cachedMeta,r=i.getMatchingVisibleMetas(this._type).filter(_=>_.controller.options.grouped),a=i.options.stacked,l=[],h=this._cachedMeta.controller.getParsed(n),s=h&&h[i.axis],p=_=>{const x=_._parsed.find(k=>k[i.axis]===s),T=x&&x[_.vScale.axis];if(Ri(T)||isNaN(T))return!0};for(const _ of r)if(!(n!==void 0&&p(_))&&((a===!1||l.indexOf(_.stack)===-1||a===void 0&&_.stack===void 0)&&l.push(_.stack),_.index===t))break;return l.length||l.push(void 0),l}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const t=this.chart.scales,n=this.chart.options.indexAxis;return Object.keys(t).filter(i=>t[i].axis===n).shift()}_getAxis(){const t={},n=this.getFirstScaleIdForIndexAxis();for(const i of this.chart.data.datasets)t[yi(this.chart.options.indexAxis==="x"?i.xAxisID:i.yAxisID,n)]=!0;return Object.keys(t)}_getStackIndex(t,n,i){const r=this._getStacks(t,i),a=n!==void 0?r.indexOf(n):-1;return a===-1?r.length-1:a}_getRuler(){const t=this.options,n=this._cachedMeta,i=n.iScale,r=[];let a,l;for(a=0,l=n.data.length;a<l;++a)r.push(i.getPixelForValue(this.getParsed(a)[i.axis],a));const h=t.barThickness;return{min:h||mce(n),pixels:r,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:t.grouped,ratio:h?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:n,_stacked:i,index:r},options:{base:a,minBarLength:l}}=this,h=a||0,s=this.getParsed(t),p=s._custom,_=xC(p);let x=s[n.axis],T=0,k=i?this.applyStack(n,s,i):x,P,M;k!==x&&(T=k-x,k=x),_&&(x=p.barStart,k=p.barEnd-p.barStart,x!==0&&id(x)!==id(p.barEnd)&&(T=0),T+=x);const R=!Ri(a)&&!_?a:T;let F=n.getPixelForValue(R);if(this.chart.getDataVisibility(t)?P=n.getPixelForValue(T+k):P=F,M=P-F,Math.abs(M)<l){M=_ce(M,n,h)*l,x===h&&(F-=M/2);const B=n.getPixelForDecimal(0),H=n.getPixelForDecimal(1),G=Math.min(B,H),ee=Math.max(B,H);F=Math.max(Math.min(F,ee),G),P=F+M,i&&!_&&(s._stacks[n.axis]._visualValues[r]=n.getValueForPixel(P)-n.getValueForPixel(F))}if(F===n.getPixelForValue(h)){const B=id(M)*n.getLineWidthForValue(h)/2;F+=B,M-=B}return{size:M,base:F,head:P,center:P+M/2}}_calculateBarIndexPixels(t,n){const i=n.scale,r=this.options,a=r.skipNull,l=yi(r.maxBarThickness,1/0);let h,s;const p=this._getAxisCount();if(n.grouped){const _=a?this._getStackCount(t):n.stackCount,x=r.barThickness==="flex"?gce(t,n,r,_*p):pce(t,n,r,_*p),T=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,k=this._getAxis().indexOf(yi(T,this.getFirstScaleIdForIndexAxis())),P=this._getStackIndex(this.index,this._cachedMeta.stack,a?t:void 0)+k;h=x.start+x.chunk*P+x.chunk/2,s=Math.min(l,x.chunk*x.ratio)}else h=i.getPixelForValue(this.getParsed(t)[i.axis],t),s=Math.min(l,n.min*n.ratio);return{base:h-s/2,head:h+s/2,center:h,size:s}}draw(){const t=this._cachedMeta,n=t.vScale,i=t.data,r=i.length;let a=0;for(;a<r;++a)this.getParsed(a)[n.axis]!==null&&!i[a].hidden&&i[a].draw(this._ctx)}}class Sce extends ym{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,n,i,r){const a=super.parsePrimitiveData(t,n,i,r);for(let l=0;l<a.length;l++)a[l]._custom=this.resolveDataElementOptions(l+i).radius;return a}parseArrayData(t,n,i,r){const a=super.parseArrayData(t,n,i,r);for(let l=0;l<a.length;l++){const h=n[i+l];a[l]._custom=yi(h[2],this.resolveDataElementOptions(l+i).radius)}return a}parseObjectData(t,n,i,r){const a=super.parseObjectData(t,n,i,r);for(let l=0;l<a.length;l++){const h=n[i+l];a[l]._custom=yi(h&&h.r&&+h.r,this.resolveDataElementOptions(l+i).radius)}return a}getMaxOverflow(){const t=this._cachedMeta.data;let n=0;for(let i=t.length-1;i>=0;--i)n=Math.max(n,t[i].size(this.resolveDataElementOptions(i))/2);return n>0&&n}getLabelAndValue(t){const n=this._cachedMeta,i=this.chart.data.labels||[],{xScale:r,yScale:a}=n,l=this.getParsed(t),h=r.getLabelForValue(l.x),s=a.getLabelForValue(l.y),p=l._custom;return{label:i[t]||"",value:"("+h+", "+s+(p?", "+p:"")+")"}}update(t){const n=this._cachedMeta.data;this.updateElements(n,0,n.length,t)}updateElements(t,n,i,r){const a=r==="reset",{iScale:l,vScale:h}=this._cachedMeta,{sharedOptions:s,includeOptions:p}=this._getSharedOptions(n,r),_=l.axis,x=h.axis;for(let T=n;T<n+i;T++){const k=t[T],P=!a&&this.getParsed(T),M={},R=M[_]=a?l.getPixelForDecimal(.5):l.getPixelForValue(P[_]),F=M[x]=a?h.getBasePixel():h.getPixelForValue(P[x]);M.skip=isNaN(R)||isNaN(F),p&&(M.options=s||this.resolveDataElementOptions(T,k.active?"active":r),a&&(M.options.radius=0)),this.updateElement(k,T,M,r)}}resolveDataElementOptions(t,n){const i=this.getParsed(t);let r=super.resolveDataElementOptions(t,n);r.$shared&&(r=Object.assign({},r,{$shared:!1}));const a=r.radius;return n!=="active"&&(r.radius=0),r.radius+=yi(i&&i._custom,a),r}}function Ece(e,t,n){let i=1,r=1,a=0,l=0;if(t<Jr){const h=e,s=h+t,p=Math.cos(h),_=Math.sin(h),x=Math.cos(s),T=Math.sin(s),k=(H,G,ee)=>n0(H,h,s,!0)?1:Math.max(G,G*n,ee,ee*n),P=(H,G,ee)=>n0(H,h,s,!0)?-1:Math.min(G,G*n,ee,ee*n),M=k(0,p,x),R=k(Hs,_,T),F=P(ur,p,x),B=P(ur+Hs,_,T);i=(M-F)/2,r=(R-B)/2,a=-(M+F)/2,l=-(R+B)/2}return{ratioX:i,ratioY:r,offsetX:a,offsetY:l}}class eM extends ym{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const n=t.data,{labels:{pointStyle:i,textAlign:r,color:a,useBorderRadius:l,borderRadius:h}}=t.legend.options;return n.labels.length&&n.datasets.length?n.labels.map((s,p)=>{const x=t.getDatasetMeta(0).controller.getStyle(p);return{text:s,fillStyle:x.backgroundColor,fontColor:a,hidden:!t.getDataVisibility(p),lineDash:x.borderDash,lineDashOffset:x.borderDashOffset,lineJoin:x.borderJoinStyle,lineWidth:x.borderWidth,strokeStyle:x.borderColor,textAlign:r,pointStyle:i,borderRadius:l&&(h||x.borderRadius),index:p}}):[]}},onClick(t,n,i){i.chart.toggleDataVisibility(n.index),i.chart.update()}}}};constructor(t,n){super(t,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,n){const i=this.getDataset().data,r=this._cachedMeta;if(this._parsing===!1)r._parsed=i;else{let a=s=>+i[s];if(Fi(i[t])){const{key:s="value"}=this._parsing;a=p=>+cm(i[p],s)}let l,h;for(l=t,h=t+n;l<h;++l)r._parsed[l]=a(l)}}_getRotation(){return du(this.options.rotation-90)}_getCircumference(){return du(this.options.circumference)}_getRotationExtents(){let t=Jr,n=-Jr;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const r=this.chart.getDatasetMeta(i).controller,a=r._getRotation(),l=r._getCircumference();t=Math.min(t,a),n=Math.max(n,a+l)}return{rotation:t,circumference:n-t}}update(t){const n=this.chart,{chartArea:i}=n,r=this._cachedMeta,a=r.data,l=this.getMaxBorderWidth()+this.getMaxOffset(a)+this.options.spacing,h=Math.max((Math.min(i.width,i.height)-l)/2,0),s=Math.min(Oae(this.options.cutout,h),1),p=this._getRingWeight(this.index),{circumference:_,rotation:x}=this._getRotationExtents(),{ratioX:T,ratioY:k,offsetX:P,offsetY:M}=Ece(x,_,s),R=(i.width-l)/T,F=(i.height-l)/k,B=Math.max(Math.min(R,F)/2,0),H=S$(this.options.radius,B),G=Math.max(H*s,0),ee=(H-G)/this._getVisibleDatasetWeightTotal();this.offsetX=P*H,this.offsetY=M*H,r.total=this.calculateTotal(),this.outerRadius=H-ee*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-ee*p,0),this.updateElements(a,0,a.length,t)}_circumference(t,n){const i=this.options,r=this._cachedMeta,a=this._getCircumference();return n&&i.animation.animateRotate||!this.chart.getDataVisibility(t)||r._parsed[t]===null||r.data[t].hidden?0:this.calculateCircumference(r._parsed[t]*a/Jr)}updateElements(t,n,i,r){const a=r==="reset",l=this.chart,h=l.chartArea,p=l.options.animation,_=(h.left+h.right)/2,x=(h.top+h.bottom)/2,T=a&&p.animateScale,k=T?0:this.innerRadius,P=T?0:this.outerRadius,{sharedOptions:M,includeOptions:R}=this._getSharedOptions(n,r);let F=this._getRotation(),B;for(B=0;B<n;++B)F+=this._circumference(B,a);for(B=n;B<n+i;++B){const H=this._circumference(B,a),G=t[B],ee={x:_+this.offsetX,y:x+this.offsetY,startAngle:F,endAngle:F+H,circumference:H,outerRadius:P,innerRadius:k};R&&(ee.options=M||this.resolveDataElementOptions(B,G.active?"active":r)),F+=H,this.updateElement(G,B,ee,r)}}calculateTotal(){const t=this._cachedMeta,n=t.data;let i=0,r;for(r=0;r<n.length;r++){const a=t._parsed[r];a!==null&&!isNaN(a)&&this.chart.getDataVisibility(r)&&!n[r].hidden&&(i+=Math.abs(a))}return i}calculateCircumference(t){const n=this._cachedMeta.total;return n>0&&!isNaN(t)?Jr*(Math.abs(t)/n):0}getLabelAndValue(t){const n=this._cachedMeta,i=this.chart,r=i.data.labels||[],a=H0(n._parsed[t],i.options.locale);return{label:r[t]||"",value:a}}getMaxBorderWidth(t){let n=0;const i=this.chart;let r,a,l,h,s;if(!t){for(r=0,a=i.data.datasets.length;r<a;++r)if(i.isDatasetVisible(r)){l=i.getDatasetMeta(r),t=l.data,h=l.controller;break}}if(!t)return 0;for(r=0,a=t.length;r<a;++r)s=h.resolveDataElementOptions(r),s.borderAlign!=="inner"&&(n=Math.max(n,s.borderWidth||0,s.hoverBorderWidth||0));return n}getMaxOffset(t){let n=0;for(let i=0,r=t.length;i<r;++i){const a=this.resolveDataElementOptions(i);n=Math.max(n,a.offset||0,a.hoverOffset||0)}return n}_getRingWeightOffset(t){let n=0;for(let i=0;i<t;++i)this.chart.isDatasetVisible(i)&&(n+=this._getRingWeight(i));return n}_getRingWeight(t){return Math.max(yi(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class Cce extends ym{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const n=this._cachedMeta,{dataset:i,data:r=[],_dataset:a}=n,l=this.chart._animationsDisabled;let{start:h,count:s}=D$(n,r,l);this._drawStart=h,this._drawCount=s,L$(n)&&(h=0,s=r.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!a._decimated,i.points=r;const p=this.resolveDatasetElementOptions(t);this.options.showLine||(p.borderWidth=0),p.segment=this.options.segment,this.updateElement(i,void 0,{animated:!l,options:p},t),this.updateElements(r,h,s,t)}updateElements(t,n,i,r){const a=r==="reset",{iScale:l,vScale:h,_stacked:s,_dataset:p}=this._cachedMeta,{sharedOptions:_,includeOptions:x}=this._getSharedOptions(n,r),T=l.axis,k=h.axis,{spanGaps:P,segment:M}=this.options,R=d_(P)?P:Number.POSITIVE_INFINITY,F=this.chart._animationsDisabled||a||r==="none",B=n+i,H=t.length;let G=n>0&&this.getParsed(n-1);for(let ee=0;ee<H;++ee){const ie=t[ee],J=F?ie:{};if(ee<n||ee>=B){J.skip=!0;continue}const $=this.getParsed(ee),W=Ri($[k]),X=J[T]=l.getPixelForValue($[T],ee),re=J[k]=a||W?h.getBasePixel():h.getPixelForValue(s?this.applyStack(h,$,s):$[k],ee);J.skip=isNaN(X)||isNaN(re)||W,J.stop=ee>0&&Math.abs($[T]-G[T])>R,M&&(J.parsed=$,J.raw=p.data[ee]),x&&(J.options=_||this.resolveDataElementOptions(ee,ie.active?"active":r)),F||this.updateElement(ie,ee,J,r),G=$}}getMaxOverflow(){const t=this._cachedMeta,n=t.dataset,i=n.options&&n.options.borderWidth||0,r=t.data||[];if(!r.length)return i;const a=r[0].size(this.resolveDataElementOptions(0)),l=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(i,a,l)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}class J$ extends ym{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const n=t.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:i,color:r}}=t.legend.options;return n.labels.map((a,l)=>{const s=t.getDatasetMeta(0).controller.getStyle(l);return{text:a,fillStyle:s.backgroundColor,strokeStyle:s.borderColor,fontColor:r,lineWidth:s.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(l),index:l}})}return[]}},onClick(t,n,i){i.chart.toggleDataVisibility(n.index),i.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(t,n){super(t,n),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const n=this._cachedMeta,i=this.chart,r=i.data.labels||[],a=H0(n._parsed[t].r,i.options.locale);return{label:r[t]||"",value:a}}parseObjectData(t,n,i,r){return U$.bind(this)(t,n,i,r)}update(t){const n=this._cachedMeta.data;this._updateRadius(),this.updateElements(n,0,n.length,t)}getMinMax(){const t=this._cachedMeta,n={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((i,r)=>{const a=this.getParsed(r).r;!isNaN(a)&&this.chart.getDataVisibility(r)&&(a<n.min&&(n.min=a),a>n.max&&(n.max=a))}),n}_updateRadius(){const t=this.chart,n=t.chartArea,i=t.options,r=Math.min(n.right-n.left,n.bottom-n.top),a=Math.max(r/2,0),l=Math.max(i.cutoutPercentage?a/100*i.cutoutPercentage:1,0),h=(a-l)/t.getVisibleDatasetCount();this.outerRadius=a-h*this.index,this.innerRadius=this.outerRadius-h}updateElements(t,n,i,r){const a=r==="reset",l=this.chart,s=l.options.animation,p=this._cachedMeta.rScale,_=p.xCenter,x=p.yCenter,T=p.getIndexAngle(0)-.5*ur;let k=T,P;const M=360/this.countVisibleElements();for(P=0;P<n;++P)k+=this._computeAngle(P,r,M);for(P=n;P<n+i;P++){const R=t[P];let F=k,B=k+this._computeAngle(P,r,M),H=l.getDataVisibility(P)?p.getDistanceFromCenterForValue(this.getParsed(P).r):0;k=B,a&&(s.animateScale&&(H=0),s.animateRotate&&(F=B=T));const G={x:_,y:x,innerRadius:0,outerRadius:H,startAngle:F,endAngle:B,options:this.resolveDataElementOptions(P,R.active?"active":r)};this.updateElement(R,P,G,r)}}countVisibleElements(){const t=this._cachedMeta;let n=0;return t.data.forEach((i,r)=>{!isNaN(this.getParsed(r).r)&&this.chart.getDataVisibility(r)&&n++}),n}_computeAngle(t,n,i){return this.chart.getDataVisibility(t)?du(this.resolveDataElementOptions(t,n).angle||i):0}}class kce extends eM{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}class Ice extends ym{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(t){const n=this._cachedMeta.vScale,i=this.getParsed(t);return{label:n.getLabels()[t],value:""+n.getLabelForValue(i[n.axis])}}parseObjectData(t,n,i,r){return U$.bind(this)(t,n,i,r)}update(t){const n=this._cachedMeta,i=n.dataset,r=n.data||[],a=n.iScale.getLabels();if(i.points=r,t!=="resize"){const l=this.resolveDatasetElementOptions(t);this.options.showLine||(l.borderWidth=0);const h={_loop:!0,_fullLoop:a.length===r.length,options:l};this.updateElement(i,void 0,h,t)}this.updateElements(r,0,r.length,t)}updateElements(t,n,i,r){const a=this._cachedMeta.rScale,l=r==="reset";for(let h=n;h<n+i;h++){const s=t[h],p=this.resolveDataElementOptions(h,s.active?"active":r),_=a.getPointPositionForValue(h,this.getParsed(h).r),x=l?a.xCenter:_.x,T=l?a.yCenter:_.y,k={x,y:T,angle:_.angle,skip:isNaN(x)||isNaN(T),options:p};this.updateElement(s,h,k,r)}}}class Ace extends ym{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(t){const n=this._cachedMeta,i=this.chart.data.labels||[],{xScale:r,yScale:a}=n,l=this.getParsed(t),h=r.getLabelForValue(l.x),s=a.getLabelForValue(l.y);return{label:i[t]||"",value:"("+h+", "+s+")"}}update(t){const n=this._cachedMeta,{data:i=[]}=n,r=this.chart._animationsDisabled;let{start:a,count:l}=D$(n,i,r);if(this._drawStart=a,this._drawCount=l,L$(n)&&(a=0,l=i.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:h,_dataset:s}=n;h._chart=this.chart,h._datasetIndex=this.index,h._decimated=!!s._decimated,h.points=i;const p=this.resolveDatasetElementOptions(t);p.segment=this.options.segment,this.updateElement(h,void 0,{animated:!r,options:p},t)}else this.datasetElementType&&(delete n.dataset,this.datasetElementType=!1);this.updateElements(i,a,l,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,n,i,r){const a=r==="reset",{iScale:l,vScale:h,_stacked:s,_dataset:p}=this._cachedMeta,_=this.resolveDataElementOptions(n,r),x=this.getSharedOptions(_),T=this.includeOptions(r,x),k=l.axis,P=h.axis,{spanGaps:M,segment:R}=this.options,F=d_(M)?M:Number.POSITIVE_INFINITY,B=this.chart._animationsDisabled||a||r==="none";let H=n>0&&this.getParsed(n-1);for(let G=n;G<n+i;++G){const ee=t[G],ie=this.getParsed(G),J=B?ee:{},$=Ri(ie[P]),W=J[k]=l.getPixelForValue(ie[k],G),X=J[P]=a||$?h.getBasePixel():h.getPixelForValue(s?this.applyStack(h,ie,s):ie[P],G);J.skip=isNaN(W)||isNaN(X)||$,J.stop=G>0&&Math.abs(ie[k]-H[k])>F,R&&(J.parsed=ie,J.raw=p.data[G]),T&&(J.options=x||this.resolveDataElementOptions(G,ee.active?"active":r)),B||this.updateElement(ee,G,J,r),H=ie}this.updateSharedOptions(x,r,_)}getMaxOverflow(){const t=this._cachedMeta,n=t.data||[];if(!this.options.showLine){let h=0;for(let s=n.length-1;s>=0;--s)h=Math.max(h,n[s].size(this.resolveDataElementOptions(s))/2);return h>0&&h}const i=t.dataset,r=i.options&&i.options.borderWidth||0;if(!n.length)return r;const a=n[0].size(this.resolveDataElementOptions(0)),l=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(r,a,l)/2}}var Pce=Object.freeze({__proto__:null,BarController:Tce,BubbleController:Sce,DoughnutController:eM,LineController:Cce,PieController:kce,PolarAreaController:J$,RadarController:Ice,ScatterController:Ace});function dp(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class tM{static override(t){Object.assign(tM.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return dp()}parse(){return dp()}format(){return dp()}add(){return dp()}diff(){return dp()}startOf(){return dp()}endOf(){return dp()}}var Mce={_date:tM};function Dce(e,t,n,i){const{controller:r,data:a,_sorted:l}=e,h=r._cachedMeta.iScale,s=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(h&&t===h.axis&&t!=="r"&&l&&a.length){const p=h._reversePixels?Kae:dh;if(i){if(r._sharedOptions){const _=a[0],x=typeof _.getRange=="function"&&_.getRange(t);if(x){const T=p(a,t,n-x),k=p(a,t,n+x);return{lo:T.lo,hi:k.hi}}}}else{const _=p(a,t,n);if(s){const{vScale:x}=r._cachedMeta,{_parsed:T}=e,k=T.slice(0,_.lo+1).reverse().findIndex(M=>!Ri(M[x.axis]));_.lo-=Math.max(0,k);const P=T.slice(_.hi).findIndex(M=>!Ri(M[x.axis]));_.hi+=Math.max(0,P)}return _}}return{lo:0,hi:a.length-1}}function XT(e,t,n,i,r){const a=e.getSortedVisibleDatasetMetas(),l=n[t];for(let h=0,s=a.length;h<s;++h){const{index:p,data:_}=a[h],{lo:x,hi:T}=Dce(a[h],t,l,r);for(let k=x;k<=T;++k){const P=_[k];P.skip||i(P,p,k)}}}function Lce(e){const t=e.indexOf("x")!==-1,n=e.indexOf("y")!==-1;return function(i,r){const a=t?Math.abs(i.x-r.x):0,l=n?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(a,2)+Math.pow(l,2))}}function wC(e,t,n,i,r){const a=[];return!r&&!e.isPointInArea(t)||XT(e,n,t,function(h,s,p){!r&&!hh(h,e.chartArea,0)||h.inRange(t.x,t.y,i)&&a.push({element:h,datasetIndex:s,index:p})},!0),a}function Rce(e,t,n,i){let r=[];function a(l,h,s){const{startAngle:p,endAngle:_}=l.getProps(["startAngle","endAngle"],i),{angle:x}=k$(l,{x:t.x,y:t.y});n0(x,p,_)&&r.push({element:l,datasetIndex:h,index:s})}return XT(e,n,t,a),r}function Oce(e,t,n,i,r,a){let l=[];const h=Lce(n);let s=Number.POSITIVE_INFINITY;function p(_,x,T){const k=_.inRange(t.x,t.y,r);if(i&&!k)return;const P=_.getCenterPoint(r);if(!(!!a||e.isPointInArea(P))&&!k)return;const R=h(t,P);R<s?(l=[{element:_,datasetIndex:x,index:T}],s=R):R===s&&l.push({element:_,datasetIndex:x,index:T})}return XT(e,n,t,p),l}function TC(e,t,n,i,r,a){return!a&&!e.isPointInArea(t)?[]:n==="r"&&!i?Rce(e,t,n,r):Oce(e,t,n,i,r,a)}function dB(e,t,n,i,r){const a=[],l=n==="x"?"inXRange":"inYRange";let h=!1;return XT(e,n,t,(s,p,_)=>{s[l]&&s[l](t[n],r)&&(a.push({element:s,datasetIndex:p,index:_}),h=h||s.inRange(t.x,t.y,r))}),i&&!h?[]:a}var Vce={modes:{index(e,t,n,i){const r=vp(t,e),a=n.axis||"x",l=n.includeInvisible||!1,h=n.intersect?wC(e,r,a,i,l):TC(e,r,a,!1,i,l),s=[];return h.length?(e.getSortedVisibleDatasetMetas().forEach(p=>{const _=h[0].index,x=p.data[_];x&&!x.skip&&s.push({element:x,datasetIndex:p.index,index:_})}),s):[]},dataset(e,t,n,i){const r=vp(t,e),a=n.axis||"xy",l=n.includeInvisible||!1;let h=n.intersect?wC(e,r,a,i,l):TC(e,r,a,!1,i,l);if(h.length>0){const s=h[0].datasetIndex,p=e.getDatasetMeta(s).data;h=[];for(let _=0;_<p.length;++_)h.push({element:p[_],datasetIndex:s,index:_})}return h},point(e,t,n,i){const r=vp(t,e),a=n.axis||"xy",l=n.includeInvisible||!1;return wC(e,r,a,i,l)},nearest(e,t,n,i){const r=vp(t,e),a=n.axis||"xy",l=n.includeInvisible||!1;return TC(e,r,a,n.intersect,i,l)},x(e,t,n,i){const r=vp(t,e);return dB(e,r,"x",n.intersect,i)},y(e,t,n,i){const r=vp(t,e);return dB(e,r,"y",n.intersect,i)}}};const Q$=["left","top","right","bottom"];function My(e,t){return e.filter(n=>n.pos===t)}function hB(e,t){return e.filter(n=>Q$.indexOf(n.pos)===-1&&n.box.axis===t)}function Dy(e,t){return e.sort((n,i)=>{const r=t?i:n,a=t?n:i;return r.weight===a.weight?r.index-a.index:r.weight-a.weight})}function Bce(e){const t=[];let n,i,r,a,l,h;for(n=0,i=(e||[]).length;n<i;++n)r=e[n],{position:a,options:{stack:l,stackWeight:h=1}}=r,t.push({index:n,box:r,pos:a,horizontal:r.isHorizontal(),weight:r.weight,stack:l&&a+l,stackWeight:h});return t}function Fce(e){const t={};for(const n of e){const{stack:i,pos:r,stackWeight:a}=n;if(!i||!Q$.includes(r))continue;const l=t[i]||(t[i]={count:0,placed:0,weight:0,size:0});l.count++,l.weight+=a}return t}function zce(e,t){const n=Fce(e),{vBoxMaxWidth:i,hBoxMaxHeight:r}=t;let a,l,h;for(a=0,l=e.length;a<l;++a){h=e[a];const{fullSize:s}=h.box,p=n[h.stack],_=p&&h.stackWeight/p.weight;h.horizontal?(h.width=_?_*i:s&&t.availableWidth,h.height=r):(h.width=i,h.height=_?_*r:s&&t.availableHeight)}return n}function Nce(e){const t=Bce(e),n=Dy(t.filter(p=>p.box.fullSize),!0),i=Dy(My(t,"left"),!0),r=Dy(My(t,"right")),a=Dy(My(t,"top"),!0),l=Dy(My(t,"bottom")),h=hB(t,"x"),s=hB(t,"y");return{fullSize:n,leftAndTop:i.concat(a),rightAndBottom:r.concat(s).concat(l).concat(h),chartArea:My(t,"chartArea"),vertical:i.concat(r).concat(s),horizontal:a.concat(l).concat(h)}}function fB(e,t,n,i){return Math.max(e[n],t[n])+Math.max(e[i],t[i])}function ej(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function Uce(e,t,n,i){const{pos:r,box:a}=n,l=e.maxPadding;if(!Fi(r)){n.size&&(e[r]-=n.size);const x=i[n.stack]||{size:0,count:1};x.size=Math.max(x.size,n.horizontal?a.height:a.width),n.size=x.size/x.count,e[r]+=n.size}a.getPadding&&ej(l,a.getPadding());const h=Math.max(0,t.outerWidth-fB(l,e,"left","right")),s=Math.max(0,t.outerHeight-fB(l,e,"top","bottom")),p=h!==e.w,_=s!==e.h;return e.w=h,e.h=s,n.horizontal?{same:p,other:_}:{same:_,other:p}}function $ce(e){const t=e.maxPadding;function n(i){const r=Math.max(t[i]-e[i],0);return e[i]+=r,r}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}function jce(e,t){const n=t.maxPadding;function i(r){const a={left:0,top:0,right:0,bottom:0};return r.forEach(l=>{a[l]=Math.max(t[l],n[l])}),a}return i(e?["left","right"]:["top","bottom"])}function Ky(e,t,n,i){const r=[];let a,l,h,s,p,_;for(a=0,l=e.length,p=0;a<l;++a){h=e[a],s=h.box,s.update(h.width||t.w,h.height||t.h,jce(h.horizontal,t));const{same:x,other:T}=Uce(t,n,h,i);p|=x&&r.length,_=_||T,s.fullSize||r.push(h)}return p&&Ky(r,t,n,i)||_}function iw(e,t,n,i,r){e.top=n,e.left=t,e.right=t+i,e.bottom=n+r,e.width=i,e.height=r}function mB(e,t,n,i){const r=n.padding;let{x:a,y:l}=t;for(const h of e){const s=h.box,p=i[h.stack]||{placed:0,weight:1},_=h.stackWeight/p.weight||1;if(h.horizontal){const x=t.w*_,T=p.size||s.height;t0(p.start)&&(l=p.start),s.fullSize?iw(s,r.left,l,n.outerWidth-r.right-r.left,T):iw(s,t.left+p.placed,l,x,T),p.start=l,p.placed+=x,l=s.bottom}else{const x=t.h*_,T=p.size||s.width;t0(p.start)&&(a=p.start),s.fullSize?iw(s,a,r.top,T,n.outerHeight-r.bottom-r.top):iw(s,a,t.top+p.placed,T,x),p.start=a,p.placed+=x,a=s.right}}t.x=a,t.y=l}var Na={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(n){t.draw(n)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;n!==-1&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,i){if(!e)return;const r=Ha(e.options.layout.padding),a=Math.max(t-r.width,0),l=Math.max(n-r.height,0),h=Nce(e.boxes),s=h.vertical,p=h.horizontal;Ir(e.boxes,M=>{typeof M.beforeLayout=="function"&&M.beforeLayout()});const _=s.reduce((M,R)=>R.box.options&&R.box.options.display===!1?M:M+1,0)||1,x=Object.freeze({outerWidth:t,outerHeight:n,padding:r,availableWidth:a,availableHeight:l,vBoxMaxWidth:a/2/_,hBoxMaxHeight:l/2}),T=Object.assign({},r);ej(T,Ha(i));const k=Object.assign({maxPadding:T,w:a,h:l,x:r.left,y:r.top},r),P=zce(s.concat(p),x);Ky(h.fullSize,k,x,P),Ky(s,k,x,P),Ky(p,k,x,P)&&Ky(s,k,x,P),$ce(k),mB(h.leftAndTop,k,x,P),k.x+=k.w,k.y+=k.h,mB(h.rightAndBottom,k,x,P),e.chartArea={left:k.left,top:k.top,right:k.left+k.w,bottom:k.top+k.h,height:k.h,width:k.w},Ir(h.chartArea,M=>{const R=M.box;Object.assign(R,e.chartArea),R.update(k.w,k.h,{left:0,top:0,right:0,bottom:0})})}};class tj{acquireContext(t,n){}releaseContext(t){return!1}addEventListener(t,n,i){}removeEventListener(t,n,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,n,i,r){return n=Math.max(0,n||t.width),i=i||t.height,{width:n,height:Math.max(0,r?Math.floor(n/r):i)}}isAttached(t){return!0}updateConfig(t){}}class Wce extends tj{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Rw="$chartjs",Hce={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},pB=e=>e===null||e==="";function Gce(e,t){const n=e.style,i=e.getAttribute("height"),r=e.getAttribute("width");if(e[Rw]={initial:{height:i,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",pB(r)){const a=J3(e,"width");a!==void 0&&(e.width=a)}if(pB(i))if(e.style.height==="")e.height=e.width/(t||2);else{const a=J3(e,"height");a!==void 0&&(e.height=a)}return e}const nj=Ule?{passive:!0}:!1;function qce(e,t,n){e&&e.addEventListener(t,n,nj)}function Kce(e,t,n){e&&e.canvas&&e.canvas.removeEventListener(t,n,nj)}function Xce(e,t){const n=Hce[e.type]||e.type,{x:i,y:r}=vp(e,t);return{type:n,chart:t,native:e,x:i!==void 0?i:null,y:r!==void 0?r:null}}function H1(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function Yce(e,t,n){const i=e.canvas,r=new MutationObserver(a=>{let l=!1;for(const h of a)l=l||H1(h.addedNodes,i),l=l&&!H1(h.removedNodes,i);l&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}function Zce(e,t,n){const i=e.canvas,r=new MutationObserver(a=>{let l=!1;for(const h of a)l=l||H1(h.removedNodes,i),l=l&&!H1(h.addedNodes,i);l&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}const r0=new Map;let gB=0;function ij(){const e=window.devicePixelRatio;e!==gB&&(gB=e,r0.forEach((t,n)=>{n.currentDevicePixelRatio!==e&&t()}))}function Jce(e,t){r0.size||window.addEventListener("resize",ij),r0.set(e,t)}function Qce(e){r0.delete(e),r0.size||window.removeEventListener("resize",ij)}function eue(e,t,n){const i=e.canvas,r=i&&QP(i);if(!r)return;const a=M$((h,s)=>{const p=r.clientWidth;n(h,s),p<r.clientWidth&&n()},window),l=new ResizeObserver(h=>{const s=h[0],p=s.contentRect.width,_=s.contentRect.height;p===0&&_===0||a(p,_)});return l.observe(r),Jce(e,a),l}function SC(e,t,n){n&&n.disconnect(),t==="resize"&&Qce(e)}function tue(e,t,n){const i=e.canvas,r=M$(a=>{e.ctx!==null&&n(Xce(a,e))},e);return qce(i,t,r),r}class nue extends tj{acquireContext(t,n){const i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(Gce(t,n),i):null}releaseContext(t){const n=t.canvas;if(!n[Rw])return!1;const i=n[Rw].initial;["height","width"].forEach(a=>{const l=i[a];Ri(l)?n.removeAttribute(a):n.setAttribute(a,l)});const r=i.style||{};return Object.keys(r).forEach(a=>{n.style[a]=r[a]}),n.width=n.width,delete n[Rw],!0}addEventListener(t,n,i){this.removeEventListener(t,n);const r=t.$proxies||(t.$proxies={}),l={attach:Yce,detach:Zce,resize:eue}[n]||tue;r[n]=l(t,n,i)}removeEventListener(t,n){const i=t.$proxies||(t.$proxies={}),r=i[n];if(!r)return;({attach:SC,detach:SC,resize:SC}[n]||Kce)(t,n,r),i[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,n,i,r){return Nle(t,n,i,r)}isAttached(t){const n=t&&QP(t);return!!(n&&n.isConnected)}}function iue(e){return!JP()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?Wce:nue}let Rh=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){const{x:n,y:i}=this.getProps(["x","y"],t);return{x:n,y:i}}hasValue(){return d_(this.x)&&d_(this.y)}getProps(t,n){const i=this.$animations;if(!n||!i)return this;const r={};return t.forEach(a=>{r[a]=i[a]&&i[a].active()?i[a]._to:this[a]}),r}};function rue(e,t){const n=e.options.ticks,i=sue(e),r=Math.min(n.maxTicksLimit||i,i),a=n.major.enabled?aue(t):[],l=a.length,h=a[0],s=a[l-1],p=[];if(l>r)return lue(t,p,a,l/r),p;const _=oue(a,t,r);if(l>0){let x,T;const k=l>1?Math.round((s-h)/(l-1)):null;for(rw(t,p,_,Ri(k)?0:h-k,h),x=0,T=l-1;x<T;x++)rw(t,p,_,a[x],a[x+1]);return rw(t,p,_,s,Ri(k)?t.length:s+k),p}return rw(t,p,_),p}function sue(e){const t=e.options.offset,n=e._tickSize(),i=e._length/n+(t?0:1),r=e._maxLength/n;return Math.floor(Math.min(i,r))}function oue(e,t,n){const i=cue(e),r=t.length/n;if(!i)return Math.max(r,1);const a=jae(i);for(let l=0,h=a.length-1;l<h;l++){const s=a[l];if(s>r)return s}return Math.max(r,1)}function aue(e){const t=[];let n,i;for(n=0,i=e.length;n<i;n++)e[n].major&&t.push(n);return t}function lue(e,t,n,i){let r=0,a=n[0],l;for(i=Math.ceil(i),l=0;l<e.length;l++)l===a&&(t.push(e[l]),r++,a=n[r*i])}function rw(e,t,n,i,r){const a=yi(i,0),l=Math.min(yi(r,e.length),e.length);let h=0,s,p,_;for(n=Math.ceil(n),r&&(s=r-i,n=s/Math.floor(s/n)),_=a;_<0;)h++,_=Math.round(a+h*n);for(p=Math.max(a,0);p<l;p++)p===_&&(t.push(e[p]),h++,_=Math.round(a+h*n))}function cue(e){const t=e.length;let n,i;if(t<2)return!1;for(i=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==i)return!1;return i}const uue=e=>e==="left"?"right":e==="right"?"left":e,vB=(e,t,n)=>t==="top"||t==="left"?e[t]+n:e[t]-n,_B=(e,t)=>Math.min(t||e,e);function yB(e,t){const n=[],i=e.length/t,r=e.length;let a=0;for(;a<r;a+=i)n.push(e[Math.floor(a)]);return n}function due(e,t,n){const i=e.ticks.length,r=Math.min(t,i-1),a=e._startPixel,l=e._endPixel,h=1e-6;let s=e.getPixelForTick(r),p;if(!(n&&(i===1?p=Math.max(s-a,l-s):t===0?p=(e.getPixelForTick(1)-s)/2:p=(s-e.getPixelForTick(r-1))/2,s+=r<t?p:-p,s<a-h||s>l+h)))return s}function hue(e,t){Ir(e,n=>{const i=n.gc,r=i.length/2;let a;if(r>t){for(a=0;a<r;++a)delete n.data[i[a]];i.splice(0,r)}})}function Ly(e){return e.drawTicks?e.tickLength:0}function bB(e,t){if(!e.display)return 0;const n=go(e.font,t),i=Ha(e.padding);return(cs(e.text)?e.text.length:1)*n.lineHeight+i.height}function fue(e,t){return _m(e,{scale:t,type:"scale"})}function mue(e,t,n){return _m(e,{tick:n,index:t,type:"tick"})}function pue(e,t,n){let i=GP(e);return(n&&t!=="right"||!n&&t==="right")&&(i=uue(i)),i}function gue(e,t,n,i){const{top:r,left:a,bottom:l,right:h,chart:s}=e,{chartArea:p,scales:_}=s;let x=0,T,k,P;const M=l-r,R=h-a;if(e.isHorizontal()){if(k=Aa(i,a,h),Fi(n)){const F=Object.keys(n)[0],B=n[F];P=_[F].getPixelForValue(B)+M-t}else n==="center"?P=(p.bottom+p.top)/2+M-t:P=vB(e,n,t);T=h-a}else{if(Fi(n)){const F=Object.keys(n)[0],B=n[F];k=_[F].getPixelForValue(B)-R+t}else n==="center"?k=(p.left+p.right)/2-R+t:k=vB(e,n,t);P=Aa(i,l,r),x=n==="left"?-Hs:Hs}return{titleX:k,titleY:P,maxWidth:T,rotation:x}}class mg extends Rh{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,n){return t}getUserBounds(){let{_userMin:t,_userMax:n,_suggestedMin:i,_suggestedMax:r}=this;return t=Yl(t,Number.POSITIVE_INFINITY),n=Yl(n,Number.NEGATIVE_INFINITY),i=Yl(i,Number.POSITIVE_INFINITY),r=Yl(r,Number.NEGATIVE_INFINITY),{min:Yl(t,i),max:Yl(n,r),minDefined:Ls(t),maxDefined:Ls(n)}}getMinMax(t){let{min:n,max:i,minDefined:r,maxDefined:a}=this.getUserBounds(),l;if(r&&a)return{min:n,max:i};const h=this.getMatchingVisibleMetas();for(let s=0,p=h.length;s<p;++s)l=h[s].controller.getMinMax(this,t),r||(n=Math.min(n,l.min)),a||(i=Math.max(i,l.max));return n=a&&n>i?i:n,i=r&&n>i?n:i,{min:Yl(n,Yl(i,n)),max:Yl(i,Yl(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Gr(this.options.beforeUpdate,[this])}update(t,n,i){const{beginAtZero:r,grace:a,ticks:l}=this.options,h=l.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=n,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=_le(this,a,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const s=h<this.ticks.length;this._convertTicksToLabels(s?yB(this.ticks,h):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),l.display&&(l.autoSkip||l.source==="auto")&&(this.ticks=rue(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),s&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,n,i;this.isHorizontal()?(n=this.left,i=this.right):(n=this.top,i=this.bottom,t=!t),this._startPixel=n,this._endPixel=i,this._reversePixels=t,this._length=i-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Gr(this.options.afterUpdate,[this])}beforeSetDimensions(){Gr(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Gr(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Gr(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Gr(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const n=this.options.ticks;let i,r,a;for(i=0,r=t.length;i<r;i++)a=t[i],a.label=Gr(n.callback,[a.value,i,t],this)}afterTickToLabelConversion(){Gr(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Gr(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,n=t.ticks,i=_B(this.ticks.length,t.ticks.maxTicksLimit),r=n.minRotation||0,a=n.maxRotation;let l=r,h,s,p;if(!this._isVisible()||!n.display||r>=a||i<=1||!this.isHorizontal()){this.labelRotation=r;return}const _=this._getLabelSizes(),x=_.widest.width,T=_.highest.height,k=Bo(this.chart.width-x,0,this.maxWidth);h=t.offset?this.maxWidth/i:k/(i-1),x+6>h&&(h=k/(i-(t.offset?.5:1)),s=this.maxHeight-Ly(t.grid)-n.padding-bB(t.title,this.chart.options.font),p=Math.sqrt(x*x+T*T),l=WP(Math.min(Math.asin(Bo((_.highest.height+6)/h,-1,1)),Math.asin(Bo(s/p,-1,1))-Math.asin(Bo(T/p,-1,1)))),l=Math.max(r,Math.min(a,l))),this.labelRotation=l}afterCalculateLabelRotation(){Gr(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Gr(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:n,options:{ticks:i,title:r,grid:a}}=this,l=this._isVisible(),h=this.isHorizontal();if(l){const s=bB(r,n.options.font);if(h?(t.width=this.maxWidth,t.height=Ly(a)+s):(t.height=this.maxHeight,t.width=Ly(a)+s),i.display&&this.ticks.length){const{first:p,last:_,widest:x,highest:T}=this._getLabelSizes(),k=i.padding*2,P=du(this.labelRotation),M=Math.cos(P),R=Math.sin(P);if(h){const F=i.mirror?0:R*x.width+M*T.height;t.height=Math.min(this.maxHeight,t.height+F+k)}else{const F=i.mirror?0:M*x.width+R*T.height;t.width=Math.min(this.maxWidth,t.width+F+k)}this._calculatePadding(p,_,R,M)}}this._handleMargins(),h?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,n,i,r){const{ticks:{align:a,padding:l},position:h}=this.options,s=this.labelRotation!==0,p=h!=="top"&&this.axis==="x";if(this.isHorizontal()){const _=this.getPixelForTick(0)-this.left,x=this.right-this.getPixelForTick(this.ticks.length-1);let T=0,k=0;s?p?(T=r*t.width,k=i*n.height):(T=i*t.height,k=r*n.width):a==="start"?k=n.width:a==="end"?T=t.width:a!=="inner"&&(T=t.width/2,k=n.width/2),this.paddingLeft=Math.max((T-_+l)*this.width/(this.width-_),0),this.paddingRight=Math.max((k-x+l)*this.width/(this.width-x),0)}else{let _=n.height/2,x=t.height/2;a==="start"?(_=0,x=t.height):a==="end"&&(_=n.height,x=0),this.paddingTop=_+l,this.paddingBottom=x+l}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Gr(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:n}=this.options;return n==="top"||n==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let n,i;for(n=0,i=t.length;n<i;n++)Ri(t[n].label)&&(t.splice(n,1),i--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const n=this.options.ticks.sampleSize;let i=this.ticks;n<i.length&&(i=yB(i,n)),this._labelSizes=t=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,n,i){const{ctx:r,_longestTextCache:a}=this,l=[],h=[],s=Math.floor(n/_B(n,i));let p=0,_=0,x,T,k,P,M,R,F,B,H,G,ee;for(x=0;x<n;x+=s){if(P=t[x].label,M=this._resolveTickFontOptions(x),r.font=R=M.string,F=a[R]=a[R]||{data:{},gc:[]},B=M.lineHeight,H=G=0,!Ri(P)&&!cs(P))H=j1(r,F.data,F.gc,H,P),G=B;else if(cs(P))for(T=0,k=P.length;T<k;++T)ee=P[T],!Ri(ee)&&!cs(ee)&&(H=j1(r,F.data,F.gc,H,ee),G+=B);l.push(H),h.push(G),p=Math.max(H,p),_=Math.max(G,_)}hue(a,n);const ie=l.indexOf(p),J=h.indexOf(_),$=W=>({width:l[W]||0,height:h[W]||0});return{first:$(0),last:$(n-1),widest:$(ie),highest:$(J),widths:l,heights:h}}getLabelForValue(t){return t}getPixelForValue(t,n){return NaN}getValueForPixel(t){}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const n=this._startPixel+t*this._length;return qae(this._alignToPixels?up(this.chart,n,0):n)}getDecimalForPixel(t){const n=(t-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:n}=this;return t<0&&n<0?n:t>0&&n>0?t:0}getContext(t){const n=this.ticks||[];if(t>=0&&t<n.length){const i=n[t];return i.$context||(i.$context=mue(this.getContext(),t,i))}return this.$context||(this.$context=fue(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,n=du(this.labelRotation),i=Math.abs(Math.cos(n)),r=Math.abs(Math.sin(n)),a=this._getLabelSizes(),l=t.autoSkipPadding||0,h=a?a.widest.width+l:0,s=a?a.highest.height+l:0;return this.isHorizontal()?s*i>h*r?h/i:s/r:s*r<h*i?s/i:h/r}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const n=this.axis,i=this.chart,r=this.options,{grid:a,position:l,border:h}=r,s=a.offset,p=this.isHorizontal(),x=this.ticks.length+(s?1:0),T=Ly(a),k=[],P=h.setContext(this.getContext()),M=P.display?P.width:0,R=M/2,F=function(Be){return up(i,Be,M)};let B,H,G,ee,ie,J,$,W,X,re,Y,Z;if(l==="top")B=F(this.bottom),J=this.bottom-T,W=B-R,re=F(t.top)+R,Z=t.bottom;else if(l==="bottom")B=F(this.top),re=t.top,Z=F(t.bottom)-R,J=B+R,W=this.top+T;else if(l==="left")B=F(this.right),ie=this.right-T,$=B-R,X=F(t.left)+R,Y=t.right;else if(l==="right")B=F(this.left),X=t.left,Y=F(t.right)-R,ie=B+R,$=this.left+T;else if(n==="x"){if(l==="center")B=F((t.top+t.bottom)/2+.5);else if(Fi(l)){const Be=Object.keys(l)[0],nt=l[Be];B=F(this.chart.scales[Be].getPixelForValue(nt))}re=t.top,Z=t.bottom,J=B+R,W=J+T}else if(n==="y"){if(l==="center")B=F((t.left+t.right)/2);else if(Fi(l)){const Be=Object.keys(l)[0],nt=l[Be];B=F(this.chart.scales[Be].getPixelForValue(nt))}ie=B-R,$=ie-T,X=t.left,Y=t.right}const ge=yi(r.ticks.maxTicksLimit,x),be=Math.max(1,Math.ceil(x/ge));for(H=0;H<x;H+=be){const Be=this.getContext(H),nt=a.setContext(Be),We=h.setContext(Be),Le=nt.lineWidth,Ze=nt.color,Ee=We.dash||[],Je=We.dashOffset,it=nt.tickWidth,vt=nt.tickColor,mt=nt.tickBorderDash||[],ot=nt.tickBorderDashOffset;G=due(this,H,s),G!==void 0&&(ee=up(i,G,Le),p?ie=$=X=Y=ee:J=W=re=Z=ee,k.push({tx1:ie,ty1:J,tx2:$,ty2:W,x1:X,y1:re,x2:Y,y2:Z,width:Le,color:Ze,borderDash:Ee,borderDashOffset:Je,tickWidth:it,tickColor:vt,tickBorderDash:mt,tickBorderDashOffset:ot}))}return this._ticksLength=x,this._borderValue=B,k}_computeLabelItems(t){const n=this.axis,i=this.options,{position:r,ticks:a}=i,l=this.isHorizontal(),h=this.ticks,{align:s,crossAlign:p,padding:_,mirror:x}=a,T=Ly(i.grid),k=T+_,P=x?-_:k,M=-du(this.labelRotation),R=[];let F,B,H,G,ee,ie,J,$,W,X,re,Y,Z="middle";if(r==="top")ie=this.bottom-P,J=this._getXAxisLabelAlignment();else if(r==="bottom")ie=this.top+P,J=this._getXAxisLabelAlignment();else if(r==="left"){const be=this._getYAxisLabelAlignment(T);J=be.textAlign,ee=be.x}else if(r==="right"){const be=this._getYAxisLabelAlignment(T);J=be.textAlign,ee=be.x}else if(n==="x"){if(r==="center")ie=(t.top+t.bottom)/2+k;else if(Fi(r)){const be=Object.keys(r)[0],Be=r[be];ie=this.chart.scales[be].getPixelForValue(Be)+k}J=this._getXAxisLabelAlignment()}else if(n==="y"){if(r==="center")ee=(t.left+t.right)/2-k;else if(Fi(r)){const be=Object.keys(r)[0],Be=r[be];ee=this.chart.scales[be].getPixelForValue(Be)}J=this._getYAxisLabelAlignment(T).textAlign}n==="y"&&(s==="start"?Z="top":s==="end"&&(Z="bottom"));const ge=this._getLabelSizes();for(F=0,B=h.length;F<B;++F){H=h[F],G=H.label;const be=a.setContext(this.getContext(F));$=this.getPixelForTick(F)+a.labelOffset,W=this._resolveTickFontOptions(F),X=W.lineHeight,re=cs(G)?G.length:1;const Be=re/2,nt=be.color,We=be.textStrokeColor,Le=be.textStrokeWidth;let Ze=J;l?(ee=$,J==="inner"&&(F===B-1?Ze=this.options.reverse?"left":"right":F===0?Ze=this.options.reverse?"right":"left":Ze="center"),r==="top"?p==="near"||M!==0?Y=-re*X+X/2:p==="center"?Y=-ge.highest.height/2-Be*X+X:Y=-ge.highest.height+X/2:p==="near"||M!==0?Y=X/2:p==="center"?Y=ge.highest.height/2-Be*X:Y=ge.highest.height-re*X,x&&(Y*=-1),M!==0&&!be.showLabelBackdrop&&(ee+=X/2*Math.sin(M))):(ie=$,Y=(1-re)*X/2);let Ee;if(be.showLabelBackdrop){const Je=Ha(be.backdropPadding),it=ge.heights[F],vt=ge.widths[F];let mt=Y-Je.top,ot=0-Je.left;switch(Z){case"middle":mt-=it/2;break;case"bottom":mt-=it;break}switch(J){case"center":ot-=vt/2;break;case"right":ot-=vt;break;case"inner":F===B-1?ot-=vt:F>0&&(ot-=vt/2);break}Ee={left:ot,top:mt,width:vt+Je.width,height:it+Je.height,color:be.backdropColor}}R.push({label:G,font:W,textOffset:Y,options:{rotation:M,color:nt,strokeColor:We,strokeWidth:Le,textAlign:Ze,textBaseline:Z,translation:[ee,ie],backdrop:Ee}})}return R}_getXAxisLabelAlignment(){const{position:t,ticks:n}=this.options;if(-du(this.labelRotation))return t==="top"?"left":"right";let r="center";return n.align==="start"?r="left":n.align==="end"?r="right":n.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(t){const{position:n,ticks:{crossAlign:i,mirror:r,padding:a}}=this.options,l=this._getLabelSizes(),h=t+a,s=l.widest.width;let p,_;return n==="left"?r?(_=this.right+a,i==="near"?p="left":i==="center"?(p="center",_+=s/2):(p="right",_+=s)):(_=this.right-h,i==="near"?p="right":i==="center"?(p="center",_-=s/2):(p="left",_=this.left)):n==="right"?r?(_=this.left+a,i==="near"?p="right":i==="center"?(p="center",_-=s/2):(p="left",_-=s)):(_=this.left+h,i==="near"?p="left":i==="center"?(p="center",_+=s/2):(p="right",_=this.right)):p="right",{textAlign:p,x:_}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:n},left:i,top:r,width:a,height:l}=this;n&&(t.save(),t.fillStyle=n,t.fillRect(i,r,a,l),t.restore())}getLineWidthForValue(t){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const r=this.ticks.findIndex(a=>a.value===t);return r>=0?n.setContext(this.getContext(r)).lineWidth:0}drawGrid(t){const n=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let a,l;const h=(s,p,_)=>{!_.width||!_.color||(i.save(),i.lineWidth=_.width,i.strokeStyle=_.color,i.setLineDash(_.borderDash||[]),i.lineDashOffset=_.borderDashOffset,i.beginPath(),i.moveTo(s.x,s.y),i.lineTo(p.x,p.y),i.stroke(),i.restore())};if(n.display)for(a=0,l=r.length;a<l;++a){const s=r[a];n.drawOnChartArea&&h({x:s.x1,y:s.y1},{x:s.x2,y:s.y2},s),n.drawTicks&&h({x:s.tx1,y:s.ty1},{x:s.tx2,y:s.ty2},{color:s.tickColor,width:s.tickWidth,borderDash:s.tickBorderDash,borderDashOffset:s.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:n,options:{border:i,grid:r}}=this,a=i.setContext(this.getContext()),l=i.display?a.width:0;if(!l)return;const h=r.setContext(this.getContext(0)).lineWidth,s=this._borderValue;let p,_,x,T;this.isHorizontal()?(p=up(t,this.left,l)-l/2,_=up(t,this.right,h)+h/2,x=T=s):(x=up(t,this.top,l)-l/2,T=up(t,this.bottom,h)+h/2,p=_=s),n.save(),n.lineWidth=a.width,n.strokeStyle=a.color,n.beginPath(),n.moveTo(p,x),n.lineTo(_,T),n.stroke(),n.restore()}drawLabels(t){if(!this.options.ticks.display)return;const i=this.ctx,r=this._computeLabelArea();r&&GT(i,r);const a=this.getLabelItems(t);for(const l of a){const h=l.options,s=l.font,p=l.label,_=l.textOffset;Kp(i,p,0,_,s,h)}r&&qT(i)}drawTitle(){const{ctx:t,options:{position:n,title:i,reverse:r}}=this;if(!i.display)return;const a=go(i.font),l=Ha(i.padding),h=i.align;let s=a.lineHeight/2;n==="bottom"||n==="center"||Fi(n)?(s+=l.bottom,cs(i.text)&&(s+=a.lineHeight*(i.text.length-1))):s+=l.top;const{titleX:p,titleY:_,maxWidth:x,rotation:T}=gue(this,s,n,h);Kp(t,i.text,0,0,a,{color:i.color,maxWidth:x,rotation:T,textAlign:pue(h,n,r),textBaseline:"middle",translation:[p,_]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,n=t.ticks&&t.ticks.z||0,i=yi(t.grid&&t.grid.z,-1),r=yi(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==mg.prototype.draw?[{z:n,draw:a=>{this.draw(a)}}]:[{z:i,draw:a=>{this.drawBackground(),this.drawGrid(a),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:n,draw:a=>{this.drawLabels(a)}}]}getMatchingVisibleMetas(t){const n=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[];let a,l;for(a=0,l=n.length;a<l;++a){const h=n[a];h[i]===this.id&&(!t||h.type===t)&&r.push(h)}return r}_resolveTickFontOptions(t){const n=this.options.ticks.setContext(this.getContext(t));return go(n.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class sw{constructor(t,n,i){this.type=t,this.scope=n,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const n=Object.getPrototypeOf(t);let i;yue(n)&&(i=this.register(n));const r=this.items,a=t.id,l=this.scope+"."+a;if(!a)throw new Error("class does not have id: "+t);return a in r||(r[a]=t,vue(t,l,i),this.override&&us.override(t.id,t.overrides)),l}get(t){return this.items[t]}unregister(t){const n=this.items,i=t.id,r=this.scope;i in n&&delete n[i],r&&i in us[r]&&(delete us[r][i],this.override&&delete qp[i])}}function vue(e,t,n){const i=e0(Object.create(null),[n?us.get(n):{},us.get(t),e.defaults]);us.set(t,i),e.defaultRoutes&&_ue(t,e.defaultRoutes),e.descriptors&&us.describe(t,e.descriptors)}function _ue(e,t){Object.keys(t).forEach(n=>{const i=n.split("."),r=i.pop(),a=[e].concat(i).join("."),l=t[n].split("."),h=l.pop(),s=l.join(".");us.route(a,r,s,h)})}function yue(e){return"id"in e&&"defaults"in e}class bue{constructor(){this.controllers=new sw(ym,"datasets",!0),this.elements=new sw(Rh,"elements"),this.plugins=new sw(Object,"plugins"),this.scales=new sw(mg,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,n,i){[...n].forEach(r=>{const a=i||this._getRegistryForType(r);i||a.isForType(r)||a===this.plugins&&r.id?this._exec(t,a,r):Ir(r,l=>{const h=i||this._getRegistryForType(l);this._exec(t,h,l)})})}_exec(t,n,i){const r=jP(t);Gr(i["before"+r],[],i),n[t](i),Gr(i["after"+r],[],i)}_getRegistryForType(t){for(let n=0;n<this._typedRegistries.length;n++){const i=this._typedRegistries[n];if(i.isForType(t))return i}return this.plugins}_get(t,n,i){const r=n.get(t);if(r===void 0)throw new Error('"'+t+'" is not a registered '+i+".");return r}}var Wu=new bue;class xue{constructor(){this._init=void 0}notify(t,n,i,r){if(n==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install")),this._init===void 0)return;const a=r?this._descriptors(t).filter(r):this._descriptors(t),l=this._notify(a,t,n,i);return n==="afterDestroy"&&(this._notify(a,t,"stop"),this._notify(this._init,t,"uninstall"),this._init=void 0),l}_notify(t,n,i,r){r=r||{};for(const a of t){const l=a.plugin,h=l[i],s=[n,r,a.options];if(Gr(h,s,l)===!1&&r.cancelable)return!1}return!0}invalidate(){Ri(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),n}_createDescriptors(t,n){const i=t&&t.config,r=yi(i.options&&i.options.plugins,{}),a=wue(i);return r===!1&&!n?[]:Sue(t,a,r,n)}_notifyStateChanges(t){const n=this._oldCache||[],i=this._cache,r=(a,l)=>a.filter(h=>!l.some(s=>h.plugin.id===s.plugin.id));this._notify(r(n,i),t,"stop"),this._notify(r(i,n),t,"start")}}function wue(e){const t={},n=[],i=Object.keys(Wu.plugins.items);for(let a=0;a<i.length;a++)n.push(Wu.getPlugin(i[a]));const r=e.plugins||[];for(let a=0;a<r.length;a++){const l=r[a];n.indexOf(l)===-1&&(n.push(l),t[l.id]=!0)}return{plugins:n,localIds:t}}function Tue(e,t){return!t&&e===!1?null:e===!0?{}:e}function Sue(e,{plugins:t,localIds:n},i,r){const a=[],l=e.getContext();for(const h of t){const s=h.id,p=Tue(i[s],r);p!==null&&a.push({plugin:h,options:Eue(e.config,{plugin:h,local:n[s]},p,l)})}return a}function Eue(e,{plugin:t,local:n},i,r){const a=e.pluginScopeKeys(t),l=e.getOptionScopes(i,a);return n&&t.defaults&&l.push(t.defaults),e.createResolver(l,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function eI(e,t){const n=us.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function Cue(e,t){let n=e;return e==="_index_"?n=t:e==="_value_"&&(n=t==="x"?"y":"x"),n}function kue(e,t){return e===t?"_index_":"_value_"}function xB(e){if(e==="x"||e==="y"||e==="r")return e}function Iue(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function tI(e,...t){if(xB(e))return e;for(const n of t){const i=n.axis||Iue(n.position)||e.length>1&&xB(e[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function wB(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function Aue(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter(i=>i.xAxisID===e||i.yAxisID===e);if(n.length)return wB(e,"x",n[0])||wB(e,"y",n[0])}return{}}function Pue(e,t){const n=qp[e.type]||{scales:{}},i=t.scales||{},r=eI(e.type,t),a=Object.create(null);return Object.keys(i).forEach(l=>{const h=i[l];if(!Fi(h))return console.error(`Invalid scale configuration for scale: ${l}`);if(h._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${l}`);const s=tI(l,h,Aue(l,e),us.scales[h.type]),p=kue(s,r),_=n.scales||{};a[l]=pb(Object.create(null),[{axis:s},h,_[s],_[p]])}),e.data.datasets.forEach(l=>{const h=l.type||e.type,s=l.indexAxis||eI(h,t),_=(qp[h]||{}).scales||{};Object.keys(_).forEach(x=>{const T=Cue(x,s),k=l[T+"AxisID"]||T;a[k]=a[k]||Object.create(null),pb(a[k],[{axis:T},i[k],_[x]])})}),Object.keys(a).forEach(l=>{const h=a[l];pb(h,[us.scales[h.type],us.scale])}),a}function rj(e){const t=e.options||(e.options={});t.plugins=yi(t.plugins,{}),t.scales=Pue(e,t)}function sj(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function Mue(e){return e=e||{},e.data=sj(e.data),rj(e),e}const TB=new Map,oj=new Set;function ow(e,t){let n=TB.get(e);return n||(n=t(),TB.set(e,n),oj.add(n)),n}const Ry=(e,t,n)=>{const i=cm(t,n);i!==void 0&&e.add(i)};class Due{constructor(t){this._config=Mue(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=sj(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),rj(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return ow(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,n){return ow(`${t}.transition.${n}`,()=>[[`datasets.${t}.transitions.${n}`,`transitions.${n}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,n){return ow(`${t}-${n}`,()=>[[`datasets.${t}.elements.${n}`,`datasets.${t}`,`elements.${n}`,""]])}pluginScopeKeys(t){const n=t.id,i=this.type;return ow(`${i}-plugin-${n}`,()=>[[`plugins.${n}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,n){const i=this._scopeCache;let r=i.get(t);return(!r||n)&&(r=new Map,i.set(t,r)),r}getOptionScopes(t,n,i){const{options:r,type:a}=this,l=this._cachedScopes(t,i),h=l.get(n);if(h)return h;const s=new Set;n.forEach(_=>{t&&(s.add(t),_.forEach(x=>Ry(s,t,x))),_.forEach(x=>Ry(s,r,x)),_.forEach(x=>Ry(s,qp[a]||{},x)),_.forEach(x=>Ry(s,us,x)),_.forEach(x=>Ry(s,Jk,x))});const p=Array.from(s);return p.length===0&&p.push(Object.create(null)),oj.has(n)&&l.set(n,p),p}chartOptionScopes(){const{options:t,type:n}=this;return[t,qp[n]||{},us.datasets[n]||{},{type:n},us,Jk]}resolveNamedOptions(t,n,i,r=[""]){const a={$shared:!0},{resolver:l,subPrefixes:h}=SB(this._resolverCache,t,r);let s=l;if(Rue(l,n)){a.$shared=!1,i=um(i)?i():i;const p=this.createResolver(t,i,h);s=h_(l,i,p)}for(const p of n)a[p]=s[p];return a}createResolver(t,n,i=[""],r){const{resolver:a}=SB(this._resolverCache,t,i);return Fi(n)?h_(a,n,void 0,r):a}}function SB(e,t,n){let i=e.get(t);i||(i=new Map,e.set(t,i));const r=n.join();let a=i.get(r);return a||(a={resolver:XP(t,n),subPrefixes:n.filter(h=>!h.toLowerCase().includes("hover"))},i.set(r,a)),a}const Lue=e=>Fi(e)&&Object.getOwnPropertyNames(e).some(t=>um(e[t]));function Rue(e,t){const{isScriptable:n,isIndexable:i}=B$(e);for(const r of t){const a=n(r),l=i(r),h=(l||a)&&e[r];if(a&&(um(h)||Lue(h))||l&&cs(h))return!0}return!1}var Oue="4.5.1";const Vue=["top","bottom","left","right","chartArea"];function EB(e,t){return e==="top"||e==="bottom"||Vue.indexOf(e)===-1&&t==="x"}function CB(e,t){return function(n,i){return n[e]===i[e]?n[t]-i[t]:n[e]-i[e]}}function kB(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),Gr(n&&n.onComplete,[e],t)}function Bue(e){const t=e.chart,n=t.options.animation;Gr(n&&n.onProgress,[e],t)}function aj(e){return JP()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const Ow={},IB=e=>{const t=aj(e);return Object.values(Ow).filter(n=>n.canvas===t).pop()};function Fue(e,t,n){const i=Object.keys(e);for(const r of i){const a=+r;if(a>=t){const l=e[r];delete e[r],(n>0||a>t)&&(e[a+n]=l)}}}function zue(e,t,n,i){return!n||e.type==="mouseout"?null:i?t:e}class nM{static defaults=us;static instances=Ow;static overrides=qp;static registry=Wu;static version=Oue;static getChart=IB;static register(...t){Wu.add(...t),AB()}static unregister(...t){Wu.remove(...t),AB()}constructor(t,n){const i=this.config=new Due(n),r=aj(t),a=IB(r);if(a)throw new Error("Canvas is already in use. Chart with ID '"+a.id+"' must be destroyed before the canvas with ID '"+a.canvas.id+"' can be reused.");const l=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||iue(r)),this.platform.updateConfig(i);const h=this.platform.acquireContext(r,l.aspectRatio),s=h&&h.canvas,p=s&&s.height,_=s&&s.width;if(this.id=Rae(),this.ctx=h,this.canvas=s,this.width=_,this.height=p,this._options=l,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new xue,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Zae(x=>this.update(x),l.resizeDelay||0),this._dataChanges=[],Ow[this.id]=this,!h||!s){console.error("Failed to create chart: can't acquire context from the given item");return}Zd.listen(this,"complete",kB),Zd.listen(this,"progress",Bue),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:n},width:i,height:r,_aspectRatio:a}=this;return Ri(t)?n&&a?a:r?i/r:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Wu}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Z3(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return K3(this.canvas,this.ctx),this}stop(){return Zd.stop(this),this}resize(t,n){Zd.running(this)?this._resizeBeforeDraw={width:t,height:n}:this._resize(t,n)}_resize(t,n){const i=this.options,r=this.canvas,a=i.maintainAspectRatio&&this.aspectRatio,l=this.platform.getMaximumSize(r,t,n,a),h=i.devicePixelRatio||this.platform.getDevicePixelRatio(),s=this.width?"resize":"attach";this.width=l.width,this.height=l.height,this._aspectRatio=this.aspectRatio,Z3(this,h,!0)&&(this.notifyPlugins("resize",{size:l}),Gr(i.onResize,[this,l],this),this.attached&&this._doResize(s)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};Ir(n,(i,r)=>{i.id=r})}buildOrUpdateScales(){const t=this.options,n=t.scales,i=this.scales,r=Object.keys(i).reduce((l,h)=>(l[h]=!1,l),{});let a=[];n&&(a=a.concat(Object.keys(n).map(l=>{const h=n[l],s=tI(l,h),p=s==="r",_=s==="x";return{options:h,dposition:p?"chartArea":_?"bottom":"left",dtype:p?"radialLinear":_?"category":"linear"}}))),Ir(a,l=>{const h=l.options,s=h.id,p=tI(s,h),_=yi(h.type,l.dtype);(h.position===void 0||EB(h.position,p)!==EB(l.dposition))&&(h.position=l.dposition),r[s]=!0;let x=null;if(s in i&&i[s].type===_)x=i[s];else{const T=Wu.getScale(_);x=new T({id:s,type:_,ctx:this.ctx,chart:this}),i[x.id]=x}x.init(h,t)}),Ir(r,(l,h)=>{l||delete i[h]}),Ir(i,l=>{Na.configure(this,l,l.options),Na.addBox(this,l)})}_updateMetasets(){const t=this._metasets,n=this.data.datasets.length,i=t.length;if(t.sort((r,a)=>r.index-a.index),i>n){for(let r=n;r<i;++r)this._destroyDatasetMeta(r);t.splice(n,i-n)}this._sortedMetasets=t.slice(0).sort(CB("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:n}}=this;t.length>n.length&&delete this._stacks,t.forEach((i,r)=>{n.filter(a=>a===i._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const t=[],n=this.data.datasets;let i,r;for(this._removeUnreferencedMetasets(),i=0,r=n.length;i<r;i++){const a=n[i];let l=this.getDatasetMeta(i);const h=a.type||this.config.type;if(l.type&&l.type!==h&&(this._destroyDatasetMeta(i),l=this.getDatasetMeta(i)),l.type=h,l.indexAxis=a.indexAxis||eI(h,this.options),l.order=a.order||0,l.index=i,l.label=""+a.label,l.visible=this.isDatasetVisible(i),l.controller)l.controller.updateIndex(i),l.controller.linkScales();else{const s=Wu.getController(h),{datasetElementType:p,dataElementType:_}=us.datasets[h];Object.assign(s,{dataElementType:Wu.getElement(_),datasetElementType:p&&Wu.getElement(p)}),l.controller=new s(this,i),t.push(l.controller)}}return this._updateMetasets(),t}_resetElements(){Ir(this.data.datasets,(t,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const n=this.config;n.update();const i=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const a=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let l=0;for(let p=0,_=this.data.datasets.length;p<_;p++){const{controller:x}=this.getDatasetMeta(p),T=!r&&a.indexOf(x)===-1;x.buildOrUpdateElements(T),l=Math.max(+x.getMaxOverflow(),l)}l=this._minPadding=i.layout.autoPadding?l:0,this._updateLayout(l),r||Ir(a,p=>{p.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(CB("z","_idx"));const{_active:h,_lastEvent:s}=this;s?this._eventHandler(s,!0):h.length&&this._updateHoverStyles(h,h,!0),this.render()}_updateScales(){Ir(this.scales,t=>{Na.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,n=new Set(Object.keys(this._listeners)),i=new Set(t.events);(!z3(n,i)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,n=this._getUniformDataChanges()||[];for(const{method:i,start:r,count:a}of n){const l=i==="_removeElements"?-a:a;Fue(t,r,l)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const n=this.data.datasets.length,i=a=>new Set(t.filter(l=>l[0]===a).map((l,h)=>h+","+l.splice(1).join(","))),r=i(0);for(let a=1;a<n;a++)if(!z3(r,i(a)))return;return Array.from(r).map(a=>a.split(",")).map(a=>({method:a[1],start:+a[2],count:+a[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Na.update(this,this.width,this.height,t);const n=this.chartArea,i=n.width<=0||n.height<=0;this._layers=[],Ir(this.boxes,r=>{i&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,a)=>{r._idx=a}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let n=0,i=this.data.datasets.length;n<i;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,i=this.data.datasets.length;n<i;++n)this._updateDataset(n,um(t)?t({datasetIndex:n}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,n){const i=this.getDatasetMeta(t),r={meta:i,index:t,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(i.controller._update(n),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Zd.has(this)?this.attached&&!Zd.running(this)&&Zd.start(this):(this.draw(),kB({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:i,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(t=0;t<n.length&&n[t].z<=0;++t)n[t].draw(this.chartArea);for(this._drawDatasets();t<n.length;++t)n[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const n=this._sortedMetasets,i=[];let r,a;for(r=0,a=n.length;r<a;++r){const l=n[r];(!t||l.visible)&&i.push(l)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let n=t.length-1;n>=0;--n)this._drawDataset(t[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const n=this.ctx,i={meta:t,index:t.index,cancelable:!0},r=K$(this,t);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(r&&GT(n,r),t.controller.draw(),r&&qT(n),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(t){return hh(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,n,i,r){const a=Vce.modes[n];return typeof a=="function"?a(this,t,i,r):[]}getDatasetMeta(t){const n=this.data.datasets[t],i=this._metasets;let r=i.filter(a=>a&&a._dataset===n).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:t,_dataset:n,_parsed:[],_sorted:!1},i.push(r)),r}getContext(){return this.$context||(this.$context=_m(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const n=this.data.datasets[t];if(!n)return!1;const i=this.getDatasetMeta(t);return typeof i.hidden=="boolean"?!i.hidden:!n.hidden}setDatasetVisibility(t,n){const i=this.getDatasetMeta(t);i.hidden=!n}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,n,i){const r=i?"show":"hide",a=this.getDatasetMeta(t),l=a.controller._resolveAnimations(void 0,r);t0(n)?(a.data[n].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),l.update(a,{visible:i}),this.update(h=>h.datasetIndex===t?r:void 0))}hide(t,n){this._updateVisibility(t,n,!1)}show(t,n){this._updateVisibility(t,n,!0)}_destroyDatasetMeta(t){const n=this._metasets[t];n&&n.controller&&n.controller._destroy(),delete this._metasets[t]}_stop(){let t,n;for(this.stop(),Zd.remove(this),t=0,n=this.data.datasets.length;t<n;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:n}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),K3(t,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Ow[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,n=this.platform,i=(a,l)=>{n.addEventListener(this,a,l),t[a]=l},r=(a,l,h)=>{a.offsetX=l,a.offsetY=h,this._eventHandler(a)};Ir(this.options.events,a=>i(a,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,n=this.platform,i=(s,p)=>{n.addEventListener(this,s,p),t[s]=p},r=(s,p)=>{t[s]&&(n.removeEventListener(this,s,p),delete t[s])},a=(s,p)=>{this.canvas&&this.resize(s,p)};let l;const h=()=>{r("attach",h),this.attached=!0,this.resize(),i("resize",a),i("detach",l)};l=()=>{this.attached=!1,r("resize",a),this._stop(),this._resize(0,0),i("attach",h)},n.isAttached(this.canvas)?h():l()}unbindEvents(){Ir(this._listeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._listeners={},Ir(this._responsiveListeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,n,i){const r=i?"set":"remove";let a,l,h,s;for(n==="dataset"&&(a=this.getDatasetMeta(t[0].datasetIndex),a.controller["_"+r+"DatasetHoverStyle"]()),h=0,s=t.length;h<s;++h){l=t[h];const p=l&&this.getDatasetMeta(l.datasetIndex).controller;p&&p[r+"HoverStyle"](l.element,l.datasetIndex,l.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const n=this._active||[],i=t.map(({datasetIndex:a,index:l})=>{const h=this.getDatasetMeta(a);if(!h)throw new Error("No dataset found at index "+a);return{datasetIndex:a,element:h.data[l],index:l}});!N1(i,n)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,n))}notifyPlugins(t,n,i){return this._plugins.notify(this,t,n,i)}isPluginEnabled(t){return this._plugins._cache.filter(n=>n.plugin.id===t).length===1}_updateHoverStyles(t,n,i){const r=this.options.hover,a=(s,p)=>s.filter(_=>!p.some(x=>_.datasetIndex===x.datasetIndex&&_.index===x.index)),l=a(n,t),h=i?t:a(t,n);l.length&&this.updateHoverStyle(l,r.mode,!1),h.length&&r.mode&&this.updateHoverStyle(h,r.mode,!0)}_eventHandler(t,n){const i={event:t,replay:n,cancelable:!0,inChartArea:this.isPointInArea(t)},r=l=>(l.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",i,r)===!1)return;const a=this._handleEvent(t,n,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,r),(a||i.changed)&&this.render(),this}_handleEvent(t,n,i){const{_active:r=[],options:a}=this,l=n,h=this._getActiveElements(t,r,i,l),s=Nae(t),p=zue(t,this._lastEvent,i,s);i&&(this._lastEvent=null,Gr(a.onHover,[t,h,this],this),s&&Gr(a.onClick,[t,h,this],this));const _=!N1(h,r);return(_||n)&&(this._active=h,this._updateHoverStyles(h,r,n)),this._lastEvent=p,_}_getActiveElements(t,n,i,r){if(t.type==="mouseout")return[];if(!i)return n;const a=this.options.hover;return this.getElementsAtEventForMode(t,a.mode,a,r)}}function AB(){return Ir(nM.instances,e=>e._plugins.invalidate())}function Nue(e,t,n){const{startAngle:i,x:r,y:a,outerRadius:l,innerRadius:h,options:s}=t,{borderWidth:p,borderJoinStyle:_}=s,x=Math.min(p/l,Da(i-n));if(e.beginPath(),e.arc(r,a,l-p/2,i+x/2,n-x/2),h>0){const T=Math.min(p/h,Da(i-n));e.arc(r,a,h+p/2,n-T/2,i+T/2,!0)}else{const T=Math.min(p/2,l*Da(i-n));if(_==="round")e.arc(r,a,T,n-ur/2,i+ur/2,!0);else if(_==="bevel"){const k=2*T*T,P=-k*Math.cos(n+ur/2)+r,M=-k*Math.sin(n+ur/2)+a,R=k*Math.cos(i+ur/2)+r,F=k*Math.sin(i+ur/2)+a;e.lineTo(P,M),e.lineTo(R,F)}}e.closePath(),e.moveTo(0,0),e.rect(0,0,e.canvas.width,e.canvas.height),e.clip("evenodd")}function Uue(e,t,n){const{startAngle:i,pixelMargin:r,x:a,y:l,outerRadius:h,innerRadius:s}=t;let p=r/h;e.beginPath(),e.arc(a,l,h,i-p,n+p),s>r?(p=r/s,e.arc(a,l,s,n+p,i-p,!0)):e.arc(a,l,r,n+Hs,i-Hs),e.closePath(),e.clip()}function $ue(e){return KP(e,["outerStart","outerEnd","innerStart","innerEnd"])}function jue(e,t,n,i){const r=$ue(e.options.borderRadius),a=(n-t)/2,l=Math.min(a,i*t/2),h=s=>{const p=(n-Math.min(a,s))*i/2;return Bo(s,0,Math.min(a,p))};return{outerStart:h(r.outerStart),outerEnd:h(r.outerEnd),innerStart:Bo(r.innerStart,0,l),innerEnd:Bo(r.innerEnd,0,l)}}function cv(e,t,n,i){return{x:n+e*Math.cos(t),y:i+e*Math.sin(t)}}function G1(e,t,n,i,r,a){const{x:l,y:h,startAngle:s,pixelMargin:p,innerRadius:_}=t,x=Math.max(t.outerRadius+i+n-p,0),T=_>0?_+i+n+p:0;let k=0;const P=r-s;if(i){const be=_>0?_-i:0,Be=x>0?x-i:0,nt=(be+Be)/2,We=nt!==0?P*nt/(nt+i):P;k=(P-We)/2}const M=Math.max(.001,P*x-n/ur)/x,R=(P-M)/2,F=s+R+k,B=r-R-k,{outerStart:H,outerEnd:G,innerStart:ee,innerEnd:ie}=jue(t,T,x,B-F),J=x-H,$=x-G,W=F+H/J,X=B-G/$,re=T+ee,Y=T+ie,Z=F+ee/re,ge=B-ie/Y;if(e.beginPath(),a){const be=(W+X)/2;if(e.arc(l,h,x,W,be),e.arc(l,h,x,be,X),G>0){const Le=cv($,X,l,h);e.arc(Le.x,Le.y,G,X,B+Hs)}const Be=cv(Y,B,l,h);if(e.lineTo(Be.x,Be.y),ie>0){const Le=cv(Y,ge,l,h);e.arc(Le.x,Le.y,ie,B+Hs,ge+Math.PI)}const nt=(B-ie/T+(F+ee/T))/2;if(e.arc(l,h,T,B-ie/T,nt,!0),e.arc(l,h,T,nt,F+ee/T,!0),ee>0){const Le=cv(re,Z,l,h);e.arc(Le.x,Le.y,ee,Z+Math.PI,F-Hs)}const We=cv(J,F,l,h);if(e.lineTo(We.x,We.y),H>0){const Le=cv(J,W,l,h);e.arc(Le.x,Le.y,H,F-Hs,W)}}else{e.moveTo(l,h);const be=Math.cos(W)*x+l,Be=Math.sin(W)*x+h;e.lineTo(be,Be);const nt=Math.cos(X)*x+l,We=Math.sin(X)*x+h;e.lineTo(nt,We)}e.closePath()}function Wue(e,t,n,i,r){const{fullCircles:a,startAngle:l,circumference:h}=t;let s=t.endAngle;if(a){G1(e,t,n,i,s,r);for(let p=0;p<a;++p)e.fill();isNaN(h)||(s=l+(h%Jr||Jr))}return G1(e,t,n,i,s,r),e.fill(),s}function Hue(e,t,n,i,r){const{fullCircles:a,startAngle:l,circumference:h,options:s}=t,{borderWidth:p,borderJoinStyle:_,borderDash:x,borderDashOffset:T,borderRadius:k}=s,P=s.borderAlign==="inner";if(!p)return;e.setLineDash(x||[]),e.lineDashOffset=T,P?(e.lineWidth=p*2,e.lineJoin=_||"round"):(e.lineWidth=p,e.lineJoin=_||"bevel");let M=t.endAngle;if(a){G1(e,t,n,i,M,r);for(let R=0;R<a;++R)e.stroke();isNaN(h)||(M=l+(h%Jr||Jr))}P&&Uue(e,t,M),s.selfJoin&&M-l>=ur&&k===0&&_!=="miter"&&Nue(e,t,M),a||(G1(e,t,n,i,M,r),e.stroke())}class Gue extends Rh{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,n,i){const r=this.getProps(["x","y"],i),{angle:a,distance:l}=k$(r,{x:t,y:n}),{startAngle:h,endAngle:s,innerRadius:p,outerRadius:_,circumference:x}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),T=(this.options.spacing+this.options.borderWidth)/2,k=yi(x,s-h),P=n0(a,h,s)&&h!==s,M=k>=Jr||P,R=uh(l,p+T,_+T);return M&&R}getCenterPoint(t){const{x:n,y:i,startAngle:r,endAngle:a,innerRadius:l,outerRadius:h}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:s,spacing:p}=this.options,_=(r+a)/2,x=(l+h+p+s)/2;return{x:n+Math.cos(_)*x,y:i+Math.sin(_)*x}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:n,circumference:i}=this,r=(n.offset||0)/4,a=(n.spacing||0)/2,l=n.circular;if(this.pixelMargin=n.borderAlign==="inner"?.33:0,this.fullCircles=i>Jr?Math.floor(i/Jr):0,i===0||this.innerRadius<0||this.outerRadius<0)return;t.save();const h=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(h)*r,Math.sin(h)*r);const s=1-Math.sin(Math.min(ur,i||0)),p=r*s;t.fillStyle=n.backgroundColor,t.strokeStyle=n.borderColor,Wue(t,this,p,a,l),Hue(t,this,p,a,l),t.restore()}}function lj(e,t,n=t){e.lineCap=yi(n.borderCapStyle,t.borderCapStyle),e.setLineDash(yi(n.borderDash,t.borderDash)),e.lineDashOffset=yi(n.borderDashOffset,t.borderDashOffset),e.lineJoin=yi(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=yi(n.borderWidth,t.borderWidth),e.strokeStyle=yi(n.borderColor,t.borderColor)}function que(e,t,n){e.lineTo(n.x,n.y)}function Kue(e){return e.stepped?cle:e.tension||e.cubicInterpolationMode==="monotone"?ule:que}function cj(e,t,n={}){const i=e.length,{start:r=0,end:a=i-1}=n,{start:l,end:h}=t,s=Math.max(r,l),p=Math.min(a,h),_=r<l&&a<l||r>h&&a>h;return{count:i,start:s,loop:t.loop,ilen:p<s&&!_?i+p-s:p-s}}function Xue(e,t,n,i){const{points:r,options:a}=t,{count:l,start:h,loop:s,ilen:p}=cj(r,n,i),_=Kue(a);let{move:x=!0,reverse:T}=i||{},k,P,M;for(k=0;k<=p;++k)P=r[(h+(T?p-k:k))%l],!P.skip&&(x?(e.moveTo(P.x,P.y),x=!1):_(e,M,P,T,a.stepped),M=P);return s&&(P=r[(h+(T?p:0))%l],_(e,M,P,T,a.stepped)),!!s}function Yue(e,t,n,i){const r=t.points,{count:a,start:l,ilen:h}=cj(r,n,i),{move:s=!0,reverse:p}=i||{};let _=0,x=0,T,k,P,M,R,F;const B=G=>(l+(p?h-G:G))%a,H=()=>{M!==R&&(e.lineTo(_,R),e.lineTo(_,M),e.lineTo(_,F))};for(s&&(k=r[B(0)],e.moveTo(k.x,k.y)),T=0;T<=h;++T){if(k=r[B(T)],k.skip)continue;const G=k.x,ee=k.y,ie=G|0;ie===P?(ee<M?M=ee:ee>R&&(R=ee),_=(x*_+G)/++x):(H(),e.lineTo(G,ee),P=ie,x=0,M=R=ee),F=ee}H()}function nI(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!n?Yue:Xue}function Zue(e){return e.stepped?$le:e.tension||e.cubicInterpolationMode==="monotone"?jle:_p}function Jue(e,t,n,i){let r=t._path;r||(r=t._path=new Path2D,t.path(r,n,i)&&r.closePath()),lj(e,t.options),e.stroke(r)}function Que(e,t,n,i){const{segments:r,options:a}=t,l=nI(t);for(const h of r)lj(e,a,h.style),e.beginPath(),l(e,t,h,{start:n,end:n+i-1})&&e.closePath(),e.stroke()}const ede=typeof Path2D=="function";function tde(e,t,n,i){ede&&!t.options.segment?Jue(e,t,n,i):Que(e,t,n,i)}class YT extends Rh{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,n){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const r=i.spanGaps?this._loop:this._fullLoop;Rle(this._points,i,t,r,n),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=Xle(this,this.options.segment))}first(){const t=this.segments,n=this.points;return t.length&&n[t[0].start]}last(){const t=this.segments,n=this.points,i=t.length;return i&&n[t[i-1].end]}interpolate(t,n){const i=this.options,r=t[n],a=this.points,l=q$(this,{property:n,start:r,end:r});if(!l.length)return;const h=[],s=Zue(i);let p,_;for(p=0,_=l.length;p<_;++p){const{start:x,end:T}=l[p],k=a[x],P=a[T];if(k===P){h.push(k);continue}const M=Math.abs((r-k[n])/(P[n]-k[n])),R=s(k,P,M,i.stepped);R[n]=t[n],h.push(R)}return h.length===1?h[0]:h}pathSegment(t,n,i){return nI(this)(t,this,n,i)}path(t,n,i){const r=this.segments,a=nI(this);let l=this._loop;n=n||0,i=i||this.points.length-n;for(const h of r)l&=a(t,this,h,{start:n,end:n+i-1});return!!l}draw(t,n,i,r){const a=this.options||{};(this.points||[]).length&&a.borderWidth&&(t.save(),tde(t,this,i,r),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function PB(e,t,n,i){const r=e.options,{[n]:a}=e.getProps([n],i);return Math.abs(t-a)<r.radius+r.hitRadius}class nde extends Rh{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,n,i){const r=this.options,{x:a,y:l}=this.getProps(["x","y"],i);return Math.pow(t-a,2)+Math.pow(n-l,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(t,n){return PB(this,t,"x",n)}inYRange(t,n){return PB(this,t,"y",n)}getCenterPoint(t){const{x:n,y:i}=this.getProps(["x","y"],t);return{x:n,y:i}}size(t){t=t||this.options||{};let n=t.radius||0;n=Math.max(n,n&&t.hoverRadius||0);const i=n&&t.borderWidth||0;return(n+i)*2}draw(t,n){const i=this.options;this.skip||i.radius<.1||!hh(this,n,this.size(i)/2)||(t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.fillStyle=i.backgroundColor,Qk(t,i,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}function uj(e,t){const{x:n,y:i,base:r,width:a,height:l}=e.getProps(["x","y","base","width","height"],t);let h,s,p,_,x;return e.horizontal?(x=l/2,h=Math.min(n,r),s=Math.max(n,r),p=i-x,_=i+x):(x=a/2,h=n-x,s=n+x,p=Math.min(i,r),_=Math.max(i,r)),{left:h,top:p,right:s,bottom:_}}function Vf(e,t,n,i){return e?0:Bo(t,n,i)}function ide(e,t,n){const i=e.options.borderWidth,r=e.borderSkipped,a=V$(i);return{t:Vf(r.top,a.top,0,n),r:Vf(r.right,a.right,0,t),b:Vf(r.bottom,a.bottom,0,n),l:Vf(r.left,a.left,0,t)}}function rde(e,t,n){const{enableBorderRadius:i}=e.getProps(["enableBorderRadius"]),r=e.options.borderRadius,a=Op(r),l=Math.min(t,n),h=e.borderSkipped,s=i||Fi(r);return{topLeft:Vf(!s||h.top||h.left,a.topLeft,0,l),topRight:Vf(!s||h.top||h.right,a.topRight,0,l),bottomLeft:Vf(!s||h.bottom||h.left,a.bottomLeft,0,l),bottomRight:Vf(!s||h.bottom||h.right,a.bottomRight,0,l)}}function sde(e){const t=uj(e),n=t.right-t.left,i=t.bottom-t.top,r=ide(e,n/2,i/2),a=rde(e,n/2,i/2);return{outer:{x:t.left,y:t.top,w:n,h:i,radius:a},inner:{x:t.left+r.l,y:t.top+r.t,w:n-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,a.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,a.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,a.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,a.bottomRight-Math.max(r.b,r.r))}}}}function EC(e,t,n,i){const r=t===null,a=n===null,h=e&&!(r&&a)&&uj(e,i);return h&&(r||uh(t,h.left,h.right))&&(a||uh(n,h.top,h.bottom))}function ode(e){return e.topLeft||e.topRight||e.bottomLeft||e.bottomRight}function ade(e,t){e.rect(t.x,t.y,t.w,t.h)}function CC(e,t,n={}){const i=e.x!==n.x?-t:0,r=e.y!==n.y?-t:0,a=(e.x+e.w!==n.x+n.w?t:0)-i,l=(e.y+e.h!==n.y+n.h?t:0)-r;return{x:e.x+i,y:e.y+r,w:e.w+a,h:e.h+l,radius:e.radius}}class lde extends Rh{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:n,options:{borderColor:i,backgroundColor:r}}=this,{inner:a,outer:l}=sde(this),h=ode(l.radius)?i0:ade;t.save(),(l.w!==a.w||l.h!==a.h)&&(t.beginPath(),h(t,CC(l,n,a)),t.clip(),h(t,CC(a,-n,l)),t.fillStyle=i,t.fill("evenodd")),t.beginPath(),h(t,CC(a,n)),t.fillStyle=r,t.fill(),t.restore()}inRange(t,n,i){return EC(this,t,n,i)}inXRange(t,n){return EC(this,t,null,n)}inYRange(t,n){return EC(this,null,t,n)}getCenterPoint(t){const{x:n,y:i,base:r,horizontal:a}=this.getProps(["x","y","base","horizontal"],t);return{x:a?(n+r)/2:n,y:a?i:(i+r)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}var cde=Object.freeze({__proto__:null,ArcElement:Gue,BarElement:lde,LineElement:YT,PointElement:nde});const iI=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],MB=iI.map(e=>e.replace("rgb(","rgba(").replace(")",", 0.5)"));function dj(e){return iI[e%iI.length]}function hj(e){return MB[e%MB.length]}function ude(e,t){return e.borderColor=dj(t),e.backgroundColor=hj(t),++t}function dde(e,t){return e.backgroundColor=e.data.map(()=>dj(t++)),t}function hde(e,t){return e.backgroundColor=e.data.map(()=>hj(t++)),t}function fde(e){let t=0;return(n,i)=>{const r=e.getDatasetMeta(i).controller;r instanceof eM?t=dde(n,t):r instanceof J$?t=hde(n,t):r&&(t=ude(n,t))}}function DB(e){let t;for(t in e)if(e[t].borderColor||e[t].backgroundColor)return!0;return!1}function mde(e){return e&&(e.borderColor||e.backgroundColor)}function pde(){return us.borderColor!=="rgba(0,0,0,0.1)"||us.backgroundColor!=="rgba(0,0,0,0.1)"}var gde={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(e,t,n){if(!n.enabled)return;const{data:{datasets:i},options:r}=e.config,{elements:a}=r,l=DB(i)||mde(r)||a&&DB(a)||pde();if(!n.forceOverride&&l)return;const h=fde(e);i.forEach(h)}};function vde(e,t,n,i,r){const a=r.samples||i;if(a>=n)return e.slice(t,t+n);const l=[],h=(n-2)/(a-2);let s=0;const p=t+n-1;let _=t,x,T,k,P,M;for(l[s++]=e[_],x=0;x<a-2;x++){let R=0,F=0,B;const H=Math.floor((x+1)*h)+1+t,G=Math.min(Math.floor((x+2)*h)+1,n)+t,ee=G-H;for(B=H;B<G;B++)R+=e[B].x,F+=e[B].y;R/=ee,F/=ee;const ie=Math.floor(x*h)+1+t,J=Math.min(Math.floor((x+1)*h)+1,n)+t,{x:$,y:W}=e[_];for(k=P=-1,B=ie;B<J;B++)P=.5*Math.abs(($-R)*(e[B].y-W)-($-e[B].x)*(F-W)),P>k&&(k=P,T=e[B],M=B);l[s++]=T,_=M}return l[s++]=e[p],l}function _de(e,t,n,i){let r=0,a=0,l,h,s,p,_,x,T,k,P,M;const R=[],F=t+n-1,B=e[t].x,G=e[F].x-B;for(l=t;l<t+n;++l){h=e[l],s=(h.x-B)/G*i,p=h.y;const ee=s|0;if(ee===_)p<P?(P=p,x=l):p>M&&(M=p,T=l),r=(a*r+h.x)/++a;else{const ie=l-1;if(!Ri(x)&&!Ri(T)){const J=Math.min(x,T),$=Math.max(x,T);J!==k&&J!==ie&&R.push({...e[J],x:r}),$!==k&&$!==ie&&R.push({...e[$],x:r})}l>0&&ie!==k&&R.push(e[ie]),R.push(h),_=ee,a=0,P=M=p,x=T=k=l}}return R}function fj(e){if(e._decimated){const t=e._data;delete e._decimated,delete e._data,Object.defineProperty(e,"data",{configurable:!0,enumerable:!0,writable:!0,value:t})}}function LB(e){e.data.datasets.forEach(t=>{fj(t)})}function yde(e,t){const n=t.length;let i=0,r;const{iScale:a}=e,{min:l,max:h,minDefined:s,maxDefined:p}=a.getUserBounds();return s&&(i=Bo(dh(t,a.axis,l).lo,0,n-1)),p?r=Bo(dh(t,a.axis,h).hi+1,i,n)-i:r=n-i,{start:i,count:r}}var bde={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(e,t,n)=>{if(!n.enabled){LB(e);return}const i=e.width;e.data.datasets.forEach((r,a)=>{const{_data:l,indexAxis:h}=r,s=e.getDatasetMeta(a),p=l||r.data;if(qy([h,e.options.indexAxis])==="y"||!s.controller.supportsDecimation)return;const _=e.scales[s.xAxisID];if(_.type!=="linear"&&_.type!=="time"||e.options.parsing)return;let{start:x,count:T}=yde(s,p);const k=n.threshold||4*i;if(T<=k){fj(r);return}Ri(l)&&(r._data=p,delete r.data,Object.defineProperty(r,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(M){this._data=M}}));let P;switch(n.algorithm){case"lttb":P=vde(p,x,T,i,n);break;case"min-max":P=_de(p,x,T,i);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}r._decimated=P})},destroy(e){LB(e)}};function xde(e,t,n){const i=e.segments,r=e.points,a=t.points,l=[];for(const h of i){let{start:s,end:p}=h;p=ZT(s,p,r);const _=rI(n,r[s],r[p],h.loop);if(!t.segments){l.push({source:h,target:_,start:r[s],end:r[p]});continue}const x=q$(t,_);for(const T of x){const k=rI(n,a[T.start],a[T.end],T.loop),P=G$(h,r,k);for(const M of P)l.push({source:M,target:T,start:{[n]:RB(_,k,"start",Math.max)},end:{[n]:RB(_,k,"end",Math.min)}})}}return l}function rI(e,t,n,i){if(i)return;let r=t[e],a=n[e];return e==="angle"&&(r=Da(r),a=Da(a)),{property:e,start:r,end:a}}function wde(e,t){const{x:n=null,y:i=null}=e||{},r=t.points,a=[];return t.segments.forEach(({start:l,end:h})=>{h=ZT(l,h,r);const s=r[l],p=r[h];i!==null?(a.push({x:s.x,y:i}),a.push({x:p.x,y:i})):n!==null&&(a.push({x:n,y:s.y}),a.push({x:n,y:p.y}))}),a}function ZT(e,t,n){for(;t>e;t--){const i=n[t];if(!isNaN(i.x)&&!isNaN(i.y))break}return t}function RB(e,t,n,i){return e&&t?i(e[n],t[n]):e?e[n]:t?t[n]:0}function mj(e,t){let n=[],i=!1;return cs(e)?(i=!0,n=e):n=wde(e,t),n.length?new YT({points:n,options:{tension:0},_loop:i,_fullLoop:i}):null}function OB(e){return e&&e.fill!==!1}function Tde(e,t,n){let r=e[t].fill;const a=[t];let l;if(!n)return r;for(;r!==!1&&a.indexOf(r)===-1;){if(!Ls(r))return r;if(l=e[r],!l)return!1;if(l.visible)return r;a.push(r),r=l.fill}return!1}function Sde(e,t,n){const i=Ide(e);if(Fi(i))return isNaN(i.value)?!1:i;let r=parseFloat(i);return Ls(r)&&Math.floor(r)===r?Ede(i[0],t,r,n):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function Ede(e,t,n,i){return(e==="-"||e==="+")&&(n=t+n),n===t||n<0||n>=i?!1:n}function Cde(e,t){let n=null;return e==="start"?n=t.bottom:e==="end"?n=t.top:Fi(e)?n=t.getPixelForValue(e.value):t.getBasePixel&&(n=t.getBasePixel()),n}function kde(e,t,n){let i;return e==="start"?i=n:e==="end"?i=t.options.reverse?t.min:t.max:Fi(e)?i=e.value:i=t.getBaseValue(),i}function Ide(e){const t=e.options,n=t.fill;let i=yi(n&&n.target,n);return i===void 0&&(i=!!t.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function Ade(e){const{scale:t,index:n,line:i}=e,r=[],a=i.segments,l=i.points,h=Pde(t,n);h.push(mj({x:null,y:t.bottom},i));for(let s=0;s<a.length;s++){const p=a[s];for(let _=p.start;_<=p.end;_++)Mde(r,l[_],h)}return new YT({points:r,options:{}})}function Pde(e,t){const n=[],i=e.getMatchingVisibleMetas("line");for(let r=0;r<i.length;r++){const a=i[r];if(a.index===t)break;a.hidden||n.unshift(a.dataset)}return n}function Mde(e,t,n){const i=[];for(let r=0;r<n.length;r++){const a=n[r],{first:l,last:h,point:s}=Dde(a,t,"x");if(!(!s||l&&h)){if(l)i.unshift(s);else if(e.push(s),!h)break}}e.push(...i)}function Dde(e,t,n){const i=e.interpolate(t,n);if(!i)return{};const r=i[n],a=e.segments,l=e.points;let h=!1,s=!1;for(let p=0;p<a.length;p++){const _=a[p],x=l[_.start][n],T=l[_.end][n];if(uh(r,x,T)){h=r===x,s=r===T;break}}return{first:h,last:s,point:i}}class pj{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,n,i){const{x:r,y:a,radius:l}=this;return n=n||{start:0,end:Jr},t.arc(r,a,l,n.end,n.start,!0),!i.bounds}interpolate(t){const{x:n,y:i,radius:r}=this,a=t.angle;return{x:n+Math.cos(a)*r,y:i+Math.sin(a)*r,angle:a}}}function Lde(e){const{chart:t,fill:n,line:i}=e;if(Ls(n))return Rde(t,n);if(n==="stack")return Ade(e);if(n==="shape")return!0;const r=Ode(e);return r instanceof pj?r:mj(r,i)}function Rde(e,t){const n=e.getDatasetMeta(t);return n&&e.isDatasetVisible(t)?n.dataset:null}function Ode(e){return(e.scale||{}).getPointPositionForValue?Bde(e):Vde(e)}function Vde(e){const{scale:t={},fill:n}=e,i=Cde(n,t);if(Ls(i)){const r=t.isHorizontal();return{x:r?i:null,y:r?null:i}}return null}function Bde(e){const{scale:t,fill:n}=e,i=t.options,r=t.getLabels().length,a=i.reverse?t.max:t.min,l=kde(n,t,a),h=[];if(i.grid.circular){const s=t.getPointPositionForValue(0,a);return new pj({x:s.x,y:s.y,radius:t.getDistanceFromCenterForValue(l)})}for(let s=0;s<r;++s)h.push(t.getPointPositionForValue(s,l));return h}function kC(e,t,n){const i=Lde(t),{chart:r,index:a,line:l,scale:h,axis:s}=t,p=l.options,_=p.fill,x=p.backgroundColor,{above:T=x,below:k=x}=_||{},P=r.getDatasetMeta(a),M=K$(r,P);i&&l.points.length&&(GT(e,n),Fde(e,{line:l,target:i,above:T,below:k,area:n,scale:h,axis:s,clip:M}),qT(e))}function Fde(e,t){const{line:n,target:i,above:r,below:a,area:l,scale:h,clip:s}=t,p=n._loop?"angle":t.axis;e.save();let _=a;a!==r&&(p==="x"?(VB(e,i,l.top),IC(e,{line:n,target:i,color:r,scale:h,property:p,clip:s}),e.restore(),e.save(),VB(e,i,l.bottom)):p==="y"&&(BB(e,i,l.left),IC(e,{line:n,target:i,color:a,scale:h,property:p,clip:s}),e.restore(),e.save(),BB(e,i,l.right),_=r)),IC(e,{line:n,target:i,color:_,scale:h,property:p,clip:s}),e.restore()}function VB(e,t,n){const{segments:i,points:r}=t;let a=!0,l=!1;e.beginPath();for(const h of i){const{start:s,end:p}=h,_=r[s],x=r[ZT(s,p,r)];a?(e.moveTo(_.x,_.y),a=!1):(e.lineTo(_.x,n),e.lineTo(_.x,_.y)),l=!!t.pathSegment(e,h,{move:l}),l?e.closePath():e.lineTo(x.x,n)}e.lineTo(t.first().x,n),e.closePath(),e.clip()}function BB(e,t,n){const{segments:i,points:r}=t;let a=!0,l=!1;e.beginPath();for(const h of i){const{start:s,end:p}=h,_=r[s],x=r[ZT(s,p,r)];a?(e.moveTo(_.x,_.y),a=!1):(e.lineTo(n,_.y),e.lineTo(_.x,_.y)),l=!!t.pathSegment(e,h,{move:l}),l?e.closePath():e.lineTo(n,x.y)}e.lineTo(n,t.first().y),e.closePath(),e.clip()}function IC(e,t){const{line:n,target:i,property:r,color:a,scale:l,clip:h}=t,s=xde(n,i,r);for(const{source:p,target:_,start:x,end:T}of s){const{style:{backgroundColor:k=a}={}}=p,P=i!==!0;e.save(),e.fillStyle=k,zde(e,l,h,P&&rI(r,x,T)),e.beginPath();const M=!!n.pathSegment(e,p);let R;if(P){M?e.closePath():FB(e,i,T,r);const F=!!i.pathSegment(e,_,{move:M,reverse:!0});R=M&&F,R||FB(e,i,x,r)}e.closePath(),e.fill(R?"evenodd":"nonzero"),e.restore()}}function zde(e,t,n,i){const r=t.chart.chartArea,{property:a,start:l,end:h}=i||{};if(a==="x"||a==="y"){let s,p,_,x;a==="x"?(s=l,p=r.top,_=h,x=r.bottom):(s=r.left,p=l,_=r.right,x=h),e.beginPath(),n&&(s=Math.max(s,n.left),_=Math.min(_,n.right),p=Math.max(p,n.top),x=Math.min(x,n.bottom)),e.rect(s,p,_-s,x-p),e.clip()}}function FB(e,t,n,i){const r=t.interpolate(n,i);r&&e.lineTo(r.x,r.y)}var Nde={id:"filler",afterDatasetsUpdate(e,t,n){const i=(e.data.datasets||[]).length,r=[];let a,l,h,s;for(l=0;l<i;++l)a=e.getDatasetMeta(l),h=a.dataset,s=null,h&&h.options&&h instanceof YT&&(s={visible:e.isDatasetVisible(l),index:l,fill:Sde(h,l,i),chart:e,axis:a.controller.options.indexAxis,scale:a.vScale,line:h}),a.$filler=s,r.push(s);for(l=0;l<i;++l)s=r[l],!(!s||s.fill===!1)&&(s.fill=Tde(r,l,n.propagate))},beforeDraw(e,t,n){const i=n.drawTime==="beforeDraw",r=e.getSortedVisibleDatasetMetas(),a=e.chartArea;for(let l=r.length-1;l>=0;--l){const h=r[l].$filler;h&&(h.line.updateControlPoints(a,h.axis),i&&h.fill&&kC(e.ctx,h,a))}},beforeDatasetsDraw(e,t,n){if(n.drawTime!=="beforeDatasetsDraw")return;const i=e.getSortedVisibleDatasetMetas();for(let r=i.length-1;r>=0;--r){const a=i[r].$filler;OB(a)&&kC(e.ctx,a,e.chartArea)}},beforeDatasetDraw(e,t,n){const i=t.meta.$filler;!OB(i)||n.drawTime!=="beforeDatasetDraw"||kC(e.ctx,i,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const zB=(e,t)=>{let{boxHeight:n=t,boxWidth:i=t}=e;return e.usePointStyle&&(n=Math.min(n,t),i=e.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(t,n)}},Ude=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class NB extends Rh{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n,i){this.maxWidth=t,this.maxHeight=n,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let n=Gr(t.generateLabels,[this.chart],this)||[];t.filter&&(n=n.filter(i=>t.filter(i,this.chart.data))),t.sort&&(n=n.sort((i,r)=>t.sort(i,r,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:t,ctx:n}=this;if(!t.display){this.width=this.height=0;return}const i=t.labels,r=go(i.font),a=r.size,l=this._computeTitleHeight(),{boxWidth:h,itemHeight:s}=zB(i,a);let p,_;n.font=r.string,this.isHorizontal()?(p=this.maxWidth,_=this._fitRows(l,a,h,s)+10):(_=this.maxHeight,p=this._fitCols(l,r,h,s)+10),this.width=Math.min(p,t.maxWidth||this.maxWidth),this.height=Math.min(_,t.maxHeight||this.maxHeight)}_fitRows(t,n,i,r){const{ctx:a,maxWidth:l,options:{labels:{padding:h}}}=this,s=this.legendHitBoxes=[],p=this.lineWidths=[0],_=r+h;let x=t;a.textAlign="left",a.textBaseline="middle";let T=-1,k=-_;return this.legendItems.forEach((P,M)=>{const R=i+n/2+a.measureText(P.text).width;(M===0||p[p.length-1]+R+2*h>l)&&(x+=_,p[p.length-(M>0?0:1)]=0,k+=_,T++),s[M]={left:0,top:k,row:T,width:R,height:r},p[p.length-1]+=R+h}),x}_fitCols(t,n,i,r){const{ctx:a,maxHeight:l,options:{labels:{padding:h}}}=this,s=this.legendHitBoxes=[],p=this.columnSizes=[],_=l-t;let x=h,T=0,k=0,P=0,M=0;return this.legendItems.forEach((R,F)=>{const{itemWidth:B,itemHeight:H}=$de(i,n,a,R,r);F>0&&k+H+2*h>_&&(x+=T+h,p.push({width:T,height:k}),P+=T+h,M++,T=k=0),s[F]={left:P,top:k,col:M,width:B,height:H},T=Math.max(T,B),k+=H+h}),x+=T,p.push({width:T,height:k}),x}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:i,labels:{padding:r},rtl:a}}=this,l=Fv(a,this.left,this.width);if(this.isHorizontal()){let h=0,s=Aa(i,this.left+r,this.right-this.lineWidths[h]);for(const p of n)h!==p.row&&(h=p.row,s=Aa(i,this.left+r,this.right-this.lineWidths[h])),p.top+=this.top+t+r,p.left=l.leftForLtr(l.x(s),p.width),s+=p.width+r}else{let h=0,s=Aa(i,this.top+t+r,this.bottom-this.columnSizes[h].height);for(const p of n)p.col!==h&&(h=p.col,s=Aa(i,this.top+t+r,this.bottom-this.columnSizes[h].height)),p.top=s,p.left+=this.left+r,p.left=l.leftForLtr(l.x(p.left),p.width),s+=p.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;GT(t,this),this._draw(),qT(t)}}_draw(){const{options:t,columnSizes:n,lineWidths:i,ctx:r}=this,{align:a,labels:l}=t,h=us.color,s=Fv(t.rtl,this.left,this.width),p=go(l.font),{padding:_}=l,x=p.size,T=x/2;let k;this.drawTitle(),r.textAlign=s.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=p.string;const{boxWidth:P,boxHeight:M,itemHeight:R}=zB(l,x),F=function(ie,J,$){if(isNaN(P)||P<=0||isNaN(M)||M<0)return;r.save();const W=yi($.lineWidth,1);if(r.fillStyle=yi($.fillStyle,h),r.lineCap=yi($.lineCap,"butt"),r.lineDashOffset=yi($.lineDashOffset,0),r.lineJoin=yi($.lineJoin,"miter"),r.lineWidth=W,r.strokeStyle=yi($.strokeStyle,h),r.setLineDash(yi($.lineDash,[])),l.usePointStyle){const X={radius:M*Math.SQRT2/2,pointStyle:$.pointStyle,rotation:$.rotation,borderWidth:W},re=s.xPlus(ie,P/2),Y=J+T;O$(r,X,re,Y,l.pointStyleWidth&&P)}else{const X=J+Math.max((x-M)/2,0),re=s.leftForLtr(ie,P),Y=Op($.borderRadius);r.beginPath(),Object.values(Y).some(Z=>Z!==0)?i0(r,{x:re,y:X,w:P,h:M,radius:Y}):r.rect(re,X,P,M),r.fill(),W!==0&&r.stroke()}r.restore()},B=function(ie,J,$){Kp(r,$.text,ie,J+R/2,p,{strikethrough:$.hidden,textAlign:s.textAlign($.textAlign)})},H=this.isHorizontal(),G=this._computeTitleHeight();H?k={x:Aa(a,this.left+_,this.right-i[0]),y:this.top+_+G,line:0}:k={x:this.left+_,y:Aa(a,this.top+G+_,this.bottom-n[0].height),line:0},j$(this.ctx,t.textDirection);const ee=R+_;this.legendItems.forEach((ie,J)=>{r.strokeStyle=ie.fontColor,r.fillStyle=ie.fontColor;const $=r.measureText(ie.text).width,W=s.textAlign(ie.textAlign||(ie.textAlign=l.textAlign)),X=P+T+$;let re=k.x,Y=k.y;s.setWidth(this.width),H?J>0&&re+X+_>this.right&&(Y=k.y+=ee,k.line++,re=k.x=Aa(a,this.left+_,this.right-i[k.line])):J>0&&Y+ee>this.bottom&&(re=k.x=re+n[k.line].width+_,k.line++,Y=k.y=Aa(a,this.top+G+_,this.bottom-n[k.line].height));const Z=s.x(re);if(F(Z,Y,ie),re=Jae(W,re+P+T,H?re+X:this.right,t.rtl),B(s.x(re),Y,ie),H)k.x+=X+_;else if(typeof ie.text!="string"){const ge=p.lineHeight;k.y+=gj(ie,ge)+_}else k.y+=ee}),W$(this.ctx,t.textDirection)}drawTitle(){const t=this.options,n=t.title,i=go(n.font),r=Ha(n.padding);if(!n.display)return;const a=Fv(t.rtl,this.left,this.width),l=this.ctx,h=n.position,s=i.size/2,p=r.top+s;let _,x=this.left,T=this.width;if(this.isHorizontal())T=Math.max(...this.lineWidths),_=this.top+p,x=Aa(t.align,x,this.right-T);else{const P=this.columnSizes.reduce((M,R)=>Math.max(M,R.height),0);_=p+Aa(t.align,this.top,this.bottom-P-t.labels.padding-this._computeTitleHeight())}const k=Aa(h,x,x+T);l.textAlign=a.textAlign(GP(h)),l.textBaseline="middle",l.strokeStyle=n.color,l.fillStyle=n.color,l.font=i.string,Kp(l,n.text,k,_,i)}_computeTitleHeight(){const t=this.options.title,n=go(t.font),i=Ha(t.padding);return t.display?n.lineHeight+i.height:0}_getLegendItemAt(t,n){let i,r,a;if(uh(t,this.left,this.right)&&uh(n,this.top,this.bottom)){for(a=this.legendHitBoxes,i=0;i<a.length;++i)if(r=a[i],uh(t,r.left,r.left+r.width)&&uh(n,r.top,r.top+r.height))return this.legendItems[i]}return null}handleEvent(t){const n=this.options;if(!Hde(t.type,n))return;const i=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const r=this._hoveredItem,a=Ude(r,i);r&&!a&&Gr(n.onLeave,[t,r,this],this),this._hoveredItem=i,i&&!a&&Gr(n.onHover,[t,i,this],this)}else i&&Gr(n.onClick,[t,i,this],this)}}function $de(e,t,n,i,r){const a=jde(i,e,t,n),l=Wde(r,i,t.lineHeight);return{itemWidth:a,itemHeight:l}}function jde(e,t,n,i){let r=e.text;return r&&typeof r!="string"&&(r=r.reduce((a,l)=>a.length>l.length?a:l)),t+n.size/2+i.measureText(r).width}function Wde(e,t,n){let i=e;return typeof t.text!="string"&&(i=gj(t,n)),i}function gj(e,t){const n=e.text?e.text.length:0;return t*n}function Hde(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var Gde={id:"legend",_element:NB,start(e,t,n){const i=e.legend=new NB({ctx:e.ctx,options:n,chart:e});Na.configure(e,i,n),Na.addBox(e,i)},stop(e){Na.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const i=e.legend;Na.configure(e,i,n),i.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const i=t.datasetIndex,r=n.chart;r.isDatasetVisible(i)?(r.hide(i),t.hidden=!0):(r.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:r,color:a,useBorderRadius:l,borderRadius:h}}=e.legend.options;return e._getSortedDatasetMetas().map(s=>{const p=s.controller.getStyle(n?0:void 0),_=Ha(p.borderWidth);return{text:t[s.index].label,fillStyle:p.backgroundColor,fontColor:a,hidden:!s.visible,lineCap:p.borderCapStyle,lineDash:p.borderDash,lineDashOffset:p.borderDashOffset,lineJoin:p.borderJoinStyle,lineWidth:(_.width+_.height)/4,strokeStyle:p.borderColor,pointStyle:i||p.pointStyle,rotation:p.rotation,textAlign:r||p.textAlign,borderRadius:l&&(h||p.borderRadius),datasetIndex:s.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class iM extends Rh{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=n;const r=cs(i.text)?i.text.length:1;this._padding=Ha(i.padding);const a=r*go(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=a:this.width=a}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:n,left:i,bottom:r,right:a,options:l}=this,h=l.align;let s=0,p,_,x;return this.isHorizontal()?(_=Aa(h,i,a),x=n+t,p=a-i):(l.position==="left"?(_=i+t,x=Aa(h,r,n),s=ur*-.5):(_=a-t,x=Aa(h,n,r),s=ur*.5),p=r-n),{titleX:_,titleY:x,maxWidth:p,rotation:s}}draw(){const t=this.ctx,n=this.options;if(!n.display)return;const i=go(n.font),a=i.lineHeight/2+this._padding.top,{titleX:l,titleY:h,maxWidth:s,rotation:p}=this._drawArgs(a);Kp(t,n.text,0,0,i,{color:n.color,maxWidth:s,rotation:p,textAlign:GP(n.align),textBaseline:"middle",translation:[l,h]})}}function qde(e,t){const n=new iM({ctx:e.ctx,options:t,chart:e});Na.configure(e,n,t),Na.addBox(e,n),e.titleBlock=n}var Kde={id:"title",_element:iM,start(e,t,n){qde(e,n)},stop(e){const t=e.titleBlock;Na.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const i=e.titleBlock;Na.configure(e,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const aw=new WeakMap;var Xde={id:"subtitle",start(e,t,n){const i=new iM({ctx:e.ctx,options:n,chart:e});Na.configure(e,i,n),Na.addBox(e,i),aw.set(e,i)},stop(e){Na.removeBox(e,aw.get(e)),aw.delete(e)},beforeUpdate(e,t,n){const i=aw.get(e);Na.configure(e,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Xy={average(e){if(!e.length)return!1;let t,n,i=new Set,r=0,a=0;for(t=0,n=e.length;t<n;++t){const h=e[t].element;if(h&&h.hasValue()){const s=h.tooltipPosition();i.add(s.x),r+=s.y,++a}}return a===0||i.size===0?!1:{x:[...i].reduce((h,s)=>h+s)/i.size,y:r/a}},nearest(e,t){if(!e.length)return!1;let n=t.x,i=t.y,r=Number.POSITIVE_INFINITY,a,l,h;for(a=0,l=e.length;a<l;++a){const s=e[a].element;if(s&&s.hasValue()){const p=s.getCenterPoint(),_=Zk(t,p);_<r&&(r=_,h=s)}}if(h){const s=h.tooltipPosition();n=s.x,i=s.y}return{x:n,y:i}}};function Uu(e,t){return t&&(cs(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function Jd(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function Yde(e,t){const{element:n,datasetIndex:i,index:r}=t,a=e.getDatasetMeta(i).controller,{label:l,value:h}=a.getLabelAndValue(r);return{chart:e,label:l,parsed:a.getParsed(r),raw:e.data.datasets[i].data[r],formattedValue:h,dataset:a.getDataset(),dataIndex:r,datasetIndex:i,element:n}}function UB(e,t){const n=e.chart.ctx,{body:i,footer:r,title:a}=e,{boxWidth:l,boxHeight:h}=t,s=go(t.bodyFont),p=go(t.titleFont),_=go(t.footerFont),x=a.length,T=r.length,k=i.length,P=Ha(t.padding);let M=P.height,R=0,F=i.reduce((G,ee)=>G+ee.before.length+ee.lines.length+ee.after.length,0);if(F+=e.beforeBody.length+e.afterBody.length,x&&(M+=x*p.lineHeight+(x-1)*t.titleSpacing+t.titleMarginBottom),F){const G=t.displayColors?Math.max(h,s.lineHeight):s.lineHeight;M+=k*G+(F-k)*s.lineHeight+(F-1)*t.bodySpacing}T&&(M+=t.footerMarginTop+T*_.lineHeight+(T-1)*t.footerSpacing);let B=0;const H=function(G){R=Math.max(R,n.measureText(G).width+B)};return n.save(),n.font=p.string,Ir(e.title,H),n.font=s.string,Ir(e.beforeBody.concat(e.afterBody),H),B=t.displayColors?l+2+t.boxPadding:0,Ir(i,G=>{Ir(G.before,H),Ir(G.lines,H),Ir(G.after,H)}),B=0,n.font=_.string,Ir(e.footer,H),n.restore(),R+=P.width,{width:R,height:M}}function Zde(e,t){const{y:n,height:i}=t;return n<i/2?"top":n>e.height-i/2?"bottom":"center"}function Jde(e,t,n,i){const{x:r,width:a}=i,l=n.caretSize+n.caretPadding;if(e==="left"&&r+a+l>t.width||e==="right"&&r-a-l<0)return!0}function Qde(e,t,n,i){const{x:r,width:a}=n,{width:l,chartArea:{left:h,right:s}}=e;let p="center";return i==="center"?p=r<=(h+s)/2?"left":"right":r<=a/2?p="left":r>=l-a/2&&(p="right"),Jde(p,e,t,n)&&(p="center"),p}function $B(e,t,n){const i=n.yAlign||t.yAlign||Zde(e,n);return{xAlign:n.xAlign||t.xAlign||Qde(e,t,n,i),yAlign:i}}function ehe(e,t){let{x:n,width:i}=e;return t==="right"?n-=i:t==="center"&&(n-=i/2),n}function the(e,t,n){let{y:i,height:r}=e;return t==="top"?i+=n:t==="bottom"?i-=r+n:i-=r/2,i}function jB(e,t,n,i){const{caretSize:r,caretPadding:a,cornerRadius:l}=e,{xAlign:h,yAlign:s}=n,p=r+a,{topLeft:_,topRight:x,bottomLeft:T,bottomRight:k}=Op(l);let P=ehe(t,h);const M=the(t,s,p);return s==="center"?h==="left"?P+=p:h==="right"&&(P-=p):h==="left"?P-=Math.max(_,T)+r:h==="right"&&(P+=Math.max(x,k)+r),{x:Bo(P,0,i.width-t.width),y:Bo(M,0,i.height-t.height)}}function lw(e,t,n){const i=Ha(n.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-i.right:e.x+i.left}function WB(e){return Uu([],Jd(e))}function nhe(e,t,n){return _m(e,{tooltip:t,tooltipItems:n,type:"tooltip"})}function HB(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const vj={beforeTitle:Yd,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,i=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return n[t.dataIndex]}return""},afterTitle:Yd,beforeBody:Yd,beforeLabel:Yd,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return Ri(n)||(t+=n),t},labelColor(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Yd,afterBody:Yd,beforeFooter:Yd,footer:Yd,afterFooter:Yd};function Cl(e,t,n,i){const r=e[t].call(n,i);return typeof r>"u"?vj[t].call(n,i):r}let GB=class extends Rh{static positioners=Xy;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const n=this.chart,i=this.options.setContext(this.getContext()),r=i.enabled&&n.options.animation&&i.animations,a=new X$(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(a)),a}getContext(){return this.$context||(this.$context=nhe(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,n){const{callbacks:i}=n,r=Cl(i,"beforeTitle",this,t),a=Cl(i,"title",this,t),l=Cl(i,"afterTitle",this,t);let h=[];return h=Uu(h,Jd(r)),h=Uu(h,Jd(a)),h=Uu(h,Jd(l)),h}getBeforeBody(t,n){return WB(Cl(n.callbacks,"beforeBody",this,t))}getBody(t,n){const{callbacks:i}=n,r=[];return Ir(t,a=>{const l={before:[],lines:[],after:[]},h=HB(i,a);Uu(l.before,Jd(Cl(h,"beforeLabel",this,a))),Uu(l.lines,Cl(h,"label",this,a)),Uu(l.after,Jd(Cl(h,"afterLabel",this,a))),r.push(l)}),r}getAfterBody(t,n){return WB(Cl(n.callbacks,"afterBody",this,t))}getFooter(t,n){const{callbacks:i}=n,r=Cl(i,"beforeFooter",this,t),a=Cl(i,"footer",this,t),l=Cl(i,"afterFooter",this,t);let h=[];return h=Uu(h,Jd(r)),h=Uu(h,Jd(a)),h=Uu(h,Jd(l)),h}_createItems(t){const n=this._active,i=this.chart.data,r=[],a=[],l=[];let h=[],s,p;for(s=0,p=n.length;s<p;++s)h.push(Yde(this.chart,n[s]));return t.filter&&(h=h.filter((_,x,T)=>t.filter(_,x,T,i))),t.itemSort&&(h=h.sort((_,x)=>t.itemSort(_,x,i))),Ir(h,_=>{const x=HB(t.callbacks,_);r.push(Cl(x,"labelColor",this,_)),a.push(Cl(x,"labelPointStyle",this,_)),l.push(Cl(x,"labelTextColor",this,_))}),this.labelColors=r,this.labelPointStyles=a,this.labelTextColors=l,this.dataPoints=h,h}update(t,n){const i=this.options.setContext(this.getContext()),r=this._active;let a,l=[];if(!r.length)this.opacity!==0&&(a={opacity:0});else{const h=Xy[i.position].call(this,r,this._eventPosition);l=this._createItems(i),this.title=this.getTitle(l,i),this.beforeBody=this.getBeforeBody(l,i),this.body=this.getBody(l,i),this.afterBody=this.getAfterBody(l,i),this.footer=this.getFooter(l,i);const s=this._size=UB(this,i),p=Object.assign({},h,s),_=$B(this.chart,i,p),x=jB(i,p,_,this.chart);this.xAlign=_.xAlign,this.yAlign=_.yAlign,a={opacity:1,x:x.x,y:x.y,width:s.width,height:s.height,caretX:h.x,caretY:h.y}}this._tooltipItems=l,this.$context=void 0,a&&this._resolveAnimations().update(this,a),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(t,n,i,r){const a=this.getCaretPosition(t,i,r);n.lineTo(a.x1,a.y1),n.lineTo(a.x2,a.y2),n.lineTo(a.x3,a.y3)}getCaretPosition(t,n,i){const{xAlign:r,yAlign:a}=this,{caretSize:l,cornerRadius:h}=i,{topLeft:s,topRight:p,bottomLeft:_,bottomRight:x}=Op(h),{x:T,y:k}=t,{width:P,height:M}=n;let R,F,B,H,G,ee;return a==="center"?(G=k+M/2,r==="left"?(R=T,F=R-l,H=G+l,ee=G-l):(R=T+P,F=R+l,H=G-l,ee=G+l),B=R):(r==="left"?F=T+Math.max(s,_)+l:r==="right"?F=T+P-Math.max(p,x)-l:F=this.caretX,a==="top"?(H=k,G=H-l,R=F-l,B=F+l):(H=k+M,G=H+l,R=F+l,B=F-l),ee=H),{x1:R,x2:F,x3:B,y1:H,y2:G,y3:ee}}drawTitle(t,n,i){const r=this.title,a=r.length;let l,h,s;if(a){const p=Fv(i.rtl,this.x,this.width);for(t.x=lw(this,i.titleAlign,i),n.textAlign=p.textAlign(i.titleAlign),n.textBaseline="middle",l=go(i.titleFont),h=i.titleSpacing,n.fillStyle=i.titleColor,n.font=l.string,s=0;s<a;++s)n.fillText(r[s],p.x(t.x),t.y+l.lineHeight/2),t.y+=l.lineHeight+h,s+1===a&&(t.y+=i.titleMarginBottom-h)}}_drawColorBox(t,n,i,r,a){const l=this.labelColors[i],h=this.labelPointStyles[i],{boxHeight:s,boxWidth:p}=a,_=go(a.bodyFont),x=lw(this,"left",a),T=r.x(x),k=s<_.lineHeight?(_.lineHeight-s)/2:0,P=n.y+k;if(a.usePointStyle){const M={radius:Math.min(p,s)/2,pointStyle:h.pointStyle,rotation:h.rotation,borderWidth:1},R=r.leftForLtr(T,p)+p/2,F=P+s/2;t.strokeStyle=a.multiKeyBackground,t.fillStyle=a.multiKeyBackground,Qk(t,M,R,F),t.strokeStyle=l.borderColor,t.fillStyle=l.backgroundColor,Qk(t,M,R,F)}else{t.lineWidth=Fi(l.borderWidth)?Math.max(...Object.values(l.borderWidth)):l.borderWidth||1,t.strokeStyle=l.borderColor,t.setLineDash(l.borderDash||[]),t.lineDashOffset=l.borderDashOffset||0;const M=r.leftForLtr(T,p),R=r.leftForLtr(r.xPlus(T,1),p-2),F=Op(l.borderRadius);Object.values(F).some(B=>B!==0)?(t.beginPath(),t.fillStyle=a.multiKeyBackground,i0(t,{x:M,y:P,w:p,h:s,radius:F}),t.fill(),t.stroke(),t.fillStyle=l.backgroundColor,t.beginPath(),i0(t,{x:R,y:P+1,w:p-2,h:s-2,radius:F}),t.fill()):(t.fillStyle=a.multiKeyBackground,t.fillRect(M,P,p,s),t.strokeRect(M,P,p,s),t.fillStyle=l.backgroundColor,t.fillRect(R,P+1,p-2,s-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,n,i){const{body:r}=this,{bodySpacing:a,bodyAlign:l,displayColors:h,boxHeight:s,boxWidth:p,boxPadding:_}=i,x=go(i.bodyFont);let T=x.lineHeight,k=0;const P=Fv(i.rtl,this.x,this.width),M=function($){n.fillText($,P.x(t.x+k),t.y+T/2),t.y+=T+a},R=P.textAlign(l);let F,B,H,G,ee,ie,J;for(n.textAlign=l,n.textBaseline="middle",n.font=x.string,t.x=lw(this,R,i),n.fillStyle=i.bodyColor,Ir(this.beforeBody,M),k=h&&R!=="right"?l==="center"?p/2+_:p+2+_:0,G=0,ie=r.length;G<ie;++G){for(F=r[G],B=this.labelTextColors[G],n.fillStyle=B,Ir(F.before,M),H=F.lines,h&&H.length&&(this._drawColorBox(n,t,G,P,i),T=Math.max(x.lineHeight,s)),ee=0,J=H.length;ee<J;++ee)M(H[ee]),T=x.lineHeight;Ir(F.after,M)}k=0,T=x.lineHeight,Ir(this.afterBody,M),t.y-=a}drawFooter(t,n,i){const r=this.footer,a=r.length;let l,h;if(a){const s=Fv(i.rtl,this.x,this.width);for(t.x=lw(this,i.footerAlign,i),t.y+=i.footerMarginTop,n.textAlign=s.textAlign(i.footerAlign),n.textBaseline="middle",l=go(i.footerFont),n.fillStyle=i.footerColor,n.font=l.string,h=0;h<a;++h)n.fillText(r[h],s.x(t.x),t.y+l.lineHeight/2),t.y+=l.lineHeight+i.footerSpacing}}drawBackground(t,n,i,r){const{xAlign:a,yAlign:l}=this,{x:h,y:s}=t,{width:p,height:_}=i,{topLeft:x,topRight:T,bottomLeft:k,bottomRight:P}=Op(r.cornerRadius);n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.beginPath(),n.moveTo(h+x,s),l==="top"&&this.drawCaret(t,n,i,r),n.lineTo(h+p-T,s),n.quadraticCurveTo(h+p,s,h+p,s+T),l==="center"&&a==="right"&&this.drawCaret(t,n,i,r),n.lineTo(h+p,s+_-P),n.quadraticCurveTo(h+p,s+_,h+p-P,s+_),l==="bottom"&&this.drawCaret(t,n,i,r),n.lineTo(h+k,s+_),n.quadraticCurveTo(h,s+_,h,s+_-k),l==="center"&&a==="left"&&this.drawCaret(t,n,i,r),n.lineTo(h,s+x),n.quadraticCurveTo(h,s,h+x,s),n.closePath(),n.fill(),r.borderWidth>0&&n.stroke()}_updateAnimationTarget(t){const n=this.chart,i=this.$animations,r=i&&i.x,a=i&&i.y;if(r||a){const l=Xy[t.position].call(this,this._active,this._eventPosition);if(!l)return;const h=this._size=UB(this,t),s=Object.assign({},l,this._size),p=$B(n,t,s),_=jB(t,s,p,n);(r._to!==_.x||a._to!==_.y)&&(this.xAlign=p.xAlign,this.yAlign=p.yAlign,this.width=h.width,this.height=h.height,this.caretX=l.x,this.caretY=l.y,this._resolveAnimations().update(this,_))}}_willRender(){return!!this.opacity}draw(t){const n=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(n);const r={width:this.width,height:this.height},a={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const l=Ha(n.padding),h=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&h&&(t.save(),t.globalAlpha=i,this.drawBackground(a,t,r,n),j$(t,n.textDirection),a.y+=l.top,this.drawTitle(a,t,n),this.drawBody(a,t,n),this.drawFooter(a,t,n),W$(t,n.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,n){const i=this._active,r=t.map(({datasetIndex:h,index:s})=>{const p=this.chart.getDatasetMeta(h);if(!p)throw new Error("Cannot find a dataset at index "+h);return{datasetIndex:h,element:p.data[s],index:s}}),a=!N1(i,r),l=this._positionChanged(r,n);(a||l)&&(this._active=r,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,n,i=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,a=this._active||[],l=this._getActiveElements(t,a,n,i),h=this._positionChanged(l,t),s=n||!N1(l,a)||h;return s&&(this._active=l,(r.enabled||r.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,n))),s}_getActiveElements(t,n,i,r){const a=this.options;if(t.type==="mouseout")return[];if(!r)return n.filter(h=>this.chart.data.datasets[h.datasetIndex]&&this.chart.getDatasetMeta(h.datasetIndex).controller.getParsed(h.index)!==void 0);const l=this.chart.getElementsAtEventForMode(t,a.mode,a,i);return a.reverse&&l.reverse(),l}_positionChanged(t,n){const{caretX:i,caretY:r,options:a}=this,l=Xy[a.position].call(this,t,n);return l!==!1&&(i!==l.x||r!==l.y)}};var ihe={id:"tooltip",_element:GB,positioners:Xy,afterInit(e,t,n){n&&(e.tooltip=new GB({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:vj},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},rhe=Object.freeze({__proto__:null,Colors:gde,Decimation:bde,Filler:Nde,Legend:Gde,SubTitle:Xde,Title:Kde,Tooltip:ihe});const she=(e,t,n,i)=>(typeof t=="string"?(n=e.push(t)-1,i.unshift({index:n,label:t})):isNaN(t)&&(n=null),n);function ohe(e,t,n,i){const r=e.indexOf(t);if(r===-1)return she(e,t,n,i);const a=e.lastIndexOf(t);return r!==a?n:r}const ahe=(e,t)=>e===null?null:Bo(Math.round(e),0,t);function qB(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class lhe extends mg{static id="category";static defaults={ticks:{callback:qB}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const n=this._addedLabels;if(n.length){const i=this.getLabels();for(const{index:r,label:a}of n)i[r]===a&&i.splice(r,1);this._addedLabels=[]}super.init(t)}parse(t,n){if(Ri(t))return null;const i=this.getLabels();return n=isFinite(n)&&i[n]===t?n:ohe(i,t,yi(n,t),this._addedLabels),ahe(n,i.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:i,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(i=0),n||(r=this.getLabels().length-1)),this.min=i,this.max=r}buildTicks(){const t=this.min,n=this.max,i=this.options.offset,r=[];let a=this.getLabels();a=t===0&&n===a.length-1?a:a.slice(t,n+1),this._valueRange=Math.max(a.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let l=t;l<=n;l++)r.push({value:l});return r}getLabelForValue(t){return qB.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}function che(e,t){const n=[],{bounds:r,step:a,min:l,max:h,precision:s,count:p,maxTicks:_,maxDigits:x,includeBounds:T}=e,k=a||1,P=_-1,{min:M,max:R}=t,F=!Ri(l),B=!Ri(h),H=!Ri(p),G=(R-M)/(x+1);let ee=U3((R-M)/P/k)*k,ie,J,$,W;if(ee<1e-14&&!F&&!B)return[{value:M},{value:R}];W=Math.ceil(R/ee)-Math.floor(M/ee),W>P&&(ee=U3(W*ee/P/k)*k),Ri(s)||(ie=Math.pow(10,s),ee=Math.ceil(ee*ie)/ie),r==="ticks"?(J=Math.floor(M/ee)*ee,$=Math.ceil(R/ee)*ee):(J=M,$=R),F&&B&&a&&Hae((h-l)/a,ee/1e3)?(W=Math.round(Math.min((h-l)/ee,_)),ee=(h-l)/W,J=l,$=h):H?(J=F?l:J,$=B?h:$,W=p-1,ee=($-J)/W):(W=($-J)/ee,gb(W,Math.round(W),ee/1e3)?W=Math.round(W):W=Math.ceil(W));const X=Math.max($3(ee),$3(J));ie=Math.pow(10,Ri(s)?X:s),J=Math.round(J*ie)/ie,$=Math.round($*ie)/ie;let re=0;for(F&&(T&&J!==l?(n.push({value:l}),J<l&&re++,gb(Math.round((J+re*ee)*ie)/ie,l,KB(l,G,e))&&re++):J<l&&re++);re<W;++re){const Y=Math.round((J+re*ee)*ie)/ie;if(B&&Y>h)break;n.push({value:Y})}return B&&T&&$!==h?n.length&&gb(n[n.length-1].value,h,KB(h,G,e))?n[n.length-1].value=h:n.push({value:h}):(!B||$===h)&&n.push({value:$}),n}function KB(e,t,{horizontal:n,minRotation:i}){const r=du(i),a=(n?Math.sin(r):Math.cos(r))||.001,l=.75*t*(""+e).length;return Math.min(t/a,l)}class q1 extends mg{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,n){return Ri(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:n,maxDefined:i}=this.getUserBounds();let{min:r,max:a}=this;const l=s=>r=n?r:s,h=s=>a=i?a:s;if(t){const s=id(r),p=id(a);s<0&&p<0?h(0):s>0&&p>0&&l(0)}if(r===a){let s=a===0?1:Math.abs(a*.05);h(a+s),t||l(r-s)}this.min=r,this.max=a}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:n,stepSize:i}=t,r;return i?(r=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),n=n||11),n&&(r=Math.min(n,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,n=t.ticks;let i=this.getTickLimit();i=Math.max(2,i);const r={maxTicks:i,bounds:t.bounds,min:t.min,max:t.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},a=this._range||this,l=che(r,a);return t.bounds==="ticks"&&C$(l,this,"value"),t.reverse?(l.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),l}configure(){const t=this.ticks;let n=this.min,i=this.max;if(super.configure(),this.options.offset&&t.length){const r=(i-n)/Math.max(t.length-1,1)/2;n-=r,i+=r}this._startValue=n,this._endValue=i,this._valueRange=i-n}getLabelForValue(t){return H0(t,this.chart.options.locale,this.options.ticks.format)}}class uhe extends q1{static id="linear";static defaults={ticks:{callback:HT.formatters.numeric}};determineDataLimits(){const{min:t,max:n}=this.getMinMax(!0);this.min=Ls(t)?t:0,this.max=Ls(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),n=t?this.width:this.height,i=du(this.options.ticks.minRotation),r=(t?Math.sin(i):Math.cos(i))||.001,a=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,a.lineHeight/r))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}const s0=e=>Math.floor(Rf(e)),hp=(e,t)=>Math.pow(10,s0(e)+t);function XB(e){return e/Math.pow(10,s0(e))===1}function YB(e,t,n){const i=Math.pow(10,n),r=Math.floor(e/i);return Math.ceil(t/i)-r}function dhe(e,t){const n=t-e;let i=s0(n);for(;YB(e,t,i)>10;)i++;for(;YB(e,t,i)<10;)i--;return Math.min(i,s0(e))}function hhe(e,{min:t,max:n}){t=Yl(e.min,t);const i=[],r=s0(t);let a=dhe(t,n),l=a<0?Math.pow(10,Math.abs(a)):1;const h=Math.pow(10,a),s=r>a?Math.pow(10,r):0,p=Math.round((t-s)*l)/l,_=Math.floor((t-s)/h/10)*h*10;let x=Math.floor((p-_)/Math.pow(10,a)),T=Yl(e.min,Math.round((s+_+x*Math.pow(10,a))*l)/l);for(;T<n;)i.push({value:T,major:XB(T),significand:x}),x>=10?x=x<15?15:20:x++,x>=20&&(a++,x=2,l=a>=0?1:l),T=Math.round((s+_+x*Math.pow(10,a))*l)/l;const k=Yl(e.max,T);return i.push({value:k,major:XB(k),significand:x}),i}class fhe extends mg{static id="logarithmic";static defaults={ticks:{callback:HT.formatters.logarithmic,major:{enabled:!0}}};constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,n){const i=q1.prototype.parse.apply(this,[t,n]);if(i===0){this._zero=!0;return}return Ls(i)&&i>0?i:null}determineDataLimits(){const{min:t,max:n}=this.getMinMax(!0);this.min=Ls(t)?Math.max(0,t):null,this.max=Ls(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Ls(this._userMin)&&(this.min=t===hp(this.min,0)?hp(this.min,-1):hp(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:n}=this.getUserBounds();let i=this.min,r=this.max;const a=h=>i=t?i:h,l=h=>r=n?r:h;i===r&&(i<=0?(a(1),l(10)):(a(hp(i,-1)),l(hp(r,1)))),i<=0&&a(hp(r,-1)),r<=0&&l(hp(i,1)),this.min=i,this.max=r}buildTicks(){const t=this.options,n={min:this._userMin,max:this._userMax},i=hhe(n,this);return t.bounds==="ticks"&&C$(i,this,"value"),t.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(t){return t===void 0?"0":H0(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=Rf(t),this._valueRange=Rf(this.max)-Rf(t)}getPixelForValue(t){return(t===void 0||t===0)&&(t=this.min),t===null||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(Rf(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const n=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+n*this._valueRange)}}function sI(e){const t=e.ticks;if(t.display&&e.display){const n=Ha(t.backdropPadding);return yi(t.font&&t.font.size,us.font.size)+n.height}return 0}function mhe(e,t,n){return n=cs(n)?n:[n],{w:lle(e,t.string,n),h:n.length*t.lineHeight}}function ZB(e,t,n,i,r){return e===i||e===r?{start:t-n/2,end:t+n/2}:e<i||e>r?{start:t-n,end:t}:{start:t,end:t+n}}function phe(e){const t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},n=Object.assign({},t),i=[],r=[],a=e._pointLabels.length,l=e.options.pointLabels,h=l.centerPointLabels?ur/a:0;for(let s=0;s<a;s++){const p=l.setContext(e.getPointLabelContext(s));r[s]=p.padding;const _=e.getPointPosition(s,e.drawingArea+r[s],h),x=go(p.font),T=mhe(e.ctx,x,e._pointLabels[s]);i[s]=T;const k=Da(e.getIndexAngle(s)+h),P=Math.round(WP(k)),M=ZB(P,_.x,T.w,0,180),R=ZB(P,_.y,T.h,90,270);ghe(n,t,k,M,R)}e.setCenterPoint(t.l-n.l,n.r-t.r,t.t-n.t,n.b-t.b),e._pointLabelItems=yhe(e,i,r)}function ghe(e,t,n,i,r){const a=Math.abs(Math.sin(n)),l=Math.abs(Math.cos(n));let h=0,s=0;i.start<t.l?(h=(t.l-i.start)/a,e.l=Math.min(e.l,t.l-h)):i.end>t.r&&(h=(i.end-t.r)/a,e.r=Math.max(e.r,t.r+h)),r.start<t.t?(s=(t.t-r.start)/l,e.t=Math.min(e.t,t.t-s)):r.end>t.b&&(s=(r.end-t.b)/l,e.b=Math.max(e.b,t.b+s))}function vhe(e,t,n){const i=e.drawingArea,{extra:r,additionalAngle:a,padding:l,size:h}=n,s=e.getPointPosition(t,i+r+l,a),p=Math.round(WP(Da(s.angle+Hs))),_=whe(s.y,h.h,p),x=bhe(p),T=xhe(s.x,h.w,x);return{visible:!0,x:s.x,y:_,textAlign:x,left:T,top:_,right:T+h.w,bottom:_+h.h}}function _he(e,t){if(!t)return!0;const{left:n,top:i,right:r,bottom:a}=e;return!(hh({x:n,y:i},t)||hh({x:n,y:a},t)||hh({x:r,y:i},t)||hh({x:r,y:a},t))}function yhe(e,t,n){const i=[],r=e._pointLabels.length,a=e.options,{centerPointLabels:l,display:h}=a.pointLabels,s={extra:sI(a)/2,additionalAngle:l?ur/r:0};let p;for(let _=0;_<r;_++){s.padding=n[_],s.size=t[_];const x=vhe(e,_,s);i.push(x),h==="auto"&&(x.visible=_he(x,p),x.visible&&(p=x))}return i}function bhe(e){return e===0||e===180?"center":e<180?"left":"right"}function xhe(e,t,n){return n==="right"?e-=t:n==="center"&&(e-=t/2),e}function whe(e,t,n){return n===90||n===270?e-=t/2:(n>270||n<90)&&(e-=t),e}function The(e,t,n){const{left:i,top:r,right:a,bottom:l}=n,{backdropColor:h}=t;if(!Ri(h)){const s=Op(t.borderRadius),p=Ha(t.backdropPadding);e.fillStyle=h;const _=i-p.left,x=r-p.top,T=a-i+p.width,k=l-r+p.height;Object.values(s).some(P=>P!==0)?(e.beginPath(),i0(e,{x:_,y:x,w:T,h:k,radius:s}),e.fill()):e.fillRect(_,x,T,k)}}function She(e,t){const{ctx:n,options:{pointLabels:i}}=e;for(let r=t-1;r>=0;r--){const a=e._pointLabelItems[r];if(!a.visible)continue;const l=i.setContext(e.getPointLabelContext(r));The(n,l,a);const h=go(l.font),{x:s,y:p,textAlign:_}=a;Kp(n,e._pointLabels[r],s,p+h.lineHeight/2,h,{color:l.color,textAlign:_,textBaseline:"middle"})}}function _j(e,t,n,i){const{ctx:r}=e;if(n)r.arc(e.xCenter,e.yCenter,t,0,Jr);else{let a=e.getPointPosition(0,t);r.moveTo(a.x,a.y);for(let l=1;l<i;l++)a=e.getPointPosition(l,t),r.lineTo(a.x,a.y)}}function Ehe(e,t,n,i,r){const a=e.ctx,l=t.circular,{color:h,lineWidth:s}=t;!l&&!i||!h||!s||n<0||(a.save(),a.strokeStyle=h,a.lineWidth=s,a.setLineDash(r.dash||[]),a.lineDashOffset=r.dashOffset,a.beginPath(),_j(e,n,l,i),a.closePath(),a.stroke(),a.restore())}function Che(e,t,n){return _m(e,{label:n,index:t,type:"pointLabel"})}class khe extends q1{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:HT.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(t){return t},padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=Ha(sI(this.options)/2),n=this.width=this.maxWidth-t.width,i=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+n/2+t.left),this.yCenter=Math.floor(this.top+i/2+t.top),this.drawingArea=Math.floor(Math.min(n,i)/2)}determineDataLimits(){const{min:t,max:n}=this.getMinMax(!1);this.min=Ls(t)&&!isNaN(t)?t:0,this.max=Ls(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/sI(this.options))}generateTickLabels(t){q1.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((n,i)=>{const r=Gr(this.options.pointLabels.callback,[n,i],this);return r||r===0?r:""}).filter((n,i)=>this.chart.getDataVisibility(i))}fit(){const t=this.options;t.display&&t.pointLabels.display?phe(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,n,i,r){this.xCenter+=Math.floor((t-n)/2),this.yCenter+=Math.floor((i-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,n,i,r))}getIndexAngle(t){const n=Jr/(this._pointLabels.length||1),i=this.options.startAngle||0;return Da(t*n+du(i))}getDistanceFromCenterForValue(t){if(Ri(t))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*n:(t-this.min)*n}getValueForDistanceFromCenter(t){if(Ri(t))return NaN;const n=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(t){const n=this._pointLabels||[];if(t>=0&&t<n.length){const i=n[t];return Che(this.getContext(),t,i)}}getPointPosition(t,n,i=0){const r=this.getIndexAngle(t)-Hs+i;return{x:Math.cos(r)*n+this.xCenter,y:Math.sin(r)*n+this.yCenter,angle:r}}getPointPositionForValue(t,n){return this.getPointPosition(t,this.getDistanceFromCenterForValue(n))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:n,top:i,right:r,bottom:a}=this._pointLabelItems[t];return{left:n,top:i,right:r,bottom:a}}drawBackground(){const{backgroundColor:t,grid:{circular:n}}=this.options;if(t){const i=this.ctx;i.save(),i.beginPath(),_j(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),i.closePath(),i.fillStyle=t,i.fill(),i.restore()}}drawGrid(){const t=this.ctx,n=this.options,{angleLines:i,grid:r,border:a}=n,l=this._pointLabels.length;let h,s,p;if(n.pointLabels.display&&She(this,l),r.display&&this.ticks.forEach((_,x)=>{if(x!==0||x===0&&this.min<0){s=this.getDistanceFromCenterForValue(_.value);const T=this.getContext(x),k=r.setContext(T),P=a.setContext(T);Ehe(this,k,s,l,P)}}),i.display){for(t.save(),h=l-1;h>=0;h--){const _=i.setContext(this.getPointLabelContext(h)),{color:x,lineWidth:T}=_;!T||!x||(t.lineWidth=T,t.strokeStyle=x,t.setLineDash(_.borderDash),t.lineDashOffset=_.borderDashOffset,s=this.getDistanceFromCenterForValue(n.reverse?this.min:this.max),p=this.getPointPosition(h,s),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(p.x,p.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,n=this.options,i=n.ticks;if(!i.display)return;const r=this.getIndexAngle(0);let a,l;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(r),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((h,s)=>{if(s===0&&this.min>=0&&!n.reverse)return;const p=i.setContext(this.getContext(s)),_=go(p.font);if(a=this.getDistanceFromCenterForValue(this.ticks[s].value),p.showLabelBackdrop){t.font=_.string,l=t.measureText(h.label).width,t.fillStyle=p.backdropColor;const x=Ha(p.backdropPadding);t.fillRect(-l/2-x.left,-a-_.size/2-x.top,l+x.width,_.size+x.height)}Kp(t,h.label,0,-a,_,{color:p.color,strokeColor:p.textStrokeColor,strokeWidth:p.textStrokeWidth})}),t.restore()}drawTitle(){}}const JT={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Al=Object.keys(JT);function JB(e,t){return e-t}function QB(e,t){if(Ri(t))return null;const n=e._adapter,{parser:i,round:r,isoWeekday:a}=e._parseOpts;let l=t;return typeof i=="function"&&(l=i(l)),Ls(l)||(l=typeof i=="string"?n.parse(l,i):n.parse(l)),l===null?null:(r&&(l=r==="week"&&(d_(a)||a===!0)?n.startOf(l,"isoWeek",a):n.startOf(l,r)),+l)}function eF(e,t,n,i){const r=Al.length;for(let a=Al.indexOf(e);a<r-1;++a){const l=JT[Al[a]],h=l.steps?l.steps:Number.MAX_SAFE_INTEGER;if(l.common&&Math.ceil((n-t)/(h*l.size))<=i)return Al[a]}return Al[r-1]}function Ihe(e,t,n,i,r){for(let a=Al.length-1;a>=Al.indexOf(n);a--){const l=Al[a];if(JT[l].common&&e._adapter.diff(r,i,l)>=t-1)return l}return Al[n?Al.indexOf(n):0]}function Ahe(e){for(let t=Al.indexOf(e)+1,n=Al.length;t<n;++t)if(JT[Al[t]].common)return Al[t]}function tF(e,t,n){if(!n)e[t]=!0;else if(n.length){const{lo:i,hi:r}=HP(n,t),a=n[i]>=t?n[i]:n[r];e[a]=!0}}function Phe(e,t,n,i){const r=e._adapter,a=+r.startOf(t[0].value,i),l=t[t.length-1].value;let h,s;for(h=a;h<=l;h=+r.add(h,1,i))s=n[h],s>=0&&(t[s].major=!0);return t}function nF(e,t,n){const i=[],r={},a=t.length;let l,h;for(l=0;l<a;++l)h=t[l],r[h]=l,i.push({value:h,major:!1});return a===0||!n?i:Phe(e,i,r,n)}class oI extends mg{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,n={}){const i=t.time||(t.time={}),r=this._adapter=new Mce._date(t.adapters.date);r.init(n),pb(i.displayFormats,r.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=n.normalized}parse(t,n){return t===void 0?null:QB(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,n=this._adapter,i=t.time.unit||"day";let{min:r,max:a,minDefined:l,maxDefined:h}=this.getUserBounds();function s(p){!l&&!isNaN(p.min)&&(r=Math.min(r,p.min)),!h&&!isNaN(p.max)&&(a=Math.max(a,p.max))}(!l||!h)&&(s(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&s(this.getMinMax(!1))),r=Ls(r)&&!isNaN(r)?r:+n.startOf(Date.now(),i),a=Ls(a)&&!isNaN(a)?a:+n.endOf(Date.now(),i)+1,this.min=Math.min(r,a-1),this.max=Math.max(r+1,a)}_getLabelBounds(){const t=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(n=t[0],i=t[t.length-1]),{min:n,max:i}}buildTicks(){const t=this.options,n=t.time,i=t.ticks,r=i.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const a=this.min,l=this.max,h=Xae(r,a,l);return this._unit=n.unit||(i.autoSkip?eF(n.minUnit,this.min,this.max,this._getLabelCapacity(a)):Ihe(this,h.length,n.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:Ahe(this._unit),this.initOffsets(r),t.reverse&&h.reverse(),nF(this,h,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let n=0,i=0,r,a;this.options.offset&&t.length&&(r=this.getDecimalForValue(t[0]),t.length===1?n=1-r:n=(this.getDecimalForValue(t[1])-r)/2,a=this.getDecimalForValue(t[t.length-1]),t.length===1?i=a:i=(a-this.getDecimalForValue(t[t.length-2]))/2);const l=t.length<3?.5:.25;n=Bo(n,0,l),i=Bo(i,0,l),this._offsets={start:n,end:i,factor:1/(n+1+i)}}_generate(){const t=this._adapter,n=this.min,i=this.max,r=this.options,a=r.time,l=a.unit||eF(a.minUnit,n,i,this._getLabelCapacity(n)),h=yi(r.ticks.stepSize,1),s=l==="week"?a.isoWeekday:!1,p=d_(s)||s===!0,_={};let x=n,T,k;if(p&&(x=+t.startOf(x,"isoWeek",s)),x=+t.startOf(x,p?"day":l),t.diff(i,n,l)>1e5*h)throw new Error(n+" and "+i+" are too far apart with stepSize of "+h+" "+l);const P=r.ticks.source==="data"&&this.getDataTimestamps();for(T=x,k=0;T<i;T=+t.add(T,h,l),k++)tF(_,T,P);return(T===i||r.bounds==="ticks"||k===1)&&tF(_,T,P),Object.keys(_).sort(JB).map(M=>+M)}getLabelForValue(t){const n=this._adapter,i=this.options.time;return i.tooltipFormat?n.format(t,i.tooltipFormat):n.format(t,i.displayFormats.datetime)}format(t,n){const r=this.options.time.displayFormats,a=this._unit,l=n||r[a];return this._adapter.format(t,l)}_tickFormatFunction(t,n,i,r){const a=this.options,l=a.ticks.callback;if(l)return Gr(l,[t,n,i],this);const h=a.time.displayFormats,s=this._unit,p=this._majorUnit,_=s&&h[s],x=p&&h[p],T=i[n],k=p&&x&&T&&T.major;return this._adapter.format(t,r||(k?x:_))}generateTickLabels(t){let n,i,r;for(n=0,i=t.length;n<i;++n)r=t[n],r.label=this._tickFormatFunction(r.value,n,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const n=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((n.start+i)*n.factor)}getValueForPixel(t){const n=this._offsets,i=this.getDecimalForPixel(t)/n.factor-n.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){const n=this.options.ticks,i=this.ctx.measureText(t).width,r=du(this.isHorizontal()?n.maxRotation:n.minRotation),a=Math.cos(r),l=Math.sin(r),h=this._resolveTickFontOptions(0).size;return{w:i*a+h*l,h:i*l+h*a}}_getLabelCapacity(t){const n=this.options.time,i=n.displayFormats,r=i[n.unit]||i.millisecond,a=this._tickFormatFunction(t,0,nF(this,[t],this._majorUnit),r),l=this._getLabelSize(a),h=Math.floor(this.isHorizontal()?this.width/l.w:this.height/l.h)-1;return h>0?h:1}getDataTimestamps(){let t=this._cache.data||[],n,i;if(t.length)return t;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(n=0,i=r.length;n<i;++n)t=t.concat(r[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let n,i;if(t.length)return t;const r=this.getLabels();for(n=0,i=r.length;n<i;++n)t.push(QB(this,r[n]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return A$(t.sort(JB))}}function cw(e,t,n){let i=0,r=e.length-1,a,l,h,s;n?(t>=e[i].pos&&t<=e[r].pos&&({lo:i,hi:r}=dh(e,"pos",t)),{pos:a,time:h}=e[i],{pos:l,time:s}=e[r]):(t>=e[i].time&&t<=e[r].time&&({lo:i,hi:r}=dh(e,"time",t)),{time:a,pos:h}=e[i],{time:l,pos:s}=e[r]);const p=l-a;return p?h+(s-h)*(t-a)/p:h}class Mhe extends oI{static id="timeseries";static defaults=oI.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(t);this._minPos=cw(n,this.min),this._tableRange=cw(n,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:n,max:i}=this,r=[],a=[];let l,h,s,p,_;for(l=0,h=t.length;l<h;++l)p=t[l],p>=n&&p<=i&&r.push(p);if(r.length<2)return[{time:n,pos:0},{time:i,pos:1}];for(l=0,h=r.length;l<h;++l)_=r[l+1],s=r[l-1],p=r[l],Math.round((_+s)/2)!==p&&a.push({time:p,pos:l/(h-1)});return a}_generate(){const t=this.min,n=this.max;let i=super.getDataTimestamps();return(!i.includes(t)||!i.length)&&i.splice(0,0,t),(!i.includes(n)||i.length===1)&&i.push(n),i.sort((r,a)=>r-a)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const n=this.getDataTimestamps(),i=this.getLabelTimestamps();return n.length&&i.length?t=this.normalize(n.concat(i)):t=n.length?n:i,t=this._cache.all=t,t}getDecimalForValue(t){return(cw(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const n=this._offsets,i=this.getDecimalForPixel(t)/n.factor-n.end;return cw(this._table,i*this._tableRange+this._minPos,!0)}}var Dhe=Object.freeze({__proto__:null,CategoryScale:lhe,LinearScale:uhe,LogarithmicScale:fhe,RadialLinearScale:khe,TimeScale:oI,TimeSeriesScale:Mhe});const Lhe=[Pce,cde,rhe,Dhe];nM.register(...Lhe);const rM=Symbol.for("vuetify:v-slider");function aI(e,t,n){const i=n==="vertical",r=t.getBoundingClientRect(),a="touches"in e?e.touches[0]:e;return i?a.clientY-(r.top+r.height/2):a.clientX-(r.left+r.width/2)}function Rhe(e,t){return"touches"in e&&e.touches.length?e.touches[0][t]:"changedTouches"in e&&e.changedTouches.length?e.changedTouches[0][t]:e[t]}const yj=lt({disabled:{type:Boolean,default:null},error:Boolean,readonly:{type:Boolean,default:null},max:{type:[Number,String],default:100},min:{type:[Number,String],default:0},step:{type:[Number,String],default:0},thumbColor:String,thumbLabel:{type:[Boolean,String],default:void 0,validator:e=>typeof e=="boolean"||e==="always"},thumbSize:{type:[Number,String],default:20},showTicks:{type:[Boolean,String],default:!1,validator:e=>typeof e=="boolean"||e==="always"},ticks:{type:[Array,Object]},tickSize:{type:[Number,String],default:2},color:String,trackColor:String,trackFillColor:String,trackSize:{type:[Number,String],default:4},direction:{type:String,default:"horizontal",validator:e=>["vertical","horizontal"].includes(e)},reverse:Boolean,noKeyboard:Boolean,...$r(),...qs({elevation:2}),ripple:{type:Boolean,default:!0}},"Slider"),bj=e=>{const t=fe(()=>parseFloat(e.min)),n=fe(()=>parseFloat(e.max)),i=fe(()=>Number(e.step)>0?parseFloat(e.step):0),r=fe(()=>Math.max(LV(i.value),LV(t.value)));function a(l){if(l=parseFloat(l),i.value<=0)return l;const h=Er(l,t.value,n.value),s=t.value%i.value;let p=Math.round((h-s)/i.value)*i.value+s;return h>p&&p+i.value>n.value&&(p=n.value),parseFloat(Math.min(p,n.value).toFixed(r.value))}return{min:t,max:n,step:i,decimals:r,roundValue:a}},xj=e=>{let{props:t,steps:n,onSliderStart:i,onSliderMove:r,onSliderEnd:a,getActiveThumb:l}=e;const h=A_(t),{isRtl:s}=Gs(),p=Ne(()=>t.reverse),_=fe(()=>t.direction==="vertical"),x=fe(()=>_.value!==p.value),{min:T,max:k,step:P,decimals:M,roundValue:R}=n,F=fe(()=>parseInt(t.thumbSize,10)),B=fe(()=>parseInt(t.tickSize,10)),H=fe(()=>parseInt(t.trackSize,10)),G=fe(()=>(k.value-T.value)/P.value),ee=fe(()=>t.error||h.isDisabled.value?void 0:t.thumbColor??t.color),ie=fe(()=>t.error||h.isDisabled.value?void 0:t.thumbColor),J=fe(()=>t.error||h.isDisabled.value?void 0:t.trackColor??t.color),$=fe(()=>t.error||h.isDisabled.value?void 0:t.trackFillColor??t.color),W=Zt(!1),X=Zt(0),re=tt(),Y=tt();function Z(Ye){const ut=re.value?.$el;if(!ut)return;const Ke=t.direction==="vertical",jt=Ke?"top":"left",xn=Ke?"height":"width",ke=Ke?"clientY":"clientX",{[jt]:Ae,[xn]:he}=ut.getBoundingClientRect(),et=Rhe(Ye,ke);let dt=Er((et-Ae-X.value)/he)||0;return(Ke?x.value:x.value!==s.value)&&(dt=1-dt),R(T.value+dt*(k.value-T.value))}const ge=Ye=>{const ut=Z(Ye);ut!=null&&a({value:ut}),W.value=!1,X.value=0},be=Ye=>{const ut=Z(Ye);Y.value=l(Ye),Y.value&&(W.value=!0,Y.value.contains(Ye.target)?X.value=aI(Ye,Y.value,t.direction):(X.value=0,ut!=null&&r({value:ut})),ut!=null&&i({value:ut}),Hn(()=>Y.value?.focus()))},Be={passive:!0,capture:!0};function nt(Ye){const ut=Z(Ye);ut!=null&&r({value:ut})}function We(Ye){Ye.stopPropagation(),Ye.preventDefault(),ge(Ye),window.removeEventListener("mousemove",nt,Be),window.removeEventListener("mouseup",We)}function Le(Ye){ge(Ye),window.removeEventListener("touchmove",nt,Be),Ye.target?.removeEventListener("touchend",Le)}function Ze(Ye){be(Ye),window.addEventListener("touchmove",nt,Be),Ye.target?.addEventListener("touchend",Le,{passive:!1})}function Ee(Ye){Ye.button===0&&(Ye.preventDefault(),be(Ye),window.addEventListener("mousemove",nt,Be),window.addEventListener("mouseup",We,{passive:!1}))}const Je=Ye=>{const ut=(Ye-T.value)/(k.value-T.value)*100;return Er(isNaN(ut)?0:ut,0,100)},it=Ne(()=>t.showTicks),vt=fe(()=>it.value?t.ticks?Array.isArray(t.ticks)?t.ticks.map(Ye=>({value:Ye,position:Je(Ye),label:Ye.toString()})):Object.keys(t.ticks).map(Ye=>({value:parseFloat(Ye),position:Je(parseFloat(Ye)),label:t.ticks[Ye]})):G.value!==1/0?rc(G.value+1).map(Ye=>{const ut=T.value+Ye*P.value;return{value:ut,position:Je(ut)}}):[]:[]),mt=fe(()=>vt.value.some(Ye=>{let{label:ut}=Ye;return!!ut})),ot={activeThumbRef:Y,color:Ne(()=>t.color),decimals:M,disabled:h.isDisabled,direction:Ne(()=>t.direction),elevation:Ne(()=>t.elevation),hasLabels:mt,isReversed:p,indexFromEnd:x,min:T,max:k,mousePressed:W,noKeyboard:Ne(()=>t.noKeyboard),numTicks:G,onSliderMousedown:Ee,onSliderTouchstart:Ze,parsedTicks:vt,parseMouseMove:Z,position:Je,readonly:h.isReadonly,rounded:Ne(()=>t.rounded),roundValue:R,showTicks:it,startOffset:X,step:P,thumbSize:F,thumbColor:ee,thumbLabelColor:ie,thumbLabel:Ne(()=>t.thumbLabel),ticks:Ne(()=>t.ticks),tickSize:B,trackColor:J,trackContainerRef:re,trackFillColor:$,trackSize:H,vertical:_};return Dr(rM,ot),ot},Ohe=lt({focused:Boolean,max:{type:Number,required:!0},min:{type:Number,required:!0},modelValue:{type:Number,required:!0},position:{type:Number,required:!0},ripple:{type:[Boolean,Object],default:!0},name:String,noKeyboard:Boolean,...wn()},"VSliderThumb"),lI=At()({name:"VSliderThumb",directives:{vRipple:Wa},props:Ohe(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n,emit:i}=t;const r=wi(rM),{isRtl:a,rtlClasses:l}=Gs();if(!r)throw new Error("[Vuetify] v-slider-thumb must be used inside v-slider or v-range-slider");const{min:h,max:s,thumbColor:p,thumbLabelColor:_,step:x,disabled:T,thumbSize:k,thumbLabel:P,direction:M,isReversed:R,vertical:F,readonly:B,elevation:H,mousePressed:G,decimals:ee,indexFromEnd:ie}=r,J=fe(()=>T.value?void 0:H.value),{elevationClasses:$}=bo(J),{textColorClasses:W,textColorStyles:X}=Uo(p),{backgroundColorClasses:re,backgroundColorStyles:Y}=nr(_),{pageup:Z,pagedown:ge,end:be,home:Be,left:nt,right:We,down:Le,up:Ze}=Mk,Ee=[Z,ge,be,Be,nt,We,Le,Ze],Je=fe(()=>x.value?[1,2,3]:[1,5,10]);function it(mt,ot){if(e.noKeyboard||T.value||!Ee.includes(mt.key))return;mt.preventDefault();const Ye=x.value||.1,ut=(s.value-h.value)/Ye;if([nt,We,Le,Ze].includes(mt.key)){const jt=(F.value?[a.value?nt:We,R.value?Le:Ze]:ie.value!==a.value?[nt,Ze]:[We,Ze]).includes(mt.key)?1:-1,xn=mt.shiftKey?2:mt.ctrlKey?1:0;jt===-1&&ot===s.value&&!xn&&!Number.isInteger(ut)?ot=ot-ut%1*Ye:ot=ot+jt*Ye*Je.value[xn]}else if(mt.key===Be)ot=h.value;else if(mt.key===be)ot=s.value;else{const Ke=mt.key===ge?1:-1;ot=ot-Ke*Ye*(ut>100?ut/10:10)}return Math.max(e.min,Math.min(e.max,ot))}function vt(mt){const ot=it(mt,e.modelValue);ot!=null&&i("update:modelValue",ot)}return Vt(()=>{const mt=pn(ie.value?100-e.position:e.position,"%");return z("div",{class:xt(["v-slider-thumb",{"v-slider-thumb--focused":e.focused,"v-slider-thumb--pressed":e.focused&&G.value},e.class,l.value]),style:Yt([{"--v-slider-thumb-position":mt,"--v-slider-thumb-size":pn(k.value)},e.style]),role:"slider",tabindex:T.value?-1:0,"aria-label":e.name,"aria-valuemin":h.value,"aria-valuemax":s.value,"aria-valuenow":e.modelValue,"aria-readonly":!!B.value,"aria-orientation":M.value,onKeydown:B.value?void 0:vt},[z("div",{class:xt(["v-slider-thumb__surface",W.value,$.value]),style:Yt(X.value)},null),Ii(z("div",{class:xt(["v-slider-thumb__ripple",W.value]),style:Yt(X.value)},null),[[Wa,e.ripple,null,{circle:!0,center:!0}]]),se(yP,{origin:"bottom center"},{default:()=>[Ii(z("div",{class:"v-slider-thumb__label-container"},[z("div",{class:xt(["v-slider-thumb__label",re.value]),style:Yt(Y.value)},[z("div",null,[n["thumb-label"]?.({modelValue:e.modelValue})??e.modelValue.toFixed(x.value?ee.value:1)]),z("div",{class:"v-slider-thumb__label-wedge"},null)])]),[[_u,P.value&&e.focused||P.value==="always"]])]})])}),{}}}),Vhe=lt({start:{type:Number,required:!0},stop:{type:Number,required:!0},...wn()},"VSliderTrack"),wj=At()({name:"VSliderTrack",props:Vhe(),emits:{},setup(e,t){let{slots:n}=t;const i=wi(rM);if(!i)throw new Error("[Vuetify] v-slider-track must be inside v-slider or v-range-slider");const{color:r,parsedTicks:a,rounded:l,showTicks:h,tickSize:s,trackColor:p,trackFillColor:_,trackSize:x,vertical:T,min:k,max:P,indexFromEnd:M}=i,{roundedClasses:R}=ts(l),{backgroundColorClasses:F,backgroundColorStyles:B}=nr(_),{backgroundColorClasses:H,backgroundColorStyles:G}=nr(p),ee=fe(()=>`inset-${T.value?"block":"inline"}-${M.value?"end":"start"}`),ie=fe(()=>T.value?"height":"width"),J=fe(()=>({[ee.value]:"0%",[ie.value]:"100%"})),$=fe(()=>e.stop-e.start),W=fe(()=>({[ee.value]:pn(e.start,"%"),[ie.value]:pn($.value,"%")})),X=fe(()=>h.value?(T.value?a.value.slice().reverse():a.value).map((Y,Z)=>{const ge=Y.value!==k.value&&Y.value!==P.value?pn(Y.position,"%"):void 0;return z("div",{key:Y.value,class:xt(["v-slider-track__tick",{"v-slider-track__tick--filled":Y.position>=e.start&&Y.position<=e.stop,"v-slider-track__tick--first":Y.value===k.value,"v-slider-track__tick--last":Y.value===P.value}]),style:{[ee.value]:ge}},[(Y.label||n["tick-label"])&&z("div",{class:"v-slider-track__tick-label"},[n["tick-label"]?.({tick:Y,index:Z})??Y.label])])}):[]);return Vt(()=>z("div",{class:xt(["v-slider-track",R.value,e.class]),style:Yt([{"--v-slider-track-size":pn(x.value),"--v-slider-tick-size":pn(s.value)},e.style])},[z("div",{class:xt(["v-slider-track__background",H.value,{"v-slider-track__background--opacity":!!r.value||!_.value}]),style:{...J.value,...G.value}},null),z("div",{class:xt(["v-slider-track__fill",F.value]),style:{...W.value,...B.value}},null),h.value&&z("div",{class:xt(["v-slider-track__ticks",{"v-slider-track__ticks--always-show":h.value==="always"}])},[X.value])])),{}}}),Bhe=lt({...N0(),...yj(),...Lh(),modelValue:{type:[Number,String],default:0}},"VSlider"),o0=At()({name:"VSlider",props:Bhe(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,start:e=>!0,end:e=>!0},setup(e,t){let{slots:n,emit:i}=t;const r=tt(),a=tt(),{rtlClasses:l}=Gs(),h=bj(e),s=Pn(e,"modelValue",void 0,W=>h.roundValue(W??h.min.value)),{min:p,max:_,mousePressed:x,roundValue:T,onSliderMousedown:k,onSliderTouchstart:P,trackContainerRef:M,position:R,hasLabels:F,disabled:B,readonly:H,noKeyboard:G}=xj({props:e,steps:h,onSliderStart:()=>{!B.value&&!H.value&&i("start",s.value)},onSliderEnd:W=>{let{value:X}=W;const re=T(X);!B.value&&!H.value&&(s.value=re),i("end",re)},onSliderMove:W=>{let{value:X}=W;!B.value&&!H.value&&(s.value=T(X))},getActiveThumb:()=>r.value?.$el}),{isFocused:ee,focus:ie,blur:J}=Dh(e),$=fe(()=>R(s.value));return Vt(()=>{const W=ca.filterProps(e),X=!!(e.label||n.label||n.prepend);return se(ca,It({ref:a,class:["v-slider",{"v-slider--has-labels":!!n["tick-label"]||F.value,"v-slider--focused":ee.value,"v-slider--pressed":x.value,"v-slider--disabled":B.value},l.value,e.class],style:e.style},W,{focused:ee.value}),{...n,prepend:X?re=>z(un,null,[n.label?.(re)??(e.label?se(I_,{id:re.id.value,class:"v-slider__label",text:e.label},null):void 0),n.prepend?.(re)]):void 0,default:re=>{let{id:Y,messagesId:Z}=re;return z("div",{class:"v-slider__container",onMousedown:H.value?void 0:k,onTouchstartPassive:H.value?void 0:P},[z("input",{id:Y.value,name:e.name||Y.value,disabled:B.value,readonly:H.value,tabindex:"-1",value:s.value},null),se(wj,{ref:M,start:0,stop:$.value},{"tick-label":n["tick-label"]}),se(lI,{ref:r,"aria-describedby":Z.value,focused:ee.value,noKeyboard:G.value,min:p.value,max:_.value,modelValue:s.value,"onUpdate:modelValue":ge=>s.value=ge,position:$.value,elevation:e.elevation,onFocus:ie,onBlur:J,ripple:e.ripple,name:e.name},{"thumb-label":n["thumb-label"]})])}})}),xo({focus:()=>r.value?.$el.focus()},a)}}),Fhe={class:"fare-calculator"},zhe={class:"fare-shell__header"},Nhe={class:"fare-shell__icon"},Uhe={class:"fare-result-header"},$he={class:"fare-result-badge"},jhe={class:"fare-result-value"},Whe={class:"fare-result-meta"},Hhe={class:"fare-result-route"},Ghe={class:"fare-result-stops"},qhe={class:"fare-route-header"},Khe={class:"fare-route-title"},Xhe={class:"fare-route-timeline"},Yhe={class:"timeline-body"},Zhe={class:"timeline-heading"},Jhe={class:"timeline-legs"},Qhe={class:"fare-placeholder-icon"},efe={key:0,class:"monthly-companion"},tfe={class:"monthly-card-header"},nfe={class:"monthly-card-title"},ife={class:"fare-input-header"},rfe={class:"fare-slider"},sfe={class:"slider-scale"},ofe={class:"fare-input-header"},afe={class:"fare-slider"},lfe={class:"slider-scale"},cfe={class:"fare-input-header"},ufe={class:"fare-metric-display"},dfe={class:"fare-metric-value"},hfe={key:0,class:"monthly-breakdown"},ffe={key:0,class:"recommendation-copy"},mfe={class:"recommendation-metric"},pfe={class:"recommendation-metric"},gfe={class:"chart-wrapper"},vfe={class:"monthly-table"},_fe={__name:"FareCalculator",setup(e){const{allStations:t,shortestPath:n,estimateDistanceKm:i,estimateTimeMinutes:r,summariseSegments:a}=gP(),{fareByType:l,analyseMonthlyPass:h}=Q6(),s=[{value:"adult",label:"Adult"},{value:"primary",label:"Primary School Student"},{value:"secondary",label:"Secondary School Student"},{value:"polytechnic",label:"Polytechnic Student"},{value:"university",label:"University Student"},{value:"ns",label:"National Serviceman"},{value:"senior",label:"Senior Citizen"},{value:"disability",label:"Person with Disabilities"},{value:"workfare",label:"Workfare Concession"}],p={NSL:{name:"North South Line"},EWL:{name:"East West Line"},CGL:{name:"Changi Airport Branch"},DTL:{name:"Downtown Line"},CCL:{name:"Circle Line"},NEL:{name:"North East Line"},TEL:{name:"ThomsonEast Coast Line"},BPL:{name:"Bukit Panjang LRT"},SWPL:{name:"Sengkang West LRT"},SEPL:{name:"Sengkang East LRT"},PEPLRT:{name:"Punggol East LRT"},PWLRT:{name:"Punggol West LRT"}},_={train:"Train-only",bus:"Bus-only",hybrid:"Hybrid (Bus + Train)"},x=tt("Jurong East"),T=tt("City Hall"),k=tt("adult"),P=tt(null),M=tt(null),R=tt(""),F=tt(!1),B=tt(2),H=tt(22),G=tt(null);let ee=null;const ie=tt(null),J=new Intl.NumberFormat("en-SG",{style:"currency",currency:"SGD",currencyDisplay:"narrowSymbol",minimumFractionDigits:2}),$=fe(()=>s.find(mt=>mt.value===k.value)?.label??"Adult"),W=fe(()=>Math.max(0,B.value*H.value*2)),X=fe(()=>M.value?M.value.breakdown.reduce((mt,ot)=>mt?ot.savings>mt.savings?ot:mt:ot,null):null),re=fe(()=>X.value?.worth?"success":"error"),Y=fe(()=>{if(!M.value)return 0;const mt=Math.max(M.value.monthlyTotal,1),ot=Math.abs(X.value?.savings??0);return Math.min(100,Math.round(ot/mt*100))});function Z(mt){return J.format(mt)}function ge(mt){const ot=J.format(Math.abs(mt));return`${mt>=0?"+":"-"}${ot}`}function be(mt){return p[mt]?.name??mt}function Be(mt){return mt?`line-${mt.toLowerCase()}`:""}function nt(mt){return _[mt]??mt}function We(mt){return Tf(be(mt))||"#6b7280"}function Le(){if(R.value="",M.value=null,x.value===T.value){P.value=null,Je(),R.value="Please choose two different stations.",F.value=!1;return}const mt=n(x.value,T.value);if(!mt){P.value=null,Je(),R.value="No valid MRT route found between these stations.",F.value=!1;return}const ot=i(mt.totalWeight),Ye=r(mt.totalWeight),ut=a(mt)??[],Ke=ut.reduce((ke,Ae)=>ke+Ae.stops,0),jt=Math.max(0,ut.length-1),xn=l(ot,k.value);P.value={fare:xn,distanceKm:ot,minutes:Ye,segments:ut,totalStops:Ke,transfers:jt},F.value=!1,Ze(),Hn(()=>{typeof window>"u"||window.requestAnimationFrame(()=>{ie.value?.scrollIntoView({behavior:"smooth",block:"start"})})})}function Ze(){if(!P.value){M.value=null,Je();return}M.value=h({distanceKm:P.value.distanceKm,type:k.value,dailyTrips:B.value,workingDays:H.value}),Hn(()=>{Ee(M.value)})}function Ee(mt){if(!mt||!G.value){Je();return}const ot=mt.breakdown.map(ut=>nt(ut.mode)),Ye=mt.breakdown.map(ut=>Number(ut.savings.toFixed(2)));ee&&ee.destroy(),ee=new nM(G.value,{type:"bar",data:{labels:ot,datasets:[{label:"Net savings vs monthly pass ($)",data:Ye,backgroundColor:Ye.map(ut=>ut>=0?"rgba(25,135,84,0.6)":"rgba(220,53,69,0.65)"),borderRadius:8,borderSkipped:!1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{label(ut){const Ke=ut.parsed?.y??0,jt=J.format(Math.abs(Ke));return`${Ke>=0?"+":""}${jt}`}}}},scales:{y:{ticks:{callback(ut){return typeof ut=="number"?J.format(ut):ut}},grid:{color:"rgba(0,0,0,0.05)"}},x:{grid:{display:!1}}}}})}function Je(){ee&&(ee.destroy(),ee=null)}function it(){x.value="Jurong East",T.value="City Hall",k.value="adult",P.value=null,M.value=null,R.value="",B.value=2,H.value=22,F.value=!1,Je()}function vt(){[x.value,T.value]=[T.value,x.value]}return qt([x,T,k],()=>{P.value&&(F.value=!0)}),qt(k,()=>{P.value&&Le()}),dae([B,H],()=>{P.value&&Ze()},{debounce:300,maxWait:800}),Nr(()=>{Je()}),(mt,ot)=>(nn(),mn("section",Fhe,[se(B1,{class:"fare-container py-8",fluid:""},{default:An(()=>[se(vf,{justify:"center",class:"ma-0"},{default:An(()=>[se(Ia,{cols:"12",xl:"10"},{default:An(()=>[se(ju,{class:"fare-shell",elevation:"2",rounded:"lg"},{default:An(()=>[z("div",zhe,[z("div",Nhe,[se(_i,{icon:"mdi-train",size:"26"})]),ot[5]||(ot[5]=z("div",null,[z("h2",{class:"fare-title"},"Fare Calculator"),z("p",{class:"fare-subtitle"}," Distance-based fares with the latest LTA tables. Estimate concession pricing, understand line changes, and see whether a monthly pass could save you more. ")],-1))]),se(za,{class:"my-6"}),se(vf,{class:"fare-grid",align:"stretch",justify:"space-between"},{default:An(()=>[se(Ia,{cols:"12",lg:"6"},{default:An(()=>[z("form",{class:"fare-form",onSubmit:ol(Le,["prevent"])},[se(ju,{class:"fare-form-card",elevation:"0",color:"transparent"},{default:An(()=>[se(mb,{class:"pa-0"},{default:An(()=>[se(vf,{class:"fare-form-fields"},{default:An(()=>[se(Ia,{cols:"12",md:"6",lg:"6",class:"fare-field-col"},{default:An(()=>[se(Hf,{modelValue:x.value,"onUpdate:modelValue":ot[0]||(ot[0]=Ye=>x.value=Ye),items:xi(t),label:"From station","prepend-inner-icon":"mdi-map-marker",variant:"outlined",density:"comfortable","hide-details":"auto",class:"fare-field"},null,8,["modelValue","items"])]),_:1}),se(Ia,{cols:"12",md:"6",lg:"6",class:"fare-field-col"},{default:An(()=>[se(Hf,{modelValue:T.value,"onUpdate:modelValue":ot[1]||(ot[1]=Ye=>T.value=Ye),items:xi(t),label:"To station","prepend-inner-icon":"mdi-flag",variant:"outlined",density:"comfortable","hide-details":"auto",class:"fare-field"},null,8,["modelValue","items"])]),_:1}),se(Ia,{cols:"12",class:"fare-field-col"},{default:An(()=>[se(Hf,{modelValue:k.value,"onUpdate:modelValue":ot[2]||(ot[2]=Ye=>k.value=Ye),items:s,"item-title":"label","item-value":"value",label:"Passenger type","prepend-inner-icon":"mdi-account-group-outline",variant:"outlined",density:"comfortable","hide-details":"auto",class:"fare-field"},null,8,["modelValue"])]),_:1})]),_:1}),se(za,{class:"my-6"}),se(vf,{class:"fare-actions",justify:"center"},{default:An(()=>[se(Ia,{cols:"12",sm:"6",class:"fare-action-col"},{default:An(()=>[se(ci,{block:"",type:"submit",color:"primary","prepend-icon":"mdi-wallet",class:"fare-btn",size:"large",elevation:"2",disabled:!x.value||!T.value||!k.value},{default:An(()=>[Fn(sn(P.value?"Recalculate fare":"Calculate fare"),1)]),_:1},8,["disabled"])]),_:1}),se(Ia,{cols:"12",sm:"6",class:"fare-action-col"},{default:An(()=>[se(ci,{block:"",type:"button",variant:"tonal",color:"primary","prepend-icon":"mdi-transfer",class:"fare-btn",size:"large",onClick:vt},{default:An(()=>[...ot[6]||(ot[6]=[Fn(" Swap stations ",-1)])]),_:1})]),_:1}),se(Ia,{cols:"12",class:"fare-action-col"},{default:An(()=>[se(ci,{block:"",type:"button",variant:"text",color:"primary","prepend-icon":"mdi-restart",class:"fare-btn fare-btn--reset",size:"large",onClick:it},{default:An(()=>[...ot[7]||(ot[7]=[Fn(" Reset ",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],32),se(Bv,{mode:"out-in"},{default:An(()=>[F.value?(nn(),Mc(V1,{key:0,type:"warning",variant:"tonal",density:"comfortable",border:"start","border-color":"warning",class:"mt-4",icon:"mdi-information-outline"},{default:An(()=>[...ot[8]||(ot[8]=[Fn(" Inputs changed  calculate again to refresh. ",-1)])]),_:1})):tr("",!0)]),_:1}),se(Bv,{mode:"out-in"},{default:An(()=>[R.value?(nn(),Mc(V1,{key:0,type:"error",variant:"tonal",border:"start",class:"mt-4",icon:"mdi-alert-circle-outline"},{default:An(()=>[Fn(sn(R.value),1)]),_:1})):tr("",!0)]),_:1})]),_:1}),se(Ia,{cols:"12",lg:"6"},{default:An(()=>[se(l_,{mode:"out-in",appear:""},{default:An(()=>[P.value?(nn(),mn("div",{key:"fare-result",class:"fare-result-stack",ref_key:"fareResultCard",ref:ie},[se(ju,{class:"fare-result-card",elevation:"6",rounded:"lg"},{default:An(()=>[z("div",Uhe,[z("div",$he,[se(_i,{icon:"mdi-cash-multiple",size:"22"})]),ot[9]||(ot[9]=z("div",null,[z("span",{class:"fare-result-title"},"Estimated fare"),z("span",{class:"fare-result-subtitle"},"Live SingaTrain distance-based pricing")],-1))]),z("div",jhe,sn(Z(P.value.fare)),1),z("div",Whe,[z("span",null,sn(Number(P.value.distanceKm).toFixed(1))+" km",1),ot[10]||(ot[10]=z("span",{class:"meta-separator"},"",-1)),z("span",null,sn(Math.round(P.value.minutes))+" mins",1)]),se(Vo,{class:"fare-passenger-chip",color:"primary",variant:"elevated","prepend-icon":"mdi-account-badge",size:"small"},{default:An(()=>[Fn(sn($.value),1)]),_:1}),z("div",Hhe,[se(_i,{icon:"mdi-map-marker-path",size:"18"}),z("span",null,sn(x.value)+"  "+sn(T.value),1)]),z("div",Ghe,sn(P.value.totalStops)+" "+sn(P.value.totalStops===1?"stop":"stops")+"  "+sn(P.value.transfers)+" "+sn(P.value.transfers===1?"transfer":"transfers"),1)]),_:1}),se(ju,{class:"fare-route-card",elevation:"2",rounded:"lg"},{default:An(()=>[z("div",qhe,[z("div",Khe,[se(_i,{icon:"mdi-transit-connection-variant",size:"20"}),ot[11]||(ot[11]=z("span",null,"Route overview",-1))]),se(Vo,{color:"primary",variant:"tonal",size:"small"},{default:An(()=>[Fn(sn(P.value.segments.length)+" "+sn(P.value.segments.length===1?"segment":"segments"),1)]),_:1})]),ot[12]||(ot[12]=z("div",{class:"fare-route-subtitle"}," We recommend the quickest MRT path. Look out for line colours to spot transfers at a glance. ",-1)),z("div",Xhe,[(nn(!0),mn(un,null,Ws(P.value.segments,Ye=>(nn(),mn("div",{key:`${Ye.line}-${Ye.from}-${Ye.to}`,class:"timeline-segment"},[z("div",{class:"timeline-dot",style:Yt({backgroundColor:We(Ye.line)})},[se(_i,{icon:"mdi-train-variant",size:"18"})],4),z("div",Yhe,[z("div",Zhe,[z("span",{class:xt(["route-line-badge",Be(Ye.line)])},sn(be(Ye.line)),3),se(Vo,{color:"primary",variant:"tonal",size:"x-small"},{default:An(()=>[Fn(sn(Ye.stops===0?"Transfer":`${Ye.stops} ${Ye.stops===1?"stop":"stops"}`),1)]),_:2},1024)]),z("div",Jhe,sn(Ye.from)+"  "+sn(Ye.to),1)])]))),128))])]),_:1})],512)):(nn(),Mc(ju,{key:"fare-empty",class:"fare-placeholder",variant:"tonal",rounded:"xl"},{default:An(()=>[z("div",Qhe,[se(_i,{icon:"mdi-map-search",size:"40"})]),ot[13]||(ot[13]=z("h3",{class:"placeholder-title"},"Plan a journey",-1)),ot[14]||(ot[14]=z("p",{class:"placeholder-copy"}," Choose your start, destination, and passenger type to see live fares, travel time, and distance with SingaTrain's latest route intelligence. ",-1))]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),se(Bv,{mode:"out-in"},{default:An(()=>[P.value?(nn(),mn("div",efe,[se(B1,{class:"py-6",fluid:""},{default:An(()=>[se(vf,{justify:"center"},{default:An(()=>[se(Ia,{cols:"12",xl:"10"},{default:An(()=>[se(ju,{elevation:"2",rounded:"lg",class:"monthly-card"},{default:An(()=>[z("div",tfe,[z("div",nfe,[se(_i,{icon:"mdi-calendar-clock",size:"22"}),ot[15]||(ot[15]=z("div",null,[z("h5",null,"Monthly Pass Companion"),z("span",null,"Auto-updates as you tweak your travel habits.")],-1))]),se(Vo,{color:"info",variant:"flat",size:"small","prepend-icon":"mdi-update"},{default:An(()=>[...ot[16]||(ot[16]=[Fn(" Synced with your inputs ",-1)])]),_:1})]),se(za,{class:"my-4"}),se(vf,{class:"monthly-inputs",align:"stretch"},{default:An(()=>[se(Ia,{cols:"12",md:"4"},{default:An(()=>[se(uu,{class:"fare-input-sheet h-100",elevation:"2"},{default:An(()=>[z("div",ife,[se(_i,{icon:"mdi-repeat-variant",size:"22"}),ot[17]||(ot[17]=z("div",null,[z("div",{class:"input-title"},"Trips per day"),z("div",{class:"input-caption"},"Enter how many MRT rides you usually take daily.")],-1))]),z("div",rfe,[z("div",sfe,[ot[18]||(ot[18]=z("span",null,"1",-1)),se(Vo,{size:"small",variant:"flat",color:"primary"},{default:An(()=>[Fn(sn(B.value),1)]),_:1}),ot[19]||(ot[19]=z("span",null,"10",-1))]),se(o0,{modelValue:B.value,"onUpdate:modelValue":ot[3]||(ot[3]=Ye=>B.value=Ye),min:1,max:10,step:1,color:"primary","thumb-label":"always","show-ticks":"always","tick-size":"3"},null,8,["modelValue"])])]),_:1})]),_:1}),se(Ia,{cols:"12",md:"4"},{default:An(()=>[se(uu,{class:"fare-input-sheet h-100",elevation:"2"},{default:An(()=>[z("div",ofe,[se(_i,{icon:"mdi-calendar-blank-outline",size:"22"}),ot[20]||(ot[20]=z("div",null,[z("div",{class:"input-title"},"Days travelled each month"),z("div",{class:"input-caption"},"Adjust to match your regular commute schedule.")],-1))]),z("div",afe,[z("div",lfe,[ot[21]||(ot[21]=z("span",null,"1",-1)),se(Vo,{size:"small",variant:"flat",color:"primary"},{default:An(()=>[Fn(sn(H.value),1)]),_:1}),ot[22]||(ot[22]=z("span",null,"31",-1))]),se(o0,{modelValue:H.value,"onUpdate:modelValue":ot[4]||(ot[4]=Ye=>H.value=Ye),min:1,max:31,step:1,color:"primary","thumb-label":"always","show-ticks":"always","tick-size":"3"},null,8,["modelValue"])])]),_:1})]),_:1}),se(Ia,{cols:"12",md:"4"},{default:An(()=>[se(uu,{class:"fare-input-sheet h-100",elevation:"2"},{default:An(()=>[z("div",cfe,[se(_i,{icon:"mdi-chart-line",size:"22"}),ot[23]||(ot[23]=z("div",null,[z("div",{class:"input-title"},"Projected rides"),z("div",{class:"input-caption"},"Used for the monthly pass comparison.")],-1))]),z("div",ufe,[z("div",dfe,sn(W.value),1),ot[24]||(ot[24]=z("div",{class:"fare-metric-caption"},"rides / month",-1))])]),_:1})]),_:1})]),_:1}),se(z0,null,{default:An(()=>[M.value?(nn(),mn("div",hfe,[se(vf,{class:"mt-1",align:"stretch"},{default:An(()=>[se(Ia,{cols:"12",lg:"4"},{default:An(()=>[se(ju,{class:"recommendation-card h-100",elevation:"3",rounded:"lg"},{default:An(()=>[se(mb,null,{default:An(()=>[ot[27]||(ot[27]=z("div",{class:"recommendation-title"},"Recommendation",-1)),X.value?(nn(),mn("p",ffe,[X.value.worth?(nn(),mn(un,{key:0},[Fn(" The "+sn(nt(X.value.mode))+" pass could save "+sn(Z(X.value.savings))+" this month. ",1)],64)):(nn(),mn(un,{key:1},[Fn(" Stick to pay-per-ride  the "+sn(nt(X.value.mode))+" pass costs "+sn(Z(Math.abs(X.value.savings)))+" more. ",1)],64))])):tr("",!0),z("p",mfe,[ot[25]||(ot[25]=z("strong",null,"Single trip fare:",-1)),Fn(" "+sn(Z(M.value.singleFare)),1)]),z("p",pfe,[ot[26]||(ot[26]=z("strong",null,"Estimated monthly spend:",-1)),Fn(" "+sn(Z(M.value.monthlyTotal)),1)]),se(R0,{"model-value":Y.value,color:re.value,height:"10",rounded:"pill",class:"mt-4"},null,8,["model-value","color"])]),_:1})]),_:1})]),_:1}),se(Ia,{cols:"12",lg:"8"},{default:An(()=>[se(ju,{class:"savings-card h-100",elevation:"3",rounded:"lg"},{default:An(()=>[se(mb,null,{default:An(()=>[ot[28]||(ot[28]=z("div",{class:"savings-title"},"Savings vs monthly passes",-1)),z("div",gfe,[z("canvas",{ref_key:"passChartRef",ref:G},null,512)])]),_:1})]),_:1})]),_:1})]),_:1}),se(uu,{class:"monthly-table-wrapper",elevation:"0",rounded:"lg"},{default:An(()=>[z("table",vfe,[ot[31]||(ot[31]=z("thead",null,[z("tr",null,[z("th",null,"Pass type"),z("th",null,"Pass price"),z("th",null,"Net savings"),z("th",null,"Recommendation")])],-1)),z("tbody",null,[(nn(!0),mn(un,null,Ws(M.value.breakdown,Ye=>(nn(),mn("tr",{key:Ye.mode},[z("td",null,sn(nt(Ye.mode)),1),z("td",null,sn(Z(Ye.passPrice)),1),z("td",{class:xt(Ye.worth?"positive":"negative")},sn(ge(Ye.savings)),3),z("td",null,[Ye.worth?(nn(),Mc(Vo,{key:0,color:"success",variant:"tonal",size:"small","prepend-icon":"mdi-check-circle-outline"},{default:An(()=>[...ot[29]||(ot[29]=[Fn(" Worth it ",-1)])]),_:1})):(nn(),Mc(Vo,{key:1,color:"error",variant:"tonal",size:"small","prepend-icon":"mdi-close-circle-outline"},{default:An(()=>[...ot[30]||(ot[30]=[Fn(" Skip it ",-1)])]),_:1}))])]))),128))])])]),_:1})])):tr("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])):tr("",!0)]),_:1})]))}},yfe=zP(_fe,[["__scopeId","data-v-000337b6"]]),bfe={class:"section-card"},xfe={class:"meetup-container"},wfe={class:"person-header"},Tfe={class:"person-avatar"},Sfe={class:"person-info"},Efe=["onClick"],Cfe={class:"station-selector"},kfe=["onUpdate:modelValue"],Ife=["value"],Afe={class:"meetup-actions"},Pfe={class:"star-1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 512 512",style:{"enable-background":"new 0 0 512 512"},"xml:space":"preserve",width:"512",height:"512"},Mfe={class:"star-2",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 512 512",style:{"enable-background":"new 0 0 512 512"},"xml:space":"preserve",width:"512",height:"512"},Dfe={class:"star-3",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 512 512",style:{"enable-background":"new 0 0 512 512"},"xml:space":"preserve",width:"512",height:"512"},Lfe={class:"star-4",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 512 512",style:{"enable-background":"new 0 0 512 512"},"xml:space":"preserve",width:"512",height:"512"},Rfe={class:"star-5",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 512 512",style:{"enable-background":"new 0 0 512 512"},"xml:space":"preserve",width:"512",height:"512"},Ofe={class:"star-6",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 512 512",style:{"enable-background":"new 0 0 512 512"},"xml:space":"preserve",width:"512",height:"512"},Vfe={class:"star-1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 512 512",style:{"enable-background":"new 0 0 512 512"},"xml:space":"preserve",width:"512",height:"512"},Bfe={class:"star-2",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 512 512",style:{"enable-background":"new 0 0 512 512"},"xml:space":"preserve",width:"512",height:"512"},Ffe={class:"star-3",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 512 512",style:{"enable-background":"new 0 0 512 512"},"xml:space":"preserve",width:"512",height:"512"},zfe={class:"star-4",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 512 512",style:{"enable-background":"new 0 0 512 512"},"xml:space":"preserve",width:"512",height:"512"},Nfe={class:"star-5",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 512 512",style:{"enable-background":"new 0 0 512 512"},"xml:space":"preserve",width:"512",height:"512"},Ufe={class:"star-6",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 512 512",style:{"enable-background":"new 0 0 512 512"},"xml:space":"preserve",width:"512",height:"512"},$fe={class:"star-1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 512 512",style:{"enable-background":"new 0 0 512 512"},"xml:space":"preserve",width:"512",height:"512"},jfe={class:"star-2",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 512 512",style:{"enable-background":"new 0 0 512 512"},"xml:space":"preserve",width:"512",height:"512"},Wfe={class:"star-3",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 512 512",style:{"enable-background":"new 0 0 512 512"},"xml:space":"preserve",width:"512",height:"512"},Hfe={class:"star-4",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 512 512",style:{"enable-background":"new 0 0 512 512"},"xml:space":"preserve",width:"512",height:"512"},Gfe={class:"star-5",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 512 512",style:{"enable-background":"new 0 0 512 512"},"xml:space":"preserve",width:"512",height:"512"},qfe={class:"star-6",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 512 512",style:{"enable-background":"new 0 0 512 512"},"xml:space":"preserve",width:"512",height:"512"},Kfe={class:"map-panel mt-5"},Xfe={class:"map-wrapper"},Yfe={key:0,class:"alert alert-warning map-overlay-message mb-0"},Zfe={key:0,class:"map-overlay-message"},Jfe={key:0,class:"text-center py-5"},Qfe={key:1,class:"alert alert-danger mt-4"},eme={key:2,class:"meetup-results mt-4 feature-result-animate"},tme={class:"mb-3"},nme={class:"row g-3"},ime={class:"col-md-4"},rme={class:"border rounded-3 p-3 bg-light h-100"},sme={class:"mb-2"},ome={class:"mb-0"},ame={class:"col-md-8"},lme={class:"border rounded-3 p-3"},cme={class:"fw-semibold"},ume={class:"text-muted small"},dme={class:"badge bg-warning text-dark fs-6"},hme="pk.eyJ1IjoiY2hlZWF1biIsImEiOiJja2NydG83cWMwaGJsMnBqdjR5aHc3MzdlIn0.YGTZpi7JQMquEOv9E8K_bg",fme="/sg-rail.geojson",uw=10,mme={__name:"MeetupFinder",setup(e){const{allStations:t,shortestPath:n,estimateTimeMinutes:i,summariseSegments:r}=gP();let a=0;const l=tt([{id:++a,station:""}]),h=tt(!1),s=tt(""),p=tt(null),_=tt(null),x=tt(null),T=tt(!1),k=tt(""),P=tt("");let M=null;const R=new Map,F=new Map;let B=null;const H=fe(()=>!T.value&&!k.value);function G(){return l.value.length>=uw?(W(`Maximum of ${uw} people reached.`),!1):(l.value.push({id:++a,station:""}),!0)}function ee(ge){l.value=l.value.filter(be=>be.id!==ge),re()}function ie(){l.value=[{id:++a,station:""}],p.value=null,s.value="",re(),Y()}async function J(){s.value="",p.value=null;const ge=l.value.map(Ee=>Ee.station).filter(Boolean);if(ge.length<2){s.value="Please provide at least two starting stations.";return}h.value=!0,await new Promise(Ee=>setTimeout(Ee,450));let be=null,Be=1/0,nt=1/0,We=null;if(t.forEach(Ee=>{const Je=[],it=[];for(const ot of ge){if(ot===Ee){it.push(0),Je.push({origin:ot,path:{steps:[{station:ot,line:""}],totalWeight:0},minutes:0,segments:[],steps:[{station:ot,line:""}]});continue}const Ye=n(ot,Ee);if(!Ye)return;const ut=i(Ye.totalWeight);it.push(ut),Je.push({origin:ot,path:Ye,minutes:ut,segments:r(Ye),steps:Ye.steps})}const vt=Math.max(...it),mt=it.reduce((ot,Ye)=>ot+Ye,0)/it.length;(vt<Be||vt===Be&&mt<nt)&&(Be=vt,nt=mt,be=Ee,We=Je)}),!be||!We?.length){s.value="Unable to locate a fair meet-up point for the provided stations.",h.value=!1;return}const Le=We.reduce((Ee,Je)=>Ee+Je.minutes,0),Ze=Math.max(...We.map(Ee=>Ee.minutes));p.value={station:be,totalMinutes:Le,averageMinutes:Le/We.length,maxTravelTime:Ze,details:We},h.value=!1,Y(),W(`Suggested meeting point: ${be}`)}function $(ge){const be=["","","","","","","","","",""];return be[(ge-1)%be.length]}function W(ge){ge&&(P.value=ge,M&&(clearTimeout(M),M=null),M=window.setTimeout(()=>{P.value="",M=null},3500))}function X(ge){if(!ge)return;const be=l.value.findIndex(Le=>Le.station===ge);if(be!==-1){l.value[be].station="",W(`${ge} removed from Person ${be+1}.`);return}const Be=l.value.findIndex(Le=>!Le.station);if(Be!==-1){l.value[Be].station=ge,W(`${ge} assigned to Person ${Be+1}.`);return}if(l.value.length>=uw){W(`Cannot add ${ge}; maximum of ${uw} people reached.`);return}if(!G())return;const We=l.value.length-1;l.value[We].station=ge,W(`${ge} assigned to new Person ${We+1}.`)}function re(){!x.value||!T.value||(F.forEach(ge=>ge.remove()),F.clear(),l.value.forEach((ge,be)=>{if(!ge.station)return;const Be=R.get(ge.station.toLowerCase());if(!Be)return;const nt=document.createElement("div");nt.className="avatar-marker",nt.textContent=$(be+1);const We=new bp.Marker(nt).setLngLat(Be.geometry.coordinates).addTo(x.value);F.set(ge.id,We)}))}function Y(){if(!x.value||!T.value)return;B&&(B.remove(),B=null);const ge=p.value?.station;if(!ge)return;const be=R.get(ge.toLowerCase());if(!be)return;const Be=document.createElement("div");Be.className="meetup-marker",Be.innerHTML='<span class="material-icons">place</span>',B=new bp.Marker(Be).setLngLat(be.geometry.coordinates).addTo(x.value),x.value.flyTo({center:be.geometry.coordinates,zoom:13,essential:!0,speed:.8})}async function Z(){x.value||!_.value||(bp.accessToken=hme,x.value=new bp.Map({container:_.value,style:"mapbox://styles/mapbox/streets-v11",center:[103.8475,1.3011],zoom:11,renderWorldCopies:!1,pitchWithRotate:!1,attributionControl:!1,cooperativeGestures:!0}),x.value.addControl(new bp.NavigationControl({showCompass:!1})),x.value.on("load",async()=>{try{const ge=await fetch(fme);if(!ge.ok)throw new Error(`Unable to load map data (HTTP ${ge.status})`);const be=await ge.json();x.value.addSource("singatrain-rail",{type:"geojson",data:be}),x.value.addLayer({id:"singatrain-lines",source:"singatrain-rail",filter:["==",["geometry-type"],"LineString"],type:"line",paint:{"line-width":["interpolate",["linear"],["zoom"],10,2,16,6],"line-color":["match",["get","line_color"],"orangered","#d42e12","mediumseagreen","#009645","orange","#fa9e0d","saddlebrown","#9D5B25","darkmagenta","#9900aa","darkslateblue","#005ec4","#748477"],"line-opacity":.8},layout:{"line-cap":"round","line-join":"round"}}),x.value.addLayer({id:"singatrain-stations",source:"singatrain-rail",filter:["all",["==",["geometry-type"],"Point"],["==",["get","stop_type"],"station"]],type:"circle",paint:{"circle-radius":6,"circle-color":["match",["get","station_colors"],"red","#d42e12","green","#009645","orange","#fa9e0d","brown","#9D5B25","purple","#9900aa","blue","#005ec4","#748477"],"circle-stroke-color":"#fff","circle-stroke-width":2}}),x.value.addLayer({id:"singatrain-labels",source:"singatrain-rail",filter:["==",["get","stop_type"],"station"],type:"symbol",layout:{"text-field":["get","name"],"text-size":12,"text-anchor":"top","text-offset":[0,.8],"text-font":["DIN Pro Medium","Arial Unicode MS Bold"]},paint:{"text-color":"#2f3640","text-halo-color":"#fff","text-halo-width":1}}),be.features.filter(Be=>Be.geometry?.type==="Point"&&Be.properties?.stop_type==="station").forEach(Be=>{R.set(Be.properties.name.toLowerCase(),Be)}),x.value.on("mouseenter","singatrain-stations",()=>{x.value&&(x.value.getCanvas().style.cursor="pointer")}),x.value.on("mouseleave","singatrain-stations",()=>{x.value&&(x.value.getCanvas().style.cursor="")}),x.value.on("click","singatrain-stations",Be=>{const We=Be.features?.[0]?.properties?.name;X(We)}),T.value=!0,k.value="",re(),Y()}catch(ge){console.error("Failed to load rail GeoJSON",ge),k.value="Map data is unavailable right now. Please try again later."}}))}return Kr(()=>{Z()}),Nr(()=>{F.forEach(ge=>ge.remove()),F.clear(),B&&(B.remove(),B=null),x.value&&(x.value.remove(),x.value=null),M&&(clearTimeout(M),M=null)}),qt(l,()=>{re()},{deep:!0}),qt(()=>p.value?.station,()=>{Y()}),qt(T,ge=>{ge&&(re(),Y())}),(ge,be)=>(nn(),mn("section",bfe,[be[33]||(be[33]=z("div",{class:"d-flex flex-wrap justify-content-between align-items-start gap-3 mb-4"},[z("div",null,[z("h2",{class:"section-title mb-2"},"Meet-up Point Finder"),z("p",{class:"text-muted mb-0"}," Enter origin stations for your group and we'll suggest the fairest MRT interchange, minimising total travel time for everyone. ")])],-1)),z("div",xfe,[(nn(!0),mn(un,null,Ws(l.value,(Be,nt)=>(nn(),mn("div",{key:Be.id,class:xt(["person-card",{active:!!Be.station}])},[z("div",wfe,[z("div",Tfe,sn(nt+1),1),z("div",Sfe,[z("h6",null,"Person "+sn(nt+1),1),z("small",null,sn(Be.station||"Choose a starting station"),1)]),l.value.length>1?(nn(),mn("button",{key:0,class:"btn btn-sm btn-outline-danger ms-auto",type:"button",onClick:We=>ee(Be.id)},[...be[0]||(be[0]=[z("span",{class:"material-icons"},"delete",-1)])],8,Efe)):tr("",!0)]),z("div",Cfe,[Ii(z("select",{"onUpdate:modelValue":We=>Be.station=We,class:"form-select"},[be[1]||(be[1]=z("option",{value:""},"-- Select station --",-1)),(nn(!0),mn(un,null,Ws(xi(t),We=>(nn(),mn("option",{key:We,value:We},sn(We),9,Ife))),128))],8,kfe),[[$v,Be.station]])])],2))),128)),z("div",Afe,[z("button",{class:"custom-btn",type:"button",onClick:J},[be[8]||(be[8]=z("span",{class:"material-icons me-1"},"travel_explore",-1)),be[9]||(be[9]=Fn(" Meet-up ",-1)),(nn(),mn("svg",Pfe,[...be[2]||(be[2]=[z("polygon",{class:"fil0",points:"259.216,29.942 330.286,193.919 512,222.877 378,357.736 404.58,439.15 259.216,378.062 113.852,439.15 140.432,357.736 6,222.877 188.146,193.919 "},null,-1)])])),(nn(),mn("svg",Mfe,[...be[3]||(be[3]=[z("polygon",{class:"fil0",points:"259.216,29.942 330.286,193.919 512,222.877 378,357.736 404.58,439.15 259.216,378.062 113.852,439.15 140.432,357.736 6,222.877 188.146,193.919 "},null,-1)])])),(nn(),mn("svg",Dfe,[...be[4]||(be[4]=[z("polygon",{class:"fil0",points:"259.216,29.942 330.286,193.919 512,222.877 378,357.736 404.58,439.15 259.216,378.062 113.852,439.15 140.432,357.736 6,222.877 188.146,193.919 "},null,-1)])])),(nn(),mn("svg",Lfe,[...be[5]||(be[5]=[z("polygon",{class:"fil0",points:"259.216,29.942 330.286,193.919 512,222.877 378,357.736 404.58,439.15 259.216,378.062 113.852,439.15 140.432,357.736 6,222.877 188.146,193.919 "},null,-1)])])),(nn(),mn("svg",Rfe,[...be[6]||(be[6]=[z("polygon",{class:"fil0",points:"259.216,29.942 330.286,193.919 512,222.877 378,357.736 404.58,439.15 259.216,378.062 113.852,439.15 140.432,357.736 6,222.877 188.146,193.919 "},null,-1)])])),(nn(),mn("svg",Ofe,[...be[7]||(be[7]=[z("polygon",{class:"fil0",points:"259.216,29.942 330.286,193.919 512,222.877 378,357.736 404.58,439.15 259.216,378.062 113.852,439.15 140.432,357.736 6,222.877 188.146,193.919 "},null,-1)])]))]),z("button",{class:"custom-btn",type:"button",onClick:G},[be[16]||(be[16]=z("span",{class:"material-icons me-1"},"person_add",-1)),be[17]||(be[17]=Fn(" Add person ",-1)),(nn(),mn("svg",Vfe,[...be[10]||(be[10]=[z("polygon",{class:"fil0",points:"259.216,29.942 330.286,193.919 512,222.877 378,357.736 404.58,439.15 259.216,378.062 113.852,439.15 140.432,357.736 6,222.877 188.146,193.919 "},null,-1)])])),(nn(),mn("svg",Bfe,[...be[11]||(be[11]=[z("polygon",{class:"fil0",points:"259.216,29.942 330.286,193.919 512,222.877 378,357.736 404.58,439.15 259.216,378.062 113.852,439.15 140.432,357.736 6,222.877 188.146,193.919 "},null,-1)])])),(nn(),mn("svg",Ffe,[...be[12]||(be[12]=[z("polygon",{class:"fil0",points:"259.216,29.942 330.286,193.919 512,222.877 378,357.736 404.58,439.15 259.216,378.062 113.852,439.15 140.432,357.736 6,222.877 188.146,193.919 "},null,-1)])])),(nn(),mn("svg",zfe,[...be[13]||(be[13]=[z("polygon",{class:"fil0",points:"259.216,29.942 330.286,193.919 512,222.877 378,357.736 404.58,439.15 259.216,378.062 113.852,439.15 140.432,357.736 6,222.877 188.146,193.919 "},null,-1)])])),(nn(),mn("svg",Nfe,[...be[14]||(be[14]=[z("polygon",{class:"fil0",points:"259.216,29.942 330.286,193.919 512,222.877 378,357.736 404.58,439.15 259.216,378.062 113.852,439.15 140.432,357.736 6,222.877 188.146,193.919 "},null,-1)])])),(nn(),mn("svg",Ufe,[...be[15]||(be[15]=[z("polygon",{class:"fil0",points:"259.216,29.942 330.286,193.919 512,222.877 378,357.736 404.58,439.15 259.216,378.062 113.852,439.15 140.432,357.736 6,222.877 188.146,193.919 "},null,-1)])]))]),z("button",{class:"custom-btn",type:"button",onClick:ie},[be[24]||(be[24]=z("span",{class:"material-icons me-1"},"restart_alt",-1)),be[25]||(be[25]=Fn(" Clear ",-1)),(nn(),mn("svg",$fe,[...be[18]||(be[18]=[z("polygon",{class:"fil0",points:"259.216,29.942 330.286,193.919 512,222.877 378,357.736 404.58,439.15 259.216,378.062 113.852,439.15 140.432,357.736 6,222.877 188.146,193.919 "},null,-1)])])),(nn(),mn("svg",jfe,[...be[19]||(be[19]=[z("polygon",{class:"fil0",points:"259.216,29.942 330.286,193.919 512,222.877 378,357.736 404.58,439.15 259.216,378.062 113.852,439.15 140.432,357.736 6,222.877 188.146,193.919 "},null,-1)])])),(nn(),mn("svg",Wfe,[...be[20]||(be[20]=[z("polygon",{class:"fil0",points:"259.216,29.942 330.286,193.919 512,222.877 378,357.736 404.58,439.15 259.216,378.062 113.852,439.15 140.432,357.736 6,222.877 188.146,193.919 "},null,-1)])])),(nn(),mn("svg",Hfe,[...be[21]||(be[21]=[z("polygon",{class:"fil0",points:"259.216,29.942 330.286,193.919 512,222.877 378,357.736 404.58,439.15 259.216,378.062 113.852,439.15 140.432,357.736 6,222.877 188.146,193.919 "},null,-1)])])),(nn(),mn("svg",Gfe,[...be[22]||(be[22]=[z("polygon",{class:"fil0",points:"259.216,29.942 330.286,193.919 512,222.877 378,357.736 404.58,439.15 259.216,378.062 113.852,439.15 140.432,357.736 6,222.877 188.146,193.919 "},null,-1)])])),(nn(),mn("svg",qfe,[...be[23]||(be[23]=[z("polygon",{class:"fil0",points:"259.216,29.942 330.286,193.919 512,222.877 378,357.736 404.58,439.15 259.216,378.062 113.852,439.15 140.432,357.736 6,222.877 188.146,193.919 "},null,-1)])]))])])]),z("div",Kfe,[be[27]||(be[27]=pw('<div class="d-flex flex-wrap align-items-center justify-content-between gap-3 mb-3" data-v-def0c599><div class="d-flex align-items-center gap-2" data-v-def0c599><span class="material-icons text-danger" data-v-def0c599>map</span><h5 class="mb-0" data-v-def0c599>Interactive MRT Network</h5></div><div class="text-muted small" data-v-def0c599>Click a station to assign or remove it for the next available person.</div></div>',1)),z("div",Xfe,[z("div",{ref_key:"mapContainer",ref:_,class:"meetup-map rounded-4"},null,512),z("div",{class:xt(["map-loading-overlay",{show:H.value}])},[...be[26]||(be[26]=[pw('<div class="map-loading-content" data-v-def0c599><div class="capybaraloader" data-v-def0c599><div class="capybara" data-v-def0c599><div class="capy" data-v-def0c599><div class="capyhead" data-v-def0c599><div class="capyear" data-v-def0c599><div class="capyear2" data-v-def0c599></div></div><div class="capyear" data-v-def0c599><div class="capyear2" data-v-def0c599></div></div><div class="capymouth" data-v-def0c599><div class="capylips" data-v-def0c599></div><div class="capylips" data-v-def0c599></div></div><div class="capyeye" data-v-def0c599></div><div class="capyeye" data-v-def0c599></div></div><div class="capyleg" data-v-def0c599><div class="capyleg2" data-v-def0c599></div><div class="capyleg2" data-v-def0c599></div></div></div></div><div class="loader" data-v-def0c599><div class="loaderline" data-v-def0c599></div></div></div><h6 class="mt-3" data-v-def0c599>Loading the rail network</h6><p class="mb-0" data-v-def0c599>Map layers are stitched together in a moment.</p></div>',1)])],2),k.value?(nn(),mn("div",Yfe,sn(k.value),1)):tr("",!0)]),P.value?(nn(),mn("div",Zfe,sn(P.value),1)):tr("",!0)]),h.value?(nn(),mn("div",Jfe,[...be[28]||(be[28]=[pw('<div class="capybaraloader mx-auto" data-v-def0c599><div class="capybara" data-v-def0c599><div class="capy" data-v-def0c599><div class="capyhead" data-v-def0c599><div class="capyear" data-v-def0c599><div class="capyear2" data-v-def0c599></div></div><div class="capyear" data-v-def0c599><div class="capyear2" data-v-def0c599></div></div><div class="capymouth" data-v-def0c599><div class="capylips" data-v-def0c599></div><div class="capylips" data-v-def0c599></div></div><div class="capyeye" data-v-def0c599></div><div class="capyeye" data-v-def0c599></div></div><div class="capyleg" data-v-def0c599><div class="capyleg2" data-v-def0c599></div><div class="capyleg2" data-v-def0c599></div></div></div></div><div class="loader" data-v-def0c599><div class="loaderline" data-v-def0c599></div></div></div><p class="mt-3 text-muted" data-v-def0c599>Crunching routes</p>',2)])])):tr("",!0),s.value?(nn(),mn("div",Qfe,sn(s.value),1)):tr("",!0),p.value?(nn(),mn("div",eme,[z("h4",tme,[be[29]||(be[29]=z("span",{class:"material-icons align-middle me-2 text-danger"},"place",-1)),Fn(" Suggested meet-up: "+sn(p.value.station),1)]),z("div",nme,[z("div",ime,[z("div",rme,[z("p",sme,[be[30]||(be[30]=z("strong",null,"Total travel time:",-1)),Fn(" "+sn(p.value.totalMinutes)+" minutes ",1)]),z("p",ome,[be[31]||(be[31]=z("strong",null,"Average per person:",-1)),Fn(" "+sn(p.value.averageMinutes.toFixed(1))+" minutes ",1)])])]),z("div",ame,[z("div",lme,[be[32]||(be[32]=z("h6",{class:"text-uppercase text-muted fw-semibold mb-2"},"Individual journeys",-1)),(nn(!0),mn(un,null,Ws(p.value.details,Be=>(nn(),mn("div",{key:Be.origin,class:"d-flex justify-content-between align-items-center border-bottom py-2"},[z("div",null,[z("div",cme,sn(Be.origin),1),z("div",ume,sn(Be.steps.length)+" stops / "+sn(Be.segments.length)+" segment(s) ",1)]),z("span",dme,sn(Be.minutes)+" min",1)]))),128))])])])])):tr("",!0)]))}},pme=zP(mme,[["__scopeId","data-v-def0c599"]]),gme={id:"profile",class:"section-card"},vme={key:0,class:"overlay-wrapper"},_me={key:0,class:"overlay-message error"},yme={key:1,class:"overlay-message success"},bme={key:1,id:"auth-section"},xme={key:0,id:"password-requirements"},wme={class:"auth-links"},Tme={key:2,class:"modal-overlay"},Sme={class:"modal-content"},Eme={class:"modal-buttons"},Cme={key:3,id:"dashboard-section"},kme={style:{color:"#111827"}},Ime={class:"profile-layout"},Ame={class:"left-column"},Pme={class:"card",id:"change-name-div"},Mme={class:"card",id:"add-favorite-div"},Dme=["value"],Lme={class:"flip-card-back"},Rme={class:"card-header"},Ome={class:"account-info"},Vme={class:"account-row"},Bme={class:"account-row"},Fme={class:"favorites-list"},zme={id:"favoriteList"},Nme=["onClick"],Ume={key:4,class:"modal-overlay"},$me={class:"modal-content"},jme={key:0,style:{color:"var(--bs-body-color)"},class:"error-message"},Wme={key:5,class:"loading-overlay"},Hme={__name:"Profile",setup(e){const t=tt(null),n=tt(""),i=tt(""),r=tt(""),a=tt(""),l=tt("");let h=null;const s=tt(!1),p=tt(!1),_=tt(""),x=tt("--/--/----"),{state:T,addFavorite:k,removeFavorite:P}=m0(),M=fe(()=>T.favorites),R=tt(""),F=tt(""),B=tt(!1),H=tt(""),G=tt(!1),ee=tt(!1),ie=tt(!1),J=tt(!1),$=tt(!1),W=tt(""),X=tt(!1),re=tt(!1),Y=tt(NN);function Z(ut,Ke,jt=3e3){ut==="error"?(a.value=Ke,l.value=""):(l.value=Ke,a.value=""),h&&clearTimeout(h),h=setTimeout(()=>{a.value="",l.value="",h=null},jt)}Nr(()=>{h&&clearTimeout(h),p.value=!1,B.value=!1,X.value=!1});let ge=null;Kr(()=>{ge=CV(ut=>{t.value=ut,p.value=!1,B.value=!1,a.value="",l.value=""})}),Nr(()=>{ge&&ge()});function be(){a.value="",l.value=""}function Be(ut){switch(ut){case"auth/email-already-in-use":return"This email is already in use. Try signing in or resetting your password.";case"auth/invalid-email":return"Invalid email format.";case"auth/operation-not-allowed":return"Email/password accounts are not enabled.";case"auth/weak-password":return"Password too weak. Please use a stronger one.";case"auth/user-not-found":return"No user found with this email.";case"auth/wrong-password":case"auth/invalid-credential":case"auth/invalid-login-credentials":return"Invalid email or password.";case"auth/too-many-requests":return"Too many attempts. Please try again later.";case"auth/network-request-failed":return"Network error. Please check your internet connection.";default:return"An unknown error occurred. Please try again."}}const nt=async()=>{be();const ut=await qee(n.value,i.value);ut.success?(a.value="",Z("success","Welcome back!"),t.value=ut.user):(Z("error",ut.message),l.value="")},We=async()=>{be();const ut=i.value||"";if(!/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%^&*(),.?":{}|<>]).{8,}$/.test(ut)){a.value="Password must include at least 8 characters, one uppercase letter, one lowercase letter, one number, and one special character.",l.value="";return}const jt=await Gee(n.value,ut);jt.success?(a.value="",Z("success","Account created successfully!"),t.value=jt.user,await ot(jt.user)):(Z("error",jt.message),l.value="")};qt(i,ut=>{const Ke=(ut||"").toString();s.value=Ke.length>0,G.value=Ke.length>=6,ee.value=/[A-Z]/.test(Ke),ie.value=/[a-z]/.test(Ke),J.value=/[0-9]/.test(Ke),$.value=/[!@#$%^&*(),.?":{}|<>]/.test(Ke)});const Le=async()=>{try{await Kee(),be(),Z("success","You have been signed out.")}catch(ut){Z("error",Be(ut.code))}},Ze=async()=>{if(!t.value){Z("error","No user is currently logged in.");return}if(!H.value){W.value="Please enter your password to confirm deletion.";return}X.value=!0;try{const ut=ng.credential(t.value.email,H.value);await iY(t.value,ut);const Ke=t.value.uid;await $ee(Ov(Vv,"users",Ke)),await dY(t.value),Z("success","Your account has been deleted."),B.value=!1,W.value="",setTimeout(()=>{t.value=null,_.value="",x.value="--/--/----",M.value=[],H.value="",X.value=!1},1200)}catch(ut){console.error("Delete account error:",ut),X.value=!1,W.value=ut.code==="auth/invalid-credential"?"Incorrect password. Please try again.":"Account deletion failed. Please try again."}},Ee=()=>{B.value=!1,H.value="",W.value=""},Je=async()=>{if(be(),!r.value)return Z("error","Enter your email first.");try{await Xee(r.value),Z("success","Password reset email sent!"),p.value=!1,r.value=""}catch(ut){Z("error",Be(ut.code))}},it=async()=>{try{await Yee(t.value.uid,_.value),Z("success","Profile updated!")}catch{Z("error","Failed to update profile.")}},vt=async()=>{if(!R.value||!F.value){Z("error","Enter both label and station.");return}const ut={label:R.value,station:F.value};try{t.value?.uid&&(await Zee(t.value.uid,ut),k(ut),R.value="",F.value="",Z("success","Successfully added new station."))}catch(Ke){console.error("Add favorite error:",Ke),Z("error","Failed to add favorite.")}},mt=async ut=>{try{if(!t.value?.uid)return;P(ut);const Ke=T.favorites.map(jt=>({...jt}));await QA(Ov(Vv,"users",t.value.uid),{favorite_stations:Ke}),Z("success","Favorite removed!")}catch(Ke){console.error("Remove favorite error:",Ke),Z("error","Failed to remove favorite.")}};CV(async ut=>{t.value=ut,be(),ut?await ot(ut):(_.value="",x.value="--/--/----",M.value=[])});async function ot(ut){if(!ut)return;const Ke=Ov(Vv,"users",ut.uid),jt=await Nee(Ke);if(jt.exists()){const xn=jt.data();_.value=xn.name||"Anonymous",x.value=xn.created_at?.toDate?xn.created_at.toDate().toLocaleDateString():"--/--/----",T.favorites.splice(0,T.favorites.length),Array.isArray(xn.favorite_stations)&&xn.favorite_stations.forEach(ke=>k(ke))}else{const xn={name:"Anonymous",email:ut.email,created_at:new Date,favorite_stations:[]};await c6(Ke,xn),_.value=xn.name,x.value=xn.created_at.toLocaleDateString(),T.favorites.splice(0,T.favorites.length)}}const Ye=()=>{window.innerWidth<=992&&(re.value=!re.value)};return(ut,Ke)=>(nn(),mn("section",gme,[a.value||l.value?(nn(),mn("div",vme,[a.value?(nn(),mn("div",_me,sn(a.value),1)):tr("",!0),l.value?(nn(),mn("div",yme,sn(l.value),1)):tr("",!0)])):tr("",!0),t.value?tr("",!0):(nn(),mn("div",bme,[Ke[11]||(Ke[11]=z("h2",null,"Join or Sign In",-1)),Ke[12]||(Ke[12]=z("label",{for:"auth-email"},"Email:",-1)),Ii(z("input",{type:"email",id:"auth-email","onUpdate:modelValue":Ke[0]||(Ke[0]=jt=>n.value=jt),placeholder:"Enter your email"},null,512),[[bf,n.value]]),Ke[13]||(Ke[13]=z("label",{for:"auth-password"},"Password:",-1)),Ii(z("input",{type:"password",id:"auth-password","onUpdate:modelValue":Ke[1]||(Ke[1]=jt=>i.value=jt),placeholder:"Enter your password"},null,512),[[bf,i.value]]),s.value?(nn(),mn("div",xme,[Ke[10]||(Ke[10]=z("p",null,"Password must contain:",-1)),z("span",{class:xt({met:G.value,"not-met":!G.value})},"- At least 6 characters",2),z("span",{class:xt({met:ee.value,"not-met":!ee.value})},"- An uppercase letter",2),z("span",{class:xt({met:ie.value,"not-met":!ie.value})},"- A lowercase letter",2),z("span",{class:xt({met:J.value,"not-met":!J.value})},"- A number",2),z("span",{class:xt({met:$.value,"not-met":!$.value})},"- A special character (!@#$%^&*)",2)])):tr("",!0),z("div",{class:"auth-buttons"},[z("button",{id:"login-btn",onClick:nt},"Sign In")]),z("div",wme,[z("a",{href:"#",onClick:Ke[2]||(Ke[2]=ol(jt=>{p.value=!0,be()},["prevent"]))},"Forgot Password?"),z("a",{href:"#",onClick:ol(We,["prevent"]),class:"register-link"},"Register New Account")])])),p.value?(nn(),mn("div",Tme,[z("div",Sme,[Ke[14]||(Ke[14]=z("h3",{style:{color:"var(--bs-body-color)"}},"Reset Your Password",-1)),Ke[15]||(Ke[15]=z("p",{style:{color:"var(--bs-body-color)"}},"Enter your email to receive a password reset link.",-1)),Ii(z("input",{type:"email","onUpdate:modelValue":Ke[3]||(Ke[3]=jt=>r.value=jt),placeholder:"Enter your email"},null,512),[[bf,r.value]]),z("div",Eme,[z("button",{type:"button",class:"cancel",onClick:Ke[4]||(Ke[4]=jt=>p.value=!1)}," Cancel "),z("button",{type:"button",class:"confirm",onClick:Je}," Send Reset Email ")])])])):tr("",!0),t.value?(nn(),mn("div",Cme,[Ke[28]||(Ke[28]=z("h2",null,"Welcome to SingaTrain!",-1)),z("p",kme,[Ke[16]||(Ke[16]=Fn("You are logged in as: ",-1)),z("strong",null,sn(t.value.email),1)]),z("div",Ime,[z("div",Ame,[z("div",Pme,[Ke[17]||(Ke[17]=z("h3",{class:"text-dark"},"Change Display Name",-1)),Ii(z("input",{type:"text","onUpdate:modelValue":Ke[5]||(Ke[5]=jt=>_.value=jt),placeholder:"Current name"},null,512),[[bf,_.value]]),z("button",{onClick:it},"Save Profile")]),z("div",Mme,[Ke[19]||(Ke[19]=z("h3",{class:"text-dark"},"Add New Favorite Station",-1)),Ke[20]||(Ke[20]=z("label",{for:"favoriteLabel"},"Label:",-1)),Ii(z("input",{type:"text",id:"favoriteLabel","onUpdate:modelValue":Ke[6]||(Ke[6]=jt=>R.value=jt),placeholder:"Favorite name"},null,512),[[bf,R.value]]),Ke[21]||(Ke[21]=z("label",{for:"favoriteStation"},"Station:",-1)),Ii(z("select",{id:"favoriteStation","onUpdate:modelValue":Ke[7]||(Ke[7]=jt=>F.value=jt)},[Ke[18]||(Ke[18]=z("option",{disabled:"",value:""},"Select a station",-1)),(nn(!0),mn(un,null,Ws(Y.value,jt=>(nn(),mn("option",{key:jt,value:jt},sn(jt),9,Dme))),128))],512),[[$v,F.value]]),z("button",{onClick:vt},"Add Favorite Station")])]),z("div",{class:"card flip-card",id:"user-info-card",onClick:Ye},[z("div",{class:xt(["flip-card-inner",{"is-flipped":re.value}])},[Ke[27]||(Ke[27]=z("div",{class:"flip-card-front"},[z("img",{src:FN,alt:"SingaTrain Logo",class:"logo"}),z("p",{class:"hover-hint"})],-1)),z("div",Lme,[z("div",Rme,[z("h2",null,sn(_.value||"User Name"),1)]),z("div",Ome,[z("div",Vme,[Ke[23]||(Ke[23]=z("span",{class:"material-icons",style:{color:"#c2410c"}},"calendar_today",-1)),z("div",null,[Ke[22]||(Ke[22]=z("p",{class:"label"},"Member Since",-1)),z("p",null,sn(x.value),1)])]),z("div",Bme,[Ke[25]||(Ke[25]=z("span",{class:"material-icons",style:{color:"#c2410c"}},"star",-1)),z("div",null,[Ke[24]||(Ke[24]=z("p",{class:"label"},"Favorite Stations",-1)),z("p",null,sn(M.value.length)+" stations",1)])])]),Ke[26]||(Ke[26]=z("h3",{class:"favorites-title text-dark"},"Your Favorite Stations",-1)),z("div",Fme,[z("ul",zme,[(nn(!0),mn(un,null,Ws(M.value,(jt,xn)=>(nn(),mn("li",{key:xn},[z("span",null,[z("strong",null,sn(jt.label),1),Fn(" "+sn(jt.station),1)]),z("button",{onClick:ke=>mt(jt)},"Remove",8,Nme)]))),128))])])])],2)])]),z("button",{id:"logout-btn",onClick:Le},"Sign Out"),z("button",{id:"delete-account-btn",onClick:Ke[8]||(Ke[8]=jt=>B.value=!0)}," Delete Account ")])):tr("",!0),B.value?(nn(),mn("div",Ume,[z("div",$me,[Ke[29]||(Ke[29]=z("h3",{style:{color:"var(--bs-body-color)"}},"Confirm Account Deletion",-1)),Ke[30]||(Ke[30]=z("p",{style:{color:"var(--bs-body-color)"}},"Enter your password to confirm deletion. This action cannot be undone.",-1)),Ii(z("input",{type:"password","onUpdate:modelValue":Ke[9]||(Ke[9]=jt=>H.value=jt),placeholder:"Password"},null,512),[[bf,H.value]]),W.value?(nn(),mn("div",jme,sn(W.value),1)):tr("",!0),z("div",{class:"modal-buttons"},[z("button",{type:"button",class:"cancel",onClick:Ee},"Cancel"),z("button",{type:"button",class:"confirm",onClick:Ze},"Yes, Delete")])])])):tr("",!0),X.value?(nn(),mn("div",Wme,[...Ke[31]||(Ke[31]=[pw('<div class="train-loader"><div class="track-wrapper"><div class="track"></div><div class="train" aria-hidden="true"><div class="engine"></div><div class="car"></div><div class="car"></div></div></div><p>Clearing your data... please wait </p></div>',1)])])):tr("",!0)]))}},AC={"Downtown Line":{"Towards Expo":[{code:"DT1",station:"Bukit Panjang",first:"5:30 AM",last:"11:35 PM"},{code:"DT7",station:"Sixth Avenue",first:"5:38 AM",last:"11:42 PM"},{code:"DT14",station:"Bugis",first:"5:44 AM",last:"11:55 PM"},{code:"DT21",station:"Bencoolen",first:"5:47 AM",last:"12:02 AM"},{code:"DT35",station:"Expo",first:"5:50 AM",last:"12:15 AM"}],"Towards Bukit Panjang":[{code:"DT35",station:"Expo",first:"5:32 AM",last:"11:40 PM"},{code:"DT29",station:"Bedok North",first:"5:41 AM",last:"11:52 PM"},{code:"DT20",station:"Fort Canning",first:"5:49 AM",last:"12:08 AM"},{code:"DT9",station:"Newton",first:"5:55 AM",last:"12:18 AM"},{code:"DT1",station:"Bukit Panjang",first:"6:03 AM",last:"12:33 AM"}]},"North East Line":{"Towards HarbourFront":[{code:"NE17",station:"Punggol",first:"5:36 AM",last:"11:47 PM"},{code:"NE12",station:"Serangoon",first:"5:42 AM",last:"11:59 PM"},{code:"NE7",station:"Little India",first:"5:47 AM",last:"12:08 AM"},{code:"NE3",station:"Outram Park",first:"5:53 AM",last:"12:20 AM"},{code:"NE1",station:"HarbourFront",first:"5:56 AM",last:"12:24 AM"}],"Towards Punggol Coast":[{code:"NE1",station:"HarbourFront",first:"5:34 AM",last:"11:45 PM"},{code:"NE4",station:"Chinatown",first:"5:38 AM",last:"11:53 PM"},{code:"NE10",station:"Potong Pasir",first:"5:46 AM",last:"12:05 AM"},{code:"NE14",station:"Hougang",first:"5:51 AM",last:"12:15 AM"},{code:"NE18",station:"Punggol Coast (future)",first:"",last:""}]},"North-South Line":{},"East-West Line":{},"Thomson-East Coast Line":{},"Circle Line":{},"LRT Line":{}},Gme={class:"section-card"},qme={class:"row g-3 align-items-end"},Kme={class:"col-md-4"},Xme=["value"],Yme={class:"col-md-4"},Zme=["value"],Jme={class:"col-md-4"},Qme={class:"border rounded-3 p-3 mt-4"},epe={class:"d-flex justify-content-between align-items-center mb-3"},tpe={class:"badge bg-secondary"},npe={key:0,class:"text-muted"},ipe={class:"fw-semibold"},rpe={class:"text-muted small"},spe={class:"text-end"},ope={class:"text-muted small"},ape={__name:"FirstLastTrain",setup(e){const t=Object.keys(AC),n=tt(t[0]),i=fe(()=>Object.keys(AC[n.value]||{})),r=tt(""),a=tt("");qt(i,h=>{h.includes(r.value)||(r.value=h[0]||"")},{immediate:!0});const l=fe(()=>{const h=AC[n.value]?.[r.value]||[];if(!a.value)return h;const s=a.value.toLowerCase();return h.filter(p=>p.station.toLowerCase().includes(s)||p.code.toLowerCase().includes(s))});return(h,s)=>(nn(),mn("section",Gme,[s[8]||(s[8]=z("h2",{class:"section-title mb-3"},"First & Last Train Timings",-1)),s[9]||(s[9]=z("p",{class:"text-muted"},[Fn(" Reference departures for selected lines and directions. Integrate with the real LTA DataMall feed by replacing the static dataset in "),z("code",null,"src/data/trainTimings.js"),Fn(". ")],-1)),z("div",qme,[z("div",Kme,[s[3]||(s[3]=z("label",{class:"form-label",for:"timingLine"},"Line",-1)),Ii(z("select",{id:"timingLine","onUpdate:modelValue":s[0]||(s[0]=p=>n.value=p),class:"form-select"},[(nn(!0),mn(un,null,Ws(xi(t),p=>(nn(),mn("option",{key:p,value:p},sn(p),9,Xme))),128))],512),[[$v,n.value]])]),z("div",Yme,[s[4]||(s[4]=z("label",{class:"form-label",for:"timingDirection"},"Direction",-1)),Ii(z("select",{id:"timingDirection","onUpdate:modelValue":s[1]||(s[1]=p=>r.value=p),class:"form-select"},[(nn(!0),mn(un,null,Ws(i.value,p=>(nn(),mn("option",{key:p,value:p},sn(p),9,Zme))),128))],512),[[$v,r.value]])]),z("div",Jme,[s[5]||(s[5]=z("label",{class:"form-label",for:"timingSearch"},"Search station",-1)),Ii(z("input",{id:"timingSearch","onUpdate:modelValue":s[2]||(s[2]=p=>a.value=p),type:"search",class:"form-control",placeholder:"Start typing a station"},null,512),[[bf,a.value]])])]),z("div",Qme,[z("div",epe,[z("strong",null,sn(n.value)+"  "+sn(r.value),1),z("span",tpe,sn(l.value.length)+" station(s)",1)]),l.value.length?tr("",!0):(nn(),mn("div",npe,"No stations match your search.")),(nn(!0),mn(un,null,Ws(l.value,p=>(nn(),mn("div",{key:p.code,class:"d-flex justify-content-between py-2 border-top"},[z("div",null,[z("div",ipe,sn(p.station),1),z("div",rpe,sn(p.code),1)]),z("div",spe,[z("div",null,[s[6]||(s[6]=z("strong",null,"First",-1)),Fn(" "+sn(p.first),1)]),z("div",ope,[s[7]||(s[7]=z("strong",null,"Last",-1)),Fn(" "+sn(p.last),1)])])]))),128))])]))}},lpe={class:"container main-content"},cpe={__name:"App",setup(e){const{state:t}=m0(),n={dashboard:kV,live:Qte,route:oae,fare:yfe,meetup:pme,profile:Hme,firstLast:ape},i=fe(()=>n[t.activeTab]||kV);function r(){if(!xw)return;const a=document.querySelectorAll(".dashboard-view .section-card"),l=document.querySelectorAll(".section-card:not(.dashboard-view .section-card)");a.forEach(h=>{xw.set(h,{opacity:1,visibility:"visible",display:"block"})}),l.length>0&&xw.from(l,{opacity:0,duration:.35,ease:"power2.out"})}return Kr(()=>{Vx&&Vx.init({once:!0,duration:550,easing:"ease-out"}),Hn(()=>{const a=document.querySelectorAll(".section-card");a.forEach(s=>{s.removeAttribute("data-aos"),s.removeAttribute("data-aos-delay"),s.removeAttribute("data-aos-duration"),s.removeAttribute("data-aos-easing")});const l=document.querySelectorAll(".dashboard-view .section-card, .dashboard-view [data-aos]");l.forEach(s=>{s.style.opacity="1",s.style.visibility="visible",s.style.display="block",s.style.transform="none"}),r();const h=()=>{a.forEach(s=>{s.style.setProperty("margin-top","0","important"),s.style.setProperty("margin-bottom","0","important"),s.style.marginTop="0",s.style.marginBottom="0"}),l.forEach(s=>{s.style.opacity="1",s.style.visibility="visible",s.style.display="block"})};h(),setTimeout(h,100),setTimeout(h,600)})}),qt(()=>t.activeTab,()=>{Hn(()=>{const a=document.querySelectorAll(".section-card");a.forEach(s=>{s.removeAttribute("data-aos"),s.removeAttribute("data-aos-delay"),s.removeAttribute("data-aos-duration"),s.removeAttribute("data-aos-easing")});const l=document.querySelectorAll(".dashboard-view .section-card, .dashboard-view [data-aos]");l.forEach(s=>{s.style.opacity="1",s.style.visibility="visible",s.style.display="block",s.style.transform="none"}),Vx&&Vx.refresh(),r();const h=()=>{a.forEach(s=>{s.style.setProperty("margin-top","0","important"),s.style.setProperty("margin-bottom","0","important"),s.style.marginTop="0",s.style.marginBottom="0"}),l.forEach(s=>{s.style.opacity="1",s.style.visibility="visible",s.style.display="block"})};h(),setTimeout(h,100),setTimeout(h,600)})}),(a,l)=>(nn(),mn("div",null,[l[0]||(l[0]=z("div",{class:"video-background"},[z("video",{autoplay:"",muted:"",loop:"",playsinline:"",class:"bg-video"},[z("source",{src:BH,type:"video/mp4"})]),z("div",{class:"video-overlay"})],-1)),se(pq),z("main",lpe,[se(od,{name:"fade-slide",mode:"out-in"},{default:An(()=>[(nn(),Mc(d7,{include:"RoutePlanner"},[(nn(),Mc(az(i.value),{key:xi(t).activeTab}))],1024))]),_:1})])]))}};var Vw={exports:{}};/*!
  * Bootstrap v5.3.8 (https://getbootstrap.com/)
  * Copyright 2011-2025 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */var upe=Vw.exports,iF;function dpe(){return iF||(iF=1,(function(e,t){(function(n,i){e.exports=i()})(upe,function(){const n=new Map,i={set(ve,V,oe){n.has(ve)||n.set(ve,new Map);const Ie=n.get(ve);Ie.has(V)||Ie.size===0?Ie.set(V,oe):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(Ie.keys())[0]}.`)},get:(ve,V)=>n.has(ve)&&n.get(ve).get(V)||null,remove(ve,V){if(!n.has(ve))return;const oe=n.get(ve);oe.delete(V),oe.size===0&&n.delete(ve)}},r="transitionend",a=ve=>(ve&&window.CSS&&window.CSS.escape&&(ve=ve.replace(/#([^\s"#']+)/g,(V,oe)=>`#${CSS.escape(oe)}`)),ve),l=ve=>ve==null?`${ve}`:Object.prototype.toString.call(ve).match(/\s([a-z]+)/i)[1].toLowerCase(),h=ve=>{ve.dispatchEvent(new Event(r))},s=ve=>!(!ve||typeof ve!="object")&&(ve.jquery!==void 0&&(ve=ve[0]),ve.nodeType!==void 0),p=ve=>s(ve)?ve.jquery?ve[0]:ve:typeof ve=="string"&&ve.length>0?document.querySelector(a(ve)):null,_=ve=>{if(!s(ve)||ve.getClientRects().length===0)return!1;const V=getComputedStyle(ve).getPropertyValue("visibility")==="visible",oe=ve.closest("details:not([open])");if(!oe)return V;if(oe!==ve){const Ie=ve.closest("summary");if(Ie&&Ie.parentNode!==oe||Ie===null)return!1}return V},x=ve=>!ve||ve.nodeType!==Node.ELEMENT_NODE||!!ve.classList.contains("disabled")||(ve.disabled!==void 0?ve.disabled:ve.hasAttribute("disabled")&&ve.getAttribute("disabled")!=="false"),T=ve=>{if(!document.documentElement.attachShadow)return null;if(typeof ve.getRootNode=="function"){const V=ve.getRootNode();return V instanceof ShadowRoot?V:null}return ve instanceof ShadowRoot?ve:ve.parentNode?T(ve.parentNode):null},k=()=>{},P=ve=>{ve.offsetHeight},M=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,R=[],F=()=>document.documentElement.dir==="rtl",B=ve=>{var V;V=()=>{const oe=M();if(oe){const Ie=ve.NAME,v=oe.fn[Ie];oe.fn[Ie]=ve.jQueryInterface,oe.fn[Ie].Constructor=ve,oe.fn[Ie].noConflict=()=>(oe.fn[Ie]=v,ve.jQueryInterface)}},document.readyState==="loading"?(R.length||document.addEventListener("DOMContentLoaded",()=>{for(const oe of R)oe()}),R.push(V)):V()},H=(ve,V=[],oe=ve)=>typeof ve=="function"?ve.call(...V):oe,G=(ve,V,oe=!0)=>{if(!oe)return void H(ve);const Ie=(m=>{if(!m)return 0;let{transitionDuration:y,transitionDelay:S}=window.getComputedStyle(m);const C=Number.parseFloat(y),L=Number.parseFloat(S);return C||L?(y=y.split(",")[0],S=S.split(",")[0],1e3*(Number.parseFloat(y)+Number.parseFloat(S))):0})(V)+5;let v=!1;const u=({target:m})=>{m===V&&(v=!0,V.removeEventListener(r,u),H(ve))};V.addEventListener(r,u),setTimeout(()=>{v||h(V)},Ie)},ee=(ve,V,oe,Ie)=>{const v=ve.length;let u=ve.indexOf(V);return u===-1?!oe&&Ie?ve[v-1]:ve[0]:(u+=oe?1:-1,Ie&&(u=(u+v)%v),ve[Math.max(0,Math.min(u,v-1))])},ie=/[^.]*(?=\..*)\.|.*/,J=/\..*/,$=/::\d+$/,W={};let X=1;const re={mouseenter:"mouseover",mouseleave:"mouseout"},Y=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function Z(ve,V){return V&&`${V}::${X++}`||ve.uidEvent||X++}function ge(ve){const V=Z(ve);return ve.uidEvent=V,W[V]=W[V]||{},W[V]}function be(ve,V,oe=null){return Object.values(ve).find(Ie=>Ie.callable===V&&Ie.delegationSelector===oe)}function Be(ve,V,oe){const Ie=typeof V=="string",v=Ie?oe:V||oe;let u=Ze(ve);return Y.has(u)||(u=ve),[Ie,v,u]}function nt(ve,V,oe,Ie,v){if(typeof V!="string"||!ve)return;let[u,m,y]=Be(V,oe,Ie);V in re&&(m=(K=>function(le){if(!le.relatedTarget||le.relatedTarget!==le.delegateTarget&&!le.delegateTarget.contains(le.relatedTarget))return K.call(this,le)})(m));const S=ge(ve),C=S[y]||(S[y]={}),L=be(C,m,u?oe:null);if(L)return void(L.oneOff=L.oneOff&&v);const O=Z(m,V.replace(ie,"")),U=u?(function(q,K,le){return function me(xe){const Se=q.querySelectorAll(K);for(let{target:we}=xe;we&&we!==this;we=we.parentNode)for(const Ce of Se)if(Ce===we)return Je(xe,{delegateTarget:we}),me.oneOff&&Ee.off(q,xe.type,K,le),le.apply(we,[xe])}})(ve,oe,m):(function(q,K){return function le(me){return Je(me,{delegateTarget:q}),le.oneOff&&Ee.off(q,me.type,K),K.apply(q,[me])}})(ve,m);U.delegationSelector=u?oe:null,U.callable=m,U.oneOff=v,U.uidEvent=O,C[O]=U,ve.addEventListener(y,U,u)}function We(ve,V,oe,Ie,v){const u=be(V[oe],Ie,v);u&&(ve.removeEventListener(oe,u,!!v),delete V[oe][u.uidEvent])}function Le(ve,V,oe,Ie){const v=V[oe]||{};for(const[u,m]of Object.entries(v))u.includes(Ie)&&We(ve,V,oe,m.callable,m.delegationSelector)}function Ze(ve){return ve=ve.replace(J,""),re[ve]||ve}const Ee={on(ve,V,oe,Ie){nt(ve,V,oe,Ie,!1)},one(ve,V,oe,Ie){nt(ve,V,oe,Ie,!0)},off(ve,V,oe,Ie){if(typeof V!="string"||!ve)return;const[v,u,m]=Be(V,oe,Ie),y=m!==V,S=ge(ve),C=S[m]||{},L=V.startsWith(".");if(u===void 0){if(L)for(const O of Object.keys(S))Le(ve,S,O,V.slice(1));for(const[O,U]of Object.entries(C)){const q=O.replace($,"");y&&!V.includes(q)||We(ve,S,m,U.callable,U.delegationSelector)}}else{if(!Object.keys(C).length)return;We(ve,S,m,u,v?oe:null)}},trigger(ve,V,oe){if(typeof V!="string"||!ve)return null;const Ie=M();let v=null,u=!0,m=!0,y=!1;V!==Ze(V)&&Ie&&(v=Ie.Event(V,oe),Ie(ve).trigger(v),u=!v.isPropagationStopped(),m=!v.isImmediatePropagationStopped(),y=v.isDefaultPrevented());const S=Je(new Event(V,{bubbles:u,cancelable:!0}),oe);return y&&S.preventDefault(),m&&ve.dispatchEvent(S),S.defaultPrevented&&v&&v.preventDefault(),S}};function Je(ve,V={}){for(const[oe,Ie]of Object.entries(V))try{ve[oe]=Ie}catch{Object.defineProperty(ve,oe,{configurable:!0,get:()=>Ie})}return ve}function it(ve){if(ve==="true")return!0;if(ve==="false")return!1;if(ve===Number(ve).toString())return Number(ve);if(ve===""||ve==="null")return null;if(typeof ve!="string")return ve;try{return JSON.parse(decodeURIComponent(ve))}catch{return ve}}function vt(ve){return ve.replace(/[A-Z]/g,V=>`-${V.toLowerCase()}`)}const mt={setDataAttribute(ve,V,oe){ve.setAttribute(`data-bs-${vt(V)}`,oe)},removeDataAttribute(ve,V){ve.removeAttribute(`data-bs-${vt(V)}`)},getDataAttributes(ve){if(!ve)return{};const V={},oe=Object.keys(ve.dataset).filter(Ie=>Ie.startsWith("bs")&&!Ie.startsWith("bsConfig"));for(const Ie of oe){let v=Ie.replace(/^bs/,"");v=v.charAt(0).toLowerCase()+v.slice(1),V[v]=it(ve.dataset[Ie])}return V},getDataAttribute:(ve,V)=>it(ve.getAttribute(`data-bs-${vt(V)}`))};class ot{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(V){return V=this._mergeConfigObj(V),V=this._configAfterMerge(V),this._typeCheckConfig(V),V}_configAfterMerge(V){return V}_mergeConfigObj(V,oe){const Ie=s(oe)?mt.getDataAttribute(oe,"config"):{};return{...this.constructor.Default,...typeof Ie=="object"?Ie:{},...s(oe)?mt.getDataAttributes(oe):{},...typeof V=="object"?V:{}}}_typeCheckConfig(V,oe=this.constructor.DefaultType){for(const[Ie,v]of Object.entries(oe)){const u=V[Ie],m=s(u)?"element":l(u);if(!new RegExp(v).test(m))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${Ie}" provided type "${m}" but expected type "${v}".`)}}}class Ye extends ot{constructor(V,oe){super(),(V=p(V))&&(this._element=V,this._config=this._getConfig(oe),i.set(this._element,this.constructor.DATA_KEY,this))}dispose(){i.remove(this._element,this.constructor.DATA_KEY),Ee.off(this._element,this.constructor.EVENT_KEY);for(const V of Object.getOwnPropertyNames(this))this[V]=null}_queueCallback(V,oe,Ie=!0){G(V,oe,Ie)}_getConfig(V){return V=this._mergeConfigObj(V,this._element),V=this._configAfterMerge(V),this._typeCheckConfig(V),V}static getInstance(V){return i.get(p(V),this.DATA_KEY)}static getOrCreateInstance(V,oe={}){return this.getInstance(V)||new this(V,typeof oe=="object"?oe:null)}static get VERSION(){return"5.3.8"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(V){return`${V}${this.EVENT_KEY}`}}const ut=ve=>{let V=ve.getAttribute("data-bs-target");if(!V||V==="#"){let oe=ve.getAttribute("href");if(!oe||!oe.includes("#")&&!oe.startsWith("."))return null;oe.includes("#")&&!oe.startsWith("#")&&(oe=`#${oe.split("#")[1]}`),V=oe&&oe!=="#"?oe.trim():null}return V?V.split(",").map(oe=>a(oe)).join(","):null},Ke={find:(ve,V=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(V,ve)),findOne:(ve,V=document.documentElement)=>Element.prototype.querySelector.call(V,ve),children:(ve,V)=>[].concat(...ve.children).filter(oe=>oe.matches(V)),parents(ve,V){const oe=[];let Ie=ve.parentNode.closest(V);for(;Ie;)oe.push(Ie),Ie=Ie.parentNode.closest(V);return oe},prev(ve,V){let oe=ve.previousElementSibling;for(;oe;){if(oe.matches(V))return[oe];oe=oe.previousElementSibling}return[]},next(ve,V){let oe=ve.nextElementSibling;for(;oe;){if(oe.matches(V))return[oe];oe=oe.nextElementSibling}return[]},focusableChildren(ve){const V=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(oe=>`${oe}:not([tabindex^="-"])`).join(",");return this.find(V,ve).filter(oe=>!x(oe)&&_(oe))},getSelectorFromElement(ve){const V=ut(ve);return V&&Ke.findOne(V)?V:null},getElementFromSelector(ve){const V=ut(ve);return V?Ke.findOne(V):null},getMultipleElementsFromSelector(ve){const V=ut(ve);return V?Ke.find(V):[]}},jt=(ve,V="hide")=>{const oe=`click.dismiss${ve.EVENT_KEY}`,Ie=ve.NAME;Ee.on(document,oe,`[data-bs-dismiss="${Ie}"]`,function(v){if(["A","AREA"].includes(this.tagName)&&v.preventDefault(),x(this))return;const u=Ke.getElementFromSelector(this)||this.closest(`.${Ie}`);ve.getOrCreateInstance(u)[V]()})},xn=".bs.alert",ke=`close${xn}`,Ae=`closed${xn}`;class he extends Ye{static get NAME(){return"alert"}close(){if(Ee.trigger(this._element,ke).defaultPrevented)return;this._element.classList.remove("show");const V=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,V)}_destroyElement(){this._element.remove(),Ee.trigger(this._element,Ae),this.dispose()}static jQueryInterface(V){return this.each(function(){const oe=he.getOrCreateInstance(this);if(typeof V=="string"){if(oe[V]===void 0||V.startsWith("_")||V==="constructor")throw new TypeError(`No method named "${V}"`);oe[V](this)}})}}jt(he,"close"),B(he);const et='[data-bs-toggle="button"]';class dt extends Ye{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(V){return this.each(function(){const oe=dt.getOrCreateInstance(this);V==="toggle"&&oe[V]()})}}Ee.on(document,"click.bs.button.data-api",et,ve=>{ve.preventDefault();const V=ve.target.closest(et);dt.getOrCreateInstance(V).toggle()}),B(dt);const Qe=".bs.swipe",Ct=`touchstart${Qe}`,Pt=`touchmove${Qe}`,Bt=`touchend${Qe}`,Ht=`pointerdown${Qe}`,En=`pointerup${Qe}`,Jt={endCallback:null,leftCallback:null,rightCallback:null},Mn={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Ln extends ot{constructor(V,oe){super(),this._element=V,V&&Ln.isSupported()&&(this._config=this._getConfig(oe),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return Jt}static get DefaultType(){return Mn}static get NAME(){return"swipe"}dispose(){Ee.off(this._element,Qe)}_start(V){this._supportPointerEvents?this._eventIsPointerPenTouch(V)&&(this._deltaX=V.clientX):this._deltaX=V.touches[0].clientX}_end(V){this._eventIsPointerPenTouch(V)&&(this._deltaX=V.clientX-this._deltaX),this._handleSwipe(),H(this._config.endCallback)}_move(V){this._deltaX=V.touches&&V.touches.length>1?0:V.touches[0].clientX-this._deltaX}_handleSwipe(){const V=Math.abs(this._deltaX);if(V<=40)return;const oe=V/this._deltaX;this._deltaX=0,oe&&H(oe>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(Ee.on(this._element,Ht,V=>this._start(V)),Ee.on(this._element,En,V=>this._end(V)),this._element.classList.add("pointer-event")):(Ee.on(this._element,Ct,V=>this._start(V)),Ee.on(this._element,Pt,V=>this._move(V)),Ee.on(this._element,Bt,V=>this._end(V)))}_eventIsPointerPenTouch(V){return this._supportPointerEvents&&(V.pointerType==="pen"||V.pointerType==="touch")}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const Ut=".bs.carousel",rn=".data-api",fn="ArrowLeft",Bn="ArrowRight",ki="next",qi="prev",fr="left",ns="right",wo=`slide${Ut}`,ir=`slid${Ut}`,xr=`keydown${Ut}`,$o=`mouseenter${Ut}`,To=`mouseleave${Ut}`,Uc=`dragstart${Ut}`,Fe=`load${Ut}${rn}`,pe=`click${Ut}${rn}`,_e="carousel",Ve="active",He=".active",st=".carousel-item",_t=He+st,pt={[fn]:ns,[Bn]:fr},rt={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},Et={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Qt extends Ye{constructor(V,oe){super(V,oe),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=Ke.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===_e&&this.cycle()}static get Default(){return rt}static get DefaultType(){return Et}static get NAME(){return"carousel"}next(){this._slide(ki)}nextWhenVisible(){!document.hidden&&_(this._element)&&this.next()}prev(){this._slide(qi)}pause(){this._isSliding&&h(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?Ee.one(this._element,ir,()=>this.cycle()):this.cycle())}to(V){const oe=this._getItems();if(V>oe.length-1||V<0)return;if(this._isSliding)return void Ee.one(this._element,ir,()=>this.to(V));const Ie=this._getItemIndex(this._getActive());if(Ie===V)return;const v=V>Ie?ki:qi;this._slide(v,oe[V])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(V){return V.defaultInterval=V.interval,V}_addEventListeners(){this._config.keyboard&&Ee.on(this._element,xr,V=>this._keydown(V)),this._config.pause==="hover"&&(Ee.on(this._element,$o,()=>this.pause()),Ee.on(this._element,To,()=>this._maybeEnableCycle())),this._config.touch&&Ln.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const oe of Ke.find(".carousel-item img",this._element))Ee.on(oe,Uc,Ie=>Ie.preventDefault());const V={leftCallback:()=>this._slide(this._directionToOrder(fr)),rightCallback:()=>this._slide(this._directionToOrder(ns)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}};this._swipeHelper=new Ln(this._element,V)}_keydown(V){if(/input|textarea/i.test(V.target.tagName))return;const oe=pt[V.key];oe&&(V.preventDefault(),this._slide(this._directionToOrder(oe)))}_getItemIndex(V){return this._getItems().indexOf(V)}_setActiveIndicatorElement(V){if(!this._indicatorsElement)return;const oe=Ke.findOne(He,this._indicatorsElement);oe.classList.remove(Ve),oe.removeAttribute("aria-current");const Ie=Ke.findOne(`[data-bs-slide-to="${V}"]`,this._indicatorsElement);Ie&&(Ie.classList.add(Ve),Ie.setAttribute("aria-current","true"))}_updateInterval(){const V=this._activeElement||this._getActive();if(!V)return;const oe=Number.parseInt(V.getAttribute("data-bs-interval"),10);this._config.interval=oe||this._config.defaultInterval}_slide(V,oe=null){if(this._isSliding)return;const Ie=this._getActive(),v=V===ki,u=oe||ee(this._getItems(),Ie,v,this._config.wrap);if(u===Ie)return;const m=this._getItemIndex(u),y=O=>Ee.trigger(this._element,O,{relatedTarget:u,direction:this._orderToDirection(V),from:this._getItemIndex(Ie),to:m});if(y(wo).defaultPrevented||!Ie||!u)return;const S=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(m),this._activeElement=u;const C=v?"carousel-item-start":"carousel-item-end",L=v?"carousel-item-next":"carousel-item-prev";u.classList.add(L),P(u),Ie.classList.add(C),u.classList.add(C),this._queueCallback(()=>{u.classList.remove(C,L),u.classList.add(Ve),Ie.classList.remove(Ve,L,C),this._isSliding=!1,y(ir)},Ie,this._isAnimated()),S&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return Ke.findOne(_t,this._element)}_getItems(){return Ke.find(st,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(V){return F()?V===fr?qi:ki:V===fr?ki:qi}_orderToDirection(V){return F()?V===qi?fr:ns:V===qi?ns:fr}static jQueryInterface(V){return this.each(function(){const oe=Qt.getOrCreateInstance(this,V);if(typeof V!="number"){if(typeof V=="string"){if(oe[V]===void 0||V.startsWith("_")||V==="constructor")throw new TypeError(`No method named "${V}"`);oe[V]()}}else oe.to(V)})}}Ee.on(document,pe,"[data-bs-slide], [data-bs-slide-to]",function(ve){const V=Ke.getElementFromSelector(this);if(!V||!V.classList.contains(_e))return;ve.preventDefault();const oe=Qt.getOrCreateInstance(V),Ie=this.getAttribute("data-bs-slide-to");return Ie?(oe.to(Ie),void oe._maybeEnableCycle()):mt.getDataAttribute(this,"slide")==="next"?(oe.next(),void oe._maybeEnableCycle()):(oe.prev(),void oe._maybeEnableCycle())}),Ee.on(window,Fe,()=>{const ve=Ke.find('[data-bs-ride="carousel"]');for(const V of ve)Qt.getOrCreateInstance(V)}),B(Qt);const cn=".bs.collapse",en=`show${cn}`,Kn=`shown${cn}`,Jn=`hide${cn}`,jn=`hidden${cn}`,oi=`click${cn}.data-api`,Xn="show",Mi="collapse",mr="collapsing",is=`:scope .${Mi} .${Mi}`,wr='[data-bs-toggle="collapse"]',jo={parent:null,toggle:!0},rs={parent:"(null|element)",toggle:"boolean"};class Lr extends Ye{constructor(V,oe){super(V,oe),this._isTransitioning=!1,this._triggerArray=[];const Ie=Ke.find(wr);for(const v of Ie){const u=Ke.getSelectorFromElement(v),m=Ke.find(u).filter(y=>y===this._element);u!==null&&m.length&&this._triggerArray.push(v)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return jo}static get DefaultType(){return rs}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let V=[];if(this._config.parent&&(V=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(v=>v!==this._element).map(v=>Lr.getOrCreateInstance(v,{toggle:!1}))),V.length&&V[0]._isTransitioning||Ee.trigger(this._element,en).defaultPrevented)return;for(const v of V)v.hide();const oe=this._getDimension();this._element.classList.remove(Mi),this._element.classList.add(mr),this._element.style[oe]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const Ie=`scroll${oe[0].toUpperCase()+oe.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(mr),this._element.classList.add(Mi,Xn),this._element.style[oe]="",Ee.trigger(this._element,Kn)},this._element,!0),this._element.style[oe]=`${this._element[Ie]}px`}hide(){if(this._isTransitioning||!this._isShown()||Ee.trigger(this._element,Jn).defaultPrevented)return;const V=this._getDimension();this._element.style[V]=`${this._element.getBoundingClientRect()[V]}px`,P(this._element),this._element.classList.add(mr),this._element.classList.remove(Mi,Xn);for(const oe of this._triggerArray){const Ie=Ke.getElementFromSelector(oe);Ie&&!this._isShown(Ie)&&this._addAriaAndCollapsedClass([oe],!1)}this._isTransitioning=!0,this._element.style[V]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(mr),this._element.classList.add(Mi),Ee.trigger(this._element,jn)},this._element,!0)}_isShown(V=this._element){return V.classList.contains(Xn)}_configAfterMerge(V){return V.toggle=!!V.toggle,V.parent=p(V.parent),V}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const V=this._getFirstLevelChildren(wr);for(const oe of V){const Ie=Ke.getElementFromSelector(oe);Ie&&this._addAriaAndCollapsedClass([oe],this._isShown(Ie))}}_getFirstLevelChildren(V){const oe=Ke.find(is,this._config.parent);return Ke.find(V,this._config.parent).filter(Ie=>!oe.includes(Ie))}_addAriaAndCollapsedClass(V,oe){if(V.length)for(const Ie of V)Ie.classList.toggle("collapsed",!oe),Ie.setAttribute("aria-expanded",oe)}static jQueryInterface(V){const oe={};return typeof V=="string"&&/show|hide/.test(V)&&(oe.toggle=!1),this.each(function(){const Ie=Lr.getOrCreateInstance(this,oe);if(typeof V=="string"){if(Ie[V]===void 0)throw new TypeError(`No method named "${V}"`);Ie[V]()}})}}Ee.on(document,oi,wr,function(ve){(ve.target.tagName==="A"||ve.delegateTarget&&ve.delegateTarget.tagName==="A")&&ve.preventDefault();for(const V of Ke.getMultipleElementsFromSelector(this))Lr.getOrCreateInstance(V,{toggle:!1}).toggle()}),B(Lr);var jr="top",Ts="bottom",Bs="right",qn="left",da="auto",Ss=[jr,Ts,Bs,qn],Wo="start",qa="end",So="clippingParents",Eo="viewport",Ka="popper",hc="reference",Ho=Ss.reduce(function(ve,V){return ve.concat([V+"-"+Wo,V+"-"+qa])},[]),Co=[].concat(Ss,[da]).reduce(function(ve,V){return ve.concat([V,V+"-"+Wo,V+"-"+qa])},[]),Fl="beforeRead",Dt="read",ha="afterRead",zi="beforeMain",Ki="main",zl="afterMain",Fs="beforeWrite",fc="write",Ji="afterWrite",fa=[Fl,Dt,ha,zi,Ki,zl,Fs,fc,Ji];function dn(ve){return ve?(ve.nodeName||"").toLowerCase():null}function Nn(ve){if(ve==null)return window;if(ve.toString()!=="[object Window]"){var V=ve.ownerDocument;return V&&V.defaultView||window}return ve}function Yn(ve){return ve instanceof Nn(ve).Element||ve instanceof Element}function pr(ve){return ve instanceof Nn(ve).HTMLElement||ve instanceof HTMLElement}function oo(ve){return typeof ShadowRoot<"u"&&(ve instanceof Nn(ve).ShadowRoot||ve instanceof ShadowRoot)}const ni={name:"applyStyles",enabled:!0,phase:"write",fn:function(ve){var V=ve.state;Object.keys(V.elements).forEach(function(oe){var Ie=V.styles[oe]||{},v=V.attributes[oe]||{},u=V.elements[oe];pr(u)&&dn(u)&&(Object.assign(u.style,Ie),Object.keys(v).forEach(function(m){var y=v[m];y===!1?u.removeAttribute(m):u.setAttribute(m,y===!0?"":y)}))})},effect:function(ve){var V=ve.state,oe={popper:{position:V.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(V.elements.popper.style,oe.popper),V.styles=oe,V.elements.arrow&&Object.assign(V.elements.arrow.style,oe.arrow),function(){Object.keys(V.elements).forEach(function(Ie){var v=V.elements[Ie],u=V.attributes[Ie]||{},m=Object.keys(V.styles.hasOwnProperty(Ie)?V.styles[Ie]:oe[Ie]).reduce(function(y,S){return y[S]="",y},{});pr(v)&&dn(v)&&(Object.assign(v.style,m),Object.keys(u).forEach(function(y){v.removeAttribute(y)}))})}},requires:["computeStyles"]};function Pr(ve){return ve.split("-")[0]}var Go=Math.max,Ks=Math.min,kr=Math.round;function Ni(){var ve=navigator.userAgentData;return ve!=null&&ve.brands&&Array.isArray(ve.brands)?ve.brands.map(function(V){return V.brand+"/"+V.version}).join(" "):navigator.userAgent}function yu(){return!/^((?!chrome|android).)*safari/i.test(Ni())}function zs(ve,V,oe){V===void 0&&(V=!1),oe===void 0&&(oe=!1);var Ie=ve.getBoundingClientRect(),v=1,u=1;V&&pr(ve)&&(v=ve.offsetWidth>0&&kr(Ie.width)/ve.offsetWidth||1,u=ve.offsetHeight>0&&kr(Ie.height)/ve.offsetHeight||1);var m=(Yn(ve)?Nn(ve):window).visualViewport,y=!yu()&&oe,S=(Ie.left+(y&&m?m.offsetLeft:0))/v,C=(Ie.top+(y&&m?m.offsetTop:0))/u,L=Ie.width/v,O=Ie.height/u;return{width:L,height:O,top:C,right:S+L,bottom:C+O,left:S,x:S,y:C}}function ul(ve){var V=zs(ve),oe=ve.offsetWidth,Ie=ve.offsetHeight;return Math.abs(V.width-oe)<=1&&(oe=V.width),Math.abs(V.height-Ie)<=1&&(Ie=V.height),{x:ve.offsetLeft,y:ve.offsetTop,width:oe,height:Ie}}function Nl(ve,V){var oe=V.getRootNode&&V.getRootNode();if(ve.contains(V))return!0;if(oe&&oo(oe)){var Ie=V;do{if(Ie&&ve.isSameNode(Ie))return!0;Ie=Ie.parentNode||Ie.host}while(Ie)}return!1}function Es(ve){return Nn(ve).getComputedStyle(ve)}function Oh(ve){return["table","td","th"].indexOf(dn(ve))>=0}function ko(ve){return((Yn(ve)?ve.ownerDocument:ve.document)||window.document).documentElement}function dl(ve){return dn(ve)==="html"?ve:ve.assignedSlot||ve.parentNode||(oo(ve)?ve.host:null)||ko(ve)}function Io(ve){return pr(ve)&&Es(ve).position!=="fixed"?ve.offsetParent:null}function ma(ve){for(var V=Nn(ve),oe=Io(ve);oe&&Oh(oe)&&Es(oe).position==="static";)oe=Io(oe);return oe&&(dn(oe)==="html"||dn(oe)==="body"&&Es(oe).position==="static")?V:oe||(function(Ie){var v=/firefox/i.test(Ni());if(/Trident/i.test(Ni())&&pr(Ie)&&Es(Ie).position==="fixed")return null;var u=dl(Ie);for(oo(u)&&(u=u.host);pr(u)&&["html","body"].indexOf(dn(u))<0;){var m=Es(u);if(m.transform!=="none"||m.perspective!=="none"||m.contain==="paint"||["transform","perspective"].indexOf(m.willChange)!==-1||v&&m.willChange==="filter"||v&&m.filter&&m.filter!=="none")return u;u=u.parentNode}return null})(ve)||V}function ss(ve){return["top","bottom"].indexOf(ve)>=0?"x":"y"}function Ui(ve,V,oe){return Go(ve,Ks(V,oe))}function $c(ve){return Object.assign({},{top:0,right:0,bottom:0,left:0},ve)}function hl(ve,V){return V.reduce(function(oe,Ie){return oe[Ie]=ve,oe},{})}const Xr={name:"arrow",enabled:!0,phase:"main",fn:function(ve){var V,oe=ve.state,Ie=ve.name,v=ve.options,u=oe.elements.arrow,m=oe.modifiersData.popperOffsets,y=Pr(oe.placement),S=ss(y),C=[qn,Bs].indexOf(y)>=0?"height":"width";if(u&&m){var L=(function(De,Ue){return $c(typeof(De=typeof De=="function"?De(Object.assign({},Ue.rects,{placement:Ue.placement})):De)!="number"?De:hl(De,Ss))})(v.padding,oe),O=ul(u),U=S==="y"?jr:qn,q=S==="y"?Ts:Bs,K=oe.rects.reference[C]+oe.rects.reference[S]-m[S]-oe.rects.popper[C],le=m[S]-oe.rects.reference[S],me=ma(u),xe=me?S==="y"?me.clientHeight||0:me.clientWidth||0:0,Se=K/2-le/2,we=L[U],Ce=xe-O[C]-L[q],ce=xe/2-O[C]/2+Se,ye=Ui(we,ce,Ce),Pe=S;oe.modifiersData[Ie]=((V={})[Pe]=ye,V.centerOffset=ye-ce,V)}},effect:function(ve){var V=ve.state,oe=ve.options.element,Ie=oe===void 0?"[data-popper-arrow]":oe;Ie!=null&&(typeof Ie!="string"||(Ie=V.elements.popper.querySelector(Ie)))&&Nl(V.elements.popper,Ie)&&(V.elements.arrow=Ie)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function os(ve){return ve.split("-")[1]}var bu={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Qi(ve){var V,oe=ve.popper,Ie=ve.popperRect,v=ve.placement,u=ve.variation,m=ve.offsets,y=ve.position,S=ve.gpuAcceleration,C=ve.adaptive,L=ve.roundOffsets,O=ve.isFixed,U=m.x,q=U===void 0?0:U,K=m.y,le=K===void 0?0:K,me=typeof L=="function"?L({x:q,y:le}):{x:q,y:le};q=me.x,le=me.y;var xe=m.hasOwnProperty("x"),Se=m.hasOwnProperty("y"),we=qn,Ce=jr,ce=window;if(C){var ye=ma(oe),Pe="clientHeight",De="clientWidth";ye===Nn(oe)&&Es(ye=ko(oe)).position!=="static"&&y==="absolute"&&(Pe="scrollHeight",De="scrollWidth"),(v===jr||(v===qn||v===Bs)&&u===qa)&&(Ce=Ts,le-=(O&&ye===ce&&ce.visualViewport?ce.visualViewport.height:ye[Pe])-Ie.height,le*=S?1:-1),v!==qn&&(v!==jr&&v!==Ts||u!==qa)||(we=Bs,q-=(O&&ye===ce&&ce.visualViewport?ce.visualViewport.width:ye[De])-Ie.width,q*=S?1:-1)}var Ue,je=Object.assign({position:y},C&&bu),Ge=L===!0?(function(ct,at){var gt=ct.x,Wt=ct.y,ht=at.devicePixelRatio||1;return{x:kr(gt*ht)/ht||0,y:kr(Wt*ht)/ht||0}})({x:q,y:le},Nn(oe)):{x:q,y:le};return q=Ge.x,le=Ge.y,S?Object.assign({},je,((Ue={})[Ce]=Se?"0":"",Ue[we]=xe?"0":"",Ue.transform=(ce.devicePixelRatio||1)<=1?"translate("+q+"px, "+le+"px)":"translate3d("+q+"px, "+le+"px, 0)",Ue)):Object.assign({},je,((V={})[Ce]=Se?le+"px":"",V[we]=xe?q+"px":"",V.transform="",V))}const gr={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(ve){var V=ve.state,oe=ve.options,Ie=oe.gpuAcceleration,v=Ie===void 0||Ie,u=oe.adaptive,m=u===void 0||u,y=oe.roundOffsets,S=y===void 0||y,C={placement:Pr(V.placement),variation:os(V.placement),popper:V.elements.popper,popperRect:V.rects.popper,gpuAcceleration:v,isFixed:V.options.strategy==="fixed"};V.modifiersData.popperOffsets!=null&&(V.styles.popper=Object.assign({},V.styles.popper,Qi(Object.assign({},C,{offsets:V.modifiersData.popperOffsets,position:V.options.strategy,adaptive:m,roundOffsets:S})))),V.modifiersData.arrow!=null&&(V.styles.arrow=Object.assign({},V.styles.arrow,Qi(Object.assign({},C,{offsets:V.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:S})))),V.attributes.popper=Object.assign({},V.attributes.popper,{"data-popper-placement":V.placement})},data:{}};var fl={passive:!0};const mc={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(ve){var V=ve.state,oe=ve.instance,Ie=ve.options,v=Ie.scroll,u=v===void 0||v,m=Ie.resize,y=m===void 0||m,S=Nn(V.elements.popper),C=[].concat(V.scrollParents.reference,V.scrollParents.popper);return u&&C.forEach(function(L){L.addEventListener("scroll",oe.update,fl)}),y&&S.addEventListener("resize",oe.update,fl),function(){u&&C.forEach(function(L){L.removeEventListener("scroll",oe.update,fl)}),y&&S.removeEventListener("resize",oe.update,fl)}},data:{}};var ml={left:"right",right:"left",bottom:"top",top:"bottom"};function Rr(ve){return ve.replace(/left|right|bottom|top/g,function(V){return ml[V]})}var pc={start:"end",end:"start"};function qo(ve){return ve.replace(/start|end/g,function(V){return pc[V]})}function Ao(ve){var V=Nn(ve);return{scrollLeft:V.pageXOffset,scrollTop:V.pageYOffset}}function pa(ve){return zs(ko(ve)).left+Ao(ve).scrollLeft}function ga(ve){var V=Es(ve),oe=V.overflow,Ie=V.overflowX,v=V.overflowY;return/auto|scroll|overlay|hidden/.test(oe+v+Ie)}function vd(ve){return["html","body","#document"].indexOf(dn(ve))>=0?ve.ownerDocument.body:pr(ve)&&ga(ve)?ve:vd(dl(ve))}function Xa(ve,V){var oe;V===void 0&&(V=[]);var Ie=vd(ve),v=Ie===((oe=ve.ownerDocument)==null?void 0:oe.body),u=Nn(Ie),m=v?[u].concat(u.visualViewport||[],ga(Ie)?Ie:[]):Ie,y=V.concat(m);return v?y:y.concat(Xa(dl(m)))}function Ko(ve){return Object.assign({},ve,{left:ve.x,top:ve.y,right:ve.x+ve.width,bottom:ve.y+ve.height})}function Po(ve,V,oe){return V===Eo?Ko((function(Ie,v){var u=Nn(Ie),m=ko(Ie),y=u.visualViewport,S=m.clientWidth,C=m.clientHeight,L=0,O=0;if(y){S=y.width,C=y.height;var U=yu();(U||!U&&v==="fixed")&&(L=y.offsetLeft,O=y.offsetTop)}return{width:S,height:C,x:L+pa(Ie),y:O}})(ve,oe)):Yn(V)?(function(Ie,v){var u=zs(Ie,!1,v==="fixed");return u.top=u.top+Ie.clientTop,u.left=u.left+Ie.clientLeft,u.bottom=u.top+Ie.clientHeight,u.right=u.left+Ie.clientWidth,u.width=Ie.clientWidth,u.height=Ie.clientHeight,u.x=u.left,u.y=u.top,u})(V,oe):Ko((function(Ie){var v,u=ko(Ie),m=Ao(Ie),y=(v=Ie.ownerDocument)==null?void 0:v.body,S=Go(u.scrollWidth,u.clientWidth,y?y.scrollWidth:0,y?y.clientWidth:0),C=Go(u.scrollHeight,u.clientHeight,y?y.scrollHeight:0,y?y.clientHeight:0),L=-m.scrollLeft+pa(Ie),O=-m.scrollTop;return Es(y||u).direction==="rtl"&&(L+=Go(u.clientWidth,y?y.clientWidth:0)-S),{width:S,height:C,x:L,y:O}})(ko(ve)))}function Ul(ve){var V,oe=ve.reference,Ie=ve.element,v=ve.placement,u=v?Pr(v):null,m=v?os(v):null,y=oe.x+oe.width/2-Ie.width/2,S=oe.y+oe.height/2-Ie.height/2;switch(u){case jr:V={x:y,y:oe.y-Ie.height};break;case Ts:V={x:y,y:oe.y+oe.height};break;case Bs:V={x:oe.x+oe.width,y:S};break;case qn:V={x:oe.x-Ie.width,y:S};break;default:V={x:oe.x,y:oe.y}}var C=u?ss(u):null;if(C!=null){var L=C==="y"?"height":"width";switch(m){case Wo:V[C]=V[C]-(oe[L]/2-Ie[L]/2);break;case qa:V[C]=V[C]+(oe[L]/2-Ie[L]/2)}}return V}function Mo(ve,V){V===void 0&&(V={});var oe=V,Ie=oe.placement,v=Ie===void 0?ve.placement:Ie,u=oe.strategy,m=u===void 0?ve.strategy:u,y=oe.boundary,S=y===void 0?So:y,C=oe.rootBoundary,L=C===void 0?Eo:C,O=oe.elementContext,U=O===void 0?Ka:O,q=oe.altBoundary,K=q!==void 0&&q,le=oe.padding,me=le===void 0?0:le,xe=$c(typeof me!="number"?me:hl(me,Ss)),Se=U===Ka?hc:Ka,we=ve.rects.popper,Ce=ve.elements[K?Se:U],ce=(function(at,gt,Wt,ht){var Lt=gt==="clippingParents"?(function(St){var $t=Xa(dl(St)),Ft=["absolute","fixed"].indexOf(Es(St).position)>=0&&pr(St)?ma(St):St;return Yn(Ft)?$t.filter(function(Kt){return Yn(Kt)&&Nl(Kt,Ft)&&dn(Kt)!=="body"}):[]})(at):[].concat(gt),bt=[].concat(Lt,[Wt]),Gt=bt[0],ft=bt.reduce(function(St,$t){var Ft=Po(at,$t,ht);return St.top=Go(Ft.top,St.top),St.right=Ks(Ft.right,St.right),St.bottom=Ks(Ft.bottom,St.bottom),St.left=Go(Ft.left,St.left),St},Po(at,Gt,ht));return ft.width=ft.right-ft.left,ft.height=ft.bottom-ft.top,ft.x=ft.left,ft.y=ft.top,ft})(Yn(Ce)?Ce:Ce.contextElement||ko(ve.elements.popper),S,L,m),ye=zs(ve.elements.reference),Pe=Ul({reference:ye,element:we,placement:v}),De=Ko(Object.assign({},we,Pe)),Ue=U===Ka?De:ye,je={top:ce.top-Ue.top+xe.top,bottom:Ue.bottom-ce.bottom+xe.bottom,left:ce.left-Ue.left+xe.left,right:Ue.right-ce.right+xe.right},Ge=ve.modifiersData.offset;if(U===Ka&&Ge){var ct=Ge[v];Object.keys(je).forEach(function(at){var gt=[Bs,Ts].indexOf(at)>=0?1:-1,Wt=[jr,Ts].indexOf(at)>=0?"y":"x";je[at]+=ct[Wt]*gt})}return je}function va(ve,V){V===void 0&&(V={});var oe=V,Ie=oe.placement,v=oe.boundary,u=oe.rootBoundary,m=oe.padding,y=oe.flipVariations,S=oe.allowedAutoPlacements,C=S===void 0?Co:S,L=os(Ie),O=L?y?Ho:Ho.filter(function(K){return os(K)===L}):Ss,U=O.filter(function(K){return C.indexOf(K)>=0});U.length===0&&(U=O);var q=U.reduce(function(K,le){return K[le]=Mo(ve,{placement:le,boundary:v,rootBoundary:u,padding:m})[Pr(le)],K},{});return Object.keys(q).sort(function(K,le){return q[K]-q[le]})}const _a={name:"flip",enabled:!0,phase:"main",fn:function(ve){var V=ve.state,oe=ve.options,Ie=ve.name;if(!V.modifiersData[Ie]._skip){for(var v=oe.mainAxis,u=v===void 0||v,m=oe.altAxis,y=m===void 0||m,S=oe.fallbackPlacements,C=oe.padding,L=oe.boundary,O=oe.rootBoundary,U=oe.altBoundary,q=oe.flipVariations,K=q===void 0||q,le=oe.allowedAutoPlacements,me=V.options.placement,xe=Pr(me),Se=S||(xe!==me&&K?(function(St){if(Pr(St)===da)return[];var $t=Rr(St);return[qo(St),$t,qo($t)]})(me):[Rr(me)]),we=[me].concat(Se).reduce(function(St,$t){return St.concat(Pr($t)===da?va(V,{placement:$t,boundary:L,rootBoundary:O,padding:C,flipVariations:K,allowedAutoPlacements:le}):$t)},[]),Ce=V.rects.reference,ce=V.rects.popper,ye=new Map,Pe=!0,De=we[0],Ue=0;Ue<we.length;Ue++){var je=we[Ue],Ge=Pr(je),ct=os(je)===Wo,at=[jr,Ts].indexOf(Ge)>=0,gt=at?"width":"height",Wt=Mo(V,{placement:je,boundary:L,rootBoundary:O,altBoundary:U,padding:C}),ht=at?ct?Bs:qn:ct?Ts:jr;Ce[gt]>ce[gt]&&(ht=Rr(ht));var Lt=Rr(ht),bt=[];if(u&&bt.push(Wt[Ge]<=0),y&&bt.push(Wt[ht]<=0,Wt[Lt]<=0),bt.every(function(St){return St})){De=je,Pe=!1;break}ye.set(je,bt)}if(Pe)for(var Gt=function(St){var $t=we.find(function(Ft){var Kt=ye.get(Ft);if(Kt)return Kt.slice(0,St).every(function(Dn){return Dn})});if($t)return De=$t,"break"},ft=K?3:1;ft>0&&Gt(ft)!=="break";ft--);V.placement!==De&&(V.modifiersData[Ie]._skip=!0,V.placement=De,V.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function Xo(ve,V,oe){return oe===void 0&&(oe={x:0,y:0}),{top:ve.top-V.height-oe.y,right:ve.right-V.width+oe.x,bottom:ve.bottom-V.height+oe.y,left:ve.left-V.width-oe.x}}function gc(ve){return[jr,Bs,Ts,qn].some(function(V){return ve[V]>=0})}const Ya={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(ve){var V=ve.state,oe=ve.name,Ie=V.rects.reference,v=V.rects.popper,u=V.modifiersData.preventOverflow,m=Mo(V,{elementContext:"reference"}),y=Mo(V,{altBoundary:!0}),S=Xo(m,Ie),C=Xo(y,v,u),L=gc(S),O=gc(C);V.modifiersData[oe]={referenceClippingOffsets:S,popperEscapeOffsets:C,isReferenceHidden:L,hasPopperEscaped:O},V.attributes.popper=Object.assign({},V.attributes.popper,{"data-popper-reference-hidden":L,"data-popper-escaped":O})}},pl={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(ve){var V=ve.state,oe=ve.options,Ie=ve.name,v=oe.offset,u=v===void 0?[0,0]:v,m=Co.reduce(function(L,O){return L[O]=(function(U,q,K){var le=Pr(U),me=[qn,jr].indexOf(le)>=0?-1:1,xe=typeof K=="function"?K(Object.assign({},q,{placement:U})):K,Se=xe[0],we=xe[1];return Se=Se||0,we=(we||0)*me,[qn,Bs].indexOf(le)>=0?{x:we,y:Se}:{x:Se,y:we}})(O,V.rects,u),L},{}),y=m[V.placement],S=y.x,C=y.y;V.modifiersData.popperOffsets!=null&&(V.modifiersData.popperOffsets.x+=S,V.modifiersData.popperOffsets.y+=C),V.modifiersData[Ie]=m}},jc={name:"popperOffsets",enabled:!0,phase:"read",fn:function(ve){var V=ve.state,oe=ve.name;V.modifiersData[oe]=Ul({reference:V.rects.reference,element:V.rects.popper,placement:V.placement})},data:{}},gl={name:"preventOverflow",enabled:!0,phase:"main",fn:function(ve){var V=ve.state,oe=ve.options,Ie=ve.name,v=oe.mainAxis,u=v===void 0||v,m=oe.altAxis,y=m!==void 0&&m,S=oe.boundary,C=oe.rootBoundary,L=oe.altBoundary,O=oe.padding,U=oe.tether,q=U===void 0||U,K=oe.tetherOffset,le=K===void 0?0:K,me=Mo(V,{boundary:S,rootBoundary:C,padding:O,altBoundary:L}),xe=Pr(V.placement),Se=os(V.placement),we=!Se,Ce=ss(xe),ce=Ce==="x"?"y":"x",ye=V.modifiersData.popperOffsets,Pe=V.rects.reference,De=V.rects.popper,Ue=typeof le=="function"?le(Object.assign({},V.rects,{placement:V.placement})):le,je=typeof Ue=="number"?{mainAxis:Ue,altAxis:Ue}:Object.assign({mainAxis:0,altAxis:0},Ue),Ge=V.modifiersData.offset?V.modifiersData.offset[V.placement]:null,ct={x:0,y:0};if(ye){if(u){var at,gt=Ce==="y"?jr:qn,Wt=Ce==="y"?Ts:Bs,ht=Ce==="y"?"height":"width",Lt=ye[Ce],bt=Lt+me[gt],Gt=Lt-me[Wt],ft=q?-De[ht]/2:0,St=Se===Wo?Pe[ht]:De[ht],$t=Se===Wo?-De[ht]:-Pe[ht],Ft=V.elements.arrow,Kt=q&&Ft?ul(Ft):{width:0,height:0},Dn=V.modifiersData["arrow#persistent"]?V.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},Gn=Dn[gt],Sn=Dn[Wt],Rn=Ui(0,Pe[ht],Kt[ht]),pi=we?Pe[ht]/2-ft-Rn-Gn-je.mainAxis:St-Rn-Gn-je.mainAxis,mi=we?-Pe[ht]/2+ft+Rn+Sn+je.mainAxis:$t+Rn+Sn+je.mainAxis,In=V.elements.arrow&&ma(V.elements.arrow),Di=In?Ce==="y"?In.clientTop||0:In.clientLeft||0:0,$i=(at=Ge?.[Ce])!=null?at:0,Xi=Lt+mi-$i,ji=Ui(q?Ks(bt,Lt+pi-$i-Di):bt,Lt,q?Go(Gt,Xi):Gt);ye[Ce]=ji,ct[Ce]=ji-Lt}if(y){var Us,Is=Ce==="x"?jr:qn,xa=Ce==="x"?Ts:Bs,Ys=ye[ce],er=ce==="y"?"height":"width",Wi=Ys+me[Is],Ci=Ys-me[xa],Or=[jr,qn].indexOf(xe)!==-1,Zs=(Us=Ge?.[ce])!=null?Us:0,sr=Or?Wi:Ys-Pe[er]-De[er]-Zs+je.altAxis,co=Or?Ys+Pe[er]+De[er]-Zs-je.altAxis:Ci,Fd=q&&Or?(function(Jc,zd,nl){var Gl=Ui(Jc,zd,nl);return Gl>nl?nl:Gl})(sr,Ys,co):Ui(q?sr:Wi,Ys,q?co:Ci);ye[ce]=Fd,ct[ce]=Fd-Ys}V.modifiersData[Ie]=ct}},requiresIfExists:["offset"]};function xu(ve,V,oe){oe===void 0&&(oe=!1);var Ie,v,u=pr(V),m=pr(V)&&(function(O){var U=O.getBoundingClientRect(),q=kr(U.width)/O.offsetWidth||1,K=kr(U.height)/O.offsetHeight||1;return q!==1||K!==1})(V),y=ko(V),S=zs(ve,m,oe),C={scrollLeft:0,scrollTop:0},L={x:0,y:0};return(u||!u&&!oe)&&((dn(V)!=="body"||ga(y))&&(C=(Ie=V)!==Nn(Ie)&&pr(Ie)?{scrollLeft:(v=Ie).scrollLeft,scrollTop:v.scrollTop}:Ao(Ie)),pr(V)?((L=zs(V,!0)).x+=V.clientLeft,L.y+=V.clientTop):y&&(L.x=pa(y))),{x:S.left+C.scrollLeft-L.x,y:S.top+C.scrollTop-L.y,width:S.width,height:S.height}}function wu(ve){var V=new Map,oe=new Set,Ie=[];function v(u){oe.add(u.name),[].concat(u.requires||[],u.requiresIfExists||[]).forEach(function(m){if(!oe.has(m)){var y=V.get(m);y&&v(y)}}),Ie.push(u)}return ve.forEach(function(u){V.set(u.name,u)}),ve.forEach(function(u){oe.has(u.name)||v(u)}),Ie}var ao={placement:"bottom",modifiers:[],strategy:"absolute"};function Ti(){for(var ve=arguments.length,V=new Array(ve),oe=0;oe<ve;oe++)V[oe]=arguments[oe];return!V.some(function(Ie){return!(Ie&&typeof Ie.getBoundingClientRect=="function")})}function Wc(ve){ve===void 0&&(ve={});var V=ve,oe=V.defaultModifiers,Ie=oe===void 0?[]:oe,v=V.defaultOptions,u=v===void 0?ao:v;return function(m,y,S){S===void 0&&(S=u);var C,L,O={placement:"bottom",orderedModifiers:[],options:Object.assign({},ao,u),modifiersData:{},elements:{reference:m,popper:y},attributes:{},styles:{}},U=[],q=!1,K={state:O,setOptions:function(me){var xe=typeof me=="function"?me(O.options):me;le(),O.options=Object.assign({},u,O.options,xe),O.scrollParents={reference:Yn(m)?Xa(m):m.contextElement?Xa(m.contextElement):[],popper:Xa(y)};var Se,we,Ce=(function(ce){var ye=wu(ce);return fa.reduce(function(Pe,De){return Pe.concat(ye.filter(function(Ue){return Ue.phase===De}))},[])})((Se=[].concat(Ie,O.options.modifiers),we=Se.reduce(function(ce,ye){var Pe=ce[ye.name];return ce[ye.name]=Pe?Object.assign({},Pe,ye,{options:Object.assign({},Pe.options,ye.options),data:Object.assign({},Pe.data,ye.data)}):ye,ce},{}),Object.keys(we).map(function(ce){return we[ce]})));return O.orderedModifiers=Ce.filter(function(ce){return ce.enabled}),O.orderedModifiers.forEach(function(ce){var ye=ce.name,Pe=ce.options,De=Pe===void 0?{}:Pe,Ue=ce.effect;if(typeof Ue=="function"){var je=Ue({state:O,name:ye,instance:K,options:De});U.push(je||function(){})}}),K.update()},forceUpdate:function(){if(!q){var me=O.elements,xe=me.reference,Se=me.popper;if(Ti(xe,Se)){O.rects={reference:xu(xe,ma(Se),O.options.strategy==="fixed"),popper:ul(Se)},O.reset=!1,O.placement=O.options.placement,O.orderedModifiers.forEach(function(Ue){return O.modifiersData[Ue.name]=Object.assign({},Ue.data)});for(var we=0;we<O.orderedModifiers.length;we++)if(O.reset!==!0){var Ce=O.orderedModifiers[we],ce=Ce.fn,ye=Ce.options,Pe=ye===void 0?{}:ye,De=Ce.name;typeof ce=="function"&&(O=ce({state:O,options:Pe,name:De,instance:K})||O)}else O.reset=!1,we=-1}}},update:(C=function(){return new Promise(function(me){K.forceUpdate(),me(O)})},function(){return L||(L=new Promise(function(me){Promise.resolve().then(function(){L=void 0,me(C())})})),L}),destroy:function(){le(),q=!0}};if(!Ti(m,y))return K;function le(){U.forEach(function(me){return me()}),U=[]}return K.setOptions(S).then(function(me){!q&&S.onFirstUpdate&&S.onFirstUpdate(me)}),K}}var Tu=Wc(),_d=Wc({defaultModifiers:[mc,jc,gr,ni]}),vl=Wc({defaultModifiers:[mc,jc,gr,ni,pl,_a,gl,Xr,Ya]});const Ns=Object.freeze(Object.defineProperty({__proto__:null,afterMain:zl,afterRead:ha,afterWrite:Ji,applyStyles:ni,arrow:Xr,auto:da,basePlacements:Ss,beforeMain:zi,beforeRead:Fl,beforeWrite:Fs,bottom:Ts,clippingParents:So,computeStyles:gr,createPopper:vl,createPopperBase:Tu,createPopperLite:_d,detectOverflow:Mo,end:qa,eventListeners:mc,flip:_a,hide:Ya,left:qn,main:Ki,modifierPhases:fa,offset:pl,placements:Co,popper:Ka,popperGenerator:Wc,popperOffsets:jc,preventOverflow:gl,read:Dt,reference:hc,right:Bs,start:Wo,top:jr,variationPlacements:Ho,viewport:Eo,write:fc},Symbol.toStringTag,{value:"Module"})),Hc="dropdown",lo=".bs.dropdown",Yo=".data-api",A="ArrowUp",te="ArrowDown",ue=`hide${lo}`,Me=`hidden${lo}`,Tt=`show${lo}`,Mt=`shown${lo}`,yn=`click${lo}${Yo}`,di=`keydown${lo}${Yo}`,Mr=`keyup${lo}${Yo}`,Si="show",rr='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',Qn=`${rr}.${Si}`,Xs=".dropdown-menu",Za=F()?"top-end":"top-start",ya=F()?"top-start":"top-end",Gc=F()?"bottom-end":"bottom-start",Ja=F()?"bottom-start":"bottom-end",bm=F()?"left-start":"right-start",L_=F()?"right-start":"left-start",R_={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},O_={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Zo extends Ye{constructor(V,oe){super(V,oe),this._popper=null,this._parent=this._element.parentNode,this._menu=Ke.next(this._element,Xs)[0]||Ke.prev(this._element,Xs)[0]||Ke.findOne(Xs,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return R_}static get DefaultType(){return O_}static get NAME(){return Hc}toggle(){return this._isShown()?this.hide():this.show()}show(){if(x(this._element)||this._isShown())return;const V={relatedTarget:this._element};if(!Ee.trigger(this._element,Tt,V).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const oe of[].concat(...document.body.children))Ee.on(oe,"mouseover",k);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Si),this._element.classList.add(Si),Ee.trigger(this._element,Mt,V)}}hide(){if(x(this._element)||!this._isShown())return;const V={relatedTarget:this._element};this._completeHide(V)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(V){if(!Ee.trigger(this._element,ue,V).defaultPrevented){if("ontouchstart"in document.documentElement)for(const oe of[].concat(...document.body.children))Ee.off(oe,"mouseover",k);this._popper&&this._popper.destroy(),this._menu.classList.remove(Si),this._element.classList.remove(Si),this._element.setAttribute("aria-expanded","false"),mt.removeDataAttribute(this._menu,"popper"),Ee.trigger(this._element,Me,V)}}_getConfig(V){if(typeof(V=super._getConfig(V)).reference=="object"&&!s(V.reference)&&typeof V.reference.getBoundingClientRect!="function")throw new TypeError(`${Hc.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return V}_createPopper(){if(Ns===void 0)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org/docs/v2/)");let V=this._element;this._config.reference==="parent"?V=this._parent:s(this._config.reference)?V=p(this._config.reference):typeof this._config.reference=="object"&&(V=this._config.reference);const oe=this._getPopperConfig();this._popper=vl(V,this._menu,oe)}_isShown(){return this._menu.classList.contains(Si)}_getPlacement(){const V=this._parent;if(V.classList.contains("dropend"))return bm;if(V.classList.contains("dropstart"))return L_;if(V.classList.contains("dropup-center"))return"top";if(V.classList.contains("dropdown-center"))return"bottom";const oe=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return V.classList.contains("dropup")?oe?ya:Za:oe?Ja:Gc}_detectNavbar(){return this._element.closest(".navbar")!==null}_getOffset(){const{offset:V}=this._config;return typeof V=="string"?V.split(",").map(oe=>Number.parseInt(oe,10)):typeof V=="function"?oe=>V(oe,this._element):V}_getPopperConfig(){const V={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(mt.setDataAttribute(this._menu,"popper","static"),V.modifiers=[{name:"applyStyles",enabled:!1}]),{...V,...H(this._config.popperConfig,[void 0,V])}}_selectMenuItem({key:V,target:oe}){const Ie=Ke.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(v=>_(v));Ie.length&&ee(Ie,oe,V===te,!Ie.includes(oe)).focus()}static jQueryInterface(V){return this.each(function(){const oe=Zo.getOrCreateInstance(this,V);if(typeof V=="string"){if(oe[V]===void 0)throw new TypeError(`No method named "${V}"`);oe[V]()}})}static clearMenus(V){if(V.button===2||V.type==="keyup"&&V.key!=="Tab")return;const oe=Ke.find(Qn);for(const Ie of oe){const v=Zo.getInstance(Ie);if(!v||v._config.autoClose===!1)continue;const u=V.composedPath(),m=u.includes(v._menu);if(u.includes(v._element)||v._config.autoClose==="inside"&&!m||v._config.autoClose==="outside"&&m||v._menu.contains(V.target)&&(V.type==="keyup"&&V.key==="Tab"||/input|select|option|textarea|form/i.test(V.target.tagName)))continue;const y={relatedTarget:v._element};V.type==="click"&&(y.clickEvent=V),v._completeHide(y)}}static dataApiKeydownHandler(V){const oe=/input|textarea/i.test(V.target.tagName),Ie=V.key==="Escape",v=[A,te].includes(V.key);if(!v&&!Ie||oe&&!Ie)return;V.preventDefault();const u=this.matches(rr)?this:Ke.prev(this,rr)[0]||Ke.next(this,rr)[0]||Ke.findOne(rr,V.delegateTarget.parentNode),m=Zo.getOrCreateInstance(u);if(v)return V.stopPropagation(),m.show(),void m._selectMenuItem(V);m._isShown()&&(V.stopPropagation(),m.hide(),u.focus())}}Ee.on(document,di,rr,Zo.dataApiKeydownHandler),Ee.on(document,di,Xs,Zo.dataApiKeydownHandler),Ee.on(document,yn,Zo.clearMenus),Ee.on(document,Mr,Zo.clearMenus),Ee.on(document,yn,rr,function(ve){ve.preventDefault(),Zo.getOrCreateInstance(this).toggle()}),B(Zo);const Vh="backdrop",Bh="show",yd=`mousedown.bs.${Vh}`,pg={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},gg={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class vg extends ot{constructor(V){super(),this._config=this._getConfig(V),this._isAppended=!1,this._element=null}static get Default(){return pg}static get DefaultType(){return gg}static get NAME(){return Vh}show(V){if(!this._config.isVisible)return void H(V);this._append();const oe=this._getElement();this._config.isAnimated&&P(oe),oe.classList.add(Bh),this._emulateAnimation(()=>{H(V)})}hide(V){this._config.isVisible?(this._getElement().classList.remove(Bh),this._emulateAnimation(()=>{this.dispose(),H(V)})):H(V)}dispose(){this._isAppended&&(Ee.off(this._element,yd),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const V=document.createElement("div");V.className=this._config.className,this._config.isAnimated&&V.classList.add("fade"),this._element=V}return this._element}_configAfterMerge(V){return V.rootElement=p(V.rootElement),V}_append(){if(this._isAppended)return;const V=this._getElement();this._config.rootElement.append(V),Ee.on(V,yd,()=>{H(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(V){G(V,this._getElement(),this._config.isAnimated)}}const vc=".bs.focustrap",Su=`focusin${vc}`,xm=`keydown.tab${vc}`,Eu="backward",wm={autofocus:!0,trapElement:null},_l={autofocus:"boolean",trapElement:"element"};class bd extends ot{constructor(V){super(),this._config=this._getConfig(V),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return wm}static get DefaultType(){return _l}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),Ee.off(document,vc),Ee.on(document,Su,V=>this._handleFocusin(V)),Ee.on(document,xm,V=>this._handleKeydown(V)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,Ee.off(document,vc))}_handleFocusin(V){const{trapElement:oe}=this._config;if(V.target===document||V.target===oe||oe.contains(V.target))return;const Ie=Ke.focusableChildren(oe);Ie.length===0?oe.focus():this._lastTabNavDirection===Eu?Ie[Ie.length-1].focus():Ie[0].focus()}_handleKeydown(V){V.key==="Tab"&&(this._lastTabNavDirection=V.shiftKey?Eu:"forward")}}const Fh=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",xd=".sticky-top",wd="padding-right",zh="margin-right";class Tm{constructor(){this._element=document.body}getWidth(){const V=document.documentElement.clientWidth;return Math.abs(window.innerWidth-V)}hide(){const V=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,wd,oe=>oe+V),this._setElementAttributes(Fh,wd,oe=>oe+V),this._setElementAttributes(xd,zh,oe=>oe-V)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,wd),this._resetElementAttributes(Fh,wd),this._resetElementAttributes(xd,zh)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(V,oe,Ie){const v=this.getWidth();this._applyManipulationCallback(V,u=>{if(u!==this._element&&window.innerWidth>u.clientWidth+v)return;this._saveInitialAttribute(u,oe);const m=window.getComputedStyle(u).getPropertyValue(oe);u.style.setProperty(oe,`${Ie(Number.parseFloat(m))}px`)})}_saveInitialAttribute(V,oe){const Ie=V.style.getPropertyValue(oe);Ie&&mt.setDataAttribute(V,oe,Ie)}_resetElementAttributes(V,oe){this._applyManipulationCallback(V,Ie=>{const v=mt.getDataAttribute(Ie,oe);v!==null?(mt.removeDataAttribute(Ie,oe),Ie.style.setProperty(oe,v)):Ie.style.removeProperty(oe)})}_applyManipulationCallback(V,oe){if(s(V))oe(V);else for(const Ie of Ke.find(V,this._element))oe(Ie)}}const Do=".bs.modal",Nh=`hide${Do}`,Td=`hidePrevented${Do}`,Sm=`hidden${Do}`,Uh=`show${Do}`,V_=`shown${Do}`,Em=`resize${Do}`,_g=`click.dismiss${Do}`,Sd=`mousedown.dismiss${Do}`,yg=`keydown.dismiss${Do}`,$h=`click${Do}.data-api`,Cm="modal-open",qc="show",km="modal-static",B_={backdrop:!0,focus:!0,keyboard:!0},F_={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Kc extends Ye{constructor(V,oe){super(V,oe),this._dialog=Ke.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new Tm,this._addEventListeners()}static get Default(){return B_}static get DefaultType(){return F_}static get NAME(){return"modal"}toggle(V){return this._isShown?this.hide():this.show(V)}show(V){this._isShown||this._isTransitioning||Ee.trigger(this._element,Uh,{relatedTarget:V}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Cm),this._adjustDialog(),this._backdrop.show(()=>this._showElement(V)))}hide(){this._isShown&&!this._isTransitioning&&(Ee.trigger(this._element,Nh).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(qc),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated())))}dispose(){Ee.off(window,Do),Ee.off(this._dialog,Do),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new vg({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new bd({trapElement:this._element})}_showElement(V){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const oe=Ke.findOne(".modal-body",this._dialog);oe&&(oe.scrollTop=0),P(this._element),this._element.classList.add(qc),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,Ee.trigger(this._element,V_,{relatedTarget:V})},this._dialog,this._isAnimated())}_addEventListeners(){Ee.on(this._element,yg,V=>{V.key==="Escape"&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())}),Ee.on(window,Em,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),Ee.on(this._element,Sd,V=>{Ee.one(this._element,_g,oe=>{this._element===V.target&&this._element===oe.target&&(this._config.backdrop!=="static"?this._config.backdrop&&this.hide():this._triggerBackdropTransition())})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(Cm),this._resetAdjustments(),this._scrollBar.reset(),Ee.trigger(this._element,Sm)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(Ee.trigger(this._element,Td).defaultPrevented)return;const V=this._element.scrollHeight>document.documentElement.clientHeight,oe=this._element.style.overflowY;oe==="hidden"||this._element.classList.contains(km)||(V||(this._element.style.overflowY="hidden"),this._element.classList.add(km),this._queueCallback(()=>{this._element.classList.remove(km),this._queueCallback(()=>{this._element.style.overflowY=oe},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const V=this._element.scrollHeight>document.documentElement.clientHeight,oe=this._scrollBar.getWidth(),Ie=oe>0;if(Ie&&!V){const v=F()?"paddingLeft":"paddingRight";this._element.style[v]=`${oe}px`}if(!Ie&&V){const v=F()?"paddingRight":"paddingLeft";this._element.style[v]=`${oe}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(V,oe){return this.each(function(){const Ie=Kc.getOrCreateInstance(this,V);if(typeof V=="string"){if(Ie[V]===void 0)throw new TypeError(`No method named "${V}"`);Ie[V](oe)}})}}Ee.on(document,$h,'[data-bs-toggle="modal"]',function(ve){const V=Ke.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&ve.preventDefault(),Ee.one(V,Uh,Ie=>{Ie.defaultPrevented||Ee.one(V,Sm,()=>{_(this)&&this.focus()})});const oe=Ke.findOne(".modal.show");oe&&Kc.getInstance(oe).hide(),Kc.getOrCreateInstance(V).toggle(this)}),jt(Kc),B(Kc);const $l=".bs.offcanvas",Im=".data-api",jh=`load${$l}${Im}`,Xc="show",Am="showing",Pm="hiding",yl=".offcanvas.show",Wh=`show${$l}`,ba=`shown${$l}`,Ed=`hide${$l}`,Mm=`hidePrevented${$l}`,_c=`hidden${$l}`,Cu=`resize${$l}`,Hh=`click${$l}${Im}`,Gh=`keydown.dismiss${$l}`,Ei={backdrop:!0,keyboard:!0,scroll:!1},Cd={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class bl extends Ye{constructor(V,oe){super(V,oe),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Ei}static get DefaultType(){return Cd}static get NAME(){return"offcanvas"}toggle(V){return this._isShown?this.hide():this.show(V)}show(V){this._isShown||Ee.trigger(this._element,Wh,{relatedTarget:V}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||new Tm().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Am),this._queueCallback(()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(Xc),this._element.classList.remove(Am),Ee.trigger(this._element,ba,{relatedTarget:V})},this._element,!0))}hide(){this._isShown&&(Ee.trigger(this._element,Ed).defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Pm),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove(Xc,Pm),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new Tm().reset(),Ee.trigger(this._element,_c)},this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const V=!!this._config.backdrop;return new vg({className:"offcanvas-backdrop",isVisible:V,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:V?()=>{this._config.backdrop!=="static"?this.hide():Ee.trigger(this._element,Mm)}:null})}_initializeFocusTrap(){return new bd({trapElement:this._element})}_addEventListeners(){Ee.on(this._element,Gh,V=>{V.key==="Escape"&&(this._config.keyboard?this.hide():Ee.trigger(this._element,Mm))})}static jQueryInterface(V){return this.each(function(){const oe=bl.getOrCreateInstance(this,V);if(typeof V=="string"){if(oe[V]===void 0||V.startsWith("_")||V==="constructor")throw new TypeError(`No method named "${V}"`);oe[V](this)}})}}Ee.on(document,Hh,'[data-bs-toggle="offcanvas"]',function(ve){const V=Ke.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&ve.preventDefault(),x(this))return;Ee.one(V,_c,()=>{_(this)&&this.focus()});const oe=Ke.findOne(yl);oe&&oe!==V&&bl.getInstance(oe).hide(),bl.getOrCreateInstance(V).toggle(this)}),Ee.on(window,jh,()=>{for(const ve of Ke.find(yl))bl.getOrCreateInstance(ve).show()}),Ee.on(window,Cu,()=>{for(const ve of Ke.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(ve).position!=="fixed"&&bl.getOrCreateInstance(ve).hide()}),jt(bl),B(bl);const kd={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},ku=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),bg=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,qh=(ve,V)=>{const oe=ve.nodeName.toLowerCase();return V.includes(oe)?!ku.has(oe)||!!bg.test(ve.nodeValue):V.filter(Ie=>Ie instanceof RegExp).some(Ie=>Ie.test(oe))},jl={allowList:kd,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},xg={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},Kh={entry:"(string|element|function|null)",selector:"(string|element)"};class Iu extends ot{constructor(V){super(),this._config=this._getConfig(V)}static get Default(){return jl}static get DefaultType(){return xg}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(V=>this._resolvePossibleFunction(V)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(V){return this._checkContent(V),this._config.content={...this._config.content,...V},this}toHtml(){const V=document.createElement("div");V.innerHTML=this._maybeSanitize(this._config.template);for(const[v,u]of Object.entries(this._config.content))this._setContent(V,u,v);const oe=V.children[0],Ie=this._resolvePossibleFunction(this._config.extraClass);return Ie&&oe.classList.add(...Ie.split(" ")),oe}_typeCheckConfig(V){super._typeCheckConfig(V),this._checkContent(V.content)}_checkContent(V){for(const[oe,Ie]of Object.entries(V))super._typeCheckConfig({selector:oe,entry:Ie},Kh)}_setContent(V,oe,Ie){const v=Ke.findOne(Ie,V);v&&((oe=this._resolvePossibleFunction(oe))?s(oe)?this._putElementInTemplate(p(oe),v):this._config.html?v.innerHTML=this._maybeSanitize(oe):v.textContent=oe:v.remove())}_maybeSanitize(V){return this._config.sanitize?(function(oe,Ie,v){if(!oe.length)return oe;if(v&&typeof v=="function")return v(oe);const u=new window.DOMParser().parseFromString(oe,"text/html"),m=[].concat(...u.body.querySelectorAll("*"));for(const y of m){const S=y.nodeName.toLowerCase();if(!Object.keys(Ie).includes(S)){y.remove();continue}const C=[].concat(...y.attributes),L=[].concat(Ie["*"]||[],Ie[S]||[]);for(const O of C)qh(O,L)||y.removeAttribute(O.nodeName)}return u.body.innerHTML})(V,this._config.allowList,this._config.sanitizeFn):V}_resolvePossibleFunction(V){return H(V,[void 0,this])}_putElementInTemplate(V,oe){if(this._config.html)return oe.innerHTML="",void oe.append(V);oe.textContent=V.textContent}}const Au=new Set(["sanitize","allowList","sanitizeFn"]),Id="fade",yc="show",Ad=".tooltip-inner",Pd=".modal",Md="hide.bs.modal",gn="hover",Jo="focus",Xh="click",Dd={AUTO:"auto",TOP:"top",RIGHT:F()?"left":"right",BOTTOM:"bottom",LEFT:F()?"right":"left"},Ld={allowList:kd,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},Cs={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class Qa extends Ye{constructor(V,oe){if(Ns===void 0)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org/docs/v2/)");super(V,oe),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return Ld}static get DefaultType(){return Cs}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),Ee.off(this._element.closest(Pd),Md,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const V=Ee.trigger(this._element,this.constructor.eventName("show")),oe=(T(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(V.defaultPrevented||!oe)return;this._disposePopper();const Ie=this._getTipElement();this._element.setAttribute("aria-describedby",Ie.getAttribute("id"));const{container:v}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(v.append(Ie),Ee.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(Ie),Ie.classList.add(yc),"ontouchstart"in document.documentElement)for(const u of[].concat(...document.body.children))Ee.on(u,"mouseover",k);this._queueCallback(()=>{Ee.trigger(this._element,this.constructor.eventName("shown")),this._isHovered===!1&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(this._isShown()&&!Ee.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(yc),"ontouchstart"in document.documentElement)for(const V of[].concat(...document.body.children))Ee.off(V,"mouseover",k);this._activeTrigger[Xh]=!1,this._activeTrigger[Jo]=!1,this._activeTrigger[gn]=!1,this._isHovered=null,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),Ee.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(V){const oe=this._getTemplateFactory(V).toHtml();if(!oe)return null;oe.classList.remove(Id,yc),oe.classList.add(`bs-${this.constructor.NAME}-auto`);const Ie=(v=>{do v+=Math.floor(1e6*Math.random());while(document.getElementById(v));return v})(this.constructor.NAME).toString();return oe.setAttribute("id",Ie),this._isAnimated()&&oe.classList.add(Id),oe}setContent(V){this._newContent=V,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(V){return this._templateFactory?this._templateFactory.changeContent(V):this._templateFactory=new Iu({...this._config,content:V,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[Ad]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(V){return this.constructor.getOrCreateInstance(V.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(Id)}_isShown(){return this.tip&&this.tip.classList.contains(yc)}_createPopper(V){const oe=H(this._config.placement,[this,V,this._element]),Ie=Dd[oe.toUpperCase()];return vl(this._element,V,this._getPopperConfig(Ie))}_getOffset(){const{offset:V}=this._config;return typeof V=="string"?V.split(",").map(oe=>Number.parseInt(oe,10)):typeof V=="function"?oe=>V(oe,this._element):V}_resolvePossibleFunction(V){return H(V,[this._element,this._element])}_getPopperConfig(V){const oe={placement:V,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:Ie=>{this._getTipElement().setAttribute("data-popper-placement",Ie.state.placement)}}]};return{...oe,...H(this._config.popperConfig,[void 0,oe])}}_setListeners(){const V=this._config.trigger.split(" ");for(const oe of V)if(oe==="click")Ee.on(this._element,this.constructor.eventName("click"),this._config.selector,Ie=>{const v=this._initializeOnDelegatedTarget(Ie);v._activeTrigger[Xh]=!(v._isShown()&&v._activeTrigger[Xh]),v.toggle()});else if(oe!=="manual"){const Ie=oe===gn?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),v=oe===gn?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");Ee.on(this._element,Ie,this._config.selector,u=>{const m=this._initializeOnDelegatedTarget(u);m._activeTrigger[u.type==="focusin"?Jo:gn]=!0,m._enter()}),Ee.on(this._element,v,this._config.selector,u=>{const m=this._initializeOnDelegatedTarget(u);m._activeTrigger[u.type==="focusout"?Jo:gn]=m._element.contains(u.relatedTarget),m._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},Ee.on(this._element.closest(Pd),Md,this._hideModalHandler)}_fixTitle(){const V=this._element.getAttribute("title");V&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",V),this._element.setAttribute("data-bs-original-title",V),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(V,oe){clearTimeout(this._timeout),this._timeout=setTimeout(V,oe)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(V){const oe=mt.getDataAttributes(this._element);for(const Ie of Object.keys(oe))Au.has(Ie)&&delete oe[Ie];return V={...oe,...typeof V=="object"&&V?V:{}},V=this._mergeConfigObj(V),V=this._configAfterMerge(V),this._typeCheckConfig(V),V}_configAfterMerge(V){return V.container=V.container===!1?document.body:p(V.container),typeof V.delay=="number"&&(V.delay={show:V.delay,hide:V.delay}),typeof V.title=="number"&&(V.title=V.title.toString()),typeof V.content=="number"&&(V.content=V.content.toString()),V}_getDelegateConfig(){const V={};for(const[oe,Ie]of Object.entries(this._config))this.constructor.Default[oe]!==Ie&&(V[oe]=Ie);return V.selector=!1,V.trigger="manual",V}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(V){return this.each(function(){const oe=Qa.getOrCreateInstance(this,V);if(typeof V=="string"){if(oe[V]===void 0)throw new TypeError(`No method named "${V}"`);oe[V]()}})}}B(Qa);const Yh=".popover-header",Dm=".popover-body",Zh={...Qa.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},wg={...Qa.DefaultType,content:"(null|string|element|function)"};class Yc extends Qa{static get Default(){return Zh}static get DefaultType(){return wg}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[Yh]:this._getTitle(),[Dm]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(V){return this.each(function(){const oe=Yc.getOrCreateInstance(this,V);if(typeof V=="string"){if(oe[V]===void 0)throw new TypeError(`No method named "${V}"`);oe[V]()}})}}B(Yc);const bc=".bs.scrollspy",Lm=`activate${bc}`,Tg=`click${bc}`,Sg=`load${bc}.data-api`,el="active",Rd="[href]",Jh=".nav-link",Rm=`${Jh}, .nav-item > ${Jh}, .list-group-item`,Qh={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},Od={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class Wl extends Ye{constructor(V,oe){super(V,oe),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return Qh}static get DefaultType(){return Od}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const V of this._observableSections.values())this._observer.observe(V)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(V){return V.target=p(V.target)||document.body,V.rootMargin=V.offset?`${V.offset}px 0px -30%`:V.rootMargin,typeof V.threshold=="string"&&(V.threshold=V.threshold.split(",").map(oe=>Number.parseFloat(oe))),V}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(Ee.off(this._config.target,Tg),Ee.on(this._config.target,Tg,Rd,V=>{const oe=this._observableSections.get(V.target.hash);if(oe){V.preventDefault();const Ie=this._rootElement||window,v=oe.offsetTop-this._element.offsetTop;if(Ie.scrollTo)return void Ie.scrollTo({top:v,behavior:"smooth"});Ie.scrollTop=v}}))}_getNewObserver(){const V={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(oe=>this._observerCallback(oe),V)}_observerCallback(V){const oe=m=>this._targetLinks.get(`#${m.target.id}`),Ie=m=>{this._previousScrollData.visibleEntryTop=m.target.offsetTop,this._process(oe(m))},v=(this._rootElement||document.documentElement).scrollTop,u=v>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=v;for(const m of V){if(!m.isIntersecting){this._activeTarget=null,this._clearActiveClass(oe(m));continue}const y=m.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(u&&y){if(Ie(m),!v)return}else u||y||Ie(m)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const V=Ke.find(Rd,this._config.target);for(const oe of V){if(!oe.hash||x(oe))continue;const Ie=Ke.findOne(decodeURI(oe.hash),this._element);_(Ie)&&(this._targetLinks.set(decodeURI(oe.hash),oe),this._observableSections.set(oe.hash,Ie))}}_process(V){this._activeTarget!==V&&(this._clearActiveClass(this._config.target),this._activeTarget=V,V.classList.add(el),this._activateParents(V),Ee.trigger(this._element,Lm,{relatedTarget:V}))}_activateParents(V){if(V.classList.contains("dropdown-item"))Ke.findOne(".dropdown-toggle",V.closest(".dropdown")).classList.add(el);else for(const oe of Ke.parents(V,".nav, .list-group"))for(const Ie of Ke.prev(oe,Rm))Ie.classList.add(el)}_clearActiveClass(V){V.classList.remove(el);const oe=Ke.find(`${Rd}.${el}`,V);for(const Ie of oe)Ie.classList.remove(el)}static jQueryInterface(V){return this.each(function(){const oe=Wl.getOrCreateInstance(this,V);if(typeof V=="string"){if(oe[V]===void 0||V.startsWith("_")||V==="constructor")throw new TypeError(`No method named "${V}"`);oe[V]()}})}}Ee.on(window,Sg,()=>{for(const ve of Ke.find('[data-bs-spy="scroll"]'))Wl.getOrCreateInstance(ve)}),B(Wl);const Hl=".bs.tab",Eg=`hide${Hl}`,Om=`hidden${Hl}`,Cg=`show${Hl}`,xc=`shown${Hl}`,kg=`click${Hl}`,Ig=`keydown${Hl}`,z_=`load${Hl}`,Ag="ArrowLeft",ef="ArrowRight",Pg="ArrowUp",Vm="ArrowDown",ks="Home",Mg="End",wc="active",Dg="fade",Bm="show",Qo=".dropdown-toggle",tf=`:not(${Qo})`,Lg='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',ea=`.nav-link${tf}, .list-group-item${tf}, [role="tab"]${tf}, ${Lg}`,xl=`.${wc}[data-bs-toggle="tab"], .${wc}[data-bs-toggle="pill"], .${wc}[data-bs-toggle="list"]`;class ta extends Ye{constructor(V){super(V),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),Ee.on(this._element,Ig,oe=>this._keydown(oe)))}static get NAME(){return"tab"}show(){const V=this._element;if(this._elemIsActive(V))return;const oe=this._getActiveElem(),Ie=oe?Ee.trigger(oe,Eg,{relatedTarget:V}):null;Ee.trigger(V,Cg,{relatedTarget:oe}).defaultPrevented||Ie&&Ie.defaultPrevented||(this._deactivate(oe,V),this._activate(V,oe))}_activate(V,oe){V&&(V.classList.add(wc),this._activate(Ke.getElementFromSelector(V)),this._queueCallback(()=>{V.getAttribute("role")==="tab"?(V.removeAttribute("tabindex"),V.setAttribute("aria-selected",!0),this._toggleDropDown(V,!0),Ee.trigger(V,xc,{relatedTarget:oe})):V.classList.add(Bm)},V,V.classList.contains(Dg)))}_deactivate(V,oe){V&&(V.classList.remove(wc),V.blur(),this._deactivate(Ke.getElementFromSelector(V)),this._queueCallback(()=>{V.getAttribute("role")==="tab"?(V.setAttribute("aria-selected",!1),V.setAttribute("tabindex","-1"),this._toggleDropDown(V,!1),Ee.trigger(V,Om,{relatedTarget:oe})):V.classList.remove(Bm)},V,V.classList.contains(Dg)))}_keydown(V){if(![Ag,ef,Pg,Vm,ks,Mg].includes(V.key))return;V.stopPropagation(),V.preventDefault();const oe=this._getChildren().filter(v=>!x(v));let Ie;if([ks,Mg].includes(V.key))Ie=oe[V.key===ks?0:oe.length-1];else{const v=[ef,Vm].includes(V.key);Ie=ee(oe,V.target,v,!0)}Ie&&(Ie.focus({preventScroll:!0}),ta.getOrCreateInstance(Ie).show())}_getChildren(){return Ke.find(ea,this._parent)}_getActiveElem(){return this._getChildren().find(V=>this._elemIsActive(V))||null}_setInitialAttributes(V,oe){this._setAttributeIfNotExists(V,"role","tablist");for(const Ie of oe)this._setInitialAttributesOnChild(Ie)}_setInitialAttributesOnChild(V){V=this._getInnerElement(V);const oe=this._elemIsActive(V),Ie=this._getOuterElement(V);V.setAttribute("aria-selected",oe),Ie!==V&&this._setAttributeIfNotExists(Ie,"role","presentation"),oe||V.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(V,"role","tab"),this._setInitialAttributesOnTargetPanel(V)}_setInitialAttributesOnTargetPanel(V){const oe=Ke.getElementFromSelector(V);oe&&(this._setAttributeIfNotExists(oe,"role","tabpanel"),V.id&&this._setAttributeIfNotExists(oe,"aria-labelledby",`${V.id}`))}_toggleDropDown(V,oe){const Ie=this._getOuterElement(V);if(!Ie.classList.contains("dropdown"))return;const v=(u,m)=>{const y=Ke.findOne(u,Ie);y&&y.classList.toggle(m,oe)};v(Qo,wc),v(".dropdown-menu",Bm),Ie.setAttribute("aria-expanded",oe)}_setAttributeIfNotExists(V,oe,Ie){V.hasAttribute(oe)||V.setAttribute(oe,Ie)}_elemIsActive(V){return V.classList.contains(wc)}_getInnerElement(V){return V.matches(ea)?V:Ke.findOne(ea,V)}_getOuterElement(V){return V.closest(".nav-item, .list-group-item")||V}static jQueryInterface(V){return this.each(function(){const oe=ta.getOrCreateInstance(this);if(typeof V=="string"){if(oe[V]===void 0||V.startsWith("_")||V==="constructor")throw new TypeError(`No method named "${V}"`);oe[V]()}})}}Ee.on(document,kg,Lg,function(ve){["A","AREA"].includes(this.tagName)&&ve.preventDefault(),x(this)||ta.getOrCreateInstance(this).show()}),Ee.on(window,z_,()=>{for(const ve of Ke.find(xl))ta.getOrCreateInstance(ve)}),B(ta);const tl=".bs.toast",Tn=`mouseover${tl}`,Fm=`mouseout${tl}`,zm=`focusin${tl}`,Pu=`focusout${tl}`,Zc=`hide${tl}`,_n=`hidden${tl}`,Nm=`show${tl}`,N_=`shown${tl}`,Um="hide",Mu="show",Vd="showing",Rg={animation:"boolean",autohide:"boolean",delay:"number"},U_={animation:!0,autohide:!0,delay:5e3};class Bd extends Ye{constructor(V,oe){super(V,oe),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return U_}static get DefaultType(){return Rg}static get NAME(){return"toast"}show(){Ee.trigger(this._element,Nm).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove(Um),P(this._element),this._element.classList.add(Mu,Vd),this._queueCallback(()=>{this._element.classList.remove(Vd),Ee.trigger(this._element,N_),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&(Ee.trigger(this._element,Zc).defaultPrevented||(this._element.classList.add(Vd),this._queueCallback(()=>{this._element.classList.add(Um),this._element.classList.remove(Vd,Mu),Ee.trigger(this._element,_n)},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Mu),super.dispose()}isShown(){return this._element.classList.contains(Mu)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(V,oe){switch(V.type){case"mouseover":case"mouseout":this._hasMouseInteraction=oe;break;case"focusin":case"focusout":this._hasKeyboardInteraction=oe}if(oe)return void this._clearTimeout();const Ie=V.relatedTarget;this._element===Ie||this._element.contains(Ie)||this._maybeScheduleHide()}_setListeners(){Ee.on(this._element,Tn,V=>this._onInteraction(V,!0)),Ee.on(this._element,Fm,V=>this._onInteraction(V,!1)),Ee.on(this._element,zm,V=>this._onInteraction(V,!0)),Ee.on(this._element,Pu,V=>this._onInteraction(V,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(V){return this.each(function(){const oe=Bd.getOrCreateInstance(this,V);if(typeof V=="string"){if(oe[V]===void 0)throw new TypeError(`No method named "${V}"`);oe[V](this)}})}}return jt(Bd),B(Bd),{Alert:he,Button:dt,Carousel:Qt,Collapse:Lr,Dropdown:Zo,Modal:Kc,Offcanvas:bl,Popover:Yc,ScrollSpy:Wl,Tab:ta,Toast:Bd,Tooltip:Qa}})})(Vw)),Vw.exports}dpe();const hpe=lt({...wn(),...dr(K6(),["fullHeight"]),...Ai()},"VApp"),fpe=At()({name:"VApp",props:hpe(),setup(e,t){let{slots:n}=t;const i=Zi(e),{layoutClasses:r,getLayoutItem:a,items:l,layoutRef:h}=Y6({...e,fullHeight:!0}),{rtlClasses:s}=Gs();return Vt(()=>z("div",{ref:h,class:xt(["v-application",i.themeClasses.value,r.value,s.value,e.class]),style:Yt([e.style])},[z("div",{class:"v-application__wrap"},[n.default?.()])])),{getLayoutItem:a,items:l,theme:i}}}),Tj=lt({text:String,...wn(),...ti()},"VToolbarTitle"),sM=At()({name:"VToolbarTitle",props:Tj(),setup(e,t){let{slots:n}=t;return Vt(()=>{const i=!!(n.default||n.text||e.text);return se(e.tag,{class:xt(["v-toolbar-title",e.class]),style:Yt(e.style)},{default:()=>[i&&z("div",{class:"v-toolbar-title__placeholder"},[n.text?n.text():e.text,n.default?.()])]})}),{}}}),mpe=[null,"prominent","default","comfortable","compact"],Sj=lt({absolute:Boolean,collapse:Boolean,color:String,density:{type:String,default:"default",validator:e=>mpe.includes(e)},extended:{type:Boolean,default:null},extensionHeight:{type:[Number,String],default:48},flat:Boolean,floating:Boolean,height:{type:[Number,String],default:64},image:String,title:String,...cl(),...wn(),...qs(),...$r(),...ti({tag:"header"}),...Ai()},"VToolbar"),cI=At()({name:"VToolbar",props:Sj(),setup(e,t){let{slots:n}=t;const{backgroundColorClasses:i,backgroundColorStyles:r}=nr(()=>e.color),{borderClasses:a}=Bl(e),{elevationClasses:l}=bo(e),{roundedClasses:h}=ts(e),{themeClasses:s}=Zi(e),{rtlClasses:p}=Gs(),_=Zt(e.extended===null?!!n.extension?.():e.extended),x=fe(()=>parseInt(Number(e.height)+(e.density==="prominent"?Number(e.height):0)-(e.density==="comfortable"?8:0)-(e.density==="compact"?16:0),10)),T=fe(()=>_.value?parseInt(Number(e.extensionHeight)+(e.density==="prominent"?Number(e.extensionHeight):0)-(e.density==="comfortable"?4:0)-(e.density==="compact"?8:0),10):0);return es({VBtn:{variant:"text"}}),Vt(()=>{const k=!!(e.title||n.title),P=!!(n.image||e.image),M=n.extension?.();return _.value=e.extended===null?!!M:e.extended,se(e.tag,{class:xt(["v-toolbar",{"v-toolbar--absolute":e.absolute,"v-toolbar--collapse":e.collapse,"v-toolbar--flat":e.flat,"v-toolbar--floating":e.floating,[`v-toolbar--density-${e.density}`]:!0},i.value,a.value,l.value,h.value,s.value,p.value,e.class]),style:Yt([r.value,e.style])},{default:()=>[P&&z("div",{key:"image",class:"v-toolbar__image"},[n.image?se(ui,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},n.image):se(wh,{key:"image-img",cover:!0,src:e.image},null)]),se(ui,{defaults:{VTabs:{height:pn(x.value)}}},{default:()=>[z("div",{class:"v-toolbar__content",style:{height:pn(x.value)}},[n.prepend&&z("div",{class:"v-toolbar__prepend"},[n.prepend?.()]),k&&se(sM,{key:"title",text:e.title},{text:n.title}),n.default?.(),n.append&&z("div",{class:"v-toolbar__append"},[n.append?.()])])]}),se(ui,{defaults:{VTabs:{height:pn(T.value)}}},{default:()=>[se(z0,null,{default:()=>[_.value&&z("div",{class:"v-toolbar__extension",style:{height:pn(T.value)}},[M])]})]})]})}),{contentHeight:x,extensionHeight:T}}}),ppe=lt({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function gpe(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:n}=t;let i=0,r=0;const a=tt(null),l=Zt(0),h=Zt(0),s=Zt(0),p=Zt(!1),_=Zt(!1),x=fe(()=>Number(e.scrollThreshold)),T=fe(()=>Er((x.value-l.value)/x.value||0)),k=()=>{const P=a.value;if(!P||n&&!n.value)return;i=l.value,l.value="window"in P?P.pageYOffset:P.scrollTop;const M=P instanceof Window?document.documentElement.scrollHeight:P.scrollHeight;if(r!==M){r=M;return}_.value=l.value<i,s.value=Math.abs(l.value-x.value)};return qt(_,()=>{h.value=h.value||l.value}),qt(p,()=>{h.value=0}),Kr(()=>{qt(()=>e.scrollTarget,P=>{const M=P?document.querySelector(P):window;M&&M!==a.value&&(a.value?.removeEventListener("scroll",k),a.value=M,a.value.addEventListener("scroll",k,{passive:!0}))},{immediate:!0})}),Nr(()=>{a.value?.removeEventListener("scroll",k)}),n&&qt(n,k,{immediate:!0}),{scrollThreshold:x,currentScroll:l,currentThreshold:s,isScrollActive:p,scrollRatio:T,isScrollingUp:_,savedScroll:h}}const vpe=lt({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...Sj(),...og(),...ppe(),height:{type:[Number,String],default:64}},"VAppBar"),_pe=At()({name:"VAppBar",props:vpe(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const i=tt(),r=Pn(e,"modelValue"),a=fe(()=>{const B=new Set(e.scrollBehavior?.split(" ")??[]);return{hide:B.has("hide"),fullyHide:B.has("fully-hide"),inverted:B.has("inverted"),collapse:B.has("collapse"),elevate:B.has("elevate"),fadeImage:B.has("fade-image")}}),l=fe(()=>{const B=a.value;return B.hide||B.fullyHide||B.inverted||B.collapse||B.elevate||B.fadeImage||!r.value}),{currentScroll:h,scrollThreshold:s,isScrollingUp:p,scrollRatio:_}=gpe(e,{canScroll:l}),x=Ne(()=>a.value.hide||a.value.fullyHide),T=fe(()=>e.collapse||a.value.collapse&&(a.value.inverted?_.value>0:_.value===0)),k=fe(()=>e.flat||a.value.fullyHide&&!r.value||a.value.elevate&&(a.value.inverted?h.value>0:h.value===0)),P=fe(()=>a.value.fadeImage?a.value.inverted?1-_.value:_.value:void 0),M=fe(()=>{if(a.value.hide&&a.value.inverted)return 0;const B=i.value?.contentHeight??0,H=i.value?.extensionHeight??0;return x.value?h.value<s.value||a.value.fullyHide?B+H:B:B+H});aa(()=>!!e.scrollBehavior,()=>{Ur(()=>{x.value?a.value.inverted?r.value=h.value>s.value:r.value=p.value||h.value<s.value:r.value=!0})});const{ssrBootStyles:R}=hg(),{layoutItemStyles:F}=ag({id:e.name,order:fe(()=>parseInt(e.order,10)),position:Ne(()=>e.location),layoutSize:M,elementSize:Zt(void 0),active:r,absolute:Ne(()=>e.absolute)});return Vt(()=>{const B=cI.filterProps(e);return se(cI,It({ref:i,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{...F.value,"--v-toolbar-image-opacity":P.value,height:void 0,...R.value},e.style]},B,{collapse:T.value,flat:k.value}),n)}),{}}}),ype=lt({...dr(NT({icon:"$menu",variant:"text"}),["spaced"])},"VAppBarNavIcon"),bpe=At()({name:"VAppBarNavIcon",props:ype(),setup(e,t){let{slots:n}=t;return Vt(()=>se(ci,It(e,{class:["v-app-bar-nav-icon"]}),n)),{}}}),xpe=At()({name:"VAppBarTitle",props:Tj(),setup(e,t){let{slots:n}=t;return Vt(()=>se(sM,It(e,{class:"v-app-bar-title"}),n)),{}}}),wpe=(e,t,n)=>{if(e==null||t==null)return-1;if(!t.length)return 0;e=e.toString().toLocaleLowerCase(),t=t.toString().toLocaleLowerCase();const i=[];let r=e.indexOf(t);for(;~r;)i.push([r,r+t.length]),r=e.indexOf(t,r+t.length);return i.length?i:-1};function PC(e,t){if(!(e==null||typeof e=="boolean"||e===-1))return typeof e=="number"?[[e,e+t.length]]:Array.isArray(e[0])?e:[e]}const M_=lt({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function Tpe(e,t,n){const i=[],r=n?.default??wpe,a=n?.filterKeys?qr(n.filterKeys):!1,l=Object.keys(n?.customKeyFilter??{}).length;if(!e?.length)return i;let h=null;e:for(let s=0;s<e.length;s++){const[p,_=p]=qr(e[s]),x={},T={};let k=-1;if((t||l>0)&&!n?.noFilter){let P=!1;if(typeof p=="object"){if(p.type==="divider"||p.type==="subheader"){h?.type==="divider"&&p.type==="subheader"&&i.push(h),h={index:s,matches:{},type:p.type};continue}const F=a||Object.keys(_);P=F.length===l;for(const B of F){const H=Ms(_,B),G=n?.customKeyFilter?.[B];if(k=G?G(H,t,p):r(H,t,p),k!==-1&&k!==!1)G?x[B]=PC(k,t):T[B]=PC(k,t);else if(n?.filterMode==="every")continue e}}else k=r(p,t,p),k!==-1&&k!==!1&&(T.title=PC(k,t));const M=Object.keys(T).length,R=Object.keys(x).length;if(!M&&!R||n?.filterMode==="union"&&R!==l&&!M||n?.filterMode==="intersection"&&(R!==l||!M&&l>0&&!P))continue}h&&(i.push(h),h=null),i.push({index:s,matches:{...T,...x}})}return i}function D_(e,t,n,i){const r=Zt([]),a=Zt(new Map),l=fe(()=>i?.transform?xi(t).map(s=>[s,i.transform(s)]):xi(t));Ur(()=>{const s=typeof n=="function"?n():xi(n),p=typeof s!="string"&&typeof s!="number"?"":String(s),_=Tpe(l.value,p,{customKeyFilter:{...e.customKeyFilter,...xi(i?.customKeyFilter)},default:e.customFilter,filterKeys:e.filterKeys,filterMode:e.filterMode,noFilter:e.noFilter}),x=xi(t),T=[],k=new Map;_.forEach(P=>{let{index:M,matches:R}=P;const F=x[M];T.push(F),k.set(F.value,R)}),r.value=T,a.value=k});function h(s){return a.value.get(s.value)}return{filteredItems:r,filteredMatches:a,getMatches:h}}function Ej(e,t,n){return n==null||!n.length?t:n.map((i,r)=>{const a=r===0?0:n[r-1][1],l=[z("span",{class:xt(`${e}__unmask`)},[t.slice(a,i[0])]),z("span",{class:xt(`${e}__mask`)},[t.slice(i[0],i[1])])];return r===n.length-1&&l.push(z("span",{class:xt(`${e}__unmask`)},[t.slice(i[1])])),z(un,null,[l])})}const Spe=lt({autoSelectFirst:{type:[Boolean,String]},clearOnSelect:Boolean,search:String,...M_({filterKeys:["title"]}),...BP(),...dr(j0({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"])},"VAutocomplete"),Epe=At()({name:"VAutocomplete",props:Spe(),emits:{"update:focused":e=>!0,"update:search":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,t){let{slots:n}=t;const{t:i}=hr(),r=tt(),a=Zt(!1),l=Zt(!0),h=Zt(!1),s=tt(),p=tt(),_=Zt(-1),x=Zt(null),{items:T,transformIn:k,transformOut:P}=IP(e),{textColorClasses:M,textColorStyles:R}=Uo(()=>r.value?.color),F=Pn(e,"search",""),B=Pn(e,"modelValue",[],he=>k(he===null?[null]:qr(he)),he=>{const et=P(he);return e.multiple?et:et[0]??null}),H=fe(()=>typeof e.counterValue=="function"?e.counterValue(B.value):typeof e.counterValue=="number"?e.counterValue:B.value.length),G=A_(e),{filteredItems:ee,getMatches:ie}=D_(e,T,()=>x.value??(l.value?"":F.value)),J=fe(()=>e.hideSelected&&x.value===null?ee.value.filter(he=>!B.value.some(et=>et.value===he.value)):ee.value),$=fe(()=>!!(e.chips||n.chip)),W=fe(()=>$.value||!!n.selection),X=fe(()=>B.value.map(he=>he.props.value)),re=fe(()=>(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&F.value===J.value[0]?.title)&&J.value.length>0&&!l.value&&!h.value),Y=fe(()=>e.hideNoData&&!J.value.length||G.isReadonly.value||G.isDisabled.value),Z=Pn(e,"menu"),ge=fe({get:()=>Z.value,set:he=>{Z.value&&!he&&s.value?.openChildren.size||he&&Y.value||(Z.value=he)}}),{menuId:be,ariaExpanded:Be,ariaControls:nt,ariaLabel:We}=VP(e,ge),Le=tt(),Ze=OP(Le,r);function Ee(he){e.openOnClear&&(ge.value=!0),F.value=""}function Je(){Y.value||(ge.value=!0)}function it(he){Y.value||(a.value&&(he.preventDefault(),he.stopPropagation()),ge.value=!ge.value)}function vt(he){(s_(he)||he.key==="Backspace")&&r.value?.focus()}function mt(he){if(G.isReadonly.value)return;const et=r.value?.selectionStart,dt=B.value.length;if(["Enter","ArrowDown","ArrowUp"].includes(he.key)&&he.preventDefault(),["Enter","ArrowDown"].includes(he.key)&&(ge.value=!0),["Escape"].includes(he.key)&&(ge.value=!1),re.value&&["Enter","Tab"].includes(he.key)&&!B.value.some(Qe=>{let{value:Ct}=Qe;return Ct===J.value[0].value})&&Ae(J.value[0]),he.key==="ArrowDown"&&re.value&&Le.value?.focus("next"),["Backspace","Delete"].includes(he.key)){if(!e.multiple&&W.value&&B.value.length>0&&!F.value)return Ae(B.value[0],!1);if(~_.value){he.preventDefault();const Qe=_.value;Ae(B.value[_.value],!1),_.value=Qe>=dt-1?dt-2:Qe}else he.key==="Backspace"&&!F.value&&(_.value=dt-1);return}if(e.multiple)if(he.key==="ArrowLeft"){if(_.value<0&&et&&et>0)return;const Qe=_.value>-1?_.value-1:dt-1;if(B.value[Qe])_.value=Qe;else{const Ct=F.value?.length??null;_.value=-1,r.value?.setSelectionRange(Ct,Ct)}}else if(he.key==="ArrowRight"){if(_.value<0)return;const Qe=_.value+1;B.value[Qe]?_.value=Qe:(_.value=-1,r.value?.setSelectionRange(0,0))}else~_.value&&s_(he)&&(_.value=-1)}function ot(he){if(r_(r.value,":autofill")||r_(r.value,":-webkit-autofill")){const et=T.value.find(dt=>dt.title===he.target.value);et&&Ae(et)}}function Ye(){e.eager&&p.value?.calculateVisibleItems()}function ut(){a.value&&(l.value=!0,r.value?.focus()),x.value=null}function Ke(he){a.value=!0,setTimeout(()=>{h.value=!0})}function jt(he){h.value=!1}function xn(he){(he==null||he===""&&!e.multiple&&!W.value)&&(B.value=[])}const ke=Zt(!1);function Ae(he){let et=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!(!he||he.props.disabled))if(e.multiple){const dt=B.value.findIndex(Ct=>(e.valueComparator||_o)(Ct.value,he.value)),Qe=et??!~dt;if(~dt){const Ct=Qe?[...B.value,he]:[...B.value];Ct.splice(dt,1),B.value=Ct}else Qe&&(B.value=[...B.value,he]);e.clearOnSelect&&(F.value="")}else{const dt=et!==!1;B.value=dt?[he]:[],x.value=l.value?"":F.value??"",F.value=dt&&!W.value?he.title:"",Hn(()=>{ge.value=!1,l.value=!0})}}return qt(a,(he,et)=>{he!==et&&(he?(ke.value=!0,F.value=e.multiple||W.value?"":String(B.value.at(-1)?.props.title??""),l.value=!0,Hn(()=>ke.value=!1)):(!e.multiple&&F.value==null&&(B.value=[]),ge.value=!1,!l.value&&F.value&&(x.value=F.value),F.value="",_.value=-1))}),qt(F,he=>{!a.value||ke.value||(he&&(ge.value=!0),l.value=!he)}),qt(ge,he=>{if(!e.hideSelected&&he&&B.value.length&&l.value){const et=J.value.findIndex(dt=>B.value.some(Qe=>dt.value===Qe.value));Gi&&window.requestAnimationFrame(()=>{et>=0&&p.value?.scrollToIndex(et)})}he&&(x.value=null)}),qt(T,(he,et)=>{ge.value||a.value&&!et.length&&he.length&&(ge.value=!0)}),Vt(()=>{const he=!!(!e.hideNoData||J.value.length||n["prepend-item"]||n["append-item"]||n["no-data"]),et=B.value.length>0,dt=Th.filterProps(e);return se(Th,It({ref:r},dt,{modelValue:F.value,"onUpdate:modelValue":[Qe=>F.value=Qe,xn],focused:a.value,"onUpdate:focused":Qe=>a.value=Qe,validationValue:B.externalValue,counterValue:H.value,dirty:et,onChange:ot,class:["v-autocomplete",`v-autocomplete--${e.multiple?"multiple":"single"}`,{"v-autocomplete--active-menu":ge.value,"v-autocomplete--chips":!!e.chips,"v-autocomplete--selection-slot":!!W.value,"v-autocomplete--selecting-index":_.value>-1},e.class],style:e.style,readonly:G.isReadonly.value,placeholder:et?void 0:e.placeholder,"onClick:clear":Ee,"onMousedown:control":Je,onKeydown:mt,"aria-expanded":Be.value,"aria-controls":nt.value}),{...n,default:()=>z(un,null,[se(u_,It({id:be.value,ref:s,modelValue:ge.value,"onUpdate:modelValue":Qe=>ge.value=Qe,activator:"parent",contentClass:"v-autocomplete__content",disabled:Y.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,onAfterEnter:Ye,onAfterLeave:ut},e.menuProps),{default:()=>[he&&se(c_,It({ref:Le,filterable:!0,selected:X.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:Qe=>Qe.preventDefault(),onKeydown:vt,onFocusin:Ke,onFocusout:jt,tabindex:"-1",selectable:!0,"aria-live":"polite",color:e.itemColor??e.color},Ze,e.listProps),{default:()=>[n["prepend-item"]?.(),!J.value.length&&!e.hideNoData&&(n["no-data"]?.()??se(vu,{key:"no-data",title:i(e.noDataText)},null)),se(WT,{ref:p,renderless:!0,items:J.value,itemKey:"value"},{default:Qe=>{let{item:Ct,index:Pt,itemRef:Bt}=Qe;const Ht=It(Ct.props,{ref:Bt,key:Ct.value,active:re.value&&Pt===0?!0:void 0,onClick:()=>Ae(Ct,null)});return Ct.type==="divider"?n.divider?.({props:Ct.raw,index:Pt})??se(za,It(Ct.props,{key:`divider-${Pt}`}),null):Ct.type==="subheader"?n.subheader?.({props:Ct.raw,index:Pt})??se(P_,It(Ct.props,{key:`subheader-${Pt}`}),null):n.item?.({item:Ct,index:Pt,props:Ht})??se(vu,It(Ht,{role:"option"}),{prepend:En=>{let{isSelected:Jt}=En;return z(un,null,[e.multiple&&!e.hideSelected?se(hd,{key:Ct.value,modelValue:Jt,ripple:!1,tabindex:"-1",onClick:Mn=>Mn.preventDefault()},null):void 0,Ct.props.prependAvatar&&se(cc,{image:Ct.props.prependAvatar},null),Ct.props.prependIcon&&se(_i,{icon:Ct.props.prependIcon},null)])},title:()=>l.value?Ct.title:Ej("v-autocomplete",Ct.title,ie(Ct)?.title)})}}),n["append-item"]?.()]})]}),B.value.map((Qe,Ct)=>{function Pt(Jt){Jt.stopPropagation(),Jt.preventDefault(),Ae(Qe,!1)}const Bt={"onClick:close":Pt,onKeydown(Jt){Jt.key!=="Enter"&&Jt.key!==" "||(Jt.preventDefault(),Jt.stopPropagation(),Pt(Jt))},onMousedown(Jt){Jt.preventDefault(),Jt.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},Ht=$.value?!!n.chip:!!n.selection,En=Ht?RT($.value?n.chip({item:Qe,index:Ct,props:Bt}):n.selection({item:Qe,index:Ct})):void 0;if(!(Ht&&!En))return z("div",{key:Qe.value,class:xt(["v-autocomplete__selection",Ct===_.value&&["v-autocomplete__selection--selected",M.value]]),style:Yt(Ct===_.value?R.value:{})},[$.value?n.chip?se(ui,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:Qe.title}}},{default:()=>[En]}):se(Vo,It({key:"chip",closable:e.closableChips,size:"small",text:Qe.title,disabled:Qe.props.disabled},Bt),null):En??z("span",{class:"v-autocomplete__selection-text"},[Qe.title,e.multiple&&Ct<B.value.length-1&&z("span",{class:"v-autocomplete__selection-comma"},[Fn(",")])])])})]),"append-inner":function(){for(var Qe=arguments.length,Ct=new Array(Qe),Pt=0;Pt<Qe;Pt++)Ct[Pt]=arguments[Pt];return z(un,null,[n["append-inner"]?.(...Ct),e.menuIcon?se(_i,{class:"v-autocomplete__menu-icon",color:r.value?.fieldIconColor,icon:e.menuIcon,onMousedown:it,onClick:T6,"aria-label":We.value,title:We.value,tabindex:"-1"},null):void 0])}})}),xo({isFocused:a,isPristine:l,menu:ge,search:F,filteredItems:ee,select:Ae},r)}}),Cpe=lt({bordered:Boolean,color:String,content:[Number,String],dot:Boolean,floating:Boolean,icon:kn,inline:Boolean,label:{type:String,default:"$vuetify.badge"},max:[Number,String],modelValue:{type:Boolean,default:!0},offsetX:[Number,String],offsetY:[Number,String],textColor:String,...wn(),...Ph({location:"top end"}),...$r(),...ti(),...Ai(),...Mh({transition:"scale-rotate-transition"}),...Os()},"VBadge"),kpe=At()({name:"VBadge",inheritAttrs:!1,props:Cpe(),setup(e,t){const{backgroundColorClasses:n,backgroundColorStyles:i}=nr(()=>e.color),{roundedClasses:r}=ts(e),{t:a}=hr(),{textColorClasses:l,textColorStyles:h}=Uo(()=>e.textColor),{themeClasses:s}=FT(),{locationStyles:p}=dg(e,!0,x=>(e.floating?e.dot?2:4:e.dot?8:12)+(["top","bottom"].includes(x)?Number(e.offsetY??0):["left","right"].includes(x)?Number(e.offsetX??0):0)),{dimensionStyles:_}=Vs(e);return Vt(()=>{const x=Number(e.content),T=!e.max||isNaN(x)?e.content:x<=Number(e.max)?x:`${e.max}+`,[k,P]=Dk(t.attrs,["aria-atomic","aria-label","aria-live","role","title"]);return se(e.tag,It({class:["v-badge",{"v-badge--bordered":e.bordered,"v-badge--dot":e.dot,"v-badge--floating":e.floating,"v-badge--inline":e.inline},e.class]},P,{style:e.style}),{default:()=>[z("div",{class:"v-badge__wrapper"},[t.slots.default?.(),se(Fa,{transition:e.transition},{default:()=>[Ii(z("span",It({class:["v-badge__badge",s.value,n.value,r.value,l.value],style:[i.value,h.value,_.value,e.inline?{}:p.value],"aria-atomic":"true","aria-label":a(e.label,x),"aria-live":"polite",role:"status"},k),[e.dot?void 0:t.slots.badge?t.slots.badge?.():e.icon?se(_i,{icon:e.icon},null):T]),[[_u,e.modelValue]])]})])]})}),{}}}),Ipe=lt({color:String,density:String,...wn()},"VBannerActions"),Cj=At()({name:"VBannerActions",props:Ipe(),setup(e,t){let{slots:n}=t;return es({VBtn:{color:e.color,density:e.density,slim:!0,variant:"text"}}),Vt(()=>z("div",{class:xt(["v-banner-actions",e.class]),style:Yt(e.style)},[n.default?.()])),{}}}),kj=Ah("v-banner-text"),Ape=lt({avatar:String,bgColor:String,color:String,icon:kn,lines:String,stacked:Boolean,sticky:Boolean,text:String,...cl(),...wn(),...ws(),...Os(),...sg({mobile:null}),...qs(),...Ph(),...C_(),...$r(),...ti(),...Ai()},"VBanner"),Ppe=At()({name:"VBanner",props:Ape(),setup(e,t){let{slots:n}=t;const{backgroundColorClasses:i,backgroundColorStyles:r}=nr(()=>e.bgColor),{borderClasses:a}=Bl(e),{densityClasses:l}=Ga(e),{displayClasses:h,mobile:s}=Vl(e),{dimensionStyles:p}=Vs(e),{elevationClasses:_}=bo(e),{locationStyles:x}=dg(e),{positionClasses:T}=k_(e),{roundedClasses:k}=ts(e),{themeClasses:P}=Zi(e),M=Ne(()=>e.color),R=Ne(()=>e.density);es({VBannerActions:{color:M,density:R}}),Vt(()=>{const F=!!(e.text||n.text),B=!!(e.avatar||e.icon),H=!!(B||n.prepend);return se(e.tag,{class:xt(["v-banner",{"v-banner--stacked":e.stacked||s.value,"v-banner--sticky":e.sticky,[`v-banner--${e.lines}-line`]:!!e.lines},P.value,i.value,a.value,l.value,h.value,_.value,T.value,k.value,e.class]),style:Yt([r.value,p.value,x.value,e.style]),role:"banner"},{default:()=>[H&&z("div",{key:"prepend",class:"v-banner__prepend"},[n.prepend?se(ui,{key:"prepend-defaults",disabled:!B,defaults:{VAvatar:{color:M.value,density:R.value,icon:e.icon,image:e.avatar}}},n.prepend):se(cc,{key:"prepend-avatar",color:M.value,density:R.value,icon:e.icon,image:e.avatar},null)]),z("div",{class:"v-banner__content"},[F&&se(kj,{key:"text"},{default:()=>[n.text?.()??e.text]}),n.default?.()]),n.actions&&se(Cj,{key:"actions"},n.actions)]})})}}),Mpe=lt({baseColor:String,bgColor:String,color:String,grow:Boolean,mode:{type:String,validator:e=>!e||["horizontal","shift"].includes(e)},height:{type:[Number,String],default:56},active:{type:Boolean,default:!0},...cl(),...wn(),...ws(),...qs(),...$r(),...og({name:"bottom-navigation"}),...ti({tag:"header"}),...cg({selectedClass:"v-btn--selected"}),...Ai()},"VBottomNavigation"),Dpe=At()({name:"VBottomNavigation",props:Mpe(),emits:{"update:active":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{themeClasses:i}=FT(),{borderClasses:r}=Bl(e),{backgroundColorClasses:a,backgroundColorStyles:l}=nr(()=>e.bgColor),{densityClasses:h}=Ga(e),{elevationClasses:s}=bo(e),{roundedClasses:p}=ts(e),{ssrBootStyles:_}=hg(),x=fe(()=>Number(e.height)-(e.density==="comfortable"?8:0)-(e.density==="compact"?16:0)),T=Pn(e,"active",e.active),{layoutItemStyles:k}=ag({id:e.name,order:fe(()=>parseInt(e.order,10)),position:Ne(()=>"bottom"),layoutSize:Ne(()=>T.value?x.value:0),elementSize:x,active:T,absolute:Ne(()=>e.absolute)});return vm(e,_P),es({VBtn:{baseColor:Ne(()=>e.baseColor),color:Ne(()=>e.color),density:Ne(()=>e.density),stacked:Ne(()=>e.mode!=="horizontal"),variant:"text"}},{scoped:!0}),Vt(()=>se(e.tag,{class:xt(["v-bottom-navigation",{"v-bottom-navigation--active":T.value,"v-bottom-navigation--grow":e.grow,"v-bottom-navigation--shift":e.mode==="shift"},i.value,a.value,r.value,h.value,s.value,p.value,e.class]),style:Yt([l.value,k.value,{height:pn(x.value)},_.value,e.style])},{default:()=>[n.default&&z("div",{class:"v-bottom-navigation__content"},[n.default()])]})),{}}}),Ij=lt({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...U0({origin:"center center",scrollStrategy:"block",transition:{component:UT},zIndex:2400})},"VDialog"),uI=At()({name:"VDialog",props:Ij(),emits:{"update:modelValue":e=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(e,t){let{emit:n,slots:i}=t;const r=Pn(e,"modelValue"),{scopeId:a}=fg(),l=tt();async function h(x){const T=x.relatedTarget,k=x.target;await Hn(),r.value&&T!==k&&l.value?.contentEl&&l.value?.globalTop&&![document,l.value.contentEl].includes(k)&&!l.value.contentEl.contains(k)&&i_(l.value.contentEl)[0]?.focus()}function s(x){if(x.key!=="Tab"||!l.value?.contentEl)return;const T=i_(l.value.contentEl);if(!T.length)return;const k=T[0],P=T[T.length-1],M=document.activeElement;x.shiftKey&&M===k?(x.preventDefault(),P.focus()):!x.shiftKey&&M===P&&(x.preventDefault(),k.focus())}Nr(()=>{document.removeEventListener("focusin",h),document.removeEventListener("keydown",s)}),Gi&&qt(()=>r.value&&e.retainFocus,x=>{x?(document.addEventListener("focusin",h,{once:!0}),document.addEventListener("keydown",s)):(document.removeEventListener("focusin",h),document.removeEventListener("keydown",s))},{immediate:!0});function p(){n("afterEnter"),(e.scrim||e.retainFocus)&&l.value?.contentEl&&!l.value.contentEl.contains(document.activeElement)&&l.value.contentEl.focus({preventScroll:!0})}function _(){n("afterLeave")}return qt(r,async x=>{x||(await Hn(),l.value.activatorEl?.focus({preventScroll:!0}))}),Vt(()=>{const x=fd.filterProps(e),T=It({"aria-haspopup":"dialog"},e.activatorProps),k=It({tabindex:-1},e.contentProps);return se(fd,It({ref:l,class:["v-dialog",{"v-dialog--fullscreen":e.fullscreen,"v-dialog--scrollable":e.scrollable},e.class],style:e.style},x,{modelValue:r.value,"onUpdate:modelValue":P=>r.value=P,"aria-modal":"true",activatorProps:T,contentProps:k,height:e.fullscreen?void 0:e.height,width:e.fullscreen?void 0:e.width,maxHeight:e.fullscreen?void 0:e.maxHeight,maxWidth:e.fullscreen?void 0:e.maxWidth,role:"dialog",onAfterEnter:p,onAfterLeave:_},a),{activator:i.activator,default:function(){for(var P=arguments.length,M=new Array(P),R=0;R<P;R++)M[R]=arguments[R];return se(ui,{root:"VDialog"},{default:()=>[i.default?.(...M)]})}})}),xo({},l)}}),Lpe=lt({inset:Boolean,...Ij({transition:"bottom-sheet-transition"})},"VBottomSheet"),Rpe=At()({name:"VBottomSheet",props:Lpe(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const i=Pn(e,"modelValue");return Vt(()=>{const r=uI.filterProps(e);return se(uI,It(r,{contentClass:["v-bottom-sheet__content",e.contentClass],modelValue:i.value,"onUpdate:modelValue":a=>i.value=a,class:["v-bottom-sheet",{"v-bottom-sheet--inset":e.inset},e.class],style:e.style}),n)}),{}}}),Ope=lt({divider:[Number,String],...wn()},"VBreadcrumbsDivider"),Aj=At()({name:"VBreadcrumbsDivider",props:Ope(),setup(e,t){let{slots:n}=t;return Vt(()=>z("li",{"aria-hidden":"true",class:xt(["v-breadcrumbs-divider",e.class]),style:Yt(e.style)},[n?.default?.()??e.divider])),{}}}),Vpe=lt({active:Boolean,activeClass:String,activeColor:String,color:String,disabled:Boolean,title:String,...wn(),...F0(),...ti({tag:"li"})},"VBreadcrumbsItem"),Pj=At()({name:"VBreadcrumbsItem",props:Vpe(),setup(e,t){let{slots:n,attrs:i}=t;const r=B0(e,i),a=fe(()=>e.active||r.isActive?.value),{textColorClasses:l,textColorStyles:h}=Uo(()=>a.value?e.activeColor:e.color);return Vt(()=>se(e.tag,{class:xt(["v-breadcrumbs-item",{"v-breadcrumbs-item--active":a.value,"v-breadcrumbs-item--disabled":e.disabled,[`${e.activeClass}`]:a.value&&e.activeClass},l.value,e.class]),style:Yt([h.value,e.style]),"aria-current":a.value?"page":void 0},{default:()=>[r.isLink.value?z("a",It({class:"v-breadcrumbs-item--link",onClick:r.navigate},r.linkProps),[n.default?.()??e.title]):n.default?.()??e.title]})),{}}}),Bpe=lt({activeClass:String,activeColor:String,bgColor:String,color:String,disabled:Boolean,divider:{type:String,default:"/"},icon:kn,items:{type:Array,default:()=>[]},...wn(),...ws(),...$r(),...ti({tag:"ul"})},"VBreadcrumbs"),Fpe=At()({name:"VBreadcrumbs",props:Bpe(),setup(e,t){let{slots:n}=t;const{backgroundColorClasses:i,backgroundColorStyles:r}=nr(()=>e.bgColor),{densityClasses:a}=Ga(e),{roundedClasses:l}=ts(e);es({VBreadcrumbsDivider:{divider:Ne(()=>e.divider)},VBreadcrumbsItem:{activeClass:Ne(()=>e.activeClass),activeColor:Ne(()=>e.activeColor),color:Ne(()=>e.color),disabled:Ne(()=>e.disabled)}});const h=fe(()=>e.items.map(s=>typeof s=="string"?{item:{title:s},raw:s}:{item:s,raw:s}));return Vt(()=>{const s=!!(n.prepend||e.icon);return se(e.tag,{class:xt(["v-breadcrumbs",i.value,a.value,l.value,e.class]),style:Yt([r.value,e.style])},{default:()=>[s&&z("li",{key:"prepend",class:"v-breadcrumbs__prepend"},[n.prepend?se(ui,{key:"prepend-defaults",disabled:!e.icon,defaults:{VIcon:{icon:e.icon,start:!0}}},n.prepend):se(_i,{key:"prepend-icon",start:!0,icon:e.icon},null)]),h.value.map((p,_,x)=>{let{item:T,raw:k}=p;return z(un,null,[n.item?.({item:T,index:_})??se(Pj,It({key:_,disabled:_>=x.length-1},typeof T=="string"?{title:T}:T),{default:n.title?()=>n.title?.({item:T,index:_}):void 0}),_<x.length-1&&se(Aj,null,{default:n.divider?()=>n.divider?.({item:k,index:_}):void 0})])}),n.default?.()]})}),{}}}),zpe=e=>{const{touchstartX:t,touchendX:n,touchstartY:i,touchendY:r}=e,a=.5,l=16;e.offsetX=n-t,e.offsetY=r-i,Math.abs(e.offsetY)<a*Math.abs(e.offsetX)&&(e.left&&n<t-l&&e.left(e),e.right&&n>t+l&&e.right(e)),Math.abs(e.offsetX)<a*Math.abs(e.offsetY)&&(e.up&&r<i-l&&e.up(e),e.down&&r>i+l&&e.down(e))};function Npe(e,t){const n=e.changedTouches[0];t.touchstartX=n.clientX,t.touchstartY=n.clientY,t.start?.({originalEvent:e,...t})}function Upe(e,t){const n=e.changedTouches[0];t.touchendX=n.clientX,t.touchendY=n.clientY,t.end?.({originalEvent:e,...t}),zpe(t)}function $pe(e,t){const n=e.changedTouches[0];t.touchmoveX=n.clientX,t.touchmoveY=n.clientY,t.move?.({originalEvent:e,...t})}function jpe(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:e.left,right:e.right,up:e.up,down:e.down,start:e.start,move:e.move,end:e.end};return{touchstart:n=>Npe(n,t),touchend:n=>Upe(n,t),touchmove:n=>$pe(n,t)}}function Wpe(e,t){const n=t.value,i=n?.parent?e.parentElement:e,r=n?.options??{passive:!0},a=t.instance?.$.uid;if(!i||a===void 0)return;const l=jpe(t.value);i._touchHandlers=i._touchHandlers??Object.create(null),i._touchHandlers[a]=l,g6(l).forEach(h=>{i.addEventListener(h,l[h],r)})}function Hpe(e,t){const n=t.value?.parent?e.parentElement:e,i=t.instance?.$.uid;if(!n?._touchHandlers||i===void 0)return;const r=n._touchHandlers[i];g6(r).forEach(a=>{n.removeEventListener(a,r[a])}),delete n._touchHandlers[i]}const K1={mounted:Wpe,unmounted:Hpe},Mj=Symbol.for("vuetify:v-window"),Dj=Symbol.for("vuetify:v-window-group"),QT=lt({continuous:Boolean,nextIcon:{type:[Boolean,String,Function,Object],default:"$next"},prevIcon:{type:[Boolean,String,Function,Object],default:"$prev"},reverse:Boolean,showArrows:{type:[Boolean,String],validator:e=>typeof e=="boolean"||e==="hover"},verticalArrows:[Boolean,String],touch:{type:[Object,Boolean],default:void 0},direction:{type:String,default:"horizontal"},modelValue:null,disabled:Boolean,selectedClass:{type:String,default:"v-window-item--active"},mandatory:{type:[Boolean,String],default:"force"},crossfade:Boolean,transitionDuration:Number,...wn(),...ti(),...Ai()},"VWindow"),Xp=At()({name:"VWindow",directives:{vTouch:K1},props:QT(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{themeClasses:i}=Zi(e),{isRtl:r}=Gs(),{t:a}=hr(),l=vm(e,Dj),h=tt(),s=fe(()=>r.value?!e.reverse:e.reverse),p=Zt(!1),_=fe(()=>{if(e.crossfade)return"v-window-crossfade-transition";const G=e.direction==="vertical"?"y":"x",ie=(s.value?!p.value:p.value)?"-reverse":"";return`v-window-${G}${ie}-transition`}),x=Zt(0),T=tt(void 0),k=fe(()=>l.items.value.findIndex(G=>l.selected.value.includes(G.id)));qt(k,(G,ee)=>{let ie;const J={left:0,top:0};Gi&&ee>=0&&(ie=OT(h.value),J.left=ie?.scrollLeft,J.top=ie?.scrollTop);const $=l.items.value.length,W=$-1;$<=2?p.value=G<ee:G===W&&ee===0?p.value=!0:G===0&&ee===W?p.value=!1:p.value=G<ee,Hn(()=>{if(!Gi||!ie)return;ie.scrollTop!==J.top&&ie.scrollTo({...J,behavior:"instant"}),requestAnimationFrame(()=>{if(!ie)return;ie.scrollTop!==J.top&&ie.scrollTo({...J,behavior:"instant"})})})},{flush:"sync"}),Dr(Mj,{transition:_,isReversed:p,transitionCount:x,transitionHeight:T,rootRef:h});const P=Ne(()=>e.continuous||k.value!==0),M=Ne(()=>e.continuous||k.value!==l.items.value.length-1);function R(){P.value&&l.prev()}function F(){M.value&&l.next()}const B=fe(()=>{const G=[],ee={icon:r.value?e.nextIcon:e.prevIcon,class:`v-window__${s.value?"right":"left"}`,onClick:l.prev,"aria-label":a("$vuetify.carousel.prev")};G.push(P.value?n.prev?n.prev({props:ee}):se(ci,ee,null):z("div",null,null));const ie={icon:r.value?e.prevIcon:e.nextIcon,class:`v-window__${s.value?"left":"right"}`,onClick:l.next,"aria-label":a("$vuetify.carousel.next")};return G.push(M.value?n.next?n.next({props:ie}):se(ci,ie,null):z("div",null,null)),G}),H=fe(()=>e.touch===!1?e.touch:{...{left:()=>{s.value?R():F()},right:()=>{s.value?F():R()},start:ee=>{let{originalEvent:ie}=ee;ie.stopPropagation()}},...e.touch===!0?{}:e.touch});return Vt(()=>Ii(se(e.tag,{ref:h,class:xt(["v-window",{"v-window--show-arrows-on-hover":e.showArrows==="hover","v-window--vertical-arrows":!!e.verticalArrows,"v-window--crossfade":!!e.crossfade},i.value,e.class]),style:Yt([e.style,e.transitionDuration&&!ud?{"--v-window-transition-duration":pn(e.transitionDuration,"ms")}:void 0])},{default:()=>[z("div",{class:"v-window__container",style:{height:T.value}},[n.default?.({group:l}),e.showArrows!==!1&&z("div",{class:xt(["v-window__controls",{"v-window__controls--left":e.verticalArrows==="left"||e.verticalArrows===!0},{"v-window__controls--right":e.verticalArrows==="right"}])},[B.value])]),n.additional?.({group:l})]}),[[K1,H.value]])),{group:l}}}),Gpe=lt({color:String,cycle:Boolean,delimiterIcon:{type:kn,default:"$delimiter"},height:{type:[Number,String],default:500},hideDelimiters:Boolean,hideDelimiterBackground:Boolean,interval:{type:[Number,String],default:6e3,validator:e=>Number(e)>0},progress:[Boolean,String],verticalDelimiters:[Boolean,String],...QT({continuous:!0,mandatory:"force",showArrows:!0})},"VCarousel"),qpe=At()({name:"VCarousel",props:Gpe(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const i=Pn(e,"modelValue"),{t:r}=hr(),a=tt();let l=-1;qt(i,s),qt(()=>e.interval,s),qt(()=>e.cycle,p=>{p?s():window.clearTimeout(l)}),Kr(h);function h(){!e.cycle||!a.value||(l=window.setTimeout(a.value.group.next,Number(e.interval)>0?Number(e.interval):6e3))}function s(){window.clearTimeout(l),window.requestAnimationFrame(h)}return Vt(()=>{const p=Xp.filterProps(e);return se(Xp,It({ref:a},p,{modelValue:i.value,"onUpdate:modelValue":_=>i.value=_,class:["v-carousel",{"v-carousel--hide-delimiter-background":e.hideDelimiterBackground,"v-carousel--vertical-delimiters":e.verticalDelimiters},e.class],style:[{height:pn(e.height)},e.style]}),{default:n.default,additional:_=>{let{group:x}=_;return z(un,null,[!e.hideDelimiters&&z("div",{class:"v-carousel__controls",style:{left:e.verticalDelimiters==="left"&&e.verticalDelimiters?0:"auto",right:e.verticalDelimiters==="right"?0:"auto"}},[x.items.value.length>0&&se(ui,{defaults:{VBtn:{color:e.color,icon:e.delimiterIcon,size:"x-small",variant:"text"}},scoped:!0},{default:()=>[x.items.value.map((T,k)=>{const P={id:`carousel-item-${T.id}`,"aria-label":r("$vuetify.carousel.ariaLabel.delimiter",k+1,x.items.value.length),class:["v-carousel__controls__item",x.isSelected(T.id)&&"v-btn--active"],onClick:()=>x.select(T.id,!0)};return n.item?n.item({props:P,item:T}):se(ci,It(T,P),null)})]})]),e.progress&&se(R0,{absolute:!0,class:"v-carousel__progress",color:typeof e.progress=="string"?e.progress:void 0,modelValue:(x.getItemIndex(i.value)+1)/x.items.value.length*100},null)])},prev:n.prev,next:n.next})}),{}}}),eS=lt({reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},...wn(),...ug(),...LP()},"VWindowItem"),Yp=At()({name:"VWindowItem",directives:{vTouch:K1},props:eS(),emits:{"group:selected":e=>!0},setup(e,t){let{slots:n}=t;const i=wi(Mj),r=om(e,Dj),{isBooted:a}=hg();if(!i||!r)throw new Error("[Vuetify] VWindowItem must be used inside VWindow");const l=Zt(!1),h=fe(()=>a.value&&(i.isReversed.value?e.reverseTransition!==!1:e.transition!==!1));function s(){!l.value||!i||(l.value=!1,i.transitionCount.value>0&&(i.transitionCount.value-=1,i.transitionCount.value===0&&(i.transitionHeight.value=void 0)))}function p(){l.value||!i||(l.value=!0,i.transitionCount.value===0&&(i.transitionHeight.value=pn(i.rootRef.value?.clientHeight)),i.transitionCount.value+=1)}function _(){s()}function x(P){l.value&&Hn(()=>{!h.value||!l.value||!i||(i.transitionHeight.value=pn(P.clientHeight))})}const T=fe(()=>{const P=i.isReversed.value?e.reverseTransition:e.transition;return h.value?{name:typeof P!="string"?i.transition.value:P,onBeforeEnter:p,onAfterEnter:s,onEnterCancelled:_,onBeforeLeave:p,onAfterLeave:s,onLeaveCancelled:_,onEnter:x}:!1}),{hasContent:k}=RP(e,r.isSelected);return Vt(()=>se(Fa,{transition:T.value,disabled:!a.value},{default:()=>[Ii(z("div",{class:xt(["v-window-item",r.selectedClass.value,e.class]),style:Yt(e.style)},[k.value&&n.default?.()]),[[_u,r.isSelected.value]])]})),{groupItem:r}}}),Kpe=lt({...gU(),...eS()},"VCarouselItem"),Xpe=At()({name:"VCarouselItem",inheritAttrs:!1,props:Kpe(),setup(e,t){let{slots:n,attrs:i}=t;Vt(()=>{const r=wh.filterProps(e),a=Yp.filterProps(e);return se(Yp,It({class:["v-carousel-item",e.class]},a),{default:()=>[se(wh,It(i,r),n)]})})}}),Ype=Ah("v-code","code"),Zpe=lt({color:{type:Object},disabled:Boolean,dotSize:{type:[Number,String],default:10},height:{type:[Number,String],default:150},width:{type:[Number,String],default:300},...wn()},"VColorPickerCanvas"),Jpe=uc({name:"VColorPickerCanvas",props:Zpe(),emits:{"update:color":e=>!0,"update:position":e=>!0},setup(e,t){let{emit:n}=t;const i=Zt(!1),r=tt(),a=Zt(parseFloat(e.width)),l=Zt(parseFloat(e.height)),h=tt({x:0,y:0}),s=fe({get:()=>h.value,set(R){if(!r.value)return;const{x:F,y:B}=R;h.value=R,n("update:color",{h:e.color?.h??0,s:Er(F,0,a.value)/a.value,v:1-Er(B,0,l.value)/l.value,a:e.color?.a??1})}}),p=fe(()=>{const{x:R,y:F}=s.value,B=parseInt(e.dotSize,10)/2;return{width:pn(e.dotSize),height:pn(e.dotSize),transform:`translate(${pn(R-B)}, ${pn(F-B)})`}}),{resizeRef:_}=zc(R=>{if(!_.el?.offsetParent)return;const{width:F,height:B}=R[0].contentRect;a.value=F,l.value=B});function x(R,F,B){const{left:H,top:G,width:ee,height:ie}=B;s.value={x:Er(R-H,0,ee),y:Er(F-G,0,ie)}}function T(R){R.type==="mousedown"&&R.preventDefault(),!e.disabled&&(k(R),window.addEventListener("mousemove",k),window.addEventListener("mouseup",P),window.addEventListener("touchmove",k),window.addEventListener("touchend",P))}function k(R){if(e.disabled||!r.value)return;i.value=!0;const F=cne(R);x(F.clientX,F.clientY,r.value.getBoundingClientRect())}function P(){window.removeEventListener("mousemove",k),window.removeEventListener("mouseup",P),window.removeEventListener("touchmove",k),window.removeEventListener("touchend",P)}function M(){if(!r.value)return;const R=r.value,F=R.getContext("2d");if(!F)return;const B=F.createLinearGradient(0,0,R.width,0);B.addColorStop(0,"hsla(0, 0%, 100%, 1)"),B.addColorStop(1,`hsla(${e.color?.h??0}, 100%, 50%, 1)`),F.fillStyle=B,F.fillRect(0,0,R.width,R.height);const H=F.createLinearGradient(0,0,0,R.height);H.addColorStop(0,"hsla(0, 0%, 0%, 0)"),H.addColorStop(1,"hsla(0, 0%, 0%, 1)"),F.fillStyle=H,F.fillRect(0,0,R.width,R.height)}return qt(()=>e.color?.h,M,{immediate:!0}),qt(()=>[a.value,l.value],(R,F)=>{M(),h.value={x:s.value.x*R[0]/F[0],y:s.value.y*R[1]/F[1]}},{flush:"post"}),qt(()=>e.color,()=>{if(i.value){i.value=!1;return}h.value=e.color?{x:e.color.s*a.value,y:(1-e.color.v)*l.value}:{x:0,y:0}},{deep:!0,immediate:!0}),Kr(()=>M()),Vt(()=>z("div",{ref:_,class:xt(["v-color-picker-canvas",e.class]),style:Yt(e.style),onMousedown:T,onTouchstartPassive:T},[z("canvas",{ref:r,width:a.value,height:l.value},null),e.color&&z("div",{class:xt(["v-color-picker-canvas__dot",{"v-color-picker-canvas__dot--disabled":e.disabled}]),style:Yt(p.value)},null)])),{}}});function Qpe(e,t){if(t){const{a:n,...i}=e;return i}return e}function ege(e,t){if(t==null||typeof t=="string"){const n=e.a!==1;if(t?.startsWith("rgb(")){const{r,g:a,b:l,a:h}=dd(e);return`rgb(${r} ${a} ${l}`+(n?` / ${h})`:")")}else if(t?.startsWith("hsl(")){const{h:r,s:a,l,a:h}=Vk(e);return`hsl(${r} ${Math.round(a*100)} ${Math.round(l*100)}`+(n?` / ${h})`:")")}const i=L6(e);return e.a===1?i.slice(0,7):i}if(typeof t=="object"){let n;return Tp(t,["r","g","b"])?n=dd(e):Tp(t,["h","s","l"])?n=Vk(e):Tp(t,["h","s","v"])&&(n=e),Qpe(n,!Tp(t,["a"])&&e.a===1)}return e}const bv={h:0,s:0,v:0,a:1},dI={inputProps:{type:"number",min:0},inputs:[{label:"R",max:255,step:1,getValue:e=>Math.round(e.r),getColor:(e,t)=>({...e,r:Number(t)}),localeKey:"redInput"},{label:"G",max:255,step:1,getValue:e=>Math.round(e.g),getColor:(e,t)=>({...e,g:Number(t)}),localeKey:"greenInput"},{label:"B",max:255,step:1,getValue:e=>Math.round(e.b),getColor:(e,t)=>({...e,b:Number(t)}),localeKey:"blueInput"},{label:"A",max:1,step:.01,getValue:e=>{let{a:t}=e;return t!=null?Math.round(t*100)/100:1},getColor:(e,t)=>({...e,a:Number(t)}),localeKey:"alphaInput"}],to:dd,from:P0},tge={...dI,inputs:dI.inputs?.slice(0,3)},hI={inputProps:{type:"number",min:0},inputs:[{label:"H",max:360,step:1,getValue:e=>Math.round(e.h),getColor:(e,t)=>({...e,h:Number(t)}),localeKey:"hueInput"},{label:"S",max:1,step:.01,getValue:e=>Math.round(e.s*100)/100,getColor:(e,t)=>({...e,s:Number(t)}),localeKey:"saturationInput"},{label:"L",max:1,step:.01,getValue:e=>Math.round(e.l*100)/100,getColor:(e,t)=>({...e,l:Number(t)}),localeKey:"lightnessInput"},{label:"A",max:1,step:.01,getValue:e=>{let{a:t}=e;return t!=null?Math.round(t*100)/100:1},getColor:(e,t)=>({...e,a:Number(t)}),localeKey:"alphaInput"}],to:Vk,from:lP},nge={...hI,inputs:hI.inputs.slice(0,3)},Lj={inputProps:{type:"text"},inputs:[{label:"HEXA",getValue:e=>e,getColor:(e,t)=>t,localeKey:"hexaInput"}],to:L6,from:Rne},ige={...Lj,inputs:[{label:"HEX",getValue:e=>e.slice(0,7),getColor:(e,t)=>t,localeKey:"hexInput"}]},Bp={rgb:tge,rgba:dI,hsl:nge,hsla:hI,hex:ige,hexa:Lj},rge=e=>{let{label:t,...n}=e;return z("div",{class:"v-color-picker-edit__input"},[z("input",SW(Ez(n)),null),z("span",null,[t])])},sge=lt({color:Object,disabled:Boolean,mode:{type:String,default:"rgba",validator:e=>Object.keys(Bp).includes(e)},modes:{type:Array,default:()=>Object.keys(Bp),validator:e=>Array.isArray(e)&&e.every(t=>Object.keys(Bp).includes(t))},...wn()},"VColorPickerEdit"),oge=uc({name:"VColorPickerEdit",props:sge(),emits:{"update:color":e=>!0,"update:mode":e=>!0},setup(e,t){let{emit:n}=t;const{t:i}=hr(),r=fe(()=>e.modes.map(l=>({...Bp[l],name:l}))),a=fe(()=>{const l=r.value.find(s=>s.name===e.mode);if(!l)return[];const h=e.color?l.to(e.color):null;return l.inputs?.map(s=>{let{getValue:p,getColor:_,localeKey:x,...T}=s;return{...l.inputProps,...T,ariaLabel:i(`$vuetify.colorPicker.ariaLabel.${x}`),disabled:e.disabled,value:h&&p(h),onChange:k=>{const P=k.target;P&&n("update:color",l.from(_(h??l.to(bv),P.value)))}}})});return Vt(()=>z("div",{class:xt(["v-color-picker-edit",e.class]),style:Yt(e.style)},[a.value?.map(l=>se(rge,l,null)),r.value.length>1&&se(ci,{icon:"$unfold",size:"x-small",variant:"plain","aria-label":i("$vuetify.colorPicker.ariaLabel.changeFormat"),onClick:()=>{const l=r.value.findIndex(h=>h.name===e.mode);n("update:mode",r.value[(l+1)%r.value.length].name)}},null)])),{}}}),Rj=lt({color:{type:Object},disabled:Boolean,hideAlpha:Boolean,hideEyeDropper:Boolean,eyeDropperIcon:{type:kn,default:"$eyeDropper"},...wn()},"VColorPickerPreview"),age=uc({name:"VColorPickerPreview",props:Rj(),emits:{"update:color":e=>!0},setup(e,t){let{emit:n}=t;const{t:i}=hr(),r=new AbortController;zI(()=>r.abort());async function a(){if(!PV||e.disabled)return;const l=new window.EyeDropper;try{const h=await l.open({signal:r.signal}),s=P0(sc(h.sRGBHex));n("update:color",{...e.color??bv,...s})}catch{}}return Vt(()=>z("div",{class:xt(["v-color-picker-preview",{"v-color-picker-preview--hide-alpha":e.hideAlpha},e.class]),style:Yt(e.style)},[PV&&!e.hideEyeDropper&&z("div",{class:"v-color-picker-preview__eye-dropper",key:"eyeDropper"},[se(ci,{"aria-label":i("$vuetify.colorPicker.ariaLabel.eyedropper"),density:"comfortable",disabled:e.disabled,icon:e.eyeDropperIcon,variant:"plain",onClick:a},null)]),z("div",{class:"v-color-picker-preview__dot"},[z("div",{style:{background:P6(e.color??bv)}},null)]),z("div",{class:"v-color-picker-preview__sliders"},[se(o0,{class:"v-color-picker-preview__track v-color-picker-preview__hue",name:i("$vuetify.colorPicker.ariaLabel.hueSlider"),modelValue:e.color?.h,"onUpdate:modelValue":l=>n("update:color",{...e.color??bv,h:l}),step:1,min:0,max:360,disabled:e.disabled,thumbSize:14,trackSize:8,trackFillColor:"white",hideDetails:!0},null),!e.hideAlpha&&se(o0,{class:"v-color-picker-preview__track v-color-picker-preview__alpha",name:i("$vuetify.colorPicker.ariaLabel.alphaSlider"),modelValue:e.color?.a??1,"onUpdate:modelValue":l=>n("update:color",{...e.color??bv,a:l}),step:.01,min:0,max:1,disabled:e.disabled,thumbSize:14,trackSize:8,trackFillColor:"white",hideDetails:!0},null)])])),{}}}),lge={base:"#f44336",lighten5:"#ffebee",lighten4:"#ffcdd2",lighten3:"#ef9a9a",lighten2:"#e57373",lighten1:"#ef5350",darken1:"#e53935",darken2:"#d32f2f",darken3:"#c62828",darken4:"#b71c1c",accent1:"#ff8a80",accent2:"#ff5252",accent3:"#ff1744",accent4:"#d50000"},cge={base:"#e91e63",lighten5:"#fce4ec",lighten4:"#f8bbd0",lighten3:"#f48fb1",lighten2:"#f06292",lighten1:"#ec407a",darken1:"#d81b60",darken2:"#c2185b",darken3:"#ad1457",darken4:"#880e4f",accent1:"#ff80ab",accent2:"#ff4081",accent3:"#f50057",accent4:"#c51162"},uge={base:"#9c27b0",lighten5:"#f3e5f5",lighten4:"#e1bee7",lighten3:"#ce93d8",lighten2:"#ba68c8",lighten1:"#ab47bc",darken1:"#8e24aa",darken2:"#7b1fa2",darken3:"#6a1b9a",darken4:"#4a148c",accent1:"#ea80fc",accent2:"#e040fb",accent3:"#d500f9",accent4:"#aa00ff"},dge={base:"#673ab7",lighten5:"#ede7f6",lighten4:"#d1c4e9",lighten3:"#b39ddb",lighten2:"#9575cd",lighten1:"#7e57c2",darken1:"#5e35b1",darken2:"#512da8",darken3:"#4527a0",darken4:"#311b92",accent1:"#b388ff",accent2:"#7c4dff",accent3:"#651fff",accent4:"#6200ea"},hge={base:"#3f51b5",lighten5:"#e8eaf6",lighten4:"#c5cae9",lighten3:"#9fa8da",lighten2:"#7986cb",lighten1:"#5c6bc0",darken1:"#3949ab",darken2:"#303f9f",darken3:"#283593",darken4:"#1a237e",accent1:"#8c9eff",accent2:"#536dfe",accent3:"#3d5afe",accent4:"#304ffe"},fge={base:"#2196f3",lighten5:"#e3f2fd",lighten4:"#bbdefb",lighten3:"#90caf9",lighten2:"#64b5f6",lighten1:"#42a5f5",darken1:"#1e88e5",darken2:"#1976d2",darken3:"#1565c0",darken4:"#0d47a1",accent1:"#82b1ff",accent2:"#448aff",accent3:"#2979ff",accent4:"#2962ff"},mge={base:"#03a9f4",lighten5:"#e1f5fe",lighten4:"#b3e5fc",lighten3:"#81d4fa",lighten2:"#4fc3f7",lighten1:"#29b6f6",darken1:"#039be5",darken2:"#0288d1",darken3:"#0277bd",darken4:"#01579b",accent1:"#80d8ff",accent2:"#40c4ff",accent3:"#00b0ff",accent4:"#0091ea"},pge={base:"#00bcd4",lighten5:"#e0f7fa",lighten4:"#b2ebf2",lighten3:"#80deea",lighten2:"#4dd0e1",lighten1:"#26c6da",darken1:"#00acc1",darken2:"#0097a7",darken3:"#00838f",darken4:"#006064",accent1:"#84ffff",accent2:"#18ffff",accent3:"#00e5ff",accent4:"#00b8d4"},gge={base:"#009688",lighten5:"#e0f2f1",lighten4:"#b2dfdb",lighten3:"#80cbc4",lighten2:"#4db6ac",lighten1:"#26a69a",darken1:"#00897b",darken2:"#00796b",darken3:"#00695c",darken4:"#004d40",accent1:"#a7ffeb",accent2:"#64ffda",accent3:"#1de9b6",accent4:"#00bfa5"},vge={base:"#4caf50",lighten5:"#e8f5e9",lighten4:"#c8e6c9",lighten3:"#a5d6a7",lighten2:"#81c784",lighten1:"#66bb6a",darken1:"#43a047",darken2:"#388e3c",darken3:"#2e7d32",darken4:"#1b5e20",accent1:"#b9f6ca",accent2:"#69f0ae",accent3:"#00e676",accent4:"#00c853"},_ge={base:"#8bc34a",lighten5:"#f1f8e9",lighten4:"#dcedc8",lighten3:"#c5e1a5",lighten2:"#aed581",lighten1:"#9ccc65",darken1:"#7cb342",darken2:"#689f38",darken3:"#558b2f",darken4:"#33691e",accent1:"#ccff90",accent2:"#b2ff59",accent3:"#76ff03",accent4:"#64dd17"},yge={base:"#cddc39",lighten5:"#f9fbe7",lighten4:"#f0f4c3",lighten3:"#e6ee9c",lighten2:"#dce775",lighten1:"#d4e157",darken1:"#c0ca33",darken2:"#afb42b",darken3:"#9e9d24",darken4:"#827717",accent1:"#f4ff81",accent2:"#eeff41",accent3:"#c6ff00",accent4:"#aeea00"},bge={base:"#ffeb3b",lighten5:"#fffde7",lighten4:"#fff9c4",lighten3:"#fff59d",lighten2:"#fff176",lighten1:"#ffee58",darken1:"#fdd835",darken2:"#fbc02d",darken3:"#f9a825",darken4:"#f57f17",accent1:"#ffff8d",accent2:"#ffff00",accent3:"#ffea00",accent4:"#ffd600"},xge={base:"#ffc107",lighten5:"#fff8e1",lighten4:"#ffecb3",lighten3:"#ffe082",lighten2:"#ffd54f",lighten1:"#ffca28",darken1:"#ffb300",darken2:"#ffa000",darken3:"#ff8f00",darken4:"#ff6f00",accent1:"#ffe57f",accent2:"#ffd740",accent3:"#ffc400",accent4:"#ffab00"},wge={base:"#ff9800",lighten5:"#fff3e0",lighten4:"#ffe0b2",lighten3:"#ffcc80",lighten2:"#ffb74d",lighten1:"#ffa726",darken1:"#fb8c00",darken2:"#f57c00",darken3:"#ef6c00",darken4:"#e65100",accent1:"#ffd180",accent2:"#ffab40",accent3:"#ff9100",accent4:"#ff6d00"},Tge={base:"#ff5722",lighten5:"#fbe9e7",lighten4:"#ffccbc",lighten3:"#ffab91",lighten2:"#ff8a65",lighten1:"#ff7043",darken1:"#f4511e",darken2:"#e64a19",darken3:"#d84315",darken4:"#bf360c",accent1:"#ff9e80",accent2:"#ff6e40",accent3:"#ff3d00",accent4:"#dd2c00"},Sge={base:"#795548",lighten5:"#efebe9",lighten4:"#d7ccc8",lighten3:"#bcaaa4",lighten2:"#a1887f",lighten1:"#8d6e63",darken1:"#6d4c41",darken2:"#5d4037",darken3:"#4e342e",darken4:"#3e2723"},Ege={base:"#607d8b",lighten5:"#eceff1",lighten4:"#cfd8dc",lighten3:"#b0bec5",lighten2:"#90a4ae",lighten1:"#78909c",darken1:"#546e7a",darken2:"#455a64",darken3:"#37474f",darken4:"#263238"},Cge={base:"#9e9e9e",lighten5:"#fafafa",lighten4:"#f5f5f5",lighten3:"#eeeeee",lighten2:"#e0e0e0",lighten1:"#bdbdbd",darken1:"#757575",darken2:"#616161",darken3:"#424242",darken4:"#212121"},kge={black:"#000000",white:"#ffffff",transparent:"#ffffff00"},Ige={red:lge,pink:cge,purple:uge,deepPurple:dge,indigo:hge,blue:fge,lightBlue:mge,cyan:pge,teal:gge,green:vge,lightGreen:_ge,lime:yge,yellow:bge,amber:xge,orange:wge,deepOrange:Tge,brown:Sge,blueGrey:Ege,grey:Cge,shades:kge},Age=lt({swatches:{type:Array,default:()=>Pge(Ige)},disabled:Boolean,color:Object,maxHeight:[Number,String],...wn()},"VColorPickerSwatches");function Pge(e){return Object.keys(e).map(t=>{const n=e[t];return n.base?[n.base,n.darken4,n.darken3,n.darken2,n.darken1,n.lighten1,n.lighten2,n.lighten3,n.lighten4,n.lighten5]:[n.black,n.white,n.transparent]})}const Mge=uc({name:"VColorPickerSwatches",props:Age(),emits:{"update:color":e=>!0},setup(e,t){let{emit:n}=t;return Vt(()=>z("div",{class:xt(["v-color-picker-swatches",e.class]),style:Yt([{maxHeight:pn(e.maxHeight)},e.style])},[z("div",null,[e.swatches.map(i=>z("div",{class:"v-color-picker-swatches__swatch"},[i.map(r=>{const a=sc(r),l=P0(a),h=A6(a);return z("div",{class:"v-color-picker-swatches__color",onClick:()=>l&&n("update:color",l)},[z("div",{style:{background:h}},[e.color&&_o(e.color,l)?se(_i,{size:"x-small",icon:"$success",color:Fne(r,"#FFFFFF")>2?"white":"black"},null):void 0])])})]))])])),{}}}),Dge=Ah("v-picker-title"),tS=lt({bgColor:String,divided:Boolean,landscape:Boolean,title:String,hideHeader:Boolean,hideTitle:Boolean,...FP()},"VPicker"),m_=At()({name:"VPicker",props:tS(),setup(e,t){let{slots:n}=t;const{backgroundColorClasses:i,backgroundColorStyles:r}=nr(()=>e.color);return Vt(()=>{const a=uu.filterProps(e),l=!e.hideTitle&&!!(e.title||n.title);return se(uu,It(a,{color:e.bgColor,class:["v-picker",{"v-picker--divided":e.divided,"v-picker--landscape":e.landscape,"v-picker--with-actions":!!n.actions},e.class],style:e.style}),{default:()=>[!e.hideHeader&&z("div",{key:"header",class:xt([i.value]),style:Yt([r.value])},[l&&se(Dge,{key:"picker-title"},{default:()=>[n.title?.()??e.title]}),n.header&&z("div",{class:"v-picker__header"},[n.header()])]),z("div",{class:"v-picker__body"},[n.default?.()]),n.actions&&se(ui,{defaults:{VBtn:{slim:!0,variant:"text"}}},{default:()=>[z("div",{class:"v-picker__actions"},[n.actions()])]})]})}),{}}}),Lge=lt({canvasHeight:{type:[String,Number],default:150},disabled:Boolean,dotSize:{type:[Number,String],default:10},hideCanvas:Boolean,hideSliders:Boolean,hideInputs:Boolean,mode:{type:String,default:"rgba",validator:e=>Object.keys(Bp).includes(e)},modes:{type:Array,default:()=>Object.keys(Bp),validator:e=>Array.isArray(e)&&e.every(t=>Object.keys(Bp).includes(t))},showSwatches:Boolean,swatches:Array,swatchesMaxHeight:{type:[Number,String],default:150},modelValue:{type:[Object,String]},...tS({hideHeader:!0}),...Ol(Rj(),["hideEyeDropper","eyeDropperIcon"])},"VColorPicker"),Rge=uc({name:"VColorPicker",props:Lge(),emits:{"update:modelValue":e=>!0,"update:mode":e=>!0},setup(e,t){let{slots:n}=t;const i=Pn(e,"mode"),r=tt(null),a=Pn(e,"modelValue",void 0,_=>{if(_==null||_==="")return null;let x;try{x=P0(sc(_))}catch{return null}return x},_=>_?ege(_,e.modelValue):null),l=fe(()=>a.value?{...a.value,h:r.value??a.value.h}:null),{rtlClasses:h}=Gs();let s=!0;qt(a,_=>{if(!s){s=!0;return}_&&(r.value=_.h)},{immediate:!0});const p=_=>{s=!1,r.value=_.h,a.value=_};return v_(()=>{e.modes.includes(i.value)||(i.value=e.modes[0])}),es({VSlider:{color:void 0,trackColor:void 0,trackFillColor:void 0}}),Vt(()=>{const _=m_.filterProps(e);return se(m_,It(_,{class:["v-color-picker",h.value,e.class],style:[{"--v-color-picker-color-hsv":P6({...l.value??bv,a:1})},e.style]}),{...n,default:()=>z(un,null,[!e.hideCanvas&&se(Jpe,{key:"canvas",color:l.value,"onUpdate:color":p,disabled:e.disabled,dotSize:e.dotSize,width:e.width,height:e.canvasHeight},null),(!e.hideSliders||!e.hideInputs)&&z("div",{key:"controls",class:"v-color-picker__controls"},[!e.hideSliders&&se(age,{key:"preview",color:l.value,"onUpdate:color":p,hideAlpha:!i.value.endsWith("a"),disabled:e.disabled,hideEyeDropper:e.hideEyeDropper,eyeDropperIcon:e.eyeDropperIcon},null),!e.hideInputs&&se(oge,{key:"edit",modes:e.modes,mode:i.value,"onUpdate:mode":x=>i.value=x,color:l.value,"onUpdate:color":p,disabled:e.disabled},null)]),e.showSwatches&&se(Mge,{key:"swatches",color:l.value,"onUpdate:color":p,maxHeight:e.swatchesMaxHeight,swatches:e.swatches,disabled:e.disabled},null)])})}),{}}}),Oge=lt({alwaysFilter:Boolean,autoSelectFirst:{type:[Boolean,String]},clearOnSelect:{type:Boolean,default:!0},delimiters:Array,...M_({filterKeys:["title"]}),...BP({hideNoData:!0,returnObject:!0}),...dr(j0({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"])},"VCombobox"),Vge=At()({name:"VCombobox",props:Oge(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:search":e=>!0,"update:menu":e=>!0},setup(e,t){let{emit:n,slots:i}=t;const{t:r}=hr(),a=tt(),l=Zt(!1),h=Zt(!0),s=Zt(!1),p=tt(),_=tt(),x=Zt(-1);let T=!1;const{items:k,transformIn:P,transformOut:M}=IP(e),{textColorClasses:R,textColorStyles:F}=Uo(()=>a.value?.color),B=Pn(e,"modelValue",[],he=>P(qr(he)),he=>{const et=M(he);return e.multiple?et:et[0]??null}),H=A_(e),G=fe(()=>!!(e.chips||i.chip)),ee=fe(()=>G.value||!!i.selection),ie=Zt(!e.multiple&&!ee.value?B.value[0]?.title??"":""),J=Zt(null),$=fe({get:()=>ie.value,set:async he=>{if(ie.value=he??"",he===null||he===""&&!e.multiple&&!ee.value?B.value=[]:!e.multiple&&!ee.value&&(B.value=[lu(e,he)],Hn(()=>_.value?.scrollToIndex(0))),he&&e.multiple&&e.delimiters?.length){const et=e.delimiters.map(A1).join("|"),dt=he.split(new RegExp(`(?:${et})+`));if(dt.length>1){for(let Qe of dt)Qe=Qe.trim(),Qe&&(xn(lu(e,Qe)),await Hn());ie.value=""}}he||(x.value=-1),h.value=!he}}),W=fe(()=>typeof e.counterValue=="function"?e.counterValue(B.value):typeof e.counterValue=="number"?e.counterValue:e.multiple?B.value.length:$.value.length),{filteredItems:X,getMatches:re}=D_(e,k,()=>J.value??(e.alwaysFilter||!h.value?$.value:"")),Y=fe(()=>e.hideSelected&&J.value===null?X.value.filter(he=>!B.value.some(et=>et.value===he.value)):X.value),Z=fe(()=>e.hideNoData&&!Y.value.length||H.isReadonly.value||H.isDisabled.value),ge=Pn(e,"menu"),be=fe({get:()=>ge.value,set:he=>{ge.value&&!he&&p.value?.openChildren.size||he&&Z.value||(ge.value=he)}}),{menuId:Be,ariaExpanded:nt,ariaControls:We,ariaLabel:Le}=VP(e,be);qt(ie,he=>{T?Hn(()=>T=!1):l.value&&!be.value&&(be.value=!0),n("update:search",he)}),qt(B,he=>{!e.multiple&&!ee.value&&(ie.value=he[0]?.title??"")});const Ze=fe(()=>B.value.map(he=>he.value)),Ee=fe(()=>(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&$.value===Y.value[0]?.title)&&Y.value.length>0&&!h.value&&!s.value),Je=tt(),it=OP(Je,a);function vt(he){T=!0,Hn(()=>T=!1),e.openOnClear&&(be.value=!0)}function mt(){Z.value||(be.value=!0)}function ot(he){Z.value||(l.value&&(he.preventDefault(),he.stopPropagation()),be.value=!be.value)}function Ye(he){(s_(he)||he.key==="Backspace")&&a.value?.focus()}function ut(he){if(ane(he)||H.isReadonly.value)return;const et=a.value?.selectionStart,dt=B.value.length;if(["Enter","ArrowDown","ArrowUp"].includes(he.key)&&he.preventDefault(),["Enter","ArrowDown"].includes(he.key)&&(be.value=!0),["Escape"].includes(he.key)&&(be.value=!1),Ee.value&&["Enter","Tab"].includes(he.key)&&!B.value.some(Qe=>{let{value:Ct}=Qe;return Ct===Y.value[0].value})&&xn(X.value[0]),he.key==="ArrowDown"&&Ee.value&&Je.value?.focus("next"),he.key==="Enter"&&$.value&&(xn(lu(e,$.value),!0,!0),ee.value&&(ie.value="")),["Backspace","Delete"].includes(he.key)){if(!e.multiple&&ee.value&&B.value.length>0&&!$.value)return xn(B.value[0],!1);if(~x.value){he.preventDefault();const Qe=x.value;xn(B.value[x.value],!1),x.value=Qe>=dt-1?dt-2:Qe}else he.key==="Backspace"&&!$.value&&(x.value=dt-1);return}if(e.multiple)if(he.key==="ArrowLeft"){if(x.value<0&&et&&et>0)return;const Qe=x.value>-1?x.value-1:dt-1;B.value[Qe]?x.value=Qe:(x.value=-1,a.value?.setSelectionRange($.value.length,$.value.length))}else if(he.key==="ArrowRight"){if(x.value<0)return;const Qe=x.value+1;B.value[Qe]?x.value=Qe:(x.value=-1,a.value?.setSelectionRange(0,0))}else~x.value&&s_(he)&&(x.value=-1)}function Ke(){e.eager&&_.value?.calculateVisibleItems()}function jt(){l.value&&a.value?.focus(),h.value=!0,J.value=null}function xn(he){let et=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,dt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(!(!he||he.props.disabled))if(e.multiple){const Qe=B.value.findIndex(Pt=>(e.valueComparator||_o)(Pt.value,he.value)),Ct=et??!~Qe;if(~Qe){const Pt=Ct?[...B.value,he]:[...B.value];Pt.splice(Qe,1),B.value=Pt}else Ct&&(B.value=[...B.value,he]);e.clearOnSelect&&($.value="")}else{const Qe=et!==!1;B.value=Qe?[he]:[],(!h.value||e.alwaysFilter)&&ie.value&&(J.value=ie.value),ie.value=Qe&&!ee.value?he.title:"",Hn(()=>{be.value=dt,h.value=!0})}}function ke(he){l.value=!0,setTimeout(()=>{s.value=!0})}function Ae(he){s.value=!1}return qt(l,(he,et)=>{if(!(he||he===et)&&(x.value=-1,be.value=!1,$.value)){if(e.multiple){xn(lu(e,$.value));return}if(!ee.value)return;B.value.some(dt=>{let{title:Qe}=dt;return Qe===$.value})?ie.value="":xn(lu(e,$.value))}}),qt(be,he=>{if(!e.hideSelected&&he&&B.value.length&&h.value){const et=Y.value.findIndex(dt=>B.value.some(Qe=>(e.valueComparator||_o)(Qe.value,dt.value)));Gi&&window.requestAnimationFrame(()=>{et>=0&&_.value?.scrollToIndex(et)})}he&&(J.value=null)}),qt(k,(he,et)=>{be.value||l.value&&!et.length&&he.length&&(be.value=!0)}),Vt(()=>{const he=!!(!e.hideNoData||Y.value.length||i["prepend-item"]||i["append-item"]||i["no-data"]),et=B.value.length>0,dt=Th.filterProps(e);return se(Th,It({ref:a},dt,{modelValue:$.value,"onUpdate:modelValue":Qe=>$.value=Qe,focused:l.value,"onUpdate:focused":Qe=>l.value=Qe,validationValue:B.externalValue,counterValue:W.value,dirty:et,class:["v-combobox",{"v-combobox--active-menu":be.value,"v-combobox--chips":!!e.chips,"v-combobox--selection-slot":!!ee.value,"v-combobox--selecting-index":x.value>-1,[`v-combobox--${e.multiple?"multiple":"single"}`]:!0},e.class],style:e.style,readonly:H.isReadonly.value,placeholder:et?void 0:e.placeholder,"onClick:clear":vt,"onMousedown:control":mt,onKeydown:ut,"aria-expanded":nt.value,"aria-controls":We.value}),{...i,default:()=>z(un,null,[se(u_,It({id:Be.value,ref:p,modelValue:be.value,"onUpdate:modelValue":Qe=>be.value=Qe,activator:"parent",contentClass:"v-combobox__content",disabled:Z.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,onAfterEnter:Ke,onAfterLeave:jt},e.menuProps),{default:()=>[he&&se(c_,It({ref:Je,filterable:!0,selected:Ze.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:Qe=>Qe.preventDefault(),selectable:!0,onKeydown:Ye,onFocusin:ke,onFocusout:Ae,tabindex:"-1","aria-live":"polite",color:e.itemColor??e.color},it,e.listProps),{default:()=>[i["prepend-item"]?.(),!Y.value.length&&!e.hideNoData&&(i["no-data"]?.()??se(vu,{key:"no-data",title:r(e.noDataText)},null)),se(WT,{ref:_,renderless:!0,items:Y.value,itemKey:"value"},{default:Qe=>{let{item:Ct,index:Pt,itemRef:Bt}=Qe;const Ht=It(Ct.props,{ref:Bt,key:Ct.value,active:Ee.value&&Pt===0?!0:void 0,onClick:()=>xn(Ct,null)});return Ct.type==="divider"?i.divider?.({props:Ct.raw,index:Pt})??se(za,It(Ct.props,{key:`divider-${Pt}`}),null):Ct.type==="subheader"?i.subheader?.({props:Ct.raw,index:Pt})??se(P_,It(Ct.props,{key:`subheader-${Pt}`}),null):i.item?.({item:Ct,index:Pt,props:Ht})??se(vu,It(Ht,{role:"option"}),{prepend:En=>{let{isSelected:Jt}=En;return z(un,null,[e.multiple&&!e.hideSelected?se(hd,{key:Ct.value,modelValue:Jt,ripple:!1,tabindex:"-1",onClick:Mn=>Mn.preventDefault()},null):void 0,Ct.props.prependAvatar&&se(cc,{image:Ct.props.prependAvatar},null),Ct.props.prependIcon&&se(_i,{icon:Ct.props.prependIcon},null)])},title:()=>h.value?Ct.title:Ej("v-combobox",Ct.title,re(Ct)?.title)})}}),i["append-item"]?.()]})]}),B.value.map((Qe,Ct)=>{function Pt(Jt){Jt.stopPropagation(),Jt.preventDefault(),xn(Qe,!1)}const Bt={"onClick:close":Pt,onKeydown(Jt){Jt.key!=="Enter"&&Jt.key!==" "||(Jt.preventDefault(),Jt.stopPropagation(),Pt(Jt))},onMousedown(Jt){Jt.preventDefault(),Jt.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},Ht=G.value?!!i.chip:!!i.selection,En=Ht?RT(G.value?i.chip({item:Qe,index:Ct,props:Bt}):i.selection({item:Qe,index:Ct})):void 0;if(!(Ht&&!En))return z("div",{key:Qe.value,class:xt(["v-combobox__selection",Ct===x.value&&["v-combobox__selection--selected",R.value]]),style:Yt(Ct===x.value?F.value:{})},[G.value?i.chip?se(ui,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:Qe.title}}},{default:()=>[En]}):se(Vo,It({key:"chip",closable:e.closableChips,size:"small",text:Qe.title,disabled:Qe.props.disabled},Bt),null):En??z("span",{class:"v-combobox__selection-text"},[Qe.title,e.multiple&&Ct<B.value.length-1&&z("span",{class:"v-combobox__selection-comma"},[Fn(",")])])])})]),"append-inner":function(){for(var Qe=arguments.length,Ct=new Array(Qe),Pt=0;Pt<Qe;Pt++)Ct[Pt]=arguments[Pt];return z(un,null,[i["append-inner"]?.(...Ct),(!e.hideNoData||e.items.length)&&e.menuIcon?se(_i,{class:"v-combobox__menu-icon",color:a.value?.fieldIconColor,icon:e.menuIcon,onMousedown:ot,onClick:T6,"aria-label":Le.value,title:Le.value,tabindex:"-1"},null):void 0])}})}),xo({isFocused:l,isPristine:h,menu:be,search:$,selectionIndex:x,filteredItems:X,select:xn},a)}}),Bge=lt({modelValue:null,color:String,cancelText:{type:String,default:"$vuetify.confirmEdit.cancel"},okText:{type:String,default:"$vuetify.confirmEdit.ok"},disabled:{type:[Boolean,Array],default:void 0},hideActions:Boolean},"VConfirmEdit"),Fge=At()({name:"VConfirmEdit",props:Bge(),emits:{cancel:()=>!0,save:e=>!0,"update:modelValue":e=>!0},setup(e,t){let{emit:n,slots:i}=t;const r=Pn(e,"modelValue"),a=tt();Ur(()=>{a.value=structuredClone(FV(r.value))});const{t:l}=hr(),h=fe(()=>_o(r.value,a.value));function s(M){return typeof e.disabled=="boolean"?e.disabled:Array.isArray(e.disabled)?e.disabled.includes(M):h.value}const p=fe(()=>s("save")),_=fe(()=>s("cancel"));function x(){r.value=a.value,n("save",a.value)}function T(){a.value=structuredClone(FV(r.value)),n("cancel")}function k(M){return z(un,null,[se(ci,It({disabled:_.value,variant:"text",color:e.color,onClick:T,text:l(e.cancelText)},M),null),se(ci,It({disabled:p.value,variant:"text",color:e.color,onClick:x,text:l(e.okText)},M),null)])}let P=!1;return Vt(()=>z(un,null,[i.default?.({model:a,save:x,cancel:T,isPristine:h.value,get actions(){return P=!0,k}}),!e.hideActions&&!P&&k()])),{save:x,cancel:T,isPristine:h}}}),Oj=lt({expandOnClick:Boolean,showExpand:Boolean,expanded:{type:Array,default:()=>[]}},"DataTable-expand"),Vj=Symbol.for("vuetify:datatable:expanded");function nS(e){const t=Ne(()=>e.expandOnClick),n=Pn(e,"expanded",e.expanded,h=>new Set(h),h=>[...h.values()]);function i(h,s){const p=new Set(n.value),_=$n(h.value);if(s)p.add(_);else{const x=[...n.value].find(T=>$n(T)===_);p.delete(x)}n.value=p}function r(h){const s=$n(h.value);return[...n.value].some(p=>$n(p)===s)}function a(h){i(h,!r(h))}const l={expand:i,expanded:n,expandOnClick:t,isExpanded:r,toggleExpand:a};return Dr(Vj,l),l}function Bj(){const e=wi(Vj);if(!e)throw new Error("foo");return e}const oM=lt({groupBy:{type:Array,default:()=>[]}},"DataTable-group"),Fj=Symbol.for("vuetify:data-table-group");function aM(e){return{groupBy:Pn(e,"groupBy")}}function iS(e){const{disableSort:t,groupBy:n,sortBy:i}=e,r=tt(new Set),a=fe(()=>n.value.map(_=>({..._,order:_.order??!1})).concat(t?.value?[]:i.value));function l(_){return r.value.has(_.id)}function h(_){const x=new Set(r.value);l(_)?x.delete(_.id):x.add(_.id),r.value=x}function s(_){function x(T){const k=[];for(const P of T.items)"type"in P&&P.type==="group"?k.push(...x(P)):k.push(P);return[...new Set(k)]}return x({items:_})}const p={sortByWithGroups:a,toggleGroup:h,opened:r,groupBy:n,extractRows:s,isGroupOpen:l};return Dr(Fj,p),p}function zj(){const e=wi(Fj);if(!e)throw new Error("Missing group!");return e}function zge(e,t){if(!e.length)return[];const n=new Map;for(const i of e){const r=Hp(i.raw,t);n.has(r)||n.set(r,[]),n.get(r).push(i)}return n}function Nj(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"root";if(!t.length)return[];const r=zge(e,t[0]),a=[],l=t.slice(1);return r.forEach((h,s)=>{const p=t[0],_=`${i}_${p}_${s}`;a.push({depth:n,id:_,key:p,value:s,items:l.length?Nj(h,l,n+1,_):h,type:"group"})}),a}function Uj(e,t,n){const i=[];for(const r of e)"type"in r&&r.type==="group"?(r.value!=null&&i.push(r),(t.has(r.id)||r.value==null)&&(i.push(...Uj(r.items,t,n)),n&&i.push({...r,type:"group-summary"}))):i.push(r);return i}function rS(e,t,n,i){return{flatItems:fe(()=>{if(!t.value.length)return e.value;const a=Nj(e.value,t.value.map(l=>l.key));return Uj(a,n.value,Ua(i))})}}function sS(e){let{page:t,itemsPerPage:n,sortBy:i,groupBy:r,search:a}=e;const l=xs("VDataTable"),h=()=>({page:t.value,itemsPerPage:n.value,sortBy:i.value,groupBy:r.value,search:a.value});let s=null;qt(h,p=>{_o(s,p)||(s&&s.search!==p.search&&(t.value=1),l.emit("update:options",p),s=p)},{deep:!0,immediate:!0})}const lM=lt({page:{type:[Number,String],default:1},itemsPerPage:{type:[Number,String],default:10}},"DataTable-paginate"),$j=Symbol.for("vuetify:data-table-pagination");function cM(e){const t=Pn(e,"page",void 0,i=>Number(i??1)),n=Pn(e,"itemsPerPage",void 0,i=>Number(i??10));return{page:t,itemsPerPage:n}}function uM(e){const{page:t,itemsPerPage:n,itemsLength:i}=e,r=fe(()=>n.value===-1?0:n.value*(t.value-1)),a=fe(()=>n.value===-1?i.value:Math.min(i.value,r.value+n.value)),l=fe(()=>n.value===-1||i.value===0?1:Math.ceil(i.value/n.value));qt([t,l],()=>{t.value>l.value&&(t.value=l.value)});function h(T){n.value=T,t.value=1}function s(){t.value=Er(t.value+1,1,l.value)}function p(){t.value=Er(t.value-1,1,l.value)}function _(T){t.value=Er(T,1,l.value)}const x={page:t,itemsPerPage:n,startIndex:r,stopIndex:a,pageCount:l,itemsLength:i,nextPage:s,prevPage:p,setPage:_,setItemsPerPage:h};return Dr($j,x),x}function Nge(){const e=wi($j);if(!e)throw new Error("Missing pagination!");return e}function jj(e){const t=xs("usePaginatedItems"),{items:n,startIndex:i,stopIndex:r,itemsPerPage:a}=e,l=fe(()=>a.value<=0?n.value:n.value.slice(i.value,r.value));return qt(l,h=>{t.emit("update:currentItems",h)},{immediate:!0}),{paginatedItems:l}}const Uge={showSelectAll:!1,allSelected:()=>[],select:e=>{let{items:t,value:n}=e;return new Set(n?[t[0]?.value]:[])},selectAll:e=>{let{selected:t}=e;return t}},Wj={showSelectAll:!0,allSelected:e=>{let{currentPage:t}=e;return t},select:e=>{let{items:t,value:n,selected:i}=e;for(const r of t)n?i.add(r.value):i.delete(r.value);return i},selectAll:e=>{let{value:t,currentPage:n,selected:i}=e;return Wj.select({items:n,value:t,selected:i})}},$ge={showSelectAll:!0,allSelected:e=>{let{allItems:t}=e;return t},select:e=>{let{items:t,value:n,selected:i}=e;for(const r of t)n?i.add(r.value):i.delete(r.value);return i},selectAll:e=>{let{value:t,allItems:n}=e;return new Set(t?n.map(i=>i.value):[])}},Hj=lt({showSelect:Boolean,selectStrategy:{type:[String,Object],default:"page"},modelValue:{type:Array,default:()=>[]},valueComparator:Function},"DataTable-select"),Gj=Symbol.for("vuetify:data-table-selection");function oS(e,t){let{allItems:n,currentPage:i}=t;const r=Pn(e,"modelValue",e.modelValue,B=>{const H=e.valueComparator;return H?new Set(qr(B).map(G=>n.value.find(ee=>H(G,ee.value))?.value??G)):new Set(qr(B).map(G=>sm(G)?n.value.find(ee=>G===ee.value)?.value??G:n.value.find(ee=>_o(G,ee.value))?.value??G))},B=>[...B.values()]),a=fe(()=>n.value.filter(B=>B.selectable)),l=fe(()=>i.value.filter(B=>B.selectable)),h=fe(()=>{if(typeof e.selectStrategy=="object")return e.selectStrategy;switch(e.selectStrategy){case"single":return Uge;case"all":return $ge;case"page":default:return Wj}}),s=Zt(null);function p(B){return qr(B).every(H=>r.value.has(H.value))}function _(B){return qr(B).some(H=>r.value.has(H.value))}function x(B,H){const G=h.value.select({items:B,value:H,selected:new Set(r.value)});r.value=G}function T(B,H,G){const ee=[];if(H=H??i.value.findIndex(ie=>ie.value===B.value),e.selectStrategy!=="single"&&G?.shiftKey&&s.value!==null){const[ie,J]=[s.value,H].sort(($,W)=>$-W);ee.push(...i.value.slice(ie,J+1).filter($=>$.selectable))}else ee.push(B),s.value=H;x(ee,!p([B]))}function k(B){const H=h.value.selectAll({value:B,allItems:a.value,currentPage:l.value,selected:new Set(r.value)});r.value=H}const P=fe(()=>r.value.size>0),M=fe(()=>{const B=h.value.allSelected({allItems:a.value,currentPage:l.value});return!!B.length&&p(B)}),R=Ne(()=>h.value.showSelectAll),F={toggleSelect:T,select:x,selectAll:k,isSelected:p,isSomeSelected:_,someSelected:P,allSelected:M,showSelectAll:R,lastSelectedIndex:s,selectStrategy:h};return Dr(Gj,F),F}function aS(){const e=wi(Gj);if(!e)throw new Error("Missing selection!");return e}const qj=lt({sortBy:{type:Array,default:()=>[]},customKeySort:Object,multiSort:Boolean,mustSort:Boolean},"DataTable-sort"),Kj=Symbol.for("vuetify:data-table-sort");function lS(e){const t=Pn(e,"sortBy"),n=Ne(()=>e.mustSort),i=Ne(()=>e.multiSort);return{sortBy:t,mustSort:n,multiSort:i}}function cS(e){const{sortBy:t,mustSort:n,multiSort:i,page:r}=e,a=s=>{if(s.key==null)return;let p=t.value.map(x=>({...x}))??[];const _=p.find(x=>x.key===s.key);_?_.order==="desc"?n.value&&p.length===1?_.order="asc":p=p.filter(x=>x.key!==s.key):_.order="desc":i.value?p.push({key:s.key,order:"asc"}):p=[{key:s.key,order:"asc"}],t.value=p,r&&(r.value=1)};function l(s){return!!t.value.find(p=>p.key===s.key)}const h={sortBy:t,toggleSort:a,isSorted:l};return Dr(Kj,h),h}function Xj(){const e=wi(Kj);if(!e)throw new Error("Missing sort!");return e}function dM(e,t,n,i){const r=hr();return{sortedItems:fe(()=>n.value.length?jge(t.value,n.value,r.current.value,{transform:i?.transform,sortFunctions:{...e.customKeySort,...i?.sortFunctions?.value},sortRawFunctions:i?.sortRawFunctions?.value}):t.value)}}function jge(e,t,n,i){const r=new Intl.Collator(n,{sensitivity:"accent",usage:"sort"});return e.map(l=>[l,i?.transform?i.transform(l):l]).sort((l,h)=>{for(let s=0;s<t.length;s++){let p=!1;const _=t[s].key,x=t[s].order??"asc";if(x===!1)continue;let T=Hp(l[1],_),k=Hp(h[1],_),P=l[0].raw,M=h[0].raw;if(x==="desc"&&([T,k]=[k,T],[P,M]=[M,P]),i?.sortRawFunctions?.[_]){const R=i.sortRawFunctions[_](P,M);if(R==null)continue;if(p=!0,R)return R}if(i?.sortFunctions?.[_]){const R=i.sortFunctions[_](T,k);if(R==null)continue;if(p=!0,R)return R}if(!p&&(T instanceof Date&&k instanceof Date&&(T=T.getTime(),k=k.getTime()),[T,k]=[T,k].map(R=>R!=null?R.toString().toLocaleLowerCase():R),T!==k))return Gx(T)&&Gx(k)?0:Gx(T)?-1:Gx(k)?1:!isNaN(T)&&!isNaN(k)?Number(T)-Number(k):r.compare(T,k)}return 0}).map(l=>{let[h]=l;return h})}const Wge=lt({items:{type:Array,default:()=>[]},itemValue:{type:[String,Array,Function],default:"id"},itemSelectable:{type:[String,Array,Function],default:null},returnObject:Boolean},"DataIterator-items");function Hge(e,t){const n=e.returnObject?t:Ms(t,e.itemValue),i=Ms(t,e.itemSelectable,!0);return{type:"item",value:n,selectable:i,raw:t}}function Gge(e,t){const n=[];for(const i of t)n.push(Hge(e,i));return n}function qge(e){return{items:fe(()=>Gge(e,e.items))}}const Kge=lt({search:String,loading:Boolean,...wn(),...Wge(),...Hj(),...qj(),...lM({itemsPerPage:5}),...Oj(),...oM(),...M_(),...ti(),...Mh({transition:{component:l_,hideOnLeave:!0}})},"VDataIterator"),Xge=At()({name:"VDataIterator",props:Kge(),emits:{"update:modelValue":e=>!0,"update:groupBy":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:expanded":e=>!0,"update:currentItems":e=>!0},setup(e,t){let{slots:n}=t;const i=Pn(e,"groupBy"),r=Ne(()=>e.search),{items:a}=qge(e),{filteredItems:l}=D_(e,a,r,{transform:Ee=>Ee.raw}),{sortBy:h,multiSort:s,mustSort:p}=lS(e),{page:_,itemsPerPage:x}=cM(e),{toggleSort:T}=cS({sortBy:h,multiSort:s,mustSort:p,page:_}),{sortByWithGroups:k,opened:P,extractRows:M,isGroupOpen:R,toggleGroup:F}=iS({groupBy:i,sortBy:h}),{sortedItems:B}=dM(e,l,k,{transform:Ee=>Ee.raw}),{flatItems:H}=rS(B,i,P,!1),G=Ne(()=>H.value.length),{startIndex:ee,stopIndex:ie,pageCount:J,prevPage:$,nextPage:W,setItemsPerPage:X,setPage:re}=uM({page:_,itemsPerPage:x,itemsLength:G}),{paginatedItems:Y}=jj({items:H,startIndex:ee,stopIndex:ie,itemsPerPage:x}),Z=fe(()=>M(Y.value)),{isSelected:ge,select:be,selectAll:Be,toggleSelect:nt}=oS(e,{allItems:a,currentPage:Z}),{isExpanded:We,toggleExpand:Le}=nS(e);sS({page:_,itemsPerPage:x,sortBy:h,groupBy:i,search:r});const Ze=fe(()=>({page:_.value,itemsPerPage:x.value,sortBy:h.value,pageCount:J.value,toggleSort:T,prevPage:$,nextPage:W,setPage:re,setItemsPerPage:X,isSelected:ge,select:be,selectAll:Be,toggleSelect:nt,isExpanded:We,toggleExpand:Le,isGroupOpen:R,toggleGroup:F,items:Z.value,itemsCount:l.value.length,groupedItems:Y.value}));return Vt(()=>se(e.tag,{class:xt(["v-data-iterator",{"v-data-iterator--loading":e.loading},e.class]),style:Yt(e.style)},{default:()=>[n.header?.(Ze.value),se(Fa,{transition:e.transition},{default:()=>[e.loading?se(V0,{key:"loader",name:"v-data-iterator",active:!0},{default:Ee=>n.loader?.(Ee)}):z("div",{key:"items"},[Y.value.length?n.default?.(Ze.value):n["no-data"]?.()])]}),n.footer?.(Ze.value)]})),{}}});function Yge(){const e=tt([]);rz(()=>e.value=[]);function t(n,i){e.value[i]=n}return{refs:e,updateRef:t}}const Zge=lt({activeColor:String,start:{type:[Number,String],default:1},modelValue:{type:Number,default:e=>e.start},disabled:Boolean,length:{type:[Number,String],default:1,validator:e=>e%1===0},totalVisible:[Number,String],firstIcon:{type:kn,default:"$first"},prevIcon:{type:kn,default:"$prev"},nextIcon:{type:kn,default:"$next"},lastIcon:{type:kn,default:"$last"},ariaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.root"},pageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.page"},currentPageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.currentPage"},firstAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.first"},previousAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.previous"},nextAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.next"},lastAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.last"},ellipsis:{type:String,default:"..."},showFirstLastPage:Boolean,...cl(),...wn(),...ws(),...qs(),...$r(),...gd(),...ti({tag:"nav"}),...Ai(),...Nc({variant:"text"})},"VPagination"),fI=At()({name:"VPagination",props:Zge(),emits:{"update:modelValue":e=>!0,first:e=>!0,prev:e=>!0,next:e=>!0,last:e=>!0},setup(e,t){let{slots:n,emit:i}=t;const r=Pn(e,"modelValue"),{t:a,n:l}=hr(),{isRtl:h}=Gs(),{themeClasses:s}=Zi(e),{width:p}=Vl(),_=Zt(-1);es(void 0,{scoped:!0});const{resizeRef:x}=zc($=>{if(!$.length)return;const{target:W,contentRect:X}=$[0],re=W.querySelector(".v-pagination__list > *");if(!re)return;const Y=X.width,Z=re.offsetWidth+parseFloat(getComputedStyle(re).marginRight)*2;_.value=M(Y,Z)}),T=fe(()=>parseInt(e.length,10)),k=fe(()=>parseInt(e.start,10)),P=fe(()=>e.totalVisible!=null?parseInt(e.totalVisible,10):_.value>=0?_.value:M(p.value,58));function M($,W){const X=e.showFirstLastPage?5:3;return Math.max(0,Math.floor(Number((($-W*X)/W).toFixed(2))))}const R=fe(()=>{if(T.value<=0||isNaN(T.value)||T.value>Number.MAX_SAFE_INTEGER)return[];if(P.value<=0)return[];if(P.value===1)return[r.value];if(T.value<=P.value)return rc(T.value,k.value);const $=P.value%2===0,W=$?P.value/2:Math.floor(P.value/2),X=$?W:W+1,re=T.value-W;if(X-r.value>=0)return[...rc(Math.max(1,P.value-1),k.value),e.ellipsis,T.value];if(r.value-re>=($?1:0)){const Y=P.value-1,Z=T.value-Y+k.value;return[k.value,e.ellipsis,...rc(Y,Z)]}else{const Y=Math.max(1,P.value-2),Z=Y===1?r.value:r.value-Math.ceil(Y/2)+k.value;return[k.value,e.ellipsis,...rc(Y,Z),e.ellipsis,T.value]}});function F($,W,X){$.preventDefault(),r.value=W,X&&i(X,W)}const{refs:B,updateRef:H}=Yge();es({VPaginationBtn:{color:Ne(()=>e.color),border:Ne(()=>e.border),density:Ne(()=>e.density),size:Ne(()=>e.size),variant:Ne(()=>e.variant),rounded:Ne(()=>e.rounded),elevation:Ne(()=>e.elevation)}});const G=fe(()=>R.value.map(($,W)=>{const X=re=>H(re,W);if(typeof $=="string")return{isActive:!1,key:`ellipsis-${W}`,page:$,props:{ref:X,ellipsis:!0,icon:!0,disabled:!0}};{const re=$===r.value;return{isActive:re,key:$,page:l($),props:{ref:X,ellipsis:!1,icon:!0,disabled:!!e.disabled||Number(e.length)<2,color:re?e.activeColor:e.color,"aria-current":re,"aria-label":a(re?e.currentPageAriaLabel:e.pageAriaLabel,$),onClick:Y=>F(Y,$)}}}})),ee=fe(()=>{const $=!!e.disabled||r.value<=k.value,W=!!e.disabled||r.value>=k.value+T.value-1;return{first:e.showFirstLastPage?{icon:h.value?e.lastIcon:e.firstIcon,onClick:X=>F(X,k.value,"first"),disabled:$,"aria-label":a(e.firstAriaLabel),"aria-disabled":$}:void 0,prev:{icon:h.value?e.nextIcon:e.prevIcon,onClick:X=>F(X,r.value-1,"prev"),disabled:$,"aria-label":a(e.previousAriaLabel),"aria-disabled":$},next:{icon:h.value?e.prevIcon:e.nextIcon,onClick:X=>F(X,r.value+1,"next"),disabled:W,"aria-label":a(e.nextAriaLabel),"aria-disabled":W},last:e.showFirstLastPage?{icon:h.value?e.firstIcon:e.lastIcon,onClick:X=>F(X,k.value+T.value-1,"last"),disabled:W,"aria-label":a(e.lastAriaLabel),"aria-disabled":W}:void 0}});function ie(){const $=r.value-k.value;B.value[$]?.$el.focus()}function J($){$.key===Mk.left&&!e.disabled&&r.value>Number(e.start)?(r.value=r.value-1,Hn(ie)):$.key===Mk.right&&!e.disabled&&r.value<k.value+T.value-1&&(r.value=r.value+1,Hn(ie))}return Vt(()=>se(e.tag,{ref:x,class:xt(["v-pagination",s.value,e.class]),style:Yt(e.style),role:"navigation","aria-label":a(e.ariaLabel),onKeydown:J,"data-test":"v-pagination-root"},{default:()=>[z("ul",{class:"v-pagination__list"},[e.showFirstLastPage&&z("li",{key:"first",class:"v-pagination__first","data-test":"v-pagination-first"},[n.first?n.first(ee.value.first):se(ci,It({_as:"VPaginationBtn"},ee.value.first),null)]),z("li",{key:"prev",class:"v-pagination__prev","data-test":"v-pagination-prev"},[n.prev?n.prev(ee.value.prev):se(ci,It({_as:"VPaginationBtn"},ee.value.prev),null)]),G.value.map(($,W)=>z("li",{key:$.key,class:xt(["v-pagination__item",{"v-pagination__item--is-active":$.isActive}]),"data-test":"v-pagination-item"},[n.item?n.item($):se(ci,It({_as:"VPaginationBtn"},$.props),{default:()=>[$.page]})])),z("li",{key:"next",class:"v-pagination__next","data-test":"v-pagination-next"},[n.next?n.next(ee.value.next):se(ci,It({_as:"VPaginationBtn"},ee.value.next),null)]),e.showFirstLastPage&&z("li",{key:"last",class:"v-pagination__last","data-test":"v-pagination-last"},[n.last?n.last(ee.value.last):se(ci,It({_as:"VPaginationBtn"},ee.value.last),null)])])]})),{}}}),hM=lt({prevIcon:{type:kn,default:"$prev"},nextIcon:{type:kn,default:"$next"},firstIcon:{type:kn,default:"$first"},lastIcon:{type:kn,default:"$last"},itemsPerPageText:{type:String,default:"$vuetify.dataFooter.itemsPerPageText"},pageText:{type:String,default:"$vuetify.dataFooter.pageText"},firstPageLabel:{type:String,default:"$vuetify.dataFooter.firstPage"},prevPageLabel:{type:String,default:"$vuetify.dataFooter.prevPage"},nextPageLabel:{type:String,default:"$vuetify.dataFooter.nextPage"},lastPageLabel:{type:String,default:"$vuetify.dataFooter.lastPage"},itemsPerPageOptions:{type:Array,default:()=>[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}]},showCurrentPage:Boolean},"VDataTableFooter"),a0=At()({name:"VDataTableFooter",props:hM(),setup(e,t){let{slots:n}=t;const{t:i}=hr(),{page:r,pageCount:a,startIndex:l,stopIndex:h,itemsLength:s,itemsPerPage:p,setItemsPerPage:_}=Nge(),x=fe(()=>e.itemsPerPageOptions.map(T=>typeof T=="number"?{value:T,title:T===-1?i("$vuetify.dataFooter.itemsPerPageAll"):String(T)}:{...T,title:isNaN(Number(T.title))?i(T.title):T.title}));return Vt(()=>{const T=fI.filterProps(e);return z("div",{class:"v-data-table-footer"},[n.prepend?.(),z("div",{class:"v-data-table-footer__items-per-page"},[z("span",{"aria-label":i(e.itemsPerPageText)},[i(e.itemsPerPageText)]),se(Hf,{items:x.value,modelValue:p.value,"onUpdate:modelValue":k=>_(Number(k)),density:"compact",variant:"outlined",hideDetails:!0},null)]),z("div",{class:"v-data-table-footer__info"},[z("div",null,[i(e.pageText,s.value?l.value+1:0,h.value,s.value)])]),z("div",{class:"v-data-table-footer__pagination"},[se(fI,It({modelValue:r.value,"onUpdate:modelValue":k=>r.value=k,density:"comfortable",firstAriaLabel:e.firstPageLabel,lastAriaLabel:e.lastPageLabel,length:a.value,nextAriaLabel:e.nextPageLabel,previousAriaLabel:e.prevPageLabel,rounded:!0,showFirstLastPage:!0,totalVisible:e.showCurrentPage?1:0,variant:"plain"},T),null)])])}),{}}}),l0=jne({align:{type:String,default:"start"},fixed:{type:[Boolean,String],default:!1},fixedOffset:[Number,String],fixedEndOffset:[Number,String],height:[Number,String],lastFixed:Boolean,firstFixedEnd:Boolean,noPadding:Boolean,indent:[Number,String],empty:Boolean,tag:String,width:[Number,String],maxWidth:[Number,String],nowrap:Boolean},(e,t)=>{let{slots:n}=t;const i=e.tag??"td",r=typeof e.fixed=="string"?e.fixed:e.fixed?"start":"none";return se(i,{class:xt(["v-data-table__td",{"v-data-table-column--fixed":r==="start","v-data-table-column--fixed-end":r==="end","v-data-table-column--last-fixed":e.lastFixed,"v-data-table-column--first-fixed-end":e.firstFixedEnd,"v-data-table-column--no-padding":e.noPadding,"v-data-table-column--nowrap":e.nowrap,"v-data-table-column--empty":e.empty},`v-data-table-column--align-${e.align}`]),style:{height:pn(e.height),width:pn(e.width),maxWidth:pn(e.maxWidth),left:r==="start"?pn(e.fixedOffset||null):void 0,right:r==="end"?pn(e.fixedEndOffset||null):void 0,paddingInlineStart:e.indent?pn(e.indent):void 0}},{default:()=>[n.default?.()]})}),Jge=lt({headers:Array},"DataTable-header"),Yj=Symbol.for("vuetify:data-table-headers"),Zj={title:"",sortable:!1},Qge={...Zj,width:48};function eve(){const t=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).map(n=>({element:n,priority:0}));return{enqueue:(n,i)=>{let r=!1;for(let a=0;a<t.length;a++)if(t[a].priority>i){t.splice(a,0,{element:n,priority:i}),r=!0;break}r||t.push({element:n,priority:i})},size:()=>t.length,count:()=>{let n=0;if(!t.length)return 0;const i=Math.floor(t[0].priority);for(let r=0;r<t.length;r++)Math.floor(t[r].priority)===i&&(n+=1);return n},dequeue:()=>t.shift()}}function mI(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];if(!e.children)t.push(e);else for(const n of e.children)mI(n,t);return t}function Jj(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new Set;for(const n of e)n.key&&t.add(n.key),n.children&&Jj(n.children,t);return t}function tve(e){if(e.key){if(e.key==="data-table-group")return Zj;if(["data-table-expand","data-table-select"].includes(e.key))return Qge}}function fM(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.children?Math.max(t,...e.children.map(n=>fM(n,t+1))):t}function nve(e){let t=!1;function n(a,l){let h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"none";if(a)if(h!=="none"&&(a.fixed=h),a.fixed===!0&&(a.fixed="start"),a.fixed===l)if(a.children)if(l==="start")for(let s=a.children.length-1;s>=0;s--)n(a.children[s],l,l);else for(let s=0;s<a.children.length;s++)n(a.children[s],l,l);else!t&&l==="start"?a.lastFixed=!0:!t&&l==="end"?a.firstFixedEnd=!0:isNaN(Number(a.width))?(`${a.key}`,void 0):a.minWidth=Math.max(Number(a.width)||0,Number(a.minWidth)||0),t=!0;else if(a.children)if(l==="start")for(let s=a.children.length-1;s>=0;s--)n(a.children[s],l);else for(let s=0;s<a.children.length;s++)n(a.children[s],l);else t=!1}for(let a=e.length-1;a>=0;a--)n(e[a],"start");for(let a=0;a<e.length;a++)n(e[a],"end");let i=0;for(let a=0;a<e.length;a++)i=Qj(e[a],i);let r=0;for(let a=e.length-1;a>=0;a--)r=e9(e[a],r)}function Qj(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!e)return t;if(e.children){e.fixedOffset=t;for(const n of e.children)t=Qj(n,t)}else e.fixed&&e.fixed!=="end"&&(e.fixedOffset=t,t+=parseFloat(e.width||"0")||0);return t}function e9(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!e)return t;if(e.children){e.fixedEndOffset=t;for(const n of e.children)t=e9(n,t)}else e.fixed==="end"&&(e.fixedEndOffset=t,t+=parseFloat(e.width||"0")||0);return t}function ive(e,t){const n=[];let i=0;const r=eve(e);for(;r.size()>0;){let l=r.count();const h=[];let s=1;for(;l>0;){const{element:p,priority:_}=r.dequeue(),x=t-i-fM(p);if(h.push({...p,rowspan:x??1,colspan:p.children?mI(p).length:1}),p.children)for(const T of p.children){const k=_%1+s/Math.pow(10,i+2);r.enqueue(T,i+x+k)}s+=1,l-=1}i+=1,n.push(h)}return{columns:e.map(l=>mI(l)).flat(),headers:n}}function t9(e){const t=[];for(const n of e){const i={...tve(n),...n},r=i.key??(typeof i.value=="string"?i.value:null),a=i.value??r??null,l={...i,key:r,value:a,sortable:i.sortable??(i.key!=null||!!i.sort),children:i.children?t9(i.children):void 0};t.push(l)}return t}function mM(e,t){const n=tt([]),i=tt([]),r=tt({}),a=tt({}),l=tt({});Ur(()=>{const p=(e.headers||Object.keys(e.items[0]??{}).map(M=>({key:M,title:md(M)}))).slice(),_=Jj(p);t?.groupBy?.value.length&&!_.has("data-table-group")&&p.unshift({key:"data-table-group",title:"Group"}),t?.showSelect?.value&&!_.has("data-table-select")&&p.unshift({key:"data-table-select"}),t?.showExpand?.value&&!_.has("data-table-expand")&&p.push({key:"data-table-expand"});const x=t9(p);nve(x);const T=Math.max(...x.map(M=>fM(M)))+1,k=ive(x,T);n.value=k.headers,i.value=k.columns;const P=k.headers.flat(1);for(const M of P)M.key&&(M.sortable&&(M.sort&&(r.value[M.key]=M.sort),M.sortRaw&&(a.value[M.key]=M.sortRaw)),M.filter&&(l.value[M.key]=M.filter))});const h={headers:n,columns:i,sortFunctions:r,sortRawFunctions:a,filterFunctions:l};return Dr(Yj,h),h}function uS(){const e=wi(Yj);if(!e)throw new Error("Missing headers!");return e}const n9=lt({color:String,disableSort:Boolean,fixedHeader:Boolean,multiSort:Boolean,sortAscIcon:{type:kn,default:"$sortAsc"},sortDescIcon:{type:kn,default:"$sortDesc"},headerProps:{type:Object},sticky:Boolean,...ws(),...sg(),...zT()},"VDataTableHeaders"),Zp=At()({name:"VDataTableHeaders",props:n9(),setup(e,t){let{slots:n}=t;const{t:i}=hr(),{toggleSort:r,sortBy:a,isSorted:l}=Xj(),{someSelected:h,allSelected:s,selectAll:p,showSelectAll:_}=aS(),{columns:x,headers:T}=uS(),{loaderClasses:k}=O0(e);function P(W,X){if(!(e.sticky||e.fixedHeader)&&!W.fixed)return;const re=typeof W.fixed=="string"?W.fixed:W.fixed?"start":"none";return{position:"sticky",left:re==="start"?pn(W.fixedOffset):void 0,right:re==="end"?pn(W.fixedEndOffset):void 0,top:e.sticky||e.fixedHeader?`calc(var(--v-table-header-height) * ${X})`:void 0}}function M(W,X){W.key==="Enter"&&!e.disableSort&&r(X)}function R(W){const X=a.value.find(re=>re.key===W.key);return X?X.order==="asc"?e.sortAscIcon:e.sortDescIcon:e.sortAscIcon}const{backgroundColorClasses:F,backgroundColorStyles:B}=nr(()=>e.color),{displayClasses:H,mobile:G}=Vl(e),ee=fe(()=>({headers:T.value,columns:x.value,toggleSort:r,isSorted:l,sortBy:a.value,someSelected:h.value,allSelected:s.value,selectAll:p,getSortIcon:R})),ie=fe(()=>["v-data-table__th",{"v-data-table__th--sticky":e.sticky||e.fixedHeader},H.value,k.value]),J=W=>{let{column:X,x:re,y:Y}=W;const Z=X.key==="data-table-select"||X.key==="data-table-expand",ge=X.key==="data-table-group"&&X.width===0&&!X.title,be=It(e.headerProps??{},X.headerProps??{});return se(l0,It({tag:"th",align:X.align,class:[{"v-data-table__th--sortable":X.sortable&&!e.disableSort,"v-data-table__th--sorted":l(X),"v-data-table__th--fixed":X.fixed},...ie.value],style:{width:pn(X.width),minWidth:pn(X.minWidth),maxWidth:pn(X.maxWidth),...P(X,Y)},colspan:X.colspan,rowspan:X.rowspan,fixed:X.fixed,nowrap:X.nowrap,lastFixed:X.lastFixed,firstFixedEnd:X.firstFixedEnd,noPadding:Z,empty:ge,tabindex:X.sortable?0:void 0,onClick:X.sortable?()=>r(X):void 0,onKeydown:X.sortable?Be=>M(Be,X):void 0},be),{default:()=>{const Be=`header.${X.key}`,nt={column:X,selectAll:p,isSorted:l,toggleSort:r,sortBy:a.value,someSelected:h.value,allSelected:s.value,getSortIcon:R};return n[Be]?n[Be](nt):ge?"":X.key==="data-table-select"?n["header.data-table-select"]?.(nt)??(_.value&&se(hd,{density:e.density,modelValue:s.value,indeterminate:h.value&&!s.value,"onUpdate:modelValue":p},null)):z("div",{class:"v-data-table-header__content"},[z("span",null,[X.title]),X.sortable&&!e.disableSort&&se(_i,{key:"icon",class:"v-data-table-header__sort-icon",icon:R(X)},null),e.multiSort&&l(X)&&z("div",{key:"badge",class:xt(["v-data-table-header__sort-badge",...F.value]),style:Yt(B.value)},[a.value.findIndex(We=>We.key===X.key)+1])])}})},$=()=>{const W=fe(()=>x.value.filter(re=>re?.sortable&&!e.disableSort)),X=fe(()=>{if(x.value.find(Y=>Y.key==="data-table-select")!=null)return s.value?"$checkboxOn":h.value?"$checkboxIndeterminate":"$checkboxOff"});return se(l0,It({tag:"th",class:[...ie.value],colspan:T.value.length+1},e.headerProps),{default:()=>[z("div",{class:"v-data-table-header__content"},[se(Hf,{chips:!0,class:"v-data-table__td-sort-select",clearable:!0,density:"default",items:W.value,label:i("$vuetify.dataTable.sortBy"),multiple:e.multiSort,variant:"underlined","onClick:clear":()=>a.value=[],appendIcon:X.value,"onClick:append":()=>p(!s.value)},{chip:re=>se(Vo,{onClick:re.item.raw?.sortable?()=>r(re.item.raw):void 0,onMousedown:Y=>{Y.preventDefault(),Y.stopPropagation()}},{default:()=>[re.item.title,se(_i,{class:xt(["v-data-table__td-sort-icon",l(re.item.raw)&&"v-data-table__td-sort-icon-active"]),icon:R(re.item.raw),size:"small"},null)]})})])]})};Vt(()=>G.value?z("tr",null,[se($,null,null)]):z(un,null,[n.headers?n.headers(ee.value):T.value.map((W,X)=>z("tr",null,[W.map((re,Y)=>se(J,{column:re,x:Y,y:X},null))])),e.loading&&z("tr",{class:"v-data-table-progress"},[z("th",{colspan:x.value.length},[se(V0,{name:"v-data-table-progress",absolute:!0,active:!0,color:typeof e.loading=="boolean"?void 0:e.loading,indeterminate:!0},{default:n.loader})])])]))}}),i9=lt({item:{type:Object,required:!0},groupCollapseIcon:{type:kn,default:"$tableGroupCollapse"},groupExpandIcon:{type:kn,default:"$tableGroupExpand"},...ws()},"VDataTableGroupHeaderRow"),rve=At()({name:"VDataTableGroupHeaderRow",props:i9(),setup(e,t){let{slots:n}=t;const{isGroupOpen:i,toggleGroup:r,extractRows:a}=zj(),{isSelected:l,isSomeSelected:h,select:s}=aS(),{columns:p}=uS(),_=fe(()=>a([e.item])),x=Ne(()=>p.value.length-(p.value.some(T=>T.key==="data-table-select")?1:0));return()=>z("tr",{class:"v-data-table-group-header-row",style:{"--v-data-table-group-header-row-depth":e.item.depth}},[p.value.map(T=>{if(T.key==="data-table-group"){const k=i(e.item)?e.groupCollapseIcon:e.groupExpandIcon,P=()=>r(e.item);return n["data-table-group"]?.({item:e.item,count:_.value.length,props:{icon:k,onClick:P}})??se(l0,{class:"v-data-table-group-header-row__column",colspan:x.value},{default:()=>[se(ci,{size:"small",variant:"text",icon:k,onClick:P},null),z("span",null,[e.item.value]),z("span",null,[Fn("("),_.value.length,Fn(")")])]})}else if(T.key==="data-table-select"){const k=l(_.value),P=h(_.value)&&!k,M=R=>s(_.value,R);return n["data-table-select"]?.({props:{modelValue:k,indeterminate:P,"onUpdate:modelValue":M}})??se(l0,{class:"v-data-table__td--select-row",noPadding:!0},{default:()=>[se(hd,{density:e.density,modelValue:k,indeterminate:P,"onUpdate:modelValue":M},null)]})}return""})])}}),r9=lt({index:Number,item:Object,cellProps:[Object,Function],collapseIcon:{type:kn,default:"$collapse"},expandIcon:{type:kn,default:"$expand"},onClick:Fo(),onContextmenu:Fo(),onDblclick:Fo(),...ws(),...sg()},"VDataTableRow"),pM=At()({name:"VDataTableRow",props:r9(),setup(e,t){let{slots:n}=t;const{displayClasses:i,mobile:r}=Vl(e,"v-data-table__tr"),{isSelected:a,toggleSelect:l,someSelected:h,allSelected:s,selectAll:p}=aS(),{isExpanded:_,toggleExpand:x}=Bj(),{toggleSort:T,sortBy:k,isSorted:P}=Xj(),{columns:M}=uS();Vt(()=>z("tr",{class:xt(["v-data-table__tr",{"v-data-table__tr--clickable":!!(e.onClick||e.onContextmenu||e.onDblclick)},i.value]),onClick:e.onClick,onContextmenu:e.onContextmenu,onDblclick:e.onDblclick},[e.item&&M.value.map((R,F)=>{const B=e.item,H=`item.${R.key}`,G=`header.${R.key}`,ee={index:e.index,item:B.raw,internalItem:B,value:Hp(B.columns,R.key),column:R,isSelected:a,toggleSelect:l,isExpanded:_,toggleExpand:x},ie={column:R,selectAll:p,isSorted:P,toggleSort:T,sortBy:k.value,someSelected:h.value,allSelected:s.value,getSortIcon:()=>""},J=typeof e.cellProps=="function"?e.cellProps({index:ee.index,item:ee.item,internalItem:ee.internalItem,value:ee.value,column:R}):e.cellProps,$=typeof R.cellProps=="function"?R.cellProps({index:ee.index,item:ee.item,internalItem:ee.internalItem,value:ee.value}):R.cellProps,W=R.key==="data-table-select"||R.key==="data-table-expand",X=R.key==="data-table-group"&&R.width===0&&!R.title;return se(l0,It({align:R.align,indent:R.intent,class:{"v-data-table__td--expanded-row":R.key==="data-table-expand","v-data-table__td--select-row":R.key==="data-table-select"},fixed:R.fixed,fixedOffset:R.fixedOffset,fixedEndOffset:R.fixedEndOffset,lastFixed:R.lastFixed,firstFixedEnd:R.firstFixedEnd,maxWidth:r.value?void 0:R.maxWidth,noPadding:W,empty:X,nowrap:R.nowrap,width:r.value?void 0:R.width},J,$),{default:()=>{if(R.key==="data-table-select")return n["item.data-table-select"]?.({...ee,props:{disabled:!B.selectable,modelValue:a([B]),onClick:ol(()=>l(B),["stop"])}})??se(hd,{disabled:!B.selectable,density:e.density,modelValue:a([B]),onClick:ol(Y=>l(B,e.index,Y),["stop"])},null);if(R.key==="data-table-expand")return n["item.data-table-expand"]?.({...ee,props:{icon:_(B)?e.collapseIcon:e.expandIcon,size:"small",variant:"text",onClick:ol(()=>x(B),["stop"])}})??se(ci,{icon:_(B)?e.collapseIcon:e.expandIcon,size:"small",variant:"text",onClick:ol(()=>x(B),["stop"])},null);if(n[H]&&!r.value)return n[H](ee);const re=sn(ee.value);return r.value?z(un,null,[z("div",{class:"v-data-table__td-title"},[n[G]?.(ie)??R.title]),z("div",{class:"v-data-table__td-value"},[n[H]?.(ee)??re])]):re}})})]))}}),s9=lt({loading:[Boolean,String],loadingText:{type:String,default:"$vuetify.dataIterator.loadingText"},hideNoData:Boolean,items:{type:Array,default:()=>[]},noDataText:{type:String,default:"$vuetify.noDataText"},rowProps:[Object,Function],cellProps:[Object,Function],...Ol(r9(),["collapseIcon","expandIcon","density"]),...Ol(i9(),["groupCollapseIcon","groupExpandIcon","density"]),...sg()},"VDataTableRows"),Jp=At()({name:"VDataTableRows",inheritAttrs:!1,props:s9(),setup(e,t){let{attrs:n,slots:i}=t;const{columns:r}=uS(),{expandOnClick:a,toggleExpand:l,isExpanded:h}=Bj(),{isSelected:s,toggleSelect:p}=aS(),{toggleGroup:_,isGroupOpen:x}=zj(),{t:T}=hr(),{mobile:k}=Vl(e);return Vt(()=>{const P=Ol(e,["groupCollapseIcon","groupExpandIcon","density"]);return e.loading&&(!e.items.length||i.loading)?z("tr",{class:"v-data-table-rows-loading",key:"loading"},[z("td",{colspan:r.value.length},[i.loading?.()??T(e.loadingText)])]):!e.loading&&!e.items.length&&!e.hideNoData?z("tr",{class:"v-data-table-rows-no-data",key:"no-data"},[z("td",{colspan:r.value.length},[i["no-data"]?.()??T(e.noDataText)])]):z(un,null,[e.items.map((M,R)=>{if(M.type==="group"){const H={index:R,item:M,columns:r.value,isExpanded:h,toggleExpand:l,isSelected:s,toggleSelect:p,toggleGroup:_,isGroupOpen:x};return i["group-header"]?i["group-header"](H):se(rve,It({key:`group-header_${M.id}`,item:M},e3(n,":groupHeader",()=>H),P),i)}if(M.type==="group-summary"){const H={index:R,item:M,columns:r.value,toggleGroup:_};return i["group-summary"]?.(H)??""}const F={index:R,item:M.raw,internalItem:M,columns:r.value,isExpanded:h,toggleExpand:l,isSelected:s,toggleSelect:p},B={...F,props:It({key:`item_${M.key??M.index}`,onClick:a.value?()=>{l(M)}:void 0,index:R,item:M,cellProps:e.cellProps,collapseIcon:e.collapseIcon,expandIcon:e.expandIcon,density:e.density,mobile:k.value},e3(n,":row",()=>F),typeof e.rowProps=="function"?e.rowProps({item:F.item,index:F.index,internalItem:F.internalItem}):e.rowProps)};return z(un,{key:B.props.key},[i.item?i.item(B):se(pM,B.props,i),h(M)&&i["expanded-row"]?.(F)])})])}),{}}}),o9=lt({fixedHeader:Boolean,fixedFooter:Boolean,height:[Number,String],hover:Boolean,striped:{type:String,default:null,validator:e=>["even","odd"].includes(e)},...wn(),...ws(),...ti(),...Ai()},"VTable"),Qp=At()({name:"VTable",props:o9(),setup(e,t){let{slots:n,emit:i}=t;const{themeClasses:r}=Zi(e),{densityClasses:a}=Ga(e);return Vt(()=>se(e.tag,{class:xt(["v-table",{"v-table--fixed-height":!!e.height,"v-table--fixed-header":e.fixedHeader,"v-table--fixed-footer":e.fixedFooter,"v-table--has-top":!!n.top,"v-table--has-bottom":!!n.bottom,"v-table--hover":e.hover,"v-table--striped-even":e.striped==="even","v-table--striped-odd":e.striped==="odd"},r.value,a.value,e.class]),style:Yt(e.style)},{default:()=>[n.top?.(),n.default?z("div",{class:"v-table__wrapper",style:{height:pn(e.height)}},[z("table",null,[n.default()])]):n.wrapper?.(),n.bottom?.()]})),{}}}),sve=lt({items:{type:Array,default:()=>[]},itemValue:{type:[String,Array,Function],default:"id"},itemSelectable:{type:[String,Array,Function],default:null},rowProps:[Object,Function],cellProps:[Object,Function],returnObject:Boolean},"DataTable-items");function ove(e,t,n,i){const r=e.returnObject?t:Ms(t,e.itemValue),a=Ms(t,e.itemSelectable,!0),l=i.reduce((h,s)=>(s.key!=null&&(h[s.key]=Ms(t,s.value)),h),{});return{type:"item",key:e.returnObject?Ms(t,e.itemValue):r,index:n,value:r,selectable:a,columns:l,raw:t}}function ave(e,t,n){return t.map((i,r)=>ove(e,i,r,n))}function gM(e,t){return{items:fe(()=>ave(e,e.items,t.value))}}const vM=lt({...s9(),hideDefaultBody:Boolean,hideDefaultFooter:Boolean,hideDefaultHeader:Boolean,width:[String,Number],search:String,...Oj(),...oM(),...Jge(),...sve(),...Hj(),...qj(),...n9(),...o9()},"DataTable"),lve=lt({...lM(),...vM(),...M_(),...hM()},"VDataTable"),cve=At()({name:"VDataTable",props:lve(),emits:{"update:modelValue":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:groupBy":e=>!0,"update:expanded":e=>!0,"update:currentItems":e=>!0},setup(e,t){let{attrs:n,slots:i}=t;const{groupBy:r}=aM(e),{sortBy:a,multiSort:l,mustSort:h}=lS(e),{page:s,itemsPerPage:p}=cM(e),{disableSort:_}=g_(e),{columns:x,headers:T,sortFunctions:k,sortRawFunctions:P,filterFunctions:M}=mM(e,{groupBy:r,showSelect:Ne(()=>e.showSelect),showExpand:Ne(()=>e.showExpand)}),{items:R}=gM(e,x),F=Ne(()=>e.search),{filteredItems:B}=D_(e,R,F,{transform:Ye=>Ye.columns,customKeyFilter:M}),{toggleSort:H}=cS({sortBy:a,multiSort:l,mustSort:h,page:s}),{sortByWithGroups:G,opened:ee,extractRows:ie,isGroupOpen:J,toggleGroup:$}=iS({groupBy:r,sortBy:a,disableSort:_}),{sortedItems:W}=dM(e,B,G,{transform:Ye=>({...Ye.raw,...Ye.columns}),sortFunctions:k,sortRawFunctions:P}),{flatItems:X}=rS(W,r,ee,()=>!!i["group-summary"]),re=fe(()=>X.value.length),{startIndex:Y,stopIndex:Z,pageCount:ge,setItemsPerPage:be}=uM({page:s,itemsPerPage:p,itemsLength:re}),{paginatedItems:Be}=jj({items:X,startIndex:Y,stopIndex:Z,itemsPerPage:p}),nt=fe(()=>ie(Be.value)),{isSelected:We,select:Le,selectAll:Ze,toggleSelect:Ee,someSelected:Je,allSelected:it}=oS(e,{allItems:R,currentPage:nt}),{isExpanded:vt,toggleExpand:mt}=nS(e);sS({page:s,itemsPerPage:p,sortBy:a,groupBy:r,search:F}),es({VDataTableRows:{hideNoData:Ne(()=>e.hideNoData),noDataText:Ne(()=>e.noDataText),loading:Ne(()=>e.loading),loadingText:Ne(()=>e.loadingText)}});const ot=fe(()=>({page:s.value,itemsPerPage:p.value,sortBy:a.value,pageCount:ge.value,toggleSort:H,setItemsPerPage:be,someSelected:Je.value,allSelected:it.value,isSelected:We,select:Le,selectAll:Ze,toggleSelect:Ee,isExpanded:vt,toggleExpand:mt,isGroupOpen:J,toggleGroup:$,items:nt.value.map(Ye=>Ye.raw),internalItems:nt.value,groupedItems:Be.value,columns:x.value,headers:T.value}));return Vt(()=>{const Ye=a0.filterProps(e),ut=Zp.filterProps(e),Ke=Jp.filterProps(e),jt=Qp.filterProps(e);return se(Qp,It({class:["v-data-table",{"v-data-table--show-select":e.showSelect,"v-data-table--loading":e.loading},e.class],style:e.style},jt,{fixedHeader:e.fixedHeader||e.sticky}),{top:()=>i.top?.(ot.value),default:()=>i.default?i.default(ot.value):z(un,null,[i.colgroup?.(ot.value),!e.hideDefaultHeader&&z("thead",{key:"thead"},[se(Zp,ut,i)]),i.thead?.(ot.value),!e.hideDefaultBody&&z("tbody",null,[i["body.prepend"]?.(ot.value),i.body?i.body(ot.value):se(Jp,It(n,Ke,{items:Be.value}),i),i["body.append"]?.(ot.value)]),i.tbody?.(ot.value),i.tfoot?.(ot.value)]),bottom:()=>i.bottom?i.bottom(ot.value):!e.hideDefaultFooter&&z(un,null,[se(za,null,null),se(a0,Ye,{prepend:i["footer.prepend"]})])})}),{}}}),uve=lt({...dr(vM(),["hideDefaultFooter"]),...oM(),..._$(),...M_()},"VDataTableVirtual"),dve=At()({name:"VDataTableVirtual",props:uve(),emits:{"update:modelValue":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:groupBy":e=>!0,"update:expanded":e=>!0},setup(e,t){let{attrs:n,slots:i}=t;const{groupBy:r}=aM(e),{sortBy:a,multiSort:l,mustSort:h}=lS(e),{disableSort:s}=g_(e),{columns:p,headers:_,filterFunctions:x,sortFunctions:T,sortRawFunctions:k}=mM(e,{groupBy:r,showSelect:Ne(()=>e.showSelect),showExpand:Ne(()=>e.showExpand)}),{items:P}=gM(e,p),M=Ne(()=>e.search),{filteredItems:R}=D_(e,P,M,{transform:jt=>jt.columns,customKeyFilter:x}),{toggleSort:F}=cS({sortBy:a,multiSort:l,mustSort:h}),{sortByWithGroups:B,opened:H,extractRows:G,isGroupOpen:ee,toggleGroup:ie}=iS({groupBy:r,sortBy:a,disableSort:s}),{sortedItems:J}=dM(e,R,B,{transform:jt=>({...jt.raw,...jt.columns}),sortFunctions:T,sortRawFunctions:k}),{flatItems:$}=rS(J,r,H,()=>!!i["group-summary"]),W=fe(()=>G($.value)),{isSelected:X,select:re,selectAll:Y,toggleSelect:Z,someSelected:ge,allSelected:be}=oS(e,{allItems:W,currentPage:W}),{isExpanded:Be,toggleExpand:nt}=nS(e),{containerRef:We,markerRef:Le,paddingTop:Ze,paddingBottom:Ee,computedItems:Je,handleItemResize:it,handleScroll:vt,handleScrollend:mt,calculateVisibleItems:ot,scrollToIndex:Ye}=y$(e,$),ut=fe(()=>Je.value.map(jt=>jt.raw));sS({sortBy:a,page:Zt(1),itemsPerPage:Zt(-1),groupBy:r,search:M}),es({VDataTableRows:{hideNoData:Ne(()=>e.hideNoData),noDataText:Ne(()=>e.noDataText),loading:Ne(()=>e.loading),loadingText:Ne(()=>e.loadingText)}});const Ke=fe(()=>({sortBy:a.value,toggleSort:F,someSelected:ge.value,allSelected:be.value,isSelected:X,select:re,selectAll:Y,toggleSelect:Z,isExpanded:Be,toggleExpand:nt,isGroupOpen:ee,toggleGroup:ie,items:W.value.map(jt=>jt.raw),internalItems:W.value,groupedItems:$.value,columns:p.value,headers:_.value}));return Vt(()=>{const jt=Zp.filterProps(e),xn=Jp.filterProps(e),ke=Qp.filterProps(e);return se(Qp,It({class:["v-data-table",{"v-data-table--loading":e.loading},e.class],style:e.style},ke,{fixedHeader:e.fixedHeader||e.sticky}),{top:()=>i.top?.(Ke.value),wrapper:()=>z("div",{ref:We,onScrollPassive:vt,onScrollend:mt,class:"v-table__wrapper",style:{height:pn(e.height)}},[z("table",null,[i.colgroup?.(Ke.value),!e.hideDefaultHeader&&z("thead",{key:"thead"},[se(Zp,jt,i)]),i.thead?.(Ke.value),!e.hideDefaultBody&&z("tbody",{key:"tbody"},[z("tr",{ref:Le,style:{height:pn(Ze.value),border:0}},[z("td",{colspan:p.value.length,style:{height:0,border:0}},null)]),i["body.prepend"]?.(Ke.value),se(Jp,It(n,xn,{items:ut.value}),{...i,item:Ae=>se(v$,{key:Ae.internalItem.index,renderless:!0,"onUpdate:height":he=>it(Ae.internalItem.index,he)},{default:he=>{let{itemRef:et}=he;return i.item?.({...Ae,itemRef:et})??se(pM,It(Ae.props,{ref:et,key:Ae.internalItem.index,index:Ae.internalItem.index}),i)}})}),i["body.append"]?.(Ke.value),z("tr",{style:{height:pn(Ee.value),border:0}},[z("td",{colspan:p.value.length,style:{height:0,border:0}},null)])]),i.tbody?.(Ke.value),i.tfoot?.(Ke.value)])]),bottom:()=>i.bottom?.(Ke.value)})}),{calculateVisibleItems:ot,scrollToIndex:Ye}}}),hve=lt({itemsLength:{type:[Number,String],required:!0},...lM(),...vM(),...hM()},"VDataTableServer"),fve=At()({name:"VDataTableServer",props:hve(),emits:{"update:modelValue":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:expanded":e=>!0,"update:groupBy":e=>!0},setup(e,t){let{attrs:n,slots:i}=t;const{groupBy:r}=aM(e),{sortBy:a,multiSort:l,mustSort:h}=lS(e),{page:s,itemsPerPage:p}=cM(e),{disableSort:_}=g_(e),x=fe(()=>parseInt(e.itemsLength,10)),{columns:T,headers:k}=mM(e,{groupBy:r,showSelect:Ne(()=>e.showSelect),showExpand:Ne(()=>e.showExpand)}),{items:P}=gM(e,T),{toggleSort:M}=cS({sortBy:a,multiSort:l,mustSort:h,page:s}),{opened:R,isGroupOpen:F,toggleGroup:B,extractRows:H}=iS({groupBy:r,sortBy:a,disableSort:_}),{pageCount:G,setItemsPerPage:ee}=uM({page:s,itemsPerPage:p,itemsLength:x}),{flatItems:ie}=rS(P,r,R,()=>!!i["group-summary"]),{isSelected:J,select:$,selectAll:W,toggleSelect:X,someSelected:re,allSelected:Y}=oS(e,{allItems:P,currentPage:P}),{isExpanded:Z,toggleExpand:ge}=nS(e),be=fe(()=>H(P.value));sS({page:s,itemsPerPage:p,sortBy:a,groupBy:r,search:Ne(()=>e.search)}),Dr("v-data-table",{toggleSort:M,sortBy:a}),es({VDataTableRows:{hideNoData:Ne(()=>e.hideNoData),noDataText:Ne(()=>e.noDataText),loading:Ne(()=>e.loading),loadingText:Ne(()=>e.loadingText)}});const Be=fe(()=>({page:s.value,itemsPerPage:p.value,sortBy:a.value,pageCount:G.value,toggleSort:M,setItemsPerPage:ee,someSelected:re.value,allSelected:Y.value,isSelected:J,select:$,selectAll:W,toggleSelect:X,isExpanded:Z,toggleExpand:ge,isGroupOpen:F,toggleGroup:B,items:be.value.map(nt=>nt.raw),internalItems:be.value,groupedItems:ie.value,columns:T.value,headers:k.value}));Vt(()=>{const nt=a0.filterProps(e),We=Zp.filterProps(e),Le=Jp.filterProps(e),Ze=Qp.filterProps(e);return se(Qp,It({class:["v-data-table",{"v-data-table--loading":e.loading},e.class],style:e.style},Ze,{fixedHeader:e.fixedHeader||e.sticky}),{top:()=>i.top?.(Be.value),default:()=>i.default?i.default(Be.value):z(un,null,[i.colgroup?.(Be.value),!e.hideDefaultHeader&&z("thead",{key:"thead",class:"v-data-table__thead",role:"rowgroup"},[se(Zp,We,i)]),i.thead?.(Be.value),!e.hideDefaultBody&&z("tbody",{class:"v-data-table__tbody",role:"rowgroup"},[i["body.prepend"]?.(Be.value),i.body?i.body(Be.value):se(Jp,It(n,Le,{items:ie.value}),i),i["body.append"]?.(Be.value)]),i.tbody?.(Be.value),i.tfoot?.(Be.value)]),bottom:()=>i.bottom?i.bottom(Be.value):!e.hideDefaultFooter&&z(un,null,[se(za,null,null),se(a0,nt,{prepend:i["footer.prepend"]})])})})}}),a9=lt({active:{type:[String,Array],default:void 0},controlHeight:[Number,String],disabled:{type:[Boolean,String,Array],default:null},nextIcon:{type:kn,default:"$next"},prevIcon:{type:kn,default:"$prev"},modeIcon:{type:kn,default:"$subgroup"},text:String,viewMode:{type:String,default:"month"}},"VDatePickerControls"),pI=At()({name:"VDatePickerControls",props:a9(),emits:{"click:year":()=>!0,"click:month":()=>!0,"click:prev":()=>!0,"click:next":()=>!0,"click:text":()=>!0},setup(e,t){let{emit:n}=t;const{t:i}=hr(),r=fe(()=>Array.isArray(e.disabled)?e.disabled.includes("text"):!!e.disabled),a=fe(()=>Array.isArray(e.disabled)?e.disabled.includes("mode"):!!e.disabled),l=fe(()=>Array.isArray(e.disabled)?e.disabled.includes("prev"):!!e.disabled),h=fe(()=>Array.isArray(e.disabled)?e.disabled.includes("next"):!!e.disabled);function s(){n("click:prev")}function p(){n("click:next")}function _(){n("click:year")}function x(){n("click:month")}return Vt(()=>z("div",{class:xt(["v-date-picker-controls"]),style:{"--v-date-picker-controls-height":pn(e.controlHeight)}},[se(ci,{class:"v-date-picker-controls__month-btn","data-testid":"month-btn",disabled:r.value,text:e.text,variant:"text",rounded:!0,onClick:x},null),se(ci,{class:"v-date-picker-controls__mode-btn","data-testid":"year-btn",disabled:a.value,density:"comfortable",icon:e.modeIcon,variant:"text","aria-label":i("$vuetify.datePicker.ariaLabel.selectYear"),onClick:_},null),se(LU,null,null),z("div",{class:"v-date-picker-controls__month"},[se(ci,{"data-testid":"prev-month",disabled:l.value,density:"comfortable",icon:e.prevIcon,variant:"text","aria-label":i("$vuetify.datePicker.ariaLabel.previousMonth"),onClick:s},null),se(ci,{"data-testid":"next-month",disabled:h.value,icon:e.nextIcon,density:"comfortable",variant:"text","aria-label":i("$vuetify.datePicker.ariaLabel.nextMonth"),onClick:p},null)])])),{}}}),mve=lt({appendIcon:kn,color:String,header:String,transition:String,onClick:Fo()},"VDatePickerHeader"),gI=At()({name:"VDatePickerHeader",props:mve(),emits:{click:()=>!0,"click:append":()=>!0},setup(e,t){let{emit:n,slots:i}=t;const{backgroundColorClasses:r,backgroundColorStyles:a}=nr(()=>e.color);function l(){n("click")}function h(){n("click:append")}return Vt(()=>{const s=!!(i.default||e.header),p=!!(i.append||e.appendIcon);return z("div",{class:xt(["v-date-picker-header",{"v-date-picker-header--clickable":!!e.onClick},r.value]),style:Yt(a.value),onClick:l},[i.prepend&&z("div",{key:"prepend",class:"v-date-picker-header__prepend"},[i.prepend()]),s&&se(Fa,{key:"content",name:e.transition},{default:()=>[z("div",{key:e.header,class:"v-date-picker-header__content"},[i.default?.()??e.header])]}),p&&z("div",{class:"v-date-picker-header__append"},[i.append?se(ui,{key:"append-defaults",disabled:!e.appendIcon,defaults:{VBtn:{icon:e.appendIcon,variant:"text"}}},{default:()=>[i.append?.()]}):se(ci,{key:"append-btn",icon:e.appendIcon,variant:"text",onClick:h},null)])])}),{}}}),pve=lt({allowedDates:[Array,Function],disabled:{type:Boolean,default:null},displayValue:null,modelValue:Array,month:[Number,String],max:null,min:null,showAdjacentMonths:Boolean,year:[Number,String],weekdays:{type:Array,default:()=>[0,1,2,3,4,5,6]},weeksInMonth:{type:String,default:"dynamic"},firstDayOfWeek:{type:[Number,String],default:void 0},firstDayOfYear:{type:[Number,String],default:void 0},weekdayFormat:String},"calendar");function gve(e){const t=D0(),n=Pn(e,"modelValue",[],k=>qr(k).map(P=>t.date(P))),i=fe(()=>e.displayValue?t.date(e.displayValue):n.value.length>0?t.date(n.value[0]):e.min?t.date(e.min):Array.isArray(e.allowedDates)?t.date(e.allowedDates[0]):t.date()),r=Pn(e,"year",void 0,k=>{const P=k!=null?Number(k):t.getYear(i.value);return t.startOfYear(t.setYear(t.date(),P))},k=>t.getYear(k)),a=Pn(e,"month",void 0,k=>{const P=k!=null?Number(k):t.getMonth(i.value),M=t.setYear(t.startOfMonth(t.date()),t.getYear(r.value));return t.setMonth(M,P)},k=>t.getMonth(k)),l=fe(()=>{const k=t.toJsDate(t.startOfWeek(t.date(),e.firstDayOfWeek)).getDay();return t.getWeekdays(e.firstDayOfWeek,e.weekdayFormat).filter((P,M)=>e.weekdays.includes((M+k)%7))}),h=fe(()=>{const k=t.getWeekArray(a.value,e.firstDayOfWeek),P=k.flat(),M=42;if(e.weeksInMonth==="static"&&P.length<M){const R=P[P.length-1];let F=[];for(let B=1;B<=M-P.length;B++)F.push(t.addDays(R,B)),B%7===0&&(k.push(F),F=[])}return k});function s(k,P){return k.filter(M=>e.weekdays.includes(t.toJsDate(M).getDay())).map((M,R)=>{const F=t.toISO(M),B=!t.isSameMonth(M,a.value),H=t.isSameDay(M,t.startOfMonth(a.value)),G=t.isSameDay(M,t.endOfMonth(a.value)),ee=t.isSameDay(M,a.value),ie=e.weekdays.length;return{date:M,formatted:t.format(M,"keyboardDate"),isAdjacent:B,isDisabled:T(M),isEnd:G,isHidden:B&&!e.showAdjacentMonths,isSame:ee,isSelected:n.value.some(J=>t.isSameDay(M,J)),isStart:H,isToday:t.isSameDay(M,P),isWeekEnd:R%ie===ie-1,isWeekStart:R%ie===0,isoDate:F,localized:t.format(M,"dayOfMonth"),month:t.getMonth(M),year:t.getYear(M)}})}const p=fe(()=>{const k=t.startOfWeek(i.value,e.firstDayOfWeek),P=[];for(let R=0;R<=6;R++)P.push(t.addDays(k,R));const M=t.date();return s(P,M)}),_=fe(()=>{const k=h.value.flat(),P=t.date();return s(k,P)}),x=fe(()=>h.value.map(k=>k.length?t.getWeek(k[0],e.firstDayOfWeek,e.firstDayOfYear):null));function T(k){if(e.disabled)return!0;const P=t.date(k);return e.min&&t.isBefore(t.endOfDay(P),t.date(e.min))||e.max&&t.isAfter(P,t.date(e.max))?!0:Array.isArray(e.allowedDates)&&e.allowedDates.length>0?!e.allowedDates.some(M=>t.isSameDay(t.date(M),P)):typeof e.allowedDates=="function"?!e.allowedDates(P):!1}return{displayValue:i,daysInMonth:_,daysInWeek:p,genDays:s,model:n,weeksInMonth:h,weekdayLabels:l,weekNumbers:x}}const l9=lt({color:String,hideWeekdays:Boolean,multiple:[Boolean,Number,String],showWeek:Boolean,transition:{type:String,default:"picker-transition"},reverseTransition:{type:String,default:"picker-reverse-transition"},...dr(pve(),["displayValue"])},"VDatePickerMonth"),vI=At()({name:"VDatePickerMonth",props:l9(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0},setup(e,t){let{emit:n,slots:i}=t;const r=tt(),{t:a}=hr(),{daysInMonth:l,model:h,weekNumbers:s,weekdayLabels:p}=gve(e),_=D0(),x=Zt(),T=Zt(),k=Zt(!1),P=Ne(()=>k.value?e.reverseTransition:e.transition);e.multiple==="range"&&h.value.length>0&&(x.value=h.value[0],h.value.length>1&&(T.value=h.value[h.value.length-1]));const M=fe(()=>{const G=["number","string"].includes(typeof e.multiple)?Number(e.multiple):1/0;return h.value.length>=G});qt(l,(G,ee)=>{ee&&(k.value=_.isBefore(G[0].date,ee[0].date))});function R(G){const ee=_.startOfDay(G);if(h.value.length===0?x.value=void 0:h.value.length===1&&(x.value=h.value[0],T.value=void 0),!x.value)x.value=ee,h.value=[x.value];else if(T.value)x.value=G,T.value=void 0,h.value=[x.value];else{if(_.isSameDay(ee,x.value)){x.value=void 0,h.value=[];return}else _.isBefore(ee,x.value)?(T.value=_.endOfDay(x.value),x.value=ee):T.value=_.endOfDay(ee);h.value=$ie(_,x.value,T.value)}}function F(G){const ee=_.format(G.date,"fullDateWithWeekday"),ie=G.isToday?"currentDate":"selectDate";return a(`$vuetify.datePicker.ariaLabel.${ie}`,ee)}function B(G){const ee=h.value.findIndex(ie=>_.isSameDay(ie,G));if(ee===-1)h.value=[...h.value,G];else{const ie=[...h.value];ie.splice(ee,1),h.value=ie}}function H(G){e.multiple==="range"?R(G):e.multiple?B(G):h.value=[G]}Vt(()=>z("div",{class:"v-date-picker-month",style:{"--v-date-picker-days-in-week":e.weekdays.length}},[e.showWeek&&z("div",{key:"weeks",class:"v-date-picker-month__weeks"},[!e.hideWeekdays&&z("div",{key:"hide-week-days",class:"v-date-picker-month__day"},[Fn("")]),s.value.map(G=>z("div",{class:xt(["v-date-picker-month__day","v-date-picker-month__day--adjacent"])},[G]))]),se(Fa,{name:P.value},{default:()=>[z("div",{ref:r,key:l.value[0].date?.toString(),class:"v-date-picker-month__days"},[!e.hideWeekdays&&p.value.map(G=>z("div",{class:xt(["v-date-picker-month__day","v-date-picker-month__weekday"])},[G])),l.value.map((G,ee)=>{const ie={props:{class:"v-date-picker-month__day-btn",color:G.isSelected||G.isToday?e.color:void 0,disabled:G.isDisabled,icon:!0,ripple:!1,text:G.localized,variant:G.isSelected?"flat":G.isToday?"outlined":"text","aria-label":F(G),"aria-current":G.isToday?"date":void 0,onClick:()=>H(G.date)},item:G,i:ee};return M.value&&!G.isSelected&&(G.isDisabled=!0),z("div",{class:xt(["v-date-picker-month__day",{"v-date-picker-month__day--adjacent":G.isAdjacent,"v-date-picker-month__day--hide-adjacent":G.isHidden,"v-date-picker-month__day--selected":G.isSelected,"v-date-picker-month__day--week-end":G.isWeekEnd,"v-date-picker-month__day--week-start":G.isWeekStart}]),"data-v-date":G.isDisabled?void 0:G.isoDate},[(e.showAdjacentMonths||!G.isAdjacent)&&(i.day?.(ie)??se(ci,ie.props,null))])})])]})]))}}),c9=lt({color:String,height:[String,Number],min:null,max:null,modelValue:Number,year:Number,allowedMonths:[Array,Function]},"VDatePickerMonths"),_I=At()({name:"VDatePickerMonths",props:c9(),emits:{"update:modelValue":e=>!0},setup(e,t){let{emit:n,slots:i}=t;const r=D0(),a=Pn(e,"modelValue"),l=fe(()=>{let s=r.startOfYear(r.date());return e.year&&(s=r.setYear(s,e.year)),rc(12).map(p=>{const _=r.format(s,"monthShort"),x=r.format(s,"month"),T=!!(!h(p)||e.min&&r.isAfter(r.startOfMonth(r.date(e.min)),s)||e.max&&r.isAfter(s,r.startOfMonth(r.date(e.max))));return s=r.getNextMonth(s),{isDisabled:T,text:_,label:x,value:p}})});Ur(()=>{a.value=a.value??r.getMonth(r.date())});function h(s){return Array.isArray(e.allowedMonths)&&e.allowedMonths.length?e.allowedMonths.includes(s):typeof e.allowedMonths=="function"?e.allowedMonths(s):!0}return Vt(()=>z("div",{class:"v-date-picker-months",style:{height:pn(e.height)}},[z("div",{class:"v-date-picker-months__content"},[l.value.map((s,p)=>{const _={active:a.value===p,ariaLabel:s.label,color:a.value===p?e.color:void 0,disabled:s.isDisabled,rounded:!0,text:s.text,variant:a.value===s.value?"flat":"text",onClick:()=>x(p)};function x(T){if(a.value===T){n("update:modelValue",a.value);return}a.value=T}return i.month?.({month:s,i:p,props:_})??se(ci,It({key:"month"},_),null)})])])),{}}}),u9=lt({color:String,height:[String,Number],min:null,max:null,modelValue:Number,allowedYears:[Array,Function]},"VDatePickerYears"),yI=At()({name:"VDatePickerYears",props:u9(),directives:{vIntersect:gu},emits:{"update:modelValue":e=>!0},setup(e,t){let{emit:n,slots:i}=t;const r=D0(),a=Pn(e,"modelValue"),l=fe(()=>{const _=r.getYear(r.date());let x=_-100,T=_+52;e.min&&(x=r.getYear(r.date(e.min))),e.max&&(T=r.getYear(r.date(e.max)));let k=r.startOfYear(r.date());return k=r.setYear(k,x),rc(T-x+1,x).map(P=>{const M=r.format(k,"year");return k=r.setYear(k,r.getYear(k)+1),{text:M,value:P,isDisabled:!p(P)}})});Ur(()=>{a.value=a.value??r.getYear(r.date())});const h=I1();function s(){h.el?.focus(),h.el?.scrollIntoView({block:"center"})}function p(_){return Array.isArray(e.allowedYears)&&e.allowedYears.length?e.allowedYears.includes(_):typeof e.allowedYears=="function"?e.allowedYears(_):!0}return Vt(()=>Ii(z("div",{class:"v-date-picker-years",style:{height:pn(e.height)}},[z("div",{class:"v-date-picker-years__content"},[l.value.map((_,x)=>{const T={ref:a.value===_.value?h:void 0,active:a.value===_.value,color:a.value===_.value?e.color:void 0,rounded:!0,text:_.text,disabled:_.isDisabled,variant:a.value===_.value?"flat":"text",onClick:()=>{if(a.value===_.value){n("update:modelValue",a.value);return}a.value=_.value}};return i.year?.({year:_,i:x,props:T})??se(ci,It({key:"month"},T),null)})])]),[[gu,{handler:s},null,{once:!0}]])),{}}}),vve=lt({header:{type:String,default:"$vuetify.datePicker.header"},headerColor:String,...a9(),...l9({weeksInMonth:"static"}),...dr(c9(),["modelValue"]),...dr(u9(),["modelValue"]),...tS({title:"$vuetify.datePicker.title"}),modelValue:null},"VDatePicker"),_ve=At()({name:"VDatePicker",props:vve(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0,"update:viewMode":e=>!0},setup(e,t){let{emit:n,slots:i}=t;const r=D0(),{t:a}=hr(),{rtlClasses:l}=Gs(),h=Pn(e,"modelValue",void 0,We=>qr(We).map(Le=>r.date(Le)),We=>e.multiple?We:We[0]),s=Pn(e,"viewMode"),p=fe(()=>{const We=r.date(e.min);return e.min&&r.isValid(We)?We:null}),_=fe(()=>{const We=r.date(e.max);return e.max&&r.isValid(We)?We:null}),x=fe(()=>{const We=r.date();let Le=We;return h.value?.[0]?Le=r.date(h.value[0]):p.value&&r.isBefore(We,p.value)?Le=p.value:_.value&&r.isAfter(We,_.value)&&(Le=_.value),Le&&r.isValid(Le)?Le:We}),T=Ne(()=>e.headerColor??e.color),k=Pn(e,"month"),P=fe({get:()=>Number(k.value??r.getMonth(r.startOfMonth(x.value))),set:We=>k.value=We}),M=Pn(e,"year"),R=fe({get:()=>Number(M.value??r.getYear(r.startOfYear(r.setMonth(x.value,P.value)))),set:We=>M.value=We}),F=Zt(!1),B=fe(()=>e.multiple&&h.value.length>1?a("$vuetify.datePicker.itemsSelected",h.value.length):h.value[0]&&r.isValid(h.value[0])?r.format(r.date(h.value[0]),"normalDateWithWeekday"):a(e.header)),H=fe(()=>{let We=r.date();return We=r.setDate(We,1),We=r.setMonth(We,P.value),We=r.setYear(We,R.value),r.format(We,"monthAndYear")}),G=Ne(()=>`date-picker-header${F.value?"-reverse":""}-transition`),ee=fe(()=>{if(e.disabled)return!0;const We=[];if(s.value!=="month")We.push("prev","next");else{let Le=r.date();if(Le=r.startOfMonth(Le),Le=r.setMonth(Le,P.value),Le=r.setYear(Le,R.value),p.value){const Ze=r.addDays(r.startOfMonth(Le),-1);r.isAfter(p.value,Ze)&&We.push("prev")}if(_.value){const Ze=r.addDays(r.endOfMonth(Le),1);r.isAfter(Ze,_.value)&&We.push("next")}}return We}),ie=fe(()=>e.allowedYears||W),J=fe(()=>e.allowedMonths||X);function $(We,Le){const Ze=e.allowedDates;if(typeof Ze!="function")return!0;const Ee=1+j6(r,We,Le);for(let Je=0;Je<Ee;Je++)if(Ze(r.addDays(We,Je)))return!0;return!1}function W(We){if(typeof e.allowedDates=="function"){const Le=r.parseISO(`${We}-01-01`);return $(Le,r.endOfYear(Le))}if(Array.isArray(e.allowedDates)&&e.allowedDates.length){for(const Le of e.allowedDates)if(r.getYear(r.date(Le))===We)return!0;return!1}return!0}function X(We){if(typeof e.allowedDates=="function"){const Le=String(We+1).padStart(2,"0"),Ze=r.parseISO(`${R.value}-${Le}-01`);return $(Ze,r.endOfMonth(Ze))}if(Array.isArray(e.allowedDates)&&e.allowedDates.length){for(const Le of e.allowedDates)if(r.getYear(r.date(Le))===R.value&&r.getMonth(r.date(Le))===We)return!0;return!1}return!0}function re(){P.value<11?P.value++:(R.value++,P.value=0,nt()),Be()}function Y(){P.value>0?P.value--:(R.value--,P.value=11,nt()),Be()}function Z(){s.value="month"}function ge(){s.value=s.value==="months"?"month":"months"}function be(){s.value=s.value==="year"?"month":"year"}function Be(){s.value==="months"&&ge()}function nt(){s.value==="year"&&be()}return qt(h,(We,Le)=>{const Ze=qr(Le),Ee=qr(We);if(!Ee.length)return;const Je=r.date(Ze[Ze.length-1]),it=r.date(Ee[Ee.length-1]),vt=r.getMonth(it),mt=r.getYear(it);vt!==P.value&&(P.value=vt,Be()),mt!==R.value&&(R.value=mt,nt()),F.value=r.isBefore(Je,it)}),Vt(()=>{const We=m_.filterProps(e),Le=pI.filterProps(e),Ze=gI.filterProps(e),Ee=vI.filterProps(e),Je=dr(_I.filterProps(e),["modelValue"]),it=dr(yI.filterProps(e),["modelValue"]),vt={color:T.value,header:B.value,transition:G.value};return se(m_,It(We,{color:T.value,class:["v-date-picker",`v-date-picker--${s.value}`,{"v-date-picker--show-week":e.showWeek},l.value,e.class],style:e.style}),{title:()=>i.title?.()??z("div",{class:"v-date-picker__title"},[a(e.title)]),header:()=>i.header?se(ui,{defaults:{VDatePickerHeader:{...vt}}},{default:()=>[i.header?.(vt)]}):se(gI,It({key:"header"},Ze,vt,{onClick:s.value!=="month"?Z:void 0}),{prepend:i.prepend,append:i.append}),default:()=>z(un,null,[se(pI,It(Le,{disabled:ee.value,text:H.value,"onClick:next":re,"onClick:prev":Y,"onClick:month":ge,"onClick:year":be}),null),se(l_,{hideOnLeave:!0},{default:()=>[s.value==="months"?se(_I,It({key:"date-picker-months"},Je,{modelValue:P.value,"onUpdate:modelValue":[mt=>P.value=mt,Be],min:p.value,max:_.value,year:R.value,allowedMonths:J.value}),{month:i.month}):s.value==="year"?se(yI,It({key:"date-picker-years"},it,{modelValue:R.value,"onUpdate:modelValue":[mt=>R.value=mt,nt],min:p.value,max:_.value,allowedYears:ie.value}),{year:i.year}):se(vI,It({key:"date-picker-month"},Ee,{modelValue:h.value,"onUpdate:modelValue":mt=>h.value=mt,month:P.value,"onUpdate:month":[mt=>P.value=mt,Be],year:R.value,"onUpdate:year":[mt=>R.value=mt,nt],min:p.value,max:_.value}),{day:i.day})]})]),actions:i.actions})}),{}}}),yve=lt({actionText:String,bgColor:String,color:String,icon:kn,image:String,justify:{type:String,default:"center"},headline:String,title:String,text:String,textWidth:{type:[Number,String],default:500},href:String,to:String,...wn(),...Os(),...gd({size:void 0}),...Ai()},"VEmptyState"),bve=At()({name:"VEmptyState",props:yve(),emits:{"click:action":e=>!0},setup(e,t){let{emit:n,slots:i}=t;const{themeClasses:r}=Zi(e),{backgroundColorClasses:a,backgroundColorStyles:l}=nr(()=>e.bgColor),{dimensionStyles:h}=Vs(e),{displayClasses:s}=Vl();function p(_){n("click:action",_)}return Vt(()=>{const _=!!(i.actions||e.actionText),x=!!(i.headline||e.headline),T=!!(i.title||e.title),k=!!(i.text||e.text),P=!!(i.media||e.image||e.icon),M=e.size||(e.image?200:96);return z("div",{class:xt(["v-empty-state",{[`v-empty-state--${e.justify}`]:!0},r.value,a.value,s.value,e.class]),style:Yt([l.value,h.value,e.style])},[P&&z("div",{key:"media",class:"v-empty-state__media"},[i.media?se(ui,{key:"media-defaults",defaults:{VImg:{src:e.image,height:M},VIcon:{size:M,icon:e.icon}}},{default:()=>[i.media()]}):z(un,null,[e.image?se(wh,{key:"image",src:e.image,height:M},null):e.icon?se(_i,{key:"icon",color:e.color,size:M,icon:e.icon},null):void 0])]),x&&z("div",{key:"headline",class:"v-empty-state__headline"},[i.headline?.()??e.headline]),T&&z("div",{key:"title",class:"v-empty-state__title"},[i.title?.()??e.title]),k&&z("div",{key:"text",class:"v-empty-state__text",style:{maxWidth:pn(e.textWidth)}},[i.text?.()??e.text]),i.default&&z("div",{key:"content",class:"v-empty-state__content"},[i.default()]),_&&z("div",{key:"actions",class:"v-empty-state__actions"},[se(ui,{defaults:{VBtn:{class:"v-empty-state__action-btn",color:e.color??"surface-variant",href:e.href,text:e.actionText,to:e.to}}},{default:()=>[i.actions?.({props:{onClick:p}})??se(ci,{onClick:p},null)]})])])}),{}}}),c0=Symbol.for("vuetify:v-expansion-panel"),d9=lt({...wn(),...LP()},"VExpansionPanelText"),bI=At()({name:"VExpansionPanelText",props:d9(),setup(e,t){let{slots:n}=t;const i=wi(c0);if(!i)throw new Error("[Vuetify] v-expansion-panel-text needs to be placed inside v-expansion-panel");const{hasContent:r,onAfterLeave:a}=RP(e,i.isSelected);return Vt(()=>se(z0,{onAfterLeave:a},{default:()=>[Ii(z("div",{class:xt(["v-expansion-panel-text",e.class]),style:Yt(e.style)},[n.default&&r.value&&z("div",{class:"v-expansion-panel-text__wrapper"},[n.default?.()])]),[[_u,i.isSelected.value]])]})),{}}}),h9=lt({color:String,expandIcon:{type:kn,default:"$expand"},collapseIcon:{type:kn,default:"$collapse"},hideActions:Boolean,focusable:Boolean,static:Boolean,ripple:{type:[Boolean,Object],default:!1},readonly:Boolean,...wn(),...Os()},"VExpansionPanelTitle"),xI=At()({name:"VExpansionPanelTitle",directives:{vRipple:Wa},props:h9(),setup(e,t){let{slots:n}=t;const i=wi(c0);if(!i)throw new Error("[Vuetify] v-expansion-panel-title needs to be placed inside v-expansion-panel");const{backgroundColorClasses:r,backgroundColorStyles:a}=nr(()=>e.color),{dimensionStyles:l}=Vs(e),h=fe(()=>({collapseIcon:e.collapseIcon,disabled:i.disabled.value,expanded:i.isSelected.value,expandIcon:e.expandIcon,readonly:e.readonly})),s=Ne(()=>i.isSelected.value?e.collapseIcon:e.expandIcon);return Vt(()=>Ii(z("button",{class:xt(["v-expansion-panel-title",{"v-expansion-panel-title--active":i.isSelected.value,"v-expansion-panel-title--focusable":e.focusable,"v-expansion-panel-title--static":e.static},r.value,e.class]),style:Yt([a.value,l.value,e.style]),type:"button",tabindex:i.disabled.value?-1:void 0,disabled:i.disabled.value,"aria-expanded":i.isSelected.value,onClick:e.readonly?void 0:i.toggle},[z("span",{class:"v-expansion-panel-title__overlay"},null),n.default?.(h.value),!e.hideActions&&se(ui,{defaults:{VIcon:{icon:s.value}}},{default:()=>[z("span",{class:"v-expansion-panel-title__icon"},[n.actions?.(h.value)??se(_i,null,null)])]})]),[[Wa,e.ripple]])),{}}}),f9=lt({title:String,text:String,bgColor:String,...qs(),...ug(),...$r(),...ti(),...h9(),...d9()},"VExpansionPanel"),xve=At()({name:"VExpansionPanel",props:f9(),emits:{"group:selected":e=>!0},setup(e,t){let{slots:n}=t;const i=om(e,c0),{backgroundColorClasses:r,backgroundColorStyles:a}=nr(()=>e.bgColor),{elevationClasses:l}=bo(e),{roundedClasses:h}=ts(e),s=Ne(()=>i?.disabled.value||e.disabled),p=fe(()=>i.group.items.value.reduce((T,k,P)=>(i.group.selected.value.includes(k.id)&&T.push(P),T),[])),_=fe(()=>{const T=i.group.items.value.findIndex(k=>k.id===i.id);return!i.isSelected.value&&p.value.some(k=>k-T===1)}),x=fe(()=>{const T=i.group.items.value.findIndex(k=>k.id===i.id);return!i.isSelected.value&&p.value.some(k=>k-T===-1)});return Dr(c0,i),Vt(()=>{const T=!!(n.text||e.text),k=!!(n.title||e.title),P=xI.filterProps(e),M=bI.filterProps(e);return se(e.tag,{class:xt(["v-expansion-panel",{"v-expansion-panel--active":i.isSelected.value,"v-expansion-panel--before-active":_.value,"v-expansion-panel--after-active":x.value,"v-expansion-panel--disabled":s.value},h.value,r.value,e.class]),style:Yt([a.value,e.style])},{default:()=>[z("div",{class:xt(["v-expansion-panel__shadow",...l.value])},null),se(ui,{defaults:{VExpansionPanelTitle:{...P},VExpansionPanelText:{...M}}},{default:()=>[k&&se(xI,{key:"title"},{default:()=>[n.title?n.title():e.title]}),T&&se(bI,{key:"text"},{default:()=>[n.text?n.text():e.text]}),n.default?.()]})]})}),{groupItem:i}}}),wve=["default","accordion","inset","popout"],Tve=lt({flat:Boolean,...cg(),...Ol(f9(),["bgColor","collapseIcon","color","eager","elevation","expandIcon","focusable","hideActions","readonly","ripple","rounded","tile","static"]),...Ai(),...wn(),...ti(),variant:{type:String,default:"default",validator:e=>wve.includes(e)}},"VExpansionPanels"),Sve=At()({name:"VExpansionPanels",props:Tve(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{next:i,prev:r}=vm(e,c0),{themeClasses:a}=Zi(e),l=Ne(()=>e.variant&&`v-expansion-panels--variant-${e.variant}`);return es({VExpansionPanel:{bgColor:Ne(()=>e.bgColor),collapseIcon:Ne(()=>e.collapseIcon),color:Ne(()=>e.color),eager:Ne(()=>e.eager),elevation:Ne(()=>e.elevation),expandIcon:Ne(()=>e.expandIcon),focusable:Ne(()=>e.focusable),hideActions:Ne(()=>e.hideActions),readonly:Ne(()=>e.readonly),ripple:Ne(()=>e.ripple),rounded:Ne(()=>e.rounded),static:Ne(()=>e.static)}}),Vt(()=>se(e.tag,{class:xt(["v-expansion-panels",{"v-expansion-panels--flat":e.flat,"v-expansion-panels--tile":e.tile},a.value,l.value,e.class]),style:Yt(e.style)},{default:()=>[n.default?.({prev:r,next:i})]})),{next:i,prev:r}}}),Eve=lt({app:Boolean,appear:Boolean,extended:Boolean,layout:Boolean,offset:Boolean,modelValue:{type:Boolean,default:!0},...dr(NT({active:!0}),["location","spaced"]),...og(),...Ph(),...Mh({transition:"fab-transition"})},"VFab"),Cve=At()({name:"VFab",props:Eve(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const i=Pn(e,"modelValue"),r=Zt(56),a=tt(),{resizeRef:l}=zc(x=>{x.length&&(r.value=x[0].target.clientHeight)}),h=Ne(()=>e.app||e.absolute),s=fe(()=>h.value?e.location?.split(" ").shift()??"bottom":!1),p=fe(()=>h.value?e.location?.split(" ")[1]??"end":!1);aa(()=>e.app,()=>{const x=ag({id:e.name,order:fe(()=>parseInt(e.order,10)),position:s,layoutSize:fe(()=>e.layout?r.value+24:0),elementSize:fe(()=>r.value+24),active:fe(()=>e.app&&i.value),absolute:Ne(()=>e.absolute)});Ur(()=>{a.value=x.layoutItemStyles.value})});const _=tt();return Vt(()=>{const x=ci.filterProps(e);return z("div",{ref:_,class:xt(["v-fab",{"v-fab--absolute":e.absolute,"v-fab--app":!!e.app,"v-fab--extended":e.extended,"v-fab--offset":e.offset,[`v-fab--${s.value}`]:h.value,[`v-fab--${p.value}`]:h.value},e.class]),style:Yt([e.app?{...a.value}:{height:e.absolute?"100%":"inherit"},e.style])},[z("div",{class:"v-fab__container"},[se(Fa,{appear:e.appear,transition:e.transition},{default:()=>[Ii(se(ci,It({ref:l},x,{active:void 0,location:void 0}),n),[[_u,e.active]])]})])])}),{}}});function kve(){function e(n){return[...n.dataTransfer?.items??[]].filter(r=>r.kind==="file").map(r=>r.webkitGetAsEntry()).filter(Boolean).length>0||[...n.dataTransfer?.files??[]].length>0}async function t(n){const i=[],r=[...n.dataTransfer?.items??[]].filter(a=>a.kind==="file").map(a=>a.webkitGetAsEntry()).filter(Boolean);if(r.length)for(const a of r){const l=await m9(a,p9(".",a));i.push(...l.map(h=>h.file))}else i.push(...n.dataTransfer?.files??[]);return i}return{handleDrop:t,hasFilesOrFolders:e}}function m9(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return new Promise((n,i)=>{e.isFile?e.file(a=>n([{file:a,path:t}]),i):e.isDirectory&&e.createReader().readEntries(async a=>{const l=[];for(const h of a)l.push(...await m9(h,p9(t,h)));n(l)})})}function p9(e,t){return t.isDirectory?`${e}/${t.name}`:e}const Ive=lt({filterByType:String},"file-accept");function Ave(e){const t=fe(()=>e.filterByType?Pve(e.filterByType):null);function n(i){if(t.value){const r=i.filter(t.value);return{accepted:r,rejected:i.filter(a=>!r.includes(a))}}return{accepted:i,rejected:[]}}return{filterAccepted:n}}function Pve(e){const t=e.split(",").map(a=>a.trim().toLowerCase()),n=t.filter(a=>a.startsWith(".")),i=t.filter(a=>a.endsWith("/*")),r=t.filter(a=>!n.includes(a)&&!i.includes(a));return a=>{const l=a.name.split(".").at(-1)?.toLowerCase()??"",h=a.type.split("/").at(0)?.toLowerCase()??"";return r.includes(a.type)||n.includes(`.${l}`)||i.includes(`${h}/*`)}}const Mve=lt({chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},hideInput:Boolean,multiple:Boolean,showSize:{type:[Boolean,Number,String],default:!1,validator:e=>typeof e=="boolean"||[1e3,1024].includes(Number(e))},truncateLength:{type:[Number,String],default:22},...Lh({prependIcon:"$file"}),modelValue:{type:[Array,Object],default:e=>e.multiple?[]:null,validator:e=>qr(e).every(t=>t!=null&&typeof t=="object")},...Ive(),...$0({clearable:!0})},"VFileInput"),Dve=At()({name:"VFileInput",inheritAttrs:!1,props:Mve(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0,rejected:e=>!0},setup(e,t){let{attrs:n,emit:i,slots:r}=t;const{t:a}=hr(),{filterAccepted:l}=Ave(e),h=Pn(e,"modelValue",e.modelValue,Le=>qr(Le),Le=>!e.multiple&&Array.isArray(Le)?Le[0]:Le),{isFocused:s,focus:p,blur:_}=Dh(e),x=fe(()=>typeof e.showSize!="boolean"?e.showSize:void 0),T=fe(()=>(h.value??[]).reduce((Le,Ze)=>{let{size:Ee=0}=Ze;return Le+Ee},0)),k=fe(()=>VV(T.value,x.value)),P=fe(()=>(h.value??[]).map(Le=>{const{name:Ze="",size:Ee=0}=Le,Je=Z(Ze);return e.showSize?`${Je} (${VV(Ee,x.value)})`:Je})),M=fe(()=>{const Le=h.value?.length??0;return e.showSize?a(e.counterSizeString,Le,k.value):a(e.counterString,Le)}),R=tt(),F=tt(),B=tt(),H=Ne(()=>s.value||e.active),G=fe(()=>["plain","underlined"].includes(e.variant)),ee=Zt(!1),{handleDrop:ie,hasFilesOrFolders:J}=kve();function $(){B.value!==document.activeElement&&B.value?.focus(),s.value||p()}function W(Le){B.value?.click()}function X(Le){i("mousedown:control",Le)}function re(Le){B.value?.click(),i("click:control",Le)}function Y(Le){Le.stopPropagation(),$(),Hn(()=>{h.value=[],A0(e["onClick:clear"],Le)})}function Z(Le){if(Le.length<Number(e.truncateLength))return Le;const Ze=Math.floor((Number(e.truncateLength)-1)/2);return`${Le.slice(0,Ze)}${Le.slice(Le.length-Ze)}`}function ge(Le){Le.preventDefault(),Le.stopImmediatePropagation(),ee.value=!0}function be(Le){Le.preventDefault(),ee.value=!1}async function Be(Le){if(Le.preventDefault(),Le.stopImmediatePropagation(),ee.value=!1,!B.value||!J(Le))return;const Ze=await ie(Le);We(Ze)}function nt(Le){if(!(!Le.target||Le.repack))if(e.filterByType)We([...Le.target.files]);else{const Ze=Le.target;h.value=[...Ze.files??[]]}}function We(Le){const Ze=new DataTransfer,{accepted:Ee,rejected:Je}=l(Le);Je.length&&i("rejected",Je);for(const vt of Ee)Ze.items.add(vt);B.value.files=Ze.files,h.value=[...Ze.files];const it=new Event("change",{bubbles:!0});it.repack=!0,B.value.dispatchEvent(it)}return qt(h,Le=>{(!Array.isArray(Le)||!Le.length)&&B.value&&(B.value.value="")}),Vt(()=>{const Le=!!(r.counter||e.counter),Ze=!!(Le||r.details),[Ee,Je]=pm(n),{modelValue:it,...vt}=ca.filterProps(e),mt={...lm.filterProps(e),"onClick:clear":Y},ot=n.webkitdirectory!==void 0&&n.webkitdirectory!==!1,Ye=n.accept?String(n.accept):void 0,ut=ot?void 0:e.filterByType??Ye;return se(ca,It({ref:R,modelValue:e.multiple?h.value:h.value[0],class:["v-file-input",{"v-file-input--chips":!!e.chips,"v-file-input--dragging":ee.value,"v-file-input--hide":e.hideInput,"v-input--plain-underlined":G.value},e.class],style:e.style,"onClick:prepend":W},Ee,vt,{centerAffix:!G.value,focused:s.value}),{...r,default:Ke=>{let{id:jt,isDisabled:xn,isDirty:ke,isReadonly:Ae,isValid:he,hasDetails:et}=Ke;return se(lm,It({ref:F,prependIcon:e.prependIcon,onMousedown:X,onClick:re,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},mt,{id:jt.value,active:H.value||ke.value,dirty:ke.value||e.dirty,disabled:xn.value,focused:s.value,details:et.value,error:he.value===!1,onDragover:ge,onDrop:Be}),{...r,default:dt=>{let{props:{class:Qe,...Ct},controlRef:Pt}=dt;return z(un,null,[z("input",It({ref:Bt=>B.value=Pt.value=Bt,type:"file",accept:ut,readonly:Ae.value,disabled:xn.value,multiple:e.multiple,name:e.name,onClick:Bt=>{Bt.stopPropagation(),Ae.value&&Bt.preventDefault(),$()},onChange:nt,onDragleave:be,onFocus:$,onBlur:_},Ct,Je),null),z("div",{class:xt(Qe)},[!!h.value?.length&&!e.hideInput&&(r.selection?r.selection({fileNames:P.value,totalBytes:T.value,totalBytesReadable:k.value}):e.chips?P.value.map(Bt=>se(Vo,{key:Bt,size:"small",text:Bt},null)):P.value.join(", "))])])}})},details:Ze?Ke=>z(un,null,[r.details?.(Ke),Le&&z(un,null,[z("span",null,null),se(jT,{active:!!h.value?.length,value:M.value,disabled:e.disabled},r.counter)])]):void 0})}),xo({},R,F,B)}}),Lve=lt({app:Boolean,color:String,height:{type:[Number,String],default:"auto"},...cl(),...wn(),...qs(),...og(),...$r(),...ti({tag:"footer"}),...Ai()},"VFooter"),Rve=At()({name:"VFooter",props:Lve(),setup(e,t){let{slots:n}=t;const i=tt(),{themeClasses:r}=Zi(e),{backgroundColorClasses:a,backgroundColorStyles:l}=nr(()=>e.color),{borderClasses:h}=Bl(e),{elevationClasses:s}=bo(e),{roundedClasses:p}=ts(e),_=Zt(32),{resizeRef:x}=zc(k=>{k.length&&(_.value=k[0].target.clientHeight)}),T=fe(()=>e.height==="auto"?_.value:parseInt(e.height,10));return aa(()=>e.app,()=>{const k=ag({id:e.name,order:fe(()=>parseInt(e.order,10)),position:Ne(()=>"bottom"),layoutSize:T,elementSize:fe(()=>e.height==="auto"?void 0:T.value),active:Ne(()=>e.app),absolute:Ne(()=>e.absolute)});Ur(()=>{i.value=k.layoutItemStyles.value})}),Vt(()=>se(e.tag,{ref:x,class:xt(["v-footer",r.value,a.value,h.value,s.value,p.value,e.class]),style:Yt([l.value,e.app?i.value:{height:pn(e.height)},e.style])},n)),{}}}),Ove=lt({...wn(),...Fse()},"VForm"),Vve=At()({name:"VForm",props:Ove(),emits:{"update:modelValue":e=>!0,submit:e=>!0},setup(e,t){let{slots:n,emit:i}=t;const r=zse(e),a=tt();function l(s){s.preventDefault(),r.reset()}function h(s){const p=s,_=r.validate();p.then=_.then.bind(_),p.catch=_.catch.bind(_),p.finally=_.finally.bind(_),i("submit",p),p.defaultPrevented||_.then(x=>{let{valid:T}=x;T&&a.value?.submit()}),p.preventDefault()}return Vt(()=>z("form",{ref:a,class:xt(["v-form",e.class]),style:Yt(e.style),novalidate:!0,onReset:l,onSubmit:h},[n.default?.(r)])),xo(r,a)}}),Bve=lt({disabled:Boolean,modelValue:{type:Boolean,default:null},...MP()},"VHover"),Fve=At()({name:"VHover",props:Bve(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const i=Pn(e,"modelValue"),{runOpenDelay:r,runCloseDelay:a}=DP(e,l=>!e.disabled&&(i.value=l));return()=>n.default?.({isHovering:i.value,props:{onMouseenter:r,onMouseleave:a}})}}),zve=lt({color:String,direction:{type:String,default:"vertical",validator:e=>["vertical","horizontal"].includes(e)},side:{type:String,default:"end",validator:e=>["start","end","both"].includes(e)},mode:{type:String,default:"intersect",validator:e=>["intersect","manual"].includes(e)},margin:[Number,String],loadMoreText:{type:String,default:"$vuetify.infiniteScroll.loadMore"},emptyText:{type:String,default:"$vuetify.infiniteScroll.empty"},...Os(),...ti()},"VInfiniteScroll"),rF=uc({name:"VInfiniteScrollIntersect",props:{side:{type:String,required:!0},rootMargin:String},emits:{intersect:(e,t)=>!0},setup(e,t){let{emit:n}=t;const{intersectionRef:i,isIntersecting:r}=L0();return qt(r,async a=>{n("intersect",e.side,a)}),Vt(()=>z("div",{class:"v-infinite-scroll-intersect",style:{"--v-infinite-margin-size":e.rootMargin},ref:i},[Fn("")])),{}}}),Nve=At()({name:"VInfiniteScroll",props:zve(),emits:{load:e=>!0},setup(e,t){let{slots:n,emit:i}=t;const r=tt(),a=Zt("ok"),l=Zt("ok"),h=fe(()=>pn(e.margin)),s=Zt(!1);function p(ie){if(!r.value)return;const J=e.direction==="vertical"?"scrollTop":"scrollLeft";r.value[J]=ie}function _(){if(!r.value)return 0;const ie=e.direction==="vertical"?"scrollTop":"scrollLeft";return r.value[ie]}function x(){if(!r.value)return 0;const ie=e.direction==="vertical"?"scrollHeight":"scrollWidth";return r.value[ie]}function T(){if(!r.value)return 0;const ie=e.direction==="vertical"?"clientHeight":"clientWidth";return r.value[ie]}Kr(()=>{r.value&&(e.side==="start"?p(x()):e.side==="both"&&p(x()/2-T()/2))});function k(ie,J){ie==="start"?a.value=J:ie==="end"?l.value=J:ie==="both"&&(a.value=J,l.value=J)}function P(ie){return ie==="start"?a.value:l.value}let M=0;function R(ie,J){s.value=J,s.value&&F(ie)}function F(ie){if(e.mode!=="manual"&&!s.value)return;const J=P(ie);if(!r.value||["empty","loading"].includes(J))return;M=x(),k(ie,"loading");function $(W){k(ie,W),Hn(()=>{W==="empty"||W==="error"||(W==="ok"&&ie==="start"&&p(x()-M+_()),e.mode!=="manual"&&Hn(()=>{window.requestAnimationFrame(()=>{window.requestAnimationFrame(()=>{window.requestAnimationFrame(()=>{F(ie)})})})}))})}i("load",{side:ie,done:$})}const{t:B}=hr();function H(ie,J){if(e.side!==ie&&e.side!=="both")return;const $=()=>F(ie),W={side:ie,props:{onClick:$,color:e.color}};return J==="error"?n.error?.(W):J==="empty"?n.empty?.(W)??z("div",null,[B(e.emptyText)]):e.mode==="manual"?J==="loading"?n.loading?.(W)??se(Gp,{indeterminate:!0,color:e.color},null):n["load-more"]?.(W)??se(ci,{variant:"outlined",color:e.color,onClick:$},{default:()=>[B(e.loadMoreText)]}):n.loading?.(W)??se(Gp,{indeterminate:!0,color:e.color},null)}const{dimensionStyles:G}=Vs(e);Vt(()=>{const ie=e.tag,J=e.side==="start"||e.side==="both",$=e.side==="end"||e.side==="both",W=e.mode==="intersect";return se(ie,{ref:r,class:xt(["v-infinite-scroll",`v-infinite-scroll--${e.direction}`,{"v-infinite-scroll--start":J,"v-infinite-scroll--end":$}]),style:Yt(G.value)},{default:()=>[z("div",{class:"v-infinite-scroll__side"},[H("start",a.value)]),J&&W&&se(rF,{key:"start",side:"start",onIntersect:R,rootMargin:h.value},null),n.default?.(),$&&W&&se(rF,{key:"end",side:"end",onIntersect:R,rootMargin:h.value},null),z("div",{class:"v-infinite-scroll__side"},[H("end",l.value)])]})});function ee(ie){const J=ie??e.side;k(J,"ok"),Hn(()=>{p(x()-M+_()),e.mode!=="manual"&&Hn(()=>{window.requestAnimationFrame(()=>{window.requestAnimationFrame(()=>{window.requestAnimationFrame(()=>{J==="both"?(F("start"),F("end")):F(J)})})})})})}return{reset:ee}}}),g9=Symbol.for("vuetify:v-item-group"),Uve=lt({...wn(),...cg({selectedClass:"v-item--selected"}),...ti(),...Ai()},"VItemGroup"),$ve=At()({name:"VItemGroup",props:Uve(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{themeClasses:i}=Zi(e),{isSelected:r,select:a,next:l,prev:h,selected:s}=vm(e,g9);return()=>se(e.tag,{class:xt(["v-item-group",i.value,e.class]),style:Yt(e.style)},{default:()=>[n.default?.({isSelected:r,select:a,next:l,prev:h,selected:s.value})]})}}),jve=At()({name:"VItem",props:ug(),emits:{"group:selected":e=>!0},setup(e,t){let{slots:n}=t;const{isSelected:i,select:r,toggle:a,selectedClass:l,value:h,disabled:s}=om(e,g9);return()=>n.default?.({isSelected:i.value,selectedClass:l.value,select:r,toggle:a,value:h.value,disabled:s.value})}}),Wve=lt({color:String,...cl(),...wn(),...$r(),...ti({tag:"kbd"}),...Ai(),...qs()},"VKbd"),Hve=At()({name:"VKbd",props:Wve(),setup(e,t){let{slots:n}=t;const{themeClasses:i}=Zi(e),{borderClasses:r}=Bl(e),{roundedClasses:a}=ts(e),{backgroundColorClasses:l,backgroundColorStyles:h}=nr(()=>e.color),{elevationClasses:s}=bo(e);return Vt(()=>se(e.tag,{class:xt(["v-kbd",i.value,l.value,r.value,s.value,a.value,e.class]),style:Yt([h.value,e.style])},n)),{}}}),Gve=lt({...wn(),...Os(),...K6()},"VLayout"),qve=At()({name:"VLayout",props:Gve(),setup(e,t){let{slots:n}=t;const{layoutClasses:i,layoutStyles:r,getLayoutItem:a,items:l,layoutRef:h}=Y6(e),{dimensionStyles:s}=Vs(e);return Vt(()=>z("div",{ref:h,class:xt([i.value,e.class]),style:Yt([s.value,r.value,e.style])},[n.default?.()])),{getLayoutItem:a,items:l}}}),Kve=lt({position:{type:String,required:!0},size:{type:[Number,String],default:300},modelValue:Boolean,...wn(),...og()},"VLayoutItem"),Xve=At()({name:"VLayoutItem",props:Kve(),setup(e,t){let{slots:n}=t;const{layoutItemStyles:i}=ag({id:e.name,order:fe(()=>parseInt(e.order,10)),position:Ne(()=>e.position),elementSize:Ne(()=>e.size),layoutSize:Ne(()=>e.size),active:Ne(()=>e.modelValue),absolute:Ne(()=>e.absolute)});return()=>z("div",{class:xt(["v-layout-item",e.class]),style:Yt([i.value,e.style])},[n.default?.()])}}),Yve=lt({modelValue:Boolean,options:{type:Object,default:()=>({root:void 0,rootMargin:void 0,threshold:void 0})},...wn(),...Os(),...ti(),...Mh({transition:"fade-transition"})},"VLazy"),Zve=At()({name:"VLazy",directives:{vIntersect:gu},props:Yve(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{dimensionStyles:i}=Vs(e),r=Pn(e,"modelValue");function a(l){r.value||(r.value=l)}return Vt(()=>Ii(se(e.tag,{class:xt(["v-lazy",e.class]),style:Yt([i.value,e.style])},{default:()=>[r.value&&se(Fa,{transition:e.transition,appear:!0},{default:()=>[n.default?.()]})]}),[[gu,{handler:a,options:e.options},null]])),{}}}),Jve=lt({locale:String,fallbackLocale:String,messages:Object,rtl:{type:Boolean,default:void 0},...wn()},"VLocaleProvider"),Qve=At()({name:"VLocaleProvider",props:Jve(),setup(e,t){let{slots:n}=t;const{rtlClasses:i}=tie(e);return Vt(()=>z("div",{class:xt(["v-locale-provider",i.value,e.class]),style:Yt(e.style)},[n.default?.()])),{}}}),e_e=lt({scrollable:Boolean,...wn(),...Os(),...ti({tag:"main"})},"VMain"),t_e=At()({name:"VMain",props:e_e(),setup(e,t){let{slots:n}=t;const{dimensionStyles:i}=Vs(e),{mainStyles:r}=X6(),{ssrBootStyles:a}=hg();return Vt(()=>se(e.tag,{class:xt(["v-main",{"v-main--scrollable":e.scrollable},e.class]),style:Yt([r.value,a.value,i.value,e.style])},{default:()=>[e.scrollable?z("div",{class:"v-main__scroller"},[n.default?.()]):n.default?.()]})),{}}});function n_e(e){let{rootEl:t,isSticky:n,layoutItemStyles:i}=e;const r=Zt(!1),a=Zt(0),l=fe(()=>{const p=typeof r.value=="boolean"?"top":r.value;return[n.value?{top:"auto",bottom:"auto",height:void 0}:void 0,r.value?{[p]:pn(a.value)}:{top:i.value.top}]});Kr(()=>{qt(n,p=>{p?window.addEventListener("scroll",s,{passive:!0}):window.removeEventListener("scroll",s)},{immediate:!0})}),Nr(()=>{window.removeEventListener("scroll",s)});let h=0;function s(){const p=h>window.scrollY?"up":"down",_=t.value.getBoundingClientRect(),x=parseFloat(i.value.top??0),T=window.scrollY-Math.max(0,a.value-x),k=_.height+Math.max(a.value,x)-window.scrollY-window.innerHeight,P=parseFloat(getComputedStyle(t.value).getPropertyValue("--v-body-scroll-y"))||0;_.height<window.innerHeight-x?(r.value="top",a.value=x):p==="up"&&r.value==="bottom"||p==="down"&&r.value==="top"?(a.value=window.scrollY+_.top-P,r.value=!0):p==="down"&&k<=0?(a.value=0,r.value="bottom"):p==="up"&&T<=0&&(P?r.value!=="top"&&(a.value=-T+P+x,r.value="top"):(a.value=_.top+T,r.value="top")),h=window.scrollY}return{isStuck:r,stickyStyles:l}}const i_e=100,r_e=20;function sF(e){return(e<0?-1:1)*Math.sqrt(Math.abs(e))*1.41421356237}function oF(e){if(e.length<2)return 0;if(e.length===2)return e[1].t===e[0].t?0:(e[1].d-e[0].d)/(e[1].t-e[0].t);let t=0;for(let n=e.length-1;n>0;n--){if(e[n].t===e[n-1].t)continue;const i=sF(t),r=(e[n].d-e[n-1].d)/(e[n].t-e[n-1].t);t+=(r-i)*Math.abs(r),n===e.length-1&&(t*=.5)}return sF(t)*1e3}function s_e(){const e={};function t(r){Array.from(r.changedTouches).forEach(a=>{(e[a.identifier]??(e[a.identifier]=new b6(r_e))).push([r.timeStamp,a])})}function n(r){Array.from(r.changedTouches).forEach(a=>{delete e[a.identifier]})}function i(r){const a=e[r]?.values().reverse();if(!a)throw new Error(`No samples for touch id ${r}`);const l=a[0],h=[],s=[];for(const p of a){if(l[0]-p[0]>i_e)break;h.push({t:p[0],d:p[1].clientX}),s.push({t:p[0],d:p[1].clientY})}return{x:oF(h),y:oF(s),get direction(){const{x:p,y:_}=this,[x,T]=[Math.abs(p),Math.abs(_)];return x>T&&p>=0?"right":x>T&&p<=0?"left":T>x&&_>=0?"down":T>x&&_<=0?"up":o_e()}}}return{addMovement:t,endTouch:n,getVelocity:i}}function o_e(){throw new Error}function a_e(e){let{el:t,isActive:n,isTemporary:i,width:r,touchless:a,position:l}=e;Kr(()=>{window.addEventListener("touchstart",B,{passive:!0}),window.addEventListener("touchmove",H,{passive:!1}),window.addEventListener("touchend",G,{passive:!0})}),Nr(()=>{window.removeEventListener("touchstart",B),window.removeEventListener("touchmove",H),window.removeEventListener("touchend",G)});const h=fe(()=>["left","right"].includes(l.value)),{addMovement:s,endTouch:p,getVelocity:_}=s_e();let x=!1;const T=Zt(!1),k=Zt(0),P=Zt(0);let M;function R(ie,J){return(l.value==="left"?ie:l.value==="right"?document.documentElement.clientWidth-ie:l.value==="top"?ie:l.value==="bottom"?document.documentElement.clientHeight-ie:uv())-(J?r.value:0)}function F(ie){let J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const $=l.value==="left"?(ie-P.value)/r.value:l.value==="right"?(document.documentElement.clientWidth-ie-P.value)/r.value:l.value==="top"?(ie-P.value)/r.value:l.value==="bottom"?(document.documentElement.clientHeight-ie-P.value)/r.value:uv();return J?Er($):$}function B(ie){if(a.value)return;const J=ie.changedTouches[0].clientX,$=ie.changedTouches[0].clientY,W=25,X=l.value==="left"?J<W:l.value==="right"?J>document.documentElement.clientWidth-W:l.value==="top"?$<W:l.value==="bottom"?$>document.documentElement.clientHeight-W:uv(),re=n.value&&(l.value==="left"?J<r.value:l.value==="right"?J>document.documentElement.clientWidth-r.value:l.value==="top"?$<r.value:l.value==="bottom"?$>document.documentElement.clientHeight-r.value:uv());(X||re||n.value&&i.value)&&(M=[J,$],P.value=R(h.value?J:$,n.value),k.value=F(h.value?J:$),x=P.value>-20&&P.value<80,p(ie),s(ie))}function H(ie){const J=ie.changedTouches[0].clientX,$=ie.changedTouches[0].clientY;if(x){if(!ie.cancelable){x=!1;return}const X=Math.abs(J-M[0]),re=Math.abs($-M[1]);(h.value?X>re&&X>3:re>X&&re>3)?(T.value=!0,x=!1):(h.value?re:X)>3&&(x=!1)}if(!T.value)return;ie.preventDefault(),s(ie);const W=F(h.value?J:$,!1);k.value=Math.max(0,Math.min(1,W)),W>1?P.value=R(h.value?J:$,!0):W<0&&(P.value=R(h.value?J:$,!1))}function G(ie){if(x=!1,!T.value)return;s(ie),T.value=!1;const J=_(ie.changedTouches[0].identifier),$=Math.abs(J.x),W=Math.abs(J.y);(h.value?$>W&&$>400:W>$&&W>3)?n.value=J.direction===({left:"right",right:"left",top:"down",bottom:"up"}[l.value]||uv()):n.value=k.value>.5}const ee=fe(()=>T.value?{transform:l.value==="left"?`translateX(calc(-100% + ${k.value*r.value}px))`:l.value==="right"?`translateX(calc(100% - ${k.value*r.value}px))`:l.value==="top"?`translateY(calc(-100% + ${k.value*r.value}px))`:l.value==="bottom"?`translateY(calc(100% - ${k.value*r.value}px))`:uv(),transition:"none"}:void 0);return aa(T,()=>{const ie=t.value?.style.transform??null,J=t.value?.style.transition??null;Ur(()=>{t.value?.style.setProperty("transform",ee.value?.transform||"none"),t.value?.style.setProperty("transition",ee.value?.transition||null)}),so(()=>{t.value?.style.setProperty("transform",ie),t.value?.style.setProperty("transition",J)})}),{isDragging:T,dragProgress:k,dragStyles:ee}}function uv(){throw new Error}const l_e=["start","end","left","right","top","bottom"],c_e=lt({color:String,disableResizeWatcher:Boolean,disableRouteWatcher:Boolean,expandOnHover:Boolean,floating:Boolean,modelValue:{type:Boolean,default:null},permanent:Boolean,rail:{type:Boolean,default:null},railWidth:{type:[Number,String],default:56},scrim:{type:[Boolean,String],default:!0},image:String,temporary:Boolean,persistent:Boolean,touchless:Boolean,width:{type:[Number,String],default:256},location:{type:String,default:"start",validator:e=>l_e.includes(e)},sticky:Boolean,...cl(),...wn(),...MP(),...sg({mobile:null}),...qs(),...og(),...$r(),...ti({tag:"nav"}),...Ai()},"VNavigationDrawer"),u_e=At()({name:"VNavigationDrawer",props:c_e(),emits:{"update:modelValue":e=>!0,"update:rail":e=>!0},setup(e,t){let{attrs:n,emit:i,slots:r}=t;const{isRtl:a}=Gs(),{themeClasses:l}=Zi(e),{borderClasses:h}=Bl(e),{backgroundColorClasses:s,backgroundColorStyles:p}=nr(()=>e.color),{elevationClasses:_}=bo(e),{displayClasses:x,mobile:T}=Vl(e),{roundedClasses:k}=ts(e),P=iU(),M=Pn(e,"modelValue",null,Ze=>!!Ze),{ssrBootStyles:R}=hg(),{scopeId:F}=fg(),B=tt(),H=Zt(!1),{runOpenDelay:G,runCloseDelay:ee}=DP(e,Ze=>{H.value=Ze}),ie=fe(()=>e.rail&&e.expandOnHover&&H.value?Number(e.width):Number(e.rail?e.railWidth:e.width)),J=fe(()=>Rk(e.location,a.value)),$=Ne(()=>e.persistent),W=fe(()=>!e.permanent&&(T.value||e.temporary)),X=fe(()=>e.sticky&&!W.value&&J.value!=="bottom");aa(()=>e.expandOnHover&&e.rail!=null,()=>{qt(H,Ze=>i("update:rail",!Ze))}),aa(()=>!e.disableResizeWatcher,()=>{qt(W,Ze=>!e.permanent&&Hn(()=>M.value=!Ze))}),aa(()=>!e.disableRouteWatcher&&!!P,()=>{qt(P.currentRoute,()=>W.value&&(M.value=!1))}),qt(()=>e.permanent,Ze=>{Ze&&(M.value=!0)}),e.modelValue==null&&!W.value&&(M.value=e.permanent||!T.value);const{isDragging:re,dragProgress:Y}=a_e({el:B,isActive:M,isTemporary:W,width:ie,touchless:Ne(()=>e.touchless),position:J}),Z=fe(()=>{const Ze=W.value?0:e.rail&&e.expandOnHover?Number(e.railWidth):ie.value;return re.value?Ze*Y.value:Ze}),{layoutItemStyles:ge,layoutItemScrimStyles:be}=ag({id:e.name,order:fe(()=>parseInt(e.order,10)),position:J,layoutSize:Z,elementSize:ie,active:Fp(M),disableTransitions:Ne(()=>re.value),absolute:fe(()=>e.absolute||X.value&&typeof Be.value!="string")}),{isStuck:Be,stickyStyles:nt}=n_e({rootEl:B,isSticky:X,layoutItemStyles:ge}),We=nr(()=>typeof e.scrim=="string"?e.scrim:null),Le=fe(()=>({...re.value?{opacity:Y.value*.2,transition:"none"}:void 0,...be.value}));return es({VList:{bgColor:"transparent"}}),Vt(()=>{const Ze=r.image||e.image;return z(un,null,[se(e.tag,It({ref:B,onMouseenter:G,onMouseleave:ee,class:["v-navigation-drawer",`v-navigation-drawer--${J.value}`,{"v-navigation-drawer--expand-on-hover":e.expandOnHover,"v-navigation-drawer--floating":e.floating,"v-navigation-drawer--is-hovering":H.value,"v-navigation-drawer--rail":e.rail,"v-navigation-drawer--temporary":W.value,"v-navigation-drawer--persistent":$.value,"v-navigation-drawer--active":M.value,"v-navigation-drawer--sticky":X.value},l.value,s.value,h.value,x.value,_.value,k.value,e.class],style:[p.value,ge.value,R.value,nt.value,e.style]},F,n),{default:()=>[Ze&&z("div",{key:"image",class:"v-navigation-drawer__img"},[r.image?se(ui,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{alt:"",cover:!0,height:"inherit",src:e.image}}},r.image):se(wh,{key:"image-img",alt:"",cover:!0,height:"inherit",src:e.image},null)]),r.prepend&&z("div",{class:"v-navigation-drawer__prepend"},[r.prepend?.()]),z("div",{class:"v-navigation-drawer__content"},[r.default?.()]),r.append&&z("div",{class:"v-navigation-drawer__append"},[r.append?.()])]}),se(od,{name:"fade-transition"},{default:()=>[W.value&&(re.value||M.value)&&!!e.scrim&&z("div",It({class:["v-navigation-drawer__scrim",We.backgroundColorClasses.value],style:[Le.value,We.backgroundColorStyles.value],onClick:()=>{$.value||(M.value=!1)}},F),null)]})])}),{isStuck:Be}}}),d_e=uc({name:"VNoSsr",setup(e,t){let{slots:n}=t;const i=u$();return()=>i.value&&n.default?.()}}),h_e=50,f_e=500;function m_e(e){let{toggleUpDown:t}=e,n=-1,i=-1;so(a);function r(h){a(),l(h),window.addEventListener("pointerup",a),document.addEventListener("blur",a),n=window.setTimeout(()=>{i=window.setInterval(()=>l(h),h_e)},f_e)}function a(){window.clearTimeout(n),window.clearInterval(i),window.removeEventListener("pointerup",a),document.removeEventListener("blur",a)}function l(h){t(h==="up")}return{holdStart:r,holdStop:a}}const p_e=lt({controlVariant:{type:String,default:"default"},inset:Boolean,hideInput:Boolean,modelValue:{type:Number,default:null},min:{type:Number,default:Number.MIN_SAFE_INTEGER},max:{type:Number,default:Number.MAX_SAFE_INTEGER},step:{type:Number,default:1},precision:{type:Number,default:0},minFractionDigits:{type:Number,default:null},decimalSeparator:{type:String,validator:e=>!e||e.length===1},...dr(j0(),["modelValue","validationValue"])},"VNumberInput"),g_e=At()({name:"VNumberInput",props:{...p_e()},emits:{"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const i=tt(),{holdStart:r,holdStop:a}=m_e({toggleUpDown:W}),l=A_(e),h=fe(()=>l.isDisabled.value||l.isReadonly.value),s=Zt(e.focused),{decimalSeparator:p}=hr(),_=fe(()=>e.decimalSeparator?.[0]||p.value);function x(Ee){let Je=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e.precision,it=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const vt=Je==null?String(Ee):Ee.toFixed(Je);if(s.value&&it)return Number(vt).toString().replace(".",_.value);if(e.minFractionDigits===null||Je!==null&&Je<e.minFractionDigits)return vt.replace(".",_.value);let[mt,ot]=vt.split(".");return ot=(ot??"").padEnd(e.minFractionDigits,"0").replace(new RegExp(`(?<=\\d{${e.minFractionDigits}})0+$`,"g"),""),[mt,ot].filter(Boolean).join(_.value)}const T=Pn(e,"modelValue",null,Ee=>Ee??null,Ee=>Ee==null?Ee??null:Er(Number(Ee),e.min,e.max)),k=Zt(null);Ur(()=>{s.value&&!h.value&&Number(k.value?.replace(_.value,"."))===T.value||(T.value==null?k.value=null:isNaN(T.value)||(k.value=x(T.value)))});const P=fe({get:()=>k.value,set(Ee){if(Ee===null||Ee===""){T.value=null,k.value=null;return}const Je=Number(Ee.replace(_.value,"."));!isNaN(Je)&&Je<=e.max&&Je>=e.min&&(T.value=Je,k.value=Ee)}}),M=fe(()=>h.value?!1:(T.value??0)+e.step<=e.max),R=fe(()=>h.value?!1:(T.value??0)-e.step>=e.min),F=fe(()=>e.hideInput?"stacked":e.controlVariant),B=Ne(()=>F.value==="split"?"$plus":"$collapse"),H=Ne(()=>F.value==="split"?"$minus":"$expand"),G=Ne(()=>F.value==="split"?"default":"small"),ee=Ne(()=>F.value==="stacked"?"auto":"100%"),ie={props:{onClick:Y,onPointerup:Z,onPointerdown:ge,onPointercancel:Z}},J={props:{onClick:Y,onPointerup:Z,onPointerdown:be,onPointercancel:Z}};qt(()=>e.precision,()=>nt()),qt(()=>e.minFractionDigits,()=>nt()),Kr(()=>{Be()});function $(Ee){if(Ee==null)return 0;const Je=Ee.toString(),it=Je.indexOf(".");return~it?Je.length-it:0}function W(){let Ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;if(h.value)return;if(T.value==null){P.value=x(Er(0,e.min,e.max));return}let Je=Math.max($(T.value),$(e.step));e.precision!=null&&(Je=Math.max(Je,e.precision)),Ee?M.value&&(P.value=x(T.value+e.step,Je)):R.value&&(P.value=x(T.value-e.step,Je))}function X(Ee){if(!Ee.data)return;const Je=Ee.target,{value:it,selectionStart:vt,selectionEnd:mt}=Je??{},ot=it?it.slice(0,vt)+Ee.data+it.slice(mt):Ee.data,Ye=hne(ot,e.precision,_.value);if(new RegExp(`^-?\\d*${A1(_.value)}?\\d*$`).test(ot)||(Ee.preventDefault(),Je.value=Ye,Hn(()=>P.value=Ye)),e.precision!=null){if(ot.split(_.value)[1]?.length>e.precision){Ee.preventDefault(),Je.value=Ye,Hn(()=>P.value=Ye);const ut=(vt??0)+Ee.data.length;Je.setSelectionRange(ut,ut)}e.precision===0&&ot.endsWith(_.value)&&(Ee.preventDefault(),Je.value=Ye,Hn(()=>P.value=Ye))}}async function re(Ee){["Enter","ArrowLeft","ArrowRight","Backspace","Delete","Tab"].includes(Ee.key)||Ee.ctrlKey||["ArrowDown","ArrowUp"].includes(Ee.key)&&(Ee.preventDefault(),Ee.stopPropagation(),Be(),await Hn(),Ee.key==="ArrowDown"?W(!1):W())}function Y(Ee){Ee.stopPropagation()}function Z(Ee){Ee.currentTarget?.releasePointerCapture(Ee.pointerId),Ee.preventDefault(),a()}function ge(Ee){Ee.currentTarget?.setPointerCapture(Ee.pointerId),Ee.preventDefault(),Ee.stopPropagation(),r("up")}function be(Ee){Ee.currentTarget?.setPointerCapture(Ee.pointerId),Ee.preventDefault(),Ee.stopPropagation(),r("down")}function Be(){if(h.value||!i.value)return;const Ee=i.value.value,Je=Number(Ee.replace(_.value,"."));Ee&&!isNaN(Je)?P.value=x(Er(Je,e.min,e.max)):P.value=null}function nt(){h.value||(P.value=T.value!==null&&!isNaN(T.value)?x(T.value,e.precision,!1):null)}function We(){if(!h.value){if(T.value===null||isNaN(T.value)){P.value=null;return}P.value=T.value.toString().replace(".",_.value)}}function Le(){We()}function Ze(){Be()}return Vt(()=>{const{modelValue:Ee,type:Je,...it}=Th.filterProps(e);function vt(){return n.increment?se(ui,{key:"increment-defaults",defaults:{VBtn:{disabled:!M.value,height:ee.value,size:G.value,icon:B.value,variant:"text"}}},{default:()=>[n.increment(ie)]}):se(ci,{"aria-hidden":"true","data-testid":"increment",disabled:!M.value,height:ee.value,icon:B.value,key:"increment-btn",onClick:Y,onPointerdown:ge,onPointerup:Z,onPointercancel:Z,size:G.value,variant:"text",tabindex:"-1"},null)}function mt(){return n.decrement?se(ui,{key:"decrement-defaults",defaults:{VBtn:{disabled:!R.value,height:ee.value,size:G.value,icon:H.value,variant:"text"}}},{default:()=>[n.decrement(J)]}):se(ci,{"aria-hidden":"true","data-testid":"decrement",disabled:!R.value,height:ee.value,icon:H.value,key:"decrement-btn",onClick:Y,onPointerdown:be,onPointerup:Z,onPointercancel:Z,size:G.value,variant:"text",tabindex:"-1"},null)}function ot(){return z("div",{class:"v-number-input__control"},[mt(),se(za,{vertical:F.value!=="stacked"},null),vt()])}function Ye(){return!e.hideInput&&!e.inset?se(za,{vertical:!0},null):void 0}const ut=F.value==="split"?z("div",{class:"v-number-input__control"},[se(za,{vertical:!0},null),vt()]):e.reverse||F.value==="hidden"?void 0:z(un,null,[Ye(),ot()]),Ke=n["append-inner"]||ut,jt=F.value==="split"?z("div",{class:"v-number-input__control"},[mt(),se(za,{vertical:!0},null)]):e.reverse&&F.value!=="hidden"?z(un,null,[ot(),Ye()]):void 0,xn=n["prepend-inner"]||jt;return se(Th,It({ref:i},it,{modelValue:P.value,"onUpdate:modelValue":ke=>P.value=ke,focused:s.value,"onUpdate:focused":ke=>s.value=ke,validationValue:T.value,onBeforeinput:X,onFocus:Le,onBlur:Ze,onKeydown:re,class:["v-number-input",{"v-number-input--default":F.value==="default","v-number-input--hide-input":e.hideInput,"v-number-input--inset":e.inset,"v-number-input--reverse":e.reverse,"v-number-input--split":F.value==="split","v-number-input--stacked":F.value==="stacked"},e.class],style:e.style,inputmode:"decimal"}),{...n,"append-inner":Ke?function(){for(var ke=arguments.length,Ae=new Array(ke),he=0;he<ke;he++)Ae[he]=arguments[he];return z(un,null,[n["append-inner"]?.(...Ae),ut])}:void 0,"prepend-inner":xn?function(){for(var ke=arguments.length,Ae=new Array(ke),he=0;he<ke;he++)Ae[he]=arguments[he];return z(un,null,[jt,n["prepend-inner"]?.(...Ae)])}:void 0})}),xo({},i)}}),v_e=lt({autofocus:Boolean,divider:String,focusAll:Boolean,label:{type:String,default:"$vuetify.input.otp"},length:{type:[Number,String],default:6},modelValue:{type:[Number,String],default:void 0},placeholder:String,type:{type:String,default:"number"},...Os(),...N0(),...Ol($0({variant:"outlined"}),["baseColor","bgColor","class","color","disabled","error","loading","rounded","style","theme","variant"])},"VOtpInput"),__e=At()({name:"VOtpInput",props:v_e(),emits:{finish:e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{attrs:n,emit:i,slots:r}=t;const{dimensionStyles:a}=Vs(e),{isFocused:l,focus:h,blur:s}=Dh(e),p=Pn(e,"modelValue","",X=>X==null?[]:String(X).split(""),X=>X.join("")),{t:_}=hr(),x=fe(()=>Number(e.length)),T=fe(()=>Array(x.value).fill(0)),k=tt(-1),P=tt(),M=tt([]),R=fe(()=>M.value[k.value]);let F=!1;aa(()=>e.autofocus,()=>{const X=zv();X.run(()=>{const{intersectionRef:re,isIntersecting:Y}=L0();Ur(()=>{re.value=M.value[0]}),qt(Y,Z=>{Z&&(re.value?.focus(),X.stop())})})});function B(){if(W(R.value.value)){R.value.value="";return}if(F)return;const X=p.value.slice(),re=R.value.value;X[k.value]=re;let Y=null;k.value>p.value.length?Y=p.value.length+1:k.value+1!==x.value&&(Y="next"),p.value=X,Y&&Lp(P.value,Y)}function H(){F=!1,B()}function G(X){const re=p.value.slice(),Y=k.value;let Z=null;["ArrowLeft","ArrowRight","Backspace","Delete"].includes(X.key)&&(X.preventDefault(),X.key==="ArrowLeft"?Z="prev":X.key==="ArrowRight"?Z="next":["Backspace","Delete"].includes(X.key)&&(re[k.value]="",p.value=re,k.value>0&&X.key==="Backspace"?Z="prev":requestAnimationFrame(()=>{M.value[Y]?.select()})),requestAnimationFrame(()=>{Z!=null&&Lp(P.value,Z)}))}function ee(X,re){re.preventDefault(),re.stopPropagation();const Y=re?.clipboardData?.getData("Text").trim().slice(0,x.value)??"",Z=Y.length-1===-1?X:Y.length-1;W(Y)||(p.value=Y.split(""),k.value=Z)}function ie(){p.value=[]}function J(X,re){h(),k.value=re}function $(){s(),k.value=-1}function W(X){return e.type==="number"&&/[^0-9]/g.test(X)}return es({VField:{color:Ne(()=>e.color),bgColor:Ne(()=>e.color),baseColor:Ne(()=>e.baseColor),disabled:Ne(()=>e.disabled),error:Ne(()=>e.error),variant:Ne(()=>e.variant)}},{scoped:!0}),qt(p,X=>{X.length===x.value&&i("finish",X.join(""))},{deep:!0}),qt(k,X=>{X<0||Hn(()=>{M.value[X]?.select()})}),Vt(()=>{const[X,re]=pm(n);return z("div",It({class:["v-otp-input",{"v-otp-input--divided":!!e.divider},e.class],style:[e.style]},X),[z("div",{ref:P,class:"v-otp-input__content",style:Yt([a.value])},[T.value.map((Y,Z)=>z(un,null,[e.divider&&Z!==0&&z("span",{class:"v-otp-input__divider"},[e.divider]),se(lm,{focused:l.value&&e.focusAll||k.value===Z,key:Z},{...r,loader:void 0,default:()=>z("input",{ref:ge=>M.value[Z]=ge,"aria-label":_(e.label,Z+1),autofocus:Z===0&&e.autofocus,autocomplete:"one-time-code",class:xt(["v-otp-input__field"]),disabled:e.disabled,inputmode:e.type==="number"?"numeric":"text",min:e.type==="number"?0:void 0,maxlength:Z===0?x.value:"1",placeholder:e.placeholder,type:e.type==="number"?"text":e.type,value:p.value[Z],onInput:B,onFocus:ge=>J(ge,Z),onBlur:$,onKeydown:G,onCompositionstart:()=>F=!0,onCompositionend:H,onPaste:ge=>ee(Z,ge)},null)})])),z("input",It({class:"v-otp-input-input",type:"hidden"},re,{value:p.value.join("")}),null),se(fd,{contained:!0,contentClass:"v-otp-input__loader",modelValue:!!e.loading,persistent:!0},{default:()=>[r.loader?.()??se(Gp,{color:typeof e.loading=="boolean"?void 0:e.loading,indeterminate:!0,size:"24",width:"2"},null)]}),r.default?.()])])}),{blur:()=>{M.value?.some(X=>X.blur())},focus:()=>{M.value?.[0].focus()},reset:ie,isFocused:l}}});function y_e(e){return Math.floor(Math.abs(e))*Math.sign(e)}const b_e=lt({scale:{type:[Number,String],default:.5},...wn()},"VParallax"),x_e=At()({name:"VParallax",props:b_e(),setup(e,t){let{slots:n}=t;const{intersectionRef:i,isIntersecting:r}=L0(),{resizeRef:a,contentRect:l}=zc(),{height:h}=Vl(),s=tt();Ur(()=>{i.value=a.value=s.value?.$el});let p;qt(r,k=>{k?(p=OT(i.value),p=p===document.scrollingElement?document:p,p.addEventListener("scroll",T,{passive:!0}),T()):p.removeEventListener("scroll",T)}),Nr(()=>{p?.removeEventListener("scroll",T)}),qt(h,T),qt(()=>l.value?.height,T);const _=fe(()=>1-Er(Number(e.scale)));let x=-1;function T(){!r.value||ud()||(cancelAnimationFrame(x),x=requestAnimationFrame(()=>{const k=(s.value?.$el).querySelector(".v-img__img");if(!k)return;const P=p instanceof Document?document.documentElement.clientHeight:p.clientHeight,M=p instanceof Document?window.scrollY:p.scrollTop,R=i.value.getBoundingClientRect().top+M,F=l.value.height,B=R+(F-P)/2,H=y_e((M-B)*_.value),G=Math.max(1,(_.value*(P-F)+F)/F);k.style.setProperty("transform",`translateY(${H}px) scale(${G})`)}))}return Vt(()=>se(wh,{class:xt(["v-parallax",{"v-parallax--active":r.value},e.class]),style:Yt(e.style),ref:s,cover:!0,onLoadstart:T,onLoad:T},n)),{}}}),w_e=lt({...$T({falseIcon:"$radioOff",trueIcon:"$radioOn"})},"VRadio"),T_e=At()({name:"VRadio",props:w_e(),setup(e,t){let{slots:n}=t;return Vt(()=>{const i=am.filterProps(e);return se(am,It(i,{class:["v-radio",e.class],style:e.style,type:"radio"}),n)}),{}}}),S_e=lt({height:{type:[Number,String],default:"auto"},...Lh(),...dr(EP(),["multiple"]),trueIcon:{type:kn,default:"$radioOn"},falseIcon:{type:kn,default:"$radioOff"},type:{type:String,default:"radio"}},"VRadioGroup"),E_e=At()({name:"VRadioGroup",inheritAttrs:!1,props:S_e(),emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:n,slots:i}=t;const r=ua(),a=fe(()=>e.id||`radio-group-${r}`),l=Pn(e,"modelValue"),h=tt();return Vt(()=>{const[s,p]=pm(n),_=ca.filterProps(e),x=am.filterProps(e),T=i.label?i.label({label:e.label,props:{for:a.value}}):e.label;return se(ca,It({ref:h,class:["v-radio-group",e.class],style:e.style},s,_,{modelValue:l.value,"onUpdate:modelValue":k=>l.value=k,id:a.value}),{...i,default:k=>{let{id:P,messagesId:M,isDisabled:R,isReadonly:F}=k;return z(un,null,[T&&se(I_,{id:P.value},{default:()=>[T]}),se(OU,It(x,{id:P.value,"aria-describedby":M.value,defaultsTarget:"VRadio",trueIcon:e.trueIcon,falseIcon:e.falseIcon,type:e.type,disabled:R.value,readonly:F.value,"aria-labelledby":T?P.value:void 0,multiple:!1},p,{modelValue:l.value,"onUpdate:modelValue":B=>l.value=B}),i)])}})}),xo({},h)}}),C_e=lt({...N0(),...Lh(),...yj(),strict:Boolean,modelValue:{type:Array,default:()=>[0,0]}},"VRangeSlider"),k_e=At()({name:"VRangeSlider",props:C_e(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,end:e=>!0,start:e=>!0},setup(e,t){let{slots:n,emit:i}=t;const r=tt(),a=tt(),l=tt(),{rtlClasses:h}=Gs();function s(re){if(!r.value||!a.value)return;const Y=aI(re,r.value.$el,e.direction),Z=aI(re,a.value.$el,e.direction),ge=Math.abs(Y),be=Math.abs(Z);return ge<be||ge===be&&Y<0?r.value.$el:a.value.$el}const p=bj(e),_=Pn(e,"modelValue",void 0,re=>re?.length?re.map(Y=>p.roundValue(Y)):[0,0]),{activeThumbRef:x,hasLabels:T,max:k,min:P,mousePressed:M,onSliderMousedown:R,onSliderTouchstart:F,position:B,trackContainerRef:H,disabled:G,readonly:ee}=xj({props:e,steps:p,onSliderStart:()=>{if(G.value||ee.value){x.value?.blur();return}i("start",_.value)},onSliderEnd:re=>{let{value:Y}=re;if(G.value||ee.value)x.value?.blur();else{const Z=x.value===r.value?.$el?[Y,_.value[1]]:[_.value[0],Y];!e.strict&&Z[0]<Z[1]&&(_.value=Z)}i("end",_.value)},onSliderMove:re=>{let{value:Y}=re;const[Z,ge]=_.value;if(G.value||ee.value){x.value?.blur();return}!e.strict&&Z===ge&&Z!==P.value&&(x.value=Y>Z?a.value?.$el:r.value?.$el,x.value?.focus()),x.value===r.value?.$el?_.value=[Math.min(Y,ge),ge]:_.value=[Z,Math.max(Z,Y)]},getActiveThumb:s}),{isFocused:ie,focus:J,blur:$}=Dh(e),W=fe(()=>B(_.value[0])),X=fe(()=>B(_.value[1]));return Vt(()=>{const re=ca.filterProps(e),Y=!!(e.label||n.label||n.prepend);return se(ca,It({class:["v-slider","v-range-slider",{"v-slider--has-labels":!!n["tick-label"]||T.value,"v-slider--focused":ie.value,"v-slider--pressed":M.value,"v-slider--disabled":G.value},h.value,e.class],style:e.style,ref:l},re,{focused:ie.value}),{...n,prepend:Y?Z=>z(un,null,[n.label?.(Z)??(e.label?se(I_,{class:"v-slider__label",text:e.label},null):void 0),n.prepend?.(Z)]):void 0,default:Z=>{let{id:ge,messagesId:be}=Z;return z("div",{class:"v-slider__container",onMousedown:ee.value?void 0:R,onTouchstartPassive:ee.value?void 0:F},[z("input",{id:`${ge.value}_start`,name:e.name||ge.value,disabled:G.value,readonly:ee.value,tabindex:"-1",value:_.value[0]},null),z("input",{id:`${ge.value}_stop`,name:e.name||ge.value,disabled:G.value,readonly:ee.value,tabindex:"-1",value:_.value[1]},null),se(wj,{ref:H,start:W.value,stop:X.value},{"tick-label":n["tick-label"]}),se(lI,{ref:r,"aria-describedby":be.value,focused:ie&&x.value===r.value?.$el,modelValue:_.value[0],"onUpdate:modelValue":Be=>_.value=[Be,_.value[1]],onFocus:Be=>{J(),x.value=r.value?.$el,k.value!==P.value&&_.value[0]===_.value[1]&&_.value[1]===P.value&&Be.relatedTarget!==a.value?.$el&&(r.value?.$el.blur(),a.value?.$el.focus())},onBlur:()=>{$(),x.value=void 0},min:P.value,max:_.value[1],position:W.value,ripple:e.ripple},{"thumb-label":n["thumb-label"]}),se(lI,{ref:a,"aria-describedby":be.value,focused:ie&&x.value===a.value?.$el,modelValue:_.value[1],"onUpdate:modelValue":Be=>_.value=[_.value[0],Be],onFocus:Be=>{J(),x.value=a.value?.$el,k.value!==P.value&&_.value[0]===_.value[1]&&_.value[0]===k.value&&Be.relatedTarget!==r.value?.$el&&(a.value?.$el.blur(),r.value?.$el.focus())},onBlur:()=>{$(),x.value=void 0},min:_.value[0],max:k.value,position:X.value,ripple:e.ripple},{"thumb-label":n["thumb-label"]})])}})}),xo({focus:()=>r.value?.$el.focus()},l)}}),I_e=lt({name:String,itemAriaLabel:{type:String,default:"$vuetify.rating.ariaLabel.item"},activeColor:String,color:String,clearable:Boolean,disabled:Boolean,emptyIcon:{type:kn,default:"$ratingEmpty"},fullIcon:{type:kn,default:"$ratingFull"},halfIncrements:Boolean,hover:Boolean,length:{type:[Number,String],default:5},readonly:Boolean,modelValue:{type:[Number,String],default:0},itemLabels:Array,itemLabelPosition:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},ripple:Boolean,...wn(),...ws(),...gd(),...ti(),...Ai()},"VRating"),A_e=At()({name:"VRating",props:I_e(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{t:i}=hr(),{themeClasses:r}=Zi(e),a=Pn(e,"modelValue"),l=fe(()=>Er(parseFloat(a.value),0,Number(e.length))),h=fe(()=>rc(Number(e.length),1)),s=fe(()=>h.value.flatMap(R=>e.halfIncrements?[R-.5,R]:[R])),p=Zt(-1),_=fe(()=>s.value.map(R=>{const F=e.hover&&p.value>-1,B=l.value>=R,H=p.value>=R,ee=(F?H:B)?e.fullIcon:e.emptyIcon,ie=e.activeColor??e.color,J=B||H?ie:e.color;return{isFilled:B,isHovered:H,icon:ee,color:J}})),x=fe(()=>[0,...s.value].map(R=>{function F(){p.value=R}function B(){p.value=-1}function H(){e.disabled||e.readonly||(a.value=l.value===R&&e.clearable?0:R)}return{onMouseenter:e.hover?F:void 0,onMouseleave:e.hover?B:void 0,onClick:H}})),T=ua(),k=fe(()=>e.name??`v-rating-${T}`);function P(R){let{value:F,index:B,showStar:H=!0}=R;const{onMouseenter:G,onMouseleave:ee,onClick:ie}=x.value[B+1],J=`${k.value}-${String(F).replace(".","-")}`,$={color:_.value[B]?.color,density:e.density,disabled:e.disabled,icon:_.value[B]?.icon,ripple:e.ripple,size:e.size,variant:"plain"};return z(un,null,[z("label",{for:J,class:xt({"v-rating__item--half":e.halfIncrements&&F%1>0,"v-rating__item--full":e.halfIncrements&&F%1===0}),onMouseenter:G,onMouseleave:ee,onClick:ie},[z("span",{class:"v-rating__hidden"},[i(e.itemAriaLabel,F,e.length)]),H?n.item?n.item({..._.value[B],props:$,value:F,index:B,rating:l.value}):se(ci,It({"aria-label":i(e.itemAriaLabel,F,e.length)},$),null):void 0]),z("input",{class:"v-rating__hidden",name:k.value,id:J,type:"radio",value:F,checked:l.value===F,tabindex:-1,readonly:e.readonly,disabled:e.disabled},null)])}function M(R){return n["item-label"]?n["item-label"](R):R.label?z("span",null,[R.label]):z("span",null,[Fn("")])}return Vt(()=>{const R=!!e.itemLabels?.length||n["item-label"];return se(e.tag,{class:xt(["v-rating",{"v-rating--hover":e.hover,"v-rating--readonly":e.readonly},r.value,e.class]),style:Yt(e.style)},{default:()=>[se(P,{value:0,index:-1,showStar:!1},null),h.value.map((F,B)=>z("div",{class:"v-rating__wrapper"},[R&&e.itemLabelPosition==="top"?M({value:F,index:B,label:e.itemLabels?.[B]}):void 0,z("div",{class:"v-rating__item"},[e.halfIncrements?z(un,null,[se(P,{value:F-.5,index:B*2},null),se(P,{value:F,index:B*2+1},null)]):se(P,{value:F,index:B},null)]),R&&e.itemLabelPosition==="bottom"?M({value:F,index:B,label:e.itemLabels?.[B]}):void 0]))]})}),{}}}),P_e={actions:"button@2",article:"heading, paragraph",avatar:"avatar",button:"button",card:"image, heading","card-avatar":"image, list-item-avatar",chip:"chip","date-picker":"list-item, heading, divider, date-picker-options, date-picker-days, actions","date-picker-options":"text, avatar@2","date-picker-days":"avatar@28",divider:"divider",heading:"heading",image:"image","list-item":"text","list-item-avatar":"avatar, text","list-item-two-line":"sentences","list-item-avatar-two-line":"avatar, sentences","list-item-three-line":"paragraph","list-item-avatar-three-line":"avatar, paragraph",ossein:"ossein",paragraph:"text@3",sentences:"text@2",subtitle:"text",table:"table-heading, table-thead, table-tbody, table-tfoot","table-heading":"chip, text","table-thead":"heading@6","table-tbody":"table-row-divider@6","table-row-divider":"table-row, divider","table-row":"text@6","table-tfoot":"text@2, avatar@2",text:"text"};function M_e(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return z("div",{class:xt(["v-skeleton-loader__bone",`v-skeleton-loader__${e}`])},[t])}function aF(e){const[t,n]=e.split("@");return Array.from({length:n}).map(()=>dS(t))}function dS(e){let t=[];if(!e)return t;const n=P_e[e];if(e!==n){if(e.includes(","))return lF(e);if(e.includes("@"))return aF(e);n.includes(",")?t=lF(n):n.includes("@")?t=aF(n):n&&t.push(dS(n))}return[M_e(e,t)]}function lF(e){return e.replace(/\s/g,"").split(",").map(dS)}const D_e=lt({boilerplate:Boolean,color:String,loading:Boolean,loadingText:{type:String,default:"$vuetify.loading"},type:{type:[String,Array],default:"ossein"},...Os(),...qs(),...Ai()},"VSkeletonLoader"),L_e=At()({name:"VSkeletonLoader",inheritAttrs:!1,props:D_e(),setup(e,t){let{attrs:n,slots:i}=t;const{backgroundColorClasses:r,backgroundColorStyles:a}=nr(()=>e.color),{dimensionStyles:l}=Vs(e),{elevationClasses:h}=bo(e),{themeClasses:s}=Zi(e),{t:p}=hr(),_=fe(()=>dS(qr(e.type).join(",")));return Vt(()=>{const x=!i.default||e.loading,T=e.boilerplate||!x?{}:{ariaLive:"polite",ariaLabel:p(e.loadingText),role:"alert"};return x?z("div",It({class:["v-skeleton-loader",{"v-skeleton-loader--boilerplate":e.boilerplate},s.value,r.value,h.value],style:[a.value,l.value]},T,n),[_.value]):z(un,null,[i.default?.()])}),{}}}),R_e=At()({name:"VSlideGroupItem",props:ug(),emits:{"group:selected":e=>!0},setup(e,t){let{slots:n}=t;const i=om(e,xP);return()=>n.default?.({isSelected:i.isSelected.value,select:i.select,toggle:i.toggle,selectedClass:i.selectedClass.value})}}),O_e=lt({closable:[Boolean,String],closeText:{type:String,default:"$vuetify.dismiss"},modelValue:{type:Array,default:()=>[]},...dr(b$(),["modelValue"])},"VSnackbarQueue"),V_e=At()({name:"VSnackbarQueue",props:O_e(),emits:{"update:modelValue":e=>!0},setup(e,t){let{emit:n,slots:i}=t;const{t:r}=hr(),a=Zt(!1),l=Zt(!1),h=Zt();qt(()=>e.modelValue.length,(T,k)=>{!l.value&&T>k&&p()}),qt(a,T=>{T&&(l.value=!0)});function s(){e.modelValue.length?p():(h.value=void 0,l.value=!1)}function p(){const[T,...k]=e.modelValue;n("update:modelValue",k),h.value=typeof T=="string"?{text:T}:T,Hn(()=>{a.value=!0})}function _(){a.value=!1}const x=fe(()=>({color:typeof e.closable=="string"?e.closable:void 0,text:r(e.closeText)}));Vt(()=>{const T=!!(e.closable||i.actions),{modelValue:k,...P}=z1.filterProps(e);return z(un,null,[l.value&&!!h.value&&(i.default?se(ui,{defaults:{VSnackbar:h.value}},{default:()=>[i.default({item:h.value})]}):se(z1,It(P,h.value,{modelValue:a.value,"onUpdate:modelValue":M=>a.value=M,onAfterLeave:s}),{text:i.text?()=>i.text?.({item:h.value}):void 0,actions:T?()=>z(un,null,[i.actions?se(ui,{defaults:{VBtn:x.value}},{default:()=>[i.actions({item:h.value,props:{onClick:_}})]}):se(ci,It(x.value,{onClick:_}),null)]):void 0}))])})}}),v9=lt({autoDraw:Boolean,autoDrawDuration:[Number,String],autoDrawEasing:{type:String,default:"ease"},color:String,gradient:{type:Array,default:()=>[]},gradientDirection:{type:String,validator:e=>["top","bottom","left","right"].includes(e),default:"top"},height:{type:[String,Number],default:75},labels:{type:Array,default:()=>[]},labelSize:{type:[Number,String],default:7},lineWidth:{type:[String,Number],default:4},id:String,itemValue:{type:String,default:"value"},modelValue:{type:Array,default:()=>[]},min:[String,Number],max:[String,Number],padding:{type:[String,Number],default:8},showLabels:Boolean,smooth:[Boolean,String,Number],width:{type:[Number,String],default:300}},"Line"),_9=lt({autoLineWidth:Boolean,...v9()},"VBarline"),cF=At()({name:"VBarline",props:_9(),setup(e,t){let{slots:n}=t;const i=ua(),r=fe(()=>e.id||`barline-${i}`),a=fe(()=>Number(e.autoDrawDuration)||500),l=fe(()=>!!(e.showLabels||e.labels.length>0||n?.label)),h=fe(()=>parseFloat(e.lineWidth)||4),s=fe(()=>Math.max(e.modelValue.length*h.value,Number(e.width))),p=fe(()=>({minX:0,maxX:s.value,minY:0,maxY:parseInt(e.height,10)})),_=fe(()=>e.modelValue.map(R=>Ms(R,e.itemValue,R)));function x(R,F){const{minX:B,maxX:H,minY:G,maxY:ee}=F,ie=R.length;let J=e.max!=null?Number(e.max):Math.max(...R),$=e.min!=null?Number(e.min):Math.min(...R);$>0&&e.min==null&&($=0),J<0&&e.max==null&&(J=0);const W=H/(ie===1?2:ie),X=(ee-G)/(J-$||1),re=ee-Math.abs($*X);return R.map((Y,Z)=>{const ge=Math.abs(X*Y);return{x:B+Z*W,y:re-ge+ +(Y<0)*ge,height:ge,value:Y}})}const T=fe(()=>{const R=[],F=x(_.value,p.value),B=F.length;for(let H=0;R.length<B;H++){const G=F[H];let ee=e.labels[H];ee||(ee=typeof G=="object"?G.value:G),R.push({x:G.x,value:String(ee)})}return R}),k=fe(()=>x(_.value,p.value)),P=fe(()=>k.value.length===1?(p.value.maxX-h.value)/2:(Math.abs(k.value[0].x-k.value[1].x)-h.value)/2),M=fe(()=>typeof e.smooth=="boolean"?e.smooth?2:0:Number(e.smooth));Vt(()=>{const R=e.gradient.slice().length?e.gradient.slice().reverse():[""];return z("svg",{display:"block"},[z("defs",null,[z("linearGradient",{id:r.value,gradientUnits:"userSpaceOnUse",x1:e.gradientDirection==="left"?"100%":"0",y1:e.gradientDirection==="top"?"100%":"0",x2:e.gradientDirection==="right"?"100%":"0",y2:e.gradientDirection==="bottom"?"100%":"0"},[R.map((F,B)=>z("stop",{offset:B/Math.max(R.length-1,1),"stop-color":F||"currentColor"},null))])]),z("clipPath",{id:`${r.value}-clip`},[k.value.map(F=>z("rect",{x:F.x+P.value,y:F.y,width:h.value,height:F.height,rx:M.value,ry:M.value},[e.autoDraw&&!ud()&&z(un,null,[z("animate",{attributeName:"y",from:F.y+F.height,to:F.y,dur:`${a.value}ms`,fill:"freeze"},null),z("animate",{attributeName:"height",from:"0",to:F.height,dur:`${a.value}ms`,fill:"freeze"},null)])]))]),l.value&&z("g",{key:"labels",style:{textAnchor:"middle",dominantBaseline:"mathematical",fill:"currentColor"}},[T.value.map((F,B)=>z("text",{x:F.x+P.value+h.value/2,y:parseInt(e.height,10)-2+(parseInt(e.labelSize,10)||7*.75),"font-size":Number(e.labelSize)||7},[n.label?.({index:B,value:F.value})??F.value]))]),z("g",{"clip-path":`url(#${r.value}-clip)`,fill:`url(#${r.value})`},[z("rect",{x:0,y:0,width:Math.max(e.modelValue.length*h.value,Number(e.width)),height:e.height},null)])])})}});function B_e(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:75;if(e.length===0)return"";const r=e.shift(),a=e[e.length-1];return(n?`M${r.x} ${i-r.x+2} L${r.x} ${r.y}`:`M${r.x} ${r.y}`)+e.map((l,h)=>{const s=e[h+1],p=e[h-1]||r,_=s&&F_e(s,l,p);if(!s||_)return`L${l.x} ${l.y}`;const x=Math.min(uF(p,l),uF(s,l)),k=x/2<t?x/2:t,P=dF(p,l,k),M=dF(s,l,k);return`L${P.x} ${P.y}S${l.x} ${l.y} ${M.x} ${M.y}`}).join("")+(n?`L${a.x} ${i-r.x+2} Z`:"")}function dw(e){return parseInt(e,10)}function F_e(e,t,n){return dw(e.x+n.x)===dw(2*t.x)&&dw(e.y+n.y)===dw(2*t.y)}function uF(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function dF(e,t,n){const i={x:e.x-t.x,y:e.y-t.y},r=Math.sqrt(i.x*i.x+i.y*i.y),a={x:i.x/r,y:i.y/r};return{x:t.x+a.x*n,y:t.y+a.y*n}}const y9=lt({fill:Boolean,...v9()},"VTrendline"),hF=At()({name:"VTrendline",props:y9(),setup(e,t){let{slots:n}=t;const i=ua(),r=fe(()=>e.id||`trendline-${i}`),a=fe(()=>Number(e.autoDrawDuration)||(e.fill?500:2e3)),l=tt(0),h=tt(null);function s(R,F){const{minX:B,maxX:H,minY:G,maxY:ee}=F;R.length===1&&(R=[R[0],R[0]]);const ie=R.length,J=e.max!=null?Number(e.max):Math.max(...R),$=e.min!=null?Number(e.min):Math.min(...R),W=(H-B)/(ie-1),X=(ee-G)/(J-$||1);return R.map((re,Y)=>({x:B+Y*W,y:ee-(re-$)*X,value:re}))}const p=fe(()=>!!(e.showLabels||e.labels.length>0||n?.label)),_=fe(()=>parseFloat(e.lineWidth)||4),x=fe(()=>Number(e.width)),T=fe(()=>{const R=Number(e.padding);return{minX:R,maxX:x.value-R,minY:R,maxY:parseInt(e.height,10)-R}}),k=fe(()=>e.modelValue.map(R=>Ms(R,e.itemValue,R))),P=fe(()=>{const R=[],F=s(k.value,T.value),B=F.length;for(let H=0;R.length<B;H++){const G=F[H];let ee=e.labels[H];ee||(ee=typeof G=="object"?G.value:G),R.push({x:G.x,value:String(ee)})}return R});qt(()=>e.modelValue,async()=>{if(await Hn(),!e.autoDraw||!h.value||ud())return;const R=h.value,F=R.getTotalLength();e.fill?(R.style.transformOrigin="bottom center",R.style.transition="none",R.style.transform="scaleY(0)",R.getBoundingClientRect(),R.style.transition=`transform ${a.value}ms ${e.autoDrawEasing}`,R.style.transform="scaleY(1)"):(R.style.strokeDasharray=`${F}`,R.style.strokeDashoffset=`${F}`,R.getBoundingClientRect(),R.style.transition=`stroke-dashoffset ${a.value}ms ${e.autoDrawEasing}`,R.style.strokeDashoffset="0"),l.value=F},{immediate:!0});function M(R){const F=typeof e.smooth=="boolean"?e.smooth?8:0:Number(e.smooth);return B_e(s(k.value,T.value),F,R,parseInt(e.height,10))}Vt(()=>{const R=e.gradient.slice().length?e.gradient.slice().reverse():[""];return z("svg",{display:"block","stroke-width":parseFloat(e.lineWidth)??4},[z("defs",null,[z("linearGradient",{id:r.value,gradientUnits:"userSpaceOnUse",x1:e.gradientDirection==="left"?"100%":"0",y1:e.gradientDirection==="top"?"100%":"0",x2:e.gradientDirection==="right"?"100%":"0",y2:e.gradientDirection==="bottom"?"100%":"0"},[R.map((F,B)=>z("stop",{offset:B/Math.max(R.length-1,1),"stop-color":F||"currentColor"},null))])]),p.value&&z("g",{key:"labels",style:{textAnchor:"middle",dominantBaseline:"mathematical",fill:"currentColor"}},[P.value.map((F,B)=>z("text",{x:F.x+_.value/2+_.value/2,y:parseInt(e.height,10)-4+(parseInt(e.labelSize,10)||7*.75),"font-size":Number(e.labelSize)||7},[n.label?.({index:B,value:F.value})??F.value]))]),z("path",{ref:h,d:M(e.fill),fill:e.fill?`url(#${r.value})`:"none",stroke:e.fill?"none":`url(#${r.value})`},null),e.fill&&z("path",{d:M(!1),fill:"none",stroke:e.color??e.gradient?.[0]},null)])})}}),z_e=lt({type:{type:String,default:"trend"},..._9(),...y9()},"VSparkline"),N_e=At()({name:"VSparkline",props:z_e(),setup(e,t){let{slots:n}=t;const{textColorClasses:i,textColorStyles:r}=Uo(()=>e.color),a=fe(()=>!!(e.showLabels||e.labels.length>0||n?.label)),l=fe(()=>{let h=parseInt(e.height,10);return a.value&&(h+=parseInt(e.labelSize,10)*1.5),h});Vt(()=>{const h=e.type==="trend"?hF:cF,s=e.type==="trend"?hF.filterProps(e):cF.filterProps(e);return se(h,It({key:e.type,class:i.value,style:r.value,viewBox:`0 0 ${e.width} ${parseInt(l.value,10)}`},s),n)})}}),U_e=lt({...wn(),...f$({offset:8,minWidth:0,openDelay:0,closeDelay:100,location:"top center",transition:"scale-transition"})},"VSpeedDial"),$_e=At()({name:"VSpeedDial",props:U_e(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const i=Pn(e,"modelValue"),r=tt(),a=fe(()=>{const[h,s="center"]=e.location?.split(" ")??[];return`${h} ${s}`}),l=fe(()=>({[`v-speed-dial__content--${a.value.replace(" ","-")}`]:!0}));return Vt(()=>{const h=u_.filterProps(e);return se(u_,It(h,{modelValue:i.value,"onUpdate:modelValue":s=>i.value=s,class:e.class,style:e.style,contentClass:["v-speed-dial__content",l.value,e.contentClass],location:a.value,ref:r,transition:"fade-transition"}),{...n,default:s=>se(ui,{defaults:{VBtn:{size:"small"}}},{default:()=>[se(Fa,{appear:!0,group:!0,transition:e.transition},{default:()=>[n.default?.(s)]})]})})}),{}}}),_M=Symbol.for("vuetify:v-stepper"),b9=lt({color:String,disabled:{type:[Boolean,String],default:!1},prevText:{type:String,default:"$vuetify.stepper.prev"},nextText:{type:String,default:"$vuetify.stepper.next"}},"VStepperActions"),x9=At()({name:"VStepperActions",props:b9(),emits:{"click:prev":()=>!0,"click:next":()=>!0},setup(e,t){let{emit:n,slots:i}=t;const{t:r}=hr();function a(){n("click:prev")}function l(){n("click:next")}return Vt(()=>{const h={onClick:a},s={onClick:l};return z("div",{class:"v-stepper-actions"},[se(ui,{defaults:{VBtn:{disabled:["prev",!0].includes(e.disabled),text:r(e.prevText),variant:"text"}}},{default:()=>[i.prev?.({props:h})??se(ci,h,null)]}),se(ui,{defaults:{VBtn:{color:e.color,disabled:["next",!0].includes(e.disabled),text:r(e.nextText),variant:"tonal"}}},{default:()=>[i.next?.({props:s})??se(ci,s,null)]})])}),{}}}),w9=Ah("v-stepper-header"),j_e=lt({color:String,title:String,subtitle:String,complete:Boolean,completeIcon:{type:kn,default:"$complete"},editable:Boolean,editIcon:{type:kn,default:"$edit"},error:Boolean,errorIcon:{type:kn,default:"$error"},icon:kn,ripple:{type:[Boolean,Object],default:!0},rules:{type:Array,default:()=>[]}},"StepperItem"),W_e=lt({...j_e(),...ug()},"VStepperItem"),T9=At()({name:"VStepperItem",directives:{vRipple:Wa},props:W_e(),emits:{"group:selected":e=>!0},setup(e,t){let{slots:n}=t;const i=om(e,_M,!0),r=fe(()=>i?.value.value??e.value),a=fe(()=>e.rules.every(T=>T()===!0)),l=fe(()=>!e.disabled&&e.editable),h=fe(()=>!e.disabled&&e.editable),s=fe(()=>e.error||!a.value),p=fe(()=>e.complete||e.rules.length>0&&a.value),_=fe(()=>s.value?e.errorIcon:p.value?e.completeIcon:i.isSelected.value&&e.editable?e.editIcon:e.icon),x=fe(()=>({canEdit:h.value,hasError:s.value,hasCompleted:p.value,title:e.title,subtitle:e.subtitle,step:r.value,value:e.value}));return Vt(()=>{const T=(!i||i.isSelected.value||p.value||h.value)&&!s.value&&!e.disabled,k=!!(e.title!=null||n.title),P=!!(e.subtitle!=null||n.subtitle);function M(){i?.toggle()}return Ii(z("button",{class:xt(["v-stepper-item",{"v-stepper-item--complete":p.value,"v-stepper-item--disabled":e.disabled,"v-stepper-item--error":s.value},i?.selectedClass.value]),disabled:!e.editable,type:"button",onClick:M},[l.value&&gm(!0,"v-stepper-item"),se(cc,{key:"stepper-avatar",class:"v-stepper-item__avatar",color:T?e.color:void 0,size:24},{default:()=>[n.icon?.(x.value)??(_.value?se(_i,{icon:_.value},null):r.value)]}),z("div",{class:"v-stepper-item__content"},[k&&z("div",{key:"title",class:"v-stepper-item__title"},[n.title?.(x.value)??e.title]),P&&z("div",{key:"subtitle",class:"v-stepper-item__subtitle"},[n.subtitle?.(x.value)??e.subtitle]),n.default?.(x.value)])]),[[Wa,e.editable&&e.ripple,null]])}),{}}}),H_e=lt({...dr(QT(),["continuous","nextIcon","prevIcon","showArrows","touch","mandatory"])},"VStepperWindow"),S9=At()({name:"VStepperWindow",props:H_e(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const i=wi(_M,null),r=Pn(e,"modelValue"),a=fe({get(){return r.value!=null||!i?r.value:i.items.value.find(l=>i.selected.value.includes(l.id))?.value},set(l){r.value=l}});return Vt(()=>{const l=Xp.filterProps(e);return se(Xp,It({_as:"VStepperWindow"},l,{modelValue:a.value,"onUpdate:modelValue":h=>a.value=h,class:["v-stepper-window",e.class],style:e.style,mandatory:!1,touch:!1}),n)}),{}}}),G_e=lt({...eS()},"VStepperWindowItem"),E9=At()({name:"VStepperWindowItem",props:G_e(),setup(e,t){let{slots:n}=t;return Vt(()=>{const i=Yp.filterProps(e);return se(Yp,It({_as:"VStepperWindowItem"},i,{class:["v-stepper-window-item",e.class],style:e.style}),n)}),{}}}),q_e=lt({altLabels:Boolean,bgColor:String,completeIcon:kn,editIcon:kn,editable:Boolean,errorIcon:kn,hideActions:Boolean,items:{type:Array,default:()=>[]},itemTitle:{type:String,default:"title"},itemValue:{type:String,default:"value"},nonLinear:Boolean,flat:Boolean,...sg()},"Stepper"),K_e=lt({...q_e(),...cg({mandatory:"force",selectedClass:"v-stepper-item--selected"}),...FP(),...Ol(b9(),["prevText","nextText"])},"VStepper"),X_e=At()({name:"VStepper",props:K_e(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{items:i,next:r,prev:a,selected:l}=vm(e,_M),{displayClasses:h,mobile:s}=Vl(e),{completeIcon:p,editIcon:_,errorIcon:x,color:T,editable:k,prevText:P,nextText:M}=g_(e),R=fe(()=>e.items.map((H,G)=>{const ee=Ms(H,e.itemTitle,H),ie=Ms(H,e.itemValue,G+1);return{title:ee,value:ie,raw:H}})),F=fe(()=>i.value.findIndex(H=>l.value.includes(H.id))),B=fe(()=>e.disabled?e.disabled:F.value===0?"prev":F.value===i.value.length-1?"next":!1);return es({VStepperItem:{editable:k,errorIcon:x,completeIcon:p,editIcon:_,prevText:P,nextText:M},VStepperActions:{color:T,disabled:B,prevText:P,nextText:M}}),Vt(()=>{const H=uu.filterProps(e),G=!!(n.header||e.items.length),ee=e.items.length>0,ie=!e.hideActions&&!!(ee||n.actions);return se(uu,It(H,{color:e.bgColor,class:["v-stepper",{"v-stepper--alt-labels":e.altLabels,"v-stepper--flat":e.flat,"v-stepper--non-linear":e.nonLinear,"v-stepper--mobile":s.value},h.value,e.class],style:e.style}),{default:()=>[G&&se(w9,{key:"stepper-header"},{default:()=>[R.value.map((J,$)=>{let{raw:W,...X}=J;return z(un,null,[!!$&&se(za,null,null),se(T9,X,{default:n[`header-item.${X.value}`]??n.header,icon:n.icon,title:n.title,subtitle:n.subtitle})])})]}),ee&&se(S9,{key:"stepper-window"},{default:()=>[R.value.map(J=>se(E9,{value:J.value},{default:()=>n[`item.${J.value}`]?.(J)??n.item?.(J)}))]}),n.default?.({prev:a,next:r}),ie&&(n.actions?.({next:r,prev:a})??se(x9,{key:"stepper-actions","onClick:prev":a,"onClick:next":r},n))]})}),{prev:a,next:r}}}),Y_e=lt({indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...Lh(),...$T()},"VSwitch"),Z_e=At()({name:"VSwitch",inheritAttrs:!1,props:Y_e(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:indeterminate":e=>!0},setup(e,t){let{attrs:n,slots:i}=t;const r=Pn(e,"indeterminate"),a=Pn(e,"modelValue"),{loaderClasses:l}=O0(e),{isFocused:h,focus:s,blur:p}=Dh(e),_=tt(),x=tt(),T=nP&&window.matchMedia("(forced-colors: active)").matches,k=Ne(()=>typeof e.loading=="string"&&e.loading!==""?e.loading:e.color),P=ua(),M=Ne(()=>e.id||`switch-${P}`);function R(){r.value&&(r.value=!1)}function F(B){B.stopPropagation(),B.preventDefault(),_.value?.input?.click()}return Vt(()=>{const[B,H]=pm(n),G=ca.filterProps(e),ee=am.filterProps(e);return se(ca,It({ref:x,class:["v-switch",{"v-switch--flat":e.flat},{"v-switch--inset":e.inset},{"v-switch--indeterminate":r.value},l.value,e.class]},B,G,{modelValue:a.value,"onUpdate:modelValue":ie=>a.value=ie,id:M.value,focused:h.value,style:e.style}),{...i,default:ie=>{let{id:J,messagesId:$,isDisabled:W,isReadonly:X,isValid:re}=ie;const Y={model:a,isValid:re};return se(am,It({ref:_},ee,{modelValue:a.value,"onUpdate:modelValue":[Z=>a.value=Z,R],id:J.value,"aria-describedby":$.value,type:"checkbox","aria-checked":r.value?"mixed":void 0,disabled:W.value,readonly:X.value,onFocus:s,onBlur:p},H),{...i,default:Z=>{let{backgroundColorClasses:ge,backgroundColorStyles:be}=Z;return z("div",{class:xt(["v-switch__track",T?void 0:ge.value]),style:Yt(be.value),onClick:F},[i["track-true"]&&z("div",{key:"prepend",class:"v-switch__track-true"},[i["track-true"](Y)]),i["track-false"]&&z("div",{key:"append",class:"v-switch__track-false"},[i["track-false"](Y)])])},input:Z=>{let{inputNode:ge,icon:be,backgroundColorClasses:Be,backgroundColorStyles:nt}=Z;return z(un,null,[ge,z("div",{class:xt(["v-switch__thumb",{"v-switch__thumb--filled":be||e.loading},e.inset||T?void 0:Be.value]),style:Yt(e.inset?void 0:nt.value)},[i.thumb?se(ui,{defaults:{VIcon:{icon:be,size:"x-small"}}},{default:()=>[i.thumb({...Y,icon:be})]}):se(yP,null,{default:()=>[e.loading?se(V0,{name:"v-switch",active:!0,color:re.value===!1?void 0:k.value},{default:We=>i.loader?i.loader(We):se(Gp,{active:We.isActive,color:We.color,indeterminate:!0,size:"16",width:"2"},null)}):be&&se(_i,{key:String(be),icon:be,size:"x-small"},null)]})])])}})}})}),xo({},x)}}),J_e=lt({color:String,height:[Number,String],window:Boolean,...wn(),...qs(),...og(),...$r(),...ti(),...Ai()},"VSystemBar"),Q_e=At()({name:"VSystemBar",props:J_e(),setup(e,t){let{slots:n}=t;const{themeClasses:i}=Zi(e),{backgroundColorClasses:r,backgroundColorStyles:a}=nr(()=>e.color),{elevationClasses:l}=bo(e),{roundedClasses:h}=ts(e),{ssrBootStyles:s}=hg(),p=fe(()=>e.height??(e.window?32:24)),{layoutItemStyles:_}=ag({id:e.name,order:fe(()=>parseInt(e.order,10)),position:Zt("top"),layoutSize:p,elementSize:p,active:fe(()=>!0),absolute:Ne(()=>e.absolute)});return Vt(()=>se(e.tag,{class:xt(["v-system-bar",{"v-system-bar--window":e.window},i.value,r.value,l.value,h.value,e.class]),style:Yt([a.value,_.value,s.value,e.style])},n)),{}}}),yM=Symbol.for("vuetify:v-tabs"),C9=lt({fixed:Boolean,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},...dr(NT({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},"VTab"),k9=At()({name:"VTab",props:C9(),setup(e,t){let{slots:n,attrs:i}=t;const{textColorClasses:r,textColorStyles:a}=Uo(()=>e.sliderColor),l=tt(),h=tt(),s=fe(()=>e.direction==="horizontal"),p=fe(()=>l.value?.group?.isSelected.value??!1);function _(x){let{value:T}=x;if(T){const k=l.value?.$el.parentElement?.querySelector(".v-tab--selected .v-tab__slider"),P=h.value;if(!k||!P)return;const M=getComputedStyle(k).color,R=k.getBoundingClientRect(),F=P.getBoundingClientRect(),B=s.value?"x":"y",H=s.value?"X":"Y",G=s.value?"right":"bottom",ee=s.value?"width":"height",ie=R[B],J=F[B],$=ie>J?R[G]-F[G]:R[B]-F[B],W=Math.sign($)>0?s.value?"right":"bottom":Math.sign($)<0?s.value?"left":"top":"center",re=(Math.abs($)+(Math.sign($)<0?R[ee]:F[ee]))/Math.max(R[ee],F[ee])||0,Y=R[ee]/F[ee]||0,Z=1.5;rh(P,{backgroundColor:[M,"currentcolor"],transform:[`translate${H}(${$}px) scale${H}(${Y})`,`translate${H}(${$/Z}px) scale${H}(${(re-1)/Z+1})`,"none"],transformOrigin:Array(3).fill(W)},{duration:225,easing:$b})}}return Vt(()=>{const x=ci.filterProps(e);return se(ci,It({symbol:yM,ref:l,class:["v-tab",e.class],style:e.style,tabindex:p.value?0:-1,role:"tab","aria-selected":String(p.value),active:!1},x,i,{block:e.fixed,maxWidth:e.fixed?300:void 0,"onGroup:selected":_}),{...n,default:()=>z(un,null,[n.default?.()??e.text,!e.hideSlider&&z("div",{ref:h,class:xt(["v-tab__slider",r.value]),style:Yt(a.value)},null)])})}),xo({},l)}}),eye=lt({...dr(QT(),["continuous","nextIcon","prevIcon","showArrows","touch","mandatory"])},"VTabsWindow"),I9=At()({name:"VTabsWindow",props:eye(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const i=wi(yM,null),r=Pn(e,"modelValue"),a=fe({get(){return r.value!=null||!i?r.value:i.items.value.find(l=>i.selected.value.includes(l.id))?.value},set(l){r.value=l}});return Vt(()=>{const l=Xp.filterProps(e);return se(Xp,It({_as:"VTabsWindow"},l,{modelValue:a.value,"onUpdate:modelValue":h=>a.value=h,class:["v-tabs-window",e.class],style:e.style,mandatory:!1,touch:!1}),n)}),{}}}),tye=lt({...eS()},"VTabsWindowItem"),A9=At()({name:"VTabsWindowItem",props:tye(),setup(e,t){let{slots:n}=t;return Vt(()=>{const i=Yp.filterProps(e);return se(Yp,It({_as:"VTabsWindowItem"},i,{class:["v-tabs-window-item",e.class],style:e.style}),n)}),{}}});function nye(e){return e?e.map(t=>Ub(t)?t:{text:t,value:t}):[]}const iye=lt({alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,...Ol(C9(),["spaced"]),...wP({mandatory:"force",selectedClass:"v-tab-item--selected"}),...ws(),...ti()},"VTabs"),rye=At()({name:"VTabs",props:iye(),emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:n,slots:i}=t;const r=Pn(e,"modelValue"),a=fe(()=>nye(e.items)),{densityClasses:l}=Ga(e),{backgroundColorClasses:h,backgroundColorStyles:s}=nr(()=>e.bgColor),{scopeId:p}=fg();return es({VTab:{color:Ne(()=>e.color),direction:Ne(()=>e.direction),stacked:Ne(()=>e.stacked),fixed:Ne(()=>e.fixedTabs),sliderColor:Ne(()=>e.sliderColor),hideSlider:Ne(()=>e.hideSlider)}}),Vt(()=>{const _=Yb.filterProps(e),x=!!(i.window||e.items.length>0);return z(un,null,[se(Yb,It(_,{modelValue:r.value,"onUpdate:modelValue":T=>r.value=T,class:["v-tabs",`v-tabs--${e.direction}`,`v-tabs--align-tabs-${e.alignTabs}`,{"v-tabs--fixed-tabs":e.fixedTabs,"v-tabs--grow":e.grow,"v-tabs--stacked":e.stacked},l.value,h.value,e.class],style:[{"--v-tabs-height":pn(e.height)},s.value,e.style],role:"tablist",symbol:yM},p,n),{default:()=>[i.default?.()??a.value.map(T=>i.tab?.({item:T})??se(k9,It(T,{key:T.text,value:T.value,spaced:e.spaced}),{default:i[`tab.${T.value}`]?()=>i[`tab.${T.value}`]?.({item:T}):void 0}))]}),x&&se(I9,It({modelValue:r.value,"onUpdate:modelValue":T=>r.value=T,key:"tabs-window"},p),{default:()=>[a.value.map(T=>i.item?.({item:T})??se(A9,{value:T.value},{default:()=>i[`item.${T.value}`]?.({item:T})})),i.window?.()]})])}),{}}}),sye=lt({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseFloat(e))},maxRows:{type:[Number,String],validator:e=>!isNaN(parseFloat(e))},suffix:String,modelModifiers:Object,...m$(),...Lh(),...$0()},"VTextarea"),oye=At()({name:"VTextarea",directives:{vIntersect:gu},inheritAttrs:!1,props:sye(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0,"update:rows":e=>!0},setup(e,t){let{attrs:n,emit:i,slots:r}=t;const a=Pn(e,"modelValue"),{isFocused:l,focus:h,blur:s}=Dh(e),{onIntersect:p}=g$(e),_=fe(()=>typeof e.counterValue=="function"?e.counterValue(a.value):(a.value||"").toString().length),x=fe(()=>{if(n.maxlength)return n.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter}),T=tt(),k=tt(),P=Zt(""),M=tt(),R=tt(0),{platform:F}=Vl(),B=p$(e),H=fe(()=>e.persistentPlaceholder||l.value||e.active);function G(){B.isSuppressing.value&&B.update(),M.value!==document.activeElement&&M.value?.focus(),l.value||h()}function ee(ge){G(),i("click:control",ge)}function ie(ge){i("mousedown:control",ge)}function J(ge){ge.stopPropagation(),G(),Hn(()=>{a.value="",A0(e["onClick:clear"],ge)})}function $(ge){const be=ge.target;if(a.value=be.value,e.modelModifiers?.trim){const Be=[be.selectionStart,be.selectionEnd];Hn(()=>{be.selectionStart=Be[0],be.selectionEnd=Be[1]})}}const W=tt(),X=tt(Number(e.rows)),re=fe(()=>["plain","underlined"].includes(e.variant));Ur(()=>{e.autoGrow||(X.value=Number(e.rows))});function Y(){Hn(()=>{if(!M.value)return;if(F.value.firefox){R.value=12;return}const{offsetWidth:ge,clientWidth:be}=M.value;R.value=Math.max(0,ge-be)}),e.autoGrow&&Hn(()=>{if(!W.value||!k.value)return;const ge=getComputedStyle(W.value),be=getComputedStyle(k.value.$el),Be=parseFloat(ge.getPropertyValue("--v-field-padding-top"))+parseFloat(ge.getPropertyValue("--v-input-padding-top"))+parseFloat(ge.getPropertyValue("--v-field-padding-bottom")),nt=W.value.scrollHeight,We=parseFloat(ge.lineHeight),Le=Math.max(parseFloat(e.rows)*We+Be,parseFloat(be.getPropertyValue("--v-input-control-height"))),Ze=parseFloat(e.maxRows)*We+Be||1/0,Ee=Er(nt??0,Le,Ze);X.value=Math.floor((Ee-Be)/We),P.value=pn(Ee)})}Kr(Y),qt(a,Y),qt(()=>e.rows,Y),qt(()=>e.maxRows,Y),qt(()=>e.density,Y),qt(X,ge=>{i("update:rows",ge)});let Z;return qt(W,ge=>{ge?(Z=new ResizeObserver(Y),Z.observe(W.value)):Z?.disconnect()}),Nr(()=>{Z?.disconnect()}),Vt(()=>{const ge=!!(r.counter||e.counter||e.counterValue),be=!!(ge||r.details),[Be,nt]=pm(n),{modelValue:We,...Le}=ca.filterProps(e),Ze={...lm.filterProps(e),"onClick:clear":J};return se(ca,It({ref:T,modelValue:a.value,"onUpdate:modelValue":Ee=>a.value=Ee,class:["v-textarea v-text-field",{"v-textarea--prefixed":e.prefix,"v-textarea--suffixed":e.suffix,"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-textarea--auto-grow":e.autoGrow,"v-textarea--no-resize":e.noResize||e.autoGrow,"v-input--plain-underlined":re.value},e.class],style:[{"--v-textarea-scroll-bar-width":pn(R.value)},e.style]},Be,Le,{centerAffix:X.value===1&&!re.value,focused:l.value}),{...r,default:Ee=>{let{id:Je,isDisabled:it,isDirty:vt,isReadonly:mt,isValid:ot,hasDetails:Ye}=Ee;return se(lm,It({ref:k,style:{"--v-textarea-control-height":P.value},onClick:ee,onMousedown:ie,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},Ze,{id:Je.value,active:H.value||vt.value,centerAffix:X.value===1&&!re.value,dirty:vt.value||e.dirty,disabled:it.value,focused:l.value,details:Ye.value,error:ot.value===!1}),{...r,default:ut=>{let{props:{class:Ke,...jt},controlRef:xn}=ut;return z(un,null,[e.prefix&&z("span",{class:"v-text-field__prefix"},[e.prefix]),Ii(z("textarea",It({ref:ke=>M.value=xn.value=ke,class:Ke,value:a.value,onInput:$,autofocus:e.autofocus,readonly:mt.value,disabled:it.value,placeholder:e.placeholder,rows:e.rows,name:B.fieldName.value,autocomplete:B.fieldAutocomplete.value,onFocus:G,onBlur:s},jt,nt),null),[[gu,{handler:p},null,{once:!0}]]),e.autoGrow&&Ii(z("textarea",{class:xt([Ke,"v-textarea__sizer"]),id:`${jt.id}-sizer`,"onUpdate:modelValue":ke=>a.value=ke,ref:W,readonly:!0,"aria-hidden":"true"},null),[[bf,a.value]]),e.suffix&&z("span",{class:"v-text-field__suffix"},[e.suffix])])}})},details:be?Ee=>z(un,null,[r.details?.(Ee),ge&&z(un,null,[z("span",null,null),se(jT,{active:e.persistentCounter||l.value,value:_.value,max:x.value,disabled:e.disabled},r.counter)])]):void 0})}),xo({},T,k,M)}}),aye=lt({withBackground:Boolean,...wn(),...Ai(),...ti()},"VThemeProvider"),lye=At()({name:"VThemeProvider",props:aye(),setup(e,t){let{slots:n}=t;const{themeClasses:i}=Zi(e);return()=>e.withBackground?se(e.tag,{class:xt(["v-theme-provider",i.value,e.class]),style:Yt(e.style)},{default:()=>[n.default?.()]}):n.default?.()}}),cye=lt({dotColor:String,fillDot:Boolean,hideDot:Boolean,icon:kn,iconColor:String,lineColor:String,...wn(),...$r(),...gd(),...qs()},"VTimelineDivider"),uye=At()({name:"VTimelineDivider",props:cye(),setup(e,t){let{slots:n}=t;const{sizeClasses:i,sizeStyles:r}=E_(e,"v-timeline-divider__dot"),{backgroundColorStyles:a,backgroundColorClasses:l}=nr(()=>e.dotColor),{roundedClasses:h}=ts(e,"v-timeline-divider__dot"),{elevationClasses:s}=bo(e),{backgroundColorClasses:p,backgroundColorStyles:_}=nr(()=>e.lineColor);return Vt(()=>z("div",{class:xt(["v-timeline-divider",{"v-timeline-divider--fill-dot":e.fillDot},e.class]),style:Yt(e.style)},[z("div",{class:xt(["v-timeline-divider__before",p.value]),style:Yt(_.value)},null),!e.hideDot&&z("div",{key:"dot",class:xt(["v-timeline-divider__dot",s.value,h.value,i.value]),style:Yt(r.value)},[z("div",{class:xt(["v-timeline-divider__inner-dot",l.value,h.value]),style:Yt(a.value)},[n.default?se(ui,{key:"icon-defaults",disabled:!e.icon,defaults:{VIcon:{color:e.iconColor,icon:e.icon,size:e.size}}},n.default):se(_i,{key:"icon",color:e.iconColor,icon:e.icon,size:e.size},null)])]),z("div",{class:xt(["v-timeline-divider__after",p.value]),style:Yt(_.value)},null)])),{}}}),P9=lt({density:String,dotColor:String,fillDot:Boolean,hideDot:Boolean,hideOpposite:{type:Boolean,default:void 0},icon:kn,iconColor:String,lineInset:[Number,String],side:{type:String,validator:e=>e==null||["start","end"].includes(e)},...wn(),...Os(),...qs(),...$r(),...gd(),...ti()},"VTimelineItem"),dye=At()({name:"VTimelineItem",props:P9(),setup(e,t){let{slots:n}=t;const{dimensionStyles:i}=Vs(e),r=Zt(0),a=tt();return qt(a,l=>{l&&(r.value=l.$el.querySelector(".v-timeline-divider__dot")?.getBoundingClientRect().width??0)},{flush:"post"}),Vt(()=>z("div",{class:xt(["v-timeline-item",{"v-timeline-item--fill-dot":e.fillDot,"v-timeline-item--side-start":e.side==="start","v-timeline-item--side-end":e.side==="end"},e.class]),style:Yt([{"--v-timeline-dot-size":pn(r.value),"--v-timeline-line-inset":e.lineInset?`calc(var(--v-timeline-dot-size) / 2 + ${pn(e.lineInset)})`:pn(0)},e.style])},[z("div",{class:"v-timeline-item__body",style:Yt(i.value)},[n.default?.()]),se(uye,{ref:a,hideDot:e.hideDot,icon:e.icon,iconColor:e.iconColor,size:e.size,elevation:e.elevation,dotColor:e.dotColor,fillDot:e.fillDot,rounded:e.rounded},{default:n.icon}),e.density!=="compact"&&z("div",{class:"v-timeline-item__opposite"},[!e.hideOpposite&&n.opposite?.()])])),{}}}),hye=lt({align:{type:String,default:"center",validator:e=>["center","start"].includes(e)},direction:{type:String,default:"vertical",validator:e=>["vertical","horizontal"].includes(e)},justify:{type:String,default:"auto",validator:e=>["auto","center"].includes(e)},side:{type:String,validator:e=>e==null||["start","end"].includes(e)},lineThickness:{type:[String,Number],default:2},lineColor:String,truncateLine:{type:String,validator:e=>["start","end","both"].includes(e)},...Ol(P9({lineInset:0}),["dotColor","fillDot","hideOpposite","iconColor","lineInset","size"]),...wn(),...ws(),...ti(),...Ai()},"VTimeline"),fye=At()({name:"VTimeline",props:hye(),setup(e,t){let{slots:n}=t;const{themeClasses:i}=Zi(e),{densityClasses:r}=Ga(e),{rtlClasses:a}=Gs();es({VTimelineDivider:{lineColor:Ne(()=>e.lineColor)},VTimelineItem:{density:Ne(()=>e.density),dotColor:Ne(()=>e.dotColor),fillDot:Ne(()=>e.fillDot),hideOpposite:Ne(()=>e.hideOpposite),iconColor:Ne(()=>e.iconColor),lineColor:Ne(()=>e.lineColor),lineInset:Ne(()=>e.lineInset),size:Ne(()=>e.size)}});const l=fe(()=>{const s=e.side?e.side:e.density!=="default"?"end":null;return s&&`v-timeline--side-${s}`}),h=fe(()=>{const s=["v-timeline--truncate-line-start","v-timeline--truncate-line-end"];switch(e.truncateLine){case"both":return s;case"start":return s[0];case"end":return s[1];default:return null}});return Vt(()=>se(e.tag,{class:xt(["v-timeline",`v-timeline--${e.direction}`,`v-timeline--align-${e.align}`,`v-timeline--justify-${e.justify}`,h.value,{"v-timeline--inset-line":!!e.lineInset},i.value,r.value,l.value,a.value,e.class]),style:Yt([{"--v-timeline-line-thickness":pn(e.lineThickness)},e.style])},n)),{}}});function Sp(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return String(e).padStart(t,"0")}const mye=lt({allowedValues:Function,ampm:Boolean,color:String,disabled:Boolean,displayedValue:null,double:Boolean,format:{type:Function,default:e=>e},max:{type:Number,required:!0},min:{type:Number,required:!0},scrollable:Boolean,readonly:Boolean,rotate:{type:Number,default:0},step:{type:Number,default:1},modelValue:{type:Number}},"VTimePickerClock"),wI=At()({name:"VTimePickerClock",props:mye(),emits:{change:e=>!0,input:e=>!0},setup(e,t){let{emit:n}=t;const i=tt(null),r=tt(null),a=tt(void 0),l=tt(!1),h=tt(null),s=tt(null),p=_6(Le=>n("change",Le),750),{textColorClasses:_,textColorStyles:x}=Uo(()=>e.color),{backgroundColorClasses:T,backgroundColorStyles:k}=nr(()=>e.color),P=fe(()=>e.max-e.min+1),M=fe(()=>e.double?P.value/2:P.value),R=fe(()=>360/M.value),F=fe(()=>R.value*Math.PI/180),B=fe(()=>e.modelValue==null?e.min:e.modelValue),H=fe(()=>.62),G=fe(()=>{const Le=[];for(let Ze=e.min;Ze<=e.max;Ze=Ze+e.step)Le.push(Ze);return Le});qt(()=>e.modelValue,Le=>{a.value=Le});function ee(Le){a.value!==Le&&(a.value=Le),n("input",Le)}function ie(Le){return!e.allowedValues||e.allowedValues(Le)}function J(Le){if(!e.scrollable||e.disabled)return;Le.preventDefault();const Ze=Math.sign(-Le.deltaY||1);let Ee=B.value;do Ee=Ee+Ze,Ee=(Ee-e.min+P.value)%P.value+e.min;while(!ie(Ee)&&Ee!==B.value);Ee!==e.displayedValue&&ee(Ee),p(Ee)}function $(Le){return e.double&&Le-e.min>=M.value}function W(Le){return $(Le)?H.value:1}function X(Le){const Ze=e.rotate*Math.PI/180;return{x:Math.sin((Le-e.min)*F.value+Ze)*W(Le),y:-Math.cos((Le-e.min)*F.value+Ze)*W(Le)}}function re(Le,Ze){const Ee=(Math.round(Le/R.value)+(Ze?M.value:0))%P.value+e.min;return Le<360-R.value/2?Ee:Ze?e.max-M.value+1:e.min}function Y(Le){const{x:Ze,y:Ee}=X(Le);return{left:`${Math.round(50+Ze*50)}%`,top:`${Math.round(50+Ee*50)}%`}}function Z(Le,Ze){const Ee=Ze.x-Le.x,Je=Ze.y-Le.y;return Math.sqrt(Ee*Ee+Je*Je)}function ge(Le,Ze){const Ee=2*Math.atan2(Ze.y-Le.y-Z(Le,Ze),Ze.x-Le.x);return Math.abs(Ee*180/Math.PI)}function be(Le){h.value===null&&(h.value=Le),s.value=Le,ee(Le)}function Be(Le){if(Le.preventDefault(),!l.value&&Le.type!=="click"||!i.value)return;const{width:Ze,top:Ee,left:Je}=i.value?.getBoundingClientRect(),{width:it}=r.value?.getBoundingClientRect()??{width:0},{clientX:vt,clientY:mt}="touches"in Le?Le.touches[0]:Le,ot={x:Ze/2,y:-Ze/2},Ye={x:vt-Je,y:Ee-mt},ut=Math.round(ge(ot,Ye)-e.rotate+360)%360,Ke=e.double&&Z(ot,Ye)<(it+it*H.value)/4,jt=Math.ceil(15/R.value);let xn;for(let ke=0;ke<jt;ke++)if(xn=re(ut+ke*R.value,Ke),ie(xn)||(xn=re(ut-ke*R.value,Ke),ie(xn)))return be(xn)}function nt(Le){e.disabled||(Le.preventDefault(),window.addEventListener("mousemove",Be),window.addEventListener("touchmove",Be),window.addEventListener("mouseup",We),window.addEventListener("touchend",We),h.value=null,s.value=null,l.value=!0,Be(Le))}function We(Le){Le.stopPropagation(),window.removeEventListener("mousemove",Be),window.removeEventListener("touchmove",Be),window.removeEventListener("mouseup",We),window.removeEventListener("touchend",We),l.value=!1,s.value!==null&&ie(s.value)&&n("change",s.value)}Vt(()=>z("div",{class:xt([{"v-time-picker-clock":!0,"v-time-picker-clock--indeterminate":e.modelValue==null,"v-time-picker-clock--readonly":e.readonly}]),onMousedown:nt,onTouchstart:nt,onWheel:J,ref:i},[z("div",{class:"v-time-picker-clock__inner",ref:r},[z("div",{class:xt([{"v-time-picker-clock__hand":!0,"v-time-picker-clock__hand--inner":$(e.modelValue)},_.value]),style:Yt([{transform:`rotate(${e.rotate+R.value*(B.value-e.min)}deg) scaleY(${W(B.value)})`},x.value])},null),G.value.map(Le=>{const Ze=Le===B.value;return z("div",{class:xt([{"v-time-picker-clock__item":!0,"v-time-picker-clock__item--active":Ze,"v-time-picker-clock__item--disabled":e.disabled||!ie(Le)},Ze&&T.value]),style:Yt([Y(Le),Ze&&k.value])},[z("span",null,[e.format(Le)])])})])]))}}),pye=lt({ampm:Boolean,color:String,disabled:Boolean,hour:Number,minute:Number,second:Number,period:String,readonly:Boolean,useSeconds:Boolean,value:Number,viewMode:String},"VTimePickerControls"),TI=At()({name:"VTimePickerControls",props:pye(),emits:{"update:period":e=>!0,"update:viewMode":e=>!0},setup(e,t){let{emit:n,slots:i}=t;const{t:r}=hr();return Vt(()=>{let a=e.hour;return e.ampm&&(a=a?(a-1)%12+1:12),z("div",{class:"v-time-picker-controls"},[z("div",{class:xt({"v-time-picker-controls__time":!0,"v-time-picker-controls__time--with-seconds":e.useSeconds})},[se(ci,{active:e.viewMode==="hour",color:e.viewMode==="hour"?e.color:void 0,disabled:e.disabled,variant:"tonal",class:xt({"v-time-picker-controls__time__btn":!0,"v-time-picker-controls__time--with-ampm__btn":e.ampm,"v-time-picker-controls__time--with-seconds__btn":e.useSeconds}),text:e.hour==null?"--":Sp(`${a}`),onClick:()=>n("update:viewMode","hour")},null),z("span",{class:xt(["v-time-picker-controls__time__separator",{"v-time-picker-controls--with-seconds__time__separator":e.useSeconds}])},[Fn(":")]),se(ci,{active:e.viewMode==="minute",color:e.viewMode==="minute"?e.color:void 0,class:xt({"v-time-picker-controls__time__btn":!0,"v-time-picker-controls__time__btn__active":e.viewMode==="minute","v-time-picker-controls__time--with-ampm__btn":e.ampm,"v-time-picker-controls__time--with-seconds__btn":e.useSeconds}),disabled:e.disabled,variant:"tonal",text:e.minute==null?"--":Sp(e.minute),onClick:()=>n("update:viewMode","minute")},null),e.useSeconds&&z("span",{class:xt(["v-time-picker-controls__time__separator",{"v-time-picker-controls--with-seconds__time__separator":e.useSeconds}]),key:"secondsDivider"},[Fn(":")]),e.useSeconds&&se(ci,{key:"secondsVal",active:e.viewMode==="second",color:e.viewMode==="second"?e.color:void 0,variant:"tonal",onClick:()=>n("update:viewMode","second"),class:xt({"v-time-picker-controls__time__btn":!0,"v-time-picker-controls__time__btn__active":e.viewMode==="second","v-time-picker-controls__time--with-seconds__btn":e.useSeconds}),disabled:e.disabled,text:e.second==null?"--":Sp(e.second)},null),e.ampm&&z("div",{class:"v-time-picker-controls__ampm"},[se(ci,{active:e.period==="am",color:e.period==="am"?e.color:void 0,class:xt({"v-time-picker-controls__ampm__am":!0,"v-time-picker-controls__ampm__btn":!0,"v-time-picker-controls__ampm__btn__active":e.period==="am"}),disabled:e.disabled,text:r("$vuetify.timePicker.am"),variant:e.disabled&&e.period==="am"?"elevated":"tonal",onClick:()=>e.period!=="am"?n("update:period","am"):null},null),se(ci,{active:e.period==="pm",color:e.period==="pm"?e.color:void 0,class:xt({"v-time-picker-controls__ampm__pm":!0,"v-time-picker-controls__ampm__btn":!0,"v-time-picker-controls__ampm__btn__active":e.period==="pm"}),disabled:e.disabled,text:r("$vuetify.timePicker.pm"),variant:e.disabled&&e.period==="pm"?"elevated":"tonal",onClick:()=>e.period!=="pm"?n("update:period","pm"):null},null)])])])}),{}}}),gye=rc(24),M9=rc(12),vye=M9.map(e=>e+12);rc(60);const _ye=lt({allowedHours:[Function,Array],allowedMinutes:[Function,Array],allowedSeconds:[Function,Array],disabled:Boolean,format:{type:String,default:"ampm"},max:String,min:String,viewMode:{type:String,default:"hour"},period:{type:String,default:"am",validator:e=>["am","pm"].includes(e)},modelValue:null,readonly:Boolean,scrollable:Boolean,useSeconds:Boolean,...dr(tS({title:"$vuetify.timePicker.title"}),["landscape"])},"VTimePicker"),yye=At()({name:"VTimePicker",props:_ye(),emits:{"update:hour":e=>!0,"update:minute":e=>!0,"update:period":e=>!0,"update:second":e=>!0,"update:modelValue":e=>!0,"update:viewMode":e=>!0},setup(e,t){let{emit:n,slots:i}=t;const{t:r}=hr(),a=tt(null),l=tt(null),h=tt(null),s=tt(null),p=tt(null),_=tt(null),x=Pn(e,"period","am"),T=Pn(e,"viewMode","hour"),k=tt(null),P=tt(null),M=fe(()=>{let Y;if(e.allowedHours instanceof Array?Y=be=>e.allowedHours.includes(be):Y=e.allowedHours,!e.min&&!e.max)return Y;const Z=e.min?Number(e.min.split(":")[0]):0,ge=e.max?Number(e.max.split(":")[0]):23;return be=>be>=Number(Z)&&be<=Number(ge)&&(!Y||Y(be))}),R=fe(()=>{let Y;const Z=!M.value||a.value===null||M.value(a.value);if(e.allowedMinutes instanceof Array?Y=Ze=>e.allowedMinutes.includes(Ze):Y=e.allowedMinutes,!e.min&&!e.max)return Z?Y:()=>!1;const[ge,be]=e.min?e.min.split(":").map(Number):[0,0],[Be,nt]=e.max?e.max.split(":").map(Number):[23,59],We=ge*60+Number(be),Le=Be*60+Number(nt);return Ze=>{const Ee=60*a.value+Ze;return Ee>=We&&Ee<=Le&&Z&&(!Y||Y(Ze))}}),F=fe(()=>{let Y;const ge=(!M.value||a.value===null||M.value(a.value))&&(!R.value||l.value===null||R.value(l.value));if(e.allowedSeconds instanceof Array?Y=it=>e.allowedSeconds.includes(it):Y=e.allowedSeconds,!e.min&&!e.max)return ge?Y:()=>!1;const[be,Be,nt]=e.min?e.min.split(":").map(Number):[0,0,0],[We,Le,Ze]=e.max?e.max.split(":").map(Number):[23,59,59],Ee=be*3600+Be*60+Number(nt||0),Je=We*3600+Le*60+Number(Ze||0);return it=>{const vt=3600*a.value+60*l.value+it;return vt>=Ee&&vt<=Je&&ge&&(!Y||Y(it))}}),B=fe(()=>e.format==="ampm");qt(()=>e.period,Y=>W(Y)),qt(()=>e.modelValue,Y=>J(Y)),Kr(()=>{J(e.modelValue)});function H(){return a.value!=null&&l.value!=null&&(!e.useSeconds||h.value!=null)?`${Sp(a.value)}:${Sp(l.value)}`+(e.useSeconds?`:${Sp(h.value)}`:""):null}function G(){const Y=H();Y!==null&&n("update:modelValue",Y)}function ee(Y){return Y?(Y-1)%12+1:12}function ie(Y,Z){return Y%12+(Z==="pm"?12:0)}function J(Y){if(Y==null||Y==="")a.value=null,l.value=null,h.value=null;else if(Y instanceof Date)a.value=Y.getHours(),l.value=Y.getMinutes(),h.value=Y.getSeconds();else{const[Z,,ge,,be,Be]=Y.trim().toLowerCase().match(/^(\d+):(\d+)(:(\d+))?([ap]m)?$/)||new Array(6);a.value=Be?ie(parseInt(Z,10),Be):parseInt(Z,10),l.value=parseInt(ge,10),h.value=parseInt(be||0,10)}x.value=a.value==null||a.value<12?"am":"pm"}function $(Y,Z){const ge=M.value;if(!ge)return Z;const be=B.value?Z<12?M9:vye:gye;return((be.find(nt=>ge((nt+Z)%be.length+be[0]))||0)+Z)%be.length+be[0]}function W(Y){if(x.value=Y,a.value!=null){const Z=a.value+(x.value==="am"?-12:12);a.value=$("hour",Z)}return n("update:period",Y),G(),!0}function X(Y){T.value==="hour"?a.value=B.value?ie(Y,x.value):Y:T.value==="minute"?l.value=Y:h.value=Y}function re(Y){switch(T.value||"hour"){case"hour":n("update:hour",Y);break;case"minute":n("update:minute",Y);break;case"second":n("update:second",Y);break}const Z=a.value!==null&&l.value!==null&&(e.useSeconds?h.value!==null:!0);T.value==="hour"?T.value="minute":e.useSeconds&&T.value==="minute"&&(T.value="second"),!(a.value===s.value&&l.value===p.value&&(!e.useSeconds||h.value===_.value)||H()===null)&&(s.value=a.value,p.value=l.value,e.useSeconds&&(_.value=h.value),Z&&G())}Vt(()=>{const Y=m_.filterProps(e),Z=TI.filterProps(e),ge=wI.filterProps(dr(e,["format","modelValue","min","max"]));return se(m_,It(Y,{color:void 0,class:["v-time-picker",e.class],style:e.style}),{title:()=>i.title?.()??z("div",{class:"v-time-picker__title"},[r(e.title)]),header:()=>se(TI,It(Z,{ampm:B.value,hour:a.value,minute:l.value,period:x.value,second:h.value,viewMode:T.value,"onUpdate:period":be=>W(be),"onUpdate:viewMode":be=>T.value=be,ref:k}),null),default:()=>se(wI,It(ge,{allowedValues:T.value==="hour"?M.value:T.value==="minute"?R.value:F.value,double:T.value==="hour"&&!B.value,format:T.value==="hour"?B.value?ee:be=>be:be=>Sp(be,2),max:T.value==="hour"?B.value&&x.value==="am"?11:23:59,min:T.value==="hour"&&B.value&&x.value==="pm"?12:0,size:20,step:T.value==="hour"?1:5,modelValue:T.value==="hour"?a.value:T.value==="minute"?l.value:h.value,onChange:re,onInput:X,ref:P}),null),actions:i.actions})})}}),bye=lt({...wn(),...Nc({variant:"text"})},"VToolbarItems"),xye=At()({name:"VToolbarItems",props:bye(),setup(e,t){let{slots:n}=t;return es({VBtn:{color:Ne(()=>e.color),height:"inherit",variant:Ne(()=>e.variant)}}),Vt(()=>z("div",{class:xt(["v-toolbar-items",e.class]),style:Yt(e.style)},[n.default?.()])),{}}}),wye=lt({id:String,interactive:Boolean,text:String,...dr(U0({closeOnBack:!1,location:"end",locationStrategy:"connected",eager:!0,minWidth:0,offset:10,openOnClick:!1,openOnHover:!0,origin:"auto",scrim:!1,scrollStrategy:"reposition",transition:null}),["absolute","persistent"])},"VTooltip"),D9=At()({name:"VTooltip",props:wye(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const i=Pn(e,"modelValue"),{scopeId:r}=fg(),a=ua(),l=Ne(()=>e.id||`v-tooltip-${a}`),h=tt(),s=fe(()=>e.location.split(" ").length>1?e.location:e.location+" center"),p=fe(()=>e.origin==="auto"||e.origin==="overlap"||e.origin.split(" ").length>1||e.location.split(" ").length>1?e.origin:e.origin+" center"),_=Ne(()=>e.transition!=null?e.transition:i.value?"scale-transition":"fade-transition"),x=fe(()=>It({"aria-describedby":l.value},e.activatorProps));return Vt(()=>{const T=fd.filterProps(e);return se(fd,It({ref:h,class:["v-tooltip",{"v-tooltip--interactive":e.interactive},e.class],style:e.style,id:l.value},T,{modelValue:i.value,"onUpdate:modelValue":k=>i.value=k,transition:_.value,absolute:!0,location:s.value,origin:p.value,persistent:!0,role:"tooltip",activatorProps:x.value,_disableGlobalStack:!0},r),{activator:n.activator,default:function(){for(var k=arguments.length,P=new Array(k),M=0;M<k;M++)P[M]=arguments[M];return n.default?.(...P)??e.text}})}),xo({},h)}}),Tye=lt({...dr(YU({collapseIcon:"$treeviewCollapse",expandIcon:"$treeviewExpand"}),["subgroup"])},"VTreeviewGroup"),SI=At()({name:"VTreeviewGroup",props:Tye(),setup(e,t){let{slots:n}=t;const i=tt(),r=fe(()=>i.value?.isOpen?e.collapseIcon:e.expandIcon),a=fe(()=>({VTreeviewItem:{prependIcon:void 0,appendIcon:void 0,toggleIcon:r.value}}));return Vt(()=>{const l=Jb.filterProps(e);return se(Jb,It(l,{ref:i,class:["v-treeview-group",e.class],subgroup:!0}),{...n,activator:n.activator?h=>z(un,null,[se(ui,{defaults:a.value},{default:()=>[n.activator?.(h)]})]):void 0})}),{}}}),L9=Symbol.for("vuetify:v-treeview"),R9=lt({loading:Boolean,hideActions:Boolean,hasCustomPrepend:Boolean,indentLines:Array,toggleIcon:kn,...QU({slim:!0})},"VTreeviewItem"),EI=At()({name:"VTreeviewItem",props:R9(),emits:{toggleExpand:e=>!0},setup(e,t){let{slots:n,emit:i}=t;const r=wi(L9,{visibleIds:tt()}).visibleIds,a=tt(),l=fe(()=>a.value?.root.activatable.value&&a.value?.isGroupActivator),h=fe(()=>a.value?.link.isClickable.value||e.value!=null&&!!a.value?.list),s=fe(()=>!e.disabled&&e.link!==!1&&(e.link||h.value||l.value)),p=fe(()=>r.value&&!r.value.has($n(a.value?.id)));function _(T){s.value&&l.value&&a.value?.activate(!a.value?.isActivated,T)}function x(T){T.preventDefault(),T.stopPropagation(),i("toggleExpand",T)}return Vt(()=>{const T=vu.filterProps(e),k=n.prepend||e.toggleIcon||e.indentLines||e.prependIcon||e.prependAvatar;return se(vu,It({ref:a},T,{active:a.value?.isActivated||void 0,class:["v-treeview-item",{"v-treeview-item--activatable-group-activator":l.value,"v-treeview-item--filtered":p.value},e.class],ripple:!1,onClick:_}),{...n,prepend:k?P=>z(un,null,[e.indentLines&&e.indentLines.length>0?z("div",{key:"indent-lines",class:"v-treeview-indent-lines",style:{"--v-indent-parts":e.indentLines.length}},[e.indentLines.map(M=>z("div",{class:xt(`v-treeview-indent-line v-treeview-indent-line--${M}`)},null))]):"",!e.hideActions&&se(AP,{start:!0},{default:()=>[e.toggleIcon?z(un,null,[n.toggle?se(ui,{key:"prepend-defaults",defaults:{VBtn:{density:"compact",icon:e.toggleIcon,variant:"text",loading:e.loading},VProgressCircular:{indeterminate:"disable-shrink",size:20,width:2}}},{default:()=>[n.toggle({...P,loading:e.loading,props:{onClick:x}})]}):se(ci,{key:"prepend-toggle",density:"compact",icon:e.toggleIcon,loading:e.loading,variant:"text",onClick:x},{loader:()=>se(Gp,{indeterminate:"disable-shrink",size:"20",width:"2"},null)})]):z("div",{class:"v-treeview-item__level"},null)]}),e.hasCustomPrepend?se(ui,{key:"prepend-defaults",defaults:{VAvatar:{density:e.density,image:e.appendAvatar},VIcon:{density:e.density,icon:e.appendIcon},VListItemAction:{start:!0}}},{default:()=>[n.prepend?.(P)]}):z(un,null,[n.prepend?.(P),e.prependAvatar&&se(cc,{key:"prepend-avatar",density:e.density,image:e.prependAvatar},null),e.prependIcon&&se(_i,{key:"prepend-icon",density:e.density,icon:e.prependIcon},null)])]):void 0})}),xo({},a)}}),O9=lt({fluid:Boolean,disabled:Boolean,loadChildren:Function,loadingIcon:{type:String,default:"$loading"},items:Array,openOnClick:{type:Boolean,default:void 0},indeterminateIcon:{type:kn,default:"$checkboxIndeterminate"},falseIcon:kn,trueIcon:kn,returnObject:Boolean,activatable:Boolean,selectable:Boolean,selectedColor:String,selectStrategy:[String,Function,Object],index:Number,isLastGroup:Boolean,separateRoots:Boolean,parentIndentLines:Array,indentLinesVariant:String,path:{type:Array,default:()=>[]},...Ol(R9(),["hideActions"]),...ws()},"VTreeviewChildren"),X1=At()({name:"VTreeviewChildren",props:O9(),setup(e,t){let{slots:n}=t;const i=io(new Set),r=tt([]),a=fe(()=>!e.disabled&&(e.openOnClick!=null?e.openOnClick:e.selectable&&!e.activatable));async function l(s){try{if(!e.items?.length||!e.loadChildren)return;s?.children?.length===0&&(i.add(s.value),await e.loadChildren(s.raw))}finally{i.delete(s.value)}}function h(s,p){e.selectable&&s(p)}return()=>n.default?.()??e.items?.map((s,p,_)=>{const{children:x,props:T}=s,k=i.has(s.value),P=!!_.at(p+1)?.children,M=e.path?.length??0,R=_.length-1===p,F={index:p,depth:M,isFirst:p===0,isLast:R,path:[...e.path,p],hideAction:e.hideActions},B=Kne({depth:M,isLast:R,isLastGroup:e.isLastGroup,leafLinks:!e.hideActions&&!e.fluid,separateRoots:e.separateRoots,parentIndentLines:e.parentIndentLines,variant:e.indentLinesVariant}),H={toggle:n.toggle?ie=>n.toggle?.({...ie,...F,item:s.raw,internalItem:s,loading:k}):void 0,prepend:ie=>z(un,null,[e.selectable&&(!x||x&&!["leaf","single-leaf"].includes(e.selectStrategy))&&se(AP,{start:!0},{default:()=>[se(hd,{key:s.value,modelValue:ie.isSelected,disabled:e.disabled,loading:k,color:e.selectedColor,density:e.density,indeterminate:ie.isIndeterminate,indeterminateIcon:e.indeterminateIcon,falseIcon:e.falseIcon,trueIcon:e.trueIcon,"onUpdate:modelValue":J=>h(ie.select,J),onClick:J=>J.stopPropagation(),onKeydown:J=>{["Enter","Space"].includes(J.key)&&(J.stopPropagation(),h(ie.select,ie.isSelected))}},null)]}),n.prepend?.({...ie,...F,item:s.raw,internalItem:s})]),append:n.append?ie=>n.append?.({...ie,...F,item:s.raw,internalItem:s}):void 0,title:n.title?ie=>n.title?.({...ie,item:s.raw,internalItem:s}):void 0,subtitle:n.subtitle?ie=>n.subtitle?.({...ie,item:s.raw,internalItem:s}):void 0},G=SI.filterProps(T),ee=X1.filterProps({...e,...F});return x?se(SI,It(G,{value:e.returnObject?s.raw:G?.value,rawId:G?.value}),{activator:ie=>{let{props:J}=ie;const $={...T,...J,value:T?.value,indentLines:B.node,onToggleExpand:[()=>l(s),J.onClick],onClick:a.value?[()=>l(s),J.onClick]:()=>h(r.value[p]?.select,!r.value[p]?.isSelected)};return qx(n.header,{props:$,item:s.raw,internalItem:s,loading:k},()=>se(EI,It({ref:W=>r.value[p]=W},$,{hasCustomPrepend:!!n.prepend,hideActions:e.hideActions,value:e.returnObject?s.raw:T.value,loading:k}),H))},default:()=>se(X1,It(ee,{items:x,indentLinesVariant:e.indentLinesVariant,parentIndentLines:B.children,isLastGroup:P,returnObject:e.returnObject}),n)}):qx(n.item,{props:T,item:s.raw,internalItem:s},()=>s.type==="divider"?qx(n.divider,{props:s.raw},()=>se(za,s.props,null)):s.type==="subheader"?qx(n.subheader,{props:s.raw},()=>se(P_,s.props,null)):se(EI,It(T,{hasCustomPrepend:!!n.prepend,hideActions:e.hideActions,indentLines:B.leaf,value:e.returnObject?$n(s.raw):T.value}),H))})}});function V9(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];for(const n of e)t.push(n),n.children&&V9(n.children,t);return t}const Sye=lt({openAll:Boolean,indentLines:[Boolean,String],search:String,...M_({filterKeys:["title"]}),...dr(O9(),["index","path","indentLinesVariant","parentIndentLines","isLastGroup"]),...dr(s$({collapseIcon:"$treeviewCollapse",expandIcon:"$treeviewExpand",slim:!0}),["nav","openStrategy"]),modelValue:Array},"VTreeview"),Eye=At()({name:"VTreeview",props:Sye(),emits:{"update:opened":e=>!0,"update:activated":e=>!0,"update:selected":e=>!0,"update:modelValue":e=>!0,"click:open":e=>!0,"click:select":e=>!0},setup(e,t){let{slots:n,emit:i}=t;const{items:r}=r$(e),a=Ne(()=>e.activeColor),l=Ne(()=>e.baseColor),h=Ne(()=>e.color),s=Pn(e,"activated"),p=Pn(e,"selected"),_=fe({get:()=>e.modelValue??p.value,set(H){p.value=H,i("update:modelValue",H)}}),x=tt(),T=fe(()=>e.openAll?B(r.value):e.opened),k=fe(()=>V9(r.value)),P=Ne(()=>e.search),{filteredItems:M}=D_(e,k,P),R=fe(()=>{if(!P.value)return null;const H=x.value?.getPath;return H?new Set(M.value.flatMap(G=>{const ee=e.returnObject?G.raw:G.props.value;return[...H(ee),...F(ee)].map($n)})):null});function F(H){const G=[],ee=(x.value?.children.get(H)??[]).slice();for(;ee.length;){const ie=ee.shift();ie&&(G.push(ie),ee.push(...(x.value?.children.get(ie)??[]).slice()))}return G}function B(H){let G=[];for(const ee of H)ee.children&&(G.push(e.returnObject?$n(ee.raw):ee.value),ee.children&&(G=G.concat(B(ee.children))));return G}return Dr(L9,{visibleIds:R}),es({VTreeviewGroup:{activeColor:a,baseColor:l,color:h,collapseIcon:Ne(()=>e.collapseIcon),expandIcon:Ne(()=>e.expandIcon)},VTreeviewItem:{activeClass:Ne(()=>e.activeClass),activeColor:a,baseColor:l,color:h,density:Ne(()=>e.density),disabled:Ne(()=>e.disabled),lines:Ne(()=>e.lines),variant:Ne(()=>e.variant)}}),Vt(()=>{const H=c_.filterProps(e),G=X1.filterProps(e),ee=typeof e.indentLines=="boolean"?"default":e.indentLines;return se(c_,It({ref:x},H,{class:["v-treeview",{"v-treeview--fluid":e.fluid},e.class],openStrategy:"multiple",style:e.style,opened:T.value,activated:s.value,"onUpdate:activated":ie=>s.value=ie,selected:_.value,"onUpdate:selected":ie=>_.value=ie}),{default:()=>[se(X1,It(G,{density:e.density,returnObject:e.returnObject,items:r.value,parentIndentLines:e.indentLines?[]:void 0,indentLinesVariant:ee}),n)]})}),{}}}),Cye=At()({name:"VValidation",props:NU(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const i=UU(e,"validation");return()=>n.default?.(i)}}),kye=Object.freeze(Object.defineProperty({__proto__:null,VAlert:V1,VAlertTitle:eU,VApp:fpe,VAppBar:_pe,VAppBarNavIcon:bpe,VAppBarTitle:xpe,VAutocomplete:Epe,VAvatar:cc,VBadge:kpe,VBanner:Ppe,VBannerActions:Cj,VBannerText:kj,VBottomNavigation:Dpe,VBottomSheet:Rpe,VBreadcrumbs:Fpe,VBreadcrumbsDivider:Aj,VBreadcrumbsItem:Pj,VBtn:ci,VBtnGroup:Uk,VBtnToggle:Mre,VCard:ju,VCardActions:dU,VCardItem:vU,VCardSubtitle:hU,VCardText:mb,VCardTitle:fU,VCarousel:qpe,VCarouselItem:Xpe,VCheckbox:jse,VCheckboxBtn:hd,VChip:Vo,VChipGroup:wse,VClassIcon:pP,VCode:Ype,VCol:Ia,VColorPicker:Rge,VCombobox:Vge,VComponentIcon:Nk,VConfirmEdit:Fge,VContainer:B1,VCounter:jT,VDataIterator:Xge,VDataTable:cve,VDataTableFooter:a0,VDataTableHeaders:Zp,VDataTableRow:pM,VDataTableRows:Jp,VDataTableServer:fve,VDataTableVirtual:dve,VDatePicker:_ve,VDatePickerControls:pI,VDatePickerHeader:gI,VDatePickerMonth:vI,VDatePickerMonths:_I,VDatePickerYears:yI,VDefaultsProvider:ui,VDialog:uI,VDialogBottomTransition:cse,VDialogTopTransition:use,VDialogTransition:UT,VDivider:za,VEmptyState:bve,VExpandTransition:z0,VExpandXTransition:bP,VExpansionPanel:xve,VExpansionPanelText:bI,VExpansionPanelTitle:xI,VExpansionPanels:Sve,VFab:Cve,VFabTransition:lse,VFadeTransition:l_,VField:lm,VFieldLabel:Hy,VFileInput:Dve,VFooter:Rve,VForm:Vve,VHover:Fve,VIcon:_i,VImg:wh,VInfiniteScroll:Nve,VInput:ca,VItem:jve,VItemGroup:$ve,VKbd:Hve,VLabel:I_,VLayout:qve,VLayoutItem:Xve,VLazy:Zve,VLigatureIcon:Zie,VList:c_,VListGroup:Jb,VListImg:loe,VListItem:vu,VListItemAction:AP,VListItemMedia:doe,VListItemSubtitle:ZU,VListItemTitle:JU,VListSubheader:P_,VLocaleProvider:Qve,VMain:t_e,VMenu:u_,VMessages:FU,VNavigationDrawer:u_e,VNoSsr:d_e,VNumberInput:g_e,VOtpInput:__e,VOverlay:fd,VPagination:fI,VParallax:x_e,VProgressCircular:Gp,VProgressLinear:R0,VRadio:T_e,VRadioGroup:E_e,VRangeSlider:k_e,VRating:A_e,VResponsive:Wk,VRow:vf,VScaleTransition:yP,VScrollXReverseTransition:hse,VScrollXTransition:dse,VScrollYReverseTransition:mse,VScrollYTransition:fse,VSelect:Hf,VSelectionControl:am,VSelectionControlGroup:OU,VSheet:uu,VSkeletonLoader:L_e,VSlideGroup:Yb,VSlideGroupItem:R_e,VSlideXReverseTransition:gse,VSlideXTransition:pse,VSlideYReverseTransition:vse,VSlideYTransition:Bv,VSlider:o0,VSnackbar:z1,VSnackbarQueue:V_e,VSpacer:LU,VSparkline:N_e,VSpeedDial:$_e,VStepper:X_e,VStepperActions:x9,VStepperHeader:w9,VStepperItem:T9,VStepperWindow:S9,VStepperWindowItem:E9,VSvgIcon:mP,VSwitch:Z_e,VSystemBar:Q_e,VTab:k9,VTable:Qp,VTabs:rye,VTabsWindow:I9,VTabsWindowItem:A9,VTextField:Th,VTextarea:oye,VThemeProvider:lye,VTimePicker:yye,VTimePickerClock:wI,VTimePickerControls:TI,VTimeline:fye,VTimelineItem:dye,VToolbar:cI,VToolbarItems:xye,VToolbarTitle:sM,VTooltip:D9,VTreeview:Eye,VTreeviewGroup:SI,VTreeviewItem:EI,VValidation:Cye,VVirtualScroll:WT,VWindow:Xp,VWindowItem:Yp},Symbol.toStringTag,{value:"Module"}));function Iye(e,t){const n=t.modifiers||{},i=t.value,{once:r,immediate:a,...l}=n,h=!Object.keys(l).length,{handler:s,options:p}=typeof i=="object"?i:{handler:i,options:{attributes:l?.attr??h,characterData:l?.char??h,childList:l?.child??h,subtree:l?.sub??h}},_=new MutationObserver(function(){let x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],T=arguments.length>1?arguments[1]:void 0;s?.(x,T),r&&B9(e,t)});a&&s?.([],_),e._mutate=Object(e._mutate),e._mutate[t.instance.$.uid]={observer:_},_.observe(e,p)}function B9(e,t){e._mutate?.[t.instance.$.uid]&&(e._mutate[t.instance.$.uid].observer.disconnect(),delete e._mutate[t.instance.$.uid])}const Aye={mounted:Iye,unmounted:B9};function Pye(e,t){const n=t.value,i={passive:!t.modifiers?.active};window.addEventListener("resize",n,i),e._onResize=Object(e._onResize),e._onResize[t.instance.$.uid]={handler:n,options:i},t.modifiers?.quiet||n()}function Mye(e,t){if(!e._onResize?.[t.instance.$.uid])return;const{handler:n,options:i}=e._onResize[t.instance.$.uid];window.removeEventListener("resize",n,i),delete e._onResize[t.instance.$.uid]}const Dye={mounted:Pye,unmounted:Mye};function F9(e,t){const{self:n=!1}=t.modifiers??{},i=t.value,r=typeof i=="object"&&i.options||{passive:!0},a=typeof i=="function"||"handleEvent"in i?i:i.handler,l=n?e:t.arg?document.querySelector(t.arg):window;l&&(l.addEventListener("scroll",a,r),e._onScroll=Object(e._onScroll),e._onScroll[t.instance.$.uid]={handler:a,options:r,target:n?void 0:l})}function z9(e,t){if(!e._onScroll?.[t.instance.$.uid])return;const{handler:n,options:i,target:r=e}=e._onScroll[t.instance.$.uid];r.removeEventListener("scroll",n,i),delete e._onScroll[t.instance.$.uid]}function Lye(e,t){t.value!==t.oldValue&&(z9(e,t),F9(e,t))}const Rye={mounted:F9,unmounted:z9,updated:Lye};function Oye(e,t){const n=typeof e=="string"?v7(e):e,i=Vye(n,t);return{mounted:i,updated:i,unmounted(r){Bz(null,r)}}}function Vye(e,t){return function(n,i,r){const a=typeof t=="function"?t(i):t,l=i.value?.text??i.value??a?.text,h=Ub(i.value)?i.value:{},s=()=>l??n.textContent,p=(r.ctx===i.instance.$?Bye(r,i.instance.$)?.provides:r.ctx?.provides)??i.instance.$.provides,_=Eh(e,It(a,h),s);_.appContext=Object.assign(Object.create(null),i.instance.$.appContext,{provides:p}),Bz(_,n)}}function Bye(e,t){const n=new Set,i=a=>{for(const l of a){if(!l)continue;if(l===e||l.el&&e.el&&l.el===e.el)return!0;n.add(l);let h;if(l.suspense?h=i([l.ssContent]):Array.isArray(l.children)?h=i(l.children):l.component?.vnode&&(h=i([l.component?.subTree])),h)return h;n.delete(l)}return!1};if(!i([t.subTree]))return t;const r=Array.from(n).reverse();for(const a of r)if(a.component)return a.component;return t}const Fye=Oye(D9,e=>({activator:"parent",location:e.arg?.replace("-"," "),text:typeof e.value=="boolean"?void 0:e.value})),zye=Object.freeze(Object.defineProperty({__proto__:null,ClickOutside:Xk,Intersect:gu,Mutate:Aye,Resize:Dye,Ripple:Wa,Scroll:Rye,Tooltip:Fye,Touch:K1},Symbol.toStringTag,{value:"Module"})),Nye=Z6({components:kye,directives:zye,theme:{defaultTheme:"light",themes:{light:{dark:!1,colors:{primary:"#f97316"}},dark:{dark:!0,colors:{primary:"#f97316"}}}}});RH(cpe).use(Nye).mount("#app");
