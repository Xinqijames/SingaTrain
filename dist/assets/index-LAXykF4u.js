(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();/**
* @vue/shared v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function cI(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const Fr={},__=[],Gu=()=>{},XF=()=>!1,R1=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),uI=e=>e.startsWith("onUpdate:"),_o=Object.assign,dI=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},tH=Object.prototype.hasOwnProperty,wr=(e,t)=>tH.call(e,t),Qn=Array.isArray,v_=e=>Qb(e)==="[object Map]",L1=e=>Qb(e)==="[object Set]",RR=e=>Qb(e)==="[object Date]",gi=e=>typeof e=="function",ls=e=>typeof e=="string",ed=e=>typeof e=="symbol",Ir=e=>e!==null&&typeof e=="object",ZF=e=>(Ir(e)||gi(e))&&gi(e.then)&&gi(e.catch),YF=Object.prototype.toString,Qb=e=>YF.call(e),nH=e=>Qb(e).slice(8,-1),JF=e=>Qb(e)==="[object Object]",hI=e=>ls(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Oy=cI(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),O1=e=>{const t=Object.create(null);return(n=>t[n]||(t[n]=e(n)))},iH=/-\w/g,rl=O1(e=>e.replace(iH,t=>t.slice(1).toUpperCase())),rH=/\B([A-Z])/g,Xp=O1(e=>e.replace(rH,"-$1").toLowerCase()),ld=O1(e=>e.charAt(0).toUpperCase()+e.slice(1)),oE=O1(e=>e?`on${ld(e)}`:""),Mf=(e,t)=>!Object.is(e,t),Jx=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},QF=(e,t,n,i=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:i,value:n})},Tw=e=>{const t=parseFloat(e);return isNaN(t)?e:t},sH=e=>{const t=ls(e)?Number(e):NaN;return isNaN(t)?e:t};let LR;const V1=()=>LR||(LR=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Qt(e){if(Qn(e)){const t={};for(let n=0;n<e.length;n++){const i=e[n],r=ls(i)?cH(i):Qt(i);if(r)for(const a in r)t[a]=r[a]}return t}else if(ls(e)||Ir(e))return e}const oH=/;(?![^(]*\))/g,aH=/:([^]+)/,lH=/\/\*[^]*?\*\//g;function cH(e){const t={};return e.replace(lH,"").split(oH).forEach(n=>{if(n){const i=n.split(aH);i.length>1&&(t[i[0].trim()]=i[1].trim())}}),t}function Tt(e){let t="";if(ls(e))t=e;else if(Qn(e))for(let n=0;n<e.length;n++){const i=Tt(e[n]);i&&(t+=i+" ")}else if(Ir(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}function uH(e){if(!e)return null;let{class:t,style:n}=e;return t&&!ls(t)&&(e.class=Tt(t)),n&&(e.style=Qt(n)),e}const dH="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",hH=cI(dH);function ez(e){return!!e||e===""}function fH(e,t){if(e.length!==t.length)return!1;let n=!0;for(let i=0;n&&i<e.length;i++)n=B1(e[i],t[i]);return n}function B1(e,t){if(e===t)return!0;let n=RR(e),i=RR(t);if(n||i)return n&&i?e.getTime()===t.getTime():!1;if(n=ed(e),i=ed(t),n||i)return e===t;if(n=Qn(e),i=Qn(t),n||i)return n&&i?fH(e,t):!1;if(n=Ir(e),i=Ir(t),n||i){if(!n||!i)return!1;const r=Object.keys(e).length,a=Object.keys(t).length;if(r!==a)return!1;for(const l in e){const h=e.hasOwnProperty(l),s=t.hasOwnProperty(l);if(h&&!s||!h&&s||!B1(e[l],t[l]))return!1}}return String(e)===String(t)}function mH(e,t){return e.findIndex(n=>B1(n,t))}const tz=e=>!!(e&&e.__v_isRef===!0),an=e=>ls(e)?e:e==null?"":Qn(e)||Ir(e)&&(e.toString===YF||!gi(e.toString))?tz(e)?an(e.value):JSON.stringify(e,nz,2):String(e),nz=(e,t)=>tz(t)?nz(e,t.value):v_(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[i,r],a)=>(n[aE(i,a)+" =>"]=r,n),{})}:L1(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>aE(n))}:ed(t)?aE(t):Ir(t)&&!Qn(t)&&!JF(t)?String(t):t,aE=(e,t="")=>{var n;return ed(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ca;class iz{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Ca,!t&&Ca&&(this.index=(Ca.scopes||(Ca.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=Ca;try{return Ca=this,t()}finally{Ca=n}}}on(){++this._on===1&&(this.prevScope=Ca,Ca=this)}off(){this._on>0&&--this._on===0&&(Ca=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,i;for(n=0,i=this.effects.length;n<i;n++)this.effects[n].stop();for(this.effects.length=0,n=0,i=this.cleanups.length;n<i;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,i=this.scopes.length;n<i;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function P_(e){return new iz(e)}function rz(){return Ca}function io(e,t=!1){Ca&&Ca.cleanups.push(e)}let Wr;const lE=new WeakSet;class sz{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Ca&&Ca.active&&Ca.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,lE.has(this)&&(lE.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||az(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,OR(this),lz(this);const t=Wr,n=ou;Wr=this,ou=!0;try{return this.fn()}finally{cz(this),Wr=t,ou=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)pI(t);this.deps=this.depsTail=void 0,OR(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?lE.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){mC(this)&&this.run()}get dirty(){return mC(this)}}let oz=0,Vy,By;function az(e,t=!1){if(e.flags|=8,t){e.next=By,By=e;return}e.next=Vy,Vy=e}function fI(){oz++}function mI(){if(--oz>0)return;if(By){let t=By;for(By=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;Vy;){let t=Vy;for(Vy=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(i){e||(e=i)}t=n}}if(e)throw e}function lz(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function cz(e){let t,n=e.depsTail,i=n;for(;i;){const r=i.prevDep;i.version===-1?(i===n&&(n=r),pI(i),pH(i)):t=i,i.dep.activeLink=i.prevActiveLink,i.prevActiveLink=void 0,i=r}e.deps=t,e.depsTail=n}function mC(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(uz(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function uz(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===ob)||(e.globalVersion=ob,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!mC(e))))return;e.flags|=2;const t=e.dep,n=Wr,i=ou;Wr=e,ou=!0;try{lz(e);const r=e.fn(e._value);(t.version===0||Mf(r,e._value))&&(e.flags|=128,e._value=r,t.version++)}catch(r){throw t.version++,r}finally{Wr=n,ou=i,cz(e),e.flags&=-3}}function pI(e,t=!1){const{dep:n,prevSub:i,nextSub:r}=e;if(i&&(i.nextSub=r,e.prevSub=void 0),r&&(r.prevSub=i,e.nextSub=void 0),n.subs===e&&(n.subs=i,!i&&n.computed)){n.computed.flags&=-5;for(let a=n.computed.deps;a;a=a.nextDep)pI(a,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function pH(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let ou=!0;const dz=[];function uh(){dz.push(ou),ou=!1}function dh(){const e=dz.pop();ou=e===void 0?!0:e}function OR(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=Wr;Wr=void 0;try{t()}finally{Wr=n}}}let ob=0;class gH{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class gI{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!Wr||!ou||Wr===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Wr)n=this.activeLink=new gH(Wr,this),Wr.deps?(n.prevDep=Wr.depsTail,Wr.depsTail.nextDep=n,Wr.depsTail=n):Wr.deps=Wr.depsTail=n,hz(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const i=n.nextDep;i.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=i),n.prevDep=Wr.depsTail,n.nextDep=void 0,Wr.depsTail.nextDep=n,Wr.depsTail=n,Wr.deps===n&&(Wr.deps=i)}return n}trigger(t){this.version++,ob++,this.notify(t)}notify(t){fI();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{mI()}}}function hz(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let i=t.deps;i;i=i.nextDep)hz(i)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const Sw=new WeakMap,vp=Symbol(""),pC=Symbol(""),ab=Symbol("");function Aa(e,t,n){if(ou&&Wr){let i=Sw.get(e);i||Sw.set(e,i=new Map);let r=i.get(n);r||(i.set(n,r=new gI),r.map=i,r.key=n),r.track()}}function eh(e,t,n,i,r,a){const l=Sw.get(e);if(!l){ob++;return}const h=s=>{s&&s.trigger()};if(fI(),t==="clear")l.forEach(h);else{const s=Qn(e),p=s&&hI(n);if(s&&n==="length"){const v=Number(i);l.forEach((x,T)=>{(T==="length"||T===ab||!ed(T)&&T>=v)&&h(x)})}else switch((n!==void 0||l.has(void 0))&&h(l.get(n)),p&&h(l.get(ab)),t){case"add":s?p&&h(l.get("length")):(h(l.get(vp)),v_(e)&&h(l.get(pC)));break;case"delete":s||(h(l.get(vp)),v_(e)&&h(l.get(pC)));break;case"set":v_(e)&&h(l.get(vp));break}}mI()}function _H(e,t){const n=Sw.get(e);return n&&n.get(t)}function Jg(e){const t=Nn(e);return t===e?t:(Aa(t,"iterate",ab),Rc(e)?t:t.map(ta))}function F1(e){return Aa(e=Nn(e),"iterate",ab),e}const vH={__proto__:null,[Symbol.iterator](){return cE(this,Symbol.iterator,ta)},concat(...e){return Jg(this).concat(...e.map(t=>Qn(t)?Jg(t):t))},entries(){return cE(this,"entries",e=>(e[1]=ta(e[1]),e))},every(e,t){return $d(this,"every",e,t,void 0,arguments)},filter(e,t){return $d(this,"filter",e,t,n=>n.map(ta),arguments)},find(e,t){return $d(this,"find",e,t,ta,arguments)},findIndex(e,t){return $d(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return $d(this,"findLast",e,t,ta,arguments)},findLastIndex(e,t){return $d(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return $d(this,"forEach",e,t,void 0,arguments)},includes(...e){return uE(this,"includes",e)},indexOf(...e){return uE(this,"indexOf",e)},join(e){return Jg(this).join(e)},lastIndexOf(...e){return uE(this,"lastIndexOf",e)},map(e,t){return $d(this,"map",e,t,void 0,arguments)},pop(){return uy(this,"pop")},push(...e){return uy(this,"push",e)},reduce(e,...t){return VR(this,"reduce",e,t)},reduceRight(e,...t){return VR(this,"reduceRight",e,t)},shift(){return uy(this,"shift")},some(e,t){return $d(this,"some",e,t,void 0,arguments)},splice(...e){return uy(this,"splice",e)},toReversed(){return Jg(this).toReversed()},toSorted(e){return Jg(this).toSorted(e)},toSpliced(...e){return Jg(this).toSpliced(...e)},unshift(...e){return uy(this,"unshift",e)},values(){return cE(this,"values",ta)}};function cE(e,t,n){const i=F1(e),r=i[t]();return i!==e&&!Rc(e)&&(r._next=r.next,r.next=()=>{const a=r._next();return a.done||(a.value=n(a.value)),a}),r}const yH=Array.prototype;function $d(e,t,n,i,r,a){const l=F1(e),h=l!==e&&!Rc(e),s=l[t];if(s!==yH[t]){const x=s.apply(e,a);return h?ta(x):x}let p=n;l!==e&&(h?p=function(x,T){return n.call(this,ta(x),T,e)}:n.length>2&&(p=function(x,T){return n.call(this,x,T,e)}));const v=s.call(l,p,i);return h&&r?r(v):v}function VR(e,t,n,i){const r=F1(e);let a=n;return r!==e&&(Rc(e)?n.length>3&&(a=function(l,h,s){return n.call(this,l,h,s,e)}):a=function(l,h,s){return n.call(this,l,ta(h),s,e)}),r[t](a,...i)}function uE(e,t,n){const i=Nn(e);Aa(i,"iterate",ab);const r=i[t](...n);return(r===-1||r===!1)&&z1(n[0])?(n[0]=Nn(n[0]),i[t](...n)):r}function uy(e,t,n=[]){uh(),fI();const i=Nn(e)[t].apply(e,n);return mI(),dh(),i}const bH=cI("__proto__,__v_isRef,__isVue"),fz=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(ed));function xH(e){ed(e)||(e=String(e));const t=Nn(this);return Aa(t,"has",e),t.hasOwnProperty(e)}class mz{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,i){if(n==="__v_skip")return t.__v_skip;const r=this._isReadonly,a=this._isShallow;if(n==="__v_isReactive")return!r;if(n==="__v_isReadonly")return r;if(n==="__v_isShallow")return a;if(n==="__v_raw")return i===(r?a?MH:vz:a?_z:gz).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(i)?t:void 0;const l=Qn(t);if(!r){let s;if(l&&(s=vH[n]))return s;if(n==="hasOwnProperty")return xH}const h=Reflect.get(t,n,Rs(t)?t:i);if((ed(n)?fz.has(n):bH(n))||(r||Aa(t,"get",n),a))return h;if(Rs(h)){const s=l&&hI(n)?h:h.value;return r&&Ir(s)?Mp(s):s}return Ir(h)?r?Mp(h):to(h):h}}class pz extends mz{constructor(t=!1){super(!1,t)}set(t,n,i,r){let a=t[n];if(!this._isShallow){const s=Nf(a);if(!Rc(i)&&!Nf(i)&&(a=Nn(a),i=Nn(i)),!Qn(t)&&Rs(a)&&!Rs(i))return s||(a.value=i),!0}const l=Qn(t)&&hI(n)?Number(n)<t.length:wr(t,n),h=Reflect.set(t,n,i,Rs(t)?t:r);return t===Nn(r)&&(l?Mf(i,a)&&eh(t,"set",n,i):eh(t,"add",n,i)),h}deleteProperty(t,n){const i=wr(t,n);t[n];const r=Reflect.deleteProperty(t,n);return r&&i&&eh(t,"delete",n,void 0),r}has(t,n){const i=Reflect.has(t,n);return(!ed(n)||!fz.has(n))&&Aa(t,"has",n),i}ownKeys(t){return Aa(t,"iterate",Qn(t)?"length":vp),Reflect.ownKeys(t)}}class wH extends mz{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const TH=new pz,SH=new wH,EH=new pz(!0);const gC=e=>e,vx=e=>Reflect.getPrototypeOf(e);function CH(e,t,n){return function(...i){const r=this.__v_raw,a=Nn(r),l=v_(a),h=e==="entries"||e===Symbol.iterator&&l,s=e==="keys"&&l,p=r[e](...i),v=n?gC:t?Ew:ta;return!t&&Aa(a,"iterate",s?pC:vp),{next(){const{value:x,done:T}=p.next();return T?{value:x,done:T}:{value:h?[v(x[0]),v(x[1])]:v(x),done:T}},[Symbol.iterator](){return this}}}}function yx(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function kH(e,t){const n={get(r){const a=this.__v_raw,l=Nn(a),h=Nn(r);e||(Mf(r,h)&&Aa(l,"get",r),Aa(l,"get",h));const{has:s}=vx(l),p=t?gC:e?Ew:ta;if(s.call(l,r))return p(a.get(r));if(s.call(l,h))return p(a.get(h));a!==l&&a.get(r)},get size(){const r=this.__v_raw;return!e&&Aa(Nn(r),"iterate",vp),r.size},has(r){const a=this.__v_raw,l=Nn(a),h=Nn(r);return e||(Mf(r,h)&&Aa(l,"has",r),Aa(l,"has",h)),r===h?a.has(r):a.has(r)||a.has(h)},forEach(r,a){const l=this,h=l.__v_raw,s=Nn(h),p=t?gC:e?Ew:ta;return!e&&Aa(s,"iterate",vp),h.forEach((v,x)=>r.call(a,p(v),p(x),l))}};return _o(n,e?{add:yx("add"),set:yx("set"),delete:yx("delete"),clear:yx("clear")}:{add(r){!t&&!Rc(r)&&!Nf(r)&&(r=Nn(r));const a=Nn(this);return vx(a).has.call(a,r)||(a.add(r),eh(a,"add",r,r)),this},set(r,a){!t&&!Rc(a)&&!Nf(a)&&(a=Nn(a));const l=Nn(this),{has:h,get:s}=vx(l);let p=h.call(l,r);p||(r=Nn(r),p=h.call(l,r));const v=s.call(l,r);return l.set(r,a),p?Mf(a,v)&&eh(l,"set",r,a):eh(l,"add",r,a),this},delete(r){const a=Nn(this),{has:l,get:h}=vx(a);let s=l.call(a,r);s||(r=Nn(r),s=l.call(a,r)),h&&h.call(a,r);const p=a.delete(r);return s&&eh(a,"delete",r,void 0),p},clear(){const r=Nn(this),a=r.size!==0,l=r.clear();return a&&eh(r,"clear",void 0,void 0),l}}),["keys","values","entries",Symbol.iterator].forEach(r=>{n[r]=CH(r,e,t)}),n}function _I(e,t){const n=kH(e,t);return(i,r,a)=>r==="__v_isReactive"?!e:r==="__v_isReadonly"?e:r==="__v_raw"?i:Reflect.get(wr(n,r)&&r in i?n:i,r,a)}const IH={get:_I(!1,!1)},AH={get:_I(!1,!0)},PH={get:_I(!0,!1)};const gz=new WeakMap,_z=new WeakMap,vz=new WeakMap,MH=new WeakMap;function DH(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function RH(e){return e.__v_skip||!Object.isExtensible(e)?0:DH(nH(e))}function to(e){return Nf(e)?e:vI(e,!1,TH,IH,gz)}function LH(e){return vI(e,!1,EH,AH,_z)}function Mp(e){return vI(e,!0,SH,PH,vz)}function vI(e,t,n,i,r){if(!Ir(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const a=RH(e);if(a===0)return e;const l=r.get(e);if(l)return l;const h=new Proxy(e,a===2?i:n);return r.set(e,h),h}function yp(e){return Nf(e)?yp(e.__v_raw):!!(e&&e.__v_isReactive)}function Nf(e){return!!(e&&e.__v_isReadonly)}function Rc(e){return!!(e&&e.__v_isShallow)}function z1(e){return e?!!e.__v_raw:!1}function Nn(e){const t=e&&e.__v_raw;return t?Nn(t):e}function yz(e){return!wr(e,"__v_skip")&&Object.isExtensible(e)&&QF(e,"__v_skip",!0),e}const ta=e=>Ir(e)?to(e):e,Ew=e=>Ir(e)?Mp(e):e;function Rs(e){return e?e.__v_isRef===!0:!1}function at(e){return bz(e,!1)}function Xt(e){return bz(e,!0)}function bz(e,t){return Rs(e)?e:new OH(e,t)}class OH{constructor(t,n){this.dep=new gI,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:Nn(t),this._value=n?t:ta(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,i=this.__v_isShallow||Rc(t)||Nf(t);t=i?t:Nn(t),Mf(t,n)&&(this._rawValue=t,this._value=i?t:ta(t),this.dep.trigger())}}function Si(e){return Rs(e)?e.value:e}function Ba(e){return gi(e)?e():Si(e)}const VH={get:(e,t,n)=>t==="__v_raw"?e:Si(Reflect.get(e,t,n)),set:(e,t,n,i)=>{const r=e[t];return Rs(r)&&!Rs(n)?(r.value=n,!0):Reflect.set(e,t,n,i)}};function xz(e){return yp(e)?e:new Proxy(e,VH)}function iv(e){const t=Qn(e)?new Array(e.length):{};for(const n in e)t[n]=wz(e,n);return t}class BH{constructor(t,n,i){this._object=t,this._key=n,this._defaultValue=i,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return _H(Nn(this._object),this._key)}}class FH{constructor(t){this._getter=t,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function Ue(e,t,n){return Rs(e)?e:gi(e)?new FH(e):Ir(e)&&arguments.length>1?wz(e,t,n):at(e)}function wz(e,t,n){const i=e[t];return Rs(i)?i:new BH(e,t,n)}class zH{constructor(t,n,i){this.fn=t,this.setter=n,this._value=void 0,this.dep=new gI(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=ob-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=i}notify(){if(this.flags|=16,!(this.flags&8)&&Wr!==this)return az(this,!0),!0}get value(){const t=this.dep.track();return uz(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function NH(e,t,n=!1){let i,r;return gi(e)?i=e:(i=e.get,r=e.set),new zH(i,r,n)}const bx={},Cw=new WeakMap;let sp;function UH(e,t=!1,n=sp){if(n){let i=Cw.get(n);i||Cw.set(n,i=[]),i.push(e)}}function $H(e,t,n=Fr){const{immediate:i,deep:r,once:a,scheduler:l,augmentJob:h,call:s}=n,p=J=>r?J:Rc(J)||r===!1||r===0?th(J,1):th(J);let v,x,T,k,P=!1,M=!1;if(Rs(e)?(x=()=>e.value,P=Rc(e)):yp(e)?(x=()=>p(e),P=!0):Qn(e)?(M=!0,P=e.some(J=>yp(J)||Rc(J)),x=()=>e.map(J=>{if(Rs(J))return J.value;if(yp(J))return p(J);if(gi(J))return s?s(J,2):J()})):gi(e)?t?x=s?()=>s(e,2):e:x=()=>{if(T){uh();try{T()}finally{dh()}}const J=sp;sp=v;try{return s?s(e,3,[k]):e(k)}finally{sp=J}}:x=Gu,t&&r){const J=x,Q=r===!0?1/0:r;x=()=>th(J(),Q)}const L=rz(),B=()=>{v.stop(),L&&L.active&&dI(L.effects,v)};if(a&&t){const J=t;t=(...Q)=>{J(...Q),B()}}let F=M?new Array(e.length).fill(bx):bx;const X=J=>{if(!(!(v.flags&1)||!v.dirty&&!J))if(t){const Q=v.run();if(r||P||(M?Q.some((re,Z)=>Mf(re,F[Z])):Mf(Q,F))){T&&T();const re=sp;sp=v;try{const Z=[Q,F===bx?void 0:M&&F[0]===bx?[]:F,k];F=Q,s?s(t,3,Z):t(...Z)}finally{sp=re}}}else v.run()};return h&&h(X),v=new sz(x),v.scheduler=l?()=>l(X,!1):X,k=J=>UH(J,!1,v),T=v.onStop=()=>{const J=Cw.get(v);if(J){if(s)s(J,4);else for(const Q of J)Q();Cw.delete(v)}},t?i?X(!0):F=v.run():l?l(X.bind(null,!0),!0):v.run(),B.pause=v.pause.bind(v),B.resume=v.resume.bind(v),B.stop=B,B}function th(e,t=1/0,n){if(t<=0||!Ir(e)||e.__v_skip||(n=n||new Map,(n.get(e)||0)>=t))return e;if(n.set(e,t),t--,Rs(e))th(e.value,t,n);else if(Qn(e))for(let i=0;i<e.length;i++)th(e[i],t,n);else if(L1(e)||v_(e))e.forEach(i=>{th(i,t,n)});else if(JF(e)){for(const i in e)th(e[i],t,n);for(const i of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,i)&&th(e[i],t,n)}return e}/**
* @vue/runtime-core v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function e0(e,t,n,i){try{return i?e(...i):e()}catch(r){N1(r,t,n)}}function lu(e,t,n,i){if(gi(e)){const r=e0(e,t,n,i);return r&&ZF(r)&&r.catch(a=>{N1(a,t,n)}),r}if(Qn(e)){const r=[];for(let a=0;a<e.length;a++)r.push(lu(e[a],t,n,i));return r}}function N1(e,t,n,i=!0){const r=t?t.vnode:null,{errorHandler:a,throwUnhandledErrorInProduction:l}=t&&t.appContext.config||Fr;if(t){let h=t.parent;const s=t.proxy,p=`https://vuejs.org/error-reference/#runtime-${n}`;for(;h;){const v=h.ec;if(v){for(let x=0;x<v.length;x++)if(v[x](e,s,p)===!1)return}h=h.parent}if(a){uh(),e0(a,null,10,[e,s,p]),dh();return}}jH(e,n,r,i,l)}function jH(e,t,n,i=!0,r=!1){if(r)throw e;console.error(e)}const nl=[];let Bu=-1;const y_=[];let pf=null,o_=0;const Tz=Promise.resolve();let kw=null;function Gn(e){const t=kw||Tz;return e?t.then(this?e.bind(this):e):t}function WH(e){let t=Bu+1,n=nl.length;for(;t<n;){const i=t+n>>>1,r=nl[i],a=lb(r);a<e||a===e&&r.flags&2?t=i+1:n=i}return t}function yI(e){if(!(e.flags&1)){const t=lb(e),n=nl[nl.length-1];!n||!(e.flags&2)&&t>=lb(n)?nl.push(e):nl.splice(WH(t),0,e),e.flags|=1,Sz()}}function Sz(){kw||(kw=Tz.then(Cz))}function HH(e){Qn(e)?y_.push(...e):pf&&e.id===-1?pf.splice(o_+1,0,e):e.flags&1||(y_.push(e),e.flags|=1),Sz()}function BR(e,t,n=Bu+1){for(;n<nl.length;n++){const i=nl[n];if(i&&i.flags&2){if(e&&i.id!==e.uid)continue;nl.splice(n,1),n--,i.flags&4&&(i.flags&=-2),i(),i.flags&4||(i.flags&=-2)}}}function Ez(e){if(y_.length){const t=[...new Set(y_)].sort((n,i)=>lb(n)-lb(i));if(y_.length=0,pf){pf.push(...t);return}for(pf=t,o_=0;o_<pf.length;o_++){const n=pf[o_];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}pf=null,o_=0}}const lb=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Cz(e){try{for(Bu=0;Bu<nl.length;Bu++){const t=nl[Bu];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),e0(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Bu<nl.length;Bu++){const t=nl[Bu];t&&(t.flags&=-2)}Bu=-1,nl.length=0,Ez(),kw=null,(nl.length||y_.length)&&Cz()}}let Zl=null,kz=null;function Iw(e){const t=Zl;return Zl=e,kz=e&&e.type.__scopeId||null,t}function Ro(e,t=Zl,n){if(!t||e._n)return e;const i=(...r)=>{i._d&&Mw(-1);const a=Iw(t);let l;try{l=e(...r)}finally{Iw(a),i._d&&Mw(1)}return l};return i._n=!0,i._c=!0,i._d=!0,i}function vi(e,t){if(Zl===null)return e;const n=W1(Zl),i=e.dirs||(e.dirs=[]);for(let r=0;r<t.length;r++){let[a,l,h,s=Fr]=t[r];a&&(gi(a)&&(a={mounted:a,updated:a}),a.deep&&th(l),i.push({dir:a,instance:n,value:l,oldValue:void 0,arg:h,modifiers:s}))}return e}function Km(e,t,n,i){const r=e.dirs,a=t&&t.dirs;for(let l=0;l<r.length;l++){const h=r[l];a&&(h.oldValue=a[l].value);let s=h.dir[i];s&&(uh(),lu(s,n,8,[e.el,h,e,t]),dh())}}const Iz=Symbol("_vte"),Az=e=>e.__isTeleport,Fy=e=>e&&(e.disabled||e.disabled===""),FR=e=>e&&(e.defer||e.defer===""),zR=e=>typeof SVGElement<"u"&&e instanceof SVGElement,NR=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,_C=(e,t)=>{const n=e&&e.to;return ls(n)?t?t(n):null:n},Pz={name:"Teleport",__isTeleport:!0,process(e,t,n,i,r,a,l,h,s,p){const{mc:v,pc:x,pbc:T,o:{insert:k,querySelector:P,createText:M,createComment:L}}=p,B=Fy(t.props);let{shapeFlag:F,children:X,dynamicChildren:J}=t;if(e==null){const Q=t.el=M(""),re=t.anchor=M("");k(Q,n,i),k(re,n,i);const Z=(H,W)=>{F&16&&v(X,H,W,r,a,l,h,s)},$=()=>{const H=t.target=_C(t.props,P),W=Mz(H,t,M,k);H&&(l!=="svg"&&zR(H)?l="svg":l!=="mathml"&&NR(H)&&(l="mathml"),r&&r.isCE&&(r.ce._teleportTargets||(r.ce._teleportTargets=new Set)).add(H),B||(Z(H,W),Qx(t,!1)))};B&&(Z(n,re),Qx(t,!0)),FR(t.props)?(t.el.__isMounted=!1,tl(()=>{$(),delete t.el.__isMounted},a)):$()}else{if(FR(t.props)&&e.el.__isMounted===!1){tl(()=>{Pz.process(e,t,n,i,r,a,l,h,s,p)},a);return}t.el=e.el,t.targetStart=e.targetStart;const Q=t.anchor=e.anchor,re=t.target=e.target,Z=t.targetAnchor=e.targetAnchor,$=Fy(e.props),H=$?n:re,W=$?Q:Z;if(l==="svg"||zR(re)?l="svg":(l==="mathml"||NR(re))&&(l="mathml"),J?(T(e.dynamicChildren,J,H,r,a,l,h),CI(e,t,!0)):s||x(e,t,H,W,r,a,l,h,!1),B)$?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):xx(t,n,Q,p,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const te=t.target=_C(t.props,P);te&&xx(t,te,null,p,0)}else $&&xx(t,re,Z,p,1);Qx(t,B)}},remove(e,t,n,{um:i,o:{remove:r}},a){const{shapeFlag:l,children:h,anchor:s,targetStart:p,targetAnchor:v,target:x,props:T}=e;if(x&&(r(p),r(v)),a&&r(s),l&16){const k=a||!Fy(T);for(let P=0;P<h.length;P++){const M=h[P];i(M,t,n,k,!!M.dynamicChildren)}}},move:xx,hydrate:GH};function xx(e,t,n,{o:{insert:i},m:r},a=2){a===0&&i(e.targetAnchor,t,n);const{el:l,anchor:h,shapeFlag:s,children:p,props:v}=e,x=a===2;if(x&&i(l,t,n),(!x||Fy(v))&&s&16)for(let T=0;T<p.length;T++)r(p[T],t,n,2);x&&i(h,t,n)}function GH(e,t,n,i,r,a,{o:{nextSibling:l,parentNode:h,querySelector:s,insert:p,createText:v}},x){function T(M,L,B,F){L.anchor=x(l(M),L,h(M),n,i,r,a),L.targetStart=B,L.targetAnchor=F}const k=t.target=_C(t.props,s),P=Fy(t.props);if(k){const M=k._lpa||k.firstChild;if(t.shapeFlag&16)if(P)T(e,t,M,M&&l(M));else{t.anchor=l(e);let L=M;for(;L;){if(L&&L.nodeType===8){if(L.data==="teleport start anchor")t.targetStart=L;else if(L.data==="teleport anchor"){t.targetAnchor=L,k._lpa=t.targetAnchor&&l(t.targetAnchor);break}}L=l(L)}t.targetAnchor||Mz(k,t,v,p),x(M&&l(M),t,k,n,i,r,a)}Qx(t,P)}else P&&t.shapeFlag&16&&T(e,t,e,l(e));return t.anchor&&l(t.anchor)}const qH=Pz;function Qx(e,t){const n=e.ctx;if(n&&n.ut){let i,r;for(t?(i=e.el,r=e.anchor):(i=e.targetStart,r=e.targetAnchor);i&&i!==r;)i.nodeType===1&&i.setAttribute("data-v-owner",n.uid),i=i.nextSibling;n.ut()}}function Mz(e,t,n,i){const r=t.targetStart=n(""),a=t.targetAnchor=n("");return r[Iz]=a,e&&(i(r,e),i(a,e)),a}const Zd=Symbol("_leaveCb"),wx=Symbol("_enterCb");function Dz(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return cs(()=>{e.isMounted=!0}),Yr(()=>{e.isUnmounting=!0}),e}const Sc=[Function,Array],Rz={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Sc,onEnter:Sc,onAfterEnter:Sc,onEnterCancelled:Sc,onBeforeLeave:Sc,onLeave:Sc,onAfterLeave:Sc,onLeaveCancelled:Sc,onBeforeAppear:Sc,onAppear:Sc,onAfterAppear:Sc,onAppearCancelled:Sc},Lz=e=>{const t=e.subTree;return t.component?Lz(t.component):t},KH={name:"BaseTransition",props:Rz,setup(e,{slots:t}){const n=n0(),i=Dz();return()=>{const r=t.default&&bI(t.default(),!0);if(!r||!r.length)return;const a=Oz(r),l=Nn(e),{mode:h}=l;if(i.isLeaving)return dE(a);const s=UR(a);if(!s)return dE(a);let p=cb(s,l,i,n,x=>p=x);s.type!==Ma&&Dp(s,p);let v=n.subTree&&UR(n.subTree);if(v&&v.type!==Ma&&!dp(v,s)&&Lz(n).type!==Ma){let x=cb(v,l,i,n);if(Dp(v,x),h==="out-in"&&s.type!==Ma)return i.isLeaving=!0,x.afterLeave=()=>{i.isLeaving=!1,n.job.flags&8||n.update(),delete x.afterLeave,v=void 0},dE(a);h==="in-out"&&s.type!==Ma?x.delayLeave=(T,k,P)=>{const M=Vz(i,v);M[String(v.key)]=v,T[Zd]=()=>{k(),T[Zd]=void 0,delete p.delayedLeave,v=void 0},p.delayedLeave=()=>{P(),delete p.delayedLeave,v=void 0}}:v=void 0}else v&&(v=void 0);return a}}};function Oz(e){let t=e[0];if(e.length>1){for(const n of e)if(n.type!==Ma){t=n;break}}return t}const XH=KH;function Vz(e,t){const{leavingVNodes:n}=e;let i=n.get(t.type);return i||(i=Object.create(null),n.set(t.type,i)),i}function cb(e,t,n,i,r){const{appear:a,mode:l,persisted:h=!1,onBeforeEnter:s,onEnter:p,onAfterEnter:v,onEnterCancelled:x,onBeforeLeave:T,onLeave:k,onAfterLeave:P,onLeaveCancelled:M,onBeforeAppear:L,onAppear:B,onAfterAppear:F,onAppearCancelled:X}=t,J=String(e.key),Q=Vz(n,e),re=(H,W)=>{H&&lu(H,i,9,W)},Z=(H,W)=>{const te=W[1];re(H,W),Qn(H)?H.every(Y=>Y.length<=1)&&te():H.length<=1&&te()},$={mode:l,persisted:h,beforeEnter(H){let W=s;if(!n.isMounted)if(a)W=L||s;else return;H[Zd]&&H[Zd](!0);const te=Q[J];te&&dp(e,te)&&te.el[Zd]&&te.el[Zd](),re(W,[H])},enter(H){let W=p,te=v,Y=x;if(!n.isMounted)if(a)W=B||p,te=F||v,Y=X||x;else return;let ne=!1;const Se=H[wx]=Fe=>{ne||(ne=!0,Fe?re(Y,[H]):re(te,[H]),$.delayedLeave&&$.delayedLeave(),H[wx]=void 0)};W?Z(W,[H,Se]):Se()},leave(H,W){const te=String(e.key);if(H[wx]&&H[wx](!0),n.isUnmounting)return W();re(T,[H]);let Y=!1;const ne=H[Zd]=Se=>{Y||(Y=!0,W(),Se?re(M,[H]):re(P,[H]),H[Zd]=void 0,Q[te]===e&&delete Q[te])};Q[te]=e,k?Z(k,[H,ne]):ne()},clone(H){const W=cb(H,t,n,i,r);return r&&r(W),W}};return $}function dE(e){if(U1(e))return e=hh(e),e.children=null,e}function UR(e){if(!U1(e))return Az(e.type)&&e.children?Oz(e.children):e;if(e.component)return e.component.subTree;const{shapeFlag:t,children:n}=e;if(n){if(t&16)return n[0];if(t&32&&gi(n.default))return n.default()}}function Dp(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Dp(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function bI(e,t=!1,n){let i=[],r=0;for(let a=0;a<e.length;a++){let l=e[a];const h=n==null?l.key:String(n)+String(l.key!=null?l.key:a);l.type===sn?(l.patchFlag&128&&r++,i=i.concat(bI(l.children,t,h))):(t||l.type!==Ma)&&i.push(h!=null?hh(l,{key:h}):l)}if(r>1)for(let a=0;a<i.length;a++)i[a].patchFlag=-2;return i}function Bz(e,t){return gi(e)?_o({name:e.name},t,{setup:e}):e}function aa(){const e=n0();return e?(e.appContext.config.idPrefix||"v")+"-"+e.ids[0]+e.ids[1]++:""}function Fz(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const Aw=new WeakMap;function zy(e,t,n,i,r=!1){if(Qn(e)){e.forEach((P,M)=>zy(P,t&&(Qn(t)?t[M]:t),n,i,r));return}if(Ny(i)&&!r){i.shapeFlag&512&&i.type.__asyncResolved&&i.component.subTree.component&&zy(e,t,n,i.component.subTree);return}const a=i.shapeFlag&4?W1(i.component):i.el,l=r?null:a,{i:h,r:s}=e,p=t&&t.r,v=h.refs===Fr?h.refs={}:h.refs,x=h.setupState,T=Nn(x),k=x===Fr?XF:P=>wr(T,P);if(p!=null&&p!==s){if($R(t),ls(p))v[p]=null,k(p)&&(x[p]=null);else if(Rs(p)){p.value=null;const P=t;P.k&&(v[P.k]=null)}}if(gi(s))e0(s,h,12,[l,v]);else{const P=ls(s),M=Rs(s);if(P||M){const L=()=>{if(e.f){const B=P?k(s)?x[s]:v[s]:s.value;if(r)Qn(B)&&dI(B,a);else if(Qn(B))B.includes(a)||B.push(a);else if(P)v[s]=[a],k(s)&&(x[s]=v[s]);else{const F=[a];s.value=F,e.k&&(v[e.k]=F)}}else P?(v[s]=l,k(s)&&(x[s]=l)):M&&(s.value=l,e.k&&(v[e.k]=l))};if(l){const B=()=>{L(),Aw.delete(e)};B.id=-1,Aw.set(e,B),tl(B,n)}else $R(e),L()}}}function $R(e){const t=Aw.get(e);t&&(t.flags|=8,Aw.delete(e))}V1().requestIdleCallback;V1().cancelIdleCallback;const Ny=e=>!!e.type.__asyncLoader,U1=e=>e.type.__isKeepAlive;function zz(e,t){Nz(e,"a",t)}function xI(e,t){Nz(e,"da",t)}function Nz(e,t,n=Da){const i=e.__wdc||(e.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return e()});if($1(t,i,n),n){let r=n.parent;for(;r&&r.parent;)U1(r.parent.vnode)&&ZH(i,t,n,r),r=r.parent}}function ZH(e,t,n,i){const r=$1(t,e,i,!0);TI(()=>{dI(i[t],r)},n)}function $1(e,t,n=Da,i=!1){if(n){const r=n[e]||(n[e]=[]),a=t.__weh||(t.__weh=(...l)=>{uh();const h=i0(n),s=lu(t,n,e,l);return h(),dh(),s});return i?r.unshift(a):r.push(a),a}}const wh=e=>(t,n=Da)=>{(!hb||e==="sp")&&$1(e,(...i)=>t(...i),n)},rv=wh("bm"),cs=wh("m"),Uz=wh("bu"),wI=wh("u"),Yr=wh("bum"),TI=wh("um"),YH=wh("sp"),JH=wh("rtg"),QH=wh("rtc");function eG(e,t=Da){$1("ec",e,t)}const $z="components";function tG(e,t){return Hz($z,e,!0,t)||e}const jz=Symbol.for("v-ndc");function Wz(e){return ls(e)?Hz($z,e,!1)||e:e||jz}function Hz(e,t,n=!0,i=!1){const r=Zl||Da;if(r){const a=r.type;{const h=NG(a,!1);if(h&&(h===t||h===rl(t)||h===ld(rl(t))))return a}const l=jR(r[e]||a[e],t)||jR(r.appContext[e],t);return!l&&i?a:l}}function jR(e,t){return e&&(e[t]||e[rl(t)]||e[ld(rl(t))])}function As(e,t,n,i){let r;const a=n,l=Qn(e);if(l||ls(e)){const h=l&&yp(e);let s=!1,p=!1;h&&(s=!Rc(e),p=Nf(e),e=F1(e)),r=new Array(e.length);for(let v=0,x=e.length;v<x;v++)r[v]=t(s?p?Ew(ta(e[v])):ta(e[v]):e[v],v,void 0,a)}else if(typeof e=="number"){r=new Array(e);for(let h=0;h<e;h++)r[h]=t(h+1,h,void 0,a)}else if(Ir(e))if(e[Symbol.iterator])r=Array.from(e,(h,s)=>t(h,s,void 0,a));else{const h=Object.keys(e);r=new Array(h.length);for(let s=0,p=h.length;s<p;s++){const v=h[s];r[s]=t(e[v],v,s,a)}}else r=[];return r}const vC=e=>e?u3(e)?W1(e):vC(e.parent):null,Uy=_o(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>vC(e.parent),$root:e=>vC(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>qz(e),$forceUpdate:e=>e.f||(e.f=()=>{yI(e.update)}),$nextTick:e=>e.n||(e.n=Gn.bind(e.proxy)),$watch:e=>wG.bind(e)}),hE=(e,t)=>e!==Fr&&!e.__isScriptSetup&&wr(e,t),nG={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:i,data:r,props:a,accessCache:l,type:h,appContext:s}=e;let p;if(t[0]!=="$"){const k=l[t];if(k!==void 0)switch(k){case 1:return i[t];case 2:return r[t];case 4:return n[t];case 3:return a[t]}else{if(hE(i,t))return l[t]=1,i[t];if(r!==Fr&&wr(r,t))return l[t]=2,r[t];if((p=e.propsOptions[0])&&wr(p,t))return l[t]=3,a[t];if(n!==Fr&&wr(n,t))return l[t]=4,n[t];yC&&(l[t]=0)}}const v=Uy[t];let x,T;if(v)return t==="$attrs"&&Aa(e.attrs,"get",""),v(e);if((x=h.__cssModules)&&(x=x[t]))return x;if(n!==Fr&&wr(n,t))return l[t]=4,n[t];if(T=s.config.globalProperties,wr(T,t))return T[t]},set({_:e},t,n){const{data:i,setupState:r,ctx:a}=e;return hE(r,t)?(r[t]=n,!0):i!==Fr&&wr(i,t)?(i[t]=n,!0):wr(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(a[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:i,appContext:r,propsOptions:a,type:l}},h){let s,p;return!!(n[h]||e!==Fr&&h[0]!=="$"&&wr(e,h)||hE(t,h)||(s=a[0])&&wr(s,h)||wr(i,h)||wr(Uy,h)||wr(r.config.globalProperties,h)||(p=l.__cssModules)&&p[h])},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:wr(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function WR(e){return Qn(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let yC=!0;function iG(e){const t=qz(e),n=e.proxy,i=e.ctx;yC=!1,t.beforeCreate&&HR(t.beforeCreate,e,"bc");const{data:r,computed:a,methods:l,watch:h,provide:s,inject:p,created:v,beforeMount:x,mounted:T,beforeUpdate:k,updated:P,activated:M,deactivated:L,beforeDestroy:B,beforeUnmount:F,destroyed:X,unmounted:J,render:Q,renderTracked:re,renderTriggered:Z,errorCaptured:$,serverPrefetch:H,expose:W,inheritAttrs:te,components:Y,directives:ne,filters:Se}=t;if(p&&rG(p,i,null),l)for(const Ge in l){const je=l[Ge];gi(je)&&(i[Ge]=je.bind(n))}if(r){const Ge=r.call(n,n);Ir(Ge)&&(e.data=to(Ge))}if(yC=!0,a)for(const Ge in a){const je=a[Ge],Ae=gi(je)?je.bind(n,n):gi(je.get)?je.get.bind(n,n):Gu,Ke=!gi(je)&&gi(je.set)?je.set.bind(n):Gu,ve=fe({get:Ae,set:Ke});Object.defineProperty(i,Ge,{enumerable:!0,configurable:!0,get:()=>ve.value,set:Le=>ve.value=Le})}if(h)for(const Ge in h)Gz(h[Ge],i,n,Ge);if(s){const Ge=gi(s)?s.call(n):s;Reflect.ownKeys(Ge).forEach(je=>{Mr(je,Ge[je])})}v&&HR(v,e,"c");function Ve(Ge,je){Qn(je)?je.forEach(Ae=>Ge(Ae.bind(n))):je&&Ge(je.bind(n))}if(Ve(rv,x),Ve(cs,T),Ve(Uz,k),Ve(wI,P),Ve(zz,M),Ve(xI,L),Ve(eG,$),Ve(QH,re),Ve(JH,Z),Ve(Yr,F),Ve(TI,J),Ve(YH,H),Qn(W))if(W.length){const Ge=e.exposed||(e.exposed={});W.forEach(je=>{Object.defineProperty(Ge,je,{get:()=>n[je],set:Ae=>n[je]=Ae,enumerable:!0})})}else e.exposed||(e.exposed={});Q&&e.render===Gu&&(e.render=Q),te!=null&&(e.inheritAttrs=te),Y&&(e.components=Y),ne&&(e.directives=ne),H&&Fz(e)}function rG(e,t,n=Gu){Qn(e)&&(e=bC(e));for(const i in e){const r=e[i];let a;Ir(r)?"default"in r?a=xi(r.from||i,r.default,!0):a=xi(r.from||i):a=xi(r),Rs(a)?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>a.value,set:l=>a.value=l}):t[i]=a}}function HR(e,t,n){lu(Qn(e)?e.map(i=>i.bind(t.proxy)):e.bind(t.proxy),t,n)}function Gz(e,t,n,i){let r=i.includes(".")?r3(n,i):()=>n[i];if(ls(e)){const a=t[e];gi(a)&&Ht(r,a)}else if(gi(e))Ht(r,e.bind(n));else if(Ir(e))if(Qn(e))e.forEach(a=>Gz(a,t,n,i));else{const a=gi(e.handler)?e.handler.bind(n):t[e.handler];gi(a)&&Ht(r,a,e)}}function qz(e){const t=e.type,{mixins:n,extends:i}=t,{mixins:r,optionsCache:a,config:{optionMergeStrategies:l}}=e.appContext,h=a.get(t);let s;return h?s=h:!r.length&&!n&&!i?s=t:(s={},r.length&&r.forEach(p=>Pw(s,p,l,!0)),Pw(s,t,l)),Ir(t)&&a.set(t,s),s}function Pw(e,t,n,i=!1){const{mixins:r,extends:a}=t;a&&Pw(e,a,n,!0),r&&r.forEach(l=>Pw(e,l,n,!0));for(const l in t)if(!(i&&l==="expose")){const h=sG[l]||n&&n[l];e[l]=h?h(e[l],t[l]):t[l]}return e}const sG={data:GR,props:qR,emits:qR,methods:xy,computed:xy,beforeCreate:el,created:el,beforeMount:el,mounted:el,beforeUpdate:el,updated:el,beforeDestroy:el,beforeUnmount:el,destroyed:el,unmounted:el,activated:el,deactivated:el,errorCaptured:el,serverPrefetch:el,components:xy,directives:xy,watch:aG,provide:GR,inject:oG};function GR(e,t){return t?e?function(){return _o(gi(e)?e.call(this,this):e,gi(t)?t.call(this,this):t)}:t:e}function oG(e,t){return xy(bC(e),bC(t))}function bC(e){if(Qn(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function el(e,t){return e?[...new Set([].concat(e,t))]:t}function xy(e,t){return e?_o(Object.create(null),e,t):t}function qR(e,t){return e?Qn(e)&&Qn(t)?[...new Set([...e,...t])]:_o(Object.create(null),WR(e),WR(t??{})):t}function aG(e,t){if(!e)return t;if(!t)return e;const n=_o(Object.create(null),e);for(const i in t)n[i]=el(e[i],t[i]);return n}function Kz(){return{app:null,config:{isNativeTag:XF,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let lG=0;function cG(e,t){return function(i,r=null){gi(i)||(i=_o({},i)),r!=null&&!Ir(r)&&(r=null);const a=Kz(),l=new WeakSet,h=[];let s=!1;const p=a.app={_uid:lG++,_component:i,_props:r,_container:null,_context:a,_instance:null,version:$G,get config(){return a.config},set config(v){},use(v,...x){return l.has(v)||(v&&gi(v.install)?(l.add(v),v.install(p,...x)):gi(v)&&(l.add(v),v(p,...x))),p},mixin(v){return a.mixins.includes(v)||a.mixins.push(v),p},component(v,x){return x?(a.components[v]=x,p):a.components[v]},directive(v,x){return x?(a.directives[v]=x,p):a.directives[v]},mount(v,x,T){if(!s){const k=p._ceVNode||ce(i,r);return k.appContext=a,T===!0?T="svg":T===!1&&(T=void 0),e(k,v,T),s=!0,p._container=v,v.__vue_app__=p,W1(k.component)}},onUnmount(v){h.push(v)},unmount(){s&&(lu(h,p._instance,16),e(null,p._container),delete p._container.__vue_app__)},provide(v,x){return a.provides[v]=x,p},runWithContext(v){const x=b_;b_=p;try{return v()}finally{b_=x}}};return p}}let b_=null;function Mr(e,t){if(Da){let n=Da.provides;const i=Da.parent&&Da.parent.provides;i===n&&(n=Da.provides=Object.create(i)),n[e]=t}}function xi(e,t,n=!1){const i=n0();if(i||b_){let r=b_?b_._context.provides:i?i.parent==null||i.ce?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:void 0;if(r&&e in r)return r[e];if(arguments.length>1)return n&&gi(t)?t.call(i&&i.proxy):t}}const Xz={},Zz=()=>Object.create(Xz),Yz=e=>Object.getPrototypeOf(e)===Xz;function uG(e,t,n,i=!1){const r={},a=Zz();e.propsDefaults=Object.create(null),Jz(e,t,r,a);for(const l in e.propsOptions[0])l in r||(r[l]=void 0);n?e.props=i?r:LH(r):e.type.props?e.props=r:e.props=a,e.attrs=a}function dG(e,t,n,i){const{props:r,attrs:a,vnode:{patchFlag:l}}=e,h=Nn(r),[s]=e.propsOptions;let p=!1;if((i||l>0)&&!(l&16)){if(l&8){const v=e.vnode.dynamicProps;for(let x=0;x<v.length;x++){let T=v[x];if(j1(e.emitsOptions,T))continue;const k=t[T];if(s)if(wr(a,T))k!==a[T]&&(a[T]=k,p=!0);else{const P=rl(T);r[P]=xC(s,h,P,k,e,!1)}else k!==a[T]&&(a[T]=k,p=!0)}}}else{Jz(e,t,r,a)&&(p=!0);let v;for(const x in h)(!t||!wr(t,x)&&((v=Xp(x))===x||!wr(t,v)))&&(s?n&&(n[x]!==void 0||n[v]!==void 0)&&(r[x]=xC(s,h,x,void 0,e,!0)):delete r[x]);if(a!==h)for(const x in a)(!t||!wr(t,x))&&(delete a[x],p=!0)}p&&eh(e.attrs,"set","")}function Jz(e,t,n,i){const[r,a]=e.propsOptions;let l=!1,h;if(t)for(let s in t){if(Oy(s))continue;const p=t[s];let v;r&&wr(r,v=rl(s))?!a||!a.includes(v)?n[v]=p:(h||(h={}))[v]=p:j1(e.emitsOptions,s)||(!(s in i)||p!==i[s])&&(i[s]=p,l=!0)}if(a){const s=Nn(n),p=h||Fr;for(let v=0;v<a.length;v++){const x=a[v];n[x]=xC(r,s,x,p[x],e,!wr(p,x))}}return l}function xC(e,t,n,i,r,a){const l=e[n];if(l!=null){const h=wr(l,"default");if(h&&i===void 0){const s=l.default;if(l.type!==Function&&!l.skipFactory&&gi(s)){const{propsDefaults:p}=r;if(n in p)i=p[n];else{const v=i0(r);i=p[n]=s.call(null,t),v()}}else i=s;r.ce&&r.ce._setProp(n,i)}l[0]&&(a&&!h?i=!1:l[1]&&(i===""||i===Xp(n))&&(i=!0))}return i}const hG=new WeakMap;function Qz(e,t,n=!1){const i=n?hG:t.propsCache,r=i.get(e);if(r)return r;const a=e.props,l={},h=[];let s=!1;if(!gi(e)){const v=x=>{s=!0;const[T,k]=Qz(x,t,!0);_o(l,T),k&&h.push(...k)};!n&&t.mixins.length&&t.mixins.forEach(v),e.extends&&v(e.extends),e.mixins&&e.mixins.forEach(v)}if(!a&&!s)return Ir(e)&&i.set(e,__),__;if(Qn(a))for(let v=0;v<a.length;v++){const x=rl(a[v]);KR(x)&&(l[x]=Fr)}else if(a)for(const v in a){const x=rl(v);if(KR(x)){const T=a[v],k=l[x]=Qn(T)||gi(T)?{type:T}:_o({},T),P=k.type;let M=!1,L=!0;if(Qn(P))for(let B=0;B<P.length;++B){const F=P[B],X=gi(F)&&F.name;if(X==="Boolean"){M=!0;break}else X==="String"&&(L=!1)}else M=gi(P)&&P.name==="Boolean";k[0]=M,k[1]=L,(M||wr(k,"default"))&&h.push(x)}}const p=[l,h];return Ir(e)&&i.set(e,p),p}function KR(e){return e[0]!=="$"&&!Oy(e)}const SI=e=>e==="_"||e==="_ctx"||e==="$stable",EI=e=>Qn(e)?e.map(Uu):[Uu(e)],fG=(e,t,n)=>{if(t._n)return t;const i=Ro((...r)=>EI(t(...r)),n);return i._c=!1,i},e3=(e,t,n)=>{const i=e._ctx;for(const r in e){if(SI(r))continue;const a=e[r];if(gi(a))t[r]=fG(r,a,i);else if(a!=null){const l=EI(a);t[r]=()=>l}}},t3=(e,t)=>{const n=EI(t);e.slots.default=()=>n},n3=(e,t,n)=>{for(const i in t)(n||!SI(i))&&(e[i]=t[i])},mG=(e,t,n)=>{const i=e.slots=Zz();if(e.vnode.shapeFlag&32){const r=t._;r?(n3(i,t,n),n&&QF(i,"_",r,!0)):e3(t,i)}else t&&t3(e,t)},pG=(e,t,n)=>{const{vnode:i,slots:r}=e;let a=!0,l=Fr;if(i.shapeFlag&32){const h=t._;h?n&&h===1?a=!1:n3(r,t,n):(a=!t.$stable,e3(t,r)),l=t}else t&&(t3(e,t),l={default:1});if(a)for(const h in r)!SI(h)&&l[h]==null&&delete r[h]},tl=PG;function gG(e){return _G(e)}function _G(e,t){const n=V1();n.__VUE__=!0;const{insert:i,remove:r,patchProp:a,createElement:l,createText:h,createComment:s,setText:p,setElementText:v,parentNode:x,nextSibling:T,setScopeId:k=Gu,insertStaticContent:P}=e,M=(Ce,ze,Ee,pt=null,dt=null,nt=null,Et=void 0,Dt=null,Ft=!!ze.dynamicChildren)=>{if(Ce===ze)return;Ce&&!dp(Ce,ze)&&(pt=Qe(Ce),Le(Ce,dt,nt,!0),Ce=null),ze.patchFlag===-2&&(Ft=!1,ze.dynamicChildren=null);const{type:Gt,ref:En,shapeFlag:en}=ze;switch(Gt){case t0:L(Ce,ze,Ee,pt);break;case Ma:B(Ce,ze,Ee,pt);break;case ew:Ce==null&&F(ze,Ee,pt,Et);break;case sn:Y(Ce,ze,Ee,pt,dt,nt,Et,Dt,Ft);break;default:en&1?Q(Ce,ze,Ee,pt,dt,nt,Et,Dt,Ft):en&6?ne(Ce,ze,Ee,pt,dt,nt,Et,Dt,Ft):(en&64||en&128)&&Gt.process(Ce,ze,Ee,pt,dt,nt,Et,Dt,Ft,yn)}En!=null&&dt?zy(En,Ce&&Ce.ref,nt,ze||Ce,!ze):En==null&&Ce&&Ce.ref!=null&&zy(Ce.ref,null,nt,Ce,!0)},L=(Ce,ze,Ee,pt)=>{if(Ce==null)i(ze.el=h(ze.children),Ee,pt);else{const dt=ze.el=Ce.el;ze.children!==Ce.children&&p(dt,ze.children)}},B=(Ce,ze,Ee,pt)=>{Ce==null?i(ze.el=s(ze.children||""),Ee,pt):ze.el=Ce.el},F=(Ce,ze,Ee,pt)=>{[Ce.el,Ce.anchor]=P(Ce.children,ze,Ee,pt,Ce.el,Ce.anchor)},X=({el:Ce,anchor:ze},Ee,pt)=>{let dt;for(;Ce&&Ce!==ze;)dt=T(Ce),i(Ce,Ee,pt),Ce=dt;i(ze,Ee,pt)},J=({el:Ce,anchor:ze})=>{let Ee;for(;Ce&&Ce!==ze;)Ee=T(Ce),r(Ce),Ce=Ee;r(ze)},Q=(Ce,ze,Ee,pt,dt,nt,Et,Dt,Ft)=>{ze.type==="svg"?Et="svg":ze.type==="math"&&(Et="mathml"),Ce==null?re(ze,Ee,pt,dt,nt,Et,Dt,Ft):H(Ce,ze,dt,nt,Et,Dt,Ft)},re=(Ce,ze,Ee,pt,dt,nt,Et,Dt)=>{let Ft,Gt;const{props:En,shapeFlag:en,transition:An,dirs:Ln}=Ce;if(Ft=Ce.el=l(Ce.type,nt,En&&En.is,En),en&8?v(Ft,Ce.children):en&16&&$(Ce.children,Ft,null,pt,dt,fE(Ce,nt),Et,Dt),Ln&&Km(Ce,null,pt,"created"),Z(Ft,Ce,Ce.scopeId,Et,pt),En){for(const cn in En)cn!=="value"&&!Oy(cn)&&a(Ft,cn,null,En[cn],nt,pt);"value"in En&&a(Ft,"value",null,En.value,nt),(Gt=En.onVnodeBeforeMount)&&Lu(Gt,pt,Ce)}Ln&&Km(Ce,null,pt,"beforeMount");const Wn=vG(dt,An);Wn&&An.beforeEnter(Ft),i(Ft,ze,Ee),((Gt=En&&En.onVnodeMounted)||Wn||Ln)&&tl(()=>{Gt&&Lu(Gt,pt,Ce),Wn&&An.enter(Ft),Ln&&Km(Ce,null,pt,"mounted")},dt)},Z=(Ce,ze,Ee,pt,dt)=>{if(Ee&&k(Ce,Ee),pt)for(let nt=0;nt<pt.length;nt++)k(Ce,pt[nt]);if(dt){let nt=dt.subTree;if(ze===nt||o3(nt.type)&&(nt.ssContent===ze||nt.ssFallback===ze)){const Et=dt.vnode;Z(Ce,Et,Et.scopeId,Et.slotScopeIds,dt.parent)}}},$=(Ce,ze,Ee,pt,dt,nt,Et,Dt,Ft=0)=>{for(let Gt=Ft;Gt<Ce.length;Gt++){const En=Ce[Gt]=Dt?gf(Ce[Gt]):Uu(Ce[Gt]);M(null,En,ze,Ee,pt,dt,nt,Et,Dt)}},H=(Ce,ze,Ee,pt,dt,nt,Et)=>{const Dt=ze.el=Ce.el;let{patchFlag:Ft,dynamicChildren:Gt,dirs:En}=ze;Ft|=Ce.patchFlag&16;const en=Ce.props||Fr,An=ze.props||Fr;let Ln;if(Ee&&Xm(Ee,!1),(Ln=An.onVnodeBeforeUpdate)&&Lu(Ln,Ee,ze,Ce),En&&Km(ze,Ce,Ee,"beforeUpdate"),Ee&&Xm(Ee,!0),(en.innerHTML&&An.innerHTML==null||en.textContent&&An.textContent==null)&&v(Dt,""),Gt?W(Ce.dynamicChildren,Gt,Dt,Ee,pt,fE(ze,dt),nt):Et||je(Ce,ze,Dt,null,Ee,pt,fE(ze,dt),nt,!1),Ft>0){if(Ft&16)te(Dt,en,An,Ee,dt);else if(Ft&2&&en.class!==An.class&&a(Dt,"class",null,An.class,dt),Ft&4&&a(Dt,"style",en.style,An.style,dt),Ft&8){const Wn=ze.dynamicProps;for(let cn=0;cn<Wn.length;cn++){const jt=Wn[cn],Tn=en[jt],On=An[jt];(On!==Tn||jt==="value")&&a(Dt,jt,Tn,On,dt,Ee)}}Ft&1&&Ce.children!==ze.children&&v(Dt,ze.children)}else!Et&&Gt==null&&te(Dt,en,An,Ee,dt);((Ln=An.onVnodeUpdated)||En)&&tl(()=>{Ln&&Lu(Ln,Ee,ze,Ce),En&&Km(ze,Ce,Ee,"updated")},pt)},W=(Ce,ze,Ee,pt,dt,nt,Et)=>{for(let Dt=0;Dt<ze.length;Dt++){const Ft=Ce[Dt],Gt=ze[Dt],En=Ft.el&&(Ft.type===sn||!dp(Ft,Gt)||Ft.shapeFlag&198)?x(Ft.el):Ee;M(Ft,Gt,En,null,pt,dt,nt,Et,!0)}},te=(Ce,ze,Ee,pt,dt)=>{if(ze!==Ee){if(ze!==Fr)for(const nt in ze)!Oy(nt)&&!(nt in Ee)&&a(Ce,nt,ze[nt],null,dt,pt);for(const nt in Ee){if(Oy(nt))continue;const Et=Ee[nt],Dt=ze[nt];Et!==Dt&&nt!=="value"&&a(Ce,nt,Dt,Et,dt,pt)}"value"in Ee&&a(Ce,"value",ze.value,Ee.value,dt)}},Y=(Ce,ze,Ee,pt,dt,nt,Et,Dt,Ft)=>{const Gt=ze.el=Ce?Ce.el:h(""),En=ze.anchor=Ce?Ce.anchor:h("");let{patchFlag:en,dynamicChildren:An,slotScopeIds:Ln}=ze;Ln&&(Dt=Dt?Dt.concat(Ln):Ln),Ce==null?(i(Gt,Ee,pt),i(En,Ee,pt),$(ze.children||[],Ee,En,dt,nt,Et,Dt,Ft)):en>0&&en&64&&An&&Ce.dynamicChildren?(W(Ce.dynamicChildren,An,Ee,dt,nt,Et,Dt),(ze.key!=null||dt&&ze===dt.subTree)&&CI(Ce,ze,!0)):je(Ce,ze,Ee,En,dt,nt,Et,Dt,Ft)},ne=(Ce,ze,Ee,pt,dt,nt,Et,Dt,Ft)=>{ze.slotScopeIds=Dt,Ce==null?ze.shapeFlag&512?dt.ctx.activate(ze,Ee,pt,Et,Ft):Se(ze,Ee,pt,dt,nt,Et,Ft):Fe(Ce,ze,Ft)},Se=(Ce,ze,Ee,pt,dt,nt,Et)=>{const Dt=Ce.component=OG(Ce,pt,dt);if(U1(Ce)&&(Dt.ctx.renderer=yn),VG(Dt,!1,Et),Dt.asyncDep){if(dt&&dt.registerDep(Dt,Ve,Et),!Ce.el){const Ft=Dt.subTree=ce(Ma);B(null,Ft,ze,Ee),Ce.placeholder=Ft.el}}else Ve(Dt,Ce,ze,Ee,dt,nt,Et)},Fe=(Ce,ze,Ee)=>{const pt=ze.component=Ce.component;if(IG(Ce,ze,Ee))if(pt.asyncDep&&!pt.asyncResolved){Ge(pt,ze,Ee);return}else pt.next=ze,pt.update();else ze.el=Ce.el,pt.vnode=ze},Ve=(Ce,ze,Ee,pt,dt,nt,Et)=>{const Dt=()=>{if(Ce.isMounted){let{next:en,bu:An,u:Ln,parent:Wn,vnode:cn}=Ce;{const Yi=i3(Ce);if(Yi){en&&(en.el=cn.el,Ge(Ce,en,Et)),Yi.asyncDep.then(()=>{Ce.isUnmounted||Dt()});return}}let jt=en,Tn;Xm(Ce,!1),en?(en.el=cn.el,Ge(Ce,en,Et)):en=cn,An&&Jx(An),(Tn=en.props&&en.props.onVnodeBeforeUpdate)&&Lu(Tn,Wn,en,cn),Xm(Ce,!0);const On=ZR(Ce),ki=Ce.subTree;Ce.subTree=On,M(ki,On,x(ki.el),Qe(ki),Ce,dt,nt),en.el=On.el,jt===null&&AG(Ce,On.el),Ln&&tl(Ln,dt),(Tn=en.props&&en.props.onVnodeUpdated)&&tl(()=>Lu(Tn,Wn,en,cn),dt)}else{let en;const{el:An,props:Ln}=ze,{bm:Wn,m:cn,parent:jt,root:Tn,type:On}=Ce,ki=Ny(ze);Xm(Ce,!1),Wn&&Jx(Wn),!ki&&(en=Ln&&Ln.onVnodeBeforeMount)&&Lu(en,jt,ze),Xm(Ce,!0);{Tn.ce&&Tn.ce._def.shadowRoot!==!1&&Tn.ce._injectChildStyle(On);const Yi=Ce.subTree=ZR(Ce);M(null,Yi,Ee,pt,Ce,dt,nt),ze.el=Yi.el}if(cn&&tl(cn,dt),!ki&&(en=Ln&&Ln.onVnodeMounted)){const Yi=ze;tl(()=>Lu(en,jt,Yi),dt)}(ze.shapeFlag&256||jt&&Ny(jt.vnode)&&jt.vnode.shapeFlag&256)&&Ce.a&&tl(Ce.a,dt),Ce.isMounted=!0,ze=Ee=pt=null}};Ce.scope.on();const Ft=Ce.effect=new sz(Dt);Ce.scope.off();const Gt=Ce.update=Ft.run.bind(Ft),En=Ce.job=Ft.runIfDirty.bind(Ft);En.i=Ce,En.id=Ce.uid,Ft.scheduler=()=>yI(En),Xm(Ce,!0),Gt()},Ge=(Ce,ze,Ee)=>{ze.component=Ce;const pt=Ce.vnode.props;Ce.vnode=ze,Ce.next=null,dG(Ce,ze.props,pt,Ee),pG(Ce,ze.children,Ee),uh(),BR(Ce),dh()},je=(Ce,ze,Ee,pt,dt,nt,Et,Dt,Ft=!1)=>{const Gt=Ce&&Ce.children,En=Ce?Ce.shapeFlag:0,en=ze.children,{patchFlag:An,shapeFlag:Ln}=ze;if(An>0){if(An&128){Ke(Gt,en,Ee,pt,dt,nt,Et,Dt,Ft);return}else if(An&256){Ae(Gt,en,Ee,pt,dt,nt,Et,Dt,Ft);return}}Ln&8?(En&16&&rt(Gt,dt,nt),en!==Gt&&v(Ee,en)):En&16?Ln&16?Ke(Gt,en,Ee,pt,dt,nt,Et,Dt,Ft):rt(Gt,dt,nt,!0):(En&8&&v(Ee,""),Ln&16&&$(en,Ee,pt,dt,nt,Et,Dt,Ft))},Ae=(Ce,ze,Ee,pt,dt,nt,Et,Dt,Ft)=>{Ce=Ce||__,ze=ze||__;const Gt=Ce.length,En=ze.length,en=Math.min(Gt,En);let An;for(An=0;An<en;An++){const Ln=ze[An]=Ft?gf(ze[An]):Uu(ze[An]);M(Ce[An],Ln,Ee,null,dt,nt,Et,Dt,Ft)}Gt>En?rt(Ce,dt,nt,!0,!1,en):$(ze,Ee,pt,dt,nt,Et,Dt,Ft,en)},Ke=(Ce,ze,Ee,pt,dt,nt,Et,Dt,Ft)=>{let Gt=0;const En=ze.length;let en=Ce.length-1,An=En-1;for(;Gt<=en&&Gt<=An;){const Ln=Ce[Gt],Wn=ze[Gt]=Ft?gf(ze[Gt]):Uu(ze[Gt]);if(dp(Ln,Wn))M(Ln,Wn,Ee,null,dt,nt,Et,Dt,Ft);else break;Gt++}for(;Gt<=en&&Gt<=An;){const Ln=Ce[en],Wn=ze[An]=Ft?gf(ze[An]):Uu(ze[An]);if(dp(Ln,Wn))M(Ln,Wn,Ee,null,dt,nt,Et,Dt,Ft);else break;en--,An--}if(Gt>en){if(Gt<=An){const Ln=An+1,Wn=Ln<En?ze[Ln].el:pt;for(;Gt<=An;)M(null,ze[Gt]=Ft?gf(ze[Gt]):Uu(ze[Gt]),Ee,Wn,dt,nt,Et,Dt,Ft),Gt++}}else if(Gt>An)for(;Gt<=en;)Le(Ce[Gt],dt,nt,!0),Gt++;else{const Ln=Gt,Wn=Gt,cn=new Map;for(Gt=Wn;Gt<=An;Gt++){const nr=ze[Gt]=Ft?gf(ze[Gt]):Uu(ze[Gt]);nr.key!=null&&cn.set(nr.key,Gt)}let jt,Tn=0;const On=An-Wn+1;let ki=!1,Yi=0;const Ur=new Array(On);for(Gt=0;Gt<On;Gt++)Ur[Gt]=0;for(Gt=Ln;Gt<=en;Gt++){const nr=Ce[Gt];if(Tn>=On){Le(nr,dt,nt,!0);continue}let yr;if(nr.key!=null)yr=cn.get(nr.key);else for(jt=Wn;jt<=An;jt++)if(Ur[jt-Wn]===0&&dp(nr,ze[jt])){yr=jt;break}yr===void 0?Le(nr,dt,nt,!0):(Ur[yr-Wn]=Gt+1,yr>=Yi?Yi=yr:ki=!0,M(nr,ze[yr],Ee,null,dt,nt,Et,Dt,Ft),Tn++)}const bo=ki?yG(Ur):__;for(jt=bo.length-1,Gt=On-1;Gt>=0;Gt--){const nr=Wn+Gt,yr=ze[nr],No=ze[nr+1],xo=nr+1<En?No.el||No.placeholder:pt;Ur[Gt]===0?M(null,yr,Ee,xo,dt,nt,Et,Dt,Ft):ki&&(jt<0||Gt!==bo[jt]?ve(yr,Ee,xo,2):jt--)}}},ve=(Ce,ze,Ee,pt,dt=null)=>{const{el:nt,type:Et,transition:Dt,children:Ft,shapeFlag:Gt}=Ce;if(Gt&6){ve(Ce.component.subTree,ze,Ee,pt);return}if(Gt&128){Ce.suspense.move(ze,Ee,pt);return}if(Gt&64){Et.move(Ce,ze,Ee,yn);return}if(Et===sn){i(nt,ze,Ee);for(let en=0;en<Ft.length;en++)ve(Ft[en],ze,Ee,pt);i(Ce.anchor,ze,Ee);return}if(Et===ew){X(Ce,ze,Ee);return}if(pt!==2&&Gt&1&&Dt)if(pt===0)Dt.beforeEnter(nt),i(nt,ze,Ee),tl(()=>Dt.enter(nt),dt);else{const{leave:en,delayLeave:An,afterLeave:Ln}=Dt,Wn=()=>{Ce.ctx.isUnmounted?r(nt):i(nt,ze,Ee)},cn=()=>{nt._isLeaving&&nt[Zd](!0),en(nt,()=>{Wn(),Ln&&Ln()})};An?An(nt,Wn,cn):cn()}else i(nt,ze,Ee)},Le=(Ce,ze,Ee,pt=!1,dt=!1)=>{const{type:nt,props:Et,ref:Dt,children:Ft,dynamicChildren:Gt,shapeFlag:En,patchFlag:en,dirs:An,cacheIndex:Ln}=Ce;if(en===-2&&(dt=!1),Dt!=null&&(uh(),zy(Dt,null,Ee,Ce,!0),dh()),Ln!=null&&(ze.renderCache[Ln]=void 0),En&256){ze.ctx.deactivate(Ce);return}const Wn=En&1&&An,cn=!Ny(Ce);let jt;if(cn&&(jt=Et&&Et.onVnodeBeforeUnmount)&&Lu(jt,ze,Ce),En&6)ut(Ce.component,Ee,pt);else{if(En&128){Ce.suspense.unmount(Ee,pt);return}Wn&&Km(Ce,null,ze,"beforeUnmount"),En&64?Ce.type.remove(Ce,ze,Ee,yn,pt):Gt&&!Gt.hasOnce&&(nt!==sn||en>0&&en&64)?rt(Gt,ze,Ee,!1,!0):(nt===sn&&en&384||!dt&&En&16)&&rt(Ft,ze,Ee),pt&&We(Ce)}(cn&&(jt=Et&&Et.onVnodeUnmounted)||Wn)&&tl(()=>{jt&&Lu(jt,ze,Ce),Wn&&Km(Ce,null,ze,"unmounted")},Ee)},We=Ce=>{const{type:ze,el:Ee,anchor:pt,transition:dt}=Ce;if(ze===sn){ct(Ee,pt);return}if(ze===ew){J(Ce);return}const nt=()=>{r(Ee),dt&&!dt.persisted&&dt.afterLeave&&dt.afterLeave()};if(Ce.shapeFlag&1&&dt&&!dt.persisted){const{leave:Et,delayLeave:Dt}=dt,Ft=()=>Et(Ee,nt);Dt?Dt(Ce.el,nt,Ft):Ft()}else nt()},ct=(Ce,ze)=>{let Ee;for(;Ce!==ze;)Ee=T(Ce),r(Ce),Ce=Ee;r(ze)},ut=(Ce,ze,Ee)=>{const{bum:pt,scope:dt,job:nt,subTree:Et,um:Dt,m:Ft,a:Gt}=Ce;XR(Ft),XR(Gt),pt&&Jx(pt),dt.stop(),nt&&(nt.flags|=8,Le(Et,Ce,ze,Ee)),Dt&&tl(Dt,ze),tl(()=>{Ce.isUnmounted=!0},ze)},rt=(Ce,ze,Ee,pt=!1,dt=!1,nt=0)=>{for(let Et=nt;Et<Ce.length;Et++)Le(Ce[Et],ze,Ee,pt,dt)},Qe=Ce=>{if(Ce.shapeFlag&6)return Qe(Ce.component.subTree);if(Ce.shapeFlag&128)return Ce.suspense.next();const ze=T(Ce.anchor||Ce.el),Ee=ze&&ze[Iz];return Ee?T(Ee):ze};let Ct=!1;const At=(Ce,ze,Ee)=>{Ce==null?ze._vnode&&Le(ze._vnode,null,null,!0):M(ze._vnode||null,Ce,ze,null,null,null,Ee),ze._vnode=Ce,Ct||(Ct=!0,BR(),Ez(),Ct=!1)},yn={p:M,um:Le,m:ve,r:We,mt:Se,mc:$,pc:je,pbc:W,n:Qe,o:e};return{render:At,hydrate:void 0,createApp:cG(At)}}function fE({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function Xm({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function vG(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function CI(e,t,n=!1){const i=e.children,r=t.children;if(Qn(i)&&Qn(r))for(let a=0;a<i.length;a++){const l=i[a];let h=r[a];h.shapeFlag&1&&!h.dynamicChildren&&((h.patchFlag<=0||h.patchFlag===32)&&(h=r[a]=gf(r[a]),h.el=l.el),!n&&h.patchFlag!==-2&&CI(l,h)),h.type===t0&&h.patchFlag!==-1&&(h.el=l.el),h.type===Ma&&!h.el&&(h.el=l.el)}}function yG(e){const t=e.slice(),n=[0];let i,r,a,l,h;const s=e.length;for(i=0;i<s;i++){const p=e[i];if(p!==0){if(r=n[n.length-1],e[r]<p){t[i]=r,n.push(i);continue}for(a=0,l=n.length-1;a<l;)h=a+l>>1,e[n[h]]<p?a=h+1:l=h;p<e[n[a]]&&(a>0&&(t[i]=n[a-1]),n[a]=i)}}for(a=n.length,l=n[a-1];a-- >0;)n[a]=l,l=t[l];return n}function i3(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:i3(t)}function XR(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const bG=Symbol.for("v-scx"),xG=()=>xi(bG);function zr(e,t){return kI(e,null,t)}function Ht(e,t,n){return kI(e,t,n)}function kI(e,t,n=Fr){const{immediate:i,deep:r,flush:a,once:l}=n,h=_o({},n),s=t&&i||!t&&a!=="post";let p;if(hb){if(a==="sync"){const k=xG();p=k.__watcherHandles||(k.__watcherHandles=[])}else if(!s){const k=()=>{};return k.stop=Gu,k.resume=Gu,k.pause=Gu,k}}const v=Da;h.call=(k,P,M)=>lu(k,v,P,M);let x=!1;a==="post"?h.scheduler=k=>{tl(k,v&&v.suspense)}:a!=="sync"&&(x=!0,h.scheduler=(k,P)=>{P?k():yI(k)}),h.augmentJob=k=>{t&&(k.flags|=4),x&&(k.flags|=2,v&&(k.id=v.uid,k.i=v))};const T=$H(e,t,h);return hb&&(p?p.push(T):s&&T()),T}function wG(e,t,n){const i=this.proxy,r=ls(e)?e.includes(".")?r3(i,e):()=>i[e]:e.bind(i,i);let a;gi(t)?a=t:(a=t.handler,n=t);const l=i0(this),h=kI(r,a.bind(i),n);return l(),h}function r3(e,t){const n=t.split(".");return()=>{let i=e;for(let r=0;r<n.length&&i;r++)i=i[n[r]];return i}}const TG=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${rl(t)}Modifiers`]||e[`${Xp(t)}Modifiers`];function SG(e,t,...n){if(e.isUnmounted)return;const i=e.vnode.props||Fr;let r=n;const a=t.startsWith("update:"),l=a&&TG(i,t.slice(7));l&&(l.trim&&(r=n.map(v=>ls(v)?v.trim():v)),l.number&&(r=n.map(Tw)));let h,s=i[h=oE(t)]||i[h=oE(rl(t))];!s&&a&&(s=i[h=oE(Xp(t))]),s&&lu(s,e,6,r);const p=i[h+"Once"];if(p){if(!e.emitted)e.emitted={};else if(e.emitted[h])return;e.emitted[h]=!0,lu(p,e,6,r)}}const EG=new WeakMap;function s3(e,t,n=!1){const i=n?EG:t.emitsCache,r=i.get(e);if(r!==void 0)return r;const a=e.emits;let l={},h=!1;if(!gi(e)){const s=p=>{const v=s3(p,t,!0);v&&(h=!0,_o(l,v))};!n&&t.mixins.length&&t.mixins.forEach(s),e.extends&&s(e.extends),e.mixins&&e.mixins.forEach(s)}return!a&&!h?(Ir(e)&&i.set(e,null),null):(Qn(a)?a.forEach(s=>l[s]=null):_o(l,a),Ir(e)&&i.set(e,l),l)}function j1(e,t){return!e||!R1(t)?!1:(t=t.slice(2).replace(/Once$/,""),wr(e,t[0].toLowerCase()+t.slice(1))||wr(e,Xp(t))||wr(e,t))}function ZR(e){const{type:t,vnode:n,proxy:i,withProxy:r,propsOptions:[a],slots:l,attrs:h,emit:s,render:p,renderCache:v,props:x,data:T,setupState:k,ctx:P,inheritAttrs:M}=e,L=Iw(e);let B,F;try{if(n.shapeFlag&4){const J=r||i,Q=J;B=Uu(p.call(Q,J,v,x,k,T,P)),F=h}else{const J=t;B=Uu(J.length>1?J(x,{attrs:h,slots:l,emit:s}):J(x,null)),F=t.props?h:CG(h)}}catch(J){$y.length=0,N1(J,e,1),B=ce(Ma)}let X=B;if(F&&M!==!1){const J=Object.keys(F),{shapeFlag:Q}=X;J.length&&Q&7&&(a&&J.some(uI)&&(F=kG(F,a)),X=hh(X,F,!1,!0))}return n.dirs&&(X=hh(X,null,!1,!0),X.dirs=X.dirs?X.dirs.concat(n.dirs):n.dirs),n.transition&&Dp(X,n.transition),B=X,Iw(L),B}const CG=e=>{let t;for(const n in e)(n==="class"||n==="style"||R1(n))&&((t||(t={}))[n]=e[n]);return t},kG=(e,t)=>{const n={};for(const i in e)(!uI(i)||!(i.slice(9)in t))&&(n[i]=e[i]);return n};function IG(e,t,n){const{props:i,children:r,component:a}=e,{props:l,children:h,patchFlag:s}=t,p=a.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&s>=0){if(s&1024)return!0;if(s&16)return i?YR(i,l,p):!!l;if(s&8){const v=t.dynamicProps;for(let x=0;x<v.length;x++){const T=v[x];if(l[T]!==i[T]&&!j1(p,T))return!0}}}else return(r||h)&&(!h||!h.$stable)?!0:i===l?!1:i?l?YR(i,l,p):!0:!!l;return!1}function YR(e,t,n){const i=Object.keys(t);if(i.length!==Object.keys(e).length)return!0;for(let r=0;r<i.length;r++){const a=i[r];if(t[a]!==e[a]&&!j1(n,a))return!0}return!1}function AG({vnode:e,parent:t},n){for(;t;){const i=t.subTree;if(i.suspense&&i.suspense.activeBranch===e&&(i.el=e.el),i===e)(e=t.vnode).el=n,t=t.parent;else break}}const o3=e=>e.__isSuspense;function PG(e,t){t&&t.pendingBranch?Qn(e)?t.effects.push(...e):t.effects.push(e):HH(e)}const sn=Symbol.for("v-fgt"),t0=Symbol.for("v-txt"),Ma=Symbol.for("v-cmt"),ew=Symbol.for("v-stc"),$y=[];let Yl=null;function _n(e=!1){$y.push(Yl=e?null:[])}function MG(){$y.pop(),Yl=$y[$y.length-1]||null}let ub=1;function Mw(e,t=!1){ub+=e,e<0&&Yl&&t&&(Yl.hasOnce=!0)}function a3(e){return e.dynamicChildren=ub>0?Yl||__:null,MG(),ub>0&&Yl&&Yl.push(e),e}function wn(e,t,n,i,r,a){return a3(N(e,t,n,i,r,a,!0))}function d_(e,t,n,i,r){return a3(ce(e,t,n,i,r,!0))}function db(e){return e?e.__v_isVNode===!0:!1}function dp(e,t){return e.type===t.type&&e.key===t.key}const l3=({key:e})=>e??null,tw=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?ls(e)||Rs(e)||gi(e)?{i:Zl,r:e,k:t,f:!!n}:e:null);function N(e,t=null,n=null,i=0,r=null,a=e===sn?0:1,l=!1,h=!1){const s={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&l3(t),ref:t&&tw(t),scopeId:kz,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:i,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:Zl};return h?(II(s,n),a&128&&e.normalize(s)):n&&(s.shapeFlag|=ls(n)?8:16),ub>0&&!l&&Yl&&(s.patchFlag>0||a&6)&&s.patchFlag!==32&&Yl.push(s),s}const ce=DG;function DG(e,t=null,n=null,i=0,r=null,a=!1){if((!e||e===jz)&&(e=Ma),db(e)){const h=hh(e,t,!0);return n&&II(h,n),ub>0&&!a&&Yl&&(h.shapeFlag&6?Yl[Yl.indexOf(e)]=h:Yl.push(h)),h.patchFlag=-2,h}if(UG(e)&&(e=e.__vccOpts),t){t=c3(t);let{class:h,style:s}=t;h&&!ls(h)&&(t.class=Tt(h)),Ir(s)&&(z1(s)&&!Qn(s)&&(s=_o({},s)),t.style=Qt(s))}const l=ls(e)?1:o3(e)?128:Az(e)?64:Ir(e)?4:gi(e)?2:0;return N(e,t,n,i,r,l,a,!0)}function c3(e){return e?z1(e)||Yz(e)?_o({},e):e:null}function hh(e,t,n=!1,i=!1){const{props:r,ref:a,patchFlag:l,children:h,transition:s}=e,p=t?kt(r||{},t):r,v={__v_isVNode:!0,__v_skip:!0,type:e.type,props:p,key:p&&l3(p),ref:t&&t.ref?n&&a?Qn(a)?a.concat(tw(t)):[a,tw(t)]:tw(t):a,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:h,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==sn?l===-1?16:l|16:l,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:s,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&hh(e.ssContent),ssFallback:e.ssFallback&&hh(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return s&&i&&Dp(v,s.clone(v)),v}function Jn(e=" ",t=0){return ce(t0,null,e,t)}function jy(e,t){const n=ce(ew,null,e);return n.staticCount=t,n}function Tr(e="",t=!1){return t?(_n(),d_(Ma,null,e)):ce(Ma,null,e)}function Uu(e){return e==null||typeof e=="boolean"?ce(Ma):Qn(e)?ce(sn,null,e.slice()):db(e)?gf(e):ce(t0,null,String(e))}function gf(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:hh(e)}function II(e,t){let n=0;const{shapeFlag:i}=e;if(t==null)t=null;else if(Qn(t))n=16;else if(typeof t=="object")if(i&65){const r=t.default;r&&(r._c&&(r._d=!1),II(e,r()),r._c&&(r._d=!0));return}else{n=32;const r=t._;!r&&!Yz(t)?t._ctx=Zl:r===3&&Zl&&(Zl.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else gi(t)?(t={default:t,_ctx:Zl},n=32):(t=String(t),i&64?(n=16,t=[Jn(t)]):n=8);e.children=t,e.shapeFlag|=n}function kt(...e){const t={};for(let n=0;n<e.length;n++){const i=e[n];for(const r in i)if(r==="class")t.class!==i.class&&(t.class=Tt([t.class,i.class]));else if(r==="style")t.style=Qt([t.style,i.style]);else if(R1(r)){const a=t[r],l=i[r];l&&a!==l&&!(Qn(a)&&a.includes(l))&&(t[r]=a?[].concat(a,l):l)}else r!==""&&(t[r]=i[r])}return t}function Lu(e,t,n,i=null){lu(e,t,7,[n,i])}const RG=Kz();let LG=0;function OG(e,t,n){const i=e.type,r=(t?t.appContext:e.appContext)||RG,a={uid:LG++,vnode:e,type:i,parent:t,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new iz(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(r.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Qz(i,r),emitsOptions:s3(i,r),emit:null,emitted:null,propsDefaults:Fr,inheritAttrs:i.inheritAttrs,ctx:Fr,data:Fr,props:Fr,attrs:Fr,slots:Fr,refs:Fr,setupState:Fr,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=t?t.root:a,a.emit=SG.bind(null,a),e.ce&&e.ce(a),a}let Da=null;const n0=()=>Da||Zl;let Dw,wC;{const e=V1(),t=(n,i)=>{let r;return(r=e[n])||(r=e[n]=[]),r.push(i),a=>{r.length>1?r.forEach(l=>l(a)):r[0](a)}};Dw=t("__VUE_INSTANCE_SETTERS__",n=>Da=n),wC=t("__VUE_SSR_SETTERS__",n=>hb=n)}const i0=e=>{const t=Da;return Dw(e),e.scope.on(),()=>{e.scope.off(),Dw(t)}},JR=()=>{Da&&Da.scope.off(),Dw(null)};function u3(e){return e.vnode.shapeFlag&4}let hb=!1;function VG(e,t=!1,n=!1){t&&wC(t);const{props:i,children:r}=e.vnode,a=u3(e);uG(e,i,a,t),mG(e,r,n||t);const l=a?BG(e,t):void 0;return t&&wC(!1),l}function BG(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,nG);const{setup:i}=n;if(i){uh();const r=e.setupContext=i.length>1?zG(e):null,a=i0(e),l=e0(i,e,0,[e.props,r]),h=ZF(l);if(dh(),a(),(h||e.sp)&&!Ny(e)&&Fz(e),h){if(l.then(JR,JR),t)return l.then(s=>{QR(e,s)}).catch(s=>{N1(s,e,0)});e.asyncDep=l}else QR(e,l)}else d3(e)}function QR(e,t,n){gi(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Ir(t)&&(e.setupState=xz(t)),d3(e)}function d3(e,t,n){const i=e.type;e.render||(e.render=i.render||Gu);{const r=i0(e);uh();try{iG(e)}finally{dh(),r()}}}const FG={get(e,t){return Aa(e,"get",""),e[t]}};function zG(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,FG),slots:e.slots,emit:e.emit,expose:t}}function W1(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(xz(yz(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Uy)return Uy[n](e)},has(t,n){return n in t||n in Uy}})):e.proxy}function NG(e,t=!0){return gi(e)?e.displayName||e.name:e.name||t&&e.__name}function UG(e){return gi(e)&&"__vccOpts"in e}const fe=(e,t)=>NH(e,t,hb);function Th(e,t,n){try{Mw(-1);const i=arguments.length;return i===2?Ir(t)&&!Qn(t)?db(t)?ce(e,null,[t]):ce(e,t):ce(e,null,t):(i>3?n=Array.prototype.slice.call(arguments,2):i===3&&db(n)&&(n=[n]),ce(e,t,n))}finally{Mw(1)}}const $G="3.5.22";/**
* @vue/runtime-dom v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let TC;const eL=typeof window<"u"&&window.trustedTypes;if(eL)try{TC=eL.createPolicy("vue",{createHTML:e=>e})}catch{}const h3=TC?e=>TC.createHTML(e):e=>e,jG="http://www.w3.org/2000/svg",WG="http://www.w3.org/1998/Math/MathML",qd=typeof document<"u"?document:null,tL=qd&&qd.createElement("template"),HG={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,i)=>{const r=t==="svg"?qd.createElementNS(jG,e):t==="mathml"?qd.createElementNS(WG,e):n?qd.createElement(e,{is:n}):qd.createElement(e);return e==="select"&&i&&i.multiple!=null&&r.setAttribute("multiple",i.multiple),r},createText:e=>qd.createTextNode(e),createComment:e=>qd.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>qd.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,i,r,a){const l=n?n.previousSibling:t.lastChild;if(r&&(r===a||r.nextSibling))for(;t.insertBefore(r.cloneNode(!0),n),!(r===a||!(r=r.nextSibling)););else{tL.innerHTML=h3(i==="svg"?`<svg>${e}</svg>`:i==="mathml"?`<math>${e}</math>`:e);const h=tL.content;if(i==="svg"||i==="mathml"){const s=h.firstChild;for(;s.firstChild;)h.appendChild(s.firstChild);h.removeChild(s)}t.insertBefore(h,n)}return[l?l.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},hf="transition",dy="animation",M_=Symbol("_vtc"),f3={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},m3=_o({},Rz,f3),GG=e=>(e.displayName="Transition",e.props=m3,e),fh=GG((e,{slots:t})=>Th(XH,p3(e),t)),Zm=(e,t=[])=>{Qn(e)?e.forEach(n=>n(...t)):e&&e(...t)},nL=e=>e?Qn(e)?e.some(t=>t.length>1):e.length>1:!1;function p3(e){const t={};for(const Y in e)Y in f3||(t[Y]=e[Y]);if(e.css===!1)return t;const{name:n="v",type:i,duration:r,enterFromClass:a=`${n}-enter-from`,enterActiveClass:l=`${n}-enter-active`,enterToClass:h=`${n}-enter-to`,appearFromClass:s=a,appearActiveClass:p=l,appearToClass:v=h,leaveFromClass:x=`${n}-leave-from`,leaveActiveClass:T=`${n}-leave-active`,leaveToClass:k=`${n}-leave-to`}=e,P=qG(r),M=P&&P[0],L=P&&P[1],{onBeforeEnter:B,onEnter:F,onEnterCancelled:X,onLeave:J,onLeaveCancelled:Q,onBeforeAppear:re=B,onAppear:Z=F,onAppearCancelled:$=X}=t,H=(Y,ne,Se,Fe)=>{Y._enterCancelled=Fe,mf(Y,ne?v:h),mf(Y,ne?p:l),Se&&Se()},W=(Y,ne)=>{Y._isLeaving=!1,mf(Y,x),mf(Y,k),mf(Y,T),ne&&ne()},te=Y=>(ne,Se)=>{const Fe=Y?Z:F,Ve=()=>H(ne,Y,Se);Zm(Fe,[ne,Ve]),iL(()=>{mf(ne,Y?s:a),Ou(ne,Y?v:h),nL(Fe)||rL(ne,i,M,Ve)})};return _o(t,{onBeforeEnter(Y){Zm(B,[Y]),Ou(Y,a),Ou(Y,l)},onBeforeAppear(Y){Zm(re,[Y]),Ou(Y,s),Ou(Y,p)},onEnter:te(!1),onAppear:te(!0),onLeave(Y,ne){Y._isLeaving=!0;const Se=()=>W(Y,ne);Ou(Y,x),Y._enterCancelled?(Ou(Y,T),SC(Y)):(SC(Y),Ou(Y,T)),iL(()=>{Y._isLeaving&&(mf(Y,x),Ou(Y,k),nL(J)||rL(Y,i,L,Se))}),Zm(J,[Y,Se])},onEnterCancelled(Y){H(Y,!1,void 0,!0),Zm(X,[Y])},onAppearCancelled(Y){H(Y,!0,void 0,!0),Zm($,[Y])},onLeaveCancelled(Y){W(Y),Zm(Q,[Y])}})}function qG(e){if(e==null)return null;if(Ir(e))return[mE(e.enter),mE(e.leave)];{const t=mE(e);return[t,t]}}function mE(e){return sH(e)}function Ou(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e[M_]||(e[M_]=new Set)).add(t)}function mf(e,t){t.split(/\s+/).forEach(i=>i&&e.classList.remove(i));const n=e[M_];n&&(n.delete(t),n.size||(e[M_]=void 0))}function iL(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let KG=0;function rL(e,t,n,i){const r=e._endId=++KG,a=()=>{r===e._endId&&i()};if(n!=null)return setTimeout(a,n);const{type:l,timeout:h,propCount:s}=g3(e,t);if(!l)return i();const p=l+"end";let v=0;const x=()=>{e.removeEventListener(p,T),a()},T=k=>{k.target===e&&++v>=s&&x()};setTimeout(()=>{v<s&&x()},h+1),e.addEventListener(p,T)}function g3(e,t){const n=window.getComputedStyle(e),i=P=>(n[P]||"").split(", "),r=i(`${hf}Delay`),a=i(`${hf}Duration`),l=sL(r,a),h=i(`${dy}Delay`),s=i(`${dy}Duration`),p=sL(h,s);let v=null,x=0,T=0;t===hf?l>0&&(v=hf,x=l,T=a.length):t===dy?p>0&&(v=dy,x=p,T=s.length):(x=Math.max(l,p),v=x>0?l>p?hf:dy:null,T=v?v===hf?a.length:s.length:0);const k=v===hf&&/\b(?:transform|all)(?:,|$)/.test(i(`${hf}Property`).toString());return{type:v,timeout:x,propCount:T,hasTransform:k}}function sL(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,i)=>oL(n)+oL(e[i])))}function oL(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function SC(e){return(e?e.ownerDocument:document).body.offsetHeight}function XG(e,t,n){const i=e[M_];i&&(t=(t?[t,...i]:[...i]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const Rw=Symbol("_vod"),_3=Symbol("_vsh"),hu={name:"show",beforeMount(e,{value:t},{transition:n}){e[Rw]=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):hy(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:i}){!t!=!n&&(i?t?(i.beforeEnter(e),hy(e,!0),i.enter(e)):i.leave(e,()=>{hy(e,!1)}):hy(e,t))},beforeUnmount(e,{value:t}){hy(e,t)}};function hy(e,t){e.style.display=t?e[Rw]:"none",e[_3]=!t}const ZG=Symbol(""),YG=/(?:^|;)\s*display\s*:/;function JG(e,t,n){const i=e.style,r=ls(n);let a=!1;if(n&&!r){if(t)if(ls(t))for(const l of t.split(";")){const h=l.slice(0,l.indexOf(":")).trim();n[h]==null&&nw(i,h,"")}else for(const l in t)n[l]==null&&nw(i,l,"");for(const l in n)l==="display"&&(a=!0),nw(i,l,n[l])}else if(r){if(t!==n){const l=i[ZG];l&&(n+=";"+l),i.cssText=n,a=YG.test(n)}}else t&&e.removeAttribute("style");Rw in e&&(e[Rw]=a?i.display:"",e[_3]&&(i.display="none"))}const aL=/\s*!important$/;function nw(e,t,n){if(Qn(n))n.forEach(i=>nw(e,t,i));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const i=QG(e,t);aL.test(n)?e.setProperty(Xp(i),n.replace(aL,""),"important"):e[i]=n}}const lL=["Webkit","Moz","ms"],pE={};function QG(e,t){const n=pE[t];if(n)return n;let i=rl(t);if(i!=="filter"&&i in e)return pE[t]=i;i=ld(i);for(let r=0;r<lL.length;r++){const a=lL[r]+i;if(a in e)return pE[t]=a}return t}const cL="http://www.w3.org/1999/xlink";function uL(e,t,n,i,r,a=hH(t)){i&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(cL,t.slice(6,t.length)):e.setAttributeNS(cL,t,n):n==null||a&&!ez(n)?e.removeAttribute(t):e.setAttribute(t,a?"":ed(n)?String(n):n)}function dL(e,t,n,i,r){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?h3(n):n);return}const a=e.tagName;if(t==="value"&&a!=="PROGRESS"&&!a.includes("-")){const h=a==="OPTION"?e.getAttribute("value")||"":e.value,s=n==null?e.type==="checkbox"?"on":"":String(n);(h!==s||!("_value"in e))&&(e.value=s),n==null&&e.removeAttribute(t),e._value=n;return}let l=!1;if(n===""||n==null){const h=typeof e[t];h==="boolean"?n=ez(n):n==null&&h==="string"?(n="",l=!0):h==="number"&&(n=0,l=!0)}try{e[t]=n}catch{}l&&e.removeAttribute(r||t)}function hp(e,t,n,i){e.addEventListener(t,n,i)}function eq(e,t,n,i){e.removeEventListener(t,n,i)}const hL=Symbol("_vei");function tq(e,t,n,i,r=null){const a=e[hL]||(e[hL]={}),l=a[t];if(i&&l)l.value=i;else{const[h,s]=nq(t);if(i){const p=a[t]=sq(i,r);hp(e,h,p,s)}else l&&(eq(e,h,l,s),a[t]=void 0)}}const fL=/(?:Once|Passive|Capture)$/;function nq(e){let t;if(fL.test(e)){t={};let i;for(;i=e.match(fL);)e=e.slice(0,e.length-i[0].length),t[i[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Xp(e.slice(2)),t]}let gE=0;const iq=Promise.resolve(),rq=()=>gE||(iq.then(()=>gE=0),gE=Date.now());function sq(e,t){const n=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=n.attached)return;lu(oq(i,n.value),t,5,[i])};return n.value=e,n.attached=rq(),n}function oq(e,t){if(Qn(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(i=>r=>!r._stopped&&i&&i(r))}else return t}const mL=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,aq=(e,t,n,i,r,a)=>{const l=r==="svg";t==="class"?XG(e,i,l):t==="style"?JG(e,n,i):R1(t)?uI(t)||tq(e,t,n,i,a):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):lq(e,t,i,l))?(dL(e,t,i),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&uL(e,t,i,l,a,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!ls(i))?dL(e,rl(t),i,a,t):(t==="true-value"?e._trueValue=i:t==="false-value"&&(e._falseValue=i),uL(e,t,i,l))};function lq(e,t,n,i){if(i)return!!(t==="innerHTML"||t==="textContent"||t in e&&mL(t)&&gi(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const r=e.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return mL(t)&&ls(n)?!1:t in e}const v3=new WeakMap,y3=new WeakMap,Lw=Symbol("_moveCb"),pL=Symbol("_enterCb"),cq=e=>(delete e.props.mode,e),uq=cq({name:"TransitionGroup",props:_o({},m3,{tag:String,moveClass:String}),setup(e,{slots:t}){const n=n0(),i=Dz();let r,a;return wI(()=>{if(!r.length)return;const l=e.moveClass||`${e.name||"v"}-move`;if(!mq(r[0].el,n.vnode.el,l)){r=[];return}r.forEach(dq),r.forEach(hq);const h=r.filter(fq);SC(n.vnode.el),h.forEach(s=>{const p=s.el,v=p.style;Ou(p,l),v.transform=v.webkitTransform=v.transitionDuration="";const x=p[Lw]=T=>{T&&T.target!==p||(!T||T.propertyName.endsWith("transform"))&&(p.removeEventListener("transitionend",x),p[Lw]=null,mf(p,l))};p.addEventListener("transitionend",x)}),r=[]}),()=>{const l=Nn(e),h=p3(l);let s=l.tag||sn;if(r=[],a)for(let p=0;p<a.length;p++){const v=a[p];v.el&&v.el instanceof Element&&(r.push(v),Dp(v,cb(v,h,i,n)),v3.set(v,v.el.getBoundingClientRect()))}a=t.default?bI(t.default()):[];for(let p=0;p<a.length;p++){const v=a[p];v.key!=null&&Dp(v,cb(v,h,i,n))}return ce(s,null,a)}}}),AI=uq;function dq(e){const t=e.el;t[Lw]&&t[Lw](),t[pL]&&t[pL]()}function hq(e){y3.set(e,e.el.getBoundingClientRect())}function fq(e){const t=v3.get(e),n=y3.get(e),i=t.left-n.left,r=t.top-n.top;if(i||r){const a=e.el.style;return a.transform=a.webkitTransform=`translate(${i}px,${r}px)`,a.transitionDuration="0s",e}}function mq(e,t,n){const i=e.cloneNode(),r=e[M_];r&&r.forEach(h=>{h.split(/\s+/).forEach(s=>s&&i.classList.remove(s))}),n.split(/\s+/).forEach(h=>h&&i.classList.add(h)),i.style.display="none";const a=t.nodeType===1?t:t.parentNode;a.appendChild(i);const{hasTransform:l}=g3(i);return a.removeChild(i),l}const Ow=e=>{const t=e.props["onUpdate:modelValue"]||!1;return Qn(t)?n=>Jx(t,n):t};function pq(e){e.target.composing=!0}function gL(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const x_=Symbol("_assign"),$u={created(e,{modifiers:{lazy:t,trim:n,number:i}},r){e[x_]=Ow(r);const a=i||r.props&&r.props.type==="number";hp(e,t?"change":"input",l=>{if(l.target.composing)return;let h=e.value;n&&(h=h.trim()),a&&(h=Tw(h)),e[x_](h)}),n&&hp(e,"change",()=>{e.value=e.value.trim()}),t||(hp(e,"compositionstart",pq),hp(e,"compositionend",gL),hp(e,"change",gL))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:i,trim:r,number:a}},l){if(e[x_]=Ow(l),e.composing)return;const h=(a||e.type==="number")&&!/^0\d/.test(e.value)?Tw(e.value):e.value,s=t??"";h!==s&&(document.activeElement===e&&e.type!=="range"&&(i&&t===n||r&&e.value.trim()===s)||(e.value=s))}},lh={deep:!0,created(e,{value:t,modifiers:{number:n}},i){const r=L1(t);hp(e,"change",()=>{const a=Array.prototype.filter.call(e.options,l=>l.selected).map(l=>n?Tw(Vw(l)):Vw(l));e[x_](e.multiple?r?new Set(a):a:a[0]),e._assigning=!0,Gn(()=>{e._assigning=!1})}),e[x_]=Ow(i)},mounted(e,{value:t}){_L(e,t)},beforeUpdate(e,t,n){e[x_]=Ow(n)},updated(e,{value:t}){e._assigning||_L(e,t)}};function _L(e,t){const n=e.multiple,i=Qn(t);if(!(n&&!i&&!L1(t))){for(let r=0,a=e.options.length;r<a;r++){const l=e.options[r],h=Vw(l);if(n)if(i){const s=typeof h;s==="string"||s==="number"?l.selected=t.some(p=>String(p)===String(h)):l.selected=mH(t,h)>-1}else l.selected=t.has(h);else if(B1(Vw(l),t)){e.selectedIndex!==r&&(e.selectedIndex=r);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function Vw(e){return"_value"in e?e._value:e.value}const gq=["ctrl","shift","alt","meta"],_q={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>gq.some(n=>e[`${n}Key`]&&!t.includes(n))},nh=(e,t)=>{const n=e._withMods||(e._withMods={}),i=t.join(".");return n[i]||(n[i]=((r,...a)=>{for(let l=0;l<t.length;l++){const h=_q[t[l]];if(h&&h(r,t))return}return e(r,...a)}))},vq=_o({patchProp:aq},HG);let vL;function b3(){return vL||(vL=gG(vq))}const x3=((...e)=>{b3().render(...e)}),yq=((...e)=>{const t=b3().createApp(...e),{mount:n}=t;return t.mount=i=>{const r=xq(i);if(!r)return;const a=t._component;!gi(a)&&!a.render&&!a.template&&(a.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const l=n(r,!1,bq(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),l},t});function bq(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function xq(e){return ls(e)?document.querySelector(e):e}function w3(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var iw={exports:{}},wq=iw.exports,yL;function Tq(){return yL||(yL=1,(function(e,t){(function(n,i){e.exports=i()})(wq,function(){return(function(n){function i(a){if(r[a])return r[a].exports;var l=r[a]={exports:{},id:a,loaded:!1};return n[a].call(l.exports,l,l.exports,i),l.loaded=!0,l.exports}var r={};return i.m=n,i.c=r,i.p="dist/",i(0)})([function(n,i,r){function a(Se){return Se&&Se.__esModule?Se:{default:Se}}var l=Object.assign||function(Se){for(var Fe=1;Fe<arguments.length;Fe++){var Ve=arguments[Fe];for(var Ge in Ve)Object.prototype.hasOwnProperty.call(Ve,Ge)&&(Se[Ge]=Ve[Ge])}return Se},h=r(1),s=(a(h),r(6)),p=a(s),v=r(7),x=a(v),T=r(8),k=a(T),P=r(9),M=a(P),L=r(10),B=a(L),F=r(11),X=a(F),J=r(14),Q=a(J),re=[],Z=!1,$={offset:120,delay:0,easing:"ease",duration:400,disable:!1,once:!1,startEvent:"DOMContentLoaded",throttleDelay:99,debounceDelay:50,disableMutationObserver:!1},H=function(){var Se=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(Se&&(Z=!0),Z)return re=(0,X.default)(re,$),(0,B.default)(re,$.once),re},W=function(){re=(0,Q.default)(),H()},te=function(){re.forEach(function(Se,Fe){Se.node.removeAttribute("data-aos"),Se.node.removeAttribute("data-aos-easing"),Se.node.removeAttribute("data-aos-duration"),Se.node.removeAttribute("data-aos-delay")})},Y=function(Se){return Se===!0||Se==="mobile"&&M.default.mobile()||Se==="phone"&&M.default.phone()||Se==="tablet"&&M.default.tablet()||typeof Se=="function"&&Se()===!0},ne=function(Se){$=l($,Se),re=(0,Q.default)();var Fe=document.all&&!window.atob;return Y($.disable)||Fe?te():($.disableMutationObserver||k.default.isSupported()||(console.info(`
      aos: MutationObserver is not supported on this browser,
      code mutations observing has been disabled.
      You may have to call "refreshHard()" by yourself.
    `),$.disableMutationObserver=!0),document.querySelector("body").setAttribute("data-aos-easing",$.easing),document.querySelector("body").setAttribute("data-aos-duration",$.duration),document.querySelector("body").setAttribute("data-aos-delay",$.delay),$.startEvent==="DOMContentLoaded"&&["complete","interactive"].indexOf(document.readyState)>-1?H(!0):$.startEvent==="load"?window.addEventListener($.startEvent,function(){H(!0)}):document.addEventListener($.startEvent,function(){H(!0)}),window.addEventListener("resize",(0,x.default)(H,$.debounceDelay,!0)),window.addEventListener("orientationchange",(0,x.default)(H,$.debounceDelay,!0)),window.addEventListener("scroll",(0,p.default)(function(){(0,B.default)(re,$.once)},$.throttleDelay)),$.disableMutationObserver||k.default.ready("[data-aos]",W),re)};n.exports={init:ne,refresh:H,refreshHard:W}},function(n,i){},,,,,function(n,i){(function(r){function a(Y,ne,Se){function Fe(Ee){var pt=ct,dt=ut;return ct=ut=void 0,yn=Ee,Qe=Y.apply(dt,pt)}function Ve(Ee){return yn=Ee,Ct=setTimeout(Ae,ne),Mn?Fe(Ee):Qe}function Ge(Ee){var pt=Ee-At,dt=Ee-yn,nt=ne-pt;return Ce?W(nt,rt-dt):nt}function je(Ee){var pt=Ee-At,dt=Ee-yn;return At===void 0||pt>=ne||pt<0||Ce&&dt>=rt}function Ae(){var Ee=te();return je(Ee)?Ke(Ee):void(Ct=setTimeout(Ae,Ge(Ee)))}function Ke(Ee){return Ct=void 0,ze&&ct?Fe(Ee):(ct=ut=void 0,Qe)}function ve(){Ct!==void 0&&clearTimeout(Ct),yn=0,ct=At=ut=Ct=void 0}function Le(){return Ct===void 0?Qe:Ke(te())}function We(){var Ee=te(),pt=je(Ee);if(ct=arguments,ut=this,At=Ee,pt){if(Ct===void 0)return Ve(At);if(Ce)return Ct=setTimeout(Ae,ne),Fe(At)}return Ct===void 0&&(Ct=setTimeout(Ae,ne)),Qe}var ct,ut,rt,Qe,Ct,At,yn=0,Mn=!1,Ce=!1,ze=!0;if(typeof Y!="function")throw new TypeError(T);return ne=v(ne)||0,h(Se)&&(Mn=!!Se.leading,Ce="maxWait"in Se,rt=Ce?H(v(Se.maxWait)||0,ne):rt,ze="trailing"in Se?!!Se.trailing:ze),We.cancel=ve,We.flush=Le,We}function l(Y,ne,Se){var Fe=!0,Ve=!0;if(typeof Y!="function")throw new TypeError(T);return h(Se)&&(Fe="leading"in Se?!!Se.leading:Fe,Ve="trailing"in Se?!!Se.trailing:Ve),a(Y,ne,{leading:Fe,maxWait:ne,trailing:Ve})}function h(Y){var ne=typeof Y>"u"?"undefined":x(Y);return!!Y&&(ne=="object"||ne=="function")}function s(Y){return!!Y&&(typeof Y>"u"?"undefined":x(Y))=="object"}function p(Y){return(typeof Y>"u"?"undefined":x(Y))=="symbol"||s(Y)&&$.call(Y)==P}function v(Y){if(typeof Y=="number")return Y;if(p(Y))return k;if(h(Y)){var ne=typeof Y.valueOf=="function"?Y.valueOf():Y;Y=h(ne)?ne+"":ne}if(typeof Y!="string")return Y===0?Y:+Y;Y=Y.replace(M,"");var Se=B.test(Y);return Se||F.test(Y)?X(Y.slice(2),Se?2:8):L.test(Y)?k:+Y}var x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y},T="Expected a function",k=NaN,P="[object Symbol]",M=/^\s+|\s+$/g,L=/^[-+]0x[0-9a-f]+$/i,B=/^0b[01]+$/i,F=/^0o[0-7]+$/i,X=parseInt,J=(typeof r>"u"?"undefined":x(r))=="object"&&r&&r.Object===Object&&r,Q=(typeof self>"u"?"undefined":x(self))=="object"&&self&&self.Object===Object&&self,re=J||Q||Function("return this")(),Z=Object.prototype,$=Z.toString,H=Math.max,W=Math.min,te=function(){return re.Date.now()};n.exports=l}).call(i,(function(){return this})())},function(n,i){(function(r){function a(te,Y,ne){function Se(ze){var Ee=We,pt=ct;return We=ct=void 0,At=ze,rt=te.apply(pt,Ee)}function Fe(ze){return At=ze,Qe=setTimeout(je,Y),yn?Se(ze):rt}function Ve(ze){var Ee=ze-Ct,pt=ze-At,dt=Y-Ee;return Mn?H(dt,ut-pt):dt}function Ge(ze){var Ee=ze-Ct,pt=ze-At;return Ct===void 0||Ee>=Y||Ee<0||Mn&&pt>=ut}function je(){var ze=W();return Ge(ze)?Ae(ze):void(Qe=setTimeout(je,Ve(ze)))}function Ae(ze){return Qe=void 0,Ce&&We?Se(ze):(We=ct=void 0,rt)}function Ke(){Qe!==void 0&&clearTimeout(Qe),At=0,We=Ct=ct=Qe=void 0}function ve(){return Qe===void 0?rt:Ae(W())}function Le(){var ze=W(),Ee=Ge(ze);if(We=arguments,ct=this,Ct=ze,Ee){if(Qe===void 0)return Fe(Ct);if(Mn)return Qe=setTimeout(je,Y),Se(Ct)}return Qe===void 0&&(Qe=setTimeout(je,Y)),rt}var We,ct,ut,rt,Qe,Ct,At=0,yn=!1,Mn=!1,Ce=!0;if(typeof te!="function")throw new TypeError(x);return Y=p(Y)||0,l(ne)&&(yn=!!ne.leading,Mn="maxWait"in ne,ut=Mn?$(p(ne.maxWait)||0,Y):ut,Ce="trailing"in ne?!!ne.trailing:Ce),Le.cancel=Ke,Le.flush=ve,Le}function l(te){var Y=typeof te>"u"?"undefined":v(te);return!!te&&(Y=="object"||Y=="function")}function h(te){return!!te&&(typeof te>"u"?"undefined":v(te))=="object"}function s(te){return(typeof te>"u"?"undefined":v(te))=="symbol"||h(te)&&Z.call(te)==k}function p(te){if(typeof te=="number")return te;if(s(te))return T;if(l(te)){var Y=typeof te.valueOf=="function"?te.valueOf():te;te=l(Y)?Y+"":Y}if(typeof te!="string")return te===0?te:+te;te=te.replace(P,"");var ne=L.test(te);return ne||B.test(te)?F(te.slice(2),ne?2:8):M.test(te)?T:+te}var v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(te){return typeof te}:function(te){return te&&typeof Symbol=="function"&&te.constructor===Symbol&&te!==Symbol.prototype?"symbol":typeof te},x="Expected a function",T=NaN,k="[object Symbol]",P=/^\s+|\s+$/g,M=/^[-+]0x[0-9a-f]+$/i,L=/^0b[01]+$/i,B=/^0o[0-7]+$/i,F=parseInt,X=(typeof r>"u"?"undefined":v(r))=="object"&&r&&r.Object===Object&&r,J=(typeof self>"u"?"undefined":v(self))=="object"&&self&&self.Object===Object&&self,Q=X||J||Function("return this")(),re=Object.prototype,Z=re.toString,$=Math.max,H=Math.min,W=function(){return Q.Date.now()};n.exports=a}).call(i,(function(){return this})())},function(n,i){function r(v){var x=void 0,T=void 0;for(x=0;x<v.length;x+=1)if(T=v[x],T.dataset&&T.dataset.aos||T.children&&r(T.children))return!0;return!1}function a(){return window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver}function l(){return!!a()}function h(v,x){var T=window.document,k=a(),P=new k(s);p=x,P.observe(T.documentElement,{childList:!0,subtree:!0,removedNodes:!0})}function s(v){v&&v.forEach(function(x){var T=Array.prototype.slice.call(x.addedNodes),k=Array.prototype.slice.call(x.removedNodes),P=T.concat(k);if(r(P))return p()})}Object.defineProperty(i,"__esModule",{value:!0});var p=function(){};i.default={isSupported:l,ready:h}},function(n,i){function r(T,k){if(!(T instanceof k))throw new TypeError("Cannot call a class as a function")}function a(){return navigator.userAgent||navigator.vendor||window.opera||""}Object.defineProperty(i,"__esModule",{value:!0});var l=(function(){function T(k,P){for(var M=0;M<P.length;M++){var L=P[M];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(k,L.key,L)}}return function(k,P,M){return P&&T(k.prototype,P),M&&T(k,M),k}})(),h=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,s=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,p=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i,v=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,x=(function(){function T(){r(this,T)}return l(T,[{key:"phone",value:function(){var k=a();return!(!h.test(k)&&!s.test(k.substr(0,4)))}},{key:"mobile",value:function(){var k=a();return!(!p.test(k)&&!v.test(k.substr(0,4)))}},{key:"tablet",value:function(){return this.mobile()&&!this.phone()}}]),T})();i.default=new x},function(n,i){Object.defineProperty(i,"__esModule",{value:!0});var r=function(l,h,s){var p=l.node.getAttribute("data-aos-once");h>l.position?l.node.classList.add("aos-animate"):typeof p<"u"&&(p==="false"||!s&&p!=="true")&&l.node.classList.remove("aos-animate")},a=function(l,h){var s=window.pageYOffset,p=window.innerHeight;l.forEach(function(v,x){r(v,p+s,h)})};i.default=a},function(n,i,r){function a(p){return p&&p.__esModule?p:{default:p}}Object.defineProperty(i,"__esModule",{value:!0});var l=r(12),h=a(l),s=function(p,v){return p.forEach(function(x,T){x.node.classList.add("aos-init"),x.position=(0,h.default)(x.node,v.offset)}),p};i.default=s},function(n,i,r){function a(p){return p&&p.__esModule?p:{default:p}}Object.defineProperty(i,"__esModule",{value:!0});var l=r(13),h=a(l),s=function(p,v){var x=0,T=0,k=window.innerHeight,P={offset:p.getAttribute("data-aos-offset"),anchor:p.getAttribute("data-aos-anchor"),anchorPlacement:p.getAttribute("data-aos-anchor-placement")};switch(P.offset&&!isNaN(P.offset)&&(T=parseInt(P.offset)),P.anchor&&document.querySelectorAll(P.anchor)&&(p=document.querySelectorAll(P.anchor)[0]),x=(0,h.default)(p).top,P.anchorPlacement){case"top-bottom":break;case"center-bottom":x+=p.offsetHeight/2;break;case"bottom-bottom":x+=p.offsetHeight;break;case"top-center":x+=k/2;break;case"bottom-center":x+=k/2+p.offsetHeight;break;case"center-center":x+=k/2+p.offsetHeight/2;break;case"top-top":x+=k;break;case"bottom-top":x+=p.offsetHeight+k;break;case"center-top":x+=p.offsetHeight/2+k}return P.anchorPlacement||P.offset||isNaN(v)||(T=v),x+T};i.default=s},function(n,i){Object.defineProperty(i,"__esModule",{value:!0});var r=function(a){for(var l=0,h=0;a&&!isNaN(a.offsetLeft)&&!isNaN(a.offsetTop);)l+=a.offsetLeft-(a.tagName!="BODY"?a.scrollLeft:0),h+=a.offsetTop-(a.tagName!="BODY"?a.scrollTop:0),a=a.offsetParent;return{top:h,left:l}};i.default=r},function(n,i){Object.defineProperty(i,"__esModule",{value:!0});var r=function(a){return a=a||document.querySelectorAll("[data-aos]"),Array.prototype.map.call(a,function(l){return{node:l}})};i.default=r}])})})(iw)),iw.exports}var Sq=Tq();const Tx=w3(Sq);function Kd(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T3(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}/*!
 * GSAP 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var ic={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},D_={duration:.5,overwrite:!1,delay:0},PI,ia,ss,Ac=1e8,Br=1/Ac,EC=Math.PI*2,Eq=EC/4,Cq=0,S3=Math.sqrt,kq=Math.cos,Iq=Math.sin,Bo=function(t){return typeof t=="string"},Ms=function(t){return typeof t=="function"},mh=function(t){return typeof t=="number"},MI=function(t){return typeof t>"u"},td=function(t){return typeof t=="object"},Cl=function(t){return t!==!1},DI=function(){return typeof window<"u"},Sx=function(t){return Ms(t)||Bo(t)},E3=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},Fa=Array.isArray,CC=/(?:-?\.?\d|\.)+/gi,C3=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,h_=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,_E=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,k3=/[+-]=-?[.\d]+/,I3=/[^,'"\[\]\s]+/gi,Aq=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,gs,zu,kC,RI,rc={},Bw={},A3,P3=function(t){return(Bw=R_(t,rc))&&Pl},LI=function(t,n){return console.warn("Invalid property",t,"set to",n,"Missing plugin? gsap.registerPlugin()")},fb=function(t,n){return!n&&console.warn(t)},M3=function(t,n){return t&&(rc[t]=n)&&Bw&&(Bw[t]=n)||rc},mb=function(){return 0},Pq={suppressEvents:!0,isStart:!0,kill:!1},rw={suppressEvents:!0,kill:!1},Mq={suppressEvents:!0},OI={},Df=[],IC={},D3,ql={},vE={},bL=30,sw=[],VI="",BI=function(t){var n=t[0],i,r;if(td(n)||Ms(n)||(t=[t]),!(i=(n._gsap||{}).harness)){for(r=sw.length;r--&&!sw[r].targetTest(n););i=sw[r]}for(r=t.length;r--;)t[r]&&(t[r]._gsap||(t[r]._gsap=new nN(t[r],i)))||t.splice(r,1);return t},bp=function(t){return t._gsap||BI(Pc(t))[0]._gsap},R3=function(t,n,i){return(i=t[n])&&Ms(i)?t[n]():MI(i)&&t.getAttribute&&t.getAttribute(n)||i},kl=function(t,n){return(t=t.split(",")).forEach(n)||t},Us=function(t){return Math.round(t*1e5)/1e5||0},eo=function(t){return Math.round(t*1e7)/1e7||0},w_=function(t,n){var i=n.charAt(0),r=parseFloat(n.substr(2));return t=parseFloat(t),i==="+"?t+r:i==="-"?t-r:i==="*"?t*r:t/r},Dq=function(t,n){for(var i=n.length,r=0;t.indexOf(n[r])<0&&++r<i;);return r<i},Fw=function(){var t=Df.length,n=Df.slice(0),i,r;for(IC={},Df.length=0,i=0;i<t;i++)r=n[i],r&&r._lazy&&(r.render(r._lazy[0],r._lazy[1],!0)._lazy=0)},FI=function(t){return!!(t._initted||t._startAt||t.add)},L3=function(t,n,i,r){Df.length&&!ia&&Fw(),t.render(n,i,!!(ia&&n<0&&FI(t))),Df.length&&!ia&&Fw()},O3=function(t){var n=parseFloat(t);return(n||n===0)&&(t+"").match(I3).length<2?n:Bo(t)?t.trim():t},V3=function(t){return t},sc=function(t,n){for(var i in n)i in t||(t[i]=n[i]);return t},Rq=function(t){return function(n,i){for(var r in i)r in n||r==="duration"&&t||r==="ease"||(n[r]=i[r])}},R_=function(t,n){for(var i in n)t[i]=n[i];return t},xL=function e(t,n){for(var i in n)i!=="__proto__"&&i!=="constructor"&&i!=="prototype"&&(t[i]=td(n[i])?e(t[i]||(t[i]={}),n[i]):n[i]);return t},zw=function(t,n){var i={},r;for(r in t)r in n||(i[r]=t[r]);return i},Wy=function(t){var n=t.parent||gs,i=t.keyframes?Rq(Fa(t.keyframes)):sc;if(Cl(t.inherit))for(;n;)i(t,n.vars.defaults),n=n.parent||n._dp;return t},Lq=function(t,n){for(var i=t.length,r=i===n.length;r&&i--&&t[i]===n[i];);return i<0},B3=function(t,n,i,r,a){var l=t[r],h;if(a)for(h=n[a];l&&l[a]>h;)l=l._prev;return l?(n._next=l._next,l._next=n):(n._next=t[i],t[i]=n),n._next?n._next._prev=n:t[r]=n,n._prev=l,n.parent=n._dp=t,n},H1=function(t,n,i,r){i===void 0&&(i="_first"),r===void 0&&(r="_last");var a=n._prev,l=n._next;a?a._next=l:t[i]===n&&(t[i]=l),l?l._prev=a:t[r]===n&&(t[r]=a),n._next=n._prev=n.parent=null},Uf=function(t,n){t.parent&&(!n||t.parent.autoRemoveChildren)&&t.parent.remove&&t.parent.remove(t),t._act=0},xp=function(t,n){if(t&&(!n||n._end>t._dur||n._start<0))for(var i=t;i;)i._dirty=1,i=i.parent;return t},Oq=function(t){for(var n=t.parent;n&&n.parent;)n._dirty=1,n.totalDuration(),n=n.parent;return t},AC=function(t,n,i,r){return t._startAt&&(ia?t._startAt.revert(rw):t.vars.immediateRender&&!t.vars.autoRevert||t._startAt.render(n,!0,r))},Vq=function e(t){return!t||t._ts&&e(t.parent)},wL=function(t){return t._repeat?L_(t._tTime,t=t.duration()+t._rDelay)*t:0},L_=function(t,n){var i=Math.floor(t=eo(t/n));return t&&i===t?i-1:i},Nw=function(t,n){return(t-n._start)*n._ts+(n._ts>=0?0:n._dirty?n.totalDuration():n._tDur)},G1=function(t){return t._end=eo(t._start+(t._tDur/Math.abs(t._ts||t._rts||Br)||0))},q1=function(t,n){var i=t._dp;return i&&i.smoothChildTiming&&t._ts&&(t._start=eo(i._time-(t._ts>0?n/t._ts:((t._dirty?t.totalDuration():t._tDur)-n)/-t._ts)),G1(t),i._dirty||xp(i,t)),t},F3=function(t,n){var i;if((n._time||!n._dur&&n._initted||n._start<t._time&&(n._dur||!n.add))&&(i=Nw(t.rawTime(),n),(!n._dur||r0(0,n.totalDuration(),i)-n._tTime>Br)&&n.render(i,!0)),xp(t,n)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(i=t;i._dp;)i.rawTime()>=0&&i.totalTime(i._tTime),i=i._dp;t._zTime=-Br}},ju=function(t,n,i,r){return n.parent&&Uf(n),n._start=eo((mh(i)?i:i||t!==gs?Cc(t,i,n):t._time)+n._delay),n._end=eo(n._start+(n.totalDuration()/Math.abs(n.timeScale())||0)),B3(t,n,"_first","_last",t._sort?"_start":0),PC(n)||(t._recent=n),r||F3(t,n),t._ts<0&&q1(t,t._tTime),t},z3=function(t,n){return(rc.ScrollTrigger||LI("scrollTrigger",n))&&rc.ScrollTrigger.create(n,t)},N3=function(t,n,i,r,a){if(NI(t,n,a),!t._initted)return 1;if(!i&&t._pt&&!ia&&(t._dur&&t.vars.lazy!==!1||!t._dur&&t.vars.lazy)&&D3!==Kl.frame)return Df.push(t),t._lazy=[a,r],1},Bq=function e(t){var n=t.parent;return n&&n._ts&&n._initted&&!n._lock&&(n.rawTime()<0||e(n))},PC=function(t){var n=t.data;return n==="isFromStart"||n==="isStart"},Fq=function(t,n,i,r){var a=t.ratio,l=n<0||!n&&(!t._start&&Bq(t)&&!(!t._initted&&PC(t))||(t._ts<0||t._dp._ts<0)&&!PC(t))?0:1,h=t._rDelay,s=0,p,v,x;if(h&&t._repeat&&(s=r0(0,t._tDur,n),v=L_(s,h),t._yoyo&&v&1&&(l=1-l),v!==L_(t._tTime,h)&&(a=1-l,t.vars.repeatRefresh&&t._initted&&t.invalidate())),l!==a||ia||r||t._zTime===Br||!n&&t._zTime){if(!t._initted&&N3(t,n,r,i,s))return;for(x=t._zTime,t._zTime=n||(i?Br:0),i||(i=n&&!x),t.ratio=l,t._from&&(l=1-l),t._time=0,t._tTime=s,p=t._pt;p;)p.r(l,p.d),p=p._next;n<0&&AC(t,n,i,!0),t._onUpdate&&!i&&Jl(t,"onUpdate"),s&&t._repeat&&!i&&t.parent&&Jl(t,"onRepeat"),(n>=t._tDur||n<0)&&t.ratio===l&&(l&&Uf(t,1),!i&&!ia&&(Jl(t,l?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=n)},zq=function(t,n,i){var r;if(i>n)for(r=t._first;r&&r._start<=i;){if(r.data==="isPause"&&r._start>n)return r;r=r._next}else for(r=t._last;r&&r._start>=i;){if(r.data==="isPause"&&r._start<n)return r;r=r._prev}},O_=function(t,n,i,r){var a=t._repeat,l=eo(n)||0,h=t._tTime/t._tDur;return h&&!r&&(t._time*=l/t._dur),t._dur=l,t._tDur=a?a<0?1e10:eo(l*(a+1)+t._rDelay*a):l,h>0&&!r&&q1(t,t._tTime=t._tDur*h),t.parent&&G1(t),i||xp(t.parent,t),t},TL=function(t){return t instanceof il?xp(t):O_(t,t._dur)},Nq={_start:0,endTime:mb,totalDuration:mb},Cc=function e(t,n,i){var r=t.labels,a=t._recent||Nq,l=t.duration()>=Ac?a.endTime(!1):t._dur,h,s,p;return Bo(n)&&(isNaN(n)||n in r)?(s=n.charAt(0),p=n.substr(-1)==="%",h=n.indexOf("="),s==="<"||s===">"?(h>=0&&(n=n.replace(/=/,"")),(s==="<"?a._start:a.endTime(a._repeat>=0))+(parseFloat(n.substr(1))||0)*(p?(h<0?a:i).totalDuration()/100:1)):h<0?(n in r||(r[n]=l),r[n]):(s=parseFloat(n.charAt(h-1)+n.substr(h+1)),p&&i&&(s=s/100*(Fa(i)?i[0]:i).totalDuration()),h>1?e(t,n.substr(0,h-1),i)+s:l+s)):n==null?l:+n},Hy=function(t,n,i){var r=mh(n[1]),a=(r?2:1)+(t<2?0:1),l=n[a],h,s;if(r&&(l.duration=n[1]),l.parent=i,t){for(h=l,s=i;s&&!("immediateRender"in h);)h=s.vars.defaults||{},s=Cl(s.vars.inherit)&&s.parent;l.immediateRender=Cl(h.immediateRender),t<2?l.runBackwards=1:l.startAt=n[a-1]}return new Qs(n[0],l,n[a+1])},im=function(t,n){return t||t===0?n(t):n},r0=function(t,n,i){return i<t?t:i>n?n:i},Ra=function(t,n){return!Bo(t)||!(n=Aq.exec(t))?"":n[1]},Uq=function(t,n,i){return im(i,function(r){return r0(t,n,r)})},MC=[].slice,U3=function(t,n){return t&&td(t)&&"length"in t&&(!n&&!t.length||t.length-1 in t&&td(t[0]))&&!t.nodeType&&t!==zu},$q=function(t,n,i){return i===void 0&&(i=[]),t.forEach(function(r){var a;return Bo(r)&&!n||U3(r,1)?(a=i).push.apply(a,Pc(r)):i.push(r)})||i},Pc=function(t,n,i){return ss&&!n&&ss.selector?ss.selector(t):Bo(t)&&!i&&(kC||!V_())?MC.call((n||RI).querySelectorAll(t),0):Fa(t)?$q(t,i):U3(t)?MC.call(t,0):t?[t]:[]},DC=function(t){return t=Pc(t)[0]||fb("Invalid scope")||{},function(n){var i=t.current||t.nativeElement||t;return Pc(n,i.querySelectorAll?i:i===t?fb("Invalid scope")||RI.createElement("div"):t)}},$3=function(t){return t.sort(function(){return .5-Math.random()})},j3=function(t){if(Ms(t))return t;var n=td(t)?t:{each:t},i=wp(n.ease),r=n.from||0,a=parseFloat(n.base)||0,l={},h=r>0&&r<1,s=isNaN(r)||h,p=n.axis,v=r,x=r;return Bo(r)?v=x={center:.5,edges:.5,end:1}[r]||0:!h&&s&&(v=r[0],x=r[1]),function(T,k,P){var M=(P||n).length,L=l[M],B,F,X,J,Q,re,Z,$,H;if(!L){if(H=n.grid==="auto"?0:(n.grid||[1,Ac])[1],!H){for(Z=-Ac;Z<(Z=P[H++].getBoundingClientRect().left)&&H<M;);H<M&&H--}for(L=l[M]=[],B=s?Math.min(H,M)*v-.5:r%H,F=H===Ac?0:s?M*x/H-.5:r/H|0,Z=0,$=Ac,re=0;re<M;re++)X=re%H-B,J=F-(re/H|0),L[re]=Q=p?Math.abs(p==="y"?J:X):S3(X*X+J*J),Q>Z&&(Z=Q),Q<$&&($=Q);r==="random"&&$3(L),L.max=Z-$,L.min=$,L.v=M=(parseFloat(n.amount)||parseFloat(n.each)*(H>M?M-1:p?p==="y"?M/H:H:Math.max(H,M/H))||0)*(r==="edges"?-1:1),L.b=M<0?a-M:a,L.u=Ra(n.amount||n.each)||0,i=i&&M<0?Q3(i):i}return M=(L[T]-L.min)/L.max||0,eo(L.b+(i?i(M):M)*L.v)+L.u}},RC=function(t){var n=Math.pow(10,((t+"").split(".")[1]||"").length);return function(i){var r=eo(Math.round(parseFloat(i)/t)*t*n);return(r-r%1)/n+(mh(i)?0:Ra(i))}},W3=function(t,n){var i=Fa(t),r,a;return!i&&td(t)&&(r=i=t.radius||Ac,t.values?(t=Pc(t.values),(a=!mh(t[0]))&&(r*=r)):t=RC(t.increment)),im(n,i?Ms(t)?function(l){return a=t(l),Math.abs(a-l)<=r?a:l}:function(l){for(var h=parseFloat(a?l.x:l),s=parseFloat(a?l.y:0),p=Ac,v=0,x=t.length,T,k;x--;)a?(T=t[x].x-h,k=t[x].y-s,T=T*T+k*k):T=Math.abs(t[x]-h),T<p&&(p=T,v=x);return v=!r||p<=r?t[v]:l,a||v===l||mh(l)?v:v+Ra(l)}:RC(t))},H3=function(t,n,i,r){return im(Fa(t)?!n:i===!0?!!(i=0):!r,function(){return Fa(t)?t[~~(Math.random()*t.length)]:(i=i||1e-5)&&(r=i<1?Math.pow(10,(i+"").length-2):1)&&Math.floor(Math.round((t-i/2+Math.random()*(n-t+i*.99))/i)*i*r)/r})},jq=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return function(r){return n.reduce(function(a,l){return l(a)},r)}},Wq=function(t,n){return function(i){return t(parseFloat(i))+(n||Ra(i))}},Hq=function(t,n,i){return q3(t,n,0,1,i)},G3=function(t,n,i){return im(i,function(r){return t[~~n(r)]})},Gq=function e(t,n,i){var r=n-t;return Fa(t)?G3(t,e(0,t.length),n):im(i,function(a){return(r+(a-t)%r)%r+t})},qq=function e(t,n,i){var r=n-t,a=r*2;return Fa(t)?G3(t,e(0,t.length-1),n):im(i,function(l){return l=(a+(l-t)%a)%a||0,t+(l>r?a-l:l)})},pb=function(t){for(var n=0,i="",r,a,l,h;~(r=t.indexOf("random(",n));)l=t.indexOf(")",r),h=t.charAt(r+7)==="[",a=t.substr(r+7,l-r-7).match(h?I3:CC),i+=t.substr(n,r-n)+H3(h?a:+a[0],h?0:+a[1],+a[2]||1e-5),n=l+1;return i+t.substr(n,t.length-n)},q3=function(t,n,i,r,a){var l=n-t,h=r-i;return im(a,function(s){return i+((s-t)/l*h||0)})},Kq=function e(t,n,i,r){var a=isNaN(t+n)?0:function(k){return(1-k)*t+k*n};if(!a){var l=Bo(t),h={},s,p,v,x,T;if(i===!0&&(r=1)&&(i=null),l)t={p:t},n={p:n};else if(Fa(t)&&!Fa(n)){for(v=[],x=t.length,T=x-2,p=1;p<x;p++)v.push(e(t[p-1],t[p]));x--,a=function(P){P*=x;var M=Math.min(T,~~P);return v[M](P-M)},i=n}else r||(t=R_(Fa(t)?[]:{},t));if(!v){for(s in n)zI.call(h,t,s,"get",n[s]);a=function(P){return jI(P,h)||(l?t.p:t)}}}return im(i,a)},SL=function(t,n,i){var r=t.labels,a=Ac,l,h,s;for(l in r)h=r[l]-n,h<0==!!i&&h&&a>(h=Math.abs(h))&&(s=l,a=h);return s},Jl=function(t,n,i){var r=t.vars,a=r[n],l=ss,h=t._ctx,s,p,v;if(a)return s=r[n+"Params"],p=r.callbackScope||t,i&&Df.length&&Fw(),h&&(ss=h),v=s?a.apply(p,s):a.call(p),ss=l,v},wy=function(t){return Uf(t),t.scrollTrigger&&t.scrollTrigger.kill(!!ia),t.progress()<1&&Jl(t,"onInterrupt"),t},f_,K3=[],X3=function(t){if(t)if(t=!t.name&&t.default||t,DI()||t.headless){var n=t.name,i=Ms(t),r=n&&!i&&t.init?function(){this._props=[]}:t,a={init:mb,render:jI,add:zI,kill:u7,modifier:c7,rawVars:0},l={targetTest:0,get:0,getSetter:$I,aliases:{},register:0};if(V_(),t!==r){if(ql[n])return;sc(r,sc(zw(t,a),l)),R_(r.prototype,R_(a,zw(t,l))),ql[r.prop=n]=r,t.targetTest&&(sw.push(r),OI[n]=1),n=(n==="css"?"CSS":n.charAt(0).toUpperCase()+n.substr(1))+"Plugin"}M3(n,r),t.register&&t.register(Pl,r,Il)}else K3.push(t)},Vr=255,Ty={aqua:[0,Vr,Vr],lime:[0,Vr,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Vr],navy:[0,0,128],white:[Vr,Vr,Vr],olive:[128,128,0],yellow:[Vr,Vr,0],orange:[Vr,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Vr,0,0],pink:[Vr,192,203],cyan:[0,Vr,Vr],transparent:[Vr,Vr,Vr,0]},yE=function(t,n,i){return t+=t<0?1:t>1?-1:0,(t*6<1?n+(i-n)*t*6:t<.5?i:t*3<2?n+(i-n)*(2/3-t)*6:n)*Vr+.5|0},Z3=function(t,n,i){var r=t?mh(t)?[t>>16,t>>8&Vr,t&Vr]:0:Ty.black,a,l,h,s,p,v,x,T,k,P;if(!r){if(t.substr(-1)===","&&(t=t.substr(0,t.length-1)),Ty[t])r=Ty[t];else if(t.charAt(0)==="#"){if(t.length<6&&(a=t.charAt(1),l=t.charAt(2),h=t.charAt(3),t="#"+a+a+l+l+h+h+(t.length===5?t.charAt(4)+t.charAt(4):"")),t.length===9)return r=parseInt(t.substr(1,6),16),[r>>16,r>>8&Vr,r&Vr,parseInt(t.substr(7),16)/255];t=parseInt(t.substr(1),16),r=[t>>16,t>>8&Vr,t&Vr]}else if(t.substr(0,3)==="hsl"){if(r=P=t.match(CC),!n)s=+r[0]%360/360,p=+r[1]/100,v=+r[2]/100,l=v<=.5?v*(p+1):v+p-v*p,a=v*2-l,r.length>3&&(r[3]*=1),r[0]=yE(s+1/3,a,l),r[1]=yE(s,a,l),r[2]=yE(s-1/3,a,l);else if(~t.indexOf("="))return r=t.match(C3),i&&r.length<4&&(r[3]=1),r}else r=t.match(CC)||Ty.transparent;r=r.map(Number)}return n&&!P&&(a=r[0]/Vr,l=r[1]/Vr,h=r[2]/Vr,x=Math.max(a,l,h),T=Math.min(a,l,h),v=(x+T)/2,x===T?s=p=0:(k=x-T,p=v>.5?k/(2-x-T):k/(x+T),s=x===a?(l-h)/k+(l<h?6:0):x===l?(h-a)/k+2:(a-l)/k+4,s*=60),r[0]=~~(s+.5),r[1]=~~(p*100+.5),r[2]=~~(v*100+.5)),i&&r.length<4&&(r[3]=1),r},Y3=function(t){var n=[],i=[],r=-1;return t.split(Rf).forEach(function(a){var l=a.match(h_)||[];n.push.apply(n,l),i.push(r+=l.length+1)}),n.c=i,n},EL=function(t,n,i){var r="",a=(t+r).match(Rf),l=n?"hsla(":"rgba(",h=0,s,p,v,x;if(!a)return t;if(a=a.map(function(T){return(T=Z3(T,n,1))&&l+(n?T[0]+","+T[1]+"%,"+T[2]+"%,"+T[3]:T.join(","))+")"}),i&&(v=Y3(t),s=i.c,s.join(r)!==v.c.join(r)))for(p=t.replace(Rf,"1").split(h_),x=p.length-1;h<x;h++)r+=p[h]+(~s.indexOf(h)?a.shift()||l+"0,0,0,0)":(v.length?v:a.length?a:i).shift());if(!p)for(p=t.split(Rf),x=p.length-1;h<x;h++)r+=p[h]+a[h];return r+p[x]},Rf=(function(){var e="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",t;for(t in Ty)e+="|"+t+"\\b";return new RegExp(e+")","gi")})(),Xq=/hsl[a]?\(/,J3=function(t){var n=t.join(" "),i;if(Rf.lastIndex=0,Rf.test(n))return i=Xq.test(n),t[1]=EL(t[1],i),t[0]=EL(t[0],i,Y3(t[1])),!0},gb,Kl=(function(){var e=Date.now,t=500,n=33,i=e(),r=i,a=1e3/240,l=a,h=[],s,p,v,x,T,k,P=function M(L){var B=e()-r,F=L===!0,X,J,Q,re;if((B>t||B<0)&&(i+=B-n),r+=B,Q=r-i,X=Q-l,(X>0||F)&&(re=++x.frame,T=Q-x.time*1e3,x.time=Q=Q/1e3,l+=X+(X>=a?4:a-X),J=1),F||(s=p(M)),J)for(k=0;k<h.length;k++)h[k](Q,T,re,L)};return x={time:0,frame:0,tick:function(){P(!0)},deltaRatio:function(L){return T/(1e3/(L||60))},wake:function(){A3&&(!kC&&DI()&&(zu=kC=window,RI=zu.document||{},rc.gsap=Pl,(zu.gsapVersions||(zu.gsapVersions=[])).push(Pl.version),P3(Bw||zu.GreenSockGlobals||!zu.gsap&&zu||{}),K3.forEach(X3)),v=typeof requestAnimationFrame<"u"&&requestAnimationFrame,s&&x.sleep(),p=v||function(L){return setTimeout(L,l-x.time*1e3+1|0)},gb=1,P(2))},sleep:function(){(v?cancelAnimationFrame:clearTimeout)(s),gb=0,p=mb},lagSmoothing:function(L,B){t=L||1/0,n=Math.min(B||33,t)},fps:function(L){a=1e3/(L||240),l=x.time*1e3+a},add:function(L,B,F){var X=B?function(J,Q,re,Z){L(J,Q,re,Z),x.remove(X)}:L;return x.remove(L),h[F?"unshift":"push"](X),V_(),X},remove:function(L,B){~(B=h.indexOf(L))&&h.splice(B,1)&&k>=B&&k--},_listeners:h},x})(),V_=function(){return!gb&&Kl.wake()},Wi={},Zq=/^[\d.\-M][\d.\-,\s]/,Yq=/["']/g,Jq=function(t){for(var n={},i=t.substr(1,t.length-3).split(":"),r=i[0],a=1,l=i.length,h,s,p;a<l;a++)s=i[a],h=a!==l-1?s.lastIndexOf(","):s.length,p=s.substr(0,h),n[r]=isNaN(p)?p.replace(Yq,"").trim():+p,r=s.substr(h+1).trim();return n},Qq=function(t){var n=t.indexOf("(")+1,i=t.indexOf(")"),r=t.indexOf("(",n);return t.substring(n,~r&&r<i?t.indexOf(")",i+1):i)},e7=function(t){var n=(t+"").split("("),i=Wi[n[0]];return i&&n.length>1&&i.config?i.config.apply(null,~t.indexOf("{")?[Jq(n[1])]:Qq(t).split(",").map(O3)):Wi._CE&&Zq.test(t)?Wi._CE("",t):i},Q3=function(t){return function(n){return 1-t(1-n)}},eN=function e(t,n){for(var i=t._first,r;i;)i instanceof il?e(i,n):i.vars.yoyoEase&&(!i._yoyo||!i._repeat)&&i._yoyo!==n&&(i.timeline?e(i.timeline,n):(r=i._ease,i._ease=i._yEase,i._yEase=r,i._yoyo=n)),i=i._next},wp=function(t,n){return t&&(Ms(t)?t:Wi[t]||e7(t))||n},Zp=function(t,n,i,r){i===void 0&&(i=function(s){return 1-n(1-s)}),r===void 0&&(r=function(s){return s<.5?n(s*2)/2:1-n((1-s)*2)/2});var a={easeIn:n,easeOut:i,easeInOut:r},l;return kl(t,function(h){Wi[h]=rc[h]=a,Wi[l=h.toLowerCase()]=i;for(var s in a)Wi[l+(s==="easeIn"?".in":s==="easeOut"?".out":".inOut")]=Wi[h+"."+s]=a[s]}),a},tN=function(t){return function(n){return n<.5?(1-t(1-n*2))/2:.5+t((n-.5)*2)/2}},bE=function e(t,n,i){var r=n>=1?n:1,a=(i||(t?.3:.45))/(n<1?n:1),l=a/EC*(Math.asin(1/r)||0),h=function(v){return v===1?1:r*Math.pow(2,-10*v)*Iq((v-l)*a)+1},s=t==="out"?h:t==="in"?function(p){return 1-h(1-p)}:tN(h);return a=EC/a,s.config=function(p,v){return e(t,p,v)},s},xE=function e(t,n){n===void 0&&(n=1.70158);var i=function(l){return l?--l*l*((n+1)*l+n)+1:0},r=t==="out"?i:t==="in"?function(a){return 1-i(1-a)}:tN(i);return r.config=function(a){return e(t,a)},r};kl("Linear,Quad,Cubic,Quart,Quint,Strong",function(e,t){var n=t<5?t+1:t;Zp(e+",Power"+(n-1),t?function(i){return Math.pow(i,n)}:function(i){return i},function(i){return 1-Math.pow(1-i,n)},function(i){return i<.5?Math.pow(i*2,n)/2:1-Math.pow((1-i)*2,n)/2})});Wi.Linear.easeNone=Wi.none=Wi.Linear.easeIn;Zp("Elastic",bE("in"),bE("out"),bE());(function(e,t){var n=1/t,i=2*n,r=2.5*n,a=function(h){return h<n?e*h*h:h<i?e*Math.pow(h-1.5/t,2)+.75:h<r?e*(h-=2.25/t)*h+.9375:e*Math.pow(h-2.625/t,2)+.984375};Zp("Bounce",function(l){return 1-a(1-l)},a)})(7.5625,2.75);Zp("Expo",function(e){return Math.pow(2,10*(e-1))*e+e*e*e*e*e*e*(1-e)});Zp("Circ",function(e){return-(S3(1-e*e)-1)});Zp("Sine",function(e){return e===1?1:-kq(e*Eq)+1});Zp("Back",xE("in"),xE("out"),xE());Wi.SteppedEase=Wi.steps=rc.SteppedEase={config:function(t,n){t===void 0&&(t=1);var i=1/t,r=t+(n?0:1),a=n?1:0,l=1-Br;return function(h){return((r*r0(0,l,h)|0)+a)*i}}};D_.ease=Wi["quad.out"];kl("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(e){return VI+=e+","+e+"Params,"});var nN=function(t,n){this.id=Cq++,t._gsap=this,this.target=t,this.harness=n,this.get=n?n.get:R3,this.set=n?n.getSetter:$I},_b=(function(){function e(n){this.vars=n,this._delay=+n.delay||0,(this._repeat=n.repeat===1/0?-2:n.repeat||0)&&(this._rDelay=n.repeatDelay||0,this._yoyo=!!n.yoyo||!!n.yoyoEase),this._ts=1,O_(this,+n.duration,1,1),this.data=n.data,ss&&(this._ctx=ss,ss.data.push(this)),gb||Kl.wake()}var t=e.prototype;return t.delay=function(i){return i||i===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+i-this._delay),this._delay=i,this):this._delay},t.duration=function(i){return arguments.length?this.totalDuration(this._repeat>0?i+(i+this._rDelay)*this._repeat:i):this.totalDuration()&&this._dur},t.totalDuration=function(i){return arguments.length?(this._dirty=0,O_(this,this._repeat<0?i:(i-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(i,r){if(V_(),!arguments.length)return this._tTime;var a=this._dp;if(a&&a.smoothChildTiming&&this._ts){for(q1(this,i),!a._dp||a.parent||F3(a,this);a&&a.parent;)a.parent._time!==a._start+(a._ts>=0?a._tTime/a._ts:(a.totalDuration()-a._tTime)/-a._ts)&&a.totalTime(a._tTime,!0),a=a.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&i<this._tDur||this._ts<0&&i>0||!this._tDur&&!i)&&ju(this._dp,this,this._start-this._delay)}return(this._tTime!==i||!this._dur&&!r||this._initted&&Math.abs(this._zTime)===Br||!i&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=i),L3(this,i,r)),this},t.time=function(i,r){return arguments.length?this.totalTime(Math.min(this.totalDuration(),i+wL(this))%(this._dur+this._rDelay)||(i?this._dur:0),r):this._time},t.totalProgress=function(i,r){return arguments.length?this.totalTime(this.totalDuration()*i,r):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},t.progress=function(i,r){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-i:i)+wL(this),r):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},t.iteration=function(i,r){var a=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(i-1)*a,r):this._repeat?L_(this._tTime,a)+1:1},t.timeScale=function(i,r){if(!arguments.length)return this._rts===-Br?0:this._rts;if(this._rts===i)return this;var a=this.parent&&this._ts?Nw(this.parent._time,this):this._tTime;return this._rts=+i||0,this._ts=this._ps||i===-Br?0:this._rts,this.totalTime(r0(-Math.abs(this._delay),this.totalDuration(),a),r!==!1),G1(this),Oq(this)},t.paused=function(i){return arguments.length?(this._ps!==i&&(this._ps=i,i?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(V_(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Br&&(this._tTime-=Br)))),this):this._ps},t.startTime=function(i){if(arguments.length){this._start=i;var r=this.parent||this._dp;return r&&(r._sort||!this.parent)&&ju(r,this,i-this._delay),this}return this._start},t.endTime=function(i){return this._start+(Cl(i)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},t.rawTime=function(i){var r=this.parent||this._dp;return r?i&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Nw(r.rawTime(i),this):this._tTime:this._tTime},t.revert=function(i){i===void 0&&(i=Mq);var r=ia;return ia=i,FI(this)&&(this.timeline&&this.timeline.revert(i),this.totalTime(-.01,i.suppressEvents)),this.data!=="nested"&&i.kill!==!1&&this.kill(),ia=r,this},t.globalTime=function(i){for(var r=this,a=arguments.length?i:r.rawTime();r;)a=r._start+a/(Math.abs(r._ts)||1),r=r._dp;return!this.parent&&this._sat?this._sat.globalTime(i):a},t.repeat=function(i){return arguments.length?(this._repeat=i===1/0?-2:i,TL(this)):this._repeat===-2?1/0:this._repeat},t.repeatDelay=function(i){if(arguments.length){var r=this._time;return this._rDelay=i,TL(this),r?this.time(r):this}return this._rDelay},t.yoyo=function(i){return arguments.length?(this._yoyo=i,this):this._yoyo},t.seek=function(i,r){return this.totalTime(Cc(this,i),Cl(r))},t.restart=function(i,r){return this.play().totalTime(i?-this._delay:0,Cl(r)),this._dur||(this._zTime=-Br),this},t.play=function(i,r){return i!=null&&this.seek(i,r),this.reversed(!1).paused(!1)},t.reverse=function(i,r){return i!=null&&this.seek(i||this.totalDuration(),r),this.reversed(!0).paused(!1)},t.pause=function(i,r){return i!=null&&this.seek(i,r),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(i){return arguments.length?(!!i!==this.reversed()&&this.timeScale(-this._rts||(i?-Br:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-Br,this},t.isActive=function(){var i=this.parent||this._dp,r=this._start,a;return!!(!i||this._ts&&this._initted&&i.isActive()&&(a=i.rawTime(!0))>=r&&a<this.endTime(!0)-Br)},t.eventCallback=function(i,r,a){var l=this.vars;return arguments.length>1?(r?(l[i]=r,a&&(l[i+"Params"]=a),i==="onUpdate"&&(this._onUpdate=r)):delete l[i],this):l[i]},t.then=function(i){var r=this;return new Promise(function(a){var l=Ms(i)?i:V3,h=function(){var p=r.then;r.then=null,Ms(l)&&(l=l(r))&&(l.then||l===r)&&(r.then=p),a(l),r.then=p};r._initted&&r.totalProgress()===1&&r._ts>=0||!r._tTime&&r._ts<0?h():r._prom=h})},t.kill=function(){wy(this)},e})();sc(_b.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-Br,_prom:0,_ps:!1,_rts:1});var il=(function(e){T3(t,e);function t(i,r){var a;return i===void 0&&(i={}),a=e.call(this,i)||this,a.labels={},a.smoothChildTiming=!!i.smoothChildTiming,a.autoRemoveChildren=!!i.autoRemoveChildren,a._sort=Cl(i.sortChildren),gs&&ju(i.parent||gs,Kd(a),r),i.reversed&&a.reverse(),i.paused&&a.paused(!0),i.scrollTrigger&&z3(Kd(a),i.scrollTrigger),a}var n=t.prototype;return n.to=function(r,a,l){return Hy(0,arguments,this),this},n.from=function(r,a,l){return Hy(1,arguments,this),this},n.fromTo=function(r,a,l,h){return Hy(2,arguments,this),this},n.set=function(r,a,l){return a.duration=0,a.parent=this,Wy(a).repeatDelay||(a.repeat=0),a.immediateRender=!!a.immediateRender,new Qs(r,a,Cc(this,l),1),this},n.call=function(r,a,l){return ju(this,Qs.delayedCall(0,r,a),l)},n.staggerTo=function(r,a,l,h,s,p,v){return l.duration=a,l.stagger=l.stagger||h,l.onComplete=p,l.onCompleteParams=v,l.parent=this,new Qs(r,l,Cc(this,s)),this},n.staggerFrom=function(r,a,l,h,s,p,v){return l.runBackwards=1,Wy(l).immediateRender=Cl(l.immediateRender),this.staggerTo(r,a,l,h,s,p,v)},n.staggerFromTo=function(r,a,l,h,s,p,v,x){return h.startAt=l,Wy(h).immediateRender=Cl(h.immediateRender),this.staggerTo(r,a,h,s,p,v,x)},n.render=function(r,a,l){var h=this._time,s=this._dirty?this.totalDuration():this._tDur,p=this._dur,v=r<=0?0:eo(r),x=this._zTime<0!=r<0&&(this._initted||!p),T,k,P,M,L,B,F,X,J,Q,re,Z;if(this!==gs&&v>s&&r>=0&&(v=s),v!==this._tTime||l||x){if(h!==this._time&&p&&(v+=this._time-h,r+=this._time-h),T=v,J=this._start,X=this._ts,B=!X,x&&(p||(h=this._zTime),(r||!a)&&(this._zTime=r)),this._repeat){if(re=this._yoyo,L=p+this._rDelay,this._repeat<-1&&r<0)return this.totalTime(L*100+r,a,l);if(T=eo(v%L),v===s?(M=this._repeat,T=p):(Q=eo(v/L),M=~~Q,M&&M===Q&&(T=p,M--),T>p&&(T=p)),Q=L_(this._tTime,L),!h&&this._tTime&&Q!==M&&this._tTime-Q*L-this._dur<=0&&(Q=M),re&&M&1&&(T=p-T,Z=1),M!==Q&&!this._lock){var $=re&&Q&1,H=$===(re&&M&1);if(M<Q&&($=!$),h=$?0:v%p?p:v,this._lock=1,this.render(h||(Z?0:eo(M*L)),a,!p)._lock=0,this._tTime=v,!a&&this.parent&&Jl(this,"onRepeat"),this.vars.repeatRefresh&&!Z&&(this.invalidate()._lock=1),h&&h!==this._time||B!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(p=this._dur,s=this._tDur,H&&(this._lock=2,h=$?p:-1e-4,this.render(h,!0),this.vars.repeatRefresh&&!Z&&this.invalidate()),this._lock=0,!this._ts&&!B)return this;eN(this,Z)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(F=zq(this,eo(h),eo(T)),F&&(v-=T-(T=F._start))),this._tTime=v,this._time=T,this._act=!X,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=r,h=0),!h&&v&&!a&&!Q&&(Jl(this,"onStart"),this._tTime!==v))return this;if(T>=h&&r>=0)for(k=this._first;k;){if(P=k._next,(k._act||T>=k._start)&&k._ts&&F!==k){if(k.parent!==this)return this.render(r,a,l);if(k.render(k._ts>0?(T-k._start)*k._ts:(k._dirty?k.totalDuration():k._tDur)+(T-k._start)*k._ts,a,l),T!==this._time||!this._ts&&!B){F=0,P&&(v+=this._zTime=-Br);break}}k=P}else{k=this._last;for(var W=r<0?r:T;k;){if(P=k._prev,(k._act||W<=k._end)&&k._ts&&F!==k){if(k.parent!==this)return this.render(r,a,l);if(k.render(k._ts>0?(W-k._start)*k._ts:(k._dirty?k.totalDuration():k._tDur)+(W-k._start)*k._ts,a,l||ia&&FI(k)),T!==this._time||!this._ts&&!B){F=0,P&&(v+=this._zTime=W?-Br:Br);break}}k=P}}if(F&&!a&&(this.pause(),F.render(T>=h?0:-Br)._zTime=T>=h?1:-1,this._ts))return this._start=J,G1(this),this.render(r,a,l);this._onUpdate&&!a&&Jl(this,"onUpdate",!0),(v===s&&this._tTime>=this.totalDuration()||!v&&h)&&(J===this._start||Math.abs(X)!==Math.abs(this._ts))&&(this._lock||((r||!p)&&(v===s&&this._ts>0||!v&&this._ts<0)&&Uf(this,1),!a&&!(r<0&&!h)&&(v||h||!s)&&(Jl(this,v===s&&r>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(v<s&&this.timeScale()>0)&&this._prom())))}return this},n.add=function(r,a){var l=this;if(mh(a)||(a=Cc(this,a,r)),!(r instanceof _b)){if(Fa(r))return r.forEach(function(h){return l.add(h,a)}),this;if(Bo(r))return this.addLabel(r,a);if(Ms(r))r=Qs.delayedCall(0,r);else return this}return this!==r?ju(this,r,a):this},n.getChildren=function(r,a,l,h){r===void 0&&(r=!0),a===void 0&&(a=!0),l===void 0&&(l=!0),h===void 0&&(h=-Ac);for(var s=[],p=this._first;p;)p._start>=h&&(p instanceof Qs?a&&s.push(p):(l&&s.push(p),r&&s.push.apply(s,p.getChildren(!0,a,l)))),p=p._next;return s},n.getById=function(r){for(var a=this.getChildren(1,1,1),l=a.length;l--;)if(a[l].vars.id===r)return a[l]},n.remove=function(r){return Bo(r)?this.removeLabel(r):Ms(r)?this.killTweensOf(r):(r.parent===this&&H1(this,r),r===this._recent&&(this._recent=this._last),xp(this))},n.totalTime=function(r,a){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=eo(Kl.time-(this._ts>0?r/this._ts:(this.totalDuration()-r)/-this._ts))),e.prototype.totalTime.call(this,r,a),this._forcing=0,this):this._tTime},n.addLabel=function(r,a){return this.labels[r]=Cc(this,a),this},n.removeLabel=function(r){return delete this.labels[r],this},n.addPause=function(r,a,l){var h=Qs.delayedCall(0,a||mb,l);return h.data="isPause",this._hasPause=1,ju(this,h,Cc(this,r))},n.removePause=function(r){var a=this._first;for(r=Cc(this,r);a;)a._start===r&&a.data==="isPause"&&Uf(a),a=a._next},n.killTweensOf=function(r,a,l){for(var h=this.getTweensOf(r,l),s=h.length;s--;)wf!==h[s]&&h[s].kill(r,a);return this},n.getTweensOf=function(r,a){for(var l=[],h=Pc(r),s=this._first,p=mh(a),v;s;)s instanceof Qs?Dq(s._targets,h)&&(p?(!wf||s._initted&&s._ts)&&s.globalTime(0)<=a&&s.globalTime(s.totalDuration())>a:!a||s.isActive())&&l.push(s):(v=s.getTweensOf(h,a)).length&&l.push.apply(l,v),s=s._next;return l},n.tweenTo=function(r,a){a=a||{};var l=this,h=Cc(l,r),s=a,p=s.startAt,v=s.onStart,x=s.onStartParams,T=s.immediateRender,k,P=Qs.to(l,sc({ease:a.ease||"none",lazy:!1,immediateRender:!1,time:h,overwrite:"auto",duration:a.duration||Math.abs((h-(p&&"time"in p?p.time:l._time))/l.timeScale())||Br,onStart:function(){if(l.pause(),!k){var L=a.duration||Math.abs((h-(p&&"time"in p?p.time:l._time))/l.timeScale());P._dur!==L&&O_(P,L,0,1).render(P._time,!0,!0),k=1}v&&v.apply(P,x||[])}},a));return T?P.render(0):P},n.tweenFromTo=function(r,a,l){return this.tweenTo(a,sc({startAt:{time:Cc(this,r)}},l))},n.recent=function(){return this._recent},n.nextLabel=function(r){return r===void 0&&(r=this._time),SL(this,Cc(this,r))},n.previousLabel=function(r){return r===void 0&&(r=this._time),SL(this,Cc(this,r),1)},n.currentLabel=function(r){return arguments.length?this.seek(r,!0):this.previousLabel(this._time+Br)},n.shiftChildren=function(r,a,l){l===void 0&&(l=0);for(var h=this._first,s=this.labels,p;h;)h._start>=l&&(h._start+=r,h._end+=r),h=h._next;if(a)for(p in s)s[p]>=l&&(s[p]+=r);return xp(this)},n.invalidate=function(r){var a=this._first;for(this._lock=0;a;)a.invalidate(r),a=a._next;return e.prototype.invalidate.call(this,r)},n.clear=function(r){r===void 0&&(r=!0);for(var a=this._first,l;a;)l=a._next,this.remove(a),a=l;return this._dp&&(this._time=this._tTime=this._pTime=0),r&&(this.labels={}),xp(this)},n.totalDuration=function(r){var a=0,l=this,h=l._last,s=Ac,p,v,x;if(arguments.length)return l.timeScale((l._repeat<0?l.duration():l.totalDuration())/(l.reversed()?-r:r));if(l._dirty){for(x=l.parent;h;)p=h._prev,h._dirty&&h.totalDuration(),v=h._start,v>s&&l._sort&&h._ts&&!l._lock?(l._lock=1,ju(l,h,v-h._delay,1)._lock=0):s=v,v<0&&h._ts&&(a-=v,(!x&&!l._dp||x&&x.smoothChildTiming)&&(l._start+=v/l._ts,l._time-=v,l._tTime-=v),l.shiftChildren(-v,!1,-1/0),s=0),h._end>a&&h._ts&&(a=h._end),h=p;O_(l,l===gs&&l._time>a?l._time:a,1,1),l._dirty=0}return l._tDur},t.updateRoot=function(r){if(gs._ts&&(L3(gs,Nw(r,gs)),D3=Kl.frame),Kl.frame>=bL){bL+=ic.autoSleep||120;var a=gs._first;if((!a||!a._ts)&&ic.autoSleep&&Kl._listeners.length<2){for(;a&&!a._ts;)a=a._next;a||Kl.sleep()}}},t})(_b);sc(il.prototype,{_lock:0,_hasPause:0,_forcing:0});var t7=function(t,n,i,r,a,l,h){var s=new Il(this._pt,t,n,0,1,lN,null,a),p=0,v=0,x,T,k,P,M,L,B,F;for(s.b=i,s.e=r,i+="",r+="",(B=~r.indexOf("random("))&&(r=pb(r)),l&&(F=[i,r],l(F,t,n),i=F[0],r=F[1]),T=i.match(_E)||[];x=_E.exec(r);)P=x[0],M=r.substring(p,x.index),k?k=(k+1)%5:M.substr(-5)==="rgba("&&(k=1),P!==T[v++]&&(L=parseFloat(T[v-1])||0,s._pt={_next:s._pt,p:M||v===1?M:",",s:L,c:P.charAt(1)==="="?w_(L,P)-L:parseFloat(P)-L,m:k&&k<4?Math.round:0},p=_E.lastIndex);return s.c=p<r.length?r.substring(p,r.length):"",s.fp=h,(k3.test(r)||B)&&(s.e=0),this._pt=s,s},zI=function(t,n,i,r,a,l,h,s,p,v){Ms(r)&&(r=r(a||0,t,l));var x=t[n],T=i!=="get"?i:Ms(x)?p?t[n.indexOf("set")||!Ms(t["get"+n.substr(3)])?n:"get"+n.substr(3)](p):t[n]():x,k=Ms(x)?p?o7:oN:UI,P;if(Bo(r)&&(~r.indexOf("random(")&&(r=pb(r)),r.charAt(1)==="="&&(P=w_(T,r)+(Ra(T)||0),(P||P===0)&&(r=P))),!v||T!==r||LC)return!isNaN(T*r)&&r!==""?(P=new Il(this._pt,t,n,+T||0,r-(T||0),typeof x=="boolean"?l7:aN,0,k),p&&(P.fp=p),h&&P.modifier(h,this,t),this._pt=P):(!x&&!(n in t)&&LI(n,r),t7.call(this,t,n,T,r,k,s||ic.stringFilter,p))},n7=function(t,n,i,r,a){if(Ms(t)&&(t=Gy(t,a,n,i,r)),!td(t)||t.style&&t.nodeType||Fa(t)||E3(t))return Bo(t)?Gy(t,a,n,i,r):t;var l={},h;for(h in t)l[h]=Gy(t[h],a,n,i,r);return l},iN=function(t,n,i,r,a,l){var h,s,p,v;if(ql[t]&&(h=new ql[t]).init(a,h.rawVars?n[t]:n7(n[t],r,a,l,i),i,r,l)!==!1&&(i._pt=s=new Il(i._pt,a,t,0,1,h.render,h,0,h.priority),i!==f_))for(p=i._ptLookup[i._targets.indexOf(a)],v=h._props.length;v--;)p[h._props[v]]=s;return h},wf,LC,NI=function e(t,n,i){var r=t.vars,a=r.ease,l=r.startAt,h=r.immediateRender,s=r.lazy,p=r.onUpdate,v=r.runBackwards,x=r.yoyoEase,T=r.keyframes,k=r.autoRevert,P=t._dur,M=t._startAt,L=t._targets,B=t.parent,F=B&&B.data==="nested"?B.vars.targets:L,X=t._overwrite==="auto"&&!PI,J=t.timeline,Q,re,Z,$,H,W,te,Y,ne,Se,Fe,Ve,Ge;if(J&&(!T||!a)&&(a="none"),t._ease=wp(a,D_.ease),t._yEase=x?Q3(wp(x===!0?a:x,D_.ease)):0,x&&t._yoyo&&!t._repeat&&(x=t._yEase,t._yEase=t._ease,t._ease=x),t._from=!J&&!!r.runBackwards,!J||T&&!r.stagger){if(Y=L[0]?bp(L[0]).harness:0,Ve=Y&&r[Y.prop],Q=zw(r,OI),M&&(M._zTime<0&&M.progress(1),n<0&&v&&h&&!k?M.render(-1,!0):M.revert(v&&P?rw:Pq),M._lazy=0),l){if(Uf(t._startAt=Qs.set(L,sc({data:"isStart",overwrite:!1,parent:B,immediateRender:!0,lazy:!M&&Cl(s),startAt:null,delay:0,onUpdate:p&&function(){return Jl(t,"onUpdate")},stagger:0},l))),t._startAt._dp=0,t._startAt._sat=t,n<0&&(ia||!h&&!k)&&t._startAt.revert(rw),h&&P&&n<=0&&i<=0){n&&(t._zTime=n);return}}else if(v&&P&&!M){if(n&&(h=!1),Z=sc({overwrite:!1,data:"isFromStart",lazy:h&&!M&&Cl(s),immediateRender:h,stagger:0,parent:B},Q),Ve&&(Z[Y.prop]=Ve),Uf(t._startAt=Qs.set(L,Z)),t._startAt._dp=0,t._startAt._sat=t,n<0&&(ia?t._startAt.revert(rw):t._startAt.render(-1,!0)),t._zTime=n,!h)e(t._startAt,Br,Br);else if(!n)return}for(t._pt=t._ptCache=0,s=P&&Cl(s)||s&&!P,re=0;re<L.length;re++){if(H=L[re],te=H._gsap||BI(L)[re]._gsap,t._ptLookup[re]=Se={},IC[te.id]&&Df.length&&Fw(),Fe=F===L?re:F.indexOf(H),Y&&(ne=new Y).init(H,Ve||Q,t,Fe,F)!==!1&&(t._pt=$=new Il(t._pt,H,ne.name,0,1,ne.render,ne,0,ne.priority),ne._props.forEach(function(je){Se[je]=$}),ne.priority&&(W=1)),!Y||Ve)for(Z in Q)ql[Z]&&(ne=iN(Z,Q,t,Fe,H,F))?ne.priority&&(W=1):Se[Z]=$=zI.call(t,H,Z,"get",Q[Z],Fe,F,0,r.stringFilter);t._op&&t._op[re]&&t.kill(H,t._op[re]),X&&t._pt&&(wf=t,gs.killTweensOf(H,Se,t.globalTime(n)),Ge=!t.parent,wf=0),t._pt&&s&&(IC[te.id]=1)}W&&cN(t),t._onInit&&t._onInit(t)}t._onUpdate=p,t._initted=(!t._op||t._pt)&&!Ge,T&&n<=0&&J.render(Ac,!0,!0)},i7=function(t,n,i,r,a,l,h,s){var p=(t._pt&&t._ptCache||(t._ptCache={}))[n],v,x,T,k;if(!p)for(p=t._ptCache[n]=[],T=t._ptLookup,k=t._targets.length;k--;){if(v=T[k][n],v&&v.d&&v.d._pt)for(v=v.d._pt;v&&v.p!==n&&v.fp!==n;)v=v._next;if(!v)return LC=1,t.vars[n]="+=0",NI(t,h),LC=0,s?fb(n+" not eligible for reset"):1;p.push(v)}for(k=p.length;k--;)x=p[k],v=x._pt||x,v.s=(r||r===0)&&!a?r:v.s+(r||0)+l*v.c,v.c=i-v.s,x.e&&(x.e=Us(i)+Ra(x.e)),x.b&&(x.b=v.s+Ra(x.b))},r7=function(t,n){var i=t[0]?bp(t[0]).harness:0,r=i&&i.aliases,a,l,h,s;if(!r)return n;a=R_({},n);for(l in r)if(l in a)for(s=r[l].split(","),h=s.length;h--;)a[s[h]]=a[l];return a},s7=function(t,n,i,r){var a=n.ease||r||"power1.inOut",l,h;if(Fa(n))h=i[t]||(i[t]=[]),n.forEach(function(s,p){return h.push({t:p/(n.length-1)*100,v:s,e:a})});else for(l in n)h=i[l]||(i[l]=[]),l==="ease"||h.push({t:parseFloat(t),v:n[l],e:a})},Gy=function(t,n,i,r,a){return Ms(t)?t.call(n,i,r,a):Bo(t)&&~t.indexOf("random(")?pb(t):t},rN=VI+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",sN={};kl(rN+",id,stagger,delay,duration,paused,scrollTrigger",function(e){return sN[e]=1});var Qs=(function(e){T3(t,e);function t(i,r,a,l){var h;typeof r=="number"&&(a.duration=r,r=a,a=null),h=e.call(this,l?r:Wy(r))||this;var s=h.vars,p=s.duration,v=s.delay,x=s.immediateRender,T=s.stagger,k=s.overwrite,P=s.keyframes,M=s.defaults,L=s.scrollTrigger,B=s.yoyoEase,F=r.parent||gs,X=(Fa(i)||E3(i)?mh(i[0]):"length"in r)?[i]:Pc(i),J,Q,re,Z,$,H,W,te;if(h._targets=X.length?BI(X):fb("GSAP target "+i+" not found. https://gsap.com",!ic.nullTargetWarn)||[],h._ptLookup=[],h._overwrite=k,P||T||Sx(p)||Sx(v)){if(r=h.vars,J=h.timeline=new il({data:"nested",defaults:M||{},targets:F&&F.data==="nested"?F.vars.targets:X}),J.kill(),J.parent=J._dp=Kd(h),J._start=0,T||Sx(p)||Sx(v)){if(Z=X.length,W=T&&j3(T),td(T))for($ in T)~rN.indexOf($)&&(te||(te={}),te[$]=T[$]);for(Q=0;Q<Z;Q++)re=zw(r,sN),re.stagger=0,B&&(re.yoyoEase=B),te&&R_(re,te),H=X[Q],re.duration=+Gy(p,Kd(h),Q,H,X),re.delay=(+Gy(v,Kd(h),Q,H,X)||0)-h._delay,!T&&Z===1&&re.delay&&(h._delay=v=re.delay,h._start+=v,re.delay=0),J.to(H,re,W?W(Q,H,X):0),J._ease=Wi.none;J.duration()?p=v=0:h.timeline=0}else if(P){Wy(sc(J.vars.defaults,{ease:"none"})),J._ease=wp(P.ease||r.ease||"none");var Y=0,ne,Se,Fe;if(Fa(P))P.forEach(function(Ve){return J.to(X,Ve,">")}),J.duration();else{re={};for($ in P)$==="ease"||$==="easeEach"||s7($,P[$],re,P.easeEach);for($ in re)for(ne=re[$].sort(function(Ve,Ge){return Ve.t-Ge.t}),Y=0,Q=0;Q<ne.length;Q++)Se=ne[Q],Fe={ease:Se.e,duration:(Se.t-(Q?ne[Q-1].t:0))/100*p},Fe[$]=Se.v,J.to(X,Fe,Y),Y+=Fe.duration;J.duration()<p&&J.to({},{duration:p-J.duration()})}}p||h.duration(p=J.duration())}else h.timeline=0;return k===!0&&!PI&&(wf=Kd(h),gs.killTweensOf(X),wf=0),ju(F,Kd(h),a),r.reversed&&h.reverse(),r.paused&&h.paused(!0),(x||!p&&!P&&h._start===eo(F._time)&&Cl(x)&&Vq(Kd(h))&&F.data!=="nested")&&(h._tTime=-Br,h.render(Math.max(0,-v)||0)),L&&z3(Kd(h),L),h}var n=t.prototype;return n.render=function(r,a,l){var h=this._time,s=this._tDur,p=this._dur,v=r<0,x=r>s-Br&&!v?s:r<Br?0:r,T,k,P,M,L,B,F,X,J;if(!p)Fq(this,r,a,l);else if(x!==this._tTime||!r||l||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==v||this._lazy){if(T=x,X=this.timeline,this._repeat){if(M=p+this._rDelay,this._repeat<-1&&v)return this.totalTime(M*100+r,a,l);if(T=eo(x%M),x===s?(P=this._repeat,T=p):(L=eo(x/M),P=~~L,P&&P===L?(T=p,P--):T>p&&(T=p)),B=this._yoyo&&P&1,B&&(J=this._yEase,T=p-T),L=L_(this._tTime,M),T===h&&!l&&this._initted&&P===L)return this._tTime=x,this;P!==L&&(X&&this._yEase&&eN(X,B),this.vars.repeatRefresh&&!B&&!this._lock&&T!==M&&this._initted&&(this._lock=l=1,this.render(eo(M*P),!0).invalidate()._lock=0))}if(!this._initted){if(N3(this,v?r:T,l,a,x))return this._tTime=0,this;if(h!==this._time&&!(l&&this.vars.repeatRefresh&&P!==L))return this;if(p!==this._dur)return this.render(r,a,l)}if(this._tTime=x,this._time=T,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=F=(J||this._ease)(T/p),this._from&&(this.ratio=F=1-F),!h&&x&&!a&&!L&&(Jl(this,"onStart"),this._tTime!==x))return this;for(k=this._pt;k;)k.r(F,k.d),k=k._next;X&&X.render(r<0?r:X._dur*X._ease(T/this._dur),a,l)||this._startAt&&(this._zTime=r),this._onUpdate&&!a&&(v&&AC(this,r,a,l),Jl(this,"onUpdate")),this._repeat&&P!==L&&this.vars.onRepeat&&!a&&this.parent&&Jl(this,"onRepeat"),(x===this._tDur||!x)&&this._tTime===x&&(v&&!this._onUpdate&&AC(this,r,!0,!0),(r||!p)&&(x===this._tDur&&this._ts>0||!x&&this._ts<0)&&Uf(this,1),!a&&!(v&&!h)&&(x||h||B)&&(Jl(this,x===s?"onComplete":"onReverseComplete",!0),this._prom&&!(x<s&&this.timeScale()>0)&&this._prom()))}return this},n.targets=function(){return this._targets},n.invalidate=function(r){return(!r||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(r),e.prototype.invalidate.call(this,r)},n.resetTo=function(r,a,l,h,s){gb||Kl.wake(),this._ts||this.play();var p=Math.min(this._dur,(this._dp._time-this._start)*this._ts),v;return this._initted||NI(this,p),v=this._ease(p/this._dur),i7(this,r,a,l,h,v,p,s)?this.resetTo(r,a,l,h,1):(q1(this,0),this.parent||B3(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},n.kill=function(r,a){if(a===void 0&&(a="all"),!r&&(!a||a==="all"))return this._lazy=this._pt=0,this.parent?wy(this):this.scrollTrigger&&this.scrollTrigger.kill(!!ia),this;if(this.timeline){var l=this.timeline.totalDuration();return this.timeline.killTweensOf(r,a,wf&&wf.vars.overwrite!==!0)._first||wy(this),this.parent&&l!==this.timeline.totalDuration()&&O_(this,this._dur*this.timeline._tDur/l,0,1),this}var h=this._targets,s=r?Pc(r):h,p=this._ptLookup,v=this._pt,x,T,k,P,M,L,B;if((!a||a==="all")&&Lq(h,s))return a==="all"&&(this._pt=0),wy(this);for(x=this._op=this._op||[],a!=="all"&&(Bo(a)&&(M={},kl(a,function(F){return M[F]=1}),a=M),a=r7(h,a)),B=h.length;B--;)if(~s.indexOf(h[B])){T=p[B],a==="all"?(x[B]=a,P=T,k={}):(k=x[B]=x[B]||{},P=a);for(M in P)L=T&&T[M],L&&((!("kill"in L.d)||L.d.kill(M)===!0)&&H1(this,L,"_pt"),delete T[M]),k!=="all"&&(k[M]=1)}return this._initted&&!this._pt&&v&&wy(this),this},t.to=function(r,a){return new t(r,a,arguments[2])},t.from=function(r,a){return Hy(1,arguments)},t.delayedCall=function(r,a,l,h){return new t(a,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:r,onComplete:a,onReverseComplete:a,onCompleteParams:l,onReverseCompleteParams:l,callbackScope:h})},t.fromTo=function(r,a,l){return Hy(2,arguments)},t.set=function(r,a){return a.duration=0,a.repeatDelay||(a.repeat=0),new t(r,a)},t.killTweensOf=function(r,a,l){return gs.killTweensOf(r,a,l)},t})(_b);sc(Qs.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});kl("staggerTo,staggerFrom,staggerFromTo",function(e){Qs[e]=function(){var t=new il,n=MC.call(arguments,0);return n.splice(e==="staggerFromTo"?5:4,0,0),t[e].apply(t,n)}});var UI=function(t,n,i){return t[n]=i},oN=function(t,n,i){return t[n](i)},o7=function(t,n,i,r){return t[n](r.fp,i)},a7=function(t,n,i){return t.setAttribute(n,i)},$I=function(t,n){return Ms(t[n])?oN:MI(t[n])&&t.setAttribute?a7:UI},aN=function(t,n){return n.set(n.t,n.p,Math.round((n.s+n.c*t)*1e6)/1e6,n)},l7=function(t,n){return n.set(n.t,n.p,!!(n.s+n.c*t),n)},lN=function(t,n){var i=n._pt,r="";if(!t&&n.b)r=n.b;else if(t===1&&n.e)r=n.e;else{for(;i;)r=i.p+(i.m?i.m(i.s+i.c*t):Math.round((i.s+i.c*t)*1e4)/1e4)+r,i=i._next;r+=n.c}n.set(n.t,n.p,r,n)},jI=function(t,n){for(var i=n._pt;i;)i.r(t,i.d),i=i._next},c7=function(t,n,i,r){for(var a=this._pt,l;a;)l=a._next,a.p===r&&a.modifier(t,n,i),a=l},u7=function(t){for(var n=this._pt,i,r;n;)r=n._next,n.p===t&&!n.op||n.op===t?H1(this,n,"_pt"):n.dep||(i=1),n=r;return!i},d7=function(t,n,i,r){r.mSet(t,n,r.m.call(r.tween,i,r.mt),r)},cN=function(t){for(var n=t._pt,i,r,a,l;n;){for(i=n._next,r=a;r&&r.pr>n.pr;)r=r._next;(n._prev=r?r._prev:l)?n._prev._next=n:a=n,(n._next=r)?r._prev=n:l=n,n=i}t._pt=a},Il=(function(){function e(n,i,r,a,l,h,s,p,v){this.t=i,this.s=a,this.c=l,this.p=r,this.r=h||aN,this.d=s||this,this.set=p||UI,this.pr=v||0,this._next=n,n&&(n._prev=this)}var t=e.prototype;return t.modifier=function(i,r,a){this.mSet=this.mSet||this.set,this.set=d7,this.m=i,this.mt=a,this.tween=r},e})();kl(VI+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(e){return OI[e]=1});rc.TweenMax=rc.TweenLite=Qs;rc.TimelineLite=rc.TimelineMax=il;gs=new il({sortChildren:!1,defaults:D_,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});ic.stringFilter=J3;var Tp=[],ow={},h7=[],CL=0,f7=0,wE=function(t){return(ow[t]||h7).map(function(n){return n()})},OC=function(){var t=Date.now(),n=[];t-CL>2&&(wE("matchMediaInit"),Tp.forEach(function(i){var r=i.queries,a=i.conditions,l,h,s,p;for(h in r)l=zu.matchMedia(r[h]).matches,l&&(s=1),l!==a[h]&&(a[h]=l,p=1);p&&(i.revert(),s&&n.push(i))}),wE("matchMediaRevert"),n.forEach(function(i){return i.onMatch(i,function(r){return i.add(null,r)})}),CL=t,wE("matchMedia"))},uN=(function(){function e(n,i){this.selector=i&&DC(i),this.data=[],this._r=[],this.isReverted=!1,this.id=f7++,n&&this.add(n)}var t=e.prototype;return t.add=function(i,r,a){Ms(i)&&(a=r,r=i,i=Ms);var l=this,h=function(){var p=ss,v=l.selector,x;return p&&p!==l&&p.data.push(l),a&&(l.selector=DC(a)),ss=l,x=r.apply(l,arguments),Ms(x)&&l._r.push(x),ss=p,l.selector=v,l.isReverted=!1,x};return l.last=h,i===Ms?h(l,function(s){return l.add(null,s)}):i?l[i]=h:h},t.ignore=function(i){var r=ss;ss=null,i(this),ss=r},t.getTweens=function(){var i=[];return this.data.forEach(function(r){return r instanceof e?i.push.apply(i,r.getTweens()):r instanceof Qs&&!(r.parent&&r.parent.data==="nested")&&i.push(r)}),i},t.clear=function(){this._r.length=this.data.length=0},t.kill=function(i,r){var a=this;if(i?(function(){for(var h=a.getTweens(),s=a.data.length,p;s--;)p=a.data[s],p.data==="isFlip"&&(p.revert(),p.getChildren(!0,!0,!1).forEach(function(v){return h.splice(h.indexOf(v),1)}));for(h.map(function(v){return{g:v._dur||v._delay||v._sat&&!v._sat.vars.immediateRender?v.globalTime(0):-1/0,t:v}}).sort(function(v,x){return x.g-v.g||-1/0}).forEach(function(v){return v.t.revert(i)}),s=a.data.length;s--;)p=a.data[s],p instanceof il?p.data!=="nested"&&(p.scrollTrigger&&p.scrollTrigger.revert(),p.kill()):!(p instanceof Qs)&&p.revert&&p.revert(i);a._r.forEach(function(v){return v(i,a)}),a.isReverted=!0})():this.data.forEach(function(h){return h.kill&&h.kill()}),this.clear(),r)for(var l=Tp.length;l--;)Tp[l].id===this.id&&Tp.splice(l,1)},t.revert=function(i){this.kill(i||{})},e})(),m7=(function(){function e(n){this.contexts=[],this.scope=n,ss&&ss.data.push(this)}var t=e.prototype;return t.add=function(i,r,a){td(i)||(i={matches:i});var l=new uN(0,a||this.scope),h=l.conditions={},s,p,v;ss&&!l.selector&&(l.selector=ss.selector),this.contexts.push(l),r=l.add("onMatch",r),l.queries=i;for(p in i)p==="all"?v=1:(s=zu.matchMedia(i[p]),s&&(Tp.indexOf(l)<0&&Tp.push(l),(h[p]=s.matches)&&(v=1),s.addListener?s.addListener(OC):s.addEventListener("change",OC)));return v&&r(l,function(x){return l.add(null,x)}),this},t.revert=function(i){this.kill(i||{})},t.kill=function(i){this.contexts.forEach(function(r){return r.kill(i,!0)})},e})(),Uw={registerPlugin:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];n.forEach(function(r){return X3(r)})},timeline:function(t){return new il(t)},getTweensOf:function(t,n){return gs.getTweensOf(t,n)},getProperty:function(t,n,i,r){Bo(t)&&(t=Pc(t)[0]);var a=bp(t||{}).get,l=i?V3:O3;return i==="native"&&(i=""),t&&(n?l((ql[n]&&ql[n].get||a)(t,n,i,r)):function(h,s,p){return l((ql[h]&&ql[h].get||a)(t,h,s,p))})},quickSetter:function(t,n,i){if(t=Pc(t),t.length>1){var r=t.map(function(v){return Pl.quickSetter(v,n,i)}),a=r.length;return function(v){for(var x=a;x--;)r[x](v)}}t=t[0]||{};var l=ql[n],h=bp(t),s=h.harness&&(h.harness.aliases||{})[n]||n,p=l?function(v){var x=new l;f_._pt=0,x.init(t,i?v+i:v,f_,0,[t]),x.render(1,x),f_._pt&&jI(1,f_)}:h.set(t,s);return l?p:function(v){return p(t,s,i?v+i:v,h,1)}},quickTo:function(t,n,i){var r,a=Pl.to(t,sc((r={},r[n]="+=0.1",r.paused=!0,r.stagger=0,r),i||{})),l=function(s,p,v){return a.resetTo(n,s,p,v)};return l.tween=a,l},isTweening:function(t){return gs.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=wp(t.ease,D_.ease)),xL(D_,t||{})},config:function(t){return xL(ic,t||{})},registerEffect:function(t){var n=t.name,i=t.effect,r=t.plugins,a=t.defaults,l=t.extendTimeline;(r||"").split(",").forEach(function(h){return h&&!ql[h]&&!rc[h]&&fb(n+" effect requires "+h+" plugin.")}),vE[n]=function(h,s,p){return i(Pc(h),sc(s||{},a),p)},l&&(il.prototype[n]=function(h,s,p){return this.add(vE[n](h,td(s)?s:(p=s)&&{},this),p)})},registerEase:function(t,n){Wi[t]=wp(n)},parseEase:function(t,n){return arguments.length?wp(t,n):Wi},getById:function(t){return gs.getById(t)},exportRoot:function(t,n){t===void 0&&(t={});var i=new il(t),r,a;for(i.smoothChildTiming=Cl(t.smoothChildTiming),gs.remove(i),i._dp=0,i._time=i._tTime=gs._time,r=gs._first;r;)a=r._next,(n||!(!r._dur&&r instanceof Qs&&r.vars.onComplete===r._targets[0]))&&ju(i,r,r._start-r._delay),r=a;return ju(gs,i,0),i},context:function(t,n){return t?new uN(t,n):ss},matchMedia:function(t){return new m7(t)},matchMediaRefresh:function(){return Tp.forEach(function(t){var n=t.conditions,i,r;for(r in n)n[r]&&(n[r]=!1,i=1);i&&t.revert()})||OC()},addEventListener:function(t,n){var i=ow[t]||(ow[t]=[]);~i.indexOf(n)||i.push(n)},removeEventListener:function(t,n){var i=ow[t],r=i&&i.indexOf(n);r>=0&&i.splice(r,1)},utils:{wrap:Gq,wrapYoyo:qq,distribute:j3,random:H3,snap:W3,normalize:Hq,getUnit:Ra,clamp:Uq,splitColor:Z3,toArray:Pc,selector:DC,mapRange:q3,pipe:jq,unitize:Wq,interpolate:Kq,shuffle:$3},install:P3,effects:vE,ticker:Kl,updateRoot:il.updateRoot,plugins:ql,globalTimeline:gs,core:{PropTween:Il,globals:M3,Tween:Qs,Timeline:il,Animation:_b,getCache:bp,_removeLinkedListItem:H1,reverting:function(){return ia},context:function(t){return t&&ss&&(ss.data.push(t),t._ctx=ss),ss},suppressOverwrites:function(t){return PI=t}}};kl("to,from,fromTo,delayedCall,set,killTweensOf",function(e){return Uw[e]=Qs[e]});Kl.add(il.updateRoot);f_=Uw.to({},{duration:0});var p7=function(t,n){for(var i=t._pt;i&&i.p!==n&&i.op!==n&&i.fp!==n;)i=i._next;return i},g7=function(t,n){var i=t._targets,r,a,l;for(r in n)for(a=i.length;a--;)l=t._ptLookup[a][r],l&&(l=l.d)&&(l._pt&&(l=p7(l,r)),l&&l.modifier&&l.modifier(n[r],t,i[a],r))},TE=function(t,n){return{name:t,headless:1,rawVars:1,init:function(r,a,l){l._onInit=function(h){var s,p;if(Bo(a)&&(s={},kl(a,function(v){return s[v]=1}),a=s),n){s={};for(p in a)s[p]=n(a[p]);a=s}g7(h,a)}}}},Pl=Uw.registerPlugin({name:"attr",init:function(t,n,i,r,a){var l,h,s;this.tween=i;for(l in n)s=t.getAttribute(l)||"",h=this.add(t,"setAttribute",(s||0)+"",n[l],r,a,0,0,l),h.op=l,h.b=s,this._props.push(l)},render:function(t,n){for(var i=n._pt;i;)ia?i.set(i.t,i.p,i.b,i):i.r(t,i.d),i=i._next}},{name:"endArray",headless:1,init:function(t,n){for(var i=n.length;i--;)this.add(t,i,t[i]||0,n[i],0,0,0,0,0,1)}},TE("roundProps",RC),TE("modifiers"),TE("snap",W3))||Uw;Qs.version=il.version=Pl.version="3.13.0";A3=1;DI()&&V_();Wi.Power0;Wi.Power1;Wi.Power2;Wi.Power3;Wi.Power4;Wi.Linear;Wi.Quad;Wi.Cubic;Wi.Quart;Wi.Quint;Wi.Strong;Wi.Elastic;Wi.Back;Wi.SteppedEase;Wi.Bounce;Wi.Sine;Wi.Expo;Wi.Circ;/*!
 * CSSPlugin 3.13.0
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var kL,Tf,T_,WI,mp,IL,HI,_7=function(){return typeof window<"u"},ph={},op=180/Math.PI,S_=Math.PI/180,Qg=Math.atan2,AL=1e8,GI=/([A-Z])/g,v7=/(left|right|width|margin|padding|x)/i,y7=/[\s,\(]\S/,Wu={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},VC=function(t,n){return n.set(n.t,n.p,Math.round((n.s+n.c*t)*1e4)/1e4+n.u,n)},b7=function(t,n){return n.set(n.t,n.p,t===1?n.e:Math.round((n.s+n.c*t)*1e4)/1e4+n.u,n)},x7=function(t,n){return n.set(n.t,n.p,t?Math.round((n.s+n.c*t)*1e4)/1e4+n.u:n.b,n)},w7=function(t,n){var i=n.s+n.c*t;n.set(n.t,n.p,~~(i+(i<0?-.5:.5))+n.u,n)},dN=function(t,n){return n.set(n.t,n.p,t?n.e:n.b,n)},hN=function(t,n){return n.set(n.t,n.p,t!==1?n.b:n.e,n)},T7=function(t,n,i){return t.style[n]=i},S7=function(t,n,i){return t.style.setProperty(n,i)},E7=function(t,n,i){return t._gsap[n]=i},C7=function(t,n,i){return t._gsap.scaleX=t._gsap.scaleY=i},k7=function(t,n,i,r,a){var l=t._gsap;l.scaleX=l.scaleY=i,l.renderTransform(a,l)},I7=function(t,n,i,r,a){var l=t._gsap;l[n]=i,l.renderTransform(a,l)},vs="transform",Al=vs+"Origin",A7=function e(t,n){var i=this,r=this.target,a=r.style,l=r._gsap;if(t in ph&&a){if(this.tfm=this.tfm||{},t!=="transform")t=Wu[t]||t,~t.indexOf(",")?t.split(",").forEach(function(h){return i.tfm[h]=Yd(r,h)}):this.tfm[t]=l.x?l[t]:Yd(r,t),t===Al&&(this.tfm.zOrigin=l.zOrigin);else return Wu.transform.split(",").forEach(function(h){return e.call(i,h,n)});if(this.props.indexOf(vs)>=0)return;l.svg&&(this.svgo=r.getAttribute("data-svg-origin"),this.props.push(Al,n,"")),t=vs}(a||n)&&this.props.push(t,n,a[t])},fN=function(t){t.translate&&(t.removeProperty("translate"),t.removeProperty("scale"),t.removeProperty("rotate"))},P7=function(){var t=this.props,n=this.target,i=n.style,r=n._gsap,a,l;for(a=0;a<t.length;a+=3)t[a+1]?t[a+1]===2?n[t[a]](t[a+2]):n[t[a]]=t[a+2]:t[a+2]?i[t[a]]=t[a+2]:i.removeProperty(t[a].substr(0,2)==="--"?t[a]:t[a].replace(GI,"-$1").toLowerCase());if(this.tfm){for(l in this.tfm)r[l]=this.tfm[l];r.svg&&(r.renderTransform(),n.setAttribute("data-svg-origin",this.svgo||"")),a=HI(),(!a||!a.isStart)&&!i[vs]&&(fN(i),r.zOrigin&&i[Al]&&(i[Al]+=" "+r.zOrigin+"px",r.zOrigin=0,r.renderTransform()),r.uncache=1)}},mN=function(t,n){var i={target:t,props:[],revert:P7,save:A7};return t._gsap||Pl.core.getCache(t),n&&t.style&&t.nodeType&&n.split(",").forEach(function(r){return i.save(r)}),i},pN,BC=function(t,n){var i=Tf.createElementNS?Tf.createElementNS((n||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):Tf.createElement(t);return i&&i.style?i:Tf.createElement(t)},Mc=function e(t,n,i){var r=getComputedStyle(t);return r[n]||r.getPropertyValue(n.replace(GI,"-$1").toLowerCase())||r.getPropertyValue(n)||!i&&e(t,B_(n)||n,1)||""},PL="O,Moz,ms,Ms,Webkit".split(","),B_=function(t,n,i){var r=n||mp,a=r.style,l=5;if(t in a&&!i)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);l--&&!(PL[l]+t in a););return l<0?null:(l===3?"ms":l>=0?PL[l]:"")+t},FC=function(){_7()&&window.document&&(kL=window,Tf=kL.document,T_=Tf.documentElement,mp=BC("div")||{style:{}},BC("div"),vs=B_(vs),Al=vs+"Origin",mp.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",pN=!!B_("perspective"),HI=Pl.core.reverting,WI=1)},ML=function(t){var n=t.ownerSVGElement,i=BC("svg",n&&n.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),r=t.cloneNode(!0),a;r.style.display="block",i.appendChild(r),T_.appendChild(i);try{a=r.getBBox()}catch{}return i.removeChild(r),T_.removeChild(i),a},DL=function(t,n){for(var i=n.length;i--;)if(t.hasAttribute(n[i]))return t.getAttribute(n[i])},gN=function(t){var n,i;try{n=t.getBBox()}catch{n=ML(t),i=1}return n&&(n.width||n.height)||i||(n=ML(t)),n&&!n.width&&!n.x&&!n.y?{x:+DL(t,["x","cx","x1"])||0,y:+DL(t,["y","cy","y1"])||0,width:0,height:0}:n},_N=function(t){return!!(t.getCTM&&(!t.parentNode||t.ownerSVGElement)&&gN(t))},Rp=function(t,n){if(n){var i=t.style,r;n in ph&&n!==Al&&(n=vs),i.removeProperty?(r=n.substr(0,2),(r==="ms"||n.substr(0,6)==="webkit")&&(n="-"+n),i.removeProperty(r==="--"?n:n.replace(GI,"-$1").toLowerCase())):i.removeAttribute(n)}},Sf=function(t,n,i,r,a,l){var h=new Il(t._pt,n,i,0,1,l?hN:dN);return t._pt=h,h.b=r,h.e=a,t._props.push(i),h},RL={deg:1,rad:1,turn:1},M7={grid:1,flex:1},$f=function e(t,n,i,r){var a=parseFloat(i)||0,l=(i+"").trim().substr((a+"").length)||"px",h=mp.style,s=v7.test(n),p=t.tagName.toLowerCase()==="svg",v=(p?"client":"offset")+(s?"Width":"Height"),x=100,T=r==="px",k=r==="%",P,M,L,B;if(r===l||!a||RL[r]||RL[l])return a;if(l!=="px"&&!T&&(a=e(t,n,i,"px")),B=t.getCTM&&_N(t),(k||l==="%")&&(ph[n]||~n.indexOf("adius")))return P=B?t.getBBox()[s?"width":"height"]:t[v],Us(k?a/P*x:a/100*P);if(h[s?"width":"height"]=x+(T?l:r),M=r!=="rem"&&~n.indexOf("adius")||r==="em"&&t.appendChild&&!p?t:t.parentNode,B&&(M=(t.ownerSVGElement||{}).parentNode),(!M||M===Tf||!M.appendChild)&&(M=Tf.body),L=M._gsap,L&&k&&L.width&&s&&L.time===Kl.time&&!L.uncache)return Us(a/L.width*x);if(k&&(n==="height"||n==="width")){var F=t.style[n];t.style[n]=x+r,P=t[v],F?t.style[n]=F:Rp(t,n)}else(k||l==="%")&&!M7[Mc(M,"display")]&&(h.position=Mc(t,"position")),M===t&&(h.position="static"),M.appendChild(mp),P=mp[v],M.removeChild(mp),h.position="absolute";return s&&k&&(L=bp(M),L.time=Kl.time,L.width=M[v]),Us(T?P*a/x:P&&a?x/P*a:0)},Yd=function(t,n,i,r){var a;return WI||FC(),n in Wu&&n!=="transform"&&(n=Wu[n],~n.indexOf(",")&&(n=n.split(",")[0])),ph[n]&&n!=="transform"?(a=yb(t,r),a=n!=="transformOrigin"?a[n]:a.svg?a.origin:jw(Mc(t,Al))+" "+a.zOrigin+"px"):(a=t.style[n],(!a||a==="auto"||r||~(a+"").indexOf("calc("))&&(a=$w[n]&&$w[n](t,n,i)||Mc(t,n)||R3(t,n)||(n==="opacity"?1:0))),i&&!~(a+"").trim().indexOf(" ")?$f(t,n,a,i)+i:a},D7=function(t,n,i,r){if(!i||i==="none"){var a=B_(n,t,1),l=a&&Mc(t,a,1);l&&l!==i?(n=a,i=l):n==="borderColor"&&(i=Mc(t,"borderTopColor"))}var h=new Il(this._pt,t.style,n,0,1,lN),s=0,p=0,v,x,T,k,P,M,L,B,F,X,J,Q;if(h.b=i,h.e=r,i+="",r+="",r.substring(0,6)==="var(--"&&(r=Mc(t,r.substring(4,r.indexOf(")")))),r==="auto"&&(M=t.style[n],t.style[n]=r,r=Mc(t,n)||r,M?t.style[n]=M:Rp(t,n)),v=[i,r],J3(v),i=v[0],r=v[1],T=i.match(h_)||[],Q=r.match(h_)||[],Q.length){for(;x=h_.exec(r);)L=x[0],F=r.substring(s,x.index),P?P=(P+1)%5:(F.substr(-5)==="rgba("||F.substr(-5)==="hsla(")&&(P=1),L!==(M=T[p++]||"")&&(k=parseFloat(M)||0,J=M.substr((k+"").length),L.charAt(1)==="="&&(L=w_(k,L)+J),B=parseFloat(L),X=L.substr((B+"").length),s=h_.lastIndex-X.length,X||(X=X||ic.units[n]||J,s===r.length&&(r+=X,h.e+=X)),J!==X&&(k=$f(t,n,M,X)||0),h._pt={_next:h._pt,p:F||p===1?F:",",s:k,c:B-k,m:P&&P<4||n==="zIndex"?Math.round:0});h.c=s<r.length?r.substring(s,r.length):""}else h.r=n==="display"&&r==="none"?hN:dN;return k3.test(r)&&(h.e=0),this._pt=h,h},LL={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},R7=function(t){var n=t.split(" "),i=n[0],r=n[1]||"50%";return(i==="top"||i==="bottom"||r==="left"||r==="right")&&(t=i,i=r,r=t),n[0]=LL[i]||i,n[1]=LL[r]||r,n.join(" ")},L7=function(t,n){if(n.tween&&n.tween._time===n.tween._dur){var i=n.t,r=i.style,a=n.u,l=i._gsap,h,s,p;if(a==="all"||a===!0)r.cssText="",s=1;else for(a=a.split(","),p=a.length;--p>-1;)h=a[p],ph[h]&&(s=1,h=h==="transformOrigin"?Al:vs),Rp(i,h);s&&(Rp(i,vs),l&&(l.svg&&i.removeAttribute("transform"),r.scale=r.rotate=r.translate="none",yb(i,1),l.uncache=1,fN(r)))}},$w={clearProps:function(t,n,i,r,a){if(a.data!=="isFromStart"){var l=t._pt=new Il(t._pt,n,i,0,0,L7);return l.u=r,l.pr=-10,l.tween=a,t._props.push(i),1}}},vb=[1,0,0,1,0,0],vN={},yN=function(t){return t==="matrix(1, 0, 0, 1, 0, 0)"||t==="none"||!t},OL=function(t){var n=Mc(t,vs);return yN(n)?vb:n.substr(7).match(C3).map(Us)},qI=function(t,n){var i=t._gsap||bp(t),r=t.style,a=OL(t),l,h,s,p;return i.svg&&t.getAttribute("transform")?(s=t.transform.baseVal.consolidate().matrix,a=[s.a,s.b,s.c,s.d,s.e,s.f],a.join(",")==="1,0,0,1,0,0"?vb:a):(a===vb&&!t.offsetParent&&t!==T_&&!i.svg&&(s=r.display,r.display="block",l=t.parentNode,(!l||!t.offsetParent&&!t.getBoundingClientRect().width)&&(p=1,h=t.nextElementSibling,T_.appendChild(t)),a=OL(t),s?r.display=s:Rp(t,"display"),p&&(h?l.insertBefore(t,h):l?l.appendChild(t):T_.removeChild(t))),n&&a.length>6?[a[0],a[1],a[4],a[5],a[12],a[13]]:a)},zC=function(t,n,i,r,a,l){var h=t._gsap,s=a||qI(t,!0),p=h.xOrigin||0,v=h.yOrigin||0,x=h.xOffset||0,T=h.yOffset||0,k=s[0],P=s[1],M=s[2],L=s[3],B=s[4],F=s[5],X=n.split(" "),J=parseFloat(X[0])||0,Q=parseFloat(X[1])||0,re,Z,$,H;i?s!==vb&&(Z=k*L-P*M)&&($=J*(L/Z)+Q*(-M/Z)+(M*F-L*B)/Z,H=J*(-P/Z)+Q*(k/Z)-(k*F-P*B)/Z,J=$,Q=H):(re=gN(t),J=re.x+(~X[0].indexOf("%")?J/100*re.width:J),Q=re.y+(~(X[1]||X[0]).indexOf("%")?Q/100*re.height:Q)),r||r!==!1&&h.smooth?(B=J-p,F=Q-v,h.xOffset=x+(B*k+F*M)-B,h.yOffset=T+(B*P+F*L)-F):h.xOffset=h.yOffset=0,h.xOrigin=J,h.yOrigin=Q,h.smooth=!!r,h.origin=n,h.originIsAbsolute=!!i,t.style[Al]="0px 0px",l&&(Sf(l,h,"xOrigin",p,J),Sf(l,h,"yOrigin",v,Q),Sf(l,h,"xOffset",x,h.xOffset),Sf(l,h,"yOffset",T,h.yOffset)),t.setAttribute("data-svg-origin",J+" "+Q)},yb=function(t,n){var i=t._gsap||new nN(t);if("x"in i&&!n&&!i.uncache)return i;var r=t.style,a=i.scaleX<0,l="px",h="deg",s=getComputedStyle(t),p=Mc(t,Al)||"0",v,x,T,k,P,M,L,B,F,X,J,Q,re,Z,$,H,W,te,Y,ne,Se,Fe,Ve,Ge,je,Ae,Ke,ve,Le,We,ct,ut;return v=x=T=M=L=B=F=X=J=0,k=P=1,i.svg=!!(t.getCTM&&_N(t)),s.translate&&((s.translate!=="none"||s.scale!=="none"||s.rotate!=="none")&&(r[vs]=(s.translate!=="none"?"translate3d("+(s.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(s.rotate!=="none"?"rotate("+s.rotate+") ":"")+(s.scale!=="none"?"scale("+s.scale.split(" ").join(",")+") ":"")+(s[vs]!=="none"?s[vs]:"")),r.scale=r.rotate=r.translate="none"),Z=qI(t,i.svg),i.svg&&(i.uncache?(je=t.getBBox(),p=i.xOrigin-je.x+"px "+(i.yOrigin-je.y)+"px",Ge=""):Ge=!n&&t.getAttribute("data-svg-origin"),zC(t,Ge||p,!!Ge||i.originIsAbsolute,i.smooth!==!1,Z)),Q=i.xOrigin||0,re=i.yOrigin||0,Z!==vb&&(te=Z[0],Y=Z[1],ne=Z[2],Se=Z[3],v=Fe=Z[4],x=Ve=Z[5],Z.length===6?(k=Math.sqrt(te*te+Y*Y),P=Math.sqrt(Se*Se+ne*ne),M=te||Y?Qg(Y,te)*op:0,F=ne||Se?Qg(ne,Se)*op+M:0,F&&(P*=Math.abs(Math.cos(F*S_))),i.svg&&(v-=Q-(Q*te+re*ne),x-=re-(Q*Y+re*Se))):(ut=Z[6],We=Z[7],Ke=Z[8],ve=Z[9],Le=Z[10],ct=Z[11],v=Z[12],x=Z[13],T=Z[14],$=Qg(ut,Le),L=$*op,$&&(H=Math.cos(-$),W=Math.sin(-$),Ge=Fe*H+Ke*W,je=Ve*H+ve*W,Ae=ut*H+Le*W,Ke=Fe*-W+Ke*H,ve=Ve*-W+ve*H,Le=ut*-W+Le*H,ct=We*-W+ct*H,Fe=Ge,Ve=je,ut=Ae),$=Qg(-ne,Le),B=$*op,$&&(H=Math.cos(-$),W=Math.sin(-$),Ge=te*H-Ke*W,je=Y*H-ve*W,Ae=ne*H-Le*W,ct=Se*W+ct*H,te=Ge,Y=je,ne=Ae),$=Qg(Y,te),M=$*op,$&&(H=Math.cos($),W=Math.sin($),Ge=te*H+Y*W,je=Fe*H+Ve*W,Y=Y*H-te*W,Ve=Ve*H-Fe*W,te=Ge,Fe=je),L&&Math.abs(L)+Math.abs(M)>359.9&&(L=M=0,B=180-B),k=Us(Math.sqrt(te*te+Y*Y+ne*ne)),P=Us(Math.sqrt(Ve*Ve+ut*ut)),$=Qg(Fe,Ve),F=Math.abs($)>2e-4?$*op:0,J=ct?1/(ct<0?-ct:ct):0),i.svg&&(Ge=t.getAttribute("transform"),i.forceCSS=t.setAttribute("transform","")||!yN(Mc(t,vs)),Ge&&t.setAttribute("transform",Ge))),Math.abs(F)>90&&Math.abs(F)<270&&(a?(k*=-1,F+=M<=0?180:-180,M+=M<=0?180:-180):(P*=-1,F+=F<=0?180:-180)),n=n||i.uncache,i.x=v-((i.xPercent=v&&(!n&&i.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-v)?-50:0)))?t.offsetWidth*i.xPercent/100:0)+l,i.y=x-((i.yPercent=x&&(!n&&i.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-x)?-50:0)))?t.offsetHeight*i.yPercent/100:0)+l,i.z=T+l,i.scaleX=Us(k),i.scaleY=Us(P),i.rotation=Us(M)+h,i.rotationX=Us(L)+h,i.rotationY=Us(B)+h,i.skewX=F+h,i.skewY=X+h,i.transformPerspective=J+l,(i.zOrigin=parseFloat(p.split(" ")[2])||!n&&i.zOrigin||0)&&(r[Al]=jw(p)),i.xOffset=i.yOffset=0,i.force3D=ic.force3D,i.renderTransform=i.svg?V7:pN?bN:O7,i.uncache=0,i},jw=function(t){return(t=t.split(" "))[0]+" "+t[1]},SE=function(t,n,i){var r=Ra(n);return Us(parseFloat(n)+parseFloat($f(t,"x",i+"px",r)))+r},O7=function(t,n){n.z="0px",n.rotationY=n.rotationX="0deg",n.force3D=0,bN(t,n)},Ym="0deg",fy="0px",Jm=") ",bN=function(t,n){var i=n||this,r=i.xPercent,a=i.yPercent,l=i.x,h=i.y,s=i.z,p=i.rotation,v=i.rotationY,x=i.rotationX,T=i.skewX,k=i.skewY,P=i.scaleX,M=i.scaleY,L=i.transformPerspective,B=i.force3D,F=i.target,X=i.zOrigin,J="",Q=B==="auto"&&t&&t!==1||B===!0;if(X&&(x!==Ym||v!==Ym)){var re=parseFloat(v)*S_,Z=Math.sin(re),$=Math.cos(re),H;re=parseFloat(x)*S_,H=Math.cos(re),l=SE(F,l,Z*H*-X),h=SE(F,h,-Math.sin(re)*-X),s=SE(F,s,$*H*-X+X)}L!==fy&&(J+="perspective("+L+Jm),(r||a)&&(J+="translate("+r+"%, "+a+"%) "),(Q||l!==fy||h!==fy||s!==fy)&&(J+=s!==fy||Q?"translate3d("+l+", "+h+", "+s+") ":"translate("+l+", "+h+Jm),p!==Ym&&(J+="rotate("+p+Jm),v!==Ym&&(J+="rotateY("+v+Jm),x!==Ym&&(J+="rotateX("+x+Jm),(T!==Ym||k!==Ym)&&(J+="skew("+T+", "+k+Jm),(P!==1||M!==1)&&(J+="scale("+P+", "+M+Jm),F.style[vs]=J||"translate(0, 0)"},V7=function(t,n){var i=n||this,r=i.xPercent,a=i.yPercent,l=i.x,h=i.y,s=i.rotation,p=i.skewX,v=i.skewY,x=i.scaleX,T=i.scaleY,k=i.target,P=i.xOrigin,M=i.yOrigin,L=i.xOffset,B=i.yOffset,F=i.forceCSS,X=parseFloat(l),J=parseFloat(h),Q,re,Z,$,H;s=parseFloat(s),p=parseFloat(p),v=parseFloat(v),v&&(v=parseFloat(v),p+=v,s+=v),s||p?(s*=S_,p*=S_,Q=Math.cos(s)*x,re=Math.sin(s)*x,Z=Math.sin(s-p)*-T,$=Math.cos(s-p)*T,p&&(v*=S_,H=Math.tan(p-v),H=Math.sqrt(1+H*H),Z*=H,$*=H,v&&(H=Math.tan(v),H=Math.sqrt(1+H*H),Q*=H,re*=H)),Q=Us(Q),re=Us(re),Z=Us(Z),$=Us($)):(Q=x,$=T,re=Z=0),(X&&!~(l+"").indexOf("px")||J&&!~(h+"").indexOf("px"))&&(X=$f(k,"x",l,"px"),J=$f(k,"y",h,"px")),(P||M||L||B)&&(X=Us(X+P-(P*Q+M*Z)+L),J=Us(J+M-(P*re+M*$)+B)),(r||a)&&(H=k.getBBox(),X=Us(X+r/100*H.width),J=Us(J+a/100*H.height)),H="matrix("+Q+","+re+","+Z+","+$+","+X+","+J+")",k.setAttribute("transform",H),F&&(k.style[vs]=H)},B7=function(t,n,i,r,a){var l=360,h=Bo(a),s=parseFloat(a)*(h&&~a.indexOf("rad")?op:1),p=s-r,v=r+p+"deg",x,T;return h&&(x=a.split("_")[1],x==="short"&&(p%=l,p!==p%(l/2)&&(p+=p<0?l:-l)),x==="cw"&&p<0?p=(p+l*AL)%l-~~(p/l)*l:x==="ccw"&&p>0&&(p=(p-l*AL)%l-~~(p/l)*l)),t._pt=T=new Il(t._pt,n,i,r,p,b7),T.e=v,T.u="deg",t._props.push(i),T},VL=function(t,n){for(var i in n)t[i]=n[i];return t},F7=function(t,n,i){var r=VL({},i._gsap),a="perspective,force3D,transformOrigin,svgOrigin",l=i.style,h,s,p,v,x,T,k,P;r.svg?(p=i.getAttribute("transform"),i.setAttribute("transform",""),l[vs]=n,h=yb(i,1),Rp(i,vs),i.setAttribute("transform",p)):(p=getComputedStyle(i)[vs],l[vs]=n,h=yb(i,1),l[vs]=p);for(s in ph)p=r[s],v=h[s],p!==v&&a.indexOf(s)<0&&(k=Ra(p),P=Ra(v),x=k!==P?$f(i,s,p,P):parseFloat(p),T=parseFloat(v),t._pt=new Il(t._pt,h,s,x,T-x,VC),t._pt.u=P||0,t._props.push(s));VL(h,r)};kl("padding,margin,Width,Radius",function(e,t){var n="Top",i="Right",r="Bottom",a="Left",l=(t<3?[n,i,r,a]:[n+a,n+i,r+i,r+a]).map(function(h){return t<2?e+h:"border"+h+e});$w[t>1?"border"+e:e]=function(h,s,p,v,x){var T,k;if(arguments.length<4)return T=l.map(function(P){return Yd(h,P,p)}),k=T.join(" "),k.split(T[0]).length===5?T[0]:k;T=(v+"").split(" "),k={},l.forEach(function(P,M){return k[P]=T[M]=T[M]||T[(M-1)/2|0]}),h.init(s,k,x)}});var xN={name:"css",register:FC,targetTest:function(t){return t.style&&t.nodeType},init:function(t,n,i,r,a){var l=this._props,h=t.style,s=i.vars.startAt,p,v,x,T,k,P,M,L,B,F,X,J,Q,re,Z,$;WI||FC(),this.styles=this.styles||mN(t),$=this.styles.props,this.tween=i;for(M in n)if(M!=="autoRound"&&(v=n[M],!(ql[M]&&iN(M,n,i,r,t,a)))){if(k=typeof v,P=$w[M],k==="function"&&(v=v.call(i,r,t,a),k=typeof v),k==="string"&&~v.indexOf("random(")&&(v=pb(v)),P)P(this,t,M,v,i)&&(Z=1);else if(M.substr(0,2)==="--")p=(getComputedStyle(t).getPropertyValue(M)+"").trim(),v+="",Rf.lastIndex=0,Rf.test(p)||(L=Ra(p),B=Ra(v)),B?L!==B&&(p=$f(t,M,p,B)+B):L&&(v+=L),this.add(h,"setProperty",p,v,r,a,0,0,M),l.push(M),$.push(M,0,h[M]);else if(k!=="undefined"){if(s&&M in s?(p=typeof s[M]=="function"?s[M].call(i,r,t,a):s[M],Bo(p)&&~p.indexOf("random(")&&(p=pb(p)),Ra(p+"")||p==="auto"||(p+=ic.units[M]||Ra(Yd(t,M))||""),(p+"").charAt(1)==="="&&(p=Yd(t,M))):p=Yd(t,M),T=parseFloat(p),F=k==="string"&&v.charAt(1)==="="&&v.substr(0,2),F&&(v=v.substr(2)),x=parseFloat(v),M in Wu&&(M==="autoAlpha"&&(T===1&&Yd(t,"visibility")==="hidden"&&x&&(T=0),$.push("visibility",0,h.visibility),Sf(this,h,"visibility",T?"inherit":"hidden",x?"inherit":"hidden",!x)),M!=="scale"&&M!=="transform"&&(M=Wu[M],~M.indexOf(",")&&(M=M.split(",")[0]))),X=M in ph,X){if(this.styles.save(M),k==="string"&&v.substring(0,6)==="var(--"&&(v=Mc(t,v.substring(4,v.indexOf(")"))),x=parseFloat(v)),J||(Q=t._gsap,Q.renderTransform&&!n.parseTransform||yb(t,n.parseTransform),re=n.smoothOrigin!==!1&&Q.smooth,J=this._pt=new Il(this._pt,h,vs,0,1,Q.renderTransform,Q,0,-1),J.dep=1),M==="scale")this._pt=new Il(this._pt,Q,"scaleY",Q.scaleY,(F?w_(Q.scaleY,F+x):x)-Q.scaleY||0,VC),this._pt.u=0,l.push("scaleY",M),M+="X";else if(M==="transformOrigin"){$.push(Al,0,h[Al]),v=R7(v),Q.svg?zC(t,v,0,re,0,this):(B=parseFloat(v.split(" ")[2])||0,B!==Q.zOrigin&&Sf(this,Q,"zOrigin",Q.zOrigin,B),Sf(this,h,M,jw(p),jw(v)));continue}else if(M==="svgOrigin"){zC(t,v,1,re,0,this);continue}else if(M in vN){B7(this,Q,M,T,F?w_(T,F+v):v);continue}else if(M==="smoothOrigin"){Sf(this,Q,"smooth",Q.smooth,v);continue}else if(M==="force3D"){Q[M]=v;continue}else if(M==="transform"){F7(this,v,t);continue}}else M in h||(M=B_(M)||M);if(X||(x||x===0)&&(T||T===0)&&!y7.test(v)&&M in h)L=(p+"").substr((T+"").length),x||(x=0),B=Ra(v)||(M in ic.units?ic.units[M]:L),L!==B&&(T=$f(t,M,p,B)),this._pt=new Il(this._pt,X?Q:h,M,T,(F?w_(T,F+x):x)-T,!X&&(B==="px"||M==="zIndex")&&n.autoRound!==!1?w7:VC),this._pt.u=B||0,L!==B&&B!=="%"&&(this._pt.b=p,this._pt.r=x7);else if(M in h)D7.call(this,t,M,p,F?F+v:v);else if(M in t)this.add(t,M,p||t[M],F?F+v:v,r,a);else if(M!=="parseTransform"){LI(M,v);continue}X||(M in h?$.push(M,0,h[M]):typeof t[M]=="function"?$.push(M,2,t[M]()):$.push(M,1,p||t[M])),l.push(M)}}Z&&cN(this)},render:function(t,n){if(n.tween._time||!HI())for(var i=n._pt;i;)i.r(t,i.d),i=i._next;else n.styles.revert()},get:Yd,aliases:Wu,getSetter:function(t,n,i){var r=Wu[n];return r&&r.indexOf(",")<0&&(n=r),n in ph&&n!==Al&&(t._gsap.x||Yd(t,"x"))?i&&IL===i?n==="scale"?C7:E7:(IL=i||{})&&(n==="scale"?k7:I7):t.style&&!MI(t.style[n])?T7:~n.indexOf("-")?S7:$I(t,n)},core:{_removeProperty:Rp,_getMatrix:qI}};Pl.utils.checkPrefix=B_;Pl.core.getStyleSaver=mN;(function(e,t,n,i){var r=kl(e+","+t+","+n,function(a){ph[a]=1});kl(t,function(a){ic.units[a]="deg",vN[a]=1}),Wu[r[13]]=e+","+t,kl(i,function(a){var l=a.split(":");Wu[l[1]]=r[l[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");kl("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(e){ic.units[e]="px"});Pl.registerPlugin(xN);var NC=Pl.registerPlugin(xN)||Pl;NC.core.Tween;const wN="/singatrainlogo.png",TN="singatrain-app-state";function z7(){if(typeof window>"u")return null;try{const e=window.localStorage.getItem(TN);return e?JSON.parse(e):null}catch{return null}}function EE(e){typeof window>"u"||window.localStorage.setItem(TN,JSON.stringify({favorites:e.favorites,user:e.user,darkMode:e.darkMode}))}const N7={name:"Guest User",email:"",memberSince:"",favorites:[]},CE=z7(),uo=to({activeTab:"dashboard",darkMode:CE?.darkMode??(typeof window>"u"||!window.matchMedia?!1:window.matchMedia("(prefers-color-scheme: dark)").matches),favorites:CE?.favorites??[],user:{...N7,...CE?.user||{}}});function K1(){const e=fe(()=>uo.favorites.length);function t(s){uo.activeTab=s}function n(s){uo.darkMode=s,typeof document<"u"&&document.body.classList.toggle("dark-mode",s)}function i(){n(!uo.darkMode)}function r(s){if(!s||!s.station)return;uo.favorites.some(v=>v.station===s.station&&v.label===s.label)||uo.favorites.push({...s})}function a(s){const p=uo.favorites.findIndex(v=>v.station===s);p!==-1&&uo.favorites.splice(p,1)}function l(){uo.favorites.splice(0,uo.favorites.length)}function h(s){uo.user={...uo.user,...s}}return Ht(()=>uo.darkMode,s=>{typeof document<"u"&&document.body.classList.toggle("dark-mode",s),EE(uo)},{immediate:!0}),Ht(()=>uo.favorites,()=>EE(uo),{deep:!0}),Ht(()=>uo.user,()=>EE(uo),{deep:!0}),{state:uo,favoritesCount:e,setActiveTab:t,setDarkMode:n,toggleDarkMode:i,addFavorite:r,removeFavorite:a,clearFavorites:l,updateUser:h}}const U7={class:"navbar navbar-expand-lg fixed-top premium-navbar"},$7={class:"container"},j7={class:"collapse navbar-collapse",id:"singatrainNav"},W7={class:"navbar-nav ms-auto mb-2 mb-lg-0"},H7=["onClick"],G7={class:"material-icons me-1 align-middle","aria-hidden":"true"},q7={class:"align-middle"},K7={class:"ms-lg-3 mt-3 mt-lg-0"},X7={class:"material-icons"},Z7={class:"toggle-label"},Y7={__name:"Navbar",setup(e){const t=[{key:"dashboard",label:"Dashboard",icon:"space_dashboard"},{key:"live",label:"Live Tracker",icon:"tram"},{key:"route",label:"Route Planner",icon:"alt_route"},{key:"fare",label:"Fare Calculator",icon:"payments"},{key:"meetup",label:"Meet-up",icon:"groups"},{key:"profile",label:"Profile",icon:"account_circle"},{key:"firstLast",label:"First & Last",icon:"schedule"}],{state:n,setActiveTab:i,toggleDarkMode:r}=K1();return(a,l)=>(_n(),wn("nav",U7,[N("div",$7,[N("a",{class:"navbar-brand",href:"#",onClick:l[0]||(l[0]=nh(h=>Si(i)("dashboard"),["prevent"]))},[...l[2]||(l[2]=[N("img",{src:wN,alt:"SingaTrain logo",class:"me-2",style:{height:"36px"}},null,-1),N("span",null,"SingaTrain",-1)])]),l[3]||(l[3]=N("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#singatrainNav","aria-controls":"singatrainNav","aria-expanded":"false","aria-label":"Toggle navigation"},[N("span",{class:"material-icons"},"menu")],-1)),N("div",j7,[N("ul",W7,[(_n(),wn(sn,null,As(t,h=>N("li",{key:h.key,class:"nav-item"},[N("a",{href:"#",class:Tt(["nav-link",{active:Si(n).activeTab===h.key}]),onClick:nh(s=>Si(i)(h.key),["prevent"])},[N("span",G7,an(h.icon),1),N("span",q7,an(h.label),1)],10,H7)])),64))]),N("div",K7,[N("button",{id:"themeToggle",class:Tt(["theme-toggle",{active:Si(n).darkMode}]),type:"button",onClick:l[1]||(l[1]=h=>Si(r)())},[N("span",X7,an(Si(n).darkMode?"light_mode":"dark_mode"),1),N("span",Z7,an(Si(n).darkMode?"Day Mode":"Night Mode"),1)],2)])])])]))}},J7="/MRT-Map.png",Ef={NSL:["Jurong East","Bukit Batok","Bukit Gombak","Choa Chu Kang","Yew Tee","Kranji","Marsiling","Woodlands","Admiralty","Sembawang","Canberra","Yishun","Khatib","Yio Chu Kang","Ang Mo Kio","Bishan","Braddell","Toa Payoh","Novena","Newton","Orchard","Somerset","Dhoby Ghaut","City Hall","Raffles Place","Marina Bay","Marina South Pier"],EWL:["Pasir Ris","Tampines","Simei","Tanah Merah","Bedok","Kembangan","Eunos","Paya Lebar","Aljunied","Kallang","Lavender","Bugis","City Hall","Raffles Place","Tanjong Pagar","Outram Park","Tiong Bahru","Redhill","Queenstown","Commonwealth","Buona Vista","Dover","Clementi","Jurong East","Chinese Garden","Lakeside","Boon Lay","Pioneer","Joo Koon","Gul Circle","Tuas Crescent","Tuas West Road","Tuas Link"],CGL:["Tanah Merah","Expo","Changi Airport"],DTL:["Bukit Panjang","Cashew","Hillview","Beauty World","King Albert Park","Sixth Avenue","Tan Kah Kee","Botanic Gardens","Stevens","Newton","Little India","Rochor","Bugis","Promenade","Bayfront","Downtown","Telok Ayer","Chinatown","Fort Canning","Bencoolen","Jalan Besar","Bendemeer","Geylang Bahru","Mattar","MacPherson","Ubi","Kaki Bukit","Bedok North","Bedok Reservoir","Tampines West","Tampines","Tampines East","Upper Changi","Expo"],CCL:["Dhoby Ghaut","Bras Basah","Esplanade","Promenade","Bayfront","Nicoll Highway","Stadium","Mountbatten","Dakota","Paya Lebar","MacPherson","Tai Seng","Bartley","Serangoon","Lorong Chuan","Bishan","Marymount","Caldecott","Botanic Gardens","Farrer Road","Holland Village","Buona Vista","one-north","Kent Ridge","Haw Par Villa","Pasir Panjang","Labrador Park","Telok Blangah","HarbourFront"],NEL:["HarbourFront","Outram Park","Chinatown","Clarke Quay","Dhoby Ghaut","Little India","Farrer Park","Boon Keng","Potong Pasir","Woodleigh","Serangoon","Kovan","Hougang","Buangkok","Sengkang","Punggol","Punggol Coast"],TEL:["Woodlands North","Woodlands","Woodlands South","Springleaf","Lentor","Mayflower","Bright Hill","Upper Thomson","Caldecott","Stevens","Napier","Orchard Boulevard","Orchard","Great World","Havelock","Outram Park","Maxwell","Shenton Way","Marina Bay","Gardens By The Bay","Tanjong Rhu","Katong Park","Tanjong Katong","Marine Parade","Marine Terrace","Siglap","Bayshore"],BPL:["Choa Chu Kang","South View","Keat Hong","Teck Whye","Phoenix","Bukit Panjang","Petir","Pending","Bangkit","Fajar","Segar","Jelapang","Senja"],SWPL:["Sengkang","Cheng Lim","Farmway","Kupang","Thanggam","Fernvale","Layar","Tongkang","Renjong"],SEPL:["Sengkang","Compassvale","Rumbia","Bakau","Kangkar","Ranggung"],PEPLRT:["Punggol","Cove","Meridian","Coral Edge","Riviera","Kadaloor","Oasis","Damai"],PWLRT:["Punggol","Sam Kee","Punggol Point","Samudera","Nibong","Sumang","Soo Teck"]},SN=[...new Set(Object.values(Ef).flat())].sort((e,t)=>e.localeCompare(t)),aw={"Jurong East":["North-South Line","East-West Line"],"Bukit Batok":["North-South Line"],"Bukit Gombak":["North-South Line"],"Choa Chu Kang":["North-South Line","LRT Line"],"Yew Tee":["North-South Line"],Kranji:["North-South Line"],Marsiling:["North-South Line"],Woodlands:["North-South Line","Thomson-East Coast Line"],Admiralty:["North-South Line"],Sembawang:["North-South Line"],Canberra:["North-South Line"],Yishun:["North-South Line"],Khatib:["North-South Line"],"Yio Chu Kang":["North-South Line"],"Ang Mo Kio":["North-South Line"],Bishan:["North-South Line","Circle Line"],Braddell:["North-South Line"],"Toa Payoh":["North-South Line"],Novena:["North-South Line"],Newton:["North-South Line","Downtown Line"],Orchard:["North-South Line","Thomson-East Coast Line"],Somerset:["North-South Line"],"Dhoby Ghaut":["North-South Line","North-East Line","Circle Line"],"City Hall":["North-South Line","East-West Line"],"Raffles Place":["North-South Line","East-West Line"],"Marina Bay":["North-South Line","Thomson-East Coast Line"],"Marina South Pier":["North-South Line"],"Pasir Ris":["East-West Line"],Tampines:["East-West Line","Downtown Line"],Simei:["East-West Line"],"Tanah Merah":["East-West Line"],Bedok:["East-West Line"],Kembangan:["East-West Line"],Eunos:["East-West Line"],"Paya Lebar":["East-West Line","Circle Line"],Aljunied:["East-West Line"],Kallang:["East-West Line"],Lavender:["East-West Line"],Bugis:["East-West Line","Downtown Line"],"Tanjong Pagar":["East-West Line"],"Outram Park":["East-West Line","North-East Line","Thomson-East Coast Line"],"Tiong Bahru":["East-West Line"],Redhill:["East-West Line"],Queenstown:["East-West Line"],Commonwealth:["East-West Line"],"Buona Vista":["East-West Line","Circle Line"],Dover:["East-West Line"],Clementi:["East-West Line"],"Chinese Garden":["East-West Line"],Lakeside:["East-West Line"],"Boon Lay":["East-West Line"],Pioneer:["East-West Line"],"Joo Koon":["East-West Line"],"Gul Circle":["East-West Line"],"Tuas Crescent":["East-West Line"],"Tuas West Road":["East-West Line"],"Tuas Link":["East-West Line"],Expo:["Downtown Line"],"Changi Airport":["East-West Line"],"Bukit Panjang":["Downtown Line","LRT Line"],Cashew:["Downtown Line"],Hillview:["Downtown Line"],"Beauty World":["Downtown Line"],"King Albert Park":["Downtown Line"],"Sixth Avenue":["Downtown Line"],"Tan Kah Kee":["Downtown Line"],"Botanic Gardens":["Downtown Line","Circle Line"],Stevens:["Downtown Line","Thomson-East Coast Line"],"Little India":["Downtown Line","North-East Line"],Rochor:["Downtown Line"],Promenade:["Downtown Line","Circle Line"],Bayfront:["Downtown Line","Circle Line"],Downtown:["Downtown Line"],"Telok Ayer":["Downtown Line"],Chinatown:["Downtown Line","North-East Line"],"Fort Canning":["Downtown Line"],Bencoolen:["Downtown Line"],"Jalan Besar":["Downtown Line"],Bendemeer:["Downtown Line"],"Geylang Bahru":["Downtown Line"],Mattar:["Downtown Line"],MacPherson:["Downtown Line","Circle Line"],Ubi:["Downtown Line"],"Kaki Bukit":["Downtown Line"],"Bedok North":["Downtown Line"],"Bedok Reservoir":["Downtown Line"],"Tampines West":["Downtown Line"],"Tampines East":["Downtown Line"],"Upper Changi":["Downtown Line"],"Bras Basah":["Circle Line"],Esplanade:["Circle Line"],"Nicoll Highway":["Circle Line"],Stadium:["Circle Line"],Mountbatten:["Circle Line"],Dakota:["Circle Line"],"Tai Seng":["Circle Line"],Bartley:["Circle Line"],Serangoon:["Circle Line","North-East Line"],"Lorong Chuan":["Circle Line"],Marymount:["Circle Line"],Caldecott:["Circle Line","Thomson-East Coast Line"],"Farrer Road":["Circle Line"],"Holland Village":["Circle Line"],"one-north":["Circle Line"],"Kent Ridge":["Circle Line"],"Haw Par Villa":["Circle Line"],"Pasir Panjang":["Circle Line"],"Labrador Park":["Circle Line"],"Telok Blangah":["Circle Line"],HarbourFront:["Circle Line","North-East Line"],"Clarke Quay":["North-East Line"],"Farrer Park":["North-East Line"],"Boon Keng":["North-East Line"],"Potong Pasir":["North-East Line"],Woodleigh:["North-East Line"],Kovan:["North-East Line"],Hougang:["North-East Line"],Buangkok:["North-East Line"],Sengkang:["North-East Line","LRT Line"],Punggol:["North-East Line","LRT Line"],"Punggol Coast":["North-East Line"],"Woodlands North":["Thomson-East Coast Line"],"Woodlands South":["Thomson-East Coast Line"],Springleaf:["Thomson-East Coast Line"],Lentor:["Thomson-East Coast Line"],Mayflower:["Thomson-East Coast Line"],"Bright Hill":["Thomson-East Coast Line"],"Upper Thomson":["Thomson-East Coast Line"],Napier:["Thomson-East Coast Line"],"Orchard Boulevard":["Thomson-East Coast Line"],"Great World":["Thomson-East Coast Line"],Havelock:["Thomson-East Coast Line"],Maxwell:["Thomson-East Coast Line"],"Shenton Way":["Thomson-East Coast Line"],"Gardens By The Bay":["Thomson-East Coast Line"],"Tanjong Rhu":["Thomson-East Coast Line"],"Katong Park":["Thomson-East Coast Line"],"Tanjong Katong":["Thomson-East Coast Line"],"Marine Parade":["Thomson-East Coast Line"],"Marine Terrace":["Thomson-East Coast Line"],Siglap:["Thomson-East Coast Line"],Bayshore:["Thomson-East Coast Line"],"South View":["LRT Line"],"Keat Hong":["LRT Line"],"Teck Whye":["LRT Line"],Phoenix:["LRT Line"],Petir:["LRT Line"],Pending:["LRT Line"],Bangkit:["LRT Line"],Fajar:["LRT Line"],Segar:["LRT Line"],Jelapang:["LRT Line"],Senja:["LRT Line"],"Cheng Lim":["LRT Line"],Farmway:["LRT Line"],Kupang:["LRT Line"],Thanggam:["LRT Line"],Fernvale:["LRT Line"],Layar:["LRT Line"],Tongkang:["LRT Line"],Renjong:["LRT Line"],Compassvale:["LRT Line"],Rumbia:["LRT Line"],Bakau:["LRT Line"],Kangkar:["LRT Line"],Ranggung:["LRT Line"],Cove:["LRT Line"],Meridian:["LRT Line"],"Coral Edge":["LRT Line"],Riviera:["LRT Line"],Kadaloor:["LRT Line"],Oasis:["LRT Line"],Damai:["LRT Line"],"Sam Kee":["LRT Line"],"Punggol Point":["LRT Line"],Samudera:["LRT Line"],Nibong:["LRT Line"],Sumang:["LRT Line"],"Soo Teck":["LRT Line"]},Q7={"North-South Line":"#d42e12","East-West Line":"#009645","Circle Line":"#fa9e0d","Downtown Line":"#005ec4","North-East Line":"#9900aa","Thomson-East Coast Line":"#9d5b25","Jurong Region Line":"#00a0a8","LRT Line":"#748477"},Ex=[{station:"Marina Bay",line:"North-South Line"},{station:"Paya Lebar",line:"Circle Line"},{station:"Woodlands",line:"Thomson-East Coast Line"},{station:"Dhoby Ghaut",line:"North-East Line"},{station:"Jurong East",line:"East-West Line"}],e2=5e3,t2={default:{peak:[60,180],shoulder:[120,240],offPeak:[180,360]}},BL={enabled:!0,probability:.2,checkEvery:4,durationRangeSeconds:[180,300]};function ap(e,t){return Math.floor(Math.random()*(t-e+1))+e}function n2(e,t,n){const i=e[t]||e.default,r=i[n]||i.offPeak||e.default.offPeak;return Array.isArray(r)?r:e.default.offPeak}function kE(e=new Date){const t=e.getHours();return t>=7&&t<9||t>=17&&t<20?"peak":t>=6&&t<7||t>=9&&t<11||t>=16&&t<17||t>=20&&t<22?"shoulder":"offPeak"}function IE(e,t,n,i){const[r,a]=n2(e,t,i),l=ap(r,a);return n+l}function Ww(e){return Q7[e]||"#6b7280"}function EN(e={}){const t={stationLines:aw,lineIntervals:t2,updateIntervalMs:3e4,trainsPerLine:3,delay:{...BL},...e,delay:{...BL,...e.delay||{}}},n={arrivals:{},delayFlags:{},cycles:0,intervalId:null};function i(k,P){n.arrivals[k]||(n.arrivals[k]={}),Array.isArray(n.arrivals[k][P])||(n.arrivals[k][P]=[])}function r(k,P){i(k,P);const M=n.arrivals[k][P];M.length=0;const L=kE();let B=ap(60,240);for(let F=0;F<t.trainsPerLine;F+=1)M.push(B),B=IE(t.lineIntervals,P,B,L)}function a(){Object.entries(t.stationLines).forEach(([k,P])=>{P.forEach(M=>{i(k,M);const L=n.arrivals[k][M];if(!L.length)r(k,M);else for(;L.length<t.trainsPerLine;){const B=L[L.length-1]||ap(120,480);L.push(IE(t.lineIntervals,M,B,kE()))}})})}function l(k=Date.now()){Object.keys(n.delayFlags).forEach(P=>{const M=n.delayFlags[P];M&&(Object.keys(M).forEach(L=>{M[L]<k&&delete M[L]}),Object.keys(M).length||delete n.delayFlags[P])})}function h(){if(!t.delay.enabled||n.cycles%t.delay.checkEvery!==0||Math.random()>t.delay.probability)return;const k=Object.keys(n.arrivals);if(!k.length)return;const P=k[ap(0,k.length-1)],M=Object.keys(n.arrivals[P]||{});if(!M.length)return;const L=M[ap(0,M.length-1)],B=n.arrivals[P][L];if(!B?.length)return;const[F,X]=t.delay.durationRangeSeconds,J=ap(F,X);for(let Q=0;Q<B.length;Q+=1)B[Q]+=J;n.delayFlags[P]||(n.delayFlags[P]={}),n.delayFlags[P][L]=Date.now()+J*1e3}function s(){n.cycles+=1;const k=t.updateIntervalMs/1e3;l(),Object.entries(n.arrivals).forEach(([P,M])=>{Object.entries(M).forEach(([L,B])=>{for(let F=0;F<B.length;F+=1)B[F]=Math.max(0,B[F]-k);for(;B.length&&B[0]<=0;)B.shift();for(;B.length<t.trainsPerLine;){const F=B.length?B[B.length-1]:ap(120,480);B.push(IE(t.lineIntervals,L,F,kE()))}})}),h()}function p(){a(),n.intervalId===null&&(n.intervalId=setInterval(s,t.updateIntervalMs))}function v(){n.intervalId!==null&&(clearInterval(n.intervalId),n.intervalId=null)}function x({returnSeconds:k=!1}={}){const P={};return Object.entries(n.arrivals).forEach(([M,L])=>{P[M]={},Object.entries(L).forEach(([B,F])=>{P[M][B]=F.map(X=>k?Math.max(0,Math.round(X)):Math.max(0,Math.ceil(X/60)))})}),P}function T(k){return x()[k]||{}}return{config:t,start:p,stop:v,refresh:s,getArrivals:x,getStationArrivals:T}}const i2={class:"dashboard-view"},r2={class:"hero row align-items-center gy-5"},s2={class:"col-lg-6 hero-intro","data-aos":"fade-up"},o2={class:"hero-cta"},a2={class:"live-tools mt-5","data-aos":"fade-up","data-aos-delay":"150"},l2={class:"ticker-station d-flex align-items-center gap-2"},c2={class:"ticker-line text-muted mt-1"},u2={class:"live-clock"},d2={class:"ticker-times"},h2={key:0,class:"text-muted small"},f2={class:"row g-4 mt-4"},m2={class:"col-lg-6","data-aos":"fade-up","data-aos-delay":"250"},p2={class:"section-card h-100"},g2={class:"list-unstyled mt-3"},_2={key:0,class:"text-muted"},v2={class:"fw-semibold"},y2={class:"text-muted small"},b2=["onClick"],x2={class:"col-lg-6","data-aos":"fade-up","data-aos-delay":"350"},w2={class:"section-card h-100"},FL={__name:"Dashboard",setup(e){const t=EN({updateIntervalMs:1e3}),n=to({index:0,station:Ex[0],arrivals:[],lineColor:Ww(Ex[0].line)}),i=at("--:--:--"),r=at(null),a=at(null),{state:l,setActiveTab:h,removeFavorite:s}=K1(),p=fe(()=>l.favorites);function v(k){return k<=0?"Arriving":k<60?"<1 min":`${Math.ceil(k/60)} min`}function x(k=!1){k||(n.index=(n.index+1)%Ex.length),n.station=Ex[n.index],n.lineColor=Ww(n.station.line);const P=t.getStationArrivals(n.station.station);n.arrivals=(P?.[n.station.line]||[]).slice(0,3)}function T(){const k=new Date;i.value=k.toLocaleTimeString(void 0,{hour12:!1})}return cs(()=>{t.start(),x(!0),T(),r.value=window.setInterval(()=>x(!1),e2),a.value=window.setInterval(T,1e3)}),Yr(()=>{t.stop(),r.value&&(clearInterval(r.value),r.value=null),a.value&&(clearInterval(a.value),a.value=null)}),(k,P)=>(_n(),wn("section",i2,[N("div",r2,[N("div",s2,[P[5]||(P[5]=N("h1",{class:"mb-3"},"Singapores smartest commute companion.",-1)),P[6]||(P[6]=N("p",null," Plan, monitor, and optimise every MRT journey with live arrivals, disruption-aware routing, fare insights, and collaborative meet-up tools  all in one polished interface. ",-1)),N("div",o2,[N("button",{class:"btn btn-primary px-4 py-3 hover-float",onClick:P[0]||(P[0]=M=>Si(h)("live"))},[...P[3]||(P[3]=[N("span",{class:"material-icons me-2"},"tram",-1),Jn(" Live Tracker ",-1)])]),N("button",{class:"btn btn-outline-danger px-4 py-3 hover-float",onClick:P[1]||(P[1]=M=>Si(h)("route"))},[...P[4]||(P[4]=[N("span",{class:"material-icons me-2"},"alt_route",-1),Jn(" Plan a Route ",-1)])])])]),P[7]||(P[7]=N("div",{class:"col-lg-6 hero-illustration text-center","data-aos":"fade-left"},[N("img",{src:J7,alt:"SingaTrain map illustration",class:"img-fluid rounded-4 shadow"})],-1))]),N("div",a2,[N("div",{class:"live-ticker-card w-100",style:Qt({borderColor:n.lineColor})},[N("div",null,[P[9]||(P[9]=N("div",{class:"ticker-label text-uppercase fw-semibold"},"Next arrivals",-1)),N("div",l2,[P[8]||(P[8]=N("span",{class:"material-icons text-danger"},"ev_station",-1)),N("span",null,an(n.station?.station),1)]),N("div",c2,[N("span",{class:"material-icons",style:Qt({color:n.lineColor})},"timeline",4),Jn(" "+an(n.station?.line),1)])]),N("div",u2,[N("span",null,an(i.value),1)]),N("div",d2,[(_n(!0),wn(sn,null,As(n.arrivals,(M,L)=>(_n(),wn("span",{key:L,class:"ticker-pill",style:Qt({borderColor:n.lineColor,color:n.lineColor})},[P[10]||(P[10]=N("span",{class:"material-icons"},"train",-1)),Jn(" "+an(v(M)),1)],4))),128)),n.arrivals.length?Tr("",!0):(_n(),wn("span",h2,"Fetching arrivals"))])],4)]),N("div",f2,[N("div",m2,[N("div",p2,[P[13]||(P[13]=N("h2",{class:"section-title mb-3"},"Personalised commute",-1)),P[14]||(P[14]=N("p",{class:"text-muted"}," Your favourite stations are pinned across dashboards, live tracking, and route planning for quick access wherever you roam. ",-1)),N("ul",g2,[p.value.length?Tr("",!0):(_n(),wn("li",_2,[...P[11]||(P[11]=[N("span",{class:"material-icons me-2 align-middle"},"star_border",-1),Jn(" Add favourites from the Live Tracker to see them here. ",-1)])])),(_n(!0),wn(sn,null,As(p.value,M=>(_n(),wn("li",{key:M.station,class:"d-flex align-items-center gap-3 py-2 border-bottom"},[P[12]||(P[12]=N("span",{class:"material-icons text-danger"},"star_rate",-1)),N("div",null,[N("div",v2,an(M.label||M.station),1),N("div",y2,an(M.station),1)]),N("button",{class:"btn btn-sm btn-outline-danger ms-auto",onClick:L=>Si(s)(M.station)}," Remove ",8,b2)]))),128))])])]),N("div",x2,[N("div",w2,[P[16]||(P[16]=jy('<h2 class="section-title mb-3">Whats popular now</h2><ul class="list-unstyled mb-0"><li class="d-flex align-items-center gap-3 py-2 border-bottom"><span class="material-icons text-primary">flash_on</span><div><div class="fw-semibold">Dynamic route visualiser</div><div class="text-muted small">Leaflet-powered map with transfer-aware walking times.</div></div></li><li class="d-flex align-items-center gap-3 py-2 border-bottom"><span class="material-icons text-success">insights</span><div><div class="fw-semibold">Fare insights</div><div class="text-muted small">Distance-based fares + monthly pass break-even analysis.</div></div></li><li class="d-flex align-items-center gap-3 py-2"><span class="material-icons text-warning">diversity_3</span><div><div class="fw-semibold">Meet halfway</div><div class="text-muted small">Suggests the fairest interchange for your group in seconds.</div></div></li></ul>',2)),N("button",{class:"btn btn-primary mt-3 w-100",onClick:P[2]||(P[2]=M=>Si(h)("meetup"))},[...P[15]||(P[15]=[N("span",{class:"material-icons me-2"},"groups",-1),Jn(" Try the Meet-up Planner ",-1)])])])])])]))}},T2={class:"section-card"},S2={class:"row g-3"},E2={class:"col-md-6"},C2=["value"],k2={class:"col-md-6"},I2=["value"],A2={class:"live-tools mt-4"},P2={class:"ticker-station d-flex align-items-center gap-2"},M2={class:"ticker-line text-muted mt-1"},D2={class:"material-icons"},R2={class:"ticker-times"},L2={key:0,class:"text-muted small"},O2={class:"mt-4"},V2={class:"mb-3"},B2={class:"arrival-details flex-grow-1"},F2={class:"d-flex justify-content-between align-items-center mb-2"},z2={class:"d-flex justify-content-between align-items-center"},N2={class:"d-flex align-items-center gap-2"},U2={class:"d-flex align-items-center gap-2"},$2="https://datamall2.mytransport.sg/ltaodataservice/PCDRealTime",j2={__name:"LiveTracker",setup(e){const t=EN({updateIntervalMs:1e3}),n=at(null),i="",r=at({}),a=at(0),l={"North South Line":"5:30 AM","East West Line":"5:31 AM","Circle Line":"5:32 AM","North East Line":"5:42 AM","Downtown Line":"5:33 AM","Thomson-East Coast Line":"5:30 AM"},h=Object.keys(aw),s=at(h[0]),p=at(aw[s.value][0]),v=at([]),{addFavorite:x}=K1(),T=fe(()=>aw[s.value]||[]),k=fe(()=>{const H=v.value.find(W=>W.name===p.value);return H?H.times:[]}),P=fe(()=>Ww(p.value)),M=fe(()=>{const H=k.value[0]??1/0;return H<=60?"Arriving":H<=240?"On Time":H<=420?"Slight delay":"Delayed"}),L=fe(()=>{switch(M.value){case"Arriving":return"status-arriving";case"On Time":return"status-on-time";case"Slight delay":return"status-departing";default:return"status-delayed"}}),B=fe(()=>{switch(M.value){case"Arriving":return"directions_subway";case"On Time":return"check_circle";case"Slight delay":return"schedule";default:return"error"}});function F(H){return H<=0?"Arriving":H<60?"<1 min":`${Math.ceil(H/60)} min`}async function X(){const H=Date.now();if(!(H-a.value<6e5&&Object.keys(r.value).length>0))try{const W=await fetch($2,{method:"GET",headers:{AccountKey:i,Accept:"application/json"}});if(!W.ok){console.error("Failed to fetch crowd data:",W.status);return}const te=await W.json(),Y={};te.value&&Array.isArray(te.value)&&te.value.forEach(ne=>{const Se=ne.Station;Y[Se]||(Y[Se]={}),Y[Se]=ne.CrowdLevel||"l"}),r.value=Y,a.value=H}catch(W){console.error("Error fetching crowd data:",W)}}function J(H,W){if(!Object.keys(r.value).length){const te=["l","m","h"];return te[Math.floor(Math.random()*te.length)]}return"l"}function Q(){const H=t.getArrivals({returnSeconds:!0})[s.value]||{};v.value=Object.entries(H).map(([W,te])=>({name:W,times:te,progress:te.length?Math.max(0,1-Math.min(te[0],600)/600):0,firstTrainTime:l[W]||"5:30 AM",crowdLevel:J(s.value)}))}function re(H){return{l:"Low",m:"Moderate",h:"High"}[H]||"Unknown"}function Z(H){return{l:"crowd-low",m:"crowd-moderate",h:"crowd-high"}[H]||""}function $(){x({station:s.value,label:`${s.value}  ${p.value}`})}return Ht(s,()=>{const H=T.value;H.length&&!H.includes(p.value)&&(p.value=H[0]),Q()}),Ht(p,Q),cs(()=>{t.start(),X(),Q()}),Yr(()=>{t.stop(),n.value&&(clearInterval(n.value),n.value=null)}),(H,W)=>(_n(),wn("section",T2,[N("div",{class:"d-flex flex-wrap justify-content-between align-items-center gap-3 mb-4"},[W[4]||(W[4]=N("div",null,[N("h2",{class:"section-title mb-1"},"Live Train Tracker"),N("p",{class:"text-muted mb-0"}," Simulated real-time arrivals with per-line intervals and probabilistic delays. Switch stations to monitor your regular journeys. ")],-1)),N("div",{class:"d-flex gap-2"},[N("button",{class:"btn btn-outline-danger hover-float",onClick:Q},[...W[2]||(W[2]=[N("span",{class:"material-icons me-1"},"refresh",-1),Jn(" Refresh ",-1)])]),N("button",{class:"btn btn-primary hover-float",onClick:$},[...W[3]||(W[3]=[N("span",{class:"material-icons me-1"},"star",-1),Jn(" Add Favourite ",-1)])])])]),N("div",S2,[N("div",E2,[W[5]||(W[5]=N("label",{class:"form-label"},"Station",-1)),vi(N("select",{"onUpdate:modelValue":W[0]||(W[0]=te=>s.value=te),class:"form-select"},[(_n(!0),wn(sn,null,As(Si(h),te=>(_n(),wn("option",{key:te,value:te},an(te),9,C2))),128))],512),[[lh,s.value]])]),N("div",k2,[W[6]||(W[6]=N("label",{class:"form-label"},"Line",-1)),vi(N("select",{"onUpdate:modelValue":W[1]||(W[1]=te=>p.value=te),class:"form-select"},[(_n(!0),wn(sn,null,As(T.value,te=>(_n(),wn("option",{key:te,value:te},an(te),9,I2))),128))],512),[[lh,p.value]])])]),N("div",A2,[N("div",{class:"live-ticker-card w-100",style:Qt({borderColor:P.value})},[N("div",null,[W[8]||(W[8]=N("div",{class:"ticker-label"},"Monitoring",-1)),N("div",P2,[W[7]||(W[7]=N("span",{class:"material-icons text-danger"},"location_on",-1)),N("span",null,an(s.value),1)]),N("div",M2,[N("span",{class:"material-icons",style:Qt({color:P.value})},"timeline",4),Jn(" "+an(p.value),1)])]),N("div",null,[W[9]||(W[9]=N("div",{class:"small text-muted text-uppercase fw-semibold mb-1"},"Status",-1)),N("span",{class:Tt(["status-pill",L.value])},[N("span",D2,an(B.value),1),Jn(" "+an(M.value),1)],2)]),N("div",R2,[(_n(!0),wn(sn,null,As(k.value,(te,Y)=>(_n(),wn("span",{key:Y,class:"ticker-pill",style:Qt({borderColor:P.value,color:P.value})},[W[10]||(W[10]=N("span",{class:"material-icons"},"train",-1)),Jn(" "+an(F(te)),1)],4))),128)),k.value.length?Tr("",!0):(_n(),wn("span",L2,"Awaiting updates"))])],4)]),N("div",O2,[N("h5",V2,"First Train & Crowd Level at "+an(s.value),1),(_n(!0),wn(sn,null,As(v.value,te=>(_n(),wn("div",{class:"arrival-row",key:te.name},[N("div",{class:"train-icon",style:Qt({color:Si(Ww)(te.name)})},[...W[11]||(W[11]=[N("span",{class:"material-icons"},"subway",-1)])],4),N("div",B2,[N("div",F2,[N("strong",null,an(te.name),1)]),N("div",z2,[N("div",N2,[W[12]||(W[12]=N("span",{class:"material-icons",style:{"font-size":"18px"}},"schedule",-1)),W[13]||(W[13]=N("span",{class:"small text-muted"},"First Train:",-1)),N("strong",null,an(te.firstTrainTime),1)]),N("div",U2,[W[14]||(W[14]=N("span",{class:"material-icons",style:{"font-size":"18px"}},"people",-1)),W[15]||(W[15]=N("span",{class:"small text-muted"},"Crowd:",-1)),N("span",{class:Tt(["crowd-badge",Z(te.crowdLevel)])},an(re(te.crowdLevel)),3)])])])]))),128))])]))}};var lw={exports:{}},W2=lw.exports,zL;function H2(){return zL||(zL=1,(function(e,t){var n={};(function(i,r){e.exports=r()})(W2,(function(){var i,r,a;function l(s,p){if(!i)i=p;else if(!r)r=p;else{var v="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+i+")(sharedChunk); ("+r+")(sharedChunk); self.onerror = null;",x={};i(x),a=p(x),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(a.workerUrl=window.URL.createObjectURL(new Blob([v],{type:"text/javascript"})))}}l(["exports"],(function(s){var p=typeof self<"u"?self:{},v="2.15.0";let x;const T={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(x==null){const c=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{x=n.API_URL_REGEX!=null?new RegExp(n.API_URL_REGEX):c}catch{x=c}}return x},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!T.API_URL)return null;try{const c=new URL(T.API_URL);return c.hostname==="api.mapbox.cn"?"https://events.mapbox.cn/events/v2":c.hostname==="api.mapbox.com"?"https://events.mapbox.com/events/v2":null}catch{return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},k={supported:!1,testSupport:function(c){!L&&M&&(B?F(c):P=c)}};let P,M,L=!1,B=!1;function F(c){const o=c.createTexture();c.bindTexture(c.TEXTURE_2D,o);try{if(c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,M),c.isContextLost())return;k.supported=!0}catch{}c.deleteTexture(o),L=!0}p.document&&(M=p.document.createElement("img"),M.onload=function(){P&&F(P),P=null,B=!0},M.onerror=function(){L=!0,P=null},M.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const X="01";function J(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var Q=re;function re(c,o,d,f){this.cx=3*c,this.bx=3*(d-c)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*o,this.by=3*(f-o)-this.cy,this.ay=1-this.cy-this.by,this.p1x=c,this.p1y=o,this.p2x=d,this.p2y=f}re.prototype={sampleCurveX:function(c){return((this.ax*c+this.bx)*c+this.cx)*c},sampleCurveY:function(c){return((this.ay*c+this.by)*c+this.cy)*c},sampleCurveDerivativeX:function(c){return(3*this.ax*c+2*this.bx)*c+this.cx},solveCurveX:function(c,o){if(o===void 0&&(o=1e-6),c<0)return 0;if(c>1)return 1;for(var d=c,f=0;f<8;f++){var g=this.sampleCurveX(d)-c;if(Math.abs(g)<o)return d;var b=this.sampleCurveDerivativeX(d);if(Math.abs(b)<1e-6)break;d-=g/b}var w=0,E=1;for(d=c,f=0;f<20&&(g=this.sampleCurveX(d),!(Math.abs(g-c)<o));f++)c>g?w=d:E=d,d=.5*(E-w)+w;return d},solve:function(c,o){return this.sampleCurveY(this.solveCurveX(c,o))}};var Z=J(Q),$=H;function H(c,o){this.x=c,this.y=o}H.prototype={clone:function(){return new H(this.x,this.y)},add:function(c){return this.clone()._add(c)},sub:function(c){return this.clone()._sub(c)},multByPoint:function(c){return this.clone()._multByPoint(c)},divByPoint:function(c){return this.clone()._divByPoint(c)},mult:function(c){return this.clone()._mult(c)},div:function(c){return this.clone()._div(c)},rotate:function(c){return this.clone()._rotate(c)},rotateAround:function(c,o){return this.clone()._rotateAround(c,o)},matMult:function(c){return this.clone()._matMult(c)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(c){return this.x===c.x&&this.y===c.y},dist:function(c){return Math.sqrt(this.distSqr(c))},distSqr:function(c){var o=c.x-this.x,d=c.y-this.y;return o*o+d*d},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(c){return Math.atan2(this.y-c.y,this.x-c.x)},angleWith:function(c){return this.angleWithSep(c.x,c.y)},angleWithSep:function(c,o){return Math.atan2(this.x*o-this.y*c,this.x*c+this.y*o)},_matMult:function(c){var o=c[2]*this.x+c[3]*this.y;return this.x=c[0]*this.x+c[1]*this.y,this.y=o,this},_add:function(c){return this.x+=c.x,this.y+=c.y,this},_sub:function(c){return this.x-=c.x,this.y-=c.y,this},_mult:function(c){return this.x*=c,this.y*=c,this},_div:function(c){return this.x/=c,this.y/=c,this},_multByPoint:function(c){return this.x*=c.x,this.y*=c.y,this},_divByPoint:function(c){return this.x/=c.x,this.y/=c.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var c=this.y;return this.y=this.x,this.x=-c,this},_rotate:function(c){var o=Math.cos(c),d=Math.sin(c),f=d*this.x+o*this.y;return this.x=o*this.x-d*this.y,this.y=f,this},_rotateAround:function(c,o){var d=Math.cos(c),f=Math.sin(c),g=o.y+f*(this.x-o.x)+d*(this.y-o.y);return this.x=o.x+d*(this.x-o.x)-f*(this.y-o.y),this.y=g,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},H.convert=function(c){return c instanceof H?c:Array.isArray(c)?new H(c[0],c[1]):c};var W=J($);const te=Math.PI/180,Y=180/Math.PI;function ne(c){return c*te}function Se(c){return c*Y}const Fe=[[0,0],[1,0],[1,1],[0,1]];function Ve(c){if(c<=0)return 0;if(c>=1)return 1;const o=c*c,d=o*c;return 4*(c<.5?d:3*(c-o)+d-.75)}function Ge(c,o,d,f){const g=new Z(c,o,d,f);return function(b){return g.solve(b)}}const je=Ge(.25,.1,.25,1);function Ae(c,o,d){return Math.min(d,Math.max(o,c))}function Ke(c,o,d){return(d=Ae((d-c)/(o-c),0,1))*d*(3-2*d)}function ve(c,o,d){const f=d-o,g=((c-o)%f+f)%f+o;return g===o?d:g}function Le(c,o,d){if(!c.length)return d(null,[]);let f=c.length;const g=new Array(c.length);let b=null;c.forEach(((w,E)=>{o(w,((I,D)=>{I&&(b=I),g[E]=D,--f==0&&d(b,g)}))}))}function We(c){const o=[];for(const d in c)o.push(c[d]);return o}function ct(c,...o){for(const d of o)for(const f in d)c[f]=d[f];return c}let ut=1;function rt(){return ut++}function Qe(){return(function c(o){return o?(o^Math.random()*(16>>o/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,c)})()}function Ct(c){return c<=1?1:Math.pow(2,Math.ceil(Math.log(c)/Math.LN2))}function At(c){return!!c&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(c)}function yn(c,o){c.forEach((d=>{o[d]&&(o[d]=o[d].bind(o))}))}function Mn(c,o){return c.indexOf(o,c.length-o.length)!==-1}function Ce(c,o,d){const f={};for(const g in c)f[g]=o.call(this,c[g],g,c);return f}function ze(c,o,d){const f={};for(const g in c)o.call(d||this,c[g],g,c)&&(f[g]=c[g]);return f}function Ee(c){return Array.isArray(c)?c.map(Ee):typeof c=="object"&&c?Ce(c,Ee):c}const pt={};function dt(c){pt[c]||(typeof console<"u"&&console.warn(c),pt[c]=!0)}function nt(c,o,d){return(d.y-c.y)*(o.x-c.x)>(o.y-c.y)*(d.x-c.x)}function Et(c){let o=0;for(let d,f,g=0,b=c.length,w=b-1;g<b;w=g++)d=c[g],f=c[w],o+=(f.x-d.x)*(d.y+f.y);return o}function Dt(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Ft(c){const o={};if(c.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((d,f,g,b)=>{const w=g||b;return o[f]=!w||w.toLowerCase(),""})),o["max-age"]){const d=parseInt(o["max-age"],10);isNaN(d)?delete o["max-age"]:o["max-age"]=d}return o}let Gt=null;function En(c){if(Gt==null){const o=c.navigator?c.navigator.userAgent:null;Gt=!!c.safari||!(!o||!(/\b(iPad|iPhone|iPod)\b/.test(o)||o.match("Safari")&&!o.match("Chrome")))}return Gt}function en(c){try{const o=p[c];return o.setItem("_mapbox_test_",1),o.removeItem("_mapbox_test_"),!0}catch{return!1}}function An(c,o){return[c[4*o],c[4*o+1],c[4*o+2],c[4*o+3]]}const Ln="mapbox-tiles";let Wn=500,cn=50,jt,Tn;function On(){try{return p.caches}catch{}}function ki(){On()&&!jt&&(jt=p.caches.open(Ln))}function Yi(c){const o=c.indexOf("?");if(o<0)return c;const d=(function(g){const b=g.indexOf("?");return b>0?g.slice(b+1).split("&"):[]})(c),f=d.filter((g=>{const b=g.split("=");return b[0]==="language"||b[0]==="worldview"}));return f.length?`${c.slice(0,o)}?${f.join("&")}`:c.slice(0,o)}let Ur=1/0;const bo={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(bo);class nr extends Error{constructor(o,d,f){d===401&&gt(f)&&(o+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(o),this.status=d,this.url=f}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const yr=Dt()?()=>self.worker&&self.worker.referrer:()=>(p.location.protocol==="blob:"?p.parent:p).location.href,No=function(c,o){if(!(/^file:/.test(d=c.url)||/^file:/.test(yr())&&!/^\w+:/.test(d))){if(p.fetch&&p.Request&&p.AbortController&&p.Request.prototype.hasOwnProperty("signal"))return(function(f,g){const b=new p.AbortController,w=new p.Request(f.url,{method:f.method||"GET",body:f.body,credentials:f.credentials,headers:f.headers,referrer:yr(),referrerPolicy:f.referrerPolicy,signal:b.signal});let E=!1,I=!1;const D=(z=w.url).indexOf("sku=")>0&&gt(z);var z;f.type==="json"&&w.headers.set("Accept","application/json");const j=(ie,oe,de)=>{if(I)return;if(ie&&ie.message!=="SecurityError"&&dt(ie.toString()),oe&&de)return K(oe);const xe=Date.now();p.fetch(w).then((De=>{if(De.ok){const He=D?De.clone():null;return K(De,He,xe)}return g(new nr(De.statusText,De.status,f.url))})).catch((De=>{De.name!=="AbortError"&&g(new Error(`${De.message} ${f.url}`))}))},K=(ie,oe,de)=>{(f.type==="arrayBuffer"?ie.arrayBuffer():f.type==="json"?ie.json():ie.text()).then((xe=>{I||(oe&&de&&(function(De,He,Re){if(ki(),!jt)return;const Ne={status:He.status,statusText:He.statusText,headers:new p.Headers};He.headers.forEach(((yt,_t)=>Ne.headers.set(_t,yt)));const Je=Ft(He.headers.get("Cache-Control")||"");if(Je["no-store"])return;Je["max-age"]&&Ne.headers.set("Expires",new Date(Re+1e3*Je["max-age"]).toUTCString());const Ye=Ne.headers.get("Expires");Ye&&(new Date(Ye).getTime()-Re<42e4||(function(yt,_t){if(Tn===void 0)try{new Response(new ReadableStream),Tn=!0}catch{Tn=!1}Tn?_t(yt.body):yt.blob().then(_t)})(He,(yt=>{const _t=new p.Response(yt,Ne);ki(),jt&&jt.then((Ot=>Ot.put(Yi(De.url),_t))).catch((Ot=>dt(Ot.message)))})))})(w,oe,de),E=!0,g(null,xe,ie.headers.get("Cache-Control"),ie.headers.get("Expires")))})).catch((xe=>{I||g(new Error(xe.message))}))};return D?(function(ie,oe){if(ki(),!jt)return oe(null);const de=Yi(ie.url);jt.then((xe=>{xe.match(de).then((De=>{const He=(function(Re){if(!Re)return!1;const Ne=new Date(Re.headers.get("Expires")||0),Je=Ft(Re.headers.get("Cache-Control")||"");return Ne>Date.now()&&!Je["no-cache"]})(De);xe.delete(de),He&&xe.put(de,De.clone()),oe(null,De,He)})).catch(oe)})).catch(oe)})(w,j):j(null,null),{cancel:()=>{I=!0,E||b.abort()}}})(c,o);if(Dt()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",c,o,void 0,!0)}var d;return(function(f,g){const b=new p.XMLHttpRequest;b.open(f.method||"GET",f.url,!0),f.type==="arrayBuffer"&&(b.responseType="arraybuffer");for(const w in f.headers)b.setRequestHeader(w,f.headers[w]);return f.type==="json"&&(b.responseType="text",b.setRequestHeader("Accept","application/json")),b.withCredentials=f.credentials==="include",b.onerror=()=>{g(new Error(b.statusText))},b.onload=()=>{if((b.status>=200&&b.status<300||b.status===0)&&b.response!==null){let w=b.response;if(f.type==="json")try{w=JSON.parse(b.response)}catch(E){return g(E)}g(null,w,b.getResponseHeader("Cache-Control"),b.getResponseHeader("Expires"))}else g(new nr(b.statusText,b.status,f.url))},b.send(f.body),{cancel:()=>b.abort()}})(c,o)},xo=function(c,o){return No(ct(c,{type:"arrayBuffer"}),o)};function Vc(c){const o=p.document.createElement("a");return o.href=c,o.protocol===p.document.location.protocol&&o.host===p.document.location.host}const Be="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let me,ge;me=[],ge=0;const Oe=function(c,o){if(k.supported&&(c.headers||(c.headers={}),c.headers.accept="image/webp,*/*"),ge>=T.MAX_PARALLEL_IMAGE_REQUESTS){const b={requestParameters:c,callback:o,cancelled:!1,cancel(){this.cancelled=!0}};return me.push(b),b}ge++;let d=!1;const f=()=>{if(!d)for(d=!0,ge--;me.length&&ge<T.MAX_PARALLEL_IMAGE_REQUESTS;){const b=me.shift(),{requestParameters:w,callback:E,cancelled:I}=b;I||(b.cancel=Oe(w,E).cancel)}},g=xo(c,((b,w,E,I)=>{f(),b?o(b):w&&(p.createImageBitmap?(function(D,z){const j=new p.Blob([new Uint8Array(D)],{type:"image/png"});p.createImageBitmap(j).then((K=>{z(null,K)})).catch((K=>{z(new Error(`Could not load image because of ${K.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))}))})(w,((D,z)=>o(D,z,E,I))):(function(D,z){const j=new p.Image,K=p.URL;j.onload=()=>{z(null,j),K.revokeObjectURL(j.src),j.onload=null,p.requestAnimationFrame((()=>{j.src=Be}))},j.onerror=()=>z(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const ie=new p.Blob([new Uint8Array(D)],{type:"image/png"});j.src=D.byteLength?K.createObjectURL(ie):Be})(w,((D,z)=>o(D,z,E,I))))}));return{cancel:()=>{g.cancel(),f()}}},Xe="NO_ACCESS_TOKEN";function tt(c){return c.indexOf("mapbox:")===0}function gt(c){return T.API_URL_REGEX.test(c)}function ft(c){return T.API_CDN_URL_REGEX.test(c)}function et(c){return T.API_STYLE_REGEX.test(c)&&!wt(c)}function wt(c){return T.API_SPRITE_REGEX.test(c)}const Zt=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function on(c){const o=c.match(Zt);if(!o)throw new Error("Unable to parse URL object");return{protocol:o[1],authority:o[2],path:o[3]||"/",params:o[4]?o[4].split("&"):[]}}function Yt(c){const o=c.params.length?`?${c.params.join("&")}`:"";return`${c.protocol}://${c.authority}${c.path}${o}`}const qn="mapbox.eventData";function Zn(c){if(!c)return null;const o=c.split(".");if(!o||o.length!==3)return null;try{return JSON.parse(decodeURIComponent(p.atob(o[1]).split("").map((d=>"%"+("00"+d.charCodeAt(0).toString(16)).slice(-2))).join("")))}catch{return null}}class Un{constructor(o){this.type=o,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(o){const d=Zn(T.ACCESS_TOKEN);let f="";return f=d&&d.u?p.btoa(encodeURIComponent(d.u).replace(/%([0-9A-F]{2})/g,((g,b)=>String.fromCharCode(+("0x"+b))))):T.ACCESS_TOKEN||"",o?`${qn}.${o}:${f}`:`${qn}:${f}`}fetchEventData(){const o=en("localStorage"),d=this.getStorageKey(),f=this.getStorageKey("uuid");if(o)try{const g=p.localStorage.getItem(d);g&&(this.eventData=JSON.parse(g));const b=p.localStorage.getItem(f);b&&(this.anonId=b)}catch{dt("Unable to read from LocalStorage")}}saveEventData(){const o=en("localStorage"),d=this.getStorageKey(),f=this.getStorageKey("uuid");if(o)try{p.localStorage.setItem(f,this.anonId),Object.keys(this.eventData).length>=1&&p.localStorage.setItem(d,JSON.stringify(this.eventData))}catch{dt("Unable to write to LocalStorage")}}processRequests(o){}postEvent(o,d,f,g){if(!T.EVENTS_URL)return;const b=on(T.EVENTS_URL);b.params.push(`access_token=${g||T.ACCESS_TOKEN||""}`);const w={event:this.type,created:new Date(o).toISOString()},E=d?ct(w,d):w,I={url:Yt(b),headers:{"Content-Type":"text/plain"},body:JSON.stringify([E])};this.pendingRequest=(function(D,z){return No(ct(D,{method:"POST"}),z)})(I,(D=>{this.pendingRequest=null,f(D),this.saveEventData(),this.processRequests(g)}))}queueRequest(o,d){this.queue.push(o),this.processRequests(d)}}const oi=new class extends Un{constructor(c){super("appUserTurnstile"),this._customAccessToken=c}postTurnstileEvent(c,o){T.EVENTS_URL&&T.ACCESS_TOKEN&&Array.isArray(c)&&c.some((d=>tt(d)||gt(d)))&&this.queueRequest(Date.now(),o)}processRequests(c){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const o=Zn(T.ACCESS_TOKEN),d=o?o.u:T.ACCESS_TOKEN;let f=d!==this.eventData.tokenU;At(this.anonId)||(this.anonId=Qe(),f=!0);const g=this.queue.shift();if(this.eventData.lastSuccess){const b=new Date(this.eventData.lastSuccess),w=new Date(g),E=(g-this.eventData.lastSuccess)/864e5;f=f||E>=1||E<-1||b.getDate()!==w.getDate()}else f=!0;f?this.postEvent(g,{sdkIdentifier:"mapbox-gl-js",sdkVersion:v,skuId:X,"enabled.telemetry":!1,userId:this.anonId},(b=>{b||(this.eventData.lastSuccess=g,this.eventData.tokenU=d)}),c):this.processRequests()}},Kn=oi.postTurnstileEvent.bind(oi),Pi=new class extends Un{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(c,o,d,f){this.skuToken=o,this.errorCb=f,T.EVENTS_URL&&(d||T.ACCESS_TOKEN?this.queueRequest({id:c,timestamp:Date.now()},d):this.errorCb(new Error(Xe)))}processRequests(c){if(this.pendingRequest||this.queue.length===0)return;const{id:o,timestamp:d}=this.queue.shift();o&&this.success[o]||(this.anonId||this.fetchEventData(),At(this.anonId)||(this.anonId=Qe()),this.postEvent(d,{sdkIdentifier:"mapbox-gl-js",sdkVersion:v,skuId:X,skuToken:this.skuToken,userId:this.anonId},(f=>{f?this.errorCb(f):o&&(this.success[o]=!0)}),c))}},hr=Pi.postMapLoadEvent.bind(Pi),es=new class extends Un{constructor(){super("gljs.performance")}postPerformanceEvent(c,o){T.EVENTS_URL&&(c||T.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:o},c)}processRequests(c){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:o,performanceData:d}=this.queue.shift(),f=(function(g){const b=p.performance.getEntriesByType("resource"),w=p.performance.getEntriesByType("mark"),E=(function(K){const ie={};if(K){for(const oe in K)if(oe!=="other")for(const de of K[oe]){const xe=`${oe}ResolveRangeMin`,De=`${oe}ResolveRangeMax`,He=`${oe}RequestCount`,Re=`${oe}RequestCachedCount`;ie[xe]=Math.min(ie[xe]||1/0,de.startTime),ie[De]=Math.max(ie[De]||-1/0,de.responseEnd);const Ne=Je=>{ie[Je]===void 0&&(ie[Je]=0),++ie[Je]};de.transferSize!==void 0&&de.transferSize===0&&Ne(Re),Ne(He)}}return ie})((function(K,ie){const oe={};if(K)for(const de of K){const xe=ie(de);oe[xe]===void 0&&(oe[xe]=[]),oe[xe].push(de)}return oe})(b,Vs)),I=p.devicePixelRatio,D=p.navigator.connection||p.navigator.mozConnection||p.navigator.webkitConnection,z={counters:[],metadata:[],attributes:[]},j=(K,ie,oe)=>{oe!=null&&K.push({name:ie,value:oe.toString()})};for(const K in E)j(z.counters,K,E[K]);if(g.interactionRange[0]!==1/0&&g.interactionRange[1]!==-1/0&&(j(z.counters,"interactionRangeMin",g.interactionRange[0]),j(z.counters,"interactionRangeMax",g.interactionRange[1])),w)for(const K of Object.keys($r)){const ie=$r[K],oe=w.find((de=>de.name===ie));oe&&j(z.counters,ie,oe.startTime)}return j(z.counters,"visibilityHidden",g.visibilityHidden),j(z.attributes,"style",(function(K){if(K)for(const ie of K){const oe=ie.name.split("?")[0];if(et(oe)){const de=oe.split("/").slice(-2);if(de.length===2)return`mapbox://styles/${de[0]}/${de[1]}`}}})(b)),j(z.attributes,"terrainEnabled",g.terrainEnabled?"true":"false"),j(z.attributes,"fogEnabled",g.fogEnabled?"true":"false"),j(z.attributes,"projection",g.projection),j(z.attributes,"zoom",g.zoom),j(z.metadata,"devicePixelRatio",I),j(z.metadata,"connectionEffectiveType",D?D.effectiveType:void 0),j(z.metadata,"navigatorUserAgent",p.navigator.userAgent),j(z.metadata,"screenWidth",p.screen.width),j(z.metadata,"screenHeight",p.screen.height),j(z.metadata,"windowWidth",p.innerWidth),j(z.metadata,"windowHeight",p.innerHeight),j(z.metadata,"mapWidth",g.width/I),j(z.metadata,"mapHeight",g.height/I),j(z.metadata,"webglRenderer",g.renderer),j(z.metadata,"webglVendor",g.vendor),j(z.metadata,"sdkVersion",v),j(z.metadata,"sdkIdentifier","mapbox-gl-js"),z})(d);for(const g of f.metadata);for(const g of f.counters);for(const g of f.attributes);this.postEvent(o,f,(()=>{}),c)}},br=es.postPerformanceEvent.bind(es),Uo=new class extends Un{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(c,o,d,f){if(!T.API_URL||!T.SESSION_PATH)return;const g=on(T.API_URL+T.SESSION_PATH);g.params.push(`sku=${o||""}`),g.params.push(`access_token=${f||T.ACCESS_TOKEN||""}`);const b={url:Yt(g),headers:{"Content-Type":"text/plain"}};this.pendingRequest=(function(w,E){return No(ct(w,{method:"GET"}),E)})(b,(w=>{this.pendingRequest=null,d(w),this.saveEventData(),this.processRequests(f)}))}getSessionAPI(c,o,d,f){this.skuToken=o,this.errorCb=f,T.SESSION_PATH&&T.API_URL&&(d||T.ACCESS_TOKEN?this.queueRequest({id:c,timestamp:Date.now()},d):this.errorCb(new Error(Xe)))}processRequests(c){if(this.pendingRequest||this.queue.length===0)return;const{id:o,timestamp:d}=this.queue.shift();o&&this.success[o]||this.getSession(d,this.skuToken,(f=>{f?this.errorCb(f):o&&(this.success[o]=!0)}),c)}},ts=Uo.getSessionAPI.bind(Uo),Dr=new Set,$r={create:"create",load:"load",fullLoad:"fullLoad"},ws={mark(c){p.performance.mark(c)},measure(c,o,d){p.performance.measure(c,o,d)}};function Vs(c){const o=c.name.split("?")[0];return ft(o)&&o.includes("mapbox-gl.js")?"javascript":ft(o)&&o.includes("mapbox-gl.css")?"css":(function(d){return T.API_FONTS_REGEX.test(d)})(o)?"fontRange":wt(o)?"sprite":et(o)?"style":(function(d){return T.API_TILEJSON_REGEX.test(d)})(o)?"tilejson":"other"}const Hn=p.performance;function la(c){const o=c?c.url.toString():void 0;return Hn.getEntriesByName(o)}let Ts,$o,ja,wo;const To={now:()=>ja!==void 0?ja:p.performance.now(),setNow(c){ja=c},restoreNow(){ja=void 0},frame(c){const o=p.requestAnimationFrame(c);return{cancel:()=>p.cancelAnimationFrame(o)}},getImageData(c,o=0){const{width:d,height:f}=c;wo||(wo=p.document.createElement("canvas"));const g=wo.getContext("2d",{willReadFrequently:!0});if(!g)throw new Error("failed to create canvas 2d context");return(d>wo.width||f>wo.height)&&(wo.width=d,wo.height=f),g.clearRect(-o,-o,d+2*o,f+2*o),g.drawImage(c,0,0,d,f),g.getImageData(-o,-o,d+2*o,f+2*o)},resolveURL:c=>(Ts||(Ts=p.document.createElement("a")),Ts.href=c,Ts.href),get devicePixelRatio(){return p.devicePixelRatio},get prefersReducedMotion(){return!!p.matchMedia&&($o==null&&($o=p.matchMedia("(prefers-reduced-motion: reduce)")),$o.matches)}};function Wa(c,o,d){d[c]&&d[c].indexOf(o)!==-1||(d[c]=d[c]||[],d[c].push(o))}function cc(c,o,d){if(d&&d[c]){const f=d[c].indexOf(o);f!==-1&&d[c].splice(f,1)}}class jo{constructor(o,d={}){ct(this,d),this.type=o}}class So extends jo{constructor(o,d={}){super("error",ct({error:o},d))}}class Ll{on(o,d){return this._listeners=this._listeners||{},Wa(o,d,this._listeners),this}off(o,d){return cc(o,d,this._listeners),cc(o,d,this._oneTimeListeners),this}once(o,d){return d?(this._oneTimeListeners=this._oneTimeListeners||{},Wa(o,d,this._oneTimeListeners),this):new Promise((f=>this.once(o,f)))}fire(o,d){typeof o=="string"&&(o=new jo(o,d||{}));const f=o.type;if(this.listens(f)){o.target=this;const g=this._listeners&&this._listeners[f]?this._listeners[f].slice():[];for(const E of g)E.call(this,o);const b=this._oneTimeListeners&&this._oneTimeListeners[f]?this._oneTimeListeners[f].slice():[];for(const E of b)cc(f,E,this._oneTimeListeners),E.call(this,o);const w=this._eventedParent;w&&(ct(o,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),w.fire(o))}else o instanceof So&&console.error(o.error);return this}listens(o){return!!(this._listeners&&this._listeners[o]&&this._listeners[o].length>0||this._oneTimeListeners&&this._oneTimeListeners[o]&&this._oneTimeListeners[o].length>0||this._eventedParent&&this._eventedParent.listens(o))}setEventedParent(o,d){return this._eventedParent=o,this._eventedParentData=d,this}}var Mt=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["fill-extrusion-edge-radius"]},"fill-extrusion-rounded-roof":{"type":"boolean","default":true,"requires":["fill-extrusion-edge-radius"],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":false,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function ca(c,...o){for(const d of o)for(const f in d)c[f]=d[f];return c}function Fi(c){return c instanceof Number||c instanceof String||c instanceof Boolean?c.valueOf():c}function qi(c){if(Array.isArray(c))return c.map(qi);if(c instanceof Object&&!(c instanceof Number||c instanceof String||c instanceof Boolean)){const o={};for(const d in c)o[d]=qi(c[d]);return o}return Fi(c)}class Ol extends Error{constructor(o,d){super(d),this.message=d,this.key=o}}var Bs=Ol;class uc{constructor(o,d=[]){this.parent=o,this.bindings={};for(const[f,g]of d)this.bindings[f]=g}concat(o){return new uc(this,o)}get(o){if(this.bindings[o])return this.bindings[o];if(this.parent)return this.parent.get(o);throw new Error(`${o} not found in scope.`)}has(o){return!!this.bindings[o]||!!this.parent&&this.parent.has(o)}}var Ji=uc;const ua={kind:"null"},ln={kind:"number"},Fn={kind:"string"},Xn={kind:"boolean"},fr={kind:"color"},ro={kind:"object"},ni={kind:"value"},Ar={kind:"collator"},Wo={kind:"formatted"},Gs={kind:"resolvedImage"};function Cr(c,o){return{kind:"array",itemType:c,N:o}}function zi(c){if(c.kind==="array"){const o=zi(c.itemType);return typeof c.N=="number"?`array<${o}, ${c.N}>`:c.itemType.kind==="value"?"array":`array<${o}>`}return c.kind}const fu=[ua,ln,Fn,Xn,fr,Wo,ro,Cr(ni),Gs];function Fs(c,o){if(o.kind==="error")return null;if(c.kind==="array"){if(o.kind==="array"&&(o.N===0&&o.itemType.kind==="value"||!Fs(c.itemType,o.itemType))&&(typeof c.N!="number"||c.N===o.N))return null}else{if(c.kind===o.kind)return null;if(c.kind==="value"){for(const d of fu)if(!Fs(d,o))return null}}return`Expected ${zi(c)} but found ${zi(o)} instead.`}function ol(c,o){return o.some((d=>d.kind===c.kind))}function Vl(c,o){return o.some((d=>d==="null"?c===null:d==="array"?Array.isArray(c):d==="object"?c&&!Array.isArray(c)&&typeof c=="object":d===typeof c))}var Ss,Rh={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Eo(c){return(c=Math.round(c))<0?0:c>255?255:c}function al(c){return Eo(c[c.length-1]==="%"?parseFloat(c)/100*255:parseInt(c))}function Co(c){return(o=c[c.length-1]==="%"?parseFloat(c)/100:parseFloat(c))<0?0:o>1?1:o;var o}function da(c,o,d){return d<0?d+=1:d>1&&(d-=1),6*d<1?c+(o-c)*d*6:2*d<1?o:3*d<2?c+(o-c)*(2/3-d)*6:c}try{Ss={}.parseCSSColor=function(c){var o,d=c.replace(/ /g,"").toLowerCase();if(d in Rh)return Rh[d].slice();if(d[0]==="#")return d.length===4?(o=parseInt(d.substr(1),16))>=0&&o<=4095?[(3840&o)>>4|(3840&o)>>8,240&o|(240&o)>>4,15&o|(15&o)<<4,1]:null:d.length===7&&(o=parseInt(d.substr(1),16))>=0&&o<=16777215?[(16711680&o)>>16,(65280&o)>>8,255&o,1]:null;var f=d.indexOf("("),g=d.indexOf(")");if(f!==-1&&g+1===d.length){var b=d.substr(0,f),w=d.substr(f+1,g-(f+1)).split(","),E=1;switch(b){case"rgba":if(w.length!==4)return null;E=Co(w.pop());case"rgb":return w.length!==3?null:[al(w[0]),al(w[1]),al(w[2]),E];case"hsla":if(w.length!==4)return null;E=Co(w.pop());case"hsl":if(w.length!==3)return null;var I=(parseFloat(w[0])%360+360)%360/360,D=Co(w[1]),z=Co(w[2]),j=z<=.5?z*(D+1):z+D-z*D,K=2*z-j;return[Eo(255*da(K,j,I+1/3)),Eo(255*da(K,j,I)),Eo(255*da(K,j,I-1/3)),E];default:return null}}return null}}catch{}class ns{constructor(o,d,f,g=1){this.r=o,this.g=d,this.b=f,this.a=g}static parse(o){if(!o)return;if(o instanceof ns)return o;if(typeof o!="string")return;const d=Ss(o);return d?new ns(d[0]/255*d[3],d[1]/255*d[3],d[2]/255*d[3],d[3]):void 0}toString(){const[o,d,f,g]=this.toArray();return`rgba(${Math.round(o)},${Math.round(d)},${Math.round(f)},${g})`}toArray(){const{r:o,g:d,b:f,a:g}=this;return g===0?[0,0,0,0]:[255*o/g,255*d/g,255*f/g,g]}toArray01(){const{r:o,g:d,b:f,a:g}=this;return g===0?[0,0,0,0]:[o/g,d/g,f/g,g]}toArray01PremultipliedAlpha(){const{r:o,g:d,b:f,a:g}=this;return[o,d,f,g]}}ns.black=new ns(0,0,0,1),ns.white=new ns(1,1,1,1),ns.transparent=new ns(0,0,0,0),ns.red=new ns(1,0,0,1),ns.blue=new ns(0,0,1,1);var Ni=ns;class Bc{constructor(o,d,f){this.sensitivity=o?d?"variant":"case":d?"accent":"base",this.locale=f,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(o,d){return this.collator.compare(o,d)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class ll{constructor(o,d,f,g,b){this.text=o.normalize?o.normalize():o,this.image=d,this.scale=f,this.fontStack=g,this.textColor=b}}class qr{constructor(o){this.sections=o}static fromString(o){return new qr([new ll(o,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some((o=>o.text.length!==0||o.image&&o.image.name.length!==0))}static factory(o){return o instanceof qr?o:qr.fromString(o)}toString(){return this.sections.length===0?"":this.sections.map((o=>o.text)).join("")}serialize(){const o=["format"];for(const d of this.sections){if(d.image){o.push(["image",d.image.name]);continue}o.push(d.text);const f={};d.fontStack&&(f["text-font"]=["literal",d.fontStack.split(",")]),d.scale&&(f["font-scale"]=d.scale),d.textColor&&(f["text-color"]=["rgba"].concat(d.textColor.toArray())),o.push(f)}return o}}class is{constructor(o){this.name=o.name,this.available=o.available}toString(){return this.name}static fromString(o){return o?new is({name:o,available:!1}):null}serialize(){return["image",this.name]}}function mu(c,o,d,f){return typeof c=="number"&&c>=0&&c<=255&&typeof o=="number"&&o>=0&&o<=255&&typeof d=="number"&&d>=0&&d<=255?f===void 0||typeof f=="number"&&f>=0&&f<=1?null:`Invalid rgba value [${[c,o,d,f].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof f=="number"?[c,o,d,f]:[c,o,d]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Qi(c){if(c===null||typeof c=="string"||typeof c=="boolean"||typeof c=="number"||c instanceof Ni||c instanceof Bc||c instanceof qr||c instanceof is)return!0;if(Array.isArray(c)){for(const o of c)if(!Qi(o))return!1;return!0}if(typeof c=="object"){for(const o in c)if(!Qi(c[o]))return!1;return!0}return!1}function mr(c){if(c===null)return ua;if(typeof c=="string")return Fn;if(typeof c=="boolean")return Xn;if(typeof c=="number")return ln;if(c instanceof Ni)return fr;if(c instanceof Bc)return Ar;if(c instanceof qr)return Wo;if(c instanceof is)return Gs;if(Array.isArray(c)){const o=c.length;let d;for(const f of c){const g=mr(f);if(d){if(d===g)continue;d=ni;break}d=g}return Cr(d||ni,o)}return ro}function cl(c){const o=typeof c;return c===null?"":o==="string"||o==="number"||o==="boolean"?String(c):c instanceof Ni||c instanceof qr||c instanceof is?c.toString():JSON.stringify(c)}class dc{constructor(o,d){this.type=o,this.value=d}static parse(o,d){if(o.length!==2)return d.error(`'literal' expression requires exactly one argument, but found ${o.length-1} instead.`);if(!Qi(o[1]))return d.error("invalid value");const f=o[1];let g=mr(f);const b=d.expectedType;return g.kind!=="array"||g.N!==0||!b||b.kind!=="array"||typeof b.N=="number"&&b.N!==0||(g=b),new dc(g,f)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Ni?["rgba"].concat(this.value.toArray()):this.value instanceof qr?this.value.serialize():this.value}}var ul=dc,Rr=class{constructor(c){this.name="ExpressionEvaluationError",this.message=c}toJSON(){return this.message}};const hc={string:Fn,number:ln,boolean:Xn,object:ro};class Ho{constructor(o,d){this.type=o,this.args=d}static parse(o,d){if(o.length<2)return d.error("Expected at least one argument.");let f,g=1;const b=o[0];if(b==="array"){let E,I;if(o.length>2){const D=o[1];if(typeof D!="string"||!(D in hc)||D==="object")return d.error('The item type argument of "array" must be one of string, number, boolean',1);E=hc[D],g++}else E=ni;if(o.length>3){if(o[2]!==null&&(typeof o[2]!="number"||o[2]<0||o[2]!==Math.floor(o[2])))return d.error('The length argument to "array" must be a positive integer literal',2);I=o[2],g++}f=Cr(E,I)}else f=hc[b];const w=[];for(;g<o.length;g++){const E=d.parse(o[g],g,ni);if(!E)return null;w.push(E)}return new Ho(f,w)}evaluate(o){for(let d=0;d<this.args.length;d++){const f=this.args[d].evaluate(o);if(!Fs(this.type,mr(f)))return f;if(d===this.args.length-1)throw new Rr(`Expected value to be of type ${zi(this.type)}, but found ${zi(mr(f))} instead.`)}return null}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every((o=>o.outputDefined()))}serialize(){const o=this.type,d=[o.kind];if(o.kind==="array"){const f=o.itemType;if(f.kind==="string"||f.kind==="number"||f.kind==="boolean"){d.push(f.kind);const g=o.N;(typeof g=="number"||this.args.length>1)&&d.push(g)}}return d.concat(this.args.map((f=>f.serialize())))}}var ko=Ho;class ha{constructor(o){this.type=Wo,this.sections=o}static parse(o,d){if(o.length<2)return d.error("Expected at least one argument.");const f=o[1];if(!Array.isArray(f)&&typeof f=="object")return d.error("First argument must be an image or text section.");const g=[];let b=!1;for(let w=1;w<=o.length-1;++w){const E=o[w];if(b&&typeof E=="object"&&!Array.isArray(E)){b=!1;let I=null;if(E["font-scale"]&&(I=d.parse(E["font-scale"],1,ln),!I))return null;let D=null;if(E["text-font"]&&(D=d.parse(E["text-font"],1,Cr(Fn)),!D))return null;let z=null;if(E["text-color"]&&(z=d.parse(E["text-color"],1,fr),!z))return null;const j=g[g.length-1];j.scale=I,j.font=D,j.textColor=z}else{const I=d.parse(o[w],1,ni);if(!I)return null;const D=I.type.kind;if(D!=="string"&&D!=="value"&&D!=="null"&&D!=="resolvedImage")return d.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");b=!0,g.push({content:I,scale:null,font:null,textColor:null})}}return new ha(g)}evaluate(o){return new qr(this.sections.map((d=>{const f=d.content.evaluate(o);return mr(f)===Gs?new ll("",f,null,null,null):new ll(cl(f),null,d.scale?d.scale.evaluate(o):null,d.font?d.font.evaluate(o).join(","):null,d.textColor?d.textColor.evaluate(o):null)})))}eachChild(o){for(const d of this.sections)o(d.content),d.scale&&o(d.scale),d.font&&o(d.font),d.textColor&&o(d.textColor)}outputDefined(){return!1}serialize(){const o=["format"];for(const d of this.sections){o.push(d.content.serialize());const f={};d.scale&&(f["font-scale"]=d.scale.serialize()),d.font&&(f["text-font"]=d.font.serialize()),d.textColor&&(f["text-color"]=d.textColor.serialize()),o.push(f)}return o}}class fa{constructor(o){this.type=Gs,this.input=o}static parse(o,d){if(o.length!==2)return d.error("Expected two arguments.");const f=d.parse(o[1],1,Fn);return f?new fa(f):d.error("No image name provided.")}evaluate(o){const d=this.input.evaluate(o),f=is.fromString(d);return f&&o.availableImages&&(f.available=o.availableImages.indexOf(d)>-1),f}eachChild(o){o(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const dd={"to-boolean":Xn,"to-color":fr,"to-number":ln,"to-string":Fn};class Ha{constructor(o,d){this.type=o,this.args=d}static parse(o,d){if(o.length<2)return d.error("Expected at least one argument.");const f=o[0];if((f==="to-boolean"||f==="to-string")&&o.length!==2)return d.error("Expected one argument.");const g=dd[f],b=[];for(let w=1;w<o.length;w++){const E=d.parse(o[w],w,ni);if(!E)return null;b.push(E)}return new Ha(g,b)}evaluate(o){if(this.type.kind==="boolean")return!!this.args[0].evaluate(o);if(this.type.kind==="color"){let d,f;for(const g of this.args){if(d=g.evaluate(o),f=null,d instanceof Ni)return d;if(typeof d=="string"){const b=o.parseColor(d);if(b)return b}else if(Array.isArray(d)&&(f=d.length<3||d.length>4?`Invalid rbga value ${JSON.stringify(d)}: expected an array containing either three or four numeric values.`:mu(d[0],d[1],d[2],d[3]),!f))return new Ni(d[0]/255,d[1]/255,d[2]/255,d[3])}throw new Rr(f||`Could not parse color from value '${typeof d=="string"?d:String(JSON.stringify(d))}'`)}if(this.type.kind==="number"){let d=null;for(const f of this.args){if(d=f.evaluate(o),d===null)return 0;const g=Number(d);if(!isNaN(g))return g}throw new Rr(`Could not convert ${JSON.stringify(d)} to number.`)}return this.type.kind==="formatted"?qr.fromString(cl(this.args[0].evaluate(o))):this.type.kind==="resolvedImage"?is.fromString(cl(this.args[0].evaluate(o))):cl(this.args[0].evaluate(o))}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every((o=>o.outputDefined()))}serialize(){if(this.type.kind==="formatted")return new ha([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new fa(this.args[0]).serialize();const o=[`to-${this.type.kind}`];return this.eachChild((d=>{o.push(d.serialize())})),o}}var Go=Ha;const Io=["Unknown","Point","LineString","Polygon"];var Bl=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Io[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const c=this.featureDistanceData.center,o=this.featureDistanceData.scale,{x:d,y:f}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(d*o-c[0])+this.featureDistanceData.bearing[1]*(f*o-c[1])}return 0}parseColor(c){let o=this._parseColorCache[c];return o||(o=this._parseColorCache[c]=Ni.parse(c)),o}};class Ao{constructor(o,d,f,g){this.name=o,this.type=d,this._evaluate=f,this.args=g}evaluate(o){return this._evaluate(o,this.args)}eachChild(o){this.args.forEach(o)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map((o=>o.serialize())))}static parse(o,d){const f=o[0],g=Ao.definitions[f];if(!g)return d.error(`Unknown expression "${f}". If you wanted a literal array, use ["literal", [...]].`,0);const b=Array.isArray(g)?g[0]:g.type,w=Array.isArray(g)?[[g[1],g[2]]]:g.overloads,E=w.filter((([D])=>!Array.isArray(D)||D.length===o.length-1));let I=null;for(const[D,z]of E){I=new pn(d.registry,d.path,null,d.scope);const j=[];let K=!1;for(let ie=1;ie<o.length;ie++){const oe=o[ie],de=Array.isArray(D)?D[ie-1]:D.type,xe=I.parse(oe,1+j.length,de);if(!xe){K=!0;break}j.push(xe)}if(!K)if(Array.isArray(D)&&D.length!==j.length)I.error(`Expected ${D.length} arguments, but found ${j.length} instead.`);else{for(let ie=0;ie<j.length;ie++){const oe=Array.isArray(D)?D[ie]:D.type,de=j[ie];I.concat(ie+1).checkSubtype(oe,de.type)}if(I.errors.length===0)return new Ao(f,b,z,j)}}if(E.length===1)d.errors.push(...I.errors);else{const D=(E.length?E:w).map((([j])=>{return K=j,Array.isArray(K)?`(${K.map(zi).join(", ")})`:`(${zi(K.type)}...)`;var K})).join(" | "),z=[];for(let j=1;j<o.length;j++){const K=d.parse(o[j],1+z.length);if(!K)return null;z.push(zi(K.type))}d.error(`Expected arguments of type ${D}, but found (${z.join(", ")}) instead.`)}return null}static register(o,d){Ao.definitions=d;for(const f in d)o[f]=Ao}}var ma=Ao;class pa{constructor(o,d,f){this.type=Ar,this.locale=f,this.caseSensitive=o,this.diacriticSensitive=d}static parse(o,d){if(o.length!==2)return d.error("Expected one argument.");const f=o[1];if(typeof f!="object"||Array.isArray(f))return d.error("Collator options argument must be an object.");const g=d.parse(f["case-sensitive"]!==void 0&&f["case-sensitive"],1,Xn);if(!g)return null;const b=d.parse(f["diacritic-sensitive"]!==void 0&&f["diacritic-sensitive"],1,Xn);if(!b)return null;let w=null;return f.locale&&(w=d.parse(f.locale,1,Fn),!w)?null:new pa(g,b,w)}evaluate(o){return new Bc(this.caseSensitive.evaluate(o),this.diacriticSensitive.evaluate(o),this.locale?this.locale.evaluate(o):null)}eachChild(o){o(this.caseSensitive),o(this.diacriticSensitive),this.locale&&o(this.locale)}outputDefined(){return!1}serialize(){const o={};return o["case-sensitive"]=this.caseSensitive.serialize(),o["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(o.locale=this.locale.serialize()),["collator",o]}}const qo=8192;function fc(c,o){c[0]=Math.min(c[0],o[0]),c[1]=Math.min(c[1],o[1]),c[2]=Math.max(c[2],o[0]),c[3]=Math.max(c[3],o[1])}function Ga(c,o){return!(c[0]<=o[0]||c[2]>=o[2]||c[1]<=o[1]||c[3]>=o[3])}function dl(c,o){const d=(180+c[0])/360,f=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c[1]*Math.PI/360)))/360,g=Math.pow(2,o.z);return[Math.round(d*g*qo),Math.round(f*g*qo)]}function Fc(c,o,d){const f=c[0]-o[0],g=c[1]-o[1],b=c[0]-d[0],w=c[1]-d[1];return f*w-b*g==0&&f*b<=0&&g*w<=0}function hl(c,o){let d=!1;for(let w=0,E=o.length;w<E;w++){const I=o[w];for(let D=0,z=I.length;D<z-1;D++){if(Fc(c,I[D],I[D+1]))return!1;(g=I[D])[1]>(f=c)[1]!=(b=I[D+1])[1]>f[1]&&f[0]<(b[0]-g[0])*(f[1]-g[1])/(b[1]-g[1])+g[0]&&(d=!d)}}var f,g,b;return d}function pu(c,o){for(let d=0;d<o.length;d++)if(hl(c,o[d]))return!0;return!1}function gu(c,o,d,f){const g=f[0]-d[0],b=f[1]-d[1],w=(c[0]-d[0])*b-g*(c[1]-d[1]),E=(o[0]-d[0])*b-g*(o[1]-d[1]);return w>0&&E<0||w<0&&E>0}function so(c,o,d){for(const D of d)for(let z=0;z<D.length-1;++z)if((E=[(w=D[z+1])[0]-(b=D[z])[0],w[1]-b[1]])[0]*(I=[(g=o)[0]-(f=c)[0],g[1]-f[1]])[1]-E[1]*I[0]!=0&&gu(f,g,b,w)&&gu(b,w,f,g))return!0;var f,g,b,w,E,I;return!1}function wi(c,o){for(let d=0;d<c.length;++d)if(!hl(c[d],o))return!1;for(let d=0;d<c.length-1;++d)if(so(c[d],c[d+1],o))return!1;return!0}function zc(c,o){for(let d=0;d<o.length;d++)if(wi(c,o[d]))return!0;return!1}function _u(c,o,d){const f=[];for(let g=0;g<c.length;g++){const b=[];for(let w=0;w<c[g].length;w++){const E=dl(c[g][w],d);fc(o,E),b.push(E)}f.push(b)}return f}function hd(c,o,d){const f=[];for(let g=0;g<c.length;g++){const b=_u(c[g],o,d);f.push(b)}return f}function fl(c,o,d,f){if(c[0]<d[0]||c[0]>d[2]){const g=.5*f;let b=c[0]-d[0]>g?-f:d[0]-c[0]>g?f:0;b===0&&(b=c[0]-d[2]>g?-f:d[2]-c[0]>g?f:0),c[0]+=b}fc(o,c)}function zs(c,o,d,f){const g=Math.pow(2,f.z)*qo,b=[f.x*qo,f.y*qo],w=[];if(!c)return w;for(const E of c)for(const I of E){const D=[I.x+b[0],I.y+b[1]];fl(D,o,d,g),w.push(D)}return w}function Nc(c,o,d,f){const g=Math.pow(2,f.z)*qo,b=[f.x*qo,f.y*qo],w=[];if(!c)return w;for(const I of c){const D=[];for(const z of I){const j=[z.x+b[0],z.y+b[1]];fc(o,j),D.push(j)}w.push(D)}if(o[2]-o[0]<=g/2){(E=o)[0]=E[1]=1/0,E[2]=E[3]=-1/0;for(const I of w)for(const D of I)fl(D,o,d,g)}var E;return w}class oo{constructor(o,d){this.type=Xn,this.geojson=o,this.geometries=d}static parse(o,d){if(o.length!==2)return d.error(`'within' expression requires exactly one argument, but found ${o.length-1} instead.`);if(Qi(o[1])){const f=o[1];if(f.type==="FeatureCollection")for(let g=0;g<f.features.length;++g){const b=f.features[g].geometry.type;if(b==="Polygon"||b==="MultiPolygon")return new oo(f,f.features[g].geometry)}else if(f.type==="Feature"){const g=f.geometry.type;if(g==="Polygon"||g==="MultiPolygon")return new oo(f,f.geometry)}else if(f.type==="Polygon"||f.type==="MultiPolygon")return new oo(f,f)}return d.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(o){if(o.geometry()!=null&&o.canonicalID()!=null){if(o.geometryType()==="Point")return(function(d,f){const g=[1/0,1/0,-1/0,-1/0],b=[1/0,1/0,-1/0,-1/0],w=d.canonicalID();if(!w)return!1;if(f.type==="Polygon"){const E=_u(f.coordinates,b,w),I=zs(d.geometry(),g,b,w);if(!Ga(g,b))return!1;for(const D of I)if(!hl(D,E))return!1}if(f.type==="MultiPolygon"){const E=hd(f.coordinates,b,w),I=zs(d.geometry(),g,b,w);if(!Ga(g,b))return!1;for(const D of I)if(!pu(D,E))return!1}return!0})(o,this.geometries);if(o.geometryType()==="LineString")return(function(d,f){const g=[1/0,1/0,-1/0,-1/0],b=[1/0,1/0,-1/0,-1/0],w=d.canonicalID();if(!w)return!1;if(f.type==="Polygon"){const E=_u(f.coordinates,b,w),I=Nc(d.geometry(),g,b,w);if(!Ga(g,b))return!1;for(const D of I)if(!wi(D,E))return!1}if(f.type==="MultiPolygon"){const E=hd(f.coordinates,b,w),I=Nc(d.geometry(),g,b,w);if(!Ga(g,b))return!1;for(const D of I)if(!zc(D,E))return!1}return!0})(o,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var Ko=oo;function A(c){if(c instanceof ma&&(c.name==="get"&&c.args.length===1||c.name==="feature-state"||c.name==="has"&&c.args.length===1||c.name==="properties"||c.name==="geometry-type"||c.name==="id"||/^filter-/.test(c.name))||c instanceof Ko)return!1;let o=!0;return c.eachChild((d=>{o&&!A(d)&&(o=!1)})),o}function ee(c){if(c instanceof ma&&c.name==="feature-state")return!1;let o=!0;return c.eachChild((d=>{o&&!ee(d)&&(o=!1)})),o}function ue(c,o){if(c instanceof ma&&o.indexOf(c.name)>=0)return!1;let d=!0;return c.eachChild((f=>{d&&!ue(f,o)&&(d=!1)})),d}class Pe{constructor(o,d){this.type=d.type,this.name=o,this.boundExpression=d}static parse(o,d){if(o.length!==2||typeof o[1]!="string")return d.error("'var' expression requires exactly one string literal argument.");const f=o[1];return d.scope.has(f)?new Pe(f,d.scope.get(f)):d.error(`Unknown variable "${f}". Make sure "${f}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(o){return this.boundExpression.evaluate(o)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var bt=Pe;class Pt{constructor(o,d=[],f,g=new Ji,b=[]){this.registry=o,this.path=d,this.key=d.map((w=>`[${w}]`)).join(""),this.scope=g,this.errors=b,this.expectedType=f}parse(o,d,f,g,b={}){return d?this.concat(d,f,g)._parse(o,b):this._parse(o,b)}_parse(o,d){function f(g,b,w){return w==="assert"?new ko(b,[g]):w==="coerce"?new Go(b,[g]):g}if(o!==null&&typeof o!="string"&&typeof o!="boolean"&&typeof o!="number"||(o=["literal",o]),Array.isArray(o)){if(o.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const g=o[0];if(typeof g!="string")return this.error(`Expression name must be a string, but found ${typeof g} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const b=this.registry[g];if(b){let w=b.parse(o,this);if(!w)return null;if(this.expectedType){const E=this.expectedType,I=w.type;if(E.kind!=="string"&&E.kind!=="number"&&E.kind!=="boolean"&&E.kind!=="object"&&E.kind!=="array"||I.kind!=="value")if(E.kind!=="color"&&E.kind!=="formatted"&&E.kind!=="resolvedImage"||I.kind!=="value"&&I.kind!=="string"){if(this.checkSubtype(E,I))return null}else w=f(w,E,d.typeAnnotation||"coerce");else w=f(w,E,d.typeAnnotation||"assert")}if(!(w instanceof ul)&&w.type.kind!=="resolvedImage"&&ui(w)){const E=new Bl;try{w=new ul(w.type,w.evaluate(E))}catch(I){return this.error(I.message),null}}return w}return this.error(`Unknown expression "${g}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(o===void 0?"'undefined' value invalid. Use null instead.":typeof o=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof o} instead.`)}concat(o,d,f){const g=typeof o=="number"?this.path.concat(o):this.path,b=f?this.scope.concat(f):this.scope;return new Pt(this.registry,g,d||null,b,this.errors)}error(o,...d){const f=`${this.key}${d.map((g=>`[${g}]`)).join("")}`;this.errors.push(new Bs(f,o))}checkSubtype(o,d){const f=Fs(o,d);return f&&this.error(f),f}}var pn=Pt;function ui(c){if(c instanceof bt)return ui(c.boundExpression);if(c instanceof ma&&c.name==="error"||c instanceof pa||c instanceof Ko)return!1;const o=c instanceof Go||c instanceof ko;let d=!0;return c.eachChild((f=>{d=o?d&&ui(f):d&&f instanceof ul})),!!d&&A(c)&&ue(c,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function Pr(c,o){const d=c.length-1;let f,g,b=0,w=d,E=0;for(;b<=w;)if(E=Math.floor((b+w)/2),f=c[E],g=c[E+1],f<=o){if(E===d||o<g)return E;b=E+1}else{if(!(f>o))throw new Rr("Input is not a number.");w=E-1}return 0}class Ti{constructor(o,d,f){this.type=o,this.input=d,this.labels=[],this.outputs=[];for(const[g,b]of f)this.labels.push(g),this.outputs.push(b)}static parse(o,d){if(o.length-1<4)return d.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if((o.length-1)%2!=0)return d.error("Expected an even number of arguments.");const f=d.parse(o[1],1,ln);if(!f)return null;const g=[];let b=null;d.expectedType&&d.expectedType.kind!=="value"&&(b=d.expectedType);for(let w=1;w<o.length;w+=2){const E=w===1?-1/0:o[w],I=o[w+1],D=w,z=w+1;if(typeof E!="number")return d.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',D);if(g.length&&g[g.length-1][0]>=E)return d.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',D);const j=d.parse(I,z,b);if(!j)return null;b=b||j.type,g.push([E,j])}return new Ti(b,f,g)}evaluate(o){const d=this.labels,f=this.outputs;if(d.length===1)return f[0].evaluate(o);const g=this.input.evaluate(o);if(g<=d[0])return f[0].evaluate(o);const b=d.length;return g>=d[b-1]?f[b-1].evaluate(o):f[Pr(d,g)].evaluate(o)}eachChild(o){o(this.input);for(const d of this.outputs)o(d)}outputDefined(){return this.outputs.every((o=>o.outputDefined()))}serialize(){const o=["step",this.input.serialize()];for(let d=0;d<this.labels.length;d++)d>0&&o.push(this.labels[d]),o.push(this.outputs[d].serialize());return o}}var ir=Ti;function Yn(c,o,d){return c*(1-d)+o*d}var qs=Object.freeze({__proto__:null,array:function(c,o,d){return c.map(((f,g)=>Yn(f,o[g],d)))},color:function(c,o,d){return new Ni(Yn(c.r,o.r,d),Yn(c.g,o.g,d),Yn(c.b,o.b,d),Yn(c.a,o.a,d))},number:Yn});const qa=.95047,ga=1.08883,Uc=4/29,Ka=6/29,hm=3*Ka*Ka,yv=Ka*Ka*Ka,bv=Math.PI/180,xv=180/Math.PI;function Xo(c){return c>yv?Math.pow(c,1/3):c/hm+Uc}function Lh(c){return c>Ka?c*c*c:hm*(c-Uc)}function Oh(c){return 255*(c<=.0031308?12.92*c:1.055*Math.pow(c,1/2.4)-.055)}function fd(c){return(c/=255)<=.04045?c/12.92:Math.pow((c+.055)/1.055,2.4)}function ug(c){const o=fd(c.r),d=fd(c.g),f=fd(c.b),g=Xo((.4124564*o+.3575761*d+.1804375*f)/qa),b=Xo((.2126729*o+.7151522*d+.072175*f)/1);return{l:116*b-16,a:500*(g-b),b:200*(b-Xo((.0193339*o+.119192*d+.9503041*f)/ga)),alpha:c.a}}function dg(c){let o=(c.l+16)/116,d=isNaN(c.a)?o:o+c.a/500,f=isNaN(c.b)?o:o-c.b/200;return o=1*Lh(o),d=qa*Lh(d),f=ga*Lh(f),new Ni(Oh(3.2404542*d-1.5371385*o-.4985314*f),Oh(-.969266*d+1.8760108*o+.041556*f),Oh(.0556434*d-.2040259*o+1.0572252*f),c.alpha)}function hg(c,o,d){const f=o-c;return c+d*(f>180||f<-180?f-360*Math.round(f/360):f)}const mc={forward:ug,reverse:dg,interpolate:function(c,o,d){return{l:Yn(c.l,o.l,d),a:Yn(c.a,o.a,d),b:Yn(c.b,o.b,d),alpha:Yn(c.alpha,o.alpha,d)}}},vu={forward:function(c){const{l:o,a:d,b:f}=ug(c),g=Math.atan2(f,d)*xv;return{h:g<0?g+360:g,c:Math.sqrt(d*d+f*f),l:o,alpha:c.a}},reverse:function(c){const o=c.h*bv,d=c.c;return dg({l:c.l,a:Math.cos(o)*d,b:Math.sin(o)*d,alpha:c.alpha})},interpolate:function(c,o,d){return{h:hg(c.h,o.h,d),c:Yn(c.c,o.c,d),l:Yn(c.l,o.l,d),alpha:Yn(c.alpha,o.alpha,d)}}};var fm=Object.freeze({__proto__:null,hcl:vu,lab:mc});class yu{constructor(o,d,f,g,b){this.type=o,this.operator=d,this.interpolation=f,this.input=g,this.labels=[],this.outputs=[];for(const[w,E]of b)this.labels.push(w),this.outputs.push(E)}static interpolationFactor(o,d,f,g){let b=0;if(o.name==="exponential")b=mm(d,o.base,f,g);else if(o.name==="linear")b=mm(d,1,f,g);else if(o.name==="cubic-bezier"){const w=o.controlPoints;b=new Z(w[0],w[1],w[2],w[3]).solve(mm(d,1,f,g))}return b}static parse(o,d){let[f,g,b,...w]=o;if(!Array.isArray(g)||g.length===0)return d.error("Expected an interpolation type expression.",1);if(g[0]==="linear")g={name:"linear"};else if(g[0]==="exponential"){const D=g[1];if(typeof D!="number")return d.error("Exponential interpolation requires a numeric base.",1,1);g={name:"exponential",base:D}}else{if(g[0]!=="cubic-bezier")return d.error(`Unknown interpolation type ${String(g[0])}`,1,0);{const D=g.slice(1);if(D.length!==4||D.some((z=>typeof z!="number"||z<0||z>1)))return d.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);g={name:"cubic-bezier",controlPoints:D}}}if(o.length-1<4)return d.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if((o.length-1)%2!=0)return d.error("Expected an even number of arguments.");if(b=d.parse(b,2,ln),!b)return null;const E=[];let I=null;f==="interpolate-hcl"||f==="interpolate-lab"?I=fr:d.expectedType&&d.expectedType.kind!=="value"&&(I=d.expectedType);for(let D=0;D<w.length;D+=2){const z=w[D],j=w[D+1],K=D+3,ie=D+4;if(typeof z!="number")return d.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',K);if(E.length&&E[E.length-1][0]>=z)return d.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',K);const oe=d.parse(j,ie,I);if(!oe)return null;I=I||oe.type,E.push([z,oe])}return I.kind==="number"||I.kind==="color"||I.kind==="array"&&I.itemType.kind==="number"&&typeof I.N=="number"?new yu(I,f,g,b,E):d.error(`Type ${zi(I)} is not interpolatable.`)}evaluate(o){const d=this.labels,f=this.outputs;if(d.length===1)return f[0].evaluate(o);const g=this.input.evaluate(o);if(g<=d[0])return f[0].evaluate(o);const b=d.length;if(g>=d[b-1])return f[b-1].evaluate(o);const w=Pr(d,g),E=yu.interpolationFactor(this.interpolation,g,d[w],d[w+1]),I=f[w].evaluate(o),D=f[w+1].evaluate(o);return this.operator==="interpolate"?qs[this.type.kind.toLowerCase()](I,D,E):this.operator==="interpolate-hcl"?vu.reverse(vu.interpolate(vu.forward(I),vu.forward(D),E)):mc.reverse(mc.interpolate(mc.forward(I),mc.forward(D),E))}eachChild(o){o(this.input);for(const d of this.outputs)o(d)}outputDefined(){return this.outputs.every((o=>o.outputDefined()))}serialize(){let o;o=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const d=[this.operator,o,this.input.serialize()];for(let f=0;f<this.labels.length;f++)d.push(this.labels[f],this.outputs[f].serialize());return d}}function mm(c,o,d,f){const g=f-d,b=c-d;return g===0?0:o===1?b/g:(Math.pow(o,b)-1)/(Math.pow(o,g)-1)}var ml=yu;class md{constructor(o,d){this.type=o,this.args=d}static parse(o,d){if(o.length<2)return d.error("Expectected at least one argument.");let f=null;const g=d.expectedType;g&&g.kind!=="value"&&(f=g);const b=[];for(const E of o.slice(1)){const I=d.parse(E,1+b.length,f,void 0,{typeAnnotation:"omit"});if(!I)return null;f=f||I.type,b.push(I)}const w=g&&b.some((E=>Fs(g,E.type)));return new md(w?ni:f,b)}evaluate(o){let d,f=null,g=0;for(const b of this.args){if(g++,f=b.evaluate(o),f&&f instanceof is&&!f.available&&(d||(d=f),f=null,g===this.args.length))return d;if(f!==null)break}return f}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every((o=>o.outputDefined()))}serialize(){const o=["coalesce"];return this.eachChild((d=>{o.push(d.serialize())})),o}}var Vh=md;class pd{constructor(o,d){this.type=d.type,this.bindings=[].concat(o),this.result=d}evaluate(o){return this.result.evaluate(o)}eachChild(o){for(const d of this.bindings)o(d[1]);o(this.result)}static parse(o,d){if(o.length<4)return d.error(`Expected at least 3 arguments, but found ${o.length-1} instead.`);const f=[];for(let b=1;b<o.length-1;b+=2){const w=o[b];if(typeof w!="string")return d.error(`Expected string, but found ${typeof w} instead.`,b);if(/[^a-zA-Z0-9_]/.test(w))return d.error("Variable names must contain only alphanumeric characters or '_'.",b);const E=d.parse(o[b+1],b+1);if(!E)return null;f.push([w,E])}const g=d.parse(o[o.length-1],o.length-1,d.expectedType,f);return g?new pd(f,g):null}outputDefined(){return this.result.outputDefined()}serialize(){const o=["let"];for(const[d,f]of this.bindings)o.push(d,f.serialize());return o.push(this.result.serialize()),o}}var gd=pd;class Bh{constructor(o,d,f){this.type=o,this.index=d,this.input=f}static parse(o,d){if(o.length!==3)return d.error(`Expected 2 arguments, but found ${o.length-1} instead.`);const f=d.parse(o[1],1,ln),g=d.parse(o[2],2,Cr(d.expectedType||ni));return f&&g?new Bh(g.type.itemType,f,g):null}evaluate(o){const d=this.index.evaluate(o),f=this.input.evaluate(o);if(d<0)throw new Rr(`Array index out of bounds: ${d} < 0.`);if(d>=f.length)throw new Rr(`Array index out of bounds: ${d} > ${f.length-1}.`);if(d!==Math.floor(d))throw new Rr(`Array index must be an integer, but found ${d} instead.`);return f[d]}eachChild(o){o(this.index),o(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var pm=Bh;class Po{constructor(o,d){this.type=Xn,this.needle=o,this.haystack=d}static parse(o,d){if(o.length!==3)return d.error(`Expected 2 arguments, but found ${o.length-1} instead.`);const f=d.parse(o[1],1,ni),g=d.parse(o[2],2,ni);return f&&g?ol(f.type,[Xn,Fn,ln,ua,ni])?new Po(f,g):d.error(`Expected first argument to be of type boolean, string, number or null, but found ${zi(f.type)} instead`):null}evaluate(o){const d=this.needle.evaluate(o),f=this.haystack.evaluate(o);if(f==null)return!1;if(!Vl(d,["boolean","string","number","null"]))throw new Rr(`Expected first argument to be of type boolean, string, number or null, but found ${zi(mr(d))} instead.`);if(!Vl(f,["string","array"]))throw new Rr(`Expected second argument to be of type array or string, but found ${zi(mr(f))} instead.`);return f.indexOf(d)>=0}eachChild(o){o(this.needle),o(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var Fh=Po;class _d{constructor(o,d,f){this.type=ln,this.needle=o,this.haystack=d,this.fromIndex=f}static parse(o,d){if(o.length<=2||o.length>=5)return d.error(`Expected 3 or 4 arguments, but found ${o.length-1} instead.`);const f=d.parse(o[1],1,ni),g=d.parse(o[2],2,ni);if(!f||!g)return null;if(!ol(f.type,[Xn,Fn,ln,ua,ni]))return d.error(`Expected first argument to be of type boolean, string, number or null, but found ${zi(f.type)} instead`);if(o.length===4){const b=d.parse(o[3],3,ln);return b?new _d(f,g,b):null}return new _d(f,g)}evaluate(o){const d=this.needle.evaluate(o),f=this.haystack.evaluate(o);if(!Vl(d,["boolean","string","number","null"]))throw new Rr(`Expected first argument to be of type boolean, string, number or null, but found ${zi(mr(d))} instead.`);if(!Vl(f,["string","array"]))throw new Rr(`Expected second argument to be of type array or string, but found ${zi(mr(f))} instead.`);if(this.fromIndex){const g=this.fromIndex.evaluate(o);return f.indexOf(d,g)}return f.indexOf(d)}eachChild(o){o(this.needle),o(this.haystack),this.fromIndex&&o(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const o=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),o]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var gm=_d;class zh{constructor(o,d,f,g,b,w){this.inputType=o,this.type=d,this.input=f,this.cases=g,this.outputs=b,this.otherwise=w}static parse(o,d){if(o.length<5)return d.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if(o.length%2!=1)return d.error("Expected an even number of arguments.");let f,g;d.expectedType&&d.expectedType.kind!=="value"&&(g=d.expectedType);const b={},w=[];for(let D=2;D<o.length-1;D+=2){let z=o[D];const j=o[D+1];Array.isArray(z)||(z=[z]);const K=d.concat(D);if(z.length===0)return K.error("Expected at least one branch label.");for(const oe of z){if(typeof oe!="number"&&typeof oe!="string")return K.error("Branch labels must be numbers or strings.");if(typeof oe=="number"&&Math.abs(oe)>Number.MAX_SAFE_INTEGER)return K.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof oe=="number"&&Math.floor(oe)!==oe)return K.error("Numeric branch labels must be integer values.");if(f){if(K.checkSubtype(f,mr(oe)))return null}else f=mr(oe);if(b[String(oe)]!==void 0)return K.error("Branch labels must be unique.");b[String(oe)]=w.length}const ie=d.parse(j,D,g);if(!ie)return null;g=g||ie.type,w.push(ie)}const E=d.parse(o[1],1,ni);if(!E)return null;const I=d.parse(o[o.length-1],o.length-1,g);return I?E.type.kind!=="value"&&d.concat(1).checkSubtype(f,E.type)?null:new zh(f,g,E,b,w,I):null}evaluate(o){const d=this.input.evaluate(o);return(mr(d)===this.inputType&&this.outputs[this.cases[d]]||this.otherwise).evaluate(o)}eachChild(o){o(this.input),this.outputs.forEach(o),o(this.otherwise)}outputDefined(){return this.outputs.every((o=>o.outputDefined()))&&this.otherwise.outputDefined()}serialize(){const o=["match",this.input.serialize()],d=Object.keys(this.cases).sort(),f=[],g={};for(const w of d){const E=g[this.cases[w]];E===void 0?(g[this.cases[w]]=f.length,f.push([this.cases[w],[w]])):f[E][1].push(w)}const b=w=>this.inputType.kind==="number"?Number(w):w;for(const[w,E]of f)o.push(E.length===1?b(E[0]):E.map(b)),o.push(this.outputs[w].serialize());return o.push(this.otherwise.serialize()),o}}var wv=zh;class _m{constructor(o,d,f){this.type=o,this.branches=d,this.otherwise=f}static parse(o,d){if(o.length<4)return d.error(`Expected at least 3 arguments, but found only ${o.length-1}.`);if(o.length%2!=0)return d.error("Expected an odd number of arguments.");let f;d.expectedType&&d.expectedType.kind!=="value"&&(f=d.expectedType);const g=[];for(let w=1;w<o.length-1;w+=2){const E=d.parse(o[w],w,Xn);if(!E)return null;const I=d.parse(o[w+1],w+1,f);if(!I)return null;g.push([E,I]),f=f||I.type}const b=d.parse(o[o.length-1],o.length-1,f);return b?new _m(f,g,b):null}evaluate(o){for(const[d,f]of this.branches)if(d.evaluate(o))return f.evaluate(o);return this.otherwise.evaluate(o)}eachChild(o){for(const[d,f]of this.branches)o(d),o(f);o(this.otherwise)}outputDefined(){return this.branches.every((([o,d])=>d.outputDefined()))&&this.otherwise.outputDefined()}serialize(){const o=["case"];return this.eachChild((d=>{o.push(d.serialize())})),o}}var fg=_m;class vd{constructor(o,d,f,g){this.type=o,this.input=d,this.beginIndex=f,this.endIndex=g}static parse(o,d){if(o.length<=2||o.length>=5)return d.error(`Expected 3 or 4 arguments, but found ${o.length-1} instead.`);const f=d.parse(o[1],1,ni),g=d.parse(o[2],2,ln);if(!f||!g)return null;if(!ol(f.type,[Cr(ni),Fn,ni]))return d.error(`Expected first argument to be of type array or string, but found ${zi(f.type)} instead`);if(o.length===4){const b=d.parse(o[3],3,ln);return b?new vd(f.type,f,g,b):null}return new vd(f.type,f,g)}evaluate(o){const d=this.input.evaluate(o),f=this.beginIndex.evaluate(o);if(!Vl(d,["string","array"]))throw new Rr(`Expected first argument to be of type array or string, but found ${zi(mr(d))} instead.`);if(this.endIndex){const g=this.endIndex.evaluate(o);return d.slice(f,g)}return d.slice(f)}eachChild(o){o(this.input),o(this.beginIndex),this.endIndex&&o(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const o=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),o]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var mg=vd;function Nh(c,o){return c==="=="||c==="!="?o.kind==="boolean"||o.kind==="string"||o.kind==="number"||o.kind==="null"||o.kind==="value":o.kind==="string"||o.kind==="number"||o.kind==="value"}function vm(c,o,d,f){return f.compare(o,d)===0}function $c(c,o,d){const f=c!=="=="&&c!=="!=";return class CN{constructor(b,w,E){this.type=Xn,this.lhs=b,this.rhs=w,this.collator=E,this.hasUntypedArgument=b.type.kind==="value"||w.type.kind==="value"}static parse(b,w){if(b.length!==3&&b.length!==4)return w.error("Expected two or three arguments.");const E=b[0];let I=w.parse(b[1],1,ni);if(!I)return null;if(!Nh(E,I.type))return w.concat(1).error(`"${E}" comparisons are not supported for type '${zi(I.type)}'.`);let D=w.parse(b[2],2,ni);if(!D)return null;if(!Nh(E,D.type))return w.concat(2).error(`"${E}" comparisons are not supported for type '${zi(D.type)}'.`);if(I.type.kind!==D.type.kind&&I.type.kind!=="value"&&D.type.kind!=="value")return w.error(`Cannot compare types '${zi(I.type)}' and '${zi(D.type)}'.`);f&&(I.type.kind==="value"&&D.type.kind!=="value"?I=new ko(D.type,[I]):I.type.kind!=="value"&&D.type.kind==="value"&&(D=new ko(I.type,[D])));let z=null;if(b.length===4){if(I.type.kind!=="string"&&D.type.kind!=="string"&&I.type.kind!=="value"&&D.type.kind!=="value")return w.error("Cannot use collator to compare non-string types.");if(z=w.parse(b[3],3,Ar),!z)return null}return new CN(I,D,z)}evaluate(b){const w=this.lhs.evaluate(b),E=this.rhs.evaluate(b);if(f&&this.hasUntypedArgument){const I=mr(w),D=mr(E);if(I.kind!==D.kind||I.kind!=="string"&&I.kind!=="number")throw new Rr(`Expected arguments for "${c}" to be (string, string) or (number, number), but found (${I.kind}, ${D.kind}) instead.`)}if(this.collator&&!f&&this.hasUntypedArgument){const I=mr(w),D=mr(E);if(I.kind!=="string"||D.kind!=="string")return o(b,w,E)}return this.collator?d(b,w,E,this.collator.evaluate(b)):o(b,w,E)}eachChild(b){b(this.lhs),b(this.rhs),this.collator&&b(this.collator)}outputDefined(){return!0}serialize(){const b=[c];return this.eachChild((w=>{b.push(w.serialize())})),b}}}const ym=$c("==",(function(c,o,d){return o===d}),vm),Tv=$c("!=",(function(c,o,d){return o!==d}),(function(c,o,d,f){return!vm(0,o,d,f)})),Sv=$c("<",(function(c,o,d){return o<d}),(function(c,o,d,f){return f.compare(o,d)<0})),jc=$c(">",(function(c,o,d){return o>d}),(function(c,o,d,f){return f.compare(o,d)>0})),Fl=$c("<=",(function(c,o,d){return o<=d}),(function(c,o,d,f){return f.compare(o,d)<=0})),bm=$c(">=",(function(c,o,d){return o>=d}),(function(c,o,d,f){return f.compare(o,d)>=0}));class Uh{constructor(o,d,f,g,b,w){this.type=Fn,this.number=o,this.locale=d,this.currency=f,this.unit=g,this.minFractionDigits=b,this.maxFractionDigits=w}static parse(o,d){if(o.length!==3)return d.error("Expected two arguments.");const f=d.parse(o[1],1,ln);if(!f)return null;const g=o[2];if(typeof g!="object"||Array.isArray(g))return d.error("NumberFormat options argument must be an object.");let b=null;if(g.locale&&(b=d.parse(g.locale,1,Fn),!b))return null;let w=null;if(g.currency&&(w=d.parse(g.currency,1,Fn),!w))return null;let E=null;if(g.unit&&(E=d.parse(g.unit,1,Fn),!E))return null;let I=null;if(g["min-fraction-digits"]&&(I=d.parse(g["min-fraction-digits"],1,ln),!I))return null;let D=null;return g["max-fraction-digits"]&&(D=d.parse(g["max-fraction-digits"],1,ln),!D)?null:new Uh(f,b,w,E,I,D)}evaluate(o){return new Intl.NumberFormat(this.locale?this.locale.evaluate(o):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(o):void 0,unit:this.unit?this.unit.evaluate(o):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(o):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(o):void 0}).format(this.number.evaluate(o))}eachChild(o){o(this.number),this.locale&&o(this.locale),this.currency&&o(this.currency),this.unit&&o(this.unit),this.minFractionDigits&&o(this.minFractionDigits),this.maxFractionDigits&&o(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const o={};return this.locale&&(o.locale=this.locale.serialize()),this.currency&&(o.currency=this.currency.serialize()),this.unit&&(o.unit=this.unit.serialize()),this.minFractionDigits&&(o["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(o["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),o]}}class Wc{constructor(o){this.type=ln,this.input=o}static parse(o,d){if(o.length!==2)return d.error(`Expected 1 argument, but found ${o.length-1} instead.`);const f=d.parse(o[1],1);return f?f.type.kind!=="array"&&f.type.kind!=="string"&&f.type.kind!=="value"?d.error(`Expected argument of type string or array, but found ${zi(f.type)} instead.`):new Wc(f):null}evaluate(o){const d=this.input.evaluate(o);if(typeof d=="string"||Array.isArray(d))return d.length;throw new Rr(`Expected value to be of type string or array, but found ${zi(mr(d))} instead.`)}eachChild(o){o(this.input)}outputDefined(){return!1}serialize(){const o=["length"];return this.eachChild((d=>{o.push(d.serialize())})),o}}const xm={"==":ym,"!=":Tv,">":jc,"<":Sv,">=":bm,"<=":Fl,array:ko,at:pm,boolean:ko,case:fg,coalesce:Vh,collator:pa,format:ha,image:fa,in:Fh,"index-of":gm,interpolate:ml,"interpolate-hcl":ml,"interpolate-lab":ml,length:Wc,let:gd,literal:ul,match:wv,number:ko,"number-format":Uh,object:ko,slice:mg,step:ir,string:ko,"to-boolean":Go,"to-color":Go,"to-number":Go,"to-string":Go,var:bt,within:Ko};function wm(c,[o,d,f,g]){o=o.evaluate(c),d=d.evaluate(c),f=f.evaluate(c);const b=g?g.evaluate(c):1,w=mu(o,d,f,b);if(w)throw new Rr(w);return new Ni(o/255*b,d/255*b,f/255*b,b)}function pl(c,o){return c in o}function $h(c,o){const d=o[c];return d===void 0?null:d}function _a(c){return{type:c}}ma.register(xm,{error:[{kind:"error"},[Fn],(c,[o])=>{throw new Rr(o.evaluate(c))}],typeof:[Fn,[ni],(c,[o])=>zi(mr(o.evaluate(c)))],"to-rgba":[Cr(ln,4),[fr],(c,[o])=>o.evaluate(c).toArray()],rgb:[fr,[ln,ln,ln],wm],rgba:[fr,[ln,ln,ln,ln],wm],has:{type:Xn,overloads:[[[Fn],(c,[o])=>pl(o.evaluate(c),c.properties())],[[Fn,ro],(c,[o,d])=>pl(o.evaluate(c),d.evaluate(c))]]},get:{type:ni,overloads:[[[Fn],(c,[o])=>$h(o.evaluate(c),c.properties())],[[Fn,ro],(c,[o,d])=>$h(o.evaluate(c),d.evaluate(c))]]},"feature-state":[ni,[Fn],(c,[o])=>$h(o.evaluate(c),c.featureState||{})],properties:[ro,[],c=>c.properties()],"geometry-type":[Fn,[],c=>c.geometryType()],id:[ni,[],c=>c.id()],zoom:[ln,[],c=>c.globals.zoom],pitch:[ln,[],c=>c.globals.pitch||0],"distance-from-center":[ln,[],c=>c.distanceFromCenter()],"heatmap-density":[ln,[],c=>c.globals.heatmapDensity||0],"line-progress":[ln,[],c=>c.globals.lineProgress||0],"sky-radial-progress":[ln,[],c=>c.globals.skyRadialProgress||0],accumulated:[ni,[],c=>c.globals.accumulated===void 0?null:c.globals.accumulated],"+":[ln,_a(ln),(c,o)=>{let d=0;for(const f of o)d+=f.evaluate(c);return d}],"*":[ln,_a(ln),(c,o)=>{let d=1;for(const f of o)d*=f.evaluate(c);return d}],"-":{type:ln,overloads:[[[ln,ln],(c,[o,d])=>o.evaluate(c)-d.evaluate(c)],[[ln],(c,[o])=>-o.evaluate(c)]]},"/":[ln,[ln,ln],(c,[o,d])=>o.evaluate(c)/d.evaluate(c)],"%":[ln,[ln,ln],(c,[o,d])=>o.evaluate(c)%d.evaluate(c)],ln2:[ln,[],()=>Math.LN2],pi:[ln,[],()=>Math.PI],e:[ln,[],()=>Math.E],"^":[ln,[ln,ln],(c,[o,d])=>Math.pow(o.evaluate(c),d.evaluate(c))],sqrt:[ln,[ln],(c,[o])=>Math.sqrt(o.evaluate(c))],log10:[ln,[ln],(c,[o])=>Math.log(o.evaluate(c))/Math.LN10],ln:[ln,[ln],(c,[o])=>Math.log(o.evaluate(c))],log2:[ln,[ln],(c,[o])=>Math.log(o.evaluate(c))/Math.LN2],sin:[ln,[ln],(c,[o])=>Math.sin(o.evaluate(c))],cos:[ln,[ln],(c,[o])=>Math.cos(o.evaluate(c))],tan:[ln,[ln],(c,[o])=>Math.tan(o.evaluate(c))],asin:[ln,[ln],(c,[o])=>Math.asin(o.evaluate(c))],acos:[ln,[ln],(c,[o])=>Math.acos(o.evaluate(c))],atan:[ln,[ln],(c,[o])=>Math.atan(o.evaluate(c))],min:[ln,_a(ln),(c,o)=>Math.min(...o.map((d=>d.evaluate(c))))],max:[ln,_a(ln),(c,o)=>Math.max(...o.map((d=>d.evaluate(c))))],abs:[ln,[ln],(c,[o])=>Math.abs(o.evaluate(c))],round:[ln,[ln],(c,[o])=>{const d=o.evaluate(c);return d<0?-Math.round(-d):Math.round(d)}],floor:[ln,[ln],(c,[o])=>Math.floor(o.evaluate(c))],ceil:[ln,[ln],(c,[o])=>Math.ceil(o.evaluate(c))],"filter-==":[Xn,[Fn,ni],(c,[o,d])=>c.properties()[o.value]===d.value],"filter-id-==":[Xn,[ni],(c,[o])=>c.id()===o.value],"filter-type-==":[Xn,[Fn],(c,[o])=>c.geometryType()===o.value],"filter-<":[Xn,[Fn,ni],(c,[o,d])=>{const f=c.properties()[o.value],g=d.value;return typeof f==typeof g&&f<g}],"filter-id-<":[Xn,[ni],(c,[o])=>{const d=c.id(),f=o.value;return typeof d==typeof f&&d<f}],"filter->":[Xn,[Fn,ni],(c,[o,d])=>{const f=c.properties()[o.value],g=d.value;return typeof f==typeof g&&f>g}],"filter-id->":[Xn,[ni],(c,[o])=>{const d=c.id(),f=o.value;return typeof d==typeof f&&d>f}],"filter-<=":[Xn,[Fn,ni],(c,[o,d])=>{const f=c.properties()[o.value],g=d.value;return typeof f==typeof g&&f<=g}],"filter-id-<=":[Xn,[ni],(c,[o])=>{const d=c.id(),f=o.value;return typeof d==typeof f&&d<=f}],"filter->=":[Xn,[Fn,ni],(c,[o,d])=>{const f=c.properties()[o.value],g=d.value;return typeof f==typeof g&&f>=g}],"filter-id->=":[Xn,[ni],(c,[o])=>{const d=c.id(),f=o.value;return typeof d==typeof f&&d>=f}],"filter-has":[Xn,[ni],(c,[o])=>o.value in c.properties()],"filter-has-id":[Xn,[],c=>c.id()!==null&&c.id()!==void 0],"filter-type-in":[Xn,[Cr(Fn)],(c,[o])=>o.value.indexOf(c.geometryType())>=0],"filter-id-in":[Xn,[Cr(ni)],(c,[o])=>o.value.indexOf(c.id())>=0],"filter-in-small":[Xn,[Fn,Cr(ni)],(c,[o,d])=>d.value.indexOf(c.properties()[o.value])>=0],"filter-in-large":[Xn,[Fn,Cr(ni)],(c,[o,d])=>(function(f,g,b,w){for(;b<=w;){const E=b+w>>1;if(g[E]===f)return!0;g[E]>f?w=E-1:b=E+1}return!1})(c.properties()[o.value],d.value,0,d.value.length-1)],all:{type:Xn,overloads:[[[Xn,Xn],(c,[o,d])=>o.evaluate(c)&&d.evaluate(c)],[_a(Xn),(c,o)=>{for(const d of o)if(!d.evaluate(c))return!1;return!0}]]},any:{type:Xn,overloads:[[[Xn,Xn],(c,[o,d])=>o.evaluate(c)||d.evaluate(c)],[_a(Xn),(c,o)=>{for(const d of o)if(d.evaluate(c))return!0;return!1}]]},"!":[Xn,[Xn],(c,[o])=>!o.evaluate(c)],"is-supported-script":[Xn,[Fn],(c,[o])=>{const d=c.globals&&c.globals.isSupportedScript;return!d||d(o.evaluate(c))}],upcase:[Fn,[Fn],(c,[o])=>o.evaluate(c).toUpperCase()],downcase:[Fn,[Fn],(c,[o])=>o.evaluate(c).toLowerCase()],concat:[Fn,_a(ni),(c,o)=>o.map((d=>cl(d.evaluate(c)))).join("")],"resolved-locale":[Fn,[Ar],(c,[o])=>o.evaluate(c).resolvedLocale()]});var yd=xm;function Tm(c){return{result:"success",value:c}}function pc(c){return{result:"error",value:c}}function bu(c){return c["property-type"]==="data-driven"}function jh(c){return!!c.expression&&c.expression.parameters.indexOf("zoom")>-1}function Wh(c){return!!c.expression&&c.expression.interpolated}function Ei(c){return c instanceof Number?"number":c instanceof String?"string":c instanceof Boolean?"boolean":Array.isArray(c)?"array":c===null?"null":typeof c}function bd(c){return typeof c=="object"&&c!==null&&!Array.isArray(c)}function gl(c){return c}function xd(c,o){const d=o.type==="color",f=c.stops&&typeof c.stops[0][0]=="object",g=f||!(f||c.property!==void 0),b=c.type||(Wh(o)?"exponential":"interval");if(d&&((c=ca({},c)).stops&&(c.stops=c.stops.map((D=>[D[0],Ni.parse(D[1])]))),c.default=Ni.parse(c.default?c.default:o.default)),c.colorSpace&&c.colorSpace!=="rgb"&&!fm[c.colorSpace])throw new Error(`Unknown color space: ${c.colorSpace}`);let w,E,I;if(b==="exponential")w=zl;else if(b==="interval")w=Hh;else if(b==="categorical"){w=pg,E=Object.create(null);for(const D of c.stops)E[D[0]]=D[1];I=typeof c.stops[0][0]}else{if(b!=="identity")throw new Error(`Unknown function type "${b}"`);w=gg}if(f){const D={},z=[];for(let ie=0;ie<c.stops.length;ie++){const oe=c.stops[ie],de=oe[0].zoom;D[de]===void 0&&(D[de]={zoom:de,type:c.type,property:c.property,default:c.default,stops:[]},z.push(de)),D[de].stops.push([oe[0].value,oe[1]])}const j=[];for(const ie of z)j.push([D[ie].zoom,xd(D[ie],o)]);const K={name:"linear"};return{kind:"composite",interpolationType:K,interpolationFactor:ml.interpolationFactor.bind(void 0,K),zoomStops:j.map((ie=>ie[0])),evaluate:({zoom:ie},oe)=>zl({stops:j,base:c.base},o,ie).evaluate(ie,oe)}}if(g){const D=b==="exponential"?{name:"exponential",base:c.base!==void 0?c.base:1}:null;return{kind:"camera",interpolationType:D,interpolationFactor:ml.interpolationFactor.bind(void 0,D),zoomStops:c.stops.map((z=>z[0])),evaluate:({zoom:z})=>w(c,o,z,E,I)}}return{kind:"source",evaluate(D,z){const j=z&&z.properties?z.properties[c.property]:void 0;return j===void 0?xu(c.default,o.default):w(c,o,j,E,I)}}}function xu(c,o,d){return c!==void 0?c:o!==void 0?o:d!==void 0?d:void 0}function pg(c,o,d,f,g){return xu(typeof d===g?f[d]:void 0,c.default,o.default)}function Hh(c,o,d){if(Ei(d)!=="number")return xu(c.default,o.default);const f=c.stops.length;if(f===1||d<=c.stops[0][0])return c.stops[0][1];if(d>=c.stops[f-1][0])return c.stops[f-1][1];const g=Pr(c.stops.map((b=>b[0])),d);return c.stops[g][1]}function zl(c,o,d){const f=c.base!==void 0?c.base:1;if(Ei(d)!=="number")return xu(c.default,o.default);const g=c.stops.length;if(g===1||d<=c.stops[0][0])return c.stops[0][1];if(d>=c.stops[g-1][0])return c.stops[g-1][1];const b=Pr(c.stops.map((z=>z[0])),d),w=(function(z,j,K,ie){const oe=ie-K,de=z-K;return oe===0?0:j===1?de/oe:(Math.pow(j,de)-1)/(Math.pow(j,oe)-1)})(d,f,c.stops[b][0],c.stops[b+1][0]),E=c.stops[b][1],I=c.stops[b+1][1];let D=qs[o.type]||gl;if(c.colorSpace&&c.colorSpace!=="rgb"){const z=fm[c.colorSpace];D=(j,K)=>z.reverse(z.interpolate(z.forward(j),z.forward(K),w))}return typeof E.evaluate=="function"?{evaluate(...z){const j=E.evaluate.apply(void 0,z),K=I.evaluate.apply(void 0,z);if(j!==void 0&&K!==void 0)return D(j,K,w)}}:D(E,I,w)}function gg(c,o,d){return o.type==="color"?d=Ni.parse(d):o.type==="formatted"?d=qr.fromString(d.toString()):o.type==="resolvedImage"?d=is.fromString(d.toString()):Ei(d)===o.type||o.type==="enum"&&o.values[d]||(d=void 0),xu(d,c.default,o.default)}class Gh{constructor(o,d){this.expression=o,this._warningHistory={},this._evaluator=new Bl,this._defaultValue=d?(function(f){return f.type==="color"&&(bd(f.default)||Array.isArray(f.default))?new Ni(0,0,0,0):f.type==="color"?Ni.parse(f.default)||null:f.default===void 0?null:f.default})(d):null,this._enumValues=d&&d.type==="enum"?d.values:null}evaluateWithoutErrorHandling(o,d,f,g,b,w,E,I){return this._evaluator.globals=o,this._evaluator.feature=d,this._evaluator.featureState=f,this._evaluator.canonical=g||null,this._evaluator.availableImages=b||null,this._evaluator.formattedSection=w,this._evaluator.featureTileCoord=E||null,this._evaluator.featureDistanceData=I||null,this.expression.evaluate(this._evaluator)}evaluate(o,d,f,g,b,w,E,I){this._evaluator.globals=o,this._evaluator.feature=d||null,this._evaluator.featureState=f||null,this._evaluator.canonical=g||null,this._evaluator.availableImages=b||null,this._evaluator.formattedSection=w||null,this._evaluator.featureTileCoord=E||null,this._evaluator.featureDistanceData=I||null;try{const D=this.expression.evaluate(this._evaluator);if(D==null||typeof D=="number"&&D!=D)return this._defaultValue;if(this._enumValues&&!(D in this._enumValues))throw new Rr(`Expected value to be one of ${Object.keys(this._enumValues).map((z=>JSON.stringify(z))).join(", ")}, but found ${JSON.stringify(D)} instead.`);return D}catch(D){return this._warningHistory[D.message]||(this._warningHistory[D.message]=!0,typeof console<"u"&&console.warn(D.message)),this._defaultValue}}}function wu(c){return Array.isArray(c)&&c.length>0&&typeof c[0]=="string"&&c[0]in yd}function Tu(c,o){const d=new pn(yd,[],o?(function(g){const b={color:fr,string:Fn,number:ln,enum:Fn,boolean:Xn,formatted:Wo,resolvedImage:Gs};return g.type==="array"?Cr(b[g.value]||ni,g.length):b[g.type]})(o):void 0),f=d.parse(c,void 0,void 0,void 0,o&&o.type==="string"?{typeAnnotation:"coerce"}:void 0);return f?Tm(new Gh(f,o)):pc(d.errors)}class wd{constructor(o,d){this.kind=o,this._styleExpression=d,this.isStateDependent=o!=="constant"&&!ee(d.expression)}evaluateWithoutErrorHandling(o,d,f,g,b,w){return this._styleExpression.evaluateWithoutErrorHandling(o,d,f,g,b,w)}evaluate(o,d,f,g,b,w){return this._styleExpression.evaluate(o,d,f,g,b,w)}}class gc{constructor(o,d,f,g){this.kind=o,this.zoomStops=f,this._styleExpression=d,this.isStateDependent=o!=="camera"&&!ee(d.expression),this.interpolationType=g}evaluateWithoutErrorHandling(o,d,f,g,b,w){return this._styleExpression.evaluateWithoutErrorHandling(o,d,f,g,b,w)}evaluate(o,d,f,g,b,w){return this._styleExpression.evaluate(o,d,f,g,b,w)}interpolationFactor(o,d,f){return this.interpolationType?ml.interpolationFactor(this.interpolationType,o,d,f):0}}function Td(c,o){if((c=Tu(c,o)).result==="error")return c;const d=c.value.expression,f=A(d);if(!f&&!bu(o))return pc([new Bs("","data expressions not supported")]);const g=ue(d,["zoom","pitch","distance-from-center"]);if(!g&&!jh(o))return pc([new Bs("","zoom expressions not supported")]);const b=Ed(d);return b||g?b instanceof Bs?pc([b]):b instanceof ml&&!Wh(o)?pc([new Bs("",'"interpolate" expressions cannot be used with this property')]):Tm(b?new gc(f?"camera":"composite",c.value,b.labels,b instanceof ml?b.interpolation:void 0):new wd(f?"constant":"source",c.value)):pc([new Bs("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Sd{constructor(o,d){this._parameters=o,this._specification=d,ca(this,xd(this._parameters,this._specification))}static deserialize(o){return new Sd(o._parameters,o._specification)}static serialize(o){return{_parameters:o._parameters,_specification:o._specification}}}function Ed(c){let o=null;if(c instanceof gd)o=Ed(c.result);else if(c instanceof Vh){for(const d of c.args)if(o=Ed(d),o)break}else(c instanceof ir||c instanceof ml)&&c.input instanceof ma&&c.input.name==="zoom"&&(o=c);return o instanceof Bs||c.eachChild((d=>{const f=Ed(d);f instanceof Bs?o=f:!o&&f?o=new Bs("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):o&&f&&o!==f&&(o=new Bs("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),o}class hn{constructor(o,d,f,g){this.message=(o?`${o}: `:"")+f,g&&(this.identifier=g),d!=null&&d.__line__&&(this.line=d.__line__)}}function Zo(c){const o=c.key,d=c.value,f=c.valueSpec||{},g=c.objectElementValidators||{},b=c.style,w=c.styleSpec;let E=[];const I=Ei(d);if(I!=="object")return[new hn(o,d,`object expected, ${I} found`)];for(const D in d){const z=D.split(".")[0];let j;g[z]?j=g[z]:f[z]?j=Cs:g["*"]?j=g["*"]:f["*"]&&(j=Cs),j?E=E.concat(j({key:(o&&`${o}.`)+D,value:d[D],valueSpec:f[z]||f["*"],style:b,styleSpec:w,object:d,objectKey:D},d)):E.push(new hn(o,d[D],`unknown property "${D}"`))}for(const D in f)g[D]||f[D].required&&f[D].default===void 0&&d[D]===void 0&&E.push(new hn(o,d,`missing required property "${D}"`));return E}function qh(c){const o=c.value,d=c.valueSpec,f=c.style,g=c.styleSpec,b=c.key,w=c.arrayElementValidator||Cs;if(Ei(o)!=="array")return[new hn(b,o,`array expected, ${Ei(o)} found`)];if(d.length&&o.length!==d.length)return[new hn(b,o,`array length ${d.length} expected, length ${o.length} found`)];if(d["min-length"]&&o.length<d["min-length"])return[new hn(b,o,`array length at least ${d["min-length"]} expected, length ${o.length} found`)];let E={type:d.value,values:d.values,minimum:d.minimum,maximum:d.maximum,function:void 0};g.$version<7&&(E.function=d.function),Ei(d.value)==="object"&&(E=d.value);let I=[];for(let D=0;D<o.length;D++)I=I.concat(w({array:o,arrayIndex:D,value:o[D],valueSpec:E,style:f,styleSpec:g,key:`${b}[${D}]`}));return I}function Cd(c){const o=c.key,d=c.value,f=c.valueSpec;let g=Ei(d);if(g==="number"&&d!=d&&(g="NaN"),g!=="number")return[new hn(o,d,`number expected, ${g} found`)];if("minimum"in f){let b=f.minimum;if(Ei(f.minimum)==="array"&&(b=f.minimum[c.arrayIndex]),d<b)return[new hn(o,d,`${d} is less than the minimum value ${b}`)]}if("maximum"in f){let b=f.maximum;if(Ei(f.maximum)==="array"&&(b=f.maximum[c.arrayIndex]),d>b)return[new hn(o,d,`${d} is greater than the maximum value ${b}`)]}return[]}function kd(c){const o=c.valueSpec,d=Fi(c.value.type);let f,g,b,w={};const E=d!=="categorical"&&c.value.property===void 0,I=!E,D=Ei(c.value.stops)==="array"&&Ei(c.value.stops[0])==="array"&&Ei(c.value.stops[0][0])==="object",z=Zo({key:c.key,value:c.value,valueSpec:c.styleSpec.function,style:c.style,styleSpec:c.styleSpec,objectElementValidators:{stops:function(ie){if(d==="identity")return[new hn(ie.key,ie.value,'identity function may not have a "stops" property')];let oe=[];const de=ie.value;return oe=oe.concat(qh({key:ie.key,value:de,valueSpec:ie.valueSpec,style:ie.style,styleSpec:ie.styleSpec,arrayElementValidator:j})),Ei(de)==="array"&&de.length===0&&oe.push(new hn(ie.key,de,"array must have at least one stop")),oe},default:function(ie){return Cs({key:ie.key,value:ie.value,valueSpec:o,style:ie.style,styleSpec:ie.styleSpec})}}});return d==="identity"&&E&&z.push(new hn(c.key,c.value,'missing required property "property"')),d==="identity"||c.value.stops||z.push(new hn(c.key,c.value,'missing required property "stops"')),d==="exponential"&&c.valueSpec.expression&&!Wh(c.valueSpec)&&z.push(new hn(c.key,c.value,"exponential functions not supported")),c.styleSpec.$version>=8&&(I&&!bu(c.valueSpec)?z.push(new hn(c.key,c.value,"property functions not supported")):E&&!jh(c.valueSpec)&&z.push(new hn(c.key,c.value,"zoom functions not supported"))),d!=="categorical"&&!D||c.value.property!==void 0||z.push(new hn(c.key,c.value,'"property" property is required')),z;function j(ie){let oe=[];const de=ie.value,xe=ie.key;if(Ei(de)!=="array")return[new hn(xe,de,`array expected, ${Ei(de)} found`)];if(de.length!==2)return[new hn(xe,de,`array length 2 expected, length ${de.length} found`)];if(D){if(Ei(de[0])!=="object")return[new hn(xe,de,`object expected, ${Ei(de[0])} found`)];if(de[0].zoom===void 0)return[new hn(xe,de,"object stop key must have zoom")];if(de[0].value===void 0)return[new hn(xe,de,"object stop key must have value")];const De=Fi(de[0].zoom);if(typeof De!="number")return[new hn(xe,de[0].zoom,"stop zoom values must be numbers")];if(b&&b>De)return[new hn(xe,de[0].zoom,"stop zoom values must appear in ascending order")];De!==b&&(b=De,g=void 0,w={}),oe=oe.concat(Zo({key:`${xe}[0]`,value:de[0],valueSpec:{zoom:{}},style:ie.style,styleSpec:ie.styleSpec,objectElementValidators:{zoom:Cd,value:K}}))}else oe=oe.concat(K({key:`${xe}[0]`,value:de[0],style:ie.style,styleSpec:ie.styleSpec},de));return wu(qi(de[1]))?oe.concat([new hn(`${xe}[1]`,de[1],"expressions are not allowed in function stops.")]):oe.concat(Cs({key:`${xe}[1]`,value:de[1],valueSpec:o,style:ie.style,styleSpec:ie.styleSpec}))}function K(ie,oe){const de=Ei(ie.value),xe=Fi(ie.value),De=ie.value!==null?ie.value:oe;if(f){if(de!==f)return[new hn(ie.key,De,`${de} stop domain type must match previous stop domain type ${f}`)]}else f=de;if(de!=="number"&&de!=="string"&&de!=="boolean"&&typeof xe!="number"&&typeof xe!="string"&&typeof xe!="boolean")return[new hn(ie.key,De,"stop domain value must be a number, string, or boolean")];if(de!=="number"&&d!=="categorical"){let He=`number expected, ${de} found`;return bu(o)&&d===void 0&&(He+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new hn(ie.key,De,He)]}return d!=="categorical"||de!=="number"||typeof xe=="number"&&isFinite(xe)&&Math.floor(xe)===xe?d!=="categorical"&&de==="number"&&typeof xe=="number"&&typeof g=="number"&&g!==void 0&&xe<g?[new hn(ie.key,De,"stop domain values must appear in ascending order")]:(g=xe,d==="categorical"&&xe in w?[new hn(ie.key,De,"stop domain values must be unique")]:(w[xe]=!0,[])):[new hn(ie.key,De,`integer expected, found ${String(xe)}`)]}}function Es(c){const o=(c.expressionContext==="property"?Td:Tu)(qi(c.value),c.valueSpec);if(o.result==="error")return o.value.map((f=>new hn(`${c.key}${f.key}`,c.value,f.message)));const d=o.value.expression||o.value._styleExpression.expression;if(c.expressionContext==="property"&&c.propertyKey==="text-font"&&!d.outputDefined())return[new hn(c.key,c.value,`Invalid data expression for "${c.propertyKey}". Output values must be contained as literals within the expression.`)];if(c.expressionContext==="property"&&c.propertyType==="layout"&&!ee(d))return[new hn(c.key,c.value,'"feature-state" data expressions are not supported with layout properties.')];if(c.expressionContext==="filter")return Xa(d,c);if(c.expressionContext&&c.expressionContext.indexOf("cluster")===0){if(!ue(d,["zoom","feature-state"]))return[new hn(c.key,c.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(c.expressionContext==="cluster-initial"&&!A(d))return[new hn(c.key,c.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Xa(c,o){const d=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(o.valueSpec&&o.valueSpec.expression)for(const g of o.valueSpec.expression.parameters)d.delete(g);if(d.size===0)return[];const f=[];return c instanceof ma&&d.has(c.name)?[new hn(o.key,o.value,`["${c.name}"] expression is not supported in a filter for a ${o.object.type} layer with id: ${o.object.id}`)]:(c.eachChild((g=>{f.push(...Xa(g,o))})),f)}function Kh(c){const o=c.key,d=c.value,f=c.valueSpec,g=[];return Array.isArray(f.values)?f.values.indexOf(Fi(d))===-1&&g.push(new hn(o,d,`expected one of [${f.values.join(", ")}], ${JSON.stringify(d)} found`)):Object.keys(f.values).indexOf(Fi(d))===-1&&g.push(new hn(o,d,`expected one of [${Object.keys(f.values).join(", ")}], ${JSON.stringify(d)} found`)),g}function Sm(c){if(c===!0||c===!1)return!0;if(!Array.isArray(c)||c.length===0)return!1;switch(c[0]){case"has":return c.length>=2&&c[1]!=="$id"&&c[1]!=="$type";case"in":return c.length>=3&&(typeof c[1]!="string"||Array.isArray(c[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return c.length!==3||Array.isArray(c[1])||Array.isArray(c[2]);case"any":case"all":for(const o of c.slice(1))if(!Sm(o)&&typeof o!="boolean")return!1;return!0;default:return!0}}function Xh(c,o="fill"){if(c==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};Sm(c)||(c=Za(c));const d=c;let f=!0;try{f=(function(D){if(!_c(D))return D;let z=qi(D);return Hc(z),z=_g(z),z})(d)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(d,null,2)}
        `)}const g=Mt[`filter_${o}`],b=Tu(f,g);let w=null;if(b.result==="error")throw new Error(b.value.map((D=>`${D.key}: ${D.message}`)).join(", "));w=(D,z,j)=>b.value.evaluate(D,z,{},j);let E=null,I=null;if(f!==d){const D=Tu(d,g);if(D.result==="error")throw new Error(D.value.map((z=>`${z.key}: ${z.message}`)).join(", "));E=(z,j,K,ie,oe)=>D.value.evaluate(z,j,{},K,void 0,void 0,ie,oe),I=!A(D.value.expression)}return{filter:w,dynamicFilter:E||void 0,needGeometry:yg(f),needFeature:!!I}}function _g(c){if(!Array.isArray(c))return c;const o=(function(d){if(Em.has(d[0])){for(let f=1;f<d.length;f++)if(_c(d[f]))return!0}return d})(c);return o===!0?o:o.map((d=>_g(d)))}function Hc(c){let o=!1;const d=[];if(c[0]==="case"){for(let f=1;f<c.length-1;f+=2)o=o||_c(c[f]),d.push(c[f+1]);d.push(c[c.length-1])}else if(c[0]==="match"){o=o||_c(c[1]);for(let f=2;f<c.length-1;f+=2)d.push(c[f+1]);d.push(c[c.length-1])}else if(c[0]==="step"){o=o||_c(c[1]);for(let f=1;f<c.length-1;f+=2)d.push(c[f+1])}o&&(c.length=0,c.push("any",...d));for(let f=1;f<c.length;f++)Hc(c[f])}function _c(c){if(!Array.isArray(c))return!1;if((o=c[0])==="pitch"||o==="distance-from-center")return!0;var o;for(let d=1;d<c.length;d++)if(_c(c[d]))return!0;return!1}const Em=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function vg(c,o){return c<o?-1:c>o?1:0}function yg(c){if(!Array.isArray(c))return!1;if(c[0]==="within")return!0;for(let o=1;o<c.length;o++)if(yg(c[o]))return!0;return!1}function Za(c){if(!c)return!0;const o=c[0];return c.length<=1?o!=="any":o==="=="?Id(c[1],c[2],"=="):o==="!="?Yh(Id(c[1],c[2],"==")):o==="<"||o===">"||o==="<="||o===">="?Id(c[1],c[2],o):o==="any"?(d=c.slice(1),["any"].concat(d.map(Za))):o==="all"?["all"].concat(c.slice(1).map(Za)):o==="none"?["all"].concat(c.slice(1).map(Za).map(Yh)):o==="in"?Zh(c[1],c.slice(2)):o==="!in"?Yh(Zh(c[1],c.slice(2))):o==="has"?Cm(c[1]):o==="!has"?Yh(Cm(c[1])):o!=="within"||c;var d}function Id(c,o,d){switch(c){case"$type":return[`filter-type-${d}`,o];case"$id":return[`filter-id-${d}`,o];default:return[`filter-${d}`,c,o]}}function Zh(c,o){if(o.length===0)return!1;switch(c){case"$type":return["filter-type-in",["literal",o]];case"$id":return["filter-id-in",["literal",o]];default:return o.length>200&&!o.some((d=>typeof d!=typeof o[0]))?["filter-in-large",c,["literal",o.sort(vg)]]:["filter-in-small",c,["literal",o]]}}function Cm(c){switch(c){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",c]}}function Yh(c){return["!",c]}function Ad(c){return Sm(qi(c.value))?Es(ca({},c,{expressionContext:"filter",valueSpec:c.styleSpec[`filter_${c.layerType||"fill"}`]})):Nl(c)}function Nl(c){const o=c.value,d=c.key;if(Ei(o)!=="array")return[new hn(d,o,`array expected, ${Ei(o)} found`)];const f=c.styleSpec;let g,b=[];if(o.length<1)return[new hn(d,o,"filter array must have at least 1 element")];switch(b=b.concat(Kh({key:`${d}[0]`,value:o[0],valueSpec:f.filter_operator,style:c.style,styleSpec:c.styleSpec})),Fi(o[0])){case"<":case"<=":case">":case">=":o.length>=2&&Fi(o[1])==="$type"&&b.push(new hn(d,o,`"$type" cannot be use with operator "${o[0]}"`));case"==":case"!=":o.length!==3&&b.push(new hn(d,o,`filter array for operator "${o[0]}" must have 3 elements`));case"in":case"!in":o.length>=2&&(g=Ei(o[1]),g!=="string"&&b.push(new hn(`${d}[1]`,o[1],`string expected, ${g} found`)));for(let w=2;w<o.length;w++)g=Ei(o[w]),Fi(o[1])==="$type"?b=b.concat(Kh({key:`${d}[${w}]`,value:o[w],valueSpec:f.geometry_type,style:c.style,styleSpec:c.styleSpec})):g!=="string"&&g!=="number"&&g!=="boolean"&&b.push(new hn(`${d}[${w}]`,o[w],`string, number, or boolean expected, ${g} found`));break;case"any":case"all":case"none":for(let w=1;w<o.length;w++)b=b.concat(Nl({key:`${d}[${w}]`,value:o[w],style:c.style,styleSpec:c.styleSpec}));break;case"has":case"!has":g=Ei(o[1]),o.length!==2?b.push(new hn(d,o,`filter array for "${o[0]}" operator must have 2 elements`)):g!=="string"&&b.push(new hn(`${d}[1]`,o[1],`string expected, ${g} found`));break;case"within":g=Ei(o[1]),o.length!==2?b.push(new hn(d,o,`filter array for "${o[0]}" operator must have 2 elements`)):g!=="object"&&b.push(new hn(`${d}[1]`,o[1],`object expected, ${g} found`))}return b}function Ul(c,o){const d=c.key,f=c.style,g=c.styleSpec,b=c.value,w=c.objectKey,E=g[`${o}_${c.layerType}`];if(!E)return[];const I=w.match(/^(.*)-transition$/);if(o==="paint"&&I&&E[I[1]]&&E[I[1]].transition)return Cs({key:d,value:b,valueSpec:g.transition,style:f,styleSpec:g});const D=c.valueSpec||E[w];if(!D)return[new hn(d,b,`unknown property "${w}"`)];let z;if(Ei(b)==="string"&&bu(D)&&!D.tokens&&(z=/^{([^}]+)}$/.exec(b))){const K=`\`{ "type": "identity", "property": ${z?JSON.stringify(z[1]):'"_"'} }\``;return[new hn(d,b,`"${w}" does not support interpolation syntax
Use an identity property function instead: ${K}.`)]}const j=[];return c.layerType==="symbol"&&(w==="text-field"&&f&&!f.glyphs&&j.push(new hn(d,b,'use of "text-field" requires a style "glyphs" property')),w==="text-font"&&bd(qi(b))&&Fi(b.type)==="identity"&&j.push(new hn(d,b,'"text-font" does not support identity functions'))),j.concat(Cs({key:c.key,value:b,valueSpec:D,style:f,styleSpec:g,expressionContext:"property",propertyType:o,propertyKey:w}))}function bg(c){return Ul(c,"paint")}function km(c){return Ul(c,"layout")}function xg(c){let o=[];const d=c.value,f=c.key,g=c.style,b=c.styleSpec;d.type||d.ref||o.push(new hn(f,d,'either "type" or "ref" is required'));let w=Fi(d.type);const E=Fi(d.ref);if(d.id){const I=Fi(d.id);for(let D=0;D<c.arrayIndex;D++){const z=g.layers[D];Fi(z.id)===I&&o.push(new hn(f,d.id,`duplicate layer id "${d.id}", previously used at line ${z.id.__line__}`))}}if("ref"in d){let I;["type","source","source-layer","filter","layout"].forEach((D=>{D in d&&o.push(new hn(f,d[D],`"${D}" is prohibited for ref layers`))})),g.layers.forEach((D=>{Fi(D.id)===E&&(I=D)})),I?I.ref?o.push(new hn(f,d.ref,"ref cannot reference another ref layer")):w=Fi(I.type):typeof E=="string"&&o.push(new hn(f,d.ref,`ref layer "${E}" not found`))}else if(w!=="background"&&w!=="sky")if(d.source){const I=g.sources&&g.sources[d.source],D=I&&Fi(I.type);I?D==="vector"&&w==="raster"?o.push(new hn(f,d.source,`layer "${d.id}" requires a raster source`)):D==="raster"&&w!=="raster"?o.push(new hn(f,d.source,`layer "${d.id}" requires a vector source`)):D!=="vector"||d["source-layer"]?D==="raster-dem"&&w!=="hillshade"?o.push(new hn(f,d.source,"raster-dem source can only be used with layer type 'hillshade'.")):w!=="line"||!d.paint||!d.paint["line-gradient"]&&!d.paint["line-trim-offset"]||D==="geojson"&&I.lineMetrics||o.push(new hn(f,d,`layer "${d.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):o.push(new hn(f,d,`layer "${d.id}" must specify a "source-layer"`)):o.push(new hn(f,d.source,`source "${d.source}" not found`))}else o.push(new hn(f,d,'missing required property "source"'));return o=o.concat(Zo({key:f,value:d,valueSpec:b.layer,style:c.style,styleSpec:c.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Cs({key:`${f}.type`,value:d.type,valueSpec:b.layer.type,style:c.style,styleSpec:c.styleSpec,object:d,objectKey:"type"}),filter:I=>Ad(ca({layerType:w},I)),layout:I=>Zo({layer:d,key:I.key,value:I.value,valueSpec:{},style:I.style,styleSpec:I.styleSpec,objectElementValidators:{"*":D=>km(ca({layerType:w},D))}}),paint:I=>Zo({layer:d,key:I.key,value:I.value,valueSpec:{},style:I.style,styleSpec:I.styleSpec,objectElementValidators:{"*":D=>bg(ca({layerType:w},D))}})}})),o}function vc(c){const o=c.value,d=c.key,f=Ei(o);return f!=="string"?[new hn(d,o,`string expected, ${f} found`)]:[]}const wg={promoteId:function({key:c,value:o}){if(Ei(o)==="string")return vc({key:c,value:o});{const d=[];for(const f in o)d.push(...vc({key:`${c}.${f}`,value:o[f]}));return d}}};function Tg(c){const o=c.value,d=c.key,f=c.styleSpec,g=c.style;if(!o.type)return[new hn(d,o,'"type" is required')];const b=Fi(o.type);let w;switch(b){case"vector":case"raster":case"raster-dem":return w=Zo({key:d,value:o,valueSpec:f[`source_${b.replace("-","_")}`],style:c.style,styleSpec:f,objectElementValidators:wg}),w;case"geojson":if(w=Zo({key:d,value:o,valueSpec:f.source_geojson,style:g,styleSpec:f,objectElementValidators:wg}),o.cluster)for(const E in o.clusterProperties){const[I,D]=o.clusterProperties[E],z=typeof I=="string"?[I,["accumulated"],["get",E]]:I;w.push(...Es({key:`${d}.${E}.map`,value:D,expressionContext:"cluster-map"})),w.push(...Es({key:`${d}.${E}.reduce`,value:z,expressionContext:"cluster-reduce"}))}return w;case"video":return Zo({key:d,value:o,valueSpec:f.source_video,style:g,styleSpec:f});case"image":return Zo({key:d,value:o,valueSpec:f.source_image,style:g,styleSpec:f});case"canvas":return[new hn(d,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Kh({key:`${d}.type`,value:o.type,valueSpec:{values:Ev(f)}})}}function Ev(c){return c.source.reduce(((o,d)=>{const f=c[d];return f.type.type==="enum"&&(o=o.concat(Object.keys(f.type.values))),o}),[])}function Sg(c){const o=c.value,d=c.styleSpec,f=d.light,g=c.style;let b=[];const w=Ei(o);if(o===void 0)return b;if(w!=="object")return b=b.concat([new hn("light",o,`object expected, ${w} found`)]),b;for(const E in o){const I=E.match(/^(.*)-transition$/);b=b.concat(I&&f[I[1]]&&f[I[1]].transition?Cs({key:E,value:o[E],valueSpec:d.transition,style:g,styleSpec:d}):f[E]?Cs({key:E,value:o[E],valueSpec:f[E],style:g,styleSpec:d}):[new hn(E,o[E],`unknown property "${E}"`)])}return b}function Jh(c){const o=c.value,d=c.key,f=c.style,g=c.styleSpec,b=g.terrain;let w=[];const E=Ei(o);if(o===void 0)return w;if(E!=="object")return w=w.concat([new hn("terrain",o,`object expected, ${E} found`)]),w;for(const I in o){const D=I.match(/^(.*)-transition$/);w=w.concat(D&&b[D[1]]&&b[D[1]].transition?Cs({key:I,value:o[I],valueSpec:g.transition,style:f,styleSpec:g}):b[I]?Cs({key:I,value:o[I],valueSpec:b[I],style:f,styleSpec:g}):[new hn(I,o[I],`unknown property "${I}"`)])}if(o.source){const I=f.sources&&f.sources[o.source],D=I&&Fi(I.type);I?D!=="raster-dem"&&w.push(new hn(d,o.source,`terrain cannot be used with a source of type ${String(D)}, it only be used with a "raster-dem" source type`)):w.push(new hn(d,o.source,`source "${o.source}" not found`))}else w.push(new hn(d,o,'terrain is missing required property "source"'));return w}function Eg(c){const o=c.value,d=c.style,f=c.styleSpec,g=f.fog;let b=[];const w=Ei(o);if(o===void 0)return b;if(w!=="object")return b=b.concat([new hn("fog",o,`object expected, ${w} found`)]),b;for(const E in o){const I=E.match(/^(.*)-transition$/);b=b.concat(I&&g[I[1]]&&g[I[1]].transition?Cs({key:E,value:o[E],valueSpec:f.transition,style:d,styleSpec:f}):g[E]?Cs({key:E,value:o[E],valueSpec:g[E],style:d,styleSpec:f}):[new hn(E,o[E],`unknown property "${E}"`)])}return b}const Im={"*":()=>[],array:qh,boolean:function(c){const o=c.value,d=c.key,f=Ei(o);return f!=="boolean"?[new hn(d,o,`boolean expected, ${f} found`)]:[]},number:Cd,color:function(c){const o=c.key,d=c.value,f=Ei(d);return f!=="string"?[new hn(o,d,`color expected, ${f} found`)]:Ss(d)===null?[new hn(o,d,`color expected, "${d}" found`)]:[]},enum:Kh,filter:Ad,function:kd,layer:xg,object:Zo,source:Tg,light:Sg,terrain:Jh,fog:Eg,string:vc,formatted:function(c){return vc(c).length===0?[]:Es(c)},resolvedImage:function(c){return vc(c).length===0?[]:Es(c)},projection:function(c){const o=c.value,d=c.styleSpec,f=d.projection,g=c.style;let b=[];const w=Ei(o);if(w==="object")for(const E in o)b=b.concat(Cs({key:E,value:o[E],valueSpec:f[E],style:g,styleSpec:d}));else w!=="string"&&(b=b.concat([new hn("projection",o,`object or string expected, ${w} found`)]));return b}};function Cs(c){const o=c.value,d=c.valueSpec,f=c.styleSpec;return d.expression&&bd(Fi(o))?kd(c):d.expression&&wu(qi(o))?Es(c):d.type&&Im[d.type]?Im[d.type](c):Zo(ca({},c,{valueSpec:d.type?f[d.type]:d}))}function Cg(c){const o=c.value,d=c.key,f=vc(c);return f.length||(o.indexOf("{fontstack}")===-1&&f.push(new hn(d,o,'"glyphs" url must include a "{fontstack}" token')),o.indexOf("{range}")===-1&&f.push(new hn(d,o,'"glyphs" url must include a "{range}" token'))),f}function yc(c,o=Mt){return Yo(Cs({key:"",value:c,valueSpec:o.$root,styleSpec:o,style:c,objectElementValidators:{glyphs:Cg,"*":()=>[]}}))}const kg=c=>Yo(bg(c)),Am=c=>Yo(km(c));function Yo(c){return c.slice().sort(((o,d)=>o.line&&d.line?o.line-d.line:0))}function Qh(c,o){let d=!1;if(o&&o.length)for(const f of o)c.fire(new So(new Error(f.message))),d=!0;return d}var Ig=_l,Jo=3;function _l(c,o,d){var f=this.cells=[];if(c instanceof ArrayBuffer){this.arrayBuffer=c;var g=new Int32Array(this.arrayBuffer);c=g[0],this.d=(o=g[1])+2*(d=g[2]);for(var b=0;b<this.d*this.d;b++){var w=g[Jo+b],E=g[Jo+b+1];f.push(w===E?null:g.subarray(w,E))}var I=g[Jo+f.length+1];this.keys=g.subarray(g[Jo+f.length],I),this.bboxes=g.subarray(I),this.insert=this._insertReadonly}else{this.d=o+2*d;for(var D=0;D<this.d*this.d;D++)f.push([]);this.keys=[],this.bboxes=[]}this.n=o,this.extent=c,this.padding=d,this.scale=o/c,this.uid=0;var z=d/o*c;this.min=-z,this.max=c+z}_l.prototype.insert=function(c,o,d,f,g){this._forEachCell(o,d,f,g,this._insertCell,this.uid++),this.keys.push(c),this.bboxes.push(o),this.bboxes.push(d),this.bboxes.push(f),this.bboxes.push(g)},_l.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},_l.prototype._insertCell=function(c,o,d,f,g,b){this.cells[g].push(b)},_l.prototype.query=function(c,o,d,f,g){var b=this.min,w=this.max;if(c<=b&&o<=b&&w<=d&&w<=f&&!g)return Array.prototype.slice.call(this.keys);var E=[];return this._forEachCell(c,o,d,f,this._queryCell,E,{},g),E},_l.prototype._queryCell=function(c,o,d,f,g,b,w,E){var I=this.cells[g];if(I!==null)for(var D=this.keys,z=this.bboxes,j=0;j<I.length;j++){var K=I[j];if(w[K]===void 0){var ie=4*K;(E?E(z[ie+0],z[ie+1],z[ie+2],z[ie+3]):c<=z[ie+2]&&o<=z[ie+3]&&d>=z[ie+0]&&f>=z[ie+1])?(w[K]=!0,b.push(D[K])):w[K]=!1}}},_l.prototype._forEachCell=function(c,o,d,f,g,b,w,E){for(var I=this._convertToCellCoord(c),D=this._convertToCellCoord(o),z=this._convertToCellCoord(d),j=this._convertToCellCoord(f),K=I;K<=z;K++)for(var ie=D;ie<=j;ie++){var oe=this.d*ie+K;if((!E||E(this._convertFromCellCoord(K),this._convertFromCellCoord(ie),this._convertFromCellCoord(K+1),this._convertFromCellCoord(ie+1)))&&g.call(this,c,o,d,f,oe,b,w,E))return}},_l.prototype._convertFromCellCoord=function(c){return(c-this.padding)/this.scale},_l.prototype._convertToCellCoord=function(c){return Math.max(0,Math.min(this.d-1,Math.floor(c*this.scale)+this.padding))},_l.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var c=this.cells,o=Jo+this.cells.length+1+1,d=0,f=0;f<this.cells.length;f++)d+=this.cells[f].length;var g=new Int32Array(o+d+this.keys.length+this.bboxes.length);g[0]=this.extent,g[1]=this.n,g[2]=this.padding;for(var b=o,w=0;w<c.length;w++){var E=c[w];g[Jo+w]=b,g.set(E,b),b+=E.length}return g[Jo+c.length]=b,g.set(this.keys,b),g[Jo+c.length+1]=b+=this.keys.length,g.set(this.bboxes,b),b+=this.bboxes.length,g.buffer};var Qo=J(Ig);const Ya={};function bn(c,o,d={}){Object.defineProperty(c,"_classRegistryKey",{value:o,writeable:!1}),Ya[o]={klass:c,omit:d.omit||[]}}bn(Object,"Object"),Qo.serialize=function(c,o){const d=c.toArrayBuffer();return o&&o.push(d),{buffer:d}},Qo.deserialize=function(c){return new Qo(c.buffer)},Object.defineProperty(Qo,"name",{value:"Grid"}),bn(Qo,"Grid"),bn(Ni,"Color"),bn(Error,"Error"),bn(nr,"AJAXError"),bn(is,"ResolvedImage"),bn(Sd,"StylePropertyFunction"),bn(Gh,"StyleExpression",{omit:["_evaluator"]}),bn(gc,"ZoomDependentExpression"),bn(wd,"ZoomConstantExpression"),bn(ma,"CompoundExpression",{omit:["_evaluate"]});for(const c in yd)Ya[yd[c]._classRegistryKey]||bn(yd[c],`Expression${c}`);function Pm(c){return c&&typeof ArrayBuffer<"u"&&(c instanceof ArrayBuffer||c.constructor&&c.constructor.name==="ArrayBuffer")}function Mm(c){return p.ImageBitmap&&c instanceof p.ImageBitmap}function Su(c,o){if(c==null||typeof c=="boolean"||typeof c=="number"||typeof c=="string"||c instanceof Boolean||c instanceof Number||c instanceof String||c instanceof Date||c instanceof RegExp)return c;if(Pm(c)||Mm(c))return o&&o.push(c),c;if(ArrayBuffer.isView(c)){const d=c;return o&&o.push(d.buffer),d}if(c instanceof p.ImageData)return o&&o.push(c.data.buffer),c;if(Array.isArray(c)){const d=[];for(const f of c)d.push(Su(f,o));return d}if(typeof c=="object"){const d=c.constructor,f=d._classRegistryKey;if(!f)throw new Error(`can't serialize object of unregistered class ${f}`);const g=d.serialize?d.serialize(c,o):{};if(!d.serialize){for(const b in c)c.hasOwnProperty(b)&&(Ya[f].omit.indexOf(b)>=0||(g[b]=Su(c[b],o)));c instanceof Error&&(g.message=c.message)}if(g.$name)throw new Error("$name property is reserved for worker serialization logic.");return f!=="Object"&&(g.$name=f),g}throw new Error("can't serialize object of type "+typeof c)}function Gc(c){if(c==null||typeof c=="boolean"||typeof c=="number"||typeof c=="string"||c instanceof Boolean||c instanceof Number||c instanceof String||c instanceof Date||c instanceof RegExp||Pm(c)||Mm(c)||ArrayBuffer.isView(c)||c instanceof p.ImageData)return c;if(Array.isArray(c))return c.map(Gc);if(typeof c=="object"){const o=c.$name||"Object",{klass:d}=Ya[o];if(!d)throw new Error(`can't deserialize unregistered class ${o}`);if(d.deserialize)return d.deserialize(c);const f=Object.create(d.prototype);for(const g of Object.keys(c))g!=="$name"&&(f[g]=Gc(c[g]));return f}throw new Error("can't deserialize object of type "+typeof c)}const mn={"Latin-1 Supplement":c=>c>=128&&c<=255,Arabic:c=>c>=1536&&c<=1791,"Arabic Supplement":c=>c>=1872&&c<=1919,"Arabic Extended-A":c=>c>=2208&&c<=2303,"Hangul Jamo":c=>c>=4352&&c<=4607,"Unified Canadian Aboriginal Syllabics":c=>c>=5120&&c<=5759,Khmer:c=>c>=6016&&c<=6143,"Unified Canadian Aboriginal Syllabics Extended":c=>c>=6320&&c<=6399,"General Punctuation":c=>c>=8192&&c<=8303,"Letterlike Symbols":c=>c>=8448&&c<=8527,"Number Forms":c=>c>=8528&&c<=8591,"Miscellaneous Technical":c=>c>=8960&&c<=9215,"Control Pictures":c=>c>=9216&&c<=9279,"Optical Character Recognition":c=>c>=9280&&c<=9311,"Enclosed Alphanumerics":c=>c>=9312&&c<=9471,"Geometric Shapes":c=>c>=9632&&c<=9727,"Miscellaneous Symbols":c=>c>=9728&&c<=9983,"Miscellaneous Symbols and Arrows":c=>c>=11008&&c<=11263,"CJK Radicals Supplement":c=>c>=11904&&c<=12031,"Kangxi Radicals":c=>c>=12032&&c<=12255,"Ideographic Description Characters":c=>c>=12272&&c<=12287,"CJK Symbols and Punctuation":c=>c>=12288&&c<=12351,Hiragana:c=>c>=12352&&c<=12447,Katakana:c=>c>=12448&&c<=12543,Bopomofo:c=>c>=12544&&c<=12591,"Hangul Compatibility Jamo":c=>c>=12592&&c<=12687,Kanbun:c=>c>=12688&&c<=12703,"Bopomofo Extended":c=>c>=12704&&c<=12735,"CJK Strokes":c=>c>=12736&&c<=12783,"Katakana Phonetic Extensions":c=>c>=12784&&c<=12799,"Enclosed CJK Letters and Months":c=>c>=12800&&c<=13055,"CJK Compatibility":c=>c>=13056&&c<=13311,"CJK Unified Ideographs Extension A":c=>c>=13312&&c<=19903,"Yijing Hexagram Symbols":c=>c>=19904&&c<=19967,"CJK Unified Ideographs":c=>c>=19968&&c<=40959,"Yi Syllables":c=>c>=40960&&c<=42127,"Yi Radicals":c=>c>=42128&&c<=42191,"Hangul Jamo Extended-A":c=>c>=43360&&c<=43391,"Hangul Syllables":c=>c>=44032&&c<=55215,"Hangul Jamo Extended-B":c=>c>=55216&&c<=55295,"Private Use Area":c=>c>=57344&&c<=63743,"CJK Compatibility Ideographs":c=>c>=63744&&c<=64255,"Arabic Presentation Forms-A":c=>c>=64336&&c<=65023,"Vertical Forms":c=>c>=65040&&c<=65055,"CJK Compatibility Forms":c=>c>=65072&&c<=65103,"Small Form Variants":c=>c>=65104&&c<=65135,"Arabic Presentation Forms-B":c=>c>=65136&&c<=65279,"Halfwidth and Fullwidth Forms":c=>c>=65280&&c<=65519};function Dm(c){for(const o of c)if(Eu(o.charCodeAt(0)))return!0;return!1}function Cv(c){for(const o of c)if(!Rm(o.charCodeAt(0)))return!1;return!0}function Rm(c){return!(mn.Arabic(c)||mn["Arabic Supplement"](c)||mn["Arabic Extended-A"](c)||mn["Arabic Presentation Forms-A"](c)||mn["Arabic Presentation Forms-B"](c))}function Eu(c){return!(c!==746&&c!==747&&(c<4352||!(mn["Bopomofo Extended"](c)||mn.Bopomofo(c)||mn["CJK Compatibility Forms"](c)&&!(c>=65097&&c<=65103)||mn["CJK Compatibility Ideographs"](c)||mn["CJK Compatibility"](c)||mn["CJK Radicals Supplement"](c)||mn["CJK Strokes"](c)||!(!mn["CJK Symbols and Punctuation"](c)||c>=12296&&c<=12305||c>=12308&&c<=12319||c===12336)||mn["CJK Unified Ideographs Extension A"](c)||mn["CJK Unified Ideographs"](c)||mn["Enclosed CJK Letters and Months"](c)||mn["Hangul Compatibility Jamo"](c)||mn["Hangul Jamo Extended-A"](c)||mn["Hangul Jamo Extended-B"](c)||mn["Hangul Jamo"](c)||mn["Hangul Syllables"](c)||mn.Hiragana(c)||mn["Ideographic Description Characters"](c)||mn.Kanbun(c)||mn["Kangxi Radicals"](c)||mn["Katakana Phonetic Extensions"](c)||mn.Katakana(c)&&c!==12540||!(!mn["Halfwidth and Fullwidth Forms"](c)||c===65288||c===65289||c===65293||c>=65306&&c<=65310||c===65339||c===65341||c===65343||c>=65371&&c<=65503||c===65507||c>=65512&&c<=65519)||!(!mn["Small Form Variants"](c)||c>=65112&&c<=65118||c>=65123&&c<=65126)||mn["Unified Canadian Aboriginal Syllabics"](c)||mn["Unified Canadian Aboriginal Syllabics Extended"](c)||mn["Vertical Forms"](c)||mn["Yijing Hexagram Symbols"](c)||mn["Yi Syllables"](c)||mn["Yi Radicals"](c))))}function Pd(c){return!(Eu(c)||(function(o){return!!(mn["Latin-1 Supplement"](o)&&(o===167||o===169||o===174||o===177||o===188||o===189||o===190||o===215||o===247)||mn["General Punctuation"](o)&&(o===8214||o===8224||o===8225||o===8240||o===8241||o===8251||o===8252||o===8258||o===8263||o===8264||o===8265||o===8273)||mn["Letterlike Symbols"](o)||mn["Number Forms"](o)||mn["Miscellaneous Technical"](o)&&(o>=8960&&o<=8967||o>=8972&&o<=8991||o>=8996&&o<=9e3||o===9003||o>=9085&&o<=9114||o>=9150&&o<=9165||o===9167||o>=9169&&o<=9179||o>=9186&&o<=9215)||mn["Control Pictures"](o)&&o!==9251||mn["Optical Character Recognition"](o)||mn["Enclosed Alphanumerics"](o)||mn["Geometric Shapes"](o)||mn["Miscellaneous Symbols"](o)&&!(o>=9754&&o<=9759)||mn["Miscellaneous Symbols and Arrows"](o)&&(o>=11026&&o<=11055||o>=11088&&o<=11097||o>=11192&&o<=11243)||mn["CJK Symbols and Punctuation"](o)||mn.Katakana(o)||mn["Private Use Area"](o)||mn["CJK Compatibility Forms"](o)||mn["Small Form Variants"](o)||mn["Halfwidth and Fullwidth Forms"](o)||o===8734||o===8756||o===8757||o>=9984&&o<=10087||o>=10102&&o<=10131||o===65532||o===65533)})(c))}function Ag(c){return c>=1424&&c<=2303||mn["Arabic Presentation Forms-A"](c)||mn["Arabic Presentation Forms-B"](c)}function kv(c,o){return!(!o&&Ag(c)||c>=2304&&c<=3583||c>=3840&&c<=4255||mn.Khmer(c))}function Md(c){for(const o of c)if(Ag(o.charCodeAt(0)))return!0;return!1}const pe="deferred",V="loading",se="loaded";let ke=null,_="unavailable",u=null;const m=function(c){c&&typeof c=="string"&&c.indexOf("NetworkError")>-1&&(_="error"),ke&&ke(c)};function y(){S.fire(new jo("pluginStateChange",{pluginStatus:_,pluginURL:u}))}const S=new Ll,C=function(){return _},R=function(){if(_!==pe||!u)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");_=V,y(),u&&xo({url:u},(c=>{c?m(c):(_=se,y())}))},O={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>_===se||O.applyArabicShaping!=null,isLoading:()=>_===V,setState(c){_=c.pluginStatus,u=c.pluginURL},isParsed:()=>O.applyArabicShaping!=null&&O.processBidirectionalText!=null&&O.processStyledBidirectionalText!=null,getPluginURL:()=>u};class U{constructor(o,d){this.zoom=o,d?(this.now=d.now,this.fadeDuration=d.fadeDuration,this.transition=d.transition,this.pitch=d.pitch):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0)}isSupportedScript(o){return(function(d,f){for(const g of d)if(!kv(g.charCodeAt(0),f))return!1;return!0})(o,O.isLoaded())}}class G{constructor(o,d){this.property=o,this.value=d,this.expression=(function(f,g){if(bd(f))return new Sd(f,g);if(wu(f)){const b=Td(f,g);if(b.result==="error")throw new Error(b.value.map((w=>`${w.key}: ${w.message}`)).join(", "));return b.value}{let b=f;return typeof f=="string"&&g.type==="color"&&(b=Ni.parse(f)),{kind:"constant",evaluate:()=>b}}})(d===void 0?o.specification.default:d,o.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(o,d,f){return this.property.possiblyEvaluate(this,o,d,f)}}class q{constructor(o){this.property=o,this.value=new G(o,void 0)}transitioned(o,d){return new he(this.property,this.value,d,ct({},o.transition,this.transition),o.now)}untransitioned(){return new he(this.property,this.value,null,{},0)}}class ae{constructor(o){this._properties=o,this._values=Object.create(o.defaultTransitionablePropertyValues)}getValue(o){return Ee(this._values[o].value.value)}setValue(o,d){this._values.hasOwnProperty(o)||(this._values[o]=new q(this._values[o].property)),this._values[o].value=new G(this._values[o].property,d===null?void 0:Ee(d))}getTransition(o){return Ee(this._values[o].transition)}setTransition(o,d){this._values.hasOwnProperty(o)||(this._values[o]=new q(this._values[o].property)),this._values[o].transition=Ee(d)||void 0}serialize(){const o={};for(const d of Object.keys(this._values)){const f=this.getValue(d);f!==void 0&&(o[d]=f);const g=this.getTransition(d);g!==void 0&&(o[`${d}-transition`]=g)}return o}transitioned(o,d){const f=new ye(this._properties);for(const g of Object.keys(this._values))f._values[g]=this._values[g].transitioned(o,d._values[g]);return f}untransitioned(){const o=new ye(this._properties);for(const d of Object.keys(this._values))o._values[d]=this._values[d].untransitioned();return o}}class he{constructor(o,d,f,g,b){const w=g.delay||0,E=g.duration||0;b=b||0,this.property=o,this.value=d,this.begin=b+w,this.end=this.begin+E,o.specification.transition&&(g.delay||g.duration)&&(this.prior=f)}possiblyEvaluate(o,d,f){const g=o.now||0,b=this.value.possiblyEvaluate(o,d,f),w=this.prior;if(w){if(g>this.end)return this.prior=null,b;if(this.value.isDataDriven())return this.prior=null,b;if(g<this.begin)return w.possiblyEvaluate(o,d,f);{const E=(g-this.begin)/(this.end-this.begin);return this.property.interpolate(w.possiblyEvaluate(o,d,f),b,Ve(E))}}return b}}class ye{constructor(o){this._properties=o,this._values=Object.create(o.defaultTransitioningPropertyValues)}possiblyEvaluate(o,d,f){const g=new Te(this._properties);for(const b of Object.keys(this._values))g._values[b]=this._values[b].possiblyEvaluate(o,d,f);return g}hasTransition(){for(const o of Object.keys(this._values))if(this._values[o].prior)return!0;return!1}}class we{constructor(o){this._properties=o,this._values=Object.create(o.defaultPropertyValues)}getValue(o){return Ee(this._values[o].value)}setValue(o,d){this._values[o]=new G(this._values[o].property,d===null?void 0:Ee(d))}serialize(){const o={};for(const d of Object.keys(this._values)){const f=this.getValue(d);f!==void 0&&(o[d]=f)}return o}possiblyEvaluate(o,d,f){const g=new Te(this._properties);for(const b of Object.keys(this._values))g._values[b]=this._values[b].possiblyEvaluate(o,d,f);return g}}class be{constructor(o,d,f){this.property=o,this.value=d,this.parameters=f}isConstant(){return this.value.kind==="constant"}constantOr(o){return this.value.kind==="constant"?this.value.value:o}evaluate(o,d,f,g){return this.property.evaluate(this.value,this.parameters,o,d,f,g)}}class Te{constructor(o){this._properties=o,this._values=Object.create(o.defaultPossiblyEvaluatedValues)}get(o){return this._values[o]}}class le{constructor(o){this.specification=o}possiblyEvaluate(o,d){return o.expression.evaluate(d)}interpolate(o,d,f){const g=qs[this.specification.type];return g?g(o,d,f):o}}class _e{constructor(o,d){this.specification=o,this.overrides=d}possiblyEvaluate(o,d,f,g){return new be(this,o.expression.kind==="constant"||o.expression.kind==="camera"?{kind:"constant",value:o.expression.evaluate(d,null,{},f,g)}:o.expression,d)}interpolate(o,d,f){if(o.value.kind!=="constant"||d.value.kind!=="constant")return o;if(o.value.value===void 0||d.value.value===void 0)return new be(this,{kind:"constant",value:void 0},o.parameters);const g=qs[this.specification.type];return g?new be(this,{kind:"constant",value:g(o.value.value,d.value.value,f)},o.parameters):o}evaluate(o,d,f,g,b,w){return o.kind==="constant"?o.value:o.evaluate(d,f,g,b,w)}}class Ie{constructor(o){this.specification=o}possiblyEvaluate(o,d,f,g){return!!o.expression.evaluate(d,null,{},f,g)}interpolate(){return!1}}class Me{constructor(o){this.properties=o,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const d=new U(0,{});for(const f in o){const g=o[f];g.specification.overridable&&this.overridableProperties.push(f);const b=this.defaultPropertyValues[f]=new G(g,void 0),w=this.defaultTransitionablePropertyValues[f]=new q(g);this.defaultTransitioningPropertyValues[f]=w.untransitioned(),this.defaultPossiblyEvaluatedValues[f]=b.possiblyEvaluate(d)}}}function $e(c,o){return 256*(c=Ae(Math.floor(c),0,255))+Ae(Math.floor(o),0,255)}bn(_e,"DataDrivenProperty"),bn(le,"DataConstantProperty"),bn(Ie,"ColorRampProperty");const qe={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Ze{constructor(o,d){this._structArray=o,this._pos1=d*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class ot{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(o,d){return o._trim(),d&&(o.isTransferred=!0,d.push(o.arrayBuffer)),{length:o.length,arrayBuffer:o.arrayBuffer}}static deserialize(o){const d=Object.create(this.prototype);return d.arrayBuffer=o.arrayBuffer,d.length=o.length,d.capacity=o.arrayBuffer.byteLength/d.bytesPerElement,d._refreshViews(),d}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(o){this.reserve(o),this.length=o}reserve(o){if(o>this.capacity){this.capacity=Math.max(o,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const d=this.uint8;this._refreshViews(),d&&this.uint8.set(d)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function it(c,o=1){let d=0,f=0;return{members:c.map((g=>{const b=qe[g.type].BYTES_PER_ELEMENT,w=d=mt(d,Math.max(o,b)),E=g.components||1;return f=Math.max(f,b),d+=b*E,{name:g.name,type:g.type,components:E,offset:w}})),size:mt(d,Math.max(f,o)),alignment:o}}function mt(c,o){return Math.ceil(c/o)*o}class $t extends ot{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,d){const f=this.length;return this.resize(f+1),this.emplace(f,o,d)}emplace(o,d,f){const g=2*o;return this.int16[g+0]=d,this.int16[g+1]=f,o}}$t.prototype.bytesPerElement=4,bn($t,"StructArrayLayout2i4");class lt extends ot{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,d,f){const g=this.length;return this.resize(g+1),this.emplace(g,o,d,f)}emplace(o,d,f,g){const b=3*o;return this.int16[b+0]=d,this.int16[b+1]=f,this.int16[b+2]=g,o}}lt.prototype.bytesPerElement=6,bn(lt,"StructArrayLayout3i6");class Rt extends ot{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,d,f,g){const b=this.length;return this.resize(b+1),this.emplace(b,o,d,f,g)}emplace(o,d,f,g,b){const w=4*o;return this.int16[w+0]=d,this.int16[w+1]=f,this.int16[w+2]=g,this.int16[w+3]=b,o}}Rt.prototype.bytesPerElement=8,bn(Rt,"StructArrayLayout4i8");class vt extends ot{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,d,f,g,b,w,E){const I=this.length;return this.resize(I+1),this.emplace(I,o,d,f,g,b,w,E)}emplace(o,d,f,g,b,w,E,I){const D=6*o,z=12*o,j=3*o;return this.int16[D+0]=d,this.int16[D+1]=f,this.uint8[z+4]=g,this.uint8[z+5]=b,this.uint8[z+6]=w,this.uint8[z+7]=E,this.float32[j+2]=I,o}}vt.prototype.bytesPerElement=12,bn(vt,"StructArrayLayout2i4ub1f12");class Wt extends ot{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,d,f,g){const b=this.length;return this.resize(b+1),this.emplace(b,o,d,f,g)}emplace(o,d,f,g,b){const w=4*o;return this.float32[w+0]=d,this.float32[w+1]=f,this.float32[w+2]=g,this.float32[w+3]=b,o}}Wt.prototype.bytesPerElement=16,bn(Wt,"StructArrayLayout4f16");class ht extends ot{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,d,f,g,b){const w=this.length;return this.resize(w+1),this.emplace(w,o,d,f,g,b)}emplace(o,d,f,g,b,w){const E=6*o,I=3*o;return this.uint16[E+0]=d,this.uint16[E+1]=f,this.uint16[E+2]=g,this.uint16[E+3]=b,this.float32[I+2]=w,o}}ht.prototype.bytesPerElement=12,bn(ht,"StructArrayLayout4ui1f12");class xt extends ot{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,d,f,g){const b=this.length;return this.resize(b+1),this.emplace(b,o,d,f,g)}emplace(o,d,f,g,b){const w=4*o;return this.uint16[w+0]=d,this.uint16[w+1]=f,this.uint16[w+2]=g,this.uint16[w+3]=b,o}}xt.prototype.bytesPerElement=8,bn(xt,"StructArrayLayout4ui8");class Ut extends ot{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,d,f,g,b,w){const E=this.length;return this.resize(E+1),this.emplace(E,o,d,f,g,b,w)}emplace(o,d,f,g,b,w,E){const I=6*o;return this.int16[I+0]=d,this.int16[I+1]=f,this.int16[I+2]=g,this.int16[I+3]=b,this.int16[I+4]=w,this.int16[I+5]=E,o}}Ut.prototype.bytesPerElement=12,bn(Ut,"StructArrayLayout6i12");class Bt extends ot{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,d,f,g,b,w,E,I,D,z,j,K){const ie=this.length;return this.resize(ie+1),this.emplace(ie,o,d,f,g,b,w,E,I,D,z,j,K)}emplace(o,d,f,g,b,w,E,I,D,z,j,K,ie){const oe=12*o;return this.int16[oe+0]=d,this.int16[oe+1]=f,this.int16[oe+2]=g,this.int16[oe+3]=b,this.uint16[oe+4]=w,this.uint16[oe+5]=E,this.uint16[oe+6]=I,this.uint16[oe+7]=D,this.int16[oe+8]=z,this.int16[oe+9]=j,this.int16[oe+10]=K,this.int16[oe+11]=ie,o}}Bt.prototype.bytesPerElement=24,bn(Bt,"StructArrayLayout4i4ui4i24");class qt extends ot{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,d,f,g,b,w){const E=this.length;return this.resize(E+1),this.emplace(E,o,d,f,g,b,w)}emplace(o,d,f,g,b,w,E){const I=10*o,D=5*o;return this.int16[I+0]=d,this.int16[I+1]=f,this.int16[I+2]=g,this.float32[D+2]=b,this.float32[D+3]=w,this.float32[D+4]=E,o}}qt.prototype.bytesPerElement=20,bn(qt,"StructArrayLayout3i3f20");class Pn extends ot{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(o){const d=this.length;return this.resize(d+1),this.emplace(d,o)}emplace(o,d){return this.uint32[1*o+0]=d,o}}Pn.prototype.bytesPerElement=4,bn(Pn,"StructArrayLayout1ul4");class jn extends ot{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,d,f,g,b,w,E,I,D,z,j,K,ie){const oe=this.length;return this.resize(oe+1),this.emplace(oe,o,d,f,g,b,w,E,I,D,z,j,K,ie)}emplace(o,d,f,g,b,w,E,I,D,z,j,K,ie,oe){const de=20*o,xe=10*o;return this.int16[de+0]=d,this.int16[de+1]=f,this.int16[de+2]=g,this.int16[de+3]=b,this.int16[de+4]=w,this.float32[xe+3]=E,this.float32[xe+4]=I,this.float32[xe+5]=D,this.float32[xe+6]=z,this.int16[de+14]=j,this.uint32[xe+8]=K,this.uint16[de+18]=ie,this.uint16[de+19]=oe,o}}jn.prototype.bytesPerElement=40,bn(jn,"StructArrayLayout5i4f1i1ul2ui40");class xn extends ot{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,d,f,g,b,w,E){const I=this.length;return this.resize(I+1),this.emplace(I,o,d,f,g,b,w,E)}emplace(o,d,f,g,b,w,E,I){const D=8*o;return this.int16[D+0]=d,this.int16[D+1]=f,this.int16[D+2]=g,this.int16[D+4]=b,this.int16[D+5]=w,this.int16[D+6]=E,this.int16[D+7]=I,o}}xn.prototype.bytesPerElement=16,bn(xn,"StructArrayLayout3i2i2i16");class Dn extends ot{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,d,f,g,b){const w=this.length;return this.resize(w+1),this.emplace(w,o,d,f,g,b)}emplace(o,d,f,g,b,w){const E=4*o,I=8*o;return this.float32[E+0]=d,this.float32[E+1]=f,this.float32[E+2]=g,this.int16[I+6]=b,this.int16[I+7]=w,o}}Dn.prototype.bytesPerElement=16,bn(Dn,"StructArrayLayout2f1f2i16");class pi extends ot{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,d,f,g){const b=this.length;return this.resize(b+1),this.emplace(b,o,d,f,g)}emplace(o,d,f,g,b){const w=12*o,E=3*o;return this.uint8[w+0]=d,this.uint8[w+1]=f,this.float32[E+1]=g,this.float32[E+2]=b,o}}pi.prototype.bytesPerElement=12,bn(pi,"StructArrayLayout2ub2f12");class fi extends ot{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,d,f){const g=this.length;return this.resize(g+1),this.emplace(g,o,d,f)}emplace(o,d,f,g){const b=3*o;return this.float32[b+0]=d,this.float32[b+1]=f,this.float32[b+2]=g,o}}fi.prototype.bytesPerElement=12,bn(fi,"StructArrayLayout3f12");class kn extends ot{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,d,f){const g=this.length;return this.resize(g+1),this.emplace(g,o,d,f)}emplace(o,d,f,g){const b=3*o;return this.uint16[b+0]=d,this.uint16[b+1]=f,this.uint16[b+2]=g,o}}kn.prototype.bytesPerElement=6,bn(kn,"StructArrayLayout3ui6");class Mi extends ot{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(o,d,f,g,b,w,E,I,D,z,j,K,ie,oe,de,xe,De,He,Re,Ne,Je){const Ye=this.length;return this.resize(Ye+1),this.emplace(Ye,o,d,f,g,b,w,E,I,D,z,j,K,ie,oe,de,xe,De,He,Re,Ne,Je)}emplace(o,d,f,g,b,w,E,I,D,z,j,K,ie,oe,de,xe,De,He,Re,Ne,Je,Ye){const yt=30*o,_t=15*o,Ot=60*o;return this.int16[yt+0]=d,this.int16[yt+1]=f,this.int16[yt+2]=g,this.float32[_t+2]=b,this.float32[_t+3]=w,this.uint16[yt+8]=E,this.uint16[yt+9]=I,this.uint32[_t+5]=D,this.uint32[_t+6]=z,this.uint32[_t+7]=j,this.uint16[yt+16]=K,this.uint16[yt+17]=ie,this.uint16[yt+18]=oe,this.float32[_t+10]=de,this.float32[_t+11]=xe,this.uint8[Ot+48]=De,this.uint8[Ot+49]=He,this.uint8[Ot+50]=Re,this.uint32[_t+13]=Ne,this.int16[yt+28]=Je,this.uint8[Ot+58]=Ye,o}}Mi.prototype.bytesPerElement=60,bn(Mi,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class Ui extends ot{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(o,d,f,g,b,w,E,I,D,z,j,K,ie,oe,de,xe,De,He,Re,Ne,Je,Ye,yt,_t,Ot,Jt,St,zt,Nt,Kt){const nn=this.length;return this.resize(nn+1),this.emplace(nn,o,d,f,g,b,w,E,I,D,z,j,K,ie,oe,de,xe,De,He,Re,Ne,Je,Ye,yt,_t,Ot,Jt,St,zt,Nt,Kt)}emplace(o,d,f,g,b,w,E,I,D,z,j,K,ie,oe,de,xe,De,He,Re,Ne,Je,Ye,yt,_t,Ot,Jt,St,zt,Nt,Kt,nn){const Lt=38*o,fn=19*o;return this.int16[Lt+0]=d,this.int16[Lt+1]=f,this.int16[Lt+2]=g,this.float32[fn+2]=b,this.float32[fn+3]=w,this.int16[Lt+8]=E,this.int16[Lt+9]=I,this.int16[Lt+10]=D,this.int16[Lt+11]=z,this.int16[Lt+12]=j,this.int16[Lt+13]=K,this.uint16[Lt+14]=ie,this.uint16[Lt+15]=oe,this.uint16[Lt+16]=de,this.uint16[Lt+17]=xe,this.uint16[Lt+18]=De,this.uint16[Lt+19]=He,this.uint16[Lt+20]=Re,this.uint16[Lt+21]=Ne,this.uint16[Lt+22]=Je,this.uint16[Lt+23]=Ye,this.uint16[Lt+24]=yt,this.uint16[Lt+25]=_t,this.uint16[Lt+26]=Ot,this.uint16[Lt+27]=Jt,this.uint16[Lt+28]=St,this.uint32[fn+15]=zt,this.float32[fn+16]=Nt,this.float32[fn+17]=Kt,this.float32[fn+18]=nn,o}}Ui.prototype.bytesPerElement=76,bn(Ui,"StructArrayLayout3i2f6i15ui1ul3f76");class Ki extends ot{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o){const d=this.length;return this.resize(d+1),this.emplace(d,o)}emplace(o,d){return this.float32[1*o+0]=d,o}}Ki.prototype.bytesPerElement=4,bn(Ki,"StructArrayLayout1f4");class $i extends ot{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,d,f,g,b){const w=this.length;return this.resize(w+1),this.emplace(w,o,d,f,g,b)}emplace(o,d,f,g,b,w){const E=5*o;return this.float32[E+0]=d,this.float32[E+1]=f,this.float32[E+2]=g,this.float32[E+3]=b,this.float32[E+4]=w,o}}$i.prototype.bytesPerElement=20,bn($i,"StructArrayLayout5f20");class Ns extends ot{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,d,f,g){const b=this.length;return this.resize(b+1),this.emplace(b,o,d,f,g)}emplace(o,d,f,g,b){const w=6*o;return this.uint32[3*o+0]=d,this.uint16[w+2]=f,this.uint16[w+3]=g,this.uint16[w+4]=b,o}}Ns.prototype.bytesPerElement=12,bn(Ns,"StructArrayLayout1ul3ui12");class ks extends ot{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,d){const f=this.length;return this.resize(f+1),this.emplace(f,o,d)}emplace(o,d,f){const g=2*o;return this.uint16[g+0]=d,this.uint16[g+1]=f,o}}ks.prototype.bytesPerElement=4,bn(ks,"StructArrayLayout2ui4");class va extends ot{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o){const d=this.length;return this.resize(d+1),this.emplace(d,o)}emplace(o,d){return this.uint16[1*o+0]=d,o}}va.prototype.bytesPerElement=2,bn(va,"StructArrayLayout1ui2");class Ks extends ot{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,d){const f=this.length;return this.resize(f+1),this.emplace(f,o,d)}emplace(o,d,f){const g=2*o;return this.float32[g+0]=d,this.float32[g+1]=f,o}}Ks.prototype.bytesPerElement=8,bn(Ks,"StructArrayLayout2f8");class er extends Ze{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}er.prototype.size=40;class ji extends jn{get(o){return new er(this,o)}}bn(ji,"CollisionBoxArray");class Ci extends Ze{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(o){this._structArray.uint8[this._pos1+49]=o}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(o){this._structArray.uint8[this._pos1+50]=o}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(o){this._structArray.uint32[this._pos4+13]=o}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(o){this._structArray.uint8[this._pos1+58]=o}}Ci.prototype.size=60;class Lr extends Mi{get(o){return new Ci(this,o)}}bn(Lr,"PlacedSymbolArray");class Xs extends Ze{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(o){this._structArray.uint32[this._pos4+15]=o}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}Xs.prototype.size=76;class rr extends Ui{get(o){return new Xs(this,o)}}bn(rr,"SymbolInstanceArray");class ao extends Ki{getoffsetX(o){return this.float32[1*o+0]}}bn(ao,"GlyphOffsetArray");class Dd extends $t{getx(o){return this.int16[2*o+0]}gety(o){return this.int16[2*o+1]}}bn(Dd,"SymbolLineVertexArray");class qc extends Ze{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}qc.prototype.size=12;class Rd extends Ns{get(o){return new qc(this,o)}}bn(Rd,"FeatureIndexArray");class Ja extends ks{geta_centroid_pos0(o){return this.uint16[2*o+0]}geta_centroid_pos1(o){return this.uint16[2*o+1]}}bn(Ja,"FillExtrusionCentroidArray");const $l=it([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),Ld=it([{name:"a_dash",components:4,type:"Uint16"}]);var Pg={exports:{}},Lm={exports:{}};Lm.exports=function(c,o){var d,f,g,b,w,E,I,D;for(f=c.length-(d=3&c.length),g=o,w=3432918353,E=461845907,D=0;D<f;)I=255&c.charCodeAt(D)|(255&c.charCodeAt(++D))<<8|(255&c.charCodeAt(++D))<<16|(255&c.charCodeAt(++D))<<24,++D,g=27492+(65535&(b=5*(65535&(g=(g^=I=(65535&(I=(I=(65535&I)*w+(((I>>>16)*w&65535)<<16)&4294967295)<<15|I>>>17))*E+(((I>>>16)*E&65535)<<16)&4294967295)<<13|g>>>19))+((5*(g>>>16)&65535)<<16)&4294967295))+((58964+(b>>>16)&65535)<<16);switch(I=0,d){case 3:I^=(255&c.charCodeAt(D+2))<<16;case 2:I^=(255&c.charCodeAt(D+1))<<8;case 1:g^=I=(65535&(I=(I=(65535&(I^=255&c.charCodeAt(D)))*w+(((I>>>16)*w&65535)<<16)&4294967295)<<15|I>>>17))*E+(((I>>>16)*E&65535)<<16)&4294967295}return g^=c.length,g=2246822507*(65535&(g^=g>>>16))+((2246822507*(g>>>16)&65535)<<16)&4294967295,g=3266489909*(65535&(g^=g>>>13))+((3266489909*(g>>>16)&65535)<<16)&4294967295,(g^=g>>>16)>>>0};var Iv=Lm.exports,iM={exports:{}};iM.exports=function(c,o){for(var d,f=c.length,g=o^f,b=0;f>=4;)d=1540483477*(65535&(d=255&c.charCodeAt(b)|(255&c.charCodeAt(++b))<<8|(255&c.charCodeAt(++b))<<16|(255&c.charCodeAt(++b))<<24))+((1540483477*(d>>>16)&65535)<<16),g=1540483477*(65535&g)+((1540483477*(g>>>16)&65535)<<16)^(d=1540483477*(65535&(d^=d>>>24))+((1540483477*(d>>>16)&65535)<<16)),f-=4,++b;switch(f){case 3:g^=(255&c.charCodeAt(b+2))<<16;case 2:g^=(255&c.charCodeAt(b+1))<<8;case 1:g=1540483477*(65535&(g^=255&c.charCodeAt(b)))+((1540483477*(g>>>16)&65535)<<16)}return g=1540483477*(65535&(g^=g>>>13))+((1540483477*(g>>>16)&65535)<<16),(g^=g>>>15)>>>0};var rM=Iv,k8=iM.exports;Pg.exports=rM,Pg.exports.murmur3=rM,Pg.exports.murmur2=k8;var ZT=J(Pg.exports);class L0{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(o,d,f,g){this.ids.push(sM(o)),this.positions.push(d,f,g)}getPositions(o){const d=sM(o);let f=0,g=this.ids.length-1;for(;f<g;){const w=f+g>>1;this.ids[w]>=d?g=w:f=w+1}const b=[];for(;this.ids[f]===d;)b.push({index:this.positions[3*f],start:this.positions[3*f+1],end:this.positions[3*f+2]}),f++;return b}static serialize(o,d){const f=new Float64Array(o.ids),g=new Uint32Array(o.positions);return YT(f,g,0,f.length-1),d&&d.push(f.buffer,g.buffer),{ids:f,positions:g}}static deserialize(o){const d=new L0;return d.ids=o.ids,d.positions=o.positions,d.indexed=!0,d}}function sM(c){const o=+c;return!isNaN(o)&&Number.MIN_SAFE_INTEGER<=o&&o<=Number.MAX_SAFE_INTEGER?o:ZT(String(c))}function YT(c,o,d,f){for(;d<f;){const g=c[d+f>>1];let b=d-1,w=f+1;for(;;){do b++;while(c[b]<g);do w--;while(c[w]>g);if(b>=w)break;O0(c,b,w),O0(o,3*b,3*w),O0(o,3*b+1,3*w+1),O0(o,3*b+2,3*w+2)}w-d<f-w?(YT(c,o,d,w),d=w+1):(YT(c,o,w+1,f),f=w)}}function O0(c,o,d){const f=c[o];c[o]=c[d],c[d]=f}bn(L0,"FeaturePositionMap");class Od{constructor(o){this.gl=o.gl,this.initialized=!1}fetchUniformLocation(o,d){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(o,d),this.initialized=!0),!!this.location}}class V0 extends Od{constructor(o){super(o),this.current=0}set(o,d,f){this.fetchUniformLocation(o,d)&&this.current!==f&&(this.current=f,this.gl.uniform1f(this.location,f))}}class oM extends Od{constructor(o){super(o),this.current=[0,0,0,0]}set(o,d,f){this.fetchUniformLocation(o,d)&&(f[0]===this.current[0]&&f[1]===this.current[1]&&f[2]===this.current[2]&&f[3]===this.current[3]||(this.current=f,this.gl.uniform4f(this.location,f[0],f[1],f[2],f[3])))}}class aM extends Od{constructor(o){super(o),this.current=Ni.transparent}set(o,d,f){this.fetchUniformLocation(o,d)&&(f.r===this.current.r&&f.g===this.current.g&&f.b===this.current.b&&f.a===this.current.a||(this.current=f,this.gl.uniform4f(this.location,f.r,f.g,f.b,f.a)))}}const I8=new Float32Array(16),A8=new Float32Array(9),P8=new Float32Array(4);function JT(c){return[$e(255*c.r,255*c.g),$e(255*c.b,255*c.a)]}class Av{constructor(o,d,f){this.value=o,this.uniformNames=d.map((g=>`u_${g}`)),this.type=f}setUniform(o,d,f,g,b){d.set(o,b,g.constantOr(this.value))}getBinding(o,d){return this.type==="color"?new aM(o):new V0(o)}}class Mg{constructor(o,d){this.uniformNames=d.map((f=>`u_${f}`)),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(o){this.pixelRatio=o.pixelRatio||1,this.pattern=o.tl.concat(o.br)}setUniform(o,d,f,g,b){const w=b==="u_pattern"||b==="u_dash"?this.pattern:b==="u_pixel_ratio"?this.pixelRatio:null;w&&d.set(o,b,w)}getBinding(o,d){return d==="u_pattern"||d==="u_dash"?new oM(o):new V0(o)}}class Vd{constructor(o,d,f,g){this.expression=o,this.type=f,this.maxValue=0,this.paintVertexAttributes=d.map((b=>({name:`a_${b}`,type:"Float32",components:f==="color"?2:1,offset:0}))),this.paintVertexArray=new g}populatePaintArray(o,d,f,g,b,w){const E=this.paintVertexArray.length,I=this.expression.evaluate(new U(0),d,{},b,g,w);this.paintVertexArray.resize(o),this._setPaintValue(E,o,I)}updatePaintArray(o,d,f,g,b){const w=this.expression.evaluate({zoom:0},f,g,void 0,b);this._setPaintValue(o,d,w)}_setPaintValue(o,d,f){if(this.type==="color"){const g=JT(f);for(let b=o;b<d;b++)this.paintVertexArray.emplace(b,g[0],g[1])}else{for(let g=o;g<d;g++)this.paintVertexArray.emplace(g,f);this.maxValue=Math.max(this.maxValue,Math.abs(f))}}upload(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Kc{constructor(o,d,f,g,b,w){this.expression=o,this.uniformNames=d.map((E=>`u_${E}_t`)),this.type=f,this.useIntegerZoom=g,this.zoom=b,this.maxValue=0,this.paintVertexAttributes=d.map((E=>({name:`a_${E}`,type:"Float32",components:f==="color"?4:2,offset:0}))),this.paintVertexArray=new w}populatePaintArray(o,d,f,g,b,w){const E=this.expression.evaluate(new U(this.zoom),d,{},b,g,w),I=this.expression.evaluate(new U(this.zoom+1),d,{},b,g,w),D=this.paintVertexArray.length;this.paintVertexArray.resize(o),this._setPaintValue(D,o,E,I)}updatePaintArray(o,d,f,g,b){const w=this.expression.evaluate({zoom:this.zoom},f,g,void 0,b),E=this.expression.evaluate({zoom:this.zoom+1},f,g,void 0,b);this._setPaintValue(o,d,w,E)}_setPaintValue(o,d,f,g){if(this.type==="color"){const b=JT(f),w=JT(g);for(let E=o;E<d;E++)this.paintVertexArray.emplace(E,b[0],b[1],w[0],w[1])}else{for(let b=o;b<d;b++)this.paintVertexArray.emplace(b,f,g);this.maxValue=Math.max(this.maxValue,Math.abs(f),Math.abs(g))}}upload(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(o,d,f,g,b){const w=this.useIntegerZoom?Math.floor(f.zoom):f.zoom,E=Ae(this.expression.interpolationFactor(w,this.zoom,this.zoom+1),0,1);d.set(o,b,E)}getBinding(o,d){return new V0(o)}}class ef{constructor(o,d,f,g,b){this.expression=o,this.layerId=b,this.paintVertexAttributes=(f==="array"?Ld:$l).members;for(let w=0;w<d.length;++w);this.paintVertexArray=new g}populatePaintArray(o,d,f){const g=this.paintVertexArray.length;this.paintVertexArray.resize(o),this._setPaintValues(g,o,d.patterns&&d.patterns[this.layerId],f)}updatePaintArray(o,d,f,g,b,w){this._setPaintValues(o,d,f.patterns&&f.patterns[this.layerId],w)}_setPaintValues(o,d,f,g){if(!g||!f)return;const b=g[f];if(!b)return;const{tl:w,br:E,pixelRatio:I}=b;for(let D=o;D<d;D++)this.paintVertexArray.emplace(D,w[0],w[1],E[0],E[1],I)}upload(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class tf{constructor(o,d,f=(()=>!0)){this.binders={},this._buffers=[];const g=[];for(const b in o.paint._values){if(!f(b))continue;const w=o.paint.get(b);if(!(w instanceof be&&bu(w.property.specification)))continue;const E=D8(b,o.type),I=w.value,D=w.property.specification.type,z=!!w.property.useIntegerZoom,j=b==="line-dasharray"||b.endsWith("pattern"),K=b==="line-dasharray"&&o.layout.get("line-cap").value.kind!=="constant";if(I.kind!=="constant"||K)if(I.kind==="source"||K||j){const ie=lM(b,D,"source");this.binders[b]=j?new ef(I,E,D,ie,o.id):new Vd(I,E,D,ie),g.push(`/a_${b}`)}else{const ie=lM(b,D,"composite");this.binders[b]=new Kc(I,E,D,z,d,ie),g.push(`/z_${b}`)}else this.binders[b]=j?new Mg(I.value,E):new Av(I.value,E,D),g.push(`/u_${b}`)}this.cacheKey=g.sort().join("")}getMaxValue(o){const d=this.binders[o];return d instanceof Vd||d instanceof Kc?d.maxValue:0}populatePaintArrays(o,d,f,g,b,w){for(const E in this.binders){const I=this.binders[E];(I instanceof Vd||I instanceof Kc||I instanceof ef)&&I.populatePaintArray(o,d,f,g,b,w)}}setConstantPatternPositions(o){for(const d in this.binders){const f=this.binders[d];f instanceof Mg&&f.setConstantPatternPositions(o)}}updatePaintArrays(o,d,f,g,b,w){let E=!1;for(const I in o){const D=d.getPositions(I);for(const z of D){const j=f.feature(z.index);for(const K in this.binders){const ie=this.binders[K];if((ie instanceof Vd||ie instanceof Kc||ie instanceof ef)&&ie.expression.isStateDependent===!0){const oe=g.paint.get(K);ie.expression=oe.value,ie.updatePaintArray(z.start,z.end,j,o[I],b,w),E=!0}}}}return E}defines(){const o=[];for(const d in this.binders){const f=this.binders[d];(f instanceof Av||f instanceof Mg)&&o.push(...f.uniformNames.map((g=>`#define HAS_UNIFORM_${g}`)))}return o}getBinderAttributes(){const o=[];for(const d in this.binders){const f=this.binders[d];if(f instanceof Vd||f instanceof Kc||f instanceof ef)for(let g=0;g<f.paintVertexAttributes.length;g++)o.push(f.paintVertexAttributes[g].name)}return o}getBinderUniforms(){const o=[];for(const d in this.binders){const f=this.binders[d];if(f instanceof Av||f instanceof Mg||f instanceof Kc)for(const g of f.uniformNames)o.push(g)}return o}getPaintVertexBuffers(){return this._buffers}getUniforms(o){const d=[];for(const f in this.binders){const g=this.binders[f];if(g instanceof Av||g instanceof Mg||g instanceof Kc)for(const b of g.uniformNames)d.push({name:b,property:f,binding:g.getBinding(o,b)})}return d}setUniforms(o,d,f,g,b){for(const{name:w,property:E,binding:I}of f)this.binders[E].setUniform(o,I,b,g.get(E),w)}updatePaintBuffers(){this._buffers=[];for(const o in this.binders){const d=this.binders[o];(d instanceof Vd||d instanceof Kc||d instanceof ef)&&d.paintVertexBuffer&&this._buffers.push(d.paintVertexBuffer)}}upload(o){for(const d in this.binders){const f=this.binders[d];(f instanceof Vd||f instanceof Kc||f instanceof ef)&&f.upload(o)}this.updatePaintBuffers()}destroy(){for(const o in this.binders){const d=this.binders[o];(d instanceof Vd||d instanceof Kc||d instanceof ef)&&d.destroy()}}}class Om{constructor(o,d,f=(()=>!0)){this.programConfigurations={};for(const g of o)this.programConfigurations[g.id]=new tf(g,d,f);this.needsUpload=!1,this._featureMap=new L0,this._bufferOffset=0}populatePaintArrays(o,d,f,g,b,w,E){for(const I in this.programConfigurations)this.programConfigurations[I].populatePaintArrays(o,d,g,b,w,E);d.id!==void 0&&this._featureMap.add(d.id,f,this._bufferOffset,o),this._bufferOffset=o,this.needsUpload=!0}updatePaintArrays(o,d,f,g,b){for(const w of f)this.needsUpload=this.programConfigurations[w.id].updatePaintArrays(o,this._featureMap,d,w,g,b)||this.needsUpload}get(o){return this.programConfigurations[o]}upload(o){if(this.needsUpload){for(const d in this.programConfigurations)this.programConfigurations[d].upload(o);this.needsUpload=!1}}destroy(){for(const o in this.programConfigurations)this.programConfigurations[o].destroy()}}const M8={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function D8(c,o){return M8[c]||[c.replace(`${o}-`,"").replace(/-/g,"_")]}const R8={"line-pattern":{source:ht,composite:ht},"fill-pattern":{source:ht,composite:ht},"fill-extrusion-pattern":{source:ht,composite:ht},"line-dasharray":{source:xt,composite:xt}},L8={color:{source:Ks,composite:Wt},number:{source:Ki,composite:Ks}};function lM(c,o,d){const f=R8[c];return f&&f[d]||L8[o][d]}bn(Av,"ConstantBinder"),bn(Mg,"PatternConstantBinder"),bn(Vd,"SourceExpressionBinder"),bn(ef,"PatternCompositeBinder"),bn(Kc,"CompositeExpressionBinder"),bn(tf,"ProgramConfiguration",{omit:["_buffers"]}),bn(Om,"ProgramConfigurationSet");const cM="-transition";class Xc extends Ll{constructor(o,d){if(super(),this.id=o.id,this.type=o.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,o.type!=="custom"&&(this.metadata=o.metadata,this.minzoom=o.minzoom,this.maxzoom=o.maxzoom,o.type!=="background"&&o.type!=="sky"&&(this.source=o.source,this.sourceLayer=o["source-layer"],this.filter=o.filter),d.layout&&(this._unevaluatedLayout=new we(d.layout)),d.paint)){this._transitionablePaint=new ae(d.paint);for(const f in o.paint)this.setPaintProperty(f,o.paint[f],{validate:!1});for(const f in o.layout)this.setLayoutProperty(f,o.layout[f],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Te(d.paint)}}getLayoutProperty(o){return o==="visibility"?this.visibility:this._unevaluatedLayout.getValue(o)}setLayoutProperty(o,d,f={}){d!=null&&this._validate(Am,`layers.${this.id}.layout.${o}`,o,d,f)||(o!=="visibility"?this._unevaluatedLayout.setValue(o,d):this.visibility=d)}getPaintProperty(o){return Mn(o,cM)?this._transitionablePaint.getTransition(o.slice(0,-11)):this._transitionablePaint.getValue(o)}setPaintProperty(o,d,f={}){if(d!=null&&this._validate(kg,`layers.${this.id}.paint.${o}`,o,d,f))return!1;if(Mn(o,cM))return this._transitionablePaint.setTransition(o.slice(0,-11),d||void 0),!1;{const g=this._transitionablePaint._values[o],b=g.value.isDataDriven(),w=g.value;this._transitionablePaint.setValue(o,d),this._handleSpecialPaintPropertyUpdate(o);const E=this._transitionablePaint._values[o].value,I=E.isDataDriven(),D=Mn(o,"pattern")||o==="line-dasharray";return I||b||D||this._handleOverridablePaintPropertyUpdate(o,w,E)}}_handleSpecialPaintPropertyUpdate(o){}getProgramIds(){return null}getProgramConfiguration(o){return null}_handleOverridablePaintPropertyUpdate(o,d,f){return!1}isHidden(o){return!!(this.minzoom&&o<this.minzoom)||!!(this.maxzoom&&o>=this.maxzoom)||this.visibility==="none"}updateTransitions(o){this._transitioningPaint=this._transitionablePaint.transitioned(o,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(o,d){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(o,void 0,d)),this.paint=this._transitioningPaint.possiblyEvaluate(o,void 0,d)}serialize(){const o={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(o.layout=o.layout||{},o.layout.visibility=this.visibility),ze(o,((d,f)=>!(d===void 0||f==="layout"&&!Object.keys(d).length||f==="paint"&&!Object.keys(d).length)))}_validate(o,d,f,g,b={}){return(!b||b.validate!==!1)&&Qh(this,o.call(yc,{key:d,layerType:this.type,objectKey:f,value:g,styleSpec:Mt,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const o in this.paint._values){const d=this.paint.get(o);if(d instanceof be&&bu(d.property.specification)&&(d.value.kind==="source"||d.value.kind==="composite")&&d.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=Xh(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const O8=it([{name:"a_pos",components:2,type:"Int16"}],4),V8=it([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class us{constructor(o=[]){this.segments=o}prepareSegment(o,d,f,g){let b=this.segments[this.segments.length-1];return o>us.MAX_VERTEX_ARRAY_LENGTH&&dt(`Max vertices per segment is ${us.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${o}`),(!b||b.vertexLength+o>us.MAX_VERTEX_ARRAY_LENGTH||b.sortKey!==g)&&(b={vertexOffset:d.length,primitiveOffset:f.length,vertexLength:0,primitiveLength:0},g!==void 0&&(b.sortKey=g),this.segments.push(b)),b}get(){return this.segments}destroy(){for(const o of this.segments)for(const d in o.vaos)o.vaos[d].destroy()}static simpleSegment(o,d,f,g){return new us([{vertexOffset:o,primitiveOffset:d,vertexLength:f,primitiveLength:g,vaos:{},sortKey:0}])}}us.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,bn(us,"SegmentVector");var Bn=8192;class nf{constructor(o,d){o&&(d?this.setSouthWest(o).setNorthEast(d):o.length===4?this.setSouthWest([o[0],o[1]]).setNorthEast([o[2],o[3]]):this.setSouthWest(o[0]).setNorthEast(o[1]))}setNorthEast(o){return this._ne=o instanceof sr?new sr(o.lng,o.lat):sr.convert(o),this}setSouthWest(o){return this._sw=o instanceof sr?new sr(o.lng,o.lat):sr.convert(o),this}extend(o){const d=this._sw,f=this._ne;let g,b;if(o instanceof sr)g=o,b=o;else{if(!(o instanceof nf))return Array.isArray(o)?o.length===4||o.every(Array.isArray)?this.extend(nf.convert(o)):this.extend(sr.convert(o)):typeof o=="object"&&o!==null&&o.hasOwnProperty("lat")&&(o.hasOwnProperty("lon")||o.hasOwnProperty("lng"))?this.extend(sr.convert(o)):this;if(g=o._sw,b=o._ne,!g||!b)return this}return d||f?(d.lng=Math.min(g.lng,d.lng),d.lat=Math.min(g.lat,d.lat),f.lng=Math.max(b.lng,f.lng),f.lat=Math.max(b.lat,f.lat)):(this._sw=new sr(g.lng,g.lat),this._ne=new sr(b.lng,b.lat)),this}getCenter(){return new sr((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new sr(this.getWest(),this.getNorth())}getSouthEast(){return new sr(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(o){const{lng:d,lat:f}=sr.convert(o);let g=this._sw.lng<=d&&d<=this._ne.lng;return this._sw.lng>this._ne.lng&&(g=this._sw.lng>=d&&d>=this._ne.lng),this._sw.lat<=f&&f<=this._ne.lat&&g}static convert(o){return!o||o instanceof nf?o:new nf(o)}}var B0=1e-6,vl=typeof Float32Array<"u"?Float32Array:Array;function uM(){var c=new vl(9);return vl!=Float32Array&&(c[1]=0,c[2]=0,c[3]=0,c[5]=0,c[6]=0,c[7]=0),c[0]=1,c[4]=1,c[8]=1,c}function dM(c,o,d){var f=o[0],g=o[1],b=o[2],w=o[3],E=o[4],I=o[5],D=o[6],z=o[7],j=o[8],K=d[0],ie=d[1],oe=d[2],de=d[3],xe=d[4],De=d[5],He=d[6],Re=d[7],Ne=d[8];return c[0]=K*f+ie*w+oe*D,c[1]=K*g+ie*E+oe*z,c[2]=K*b+ie*I+oe*j,c[3]=de*f+xe*w+De*D,c[4]=de*g+xe*E+De*z,c[5]=de*b+xe*I+De*j,c[6]=He*f+Re*w+Ne*D,c[7]=He*g+Re*E+Ne*z,c[8]=He*b+Re*I+Ne*j,c}function Zc(c){return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}function QT(c,o){var d=o[0],f=o[1],g=o[2],b=o[3],w=o[4],E=o[5],I=o[6],D=o[7],z=o[8],j=o[9],K=o[10],ie=o[11],oe=o[12],de=o[13],xe=o[14],De=o[15],He=d*E-f*w,Re=d*I-g*w,Ne=d*D-b*w,Je=f*I-g*E,Ye=f*D-b*E,yt=g*D-b*I,_t=z*de-j*oe,Ot=z*xe-K*oe,Jt=z*De-ie*oe,St=j*xe-K*de,zt=j*De-ie*de,Nt=K*De-ie*xe,Kt=He*Nt-Re*zt+Ne*St+Je*Jt-Ye*Ot+yt*_t;return Kt?(c[0]=(E*Nt-I*zt+D*St)*(Kt=1/Kt),c[1]=(g*zt-f*Nt-b*St)*Kt,c[2]=(de*yt-xe*Ye+De*Je)*Kt,c[3]=(K*Ye-j*yt-ie*Je)*Kt,c[4]=(I*Jt-w*Nt-D*Ot)*Kt,c[5]=(d*Nt-g*Jt+b*Ot)*Kt,c[6]=(xe*Ne-oe*yt-De*Re)*Kt,c[7]=(z*yt-K*Ne+ie*Re)*Kt,c[8]=(w*zt-E*Jt+D*_t)*Kt,c[9]=(f*Jt-d*zt-b*_t)*Kt,c[10]=(oe*Ye-de*Ne+De*He)*Kt,c[11]=(j*Ne-z*Ye-ie*He)*Kt,c[12]=(E*Ot-w*St-I*_t)*Kt,c[13]=(d*St-f*Ot+g*_t)*Kt,c[14]=(de*Re-oe*Je-xe*He)*Kt,c[15]=(z*Je-j*Re+K*He)*Kt,c):null}function Vm(c,o,d){var f=o[0],g=o[1],b=o[2],w=o[3],E=o[4],I=o[5],D=o[6],z=o[7],j=o[8],K=o[9],ie=o[10],oe=o[11],de=o[12],xe=o[13],De=o[14],He=o[15],Re=d[0],Ne=d[1],Je=d[2],Ye=d[3];return c[0]=Re*f+Ne*E+Je*j+Ye*de,c[1]=Re*g+Ne*I+Je*K+Ye*xe,c[2]=Re*b+Ne*D+Je*ie+Ye*De,c[3]=Re*w+Ne*z+Je*oe+Ye*He,c[4]=(Re=d[4])*f+(Ne=d[5])*E+(Je=d[6])*j+(Ye=d[7])*de,c[5]=Re*g+Ne*I+Je*K+Ye*xe,c[6]=Re*b+Ne*D+Je*ie+Ye*De,c[7]=Re*w+Ne*z+Je*oe+Ye*He,c[8]=(Re=d[8])*f+(Ne=d[9])*E+(Je=d[10])*j+(Ye=d[11])*de,c[9]=Re*g+Ne*I+Je*K+Ye*xe,c[10]=Re*b+Ne*D+Je*ie+Ye*De,c[11]=Re*w+Ne*z+Je*oe+Ye*He,c[12]=(Re=d[12])*f+(Ne=d[13])*E+(Je=d[14])*j+(Ye=d[15])*de,c[13]=Re*g+Ne*I+Je*K+Ye*xe,c[14]=Re*b+Ne*D+Je*ie+Ye*De,c[15]=Re*w+Ne*z+Je*oe+Ye*He,c}function Pv(c,o,d){var f,g,b,w,E,I,D,z,j,K,ie,oe,de=d[0],xe=d[1],De=d[2];return o===c?(c[12]=o[0]*de+o[4]*xe+o[8]*De+o[12],c[13]=o[1]*de+o[5]*xe+o[9]*De+o[13],c[14]=o[2]*de+o[6]*xe+o[10]*De+o[14],c[15]=o[3]*de+o[7]*xe+o[11]*De+o[15]):(g=o[1],b=o[2],w=o[3],E=o[4],I=o[5],D=o[6],z=o[7],j=o[8],K=o[9],ie=o[10],oe=o[11],c[0]=f=o[0],c[1]=g,c[2]=b,c[3]=w,c[4]=E,c[5]=I,c[6]=D,c[7]=z,c[8]=j,c[9]=K,c[10]=ie,c[11]=oe,c[12]=f*de+E*xe+j*De+o[12],c[13]=g*de+I*xe+K*De+o[13],c[14]=b*de+D*xe+ie*De+o[14],c[15]=w*de+z*xe+oe*De+o[15]),c}function Bm(c,o,d){var f=d[0],g=d[1],b=d[2];return c[0]=o[0]*f,c[1]=o[1]*f,c[2]=o[2]*f,c[3]=o[3]*f,c[4]=o[4]*g,c[5]=o[5]*g,c[6]=o[6]*g,c[7]=o[7]*g,c[8]=o[8]*b,c[9]=o[9]*b,c[10]=o[10]*b,c[11]=o[11]*b,c[12]=o[12],c[13]=o[13],c[14]=o[14],c[15]=o[15],c}function eS(c,o,d){var f=Math.sin(d),g=Math.cos(d),b=o[4],w=o[5],E=o[6],I=o[7],D=o[8],z=o[9],j=o[10],K=o[11];return o!==c&&(c[0]=o[0],c[1]=o[1],c[2]=o[2],c[3]=o[3],c[12]=o[12],c[13]=o[13],c[14]=o[14],c[15]=o[15]),c[4]=b*g+D*f,c[5]=w*g+z*f,c[6]=E*g+j*f,c[7]=I*g+K*f,c[8]=D*g-b*f,c[9]=z*g-w*f,c[10]=j*g-E*f,c[11]=K*g-I*f,c}function F0(c,o,d){var f=Math.sin(d),g=Math.cos(d),b=o[0],w=o[1],E=o[2],I=o[3],D=o[8],z=o[9],j=o[10],K=o[11];return o!==c&&(c[4]=o[4],c[5]=o[5],c[6]=o[6],c[7]=o[7],c[12]=o[12],c[13]=o[13],c[14]=o[14],c[15]=o[15]),c[0]=b*g-D*f,c[1]=w*g-z*f,c[2]=E*g-j*f,c[3]=I*g-K*f,c[8]=b*f+D*g,c[9]=w*f+z*g,c[10]=E*f+j*g,c[11]=I*f+K*g,c}function hM(c,o){return c[0]=o[0],c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=o[1],c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=o[2],c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}function fM(c,o,d){var f,g,b,w=d[0],E=d[1],I=d[2],D=Math.hypot(w,E,I);return D<B0?null:(w*=D=1/D,E*=D,I*=D,f=Math.sin(o),g=Math.cos(o),c[0]=w*w*(b=1-g)+g,c[1]=E*w*b+I*f,c[2]=I*w*b-E*f,c[3]=0,c[4]=w*E*b-I*f,c[5]=E*E*b+g,c[6]=I*E*b+w*f,c[7]=0,c[8]=w*I*b+E*f,c[9]=E*I*b-w*f,c[10]=I*I*b+g,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c)}Math.hypot||(Math.hypot=function(){for(var c=0,o=arguments.length;o--;)c+=arguments[o]*arguments[o];return Math.sqrt(c)});var B8=Vm;function tS(){var c=new vl(3);return vl!=Float32Array&&(c[0]=0,c[1]=0,c[2]=0),c}function mM(c){var o=new vl(3);return o[0]=c[0],o[1]=c[1],o[2]=c[2],o}function Mv(c){return Math.hypot(c[0],c[1],c[2])}function Dg(c,o,d){var f=new vl(3);return f[0]=c,f[1]=o,f[2]=d,f}function Bd(c,o,d){return c[0]=o[0]+d[0],c[1]=o[1]+d[1],c[2]=o[2]+d[2],c}function nS(c,o,d){return c[0]=o[0]-d[0],c[1]=o[1]-d[1],c[2]=o[2]-d[2],c}function pM(c,o,d){return c[0]=o[0]*d[0],c[1]=o[1]*d[1],c[2]=o[2]*d[2],c}function Dv(c,o,d){return c[0]=Math.min(o[0],d[0]),c[1]=Math.min(o[1],d[1]),c[2]=Math.min(o[2],d[2]),c}function Rv(c,o,d){return c[0]=Math.max(o[0],d[0]),c[1]=Math.max(o[1],d[1]),c[2]=Math.max(o[2],d[2]),c}function jl(c,o,d){return c[0]=o[0]*d,c[1]=o[1]*d,c[2]=o[2]*d,c}function Lv(c,o,d,f){return c[0]=o[0]+d[0]*f,c[1]=o[1]+d[1]*f,c[2]=o[2]+d[2]*f,c}function ya(c,o){var d=o[0],f=o[1],g=o[2],b=d*d+f*f+g*g;return b>0&&(b=1/Math.sqrt(b)),c[0]=o[0]*b,c[1]=o[1]*b,c[2]=o[2]*b,c}function bc(c,o){return c[0]*o[0]+c[1]*o[1]+c[2]*o[2]}function iS(c,o,d){var f=o[0],g=o[1],b=o[2],w=d[0],E=d[1],I=d[2];return c[0]=g*I-b*E,c[1]=b*w-f*I,c[2]=f*E-g*w,c}function rs(c,o,d){var f=o[0],g=o[1],b=o[2],w=d[3]*f+d[7]*g+d[11]*b+d[15];return c[0]=(d[0]*f+d[4]*g+d[8]*b+d[12])/(w=w||1),c[1]=(d[1]*f+d[5]*g+d[9]*b+d[13])/w,c[2]=(d[2]*f+d[6]*g+d[10]*b+d[14])/w,c}function gM(c,o,d){var f=d[0],g=d[1],b=d[2],w=o[0],E=o[1],I=o[2],D=g*I-b*E,z=b*w-f*I,j=f*E-g*w,K=g*j-b*z,ie=b*D-f*j,oe=f*z-g*D,de=2*d[3];return z*=de,j*=de,ie*=2,oe*=2,c[0]=w+(D*=de)+(K*=2),c[1]=E+z+ie,c[2]=I+j+oe,c}var Ov,Yc=nS,F8=pM,z8=Mv;function _M(c,o,d){return c[0]=o[0]*d,c[1]=o[1]*d,c[2]=o[2]*d,c[3]=o[3]*d,c}function vM(c,o){var d=o[0],f=o[1],g=o[2],b=o[3],w=d*d+f*f+g*g+b*b;return w>0&&(w=1/Math.sqrt(w)),c[0]=d*w,c[1]=f*w,c[2]=g*w,c[3]=b*w,c}function Fm(c,o,d){var f=o[0],g=o[1],b=o[2],w=o[3];return c[0]=d[0]*f+d[4]*g+d[8]*b+d[12]*w,c[1]=d[1]*f+d[5]*g+d[9]*b+d[13]*w,c[2]=d[2]*f+d[6]*g+d[10]*b+d[14]*w,c[3]=d[3]*f+d[7]*g+d[11]*b+d[15]*w,c}function yM(){var c=new vl(4);return vl!=Float32Array&&(c[0]=0,c[1]=0,c[2]=0),c[3]=1,c}function bM(c){return c[0]=0,c[1]=0,c[2]=0,c[3]=1,c}function xM(c,o,d){d*=.5;var f=o[0],g=o[1],b=o[2],w=o[3],E=Math.sin(d),I=Math.cos(d);return c[0]=f*I+w*E,c[1]=g*I+b*E,c[2]=b*I-g*E,c[3]=w*I-f*E,c}function wM(c,o,d){d*=.5;var f=o[0],g=o[1],b=o[2],w=o[3],E=Math.sin(d),I=Math.cos(d);return c[0]=f*I-b*E,c[1]=g*I+w*E,c[2]=b*I+f*E,c[3]=w*I-g*E,c}tS(),Ov=new vl(4),vl!=Float32Array&&(Ov[0]=0,Ov[1]=0,Ov[2]=0,Ov[3]=0);var N8=vM;tS(),Dg(1,0,0),Dg(0,1,0),yM(),yM(),uM();const U8=it([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:TM}=U8,SM=it([{name:"a_pos_3",components:3,type:"Int16"}]);var Vv=it([{name:"a_pos",type:"Int16",components:2}]);class rS{constructor(o,d){this.pos=o,this.dir=d}intersectsPlane(o,d,f){const g=bc(d,this.dir);if(Math.abs(g)<1e-6)return!1;const b=((o[0]-this.pos[0])*d[0]+(o[1]-this.pos[1])*d[1]+(o[2]-this.pos[2])*d[2])/g;return f[0]=this.pos[0]+this.dir[0]*b,f[1]=this.pos[1]+this.dir[1]*b,f[2]=this.pos[2]+this.dir[2]*b,!0}closestPointOnSphere(o,d,f){if((function(ie,oe){var de=ie[0],xe=ie[1],De=ie[2],He=oe[0],Re=oe[1],Ne=oe[2];return Math.abs(de-He)<=B0*Math.max(1,Math.abs(de),Math.abs(He))&&Math.abs(xe-Re)<=B0*Math.max(1,Math.abs(xe),Math.abs(Re))&&Math.abs(De-Ne)<=B0*Math.max(1,Math.abs(De),Math.abs(Ne))})(this.pos,o)||d===0)return f[0]=f[1]=f[2]=0,!1;const[g,b,w]=this.dir,E=this.pos[0]-o[0],I=this.pos[1]-o[1],D=this.pos[2]-o[2],z=g*g+b*b+w*w,j=2*(E*g+I*b+D*w),K=j*j-4*z*(E*E+I*I+D*D-d*d);if(K<0){const ie=Math.max(-j/2,0),oe=E+g*ie,de=I+b*ie,xe=D+w*ie,De=Math.hypot(oe,de,xe);return f[0]=oe*d/De,f[1]=de*d/De,f[2]=xe*d/De,!1}{const ie=(-j-Math.sqrt(K))/(2*z);if(ie<0){const oe=Math.hypot(E,I,D);return f[0]=E*d/oe,f[1]=I*d/oe,f[2]=D*d/oe,!1}return f[0]=E+g*ie,f[1]=I+b*ie,f[2]=D+w*ie,!0}}}class sS{constructor(o,d,f,g,b){this.TL=o,this.TR=d,this.BR=f,this.BL=g,this.horizon=b}static fromInvProjectionMatrix(o,d,f){const g=[-1,1,1],b=[1,1,1],w=[1,-1,1],E=[-1,-1,1],I=rs(g,g,o),D=rs(b,b,o),z=rs(w,w,o),j=rs(E,E,o);return new sS(I,D,z,j,d/f)}}class oS{constructor(o,d){this.points=o,this.planes=d}static fromInvProjectionMatrix(o,d,f,g){const b=Math.pow(2,f),w=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((I=>{const D=Fm([],I,o),z=1/D[3]/d*b;return(function(j,K,ie){return j[0]=K[0]*ie[0],j[1]=K[1]*ie[1],j[2]=K[2]*ie[2],j[3]=K[3]*ie[3],j})(D,D,[z,z,g?1/D[3]:z,z])})),E=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((I=>{const D=ya([],iS([],Yc([],w[I[0]],w[I[1]]),Yc([],w[I[2]],w[I[1]]))),z=-bc(D,w[I[1]]);return D.concat(z)}));return new oS(w,E)}}class ba{static fromPoints(o){const d=[1/0,1/0,1/0],f=[-1/0,-1/0,-1/0];for(const g of o)Dv(d,d,g),Rv(f,f,g);return new ba(d,f)}static applyTransform(o,d){const f=o.getCorners();for(let g=0;g<f.length;++g)rs(f[g],f[g],d);return ba.fromPoints(f)}constructor(o,d){this.min=o,this.max=d,this.center=jl([],Bd([],this.min,this.max),.5)}quadrant(o){const d=[o%2==0,o<2],f=mM(this.min),g=mM(this.max);for(let b=0;b<d.length;b++)f[b]=d[b]?this.min[b]:this.center[b],g[b]=d[b]?this.center[b]:this.max[b];return g[2]=this.max[2],new ba(f,g)}distanceX(o){return Math.max(Math.min(this.max[0],o[0]),this.min[0])-o[0]}distanceY(o){return Math.max(Math.min(this.max[1],o[1]),this.min[1])-o[1]}distanceZ(o){return Math.max(Math.min(this.max[2],o[2]),this.min[2])-o[2]}getCorners(){const o=this.min,d=this.max;return[[o[0],o[1],o[2]],[d[0],o[1],o[2]],[d[0],d[1],o[2]],[o[0],d[1],o[2]],[o[0],o[1],d[2]],[d[0],o[1],d[2]],[d[0],d[1],d[2]],[o[0],d[1],d[2]]]}intersects(o){const d=this.getCorners();let f=!0;for(let g=0;g<o.planes.length;g++){const b=o.planes[g];let w=0;for(let E=0;E<d.length;E++)w+=bc(b,d[E])+b[3]>=0;if(w===0)return 0;w!==d.length&&(f=!1)}if(f)return 2;for(let g=0;g<3;g++){let b=Number.MAX_VALUE,w=-Number.MAX_VALUE;for(let E=0;E<o.points.length;E++){const I=o.points[E][g]-this.min[g];b=Math.min(b,I),w=Math.max(w,I)}if(w<0||b>this.max[g]-this.min[g])return 0}return 1}}const aS=5,EM=6,Cu=Bn/Math.PI/2,$8=16383,zm=64,Bv=[zm,32,16],xc=-Cu,wc=Cu,j8=[new ba([xc,xc,xc],[wc,wc,wc]),new ba([xc,xc,xc],[0,0,wc]),new ba([0,xc,xc],[wc,0,wc]),new ba([xc,0,xc],[0,wc,wc]),new ba([0,0,xc],[wc,wc,wc])];function z0(c){return c*Cu/Nv}function CM(c,o,d,f=!0){const g=jl([],c._camera.position,c.worldSize),b=[o,d,1,1];Fm(b,b,c.pixelMatrixInverse),_M(b,b,1/b[3]);const w=ya([],Yc([],b,g)),E=c.globeMatrix,I=[E[12],E[13],E[14]],D=Yc([],I,g),z=Mv(D),j=ya([],D),K=c.worldSize/(2*Math.PI),ie=bc(j,w),oe=Math.asin(K/z);if(oe<Math.acos(ie)){if(!f)return null;const Jt=[],St=[];jl(Jt,w,z/ie),ya(St,Yc(St,Jt,D)),ya(w,Bd(w,D,jl(w,St,Math.tan(oe)*z)))}const de=[];new rS(g,w).closestPointOnSphere(I,K,de);const xe=ya([],An(E,0)),De=ya([],An(E,1)),He=ya([],An(E,2)),Re=bc(xe,de),Ne=bc(De,de),Je=bc(He,de),Ye=Se(Math.asin(-Ne/K));let yt=Se(Math.atan2(Re,Je));yt=c.center.lng+(function(Jt,St){const zt=(St-Jt+180)%360-180;return zt<-180?zt+360:zt})(c.center.lng,yt);const _t=Iu(yt),Ot=Ae(Au(Ye),0,1);return new Vg(_t,Ot)}class W8{constructor(o,d,f){this.a=Yc([],o,f),this.b=Yc([],d,f),this.center=f;const g=ya([],this.a),b=ya([],this.b);this.angle=Math.acos(bc(g,b))}}function lS(c,o){if(c.angle===0)return null;let d;return d=c.a[o]===0?1/c.angle*.5*Math.PI:1/c.angle*Math.atan(c.b[o]/c.a[o]/Math.sin(c.angle)-1/Math.tan(c.angle)),d<0||d>1?null:(function(f,g,b,w){const E=Math.sin(b);return f*(Math.sin((1-w)*b)/E)+g*(Math.sin(w*b)/E)})(c.a[o],c.b[o],c.angle,Ae(d,0,1))+c.center[o]}function ku(c){if(c.z<=1)return j8[c.z+2*c.y+c.x];const o=cS(N0(c));return ba.fromPoints(o)}function Nm(c,o,d){return jl(c,c,1-d),Lv(c,c,o,d)}function kM(c,o){const d=Og(o.zoom);if(d===0)return ku(c);const f=N0(c),g=cS(f),b=Iu(f.getWest())*o.worldSize,w=Iu(f.getEast())*o.worldSize,E=Au(f.getNorth())*o.worldSize,I=Au(f.getSouth())*o.worldSize,D=[b,E,0],z=[w,E,0],j=[b,I,0],K=[w,I,0],ie=QT([],o.globeMatrix);return rs(D,D,ie),rs(z,z,ie),rs(j,j,ie),rs(K,K,ie),g[0]=Nm(g[0],j,d),g[1]=Nm(g[1],K,d),g[2]=Nm(g[2],z,d),g[3]=Nm(g[3],D,d),ba.fromPoints(g)}function IM(c,o,d){for(const f of c)rs(f,f,o),jl(f,f,d)}function H8(c,o,d){const f=o/c.worldSize,g=c.globeMatrix;if(d.z<=1){const _t=ku(d).getCorners();return IM(_t,g,f),ba.fromPoints(_t)}const b=N0(d),w=cS(b);IM(w,g,f);const E=Number.MAX_VALUE,I=[-E,-E,-E],D=[E,E,E];if(b.contains(c.center)){for(const Jt of w)Dv(D,D,Jt),Rv(I,I,Jt);I[2]=0;const _t=c.point,Ot=[_t.x*f,_t.y*f,0];return Dv(D,D,Ot),Rv(I,I,Ot),new ba(D,I)}const z=[g[12]*f,g[13]*f,g[14]*f],j=b.getCenter(),K=Ae(c.center.lat,-Do,Do),ie=Ae(j.lat,-Do,Do),oe=Iu(c.center.lng),de=Au(K);let xe=oe-Iu(j.lng);const De=de-Au(ie);xe>.5?xe-=1:xe<-.5&&(xe+=1);let He=0;Math.abs(xe)>Math.abs(De)?He=xe>=0?1:3:(He=De>=0?0:2,Lv(z,z,[g[4]*f,g[5]*f,g[6]*f],-Math.sin(ne(De>=0?b.getSouth():b.getNorth()))*Cu));const Re=w[He],Ne=w[(He+1)%4],Je=new W8(Re,Ne,z),Ye=[lS(Je,0)||Re[0],lS(Je,1)||Re[1],lS(Je,2)||Re[2]],yt=Og(c.zoom);if(yt>0){const _t=(function({x:Jt,y:St,z:zt},Nt,Kt,nn,Lt){const fn=1/(1<<zt);let Sn=Jt*fn,gn=Sn+fn,ii=St*fn,rn=ii+fn,Vn=0;const ri=(Sn+gn)/2-nn;return ri>.5?Vn=-1:ri<-.5&&(Vn=1),Sn=((Sn+Vn)*Nt-(nn*=Nt))*Kt+nn,gn=((gn+Vn)*Nt-nn)*Kt+nn,ii=(ii*Nt-(Lt*=Nt))*Kt+Lt,rn=(rn*Nt-Lt)*Kt+Lt,[[Sn,rn,0],[gn,rn,0],[gn,ii,0],[Sn,ii,0]]})(d,o,c._pixelsPerMercatorPixel,oe,de);for(let Jt=0;Jt<w.length;Jt++)Nm(w[Jt],_t[Jt],yt);const Ot=Bd([],_t[He],_t[(He+1)%4]);jl(Ot,Ot,.5),Nm(Ye,Ot,yt)}for(const _t of w)Dv(D,D,_t),Rv(I,I,_t);return D[2]=Math.min(Re[2],Ne[2]),Dv(D,D,Ye),Rv(I,I,Ye),new ba(D,I)}function N0({x:c,y:o,z:d}){const f=1/(1<<d),g=new sr(Wl(c*f),Mo((o+1)*f)),b=new sr(Wl((c+1)*f),Mo(o*f));return new nf(g,b)}function cS(c){const o=ne(c.getNorth()),d=ne(c.getSouth()),f=Math.cos(o),g=Math.cos(d),b=Math.sin(o),w=Math.sin(d),E=c.getWest(),I=c.getEast();return[Rg(g,w,E),Rg(g,w,I),Rg(f,b,I),Rg(f,b,E)]}function Rg(c,o,d,f=Cu){return d=ne(d),[c*Math.sin(d)*f,-o*f,c*Math.cos(d)*f]}function Lg(c,o,d){return Rg(Math.cos(ne(c)),Math.sin(ne(c)),o,d)}function Fv(c,o,d,f){const g=1<<d.z,b=(c/Bn+d.x)/g;return Lg(Mo((o/Bn+d.y)/g),Wl(b),f)}function U0({min:c,max:o}){return $8/Math.max(o[0]-c[0],o[1]-c[1],o[2]-c[2])}const AM=new Float64Array(16);function zv(c){const o=U0(c),d=hM(AM,[o,o,o]);return Pv(d,d,((f=[])[0]=-(g=c.min)[0],f[1]=-g[1],f[2]=-g[2],f));var f,g}function uS(c){const o=(f=c.min,(d=AM)[0]=1,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=1,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=1,d[11]=0,d[12]=f[0],d[13]=f[1],d[14]=f[2],d[15]=1,d);var d,f;const g=1/U0(c);return Bm(o,o,[g,g,g])}function PM(c,o,d,f,g){const b=(function(I){const D=Bn/(2*Math.PI);return I/(2*Math.PI)/D})(d),w=[c,o,-d/(2*Math.PI)],E=Zc(new Float64Array(16));return Pv(E,E,w),Bm(E,E,[b,b,b]),eS(E,E,ne(-g)),F0(E,E,ne(-f)),E}function Og(c){return Ke(aS,EM,c)}function MM(c,o){const d=Lg(o.lat,o.lng),f=(function(oe){const de=Lg(oe._center.lat,oe._center.lng);let xe=iS([],Dg(0,1,0),de);const De=fM([],-oe.angle,de);xe=rs(xe,xe,De),fM(De,-oe._pitch,xe);const He=ya([],de);return jl(He,He,z0(oe.cameraToCenterDistance/oe.pixelsPerMeter)),rs(He,He,De),Bd([],de,He)})(c);return w=(g=nS([],f,d))[0],E=g[1],I=g[2],D=(b=d)[0],z=b[1],j=b[2],ie=(K=Math.sqrt(w*w+E*E+I*I)*Math.sqrt(D*D+z*z+j*j))&&bc(g,b)/K,Math.acos(Math.min(Math.max(ie,-1),1));var g,b,w,E,I,D,z,j,K,ie}function dS(c,o){return MM(c,o)>Math.PI/2*1.01}const DM=ne(85),G8=Math.cos(DM),q8=Math.sin(DM),Nv=63710088e-1,RM=2*Math.PI*Nv;class rf{constructor(o,d){if(isNaN(o)||isNaN(d))throw new Error(`Invalid LngLat object: (${o}, ${d})`);if(this.lng=+o,this.lat=+d,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new rf(ve(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(o){const d=Math.PI/180,f=this.lat*d,g=o.lat*d,b=Math.sin(f)*Math.sin(g)+Math.cos(f)*Math.cos(g)*Math.cos((o.lng-this.lng)*d);return Nv*Math.acos(Math.min(b,1))}toBounds(o=0){const d=360*o/40075017,f=d/Math.cos(Math.PI/180*this.lat);return new nf(new rf(this.lng-f,this.lat-d),new rf(this.lng+f,this.lat+d))}toEcef(o){const d=z0(o);return Lg(this.lat,this.lng,Cu+d)}static convert(o){if(o instanceof rf)return o;if(Array.isArray(o)&&(o.length===2||o.length===3))return new rf(Number(o[0]),Number(o[1]));if(!Array.isArray(o)&&typeof o=="object"&&o!==null)return new rf(Number("lng"in o?o.lng:o.lon),Number(o.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}var sr=rf;function hS(c){return RM*Math.cos(c*Math.PI/180)}function Iu(c){return(180+c)/360}function Au(c){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c*Math.PI/360)))/360}function Jc(c,o){return c/hS(o)}function Wl(c){return 360*c-180}function Mo(c){return 360/Math.PI*Math.atan(Math.exp((180-360*c)*Math.PI/180))-90}function LM(c,o){return c*hS(Mo(o))}const Do=85.051129;function OM(c){return 1/Math.cos(c*Math.PI/180)}class Vg{constructor(o,d,f=0){this.x=+o,this.y=+d,this.z=+f}static fromLngLat(o,d=0){const f=sr.convert(o);return new Vg(Iu(f.lng),Au(f.lat),Jc(d,f.lat))}toLngLat(){return new sr(Wl(this.x),Mo(this.y))}toAltitude(){return LM(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/RM*OM(Mo(this.y))}}function fS(c,o,d,f,g,b,w,E,I){const D=(o+f)/2,z=(d+g)/2,j=new W(D,z);E(j),(function(K,ie,oe,de,xe,De){const He=oe-xe,Re=de-De;return Math.abs((de-ie)*He-(oe-K)*Re)/Math.hypot(He,Re)})(j.x,j.y,b.x,b.y,w.x,w.y)>=I?(fS(c,o,d,D,z,b,j,E,I),fS(c,D,z,f,g,j,w,E,I)):c.push(w)}function VM(c,o,d){let f=c[0],g=f.x,b=f.y;o(f);const w=[f];for(let E=1;E<c.length;E++){const I=c[E],{x:D,y:z}=I;o(I),fS(w,g,b,D,z,f,I,o,d),g=D,b=z,f=I}return w}function mS(c,o,d,f){if(f(o,d)){const g=o.add(d)._mult(.5);mS(c,o,g,f),mS(c,g,d,f)}else c.push(d)}function K8(c,o){let d=c[0];const f=[d];for(let g=1;g<c.length;g++){const b=c[g];mS(f,d,b,o),d=b}return f}const pS=Math.pow(2,14)-1,BM=-pS-1;function X8(c,o){const d=Math.round(c.x*o),f=Math.round(c.y*o);return c.x=Ae(d,BM,pS),c.y=Ae(f,BM,pS),(d<c.x||d>c.x+1||f<c.y||f>c.y+1)&&dt("Geometry exceeds allowed extent, reduce your vector tile buffer size"),c}function Fd(c,o,d){const f=c.loadGeometry(),g=c.extent,b=Bn/g;if(o&&d&&d.projection.isReprojectedInTileSpace){const w=1<<o.z,{scale:E,x:I,y:D,projection:z}=d,j=K=>{const ie=Wl((o.x+K.x/g)/w),oe=Mo((o.y+K.y/g)/w),de=z.project(ie,oe);K.x=(de.x*E-I)*g,K.y=(de.y*E-D)*g};for(let K=0;K<f.length;K++)if(c.type!==1)f[K]=VM(f[K],j,1);else{const ie=[];for(const oe of f[K])oe.x<0||oe.x>=g||oe.y<0||oe.y>=g||(j(oe),ie.push(oe));f[K]=ie}}for(const w of f)for(const E of w)X8(E,b);return f}function Um(c,o){return{type:c.type,id:c.id,properties:c.properties,geometry:o?Fd(c):[]}}function $0(c,o,d,f,g){c.emplaceBack(2*o+(f+1)/2,2*d+(g+1)/2)}function j0(c,o,d){c.emplaceBack(o.x,o.y,o.z,d[0]*16384,d[1]*16384,d[2]*16384)}class gS{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map((d=>d.id)),this.index=o.index,this.hasPattern=!1,this.projection=o.projection,this.layoutVertexArray=new $t,this.indexArray=new kn,this.segments=new us,this.programConfigurations=new Om(o.layers,o.zoom),this.stateDependentLayerIds=this.layers.filter((d=>d.isStateDependent())).map((d=>d.id))}populate(o,d,f,g){const b=this.layers[0],w=[];let E=null;b.type==="circle"&&(E=b.layout.get("circle-sort-key"));for(const{feature:D,id:z,index:j,sourceLayerIndex:K}of o){const ie=this.layers[0]._featureFilter.needGeometry,oe=Um(D,ie);if(!this.layers[0]._featureFilter.filter(new U(this.zoom),oe,f))continue;const de=E?E.evaluate(oe,{},f):void 0,xe={id:z,properties:D.properties,type:D.type,sourceLayerIndex:K,index:j,geometry:ie?oe.geometry:Fd(D,f,g),patterns:{},sortKey:de};w.push(xe)}E&&w.sort(((D,z)=>D.sortKey-z.sortKey));let I=null;g.projection.name==="globe"&&(this.globeExtVertexArray=new Ut,I=g.projection);for(const D of w){const{geometry:z,index:j,sourceLayerIndex:K}=D,ie=o[j].feature;this.addFeature(D,z,j,d.availableImages,f,I),d.featureIndex.insert(ie,z,j,K,this.index)}}update(o,d,f,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,d,this.stateDependentLayers,f,g)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,O8.members),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=o.createVertexBuffer(this.globeExtVertexArray,V8.members))),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(o,d,f,g,b,w){for(const E of d)for(const I of E){const D=I.x,z=I.y;if(D<0||D>=Bn||z<0||z>=Bn)continue;if(w){const ie=w.projectTilePoint(D,z,b),oe=w.upVector(b,D,z),de=this.globeExtVertexArray;j0(de,ie,oe),j0(de,ie,oe),j0(de,ie,oe),j0(de,ie,oe)}const j=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,o.sortKey),K=j.vertexLength;$0(this.layoutVertexArray,D,z,-1,-1),$0(this.layoutVertexArray,D,z,1,-1),$0(this.layoutVertexArray,D,z,1,1),$0(this.layoutVertexArray,D,z,-1,1),this.indexArray.emplaceBack(K,K+1,K+2),this.indexArray.emplaceBack(K,K+2,K+3),j.vertexLength+=4,j.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,f,{},g,b)}}function FM(c,o){for(let d=0;d<c.length;d++)if($m(o,c[d]))return!0;for(let d=0;d<o.length;d++)if($m(c,o[d]))return!0;return!!_S(c,o)}function Z8(c,o,d){return!!$m(c,o)||!!vS(o,c,d)}function zM(c,o){if(c.length===1)return UM(o,c[0]);for(let d=0;d<o.length;d++){const f=o[d];for(let g=0;g<f.length;g++)if($m(c,f[g]))return!0}for(let d=0;d<c.length;d++)if(UM(o,c[d]))return!0;for(let d=0;d<o.length;d++)if(_S(c,o[d]))return!0;return!1}function Y8(c,o,d){if(c.length>1){if(_S(c,o))return!0;for(let f=0;f<o.length;f++)if(vS(o[f],c,d))return!0}for(let f=0;f<c.length;f++)if(vS(c[f],o,d))return!0;return!1}function _S(c,o){if(c.length===0||o.length===0)return!1;for(let d=0;d<c.length-1;d++){const f=c[d],g=c[d+1];for(let b=0;b<o.length-1;b++)if(J8(f,g,o[b],o[b+1]))return!0}return!1}function J8(c,o,d,f){return nt(c,d,f)!==nt(o,d,f)&&nt(c,o,d)!==nt(c,o,f)}function vS(c,o,d){const f=d*d;if(o.length===1)return c.distSqr(o[0])<f;for(let g=1;g<o.length;g++)if(NM(c,o[g-1],o[g])<f)return!0;return!1}function NM(c,o,d){const f=o.distSqr(d);if(f===0)return c.distSqr(o);const g=((c.x-o.x)*(d.x-o.x)+(c.y-o.y)*(d.y-o.y))/f;return c.distSqr(g<0?o:g>1?d:d.sub(o)._mult(g)._add(o))}function UM(c,o){let d,f,g,b=!1;for(let w=0;w<c.length;w++){d=c[w];for(let E=0,I=d.length-1;E<d.length;I=E++)f=d[E],g=d[I],f.y>o.y!=g.y>o.y&&o.x<(g.x-f.x)*(o.y-f.y)/(g.y-f.y)+f.x&&(b=!b)}return b}function $m(c,o){let d=!1;for(let f=0,g=c.length-1;f<c.length;g=f++){const b=c[f],w=c[g];b.y>o.y!=w.y>o.y&&o.x<(w.x-b.x)*(o.y-b.y)/(w.y-b.y)+b.x&&(d=!d)}return d}function $M(c,o,d,f,g){for(const w of c)if(o<=w.x&&d<=w.y&&f>=w.x&&g>=w.y)return!0;const b=[new W(o,d),new W(o,g),new W(f,g),new W(f,d)];if(c.length>2){for(const w of b)if($m(c,w))return!0}for(let w=0;w<c.length-1;w++)if(Q8(c[w],c[w+1],b))return!0;return!1}function Q8(c,o,d){const f=d[0],g=d[2];if(c.x<f.x&&o.x<f.x||c.x>g.x&&o.x>g.x||c.y<f.y&&o.y<f.y||c.y>g.y&&o.y>g.y)return!1;const b=nt(c,o,d[0]);return b!==nt(c,o,d[1])||b!==nt(c,o,d[2])||b!==nt(c,o,d[3])}function Bg(c,o,d){const f=o.paint.get(c).value;return f.kind==="constant"?f.value:d.programConfigurations.get(o.id).getMaxValue(c)}function W0(c){return Math.sqrt(c[0]*c[0]+c[1]*c[1])}function jM(c,o,d,f,g){if(!o[0]&&!o[1])return c;const b=W.convert(o)._mult(g);d==="viewport"&&b._rotate(-f);const w=[];for(let E=0;E<c.length;E++)w.push(c[E].sub(b));return w}function WM(c,o,d,f){const g=W.convert(c)._mult(f);return o==="viewport"&&g._rotate(-d),g}bn(gS,"CircleBucket",{omit:["layers"]});const eW=new Me({"circle-sort-key":new _e(Mt.layout_circle["circle-sort-key"])});var tW={paint:new Me({"circle-radius":new _e(Mt.paint_circle["circle-radius"]),"circle-color":new _e(Mt.paint_circle["circle-color"]),"circle-blur":new _e(Mt.paint_circle["circle-blur"]),"circle-opacity":new _e(Mt.paint_circle["circle-opacity"]),"circle-translate":new le(Mt.paint_circle["circle-translate"]),"circle-translate-anchor":new le(Mt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new le(Mt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new le(Mt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new _e(Mt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new _e(Mt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new _e(Mt.paint_circle["circle-stroke-opacity"])}),layout:eW};function HM(c,o,d,f,g,b,w,E,I){if(b&&c.queryGeometry.isAboveHorizon)return!1;b&&(I*=c.pixelToTileUnitsFactor);const D=c.tileID.canonical,z=d.projection.upVectorScale(D,d.center.lat,d.worldSize).metersToTile;for(const j of o)for(const K of j){const ie=K.add(E),oe=g&&d.elevation?d.elevation.exaggeration()*g.getElevationAt(ie.x,ie.y,!0):0,de=d.projection.projectTilePoint(ie.x,ie.y,D);if(oe>0){const Re=d.projection.upVector(D,ie.x,ie.y);de.x+=Re[0]*z*oe,de.y+=Re[1]*z*oe,de.z+=Re[2]*z*oe}const xe=b?ie:nW(de.x,de.y,de.z,f),De=b?c.tilespaceRays.map((Re=>rW(Re,oe))):c.queryGeometry.screenGeometry,He=Fm([],[de.x,de.y,de.z,1],f);if(!w&&b?I*=He[3]/d.cameraToCenterDistance:w&&!b&&(I*=d.cameraToCenterDistance/He[3]),b){const Re=Mo((K.y/Bn+D.y)/(1<<D.z));I/=d.projection.pixelsPerMeter(Re,1)/Jc(1,Re)}if(Z8(De,xe,I))return!0}return!1}function nW(c,o,d,f){const g=Fm([],[c,o,d,1],f);return new W(g[0]/g[3],g[1]/g[3])}const GM=Dg(0,0,0),iW=Dg(0,0,1);function rW(c,o){const d=tS();return GM[2]=o,c.intersectsPlane(GM,iW,d),new W(d[0],d[1])}class qM extends gS{}function KM(c,{width:o,height:d},f,g){if(g){if(g instanceof Uint8ClampedArray)g=new Uint8Array(g.buffer);else if(g.length!==o*d*f)throw new RangeError("mismatched image size")}else g=new Uint8Array(o*d*f);return c.width=o,c.height=d,c.data=g,c}function XM(c,o,d){const{width:f,height:g}=o;f===c.width&&g===c.height||(yS(c,o,{x:0,y:0},{x:0,y:0},{width:Math.min(c.width,f),height:Math.min(c.height,g)},d),c.width=f,c.height=g,c.data=o.data)}function yS(c,o,d,f,g,b){if(g.width===0||g.height===0)return o;if(g.width>c.width||g.height>c.height||d.x>c.width-g.width||d.y>c.height-g.height)throw new RangeError("out of range source coordinates for image copy");if(g.width>o.width||g.height>o.height||f.x>o.width-g.width||f.y>o.height-g.height)throw new RangeError("out of range destination coordinates for image copy");const w=c.data,E=o.data;for(let I=0;I<g.height;I++){const D=((d.y+I)*c.width+d.x)*b,z=((f.y+I)*o.width+f.x)*b;for(let j=0;j<g.width*b;j++)E[z+j]=w[D+j]}return o}bn(qM,"HeatmapBucket",{omit:["layers"]});class zd{constructor(o,d){KM(this,o,1,d)}resize(o){XM(this,new zd(o),1)}clone(){return new zd({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(o,d,f,g,b){yS(o,d,f,g,b,1)}}class yl{constructor(o,d){KM(this,o,4,d)}resize(o){XM(this,new yl(o),4)}replace(o,d){d?this.data.set(o):this.data=o instanceof Uint8ClampedArray?new Uint8Array(o.buffer):o}clone(){return new yl({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(o,d,f,g,b){yS(o,d,f,g,b,4)}}bn(zd,"AlphaImage"),bn(yl,"RGBAImage");var sW={paint:new Me({"heatmap-radius":new _e(Mt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new _e(Mt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new le(Mt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Ie(Mt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new le(Mt.paint_heatmap["heatmap-opacity"])})};function bS(c){const o={},d=c.resolution||256,f=c.clips?c.clips.length:1,g=c.image||new yl({width:d,height:f}),b=(w,E,I)=>{o[c.evaluationKey]=I;const D=c.expression.evaluate(o);g.data[w+E+0]=Math.floor(255*D.r/D.a),g.data[w+E+1]=Math.floor(255*D.g/D.a),g.data[w+E+2]=Math.floor(255*D.b/D.a),g.data[w+E+3]=Math.floor(255*D.a)};if(c.clips)for(let w=0,E=0;w<f;++w,E+=4*d)for(let I=0,D=0;I<d;I++,D+=4){const z=I/(d-1),{start:j,end:K}=c.clips[w];b(E,D,j*(1-z)+K*z)}else for(let w=0,E=0;w<d;w++,E+=4)b(0,E,w/(d-1));return g}var oW={paint:new Me({"hillshade-illumination-direction":new le(Mt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new le(Mt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new le(Mt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new le(Mt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new le(Mt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new le(Mt.paint_hillshade["hillshade-accent-color"])})};const aW=it([{name:"a_pos",components:2,type:"Int16"}],4),{members:lW}=aW;var xS={exports:{}};function H0(c,o,d){d=d||2;var f,g,b,w,E,I,D,z=o&&o.length,j=z?o[0]*d:c.length,K=ZM(c,0,j,d,!0),ie=[];if(!K||K.next===K.prev)return ie;if(z&&(K=(function(de,xe,De,He){var Re,Ne,Je,Ye=[];for(Re=0,Ne=xe.length;Re<Ne;Re++)(Je=ZM(de,xe[Re]*He,Re<Ne-1?xe[Re+1]*He:de.length,He,!1))===Je.next&&(Je.steiner=!0),Ye.push(gW(Je));for(Ye.sort(fW),Re=0;Re<Ye.length;Re++)De=mW(Ye[Re],De);return De})(c,o,K,d)),c.length>80*d){f=b=c[0],g=w=c[1];for(var oe=d;oe<j;oe+=d)(E=c[oe])<f&&(f=E),(I=c[oe+1])<g&&(g=I),E>b&&(b=E),I>w&&(w=I);D=(D=Math.max(b-f,w-g))!==0?32767/D:0}return Uv(K,ie,d,f,g,D,0),ie}function ZM(c,o,d,f,g){var b,w;if(g===SS(c,o,d,f)>0)for(b=o;b<d;b+=f)w=QM(b,c[b],c[b+1],w);else for(b=d-f;b>=o;b-=f)w=QM(b,c[b],c[b+1],w);return w&&G0(w,w.next)&&(jv(w),w=w.next),w}function jm(c,o){if(!c)return c;o||(o=c);var d,f=c;do if(d=!1,f.steiner||!G0(f,f.next)&&ds(f.prev,f,f.next)!==0)f=f.next;else{if(jv(f),(f=o=f.prev)===f.next)break;d=!0}while(d||f!==o);return o}function Uv(c,o,d,f,g,b,w){if(c){!w&&b&&(function(z,j,K,ie){var oe=z;do oe.z===0&&(oe.z=wS(oe.x,oe.y,j,K,ie)),oe.prevZ=oe.prev,oe.nextZ=oe.next,oe=oe.next;while(oe!==z);oe.prevZ.nextZ=null,oe.prevZ=null,(function(de){var xe,De,He,Re,Ne,Je,Ye,yt,_t=1;do{for(De=de,de=null,Ne=null,Je=0;De;){for(Je++,He=De,Ye=0,xe=0;xe<_t&&(Ye++,He=He.nextZ);xe++);for(yt=_t;Ye>0||yt>0&&He;)Ye!==0&&(yt===0||!He||De.z<=He.z)?(Re=De,De=De.nextZ,Ye--):(Re=He,He=He.nextZ,yt--),Ne?Ne.nextZ=Re:de=Re,Re.prevZ=Ne,Ne=Re;De=He}Ne.nextZ=null,_t*=2}while(Je>1)})(oe)})(c,f,g,b);for(var E,I,D=c;c.prev!==c.next;)if(E=c.prev,I=c.next,b?uW(c,f,g,b):cW(c))o.push(E.i/d|0),o.push(c.i/d|0),o.push(I.i/d|0),jv(c),c=I.next,D=I.next;else if((c=I)===D){w?w===1?Uv(c=dW(jm(c),o,d),o,d,f,g,b,2):w===2&&hW(c,o,d,f,g,b):Uv(jm(c),o,d,f,g,b,1);break}}}function cW(c){var o=c.prev,d=c,f=c.next;if(ds(o,d,f)>=0)return!1;for(var g=o.x,b=d.x,w=f.x,E=o.y,I=d.y,D=f.y,z=g<b?g<w?g:w:b<w?b:w,j=E<I?E<D?E:D:I<D?I:D,K=g>b?g>w?g:w:b>w?b:w,ie=E>I?E>D?E:D:I>D?I:D,oe=f.next;oe!==o;){if(oe.x>=z&&oe.x<=K&&oe.y>=j&&oe.y<=ie&&Fg(g,E,b,I,w,D,oe.x,oe.y)&&ds(oe.prev,oe,oe.next)>=0)return!1;oe=oe.next}return!0}function uW(c,o,d,f){var g=c.prev,b=c,w=c.next;if(ds(g,b,w)>=0)return!1;for(var E=g.x,I=b.x,D=w.x,z=g.y,j=b.y,K=w.y,ie=E<I?E<D?E:D:I<D?I:D,oe=z<j?z<K?z:K:j<K?j:K,de=E>I?E>D?E:D:I>D?I:D,xe=z>j?z>K?z:K:j>K?j:K,De=wS(ie,oe,o,d,f),He=wS(de,xe,o,d,f),Re=c.prevZ,Ne=c.nextZ;Re&&Re.z>=De&&Ne&&Ne.z<=He;){if(Re.x>=ie&&Re.x<=de&&Re.y>=oe&&Re.y<=xe&&Re!==g&&Re!==w&&Fg(E,z,I,j,D,K,Re.x,Re.y)&&ds(Re.prev,Re,Re.next)>=0||(Re=Re.prevZ,Ne.x>=ie&&Ne.x<=de&&Ne.y>=oe&&Ne.y<=xe&&Ne!==g&&Ne!==w&&Fg(E,z,I,j,D,K,Ne.x,Ne.y)&&ds(Ne.prev,Ne,Ne.next)>=0))return!1;Ne=Ne.nextZ}for(;Re&&Re.z>=De;){if(Re.x>=ie&&Re.x<=de&&Re.y>=oe&&Re.y<=xe&&Re!==g&&Re!==w&&Fg(E,z,I,j,D,K,Re.x,Re.y)&&ds(Re.prev,Re,Re.next)>=0)return!1;Re=Re.prevZ}for(;Ne&&Ne.z<=He;){if(Ne.x>=ie&&Ne.x<=de&&Ne.y>=oe&&Ne.y<=xe&&Ne!==g&&Ne!==w&&Fg(E,z,I,j,D,K,Ne.x,Ne.y)&&ds(Ne.prev,Ne,Ne.next)>=0)return!1;Ne=Ne.nextZ}return!0}function dW(c,o,d){var f=c;do{var g=f.prev,b=f.next.next;!G0(g,b)&&YM(g,f,f.next,b)&&$v(g,b)&&$v(b,g)&&(o.push(g.i/d|0),o.push(f.i/d|0),o.push(b.i/d|0),jv(f),jv(f.next),f=c=b),f=f.next}while(f!==c);return jm(f)}function hW(c,o,d,f,g,b){var w=c;do{for(var E=w.next.next;E!==w.prev;){if(w.i!==E.i&&_W(w,E)){var I=JM(w,E);return w=jm(w,w.next),I=jm(I,I.next),Uv(w,o,d,f,g,b,0),void Uv(I,o,d,f,g,b,0)}E=E.next}w=w.next}while(w!==c)}function fW(c,o){return c.x-o.x}function mW(c,o){var d=(function(g,b){var w,E=b,I=g.x,D=g.y,z=-1/0;do{if(D<=E.y&&D>=E.next.y&&E.next.y!==E.y){var j=E.x+(D-E.y)*(E.next.x-E.x)/(E.next.y-E.y);if(j<=I&&j>z&&(z=j,w=E.x<E.next.x?E:E.next,j===I))return w}E=E.next}while(E!==b);if(!w)return null;var K,ie=w,oe=w.x,de=w.y,xe=1/0;E=w;do I>=E.x&&E.x>=oe&&I!==E.x&&Fg(D<de?I:z,D,oe,de,D<de?z:I,D,E.x,E.y)&&(K=Math.abs(D-E.y)/(I-E.x),$v(E,g)&&(K<xe||K===xe&&(E.x>w.x||E.x===w.x&&pW(w,E)))&&(w=E,xe=K)),E=E.next;while(E!==ie);return w})(c,o);if(!d)return o;var f=JM(d,c);return jm(f,f.next),jm(d,d.next)}function pW(c,o){return ds(c.prev,c,o.prev)<0&&ds(o.next,c,c.next)<0}function wS(c,o,d,f,g){return(c=1431655765&((c=858993459&((c=252645135&((c=16711935&((c=(c-d)*g|0)|c<<8))|c<<4))|c<<2))|c<<1))|(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-f)*g|0)|o<<8))|o<<4))|o<<2))|o<<1))<<1}function gW(c){var o=c,d=c;do(o.x<d.x||o.x===d.x&&o.y<d.y)&&(d=o),o=o.next;while(o!==c);return d}function Fg(c,o,d,f,g,b,w,E){return(g-w)*(o-E)>=(c-w)*(b-E)&&(c-w)*(f-E)>=(d-w)*(o-E)&&(d-w)*(b-E)>=(g-w)*(f-E)}function _W(c,o){return c.next.i!==o.i&&c.prev.i!==o.i&&!(function(d,f){var g=d;do{if(g.i!==d.i&&g.next.i!==d.i&&g.i!==f.i&&g.next.i!==f.i&&YM(g,g.next,d,f))return!0;g=g.next}while(g!==d);return!1})(c,o)&&($v(c,o)&&$v(o,c)&&(function(d,f){var g=d,b=!1,w=(d.x+f.x)/2,E=(d.y+f.y)/2;do g.y>E!=g.next.y>E&&g.next.y!==g.y&&w<(g.next.x-g.x)*(E-g.y)/(g.next.y-g.y)+g.x&&(b=!b),g=g.next;while(g!==d);return b})(c,o)&&(ds(c.prev,c,o.prev)||ds(c,o.prev,o))||G0(c,o)&&ds(c.prev,c,c.next)>0&&ds(o.prev,o,o.next)>0)}function ds(c,o,d){return(o.y-c.y)*(d.x-o.x)-(o.x-c.x)*(d.y-o.y)}function G0(c,o){return c.x===o.x&&c.y===o.y}function YM(c,o,d,f){var g=K0(ds(c,o,d)),b=K0(ds(c,o,f)),w=K0(ds(d,f,c)),E=K0(ds(d,f,o));return g!==b&&w!==E||!(g!==0||!q0(c,d,o))||!(b!==0||!q0(c,f,o))||!(w!==0||!q0(d,c,f))||!(E!==0||!q0(d,o,f))}function q0(c,o,d){return o.x<=Math.max(c.x,d.x)&&o.x>=Math.min(c.x,d.x)&&o.y<=Math.max(c.y,d.y)&&o.y>=Math.min(c.y,d.y)}function K0(c){return c>0?1:c<0?-1:0}function $v(c,o){return ds(c.prev,c,c.next)<0?ds(c,o,c.next)>=0&&ds(c,c.prev,o)>=0:ds(c,o,c.prev)<0||ds(c,c.next,o)<0}function JM(c,o){var d=new TS(c.i,c.x,c.y),f=new TS(o.i,o.x,o.y),g=c.next,b=o.prev;return c.next=o,o.prev=c,d.next=g,g.prev=d,f.next=d,d.prev=f,b.next=f,f.prev=b,f}function QM(c,o,d,f){var g=new TS(c,o,d);return f?(g.next=f.next,g.prev=f,f.next.prev=g,f.next=g):(g.prev=g,g.next=g),g}function jv(c){c.next.prev=c.prev,c.prev.next=c.next,c.prevZ&&(c.prevZ.nextZ=c.nextZ),c.nextZ&&(c.nextZ.prevZ=c.prevZ)}function TS(c,o,d){this.i=c,this.x=o,this.y=d,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function SS(c,o,d,f){for(var g=0,b=o,w=d-f;b<d;b+=f)g+=(c[w]-c[b])*(c[b+1]+c[w+1]),w=b;return g}xS.exports=H0,xS.exports.default=H0,H0.deviation=function(c,o,d,f){var g=o&&o.length,b=Math.abs(SS(c,0,g?o[0]*d:c.length,d));if(g)for(var w=0,E=o.length;w<E;w++)b-=Math.abs(SS(c,o[w]*d,w<E-1?o[w+1]*d:c.length,d));var I=0;for(w=0;w<f.length;w+=3){var D=f[w]*d,z=f[w+1]*d,j=f[w+2]*d;I+=Math.abs((c[D]-c[j])*(c[z+1]-c[D+1])-(c[D]-c[z])*(c[j+1]-c[D+1]))}return b===0&&I===0?0:Math.abs((I-b)/b)},H0.flatten=function(c){for(var o=c[0][0].length,d={vertices:[],holes:[],dimensions:o},f=0,g=0;g<c.length;g++){for(var b=0;b<c[g].length;b++)for(var w=0;w<o;w++)d.vertices.push(c[g][b][w]);g>0&&d.holes.push(f+=c[g-1].length)}return d};var ES=J(xS.exports);function vW(c,o,d,f,g){eD(c,o,d,f||c.length-1,g||yW)}function eD(c,o,d,f,g){for(;f>d;){if(f-d>600){var b=f-d+1,w=o-d+1,E=Math.log(b),I=.5*Math.exp(2*E/3),D=.5*Math.sqrt(E*I*(b-I)/b)*(w-b/2<0?-1:1);eD(c,o,Math.max(d,Math.floor(o-w*I/b+D)),Math.min(f,Math.floor(o+(b-w)*I/b+D)),g)}var z=c[o],j=d,K=f;for(Wv(c,d,o),g(c[f],z)>0&&Wv(c,d,f);j<K;){for(Wv(c,j,K),j++,K--;g(c[j],z)<0;)j++;for(;g(c[K],z)>0;)K--}g(c[d],z)===0?Wv(c,d,K):Wv(c,++K,f),K<=o&&(d=K+1),o<=K&&(f=K-1)}}function Wv(c,o,d){var f=c[o];c[o]=c[d],c[d]=f}function yW(c,o){return c<o?-1:c>o?1:0}function CS(c,o){const d=c.length;if(d<=1)return[c];const f=[];let g,b;for(let w=0;w<d;w++){const E=Et(c[w]);E!==0&&(c[w].area=Math.abs(E),b===void 0&&(b=E<0),b===E<0?(g&&f.push(g),g=[c[w]]):g.push(c[w]))}if(g&&f.push(g),o>1)for(let w=0;w<f.length;w++)f[w].length<=o||(vW(f[w],o,1,f[w].length-1,bW),f[w]=f[w].slice(0,o));return f}function bW(c,o){return o.area-c.area}function kS(c,o,d){const f=d.patternDependencies;let g=!1;for(const b of o){const w=b.paint.get(`${c}-pattern`);w.isConstant()||(g=!0);const E=w.constantOr(null);E&&(g=!0,f[E]=!0)}return g}function IS(c,o,d,f,g){const b=g.patternDependencies;for(const w of o){const E=w.paint.get(`${c}-pattern`).value;if(E.kind!=="constant"){let I=E.evaluate({zoom:f},d,{},g.availableImages);I=I&&I.name?I.name:I,b[I]=!0,d.patterns[w.id]=I}}return d}class X0{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map((d=>d.id)),this.index=o.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new $t,this.indexArray=new kn,this.indexArray2=new ks,this.programConfigurations=new Om(o.layers,o.zoom),this.segments=new us,this.segments2=new us,this.stateDependentLayerIds=this.layers.filter((d=>d.isStateDependent())).map((d=>d.id)),this.projection=o.projection}populate(o,d,f,g){this.hasPattern=kS("fill",this.layers,d);const b=this.layers[0].layout.get("fill-sort-key"),w=[];for(const{feature:E,id:I,index:D,sourceLayerIndex:z}of o){const j=this.layers[0]._featureFilter.needGeometry,K=Um(E,j);if(!this.layers[0]._featureFilter.filter(new U(this.zoom),K,f))continue;const ie=b?b.evaluate(K,{},f,d.availableImages):void 0,oe={id:I,properties:E.properties,type:E.type,sourceLayerIndex:z,index:D,geometry:j?K.geometry:Fd(E,f,g),patterns:{},sortKey:ie};w.push(oe)}b&&w.sort(((E,I)=>E.sortKey-I.sortKey));for(const E of w){const{geometry:I,index:D,sourceLayerIndex:z}=E;if(this.hasPattern){const j=IS("fill",this.layers,E,this.zoom,d);this.patternFeatures.push(j)}else this.addFeature(E,I,D,f,{},d.availableImages);d.featureIndex.insert(o[D].feature,I,D,z,this.index)}}update(o,d,f,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,d,this.stateDependentLayers,f,g)}addFeatures(o,d,f,g,b){for(const w of this.patternFeatures)this.addFeature(w,w.geometry,w.index,d,f,g)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,lW),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.indexBuffer2=o.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(o,d,f,g,b,w=[]){for(const E of CS(d,500)){let I=0;for(const oe of E)I+=oe.length;const D=this.segments.prepareSegment(I,this.layoutVertexArray,this.indexArray),z=D.vertexLength,j=[],K=[];for(const oe of E){if(oe.length===0)continue;oe!==E[0]&&K.push(j.length/2);const de=this.segments2.prepareSegment(oe.length,this.layoutVertexArray,this.indexArray2),xe=de.vertexLength;this.layoutVertexArray.emplaceBack(oe[0].x,oe[0].y),this.indexArray2.emplaceBack(xe+oe.length-1,xe),j.push(oe[0].x),j.push(oe[0].y);for(let De=1;De<oe.length;De++)this.layoutVertexArray.emplaceBack(oe[De].x,oe[De].y),this.indexArray2.emplaceBack(xe+De-1,xe+De),j.push(oe[De].x),j.push(oe[De].y);de.vertexLength+=oe.length,de.primitiveLength+=oe.length}const ie=ES(j,K);for(let oe=0;oe<ie.length;oe+=3)this.indexArray.emplaceBack(z+ie[oe],z+ie[oe+1],z+ie[oe+2]);D.vertexLength+=I,D.primitiveLength+=ie.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,f,b,w,g)}}bn(X0,"FillBucket",{omit:["layers","patternFeatures"]});const xW=new Me({"fill-sort-key":new _e(Mt.layout_fill["fill-sort-key"])});var wW={paint:new Me({"fill-antialias":new le(Mt.paint_fill["fill-antialias"]),"fill-opacity":new _e(Mt.paint_fill["fill-opacity"]),"fill-color":new _e(Mt.paint_fill["fill-color"]),"fill-outline-color":new _e(Mt.paint_fill["fill-outline-color"]),"fill-translate":new le(Mt.paint_fill["fill-translate"]),"fill-translate-anchor":new le(Mt.paint_fill["fill-translate-anchor"]),"fill-pattern":new _e(Mt.paint_fill["fill-pattern"])}),layout:xW};const TW=it([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),SW=it([{name:"a_centroid_pos",components:2,type:"Uint16"}]),EW=it([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:CW}=TW;var Z0={},kW=$,tD=zg;function zg(c,o,d,f,g){this.properties={},this.extent=d,this.type=0,this._pbf=c,this._geometry=-1,this._keys=f,this._values=g,c.readFields(IW,this,o)}function IW(c,o,d){c==1?o.id=d.readVarint():c==2?(function(f,g){for(var b=f.readVarint()+f.pos;f.pos<b;){var w=g._keys[f.readVarint()],E=g._values[f.readVarint()];g.properties[w]=E}})(d,o):c==3?o.type=d.readVarint():c==4&&(o._geometry=d.pos)}function AW(c){for(var o,d,f=0,g=0,b=c.length,w=b-1;g<b;w=g++)f+=((d=c[w]).x-(o=c[g]).x)*(o.y+d.y);return f}zg.types=["Unknown","Point","LineString","Polygon"],zg.prototype.loadGeometry=function(){var c=this._pbf;c.pos=this._geometry;for(var o,d=c.readVarint()+c.pos,f=1,g=0,b=0,w=0,E=[];c.pos<d;){if(g<=0){var I=c.readVarint();f=7&I,g=I>>3}if(g--,f===1||f===2)b+=c.readSVarint(),w+=c.readSVarint(),f===1&&(o&&E.push(o),o=[]),o.push(new kW(b,w));else{if(f!==7)throw new Error("unknown command "+f);o&&o.push(o[0].clone())}}return o&&E.push(o),E},zg.prototype.bbox=function(){var c=this._pbf;c.pos=this._geometry;for(var o=c.readVarint()+c.pos,d=1,f=0,g=0,b=0,w=1/0,E=-1/0,I=1/0,D=-1/0;c.pos<o;){if(f<=0){var z=c.readVarint();d=7&z,f=z>>3}if(f--,d===1||d===2)(g+=c.readSVarint())<w&&(w=g),g>E&&(E=g),(b+=c.readSVarint())<I&&(I=b),b>D&&(D=b);else if(d!==7)throw new Error("unknown command "+d)}return[w,I,E,D]},zg.prototype.toGeoJSON=function(c,o,d){var f,g,b=this.extent*Math.pow(2,d),w=this.extent*c,E=this.extent*o,I=this.loadGeometry(),D=zg.types[this.type];function z(ie){for(var oe=0;oe<ie.length;oe++){var de=ie[oe];ie[oe]=[360*(de.x+w)/b-180,360/Math.PI*Math.atan(Math.exp((180-360*(de.y+E)/b)*Math.PI/180))-90]}}switch(this.type){case 1:var j=[];for(f=0;f<I.length;f++)j[f]=I[f][0];z(I=j);break;case 2:for(f=0;f<I.length;f++)z(I[f]);break;case 3:for(I=(function(ie){var oe=ie.length;if(oe<=1)return[ie];for(var de,xe,De=[],He=0;He<oe;He++){var Re=AW(ie[He]);Re!==0&&(xe===void 0&&(xe=Re<0),xe===Re<0?(de&&De.push(de),de=[ie[He]]):de.push(ie[He]))}return de&&De.push(de),De})(I),f=0;f<I.length;f++)for(g=0;g<I[f].length;g++)z(I[f][g])}I.length===1?I=I[0]:D="Multi"+D;var K={type:"Feature",geometry:{type:D,coordinates:I},properties:this.properties};return"id"in this&&(K.id=this.id),K};var PW=tD,nD=iD;function iD(c,o){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=c,this._keys=[],this._values=[],this._features=[],c.readFields(MW,this,o),this.length=this._features.length}function MW(c,o,d){c===15?o.version=d.readVarint():c===1?o.name=d.readString():c===5?o.extent=d.readVarint():c===2?o._features.push(d.pos):c===3?o._keys.push(d.readString()):c===4&&o._values.push((function(f){for(var g=null,b=f.readVarint()+f.pos;f.pos<b;){var w=f.readVarint()>>3;g=w===1?f.readString():w===2?f.readFloat():w===3?f.readDouble():w===4?f.readVarint64():w===5?f.readVarint():w===6?f.readSVarint():w===7?f.readBoolean():null}return g})(d))}iD.prototype.feature=function(c){if(c<0||c>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[c];var o=this._pbf.readVarint()+this._pbf.pos;return new PW(this._pbf,o,this.extent,this._keys,this._values)};var DW=nD;function RW(c,o,d){if(c===3){var f=new DW(d,d.readVarint()+d.pos);f.length&&(o[f.name]=f)}}var AS=Z0.VectorTile=function(c,o){this.layers=c.readFields(RW,{},o)},Y0=Z0.VectorTileFeature=tD;function J0(c,o,d,f){const g=[],b=f===0?(w,E,I,D,z,j)=>{w.push(new W(j,I+(j-E)/(D-E)*(z-I)))}:(w,E,I,D,z,j)=>{w.push(new W(E+(j-I)/(z-I)*(D-E),j))};for(const w of c){const E=[];for(const I of w){if(I.length<=2)continue;const D=[];for(let K=0;K<I.length-1;K++){const ie=I[K].x,oe=I[K].y,de=I[K+1].x,xe=I[K+1].y,De=f===0?ie:oe,He=f===0?de:xe;De<o?He>o&&b(D,ie,oe,de,xe,o):De>d?He<d&&b(D,ie,oe,de,xe,d):D.push(I[K]),He<o&&De>=o&&b(D,ie,oe,de,xe,o),He>d&&De<=d&&b(D,ie,oe,de,xe,d)}let z=I[I.length-1];const j=f===0?z.x:z.y;j>=o&&j<=d&&D.push(z),D.length&&(z=D[D.length-1],D[0].x===z.x&&D[0].y===z.y||D.push(D[0]),E.push(D))}E.length&&g.push(E)}return g}Z0.VectorTileLayer=nD;const LW=Y0.types,OW=Math.pow(2,13);function Hv(c,o,d,f,g,b,w,E){c.emplaceBack((o<<1)+w,(d<<1)+b,(Math.floor(f*OW)<<1)+g,Math.round(E))}function Gv(c,o,d){c.emplaceBack(o.x,o.y,o.z,d[0]*16384,d[1]*16384,d[2]*16384)}class rD{constructor(){this.acc=new W(0,0),this.polyCount=[]}startRing(o){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new W(o.x,o.y),this.max=new W(o.x,o.y))}append(o,d){this.currentPolyCount.edges++,this.acc._add(o);const f=this.min,g=this.max;o.x<f.x?f.x=o.x:o.x>g.x&&(g.x=o.x),o.y<f.y?f.y=o.y:o.y>g.y&&(g.y=o.y),((o.x===0||o.x===Bn)&&o.x===d.x)!=((o.y===0||o.y===Bn)&&o.y===d.y)&&this.processBorderOverlap(o,d),d.x<0!=o.x<0&&this.addBorderIntersection(0,Yn(d.y,o.y,(0-d.x)/(o.x-d.x))),d.x>Bn!=o.x>Bn&&this.addBorderIntersection(1,Yn(d.y,o.y,(Bn-d.x)/(o.x-d.x))),d.y<0!=o.y<0&&this.addBorderIntersection(2,Yn(d.x,o.x,(0-d.y)/(o.y-d.y))),d.y>Bn!=o.y>Bn&&this.addBorderIntersection(3,Yn(d.x,o.x,(Bn-d.y)/(o.y-d.y)))}addBorderIntersection(o,d){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const f=this.borders[o];d<f[0]&&(f[0]=d),d>f[1]&&(f[1]=d)}processBorderOverlap(o,d){if(o.x===d.x){if(o.y===d.y)return;const f=o.x===0?0:1;this.addBorderIntersection(f,d.y),this.addBorderIntersection(f,o.y)}else{const f=o.y===0?2:3;this.addBorderIntersection(f,d.x),this.addBorderIntersection(f,o.x)}}centroid(){const o=this.polyCount.reduce(((d,f)=>d+f.edges),0);return o!==0?this.acc.div(o)._round():new W(0,0)}span(){return new W(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce(((o,d)=>o+ +(d[0]!==Number.MAX_VALUE)),0)}}class qv{constructor(o){this.zoom=o.zoom,this.canonical=o.canonical,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map((d=>d.id)),this.index=o.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=o.projection,this.layoutVertexArray=new Rt,this.centroidVertexArray=new Ja,this.indexArray=new kn,this.programConfigurations=new Om(o.layers,o.zoom),this.segments=new us,this.stateDependentLayerIds=this.layers.filter((d=>d.isStateDependent())).map((d=>d.id)),this.enableTerrain=o.enableTerrain}populate(o,d,f,g){this.features=[],this.hasPattern=kS("fill-extrusion",this.layers,d),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=(function(b){const w=Math.exp(Math.PI*(1-b.y/(1<<b.z)*2));return 80150034*w/(w*w+1)/Bn/(1<<b.z)})(f),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:b,id:w,index:E,sourceLayerIndex:I}of o){const D=this.layers[0]._featureFilter.needGeometry,z=Um(b,D);if(!this.layers[0]._featureFilter.filter(new U(this.zoom),z,f))continue;const j={id:w,sourceLayerIndex:I,index:E,geometry:D?z.geometry:Fd(b,f,g),properties:b.properties,type:b.type,patterns:{}},K=this.layoutVertexArray.length;this.hasPattern?this.features.push(IS("fill-extrusion",this.layers,j,this.zoom,d)):this.addFeature(j,j.geometry,E,f,{},d.availableImages,g),d.featureIndex.insert(b,j.geometry,E,I,this.index,K)}this.sortBorders()}addFeatures(o,d,f,g,b){for(const w of this.features){const{geometry:E}=w;this.addFeature(w,E,w.index,d,f,g,b)}this.sortBorders()}update(o,d,f,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,d,this.stateDependentLayers,f,g)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,CW),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=o.createVertexBuffer(this.layoutVertexExtArray,EW.members,!0))),this.programConfigurations.upload(o),this.uploaded=!0}uploadCentroid(o){this.centroidVertexArray.length!==0&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=o.createVertexBuffer(this.centroidVertexArray,SW.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(o,d,f,g,b,w,E){const I=[new W(0,0),new W(Bn,Bn)],D=E.projection,z=D.name==="globe",j=this.enableTerrain&&!z?new rD:null,K=LW[o.type]==="Polygon";z&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new Ut);const ie=CS(d,500);for(let De=ie.length-1;De>=0;De--){const He=ie[De];(He.length===0||(oe=He[0]).every((Re=>Re.x<=0))||oe.every((Re=>Re.x>=Bn))||oe.every((Re=>Re.y<=0))||oe.every((Re=>Re.y>=Bn)))&&ie.splice(De,1)}var oe;let de;if(z)de=dD(ie,I,g);else{de=[];for(const De of ie)de.push({polygon:De,bounds:I})}const xe=K?this.edgeRadius:0;for(const{polygon:De,bounds:He}of de){let Re=0,Ne=0;for(const Ye of De)K&&!Ye[0].equals(Ye[Ye.length-1])&&Ye.push(Ye[0]),Ne+=K?Ye.length-1:Ye.length;const Je=this.segments.prepareSegment((K?5:4)*Ne,this.layoutVertexArray,this.indexArray);if(K){const Ye=[],yt=[];Re=Je.vertexLength;for(const Ot of De){let Jt,St;Ot.length&&Ot!==De[0]&&yt.push(Ye.length/2),Jt=Ot[1].sub(Ot[0])._perp()._unit();for(let zt=1;zt<Ot.length;zt++){const Nt=Ot[zt],Kt=Ot[zt===Ot.length-1?1:zt+1];let{x:nn,y:Lt}=Nt;if(xe){St=Kt.sub(Nt)._perp()._unit();const fn=Jt.add(St)._unit(),Sn=xe*Math.min(4,1/(Jt.x*fn.x+Jt.y*fn.y));nn+=Sn*fn.x,Lt+=Sn*fn.y,Jt=St}Hv(this.layoutVertexArray,nn,Lt,0,0,1,1,0),Je.vertexLength++,Ye.push(Nt.x,Nt.y),z&&Gv(this.layoutVertexExtArray,D.projectTilePoint(nn,Lt,g),D.upVector(g,nn,Lt))}}const _t=ES(Ye,yt);for(let Ot=0;Ot<_t.length;Ot+=3)this.indexArray.emplaceBack(Re+_t[Ot],Re+_t[Ot+2],Re+_t[Ot+1]),Je.primitiveLength++}for(const Ye of De){j&&Ye.length&&j.startRing(Ye[0]);let yt,_t,Ot,Jt=Ye.length>4&&lD(Ye[Ye.length-2],Ye[0],Ye[1]),St=xe?VW(Ye[Ye.length-2],Ye[0],Ye[1],xe):0;_t=Ye[1].sub(Ye[0])._perp()._unit();let zt=!0;for(let Nt=1,Kt=0;Nt<Ye.length;Nt++){let nn=Ye[Nt-1],Lt=Ye[Nt];const fn=Ye[Nt===Ye.length-1?1:Nt+1];if(j&&K&&j.currentPolyCount.top++,aD(Lt,nn,He)){xe&&(_t=fn.sub(Lt)._perp()._unit(),zt=!zt);continue}j&&j.append(Lt,nn);const Sn=Lt.sub(nn)._perp(),gn=Sn.x/(Math.abs(Sn.x)+Math.abs(Sn.y)),ii=Sn.y>0?1:0,rn=nn.dist(Lt);if(Kt+rn>32768&&(Kt=0),xe){Ot=fn.sub(Lt)._perp()._unit();let si=oD(nn,Lt,fn,sD(_t,Ot),xe);isNaN(si)&&(si=0);const zn=Lt.sub(nn)._unit();nn=nn.add(zn.mult(St))._round(),Lt=Lt.add(zn.mult(-si))._round(),St=si,_t=Ot}const Vn=Je.vertexLength,ri=Ye.length>4&&lD(nn,Lt,fn);let Ai=cD(Kt,Jt,zt);if(Hv(this.layoutVertexArray,nn.x,nn.y,gn,ii,0,0,Ai),Hv(this.layoutVertexArray,nn.x,nn.y,gn,ii,0,1,Ai),Kt+=rn,Ai=cD(Kt,ri,!zt),Jt=ri,Hv(this.layoutVertexArray,Lt.x,Lt.y,gn,ii,0,0,Ai),Hv(this.layoutVertexArray,Lt.x,Lt.y,gn,ii,0,1,Ai),Je.vertexLength+=4,this.indexArray.emplaceBack(Vn+0,Vn+1,Vn+2),this.indexArray.emplaceBack(Vn+1,Vn+3,Vn+2),Je.primitiveLength+=2,xe){const si=Re+(Nt===1?Ye.length-2:Nt-2),zn=Nt===1?Re:si+1;if(this.indexArray.emplaceBack(Vn+1,si,Vn+3),this.indexArray.emplaceBack(si,zn,Vn+3),Je.primitiveLength+=2,yt===void 0&&(yt=Vn),!aD(fn,Ye[Nt],He)){const xr=Nt===Ye.length-1?yt:Je.vertexLength;this.indexArray.emplaceBack(Vn+2,Vn+3,xr),this.indexArray.emplaceBack(Vn+3,xr+1,xr),this.indexArray.emplaceBack(Vn+3,zn,xr+1),Je.primitiveLength+=3}zt=!zt}if(z){const si=this.layoutVertexExtArray,zn=D.projectTilePoint(nn.x,nn.y,g),xr=D.projectTilePoint(Lt.x,Lt.y,g),ai=D.upVector(g,nn.x,nn.y),li=D.upVector(g,Lt.x,Lt.y);Gv(si,zn,ai),Gv(si,zn,ai),Gv(si,xr,li),Gv(si,xr,li)}}K&&(Re+=Ye.length-1)}}if(j&&j.polyCount.length>0){if(j.borders){j.vertexArrayOffset=this.centroidVertexArray.length;const De=j.borders,He=this.featuresOnBorder.push(j)-1;for(let Re=0;Re<4;Re++)De[Re][0]!==Number.MAX_VALUE&&this.borders[Re].push(He)}this.encodeCentroid(j.borders?void 0:j.centroid(),j)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,f,b,w,g)}sortBorders(){for(let o=0;o<4;o++)this.borders[o].sort(((d,f)=>this.featuresOnBorder[d].borders[o][0]-this.featuresOnBorder[f].borders[o][0]))}encodeCentroid(o,d,f=!0){let g,b;if(o)if(o.y!==0){const E=d.span()._mult(this.tileToMeter);g=(Math.max(o.x,1)<<3)+Math.min(7,Math.round(E.x/10)),b=(Math.max(o.y,1)<<3)+Math.min(7,Math.round(E.y/10))}else g=Math.ceil(7*(o.x+450)),b=0;else g=0,b=+f;let w=f?this.centroidVertexArray.length:d.vertexArrayOffset;for(const E of d.polyCount){f&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*E.edges+E.top);for(let I=0;I<E.top;I++)this.centroidVertexArray.emplace(w++,g,b);for(let I=0;I<2*E.edges;I++)this.centroidVertexArray.emplace(w++,0,b),this.centroidVertexArray.emplace(w++,g,b)}}}function sD(c,o){const d=c.add(o)._unit();return c.x*d.x+c.y*d.y}function VW(c,o,d,f){const g=o.sub(c)._perp()._unit(),b=d.sub(o)._perp()._unit();return oD(c,o,d,sD(g,b),f)}function oD(c,o,d,f,g){const b=Math.sqrt(1-f*f);return Math.min(c.dist(o)/3,o.dist(d)/3,g*b/f)}function aD(c,o,d){return c.x<d[0].x&&o.x<d[0].x||c.x>d[1].x&&o.x>d[1].x||c.y<d[0].y&&o.y<d[0].y||c.y>d[1].y&&o.y>d[1].y}function lD(c,o,d){if(c.x<0||c.x>=Bn||o.x<0||o.x>=Bn||d.x<0||d.x>=Bn)return!1;const f=d.sub(o),g=f.perp(),b=c.sub(o);return(f.x*b.x+f.y*b.y)/Math.sqrt((f.x*f.x+f.y*f.y)*(b.x*b.x+b.y*b.y))>-.866&&g.x*b.x+g.y*b.y<0}function cD(c,o,d){const f=o?2|c:-3&c;return d?1|f:-2&f}function uD(){const c=Math.PI/32,o=Math.tan(c),d=Nv;return d*Math.sqrt(1+2*o*o)-d}function dD(c,o,d){const f=1<<d.z,g=Wl(d.x/f),b=Wl((d.x+1)/f),w=Mo(d.y/f),E=Mo((d.y+1)/f);return(function(I,D,z,j,K=0,ie){const oe=[];if(!I.length||!z||!j)return oe;const de=(Ye,yt)=>{for(const _t of Ye)oe.push({polygon:_t,bounds:yt})},xe=Math.ceil(Math.log2(z)),De=Math.ceil(Math.log2(j)),He=xe-De,Re=[];for(let Ye=0;Ye<Math.abs(He);Ye++)Re.push(He>0?0:1);for(let Ye=0;Ye<Math.min(xe,De);Ye++)Re.push(0),Re.push(1);let Ne=I;if(Ne=J0(Ne,D[0].y-K,D[1].y+K,1),Ne=J0(Ne,D[0].x-K,D[1].x+K,0),!Ne.length)return oe;const Je=[];for(Re.length?Je.push({polygons:Ne,bounds:D,depth:0}):de(Ne,D);Je.length;){const Ye=Je.pop(),yt=Ye.depth,_t=Re[yt],Ot=Ye.bounds[0],Jt=Ye.bounds[1],St=_t===0?Ot.x:Ot.y,zt=_t===0?Jt.x:Jt.y,Nt=ie?ie(_t,St,zt):.5*(St+zt),Kt=J0(Ye.polygons,St-K,Nt+K,_t),nn=J0(Ye.polygons,Nt-K,zt+K,_t);if(Kt.length){const Lt=[Ot,new W(_t===0?Nt:Jt.x,_t===1?Nt:Jt.y)];Re.length>yt+1?Je.push({polygons:Kt,bounds:Lt,depth:yt+1}):de(Kt,Lt)}if(nn.length){const Lt=[new W(_t===0?Nt:Ot.x,_t===1?Nt:Ot.y),Jt];Re.length>yt+1?Je.push({polygons:nn,bounds:Lt,depth:yt+1}):de(nn,Lt)}}return oe})(c,o,Math.ceil((b-g)/11.25),Math.ceil((w-E)/11.25),1,((I,D,z)=>{if(I===0)return .5*(D+z);{const j=Mo((d.y+D/Bn)/f);return(Au(.5*(Mo((d.y+z/Bn)/f)+j))*f-d.y)*Bn}}))}bn(qv,"FillExtrusionBucket",{omit:["layers","features"]}),bn(rD,"PartMetadata");const BW=new Me({"fill-extrusion-edge-radius":new le(Mt["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var FW={paint:new Me({"fill-extrusion-opacity":new le(Mt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new _e(Mt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new le(Mt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new le(Mt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new _e(Mt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new _e(Mt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new _e(Mt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new le(Mt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new le(Mt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new le(Mt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-rounded-roof":new le(Mt["paint_fill-extrusion"]["fill-extrusion-rounded-roof"])}),layout:BW};function hD(c,o,d){var f=2*Math.PI*6378137/256/Math.pow(2,d);return[c*f-2*Math.PI*6378137/2,o*f-2*Math.PI*6378137/2]}class Q0{constructor(o,d,f){this.z=o,this.x=d,this.y=f,this.key=Kv(0,o,o,d,f)}equals(o){return this.z===o.z&&this.x===o.x&&this.y===o.y}url(o,d){const f=(function(b,w,E){var I=hD(256*b,256*(w=Math.pow(2,E)-w-1),E),D=hD(256*(b+1),256*(w+1),E);return I[0]+","+I[1]+","+D[0]+","+D[1]})(this.x,this.y,this.z),g=(function(b,w,E){let I,D="";for(let z=b;z>0;z--)I=1<<z-1,D+=(w&I?1:0)+(E&I?2:0);return D})(this.z,this.x,this.y);return o[(this.x+this.y)%o.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(d==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",g).replace("{bbox-epsg-3857}",f)}toString(){return`${this.z}/${this.x}/${this.y}`}}class fD{constructor(o,d){this.wrap=o,this.canonical=d,this.key=Kv(o,d.z,d.z,d.x,d.y)}}class xa{constructor(o,d,f,g,b){this.overscaledZ=o,this.wrap=d,this.canonical=new Q0(f,+g,+b),this.key=d===0&&o===f?this.canonical.key:Kv(d,o,f,g,b)}equals(o){return this.overscaledZ===o.overscaledZ&&this.wrap===o.wrap&&this.canonical.equals(o.canonical)}scaledTo(o){const d=this.canonical.z-o;return o>this.canonical.z?new xa(o,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new xa(o,this.wrap,o,this.canonical.x>>d,this.canonical.y>>d)}calculateScaledKey(o,d=!0){if(this.overscaledZ===o&&d)return this.key;if(o>this.canonical.z)return Kv(this.wrap*+d,o,this.canonical.z,this.canonical.x,this.canonical.y);{const f=this.canonical.z-o;return Kv(this.wrap*+d,o,o,this.canonical.x>>f,this.canonical.y>>f)}}isChildOf(o){if(o.wrap!==this.wrap)return!1;const d=this.canonical.z-o.canonical.z;return o.overscaledZ===0||o.overscaledZ<this.overscaledZ&&o.canonical.x===this.canonical.x>>d&&o.canonical.y===this.canonical.y>>d}children(o){if(this.overscaledZ>=o)return[new xa(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const d=this.canonical.z+1,f=2*this.canonical.x,g=2*this.canonical.y;return[new xa(d,this.wrap,d,f,g),new xa(d,this.wrap,d,f+1,g),new xa(d,this.wrap,d,f,g+1),new xa(d,this.wrap,d,f+1,g+1)]}isLessThan(o){return this.wrap<o.wrap||!(this.wrap>o.wrap)&&(this.overscaledZ<o.overscaledZ||!(this.overscaledZ>o.overscaledZ)&&(this.canonical.x<o.canonical.x||!(this.canonical.x>o.canonical.x)&&this.canonical.y<o.canonical.y))}wrapped(){return new xa(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(o){return new xa(this.overscaledZ,o,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new fD(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function Kv(c,o,d,f,g){const b=1<<Math.min(d,22);let w=b*(g%b)+f%b;return c&&d<22&&(w+=b*b*((c<0?-2*c-1:2*c)%(1<<2*(22-d)))),16*(32*w+d)+(o-d)}bn(Q0,"CanonicalTileID"),bn(xa,"OverscaledTileID",{omit:["projMatrix"]});class Ng extends W{constructor(o,d,f){super(o,d),this.z=f}}function Xv(c,o){return c.x*o.x+c.y*o.y}function mD(c,o){if(c.length===1){let d=0;const f=o[d++];let g;for(;!g||f.equals(g);)if(g=o[d++],!g)return 1/0;for(;d<o.length;d++){const b=o[d],w=c[0],E=g.sub(f),I=b.sub(f),D=w.sub(f),z=Xv(E,E),j=Xv(E,I),K=Xv(I,I),ie=Xv(D,E),oe=Xv(D,I),de=z*K-j*j,xe=(K*ie-j*oe)/de,De=(z*oe-j*ie)/de,He=f.z*(1-xe-De)+g.z*xe+b.z*De;if(isFinite(He))return He}return 1/0}{let d=1/0;for(const f of o)d=Math.min(d,f.z);return d}}function pD(c,o,d,f,g,b,w,E){const I=w*g.getElevationAt(c,o,!0,!0),D=b[0]!==0,z=D?b[1]===0?w*(b[0]/7-450):w*(function(j,K,ie){const oe=Math.floor(K[0]/8),de=Math.floor(K[1]/8),xe=10*(K[0]-8*oe),De=10*(K[1]-8*de),He=j.getElevationAt(oe,de,!0,!0),Re=j.getMeterToDEM(ie),Ne=Math.floor(.5*(xe*Re-1)),Je=Math.floor(.5*(De*Re-1)),Ye=j.tileCoordToPixel(oe,de),yt=2*Ne+1,_t=2*Je+1,Ot=(function(nn,Lt,fn,Sn,gn){return[nn.getElevationAtPixel(Lt,fn,!0),nn.getElevationAtPixel(Lt+gn,fn,!0),nn.getElevationAtPixel(Lt,fn+gn,!0),nn.getElevationAtPixel(Lt+Sn,fn+gn,!0)]})(j,Ye.x-Ne,Ye.y-Je,yt,_t),Jt=Math.abs(Ot[0]-Ot[1]),St=Math.abs(Ot[2]-Ot[3]),zt=Math.abs(Ot[0]-Ot[2])+Math.abs(Ot[1]-Ot[3]),Nt=Math.min(.25,.5*Re*(Jt+St)/yt),Kt=Math.min(.25,.5*Re*zt/_t);return He+Math.max(Nt*xe,Kt*De)})(g,b,E):I;return{base:I+(d===0)?-1:d,top:D?Math.max(z+f,I+d+2):I+f}}const zW=it([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:NW}=zW,UW=it([{name:"a_packed",components:4,type:"Float32"}]),{members:$W}=UW,jW=Y0.types,WW=Math.cos(Math.PI/180*37.5);class ex{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map((d=>d.id)),this.index=o.index,this.projection=o.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((d=>{this.gradients[d.id]={}})),this.layoutVertexArray=new vt,this.layoutVertexArray2=new Wt,this.indexArray=new kn,this.programConfigurations=new Om(o.layers,o.zoom),this.segments=new us,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((d=>d.isStateDependent())).map((d=>d.id))}populate(o,d,f,g){this.hasPattern=kS("line",this.layers,d);const b=this.layers[0].layout.get("line-sort-key"),w=[];for(const{feature:z,id:j,index:K,sourceLayerIndex:ie}of o){const oe=this.layers[0]._featureFilter.needGeometry,de=Um(z,oe);if(!this.layers[0]._featureFilter.filter(new U(this.zoom),de,f))continue;const xe=b?b.evaluate(de,{},f):void 0,De={id:j,properties:z.properties,type:z.type,sourceLayerIndex:ie,index:K,geometry:oe?de.geometry:Fd(z,f,g),patterns:{},sortKey:xe};w.push(De)}b&&w.sort(((z,j)=>z.sortKey-j.sortKey));const{lineAtlas:E,featureIndex:I}=d,D=this.addConstantDashes(E);for(const z of w){const{geometry:j,index:K,sourceLayerIndex:ie}=z;if(D&&this.addFeatureDashes(z,E),this.hasPattern){const oe=IS("line",this.layers,z,this.zoom,d);this.patternFeatures.push(oe)}else this.addFeature(z,j,K,f,E.positions,d.availableImages);I.insert(o[K].feature,j,K,ie,this.index)}}addConstantDashes(o){let d=!1;for(const f of this.layers){const g=f.paint.get("line-dasharray").value,b=f.layout.get("line-cap").value;if(g.kind!=="constant"||b.kind!=="constant")d=!0;else{const w=b.value,E=g.value;if(!E)continue;o.addDash(E,w)}}return d}addFeatureDashes(o,d){const f=this.zoom;for(const g of this.layers){const b=g.paint.get("line-dasharray").value,w=g.layout.get("line-cap").value;if(b.kind==="constant"&&w.kind==="constant")continue;let E,I;if(b.kind==="constant"){if(E=b.value,!E)continue}else E=b.evaluate({zoom:f},o);I=w.kind==="constant"?w.value:w.evaluate({zoom:f},o),d.addDash(E,I),o.patterns[g.id]=d.getKey(E,I)}}update(o,d,f,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,d,this.stateDependentLayers,f,g)}addFeatures(o,d,f,g,b){for(const w of this.patternFeatures)this.addFeature(w,w.geometry,w.index,d,f,g)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=o.createVertexBuffer(this.layoutVertexArray2,$W)),this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,NW),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(o){if(o.properties&&o.properties.hasOwnProperty("mapbox_clip_start")&&o.properties.hasOwnProperty("mapbox_clip_end"))return{start:+o.properties.mapbox_clip_start,end:+o.properties.mapbox_clip_end}}addFeature(o,d,f,g,b,w){const E=this.layers[0].layout,I=E.get("line-join").evaluate(o,{}),D=E.get("line-cap").evaluate(o,{}),z=E.get("line-miter-limit"),j=E.get("line-round-limit");this.lineClips=this.lineFeatureClips(o);for(const K of d)this.addLine(K,o,I,D,z,j);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,f,b,w,g)}addLine(o,d,f,g,b,w){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let De=0;De<o.length-1;De++)this.totalDistance+=o[De].dist(o[De+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const E=jW[d.type]==="Polygon";let I=o.length;for(;I>=2&&o[I-1].equals(o[I-2]);)I--;let D=0;for(;D<I-1&&o[D].equals(o[D+1]);)D++;if(I<(E?3:2))return;f==="bevel"&&(b=1.05);const z=this.overscaling<=16?15*Bn/(512*this.overscaling):0,j=this.segments.prepareSegment(10*I,this.layoutVertexArray,this.indexArray);let K,ie,oe,de,xe;this.e1=this.e2=-1,E&&(K=o[I-2],xe=o[D].sub(K)._unit()._perp());for(let De=D;De<I;De++){if(oe=De===I-1?E?o[D+1]:void 0:o[De+1],oe&&o[De].equals(oe))continue;xe&&(de=xe),K&&(ie=K),K=o[De],xe=oe?oe.sub(K)._unit()._perp():de,de=de||xe;let He=de.add(xe);He.x===0&&He.y===0||He._unit();const Re=de.x*xe.x+de.y*xe.y,Ne=He.x*xe.x+He.y*xe.y,Je=Ne!==0?1/Ne:1/0,Ye=2*Math.sqrt(2-2*Ne),yt=Ne<WW&&ie&&oe,_t=de.x*xe.y-de.y*xe.x>0;if(yt&&De>D){const St=K.dist(ie);if(St>2*z){const zt=K.sub(K.sub(ie)._mult(z/St)._round());this.updateDistance(ie,zt),this.addCurrentVertex(zt,de,0,0,j),ie=zt}}const Ot=ie&&oe;let Jt=Ot?f:E?"butt":g;if(Ot&&Jt==="round"&&(Je<w?Jt="miter":Je<=2&&(Jt="fakeround")),Jt==="miter"&&Je>b&&(Jt="bevel"),Jt==="bevel"&&(Je>2&&(Jt="flipbevel"),Je<b&&(Jt="miter")),ie&&this.updateDistance(ie,K),Jt==="miter")He._mult(Je),this.addCurrentVertex(K,He,0,0,j);else if(Jt==="flipbevel"){if(Je>100)He=xe.mult(-1);else{const St=Je*de.add(xe).mag()/de.sub(xe).mag();He._perp()._mult(St*(_t?-1:1))}this.addCurrentVertex(K,He,0,0,j),this.addCurrentVertex(K,He.mult(-1),0,0,j)}else if(Jt==="bevel"||Jt==="fakeround"){const St=-Math.sqrt(Je*Je-1),zt=_t?St:0,Nt=_t?0:St;if(ie&&this.addCurrentVertex(K,de,zt,Nt,j),Jt==="fakeround"){const Kt=Math.round(180*Ye/Math.PI/20);for(let nn=1;nn<Kt;nn++){let Lt=nn/Kt;if(Lt!==.5){const Sn=Lt-.5;Lt+=Lt*Sn*(Lt-1)*((1.0904+Re*(Re*(3.55645-1.43519*Re)-3.2452))*Sn*Sn+(.848013+Re*(.215638*Re-1.06021)))}const fn=xe.sub(de)._mult(Lt)._add(de)._unit()._mult(_t?-1:1);this.addHalfVertex(K,fn.x,fn.y,!1,_t,0,j)}}oe&&this.addCurrentVertex(K,xe,-zt,-Nt,j)}else if(Jt==="butt")this.addCurrentVertex(K,He,0,0,j);else if(Jt==="square"){const St=ie?1:-1;ie||this.addCurrentVertex(K,He,St,St,j),this.addCurrentVertex(K,He,0,0,j),ie&&this.addCurrentVertex(K,He,St,St,j)}else Jt==="round"&&(ie&&(this.addCurrentVertex(K,de,0,0,j),this.addCurrentVertex(K,de,1,1,j,!0)),oe&&(this.addCurrentVertex(K,xe,-1,-1,j,!0),this.addCurrentVertex(K,xe,0,0,j)));if(yt&&De<I-1){const St=K.dist(oe);if(St>2*z){const zt=K.add(oe.sub(K)._mult(z/St)._round());this.updateDistance(K,zt),this.addCurrentVertex(zt,xe,0,0,j),K=zt}}}}addCurrentVertex(o,d,f,g,b,w=!1){const E=d.y*g-d.x,I=-d.y-d.x*g;this.addHalfVertex(o,d.x+d.y*f,d.y-d.x*f,w,!1,f,b),this.addHalfVertex(o,E,I,w,!0,-g,b)}addHalfVertex({x:o,y:d},f,g,b,w,E,I){this.layoutVertexArray.emplaceBack((o<<1)+(b?1:0),(d<<1)+(w?1:0),Math.round(63*f)+128,Math.round(63*g)+128,1+(E===0?0:E<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const D=I.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,D),I.primitiveLength++),w?this.e2=D:this.e1=D}updateScaledDistance(){if(this.lineClips){const o=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=o*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(o,d){this.distance+=o.dist(d),this.updateScaledDistance()}}bn(ex,"LineBucket",{omit:["layers","patternFeatures"]});const HW=new Me({"line-cap":new _e(Mt.layout_line["line-cap"]),"line-join":new _e(Mt.layout_line["line-join"]),"line-miter-limit":new le(Mt.layout_line["line-miter-limit"]),"line-round-limit":new le(Mt.layout_line["line-round-limit"]),"line-sort-key":new _e(Mt.layout_line["line-sort-key"])});var gD={paint:new Me({"line-opacity":new _e(Mt.paint_line["line-opacity"]),"line-color":new _e(Mt.paint_line["line-color"]),"line-translate":new le(Mt.paint_line["line-translate"]),"line-translate-anchor":new le(Mt.paint_line["line-translate-anchor"]),"line-width":new _e(Mt.paint_line["line-width"]),"line-gap-width":new _e(Mt.paint_line["line-gap-width"]),"line-offset":new _e(Mt.paint_line["line-offset"]),"line-blur":new _e(Mt.paint_line["line-blur"]),"line-dasharray":new _e(Mt.paint_line["line-dasharray"]),"line-pattern":new _e(Mt.paint_line["line-pattern"]),"line-gradient":new Ie(Mt.paint_line["line-gradient"]),"line-trim-offset":new le(Mt.paint_line["line-trim-offset"])}),layout:HW};const _D=new class extends _e{possiblyEvaluate(c,o){return o=new U(Math.floor(o.zoom),{now:o.now,fadeDuration:o.fadeDuration,transition:o.transition}),super.possiblyEvaluate(c,o)}evaluate(c,o,d,f){return o=ct({},o,{zoom:Math.floor(o.zoom)}),super.evaluate(c,o,d,f)}}(gD.paint.properties["line-width"].specification);function vD(c,o){return o>0?o+2*c:c}_D.useIntegerZoom=!0;const GW=it([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),qW=it([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),KW=it([{name:"a_projected_pos",components:4,type:"Float32"}],4);it([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const XW=it([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),ZW=it([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);it([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const yD=it([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),YW=it([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);it([{name:"triangle",components:3,type:"Uint16"}]),it([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),it([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),it([{type:"Float32",name:"offsetX"}]),it([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var lo=24;const Qc=128;function PS(c,o){const{expression:d}=o;if(d.kind==="constant")return{kind:"constant",layoutSize:d.evaluate(new U(c+1))};if(d.kind==="source")return{kind:"source"};{const{zoomStops:f,interpolationType:g}=d;let b=0;for(;b<f.length&&f[b]<=c;)b++;b=Math.max(0,b-1);let w=b;for(;w<f.length&&f[w]<c+1;)w++;w=Math.min(f.length-1,w);const E=f[b],I=f[w];return d.kind==="composite"?{kind:"composite",minZoom:E,maxZoom:I,interpolationType:g}:{kind:"camera",minZoom:E,maxZoom:I,minSize:d.evaluate(new U(E)),maxSize:d.evaluate(new U(I)),interpolationType:g}}}function tx(c,{uSize:o,uSizeT:d},{lowerSize:f,upperSize:g}){return c.kind==="source"?f/Qc:c.kind==="composite"?Yn(f/Qc,g/Qc,d):o}function Ug(c,o){let d=0,f=0;if(c.kind==="constant")f=c.layoutSize;else if(c.kind!=="source"){const{interpolationType:g,minZoom:b,maxZoom:w}=c,E=g?Ae(ml.interpolationFactor(g,o,b,w),0,1):0;c.kind==="camera"?f=Yn(c.minSize,c.maxSize,E):d=E}return{uSizeT:d,uSize:f}}var JW=Object.freeze({__proto__:null,SIZE_PACK_FACTOR:Qc,evaluateSizeForFeature:tx,evaluateSizeForZoom:Ug,getSizeData:PS});function QW(c,o,d){return c.sections.forEach((f=>{f.text=(function(g,b,w){const E=b.layout.get("text-transform").evaluate(w,{});return E==="uppercase"?g=g.toLocaleUpperCase():E==="lowercase"&&(g=g.toLocaleLowerCase()),O.applyArabicShaping&&(g=O.applyArabicShaping(g)),g})(f.text,o,d)})),c}const Zv={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};function e9(c){return c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""}function t9(c){return c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""}var bD=pr,xD=function(c,o,d,f,g){var b,w,E=8*g-f-1,I=(1<<E)-1,D=I>>1,z=-7,j=g-1,K=-1,ie=c[o+j];for(j+=K,b=ie&(1<<-z)-1,ie>>=-z,z+=E;z>0;b=256*b+c[o+j],j+=K,z-=8);for(w=b&(1<<-z)-1,b>>=-z,z+=f;z>0;w=256*w+c[o+j],j+=K,z-=8);if(b===0)b=1-D;else{if(b===I)return w?NaN:1/0*(ie?-1:1);w+=Math.pow(2,f),b-=D}return(ie?-1:1)*w*Math.pow(2,b-f)},wD=function(c,o,d,f,g,b){var w,E,I,D=8*b-g-1,z=(1<<D)-1,j=z>>1,K=g===23?Math.pow(2,-24)-Math.pow(2,-77):0,ie=0,oe=1,de=o<0||o===0&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(E=isNaN(o)?1:0,w=z):(w=Math.floor(Math.log(o)/Math.LN2),o*(I=Math.pow(2,-w))<1&&(w--,I*=2),(o+=w+j>=1?K/I:K*Math.pow(2,1-j))*I>=2&&(w++,I/=2),w+j>=z?(E=0,w=z):w+j>=1?(E=(o*I-1)*Math.pow(2,g),w+=j):(E=o*Math.pow(2,j-1)*Math.pow(2,g),w=0));g>=8;c[d+ie]=255&E,ie+=oe,E/=256,g-=8);for(w=w<<g|E,D+=g;D>0;c[d+ie]=255&w,ie+=oe,w/=256,D-=8);c[d+ie-oe]|=128*de};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function pr(c){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(c)?c:new Uint8Array(c||0),this.pos=0,this.type=0,this.length=this.buf.length}pr.Varint=0,pr.Fixed64=1,pr.Bytes=2,pr.Fixed32=5;var MS=4294967296,TD=1/MS,SD=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Nd(c){return c.type===pr.Bytes?c.readVarint()+c.pos:c.pos+1}function $g(c,o,d){return d?4294967296*o+(c>>>0):4294967296*(o>>>0)+(c>>>0)}function ED(c,o,d){var f=o<=16383?1:o<=2097151?2:o<=268435455?3:Math.floor(Math.log(o)/(7*Math.LN2));d.realloc(f);for(var g=d.pos-1;g>=c;g--)d.buf[g+f]=d.buf[g]}function n9(c,o){for(var d=0;d<c.length;d++)o.writeVarint(c[d])}function i9(c,o){for(var d=0;d<c.length;d++)o.writeSVarint(c[d])}function r9(c,o){for(var d=0;d<c.length;d++)o.writeFloat(c[d])}function s9(c,o){for(var d=0;d<c.length;d++)o.writeDouble(c[d])}function o9(c,o){for(var d=0;d<c.length;d++)o.writeBoolean(c[d])}function a9(c,o){for(var d=0;d<c.length;d++)o.writeFixed32(c[d])}function l9(c,o){for(var d=0;d<c.length;d++)o.writeSFixed32(c[d])}function c9(c,o){for(var d=0;d<c.length;d++)o.writeFixed64(c[d])}function u9(c,o){for(var d=0;d<c.length;d++)o.writeSFixed64(c[d])}function nx(c,o){return(c[o]|c[o+1]<<8|c[o+2]<<16)+16777216*c[o+3]}function jg(c,o,d){c[d]=o,c[d+1]=o>>>8,c[d+2]=o>>>16,c[d+3]=o>>>24}function CD(c,o){return(c[o]|c[o+1]<<8|c[o+2]<<16)+(c[o+3]<<24)}pr.prototype={destroy:function(){this.buf=null},readFields:function(c,o,d){for(d=d||this.length;this.pos<d;){var f=this.readVarint(),g=f>>3,b=this.pos;this.type=7&f,c(g,o,this),this.pos===b&&this.skip(f)}return o},readMessage:function(c,o){return this.readFields(c,o,this.readVarint()+this.pos)},readFixed32:function(){var c=nx(this.buf,this.pos);return this.pos+=4,c},readSFixed32:function(){var c=CD(this.buf,this.pos);return this.pos+=4,c},readFixed64:function(){var c=nx(this.buf,this.pos)+nx(this.buf,this.pos+4)*MS;return this.pos+=8,c},readSFixed64:function(){var c=nx(this.buf,this.pos)+CD(this.buf,this.pos+4)*MS;return this.pos+=8,c},readFloat:function(){var c=xD(this.buf,this.pos,!0,23,4);return this.pos+=4,c},readDouble:function(){var c=xD(this.buf,this.pos,!0,52,8);return this.pos+=8,c},readVarint:function(c){var o,d,f=this.buf;return o=127&(d=f[this.pos++]),d<128?o:(o|=(127&(d=f[this.pos++]))<<7,d<128?o:(o|=(127&(d=f[this.pos++]))<<14,d<128?o:(o|=(127&(d=f[this.pos++]))<<21,d<128?o:(function(g,b,w){var E,I,D=w.buf;if(E=(112&(I=D[w.pos++]))>>4,I<128||(E|=(127&(I=D[w.pos++]))<<3,I<128)||(E|=(127&(I=D[w.pos++]))<<10,I<128)||(E|=(127&(I=D[w.pos++]))<<17,I<128)||(E|=(127&(I=D[w.pos++]))<<24,I<128)||(E|=(1&(I=D[w.pos++]))<<31,I<128))return $g(g,E,b);throw new Error("Expected varint not more than 10 bytes")})(o|=(15&(d=f[this.pos]))<<28,c,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var c=this.readVarint();return c%2==1?(c+1)/-2:c/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var c=this.readVarint()+this.pos,o=this.pos;return this.pos=c,c-o>=12&&SD?(function(d,f,g){return SD.decode(d.subarray(f,g))})(this.buf,o,c):(function(d,f,g){for(var b="",w=f;w<g;){var E,I,D,z=d[w],j=null,K=z>239?4:z>223?3:z>191?2:1;if(w+K>g)break;K===1?z<128&&(j=z):K===2?(192&(E=d[w+1]))==128&&(j=(31&z)<<6|63&E)<=127&&(j=null):K===3?(I=d[w+2],(192&(E=d[w+1]))==128&&(192&I)==128&&((j=(15&z)<<12|(63&E)<<6|63&I)<=2047||j>=55296&&j<=57343)&&(j=null)):K===4&&(I=d[w+2],D=d[w+3],(192&(E=d[w+1]))==128&&(192&I)==128&&(192&D)==128&&((j=(15&z)<<18|(63&E)<<12|(63&I)<<6|63&D)<=65535||j>=1114112)&&(j=null)),j===null?(j=65533,K=1):j>65535&&(j-=65536,b+=String.fromCharCode(j>>>10&1023|55296),j=56320|1023&j),b+=String.fromCharCode(j),w+=K}return b})(this.buf,o,c)},readBytes:function(){var c=this.readVarint()+this.pos,o=this.buf.subarray(this.pos,c);return this.pos=c,o},readPackedVarint:function(c,o){if(this.type!==pr.Bytes)return c.push(this.readVarint(o));var d=Nd(this);for(c=c||[];this.pos<d;)c.push(this.readVarint(o));return c},readPackedSVarint:function(c){if(this.type!==pr.Bytes)return c.push(this.readSVarint());var o=Nd(this);for(c=c||[];this.pos<o;)c.push(this.readSVarint());return c},readPackedBoolean:function(c){if(this.type!==pr.Bytes)return c.push(this.readBoolean());var o=Nd(this);for(c=c||[];this.pos<o;)c.push(this.readBoolean());return c},readPackedFloat:function(c){if(this.type!==pr.Bytes)return c.push(this.readFloat());var o=Nd(this);for(c=c||[];this.pos<o;)c.push(this.readFloat());return c},readPackedDouble:function(c){if(this.type!==pr.Bytes)return c.push(this.readDouble());var o=Nd(this);for(c=c||[];this.pos<o;)c.push(this.readDouble());return c},readPackedFixed32:function(c){if(this.type!==pr.Bytes)return c.push(this.readFixed32());var o=Nd(this);for(c=c||[];this.pos<o;)c.push(this.readFixed32());return c},readPackedSFixed32:function(c){if(this.type!==pr.Bytes)return c.push(this.readSFixed32());var o=Nd(this);for(c=c||[];this.pos<o;)c.push(this.readSFixed32());return c},readPackedFixed64:function(c){if(this.type!==pr.Bytes)return c.push(this.readFixed64());var o=Nd(this);for(c=c||[];this.pos<o;)c.push(this.readFixed64());return c},readPackedSFixed64:function(c){if(this.type!==pr.Bytes)return c.push(this.readSFixed64());var o=Nd(this);for(c=c||[];this.pos<o;)c.push(this.readSFixed64());return c},skip:function(c){var o=7&c;if(o===pr.Varint)for(;this.buf[this.pos++]>127;);else if(o===pr.Bytes)this.pos=this.readVarint()+this.pos;else if(o===pr.Fixed32)this.pos+=4;else{if(o!==pr.Fixed64)throw new Error("Unimplemented type: "+o);this.pos+=8}},writeTag:function(c,o){this.writeVarint(c<<3|o)},realloc:function(c){for(var o=this.length||16;o<this.pos+c;)o*=2;if(o!==this.length){var d=new Uint8Array(o);d.set(this.buf),this.buf=d,this.length=o}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(c){this.realloc(4),jg(this.buf,c,this.pos),this.pos+=4},writeSFixed32:function(c){this.realloc(4),jg(this.buf,c,this.pos),this.pos+=4},writeFixed64:function(c){this.realloc(8),jg(this.buf,-1&c,this.pos),jg(this.buf,Math.floor(c*TD),this.pos+4),this.pos+=8},writeSFixed64:function(c){this.realloc(8),jg(this.buf,-1&c,this.pos),jg(this.buf,Math.floor(c*TD),this.pos+4),this.pos+=8},writeVarint:function(c){(c=+c||0)>268435455||c<0?(function(o,d){var f,g;if(o>=0?(f=o%4294967296|0,g=o/4294967296|0):(g=~(-o/4294967296),4294967295^(f=~(-o%4294967296))?f=f+1|0:(f=0,g=g+1|0)),o>=18446744073709552e3||o<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");d.realloc(10),(function(b,w,E){E.buf[E.pos++]=127&b|128,b>>>=7,E.buf[E.pos++]=127&b|128,b>>>=7,E.buf[E.pos++]=127&b|128,b>>>=7,E.buf[E.pos++]=127&b|128,E.buf[E.pos]=127&(b>>>=7)})(f,0,d),(function(b,w){var E=(7&b)<<4;w.buf[w.pos++]|=E|((b>>>=3)?128:0),b&&(w.buf[w.pos++]=127&b|((b>>>=7)?128:0),b&&(w.buf[w.pos++]=127&b|((b>>>=7)?128:0),b&&(w.buf[w.pos++]=127&b|((b>>>=7)?128:0),b&&(w.buf[w.pos++]=127&b|((b>>>=7)?128:0),b&&(w.buf[w.pos++]=127&b)))))})(g,d)})(c,this):(this.realloc(4),this.buf[this.pos++]=127&c|(c>127?128:0),c<=127||(this.buf[this.pos++]=127&(c>>>=7)|(c>127?128:0),c<=127||(this.buf[this.pos++]=127&(c>>>=7)|(c>127?128:0),c<=127||(this.buf[this.pos++]=c>>>7&127))))},writeSVarint:function(c){this.writeVarint(c<0?2*-c-1:2*c)},writeBoolean:function(c){this.writeVarint(!!c)},writeString:function(c){c=String(c),this.realloc(4*c.length),this.pos++;var o=this.pos;this.pos=(function(f,g,b){for(var w,E,I=0;I<g.length;I++){if((w=g.charCodeAt(I))>55295&&w<57344){if(!E){w>56319||I+1===g.length?(f[b++]=239,f[b++]=191,f[b++]=189):E=w;continue}if(w<56320){f[b++]=239,f[b++]=191,f[b++]=189,E=w;continue}w=E-55296<<10|w-56320|65536,E=null}else E&&(f[b++]=239,f[b++]=191,f[b++]=189,E=null);w<128?f[b++]=w:(w<2048?f[b++]=w>>6|192:(w<65536?f[b++]=w>>12|224:(f[b++]=w>>18|240,f[b++]=w>>12&63|128),f[b++]=w>>6&63|128),f[b++]=63&w|128)}return b})(this.buf,c,this.pos);var d=this.pos-o;d>=128&&ED(o,d,this),this.pos=o-1,this.writeVarint(d),this.pos+=d},writeFloat:function(c){this.realloc(4),wD(this.buf,c,this.pos,!0,23,4),this.pos+=4},writeDouble:function(c){this.realloc(8),wD(this.buf,c,this.pos,!0,52,8),this.pos+=8},writeBytes:function(c){var o=c.length;this.writeVarint(o),this.realloc(o);for(var d=0;d<o;d++)this.buf[this.pos++]=c[d]},writeRawMessage:function(c,o){this.pos++;var d=this.pos;c(o,this);var f=this.pos-d;f>=128&&ED(d,f,this),this.pos=d-1,this.writeVarint(f),this.pos+=f},writeMessage:function(c,o,d){this.writeTag(c,pr.Bytes),this.writeRawMessage(o,d)},writePackedVarint:function(c,o){o.length&&this.writeMessage(c,n9,o)},writePackedSVarint:function(c,o){o.length&&this.writeMessage(c,i9,o)},writePackedBoolean:function(c,o){o.length&&this.writeMessage(c,o9,o)},writePackedFloat:function(c,o){o.length&&this.writeMessage(c,r9,o)},writePackedDouble:function(c,o){o.length&&this.writeMessage(c,s9,o)},writePackedFixed32:function(c,o){o.length&&this.writeMessage(c,a9,o)},writePackedSFixed32:function(c,o){o.length&&this.writeMessage(c,l9,o)},writePackedFixed64:function(c,o){o.length&&this.writeMessage(c,c9,o)},writePackedSFixed64:function(c,o){o.length&&this.writeMessage(c,u9,o)},writeBytesField:function(c,o){this.writeTag(c,pr.Bytes),this.writeBytes(o)},writeFixed32Field:function(c,o){this.writeTag(c,pr.Fixed32),this.writeFixed32(o)},writeSFixed32Field:function(c,o){this.writeTag(c,pr.Fixed32),this.writeSFixed32(o)},writeFixed64Field:function(c,o){this.writeTag(c,pr.Fixed64),this.writeFixed64(o)},writeSFixed64Field:function(c,o){this.writeTag(c,pr.Fixed64),this.writeSFixed64(o)},writeVarintField:function(c,o){this.writeTag(c,pr.Varint),this.writeVarint(o)},writeSVarintField:function(c,o){this.writeTag(c,pr.Varint),this.writeSVarint(o)},writeStringField:function(c,o){this.writeTag(c,pr.Bytes),this.writeString(o)},writeFloatField:function(c,o){this.writeTag(c,pr.Fixed32),this.writeFloat(o)},writeDoubleField:function(c,o){this.writeTag(c,pr.Fixed64),this.writeDouble(o)},writeBooleanField:function(c,o){this.writeVarintField(c,!!o)}};var ix=J(bD);const DS=3;function d9(c,o,d){o.glyphs=[],c===1&&d.readMessage(h9,o)}function h9(c,o,d){if(c===3){const{id:f,bitmap:g,width:b,height:w,left:E,top:I,advance:D}=d.readMessage(f9,{});o.glyphs.push({id:f,bitmap:new zd({width:b+2*DS,height:w+2*DS},g),metrics:{width:b,height:w,left:E,top:I,advance:D}})}else c===4?o.ascender=d.readSVarint():c===5&&(o.descender=d.readSVarint())}function f9(c,o,d){c===1?o.id=d.readVarint():c===2?o.bitmap=d.readBytes():c===3?o.width=d.readVarint():c===4?o.height=d.readVarint():c===5?o.left=d.readSVarint():c===6?o.top=d.readSVarint():c===7&&(o.advance=d.readVarint())}const kD=DS;function RS(c){let o=0,d=0;for(const w of c)o+=w.w*w.h,d=Math.max(d,w.w);c.sort(((w,E)=>E.h-w.h));const f=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(o/.95)),d),h:1/0}];let g=0,b=0;for(const w of c)for(let E=f.length-1;E>=0;E--){const I=f[E];if(!(w.w>I.w||w.h>I.h)){if(w.x=I.x,w.y=I.y,b=Math.max(b,w.y+w.h),g=Math.max(g,w.x+w.w),w.w===I.w&&w.h===I.h){const D=f.pop();E<f.length&&(f[E]=D)}else w.h===I.h?(I.x+=w.w,I.w-=w.w):w.w===I.w?(I.y+=w.h,I.h-=w.h):(f.push({x:I.x+w.w,y:I.y,w:I.w-w.w,h:w.h}),I.y+=w.h,I.h-=w.h);break}}return{w:g,h:b,fill:o/(g*b)||0}}const Qa=1;class LS{constructor(o,{pixelRatio:d,version:f,stretchX:g,stretchY:b,content:w}){this.paddedRect=o,this.pixelRatio=d,this.stretchX=g,this.stretchY=b,this.content=w,this.version=f}get tl(){return[this.paddedRect.x+Qa,this.paddedRect.y+Qa]}get br(){return[this.paddedRect.x+this.paddedRect.w-Qa,this.paddedRect.y+this.paddedRect.h-Qa]}get displaySize(){return[(this.paddedRect.w-2*Qa)/this.pixelRatio,(this.paddedRect.h-2*Qa)/this.pixelRatio]}}class ID{constructor(o,d){const f={},g={};this.haveRenderCallbacks=[];const b=[];this.addImages(o,f,b),this.addImages(d,g,b);const{w,h:E}=RS(b),I=new yl({width:w||1,height:E||1});for(const D in o){const z=o[D],j=f[D].paddedRect;yl.copy(z.data,I,{x:0,y:0},{x:j.x+Qa,y:j.y+Qa},z.data)}for(const D in d){const z=d[D],j=g[D].paddedRect,K=j.x+Qa,ie=j.y+Qa,oe=z.data.width,de=z.data.height;yl.copy(z.data,I,{x:0,y:0},{x:K,y:ie},z.data),yl.copy(z.data,I,{x:0,y:de-1},{x:K,y:ie-1},{width:oe,height:1}),yl.copy(z.data,I,{x:0,y:0},{x:K,y:ie+de},{width:oe,height:1}),yl.copy(z.data,I,{x:oe-1,y:0},{x:K-1,y:ie},{width:1,height:de}),yl.copy(z.data,I,{x:0,y:0},{x:K+oe,y:ie},{width:1,height:de})}this.image=I,this.iconPositions=f,this.patternPositions=g}addImages(o,d,f){for(const g in o){const b=o[g],w={x:0,y:0,w:b.data.width+2*Qa,h:b.data.height+2*Qa};f.push(w),d[g]=new LS(w,b),b.hasRenderCallback&&this.haveRenderCallbacks.push(g)}}patchUpdatedImages(o,d){this.haveRenderCallbacks=this.haveRenderCallbacks.filter((f=>o.hasImage(f))),o.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const f in o.updatedImages)this.patchUpdatedImage(this.iconPositions[f],o.getImage(f),d),this.patchUpdatedImage(this.patternPositions[f],o.getImage(f),d)}patchUpdatedImage(o,d,f){if(!o||!d||o.version===d.version)return;o.version=d.version;const[g,b]=o.tl;f.update(d.data,void 0,{x:g,y:b})}}bn(LS,"ImagePosition"),bn(ID,"ImageAtlas");const Hl={horizontal:1,vertical:2,horizontalOnly:3},AD=-17;class Yv{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(o,d){const f=new Yv;return f.scale=o||1,f.fontStack=d,f}static forImage(o){const d=new Yv;return d.imageName=o,d}}class Wg{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(o,d){const f=new Wg;for(let g=0;g<o.sections.length;g++){const b=o.sections[g];b.image?f.addImageSection(b):f.addTextSection(b,d)}return f}length(){return this.text.length}getSection(o){return this.sections[this.sectionIndex[o]]}getSections(){return this.sections}getSectionIndex(o){return this.sectionIndex[o]}getCharCode(o){return this.text.charCodeAt(o)}verticalizePunctuation(o){this.text=(function(d,f){let g="";for(let b=0;b<d.length;b++){const w=d.charCodeAt(b+1)||null,E=d.charCodeAt(b-1)||null;g+=!f&&(w&&Pd(w)&&!Zv[d[b+1]]||E&&Pd(E)&&!Zv[d[b-1]])||!Zv[d[b]]?d[b]:Zv[d[b]]}return g})(this.text,o)}trim(){let o=0;for(let f=0;f<this.text.length&&rx[this.text.charCodeAt(f)];f++)o++;let d=this.text.length;for(let f=this.text.length-1;f>=0&&f>=o&&rx[this.text.charCodeAt(f)];f--)d--;this.text=this.text.substring(o,d),this.sectionIndex=this.sectionIndex.slice(o,d)}substring(o,d){const f=new Wg;return f.text=this.text.substring(o,d),f.sectionIndex=this.sectionIndex.slice(o,d),f.sections=this.sections,f}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((o,d)=>Math.max(o,this.sections[d].scale)),0)}addTextSection(o,d){this.text+=o.text,this.sections.push(Yv.forText(o.scale,o.fontStack||d));const f=this.sections.length-1;for(let g=0;g<o.text.length;++g)this.sectionIndex.push(f)}addImageSection(o){const d=o.image?o.image.name:"";if(d.length===0)return void dt("Can't add FormattedSection with an empty image.");const f=this.getNextImageSectionCharCode();f?(this.text+=String.fromCharCode(f),this.sections.push(Yv.forImage(d)),this.sectionIndex.push(this.sections.length-1)):dt("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function OS(c,o,d,f,g,b,w,E,I,D,z,j,K,ie,oe){const de=Wg.fromFeature(c,g);j===Hl.vertical&&de.verticalizePunctuation(K);let xe=[];const De=(function(Ye,yt,_t,Ot,Jt,St){if(!Ye)return[];const zt=[],Nt=(function(fn,Sn,gn,ii,rn,Vn){let ri=0;for(let Ai=0;Ai<fn.length();Ai++){const si=fn.getSection(Ai);ri+=PD(fn.getCharCode(Ai),si,ii,rn,Sn,Vn)}return ri/Math.max(1,Math.ceil(ri/gn))})(Ye,yt,_t,Ot,Jt,St),Kt=Ye.text.indexOf("")>=0;let nn=0;for(let fn=0;fn<Ye.length();fn++){const Sn=Ye.getSection(fn),gn=Ye.getCharCode(fn);if(rx[gn]||(nn+=PD(gn,Sn,Ot,Jt,yt,St)),fn<Ye.length()-1){const ii=!((Lt=gn)<11904||!(mn["Bopomofo Extended"](Lt)||mn.Bopomofo(Lt)||mn["CJK Compatibility Forms"](Lt)||mn["CJK Compatibility Ideographs"](Lt)||mn["CJK Compatibility"](Lt)||mn["CJK Radicals Supplement"](Lt)||mn["CJK Strokes"](Lt)||mn["CJK Symbols and Punctuation"](Lt)||mn["CJK Unified Ideographs Extension A"](Lt)||mn["CJK Unified Ideographs"](Lt)||mn["Enclosed CJK Letters and Months"](Lt)||mn["Halfwidth and Fullwidth Forms"](Lt)||mn.Hiragana(Lt)||mn["Ideographic Description Characters"](Lt)||mn["Kangxi Radicals"](Lt)||mn["Katakana Phonetic Extensions"](Lt)||mn.Katakana(Lt)||mn["Vertical Forms"](Lt)||mn["Yi Radicals"](Lt)||mn["Yi Syllables"](Lt)));(m9[gn]||ii||Sn.imageName)&&zt.push(DD(fn+1,nn,Nt,zt,p9(gn,Ye.getCharCode(fn+1),ii&&Kt),!1))}}var Lt;return RD(DD(Ye.length(),nn,Nt,zt,0,!0))})(de,D,b,o,f,ie),{processBidirectionalText:He,processStyledBidirectionalText:Re}=O;if(He&&de.sections.length===1){const Ye=He(de.toString(),De);for(const yt of Ye){const _t=new Wg;_t.text=yt,_t.sections=de.sections;for(let Ot=0;Ot<yt.length;Ot++)_t.sectionIndex.push(0);xe.push(_t)}}else if(Re){const Ye=Re(de.text,de.sectionIndex,De);for(const yt of Ye){const _t=new Wg;_t.text=yt[0],_t.sectionIndex=yt[1],_t.sections=de.sections,xe.push(_t)}}else xe=(function(Ye,yt){const _t=[],Ot=Ye.text;let Jt=0;for(const St of yt)_t.push(Ye.substring(Jt,St)),Jt=St;return Jt<Ot.length&&_t.push(Ye.substring(Jt,Ot.length)),_t})(de,De);const Ne=[],Je={positionedLines:Ne,text:de.toString(),top:z[1],bottom:z[1],left:z[0],right:z[0],writingMode:j,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return(function(Ye,yt,_t,Ot,Jt,St,zt,Nt,Kt,nn,Lt,fn){let Sn=0,gn=0,ii=0;const rn=Nt==="right"?1:Nt==="left"?0:.5;let Vn=!1;for(const ai of Jt){const li=ai.getSections();for(const or of li){if(or.imageName)continue;const gr=yt[or.fontStack];if(gr&&(Vn=gr.ascender!==void 0&&gr.descender!==void 0,!Vn))break}if(!Vn)break}let ri=0;for(const ai of Jt){ai.trim();const li=ai.getMaxScale(),or=(li-1)*lo,gr={positionedGlyphs:[],lineOffset:0};Ye.positionedLines[ri]=gr;const _r=gr.positionedGlyphs;let ar=0;if(!ai.length()){gn+=St,++ri;continue}let Or=0,Kr=0;for(let lr=0;lr<ai.length();lr++){const Is=ai.getSection(lr),fs=ai.getSectionIndex(lr),jr=ai.getCharCode(lr);let Di=Is.scale,ms=null,vr=null,wa=null,ps=lo,co=0;const Zs=!(Kt===Hl.horizontal||!Lt&&!Eu(jr)||Lt&&(rx[jr]||(Ai=jr,mn.Arabic(Ai)||mn["Arabic Supplement"](Ai)||mn["Arabic Extended-A"](Ai)||mn["Arabic Presentation Forms-A"](Ai)||mn["Arabic Presentation Forms-B"](Ai))));if(Is.imageName){const Ta=Ot[Is.imageName];if(!Ta)continue;wa=Is.imageName,Ye.iconsInText=Ye.iconsInText||!0,vr=Ta.paddedRect;const Ys=Ta.displaySize;Di=Di*lo/fn,ms={width:Ys[0],height:Ys[1],left:Qa,top:-kD,advance:Zs?Ys[1]:Ys[0],localGlyph:!1},co=Vn?-ms.height*Di:AD+li*lo-Ys[1]*Di,ps=ms.advance;const nu=(Zs?Ys[0]:Ys[1])*Di-lo*li;nu>0&&nu>ar&&(ar=nu)}else{const Ta=_t[Is.fontStack];if(!Ta)continue;Ta[jr]&&(vr=Ta[jr]);const Ys=yt[Is.fontStack];if(!Ys)continue;const nu=Ys.glyphs[jr];if(!nu)continue;if(ms=nu.metrics,ps=jr!==8203?lo:0,Vn){const Yg=Ys.ascender!==void 0?Math.abs(Ys.ascender):0,ay=Ys.descender!==void 0?Math.abs(Ys.descender):0,ly=(Yg+ay)*Di;Or<ly&&(Or=ly,Kr=(Yg-ay)/2*Di),co=-Yg*Di}else co=AD+(li-Di)*lo}Zs?(Ye.verticalizable=!0,_r.push({glyph:jr,imageName:wa,x:Sn,y:gn+co,vertical:Zs,scale:Di,localGlyph:ms.localGlyph,fontStack:Is.fontStack,sectionIndex:fs,metrics:ms,rect:vr}),Sn+=ps*Di+nn):(_r.push({glyph:jr,imageName:wa,x:Sn,y:gn+co,vertical:Zs,scale:Di,localGlyph:ms.localGlyph,fontStack:Is.fontStack,sectionIndex:fs,metrics:ms,rect:vr}),Sn+=ms.advance*Di+nn)}_r.length!==0&&(ii=Math.max(Sn-nn,ii),Vn?LD(_r,rn,ar,Kr,St*li/2):LD(_r,rn,ar,0,St/2)),Sn=0;const hs=St*li+ar;gr.lineOffset=Math.max(ar,or),gn+=hs,++ri}var Ai;const si=gn,{horizontalAlign:zn,verticalAlign:xr}=VS(zt);(function(ai,li,or,gr,_r,ar){const Or=(li-or)*_r,Kr=-ar*gr;for(const hs of ai)for(const lr of hs.positionedGlyphs)lr.x+=Or,lr.y+=Kr})(Ye.positionedLines,rn,zn,xr,ii,si),Ye.top+=-xr*si,Ye.bottom=Ye.top+si,Ye.left+=-zn*ii,Ye.right=Ye.left+ii,Ye.hasBaseline=Vn})(Je,o,d,f,xe,w,E,I,j,D,K,oe),!(function(Ye){for(const yt of Ye)if(yt.positionedGlyphs.length!==0)return!1;return!0})(Ne)&&Je}const rx={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},m9={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function PD(c,o,d,f,g,b){if(o.imageName){const w=f[o.imageName];return w?w.displaySize[0]*o.scale*lo/b+g:0}{const w=d[o.fontStack],E=w&&w.glyphs[c];return E?E.metrics.advance*o.scale+g:0}}function MD(c,o,d,f){const g=Math.pow(c-o,2);return f?c<o?g/2:2*g:g+Math.abs(d)*d}function p9(c,o,d){let f=0;return c===10&&(f-=1e4),d&&(f+=150),c!==40&&c!==65288||(f+=50),o!==41&&o!==65289||(f+=50),f}function DD(c,o,d,f,g,b){let w=null,E=MD(o,d,g,b);for(const I of f){const D=MD(o-I.x,d,g,b)+I.badness;D<=E&&(w=I,E=D)}return{index:c,x:o,priorBreak:w,badness:E}}function RD(c){return c?RD(c.priorBreak).concat(c.index):[]}function VS(c){let o=.5,d=.5;switch(c){case"right":case"top-right":case"bottom-right":o=1;break;case"left":case"top-left":case"bottom-left":o=0}switch(c){case"bottom":case"bottom-right":case"bottom-left":d=1;break;case"top":case"top-right":case"top-left":d=0}return{horizontalAlign:o,verticalAlign:d}}function LD(c,o,d,f,g){if(!(o||d||f||g))return;const b=c.length-1,w=c[b],E=(w.x+w.metrics.advance*w.scale)*o;for(let I=0;I<=b;I++)c[I].x-=E,c[I].y+=d+f+g}function g9(c,o,d){const{horizontalAlign:f,verticalAlign:g}=VS(d),b=o[0]-c.displaySize[0]*f,w=o[1]-c.displaySize[1]*g;return{image:c,top:w,bottom:w+c.displaySize[1],left:b,right:b+c.displaySize[0]}}function OD(c,o,d,f,g,b){const w=c.image;let E;if(w.content){const xe=w.content,De=w.pixelRatio||1;E=[xe[0]/De,xe[1]/De,w.displaySize[0]-xe[2]/De,w.displaySize[1]-xe[3]/De]}const I=o.left*b,D=o.right*b;let z,j,K,ie;d==="width"||d==="both"?(ie=g[0]+I-f[3],j=g[0]+D+f[1]):(ie=g[0]+(I+D-w.displaySize[0])/2,j=ie+w.displaySize[0]);const oe=o.top*b,de=o.bottom*b;return d==="height"||d==="both"?(z=g[1]+oe-f[0],K=g[1]+de+f[2]):(z=g[1]+(oe+de-w.displaySize[1])/2,K=z+w.displaySize[1]),{image:w,top:z,right:j,bottom:K,left:ie,collisionPadding:E}}class Ud extends W{constructor(o,d,f,g,b){super(o,d),this.angle=g,this.z=f,b!==void 0&&(this.segment=b)}clone(){return new Ud(this.x,this.y,this.z,this.angle,this.segment)}}function VD(c,o,d,f,g){if(o.segment===void 0)return!0;let b=o,w=o.segment+1,E=0;for(;E>-d/2;){if(w--,w<0)return!1;E-=c[w].dist(b),b=c[w]}E+=c[w].dist(c[w+1]),w++;const I=[];let D=0;for(;E<d/2;){const z=c[w],j=c[w+1];if(!j)return!1;let K=c[w-1].angleTo(z)-z.angleTo(j);for(K=Math.abs((K+3*Math.PI)%(2*Math.PI)-Math.PI),I.push({distance:E,angleDelta:K}),D+=K;E-I[0].distance>f;)D-=I.shift().angleDelta;if(D>g)return!1;w++,E+=z.dist(j)}return!0}function BD(c){let o=0;for(let d=0;d<c.length-1;d++)o+=c[d].dist(c[d+1]);return o}function FD(c,o,d){return c?.6*o*d:0}function zD(c,o){return Math.max(c?c.right-c.left:0,o?o.right-o.left:0)}function _9(c,o,d,f,g,b){const w=FD(d,g,b),E=zD(d,f)*b;let I=0;const D=BD(c)/2;for(let z=0;z<c.length-1;z++){const j=c[z],K=c[z+1],ie=j.dist(K);if(I+ie>D){const oe=(D-I)/ie,de=Yn(j.x,K.x,oe),xe=Yn(j.y,K.y,oe),De=new Ud(de,xe,0,K.angleTo(j),z);return!w||VD(c,De,E,w,o)?De:void 0}I+=ie}}function v9(c,o,d,f,g,b,w,E,I){const D=FD(f,b,w),z=zD(f,g),j=z*w,K=c[0].x===0||c[0].x===I||c[0].y===0||c[0].y===I;return o-j<o/4&&(o=j+o/4),ND(c,K?o/2*E%o:(z/2+2*b)*w*E%o,o,D,d,j,K,!1,I)}function ND(c,o,d,f,g,b,w,E,I){const D=b/2,z=BD(c);let j=0,K=o-d,ie=[];for(let oe=0;oe<c.length-1;oe++){const de=c[oe],xe=c[oe+1],De=de.dist(xe),He=xe.angleTo(de);for(;K+d<j+De;){K+=d;const Re=(K-j)/De,Ne=Yn(de.x,xe.x,Re),Je=Yn(de.y,xe.y,Re);if(Ne>=0&&Ne<I&&Je>=0&&Je<I&&K-D>=0&&K+D<=z){const Ye=new Ud(Ne,Je,0,He,oe);Ye._round(),f&&!VD(c,Ye,b,f,g)||ie.push(Ye)}}j+=De}return E||ie.length||w||(ie=ND(c,j/2,d,f,g,b,w,!0,I)),ie}function UD(c,o,d,f,g){const b=[];for(let w=0;w<c.length;w++){const E=c[w];let I;for(let D=0;D<E.length-1;D++){let z=E[D],j=E[D+1];z.x<o&&j.x<o||(z.x<o?z=new W(o,z.y+(o-z.x)/(j.x-z.x)*(j.y-z.y))._round():j.x<o&&(j=new W(o,z.y+(o-z.x)/(j.x-z.x)*(j.y-z.y))._round()),z.y<d&&j.y<d||(z.y<d?z=new W(z.x+(d-z.y)/(j.y-z.y)*(j.x-z.x),d)._round():j.y<d&&(j=new W(z.x+(d-z.y)/(j.y-z.y)*(j.x-z.x),d)._round()),z.x>=f&&j.x>=f||(z.x>=f?z=new W(f,z.y+(f-z.x)/(j.x-z.x)*(j.y-z.y))._round():j.x>=f&&(j=new W(f,z.y+(f-z.x)/(j.x-z.x)*(j.y-z.y))._round()),z.y>=g&&j.y>=g||(z.y>=g?z=new W(z.x+(g-z.y)/(j.y-z.y)*(j.x-z.x),g)._round():j.y>=g&&(j=new W(z.x+(g-z.y)/(j.y-z.y)*(j.x-z.x),g)._round()),I&&z.equals(I[I.length-1])||(I=[z],b.push(I)),I.push(j)))))}}return b}bn(Ud,"Anchor");const Jv=1e20;function $D(c,o,d,f,g,b,w,E,I){for(let D=o;D<o+f;D++)jD(c,d*b+D,b,g,w,E,I);for(let D=d;D<d+g;D++)jD(c,D*b+o,1,f,w,E,I)}function jD(c,o,d,f,g,b,w){b[0]=0,w[0]=-Jv,w[1]=Jv,g[0]=c[o];for(let E=1,I=0,D=0;E<f;E++){g[E]=c[o+E*d];const z=E*E;do{const j=b[I];D=(g[E]-g[j]+z-j*j)/(E-j)/2}while(D<=w[I]&&--I>-1);I++,b[I]=E,w[I]=D,w[I+1]=Jv}for(let E=0,I=0;E<f;E++){for(;w[I+1]<E;)I++;const D=b[I],z=E-D;c[o+E*d]=g[D]+z*z}}const eu=2,BS={none:0,ideographs:1,all:2};class Hg{constructor(o,d,f){this.requestManager=o,this.localGlyphMode=d,this.localFontFamily=f,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(o){this.url=o}getGlyphs(o,d){const f=[];for(const g in o)for(const b of o[g])f.push({stack:g,id:b});Le(f,(({stack:g,id:b},w)=>{let E=this.entries[g];E||(E=this.entries[g]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let I=E.glyphs[b];if(I!==void 0)return void w(null,{stack:g,id:b,glyph:I});if(I=this._tinySDF(E,g,b),I)return E.glyphs[b]=I,void w(null,{stack:g,id:b,glyph:I});const D=Math.floor(b/256);if(256*D>65535)return void w(new Error("glyphs > 65535 not supported"));if(E.ranges[D])return void w(null,{stack:g,id:b,glyph:I});let z=E.requests[D];z||(z=E.requests[D]=[],Hg.loadGlyphRange(g,D,this.url,this.requestManager,((j,K)=>{if(K){E.ascender=K.ascender,E.descender=K.descender;for(const ie in K.glyphs)this._doesCharSupportLocalGlyph(+ie)||(E.glyphs[+ie]=K.glyphs[+ie]);E.ranges[D]=!0}for(const ie of z)ie(j,K);delete E.requests[D]}))),z.push(((j,K)=>{j?w(j):K&&w(null,{stack:g,id:b,glyph:K.glyphs[b]||null})}))}),((g,b)=>{if(g)d(g);else if(b){const w={};for(const{stack:E,id:I,glyph:D}of b)w[E]===void 0&&(w[E]={}),w[E].glyphs===void 0&&(w[E].glyphs={}),w[E].glyphs[I]=D&&{id:D.id,bitmap:D.bitmap.clone(),metrics:D.metrics},w[E].ascender=this.entries[E].ascender,w[E].descender=this.entries[E].descender;d(null,w)}}))}_doesCharSupportLocalGlyph(o){return this.localGlyphMode!==BS.none&&(this.localGlyphMode===BS.all?!!this.localFontFamily:!!this.localFontFamily&&(mn["CJK Unified Ideographs"](o)||mn["Hangul Syllables"](o)||mn.Hiragana(o)||mn.Katakana(o)||mn["CJK Symbols and Punctuation"](o)))}_tinySDF(o,d,f){const g=this.localFontFamily;if(!g||!this._doesCharSupportLocalGlyph(f))return;let b=o.tinySDF;if(!b){let de="400";/bold/i.test(d)?de="900":/medium/i.test(d)?de="500":/light/i.test(d)&&(de="200"),b=o.tinySDF=new Hg.TinySDF({fontFamily:g,fontWeight:de,fontSize:24*eu,buffer:3*eu,radius:8*eu}),b.fontWeight=de}if(this.localGlyphs[b.fontWeight][f])return this.localGlyphs[b.fontWeight][f];const w=String.fromCharCode(f),{data:E,width:I,height:D,glyphWidth:z,glyphHeight:j,glyphLeft:K,glyphTop:ie,glyphAdvance:oe}=b.draw(w);return this.localGlyphs[b.fontWeight][f]={id:f,bitmap:new zd({width:I,height:D},E),metrics:{width:z/eu,height:j/eu,left:K/eu,top:ie/eu-27,advance:oe/eu,localGlyph:!0}}}}Hg.loadGlyphRange=function(c,o,d,f,g){const b=256*o,w=b+255,E=f.transformRequest(f.normalizeGlyphsURL(d).replace("{fontstack}",c).replace("{range}",`${b}-${w}`),bo.Glyphs);xo(E,((I,D)=>{if(I)g(I);else if(D){const z={},j=(function(K){return new ix(K).readFields(d9,{})})(D);for(const K of j.glyphs)z[K.id]=K;g(null,{glyphs:z,ascender:j.ascender,descender:j.descender})}}))},Hg.TinySDF=class{constructor({fontSize:c=24,buffer:o=3,radius:d=8,cutoff:f=.25,fontFamily:g="sans-serif",fontWeight:b="normal",fontStyle:w="normal"}={}){this.buffer=o,this.cutoff=f,this.radius=d;const E=this.size=c+4*o,I=this._createCanvas(E),D=this.ctx=I.getContext("2d",{willReadFrequently:!0});D.font=`${w} ${b} ${c}px ${g}`,D.textBaseline="alphabetic",D.textAlign="left",D.fillStyle="black",this.gridOuter=new Float64Array(E*E),this.gridInner=new Float64Array(E*E),this.f=new Float64Array(E),this.z=new Float64Array(E+1),this.v=new Uint16Array(E)}_createCanvas(c){const o=document.createElement("canvas");return o.width=o.height=c,o}draw(c){const{width:o,actualBoundingBoxAscent:d,actualBoundingBoxDescent:f,actualBoundingBoxLeft:g,actualBoundingBoxRight:b}=this.ctx.measureText(c),w=Math.ceil(d),E=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(b-g))),I=Math.min(this.size-this.buffer,w+Math.ceil(f)),D=E+2*this.buffer,z=I+2*this.buffer,j=Math.max(D*z,0),K=new Uint8ClampedArray(j),ie={data:K,width:D,height:z,glyphWidth:E,glyphHeight:I,glyphTop:w,glyphLeft:0,glyphAdvance:o};if(E===0||I===0)return ie;const{ctx:oe,buffer:de,gridInner:xe,gridOuter:De}=this;oe.clearRect(de,de,E,I),oe.fillText(c,de,de+w);const He=oe.getImageData(de,de,E,I);De.fill(Jv,0,j),xe.fill(0,0,j);for(let Re=0;Re<I;Re++)for(let Ne=0;Ne<E;Ne++){const Je=He.data[4*(Re*E+Ne)+3]/255;if(Je===0)continue;const Ye=(Re+de)*D+Ne+de;if(Je===1)De[Ye]=0,xe[Ye]=Jv;else{const yt=.5-Je;De[Ye]=yt>0?yt*yt:0,xe[Ye]=yt<0?yt*yt:0}}$D(De,0,0,D,z,D,this.f,this.v,this.z),$D(xe,de,de,E,I,D,this.f,this.v,this.z);for(let Re=0;Re<j;Re++){const Ne=Math.sqrt(De[Re])-Math.sqrt(xe[Re]);K[Re]=Math.round(255-255*(Ne/this.radius+this.cutoff))}return ie}};const Gg=Qa;function WD(c,o,d,f){const g=[],b=c.image,w=b.pixelRatio,E=b.paddedRect.w-2*Gg,I=b.paddedRect.h-2*Gg,D=c.right-c.left,z=c.bottom-c.top,j=b.stretchX||[[0,E]],K=b.stretchY||[[0,I]],ie=(St,zt)=>St+zt[1]-zt[0],oe=j.reduce(ie,0),de=K.reduce(ie,0),xe=E-oe,De=I-de;let He=0,Re=oe,Ne=0,Je=de,Ye=0,yt=xe,_t=0,Ot=De;if(b.content&&f){const St=b.content;He=sx(j,0,St[0]),Ne=sx(K,0,St[1]),Re=sx(j,St[0],St[2]),Je=sx(K,St[1],St[3]),Ye=St[0]-He,_t=St[1]-Ne,yt=St[2]-St[0]-Re,Ot=St[3]-St[1]-Je}const Jt=(St,zt,Nt,Kt)=>{const nn=ox(St.stretch-He,Re,D,c.left),Lt=ax(St.fixed-Ye,yt,St.stretch,oe),fn=ox(zt.stretch-Ne,Je,z,c.top),Sn=ax(zt.fixed-_t,Ot,zt.stretch,de),gn=ox(Nt.stretch-He,Re,D,c.left),ii=ax(Nt.fixed-Ye,yt,Nt.stretch,oe),rn=ox(Kt.stretch-Ne,Je,z,c.top),Vn=ax(Kt.fixed-_t,Ot,Kt.stretch,de),ri=new W(nn,fn),Ai=new W(gn,fn),si=new W(gn,rn),zn=new W(nn,rn),xr=new W(Lt/w,Sn/w),ai=new W(ii/w,Vn/w),li=o*Math.PI/180;if(li){const _r=Math.sin(li),ar=Math.cos(li),Or=[ar,-_r,_r,ar];ri._matMult(Or),Ai._matMult(Or),zn._matMult(Or),si._matMult(Or)}const or=St.stretch+St.fixed,gr=zt.stretch+zt.fixed;return{tl:ri,tr:Ai,bl:zn,br:si,tex:{x:b.paddedRect.x+Gg+or,y:b.paddedRect.y+Gg+gr,w:Nt.stretch+Nt.fixed-or,h:Kt.stretch+Kt.fixed-gr},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:xr,pixelOffsetBR:ai,minFontScaleX:yt/w/D,minFontScaleY:Ot/w/z,isSDF:d}};if(f&&(b.stretchX||b.stretchY)){const St=HD(j,xe,oe),zt=HD(K,De,de);for(let Nt=0;Nt<St.length-1;Nt++){const Kt=St[Nt],nn=St[Nt+1];for(let Lt=0;Lt<zt.length-1;Lt++)g.push(Jt(Kt,zt[Lt],nn,zt[Lt+1]))}}else g.push(Jt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:E+1},{fixed:0,stretch:I+1}));return g}function sx(c,o,d){let f=0;for(const g of c)f+=Math.max(o,Math.min(d,g[1]))-Math.max(o,Math.min(d,g[0]));return f}function HD(c,o,d){const f=[{fixed:-Gg,stretch:0}];for(const[g,b]of c){const w=f[f.length-1];f.push({fixed:g-w.stretch,stretch:w.stretch}),f.push({fixed:g-w.stretch,stretch:w.stretch+(b-g)})}return f.push({fixed:o+Gg,stretch:d}),f}function ox(c,o,d,f){return c/o*d+f}function ax(c,o,d,f){return c-o*d/f}function y9(c,o,d,f){const g=o+c.positionedLines[f].lineOffset;return f===0?d+g/2:d+(g+(o+c.positionedLines[f-1].lineOffset))/2}class b9{constructor(o=[],d=x9){if(this.data=o,this.length=this.data.length,this.compare=d,this.length>0)for(let f=(this.length>>1)-1;f>=0;f--)this._down(f)}push(o){this.data.push(o),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const o=this.data[0],d=this.data.pop();return this.length--,this.length>0&&(this.data[0]=d,this._down(0)),o}peek(){return this.data[0]}_up(o){const{data:d,compare:f}=this,g=d[o];for(;o>0;){const b=o-1>>1,w=d[b];if(f(g,w)>=0)break;d[o]=w,o=b}d[o]=g}_down(o){const{data:d,compare:f}=this,g=this.length>>1,b=d[o];for(;o<g;){let w=1+(o<<1),E=d[w];const I=w+1;if(I<this.length&&f(d[I],E)<0&&(w=I,E=d[I]),f(E,b)>=0)break;d[o]=E,o=w}d[o]=b}}function x9(c,o){return c<o?-1:c>o?1:0}function w9(c,o=1,d=!1){let f=1/0,g=1/0,b=-1/0,w=-1/0;const E=c[0];for(let ie=0;ie<E.length;ie++){const oe=E[ie];(!ie||oe.x<f)&&(f=oe.x),(!ie||oe.y<g)&&(g=oe.y),(!ie||oe.x>b)&&(b=oe.x),(!ie||oe.y>w)&&(w=oe.y)}const I=Math.min(b-f,w-g);let D=I/2;const z=new b9([],T9);if(I===0)return new W(f,g);for(let ie=f;ie<b;ie+=I)for(let oe=g;oe<w;oe+=I)z.push(new qg(ie+D,oe+D,D,c));let j=(function(ie){let oe=0,de=0,xe=0;const De=ie[0];for(let He=0,Re=De.length,Ne=Re-1;He<Re;Ne=He++){const Je=De[He],Ye=De[Ne],yt=Je.x*Ye.y-Ye.x*Je.y;de+=(Je.x+Ye.x)*yt,xe+=(Je.y+Ye.y)*yt,oe+=3*yt}return new qg(de/oe,xe/oe,0,ie)})(c),K=z.length;for(;z.length;){const ie=z.pop();(ie.d>j.d||!j.d)&&(j=ie,d&&console.log("found best %d after %d probes",Math.round(1e4*ie.d)/1e4,K)),ie.max-j.d<=o||(D=ie.h/2,z.push(new qg(ie.p.x-D,ie.p.y-D,D,c)),z.push(new qg(ie.p.x+D,ie.p.y-D,D,c)),z.push(new qg(ie.p.x-D,ie.p.y+D,D,c)),z.push(new qg(ie.p.x+D,ie.p.y+D,D,c)),K+=4)}return d&&(console.log(`num probes: ${K}`),console.log(`best distance: ${j.d}`)),j.p}function T9(c,o){return o.max-c.max}class qg{constructor(o,d,f,g){this.p=new W(o,d),this.h=f,this.d=(function(b,w){let E=!1,I=1/0;for(let D=0;D<w.length;D++){const z=w[D];for(let j=0,K=z.length,ie=K-1;j<K;ie=j++){const oe=z[j],de=z[ie];oe.y>b.y!=de.y>b.y&&b.x<(de.x-oe.x)*(b.y-oe.y)/(de.y-oe.y)+oe.x&&(E=!E),I=Math.min(I,NM(b,oe,de))}}return(E?1:-1)*Math.sqrt(I)})(this.p,g),this.max=this.d+this.h*Math.SQRT2}}const Kg=7,FS=Number.POSITIVE_INFINITY,S9=Math.sqrt(2);function GD(c,[o,d]){let f=0,g=0;if(d===FS){o<0&&(o=0);const b=o/S9;switch(c){case"top-right":case"top-left":g=b-Kg;break;case"bottom-right":case"bottom-left":g=-b+Kg;break;case"bottom":g=-o+Kg;break;case"top":g=o-Kg}switch(c){case"top-right":case"bottom-right":f=-b;break;case"top-left":case"bottom-left":f=b;break;case"left":f=o;break;case"right":f=-o}}else{switch(o=Math.abs(o),d=Math.abs(d),c){case"top-right":case"top-left":case"top":g=d-Kg;break;case"bottom-right":case"bottom-left":case"bottom":g=-d+Kg}switch(c){case"top-right":case"bottom-right":case"right":f=-o;break;case"top-left":case"bottom-left":case"left":f=o}}return[f,g]}function E9(c,o,d,f,g,b,w,E,I,D){c.createArrays(),c.tilePixelRatio=Bn/(512*c.overscaling),c.compareText={},c.iconsNeedLinear=!1;const z=c.layers[0].layout,j=c.layers[0]._unevaluatedLayout._values,K={};if(c.textSizeData.kind==="composite"){const{minZoom:de,maxZoom:xe}=c.textSizeData;K.compositeTextSizes=[j["text-size"].possiblyEvaluate(new U(de),E),j["text-size"].possiblyEvaluate(new U(xe),E)]}if(c.iconSizeData.kind==="composite"){const{minZoom:de,maxZoom:xe}=c.iconSizeData;K.compositeIconSizes=[j["icon-size"].possiblyEvaluate(new U(de),E),j["icon-size"].possiblyEvaluate(new U(xe),E)]}K.layoutTextSize=j["text-size"].possiblyEvaluate(new U(I+1),E),K.layoutIconSize=j["icon-size"].possiblyEvaluate(new U(I+1),E),K.textMaxSize=j["text-size"].possiblyEvaluate(new U(18),E);const ie=z.get("text-rotation-alignment")==="map"&&z.get("symbol-placement")!=="point",oe=z.get("text-size");for(const de of c.features){const xe=z.get("text-font").evaluate(de,{},E).join(","),De=oe.evaluate(de,{},E),He=K.layoutTextSize.evaluate(de,{},E),Re=(K.layoutIconSize.evaluate(de,{},E),{horizontal:{},vertical:void 0}),Ne=de.text;let Je,Ye=[0,0];if(Ne){const Ot=Ne.toString(),Jt=z.get("text-letter-spacing").evaluate(de,{},E)*lo,St=z.get("text-line-height").evaluate(de,{},E)*lo,zt=Cv(Ot)?Jt:0,Nt=z.get("text-anchor").evaluate(de,{},E),Kt=z.get("text-variable-anchor");if(!Kt){const gn=z.get("text-radial-offset").evaluate(de,{},E);Ye=gn?GD(Nt,[gn*lo,FS]):z.get("text-offset").evaluate(de,{},E).map((ii=>ii*lo))}let nn=ie?"center":z.get("text-justify").evaluate(de,{},E);const Lt=z.get("symbol-placement")==="point",fn=Lt?z.get("text-max-width").evaluate(de,{},E)*lo:1/0,Sn=gn=>{c.allowVerticalPlacement&&Dm(Ot)&&(Re.vertical=OS(Ne,o,d,g,xe,fn,St,Nt,gn,zt,Ye,Hl.vertical,!0,He,De))};if(!ie&&Kt){const gn=nn==="auto"?Kt.map((rn=>zS(rn))):[nn];let ii=!1;for(let rn=0;rn<gn.length;rn++){const Vn=gn[rn];if(!Re.horizontal[Vn])if(ii)Re.horizontal[Vn]=Re.horizontal[0];else{const ri=OS(Ne,o,d,g,xe,fn,St,"center",Vn,zt,Ye,Hl.horizontal,!1,He,De);ri&&(Re.horizontal[Vn]=ri,ii=ri.positionedLines.length===1)}}Sn("left")}else{if(nn==="auto"&&(nn=zS(Nt)),Lt||z.get("text-writing-mode").indexOf("horizontal")>=0||!Dm(Ot)){const gn=OS(Ne,o,d,g,xe,fn,St,Nt,nn,zt,Ye,Hl.horizontal,!1,He,De);gn&&(Re.horizontal[nn]=gn)}Sn(Lt?"left":nn)}}let yt=!1;if(de.icon&&de.icon.name){const Ot=f[de.icon.name];Ot&&(Je=g9(g[de.icon.name],z.get("icon-offset").evaluate(de,{},E),z.get("icon-anchor").evaluate(de,{},E)),yt=Ot.sdf,c.sdfIcons===void 0?c.sdfIcons=Ot.sdf:c.sdfIcons!==Ot.sdf&&dt("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ot.pixelRatio!==c.pixelRatio||z.get("icon-rotate").constantOr(1)!==0)&&(c.iconsNeedLinear=!0))}const _t=KD(Re.horizontal)||Re.vertical;c.iconsInText||(c.iconsInText=!!_t&&_t.iconsInText),(_t||Je)&&C9(c,de,Re,Je,f,K,He,0,Ye,yt,w,E,D)}b&&c.generateCollisionDebugBuffers(I,c.collisionBoxArray)}function zS(c){switch(c){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function C9(c,o,d,f,g,b,w,E,I,D,z,j,K){let ie=b.textMaxSize.evaluate(o,{},j);ie===void 0&&(ie=w);const oe=c.layers[0].layout,de=oe.get("icon-offset").evaluate(o,{},j),xe=KD(d.horizontal)||d.vertical,De=K.name==="globe",He=lo,Re=w/He,Ne=c.tilePixelRatio*ie/He,Je=(Nt=c.overscaling,c.zoom>18&&Nt>2&&(Nt>>=1),Math.max(Bn/(512*Nt),1)*oe.get("symbol-spacing")),Ye=oe.get("text-padding")*c.tilePixelRatio,yt=oe.get("icon-padding")*c.tilePixelRatio,_t=ne(oe.get("text-max-angle")),Ot=oe.get("text-rotation-alignment")==="map"&&oe.get("symbol-placement")!=="point",Jt=oe.get("icon-rotation-alignment")==="map"&&oe.get("symbol-placement")!=="point",St=oe.get("symbol-placement"),zt=Je/2;var Nt;const Kt=oe.get("icon-text-fit");let nn;f&&Kt!=="none"&&(c.allowVerticalPlacement&&d.vertical&&(nn=OD(f,d.vertical,Kt,oe.get("icon-text-fit-padding"),de,Re)),xe&&(f=OD(f,xe,Kt,oe.get("icon-text-fit-padding"),de,Re)));const Lt=(fn,Sn,gn)=>{if(Sn.x<0||Sn.x>=Bn||Sn.y<0||Sn.y>=Bn)return;let ii=null;if(De){const{x:rn,y:Vn,z:ri}=K.projectTilePoint(Sn.x,Sn.y,gn);ii={anchor:new Ud(rn,Vn,ri,0,void 0),up:K.upVector(gn,Sn.x,Sn.y)}}(function(rn,Vn,ri,Ai,si,zn,xr,ai,li,or,gr,_r,ar,Or,Kr,hs,lr,Is,fs,jr,Di,ms,vr,wa,ps){const co=rn.addToLineVertexArray(Vn,Ai);let Zs,Ta,Ys,nu,Yg,ay,ly,kR=0,IR=0,AR=0,PR=0,eE=-1,tE=-1;const Ru={};let MR=ZT("");const Gm=ri?ri.anchor:Vn;let nE=0,iE=0;if(li._unevaluatedLayout.getValue("text-radial-offset")===void 0?[nE,iE]=li.layout.get("text-offset").evaluate(Di,{},ps).map((bl=>bl*lo)):(nE=li.layout.get("text-radial-offset").evaluate(Di,{},ps)*lo,iE=FS),rn.allowVerticalPlacement&&si.vertical){const bl=si.vertical;if(Kr)ay=NS(bl),ai&&(ly=NS(ai));else{const xl=li.layout.get("text-rotate").evaluate(Di,{},ps)+90;Ys=lx(or,Gm,Vn,gr,_r,ar,bl,Or,xl,hs),ai&&(nu=lx(or,Gm,Vn,gr,_r,ar,ai,Is,xl))}}if(zn){const bl=li.layout.get("icon-rotate").evaluate(Di,{},ps),xl=li.layout.get("icon-text-fit")!=="none",cy=WD(zn,bl,vr,xl),sE=ai?WD(ai,bl,vr,xl):void 0;Ta=lx(or,Gm,Vn,gr,_r,ar,zn,Is,bl),kR=4*cy.length;const DR=rn.iconSizeData;let qm=null;DR.kind==="source"?(qm=[Qc*li.layout.get("icon-size").evaluate(Di,{},ps)],qm[0]>sf&&dt(`${rn.layerIds[0]}: Value for "icon-size" is >= ${Qv}. Reduce your "icon-size".`)):DR.kind==="composite"&&(qm=[Qc*ms.compositeIconSizes[0].evaluate(Di,{},ps),Qc*ms.compositeIconSizes[1].evaluate(Di,{},ps)],(qm[0]>sf||qm[1]>sf)&&dt(`${rn.layerIds[0]}: Value for "icon-size" is >= ${Qv}. Reduce your "icon-size".`)),rn.addSymbols(rn.icon,cy,qm,jr,fs,Di,!1,ri,Vn,co.lineStartIndex,co.lineLength,-1,wa,ps),eE=rn.icon.placedSymbolArray.length-1,sE&&(IR=4*sE.length,rn.addSymbols(rn.icon,sE,qm,jr,fs,Di,Hl.vertical,ri,Vn,co.lineStartIndex,co.lineLength,-1,wa,ps),tE=rn.icon.placedSymbolArray.length-1)}for(const bl in si.horizontal){const xl=si.horizontal[bl];Zs||(MR=ZT(xl.text),Kr?Yg=NS(xl):Zs=lx(or,Gm,Vn,gr,_r,ar,xl,Or,li.layout.get("text-rotate").evaluate(Di,{},ps),hs));const cy=xl.positionedLines.length===1;if(AR+=qD(rn,ri,Vn,xl,xr,li,Kr,Di,hs,co,si.vertical?Hl.horizontal:Hl.horizontalOnly,cy?Object.keys(si.horizontal):[bl],Ru,eE,ms,wa,ps),cy)break}si.vertical&&(PR+=qD(rn,ri,Vn,si.vertical,xr,li,Kr,Di,hs,co,Hl.vertical,["vertical"],Ru,tE,ms,wa,ps));let df=-1;const rE=(bl,xl)=>bl?Math.max(bl,xl):xl;df=rE(Yg,df),df=rE(ay,df),df=rE(ly,df);const eH=df>-1?1:0;rn.glyphOffsetArray.length>=af.MAX_GLYPHS&&dt("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Di.sortKey!==void 0&&rn.addToSortKeyRanges(rn.symbolInstances.length,Di.sortKey),rn.symbolInstances.emplaceBack(Gm.x,Gm.y,Gm.z,Vn.x,Vn.y,Ru.right>=0?Ru.right:-1,Ru.center>=0?Ru.center:-1,Ru.left>=0?Ru.left:-1,Ru.vertical>=0?Ru.vertical:-1,eE,tE,MR,Zs!==void 0?Zs:rn.collisionBoxArray.length,Zs!==void 0?Zs+1:rn.collisionBoxArray.length,Ys!==void 0?Ys:rn.collisionBoxArray.length,Ys!==void 0?Ys+1:rn.collisionBoxArray.length,Ta!==void 0?Ta:rn.collisionBoxArray.length,Ta!==void 0?Ta+1:rn.collisionBoxArray.length,nu||rn.collisionBoxArray.length,nu?nu+1:rn.collisionBoxArray.length,gr,AR,PR,kR,IR,eH,0,nE,iE,df)})(c,Sn,ii,fn,d,f,g,nn,c.layers[0],c.collisionBoxArray,o.index,o.sourceLayerIndex,c.index,Ye,Ot,I,0,yt,Jt,de,o,b,D,z,j)};if(St==="line")for(const fn of UD(o.geometry,0,0,Bn,Bn)){const Sn=v9(fn,Je,_t,d.vertical||xe,f,He,Ne,c.overscaling,Bn);for(const gn of Sn)xe&&k9(c,xe.text,zt,gn)||Lt(fn,gn,j)}else if(St==="line-center"){for(const fn of o.geometry)if(fn.length>1){const Sn=_9(fn,_t,d.vertical||xe,f,He,Ne);Sn&&Lt(fn,Sn,j)}}else if(o.type==="Polygon")for(const fn of CS(o.geometry,0)){const Sn=w9(fn,16);Lt(fn[0],new Ud(Sn.x,Sn.y,0,0,void 0),j)}else if(o.type==="LineString")for(const fn of o.geometry)Lt(fn,new Ud(fn[0].x,fn[0].y,0,0,void 0),j);else if(o.type==="Point")for(const fn of o.geometry)for(const Sn of fn)Lt([Sn],new Ud(Sn.x,Sn.y,0,0,void 0),j)}const Qv=255,sf=Qv*Qc;function qD(c,o,d,f,g,b,w,E,I,D,z,j,K,ie,oe,de,xe){const De=(function(Ne,Je,Ye,yt,_t,Ot,Jt,St){const zt=[];if(Je.positionedLines.length===0)return zt;const Nt=yt.layout.get("text-rotate").evaluate(Ot,{})*Math.PI/180,Kt=(function(gn){const ii=gn[0],rn=gn[1],Vn=ii*rn;return Vn>0?[ii,-rn]:Vn<0?[-ii,rn]:ii===0?[rn,ii]:[rn,-ii]})(Ye);let nn=Math.abs(Je.top-Je.bottom);for(const gn of Je.positionedLines)nn-=gn.lineOffset;const Lt=Je.positionedLines.length,fn=nn/Lt;let Sn=Je.top-Ye[1];for(let gn=0;gn<Lt;++gn){const ii=Je.positionedLines[gn];Sn=y9(Je,fn,Sn,gn);for(const rn of ii.positionedGlyphs){if(!rn.rect)continue;const Vn=rn.rect||{};let ri=kD+1,Ai=!0,si=1,zn=0;if(rn.imageName){const vr=Jt[rn.imageName];if(!vr)continue;if(vr.sdf){dt("SDF images are not supported in formatted text and will be ignored.");continue}Ai=!1,si=vr.pixelRatio,ri=Qa/si}const xr=(_t||St)&&rn.vertical,ai=rn.metrics.advance*rn.scale/2,li=rn.metrics,or=rn.rect;if(or===null)continue;St&&Je.verticalizable&&(zn=rn.imageName?ai-rn.metrics.width*rn.scale/2:0);const gr=_t?[rn.x+ai,rn.y]:[0,0];let _r=[0,0],ar=[0,0],Or=!1;_t||(xr?(ar=[rn.x+ai+Kt[0],rn.y+Kt[1]-zn],Or=!0):_r=[rn.x+ai+Ye[0],rn.y+Ye[1]-zn]);const Kr=or.w*rn.scale/(si*(rn.localGlyph?eu:1)),hs=or.h*rn.scale/(si*(rn.localGlyph?eu:1));let lr,Is,fs,jr;if(xr){const vr=rn.y-Sn,wa=new W(-ai,ai-vr),ps=-Math.PI/2,co=new W(...ar);lr=new W(-ai+_r[0],_r[1]),lr._rotateAround(ps,wa)._add(co),lr.x+=-vr+ai,lr.y-=(li.left-ri)*rn.scale;const Zs=rn.imageName?li.advance*rn.scale:lo*rn.scale,Ta=String.fromCharCode(rn.glyph);e9(Ta)?lr.x+=(1-ri)*rn.scale:t9(Ta)?lr.x+=Zs-li.height*rn.scale+(-ri-1)*rn.scale:lr.x+=rn.imageName||li.width+2*ri===or.w&&li.height+2*ri===or.h?(Zs-hs)/2:(Zs-(li.height+2*ri)*rn.scale)/2,Is=new W(lr.x,lr.y-Kr),fs=new W(lr.x+hs,lr.y),jr=new W(lr.x+hs,lr.y-Kr)}else{const vr=(li.left-ri)*rn.scale-ai+_r[0],wa=(-li.top-ri)*rn.scale+_r[1],ps=vr+Kr,co=wa+hs;lr=new W(vr,wa),Is=new W(ps,wa),fs=new W(vr,co),jr=new W(ps,co)}if(Nt){let vr;vr=_t?new W(0,0):Or?new W(Kt[0],Kt[1]):new W(Ye[0],Ye[1]),lr._rotateAround(Nt,vr),Is._rotateAround(Nt,vr),fs._rotateAround(Nt,vr),jr._rotateAround(Nt,vr)}const Di=new W(0,0),ms=new W(0,0);zt.push({tl:lr,tr:Is,bl:fs,br:jr,tex:Vn,writingMode:Je.writingMode,glyphOffset:gr,sectionIndex:rn.sectionIndex,isSDF:Ai,pixelOffsetTL:Di,pixelOffsetBR:ms,minFontScaleX:0,minFontScaleY:0})}}return zt})(0,f,I,b,w,E,g,c.allowVerticalPlacement),He=c.textSizeData;let Re=null;He.kind==="source"?(Re=[Qc*b.layout.get("text-size").evaluate(E,{},xe)],Re[0]>sf&&dt(`${c.layerIds[0]}: Value for "text-size" is >= ${Qv}. Reduce your "text-size".`)):He.kind==="composite"&&(Re=[Qc*oe.compositeTextSizes[0].evaluate(E,{},xe),Qc*oe.compositeTextSizes[1].evaluate(E,{},xe)],(Re[0]>sf||Re[1]>sf)&&dt(`${c.layerIds[0]}: Value for "text-size" is >= ${Qv}. Reduce your "text-size".`)),c.addSymbols(c.text,De,Re,I,w,E,z,o,d,D.lineStartIndex,D.lineLength,ie,de,xe);for(const Ne of j)K[Ne]=c.text.placedSymbolArray.length-1;return 4*De.length}function KD(c){for(const o in c)return c[o];return null}function lx(c,o,d,f,g,b,w,E,I,D){let z=w.top,j=w.bottom,K=w.left,ie=w.right;const oe=w.collisionPadding;if(oe&&(K-=oe[0],z-=oe[1],ie+=oe[2],j+=oe[3]),I){const de=new W(K,z),xe=new W(ie,z),De=new W(K,j),He=new W(ie,j),Re=ne(I);let Ne=new W(0,0);D&&(Ne=new W(D[0],D[1])),de._rotateAround(Re,Ne),xe._rotateAround(Re,Ne),De._rotateAround(Re,Ne),He._rotateAround(Re,Ne),K=Math.min(de.x,xe.x,De.x,He.x),ie=Math.max(de.x,xe.x,De.x,He.x),z=Math.min(de.y,xe.y,De.y,He.y),j=Math.max(de.y,xe.y,De.y,He.y)}return c.emplaceBack(o.x,o.y,o.z,d.x,d.y,K,z,ie,j,E,f,g,b),c.length-1}function NS(c){c.collisionPadding&&(c.top-=c.collisionPadding[1],c.bottom+=c.collisionPadding[3]);const o=c.bottom-c.top;return o>0?Math.max(10,o):null}function k9(c,o,d,f){const g=c.compareText;if(o in g){const b=g[o];for(let w=b.length-1;w>=0;w--)if(f.dist(b[w])<d)return!0}else g[o]=[];return g[o].push(f),!1}function XD(c,o){const d=c.fovAboveCenter,f=c.elevation?c.elevation.getMinElevationBelowMSL()*o:0,g=(c._camera.position[2]*c.worldSize-f)/Math.cos(c._pitch),b=Math.sin(d)*g/Math.sin(Math.max(Math.PI/2-c._pitch-d,.01)),w=Math.sin(c._pitch)*b+g;return Math.min(1.01*w,g*(1/c._horizonShift))}function Wm(c,o){if(!o.isReprojectedInTileSpace)return{scale:1<<c.z,x:c.x,y:c.y,x2:c.x+1,y2:c.y+1,projection:o};const d=Math.pow(2,-c.z),f=c.x*d,g=(c.x+1)*d,b=c.y*d,w=(c.y+1)*d,E=Wl(f),I=Wl(g),D=Mo(b),z=Mo(w),j=o.project(E,D),K=o.project(I,D),ie=o.project(I,z),oe=o.project(E,z);let de=Math.min(j.x,K.x,ie.x,oe.x),xe=Math.min(j.y,K.y,ie.y,oe.y),De=Math.max(j.x,K.x,ie.x,oe.x),He=Math.max(j.y,K.y,ie.y,oe.y);const Re=d/16;function Ne(Ye,yt,_t,Ot,Jt,St){const zt=(_t+Jt)/2,Nt=(Ot+St)/2,Kt=o.project(Wl(zt),Mo(Nt)),nn=Math.max(0,de-Kt.x,xe-Kt.y,Kt.x-De,Kt.y-He);de=Math.min(de,Kt.x),De=Math.max(De,Kt.x),xe=Math.min(xe,Kt.y),He=Math.max(He,Kt.y),nn>Re&&(Ne(Ye,Kt,_t,Ot,zt,Nt),Ne(Kt,yt,zt,Nt,Jt,St))}Ne(j,K,f,b,g,b),Ne(K,ie,g,b,g,w),Ne(ie,oe,g,w,f,w),Ne(oe,j,f,w,f,b),de-=Re,xe-=Re,De+=Re,He+=Re;const Je=1/Math.max(De-de,He-xe);return{scale:Je,x:de*Je,y:xe*Je,x2:De*Je,y2:He*Je,projection:o}}const I9=Zc(new Float32Array(16));class of{constructor(o){this.spec=o,this.name=o.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(o,d){return{x:0,y:0,z:0}}unproject(o,d){return new sr(0,0)}projectTilePoint(o,d,f){return{x:o,y:d,z:0}}locationPoint(o,d,f=!0){return o._coordinatePoint(o.locationCoordinate(d),f)}pixelsPerMeter(o,d){return Jc(1,o)*d}pixelSpaceConversion(o,d,f){return 1}farthestPixelDistance(o){return XD(o,o.pixelsPerMeter)}pointCoordinate(o,d,f,g){const b=o.horizonLineFromTop(!1),w=new W(d,Math.max(b,f));return o.rayIntersectionCoordinate(o.pointRayIntersection(w,g))}pointCoordinate3D(o,d,f){const g=new W(d,f);if(o.elevation)return o.elevation.pointCoordinate(g);{const b=this.pointCoordinate(o,g.x,g.y,0);return[b.x,b.y,b.z]}}isPointAboveHorizon(o,d){if(o.elevation)return!this.pointCoordinate3D(o,d.x,d.y);const f=o.horizonLineFromTop();return d.y<f}createInversionMatrix(o,d){return I9}createTileMatrix(o,d,f){let g,b,w;const E=f.canonical,I=Zc(new Float64Array(16));if(this.isReprojectedInTileSpace){const D=Wm(E,this);g=1,b=D.x+f.wrap*D.scale,w=D.y,Bm(I,I,[g/D.scale,g/D.scale,o.pixelsPerMeter/d])}else g=d/o.zoomScale(E.z),b=(E.x+Math.pow(2,E.z)*f.wrap)*g,w=E.y*g;return Pv(I,I,[b,w,0]),Bm(I,I,[g/Bn,g/Bn,1]),I}upVector(o,d,f){return[0,0,1]}upVectorScale(o,d,f){return{metersToTile:1}}}class A9 extends of{constructor(o){super(o),this.range=[4,7],this.center=o.center||[-96,37.5];const[d,f]=this.parallels=o.parallels||[29.5,45.5],g=Math.sin(ne(d));this.n=(g+Math.sin(ne(f)))/2,this.c=1+g*(2*this.n-g),this.r0=Math.sqrt(this.c)/this.n}project(o,d){const{n:f,c:g,r0:b}=this,w=ne(o-this.center[0]),E=ne(d),I=Math.sqrt(g-2*f*Math.sin(E))/f;return{x:I*Math.sin(w*f),y:I*Math.cos(w*f)-b,z:0}}unproject(o,d){const{n:f,c:g,r0:b}=this,w=b+d;let E=Math.atan2(o,Math.abs(w))*Math.sign(w);w*f<0&&(E-=Math.PI*Math.sign(o)*Math.sign(w));const I=ne(this.center[0])*f;E=ve(E,-Math.PI-I,Math.PI-I);const D=Ae(Se(E/f)+this.center[0],-180,180),z=Math.asin(Ae((g-(o*o+w*w)*f*f)/(2*f),-1,1)),j=Ae(Se(z),-Do,Do);return new sr(D,j)}}const ey=1.340264,ty=-.081106,ny=893e-6,iy=.003796,cx=Math.sqrt(3)/2;class P9 extends of{project(o,d){d=d/180*Math.PI,o=o/180*Math.PI;const f=Math.asin(cx*Math.sin(d)),g=f*f,b=g*g*g;return{x:.5*(o*Math.cos(f)/(cx*(ey+3*ty*g+b*(7*ny+9*iy*g)))/Math.PI+.5),y:1-.5*(f*(ey+ty*g+b*(ny+iy*g))/Math.PI+1),z:0}}unproject(o,d){o=(2*o-.5)*Math.PI;let f=d=(2*(1-d)-1)*Math.PI,g=f*f,b=g*g*g;for(let z,j,K,ie=0;ie<12&&(j=f*(ey+ty*g+b*(ny+iy*g))-d,K=ey+3*ty*g+b*(7*ny+9*iy*g),z=j/K,f=Ae(f-z,-Math.PI/3,Math.PI/3),g=f*f,b=g*g*g,!(Math.abs(z)<1e-12));++ie);const w=cx*o*(ey+3*ty*g+b*(7*ny+9*iy*g))/Math.cos(f),E=Math.asin(Math.sin(f)/cx),I=Ae(180*w/Math.PI,-180,180),D=Ae(180*E/Math.PI,-Do,Do);return new sr(I,D)}}class M9 extends of{constructor(o){super(o),this.wrap=!0,this.supportsWorldCopies=!0}project(o,d){return{x:.5+o/360,y:.5-d/360,z:0}}unproject(o,d){const f=360*(o-.5),g=Ae(360*(.5-d),-Do,Do);return new sr(f,g)}}const Xg=Math.PI/2;function ux(c){return Math.tan((Xg+c)/2)}class D9 extends of{constructor(o){super(o),this.center=o.center||[0,30];const[d,f]=this.parallels=o.parallels||[30,30];let g=ne(d),b=ne(f);this.southernCenter=g+b<0,this.southernCenter&&(g=-g,b=-b);const w=Math.cos(g),E=ux(g);this.n=g===b?Math.sin(g):Math.log(w/Math.cos(b))/Math.log(ux(b)/E),this.f=w*Math.pow(ux(g),this.n)/this.n}project(o,d){d=ne(d),this.southernCenter&&(d=-d),o=ne(o-this.center[0]);const f=1e-6,{n:g,f:b}=this;b>0?d<-Xg+f&&(d=-Xg+f):d>Xg-f&&(d=Xg-f);const w=b/Math.pow(ux(d),g);let E=w*Math.sin(g*o),I=b-w*Math.cos(g*o);return E=.5*(E/Math.PI+.5),I=.5*(I/Math.PI+.5),{x:E,y:this.southernCenter?I:1-I,z:0}}unproject(o,d){o=(2*o-.5)*Math.PI,this.southernCenter&&(d=1-d),d=(2*(1-d)-.5)*Math.PI;const{n:f,f:g}=this,b=g-d,w=Math.sign(b),E=Math.sign(f)*Math.sqrt(o*o+b*b);let I=Math.atan2(o,Math.abs(b))*w;b*f<0&&(I-=Math.PI*Math.sign(o)*w);const D=Ae(Se(I/f)+this.center[0],-180,180),z=Ae(Se(2*Math.atan(Math.pow(g/E,1/f))-Xg),-Do,Do);return new sr(D,this.southernCenter?-z:z)}}class ZD extends of{constructor(o){super(o),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(o,d){return{x:Iu(o),y:Au(d),z:0}}unproject(o,d){const f=Wl(o),g=Mo(d);return new sr(f,g)}}const YD=ne(Do);class R9 extends of{project(o,d){const f=(d=ne(d))*d,g=f*f;return{x:.5*((o=ne(o))*(.8707-.131979*f+g*(g*(.003971*f-.001529*g)-.013791))/Math.PI+.5),y:1-.5*(d*(1.007226+f*(.015085+g*(.028874*f-.044475-.005916*g)))/Math.PI+1),z:0}}unproject(o,d){o=(2*o-.5)*Math.PI;let f=d=(2*(1-d)-1)*Math.PI,g=25,b=0,w=f*f;do{w=f*f;const D=w*w;b=(f*(1.007226+w*(.015085+D*(.028874*w-.044475-.005916*D)))-d)/(1.007226+w*(.045255+D*(.259866*w-.311325-.005916*11*D))),f=Ae(f-b,-YD,YD)}while(Math.abs(b)>1e-6&&--g>0);w=f*f;const E=Ae(Se(o/(.8707+w*(w*(w*w*w*(.003971-.001529*w)-.013791)-.131979))),-180,180),I=Se(f);return new sr(E,I)}}const JD=ne(Do);class L9 extends of{project(o,d){d=ne(d),o=ne(o);const f=Math.cos(d),g=2/Math.PI,b=Math.acos(f*Math.cos(o/2)),w=Math.sin(b)/b,E=.5*(o*g+2*f*Math.sin(o/2)/w)||0,I=.5*(d+Math.sin(d)/w)||0;return{x:.5*(E/Math.PI+.5),y:1-.5*(I/Math.PI+1),z:0}}unproject(o,d){let f=o=(2*o-.5)*Math.PI,g=d=(2*(1-d)-1)*Math.PI,b=25;const w=1e-6;let E=0,I=0;do{const D=Math.cos(g),z=Math.sin(g),j=2*z*D,K=z*z,ie=D*D,oe=Math.cos(f/2),de=Math.sin(f/2),xe=2*oe*de,De=de*de,He=1-ie*oe*oe,Re=He?1/He:0,Ne=He?Math.acos(D*oe)*Math.sqrt(1/He):0,Je=.5*(2*Ne*D*de+2*f/Math.PI)-o,Ye=.5*(Ne*z+g)-d,yt=.5*Re*(ie*De+Ne*D*oe*K)+1/Math.PI,_t=Re*(xe*j/4-Ne*z*de),Ot=.125*Re*(j*de-Ne*z*ie*xe),Jt=.5*Re*(K*oe+Ne*De*D)+.5,St=_t*Ot-Jt*yt;E=(Ye*_t-Je*Jt)/St,I=(Je*Ot-Ye*yt)/St,f=Ae(f-E,-Math.PI,Math.PI),g=Ae(g-I,-JD,JD)}while((Math.abs(E)>w||Math.abs(I)>w)&&--b>0);return new sr(Se(f),Se(g))}}class QD extends of{constructor(o){super(o),this.center=o.center||[0,0],this.parallels=o.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(ne(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(o,d){const{scale:f,cosPhi:g}=this;return{x:ne(o)*g*f+.5,y:-Math.sin(ne(d))/g*f+.5,z:0}}unproject(o,d){const{scale:f,cosPhi:g}=this,b=-(d-.5)/f,w=Ae(Se((o-.5)/f)/g,-180,180),E=Math.asin(Ae(b*g,-1,1)),I=Ae(Se(E),-Do,Do);return new sr(w,I)}}class O9 extends ZD{constructor(o){super(o),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(o,d,f){const g=Fv(o,d,f);return rs(g,g,zv(ku(f))),{x:g[0],y:g[1],z:g[2]}}locationPoint(o,d){const f=Lg(d.lat,d.lng),g=ya([],f),b=o.elevation?o.elevation.getAtPointOrZero(o.locationCoordinate(d),o._centerAltitude):o._centerAltitude;Lv(f,f,g,Jc(1,0)*Bn*b);const w=Zc(new Float64Array(16));return Vm(w,o.pixelMatrix,o.globeMatrix),rs(f,f,w),new W(f[0],f[1])}pixelsPerMeter(o,d){return Jc(1,0)*d}pixelSpaceConversion(o,d,f){const g=Jc(1,o)*d,b=Yn(Jc(1,45)*d,g,f);return this.pixelsPerMeter(o,d)/b}createTileMatrix(o,d,f){const g=uS(ku(f.canonical));return Vm(new Float64Array(16),o.globeMatrix,g)}createInversionMatrix(o,d){const{center:f}=o,g=zv(ku(d));return F0(g,g,ne(f.lng)),eS(g,g,ne(f.lat)),Bm(g,g,[o._pixelsPerMercatorPixel,o._pixelsPerMercatorPixel,1]),Float32Array.from(g)}pointCoordinate(o,d,f,g){return CM(o,d,f,!0)||new Vg(0,0)}pointCoordinate3D(o,d,f){const g=this.pointCoordinate(o,d,f,0);return[g.x,g.y,g.z]}isPointAboveHorizon(o,d){return!CM(o,d.x,d.y,!1)}farthestPixelDistance(o){const d=(function(g,b){const w=g.cameraToCenterDistance,E=g._centerAltitude*b,I=g._camera,D=g._camera.forward(),z=Bd([],jl([],D,-w),[0,0,E]),j=g.worldSize/(2*Math.PI),K=[0,0,-j],ie=g.width/g.height,oe=Math.tan(g.fovAboveCenter),de=jl([],I.up(),oe),xe=jl([],I.right(),oe*ie),De=ya([],Bd([],Bd([],D,de),xe)),He=[];let Re;if(new rS(z,De).closestPointOnSphere(K,j,He)){const Ne=Bd([],He,K),Je=Yc([],Ne,z);Re=Math.cos(g.fovAboveCenter)*Mv(Je)}else{const Ne=Yc([],z,K),Je=Yc([],K,z);ya(Je,Je);const Ye=Mv(Ne)-j;Re=Math.sqrt(Ye*(Ye+2*j));const yt=Math.acos(Re/(j+Ye))-Math.acos(bc(D,Je));Re*=Math.cos(yt)}return 1.01*Re})(o,this.pixelsPerMeter(o.center.lat,o.worldSize)),f=Og(o.zoom);if(f>0){const g=XD(o,Jc(1,o.center.lat)*o.worldSize),b=o.worldSize/(2*Math.PI),w=Math.max(o.width,o.height)/o.worldSize*Math.PI;return Yn(d,g+b*(1-Math.cos(w)),Math.pow(f,10))}return d}upVector(o,d,f){return Fv(d,f,o,1)}upVectorScale(o){return{metersToTile:z0(U0(ku(o)))}}}function eR(c){const o=c.parallels,d=!!o&&Math.abs(o[0]+o[1])<.01;switch(c.name){case"mercator":return new ZD(c);case"equirectangular":return new M9(c);case"naturalEarth":return new R9(c);case"equalEarth":return new P9(c);case"winkelTripel":return new L9(c);case"albers":return d?new QD(c):new A9(c);case"lambertConformalConic":return d?new QD(c):new D9(c);case"globe":return new O9(c)}throw new Error(`Invalid projection name: ${c.name}`)}const V9=Y0.types,B9=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function dx(c,o,d,f,g,b,w,E,I,D,z,j,K){const ie=E?Math.min(sf,Math.round(E[0])):0,oe=E?Math.min(sf,Math.round(E[1])):0;c.emplaceBack(o,d,Math.round(32*f),Math.round(32*g),b,w,(ie<<1)+(I?1:0),oe,16*D,16*z,256*j,256*K)}function hx(c,o,d,f,g,b,w){c.emplaceBack(o,d,f,g,b,w)}function fx(c,o,d,f,g){c.emplaceBack(o,d,f,g),c.emplaceBack(o,d,f,g),c.emplaceBack(o,d,f,g),c.emplaceBack(o,d,f,g)}function F9(c){for(const o of c.sections)if(Md(o.text))return!0;return!1}class US{constructor(o){this.layoutVertexArray=new Bt,this.indexArray=new kn,this.programConfigurations=o,this.segments=new us,this.dynamicLayoutVertexArray=new Wt,this.opacityVertexArray=new Pn,this.placedSymbolArray=new Lr,this.globeExtVertexArray=new qt}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(o,d,f,g){this.isEmpty()||(f&&(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,GW.members),this.indexBuffer=o.createIndexBuffer(this.indexArray,d),this.dynamicLayoutVertexBuffer=o.createVertexBuffer(this.dynamicLayoutVertexArray,KW.members,!0),this.opacityVertexBuffer=o.createVertexBuffer(this.opacityVertexArray,B9,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=o.createVertexBuffer(this.globeExtVertexArray,qW.members,!0)),this.opacityVertexBuffer.itemSize=1),(f||g)&&this.programConfigurations.upload(o))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}bn(US,"SymbolBuffers");class $S{constructor(o,d,f){this.layoutVertexArray=new o,this.layoutAttributes=d,this.indexArray=new f,this.segments=new us,this.collisionVertexArray=new pi,this.collisionVertexArrayExt=new fi}upload(o){this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=o.createVertexBuffer(this.collisionVertexArray,XW.members,!0),this.collisionVertexBufferExt=o.createVertexBuffer(this.collisionVertexArrayExt,ZW.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}bn($S,"CollisionBuffers");class af{constructor(o){this.collisionBoxArray=o.collisionBoxArray,this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map((w=>w.id)),this.index=o.index,this.pixelRatio=o.pixelRatio,this.sourceLayerIndex=o.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Zc([]),this.placementViewportMatrix=Zc([]);const d=this.layers[0]._unevaluatedLayout._values;this.textSizeData=PS(this.zoom,d["text-size"]),this.iconSizeData=PS(this.zoom,d["icon-size"]);const f=this.layers[0].layout,g=f.get("symbol-sort-key"),b=f.get("symbol-z-order");this.canOverlap=f.get("text-allow-overlap")||f.get("icon-allow-overlap")||f.get("text-ignore-placement")||f.get("icon-ignore-placement"),this.sortFeaturesByKey=b!=="viewport-y"&&g.constantOr(1)!==void 0,this.sortFeaturesByY=(b==="viewport-y"||b==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=f.get("text-writing-mode").map((w=>Hl[w])),this.stateDependentLayerIds=this.layers.filter((w=>w.isStateDependent())).map((w=>w.id)),this.sourceID=o.sourceID,this.projection=o.projection}createArrays(){this.text=new US(new Om(this.layers,this.zoom,(o=>/^text/.test(o)))),this.icon=new US(new Om(this.layers,this.zoom,(o=>/^icon/.test(o)))),this.glyphOffsetArray=new ao,this.lineVertexArray=new Dd,this.symbolInstances=new rr}calculateGlyphDependencies(o,d,f,g,b){for(let w=0;w<o.length;w++)if(d[o.charCodeAt(w)]=!0,g&&b){const E=Zv[o.charAt(w)];E&&(d[E.charCodeAt(0)]=!0)}}populate(o,d,f,g){const b=this.layers[0],w=b.layout,E=this.projection.name==="globe",I=w.get("text-font"),D=w.get("text-field"),z=w.get("icon-image"),j=(D.value.kind!=="constant"||D.value.value instanceof qr&&!D.value.value.isEmpty()||D.value.value.toString().length>0)&&(I.value.kind!=="constant"||I.value.value.length>0),K=z.value.kind!=="constant"||!!z.value.value||Object.keys(z.parameters).length>0,ie=w.get("symbol-sort-key");if(this.features=[],!j&&!K)return;const oe=d.iconDependencies,de=d.glyphDependencies,xe=d.availableImages,De=new U(this.zoom);for(const{feature:He,id:Re,index:Ne,sourceLayerIndex:Je}of o){const Ye=b._featureFilter.needGeometry,yt=Um(He,Ye);if(!b._featureFilter.filter(De,yt,f))continue;if(Ye||(yt.geometry=Fd(He,f,g)),E&&He.type!==1&&f.z<=5){const St=yt.geometry,zt=.98078528056,Nt=(Kt,nn)=>bc(Fv(Kt.x,Kt.y,f,1),Fv(nn.x,nn.y,f,1))<zt;for(let Kt=0;Kt<St.length;Kt++)St[Kt]=K8(St[Kt],Nt)}let _t,Ot;if(j){const St=b.getValueAndResolveTokens("text-field",yt,f,xe),zt=qr.factory(St);F9(zt)&&(this.hasRTLText=!0),(!this.hasRTLText||C()==="unavailable"||this.hasRTLText&&O.isParsed())&&(_t=QW(zt,b,yt))}if(K){const St=b.getValueAndResolveTokens("icon-image",yt,f,xe);Ot=St instanceof is?St:is.fromString(St)}if(!_t&&!Ot)continue;const Jt=this.sortFeaturesByKey?ie.evaluate(yt,{},f):void 0;if(this.features.push({id:Re,text:_t,icon:Ot,index:Ne,sourceLayerIndex:Je,geometry:yt.geometry,properties:He.properties,type:V9[He.type],sortKey:Jt}),Ot&&(oe[Ot.name]=!0),_t){const St=I.evaluate(yt,{},f).join(","),zt=w.get("text-rotation-alignment")==="map"&&w.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Hl.vertical)>=0;for(const Nt of _t.sections)if(Nt.image)oe[Nt.image.name]=!0;else{const Kt=Dm(_t.toString()),nn=Nt.fontStack||St,Lt=de[nn]=de[nn]||{};this.calculateGlyphDependencies(Nt.text,Lt,zt,this.allowVerticalPlacement,Kt)}}}w.get("symbol-placement")==="line"&&(this.features=(function(He){const Re={},Ne={},Je=[];let Ye=0;function yt(St){Je.push(He[St]),Ye++}function _t(St,zt,Nt){const Kt=Ne[St];return delete Ne[St],Ne[zt]=Kt,Je[Kt].geometry[0].pop(),Je[Kt].geometry[0]=Je[Kt].geometry[0].concat(Nt[0]),Kt}function Ot(St,zt,Nt){const Kt=Re[zt];return delete Re[zt],Re[St]=Kt,Je[Kt].geometry[0].shift(),Je[Kt].geometry[0]=Nt[0].concat(Je[Kt].geometry[0]),Kt}function Jt(St,zt,Nt){const Kt=Nt?zt[0][zt[0].length-1]:zt[0][0];return`${St}:${Kt.x}:${Kt.y}`}for(let St=0;St<He.length;St++){const zt=He[St],Nt=zt.geometry,Kt=zt.text?zt.text.toString():null;if(!Kt){yt(St);continue}const nn=Jt(Kt,Nt),Lt=Jt(Kt,Nt,!0);if(nn in Ne&&Lt in Re&&Ne[nn]!==Re[Lt]){const fn=Ot(nn,Lt,Nt),Sn=_t(nn,Lt,Je[fn].geometry);delete Re[nn],delete Ne[Lt],Ne[Jt(Kt,Je[Sn].geometry,!0)]=Sn,Je[fn].geometry=null}else nn in Ne?_t(nn,Lt,Nt):Lt in Re?Ot(nn,Lt,Nt):(yt(St),Re[nn]=Ye-1,Ne[Lt]=Ye-1)}return Je.filter((St=>St.geometry))})(this.features)),this.sortFeaturesByKey&&this.features.sort(((He,Re)=>He.sortKey-Re.sortKey))}update(o,d,f,g){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(o,d,this.layers,f,g),this.icon.programConfigurations.updatePaintArrays(o,d,this.layers,f,g))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(o){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(o),this.iconCollisionBox.upload(o)),this.text.upload(o,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(o,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=eR(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(o,d){const f=this.lineVertexArray.length;if(o.segment!==void 0)for(const{x:g,y:b}of d)this.lineVertexArray.emplaceBack(g,b);return{lineStartIndex:f,lineLength:this.lineVertexArray.length-f}}addSymbols(o,d,f,g,b,w,E,I,D,z,j,K,ie,oe){const de=o.indexArray,xe=o.layoutVertexArray,De=o.globeExtVertexArray,He=o.segments.prepareSegment(4*d.length,xe,de,this.canOverlap?w.sortKey:void 0),Re=this.glyphOffsetArray.length,Ne=He.vertexLength,Je=this.allowVerticalPlacement&&E===Hl.vertical?Math.PI/2:0,Ye=w.text&&w.text.sections;for(let _t=0;_t<d.length;_t++){const{tl:Ot,tr:Jt,bl:St,br:zt,tex:Nt,pixelOffsetTL:Kt,pixelOffsetBR:nn,minFontScaleX:Lt,minFontScaleY:fn,glyphOffset:Sn,isSDF:gn,sectionIndex:ii}=d[_t],rn=He.vertexLength,Vn=Sn[1];if(dx(xe,D.x,D.y,Ot.x,Vn+Ot.y,Nt.x,Nt.y,f,gn,Kt.x,Kt.y,Lt,fn),dx(xe,D.x,D.y,Jt.x,Vn+Jt.y,Nt.x+Nt.w,Nt.y,f,gn,nn.x,Kt.y,Lt,fn),dx(xe,D.x,D.y,St.x,Vn+St.y,Nt.x,Nt.y+Nt.h,f,gn,Kt.x,nn.y,Lt,fn),dx(xe,D.x,D.y,zt.x,Vn+zt.y,Nt.x+Nt.w,Nt.y+Nt.h,f,gn,nn.x,nn.y,Lt,fn),I){const{x:ri,y:Ai,z:si}=I.anchor,[zn,xr,ai]=I.up;hx(De,ri,Ai,si,zn,xr,ai),hx(De,ri,Ai,si,zn,xr,ai),hx(De,ri,Ai,si,zn,xr,ai),hx(De,ri,Ai,si,zn,xr,ai),fx(o.dynamicLayoutVertexArray,ri,Ai,si,Je)}else fx(o.dynamicLayoutVertexArray,D.x,D.y,D.z,Je);de.emplaceBack(rn,rn+1,rn+2),de.emplaceBack(rn+1,rn+2,rn+3),He.vertexLength+=4,He.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Sn[0]),_t!==d.length-1&&ii===d[_t+1].sectionIndex||o.programConfigurations.populatePaintArrays(xe.length,w,w.index,{},ie,oe,Ye&&Ye[ii])}const yt=I?I.anchor:D;o.placedSymbolArray.emplaceBack(yt.x,yt.y,yt.z,D.x,D.y,Re,this.glyphOffsetArray.length-Re,Ne,z,j,D.segment,f?f[0]:0,f?f[1]:0,g[0],g[1],E,0,!1,0,K,0)}_commitLayoutVertex(o,d,f,g,b,w,E){o.emplaceBack(d,f,g,b,w,Math.round(E.x),Math.round(E.y))}_addCollisionDebugVertices(o,d,f,g,b,w,E){const I=f.segments.prepareSegment(4,f.layoutVertexArray,f.indexArray),D=I.vertexLength,z=E.tileAnchorX,j=E.tileAnchorY;for(let ie=0;ie<4;ie++)f.collisionVertexArray.emplaceBack(0,0,0,0);f.collisionVertexArrayExt.emplaceBack(d,-o.padding,-o.padding),f.collisionVertexArrayExt.emplaceBack(d,o.padding,-o.padding),f.collisionVertexArrayExt.emplaceBack(d,o.padding,o.padding),f.collisionVertexArrayExt.emplaceBack(d,-o.padding,o.padding),this._commitLayoutVertex(f.layoutVertexArray,g,b,w,z,j,new W(o.x1,o.y1)),this._commitLayoutVertex(f.layoutVertexArray,g,b,w,z,j,new W(o.x2,o.y1)),this._commitLayoutVertex(f.layoutVertexArray,g,b,w,z,j,new W(o.x2,o.y2)),this._commitLayoutVertex(f.layoutVertexArray,g,b,w,z,j,new W(o.x1,o.y2)),I.vertexLength+=4;const K=f.indexArray;K.emplaceBack(D,D+1),K.emplaceBack(D+1,D+2),K.emplaceBack(D+2,D+3),K.emplaceBack(D+3,D),I.primitiveLength+=4}_addTextDebugCollisionBoxes(o,d,f,g,b,w){for(let E=g;E<b;E++){const I=f.get(E),D=this.getSymbolInstanceTextSize(o,w,d,E);this._addCollisionDebugVertices(I,D,this.textCollisionBox,I.projectedAnchorX,I.projectedAnchorY,I.projectedAnchorZ,w)}}_addIconDebugCollisionBoxes(o,d,f,g,b,w){for(let E=g;E<b;E++){const I=f.get(E),D=this.getSymbolInstanceIconSize(o,d,w.placedIconSymbolIndex);this._addCollisionDebugVertices(I,D,this.iconCollisionBox,I.projectedAnchorX,I.projectedAnchorY,I.projectedAnchorZ,w)}}generateCollisionDebugBuffers(o,d){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new $S(xn,yD.members,ks),this.iconCollisionBox=new $S(xn,yD.members,ks);const f=Ug(this.iconSizeData,o),g=Ug(this.textSizeData,o);for(let b=0;b<this.symbolInstances.length;b++){const w=this.symbolInstances.get(b);this._addTextDebugCollisionBoxes(g,o,d,w.textBoxStartIndex,w.textBoxEndIndex,w),this._addTextDebugCollisionBoxes(g,o,d,w.verticalTextBoxStartIndex,w.verticalTextBoxEndIndex,w),this._addIconDebugCollisionBoxes(f,o,d,w.iconBoxStartIndex,w.iconBoxEndIndex,w),this._addIconDebugCollisionBoxes(f,o,d,w.verticalIconBoxStartIndex,w.verticalIconBoxEndIndex,w)}}getSymbolInstanceTextSize(o,d,f,g){const b=this.text.placedSymbolArray.get(d.rightJustifiedTextSymbolIndex>=0?d.rightJustifiedTextSymbolIndex:d.centerJustifiedTextSymbolIndex>=0?d.centerJustifiedTextSymbolIndex:d.leftJustifiedTextSymbolIndex>=0?d.leftJustifiedTextSymbolIndex:d.verticalPlacedTextSymbolIndex>=0?d.verticalPlacedTextSymbolIndex:g),w=tx(this.textSizeData,o,b)/lo;return this.tilePixelRatio*w}getSymbolInstanceIconSize(o,d,f){const g=this.icon.placedSymbolArray.get(f),b=tx(this.iconSizeData,o,g);return this.tilePixelRatio*b}_commitDebugCollisionVertexUpdate(o,d,f){o.emplaceBack(d,-f,-f),o.emplaceBack(d,f,-f),o.emplaceBack(d,f,f),o.emplaceBack(d,-f,f)}_updateTextDebugCollisionBoxes(o,d,f,g,b,w){for(let E=g;E<b;E++){const I=f.get(E),D=this.getSymbolInstanceTextSize(o,w,d,E);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,D,I.padding)}}_updateIconDebugCollisionBoxes(o,d,f,g,b,w){for(let E=g;E<b;E++){const I=f.get(E),D=this.getSymbolInstanceIconSize(o,d,w);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,D,I.padding)}}updateCollisionDebugBuffers(o,d){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const f=Ug(this.iconSizeData,o),g=Ug(this.textSizeData,o);for(let b=0;b<this.symbolInstances.length;b++){const w=this.symbolInstances.get(b);this._updateTextDebugCollisionBoxes(g,o,d,w.textBoxStartIndex,w.textBoxEndIndex,w),this._updateTextDebugCollisionBoxes(g,o,d,w.verticalTextBoxStartIndex,w.verticalTextBoxEndIndex,w),this._updateIconDebugCollisionBoxes(f,o,d,w.iconBoxStartIndex,w.iconBoxEndIndex,w.placedIconSymbolIndex),this._updateIconDebugCollisionBoxes(f,o,d,w.verticalIconBoxStartIndex,w.verticalIconBoxEndIndex,w.placedIconSymbolIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(o,d,f,g,b,w,E,I,D){const z={};if(d<f){const{x1:j,y1:K,x2:ie,y2:oe,padding:de,projectedAnchorX:xe,projectedAnchorY:De,projectedAnchorZ:He,tileAnchorX:Re,tileAnchorY:Ne,featureIndex:Je}=o.get(d);z.textBox={x1:j,y1:K,x2:ie,y2:oe,padding:de,projectedAnchorX:xe,projectedAnchorY:De,projectedAnchorZ:He,tileAnchorX:Re,tileAnchorY:Ne},z.textFeatureIndex=Je}if(g<b){const{x1:j,y1:K,x2:ie,y2:oe,padding:de,projectedAnchorX:xe,projectedAnchorY:De,projectedAnchorZ:He,tileAnchorX:Re,tileAnchorY:Ne,featureIndex:Je}=o.get(g);z.verticalTextBox={x1:j,y1:K,x2:ie,y2:oe,padding:de,projectedAnchorX:xe,projectedAnchorY:De,projectedAnchorZ:He,tileAnchorX:Re,tileAnchorY:Ne},z.verticalTextFeatureIndex=Je}if(w<E){const{x1:j,y1:K,x2:ie,y2:oe,padding:de,projectedAnchorX:xe,projectedAnchorY:De,projectedAnchorZ:He,tileAnchorX:Re,tileAnchorY:Ne,featureIndex:Je}=o.get(w);z.iconBox={x1:j,y1:K,x2:ie,y2:oe,padding:de,projectedAnchorX:xe,projectedAnchorY:De,projectedAnchorZ:He,tileAnchorX:Re,tileAnchorY:Ne},z.iconFeatureIndex=Je}if(I<D){const{x1:j,y1:K,x2:ie,y2:oe,padding:de,projectedAnchorX:xe,projectedAnchorY:De,projectedAnchorZ:He,tileAnchorX:Re,tileAnchorY:Ne,featureIndex:Je}=o.get(I);z.verticalIconBox={x1:j,y1:K,x2:ie,y2:oe,padding:de,projectedAnchorX:xe,projectedAnchorY:De,projectedAnchorZ:He,tileAnchorX:Re,tileAnchorY:Ne},z.verticalIconFeatureIndex=Je}return z}deserializeCollisionBoxes(o){this.collisionArrays=[];for(let d=0;d<this.symbolInstances.length;d++){const f=this.symbolInstances.get(d);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(o,f.textBoxStartIndex,f.textBoxEndIndex,f.verticalTextBoxStartIndex,f.verticalTextBoxEndIndex,f.iconBoxStartIndex,f.iconBoxEndIndex,f.verticalIconBoxStartIndex,f.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(o,d){const f=o.placedSymbolArray.get(d),g=f.vertexStartIndex+4*f.numGlyphs;for(let b=f.vertexStartIndex;b<g;b+=4)o.indexArray.emplaceBack(b,b+1,b+2),o.indexArray.emplaceBack(b+1,b+2,b+3)}getSortedSymbolIndexes(o){if(this.sortedAngle===o&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const d=Math.sin(o),f=Math.cos(o),g=[],b=[],w=[];for(let E=0;E<this.symbolInstances.length;++E){w.push(E);const I=this.symbolInstances.get(E);g.push(0|Math.round(d*I.tileAnchorX+f*I.tileAnchorY)),b.push(I.featureIndex)}return w.sort(((E,I)=>g[E]-g[I]||b[I]-b[E])),w}addToSortKeyRanges(o,d){const f=this.sortKeyRanges[this.sortKeyRanges.length-1];f&&f.sortKey===d?f.symbolInstanceEnd=o+1:this.sortKeyRanges.push({sortKey:d,symbolInstanceStart:o,symbolInstanceEnd:o+1})}sortFeatures(o){if(this.sortFeaturesByY&&this.sortedAngle!==o&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(o),this.sortedAngle=o,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const d of this.symbolInstanceIndexes){const f=this.symbolInstances.get(d);this.featureSortOrder.push(f.featureIndex);const{rightJustifiedTextSymbolIndex:g,centerJustifiedTextSymbolIndex:b,leftJustifiedTextSymbolIndex:w,verticalPlacedTextSymbolIndex:E,placedIconSymbolIndex:I,verticalPlacedIconSymbolIndex:D}=f;g>=0&&this.addIndicesForPlacedSymbol(this.text,g),b>=0&&b!==g&&this.addIndicesForPlacedSymbol(this.text,b),w>=0&&w!==b&&w!==g&&this.addIndicesForPlacedSymbol(this.text,w),E>=0&&this.addIndicesForPlacedSymbol(this.text,E),I>=0&&this.addIndicesForPlacedSymbol(this.icon,I),D>=0&&this.addIndicesForPlacedSymbol(this.icon,D)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}bn(af,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),af.MAX_GLYPHS=65535,af.addDynamicAttributes=fx;const z9=new Me({"symbol-placement":new le(Mt.layout_symbol["symbol-placement"]),"symbol-spacing":new le(Mt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new le(Mt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new _e(Mt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new le(Mt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new le(Mt.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new le(Mt.layout_symbol["icon-ignore-placement"]),"icon-optional":new le(Mt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new le(Mt.layout_symbol["icon-rotation-alignment"]),"icon-size":new _e(Mt.layout_symbol["icon-size"]),"icon-text-fit":new le(Mt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new le(Mt.layout_symbol["icon-text-fit-padding"]),"icon-image":new _e(Mt.layout_symbol["icon-image"]),"icon-rotate":new _e(Mt.layout_symbol["icon-rotate"]),"icon-padding":new le(Mt.layout_symbol["icon-padding"]),"icon-keep-upright":new le(Mt.layout_symbol["icon-keep-upright"]),"icon-offset":new _e(Mt.layout_symbol["icon-offset"]),"icon-anchor":new _e(Mt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new le(Mt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new le(Mt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new le(Mt.layout_symbol["text-rotation-alignment"]),"text-field":new _e(Mt.layout_symbol["text-field"]),"text-font":new _e(Mt.layout_symbol["text-font"]),"text-size":new _e(Mt.layout_symbol["text-size"]),"text-max-width":new _e(Mt.layout_symbol["text-max-width"]),"text-line-height":new _e(Mt.layout_symbol["text-line-height"]),"text-letter-spacing":new _e(Mt.layout_symbol["text-letter-spacing"]),"text-justify":new _e(Mt.layout_symbol["text-justify"]),"text-radial-offset":new _e(Mt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new le(Mt.layout_symbol["text-variable-anchor"]),"text-anchor":new _e(Mt.layout_symbol["text-anchor"]),"text-max-angle":new le(Mt.layout_symbol["text-max-angle"]),"text-writing-mode":new le(Mt.layout_symbol["text-writing-mode"]),"text-rotate":new _e(Mt.layout_symbol["text-rotate"]),"text-padding":new le(Mt.layout_symbol["text-padding"]),"text-keep-upright":new le(Mt.layout_symbol["text-keep-upright"]),"text-transform":new _e(Mt.layout_symbol["text-transform"]),"text-offset":new _e(Mt.layout_symbol["text-offset"]),"text-allow-overlap":new le(Mt.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new le(Mt.layout_symbol["text-ignore-placement"]),"text-optional":new le(Mt.layout_symbol["text-optional"])});var jS={paint:new Me({"icon-opacity":new _e(Mt.paint_symbol["icon-opacity"]),"icon-color":new _e(Mt.paint_symbol["icon-color"]),"icon-halo-color":new _e(Mt.paint_symbol["icon-halo-color"]),"icon-halo-width":new _e(Mt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new _e(Mt.paint_symbol["icon-halo-blur"]),"icon-translate":new le(Mt.paint_symbol["icon-translate"]),"icon-translate-anchor":new le(Mt.paint_symbol["icon-translate-anchor"]),"text-opacity":new _e(Mt.paint_symbol["text-opacity"]),"text-color":new _e(Mt.paint_symbol["text-color"],{runtimeType:fr,getOverride:c=>c.textColor,hasOverride:c=>!!c.textColor}),"text-halo-color":new _e(Mt.paint_symbol["text-halo-color"]),"text-halo-width":new _e(Mt.paint_symbol["text-halo-width"]),"text-halo-blur":new _e(Mt.paint_symbol["text-halo-blur"]),"text-translate":new le(Mt.paint_symbol["text-translate"]),"text-translate-anchor":new le(Mt.paint_symbol["text-translate-anchor"])}),layout:z9};class tR{constructor(o){this.type=o.property.overrides?o.property.overrides.runtimeType:ua,this.defaultValue=o}evaluate(o){if(o.formattedSection){const d=this.defaultValue.property.overrides;if(d&&d.hasOverride(o.formattedSection))return d.getOverride(o.formattedSection)}return o.feature&&o.featureState?this.defaultValue.evaluate(o.feature,o.featureState):this.defaultValue.property.specification.default}eachChild(o){this.defaultValue.isConstant()||o(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}bn(tR,"FormatSectionOverride",{omit:["defaultValue"]});class mx extends Xc{constructor(o){super(o,jS)}recalculate(o,d){super.recalculate(o,d),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const f=this.layout.get("text-writing-mode");if(f){const g=[];for(const b of f)g.indexOf(b)<0&&g.push(b);this.layout._values["text-writing-mode"]=g}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(o,d,f,g){const b=this.layout.get(o).evaluate(d,{},f,g),w=this._unevaluatedLayout._values[o];return w.isDataDriven()||wu(w.value)||!b?b:(function(E,I){return I.replace(/{([^{}]+)}/g,((D,z)=>z in E?String(E[z]):""))})(d.properties,b)}createBucket(o){return new af(o)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const o of jS.paint.overridableProperties){if(!mx.hasPaintOverride(this.layout,o))continue;const d=this.paint.get(o),f=new tR(d),g=new Gh(f,d.property.specification);let b=null;b=d.value.kind==="constant"||d.value.kind==="source"?new wd("source",g):new gc("composite",g,d.value.zoomStops,d.value._interpolationType),this.paint._values[o]=new be(d.property,b,d.parameters)}}_handleOverridablePaintPropertyUpdate(o,d,f){return!(!this.layout||d.isDataDriven()||f.isDataDriven())&&mx.hasPaintOverride(this.layout,o)}static hasPaintOverride(o,d){const f=o.get("text-field"),g=jS.paint.properties[d];let b=!1;const w=E=>{for(const I of E)if(g.overrides&&g.overrides.hasOverride(I))return void(b=!0)};if(f.value.kind==="constant"&&f.value.value instanceof qr)w(f.value.value.sections);else if(f.value.kind==="source"){const E=D=>{b||(D instanceof ul&&mr(D.value)===Wo?w(D.value.sections):D instanceof ha?w(D.sections):D.eachChild(E))},I=f.value;I._styleExpression&&E(I._styleExpression.expression)}return b}getProgramConfiguration(o){return new tf(this,o)}}var N9={paint:new Me({"background-color":new le(Mt.paint_background["background-color"]),"background-pattern":new le(Mt.paint_background["background-pattern"]),"background-opacity":new le(Mt.paint_background["background-opacity"])})},U9={paint:new Me({"raster-opacity":new le(Mt.paint_raster["raster-opacity"]),"raster-hue-rotate":new le(Mt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new le(Mt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new le(Mt.paint_raster["raster-brightness-max"]),"raster-saturation":new le(Mt.paint_raster["raster-saturation"]),"raster-contrast":new le(Mt.paint_raster["raster-contrast"]),"raster-resampling":new le(Mt.paint_raster["raster-resampling"]),"raster-fade-duration":new le(Mt.paint_raster["raster-fade-duration"])})};class $9 extends Xc{constructor(o){super(o,{}),this.implementation=o}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}isLayerDraped(){return this.implementation.renderToTile!==void 0}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(o){this.implementation.onAdd&&this.implementation.onAdd(o,o.painter.context.gl)}onRemove(o){this.implementation.onRemove&&this.implementation.onRemove(o,o.painter.context.gl)}}var j9={paint:new Me({"sky-type":new le(Mt.paint_sky["sky-type"]),"sky-atmosphere-sun":new le(Mt.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new le(Mt.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new le(Mt.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new le(Mt.paint_sky["sky-gradient-radius"]),"sky-gradient":new Ie(Mt.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new le(Mt.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new le(Mt.paint_sky["sky-atmosphere-color"]),"sky-opacity":new le(Mt.paint_sky["sky-opacity"])})};function WS(c,o,d){const f=[0,0,1],g=bM([]);return wM(g,g,d?-ne(c)+Math.PI:ne(c)),xM(g,g,-ne(o)),gM(f,f,g),ya(f,f)}const W9={circle:class extends Xc{constructor(c){super(c,tW)}createBucket(c){return new gS(c)}queryRadius(c){const o=c;return Bg("circle-radius",this,o)+Bg("circle-stroke-width",this,o)+W0(this.paint.get("circle-translate"))}queryIntersectsFeature(c,o,d,f,g,b,w,E){const I=WM(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),b.angle,c.pixelToTileUnitsFactor),D=this.paint.get("circle-radius").evaluate(o,d)+this.paint.get("circle-stroke-width").evaluate(o,d);return HM(c,f,b,w,E,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",I,D)}getProgramIds(){return["circle"]}getProgramConfiguration(c){return new tf(this,c)}},heatmap:class extends Xc{createBucket(c){return new qM(c)}constructor(c){super(c,sW),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(c){c==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=bS({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(c){return Bg("heatmap-radius",this,c)}queryIntersectsFeature(c,o,d,f,g,b,w,E){const I=this.paint.get("heatmap-radius").evaluate(o,d);return HM(c,f,b,w,E,!0,!0,new W(0,0),I)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(c){return new tf(this,c)}},hillshade:class extends Xc{constructor(c){super(c,oW)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends Xc{constructor(c){super(c,wW)}getProgramIds(){const c=this.paint.get("fill-pattern"),o=c&&c.constantOr(1),d=[o?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&d.push(o&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),d}getProgramConfiguration(c){return new tf(this,c)}recalculate(c,o){super.recalculate(c,o);const d=this.paint._values["fill-outline-color"];d.value.kind==="constant"&&d.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(c){return new X0(c)}queryRadius(){return W0(this.paint.get("fill-translate"))}queryIntersectsFeature(c,o,d,f,g,b){return!c.queryGeometry.isAboveHorizon&&zM(jM(c.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),b.angle,c.pixelToTileUnitsFactor),f)}isTileClipped(){return!0}},"fill-extrusion":class extends Xc{constructor(c){super(c,FW)}createBucket(c){return new qv(c)}queryRadius(){return W0(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(c){return new tf(this,c)}queryIntersectsFeature(c,o,d,f,g,b,w,E,I){const D=WM(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),b.angle,c.pixelToTileUnitsFactor),z=this.paint.get("fill-extrusion-height").evaluate(o,d),j=this.paint.get("fill-extrusion-base").evaluate(o,d),K=[0,0],ie=E&&b.elevation,oe=b.elevation?b.elevation.exaggeration():1,de=c.tile.getBucket(this);if(ie&&de instanceof qv){const Ne=de.centroidVertexArray,Je=I+1;Je<Ne.length&&(K[0]=Ne.geta_centroid_pos0(Je),K[1]=Ne.geta_centroid_pos1(Je))}if(K[0]===0&&K[1]===1)return!1;b.projection.name==="globe"&&(f=dD([f],[new W(0,0),new W(Bn,Bn)],c.tileID.canonical).map((Ne=>Ne.polygon)).flat());const xe=ie?E:null,[De,He]=(function(Ne,Je,Ye,yt,_t,Ot,Jt,St,zt,Nt,Kt){return Ne.projection.name==="globe"?(function(nn,Lt,fn,Sn,gn,ii,rn,Vn,ri,Ai,si){const zn=[],xr=[],ai=nn.projection.upVectorScale(si,nn.center.lat,nn.worldSize).metersToTile,li=[0,0,0,1],or=[0,0,0,1],gr=(ar,Or,Kr,hs)=>{ar[0]=Or,ar[1]=Kr,ar[2]=hs,ar[3]=1},_r=uD();fn>0&&(fn+=_r),Sn+=_r;for(const ar of Lt){const Or=[],Kr=[];for(const hs of ar){const lr=hs.x+gn.x,Is=hs.y+gn.y,fs=nn.projection.projectTilePoint(lr,Is,si),jr=nn.projection.upVector(si,hs.x,hs.y);let Di=fn,ms=Sn;if(rn){const vr=pD(lr,Is,fn,Sn,rn,Vn,ri,Ai);Di+=vr.base,ms+=vr.top}fn!==0?gr(li,fs.x+jr[0]*ai*Di,fs.y+jr[1]*ai*Di,fs.z+jr[2]*ai*Di):gr(li,fs.x,fs.y,fs.z),gr(or,fs.x+jr[0]*ai*ms,fs.y+jr[1]*ai*ms,fs.z+jr[2]*ai*ms),rs(li,li,ii),rs(or,or,ii),Or.push(new Ng(li[0],li[1],li[2])),Kr.push(new Ng(or[0],or[1],or[2]))}zn.push(Or),xr.push(Kr)}return[zn,xr]})(Ne,Je,Ye,yt,_t,Ot,Jt,St,zt,Nt,Kt):Jt?(function(nn,Lt,fn,Sn,gn,ii,rn,Vn,ri){const Ai=[],si=[],zn=[0,0,0,1];for(const xr of nn){const ai=[],li=[];for(const or of xr){const gr=or.x+Sn.x,_r=or.y+Sn.y,ar=pD(gr,_r,Lt,fn,ii,rn,Vn,ri);zn[0]=gr,zn[1]=_r,zn[2]=ar.base,zn[3]=1,Fm(zn,zn,gn),zn[3]=Math.max(zn[3],1e-5);const Or=new Ng(zn[0]/zn[3],zn[1]/zn[3],zn[2]/zn[3]);zn[0]=gr,zn[1]=_r,zn[2]=ar.top,zn[3]=1,Fm(zn,zn,gn),zn[3]=Math.max(zn[3],1e-5);const Kr=new Ng(zn[0]/zn[3],zn[1]/zn[3],zn[2]/zn[3]);ai.push(Or),li.push(Kr)}Ai.push(ai),si.push(li)}return[Ai,si]})(Je,Ye,yt,_t,Ot,Jt,St,zt,Nt):(function(nn,Lt,fn,Sn,gn){const ii=[],rn=[],Vn=gn[8]*Lt,ri=gn[9]*Lt,Ai=gn[10]*Lt,si=gn[11]*Lt,zn=gn[8]*fn,xr=gn[9]*fn,ai=gn[10]*fn,li=gn[11]*fn;for(const or of nn){const gr=[],_r=[];for(const ar of or){const Or=ar.x+Sn.x,Kr=ar.y+Sn.y,hs=gn[0]*Or+gn[4]*Kr+gn[12],lr=gn[1]*Or+gn[5]*Kr+gn[13],Is=gn[2]*Or+gn[6]*Kr+gn[14],fs=gn[3]*Or+gn[7]*Kr+gn[15],jr=hs+Vn,Di=lr+ri,ms=Is+Ai,vr=Math.max(fs+si,1e-5),wa=hs+zn,ps=lr+xr,co=Is+ai,Zs=Math.max(fs+li,1e-5);gr.push(new Ng(jr/vr,Di/vr,ms/vr)),_r.push(new Ng(wa/Zs,ps/Zs,co/Zs))}ii.push(gr),rn.push(_r)}return[ii,rn]})(Je,Ye,yt,_t,Ot)})(b,f,j,z,D,w,xe,K,oe,b.center.lat,c.tileID.canonical),Re=c.queryGeometry;return(function(Ne,Je,Ye){let yt=1/0;zM(Ye,Je)&&(yt=mD(Ye,Je[0]));for(let _t=0;_t<Je.length;_t++){const Ot=Je[_t],Jt=Ne[_t];for(let St=0;St<Ot.length-1;St++){const zt=Ot[St],Nt=[zt,Ot[St+1],Jt[St+1],Jt[St],zt];FM(Ye,Nt)&&(yt=Math.min(yt,mD(Ye,Nt)))}}return yt!==1/0&&yt})(De,He,Re.isPointQuery()?Re.screenBounds:Re.screenGeometry)}},line:class extends Xc{constructor(c){super(c,gD),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(c){if(c==="line-gradient"){const o=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=o._styleExpression&&o._styleExpression.expression instanceof ir,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(c,o){super.recalculate(c,o),this.paint._values["line-floorwidth"]=_D.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,c)}createBucket(c){return new ex(c)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(c){return new tf(this,c)}queryRadius(c){const o=c,d=vD(Bg("line-width",this,o),Bg("line-gap-width",this,o)),f=Bg("line-offset",this,o);return d/2+Math.abs(f)+W0(this.paint.get("line-translate"))}queryIntersectsFeature(c,o,d,f,g,b){if(c.queryGeometry.isAboveHorizon)return!1;const w=jM(c.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),b.angle,c.pixelToTileUnitsFactor),E=c.pixelToTileUnitsFactor/2*vD(this.paint.get("line-width").evaluate(o,d),this.paint.get("line-gap-width").evaluate(o,d)),I=this.paint.get("line-offset").evaluate(o,d);return I&&(f=(function(D,z){const j=[],K=new W(0,0);for(let ie=0;ie<D.length;ie++){const oe=D[ie],de=[];for(let xe=0;xe<oe.length;xe++){const De=oe[xe],He=oe[xe+1],Re=xe===0?K:De.sub(oe[xe-1])._unit()._perp(),Ne=xe===oe.length-1?K:He.sub(De)._unit()._perp(),Je=Re._add(Ne)._unit();Je._mult(1/(Je.x*Ne.x+Je.y*Ne.y)),de.push(Je._mult(z)._add(De))}j.push(de)}return j})(f,I*c.pixelToTileUnitsFactor)),(function(D,z,j){for(let K=0;K<z.length;K++){const ie=z[K];if(D.length>=3){for(let oe=0;oe<ie.length;oe++)if($m(D,ie[oe]))return!0}if(Y8(D,ie,j))return!0}return!1})(w,f,E)}isTileClipped(){return!0}},symbol:mx,background:class extends Xc{constructor(c){super(c,N9)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends Xc{constructor(c){super(c,U9)}getProgramIds(){return["raster"]}},sky:class extends Xc{constructor(c){super(c,j9),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(c){c==="sky-gradient"?this._updateColorRamp():c!=="sky-atmosphere-sun"&&c!=="sky-atmosphere-halo-color"&&c!=="sky-atmosphere-color"&&c!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=bS({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(c){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const o=c.style.light.properties.get("position");return this._lightPosition.azimuthal!==o.azimuthal||this._lightPosition.polar!==o.polar}return!1}getCenter(c,o){if(this.paint.get("sky-type")==="atmosphere"){const f=this.paint.get("sky-atmosphere-sun"),g=!f,b=c.style.light,w=b.properties.get("position");return g&&b.properties.get("anchor")==="viewport"&&dt("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),g?WS(w.azimuthal,90-w.polar,o):WS(f[0],90-f[1],o)}const d=this.paint.get("sky-gradient-center");return WS(d[0],90-d[1],o)}is3D(){return!1}isSky(){return!0}markSkyboxValid(c){this._skyboxInvalidated=!1,this._lightPosition=c.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const c=this.paint.get("sky-type");return c==="atmosphere"?["skyboxCapture","skybox"]:c==="gradient"?["skyboxGradient"]:null}}};class ry{constructor(o,d,f,g){this.context=o,this.format=f,this.texture=o.gl.createTexture(),this.update(d,g)}update(o,d,f){const{width:g,height:b}=o,{context:w}=this,{gl:E}=w,{HTMLImageElement:I,HTMLCanvasElement:D,HTMLVideoElement:z,ImageData:j,ImageBitmap:K}=p;if(E.bindTexture(E.TEXTURE_2D,this.texture),w.pixelStoreUnpackFlipY.set(!1),w.pixelStoreUnpack.set(1),w.pixelStoreUnpackPremultiplyAlpha.set(this.format===E.RGBA&&(!d||d.premultiply!==!1)),f||this.size&&this.size[0]===g&&this.size[1]===b){const{x:ie,y:oe}=f||{x:0,y:0};o instanceof I||o instanceof D||o instanceof z||o instanceof j||K&&o instanceof K?E.texSubImage2D(E.TEXTURE_2D,0,ie,oe,E.RGBA,E.UNSIGNED_BYTE,o):E.texSubImage2D(E.TEXTURE_2D,0,ie,oe,g,b,E.RGBA,E.UNSIGNED_BYTE,o.data)}else this.size=[g,b],o instanceof I||o instanceof D||o instanceof z||o instanceof j||K&&o instanceof K?E.texImage2D(E.TEXTURE_2D,0,this.format,this.format,E.UNSIGNED_BYTE,o):E.texImage2D(E.TEXTURE_2D,0,this.format,g,b,0,this.format,E.UNSIGNED_BYTE,o.data);this.useMipmap=!!(d&&d.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&E.generateMipmap(E.TEXTURE_2D)}bind(o,d){const{context:f}=this,{gl:g}=f;g.bindTexture(g.TEXTURE_2D,this.texture),o!==this.filter&&(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,o),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,this.useMipmap?o===g.NEAREST?g.NEAREST_MIPMAP_NEAREST:g.LINEAR_MIPMAP_NEAREST:o),this.filter=o),d!==this.wrap&&(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,d),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,d),this.wrap=d)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:o}=this.context;o.deleteTexture(this.texture),this.texture=null}}class H9{constructor(o){this._callback=o,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._callback()}),0))}remove(){this._channel=void 0,this._callback=()=>{}}}class G9{constructor(){this.tasks={},this.taskQueue=[],yn(["process"],this),this.invoker=new H9(this.process),this.nextId=0}add(o,d){const f=this.nextId++,g=(function({type:b,isSymbolTile:w,zoom:E}){return E=E||0,b==="message"?0:b!=="maybePrepare"||w?b!=="parseTile"||w?b==="parseTile"&&w?300-E:b==="maybePrepare"&&w?400-E:500:200-E:100-E})(d);if(g===0){Dt();try{o()}finally{}return{cancel:()=>{}}}return this.tasks[f]={fn:o,metadata:d,priority:g,id:f},this.taskQueue.push(f),this.invoker.trigger(),{cancel:()=>{delete this.tasks[f]}}}process(){Dt();try{if(this.taskQueue=this.taskQueue.filter((f=>!!this.tasks[f])),!this.taskQueue.length)return;const o=this.pick();if(o===null)return;const d=this.tasks[o];if(delete this.tasks[o],this.taskQueue.length&&this.invoker.trigger(),!d)return;d.fn()}finally{}}pick(){let o=null,d=1/0;for(let g=0;g<this.taskQueue.length;g++){const b=this.tasks[this.taskQueue[g]];b.priority<d&&(d=b.priority,o=g)}if(o===null)return null;const f=this.taskQueue[o];return this.taskQueue.splice(o,1),f}remove(){this.invoker.remove()}}class nR{constructor(o){this._stringToNumber={},this._numberToString=[];for(let d=0;d<o.length;d++){const f=o[d];this._stringToNumber[f]=d,this._numberToString[d]=f}}encode(o){return this._stringToNumber[o]}decode(o){return this._numberToString[o]}}const q9=["tile","layer","source","sourceLayer","state"];class iR{constructor(o,d,f,g,b){this.type="Feature",this._vectorTileFeature=o,this._z=d,this._x=f,this._y=g,this.properties=o.properties,this.id=b}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(o){this._geometry=o}toJSON(){const o={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};this.id!==void 0&&(o.id=this.id);for(const d of q9)this[d]!==void 0&&(o[d]=this[d]);return o}}const Tc=32,Pu=33,lf=new Uint16Array(8184);for(let c=0;c<2046;c++){let o=c+2,d=0,f=0,g=0,b=0,w=0,E=0;for(1&o?g=b=w=Tc:d=f=E=Tc;(o>>=1)>1;){const D=d+g>>1,z=f+b>>1;1&o?(g=d,b=f,d=w,f=E):(d=g,f=b,g=w,b=E),w=D,E=z}const I=4*c;lf[I+0]=d,lf[I+1]=f,lf[I+2]=g,lf[I+3]=b}const Mu=new Uint16Array(2178),cf=new Uint8Array(1089),px=new Uint16Array(1089);function rR(c){return c===0?-.03125:c===32?.03125:0}var sR=it([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const oR={type:2,extent:Bn,loadGeometry:()=>[[new W(0,0),new W(Bn+1,0),new W(Bn+1,Bn+1),new W(0,Bn+1),new W(0,0)]]};class HS{constructor(o,d,f,g,b){this.tileID=o,this.uid=rt(),this.uses=0,this.tileSize=d,this.tileZoom=f,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=b,this.expiredRequestCount=0,this.state="loading",g&&g.transform&&(this.projection=g.transform.projection)}registerFadeDuration(o){const d=o+this.timeAdded;d<To.now()||this.fadeEndTime&&d<this.fadeEndTime||(this.fadeEndTime=d)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=Wm(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(o,d,f){if(this.unloadVectorData(),this.state="loaded",o){o.featureIndex&&(this.latestFeatureIndex=o.featureIndex,o.rawTileData?(this.latestRawTileData=o.rawTileData,this.latestFeatureIndex.rawTileData=o.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=o.collisionBoxArray,this.buckets=(function(g,b){const w={};if(!b)return w;for(const E of g){const I=E.layerIds.map((D=>b.getLayer(D))).filter(Boolean);if(I.length!==0){E.layers=I,E.stateDependentLayerIds&&(E.stateDependentLayers=E.stateDependentLayerIds.map((D=>I.filter((z=>z.id===D))[0])));for(const D of I)w[D.id]=E}}return w})(o.buckets,d.style),this.hasSymbolBuckets=!1;for(const g in this.buckets){const b=this.buckets[g];if(b instanceof af){if(this.hasSymbolBuckets=!0,!f)break;b.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const g in this.buckets){const b=this.buckets[g];if(b instanceof af&&b.hasRTLText){this.hasRTLText=!0,O.isLoading()||O.isLoaded()||C()!=="deferred"||R();break}}this.queryPadding=0;for(const g in this.buckets){const b=this.buckets[g];this.queryPadding=Math.max(this.queryPadding,d.style.getLayer(g).queryRadius(b))}o.imageAtlas&&(this.imageAtlas=o.imageAtlas),o.glyphAtlasImage&&(this.glyphAtlasImage=o.glyphAtlasImage),o.lineAtlas&&(this.lineAtlas=o.lineAtlas)}else this.collisionBoxArray=new ji}unloadVectorData(){if(this.hasData()){for(const o in this.buckets)this.buckets[o].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(o){return this.buckets[o.id]}upload(o){for(const f in this.buckets){const g=this.buckets[f];g.uploadPending()&&g.upload(o)}const d=o.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new ry(o,this.imageAtlas.image,d.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new ry(o,this.glyphAtlasImage,d.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new ry(o,this.lineAtlas.image,d.ALPHA),this.lineAtlas.uploaded=!0)}prepare(o){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(o,this.imageAtlasTexture)}queryRenderedFeatures(o,d,f,g,b,w,E,I){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:g,pixelPosMatrix:E,transform:w,params:b,tileTransform:this.tileTransform},o,d,f):{}}querySourceFeatures(o,d){const f=this.latestFeatureIndex;if(!f||!f.rawTileData)return;const g=f.loadVTLayers(),b=d?d.sourceLayer:"",w=g._geojsonTileLayer||g[b];if(!w)return;const E=Xh(d&&d.filter),{z:I,x:D,y:z}=this.tileID.canonical,j={z:I,x:D,y:z};for(let K=0;K<w.length;K++){const ie=w.feature(K);if(E.needGeometry){const xe=Um(ie,!0);if(!E.filter(new U(this.tileID.overscaledZ),xe,this.tileID.canonical))continue}else if(!E.filter(new U(this.tileID.overscaledZ),ie))continue;const oe=f.getId(ie,b),de=new iR(ie,I,D,z,oe);de.tile=j,o.push(de)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(o){const d=this.expirationTime;if(o.cacheControl){const f=Ft(o.cacheControl);f["max-age"]&&(this.expirationTime=Date.now()+1e3*f["max-age"])}else o.expires&&(this.expirationTime=new Date(o.expires).getTime());if(this.expirationTime){const f=Date.now();let g=!1;if(this.expirationTime>f)g=!1;else if(d)if(this.expirationTime<d)g=!0;else{const b=this.expirationTime-d;b?this.expirationTime=f+Math.max(b,3e4):g=!0}else g=!0;g?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(o,d){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(o).length===0||!d)return;const f=this.latestFeatureIndex.loadVTLayers(),g=d.style.listImages();for(const b in this.buckets){if(!d.style.hasLayer(b))continue;const w=this.buckets[b],E=w.layers[0].sourceLayer||"_geojsonTileLayer",I=f[E],D=o[E];if(!I||!D||Object.keys(D).length===0)continue;if(w.update(D,I,g,this.imageAtlas&&this.imageAtlas.patternPositions||{}),w instanceof ex||w instanceof X0){const j=d.style._getSourceCache(w.layers[0].source);d._terrain&&d._terrain.enabled&&j&&w.programConfigurations.needsUpload&&d._terrain._clearRenderCacheForTile(j.id,this.tileID)}const z=d&&d.style&&d.style.getLayer(b);z&&(this.queryPadding=Math.max(this.queryPadding,z.queryRadius(w)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<To.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(o){this.symbolFadeHoldUntil=To.now()+o}setTexture(o,d){const f=d.context,g=f.gl;this.texture=this.texture||d.getTileTexture(o.width),this.texture?this.texture.update(o,{useMipmap:!0}):(this.texture=new ry(f,o,g.RGBA,{useMipmap:!0}),this.texture.bind(g.LINEAR,g.CLAMP_TO_EDGE))}setDependencies(o,d){const f={};for(const g of d)f[g]=!0;this.dependencies[o]=f}hasDependency(o,d){for(const f of o){const g=this.dependencies[f];if(g){for(const b of d)if(g[b])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(o,d){if(!d||d.name==="mercator"||this._tileDebugBuffer)return;const f=Fd(oR,this.tileID.canonical,this.tileTransform)[0],g=new $t,b=new va;for(let w=0;w<f.length;w++){const{x:E,y:I}=f[w];g.emplaceBack(E,I),b.emplaceBack(w)}b.emplaceBack(0),this._tileDebugIndexBuffer=o.createIndexBuffer(b),this._tileDebugBuffer=o.createVertexBuffer(g,Vv.members),this._tileDebugSegments=us.simpleSegment(0,0,g.length,b.length)}_makeTileBoundsBuffers(o,d){if(this._tileBoundsBuffer||!d||d.name==="mercator")return;const f=Fd(oR,this.tileID.canonical,this.tileTransform)[0];let g,b;if(this.isRaster){const w=(function(E,I){const D=Wm(E,I),z=Math.pow(2,E.z);for(let xe=0;xe<Pu;xe++)for(let De=0;De<Pu;De++){const He=Wl((E.x+(De+rR(De))/Tc)/z),Re=Mo((E.y+(xe+rR(xe))/Tc)/z),Ne=I.project(He,Re),Je=xe*Pu+De;Mu[2*Je+0]=Math.round((Ne.x*D.scale-D.x)*Bn),Mu[2*Je+1]=Math.round((Ne.y*D.scale-D.y)*Bn)}cf.fill(0),px.fill(0);for(let xe=2045;xe>=0;xe--){const De=4*xe,He=lf[De+0],Re=lf[De+1],Ne=lf[De+2],Je=lf[De+3],Ye=He+Ne>>1,yt=Re+Je>>1,_t=Ye+yt-Re,Ot=yt+He-Ye,Jt=Re*Pu+He,St=Je*Pu+Ne,zt=yt*Pu+Ye,Nt=Math.hypot((Mu[2*Jt+0]+Mu[2*St+0])/2-Mu[2*zt+0],(Mu[2*Jt+1]+Mu[2*St+1])/2-Mu[2*zt+1])>=16;cf[zt]=cf[zt]||(Nt?1:0),xe<1022&&(cf[zt]=cf[zt]||cf[(Re+Ot>>1)*Pu+(He+_t>>1)]||cf[(Je+Ot>>1)*Pu+(Ne+_t>>1)])}const j=new Rt,K=new kn;let ie=0;function oe(xe,De){const He=De*Pu+xe;return px[He]===0&&(j.emplaceBack(Mu[2*He+0],Mu[2*He+1],xe*Bn/Tc,De*Bn/Tc),px[He]=++ie),px[He]-1}function de(xe,De,He,Re,Ne,Je){const Ye=xe+He>>1,yt=De+Re>>1;if(Math.abs(xe-Ne)+Math.abs(De-Je)>1&&cf[yt*Pu+Ye])de(Ne,Je,xe,De,Ye,yt),de(He,Re,Ne,Je,Ye,yt);else{const _t=oe(xe,De),Ot=oe(He,Re),Jt=oe(Ne,Je);K.emplaceBack(_t,Ot,Jt)}}return de(0,0,Tc,Tc,Tc,0),de(Tc,Tc,0,0,0,Tc),{vertices:j,indices:K}})(this.tileID.canonical,d);g=w.vertices,b=w.indices}else{g=new Rt,b=new kn;for(const{x:E,y:I}of f)g.emplaceBack(E,I,0,0);const w=ES(g.int16,void 0,4);for(let E=0;E<w.length;E+=3)b.emplaceBack(w[E],w[E+1],w[E+2])}this._tileBoundsBuffer=o.createVertexBuffer(g,sR.members),this._tileBoundsIndexBuffer=o.createIndexBuffer(b),this._tileBoundsSegments=us.simpleSegment(0,0,g.length,b.length)}_makeGlobeTileDebugBuffers(o,d){const f=d.projection;if(!f||f.name!=="globe"||d.freezeTileCoverage)return;const g=this.tileID.canonical,b=zv(kM(g,d)),w=Og(d.zoom);let E;w>0&&(E=QT(new Float64Array(16),d.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(o,g,d,b,E,w),this._makeGlobeTileDebugTextBuffer(o,g,d,b,E,w)}_globePoint(o,d,f,g,b,w,E){let I=Fv(o,d,f);if(w){const D=1<<f.z,z=Iu(g.center.lng),j=Au(g.center.lat),K=(f.x+.5)/D-z;let ie=0;K>.5?ie=-1:K<-.5&&(ie=1);let oe=(o/Bn+f.x)/D+ie,de=(d/Bn+f.y)/D;oe=(oe-z)*g._pixelsPerMercatorPixel+z,de=(de-j)*g._pixelsPerMercatorPixel+j;const xe=[oe*g.worldSize,de*g.worldSize,0];rs(xe,xe,w),I=Nm(I,xe,E)}return rs(I,I,b)}_makeGlobeTileDebugBorderBuffer(o,d,f,g,b,w){const E=new $t,I=new va,D=new lt,z=(K,ie,oe,de,xe)=>{const De=(oe-K)/(xe-1),He=(de-ie)/(xe-1),Re=E.length;for(let Ne=0;Ne<xe;Ne++){const Je=K+Ne*De,Ye=ie+Ne*He;E.emplaceBack(Je,Ye);const yt=this._globePoint(Je,Ye,d,f,g,b,w);D.emplaceBack(yt[0],yt[1],yt[2]),I.emplaceBack(Re+Ne)}},j=Bn;z(0,0,j,0,16),z(j,0,j,j,16),z(j,j,0,j,16),z(0,j,0,0,16),this._tileDebugIndexBuffer=o.createIndexBuffer(I),this._tileDebugBuffer=o.createVertexBuffer(E,Vv.members),this._globeTileDebugBorderBuffer=o.createVertexBuffer(D,SM.members),this._tileDebugSegments=us.simpleSegment(0,0,E.length,I.length)}_makeGlobeTileDebugTextBuffer(o,d,f,g,b,w){const E=Bn/4,I=new $t,D=new kn,z=new lt,j=25;D.reserve(32),I.reserve(j),z.reserve(j);const K=(ie,oe)=>j*ie+oe;for(let ie=0;ie<j;ie++){const oe=ie*E;for(let de=0;de<j;de++){const xe=de*E;I.emplaceBack(xe,oe);const De=this._globePoint(xe,oe,d,f,g,b,w);z.emplaceBack(De[0],De[1],De[2])}}for(let ie=0;ie<4;ie++)for(let oe=0;oe<4;oe++){const de=K(ie,oe),xe=K(ie,oe+1),De=K(ie+1,oe),He=K(ie+1,oe+1);D.emplaceBack(de,xe,De),D.emplaceBack(De,xe,He)}this._tileDebugTextIndexBuffer=o.createIndexBuffer(D),this._tileDebugTextBuffer=o.createVertexBuffer(I,Vv.members),this._globeTileDebugTextBuffer=o.createVertexBuffer(z,SM.members),this._tileDebugTextSegments=us.simpleSegment(0,0,j,32)}}class K9{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(o,d,f){const g=String(d);if(this.stateChanges[o]=this.stateChanges[o]||{},this.stateChanges[o][g]=this.stateChanges[o][g]||{},ct(this.stateChanges[o][g],f),this.deletedStates[o]===null){this.deletedStates[o]={};for(const b in this.state[o])b!==g&&(this.deletedStates[o][b]=null)}else if(this.deletedStates[o]&&this.deletedStates[o][g]===null){this.deletedStates[o][g]={};for(const b in this.state[o][g])f[b]||(this.deletedStates[o][g][b]=null)}else for(const b in f)this.deletedStates[o]&&this.deletedStates[o][g]&&this.deletedStates[o][g][b]===null&&delete this.deletedStates[o][g][b]}removeFeatureState(o,d,f){if(this.deletedStates[o]===null)return;const g=String(d);if(this.deletedStates[o]=this.deletedStates[o]||{},f&&d!==void 0)this.deletedStates[o][g]!==null&&(this.deletedStates[o][g]=this.deletedStates[o][g]||{},this.deletedStates[o][g][f]=null);else if(d!==void 0)if(this.stateChanges[o]&&this.stateChanges[o][g])for(f in this.deletedStates[o][g]={},this.stateChanges[o][g])this.deletedStates[o][g][f]=null;else this.deletedStates[o][g]=null;else this.deletedStates[o]=null}getState(o,d){const f=String(d),g=ct({},(this.state[o]||{})[f],(this.stateChanges[o]||{})[f]);if(this.deletedStates[o]===null)return{};if(this.deletedStates[o]){const b=this.deletedStates[o][d];if(b===null)return{};for(const w in b)delete g[w]}return g}initializeTileState(o,d){o.setFeatureState(this.state,d)}coalesceChanges(o,d){const f={};for(const g in this.stateChanges){this.state[g]=this.state[g]||{};const b={};for(const w in this.stateChanges[g])this.state[g][w]||(this.state[g][w]={}),ct(this.state[g][w],this.stateChanges[g][w]),b[w]=this.state[g][w];f[g]=b}for(const g in this.deletedStates){this.state[g]=this.state[g]||{};const b={};if(this.deletedStates[g]===null)for(const w in this.state[g])b[w]={},this.state[g][w]={};else for(const w in this.deletedStates[g]){if(this.deletedStates[g][w]===null)this.state[g][w]={};else if(this.state[g][w])for(const E of Object.keys(this.deletedStates[g][w]))delete this.state[g][w][E];b[w]=this.state[g][w]}f[g]=f[g]||{},ct(f[g],b)}if(this.stateChanges={},this.deletedStates={},Object.keys(f).length!==0)for(const g in o)o[g].setFeatureState(f,d)}}class aR{constructor(o){this.size=o,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(o,d){const f=this.toIdx(o,d);return{min:this.minimums[f],max:this.maximums[f]}}isLeaf(o,d){return this.leaves[this.toIdx(o,d)]}toIdx(o,d){return d*this.size+o}}function lR(c,o,d,f){let g=0,b=Number.MAX_VALUE;for(let w=0;w<3;w++)if(Math.abs(f[w])<1e-15){if(d[w]<c[w]||d[w]>o[w])return null}else{const E=1/f[w];let I=(c[w]-d[w])*E,D=(o[w]-d[w])*E;if(I>D){const z=I;I=D,D=z}if(I>g&&(g=I),D<b&&(b=D),g>b)return null}return g}function cR(c,o,d,f,g,b,w,E,I,D,z){const j=f-c,K=g-o,ie=b-d,oe=w-c,de=E-o,xe=I-d,De=z[1]*xe-z[2]*de,He=z[2]*oe-z[0]*xe,Re=z[0]*de-z[1]*oe,Ne=j*De+K*He+ie*Re;if(Math.abs(Ne)<1e-15)return null;const Je=1/Ne,Ye=D[0]-c,yt=D[1]-o,_t=D[2]-d,Ot=(Ye*De+yt*He+_t*Re)*Je;if(Ot<0||Ot>1)return null;const Jt=yt*ie-_t*K,St=_t*j-Ye*ie,zt=Ye*K-yt*j,Nt=(z[0]*Jt+z[1]*St+z[2]*zt)*Je;return Nt<0||Ot+Nt>1?null:(oe*Jt+de*St+xe*zt)*Je}function uR(c,o,d){return(c-o)/(d-o)}function dR(c,o,d,f,g,b,w,E,I){const D=1<<d,z=b-f,j=w-g,K=(c+1)/D*z+f,ie=(o+0)/D*j+g,oe=(o+1)/D*j+g;E[0]=(c+0)/D*z+f,E[1]=ie,I[0]=K,I[1]=oe}class hR{constructor(o){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=o,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const d=(function(b){const w=Math.ceil(Math.log2(b.dim/8)),E=[];let I=Math.ceil(Math.pow(2,w));const D=1/I,z=(ie,oe,de,xe,De)=>{const He=xe?1:0,Re=(ie+1)*de-He,Ne=oe*de,Je=(oe+1)*de-He;De[0]=ie*de,De[1]=Ne,De[2]=Re,De[3]=Je};let j=new aR(I);const K=[];for(let ie=0;ie<I*I;ie++){z(ie%I,Math.floor(ie/I),D,!1,K);const oe=uf(K[0],K[1],b),de=uf(K[2],K[1],b),xe=uf(K[2],K[3],b),De=uf(K[0],K[3],b);j.minimums.push(Math.min(oe,de,xe,De)),j.maximums.push(Math.max(oe,de,xe,De)),j.leaves.push(1)}for(E.push(j),I/=2;I>=1;I/=2){const ie=E[E.length-1];j=new aR(I);for(let oe=0;oe<I*I;oe++){z(oe%I,Math.floor(oe/I),2,!0,K);const de=ie.getElevation(K[0],K[1]),xe=ie.getElevation(K[2],K[1]),De=ie.getElevation(K[2],K[3]),He=ie.getElevation(K[0],K[3]),Re=ie.isLeaf(K[0],K[1]),Ne=ie.isLeaf(K[2],K[1]),Je=ie.isLeaf(K[2],K[3]),Ye=ie.isLeaf(K[0],K[3]),yt=Math.min(de.min,xe.min,De.min,He.min),_t=Math.max(de.max,xe.max,De.max,He.max),Ot=Re&&Ne&&Je&&Ye;j.maximums.push(_t),j.minimums.push(yt),j.leaves.push(_t-yt<=5&&Ot?1:0)}E.push(j)}return E})(this.dem),f=d.length-1,g=d[f];this._addNode(g.minimums[0],g.maximums[0],g.leaves[0]),this._construct(d,0,0,f,0)}raycastRoot(o,d,f,g,b,w,E=1){return lR([o,d,-100],[f,g,this.maximums[0]*E],b,w)}raycast(o,d,f,g,b,w,E=1){if(!this.nodeCount)return null;const I=this.raycastRoot(o,d,f,g,b,w,E);if(I==null)return null;const D=[],z=[],j=[],K=[],ie=[{idx:0,t:I,nodex:0,nodey:0,depth:0}];for(;ie.length>0;){const{idx:oe,t:de,nodex:xe,nodey:De,depth:He}=ie.pop();if(this.leaves[oe]){dR(xe,De,He,o,d,f,g,j,K);const Ne=1<<He,Je=(xe+0)/Ne,Ye=(xe+1)/Ne,yt=(De+0)/Ne,_t=(De+1)/Ne,Ot=uf(Je,yt,this.dem)*E,Jt=uf(Ye,yt,this.dem)*E,St=uf(Ye,_t,this.dem)*E,zt=uf(Je,_t,this.dem)*E,Nt=cR(j[0],j[1],Ot,K[0],j[1],Jt,K[0],K[1],St,b,w),Kt=cR(K[0],K[1],St,j[0],K[1],zt,j[0],j[1],Ot,b,w),nn=Math.min(Nt!==null?Nt:Number.MAX_VALUE,Kt!==null?Kt:Number.MAX_VALUE);if(nn!==Number.MAX_VALUE)return nn;{const Lt=Lv([],b,w,de);if(fR(Ot,Jt,zt,St,uR(Lt[0],j[0],K[0]),uR(Lt[1],j[1],K[1]))>=Lt[2])return de}continue}let Re=0;for(let Ne=0;Ne<this._siblingOffset.length;Ne++){dR((xe<<1)+this._siblingOffset[Ne][0],(De<<1)+this._siblingOffset[Ne][1],He+1,o,d,f,g,j,K),j[2]=-100,K[2]=this.maximums[this.childOffsets[oe]+Ne]*E;const Je=lR(j,K,b,w);if(Je!=null){const Ye=Je;D[Ne]=Ye;let yt=!1;for(let _t=0;_t<Re&&!yt;_t++)Ye>=D[z[_t]]&&(z.splice(_t,0,Ne),yt=!0);yt||(z[Re]=Ne),Re++}}for(let Ne=0;Ne<Re;Ne++){const Je=z[Ne];ie.push({idx:this.childOffsets[oe]+Je,t:D[Je],nodex:(xe<<1)+this._siblingOffset[Je][0],nodey:(De<<1)+this._siblingOffset[Je][1],depth:He+1})}}return null}_addNode(o,d,f){return this.minimums.push(o),this.maximums.push(d),this.leaves.push(f),this.childOffsets.push(0),this.nodeCount++}_construct(o,d,f,g,b){if(o[g].isLeaf(d,f)===1)return;this.childOffsets[b]||(this.childOffsets[b]=this.nodeCount);const w=g-1,E=o[w];let I=0,D=0;for(let z=0;z<this._siblingOffset.length;z++){const j=2*d+this._siblingOffset[z][0],K=2*f+this._siblingOffset[z][1],ie=E.getElevation(j,K),oe=E.isLeaf(j,K),de=this._addNode(ie.min,ie.max,oe);oe&&(I|=1<<z),D||(D=de)}for(let z=0;z<this._siblingOffset.length;z++)I&1<<z||this._construct(o,2*d+this._siblingOffset[z][0],2*f+this._siblingOffset[z][1],w,D+z)}}function fR(c,o,d,f,g,b){return Yn(Yn(c,d,b),Yn(o,f,b),g)}function uf(c,o,d){const f=d.dim,g=Ae(c*f-.5,0,f-1),b=Ae(o*f-.5,0,f-1),w=Math.floor(g),E=Math.floor(b),I=Math.min(w+1,f-1),D=Math.min(E+1,f-1);return fR(d.get(w,E),d.get(I,E),d.get(w,D),d.get(I,D),g-w,b-E)}const mR={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function X9(c,o,d){return(256*c*256+256*o+d)/10-1e4}function Z9(c,o,d){return 256*c+o+d/256-32768}class gx{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(o,d,f,g=!1,b=!1){if(this.uid=o,d.height!==d.width)throw new RangeError("DEM tiles must be square");if(f&&f!=="mapbox"&&f!=="terrarium")return dt(`"${f}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=d.height;const w=this.dim=d.height-2,E=new Uint32Array(d.data.buffer);if(this.pixels=new Uint8Array(d.data.buffer),this.encoding=f||"mapbox",this.borderReady=g,!g){for(let I=0;I<w;I++)E[this._idx(-1,I)]=E[this._idx(0,I)],E[this._idx(w,I)]=E[this._idx(w-1,I)],E[this._idx(I,-1)]=E[this._idx(I,0)],E[this._idx(I,w)]=E[this._idx(I,w-1)];E[this._idx(-1,-1)]=E[this._idx(0,0)],E[this._idx(w,-1)]=E[this._idx(w-1,0)],E[this._idx(-1,w)]=E[this._idx(0,w-1)],E[this._idx(w,w)]=E[this._idx(w-1,w-1)],b&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new hR(this)}get(o,d,f=!1){f&&(o=Ae(o,-1,this.dim),d=Ae(d,-1,this.dim));const g=4*this._idx(o,d);return(this.encoding==="terrarium"?Z9:X9)(this.pixels[g],this.pixels[g+1],this.pixels[g+2])}static getUnpackVector(o){return mR[o]}get unpackVector(){return mR[this.encoding]}_idx(o,d){if(o<-1||o>=this.dim+1||d<-1||d>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(d+1)*this.stride+(o+1)}static pack(o,d){const f=[0,0,0,0],g=gx.getUnpackVector(d);let b=Math.floor((o+g[3])/g[2]);return f[2]=b%256,b=Math.floor(b/256),f[1]=b%256,b=Math.floor(b/256),f[0]=b,f}getPixels(){return new yl({width:this.stride,height:this.stride},this.pixels)}backfillBorder(o,d,f){if(this.dim!==o.dim)throw new Error("dem dimension mismatch");let g=d*this.dim,b=d*this.dim+this.dim,w=f*this.dim,E=f*this.dim+this.dim;switch(d){case-1:g=b-1;break;case 1:b=g+1}switch(f){case-1:w=E-1;break;case 1:E=w+1}const I=-d*this.dim,D=-f*this.dim;for(let z=w;z<E;z++)for(let j=g;j<b;j++){const K=4*this._idx(j,z),ie=4*this._idx(j+I,z+D);this.pixels[K+0]=o.pixels[ie+0],this.pixels[K+1]=o.pixels[ie+1],this.pixels[K+2]=o.pixels[ie+2],this.pixels[K+3]=o.pixels[ie+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}bn(gx,"DEMData"),bn(hR,"DemMinMaxQuadTree",{omit:["dem"]});class Y9{constructor(o,d){this.max=o,this.onRemove=d,this.reset()}reset(){for(const o in this.data)for(const d of this.data[o])d.timeout&&clearTimeout(d.timeout),this.onRemove(d.value);return this.data={},this.order=[],this}add(o,d,f){const g=o.wrapped().key;this.data[g]===void 0&&(this.data[g]=[]);const b={value:d,timeout:void 0};if(f!==void 0&&(b.timeout=setTimeout((()=>{this.remove(o,b)}),f)),this.data[g].push(b),this.order.push(g),this.order.length>this.max){const w=this._getAndRemoveByKey(this.order[0]);w&&this.onRemove(w)}return this}has(o){return o.wrapped().key in this.data}getAndRemove(o){return this.has(o)?this._getAndRemoveByKey(o.wrapped().key):null}_getAndRemoveByKey(o){const d=this.data[o].shift();return d.timeout&&clearTimeout(d.timeout),this.data[o].length===0&&delete this.data[o],this.order.splice(this.order.indexOf(o),1),d.value}getByKey(o){const d=this.data[o];return d?d[0].value:null}get(o){return this.has(o)?this.data[o.wrapped().key][0].value:null}remove(o,d){if(!this.has(o))return this;const f=o.wrapped().key,g=d===void 0?0:this.data[f].indexOf(d),b=this.data[f][g];return this.data[f].splice(g,1),b.timeout&&clearTimeout(b.timeout),this.data[f].length===0&&delete this.data[f],this.onRemove(b.value),this.order.splice(this.order.indexOf(f),1),this}setMaxSize(o){for(this.max=o;this.order.length>this.max;){const d=this._getAndRemoveByKey(this.order[0]);d&&this.onRemove(d)}return this}filter(o){const d=[];for(const f in this.data)for(const g of this.data[f])o(g.value)||d.push(g);for(const f of d)this.remove(f.value.tileID,f)}}class Zg{constructor(o,d,f){this.func=o,this.mask=d,this.range=f}}Zg.ReadOnly=!1,Zg.ReadWrite=!0,Zg.disabled=new Zg(519,Zg.ReadOnly,[0,1]);const GS=7680;class qS{constructor(o,d,f,g,b,w){this.test=o,this.ref=d,this.mask=f,this.fail=g,this.depthFail=b,this.pass=w}}qS.disabled=new qS({func:519,mask:0},0,0,GS,GS,GS);class Du{constructor(o,d,f){this.blendFunction=o,this.blendColor=d,this.mask=f}}Du.Replace=[1,0],Du.disabled=new Du(Du.Replace,Ni.transparent,[!1,!1,!1,!1]),Du.unblended=new Du(Du.Replace,Ni.transparent,[!0,!0,!0,!0]),Du.alphaBlended=new Du([1,771],Ni.transparent,[!0,!0,!0,!0]);const KS=1029,XS=2305;class tu{constructor(o,d,f){this.enable=o,this.mode=d,this.frontFace=f}}tu.disabled=new tu(!1,KS,XS),tu.backCCW=new tu(!0,KS,XS),tu.backCW=new tu(!0,KS,2304),tu.frontCW=new tu(!0,1028,2304),tu.frontCCW=new tu(!0,1028,XS);class Hm extends Ll{constructor(o,d,f){super(),this.id=o,this._onlySymbols=f,d.on("data",(g=>{g.dataType==="source"&&g.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&g.dataType==="source"&&g.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))})),d.on("error",(()=>{this._sourceErrored=!0})),this._source=d,this._tiles={},this._cache=new Y9(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=d.minTileCacheSize,this._maxTileCacheSize=d.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new K9,this._isRaster=this._source.type==="raster"||this._source.type==="raster-dem"||this._source.type==="custom"&&this._source._dataType==="raster"}onAdd(o){this.map=o,this._minTileCacheSize=this._minTileCacheSize===void 0&&o?o._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=this._maxTileCacheSize===void 0&&o?o._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const o in this._tiles){const d=this._tiles[o];if(d.state!=="loaded"&&d.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const o=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,o&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(o,d){return o.isSymbolTile=this._onlySymbols,this._source.loadTile(o,d)}_unloadTile(o){if(this._source.unloadTile)return this._source.unloadTile(o,(()=>{}))}_abortTile(o){if(this._source.abortTile)return this._source.abortTile(o,(()=>{}))}serialize(){return this._source.serialize()}prepare(o){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const d in this._tiles){const f=this._tiles[d];f.upload(o),f.prepare(this.map.style.imageManager)}}getIds(){return We(this._tiles).map((o=>o.tileID)).sort(pR).map((o=>o.key))}getRenderableIds(o){const d=[];for(const f in this._tiles)this._isIdRenderable(+f,o)&&d.push(this._tiles[f]);return o?d.sort(((f,g)=>{const b=f.tileID,w=g.tileID,E=new W(b.canonical.x,b.canonical.y)._rotate(this.transform.angle),I=new W(w.canonical.x,w.canonical.y)._rotate(this.transform.angle);return b.overscaledZ-w.overscaledZ||I.y-E.y||I.x-E.x})).map((f=>f.tileID.key)):d.map((f=>f.tileID)).sort(pR).map((f=>f.key))}hasRenderableParent(o){const d=this.findLoadedParent(o,0);return!!d&&this._isIdRenderable(d.tileID.key)}_isIdRenderable(o,d){return this._tiles[o]&&this._tiles[o].hasData()&&!this._coveredTiles[o]&&(d||!this._tiles[o].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const o in this._tiles)this._tiles[o].state!=="errored"&&this._reloadTile(+o,"reloading")}}_reloadTile(o,d){const f=this._tiles[o];f&&(f.state!=="loading"&&(f.state=d),this._loadTile(f,this._tileLoaded.bind(this,f,o,d)))}_tileLoaded(o,d,f,g){if(g)if(o.state="errored",g.status!==404)this._source.fire(new So(g,{tile:o}));else if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){const b=this.map.painter.terrain;this.update(this.transform,b.getScaledDemTileSize(),!0),b.resetTileLookupCache(this.id)}else this.update(this.transform);else o.timeAdded=To.now(),f==="expired"&&(o.refreshedUponExpiration=!0),this._setTileReloadTimer(d,o),this._source.type==="raster-dem"&&o.dem&&this._backfillDEM(o),this._state.initializeTileState(o,this.map?this.map.painter:null),this._source.fire(new jo("data",{dataType:"source",tile:o,coord:o.tileID,sourceCacheId:this.id}))}_backfillDEM(o){const d=this.getRenderableIds();for(let g=0;g<d.length;g++){const b=d[g];if(o.neighboringTiles&&o.neighboringTiles[b]){const w=this.getTileByID(b);f(o,w),f(w,o)}}function f(g,b){if(!g.dem||g.dem.borderReady)return;g.needsHillshadePrepare=!0,g.needsDEMTextureUpload=!0;let w=b.tileID.canonical.x-g.tileID.canonical.x;const E=b.tileID.canonical.y-g.tileID.canonical.y,I=Math.pow(2,g.tileID.canonical.z),D=b.tileID.key;w===0&&E===0||Math.abs(E)>1||(Math.abs(w)>1&&(Math.abs(w+I)===1?w+=I:Math.abs(w-I)===1&&(w-=I)),b.dem&&g.dem&&(g.dem.backfillBorder(b.dem,w,E),g.neighboringTiles&&g.neighboringTiles[D]&&(g.neighboringTiles[D].backfilled=!0)))}}getTile(o){return this.getTileByID(o.key)}getTileByID(o){return this._tiles[o]}_retainLoadedChildren(o,d,f,g){for(const b in this._tiles){let w=this._tiles[b];if(g[b]||!w.hasData()||w.tileID.overscaledZ<=d||w.tileID.overscaledZ>f)continue;let E=w.tileID;for(;w&&w.tileID.overscaledZ>d+1;){const D=w.tileID.scaledTo(w.tileID.overscaledZ-1);w=this._tiles[D.key],w&&w.hasData()&&(E=D)}let I=E;for(;I.overscaledZ>d;)if(I=I.scaledTo(I.overscaledZ-1),o[I.key]){g[E.key]=E;break}}}findLoadedParent(o,d){if(o.key in this._loadedParentTiles){const f=this._loadedParentTiles[o.key];return f&&f.tileID.overscaledZ>=d?f:null}for(let f=o.overscaledZ-1;f>=d;f--){const g=o.scaledTo(f),b=this._getLoadedTile(g);if(b)return b}}_getLoadedTile(o){const d=this._tiles[o.key];return d&&d.hasData()?d:this._cache.getByKey(this._source.reparseOverscaled?o.wrapped().key:o.canonical.key)}updateCacheSize(o,d){d=d||this._source.tileSize;const f=Math.ceil(o.width/d)+1,g=Math.ceil(o.height/d)+1,b=Math.floor(f*g*5),w=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,b):b,E=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,w):w;this._cache.setMaxSize(E)}handleWrapJump(o){const d=Math.round((o-(this._prevLng===void 0?o:this._prevLng))/360);if(this._prevLng=o,d){const f={};for(const g in this._tiles){const b=this._tiles[g];b.tileID=b.tileID.unwrapTo(b.tileID.wrap+d),f[b.tileID.key]=b}this._tiles=f;for(const g in this._timers)clearTimeout(this._timers[g]),delete this._timers[g];for(const g in this._tiles)this._setTileReloadTimer(+g,this._tiles[g])}}update(o,d,f){if(this.transform=o,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!f)return;let g;this.updateCacheSize(o,d),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?g=o.getVisibleUnwrappedCoordinates(this._source.tileID).map((E=>new xa(E.canonical.z,E.wrap,E.canonical.z,E.canonical.x,E.canonical.y))):(g=o.coveringTiles({tileSize:d||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!f,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(g=g.filter((E=>this._source.hasTile(E))))):g=[];const b=this._updateRetainedTiles(g);if(gR(this._source.type)&&g.length!==0){const E={},I={},D=Object.keys(b);for(const j of D){const K=b[j],ie=this._tiles[j];if(!ie||ie.fadeEndTime&&ie.fadeEndTime<=To.now())continue;const oe=this.findLoadedParent(K,Math.max(K.overscaledZ-Hm.maxOverzooming,this._source.minzoom));oe&&(this._addTile(oe.tileID),E[oe.tileID.key]=oe.tileID),I[j]=K}const z=g[g.length-1].overscaledZ;for(const j in this._tiles){const K=this._tiles[j];if(b[j]||!K.hasData())continue;let ie=K.tileID;for(;ie.overscaledZ>z;){ie=ie.scaledTo(ie.overscaledZ-1);const oe=this._tiles[ie.key];if(oe&&oe.hasData()&&I[ie.key]){b[j]=K.tileID;break}}}for(const j in E)b[j]||(this._coveredTiles[j]=!0,b[j]=E[j])}for(const E in b)this._tiles[E].clearFadeHold();const w=(function(E,I){const D=[];for(const z in E)z in I||D.push(z);return D})(this._tiles,b);for(const E of w){const I=this._tiles[E];I.hasSymbolBuckets&&!I.holdingForFade()?I.setHoldDuration(this.map._fadeDuration):I.hasSymbolBuckets&&!I.symbolFadeFinished()||this._removeTile(+E)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const o in this._tiles)this._tiles[o].holdingForFade()&&this._removeTile(+o)}_updateRetainedTiles(o){const d={};if(o.length===0)return d;const f={},g=o.reduce(((D,z)=>Math.min(D,z.overscaledZ)),1/0),b=o[0].overscaledZ,w=Math.max(b-Hm.maxOverzooming,this._source.minzoom),E=Math.max(b+Hm.maxUnderzooming,this._source.minzoom),I={};for(const D of o){const z=this._addTile(D);d[D.key]=D,z.hasData()||g<this._source.maxzoom&&(I[D.key]=D)}this._retainLoadedChildren(I,g,E,d);for(const D of o){let z=this._tiles[D.key];if(z.hasData())continue;if(D.canonical.z>=this._source.maxzoom){const K=D.children(this._source.maxzoom)[0],ie=this.getTile(K);if(ie&&ie.hasData()){d[K.key]=K;continue}}else{const K=D.children(this._source.maxzoom);if(d[K[0].key]&&d[K[1].key]&&d[K[2].key]&&d[K[3].key])continue}let j=z.wasRequested();for(let K=D.overscaledZ-1;K>=w;--K){const ie=D.scaledTo(K);if(f[ie.key]||(f[ie.key]=!0,z=this.getTile(ie),!z&&j&&(z=this._addTile(ie)),z&&(d[ie.key]=ie,j=z.wasRequested(),z.hasData())))break}}return d}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const o in this._tiles){const d=[];let f,g=this._tiles[o].tileID;for(;g.overscaledZ>0;){if(g.key in this._loadedParentTiles){f=this._loadedParentTiles[g.key];break}d.push(g.key);const b=g.scaledTo(g.overscaledZ-1);if(f=this._getLoadedTile(b),f)break;g=b}for(const b of d)this._loadedParentTiles[b]=f}}_addTile(o){let d=this._tiles[o.key];if(d)return d;d=this._cache.getAndRemove(o),d&&(this._setTileReloadTimer(o.key,d),d.tileID=o,this._state.initializeTileState(d,this.map?this.map.painter:null),this._cacheTimers[o.key]&&(clearTimeout(this._cacheTimers[o.key]),delete this._cacheTimers[o.key],this._setTileReloadTimer(o.key,d)));const f=!!d;if(!f){const g=this.map?this.map.painter:null;d=new HS(o,this._source.tileSize*o.overscaleFactor(),this.transform.tileZoom,g,this._isRaster),this._loadTile(d,this._tileLoaded.bind(this,d,o.key,d.state))}return d?(d.uses++,this._tiles[o.key]=d,f||this._source.fire(new jo("dataloading",{tile:d,coord:d.tileID,dataType:"source"})),d):null}_setTileReloadTimer(o,d){o in this._timers&&(clearTimeout(this._timers[o]),delete this._timers[o]);const f=d.getExpiryTimeout();f&&(this._timers[o]=setTimeout((()=>{this._reloadTile(o,"expired"),delete this._timers[o]}),f))}_removeTile(o){const d=this._tiles[o];d&&(d.uses--,delete this._tiles[o],this._timers[o]&&(clearTimeout(this._timers[o]),delete this._timers[o]),d.uses>0||(d.hasData()&&d.state!=="reloading"?this._cache.add(d.tileID,d,d.getExpiryTimeout()):(d.aborted=!0,this._abortTile(d),this._unloadTile(d))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const o in this._tiles)this._removeTile(+o);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(o,d,f){const g=[],b=this.transform;if(!b)return g;const w=b.projection.name==="globe",E=Iu(b.center.lng);for(const I in this._tiles){const D=this._tiles[I];if(f&&D.clearQueryDebugViz(),D.holdingForFade())continue;let z;if(w){const j=D.tileID.canonical;if(j.z===0){const K=[Math.abs(Ae(E,...sy(j,-1))-E),Math.abs(Ae(E,...sy(j,1))-E)];z=[0,2*K.indexOf(Math.min(...K))-1]}else{const K=[Math.abs(Ae(E,...sy(j,-1))-E),Math.abs(Ae(E,...sy(j,0))-E),Math.abs(Ae(E,...sy(j,1))-E)];z=[K.indexOf(Math.min(...K))-1]}}else z=[0];for(const j of z){const K=o.containsTile(D,b,d,j);K&&g.push(K)}}return g}getVisibleCoordinates(o){const d=this.getRenderableIds(o).map((f=>this._tiles[f].tileID));for(const f of d)f.projMatrix=this.transform.calculateProjMatrix(f.toUnwrapped());return d}hasTransition(){if(this._source.hasTransition())return!0;if(gR(this._source.type))for(const o in this._tiles){const d=this._tiles[o];if(d.fadeEndTime!==void 0&&d.fadeEndTime>=To.now())return!0}return!1}setFeatureState(o,d,f){this._state.updateState(o=o||"_geojsonTileLayer",d,f)}removeFeatureState(o,d,f){this._state.removeFeatureState(o=o||"_geojsonTileLayer",d,f)}getFeatureState(o,d){return this._state.getState(o=o||"_geojsonTileLayer",d)}setDependencies(o,d,f){const g=this._tiles[o];g&&g.setDependencies(d,f)}reloadTilesForDependencies(o,d){for(const f in this._tiles)this._tiles[f].hasDependency(o,d)&&this._reloadTile(+f,"reloading");this._cache.filter((f=>!f.hasDependency(o,d)))}_preloadTiles(o,d){if(!this._sourceLoaded){const E=()=>{this._sourceLoaded&&(this._source.off("data",E),this._preloadTiles(o,d))};return void this._source.on("data",E)}const f=new Map,g=Array.isArray(o)?o:[o],b=this.map.painter.terrain,w=this.usedForTerrain&&b?b.getScaledDemTileSize():this._source.tileSize;for(const E of g){const I=E.coveringTiles({tileSize:w,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const D of I)f.set(D.key,D);this.usedForTerrain&&E.updateElevation(!1)}Le(Array.from(f.values()),((E,I)=>{const D=new HS(E,this._source.tileSize*E.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(D,(z=>{this._source.type==="raster-dem"&&D.dem&&this._backfillDEM(D),I(z,D)}))}),d)}}function pR(c,o){const d=Math.abs(2*c.wrap)-+(c.wrap<0),f=Math.abs(2*o.wrap)-+(o.wrap<0);return c.overscaledZ-o.overscaledZ||f-d||o.canonical.y-c.canonical.y||o.canonical.x-c.canonical.x}function gR(c){return c==="raster"||c==="image"||c==="video"||c==="custom"}function sy(c,o){const d=1<<c.z;return[c.x/d+o,(c.x+1)/d+o]}Hm.maxOverzooming=10,Hm.maxUnderzooming=3;class _x{constructor(o,d,f){this._demTile=o,this._dem=this._demTile.dem,this._scale=d,this._offset=f}static create(o,d,f){const g=f||o.findDEMTileFor(d);if(!g||!g.dem)return;const b=g.dem,w=g.tileID,E=1<<d.canonical.z-w.canonical.z;return new _x(g,g.tileSize/Bn/E,[(d.canonical.x/E-w.canonical.x)*b.dim,(d.canonical.y/E-w.canonical.y)*b.dim])}tileCoordToPixel(o,d){const f=d*this._scale+this._offset[1],g=Math.floor(o*this._scale+this._offset[0]),b=Math.floor(f);return new W(g,b)}getElevationAt(o,d,f,g){const b=o*this._scale+this._offset[0],w=d*this._scale+this._offset[1],E=Math.floor(b),I=Math.floor(w),D=this._dem;return g=!!g,f?Yn(Yn(D.get(E,I,g),D.get(E,I+1,g),w-I),Yn(D.get(E+1,I,g),D.get(E+1,I+1,g),w-I),b-E):D.get(E,I,g)}getElevationAtPixel(o,d,f){return this._dem.get(o,d,!!f)}getMeterToDEM(o){return(1<<this._demTile.tileID.canonical.z)*Jc(1,o)*this._dem.stride}}class _R{constructor(o,d){this.tileID=o,this.x=o.canonical.x,this.y=o.canonical.y,this.z=o.canonical.z,this.grid=new Qo(Bn,16,0),this.featureIndexArray=new Rd,this.promoteId=d}insert(o,d,f,g,b,w=0){const E=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(f,g,b,w);const I=this.grid;for(let D=0;D<d.length;D++){const z=d[D],j=[1/0,1/0,-1/0,-1/0];for(let K=0;K<z.length;K++){const ie=z[K];j[0]=Math.min(j[0],ie.x),j[1]=Math.min(j[1],ie.y),j[2]=Math.max(j[2],ie.x),j[3]=Math.max(j[3],ie.y)}j[0]<Bn&&j[1]<Bn&&j[2]>=0&&j[3]>=0&&I.insert(E,j[0],j[1],j[2],j[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new AS(new ix(this.rawTileData)).layers,this.sourceLayerCoder=new nR(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const o in this.vtLayers)this.vtFeatures[o]=[]}return this.vtLayers}query(o,d,f,g){this.loadVTLayers();const b=o.params||{},w=Xh(b.filter),E=o.tileResult,I=o.transform,D=E.bufferedTilespaceBounds,z=this.grid.query(D.min.x,D.min.y,D.max.x,D.max.y,((oe,de,xe,De)=>$M(E.bufferedTilespaceGeometry,oe,de,xe,De)));z.sort(J9);let j=null;I.elevation&&z.length>0&&(j=_x.create(I.elevation,this.tileID));const K={};let ie;for(let oe=0;oe<z.length;oe++){const de=z[oe];if(de===ie)continue;ie=de;const xe=this.featureIndexArray.get(de);let De=null;this.loadMatchingFeature(K,xe,w,b.layers,b.availableImages,d,f,g,((He,Re,Ne,Je=0)=>(De||(De=Fd(He,this.tileID.canonical,o.tileTransform)),Re.queryIntersectsFeature(E,He,Ne,De,this.z,o.transform,o.pixelPosMatrix,j,Je))))}return K}loadMatchingFeature(o,d,f,g,b,w,E,I,D){const{featureIndex:z,bucketIndex:j,sourceLayerIndex:K,layoutVertexArrayOffset:ie}=d,oe=this.bucketLayerIDs[j];if(g&&!(function(He,Re){for(let Ne=0;Ne<He.length;Ne++)if(Re.indexOf(He[Ne])>=0)return!0;return!1})(g,oe))return;const de=this.sourceLayerCoder.decode(K),xe=this.vtLayers[de].feature(z);if(f.needGeometry){const He=Um(xe,!0);if(!f.filter(new U(this.tileID.overscaledZ),He,this.tileID.canonical))return}else if(!f.filter(new U(this.tileID.overscaledZ),xe))return;const De=this.getId(xe,de);for(let He=0;He<oe.length;He++){const Re=oe[He];if(g&&g.indexOf(Re)<0)continue;const Ne=w[Re];if(!Ne)continue;let Je={};De!==void 0&&I&&(Je=I.getState(Ne.sourceLayer||"_geojsonTileLayer",De));const Ye=ct({},E[Re]);Ye.paint=vR(Ye.paint,Ne.paint,xe,Je,b),Ye.layout=vR(Ye.layout,Ne.layout,xe,Je,b);const yt=!D||D(xe,Ne,Je,ie);if(!yt)continue;const _t=new iR(xe,this.z,this.x,this.y,De);_t.layer=Ye;let Ot=o[Re];Ot===void 0&&(Ot=o[Re]=[]),Ot.push({featureIndex:z,feature:_t,intersectionZ:yt})}}lookupSymbolFeatures(o,d,f,g,b,w,E,I){const D={};this.loadVTLayers();const z=Xh(b);for(const j of o)this.loadMatchingFeature(D,{bucketIndex:f,sourceLayerIndex:g,featureIndex:j,layoutVertexArrayOffset:0},z,w,E,I,d);return D}loadFeature(o){const{featureIndex:d,sourceLayerIndex:f}=o;this.loadVTLayers();const g=this.sourceLayerCoder.decode(f),b=this.vtFeatures[g];if(b[d])return b[d];const w=this.vtLayers[g].feature(d);return b[d]=w,w}hasLayer(o){for(const d of this.bucketLayerIDs)for(const f of d)if(o===f)return!0;return!1}getId(o,d){let f=o.id;if(this.promoteId){const g=typeof this.promoteId=="string"?this.promoteId:this.promoteId[d];g!=null&&(f=o.properties[g]),typeof f=="boolean"&&(f=Number(f))}return f}}function vR(c,o,d,f,g){return Ce(c,((b,w)=>{const E=o instanceof Te?o.get(w):null;return E&&E.evaluate?E.evaluate(d,f,g):E}))}function J9(c,o){return o-c}bn(_R,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class yR{constructor(o,d){this.width=o,this.height=d,this.nextRow=0,this.image=new zd({width:o,height:d}),this.positions={},this.uploaded=!1}getDash(o,d){const f=this.getKey(o,d);return this.positions[f]}trim(){const o=this.width,d=this.height=Ct(this.nextRow);this.image.resize({width:o,height:d})}getKey(o,d){return o.join(",")+d}getDashRanges(o,d,f){const g=[];let b=o.length%2==1?-o[o.length-1]*f:0,w=o[0]*f,E=!0;g.push({left:b,right:w,isDash:E,zeroLength:o[0]===0});let I=o[0];for(let D=1;D<o.length;D++){E=!E;const z=o[D];b=I*f,I+=z,w=I*f,g.push({left:b,right:w,isDash:E,zeroLength:z===0})}return g}addRoundDash(o,d,f){const g=d/2;for(let b=-f;b<=f;b++){const w=this.width*(this.nextRow+f+b);let E=0,I=o[E];for(let D=0;D<this.width;D++){D/I.right>1&&(I=o[++E]);const z=Math.abs(D-I.left),j=Math.abs(D-I.right),K=Math.min(z,j);let ie;const oe=b/f*(g+1);if(I.isDash){const de=g-Math.abs(oe);ie=Math.sqrt(K*K+de*de)}else ie=g-Math.sqrt(K*K+oe*oe);this.image.data[w+D]=Math.max(0,Math.min(255,ie+128))}}}addRegularDash(o,d){for(let I=o.length-1;I>=0;--I){const D=o[I],z=o[I+1];D.zeroLength?o.splice(I,1):z&&z.isDash===D.isDash&&(z.left=D.left,o.splice(I,1))}const f=o[0],g=o[o.length-1];f.isDash===g.isDash&&(f.left=g.left-this.width,g.right=f.right+this.width);const b=this.width*this.nextRow;let w=0,E=o[w];for(let I=0;I<this.width;I++){I/E.right>1&&(E=o[++w]);const D=Math.abs(I-E.left),z=Math.abs(I-E.right),j=Math.min(D,z);this.image.data[b+I]=Math.max(0,Math.min(255,(E.isDash?j:-j)+d+128))}}addDash(o,d){const f=this.getKey(o,d);if(this.positions[f])return this.positions[f];const g=d==="round",b=g?7:0,w=2*b+1;if(this.nextRow+w>this.height)return dt("LineAtlas out of space"),null;o.length===0&&o.push(1);let E=0;for(let z=0;z<o.length;z++)o[z]<0&&(dt("Negative value is found in line dasharray, replacing values with 0"),o[z]=0),E+=o[z];if(E!==0){const z=this.width/E,j=this.getDashRanges(o,this.width,z);g?this.addRoundDash(j,z,b):this.addRegularDash(j,d==="square"?.5*z:0)}const I=this.nextRow+b;this.nextRow+=w;const D={tl:[I,b],br:[E,0]};return this.positions[f]=D,D}}bn(yR,"LineAtlas");const bR=1*eu;class xR{constructor(o){const d={},f=[];for(const E in o){const I=o[E],D=d[E]={};for(const z in I.glyphs){const j=I.glyphs[+z];if(!j||j.bitmap.width===0||j.bitmap.height===0)continue;const K=j.metrics.localGlyph?bR:1,ie={x:0,y:0,w:j.bitmap.width+2*K,h:j.bitmap.height+2*K};f.push(ie),D[z]=ie}}const{w:g,h:b}=RS(f),w=new zd({width:g||1,height:b||1});for(const E in o){const I=o[E];for(const D in I.glyphs){const z=I.glyphs[+D];if(!z||z.bitmap.width===0||z.bitmap.height===0)continue;const j=d[E][D],K=z.metrics.localGlyph?bR:1;zd.copy(z.bitmap,w,{x:0,y:0},{x:j.x+K,y:j.y+K},z.bitmap)}}this.image=w,this.positions=d}}bn(xR,"GlyphAtlas");class Q9{constructor(o){this.tileID=new xa(o.tileID.overscaledZ,o.tileID.wrap,o.tileID.canonical.z,o.tileID.canonical.x,o.tileID.canonical.y),this.tileZoom=o.tileZoom,this.uid=o.uid,this.zoom=o.zoom,this.canonical=o.tileID.canonical,this.pixelRatio=o.pixelRatio,this.tileSize=o.tileSize,this.source=o.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=o.showCollisionBoxes,this.collectResourceTiming=!!o.collectResourceTiming,this.returnDependencies=!!o.returnDependencies,this.promoteId=o.promoteId,this.enableTerrain=!!o.enableTerrain,this.isSymbolTile=o.isSymbolTile,this.tileTransform=Wm(o.tileID.canonical,o.projection),this.projection=o.projection}parse(o,d,f,g,b){this.status="parsing",this.data=o,this.collisionBoxArray=new ji;const w=new nR(Object.keys(o.layers).sort()),E=new _R(this.tileID,this.promoteId);E.bucketLayerIDs=[];const I={},D=new yR(256,256),z={featureIndex:E,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:D,availableImages:f},j=d.familiesBySource[this.source];for(const Je in j){const Ye=o.layers[Je];if(!Ye)continue;let yt=!1,_t=!1;for(const St of j[Je])St[0].type==="symbol"?yt=!0:_t=!0;if(this.isSymbolTile===!0&&!yt||this.isSymbolTile===!1&&!_t)continue;Ye.version===1&&dt(`Vector tile source "${this.source}" layer "${Je}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Ot=w.encode(Je),Jt=[];for(let St=0;St<Ye.length;St++){const zt=Ye.feature(St),Nt=E.getId(zt,Je);Jt.push({feature:zt,id:Nt,index:St,sourceLayerIndex:Ot})}for(const St of j[Je]){const zt=St[0];this.isSymbolTile!==void 0&&zt.type==="symbol"!==this.isSymbolTile||zt.minzoom&&this.zoom<Math.floor(zt.minzoom)||zt.maxzoom&&this.zoom>=zt.maxzoom||zt.visibility!=="none"&&(ZS(St,this.zoom,f),(I[zt.id]=zt.createBucket({index:E.bucketLayerIDs.length,layers:St,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Ot,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:f})).populate(Jt,z,this.tileID.canonical,this.tileTransform),E.bucketLayerIDs.push(St.map((Nt=>Nt.id))))}}let K,ie,oe,de;D.trim();const xe={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},De=()=>{if(K)return b(K);if(ie&&oe&&de){const Je=new xR(ie),Ye=new ID(oe,de);for(const yt in I){const _t=I[yt];_t instanceof af?(ZS(_t.layers,this.zoom,f),E9(_t,ie,Je.positions,oe,Ye.iconPositions,this.showCollisionBoxes,f,this.tileID.canonical,this.tileZoom,this.projection)):_t.hasPattern&&(_t instanceof ex||_t instanceof X0||_t instanceof qv)&&(ZS(_t.layers,this.zoom,f),_t.addFeatures(z,this.tileID.canonical,Ye.patternPositions,f,this.tileTransform))}this.status="done",b(null,{buckets:We(I).filter((yt=>!yt.isEmpty())),featureIndex:E,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Je.image,lineAtlas:D,imageAtlas:Ye,glyphMap:this.returnDependencies?ie:null,iconMap:this.returnDependencies?oe:null,glyphPositions:this.returnDependencies?Je.positions:null})}},He=Ce(z.glyphDependencies,(Je=>Object.keys(Je).map(Number)));Object.keys(He).length?g.send("getGlyphs",{uid:this.uid,stacks:He},((Je,Ye)=>{K||(K=Je,ie=Ye,De())}),void 0,!1,xe):ie={};const Re=Object.keys(z.iconDependencies);Re.length?g.send("getImages",{icons:Re,source:this.source,tileID:this.tileID,type:"icons"},((Je,Ye)=>{K||(K=Je,oe=Ye,De())}),void 0,!1,xe):oe={};const Ne=Object.keys(z.patternDependencies);Ne.length?g.send("getImages",{icons:Ne,source:this.source,tileID:this.tileID,type:"patterns"},((Je,Ye)=>{K||(K=Je,de=Ye,De())}),void 0,!1,xe):de={},De()}}function ZS(c,o,d){const f=new U(o);for(const g of c)g.recalculate(f,d)}class wR{constructor(o){this.entries={},this.scheduler=o}request(o,d,f,g){const b=this.entries[o]=this.entries[o]||{callbacks:[]};if(b.result){const[w,E]=b.result;return this.scheduler?this.scheduler.add((()=>{g(w,E)}),d):g(w,E),()=>{}}return b.callbacks.push(g),b.cancel||(b.cancel=f(((w,E)=>{b.result=[w,E];for(const I of b.callbacks)this.scheduler?this.scheduler.add((()=>{I(w,E)}),d):I(w,E);setTimeout((()=>delete this.entries[o]),3e3)}))),()=>{b.result||(b.callbacks=b.callbacks.filter((w=>w!==g)),b.callbacks.length||(b.cancel(),delete this.entries[o]))}}}function TR(c,o,d){const f=JSON.stringify(c.request);return c.data&&(this.deduped.entries[f]={result:[null,c.data]}),this.deduped.request(f,{type:"parseTile",isSymbolTile:c.isSymbolTile,zoom:c.tileZoom},(g=>{const b=xo(c.request,((w,E,I,D)=>{w?g(w):E&&g(null,{vectorTile:d?void 0:new AS(new ix(E)),rawData:E,cacheControl:I,expires:D})}));return()=>{b.cancel(),g()}}),o)}const SR=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class YS{static from(o){if(!(o instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[d,f]=new Uint8Array(o,0,2);if(d!==219)throw new Error("Data does not appear to be in a KDBush format.");const g=f>>4;if(g!==1)throw new Error(`Got v${g} data when expected v1.`);const b=SR[15&f];if(!b)throw new Error("Unrecognized array type.");const[w]=new Uint16Array(o,2,1),[E]=new Uint32Array(o,4,1);return new YS(E,w,b,o)}constructor(o,d=64,f=Float64Array,g){if(isNaN(o)||o<0)throw new Error(`Unpexpected numItems value: ${o}.`);this.numItems=+o,this.nodeSize=Math.min(Math.max(+d,2),65535),this.ArrayType=f,this.IndexArrayType=o<65536?Uint16Array:Uint32Array;const b=SR.indexOf(this.ArrayType),w=2*o*this.ArrayType.BYTES_PER_ELEMENT,E=o*this.IndexArrayType.BYTES_PER_ELEMENT,I=(8-E%8)%8;if(b<0)throw new Error(`Unexpected typed array class: ${f}.`);g&&g instanceof ArrayBuffer?(this.data=g,this.ids=new this.IndexArrayType(this.data,8,o),this.coords=new this.ArrayType(this.data,8+E+I,2*o),this._pos=2*o,this._finished=!0):(this.data=new ArrayBuffer(8+w+E+I),this.ids=new this.IndexArrayType(this.data,8,o),this.coords=new this.ArrayType(this.data,8+E+I,2*o),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+b]),new Uint16Array(this.data,2,1)[0]=d,new Uint32Array(this.data,4,1)[0]=o)}add(o,d){const f=this._pos>>1;return this.ids[f]=f,this.coords[this._pos++]=o,this.coords[this._pos++]=d,f}finish(){const o=this._pos>>1;if(o!==this.numItems)throw new Error(`Added ${o} items when expected ${this.numItems}.`);return JS(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(o,d,f,g){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:b,coords:w,nodeSize:E}=this,I=[0,b.length-1,0],D=[];for(;I.length;){const z=I.pop()||0,j=I.pop()||0,K=I.pop()||0;if(j-K<=E){for(let xe=K;xe<=j;xe++){const De=w[2*xe],He=w[2*xe+1];De>=o&&De<=f&&He>=d&&He<=g&&D.push(b[xe])}continue}const ie=K+j>>1,oe=w[2*ie],de=w[2*ie+1];oe>=o&&oe<=f&&de>=d&&de<=g&&D.push(b[ie]),(z===0?o<=oe:d<=de)&&(I.push(K),I.push(ie-1),I.push(1-z)),(z===0?f>=oe:g>=de)&&(I.push(ie+1),I.push(j),I.push(1-z))}return D}within(o,d,f){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:g,coords:b,nodeSize:w}=this,E=[0,g.length-1,0],I=[],D=f*f;for(;E.length;){const z=E.pop()||0,j=E.pop()||0,K=E.pop()||0;if(j-K<=w){for(let xe=K;xe<=j;xe++)CR(b[2*xe],b[2*xe+1],o,d)<=D&&I.push(g[xe]);continue}const ie=K+j>>1,oe=b[2*ie],de=b[2*ie+1];CR(oe,de,o,d)<=D&&I.push(g[ie]),(z===0?o-f<=oe:d-f<=de)&&(E.push(K),E.push(ie-1),E.push(1-z)),(z===0?o+f>=oe:d+f>=de)&&(E.push(ie+1),E.push(j),E.push(1-z))}return I}}function JS(c,o,d,f,g,b){if(g-f<=d)return;const w=f+g>>1;ER(c,o,w,f,g,b),JS(c,o,d,f,w-1,1-b),JS(c,o,d,w+1,g,1-b)}function ER(c,o,d,f,g,b){for(;g>f;){if(g-f>600){const D=g-f+1,z=d-f+1,j=Math.log(D),K=.5*Math.exp(2*j/3),ie=.5*Math.sqrt(j*K*(D-K)/D)*(z-D/2<0?-1:1);ER(c,o,d,Math.max(f,Math.floor(d-z*K/D+ie)),Math.min(g,Math.floor(d+(D-z)*K/D+ie)),b)}const w=o[2*d+b];let E=f,I=g;for(oy(c,o,f,d),o[2*g+b]>w&&oy(c,o,f,g);E<I;){for(oy(c,o,E,I),E++,I--;o[2*E+b]<w;)E++;for(;o[2*I+b]>w;)I--}o[2*f+b]===w?oy(c,o,f,I):(I++,oy(c,o,I,g)),I<=d&&(f=I+1),d<=I&&(g=I-1)}}function oy(c,o,d,f){QS(c,d,f),QS(o,2*d,2*f),QS(o,2*d+1,2*f+1)}function QS(c,o,d){const f=c[o];c[o]=c[d],c[d]=f}function CR(c,o,d,f){const g=c-d,b=o-f;return g*g+b*b}s.ARRAY_TYPE=vl,s.AUTH_ERR_MSG=Xe,s.Aabb=ba,s.Actor=class{constructor(c,o,d){this.target=c,this.parent=o,this.mapId=d,this.callbacks={},this.cancelCallbacks={},yn(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=Dt()?c:p,this.scheduler=new G9}send(c,o,d,f,g=!1,b){const w=Math.round(1e18*Math.random()).toString(36).substring(0,10);d&&(d.metadata=b,this.callbacks[w]=d);const E=En(this.globalScope)?void 0:[];return this.target.postMessage({id:w,type:c,hasCallback:!!d,targetMapId:f,mustQueue:g,sourceMapId:this.mapId,data:Su(o,E)},E),{cancel:()=>{d&&delete this.callbacks[w],this.target.postMessage({id:w,type:"<cancel>",targetMapId:f,sourceMapId:this.mapId})}}}receive(c){const o=c.data,d=o.id;if(d&&(!o.targetMapId||this.mapId===o.targetMapId))if(o.type==="<cancel>"){const f=this.cancelCallbacks[d];delete this.cancelCallbacks[d],f&&f.cancel()}else if(o.mustQueue||Dt()){const f=this.callbacks[d];this.cancelCallbacks[d]=this.scheduler.add((()=>this.processTask(d,o)),f&&f.metadata||{type:"message"})}else this.processTask(d,o)}processTask(c,o){if(o.type==="<response>"){const d=this.callbacks[c];delete this.callbacks[c],d&&(o.error?d(Gc(o.error)):d(null,Gc(o.data)))}else{const d=En(this.globalScope)?void 0:[],f=o.hasCallback?(b,w)=>{delete this.cancelCallbacks[c],this.target.postMessage({id:c,type:"<response>",sourceMapId:this.mapId,error:b?Su(b):null,data:Su(w,d)},d)}:b=>{},g=Gc(o.data);if(this.parent[o.type])this.parent[o.type](o.sourceMapId,g,f);else if(this.parent.getWorkerSource){const b=o.type.split(".");this.parent.getWorkerSource(o.sourceMapId,b[0],g.source)[b[1]](g,f)}else f(new Error(`Could not find function ${o.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},s.CanonicalTileID=Q0,s.Color=Ni,s.ColorMode=Du,s.CullFaceMode=tu,s.DEMData=gx,s.DataConstantProperty=le,s.DedupedRequest=wR,s.DepthMode=Zg,s.EXTENT=Bn,s.Elevation=class{isDataAvailableAtPoint(c){const o=this._source();if(this.isUsingMockSource()||!o||c.y<0||c.y>1)return!1;const d=o.getSource().maxzoom,f=1<<d,g=Math.floor(c.x),b=Math.floor((c.x-g)*f),w=Math.floor(c.y*f),E=this.findDEMTileFor(new xa(d,g,d,b,w));return!(!E||!E.dem)}getAtPointOrZero(c,o=0){return this.getAtPoint(c,o)||0}getAtPoint(c,o,d=!0){if(this.isUsingMockSource())return null;o==null&&(o=null);const f=this._source();if(!f||c.y<0||c.y>1)return o;const g=f.getSource().maxzoom,b=1<<g,w=Math.floor(c.x),E=c.x-w,I=new xa(g,w,g,Math.floor(E*b),Math.floor(c.y*b)),D=this.findDEMTileFor(I);if(!D||!D.dem)return o;const z=D.dem,j=1<<D.tileID.canonical.z,K=(E*j-D.tileID.canonical.x)*z.dim,ie=(c.y*j-D.tileID.canonical.y)*z.dim,oe=Math.floor(K),de=Math.floor(ie);return(d?this.exaggeration():1)*Yn(Yn(z.get(oe,de),z.get(oe,de+1),ie-de),Yn(z.get(oe+1,de),z.get(oe+1,de+1),ie-de),K-oe)}getAtTileOffset(c,o,d){const f=1<<c.canonical.z;return this.getAtPointOrZero(new Vg(c.wrap+(c.canonical.x+o/Bn)/f,(c.canonical.y+d/Bn)/f))}getAtTileOffsetFunc(c,o,d,f){return g=>{const b=this.getAtTileOffset(c,g.x,g.y),w=f.upVector(c.canonical,g.x,g.y);return jl(w,w,b*f.upVectorScale(c.canonical,o,d).metersToTile),w}}getForTilePoints(c,o,d,f){if(this.isUsingMockSource())return!1;const g=_x.create(this,c,f);return!!g&&(o.forEach((b=>{b[2]=this.exaggeration()*g.getElevationAt(b[0],b[1],d)})),!0)}getMinMaxForTile(c){if(this.isUsingMockSource())return null;const o=this.findDEMTileFor(c);if(!o||!o.dem)return null;const d=o.dem.tree,f=o.tileID,g=1<<c.canonical.z-f.canonical.z;let b=c.canonical.x/g-f.canonical.x,w=c.canonical.y/g-f.canonical.y,E=0;for(let I=0;I<c.canonical.z-f.canonical.z&&!d.leaves[E];I++){b*=2,w*=2;const D=2*Math.floor(w)+Math.floor(b);E=d.childOffsets[E]+D,b%=1,w%=1}return{min:this.exaggeration()*d.minimums[E],max:this.exaggeration()*d.maximums[E]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(c,o,d){throw new Error("Pure virtual method called.")}pointCoordinate(c){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(c){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},s.ErrorEvent=So,s.EvaluationParameters=U,s.Event=jo,s.Evented=Ll,s.FillExtrusionBucket=qv,s.Frustum=oS,s.FrustumCorners=sS,s.GLOBE_RADIUS=Cu,s.GLOBE_SCALE_MATCH_LATITUDE=45,s.GLOBE_ZOOM_THRESHOLD_MAX=EM,s.GLOBE_ZOOM_THRESHOLD_MIN=aS,s.GlobeSharedBuffers=class{constructor(c){this._createGrid(c),this._createPoles(c)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const c of this._poleSegments)c.destroy();for(const c of this._gridSegments)c.withSkirts.destroy(),c.withoutSkirts.destroy();if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();for(const c of this._wireframeSegments)c.destroy()}}_fillGridMeshWithLods(c,o){const d=new $t,f=new kn,g=[],b=c+1+2,w=o[0]+1,E=o[0]+1+(1+o.length),I=(D,z,j)=>{let K=D===b-1?D-2:D===0?D:D-1;return K+=j?24575:0,[K,z]};for(let D=0;D<b;++D)d.emplaceBack(...I(D,0,!0));for(let D=0;D<w;++D)for(let z=0;z<b;++z)d.emplaceBack(...I(z,D,(z===0||z===b-1)&&!0));for(let D=0;D<o.length;++D){const z=o[D];for(let j=0;j<b;++j)d.emplaceBack(...I(j,z,!0))}for(let D=0;D<o.length;++D){const z=f.length,j=o[D]+1+2,K=new kn;for(let de=0;de<j-1;de++){const xe=de===j-2,De=xe?b*(E-o.length+D-de):b;for(let He=0;He<b-1;He++){const Re=de*b+He;de===0||xe||He===0||He===b-2?(K.emplaceBack(Re+1,Re,Re+De),K.emplaceBack(Re+De,Re+De+1,Re+1)):(f.emplaceBack(Re+1,Re,Re+De),f.emplaceBack(Re+De,Re+De+1,Re+1))}}const ie=us.simpleSegment(0,z,d.length,f.length-z);for(let de=0;de<K.uint16.length;de+=3)f.emplaceBack(K.uint16[de],K.uint16[de+1],K.uint16[de+2]);const oe=us.simpleSegment(0,z,d.length,f.length-z);g.push({withoutSkirts:ie,withSkirts:oe})}return{vertices:d,indices:f,segments:g}}_createGrid(c){const o=this._fillGridMeshWithLods(zm,Bv);this._gridSegments=o.segments,this._gridBuffer=c.createVertexBuffer(o.vertices,Vv.members),this._gridIndexBuffer=c.createIndexBuffer(o.indices,!0)}_createPoles(c){const o=new kn;for(let g=0;g<=zm;g++)o.emplaceBack(0,g+1,g+2);this._poleIndexBuffer=c.createIndexBuffer(o,!0);const d=new $i,f=new $i;this._poleSegments=[];for(let g=0,b=0;g<aS;g++){const w=360/(1<<g);d.emplaceBack(0,-Cu,0,.5,0),f.emplaceBack(0,-Cu,0,.5,1);for(let E=0;E<=zm;E++){const I=E/zm,D=Yn(0,w,I),[z,j,K]=Rg(G8,q8,D,Cu);d.emplaceBack(z,j,K,I,0),f.emplaceBack(z,j,K,I,1)}this._poleSegments.push(us.simpleSegment(b,0,66,64)),b+=66}this._poleNorthVertexBuffer=c.createVertexBuffer(d,TM,!1),this._poleSouthVertexBuffer=c.createVertexBuffer(f,TM,!1)}getGridBuffers(c,o){return[this._gridBuffer,this._gridIndexBuffer,o?this._gridSegments[c].withSkirts:this._gridSegments[c].withoutSkirts]}getPoleBuffers(c){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[c]]}getWirefameBuffers(c,o){if(!this._wireframeSegments){const d=new ks,f=zm,g=f+1+2,b=1;this._wireframeSegments=[];for(let w=0,E=0;w<Bv.length;w++){const I=Bv[w];for(let z=b;z<I+b;z++)for(let j=b;j<f+b;j++){const K=z*g+j;d.emplaceBack(K,K+1),d.emplaceBack(K,K+g),d.emplaceBack(K,K+g+1)}const D=I*f*3;this._wireframeSegments.push(us.simpleSegment(0,E,(I+1)*g,D)),E+=D}this._wireframeIndexBuffer=c.createIndexBuffer(d)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[o]]}},s.GlyphManager=Hg,s.ImagePosition=LS,s.KDBush=YS,s.LivePerformanceUtils=ws,s.LngLat=sr,s.LngLatBounds=nf,s.LocalGlyphMode=BS,s.MAX_MERCATOR_LATITUDE=Do,s.MercatorCoordinate=Vg,s.ONE_EM=lo,s.OverscaledTileID=xa,s.PerformanceMarkers=$r,s.Point=W,s.Properties=Me,s.RGBAImage=yl,s.Ray=rS,s.RequestManager=class{constructor(c,o,d){this._transformRequestFn=c,this._customAccessToken=o,this._silenceAuthErrors=!!d,this._createSkuToken()}_createSkuToken(){const c=(function(){let o="";for(let d=0;d<10;d++)o+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",X,o].join(""),tokenExpiresAt:Date.now()+432e5}})();this._skuToken=c.token,this._skuTokenExpiresAt=c.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(c,o){return this._transformRequestFn&&this._transformRequestFn(c,o)||{url:c}}normalizeStyleURL(c,o){if(!tt(c))return c;const d=on(c);return d.path=`/styles/v1${d.path}`,this._makeAPIURL(d,this._customAccessToken||o)}normalizeGlyphsURL(c,o){if(!tt(c))return c;const d=on(c);return d.path=`/fonts/v1${d.path}`,this._makeAPIURL(d,this._customAccessToken||o)}normalizeSourceURL(c,o,d,f){if(!tt(c))return c;const g=on(c);return g.path=`/v4/${g.authority}.json`,g.params.push("secure"),d&&g.params.push(`language=${d}`),f&&g.params.push(`worldview=${f}`),this._makeAPIURL(g,this._customAccessToken||o)}normalizeSpriteURL(c,o,d,f){const g=on(c);return tt(c)?(g.path=`/styles/v1${g.path}/sprite${o}${d}`,this._makeAPIURL(g,this._customAccessToken||f)):(g.path+=`${o}${d}`,Yt(g))}normalizeTileURL(c,o,d){if(this._isSkuTokenExpired()&&this._createSkuToken(),c&&!tt(c))return c;const f=on(c);f.path=f.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${o||d&&f.authority!=="raster"&&d===512?"@2x":""}${k.supported?".webp":"$1"}`),f.authority==="raster"?f.path=`/${T.RASTER_URL_PREFIX}${f.path}`:(f.path=f.path.replace(/^.+\/v4\//,"/"),f.path=`/${T.TILE_URL_VERSION}${f.path}`);const g=this._customAccessToken||(function(b){for(const w of b){const E=w.match(/^access_token=(.*)$/);if(E)return E[1]}return null})(f.params)||T.ACCESS_TOKEN;return T.REQUIRE_ACCESS_TOKEN&&g&&this._skuToken&&f.params.push(`sku=${this._skuToken}`),this._makeAPIURL(f,g)}canonicalizeTileURL(c,o){const d=on(c);if(!d.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!d.path.match(/\.[\w]+$/))return c;let f="mapbox://";d.path.match(/^\/raster\/v1\//)?f+=`raster/${d.path.replace(`/${T.RASTER_URL_PREFIX}/`,"")}`:f+=`tiles/${d.path.replace(`/${T.TILE_URL_VERSION}/`,"")}`;let g=d.params;return o&&(g=g.filter((b=>!b.match(/^access_token=/)))),g.length&&(f+=`?${g.join("&")}`),f}canonicalizeTileset(c,o){const d=!!o&&tt(o),f=[];for(const g of c.tiles||[])gt(g)?f.push(this.canonicalizeTileURL(g,d)):f.push(g);return f}_makeAPIURL(c,o){const d="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",f=on(T.API_URL);if(c.protocol=f.protocol,c.authority=f.authority,c.protocol==="http"){const g=c.params.indexOf("secure");g>=0&&c.params.splice(g,1)}if(f.path!=="/"&&(c.path=`${f.path}${c.path}`),!T.REQUIRE_ACCESS_TOKEN)return Yt(c);if(o=o||T.ACCESS_TOKEN,!this._silenceAuthErrors){if(!o)throw new Error(`An API access token is required to use Mapbox GL. ${d}`);if(o[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${d}`)}return c.params=c.params.filter((g=>g.indexOf("access_token")===-1)),c.params.push(`access_token=${o||""}`),Yt(c)}},s.ResourceType=bo,s.SegmentVector=us,s.SourceCache=Hm,s.StencilMode=qS,s.StructArrayLayout1ui2=va,s.StructArrayLayout2f1f2i16=Dn,s.StructArrayLayout2i4=$t,s.StructArrayLayout2ui4=ks,s.StructArrayLayout3f12=fi,s.StructArrayLayout3ui6=kn,s.StructArrayLayout4i8=Rt,s.StructArrayLayout5f20=$i,s.Texture=ry,s.Tile=HS,s.Transitionable=ae,s.Uniform1f=V0,s.Uniform1i=class extends Od{constructor(c){super(c),this.current=0}set(c,o,d){this.fetchUniformLocation(c,o)&&this.current!==d&&(this.current=d,this.gl.uniform1i(this.location,d))}},s.Uniform2f=class extends Od{constructor(c){super(c),this.current=[0,0]}set(c,o,d){this.fetchUniformLocation(c,o)&&(d[0]===this.current[0]&&d[1]===this.current[1]||(this.current=d,this.gl.uniform2f(this.location,d[0],d[1])))}},s.Uniform3f=class extends Od{constructor(c){super(c),this.current=[0,0,0]}set(c,o,d){this.fetchUniformLocation(c,o)&&(d[0]===this.current[0]&&d[1]===this.current[1]&&d[2]===this.current[2]||(this.current=d,this.gl.uniform3f(this.location,d[0],d[1],d[2])))}},s.Uniform4f=oM,s.UniformColor=aM,s.UniformMatrix2f=class extends Od{constructor(c){super(c),this.current=P8}set(c,o,d){if(this.fetchUniformLocation(c,o)){for(let f=0;f<4;f++)if(d[f]!==this.current[f]){this.current=d,this.gl.uniformMatrix2fv(this.location,!1,d);break}}}},s.UniformMatrix3f=class extends Od{constructor(c){super(c),this.current=A8}set(c,o,d){if(this.fetchUniformLocation(c,o)){for(let f=0;f<9;f++)if(d[f]!==this.current[f]){this.current=d,this.gl.uniformMatrix3fv(this.location,!1,d);break}}}},s.UniformMatrix4f=class extends Od{constructor(c){super(c),this.current=I8}set(c,o,d){if(this.fetchUniformLocation(c,o)){if(d[12]!==this.current[12]||d[0]!==this.current[0])return this.current=d,void this.gl.uniformMatrix4fv(this.location,!1,d);for(let f=1;f<16;f++)if(d[f]!==this.current[f]){this.current=d,this.gl.uniformMatrix4fv(this.location,!1,d);break}}}},s.UnwrappedTileID=fD,s.ValidationError=hn,s.VectorTileFeature=Y0,s.VectorTileWorkerSource=class extends Ll{constructor(c,o,d,f,g){super(),this.actor=c,this.layerIndex=o,this.availableImages=d,this.loadVectorData=g||TR,this.loading={},this.loaded={},this.deduped=new wR(c.scheduler),this.isSpriteLoaded=f,this.scheduler=c.scheduler}loadTile(c,o){const d=c.uid,f=c&&c.request,g=f&&f.collectResourceTiming,b=this.loading[d]=new Q9(c);b.abort=this.loadVectorData(c,((w,E)=>{const I=!this.loading[d];if(delete this.loading[d],I||w||!E)return b.status="done",I||(this.loaded[d]=b),o(w);const D=E.rawData,z={};E.expires&&(z.expires=E.expires),E.cacheControl&&(z.cacheControl=E.cacheControl),b.vectorTile=E.vectorTile||new AS(new ix(D));const j=()=>{b.parse(b.vectorTile,this.layerIndex,this.availableImages,this.actor,((K,ie)=>{if(K||!ie)return o(K);const oe={};if(g){const de=la(f);de.length>0&&(oe.resourceTiming=JSON.parse(JSON.stringify(de)))}o(null,ct({rawTileData:D.slice(0)},ie,z,oe))}))};this.isSpriteLoaded?j():this.once("isSpriteLoaded",(()=>{this.scheduler?this.scheduler.add(j,{type:"parseTile",isSymbolTile:c.isSymbolTile,zoom:c.tileZoom}):j()})),this.loaded=this.loaded||{},this.loaded[d]=b}))}reloadTile(c,o){const d=this.loaded,f=c.uid,g=this;if(d&&d[f]){const b=d[f];b.showCollisionBoxes=c.showCollisionBoxes,b.enableTerrain=!!c.enableTerrain,b.projection=c.projection,b.tileTransform=Wm(c.tileID.canonical,c.projection);const w=(E,I)=>{const D=b.reloadCallback;D&&(delete b.reloadCallback,b.parse(b.vectorTile,g.layerIndex,this.availableImages,g.actor,D)),o(E,I)};b.status==="parsing"?b.reloadCallback=w:b.status==="done"&&(b.vectorTile?b.parse(b.vectorTile,this.layerIndex,this.availableImages,this.actor,w):w())}}abortTile(c,o){const d=c.uid,f=this.loading[d];f&&(f.abort&&f.abort(),delete this.loading[d]),o()}removeTile(c,o){const d=this.loaded,f=c.uid;d&&d[f]&&delete d[f],o()}},s.WritingMode=Hl,s.ZoomDependentExpression=gc,s.add=Bd,s.addDynamicAttributes=fx,s.adjoint=function(c,o){var d=o[0],f=o[1],g=o[2],b=o[3],w=o[4],E=o[5],I=o[6],D=o[7],z=o[8];return c[0]=w*z-E*D,c[1]=g*D-f*z,c[2]=f*E-g*w,c[3]=E*I-b*z,c[4]=d*z-g*I,c[5]=g*b-d*E,c[6]=b*D-w*I,c[7]=f*I-d*D,c[8]=d*w-f*b,c},s.asyncAll=Le,s.bezier=Ge,s.bindAll=yn,s.boundsAttributes=sR,s.bufferConvexPolygon=function(c,o){const d=[];for(let f=0;f<c.length;f++){const g=ve(f-1,-1,c.length-1),b=ve(f+1,-1,c.length-1),w=c[f],E=c[b],I=c[g].sub(w).unit(),D=E.sub(w).unit(),z=D.angleWithSep(I.x,I.y),j=I.add(D).unit().mult(-1*o/Math.sin(z/2));d.push(w.add(j))}return d},s.cacheEntryPossiblyAdded=function(c){Ur++,Ur>cn&&(c.getActor().send("enforceCacheSizeLimit",Wn),Ur=0)},s.calculateGlobeLabelMatrix=function(c,o){const{x:d,y:f}=c.point,g=PM(d,f,c.worldSize/c._pixelsPerMercatorPixel,0,0);return Vm(g,g,uS(ku(o)))},s.calculateGlobeMatrix=function(c){const{x:o,y:d}=c.point,{lng:f,lat:g}=c._center;return PM(o,d,c.worldSize,f,g)},s.calculateGlobeMercatorMatrix=function(c){const o=c.pixelsPerMeter,d=o/Jc(1,c.center.lat),f=Zc(new Float64Array(16));return Pv(f,f,[c.point.x,c.point.y,0]),Bm(f,f,[d,d,o]),Float32Array.from(f)},s.circumferenceAtLatitude=hS,s.clamp=Ae,s.clearTileCache=function(c){if(!On())return;const o=p.caches.delete(Ln);c&&o.catch(c).then((()=>c()))},s.clipLine=UD,s.clone=function(c){var o=new vl(16);return o[0]=c[0],o[1]=c[1],o[2]=c[2],o[3]=c[3],o[4]=c[4],o[5]=c[5],o[6]=c[6],o[7]=c[7],o[8]=c[8],o[9]=c[9],o[10]=c[10],o[11]=c[11],o[12]=c[12],o[13]=c[13],o[14]=c[14],o[15]=c[15],o},s.clone$1=Ee,s.collisionCircleLayout=YW,s.config=T,s.conjugate=function(c,o){return c[0]=-o[0],c[1]=-o[1],c[2]=-o[2],c[3]=o[3],c},s.create=function(){var c=new vl(16);return vl!=Float32Array&&(c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=0,c[12]=0,c[13]=0,c[14]=0),c[0]=1,c[5]=1,c[10]=1,c[15]=1,c},s.create$1=uM,s.createExpression=Tu,s.createLayout=it,s.createStyleLayer=function(c){return c.type==="custom"?new $9(c):new W9[c.type](c)},s.cross=iS,s.degToRad=ne,s.distance=function(c,o){return Math.hypot(o[0]-c[0],o[1]-c[1],o[2]-c[2])},s.div=function(c,o,d){return c[0]=o[0]/d[0],c[1]=o[1]/d[1],c[2]=o[2]/d[2],c},s.dot=bc,s.earthRadius=Nv,s.ease=je,s.easeCubicInOut=Ve,s.ecefToLatLng=function([c,o,d]){const f=Math.hypot(c,o,d),g=Math.atan2(c,d),b=.5*Math.PI-Math.acos(-o/f);return new sr(Se(g),Se(b))},s.emitValidationErrors=Qh,s.endsWith=Mn,s.enforceCacheSizeLimit=function(c){ki(),jt&&jt.then((o=>{o.keys().then((d=>{for(let f=0;f<d.length-c;f++)o.delete(d[f])}))}))},s.evaluateSizeForFeature=tx,s.evaluateSizeForZoom=Ug,s.evaluateVariableOffset=GD,s.evented=S,s.exactEquals=function(c,o){return c[0]===o[0]&&c[1]===o[1]&&c[2]===o[2]&&c[3]===o[3]},s.exactEquals$1=function(c,o){return c[0]===o[0]&&c[1]===o[1]&&c[2]===o[2]},s.exported=To,s.exported$1=k,s.extend=ct,s.extend$1=ca,s.fillExtrusionHeightLift=uD,s.filterObject=ze,s.fromMat4=function(c,o){return c[0]=o[0],c[1]=o[1],c[2]=o[2],c[3]=o[4],c[4]=o[5],c[5]=o[6],c[6]=o[8],c[7]=o[9],c[8]=o[10],c},s.fromQuat=function(c,o){var d=o[0],f=o[1],g=o[2],b=o[3],w=d+d,E=f+f,I=g+g,D=d*w,z=f*w,j=f*E,K=g*w,ie=g*E,oe=g*I,de=b*w,xe=b*E,De=b*I;return c[0]=1-j-oe,c[1]=z+De,c[2]=K-xe,c[3]=0,c[4]=z-De,c[5]=1-D-oe,c[6]=ie+de,c[7]=0,c[8]=K+xe,c[9]=ie-de,c[10]=1-D-j,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c},s.fromRotation=function(c,o){var d=Math.sin(o),f=Math.cos(o);return c[0]=f,c[1]=d,c[2]=0,c[3]=-d,c[4]=f,c[5]=0,c[6]=0,c[7]=0,c[8]=1,c},s.fromScaling=hM,s.furthestTileCorner=function(c){const o=Math.round((c+45+360)%360/90)%4;return Fe[o]},s.getAABBPointSquareDist=function(c,o,d){let f=0;for(let g=0;g<2;++g){const b=d?d[g]:0;c[g]>b&&(f+=(c[g]-b)*(c[g]-b)),o[g]<b&&(f+=(b-o[g])*(b-o[g]))}return f},s.getAnchorAlignment=VS,s.getAnchorJustification=zS,s.getBounds=function(c){let o=1/0,d=1/0,f=-1/0,g=-1/0;for(const b of c)o=Math.min(o,b.x),d=Math.min(d,b.y),f=Math.max(f,b.x),g=Math.max(g,b.y);return{min:new W(o,d),max:new W(f,g)}},s.getColumn=An,s.getDefaultExportFromCjs=J,s.getGridMatrix=function(c,o,d,f){const g=o.getNorth(),b=o.getSouth(),w=o.getWest(),E=o.getEast(),I=1<<c.z,D=E-w,z=g-b,j=D/zm,K=-z/Bv[d],ie=[0,j,0,K,0,0,g,w,0];if(c.z>0){const oe=180/f;dM(ie,ie,[oe/D+1,0,0,0,oe/z+1,0,-.5*oe/j,.5*oe/K,1])}return ie[2]=I,ie[5]=c.x,ie[8]=c.y,ie},s.getImage=Oe,s.getJSON=function(c,o){return No(ct(c,{type:"json"}),o)},s.getLatitudinalLod=function(c){const o=Do-5;c=Ae(c,-o,o)/o*90;const d=Math.pow(Math.abs(Math.sin(ne(c))),3);return Math.round(d*(Bv.length-1))},s.getMapSessionAPI=ts,s.getPerformanceMeasurement=la,s.getProjection=eR,s.getRTLTextPluginStatus=C,s.getReferrer=yr,s.getTilePoint=function(c,{x:o,y:d},f=0){return new W(((o-f)*c.scale-c.x)*Bn,(d*c.scale-c.y)*Bn)},s.getTileVec3=function(c,o,d=0){return Dg(((o.x-d)*c.scale-c.x)*Bn,(o.y*c.scale-c.y)*Bn,LM(o.z,o.y))},s.getVideo=function(c,o){const d=p.document.createElement("video");d.muted=!0,d.onloadstart=function(){o(null,d)};for(let f=0;f<c.length;f++){const g=p.document.createElement("source");Vc(c[f])||(d.crossOrigin="Anonymous"),g.src=c[f],d.appendChild(g)}return{cancel:()=>{}}},s.globeCenterToScreenPoint=function(c){const o=[0,0,0],d=Zc(new Float64Array(16));return Vm(d,c.pixelMatrix,c.globeMatrix),rs(o,o,d),new W(o[0],o[1])},s.globeDenormalizeECEF=uS,s.globeECEFOrigin=function(c,o){const d=[0,0,0];return rs(d,d,zv(ku(o.canonical))),rs(d,d,c),d},s.globeMetersToEcef=z0,s.globeNormalizeECEF=zv,s.globePixelsToTileUnits=function(c,o){return Bn/(512*Math.pow(2,c))*U0(ku(o))},s.globePoleMatrixForTile=function(c,o,d){const f=Zc(new Float64Array(16)),g=(o/(1<<c)-.5)*Math.PI*2;return F0(f,d.globeMatrix,g),Float32Array.from(f)},s.globeTileBounds=ku,s.globeTiltAtLngLat=MM,s.globeToMercatorTransition=Og,s.globeUseCustomAntiAliasing=function(c,o,d){const f=Og(d.zoom),g=c.style.map._antialias,b=!!o.extStandardDerivatives,w=o.extStandardDerivativesForceOff||c.terrain&&c.terrain.exaggeration()>0;return f===0&&!g&&!w&&b},s.identity=Zc,s.identity$1=bM,s.invert=QT,s.isFullscreen=function(){return!!p.document.fullscreenElement||!!p.document.webkitFullscreenElement},s.isLngLatBehindGlobe=dS,s.isMapAuthenticated=function(c){return Dr.has(c)},s.isMapboxURL=tt,s.isSafariWithAntialiasingBug=function(c){const o=c.navigator?c.navigator.userAgent:null;return!!En(c)&&o&&(o.match("Version/15.4")||o.match("Version/15.5")||o.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},s.latFromMercatorY=Mo,s.latLngToECEF=Lg,s.len=z8,s.length=Mv,s.length$1=function(c){return Math.hypot(c[0],c[1],c[2],c[3])},s.lngFromMercatorX=Wl,s.loadVectorTile=TR,s.makeRequest=No,s.mapValue=function(c,o,d,f,g){return Ae((c-o)/(d-o)*(g-f)+f,f,g)},s.mercatorScale=OM,s.mercatorXfromLng=Iu,s.mercatorYfromLat=Au,s.mercatorZfromAltitude=Jc,s.mul=B8,s.mul$1=F8,s.multiply=Vm,s.multiply$1=dM,s.multiply$2=pM,s.nextPowerOfTwo=Ct,s.normalize=ya,s.normalize$1=N8,s.normalize$2=vM,s.number=Yn,s.ortho=function(c,o,d,f,g,b,w){var E=1/(o-d),I=1/(f-g),D=1/(b-w);return c[0]=-2*E,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=-2*I,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=2*D,c[11]=0,c[12]=(o+d)*E,c[13]=(g+f)*I,c[14]=(w+b)*D,c[15]=1,c},s.pbf=bD,s.perspective=function(c,o,d,f,g){var b,w=1/Math.tan(o/2);return c[0]=w/d,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=w,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=-1,c[12]=0,c[13]=0,c[15]=0,g!=null&&g!==1/0?(c[10]=(g+f)*(b=1/(f-g)),c[14]=2*g*f*b):(c[10]=-1,c[14]=-2*f),c},s.pick=function(c,o){const d={};for(let f=0;f<o.length;f++){const g=o[f];g in c&&(d[g]=c[g])}return d},s.plugin=O,s.pointGeometry=$,s.polesInViewport=function(c){const o=Zc(new Float64Array(16));Vm(o,c.pixelMatrix,c.globeMatrix);const d=[0,xc,0],f=[0,wc,0];return rs(d,d,o),rs(f,f,o),[d[0]>0&&d[0]<=c.width&&d[1]>0&&d[1]<=c.height&&!dS(c,new sr(c.center.lat,90)),f[0]>0&&f[0]<=c.width&&f[1]>0&&f[1]<=c.height&&!dS(c,new sr(c.center.lat,-90))]},s.polygonContainsPoint=$m,s.polygonIntersectsBox=$M,s.polygonIntersectsPolygon=FM,s.polygonizeBounds=function(c,o,d=0,f=!0){const g=new W(d,d),b=c.sub(g),w=o.add(g),E=[b,new W(w.x,b.y),w,new W(b.x,w.y)];return f&&E.push(b.clone()),E},s.posAttributes=Vv,s.postMapLoadEvent=hr,s.postPerformanceEvent=br,s.postTurnstileEvent=Kn,s.potpack=RS,s.prevPowerOfTwo=function(c){return c<=1?1:Math.pow(2,Math.floor(Math.log(c)/Math.LN2))},s.radToDeg=Se,s.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],s.registerForPluginStateChange=function(c){return c({pluginStatus:_,pluginURL:u}),S.on("pluginStateChange",c),c},s.removeAuthState=function(c){Dr.delete(c)},s.renderColorRamp=bS,s.resample=VM,s.rotateX=eS,s.rotateX$1=xM,s.rotateY=F0,s.rotateY$1=wM,s.rotateZ=function(c,o,d){var f=Math.sin(d),g=Math.cos(d),b=o[0],w=o[1],E=o[2],I=o[3],D=o[4],z=o[5],j=o[6],K=o[7];return o!==c&&(c[8]=o[8],c[9]=o[9],c[10]=o[10],c[11]=o[11],c[12]=o[12],c[13]=o[13],c[14]=o[14],c[15]=o[15]),c[0]=b*g+D*f,c[1]=w*g+z*f,c[2]=E*g+j*f,c[3]=I*g+K*f,c[4]=D*g-b*f,c[5]=z*g-w*f,c[6]=j*g-E*f,c[7]=K*g-I*f,c},s.rotateZ$1=function(c,o,d){d*=.5;var f=o[0],g=o[1],b=o[2],w=o[3],E=Math.sin(d),I=Math.cos(d);return c[0]=f*I+g*E,c[1]=g*I-f*E,c[2]=b*I+w*E,c[3]=w*I-b*E,c},s.scale=Bm,s.scale$1=_M,s.scale$2=jl,s.scaleAndAdd=Lv,s.set=function(c,o,d,f){return c[0]=o,c[1]=d,c[2]=f,c},s.setCacheLimits=function(c,o){Wn=c,cn=o},s.setColumn=function(c,o,d){c[4*o+0]=d[0],c[4*o+1]=d[1],c[4*o+2]=d[2],c[4*o+3]=d[3]},s.setRTLTextPlugin=function(c,o,d=!1){if(_===pe||_===V||_===se)throw new Error("setRTLTextPlugin cannot be called multiple times.");u=To.resolveURL(c),_=pe,ke=o,y(),d||R()},s.smoothstep=Ke,s.spec=Mt,s.squaredLength=function(c){var o=c[0],d=c[1],f=c[2];return o*o+d*d+f*f},s.storeAuthState=function(c,o){o?Dr.add(c):Dr.delete(c)},s.sub=Yc,s.subtract=nS,s.symbolSize=JW,s.tileAABB=function(c,o,d,f,g,b,w,E,I){if(I.name==="globe")return H8(c,o,new Q0(d,f,g));const D=Wm({z:d,x:f,y:g},I);return new ba([(b+D.x/D.scale)*o,o*(D.y/D.scale),w],[(b+D.x2/D.scale)*o,o*(D.y2/D.scale),E])},s.tileCornersToBounds=N0,s.tileTransform=Wm,s.transformMat3=function(c,o,d){var f=o[0],g=o[1],b=o[2];return c[0]=f*d[0]+g*d[3]+b*d[6],c[1]=f*d[1]+g*d[4]+b*d[7],c[2]=f*d[2]+g*d[5]+b*d[8],c},s.transformMat4=rs,s.transformMat4$1=Fm,s.transformQuat=gM,s.transitionTileAABBinECEF=kM,s.translate=Pv,s.transpose=function(c,o){if(c===o){var d=o[1],f=o[2],g=o[5];c[1]=o[3],c[2]=o[6],c[3]=d,c[5]=o[7],c[6]=f,c[7]=g}else c[0]=o[0],c[1]=o[3],c[2]=o[6],c[3]=o[1],c[4]=o[4],c[5]=o[7],c[6]=o[2],c[7]=o[5],c[8]=o[8];return c},s.triggerPluginCompletionEvent=m,s.uniqueId=rt,s.updateGlobeVertexNormal=function(c,o,d,f,g){const b=5*o+2;c.float32[b+0]=d,c.float32[b+1]=f,c.float32[b+2]=g},s.validateCustomStyleLayer=function(c){const o=[],d=c.id;return d===void 0&&o.push({message:`layers.${d}: missing required property "id"`}),c.render===void 0&&o.push({message:`layers.${d}: missing required method "render"`}),c.renderingMode&&c.renderingMode!=="2d"&&c.renderingMode!=="3d"&&o.push({message:`layers.${d}: property "renderingMode" must be either "2d" or "3d"`}),o},s.validateFilter=c=>Yo(Ad(c)),s.validateFog=c=>Yo(Eg(c)),s.validateLayer=c=>Yo(xg(c)),s.validateLight=c=>Yo(Sg(c)),s.validateSource=c=>Yo(Tg(c)),s.validateStyle=yc,s.validateTerrain=c=>Yo(Jh(c)),s.values=We,s.vectorTile=Z0,s.version=v,s.warnOnce=dt,s.window=p,s.wrap=ve})),l(["./shared"],(function(s){function p(Be){if(typeof Be=="number"||typeof Be=="boolean"||typeof Be=="string"||Be==null)return JSON.stringify(Be);if(Array.isArray(Be)){let ge="[";for(const Oe of Be)ge+=`${p(Oe)},`;return`${ge}]`}let me="{";for(const ge of Object.keys(Be).sort())me+=`${ge}:${p(Be[ge])},`;return`${me}}`}function v(Be){let me="";for(const ge of s.refProperties)me+=`/${p(Be[ge])}`;return me}class x{constructor(me){this.keyCache={},me&&this.replace(me)}replace(me){this._layerConfigs={},this._layers={},this.update(me,[])}update(me,ge){for(const Xe of me)this._layerConfigs[Xe.id]=Xe,(this._layers[Xe.id]=s.createStyleLayer(Xe)).compileFilter(),this.keyCache[Xe.id]&&delete this.keyCache[Xe.id];for(const Xe of ge)delete this.keyCache[Xe],delete this._layerConfigs[Xe],delete this._layers[Xe];this.familiesBySource={};const Oe=(function(Xe,tt){const gt={};for(let et=0;et<Xe.length;et++){const wt=tt&&tt[Xe[et].id]||v(Xe[et]);tt&&(tt[Xe[et].id]=wt);let Zt=gt[wt];Zt||(Zt=gt[wt]=[]),Zt.push(Xe[et])}const ft=[];for(const et in gt)ft.push(gt[et]);return ft})(s.values(this._layerConfigs),this.keyCache);for(const Xe of Oe){const tt=Xe.map((on=>this._layers[on.id])),gt=tt[0];if(gt.visibility==="none")continue;const ft=gt.source||"";let et=this.familiesBySource[ft];et||(et=this.familiesBySource[ft]={});const wt=gt.sourceLayer||"_geojsonTileLayer";let Zt=et[wt];Zt||(Zt=et[wt]=[]),Zt.push(tt)}}}class T{loadTile(me,ge){const{uid:Oe,encoding:Xe,rawImageData:tt,padding:gt,buildQuadTree:ft}=me,et=s.window.ImageBitmap&&tt instanceof s.window.ImageBitmap?this.getImageData(tt,gt):tt;ge(null,new s.DEMData(Oe,et,Xe,gt<1,ft))}getImageData(me,ge){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(me.width,me.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=me.width,this.offscreenCanvas.height=me.height,this.offscreenCanvasContext.drawImage(me,0,0,me.width,me.height);const Oe=this.offscreenCanvasContext.getImageData(-ge,-ge,me.width+2*ge,me.height+2*ge);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),Oe}}function k(Be,me){if(Be.length!==0){P(Be[0],me);for(var ge=1;ge<Be.length;ge++)P(Be[ge],!me)}}function P(Be,me){for(var ge=0,Oe=0,Xe=0,tt=Be.length,gt=tt-1;Xe<tt;gt=Xe++){var ft=(Be[Xe][0]-Be[gt][0])*(Be[gt][1]+Be[Xe][1]),et=ge+ft;Oe+=Math.abs(ge)>=Math.abs(ft)?ge-et+ft:ft-et+ge,ge=et}ge+Oe>=0!=!!me&&Be.reverse()}var M=s.getDefaultExportFromCjs((function Be(me,ge){var Oe,Xe=me&&me.type;if(Xe==="FeatureCollection")for(Oe=0;Oe<me.features.length;Oe++)Be(me.features[Oe],ge);else if(Xe==="GeometryCollection")for(Oe=0;Oe<me.geometries.length;Oe++)Be(me.geometries[Oe],ge);else if(Xe==="Feature")Be(me.geometry,ge);else if(Xe==="Polygon")k(me.coordinates,ge);else if(Xe==="MultiPolygon")for(Oe=0;Oe<me.coordinates.length;Oe++)k(me.coordinates[Oe],ge);return me}));const L=s.VectorTileFeature.prototype.toGeoJSON;var B={exports:{}},F=s.pointGeometry,X=s.vectorTile.VectorTileFeature,J=Q;function Q(Be,me){this.options=me||{},this.features=Be,this.length=Be.length}function re(Be,me){this.id=typeof Be.id=="number"?Be.id:void 0,this.type=Be.type,this.rawGeometry=Be.type===1?[Be.geometry]:Be.geometry,this.properties=Be.tags,this.extent=me||4096}Q.prototype.feature=function(Be){return new re(this.features[Be],this.options.extent)},re.prototype.loadGeometry=function(){var Be=this.rawGeometry;this.geometry=[];for(var me=0;me<Be.length;me++){for(var ge=Be[me],Oe=[],Xe=0;Xe<ge.length;Xe++)Oe.push(new F(ge[Xe][0],ge[Xe][1]));this.geometry.push(Oe)}return this.geometry},re.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Be=this.geometry,me=1/0,ge=-1/0,Oe=1/0,Xe=-1/0,tt=0;tt<Be.length;tt++)for(var gt=Be[tt],ft=0;ft<gt.length;ft++){var et=gt[ft];me=Math.min(me,et.x),ge=Math.max(ge,et.x),Oe=Math.min(Oe,et.y),Xe=Math.max(Xe,et.y)}return[me,Oe,ge,Xe]},re.prototype.toGeoJSON=X.prototype.toGeoJSON;var Z=s.pbf,$=J;function H(Be){var me=new Z;return(function(ge,Oe){for(var Xe in ge.layers)Oe.writeMessage(3,W,ge.layers[Xe])})(Be,me),me.finish()}function W(Be,me){var ge;me.writeVarintField(15,Be.version||1),me.writeStringField(1,Be.name||""),me.writeVarintField(5,Be.extent||4096);var Oe={keys:[],values:[],keycache:{},valuecache:{}};for(ge=0;ge<Be.length;ge++)Oe.feature=Be.feature(ge),me.writeMessage(2,te,Oe);var Xe=Oe.keys;for(ge=0;ge<Xe.length;ge++)me.writeStringField(3,Xe[ge]);var tt=Oe.values;for(ge=0;ge<tt.length;ge++)me.writeMessage(4,Ve,tt[ge])}function te(Be,me){var ge=Be.feature;ge.id!==void 0&&me.writeVarintField(1,ge.id),me.writeMessage(2,Y,Be),me.writeVarintField(3,ge.type),me.writeMessage(4,Fe,ge)}function Y(Be,me){var ge=Be.feature,Oe=Be.keys,Xe=Be.values,tt=Be.keycache,gt=Be.valuecache;for(var ft in ge.properties){var et=ge.properties[ft],wt=tt[ft];if(et!==null){wt===void 0&&(Oe.push(ft),tt[ft]=wt=Oe.length-1),me.writeVarint(wt);var Zt=typeof et;Zt!=="string"&&Zt!=="boolean"&&Zt!=="number"&&(et=JSON.stringify(et));var on=Zt+":"+et,Yt=gt[on];Yt===void 0&&(Xe.push(et),gt[on]=Yt=Xe.length-1),me.writeVarint(Yt)}}}function ne(Be,me){return(me<<3)+(7&Be)}function Se(Be){return Be<<1^Be>>31}function Fe(Be,me){for(var ge=Be.loadGeometry(),Oe=Be.type,Xe=0,tt=0,gt=ge.length,ft=0;ft<gt;ft++){var et=ge[ft],wt=1;Oe===1&&(wt=et.length),me.writeVarint(ne(1,wt));for(var Zt=Oe===3?et.length-1:et.length,on=0;on<Zt;on++){on===1&&Oe!==1&&me.writeVarint(ne(2,Zt-1));var Yt=et[on].x-Xe,qn=et[on].y-tt;me.writeVarint(Se(Yt)),me.writeVarint(Se(qn)),Xe+=Yt,tt+=qn}Oe===3&&me.writeVarint(ne(7,1))}}function Ve(Be,me){var ge=typeof Be;ge==="string"?me.writeStringField(1,Be):ge==="boolean"?me.writeBooleanField(7,Be):ge==="number"&&(Be%1!=0?me.writeDoubleField(3,Be):Be<0?me.writeSVarintField(6,Be):me.writeVarintField(5,Be))}B.exports=H,B.exports.fromVectorTileJs=H,B.exports.fromGeojsonVt=function(Be,me){me=me||{};var ge={};for(var Oe in Be)ge[Oe]=new $(Be[Oe].features,me),ge[Oe].name=Oe,ge[Oe].version=me.version,ge[Oe].extent=me.extent;return H({layers:ge})},B.exports.GeoJSONWrapper=$;var Ge=s.getDefaultExportFromCjs(B.exports);const je={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Be=>Be},Ae=Math.fround||(Ke=new Float32Array(1),Be=>(Ke[0]=+Be,Ke[0]));var Ke;const ve=3,Le=5,We=6;class ct{constructor(me){this.options=Object.assign(Object.create(je),me),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(me){const{log:ge,minZoom:Oe,maxZoom:Xe}=this.options;ge&&console.time("total time");const tt=`prepare ${me.length} points`;ge&&console.time(tt),this.points=me;const gt=[];for(let et=0;et<me.length;et++){const wt=me[et];if(!wt.geometry)continue;const[Zt,on]=wt.geometry.coordinates,Yt=Ae(Qe(Zt)),qn=Ae(Ct(on));gt.push(Yt,qn,1/0,et,-1,1),this.options.reduce&&gt.push(0)}let ft=this.trees[Xe+1]=this._createTree(gt);ge&&console.timeEnd(tt);for(let et=Xe;et>=Oe;et--){const wt=+Date.now();ft=this.trees[et]=this._createTree(this._cluster(ft,et)),ge&&console.log("z%d: %d clusters in %dms",et,ft.numItems,+Date.now()-wt)}return ge&&console.timeEnd("total time"),this}getClusters(me,ge){let Oe=((me[0]+180)%360+360)%360-180;const Xe=Math.max(-90,Math.min(90,me[1]));let tt=me[2]===180?180:((me[2]+180)%360+360)%360-180;const gt=Math.max(-90,Math.min(90,me[3]));if(me[2]-me[0]>=360)Oe=-180,tt=180;else if(Oe>tt){const on=this.getClusters([Oe,Xe,180,gt],ge),Yt=this.getClusters([-180,Xe,tt,gt],ge);return on.concat(Yt)}const ft=this.trees[this._limitZoom(ge)],et=ft.range(Qe(Oe),Ct(gt),Qe(tt),Ct(Xe)),wt=ft.data,Zt=[];for(const on of et){const Yt=this.stride*on;Zt.push(wt[Yt+Le]>1?ut(wt,Yt,this.clusterProps):this.points[wt[Yt+ve]])}return Zt}getChildren(me){const ge=this._getOriginId(me),Oe=this._getOriginZoom(me),Xe="No cluster with the specified id.",tt=this.trees[Oe];if(!tt)throw new Error(Xe);const gt=tt.data;if(ge*this.stride>=gt.length)throw new Error(Xe);const ft=this.options.radius/(this.options.extent*Math.pow(2,Oe-1)),et=tt.within(gt[ge*this.stride],gt[ge*this.stride+1],ft),wt=[];for(const Zt of et){const on=Zt*this.stride;gt[on+4]===me&&wt.push(gt[on+Le]>1?ut(gt,on,this.clusterProps):this.points[gt[on+ve]])}if(wt.length===0)throw new Error(Xe);return wt}getLeaves(me,ge,Oe){const Xe=[];return this._appendLeaves(Xe,me,ge=ge||10,Oe=Oe||0,0),Xe}getTile(me,ge,Oe){const Xe=this.trees[this._limitZoom(me)],tt=Math.pow(2,me),{extent:gt,radius:ft}=this.options,et=ft/gt,wt=(Oe-et)/tt,Zt=(Oe+1+et)/tt,on={features:[]};return this._addTileFeatures(Xe.range((ge-et)/tt,wt,(ge+1+et)/tt,Zt),Xe.data,ge,Oe,tt,on),ge===0&&this._addTileFeatures(Xe.range(1-et/tt,wt,1,Zt),Xe.data,tt,Oe,tt,on),ge===tt-1&&this._addTileFeatures(Xe.range(0,wt,et/tt,Zt),Xe.data,-1,Oe,tt,on),on.features.length?on:null}getClusterExpansionZoom(me){let ge=this._getOriginZoom(me)-1;for(;ge<=this.options.maxZoom;){const Oe=this.getChildren(me);if(ge++,Oe.length!==1)break;me=Oe[0].properties.cluster_id}return ge}_appendLeaves(me,ge,Oe,Xe,tt){const gt=this.getChildren(ge);for(const ft of gt){const et=ft.properties;if(et&&et.cluster?tt+et.point_count<=Xe?tt+=et.point_count:tt=this._appendLeaves(me,et.cluster_id,Oe,Xe,tt):tt<Xe?tt++:me.push(ft),me.length===Oe)break}return tt}_createTree(me){const ge=new s.KDBush(me.length/this.stride|0,this.options.nodeSize,Float32Array);for(let Oe=0;Oe<me.length;Oe+=this.stride)ge.add(me[Oe],me[Oe+1]);return ge.finish(),ge.data=me,ge}_addTileFeatures(me,ge,Oe,Xe,tt,gt){for(const ft of me){const et=ft*this.stride,wt=ge[et+Le]>1;let Zt,on,Yt;if(wt)Zt=rt(ge,et,this.clusterProps),on=ge[et],Yt=ge[et+1];else{const Un=this.points[ge[et+ve]];Zt=Un.properties;const[oi,Kn]=Un.geometry.coordinates;on=Qe(oi),Yt=Ct(Kn)}const qn={type:1,geometry:[[Math.round(this.options.extent*(on*tt-Oe)),Math.round(this.options.extent*(Yt*tt-Xe))]],tags:Zt};let Zn;Zn=wt||this.options.generateId?ge[et+ve]:this.points[ge[et+ve]].id,Zn!==void 0&&(qn.id=Zn),gt.features.push(qn)}}_limitZoom(me){return Math.max(this.options.minZoom,Math.min(Math.floor(+me),this.options.maxZoom+1))}_cluster(me,ge){const{radius:Oe,extent:Xe,reduce:tt,minPoints:gt}=this.options,ft=Oe/(Xe*Math.pow(2,ge)),et=me.data,wt=[],Zt=this.stride;for(let on=0;on<et.length;on+=Zt){if(et[on+2]<=ge)continue;et[on+2]=ge;const Yt=et[on],qn=et[on+1],Zn=me.within(et[on],et[on+1],ft),Un=et[on+Le];let oi=Un;for(const Kn of Zn){const Pi=Kn*Zt;et[Pi+2]>ge&&(oi+=et[Pi+Le])}if(oi>Un&&oi>=gt){let Kn,Pi=Yt*Un,hr=qn*Un,es=-1;const br=((on/Zt|0)<<5)+(ge+1)+this.points.length;for(const Uo of Zn){const ts=Uo*Zt;if(et[ts+2]<=ge)continue;et[ts+2]=ge;const Dr=et[ts+Le];Pi+=et[ts]*Dr,hr+=et[ts+1]*Dr,et[ts+4]=br,tt&&(Kn||(Kn=this._map(et,on,!0),es=this.clusterProps.length,this.clusterProps.push(Kn)),tt(Kn,this._map(et,ts)))}et[on+4]=br,wt.push(Pi/oi,hr/oi,1/0,br,-1,oi),tt&&wt.push(es)}else{for(let Kn=0;Kn<Zt;Kn++)wt.push(et[on+Kn]);if(oi>1)for(const Kn of Zn){const Pi=Kn*Zt;if(!(et[Pi+2]<=ge)){et[Pi+2]=ge;for(let hr=0;hr<Zt;hr++)wt.push(et[Pi+hr])}}}}return wt}_getOriginId(me){return me-this.points.length>>5}_getOriginZoom(me){return(me-this.points.length)%32}_map(me,ge,Oe){if(me[ge+Le]>1){const gt=this.clusterProps[me[ge+We]];return Oe?Object.assign({},gt):gt}const Xe=this.points[me[ge+ve]].properties,tt=this.options.map(Xe);return Oe&&tt===Xe?Object.assign({},tt):tt}}function ut(Be,me,ge){return{type:"Feature",id:Be[me+ve],properties:rt(Be,me,ge),geometry:{type:"Point",coordinates:[(Oe=Be[me],360*(Oe-.5)),At(Be[me+1])]}};var Oe}function rt(Be,me,ge){const Oe=Be[me+Le],Xe=Oe>=1e4?`${Math.round(Oe/1e3)}k`:Oe>=1e3?Math.round(Oe/100)/10+"k":Oe,tt=Be[me+We],gt=tt===-1?{}:Object.assign({},ge[tt]);return Object.assign(gt,{cluster:!0,cluster_id:Be[me+ve],point_count:Oe,point_count_abbreviated:Xe})}function Qe(Be){return Be/360+.5}function Ct(Be){const me=Math.sin(Be*Math.PI/180),ge=.5-.25*Math.log((1+me)/(1-me))/Math.PI;return ge<0?0:ge>1?1:ge}function At(Be){const me=(180-360*Be)*Math.PI/180;return 360*Math.atan(Math.exp(me))/Math.PI-90}function yn(Be,me,ge,Oe){for(var Xe,tt=Oe,gt=ge-me>>1,ft=ge-me,et=Be[me],wt=Be[me+1],Zt=Be[ge],on=Be[ge+1],Yt=me+3;Yt<ge;Yt+=3){var qn=Mn(Be[Yt],Be[Yt+1],et,wt,Zt,on);if(qn>tt)Xe=Yt,tt=qn;else if(qn===tt){var Zn=Math.abs(Yt-gt);Zn<ft&&(Xe=Yt,ft=Zn)}}tt>Oe&&(Xe-me>3&&yn(Be,me,Xe,Oe),Be[Xe+2]=tt,ge-Xe>3&&yn(Be,Xe,ge,Oe))}function Mn(Be,me,ge,Oe,Xe,tt){var gt=Xe-ge,ft=tt-Oe;if(gt!==0||ft!==0){var et=((Be-ge)*gt+(me-Oe)*ft)/(gt*gt+ft*ft);et>1?(ge=Xe,Oe=tt):et>0&&(ge+=gt*et,Oe+=ft*et)}return(gt=Be-ge)*gt+(ft=me-Oe)*ft}function Ce(Be,me,ge,Oe){var Xe={id:Be===void 0?null:Be,type:me,geometry:ge,tags:Oe,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return(function(tt){var gt=tt.geometry,ft=tt.type;if(ft==="Point"||ft==="MultiPoint"||ft==="LineString")ze(tt,gt);else if(ft==="Polygon"||ft==="MultiLineString")for(var et=0;et<gt.length;et++)ze(tt,gt[et]);else if(ft==="MultiPolygon")for(et=0;et<gt.length;et++)for(var wt=0;wt<gt[et].length;wt++)ze(tt,gt[et][wt])})(Xe),Xe}function ze(Be,me){for(var ge=0;ge<me.length;ge+=3)Be.minX=Math.min(Be.minX,me[ge]),Be.minY=Math.min(Be.minY,me[ge+1]),Be.maxX=Math.max(Be.maxX,me[ge]),Be.maxY=Math.max(Be.maxY,me[ge+1])}function Ee(Be,me,ge,Oe){if(me.geometry){var Xe=me.geometry.coordinates,tt=me.geometry.type,gt=Math.pow(ge.tolerance/((1<<ge.maxZoom)*ge.extent),2),ft=[],et=me.id;if(ge.promoteId?et=me.properties[ge.promoteId]:ge.generateId&&(et=Oe||0),tt==="Point")pt(Xe,ft);else if(tt==="MultiPoint")for(var wt=0;wt<Xe.length;wt++)pt(Xe[wt],ft);else if(tt==="LineString")dt(Xe,ft,gt,!1);else if(tt==="MultiLineString"){if(ge.lineMetrics){for(wt=0;wt<Xe.length;wt++)dt(Xe[wt],ft=[],gt,!1),Be.push(Ce(et,"LineString",ft,me.properties));return}nt(Xe,ft,gt,!1)}else if(tt==="Polygon")nt(Xe,ft,gt,!0);else{if(tt!=="MultiPolygon"){if(tt==="GeometryCollection"){for(wt=0;wt<me.geometry.geometries.length;wt++)Ee(Be,{id:et,geometry:me.geometry.geometries[wt],properties:me.properties},ge,Oe);return}throw new Error("Input data is not a valid GeoJSON object.")}for(wt=0;wt<Xe.length;wt++){var Zt=[];nt(Xe[wt],Zt,gt,!0),ft.push(Zt)}}Be.push(Ce(et,tt,ft,me.properties))}}function pt(Be,me){me.push(Et(Be[0])),me.push(Dt(Be[1])),me.push(0)}function dt(Be,me,ge,Oe){for(var Xe,tt,gt=0,ft=0;ft<Be.length;ft++){var et=Et(Be[ft][0]),wt=Dt(Be[ft][1]);me.push(et),me.push(wt),me.push(0),ft>0&&(gt+=Oe?(Xe*wt-et*tt)/2:Math.sqrt(Math.pow(et-Xe,2)+Math.pow(wt-tt,2))),Xe=et,tt=wt}var Zt=me.length-3;me[2]=1,yn(me,0,Zt,ge),me[Zt+2]=1,me.size=Math.abs(gt),me.start=0,me.end=me.size}function nt(Be,me,ge,Oe){for(var Xe=0;Xe<Be.length;Xe++){var tt=[];dt(Be[Xe],tt,ge,Oe),me.push(tt)}}function Et(Be){return Be/360+.5}function Dt(Be){var me=Math.sin(Be*Math.PI/180),ge=.5-.25*Math.log((1+me)/(1-me))/Math.PI;return ge<0?0:ge>1?1:ge}function Ft(Be,me,ge,Oe,Xe,tt,gt,ft){if(Oe/=me,tt>=(ge/=me)&&gt<Oe)return Be;if(gt<ge||tt>=Oe)return null;for(var et=[],wt=0;wt<Be.length;wt++){var Zt=Be[wt],on=Zt.geometry,Yt=Zt.type,qn=Xe===0?Zt.minX:Zt.minY,Zn=Xe===0?Zt.maxX:Zt.maxY;if(qn>=ge&&Zn<Oe)et.push(Zt);else if(!(Zn<ge||qn>=Oe)){var Un=[];if(Yt==="Point"||Yt==="MultiPoint")Gt(on,Un,ge,Oe,Xe);else if(Yt==="LineString")En(on,Un,ge,Oe,Xe,!1,ft.lineMetrics);else if(Yt==="MultiLineString")An(on,Un,ge,Oe,Xe,!1);else if(Yt==="Polygon")An(on,Un,ge,Oe,Xe,!0);else if(Yt==="MultiPolygon")for(var oi=0;oi<on.length;oi++){var Kn=[];An(on[oi],Kn,ge,Oe,Xe,!0),Kn.length&&Un.push(Kn)}if(Un.length){if(ft.lineMetrics&&Yt==="LineString"){for(oi=0;oi<Un.length;oi++)et.push(Ce(Zt.id,Yt,Un[oi],Zt.tags));continue}Yt!=="LineString"&&Yt!=="MultiLineString"||(Un.length===1?(Yt="LineString",Un=Un[0]):Yt="MultiLineString"),Yt!=="Point"&&Yt!=="MultiPoint"||(Yt=Un.length===3?"Point":"MultiPoint"),et.push(Ce(Zt.id,Yt,Un,Zt.tags))}}}return et.length?et:null}function Gt(Be,me,ge,Oe,Xe){for(var tt=0;tt<Be.length;tt+=3){var gt=Be[tt+Xe];gt>=ge&&gt<=Oe&&(me.push(Be[tt]),me.push(Be[tt+1]),me.push(Be[tt+2]))}}function En(Be,me,ge,Oe,Xe,tt,gt){for(var ft,et,wt=en(Be),Zt=Xe===0?Wn:cn,on=Be.start,Yt=0;Yt<Be.length-3;Yt+=3){var qn=Be[Yt],Zn=Be[Yt+1],Un=Be[Yt+2],oi=Be[Yt+3],Kn=Be[Yt+4],Pi=Xe===0?qn:Zn,hr=Xe===0?oi:Kn,es=!1;gt&&(ft=Math.sqrt(Math.pow(qn-oi,2)+Math.pow(Zn-Kn,2))),Pi<ge?hr>ge&&(et=Zt(wt,qn,Zn,oi,Kn,ge),gt&&(wt.start=on+ft*et)):Pi>Oe?hr<Oe&&(et=Zt(wt,qn,Zn,oi,Kn,Oe),gt&&(wt.start=on+ft*et)):Ln(wt,qn,Zn,Un),hr<ge&&Pi>=ge&&(et=Zt(wt,qn,Zn,oi,Kn,ge),es=!0),hr>Oe&&Pi<=Oe&&(et=Zt(wt,qn,Zn,oi,Kn,Oe),es=!0),!tt&&es&&(gt&&(wt.end=on+ft*et),me.push(wt),wt=en(Be)),gt&&(on+=ft)}var br=Be.length-3;qn=Be[br],Zn=Be[br+1],Un=Be[br+2],(Pi=Xe===0?qn:Zn)>=ge&&Pi<=Oe&&Ln(wt,qn,Zn,Un),br=wt.length-3,tt&&br>=3&&(wt[br]!==wt[0]||wt[br+1]!==wt[1])&&Ln(wt,wt[0],wt[1],wt[2]),wt.length&&me.push(wt)}function en(Be){var me=[];return me.size=Be.size,me.start=Be.start,me.end=Be.end,me}function An(Be,me,ge,Oe,Xe,tt){for(var gt=0;gt<Be.length;gt++)En(Be[gt],me,ge,Oe,Xe,tt,!1)}function Ln(Be,me,ge,Oe){Be.push(me),Be.push(ge),Be.push(Oe)}function Wn(Be,me,ge,Oe,Xe,tt){var gt=(tt-me)/(Oe-me);return Be.push(tt),Be.push(ge+(Xe-ge)*gt),Be.push(1),gt}function cn(Be,me,ge,Oe,Xe,tt){var gt=(tt-ge)/(Xe-ge);return Be.push(me+(Oe-me)*gt),Be.push(tt),Be.push(1),gt}function jt(Be,me){for(var ge=[],Oe=0;Oe<Be.length;Oe++){var Xe,tt=Be[Oe],gt=tt.type;if(gt==="Point"||gt==="MultiPoint"||gt==="LineString")Xe=Tn(tt.geometry,me);else if(gt==="MultiLineString"||gt==="Polygon"){Xe=[];for(var ft=0;ft<tt.geometry.length;ft++)Xe.push(Tn(tt.geometry[ft],me))}else if(gt==="MultiPolygon")for(Xe=[],ft=0;ft<tt.geometry.length;ft++){for(var et=[],wt=0;wt<tt.geometry[ft].length;wt++)et.push(Tn(tt.geometry[ft][wt],me));Xe.push(et)}ge.push(Ce(tt.id,gt,Xe,tt.tags))}return ge}function Tn(Be,me){var ge=[];ge.size=Be.size,Be.start!==void 0&&(ge.start=Be.start,ge.end=Be.end);for(var Oe=0;Oe<Be.length;Oe+=3)ge.push(Be[Oe]+me,Be[Oe+1],Be[Oe+2]);return ge}function On(Be,me){if(Be.transformed)return Be;var ge,Oe,Xe,tt=1<<Be.z,gt=Be.x,ft=Be.y;for(ge=0;ge<Be.features.length;ge++){var et=Be.features[ge],wt=et.geometry,Zt=et.type;if(et.geometry=[],Zt===1)for(Oe=0;Oe<wt.length;Oe+=2)et.geometry.push(ki(wt[Oe],wt[Oe+1],me,tt,gt,ft));else for(Oe=0;Oe<wt.length;Oe++){var on=[];for(Xe=0;Xe<wt[Oe].length;Xe+=2)on.push(ki(wt[Oe][Xe],wt[Oe][Xe+1],me,tt,gt,ft));et.geometry.push(on)}}return Be.transformed=!0,Be}function ki(Be,me,ge,Oe,Xe,tt){return[Math.round(ge*(Be*Oe-Xe)),Math.round(ge*(me*Oe-tt))]}function Yi(Be,me,ge,Oe,Xe){for(var tt=me===Xe.maxZoom?0:Xe.tolerance/((1<<me)*Xe.extent),gt={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:ge,y:Oe,z:me,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},ft=0;ft<Be.length;ft++){gt.numFeatures++,Ur(gt,Be[ft],tt,Xe);var et=Be[ft].minX,wt=Be[ft].minY,Zt=Be[ft].maxX,on=Be[ft].maxY;et<gt.minX&&(gt.minX=et),wt<gt.minY&&(gt.minY=wt),Zt>gt.maxX&&(gt.maxX=Zt),on>gt.maxY&&(gt.maxY=on)}return gt}function Ur(Be,me,ge,Oe){var Xe=me.geometry,tt=me.type,gt=[];if(tt==="Point"||tt==="MultiPoint")for(var ft=0;ft<Xe.length;ft+=3)gt.push(Xe[ft]),gt.push(Xe[ft+1]),Be.numPoints++,Be.numSimplified++;else if(tt==="LineString")bo(gt,Xe,Be,ge,!1,!1);else if(tt==="MultiLineString"||tt==="Polygon")for(ft=0;ft<Xe.length;ft++)bo(gt,Xe[ft],Be,ge,tt==="Polygon",ft===0);else if(tt==="MultiPolygon")for(var et=0;et<Xe.length;et++){var wt=Xe[et];for(ft=0;ft<wt.length;ft++)bo(gt,wt[ft],Be,ge,!0,ft===0)}if(gt.length){var Zt=me.tags||null;if(tt==="LineString"&&Oe.lineMetrics){for(var on in Zt={},me.tags)Zt[on]=me.tags[on];Zt.mapbox_clip_start=Xe.start/Xe.size,Zt.mapbox_clip_end=Xe.end/Xe.size}var Yt={geometry:gt,type:tt==="Polygon"||tt==="MultiPolygon"?3:tt==="LineString"||tt==="MultiLineString"?2:1,tags:Zt};me.id!==null&&(Yt.id=me.id),Be.features.push(Yt)}}function bo(Be,me,ge,Oe,Xe,tt){var gt=Oe*Oe;if(Oe>0&&me.size<(Xe?gt:Oe))ge.numPoints+=me.length/3;else{for(var ft=[],et=0;et<me.length;et+=3)(Oe===0||me[et+2]>gt)&&(ge.numSimplified++,ft.push(me[et]),ft.push(me[et+1])),ge.numPoints++;Xe&&(function(wt,Zt){for(var on=0,Yt=0,qn=wt.length,Zn=qn-2;Yt<qn;Zn=Yt,Yt+=2)on+=(wt[Yt]-wt[Zn])*(wt[Yt+1]+wt[Zn+1]);if(on>0===Zt)for(Yt=0,qn=wt.length;Yt<qn/2;Yt+=2){var Un=wt[Yt],oi=wt[Yt+1];wt[Yt]=wt[qn-2-Yt],wt[Yt+1]=wt[qn-1-Yt],wt[qn-2-Yt]=Un,wt[qn-1-Yt]=oi}})(ft,tt),Be.push(ft)}}function nr(Be,me){var ge=(me=this.options=(function(Xe,tt){for(var gt in tt)Xe[gt]=tt[gt];return Xe})(Object.create(this.options),me)).debug;if(ge&&console.time("preprocess data"),me.maxZoom<0||me.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(me.promoteId&&me.generateId)throw new Error("promoteId and generateId cannot be used together.");var Oe=(function(Xe,tt){var gt=[];if(Xe.type==="FeatureCollection")for(var ft=0;ft<Xe.features.length;ft++)Ee(gt,Xe.features[ft],tt,ft);else Ee(gt,Xe.type==="Feature"?Xe:{geometry:Xe},tt);return gt})(Be,me);this.tiles={},this.tileCoords=[],ge&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",me.indexMaxZoom,me.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Oe=(function(Xe,tt){var gt=tt.buffer/tt.extent,ft=Xe,et=Ft(Xe,1,-1-gt,gt,0,-1,2,tt),wt=Ft(Xe,1,1-gt,2+gt,0,-1,2,tt);return(et||wt)&&(ft=Ft(Xe,1,-gt,1+gt,0,-1,2,tt)||[],et&&(ft=jt(et,1).concat(ft)),wt&&(ft=ft.concat(jt(wt,-1)))),ft})(Oe,me),Oe.length&&this.splitTile(Oe,0,0,0),ge&&(Oe.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function yr(Be,me,ge){return 32*((1<<Be)*ge+me)+Be}function No(Be,me){const ge=Be.tileID.canonical;if(!this._geoJSONIndex)return me(null,null);const Oe=this._geoJSONIndex.getTile(ge.z,ge.x,ge.y);if(!Oe)return me(null,null);const Xe=new class{constructor(gt){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=s.EXTENT,this.length=gt.length,this._features=gt}feature(gt){return new class{constructor(ft){this._feature=ft,this.extent=s.EXTENT,this.type=ft.type,this.properties=ft.tags,"id"in ft&&!isNaN(ft.id)&&(this.id=parseInt(ft.id,10))}loadGeometry(){if(this._feature.type===1){const ft=[];for(const et of this._feature.geometry)ft.push([new s.Point(et[0],et[1])]);return ft}{const ft=[];for(const et of this._feature.geometry){const wt=[];for(const Zt of et)wt.push(new s.Point(Zt[0],Zt[1]));ft.push(wt)}return ft}}toGeoJSON(ft,et,wt){return L.call(this,ft,et,wt)}}(this._features[gt])}}(Oe.features);let tt=Ge(Xe);tt.byteOffset===0&&tt.byteLength===tt.buffer.byteLength||(tt=new Uint8Array(tt)),me(null,{vectorTile:Xe,rawData:tt.buffer})}nr.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},nr.prototype.splitTile=function(Be,me,ge,Oe,Xe,tt,gt){for(var ft=[Be,me,ge,Oe],et=this.options,wt=et.debug;ft.length;){Oe=ft.pop(),ge=ft.pop(),me=ft.pop(),Be=ft.pop();var Zt=1<<me,on=yr(me,ge,Oe),Yt=this.tiles[on];if(!Yt&&(wt>1&&console.time("creation"),Yt=this.tiles[on]=Yi(Be,me,ge,Oe,et),this.tileCoords.push({z:me,x:ge,y:Oe}),wt)){wt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",me,ge,Oe,Yt.numFeatures,Yt.numPoints,Yt.numSimplified),console.timeEnd("creation"));var qn="z"+me;this.stats[qn]=(this.stats[qn]||0)+1,this.total++}if(Yt.source=Be,Xe){if(me===et.maxZoom||me===Xe)continue;var Zn=1<<Xe-me;if(ge!==Math.floor(tt/Zn)||Oe!==Math.floor(gt/Zn))continue}else if(me===et.indexMaxZoom||Yt.numPoints<=et.indexMaxPoints)continue;if(Yt.source=null,Be.length!==0){wt>1&&console.time("clipping");var Un,oi,Kn,Pi,hr,es,br=.5*et.buffer/et.extent,Uo=.5-br,ts=.5+br,Dr=1+br;Un=oi=Kn=Pi=null,hr=Ft(Be,Zt,ge-br,ge+ts,0,Yt.minX,Yt.maxX,et),es=Ft(Be,Zt,ge+Uo,ge+Dr,0,Yt.minX,Yt.maxX,et),Be=null,hr&&(Un=Ft(hr,Zt,Oe-br,Oe+ts,1,Yt.minY,Yt.maxY,et),oi=Ft(hr,Zt,Oe+Uo,Oe+Dr,1,Yt.minY,Yt.maxY,et),hr=null),es&&(Kn=Ft(es,Zt,Oe-br,Oe+ts,1,Yt.minY,Yt.maxY,et),Pi=Ft(es,Zt,Oe+Uo,Oe+Dr,1,Yt.minY,Yt.maxY,et),es=null),wt>1&&console.timeEnd("clipping"),ft.push(Un||[],me+1,2*ge,2*Oe),ft.push(oi||[],me+1,2*ge,2*Oe+1),ft.push(Kn||[],me+1,2*ge+1,2*Oe),ft.push(Pi||[],me+1,2*ge+1,2*Oe+1)}}},nr.prototype.getTile=function(Be,me,ge){var Oe=this.options,Xe=Oe.extent,tt=Oe.debug;if(Be<0||Be>24)return null;var gt=1<<Be,ft=yr(Be,me=(me%gt+gt)%gt,ge);if(this.tiles[ft])return On(this.tiles[ft],Xe);tt>1&&console.log("drilling down to z%d-%d-%d",Be,me,ge);for(var et,wt=Be,Zt=me,on=ge;!et&&wt>0;)wt--,Zt=Math.floor(Zt/2),on=Math.floor(on/2),et=this.tiles[yr(wt,Zt,on)];return et&&et.source?(tt>1&&console.log("found parent tile z%d-%d-%d",wt,Zt,on),tt>1&&console.time("drilling down"),this.splitTile(et.source,wt,Zt,on,Be,me,ge),tt>1&&console.timeEnd("drilling down"),this.tiles[ft]?On(this.tiles[ft],Xe):null):null};class xo extends s.VectorTileWorkerSource{constructor(me,ge,Oe,Xe,tt){super(me,ge,Oe,Xe,No),tt&&(this.loadGeoJSON=tt)}loadData(me,ge){const Oe=me&&me.request,Xe=Oe&&Oe.collectResourceTiming;this.loadGeoJSON(me,((tt,gt)=>{if(tt||!gt)return ge(tt);if(typeof gt!="object")return ge(new Error(`Input data given to '${me.source}' is not a valid GeoJSON object.`));{M(gt,!0);try{if(me.filter){const et=s.createExpression(me.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(et.result==="error")throw new Error(et.value.map((Zt=>`${Zt.key}: ${Zt.message}`)).join(", "));gt={type:"FeatureCollection",features:gt.features.filter((Zt=>et.value.evaluate({zoom:0},Zt)))}}this._geoJSONIndex=me.cluster?new ct((function({superclusterOptions:et,clusterProperties:wt}){if(!wt||!et)return et;const Zt={},on={},Yt={accumulated:null,zoom:0},qn={properties:null},Zn=Object.keys(wt);for(const Un of Zn){const[oi,Kn]=wt[Un],Pi=s.createExpression(Kn),hr=s.createExpression(typeof oi=="string"?[oi,["accumulated"],["get",Un]]:oi);Zt[Un]=Pi.value,on[Un]=hr.value}return et.map=Un=>{qn.properties=Un;const oi={};for(const Kn of Zn)oi[Kn]=Zt[Kn].evaluate(Yt,qn);return oi},et.reduce=(Un,oi)=>{qn.properties=oi;for(const Kn of Zn)Yt.accumulated=Un[Kn],Un[Kn]=on[Kn].evaluate(Yt,qn)},et})(me)).load(gt.features):(function(et,wt){return new nr(et,wt)})(gt,me.geojsonVtOptions)}catch(et){return ge(et)}this.loaded={};const ft={};if(Xe){const et=s.getPerformanceMeasurement(Oe);et&&(ft.resourceTiming={},ft.resourceTiming[me.source]=JSON.parse(JSON.stringify(et)))}ge(null,ft)}}))}reloadTile(me,ge){const Oe=this.loaded;return Oe&&Oe[me.uid]?super.reloadTile(me,ge):this.loadTile(me,ge)}loadGeoJSON(me,ge){if(me.request)s.getJSON(me.request,ge);else{if(typeof me.data!="string")return ge(new Error(`Input data given to '${me.source}' is not a valid GeoJSON object.`));try{return ge(null,JSON.parse(me.data))}catch{return ge(new Error(`Input data given to '${me.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(me,ge){try{ge(null,this._geoJSONIndex.getClusterExpansionZoom(me.clusterId))}catch(Oe){ge(Oe)}}getClusterChildren(me,ge){try{ge(null,this._geoJSONIndex.getChildren(me.clusterId))}catch(Oe){ge(Oe)}}getClusterLeaves(me,ge){try{ge(null,this._geoJSONIndex.getLeaves(me.clusterId,me.limit,me.offset))}catch(Oe){ge(Oe)}}}class Vc{constructor(me){this.self=me,this.actor=new s.Actor(me,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=s.getProjection({name:"mercator"}),this.workerSourceTypes={vector:s.VectorTileWorkerSource,geojson:xo},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(ge,Oe)=>{if(this.workerSourceTypes[ge])throw new Error(`Worker source with name "${ge}" already registered.`);this.workerSourceTypes[ge]=Oe},this.self.registerRTLTextPlugin=ge=>{if(s.plugin.isParsed())throw new Error("RTL text plugin already registered.");s.plugin.applyArabicShaping=ge.applyArabicShaping,s.plugin.processBidirectionalText=ge.processBidirectionalText,s.plugin.processStyledBidirectionalText=ge.processStyledBidirectionalText}}clearCaches(me,ge,Oe){delete this.layerIndexes[me],delete this.availableImages[me],delete this.workerSources[me],delete this.demWorkerSources[me],Oe()}checkIfReady(me,ge,Oe){Oe()}setReferrer(me,ge){this.referrer=ge}spriteLoaded(me,ge){this.isSpriteLoaded[me]=ge;for(const Oe in this.workerSources[me]){const Xe=this.workerSources[me][Oe];for(const tt in Xe)Xe[tt]instanceof s.VectorTileWorkerSource&&(Xe[tt].isSpriteLoaded=ge,Xe[tt].fire(new s.Event("isSpriteLoaded")))}}setImages(me,ge,Oe){this.availableImages[me]=ge;for(const Xe in this.workerSources[me]){const tt=this.workerSources[me][Xe];for(const gt in tt)tt[gt].availableImages=ge}Oe()}enableTerrain(me,ge,Oe){this.terrain=ge,Oe()}setProjection(me,ge){this.projections[me]=s.getProjection(ge)}setLayers(me,ge,Oe){this.getLayerIndex(me).replace(ge),Oe()}updateLayers(me,ge,Oe){this.getLayerIndex(me).update(ge.layers,ge.removedIds),Oe()}loadTile(me,ge,Oe){const Xe=this.enableTerrain?s.extend({enableTerrain:this.terrain},ge):ge;Xe.projection=this.projections[me]||this.defaultProjection,this.getWorkerSource(me,ge.type,ge.source).loadTile(Xe,Oe)}loadDEMTile(me,ge,Oe){const Xe=this.enableTerrain?s.extend({buildQuadTree:this.terrain},ge):ge;this.getDEMWorkerSource(me,ge.source).loadTile(Xe,Oe)}reloadTile(me,ge,Oe){const Xe=this.enableTerrain?s.extend({enableTerrain:this.terrain},ge):ge;Xe.projection=this.projections[me]||this.defaultProjection,this.getWorkerSource(me,ge.type,ge.source).reloadTile(Xe,Oe)}abortTile(me,ge,Oe){this.getWorkerSource(me,ge.type,ge.source).abortTile(ge,Oe)}removeTile(me,ge,Oe){this.getWorkerSource(me,ge.type,ge.source).removeTile(ge,Oe)}removeSource(me,ge,Oe){if(!this.workerSources[me]||!this.workerSources[me][ge.type]||!this.workerSources[me][ge.type][ge.source])return;const Xe=this.workerSources[me][ge.type][ge.source];delete this.workerSources[me][ge.type][ge.source],Xe.removeSource!==void 0?Xe.removeSource(ge,Oe):Oe()}loadWorkerSource(me,ge,Oe){try{this.self.importScripts(ge.url),Oe()}catch(Xe){Oe(Xe.toString())}}syncRTLPluginState(me,ge,Oe){try{s.plugin.setState(ge);const Xe=s.plugin.getPluginURL();if(s.plugin.isLoaded()&&!s.plugin.isParsed()&&Xe!=null){this.self.importScripts(Xe);const tt=s.plugin.isParsed();Oe(tt?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Xe}`),tt)}}catch(Xe){Oe(Xe.toString())}}getAvailableImages(me){let ge=this.availableImages[me];return ge||(ge=[]),ge}getLayerIndex(me){let ge=this.layerIndexes[me];return ge||(ge=this.layerIndexes[me]=new x),ge}getWorkerSource(me,ge,Oe){if(this.workerSources[me]||(this.workerSources[me]={}),this.workerSources[me][ge]||(this.workerSources[me][ge]={}),!this.workerSources[me][ge][Oe]){const Xe={send:(tt,gt,ft,et,wt,Zt)=>{this.actor.send(tt,gt,ft,me,wt,Zt)},scheduler:this.actor.scheduler};this.workerSources[me][ge][Oe]=new this.workerSourceTypes[ge](Xe,this.getLayerIndex(me),this.getAvailableImages(me),this.isSpriteLoaded[me])}return this.workerSources[me][ge][Oe]}getDEMWorkerSource(me,ge){return this.demWorkerSources[me]||(this.demWorkerSources[me]={}),this.demWorkerSources[me][ge]||(this.demWorkerSources[me][ge]=new T),this.demWorkerSources[me][ge]}enforceCacheSizeLimit(me,ge){s.enforceCacheSizeLimit(ge)}getWorkerPerformanceMetrics(me,ge,Oe){Oe(void 0,void 0)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new Vc(self)),Vc})),l(["./shared"],(function(s){function p(_,u){if(Array.isArray(_)){if(!Array.isArray(u)||_.length!==u.length)return!1;for(let m=0;m<_.length;m++)if(!p(_[m],u[m]))return!1;return!0}if(typeof _=="object"&&_!==null&&u!==null){if(typeof u!="object"||Object.keys(_).length!==Object.keys(u).length)return!1;for(const m in _)if(!p(_[m],u[m]))return!1;return!0}return _===u}var v=x;function x(_){return!(function(u){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?(function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var y,S,C=new Blob([""],{type:"text/javascript"}),R=URL.createObjectURL(C);try{S=new Worker(R),y=!0}catch{y=!1}return S&&S.terminate(),URL.revokeObjectURL(R),y})()?"Uint8ClampedArray"in window?ArrayBuffer.isView?(function(){var y=document.createElement("canvas");y.width=y.height=1;var S=y.getContext("2d");if(!S)return!1;var C=S.getImageData(0,0,1,1);return C&&C.width===y.width})()?(T[m=u&&u.failIfMajorPerformanceCaveat]===void 0&&(T[m]=(function(y){var S,C=(function(R){var O=document.createElement("canvas"),U=Object.create(x.webGLContextAttributes);return U.failIfMajorPerformanceCaveat=R,O.getContext("webgl",U)||O.getContext("experimental-webgl",U)})(y);if(!C)return!1;try{S=C.createShader(C.VERTEX_SHADER)}catch{return!1}return!(!S||C.isContextLost())&&(C.shaderSource(S,"void main() {}"),C.compileShader(S),C.getShaderParameter(S,C.COMPILE_STATUS)===!0)})(m)),T[m]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var m})(_)}var T={};function k(_,u,m){const y=s.window.document.createElement(_);return u!==void 0&&(y.className=u),m&&m.appendChild(y),y}function P(_,u,m){const y=s.window.document.createElementNS("http://www.w3.org/2000/svg",_);for(const S of Object.keys(u))y.setAttributeNS(null,S,u[S]);return m&&m.appendChild(y),y}x.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const M=s.window.document&&s.window.document.documentElement.style,L=M&&M.userSelect!==void 0?"userSelect":"WebkitUserSelect";let B;function F(){M&&L&&(B=M[L],M[L]="none")}function X(){M&&L&&(M[L]=B)}function J(_){_.preventDefault(),_.stopPropagation(),s.window.removeEventListener("click",J,!0)}function Q(){s.window.addEventListener("click",J,!0),s.window.setTimeout((()=>{s.window.removeEventListener("click",J,!0)}),0)}function re(_,u){const m=_.getBoundingClientRect();return H(_,m,u)}function Z(_,u){const m=_.getBoundingClientRect(),y=[];for(let S=0;S<u.length;S++)y.push(H(_,m,u[S]));return y}function $(_){return s.window.InstallTrigger!==void 0&&_.button===2&&_.ctrlKey&&s.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:_.button}function H(_,u,m){const y=_.offsetWidth===u.width?1:_.offsetWidth/u.width;return new s.Point((m.clientX-u.left)*y,(m.clientY-u.top)*y)}function W(_,u){var m=u[0],y=u[1],S=u[2],C=u[3],R=m*C-S*y;return R?(_[0]=C*(R=1/R),_[1]=-y*R,_[2]=-S*R,_[3]=m*R,_):null}function te(_){const{userImage:u}=_;return!!(u&&u.render&&u.render())&&(_.data.replace(new Uint8Array(u.data.buffer)),!0)}class Y extends s.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new s.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(u){if(this.loaded!==u&&(this.loaded=u,u)){for(const{ids:m,callback:y}of this.requestors)this._notify(m,y);this.requestors=[]}}hasImage(u){return!!this.getImage(u)}getImage(u){return this.images[u]}addImage(u,m){this._validate(u,m)&&(this.images[u]=m)}_validate(u,m){let y=!0;return this._validateStretch(m.stretchX,m.data&&m.data.width)||(this.fire(new s.ErrorEvent(new Error(`Image "${u}" has invalid "stretchX" value`))),y=!1),this._validateStretch(m.stretchY,m.data&&m.data.height)||(this.fire(new s.ErrorEvent(new Error(`Image "${u}" has invalid "stretchY" value`))),y=!1),this._validateContent(m.content,m)||(this.fire(new s.ErrorEvent(new Error(`Image "${u}" has invalid "content" value`))),y=!1),y}_validateStretch(u,m){if(!u)return!0;let y=0;for(const S of u){if(S[0]<y||S[1]<S[0]||m<S[1])return!1;y=S[1]}return!0}_validateContent(u,m){return!(u&&(u.length!==4||u[0]<0||m.data.width<u[0]||u[1]<0||m.data.height<u[1]||u[2]<0||m.data.width<u[2]||u[3]<0||m.data.height<u[3]||u[2]<u[0]||u[3]<u[1]))}updateImage(u,m){m.version=this.images[u].version+1,this.images[u]=m,this.updatedImages[u]=!0}removeImage(u){const m=this.images[u];delete this.images[u],delete this.patterns[u],m.userImage&&m.userImage.onRemove&&m.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(u,m){let y=!0;if(!this.isLoaded())for(const S of u)this.images[S]||(y=!1);this.isLoaded()||y?this._notify(u,m):this.requestors.push({ids:u,callback:m})}_notify(u,m){const y={};for(const S of u){this.images[S]||this.fire(new s.Event("styleimagemissing",{id:S}));const C=this.images[S];C?y[S]={data:C.data.clone(),pixelRatio:C.pixelRatio,sdf:C.sdf,version:C.version,stretchX:C.stretchX,stretchY:C.stretchY,content:C.content,hasRenderCallback:!!(C.userImage&&C.userImage.render)}:s.warnOnce(`Image "${S}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}m(null,y)}getPixelSize(){const{width:u,height:m}=this.atlasImage;return{width:u,height:m}}getPattern(u){const m=this.patterns[u],y=this.getImage(u);if(!y)return null;if(m&&m.position.version===y.version)return m.position;if(m)m.position.version=y.version;else{const S={w:y.data.width+2,h:y.data.height+2,x:0,y:0},C=new s.ImagePosition(S,y);this.patterns[u]={bin:S,position:C}}return this._updatePatternAtlas(),this.patterns[u].position}bind(u){const m=u.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new s.Texture(u,this.atlasImage,m.RGBA),this.atlasTexture&&this.atlasTexture.bind(m.LINEAR,m.CLAMP_TO_EDGE)}_updatePatternAtlas(){const u=[];for(const C in this.patterns)u.push(this.patterns[C].bin);const{w:m,h:y}=s.potpack(u),S=this.atlasImage;S.resize({width:m||1,height:y||1});for(const C in this.patterns){const{bin:R}=this.patterns[C],O=R.x+1,U=R.y+1,G=this.images[C].data,q=G.width,ae=G.height;s.RGBAImage.copy(G,S,{x:0,y:0},{x:O,y:U},{width:q,height:ae}),s.RGBAImage.copy(G,S,{x:0,y:ae-1},{x:O,y:U-1},{width:q,height:1}),s.RGBAImage.copy(G,S,{x:0,y:0},{x:O,y:U+ae},{width:q,height:1}),s.RGBAImage.copy(G,S,{x:q-1,y:0},{x:O-1,y:U},{width:1,height:ae}),s.RGBAImage.copy(G,S,{x:0,y:0},{x:O+q,y:U},{width:1,height:ae})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(u){for(const m of u){if(this.callbackDispatchedThisFrame[m])continue;this.callbackDispatchedThisFrame[m]=!0;const y=this.images[m];te(y)&&this.updateImage(m,y)}}}const ne=new s.Properties({anchor:new s.DataConstantProperty(s.spec.light.anchor),position:new class{constructor(){this.specification=s.spec.light.position}possiblyEvaluate(_,u){return(function([m,y,S]){const C=s.degToRad(y+90),R=s.degToRad(S);return{x:m*Math.cos(C)*Math.sin(R),y:m*Math.sin(C)*Math.sin(R),z:m*Math.cos(R),azimuthal:y,polar:S}})(_.expression.evaluate(u))}interpolate(_,u,m){return{x:s.number(_.x,u.x,m),y:s.number(_.y,u.y,m),z:s.number(_.z,u.z,m),azimuthal:s.number(_.azimuthal,u.azimuthal,m),polar:s.number(_.polar,u.polar,m)}}},color:new s.DataConstantProperty(s.spec.light.color),intensity:new s.DataConstantProperty(s.spec.light.intensity)});class Se extends s.Evented{constructor(u){super(),this._transitionable=new s.Transitionable(ne),this.setLight(u),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(u,m={}){if(!this._validate(s.validateLight,u,m))for(const y in u){const S=u[y];s.endsWith(y,"-transition")?this._transitionable.setTransition(y.slice(0,-11),S):this._transitionable.setValue(y,S)}}updateTransitions(u){this._transitioning=this._transitionable.transitioned(u,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(u){this.properties=this._transitioning.possiblyEvaluate(u)}_validate(u,m,y){return(!y||y.validate!==!1)&&s.emitValidationErrors(this,u.call(s.validateStyle,s.extend({value:m,style:{glyphs:!0,sprite:!0},styleSpec:s.spec})))}}const Fe=new s.Properties({source:new s.DataConstantProperty(s.spec.terrain.source),exaggeration:new s.DataConstantProperty(s.spec.terrain.exaggeration)});let Ve=class extends s.Evented{constructor(_,u){super(),this._transitionable=new s.Transitionable(Fe),this.set(_),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=u}get(){return this._transitionable.serialize()}set(_){for(const u in _){const m=_[u];s.endsWith(u,"-transition")?this._transitionable.setTransition(u.slice(0,-11),m):this._transitionable.setValue(u,m)}}updateTransitions(_){this._transitioning=this._transitionable.transitioned(_,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(_){this.properties=this._transitioning.possiblyEvaluate(_)}};function Ge(_,u,m,y){const S=s.smoothstep(45,65,m),[C,R]=je(_,y),O=s.length(u);let U=1-Math.min(1,Math.exp((O-C)/(R-C)*-6));return U*=U*U,U=Math.min(1,1.00747*U),U*S*_.alpha}function je(_,u){const m=.5/Math.tan(.5*u);return[_.range[0]+m,_.range[1]+m]}const Ae=new s.Properties({range:new s.DataConstantProperty(s.spec.fog.range),color:new s.DataConstantProperty(s.spec.fog.color),"high-color":new s.DataConstantProperty(s.spec.fog["high-color"]),"space-color":new s.DataConstantProperty(s.spec.fog["space-color"]),"horizon-blend":new s.DataConstantProperty(s.spec.fog["horizon-blend"]),"star-intensity":new s.DataConstantProperty(s.spec.fog["star-intensity"])});class Ke extends s.Evented{constructor(u,m){super(),this._transitionable=new s.Transitionable(Ae),this.set(u),this._transitioning=this._transitionable.untransitioned(),this._transform=m}get state(){const u=this._transform,m=u.projection.name==="globe",y=s.globeToMercatorTransition(u.zoom),S=this.properties.get("range"),C=[.5,3];return{range:m?[s.number(C[0],S[0],y),s.number(C[1],S[1],y)]:S,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(u,m={}){if(!this._validate(s.validateFog,u,m)){for(const y of Object.keys(s.spec.fog))u&&u[y]===void 0&&(u[y]=s.spec.fog[y].default);for(const y in u){const S=u[y];s.endsWith(y,"-transition")?this._transitionable.setTransition(y.slice(0,-11),S):this._transitionable.setValue(y,S)}}}getOpacity(u){if(!this._transform.projection.supportsFog)return 0;const m=this.properties&&this.properties.get("color")||1;return(this._transform.projection.name==="globe"?1:s.smoothstep(45,65,u))*m.a}getOpacityAtLatLng(u,m){return this._transform.projection.supportsFog?(function(y,S,C){const R=s.MercatorCoordinate.fromLngLat(S),O=C.elevation?C.elevation.getAtPointOrZero(R):0,U=[R.x,R.y,O];return s.transformMat4(U,U,C.mercatorFogMatrix),Ge(y,U,C.pitch,C._fov)})(this.state,u,m):0}getFovAdjustedRange(u){return this._transform.projection.supportsFog?je(this.state,u):[0,1]}updateTransitions(u){this._transitioning=this._transitionable.transitioned(u,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(u){this.properties=this._transitioning.possiblyEvaluate(u)}_validate(u,m,y){return(!y||y.validate!==!1)&&s.emitValidationErrors(this,u.call(s.validateStyle,s.extend({value:m,style:{glyphs:!0,sprite:!0},styleSpec:s.spec})))}}class ve{constructor(u,m){this.workerPool=u,this.actors=[],this.currentActor=0,this.id=s.uniqueId();const y=this.workerPool.acquire(this.id);for(let S=0;S<y.length;S++){const C=new ve.Actor(y[S],m,this.id);C.name=`Worker ${S}`,this.actors.push(C)}this.ready=!1,this.broadcast("checkIfReady",null,(()=>{this.ready=!0}))}broadcast(u,m,y){s.asyncAll(this.actors,((S,C)=>{S.send(u,m,C)}),y=y||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach((u=>{u.remove()})),this.actors=[],this.workerPool.release(this.id)}}function Le(_,u,m){return u*(s.EXTENT/(_.tileSize*Math.pow(2,m-_.tileID.overscaledZ)))}ve.Actor=s.Actor;class We{constructor(u,m,y,S){this.screenBounds=u,this.cameraPoint=m,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=y,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,S)}static createFromScreenPoints(u,m){let y,S;if(u instanceof s.Point||typeof u[0]=="number"){const C=s.Point.convert(u);y=[C],S=m.isPointAboveHorizon(C)}else{const C=s.Point.convert(u[0]),R=s.Point.convert(u[1]);y=[C,R],S=s.polygonizeBounds(C,R).every((O=>m.isPointAboveHorizon(O)))}return new We(y,m.getCameraPoint(),S,m)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(u){return s.polygonizeBounds(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],u)}bufferedCameraGeometry(u){const m=this.screenBounds[0],y=this.screenBounds.length===1?this.screenBounds[0].add(new s.Point(1,1)):this.screenBounds[1],S=s.polygonizeBounds(m,y,0,!1);return this.cameraPoint.y>y.y&&(this.cameraPoint.x>m.x&&this.cameraPoint.x<y.x?S.splice(3,0,this.cameraPoint):this.cameraPoint.x>=y.x?S[2]=this.cameraPoint:this.cameraPoint.x<=m.x&&(S[3]=this.cameraPoint)),s.bufferConvexPolygon(S,u)}bufferedCameraGeometryGlobe(u){const m=this.screenBounds[0],y=this.screenBounds.length===1?this.screenBounds[0].add(new s.Point(1,1)):this.screenBounds[1],S=s.polygonizeBounds(m,y,u),C=this.cameraPoint.clone();switch(3*((C.y>m.y)+(C.y>y.y))+((C.x>m.x)+(C.x>y.x))){case 0:S[0]=C,S[4]=C.clone();break;case 1:S.splice(1,0,C);break;case 2:S[1]=C;break;case 3:S.splice(4,0,C);break;case 5:S.splice(2,0,C);break;case 6:S[3]=C;break;case 7:S.splice(3,0,C);break;case 8:S[2]=C}return S}containsTile(u,m,y,S=0){const C=u.queryPadding/m._pixelsPerMercatorPixel+1,R=y?this._bufferedCameraMercator(C,m):this._bufferedScreenMercator(C,m);let O=u.tileID.wrap+(R.unwrapped?S:0);const U=R.polygon.map((Te=>s.getTilePoint(u.tileTransform,Te,O)));if(!s.polygonIntersectsBox(U,0,0,s.EXTENT,s.EXTENT))return;O=u.tileID.wrap+(this.screenGeometryMercator.unwrapped?S:0);const G=this.screenGeometryMercator.polygon.map((Te=>s.getTileVec3(u.tileTransform,Te,O))),q=G.map((Te=>new s.Point(Te[0],Te[1]))),ae=m.getFreeCameraOptions().position||new s.MercatorCoordinate(0,0,0),he=s.getTileVec3(u.tileTransform,ae,O),ye=G.map((Te=>{const le=s.sub(Te,Te,he);return s.normalize(le,le),new s.Ray(he,le)})),we=Le(u,1,m.zoom)*m._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:q,tilespaceRays:ye,bufferedTilespaceGeometry:U,bufferedTilespaceBounds:(be=s.getBounds(U),be.min.x=s.clamp(be.min.x,0,s.EXTENT),be.min.y=s.clamp(be.min.y,0,s.EXTENT),be.max.x=s.clamp(be.max.x,0,s.EXTENT),be.max.y=s.clamp(be.max.y,0,s.EXTENT),be),tile:u,tileID:u.tileID,pixelToTileUnitsFactor:we};var be}_bufferedScreenMercator(u,m){const y=rt(u);if(this._screenRaycastCache[y])return this._screenRaycastCache[y];{let S;return S=m.projection.name==="globe"?this._projectAndResample(this.bufferedScreenGeometry(u),m):{polygon:this.bufferedScreenGeometry(u).map((C=>m.pointCoordinate3D(C))),unwrapped:!0},this._screenRaycastCache[y]=S,S}}_bufferedCameraMercator(u,m){const y=rt(u);if(this._cameraRaycastCache[y])return this._cameraRaycastCache[y];{let S;return S=m.projection.name==="globe"?this._projectAndResample(this.bufferedCameraGeometryGlobe(u),m):{polygon:this.bufferedCameraGeometry(u).map((C=>m.pointCoordinate3D(C))),unwrapped:!0},this._cameraRaycastCache[y]=S,S}}_projectAndResample(u,m){const y=(function(C,R){const O=s.multiply([],R.pixelMatrix,R.globeMatrix),U=[0,-s.GLOBE_RADIUS,0,1],G=[0,s.GLOBE_RADIUS,0,1],q=[0,0,0,1];s.transformMat4$1(U,U,O),s.transformMat4$1(G,G,O),s.transformMat4$1(q,q,O);const ae=new s.Point(U[0]/U[3],U[1]/U[3]),he=new s.Point(G[0]/G[3],G[1]/G[3]),ye=s.polygonContainsPoint(C,ae)&&U[3]<q[3],we=s.polygonContainsPoint(C,he)&&G[3]<q[3];if(!ye&&!we)return null;const be=(function(Ze,ot,it){for(let mt=1;mt<Ze.length;mt++){const $t=ut(ot.pointCoordinate3D(Ze[mt-1]).x),lt=ut(ot.pointCoordinate3D(Ze[mt]).x);if(it<0){if($t<lt)return{idx:mt,t:-$t/(lt-1-$t)}}else if(lt<$t)return{idx:mt,t:(1-$t)/(lt+1-$t)}}return null})(C,R,ye?-1:1);if(!be)return null;const{idx:Te,t:le}=be;let _e=Te>1?ct(C.slice(0,Te),R):[],Ie=Te<C.length?ct(C.slice(Te),R):[];_e=_e.map((Ze=>new s.Point(ut(Ze.x),Ze.y))),Ie=Ie.map((Ze=>new s.Point(ut(Ze.x),Ze.y)));const Me=[..._e];Me.length===0&&Me.push(Ie[Ie.length-1]);const $e=s.number(Me[Me.length-1].y,(Ie.length===0?_e[0]:Ie[0]).y,le);let qe;return qe=ye?[new s.Point(0,$e),new s.Point(0,0),new s.Point(1,0),new s.Point(1,$e)]:[new s.Point(1,$e),new s.Point(1,1),new s.Point(0,1),new s.Point(0,$e)],Me.push(...qe),Ie.length===0?Me.push(_e[0]):Me.push(...Ie),{polygon:Me.map((Ze=>new s.MercatorCoordinate(Ze.x,Ze.y))),unwrapped:!1}})(u,m);if(y)return y;const S=(function(C,R){let O=!1,U=-1/0,G=0;for(let ae=0;ae<C.length-1;ae++)C[ae].x>U&&(U=C[ae].x,G=ae);for(let ae=0;ae<C.length-1;ae++){const he=(G+ae)%(C.length-1),ye=C[he],we=C[he+1];Math.abs(ye.x-we.x)>.5&&(ye.x<we.x?(ye.x+=1,he===0&&(C[C.length-1].x+=1)):(we.x+=1,he+1===C.length-1&&(C[0].x+=1)),O=!0)}const q=s.mercatorXfromLng(R.center.lng);return O&&q<Math.abs(q-1)&&C.forEach((ae=>{ae.x-=1})),{polygon:C,unwrapped:O}})(ct(u,m).map((C=>new s.Point(ut(C.x),C.y))),m);return{polygon:S.polygon.map((C=>new s.MercatorCoordinate(C.x,C.y))),unwrapped:S.unwrapped}}}function ct(_,u){return s.resample(_,(m=>{const y=u.pointCoordinate3D(m);m.x=y.x,m.y=y.y}),1/256)}function ut(_){return _<0?1+_%1:_%1}function rt(_){return 100*_|0}function Qe(_,u,m,y,S){const C=function(R,O){if(R)return S(R);if(O){_.url&&O.tiles&&_.tiles&&delete _.tiles;const U=s.pick(s.extend(O,_),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);O.vector_layers&&(U.vectorLayers=O.vector_layers,U.vectorLayerIds=U.vectorLayers.map((G=>G.id))),U.tiles=u.canonicalizeTileset(U,_.url),S(null,U)}};return _.url?s.getJSON(u.transformRequest(u.normalizeSourceURL(_.url,null,m,y),s.ResourceType.Source),C):s.exported.frame((()=>C(null,_)))}class Ct{constructor(u,m,y){this.bounds=s.LngLatBounds.convert(this.validateBounds(u)),this.minzoom=m||0,this.maxzoom=y||24}validateBounds(u){return Array.isArray(u)&&u.length===4?[Math.max(-180,u[0]),Math.max(-90,u[1]),Math.min(180,u[2]),Math.min(90,u[3])]:[-180,-90,180,90]}contains(u){const m=Math.pow(2,u.z),y=Math.floor(s.mercatorXfromLng(this.bounds.getWest())*m),S=Math.floor(s.mercatorYfromLat(this.bounds.getNorth())*m),C=Math.ceil(s.mercatorXfromLng(this.bounds.getEast())*m),R=Math.ceil(s.mercatorYfromLat(this.bounds.getSouth())*m);return u.x>=y&&u.x<C&&u.y>=S&&u.y<R}}class At{constructor(u,m,y){this.context=u;const S=u.gl;this.buffer=S.createBuffer(),this.dynamicDraw=!!y,this.context.unbindVAO(),u.bindElementBuffer.set(this.buffer),S.bufferData(S.ELEMENT_ARRAY_BUFFER,m.arrayBuffer,this.dynamicDraw?S.DYNAMIC_DRAW:S.STATIC_DRAW),this.dynamicDraw||m.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(u){const m=this.context.gl;this.context.unbindVAO(),this.bind(),m.bufferSubData(m.ELEMENT_ARRAY_BUFFER,0,u.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const yn={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Mn{constructor(u,m,y,S){this.length=m.length,this.attributes=y,this.itemSize=m.bytesPerElement,this.dynamicDraw=S,this.context=u;const C=u.gl;this.buffer=C.createBuffer(),u.bindVertexBuffer.set(this.buffer),C.bufferData(C.ARRAY_BUFFER,m.arrayBuffer,this.dynamicDraw?C.DYNAMIC_DRAW:C.STATIC_DRAW),this.dynamicDraw||m.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(u){const m=this.context.gl;this.bind(),m.bufferSubData(m.ARRAY_BUFFER,0,u.arrayBuffer)}enableAttributes(u,m){for(let y=0;y<this.attributes.length;y++){const S=m.attributes[this.attributes[y].name];S!==void 0&&u.enableVertexAttribArray(S)}}setVertexAttribPointers(u,m,y){for(let S=0;S<this.attributes.length;S++){const C=this.attributes[S],R=m.attributes[C.name];R!==void 0&&u.vertexAttribPointer(R,C.components,u[yn[C.type]],!1,this.itemSize,C.offset+this.itemSize*(y||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Ce{constructor(u){this.gl=u.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(u){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class ze extends Ce{getDefault(){return s.Color.transparent}set(u){const m=this.current;(u.r!==m.r||u.g!==m.g||u.b!==m.b||u.a!==m.a||this.dirty)&&(this.gl.clearColor(u.r,u.g,u.b,u.a),this.current=u,this.dirty=!1)}}class Ee extends Ce{getDefault(){return 1}set(u){(u!==this.current||this.dirty)&&(this.gl.clearDepth(u),this.current=u,this.dirty=!1)}}class pt extends Ce{getDefault(){return 0}set(u){(u!==this.current||this.dirty)&&(this.gl.clearStencil(u),this.current=u,this.dirty=!1)}}class dt extends Ce{getDefault(){return[!0,!0,!0,!0]}set(u){const m=this.current;(u[0]!==m[0]||u[1]!==m[1]||u[2]!==m[2]||u[3]!==m[3]||this.dirty)&&(this.gl.colorMask(u[0],u[1],u[2],u[3]),this.current=u,this.dirty=!1)}}class nt extends Ce{getDefault(){return!0}set(u){(u!==this.current||this.dirty)&&(this.gl.depthMask(u),this.current=u,this.dirty=!1)}}class Et extends Ce{getDefault(){return 255}set(u){(u!==this.current||this.dirty)&&(this.gl.stencilMask(u),this.current=u,this.dirty=!1)}}class Dt extends Ce{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(u){const m=this.current;(u.func!==m.func||u.ref!==m.ref||u.mask!==m.mask||this.dirty)&&(this.gl.stencilFunc(u.func,u.ref,u.mask),this.current=u,this.dirty=!1)}}class Ft extends Ce{getDefault(){const u=this.gl;return[u.KEEP,u.KEEP,u.KEEP]}set(u){const m=this.current;(u[0]!==m[0]||u[1]!==m[1]||u[2]!==m[2]||this.dirty)&&(this.gl.stencilOp(u[0],u[1],u[2]),this.current=u,this.dirty=!1)}}class Gt extends Ce{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;u?m.enable(m.STENCIL_TEST):m.disable(m.STENCIL_TEST),this.current=u,this.dirty=!1}}class En extends Ce{getDefault(){return[0,1]}set(u){const m=this.current;(u[0]!==m[0]||u[1]!==m[1]||this.dirty)&&(this.gl.depthRange(u[0],u[1]),this.current=u,this.dirty=!1)}}class en extends Ce{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;u?m.enable(m.DEPTH_TEST):m.disable(m.DEPTH_TEST),this.current=u,this.dirty=!1}}class An extends Ce{getDefault(){return this.gl.LESS}set(u){(u!==this.current||this.dirty)&&(this.gl.depthFunc(u),this.current=u,this.dirty=!1)}}class Ln extends Ce{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;u?m.enable(m.BLEND):m.disable(m.BLEND),this.current=u,this.dirty=!1}}class Wn extends Ce{getDefault(){const u=this.gl;return[u.ONE,u.ZERO]}set(u){const m=this.current;(u[0]!==m[0]||u[1]!==m[1]||this.dirty)&&(this.gl.blendFunc(u[0],u[1]),this.current=u,this.dirty=!1)}}class cn extends Ce{getDefault(){return s.Color.transparent}set(u){const m=this.current;(u.r!==m.r||u.g!==m.g||u.b!==m.b||u.a!==m.a||this.dirty)&&(this.gl.blendColor(u.r,u.g,u.b,u.a),this.current=u,this.dirty=!1)}}class jt extends Ce{getDefault(){return this.gl.FUNC_ADD}set(u){(u!==this.current||this.dirty)&&(this.gl.blendEquation(u),this.current=u,this.dirty=!1)}}class Tn extends Ce{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;u?m.enable(m.CULL_FACE):m.disable(m.CULL_FACE),this.current=u,this.dirty=!1}}class On extends Ce{getDefault(){return this.gl.BACK}set(u){(u!==this.current||this.dirty)&&(this.gl.cullFace(u),this.current=u,this.dirty=!1)}}class ki extends Ce{getDefault(){return this.gl.CCW}set(u){(u!==this.current||this.dirty)&&(this.gl.frontFace(u),this.current=u,this.dirty=!1)}}let Yi,Ur=class extends Ce{getDefault(){return null}set(_){(_!==this.current||this.dirty)&&(this.gl.useProgram(_),this.current=_,this.dirty=!1)}};class bo extends Ce{getDefault(){return this.gl.TEXTURE0}set(u){(u!==this.current||this.dirty)&&(this.gl.activeTexture(u),this.current=u,this.dirty=!1)}}class nr extends Ce{getDefault(){const u=this.gl;return[0,0,u.drawingBufferWidth,u.drawingBufferHeight]}set(u){const m=this.current;(u[0]!==m[0]||u[1]!==m[1]||u[2]!==m[2]||u[3]!==m[3]||this.dirty)&&(this.gl.viewport(u[0],u[1],u[2],u[3]),this.current=u,this.dirty=!1)}}class yr extends Ce{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;m.bindFramebuffer(m.FRAMEBUFFER,u),this.current=u,this.dirty=!1}}class No extends Ce{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;m.bindRenderbuffer(m.RENDERBUFFER,u),this.current=u,this.dirty=!1}}class xo extends Ce{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;m.bindTexture(m.TEXTURE_2D,u),this.current=u,this.dirty=!1}}class Vc extends Ce{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;m.bindBuffer(m.ARRAY_BUFFER,u),this.current=u,this.dirty=!1}}class Be extends Ce{getDefault(){return null}set(u){const m=this.gl;m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,u),this.current=u,this.dirty=!1}}class me extends Ce{constructor(u){super(u),this.vao=u.extVertexArrayObject}getDefault(){return null}set(u){this.vao&&(u!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(u),this.current=u,this.dirty=!1)}}class ge extends Ce{getDefault(){return 4}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;m.pixelStorei(m.UNPACK_ALIGNMENT,u),this.current=u,this.dirty=!1}}class Oe extends Ce{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;m.pixelStorei(m.UNPACK_PREMULTIPLY_ALPHA_WEBGL,u),this.current=u,this.dirty=!1}}class Xe extends Ce{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;m.pixelStorei(m.UNPACK_FLIP_Y_WEBGL,u),this.current=u,this.dirty=!1}}class tt extends Ce{constructor(u,m){super(u),this.context=u,this.parent=m}getDefault(){return null}}class gt extends tt{setDirty(){this.dirty=!0}set(u){if(u===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const m=this.gl;m.framebufferTexture2D(m.FRAMEBUFFER,m.COLOR_ATTACHMENT0,m.TEXTURE_2D,u,0),this.current=u,this.dirty=!1}}class ft extends tt{attachment(){return this.gl.DEPTH_ATTACHMENT}set(u){if(u===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const m=this.gl;m.framebufferRenderbuffer(m.FRAMEBUFFER,this.attachment(),m.RENDERBUFFER,u),this.current=u,this.dirty=!1}}class et extends ft{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class wt{constructor(u,m,y,S){this.context=u,this.width=m,this.height=y;const C=this.framebuffer=u.gl.createFramebuffer();this.colorAttachment=new gt(u,C),S&&(this.depthAttachment=new ft(u,C))}destroy(){const u=this.context.gl,m=this.colorAttachment.get();if(m&&u.deleteTexture(m),this.depthAttachment){const y=this.depthAttachment.get();y&&u.deleteRenderbuffer(y)}u.deleteFramebuffer(this.framebuffer)}}class Zt{constructor(u,m=!1){if(this.gl=u,this.isWebGL2=m,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),m){const y=u;this.extVertexArrayObject={createVertexArrayOES:y.createVertexArray.bind(u),deleteVertexArrayOES:y.deleteVertexArray.bind(u),bindVertexArrayOES:y.bindVertexArray.bind(u)}}this.clearColor=new ze(this),this.clearDepth=new Ee(this),this.clearStencil=new pt(this),this.colorMask=new dt(this),this.depthMask=new nt(this),this.stencilMask=new Et(this),this.stencilFunc=new Dt(this),this.stencilOp=new Ft(this),this.stencilTest=new Gt(this),this.depthRange=new En(this),this.depthTest=new en(this),this.depthFunc=new An(this),this.blend=new Ln(this),this.blendFunc=new Wn(this),this.blendColor=new cn(this),this.blendEquation=new jt(this),this.cullFace=new Tn(this),this.cullFaceSide=new On(this),this.frontFace=new ki(this),this.program=new Ur(this),this.activeTexture=new bo(this),this.viewport=new nr(this),this.bindFramebuffer=new yr(this),this.bindRenderbuffer=new No(this),this.bindTexture=new xo(this),this.bindVertexBuffer=new Vc(this),this.bindElementBuffer=new Be(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new me(this),this.pixelStoreUnpack=new ge(this),this.pixelStoreUnpackPremultiplyAlpha=new Oe(this),this.pixelStoreUnpackFlipY=new Xe(this),this.extTextureFilterAnisotropic=u.getExtension("EXT_texture_filter_anisotropic")||u.getExtension("MOZ_EXT_texture_filter_anisotropic")||u.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=u.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extDebugRendererInfo=u.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=u.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=u.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),m||(this.extTextureHalfFloat=u.getExtension("OES_texture_half_float")),(m||this.extTextureHalfFloat&&u.getExtension("OES_texture_half_float_linear"))&&(this.extRenderToTextureHalfFloat=u.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=m||u.getExtension("OES_standard_derivatives"),this.extTimerQuery=u.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=u.getParameter(u.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(u,m){return new At(this,u,m)}createVertexBuffer(u,m,y){return new Mn(this,u,m,y)}createRenderbuffer(u,m,y){const S=this.gl,C=S.createRenderbuffer();return this.bindRenderbuffer.set(C),S.renderbufferStorage(S.RENDERBUFFER,u,m,y),this.bindRenderbuffer.set(null),C}createFramebuffer(u,m,y){return new wt(this,u,m,y)}clear({color:u,depth:m,stencil:y}){const S=this.gl;let C=0;u&&(C|=S.COLOR_BUFFER_BIT,this.clearColor.set(u),this.colorMask.set([!0,!0,!0,!0])),m!==void 0&&(C|=S.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(m),this.depthMask.set(!0)),y!==void 0&&(C|=S.STENCIL_BUFFER_BIT,this.clearStencil.set(y),this.stencilMask.set(255)),S.clear(C)}setCullFace(u){u.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(u.mode),this.frontFace.set(u.frontFace))}setDepthMode(u){u.func!==this.gl.ALWAYS||u.mask?(this.depthTest.set(!0),this.depthFunc.set(u.func),this.depthMask.set(u.mask),this.depthRange.set(u.range)):this.depthTest.set(!1)}setStencilMode(u){u.test.func!==this.gl.ALWAYS||u.mask?(this.stencilTest.set(!0),this.stencilMask.set(u.mask),this.stencilOp.set([u.fail,u.depthFail,u.pass]),this.stencilFunc.set({func:u.test.func,ref:u.ref,mask:u.test.mask})):this.stencilTest.set(!1)}setColorMode(u){p(u.blendFunction,s.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(u.blendFunction),this.blendColor.set(u.blendColor)),this.colorMask.set(u.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class on extends s.Evented{constructor(u,m,y,S){if(super(),this.id=u,this.dispatcher=y,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,s.extend(this,s.pick(m,["url","scheme","tileSize","promoteId"])),this._options=s.extend({type:"vector"},m),this._collectResourceTiming=m.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(S),this._tileWorkers={},this._deduped=new s.DedupedRequest}load(u){this._loaded=!1,this.fire(new s.Event("dataloading",{dataType:"source"}));const m=Array.isArray(this.map._language)?this.map._language.join():this.map._language,y=this.map._worldview;this._tileJSONRequest=Qe(this._options,this.map._requestManager,m,y,((S,C)=>{this._tileJSONRequest=null,this._loaded=!0,S?(m&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${m}`),y&&y.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${y}`),this.fire(new s.ErrorEvent(S))):C&&(s.extend(this,C),C.bounds&&(this.tileBounds=new Ct(C.bounds,this.minzoom,this.maxzoom)),s.postTurnstileEvent(C.tiles,this.map._requestManager._customAccessToken),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"}))),u&&u(S)}))}loaded(){return this._loaded}hasTile(u){return!this.tileBounds||this.tileBounds.contains(u.canonical)}onAdd(u){this.map=u,this.load()}reload(){this.cancelTileJSONRequest(),this.load((()=>this.map.style._clearSource(this.id)))}setTiles(u){return this._options.tiles=u,this.reload(),this}setUrl(u){return this.url=u,this._options.url=u,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return s.extend({},this._options)}loadTile(u,m){const y=this.map._requestManager.normalizeTileURL(u.tileID.canonical.url(this.tiles,this.scheme)),S={request:this.map._requestManager.transformRequest(y,s.ResourceType.Tile),data:void 0,uid:u.uid,tileID:u.tileID,tileZoom:u.tileZoom,zoom:u.tileID.overscaledZ,tileSize:this.tileSize*u.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:s.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:u.isSymbolTile};if(S.request.collectResourceTiming=this._collectResourceTiming,u.actor&&u.state!=="expired")u.state==="loading"?u.reloadCallback=m:u.request=u.actor.send("reloadTile",S,C.bind(this));else if(u.actor=this._tileWorkers[y]=this._tileWorkers[y]||this.dispatcher.getActor(),this.dispatcher.ready)u.request=u.actor.send("loadTile",S,C.bind(this),void 0,!0);else{const R=s.loadVectorTile.call({deduped:this._deduped},S,((O,U)=>{O||!U?C.call(this,O):(S.data={cacheControl:U.cacheControl,expires:U.expires,rawData:U.rawData.slice(0)},u.actor&&u.actor.send("loadTile",S,C.bind(this),void 0,!0))}),!0);u.request={cancel:R}}function C(R,O){return delete u.request,u.aborted?m(null):R&&R.status!==404?m(R):(O&&O.resourceTiming&&(u.resourceTiming=O.resourceTiming),this.map._refreshExpiredTiles&&O&&u.setExpiryData(O),u.loadVectorData(O,this.map.painter),s.cacheEntryPossiblyAdded(this.dispatcher),m(null),void(u.reloadCallback&&(this.loadTile(u,u.reloadCallback),u.reloadCallback=null)))}}abortTile(u){u.request&&(u.request.cancel(),delete u.request),u.actor&&u.actor.send("abortTile",{uid:u.uid,type:this.type,source:this.id})}unloadTile(u){u.unloadVectorData(),u.actor&&u.actor.send("removeTile",{uid:u.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class Yt extends s.Evented{constructor(u,m,y,S){super(),this.id=u,this.dispatcher=y,this.setEventedParent(S),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=s.extend({type:"raster"},m),s.extend(this,s.pick(m,["url","scheme","tileSize"]))}load(u){this._loaded=!1,this.fire(new s.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Qe(this._options,this.map._requestManager,null,null,((m,y)=>{this._tileJSONRequest=null,this._loaded=!0,m?this.fire(new s.ErrorEvent(m)):y&&(s.extend(this,y),y.bounds&&(this.tileBounds=new Ct(y.bounds,this.minzoom,this.maxzoom)),s.postTurnstileEvent(y.tiles),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"}))),u&&u(m)}))}loaded(){return this._loaded}onAdd(u){this.map=u,this.load()}reload(){this.cancelTileJSONRequest(),this.load((()=>this.map.style._clearSource(this.id)))}setTiles(u){return this._options.tiles=u,this.reload(),this}setUrl(u){return this.url=u,this._options.url=u,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return s.extend({},this._options)}hasTile(u){return!this.tileBounds||this.tileBounds.contains(u.canonical)}loadTile(u,m){const y=s.exported.devicePixelRatio>=2,S=this.map._requestManager.normalizeTileURL(u.tileID.canonical.url(this.tiles,this.scheme),y,this.tileSize);u.request=s.getImage(this.map._requestManager.transformRequest(S,s.ResourceType.Tile),((C,R,O,U)=>(delete u.request,u.aborted?(u.state="unloaded",m(null)):C?(u.state="errored",m(C)):R?(this.map._refreshExpiredTiles&&u.setExpiryData({cacheControl:O,expires:U}),u.setTexture(R,this.map.painter),u.state="loaded",s.cacheEntryPossiblyAdded(this.dispatcher),void m(null)):m(null))))}static loadTileData(u,m,y){u.setTexture(m,y)}static unloadTileData(u,m){u.texture&&m.saveTileTexture(u.texture)}abortTile(u,m){u.request&&(u.request.cancel(),delete u.request),m()}unloadTile(u,m){u.texture&&this.map.painter.saveTileTexture(u.texture),m()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}function qn(_,u,m,y,S,C,R,O){const U=[_,m,S,u,y,C,1,1,1],G=[R,O,1],q=s.adjoint([],U),[ae,he,ye]=s.transformMat3(G,G,s.transpose(q,q));return s.multiply$1(U,[ae,0,0,0,he,0,0,0,ye],U)}class Zn extends s.Evented{constructor(u,m,y,S){super(),this.id=u,this.dispatcher=y,this.coordinates=m.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(S),this.options=m,this._dirty=!1}load(u,m){this._loaded=m||!1,this.fire(new s.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._imageRequest=s.getImage(this.map._requestManager.transformRequest(this.url,s.ResourceType.Image),((y,S)=>{if(this._imageRequest=null,this._loaded=!0,y)this.fire(new s.ErrorEvent(y));else if(S){const{HTMLImageElement:C}=s.window;this.image=S instanceof C?s.exported.getImageData(S):S,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,u&&(this.coordinates=u),this._finishLoading()}}))}loaded(){return this._loaded}updateImage(u){return this.image&&u.url?(this._imageRequest&&u.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=u.url,this.load(u.coordinates,this._loaded),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(u){this.map=u,this.load()}onRemove(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),this.texture&&this.texture.destroy()}setCoordinates(u){this.coordinates=u,this._boundsArray=void 0;const m=u.map(s.MercatorCoordinate.fromLngLat);return this.tileID=(function(y){let S=1/0,C=1/0,R=-1/0,O=-1/0;for(const ae of y)S=Math.min(S,ae.x),C=Math.min(C,ae.y),R=Math.max(R,ae.x),O=Math.max(O,ae.y);const U=Math.max(R-S,O-C),G=Math.max(0,Math.floor(-Math.log(U)/Math.LN2)),q=Math.pow(2,G);return new s.CanonicalTileID(G,Math.floor((S+R)/2*q),Math.floor((C+O)/2*q))})(m),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(u){for(const U in this.tiles){const G=this.tiles[U];G.state!=="loaded"&&(G.state="loaded",G.texture=this.texture)}if(this._boundsArray)return;const m=s.tileTransform(this.tileID,this.map.transform.projection),[y,S,C,R]=this.coordinates.map((U=>{const G=m.projection.project(U[0],U[1]);return s.getTilePoint(m,G)._round()}));this.perspectiveTransform=(function(U,G,q,ae,he,ye,we,be,Te,le){const _e=qn(0,0,U,0,0,G,U,G),Ie=qn(q,ae,he,ye,we,be,Te,le);return s.multiply$1(Ie,s.adjoint(_e,_e),Ie),[Ie[6]/Ie[8]*U/s.EXTENT,Ie[7]/Ie[8]*G/s.EXTENT]})(this.width,this.height,y.x,y.y,S.x,S.y,R.x,R.y,C.x,C.y);const O=this._boundsArray=new s.StructArrayLayout4i8;O.emplaceBack(y.x,y.y,0,0),O.emplaceBack(S.x,S.y,s.EXTENT,0),O.emplaceBack(R.x,R.y,0,s.EXTENT),O.emplaceBack(C.x,C.y,s.EXTENT,s.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=u.createVertexBuffer(O,s.boundsAttributes.members),this.boundsSegments=s.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const u=this.map.painter.context,m=u.gl;this._dirty&&(this.texture?this.texture.update(this.image):(this.texture=new s.Texture(u,this.image,m.RGBA),this.texture.bind(m.LINEAR,m.CLAMP_TO_EDGE)),this._dirty=!1),this._prepareData(u)}loadTile(u,m){this.tileID&&this.tileID.equals(u.tileID.canonical)?(this.tiles[String(u.tileID.wrap)]=u,u.buckets={},m(null)):(u.state="errored",m(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const Un={vector:on,raster:Yt,"raster-dem":class extends Yt{constructor(_,u,m,y){super(_,u,m,y),this.type="raster-dem",this.maxzoom=22,this._options=s.extend({type:"raster-dem"},u),this.encoding=u.encoding||"mapbox"}loadTile(_,u){const m=this.map._requestManager.normalizeTileURL(_.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function y(S,C){S&&(_.state="errored",u(S)),C&&(_.dem=C,_.dem.onDeserialize(),_.needsHillshadePrepare=!0,_.needsDEMTextureUpload=!0,_.state="loaded",u(null))}_.request=s.getImage(this.map._requestManager.transformRequest(m,s.ResourceType.Tile),(function(S,C,R,O){if(delete _.request,_.aborted)_.state="unloaded",u(null);else if(S)_.state="errored",u(S);else if(C){this.map._refreshExpiredTiles&&_.setExpiryData({cacheControl:R,expires:O});const U=s.window.ImageBitmap&&C instanceof s.window.ImageBitmap&&(Yi==null&&(Yi=s.window.OffscreenCanvas&&new s.window.OffscreenCanvas(1,1).getContext("2d")&&typeof s.window.createImageBitmap=="function"),Yi),G=1-(C.width-s.prevPowerOfTwo(C.width))/2;G<1||_.neighboringTiles||(_.neighboringTiles=this._getNeighboringTiles(_.tileID));const q=U?C:s.exported.getImageData(C,G),ae={uid:_.uid,coord:_.tileID,source:this.id,rawImageData:q,encoding:this.encoding,padding:G};_.actor&&_.state!=="expired"||(_.actor=this.dispatcher.getActor(),_.actor.send("loadDEMTile",ae,y.bind(this),void 0,!0))}}).bind(this))}_getNeighboringTiles(_){const u=_.canonical,m=Math.pow(2,u.z),y=(u.x-1+m)%m,S=u.x===0?_.wrap-1:_.wrap,C=(u.x+1+m)%m,R=u.x+1===m?_.wrap+1:_.wrap,O={};return O[new s.OverscaledTileID(_.overscaledZ,S,u.z,y,u.y).key]={backfilled:!1},O[new s.OverscaledTileID(_.overscaledZ,R,u.z,C,u.y).key]={backfilled:!1},u.y>0&&(O[new s.OverscaledTileID(_.overscaledZ,S,u.z,y,u.y-1).key]={backfilled:!1},O[new s.OverscaledTileID(_.overscaledZ,_.wrap,u.z,u.x,u.y-1).key]={backfilled:!1},O[new s.OverscaledTileID(_.overscaledZ,R,u.z,C,u.y-1).key]={backfilled:!1}),u.y+1<m&&(O[new s.OverscaledTileID(_.overscaledZ,S,u.z,y,u.y+1).key]={backfilled:!1},O[new s.OverscaledTileID(_.overscaledZ,_.wrap,u.z,u.x,u.y+1).key]={backfilled:!1},O[new s.OverscaledTileID(_.overscaledZ,R,u.z,C,u.y+1).key]={backfilled:!1}),O}unloadTile(_){_.demTexture&&this.map.painter.saveTileTexture(_.demTexture),_.fbo&&(_.fbo.destroy(),delete _.fbo),_.dem&&delete _.dem,delete _.neighboringTiles,_.state="unloaded"}},geojson:class extends s.Evented{constructor(_,u,m,y){super(),this.id=_,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=m.getActor(),this.setEventedParent(y),this._data=u.data,this._options=s.extend({},u),this._collectResourceTiming=u.collectResourceTiming,u.maxzoom!==void 0&&(this.maxzoom=u.maxzoom),u.type&&(this.type=u.type),u.attribution&&(this.attribution=u.attribution),this.promoteId=u.promoteId;const S=s.EXTENT/this.tileSize;this.workerOptions=s.extend({source:this.id,cluster:u.cluster||!1,geojsonVtOptions:{buffer:(u.buffer!==void 0?u.buffer:128)*S,tolerance:(u.tolerance!==void 0?u.tolerance:.375)*S,extent:s.EXTENT,maxZoom:this.maxzoom,lineMetrics:u.lineMetrics||!1,generateId:u.generateId||!1},superclusterOptions:{maxZoom:u.clusterMaxZoom!==void 0?u.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,u.clusterMinPoints||2),extent:s.EXTENT,radius:(u.clusterRadius!==void 0?u.clusterRadius:50)*S,log:!1,generateId:u.generateId||!1},clusterProperties:u.clusterProperties,filter:u.filter},u.workerOptions)}onAdd(_){this.map=_,this.setData(this._data)}setData(_){return this._data=_,this._updateWorkerData(),this}getClusterExpansionZoom(_,u){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:_,source:this.id},u),this}getClusterChildren(_,u){return this.actor.send("geojson.getClusterChildren",{clusterId:_,source:this.id},u),this}getClusterLeaves(_,u,m,y){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:_,limit:u,offset:m},y),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new s.Event("dataloading",{dataType:"source"})),this._loaded=!1;const _=s.extend({},this.workerOptions),u=this._data;typeof u=="string"?(_.request=this.map._requestManager.transformRequest(s.exported.resolveURL(u),s.ResourceType.Source),_.request.collectResourceTiming=this._collectResourceTiming):_.data=JSON.stringify(u),this._pendingLoad=this.actor.send(`${this.type}.loadData`,_,((m,y)=>{if(this._loaded=!0,this._pendingLoad=null,m)this.fire(new s.ErrorEvent(m));else{const S={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&y&&y.resourceTiming&&y.resourceTiming[this.id]&&(S.resourceTiming=y.resourceTiming[this.id]),this.fire(new s.Event("data",S)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)}))}loaded(){return this._loaded}loadTile(_,u){const m=_.actor?"reloadTile":"loadTile";_.actor=this.actor,_.request=this.actor.send(m,{type:this.type,uid:_.uid,tileID:_.tileID,tileZoom:_.tileZoom,zoom:_.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:s.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},((y,S)=>(delete _.request,_.unloadVectorData(),_.aborted?u(null):y?u(y):(_.loadVectorData(S,this.map.painter,m==="reloadTile"),u(null)))),void 0,m==="loadTile")}abortTile(_){_.request&&(_.request.cancel(),delete _.request),_.aborted=!0}unloadTile(_){_.unloadVectorData(),this.actor.send("removeTile",{uid:_.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return s.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends Zn{constructor(_,u,m,y){super(_,u,m,y),this.roundZoom=!0,this.type="video",this.options=u}load(){this._loaded=!1;const _=this.options;this.urls=[];for(const u of _.urls)this.urls.push(this.map._requestManager.transformRequest(u,s.ResourceType.Source).url);s.getVideo(this.urls,((u,m)=>{this._loaded=!0,u?this.fire(new s.ErrorEvent(u)):m&&(this.video=m,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading())}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(_){if(this.video){const u=this.video.seekable;_<u.start(0)||_>u.end(0)?this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${u.start(0)} and ${u.end(0)}-second mark.`))):this.video.currentTime=_}}getVideo(){return this.video}onAdd(_){this.map||(this.map=_,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const _=this.map.painter.context,u=_.gl;this.texture?this.video.paused||(this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE),u.texSubImage2D(u.TEXTURE_2D,0,0,0,u.RGBA,u.UNSIGNED_BYTE,this.video)):(this.texture=new s.Texture(_,this.video,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(_)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:Zn,canvas:class extends Zn{constructor(_,u,m,y){super(_,u,m,y),u.coordinates?Array.isArray(u.coordinates)&&u.coordinates.length===4&&!u.coordinates.some((S=>!Array.isArray(S)||S.length!==2||S.some((C=>typeof C!="number"))))||this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${_}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${_}`,null,'missing required property "coordinates"'))),u.animate&&typeof u.animate!="boolean"&&this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${_}`,null,'optional "animate" property must be a boolean value'))),u.canvas?typeof u.canvas=="string"||u.canvas instanceof s.window.HTMLCanvasElement||this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${_}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${_}`,null,'missing required property "canvas"'))),this.options=u,this.animate=u.animate===void 0||u.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof s.window.HTMLCanvasElement?this.options.canvas:s.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new s.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(_){this.map=_,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let _=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,_=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,_=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const u=this.map.painter.context;this.texture?(_||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new s.Texture(u,this.canvas,u.gl.RGBA,{premultiply:!0}),this._prepareData(u)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const _ of[this.canvas.width,this.canvas.height])if(isNaN(_)||_<=0)return!0;return!1}},custom:class extends s.Evented{constructor(_,u,m,y){super(),this.id=_,this.type="custom",this._dataType="raster",this._dispatcher=m,this._implementation=u,this.setEventedParent(y),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new s.ErrorEvent(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new s.ErrorEvent(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new Ct(this._implementation.bounds,this.minzoom,this.maxzoom)),u.update=this._update.bind(this),u.clearTiles=this._clearTiles.bind(this),u.coveringTiles=this._coveringTiles.bind(this),s.extend(this,s.pick(u,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return s.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(_){this._map=_,this._loaded=!1,this.fire(new s.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(_),this.load()}onRemove(_){this._implementation.onRemove&&this._implementation.onRemove(_)}hasTile(_){if(this._implementation.hasTile){const{x:u,y:m,z:y}=_.canonical;return this._implementation.hasTile({x:u,y:m,z:y})}return!this.tileBounds||this.tileBounds.contains(_.canonical)}loadTile(_,u){const{x:m,y,z:S}=_.tileID.canonical,C=new s.window.AbortController;_.request=Promise.resolve(this._implementation.loadTile({x:m,y,z:S},{signal:C.signal})).then((function(R){return delete _.request,_.aborted?(_.state="unloaded",u(null)):R===void 0?(_.state="errored",u(null)):R===null?(this.loadTileData(_,{width:this.tileSize,height:this.tileSize,data:null}),_.state="loaded",u(null)):(function(O){return O instanceof s.window.ImageData||O instanceof s.window.HTMLCanvasElement||O instanceof s.window.ImageBitmap||O instanceof s.window.HTMLImageElement})(R)?(this.loadTileData(_,R),_.state="loaded",void u(null)):(_.state="errored",u(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}).bind(this)).catch((R=>{R.code!==20&&(_.state="errored",u(R))})),_.request.cancel=()=>C.abort()}loadTileData(_,u){Yt.loadTileData(_,u,this._map.painter)}unloadTileData(_){Yt.unloadTileData(_,this._map.painter)}unloadTile(_,u){if(this.unloadTileData(_),this._implementation.unloadTile){const{x:m,y,z:S}=_.tileID.canonical;this._implementation.unloadTile({x:m,y,z:S})}u()}abortTile(_,u){_.request&&_.request.cancel&&(_.request.cancel(),delete _.request),u()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map((_=>({x:_.canonical.x,y:_.canonical.y,z:_.canonical.z})))}_clearTiles(){this._map.style._clearSource(this.id)}_update(){this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"}))}}},oi=function(_,u,m,y){const S=new Un[u.type](_,u,m,y);if(S.id!==_)throw new Error(`Expected Source id to be ${_} instead of ${S.id}`);return s.bindAll(["load","abort","unload","serialize","prepare"],S),S};function Kn(_,u){const m=s.identity([]);return s.scale(m,m,[.5*_.width,.5*-_.height,1]),s.translate(m,m,[1,-1,0]),s.multiply(m,m,_.calculateProjMatrix(u.toUnwrapped())),Float32Array.from(m)}function Pi(_,u,m,y,S,C,R,O=!1){const U=_.tilesIn(y,R,O);U.sort(es);const G=[];for(const ae of U)G.push({wrappedTileID:ae.tile.tileID.wrapped().key,queryResults:ae.tile.queryRenderedFeatures(u,m,_._state,ae,S,C,Kn(_.transform,ae.tile.tileID),O)});const q=(function(ae){const he={},ye={};for(const we of ae){const be=we.queryResults,Te=we.wrappedTileID,le=ye[Te]=ye[Te]||{};for(const _e in be){const Ie=be[_e],Me=le[_e]=le[_e]||{},$e=he[_e]=he[_e]||[];for(const qe of Ie)Me[qe.featureIndex]||(Me[qe.featureIndex]=!0,$e.push(qe))}}return he})(G);for(const ae in q)q[ae].forEach((he=>{const ye=he.feature,we=ye.layer;we&&we.type!=="background"&&we.type!=="sky"&&(ye.source=we.source,we["source-layer"]&&(ye.sourceLayer=we["source-layer"]),ye.state=ye.id!==void 0?_.getFeatureState(we["source-layer"],ye.id):{})}));return q}function hr(_,u){const m=_.getRenderableIds().map((C=>_.getTileByID(C))),y=[],S={};for(let C=0;C<m.length;C++){const R=m[C],O=R.tileID.canonical.key;S[O]||(S[O]=!0,R.querySourceFeatures(y,u))}return y}function es(_,u){const m=_.tileID,y=u.tileID;return m.overscaledZ-y.overscaledZ||m.canonical.y-y.canonical.y||m.wrap-y.wrap||m.canonical.x-y.canonical.x}function br(){return ke.workerClass!=null?new ke.workerClass:new s.window.Worker(ke.workerUrl)}const Uo="mapboxgl_preloaded_worker_pool";class ts{constructor(){this.active={}}acquire(u){if(!this.workers)for(this.workers=[];this.workers.length<ts.workerCount;)this.workers.push(new br);return this.active[u]=!0,this.workers.slice()}release(u){delete this.active[u],this.numActive()===0&&(this.workers.forEach((m=>{m.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[Uo]}numActive(){return Object.keys(this.active).length}}let Dr;function $r(){return Dr||(Dr=new ts),Dr}function ws(_,u){const m={};for(const y in _)y!=="ref"&&(m[y]=_[y]);return s.refProperties.forEach((y=>{y in u&&(m[y]=u[y])})),m}function Vs(_){_=_.slice();const u=Object.create(null);for(let m=0;m<_.length;m++)u[_[m].id]=_[m];for(let m=0;m<_.length;m++)"ref"in _[m]&&(_[m]=ws(_[m],u[_[m].ref]));return _}ts.workerCount=2;const Hn={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function la(_,u,m){m.push({command:Hn.addSource,args:[_,u[_]]})}function Ts(_,u,m){u.push({command:Hn.removeSource,args:[_]}),m[_]=!0}function $o(_,u,m,y){Ts(_,m,y),la(_,u,m)}function ja(_,u,m){let y;for(y in _[m])if(_[m].hasOwnProperty(y)&&y!=="data"&&!p(_[m][y],u[m][y]))return!1;for(y in u[m])if(u[m].hasOwnProperty(y)&&y!=="data"&&!p(_[m][y],u[m][y]))return!1;return!0}function wo(_,u,m,y,S,C){let R;for(R in u=u||{},_=_||{})_.hasOwnProperty(R)&&(p(_[R],u[R])||m.push({command:C,args:[y,R,u[R],S]}));for(R in u)u.hasOwnProperty(R)&&!_.hasOwnProperty(R)&&(p(_[R],u[R])||m.push({command:C,args:[y,R,u[R],S]}))}function To(_){return _.id}function Wa(_,u){return _[u.id]=u,_}class cc{constructor(u,m){this.reset(u,m)}reset(u,m){this.points=u||[],this._distances=[0];for(let y=1;y<this.points.length;y++)this._distances[y]=this._distances[y-1]+this.points[y].dist(this.points[y-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(m||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(u){if(this.points.length===1)return this.points[0];u=s.clamp(u,0,1);let m=1,y=this._distances[m];const S=u*this.paddedLength+this.padding;for(;y<S&&m<this._distances.length;)y=this._distances[++m];const C=m-1,R=this._distances[C],O=y-R,U=O>0?(S-R)/O:0;return this.points[C].mult(1-U).add(this.points[m].mult(U))}}class jo{constructor(u,m,y){const S=this.boxCells=[],C=this.circleCells=[];this.xCellCount=Math.ceil(u/y),this.yCellCount=Math.ceil(m/y);for(let R=0;R<this.xCellCount*this.yCellCount;R++)S.push([]),C.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=u,this.height=m,this.xScale=this.xCellCount/u,this.yScale=this.yCellCount/m,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(u,m,y,S,C){this._forEachCell(m,y,S,C,this._insertBoxCell,this.boxUid++),this.boxKeys.push(u),this.bboxes.push(m),this.bboxes.push(y),this.bboxes.push(S),this.bboxes.push(C)}insertCircle(u,m,y,S){this._forEachCell(m-S,y-S,m+S,y+S,this._insertCircleCell,this.circleUid++),this.circleKeys.push(u),this.circles.push(m),this.circles.push(y),this.circles.push(S)}_insertBoxCell(u,m,y,S,C,R){this.boxCells[C].push(R)}_insertCircleCell(u,m,y,S,C,R){this.circleCells[C].push(R)}_query(u,m,y,S,C,R){if(y<0||u>this.width||S<0||m>this.height)return!C&&[];const O=[];if(u<=0&&m<=0&&this.width<=y&&this.height<=S){if(C)return!0;for(let U=0;U<this.boxKeys.length;U++)O.push({key:this.boxKeys[U],x1:this.bboxes[4*U],y1:this.bboxes[4*U+1],x2:this.bboxes[4*U+2],y2:this.bboxes[4*U+3]});for(let U=0;U<this.circleKeys.length;U++){const G=this.circles[3*U],q=this.circles[3*U+1],ae=this.circles[3*U+2];O.push({key:this.circleKeys[U],x1:G-ae,y1:q-ae,x2:G+ae,y2:q+ae})}return R?O.filter(R):O}return this._forEachCell(u,m,y,S,this._queryCell,O,{hitTest:C,seenUids:{box:{},circle:{}}},R),C?O.length>0:O}_queryCircle(u,m,y,S,C){const R=u-y,O=u+y,U=m-y,G=m+y;if(O<0||R>this.width||G<0||U>this.height)return!S&&[];const q=[];return this._forEachCell(R,U,O,G,this._queryCellCircle,q,{hitTest:S,circle:{x:u,y:m,radius:y},seenUids:{box:{},circle:{}}},C),S?q.length>0:q}query(u,m,y,S,C){return this._query(u,m,y,S,!1,C)}hitTest(u,m,y,S,C){return this._query(u,m,y,S,!0,C)}hitTestCircle(u,m,y,S){return this._queryCircle(u,m,y,!0,S)}_queryCell(u,m,y,S,C,R,O,U){const G=O.seenUids,q=this.boxCells[C];if(q!==null){const he=this.bboxes;for(const ye of q)if(!G.box[ye]){G.box[ye]=!0;const we=4*ye;if(u<=he[we+2]&&m<=he[we+3]&&y>=he[we+0]&&S>=he[we+1]&&(!U||U(this.boxKeys[ye]))){if(O.hitTest)return R.push(!0),!0;R.push({key:this.boxKeys[ye],x1:he[we],y1:he[we+1],x2:he[we+2],y2:he[we+3]})}}}const ae=this.circleCells[C];if(ae!==null){const he=this.circles;for(const ye of ae)if(!G.circle[ye]){G.circle[ye]=!0;const we=3*ye;if(this._circleAndRectCollide(he[we],he[we+1],he[we+2],u,m,y,S)&&(!U||U(this.circleKeys[ye]))){if(O.hitTest)return R.push(!0),!0;{const be=he[we],Te=he[we+1],le=he[we+2];R.push({key:this.circleKeys[ye],x1:be-le,y1:Te-le,x2:be+le,y2:Te+le})}}}}}_queryCellCircle(u,m,y,S,C,R,O,U){const G=O.circle,q=O.seenUids,ae=this.boxCells[C];if(ae!==null){const ye=this.bboxes;for(const we of ae)if(!q.box[we]){q.box[we]=!0;const be=4*we;if(this._circleAndRectCollide(G.x,G.y,G.radius,ye[be+0],ye[be+1],ye[be+2],ye[be+3])&&(!U||U(this.boxKeys[we])))return R.push(!0),!0}}const he=this.circleCells[C];if(he!==null){const ye=this.circles;for(const we of he)if(!q.circle[we]){q.circle[we]=!0;const be=3*we;if(this._circlesCollide(ye[be],ye[be+1],ye[be+2],G.x,G.y,G.radius)&&(!U||U(this.circleKeys[we])))return R.push(!0),!0}}}_forEachCell(u,m,y,S,C,R,O,U){const G=this._convertToXCellCoord(u),q=this._convertToYCellCoord(m),ae=this._convertToXCellCoord(y),he=this._convertToYCellCoord(S);for(let ye=G;ye<=ae;ye++)for(let we=q;we<=he;we++)if(C.call(this,u,m,y,S,this.xCellCount*we+ye,R,O,U))return}_convertToXCellCoord(u){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(u*this.xScale)))}_convertToYCellCoord(u){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(u*this.yScale)))}_circlesCollide(u,m,y,S,C,R){const O=S-u,U=C-m,G=y+R;return G*G>O*O+U*U}_circleAndRectCollide(u,m,y,S,C,R,O){const U=(R-S)/2,G=Math.abs(u-(S+U));if(G>U+y)return!1;const q=(O-C)/2,ae=Math.abs(m-(C+q));if(ae>q+y)return!1;if(G<=U||ae<=q)return!0;const he=G-U,ye=ae-q;return he*he+ye*ye<=y*y}}const So={unknown:0,flipRequired:1,flipNotRequired:2},Ll=Math.tan(85*Math.PI/180);function Mt(_,u,m,y,S,C,R){const O=s.create();if(m)if(C.name==="globe"){const U=s.calculateGlobeLabelMatrix(S,u);s.multiply(O,O,U)}else{const U=W([],R);O[0]=U[0],O[1]=U[1],O[4]=U[2],O[5]=U[3],y||s.rotateZ(O,O,S.angle)}else s.multiply(O,S.labelPlaneMatrix,_);return O}function ca(_,u,m,y,S,C,R){const O=Mt(_,u,m,y,S,C,R);return C.name==="globe"&&m||(O[2]=O[6]=O[10]=O[14]=0),O}function Fi(_,u,m,y,S,C,R){if(m){if(C.name==="globe"){const O=Mt(_,u,m,y,S,C,R);return s.invert(O,O),s.multiply(O,_,O),O}{const O=s.clone(_),U=s.identity([]);return U[0]=R[0],U[1]=R[1],U[4]=R[2],U[5]=R[3],s.multiply(O,O,U),y||s.rotateZ(O,O,-S.angle),O}}return S.glCoordMatrix}function qi(_,u,m,y){const S=[_,u,m,1];m?s.transformMat4$1(S,S,y):ni(S,S,y);const C=S[3];return S[0]/=C,S[1]/=C,S[2]/=C,S}function Ol(_,u){return Math.min(.5+_/u*.5,1.5)}function Bs(_,u){const m=_[0]/_[3],y=_[1]/_[3];return m>=-u[0]&&m<=u[0]&&y>=-u[1]&&y<=u[1]}function uc(_,u,m,y,S,C,R,O,U,G){const q=m.transform,ae=y?_.textSizeData:_.iconSizeData,he=s.evaluateSizeForZoom(ae,m.transform.zoom),ye=q.projection.name==="globe",we=[256/m.width*2+1,256/m.height*2+1],be=y?_.text.dynamicLayoutVertexArray:_.icon.dynamicLayoutVertexArray;be.clear();let Te=null;ye&&(Te=y?_.text.globeExtVertexArray:_.icon.globeExtVertexArray);const le=_.lineVertexArray,_e=y?_.text.placedSymbolArray:_.icon.placedSymbolArray,Ie=m.transform.width/m.transform.height;let Me,$e=!1;for(let qe=0;qe<_e.length;qe++){const Ze=_e.get(qe),{numGlyphs:ot,writingMode:it}=Ze;if(it!==s.WritingMode.vertical||$e||Me===s.WritingMode.horizontal||($e=!0),Me=it,(Ze.hidden||it===s.WritingMode.vertical)&&!$e){ro(ot,be);continue}$e=!1;const mt=new s.Point(Ze.tileAnchorX,Ze.tileAnchorY);let{x:$t,y:lt,z:Rt}=q.projection.projectTilePoint(mt.x,mt.y,G.canonical);if(U){const[jn,xn,Dn]=U(mt);$t+=jn,lt+=xn,Rt+=Dn}const vt=[$t,lt,Rt,1];if(s.transformMat4$1(vt,vt,u),!Bs(vt,we)){ro(ot,be);continue}const Wt=Ol(m.transform.cameraToCenterDistance,vt[3]),ht=s.evaluateSizeForFeature(ae,he,Ze),xt=R?ht/Wt:ht*Wt,Ut=qi($t,lt,Rt,S);if(Ut[3]<=0){ro(ot,be);continue}let Bt={};const qt=R?null:U,Pn=ln(Ze,xt,!1,O,u,S,C,_.glyphOffsetArray,le,be,Te,Ut,mt,Bt,Ie,qt,q.projection,G,R);$e=Pn.useVertical,qt&&Pn.needsFlipping&&(Bt={}),(Pn.notEnoughRoom||$e||Pn.needsFlipping&&ln(Ze,xt,!0,O,u,S,C,_.glyphOffsetArray,le,be,Te,Ut,mt,Bt,Ie,qt,q.projection,G,R).notEnoughRoom)&&ro(ot,be)}y?(_.text.dynamicLayoutVertexBuffer.updateData(be),Te&&_.text.globeExtVertexBuffer.updateData(Te)):(_.icon.dynamicLayoutVertexBuffer.updateData(be),Te&&_.icon.globeExtVertexBuffer.updateData(Te))}function Ji(_,u,m,y,S,C,R,O,U,G,q,ae,he,ye,we,be){const{lineStartIndex:Te,glyphStartIndex:le,segment:_e}=O,Ie=le+O.numGlyphs,Me=Te+O.lineLength,$e=u.getoffsetX(le),qe=u.getoffsetX(Ie-1),Ze=fr(_*$e,m,y,S,C,R,_e,Te,Me,U,G,q,ae,he,!0,ye,we,be);if(!Ze)return null;const ot=fr(_*qe,m,y,S,C,R,_e,Te,Me,U,G,q,ae,he,!0,ye,we,be);return ot?{first:Ze,last:ot}:null}function ua(_,u,m,y){return _===s.WritingMode.horizontal&&Math.abs(y)>Math.abs(m)?{useVertical:!0}:_===s.WritingMode.vertical?y>0?{needsFlipping:!0}:null:u!==So.unknown&&(function(S,C){return S===0||Math.abs(C/S)>Ll})(m,y)?u===So.flipRequired?{needsFlipping:!0}:null:m<0?{needsFlipping:!0}:null}function ln(_,u,m,y,S,C,R,O,U,G,q,ae,he,ye,we,be,Te,le,_e){const Ie=u/24,Me=_.lineOffsetX*Ie,$e=_.lineOffsetY*Ie,{lineStartIndex:qe,glyphStartIndex:Ze,numGlyphs:ot,segment:it,writingMode:mt,flipState:$t}=_,lt=qe+_.lineLength,Rt=vt=>{if(q){const[Ut,Bt,qt]=vt.up,Pn=G.length;s.updateGlobeVertexNormal(q,Pn+0,Ut,Bt,qt),s.updateGlobeVertexNormal(q,Pn+1,Ut,Bt,qt),s.updateGlobeVertexNormal(q,Pn+2,Ut,Bt,qt),s.updateGlobeVertexNormal(q,Pn+3,Ut,Bt,qt)}const[Wt,ht,xt]=vt.point;s.addDynamicAttributes(G,Wt,ht,xt,vt.angle)};if(ot>1){const vt=Ji(Ie,O,Me,$e,m,ae,he,_,U,C,ye,be,!1,Te,le,_e);if(!vt)return{notEnoughRoom:!0};if(y&&!m){let[Wt,ht,xt]=vt.first.point,[Ut,Bt,qt]=vt.last.point;[Wt,ht]=qi(Wt,ht,xt,R),[Ut,Bt]=qi(Ut,Bt,qt,R);const Pn=ua(mt,$t,(Ut-Wt)*we,Bt-ht);if(_.flipState=Pn&&Pn.needsFlipping?So.flipRequired:So.flipNotRequired,Pn)return Pn}Rt(vt.first);for(let Wt=Ze+1;Wt<Ze+ot-1;Wt++){const ht=fr(Ie*O.getoffsetX(Wt),Me,$e,m,ae,he,it,qe,lt,U,C,ye,be,!1,!1,Te,le,_e);if(!ht)return G.length-=4*(Wt-Ze),{notEnoughRoom:!0};Rt(ht)}Rt(vt.last)}else{if(y&&!m){const Wt=qi(he.x,he.y,0,S),ht=qe+it+1,xt=new s.Point(U.getx(ht),U.gety(ht)),Ut=qi(xt.x,xt.y,0,S),Bt=Ut[3]>0?Ut:Xn(he,xt,Wt,1,S,void 0,Te,le.canonical),qt=ua(mt,$t,(Bt[0]-Wt[0])*we,Bt[1]-Wt[1]);if(_.flipState=qt&&qt.needsFlipping?So.flipRequired:So.flipNotRequired,qt)return qt}const vt=fr(Ie*O.getoffsetX(Ze),Me,$e,m,ae,he,it,qe,lt,U,C,ye,be,!1,!1,Te,le,_e);if(!vt)return{notEnoughRoom:!0};Rt(vt)}return{}}function Fn(_,u,m,y,S){const{x:C,y:R,z:O}=y.projectTilePoint(_.x,_.y,u);if(!S)return qi(C,R,O,m);const[U,G,q]=S(_);return qi(C+U,R+G,O+q,m)}function Xn(_,u,m,y,S,C,R,O){const U=Fn(_.sub(u)._unit()._add(_),O,S,R,C);return s.sub(U,m,U),s.normalize(U,U),s.scaleAndAdd(U,m,U,y)}function fr(_,u,m,y,S,C,R,O,U,G,q,ae,he,ye,we,be,Te,le){const _e=y?_-u:_+u;let Ie=_e>0?1:-1,Me=0;y&&(Ie*=-1,Me=Math.PI),Ie<0&&(Me+=Math.PI);let $e=O+R+(Ie>0?0:1)|0,qe=S,Ze=S,ot=0,it=0;const mt=Math.abs(_e),$t=[],lt=[];let Rt=C,vt=Rt;const Wt=()=>Xn(vt,Rt,Ze,mt-ot+1,q,he,be,Te.canonical);for(;ot+it<=mt;){if($e+=Ie,$e<O||$e>=U)return null;if(Ze=qe,vt=Rt,$t.push(Ze),ye&&lt.push(vt),Rt=new s.Point(G.getx($e),G.gety($e)),qe=ae[$e],!qe){const Dn=Fn(Rt,Te.canonical,q,be,he);qe=Dn[3]>0?ae[$e]=Dn:Wt()}ot+=it,it=s.distance(Ze,qe)}we&&he&&(ae[$e]&&(qe=Wt(),it=s.distance(Ze,qe)),ae[$e]=qe);const ht=(mt-ot)/it,xt=Rt.sub(vt)._mult(ht)._add(vt),Ut=s.sub([],qe,Ze),Bt=s.scaleAndAdd([],Ze,Ut,ht);let qt=[0,0,1],Pn=Ut[0],jn=Ut[1];if(le&&(qt=be.upVector(Te.canonical,xt.x,xt.y),qt[0]!==0||qt[1]!==0||qt[2]!==1)){const Dn=[qt[2],0,-qt[0]],pi=s.cross([],qt,Dn);s.normalize(Dn,Dn),s.normalize(pi,pi),Pn=s.dot(Ut,Dn),jn=s.dot(Ut,pi)}if(m){const Dn=s.cross([],qt,Ut);s.normalize(Dn,Dn),s.scaleAndAdd(Bt,Bt,Dn,m*Ie)}const xn=Me+Math.atan2(jn,Pn);return $t.push(Bt),ye&&lt.push(xt),{point:Bt,angle:xn,path:$t,tilePath:lt,up:qt}}function ro(_,u){const m=u.length,y=m+4*_;u.resize(y),u.float32.fill(-1/0,4*m,4*y)}function ni(_,u,m){const y=u[0],S=u[1];return _[0]=m[0]*y+m[4]*S+m[12],_[1]=m[1]*y+m[5]*S+m[13],_[3]=m[3]*y+m[7]*S+m[15],_}const Ar=100;class Wo{constructor(u,m,y=new jo(u.width+200,u.height+200,25),S=new jo(u.width+200,u.height+200,25)){this.transform=u,this.grid=y,this.ignoredGrid=S,this.pitchfactor=Math.cos(u._pitch)*u.cameraToCenterDistance,this.screenRightBoundary=u.width+Ar,this.screenBottomBoundary=u.height+Ar,this.gridRightBoundary=u.width+200,this.gridBottomBoundary=u.height+200,this.fogState=m}placeCollisionBox(u,m,y,S,C,R,O,U){let G=y.projectedAnchorX,q=y.projectedAnchorY,ae=y.projectedAnchorZ;const he=y.elevation,ye=y.tileID,we=u.getProjection();if(he&&ye){const[qe,Ze,ot]=we.upVector(ye.canonical,y.tileAnchorX,y.tileAnchorY),it=we.upVectorScale(ye.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;G+=qe*he*it,q+=Ze*he*it,ae+=ot*he*it}const be=this.projectAndGetPerspectiveRatio(O,G,q,ae,y.tileID,we.name==="globe"||!!he||this.transform.pitch>0,we),Te=R*be.perspectiveRatio,le=(y.x1*m+S.x-y.padding)*Te+be.point.x,_e=(y.y1*m+S.y-y.padding)*Te+be.point.y,Ie=(y.x2*m+S.x+y.padding)*Te+be.point.x,Me=(y.y2*m+S.y+y.padding)*Te+be.point.y,$e=be.perspectiveRatio<=.55||be.occluded;return!this.isInsideGrid(le,_e,Ie,Me)||!C&&this.grid.hitTest(le,_e,Ie,Me,U)||$e?{box:[],offscreen:!1,occluded:be.occluded}:{box:[le,_e,Ie,Me],offscreen:this.isOffscreen(le,_e,Ie,Me),occluded:!1}}placeCollisionCircles(u,m,y,S,C,R,O,U,G,q,ae,he,ye,we,be){const Te=[],le=this.transform.elevation,_e=u.getProjection(),Ie=le?le.getAtTileOffsetFunc(be,this.transform.center.lat,this.transform.worldSize,_e):null,Me=new s.Point(y.tileAnchorX,y.tileAnchorY);let{x:$e,y:qe,z:Ze}=_e.projectTilePoint(Me.x,Me.y,be.canonical);if(Ie){const[xt,Ut,Bt]=Ie(Me);$e+=xt,qe+=Ut,Ze+=Bt}const ot=_e.name==="globe",it=this.projectAndGetPerspectiveRatio(O,$e,qe,Ze,be,ot||!!le||this.transform.pitch>0,_e),{perspectiveRatio:mt}=it,$t=(ae?R/mt:R*mt)/s.ONE_EM,lt=qi($e,qe,Ze,U),Rt=it.signedDistanceFromCamera>0?Ji($t,C,y.lineOffsetX*$t,y.lineOffsetY*$t,!1,lt,Me,y,S,U,{},le&&!ae?Ie:null,ae&&!!le,_e,be,ae):null;let vt=!1,Wt=!1,ht=!0;if(Rt&&!it.occluded){const xt=.5*ye*mt+we,Ut=new s.Point(-100,-100),Bt=new s.Point(this.screenRightBoundary,this.screenBottomBoundary),qt=new cc,{first:Pn,last:jn}=Rt,xn=Pn.path.length;let Dn=[];for(let kn=xn-1;kn>=1;kn--)Dn.push(Pn.path[kn]);for(let kn=1;kn<jn.path.length;kn++)Dn.push(jn.path[kn]);const pi=2.5*xt;G&&(Dn=Dn.map((([kn,Mi,Ui],Ki)=>(Ie&&!ot&&(Ui=Ie(Ki<xn-1?Pn.tilePath[xn-1-Ki]:jn.tilePath[Ki-xn+2])[2]),qi(kn,Mi,Ui,G)))),Dn.some((kn=>kn[3]<=0))&&(Dn=[]));let fi=[];if(Dn.length>0){let kn=1/0,Mi=-1/0,Ui=1/0,Ki=-1/0;for(const $i of Dn)kn=Math.min(kn,$i[0]),Ui=Math.min(Ui,$i[1]),Mi=Math.max(Mi,$i[0]),Ki=Math.max(Ki,$i[1]);Mi>=Ut.x&&kn<=Bt.x&&Ki>=Ut.y&&Ui<=Bt.y&&(fi=[Dn.map(($i=>new s.Point($i[0],$i[1])))],(kn<Ut.x||Mi>Bt.x||Ui<Ut.y||Ki>Bt.y)&&(fi=s.clipLine(fi,Ut.x,Ut.y,Bt.x,Bt.y)))}for(const kn of fi){qt.reset(kn,.25*xt);let Mi=0;Mi=qt.length<=.5*xt?1:Math.ceil(qt.paddedLength/pi)+1;for(let Ui=0;Ui<Mi;Ui++){const Ki=Ui/Math.max(Mi-1,1),$i=qt.lerp(Ki),Ns=$i.x+Ar,ks=$i.y+Ar;Te.push(Ns,ks,xt,0);const va=Ns-xt,Ks=ks-xt,er=Ns+xt,ji=ks+xt;if(ht=ht&&this.isOffscreen(va,Ks,er,ji),Wt=Wt||this.isInsideGrid(va,Ks,er,ji),!m&&this.grid.hitTestCircle(Ns,ks,xt,he)&&(vt=!0,!q))return{circles:[],offscreen:!1,collisionDetected:vt,occluded:!1}}}}return{circles:!q&&vt||!Wt?[]:Te,offscreen:ht,collisionDetected:vt,occluded:it.occluded}}queryRenderedSymbols(u){if(u.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const m=[];let y=1/0,S=1/0,C=-1/0,R=-1/0;for(const q of u){const ae=new s.Point(q.x+Ar,q.y+Ar);y=Math.min(y,ae.x),S=Math.min(S,ae.y),C=Math.max(C,ae.x),R=Math.max(R,ae.y),m.push(ae)}const O=this.grid.query(y,S,C,R).concat(this.ignoredGrid.query(y,S,C,R)),U={},G={};for(const q of O){const ae=q.key;if(U[ae.bucketInstanceId]===void 0&&(U[ae.bucketInstanceId]={}),U[ae.bucketInstanceId][ae.featureIndex])continue;const he=[new s.Point(q.x1,q.y1),new s.Point(q.x2,q.y1),new s.Point(q.x2,q.y2),new s.Point(q.x1,q.y2)];s.polygonIntersectsPolygon(m,he)&&(U[ae.bucketInstanceId][ae.featureIndex]=!0,G[ae.bucketInstanceId]===void 0&&(G[ae.bucketInstanceId]=[]),G[ae.bucketInstanceId].push(ae.featureIndex))}return G}insertCollisionBox(u,m,y,S,C){(m?this.ignoredGrid:this.grid).insert({bucketInstanceId:y,featureIndex:S,collisionGroupID:C},u[0],u[1],u[2],u[3])}insertCollisionCircles(u,m,y,S,C){const R=m?this.ignoredGrid:this.grid,O={bucketInstanceId:y,featureIndex:S,collisionGroupID:C};for(let U=0;U<u.length;U+=4)R.insertCircle(O,u[U],u[U+1],u[U+2])}projectAndGetPerspectiveRatio(u,m,y,S,C,R,O){const U=[m,y,S,1];let G=!1;S||this.transform.pitch>0?(s.transformMat4$1(U,U,u),this.fogState&&C&&O.name!=="globe"&&(G=(function(he,ye,we,be,Te,le){const _e=le.calculateFogTileMatrix(Te),Ie=[ye,we,be];return s.transformMat4(Ie,Ie,_e),Ge(he,Ie,le.pitch,le._fov)})(this.fogState,m,y,S,C.toUnwrapped(),this.transform)>.9)):ni(U,U,u);const q=U[3];return{point:new s.Point((U[0]/q+1)/2*this.transform.width+Ar,(-U[1]/q+1)/2*this.transform.height+Ar),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(O)/q*.5,1.5),signedDistanceFromCamera:q,occluded:R&&U[2]>q||G}}isOffscreen(u,m,y,S){return y<Ar||u>=this.screenRightBoundary||S<Ar||m>this.screenBottomBoundary}isInsideGrid(u,m,y,S){return y>=0&&u<this.gridRightBoundary&&S>=0&&m<this.gridBottomBoundary}getViewportMatrix(){const u=s.identity([]);return s.translate(u,u,[-100,-100,0]),u}}function Gs(_,u,m){const y=u.createTileMatrix(_,_.worldSize,m.toUnwrapped());return s.multiply(new Float32Array(16),_.projMatrix,y)}function Cr(_,u,m){if(u.projection.name===m.projection.name)return _.projMatrix;const y=m.clone();return y.setProjection(u.projection),Gs(y,u.getProjection(),_)}function zi(_,u,m){return u.name===m.projection.name?_.projMatrix:Gs(m,u,_)}class fu{constructor(u,m,y,S){this.opacity=u?Math.max(0,Math.min(1,u.opacity+(u.placed?m:-m))):S&&y?1:0,this.placed=y}isHidden(){return this.opacity===0&&!this.placed}}class Fs{constructor(u,m,y,S,C,R=!1){this.text=new fu(u?u.text:null,m,y,C),this.icon=new fu(u?u.icon:null,m,S,C),this.clipped=R}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class ol{constructor(u,m,y,S=!1){this.text=u,this.icon=m,this.skipFade=y,this.clipped=S}}class Vl{constructor(){this.invProjMatrix=s.create(),this.viewportMatrix=s.create(),this.circles=[]}}class Ss{constructor(u,m,y,S,C){this.bucketInstanceId=u,this.featureIndex=m,this.sourceLayerIndex=y,this.bucketIndex=S,this.tileID=C}}class Rh{constructor(u){this.crossSourceCollisions=u,this.maxGroupID=0,this.collisionGroups={}}get(u){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[u]){const m=++this.maxGroupID;this.collisionGroups[u]={ID:m,predicate:y=>y.collisionGroupID===m}}return this.collisionGroups[u]}}function Eo(_,u,m,y,S){const{horizontalAlign:C,verticalAlign:R}=s.getAnchorAlignment(_),O=-(C-.5)*u,U=-(R-.5)*m,G=s.evaluateVariableOffset(_,y);return new s.Point(O+G[0]*S,U+G[1]*S)}function al(_,u,m,y,S){const C=new s.Point(_,u);return m&&C._rotate(y?S:-S),C}class Co{constructor(u,m,y,S,C){this.transform=u.clone(),this.projection=u.projection.name,this.collisionIndex=new Wo(this.transform,C),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=m,this.retainedQueryData={},this.collisionGroups=new Rh(y),this.collisionCircleArrays={},this.prevPlacement=S,S&&(S.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(u,m,y,S){const C=y.getBucket(m),R=y.latestFeatureIndex;if(!C||!R||m.id!==C.layerIds[0])return;const O=C.layers[0].layout,U=y.collisionBoxArray,G=Math.pow(2,this.transform.zoom-y.tileID.overscaledZ),q=y.tileSize/s.EXTENT,ae=y.tileID.toUnwrapped();this.transform.setProjection(C.projection);const he=(ye=y.tileID,we=C.getProjection(),be=this.transform,we.name===this.projection?be.calculateProjMatrix(ye.toUnwrapped()):Gs(be,we,ye));var ye,we,be;const Te=O.get("text-pitch-alignment")==="map",le=O.get("text-rotation-alignment")==="map";m.compileFilter();const _e=m.dynamicFilter(),Ie=m.dynamicFilterNeedsFeature(),Me=this.transform.calculatePixelsToTileUnitsMatrix(y),$e=ca(he,y.tileID.canonical,Te,le,this.transform,C.getProjection(),Me);let qe=null;if(Te){const it=Fi(he,y.tileID.canonical,Te,le,this.transform,C.getProjection(),Me);qe=s.multiply([],this.transform.labelPlaneMatrix,it)}let Ze=null;_e&&y.latestFeatureIndex&&(Ze={unwrappedTileID:ae,dynamicFilter:_e,dynamicFilterNeedsFeature:Ie,featureIndex:y.latestFeatureIndex}),this.retainedQueryData[C.bucketInstanceId]=new Ss(C.bucketInstanceId,R,C.sourceLayerIndex,C.index,y.tileID);const ot={bucket:C,layout:O,posMatrix:he,textLabelPlaneMatrix:$e,labelToScreenMatrix:qe,clippingData:Ze,scale:G,textPixelRatio:q,holdingForFade:y.holdingForFade(),collisionBoxArray:U,partiallyEvaluatedTextSize:s.evaluateSizeForZoom(C.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:s.evaluateSizeForZoom(C.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(C.sourceID)};if(S)for(const it of C.sortKeyRanges){const{sortKey:mt,symbolInstanceStart:$t,symbolInstanceEnd:lt}=it;u.push({sortKey:mt,symbolInstanceStart:$t,symbolInstanceEnd:lt,parameters:ot})}else u.push({symbolInstanceStart:0,symbolInstanceEnd:C.symbolInstances.length,parameters:ot})}attemptAnchorPlacement(u,m,y,S,C,R,O,U,G,q,ae,he,ye,we,be,Te,le,_e){const{textOffset0:Ie,textOffset1:Me,crossTileID:$e}=he,qe=[Ie,Me],Ze=Eo(u,y,S,qe,C),ot=this.collisionIndex.placeCollisionBox(we,C,m,al(Ze.x,Ze.y,R,O,this.transform.angle),ae,U,G,q.predicate);if(Te){const it=we.getSymbolInstanceIconSize(_e,this.transform.zoom,he.placedIconSymbolIndex);if(this.collisionIndex.placeCollisionBox(we,it,Te,al(Ze.x,Ze.y,R,O,this.transform.angle),ae,U,G,q.predicate).box.length===0)return}if(ot.box.length>0){let it;return this.prevPlacement&&this.prevPlacement.variableOffsets[$e]&&this.prevPlacement.placements[$e]&&this.prevPlacement.placements[$e].text&&(it=this.prevPlacement.variableOffsets[$e].anchor),this.variableOffsets[$e]={textOffset:qe,width:y,height:S,anchor:u,textScale:C,prevAnchor:it},this.markUsedJustification(we,u,he,be),we.allowVerticalPlacement&&(this.markUsedOrientation(we,be,he),this.placedOrientations[$e]=be),{shift:Ze,placedGlyphBoxes:ot}}}placeLayerBucketPart(u,m,y,S){const{bucket:C,layout:R,posMatrix:O,textLabelPlaneMatrix:U,labelToScreenMatrix:G,clippingData:q,textPixelRatio:ae,holdingForFade:he,collisionBoxArray:ye,partiallyEvaluatedTextSize:we,partiallyEvaluatedIconSize:be,collisionGroup:Te}=u.parameters,le=R.get("text-optional"),_e=R.get("icon-optional"),Ie=R.get("text-allow-overlap"),Me=R.get("icon-allow-overlap"),$e=R.get("text-rotation-alignment")==="map",qe=R.get("text-pitch-alignment")==="map",Ze=R.get("icon-text-fit")!=="none",ot=R.get("symbol-z-order")==="viewport-y";this.transform.setProjection(C.projection);let it=Ie&&(Me||!C.hasIconData()||_e),mt=Me&&(Ie||!C.hasTextData()||le);!C.collisionArrays&&ye&&C.deserializeCollisionBoxes(ye),y&&S&&C.updateCollisionDebugBuffers(this.transform.zoom,ye);const $t=(lt,Rt,vt)=>{const{crossTileID:Wt,numVerticalGlyphVertices:ht}=lt;if(q){const er={zoom:this.transform.zoom,pitch:this.transform.pitch};let ji=null;if(q.dynamicFilterNeedsFeature){const Ci=this.retainedQueryData[C.bucketInstanceId];ji=q.featureIndex.loadFeature({featureIndex:lt.featureIndex,bucketIndex:Ci.bucketIndex,sourceLayerIndex:Ci.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,q.dynamicFilter)(er,ji,this.retainedQueryData[C.bucketInstanceId].tileID.canonical,new s.Point(lt.tileAnchorX,lt.tileAnchorY),this.transform.calculateDistanceTileData(q.unwrappedTileID)))return this.placements[Wt]=new ol(!1,!1,!1,!0),void m.add(Wt)}if(m.has(Wt))return;if(he)return void(this.placements[Wt]=new ol(!1,!1,!1));let xt=!1,Ut=!1,Bt=!0,qt=!1,Pn=!1,jn=null,xn={box:null,offscreen:null,occluded:null},Dn={box:null},pi=null,fi=null,kn=null,Mi=0,Ui=0,Ki=0;vt.textFeatureIndex?Mi=vt.textFeatureIndex:lt.useRuntimeCollisionCircles&&(Mi=lt.featureIndex),vt.verticalTextFeatureIndex&&(Ui=vt.verticalTextFeatureIndex);const $i=er=>{er.tileID=this.retainedQueryData[C.bucketInstanceId].tileID;const ji=this.transform.elevation;(ji||er.elevation)&&(er.elevation=ji?ji.getAtTileOffset(er.tileID,er.tileAnchorX,er.tileAnchorY):0)},Ns=vt.textBox;if(Ns){$i(Ns);const er=Ci=>{let Lr=s.WritingMode.horizontal;if(C.allowVerticalPlacement&&!Ci&&this.prevPlacement){const Xs=this.prevPlacement.placedOrientations[Wt];Xs&&(this.placedOrientations[Wt]=Xs,Lr=Xs,this.markUsedOrientation(C,Lr,lt))}return Lr},ji=(Ci,Lr)=>{if(C.allowVerticalPlacement&&ht>0&&vt.verticalTextBox){for(const Xs of C.writingModes)if(Xs===s.WritingMode.vertical?(xn=Lr(),Dn=xn):xn=Ci(),xn&&xn.box&&xn.box.length)break}else xn=Ci()};if(R.get("text-variable-anchor")){let Ci=R.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[Wt]){const rr=this.prevPlacement.variableOffsets[Wt];Ci.indexOf(rr.anchor)>0&&(Ci=Ci.filter((ao=>ao!==rr.anchor)),Ci.unshift(rr.anchor))}const Lr=(rr,ao,Dd)=>{const qc=C.getSymbolInstanceTextSize(we,lt,this.transform.zoom,Rt),Rd=(rr.x2-rr.x1)*qc+2*rr.padding,Ja=(rr.y2-rr.y1)*qc+2*rr.padding,$l=Ze&&!Me?ao:null;$l&&$i($l);let Ld={box:[],offscreen:!1,occluded:!1};const Pg=Ie?2*Ci.length:Ci.length;for(let Lm=0;Lm<Pg;++Lm){const Iv=this.attemptAnchorPlacement(Ci[Lm%Ci.length],rr,Rd,Ja,qc,$e,qe,ae,O,Te,Lm>=Ci.length,lt,Rt,C,Dd,$l,we,be);if(Iv&&(Ld=Iv.placedGlyphBoxes,Ld&&Ld.box&&Ld.box.length)){xt=!0,jn=Iv.shift;break}}return Ld};ji((()=>Lr(Ns,vt.iconBox,s.WritingMode.horizontal)),(()=>{const rr=vt.verticalTextBox;return rr&&$i(rr),C.allowVerticalPlacement&&!(xn&&xn.box&&xn.box.length)&&ht>0&&rr?Lr(rr,vt.verticalIconBox,s.WritingMode.vertical):{box:null,offscreen:null,occluded:null}})),xn&&(xt=xn.box,Bt=xn.offscreen,qt=xn.occluded);const Xs=er(!(!xn||!xn.box));if(!xt&&this.prevPlacement){const rr=this.prevPlacement.variableOffsets[Wt];rr&&(this.variableOffsets[Wt]=rr,this.markUsedJustification(C,rr.anchor,lt,Xs))}}else{const Ci=(Lr,Xs)=>{const rr=C.getSymbolInstanceTextSize(we,lt,this.transform.zoom,Rt),ao=this.collisionIndex.placeCollisionBox(C,rr,Lr,new s.Point(0,0),Ie,ae,O,Te.predicate);return ao&&ao.box&&ao.box.length&&(this.markUsedOrientation(C,Xs,lt),this.placedOrientations[Wt]=Xs),ao};ji((()=>Ci(Ns,s.WritingMode.horizontal)),(()=>{const Lr=vt.verticalTextBox;return C.allowVerticalPlacement&&ht>0&&Lr?($i(Lr),Ci(Lr,s.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}})),er(!!(xn&&xn.box&&xn.box.length))}}if(pi=xn,xt=pi&&pi.box&&pi.box.length>0,Bt=pi&&pi.offscreen,qt=pi&&pi.occluded,lt.useRuntimeCollisionCircles){const er=C.text.placedSymbolArray.get(lt.centerJustifiedTextSymbolIndex>=0?lt.centerJustifiedTextSymbolIndex:lt.verticalPlacedTextSymbolIndex),ji=s.evaluateSizeForFeature(C.textSizeData,we,er),Ci=R.get("text-padding");fi=this.collisionIndex.placeCollisionCircles(C,Ie,er,C.lineVertexArray,C.glyphOffsetArray,ji,O,U,G,y,qe,Te.predicate,lt.collisionCircleDiameter*ji/s.ONE_EM,Ci,this.retainedQueryData[C.bucketInstanceId].tileID),xt=Ie||fi.circles.length>0&&!fi.collisionDetected,Bt=Bt&&fi.offscreen,qt=fi.occluded}if(vt.iconFeatureIndex&&(Ki=vt.iconFeatureIndex),vt.iconBox){const er=ji=>{$i(ji);const Ci=Ze&&jn?al(jn.x,jn.y,$e,qe,this.transform.angle):new s.Point(0,0),Lr=C.getSymbolInstanceIconSize(be,this.transform.zoom,lt.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(C,Lr,ji,Ci,Me,ae,O,Te.predicate)};Dn&&Dn.box&&Dn.box.length&&vt.verticalIconBox?(kn=er(vt.verticalIconBox),Ut=kn.box.length>0):(kn=er(vt.iconBox),Ut=kn.box.length>0),Bt=Bt&&kn.offscreen,Pn=kn.occluded}const ks=le||lt.numHorizontalGlyphVertices===0&&ht===0,va=_e||lt.numIconVertices===0;if(ks||va?va?ks||(Ut=Ut&&xt):xt=Ut&&xt:Ut=xt=Ut&&xt,xt&&pi&&pi.box&&this.collisionIndex.insertCollisionBox(pi.box,R.get("text-ignore-placement"),C.bucketInstanceId,Dn&&Dn.box&&Ui?Ui:Mi,Te.ID),Ut&&kn&&this.collisionIndex.insertCollisionBox(kn.box,R.get("icon-ignore-placement"),C.bucketInstanceId,Ki,Te.ID),fi&&(xt&&this.collisionIndex.insertCollisionCircles(fi.circles,R.get("text-ignore-placement"),C.bucketInstanceId,Mi,Te.ID),y)){const er=C.bucketInstanceId;let ji=this.collisionCircleArrays[er];ji===void 0&&(ji=this.collisionCircleArrays[er]=new Vl);for(let Ci=0;Ci<fi.circles.length;Ci+=4)ji.circles.push(fi.circles[Ci+0]),ji.circles.push(fi.circles[Ci+1]),ji.circles.push(fi.circles[Ci+2]),ji.circles.push(fi.collisionDetected?1:0)}const Ks=C.projection.name!=="globe";it=it&&(Ks||!qt),mt=mt&&(Ks||!Pn),this.placements[Wt]=new ol(xt||it,Ut||mt,Bt||C.justReloaded),m.add(Wt)};if(ot){const lt=C.getSortedSymbolIndexes(this.transform.angle);for(let Rt=lt.length-1;Rt>=0;--Rt){const vt=lt[Rt];$t(C.symbolInstances.get(vt),vt,C.collisionArrays[vt])}}else for(let lt=u.symbolInstanceStart;lt<u.symbolInstanceEnd;lt++)$t(C.symbolInstances.get(lt),lt,C.collisionArrays[lt]);if(y&&C.bucketInstanceId in this.collisionCircleArrays){const lt=this.collisionCircleArrays[C.bucketInstanceId];s.invert(lt.invProjMatrix,O),lt.viewportMatrix=this.collisionIndex.getViewportMatrix()}C.justReloaded=!1}markUsedJustification(u,m,y,S){const{leftJustifiedTextSymbolIndex:C,centerJustifiedTextSymbolIndex:R,rightJustifiedTextSymbolIndex:O,verticalPlacedTextSymbolIndex:U,crossTileID:G}=y,q=s.getAnchorJustification(m),ae=S===s.WritingMode.vertical?U:q==="left"?C:q==="center"?R:q==="right"?O:-1;C>=0&&(u.text.placedSymbolArray.get(C).crossTileID=ae>=0&&C!==ae?0:G),R>=0&&(u.text.placedSymbolArray.get(R).crossTileID=ae>=0&&R!==ae?0:G),O>=0&&(u.text.placedSymbolArray.get(O).crossTileID=ae>=0&&O!==ae?0:G),U>=0&&(u.text.placedSymbolArray.get(U).crossTileID=ae>=0&&U!==ae?0:G)}markUsedOrientation(u,m,y){const S=m===s.WritingMode.horizontal||m===s.WritingMode.horizontalOnly?m:0,C=m===s.WritingMode.vertical?m:0,{leftJustifiedTextSymbolIndex:R,centerJustifiedTextSymbolIndex:O,rightJustifiedTextSymbolIndex:U,verticalPlacedTextSymbolIndex:G}=y,q=u.text.placedSymbolArray;R>=0&&(q.get(R).placedOrientation=S),O>=0&&(q.get(O).placedOrientation=S),U>=0&&(q.get(U).placedOrientation=S),G>=0&&(q.get(G).placedOrientation=C)}commit(u){this.commitTime=u,this.zoomAtLastRecencyCheck=this.transform.zoom;const m=this.prevPlacement;let y=!1;this.prevZoomAdjustment=m?m.zoomAdjustment(this.transform.zoom):0;const S=m?m.symbolFadeChange(u):1,C=m?m.opacities:{},R=m?m.variableOffsets:{},O=m?m.placedOrientations:{};for(const U in this.placements){const G=this.placements[U],q=C[U];q?(this.opacities[U]=new Fs(q,S,G.text,G.icon,null,G.clipped),y=y||G.text!==q.text.placed||G.icon!==q.icon.placed):(this.opacities[U]=new Fs(null,S,G.text,G.icon,G.skipFade,G.clipped),y=y||G.text||G.icon)}for(const U in C){const G=C[U];if(!this.opacities[U]){const q=new Fs(G,S,!1,!1);q.isHidden()||(this.opacities[U]=q,y=y||G.text.placed||G.icon.placed)}}for(const U in R)this.variableOffsets[U]||!this.opacities[U]||this.opacities[U].isHidden()||(this.variableOffsets[U]=R[U]);for(const U in O)this.placedOrientations[U]||!this.opacities[U]||this.opacities[U].isHidden()||(this.placedOrientations[U]=O[U]);y?this.lastPlacementChangeTime=u:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=m?m.lastPlacementChangeTime:u)}updateLayerOpacities(u,m){const y=new Set;for(const S of m){const C=S.getBucket(u);C&&S.latestFeatureIndex&&u.id===C.layerIds[0]&&this.updateBucketOpacities(C,y,S.collisionBoxArray)}}updateBucketOpacities(u,m,y){u.hasTextData()&&u.text.opacityVertexArray.clear(),u.hasIconData()&&u.icon.opacityVertexArray.clear(),u.hasIconCollisionBoxData()&&u.iconCollisionBox.collisionVertexArray.clear(),u.hasTextCollisionBoxData()&&u.textCollisionBox.collisionVertexArray.clear();const S=u.layers[0].layout,C=!!u.layers[0].dynamicFilter(),R=new Fs(null,0,!1,!1,!0),O=S.get("text-allow-overlap"),U=S.get("icon-allow-overlap"),G=S.get("text-variable-anchor"),q=S.get("text-rotation-alignment")==="map",ae=S.get("text-pitch-alignment")==="map",he=S.get("icon-text-fit")!=="none",ye=new Fs(null,0,O&&(U||!u.hasIconData()||S.get("icon-optional")),U&&(O||!u.hasTextData()||S.get("text-optional")),!0);!u.collisionArrays&&y&&(u.hasIconCollisionBoxData()||u.hasTextCollisionBoxData())&&u.deserializeCollisionBoxes(y);const we=(Te,le,_e)=>{for(let Ie=0;Ie<le/4;Ie++)Te.opacityVertexArray.emplaceBack(_e)};let be=0;for(let Te=0;Te<u.symbolInstances.length;Te++){const le=u.symbolInstances.get(Te),{numHorizontalGlyphVertices:_e,numVerticalGlyphVertices:Ie,crossTileID:Me,numIconVertices:$e}=le,qe=m.has(Me);let Ze=this.opacities[Me];qe?Ze=R:Ze||(Ze=ye,this.opacities[Me]=Ze),m.add(Me);const ot=_e>0||Ie>0,it=$e>0,mt=this.placedOrientations[Me],$t=mt===s.WritingMode.vertical,lt=mt===s.WritingMode.horizontal||mt===s.WritingMode.horizontalOnly;if(!ot&&!it||Ze.isHidden()||be++,ot){const Rt=Qi(Ze.text);we(u.text,_e,$t?mr:Rt),we(u.text,Ie,lt?mr:Rt);const vt=Ze.text.isHidden(),{leftJustifiedTextSymbolIndex:Wt,centerJustifiedTextSymbolIndex:ht,rightJustifiedTextSymbolIndex:xt,verticalPlacedTextSymbolIndex:Ut}=le,Bt=u.text.placedSymbolArray,qt=vt||$t?1:0;Wt>=0&&(Bt.get(Wt).hidden=qt),ht>=0&&(Bt.get(ht).hidden=qt),xt>=0&&(Bt.get(xt).hidden=qt),Ut>=0&&(Bt.get(Ut).hidden=vt||lt?1:0);const Pn=this.variableOffsets[Me];Pn&&this.markUsedJustification(u,Pn.anchor,le,mt);const jn=this.placedOrientations[Me];jn&&(this.markUsedJustification(u,"left",le,jn),this.markUsedOrientation(u,jn,le))}if(it){const Rt=Qi(Ze.icon),{placedIconSymbolIndex:vt,verticalPlacedIconSymbolIndex:Wt}=le,ht=u.icon.placedSymbolArray,xt=Ze.icon.isHidden()?1:0;vt>=0&&(we(u.icon,$e,$t?mr:Rt),ht.get(vt).hidden=xt),Wt>=0&&(we(u.icon,le.numVerticalIconVertices,lt?mr:Rt),ht.get(Wt).hidden=xt)}if(u.hasIconCollisionBoxData()||u.hasTextCollisionBoxData()){const Rt=u.collisionArrays[Te];if(Rt){let vt=new s.Point(0,0),Wt=!0;if(Rt.textBox||Rt.verticalTextBox){if(G){const xt=this.variableOffsets[Me];xt?(vt=Eo(xt.anchor,xt.width,xt.height,xt.textOffset,xt.textScale),q&&vt._rotate(ae?this.transform.angle:-this.transform.angle)):Wt=!1}C&&(Wt=!Ze.clipped),Rt.textBox&&da(u.textCollisionBox.collisionVertexArray,Ze.text.placed,!Wt||$t,vt.x,vt.y),Rt.verticalTextBox&&da(u.textCollisionBox.collisionVertexArray,Ze.text.placed,!Wt||lt,vt.x,vt.y)}const ht=Wt&&!!(!lt&&Rt.verticalIconBox);Rt.iconBox&&da(u.iconCollisionBox.collisionVertexArray,Ze.icon.placed,ht,he?vt.x:0,he?vt.y:0),Rt.verticalIconBox&&da(u.iconCollisionBox.collisionVertexArray,Ze.icon.placed,!ht,he?vt.x:0,he?vt.y:0)}}}if(u.fullyClipped=be===0,u.sortFeatures(this.transform.angle),this.retainedQueryData[u.bucketInstanceId]&&(this.retainedQueryData[u.bucketInstanceId].featureSortOrder=u.featureSortOrder),u.hasTextData()&&u.text.opacityVertexBuffer&&u.text.opacityVertexBuffer.updateData(u.text.opacityVertexArray),u.hasIconData()&&u.icon.opacityVertexBuffer&&u.icon.opacityVertexBuffer.updateData(u.icon.opacityVertexArray),u.hasIconCollisionBoxData()&&u.iconCollisionBox.collisionVertexBuffer&&u.iconCollisionBox.collisionVertexBuffer.updateData(u.iconCollisionBox.collisionVertexArray),u.hasTextCollisionBoxData()&&u.textCollisionBox.collisionVertexBuffer&&u.textCollisionBox.collisionVertexBuffer.updateData(u.textCollisionBox.collisionVertexArray),u.bucketInstanceId in this.collisionCircleArrays){const Te=this.collisionCircleArrays[u.bucketInstanceId];u.placementInvProjMatrix=Te.invProjMatrix,u.placementViewportMatrix=Te.viewportMatrix,u.collisionCircleArray=Te.circles,delete this.collisionCircleArrays[u.bucketInstanceId]}}symbolFadeChange(u){return this.fadeDuration===0?1:(u-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(u){return Math.max(0,(this.transform.zoom-u)/1.5)}hasTransitions(u){return this.stale||u-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(u,m){const y=this.zoomAtLastRecencyCheck===m?1-this.zoomAdjustment(m):1;return this.zoomAtLastRecencyCheck=m,this.commitTime+this.fadeDuration*y>u}setStale(){this.stale=!0}}function da(_,u,m,y,S){_.emplaceBack(u?1:0,m?1:0,y||0,S||0),_.emplaceBack(u?1:0,m?1:0,y||0,S||0),_.emplaceBack(u?1:0,m?1:0,y||0,S||0),_.emplaceBack(u?1:0,m?1:0,y||0,S||0)}const ns=Math.pow(2,25),Ni=Math.pow(2,24),Bc=Math.pow(2,17),ll=Math.pow(2,16),qr=Math.pow(2,9),is=Math.pow(2,8),mu=Math.pow(2,1);function Qi(_){if(_.opacity===0&&!_.placed)return 0;if(_.opacity===1&&_.placed)return 4294967295;const u=_.placed?1:0,m=Math.floor(127*_.opacity);return m*ns+u*Ni+m*Bc+u*ll+m*qr+u*is+m*mu+u}const mr=0;class cl{constructor(u){this._sortAcrossTiles=u.layout.get("symbol-z-order")!=="viewport-y"&&u.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(u,m,y,S,C){const R=this._bucketParts;for(;this._currentTileIndex<u.length;)if(m.getBucketParts(R,S,u[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,C())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,R.sort(((O,U)=>O.sortKey-U.sortKey)));this._currentPartIndex<R.length;){const O=R[this._currentPartIndex];if(m.placeLayerBucketPart(O,this._seenCrossTileIDs,y,O.symbolInstanceStart===0),this._currentPartIndex++,C())return!0}return!1}}class dc{constructor(u,m,y,S,C,R,O,U){this.placement=new Co(u,C,R,O,U),this._currentPlacementIndex=m.length-1,this._forceFullPlacement=y,this._showCollisionBoxes=S,this._done=!1}isDone(){return this._done}continuePlacement(u,m,y){const S=s.exported.now(),C=()=>{const R=s.exported.now()-S;return!this._forceFullPlacement&&R>2};for(;this._currentPlacementIndex>=0;){const R=m[u[this._currentPlacementIndex]],O=this.placement.collisionIndex.transform.zoom;if(R.type==="symbol"&&(!R.minzoom||R.minzoom<=O)&&(!R.maxzoom||R.maxzoom>O)){if(this._inProgressLayer||(this._inProgressLayer=new cl(R)),this._inProgressLayer.continuePlacement(y[R.source],this.placement,this._showCollisionBoxes,R,C))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(u){return this.placement.commit(u),this.placement}}const ul=512/s.EXTENT/2;class Rr{constructor(u,m,y){this.tileID=u,this.bucketInstanceId=y,this.index=new s.KDBush(m.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const S=u.canonical.x*s.EXTENT,C=u.canonical.y*s.EXTENT;for(let R=0;R<m.length;R++){const{key:O,crossTileID:U,tileAnchorX:G,tileAnchorY:q}=m.get(R),ae=Math.floor((S+G)*ul),he=Math.floor((C+q)*ul);this.index.add(ae,he),this.keys.push(O),this.crossTileIDs.push(U)}this.index.finish()}findMatches(u,m,y){const S=this.tileID.canonical.z<m.canonical.z?1:Math.pow(2,this.tileID.canonical.z-m.canonical.z),C=ul/Math.pow(2,m.canonical.z-this.tileID.canonical.z),R=m.canonical.x*s.EXTENT,O=m.canonical.y*s.EXTENT;for(let U=0;U<u.length;U++){const G=u.get(U);if(G.crossTileID)continue;const{key:q,tileAnchorX:ae,tileAnchorY:he}=G,ye=Math.floor((R+ae)*C),we=Math.floor((O+he)*C),be=this.index.range(ye-S,we-S,ye+S,we+S);for(const Te of be){const le=this.crossTileIDs[Te];if(this.keys[Te]===q&&!y.has(le)){y.add(le),G.crossTileID=le;break}}}}}class hc{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Ho{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(u){const m=Math.round((u-this.lng)/360);if(m!==0)for(const y in this.indexes){const S=this.indexes[y],C={};for(const R in S){const O=S[R];O.tileID=O.tileID.unwrapTo(O.tileID.wrap+m),C[O.tileID.key]=O}this.indexes[y]=C}this.lng=u}addBucket(u,m,y){if(this.indexes[u.overscaledZ]&&this.indexes[u.overscaledZ][u.key]){if(this.indexes[u.overscaledZ][u.key].bucketInstanceId===m.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(u.overscaledZ,this.indexes[u.overscaledZ][u.key])}for(let C=0;C<m.symbolInstances.length;C++)m.symbolInstances.get(C).crossTileID=0;this.usedCrossTileIDs[u.overscaledZ]||(this.usedCrossTileIDs[u.overscaledZ]=new Set);const S=this.usedCrossTileIDs[u.overscaledZ];for(const C in this.indexes){const R=this.indexes[C];if(Number(C)>u.overscaledZ)for(const O in R){const U=R[O];U.tileID.isChildOf(u)&&U.findMatches(m.symbolInstances,u,S)}else{const O=R[u.scaledTo(Number(C)).key];O&&O.findMatches(m.symbolInstances,u,S)}}for(let C=0;C<m.symbolInstances.length;C++){const R=m.symbolInstances.get(C);R.crossTileID||(R.crossTileID=y.generate(),S.add(R.crossTileID))}return this.indexes[u.overscaledZ]===void 0&&(this.indexes[u.overscaledZ]={}),this.indexes[u.overscaledZ][u.key]=new Rr(u,m.symbolInstances,m.bucketInstanceId),!0}removeBucketCrossTileIDs(u,m){for(const y of m.crossTileIDs)this.usedCrossTileIDs[u].delete(y)}removeStaleBuckets(u){let m=!1;for(const y in this.indexes){const S=this.indexes[y];for(const C in S)u[S[C].bucketInstanceId]||(this.removeBucketCrossTileIDs(y,S[C]),delete S[C],m=!0)}return m}}class ko{constructor(){this.layerIndexes={},this.crossTileIDs=new hc,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(u,m,y,S){let C=this.layerIndexes[u.id];C===void 0&&(C=this.layerIndexes[u.id]=new Ho);let R=!1;const O={};S.name!=="globe"&&C.handleWrapJump(y);for(const U of m){const G=U.getBucket(u);G&&u.id===G.layerIds[0]&&(G.bucketInstanceId||(G.bucketInstanceId=++this.maxBucketInstanceId),C.addBucket(U.tileID,G,this.crossTileIDs)&&(R=!0),O[G.bucketInstanceId]=!0)}return C.removeStaleBuckets(O)&&(R=!0),R}pruneUnusedLayers(u){const m={};u.forEach((y=>{m[y]=!0}));for(const y in this.layerIndexes)m[y]||delete this.layerIndexes[y]}}const ha=(_,u)=>s.emitValidationErrors(_,u&&u.filter((m=>m.identifier!=="source.canvas"))),fa=s.pick(Hn,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),dd=s.pick(Hn,["setCenter","setZoom","setBearing","setPitch"]),Ha={version:8,layers:[],sources:{}},Go={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class Io extends s.Evented{constructor(u,m={}){super(),this.map=u,this.dispatcher=new ve($r(),this),this.imageManager=new Y,this.imageManager.setEventedParent(this),this.glyphManager=new s.GlyphManager(u._requestManager,m.localFontFamily?s.LocalGlyphMode.all:m.localIdeographFontFamily?s.LocalGlyphMode.ideographs:s.LocalGlyphMode.none,m.localFontFamily||m.localIdeographFontFamily),this.crossTileSymbolIndex=new ko,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",s.getReferrer());const y=this;this._rtlTextPluginCallback=Io.registerForPluginStateChange((S=>{y.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:S.pluginStatus,pluginURL:S.pluginURL},((C,R)=>{if(s.triggerPluginCompletionEvent(C),R&&R.every((O=>O)))for(const O in y._sourceCaches){const U=y._sourceCaches[O],G=U.getSource().type;G!=="vector"&&G!=="geojson"||U.reload()}}))})),this.on("data",(S=>{if(S.dataType!=="source"||S.sourceDataType!=="metadata")return;const C=this.getSource(S.sourceId);if(C&&C.vectorLayerIds)for(const R in this._layers){const O=this._layers[R];O.source===C.id&&this._validateLayer(O)}}))}loadURL(u,m={}){this.fire(new s.Event("dataloading",{dataType:"style"}));const y=typeof m.validate=="boolean"?m.validate:!s.isMapboxURL(u);u=this.map._requestManager.normalizeStyleURL(u,m.accessToken);const S=this.map._requestManager.transformRequest(u,s.ResourceType.Style);this._request=s.getJSON(S,((C,R)=>{this._request=null,C?this.fire(new s.ErrorEvent(C)):R&&this._load(R,y)}))}loadJSON(u,m={}){this.fire(new s.Event("dataloading",{dataType:"style"})),this._request=s.exported.frame((()=>{this._request=null,this._load(u,m.validate!==!1)}))}loadEmpty(){this.fire(new s.Event("dataloading",{dataType:"style"})),this._load(Ha,!1)}_updateLayerCount(u,m){const y=m?1:-1;u.is3D()&&(this._num3DLayers+=y),u.type==="circle"&&(this._numCircleLayers+=y),u.type==="symbol"&&(this._numSymbolLayers+=y)}_load(u,m){if(m&&ha(this,s.validateStyle(u)))return;this._loaded=!0,this.stylesheet=s.clone$1(u),this._updateMapProjection();for(const S in u.sources)this.addSource(S,u.sources[S],{validate:!1});this._changed=!1,u.sprite?this._loadSprite(u.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(u.glyphs);const y=Vs(this.stylesheet.layers);this._order=y.map((S=>S.id)),this._layers={},this._serializedLayers={};for(const S of y){const C=s.createStyleLayer(S);C.setEventedParent(this,{layer:{id:C.id}}),this._layers[C.id]=C,this._serializedLayers[C.id]=C.serialize(),this._updateLayerCount(C,!0)}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Se(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new s.Event("data",{dataType:"style"})),this.fire(new s.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&this.terrain.drapeRenderMode===0}setProjection(u){u?this.stylesheet.projection=u:delete this.stylesheet.projection,this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_updateMapProjection(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}_loadSprite(u){this._spriteRequest=(function(m,y,S){let C,R,O;const U=s.exported.devicePixelRatio>1?"@2x":"";let G=s.getJSON(y.transformRequest(y.normalizeSpriteURL(m,U,".json"),s.ResourceType.SpriteJSON),((he,ye)=>{G=null,O||(O=he,C=ye,ae())})),q=s.getImage(y.transformRequest(y.normalizeSpriteURL(m,U,".png"),s.ResourceType.SpriteImage),((he,ye)=>{q=null,O||(O=he,R=ye,ae())}));function ae(){if(O)S(O);else if(C&&R){const he=s.exported.getImageData(R),ye={};for(const we in C){const{width:be,height:Te,x:le,y:_e,sdf:Ie,pixelRatio:Me,stretchX:$e,stretchY:qe,content:Ze}=C[we],ot=new s.RGBAImage({width:be,height:Te});s.RGBAImage.copy(he,ot,{x:le,y:_e},{x:0,y:0},{width:be,height:Te}),ye[we]={data:ot,pixelRatio:Me,sdf:Ie,stretchX:$e,stretchY:qe,content:Ze}}S(null,ye)}}return{cancel(){G&&(G.cancel(),G=null),q&&(q.cancel(),q=null)}}})(u,this.map._requestManager,((m,y)=>{if(this._spriteRequest=null,m)this.fire(new s.ErrorEvent(m));else if(y)for(const S in y)this.imageManager.addImage(S,y[S]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new s.Event("data",{dataType:"style"}))}))}_validateLayer(u){const m=this.getSource(u.source);if(!m)return;const y=u.sourceLayer;y&&(m.type==="geojson"||m.vectorLayerIds&&m.vectorLayerIds.indexOf(y)===-1)&&this.fire(new s.ErrorEvent(new Error(`Source layer "${y}" does not exist on source "${m.id}" as specified by style layer "${u.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const u in this._sourceCaches)if(!this._sourceCaches[u].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(u){const m=[];for(const y of u){const S=this._layers[y];S.type!=="custom"&&m.push(S.serialize())}return m}hasTransitions(){if(this.light&&this.light.hasTransition()||this.fog&&this.fog.hasTransition())return!0;for(const u in this._sourceCaches)if(this._sourceCaches[u].hasTransition())return!0;for(const u in this._layers)if(this._layers[u].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(u){return!!this.terrain&&(typeof u.isLayerDraped=="function"?u.isLayerDraped():Go[u.type])}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(u){if(!this._loaded)return;const m=this._changed;if(this._changed){const S=Object.keys(this._updatedLayers),C=Object.keys(this._removedLayers);(S.length||C.length)&&this._updateWorkerLayers(S,C);for(const R in this._updatedSources){const O=this._updatedSources[R];O==="reload"?this._reloadSource(R):O==="clear"&&this._clearSource(R)}this._updateTilesForChangedImages();for(const R in this._updatedPaintProps)this._layers[R].updateTransitions(u);this.light.updateTransitions(u),this.fog&&this.fog.updateTransitions(u),this._resetUpdates()}const y={};for(const S in this._sourceCaches){const C=this._sourceCaches[S];y[S]=C.used,C.used=!1}for(const S of this._order){const C=this._layers[S];if(C.recalculate(u,this._availableImages),!C.isHidden(u.zoom)){const O=this._getLayerSourceCache(C);O&&(O.used=!0)}const R=this.map.painter;if(R){const O=C.getProgramIds();if(!O)continue;const U=C.getProgramConfiguration(u.zoom);for(const G of O)R.useProgram(G,U)}}for(const S in y){const C=this._sourceCaches[S];y[S]!==C.used&&C.getSource().fire(new s.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:C.getSource().id}))}this.light.recalculate(u),this.terrain&&this.terrain.recalculate(u),this.fog&&this.fog.recalculate(u),this.z=u.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),m&&this.fire(new s.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const u=Object.keys(this._changedImages);if(u.length){for(const m in this._sourceCaches)this._sourceCaches[m].reloadTilesForDependencies(["icons","patterns"],u);this._changedImages={}}}_updateWorkerLayers(u,m){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(u),removedIds:m})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(u){if(this._checkLoaded(),ha(this,s.validateStyle(u)))return!1;(u=s.clone$1(u)).layers=Vs(u.layers);const m=(function(S,C){if(!S)return[{command:Hn.setStyle,args:[C]}];let R=[];try{if(!p(S.version,C.version))return[{command:Hn.setStyle,args:[C]}];p(S.center,C.center)||R.push({command:Hn.setCenter,args:[C.center]}),p(S.zoom,C.zoom)||R.push({command:Hn.setZoom,args:[C.zoom]}),p(S.bearing,C.bearing)||R.push({command:Hn.setBearing,args:[C.bearing]}),p(S.pitch,C.pitch)||R.push({command:Hn.setPitch,args:[C.pitch]}),p(S.sprite,C.sprite)||R.push({command:Hn.setSprite,args:[C.sprite]}),p(S.glyphs,C.glyphs)||R.push({command:Hn.setGlyphs,args:[C.glyphs]}),p(S.transition,C.transition)||R.push({command:Hn.setTransition,args:[C.transition]}),p(S.light,C.light)||R.push({command:Hn.setLight,args:[C.light]}),p(S.fog,C.fog)||R.push({command:Hn.setFog,args:[C.fog]}),p(S.projection,C.projection)||R.push({command:Hn.setProjection,args:[C.projection]});const O={},U=[];(function(ae,he,ye,we){let be;for(be in he=he||{},ae=ae||{})ae.hasOwnProperty(be)&&(he.hasOwnProperty(be)||Ts(be,ye,we));for(be in he){if(!he.hasOwnProperty(be))continue;const Te=he[be];ae.hasOwnProperty(be)?p(ae[be],Te)||(ae[be].type==="geojson"&&Te.type==="geojson"&&ja(ae,he,be)?ye.push({command:Hn.setGeoJSONSourceData,args:[be,Te.data]}):$o(be,he,ye,we)):la(be,he,ye)}})(S.sources,C.sources,U,O);const G=[];S.layers&&S.layers.forEach((ae=>{ae.source&&O[ae.source]?R.push({command:Hn.removeLayer,args:[ae.id]}):G.push(ae)}));let q=S.terrain;q&&O[q.source]&&(R.push({command:Hn.setTerrain,args:[void 0]}),q=void 0),R=R.concat(U),p(q,C.terrain)||R.push({command:Hn.setTerrain,args:[C.terrain]}),(function(ae,he,ye){he=he||[];const we=(ae=ae||[]).map(To),be=he.map(To),Te=ae.reduce(Wa,{}),le=he.reduce(Wa,{}),_e=we.slice(),Ie=Object.create(null);let Me,$e,qe,Ze,ot,it,mt;for(Me=0,$e=0;Me<we.length;Me++)qe=we[Me],le.hasOwnProperty(qe)?$e++:(ye.push({command:Hn.removeLayer,args:[qe]}),_e.splice(_e.indexOf(qe,$e),1));for(Me=0,$e=0;Me<be.length;Me++)qe=be[be.length-1-Me],_e[_e.length-1-Me]!==qe&&(Te.hasOwnProperty(qe)?(ye.push({command:Hn.removeLayer,args:[qe]}),_e.splice(_e.lastIndexOf(qe,_e.length-$e),1)):$e++,it=_e[_e.length-Me],ye.push({command:Hn.addLayer,args:[le[qe],it]}),_e.splice(_e.length-Me,0,qe),Ie[qe]=!0);for(Me=0;Me<be.length;Me++)if(qe=be[Me],Ze=Te[qe],ot=le[qe],!Ie[qe]&&!p(Ze,ot))if(p(Ze.source,ot.source)&&p(Ze["source-layer"],ot["source-layer"])&&p(Ze.type,ot.type)){for(mt in wo(Ze.layout,ot.layout,ye,qe,null,Hn.setLayoutProperty),wo(Ze.paint,ot.paint,ye,qe,null,Hn.setPaintProperty),p(Ze.filter,ot.filter)||ye.push({command:Hn.setFilter,args:[qe,ot.filter]}),p(Ze.minzoom,ot.minzoom)&&p(Ze.maxzoom,ot.maxzoom)||ye.push({command:Hn.setLayerZoomRange,args:[qe,ot.minzoom,ot.maxzoom]}),Ze)Ze.hasOwnProperty(mt)&&mt!=="layout"&&mt!=="paint"&&mt!=="filter"&&mt!=="metadata"&&mt!=="minzoom"&&mt!=="maxzoom"&&(mt.indexOf("paint.")===0?wo(Ze[mt],ot[mt],ye,qe,mt.slice(6),Hn.setPaintProperty):p(Ze[mt],ot[mt])||ye.push({command:Hn.setLayerProperty,args:[qe,mt,ot[mt]]}));for(mt in ot)ot.hasOwnProperty(mt)&&!Ze.hasOwnProperty(mt)&&mt!=="layout"&&mt!=="paint"&&mt!=="filter"&&mt!=="metadata"&&mt!=="minzoom"&&mt!=="maxzoom"&&(mt.indexOf("paint.")===0?wo(Ze[mt],ot[mt],ye,qe,mt.slice(6),Hn.setPaintProperty):p(Ze[mt],ot[mt])||ye.push({command:Hn.setLayerProperty,args:[qe,mt,ot[mt]]}))}else ye.push({command:Hn.removeLayer,args:[qe]}),it=_e[_e.lastIndexOf(qe)+1],ye.push({command:Hn.addLayer,args:[ot,it]})})(G,C.layers,R)}catch(O){console.warn("Unable to compute style diff:",O),R=[{command:Hn.setStyle,args:[C]}]}return R})(this.serialize(),u).filter((S=>!(S.command in dd)));if(m.length===0)return!1;const y=m.filter((S=>!(S.command in fa)));if(y.length>0)throw new Error(`Unimplemented: ${y.map((S=>S.command)).join(", ")}.`);return m.forEach((S=>{S.command!=="setTransition"&&S.command!=="setProjection"&&this[S.command].apply(this,S.args)})),this.stylesheet=u,this._updateMapProjection(),!0}addImage(u,m){return this.getImage(u)?this.fire(new s.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(u,m),this._afterImageUpdated(u),this)}updateImage(u,m){this.imageManager.updateImage(u,m)}getImage(u){return this.imageManager.getImage(u)}removeImage(u){return this.getImage(u)?(this.imageManager.removeImage(u),this._afterImageUpdated(u),this):this.fire(new s.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(u){this._availableImages=this.imageManager.listImages(),this._changedImages[u]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new s.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(u,m,y={}){if(this._checkLoaded(),this.getSource(u)!==void 0)throw new Error("There is already a source with this ID");if(!m.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(m).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(m.type)>=0&&this._validate(s.validateSource,`sources.${u}`,m,null,y))return;this.map&&this.map._collectResourceTiming&&(m.collectResourceTiming=!0);const S=oi(u,m,this.dispatcher,this);S.setEventedParent(this,(()=>({isSourceLoaded:this._isSourceCacheLoaded(u),source:S.serialize(),sourceId:u})));const C=R=>{const O=(R?"symbol:":"other:")+u,U=this._sourceCaches[O]=new s.SourceCache(O,S,R);(R?this._symbolSourceCaches:this._otherSourceCaches)[u]=U,U.style=this,U.onAdd(this.map)};C(!1),m.type!=="vector"&&m.type!=="geojson"||C(!0),S.onAdd&&S.onAdd(this.map),this._changed=!0}removeSource(u){this._checkLoaded();const m=this.getSource(u);if(!m)throw new Error("There is no source with this ID");for(const S in this._layers)if(this._layers[S].source===u)return this.fire(new s.ErrorEvent(new Error(`Source "${u}" cannot be removed while layer "${S}" is using it.`)));if(this.terrain&&this.terrain.get().source===u)return this.fire(new s.ErrorEvent(new Error(`Source "${u}" cannot be removed while terrain is using it.`)));const y=this._getSourceCaches(u);for(const S of y)delete this._sourceCaches[S.id],delete this._updatedSources[S.id],S.fire(new s.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:S.getSource().id})),S.setEventedParent(null),S.clearTiles();return delete this._otherSourceCaches[u],delete this._symbolSourceCaches[u],m.setEventedParent(null),m.onRemove&&m.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(u,m){this._checkLoaded(),this.getSource(u).setData(m),this._changed=!0}getSource(u){const m=this._getSourceCache(u);return m&&m.getSource()}_getSources(){const u=[];for(const m in this._otherSourceCaches){const y=this._getSourceCache(m);y&&u.push(y.getSource())}return u}addLayer(u,m,y={}){this._checkLoaded();const S=u.id;if(this.getLayer(S))return void this.fire(new s.ErrorEvent(new Error(`Layer with id "${S}" already exists on this map`)));let C;if(u.type==="custom"){if(ha(this,s.validateCustomStyleLayer(u)))return;C=s.createStyleLayer(u)}else{if(typeof u.source=="object"&&(this.addSource(S,u.source),u=s.clone$1(u),u=s.extend(u,{source:S})),this._validate(s.validateLayer,`layers.${S}`,u,{arrayIndex:-1},y))return;C=s.createStyleLayer(u),this._validateLayer(C),C.setEventedParent(this,{layer:{id:S}}),this._serializedLayers[C.id]=C.serialize(),this._updateLayerCount(C,!0)}const R=m?this._order.indexOf(m):this._order.length;if(m&&R===-1)return void this.fire(new s.ErrorEvent(new Error(`Layer with id "${m}" does not exist on this map.`)));this._order.splice(R,0,S),this._layerOrderChanged=!0,this._layers[S]=C;const O=this._getLayerSourceCache(C);if(this._removedLayers[S]&&C.source&&O&&C.type!=="custom"){const U=this._removedLayers[S];delete this._removedLayers[S],U.type!==C.type?this._updatedSources[C.source]="clear":(this._updatedSources[C.source]="reload",O.pause())}this._updateLayer(C),C.onAdd&&C.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(u,m){if(this._checkLoaded(),this._changed=!0,!this._layers[u])return void this.fire(new s.ErrorEvent(new Error(`The layer '${u}' does not exist in the map's style and cannot be moved.`)));if(u===m)return;const y=this._order.indexOf(u);this._order.splice(y,1);const S=m?this._order.indexOf(m):this._order.length;m&&S===-1?this.fire(new s.ErrorEvent(new Error(`Layer with id "${m}" does not exist on this map.`))):(this._order.splice(S,0,u),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(u){this._checkLoaded();const m=this._layers[u];if(!m)return void this.fire(new s.ErrorEvent(new Error(`The layer '${u}' does not exist in the map's style and cannot be removed.`)));m.setEventedParent(null),this._updateLayerCount(m,!1);const y=this._order.indexOf(u);this._order.splice(y,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[u]=m,delete this._layers[u],delete this._serializedLayers[u],delete this._updatedLayers[u],delete this._updatedPaintProps[u],m.onRemove&&m.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(u){return this._layers[u]}hasLayer(u){return u in this._layers}hasLayerType(u){for(const m in this._layers)if(this._layers[m].type===u)return!0;return!1}setLayerZoomRange(u,m,y){this._checkLoaded();const S=this.getLayer(u);S?S.minzoom===m&&S.maxzoom===y||(m!=null&&(S.minzoom=m),y!=null&&(S.maxzoom=y),this._updateLayer(S)):this.fire(new s.ErrorEvent(new Error(`The layer '${u}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(u,m,y={}){this._checkLoaded();const S=this.getLayer(u);if(S){if(!p(S.filter,m))return m==null?(S.filter=void 0,void this._updateLayer(S)):void(this._validate(s.validateFilter,`layers.${S.id}.filter`,m,{layerType:S.type},y)||(S.filter=s.clone$1(m),this._updateLayer(S)))}else this.fire(new s.ErrorEvent(new Error(`The layer '${u}' does not exist in the map's style and cannot be filtered.`)))}getFilter(u){const m=this.getLayer(u);return m&&s.clone$1(m.filter)}setLayoutProperty(u,m,y,S={}){this._checkLoaded();const C=this.getLayer(u);C?p(C.getLayoutProperty(m),y)||(C.setLayoutProperty(m,y,S),this._updateLayer(C)):this.fire(new s.ErrorEvent(new Error(`The layer '${u}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(u,m){const y=this.getLayer(u);if(y)return y.getLayoutProperty(m);this.fire(new s.ErrorEvent(new Error(`The layer '${u}' does not exist in the map's style.`)))}setPaintProperty(u,m,y,S={}){this._checkLoaded();const C=this.getLayer(u);C?p(C.getPaintProperty(m),y)||(C.setPaintProperty(m,y,S)&&this._updateLayer(C),this._changed=!0,this._updatedPaintProps[u]=!0):this.fire(new s.ErrorEvent(new Error(`The layer '${u}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(u,m){const y=this.getLayer(u);return y&&y.getPaintProperty(m)}setFeatureState(u,m){this._checkLoaded();const y=u.source,S=u.sourceLayer,C=this.getSource(y);if(!C)return void this.fire(new s.ErrorEvent(new Error(`The source '${y}' does not exist in the map's style.`)));const R=C.type;if(R==="geojson"&&S)return void this.fire(new s.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(R==="vector"&&!S)return void this.fire(new s.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));u.id===void 0&&this.fire(new s.ErrorEvent(new Error("The feature id parameter must be provided.")));const O=this._getSourceCaches(y);for(const U of O)U.setFeatureState(S,u.id,m)}removeFeatureState(u,m){this._checkLoaded();const y=u.source,S=this.getSource(y);if(!S)return void this.fire(new s.ErrorEvent(new Error(`The source '${y}' does not exist in the map's style.`)));const C=S.type,R=C==="vector"?u.sourceLayer:void 0;if(C==="vector"&&!R)return void this.fire(new s.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(m&&typeof u.id!="string"&&typeof u.id!="number")return void this.fire(new s.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const O=this._getSourceCaches(y);for(const U of O)U.removeFeatureState(R,u.id,m)}getFeatureState(u){this._checkLoaded();const m=u.source,y=u.sourceLayer,S=this.getSource(m);if(S){if(S.type!=="vector"||y)return u.id===void 0&&this.fire(new s.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(m)[0].getFeatureState(y,u.id);this.fire(new s.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new s.ErrorEvent(new Error(`The source '${m}' does not exist in the map's style.`)))}getTransition(){return s.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const u={};for(const m in this._sourceCaches){const y=this._sourceCaches[m].getSource();u[y.id]||(u[y.id]=y.serialize())}return s.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.getTerrain()||void 0,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:u,layers:this._serializeLayers(this._order)},(m=>m!==void 0))}_updateLayer(u){this._updatedLayers[u.id]=!0;const m=this._getLayerSourceCache(u);u.source&&!this._updatedSources[u.source]&&m&&m.getSource().type!=="raster"&&(this._updatedSources[u.source]="reload",m.pause()),this._changed=!0,u.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(u){const m=R=>this._layers[R].type==="fill-extrusion",y={},S=[];for(let R=this._order.length-1;R>=0;R--){const O=this._order[R];if(m(O)){y[O]=R;for(const U of u){const G=U[O];if(G)for(const q of G)S.push(q)}}}S.sort(((R,O)=>O.intersectionZ-R.intersectionZ));const C=[];for(let R=this._order.length-1;R>=0;R--){const O=this._order[R];if(m(O))for(let U=S.length-1;U>=0;U--){const G=S[U].feature;if(y[G.layer.id]<R)break;C.push(G),S.pop()}else for(const U of u){const G=U[O];if(G)for(const q of G)C.push(q.feature)}}return C}queryRenderedFeatures(u,m,y){m&&m.filter&&this._validate(s.validateFilter,"queryRenderedFeatures.filter",m.filter,null,m);const S={};if(m&&m.layers){if(!Array.isArray(m.layers))return this.fire(new s.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const U of m.layers){const G=this._layers[U];if(!G)return this.fire(new s.ErrorEvent(new Error(`The layer '${U}' does not exist in the map's style and cannot be queried for features.`))),[];S[G.source]=!0}}const C=[];m.availableImages=this._availableImages;const R=m&&m.layers?m.layers.some((U=>{const G=this.getLayer(U);return G&&G.is3D()})):this.has3DLayers(),O=We.createFromScreenPoints(u,y);for(const U in this._sourceCaches){const G=this._sourceCaches[U].getSource().id;m.layers&&!S[G]||C.push(Pi(this._sourceCaches[U],this._layers,this._serializedLayers,O,m,y,R,!!this.map._showQueryGeometry))}return this.placement&&C.push((function(U,G,q,ae,he,ye,we){const be={},Te=ye.queryRenderedSymbols(ae),le=[];for(const _e of Object.keys(Te).map(Number))le.push(we[_e]);le.sort(es);for(const _e of le){const Ie=_e.featureIndex.lookupSymbolFeatures(Te[_e.bucketInstanceId],G,_e.bucketIndex,_e.sourceLayerIndex,he.filter,he.layers,he.availableImages,U);for(const Me in Ie){const $e=be[Me]=be[Me]||[],qe=Ie[Me];qe.sort(((Ze,ot)=>{const it=_e.featureSortOrder;if(it){const mt=it.indexOf(Ze.featureIndex);return it.indexOf(ot.featureIndex)-mt}return ot.featureIndex-Ze.featureIndex}));for(const Ze of qe)$e.push(Ze)}}for(const _e in be)be[_e].forEach((Ie=>{const Me=Ie.feature,$e=q(U[_e]);if(!$e)return;const qe=$e.getFeatureState(Me.layer["source-layer"],Me.id);Me.source=Me.layer.source,Me.layer["source-layer"]&&(Me.sourceLayer=Me.layer["source-layer"]),Me.state=qe}));return be})(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),O.screenGeometry,m,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(C)}querySourceFeatures(u,m){m&&m.filter&&this._validate(s.validateFilter,"querySourceFeatures.filter",m.filter,null,m);const y=this._getSourceCaches(u);let S=[];for(const C of y)S=S.concat(hr(C,m));return S}addSourceType(u,m,y){return Io.getSourceType(u)?y(new Error(`A source type called "${u}" already exists.`)):(Io.setSourceType(u,m),m.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:u,url:m.workerSourceURL},y):y(null,null))}getLight(){return this.light.getLight()}setLight(u,m={}){this._checkLoaded();const y=this.light.getLight();let S=!1;for(const R in u)if(!p(u[R],y[R])){S=!0;break}if(!S)return;const C=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(u,m),this.light.updateTransitions(C)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(u,m=1){if(this._checkLoaded(),!u)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);let y=u;if(m===1){if(typeof y.source=="object"){const S="terrain-dem-src";this.addSource(S,y.source),y=s.clone$1(y),y=s.extend(y,{source:S})}if(this._validate(s.validateTerrain,"terrain",y))return}if(!this.terrain||this.terrain&&m!==this.terrain.drapeRenderMode){if(!y)return;this._createTerrain(y,m)}else{const S=this.terrain,C=S.get();for(const R of Object.keys(s.spec.terrain))!y.hasOwnProperty(R)&&s.spec.terrain[R].default&&(y[R]=s.spec.terrain[R].default);for(const R in y)if(!p(y[R],C[R])){S.set(y),this.stylesheet.terrain=y;const O=this._setTransitionParameters({duration:0});S.updateTransitions(O);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(u){const m=this.fog=new Ke(u,this.map.transform);this.stylesheet.fog=u;const y=this._setTransitionParameters({duration:0});m.updateTransitions(y)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask((()=>{for(const u of this.map._markers)u._evaluateOpacity()}))}getFog(){return this.fog?this.fog.get():null}setFog(u){if(this._checkLoaded(),!u)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const m=this.fog,y=m.get();Object.keys(u).length===0&&m.set(u);for(const S in u)if(!p(u[S],y[S])){m.set(u),this.stylesheet.fog=u;const C=this._setTransitionParameters({duration:0});m.updateTransitions(C);break}}else this._createFog(u);this._markersNeedUpdate=!0}_setTransitionParameters(u){return{now:s.exported.now(),transition:s.extend(u,this.stylesheet.transition)}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const u=this._order.filter((y=>this.isLayerDraped(this._layers[y]))),m=this._order.filter((y=>!this.isLayerDraped(this._layers[y])));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...u),this._drapedFirstOrder.push(...m)}_createTerrain(u,m){const y=this.terrain=new Ve(u,m);this.stylesheet.terrain=u,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const S=this._setTransitionParameters({duration:0});y.updateTransitions(S)}_force3DLayerUpdate(){for(const u in this._layers){const m=this._layers[u];m.type==="fill-extrusion"&&this._updateLayer(m)}}_forceSymbolLayerUpdate(){for(const u in this._layers){const m=this._layers[u];m.type==="symbol"&&this._updateLayer(m)}}_validate(u,m,y,S,C={}){return(!C||C.validate!==!1)&&ha(this,u.call(s.validateStyle,s.extend({key:m,style:this.serialize(),value:y,styleSpec:s.spec},S)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),s.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const u in this._layers)this._layers[u].setEventedParent(null);for(const u in this._sourceCaches)this._sourceCaches[u].clearTiles(),this._sourceCaches[u].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(u){const m=this._getSourceCaches(u);for(const y of m)y.clearTiles()}_reloadSource(u){const m=this._getSourceCaches(u);for(const y of m)y.resume(),y.reload()}_reloadSources(){for(const u of this._getSources())u.reload&&u.reload()}_updateSources(u){for(const m in this._sourceCaches)this._sourceCaches[m].update(u)}_generateCollisionBoxes(){for(const u in this._sourceCaches){const m=this._sourceCaches[u];m.resume(),m.reload()}}_updatePlacement(u,m,y,S,C=!1){let R=!1,O=!1;const U={};for(const G of this._order){const q=this._layers[G];if(q.type!=="symbol")continue;if(!U[q.source]){const he=this._getLayerSourceCache(q);if(!he)continue;U[q.source]=he.getRenderableIds(!0).map((ye=>he.getTileByID(ye))).sort(((ye,we)=>we.tileID.overscaledZ-ye.tileID.overscaledZ||(ye.tileID.isLessThan(we.tileID)?-1:1)))}const ae=this.crossTileSymbolIndex.addLayer(q,U[q.source],u.center.lng,u.projection);R=R||ae}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),C=C||this._layerOrderChanged||y===0,this._layerOrderChanged&&this.fire(new s.Event("neworder")),(C||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(s.exported.now(),u.zoom))&&(this.pauseablePlacement=new dc(u,this._order,C,m,y,S,this.placement,this.fog&&u.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,U),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(s.exported.now()),O=!0),R&&this.pauseablePlacement.placement.setStale()),O||R)for(const G of this._order){const q=this._layers[G];q.type==="symbol"&&this.placement.updateLayerOpacities(q,U[q.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(s.exported.now())}_releaseSymbolFadeTiles(){for(const u in this._sourceCaches)this._sourceCaches[u].releaseSymbolFadeTiles()}getImages(u,m,y){this.imageManager.getImages(m.icons,y),this._updateTilesForChangedImages();const S=C=>{C&&C.setDependencies(m.tileID.key,m.type,m.icons)};S(this._otherSourceCaches[m.source]),S(this._symbolSourceCaches[m.source])}getGlyphs(u,m,y){this.glyphManager.getGlyphs(m.stacks,y)}getResource(u,m,y){return s.makeRequest(m,y)}_getSourceCache(u){return this._otherSourceCaches[u]}_getLayerSourceCache(u){return u.type==="symbol"?this._symbolSourceCaches[u.source]:this._otherSourceCaches[u.source]}_getSourceCaches(u){const m=[];return this._otherSourceCaches[u]&&m.push(this._otherSourceCaches[u]),this._symbolSourceCaches[u]&&m.push(this._symbolSourceCaches[u]),m}_isSourceCacheLoaded(u){const m=this._getSourceCaches(u);return m.length===0?(this.fire(new s.ErrorEvent(new Error(`There is no source with ID '${u}'`))),!1):m.every((y=>y.loaded()))}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}Io.getSourceType=function(_){return Un[_]},Io.setSourceType=function(_,u){Un[_]=u},Io.registerForPluginStateChange=s.registerForPluginStateChange;var Bl=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#define EXTENT 8192.0
#define HALF_PI PI/2.0
#define QUARTER_PI PI/4.0
#define RAD_TO_DEG 180.0/PI
#define DEG_TO_RAD PI/180.0
#define GLOBE_RADIUS EXTENT/PI/2.0`,Ao="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",ma=`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
const float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)
{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}
#ifdef TERRAIN
#ifdef TERRAIN_DEM_FLOAT_FORMAT
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;
#else
uniform sampler2D u_dem;uniform sampler2D u_dem_prev;
#endif
uniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));
#ifdef TERRAIN_DEM_NEAREST_FILTER
return u_exaggeration*tl;
#endif
float tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
return currentElevation(apos);}
#endif
highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(
unpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))
);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
float tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;
#else
vec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);
#endif
return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }
#endif`,pa=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,qo=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`;let fc={},Ga={};const dl=[];so(Bl,dl),so(ma,dl),so(pa,dl),so(qo,dl),fc=wi("",ma),Ga=wi(qo,pa);const Fc=wi(`
#if __VERSION__ >=300
#define varying in
#define gl_FragColor glFragColor
#define texture2D texture
#define textureCube texture
out vec4 glFragColor;
#endif
highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}`,`
#if __VERSION__ >=300
#define attribute in
#define varying out
#define texture2D texture
#endif
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#ifndef PROJECTED_POS_ON_VIEWPORT
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered.`),hl=Bl,pu=`
#ifdef GL_ES
precision mediump float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`;var gu={background:wi(`uniform vec4 u_color;uniform float u_opacity;
#ifdef LIGHTING_3D_MODE
varying vec4 v_color;
#endif
void main() {vec4 out_color;
#ifdef LIGHTING_3D_MODE
out_color=v_color;
#else
out_color=u_color;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#ifdef LIGHTING_3D_MODE
uniform vec4 u_color;varying vec4 v_color;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting(u_color);
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:wi(`uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos;void main() {vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),circle:wi(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
gl_FragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);
#else 
surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;
#else
occlusion_world_center=world_center;occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:wi("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:wi(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
if (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:wi(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:wi("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:wi("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}",`attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:wi("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}",`attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;
#endif
varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),fill:wi(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutline:wi(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:wi(`uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;varying vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;varying vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:wi(`uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:wi(`varying vec4 v_color;
#ifdef RENDER_SHADOWS
varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef ZERO_ROOF_RADIUS
varying vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
varying highp vec3 v_normal;
#endif
void main() {
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
vec3 normal=v_normal;
#endif
float z;vec4 color;
#ifdef ZERO_ROOF_RADIUS
z=float(normal.z > 0.00001);color=mix(v_color,v_roof_color,z);
#else
color=v_color;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;
#ifdef ZERO_ROOF_RADIUS
concave*=(1.0-z);
#endif
float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;
#endif
#ifdef RENDER_SHADOWS
#ifdef ZERO_ROOF_RADIUS
normal=mix(normal,vec3(0.0,0.0,1.0),z);
#endif
color.xyz=shadowed_color_normal(color.xyz,normalize(normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec4 v_color;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;
#endif
#ifdef ZERO_ROOF_RADIUS
varying vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
varying highp vec3 v_normal;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
v_normal=normal;
#endif
base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=0.0;float c_ele;vec3 pos;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);
#else
h=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);
#ifdef RENDER_SHADOWS
v_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_depth=gl_Position.w;
#endif
float NdotL=0.0;float colorvalue=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}v_color=vec4(0.0,0.0,0.0,1.0);
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting(color,NdotL);
#else
v_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));
#endif
v_color*=u_opacity;
#ifdef ZERO_ROOF_RADIUS
v_roof_color=vec4(0.0,0.0,0.0,1.0);
#ifdef LIGHTING_3D_MODE
v_roof_color=apply_lighting(color,calculate_NdotL(vec3(0.0,0.0,1.0)));
#else
float roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));
#endif
v_roof_color*=u_opacity;
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),fillExtrusionPattern:wi(`uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
varying float v_NdotL;
#endif
varying vec2 v_pos;varying vec4 v_lighting;uniform lowp float u_opacity;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color,v_NdotL)*u_opacity;
#else
out_color=out_color*v_lighting;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec2 v_pos;varying vec4 v_lighting;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
varying float v_NdotL;
#endif
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=z;vec3 p;float c_ele;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);
#else
p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_NdotL=NdotL;
#else
v_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#endif 
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),hillshadePrepare:wi(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
return texture2D(u_image,coord).a/4.0;
#else
vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;
#endif
}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:wi(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef LIGHTING_3D_MODE
gl_FragColor=apply_lighting(gl_FragColor);
#endif
#ifdef FOG
gl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:wi(`uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;varying vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;
#endif
uniform float u_border_width;uniform vec4 u_border_color;float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
float linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef RENDER_LINE_DASH
float sdfdist=texture2D(u_dash_image,v_tex).a;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);
#endif
highp vec4 out_color;
#ifdef RENDER_LINE_GRADIENT
out_color=texture2D(u_gradient_image,v_uv.xy);
#else
out_color=color;
#endif
float trimmed=1.0;
#ifdef RENDER_LINE_TRIM_OFFSET
highp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);trimmed=0.0;}}
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef RENDER_LINE_ALPHA_DISCARD
if (alpha < u_alpha_discard_threshold) {discard;}
#endif
#ifdef RENDER_LINE_BORDER
float edgeBlur=(u_border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);
#ifdef RENDER_LINE_BORDER_AUTO
float Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}
#else
out_color.rgb=mix(u_border_color.rgb*u_border_color.a*trimmed,out_color.rgb,smoothAlpha);
#endif
}
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define EXTRUDE_SCALE 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
attribute highp vec4 a_packed;
#endif
#ifdef RENDER_LINE_DASH
attribute float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;varying vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
float a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];
#ifdef RENDER_LINE_GRADIENT
highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);
#else
v_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);
#endif
#endif
#ifdef RENDER_LINE_DASH
float scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),linePattern:wi(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;vec2 pattern_size=vec2(display_size.x/u_tile_units_to_pixels,display_size.y);float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x=mod(v_linesofar/pattern_size.x*aspect,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));vec4 color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
color=apply_lighting(color);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),raster:wi(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply(out_color,v_fog_pos));
#endif
gl_FragColor=vec4(out_color*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),symbolIcon:wi(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}`),symbolSDF:wi(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}`),symbolTextAndIcon:wi(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}`),terrainRaster:wi(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
void main() {vec4 color=texture2D(u_image0,v_pos0);
#ifdef RENDER_SHADOWS
color.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
#ifdef ZERO_EXAGGERATION
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#else
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
const float wireframeOffset=0.00015;void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;
#ifdef TERRAIN_WIREFRAME
elevation+=wireframeOffset;
#endif
v_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
#ifdef ZERO_EXAGGERATION
v_fog_pos=fog_position(decodedPos);
#else
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
#endif
#ifdef RENDER_SHADOWS
vec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;
#endif
}`),terrainDepth:wi(`#ifdef GL_ES
precision highp float;
#endif
varying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}`,"uniform mat4 u_matrix;attribute vec2 a_pos;varying float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:wi(`
varying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Ao),skyboxGradient:wi(`varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Ao),skyboxCapture:wi(`
varying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;
#ifdef GL_ES
precision highp float;
#endif
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}`,"attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:wi(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifndef FOG
uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;
#endif
void main() {vec4 color;
#ifdef CUSTOM_ANTIALIASING
vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);color=vec4(raster.rgb*antialias,raster.a*antialias);
#else
color=texture2D(u_image0,v_pos0);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;
#ifdef GLOBE_POLES
attribute vec3 a_globe_pos;attribute vec2 a_uv;
#else
attribute vec2 a_pos;
#endif
varying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;vec2 uv=a_uv;
#else
float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);
#endif
v_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;
#ifdef GLOBE_POLES
vec3 up_vector=globe_derived_up_vector;
#else
vec3 up_vector=elevationVector(tile_pos);
#endif
float height=elevation(tile_pos);
#ifdef TERRAIN_WIREFRAME
height+=wireframeOffset;
#endif
globe_pos+=up_vector*height;
#ifndef GLOBE_POLES
globe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;
#endif
#ifdef GLOBE_POLES
vec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);
#else
vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);
#endif
gl_Position=u_proj_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
}`),globeAtmosphere:wi(`uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;
#ifdef PROJECTION_GLOBE_VIEW
globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}
#endif
highp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?
0.0 : max(acos(dot(dir,horizon_dir)),0.0);float horizon_angle;
#ifdef PROJECTION_GLOBE_VIEW
highp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?
PI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);
#else
horizon_angle=horizon_angle_mercator;
#endif
horizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:
(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:
uv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}`,`attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(
mix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}`)};function so(_,u){const m=_.replace(/\s*\/\/[^\n]*\n/g,`
`).split(`
`);for(let y of m)if(y=y.trim(),y[0]==="#"&&y.includes("if")&&!y.includes("endif")){y=y.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const S=y.split(" ");for(const C of S)u.includes(C)||u.push(C)}}function wi(_,u){const m=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,y=u.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),S={},C=[...dl];return so(_,C),so(u,C),{fragmentSource:_=_.replace(m,((R,O,U,G,q)=>(S[q]=!0,O==="define"?`
#ifndef HAS_UNIFORM_u_${q}
varying ${U} ${G} ${q};
#else
uniform ${U} ${G} u_${q};
#endif
`:`
#ifdef HAS_UNIFORM_u_${q}
    ${U} ${G} ${q} = u_${q};
#endif
`))),vertexSource:u=u.replace(m,((R,O,U,G,q)=>{const ae=G==="float"?"vec2":"vec4",he=q.match(/color/)?"color":ae;return S[q]?O==="define"?`
#ifndef HAS_UNIFORM_u_${q}
uniform lowp float u_${q}_t;
attribute ${U} ${ae} a_${q};
varying ${U} ${G} ${q};
#else
uniform ${U} ${G} u_${q};
#endif
`:he==="vec4"?`
#ifndef HAS_UNIFORM_u_${q}
    ${q} = a_${q};
#else
    ${U} ${G} ${q} = u_${q};
#endif
`:`
#ifndef HAS_UNIFORM_u_${q}
    ${q} = unpack_mix_${he}(a_${q}, u_${q}_t);
#else
    ${U} ${G} ${q} = u_${q};
#endif
`:O==="define"?`
#ifndef HAS_UNIFORM_u_${q}
uniform lowp float u_${q}_t;
attribute ${U} ${ae} a_${q};
#else
uniform ${U} ${G} u_${q};
#endif
`:he==="vec4"?`
#ifndef HAS_UNIFORM_u_${q}
    ${U} ${G} ${q} = a_${q};
#else
    ${U} ${G} ${q} = u_${q};
#endif
`:`
#ifndef HAS_UNIFORM_u_${q}
    ${U} ${G} ${q} = unpack_mix_${he}(a_${q}, u_${q}_t);
#else
    ${U} ${G} ${q} = u_${q};
#endif
`})),staticAttributes:y,usedDefines:C}}class zc{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(u,m,y,S,C,R,O){this.context=u;let U=this.boundPaintVertexBuffers.length!==S.length;for(let q=0;!U&&q<S.length;q++)this.boundPaintVertexBuffers[q]!==S[q]&&(U=!0);let G=this.boundDynamicVertexBuffers.length!==O.length;for(let q=0;!G&&q<O.length;q++)this.boundDynamicVertexBuffers[q]!==O[q]&&(G=!0);if(!u.extVertexArrayObject||!this.vao||this.boundProgram!==m||this.boundLayoutVertexBuffer!==y||U||G||this.boundIndexBuffer!==C||this.boundVertexOffset!==R)this.freshBind(m,y,S,C,R,O);else{u.bindVertexArrayOES.set(this.vao);for(const q of O)q&&q.bind();C&&C.dynamicDraw&&C.bind()}}freshBind(u,m,y,S,C,R){let O;const U=u.numAttributes,G=this.context,q=G.gl;if(G.extVertexArrayObject)this.vao&&this.destroy(),this.vao=G.extVertexArrayObject.createVertexArrayOES(),G.bindVertexArrayOES.set(this.vao),O=0,this.boundProgram=u,this.boundLayoutVertexBuffer=m,this.boundPaintVertexBuffers=y,this.boundIndexBuffer=S,this.boundVertexOffset=C,this.boundDynamicVertexBuffers=R;else{O=G.currentNumAttributes||0;for(let ae=U;ae<O;ae++)q.disableVertexAttribArray(ae)}m.enableAttributes(q,u),m.bind(),m.setVertexAttribPointers(q,u,C);for(const ae of y)ae.enableAttributes(q,u),ae.bind(),ae.setVertexAttribPointers(q,u,C);for(const ae of R)ae&&(ae.enableAttributes(q,u),ae.bind(),ae.setVertexAttribPointers(q,u,C));S&&S.bind(),G.currentNumAttributes=U}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function _u(_,u){const m=Math.pow(2,u.canonical.z),y=u.canonical.y;return[new s.MercatorCoordinate(0,y/m).toLngLat().lat,new s.MercatorCoordinate(0,(y+1)/m).toLngLat().lat]}function hd(_,u,m,y,S,C,R){const O=_.context,U=O.gl,G=m.fbo;if(!G)return;_.prepareDrawTile();const q=_.useProgram("hillshade");O.activeTexture.set(U.TEXTURE0),U.bindTexture(U.TEXTURE_2D,G.colorAttachment.get());const ae=((be,Te,le,_e)=>{const Ie=le.paint.get("hillshade-shadow-color"),Me=le.paint.get("hillshade-highlight-color"),$e=le.paint.get("hillshade-accent-color");let qe=le.paint.get("hillshade-illumination-direction")*(Math.PI/180);le.paint.get("hillshade-illumination-anchor")==="viewport"&&(qe-=be.transform.angle);const Ze=!be.options.moving;return{u_matrix:_e||be.transform.calculateProjMatrix(Te.tileID.toUnwrapped(),Ze),u_image:0,u_latrange:_u(0,Te.tileID),u_light:[le.paint.get("hillshade-exaggeration"),qe],u_shadow:Ie,u_highlight:Me,u_accent:$e}})(_,m,y,_.terrain?u.projMatrix:null);_.prepareDrawProgram(O,q,u.toUnwrapped());const{tileBoundsBuffer:he,tileBoundsIndexBuffer:ye,tileBoundsSegments:we}=_.getTileBoundsBuffers(m);q.draw(O,U.TRIANGLES,S,C,R,s.CullFaceMode.disabled,ae,y.id,he,ye,we)}function fl(_,u,m){if(!u.needsDEMTextureUpload)return;const y=_.context,S=y.gl;y.pixelStoreUnpackPremultiplyAlpha.set(!1),u.demTexture=u.demTexture||_.getTileTexture(m.stride);const C=m.getPixels();u.demTexture?u.demTexture.update(C,{premultiply:!1}):u.demTexture=new s.Texture(y,C,S.RGBA,{premultiply:!1}),u.needsDEMTextureUpload=!1}function zs(_,u,m,y,S,C){const R=_.context,O=R.gl;if(!u.dem)return;const U=u.dem;if(R.activeTexture.set(O.TEXTURE1),fl(_,u,U),!u.demTexture)return;u.demTexture.bind(O.NEAREST,O.CLAMP_TO_EDGE);const G=U.dim;R.activeTexture.set(O.TEXTURE0);let q=u.fbo;if(!q){const we=new s.Texture(R,{width:G,height:G,data:null},O.RGBA);we.bind(O.LINEAR,O.CLAMP_TO_EDGE),q=u.fbo=R.createFramebuffer(G,G,!0),q.colorAttachment.set(we.texture)}R.bindFramebuffer.set(q.framebuffer),R.viewport.set([0,0,G,G]);const{tileBoundsBuffer:ae,tileBoundsIndexBuffer:he,tileBoundsSegments:ye}=_.getMercatorTileBoundsBuffers();_.useProgram("hillshadePrepare").draw(R,O.TRIANGLES,y,S,C,s.CullFaceMode.disabled,((we,be)=>{const Te=be.stride,le=s.create();return s.ortho(le,0,s.EXTENT,-s.EXTENT,0,0,1),s.translate(le,le,[0,-s.EXTENT,0]),{u_matrix:le,u_image:1,u_dimension:[Te,Te],u_zoom:we.overscaledZ,u_unpack:be.unpackVector}})(u.tileID,U),m.id,ae,he,ye),u.needsHillshadePrepare=!1}const Nc=_=>({u_matrix:new s.UniformMatrix4f(_),u_image0:new s.Uniform1i(_),u_skirt_height:new s.Uniform1f(_)}),oo=(_,u)=>({u_matrix:_,u_image0:0,u_skirt_height:u}),Ko=(_,u,m,y,S,C,R,O,U,G,q,ae,he,ye,we)=>({u_proj_matrix:Float32Array.from(_),u_globe_matrix:u,u_normalize_matrix:Float32Array.from(y),u_merc_matrix:m,u_zoom_transition:S,u_merc_center:C,u_image0:0,u_frustum_tl:R,u_frustum_tr:O,u_frustum_br:U,u_frustum_bl:G,u_globe_pos:q,u_globe_radius:ae,u_viewport:he,u_grid_matrix:we?Float32Array.from(we):new Float32Array(9),u_skirt_height:ye});function A(_,u){return _!=null&&u!=null&&!(!_.hasData()||!u.hasData())&&_.demTexture!=null&&u.demTexture!=null&&_.tileID.key!==u.tileID.key}const ee=new class{constructor(){this.operations={}}newMorphing(_,u,m,y,S){if(_ in this.operations){const C=this.operations[_];C.to.tileID.key!==m.tileID.key&&(C.queued=m)}else this.operations[_]={startTime:y,phase:0,duration:S,from:u,to:m,queued:null}}getMorphValuesForProxy(_){if(!(_ in this.operations))return null;const u=this.operations[_];return{from:u.from,to:u.to,phase:u.phase}}update(_){for(const u in this.operations){const m=this.operations[u];for(m.phase=(_-m.startTime)/m.duration;m.phase>=1||!this._validOp(m);)if(!this._nextOp(m,_)){delete this.operations[u];break}}}_nextOp(_,u){return!!_.queued&&(_.from=_.to,_.to=_.queued,_.queued=null,_.phase=0,_.startTime=u,!0)}_validOp(_){return _.from.hasData()&&_.to.hasData()}},ue={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function Pe(_){return 6*Math.pow(1.5,22-_)}function bt(_,u){const m=1<<_.z;return!u&&(_.x===0||_.x===m-1)||_.y===0||_.y===m-1}const Pt=_=>({u_matrix:_});function pn(_,u,m,y,S){if(S>0){const C=s.exported.now(),R=(C-_.timeAdded)/S,O=u?(C-u.timeAdded)/S:-1,U=m.getSource(),G=y.coveringZoomLevel({tileSize:U.tileSize,roundZoom:U.roundZoom}),q=!u||Math.abs(u.tileID.overscaledZ-G)>Math.abs(_.tileID.overscaledZ-G),ae=q&&_.refreshedUponExpiration?1:s.clamp(q?R:1-O,0,1);return _.refreshedUponExpiration&&R>=1&&(_.refreshedUponExpiration=!1),u?{opacity:1,mix:1-ae}:{opacity:ae,mix:0}}return{opacity:1,mix:0}}class ui extends s.SourceCache{constructor(u){const m={type:"raster-dem",maxzoom:u.transform.maxZoom},y=new ve($r(),null),S=oi("mock-dem",m,y,u.style);super("mock-dem",S,!1),S.setEventedParent(this),this._sourceLoaded=!0}_loadTile(u,m){u.state="loaded",m(null)}}class Pr extends s.SourceCache{constructor(u){const m=oi("proxy",{type:"geojson",maxzoom:u.transform.maxZoom},new ve($r(),null),u.style);super("proxy",m,!1),m.setEventedParent(this),this.map=this.getSource().map=u,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(u,m,y){if(u.freezeTileCoverage)return;this.transform=u;const S=u.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce(((C,R)=>{if(C[R.key]="",!this._tiles[R.key]){const O=new s.Tile(R,this._source.tileSize*R.overscaleFactor(),u.tileZoom);O.state="loaded",this._tiles[R.key]=O}return C}),{});for(const C in this._tiles)C in S||(this.freeFBO(C),this._tiles[C].unloadVectorData(),delete this._tiles[C])}freeFBO(u){const m=this.proxyCachedFBO[u];if(m!==void 0){const y=Object.values(m);this.renderCachePool.push(...y),delete this.proxyCachedFBO[u]}}deallocRenderCache(){this.renderCache.forEach((u=>u.fb.destroy())),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class Ti extends s.OverscaledTileID{constructor(u,m,y){super(u.overscaledZ,u.wrap,u.canonical.z,u.canonical.x,u.canonical.y),this.proxyTileKey=m,this.projMatrix=y}}class ir extends s.Elevation{constructor(u,m){super(),this.painter=u,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[y,S,C]=(function(U){const G=new s.StructArrayLayout2i4,q=new s.StructArrayLayout3ui6,ae=131;G.reserve(17161),q.reserve(33800);const he=s.EXTENT/128,ye=s.EXTENT+he/2,we=ye+he;for(let Te=-he;Te<we;Te+=he)for(let le=-he;le<we;le+=he){const _e=le<0||le>ye||Te<0||Te>ye?24575:0,Ie=s.clamp(Math.round(le),0,s.EXTENT),Me=s.clamp(Math.round(Te),0,s.EXTENT);G.emplaceBack(Ie+_e,Me)}const be=(Te,le)=>{const _e=le*ae+Te;q.emplaceBack(_e+1,_e,_e+ae),q.emplaceBack(_e+ae,_e+ae+1,_e+1)};for(let Te=1;Te<129;Te++)for(let le=1;le<129;le++)be(le,Te);return[0,129].forEach((Te=>{for(let le=0;le<130;le++)be(le,Te),be(Te,le)})),[G,q,32768]})(),R=u.context;this.gridBuffer=R.createVertexBuffer(y,s.posAttributes.members),this.gridIndexBuffer=R.createIndexBuffer(S),this.gridSegments=s.SegmentVector.simpleSegment(0,0,y.length,S.length),this.gridNoSkirtSegments=s.SegmentVector.simpleSegment(0,0,y.length,C),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new Pr(m.map),this.orthoMatrix=s.create(),s.ortho(this.orthoMatrix,this.painter.transform.projection.name==="globe"?.015:0,s.EXTENT,0,s.EXTENT,0,1);const O=R.gl;this._overlapStencilMode=new s.StencilMode({func:O.GEQUAL,mask:255},0,255,O.KEEP,O.KEEP,O.REPLACE),this._previousZoom=u.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=m,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new ui(m.map)}set style(u){u.on("data",this._onStyleDataEvent.bind(this)),u.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=u,this._checkRenderCacheEfficiency(),this._style.map.on("moveend",(()=>{this._clearLineLayersFromRenderCache()}))}update(u,m,y){if(u&&u.terrain){this._style!==u&&(this.style=u),this.enabled=!0;const S=u.terrain.properties;this.sourceCache=u.terrain.drapeRenderMode===0?this._mockSourceCache:u._getSourceCache(S.get("source")),this._exaggeration=S.get("exaggeration");const C=()=>{this.sourceCache.used&&s.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const R=this.getScaledDemTileSize();this.sourceCache.update(m,R,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,C(),this._initializing=!0),C(),m.updateElevation(!0,y),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(m),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(u){this._findCoveringTileCache[u]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const u=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||u.efficiency!==100&&s.warnOnce(`Terrain render cache efficiency is not optimal (${u.efficiency}%) and performance
                may be affected negatively, consider placing all background, fill and line layers before layer
                with id '${u.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(u){u.coord&&u.dataType==="source"?this._clearRenderCacheForTile(u.sourceCacheId,u.coord):u.dataType==="style"&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const u in this._style._sourceCaches)this._style._sourceCaches[u].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach((u=>u.fb.destroy())),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const u=2*this.proxySourceCache.getSource().tileSize;return[u,u]}set useVertexMorphing(u){this._useVertexMorphing=u}updateTileBinding(u){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const m=this.proxySourceCache,y=this.painter.transform;this._initializing&&(this._initializing=y._centerAltitude===0&&this.getAtPointOrZero(s.MercatorCoordinate.fromLngLat(y.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);const S=this.proxyCoords=m.getIds().map((U=>{const G=m.getTileByID(U).tileID;return G.projMatrix=y.calculateProjMatrix(G.toUnwrapped()),G}));(function(U,G){const q=G.transform.pointCoordinate(G.transform.getCameraPoint()),ae=new s.Point(q.x,q.y);U.sort(((he,ye)=>{if(ye.overscaledZ-he.overscaledZ)return ye.overscaledZ-he.overscaledZ;const we=new s.Point(he.canonical.x+(1<<he.canonical.z)*he.wrap,he.canonical.y),be=new s.Point(ye.canonical.x+(1<<ye.canonical.z)*ye.wrap,ye.canonical.y),Te=ae.mult(1<<he.canonical.z);return Te.x-=.5,Te.y-=.5,Te.distSqr(we)-Te.distSqr(be)}))})(S,this.painter),this._previousZoom=y.zoom;const C=this.proxyToSource||{};this.proxyToSource={},S.forEach((U=>{this.proxyToSource[U.key]={}})),this.terrainTileForTile={};const R=this._style._sourceCaches;for(const U in R){const G=R[U];if(!G.used||(G!==this.sourceCache&&this.resetTileLookupCache(G.id),this._setupProxiedCoordsForOrtho(G,u[U],C),G.usedForTerrain))continue;const q=u[U];G.getSource().reparseOverscaled&&this._assignTerrainTiles(q)}this.proxiedCoords[m.id]=S.map((U=>new Ti(U,U.key,this.orthoMatrix))),this._assignTerrainTiles(S),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(C),this.renderingToTexture=!1,this._updateTimestamp=s.exported.now();const O={};this._visibleDemTiles=[];for(const U of this.proxyCoords){const G=this.terrainTileForTile[U.key];if(!G)continue;const q=G.tileID.key;q in O||(this._visibleDemTiles.push(G),O[q]=q)}}_assignTerrainTiles(u){this._initializing||u.forEach((m=>{if(this.terrainTileForTile[m.key])return;const y=this._findTileCoveringTileID(m,this.sourceCache);y&&(this.terrainTileForTile[m.key]=y)}))}_prepareDEMTextures(){const u=this.painter.context,m=u.gl;for(const y in this.terrainTileForTile){const S=this.terrainTileForTile[y],C=S.dem;!C||S.demTexture&&!S.needsDEMTextureUpload||(u.activeTexture.set(m.TEXTURE1),fl(this.painter,S,C))}}_prepareDemTileUniforms(u,m,y,S){if(!m||m.demTexture==null)return!1;const C=u.tileID.canonical,R=Math.pow(2,m.tileID.canonical.z-C.z),O=S||"";return y[`u_dem_tl${O}`]=[C.x*R%1,C.y*R%1],y[`u_dem_scale${O}`]=R,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const u=this.painter.context,m=u.gl;if(!this._emptyDepthBufferTexture){const y=new s.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new s.Texture(u,y,m.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let u=0;const m=this._visibleDemTiles.reduce(((y,S)=>{if(!S.dem)return y;const C=S.dem.tree.minimums[0];return C>0&&u++,y+C}),0);return u?m/u:0}_updateEmptyDEMTexture(){const u=this.painter.context,m=u.gl;u.activeTexture.set(m.TEXTURE2);const y=this._getLoadedAreaMinimum(),S=new s.RGBAImage({width:1,height:1},new Uint8Array(s.DEMData.pack(y,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let C=this._emptyDEMTexture;return C?C.update(S,{premultiply:!1}):C=this._emptyDEMTexture=new s.Texture(u,S,m.RGBA,{premultiply:!1}),C}setupElevationDraw(u,m,y){const S=this.painter.context,C=S.gl,R=(O=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:s.DEMData.getUnpackVector(O),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});var O;R.u_dem_size=this.sourceCache.getSource().tileSize,R.u_exaggeration=this.exaggeration();let U=null,G=null,q=1;if(y&&y.morphing&&this._useVertexMorphing){const ae=y.morphing.srcDemTile,he=y.morphing.dstDemTile;q=y.morphing.phase,ae&&he&&(this._prepareDemTileUniforms(u,ae,R,"_prev")&&(G=ae),this._prepareDemTileUniforms(u,he,R)&&(U=he))}if(G&&U?(S.activeTexture.set(C.TEXTURE2),U.demTexture.bind(C.NEAREST,C.CLAMP_TO_EDGE,C.NEAREST),S.activeTexture.set(C.TEXTURE4),G.demTexture.bind(C.NEAREST,C.CLAMP_TO_EDGE,C.NEAREST),R.u_dem_lerp=q):(U=this.terrainTileForTile[u.tileID.key],S.activeTexture.set(C.TEXTURE2),(this._prepareDemTileUniforms(u,U,R)?U.demTexture:this.emptyDEMTexture).bind(C.NEAREST,C.CLAMP_TO_EDGE)),S.activeTexture.set(C.TEXTURE3),y&&y.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(C.NEAREST,C.CLAMP_TO_EDGE),this._depthFBO&&(R.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(C.NEAREST,C.CLAMP_TO_EDGE),R.u_depth_size_inv=[1,1]),y&&y.useMeterToDem&&U){const ae=(1<<U.tileID.canonical.z)*s.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;R.u_meter_to_dem=ae}if(y&&y.labelPlaneMatrixInv&&(R.u_label_plane_matrix_inv=y.labelPlaneMatrixInv),m.setTerrainUniformValues(S,R),this.painter.transform.projection.name==="globe"){const ae=this.globeUniformValues(this.painter.transform,u.tileID.canonical,y&&y.useDenormalizedUpVectorScale);m.setGlobeUniformValues(S,ae)}}globeUniformValues(u,m,y){const S=u.projection;return{u_tile_tl_up:S.upVector(m,0,0),u_tile_tr_up:S.upVector(m,s.EXTENT,0),u_tile_br_up:S.upVector(m,s.EXTENT,s.EXTENT),u_tile_bl_up:S.upVector(m,0,s.EXTENT),u_tile_up_scale:y?s.globeMetersToEcef(1):S.upVectorScale(m,u.center.lat,u.worldSize).metersToTile}}renderToBackBuffer(u){const m=this.painter,y=this.painter.context;u.length!==0&&(y.bindFramebuffer.set(null),y.viewport.set([0,0,m.width,m.height]),m.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,(function(S,C,R,O,U){if(S.transform.projection.name==="globe")(function(G,q,ae,he,ye){const we=G.context,be=we.gl;let Te,le;const _e=G.options.showTerrainWireframe?2:0,Ie=G.transform,Me=s.globeUseCustomAntiAliasing(G,we,Ie),$e=(Wt,ht)=>{if(le===Wt)return;const xt=[ue[Wt],"PROJECTION_GLOBE_VIEW"];Me&&xt.push("CUSTOM_ANTIALIASING"),ht&&xt.push(ue[_e]),Te=G.useProgram("globeRaster",null,xt),le=Wt},qe=G.colorModeForRenderPass(),Ze=new s.DepthMode(be.LEQUAL,s.DepthMode.ReadWrite,G.depthRangeFor3D);ee.update(ye);const ot=s.calculateGlobeMercatorMatrix(Ie),it=[s.mercatorXfromLng(Ie.center.lng),s.mercatorYfromLat(Ie.center.lat)],mt=_e?[!1,!0]:[!1],$t=G.globeSharedBuffers,lt=[Ie.width*s.exported.devicePixelRatio,Ie.height*s.exported.devicePixelRatio],Rt=Float32Array.from(Ie.globeMatrix),vt={useDenormalizedUpVectorScale:!0};if(mt.forEach((Wt=>{const ht=G.transform,xt=Pe(ht.zoom)*q.exaggeration();le=-1;const Ut=Wt?be.LINES:be.TRIANGLES;for(const Bt of he){const qt=ae.getTile(Bt),Pn=s.StencilMode.disabled,jn=q.prevTerrainTileForTile[Bt.key],xn=q.terrainTileForTile[Bt.key];A(jn,xn)&&ee.newMorphing(Bt.key,jn,xn,ye,250),we.activeTexture.set(be.TEXTURE0),qt.texture.bind(be.LINEAR,be.CLAMP_TO_EDGE);const Dn=ee.getMorphValuesForProxy(Bt.key),pi=Dn?1:0;Dn&&s.extend$1(vt,{morphing:{srcDemTile:Dn.from,dstDemTile:Dn.to,phase:s.easeCubicInOut(Dn.phase)}});const fi=s.tileCornersToBounds(Bt.canonical),kn=s.getLatitudinalLod(fi.getCenter().lat),Mi=s.getGridMatrix(Bt.canonical,fi,kn,ht.worldSize/ht._pixelsPerMercatorPixel),Ui=s.globeNormalizeECEF(s.globeTileBounds(Bt.canonical)),Ki=Ko(ht.projMatrix,Rt,ot,Ui,s.globeToMercatorTransition(ht.zoom),it,ht.frustumCorners.TL,ht.frustumCorners.TR,ht.frustumCorners.BR,ht.frustumCorners.BL,ht.globeCenterInViewSpace,ht.globeRadius,lt,xt,Mi);if($e(pi,Wt),q.setupElevationDraw(qt,Te,vt),G.prepareDrawProgram(we,Te,Bt.toUnwrapped()),$t){const[$i,Ns,ks]=Wt?$t.getWirefameBuffers(G.context,kn):$t.getGridBuffers(kn,xt!==0);Te.draw(we,Ut,Ze,Pn,qe,s.CullFaceMode.backCCW,Ki,"globe_raster",$i,Ns,ks)}}})),$t){const Wt=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];Me&&Wt.push("CUSTOM_ANTIALIASING"),Te=G.useProgram("globeRaster",null,Wt);for(const ht of he){const{x:xt,y:Ut,z:Bt}=ht.canonical,qt=Ut===0,Pn=Ut===(1<<Bt)-1,[jn,xn,Dn,pi]=$t.getPoleBuffers(Bt);if(pi&&(qt||Pn)){const fi=ae.getTile(ht);we.activeTexture.set(be.TEXTURE0),fi.texture.bind(be.LINEAR,be.CLAMP_TO_EDGE);let kn=s.globePoleMatrixForTile(Bt,xt,Ie);const Mi=s.globeNormalizeECEF(s.globeTileBounds(ht.canonical)),Ui=(Ki,$i)=>Ki.draw(we,be.TRIANGLES,Ze,s.StencilMode.disabled,qe,s.CullFaceMode.disabled,Ko(Ie.projMatrix,kn,kn,Mi,0,it,Ie.frustumCorners.TL,Ie.frustumCorners.TR,Ie.frustumCorners.BR,Ie.frustumCorners.BL,Ie.globeCenterInViewSpace,Ie.globeRadius,lt,0),"globe_pole_raster",$i,Dn,pi);q.setupElevationDraw(fi,Te,vt),G.prepareDrawProgram(we,Te,ht.toUnwrapped()),qt&&Ui(Te,jn),Pn&&(kn=s.scale(s.create(),kn,[1,-1,1]),Ui(Te,xn))}}}})(S,C,R,O,U);else{const G=S.context,q=G.gl;let ae,he;const ye=S.options.showTerrainWireframe?2:0,we=(Ie,Me)=>{if(he===Ie)return;const $e=[ue[Ie]];Me&&$e.push(ue[ye]),ae=S.useProgram("terrainRaster",null,$e),he=Ie},be=S.colorModeForRenderPass(),Te=new s.DepthMode(q.LEQUAL,s.DepthMode.ReadWrite,S.depthRangeFor3D);ee.update(U);const le=S.transform,_e=Pe(le.zoom)*C.exaggeration();(ye?[!1,!0]:[!1]).forEach((Ie=>{he=-1;const Me=Ie?q.LINES:q.TRIANGLES,[$e,qe]=Ie?C.getWirefameBuffer():[C.gridIndexBuffer,C.gridSegments];for(const Ze of O){const ot=R.getTile(Ze),it=s.StencilMode.disabled,mt=C.prevTerrainTileForTile[Ze.key],$t=C.terrainTileForTile[Ze.key];A(mt,$t)&&ee.newMorphing(Ze.key,mt,$t,U,250),G.activeTexture.set(q.TEXTURE0),ot.texture.bind(q.LINEAR,q.CLAMP_TO_EDGE,q.LINEAR_MIPMAP_NEAREST);const lt=ee.getMorphValuesForProxy(Ze.key),Rt=lt?1:0;let vt;lt&&(vt={morphing:{srcDemTile:lt.from,dstDemTile:lt.to,phase:s.easeCubicInOut(lt.phase)}});const Wt=oo(Ze.projMatrix,bt(Ze.canonical,le.renderWorldCopies)?_e/10:_e);we(Rt,Ie),C.setupElevationDraw(ot,ae,vt),S.prepareDrawProgram(G,ae,Ze.toUnwrapped()),ae.draw(G,Me,Te,it,be,s.CullFaceMode.backCCW,Wt,"terrain_raster",C.gridBuffer,$e,qe)}}))}})(m,this,this.proxySourceCache,u,this._updateTimestamp),this.renderingToTexture=!0,m.gpuTimingDeferredRenderEnd(),u.splice(0,u.length))}renderBatch(u){if(this._drapedRenderBatches.length===0)return u+1;this.renderingToTexture=!0;const m=this.painter,y=this.painter.context,S=this.proxySourceCache,C=this.proxiedCoords[S.id],R=this._drapedRenderBatches.shift(),O=[],U=m.style.order;let G=0;for(const q of C){const ae=S.getTileByID(q.proxyTileKey),he=S.proxyCachedFBO[q.key]?S.proxyCachedFBO[q.key][u]:void 0,ye=he!==void 0?S.renderCache[he]:this.pool[G++],we=he!==void 0;if(ae.texture=ye.tex,we&&!ye.dirty){O.push(ae.tileID);continue}let be;y.bindFramebuffer.set(ye.fb.framebuffer),this.renderedToTile=!1,ye.dirty&&(y.clear({color:s.Color.transparent,stencil:0}),ye.dirty=!1);for(let Te=R.start;Te<=R.end;++Te){const le=m.style._layers[U[Te]];if(le.isHidden(m.transform.zoom))continue;const _e=m.style._getLayerSourceCache(le),Ie=_e?this.proxyToSource[q.key][_e.id]:[q];if(!Ie)continue;const Me=Ie;y.viewport.set([0,0,ye.fb.width,ye.fb.height]),be!==(_e?_e.id:null)&&(this._setupStencil(ye,Ie,le,_e),be=_e?_e.id:null),m.renderLayer(m,_e,le,Me)}this.renderedToTile?(ye.dirty=!0,O.push(ae.tileID)):we||--G,G===5&&(G=0,this.renderToBackBuffer(O))}return this.renderToBackBuffer(O),this.renderingToTexture=!1,y.bindFramebuffer.set(null),y.viewport.set([0,0,m.width,m.height]),R.end+1}postRender(){}renderCacheEfficiency(u){const m=u.order.length;if(m===0)return{efficiency:100};let y,S=0,C=0,R=!1;for(let O=0;O<m;++O){const U=u._layers[u.order[O]];this._style.isLayerDraped(U)?(R&&++S,++C):R||(R=!0,y=U.id)}return C===0?{efficiency:100}:{efficiency:100*(1-S/C),firstUndrapedLayer:y}}getMinElevationBelowMSL(){let u=0;return this._visibleDemTiles.filter((m=>m.dem)).forEach((m=>{u=Math.min(u,m.dem.tree.minimums[0])})),u===0?u:(u-30)*this._exaggeration}raycast(u,m,y){if(!this._visibleDemTiles)return null;const S=this._visibleDemTiles.filter((C=>C.dem)).map((C=>{const R=C.tileID,O=1<<R.overscaledZ,{x:U,y:G}=R.canonical,q=U/O,ae=(U+1)/O,he=G/O,ye=(G+1)/O;return{minx:q,miny:he,maxx:ae,maxy:ye,t:C.dem.tree.raycastRoot(q,he,ae,ye,u,m,y),tile:C}}));S.sort(((C,R)=>(C.t!==null?C.t:Number.MAX_VALUE)-(R.t!==null?R.t:Number.MAX_VALUE)));for(const C of S){if(C.t==null)return null;const R=C.tile.dem.tree.raycast(C.minx,C.miny,C.maxx,C.maxy,u,m,y);if(R!=null)return R}return null}_createFBO(){const u=this.painter.context,m=u.gl,y=this.drapeBufferSize;u.activeTexture.set(m.TEXTURE0);const S=new s.Texture(u,{width:y[0],height:y[1],data:null},m.RGBA);S.bind(m.LINEAR,m.CLAMP_TO_EDGE);const C=u.createFramebuffer(y[0],y[1],!1);return C.colorAttachment.set(S.texture),C.depthAttachment=new et(u,C.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=u.createRenderbuffer(u.gl.DEPTH_STENCIL,y[0],y[1]),this._stencilRef=0,C.depthAttachment.set(this._sharedDepthStencil),u.clear({stencil:0})):C.depthAttachment.set(this._sharedDepthStencil),u.extTextureFilterAnisotropic&&!u.extTextureFilterAnisotropicForceOff&&m.texParameterf(m.TEXTURE_2D,u.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,u.extTextureFilterAnisotropicMax),{fb:C,tex:S,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const u in this._style._sourceCaches)if(this._style._sourceCaches[u].hasTransition())return!0;return this._style.order.some((u=>{const m=this._style._layers[u],y=m.isHidden(this.painter.transform.zoom);return m.type==="custom"?!y&&m.shouldRedrape():!y&&m.hasTransition()}))}_clearLineLayersFromRenderCache(){let u=!1;for(const y of this._style._getSources())if(y instanceof on){u=!0;break}if(!u)return;const m={};for(let y=0;y<this._style.order.length;++y){const S=this._style._layers[this._style.order[y]],C=this._style._getLayerSourceCache(S);if(C&&!m[C.id]&&!S.isHidden(this.painter.transform.zoom)&&S.type==="line"&&S.widthExpression()instanceof s.ZoomDependentExpression){m[C.id]=!0;for(const R of this.proxyCoords){const O=this.proxyToSource[R.key][C.id];if(O)for(const U of O)this._clearRenderCacheForTile(C.id,U)}}}}_clearRasterLayersFromRenderCache(){let u=!1;for(const y in this._style._sourceCaches)if(this._style._sourceCaches[y]._source instanceof Yt){u=!0;break}if(!u)return;const m={};for(let y=0;y<this._style.order.length;++y){const S=this._style._layers[this._style.order[y]],C=this._style._getLayerSourceCache(S);if(!C||m[C.id]||S.isHidden(this.painter.transform.zoom)||S.type!=="raster")continue;const R=S.paint.get("raster-fade-duration");for(const O of this.proxyCoords){const U=this.proxyToSource[O.key][C.id];if(U)for(const G of U){const q=pn(C.getTile(G),C.findLoadedParent(G,0),C,this.painter.transform,R);(q.opacity!==1||q.mix!==0)&&this._clearRenderCacheForTile(C.id,G)}}}}_setupDrapedRenderBatches(){const u=this._style.order,m=u.length;if(m===0)return;const y=[];let S,C=0,R=this._style._layers[u[C]];for(;!this._style.isLayerDraped(R)&&R.isHidden(this.painter.transform.zoom)&&++C<m;)R=this._style._layers[u[C]];for(;C<m;++C){const O=this._style._layers[u[C]];O.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(O)?S===void 0&&(S=C):S!==void 0&&(y.push({start:S,end:C-1}),S=void 0))}S!==void 0&&y.push({start:S,end:C-1}),this._drapedRenderBatches=y}_setupRenderCache(u){const m=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,m.renderCache.length>m.renderCachePool.length){const R=Object.values(m.proxyCachedFBO);m.proxyCachedFBO={};for(let O=0;O<R.length;++O){const U=Object.values(R[O]);m.renderCachePool.push(...U)}}return}this._clearRasterLayersFromRenderCache();const y=this.proxyCoords,S=this._tilesDirty;for(let R=y.length-1;R>=0;R--){const O=y[R];if(m.getTileByID(O.key),m.proxyCachedFBO[O.key]!==void 0){const U=u[O.key],G=this.proxyToSource[O.key];let q=0;for(const ae in G){const he=G[ae],ye=U[ae];if(!ye||ye.length!==he.length||he.some(((we,be)=>we!==ye[be]||S[ae]&&S[ae].hasOwnProperty(we.key)))){q=-1;break}++q}for(const ae in m.proxyCachedFBO[O.key])m.renderCache[m.proxyCachedFBO[O.key][ae]].dirty=q<0||q!==Object.values(U).length}}const C=[...this._drapedRenderBatches];C.sort(((R,O)=>O.end-O.start-(R.end-R.start)));for(const R of C)for(const O of y){if(m.proxyCachedFBO[O.key])continue;let U=m.renderCachePool.pop();U===void 0&&m.renderCache.length<50&&(U=m.renderCache.length,m.renderCache.push(this._createFBO())),U!==void 0&&(m.proxyCachedFBO[O.key]={},m.proxyCachedFBO[O.key][R.start]=U,m.renderCache[U].dirty=!0)}this._tilesDirty={}}_setupStencil(u,m,y,S){if(!S||!this._sourceTilesOverlap[S.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const C=this.painter.context,R=C.gl;if(m.length<=1)return void(this._overlapStencilType=!1);let O;if(y.isTileClipped())O=m.length,this._overlapStencilMode.test={func:R.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(m[0].overscaledZ>m[m.length-1].overscaledZ))return void(this._overlapStencilType=!1);O=1,this._overlapStencilMode.test={func:R.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+O>255&&(C.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=O,this._overlapStencilMode.ref=this._stencilRef,y.isTileClipped()&&this._renderTileClippingMasks(m,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(u){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[u.key]),this._overlapStencilMode):s.StencilMode.disabled}_renderTileClippingMasks(u,m){const y=this.painter,S=this.painter.context,C=S.gl;y._tileClippingMaskIDs={},S.setColorMode(s.ColorMode.disabled),S.setDepthMode(s.DepthMode.disabled);const R=y.useProgram("clippingMask");for(const O of u){const U=y._tileClippingMaskIDs[O.key]=--m;R.draw(S,C.TRIANGLES,s.DepthMode.disabled,new s.StencilMode({func:C.ALWAYS,mask:0},U,255,C.KEEP,C.KEEP,C.REPLACE),s.ColorMode.disabled,s.CullFaceMode.disabled,Pt(O.projMatrix),"$clipping",y.tileExtentBuffer,y.quadTriangleIndexBuffer,y.tileExtentSegments)}}pointCoordinate(u){const m=this.painter.transform;if(u.x<0||u.x>m.width||u.y<0||u.y>m.height)return null;const y=[u.x,u.y,1,1];s.transformMat4$1(y,y,m.pixelMatrixInverse),s.scale$1(y,y,1/y[3]),y[0]/=m.worldSize,y[1]/=m.worldSize;const S=m._camera.position,C=s.mercatorZfromAltitude(1,m.center.lat),R=[S[0],S[1],S[2]/C,0],O=s.subtract([],y.slice(0,3),R);s.normalize(O,O);const U=this.raycast(R,O,this._exaggeration);return U!==null&&U?(s.scaleAndAdd(R,R,O,U),R[3]=R[2],R[2]*=C,R):null}drawDepth(){const u=this.painter,m=u.context,y=this.proxySourceCache,S=Math.ceil(u.width),C=Math.ceil(u.height);if(!this._depthFBO||this._depthFBO.width===S&&this._depthFBO.height===C||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const R=m.gl,O=m.createFramebuffer(S,C,!0);m.activeTexture.set(R.TEXTURE0);const U=new s.Texture(m,{width:S,height:C,data:null},R.RGBA);U.bind(R.NEAREST,R.CLAMP_TO_EDGE),O.colorAttachment.set(U.texture);const G=m.createRenderbuffer(m.gl.DEPTH_COMPONENT16,S,C);O.depthAttachment.set(G),this._depthFBO=O,this._depthTexture=U}m.bindFramebuffer.set(this._depthFBO.framebuffer),m.viewport.set([0,0,S,C]),(function(R,O,U,G){if(R.transform.projection.name==="globe")return;const q=R.context,ae=q.gl;q.clear({depth:1});const he=R.useProgram("terrainDepth"),ye=new s.DepthMode(ae.LESS,s.DepthMode.ReadWrite,R.depthRangeFor3D);for(const we of G){const be=U.getTile(we),Te=oo(we.projMatrix,0);O.setupElevationDraw(be,he),he.draw(q,ae.TRIANGLES,ye,s.StencilMode.disabled,s.ColorMode.unblended,s.CullFaceMode.backCCW,Te,"terrain_depth",O.gridBuffer,O.gridIndexBuffer,O.gridNoSkirtSegments)}})(u,this,y,this.proxyCoords)}_setupProxiedCoordsForOrtho(u,m,y){if(u.getSource()instanceof Zn)return this._setupProxiedCoordsForImageSource(u,m,y);this._findCoveringTileCache[u.id]=this._findCoveringTileCache[u.id]||{};const S=this.proxiedCoords[u.id]=[],C=this.proxyCoords;for(let O=0;O<C.length;O++){const U=C[O],G=this._findTileCoveringTileID(U,u);if(G){const q=this._createProxiedId(U,G,y[U.key]&&y[U.key][u.id]);S.push(q),this.proxyToSource[U.key][u.id]=[q]}}let R=!1;for(let O=0;O<m.length;O++){const U=u.getTile(m[O]);if(!U||!U.hasData())continue;const G=this._findTileCoveringTileID(U.tileID,this.proxySourceCache);if(G&&G.tileID.canonical.z!==U.tileID.canonical.z){const q=this.proxyToSource[G.tileID.key][u.id],ae=this._createProxiedId(G.tileID,U,y[G.tileID.key]&&y[G.tileID.key][u.id]);q?q.splice(q.length-1,0,ae):this.proxyToSource[G.tileID.key][u.id]=[ae],S.push(ae),R=!0}}this._sourceTilesOverlap[u.id]=R}_setupProxiedCoordsForImageSource(u,m,y){if(!u.getSource().loaded())return;const S=this.proxiedCoords[u.id]=[],C=this.proxyCoords,R=u.getSource(),O=new s.Point(R.tileID.x,R.tileID.y)._div(1<<R.tileID.z),U=R.coordinates.map(s.MercatorCoordinate.fromLngLat).reduce(((q,ae)=>(q.min.x=Math.min(q.min.x,ae.x-O.x),q.min.y=Math.min(q.min.y,ae.y-O.y),q.max.x=Math.max(q.max.x,ae.x-O.x),q.max.y=Math.max(q.max.y,ae.y-O.y),q)),{min:new s.Point(Number.MAX_VALUE,Number.MAX_VALUE),max:new s.Point(-Number.MAX_VALUE,-Number.MAX_VALUE)}),G=(q,ae)=>{const he=q.wrap+q.canonical.x/(1<<q.canonical.z),ye=q.canonical.y/(1<<q.canonical.z),we=s.EXTENT/(1<<q.canonical.z),be=ae.wrap+ae.canonical.x/(1<<ae.canonical.z),Te=ae.canonical.y/(1<<ae.canonical.z);return he+we<be+U.min.x||he>be+U.max.x||ye+we<Te+U.min.y||ye>Te+U.max.y};for(let q=0;q<C.length;q++){const ae=C[q];for(let he=0;he<m.length;he++){const ye=u.getTile(m[he]);if(!ye||!ye.hasData()||G(ae,ye.tileID))continue;const we=this._createProxiedId(ae,ye,y[ae.key]&&y[ae.key][u.id]),be=this.proxyToSource[ae.key][u.id];be?be.push(we):this.proxyToSource[ae.key][u.id]=[we],S.push(we)}}}_createProxiedId(u,m,y){let S=this.orthoMatrix;if(y){const C=y.find((R=>R.key===m.tileID.key));if(C)return C}if(m.tileID.key!==u.key){const C=u.canonical.z-m.tileID.canonical.z;let R,O,U;S=s.create();const G=m.tileID.wrap-u.wrap<<u.overscaledZ;C>0?(R=s.EXTENT>>C,O=R*((m.tileID.canonical.x<<C)-u.canonical.x+G),U=R*((m.tileID.canonical.y<<C)-u.canonical.y)):(R=s.EXTENT<<-C,O=s.EXTENT*(m.tileID.canonical.x-(u.canonical.x+G<<-C)),U=s.EXTENT*(m.tileID.canonical.y-(u.canonical.y<<-C))),s.ortho(S,0,R,0,R,0,1),s.translate(S,S,[O,U,0])}return new Ti(m.tileID,u.key,S)}_findTileCoveringTileID(u,m){let y=m.getTile(u);if(y&&y.hasData())return y;const S=this._findCoveringTileCache[m.id],C=S[u.key];if(y=C?m.getTileByID(C):null,y&&y.hasData()||C===null)return y;let R=y?y.tileID:u,O=R.overscaledZ;const U=m.getSource().minzoom,G=[];if(!C){const ae=m.getSource().maxzoom;if(u.canonical.z>=ae){const he=u.canonical.z-ae;m.getSource().reparseOverscaled?(O=Math.max(u.canonical.z+2,m.transform.tileZoom),R=new s.OverscaledTileID(O,u.wrap,ae,u.canonical.x>>he,u.canonical.y>>he)):he!==0&&(O=ae,R=new s.OverscaledTileID(O,u.wrap,ae,u.canonical.x>>he,u.canonical.y>>he))}R.key!==u.key&&(G.push(R.key),y=m.getTile(R))}const q=ae=>{G.forEach((he=>{S[he]=ae})),G.length=0};for(O-=1;O>=U&&(!y||!y.hasData());O--){y&&q(y.tileID.key);const ae=R.calculateScaledKey(O);if(y=m.getTileByID(ae),y&&y.hasData())break;const he=S[ae];if(he===null)break;he===void 0?G.push(ae):y=m.getTileByID(he)}return q(y?y.tileID.key:null),y&&y.hasData()?y:null}findDEMTileFor(u){return this.enabled?this._findTileCoveringTileID(u,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(u,m){let y=this._tilesDirty[u];y||(y=this._tilesDirty[u]={}),y[m.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const u=(function(m){let y=0;const S=new s.StructArrayLayout2ui4,C=131;for(let R=1;R<129;R++){for(let O=1;O<129;O++)y=R*C+O,S.emplaceBack(y,y+1),S.emplaceBack(y,y+C),S.emplaceBack(y+1,y+C),R===128&&S.emplaceBack(y+C,y+C+1);S.emplaceBack(y+1,y+1+C)}return S})();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(u),this.wireframeSegments=s.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,u.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}class Yn{static cacheKey(u,m,y,S){let C=`${m}${S?S.cacheKey:""}`;for(const R of y)u.usedDefines.includes(R)&&(C+=`/${R}`);return C}constructor(u,m,y,S,C,R){const O=u.gl;this.program=O.createProgram();const U=(function(le){const _e=[];for(let Ie=0;Ie<le.length;Ie++){if(le[Ie]===null)continue;const Me=le[Ie].split(" ");_e.push(Me.pop())}return _e})(y.staticAttributes),G=S?S.getBinderAttributes():[],q=U.concat(G);let ae=S?S.defines():[];ae=ae.concat(R.map((le=>`#define ${le}`)));const he=u.isWebGL2?`#version 300 es
`:"",ye=he+ae.concat(u.extStandardDerivatives&&he.length===0?`#extension GL_OES_standard_derivatives : enable
`.concat(pu):pu,pu,hl,Fc.fragmentSource,Ga.fragmentSource,y.fragmentSource).join(`
`),we=he+ae.concat(`
#ifdef GL_ES
precision highp float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`,hl,Fc.vertexSource,Ga.vertexSource,fc.vertexSource,y.vertexSource).join(`
`),be=O.createShader(O.FRAGMENT_SHADER);if(O.isContextLost())return void(this.failedToCreate=!0);O.shaderSource(be,ye),O.compileShader(be),O.attachShader(this.program,be);const Te=O.createShader(O.VERTEX_SHADER);if(O.isContextLost())this.failedToCreate=!0;else{O.shaderSource(Te,we),O.compileShader(Te),O.attachShader(this.program,Te),this.attributes={},this.numAttributes=q.length;for(let le=0;le<this.numAttributes;le++)q[le]&&(O.bindAttribLocation(this.program,le,q[le]),this.attributes[q[le]]=le);O.linkProgram(this.program),O.deleteShader(Te),O.deleteShader(be),this.fixedUniforms=C(u),this.binderUniforms=S?S.getUniforms(u):[],R.includes("TERRAIN")&&(this.terrainUniforms=(le=>({u_dem:new s.Uniform1i(le),u_dem_prev:new s.Uniform1i(le),u_dem_unpack:new s.Uniform4f(le),u_dem_tl:new s.Uniform2f(le),u_dem_scale:new s.Uniform1f(le),u_dem_tl_prev:new s.Uniform2f(le),u_dem_scale_prev:new s.Uniform1f(le),u_dem_size:new s.Uniform1f(le),u_dem_lerp:new s.Uniform1f(le),u_exaggeration:new s.Uniform1f(le),u_depth:new s.Uniform1i(le),u_depth_size_inv:new s.Uniform2f(le),u_meter_to_dem:new s.Uniform1f(le),u_label_plane_matrix_inv:new s.UniformMatrix4f(le)}))(u)),R.includes("GLOBE")&&(this.globeUniforms=(le=>({u_tile_tl_up:new s.Uniform3f(le),u_tile_tr_up:new s.Uniform3f(le),u_tile_br_up:new s.Uniform3f(le),u_tile_bl_up:new s.Uniform3f(le),u_tile_up_scale:new s.Uniform1f(le)}))(u)),R.includes("FOG")&&(this.fogUniforms=(le=>({u_fog_matrix:new s.UniformMatrix4f(le),u_fog_range:new s.Uniform2f(le),u_fog_color:new s.Uniform4f(le),u_fog_horizon_blend:new s.Uniform1f(le),u_fog_temporal_offset:new s.Uniform1f(le),u_frustum_tl:new s.Uniform3f(le),u_frustum_tr:new s.Uniform3f(le),u_frustum_br:new s.Uniform3f(le),u_frustum_bl:new s.Uniform3f(le),u_globe_pos:new s.Uniform3f(le),u_globe_radius:new s.Uniform1f(le),u_globe_transition:new s.Uniform1f(le),u_is_globe:new s.Uniform1i(le),u_viewport:new s.Uniform2f(le)}))(u))}}setTerrainUniformValues(u,m){if(!this.terrainUniforms)return;const y=this.terrainUniforms;if(!this.failedToCreate){u.program.set(this.program);for(const S in m)y[S]&&y[S].set(this.program,S,m[S])}}setGlobeUniformValues(u,m){if(!this.globeUniforms)return;const y=this.globeUniforms;if(!this.failedToCreate){u.program.set(this.program);for(const S in m)y[S]&&y[S].set(this.program,S,m[S])}}setFogUniformValues(u,m){if(!this.fogUniforms)return;const y=this.fogUniforms;if(!this.failedToCreate){u.program.set(this.program);for(const S in m)y[S].set(this.program,S,m[S])}}draw(u,m,y,S,C,R,O,U,G,q,ae,he,ye,we,be){const Te=u.gl;if(this.failedToCreate)return;u.program.set(this.program),u.setDepthMode(y),u.setStencilMode(S),u.setColorMode(C),u.setCullFace(R);for(const _e of Object.keys(this.fixedUniforms))this.fixedUniforms[_e].set(this.program,_e,O[_e]);we&&we.setUniforms(this.program,u,this.binderUniforms,he,{zoom:ye});const le={[Te.LINES]:2,[Te.TRIANGLES]:3,[Te.LINE_STRIP]:1}[m];for(const _e of ae.get()){const Ie=_e.vaos||(_e.vaos={});(Ie[U]||(Ie[U]=new zc)).bind(u,this,G,we?we.getPaintVertexBuffers():[],q,_e.vertexOffset,be||[]),Te.drawElements(m,_e.primitiveLength*le,Te.UNSIGNED_SHORT,_e.primitiveOffset*le*2)}}}function qs(_,u){const m=Math.pow(2,u.tileID.overscaledZ),y=u.tileSize*Math.pow(2,_.transform.tileZoom)/m,S=y*(u.tileID.canonical.x+u.tileID.wrap*m),C=y*u.tileID.canonical.y;return{u_image:0,u_texsize:u.imageAtlasTexture.size,u_tile_units_to_pixels:1/Le(u,1,_.transform.tileZoom),u_pixel_coord_upper:[S>>16,C>>16],u_pixel_coord_lower:[65535&S,65535&C]}}const qa=s.create(),ga=(_,u,m,y,S,C,R,O,U,G,q)=>{const ae=u.style.light,he=ae.properties.get("position"),ye=[he.x,he.y,he.z],we=s.create$1();ae.properties.get("anchor")==="viewport"&&(s.fromRotation(we,-u.transform.angle),s.transformMat3(ye,ye,we));const be=ae.properties.get("color"),Te=u.transform,le={u_matrix:_,u_lightpos:ye,u_lightintensity:ae.properties.get("intensity"),u_lightcolor:[be.r,be.g,be.b],u_vertical_gradient:+m,u_opacity:y,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:qa,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:S,u_edge_radius:C};return Te.projection.name==="globe"&&(le.u_tile_id=[R.canonical.x,R.canonical.y,1<<R.canonical.z],le.u_zoom_transition=U,le.u_inv_rot_matrix=q,le.u_merc_center=G,le.u_up_dir=Te.projection.upVector(new s.CanonicalTileID(0,0,0),G[0]*s.EXTENT,G[1]*s.EXTENT),le.u_height_lift=O),le},Uc=(_,u,m,y,S,C,R,O,U,G,q,ae)=>{const he=ga(_,u,m,y,S,C,R,U,G,q,ae),ye={u_height_factor:-Math.pow(2,R.overscaledZ)/O.tileSize/8};return s.extend(he,qs(u,O),ye)},Ka=_=>({u_matrix:_}),hm=(_,u,m)=>s.extend(Ka(_),qs(u,m)),yv=(_,u)=>({u_matrix:_,u_world:u}),bv=(_,u,m,y)=>s.extend(hm(_,u,m),{u_world:y}),xv=s.create(),Xo=(_,u,m,y,S,C)=>{const R=_.transform,O=R.projection.name==="globe";let U;if(C.paint.get("circle-pitch-alignment")==="map")if(O){const q=s.globePixelsToTileUnits(R.zoom,u.canonical)*R._pixelsPerMercatorPixel;U=Float32Array.from([q,0,0,q])}else U=R.calculatePixelsToTileUnitsMatrix(m);else U=new Float32Array([R.pixelsToGLUnits[0],0,0,R.pixelsToGLUnits[1]]);const G={u_camera_to_center_distance:R.cameraToCenterDistance,u_matrix:_.translatePosMatrix(u.projMatrix,m,C.paint.get("circle-translate"),C.paint.get("circle-translate-anchor")),u_device_pixel_ratio:s.exported.devicePixelRatio,u_extrude_scale:U,u_inv_rot_matrix:xv,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(O){G.u_inv_rot_matrix=y,G.u_merc_center=S,G.u_tile_id=[u.canonical.x,u.canonical.y,1<<u.canonical.z],G.u_zoom_transition=s.globeToMercatorTransition(R.zoom);const q=S[0]*s.EXTENT,ae=S[1]*s.EXTENT;G.u_up_dir=R.projection.upVector(new s.CanonicalTileID(0,0,0),q,ae)}return G},Lh=_=>{const u=[];return _.paint.get("circle-pitch-alignment")==="map"&&u.push("PITCH_WITH_MAP"),_.paint.get("circle-pitch-scale")==="map"&&u.push("SCALE_WITH_MAP"),u},Oh=(_,u,m,y)=>{const S=s.EXTENT/m.tileSize;return{u_matrix:_,u_camera_to_center_distance:u.getCameraToCenterDistance(y),u_extrude_scale:[u.pixelsToGLUnits[0]/S,u.pixelsToGLUnits[1]/S]}},fd=(_,u,m=1)=>({u_matrix:_,u_color:u,u_overlay:0,u_overlay_scale:m}),ug=s.create(),dg=(_,u,m,y,S,C,R)=>{const O=_.transform,U=O.projection.name==="globe",G=U?s.globePixelsToTileUnits(O.zoom,u.canonical)*O._pixelsPerMercatorPixel:Le(m,1,C),q={u_matrix:u.projMatrix,u_extrude_scale:G,u_intensity:R,u_inv_rot_matrix:ug,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(U){q.u_inv_rot_matrix=y,q.u_merc_center=S,q.u_tile_id=[u.canonical.x,u.canonical.y,1<<u.canonical.z],q.u_zoom_transition=s.globeToMercatorTransition(O.zoom);const ae=S[0]*s.EXTENT,he=S[1]*s.EXTENT;q.u_up_dir=O.projection.upVector(new s.CanonicalTileID(0,0,0),ae,he)}return q},hg=(_,u,m,y,S,C,R)=>{const O=_.transform,U=O.calculatePixelsToTileUnitsMatrix(u);return{u_matrix:fm(_,u,m,y),u_pixels_to_tile_units:U,u_device_pixel_ratio:C,u_units_to_pixels:[1/O.pixelsToGLUnits[0],1/O.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:S,u_texsize:yu(m)?u.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:vu(u,_.transform),u_alpha_discard_threshold:0,u_trim_offset:R}},mc=(_,u,m,y,S)=>{const C=_.transform;return{u_matrix:fm(_,u,m,y),u_texsize:u.imageAtlasTexture.size,u_pixels_to_tile_units:C.calculatePixelsToTileUnitsMatrix(u),u_device_pixel_ratio:S,u_image:0,u_tile_units_to_pixels:vu(u,C),u_units_to_pixels:[1/C.pixelsToGLUnits[0],1/C.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function vu(_,u){return 1/Le(_,1,u.tileZoom)}function fm(_,u,m,y){return _.translatePosMatrix(y||u.tileID.projMatrix,u,m.paint.get("line-translate"),m.paint.get("line-translate-anchor"))}function yu(_){const u=_.paint.get("line-dasharray").value;return u.value||u.kind!=="constant"}const mm=(_,u,m,y,S,C)=>{return{u_matrix:_,u_tl_parent:u,u_scale_parent:m,u_fade_t:y.mix,u_opacity:y.opacity*S.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:S.paint.get("raster-brightness-min"),u_brightness_high:S.paint.get("raster-brightness-max"),u_saturation_factor:(O=S.paint.get("raster-saturation"),O>0?1-1/(1.001-O):-O),u_contrast_factor:(R=S.paint.get("raster-contrast"),R>0?1/(1-R):1+R),u_spin_weights:ml(S.paint.get("raster-hue-rotate")),u_perspective_transform:C};var R,O};function ml(_){_*=Math.PI/180;const u=Math.sin(_),m=Math.cos(_);return[(2*m+1)/3,(-Math.sqrt(3)*u-m+1)/3,(Math.sqrt(3)*u-m+1)/3]}const md=s.create(),Vh=(_,u,m,y,S,C,R,O,U,G,q,ae,he,ye,we,be)=>{const Te=S.transform,le={u_is_size_zoom_constant:+(_==="constant"||_==="source"),u_is_size_feature_constant:+(_==="constant"||_==="camera"),u_size_t:u?u.uSizeT:0,u_size:u?u.uSize:0,u_camera_to_center_distance:Te.cameraToCenterDistance,u_rotate_symbol:+m,u_aspect_ratio:Te.width/Te.height,u_fade_change:S.options.fadeDuration?S.symbolFadeChange:1,u_matrix:C,u_label_plane_matrix:R,u_coord_matrix:O,u_is_text:+U,u_pitch_with_map:+y,u_texsize:G,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:md,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:md,u_up_vector:[0,-1,0]};return be.name==="globe"&&(le.u_tile_id=[q.canonical.x,q.canonical.y,1<<q.canonical.z],le.u_zoom_transition=ae,le.u_inv_rot_matrix=ye,le.u_merc_center=he,le.u_camera_forward=Te._camera.forward(),le.u_ecef_origin=s.globeECEFOrigin(Te.globeMatrix,q.toUnwrapped()),le.u_tile_matrix=Float32Array.from(Te.globeMatrix),le.u_up_vector=we),le},pd=(_,u,m,y,S,C,R,O,U,G,q,ae,he,ye,we,be,Te)=>s.extend(Vh(_,u,m,y,S,C,R,O,U,G,ae,he,ye,we,be,Te),{u_gamma_scale:y?S.transform.cameraToCenterDistance*Math.cos(S.terrain?0:S.transform._pitch):1,u_device_pixel_ratio:s.exported.devicePixelRatio,u_is_halo:1}),gd=(_,u,m,y,S,C,R,O,U,G,q,ae,he,ye,we,be)=>s.extend(pd(_,u,m,y,S,C,R,O,!0,U,!0,q,ae,he,ye,we,be),{u_texsize_icon:G,u_texture_icon:1}),Bh=(_,u,m)=>({u_matrix:_,u_opacity:u,u_color:m}),pm=(_,u,m,y,S)=>s.extend((function(C,R,O){const U=R.imageManager.getPattern(C.toString()),{width:G,height:q}=R.imageManager.getPixelSize(),ae=Math.pow(2,O.tileID.overscaledZ),he=O.tileSize*Math.pow(2,R.transform.tileZoom)/ae,ye=he*(O.tileID.canonical.x+O.tileID.wrap*ae),we=he*O.tileID.canonical.y;return{u_image:0,u_pattern_tl:U.tl,u_pattern_br:U.br,u_texsize:[G,q],u_pattern_size:U.displaySize,u_tile_units_to_pixels:1/Le(O,1,R.transform.tileZoom),u_pixel_coord_upper:[ye>>16,we>>16],u_pixel_coord_lower:[65535&ye,65535&we]}})(y,m,S),{u_matrix:_,u_opacity:u}),Po={fillExtrusion:_=>({u_matrix:new s.UniformMatrix4f(_),u_lightpos:new s.Uniform3f(_),u_lightintensity:new s.Uniform1f(_),u_lightcolor:new s.Uniform3f(_),u_vertical_gradient:new s.Uniform1f(_),u_opacity:new s.Uniform1f(_),u_edge_radius:new s.Uniform1f(_),u_ao:new s.Uniform2f(_),u_tile_id:new s.Uniform3f(_),u_zoom_transition:new s.Uniform1f(_),u_inv_rot_matrix:new s.UniformMatrix4f(_),u_merc_center:new s.Uniform2f(_),u_up_dir:new s.Uniform3f(_),u_height_lift:new s.Uniform1f(_)}),fillExtrusionPattern:_=>({u_matrix:new s.UniformMatrix4f(_),u_lightpos:new s.Uniform3f(_),u_lightintensity:new s.Uniform1f(_),u_lightcolor:new s.Uniform3f(_),u_vertical_gradient:new s.Uniform1f(_),u_height_factor:new s.Uniform1f(_),u_edge_radius:new s.Uniform1f(_),u_ao:new s.Uniform2f(_),u_tile_id:new s.Uniform3f(_),u_zoom_transition:new s.Uniform1f(_),u_inv_rot_matrix:new s.UniformMatrix4f(_),u_merc_center:new s.Uniform2f(_),u_up_dir:new s.Uniform3f(_),u_height_lift:new s.Uniform1f(_),u_image:new s.Uniform1i(_),u_texsize:new s.Uniform2f(_),u_pixel_coord_upper:new s.Uniform2f(_),u_pixel_coord_lower:new s.Uniform2f(_),u_tile_units_to_pixels:new s.Uniform1f(_),u_opacity:new s.Uniform1f(_)}),fill:_=>({u_matrix:new s.UniformMatrix4f(_)}),fillPattern:_=>({u_matrix:new s.UniformMatrix4f(_),u_image:new s.Uniform1i(_),u_texsize:new s.Uniform2f(_),u_pixel_coord_upper:new s.Uniform2f(_),u_pixel_coord_lower:new s.Uniform2f(_),u_tile_units_to_pixels:new s.Uniform1f(_)}),fillOutline:_=>({u_matrix:new s.UniformMatrix4f(_),u_world:new s.Uniform2f(_)}),fillOutlinePattern:_=>({u_matrix:new s.UniformMatrix4f(_),u_world:new s.Uniform2f(_),u_image:new s.Uniform1i(_),u_texsize:new s.Uniform2f(_),u_pixel_coord_upper:new s.Uniform2f(_),u_pixel_coord_lower:new s.Uniform2f(_),u_tile_units_to_pixels:new s.Uniform1f(_)}),circle:_=>({u_camera_to_center_distance:new s.Uniform1f(_),u_extrude_scale:new s.UniformMatrix2f(_),u_device_pixel_ratio:new s.Uniform1f(_),u_matrix:new s.UniformMatrix4f(_),u_inv_rot_matrix:new s.UniformMatrix4f(_),u_merc_center:new s.Uniform2f(_),u_tile_id:new s.Uniform3f(_),u_zoom_transition:new s.Uniform1f(_),u_up_dir:new s.Uniform3f(_)}),collisionBox:_=>({u_matrix:new s.UniformMatrix4f(_),u_camera_to_center_distance:new s.Uniform1f(_),u_extrude_scale:new s.Uniform2f(_)}),collisionCircle:_=>({u_matrix:new s.UniformMatrix4f(_),u_inv_matrix:new s.UniformMatrix4f(_),u_camera_to_center_distance:new s.Uniform1f(_),u_viewport_size:new s.Uniform2f(_)}),debug:_=>({u_color:new s.UniformColor(_),u_matrix:new s.UniformMatrix4f(_),u_overlay:new s.Uniform1i(_),u_overlay_scale:new s.Uniform1f(_)}),clippingMask:_=>({u_matrix:new s.UniformMatrix4f(_)}),heatmap:_=>({u_extrude_scale:new s.Uniform1f(_),u_intensity:new s.Uniform1f(_),u_matrix:new s.UniformMatrix4f(_),u_inv_rot_matrix:new s.UniformMatrix4f(_),u_merc_center:new s.Uniform2f(_),u_tile_id:new s.Uniform3f(_),u_zoom_transition:new s.Uniform1f(_),u_up_dir:new s.Uniform3f(_)}),heatmapTexture:_=>({u_image:new s.Uniform1i(_),u_color_ramp:new s.Uniform1i(_),u_opacity:new s.Uniform1f(_)}),hillshade:_=>({u_matrix:new s.UniformMatrix4f(_),u_image:new s.Uniform1i(_),u_latrange:new s.Uniform2f(_),u_light:new s.Uniform2f(_),u_shadow:new s.UniformColor(_),u_highlight:new s.UniformColor(_),u_accent:new s.UniformColor(_)}),hillshadePrepare:_=>({u_matrix:new s.UniformMatrix4f(_),u_image:new s.Uniform1i(_),u_dimension:new s.Uniform2f(_),u_zoom:new s.Uniform1f(_),u_unpack:new s.Uniform4f(_)}),line:_=>({u_matrix:new s.UniformMatrix4f(_),u_pixels_to_tile_units:new s.UniformMatrix2f(_),u_device_pixel_ratio:new s.Uniform1f(_),u_units_to_pixels:new s.Uniform2f(_),u_dash_image:new s.Uniform1i(_),u_gradient_image:new s.Uniform1i(_),u_image_height:new s.Uniform1f(_),u_texsize:new s.Uniform2f(_),u_tile_units_to_pixels:new s.Uniform1f(_),u_alpha_discard_threshold:new s.Uniform1f(_),u_trim_offset:new s.Uniform2f(_)}),linePattern:_=>({u_matrix:new s.UniformMatrix4f(_),u_texsize:new s.Uniform2f(_),u_pixels_to_tile_units:new s.UniformMatrix2f(_),u_device_pixel_ratio:new s.Uniform1f(_),u_image:new s.Uniform1i(_),u_units_to_pixels:new s.Uniform2f(_),u_tile_units_to_pixels:new s.Uniform1f(_),u_alpha_discard_threshold:new s.Uniform1f(_)}),raster:_=>({u_matrix:new s.UniformMatrix4f(_),u_tl_parent:new s.Uniform2f(_),u_scale_parent:new s.Uniform1f(_),u_fade_t:new s.Uniform1f(_),u_opacity:new s.Uniform1f(_),u_image0:new s.Uniform1i(_),u_image1:new s.Uniform1i(_),u_brightness_low:new s.Uniform1f(_),u_brightness_high:new s.Uniform1f(_),u_saturation_factor:new s.Uniform1f(_),u_contrast_factor:new s.Uniform1f(_),u_spin_weights:new s.Uniform3f(_),u_perspective_transform:new s.Uniform2f(_)}),symbolIcon:_=>({u_is_size_zoom_constant:new s.Uniform1i(_),u_is_size_feature_constant:new s.Uniform1i(_),u_size_t:new s.Uniform1f(_),u_size:new s.Uniform1f(_),u_camera_to_center_distance:new s.Uniform1f(_),u_rotate_symbol:new s.Uniform1i(_),u_aspect_ratio:new s.Uniform1f(_),u_fade_change:new s.Uniform1f(_),u_matrix:new s.UniformMatrix4f(_),u_label_plane_matrix:new s.UniformMatrix4f(_),u_coord_matrix:new s.UniformMatrix4f(_),u_is_text:new s.Uniform1i(_),u_pitch_with_map:new s.Uniform1i(_),u_texsize:new s.Uniform2f(_),u_tile_id:new s.Uniform3f(_),u_zoom_transition:new s.Uniform1f(_),u_inv_rot_matrix:new s.UniformMatrix4f(_),u_merc_center:new s.Uniform2f(_),u_camera_forward:new s.Uniform3f(_),u_tile_matrix:new s.UniformMatrix4f(_),u_up_vector:new s.Uniform3f(_),u_ecef_origin:new s.Uniform3f(_),u_texture:new s.Uniform1i(_)}),symbolSDF:_=>({u_is_size_zoom_constant:new s.Uniform1i(_),u_is_size_feature_constant:new s.Uniform1i(_),u_size_t:new s.Uniform1f(_),u_size:new s.Uniform1f(_),u_camera_to_center_distance:new s.Uniform1f(_),u_rotate_symbol:new s.Uniform1i(_),u_aspect_ratio:new s.Uniform1f(_),u_fade_change:new s.Uniform1f(_),u_matrix:new s.UniformMatrix4f(_),u_label_plane_matrix:new s.UniformMatrix4f(_),u_coord_matrix:new s.UniformMatrix4f(_),u_is_text:new s.Uniform1i(_),u_pitch_with_map:new s.Uniform1i(_),u_texsize:new s.Uniform2f(_),u_texture:new s.Uniform1i(_),u_gamma_scale:new s.Uniform1f(_),u_device_pixel_ratio:new s.Uniform1f(_),u_tile_id:new s.Uniform3f(_),u_zoom_transition:new s.Uniform1f(_),u_inv_rot_matrix:new s.UniformMatrix4f(_),u_merc_center:new s.Uniform2f(_),u_camera_forward:new s.Uniform3f(_),u_tile_matrix:new s.UniformMatrix4f(_),u_up_vector:new s.Uniform3f(_),u_ecef_origin:new s.Uniform3f(_),u_is_halo:new s.Uniform1i(_)}),symbolTextAndIcon:_=>({u_is_size_zoom_constant:new s.Uniform1i(_),u_is_size_feature_constant:new s.Uniform1i(_),u_size_t:new s.Uniform1f(_),u_size:new s.Uniform1f(_),u_camera_to_center_distance:new s.Uniform1f(_),u_rotate_symbol:new s.Uniform1i(_),u_aspect_ratio:new s.Uniform1f(_),u_fade_change:new s.Uniform1f(_),u_matrix:new s.UniformMatrix4f(_),u_label_plane_matrix:new s.UniformMatrix4f(_),u_coord_matrix:new s.UniformMatrix4f(_),u_is_text:new s.Uniform1i(_),u_pitch_with_map:new s.Uniform1i(_),u_texsize:new s.Uniform2f(_),u_texsize_icon:new s.Uniform2f(_),u_texture:new s.Uniform1i(_),u_texture_icon:new s.Uniform1i(_),u_gamma_scale:new s.Uniform1f(_),u_device_pixel_ratio:new s.Uniform1f(_),u_is_halo:new s.Uniform1i(_)}),background:_=>({u_matrix:new s.UniformMatrix4f(_),u_opacity:new s.Uniform1f(_),u_color:new s.UniformColor(_)}),backgroundPattern:_=>({u_matrix:new s.UniformMatrix4f(_),u_opacity:new s.Uniform1f(_),u_image:new s.Uniform1i(_),u_pattern_tl:new s.Uniform2f(_),u_pattern_br:new s.Uniform2f(_),u_texsize:new s.Uniform2f(_),u_pattern_size:new s.Uniform2f(_),u_pixel_coord_upper:new s.Uniform2f(_),u_pixel_coord_lower:new s.Uniform2f(_),u_tile_units_to_pixels:new s.Uniform1f(_)}),terrainRaster:Nc,terrainDepth:Nc,skybox:_=>({u_matrix:new s.UniformMatrix4f(_),u_sun_direction:new s.Uniform3f(_),u_cubemap:new s.Uniform1i(_),u_opacity:new s.Uniform1f(_),u_temporal_offset:new s.Uniform1f(_)}),skyboxGradient:_=>({u_matrix:new s.UniformMatrix4f(_),u_color_ramp:new s.Uniform1i(_),u_center_direction:new s.Uniform3f(_),u_radius:new s.Uniform1f(_),u_opacity:new s.Uniform1f(_),u_temporal_offset:new s.Uniform1f(_)}),skyboxCapture:_=>({u_matrix_3f:new s.UniformMatrix3f(_),u_sun_direction:new s.Uniform3f(_),u_sun_intensity:new s.Uniform1f(_),u_color_tint_r:new s.Uniform4f(_),u_color_tint_m:new s.Uniform4f(_),u_luminance:new s.Uniform1f(_)}),globeRaster:_=>({u_proj_matrix:new s.UniformMatrix4f(_),u_globe_matrix:new s.UniformMatrix4f(_),u_normalize_matrix:new s.UniformMatrix4f(_),u_merc_matrix:new s.UniformMatrix4f(_),u_zoom_transition:new s.Uniform1f(_),u_merc_center:new s.Uniform2f(_),u_image0:new s.Uniform1i(_),u_grid_matrix:new s.UniformMatrix3f(_),u_skirt_height:new s.Uniform1f(_),u_frustum_tl:new s.Uniform3f(_),u_frustum_tr:new s.Uniform3f(_),u_frustum_br:new s.Uniform3f(_),u_frustum_bl:new s.Uniform3f(_),u_globe_pos:new s.Uniform3f(_),u_globe_radius:new s.Uniform1f(_),u_viewport:new s.Uniform2f(_)}),globeAtmosphere:_=>({u_frustum_tl:new s.Uniform3f(_),u_frustum_tr:new s.Uniform3f(_),u_frustum_br:new s.Uniform3f(_),u_frustum_bl:new s.Uniform3f(_),u_horizon:new s.Uniform1f(_),u_transition:new s.Uniform1f(_),u_fadeout_range:new s.Uniform1f(_),u_color:new s.Uniform4f(_),u_high_color:new s.Uniform4f(_),u_space_color:new s.Uniform4f(_),u_star_intensity:new s.Uniform1f(_),u_star_density:new s.Uniform1f(_),u_star_size:new s.Uniform1f(_),u_temporal_offset:new s.Uniform1f(_),u_horizon_angle:new s.Uniform1f(_),u_rotation_matrix:new s.UniformMatrix4f(_)})};let Fh;function _d(_,u,m,y,S,C,R){const O=_.context,U=O.gl,G=_.transform,q=_.useProgram("collisionBox"),ae=[];let he=0,ye=0;for(let Me=0;Me<y.length;Me++){const $e=y[Me],qe=u.getTile($e),Ze=qe.getBucket(m);if(!Ze)continue;const ot=Cr($e,Ze,G);let it=ot;S[0]===0&&S[1]===0||(it=_.translatePosMatrix(ot,qe,S,C));const mt=R?Ze.textCollisionBox:Ze.iconCollisionBox,$t=Ze.collisionCircleArray;if($t.length>0){const lt=s.create(),Rt=it;s.mul(lt,Ze.placementInvProjMatrix,G.glCoordMatrix),s.mul(lt,lt,Ze.placementViewportMatrix),ae.push({circleArray:$t,circleOffset:ye,transform:Rt,invTransform:lt,projection:Ze.getProjection()}),he+=$t.length/4,ye=he}mt&&(_.terrain&&_.terrain.setupElevationDraw(qe,q),q.draw(O,U.LINES,s.DepthMode.disabled,s.StencilMode.disabled,_.colorModeForRenderPass(),s.CullFaceMode.disabled,Oh(it,G,qe,Ze.getProjection()),m.id,mt.layoutVertexBuffer,mt.indexBuffer,mt.segments,null,G.zoom,null,[mt.collisionVertexBuffer,mt.collisionVertexBufferExt]))}if(!R||!ae.length)return;const we=_.useProgram("collisionCircle"),be=new s.StructArrayLayout2f1f2i16;be.resize(4*he),be._trim();let Te=0;for(const Me of ae)for(let $e=0;$e<Me.circleArray.length/4;$e++){const qe=4*$e,Ze=Me.circleArray[qe+0],ot=Me.circleArray[qe+1],it=Me.circleArray[qe+2],mt=Me.circleArray[qe+3];be.emplace(Te++,Ze,ot,it,mt,0),be.emplace(Te++,Ze,ot,it,mt,1),be.emplace(Te++,Ze,ot,it,mt,2),be.emplace(Te++,Ze,ot,it,mt,3)}(!Fh||Fh.length<2*he)&&(Fh=(function(Me){const $e=2*Me,qe=new s.StructArrayLayout3ui6;qe.resize($e),qe._trim();for(let Ze=0;Ze<$e;Ze++){const ot=6*Ze;qe.uint16[ot+0]=4*Ze+0,qe.uint16[ot+1]=4*Ze+1,qe.uint16[ot+2]=4*Ze+2,qe.uint16[ot+3]=4*Ze+2,qe.uint16[ot+4]=4*Ze+3,qe.uint16[ot+5]=4*Ze+0}return qe})(he));const le=O.createIndexBuffer(Fh,!0),_e=O.createVertexBuffer(be,s.collisionCircleLayout.members,!0);for(const Me of ae){const $e={u_matrix:Me.transform,u_inv_matrix:Me.invTransform,u_camera_to_center_distance:(Ie=G).getCameraToCenterDistance(Me.projection),u_viewport_size:[Ie.width,Ie.height]};we.draw(O,U.TRIANGLES,s.DepthMode.disabled,s.StencilMode.disabled,_.colorModeForRenderPass(),s.CullFaceMode.disabled,$e,m.id,_e,le,s.SegmentVector.simpleSegment(0,2*Me.circleOffset,Me.circleArray.length,Me.circleArray.length/2),null,G.zoom)}var Ie;_e.destroy(),le.destroy()}const gm=s.create();function zh({width:_,height:u,anchor:m,textOffset:y,textScale:S},C){const{horizontalAlign:R,verticalAlign:O}=s.getAnchorAlignment(m),U=-(R-.5)*_,G=-(O-.5)*u,q=s.evaluateVariableOffset(m,y);return new s.Point((U/S+q[0])*C,(G/S+q[1])*C)}function wv(_,u,m,y,S,C,R,O,U,G,q){const ae=_.text.placedSymbolArray,he=_.text.dynamicLayoutVertexArray,ye=_.icon.dynamicLayoutVertexArray,we={},be=_.getProjection(),Te=zi(O,be,C),le=C.elevation,_e=be.upVectorScale(O.canonical,C.center.lat,C.worldSize).metersToTile;he.clear();for(let Ie=0;Ie<ae.length;Ie++){const Me=ae.get(Ie),{tileAnchorX:$e,tileAnchorY:qe,numGlyphs:Ze}=Me,ot=Me.hidden||!Me.crossTileID||_.allowVerticalPlacement&&!Me.placedOrientation?null:y[Me.crossTileID];if(ot){let it=0,mt=0,$t=0;if(le){const qt=le?le.getAtTileOffset(O,$e,qe):0,[Pn,jn,xn]=be.upVector(O.canonical,$e,qe);it=qt*Pn*_e,mt=qt*jn*_e,$t=qt*xn*_e}let[lt,Rt,vt,Wt]=qi(Me.projectedAnchorX+it,Me.projectedAnchorY+mt,Me.projectedAnchorZ+$t,m?Te:R);const ht=Ol(C.getCameraToCenterDistance(be),Wt);let xt=S.evaluateSizeForFeature(_.textSizeData,G,Me)*ht/s.ONE_EM;m&&(xt*=_.tilePixelRatio/U);const Ut=zh(ot,xt);m?({x:lt,y:Rt,z:vt}=be.projectTilePoint($e+Ut.x,qe+Ut.y,O.canonical),[lt,Rt,vt]=qi(lt+it,Rt+mt,vt+$t,R)):(u&&Ut._rotate(-C.angle),lt+=Ut.x,Rt+=Ut.y,vt=0);const Bt=_.allowVerticalPlacement&&Me.placedOrientation===s.WritingMode.vertical?Math.PI/2:0;for(let qt=0;qt<Ze;qt++)s.addDynamicAttributes(he,lt,Rt,vt,Bt);q&&Me.associatedIconIndex>=0&&(we[Me.associatedIconIndex]={x:lt,y:Rt,z:vt,angle:Bt})}else ro(Ze,he)}if(q){ye.clear();const Ie=_.icon.placedSymbolArray;for(let Me=0;Me<Ie.length;Me++){const $e=Ie.get(Me),{numGlyphs:qe}=$e,Ze=we[Me];if($e.hidden||!Ze)ro(qe,ye);else{const{x:ot,y:it,z:mt,angle:$t}=Ze;for(let lt=0;lt<qe;lt++)s.addDynamicAttributes(ye,ot,it,mt,$t)}}_.icon.dynamicLayoutVertexBuffer.updateData(ye)}_.text.dynamicLayoutVertexBuffer.updateData(he)}function _m(_,u,m){return m.iconsInText&&u?"symbolTextAndIcon":_?"symbolSDF":"symbolIcon"}function fg(_,u,m,y,S,C,R,O,U,G,q,ae){const he=_.context,ye=he.gl,we=_.transform,be=O==="map",Te=U==="map",le=be&&m.layout.get("symbol-placement")!=="point",_e=be&&!Te&&!le,Ie=m.layout.get("symbol-sort-key").constantOr(1)!==void 0;let Me=!1;const $e=_.depthModeForSublayer(0,s.DepthMode.ReadOnly),qe=[s.mercatorXfromLng(we.center.lng),s.mercatorYfromLat(we.center.lat)],Ze=m.layout.get("text-variable-anchor"),ot=we.projection.name==="globe",it=[],mt=[0,-1,0];let $t=mt;!ot&&!we.mercatorFromTransition||be||($t=(function(lt){const Rt=lt._camera.getWorldToCamera(lt.worldSize,1),vt=s.multiply([],Rt,lt.globeMatrix);s.invert(vt,vt);const Wt=[0,0,0],ht=[0,1,0,0];return s.transformMat4$1(ht,ht,vt),Wt[0]=ht[0],Wt[1]=ht[1],Wt[2]=ht[2],s.normalize(Wt,Wt),Wt})(we));for(const lt of y){const Rt=u.getTile(lt),vt=Rt.getBucket(m);if(!vt||vt.projection.name==="mercator"&&ot)continue;const Wt=S?vt.text:vt.icon;if(!Wt||vt.fullyClipped||!Wt.segments.get().length)continue;const ht=Wt.programConfigurations.get(m.id),xt=S||vt.sdfIcons,Ut=S?vt.textSizeData:vt.iconSizeData,Bt=Te||we.pitch!==0,qt=s.evaluateSizeForZoom(Ut,we.zoom);let Pn,jn,xn,Dn,pi=[0,0],fi=null;if(S)jn=Rt.glyphAtlasTexture,xn=ye.LINEAR,Pn=Rt.glyphAtlasTexture.size,vt.iconsInText&&(pi=Rt.imageAtlasTexture.size,fi=Rt.imageAtlasTexture,Dn=Bt||_.options.rotating||_.options.zooming||Ut.kind==="composite"||Ut.kind==="camera"?ye.LINEAR:ye.NEAREST);else{const Ja=m.layout.get("icon-size").constantOr(0)!==1||vt.iconsNeedLinear;jn=Rt.imageAtlasTexture,xn=xt||_.options.rotating||_.options.zooming||Ja||Bt?ye.LINEAR:ye.NEAREST,Pn=Rt.imageAtlasTexture.size}const kn=vt.projection.name==="globe",Mi=kn?$t:mt,Ui=kn?s.globeToMercatorTransition(we.zoom):0,Ki=zi(lt,vt.getProjection(),we),$i=we.calculatePixelsToTileUnitsMatrix(Rt),Ns=Mt(Ki,Rt.tileID.canonical,Te,be,we,vt.getProjection(),$i),ks=_.terrain&&Te&&le?s.invert(s.create(),Ns):gm,va=Fi(Ki,Rt.tileID.canonical,Te,be,we,vt.getProjection(),$i),Ks=Ze&&vt.hasTextData(),er=m.layout.get("icon-text-fit")!=="none"&&Ks&&vt.hasIconData();if(le){const Ja=we.elevation,$l=Ja?Ja.getAtTileOffsetFunc(lt,we.center.lat,we.worldSize,vt.getProjection()):null,Ld=ca(Ki,Rt.tileID.canonical,Te,be,we,vt.getProjection(),$i);uc(vt,Ki,_,S,Ld,va,Te,G,$l,lt)}const ji=le||S&&Ze||er,Ci=_.translatePosMatrix(Ki,Rt,C,R),Lr=ji?gm:Ns,Xs=_.translatePosMatrix(va,Rt,C,R,!0),rr=vt.getProjection().createInversionMatrix(we,lt.canonical),ao=[];_.terrainRenderModeElevated()&&Te&&ao.push("PITCH_WITH_MAP_TERRAIN"),kn&&ao.push("PROJECTION_GLOBE_VIEW"),ji&&ao.push("PROJECTED_POS_ON_VIEWPORT");const Dd=xt&&m.paint.get(S?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let qc;qc=xt?vt.iconsInText?gd(Ut.kind,qt,_e,Te,_,Ci,Lr,Xs,Pn,pi,lt,Ui,qe,rr,Mi,vt.getProjection()):pd(Ut.kind,qt,_e,Te,_,Ci,Lr,Xs,S,Pn,!0,lt,Ui,qe,rr,Mi,vt.getProjection()):Vh(Ut.kind,qt,_e,Te,_,Ci,Lr,Xs,S,Pn,lt,Ui,qe,rr,Mi,vt.getProjection());const Rd={program:_.useProgram(_m(xt,S,vt),ht,ao),buffers:Wt,uniformValues:qc,atlasTexture:jn,atlasTextureIcon:fi,atlasInterpolation:xn,atlasInterpolationIcon:Dn,isSDF:xt,hasHalo:Dd,tile:Rt,labelPlaneMatrixInv:ks};if(Ie&&vt.canOverlap){Me=!0;const Ja=Wt.segments.get();for(const $l of Ja)it.push({segments:new s.SegmentVector([$l]),sortKey:$l.sortKey,state:Rd})}else it.push({segments:Wt.segments,sortKey:0,state:Rd})}Me&&it.sort(((lt,Rt)=>lt.sortKey-Rt.sortKey));for(const lt of it){const Rt=lt.state;if(_.terrain&&_.terrain.setupElevationDraw(Rt.tile,Rt.program,{useDepthForOcclusion:!ot,labelPlaneMatrixInv:Rt.labelPlaneMatrixInv}),he.activeTexture.set(ye.TEXTURE0),Rt.atlasTexture.bind(Rt.atlasInterpolation,ye.CLAMP_TO_EDGE),Rt.atlasTextureIcon&&(he.activeTexture.set(ye.TEXTURE1),Rt.atlasTextureIcon&&Rt.atlasTextureIcon.bind(Rt.atlasInterpolationIcon,ye.CLAMP_TO_EDGE)),Rt.isSDF){const vt=Rt.uniformValues;Rt.hasHalo&&(vt.u_is_halo=1,vd(Rt.buffers,lt.segments,m,_,Rt.program,$e,q,ae,vt)),vt.u_is_halo=0}vd(Rt.buffers,lt.segments,m,_,Rt.program,$e,q,ae,Rt.uniformValues)}}function vd(_,u,m,y,S,C,R,O,U){const G=y.context,q=[_.dynamicLayoutVertexBuffer,_.opacityVertexBuffer,_.globeExtVertexBuffer];S.draw(G,G.gl.TRIANGLES,C,R,O,s.CullFaceMode.disabled,U,m.id,_.layoutVertexBuffer,_.indexBuffer,u,m.paint,y.transform.zoom,_.programConfigurations.get(m.id),q)}function mg(_,u,m,y,S,C,R){const O=_.context.gl,U=m.paint.get("fill-pattern"),G=U&&U.constantOr(1);let q,ae,he,ye,we;R?(ae=G&&!m.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",q=O.LINES):(ae=G?"fillPattern":"fill",q=O.TRIANGLES);for(const be of y){const Te=u.getTile(be);if(G&&!Te.patternsLoaded())continue;const le=Te.getBucket(m);if(!le)continue;_.prepareDrawTile();const _e=le.programConfigurations.get(m.id),Ie=_.useProgram(ae,_e);G&&(_.context.activeTexture.set(O.TEXTURE0),Te.imageAtlasTexture.bind(O.LINEAR,O.CLAMP_TO_EDGE),_e.updatePaintBuffers());const Me=U.constantOr(null);if(Me&&Te.imageAtlas){const qe=Te.imageAtlas.patternPositions[Me.toString()];qe&&_e.setConstantPatternPositions(qe)}const $e=_.translatePosMatrix(be.projMatrix,Te,m.paint.get("fill-translate"),m.paint.get("fill-translate-anchor"));if(R){ye=le.indexBuffer2,we=le.segments2;const qe=_.terrain&&_.terrain.renderingToTexture?_.terrain.drapeBufferSize:[O.drawingBufferWidth,O.drawingBufferHeight];he=ae==="fillOutlinePattern"&&G?bv($e,_,Te,qe):yv($e,qe)}else ye=le.indexBuffer,we=le.segments,he=G?hm($e,_,Te):Ka($e);_.prepareDrawProgram(_.context,Ie,be.toUnwrapped()),Ie.draw(_.context,q,S,_.stencilModeForClipping(be),C,s.CullFaceMode.disabled,he,m.id,le.layoutVertexBuffer,ye,we,m.paint,_.transform.zoom,_e)}}function Nh(_,u,m,y,S,C,R){const O=_.context,U=O.gl,G=_.transform,q=m.paint.get("fill-extrusion-pattern"),ae=q.constantOr(1),he=m.paint.get("fill-extrusion-opacity"),ye=[m.paint.get("fill-extrusion-ambient-occlusion-intensity"),m.paint.get("fill-extrusion-ambient-occlusion-radius")],we=m.layout.get("fill-extrusion-edge-radius"),be=we>0&&!m.paint.get("fill-extrusion-rounded-roof"),Te=be?0:we,le=G.projection.name==="globe"?s.fillExtrusionHeightLift():0,_e=G.projection.name==="globe",Ie=_e?s.globeToMercatorTransition(G.zoom):0,Me=[s.mercatorXfromLng(G.center.lng),s.mercatorYfromLat(G.center.lat)],$e=[];_e&&$e.push("PROJECTION_GLOBE_VIEW"),ye[0]>0&&$e.push("FAUX_AO"),be&&$e.push("ZERO_ROOF_RADIUS");for(const qe of y){const Ze=u.getTile(qe),ot=Ze.getBucket(m);if(!ot||ot.projection.name!==G.projection.name)continue;const it=ot.programConfigurations.get(m.id),mt=_.useProgram(ae?"fillExtrusionPattern":"fillExtrusion",it,$e);if(_.terrain){const xt=_.terrain;if(_.style.terrainSetForDrapingOnly())xt.setupElevationDraw(Ze,mt,{useMeterToDem:!0});else{if(!ot.enableTerrain)continue;if(xt.setupElevationDraw(Ze,mt,{useMeterToDem:!0}),vm(O,u,qe,ot,m,xt),!ot.centroidVertexBuffer){const Ut=mt.attributes.a_centroid_pos;Ut!==void 0&&U.vertexAttrib2f(Ut,0,0)}}}ae&&(_.context.activeTexture.set(U.TEXTURE0),Ze.imageAtlasTexture.bind(U.LINEAR,U.CLAMP_TO_EDGE),it.updatePaintBuffers());const $t=q.constantOr(null);if($t&&Ze.imageAtlas){const xt=Ze.imageAtlas.patternPositions[$t.toString()];xt&&it.setConstantPatternPositions(xt)}const lt=_.translatePosMatrix(qe.projMatrix,Ze,m.paint.get("fill-extrusion-translate"),m.paint.get("fill-extrusion-translate-anchor")),Rt=G.projection.createInversionMatrix(G,qe.canonical),vt=m.paint.get("fill-extrusion-vertical-gradient"),Wt=ae?Uc(lt,_,vt,he,ye,Te,qe,Ze,le,Ie,Me,Rt):ga(lt,_,vt,he,ye,Te,qe,le,Ie,Me,Rt);_.prepareDrawProgram(O,mt,qe.toUnwrapped());const ht=[];_.terrain&&ht.push(ot.centroidVertexBuffer),_e&&ht.push(ot.layoutVertexExtBuffer),mt.draw(O,O.gl.TRIANGLES,S,C,R,s.CullFaceMode.backCCW,Wt,m.id,ot.layoutVertexBuffer,ot.indexBuffer,ot.segments,m.paint,_.transform.zoom,it,ht)}}function vm(_,u,m,y,S,C){const R=[le=>{let _e=le.canonical.x-1,Ie=le.wrap;return _e<0&&(_e=(1<<le.canonical.z)-1,Ie--),new s.OverscaledTileID(le.overscaledZ,Ie,le.canonical.z,_e,le.canonical.y)},le=>{let _e=le.canonical.x+1,Ie=le.wrap;return _e===1<<le.canonical.z&&(_e=0,Ie++),new s.OverscaledTileID(le.overscaledZ,Ie,le.canonical.z,_e,le.canonical.y)},le=>new s.OverscaledTileID(le.overscaledZ,le.wrap,le.canonical.z,le.canonical.x,(le.canonical.y===0?1<<le.canonical.z:le.canonical.y)-1),le=>new s.OverscaledTileID(le.overscaledZ,le.wrap,le.canonical.z,le.canonical.x,le.canonical.y===(1<<le.canonical.z)-1?0:le.canonical.y+1)],O=le=>{const _e=u.getSource().minzoom,Ie=$e=>{const qe=u.getTileByID($e);if(qe&&qe.hasData())return qe.getBucket(S)},Me=[0,-1,1];for(const $e of Me){if(le.overscaledZ+$e<_e)continue;const qe=Ie(le.calculateScaledKey(le.overscaledZ+$e));if(qe)return qe}},U=[0,0,0],G=(le,_e)=>(U[0]=Math.min(le.min.y,_e.min.y),U[1]=Math.max(le.max.y,_e.max.y),U[2]=s.EXTENT-_e.min.x>le.max.x?_e.min.x-s.EXTENT:le.max.x,U),q=(le,_e)=>(U[0]=Math.min(le.min.x,_e.min.x),U[1]=Math.max(le.max.x,_e.max.x),U[2]=s.EXTENT-_e.min.y>le.max.y?_e.min.y-s.EXTENT:le.max.y,U),ae=[(le,_e)=>G(le,_e),(le,_e)=>G(_e,le),(le,_e)=>q(le,_e),(le,_e)=>q(_e,le)],he=new s.Point(0,0);let ye,we,be;const Te=(le,_e,Ie,Me,$e)=>{const qe=[[Me?Ie:le,Me?le:Ie,0],[Me?Ie:_e,Me?_e:Ie,0]],Ze=$e<0?s.EXTENT+$e:$e,ot=[Me?Ze:(le+_e)/2,Me?(le+_e)/2:Ze,0];return Ie===0&&$e<0||Ie!==0&&$e>0?C.getForTilePoints(be,[ot],!0,we):qe.push(ot),C.getForTilePoints(m,qe,!0,ye),Math.max(qe[0][2],qe[1][2],ot[2])/C.exaggeration()};for(let le=0;le<4;le++){const _e=(le<2?1:5)-le,Ie=y.borders[le];if(Ie.length===0)continue;const Me=be=R[le](m),$e=O(Me);if(!($e&&$e instanceof s.FillExtrusionBucket&&$e.enableTerrain)||y.borderDoneWithNeighborZ[le]===$e.canonical.z&&$e.borderDoneWithNeighborZ[_e]===y.canonical.z||(we=C.findDEMTileFor(Me),!we||!we.dem))continue;if(!ye){const it=C.findDEMTileFor(m);if(!it||!it.dem)return;ye=it}const qe=$e.borders[_e];let Ze=0;const ot=$e.borderDoneWithNeighborZ[_e]!==y.canonical.z;if(y.canonical.z===$e.canonical.z){for(let it=0;it<Ie.length;it++){const mt=y.featuresOnBorder[Ie[it]],$t=mt.borders[le];let lt;for(;Ze<qe.length&&(lt=$e.featuresOnBorder[qe[Ze]],!(lt.borders[_e][1]>$t[0]+3));)ot&&$e.encodeCentroid(void 0,lt,!1),Ze++;if(lt&&Ze<qe.length){const Rt=Ze;let vt=0;for(;!(lt.borders[_e][0]>$t[1]-3)&&(vt++,++Ze!==qe.length);)lt=$e.featuresOnBorder[qe[Ze]];if(lt=$e.featuresOnBorder[qe[Rt]],mt.intersectsCount()>1||lt.intersectsCount()>1||vt!==1){vt!==1&&(Ze=Rt),y.encodeCentroid(void 0,mt,!1),ot&&$e.encodeCentroid(void 0,lt,!1);continue}const Wt=ae[le](mt,lt),ht=le%2?s.EXTENT-1:0;he.x=Te(Wt[0],Math.min(s.EXTENT-1,Wt[1]),ht,le<2,Wt[2]),he.y=0,y.encodeCentroid(he,mt,!1),ot&&$e.encodeCentroid(he,lt,!1)}else y.encodeCentroid(void 0,mt,!1)}y.borderDoneWithNeighborZ[le]=$e.canonical.z,y.needsCentroidUpdate=!0,ot&&($e.borderDoneWithNeighborZ[_e]=y.canonical.z,$e.needsCentroidUpdate=!0)}else{for(const it of Ie)y.encodeCentroid(void 0,y.featuresOnBorder[it],!1);if(ot){for(const it of qe)$e.encodeCentroid(void 0,$e.featuresOnBorder[it],!1);$e.borderDoneWithNeighborZ[_e]=y.canonical.z,$e.needsCentroidUpdate=!0}y.borderDoneWithNeighborZ[le]=$e.canonical.z,y.needsCentroidUpdate=!0}}(y.needsCentroidUpdate||!y.centroidVertexBuffer&&y.centroidVertexArray.length!==0)&&y.uploadCentroid(_)}const $c=new s.Color(1,0,0,1),ym=new s.Color(0,1,0,1),Tv=new s.Color(0,0,1,1),Sv=new s.Color(1,0,1,1),jc=new s.Color(0,1,1,1);function Fl(_,u,m){const y=_.context,S=_.transform,C=y.gl,R=S.projection.name==="globe",O=R?["PROJECTION_GLOBE_VIEW"]:null;let U=m.projMatrix;if(R&&s.globeToMercatorTransition(S.zoom)>0){const mt=s.transitionTileAABBinECEF(m.canonical,S),$t=s.globeDenormalizeECEF(mt);U=s.multiply(new Float32Array(16),S.globeMatrix,$t),s.multiply(U,S.projMatrix,U)}const G=_.useProgram("debug",null,O),q=u.getTileByID(m.key);_.terrain&&_.terrain.setupElevationDraw(q,G);const ae=s.DepthMode.disabled,he=s.StencilMode.disabled,ye=_.colorModeForRenderPass(),we="$debug";y.activeTexture.set(C.TEXTURE0),_.emptyTexture.bind(C.LINEAR,C.CLAMP_TO_EDGE),R?q._makeGlobeTileDebugBuffers(_.context,S):q._makeDebugTileBoundsBuffers(_.context,S.projection);const be=q._tileDebugBuffer||_.debugBuffer,Te=q._tileDebugIndexBuffer||_.debugIndexBuffer,le=q._tileDebugSegments||_.debugSegments;G.draw(y,C.LINE_STRIP,ae,he,ye,s.CullFaceMode.disabled,fd(U,s.Color.red),we,be,Te,le,null,null,null,[q._globeTileDebugBorderBuffer]);const _e=q.latestRawTileData,Ie=Math.floor((_e&&_e.byteLength||0)/1024),Me=u.getTile(m).tileSize,$e=512/Math.min(Me,512)*(m.overscaledZ/S.zoom)*.5;let qe=m.canonical.toString();m.overscaledZ!==m.canonical.z&&(qe+=` => ${m.overscaledZ}`),qe+=` ${Ie}kb`,(function(mt,$t){mt.initDebugOverlayCanvas();const lt=mt.debugOverlayCanvas,Rt=mt.context.gl,vt=mt.debugOverlayCanvas.getContext("2d");vt.clearRect(0,0,lt.width,lt.height),vt.shadowColor="white",vt.shadowBlur=2,vt.lineWidth=1.5,vt.strokeStyle="white",vt.textBaseline="top",vt.font="bold 36px Open Sans, sans-serif",vt.fillText($t,5,5),vt.strokeText($t,5,5),mt.debugOverlayTexture.update(lt),mt.debugOverlayTexture.bind(Rt.LINEAR,Rt.CLAMP_TO_EDGE)})(_,qe);const Ze=q._tileDebugTextBuffer||_.debugBuffer,ot=q._tileDebugTextIndexBuffer||_.quadTriangleIndexBuffer,it=q._tileDebugTextSegments||_.debugSegments;G.draw(y,C.TRIANGLES,ae,he,s.ColorMode.alphaBlended,s.CullFaceMode.disabled,fd(U,s.Color.transparent,$e),we,Ze,ot,it,null,null,null,[q._globeTileDebugTextBuffer])}function bm(_,u,m,y){Wc(_,0,u+m/2,_.transform.width,m,y)}function Uh(_,u,m,y){Wc(_,u-m/2,0,m,_.transform.height,y)}function Wc(_,u,m,y,S,C){const R=_.context,O=R.gl;O.enable(O.SCISSOR_TEST),O.scissor(u*s.exported.devicePixelRatio,m*s.exported.devicePixelRatio,y*s.exported.devicePixelRatio,S*s.exported.devicePixelRatio),R.clear({color:C}),O.disable(O.SCISSOR_TEST)}const xm=s.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:wm}=xm;function pl(_,u,m,y){_.emplaceBack(u,m,y)}class $h{constructor(u){this.vertexArray=new s.StructArrayLayout3f12,this.indices=new s.StructArrayLayout3ui6,pl(this.vertexArray,-1,-1,1),pl(this.vertexArray,1,-1,1),pl(this.vertexArray,-1,1,1),pl(this.vertexArray,1,1,1),pl(this.vertexArray,-1,-1,-1),pl(this.vertexArray,1,-1,-1),pl(this.vertexArray,-1,1,-1),pl(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=u.createVertexBuffer(this.vertexArray,wm),this.indexBuffer=u.createIndexBuffer(this.indices),this.segment=s.SegmentVector.simpleSegment(0,0,36,12)}}function _a(_,u,m,y,S,C){const R=_.gl,O=u.paint.get("sky-atmosphere-color"),U=u.paint.get("sky-atmosphere-halo-color"),G=u.paint.get("sky-atmosphere-sun-intensity"),q=((ae,he,ye,we,be)=>({u_matrix_3f:ae,u_sun_direction:he,u_sun_intensity:ye,u_color_tint_r:[we.r,we.g,we.b,we.a],u_color_tint_m:[be.r,be.g,be.b,be.a],u_luminance:5e-5}))(s.fromMat4(s.create$1(),y),S,G,O,U);R.framebufferTexture2D(R.FRAMEBUFFER,R.COLOR_ATTACHMENT0,R.TEXTURE_CUBE_MAP_POSITIVE_X+C,u.skyboxTexture,0),m.draw(_,R.TRIANGLES,s.DepthMode.disabled,s.StencilMode.disabled,s.ColorMode.unblended,s.CullFaceMode.frontCW,q,"skyboxCapture",u.skyboxGeometry.vertexBuffer,u.skyboxGeometry.indexBuffer,u.skyboxGeometry.segment)}const yd=s.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class Tm{constructor(u){const m=new s.StructArrayLayout5f20;m.emplaceBack(-1,1,1,0,0),m.emplaceBack(1,1,1,1,0),m.emplaceBack(1,-1,1,1,1),m.emplaceBack(-1,-1,1,0,1);const y=new s.StructArrayLayout3ui6;y.emplaceBack(0,1,2),y.emplaceBack(2,3,0),this.vertexBuffer=u.createVertexBuffer(m,yd.members),this.indexBuffer=u.createIndexBuffer(y),this.segments=s.SegmentVector.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const pc={symbol:function(_,u,m,y,S){if(_.renderPass!=="translucent")return;const C=s.StencilMode.disabled,R=_.colorModeForRenderPass();m.layout.get("text-variable-anchor")&&(function(O,U,G,q,ae,he,ye){const we=U.transform,be=ae==="map",Te=he==="map";for(const le of O){const _e=q.getTile(le),Ie=_e.getBucket(G);if(!Ie||!Ie.text||!Ie.text.segments.get().length)continue;const Me=s.evaluateSizeForZoom(Ie.textSizeData,we.zoom),$e=zi(le,Ie.getProjection(),we),qe=we.calculatePixelsToTileUnitsMatrix(_e),Ze=Mt($e,_e.tileID.canonical,Te,be,we,Ie.getProjection(),qe),ot=G.layout.get("icon-text-fit")!=="none"&&Ie.hasIconData();if(Me){const it=Math.pow(2,we.zoom-_e.tileID.overscaledZ);wv(Ie,be,Te,ye,s.symbolSize,we,Ze,le,it,Me,ot)}}})(y,_,m,u,m.layout.get("text-rotation-alignment"),m.layout.get("text-pitch-alignment"),S),m.paint.get("icon-opacity").constantOr(1)!==0&&fg(_,u,m,y,!1,m.paint.get("icon-translate"),m.paint.get("icon-translate-anchor"),m.layout.get("icon-rotation-alignment"),m.layout.get("icon-pitch-alignment"),m.layout.get("icon-keep-upright"),C,R),m.paint.get("text-opacity").constantOr(1)!==0&&fg(_,u,m,y,!0,m.paint.get("text-translate"),m.paint.get("text-translate-anchor"),m.layout.get("text-rotation-alignment"),m.layout.get("text-pitch-alignment"),m.layout.get("text-keep-upright"),C,R),u.map.showCollisionBoxes&&(_d(_,u,m,y,m.paint.get("text-translate"),m.paint.get("text-translate-anchor"),!0),_d(_,u,m,y,m.paint.get("icon-translate"),m.paint.get("icon-translate-anchor"),!1))},circle:function(_,u,m,y){if(_.renderPass!=="translucent")return;const S=m.paint.get("circle-opacity"),C=m.paint.get("circle-stroke-width"),R=m.paint.get("circle-stroke-opacity"),O=m.layout.get("circle-sort-key").constantOr(1)!==void 0;if(S.constantOr(1)===0&&(C.constantOr(1)===0||R.constantOr(1)===0))return;const U=_.context,G=U.gl,q=_.transform,ae=_.depthModeForSublayer(0,s.DepthMode.ReadOnly),he=s.StencilMode.disabled,ye=_.colorModeForRenderPass(),we=q.projection.name==="globe",be=[s.mercatorXfromLng(q.center.lng),s.mercatorYfromLat(q.center.lat)],Te=[];for(let _e=0;_e<y.length;_e++){const Ie=y[_e],Me=u.getTile(Ie),$e=Me.getBucket(m);if(!$e||$e.projection.name!==q.projection.name)continue;const qe=$e.programConfigurations.get(m.id),Ze=Lh(m);we&&Ze.push("PROJECTION_GLOBE_VIEW");const ot=_.useProgram("circle",qe,Ze),it=$e.layoutVertexBuffer,mt=$e.globeExtVertexBuffer,$t=$e.indexBuffer,lt=q.projection.createInversionMatrix(q,Ie.canonical),Rt={programConfiguration:qe,program:ot,layoutVertexBuffer:it,globeExtVertexBuffer:mt,indexBuffer:$t,uniformValues:Xo(_,Ie,Me,lt,be,m),tile:Me};if(O){const vt=$e.segments.get();for(const Wt of vt)Te.push({segments:new s.SegmentVector([Wt]),sortKey:Wt.sortKey,state:Rt})}else Te.push({segments:$e.segments,sortKey:0,state:Rt})}O&&Te.sort(((_e,Ie)=>_e.sortKey-Ie.sortKey));const le={useDepthForOcclusion:!we};for(const _e of Te){const{programConfiguration:Ie,program:Me,layoutVertexBuffer:$e,globeExtVertexBuffer:qe,indexBuffer:Ze,uniformValues:ot,tile:it}=_e.state,mt=_e.segments;_.terrain&&_.terrain.setupElevationDraw(it,Me,le),_.prepareDrawProgram(U,Me,it.tileID.toUnwrapped()),Me.draw(U,G.TRIANGLES,ae,he,ye,s.CullFaceMode.disabled,ot,m.id,$e,Ze,mt,m.paint,q.zoom,Ie,[qe])}},heatmap:function(_,u,m,y){if(m.paint.get("heatmap-opacity")!==0)if(_.renderPass==="offscreen"){const S=_.context,C=S.gl,R=s.StencilMode.disabled,O=new s.ColorMode([C.ONE,C.ONE],s.Color.transparent,[!0,!0,!0,!0]);(function(ye,we,be,Te){const le=ye.gl,_e=we.width*Te,Ie=we.height*Te;ye.activeTexture.set(le.TEXTURE1),ye.viewport.set([0,0,_e,Ie]);let Me=be.heatmapFbo;if(!Me||Me&&(Me.width!==_e||Me.height!==Ie)){Me&&Me.destroy();const $e=le.createTexture();le.bindTexture(le.TEXTURE_2D,$e),le.texParameteri(le.TEXTURE_2D,le.TEXTURE_WRAP_S,le.CLAMP_TO_EDGE),le.texParameteri(le.TEXTURE_2D,le.TEXTURE_WRAP_T,le.CLAMP_TO_EDGE),le.texParameteri(le.TEXTURE_2D,le.TEXTURE_MIN_FILTER,le.LINEAR),le.texParameteri(le.TEXTURE_2D,le.TEXTURE_MAG_FILTER,le.LINEAR),Me=be.heatmapFbo=ye.createFramebuffer(_e,Ie,!1),(function(qe,Ze,ot,it,mt,$t){const lt=qe.gl;lt.texImage2D(lt.TEXTURE_2D,0,qe.isWebGL2&&qe.extRenderToTextureHalfFloat?lt.RGBA16F:lt.RGBA,mt,$t,0,lt.RGBA,qe.extRenderToTextureHalfFloat?qe.isWebGL2?lt.HALF_FLOAT:qe.extTextureHalfFloat.HALF_FLOAT_OES:lt.UNSIGNED_BYTE,null),it.colorAttachment.set(ot)})(ye,0,$e,Me,_e,Ie)}else le.bindTexture(le.TEXTURE_2D,Me.colorAttachment.get()),ye.bindFramebuffer.set(Me.framebuffer)})(S,_,m,_.transform.projection.name==="globe"?.5:.25),S.clear({color:s.Color.transparent});const U=_.transform,G=U.projection.name==="globe",q=G?["PROJECTION_GLOBE_VIEW"]:null,ae=G?s.CullFaceMode.frontCCW:s.CullFaceMode.disabled,he=[s.mercatorXfromLng(U.center.lng),s.mercatorYfromLat(U.center.lat)];for(let ye=0;ye<y.length;ye++){const we=y[ye];if(u.hasRenderableParent(we))continue;const be=u.getTile(we),Te=be.getBucket(m);if(!Te||Te.projection.name!==U.projection.name)continue;const le=Te.programConfigurations.get(m.id),_e=_.useProgram("heatmap",le,q),{zoom:Ie}=_.transform;_.terrain&&_.terrain.setupElevationDraw(be,_e),_.prepareDrawProgram(S,_e,we.toUnwrapped());const Me=U.projection.createInversionMatrix(U,we.canonical);_e.draw(S,C.TRIANGLES,s.DepthMode.disabled,R,O,ae,dg(_,we,be,Me,he,Ie,m.paint.get("heatmap-intensity")),m.id,Te.layoutVertexBuffer,Te.indexBuffer,Te.segments,m.paint,_.transform.zoom,le,G?[Te.globeExtVertexBuffer]:null)}S.viewport.set([0,0,_.width,_.height])}else _.renderPass==="translucent"&&(_.context.setColorMode(_.colorModeForRenderPass()),(function(S,C){const R=S.context,O=R.gl,U=C.heatmapFbo;if(!U)return;R.activeTexture.set(O.TEXTURE0),O.bindTexture(O.TEXTURE_2D,U.colorAttachment.get()),R.activeTexture.set(O.TEXTURE1);let G=C.colorRampTexture;G||(G=C.colorRampTexture=new s.Texture(R,C.colorRamp,O.RGBA)),G.bind(O.LINEAR,O.CLAMP_TO_EDGE),S.useProgram("heatmapTexture").draw(R,O.TRIANGLES,s.DepthMode.disabled,s.StencilMode.disabled,S.colorModeForRenderPass(),s.CullFaceMode.disabled,((q,ae,he,ye)=>({u_image:0,u_color_ramp:1,u_opacity:ae.paint.get("heatmap-opacity")}))(0,C),C.id,S.viewportBuffer,S.quadTriangleIndexBuffer,S.viewportSegments,C.paint,S.transform.zoom)})(_,m))},line:function(_,u,m,y){if(_.renderPass!=="translucent")return;const S=m.paint.get("line-opacity"),C=m.paint.get("line-width");if(S.constantOr(1)===0||C.constantOr(1)===0)return;const R=_.depthModeForSublayer(0,s.DepthMode.ReadOnly),O=_.colorModeForRenderPass(),U=_.terrain&&_.terrain.renderingToTexture?1:s.exported.devicePixelRatio,G=m.paint.get("line-dasharray"),q=G.constantOr(1),ae=m.layout.get("line-cap"),he=m.paint.get("line-pattern"),ye=he.constantOr(1),we=m.paint.get("line-gradient"),be=ye?"linePattern":"line",Te=_.context,le=Te.gl,_e=(Me=>{const $e=[];yu(Me)&&$e.push("RENDER_LINE_DASH"),Me.paint.get("line-gradient")&&$e.push("RENDER_LINE_GRADIENT");const qe=Me.paint.get("line-trim-offset");qe[0]===0&&qe[1]===0||$e.push("RENDER_LINE_TRIM_OFFSET");const Ze=Me.paint.get("line-pattern").constantOr(1),ot=Me.paint.get("line-opacity").constantOr(1)!==1;return!Ze&&ot&&$e.push("RENDER_LINE_ALPHA_DISCARD"),$e})(m);let Ie=_e.includes("RENDER_LINE_ALPHA_DISCARD");_.terrain&&_.terrain.clipOrMaskOverlapStencilType()&&(Ie=!1);for(const Me of y){const $e=u.getTile(Me);if(ye&&!$e.patternsLoaded())continue;const qe=$e.getBucket(m);if(!qe)continue;_.prepareDrawTile();const Ze=qe.programConfigurations.get(m.id),ot=_.useProgram(be,Ze,_e),it=he.constantOr(null);if(it&&$e.imageAtlas){const xt=$e.imageAtlas.patternPositions[it.toString()];xt&&Ze.setConstantPatternPositions(xt)}const mt=G.constantOr(null),$t=ae.constantOr(null);if(!ye&&mt&&$t&&$e.lineAtlas){const xt=$e.lineAtlas.getDash(mt,$t);xt&&Ze.setConstantPatternPositions(xt)}let[lt,Rt]=m.paint.get("line-trim-offset");($t==="round"||$t==="square")&&lt!==Rt&&(lt===0&&(lt-=1),Rt===1&&(Rt+=1));const vt=_.terrain?Me.projMatrix:null,Wt=ye?mc(_,$e,m,vt,U):hg(_,$e,m,vt,qe.lineClipsArray.length,U,[lt,Rt]);if(we){const xt=qe.gradients[m.id];let Ut=xt.texture;if(m.gradientVersion!==xt.version){let Bt=256;if(m.stepInterpolant){const qt=u.getSource().maxzoom,Pn=Me.canonical.z===qt?Math.ceil(1<<_.transform.maxZoom-Me.canonical.z):1;Bt=s.clamp(s.nextPowerOfTwo(qe.maxLineLength/s.EXTENT*1024*Pn),256,Te.maxTextureSize)}xt.gradient=s.renderColorRamp({expression:m.gradientExpression(),evaluationKey:"lineProgress",resolution:Bt,image:xt.gradient||void 0,clips:qe.lineClipsArray}),xt.texture?xt.texture.update(xt.gradient):xt.texture=new s.Texture(Te,xt.gradient,le.RGBA),xt.version=m.gradientVersion,Ut=xt.texture}Te.activeTexture.set(le.TEXTURE1),Ut.bind(m.stepInterpolant?le.NEAREST:le.LINEAR,le.CLAMP_TO_EDGE)}q&&(Te.activeTexture.set(le.TEXTURE0),$e.lineAtlasTexture.bind(le.LINEAR,le.REPEAT),Ze.updatePaintBuffers()),ye&&(Te.activeTexture.set(le.TEXTURE0),$e.imageAtlasTexture.bind(le.LINEAR,le.CLAMP_TO_EDGE),Ze.updatePaintBuffers()),_.prepareDrawProgram(Te,ot,Me.toUnwrapped());const ht=xt=>{ot.draw(Te,le.TRIANGLES,R,xt,O,s.CullFaceMode.disabled,Wt,m.id,qe.layoutVertexBuffer,qe.indexBuffer,qe.segments,m.paint,_.transform.zoom,Ze,[qe.layoutVertexBuffer2])};if(Ie){const xt=_.stencilModeForClipping(Me).ref;xt===0&&_.terrain&&Te.clear({stencil:0});const Ut={func:le.EQUAL,mask:255};Wt.u_alpha_discard_threshold=.8,ht(new s.StencilMode(Ut,xt,255,le.KEEP,le.KEEP,le.INVERT)),Wt.u_alpha_discard_threshold=0,ht(new s.StencilMode(Ut,xt,255,le.KEEP,le.KEEP,le.KEEP))}else ht(_.stencilModeForClipping(Me))}Ie&&(_.resetStencilClippingMasks(),_.terrain&&Te.clear({stencil:0}))},fill:function(_,u,m,y){const S=m.paint.get("fill-color"),C=m.paint.get("fill-opacity");if(C.constantOr(1)===0)return;const R=_.colorModeForRenderPass(),O=m.paint.get("fill-pattern"),U=_.opaquePassEnabledForLayer()&&!O.constantOr(1)&&S.constantOr(s.Color.transparent).a===1&&C.constantOr(0)===1?"opaque":"translucent";if(_.renderPass===U){const G=_.depthModeForSublayer(1,_.renderPass==="opaque"?s.DepthMode.ReadWrite:s.DepthMode.ReadOnly);mg(_,u,m,y,G,R,!1)}if(_.renderPass==="translucent"&&m.paint.get("fill-antialias")){const G=_.depthModeForSublayer(m.getPaintProperty("fill-outline-color")?2:0,s.DepthMode.ReadOnly);mg(_,u,m,y,G,R,!0)}},"fill-extrusion":function(_,u,m,y){const S=m.paint.get("fill-extrusion-opacity");if(S!==0&&_.renderPass==="translucent"){const C=new s.DepthMode(_.context.gl.LEQUAL,s.DepthMode.ReadWrite,_.depthRangeFor3D);if(S!==1||m.paint.get("fill-extrusion-pattern").constantOr(1))Nh(_,u,m,y,C,s.StencilMode.disabled,s.ColorMode.disabled),Nh(_,u,m,y,C,_.stencilModeFor3D(),_.colorModeForRenderPass()),_.resetStencilClippingMasks();else{const R=_.colorModeForRenderPass();Nh(_,u,m,y,C,s.StencilMode.disabled,R)}}},hillshade:function(_,u,m,y){if(_.renderPass!=="offscreen"&&_.renderPass!=="translucent")return;const S=_.context,C=_.depthModeForSublayer(0,s.DepthMode.ReadOnly),R=_.colorModeForRenderPass(),O=_.terrain&&_.terrain.renderingToTexture,[U,G]=_.renderPass!=="translucent"||O?[{},y]:_.stencilConfigForOverlap(y);for(const q of G){const ae=u.getTile(q);if(ae.needsHillshadePrepare&&_.renderPass==="offscreen")zs(_,ae,m,C,s.StencilMode.disabled,R);else if(_.renderPass==="translucent"){const he=O&&_.terrain?_.terrain.stencilModeForRTTOverlap(q):U[q.overscaledZ];hd(_,q,ae,m,C,he,R)}}S.viewport.set([0,0,_.width,_.height]),_.resetStencilClippingMasks()},raster:function(_,u,m,y,S,C){if(_.renderPass!=="translucent"||m.paint.get("raster-opacity")===0||!y.length)return;const R=_.context,O=R.gl,U=u.getSource(),G=_.useProgram("raster"),q=_.colorModeForRenderPass(),ae=_.terrain&&_.terrain.renderingToTexture,[he,ye]=U instanceof Zn||ae?[{},y]:_.stencilConfigForOverlap(y),we=ye[ye.length-1].overscaledZ,be=!_.options.moving;for(const Te of ye){const le=ae?s.DepthMode.disabled:_.depthModeForSublayer(Te.overscaledZ-we,m.paint.get("raster-opacity")===1?s.DepthMode.ReadWrite:s.DepthMode.ReadOnly,O.LESS),_e=Te.toUnwrapped(),Ie=u.getTile(Te);if(ae&&(!Ie||!Ie.hasData()))continue;const Me=ae?Te.projMatrix:_.transform.calculateProjMatrix(_e,be),$e=_.terrain&&ae?_.terrain.stencilModeForRTTOverlap(Te):he[Te.overscaledZ],qe=C?0:m.paint.get("raster-fade-duration");Ie.registerFadeDuration(qe);const Ze=u.findLoadedParent(Te,0),ot=pn(Ie,Ze,u,_.transform,qe);let it,mt;_.terrain&&_.terrain.prepareDrawTile();const $t=m.paint.get("raster-resampling")==="nearest"?O.NEAREST:O.LINEAR;R.activeTexture.set(O.TEXTURE0),Ie.texture.bind($t,O.CLAMP_TO_EDGE),R.activeTexture.set(O.TEXTURE1),Ze?(Ze.texture.bind($t,O.CLAMP_TO_EDGE),it=Math.pow(2,Ze.tileID.overscaledZ-Ie.tileID.overscaledZ),mt=[Ie.tileID.canonical.x*it%1,Ie.tileID.canonical.y*it%1]):Ie.texture.bind($t,O.CLAMP_TO_EDGE),Ie.texture.useMipmap&&R.extTextureFilterAnisotropic&&_.transform.pitch>20&&O.texParameterf(O.TEXTURE_2D,R.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,R.extTextureFilterAnisotropicMax);const lt=mm(Me,mt||[0,0],it||1,ot,m,U instanceof Zn?U.perspectiveTransform:[0,0]);if(_.prepareDrawProgram(R,G,_e),U instanceof Zn)U.boundsBuffer&&U.boundsSegments&&G.draw(R,O.TRIANGLES,le,s.StencilMode.disabled,q,s.CullFaceMode.disabled,lt,m.id,U.boundsBuffer,_.quadTriangleIndexBuffer,U.boundsSegments);else{const{tileBoundsBuffer:Rt,tileBoundsIndexBuffer:vt,tileBoundsSegments:Wt}=_.getTileBoundsBuffers(Ie);G.draw(R,O.TRIANGLES,le,$e,q,s.CullFaceMode.disabled,lt,m.id,Rt,vt,Wt)}}_.resetStencilClippingMasks()},background:function(_,u,m,y){const S=m.paint.get("background-color"),C=m.paint.get("background-opacity");if(C===0)return;const R=_.context,O=R.gl,U=_.transform,G=U.tileSize,q=m.paint.get("background-pattern");if(_.isPatternMissing(q))return;const ae=!q&&S.a===1&&C===1&&_.opaquePassEnabledForLayer()?"opaque":"translucent";if(_.renderPass!==ae)return;const he=s.StencilMode.disabled,ye=_.depthModeForSublayer(0,ae==="opaque"?s.DepthMode.ReadWrite:s.DepthMode.ReadOnly),we=_.colorModeForRenderPass(),be=_.useProgram(q?"backgroundPattern":"background");let Te,le=y;le||(Te=_.getBackgroundTiles(),le=Object.values(Te).map((_e=>_e.tileID))),q&&(R.activeTexture.set(O.TEXTURE0),_.imageManager.bind(_.context));for(const _e of le){const Ie=_e.toUnwrapped(),Me=y?_e.projMatrix:_.transform.calculateProjMatrix(Ie);_.prepareDrawTile();const $e=u?u.getTile(_e):Te?Te[_e.key]:new s.Tile(_e,G,U.zoom,_),qe=q?pm(Me,C,_,q,{tileID:_e,tileSize:G}):Bh(Me,C,S);_.prepareDrawProgram(R,be,Ie);const{tileBoundsBuffer:Ze,tileBoundsIndexBuffer:ot,tileBoundsSegments:it}=_.getTileBoundsBuffers($e);be.draw(R,O.TRIANGLES,ye,he,we,s.CullFaceMode.disabled,qe,m.id,Ze,ot,it)}},sky:function(_,u,m){const y=_.transform,S=y.projection.name==="mercator"||y.projection.name==="globe"?1:s.smoothstep(7,8,y.zoom),C=m.paint.get("sky-opacity")*S;if(C===0)return;const R=_.context,O=m.paint.get("sky-type"),U=new s.DepthMode(R.gl.LEQUAL,s.DepthMode.ReadOnly,[0,1]),G=_.frameCounter/1e3%1;O==="atmosphere"?_.renderPass==="offscreen"?m.needsSkyboxCapture(_)&&((function(q,ae,he,ye){const we=q.context,be=we.gl;let Te=ae.skyboxFbo;if(!Te){Te=ae.skyboxFbo=we.createFramebuffer(32,32,!1),ae.skyboxGeometry=new $h(we),ae.skyboxTexture=we.gl.createTexture(),be.bindTexture(be.TEXTURE_CUBE_MAP,ae.skyboxTexture),be.texParameteri(be.TEXTURE_CUBE_MAP,be.TEXTURE_WRAP_S,be.CLAMP_TO_EDGE),be.texParameteri(be.TEXTURE_CUBE_MAP,be.TEXTURE_WRAP_T,be.CLAMP_TO_EDGE),be.texParameteri(be.TEXTURE_CUBE_MAP,be.TEXTURE_MIN_FILTER,be.LINEAR),be.texParameteri(be.TEXTURE_CUBE_MAP,be.TEXTURE_MAG_FILTER,be.LINEAR);for(let Me=0;Me<6;++Me)be.texImage2D(be.TEXTURE_CUBE_MAP_POSITIVE_X+Me,0,be.RGBA,32,32,0,be.RGBA,be.UNSIGNED_BYTE,null)}we.bindFramebuffer.set(Te.framebuffer),we.viewport.set([0,0,32,32]);const le=ae.getCenter(q,!0),_e=q.useProgram("skyboxCapture"),Ie=new Float64Array(16);s.identity(Ie),s.rotateY(Ie,Ie,.5*-Math.PI),_a(we,ae,_e,Ie,le,0),s.identity(Ie),s.rotateY(Ie,Ie,.5*Math.PI),_a(we,ae,_e,Ie,le,1),s.identity(Ie),s.rotateX(Ie,Ie,.5*-Math.PI),_a(we,ae,_e,Ie,le,2),s.identity(Ie),s.rotateX(Ie,Ie,.5*Math.PI),_a(we,ae,_e,Ie,le,3),s.identity(Ie),_a(we,ae,_e,Ie,le,4),s.identity(Ie),s.rotateY(Ie,Ie,Math.PI),_a(we,ae,_e,Ie,le,5),we.viewport.set([0,0,q.width,q.height])})(_,m),m.markSkyboxValid(_)):_.renderPass==="sky"&&(function(q,ae,he,ye,we){const be=q.context,Te=be.gl,le=q.transform,_e=q.useProgram("skybox");be.activeTexture.set(Te.TEXTURE0),Te.bindTexture(Te.TEXTURE_CUBE_MAP,ae.skyboxTexture);const Ie=((Me,$e,qe,Ze,ot)=>({u_matrix:Me,u_sun_direction:$e,u_cubemap:0,u_opacity:Ze,u_temporal_offset:ot}))(le.skyboxMatrix,ae.getCenter(q,!1),0,ye,we);q.prepareDrawProgram(be,_e),_e.draw(be,Te.TRIANGLES,he,s.StencilMode.disabled,q.colorModeForRenderPass(),s.CullFaceMode.backCW,Ie,"skybox",ae.skyboxGeometry.vertexBuffer,ae.skyboxGeometry.indexBuffer,ae.skyboxGeometry.segment)})(_,m,U,C,G):O==="gradient"&&_.renderPass==="sky"&&(function(q,ae,he,ye,we){const be=q.context,Te=be.gl,le=q.transform,_e=q.useProgram("skyboxGradient");ae.skyboxGeometry||(ae.skyboxGeometry=new $h(be)),be.activeTexture.set(Te.TEXTURE0);let Ie=ae.colorRampTexture;Ie||(Ie=ae.colorRampTexture=new s.Texture(be,ae.colorRamp,Te.RGBA)),Ie.bind(Te.LINEAR,Te.CLAMP_TO_EDGE);const Me=(($e,qe,Ze,ot,it)=>({u_matrix:$e,u_color_ramp:0,u_center_direction:qe,u_radius:s.degToRad(Ze),u_opacity:ot,u_temporal_offset:it}))(le.skyboxMatrix,ae.getCenter(q,!1),ae.paint.get("sky-gradient-radius"),ye,we);q.prepareDrawProgram(be,_e),_e.draw(be,Te.TRIANGLES,he,s.StencilMode.disabled,q.colorModeForRenderPass(),s.CullFaceMode.backCW,Me,"skyboxGradient",ae.skyboxGeometry.vertexBuffer,ae.skyboxGeometry.indexBuffer,ae.skyboxGeometry.segment)})(_,m,U,C,G)},debug:function(_,u,m){for(let y=0;y<m.length;y++)Fl(_,u,m[y])},custom:function(_,u,m,y){const S=_.context,C=m.implementation;if(!_.transform.projection.unsupportedLayers||!_.transform.projection.unsupportedLayers.includes("custom")||_.terrain&&(_.terrain.renderingToTexture||_.renderPass==="offscreen")&&m.isLayerDraped()){if(_.renderPass==="offscreen"){const R=C.prerender;if(R){if(_.setCustomLayerDefaults(),S.setColorMode(_.colorModeForRenderPass()),_.transform.projection.name==="globe"){const O=_.transform.pointMerc;R.call(C,S.gl,_.transform.customLayerMatrix(),_.transform.getProjection(),_.transform.globeToMercatorMatrix(),s.globeToMercatorTransition(_.transform.zoom),[O.x,O.y],_.transform.pixelsPerMeterRatio)}else R.call(C,S.gl,_.transform.customLayerMatrix());S.setDirty(),_.setBaseState()}}else if(_.renderPass==="translucent"){if(_.terrain&&_.terrain.renderingToTexture){const O=C.renderToTile;if(O){const U=y[0].canonical,G=new s.MercatorCoordinate(U.x+y[0].wrap*(1<<U.z),U.y,U.z);S.setDepthMode(s.DepthMode.disabled),S.setStencilMode(s.StencilMode.disabled),S.setColorMode(_.colorModeForRenderPass()),_.setCustomLayerDefaults(),O.call(C,S.gl,G),S.setDirty(),_.setBaseState()}return}_.setCustomLayerDefaults(),S.setColorMode(_.colorModeForRenderPass()),S.setStencilMode(s.StencilMode.disabled);const R=C.renderingMode==="3d"?new s.DepthMode(_.context.gl.LEQUAL,s.DepthMode.ReadWrite,_.depthRangeFor3D):_.depthModeForSublayer(0,s.DepthMode.ReadOnly);if(S.setDepthMode(R),_.transform.projection.name==="globe"){const O=_.transform.pointMerc;C.render(S.gl,_.transform.customLayerMatrix(),_.transform.getProjection(),_.transform.globeToMercatorMatrix(),s.globeToMercatorTransition(_.transform.zoom),[O.x,O.y],_.transform.pixelsPerMeterRatio)}else C.render(S.gl,_.transform.customLayerMatrix());S.setDirty(),_.setBaseState(),S.bindFramebuffer.set(null)}}else s.warnOnce("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")}};class bu{constructor(u,m,y=!1){this.context=new Zt(u,y),this.transform=m,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=s.SourceCache.maxUnderzooming+s.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(u,m){const y=!!u&&!!u.terrain&&this.transform.projection.supportsTerrain;if(!(y||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new ir(this,u));const S=this._terrain;this.transform.elevation=y?S:null,S.update(u,this.transform,m)}_updateFog(u){const m=u.fog;if(!m||this.transform.projection.name==="globe"||m.getOpacity(this.transform.pitch)<1||m.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[y,S]=m.getFovAdjustedRange(this.transform._fov);if(y>S)return void(this.transform.fogCullDistSq=null);const C=y+.78*(S-y);this.transform.fogCullDistSq=C*C}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(u,m){if(this.width=u*s.exported.devicePixelRatio,this.height=m*s.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const y of this.style.order)this.style._layers[y].resize()}setup(){const u=this.context,m=new s.StructArrayLayout2i4;m.emplaceBack(0,0),m.emplaceBack(s.EXTENT,0),m.emplaceBack(0,s.EXTENT),m.emplaceBack(s.EXTENT,s.EXTENT),this.tileExtentBuffer=u.createVertexBuffer(m,s.posAttributes.members),this.tileExtentSegments=s.SegmentVector.simpleSegment(0,0,4,2);const y=new s.StructArrayLayout2i4;y.emplaceBack(0,0),y.emplaceBack(s.EXTENT,0),y.emplaceBack(0,s.EXTENT),y.emplaceBack(s.EXTENT,s.EXTENT),this.debugBuffer=u.createVertexBuffer(y,s.posAttributes.members),this.debugSegments=s.SegmentVector.simpleSegment(0,0,4,5);const S=new s.StructArrayLayout2i4;S.emplaceBack(-1,-1),S.emplaceBack(1,-1),S.emplaceBack(-1,1),S.emplaceBack(1,1),this.viewportBuffer=u.createVertexBuffer(S,s.posAttributes.members),this.viewportSegments=s.SegmentVector.simpleSegment(0,0,4,2);const C=new s.StructArrayLayout4i8;C.emplaceBack(0,0,0,0),C.emplaceBack(s.EXTENT,0,s.EXTENT,0),C.emplaceBack(0,s.EXTENT,0,s.EXTENT),C.emplaceBack(s.EXTENT,s.EXTENT,s.EXTENT,s.EXTENT),this.mercatorBoundsBuffer=u.createVertexBuffer(C,s.boundsAttributes.members),this.mercatorBoundsSegments=s.SegmentVector.simpleSegment(0,0,4,2);const R=new s.StructArrayLayout3ui6;R.emplaceBack(0,1,2),R.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=u.createIndexBuffer(R);const O=new s.StructArrayLayout1ui2;for(const G of[0,1,3,2,0])O.emplaceBack(G);this.debugIndexBuffer=u.createIndexBuffer(O),this.emptyTexture=new s.Texture(u,new s.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),u.gl.RGBA),this.identityMat=s.create();const U=this.context.gl;this.stencilClearMode=new s.StencilMode({func:U.ALWAYS,mask:0},0,255,U.ZERO,U.ZERO,U.ZERO),this.loadTimeStamps.push(s.window.performance.now()),this.atmosphereBuffer=new Tm(this.context)}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(u){return u._makeTileBoundsBuffers(this.context,this.transform.projection),u._tileBoundsBuffer?{tileBoundsBuffer:u._tileBoundsBuffer,tileBoundsIndexBuffer:u._tileBoundsIndexBuffer,tileBoundsSegments:u._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const u=this.context,m=u.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(u,m.TRIANGLES,s.DepthMode.disabled,this.stencilClearMode,s.ColorMode.disabled,s.CullFaceMode.disabled,Pt(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(u,m,y){if(!m||this.currentStencilSource===m.id||!u.isTileClipped()||!y||y.length===0)return;if(this._tileClippingMaskIDs&&!this.terrain){let O=!1;for(const U of y)if(this._tileClippingMaskIDs[U.key]===void 0){O=!0;break}if(!O)return}this.currentStencilSource=m.id;const S=this.context,C=S.gl;this.nextStencilID+y.length>256&&this.clearStencil(),S.setColorMode(s.ColorMode.disabled),S.setDepthMode(s.DepthMode.disabled);const R=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const O of y){const U=m.getTile(O),G=this._tileClippingMaskIDs[O.key]=this.nextStencilID++,{tileBoundsBuffer:q,tileBoundsIndexBuffer:ae,tileBoundsSegments:he}=this.getTileBoundsBuffers(U);R.draw(S,C.TRIANGLES,s.DepthMode.disabled,new s.StencilMode({func:C.ALWAYS,mask:0},G,255,C.KEEP,C.KEEP,C.REPLACE),s.ColorMode.disabled,s.CullFaceMode.disabled,Pt(O.projMatrix),"$clipping",q,ae,he)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const u=this.nextStencilID++,m=this.context.gl;return new s.StencilMode({func:m.NOTEQUAL,mask:255},u,255,m.KEEP,m.KEEP,m.REPLACE)}stencilModeForClipping(u){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(u);const m=this.context.gl;return new s.StencilMode({func:m.EQUAL,mask:255},this._tileClippingMaskIDs[u.key],0,m.KEEP,m.KEEP,m.REPLACE)}stencilConfigForOverlap(u){const m=this.context.gl,y=u.sort(((R,O)=>O.overscaledZ-R.overscaledZ)),S=y[y.length-1].overscaledZ,C=y[0].overscaledZ-S+1;if(C>1){this.currentStencilSource=void 0,this.nextStencilID+C>256&&this.clearStencil();const R={};for(let O=0;O<C;O++)R[O+S]=new s.StencilMode({func:m.GEQUAL,mask:255},O+this.nextStencilID,255,m.KEEP,m.KEEP,m.REPLACE);return this.nextStencilID+=C,[R,y]}return[{[S]:s.StencilMode.disabled},y]}colorModeForRenderPass(){const u=this.context.gl;return this._showOverdrawInspector?new s.ColorMode([u.CONSTANT_COLOR,u.ONE],new s.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?s.ColorMode.unblended:s.ColorMode.alphaBlended}depthModeForSublayer(u,m,y){if(!this.opaquePassEnabledForLayer())return s.DepthMode.disabled;const S=1-((1+this.currentLayer)*this.numSublayers+u)*this.depthEpsilon;return new s.DepthMode(y||this.context.gl.LEQUAL,m,[S,S])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(u,m){this.style=u,this.options=m,this.imageManager=u.imageManager,this.glyphManager=u.glyphManager,this.symbolFadeChange=u.placement.symbolFadeChange(s.exported.now()),this.imageManager.beginFrame();const y=this.style.order,S=this.style._sourceCaches;for(const G in S){const q=S[G];q.used&&q.prepare(this.context)}const C={},R={},O={};for(const G in S){const q=S[G];C[G]=q.getVisibleCoordinates(),R[G]=C[G].slice().reverse(),O[G]=q.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let G=0;G<y.length;G++)if(this.style._layers[y[G]].is3D()){this.opaquePassCutoff=G;break}if(this.terrain&&(this.terrain.updateTileBinding(O),this.opaquePassCutoff=0),this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new s.GlobeSharedBuffers(this.context)),!s.isMapAuthenticated(this.context.gl))return;this.renderPass="offscreen";for(const G of y){const q=this.style._layers[G],ae=u._getLayerSourceCache(q);if(!q.hasOffscreenPass()||q.isHidden(this.transform.zoom))continue;const he=ae?R[ae.id]:void 0;(q.type==="custom"||q.isSky()||he&&he.length)&&this.renderLayer(this,ae,q,he)}this.depthRangeFor3D=[0,1-(u.order.length+2)*this.numSublayers*this.depthEpsilon];const U=this.terrain;if(U&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&U.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:m.showOverdrawInspector?s.Color.black:s.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=m.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=y.length-1;this.currentLayer>=0;this.currentLayer--){const G=this.style._layers[y[this.currentLayer]],q=u._getLayerSourceCache(G);if(G.isSky())continue;const ae=q?R[q.id]:void 0;this._renderTileClippingMasks(G,q,ae),this.renderLayer(this,q,G,ae)}if(this.style.fog&&this.transform.projection.supportsFog&&(function(G,q){const ae=G.context,he=ae.gl,ye=G.transform,we=new s.DepthMode(he.LEQUAL,s.DepthMode.ReadOnly,[0,1]),be=G.useProgram("globeAtmosphere",null,ye.projection.name==="globe"?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),Te=s.globeToMercatorTransition(ye.zoom),le=q.properties.get("color").toArray01(),_e=q.properties.get("high-color").toArray01(),Ie=q.properties.get("space-color").toArray01PremultipliedAlpha(),Me=s.identity$1([]);s.rotateY$1(Me,Me,-s.degToRad(ye._center.lng)),s.rotateX$1(Me,Me,s.degToRad(ye._center.lat)),s.rotateZ$1(Me,Me,ye.angle),s.rotateX$1(Me,Me,-ye._pitch);const $e=s.fromQuat(new Float32Array(16),Me),qe=s.mapValue(q.properties.get("star-intensity"),0,1,0,.25),Ze=5e-4,ot=s.mapValue(q.properties.get("horizon-blend"),0,1,Ze,.25),it=s.globeUseCustomAntiAliasing(G,ae,ye)&&ot===Ze?ye.worldSize/(2*Math.PI*1.025)-1:ye.globeRadius,mt=G.frameCounter/1e3%1,$t=s.length(ye.globeCenterInViewSpace),lt=Math.sqrt(Math.pow($t,2)-Math.pow(it,2)),Rt=Math.acos(lt/$t),vt=((ht,xt,Ut,Bt,qt,Pn,jn,xn,Dn,pi,fi,kn,Mi,Ui)=>({u_frustum_tl:ht,u_frustum_tr:xt,u_frustum_br:Ut,u_frustum_bl:Bt,u_horizon:qt,u_transition:Pn,u_fadeout_range:jn,u_color:xn,u_high_color:Dn,u_space_color:pi,u_star_intensity:fi,u_star_size:5*s.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:kn,u_horizon_angle:Mi,u_rotation_matrix:Ui}))(ye.frustumCorners.TL,ye.frustumCorners.TR,ye.frustumCorners.BR,ye.frustumCorners.BL,ye.frustumCorners.horizon,Te,ot,le,_e,Ie,qe,mt,Rt,$e);G.prepareDrawProgram(ae,be);const Wt=G.atmosphereBuffer;Wt&&be.draw(ae,he.TRIANGLES,we,s.StencilMode.disabled,s.ColorMode.alphaBlended,s.CullFaceMode.backCW,vt,"skybox",Wt.vertexBuffer,Wt.indexBuffer,Wt.segments)})(this,this.style.fog),this.renderPass="sky",(s.globeToMercatorTransition(this.transform.zoom)>0||this.transform.projection.name!=="globe")&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<y.length;this.currentLayer++){const G=this.style._layers[y[this.currentLayer]],q=u._getLayerSourceCache(G);G.isSky()&&this.renderLayer(this,q,G,q?R[q.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<y.length;){const G=this.style._layers[y[this.currentLayer]],q=u._getLayerSourceCache(G);if(G.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(G)){if(G.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const ae=q?(G.type==="symbol"?O:R)[q.id]:void 0;this._renderTileClippingMasks(G,q,q?C[q.id]:void 0),this.renderLayer(this,q,G,ae),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let G=null;s.values(this.style._layers).forEach((q=>{const ae=u._getLayerSourceCache(q);ae&&!q.isHidden(this.transform.zoom)&&(!G||G.getSource().maxzoom<ae.getSource().maxzoom)&&(G=ae)})),G&&this.options.showTileBoundaries&&pc.debug(this,G,G.getVisibleCoordinates())}this.options.showPadding&&(function(G){const q=G.transform.padding;bm(G,G.transform.height-(q.top||0),3,$c),bm(G,q.bottom||0,3,ym),Uh(G,q.left||0,3,Tv),Uh(G,G.transform.width-(q.right||0),3,Sv);const ae=G.transform.centerPoint;(function(he,ye,we,be){Wc(he,ye-1,we-10,2,20,be),Wc(he,ye-10,we-1,20,2,be)})(G,ae.x,G.transform.height-ae.y,jc)})(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(s.window.performance.now()),this.saveCanvasCopy())}renderLayer(u,m,y,S){y.isHidden(this.transform.zoom)||(y.type==="background"||y.type==="sky"||y.type==="custom"||S&&S.length)&&(this.id=y.id,this.gpuTimingStart(y),(!u.transform.projection.unsupportedLayers||!u.transform.projection.unsupportedLayers.includes(y.type)||u.terrain&&y.type==="custom")&&pc[y.type](u,m,y,S,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(u){if(!this.options.gpuTiming)return;const m=this.context.extTimerQuery;let y=this.gpuTimers[u.id];y||(y=this.gpuTimers[u.id]={calls:0,cpuTime:0,query:m.createQueryEXT()}),y.calls++,m.beginQueryEXT(m.TIME_ELAPSED_EXT,y.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const u=this.context.extTimerQuery,m=u.createQueryEXT();this.deferredRenderGpuTimeQueries.push(m),u.beginQueryEXT(u.TIME_ELAPSED_EXT,m)}}gpuTimingDeferredRenderEnd(){if(!this.options.gpuTimingDeferredRender)return;const u=this.context.extTimerQuery;u.endQueryEXT(u.TIME_ELAPSED_EXT)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const u=this.context.extTimerQuery;u.endQueryEXT(u.TIME_ELAPSED_EXT)}collectGpuTimers(){const u=this.gpuTimers;return this.gpuTimers={},u}collectDeferredRenderGpuQueries(){const u=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],u}queryGpuTimers(u){const m={};for(const y in u){const S=u[y],C=this.context.extTimerQuery,R=C.getQueryObjectEXT(S.query,C.QUERY_RESULT_EXT)/1e6;C.deleteQueryEXT(S.query),m[y]=R}return m}queryGpuTimeDeferredRender(u){if(!this.options.gpuTimingDeferredRender)return 0;const m=this.context.extTimerQuery;let y=0;for(const S of u)y+=m.getQueryObjectEXT(S,m.QUERY_RESULT_EXT)/1e6,m.deleteQueryEXT(S);return y}translatePosMatrix(u,m,y,S,C){if(!y[0]&&!y[1])return u;const R=C?S==="map"?this.transform.angle:0:S==="viewport"?-this.transform.angle:0;if(R){const G=Math.sin(R),q=Math.cos(R);y=[y[0]*q-y[1]*G,y[0]*G+y[1]*q]}const O=[C?y[0]:Le(m,y[0],this.transform.zoom),C?y[1]:Le(m,y[1],this.transform.zoom),0],U=new Float32Array(16);return s.translate(U,u,O),U}saveTileTexture(u){const m=this._tileTextures[u.size[0]];m?m.push(u):this._tileTextures[u.size[0]]=[u]}getTileTexture(u){const m=this._tileTextures[u];return m&&m.length>0?m.pop():null}isPatternMissing(u){return u===null||u!==void 0&&!this.imageManager.getPattern(u.toString())}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}currentGlobalDefines(){const u=this.terrain&&this.terrain.renderingToTexture,m=this.terrain&&this.terrain.exaggeration()===0,y=this.style&&this.style.fog,S=[];return this.terrainRenderModeElevated()&&S.push("TERRAIN"),this.transform.projection.name==="globe"&&S.push("GLOBE"),m&&S.push("ZERO_EXAGGERATION"),y&&!u&&y.getOpacity(this.transform.pitch)!==0&&S.push("FOG"),u&&S.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&S.push("OVERDRAW_INSPECTOR"),S}useProgram(u,m,y){this.cache=this.cache||{};const S=y||[],C=this.currentGlobalDefines().concat(S),R=Yn.cacheKey(gu[u],u,C,m);return this.cache[R]||(this.cache[R]=new Yn(this.context,u,gu[u],m,Po[u],C)),this.cache[R]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const u=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(u.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=s.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new s.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(u,m,y){if(this.terrain&&this.terrain.renderingToTexture)return;const S=this.style.fog;if(S){const C=S.getOpacity(this.transform.pitch),R=((O,U,G,q,ae,he,ye,we,be,Te,le)=>{const _e=O.transform,Ie=U.properties.get("color").toArray01();Ie[3]=q;const Me=O.frameCounter/1e3%1;return{u_fog_matrix:G?_e.calculateFogTileMatrix(G):O.identityMat,u_fog_range:U.getFovAdjustedRange(_e._fov),u_fog_color:Ie,u_fog_horizon_blend:U.properties.get("horizon-blend"),u_fog_temporal_offset:Me,u_frustum_tl:ae,u_frustum_tr:he,u_frustum_br:ye,u_frustum_bl:we,u_globe_pos:be,u_globe_radius:Te,u_viewport:le,u_globe_transition:s.globeToMercatorTransition(_e.zoom),u_is_globe:+(_e.projection.name==="globe")}})(this,S,y,C,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*s.exported.devicePixelRatio,this.transform.height*s.exported.devicePixelRatio]);m.setFogUniformValues(u,R)}}setTileLoadedFlag(u){this.tileLoaded=u}saveCanvasCopy(){const u=this.canvasCopy();u&&(this.frameCopies.push(u),this.tileLoaded=!1)}canvasCopy(){const u=this.context.gl,m=u.createTexture();return u.bindTexture(u.TEXTURE_2D,m),u.copyTexImage2D(u.TEXTURE_2D,0,u.RGBA,0,0,u.drawingBufferWidth,u.drawingBufferHeight,0),m}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const u=this.style&&this.style.fog;return!!u&&u.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){const u=this._backgroundTiles,m=this._backgroundTiles={},y=this.transform.coveringTiles({tileSize:512});for(const S of y)m[S.key]=u[S.key]||new s.Tile(S,512,this.transform.tileZoom,this);return m}clearBackgroundTiles(){this._backgroundTiles={}}}class jh{constructor(u=0,m=0,y=0,S=0){if(isNaN(u)||u<0||isNaN(m)||m<0||isNaN(y)||y<0||isNaN(S)||S<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=u,this.bottom=m,this.left=y,this.right=S}interpolate(u,m,y){return m.top!=null&&u.top!=null&&(this.top=s.number(u.top,m.top,y)),m.bottom!=null&&u.bottom!=null&&(this.bottom=s.number(u.bottom,m.bottom,y)),m.left!=null&&u.left!=null&&(this.left=s.number(u.left,m.left,y)),m.right!=null&&u.right!=null&&(this.right=s.number(u.right,m.right,y)),this}getCenter(u,m){const y=s.clamp((this.left+u-this.right)/2,0,u),S=s.clamp((this.top+m-this.bottom)/2,0,m);return new s.Point(y,S)}equals(u){return this.top===u.top&&this.bottom===u.bottom&&this.left===u.left&&this.right===u.right}clone(){return new jh(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Wh(_,u){const m=s.getColumn(_,3);s.fromQuat(_,u),s.setColumn(_,3,m)}function Ei(_,u){const m=s.identity$1([]);return s.rotateZ$1(m,m,-u),s.rotateX$1(m,m,-_),m}function bd(_,u){const m=[_[0],_[1],0],y=[u[0],u[1],0];if(s.length(m)>=1e-15){const R=s.normalize([],m);s.scale$2(y,R,s.dot(y,R)),u[0]=y[0],u[1]=y[1]}const S=s.cross([],u,_);if(s.len(S)<1e-15)return null;const C=Math.atan2(-S[1],S[0]);return Ei(Math.atan2(Math.sqrt(_[0]*_[0]+_[1]*_[1]),-_[2]),C)}class gl{constructor(u,m){this.position=u,this.orientation=m}get position(){return this._position}set position(u){if(u){const m=u instanceof s.MercatorCoordinate?u:new s.MercatorCoordinate(u[0],u[1],u[2]);this._renderWorldCopies&&(m.x=s.wrap(m.x,0,1)),this._position=m}else this._position=null}lookAtPoint(u,m){if(this.orientation=null,!this.position)return;const y=this.position,S=this._elevation?this._elevation.getAtPointOrZero(s.MercatorCoordinate.fromLngLat(u)):0,C=s.MercatorCoordinate.fromLngLat(u,S),R=[C.x-y.x,C.y-y.y,C.z-y.z];m||(m=[0,0,1]),m[2]=Math.abs(m[2]),this.orientation=bd(R,m)}setPitchBearing(u,m){this.orientation=Ei(s.degToRad(u),s.degToRad(-m))}}class xd{constructor(u,m){this._transform=s.identity([]),this.orientation=m,this.position=u}get mercatorPosition(){const u=this.position;return new s.MercatorCoordinate(u[0],u[1],u[2])}get position(){const u=s.getColumn(this._transform,3);return[u[0],u[1],u[2]]}set position(u){var m;u&&s.setColumn(this._transform,3,[(m=u)[0],m[1],m[2],1])}get orientation(){return this._orientation}set orientation(u){this._orientation=u||s.identity$1([]),u&&Wh(this._transform,this._orientation)}getPitchBearing(){const u=this.forward(),m=this.right();return{bearing:Math.atan2(-m[1],m[0]),pitch:Math.atan2(Math.sqrt(u[0]*u[0]+u[1]*u[1]),-u[2])}}setPitchBearing(u,m){this._orientation=Ei(u,m),Wh(this._transform,this._orientation)}forward(){const u=s.getColumn(this._transform,2);return[-u[0],-u[1],-u[2]]}up(){const u=s.getColumn(this._transform,1);return[-u[0],-u[1],-u[2]]}right(){const u=s.getColumn(this._transform,0);return[u[0],u[1],u[2]]}getCameraToWorld(u,m){const y=new Float64Array(16);return s.invert(y,this.getWorldToCamera(u,m)),y}getWorldToCameraPosition(u,m,y){const S=this.position;s.scale$2(S,S,-u);const C=new Float64Array(16);return s.fromScaling(C,[y,y,y]),s.translate(C,C,S),C[10]*=m,C}getWorldToCamera(u,m){const y=new Float64Array(16),S=new Float64Array(4),C=this.position;return s.conjugate(S,this._orientation),s.scale$2(C,C,-u),s.fromQuat(y,S),s.translate(y,y,C),y[1]*=-1,y[5]*=-1,y[9]*=-1,y[13]*=-1,y[8]*=m,y[9]*=m,y[10]*=m,y[11]*=m,y}getCameraToClipPerspective(u,m,y,S){const C=new Float64Array(16);return s.perspective(C,u,m,y,S),C}getDistanceToElevation(u,m=!1){const y=u===0?0:s.mercatorZfromAltitude(u,m?s.latFromMercatorY(this.position[1]):this.position[1]),S=this.forward();return(y-this.position[2])/S[2]}clone(){return new xd([...this.position],[...this.orientation])}}function xu(_,u){const m=Hh(_.projection,_.zoom,_.width,_.height),y=(function(C,R,O,U,G){const q=new s.LngLat(O.lng-180*zl,O.lat),ae=new s.LngLat(O.lng+180*zl,O.lat),he=C.project(q.lng,q.lat),ye=C.project(ae.lng,ae.lat),we=-Math.atan2(ye.y-he.y,ye.x-he.x),be=s.MercatorCoordinate.fromLngLat(O);be.y=s.clamp(be.y,-1+zl,1-zl);const Te=be.toLngLat(),le=C.project(Te.lng,Te.lat),_e=s.MercatorCoordinate.fromLngLat(Te);_e.x+=zl;const Ie=_e.toLngLat(),Me=C.project(Ie.lng,Ie.lat),$e=Gh(Me.x-le.x,Me.y-le.y,we),qe=s.MercatorCoordinate.fromLngLat(Te);qe.y+=zl;const Ze=qe.toLngLat(),ot=C.project(Ze.lng,Ze.lat),it=Gh(ot.x-le.x,ot.y-le.y,we),mt=Math.abs($e.x)/Math.abs(it.y),$t=s.identity([]);s.rotateZ($t,$t,-we*(1-(G?0:U)));const lt=s.identity([]);return s.scale(lt,lt,[1,1-(1-mt)*U,1]),lt[4]=-it.x/it.y*U,s.rotateZ(lt,lt,we),s.multiply(lt,$t,lt),lt})(_.projection,0,_.center,m,u),S=pg(_);return s.scale(y,y,[S,S,1]),y}function pg(_){const u=_.projection,m=Hh(_.projection,_.zoom,_.width,_.height),y=gg(u,_.center),S=gg(u,s.LngLat.convert(u.center));return Math.pow(2,y*m+(1-m)*S)}function Hh(_,u,m,y,S=1/0){const C=_.range;if(!C)return 0;const R=Math.min(S,Math.max(m,y)),O=Math.log(R/1024)/Math.LN2;return s.smoothstep(C[0]+O,C[1]+O,u)}const zl=1/4e4;function gg(_,u){const m=s.clamp(u.lat,-s.MAX_MERCATOR_LATITUDE,s.MAX_MERCATOR_LATITUDE),y=new s.LngLat(u.lng-180*zl,m),S=new s.LngLat(u.lng+180*zl,m),C=_.project(y.lng,m),R=_.project(S.lng,m),O=s.MercatorCoordinate.fromLngLat(y),U=s.MercatorCoordinate.fromLngLat(S),G=R.x-C.x,q=R.y-C.y,ae=U.x-O.x,he=U.y-O.y,ye=Math.sqrt((ae*ae+he*he)/(G*G+q*q));return Math.log(ye)/Math.LN2}function Gh(_,u,m){const y=Math.cos(m),S=Math.sin(m);return{x:_*y-u*S,y:_*S+u*y}}class wu{constructor(u,m,y,S,C,R,O){this.tileSize=512,this._renderWorldCopies=C===void 0||C,this._minZoom=u||0,this._maxZoom=m||22,this._minPitch=y??0,this._maxPitch=S??60,this.setProjection(R),this.setMaxBounds(O),this.width=0,this.height=0,this._center=new s.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new jh,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new xd,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}clone(){const u=new wu(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return u._elevation=this._elevation,u._centerAltitude=this._centerAltitude,u._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,u.tileSize=this.tileSize,u.mercatorFromTransition=this.mercatorFromTransition,u.width=this.width,u.height=this.height,u.cameraElevationReference=this.cameraElevationReference,u._center=this._center,u._setZoom(this.zoom),u._seaLevelZoom=this._seaLevelZoom,u.angle=this.angle,u._fov=this._fov,u._pitch=this._pitch,u._nearZ=this._nearZ,u._farZ=this._farZ,u._averageElevation=this._averageElevation,u._unmodified=this._unmodified,u._edgeInsets=this._edgeInsets.clone(),u._camera=this._camera.clone(),u._calcMatrices(),u.freezeTileCoverage=this.freezeTileCoverage,u.frustumCorners=this.frustumCorners,u}get elevation(){return this._elevation}set elevation(u){this._elevation!==u&&(this._elevation=u,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(u,m=!1){const y=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(this._seaLevelZoom==null||y)&&this._updateCameraOnTerrain(),(u||y)&&this._constrainCamera(m),this._calcMatrices()}getProjection(){return s.pick(this.projection,["name","center","parallels"])}setProjection(u){this.projectionOptions=u||{name:"mercator"};const m=this.projection?this.getProjection():void 0;this.projection=s.getProjection(this.projectionOptions);const y=!p(m,this.getProjection());return y&&this._calcMatrices(),this.mercatorFromTransition=!1,y}setMercatorFromTransition(){const u=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=s.getProjection({name:"mercator"});const m=u!==this.projection.name;return m&&this._calcMatrices(),m}get minZoom(){return this._minZoom}set minZoom(u){this._minZoom!==u&&(this._minZoom=u,this.zoom=Math.max(this.zoom,u))}get maxZoom(){return this._maxZoom}set maxZoom(u){this._maxZoom!==u&&(this._maxZoom=u,this.zoom=Math.min(this.zoom,u))}get minPitch(){return this._minPitch}set minPitch(u){this._minPitch!==u&&(this._minPitch=u,this.pitch=Math.max(this.pitch,u))}get maxPitch(){return this._maxPitch}set maxPitch(u){this._maxPitch!==u&&(this._maxPitch=u,this.pitch=Math.min(this.pitch,u))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(u){u===void 0?u=!0:u===null&&(u=!1),this._renderWorldCopies=u}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const u=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(u))}get cameraWorldSize(){const u=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(u))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return s.mercatorZfromAltitude(this.center.lat,this.cameraWorldSizeForFog)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new s.Point(this.width,this.height)}get bearing(){return s.wrap(this.rotation,-180,180)}set bearing(u){this.rotation=u}get rotation(){return-this.angle/Math.PI*180}set rotation(u){const m=-u*Math.PI/180;var y;this.angle!==m&&(this._unmodified=!1,this.angle=m,this._calcMatrices(),this.rotationMatrix=(y=new s.ARRAY_TYPE(4),s.ARRAY_TYPE!=Float32Array&&(y[1]=0,y[2]=0),y[0]=1,y[3]=1,y),(function(S,C,R){var O=C[0],U=C[1],G=C[2],q=C[3],ae=Math.sin(R),he=Math.cos(R);S[0]=O*he+G*ae,S[1]=U*he+q*ae,S[2]=O*-ae+G*he,S[3]=U*-ae+q*he})(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(u){const m=s.clamp(u,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==m&&(this._unmodified=!1,this._pitch=m,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}get fovX(){return this._fov}get fovY(){const u=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/u)}set fov(u){u=Math.max(.01,Math.min(60,u)),this._fov!==u&&(this._unmodified=!1,this._fov=s.degToRad(u),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(u){this._averageElevation=u,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(u){const m=Math.min(Math.max(u,this.minZoom),this.maxZoom);this._zoom!==m&&(this._unmodified=!1,this._setZoom(m),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(u){this._zoom=u,this.scale=this.zoomScale(u),this.tileZoom=Math.floor(u),this.zoomFraction=u-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const u=this._elevation;this._centerAltitude=u.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=u.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){this._centerAltitudeValidForExaggeration!==void 0&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const u=this._elevation,m=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],y=this.horizonLineFromTop();let S=0,C=0;for(let R=0;R<m.length;R++){const O=new s.Point(m[R][0]*this.width,y+m[R][1]*(this.height-y)),U=u.pointCoordinate(O);if(!U)continue;const G=1/Math.hypot(U[0]-this._camera.position[0],U[1]-this._camera.position[1]);S+=U[3]*G,C+=G}return C===0?NaN:S/C}get center(){return this._center}set center(u){u.lat===this._center.lat&&u.lng===this._center.lng||(this._unmodified=!1,this._center=u,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._seaLevelZoom==null||!this._elevation)return;const u=this._seaLevelZoom,m=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),y=this.pixelsPerMeter/this.worldSize*m,S=this._mercatorZfromZoom(u),C=this._mercatorZfromZoom(this._maxZoom),R=Math.max(S-y,C);this._setZoom(this._zoomFromMercatorZ(R))}get padding(){return this._edgeInsets.toJSON()}set padding(u){this._edgeInsets.equals(u)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,u,1),this._calcMatrices())}computeZoomRelativeTo(u){const m=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,u.toAltitude()));let y;y=u.z<this._camera.position[2]?[m.x,m.y,m.z]:[u.x,u.y,u.z];const S=s.length(s.sub([],this._camera.position,y));return s.clamp(this._zoomFromMercatorZ(S),this._minZoom,this._maxZoom)}setFreeCameraOptions(u){if(!this.height||!u.position&&!u.orientation)return;this._updateCameraState();let m=!1;if(u.orientation&&!s.exactEquals(u.orientation,this._camera.orientation)&&(m=this._setCameraOrientation(u.orientation)),u.position){const y=[u.position.x,u.position.y,u.position.z];s.exactEquals$1(y,this._camera.position)||(this._setCameraPosition(y),m=!0)}m&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const u=this._camera.position,m=new gl;return m.position=new s.MercatorCoordinate(u[0],u[1],u[2]),m.orientation=this._camera.orientation,m._elevation=this.elevation,m._renderWorldCopies=this.renderWorldCopies,m}_setCameraOrientation(u){if(!s.length$1(u))return!1;s.normalize$1(u,u);const m=s.transformQuat([],[0,0,-1],u),y=s.transformQuat([],[0,-1,0],u);if(y[2]<0)return!1;const S=bd(m,y);return!!S&&(this._camera.orientation=S,!0)}_setCameraPosition(u){const m=this.zoomScale(this.minZoom)*this.tileSize,y=this.zoomScale(this.maxZoom)*this.tileSize,S=this.cameraToCenterDistance;u[2]=s.clamp(u[2],S/y,S/m),this._camera.position=u}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(u){return this._edgeInsets.equals(u)}interpolatePadding(u,m,y){this._unmodified=!1,this._edgeInsets.interpolate(u,m,y),this._constrain(),this._calcMatrices()}coveringZoomLevel(u){const m=(u.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/u.tileSize));return Math.max(0,m)}getVisibleUnwrappedCoordinates(u){const m=[new s.UnwrappedTileID(0,u)];if(this.renderWorldCopies){const y=this.pointCoordinate(new s.Point(0,0)),S=this.pointCoordinate(new s.Point(this.width,0)),C=this.pointCoordinate(new s.Point(this.width,this.height)),R=this.pointCoordinate(new s.Point(0,this.height)),O=Math.floor(Math.min(y.x,S.x,C.x,R.x)),U=Math.floor(Math.max(y.x,S.x,C.x,R.x)),G=1;for(let q=O-G;q<=U+G;q++)q!==0&&m.push(new s.UnwrappedTileID(q,u))}return m}coveringTiles(u){let m=this.coveringZoomLevel(u);const y=m,S=this.elevation&&!u.isTerrainDEM,C=this.projection.name==="mercator";if(u.minzoom!==void 0&&m<u.minzoom)return[];u.maxzoom!==void 0&&m>u.maxzoom&&(m=u.maxzoom);const R=this.locationCoordinate(this.center),O=this.center.lat,U=1<<m,G=[U*R.x,U*R.y,0],q=this.projection.name==="globe",ae=!q,he=s.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,m,ae),ye=q?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),we=U*s.mercatorZfromAltitude(1,this.center.lat),be=this._camera.position[2]/s.mercatorZfromAltitude(1,this.center.lat),Te=[U*ye.x,U*ye.y,be*(ae?1:we)],le=this.cameraToCenterDistance/u.tileSize*(u.roundZoom?1:.502),_e=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?m:0,Ie=u.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,Me=u.isTerrainDEM?-Ie:this._elevation?this._elevation.getMinElevationBelowMSL():0,$e=this.projection.isReprojectedInTileSpace?pg(this):1,qe=ht=>{const Ut=new s.MercatorCoordinate(ht.x+25e-6,ht.y,ht.z),Bt=new s.MercatorCoordinate(ht.x,ht.y+25e-6,ht.z),qt=ht.toLngLat(),Pn=Ut.toLngLat(),jn=Bt.toLngLat(),xn=this.locationCoordinate(qt),Dn=this.locationCoordinate(Pn),pi=this.locationCoordinate(jn),fi=Math.hypot(Dn.x-xn.x,Dn.y-xn.y),kn=Math.hypot(pi.x-xn.x,pi.y-xn.y);return Math.sqrt(fi*kn)*$e/25e-6},Ze=ht=>{const xt=Ie,Ut=Me;return{aabb:s.tileAABB(this,U,0,0,0,ht,Ut,xt,this.projection),zoom:0,x:0,y:0,minZ:Ut,maxZ:xt,wrap:ht,fullyVisible:!1}},ot=[];let it=[];const mt=m,$t=u.reparseOverscaled?y:m,lt=ht=>ht*ht,Rt=lt((be-this._centerAltitude)*we),vt=ht=>{if(!this._elevation||!ht.tileID||!C)return;const xt=this._elevation.getMinMaxForTile(ht.tileID),Ut=ht.aabb;xt?(Ut.min[2]=xt.min,Ut.max[2]=xt.max,Ut.center[2]=(Ut.min[2]+Ut.max[2])/2):(ht.shouldSplit=Wt(ht),ht.shouldSplit||(Ut.min[2]=Ut.max[2]=Ut.center[2]=this._centerAltitude))},Wt=ht=>{if(ht.zoom<_e)return!0;if(ht.zoom===mt)return!1;if(ht.shouldSplit!=null)return ht.shouldSplit;const xt=ht.aabb.distanceX(Te),Ut=ht.aabb.distanceY(Te);let Bt=Rt,qt=1;if(q){Bt=lt(ht.aabb.distanceZ(Te));const xn=Math.pow(2,ht.zoom),Dn=s.latFromMercatorY((ht.y+1)/xn),pi=s.latFromMercatorY(ht.y/xn),fi=Math.min(Math.max(O,Dn),pi),kn=s.circumferenceAtLatitude(fi)/s.circumferenceAtLatitude(O);if(qt=fi===O?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,kn/this._mercatorScaleRatio),this.zoom<=s.GLOBE_ZOOM_THRESHOLD_MIN&&ht.zoom===mt-1&&kn>=.9)return!0}else if(S&&(Bt=lt(ht.aabb.distanceZ(Te)*we)),this.projection.isReprojectedInTileSpace&&y<=5){const xn=Math.pow(2,ht.zoom),Dn=qe(new s.MercatorCoordinate((ht.x+.5)/xn,(ht.y+.5)/xn));qt=Dn>.85?1:Dn}const Pn=xt*xt+Ut*Ut+Bt,jn=lt((1<<mt-ht.zoom)*le*qt*((xn,Dn)=>{if(Dn*lt(.707)<xn)return 1;const pi=Math.sqrt(Dn/xn);return pi/(1.4144271570014144+(Math.pow(1.1,pi-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(Bt,Rt),Pn));return Pn<jn};if(this.renderWorldCopies)for(let ht=1;ht<=3;ht++)ot.push(Ze(-ht)),ot.push(Ze(ht));for(ot.push(Ze(0));ot.length>0;){const ht=ot.pop(),xt=ht.x,Ut=ht.y;let Bt=ht.fullyVisible;if(!Bt){const qt=ht.aabb.intersects(he);if(qt===0)continue;Bt=qt===2}if(ht.zoom!==mt&&Wt(ht))for(let qt=0;qt<4;qt++){const Pn=(xt<<1)+qt%2,jn=(Ut<<1)+(qt>>1),xn={aabb:C?ht.aabb.quadrant(qt):s.tileAABB(this,U,ht.zoom+1,Pn,jn,ht.wrap,ht.minZ,ht.maxZ,this.projection),zoom:ht.zoom+1,x:Pn,y:jn,wrap:ht.wrap,fullyVisible:Bt,tileID:void 0,shouldSplit:void 0,minZ:ht.minZ,maxZ:ht.maxZ};S&&!q&&(xn.tileID=new s.OverscaledTileID(ht.zoom+1===mt?$t:ht.zoom+1,ht.wrap,ht.zoom+1,Pn,jn),vt(xn)),ot.push(xn)}else{const qt=ht.zoom===mt?$t:ht.zoom;if(u.minzoom&&u.minzoom>qt)continue;const Pn=G[0]-(.5+xt+(ht.wrap<<ht.zoom))*(1<<m-ht.zoom),jn=G[1]-.5-Ut,xn=ht.tileID?ht.tileID:new s.OverscaledTileID(qt,ht.wrap,ht.zoom,xt,Ut);it.push({tileID:xn,distanceSq:Pn*Pn+jn*jn})}}if(this.fogCullDistSq){const ht=this.fogCullDistSq,xt=this.horizonLineFromTop();it=it.filter((Ut=>{const Bt=[0,0,0,1],qt=[s.EXTENT,s.EXTENT,0,1],Pn=this.calculateFogTileMatrix(Ut.tileID.toUnwrapped());s.transformMat4$1(Bt,Bt,Pn),s.transformMat4$1(qt,qt,Pn);const jn=s.getAABBPointSquareDist(Bt,qt);if(jn===0)return!0;let xn=!1;const Dn=this._elevation;if(Dn&&jn>ht&&xt!==0){const pi=this.calculateProjMatrix(Ut.tileID.toUnwrapped());let fi;u.isTerrainDEM||(fi=Dn.getMinMaxForTile(Ut.tileID)),fi||(fi={min:Me,max:Ie});const kn=s.furthestTileCorner(this.rotation),Mi=[kn[0]*s.EXTENT,kn[1]*s.EXTENT,fi.max];s.transformMat4(Mi,Mi,pi),xn=(1-Mi[1])*this.height*.5<xt}return jn<ht||xn}))}return it.sort(((ht,xt)=>ht.distanceSq-xt.distanceSq)).map((ht=>ht.tileID))}resize(u,m){this.width=u,this.height=m,this.pixelsToGLUnits=[2/u,-2/m],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(u){return Math.pow(2,u)}scaleZoom(u){return Math.log(u)/Math.LN2}project(u){const m=s.clamp(u.lat,-s.MAX_MERCATOR_LATITUDE,s.MAX_MERCATOR_LATITUDE),y=this.projection.project(u.lng,m);return new s.Point(y.x*this.worldSize,y.y*this.worldSize)}unproject(u){return this.projection.unproject(u.x/this.worldSize,u.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/s.mercatorZfromAltitude(1,this.center.lat)/this.worldSize}setLocationAtPoint(u,m){let y,S;const C=this.centerPoint;if(this.projection.name==="globe"){const O=this.worldSize;y=(m.x-C.x)/O,S=(m.y-C.y)/O}else{const O=this.pointCoordinate(m),U=this.pointCoordinate(C);y=O.x-U.x,S=O.y-U.y}const R=this.locationCoordinate(u);this.setLocation(new s.MercatorCoordinate(R.x-y,R.y-S))}setLocation(u){this.center=this.coordinateLocation(u),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(u){return this.projection.locationPoint(this,u)}locationPoint3D(u){return this.projection.locationPoint(this,u,!0)}pointLocation(u){return this.coordinateLocation(this.pointCoordinate(u))}pointLocation3D(u){return this.coordinateLocation(this.pointCoordinate3D(u))}locationCoordinate(u,m){const y=m?s.mercatorZfromAltitude(m,u.lat):void 0,S=this.projection.project(u.lng,u.lat);return new s.MercatorCoordinate(S.x,S.y,y)}coordinateLocation(u){return this.projection.unproject(u.x,u.y)}pointRayIntersection(u,m){const y=m??this._centerAltitude,S=[u.x,u.y,0,1],C=[u.x,u.y,1,1];s.transformMat4$1(S,S,this.pixelMatrixInverse),s.transformMat4$1(C,C,this.pixelMatrixInverse);const R=C[3];s.scale$1(S,S,1/S[3]),s.scale$1(C,C,1/R);const O=S[2],U=C[2];return{p0:S,p1:C,t:O===U?0:(y-O)/(U-O)}}screenPointToMercatorRay(u){const m=[u.x,u.y,0,1],y=[u.x,u.y,1,1];return s.transformMat4$1(m,m,this.pixelMatrixInverse),s.transformMat4$1(y,y,this.pixelMatrixInverse),s.scale$1(m,m,1/m[3]),s.scale$1(y,y,1/y[3]),m[2]=s.mercatorZfromAltitude(m[2],this._center.lat)*this.worldSize,y[2]=s.mercatorZfromAltitude(y[2],this._center.lat)*this.worldSize,s.scale$1(m,m,1/this.worldSize),s.scale$1(y,y,1/this.worldSize),new s.Ray([m[0],m[1],m[2]],s.normalize([],s.sub([],y,m)))}rayIntersectionCoordinate(u){const{p0:m,p1:y,t:S}=u,C=s.mercatorZfromAltitude(m[2],this._center.lat),R=s.mercatorZfromAltitude(y[2],this._center.lat);return new s.MercatorCoordinate(s.number(m[0],y[0],S)/this.worldSize,s.number(m[1],y[1],S)/this.worldSize,s.number(C,R,S))}pointCoordinate(u,m=this._centerAltitude){return this.projection.pointCoordinate(this,u.x,u.y,m)}pointCoordinate3D(u){if(!this.elevation)return this.pointCoordinate(u);let m=this.projection.pointCoordinate3D(this,u.x,u.y);if(m)return new s.MercatorCoordinate(m[0],m[1],m[2]);let y=0,S=this.horizonLineFromTop();if(u.y>S)return this.pointCoordinate(u);const C=.02*S,R=u.clone();for(let O=0;O<10&&S-y>C;O++){R.y=s.number(y,S,.66);const U=this.projection.pointCoordinate3D(this,R.x,R.y);U?(S=R.y,m=U):y=R.y}return m?new s.MercatorCoordinate(m[0],m[1],m[2]):this.pointCoordinate(u)}isPointAboveHorizon(u){return this.projection.isPointAboveHorizon(this,u)}isPointOnSurface(u){if(u.y<0||u.y>this.height||u.x<0||u.x>this.width)return!1;if(this.elevation||this.zoom>=s.GLOBE_ZOOM_THRESHOLD_MAX)return!this.isPointAboveHorizon(u);const m=this.pointCoordinate(u);return m.y>=0&&m.y<=1}_coordinatePoint(u,m){const y=m&&this.elevation?this.elevation.getAtPointOrZero(u,this._centerAltitude):this._centerAltitude,S=[u.x*this.worldSize,u.y*this.worldSize,y+u.toAltitude(),1];return s.transformMat4$1(S,S,this.pixelMatrix),S[3]>0?new s.Point(S[0]/S[3],S[1]/S[3]):new s.Point(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:u,left:m}=this._edgeInsets,y=this.height-this._edgeInsets.bottom,S=this.width-this._edgeInsets.right,C=this.pointLocation3D(new s.Point(m,u)),R=this.pointLocation3D(new s.Point(S,u)),O=this.pointLocation3D(new s.Point(S,y)),U=this.pointLocation3D(new s.Point(m,y));let G=Math.min(C.lng,R.lng,O.lng,U.lng),q=Math.max(C.lng,R.lng,O.lng,U.lng),ae=Math.min(C.lat,R.lat,O.lat,U.lat),he=Math.max(C.lat,R.lat,O.lat,U.lat);const ye=Math.pow(2,-this.zoom)/16*270,we=this.projection.name==="globe"?1:4,be=(Te,le,_e,Ie,Me)=>{const $e=(Te+_e)/2,qe=(le+Ie)/2,Ze=new s.Point($e,qe),{lng:ot,lat:it}=this.pointLocation3D(Ze),mt=Math.max(0,G-ot,ae-it,ot-q,it-he);G=Math.min(G,ot),q=Math.max(q,ot),ae=Math.min(ae,it),he=Math.max(he,it),(Me<we||mt>ye)&&(be(Te,le,$e,qe,Me+1),be($e,qe,_e,Ie,Me+1))};if(be(m,u,S,u,1),be(S,u,S,y,1),be(S,y,m,y,1),be(m,y,m,u,1),this.projection.name==="globe"){const[Te,le]=s.polesInViewport(this);Te?(he=90,q=180,G=-180):le&&(ae=-90,q=180,G=-180)}return new s.LngLatBounds(new s.LngLat(G,ae),new s.LngLat(q,he))}_getBoundsRectangular(u,m){const{top:y,left:S}=this._edgeInsets,C=this.height-this._edgeInsets.bottom,R=this.width-this._edgeInsets.right,O=new s.Point(S,y),U=new s.Point(R,y),G=new s.Point(R,C),q=new s.Point(S,C);let ae=this.pointCoordinate(O,u),he=this.pointCoordinate(U,u);const ye=this.pointCoordinate(G,m),we=this.pointCoordinate(q,m),be=(Te,le)=>(le.y-Te.y)/(le.x-Te.x);return ae.y>1&&he.y>=0?ae=new s.MercatorCoordinate((1-we.y)/be(we,ae)+we.x,1):ae.y<0&&he.y<=1&&(ae=new s.MercatorCoordinate(-we.y/be(we,ae)+we.x,0)),he.y>1&&ae.y>=0?he=new s.MercatorCoordinate((1-ye.y)/be(ye,he)+ye.x,1):he.y<0&&ae.y<=1&&(he=new s.MercatorCoordinate(-ye.y/be(ye,he)+ye.x,0)),new s.LngLatBounds().extend(this.coordinateLocation(ae)).extend(this.coordinateLocation(he)).extend(this.coordinateLocation(we)).extend(this.coordinateLocation(ye))}_getBoundsRectangularTerrain(){const u=this.elevation;if(!u.visibleDemTiles.length||u.isUsingMockSource())return this._getBoundsRectangular(0,0);const m=u.visibleDemTiles.reduce(((y,S)=>{if(S.dem){const C=S.dem.tree;y.min=Math.min(y.min,C.minimums[0]),y.max=Math.max(y.max,C.maximums[0])}return y}),{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(m.min*u.exaggeration(),m.max*u.exaggeration())}getBounds(){return this.projection.name==="mercator"||this.projection.name==="equirectangular"?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(u=!0){const m=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,y=this.height/2-m*(1-this._horizonShift);return u?Math.max(0,y):y}getMaxBounds(){return this.maxBounds}setMaxBounds(u){this.maxBounds=u,this.minLat=-s.MAX_MERCATOR_LATITUDE,this.maxLat=s.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,u&&(this.minLat=u.getSouth(),this.maxLat=u.getNorth(),this.minLng=u.getWest(),this.maxLng=u.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=s.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=s.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=s.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=s.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(u,m){return this.projection.createTileMatrix(this,m,u)}calculateDistanceTileData(u){const m=u.key,y=this._distanceTileDataCache;if(y[m])return y[m];const S=u.canonical,C=1/this.height,R=this.cameraWorldSize,O=R/this.zoomScale(S.z),U=(S.x+Math.pow(2,S.z)*u.wrap)*O,G=S.y*O,q=this.point;q.x*=R/this.worldSize,q.y*=R/this.worldSize;const ae=this.angle,he=Math.sin(-ae),ye=-Math.cos(-ae);return y[m]={bearing:[he,ye],center:[(q.x-U)*C,(q.y-G)*C],scale:O/s.EXTENT*C},y[m]}calculateFogTileMatrix(u){const m=u.key,y=this._fogTileMatrixCache;if(y[m])return y[m];const S=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,u);return s.multiply(S,this.worldToFogMatrix,S),y[m]=new Float32Array(S),y[m]}calculateProjMatrix(u,m=!1){const y=u.key,S=m?this._alignedProjMatrixCache:this._projMatrixCache;if(S[y])return S[y];const C=this.calculatePosMatrix(u,this.worldSize);return s.multiply(C,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:m?this.alignedProjMatrix:this.projMatrix,C),S[y]=new Float32Array(C),S[y]}calculatePixelsToTileUnitsMatrix(u){const m=u.tileID.key,y=this._pixelsToTileUnitsCache;if(y[m])return y[m];const S=(function(C,R){const{scale:O}=C.tileTransform,U=O*s.EXTENT/(C.tileSize*Math.pow(2,R.zoom-C.tileID.overscaledZ+C.tileID.canonical.z));return G=new Float32Array(4),he=(q=R.inverseAdjustmentMatrix)[1],ye=q[2],we=q[3],Te=(ae=[U,U])[1],G[0]=q[0]*(be=ae[0]),G[1]=he*be,G[2]=ye*Te,G[3]=we*Te,G;var G,q,ae,he,ye,we,be,Te})(u,this);return y[m]=S,y[m]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if(this.projection.name==="globe"){const u=1/this.worldSize,m=s.fromScaling([],[u,u,u]);return s.multiply(m,m,this.globeMatrix),m}}recenterOnTerrain(){if(!this._elevation||this.projection.name==="globe")return;const u=this._elevation;this._updateCameraState();const m=s.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,y=this._computeCameraPosition(m),S=this._camera.forward(),C=s.mercatorZfromAltitude(1,this._center.lat);y[2]/=C,S[2]/=C,s.normalize(S,S);const R=u.raycast(y,S,u.exaggeration());if(R){const O=s.scaleAndAdd([],y,S,R),U=new s.MercatorCoordinate(O[0],O[1],s.mercatorZfromAltitude(O[2],s.latFromMercatorY(O[1]))),G=(U.z+s.length([U.x-y[0],U.y-y[1],U.z-y[2]*C]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(G),this._centerAltitude=U.toAltitude(),this._center=this.coordinateLocation(U),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(u=!1){if(!this._elevation)return;const m=this._elevation,y=s.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,S=this._computeCameraPosition(y),C=m.getAtPointOrZero(new s.MercatorCoordinate(...S)),R=this.pixelsPerMeter/this.worldSize*C,O=this._minimumHeightOverTerrain(),U=S[2]-R;if(U<=O)if(U<0||u){const G=this.locationCoordinate(this._center,this._centerAltitude),q=[S[0],S[1],G.z-S[2]],ae=s.length(q);q[2]-=(O-U)/this._pixelsPerMercatorPixel;const he=s.length(q);if(he===0)return;s.scale$2(q,q,ae/he*this._pixelsPerMercatorPixel),this._camera.position=[S[0],S[1],G.z*this._pixelsPerMercatorPixel-q[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const u=this.projection.name==="globe"||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||u){const he=this.center;return he.lat=s.clamp(he.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!u)&&(he.lng=s.clamp(he.lng,this.minLng,this.maxLng)),this.center=he,void(this._constraining=!1)}const m=this._unmodified,{x:y,y:S}=this.point;let C=0,R=y,O=S;const U=this.width/2,G=this.height/2,q=this.worldMinY*this.scale,ae=this.worldMaxY*this.scale;if(S-G<q&&(O=q+G),S+G>ae&&(O=ae-G),ae-q<this.height&&(C=Math.max(C,this.height/(ae-q)),O=(ae+q)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const he=this.worldMinX*this.scale,ye=this.worldMaxX*this.scale,we=this.worldSize/2-(he+ye)/2;R=(y+we+this.worldSize)%this.worldSize-we,R-U<he&&(R=he+U),R+U>ye&&(R=ye-U),ye-he<this.width&&(C=Math.max(C,this.width/(ye-he)),R=(ye+he)/2)}R===y&&O===S||(this.center=this.unproject(new s.Point(R,O))),C&&(this.zoom+=this.scaleZoom(C)),this._constrainCamera(),this._unmodified=m,this._constraining=!1}_minZoomForBounds(){let u=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(u=Math.max(u,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),u}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const u=this.centerOffset,m=this.pixelsPerMeter;this.projection.name==="globe"&&(this._mercatorScaleRatio=s.mercatorZfromAltitude(1,this.center.lat)/s.mercatorZfromAltitude(1,s.GLOBE_SCALE_MATCH_LATITUDE));const y=Hh(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,y),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const S=this.projection.zAxisUnit==="meters"?m:1,C=this._camera.getWorldToCamera(this.worldSize,S),R=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);R[8]=2*-u.x/this.width,R[9]=2*u.y/this.height;let O=s.mul([],R,C);if(this.projection.isReprojectedInTileSpace){const qe=this.locationCoordinate(this.center),Ze=s.identity([]);s.translate(Ze,Ze,[qe.x*this.worldSize,qe.y*this.worldSize,0]),s.multiply(Ze,Ze,xu(this)),s.translate(Ze,Ze,[-qe.x*this.worldSize,-qe.y*this.worldSize,0]),s.multiply(O,O,Ze),this.inverseAdjustmentMatrix=(function(ot){const it=xu(ot,!0);return W([],[it[0],it[1],it[4],it[5]])})(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=s.scale([],O,[this.worldSize,this.worldSize,this.worldSize/S,1]),this.projMatrix=O,this.invProjMatrix=s.invert(new Float64Array(16),this.projMatrix);const U=s.invert([],R);this.frustumCorners=s.FrustumCorners.fromInvProjectionMatrix(U,this.horizonLineFromTop(),this.height);const G=new Float32Array(16);s.identity(G),s.scale(G,G,[1,-1,1]),s.rotateX(G,G,this._pitch),s.rotateZ(G,G,this.angle);const q=s.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),ae=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;q[8]=2*-u.x/this.width,q[9]=2*(u.y+ae)/this.height,this.skyboxMatrix=s.multiply(G,q,G);const he=this.point,ye=he.x,we=he.y,be=this.width%2/2,Te=this.height%2/2,le=Math.cos(this.angle),_e=Math.sin(this.angle),Ie=ye-Math.round(ye)+le*be+_e*Te,Me=we-Math.round(we)+le*Te+_e*be,$e=new Float64Array(O);if(s.translate($e,$e,[Ie>.5?Ie-1:Ie,Me>.5?Me-1:Me,0]),this.alignedProjMatrix=$e,O=s.create(),s.scale(O,O,[this.width/2,-this.height/2,1]),s.translate(O,O,[1,-1,0]),this.labelPlaneMatrix=O,O=s.create(),s.scale(O,O,[1,-1,1]),s.translate(O,O,[-1,-1,0]),s.scale(O,O,[2/this.width,2/this.height,1]),this.glCoordMatrix=O,this.pixelMatrix=s.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},O=s.invert(new Float64Array(16),this.pixelMatrix),!O)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=O,this.projection.name==="globe"||this.mercatorFromTransition){this.globeMatrix=s.calculateGlobeMatrix(this);const qe=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=s.transformMat4(qe,qe,C),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=O;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const u=this.cameraWorldSizeForFog,m=this.cameraPixelsPerMeter,y=this._camera.position,S=1/this.height/this._pixelsPerMercatorPixel,C=[u,u,m];s.scale$2(C,C,S),s.scale$2(y,y,-1),s.multiply$2(y,y,C);const R=s.create();s.translate(R,R,y),s.scale(R,R,C),this.mercatorFogMatrix=R,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(u,m,S)}_computeCameraPosition(u){const m=(u=u||this.pixelsPerMeter)/this.pixelsPerMeter,y=this._camera.forward(),S=this.point,C=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*m-u/this.worldSize*this._centerAltitude;return[S.x/this.worldSize-y[0]*C,S.y/this.worldSize-y[1]*C,u/this.worldSize*this._centerAltitude-y[2]*C]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(u){const m=this._maxCameraBoundsDistance()*Math.cos(this._pitch),y=this._camera.position[2],S=u[2];let C=1;this.projection.wrap&&(this.center=this.center.wrap()),S>0&&(C=Math.min((m-y)/S,1)),this._camera.position=s.scaleAndAdd([],this._camera.position,u,C),this._updateStateFromCamera()}_updateStateFromCamera(){const u=this._camera.position,m=this._camera.forward(),{pitch:y,bearing:S}=this._camera.getPitchBearing(),C=s.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,R=this._mercatorZfromZoom(this._maxZoom)*Math.cos(s.degToRad(this._maxPitch)),O=Math.max((u[2]-C)/Math.cos(y),R),U=this._zoomFromMercatorZ(O);s.scaleAndAdd(u,u,m,O),this._pitch=s.clamp(y,s.degToRad(this.minPitch),s.degToRad(this.maxPitch)),this.angle=s.wrap(S,-Math.PI,Math.PI),this._setZoom(s.clamp(U,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new s.MercatorCoordinate(u[0],u[1],u[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(u){return Math.pow(2,u)*this.tileSize}_mercatorZfromZoom(u){return this.cameraToCenterDistance/this._worldSizeFromZoom(u)}_minimumHeightOverTerrain(){const u=Math.min((this._seaLevelZoom!=null?this._seaLevelZoom:this._zoom)+4,this._maxZoom);return this._mercatorZfromZoom(u)}_zoomFromMercatorZ(u){return this.scaleZoom(this.cameraToCenterDistance/(u*this.tileSize))}zoomFromMercatorZAdjusted(u){let m=0,y=s.GLOBE_ZOOM_THRESHOLD_MAX,S=0,C=1/0;for(;y-m>1e-6&&y>m;){const R=m+.5*(y-m),O=this.tileSize*Math.pow(2,R),U=this.getCameraToCenterDistance(this.projection,R,O),G=this.scaleZoom(U/(u*this.tileSize)),q=Math.abs(R-G);q<C&&(C=q,S=R),R<G?m=R:y=R}return S}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(s.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(u,m){const y=Math.min(u.x,m.x),S=Math.max(u.x,m.x),C=Math.min(u.y,m.y),R=Math.max(u.y,m.y);if(C<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;const O=[new s.Point(y,C),new s.Point(S,R),new s.Point(y,R),new s.Point(S,C)],U=this.renderWorldCopies?-3:0,G=this.renderWorldCopies?4:1;for(const q of O){const ae=this.pointRayIntersection(q);if(ae.t<0)return!0;const he=this.rayIntersectionCoordinate(ae);if(he.x<U||he.y<0||he.x>G||he.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+s.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new s.Point(0,0),new s.Point(this.width,this.height))}zoomDeltaToMovement(u,m){const y=s.length(s.sub([],this._camera.position,u)),S=this._zoomFromMercatorZ(y)+m;return y-this._mercatorZfromZoom(S)}getCameraPoint(){if(this.projection.name==="globe"){const u=(function([m,y,S],C){const R=[m,y,S,1];s.transformMat4$1(R,R,C);const O=R[3]=Math.max(R[3],1e-6);return R[0]/=O,R[1]/=O,R[2]/=O,R})([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new s.Point(u[0],u[1])}{const u=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new s.Point(0,u))}}getCameraToCenterDistance(u,m=this.zoom,y=this.worldSize){const S=Hh(u,m,this.width,this.height,1024),C=u.pixelSpaceConversion(this.center.lat,y,S);return .5/Math.tan(.5*this._fov)*this.height*C}getWorldToCameraMatrix(){const u=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?this.pixelsPerMeter:1);return this.projection.name==="globe"&&s.multiply(u,u,this.globeMatrix),u}}function Tu(_,u){let m=!1,y=null;const S=()=>{y=null,m&&(_(),y=setTimeout(S,u),m=!1)};return()=>(m=!0,y||S(),y)}class wd{constructor(u){this._hashName=u&&encodeURIComponent(u),s.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=Tu(this._updateHashUnthrottled.bind(this),300)}addTo(u){return this._map=u,s.window.addEventListener("hashchange",this._onHashChange,!1),u.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),s.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const u=this._map;if(!u)return"";const m=gc(u);if(this._hashName){const y=this._hashName;let S=!1;const C=s.window.location.hash.slice(1).split("&").map((R=>{const O=R.split("=")[0];return O===y?(S=!0,`${O}=${m}`):R})).filter((R=>R));return S||C.push(`${y}=${m}`),`#${C.join("&")}`}return`#${m}`}_getCurrentHash(){const u=s.window.location.hash.replace("#","");if(this._hashName){let m;return u.split("&").map((y=>y.split("="))).forEach((y=>{y[0]===this._hashName&&(m=y)})),(m&&m[1]||"").split("/")}return u.split("/")}_onHashChange(){const u=this._map;if(!u)return!1;const m=this._getCurrentHash();if(m.length>=3&&!m.some((y=>isNaN(y)))){const y=u.dragRotate.isEnabled()&&u.touchZoomRotate.isEnabled()?+(m[3]||0):u.getBearing();return u.jumpTo({center:[+m[2],+m[1]],zoom:+m[0],bearing:y,pitch:+(m[4]||0)}),!0}return!1}_updateHashUnthrottled(){const u=s.window.location.href.replace(/(#.+)?$/,this.getHashString());s.window.history.replaceState(s.window.history.state,null,u)}}function gc(_,u){const m=_.getCenter(),y=Math.round(100*_.getZoom())/100,S=Math.ceil((y*Math.LN2+Math.log(512/360/.5))/Math.LN10),C=Math.pow(10,S),R=Math.round(m.lng*C)/C,O=Math.round(m.lat*C)/C,U=_.getBearing(),G=_.getPitch();let q=u?`/${R}/${O}/${y}`:`${y}/${O}/${R}`;return(U||G)&&(q+="/"+Math.round(10*U)/10),G&&(q+=`/${Math.round(G)}`),q}const Td={linearity:.3,easing:s.bezier(0,0,.3,1)},Sd=s.extend({deceleration:2500,maxSpeed:1400},Td),Ed=s.extend({deceleration:20,maxSpeed:1400},Td),hn=s.extend({deceleration:1e3,maxSpeed:360},Td),Zo=s.extend({deceleration:1e3,maxSpeed:90},Td);class qh{constructor(u){this._map=u,this.clear()}clear(){this._inertiaBuffer=[]}record(u){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:s.exported.now(),settings:u})}_drainInertiaBuffer(){const u=this._inertiaBuffer,m=s.exported.now();for(;u.length>0&&m-u[0].time>160;)u.shift()}_onMoveEnd(u){if(this._map._prefersReducedMotion()||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;const m={zoom:0,bearing:0,pitch:0,pan:new s.Point(0,0),pinchAround:void 0,around:void 0};for(const{settings:C}of this._inertiaBuffer)m.zoom+=C.zoomDelta||0,m.bearing+=C.bearingDelta||0,m.pitch+=C.pitchDelta||0,C.panDelta&&m.pan._add(C.panDelta),C.around&&(m.around=C.around),C.pinchAround&&(m.pinchAround=C.pinchAround);const y=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,S={};if(m.pan.mag()){const C=kd(m.pan.mag(),y,s.extend({},Sd,u||{}));S.offset=m.pan.mult(C.amount/m.pan.mag()),S.center=this._map.transform.center,Cd(S,C)}if(m.zoom){const C=kd(m.zoom,y,Ed);S.zoom=this._map.transform.zoom+C.amount,Cd(S,C)}if(m.bearing){const C=kd(m.bearing,y,hn);S.bearing=this._map.transform.bearing+s.clamp(C.amount,-179,179),Cd(S,C)}if(m.pitch){const C=kd(m.pitch,y,Zo);S.pitch=this._map.transform.pitch+C.amount,Cd(S,C)}if(S.zoom||S.bearing){const C=m.pinchAround===void 0?m.around:m.pinchAround;S.around=C?this._map.unproject(C):this._map.getCenter()}return this.clear(),S.noMoveStart=!0,S}}function Cd(_,u){(!_.duration||_.duration<u.duration)&&(_.duration=u.duration,_.easing=u.easing)}function kd(_,u,m){const{maxSpeed:y,linearity:S,deceleration:C}=m,R=s.clamp(_*S/(u/1e3),-y,y),O=Math.abs(R)/(C*S);return{easing:m.easing,duration:1e3*O,amount:R*(O/2)}}class Es extends s.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(u,m,y,S={}){const C=re(m.getCanvasContainer(),y),R=m.unproject(C);super(u,s.extend({point:C,lngLat:R,originalEvent:y},S)),this._defaultPrevented=!1,this.target=m}}class Xa extends s.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(u,m,y){const S=u==="touchend"?y.changedTouches:y.touches,C=Z(m.getCanvasContainer(),S),R=C.map((U=>m.unproject(U))),O=C.reduce(((U,G,q,ae)=>U.add(G.div(ae.length))),new s.Point(0,0));super(u,{points:C,point:O,lngLats:R,lngLat:m.unproject(O),originalEvent:y}),this._defaultPrevented=!1}}class Kh extends s.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(u,m,y){super(u,{originalEvent:y}),this._defaultPrevented=!1}}class Sm{constructor(u,m){this._map=u,this._clickTolerance=m.clickTolerance}reset(){this._mousedownPos=void 0}wheel(u){return this._firePreventable(new Kh(u.type,this._map,u))}mousedown(u,m){return this._mousedownPos=m,this._firePreventable(new Es(u.type,this._map,u))}mouseup(u){this._map.fire(new Es(u.type,this._map,u))}preclick(u){const m=s.extend({},u);m.type="preclick",this._map.fire(new Es(m.type,this._map,m))}click(u,m){this._mousedownPos&&this._mousedownPos.dist(m)>=this._clickTolerance||(this.preclick(u),this._map.fire(new Es(u.type,this._map,u)))}dblclick(u){return this._firePreventable(new Es(u.type,this._map,u))}mouseover(u){this._map.fire(new Es(u.type,this._map,u))}mouseout(u){this._map.fire(new Es(u.type,this._map,u))}touchstart(u){return this._firePreventable(new Xa(u.type,this._map,u))}touchmove(u){this._map.fire(new Xa(u.type,this._map,u))}touchend(u){this._map.fire(new Xa(u.type,this._map,u))}touchcancel(u){this._map.fire(new Xa(u.type,this._map,u))}_firePreventable(u){if(this._map.fire(u),u.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Xh{constructor(u){this._map=u}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(u){this._map.fire(new Es(u.type,this._map,u))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Es("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(u){this._delayContextMenu?this._contextMenuEvent=u:this._map.fire(new Es(u.type,this._map,u)),this._map.listens("contextmenu")&&u.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class _g{constructor(u,m){this._map=u,this._el=u.getCanvasContainer(),this._container=u.getContainer(),this._clickTolerance=m.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(u,m){this.isEnabled()&&u.shiftKey&&u.button===0&&(F(),this._startPos=this._lastPos=m,this._active=!0)}mousemoveWindow(u,m){if(!this._active)return;const y=m,S=this._startPos,C=this._lastPos;if(!S||!C||C.equals(y)||!this._box&&y.dist(S)<this._clickTolerance)return;this._lastPos=y,this._box||(this._box=k("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",u));const R=Math.min(S.x,y.x),O=Math.max(S.x,y.x),U=Math.min(S.y,y.y),G=Math.max(S.y,y.y);this._map._requestDomTask((()=>{this._box&&(this._box.style.transform=`translate(${R}px,${U}px)`,this._box.style.width=O-R+"px",this._box.style.height=G-U+"px")}))}mouseupWindow(u,m){if(!this._active)return;const y=this._startPos,S=m;if(y&&u.button===0){if(this.reset(),Q(),y.x!==S.x||y.y!==S.y)return this._map.fire(new s.Event("boxzoomend",{originalEvent:u})),{cameraAnimation:C=>C.fitScreenCoordinates(y,S,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",u)}}keydown(u){this._active&&u.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",u))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),X(),delete this._startPos,delete this._lastPos}_fireEvent(u,m){return this._map.fire(new s.Event(u,{originalEvent:m}))}}function Hc(_,u){const m={};for(let y=0;y<_.length;y++)m[_[y].identifier]=u[y];return m}class _c{constructor(u){this.reset(),this.numTouches=u.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(u,m,y){(this.centroid||y.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===0&&(this.startTime=u.timeStamp),y.length===this.numTouches&&(this.centroid=(function(S){const C=new s.Point(0,0);for(const R of S)C._add(R);return C.div(S.length)})(m),this.touches=Hc(y,m)))}touchmove(u,m,y){if(this.aborted||!this.centroid)return;const S=Hc(y,m);for(const C in this.touches){const R=S[C];(!R||R.dist(this.touches[C])>30)&&(this.aborted=!0)}}touchend(u,m,y){if((!this.centroid||u.timeStamp-this.startTime>500)&&(this.aborted=!0),y.length===0){const S=!this.aborted&&this.centroid;if(this.reset(),S)return S}}}class Em{constructor(u){this.singleTap=new _c(u),this.numTaps=u.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(u,m,y){this.singleTap.touchstart(u,m,y)}touchmove(u,m,y){this.singleTap.touchmove(u,m,y)}touchend(u,m,y){const S=this.singleTap.touchend(u,m,y);if(S){const C=u.timeStamp-this.lastTime<500,R=!this.lastTap||this.lastTap.dist(S)<30;if(C&&R||this.reset(),this.count++,this.lastTime=u.timeStamp,this.lastTap=S,this.count===this.numTaps)return this.reset(),S}}}class vg{constructor(){this._zoomIn=new Em({numTouches:1,numTaps:2}),this._zoomOut=new Em({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(u,m,y){this._zoomIn.touchstart(u,m,y),this._zoomOut.touchstart(u,m,y)}touchmove(u,m,y){this._zoomIn.touchmove(u,m,y),this._zoomOut.touchmove(u,m,y)}touchend(u,m,y){const S=this._zoomIn.touchend(u,m,y),C=this._zoomOut.touchend(u,m,y);return S?(this._active=!0,u.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:R=>R.easeTo({duration:300,zoom:R.getZoom()+1,around:R.unproject(S)},{originalEvent:u})}):C?(this._active=!0,u.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:R=>R.easeTo({duration:300,zoom:R.getZoom()-1,around:R.unproject(C)},{originalEvent:u})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const yg={0:1,2:2};class Za{constructor(u){this.reset(),this._clickTolerance=u.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(u,m){return!1}_move(u,m){return{}}mousedown(u,m){if(this._lastPoint)return;const y=$(u);this._correctButton(u,y)&&(this._lastPoint=m,this._eventButton=y)}mousemoveWindow(u,m){const y=this._lastPoint;if(y){if(u.preventDefault(),this._eventButton!=null&&(function(S,C){const R=yg[C];return S.buttons===void 0||(S.buttons&R)!==R})(u,this._eventButton))this.reset();else if(this._moved||!(m.dist(y)<this._clickTolerance))return this._moved=!0,this._lastPoint=m,this._move(y,m)}}mouseupWindow(u){this._lastPoint&&$(u)===this._eventButton&&(this._moved&&Q(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Id extends Za{mousedown(u,m){super.mousedown(u,m),this._lastPoint&&(this._active=!0)}_correctButton(u,m){return m===0&&!u.ctrlKey}_move(u,m){return{around:m,panDelta:m.sub(u)}}}class Zh extends Za{_correctButton(u,m){return m===0&&u.ctrlKey||m===2}_move(u,m){const y=.8*(m.x-u.x);if(y)return this._active=!0,{bearingDelta:y}}contextmenu(u){u.preventDefault()}}class Cm extends Za{_correctButton(u,m){return m===0&&u.ctrlKey||m===2}_move(u,m){const y=-.5*(m.y-u.y);if(y)return this._active=!0,{pitchDelta:y}}contextmenu(u){u.preventDefault()}}class Yh{constructor(u,m){this._map=u,this._el=u.getCanvasContainer(),this._minTouches=1,this._clickTolerance=m.clickTolerance||1,this.reset(),s.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new s.Point(0,0)}touchstart(u,m,y){return this._calculateTransform(u,m,y)}touchmove(u,m,y){if(this._active&&!(y.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(y.length===1&&!s.isFullscreen())return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return u.cancelable&&u.preventDefault(),this._calculateTransform(u,m,y)}}touchend(u,m,y){this._calculateTransform(u,m,y),this._active&&y.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(u,m,y){y.length>0&&(this._active=!0);const S=Hc(y,m),C=new s.Point(0,0),R=new s.Point(0,0);let O=0;for(const G in S){const q=S[G],ae=this._touches[G];ae&&(C._add(q),R._add(q.sub(ae)),O++,S[G]=q)}if(this._touches=S,O<this._minTouches||!R.mag())return;const U=R.div(O);return this._sum._add(U),this._sum.mag()<this._clickTolerance?void 0:{around:C.div(O),panDelta:U}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=k("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout((()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","null")}),500)}}class Ad{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(u){}_move(u,m,y){return{}}touchstart(u,m,y){this._firstTwoTouches||y.length<2||(this._firstTwoTouches=[y[0].identifier,y[1].identifier],this._start([m[0],m[1]]))}touchmove(u,m,y){const S=this._firstTwoTouches;if(!S)return;u.preventDefault();const[C,R]=S,O=Nl(y,m,C),U=Nl(y,m,R);if(!O||!U)return;const G=this._aroundCenter?null:O.add(U).div(2);return this._move([O,U],G,u)}touchend(u,m,y){if(!this._firstTwoTouches)return;const[S,C]=this._firstTwoTouches,R=Nl(y,m,S),O=Nl(y,m,C);R&&O||(this._active&&Q(),this.reset())}touchcancel(){this.reset()}enable(u){this._enabled=!0,this._aroundCenter=!!u&&u.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Nl(_,u,m){for(let y=0;y<_.length;y++)if(_[y].identifier===m)return u[y]}function Ul(_,u){return Math.log(_/u)/Math.LN2}class bg extends Ad{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(u){this._startDistance=this._distance=u[0].dist(u[1])}_move(u,m){const y=this._distance;if(this._distance=u[0].dist(u[1]),this._active||!(Math.abs(Ul(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Ul(this._distance,y),pinchAround:m}}}function km(_,u){return 180*_.angleWith(u)/Math.PI}class xg extends Ad{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(u){this._startVector=this._vector=u[0].sub(u[1]),this._minDiameter=u[0].dist(u[1])}_move(u,m){const y=this._vector;if(this._vector=u[0].sub(u[1]),y&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:km(this._vector,y),pinchAround:m}}_isBelowThreshold(u){this._minDiameter=Math.min(this._minDiameter,u.mag());const m=25/(Math.PI*this._minDiameter)*360,y=this._startVector;if(!y)return!1;const S=km(u,y);return Math.abs(S)<m}}function vc(_){return Math.abs(_.y)>Math.abs(_.x)}class wg extends Ad{constructor(u){super(),this._map=u}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(u){this._lastPoints=u,vc(u[0].sub(u[1]))&&(this._valid=!1)}_move(u,m,y){const S=this._lastPoints;if(!S)return;const C=u[0].sub(S[0]),R=u[1].sub(S[1]);return this._map._cooperativeGestures&&!s.isFullscreen()&&y.touches.length<3||(this._valid=this.gestureBeginsVertically(C,R,y.timeStamp),!this._valid)?void 0:(this._lastPoints=u,this._active=!0,{pitchDelta:(C.y+R.y)/2*-.5})}gestureBeginsVertically(u,m,y){if(this._valid!==void 0)return this._valid;const S=u.mag()>=2,C=m.mag()>=2;if(!S&&!C)return;if(!S||!C)return this._firstMove==null&&(this._firstMove=y),y-this._firstMove<100&&void 0;const R=u.y>0==m.y>0;return vc(u)&&vc(m)&&R}}const Tg={panStep:100,bearingStep:15,pitchStep:10};class Ev{constructor(){const u=Tg;this._panStep=u.panStep,this._bearingStep=u.bearingStep,this._pitchStep=u.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(u){if(u.altKey||u.ctrlKey||u.metaKey)return;let m=0,y=0,S=0,C=0,R=0;switch(u.keyCode){case 61:case 107:case 171:case 187:m=1;break;case 189:case 109:case 173:m=-1;break;case 37:u.shiftKey?y=-1:(u.preventDefault(),C=-1);break;case 39:u.shiftKey?y=1:(u.preventDefault(),C=1);break;case 38:u.shiftKey?S=1:(u.preventDefault(),R=-1);break;case 40:u.shiftKey?S=-1:(u.preventDefault(),R=1);break;default:return}return this._rotationDisabled&&(y=0,S=0),{cameraAnimation:O=>{const U=O.getZoom();O.easeTo({duration:300,easeId:"keyboardHandler",easing:Sg,zoom:m?Math.round(U)+m*(u.shiftKey?2:1):U,bearing:O.getBearing()+y*this._bearingStep,pitch:O.getPitch()+S*this._pitchStep,offset:[-C*this._panStep,-R*this._panStep],center:O.getCenter()},{originalEvent:u})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Sg(_){return _*(2-_)}const Jh=4.000244140625;class Eg{constructor(u,m){this._map=u,this._el=u.getCanvasContainer(),this._handler=m,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,s.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(u){this._defaultZoomRate=u}setWheelZoomRate(u){this._wheelZoomRate=u}isEnabled(){return!!this._enabled}isActive(){return this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(u){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!u&&u.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(u){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(u.ctrlKey||u.metaKey||this.isZooming()||s.isFullscreen()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let m=u.deltaMode===s.window.WheelEvent.DOM_DELTA_LINE?40*u.deltaY:u.deltaY;const y=s.exported.now(),S=y-(this._lastWheelEventTime||0);this._lastWheelEventTime=y,m!==0&&m%Jh==0?this._type="wheel":m!==0&&Math.abs(m)<4?this._type="trackpad":S>400?(this._type=null,this._lastValue=m,this._timeout=setTimeout(this._onTimeout,40,u)):this._type||(this._type=Math.abs(S*m)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,m+=this._lastValue)),u.shiftKey&&m&&(m/=4),this._type&&(this._lastWheelEvent=u,this._delta-=m,this._active||this._start(u)),u.preventDefault()}_onTimeout(u){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(u)}_start(u){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const m=re(this._el,u);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:m,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const u=this._map.transform;this._type==="wheel"&&u.projection.wrap&&(u._center.lng>=180||u._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const m=()=>u._terrainEnabled()&&this._aroundCoord?u.computeZoomRelativeTo(this._aroundCoord):u.zoom;if(this._delta!==0){const U=this._type==="wheel"&&Math.abs(this._delta)>Jh?this._wheelZoomRate:this._defaultZoomRate;let G=2/(1+Math.exp(-Math.abs(this._delta*U)));this._delta<0&&G!==0&&(G=1/G);const q=m(),ae=Math.pow(2,q),he=typeof this._targetZoom=="number"?u.zoomScale(this._targetZoom):ae;this._targetZoom=Math.min(u.maxZoom,Math.max(u.minZoom,u.scaleZoom(he*G))),this._type==="wheel"&&(this._startZoom=q,this._easing=this._smoothOutEasing(200)),this._delta=0}const y=typeof this._targetZoom=="number"?this._targetZoom:m(),S=this._startZoom,C=this._easing;let R,O=!1;if(this._type==="wheel"&&S&&C){const U=Math.min((s.exported.now()-this._lastWheelEventTime)/200,1),G=C(U);R=s.number(S,y,G),U<1?this._frameId||(this._frameId=!0):O=!0}else R=y,O=!0;return this._active=!0,O&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!O,zoomDelta:R-m(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(u){let m=s.ease;if(this._prevEase){const y=this._prevEase,S=(s.exported.now()-y.start)/y.duration,C=y.easing(S+.01)-y.easing(S),R=.27/Math.sqrt(C*C+1e-4)*.01,O=Math.sqrt(.0729-R*R);m=s.bezier(R,O,.25,1)}return this._prevEase={start:s.exported.now(),duration:u,easing:m},m}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=k("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(s.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout((()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","null")}),200)}}class Im{constructor(u,m){this._clickZoom=u,this._tapZoom=m}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Cs{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(u,m){return u.preventDefault(),{cameraAnimation:y=>{y.easeTo({duration:300,zoom:y.getZoom()+(u.shiftKey?-1:1),around:y.unproject(m)},{originalEvent:u})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Cg{constructor(){this._tap=new Em({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(u,m,y){this._swipePoint||(this._tapTime&&u.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?y.length>0&&(this._swipePoint=m[0],this._swipeTouch=y[0].identifier):this._tap.touchstart(u,m,y))}touchmove(u,m,y){if(this._tapTime){if(this._swipePoint){if(y[0].identifier!==this._swipeTouch)return;const S=m[0],C=S.y-this._swipePoint.y;return this._swipePoint=S,u.preventDefault(),this._active=!0,{zoomDelta:C/128}}}else this._tap.touchmove(u,m,y)}touchend(u,m,y){this._tapTime?this._swipePoint&&y.length===0&&this.reset():this._tap.touchend(u,m,y)&&(this._tapTime=u.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class yc{constructor(u,m,y){this._el=u,this._mousePan=m,this._touchPan=y}enable(u){this._inertiaOptions=u||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class kg{constructor(u,m,y){this._pitchWithRotate=u.pitchWithRotate,this._mouseRotate=m,this._mousePitch=y}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Am{constructor(u,m,y,S){this._el=u,this._touchZoom=m,this._touchRotate=y,this._tapDragZoom=S,this._rotationDisabled=!1,this._enabled=!0}enable(u){this._touchZoom.enable(u),this._rotationDisabled||this._touchRotate.enable(u),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Yo=_=>_.zoom||_.drag||_.pitch||_.rotate;class Qh extends s.Event{}class Ig{constructor(){this.constants=[1,1,.01],this.radius=0}setup(u,m){const y=s.sub([],m,u);this.radius=s.length(y[2]<0?s.div([],y,this.constants):[y[0],y[1],0])}projectRay(u){s.div(u,u,this.constants),s.normalize(u,u),s.mul$1(u,u,this.constants);const m=s.scale$2([],u,this.radius);if(m[2]>0){const y=s.scale$2([],[0,0,1],s.dot(m,[0,0,1])),S=s.scale$2([],s.normalize([],[m[0],m[1],0]),this.radius),C=s.add([],m,s.scale$2([],s.sub([],s.add([],S,y),m),2));m[0]=C[0],m[1]=C[1]}return m}}function Jo(_){return _.panDelta&&_.panDelta.mag()||_.zoomDelta||_.bearingDelta||_.pitchDelta}class _l{constructor(u,m){this._map=u,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new qh(u),this._bearingSnap=m.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new Ig,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(m),s.bindAll(["handleEvent","handleWindowEvent"],this);const y=this._el;this._listeners=[[y,"touchstart",{passive:!0}],[y,"touchmove",{passive:!1}],[y,"touchend",void 0],[y,"touchcancel",void 0],[y,"mousedown",void 0],[y,"mousemove",void 0],[y,"mouseup",void 0],[s.window.document,"mousemove",{capture:!0}],[s.window.document,"mouseup",void 0],[y,"mouseover",void 0],[y,"mouseout",void 0],[y,"dblclick",void 0],[y,"click",void 0],[y,"keydown",{capture:!1}],[y,"keyup",void 0],[y,"wheel",{passive:!1}],[y,"contextmenu",void 0],[s.window,"blur",void 0]];for(const[S,C,R]of this._listeners)S.addEventListener(C,S===s.window.document?this.handleWindowEvent:this.handleEvent,R)}destroy(){for(const[u,m,y]of this._listeners)u.removeEventListener(m,u===s.window.document?this.handleWindowEvent:this.handleEvent,y)}_addDefaultHandlers(u){const m=this._map,y=m.getCanvasContainer();this._add("mapEvent",new Sm(m,u));const S=m.boxZoom=new _g(m,u);this._add("boxZoom",S);const C=new vg,R=new Cs;m.doubleClickZoom=new Im(R,C),this._add("tapZoom",C),this._add("clickZoom",R);const O=new Cg;this._add("tapDragZoom",O);const U=m.touchPitch=new wg(m);this._add("touchPitch",U);const G=new Zh(u),q=new Cm(u);m.dragRotate=new kg(u,G,q),this._add("mouseRotate",G,["mousePitch"]),this._add("mousePitch",q,["mouseRotate"]);const ae=new Id(u),he=new Yh(m,u);m.dragPan=new yc(y,ae,he),this._add("mousePan",ae),this._add("touchPan",he,["touchZoom","touchRotate"]);const ye=new xg,we=new bg;m.touchZoomRotate=new Am(y,we,ye,O),this._add("touchRotate",ye,["touchPan","touchZoom"]),this._add("touchZoom",we,["touchPan","touchRotate"]),this._add("blockableMapEvent",new Xh(m));const be=m.scrollZoom=new Eg(m,this);this._add("scrollZoom",be,["mousePan"]);const Te=m.keyboard=new Ev;this._add("keyboard",Te);for(const le of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])u.interactive&&u[le]&&m[le].enable(u[le])}_add(u,m,y){this._handlers.push({handlerName:u,handler:m,allowed:y}),this._handlersById[u]=m}stop(u){if(!this._updatingCamera){for(const{handler:m}of this._handlers)m.reset();this._inertia.clear(),this._fireEvents({},{},u),this._changes=[]}}isActive(){for(const{handler:u}of this._handlers)if(u.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Yo(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(u,m,y){for(const S in u)if(S!==y&&(!m||m.indexOf(S)<0))return!0;return!1}handleWindowEvent(u){this.handleEvent(u,`${u.type}Window`)}_getMapTouches(u){const m=[];for(const y of u)this._el.contains(y.target)&&m.push(y);return m}handleEvent(u,m){this._updatingCamera=!0;const y=u.type==="renderFrame",S=y?void 0:u,C={needsRenderFrame:!1},R={},O={},U=u.touches?this._getMapTouches(u.touches):void 0,G=U?Z(this._el,U):y?void 0:re(this._el,u);for(const{handlerName:he,handler:ye,allowed:we}of this._handlers){if(!ye.isEnabled())continue;let be;this._blockedByActive(O,we,he)?ye.reset():ye[m||u.type]&&(be=ye[m||u.type](u,G,U),this.mergeHandlerResult(C,R,be,he,S),be&&be.needsRenderFrame&&this._triggerRenderFrame()),(be||ye.isActive())&&(O[he]=ye)}const q={};for(const he in this._previousActiveHandlers)O[he]||(q[he]=S);this._previousActiveHandlers=O,(Object.keys(q).length||Jo(C))&&(this._changes.push([C,R,q]),this._triggerRenderFrame()),(Object.keys(O).length||Jo(C))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:ae}=C;ae&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ae(this._map))}mergeHandlerResult(u,m,y,S,C){if(!y)return;s.extend(u,y);const R={handlerName:S,originalEvent:y.originalEvent||C};y.zoomDelta!==void 0&&(m.zoom=R),y.panDelta!==void 0&&(m.drag=R),y.pitchDelta!==void 0&&(m.pitch=R),y.bearingDelta!==void 0&&(m.rotate=R)}_applyChanges(){const u={},m={},y={};for(const[S,C,R]of this._changes)S.panDelta&&(u.panDelta=(u.panDelta||new s.Point(0,0))._add(S.panDelta)),S.zoomDelta&&(u.zoomDelta=(u.zoomDelta||0)+S.zoomDelta),S.bearingDelta&&(u.bearingDelta=(u.bearingDelta||0)+S.bearingDelta),S.pitchDelta&&(u.pitchDelta=(u.pitchDelta||0)+S.pitchDelta),S.around!==void 0&&(u.around=S.around),S.aroundCoord!==void 0&&(u.aroundCoord=S.aroundCoord),S.pinchAround!==void 0&&(u.pinchAround=S.pinchAround),S.noInertia&&(u.noInertia=S.noInertia),s.extend(m,C),s.extend(y,R);this._updateMapTransform(u,m,y),this._changes=[]}_updateMapTransform(u,m,y){const S=this._map,C=S.transform,R=_e=>[_e.x,_e.y,_e.z];if((_e=>{const Ie=this._eventsInProgress.drag;return Ie&&!this._handlersById[Ie.handlerName].isActive()})()&&!Jo(u)){const _e=C.zoom;C.cameraElevationReference="sea",C.recenterOnTerrain(),C.cameraElevationReference="ground",_e!==C.zoom&&this._map._update(!0)}if(C._isCameraConstrained&&S._stop(!0),!Jo(u))return void this._fireEvents(m,y,!0);let{panDelta:O,zoomDelta:U,bearingDelta:G,pitchDelta:q,around:ae,aroundCoord:he,pinchAround:ye}=u;C._isCameraConstrained&&(U>0&&(U=0),C._isCameraConstrained=!1),ye!==void 0&&(ae=ye),(U||(_e=>m[_e]&&!this._eventsInProgress[_e])("drag"))&&ae&&(this._dragOrigin=R(C.pointCoordinate3D(ae)),this._trackingEllipsoid.setup(C._camera.position,this._dragOrigin)),C.cameraElevationReference="sea",S._stop(!0),ae=ae||S.transform.centerPoint,G&&(C.bearing+=G),q&&(C.pitch+=q),C._updateCameraState();const we=[0,0,0];if(O)if(C.projection.name==="mercator"){const _e=this._trackingEllipsoid.projectRay(C.screenPointToMercatorRay(ae).dir),Ie=this._trackingEllipsoid.projectRay(C.screenPointToMercatorRay(ae.sub(O)).dir);we[0]=Ie[0]-_e[0],we[1]=Ie[1]-_e[1]}else{const _e=C.pointCoordinate(ae);if(C.projection.name==="globe"){O=O.rotate(-C.angle);const Ie=C._pixelsPerMercatorPixel/C.worldSize;we[0]=-O.x*s.mercatorScale(s.latFromMercatorY(_e.y))*Ie,we[1]=-O.y*s.mercatorScale(C.center.lat)*Ie}else{const Ie=C.pointCoordinate(ae.sub(O));_e&&Ie&&(we[0]=Ie.x-_e.x,we[1]=Ie.y-_e.y)}}const be=C.zoom,Te=[0,0,0];if(U){const _e=R(he||C.pointCoordinate3D(ae)),Ie={dir:s.normalize([],s.sub([],_e,C._camera.position))};if(Ie.dir[2]<0){const Me=C.zoomDeltaToMovement(_e,U);s.scale$2(Te,Ie.dir,Me)}}const le=s.add(we,we,Te);C._translateCameraConstrained(le),U&&Math.abs(C.zoom-be)>1e-4&&C.recenterOnTerrain(),C.cameraElevationReference="ground",this._map._update(),u.noInertia||this._inertia.record(u),this._fireEvents(m,y,!0)}_fireEvents(u,m,y){const S=Yo(this._eventsInProgress),C=Yo(u),R={};for(const q in u){const{originalEvent:ae}=u[q];this._eventsInProgress[q]||(R[`${q}start`]=ae),this._eventsInProgress[q]=u[q]}!S&&C&&this._fireEvent("movestart",C.originalEvent);for(const q in R)this._fireEvent(q,R[q]);C&&this._fireEvent("move",C.originalEvent);for(const q in u){const{originalEvent:ae}=u[q];this._fireEvent(q,ae)}const O={};let U;for(const q in this._eventsInProgress){const{handlerName:ae,originalEvent:he}=this._eventsInProgress[q];this._handlersById[ae].isActive()||(delete this._eventsInProgress[q],U=m[ae]||he,O[`${q}end`]=U)}for(const q in O)this._fireEvent(q,O[q]);const G=Yo(this._eventsInProgress);if(y&&(S||C)&&!G){this._updatingCamera=!0;const q=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),ae=he=>he!==0&&-this._bearingSnap<he&&he<this._bearingSnap;q?(ae(q.bearing||this._map.getBearing())&&(q.bearing=0),this._map.easeTo(q,{originalEvent:U})):(this._map.fire(new s.Event("moveend",{originalEvent:U})),ae(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(u,m){this._map.fire(new s.Event(u,m?{originalEvent:m}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((u=>{this._frameId=void 0,this.handleEvent(new Qh("renderFrame",{timeStamp:u})),this._applyChanges()}))}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const Qo="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class Ya extends s.Evented{constructor(u,m){super(),this._moving=!1,this._zooming=!1,this.transform=u,this._bearingSnap=m.bearingSnap,this._respectPrefersReducedMotion=m.respectPrefersReducedMotion!==!1,s.bindAll(["_renderFrameCallback"],this)}getCenter(){return new s.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(u,m){return this.jumpTo({center:u},m)}panBy(u,m,y){return u=s.Point.convert(u).mult(-1),this.panTo(this.transform.center,s.extend({offset:u},m),y)}panTo(u,m,y){return this.easeTo(s.extend({center:u},m),y)}getZoom(){return this.transform.zoom}setZoom(u,m){return this.jumpTo({zoom:u},m),this}zoomTo(u,m,y){return this.easeTo(s.extend({zoom:u},m),y)}zoomIn(u,m){return this.zoomTo(this.getZoom()+1,u,m),this}zoomOut(u,m){return this.zoomTo(this.getZoom()-1,u,m),this}getBearing(){return this.transform.bearing}setBearing(u,m){return this.jumpTo({bearing:u},m),this}getPadding(){return this.transform.padding}setPadding(u,m){return this.jumpTo({padding:u},m),this}rotateTo(u,m,y){return this.easeTo(s.extend({bearing:u},m),y)}resetNorth(u,m){return this.rotateTo(0,s.extend({duration:1e3},u),m),this}resetNorthPitch(u,m){return this.easeTo(s.extend({bearing:0,pitch:0,duration:1e3},u),m),this}snapToNorth(u,m){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(u,m):this}getPitch(){return this.transform.pitch}setPitch(u,m){return this.jumpTo({pitch:u},m),this}cameraForBounds(u,m){u=s.LngLatBounds.convert(u);const y=m&&m.bearing||0,S=m&&m.pitch||0,C=u.getNorthWest(),R=u.getSouthEast();return this._cameraForBounds(this.transform,C,R,y,S,m)}_extendCameraOptions(u){const m={top:0,bottom:0,right:0,left:0};if(typeof(u=s.extend({padding:m,offset:[0,0],maxZoom:this.transform.maxZoom},u)).padding=="number"){const y=u.padding;u.padding={top:y,bottom:y,right:y,left:y}}return u.padding=s.extend(m,u.padding),u}_minimumAABBFrustumDistance(u,m){const y=m.max[0]-m.min[0],S=m.max[1]-m.min[1];return y/S>u.aspect?y/(2*Math.tan(.5*u.fovX)*u.aspect):S/(2*Math.tan(.5*u.fovY)*u.aspect)}_cameraForBoundsOnGlobe(u,m,y,S,C,R){const O=u.clone(),U=this._extendCameraOptions(R);O.bearing=S,O.pitch=C;const G=s.LngLat.convert(m),q=s.LngLat.convert(y),ae=.5*(G.lat+q.lat),he=.5*(G.lng+q.lng),ye=s.latLngToECEF(ae,he),we=s.normalize([],ye),be=s.normalize([],s.cross([],we,[0,1,0])),Te=s.cross([],be,we),le=[be[0],be[1],be[2],0,Te[0],Te[1],Te[2],0,we[0],we[1],we[2],0,0,0,0,1],_e=[ye,s.latLngToECEF(G.lat,G.lng),s.latLngToECEF(q.lat,G.lng),s.latLngToECEF(q.lat,q.lng),s.latLngToECEF(G.lat,q.lng),s.latLngToECEF(ae,G.lng),s.latLngToECEF(ae,q.lng),s.latLngToECEF(G.lat,he),s.latLngToECEF(q.lat,he)];let Ie=s.Aabb.fromPoints(_e.map((Bt=>[s.dot(be,Bt),s.dot(Te,Bt),s.dot(we,Bt)])));const Me=s.transformMat4([],Ie.center,le);s.squaredLength(Me)===0&&s.set(Me,0,0,1),s.normalize(Me,Me),s.scale$2(Me,Me,s.GLOBE_RADIUS),O.center=s.ecefToLatLng(Me);const $e=O.getWorldToCameraMatrix(),qe=s.invert(new Float64Array(16),$e);Ie=s.Aabb.applyTransform(Ie,s.multiply([],$e,le)),s.transformMat4(Me,Me,$e);const Ze=.5*(Ie.max[2]-Ie.min[2]),ot=this._minimumAABBFrustumDistance(O,Ie),it=s.scale$2([],[0,0,1],Ze),mt=s.add(it,Me,it),$t=ot+(O.pitch===0?0:s.distance(Me,mt)),lt=O.globeCenterInViewSpace,Rt=s.sub([],Me,[lt[0],lt[1],lt[2]]);s.normalize(Rt,Rt),s.scale$2(Rt,Rt,$t);const vt=s.add([],Me,Rt);s.transformMat4(vt,vt,qe);const Wt=s.earthRadius/s.GLOBE_RADIUS,ht=s.length(vt),xt=s.mercatorZfromAltitude(Math.max(ht*Wt-s.earthRadius,Number.EPSILON),0),Ut=Math.min(O.zoomFromMercatorZAdjusted(xt),U.maxZoom);return Ut>.5*(s.GLOBE_ZOOM_THRESHOLD_MIN+s.GLOBE_ZOOM_THRESHOLD_MAX)?(O.setProjection({name:"mercator"}),O.zoom=Ut,this._cameraForBounds(O,m,y,S,C,R)):{center:O.center,zoom:Ut,bearing:S,pitch:C}}queryTerrainElevation(u,m){const y=this.transform.elevation;return y?(m=s.extend({},{exaggerated:!0},m),y.getAtPoint(s.MercatorCoordinate.fromLngLat(u),null,m.exaggerated)):null}_cameraForBounds(u,m,y,S,C,R){if(u.projection.name==="globe")return this._cameraForBoundsOnGlobe(u,m,y,S,C,R);const O=u.clone(),U=this._extendCameraOptions(R),G=O.padding;O.bearing=S,O.pitch=C;const q=s.LngLat.convert(m),ae=s.LngLat.convert(y),he=new s.LngLat(q.lng,ae.lat),ye=new s.LngLat(ae.lng,q.lat),we=O.project(q),be=O.project(ae),Te=this.queryTerrainElevation(q),le=this.queryTerrainElevation(ae),_e=this.queryTerrainElevation(he),Ie=this.queryTerrainElevation(ye),Me=[[we.x,we.y,Math.min(Te||0,le||0,_e||0,Ie||0)],[be.x,be.y,Math.max(Te||0,le||0,_e||0,Ie||0)]];let $e=s.Aabb.fromPoints(Me);const qe=O.getWorldToCameraMatrix(),Ze=s.invert(new Float64Array(16),qe);$e=s.Aabb.applyTransform($e,qe);const ot=s.sub([],$e.max,$e.min),it=G.left||0,mt=G.right||0,$t=G.bottom||0,lt=G.top||0,{left:Rt,right:vt,top:Wt,bottom:ht}=U.padding,xt=.5*(it+mt),Ut=.5*(lt+$t),Bt=Math.min(O.scaleZoom(O.scale*Math.min((O.width-(it+mt+Rt+vt))/ot[0],(O.height-($t+lt+ht+Wt))/ot[1])),U.maxZoom),qt=O.scale/O.zoomScale(Bt);$e=new s.Aabb([$e.min[0]-(Rt+xt)*qt,$e.min[1]-(ht+Ut)*qt,$e.min[2]],[$e.max[0]+(vt+xt)*qt,$e.max[1]+(Wt+Ut)*qt,$e.max[2]]);const Pn=.5*ot[2],jn=this._minimumAABBFrustumDistance(O,$e),xn=[0,0,1,0];s.transformMat4$1(xn,xn,qe),s.normalize$2(xn,xn);const Dn=s.scale$2([],xn,jn+Pn),pi=s.add([],$e.center,Dn),fi=(typeof U.offset.x=="number"&&typeof U.offset.y=="number"?new s.Point(U.offset.x,U.offset.y):s.Point.convert(U.offset)).rotate(-s.degToRad(S));$e.center[0]-=fi.x*qt,$e.center[1]+=fi.y*qt,s.transformMat4($e.center,$e.center,Ze),s.transformMat4(pi,pi,Ze);const kn=[$e.center[0],$e.center[1],pi[2]*O.pixelsPerMeter];s.scale$2(kn,kn,1/O.worldSize);const Mi=s.lngFromMercatorX(kn[0]),Ui=s.latFromMercatorY(kn[1]),Ki=Math.min(O._zoomFromMercatorZ(kn[2]),U.maxZoom),$i=new s.LngLat(Mi,Ui);return O.mercatorFromTransition&&Ki<.5*(s.GLOBE_ZOOM_THRESHOLD_MIN+s.GLOBE_ZOOM_THRESHOLD_MAX)?(O.setProjection({name:"globe"}),O.zoom=Ki,this._cameraForBounds(O,m,y,S,C,R)):{center:$i,zoom:Ki,bearing:S,pitch:C}}fitBounds(u,m,y){const S=this.cameraForBounds(u,m);return this._fitInternal(S,m,y)}fitScreenCoordinates(u,m,y,S,C){const R=s.Point.convert(u),O=s.Point.convert(m),U=new s.Point(Math.min(R.x,O.x),Math.min(R.y,O.y)),G=new s.Point(Math.max(R.x,O.x),Math.max(R.y,O.y));if(this.transform.projection.name==="mercator"&&this.transform.anyCornerOffEdge(R,O))return this;const q=this.transform.pointLocation3D(U),ae=this.transform.pointLocation3D(G),he=this.transform.pointLocation3D(new s.Point(U.x,G.y)),ye=this.transform.pointLocation3D(new s.Point(G.x,U.y)),we=[Math.min(q.lng,ae.lng,he.lng,ye.lng),Math.min(q.lat,ae.lat,he.lat,ye.lat)],be=[Math.max(q.lng,ae.lng,he.lng,ye.lng),Math.max(q.lat,ae.lat,he.lat,ye.lat)],Te=S&&S.pitch?S.pitch:this.getPitch(),le=this._cameraForBounds(this.transform,we,be,y,Te,S);return this._fitInternal(le,S,C)}_fitInternal(u,m,y){return u?(delete(m=s.extend(u,m)).padding,m.linear?this.easeTo(m,y):this.flyTo(m,y)):this}jumpTo(u,m){this.stop();const y=u.preloadOnly?this.transform.clone():this.transform;let S=!1,C=!1,R=!1;return"zoom"in u&&y.zoom!==+u.zoom&&(S=!0,y.zoom=+u.zoom),u.center!==void 0&&(y.center=s.LngLat.convert(u.center)),"bearing"in u&&y.bearing!==+u.bearing&&(C=!0,y.bearing=+u.bearing),"pitch"in u&&y.pitch!==+u.pitch&&(R=!0,y.pitch=+u.pitch),u.padding==null||y.isPaddingEqual(u.padding)||(y.padding=u.padding),u.preloadOnly?(this._preloadTiles(y),this):(this.fire(new s.Event("movestart",m)).fire(new s.Event("move",m)),S&&this.fire(new s.Event("zoomstart",m)).fire(new s.Event("zoom",m)).fire(new s.Event("zoomend",m)),C&&this.fire(new s.Event("rotatestart",m)).fire(new s.Event("rotate",m)).fire(new s.Event("rotateend",m)),R&&this.fire(new s.Event("pitchstart",m)).fire(new s.Event("pitch",m)).fire(new s.Event("pitchend",m)),this.fire(new s.Event("moveend",m)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||s.warnOnce(Qo),this.transform.getFreeCameraOptions()}setFreeCameraOptions(u,m){const y=this.transform;if(!y.projection.supportsFreeCamera)return s.warnOnce(Qo),this;this.stop();const S=y.zoom,C=y.pitch,R=y.bearing;y.setFreeCameraOptions(u);const O=S!==y.zoom,U=C!==y.pitch,G=R!==y.bearing;return this.fire(new s.Event("movestart",m)).fire(new s.Event("move",m)),O&&this.fire(new s.Event("zoomstart",m)).fire(new s.Event("zoom",m)).fire(new s.Event("zoomend",m)),G&&this.fire(new s.Event("rotatestart",m)).fire(new s.Event("rotate",m)).fire(new s.Event("rotateend",m)),U&&this.fire(new s.Event("pitchstart",m)).fire(new s.Event("pitch",m)).fire(new s.Event("pitchend",m)),this.fire(new s.Event("moveend",m)),this}easeTo(u,m){this._stop(!1,u.easeId),((u=s.extend({offset:[0,0],duration:500,easing:s.ease},u)).animate===!1||this._prefersReducedMotion(u))&&(u.duration=0);const y=this.transform,S=this.getZoom(),C=this.getBearing(),R=this.getPitch(),O=this.getPadding(),U="zoom"in u?+u.zoom:S,G="bearing"in u?this._normalizeBearing(u.bearing,C):C,q="pitch"in u?+u.pitch:R,ae="padding"in u?u.padding:y.padding,he=s.Point.convert(u.offset);let ye,we,be;if(y.projection.name==="globe"){const it=s.MercatorCoordinate.fromLngLat(y.center),mt=he.rotate(-y.angle);it.x+=mt.x/y.worldSize,it.y+=mt.y/y.worldSize;const $t=it.toLngLat(),lt=s.LngLat.convert(u.center||$t);this._normalizeCenter(lt),ye=y.centerPoint.add(mt),we=new s.Point(it.x,it.y).mult(y.worldSize),be=new s.Point(s.mercatorXfromLng(lt.lng),s.mercatorYfromLat(lt.lat)).mult(y.worldSize).sub(we)}else{ye=y.centerPoint.add(he);const it=y.pointLocation(ye),mt=s.LngLat.convert(u.center||it);this._normalizeCenter(mt),we=y.project(it),be=y.project(mt).sub(we)}const Te=y.zoomScale(U-S);let le,_e;u.around&&(le=s.LngLat.convert(u.around),_e=y.locationPoint(le));const Ie=this._zooming||U!==S,Me=this._rotating||C!==G,$e=this._pitching||q!==R,qe=!y.isPaddingEqual(ae),Ze=it=>mt=>{if(Ie&&(it.zoom=s.number(S,U,mt)),Me&&(it.bearing=s.number(C,G,mt)),$e&&(it.pitch=s.number(R,q,mt)),qe&&(it.interpolatePadding(O,ae,mt),ye=it.centerPoint.add(he)),le)it.setLocationAtPoint(le,_e);else{const $t=it.zoomScale(it.zoom-S),lt=U>S?Math.min(2,Te):Math.max(.5,Te),Rt=Math.pow(lt,1-mt),vt=it.unproject(we.add(be.mult(mt*Rt)).mult($t));it.setLocationAtPoint(it.renderWorldCopies?vt.wrap():vt,ye)}return u.preloadOnly||this._fireMoveEvents(m),it};if(u.preloadOnly){const it=this._emulate(Ze,u.duration,y);return this._preloadTiles(it),this}const ot={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=Ie,this._rotating=Me,this._pitching=$e,this._padding=qe,this._easeId=u.easeId,this._prepareEase(m,u.noMoveStart,ot),this._ease(Ze(y),(it=>{y.recenterOnTerrain(),this._afterEase(m,it)}),u),this}_prepareEase(u,m,y={}){this._moving=!0,this.transform.cameraElevationReference="sea",m||y.moving||this.fire(new s.Event("movestart",u)),this._zooming&&!y.zooming&&this.fire(new s.Event("zoomstart",u)),this._rotating&&!y.rotating&&this.fire(new s.Event("rotatestart",u)),this._pitching&&!y.pitching&&this.fire(new s.Event("pitchstart",u))}_fireMoveEvents(u){this.fire(new s.Event("move",u)),this._zooming&&this.fire(new s.Event("zoom",u)),this._rotating&&this.fire(new s.Event("rotate",u)),this._pitching&&this.fire(new s.Event("pitch",u))}_afterEase(u,m){if(this._easeId&&m&&this._easeId===m)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const y=this._zooming,S=this._rotating,C=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,y&&this.fire(new s.Event("zoomend",u)),S&&this.fire(new s.Event("rotateend",u)),C&&this.fire(new s.Event("pitchend",u)),this.fire(new s.Event("moveend",u))}flyTo(u,m){if(this._prefersReducedMotion(u)){const Bt=s.pick(u,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Bt,m)}this.stop(),u=s.extend({offset:[0,0],speed:1.2,curve:1.42,easing:s.ease},u);const y=this.transform,S=this.getZoom(),C=this.getBearing(),R=this.getPitch(),O=this.getPadding(),U="zoom"in u?s.clamp(+u.zoom,y.minZoom,y.maxZoom):S,G="bearing"in u?this._normalizeBearing(u.bearing,C):C,q="pitch"in u?+u.pitch:R,ae="padding"in u?u.padding:y.padding,he=y.zoomScale(U-S),ye=s.Point.convert(u.offset);let we=y.centerPoint.add(ye);const be=y.pointLocation(we),Te=s.LngLat.convert(u.center||be);this._normalizeCenter(Te);const le=y.project(be),_e=y.project(Te).sub(le);let Ie=u.curve;const Me=Math.max(y.width,y.height),$e=Me/he,qe=_e.mag();if("minZoom"in u){const Bt=s.clamp(Math.min(u.minZoom,S,U),y.minZoom,y.maxZoom),qt=Me/y.zoomScale(Bt-S);Ie=Math.sqrt(qt/qe*2)}const Ze=Ie*Ie;function ot(Bt){const qt=($e*$e-Me*Me+(Bt?-1:1)*Ze*Ze*qe*qe)/(2*(Bt?$e:Me)*Ze*qe);return Math.log(Math.sqrt(qt*qt+1)-qt)}function it(Bt){return(Math.exp(Bt)-Math.exp(-Bt))/2}function mt(Bt){return(Math.exp(Bt)+Math.exp(-Bt))/2}const $t=ot(0);let lt=function(Bt){return mt($t)/mt($t+Ie*Bt)},Rt=function(Bt){return Me*((mt($t)*(it(qt=$t+Ie*Bt)/mt(qt))-it($t))/Ze)/qe;var qt},vt=(ot(1)-$t)/Ie;if(Math.abs(qe)<1e-6||!isFinite(vt)){if(Math.abs(Me-$e)<1e-6)return this.easeTo(u,m);const Bt=$e<Me?-1:1;vt=Math.abs(Math.log($e/Me))/Ie,Rt=function(){return 0},lt=function(qt){return Math.exp(Bt*Ie*qt)}}u.duration="duration"in u?+u.duration:1e3*vt/("screenSpeed"in u?+u.screenSpeed/Ie:+u.speed),u.maxDuration&&u.duration>u.maxDuration&&(u.duration=0);const Wt=C!==G,ht=q!==R,xt=!y.isPaddingEqual(ae),Ut=Bt=>qt=>{const Pn=qt*vt,jn=1/lt(Pn);Bt.zoom=qt===1?U:S+Bt.scaleZoom(jn),Wt&&(Bt.bearing=s.number(C,G,qt)),ht&&(Bt.pitch=s.number(R,q,qt)),xt&&(Bt.interpolatePadding(O,ae,qt),we=Bt.centerPoint.add(ye));const xn=qt===1?Te:Bt.unproject(le.add(_e.mult(Rt(Pn))).mult(jn));return Bt.setLocationAtPoint(Bt.renderWorldCopies?xn.wrap():xn,we),Bt._updateCameraOnTerrain(),u.preloadOnly||this._fireMoveEvents(m),Bt};if(u.preloadOnly){const Bt=this._emulate(Ut,u.duration,y);return this._preloadTiles(Bt),this}return this._zooming=!0,this._rotating=Wt,this._pitching=ht,this._padding=xt,this._prepareEase(m,!1),this._ease(Ut(y),(()=>this._afterEase(m)),u),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(u,m){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const y=this._onEaseEnd;this._onEaseEnd=void 0,y.call(this,m)}if(!u){const y=this.handlers;y&&y.stop(!1)}return this}_ease(u,m,y){y.animate===!1||y.duration===0?(u(1),m()):(this._easeStart=s.exported.now(),this._easeOptions=y,this._onEaseFrame=u,this._onEaseEnd=m,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const u=Math.min((s.exported.now()-this._easeStart)/this._easeOptions.duration,1),m=this._onEaseFrame;m&&m(this._easeOptions.easing(u)),u<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(u,m){u=s.wrap(u,-180,180);const y=Math.abs(u-m);return Math.abs(u-360-m)<y&&(u-=360),Math.abs(u+360-m)<y&&(u+=360),u}_normalizeCenter(u){const m=this.transform;if(!m.renderWorldCopies||m.maxBounds)return;const y=u.lng-m.center.lng;u.lng+=y>180?-360:y<-180?360:0}_prefersReducedMotion(u){return this._respectPrefersReducedMotion&&s.exported.prefersReducedMotion&&!(u&&u.essential)}_emulate(u,m,y){const S=Math.ceil(15*m/1e3),C=[],R=u(y.clone());for(let O=0;O<=S;O++){const U=R(O/S);C.push(U.clone())}return C}}class bn{constructor(u={}){this.options=u,s.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(u){const m=this.options&&this.options.compact;return this._map=u,this._container=k("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=k("button","mapboxgl-ctrl-attrib-button",this._container),k("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=k("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),m&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),m===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(u,m){const y=this._map._getUIString(`AttributionControl.${m}`);u.setAttribute("aria-label",y),u.removeAttribute("title"),u.firstElementChild&&u.firstElementChild.setAttribute("title",y)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let u=this._editLink;u||(u=this._editLink=this._container.querySelector(".mapbox-improve-map"));const m=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||s.config.ACCESS_TOKEN}];if(u){const y=m.reduce(((S,C,R)=>(C.value&&(S+=`${C.key}=${C.value}${R<m.length-1?"&":""}`),S)),"?");u.href=`${s.config.FEEDBACK_URL}/${y}#${gc(this._map,!0)}`,u.rel="noopener nofollow",this._setElementTitle(u,"MapFeedback")}}_updateData(u){!u||u.sourceDataType!=="metadata"&&u.sourceDataType!=="visibility"&&u.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let u=[];if(this._map.style.stylesheet){const S=this._map.style.stylesheet;this.styleOwner=S.owner,this.styleId=S.id}const m=this._map.style._sourceCaches;for(const S in m){const C=m[S];if(C.used){const R=C.getSource();R.attribution&&u.indexOf(R.attribution)<0&&u.push(R.attribution)}}u.sort(((S,C)=>S.length-C.length)),u=u.filter(((S,C)=>{for(let R=C+1;R<u.length;R++)if(u[R].indexOf(S)>=0)return!1;return!0})),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?u=[...this.options.customAttribution,...u]:u.unshift(this.options.customAttribution));const y=u.join(" | ");y!==this._attribHTML&&(this._attribHTML=y,u.length?(this._innerContainer.innerHTML=y,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class Pm{constructor(){s.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(u){this._map=u,this._container=k("div","mapboxgl-ctrl");const m=k("a","mapboxgl-ctrl-logo");return m.target="_blank",m.rel="noopener nofollow",m.href="https://www.mapbox.com/",m.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),m.setAttribute("rel","noopener nofollow"),this._container.appendChild(m),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(u){u&&u.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const u=this._map.style._sourceCaches;if(Object.entries(u).length===0)return!0;for(const m in u){const y=u[m].getSource();if(y.hasOwnProperty("mapbox_logo")&&!y.mapbox_logo)return!1}return!0}_updateCompact(){const u=this._container.children;if(u.length){const m=u[0];this._map.getCanvasContainer().offsetWidth<250?m.classList.add("mapboxgl-compact"):m.classList.remove("mapboxgl-compact")}}}class Mm{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(u){const m=++this._id;return this._queue.push({callback:u,id:m,cancelled:!1}),m}remove(u){const m=this._currentlyRunning,y=m?this._queue.concat(m):this._queue;for(const S of y)if(S.id===u)return void(S.cancelled=!0)}run(u=0){const m=this._currentlyRunning=this._queue;this._queue=[];for(const y of m)if(!y.cancelled&&(y.callback(u),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function Su(_,u,m){if(_=new s.LngLat(_.lng,_.lat),u){const y=new s.LngLat(_.lng-360,_.lat),S=new s.LngLat(_.lng+360,_.lat),C=360*Math.ceil(Math.abs(_.lng-m.center.lng)/360),R=m.locationPoint(_).distSqr(u),O=u.x<0||u.y<0||u.x>m.width||u.y>m.height;m.locationPoint(y).distSqr(u)<R&&(O||Math.abs(y.lng-m.center.lng)<C)?_=y:m.locationPoint(S).distSqr(u)<R&&(O||Math.abs(S.lng-m.center.lng)<C)&&(_=S)}for(;Math.abs(_.lng-m.center.lng)>180;){const y=m.locationPoint(_);if(y.x>=0&&y.y>=0&&y.x<=m.width&&y.y<=m.height)break;_.lng>m.center.lng?_.lng-=360:_.lng+=360}return _}const Gc={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class mn extends s.Evented{constructor(u,m){if(super(),(u instanceof s.window.HTMLElement||m)&&(u=s.extend({element:u},m)),s.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=u&&u.anchor||"center",this._color=u&&u.color||"#3FB1CE",this._scale=u&&u.scale||1,this._draggable=u&&u.draggable||!1,this._clickTolerance=u&&u.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=u&&u.rotation||0,this._rotationAlignment=u&&u.rotationAlignment||"auto",this._pitchAlignment=u&&u.pitchAlignment&&u.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=u&&u.occludedOpacity||.2,u&&u.element)this._element=u.element,this._offset=s.Point.convert(u&&u.offset||[0,0]);else{this._defaultMarker=!0,this._element=k("div");const S=41,C=27,R=P("svg",{display:"block",height:S*this._scale+"px",width:C*this._scale+"px",viewBox:`0 0 ${C} ${S}`},this._element),O=P("radialGradient",{id:"shadowGradient"},P("defs",{},R));P("stop",{offset:"10%","stop-opacity":.4},O),P("stop",{offset:"100%","stop-opacity":.05},O),P("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},R),P("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},R),P("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},R),P("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},R),this._offset=s.Point.convert(u&&u.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",(S=>{S.preventDefault()})),this._element.addEventListener("mousedown",(S=>{S.preventDefault()}));const y=this._element.classList;for(const S in Gc)y.remove(`mapboxgl-marker-anchor-${S}`);y.add(`mapboxgl-marker-anchor-${this._anchor}`),this._popup=null}addTo(u){return u===this._map||(this.remove(),this._map=u,u.getCanvasContainer().appendChild(this._element),u.on("move",this._updateMoving),u.on("moveend",this._update),u.on("remove",this._clearFadeTimer),u._addMarker(this),this.setDraggable(this._draggable),this._update(),u.on("click",this._onMapClick)),this}remove(){const u=this._map;return u&&(u.off("click",this._onMapClick),u.off("move",this._updateMoving),u.off("moveend",this._update),u.off("mousedown",this._addDragHandler),u.off("touchstart",this._addDragHandler),u.off("mouseup",this._onUp),u.off("touchend",this._onUp),u.off("mousemove",this._onMove),u.off("touchmove",this._onMove),u.off("remove",this._clearFadeTimer),u._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(u){return this._lngLat=s.LngLat.convert(u),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(u){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),u){if(!("offset"in u.options)){const S=Math.sqrt(Math.pow(13.5,2)/2);u.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[S,-1*(38.1-13.5+S)],"bottom-right":[-S,-1*(38.1-13.5+S)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=u,u._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(u){const m=u.code,y=u.charCode||u.keyCode;m!=="Space"&&m!=="Enter"&&y!==32&&y!==13||this.togglePopup()}_onMapClick(u){const m=u.originalEvent.target,y=this._element;this._popup&&(m===y||y.contains(m))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const u=this._popup;return u?(u.isOpen()?(u.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(u.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const u=this._map,m=this._pos;if(!u||!m)return!1;const y=u.unproject(m),S=u.getFreeCameraOptions();if(!S.position)return!1;const C=S.position.toLngLat();return C.distanceTo(y)<.9*C.distanceTo(this._lngLat)}_evaluateOpacity(){const u=this._map;if(!u)return;const m=this._pos;if(!m||m.x<0||m.x>u.transform.width||m.y<0||m.y>u.transform.height)return void this._clearFadeTimer();const y=u.unproject(m);let S;u._showingGlobe()&&s.isLngLatBehindGlobe(u.transform,this._lngLat)?S=0:(S=1-u._queryFogOpacity(y),u.transform._terrainEnabled()&&u.getTerrain()&&this._behindTerrain()&&(S*=this._occludedOpacity)),this._element.style.opacity=`${S}`,this._element.style.pointerEvents=S>0?"auto":"none",this._popup&&this._popup._setOpacity(S),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const u=this._pos;if(!u||!this._map)return;const m=this._offset.mult(this._scale);this._element.style.transform=`
            translate(${u.x}px,${u.y}px)
            ${Gc[this._anchor]}
            ${this._calculateXYTransform()} ${this._calculateZTransform()}
            translate(${m.x}px,${m.y}px)
        `}_calculateXYTransform(){const u=this._pos,m=this._map,y=this.getPitchAlignment();if(!m||!u||y!=="map")return"";if(!m._showingGlobe()){const U=m.getPitch();return U?`rotateX(${U}deg)`:""}const S=s.radToDeg(s.globeTiltAtLngLat(m.transform,this._lngLat)),C=u.sub(s.globeCenterToScreenPoint(m.transform)),R=Math.abs(C.x)+Math.abs(C.y);if(R===0)return"";const O=S/R;return`rotateX(${-C.y*O}deg) rotateY(${C.x*O}deg)`}_calculateZTransform(){const u=this._pos,m=this._map;if(!m||!u)return"";let y=0;const S=this.getRotationAlignment();if(S==="map")if(m._showingGlobe()){const C=m.project(new s.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),R=m.project(new s.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(C);y=s.radToDeg(Math.atan2(R.y,R.x))-90}else y=-m.getBearing();else if(S==="horizon"){const C=s.smoothstep(4,6,m.getZoom()),R=s.globeCenterToScreenPoint(m.transform);R.y+=C*m.transform.height;const O=u.sub(R),U=s.radToDeg(Math.atan2(O.y,O.x));y=(U>90?U-270:U+90)*(1-C)}return y+=this._rotation,y?`rotateZ(${y}deg)`:""}_update(u){s.window.cancelAnimationFrame(this._updateFrameId);const m=this._map;m&&(m.transform.renderWorldCopies&&(this._lngLat=Su(this._lngLat,this._pos,m.transform)),this._pos=m.project(this._lngLat),u===!0?this._updateFrameId=s.window.requestAnimationFrame((()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())})):this._pos=this._pos.round(),m._requestDomTask((()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(m._showingGlobe()||m.getTerrain()||m.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))})))}getOffset(){return this._offset}setOffset(u){return this._offset=s.Point.convert(u),this._update(),this}_onMove(u){const m=this._map;if(!m)return;const y=this._pointerdownPos,S=this._positionDelta;if(y&&S){if(!this._isDragging){const C=this._clickTolerance||m._clickTolerance;if(u.point.dist(y)<C)return;this._isDragging=!0}this._pos=u.point.sub(S),this._lngLat=m.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new s.Event("dragstart"))),this.fire(new s.Event("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const u=this._map;u&&(u.off("mousemove",this._onMove),u.off("touchmove",this._onMove)),this._state==="active"&&this.fire(new s.Event("dragend")),this._state="inactive"}_addDragHandler(u){const m=this._map,y=this._pos;m&&y&&this._element.contains(u.originalEvent.target)&&(u.preventDefault(),this._positionDelta=u.point.sub(y),this._pointerdownPos=u.point,this._state="pending",m.on("mousemove",this._onMove),m.on("touchmove",this._onMove),m.once("mouseup",this._onUp),m.once("touchend",this._onUp))}setDraggable(u){this._draggable=!!u;const m=this._map;return m&&(u?(m.on("mousedown",this._addDragHandler),m.on("touchstart",this._addDragHandler)):(m.off("mousedown",this._addDragHandler),m.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(u){return this._rotation=u||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(u){return this._rotationAlignment=u||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment==="auto"||this._rotationAlignment==="horizon"&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(u){return this._pitchAlignment=u||"auto",this._update(),this}getPitchAlignment(){return this._pitchAlignment==="auto"?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(u){return this._occludedOpacity=u||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const Dm={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Cv=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Rm(_=new s.Point(0,0),u="bottom"){if(typeof _=="number"){const m=Math.round(Math.sqrt(.5*Math.pow(_,2)));switch(u){case"top":return new s.Point(0,_);case"top-left":return new s.Point(m,m);case"top-right":return new s.Point(-m,m);case"bottom":return new s.Point(0,-_);case"bottom-left":return new s.Point(m,-m);case"bottom-right":return new s.Point(-m,-m);case"left":return new s.Point(_,0);case"right":return new s.Point(-_,0)}return new s.Point(0,0)}return _ instanceof s.Point||Array.isArray(_)?s.Point.convert(_):s.Point.convert(_[u]||[0,0])}class Eu{constructor(u){this.jumpTo(u)}getValue(u){if(u<=this._startTime)return this._start;if(u>=this._endTime)return this._end;const m=s.easeCubicInOut((u-this._startTime)/(this._endTime-this._startTime));return this._start*(1-m)+this._end*m}isEasing(u){return u>=this._startTime&&u<=this._endTime}jumpTo(u){this._startTime=-1/0,this._endTime=-1/0,this._start=u,this._end=u}easeTo(u,m,y){this._start=this.getValue(m),this._end=u,this._startTime=m,this._endTime=m+y}}const Pd={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use  + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},Ag={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0},kv={showCompass:!0,showZoom:!0,visualizePitch:!1};class Md{constructor(u,m,y=!1){this._clickTolerance=10,this.element=m,this.mouseRotate=new Zh({clickTolerance:u.dragRotate._mouseRotate._clickTolerance}),this.map=u,y&&(this.mousePitch=new Cm({clickTolerance:u.dragRotate._mousePitch._clickTolerance})),s.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),m.addEventListener("mousedown",this.mousedown),m.addEventListener("touchstart",this.touchstart,{passive:!1}),m.addEventListener("touchmove",this.touchmove),m.addEventListener("touchend",this.touchend),m.addEventListener("touchcancel",this.reset)}down(u,m){this.mouseRotate.mousedown(u,m),this.mousePitch&&this.mousePitch.mousedown(u,m),F()}move(u,m){const y=this.map,S=this.mouseRotate.mousemoveWindow(u,m),C=S&&S.bearingDelta;if(C&&y.setBearing(y.getBearing()+C),this.mousePitch){const R=this.mousePitch.mousemoveWindow(u,m),O=R&&R.pitchDelta;O&&y.setPitch(y.getPitch()+O)}}off(){const u=this.element;u.removeEventListener("mousedown",this.mousedown),u.removeEventListener("touchstart",this.touchstart,{passive:!1}),u.removeEventListener("touchmove",this.touchmove),u.removeEventListener("touchend",this.touchend),u.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){X(),s.window.removeEventListener("mousemove",this.mousemove),s.window.removeEventListener("mouseup",this.mouseup)}mousedown(u){this.down(s.extend({},u,{ctrlKey:!0,preventDefault:()=>u.preventDefault()}),re(this.element,u)),s.window.addEventListener("mousemove",this.mousemove),s.window.addEventListener("mouseup",this.mouseup)}mousemove(u){this.move(u,re(this.element,u))}mouseup(u){this.mouseRotate.mouseupWindow(u),this.mousePitch&&this.mousePitch.mouseupWindow(u),this.offTemp()}touchstart(u){u.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=Z(this.element,u.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>u.preventDefault()},this._startPos))}touchmove(u){u.targetTouches.length!==1?this.reset():(this._lastPos=Z(this.element,u.targetTouches)[0],this.move({preventDefault:()=>u.preventDefault()},this._lastPos))}touchend(u){u.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const pe={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},V={maxWidth:100,unit:"metric"},se={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"},ke={version:s.version,supported:v,setRTLTextPlugin:s.setRTLTextPlugin,getRTLTextPluginStatus:s.getRTLTextPluginStatus,Map:class extends Ya{constructor(_){if(s.LivePerformanceUtils.mark(s.PerformanceMarkers.create),(_=s.extend({},Ag,_)).minZoom!=null&&_.maxZoom!=null&&_.minZoom>_.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(_.minPitch!=null&&_.maxPitch!=null&&_.minPitch>_.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(_.minPitch!=null&&_.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(_.maxPitch!=null&&_.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(_.antialias&&s.isSafariWithAntialiasingBug(s.window)&&(_.antialias=!1,s.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new wu(_.minZoom,_.maxZoom,_.minPitch,_.maxPitch,_.renderWorldCopies),_),this._interactive=_.interactive,this._minTileCacheSize=_.minTileCacheSize,this._maxTileCacheSize=_.maxTileCacheSize,this._failIfMajorPerformanceCaveat=_.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=_.preserveDrawingBuffer,this._antialias=_.antialias,this._useWebGL2=_.useWebGL2,this._trackResize=_.trackResize,this._bearingSnap=_.bearingSnap,this._refreshExpiredTiles=_.refreshExpiredTiles,this._fadeDuration=_.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=_.crossSourceCollisions,this._collectResourceTiming=_.collectResourceTiming,this._optimizeForTerrain=_.optimizeForTerrain,this._language=this._parseLanguage(_.language),this._worldview=_.worldview,this._renderTaskQueue=new Mm,this._domRenderTaskQueue=new Mm,this._controls=[],this._markers=[],this._popups=[],this._mapId=s.uniqueId(),this._locale=s.extend({},Pd,_.locale),this._clickTolerance=_.clickTolerance,this._cooperativeGestures=_.cooperativeGestures,this._performanceMetricsCollection=_.performanceMetricsCollection,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new Eu(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._requestManager=new s.RequestManager(_.transformRequest,_.accessToken,_.testMode),this._silenceAuthErrors=!!_.testMode,typeof _.container=="string"){if(this._container=s.window.document.getElementById(_.container),!this._container)throw new Error(`Container '${_.container}' not found.`)}else{if(!(_.container instanceof s.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=_.container}if(this._container.childNodes.length>0&&s.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),_.maxBounds&&this.setMaxBounds(_.maxBounds),s.bindAll(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),s.window!==void 0&&(s.window.addEventListener("online",this._onWindowOnline,!1),s.window.addEventListener("resize",this._onWindowResize,!1),s.window.addEventListener("orientationchange",this._onWindowResize,!1),s.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1),s.window.addEventListener("visibilitychange",this._onVisibilityChange,!1)),this.handlers=new _l(this,_),this._localFontFamily=_.localFontFamily,this._localIdeographFontFamily=_.localIdeographFontFamily,_.style&&this.setStyle(_.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),_.projection&&this.setProjection(_.projection),this._hash=_.hash&&new wd(typeof _.hash=="string"&&_.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:_.center,zoom:_.zoom,bearing:_.bearing,pitch:_.pitch}),_.bounds&&(this.resize(),this.fitBounds(_.bounds,s.extend({},_.fitBoundsOptions,{duration:0})))),this.resize(),_.attributionControl&&this.addControl(new bn({customAttribution:_.customAttribution})),this._logoControl=new Pm,this.addControl(this._logoControl,_.logoPosition),this.on("style.load",(()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)})),this.on("data",(u=>{this._update(u.dataType==="style"),this.fire(new s.Event(`${u.dataType}data`,u))})),this.on("dataloading",(u=>{this.fire(new s.Event(`${u.dataType}dataloading`,u))}))}_getMapId(){return this._mapId}addControl(_,u){if(u===void 0&&(u=_.getDefaultPosition?_.getDefaultPosition():"top-right"),!_||!_.onAdd)return this.fire(new s.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const m=_.onAdd(this);this._controls.push(_);const y=this._controlPositions[u];return u.indexOf("bottom")!==-1?y.insertBefore(m,y.firstChild):y.appendChild(m),this}removeControl(_){if(!_||!_.onRemove)return this.fire(new s.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const u=this._controls.indexOf(_);return u>-1&&this._controls.splice(u,1),_.onRemove(this),this}hasControl(_){return this._controls.indexOf(_)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(_){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const u=!this._moving;return u&&this.fire(new s.Event("movestart",_)).fire(new s.Event("move",_)),this.fire(new s.Event("resize",_)),u&&this.fire(new s.Event("moveend",_)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(_){return this.transform.setMaxBounds(s.LngLatBounds.convert(_)),this._update()}setMinZoom(_){if((_=_??-2)>=-2&&_<=this.transform.maxZoom)return this.transform.minZoom=_,this._update(),this.getZoom()<_?this.setZoom(_):this.fire(new s.Event("zoomstart")).fire(new s.Event("zoom")).fire(new s.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(_){if((_=_??22)>=this.transform.minZoom)return this.transform.maxZoom=_,this._update(),this.getZoom()>_?this.setZoom(_):this.fire(new s.Event("zoomstart")).fire(new s.Event("zoom")).fire(new s.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(_){if((_=_??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(_>=0&&_<=this.transform.maxPitch)return this.transform.minPitch=_,this._update(),this.getPitch()<_?this.setPitch(_):this.fire(new s.Event("pitchstart")).fire(new s.Event("pitch")).fire(new s.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(_){if((_=_??85)>85)throw new Error("maxPitch must be less than or equal to 85");if(_>=this.transform.minPitch)return this.transform.maxPitch=_,this._update(),this.getPitch()>_?this.setPitch(_):this.fire(new s.Event("pitchstart")).fire(new s.Event("pitch")).fire(new s.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(_){return this.transform.renderWorldCopies=_,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(_){return _==="auto"?s.window.navigator.language:Array.isArray(_)?_.length===0?void 0:_.map((u=>u==="auto"?s.window.navigator.language:u)):_}setLanguage(_){const u=this._parseLanguage(_);if(!this.style||u===this._language)return this;this._language=u,this.style._reloadSources();for(const m of this._controls)m._setLanguage&&m._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(_){return this.style&&_!==this._worldview?(this._worldview=_,this.style._reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return this.transform.projection.name==="globe"}setProjection(_){return this._lazyInitEmptyStyle(),_?typeof _=="string"&&(_={name:_}):_=null,this._useExplicitProjection=!!_,this._prioritizeAndUpdateProjection(_,this.style.stylesheet?this.style.stylesheet.projection:null)}_updateProjectionTransition(){if(this.getProjection().name!=="globe")return;const _=this.transform,u=_.projection.name;let m;u==="globe"&&_.zoom>=s.GLOBE_ZOOM_THRESHOLD_MAX?(_.setMercatorFromTransition(),m=!0):u==="mercator"&&_.zoom<s.GLOBE_ZOOM_THRESHOLD_MAX&&(_.setProjection({name:"globe"}),m=!0),m&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(_,u){return this._updateProjection(_||u||{name:"mercator"})}_updateProjection(_){let u;if(u=_.name==="globe"&&this.transform.zoom>=s.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(_),this.style.applyProjectionUpdate(),u){this.painter.clearBackgroundTiles();for(const m in this.style._sourceCaches)this.style._sourceCaches[m].clearTiles();this._update(!0),this._forceMarkerAndPopupUpdate(!0)}return this}project(_){return this.transform.locationPoint3D(s.LngLat.convert(_))}unproject(_){return this.transform.pointLocation3D(s.Point.convert(_))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(_,u,m){if(_==="mouseenter"||_==="mouseover"){let y=!1;const S=R=>{const O=u.filter((G=>this.getLayer(G))),U=O.length?this.queryRenderedFeatures(R.point,{layers:O}):[];U.length?y||(y=!0,m.call(this,new Es(_,this,R.originalEvent,{features:U}))):y=!1},C=()=>{y=!1};return{layers:new Set(u),listener:m,delegates:{mousemove:S,mouseout:C}}}if(_==="mouseleave"||_==="mouseout"){let y=!1;const S=R=>{const O=u.filter((U=>this.getLayer(U)));(O.length?this.queryRenderedFeatures(R.point,{layers:O}):[]).length?y=!0:y&&(y=!1,m.call(this,new Es(_,this,R.originalEvent)))},C=R=>{y&&(y=!1,m.call(this,new Es(_,this,R.originalEvent)))};return{layers:new Set(u),listener:m,delegates:{mousemove:S,mouseout:C}}}{const y=S=>{const C=u.filter((O=>this.getLayer(O))),R=C.length?this.queryRenderedFeatures(S.point,{layers:C}):[];R.length&&(S.features=R,m.call(this,S),delete S.features)};return{layers:new Set(u),listener:m,delegates:{[_]:y}}}}on(_,u,m){if(m===void 0)return super.on(_,u);Array.isArray(u)||(u=[u]);const y=this._createDelegatedListener(_,u,m);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[_]=this._delegatedListeners[_]||[],this._delegatedListeners[_].push(y);for(const S in y.delegates)this.on(S,y.delegates[S]);return this}once(_,u,m){if(m===void 0)return super.once(_,u);Array.isArray(u)||(u=[u]);const y=this._createDelegatedListener(_,u,m);for(const S in y.delegates)this.once(S,y.delegates[S]);return this}off(_,u,m){if(m===void 0)return super.off(_,u);u=new Set(Array.isArray(u)?u:[u]);const y=(C,R)=>{if(C.size!==R.size)return!1;for(const O of C)if(!R.has(O))return!1;return!0},S=this._delegatedListeners?this._delegatedListeners[_]:void 0;return S&&(C=>{for(let R=0;R<C.length;R++){const O=C[R];if(O.listener===m&&y(O.layers,u)){for(const U in O.delegates)this.off(U,O.delegates[U]);return C.splice(R,1),this}}})(S),this}queryRenderedFeatures(_,u){return this.style?(u!==void 0||_===void 0||_ instanceof s.Point||Array.isArray(_)||(u=_,_=void 0),this.style.queryRenderedFeatures(_=_||[[0,0],[this.transform.width,this.transform.height]],u=u||{},this.transform)):[]}querySourceFeatures(_,u){return this.style.querySourceFeatures(_,u)}isPointOnSurface(_){const{name:u}=this.transform.projection;return u!=="globe"&&u!=="mercator"&&s.warnOnce(`${u} projection does not support isPointOnSurface, this API may behave unexpectedly.`),this.transform.isPointOnSurface(s.Point.convert(_))}setStyle(_,u){return(u=s.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},u)).diff!==!1&&u.localIdeographFontFamily===this._localIdeographFontFamily&&u.localFontFamily===this._localFontFamily&&this.style&&_?(this._diffStyle(_,u),this):(this._localIdeographFontFamily=u.localIdeographFontFamily,this._localFontFamily=u.localFontFamily,this._updateStyle(_,u))}_getUIString(_){const u=this._locale[_];if(u==null)throw new Error(`Missing UI string '${_}'`);return u}_updateStyle(_,u){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),_&&(this.style=new Io(this,u||{}),this.style.setEventedParent(this,{style:this.style}),typeof _=="string"?this.style.loadURL(_):this.style.loadJSON(_)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new Io(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(_,u){if(typeof _=="string"){const m=this._requestManager.normalizeStyleURL(_),y=this._requestManager.transformRequest(m,s.ResourceType.Style);s.getJSON(y,((S,C)=>{S?this.fire(new s.ErrorEvent(S)):C&&this._updateDiff(C,u)}))}else typeof _=="object"&&this._updateDiff(_,u)}_updateDiff(_,u){try{this.style.setState(_)&&this._update(!0)}catch(m){s.warnOnce(`Unable to perform style diff: ${m.message||m.error||m}.  Rebuilding the style from scratch.`),this._updateStyle(_,u)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(s.warnOnce("There is no style added to the map."),!1)}addSource(_,u){return this._lazyInitEmptyStyle(),this.style.addSource(_,u),this._update(!0)}isSourceLoaded(_){return!!this.style&&this.style._isSourceCacheLoaded(_)}areTilesLoaded(){const _=this.style&&this.style._sourceCaches;for(const u in _){const m=_[u]._tiles;for(const y in m){const S=m[y];if(S.state!=="loaded"&&S.state!=="errored")return!1}}return!0}addSourceType(_,u,m){this._lazyInitEmptyStyle(),this.style.addSourceType(_,u,m)}removeSource(_){return this.style.removeSource(_),this._updateTerrain(),this._update(!0)}getSource(_){return this.style.getSource(_)}addImage(_,u,{pixelRatio:m=1,sdf:y=!1,stretchX:S,stretchY:C,content:R}={}){if(this._lazyInitEmptyStyle(),u instanceof s.window.HTMLImageElement||s.window.ImageBitmap&&u instanceof s.window.ImageBitmap){const{width:O,height:U,data:G}=s.exported.getImageData(u);this.style.addImage(_,{data:new s.RGBAImage({width:O,height:U},G),pixelRatio:m,stretchX:S,stretchY:C,content:R,sdf:y,version:0})}else if(u.width===void 0||u.height===void 0)this.fire(new s.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:O,height:U}=u,G=u;this.style.addImage(_,{data:new s.RGBAImage({width:O,height:U},new Uint8Array(G.data)),pixelRatio:m,stretchX:S,stretchY:C,content:R,sdf:y,version:0,userImage:G}),G.onAdd&&G.onAdd(this,_)}}updateImage(_,u){const m=this.style.getImage(_);if(!m)return void this.fire(new s.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const y=u instanceof s.window.HTMLImageElement||s.window.ImageBitmap&&u instanceof s.window.ImageBitmap?s.exported.getImageData(u):u,{width:S,height:C}=y;S!==void 0&&C!==void 0?S===m.data.width&&C===m.data.height?(m.data.replace(y.data,!(u instanceof s.window.HTMLImageElement||s.window.ImageBitmap&&u instanceof s.window.ImageBitmap)),this.style.updateImage(_,m)):this.fire(new s.ErrorEvent(new Error(`The width and height of the updated image (${S}, ${C})
                must be that same as the previous version of the image
                (${m.data.width}, ${m.data.height})`))):this.fire(new s.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(_){return _?!!this.style.getImage(_):(this.fire(new s.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(_){this.style.removeImage(_)}loadImage(_,u){s.getImage(this._requestManager.transformRequest(_,s.ResourceType.Image),((m,y)=>{u(m,y instanceof s.window.HTMLImageElement?s.exported.getImageData(y):y)}))}listImages(){return this.style.listImages()}addLayer(_,u){return this._lazyInitEmptyStyle(),this.style.addLayer(_,u),this._update(!0)}moveLayer(_,u){return this.style.moveLayer(_,u),this._update(!0)}removeLayer(_){return this.style.removeLayer(_),this._update(!0)}getLayer(_){return this.style.getLayer(_)}setLayerZoomRange(_,u,m){return this.style.setLayerZoomRange(_,u,m),this._update(!0)}setFilter(_,u,m={}){return this.style.setFilter(_,u,m),this._update(!0)}getFilter(_){return this.style.getFilter(_)}setPaintProperty(_,u,m,y={}){return this.style.setPaintProperty(_,u,m,y),this._update(!0)}getPaintProperty(_,u){return this.style.getPaintProperty(_,u)}setLayoutProperty(_,u,m,y={}){return this.style.setLayoutProperty(_,u,m,y),this._update(!0)}getLayoutProperty(_,u){return this.style.getLayoutProperty(_,u)}setLight(_,u={}){return this._lazyInitEmptyStyle(),this.style.setLight(_,u),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(_){return this._lazyInitEmptyStyle(),!_&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(_),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(_){return this._lazyInitEmptyStyle(),this.style.setFog(_),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(_){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(s.LngLat.convert(_),this.transform):0}setFeatureState(_,u){return this.style.setFeatureState(_,u),this._update()}removeFeatureState(_,u){return this.style.removeFeatureState(_,u),this._update()}getFeatureState(_){return this.style.getFeatureState(_)}_updateContainerDimensions(){if(!this._container)return;const _=this._container.getBoundingClientRect().width||400,u=this._container.getBoundingClientRect().height||300;let m,y,S,C=this._container;for(;C&&(!y||!S);){const R=s.window.getComputedStyle(C).transform;R&&R!=="none"&&(m=R.match(/matrix.*\((.+)\)/)[1].split(", "),m[0]&&m[0]!=="0"&&m[0]!=="1"&&(y=m[0]),m[3]&&m[3]!=="0"&&m[3]!=="1"&&(S=m[3])),C=C.parentElement}this._containerWidth=y?Math.abs(_/y):_,this._containerHeight=S?Math.abs(u/S):u}_detectMissingCSS(){s.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&s.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const _=this._container;_.classList.add("mapboxgl-map"),(this._missingCSSCanary=k("div","mapboxgl-canary",_)).style.visibility="hidden",this._detectMissingCSS();const u=this._canvasContainer=k("div","mapboxgl-canvas-container",_);this._interactive&&u.classList.add("mapboxgl-interactive"),this._canvas=k("canvas","mapboxgl-canvas",u),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const m=this._controlContainer=k("div","mapboxgl-control-container",_),y=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((S=>{y[S]=k("div",`mapboxgl-ctrl-${S}`,m)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(_,u){const m=s.exported.devicePixelRatio||1;this._canvas.width=m*Math.ceil(_),this._canvas.height=m*Math.ceil(u),this._canvas.style.width=`${_}px`,this._canvas.style.height=`${u}px`}_addMarker(_){this._markers.push(_)}_removeMarker(_){const u=this._markers.indexOf(_);u!==-1&&this._markers.splice(u,1)}_addPopup(_){this._popups.push(_)}_removePopup(_){const u=this._popups.indexOf(_);u!==-1&&this._popups.splice(u,1)}_setupPainter(){const _=s.extend({},v.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),u=this._useWebGL2&&this._canvas.getContext("webgl2",_),m=u||this._canvas.getContext("webgl",_)||this._canvas.getContext("experimental-webgl",_);m?(this._useWebGL2&&!u&&s.warnOnce("Failed to create WebGL 2 context. Using WebGL 1."),s.storeAuthState(m,!0),this.painter=new bu(m,this.transform,!!u),this.on("data",(y=>{y.dataType==="source"&&this.painter.setTileLoadedFlag(!0)})),s.exported$1.testSupport(m)):this.fire(new s.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(_){_.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new s.Event("webglcontextlost",{originalEvent:_}))}_contextRestored(_){this._setupPainter(),this.resize(),this._update(),this.fire(new s.Event("webglcontextrestored",{originalEvent:_}))}_onMapScroll(_){if(_.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(_){return this.style?(this._styleDirty=this._styleDirty||_,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(_){return this._update(),this._renderTaskQueue.add(_)}_cancelRenderFrame(_){this._renderTaskQueue.remove(_)}_requestDomTask(_){!this.loaded()||this.loaded()&&!this.isMoving()?_():this._domRenderTaskQueue.add(_)}_render(_){let u;const m=this.painter.context.extTimerQuery,y=s.exported.now();if(this.listens("gpu-timing-frame")&&(u=m.createQueryEXT(),m.beginQueryEXT(m.TIME_ELAPSED_EXT,u)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],s.window.performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],s.window.performance.now())),this._renderTaskQueue.run(_),this._domRenderTaskQueue.run(_),this._removed)return;this._updateProjectionTransition();const S=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const O=this.transform.zoom,U=this.transform.pitch,G=s.exported.now(),q=new s.EvaluationParameters(O,{now:G,fadeDuration:S,pitch:U,transition:this.style.getTransition()});this.style.update(q)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let C=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),C=this._updateAverageElevation(y),this.style._updateSources(this.transform),this._forceMarkerAndPopupUpdate()):C=this._updateAverageElevation(y),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,S,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:S,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new s.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new s.Event("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),u){const O=s.exported.now()-y;m.endQueryEXT(m.TIME_ELAPSED_EXT,u),setTimeout((()=>{const U=m.getQueryObjectEXT(u,m.QUERY_RESULT_EXT)/1e6;m.deleteQueryEXT(u),this.fire(new s.Event("gpu-timing-frame",{cpuTime:O,gpuTime:U})),s.window.performance.mark("frame-gpu",{startTime:y,detail:{gpuTime:U}})}),50)}if(this.listens("gpu-timing-layer")){const O=this.painter.collectGpuTimers();setTimeout((()=>{const U=this.painter.queryGpuTimers(O);this.fire(new s.Event("gpu-timing-layer",{layerTimes:U}))}),50)}if(this.listens("gpu-timing-deferred-render")){const O=this.painter.collectDeferredRenderGpuQueries();setTimeout((()=>{const U=this.painter.queryGpuTimeDeferredRender(O);this.fire(new s.Event("gpu-timing-deferred-render",{gpuTime:U}))}),50)}const R=this._sourcesDirty||this._styleDirty||this._placementDirty||C;if(R||this._repaint)this.triggerRepaint();else{const O=!this.isMoving()&&this.loaded();if(O&&(C=this._updateAverageElevation(y,!0)),C)this.triggerRepaint();else if(this._triggerFrame(!1),O&&(this.fire(new s.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const U=this._calculateSpeedIndex();this.fire(new s.Event("speedindexcompleted",{speedIndex:U})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||R||(this._fullyLoaded=!0,s.LivePerformanceUtils.mark(s.PerformanceMarkers.fullLoad),this._performanceMetricsCollection&&s.postPerformanceEvent(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(_){for(const u of this._markers)_&&!this.getRenderWorldCopies()&&(u._lngLat=u._lngLat.wrap()),u._update();for(const u of this._popups)!_||this.getRenderWorldCopies()||u._trackPointer||(u._lngLat=u._lngLat.wrap()),u._update()}_updateAverageElevation(_,u=!1){const m=y=>(this.transform.averageElevation=y,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&m(0);if((u||_-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(_)){const y=this.transform.averageElevation;let S=this.transform.sampleAverageElevation(),C=!1;this.transform.elevation&&(C=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(S)?S=0:this._averageElevationLastSampledAt=_;const R=Math.abs(y-S);if(R>1){if(this._isInitialLoad||C)return this._averageElevation.jumpTo(S),m(S);this._averageElevation.easeTo(S,_,300)}else if(R>1e-4)return this._averageElevation.jumpTo(S),m(S)}return!!this._averageElevation.isEasing(_)&&m(this._averageElevation.getValue(_))}_authenticate(){s.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,(_=>{if(_&&(_.message===s.AUTH_ERR_MSG||_.status===401)){const u=this.painter.context.gl;s.storeAuthState(u,!1),this._logoControl instanceof Pm&&this._logoControl._updateLogo(),u&&u.clear(u.DEPTH_BUFFER_BIT|u.COLOR_BUFFER_BIT|u.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new s.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}})),s.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,(()=>{}))}_updateTerrain(){const _=this._isDragging();this.painter.updateTerrain(this.style,_)}_calculateSpeedIndex(){const _=this.painter.canvasCopy(),u=this.painter.getCanvasCopiesAndTimestamps();u.timeStamps.push(performance.now());const m=this.painter.context.gl,y=m.createFramebuffer();function S(C){m.framebufferTexture2D(m.FRAMEBUFFER,m.COLOR_ATTACHMENT0,m.TEXTURE_2D,C,0);const R=new Uint8Array(m.drawingBufferWidth*m.drawingBufferHeight*4);return m.readPixels(0,0,m.drawingBufferWidth,m.drawingBufferHeight,m.RGBA,m.UNSIGNED_BYTE,R),R}return m.bindFramebuffer(m.FRAMEBUFFER,y),this._canvasPixelComparison(S(_),u.canvasCopies.map(S),u.timeStamps)}_canvasPixelComparison(_,u,m){let y=m[1]-m[0];const S=_.length/4;for(let C=0;C<u.length;C++){const R=u[C];let O=0;for(let U=0;U<R.length;U+=4)R[U]===_[U]&&R[U+1]===_[U+1]&&R[U+2]===_[U+2]&&R[U+3]===_[U+3]&&(O+=1);y+=(m[C+2]-m[C+1])*(1-O/S)}return y}remove(){this._hash&&this._hash.remove();for(const u of this._controls)u.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),s.window!==void 0&&(s.window.removeEventListener("resize",this._onWindowResize,!1),s.window.removeEventListener("orientationchange",this._onWindowResize,!1),s.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),s.window.removeEventListener("online",this._onWindowOnline,!1),s.window.removeEventListener("visibilitychange",this._onVisibilityChange,!1));const _=this.painter.context.gl.getExtension("WEBGL_lose_context");_&&_.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),s.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new s.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(_){this._renderNextFrame=this._renderNextFrame||_,this.style&&!this._frame&&(this._frame=s.exported.frame((u=>{const m=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,m&&this._render(u)})))}_preloadTiles(_){const u=this.style?Object.values(this.style._sourceCaches):[];return s.asyncAll(u,((m,y)=>m._preloadTiles(_,y)),(()=>{this.triggerRepaint()})),this}_onWindowOnline(){this._update()}_onWindowResize(_){this._trackResize&&this.resize({originalEvent:_})._update()}_onVisibilityChange(){s.window.document.visibilityState==="hidden"&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(_){this._showTileBoundaries!==_&&(this._showTileBoundaries=_,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(_){this._showTerrainWireframe!==_&&(this._showTerrainWireframe=_,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(_){this._speedIndexTiming!==_&&(this._speedIndexTiming=_,this._update())}get showPadding(){return!!this._showPadding}set showPadding(_){this._showPadding!==_&&(this._showPadding=_,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(_){this._showCollisionBoxes!==_&&(this._showCollisionBoxes=_,_?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(_){this._showOverdrawInspector!==_&&(this._showOverdrawInspector=_,this._update())}get repaint(){return!!this._repaint}set repaint(_){this._repaint!==_&&(this._repaint=_,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(_){this._vertices=_,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(_){this._showTileAABBs!==_&&(this._showTileAABBs=_,_&&this._update())}_setCacheLimits(_,u){s.setCacheLimits(_,u)}get version(){return s.version}},NavigationControl:class{constructor(_){this.options=s.extend({},kv,_),this._container=k("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",(u=>u.preventDefault())),this.options.showZoom&&(s.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",(u=>{this._map&&this._map.zoomIn({},{originalEvent:u})})),k("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",(u=>{this._map&&this._map.zoomOut({},{originalEvent:u})})),k("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(s.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",(u=>{const m=this._map;m&&(this.options.visualizePitch?m.resetNorthPitch({},{originalEvent:u}):m.resetNorth({},{originalEvent:u}))})),this._compassIcon=k("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const _=this._map;if(!_)return;const u=_.getZoom(),m=u===_.getMaxZoom(),y=u===_.getMinZoom();this._zoomInButton.disabled=m,this._zoomOutButton.disabled=y,this._zoomInButton.setAttribute("aria-disabled",m.toString()),this._zoomOutButton.setAttribute("aria-disabled",y.toString())}_rotateCompassArrow(){const _=this._map;if(!_)return;const u=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(_.transform.pitch*(Math.PI/180)),.5)}) rotateX(${_.transform.pitch}deg) rotateZ(${_.transform.angle*(180/Math.PI)}deg)`:`rotate(${_.transform.angle*(180/Math.PI)}deg)`;_._requestDomTask((()=>{this._compassIcon&&(this._compassIcon.style.transform=u)}))}onAdd(_){return this._map=_,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),_.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&_.on("pitch",this._rotateCompassArrow),_.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Md(_,this._compass,this.options.visualizePitch)),this._container}onRemove(){const _=this._map;_&&(this._container.remove(),this.options.showZoom&&_.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&_.off("pitch",this._rotateCompassArrow),_.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(_,u){const m=k("button",_,this._container);return m.type="button",m.addEventListener("click",u),m}_setButtonTitle(_,u){if(!this._map)return;const m=this._map._getUIString(`NavigationControl.${u}`);_.setAttribute("aria-label",m),_.firstElementChild&&_.firstElementChild.setAttribute("title",m)}},GeolocateControl:class extends s.Evented{constructor(_){super(),this.options=s.extend({geolocation:s.window.navigator.geolocation},pe,_),s.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=Tu(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(_){return this._map=_,this._container=k("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(_){const u=(m=!!this.options.geolocation)=>{this._supportsGeolocation=m,_(m)};this._supportsGeolocation!==void 0?_(this._supportsGeolocation):s.window.navigator.permissions!==void 0?s.window.navigator.permissions.query({name:"geolocation"}).then((m=>u(m.state!=="denied"))).catch((()=>u())):u()}_isOutOfMapMaxBounds(_){const u=this._map.getMaxBounds(),m=_.coords;return!!u&&(m.longitude<u.getWest()||m.longitude>u.getEast()||m.latitude<u.getSouth()||m.latitude>u.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(_){if(this._map){if(this._isOutOfMapMaxBounds(_))return this._setErrorState(),this.fire(new s.Event("outofmaxbounds",_)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=_,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(_),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(_),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new s.Event("geolocate",_)),this._finish()}}_updateCamera(_){const u=new s.LngLat(_.coords.longitude,_.coords.latitude),m=_.coords.accuracy,y=this._map.getBearing(),S=s.extend({bearing:y},this.options.fitBoundsOptions);this._map.fitBounds(u.toBounds(m),S,{geolocateSource:!0})}_updateMarker(_){if(_){const u=new s.LngLat(_.coords.longitude,_.coords.latitude);this._accuracyCircleMarker.setLngLat(u).addTo(this._map),this._userLocationDotMarker.setLngLat(u).addTo(this._map),this._accuracy=_.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const _=this._map.transform,u=s.mercatorZfromAltitude(1,_._center.lat)*_.worldSize,m=Math.ceil(2*this._accuracy*u);this._circleElement.style.width=`${m}px`,this._circleElement.style.height=`${m}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(_){if(this._map){if(this.options.trackUserLocation)if(_.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",u),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",u),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(_.code===3&&this._noTimeout)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new s.Event("error",_)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(_){if(this._map!==void 0){if(this._container.addEventListener("contextmenu",(u=>u.preventDefault())),this._geolocateButton=k("button","mapboxgl-ctrl-geolocate",this._container),k("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",_===!1){s.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",u),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",u)}else{const u=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",u),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",u)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=k("div","mapboxgl-user-location"),this._dotElement.appendChild(k("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(k("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new mn({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=k("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new mn({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(u=>{u.geolocateSource||this._watchState!=="ACTIVE_LOCK"||u.originalEvent&&u.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new s.Event("trackuserlocationend")))}))}}_onDeviceOrientation(_){this._userLocationDotMarker&&(_.webkitCompassHeading?this._heading=_.webkitCompassHeading:_.absolute===!0&&(this._heading=-1*_.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return s.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new s.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new s.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new s.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let _;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(_={maximumAge:6e5,timeout:0},this._noTimeout=!0):(_=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,_),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const _=()=>{s.window.addEventListener("ondeviceorientationabsolute"in s.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};s.window.DeviceMotionEvent!==void 0&&typeof s.window.DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then((u=>{u==="granted"&&_()})).catch(console.error):_()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),s.window.removeEventListener("deviceorientation",this._onDeviceOrientation),s.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:bn,ScaleControl:class{constructor(_){this.options=s.extend({},V,_),this._isNumberFormatSupported=(function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch{return!1}})(),s.bindAll(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const _=this.options.maxWidth||100,u=this._map,m=u._containerHeight/2,y=u._containerWidth/2-_/2,S=u.unproject([y,m]),C=u.unproject([y+_,m]),R=S.distanceTo(C);if(this.options.unit==="imperial"){const O=3.2808*R;O>5280?this._setScale(_,O/5280,"mile"):this._setScale(_,O,"foot")}else this.options.unit==="nautical"?this._setScale(_,R/1852,"nautical-mile"):R>=1e3?this._setScale(_,R/1e3,"kilometer"):this._setScale(_,R,"meter")}_setScale(_,u,m){this._map._requestDomTask((()=>{const y=(function(C){const R=Math.pow(10,`${Math.floor(C)}`.length-1);let O=C/R;return O=O>=10?10:O>=5?5:O>=3?3:O>=2?2:O>=1?1:(function(U){const G=Math.pow(10,Math.ceil(-Math.log(U)/Math.LN10));return Math.round(U*G)/G})(O),R*O})(u),S=y/u;this._container.innerHTML=this._isNumberFormatSupported&&m!=="nautical-mile"?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:m}).format(y):`${y}&nbsp;${se[m]}`,this._container.style.width=_*S+"px"}))}onAdd(_){return this._map=_,this._language=_.getLanguage(),this._container=k("div","mapboxgl-ctrl mapboxgl-ctrl-scale",_.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(_){this._language=_,this._update()}setUnit(_){this.options.unit=_,this._update()}},FullscreenControl:class{constructor(_){this._fullscreen=!1,_&&_.container&&(_.container instanceof s.window.HTMLElement?this._container=_.container:s.warnOnce("Full screen control 'container' must be a DOM element.")),s.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in s.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in s.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(_){return this._map=_,this._container||(this._container=this._map.getContainer()),this._controlContainer=k("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",s.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,s.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!s.window.document.fullscreenEnabled&&!s.window.document.webkitFullscreenEnabled)}_setupUI(){const _=this._fullscreenButton=k("button","mapboxgl-ctrl-fullscreen",this._controlContainer);k("span","mapboxgl-ctrl-icon",_).setAttribute("aria-hidden","true"),_.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),s.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const _=this._getTitle();this._fullscreenButton.setAttribute("aria-label",_),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",_)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(s.window.document.fullscreenElement||s.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?s.window.document.exitFullscreen?s.window.document.exitFullscreen():s.window.document.webkitCancelFullScreen&&s.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends s.Evented{constructor(_){super(),this.options=s.extend(Object.create(Dm),_),s.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(_&&_.className?_.className.trim().split(/\s+/):[])}addTo(_){return this._map&&this.remove(),this._map=_,this.options.closeOnClick&&_.on("preclick",this._onClose),this.options.closeOnMove&&_.on("move",this._onClose),_.on("remove",this.remove),this._update(),_._addPopup(this),this._focusFirstElement(),this._trackPointer?(_.on("mousemove",this._onMouseEvent),_.on("mouseup",this._onMouseEvent),_._canvasContainer.classList.add("mapboxgl-track-pointer")):_.on("move",this._update),this.fire(new s.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const _=this._map;return _&&(_.off("move",this._update),_.off("move",this._onClose),_.off("preclick",this._onClose),_.off("click",this._onClose),_.off("remove",this.remove),_.off("mousemove",this._onMouseEvent),_.off("mouseup",this._onMouseEvent),_.off("drag",this._onMouseEvent),_._canvasContainer&&_._canvasContainer.classList.remove("mapboxgl-track-pointer"),_._removePopup(this),this._map=void 0),this.fire(new s.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(_){this._lngLat=s.LngLat.convert(_),this._pos=null,this._trackPointer=!1,this._update();const u=this._map;return u&&(u.on("move",this._update),u.off("mousemove",this._onMouseEvent),u._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const _=this._map;return _&&(_.off("move",this._update),_.on("mousemove",this._onMouseEvent),_.on("drag",this._onMouseEvent),_._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(_){return this.setDOMContent(s.window.document.createTextNode(_))}setHTML(_){const u=s.window.document.createDocumentFragment(),m=s.window.document.createElement("body");let y;for(m.innerHTML=_;y=m.firstChild,y;)u.appendChild(y);return this.setDOMContent(u)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(_){return this.options.maxWidth=_,this._update(),this}setDOMContent(_){let u=this._content;if(u)for(;u.hasChildNodes();)u.firstChild&&u.removeChild(u.firstChild);else u=this._content=k("div","mapboxgl-popup-content",this._container||void 0);if(u.appendChild(_),this.options.closeButton){const m=this._closeButton=k("button","mapboxgl-popup-close-button",u);m.type="button",m.setAttribute("aria-label","Close popup"),m.setAttribute("aria-hidden","true"),m.innerHTML="&#215;",m.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(_){return this._classList.add(_),this._updateClassList(),this}removeClassName(_){return this._classList.delete(_),this._updateClassList(),this}setOffset(_){return this.options.offset=_,this._update(),this}toggleClassName(_){let u;return this._classList.delete(_)?u=!1:(this._classList.add(_),u=!0),this._updateClassList(),u}_onMouseEvent(_){this._update(_.point)}_getAnchor(_){if(this.options.anchor)return this.options.anchor;const u=this._map,m=this._container,y=this._pos;if(!u||!m||!y)return"bottom";const S=m.offsetWidth,C=m.offsetHeight,R=y.x<S/2,O=y.x>u.transform.width-S/2;if(y.y+_<C)return R?"top-left":O?"top-right":"top";if(y.y>u.transform.height-C){if(R)return"bottom-left";if(O)return"bottom-right"}return R?"left":O?"right":"bottom"}_updateClassList(){const _=this._container;if(!_)return;const u=[...this._classList];u.push("mapboxgl-popup"),this._anchor&&u.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&u.push("mapboxgl-popup-track-pointer"),_.className=u.join(" ")}_update(_){const u=this._map,m=this._content;if(!u||!this._lngLat&&!this._trackPointer||!m)return;let y=this._container;if(y||(y=this._container=k("div","mapboxgl-popup",u.getContainer()),this._tip=k("div","mapboxgl-popup-tip",y),y.appendChild(m)),this.options.maxWidth&&y.style.maxWidth!==this.options.maxWidth&&(y.style.maxWidth=this.options.maxWidth),u.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Su(this._lngLat,this._pos,u.transform)),!this._trackPointer||_){const S=this._pos=this._trackPointer&&_?_:u.project(this._lngLat),C=Rm(this.options.offset),R=this._anchor=this._getAnchor(C.y),O=Rm(this.options.offset,R),U=S.add(O).round();u._requestDomTask((()=>{this._container&&R&&(this._container.style.transform=`${Gc[R]} translate(${U.x}px,${U.y}px)`)}))}if(!this._marker&&u._showingGlobe()){const S=s.isLngLatBehindGlobe(u.transform,this._lngLat)?0:1;this._setOpacity(S)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const _=this._container.querySelector(Cv);_&&_.focus()}_onClose(){this.remove()}_setOpacity(_){this._container&&(this._container.style.opacity=`${_}`),this._content&&(this._content.style.pointerEvents=_?"auto":"none")}},Marker:mn,Style:Io,LngLat:s.LngLat,LngLatBounds:s.LngLatBounds,Point:s.Point,MercatorCoordinate:s.MercatorCoordinate,FreeCameraOptions:gl,Evented:s.Evented,config:s.config,prewarm:function(){$r().acquire(Uo)},clearPrewarmedResources:function(){const _=Dr;_&&(_.isPreloaded()&&_.numActive()===1?(_.release(Uo),Dr=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return s.config.ACCESS_TOKEN},set accessToken(_){s.config.ACCESS_TOKEN=_},get baseApiUrl(){return s.config.API_URL},set baseApiUrl(_){s.config.API_URL=_},get workerCount(){return ts.workerCount},set workerCount(_){ts.workerCount=_},get maxParallelImageRequests(){return s.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(_){s.config.MAX_PARALLEL_IMAGE_REQUESTS=_},clearStorage(_){s.clearTileCache(_)},workerUrl:"",workerClass:null,setNow:s.exported.setNow,restoreNow:s.exported.restoreNow};return ke}));var h=a;return h}))})(lw)),lw.exports}var G2=H2();const fp=w3(G2);function ra(e,t){let n;function i(){n=P_(),n.run(()=>t.length?t(()=>{n?.stop(),i()}):t())}Ht(e,r=>{r&&!n?i():r||(n?.stop(),n=void 0)},{immediate:!0}),io(()=>{n?.stop()})}function kN(e,t){t=Array.isArray(t)?t.slice(0,-1).map(n=>`'${n}'`).join(", ")+` or '${t.at(-1)}'`:`'${t}'`}const Gi=typeof window<"u",KI=Gi&&"IntersectionObserver"in window,q2=Gi&&("ontouchstart"in window||window.navigator.maxTouchPoints>0),NL=Gi&&"EyeDropper"in window,XI=Gi&&"matchMedia"in window&&typeof window.matchMedia=="function",nd=()=>XI&&window.matchMedia("(prefers-reduced-motion: reduce)").matches;function UL(e,t,n){K2(e,t),t.set(e,n)}function K2(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function $L(e,t,n){return e.set(IN(e,t),n),n}function jd(e,t){return e.get(IN(e,t))}function IN(e,t,n){if(typeof e=="function"?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}function AN(e,t,n){const i=t.length-1;if(i<0)return e===void 0?n:e;for(let r=0;r<i;r++){if(e==null)return n;e=e[t[r]]}return e==null||e[t[i]]===void 0?n:e[t[i]]}function Lp(e,t,n){return e==null||!t||typeof t!="string"?n:e[t]!==void 0?e[t]:(t=t.replace(/\[(\w+)\]/g,".$1"),t=t.replace(/^\./,""),AN(e,t.split("."),n))}function Ps(e,t,n){if(t===!0)return e===void 0?n:e;if(t==null||typeof t=="boolean")return n;if(e!==Object(e)){if(typeof t!="function")return n;const r=t(e,n);return typeof r>"u"?n:r}if(typeof t=="string")return Lp(e,t,n);if(Array.isArray(t))return AN(e,t,n);if(typeof t!="function")return n;const i=t(e,n);return typeof i>"u"?n:i}function Ql(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return Array.from({length:e},(n,i)=>t+i)}function dn(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"px";if(e==null||e==="")return;const n=Number(e);return isNaN(n)?String(e):isFinite(n)?`${n}${t}`:void 0}function bb(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}function UC(e){let t;return e!==null&&typeof e=="object"&&((t=Object.getPrototypeOf(e))===Object.prototype||t===null)}function ZI(e){if(e&&"$el"in e){const t=e.$el;return t?.nodeType===Node.TEXT_NODE?t.nextElementSibling:t}return e}const $C=Object.freeze({enter:"Enter",tab:"Tab",delete:"Delete",esc:"Escape",space:"Space",up:"ArrowUp",down:"ArrowDown",left:"ArrowLeft",right:"ArrowRight",end:"End",home:"Home",del:"Delete",backspace:"Backspace",insert:"Insert",pageup:"PageUp",pagedown:"PageDown",shift:"Shift"});function PN(e){return Object.keys(e)}function pp(e,t){return t.every(n=>e.hasOwnProperty(n))}function Ml(e,t){const n={};for(const i of t)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}function jC(e,t,n){const i=Object.create(null),r=Object.create(null);for(const a in e)t.some(l=>l instanceof RegExp?l.test(a):l===a)?i[a]=e[a]:r[a]=e[a];return[i,r]}function ur(e,t){const n={...e};return t.forEach(i=>delete n[i]),n}const MN=/^on[^a-z]/,YI=e=>MN.test(e),X2=["onAfterscriptexecute","onAnimationcancel","onAnimationend","onAnimationiteration","onAnimationstart","onAuxclick","onBeforeinput","onBeforescriptexecute","onChange","onClick","onCompositionend","onCompositionstart","onCompositionupdate","onContextmenu","onCopy","onCut","onDblclick","onFocusin","onFocusout","onFullscreenchange","onFullscreenerror","onGesturechange","onGestureend","onGesturestart","onGotpointercapture","onInput","onKeydown","onKeypress","onKeyup","onLostpointercapture","onMousedown","onMousemove","onMouseout","onMouseover","onMouseup","onMousewheel","onPaste","onPointercancel","onPointerdown","onPointerenter","onPointerleave","onPointermove","onPointerout","onPointerover","onPointerup","onReset","onSelect","onSubmit","onTouchcancel","onTouchend","onTouchmove","onTouchstart","onTransitioncancel","onTransitionend","onTransitionrun","onTransitionstart","onWheel"],Z2=["ArrowUp","ArrowDown","ArrowRight","ArrowLeft","Enter","Escape","Tab"," "];function Y2(e){return e.isComposing&&Z2.includes(e.key)}function rm(e){const[t,n]=jC(e,[MN]),i=ur(t,X2),[r,a]=jC(n,["class","style","id",/^data-/]);return Object.assign(r,t),Object.assign(a,i),[r,a]}function Gr(e){return e==null?[]:Array.isArray(e)?e:[e]}function DN(e,t){let n=0;const i=function(){for(var r=arguments.length,a=new Array(r),l=0;l<r;l++)a[l]=arguments[l];clearTimeout(n),n=setTimeout(()=>e(...a),Si(t))};return i.clear=()=>{clearTimeout(n)},i.immediate=e,i}function Sr(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;return Math.max(t,Math.min(n,e))}function jL(e){const t=e.toString().trim();return t.includes(".")?t.length-t.indexOf(".")-1:0}function WL(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"0";return e+n.repeat(Math.max(0,t-e.length))}function HL(e,t){return(arguments.length>2&&arguments[2]!==void 0?arguments[2]:"0").repeat(Math.max(0,t-e.length))+e}function J2(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const n=[];let i=0;for(;i<e.length;)n.push(e.substr(i,t)),i+=t;return n}function GL(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;if(e<t)return`${e} B`;const n=t===1024?["Ki","Mi","Gi"]:["k","M","G"];let i=-1;for(;Math.abs(e)>=t&&i<n.length-1;)e/=t,++i;return`${e.toFixed(1)} ${n[i]}B`}function La(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const i={};for(const r in e)i[r]=e[r];for(const r in t){const a=e[r],l=t[r];if(UC(a)&&UC(l)){i[r]=La(a,l,n);continue}if(n&&Array.isArray(a)&&Array.isArray(l)){i[r]=n(a,l);continue}i[r]=l}return i}function RN(e){return e.map(t=>t.type===sn?RN(t.children):t).flat()}function Sp(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";if(Sp.cache.has(e))return Sp.cache.get(e);const t=e.replace(/[^a-z]/gi,"-").replace(/\B([A-Z])/g,"-$1").toLowerCase();return Sp.cache.set(e,t),t}Sp.cache=new Map;function m_(e,t){if(!t||typeof t!="object")return[];if(Array.isArray(t))return t.map(n=>m_(e,n)).flat(1);if(t.suspense)return m_(e,t.ssContent);if(Array.isArray(t.children))return t.children.map(n=>m_(e,n)).flat(1);if(t.component){if(Object.getOwnPropertySymbols(t.component.provides).includes(e))return[t.component];if(t.component.subTree)return m_(e,t.component.subTree).flat(1)}return[]}var e_=new WeakMap,Qm=new WeakMap;class LN{constructor(t){UL(this,e_,[]),UL(this,Qm,0),this.size=t}get isFull(){return jd(e_,this).length===this.size}push(t){jd(e_,this)[jd(Qm,this)]=t,$L(Qm,this,(jd(Qm,this)+1)%this.size)}values(){return jd(e_,this).slice(jd(Qm,this)).concat(jd(e_,this).slice(0,jd(Qm,this)))}clear(){jd(e_,this).length=0,$L(Qm,this,0)}}function Q2(e){return"touches"in e?{clientX:e.touches[0].clientX,clientY:e.touches[0].clientY}:{clientX:e.clientX,clientY:e.clientY}}function JI(e){const t=to({});zr(()=>{const i=e();for(const r in i)t[r]=i[r]},{flush:"sync"});const n={};for(const i in t)n[i]=Ue(()=>t[i]);return n}function Hw(e,t){return e.includes(t)}function ON(e){return e[2].toLowerCase()+e.slice(3)}const Vo=()=>[Function,Array];function qL(e,t){return t="on"+ld(t),!!(e[t]||e[`${t}Once`]||e[`${t}Capture`]||e[`${t}OnceCapture`]||e[`${t}CaptureOnce`])}function s0(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(Array.isArray(e))for(const r of e)r(...n);else typeof e=="function"&&e(...n)}function F_(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const n=["button","[href]",'input:not([type="hidden"])',"select","textarea","details:not(:has(> summary))","details > summary","[tabindex]",'[contenteditable]:not([contenteditable="false"])',"audio[controls]","video[controls]"].map(r=>`${r}${t?':not([tabindex="-1"])':""}:not([disabled], [inert])`).join(", ");let i;try{i=[...e.querySelectorAll(n)]}catch{return[]}return i.filter(r=>!r.closest("[inert]")).filter(r=>!!r.offsetParent||r.getClientRects().length>0).filter(r=>!r.parentElement?.closest("details:not([open])")||r.tagName==="SUMMARY"&&r.parentElement?.tagName==="DETAILS")}function VN(e,t,n){let i,r=e.indexOf(document.activeElement);const a=t==="next"?1:-1;do r+=a,i=e[r];while((!i||i.offsetParent==null||!(n?.(i)??!0))&&r<e.length&&r>=0);return i}function Ep(e,t){const n=F_(e);if(t==null)(e===document.activeElement||!e.contains(document.activeElement))&&n[0]?.focus();else if(t==="first")n[0]?.focus();else if(t==="last")n.at(-1)?.focus();else if(typeof t=="number")n[t]?.focus();else{const i=VN(n,t);i?i.focus():Ep(e,t==="next"?"first":"last")}}function Cx(e){return e==null||typeof e=="string"&&e.trim()===""}function BN(){}function z_(e,t){if(!(Gi&&typeof CSS<"u"&&typeof CSS.supports<"u"&&CSS.supports(`selector(${t})`)))return null;try{return!!e&&e.matches(t)}catch{return null}}function X1(e){return e.some(t=>db(t)?t.type===Ma?!1:t.type!==sn||X1(t.children):!0)?e:null}function kx(e,t,n){return e?.(t)??n?.(t)}function eK(e,t){if(!Gi||e===0)return t(),()=>{};const n=window.setTimeout(t,e);return()=>window.clearTimeout(n)}function tK(e,t){const n=e.clientX,i=e.clientY,r=t.getBoundingClientRect(),a=r.left,l=r.top,h=r.right,s=r.bottom;return n>=a&&n<=h&&i>=l&&i<=s}function Gw(){const e=Xt(),t=n=>{e.value=n};return Object.defineProperty(t,"value",{enumerable:!0,get:()=>e.value,set:n=>e.value=n}),Object.defineProperty(t,"el",{enumerable:!0,get:()=>ZI(e.value)}),t}function N_(e){const t=e.key.length===1,n=!e.ctrlKey&&!e.metaKey&&!e.altKey;return t&&n}function jf(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="bigint"}function qw(e){return"\\^$*+?.()|{}[]".includes(e)?`\\${e}`:e}function nK(e,t,n){const i=new RegExp(`[\\d\\-${qw(n)}]`),r=e.split("").filter(l=>i.test(l)).filter((l,h,s)=>h===0&&/[-]/.test(l)||l===n&&h===s.indexOf(l)||/\d/.test(l)).join("");if(t===0)return r.split(n)[0];const a=new RegExp(`${qw(n)}\\d`);if(t!==null&&a.test(r)){const l=r.split(n);return[l[0],l[1].substring(0,t)].join(n)}return r}function iK(e){const t={};for(const n in e)t[rl(n)]=e[n];return t}function rK(e){const t=["checked","disabled"];return Object.fromEntries(Object.entries(e).filter(n=>{let[i,r]=n;return t.includes(i)?!!r:r!==void 0}))}function KL(e){const t=n=>Array.isArray(n)?n.map(i=>t(i)):Rs(n)||yp(n)||z1(n)?t(Nn(n)):UC(n)?Object.keys(n).reduce((i,r)=>(i[r]=t(n[r]),i),{}):n;return t(e)}const FN=["top","bottom"],sK=["start","end","left","right"];function WC(e,t){let[n,i]=e.split(" ");return i||(i=Hw(FN,n)?"start":Hw(sK,n)?"top":"center"),{side:HC(n,t),align:HC(i,t)}}function HC(e,t){return e==="start"?t?"right":"left":e==="end"?t?"left":"right":e}function AE(e){return{side:{center:"center",top:"bottom",bottom:"top",left:"right",right:"left"}[e.side],align:e.align}}function PE(e){return{side:e.side,align:{center:"center",top:"bottom",bottom:"top",left:"right",right:"left"}[e.align]}}function XL(e){return{side:e.align,align:e.side}}function ZL(e){return Hw(FN,e.side)?"y":"x"}class Dc{constructor(t){const n=document.body.currentCSSZoom??1,i=t instanceof DOMRect?1+(1-n)/n:1,{x:r,y:a,width:l,height:h}=t;this.x=r*i,this.y=a*i,this.width=l*i,this.height=h*i}get top(){return this.y}get bottom(){return this.y+this.height}get left(){return this.x}get right(){return this.x+this.width}}function YL(e,t){return{x:{before:Math.max(0,t.left-e.left),after:Math.max(0,e.right-t.right)},y:{before:Math.max(0,t.top-e.top),after:Math.max(0,e.bottom-t.bottom)}}}function zN(e){if(Array.isArray(e)){const t=document.body.currentCSSZoom??1,n=1+(1-t)/t;return new Dc({x:e[0]*n,y:e[1]*n,width:0*n,height:0*n})}else return new Dc(e.getBoundingClientRect())}function oK(e){if(e===document.documentElement)if(visualViewport){const t=document.body.currentCSSZoom??1;return new Dc({x:visualViewport.scale>1?0:visualViewport.offsetLeft,y:visualViewport.scale>1?0:visualViewport.offsetTop,width:visualViewport.width*visualViewport.scale/t,height:visualViewport.height*visualViewport.scale/t})}else return new Dc({x:0,y:0,width:document.documentElement.clientWidth,height:document.documentElement.clientHeight});else{const t=e.getBoundingClientRect();return new Dc({x:t.x,y:t.y,width:e.clientWidth,height:e.clientHeight})}}function QI(e){const t=new Dc(e.getBoundingClientRect()),n=getComputedStyle(e),i=n.transform;if(i){let r,a,l,h,s;if(i.startsWith("matrix3d("))r=i.slice(9,-1).split(/, /),a=Number(r[0]),l=Number(r[5]),h=Number(r[12]),s=Number(r[13]);else if(i.startsWith("matrix("))r=i.slice(7,-1).split(/, /),a=Number(r[0]),l=Number(r[3]),h=Number(r[4]),s=Number(r[5]);else return new Dc(t);const p=n.transformOrigin,v=t.x-h-(1-a)*parseFloat(p),x=t.y-s-(1-l)*parseFloat(p.slice(p.indexOf(" ")+1)),T=a?t.width/a:e.offsetWidth+1,k=l?t.height/l:e.offsetHeight+1;return new Dc({x:v,y:x,width:T,height:k})}else return new Dc(t)}function Jd(e,t,n){if(typeof e.animate>"u")return{finished:Promise.resolve()};let i;try{i=e.animate(t,n)}catch{return{finished:Promise.resolve()}}return typeof i.finished>"u"&&(i.finished=new Promise(r=>{i.onfinish=()=>{r(i)}})),i}const cw=new WeakMap;function aK(e,t){Object.keys(t).forEach(n=>{if(YI(n)){const i=ON(n),r=cw.get(e);if(t[n]==null)r?.forEach(a=>{const[l,h]=a;l===i&&(e.removeEventListener(i,h),r.delete(a))});else if(!r||![...r].some(a=>a[0]===i&&a[1]===t[n])){e.addEventListener(i,t[n]);const a=r||new Set;a.add([i,t[n]]),cw.has(e)||cw.set(e,a)}}else t[n]==null?e.removeAttribute(n):e.setAttribute(n,t[n])})}function lK(e,t){Object.keys(t).forEach(n=>{if(YI(n)){const i=ON(n),r=cw.get(e);r?.forEach(a=>{const[l,h]=a;l===i&&(e.removeEventListener(i,h),r.delete(a))})}else e.removeAttribute(n)})}const t_=2.4,JL=.2126729,QL=.7151522,eO=.072175,cK=.55,uK=.58,dK=.57,hK=.62,Ix=.03,tO=1.45,fK=5e-4,mK=1.25,pK=1.25,nO=.078,iO=12.82051282051282,Ax=.06,rO=.001;function sO(e,t){const n=(e.r/255)**t_,i=(e.g/255)**t_,r=(e.b/255)**t_,a=(t.r/255)**t_,l=(t.g/255)**t_,h=(t.b/255)**t_;let s=n*JL+i*QL+r*eO,p=a*JL+l*QL+h*eO;if(s<=Ix&&(s+=(Ix-s)**tO),p<=Ix&&(p+=(Ix-p)**tO),Math.abs(p-s)<fK)return 0;let v;if(p>s){const x=(p**cK-s**uK)*mK;v=x<rO?0:x<nO?x-x*iO*Ax:x-Ax}else{const x=(p**hK-s**dK)*pK;v=x>-rO?0:x>-nO?x-x*iO*Ax:x+Ax}return v*100}const Kw=.20689655172413793,gK=e=>e>Kw**3?Math.cbrt(e):e/(3*Kw**2)+4/29,_K=e=>e>Kw?e**3:3*Kw**2*(e-4/29);function NN(e){const t=gK,n=t(e[1]);return[116*n-16,500*(t(e[0]/.95047)-n),200*(n-t(e[2]/1.08883))]}function UN(e){const t=_K,n=(e[0]+16)/116;return[t(n+e[1]/500)*.95047,t(n),t(n-e[2]/200)*1.08883]}const vK=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]],yK=e=>e<=.0031308?e*12.92:1.055*e**(1/2.4)-.055,bK=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],xK=e=>e<=.04045?e/12.92:((e+.055)/1.055)**2.4;function $N(e){const t=Array(3),n=yK,i=vK;for(let r=0;r<3;++r)t[r]=Math.round(Sr(n(i[r][0]*e[0]+i[r][1]*e[1]+i[r][2]*e[2]))*255);return{r:t[0],g:t[1],b:t[2]}}function eA(e){let{r:t,g:n,b:i}=e;const r=[0,0,0],a=xK,l=bK;t=a(t/255),n=a(n/255),i=a(i/255);for(let h=0;h<3;++h)r[h]=l[h][0]*t+l[h][1]*n+l[h][2]*i;return r}function GC(e){return!!e&&/^(#|var\(--|(rgb|hsl)a?\()/.test(e)}function wK(e){return GC(e)&&!/^((rgb|hsl)a?\()?var\(--/.test(e)}const oO=/^(?<fn>(?:rgb|hsl)a?)\((?<values>.+)\)/,TK={rgb:(e,t,n,i)=>({r:e,g:t,b:n,a:i}),rgba:(e,t,n,i)=>({r:e,g:t,b:n,a:i}),hsl:(e,t,n,i)=>aO({h:e,s:t,l:n,a:i}),hsla:(e,t,n,i)=>aO({h:e,s:t,l:n,a:i}),hsv:(e,t,n,i)=>id({h:e,s:t,v:n,a:i}),hsva:(e,t,n,i)=>id({h:e,s:t,v:n,a:i})};function ec(e){if(typeof e=="number")return{r:(e&16711680)>>16,g:(e&65280)>>8,b:e&255};if(typeof e=="string"&&oO.test(e)){const{groups:t}=e.match(oO),{fn:n,values:i}=t,r=i.split(/,\s*|\s*\/\s*|\s+/).map((a,l)=>a.endsWith("%")||l>0&&l<3&&["hsl","hsla","hsv","hsva"].includes(n)?parseFloat(a)/100:parseFloat(a));return TK[n](...r)}else if(typeof e=="string"){let t=e.startsWith("#")?e.slice(1):e;return[3,4].includes(t.length)?t=t.split("").map(n=>n+n).join(""):[6,8].includes(t.length),GN(t)}else if(typeof e=="object"){if(pp(e,["r","g","b"]))return e;if(pp(e,["h","s","l"]))return id(tA(e));if(pp(e,["h","s","v"]))return id(e)}throw new TypeError(`Invalid color: ${e==null?e:String(e)||e.constructor.name}
Expected #hex, #hexa, rgb(), rgba(), hsl(), hsla(), object or number`)}function id(e){const{h:t,s:n,v:i,a:r}=e,a=h=>{const s=(h+t/60)%6;return i-i*n*Math.max(Math.min(s,4-s,1),0)},l=[a(5),a(3),a(1)].map(h=>Math.round(h*255));return{r:l[0],g:l[1],b:l[2],a:r}}function aO(e){return id(tA(e))}function o0(e){if(!e)return{h:0,s:1,v:1,a:1};const t=e.r/255,n=e.g/255,i=e.b/255,r=Math.max(t,n,i),a=Math.min(t,n,i);let l=0;r!==a&&(r===t?l=60*(0+(n-i)/(r-a)):r===n?l=60*(2+(i-t)/(r-a)):r===i&&(l=60*(4+(t-n)/(r-a)))),l<0&&(l=l+360);const h=r===0?0:(r-a)/r,s=[l,h,r];return{h:s[0],s:s[1],v:s[2],a:e.a}}function qC(e){const{h:t,s:n,v:i,a:r}=e,a=i-i*n/2,l=a===1||a===0?0:(i-a)/Math.min(a,1-a);return{h:t,s:l,l:a,a:r}}function tA(e){const{h:t,s:n,l:i,a:r}=e,a=i+n*Math.min(i,1-i),l=a===0?0:2-2*i/a;return{h:t,s:l,v:a,a:r}}function jN(e){let{r:t,g:n,b:i,a:r}=e;return r===void 0?`rgb(${t}, ${n}, ${i})`:`rgba(${t}, ${n}, ${i}, ${r})`}function WN(e){return jN(id(e))}function Px(e){const t=Math.round(e).toString(16);return("00".substr(0,2-t.length)+t).toUpperCase()}function HN(e){let{r:t,g:n,b:i,a:r}=e;return`#${[Px(t),Px(n),Px(i),r!==void 0?Px(Math.round(r*255)):""].join("")}`}function GN(e){e=EK(e);let[t,n,i,r]=J2(e,2).map(a=>parseInt(a,16));return r=r===void 0?r:r/255,{r:t,g:n,b:i,a:r}}function SK(e){const t=GN(e);return o0(t)}function qN(e){return HN(id(e))}function EK(e){return e.startsWith("#")&&(e=e.slice(1)),e=e.replace(/([^0-9a-f])/gi,"F"),(e.length===3||e.length===4)&&(e=e.split("").map(t=>t+t).join("")),e.length!==6&&(e=WL(WL(e,6),8,"F")),e}function CK(e,t){const n=NN(eA(e));return n[0]=n[0]+t*10,$N(UN(n))}function kK(e,t){const n=NN(eA(e));return n[0]=n[0]-t*10,$N(UN(n))}function KC(e){const t=ec(e);return eA(t)[1]}function IK(e,t){const n=KC(e),i=KC(t),r=Math.max(n,i),a=Math.min(n,i);return(r+.05)/(a+.05)}function KN(e){const t=Math.abs(sO(ec(0),ec(e)));return Math.abs(sO(ec(16777215),ec(e)))>Math.min(t,50)?"#fff":"#000"}function st(e,t){return n=>Object.keys(e).reduce((i,r)=>{const l=typeof e[r]=="object"&&e[r]!=null&&!Array.isArray(e[r])?e[r]:{type:e[r]};return n&&r in n?i[r]={...l,default:n[r]}:i[r]=l,t&&!i[r].source&&(i[r].source=t),i},{})}const vn=st({class:[String,Array,Object],style:{type:[String,Array,Object],default:null}},"component");function bs(e,t){const n=n0();if(!n)throw new Error(`[Vuetify] ${e} must be called from inside a setup function`);return n}function cd(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"composables";const t=bs(e).type;return Sp(t?.aliasName||t?.name)}function AK(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:bs("injectSelf");const{provides:n}=t;if(n&&e in n)return n[e]}const U_=Symbol.for("vuetify:defaults");function PK(e){return at(e)}function nA(){const e=xi(U_);if(!e)throw new Error("[Vuetify] Could not find defaults instance");return e}function Jr(e,t){const n=nA(),i=at(e),r=fe(()=>{if(Si(t?.disabled))return n.value;const l=Si(t?.scoped),h=Si(t?.reset),s=Si(t?.root);if(i.value==null&&!(l||h||s))return n.value;let p=La(i.value,{prev:n.value});if(l)return p;if(h||s){const v=Number(h||1/0);for(let x=0;x<=v&&!(!p||!("prev"in p));x++)p=p.prev;return p&&typeof s=="string"&&s in p&&(p=La(La(p,{prev:p}),p[s])),p}return p.prev?La(p.prev,p):p});return Mr(U_,r),r}function MK(e,t){return e.props&&(typeof e.props[t]<"u"||typeof e.props[Sp(t)]<"u")}function DK(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:nA();const i=bs("useDefaults");if(t=t??i.type.name??i.type.__name,!t)throw new Error("[Vuetify] Could not determine component name");const r=fe(()=>n.value?.[e._as??t]),a=new Proxy(e,{get(s,p){const v=Reflect.get(s,p);if(p==="class"||p==="style")return[r.value?.[p],v].filter(k=>k!=null);if(MK(i.vnode,p))return v;const x=r.value?.[p];if(x!==void 0)return x;const T=n.value?.global?.[p];return T!==void 0?T:v}}),l=Xt();zr(()=>{if(r.value){const s=Object.entries(r.value).filter(p=>{let[v]=p;return v.startsWith(v[0].toUpperCase())});l.value=s.length?Object.fromEntries(s):void 0}else l.value=void 0});function h(){const s=AK(U_,i);Mr(U_,fe(()=>l.value?La(s?.value??{},l.value):s?.value))}return{props:a,provideSubDefaults:h}}function ac(e){if(e._setup=e._setup??e.setup,!e.name)return e;if(e._setup){e.props=st(e.props??{},e.name)();const t=Object.keys(e.props).filter(n=>n!=="class"&&n!=="style");e.filterProps=function(i){return Ml(i,t)},e.props._as=String,e.setup=function(i,r){const a=nA();if(!a.value)return e._setup(i,r);const{props:l,provideSubDefaults:h}=DK(i,i._as??e.name,a),s=e._setup(l,r);return h(),s}}return e}function It(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return t=>(e?ac:Bz)(t)}function RK(e,t){return t.props=e,t}function Sh(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"div",n=arguments.length>2?arguments[2]:void 0;return It()({name:n??ld(rl(e.replace(/__/g,"-"))),props:{tag:{type:String,default:t},...vn()},setup(i,r){let{slots:a}=r;return()=>Th(i.tag,{class:[e,i.class],style:i.style},a.default?.())}})}function LK(e,t,n,i){if(!n||jf(e)||jf(t))return;const r=n.get(e);if(r)r.set(t,i);else{const a=new WeakMap;a.set(t,i),n.set(e,a)}}function OK(e,t,n){if(!n||jf(e)||jf(t))return null;const i=n.get(e)?.get(t);if(typeof i=="boolean")return i;const r=n.get(t)?.get(e);return typeof r=="boolean"?r:null}function po(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:new WeakMap;if(e===t)return!0;if(e instanceof Date&&t instanceof Date&&e.getTime()!==t.getTime()||e!==Object(e)||t!==Object(t))return!1;const i=Object.keys(e);if(i.length!==Object.keys(t).length)return!1;const r=OK(e,t,n);return r||(LK(e,t,n,!0),i.every(a=>po(e[a],t[a],n)))}function XN(e){if(typeof e.getRootNode!="function"){for(;e.parentNode;)e=e.parentNode;return e!==document?null:document}const t=e.getRootNode();return t!==document&&t.getRootNode({composed:!0})!==document?null:t}const xb="cubic-bezier(0.4, 0, 0.2, 1)",lO="cubic-bezier(0.0, 0, 0.2, 1)",cO="cubic-bezier(0.4, 0, 1, 1)",VK={linear:e=>e,easeInQuad:e=>e**2,easeOutQuad:e=>e*(2-e),easeInOutQuad:e=>e<.5?2*e**2:-1+(4-2*e)*e,easeInCubic:e=>e**3,easeOutCubic:e=>--e**3+1,easeInOutCubic:e=>e<.5?4*e**3:(e-1)*(2*e-2)*(2*e-2)+1,easeInQuart:e=>e**4,easeOutQuart:e=>1- --e**4,easeInOutQuart:e=>e<.5?8*e**4:1-8*--e**4,easeInQuint:e=>e**5,easeOutQuint:e=>1+--e**5,easeInOutQuint:e=>e<.5?16*e**5:1+16*--e**5,instant:e=>1};function uO(e,t,n){return Object.keys(e).filter(i=>YI(i)&&i.endsWith(t)).reduce((i,r)=>(i[r.slice(0,-t.length)]=a=>s0(e[r],a,n(a)),i),{})}function Z1(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;for(;e;){if(t?BK(e):iA(e))return e;e=e.parentElement}return document.scrollingElement}function Xw(e,t){const n=[];if(t&&e&&!t.contains(e))return n;for(;e&&(iA(e)&&n.push(e),e!==t);)e=e.parentElement;return n}function iA(e){if(!e||e.nodeType!==Node.ELEMENT_NODE)return!1;const t=window.getComputedStyle(e),n=t.overflowY==="scroll"||t.overflowY==="auto"&&e.scrollHeight>e.clientHeight,i=t.overflowX==="scroll"||t.overflowX==="auto"&&e.scrollWidth>e.clientWidth;return n||i}function BK(e){if(!e||e.nodeType!==Node.ELEMENT_NODE)return!1;const t=window.getComputedStyle(e);return["scroll","auto"].includes(t.overflowY)}function FK(e){let{depth:t,isLast:n,isLastGroup:i,leafLinks:r,separateRoots:a,parentIndentLines:l,variant:h}=e;if(!l||!t)return{leaf:void 0,node:void 0,children:l};if(h==="simple")return{leaf:[...l,"line"],node:[...l,"line"],children:[...l,"line"]};const s=n&&(!i||a||t>1);return{leaf:[...l,s?"last-leaf":"leaf",...r?["leaf-link"]:[]],node:[...l,s?"last-leaf":"leaf"],children:[...l,s?"none":"line"]}}function zK(e){for(;e;){if(window.getComputedStyle(e).position==="fixed")return!0;e=e.offsetParent}return!1}function Vt(e){const t=bs("useRender");t.render=e}function NK(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{leading:!0,trailing:!0},i=0,r=0,a=!1,l=0;function h(){clearTimeout(i),a=!1,l=0}const s=function(){for(var p=arguments.length,v=new Array(p),x=0;x<p;x++)v[x]=arguments[x];clearTimeout(i);const T=Date.now();l||(l=T);const k=T-Math.max(l,r);function P(){r=Date.now(),i=window.setTimeout(h,t),e(...v)}a?k>=t?P():n.trailing&&(i=window.setTimeout(P,t-k)):(a=!0,n.leading&&P())};return s.clear=h,s.immediate=e,s}function In(e,t,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:x=>x,r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:x=>x;const a=bs("useProxiedModel"),l=at(e[t]!==void 0?e[t]:n),h=Sp(t),p=fe(h!==t?()=>(e[t],!!((a.vnode.props?.hasOwnProperty(t)||a.vnode.props?.hasOwnProperty(h))&&(a.vnode.props?.hasOwnProperty(`onUpdate:${t}`)||a.vnode.props?.hasOwnProperty(`onUpdate:${h}`)))):()=>(e[t],!!(a.vnode.props?.hasOwnProperty(t)&&a.vnode.props?.hasOwnProperty(`onUpdate:${t}`))));ra(()=>!p.value,()=>{Ht(()=>e[t],x=>{l.value=x})});const v=fe({get(){const x=e[t];return i(p.value?x:l.value)},set(x){const T=r(x),k=Nn(p.value?e[t]:l.value);k===T||i(k)===x||(l.value=T,a?.emit(`update:${t}`,T))}});return Object.defineProperty(v,"externalValue",{get:()=>p.value?e[t]:l.value}),v}const UK={badge:"Badge",open:"Open",close:"Close",dismiss:"Dismiss",confirmEdit:{ok:"OK",cancel:"Cancel"},dataIterator:{noResultsText:"No matching records found",loadingText:"Loading items..."},dataTable:{itemsPerPageText:"Rows per page:",ariaLabel:{sortDescending:"Sorted descending.",sortAscending:"Sorted ascending.",sortNone:"Not sorted.",activateNone:"Activate to remove sorting.",activateDescending:"Activate to sort descending.",activateAscending:"Activate to sort ascending."},sortBy:"Sort by"},dataFooter:{itemsPerPageText:"Items per page:",itemsPerPageAll:"All",nextPage:"Next page",prevPage:"Previous page",firstPage:"First page",lastPage:"Last page",pageText:"{0}-{1} of {2}"},dateRangeInput:{divider:"to"},datePicker:{itemsSelected:"{0} selected",range:{title:"Select dates",header:"Enter dates"},title:"Select date",header:"Enter date",input:{placeholder:"Enter date"},ariaLabel:{previousMonth:"Previous month",nextMonth:"Next month",selectYear:"Select year",selectDate:"{0}",currentDate:"Today, {0}"}},noDataText:"No data available",carousel:{prev:"Previous visual",next:"Next visual",ariaLabel:{delimiter:"Carousel slide {0} of {1}"}},calendar:{moreEvents:"{0} more",today:"Today"},input:{clear:"Clear {0}",prependAction:"{0} prepended action",appendAction:"{0} appended action",otp:"Please enter OTP character {0}"},fileInput:{counter:"{0} files",counterSize:"{0} files ({1} in total)"},fileUpload:{title:"Drag and drop files here",divider:"or",browse:"Browse Files"},timePicker:{am:"AM",pm:"PM",title:"Select Time"},pagination:{ariaLabel:{root:"Pagination Navigation",next:"Next page",previous:"Previous page",page:"Go to page {0}",currentPage:"Page {0}, Current page",first:"First page",last:"Last page"}},stepper:{next:"Next",prev:"Previous"},rating:{ariaLabel:{item:"Rating {0} of {1}"}},loading:"Loading...",infiniteScroll:{loadMore:"Load more",empty:"No more"},rules:{required:"This field is required",email:"Please enter a valid email",number:"This field can only contain numbers",integer:"This field can only contain integer values",capital:"This field can only contain uppercase letters",maxLength:"You must enter a maximum of {0} characters",minLength:"You must enter a minimum of {0} characters",strictLength:"The length of the entered field is invalid",exclude:"The {0} character is not allowed",notEmpty:"Please choose at least one value",pattern:"Invalid format"},hotkey:{then:"then",ctrl:"Ctrl",command:"Command",space:"Space",shift:"Shift",alt:"Alt",enter:"Enter",escape:"Escape",upArrow:"Up Arrow",downArrow:"Down Arrow",leftArrow:"Left Arrow",rightArrow:"Right Arrow",backspace:"Backspace",option:"Option",plus:"plus",shortcut:"Keyboard shortcut: {0}"},video:{play:"Play",pause:"Pause",seek:"Seek",volume:"Volume",showVolume:"Show volume control",mute:"Mute",unmute:"Unmute",enterFullscreen:"Full screen",exitFullscreen:"Exit full screen"},colorPicker:{ariaLabel:{eyedropper:"Select color with eyedropper",hueSlider:"Hue",alphaSlider:"Alpha",redInput:"Red value",greenInput:"Green value",blueInput:"Blue value",alphaInput:"Alpha value",hueInput:"Hue value",saturationInput:"Saturation value",lightnessInput:"Lightness value",hexInput:"HEX value",hexaInput:"HEX with alpha value",changeFormat:"Change color format"}}},dO="$vuetify.",hO=(e,t)=>e.replace(/\{(\d+)\}/g,(n,i)=>String(t[Number(i)])),ZN=(e,t,n)=>function(i){for(var r=arguments.length,a=new Array(r>1?r-1:0),l=1;l<r;l++)a[l-1]=arguments[l];if(!i.startsWith(dO))return hO(i,a);const h=i.replace(dO,""),s=e.value&&n.value[e.value],p=t.value&&n.value[t.value];let v=Lp(s,h,null);return v||(`${i}${e.value}`,v=Lp(p,h,null)),v||(v=i),typeof v!="string"&&(v=i),hO(v,a)};function rA(e,t){return(n,i)=>new Intl.NumberFormat([e.value,t.value],i).format(n)}function YN(e,t){return rA(e,t)(.1).includes(",")?",":"."}function ME(e,t,n){const i=In(e,t,e[t]??n.value);return i.value=e[t]??n.value,Ht(n,r=>{e[t]==null&&(i.value=n.value)}),i}function JN(e){return t=>{const n=ME(t,"locale",e.current),i=ME(t,"fallback",e.fallback),r=ME(t,"messages",e.messages);return{name:"vuetify",current:n,fallback:i,messages:r,decimalSeparator:Ue(()=>YN(n,i)),t:ZN(n,i,r),n:rA(n,i),provide:JN({current:n,fallback:i,messages:r})}}}function $K(e){const t=Xt(e?.locale??"en"),n=Xt(e?.fallback??"en"),i=at({en:UK,...e?.messages});return{name:"vuetify",current:t,fallback:n,messages:i,decimalSeparator:Ue(()=>e?.decimalSeparator??YN(t,n)),t:ZN(t,n,i),n:rA(t,n),provide:JN({current:t,fallback:n,messages:i})}}const $_=Symbol.for("vuetify:locale");function jK(e){return e.name!=null}function WK(e){const t=e?.adapter&&jK(e?.adapter)?e?.adapter:$K(e),n=qK(t,e);return{...t,...n}}function dr(){const e=xi($_);if(!e)throw new Error("[Vuetify] Could not find injected locale instance");return e}function HK(e){const t=xi($_);if(!t)throw new Error("[Vuetify] Could not find injected locale instance");const n=t.provide(e),i=KK(n,t.rtl,e),r={...n,...i};return Mr($_,r),r}function GK(){return{af:!1,ar:!0,bg:!1,ca:!1,ckb:!1,cs:!1,de:!1,el:!1,en:!1,es:!1,et:!1,fa:!0,fi:!1,fr:!1,hr:!1,hu:!1,he:!0,id:!1,it:!1,ja:!1,km:!1,ko:!1,lv:!1,lt:!1,nl:!1,no:!1,pl:!1,pt:!1,ro:!1,ru:!1,sk:!1,sl:!1,srCyrl:!1,srLatn:!1,sv:!1,th:!1,tr:!1,az:!1,uk:!1,vi:!1,zhHans:!1,zhHant:!1}}function qK(e,t){const n=at(t?.rtl??GK()),i=fe(()=>n.value[e.current.value]??!1);return{isRtl:i,rtl:n,rtlClasses:Ue(()=>`v-locale--is-${i.value?"rtl":"ltr"}`)}}function KK(e,t,n){const i=fe(()=>n.rtl??t.value[e.current.value]??!1);return{isRtl:i,rtl:t,rtlClasses:Ue(()=>`v-locale--is-${i.value?"rtl":"ltr"}`)}}function Ws(){const e=xi($_);if(!e)throw new Error("[Vuetify] Could not find injected rtl instance");return{isRtl:e.isRtl,rtlClasses:e.rtlClasses}}function a0(e){const t=e.slice(-2).toUpperCase();switch(!0){case e==="GB-alt-variant":return{firstDay:0,firstWeekSize:4};case e==="001":return{firstDay:1,firstWeekSize:1};case`AG AS BD BR BS BT BW BZ CA CO DM DO ET GT GU HK HN ID IL IN JM JP KE
    KH KR LA MH MM MO MT MX MZ NI NP PA PE PH PK PR PY SA SG SV TH TT TW UM US
    VE VI WS YE ZA ZW`.includes(t):return{firstDay:0,firstWeekSize:1};case`AI AL AM AR AU AZ BA BM BN BY CL CM CN CR CY EC GE HR KG KZ LB LK LV
    MD ME MK MN MY NZ RO RS SI TJ TM TR UA UY UZ VN XK`.includes(t):return{firstDay:1,firstWeekSize:1};case`AD AN AT AX BE BG CH CZ DE DK EE ES FI FJ FO FR GB GF GP GR HU IE IS
    IT LI LT LU MC MQ NL NO PL RE RU SE SK SM VA`.includes(t):return{firstDay:1,firstWeekSize:4};case"AE AF BH DJ DZ EG IQ IR JO KW LY OM QA SD SY".includes(t):return{firstDay:6,firstWeekSize:1};case t==="MV":return{firstDay:5,firstWeekSize:1};case t==="PT":return{firstDay:0,firstWeekSize:4};default:return null}}function XK(e,t,n){const i=[];let r=[];const a=QN(e),l=e5(e),h=n??a0(t)?.firstDay??0,s=(a.getDay()-h+7)%7,p=(l.getDay()-h+7)%7;for(let v=0;v<s;v++){const x=new Date(a);x.setDate(x.getDate()-(s-v)),r.push(x)}for(let v=1;v<=l.getDate();v++){const x=new Date(e.getFullYear(),e.getMonth(),v);r.push(x),r.length===7&&(i.push(r),r=[])}for(let v=1;v<7-p;v++){const x=new Date(l);x.setDate(x.getDate()+v),r.push(x)}return r.length>0&&i.push(r),i}function Zw(e,t,n){let i=(n??a0(t)?.firstDay??0)%7;[0,1,2,3,4,5,6].includes(i)||(i=0);const r=new Date(e);for(;r.getDay()!==i;)r.setDate(r.getDate()-1);return r}function ZK(e,t){const n=new Date(e),i=((a0(t)?.firstDay??0)+6)%7;for(;n.getDay()!==i;)n.setDate(n.getDate()+1);return n}function QN(e){return new Date(e.getFullYear(),e.getMonth(),1)}function e5(e){return new Date(e.getFullYear(),e.getMonth()+1,0)}function YK(e){const t=e.split("-").map(Number);return new Date(t[0],t[1]-1,t[2])}const JK=/^([12]\d{3}-([1-9]|0[1-9]|1[0-2])-([1-9]|0[1-9]|[12]\d|3[01]))$/;function t5(e){if(e==null)return new Date;if(e instanceof Date)return e;if(typeof e=="string"){let t;if(JK.test(e))return YK(e);if(t=Date.parse(e),!isNaN(t))return new Date(t)}return null}const fO=new Date(2e3,0,2);function QK(e,t,n){const i=t??a0(e)?.firstDay??0;return Ql(7).map(r=>{const a=new Date(fO);return a.setDate(fO.getDate()+i+r),new Intl.DateTimeFormat(e,{weekday:n??"narrow"}).format(a)})}function eX(e,t,n,i){const r=t5(e)??new Date,a=i?.[t];if(typeof a=="function")return a(r,t,n);let l={};switch(t){case"fullDate":l={year:"numeric",month:"short",day:"numeric"};break;case"fullDateWithWeekday":l={weekday:"long",year:"numeric",month:"long",day:"numeric"};break;case"normalDate":const h=r.getDate(),s=new Intl.DateTimeFormat(n,{month:"long"}).format(r);return`${h} ${s}`;case"normalDateWithWeekday":l={weekday:"short",day:"numeric",month:"short"};break;case"shortDate":l={month:"short",day:"numeric"};break;case"year":l={year:"numeric"};break;case"month":l={month:"long"};break;case"monthShort":l={month:"short"};break;case"monthAndYear":l={month:"long",year:"numeric"};break;case"monthAndDate":l={month:"long",day:"numeric"};break;case"weekday":l={weekday:"long"};break;case"weekdayShort":l={weekday:"short"};break;case"dayOfMonth":return new Intl.NumberFormat(n).format(r.getDate());case"hours12h":l={hour:"numeric",hour12:!0};break;case"hours24h":l={hour:"numeric",hour12:!1};break;case"minutes":l={minute:"numeric"};break;case"seconds":l={second:"numeric"};break;case"fullTime":l={hour:"numeric",minute:"numeric"};break;case"fullTime12h":l={hour:"numeric",minute:"numeric",hour12:!0};break;case"fullTime24h":l={hour:"numeric",minute:"numeric",hour12:!1};break;case"fullDateTime":l={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"};break;case"fullDateTime12h":l={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0};break;case"fullDateTime24h":l={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1};break;case"keyboardDate":l={year:"numeric",month:"2-digit",day:"2-digit"};break;case"keyboardDateTime":return l={year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric"},new Intl.DateTimeFormat(n,l).format(r).replace(/, /g," ");case"keyboardDateTime12h":return l={year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric",hour12:!0},new Intl.DateTimeFormat(n,l).format(r).replace(/, /g," ");case"keyboardDateTime24h":return l={year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric",hour12:!1},new Intl.DateTimeFormat(n,l).format(r).replace(/, /g," ");default:l=a??{timeZone:"UTC",timeZoneName:"short"}}return new Intl.DateTimeFormat(n,l).format(r)}function tX(e,t){const n=e.toJsDate(t),i=n.getFullYear(),r=HL(String(n.getMonth()+1),2,"0"),a=HL(String(n.getDate()),2,"0");return`${i}-${r}-${a}`}function nX(e){const[t,n,i]=e.split("-").map(Number);return new Date(t,n-1,i)}function iX(e,t){const n=new Date(e);return n.setMinutes(n.getMinutes()+t),n}function rX(e,t){const n=new Date(e);return n.setHours(n.getHours()+t),n}function Cp(e,t){const n=new Date(e);return n.setDate(n.getDate()+t),n}function sX(e,t){const n=new Date(e);return n.setDate(n.getDate()+t*7),n}function oX(e,t){const n=new Date(e);return n.setDate(1),n.setMonth(n.getMonth()+t),n}function wb(e){return e.getFullYear()}function aX(e){return e.getMonth()}function lX(e,t,n,i){const r=a0(t),a=n??r?.firstDay??0,l=r?.firstWeekSize??1;return i!==void 0?cX(e,t,a,i):uX(e,t,a,l)}function cX(e,t,n,i){const r=(7+i-n)%7,a=Zw(e,t,n),l=Cp(a,6);function h(T){return(7+new Date(T,0,1).getDay()-n)%7}let s=wb(e);s<wb(l)&&h(s+1)<=r&&s++;const p=new Date(s,0,1),v=h(s),x=v<=r?Cp(p,-v):Cp(p,7-v);return 1+Jw(sA(e),Tb(x),"weeks")}function uX(e,t,n,i){const r=Cp(Zw(e,t,n),6);function a(v){const x=new Date(v,0,1);return 7-Jw(x,Zw(x,t,n),"days")}let l=wb(e);l<wb(r)&&a(l+1)>=i&&l++;const h=new Date(l,0,1),s=a(l),p=s>=i?Cp(h,s-7):Cp(h,s);return 1+Jw(sA(e),Tb(p),"weeks")}function dX(e){return e.getDate()}function hX(e){return new Date(e.getFullYear(),e.getMonth()+1,1)}function fX(e){return new Date(e.getFullYear(),e.getMonth()-1,1)}function mX(e){return e.getHours()}function pX(e){return e.getMinutes()}function gX(e){return new Date(e.getFullYear(),0,1)}function _X(e){return new Date(e.getFullYear(),11,31)}function vX(e,t){return Yw(e,t[0])&&xX(e,t[1])}function yX(e){const t=new Date(e);return t instanceof Date&&!isNaN(t.getTime())}function Yw(e,t){return e.getTime()>t.getTime()}function bX(e,t){return Yw(Tb(e),Tb(t))}function xX(e,t){return e.getTime()<t.getTime()}function mO(e,t){return e.getTime()===t.getTime()}function wX(e,t){return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}function TX(e,t){return e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}function SX(e,t){return e.getFullYear()===t.getFullYear()}function Jw(e,t,n){const i=new Date(e),r=new Date(t);switch(n){case"years":return i.getFullYear()-r.getFullYear();case"quarters":return Math.floor((i.getMonth()-r.getMonth()+(i.getFullYear()-r.getFullYear())*12)/4);case"months":return i.getMonth()-r.getMonth()+(i.getFullYear()-r.getFullYear())*12;case"weeks":return Math.floor((i.getTime()-r.getTime())/(1e3*60*60*24*7));case"days":return Math.floor((i.getTime()-r.getTime())/(1e3*60*60*24));case"hours":return Math.floor((i.getTime()-r.getTime())/(1e3*60*60));case"minutes":return Math.floor((i.getTime()-r.getTime())/(1e3*60));case"seconds":return Math.floor((i.getTime()-r.getTime())/1e3);default:return i.getTime()-r.getTime()}}function EX(e,t){const n=new Date(e);return n.setHours(t),n}function CX(e,t){const n=new Date(e);return n.setMinutes(t),n}function kX(e,t){const n=new Date(e);return n.setMonth(t),n}function IX(e,t){const n=new Date(e);return n.setDate(t),n}function AX(e,t){const n=new Date(e);return n.setFullYear(t),n}function Tb(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0,0)}function sA(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),23,59,59,999)}class PX{constructor(t){this.locale=t.locale,this.formats=t.formats}date(t){return t5(t)}toJsDate(t){return t}toISO(t){return tX(this,t)}parseISO(t){return nX(t)}addMinutes(t,n){return iX(t,n)}addHours(t,n){return rX(t,n)}addDays(t,n){return Cp(t,n)}addWeeks(t,n){return sX(t,n)}addMonths(t,n){return oX(t,n)}getWeekArray(t,n){const i=n!==void 0?Number(n):void 0;return XK(t,this.locale,i)}startOfWeek(t,n){const i=n!==void 0?Number(n):void 0;return Zw(t,this.locale,i)}endOfWeek(t){return ZK(t,this.locale)}startOfMonth(t){return QN(t)}endOfMonth(t){return e5(t)}format(t,n){return eX(t,n,this.locale,this.formats)}isEqual(t,n){return mO(t,n)}isValid(t){return yX(t)}isWithinRange(t,n){return vX(t,n)}isAfter(t,n){return Yw(t,n)}isAfterDay(t,n){return bX(t,n)}isBefore(t,n){return!Yw(t,n)&&!mO(t,n)}isSameDay(t,n){return wX(t,n)}isSameMonth(t,n){return TX(t,n)}isSameYear(t,n){return SX(t,n)}setMinutes(t,n){return CX(t,n)}setHours(t,n){return EX(t,n)}setMonth(t,n){return kX(t,n)}setDate(t,n){return IX(t,n)}setYear(t,n){return AX(t,n)}getDiff(t,n,i){return Jw(t,n,i)}getWeekdays(t,n){const i=t!==void 0?Number(t):void 0;return QK(this.locale,i,n)}getYear(t){return wb(t)}getMonth(t){return aX(t)}getWeek(t,n,i){const r=n!==void 0?Number(n):void 0,a=i!==void 0?Number(i):void 0;return lX(t,this.locale,r,a)}getDate(t){return dX(t)}getNextMonth(t){return hX(t)}getPreviousMonth(t){return fX(t)}getHours(t){return mX(t)}getMinutes(t){return pX(t)}startOfDay(t){return Tb(t)}endOfDay(t){return sA(t)}startOfYear(t){return gX(t)}endOfYear(t){return _X(t)}}const n5=Symbol.for("vuetify:date-options"),pO=Symbol.for("vuetify:date-adapter");function MX(e,t){const n=La({adapter:PX,locale:{af:"af-ZA",bg:"bg-BG",ca:"ca-ES",ckb:"",cs:"cs-CZ",de:"de-DE",el:"el-GR",en:"en-US",et:"et-EE",fa:"fa-IR",fi:"fi-FI",hr:"hr-HR",hu:"hu-HU",he:"he-IL",id:"id-ID",it:"it-IT",ja:"ja-JP",ko:"ko-KR",lv:"lv-LV",lt:"lt-LT",nl:"nl-NL",no:"no-NO",pl:"pl-PL",pt:"pt-PT",ro:"ro-RO",ru:"ru-RU",sk:"sk-SK",sl:"sl-SI",srCyrl:"sr-SP",srLatn:"sr-SP",sv:"sv-SE",th:"th-TH",tr:"tr-TR",az:"az-AZ",uk:"uk-UA",vi:"vi-VN",zhHans:"zh-CN",zhHant:"zh-TW"}},e);return{options:n,instance:r5(n,t)}}function DX(e,t,n){const i=i5(e,t,n),r=[t];for(let a=1;a<i;a++){const l=e.addDays(t,a);r.push(l)}return n&&r.push(e.endOfDay(n)),r}function i5(e,t,n){const i=[`${e.toISO(n??t).split("T")[0]}T00:00:00Z`,`${e.toISO(t).split("T")[0]}T00:00:00Z`];return typeof e.date()=="string"?e.getDiff(i[0],i[1],"days"):e.getDiff(e.date(i[0]),e.date(i[1]),"days")}function r5(e,t){const n=to(typeof e.adapter=="function"?new e.adapter({locale:e.locale[t.current.value]??t.current.value,formats:e.formats}):e.adapter);return Ht(t.current,i=>{n.locale=e.locale[i]??i??n.locale}),n}function l0(){const e=xi(n5);if(!e)throw new Error("[Vuetify] Could not find injected date options");const t=dr();return r5(e,t)}const Y1=["sm","md","lg","xl","xxl"],XC=Symbol.for("vuetify:display"),gO={mobileBreakpoint:"lg",thresholds:{xs:0,sm:600,md:960,lg:1280,xl:1920,xxl:2560}},RX=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:gO;return La(gO,e)};function _O(e){return Gi&&!e?window.innerWidth:typeof e=="object"&&e.clientWidth||0}function vO(e){return Gi&&!e?window.innerHeight:typeof e=="object"&&e.clientHeight||0}function yO(e){const t=Gi&&!e?window.navigator.userAgent:"ssr";function n(P){return!!t.match(P)}const i=n(/android/i),r=n(/iphone|ipad|ipod/i),a=n(/cordova/i),l=n(/electron/i),h=n(/chrome/i),s=n(/edge/i),p=n(/firefox/i),v=n(/opera/i),x=n(/win/i),T=n(/mac/i),k=n(/linux/i);return{android:i,ios:r,cordova:a,electron:l,chrome:h,edge:s,firefox:p,opera:v,win:x,mac:T,linux:k,touch:q2,ssr:t==="ssr"}}function LX(e,t){const{thresholds:n,mobileBreakpoint:i}=RX(e),r=Xt(vO(t)),a=Xt(yO(t)),l=to({}),h=Xt(_O(t));function s(){r.value=vO(),h.value=_O()}function p(){s(),a.value=yO()}return zr(()=>{const v=h.value<n.sm,x=h.value<n.md&&!v,T=h.value<n.lg&&!(x||v),k=h.value<n.xl&&!(T||x||v),P=h.value<n.xxl&&!(k||T||x||v),M=h.value>=n.xxl,L=v?"xs":x?"sm":T?"md":k?"lg":P?"xl":"xxl",B=typeof i=="number"?i:n[i],F=h.value<B;l.xs=v,l.sm=x,l.md=T,l.lg=k,l.xl=P,l.xxl=M,l.smAndUp=!v,l.mdAndUp=!(v||x),l.lgAndUp=!(v||x||T),l.xlAndUp=!(v||x||T||k),l.smAndDown=!(T||k||P||M),l.mdAndDown=!(k||P||M),l.lgAndDown=!(P||M),l.xlAndDown=!M,l.name=L,l.height=r.value,l.width=h.value,l.mobile=F,l.mobileBreakpoint=i,l.platform=a.value,l.thresholds=n}),Gi&&(window.addEventListener("resize",s,{passive:!0}),io(()=>{window.removeEventListener("resize",s)},!0)),{...iv(l),update:p,ssr:!!t}}const Yp=st({mobile:{type:Boolean,default:!1},mobileBreakpoint:[Number,String]},"display");function Dl(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{mobile:null},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:cd();const n=xi(XC);if(!n)throw new Error("Could not find Vuetify display injection");const i=fe(()=>e.mobile?!0:typeof e.mobileBreakpoint=="number"?n.width.value<e.mobileBreakpoint:e.mobileBreakpoint?n.width.value<n.thresholds.value[e.mobileBreakpoint]:e.mobile===null?n.mobile.value:!1),r=Ue(()=>t?{[`${t}--mobile`]:i.value}:{});return{...n,displayClasses:r,mobile:i}}const s5=Symbol.for("vuetify:goto");function o5(){return{container:void 0,duration:300,layout:!1,offset:0,easing:"easeInOutCubic",patterns:VK}}function OX(e){return oA(e)??(document.scrollingElement||document.body)}function oA(e){return typeof e=="string"?document.querySelector(e):ZI(e)}function DE(e,t,n){if(typeof e=="number")return t&&n?-e:e;let i=oA(e),r=0;for(;i;)r+=t?i.offsetLeft:i.offsetTop,i=i.offsetParent;return r}function VX(e,t){return{rtl:t.isRtl,options:La(o5(),e)}}async function bO(e,t,n,i){const r=n?"scrollLeft":"scrollTop",a=La(i?.options??o5(),t),l=i?.rtl.value,h=(typeof e=="number"?e:oA(e))??0,s=a.container==="parent"&&h instanceof HTMLElement?h.parentElement:OX(a.container),p=nd()?a.patterns.instant:typeof a.easing=="function"?a.easing:a.patterns[a.easing];if(!p)throw new TypeError(`Easing function "${a.easing}" not found.`);let v;if(typeof h=="number")v=DE(h,n,l);else if(v=DE(h,n,l)-DE(s,n,l),a.layout){const P=window.getComputedStyle(h).getPropertyValue("--v-layout-top");P&&(v-=parseInt(P,10))}v+=a.offset,v=FX(s,v,!!l,!!n);const x=s[r]??0;if(v===x)return Promise.resolve(v);const T=performance.now();return new Promise(k=>requestAnimationFrame(function P(M){const B=(M-T)/a.duration,F=Math.floor(x+(v-x)*p(Sr(B,0,1)));if(s[r]=F,B>=1&&Math.abs(F-s[r])<10)return k(v);if(B>2)return k(s[r]);requestAnimationFrame(P)}))}function BX(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=xi(s5),{isRtl:n}=Ws();if(!t)throw new Error("[Vuetify] Could not find injected goto instance");const i={...t,rtl:Ue(()=>t.rtl.value||n.value)};async function r(a,l){return bO(a,La(e,l),!1,i)}return r.horizontal=async(a,l)=>bO(a,La(e,l),!0,i),r}function FX(e,t,n,i){const{scrollWidth:r,scrollHeight:a}=e,[l,h]=e===document.scrollingElement?[window.innerWidth,window.innerHeight]:[e.offsetWidth,e.offsetHeight];let s,p;return i?n?(s=-(r-l),p=0):(s=0,p=r-l):(s=0,p=a+-h),Sr(t,s,p)}const zX={collapse:"mdi-chevron-up",complete:"mdi-check",cancel:"mdi-close-circle",close:"mdi-close",delete:"mdi-close-circle",clear:"mdi-close-circle",success:"mdi-check-circle",info:"mdi-information",warning:"mdi-alert-circle",error:"mdi-close-circle",prev:"mdi-chevron-left",next:"mdi-chevron-right",checkboxOn:"mdi-checkbox-marked",checkboxOff:"mdi-checkbox-blank-outline",checkboxIndeterminate:"mdi-minus-box",delimiter:"mdi-circle",sortAsc:"mdi-arrow-up",sortDesc:"mdi-arrow-down",expand:"mdi-chevron-down",menu:"mdi-menu",subgroup:"mdi-menu-down",dropdown:"mdi-menu-down",radioOn:"mdi-radiobox-marked",radioOff:"mdi-radiobox-blank",edit:"mdi-pencil",ratingEmpty:"mdi-star-outline",ratingFull:"mdi-star",ratingHalf:"mdi-star-half-full",loading:"mdi-cached",first:"mdi-page-first",last:"mdi-page-last",unfold:"mdi-unfold-more-horizontal",file:"mdi-paperclip",plus:"mdi-plus",minus:"mdi-minus",calendar:"mdi-calendar",treeviewCollapse:"mdi-menu-down",treeviewExpand:"mdi-menu-right",tableGroupCollapse:"mdi-chevron-down",tableGroupExpand:"mdi-chevron-right",eyeDropper:"mdi-eyedropper",upload:"mdi-cloud-upload",color:"mdi-palette",command:"mdi-apple-keyboard-command",ctrl:"mdi-apple-keyboard-control",space:"mdi-keyboard-space",shift:"mdi-apple-keyboard-shift",alt:"mdi-apple-keyboard-option",enter:"mdi-keyboard-return",arrowup:"mdi-arrow-up",arrowdown:"mdi-arrow-down",arrowleft:"mdi-arrow-left",arrowright:"mdi-arrow-right",backspace:"mdi-backspace",play:"mdi-play",pause:"mdi-pause",fullscreen:"mdi-fullscreen",fullscreenExit:"mdi-fullscreen-exit",volumeHigh:"mdi-volume-high",volumeMedium:"mdi-volume-medium",volumeLow:"mdi-volume-low",volumeOff:"mdi-volume-variant-off"},NX={component:e=>Th(lA,{...e,class:"mdi"})},Cn=[String,Function,Object,Array],ZC=Symbol.for("vuetify:icons"),J1=st({icon:{type:Cn},tag:{type:[String,Object,Function],required:!0}},"icon"),YC=It()({name:"VComponentIcon",props:J1(),setup(e,t){let{slots:n}=t;return()=>{const i=e.icon;return ce(e.tag,null,{default:()=>[e.icon?ce(i,null,null):n.default?.()]})}}}),aA=ac({name:"VSvgIcon",inheritAttrs:!1,props:J1(),setup(e,t){let{attrs:n}=t;return()=>ce(e.tag,kt(n,{style:null}),{default:()=>[N("svg",{class:"v-icon__svg",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",role:"img","aria-hidden":"true"},[Array.isArray(e.icon)?e.icon.map(i=>Array.isArray(i)?N("path",{d:i[0],"fill-opacity":i[1]},null):N("path",{d:i},null)):N("path",{d:e.icon},null)])]})}}),UX=ac({name:"VLigatureIcon",props:J1(),setup(e){return()=>ce(e.tag,null,{default:()=>[e.icon]})}}),lA=ac({name:"VClassIcon",props:J1(),setup(e){return()=>ce(e.tag,{class:Tt(e.icon)},null)}});function $X(){return{svg:{component:aA},class:{component:lA}}}function jX(e){const t=$X(),n=e?.defaultSet??"mdi";return n==="mdi"&&!t.mdi&&(t.mdi=NX),La({defaultSet:n,sets:t,aliases:{...zX,vuetify:["M8.2241 14.2009L12 21L22 3H14.4459L8.2241 14.2009Z",["M7.26303 12.4733L7.00113 12L2 3H12.5261C12.5261 3 12.5261 3 12.5261 3L7.26303 12.4733Z",.6]],"vuetify-outline":"svg:M7.26 12.47 12.53 3H2L7.26 12.47ZM14.45 3 8.22 14.2 12 21 22 3H14.45ZM18.6 5 12 16.88 10.51 14.2 15.62 5ZM7.26 8.35 5.4 5H9.13L7.26 8.35Z","vuetify-play":["m6.376 13.184-4.11-7.192C1.505 4.66 2.467 3 4.003 3h8.532l-.953 1.576-.006.01-.396.677c-.429.732-.214 1.507.194 2.015.404.503 1.092.878 1.869.806a3.72 3.72 0 0 1 1.005.022c.276.053.434.143.523.237.138.146.38.635-.25 2.09-.893 1.63-1.553 1.722-1.847 1.677-.213-.033-.468-.158-.756-.406a4.95 4.95 0 0 1-.8-.927c-.39-.564-1.04-.84-1.66-.846-.625-.006-1.316.27-1.693.921l-.478.826-.911 1.506Z",["M9.093 11.552c.046-.079.144-.15.32-.148a.53.53 0 0 1 .43.207c.285.414.636.847 1.046 1.2.405.35.914.662 1.516.754 1.334.205 2.502-.698 3.48-2.495l.014-.028.013-.03c.687-1.574.774-2.852-.005-3.675-.37-.391-.861-.586-1.333-.676a5.243 5.243 0 0 0-1.447-.044c-.173.016-.393-.073-.54-.257-.145-.18-.127-.316-.082-.392l.393-.672L14.287 3h5.71c1.536 0 2.499 1.659 1.737 2.992l-7.997 13.996c-.768 1.344-2.706 1.344-3.473 0l-3.037-5.314 1.377-2.278.004-.006.004-.007.481-.831Z",.6]]}},e)}const WX=e=>{const t=xi(ZC);if(!t)throw new Error("Missing Vuetify Icons provide!");return{iconData:fe(()=>{const i=Ba(e);if(!i)return{component:YC};let r=i;if(typeof r=="string"&&(r=r.trim(),r.startsWith("$")&&(r=t.aliases?.[r.slice(1)])),Array.isArray(r))return{component:aA,icon:r};if(typeof r!="string")return{component:YC,icon:r};const a=Object.keys(t.sets).find(s=>typeof r=="string"&&r.startsWith(`${s}:`)),l=a?r.slice(a.length+1):r;return{component:t.sets[a??t.defaultSet].component,icon:l}})}},Sb=Symbol.for("vuetify:theme"),Ii=st({theme:String},"theme");function xO(){return{defaultTheme:"light",prefix:"v-",variations:{colors:[],lighten:0,darken:0},themes:{light:{dark:!1,colors:{background:"#FFFFFF",surface:"#FFFFFF","surface-bright":"#FFFFFF","surface-light":"#EEEEEE","surface-variant":"#424242","on-surface-variant":"#EEEEEE",primary:"#1867C0","primary-darken-1":"#1F5592",secondary:"#48A9A6","secondary-darken-1":"#018786",error:"#B00020",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"},variables:{"border-color":"#000000","border-opacity":.12,"high-emphasis-opacity":.87,"medium-emphasis-opacity":.6,"disabled-opacity":.38,"idle-opacity":.04,"hover-opacity":.04,"focus-opacity":.12,"selected-opacity":.08,"activated-opacity":.12,"pressed-opacity":.12,"dragged-opacity":.08,"theme-kbd":"#EEEEEE","theme-on-kbd":"#000000","theme-code":"#F5F5F5","theme-on-code":"#000000"}},dark:{dark:!0,colors:{background:"#121212",surface:"#212121","surface-bright":"#ccbfd6","surface-light":"#424242","surface-variant":"#c8c8c8","on-surface-variant":"#000000",primary:"#2196F3","primary-darken-1":"#277CC1",secondary:"#54B6B2","secondary-darken-1":"#48A9A6",error:"#CF6679",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"},variables:{"border-color":"#FFFFFF","border-opacity":.12,"high-emphasis-opacity":1,"medium-emphasis-opacity":.7,"disabled-opacity":.5,"idle-opacity":.1,"hover-opacity":.04,"focus-opacity":.12,"selected-opacity":.08,"activated-opacity":.12,"pressed-opacity":.16,"dragged-opacity":.08,"theme-kbd":"#424242","theme-on-kbd":"#FFFFFF","theme-code":"#343434","theme-on-code":"#CCCCCC"}}},stylesheetId:"vuetify-theme-stylesheet",scoped:!1,unimportant:!1,utilities:!0}}function HX(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:xO();const t=xO();if(!e)return{...t,isDisabled:!0};const n={};for(const[i,r]of Object.entries(e.themes??{})){const a=r.dark||i==="dark"?t.themes?.dark:t.themes?.light;n[i]=La(a,r)}return La(t,{...e,themes:n})}function ep(e,t,n,i){e.push(`${XX(t,i)} {
`,...n.map(r=>`  ${r};
`),`}
`)}function wO(e,t){const n=e.dark?2:1,i=e.dark?1:2,r=[];for(const[a,l]of Object.entries(e.colors)){const h=ec(l);r.push(`--${t}theme-${a}: ${h.r},${h.g},${h.b}`),a.startsWith("on-")||r.push(`--${t}theme-${a}-overlay-multiplier: ${KC(l)>.18?n:i}`)}for(const[a,l]of Object.entries(e.variables)){const h=typeof l=="string"&&l.startsWith("#")?ec(l):void 0,s=h?`${h.r}, ${h.g}, ${h.b}`:void 0;r.push(`--${t}${a}: ${s??l}`)}return r}function GX(e,t,n){const i={};if(n)for(const r of["lighten","darken"]){const a=r==="lighten"?CK:kK;for(const l of Ql(n[r],1))i[`${e}-${r}-${l}`]=HN(a(ec(t),l))}return i}function qX(e,t){if(!t)return{};let n={};for(const i of t.colors){const r=e[i];r&&(n={...n,...GX(i,r,t)})}return n}function KX(e){const t={};for(const n of Object.keys(e)){if(n.startsWith("on-")||e[`on-${n}`])continue;const i=`on-${n}`,r=ec(e[n]);t[i]=KN(r)}return t}function XX(e,t){if(!t)return e;const n=`:where(${t})`;return e===":root"?n:`${n} ${e}`}function ZX(e,t,n){const i=YX(e,t);i&&(i.innerHTML=n)}function YX(e,t){if(!Gi)return null;let n=document.getElementById(e);return n||(n=document.createElement("style"),n.id=e,n.type="text/css",t&&n.setAttribute("nonce",t),document.head.appendChild(n)),n}function JX(e){const t=HX(e),n=Xt(t.defaultTheme),i=at(t.themes),r=Xt("light"),a=fe({get(){return n.value==="system"?r.value:n.value},set(F){n.value=F}}),l=fe(()=>{const F={};for(const[X,J]of Object.entries(i.value)){const Q={...J.colors,...qX(J.colors,t.variations)};F[X]={...J,colors:{...Q,...KX(Q)}}}return F}),h=Ue(()=>l.value[a.value]),s=Ue(()=>n.value==="system"),p=fe(()=>{const F=[],X=t.unimportant?"":" !important",J=t.scoped?t.prefix:"";h.value?.dark&&ep(F,":root",["color-scheme: dark"],t.scope),ep(F,":root",wO(h.value,t.prefix),t.scope);for(const[Q,re]of Object.entries(l.value))ep(F,`.${t.prefix}theme--${Q}`,[`color-scheme: ${re.dark?"dark":"normal"}`,...wO(re,t.prefix)],t.scope);if(t.utilities){const Q=[],re=[],Z=new Set(Object.values(l.value).flatMap($=>Object.keys($.colors)));for(const $ of Z)$.startsWith("on-")?ep(re,`.${$}`,[`color: rgb(var(--${t.prefix}theme-${$}))${X}`],t.scope):(ep(Q,`.${J}bg-${$}`,[`--${t.prefix}theme-overlay-multiplier: var(--${t.prefix}theme-${$}-overlay-multiplier)`,`background-color: rgb(var(--${t.prefix}theme-${$}))${X}`,`color: rgb(var(--${t.prefix}theme-on-${$}))${X}`],t.scope),ep(re,`.${J}text-${$}`,[`color: rgb(var(--${t.prefix}theme-${$}))${X}`],t.scope),ep(re,`.${J}border-${$}`,[`--${t.prefix}border-color: var(--${t.prefix}theme-${$})`],t.scope));F.push(...Q,...re)}return F.map((Q,re)=>re===0?Q:`    ${Q}`).join("")}),v=Ue(()=>t.isDisabled?void 0:`${t.prefix}theme--${a.value}`),x=Ue(()=>Object.keys(l.value));if(XI){let X=function(){r.value=F.matches?"dark":"light"};var B=X;const F=window.matchMedia("(prefers-color-scheme: dark)");X(),F.addEventListener("change",X,{passive:!0}),rz()&&io(()=>{F.removeEventListener("change",X)})}function T(F){if(t.isDisabled)return;const X=F._context.provides.usehead;if(X){let re=function(){return{style:[{textContent:p.value,id:t.stylesheetId,nonce:t.cspNonce||!1}]}};var J=re;if(X.push){const Z=X.push(re);Gi&&Ht(p,()=>{Z.patch(re)})}else Gi?(X.addHeadObjs(Ue(re)),zr(()=>X.updateDOM())):X.addHeadObjs(re())}else{let re=function(){ZX(t.stylesheetId,t.cspNonce,p.value)};var Q=re;Gi?Ht(p,re,{immediate:!0}):re()}}function k(F){F!=="system"&&!x.value.includes(F)||(a.value=F)}function P(){let F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:x.value;const X=F.indexOf(a.value),J=X===-1?0:(X+1)%F.length;k(F[J])}function M(){let F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["light","dark"];P(F)}const L=new Proxy(a,{get(F,X){return Reflect.get(F,X)},set(F,X,J){return X==="value"&&kN(`theme.global.name.value = ${J}`,`theme.change('${J}')`),Reflect.set(F,X,J)}});return{install:T,change:k,cycle:P,toggle:M,isDisabled:t.isDisabled,isSystem:s,name:a,themes:i,current:h,computedThemes:l,prefix:t.prefix,themeClasses:v,styles:p,global:{name:L,current:h}}}function Zi(e){bs("provideTheme");const t=xi(Sb,null);if(!t)throw new Error("Could not find Vuetify theme injection");const n=Ue(()=>e.theme??t.name.value),i=Ue(()=>t.themes.value[n.value]),r=Ue(()=>t.isDisabled?void 0:`${t.prefix}theme--${n.value}`),a={...t,name:n,current:i,themeClasses:r};return Mr(Sb,a),a}function Q1(){bs("useTheme");const e=xi(Sb,null);if(!e)throw new Error("Could not find Vuetify theme injection");return e}function Lc(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"content";const n=Gw(),i=at();if(Gi){const r=new ResizeObserver(a=>{e?.(a,r),a.length&&(t==="content"?i.value=a[0].contentRect:i.value=a[0].target.getBoundingClientRect())});Yr(()=>{r.disconnect()}),Ht(()=>n.el,(a,l)=>{l&&(r.unobserve(l),i.value=void 0),a&&r.observe(a)},{flush:"post"})}return{resizeRef:n,contentRect:Mp(i)}}const Eb=Symbol.for("vuetify:layout"),a5=Symbol.for("vuetify:layout-item"),TO=1e3,l5=st({overlaps:{type:Array,default:()=>[]},fullHeight:Boolean},"layout"),Jp=st({name:{type:String},order:{type:[Number,String],default:0},absolute:Boolean},"layout-item");function c5(){const e=xi(Eb);if(!e)throw new Error("[Vuetify] Could not find injected layout");return{getLayoutItem:e.getLayoutItem,mainRect:e.mainRect,mainStyles:e.mainStyles}}function Qp(e){const t=xi(Eb);if(!t)throw new Error("[Vuetify] Could not find injected layout");const n=e.id??`layout-item-${aa()}`,i=bs("useLayoutItem");Mr(a5,{id:n});const r=Xt(!1);xI(()=>r.value=!0),zz(()=>r.value=!1);const{layoutItemStyles:a,layoutItemScrimStyles:l}=t.register(i,{...e,active:fe(()=>r.value?!1:e.active.value),id:n});return Yr(()=>t.unregister(n)),{layoutItemStyles:a,layoutRect:t.layoutRect,layoutItemScrimStyles:l}}const QX=(e,t,n,i)=>{let r={top:0,left:0,right:0,bottom:0};const a=[{id:"",layer:{...r}}];for(const l of e){const h=t.get(l),s=n.get(l),p=i.get(l);if(!h||!s||!p)continue;const v={...r,[h.value]:parseInt(r[h.value],10)+(p.value?parseInt(s.value,10):0)};a.push({id:l,layer:v}),r=v}return a};function u5(e){const t=xi(Eb,null),n=fe(()=>t?t.rootZIndex.value-100:TO),i=at([]),r=to(new Map),a=to(new Map),l=to(new Map),h=to(new Map),s=to(new Map),{resizeRef:p,contentRect:v}=Lc(),x=fe(()=>{const re=new Map,Z=e.overlaps??[];for(const $ of Z.filter(H=>H.includes(":"))){const[H,W]=$.split(":");if(!i.value.includes(H)||!i.value.includes(W))continue;const te=r.get(H),Y=r.get(W),ne=a.get(H),Se=a.get(W);!te||!Y||!ne||!Se||(re.set(W,{position:te.value,amount:parseInt(ne.value,10)}),re.set(H,{position:Y.value,amount:-parseInt(Se.value,10)}))}return re}),T=fe(()=>{const re=[...new Set([...l.values()].map($=>$.value))].sort(($,H)=>$-H),Z=[];for(const $ of re){const H=i.value.filter(W=>l.get(W)?.value===$);Z.push(...H)}return QX(Z,r,a,h)}),k=fe(()=>!Array.from(s.values()).some(re=>re.value)),P=fe(()=>T.value[T.value.length-1].layer),M=Ue(()=>({"--v-layout-left":dn(P.value.left),"--v-layout-right":dn(P.value.right),"--v-layout-top":dn(P.value.top),"--v-layout-bottom":dn(P.value.bottom),...k.value?void 0:{transition:"none"}})),L=fe(()=>T.value.slice(1).map((re,Z)=>{let{id:$}=re;const{layer:H}=T.value[Z],W=a.get($),te=r.get($);return{id:$,...H,size:Number(W.value),position:te.value}})),B=re=>L.value.find(Z=>Z.id===re),F=bs("createLayout"),X=Xt(!1);cs(()=>{X.value=!0}),Mr(Eb,{register:(re,Z)=>{let{id:$,order:H,position:W,layoutSize:te,elementSize:Y,active:ne,disableTransitions:Se,absolute:Fe}=Z;l.set($,H),r.set($,W),a.set($,te),h.set($,ne),Se&&s.set($,Se);const Ge=m_(a5,F?.vnode).indexOf(re);Ge>-1?i.value.splice(Ge,0,$):i.value.push($);const je=fe(()=>L.value.findIndex(Le=>Le.id===$)),Ae=fe(()=>n.value+T.value.length*2-je.value*2),Ke=fe(()=>{const Le=W.value==="left"||W.value==="right",We=W.value==="right",ct=W.value==="bottom",ut=Y.value??te.value,rt=ut===0?"%":"px",Qe={[W.value]:0,zIndex:Ae.value,transform:`translate${Le?"X":"Y"}(${(ne.value?0:-(ut===0?100:ut))*(We||ct?-1:1)}${rt})`,position:Fe.value||n.value!==TO?"absolute":"fixed",...k.value?void 0:{transition:"none"}};if(!X.value)return Qe;const Ct=L.value[je.value],At=x.value.get($);return At&&(Ct[At.position]+=At.amount),{...Qe,height:Le?`calc(100% - ${Ct.top}px - ${Ct.bottom}px)`:Y.value?`${Y.value}px`:void 0,left:We?void 0:`${Ct.left}px`,right:We?`${Ct.right}px`:void 0,top:W.value!=="bottom"?`${Ct.top}px`:void 0,bottom:W.value!=="top"?`${Ct.bottom}px`:void 0,width:Le?Y.value?`${Y.value}px`:void 0:`calc(100% - ${Ct.left}px - ${Ct.right}px)`}}),ve=fe(()=>({zIndex:Ae.value-1}));return{layoutItemStyles:Ke,layoutItemScrimStyles:ve,zIndex:Ae}},unregister:re=>{l.delete(re),r.delete(re),a.delete(re),h.delete(re),s.delete(re),i.value=i.value.filter(Z=>Z!==re)},mainRect:P,mainStyles:M,getLayoutItem:B,items:L,layoutRect:v,rootZIndex:n});const J=Ue(()=>["v-layout",{"v-layout--full-height":e.fullHeight}]),Q=Ue(()=>({zIndex:t?n.value:void 0,position:t?"relative":void 0,overflow:t?"hidden":void 0}));return{layoutClasses:J,layoutStyles:Q,getLayoutItem:B,items:L,layoutRect:v,layoutRef:p}}function d5(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{blueprint:t,...n}=e,i=La(t,n),{aliases:r={},components:a={},directives:l={}}=i,h=P_();return h.run(()=>{const s=PK(i.defaults),p=LX(i.display,i.ssr),v=JX(i.theme),x=jX(i.icons),T=WK(i.locale),k=MX(i.date,T),P=VX(i.goTo,T);function M(B){for(const X in l)B.directive(X,l[X]);for(const X in a)B.component(X,a[X]);for(const X in r)B.component(X,ac({...r[X],name:X,aliasName:r[X].name}));const F=P_();if(F.run(()=>{v.install(B)}),B.onUnmount(()=>F.stop()),B.provide(U_,s),B.provide(XC,p),B.provide(Sb,v),B.provide(ZC,x),B.provide($_,T),B.provide(n5,k.options),B.provide(pO,k.instance),B.provide(s5,P),Gi&&i.ssr)if(B.$nuxt)B.$nuxt.hook("app:suspense:resolve",()=>{p.update()});else{const{mount:X}=B;B.mount=function(){const J=X(...arguments);return Gn(()=>p.update()),B.mount=X,J}}B.mixin({computed:{$vuetify(){return to({defaults:n_.call(this,U_),display:n_.call(this,XC),theme:n_.call(this,Sb),icons:n_.call(this,ZC),locale:n_.call(this,$_),date:n_.call(this,pO)})}}})}function L(){h.stop()}return{install:M,unmount:L,defaults:s,display:p,theme:v,icons:x,locale:T,date:k,goTo:P}})}const eZ="3.10.8";d5.version=eZ;function n_(e){const t=this.$,n=t.parent?.provides??t.vnode.appContext?.provides;if(n&&e in n)return n[e]}const SO="route-animation-arrived",tZ=950;function nZ(){const e=at(!1),t=at(0),n=at(0),i=at(0),r=at([]);let a=null,l=0,h=null;function s(L){h=L}function p(){h=null}function v(){a!=null&&(cancelAnimationFrame(a),a=null)}function x(){v(),t.value=0,n.value=0,e.value=!1,h?.(t.value)}function T(){if(r.value.length){if(v(),i.value=r.value.length,t.value=Math.min(t.value,i.value-1),n.value=0,h?.(t.value),r.value.length<=1){window.dispatchEvent(new CustomEvent(SO));return}e.value=!0,l=performance.now(),a=requestAnimationFrame(P)}}function k(){e.value=!1,v()}function P(L){if(!e.value)return;const B=L-l;for(l=L,n.value+=B/tZ;n.value>=1&&e.value;)if(n.value-=1,t.value<Math.max(r.value.length-1,0))t.value+=1,h?.(t.value);else{M();return}a=requestAnimationFrame(P)}function M(){v(),e.value=!1,n.value=0,window.dispatchEvent(new CustomEvent(SO))}return{isPlaying:e,progressIndex:t,segmentProgress:n,totalStops:i,routeStationIds:r,startAnimation:T,pauseAnimation:k,resetAnimation:x,attachRenderer:s,detachRenderer:p}}const EO=new Set(["BPL","SWPL","SEPL","PEPLRT","PWLRT"]),_f=new Map;let CO=!1;function Xd(e,t){return`${e} (${t})`}function my(e,t,n=1){_f.has(e)||_f.set(e,[]),_f.has(t)||_f.set(t,[]),_f.get(e).push({to:t,weight:n}),_f.get(t).push({to:e,weight:n})}function iZ(){if(CO)return;Object.entries(Ef).forEach(([t,n])=>{n.forEach((i,r)=>{const a=Xd(i,t);if(r>0&&my(a,Xd(n[r-1],t),1),r<n.length-1&&my(a,Xd(n[r+1],t),1),EO.has(t)&&r===n.length-1&&r>0){const l=Xd(n[1],t);my(a,l,1)}if(EO.has(t)&&r===1&&n.length>2){const l=Xd(n[n.length-1],t);my(a,l,1)}})});const e=new Map;Object.entries(Ef).forEach(([t,n])=>{n.forEach(i=>{e.has(i)||e.set(i,[]),e.get(i).push(t)})}),e.forEach((t,n)=>{if(!(t.length<2))for(let i=0;i<t.length;i+=1)for(let r=i+1;r<t.length;r+=1)my(Xd(n,t[i]),Xd(n,t[r]),.5)}),CO=!0}function rZ(e,t){if(!e||!t)return null;iZ();const n=Object.keys(Ef).filter(T=>Ef[T].includes(e)).map(T=>Xd(e,T)),i=Object.keys(Ef).filter(T=>Ef[T].includes(t)).map(T=>Xd(t,T));if(!n.length||!i.length)return null;const r=new Map,a=new Map,l=[];function h(T,k){l.push({node:T,distance:k}),l.sort((P,M)=>P.distance-M.distance)}_f.forEach((T,k)=>r.set(k,1/0)),n.forEach(T=>{r.set(T,0),h(T,0)});const s=new Set(i);let p=null;for(;l.length;){const{node:T,distance:k}=l.shift();if(k!==r.get(T))continue;if(s.has(T)){p=T;break}(_f.get(T)||[]).forEach(({to:M,weight:L})=>{const B=k+L;B<r.get(M)&&(r.set(M,B),a.set(M,T),h(M,B))})}if(!p)return null;const v=[];let x=p;for(;x;){const T=x.match(/^(.*) \((.*)\)$/);v.unshift({station:T?T[1]:x,line:T?T[2]:"?"}),x=a.get(x)}return{steps:v,totalWeight:r.get(p)}}function sZ(e){const t=Math.max(0,Math.round(e)),n=Math.max(0,Math.round((e-t)*2));return Math.round(t*2.2+n*4+3)}function oZ(e){const t=Math.max(0,Math.round(e)),n=Math.round((e-t)*2);return Number((t*1.1+n*.3).toFixed(1))}function aZ(e,t){const n=Ef[e.line]||[],i=n.indexOf(e.station),r=n.indexOf(t.station);return Math.abs(r-i)}function lZ(e){if(!e?.steps?.length)return[];const t=[];let n=0;for(;n<e.steps.length-1;){const i=e.steps[n];let r=n+1;for(;r<e.steps.length&&e.steps[r].line===i.line;)r+=1;const a=e.steps[r-1];t.push({line:i.line,from:i.station,to:a.station,stops:aZ(i,a)}),n=r}return t}function cA(){return{allStations:SN,shortestPath:rZ,estimateTimeMinutes:sZ,estimateDistanceKm:oZ,summariseSegments:lZ}}const cZ=[{max:3.2,fare:1.19},{max:4.2,fare:1.29},{max:5.2,fare:1.4},{max:6.2,fare:1.5},{max:7.2,fare:1.59},{max:8.2,fare:1.66},{max:9.2,fare:1.73},{max:10.2,fare:1.77},{max:11.2,fare:1.81},{max:12.2,fare:1.85},{max:13.2,fare:1.89},{max:14.2,fare:1.93},{max:15.2,fare:1.98},{max:16.2,fare:2.02},{max:17.2,fare:2.06},{max:18.2,fare:2.1},{max:19.2,fare:2.14},{max:20.2,fare:2.17},{max:21.2,fare:2.2},{max:22.2,fare:2.23},{max:23.2,fare:2.26},{max:24.2,fare:2.28},{max:25.2,fare:2.3},{max:26.2,fare:2.32},{max:27.2,fare:2.33},{max:28.2,fare:2.34},{max:29.2,fare:2.35},{max:30.2,fare:2.36},{max:31.2,fare:2.37},{max:32.2,fare:2.38},{max:33.2,fare:2.39},{max:34.2,fare:2.4},{max:35.2,fare:2.41},{max:36.2,fare:2.42},{max:37.2,fare:2.43},{max:38.2,fare:2.44},{max:39.2,fare:2.45},{max:40.2,fare:2.46},{max:1/0,fare:2.47}],uZ=[{max:3.2,fare:.52},{max:4.2,fare:.57},{max:5.2,fare:.63},{max:6.2,fare:.68},{max:7.2,fare:.71},{max:1/0,fare:.74}],dZ=[{max:3.2,fare:.69},{max:4.2,fare:.76},{max:5.2,fare:.84},{max:6.2,fare:.91},{max:7.2,fare:.97},{max:1/0,fare:1.03}],hZ=[{max:3.2,fare:.78},{max:4.2,fare:.86},{max:5.2,fare:.95},{max:6.2,fare:1.03},{max:7.2,fare:1.1},{max:8.2,fare:1.16},{max:9.2,fare:1.22},{max:10.2,fare:1.25},{max:11.2,fare:1.28},{max:12.2,fare:1.31},{max:13.2,fare:1.34},{max:14.2,fare:1.37},{max:15.2,fare:1.4},{max:16.2,fare:1.43},{max:17.2,fare:1.46},{max:18.2,fare:1.49},{max:19.2,fare:1.52},{max:20.2,fare:1.55},{max:21.2,fare:1.58},{max:22.2,fare:1.61},{max:23.2,fare:1.64},{max:24.2,fare:1.66},{max:25.2,fare:1.67},{max:26.2,fare:1.68},{max:27.2,fare:1.69},{max:28.2,fare:1.7},{max:29.2,fare:1.71},{max:30.2,fare:1.72},{max:31.2,fare:1.73},{max:32.2,fare:1.74},{max:33.2,fare:1.75},{max:34.2,fare:1.76},{max:35.2,fare:1.77},{max:36.2,fare:1.78},{max:37.2,fare:1.79},{max:38.2,fare:1.8},{max:39.2,fare:1.81},{max:40.2,fare:1.82},{max:1/0,fare:1.83}],kO={train:{primary:21,secondary:26.5,polytechnic:26.5,university:48,ns:48,senior:58,disability:58,workfare:96,adult:128},bus:{primary:24,secondary:29,polytechnic:29,university:55.5,ns:55.5,senior:58,disability:58,workfare:96,adult:128},hybrid:{primary:39,secondary:49,polytechnic:49,university:81,ns:81,senior:58,disability:58,workfare:96,adult:128}};function fZ(e){switch(e){case"primary":case"secondary":case"polytechnic":return uZ;case"senior":case"disability":return dZ;case"workfare":return hZ;case"university":case"ns":case"adult":default:return cZ}}function h5(e,t){const n=fZ(t);for(const i of n)if(e<=i.max)return i.fare;return n[n.length-1].fare}function mZ({distanceKm:e,type:t,dailyTrips:n,workingDays:i}){const r=h5(e,t),a=r*n*i,h=["train","bus","hybrid"].map(s=>{const p=kO[s][t]??kO[s].adult,v=a-p;return{mode:s,passPrice:p,savings:v,worth:v>0}});return{singleFare:r,monthlyTotal:a,breakdown:h}}function f5(){return{fareByType:h5,analyseMonthlyPass:mZ}}const m5=Sh("v-alert-title"),sl=st({border:[Boolean,Number,String]},"border");function Rl(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:cd();return{borderClasses:fe(()=>{const i=e.border;return i===!0||i===""?`${t}--border`:typeof i=="string"||i===0?String(i).split(" ").map(r=>`border-${r}`):[]})}}const pZ=[null,"default","comfortable","compact"],xs=st({density:{type:String,default:"default",validator:e=>pZ.includes(e)}},"density");function $a(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:cd();return{densityClasses:Ue(()=>`${t}--density-${e.density}`)}}const Hs=st({elevation:{type:[Number,String],validator(e){const t=parseInt(e);return!isNaN(t)&&t>=0&&t<=24}}},"elevation");function vo(e){return{elevationClasses:Ue(()=>{const n=Rs(e)?e.value:e.elevation;return n==null?[]:[`elevation-${n}`]})}}const Nr=st({rounded:{type:[Boolean,Number,String],default:void 0},tile:Boolean},"rounded");function Qr(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:cd();return{roundedClasses:fe(()=>{const i=Rs(e)?e.value:e.rounded,r=Rs(e)?!1:e.tile,a=[];if(r||i===!1)a.push("rounded-0");else if(i===!0||i==="")a.push(`${t}--rounded`);else if(typeof i=="string"||i===0)for(const l of String(i).split(" "))a.push(`rounded-${l}`);return a})}}const ti=st({tag:{type:[String,Object,Function],default:"div"}},"tag");function uA(e){return JI(()=>{const{class:t,style:n}=gZ(e);return{colorClasses:t,colorStyles:n}})}function Fo(e){const{colorClasses:t,colorStyles:n}=uA(()=>({text:Ba(e)}));return{textColorClasses:t,textColorStyles:n}}function tr(e){const{colorClasses:t,colorStyles:n}=uA(()=>({background:Ba(e)}));return{backgroundColorClasses:t,backgroundColorStyles:n}}function gZ(e){const t=Ba(e),n=[],i={};if(t.background)if(GC(t.background)){if(i.backgroundColor=t.background,!t.text&&wK(t.background)){const r=ec(t.background);if(r.a==null||r.a===1){const a=KN(r);i.color=a,i.caretColor=a}}}else n.push(`bg-${t.background}`);return t.text&&(GC(t.text)?(i.color=t.text,i.caretColor=t.text):n.push(`text-${t.text}`)),{class:n,style:i}}const _Z=["elevated","flat","tonal","outlined","text","plain"];function sm(e,t){return N(sn,null,[e&&N("span",{key:"overlay",class:Tt(`${t}__overlay`)},null),N("span",{key:"underlay",class:Tt(`${t}__underlay`)},null)])}const Oc=st({color:String,variant:{type:String,default:"elevated",validator:e=>_Z.includes(e)}},"variant");function eg(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:cd();const n=Ue(()=>{const{variant:a}=Ba(e);return`${t}--variant-${a}`}),{colorClasses:i,colorStyles:r}=uA(()=>{const{variant:a,color:l}=Ba(e);return{[["elevated","flat"].includes(a)?"background":"text"]:l}});return{colorClasses:i,colorStyles:r,variantClasses:n}}const p5=st({baseColor:String,divided:Boolean,direction:{type:String,default:"horizontal"},...sl(),...vn(),...xs(),...Hs(),...Nr(),...ti(),...Ii(),...Oc()},"VBtnGroup"),JC=It()({name:"VBtnGroup",props:p5(),setup(e,t){let{slots:n}=t;const{themeClasses:i}=Zi(e),{densityClasses:r}=$a(e),{borderClasses:a}=Rl(e),{elevationClasses:l}=vo(e),{roundedClasses:h}=Qr(e);Jr({VBtn:{height:Ue(()=>e.direction==="horizontal"?"auto":null),baseColor:Ue(()=>e.baseColor),color:Ue(()=>e.color),density:Ue(()=>e.density),flat:!0,variant:Ue(()=>e.variant)}}),Vt(()=>ce(e.tag,{class:Tt(["v-btn-group",`v-btn-group--${e.direction}`,{"v-btn-group--divided":e.divided},i.value,a.value,r.value,l.value,h.value,e.class]),style:Qt(e.style)},n))}}),tg=st({modelValue:{type:null,default:void 0},multiple:Boolean,mandatory:[Boolean,String],max:Number,selectedClass:String,disabled:Boolean},"group"),ng=st({value:null,disabled:Boolean,selectedClass:String},"group-item");function Wf(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const i=bs("useGroupItem");if(!i)throw new Error("[Vuetify] useGroupItem composable must be used inside a component setup function");const r=aa();Mr(Symbol.for(`${t.description}:id`),r);const a=xi(t,null);if(!a){if(!n)return a;throw new Error(`[Vuetify] Could not find useGroup injection with symbol ${t.description}`)}const l=Ue(()=>e.value),h=fe(()=>!!(a.disabled.value||e.disabled));function s(){a?.register({id:r,value:l,disabled:h},i)}function p(){a?.unregister(r)}s(),Yr(()=>p());const v=fe(()=>a.isSelected(r)),x=fe(()=>a.items.value[0].id===r),T=fe(()=>a.items.value[a.items.value.length-1].id===r),k=fe(()=>v.value&&[a.selectedClass.value,e.selectedClass]);return Ht(v,P=>{i.emit("group:selected",{value:P})},{flush:"sync"}),{id:r,isSelected:v,isFirst:x,isLast:T,toggle:()=>a.select(r,!v.value),select:P=>a.select(r,P),selectedClass:k,value:l,disabled:h,group:a,register:s,unregister:p}}function om(e,t){let n=!1;const i=to([]),r=In(e,"modelValue",[],T=>T===void 0?[]:g5(i,T===null?[null]:Gr(T)),T=>{const k=yZ(i,T);return e.multiple?k:k[0]}),a=bs("useGroup");function l(T,k){const P=T,M=Symbol.for(`${t.description}:id`),B=m_(M,a?.vnode).indexOf(k);Si(P.value)===void 0&&(P.value=B,P.useIndexAsValue=!0),B>-1?i.splice(B,0,P):i.push(P)}function h(T){if(n)return;s();const k=i.findIndex(P=>P.id===T);i.splice(k,1)}function s(){const T=i.find(k=>!k.disabled);T&&e.mandatory==="force"&&!r.value.length&&(r.value=[T.id])}cs(()=>{s()}),Yr(()=>{n=!0}),wI(()=>{for(let T=0;T<i.length;T++)i[T].useIndexAsValue&&(i[T].value=T)});function p(T,k){const P=i.find(M=>M.id===T);if(!(k&&P?.disabled))if(e.multiple){const M=r.value.slice(),L=M.findIndex(F=>F===T),B=~L;if(k=k??!B,B&&e.mandatory&&M.length<=1||!B&&e.max!=null&&M.length+1>e.max)return;L<0&&k?M.push(T):L>=0&&!k&&M.splice(L,1),r.value=M}else{const M=r.value.includes(T);if(e.mandatory&&M||!M&&!k)return;r.value=k??!M?[T]:[]}}function v(T){if(e.multiple,r.value.length){const k=r.value[0],P=i.findIndex(B=>B.id===k);let M=(P+T)%i.length,L=i[M];for(;L.disabled&&M!==P;)M=(M+T)%i.length,L=i[M];if(L.disabled)return;r.value=[i[M].id]}else{const k=i.find(P=>!P.disabled);k&&(r.value=[k.id])}}const x={register:l,unregister:h,selected:r,select:p,disabled:Ue(()=>e.disabled),prev:()=>v(i.length-1),next:()=>v(1),isSelected:T=>r.value.includes(T),selectedClass:Ue(()=>e.selectedClass),items:Ue(()=>i),getItemIndex:T=>vZ(i,T)};return Mr(t,x),x}function vZ(e,t){const n=g5(e,[t]);return n.length?e.findIndex(i=>i.id===n[0]):-1}function g5(e,t){const n=[];return t.forEach(i=>{const r=e.find(l=>po(i,l.value)),a=e[i];r?.value!==void 0?n.push(r.id):a?.useIndexAsValue&&n.push(a.id)}),n}function yZ(e,t){const n=[];return t.forEach(i=>{const r=e.findIndex(a=>a.id===i);if(~r){const a=e[r];n.push(a.value!==void 0?a.value:r)}}),n}const dA=Symbol.for("vuetify:v-btn-toggle"),bZ=st({...p5(),...tg()},"VBtnToggle"),xZ=It()({name:"VBtnToggle",props:bZ(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{isSelected:i,next:r,prev:a,select:l,selected:h}=om(e,dA);return Vt(()=>{const s=JC.filterProps(e);return ce(JC,kt({class:["v-btn-toggle",e.class]},s,{style:e.style}),{default:()=>[n.default?.({isSelected:i,next:r,prev:a,select:l,selected:h})]})}),{next:r,prev:a,select:l}}}),wZ=st({defaults:Object,disabled:Boolean,reset:[Number,String],root:[Boolean,String],scoped:Boolean},"VDefaultsProvider"),ci=It(!1)({name:"VDefaultsProvider",props:wZ(),setup(e,t){let{slots:n}=t;const{defaults:i,disabled:r,reset:a,root:l,scoped:h}=iv(e);return Jr(i,{reset:a,root:l,scoped:h,disabled:r}),()=>n.default?.()}}),TZ=["x-small","small","default","large","x-large"],ud=st({size:{type:[String,Number],default:"default"}},"size");function sv(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:cd();return JI(()=>{const n=e.size;let i,r;return Hw(TZ,n)?i=`${t}--size-${n}`:n&&(r={width:dn(n),height:dn(n)}),{sizeClasses:i,sizeStyles:r}})}const SZ=st({color:String,disabled:Boolean,start:Boolean,end:Boolean,icon:Cn,opacity:[String,Number],...vn(),...ud(),...ti({tag:"i"}),...Ii()},"VIcon"),Hi=It()({name:"VIcon",props:SZ(),setup(e,t){let{attrs:n,slots:i}=t;const r=Xt(),{themeClasses:a}=Q1(),{iconData:l}=WX(()=>r.value||e.icon),{sizeClasses:h}=sv(e),{textColorClasses:s,textColorStyles:p}=Fo(()=>e.color);return Vt(()=>{const v=i.default?.();v&&(r.value=RN(v).filter(T=>T.type===t0&&T.children&&typeof T.children=="string")[0]?.children);const x=!!(n.onClick||n.onClickOnce);return ce(l.value.component,{tag:e.tag,icon:l.value.icon,class:Tt(["v-icon","notranslate",a.value,h.value,s.value,{"v-icon--clickable":x,"v-icon--disabled":e.disabled,"v-icon--start":e.start,"v-icon--end":e.end},e.class]),style:Qt([{"--v-icon-opacity":e.opacity},h.value?void 0:{fontSize:dn(e.size),height:dn(e.size),width:dn(e.size)},p.value,e.style]),role:x?"button":void 0,"aria-hidden":!x,tabindex:x?e.disabled?-1:0:void 0},{default:()=>[v]})}),{}}});function c0(e,t){const n=at(),i=Xt(!1);if(KI){const r=new IntersectionObserver(a=>{i.value=!!a.find(l=>l.isIntersecting)},t);io(()=>{r.disconnect()}),Ht(n,(a,l)=>{l&&(r.unobserve(l),i.value=!1),a&&r.observe(a)},{flush:"post"})}return{intersectionRef:n,isIntersecting:i}}const EZ=st({bgColor:String,color:String,indeterminate:[Boolean,String],modelValue:{type:[Number,String],default:0},rotate:{type:[Number,String],default:0},width:{type:[Number,String],default:4},...vn(),...ud(),...ti({tag:"div"}),...Ii()},"VProgressCircular"),Op=It()({name:"VProgressCircular",props:EZ(),setup(e,t){let{slots:n}=t;const i=20,r=2*Math.PI*i,a=at(),{themeClasses:l}=Zi(e),{sizeClasses:h,sizeStyles:s}=sv(e),{textColorClasses:p,textColorStyles:v}=Fo(()=>e.color),{textColorClasses:x,textColorStyles:T}=Fo(()=>e.bgColor),{intersectionRef:k,isIntersecting:P}=c0(),{resizeRef:M,contentRect:L}=Lc(),B=Ue(()=>Sr(parseFloat(e.modelValue),0,100)),F=Ue(()=>Number(e.width)),X=Ue(()=>s.value?Number(e.size):L.value?L.value.width:Math.max(F.value,32)),J=Ue(()=>i/(1-F.value/X.value)*2),Q=Ue(()=>F.value/X.value*J.value),re=Ue(()=>dn((100-B.value)/100*r));return zr(()=>{k.value=a.value,M.value=a.value}),Vt(()=>ce(e.tag,{ref:a,class:Tt(["v-progress-circular",{"v-progress-circular--indeterminate":!!e.indeterminate,"v-progress-circular--visible":P.value,"v-progress-circular--disable-shrink":e.indeterminate&&(e.indeterminate==="disable-shrink"||nd())},l.value,h.value,p.value,e.class]),style:Qt([s.value,v.value,e.style]),role:"progressbar","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":e.indeterminate?void 0:B.value},{default:()=>[N("svg",{style:{transform:`rotate(calc(-90deg + ${Number(e.rotate)}deg))`},xmlns:"http://www.w3.org/2000/svg",viewBox:`0 0 ${J.value} ${J.value}`},[N("circle",{class:Tt(["v-progress-circular__underlay",x.value]),style:Qt(T.value),fill:"transparent",cx:"50%",cy:"50%",r:i,"stroke-width":Q.value,"stroke-dasharray":r,"stroke-dashoffset":0},null),N("circle",{class:"v-progress-circular__overlay",fill:"transparent",cx:"50%",cy:"50%",r:i,"stroke-width":Q.value,"stroke-dasharray":r,"stroke-dashoffset":re.value},null)]),n.default&&N("div",{class:"v-progress-circular__content"},[n.default({value:B.value})])]})),{}}}),Ls=st({height:[Number,String],maxHeight:[Number,String],maxWidth:[Number,String],minHeight:[Number,String],minWidth:[Number,String],width:[Number,String]},"dimension");function Os(e){return{dimensionStyles:fe(()=>{const n={},i=dn(e.height),r=dn(e.maxHeight),a=dn(e.maxWidth),l=dn(e.minHeight),h=dn(e.minWidth),s=dn(e.width);return i!=null&&(n.height=i),r!=null&&(n.maxHeight=r),a!=null&&(n.maxWidth=a),l!=null&&(n.minHeight=l),h!=null&&(n.minWidth=h),s!=null&&(n.width=s),n})}}const IO={center:"center",top:"bottom",bottom:"top",left:"right",right:"left"},Eh=st({location:String},"location");function ig(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2?arguments[2]:void 0;const{isRtl:i}=Ws();return{locationStyles:fe(()=>{if(!e.location)return{};const{side:a,align:l}=WC(e.location.split(" ").length>1?e.location:`${e.location} center`,i.value);function h(p){return n?n(p):0}const s={};return a!=="center"&&(t?s[IO[a]]=`calc(100% - ${h(a)}px)`:s[a]=0),l!=="center"?t?s[IO[l]]=`calc(100% - ${h(l)}px)`:s[l]=0:(a==="center"?s.top=s.left="50%":s[{top:"left",bottom:"left",left:"top",right:"top"}[a]]="50%",s.transform={top:"translateX(-50%)",bottom:"translateX(-50%)",left:"translateY(-50%)",right:"translateY(-50%)",center:"translate(-50%, -50%)"}[a]),s})}}const CZ=st({chunkCount:{type:[Number,String],default:null},chunkWidth:{type:[Number,String],default:null},chunkGap:{type:[Number,String],default:4}},"chunks");function kZ(e,t){const n=Ue(()=>!!e.chunkCount||!!e.chunkWidth),i=fe(()=>{const h=Ba(t);if(!h)return 0;if(!e.chunkCount)return Number(e.chunkWidth);const s=Number(e.chunkCount);return(h-Number(e.chunkGap)*(s-1))/s}),r=Ue(()=>Number(e.chunkGap)),a=fe(()=>{if(!n.value)return{};const h=dn(r.value),s=dn(i.value);return{maskRepeat:"repeat-x",maskImage:`linear-gradient(90deg, #000, #000 ${s}, transparent ${s}, transparent)`,maskSize:`calc(${s} + ${h}) 100%`}});function l(h){const s=Ba(t);if(!s)return h;const p=100*r.value/s,v=100*(i.value+r.value)/s,x=Math.floor((h+p)/v);return Sr(0,x*v-p/2,100)}return{hasChunks:n,chunksMaskStyles:a,snapValueToChunk:l}}const IZ=st({absolute:Boolean,active:{type:Boolean,default:!0},bgColor:String,bgOpacity:[Number,String],bufferValue:{type:[Number,String],default:0},bufferColor:String,bufferOpacity:[Number,String],clickable:Boolean,color:String,height:{type:[Number,String],default:4},indeterminate:Boolean,max:{type:[Number,String],default:100},modelValue:{type:[Number,String],default:0},opacity:[Number,String],reverse:Boolean,stream:Boolean,striped:Boolean,roundedBar:Boolean,...CZ(),...vn(),...Eh({location:"top"}),...Nr(),...ti(),...Ii()},"VProgressLinear"),eT=It()({name:"VProgressLinear",props:IZ(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const i=at(),r=In(e,"modelValue"),{isRtl:a,rtlClasses:l}=Ws(),{themeClasses:h}=Zi(e),{locationStyles:s}=ig(e),{textColorClasses:p,textColorStyles:v}=Fo(()=>e.color),{backgroundColorClasses:x,backgroundColorStyles:T}=tr(()=>e.bgColor||e.color),{backgroundColorClasses:k,backgroundColorStyles:P}=tr(()=>e.bufferColor||e.bgColor||e.color),{backgroundColorClasses:M,backgroundColorStyles:L}=tr(()=>e.color),{roundedClasses:B}=Qr(e),{intersectionRef:F,isIntersecting:X}=c0(),J=fe(()=>parseFloat(e.max)),Q=fe(()=>parseFloat(e.height)),re=fe(()=>Sr(parseFloat(e.bufferValue)/J.value*100,0,100)),Z=fe(()=>Sr(parseFloat(r.value)/J.value*100,0,100)),$=fe(()=>a.value!==e.reverse),H=fe(()=>e.indeterminate?"fade-transition":"slide-x-transition"),W=Xt(0),{hasChunks:te,chunksMaskStyles:Y,snapValueToChunk:ne}=kZ(e,W);ra(te,()=>{const{resizeRef:Ge}=Lc(je=>W.value=je[0].contentRect.width);zr(()=>Ge.value=i.value)});const Se=fe(()=>te.value?ne(re.value):re.value),Fe=fe(()=>te.value?ne(Z.value):Z.value);function Ve(Ge){if(!F.value)return;const{left:je,right:Ae,width:Ke}=F.value.getBoundingClientRect(),ve=$.value?Ke-Ge.clientX+(Ae-Ke):Ge.clientX-je;r.value=Math.round(ve/Ke*J.value)}return zr(()=>{F.value=i.value}),Vt(()=>ce(e.tag,{ref:i,class:Tt(["v-progress-linear",{"v-progress-linear--absolute":e.absolute,"v-progress-linear--active":e.active&&X.value,"v-progress-linear--reverse":$.value,"v-progress-linear--rounded":e.rounded,"v-progress-linear--rounded-bar":e.roundedBar,"v-progress-linear--striped":e.striped,"v-progress-linear--clickable":e.clickable},B.value,h.value,l.value,e.class]),style:Qt([{bottom:e.location==="bottom"?0:void 0,top:e.location==="top"?0:void 0,height:e.active?dn(Q.value):0,"--v-progress-linear-height":dn(Q.value),...e.absolute?s.value:{}},Y.value,e.style]),role:"progressbar","aria-hidden":e.active?"false":"true","aria-valuemin":"0","aria-valuemax":e.max,"aria-valuenow":e.indeterminate?void 0:Math.min(parseFloat(r.value),J.value),onClick:e.clickable&&Ve},{default:()=>[e.stream&&N("div",{key:"stream",class:Tt(["v-progress-linear__stream",p.value]),style:{...v.value,[$.value?"left":"right"]:dn(-Q.value),borderTop:`${dn(Q.value/2)} dotted`,opacity:parseFloat(e.bufferOpacity),top:`calc(50% - ${dn(Q.value/4)})`,width:dn(100-re.value,"%"),"--v-progress-linear-stream-to":dn(Q.value*($.value?1:-1))}},null),N("div",{class:Tt(["v-progress-linear__background",x.value]),style:Qt([T.value,{opacity:parseFloat(e.bgOpacity),width:e.stream?0:void 0}])},null),N("div",{class:Tt(["v-progress-linear__buffer",k.value]),style:Qt([P.value,{opacity:parseFloat(e.bufferOpacity),width:dn(Se.value,"%")}])},null),ce(fh,{name:H.value},{default:()=>[e.indeterminate?N("div",{class:"v-progress-linear__indeterminate"},[["long","short"].map(Ge=>N("div",{key:Ge,class:Tt(["v-progress-linear__indeterminate",Ge,M.value]),style:Qt(L.value)},null))]):N("div",{class:Tt(["v-progress-linear__determinate",M.value]),style:Qt([L.value,{width:dn(Fe.value,"%")}])},null)]}),n.default&&N("div",{class:"v-progress-linear__content"},[n.default({value:Z.value,buffer:re.value})])]})),{}}}),tT=st({loading:[Boolean,String]},"loader");function u0(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:cd();return{loaderClasses:Ue(()=>({[`${t}--loading`]:e.loading}))}}function d0(e,t){let{slots:n}=t;return N("div",{class:Tt(`${e.name}__loader`)},[n.default?.({color:e.color,isActive:e.active})||ce(eT,{absolute:e.absolute,active:e.active,color:e.color,height:"2",indeterminate:!0},null)])}const AZ=["static","relative","fixed","absolute","sticky"],ov=st({position:{type:String,validator:e=>AZ.includes(e)}},"position");function av(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:cd();return{positionClasses:Ue(()=>e.position?`${t}--${e.position}`:void 0)}}function PZ(){const e=bs("useRoute");return fe(()=>e?.proxy?.$route)}function _5(){return bs("useRouter")?.proxy?.$router}function h0(e,t){const n=Wz("RouterLink"),i=Ue(()=>!!(e.href||e.to)),r=fe(()=>i?.value||qL(t,"click")||qL(e,"click"));if(typeof n=="string"||!("useLink"in n)){const x=Ue(()=>e.href);return{isLink:i,isRouterLink:Ue(()=>!1),isClickable:r,href:x,linkProps:to({href:x})}}const a=n.useLink({to:Ue(()=>e.to||""),replace:Ue(()=>e.replace)}),l=fe(()=>e.to?a:void 0),h=PZ(),s=fe(()=>l.value?e.exact?h.value?l.value.isExactActive?.value&&po(l.value.route.value.query,h.value.query):l.value.isExactActive?.value??!1:l.value.isActive?.value??!1:!1),p=fe(()=>e.to?l.value?.route.value.href:e.href),v=Ue(()=>!!e.to);return{isLink:i,isRouterLink:v,isClickable:r,isActive:s,route:l.value?.route,navigate:l.value?.navigate,href:p,linkProps:to({href:p,"aria-current":Ue(()=>s.value?"page":void 0),"aria-disabled":Ue(()=>e.disabled&&i.value?"true":void 0),tabindex:Ue(()=>e.disabled&&i.value?"-1":void 0)})}}const f0=st({href:String,replace:Boolean,to:[String,Object],exact:Boolean},"router");let RE=!1;function MZ(e,t){let n=!1,i,r;Gi&&e?.beforeEach&&(Gn(()=>{window.addEventListener("popstate",a),i=e.beforeEach((l,h,s)=>{RE?n?t(s):s():setTimeout(()=>n?t(s):s()),RE=!0}),r=e?.afterEach(()=>{RE=!1})}),io(()=>{window.removeEventListener("popstate",a),i?.(),r?.()}));function a(l){l.state?.replaced||(n=!0,setTimeout(()=>n=!1))}}function DZ(e,t){Ht(()=>e.isActive?.value,n=>{e.isLink.value&&n!=null&&t&&Gn(()=>{t(n)})},{immediate:!0})}const QC=Symbol("rippleStop"),RZ=80;function AO(e,t){e.style.transform=t,e.style.webkitTransform=t}function ek(e){return e.constructor.name==="TouchEvent"}function v5(e){return e.constructor.name==="KeyboardEvent"}const LZ=function(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=0,r=0;if(!v5(e)){const x=t.getBoundingClientRect(),T=ek(e)?e.touches[e.touches.length-1]:e;i=T.clientX-x.left,r=T.clientY-x.top}let a=0,l=.3;t._ripple?.circle?(l=.15,a=t.clientWidth/2,a=n.center?a:a+Math.sqrt((i-a)**2+(r-a)**2)/4):a=Math.sqrt(t.clientWidth**2+t.clientHeight**2)/2;const h=`${(t.clientWidth-a*2)/2}px`,s=`${(t.clientHeight-a*2)/2}px`,p=n.center?h:`${i-a}px`,v=n.center?s:`${r-a}px`;return{radius:a,scale:l,x:p,y:v,centerX:h,centerY:s}},Qw={show(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!t?._ripple?.enabled)return;const i=document.createElement("span"),r=document.createElement("span");i.appendChild(r),i.className="v-ripple__container",n.class&&(i.className+=` ${n.class}`);const{radius:a,scale:l,x:h,y:s,centerX:p,centerY:v}=LZ(e,t,n),x=`${a*2}px`;r.className="v-ripple__animation",r.style.width=x,r.style.height=x,t.appendChild(i);const T=window.getComputedStyle(t);T&&T.position==="static"&&(t.style.position="relative",t.dataset.previousPosition="static"),r.classList.add("v-ripple__animation--enter"),r.classList.add("v-ripple__animation--visible"),AO(r,`translate(${h}, ${s}) scale3d(${l},${l},${l})`),r.dataset.activated=String(performance.now()),requestAnimationFrame(()=>{requestAnimationFrame(()=>{r.classList.remove("v-ripple__animation--enter"),r.classList.add("v-ripple__animation--in"),AO(r,`translate(${p}, ${v}) scale3d(1,1,1)`)})})},hide(e){if(!e?._ripple?.enabled)return;const t=e.getElementsByClassName("v-ripple__animation");if(t.length===0)return;const n=Array.from(t).findLast(a=>!a.dataset.isHiding);if(n)n.dataset.isHiding="true";else return;const i=performance.now()-Number(n.dataset.activated),r=Math.max(250-i,0);setTimeout(()=>{n.classList.remove("v-ripple__animation--in"),n.classList.add("v-ripple__animation--out"),setTimeout(()=>{e.getElementsByClassName("v-ripple__animation").length===1&&e.dataset.previousPosition&&(e.style.position=e.dataset.previousPosition,delete e.dataset.previousPosition),n.parentNode?.parentNode===e&&e.removeChild(n.parentNode)},300)},r)}};function y5(e){return typeof e>"u"||!!e}function Cb(e){const t={},n=e.currentTarget;if(!(!n?._ripple||n._ripple.touched||e[QC])){if(e[QC]=!0,ek(e))n._ripple.touched=!0,n._ripple.isTouch=!0;else if(n._ripple.isTouch)return;if(t.center=n._ripple.centered||v5(e),n._ripple.class&&(t.class=n._ripple.class),ek(e)){if(n._ripple.showTimerCommit)return;n._ripple.showTimerCommit=()=>{Qw.show(e,n,t)},n._ripple.showTimer=window.setTimeout(()=>{n?._ripple?.showTimerCommit&&(n._ripple.showTimerCommit(),n._ripple.showTimerCommit=null)},RZ)}else Qw.show(e,n,t)}}function PO(e){e[QC]=!0}function Xl(e){const t=e.currentTarget;if(t?._ripple){if(window.clearTimeout(t._ripple.showTimer),e.type==="touchend"&&t._ripple.showTimerCommit){t._ripple.showTimerCommit(),t._ripple.showTimerCommit=null,t._ripple.showTimer=window.setTimeout(()=>{Xl(e)});return}window.setTimeout(()=>{t._ripple&&(t._ripple.touched=!1)}),Qw.hide(t)}}function b5(e){const t=e.currentTarget;t?._ripple&&(t._ripple.showTimerCommit&&(t._ripple.showTimerCommit=null),window.clearTimeout(t._ripple.showTimer))}let kb=!1;function MO(e,t){!kb&&t.includes(e.key)&&(kb=!0,Cb(e))}function x5(e){kb=!1,Xl(e)}function w5(e){kb&&(kb=!1,Xl(e))}function T5(e,t,n){const{value:i,modifiers:r}=t,a=y5(i);a||Qw.hide(e),e._ripple=e._ripple??{},e._ripple.enabled=a,e._ripple.centered=r.center,e._ripple.circle=r.circle;const l=bb(i)?i:{};l.class&&(e._ripple.class=l.class);const h=l.keys??["Enter","Space"];if(e._ripple.keyDownHandler=s=>MO(s,h),a&&!n){if(r.stop){e.addEventListener("touchstart",PO,{passive:!0}),e.addEventListener("mousedown",PO);return}e.addEventListener("touchstart",Cb,{passive:!0}),e.addEventListener("touchend",Xl,{passive:!0}),e.addEventListener("touchmove",b5,{passive:!0}),e.addEventListener("touchcancel",Xl),e.addEventListener("mousedown",Cb),e.addEventListener("mouseup",Xl),e.addEventListener("mouseleave",Xl),e.addEventListener("keydown",s=>MO(s,h)),e.addEventListener("keyup",x5),e.addEventListener("blur",w5),e.addEventListener("dragstart",Xl,{passive:!0})}else!a&&n&&S5(e)}function S5(e){e.removeEventListener("mousedown",Cb),e.removeEventListener("touchstart",Cb),e.removeEventListener("touchend",Xl),e.removeEventListener("touchmove",b5),e.removeEventListener("touchcancel",Xl),e.removeEventListener("mouseup",Xl),e.removeEventListener("mouseleave",Xl),e._ripple?.keyDownHandler&&e.removeEventListener("keydown",e._ripple.keyDownHandler),e.removeEventListener("keyup",x5),e.removeEventListener("dragstart",Xl),e.removeEventListener("blur",w5)}function OZ(e,t){T5(e,t,!1)}function VZ(e){S5(e),delete e._ripple}function BZ(e,t){if(t.value===t.oldValue)return;const n=y5(t.oldValue);T5(e,t,n)}const za={mounted:OZ,unmounted:VZ,updated:BZ},nT=st({active:{type:Boolean,default:void 0},activeColor:String,baseColor:String,symbol:{type:null,default:dA},flat:Boolean,icon:[Boolean,String,Function,Object],prependIcon:Cn,appendIcon:Cn,block:Boolean,readonly:Boolean,slim:Boolean,stacked:Boolean,spaced:String,ripple:{type:[Boolean,Object],default:!0},text:{type:[String,Number,Boolean],default:void 0},...sl(),...vn(),...xs(),...Ls(),...Hs(),...ng(),...tT(),...Eh(),...ov(),...Nr(),...f0(),...ud(),...ti({tag:"button"}),...Ii(),...Oc({variant:"elevated"})},"VBtn"),mi=It()({name:"VBtn",props:nT(),emits:{"group:selected":e=>!0},setup(e,t){let{attrs:n,slots:i}=t;const{themeClasses:r}=Zi(e),{borderClasses:a}=Rl(e),{densityClasses:l}=$a(e),{dimensionStyles:h}=Os(e),{elevationClasses:s}=vo(e),{loaderClasses:p}=u0(e),{locationStyles:v}=ig(e),{positionClasses:x}=av(e),{roundedClasses:T}=Qr(e),{sizeClasses:k,sizeStyles:P}=sv(e),M=Wf(e,e.symbol,!1),L=h0(e,n),B=fe(()=>e.active!==void 0?e.active:L.isRouterLink.value?L.isActive?.value:M?.isSelected.value),F=Ue(()=>B.value?e.activeColor??e.color:e.color),X=fe(()=>({color:M?.isSelected.value&&(!L.isLink.value||L.isActive?.value)||!M||L.isActive?.value?F.value??e.baseColor:e.baseColor,variant:e.variant})),{colorClasses:J,colorStyles:Q,variantClasses:re}=eg(X),Z=fe(()=>M?.disabled.value||e.disabled),$=Ue(()=>e.variant==="elevated"&&!(e.disabled||e.flat||e.border)),H=fe(()=>{if(!(e.value===void 0||typeof e.value=="symbol"))return Object(e.value)===e.value?JSON.stringify(e.value,null,0):e.value});function W(te){Z.value||L.isLink.value&&(te.metaKey||te.ctrlKey||te.shiftKey||te.button!==0||n.target==="_blank")||(L.isRouterLink.value?L.navigate?.(te):M?.toggle())}return DZ(L,M?.select),Vt(()=>{const te=L.isLink.value?"a":e.tag,Y=!!(e.prependIcon||i.prepend),ne=!!(e.appendIcon||i.append),Se=!!(e.icon&&e.icon!==!0);return vi(ce(te,kt(L.linkProps,{type:te==="a"?void 0:"button",class:["v-btn",M?.selectedClass.value,{"v-btn--active":B.value,"v-btn--block":e.block,"v-btn--disabled":Z.value,"v-btn--elevated":$.value,"v-btn--flat":e.flat,"v-btn--icon":!!e.icon,"v-btn--loading":e.loading,"v-btn--readonly":e.readonly,"v-btn--slim":e.slim,"v-btn--stacked":e.stacked},e.spaced?["v-btn--spaced",`v-btn--spaced-${e.spaced}`]:[],r.value,a.value,J.value,l.value,s.value,p.value,x.value,T.value,k.value,re.value,e.class],style:[Q.value,h.value,v.value,P.value,e.style],"aria-busy":e.loading?!0:void 0,disabled:Z.value&&te!=="a"||void 0,tabindex:e.loading||e.readonly?-1:void 0,onClick:W,value:H.value}),{default:()=>[sm(!0,"v-btn"),!e.icon&&Y&&N("span",{key:"prepend",class:"v-btn__prepend"},[i.prepend?ce(ci,{key:"prepend-defaults",disabled:!e.prependIcon,defaults:{VIcon:{icon:e.prependIcon}}},i.prepend):ce(Hi,{key:"prepend-icon",icon:e.prependIcon},null)]),N("span",{class:"v-btn__content","data-no-activator":""},[!i.default&&Se?ce(Hi,{key:"content-icon",icon:e.icon},null):ce(ci,{key:"content-defaults",disabled:!Se,defaults:{VIcon:{icon:e.icon}}},{default:()=>[i.default?.()??an(e.text)]})]),!e.icon&&ne&&N("span",{key:"append",class:"v-btn__append"},[i.append?ce(ci,{key:"append-defaults",disabled:!e.appendIcon,defaults:{VIcon:{icon:e.appendIcon}}},i.append):ce(Hi,{key:"append-icon",icon:e.appendIcon},null)]),!!e.loading&&N("span",{key:"loader",class:"v-btn__loader"},[i.loader?.()??ce(Op,{color:typeof e.loading=="boolean"?void 0:e.loading,indeterminate:!0,width:"2"},null)])]}),[[za,!Z.value&&e.ripple,"",{center:!!e.icon}]])}),{group:M}}}),FZ=st({iconSize:[Number,String],iconSizes:{type:Array,default:()=>[["x-small",10],["small",16],["default",24],["large",28],["x-large",32]]}},"iconSize");function zZ(e,t){return{iconSize:fe(()=>{const i=new Map(e.iconSizes),r=e.iconSize??t()??"default";return i.has(r)?i.get(r):r})}}const NZ=["success","info","warning","error"],UZ=st({border:{type:[Boolean,String],validator:e=>typeof e=="boolean"||["top","end","bottom","start"].includes(e)},borderColor:String,closable:Boolean,closeIcon:{type:Cn,default:"$close"},closeLabel:{type:String,default:"$vuetify.close"},icon:{type:[Boolean,String,Function,Object],default:null},modelValue:{type:Boolean,default:!0},prominent:Boolean,title:String,text:String,type:{type:String,validator:e=>NZ.includes(e)},...vn(),...xs(),...Ls(),...Hs(),...FZ(),...Eh(),...ov(),...Nr(),...ti(),...Ii(),...Oc({variant:"flat"})},"VAlert"),E5=It()({name:"VAlert",props:UZ(),emits:{"click:close":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{emit:n,slots:i}=t;const r=In(e,"modelValue"),a=Ue(()=>{if(e.icon!==!1)return e.type?e.icon??`$${e.type}`:e.icon}),{iconSize:l}=zZ(e,()=>e.prominent?44:void 0),{themeClasses:h}=Zi(e),{colorClasses:s,colorStyles:p,variantClasses:v}=eg(()=>({color:e.color??e.type,variant:e.variant})),{densityClasses:x}=$a(e),{dimensionStyles:T}=Os(e),{elevationClasses:k}=vo(e),{locationStyles:P}=ig(e),{positionClasses:M}=av(e),{roundedClasses:L}=Qr(e),{textColorClasses:B,textColorStyles:F}=Fo(()=>e.borderColor),{t:X}=dr(),J=Ue(()=>({"aria-label":X(e.closeLabel),onClick(Q){r.value=!1,n("click:close",Q)}}));return()=>{const Q=!!(i.prepend||a.value),re=!!(i.title||e.title),Z=!!(i.close||e.closable),$={density:e.density,icon:a.value,size:e.iconSize||e.prominent?l.value:void 0};return r.value&&ce(e.tag,{class:Tt(["v-alert",e.border&&{"v-alert--border":!!e.border,[`v-alert--border-${e.border===!0?"start":e.border}`]:!0},{"v-alert--prominent":e.prominent},h.value,s.value,x.value,k.value,M.value,L.value,v.value,e.class]),style:Qt([p.value,T.value,P.value,e.style]),role:"alert"},{default:()=>[sm(!1,"v-alert"),e.border&&N("div",{key:"border",class:Tt(["v-alert__border",B.value]),style:Qt(F.value)},null),Q&&N("div",{key:"prepend",class:"v-alert__prepend"},[i.prepend?ce(ci,{key:"prepend-defaults",disabled:!a.value,defaults:{VIcon:{...$}}},i.prepend):ce(Hi,kt({key:"prepend-icon"},$),null)]),N("div",{class:"v-alert__content"},[re&&ce(m5,{key:"title"},{default:()=>[i.title?.()??e.title]}),i.text?.()??e.text,i.default?.()]),i.append&&N("div",{key:"append",class:"v-alert__append"},[i.append()]),Z&&N("div",{key:"close",class:"v-alert__close"},[i.close?ce(ci,{key:"close-defaults",defaults:{VBtn:{icon:e.closeIcon,size:"x-small",variant:"text"}}},{default:()=>[i.close?.({props:J.value})]}):ce(mi,kt({key:"close-btn",icon:e.closeIcon,size:"x-small",variant:"text"},J.value),null)])]})}}}),$Z=st({...vn(),...ti()},"VCardActions"),C5=It()({name:"VCardActions",props:$Z(),setup(e,t){let{slots:n}=t;return Jr({VBtn:{slim:!0,variant:"text"}}),Vt(()=>ce(e.tag,{class:Tt(["v-card-actions",e.class]),style:Qt(e.style)},n)),{}}}),jZ=st({opacity:[Number,String],...vn(),...ti()},"VCardSubtitle"),k5=It()({name:"VCardSubtitle",props:jZ(),setup(e,t){let{slots:n}=t;return Vt(()=>ce(e.tag,{class:Tt(["v-card-subtitle",e.class]),style:Qt([{"--v-card-subtitle-opacity":e.opacity},e.style])},n)),{}}}),I5=Sh("v-card-title");function WZ(e){return{aspectStyles:fe(()=>{const t=Number(e.aspectRatio);return t?{paddingBottom:String(1/t*100)+"%"}:void 0})}}const A5=st({aspectRatio:[String,Number],contentClass:null,inline:Boolean,...vn(),...Ls()},"VResponsive"),tk=It()({name:"VResponsive",props:A5(),setup(e,t){let{slots:n}=t;const{aspectStyles:i}=WZ(e),{dimensionStyles:r}=Os(e);return Vt(()=>N("div",{class:Tt(["v-responsive",{"v-responsive--inline":e.inline},e.class]),style:Qt([r.value,e.style])},[N("div",{class:"v-responsive__sizer",style:Qt(i.value)},null),n.additional?.(),n.default&&N("div",{class:Tt(["v-responsive__content",e.contentClass])},[n.default()])])),{}}}),Ch=st({transition:{type:null,default:"fade-transition",validator:e=>e!==!0}},"transition"),Oa=(e,t)=>{let{slots:n}=t;const{transition:i,disabled:r,group:a,...l}=e,{component:h=a?AI:fh,...s}=bb(i)?i:{};let p;return bb(i)?p=kt(s,rK({disabled:r,group:a}),l):p=kt({name:r||!i?"":i},l),Th(h,p,n)};function HZ(e,t){if(!KI)return;const n=t.modifiers||{},i=t.value,{handler:r,options:a}=typeof i=="object"?i:{handler:i,options:{}},l=new IntersectionObserver(function(){let h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],s=arguments.length>1?arguments[1]:void 0;const p=e._observe?.[t.instance.$.uid];if(!p)return;const v=h.some(x=>x.isIntersecting);r&&(!n.quiet||p.init)&&(!n.once||v||p.init)&&r(v,h,s),v&&n.once?P5(e,t):p.init=!0},a);e._observe=Object(e._observe),e._observe[t.instance.$.uid]={init:!1,observer:l},l.observe(e)}function P5(e,t){const n=e._observe?.[t.instance.$.uid];n&&(n.observer.unobserve(e),delete e._observe[t.instance.$.uid])}const cu={mounted:HZ,unmounted:P5},M5=st({absolute:Boolean,alt:String,cover:Boolean,color:String,draggable:{type:[Boolean,String],default:void 0},eager:Boolean,gradient:String,lazySrc:String,options:{type:Object,default:()=>({root:void 0,rootMargin:void 0,threshold:void 0})},sizes:String,src:{type:[String,Object],default:""},crossorigin:String,referrerpolicy:String,srcset:String,position:String,...A5(),...vn(),...Nr(),...Ch()},"VImg"),gh=It()({name:"VImg",directives:{vIntersect:cu},props:M5(),emits:{loadstart:e=>!0,load:e=>!0,error:e=>!0},setup(e,t){let{emit:n,slots:i}=t;const{backgroundColorClasses:r,backgroundColorStyles:a}=tr(()=>e.color),{roundedClasses:l}=Qr(e),h=bs("VImg"),s=Xt(""),p=at(),v=Xt(e.eager?"loading":"idle"),x=Xt(),T=Xt(),k=fe(()=>e.src&&typeof e.src=="object"?{src:e.src.src,srcset:e.srcset||e.src.srcset,lazySrc:e.lazySrc||e.src.lazySrc,aspect:Number(e.aspectRatio||e.src.aspect||0)}:{src:e.src,srcset:e.srcset,lazySrc:e.lazySrc,aspect:Number(e.aspectRatio||0)}),P=fe(()=>k.value.aspect||x.value/T.value||0);Ht(()=>e.src,()=>{M(v.value!=="idle")}),Ht(P,(Y,ne)=>{!Y&&ne&&p.value&&J(p.value)}),rv(()=>M());function M(Y){if(!(e.eager&&Y)&&!(KI&&!Y&&!e.eager)){if(v.value="loading",k.value.lazySrc){const ne=new Image;ne.src=k.value.lazySrc,J(ne,null)}k.value.src&&Gn(()=>{n("loadstart",p.value?.currentSrc||k.value.src),setTimeout(()=>{if(!h.isUnmounted)if(p.value?.complete){if(p.value.naturalWidth||B(),v.value==="error")return;P.value||J(p.value,null),v.value==="loading"&&L()}else P.value||J(p.value),F()})})}}function L(){h.isUnmounted||(F(),J(p.value),v.value="loaded",n("load",p.value?.currentSrc||k.value.src))}function B(){h.isUnmounted||(v.value="error",n("error",p.value?.currentSrc||k.value.src))}function F(){const Y=p.value;Y&&(s.value=Y.currentSrc||Y.src)}let X=-1;Yr(()=>{clearTimeout(X)});function J(Y){let ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100;const Se=()=>{if(clearTimeout(X),h.isUnmounted)return;const{naturalHeight:Fe,naturalWidth:Ve}=Y;Fe||Ve?(x.value=Ve,T.value=Fe):!Y.complete&&v.value==="loading"&&ne!=null?X=window.setTimeout(Se,ne):(Y.currentSrc.endsWith(".svg")||Y.currentSrc.startsWith("data:image/svg+xml"))&&(x.value=1,T.value=1)};Se()}const Q=Ue(()=>({"v-img__img--cover":e.cover,"v-img__img--contain":!e.cover})),re=()=>{if(!k.value.src||v.value==="idle")return null;const Y=N("img",{class:Tt(["v-img__img",Q.value]),style:{objectPosition:e.position},crossorigin:e.crossorigin,src:k.value.src,srcset:k.value.srcset,alt:e.alt,referrerpolicy:e.referrerpolicy,draggable:e.draggable,sizes:e.sizes,ref:p,onLoad:L,onError:B},null),ne=i.sources?.();return ce(Oa,{transition:e.transition,appear:!0},{default:()=>[vi(ne?N("picture",{class:"v-img__picture"},[ne,Y]):Y,[[hu,v.value==="loaded"]])]})},Z=()=>ce(Oa,{transition:e.transition},{default:()=>[k.value.lazySrc&&v.value!=="loaded"&&N("img",{class:Tt(["v-img__img","v-img__img--preload",Q.value]),style:{objectPosition:e.position},crossorigin:e.crossorigin,src:k.value.lazySrc,alt:e.alt,referrerpolicy:e.referrerpolicy,draggable:e.draggable},null)]}),$=()=>i.placeholder?ce(Oa,{transition:e.transition,appear:!0},{default:()=>[(v.value==="loading"||v.value==="error"&&!i.error)&&N("div",{class:"v-img__placeholder"},[i.placeholder()])]}):null,H=()=>i.error?ce(Oa,{transition:e.transition,appear:!0},{default:()=>[v.value==="error"&&N("div",{class:"v-img__error"},[i.error()])]}):null,W=()=>e.gradient?N("div",{class:"v-img__gradient",style:{backgroundImage:`linear-gradient(${e.gradient})`}},null):null,te=Xt(!1);{const Y=Ht(P,ne=>{ne&&(requestAnimationFrame(()=>{requestAnimationFrame(()=>{te.value=!0})}),Y())})}return Vt(()=>{const Y=tk.filterProps(e);return vi(ce(tk,kt({class:["v-img",{"v-img--absolute":e.absolute,"v-img--booting":!te.value},r.value,l.value,e.class],style:[{width:dn(e.width==="auto"?x.value:e.width)},a.value,e.style]},Y,{aspectRatio:P.value,"aria-label":e.alt,role:e.alt?"img":void 0}),{additional:()=>N(sn,null,[ce(re,null,null),ce(Z,null,null),ce(W,null,null),ce($,null,null),ce(H,null,null)]),default:i.default}),[[cu,{handler:M,options:e.options},null,{once:!0}]])}),{currentSrc:s,image:p,state:v,naturalWidth:x,naturalHeight:T}}}),GZ=st({start:Boolean,end:Boolean,icon:Cn,image:String,text:String,...sl(),...vn(),...xs(),...Nr(),...ud(),...ti(),...Ii(),...Oc({variant:"flat"})},"VAvatar"),oc=It()({name:"VAvatar",props:GZ(),setup(e,t){let{slots:n}=t;const{themeClasses:i}=Zi(e),{borderClasses:r}=Rl(e),{colorClasses:a,colorStyles:l,variantClasses:h}=eg(e),{densityClasses:s}=$a(e),{roundedClasses:p}=Qr(e),{sizeClasses:v,sizeStyles:x}=sv(e);return Vt(()=>ce(e.tag,{class:Tt(["v-avatar",{"v-avatar--start":e.start,"v-avatar--end":e.end},i.value,r.value,a.value,s.value,p.value,v.value,h.value,e.class]),style:Qt([l.value,x.value,e.style])},{default:()=>[n.default?ce(ci,{key:"content-defaults",defaults:{VImg:{cover:!0,src:e.image},VIcon:{icon:e.icon}}},{default:()=>[n.default()]}):e.image?ce(gh,{key:"image",src:e.image,alt:"",cover:!0},null):e.icon?ce(Hi,{key:"icon",icon:e.icon},null):e.text,sm(!1,"v-avatar")]})),{}}}),qZ=st({appendAvatar:String,appendIcon:Cn,prependAvatar:String,prependIcon:Cn,subtitle:{type:[String,Number,Boolean],default:void 0},title:{type:[String,Number,Boolean],default:void 0},...vn(),...xs(),...ti()},"VCardItem"),D5=It()({name:"VCardItem",props:qZ(),setup(e,t){let{slots:n}=t;return Vt(()=>{const i=!!(e.prependAvatar||e.prependIcon),r=!!(i||n.prepend),a=!!(e.appendAvatar||e.appendIcon),l=!!(a||n.append),h=!!(e.title!=null||n.title),s=!!(e.subtitle!=null||n.subtitle);return ce(e.tag,{class:Tt(["v-card-item",e.class]),style:Qt(e.style)},{default:()=>[r&&N("div",{key:"prepend",class:"v-card-item__prepend"},[n.prepend?ce(ci,{key:"prepend-defaults",disabled:!i,defaults:{VAvatar:{density:e.density,image:e.prependAvatar},VIcon:{density:e.density,icon:e.prependIcon}}},n.prepend):N(sn,null,[e.prependAvatar&&ce(oc,{key:"prepend-avatar",density:e.density,image:e.prependAvatar},null),e.prependIcon&&ce(Hi,{key:"prepend-icon",density:e.density,icon:e.prependIcon},null)])]),N("div",{class:"v-card-item__content"},[h&&ce(I5,{key:"title"},{default:()=>[n.title?.()??an(e.title)]}),s&&ce(k5,{key:"subtitle"},{default:()=>[n.subtitle?.()??an(e.subtitle)]}),n.default?.()]),l&&N("div",{key:"append",class:"v-card-item__append"},[n.append?ce(ci,{key:"append-defaults",disabled:!a,defaults:{VAvatar:{density:e.density,image:e.appendAvatar},VIcon:{density:e.density,icon:e.appendIcon}}},n.append):N(sn,null,[e.appendIcon&&ce(Hi,{key:"append-icon",density:e.density,icon:e.appendIcon},null),e.appendAvatar&&ce(oc,{key:"append-avatar",density:e.density,image:e.appendAvatar},null)])])]})}),{}}}),KZ=st({opacity:[Number,String],...vn(),...ti()},"VCardText"),R5=It()({name:"VCardText",props:KZ(),setup(e,t){let{slots:n}=t;return Vt(()=>ce(e.tag,{class:Tt(["v-card-text",e.class]),style:Qt([{"--v-card-text-opacity":e.opacity},e.style])},n)),{}}}),XZ=st({appendAvatar:String,appendIcon:Cn,disabled:Boolean,flat:Boolean,hover:Boolean,image:String,link:{type:Boolean,default:void 0},prependAvatar:String,prependIcon:Cn,ripple:{type:[Boolean,Object],default:!0},subtitle:{type:[String,Number,Boolean],default:void 0},text:{type:[String,Number,Boolean],default:void 0},title:{type:[String,Number,Boolean],default:void 0},...sl(),...vn(),...xs(),...Ls(),...Hs(),...tT(),...Eh(),...ov(),...Nr(),...f0(),...ti(),...Ii(),...Oc({variant:"elevated"})},"VCard"),L5=It()({name:"VCard",directives:{vRipple:za},props:XZ(),setup(e,t){let{attrs:n,slots:i}=t;const{themeClasses:r}=Zi(e),{borderClasses:a}=Rl(e),{colorClasses:l,colorStyles:h,variantClasses:s}=eg(e),{densityClasses:p}=$a(e),{dimensionStyles:v}=Os(e),{elevationClasses:x}=vo(e),{loaderClasses:T}=u0(e),{locationStyles:k}=ig(e),{positionClasses:P}=av(e),{roundedClasses:M}=Qr(e),L=h0(e,n);return Vt(()=>{const B=e.link!==!1&&L.isLink.value,F=!e.disabled&&e.link!==!1&&(e.link||L.isClickable.value),X=B?"a":e.tag,J=!!(i.title||e.title!=null),Q=!!(i.subtitle||e.subtitle!=null),re=J||Q,Z=!!(i.append||e.appendAvatar||e.appendIcon),$=!!(i.prepend||e.prependAvatar||e.prependIcon),H=!!(i.image||e.image),W=re||$||Z,te=!!(i.text||e.text!=null);return vi(ce(X,kt(L.linkProps,{class:["v-card",{"v-card--disabled":e.disabled,"v-card--flat":e.flat,"v-card--hover":e.hover&&!(e.disabled||e.flat),"v-card--link":F},r.value,a.value,l.value,p.value,x.value,T.value,P.value,M.value,s.value,e.class],style:[h.value,v.value,k.value,e.style],onClick:F&&L.navigate,tabindex:e.disabled?-1:void 0}),{default:()=>[H&&N("div",{key:"image",class:"v-card__image"},[i.image?ce(ci,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},i.image):ce(gh,{key:"image-img",cover:!0,src:e.image},null)]),ce(d0,{name:"v-card",active:!!e.loading,color:typeof e.loading=="boolean"?void 0:e.loading},{default:i.loader}),W&&ce(D5,{key:"item",prependAvatar:e.prependAvatar,prependIcon:e.prependIcon,title:e.title,subtitle:e.subtitle,appendAvatar:e.appendAvatar,appendIcon:e.appendIcon},{default:i.item,prepend:i.prepend,title:i.title,subtitle:i.subtitle,append:i.append}),te&&ce(R5,{key:"text"},{default:()=>[i.text?.()??e.text]}),i.default?.(),i.actions&&ce(C5,null,{default:i.actions}),sm(F,"v-card")]}),[[za,F&&e.ripple]])}),{}}}),ZZ=st({disabled:Boolean,group:Boolean,hideOnLeave:Boolean,leaveAbsolute:Boolean,mode:String,origin:String},"transition");function lc(e,t,n){return It()({name:e,props:ZZ({mode:n,origin:t}),setup(i,r){let{slots:a}=r;const l={onBeforeEnter(h){i.origin&&(h.style.transformOrigin=i.origin)},onLeave(h){if(i.leaveAbsolute){const{offsetTop:s,offsetLeft:p,offsetWidth:v,offsetHeight:x}=h;h._transitionInitialStyles={position:h.style.position,top:h.style.top,left:h.style.left,width:h.style.width,height:h.style.height},h.style.position="absolute",h.style.top=`${s}px`,h.style.left=`${p}px`,h.style.width=`${v}px`,h.style.height=`${x}px`}i.hideOnLeave&&h.style.setProperty("display","none","important")},onAfterLeave(h){if(i.leaveAbsolute&&h?._transitionInitialStyles){const{position:s,top:p,left:v,width:x,height:T}=h._transitionInitialStyles;delete h._transitionInitialStyles,h.style.position=s||"",h.style.top=p||"",h.style.left=v||"",h.style.width=x||"",h.style.height=T||""}}};return()=>{const h=i.group?AI:fh;return Th(h,{name:i.disabled?"":e,css:!i.disabled,...i.group?void 0:{mode:i.mode},...i.disabled?{}:l},a.default)}}})}function O5(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"in-out";return It()({name:e,props:{mode:{type:String,default:n},disabled:{type:Boolean,default:nd()},group:Boolean},setup(i,r){let{slots:a}=r;const l=i.group?AI:fh;return()=>Th(l,{name:i.disabled?"":e,css:!i.disabled,...i.disabled?{}:t},a.default)}})}function V5(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";const n=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)?"width":"height",i=rl(`offset-${n}`);return{onBeforeEnter(l){l._parent=l.parentNode,l._initialStyle={transition:l.style.transition,overflow:l.style.overflow,[n]:l.style[n]}},onEnter(l){const h=l._initialStyle;if(!h)return;l.style.setProperty("transition","none","important"),l.style.overflow="hidden";const s=`${l[i]}px`;l.style[n]="0",l.offsetHeight,l.style.transition=h.transition,e&&l._parent&&l._parent.classList.add(e),requestAnimationFrame(()=>{l.style[n]=s})},onAfterEnter:a,onEnterCancelled:a,onLeave(l){l._initialStyle={transition:"",overflow:l.style.overflow,[n]:l.style[n]},l.style.overflow="hidden",l.style[n]=`${l[i]}px`,l.offsetHeight,requestAnimationFrame(()=>l.style[n]="0")},onAfterLeave:r,onLeaveCancelled:r};function r(l){e&&l._parent&&l._parent.classList.remove(e),a(l)}function a(l){if(!l._initialStyle)return;const h=l._initialStyle[n];l.style.overflow=l._initialStyle.overflow,h!=null&&(l.style[n]=h),delete l._initialStyle}}const YZ=st({target:[Object,Array]},"v-dialog-transition"),LE=new WeakMap,iT=It()({name:"VDialogTransition",props:YZ(),setup(e,t){let{slots:n}=t;const i={onBeforeEnter(r){r.style.pointerEvents="none",r.style.visibility="hidden"},async onEnter(r,a){await new Promise(T=>requestAnimationFrame(T)),await new Promise(T=>requestAnimationFrame(T)),r.style.visibility="";const l=RO(e.target,r),{x:h,y:s,sx:p,sy:v,speed:x}=l;if(LE.set(r,l),nd())Jd(r,[{opacity:0},{}],{duration:125*x,easing:lO}).finished.then(()=>a());else{const T=Jd(r,[{transform:`translate(${h}px, ${s}px) scale(${p}, ${v})`,opacity:0},{}],{duration:225*x,easing:lO});DO(r)?.forEach(k=>{Jd(k,[{opacity:0},{opacity:0,offset:.33},{}],{duration:450*x,easing:xb})}),T.finished.then(()=>a())}},onAfterEnter(r){r.style.removeProperty("pointer-events")},onBeforeLeave(r){r.style.pointerEvents="none"},async onLeave(r,a){await new Promise(T=>requestAnimationFrame(T));let l;!LE.has(r)||Array.isArray(e.target)||e.target.offsetParent||e.target.getClientRects().length?l=RO(e.target,r):l=LE.get(r);const{x:h,y:s,sx:p,sy:v,speed:x}=l;nd()?Jd(r,[{},{opacity:0}],{duration:85*x,easing:cO}).finished.then(()=>a()):(Jd(r,[{},{transform:`translate(${h}px, ${s}px) scale(${p}, ${v})`,opacity:0}],{duration:125*x,easing:cO}).finished.then(()=>a()),DO(r)?.forEach(k=>{Jd(k,[{},{opacity:0,offset:.2},{opacity:0}],{duration:250*x,easing:xb})}))},onAfterLeave(r){r.style.removeProperty("pointer-events")}};return()=>e.target?ce(fh,kt({name:"dialog-transition"},i,{css:!1}),n):ce(fh,{name:"dialog-transition"},n)}});function DO(e){const t=e.querySelector(":scope > .v-card, :scope > .v-sheet, :scope > .v-list")?.children;return t&&[...t]}function RO(e,t){const n=zN(e),i=QI(t),[r,a]=getComputedStyle(t).transformOrigin.split(" ").map(B=>parseFloat(B)),[l,h]=getComputedStyle(t).getPropertyValue("--v-overlay-anchor-origin").split(" ");let s=n.left+n.width/2;l==="left"||h==="left"?s-=n.width/2:(l==="right"||h==="right")&&(s+=n.width/2);let p=n.top+n.height/2;l==="top"||h==="top"?p-=n.height/2:(l==="bottom"||h==="bottom")&&(p+=n.height/2);const v=n.width/i.width,x=n.height/i.height,T=Math.max(1,v,x),k=v/T||0,P=x/T||0,M=i.width*i.height/(window.innerWidth*window.innerHeight),L=M>.12?Math.min(1.5,(M-.12)*10+1):1;return{x:s-(r+i.left),y:p-(a+i.top),sx:k,sy:P,speed:L}}const JZ=lc("fab-transition","center center","out-in"),QZ=lc("dialog-bottom-transition"),eY=lc("dialog-top-transition"),Ib=lc("fade-transition"),hA=lc("scale-transition"),tY=lc("scroll-x-transition"),nY=lc("scroll-x-reverse-transition"),iY=lc("scroll-y-transition"),rY=lc("scroll-y-reverse-transition"),sY=lc("slide-x-transition"),oY=lc("slide-x-reverse-transition"),fA=lc("slide-y-transition"),aY=lc("slide-y-reverse-transition"),rT=O5("expand-transition",V5()),mA=O5("expand-x-transition",V5("",!0));function lY(e){let{selectedElement:t,containerElement:n,isRtl:i,isHorizontal:r}=e;const a=Ab(r,n),l=B5(r,i,n),h=Ab(r,t),s=F5(r,t),p=h*.4;return l>s?s-p:l+a<s+h?s-a+h+p:l}function cY(e){let{selectedElement:t,containerElement:n,isHorizontal:i}=e;const r=Ab(i,n),a=F5(i,t),l=Ab(i,t);return a-r/2+l/2}function LO(e,t){return t?.[e?"scrollWidth":"scrollHeight"]||0}function uY(e,t){return t?.[e?"clientWidth":"clientHeight"]||0}function B5(e,t,n){if(!n)return 0;const{scrollLeft:i,offsetWidth:r,scrollWidth:a}=n;return e?t?a-r+i:i:n.scrollTop}function Ab(e,t){return t?.[e?"offsetWidth":"offsetHeight"]||0}function F5(e,t){return t?.[e?"offsetLeft":"offsetTop"]||0}const pA=Symbol.for("vuetify:v-slide-group"),gA=st({centerActive:Boolean,scrollToActive:{type:Boolean,default:!0},contentClass:null,direction:{type:String,default:"horizontal"},symbol:{type:null,default:pA},nextIcon:{type:Cn,default:"$next"},prevIcon:{type:Cn,default:"$prev"},showArrows:{type:[Boolean,String],validator:e=>typeof e=="boolean"||["always","desktop","mobile"].includes(e)},...vn(),...Yp({mobile:null}),...ti(),...tg({selectedClass:"v-slide-group-item--active"})},"VSlideGroup"),Pb=It()({name:"VSlideGroup",props:gA(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{isRtl:i}=Ws(),{displayClasses:r,mobile:a}=Dl(e),l=om(e,e.symbol),h=Xt(!1),s=Xt(0),p=Xt(0),v=Xt(0),x=fe(()=>e.direction==="horizontal"),{resizeRef:T,contentRect:k}=Lc(),{resizeRef:P,contentRect:M}=Lc(),L=BX(),B=fe(()=>({container:T.el,duration:200,easing:"easeOutQuart"})),F=fe(()=>l.selected.value.length?l.items.value.findIndex(Le=>Le.id===l.selected.value[0]):-1),X=fe(()=>l.selected.value.length?l.items.value.findIndex(Le=>Le.id===l.selected.value[l.selected.value.length-1]):-1);if(Gi){let Le=-1;Ht(()=>[l.selected.value,k.value,M.value,x.value],()=>{cancelAnimationFrame(Le),Le=requestAnimationFrame(()=>{if(k.value&&M.value){const We=x.value?"width":"height";p.value=k.value[We],v.value=M.value[We],h.value=p.value+1<v.value}if(e.scrollToActive&&F.value>=0&&P.el){const We=P.el.children[X.value];Q(We,e.centerActive)}})})}const J=Xt(!1);function Q(Le,We){let ct=0;We?ct=cY({containerElement:T.el,isHorizontal:x.value,selectedElement:Le}):ct=lY({containerElement:T.el,isHorizontal:x.value,isRtl:i.value,selectedElement:Le}),re(ct)}function re(Le){if(!Gi||!T.el)return;const We=Ab(x.value,T.el),ct=B5(x.value,i.value,T.el);if(!(LO(x.value,T.el)<=We||Math.abs(Le-ct)<16)){if(x.value&&i.value&&T.el){const{scrollWidth:rt,offsetWidth:Qe}=T.el;Le=rt-Qe-Le}x.value?L.horizontal(Le,B.value):L(Le,B.value)}}function Z(Le){const{scrollTop:We,scrollLeft:ct}=Le.target;s.value=x.value?ct:We}function $(Le){if(J.value=!0,!(!h.value||!P.el)){for(const We of Le.composedPath())for(const ct of P.el.children)if(ct===We){Q(ct);return}}}function H(Le){J.value=!1}let W=!1;function te(Le){!W&&!J.value&&!(Le.relatedTarget&&P.el?.contains(Le.relatedTarget))&&Fe(),W=!1}function Y(){W=!0}function ne(Le){if(!P.el)return;function We(ct){Le.preventDefault(),Fe(ct)}x.value?Le.key==="ArrowRight"?We(i.value?"prev":"next"):Le.key==="ArrowLeft"&&We(i.value?"next":"prev"):Le.key==="ArrowDown"?We("next"):Le.key==="ArrowUp"&&We("prev"),Le.key==="Home"?We("first"):Le.key==="End"&&We("last")}function Se(Le,We){if(!Le)return;let ct=Le;do ct=ct?.[We==="next"?"nextElementSibling":"previousElementSibling"];while(ct?.hasAttribute("disabled"));return ct}function Fe(Le){if(!P.el)return;let We;if(!Le)We=F_(P.el)[0];else if(Le==="next"){if(We=Se(P.el.querySelector(":focus"),Le),!We)return Fe("first")}else if(Le==="prev"){if(We=Se(P.el.querySelector(":focus"),Le),!We)return Fe("last")}else Le==="first"?(We=P.el.firstElementChild,We?.hasAttribute("disabled")&&(We=Se(We,"next"))):Le==="last"&&(We=P.el.lastElementChild,We?.hasAttribute("disabled")&&(We=Se(We,"prev")));We&&We.focus({preventScroll:!0})}function Ve(Le){const We=x.value&&i.value?-1:1,ct=(Le==="prev"?-We:We)*p.value;let ut=s.value+ct;if(x.value&&i.value&&T.el){const{scrollWidth:rt,offsetWidth:Qe}=T.el;ut+=rt-Qe}re(ut)}const Ge=fe(()=>({next:l.next,prev:l.prev,select:l.select,isSelected:l.isSelected})),je=fe(()=>h.value||Math.abs(s.value)>0),Ae=fe(()=>{switch(e.showArrows){case"always":return!0;case"desktop":return!a.value;case!0:return je.value;case"mobile":return a.value||je.value;default:return!a.value&&je.value}}),Ke=fe(()=>Math.abs(s.value)>1),ve=fe(()=>{if(!T.value||!je.value)return!1;const Le=LO(x.value,T.el),We=uY(x.value,T.el);return Le-We-Math.abs(s.value)>1});return Vt(()=>ce(e.tag,{class:Tt(["v-slide-group",{"v-slide-group--vertical":!x.value,"v-slide-group--has-affixes":Ae.value,"v-slide-group--is-overflowing":h.value},r.value,e.class]),style:Qt(e.style),tabindex:J.value||l.selected.value.length?-1:0,onFocus:te},{default:()=>[Ae.value&&N("div",{key:"prev",class:Tt(["v-slide-group__prev",{"v-slide-group__prev--disabled":!Ke.value}]),onMousedown:Y,onClick:()=>Ke.value&&Ve("prev")},[n.prev?.(Ge.value)??ce(Ib,null,{default:()=>[ce(Hi,{icon:i.value?e.nextIcon:e.prevIcon},null)]})]),N("div",{key:"container",ref:T,class:Tt(["v-slide-group__container",e.contentClass]),onScroll:Z},[N("div",{ref:P,class:"v-slide-group__content",onFocusin:$,onFocusout:H,onKeydown:ne},[n.default?.(Ge.value)])]),Ae.value&&N("div",{key:"next",class:Tt(["v-slide-group__next",{"v-slide-group__next--disabled":!ve.value}]),onMousedown:Y,onClick:()=>ve.value&&Ve("next")},[n.next?.(Ge.value)??ce(Ib,null,{default:()=>[ce(Hi,{icon:i.value?e.prevIcon:e.nextIcon},null)]})])]})),{selected:l.selected,scrollTo:Ve,scrollOffset:s,focus:Fe,hasPrev:Ke,hasNext:ve}}}),z5=Symbol.for("vuetify:v-chip-group"),dY=st({baseColor:String,column:Boolean,filter:Boolean,valueComparator:{type:Function,default:po},...gA({scrollToActive:!1}),...vn(),...tg({selectedClass:"v-chip--selected"}),...ti(),...Ii(),...Oc({variant:"tonal"})},"VChipGroup"),hY=It()({name:"VChipGroup",props:dY(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{themeClasses:i}=Zi(e),{isSelected:r,select:a,next:l,prev:h,selected:s}=om(e,z5);return Jr({VChip:{baseColor:Ue(()=>e.baseColor),color:Ue(()=>e.color),disabled:Ue(()=>e.disabled),filter:Ue(()=>e.filter),variant:Ue(()=>e.variant)}}),Vt(()=>{const p=Pb.filterProps(e);return ce(Pb,kt(p,{class:["v-chip-group",{"v-chip-group--column":e.column},i.value,e.class],style:e.style}),{default:()=>[n.default?.({isSelected:r,select:a,next:l,prev:h,selected:s.value})]})}),{}}}),fY=st({activeClass:String,appendAvatar:String,appendIcon:Cn,baseColor:String,closable:Boolean,closeIcon:{type:Cn,default:"$delete"},closeLabel:{type:String,default:"$vuetify.close"},draggable:Boolean,filter:Boolean,filterIcon:{type:Cn,default:"$complete"},label:Boolean,link:{type:Boolean,default:void 0},pill:Boolean,prependAvatar:String,prependIcon:Cn,ripple:{type:[Boolean,Object],default:!0},text:{type:[String,Number,Boolean],default:void 0},modelValue:{type:Boolean,default:!0},onClick:Vo(),onClickOnce:Vo(),...sl(),...vn(),...xs(),...Hs(),...ng(),...Nr(),...f0(),...ud(),...ti({tag:"span"}),...Ii(),...Oc({variant:"tonal"})},"VChip"),Hu=It()({name:"VChip",directives:{vRipple:za},props:fY(),emits:{"click:close":e=>!0,"update:modelValue":e=>!0,"group:selected":e=>!0,click:e=>!0},setup(e,t){let{attrs:n,emit:i,slots:r}=t;const{t:a}=dr(),{borderClasses:l}=Rl(e),{densityClasses:h}=$a(e),{elevationClasses:s}=vo(e),{roundedClasses:p}=Qr(e),{sizeClasses:v}=sv(e),{themeClasses:x}=Zi(e),T=In(e,"modelValue"),k=Wf(e,z5,!1),P=Wf(e,pA,!1),M=h0(e,n),L=Ue(()=>e.link!==!1&&M.isLink.value),B=fe(()=>!e.disabled&&e.link!==!1&&(!!k||e.link||M.isClickable.value)),F=Ue(()=>({"aria-label":a(e.closeLabel),disabled:e.disabled,onClick($){$.preventDefault(),$.stopPropagation(),T.value=!1,i("click:close",$)}}));Ht(T,$=>{$?(k?.register(),P?.register()):(k?.unregister(),P?.unregister())});const{colorClasses:X,colorStyles:J,variantClasses:Q}=eg(()=>({color:!k||k.isSelected.value?e.color??e.baseColor:e.baseColor,variant:e.variant}));function re($){i("click",$),B.value&&(M.navigate?.($),k?.toggle())}function Z($){($.key==="Enter"||$.key===" ")&&($.preventDefault(),re($))}return()=>{const $=M.isLink.value?"a":e.tag,H=!!(e.appendIcon||e.appendAvatar),W=!!(H||r.append),te=!!(r.close||e.closable),Y=!!(r.filter||e.filter)&&k,ne=!!(e.prependIcon||e.prependAvatar),Se=!!(ne||r.prepend);return T.value&&vi(ce($,kt(M.linkProps,{class:["v-chip",{"v-chip--disabled":e.disabled,"v-chip--label":e.label,"v-chip--link":B.value,"v-chip--filter":Y,"v-chip--pill":e.pill,[`${e.activeClass}`]:e.activeClass&&M.isActive?.value},x.value,l.value,X.value,h.value,s.value,p.value,v.value,Q.value,k?.selectedClass.value,e.class],style:[J.value,e.style],disabled:e.disabled||void 0,draggable:e.draggable,tabindex:B.value?0:void 0,onClick:re,onKeydown:B.value&&!L.value&&Z}),{default:()=>[sm(B.value,"v-chip"),Y&&ce(mA,{key:"filter"},{default:()=>[vi(N("div",{class:"v-chip__filter"},[r.filter?ce(ci,{key:"filter-defaults",disabled:!e.filterIcon,defaults:{VIcon:{icon:e.filterIcon}}},r.filter):ce(Hi,{key:"filter-icon",icon:e.filterIcon},null)]),[[hu,k.isSelected.value]])]}),Se&&N("div",{key:"prepend",class:"v-chip__prepend"},[r.prepend?ce(ci,{key:"prepend-defaults",disabled:!ne,defaults:{VAvatar:{image:e.prependAvatar,start:!0},VIcon:{icon:e.prependIcon,start:!0}}},r.prepend):N(sn,null,[e.prependIcon&&ce(Hi,{key:"prepend-icon",icon:e.prependIcon,start:!0},null),e.prependAvatar&&ce(oc,{key:"prepend-avatar",image:e.prependAvatar,start:!0},null)])]),N("div",{class:"v-chip__content","data-no-activator":""},[r.default?.({isSelected:k?.isSelected.value,selectedClass:k?.selectedClass.value,select:k?.select,toggle:k?.toggle,value:k?.value.value,disabled:e.disabled})??an(e.text)]),W&&N("div",{key:"append",class:"v-chip__append"},[r.append?ce(ci,{key:"append-defaults",disabled:!H,defaults:{VAvatar:{end:!0,image:e.appendAvatar},VIcon:{end:!0,icon:e.appendIcon}}},r.append):N(sn,null,[e.appendIcon&&ce(Hi,{key:"append-icon",end:!0,icon:e.appendIcon},null),e.appendAvatar&&ce(oc,{key:"append-avatar",end:!0,image:e.appendAvatar},null)])]),te&&N("button",kt({key:"close",class:"v-chip__close",type:"button","data-testid":"close-chip"},F.value),[r.close?ce(ci,{key:"close-defaults",defaults:{VIcon:{icon:e.closeIcon,size:"x-small"}}},r.close):ce(Hi,{key:"close-icon",icon:e.closeIcon,size:"x-small"},null)])]}),[[za,B.value&&e.ripple,null]])}}}),mY=st({fluid:{type:Boolean,default:!1},...vn(),...Ls(),...ti()},"VContainer"),N5=It()({name:"VContainer",props:mY(),setup(e,t){let{slots:n}=t;const{rtlClasses:i}=Ws(),{dimensionStyles:r}=Os(e);return Vt(()=>ce(e.tag,{class:Tt(["v-container",{"v-container--fluid":e.fluid},i.value,e.class]),style:Qt([r.value,e.style])},n)),{}}}),U5=Y1.reduce((e,t)=>(e[t]={type:[Boolean,String,Number],default:!1},e),{}),$5=Y1.reduce((e,t)=>{const n="offset"+ld(t);return e[n]={type:[String,Number],default:null},e},{}),j5=Y1.reduce((e,t)=>{const n="order"+ld(t);return e[n]={type:[String,Number],default:null},e},{}),OO={col:Object.keys(U5),offset:Object.keys($5),order:Object.keys(j5)};function pY(e,t,n){let i=e;if(!(n==null||n===!1)){if(t){const r=t.replace(e,"");i+=`-${r}`}return e==="col"&&(i="v-"+i),e==="col"&&(n===""||n===!0)||(i+=`-${n}`),i.toLowerCase()}}const gY=["auto","start","end","center","baseline","stretch"],_Y=st({cols:{type:[Boolean,String,Number],default:!1},...U5,offset:{type:[String,Number],default:null},...$5,order:{type:[String,Number],default:null},...j5,alignSelf:{type:String,default:null,validator:e=>gY.includes(e)},...vn(),...ti()},"VCol"),vY=It()({name:"VCol",props:_Y(),setup(e,t){let{slots:n}=t;const i=fe(()=>{const r=[];let a;for(a in OO)OO[a].forEach(h=>{const s=e[h],p=pY(a,h,s);p&&r.push(p)});const l=r.some(h=>h.startsWith("v-col-"));return r.push({"v-col":!l||!e.cols,[`v-col-${e.cols}`]:e.cols,[`offset-${e.offset}`]:e.offset,[`order-${e.order}`]:e.order,[`align-self-${e.alignSelf}`]:e.alignSelf}),r});return()=>Th(e.tag,{class:[i.value,e.class],style:e.style},n.default?.())}}),_A=["start","end","center"],W5=["space-between","space-around","space-evenly"];function vA(e,t){return Y1.reduce((n,i)=>{const r=e+ld(i);return n[r]=t(),n},{})}const yY=[..._A,"baseline","stretch"],H5=e=>yY.includes(e),G5=vA("align",()=>({type:String,default:null,validator:H5})),bY=[..._A,...W5],q5=e=>bY.includes(e),K5=vA("justify",()=>({type:String,default:null,validator:q5})),xY=[..._A,...W5,"stretch"],X5=e=>xY.includes(e),Z5=vA("alignContent",()=>({type:String,default:null,validator:X5})),VO={align:Object.keys(G5),justify:Object.keys(K5),alignContent:Object.keys(Z5)},wY={align:"align",justify:"justify",alignContent:"align-content"};function TY(e,t,n){let i=wY[e];if(n!=null){if(t){const r=t.replace(e,"");i+=`-${r}`}return i+=`-${n}`,i.toLowerCase()}}const SY=st({dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:H5},...G5,justify:{type:String,default:null,validator:q5},...K5,alignContent:{type:String,default:null,validator:X5},...Z5,...vn(),...ti()},"VRow"),EY=It()({name:"VRow",props:SY(),setup(e,t){let{slots:n}=t;const i=fe(()=>{const r=[];let a;for(a in VO)VO[a].forEach(l=>{const h=e[l],s=TY(a,l,h);s&&r.push(s)});return r.push({"v-row--no-gutters":e.noGutters,"v-row--dense":e.dense,[`align-${e.align}`]:e.align,[`justify-${e.justify}`]:e.justify,[`align-content-${e.alignContent}`]:e.alignContent}),r});return()=>Th(e.tag,{class:["v-row",i.value,e.class],style:e.style},n.default?.())}}),Y5=Sh("v-spacer","div","VSpacer"),CY=st({text:String,onClick:Vo(),...vn(),...Ii()},"VLabel"),lv=It()({name:"VLabel",props:CY(),setup(e,t){let{slots:n}=t;return Vt(()=>N("label",{class:Tt(["v-label",{"v-label--clickable":!!e.onClick},e.class]),style:Qt(e.style),onClick:e.onClick},[e.text,n.default?.()])),{}}}),J5=Symbol.for("vuetify:selection-control-group"),yA=st({color:String,disabled:{type:Boolean,default:null},defaultsTarget:String,error:Boolean,id:String,inline:Boolean,falseIcon:Cn,trueIcon:Cn,ripple:{type:[Boolean,Object],default:!0},multiple:{type:Boolean,default:null},name:String,readonly:{type:Boolean,default:null},modelValue:null,type:String,valueComparator:{type:Function,default:po},...vn(),...xs(),...Ii()},"SelectionControlGroup"),kY=st({...yA({defaultsTarget:"VSelectionControl"})},"VSelectionControlGroup"),Q5=It()({name:"VSelectionControlGroup",props:kY(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const i=In(e,"modelValue"),r=aa(),a=Ue(()=>e.id||`v-selection-control-group-${r}`),l=Ue(()=>e.name||a.value),h=new Set;return Mr(J5,{modelValue:i,forceUpdate:()=>{h.forEach(s=>s())},onForceUpdate:s=>{h.add(s),io(()=>{h.delete(s)})}}),Jr({[e.defaultsTarget]:{color:Ue(()=>e.color),disabled:Ue(()=>e.disabled),density:Ue(()=>e.density),error:Ue(()=>e.error),inline:Ue(()=>e.inline),modelValue:i,multiple:Ue(()=>!!e.multiple||e.multiple==null&&Array.isArray(i.value)),name:l,falseIcon:Ue(()=>e.falseIcon),trueIcon:Ue(()=>e.trueIcon),readonly:Ue(()=>e.readonly),ripple:Ue(()=>e.ripple),type:Ue(()=>e.type),valueComparator:Ue(()=>e.valueComparator)}}),Vt(()=>N("div",{class:Tt(["v-selection-control-group",{"v-selection-control-group--inline":e.inline},e.class]),style:Qt(e.style),role:e.type==="radio"?"radiogroup":void 0},[n.default?.()])),{}}}),sT=st({label:String,baseColor:String,trueValue:null,falseValue:null,value:null,...vn(),...yA()},"VSelectionControl");function IY(e){const t=xi(J5,void 0),{densityClasses:n}=$a(e),i=In(e,"modelValue"),r=fe(()=>e.trueValue!==void 0?e.trueValue:e.value!==void 0?e.value:!0),a=fe(()=>e.falseValue!==void 0?e.falseValue:!1),l=fe(()=>!!e.multiple||e.multiple==null&&Array.isArray(i.value)),h=fe({get(){const k=t?t.modelValue.value:i.value;return l.value?Gr(k).some(P=>e.valueComparator(P,r.value)):e.valueComparator(k,r.value)},set(k){if(e.readonly)return;const P=k?r.value:a.value;let M=P;l.value&&(M=k?[...Gr(i.value),P]:Gr(i.value).filter(L=>!e.valueComparator(L,r.value))),t?t.modelValue.value=M:i.value=M}}),{textColorClasses:s,textColorStyles:p}=Fo(()=>{if(!(e.error||e.disabled))return h.value?e.color:e.baseColor}),{backgroundColorClasses:v,backgroundColorStyles:x}=tr(()=>h.value&&!e.error&&!e.disabled?e.color:e.baseColor),T=fe(()=>h.value?e.trueIcon:e.falseIcon);return{group:t,densityClasses:n,trueValue:r,falseValue:a,model:h,textColorClasses:s,textColorStyles:p,backgroundColorClasses:v,backgroundColorStyles:x,icon:T}}const Hf=It()({name:"VSelectionControl",directives:{vRipple:za},inheritAttrs:!1,props:sT(),emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:n,slots:i}=t;const{group:r,densityClasses:a,icon:l,model:h,textColorClasses:s,textColorStyles:p,backgroundColorClasses:v,backgroundColorStyles:x,trueValue:T}=IY(e),k=aa(),P=Xt(!1),M=Xt(!1),L=at(),B=Ue(()=>e.id||`input-${k}`),F=Ue(()=>!e.disabled&&!e.readonly);r?.onForceUpdate(()=>{L.value&&(L.value.checked=h.value)});function X(Z){F.value&&(P.value=!0,z_(Z.target,":focus-visible")!==!1&&(M.value=!0))}function J(){P.value=!1,M.value=!1}function Q(Z){Z.stopPropagation()}function re(Z){if(!F.value){L.value&&(L.value.checked=h.value);return}e.readonly&&r&&Gn(()=>r.forceUpdate()),h.value=Z.target.checked}return Vt(()=>{const Z=i.label?i.label({label:e.label,props:{for:B.value}}):e.label,[$,H]=rm(n),W=N("input",kt({ref:L,checked:h.value,disabled:!!e.disabled,id:B.value,onBlur:J,onFocus:X,onInput:re,"aria-disabled":!!e.disabled,"aria-label":e.label,type:e.type,value:T.value,name:e.name,"aria-checked":e.type==="checkbox"?h.value:void 0},H),null);return N("div",kt({class:["v-selection-control",{"v-selection-control--dirty":h.value,"v-selection-control--disabled":e.disabled,"v-selection-control--error":e.error,"v-selection-control--focused":P.value,"v-selection-control--focus-visible":M.value,"v-selection-control--inline":e.inline},a.value,e.class]},$,{style:e.style}),[N("div",{class:Tt(["v-selection-control__wrapper",s.value]),style:Qt(p.value)},[i.default?.({backgroundColorClasses:v,backgroundColorStyles:x}),vi(N("div",{class:Tt(["v-selection-control__input"])},[i.input?.({model:h,textColorClasses:s,textColorStyles:p,backgroundColorClasses:v,backgroundColorStyles:x,inputNode:W,icon:l.value,props:{onFocus:X,onBlur:J,id:B.value}})??N(sn,null,[l.value&&ce(Hi,{key:"icon",icon:l.value},null),W])]),[[za,!e.disabled&&!e.readonly&&e.ripple,null,{center:!0,circle:!0}]])]),Z&&ce(lv,{for:B.value,onClick:Q},{default:()=>[Z]})])}),{isFocused:P,input:L}}}),e4=st({indeterminate:Boolean,indeterminateIcon:{type:Cn,default:"$checkboxIndeterminate"},...sT({falseIcon:"$checkboxOff",trueIcon:"$checkboxOn"})},"VCheckboxBtn"),rd=It()({name:"VCheckboxBtn",props:e4(),emits:{"update:modelValue":e=>!0,"update:indeterminate":e=>!0},setup(e,t){let{slots:n}=t;const i=In(e,"indeterminate"),r=In(e,"modelValue");function a(s){i.value&&(i.value=!1)}const l=Ue(()=>i.value?e.indeterminateIcon:e.falseIcon),h=Ue(()=>i.value?e.indeterminateIcon:e.trueIcon);return Vt(()=>{const s=ur(Hf.filterProps(e),["modelValue"]);return ce(Hf,kt(s,{modelValue:r.value,"onUpdate:modelValue":[p=>r.value=p,a],class:["v-checkbox-btn",e.class],style:e.style,type:"checkbox",falseIcon:l.value,trueIcon:h.value,"aria-checked":i.value?"mixed":void 0}),n)}),{}}});function t4(e){const{t}=dr();function n(i){let{name:r,color:a,...l}=i;const h={prepend:"prependAction",prependInner:"prependAction",append:"appendAction",appendInner:"appendAction",clear:"clear"}[r],s=e[`onClick:${r}`];function p(x){x.key!=="Enter"&&x.key!==" "||(x.preventDefault(),x.stopPropagation(),s0(s,new PointerEvent("click",x)))}const v=s&&h?t(`$vuetify.input.${h}`,e.label??""):void 0;return ce(Hi,kt({icon:e[`${r}Icon`],"aria-label":v,onClick:s,onKeydown:p,color:a},l),null)}return{InputIcon:n}}const AY=st({active:Boolean,color:String,messages:{type:[Array,String],default:()=>[]},...vn(),...Ch({transition:{component:fA,leaveAbsolute:!0,group:!0}})},"VMessages"),n4=It()({name:"VMessages",props:AY(),setup(e,t){let{slots:n}=t;const i=fe(()=>Gr(e.messages)),{textColorClasses:r,textColorStyles:a}=Fo(()=>e.color);return Vt(()=>ce(Oa,{transition:e.transition,tag:"div",class:Tt(["v-messages",r.value,e.class]),style:Qt([a.value,e.style])},{default:()=>[e.active&&i.value.map((l,h)=>N("div",{class:"v-messages__message",key:`${h}-${i.value}`},[n.message?n.message({message:l}):l]))]})),{}}}),m0=st({focused:Boolean,"onUpdate:focused":Vo()},"focus");function kh(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:cd();const n=In(e,"focused"),i=Ue(()=>({[`${t}--focused`]:n.value}));function r(){n.value=!0}function a(){n.value=!1}return{focusClasses:i,isFocused:n,focus:r,blur:a}}const i4=Symbol.for("vuetify:form"),PY=st({disabled:Boolean,fastFail:Boolean,readonly:Boolean,modelValue:{type:Boolean,default:null},validateOn:{type:String,default:"input"}},"form");function MY(e){const t=In(e,"modelValue"),n=Ue(()=>e.disabled),i=Ue(()=>e.readonly),r=Xt(!1),a=at([]),l=at([]);async function h(){const v=[];let x=!0;l.value=[],r.value=!0;for(const T of a.value){const k=await T.validate();if(k.length>0&&(x=!1,v.push({id:T.id,errorMessages:k})),!x&&e.fastFail)break}return l.value=v,r.value=!1,{valid:x,errors:l.value}}function s(){a.value.forEach(v=>v.reset())}function p(){a.value.forEach(v=>v.resetValidation())}return Ht(a,()=>{let v=0,x=0;const T=[];for(const k of a.value)k.isValid===!1?(x++,T.push({id:k.id,errorMessages:k.errorMessages})):k.isValid===!0&&v++;l.value=T,t.value=x>0?!1:v===a.value.length?!0:null},{deep:!0,flush:"post"}),Mr(i4,{register:v=>{let{id:x,vm:T,validate:k,reset:P,resetValidation:M}=v;a.value.some(L=>L.id===x),a.value.push({id:x,validate:k,reset:P,resetValidation:M,vm:yz(T),isValid:null,errorMessages:[]})},unregister:v=>{a.value=a.value.filter(x=>x.id!==v)},update:(v,x,T)=>{const k=a.value.find(P=>P.id===v);k&&(k.isValid=x,k.errorMessages=T)},isDisabled:n,isReadonly:i,isValidating:r,isValid:t,items:a,validateOn:Ue(()=>e.validateOn)}),{errors:l,isDisabled:n,isReadonly:i,isValidating:r,isValid:t,items:a,validate:h,reset:s,resetValidation:p}}function cv(e){const t=xi(i4,null);return{...t,isReadonly:fe(()=>!!(e?.readonly??t?.isReadonly.value)),isDisabled:fe(()=>!!(e?.disabled??t?.isDisabled.value))}}const DY=Symbol.for("vuetify:rules");function RY(e){const t=xi(DY,null);if(!e){if(!t)throw new Error("Could not find Vuetify rules injection");return t.aliases}return t?.resolve(e)??Ue(e)}const r4=st({disabled:{type:Boolean,default:null},error:Boolean,errorMessages:{type:[Array,String],default:()=>[]},maxErrors:{type:[Number,String],default:1},name:String,label:String,readonly:{type:Boolean,default:null},rules:{type:Array,default:()=>[]},modelValue:null,validateOn:String,validationValue:null,...m0()},"validation");function s4(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:cd(),n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:aa();const i=In(e,"modelValue"),r=fe(()=>e.validationValue===void 0?i.value:e.validationValue),a=cv(e),l=RY(()=>e.rules),h=at([]),s=Xt(!0),p=fe(()=>!!(Gr(i.value===""?null:i.value).length||Gr(r.value===""?null:r.value).length)),v=fe(()=>e.errorMessages?.length?Gr(e.errorMessages).concat(h.value).slice(0,Math.max(0,Number(e.maxErrors))):h.value),x=fe(()=>{let J=(e.validateOn??a.validateOn?.value)||"input";J==="lazy"&&(J="input lazy"),J==="eager"&&(J="input eager");const Q=new Set(J?.split(" ")??[]);return{input:Q.has("input"),blur:Q.has("blur")||Q.has("input")||Q.has("invalid-input"),invalidInput:Q.has("invalid-input"),lazy:Q.has("lazy"),eager:Q.has("eager")}}),T=fe(()=>e.error||e.errorMessages?.length?!1:e.rules.length?s.value?h.value.length||x.value.lazy?null:!0:!h.value.length:!0),k=Xt(!1),P=fe(()=>({[`${t}--error`]:T.value===!1,[`${t}--dirty`]:p.value,[`${t}--disabled`]:a.isDisabled.value,[`${t}--readonly`]:a.isReadonly.value})),M=bs("validation"),L=fe(()=>e.name??Si(n));rv(()=>{a.register?.({id:L.value,vm:M,validate:X,reset:B,resetValidation:F})}),Yr(()=>{a.unregister?.(L.value)}),cs(async()=>{x.value.lazy||await X(!x.value.eager),a.update?.(L.value,T.value,v.value)}),ra(()=>x.value.input||x.value.invalidInput&&T.value===!1,()=>{Ht(r,()=>{if(r.value!=null)X();else if(e.focused){const J=Ht(()=>e.focused,Q=>{Q||X(),J()})}})}),ra(()=>x.value.blur,()=>{Ht(()=>e.focused,J=>{J||X()})}),Ht([T,v],()=>{a.update?.(L.value,T.value,v.value)});async function B(){i.value=null,await Gn(),await F()}async function F(){s.value=!0,x.value.lazy?h.value=[]:await X(!x.value.eager)}async function X(){let J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const Q=[];k.value=!0;for(const re of l.value){if(Q.length>=Number(e.maxErrors??1))break;const $=await(typeof re=="function"?re:()=>re)(r.value);if($!==!0){if($!==!1&&typeof $!="string"){console.warn(`${$} is not a valid value. Rule functions must return boolean true or a string.`);continue}Q.push($||"")}}return h.value=Q,k.value=!1,s.value=J,h.value}return{errorMessages:v,isDirty:p,isDisabled:a.isDisabled,isReadonly:a.isReadonly,isPristine:s,isValid:T,isValidating:k,reset:B,resetValidation:F,validate:X,validationClasses:P}}const Ih=st({id:String,appendIcon:Cn,baseColor:String,centerAffix:{type:Boolean,default:!0},color:String,glow:Boolean,iconColor:[Boolean,String],prependIcon:Cn,hideDetails:[Boolean,String],hideSpinButtons:Boolean,hint:String,persistentHint:Boolean,messages:{type:[Array,String],default:()=>[]},direction:{type:String,default:"horizontal",validator:e=>["horizontal","vertical"].includes(e)},"onClick:prepend":Vo(),"onClick:append":Vo(),...vn(),...xs(),...Ml(Ls(),["maxWidth","minWidth","width"]),...Ii(),...r4()},"VInput"),sa=It()({name:"VInput",props:{...Ih()},emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:n,slots:i,emit:r}=t;const{densityClasses:a}=$a(e),{dimensionStyles:l}=Os(e),{themeClasses:h}=Zi(e),{rtlClasses:s}=Ws(),{InputIcon:p}=t4(e),v=aa(),x=fe(()=>e.id||`input-${v}`),{errorMessages:T,isDirty:k,isDisabled:P,isReadonly:M,isPristine:L,isValid:B,isValidating:F,reset:X,resetValidation:J,validate:Q,validationClasses:re}=s4(e,"v-input",x),Z=fe(()=>e.errorMessages?.length||!L.value&&T.value.length?T.value:e.hint&&(e.persistentHint||e.focused)?e.hint:e.messages),$=Ue(()=>Z.value.length>0),H=Ue(()=>!e.hideDetails||e.hideDetails==="auto"&&($.value||!!i.details)),W=fe(()=>H.value?`${x.value}-messages`:void 0),te=fe(()=>({id:x,messagesId:W,isDirty:k,isDisabled:P,isReadonly:M,isPristine:L,isValid:B,isValidating:F,hasDetails:H,reset:X,resetValidation:J,validate:Q})),Y=Ue(()=>e.error||e.disabled?void 0:e.focused?e.color:e.baseColor),ne=Ue(()=>{if(e.iconColor)return e.iconColor===!0?Y.value:e.iconColor});return Vt(()=>{const Se=!!(i.prepend||e.prependIcon),Fe=!!(i.append||e.appendIcon);return N("div",{class:Tt(["v-input",`v-input--${e.direction}`,{"v-input--center-affix":e.centerAffix,"v-input--focused":e.focused,"v-input--glow":e.glow,"v-input--hide-spin-buttons":e.hideSpinButtons},a.value,h.value,s.value,re.value,e.class]),style:Qt([l.value,e.style])},[Se&&N("div",{key:"prepend",class:"v-input__prepend"},[i.prepend?.(te.value),e.prependIcon&&ce(p,{key:"prepend-icon",name:"prepend",color:ne.value},null)]),i.default&&N("div",{class:"v-input__control"},[i.default?.(te.value)]),Fe&&N("div",{key:"append",class:"v-input__append"},[e.appendIcon&&ce(p,{key:"append-icon",name:"append",color:ne.value},null),i.append?.(te.value)]),H.value&&N("div",{id:W.value,class:"v-input__details",role:"alert","aria-live":"polite"},[ce(n4,{active:$.value,messages:Z.value},{message:i.message}),i.details?.(te.value)])])}),{reset:X,resetValidation:J,validate:Q,isValid:B,errorMessages:T}}}),OE=Symbol("Forwarded refs");function VE(e,t){let n=e;for(;n;){const i=Reflect.getOwnPropertyDescriptor(n,t);if(i)return i;n=Object.getPrototypeOf(n)}}function yo(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return e[OE]=n,new Proxy(e,{get(r,a){if(Reflect.has(r,a))return Reflect.get(r,a);if(!(typeof a=="symbol"||a.startsWith("$")||a.startsWith("__"))){for(const l of n)if(l.value&&Reflect.has(l.value,a)){const h=Reflect.get(l.value,a);return typeof h=="function"?h.bind(l.value):h}}},has(r,a){if(Reflect.has(r,a))return!0;if(typeof a=="symbol"||a.startsWith("$")||a.startsWith("__"))return!1;for(const l of n)if(l.value&&Reflect.has(l.value,a))return!0;return!1},set(r,a,l){if(Reflect.has(r,a))return Reflect.set(r,a,l);if(typeof a=="symbol"||a.startsWith("$")||a.startsWith("__"))return!1;for(const h of n)if(h.value&&Reflect.has(h.value,a))return Reflect.set(h.value,a,l);return!1},getOwnPropertyDescriptor(r,a){const l=Reflect.getOwnPropertyDescriptor(r,a);if(l)return l;if(!(typeof a=="symbol"||a.startsWith("$")||a.startsWith("__"))){for(const h of n){if(!h.value)continue;const s=VE(h.value,a)??("_"in h.value?VE(h.value._?.setupState,a):void 0);if(s)return s}for(const h of n){const s=h.value&&h.value[OE];if(!s)continue;const p=s.slice();for(;p.length;){const v=p.shift(),x=VE(v.value,a);if(x)return x;const T=v.value&&v.value[OE];T&&p.push(...T)}}}}})}const LY=st({...Ih(),...ur(e4(),["inline"])},"VCheckbox"),OY=It()({name:"VCheckbox",inheritAttrs:!1,props:LY(),emits:{"update:modelValue":e=>!0,"update:focused":e=>!0},setup(e,t){let{attrs:n,slots:i}=t;const r=In(e,"modelValue"),{isFocused:a,focus:l,blur:h}=kh(e),s=at(),p=aa();return Vt(()=>{const[v,x]=rm(n),T=sa.filterProps(e),k=rd.filterProps(e);return ce(sa,kt({ref:s,class:["v-checkbox",e.class]},v,T,{modelValue:r.value,"onUpdate:modelValue":P=>r.value=P,id:e.id||`checkbox-${p}`,focused:a.value,style:e.style}),{...i,default:P=>{let{id:M,messagesId:L,isDisabled:B,isReadonly:F,isValid:X}=P;return ce(rd,kt(k,{id:M.value,"aria-describedby":L.value,disabled:B.value,readonly:F.value},x,{error:X.value===!1,modelValue:r.value,"onUpdate:modelValue":J=>r.value=J,onFocus:l,onBlur:h}),i)}})}),yo({},s)}}),VY=st({color:String,inset:Boolean,length:[Number,String],opacity:[Number,String],thickness:[Number,String],vertical:Boolean,...vn(),...Ii()},"VDivider"),tc=It()({name:"VDivider",props:VY(),setup(e,t){let{attrs:n,slots:i}=t;const{themeClasses:r}=Zi(e),{textColorClasses:a,textColorStyles:l}=Fo(()=>e.color),h=fe(()=>{const s={};return e.length&&(s[e.vertical?"height":"width"]=dn(e.length)),e.thickness&&(s[e.vertical?"borderRightWidth":"borderTopWidth"]=dn(e.thickness)),s});return Vt(()=>{const s=N("hr",{class:Tt([{"v-divider":!0,"v-divider--inset":e.inset,"v-divider--vertical":e.vertical},r.value,a.value,e.class]),style:Qt([h.value,l.value,{"--v-border-opacity":e.opacity},e.style]),"aria-orientation":!n.role||n.role==="separator"?e.vertical?"vertical":"horizontal":void 0,role:`${n.role||"separator"}`},null);return i.default?N("div",{class:Tt(["v-divider__wrapper",{"v-divider__wrapper--vertical":e.vertical,"v-divider__wrapper--inset":e.inset}])},[s,N("div",{class:"v-divider__content"},[i.default()]),s]):s}),{}}}),nk=Symbol.for("vuetify:list");function o4(){let{filterable:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{filterable:!1};const t=xi(nk,{filterable:!1,hasPrepend:Xt(!1),updateHasPrepend:()=>null}),n={filterable:t.filterable||e,hasPrepend:Xt(!1),updateHasPrepend:i=>{i&&(n.hasPrepend.value=i)}};return Mr(nk,n),t}function a4(){return xi(nk,null)}const bA=e=>{const t={activate:n=>{let{id:i,value:r,activated:a}=n;return i=Nn(i),e&&!r&&a.size===1&&a.has(i)||(r?a.add(i):a.delete(i)),a},in:(n,i,r)=>{let a=new Set;if(n!=null)for(const l of Gr(n))a=t.activate({id:l,value:!0,activated:new Set(a),children:i,parents:r});return a},out:n=>Array.from(n)};return t},l4=e=>{const t=bA(e);return{activate:i=>{let{activated:r,id:a,...l}=i;a=Nn(a);const h=r.has(a)?new Set([a]):new Set;return t.activate({...l,id:a,activated:h})},in:(i,r,a)=>{let l=new Set;if(i!=null){const h=Gr(i);h.length&&(l=t.in(h.slice(0,1),r,a))}return l},out:(i,r,a)=>t.out(i,r,a)}},BY=e=>{const t=bA(e);return{activate:i=>{let{id:r,activated:a,children:l,...h}=i;return r=Nn(r),l.has(r)?a:t.activate({id:r,activated:a,children:l,...h})},in:t.in,out:t.out}},FY=e=>{const t=l4(e);return{activate:i=>{let{id:r,activated:a,children:l,...h}=i;return r=Nn(r),l.has(r)?a:t.activate({id:r,activated:a,children:l,...h})},in:t.in,out:t.out}},zY={open:e=>{let{id:t,value:n,opened:i,parents:r}=e;if(n){const a=new Set;a.add(t);let l=r.get(t);for(;l!=null;)a.add(l),l=r.get(l);return a}else return i.delete(t),i},select:()=>null},c4={open:e=>{let{id:t,value:n,opened:i,parents:r}=e;if(n){let a=r.get(t);for(i.add(t);a!=null&&a!==t;)i.add(a),a=r.get(a);return i}else i.delete(t);return i},select:()=>null},NY={open:c4.open,select:e=>{let{id:t,value:n,opened:i,parents:r}=e;if(!n)return i;const a=[];let l=r.get(t);for(;l!=null;)a.push(l),l=r.get(l);return new Set(a)}},xA=e=>{const t={select:n=>{let{id:i,value:r,selected:a}=n;if(i=Nn(i),e&&!r){const l=Array.from(a.entries()).reduce((h,s)=>{let[p,v]=s;return v==="on"&&h.push(p),h},[]);if(l.length===1&&l[0]===i)return a}return a.set(i,r?"on":"off"),a},in:(n,i,r,a)=>{const l=new Map;for(const h of n||[])t.select({id:h,value:!0,selected:l,children:i,parents:r,disabled:a});return l},out:n=>{const i=[];for(const[r,a]of n.entries())a==="on"&&i.push(r);return i}};return t},u4=e=>{const t=xA(e);return{select:i=>{let{selected:r,id:a,...l}=i;a=Nn(a);const h=r.has(a)?new Map([[a,r.get(a)]]):new Map;return t.select({...l,id:a,selected:h})},in:(i,r,a,l)=>i?.length?t.in(i.slice(0,1),r,a,l):new Map,out:(i,r,a)=>t.out(i,r,a)}},UY=e=>{const t=xA(e);return{select:i=>{let{id:r,selected:a,children:l,...h}=i;return r=Nn(r),l.has(r)?a:t.select({id:r,selected:a,children:l,...h})},in:t.in,out:t.out}},$Y=e=>{const t=u4(e);return{select:i=>{let{id:r,selected:a,children:l,...h}=i;return r=Nn(r),l.has(r)?a:t.select({id:r,selected:a,children:l,...h})},in:t.in,out:t.out}},d4=e=>{const t={select:n=>{let{id:i,value:r,selected:a,children:l,parents:h,disabled:s}=n;i=Nn(i);const p=new Map(a),v=[i];for(;v.length;){const T=v.shift();s.has(T)||a.set(Nn(T),r?"on":"off"),l.has(T)&&v.push(...l.get(T))}let x=Nn(h.get(i));for(;x;){let T=!0,k=!0;for(const P of l.get(x)){const M=Nn(P);if(!s.has(M)&&(a.get(M)!=="on"&&(T=!1),a.has(M)&&a.get(M)!=="off"&&(k=!1),!T&&!k))break}a.set(x,T?"on":k?"off":"indeterminate"),x=Nn(h.get(x))}return e&&!r&&Array.from(a.entries()).reduce((k,P)=>{let[M,L]=P;return L==="on"&&k.push(M),k},[]).length===0?p:a},in:(n,i,r,a)=>{let l=new Map;for(const h of n||[])l=t.select({id:h,value:!0,selected:l,children:i,parents:r,disabled:a});return l},out:(n,i)=>{const r=[];for(const[a,l]of n.entries())l==="on"&&!i.has(a)&&r.push(a);return r}};return t},jY=e=>{const t=d4(e);return{select:t.select,in:t.in,out:(i,r,a)=>{const l=[];for(const[h,s]of i.entries())if(s==="on"){if(a.has(h)){const p=a.get(h);if(i.get(p)==="on")continue}l.push(h)}return l}}},Mb=Symbol.for("vuetify:nested"),h4={id:Xt(),root:{register:()=>null,unregister:()=>null,children:at(new Map),parents:at(new Map),disabled:at(new Set),open:()=>null,openOnSelect:()=>null,activate:()=>null,select:()=>null,activatable:at(!1),selectable:at(!1),opened:at(new Set),activated:at(new Set),selected:at(new Map),selectedValues:at([]),getPath:()=>[]}},WY=st({activatable:Boolean,selectable:Boolean,activeStrategy:[String,Function,Object],selectStrategy:[String,Function,Object],openStrategy:[String,Object],opened:null,activated:null,selected:null,mandatory:Boolean},"nested"),HY=e=>{let t=!1;const n=Xt(new Map),i=Xt(new Map),r=Xt(new Set),a=In(e,"opened",e.opened,L=>new Set(Array.isArray(L)?L.map(B=>Nn(B)):L),L=>[...L.values()]),l=fe(()=>{if(typeof e.activeStrategy=="object")return e.activeStrategy;if(typeof e.activeStrategy=="function")return e.activeStrategy(e.mandatory);switch(e.activeStrategy){case"leaf":return BY(e.mandatory);case"single-leaf":return FY(e.mandatory);case"independent":return bA(e.mandatory);case"single-independent":default:return l4(e.mandatory)}}),h=fe(()=>{if(typeof e.selectStrategy=="object")return e.selectStrategy;if(typeof e.selectStrategy=="function")return e.selectStrategy(e.mandatory);switch(e.selectStrategy){case"single-leaf":return $Y(e.mandatory);case"leaf":return UY(e.mandatory);case"independent":return xA(e.mandatory);case"single-independent":return u4(e.mandatory);case"trunk":return jY(e.mandatory);case"classic":default:return d4(e.mandatory)}}),s=fe(()=>{if(typeof e.openStrategy=="object")return e.openStrategy;switch(e.openStrategy){case"list":return NY;case"single":return zY;case"multiple":default:return c4}}),p=In(e,"activated",e.activated,L=>l.value.in(L,n.value,i.value),L=>l.value.out(L,n.value,i.value)),v=In(e,"selected",e.selected,L=>h.value.in(L,n.value,i.value,r.value),L=>h.value.out(L,n.value,i.value));Yr(()=>{t=!0});function x(L){const B=[];let F=Nn(L);for(;F!==void 0;)B.unshift(F),F=i.value.get(F);return B}const T=bs("nested"),k=new Set,P=NK(()=>{Gn(()=>{n.value=new Map(n.value),i.value=new Map(i.value)})},100),M={id:Xt(),root:{opened:a,activatable:Ue(()=>e.activatable),selectable:Ue(()=>e.selectable),activated:p,selected:v,selectedValues:fe(()=>{const L=[];for(const[B,F]of v.value.entries())F==="on"&&L.push(B);return L}),register:(L,B,F,X)=>{if(k.has(L)){x(L).map(String).join(" -> "),x(B).concat(L).map(String).join(" -> ");return}else k.add(L);B&&L!==B&&i.value.set(L,B),F&&r.value.add(L),X&&n.value.set(L,[]),B!=null&&n.value.set(B,[...n.value.get(B)||[],L]),P()},unregister:L=>{if(t)return;k.delete(L),n.value.delete(L),r.value.delete(L);const B=i.value.get(L);if(B){const F=n.value.get(B)??[];n.value.set(B,F.filter(X=>X!==L))}i.value.delete(L),P()},open:(L,B,F)=>{T.emit("click:open",{id:L,value:B,path:x(L),event:F});const X=s.value.open({id:L,value:B,opened:new Set(a.value),children:n.value,parents:i.value,event:F});X&&(a.value=X)},openOnSelect:(L,B,F)=>{const X=s.value.select({id:L,value:B,selected:new Map(v.value),opened:new Set(a.value),children:n.value,parents:i.value,event:F});X&&(a.value=X)},select:(L,B,F)=>{T.emit("click:select",{id:L,value:B,path:x(L),event:F});const X=h.value.select({id:L,value:B,selected:new Map(v.value),children:n.value,parents:i.value,disabled:r.value,event:F});X&&(v.value=X),M.root.openOnSelect(L,B,F)},activate:(L,B,F)=>{if(!e.activatable)return M.root.select(L,!0,F);T.emit("click:activate",{id:L,value:B,path:x(L),event:F});const X=l.value.activate({id:L,value:B,activated:new Set(p.value),children:n.value,parents:i.value,event:F});if(X.size!==p.value.size)p.value=X;else{for(const J of X)if(!p.value.has(J)){p.value=X;return}for(const J of p.value)if(!X.has(J)){p.value=X;return}}},children:n,parents:i,disabled:r,getPath:x}};return Mr(Mb,M),M.root},f4=(e,t,n)=>{const i=xi(Mb,h4),r=Symbol("nested item"),a=fe(()=>{const h=Nn(Ba(e));return h!==void 0?h:r}),l={...i,id:a,open:(h,s)=>i.root.open(a.value,h,s),openOnSelect:(h,s)=>i.root.openOnSelect(a.value,h,s),isOpen:fe(()=>i.root.opened.value.has(a.value)),parent:fe(()=>i.root.parents.value.get(a.value)),activate:(h,s)=>i.root.activate(a.value,h,s),isActivated:fe(()=>i.root.activated.value.has(a.value)),select:(h,s)=>i.root.select(a.value,h,s),isSelected:fe(()=>i.root.selected.value.get(a.value)==="on"),isIndeterminate:fe(()=>i.root.selected.value.get(a.value)==="indeterminate"),isLeaf:fe(()=>!i.root.children.value.get(a.value)),isGroupActivator:i.isGroupActivator};return rv(()=>{i.isGroupActivator||Gn(()=>{i.root.register(a.value,i.id.value,Ba(t),n)})}),Yr(()=>{i.isGroupActivator||i.root.unregister(a.value)}),Ht(a,(h,s)=>{i.isGroupActivator||(i.root.unregister(s),Gn(()=>{i.root.register(h,i.id.value,Ba(t),n)}))}),n&&Mr(Mb,l),l},GY=()=>{const e=xi(Mb,h4);Mr(Mb,{...e,isGroupActivator:!0})};function rg(){const e=Xt(!1);return cs(()=>{window.requestAnimationFrame(()=>{e.value=!0})}),{ssrBootStyles:Ue(()=>e.value?void 0:{transition:"none !important"}),isBooted:Mp(e)}}const qY=ac({name:"VListGroupActivator",setup(e,t){let{slots:n}=t;return GY(),()=>n.default?.()}}),m4=st({activeColor:String,baseColor:String,color:String,collapseIcon:{type:Cn,default:"$collapse"},disabled:Boolean,expandIcon:{type:Cn,default:"$expand"},rawId:[String,Number],prependIcon:Cn,appendIcon:Cn,fluid:Boolean,subgroup:Boolean,title:String,value:null,...vn(),...ti()},"VListGroup"),Db=It()({name:"VListGroup",props:m4(),setup(e,t){let{slots:n}=t;const{isOpen:i,open:r,id:a}=f4(()=>e.value,()=>e.disabled,!0),l=fe(()=>`v-list-group--id-${String(e.rawId??a.value)}`),h=a4(),{isBooted:s}=rg();function p(k){["INPUT","TEXTAREA"].includes(k.target?.tagName)||r(!i.value,k)}const v=fe(()=>({onClick:p,class:"v-list-group__header",id:l.value})),x=fe(()=>i.value?e.collapseIcon:e.expandIcon),T=fe(()=>({VListItem:{activeColor:e.activeColor,baseColor:e.baseColor,color:e.color,prependIcon:e.prependIcon||e.subgroup&&x.value,appendIcon:e.appendIcon||!e.subgroup&&x.value,title:e.title,value:e.value}}));return Vt(()=>ce(e.tag,{class:Tt(["v-list-group",{"v-list-group--prepend":h?.hasPrepend.value,"v-list-group--fluid":e.fluid,"v-list-group--subgroup":e.subgroup,"v-list-group--open":i.value},e.class]),style:Qt(e.style)},{default:()=>[n.activator&&ce(ci,{defaults:T.value},{default:()=>[ce(qY,null,{default:()=>[n.activator({props:v.value,isOpen:i.value})]})]}),ce(Oa,{transition:{component:rT},disabled:!s.value},{default:()=>[vi(N("div",{class:"v-list-group__items",role:"group","aria-labelledby":l.value},[n.default?.()]),[[hu,i.value]])]})]})),{isOpen:i}}}),KY=st({opacity:[Number,String],...vn(),...ti()},"VListItemSubtitle"),p4=It()({name:"VListItemSubtitle",props:KY(),setup(e,t){let{slots:n}=t;return Vt(()=>ce(e.tag,{class:Tt(["v-list-item-subtitle",e.class]),style:Qt([{"--v-list-item-subtitle-opacity":e.opacity},e.style])},n)),{}}}),g4=Sh("v-list-item-title"),_4=st({active:{type:Boolean,default:void 0},activeClass:String,activeColor:String,appendAvatar:String,appendIcon:Cn,baseColor:String,disabled:Boolean,lines:[Boolean,String],link:{type:Boolean,default:void 0},nav:Boolean,prependAvatar:String,prependIcon:Cn,ripple:{type:[Boolean,Object],default:!0},slim:Boolean,subtitle:{type:[String,Number,Boolean],default:void 0},title:{type:[String,Number,Boolean],default:void 0},value:null,onClick:Vo(),onClickOnce:Vo(),...sl(),...vn(),...xs(),...Ls(),...Hs(),...Nr(),...f0(),...ti(),...Ii(),...Oc({variant:"text"})},"VListItem"),uu=It()({name:"VListItem",directives:{vRipple:za},props:_4(),emits:{click:e=>!0},setup(e,t){let{attrs:n,slots:i,emit:r}=t;const a=h0(e,n),l=fe(()=>e.value===void 0?a.href.value:e.value),{activate:h,isActivated:s,select:p,isOpen:v,isSelected:x,isIndeterminate:T,isGroupActivator:k,root:P,parent:M,openOnSelect:L,id:B}=f4(l,()=>e.disabled,!1),F=a4(),X=fe(()=>e.active!==!1&&(e.active||a.isActive?.value||(P.activatable.value?s.value:x.value))),J=Ue(()=>e.link!==!1&&a.isLink.value),Q=fe(()=>!!F&&(P.selectable.value||P.activatable.value||e.value!=null)),re=fe(()=>!e.disabled&&e.link!==!1&&(e.link||a.isClickable.value||Q.value)),Z=fe(()=>F?J.value?"link":Q.value?"option":"listitem":void 0),$=fe(()=>{if(Q.value)return P.activatable.value?s.value:P.selectable.value?x.value:X.value}),H=Ue(()=>e.rounded||e.nav),W=Ue(()=>e.color??e.activeColor),te=Ue(()=>({color:X.value?W.value??e.baseColor:e.baseColor,variant:e.variant}));Ht(()=>a.isActive?.value,Qe=>{Qe&&Y()}),rv(()=>{a.isActive?.value&&Gn(()=>Y())});function Y(){M.value!=null&&P.open(M.value,!0),L(!0)}const{themeClasses:ne}=Zi(e),{borderClasses:Se}=Rl(e),{colorClasses:Fe,colorStyles:Ve,variantClasses:Ge}=eg(te),{densityClasses:je}=$a(e),{dimensionStyles:Ae}=Os(e),{elevationClasses:Ke}=vo(e),{roundedClasses:ve}=Qr(H),Le=Ue(()=>e.lines?`v-list-item--${e.lines}-line`:void 0),We=Ue(()=>e.ripple!==void 0&&e.ripple&&F?.filterable?{keys:["Enter"]}:e.ripple),ct=fe(()=>({isActive:X.value,select:p,isOpen:v.value,isSelected:x.value,isIndeterminate:T.value}));function ut(Qe){r("click",Qe),!["INPUT","TEXTAREA"].includes(Qe.target?.tagName)&&re.value&&(a.navigate?.(Qe),!k&&(P.activatable.value?h(!s.value,Qe):(P.selectable.value||e.value!=null&&!J.value)&&p(!x.value,Qe)))}function rt(Qe){const Ct=Qe.target;["INPUT","TEXTAREA"].includes(Ct.tagName)||(Qe.key==="Enter"||Qe.key===" "&&!F?.filterable)&&(Qe.preventDefault(),Qe.stopPropagation(),Qe.target.dispatchEvent(new MouseEvent("click",Qe)))}return Vt(()=>{const Qe=J.value?"a":e.tag,Ct=i.title||e.title!=null,At=i.subtitle||e.subtitle!=null,yn=!!(e.appendAvatar||e.appendIcon),Mn=!!(yn||i.append),Ce=!!(e.prependAvatar||e.prependIcon),ze=!!(Ce||i.prepend);return F?.updateHasPrepend(ze),e.activeColor&&kN("active-color",["color","base-color"]),vi(ce(Qe,kt(a.linkProps,{class:["v-list-item",{"v-list-item--active":X.value,"v-list-item--disabled":e.disabled,"v-list-item--link":re.value,"v-list-item--nav":e.nav,"v-list-item--prepend":!ze&&F?.hasPrepend.value,"v-list-item--slim":e.slim,[`${e.activeClass}`]:e.activeClass&&X.value},ne.value,Se.value,Fe.value,je.value,Ke.value,Le.value,ve.value,Ge.value,e.class],style:[Ve.value,Ae.value,e.style],tabindex:re.value?F?-2:0:void 0,"aria-selected":$.value,role:Z.value,onClick:ut,onKeydown:re.value&&!J.value&&rt}),{default:()=>[sm(re.value||X.value,"v-list-item"),ze&&N("div",{key:"prepend",class:"v-list-item__prepend"},[i.prepend?ce(ci,{key:"prepend-defaults",disabled:!Ce,defaults:{VAvatar:{density:e.density,image:e.prependAvatar},VIcon:{density:e.density,icon:e.prependIcon},VListItemAction:{start:!0}}},{default:()=>[i.prepend?.(ct.value)]}):N(sn,null,[e.prependAvatar&&ce(oc,{key:"prepend-avatar",density:e.density,image:e.prependAvatar},null),e.prependIcon&&ce(Hi,{key:"prepend-icon",density:e.density,icon:e.prependIcon},null)]),N("div",{class:"v-list-item__spacer"},null)]),N("div",{class:"v-list-item__content","data-no-activator":""},[Ct&&ce(g4,{key:"title"},{default:()=>[i.title?.({title:e.title})??an(e.title)]}),At&&ce(p4,{key:"subtitle"},{default:()=>[i.subtitle?.({subtitle:e.subtitle})??an(e.subtitle)]}),i.default?.(ct.value)]),Mn&&N("div",{key:"append",class:"v-list-item__append"},[i.append?ce(ci,{key:"append-defaults",disabled:!yn,defaults:{VAvatar:{density:e.density,image:e.appendAvatar},VIcon:{density:e.density,icon:e.appendIcon},VListItemAction:{end:!0}}},{default:()=>[i.append?.(ct.value)]}):N(sn,null,[e.appendIcon&&ce(Hi,{key:"append-icon",density:e.density,icon:e.appendIcon},null),e.appendAvatar&&ce(oc,{key:"append-avatar",density:e.density,image:e.appendAvatar},null)]),N("div",{class:"v-list-item__spacer"},null)])]}),[[za,re.value&&We.value]])}),{activate:h,isActivated:s,isGroupActivator:k,isSelected:x,list:F,select:p,root:P,id:B,link:a}}}),XY=st({color:String,inset:Boolean,sticky:Boolean,title:String,...vn(),...ti()},"VListSubheader"),uv=It()({name:"VListSubheader",props:XY(),setup(e,t){let{slots:n}=t;const{textColorClasses:i,textColorStyles:r}=Fo(()=>e.color);return Vt(()=>{const a=!!(n.default||e.title);return ce(e.tag,{class:Tt(["v-list-subheader",{"v-list-subheader--inset":e.inset,"v-list-subheader--sticky":e.sticky},i.value,e.class]),style:Qt([{textColorStyles:r},e.style])},{default:()=>[a&&N("div",{class:"v-list-subheader__text"},[n.default?.()??e.title])]})}),{}}}),ZY=st({items:Array,returnObject:Boolean},"VListChildren"),v4=It()({name:"VListChildren",props:ZY(),setup(e,t){let{slots:n}=t;return o4(),()=>n.default?.()??e.items?.map(i=>{let{children:r,props:a,type:l,raw:h}=i;if(l==="divider")return n.divider?.({props:a})??ce(tc,a,null);if(l==="subheader")return n.subheader?.({props:a})??ce(uv,a,null);const s={subtitle:n.subtitle?v=>n.subtitle?.({...v,item:h}):void 0,prepend:n.prepend?v=>n.prepend?.({...v,item:h}):void 0,append:n.append?v=>n.append?.({...v,item:h}):void 0,title:n.title?v=>n.title?.({...v,item:h}):void 0},p=Db.filterProps(a);return r?ce(Db,kt(p,{value:e.returnObject?h:a?.value,rawId:a?.value}),{activator:v=>{let{props:x}=v;const T=kt(a,x,{value:e.returnObject?h:a.value});return n.header?n.header({props:T}):ce(uu,T,s)},default:()=>ce(v4,{items:r,returnObject:e.returnObject},n)}):n.item?n.item({props:a}):ce(uu,kt(a,{value:e.returnObject?h:a.value}),s)})}}),y4=st({items:{type:Array,default:()=>[]},itemTitle:{type:[String,Array,Function],default:"title"},itemValue:{type:[String,Array,Function],default:"value"},itemChildren:{type:[Boolean,String,Array,Function],default:"children"},itemProps:{type:[Boolean,String,Array,Function],default:"props"},itemType:{type:[Boolean,String,Array,Function],default:"type"},returnObject:Boolean,valueComparator:Function},"list-items"),YY=new Set(["item","divider","subheader"]);function iu(e,t){const n=Ps(t,e.itemTitle,t),i=Ps(t,e.itemValue,n),r=Ps(t,e.itemChildren),a=e.itemProps===!0?typeof t=="object"&&t!=null&&!Array.isArray(t)?"children"in t?ur(t,["children"]):t:void 0:Ps(t,e.itemProps);let l=Ps(t,e.itemType,"item");YY.has(l)||(l="item");const h={title:n,value:i,...a};return{type:l,title:String(h.title??""),value:h.value,props:h,children:l==="item"&&Array.isArray(r)?b4(e,r):void 0,raw:t}}iu.neededProps=["itemTitle","itemValue","itemChildren","itemProps","itemType"];function b4(e,t){const n=Ml(e,iu.neededProps),i=[];for(const r of t)i.push(iu(n,r));return i}function wA(e){const t=fe(()=>b4(e,e.items)),n=fe(()=>t.value.some(h=>h.value===null)),i=Xt(new Map),r=Xt([]);zr(()=>{const h=t.value,s=new Map,p=[];for(let v=0;v<h.length;v++){const x=h[v];if(jf(x.value)||x.value===null){let T=s.get(x.value);T||(T=[],s.set(x.value,T)),T.push(x)}else p.push(x)}i.value=s,r.value=p});function a(h){const s=i.value,p=t.value,v=r.value,x=n.value,T=e.returnObject,k=!!e.valueComparator,P=e.valueComparator||po,M=Ml(e,iu.neededProps),L=[];e:for(const B of h){if(!x&&B===null)continue;if(T&&typeof B=="string"){L.push(iu(M,B));continue}const F=s.get(B);if(k||!F){for(const X of k?p:v)if(P(B,X.value)){L.push(X);continue e}L.push(iu(M,B));continue}L.push(...F)}return L}function l(h){return e.returnObject?h.map(s=>{let{raw:p}=s;return p}):h.map(s=>{let{value:p}=s;return p})}return{items:t,transformIn:a,transformOut:l}}const JY=new Set(["item","divider","subheader"]);function QY(e,t){const n=jf(t)?t:Ps(t,e.itemTitle),i=jf(t)?t:Ps(t,e.itemValue,void 0),r=Ps(t,e.itemChildren),a=e.itemProps===!0?ur(t,["children"]):Ps(t,e.itemProps);let l=Ps(t,e.itemType,"item");JY.has(l)||(l="item");const h={title:n,value:i,...a};return{type:l,title:h.title,value:h.value,props:h,children:l==="item"&&r?x4(e,r):void 0,raw:t}}function x4(e,t){const n=[];for(const i of t)n.push(QY(e,i));return n}function w4(e){return{items:fe(()=>x4(e,e.items))}}const T4=st({baseColor:String,activeColor:String,activeClass:String,bgColor:String,disabled:Boolean,filterable:Boolean,expandIcon:Cn,collapseIcon:Cn,lines:{type:[Boolean,String],default:"one"},slim:Boolean,nav:Boolean,"onClick:open":Vo(),"onClick:select":Vo(),"onUpdate:opened":Vo(),...WY({selectStrategy:"single-leaf",openStrategy:"list"}),...sl(),...vn(),...xs(),...Ls(),...Hs(),...y4(),...Nr(),...ti(),...Ii(),...Oc({variant:"text"})},"VList"),j_=It()({name:"VList",props:T4(),emits:{"update:selected":e=>!0,"update:activated":e=>!0,"update:opened":e=>!0,"click:open":e=>!0,"click:activate":e=>!0,"click:select":e=>!0},setup(e,t){let{slots:n}=t;const{items:i}=w4(e),{themeClasses:r}=Zi(e),{backgroundColorClasses:a,backgroundColorStyles:l}=tr(()=>e.bgColor),{borderClasses:h}=Rl(e),{densityClasses:s}=$a(e),{dimensionStyles:p}=Os(e),{elevationClasses:v}=vo(e),{roundedClasses:x}=Qr(e),{children:T,open:k,parents:P,select:M,getPath:L}=HY(e),B=Ue(()=>e.lines?`v-list--${e.lines}-line`:void 0),F=Ue(()=>e.activeColor),X=Ue(()=>e.baseColor),J=Ue(()=>e.color),Q=Ue(()=>e.selectable||e.activatable);o4({filterable:e.filterable}),Jr({VListGroup:{activeColor:F,baseColor:X,color:J,expandIcon:Ue(()=>e.expandIcon),collapseIcon:Ue(()=>e.collapseIcon)},VListItem:{activeClass:Ue(()=>e.activeClass),activeColor:F,baseColor:X,color:J,density:Ue(()=>e.density),disabled:Ue(()=>e.disabled),lines:Ue(()=>e.lines),nav:Ue(()=>e.nav),slim:Ue(()=>e.slim),variant:Ue(()=>e.variant)}});const re=Xt(!1),Z=at();function $(Se){re.value=!0}function H(Se){re.value=!1}function W(Se){!re.value&&!(Se.relatedTarget&&Z.value?.contains(Se.relatedTarget))&&ne()}function te(Se){const Fe=Se.target;if(!(!Z.value||Fe.tagName==="INPUT"&&["Home","End"].includes(Se.key)||Fe.tagName==="TEXTAREA")){if(Se.key==="ArrowDown")ne("next");else if(Se.key==="ArrowUp")ne("prev");else if(Se.key==="Home")ne("first");else if(Se.key==="End")ne("last");else return;Se.preventDefault()}}function Y(Se){re.value=!0}function ne(Se){if(Z.value)return Ep(Z.value,Se)}return Vt(()=>ce(e.tag,{ref:Z,class:Tt(["v-list",{"v-list--disabled":e.disabled,"v-list--nav":e.nav,"v-list--slim":e.slim},r.value,a.value,h.value,s.value,v.value,B.value,x.value,e.class]),style:Qt([l.value,p.value,e.style]),tabindex:e.disabled?-1:0,role:Q.value?"listbox":"list","aria-activedescendant":void 0,onFocusin:$,onFocusout:H,onFocus:W,onKeydown:te,onMousedown:Y},{default:()=>[ce(v4,{items:i.value,returnObject:e.returnObject},n)]})),{open:k,select:M,focus:ne,children:T,parents:P,getPath:L}}}),eJ=Sh("v-list-img"),tJ=st({start:Boolean,end:Boolean,...vn(),...ti()},"VListItemAction"),TA=It()({name:"VListItemAction",props:tJ(),setup(e,t){let{slots:n}=t;return Vt(()=>ce(e.tag,{class:Tt(["v-list-item-action",{"v-list-item-action--start":e.start,"v-list-item-action--end":e.end},e.class]),style:Qt(e.style)},n)),{}}}),nJ=st({start:Boolean,end:Boolean,...vn(),...ti()},"VListItemMedia"),iJ=It()({name:"VListItemMedia",props:nJ(),setup(e,t){let{slots:n}=t;return Vt(()=>ce(e.tag,{class:Tt(["v-list-item-media",{"v-list-item-media--start":e.start,"v-list-item-media--end":e.end},e.class]),style:Qt(e.style)},n)),{}}});function BE(e,t){return{x:e.x+t.x,y:e.y+t.y}}function rJ(e,t){return{x:e.x-t.x,y:e.y-t.y}}function BO(e,t){if(e.side==="top"||e.side==="bottom"){const{side:n,align:i}=e,r=i==="left"?0:i==="center"?t.width/2:i==="right"?t.width:i,a=n==="top"?0:n==="bottom"?t.height:n;return BE({x:r,y:a},t)}else if(e.side==="left"||e.side==="right"){const{side:n,align:i}=e,r=n==="left"?0:n==="right"?t.width:n,a=i==="top"?0:i==="center"?t.height/2:i==="bottom"?t.height:i;return BE({x:r,y:a},t)}return BE({x:t.width/2,y:t.height/2},t)}const S4={static:aJ,connected:cJ},sJ=st({locationStrategy:{type:[String,Function],default:"static",validator:e=>typeof e=="function"||e in S4},location:{type:String,default:"bottom"},origin:{type:String,default:"auto"},offset:[Number,String,Array],stickToTarget:Boolean},"VOverlay-location-strategies");function oJ(e,t){const n=at({}),i=at();Gi&&ra(()=>!!(t.isActive.value&&e.locationStrategy),h=>{Ht(()=>e.locationStrategy,h),io(()=>{window.removeEventListener("resize",r),visualViewport?.removeEventListener("resize",a),visualViewport?.removeEventListener("scroll",l),i.value=void 0}),window.addEventListener("resize",r,{passive:!0}),visualViewport?.addEventListener("resize",a,{passive:!0}),visualViewport?.addEventListener("scroll",l,{passive:!0}),typeof e.locationStrategy=="function"?i.value=e.locationStrategy(t,e,n)?.updateLocation:i.value=S4[e.locationStrategy](t,e,n)?.updateLocation});function r(h){i.value?.(h)}function a(h){i.value?.(h)}function l(h){i.value?.(h)}return{contentStyles:n,updateLocation:i}}function aJ(){}function lJ(e,t){const n=QI(e);return t?n.x+=parseFloat(e.style.right||0):n.x-=parseFloat(e.style.left||0),n.y-=parseFloat(e.style.top||0),n}function cJ(e,t,n){(Array.isArray(e.target.value)||zK(e.target.value))&&Object.assign(n.value,{position:"fixed",top:0,[e.isRtl.value?"right":"left"]:0});const{preferredAnchor:r,preferredOrigin:a}=JI(()=>{const B=WC(t.location,e.isRtl.value),F=t.origin==="overlap"?B:t.origin==="auto"?AE(B):WC(t.origin,e.isRtl.value);return B.side===F.side&&B.align===PE(F).align?{preferredAnchor:XL(B),preferredOrigin:XL(F)}:{preferredAnchor:B,preferredOrigin:F}}),[l,h,s,p]=["minWidth","minHeight","maxWidth","maxHeight"].map(B=>fe(()=>{const F=parseFloat(t[B]);return isNaN(F)?1/0:F})),v=fe(()=>{if(Array.isArray(t.offset))return t.offset;if(typeof t.offset=="string"){const B=t.offset.split(" ").map(parseFloat);return B.length<2&&B.push(0),B}return typeof t.offset=="number"?[t.offset,0]:[0,0]});let x=!1,T=-1;const k=new LN(4),P=new ResizeObserver(()=>{if(!x)return;if(requestAnimationFrame(F=>{F!==T&&k.clear(),requestAnimationFrame(X=>{T=X})}),k.isFull){const F=k.values();if(po(F.at(-1),F.at(-3))&&!po(F.at(-1),F.at(-2)))return}const B=L();B&&k.push(B.flipped)});let M=new Dc({x:0,y:0,width:0,height:0});Ht(e.target,(B,F)=>{F&&!Array.isArray(F)&&P.unobserve(F),Array.isArray(B)?po(B,F)||L():B&&P.observe(B)},{immediate:!0}),Ht(e.contentEl,(B,F)=>{F&&P.unobserve(F),B&&P.observe(B)},{immediate:!0}),io(()=>{P.disconnect()});function L(){if(x=!1,requestAnimationFrame(()=>x=!0),!e.target.value||!e.contentEl.value)return;(Array.isArray(e.target.value)||e.target.value.offsetParent||e.target.value.getClientRects().length)&&(M=zN(e.target.value));const B=lJ(e.contentEl.value,e.isRtl.value),F=Xw(e.contentEl.value),X=t.stickToTarget?0:12;F.length||(F.push(document.documentElement),e.contentEl.value.style.top&&e.contentEl.value.style.left||(B.x-=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-x")||0),B.y-=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-y")||0)));const J=F.reduce((ne,Se)=>{const Fe=oK(Se);return ne?new Dc({x:Math.max(ne.left,Fe.left),y:Math.max(ne.top,Fe.top),width:Math.min(ne.right,Fe.right)-Math.max(ne.left,Fe.left),height:Math.min(ne.bottom,Fe.bottom)-Math.max(ne.top,Fe.top)}):Fe},void 0);t.stickToTarget?(J.x+=Math.min(0,M.x),J.y+=Math.min(0,M.y),J.width=Math.max(J.width,M.x+M.width),J.height=Math.max(J.height,M.y+M.height)):(J.x+=X,J.y+=X,J.width-=X*2,J.height-=X*2);let Q={anchor:r.value,origin:a.value};function re(ne){const Se=new Dc(B),Fe=BO(ne.anchor,M),Ve=BO(ne.origin,Se);let{x:Ge,y:je}=rJ(Fe,Ve);switch(ne.anchor.side){case"top":je-=v.value[0];break;case"bottom":je+=v.value[0];break;case"left":Ge-=v.value[0];break;case"right":Ge+=v.value[0];break}switch(ne.anchor.align){case"top":je-=v.value[1];break;case"bottom":je+=v.value[1];break;case"left":Ge-=v.value[1];break;case"right":Ge+=v.value[1];break}return Se.x+=Ge,Se.y+=je,Se.width=Math.min(Se.width,s.value),Se.height=Math.min(Se.height,p.value),{overflows:YL(Se,J),x:Ge,y:je}}let Z=0,$=0;const H={x:0,y:0},W={x:!1,y:!1};let te=-1;for(;!(te++>10);){const{x:ne,y:Se,overflows:Fe}=re(Q);Z+=ne,$+=Se,B.x+=ne,B.y+=Se;{const Ve=ZL(Q.anchor),Ge=Fe.x.before||Fe.x.after,je=Fe.y.before||Fe.y.after;let Ae=!1;if(["x","y"].forEach(Ke=>{if(Ke==="x"&&Ge&&!W.x||Ke==="y"&&je&&!W.y){const ve={anchor:{...Q.anchor},origin:{...Q.origin}},Le=Ke==="x"?Ve==="y"?PE:AE:Ve==="y"?AE:PE;ve.anchor=Le(ve.anchor),ve.origin=Le(ve.origin);const{overflows:We}=re(ve);(We[Ke].before<=Fe[Ke].before&&We[Ke].after<=Fe[Ke].after||We[Ke].before+We[Ke].after<(Fe[Ke].before+Fe[Ke].after)/2)&&(Q=ve,Ae=W[Ke]=!0)}}),Ae)continue}Fe.x.before&&(Z+=Fe.x.before,B.x+=Fe.x.before),Fe.x.after&&(Z-=Fe.x.after,B.x-=Fe.x.after),Fe.y.before&&($+=Fe.y.before,B.y+=Fe.y.before),Fe.y.after&&($-=Fe.y.after,B.y-=Fe.y.after);{const Ve=YL(B,J);H.x=J.width-Ve.x.before-Ve.x.after,H.y=J.height-Ve.y.before-Ve.y.after,Z+=Ve.x.before,B.x+=Ve.x.before,$+=Ve.y.before,B.y+=Ve.y.before}break}const Y=ZL(Q.anchor);return Object.assign(n.value,{"--v-overlay-anchor-origin":`${Q.anchor.side} ${Q.anchor.align}`,transformOrigin:`${Q.origin.side} ${Q.origin.align}`,top:dn(FE($)),left:e.isRtl.value?void 0:dn(FE(Z)),right:e.isRtl.value?dn(FE(-Z)):void 0,minWidth:dn(Y==="y"?Math.min(l.value,M.width):l.value),maxWidth:dn(FO(Sr(H.x,l.value===1/0?0:l.value,s.value))),maxHeight:dn(FO(Sr(H.y,h.value===1/0?0:h.value,p.value)))}),{available:H,contentBox:B,flipped:W}}return Ht(()=>[r.value,a.value,t.offset,t.minWidth,t.minHeight,t.maxWidth,t.maxHeight],()=>L()),Gn(()=>{const B=L();if(!B)return;const{available:F,contentBox:X}=B;X.height>F.y&&requestAnimationFrame(()=>{L(),requestAnimationFrame(()=>{L()})})}),{updateLocation:L}}function FE(e){return Math.round(e*devicePixelRatio)/devicePixelRatio}function FO(e){return Math.ceil(e*devicePixelRatio)/devicePixelRatio}let ik=!0;const e1=[];function uJ(e){!ik||e1.length?(e1.push(e),rk()):(ik=!1,e(),rk())}let zO=-1;function rk(){cancelAnimationFrame(zO),zO=requestAnimationFrame(()=>{const e=e1.shift();e&&e(),e1.length?rk():ik=!0})}const E4={none:null,close:fJ,block:mJ,reposition:pJ},dJ=st({scrollStrategy:{type:[String,Function],default:"block",validator:e=>typeof e=="function"||e in E4}},"VOverlay-scroll-strategies");function hJ(e,t){if(!Gi)return;let n;zr(async()=>{n?.stop(),t.isActive.value&&e.scrollStrategy&&(n=P_(),await new Promise(i=>setTimeout(i)),n.active&&n.run(()=>{typeof e.scrollStrategy=="function"?e.scrollStrategy(t,e,n):E4[e.scrollStrategy]?.(t,e,n)}))}),io(()=>{n?.stop()})}function fJ(e){function t(n){e.isActive.value=!1}C4(SA(e.target.value,e.contentEl.value),t)}function mJ(e,t){const n=e.root.value?.offsetParent,i=SA(e.target.value,e.contentEl.value),r=[...new Set([...Xw(i,t.contained?n:void 0),...Xw(e.contentEl.value,t.contained?n:void 0)])].filter(h=>!h.classList.contains("v-overlay-scroll-blocked")),a=window.innerWidth-document.documentElement.offsetWidth,l=(h=>iA(h)&&h)(n||document.documentElement);l&&e.root.value.classList.add("v-overlay--scroll-blocked"),r.forEach((h,s)=>{h.style.setProperty("--v-body-scroll-x",dn(-h.scrollLeft)),h.style.setProperty("--v-body-scroll-y",dn(-h.scrollTop)),h!==document.documentElement&&h.style.setProperty("--v-scrollbar-offset",dn(a)),h.classList.add("v-overlay-scroll-blocked")}),io(()=>{r.forEach((h,s)=>{const p=parseFloat(h.style.getPropertyValue("--v-body-scroll-x")),v=parseFloat(h.style.getPropertyValue("--v-body-scroll-y")),x=h.style.scrollBehavior;h.style.scrollBehavior="auto",h.style.removeProperty("--v-body-scroll-x"),h.style.removeProperty("--v-body-scroll-y"),h.style.removeProperty("--v-scrollbar-offset"),h.classList.remove("v-overlay-scroll-blocked"),h.scrollLeft=-p,h.scrollTop=-v,h.style.scrollBehavior=x}),l&&e.root.value.classList.remove("v-overlay--scroll-blocked")})}function pJ(e,t,n){let i=!1,r=-1,a=-1;function l(h){uJ(()=>{const s=performance.now();e.updateLocation.value?.(h),i=(performance.now()-s)/(1e3/60)>2})}a=(typeof requestIdleCallback>"u"?h=>h():requestIdleCallback)(()=>{n.run(()=>{C4(SA(e.target.value,e.contentEl.value),h=>{i?(cancelAnimationFrame(r),r=requestAnimationFrame(()=>{r=requestAnimationFrame(()=>{l(h)})})):l(h)})})}),io(()=>{typeof cancelIdleCallback<"u"&&cancelIdleCallback(a),cancelAnimationFrame(r)})}function SA(e,t){return Array.isArray(e)?document.elementsFromPoint(...e).find(n=>!t?.contains(n)):e??t}function C4(e,t){const n=[document,...Xw(e)];n.forEach(i=>{i.addEventListener("scroll",t,{passive:!0})}),io(()=>{n.forEach(i=>{i.removeEventListener("scroll",t)})})}const sk=Symbol.for("vuetify:v-menu"),EA=st({closeDelay:[Number,String],openDelay:[Number,String]},"delay");function CA(e,t){let n=()=>{};function i(l,h){n?.();const s=Math.max(h?.minDelay??0,Number(l?e.openDelay:e.closeDelay));return new Promise(p=>{n=eK(s,()=>{t?.(l),p(l)})})}function r(){return i(!0)}function a(l){return i(!1,l)}return{clearDelay:n,runOpenDelay:r,runCloseDelay:a}}const gJ=st({target:[String,Object],activator:[String,Object],activatorProps:{type:Object,default:()=>({})},openOnClick:{type:Boolean,default:void 0},openOnHover:Boolean,openOnFocus:{type:Boolean,default:void 0},closeOnContentClick:Boolean,...EA()},"VOverlay-activator");function _J(e,t){let{isActive:n,isTop:i,contentEl:r}=t;const a=bs("useActivator"),l=at();let h=!1,s=!1,p=!0;const v=fe(()=>e.openOnFocus||e.openOnFocus==null&&e.openOnHover),x=fe(()=>e.openOnClick||e.openOnClick==null&&!e.openOnHover&&!v.value),{runOpenDelay:T,runCloseDelay:k}=CA(e,$=>{$===(e.openOnHover&&h||v.value&&s)&&!(e.openOnHover&&n.value&&!i.value)&&(n.value!==$&&(p=!0),n.value=$)}),P=at(),M={onClick:$=>{$.stopPropagation(),l.value=$.currentTarget||$.target,n.value||(P.value=[$.clientX,$.clientY]),n.value=!n.value},onMouseenter:$=>{h=!0,l.value=$.currentTarget||$.target,T()},onMouseleave:$=>{h=!1,k()},onFocus:$=>{z_($.target,":focus-visible")!==!1&&(s=!0,$.stopPropagation(),l.value=$.currentTarget||$.target,T())},onBlur:$=>{s=!1,$.stopPropagation(),k({minDelay:1})}},L=fe(()=>{const $={};return x.value&&($.onClick=M.onClick),e.openOnHover&&($.onMouseenter=M.onMouseenter,$.onMouseleave=M.onMouseleave),v.value&&($.onFocus=M.onFocus,$.onBlur=M.onBlur),$}),B=fe(()=>{const $={};if(e.openOnHover&&($.onMouseenter=()=>{h=!0,T()},$.onMouseleave=()=>{h=!1,k()}),v.value&&($.onFocusin=()=>{s=!0,T()},$.onFocusout=()=>{s=!1,k({minDelay:1})}),e.closeOnContentClick){const H=xi(sk,null);$.onClick=()=>{n.value=!1,H?.closeParents()}}return $}),F=fe(()=>{const $={};return e.openOnHover&&($.onMouseenter=()=>{p&&(h=!0,p=!1,T())},$.onMouseleave=()=>{h=!1,k()}),$});Ht(i,$=>{$&&(e.openOnHover&&!h&&(!v.value||!s)||v.value&&!s&&(!e.openOnHover||!h))&&!r.value?.contains(document.activeElement)&&(n.value=!1)}),Ht(n,$=>{$||setTimeout(()=>{P.value=void 0})},{flush:"post"});const X=Gw();zr(()=>{X.value&&Gn(()=>{l.value=X.el})});const J=Gw(),Q=fe(()=>e.target==="cursor"&&P.value?P.value:J.value?J.el:k4(e.target,a)||l.value),re=fe(()=>Array.isArray(Q.value)?void 0:Q.value);let Z;return Ht(()=>!!e.activator,$=>{$&&Gi?(Z=P_(),Z.run(()=>{vJ(e,a,{activatorEl:l,activatorEvents:L})})):Z&&Z.stop()},{flush:"post",immediate:!0}),io(()=>{Z?.stop()}),{activatorEl:l,activatorRef:X,target:Q,targetEl:re,targetRef:J,activatorEvents:L,contentEvents:B,scrimEvents:F}}function vJ(e,t,n){let{activatorEl:i,activatorEvents:r}=n;Ht(()=>e.activator,(s,p)=>{if(p&&s!==p){const v=h(p);v&&l(v)}s&&Gn(()=>a())},{immediate:!0}),Ht(()=>e.activatorProps,()=>{a()}),io(()=>{l()});function a(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:h(),p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e.activatorProps;s&&aK(s,kt(r.value,p))}function l(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:h(),p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e.activatorProps;s&&lK(s,kt(r.value,p))}function h(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:e.activator;const p=k4(s,t);return i.value=p?.nodeType===Node.ELEMENT_NODE?p:void 0,i.value}}function k4(e,t){if(!e)return;let n;if(e==="parent"){let i=t?.proxy?.$el?.parentNode;for(;i?.hasAttribute("data-no-activator");)i=i.parentNode;n=i}else typeof e=="string"?n=document.querySelector(e):"$el"in e?n=e.$el:n=e;return n}function I4(){if(!Gi)return Xt(!1);const{ssr:e}=Dl();if(e){const t=Xt(!1);return cs(()=>{t.value=!0}),t}else return Xt(!0)}const kA=st({eager:Boolean},"lazy");function IA(e,t){const n=Xt(!1),i=Ue(()=>n.value||e.eager||t.value);Ht(t,()=>n.value=!0);function r(){e.eager||(n.value=!1)}return{isBooted:n,hasContent:i,onAfterLeave:r}}function sg(){const t=bs("useScopeId").vnode.scopeId;return{scopeId:t?{[t]:""}:void 0}}const NO=Symbol.for("vuetify:stack"),py=to([]);function yJ(e,t,n){const i=bs("useStack"),r=!n,a=xi(NO,void 0),l=to({activeChildren:new Set});Mr(NO,l);const h=Xt(Number(Ba(t)));ra(e,()=>{const v=py.at(-1)?.[1];h.value=v?v+10:Number(Ba(t)),r&&py.push([i.uid,h.value]),a?.activeChildren.add(i.uid),io(()=>{if(r){const x=Nn(py).findIndex(T=>T[0]===i.uid);py.splice(x,1)}a?.activeChildren.delete(i.uid)})});const s=Xt(!0);r&&zr(()=>{const v=py.at(-1)?.[0]===i.uid;setTimeout(()=>s.value=v)});const p=Ue(()=>!l.activeChildren.size);return{globalTop:Mp(s),localTop:p,stackStyles:Ue(()=>({zIndex:h.value}))}}function bJ(e){return{teleportTarget:fe(()=>{const n=e();if(n===!0||!Gi)return;const i=n===!1?document.body:typeof n=="string"?document.querySelector(n):n;if(i==null)return;let r=[...i.children].find(a=>a.matches(".v-overlay-container"));return r||(r=document.createElement("div"),r.className="v-overlay-container",i.appendChild(r)),r})}}function xJ(){return!0}function A4(e,t,n){if(!e||P4(e,n)===!1)return!1;const i=XN(t);if(typeof ShadowRoot<"u"&&i instanceof ShadowRoot&&i.host===e.target)return!1;const r=(typeof n.value=="object"&&n.value.include||(()=>[]))();return r.push(t),!r.some(a=>a?.contains(e.target))}function P4(e,t){return(typeof t.value=="object"&&t.value.closeConditional||xJ)(e)}function wJ(e,t,n){const i=typeof n.value=="function"?n.value:n.value.handler;e.shadowTarget=e.target,t._clickOutside.lastMousedownWasOutside&&A4(e,t,n)&&setTimeout(()=>{P4(e,n)&&i&&i(e)},0)}function UO(e,t){const n=XN(e);t(document),typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&t(n)}const ok={mounted(e,t){const n=r=>wJ(r,e,t),i=r=>{e._clickOutside.lastMousedownWasOutside=A4(r,e,t)};UO(e,r=>{r.addEventListener("click",n,!0),r.addEventListener("mousedown",i,!0)}),e._clickOutside||(e._clickOutside={lastMousedownWasOutside:!1}),e._clickOutside[t.instance.$.uid]={onClick:n,onMousedown:i}},beforeUnmount(e,t){e._clickOutside&&(UO(e,n=>{if(!n||!e._clickOutside?.[t.instance.$.uid])return;const{onClick:i,onMousedown:r}=e._clickOutside[t.instance.$.uid];n.removeEventListener("click",i,!0),n.removeEventListener("mousedown",r,!0)}),delete e._clickOutside[t.instance.$.uid])}};function TJ(e){const{modelValue:t,color:n,...i}=e;return ce(fh,{name:"fade-transition",appear:!0},{default:()=>[e.modelValue&&N("div",kt({class:["v-overlay__scrim",e.color.backgroundColorClasses.value],style:e.color.backgroundColorStyles.value},i),null)]})}const p0=st({absolute:Boolean,attach:[Boolean,String,Object],closeOnBack:{type:Boolean,default:!0},contained:Boolean,contentClass:null,contentProps:null,disabled:Boolean,opacity:[Number,String],noClickAnimation:Boolean,modelValue:Boolean,persistent:Boolean,scrim:{type:[Boolean,String],default:!0},zIndex:{type:[Number,String],default:2e3},...gJ(),...vn(),...Ls(),...kA(),...sJ(),...dJ(),...Ii(),...Ch()},"VOverlay"),sd=It()({name:"VOverlay",directives:{vClickOutside:ok},inheritAttrs:!1,props:{_disableGlobalStack:Boolean,...p0()},emits:{"click:outside":e=>!0,"update:modelValue":e=>!0,keydown:e=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(e,t){let{slots:n,attrs:i,emit:r}=t;const a=bs("VOverlay"),l=at(),h=at(),s=at(),p=In(e,"modelValue"),v=fe({get:()=>p.value,set:Qe=>{Qe&&e.disabled||(p.value=Qe)}}),{themeClasses:x}=Zi(e),{rtlClasses:T,isRtl:k}=Ws(),{hasContent:P,onAfterLeave:M}=IA(e,v),L=tr(()=>typeof e.scrim=="string"?e.scrim:null),{globalTop:B,localTop:F,stackStyles:X}=yJ(v,()=>e.zIndex,e._disableGlobalStack),{activatorEl:J,activatorRef:Q,target:re,targetEl:Z,targetRef:$,activatorEvents:H,contentEvents:W,scrimEvents:te}=_J(e,{isActive:v,isTop:F,contentEl:s}),{teleportTarget:Y}=bJ(()=>{const Qe=e.attach||e.contained;if(Qe)return Qe;const Ct=J?.value?.getRootNode()||a.proxy?.$el?.getRootNode();return Ct instanceof ShadowRoot?Ct:!1}),{dimensionStyles:ne}=Os(e),Se=I4(),{scopeId:Fe}=sg();Ht(()=>e.disabled,Qe=>{Qe&&(v.value=!1)});const{contentStyles:Ve,updateLocation:Ge}=oJ(e,{isRtl:k,contentEl:s,target:re,isActive:v});hJ(e,{root:l,contentEl:s,targetEl:Z,target:re,isActive:v,updateLocation:Ge});function je(Qe){r("click:outside",Qe),e.persistent?ct():v.value=!1}function Ae(Qe){return v.value&&B.value&&(!e.scrim||Qe.target===h.value||Qe instanceof MouseEvent&&Qe.shadowTarget===h.value)}Gi&&Ht(v,Qe=>{Qe?window.addEventListener("keydown",Ke):window.removeEventListener("keydown",Ke)},{immediate:!0}),Yr(()=>{Gi&&window.removeEventListener("keydown",Ke)});function Ke(Qe){Qe.key==="Escape"&&B.value&&(s.value?.contains(document.activeElement)||r("keydown",Qe),e.persistent?ct():(v.value=!1,s.value?.contains(document.activeElement)&&J.value?.focus()))}function ve(Qe){Qe.key==="Escape"&&!B.value||r("keydown",Qe)}const Le=_5();ra(()=>e.closeOnBack,()=>{MZ(Le,Qe=>{B.value&&v.value?(Qe(!1),e.persistent?ct():v.value=!1):Qe()})});const We=at();Ht(()=>v.value&&(e.absolute||e.contained)&&Y.value==null,Qe=>{if(Qe){const Ct=Z1(l.value);Ct&&Ct!==document.scrollingElement&&(We.value=Ct.scrollTop)}});function ct(){e.noClickAnimation||s.value&&Jd(s.value,[{transformOrigin:"center"},{transform:"scale(1.03)"},{transformOrigin:"center"}],{duration:150,easing:xb})}function ut(){r("afterEnter")}function rt(){M(),r("afterLeave")}return Vt(()=>N(sn,null,[n.activator?.({isActive:v.value,targetRef:$,props:kt({ref:Q},H.value,e.activatorProps)}),Se.value&&P.value&&ce(qH,{disabled:!Y.value,to:Y.value},{default:()=>[N("div",kt({class:["v-overlay",{"v-overlay--absolute":e.absolute||e.contained,"v-overlay--active":v.value,"v-overlay--contained":e.contained},x.value,T.value,e.class],style:[X.value,{"--v-overlay-opacity":e.opacity,top:dn(We.value)},e.style],ref:l,onKeydown:ve},Fe,i),[ce(TJ,kt({color:L,modelValue:v.value&&!!e.scrim,ref:h},te.value),null),ce(Oa,{appear:!0,persisted:!0,transition:e.transition,target:re.value,onAfterEnter:ut,onAfterLeave:rt},{default:()=>[vi(N("div",kt({ref:s,class:["v-overlay__content",e.contentClass],style:[ne.value,Ve.value]},W.value,e.contentProps),[n.default?.({isActive:v})]),[[hu,v.value],[ok,{handler:je,closeConditional:Ae,include:()=>[J.value]}]])]})])]})])),{activatorEl:J,scrimEl:h,target:re,animateClick:ct,contentEl:s,rootEl:l,globalTop:B,localTop:F,updateLocation:Ge}}}),M4=st({id:String,submenu:Boolean,disableInitialFocus:Boolean,...ur(p0({closeDelay:250,closeOnContentClick:!0,locationStrategy:"connected",location:void 0,openDelay:300,scrim:!1,scrollStrategy:"reposition",transition:{component:iT}}),["absolute"])},"VMenu"),W_=It()({name:"VMenu",props:M4(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const i=In(e,"modelValue"),{scopeId:r}=sg(),{isRtl:a}=Ws(),l=aa(),h=Ue(()=>e.id||`v-menu-${l}`),s=at(),p=xi(sk,null),v=Xt(new Set);Mr(sk,{register(){v.value.add(l)},unregister(){v.value.delete(l)},closeParents(X){setTimeout(()=>{!v.value.size&&!e.persistent&&(X==null||s.value?.contentEl&&!tK(X,s.value.contentEl))&&(i.value=!1,p?.closeParents())},40)}}),Yr(()=>{p?.unregister(),document.removeEventListener("focusin",P)}),xI(()=>i.value=!1);let x=!1,T=-1;async function k(){x=!0,T=window.setTimeout(()=>{x=!1},100)}async function P(X){const J=X.relatedTarget,Q=X.target;await Gn(),i.value&&J!==Q&&s.value?.rootEl&&s.value?.contentEl&&s.value?.localTop&&![document,s.value.rootEl].includes(Q)&&!s.value.rootEl.contains(Q)&&(x?!e.openOnHover&&!s.value.activatorEl?.contains(Q)&&(i.value=!1):(F_(s.value.contentEl)[0]?.focus(),document.removeEventListener("pointerdown",k)))}Ht(i,X=>{X?(p?.register(),Gi&&!e.disableInitialFocus&&(document.addEventListener("pointerdown",k),document.addEventListener("focusin",P,{once:!0}))):(p?.unregister(),Gi&&(clearTimeout(T),document.removeEventListener("pointerdown",k),document.removeEventListener("focusin",P)))},{immediate:!0});function M(X){p?.closeParents(X)}function L(X){if(!e.disabled)if(X.key==="Tab"||X.key==="Enter"&&!e.closeOnContentClick){if(X.key==="Enter"&&(X.target instanceof HTMLTextAreaElement||X.target instanceof HTMLInputElement&&X.target.closest("form")))return;X.key==="Enter"&&X.preventDefault(),VN(F_(s.value?.contentEl,!1),X.shiftKey?"prev":"next",Q=>Q.tabIndex>=0)||(i.value=!1,s.value?.activatorEl?.focus())}else e.submenu&&X.key===(a.value?"ArrowRight":"ArrowLeft")&&(i.value=!1,s.value?.activatorEl?.focus())}function B(X){if(e.disabled)return;const J=s.value?.contentEl;J&&i.value?X.key==="ArrowDown"?(X.preventDefault(),X.stopImmediatePropagation(),Ep(J,"next")):X.key==="ArrowUp"?(X.preventDefault(),X.stopImmediatePropagation(),Ep(J,"prev")):e.submenu&&(X.key===(a.value?"ArrowRight":"ArrowLeft")?i.value=!1:X.key===(a.value?"ArrowLeft":"ArrowRight")&&(X.preventDefault(),Ep(J,"first"))):(e.submenu?X.key===(a.value?"ArrowLeft":"ArrowRight"):["ArrowDown","ArrowUp"].includes(X.key))&&(i.value=!0,X.preventDefault(),setTimeout(()=>setTimeout(()=>B(X))))}const F=fe(()=>kt({"aria-haspopup":"menu","aria-expanded":String(i.value),"aria-controls":h.value,"aria-owns":h.value,onKeydown:B},e.activatorProps));return Vt(()=>{const X=sd.filterProps(e);return ce(sd,kt({ref:s,id:h.value,class:["v-menu",e.class],style:e.style},X,{modelValue:i.value,"onUpdate:modelValue":J=>i.value=J,absolute:!0,activatorProps:F.value,location:e.location??(e.submenu?"end":"bottom"),"onClick:outside":M,onKeydown:L},r),{activator:n.activator,default:function(){for(var J=arguments.length,Q=new Array(J),re=0;re<J;re++)Q[re]=arguments[re];return ce(ci,{root:"VMenu"},{default:()=>[n.default?.(...Q)]})}})}),yo({id:h,openChildren:v},s)}}),SJ=st({active:Boolean,disabled:Boolean,max:[Number,String],value:{type:[Number,String],default:0},...vn(),...Ch({transition:{component:fA}})},"VCounter"),oT=It()({name:"VCounter",functional:!0,props:SJ(),setup(e,t){let{slots:n}=t;const i=Ue(()=>e.max?`${e.value} / ${e.max}`:String(e.value));return Vt(()=>ce(Oa,{transition:e.transition},{default:()=>[vi(N("div",{class:Tt(["v-counter",{"text-error":e.max&&!e.disabled&&parseFloat(e.value)>parseFloat(e.max)},e.class]),style:Qt(e.style)},[n.default?n.default({counter:i.value,max:e.max,value:e.value}):i.value]),[[hu,e.active]])]})),{}}}),EJ=st({floating:Boolean,...vn()},"VFieldLabel"),Sy=It()({name:"VFieldLabel",props:EJ(),setup(e,t){let{slots:n}=t;return Vt(()=>ce(lv,{class:Tt(["v-field-label",{"v-field-label--floating":e.floating},e.class]),style:Qt(e.style)},n)),{}}}),CJ=["underlined","outlined","filled","solo","solo-inverted","solo-filled","plain"],g0=st({appendInnerIcon:Cn,bgColor:String,clearable:Boolean,clearIcon:{type:Cn,default:"$clear"},active:Boolean,centerAffix:{type:Boolean,default:void 0},color:String,baseColor:String,details:Boolean,dirty:Boolean,disabled:{type:Boolean,default:null},glow:Boolean,error:Boolean,flat:Boolean,iconColor:[Boolean,String],label:String,persistentClear:Boolean,prependInnerIcon:Cn,reverse:Boolean,singleLine:Boolean,variant:{type:String,default:"filled",validator:e=>CJ.includes(e)},"onClick:clear":Vo(),"onClick:appendInner":Vo(),"onClick:prependInner":Vo(),...vn(),...tT(),...Nr(),...Ii()},"VField"),Gf=It()({name:"VField",inheritAttrs:!1,props:{id:String,...m0(),...g0()},emits:{"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{attrs:n,emit:i,slots:r}=t;const{themeClasses:a}=Zi(e),{loaderClasses:l}=u0(e),{focusClasses:h,isFocused:s,focus:p,blur:v}=kh(e),{InputIcon:x}=t4(e),{roundedClasses:T}=Qr(e),{rtlClasses:k}=Ws(),P=Ue(()=>e.dirty||e.active),M=Ue(()=>!!(e.label||r.label)),L=Ue(()=>!e.singleLine&&M.value),B=aa(),F=fe(()=>e.id||`input-${B}`),X=Ue(()=>e.details?`${F.value}-messages`:void 0),J=at(),Q=at(),re=at(),Z=fe(()=>["plain","underlined"].includes(e.variant)),$=fe(()=>e.error||e.disabled?void 0:P.value&&s.value?e.color:e.baseColor),H=fe(()=>{if(!(!e.iconColor||e.glow&&!s.value))return e.iconColor===!0?$.value:e.iconColor}),{backgroundColorClasses:W,backgroundColorStyles:te}=tr(()=>e.bgColor),{textColorClasses:Y,textColorStyles:ne}=Fo($);Ht(P,Ve=>{if(L.value&&!nd()){const Ge=J.value.$el,je=Q.value.$el;requestAnimationFrame(()=>{const Ae=QI(Ge),Ke=je.getBoundingClientRect(),ve=Ke.x-Ae.x,Le=Ke.y-Ae.y-(Ae.height/2-Ke.height/2),We=Ke.width/.75,ct=Math.abs(We-Ae.width)>1?{maxWidth:dn(We)}:void 0,ut=getComputedStyle(Ge),rt=getComputedStyle(je),Qe=parseFloat(ut.transitionDuration)*1e3||150,Ct=parseFloat(rt.getPropertyValue("--v-field-label-scale")),At=rt.getPropertyValue("color");Ge.style.visibility="visible",je.style.visibility="hidden",Jd(Ge,{transform:`translate(${ve}px, ${Le}px) scale(${Ct})`,color:At,...ct},{duration:Qe,easing:xb,direction:Ve?"normal":"reverse"}).finished.then(()=>{Ge.style.removeProperty("visibility"),je.style.removeProperty("visibility")})})}},{flush:"post"});const Se=fe(()=>({isActive:P,isFocused:s,controlRef:re,blur:v,focus:p}));function Fe(Ve){Ve.target!==document.activeElement&&Ve.preventDefault()}return Vt(()=>{const Ve=e.variant==="outlined",Ge=!!(r["prepend-inner"]||e.prependInnerIcon),je=!!(e.clearable||r.clear)&&!e.disabled,Ae=!!(r["append-inner"]||e.appendInnerIcon||je),Ke=()=>r.label?r.label({...Se.value,label:e.label,props:{for:F.value}}):e.label;return N("div",kt({class:["v-field",{"v-field--active":P.value,"v-field--appended":Ae,"v-field--center-affix":e.centerAffix??!Z.value,"v-field--disabled":e.disabled,"v-field--dirty":e.dirty,"v-field--error":e.error,"v-field--glow":e.glow,"v-field--flat":e.flat,"v-field--has-background":!!e.bgColor,"v-field--persistent-clear":e.persistentClear,"v-field--prepended":Ge,"v-field--reverse":e.reverse,"v-field--single-line":e.singleLine,"v-field--no-label":!Ke(),[`v-field--variant-${e.variant}`]:!0},a.value,W.value,h.value,l.value,T.value,k.value,e.class],style:[te.value,e.style],onClick:Fe},n),[N("div",{class:"v-field__overlay"},null),ce(d0,{name:"v-field",active:!!e.loading,color:e.error?"error":typeof e.loading=="string"?e.loading:e.color},{default:r.loader}),Ge&&N("div",{key:"prepend",class:"v-field__prepend-inner"},[e.prependInnerIcon&&ce(x,{key:"prepend-icon",name:"prependInner",color:H.value},null),r["prepend-inner"]?.(Se.value)]),N("div",{class:"v-field__field","data-no-activator":""},[["filled","solo","solo-inverted","solo-filled"].includes(e.variant)&&L.value&&ce(Sy,{key:"floating-label",ref:Q,class:Tt([Y.value]),floating:!0,for:F.value,"aria-hidden":!P.value,style:Qt(ne.value)},{default:()=>[Ke()]}),M.value&&ce(Sy,{key:"label",ref:J,for:F.value},{default:()=>[Ke()]}),r.default?.({...Se.value,props:{id:F.value,class:"v-field__input","aria-describedby":X.value},focus:p,blur:v})??N("div",{id:F.value,class:"v-field__input","aria-describedby":X.value},null)]),je&&ce(mA,{key:"clear"},{default:()=>[vi(N("div",{class:"v-field__clearable",onMousedown:ve=>{ve.preventDefault(),ve.stopPropagation()}},[ce(ci,{defaults:{VIcon:{icon:e.clearIcon}}},{default:()=>[r.clear?r.clear({...Se.value,props:{onFocus:p,onBlur:v,onClick:e["onClick:clear"],tabindex:-1}}):ce(x,{name:"clear",onFocus:p,onBlur:v,tabindex:-1},null)]})]),[[hu,e.dirty]])]}),Ae&&N("div",{key:"append",class:"v-field__append-inner"},[r["append-inner"]?.(Se.value),e.appendInnerIcon&&ce(x,{key:"append-icon",name:"appendInner",color:H.value},null)]),N("div",{class:Tt(["v-field__outline",Y.value]),style:Qt(ne.value)},[Ve&&N(sn,null,[N("div",{class:"v-field__outline__start"},null),L.value&&N("div",{class:"v-field__outline__notch"},[ce(Sy,{ref:Q,floating:!0,for:F.value,"aria-hidden":!P.value},{default:()=>[Ke()]})]),N("div",{class:"v-field__outline__end"},null)]),Z.value&&L.value&&ce(Sy,{ref:Q,floating:!0,for:F.value,"aria-hidden":!P.value},{default:()=>[Ke()]})])])}),{controlRef:re,fieldIconColor:H}}}),D4=st({autocomplete:String},"autocomplete");function R4(e){const t=aa(),n=Xt(0),i=Ue(()=>e.autocomplete==="suppress"),r=Ue(()=>i.value?`${e.name}-${t}-${n.value}`:e.name),a=Ue(()=>i.value?"off":e.autocomplete);return{isSuppressing:i,fieldAutocomplete:a,fieldName:r,update:()=>n.value=new Date().getTime()}}function L4(e){function t(n,i){!e.autofocus||!n||i[0].target?.focus?.()}return{onIntersect:t}}const kJ=["color","file","time","date","datetime-local","week","month"],_0=st({autofocus:Boolean,counter:[Boolean,Number,String],counterValue:[Number,Function],prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,suffix:String,role:String,type:{type:String,default:"text"},modelModifiers:Object,...D4(),...Ih(),...g0()},"VTextField"),_h=It()({name:"VTextField",directives:{vIntersect:cu},inheritAttrs:!1,props:_0(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{attrs:n,emit:i,slots:r}=t;const a=In(e,"modelValue"),{isFocused:l,focus:h,blur:s}=kh(e),{onIntersect:p}=L4(e),v=fe(()=>typeof e.counterValue=="function"?e.counterValue(a.value):typeof e.counterValue=="number"?e.counterValue:(a.value??"").toString().length),x=fe(()=>{if(n.maxlength)return n.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter}),T=fe(()=>["plain","underlined"].includes(e.variant)),k=at(),P=at(),M=at(),L=R4(e),B=fe(()=>kJ.includes(e.type)||e.persistentPlaceholder||l.value||e.active);function F(){L.isSuppressing.value&&L.update(),l.value||h(),Gn(()=>{M.value!==document.activeElement&&M.value?.focus()})}function X(Z){i("mousedown:control",Z),Z.target!==M.value&&(F(),Z.preventDefault())}function J(Z){i("click:control",Z)}function Q(Z,$){Z.stopPropagation(),F(),Gn(()=>{$(),s0(e["onClick:clear"],Z)})}function re(Z){const $=Z.target;if(a.value=$.value,e.modelModifiers?.trim&&["text","search","password","tel","url"].includes(e.type)){const H=[$.selectionStart,$.selectionEnd];Gn(()=>{$.selectionStart=H[0],$.selectionEnd=H[1]})}}return Vt(()=>{const Z=!!(r.counter||e.counter!==!1&&e.counter!=null),$=!!(Z||r.details),[H,W]=rm(n),{modelValue:te,...Y}=sa.filterProps(e),ne=Gf.filterProps(e);return ce(sa,kt({ref:k,modelValue:a.value,"onUpdate:modelValue":Se=>a.value=Se,class:["v-text-field",{"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-input--plain-underlined":T.value},e.class],style:e.style},H,Y,{centerAffix:!T.value,focused:l.value}),{...r,default:Se=>{let{id:Fe,isDisabled:Ve,isDirty:Ge,isReadonly:je,isValid:Ae,hasDetails:Ke,reset:ve}=Se;return ce(Gf,kt({ref:P,onMousedown:X,onClick:J,"onClick:clear":Le=>Q(Le,ve),role:e.role},ur(ne,["onClick:clear"]),{id:Fe.value,active:B.value||Ge.value,dirty:Ge.value||e.dirty,disabled:Ve.value,focused:l.value,details:Ke.value,error:Ae.value===!1}),{...r,default:Le=>{let{props:{class:We,...ct},controlRef:ut}=Le;const rt=vi(N("input",kt({ref:Qe=>M.value=ut.value=Qe,value:a.value,onInput:re,autofocus:e.autofocus,readonly:je.value,disabled:Ve.value,name:L.fieldName.value,autocomplete:L.fieldAutocomplete.value,placeholder:e.placeholder,size:1,role:e.role,type:e.type,onFocus:h,onBlur:s},ct,W),null),[[cu,{handler:p},null,{once:!0}]]);return N(sn,null,[e.prefix&&N("span",{class:"v-text-field__prefix"},[N("span",{class:"v-text-field__prefix__text"},[e.prefix])]),r.default?N("div",{class:Tt(We),"data-no-activator":""},[r.default(),rt]):hh(rt,{class:We}),e.suffix&&N("span",{class:"v-text-field__suffix"},[N("span",{class:"v-text-field__suffix__text"},[e.suffix])])])}})},details:$?Se=>N(sn,null,[r.details?.(Se),Z&&N(sn,null,[N("span",null,null),ce(oT,{active:e.persistentCounter||l.value,value:v.value,max:x.value,disabled:e.disabled},r.counter)])]):void 0})}),yo({},k,P,M)}}),IJ=st({renderless:Boolean,...vn()},"VVirtualScrollItem"),O4=It()({name:"VVirtualScrollItem",inheritAttrs:!1,props:IJ(),emits:{"update:height":e=>!0},setup(e,t){let{attrs:n,emit:i,slots:r}=t;const{resizeRef:a,contentRect:l}=Lc(void 0,"border");Ht(()=>l.value?.height,h=>{h!=null&&i("update:height",h)}),Vt(()=>e.renderless?N(sn,null,[r.default?.({itemRef:a})]):N("div",kt({ref:a,class:["v-virtual-scroll__item",e.class],style:e.style},n),[r.default?.()]))}}),AJ=-1,PJ=1,zE=100,V4=st({itemHeight:{type:[Number,String],default:null},itemKey:{type:[String,Array,Function],default:null},height:[Number,String]},"virtual");function B4(e,t){const n=Dl(),i=Xt(0);zr(()=>{i.value=parseFloat(e.itemHeight||0)});const r=Xt(0),a=Xt(Math.ceil((parseInt(e.height)||n.height.value)/(i.value||16))||1),l=Xt(0),h=Xt(0),s=at(),p=at();let v=0;const{resizeRef:x,contentRect:T}=Lc();zr(()=>{x.value=s.value});const k=fe(()=>s.value===document.documentElement?n.height.value:T.value?.height||parseInt(e.height)||0),P=fe(()=>!!(s.value&&p.value&&k.value&&i.value));let M=Array.from({length:t.value.length}),L=Array.from({length:t.value.length});const B=Xt(0);let F=-1;function X(Ke){return M[Ke]||i.value}const J=DN(()=>{const Ke=performance.now();L[0]=0;const ve=t.value.length;for(let Le=1;Le<=ve;Le++)L[Le]=(L[Le-1]||0)+X(Le-1);B.value=Math.max(B.value,performance.now()-Ke)},B),Q=Ht(P,Ke=>{Ke&&(Q(),v=p.value.offsetTop,J.immediate(),Ve(),~F&&Gn(()=>{Gi&&window.requestAnimationFrame(()=>{je(F),F=-1})}))});io(()=>{J.clear()});function re(Ke,ve){const Le=M[Ke],We=i.value;i.value=We?Math.min(i.value,ve):ve,(Le!==ve||We!==i.value)&&(M[Ke]=ve,J())}function Z(Ke){Ke=Sr(Ke,0,t.value.length);const ve=Math.floor(Ke),Le=Ke%1,We=ve+1,ct=L[ve]||0,ut=L[We]||ct;return ct+(ut-ct)*Le}function $(Ke){return MJ(L,Ke)}let H=0,W=0,te=0;Ht(k,(Ke,ve)=>{ve&&(Ve(),Ke<ve&&requestAnimationFrame(()=>{W=0,Ve()}))});let Y=-1;function ne(){if(!s.value||!p.value)return;const Ke=s.value.scrollTop,ve=performance.now();ve-te>500?(W=Math.sign(Ke-H),v=p.value.offsetTop):W=Ke-H,H=Ke,te=ve,window.clearTimeout(Y),Y=window.setTimeout(Se,500),Ve()}function Se(){!s.value||!p.value||(W=0,te=0,window.clearTimeout(Y),Ve())}let Fe=-1;function Ve(){cancelAnimationFrame(Fe),Fe=requestAnimationFrame(Ge)}function Ge(){if(!s.value||!k.value||!i.value)return;const Ke=H-v,ve=Math.sign(W),Le=Math.max(0,Ke-zE),We=Sr($(Le),0,t.value.length),ct=Ke+k.value+zE,ut=Sr($(ct)+1,We+1,t.value.length);if((ve!==AJ||We<r.value)&&(ve!==PJ||ut>a.value)){const rt=Z(r.value)-Z(We),Qe=Z(ut)-Z(a.value);Math.max(rt,Qe)>zE?(r.value=We,a.value=ut):(We<=0&&(r.value=We),ut>=t.value.length&&(a.value=ut))}l.value=Z(r.value),h.value=Z(t.value.length)-Z(a.value)}function je(Ke){const ve=Z(Ke);!s.value||Ke&&!ve?F=Ke:s.value.scrollTop=ve}const Ae=fe(()=>t.value.slice(r.value,a.value).map((Ke,ve)=>{const Le=ve+r.value;return{raw:Ke,index:Le,key:Ps(Ke,e.itemKey,Le)}}));return Ht(t,()=>{M=Array.from({length:t.value.length}),L=Array.from({length:t.value.length}),J.immediate(),Ve()},{deep:1}),{calculateVisibleItems:Ve,containerRef:s,markerRef:p,computedItems:Ae,paddingTop:l,paddingBottom:h,scrollToIndex:je,handleScroll:ne,handleScrollend:Se,handleItemResize:re}}function MJ(e,t){let n=e.length-1,i=0,r=0,a=null,l=-1;if(e[n]<t)return n;for(;i<=n;)if(r=i+n>>1,a=e[r],a>t)n=r-1;else if(a<t)l=r,i=r+1;else return a===t?r:i;return l}const DJ=st({items:{type:Array,default:()=>[]},renderless:Boolean,...V4(),...vn(),...Ls()},"VVirtualScroll"),aT=It()({name:"VVirtualScroll",props:DJ(),setup(e,t){let{slots:n}=t;const i=bs("VVirtualScroll"),{dimensionStyles:r}=Os(e),{calculateVisibleItems:a,containerRef:l,markerRef:h,handleScroll:s,handleScrollend:p,handleItemResize:v,scrollToIndex:x,paddingTop:T,paddingBottom:k,computedItems:P}=B4(e,Ue(()=>e.items));return ra(()=>e.renderless,()=>{function M(){const B=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)?"addEventListener":"removeEventListener";l.value===document.documentElement?(document[B]("scroll",s,{passive:!0}),document[B]("scrollend",p)):(l.value?.[B]("scroll",s,{passive:!0}),l.value?.[B]("scrollend",p))}cs(()=>{l.value=Z1(i.vnode.el,!0),M(!0)}),io(M)}),Vt(()=>{const M=P.value.map(L=>ce(O4,{key:L.key,renderless:e.renderless,"onUpdate:height":B=>v(L.index,B)},{default:B=>n.default?.({item:L.raw,index:L.index,...B})}));return e.renderless?N(sn,null,[N("div",{ref:h,class:"v-virtual-scroll__spacer",style:{paddingTop:dn(T.value)}},null),M,N("div",{class:"v-virtual-scroll__spacer",style:{paddingBottom:dn(k.value)}},null)]):N("div",{ref:l,class:Tt(["v-virtual-scroll",e.class]),onScrollPassive:s,onScrollend:p,style:Qt([r.value,e.style])},[N("div",{ref:h,class:"v-virtual-scroll__container",style:{paddingTop:dn(T.value),paddingBottom:dn(k.value)}},[M])])}),{calculateVisibleItems:a,scrollToIndex:x}}});function AA(e,t){const n=Xt(!1);let i;function r(h){cancelAnimationFrame(i),n.value=!0,i=requestAnimationFrame(()=>{i=requestAnimationFrame(()=>{n.value=!1})})}async function a(){await new Promise(h=>requestAnimationFrame(h)),await new Promise(h=>requestAnimationFrame(h)),await new Promise(h=>requestAnimationFrame(h)),await new Promise(h=>{if(n.value){const s=Ht(n,()=>{s(),h()})}else h()})}async function l(h){if(h.key==="Tab"&&t.value?.focus(),!["PageDown","PageUp","Home","End"].includes(h.key))return;const s=e.value?.$el;if(!s)return;(h.key==="Home"||h.key==="End")&&s.scrollTo({top:h.key==="Home"?0:s.scrollHeight,behavior:"smooth"}),await a();const p=s.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(h.key==="PageDown"||h.key==="Home"){const v=s.getBoundingClientRect().top;for(const x of p)if(x.getBoundingClientRect().top>=v){x.focus();break}}else{const v=s.getBoundingClientRect().bottom;for(const x of[...p].reverse())if(x.getBoundingClientRect().bottom<=v){x.focus();break}}}return{onScrollPassive:r,onKeydown:l}}const RJ=st({closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"}},"autocomplete");function PA(e,t){const{t:n}=dr(),i=aa(),r=fe(()=>`menu-${i}`),a=Ue(()=>Ba(t)),l=Ue(()=>r.value),h=Ue(()=>n(Ba(t)?e.closeText:e.openText));return{menuId:r,ariaExpanded:a,ariaControls:l,ariaLabel:h}}const MA=st({chips:Boolean,closableChips:Boolean,eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,listProps:{type:Object},menu:Boolean,menuIcon:{type:Cn,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,itemColor:String,noAutoScroll:Boolean,...RJ(),...y4({itemChildren:!1})},"Select"),LJ=st({...MA(),...ur(_0({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...Ch({transition:{component:iT}})},"VSelect"),Rb=It()({name:"VSelect",props:LJ(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,t){let{slots:n}=t;const{t:i}=dr(),r=at(),a=at(),l=at(),{items:h,transformIn:s,transformOut:p}=wA(e),v=In(e,"modelValue",[],We=>s(We===null?[null]:Gr(We)),We=>{const ct=p(We);return e.multiple?ct:ct[0]??null}),x=fe(()=>typeof e.counterValue=="function"?e.counterValue(v.value):typeof e.counterValue=="number"?e.counterValue:v.value.length),T=cv(e),k=fe(()=>v.value.map(We=>We.value)),P=Xt(!1);let M="",L=-1,B;const F=fe(()=>e.hideSelected?h.value.filter(We=>!v.value.some(ct=>(e.valueComparator||po)(ct,We))):h.value),X=fe(()=>e.hideNoData&&!F.value.length||T.isReadonly.value||T.isDisabled.value),J=In(e,"menu"),Q=fe({get:()=>J.value,set:We=>{J.value&&!We&&a.value?.openChildren.size||We&&X.value||(J.value=We)}}),{menuId:re,ariaExpanded:Z,ariaControls:$,ariaLabel:H}=PA(e,Q),W=fe(()=>({...e.menuProps,activatorProps:{...e.menuProps?.activatorProps||{},"aria-haspopup":"listbox"}})),te=at(),Y=AA(te,r);function ne(We){e.openOnClear&&(Q.value=!0)}function Se(){X.value||(Q.value=!Q.value)}function Fe(We){N_(We)&&Ve(We)}function Ve(We){if(!We.key||T.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(We.key)&&We.preventDefault(),["Enter","ArrowDown"," "].includes(We.key)&&(Q.value=!0),["Escape","Tab"].includes(We.key)&&(Q.value=!1),We.key==="Home"?te.value?.focus("first"):We.key==="End"&&te.value?.focus("last");const ct=1e3;if(!N_(We))return;const ut=performance.now();ut-B>ct&&(M="",L=-1),M+=We.key.toLowerCase(),B=ut;const rt=F.value;function Qe(){let Ce=Ct();return Ce||M.at(-1)===M.at(-2)&&(M=M.slice(0,-1),Ce=Ct(),Ce)||(L=-1,Ce=Ct(),Ce)?Ce:(M=We.key.toLowerCase(),Ct())}function Ct(){for(let Ce=L+1;Ce<rt.length;Ce++){const ze=rt[Ce];if(ze.title.toLowerCase().startsWith(M))return[ze,Ce]}}const At=Qe();if(!At)return;const[yn,Mn]=At;L=Mn,te.value?.focus(Mn),e.multiple||(v.value=[yn])}function Ge(We){let ct=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!We.props.disabled)if(e.multiple){const ut=v.value.findIndex(Qe=>(e.valueComparator||po)(Qe.value,We.value)),rt=ct??!~ut;if(~ut){const Qe=rt?[...v.value,We]:[...v.value];Qe.splice(ut,1),v.value=Qe}else rt&&(v.value=[...v.value,We])}else{const ut=ct!==!1;v.value=ut?[We]:[],Gn(()=>{Q.value=!1})}}function je(We){te.value?.$el.contains(We.relatedTarget)||(Q.value=!1)}function Ae(){e.eager&&l.value?.calculateVisibleItems()}function Ke(){P.value&&r.value?.focus()}function ve(We){P.value=!0}function Le(We){if(We==null)v.value=[];else if(z_(r.value,":autofill")||z_(r.value,":-webkit-autofill")){const ct=h.value.find(ut=>ut.title===We);ct&&Ge(ct)}else r.value&&(r.value.value="")}return Ht(Q,()=>{if(!e.hideSelected&&Q.value&&v.value.length){const We=F.value.findIndex(ct=>v.value.some(ut=>(e.valueComparator||po)(ut.value,ct.value)));Gi&&!e.noAutoScroll&&window.requestAnimationFrame(()=>{We>=0&&l.value?.scrollToIndex(We)})}}),Ht(h,(We,ct)=>{Q.value||P.value&&e.hideNoData&&!ct.length&&We.length&&(Q.value=!0)}),Vt(()=>{const We=!!(e.chips||n.chip),ct=!!(!e.hideNoData||F.value.length||n["prepend-item"]||n["append-item"]||n["no-data"]),ut=v.value.length>0,rt=_h.filterProps(e),Qe=ut||!P.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return ce(_h,kt({ref:r},rt,{modelValue:v.value.map(Ct=>Ct.props.value).join(", "),"onUpdate:modelValue":Le,focused:P.value,"onUpdate:focused":Ct=>P.value=Ct,validationValue:v.externalValue,counterValue:x.value,dirty:ut,class:["v-select",{"v-select--active-menu":Q.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0,"v-select--selected":v.value.length,"v-select--selection-slot":!!n.selection},e.class],style:e.style,inputmode:"none",placeholder:Qe,"onClick:clear":ne,"onMousedown:control":Se,onBlur:je,onKeydown:Ve,"aria-expanded":Z.value,"aria-controls":$.value,"aria-label":H.value,title:H.value}),{...n,default:()=>N(sn,null,[ce(W_,kt({id:re.value,ref:a,modelValue:Q.value,"onUpdate:modelValue":Ct=>Q.value=Ct,activator:"parent",contentClass:"v-select__content",disabled:X.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:Ae,onAfterLeave:Ke},W.value),{default:()=>[ct&&ce(j_,kt({ref:te,selected:k.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:Ct=>Ct.preventDefault(),onKeydown:Fe,onFocusin:ve,tabindex:"-1",selectable:!0,"aria-live":"polite","aria-label":`${e.label}-list`,color:e.itemColor??e.color},Y,e.listProps),{default:()=>[n["prepend-item"]?.(),!F.value.length&&!e.hideNoData&&(n["no-data"]?.()??ce(uu,{key:"no-data",title:i(e.noDataText)},null)),ce(aT,{ref:l,renderless:!0,items:F.value,itemKey:"value"},{default:Ct=>{let{item:At,index:yn,itemRef:Mn}=Ct;const Ce=iK(At.props),ze=kt(At.props,{ref:Mn,key:At.value,onClick:()=>Ge(At,null)});return At.type==="divider"?n.divider?.({props:At.raw,index:yn})??ce(tc,kt(At.props,{key:`divider-${yn}`}),null):At.type==="subheader"?n.subheader?.({props:At.raw,index:yn})??ce(uv,kt(At.props,{key:`subheader-${yn}`}),null):n.item?.({item:At,index:yn,props:ze})??ce(uu,kt(ze,{role:"option"}),{prepend:Ee=>{let{isSelected:pt}=Ee;return N(sn,null,[e.multiple&&!e.hideSelected?ce(rd,{key:At.value,modelValue:pt,ripple:!1,tabindex:"-1",onClick:dt=>dt.preventDefault()},null):void 0,Ce.prependAvatar&&ce(oc,{image:Ce.prependAvatar},null),Ce.prependIcon&&ce(Hi,{icon:Ce.prependIcon},null)])}})}}),n["append-item"]?.()]})]}),v.value.map((Ct,At)=>{function yn(Ee){Ee.stopPropagation(),Ee.preventDefault(),Ge(Ct,!1)}const Mn={"onClick:close":yn,onKeydown(Ee){Ee.key!=="Enter"&&Ee.key!==" "||(Ee.preventDefault(),Ee.stopPropagation(),yn(Ee))},onMousedown(Ee){Ee.preventDefault(),Ee.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},Ce=We?!!n.chip:!!n.selection,ze=Ce?X1(We?n.chip({item:Ct,index:At,props:Mn}):n.selection({item:Ct,index:At})):void 0;if(!(Ce&&!ze))return N("div",{key:Ct.value,class:"v-select__selection"},[We?n.chip?ce(ci,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:Ct.title}}},{default:()=>[ze]}):ce(Hu,kt({key:"chip",closable:e.closableChips,size:"small",text:Ct.title,disabled:Ct.props.disabled},Mn),null):ze??N("span",{class:"v-select__selection-text"},[Ct.title,e.multiple&&At<v.value.length-1&&N("span",{class:"v-select__selection-comma"},[Jn(",")])])])})]),"append-inner":function(){for(var Ct=arguments.length,At=new Array(Ct),yn=0;yn<Ct;yn++)At[yn]=arguments[yn];return N(sn,null,[n["append-inner"]?.(...At),e.menuIcon?ce(Hi,{class:"v-select__menu-icon",color:r.value?.fieldIconColor,icon:e.menuIcon},null):void 0])}})}),yo({isFocused:P,menu:Q,select:Ge},r)}}),DA=st({color:String,...sl(),...vn(),...Ls(),...Hs(),...Eh(),...ov(),...Nr(),...ti(),...Ii()},"VSheet"),Vp=It()({name:"VSheet",props:DA(),setup(e,t){let{slots:n}=t;const{themeClasses:i}=Zi(e),{backgroundColorClasses:r,backgroundColorStyles:a}=tr(()=>e.color),{borderClasses:l}=Rl(e),{dimensionStyles:h}=Os(e),{elevationClasses:s}=vo(e),{locationStyles:p}=ig(e),{positionClasses:v}=av(e),{roundedClasses:x}=Qr(e);return Vt(()=>ce(e.tag,{class:Tt(["v-sheet",i.value,r.value,l.value,s.value,v.value,x.value,e.class]),style:Qt([a.value,h.value,p.value,e.style])},n)),{}}});function OJ(e){const t=Xt(e());let n=-1;function i(){clearInterval(n)}function r(){i(),Gn(()=>t.value=e())}function a(l){const h=l?getComputedStyle(l):{transitionDuration:.2},s=parseFloat(h.transitionDuration)*1e3||200;if(i(),t.value<=0)return;const p=performance.now();n=window.setInterval(()=>{const v=performance.now()-p+s;t.value=Math.max(e()-v,0),t.value<=0&&i()},s)}return io(i),{clear:i,time:t,start:a,reset:r}}const F4=st({multiLine:Boolean,text:String,timer:[Boolean,String],timeout:{type:[Number,String],default:5e3},vertical:Boolean,...Eh({location:"bottom"}),...ov(),...Nr(),...Oc(),...Ii(),...ur(p0({transition:"v-snackbar-transition"}),["persistent","noClickAnimation","scrim","scrollStrategy","stickToTarget"])},"VSnackbar"),t1=It()({name:"VSnackbar",props:F4(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const i=In(e,"modelValue"),{positionClasses:r}=av(e),{scopeId:a}=sg(),{themeClasses:l}=Zi(e),{colorClasses:h,colorStyles:s,variantClasses:p}=eg(e),{roundedClasses:v}=Qr(e),x=OJ(()=>Number(e.timeout)),T=at(),k=at(),P=Xt(!1),M=Xt(0),L=at(),B=xi(Eb,void 0);ra(()=>!!B,()=>{const te=c5();zr(()=>{L.value=te.mainStyles.value})}),Ht(i,X),Ht(()=>e.timeout,X),cs(()=>{i.value&&X()});let F=-1;function X(){x.reset(),window.clearTimeout(F);const te=Number(e.timeout);if(!i.value||te===-1)return;const Y=ZI(k.value);x.start(Y),F=window.setTimeout(()=>{i.value=!1},te)}function J(){x.reset(),window.clearTimeout(F)}function Q(){P.value=!0,J()}function re(){P.value=!1,X()}function Z(te){M.value=te.touches[0].clientY}function $(te){Math.abs(M.value-te.changedTouches[0].clientY)>50&&(i.value=!1)}function H(){P.value&&re()}const W=fe(()=>e.location.split(" ").reduce((te,Y)=>(te[`v-snackbar--${Y}`]=!0,te),{}));return Vt(()=>{const te=sd.filterProps(e),Y=!!(n.default||n.text||e.text);return ce(sd,kt({ref:T,class:["v-snackbar",{"v-snackbar--active":i.value,"v-snackbar--multi-line":e.multiLine&&!e.vertical,"v-snackbar--timer":!!e.timer,"v-snackbar--vertical":e.vertical},W.value,r.value,e.class],style:[L.value,e.style]},te,{modelValue:i.value,"onUpdate:modelValue":ne=>i.value=ne,contentProps:kt({class:["v-snackbar__wrapper",l.value,h.value,v.value,p.value],style:[s.value],onPointerenter:Q,onPointerleave:re},te.contentProps),persistent:!0,noClickAnimation:!0,scrim:!1,scrollStrategy:"none",_disableGlobalStack:!0,onTouchstartPassive:Z,onTouchend:$,onAfterLeave:H},a),{default:()=>[sm(!1,"v-snackbar"),e.timer&&!P.value&&N("div",{key:"timer",class:"v-snackbar__timer"},[ce(eT,{ref:k,color:typeof e.timer=="string"?e.timer:"info",max:e.timeout,modelValue:x.time.value},null)]),Y&&N("div",{key:"content",class:"v-snackbar__content",role:"status","aria-live":"polite"},[n.text?.()??e.text,n.default?.()]),n.actions&&ce(ci,{defaults:{VBtn:{variant:"text",ripple:!1,slim:!0}}},{default:()=>[N("div",{class:"v-snackbar__actions"},[n.actions({isActive:i})])]})],activator:n.activator})}),yo({},T)}}),VJ={class:"rp-header"},BJ={class:"rp-actions"},FJ={class:"rp-map-wrap"},zJ={class:"rp-ctrl-left"},NJ={key:0},UJ={key:1},$J={class:"rp-ctrl-right"},jJ={key:1,class:"rp-fare"},WJ={key:2,class:"rp-segments"},HJ={class:"segment-line"},GJ={class:"segment-line-name"},qJ={class:"segment-stops"},KJ={class:"segment-route"},XJ={class:"segment-station"},ZJ={class:"segment-station"},YJ=Bz({__name:"RoutePlanner",setup(e){const t=at("Jurong East"),n=at("Marina Bay"),i=at(!1),r=at(null),a=at(null),l=at([]),h=at(null),s=at(null),p=Q1(),{smAndDown:v}=Dl(),x=fe(()=>p.global.current.value.dark),T=at(!1),k=at(null);let P=null,M=null;const L=new Map,B=at([]),F=[];let X=null;const J=at(!1);let Q=null;const{isPlaying:re,progressIndex:Z,segmentProgress:$,routeStationIds:H,totalStops:W,startAnimation:te,pauseAnimation:Y,resetAnimation:ne,attachRenderer:Se,detachRenderer:Fe}=nZ(),{allStations:Ve,shortestPath:Ge,estimateTimeMinutes:je,estimateDistanceKm:Ae,summariseSegments:Ke}=cA(),{fareByType:ve}=f5();l.value=Ve.map(cn=>({id:cn,name:cn})),!t.value&&l.value.length&&(t.value=l.value[0].id),!n.value&&l.value.length>1&&(n.value=l.value[1].id);const Le="/",We=`${Le}railrouter/index.61d3354a.css`,ct=`${Le}railrouter/index.975ef6c8.js`,ut=`${Le}sg-rail.geojson`;async function rt(){if(!L.size)try{const cn=await fetch(ut);if(!cn.ok)throw new Error("Failed to load station coordinates.");((await cn.json()).features??[]).filter(On=>On.properties.stop_type==="station").forEach(On=>{L.set(On.properties.name,{coords:On.geometry.coordinates,codes:On.properties.station_codes,id:On.id})})}catch(cn){throw console.error(cn),new Error("Could not load station metadata. Please refresh and try again.")}}function Qe(cn){return new Promise((jt,Tn)=>{if(document.querySelector(`link[data-railrouter="true"][href="${cn}"]`)){jt();return}const On=document.createElement("link");On.rel="stylesheet",On.href=cn,On.dataset.railrouter="true",On.onload=()=>jt(),On.onerror=()=>Tn(new Error(`Failed to load RailRouter stylesheet: ${cn}`)),document.head.appendChild(On)})}function Ct(cn){return new Promise((jt,Tn)=>{if(document.querySelector(`script[data-railrouter="true"][src="${cn}"]`)){jt();return}const On=document.createElement("script");On.src=cn,On.async=!0,On.dataset.railrouter="true",On.onload=()=>jt(),On.onerror=()=>Tn(new Error(`Failed to load RailRouter script: ${cn}`)),document.body.appendChild(On)})}async function At(){T.value||(await Promise.all([Qe(We),Ct(ct)]),T.value=!0)}function yn(cn=1e4){return new Promise(jt=>{const Tn=performance.now(),On=()=>{if(window.$map){jt(window.$map);return}if(performance.now()-Tn>cn){jt(null);return}requestAnimationFrame(On)};On()})}function Mn(){if(!P)return;const cn=P,jt="singatrain-route",Tn="singatrain-route-glow",On="singatrain-route-line",ki=()=>{cn.getSource(jt)||cn.addSource(jt,{type:"geojson",data:{type:"Feature",geometry:{type:"LineString",coordinates:[]}}}),cn.getLayer(Tn)||cn.addLayer({id:Tn,type:"line",source:jt,paint:{"line-color":"#f97316","line-width":12,"line-opacity":.25}}),cn.getLayer(On)||cn.addLayer({id:On,type:"line",source:jt,paint:{"line-color":"#f97316","line-width":5}})};cn.isStyleLoaded()?ki():cn.once("styledata",ki)}function Ce(){if(!P)return;const cn=P.getSource("singatrain-route");if(!cn)return;const jt=B.value.filter(Tn=>Array.isArray(Tn));cn.setData({type:"Feature",geometry:{type:"LineString",coordinates:jt}})}function ze(){F.forEach(cn=>cn?.marker.remove()),F.length=0,X?.remove(),X=null}function Ee(){if(!P)return;ze(),B.value.forEach((jt,Tn)=>{if(!jt){F.push(null);return}const On=document.createElement("div");On.className="route-stop route-stop-upcoming",On.dataset.index=String(Tn);const ki=new fp.Marker({element:On,anchor:"center"}).setLngLat(jt).addTo(P);F.push({marker:ki,el:On})});const cn=document.createElement("div");cn.className="route-train-marker",cn.innerHTML='<span class="material-icons">train</span>',X=new fp.Marker({element:cn,anchor:"center"}),B.value[0]&&X.setLngLat(B.value[0]).addTo(P)}function pt(cn){F.forEach((jt,Tn)=>{jt&&(jt.el.classList.toggle("route-stop-active",Tn===cn),jt.el.classList.toggle("route-stop-visited",Tn<cn),jt.el.classList.toggle("route-stop-upcoming",Tn>cn))})}function dt(){if(!P||!X)return;const cn=Z.value,jt=B.value[cn],Tn=B.value[cn+1]??jt;if(!jt)return;if(!Tn){X.setLngLat(jt);return}const On=$.value,ki=jt[0]+(Tn[0]-jt[0])*On,Yi=jt[1]+(Tn[1]-jt[1])*On;X.setLngLat([ki,Yi])}function nt(cn){if(!P)return;const jt=B.value[cn];if(!jt)return;const Tn=v.value?12.3:13.2;P.easeTo({center:jt,zoom:Math.max(P.getZoom(),Tn),duration:850})}function Et(cn){if(!P)return;const jt=P.getCanvas();jt.style.filter=cn?"invert(0.92) hue-rotate(180deg)":""}async function Dt(){await At(),await rt(),await Gn();const cn=await yn();if(!cn){r.value="Unable to initialise RailRouter map.";return}P=cn,Mn(),Et(x.value),M=new ResizeObserver(()=>P?.resize()),k.value&&M.observe(k.value),cn.resize()}function Ft(){Fe(),ze(),M&&k.value&&M.unobserve(k.value),M?.disconnect(),M=null,P&&(P.getLayer("singatrain-route-line")&&P.removeLayer("singatrain-route-line"),P.getLayer("singatrain-route-glow")&&P.removeLayer("singatrain-route-glow"),P.getSource("singatrain-route")&&P.removeSource("singatrain-route"),P.remove()),P=null}async function Gt(cn,jt){const Tn=Ge(cn,jt);if(!Tn||!Tn.steps?.length)throw new Error("No valid route found.");const On=je(Tn.totalWeight),ki=Ae(Tn.totalWeight),Yi=Ke(Tn);return h.value={estimatedTime:On,distanceKm:ki,segments:Yi},Tn.steps.map(Ur=>Ur.station)}async function En(cn,jt){if(!h.value)return;const Tn=ve(h.value.distanceKm,"adult");s.value={amount:Tn,currency:"SGD"}}async function en(){r.value=null,s.value=null,h.value=null,i.value=!0;try{if(!t.value||!n.value)throw new Error("Please select a start and end station.");if(t.value===n.value)throw new Error("Pick two different stations to plan a journey.");if(Fe(),ne(),P||await Dt(),!P)throw new Error("RailRouter map is still initialising. Please try again shortly.");const cn=await Gt(t.value,n.value);if(!cn||cn.length<2)throw new Error("No valid route found.");H.value=cn,W.value=cn.length,B.value=cn.map(jt=>{const Tn=L.get(jt);return Tn?Tn.coords:(console.warn("Missing coordinates for station:",jt),null)}),Mn(),Ce(),Ee(),pt(0),dt(),nt(0),await En(t.value,n.value),Se(jt=>{pt(jt),nt(jt)}),te(),a.value=Date.now()}catch(cn){r.value=cn?.message??"Failed to plan route."}finally{i.value=!1}}function An(){Y()}function Ln(){ne(),H.value.length>1&&(pt(0),nt(0),te())}function Wn(){J.value=!0,Q&&window.clearTimeout(Q),Q=window.setTimeout(()=>{J.value=!1,Q=null},3200)}return Ht(x,cn=>Et(cn)),Ht([Z,$],dt),Ht(H,()=>{J.value=!1}),cs(async()=>{window.addEventListener("route-animation-arrived",Wn),await Dt()}),Yr(()=>{window.removeEventListener("route-animation-arrived",Wn),Q&&window.clearTimeout(Q),Ft()}),(cn,jt)=>(_n(),d_(N5,{class:"pa-0"},{default:Ro(()=>[ce(L5,{class:"rp-card",rounded:"xl",elevation:"1"},{default:Ro(()=>[N("div",VJ,[jt[6]||(jt[6]=N("div",{class:"rp-title"},[N("h1",null,"Plan your MRT route"),N("p",{class:"subtitle"}," Smart MRT navigation for Singapore ")],-1)),N("div",BJ,[ce(mi,{variant:"outlined",class:"action-btn","prepend-icon":"mdi-crosshairs-gps",onClick:()=>{}},{default:Ro(()=>[...jt[5]||(jt[5]=[Jn(" Locate me ",-1)])]),_:1})])]),N("div",{class:Tt(["rp-form",{stacked:Si(v)}])},[ce(Rb,{class:"rp-input",items:l.value,"item-title":"name","item-value":"id",modelValue:t.value,"onUpdate:modelValue":jt[0]||(jt[0]=Tn=>t.value=Tn),label:"Start station",variant:"outlined",density:"comfortable","hide-details":"","menu-props":{maxHeight:320},"prepend-inner-icon":"mdi-map-marker"},null,8,["items","modelValue"]),ce(Rb,{class:"rp-input",items:l.value,"item-title":"name","item-value":"id",modelValue:n.value,"onUpdate:modelValue":jt[1]||(jt[1]=Tn=>n.value=Tn),label:"End station",variant:"outlined",density:"comfortable","hide-details":"","menu-props":{maxHeight:320},"prepend-inner-icon":"mdi-flag-checkered"},null,8,["items","modelValue"]),ce(mi,{class:"rp-plan",color:"orange",variant:"flat",height:"48","prepend-icon":"mdi-transit-connection-variant",loading:i.value,onClick:en},{default:Ro(()=>[...jt[7]||(jt[7]=[Jn(" Plan Route ",-1)])]),_:1},8,["loading"])],2),r.value?(_n(),d_(E5,{key:0,type:"error",variant:"tonal",class:"mt-2",density:"comfortable"},{default:Ro(()=>[Jn(an(r.value),1)]),_:1})):Tr("",!0),N("div",FJ,[N("div",{ref_key:"railRouterShell",ref:k,class:"railrouter-shell"},[...jt[8]||(jt[8]=[N("div",{id:"station",class:"sheet"},null,-1),N("button",{type:"button",class:"sheet-close"},null,-1),N("div",{id:"map",class:"railrouter-map"},null,-1),N("div",{id:"home",class:"sheet modal"},[N("button",{type:"button",class:"btn",id:"btn-close-home"},"Let's explore!")],-1),N("details",{id:"legend"},[N("summary",null,"Legend"),N("div",{id:"crowded-timing"})],-1),N("div",{id:"logo",tabindex:"-1"},null,-1),N("div",{id:"search",hidden:""},[N("div",{id:"search-field-container"},[N("input",{id:"search-field",type:"search",autocomplete:"off",spellcheck:"false"}),N("button",{type:"button",id:"search-cancel"},"Cancel")]),N("ul",{id:"search-results"})],-1)])],512),ce(Vp,{class:"rp-controls",rounded:"lg",elevation:"1"},{default:Ro(()=>[N("div",zJ,[ce(Hu,{size:"small",class:"mr-2",color:"success",variant:"flat","prepend-icon":"mdi-clock-outline"},{default:Ro(()=>[a.value?(_n(),wn("span",NJ,"Updated "+an(new Date(a.value).toLocaleTimeString()),1)):(_n(),wn("span",UJ,"Ready"))]),_:1}),ce(Hu,{size:"small",variant:"tonal","prepend-icon":"mdi-counter"},{default:Ro(()=>[Jn(an(Si(Z)+1)+" / "+an(Math.max(Si(W),0))+" stops ",1)]),_:1}),h.value?(_n(),d_(Hu,{key:0,size:"small",color:"primary",variant:"outlined","prepend-icon":"mdi-timer-sand"},{default:Ro(()=>[Jn(an(h.value.estimatedTime)+" min  "+an(h.value.distanceKm.toFixed(1))+" km ",1)]),_:1})):Tr("",!0)]),N("div",$J,[ce(mi,{class:"ctrl-btn",variant:"outlined",height:"40","prepend-icon":"mdi-restart",onClick:Ln},{default:Ro(()=>[...jt[9]||(jt[9]=[Jn(" Restart ",-1)])]),_:1}),ce(mi,{class:"ctrl-btn",color:Si(re)?"grey":"orange",variant:"flat",height:"40","prepend-icon":Si(re)?"mdi-pause":"mdi-play",onClick:jt[2]||(jt[2]=Tn=>Si(re)?An():Si(te)())},{default:Ro(()=>[Jn(an(Si(re)?"Pause":"Play"),1)]),_:1},8,["color","prepend-icon"])])]),_:1})]),s.value?(_n(),wn("div",jJ,[ce(Hu,{size:"large",color:"orange",variant:"flat","prepend-icon":"mdi-cash"},{default:Ro(()=>[Jn(" Estimated Fare: "+an(s.value.amount.toFixed(2))+" "+an(s.value.currency),1)]),_:1})])):Tr("",!0),h.value?.segments?.length?(_n(),wn("div",WJ,[(_n(!0),wn(sn,null,As(h.value.segments,Tn=>(_n(),d_(Vp,{key:Tn.line+Tn.from,class:"segment-sheet",rounded:"lg",elevation:"0"},{default:Ro(()=>[N("div",HJ,[N("span",GJ,an(Tn.line),1),N("small",qJ,an(Tn.stops)+" stops",1)]),N("div",KJ,[N("span",XJ,an(Tn.from),1),jt[10]||(jt[10]=N("span",{class:"material-icons segment-arrow"},"arrow_forward",-1)),N("span",ZJ,an(Tn.to),1)])]),_:2},1024))),128))])):Tr("",!0)]),_:1}),ce(t1,{modelValue:J.value,"onUpdate:modelValue":jt[4]||(jt[4]=Tn=>J.value=Tn),timeout:"0",location:"bottom"},{actions:Ro(()=>[ce(mi,{color:"orange",variant:"text",onClick:jt[3]||(jt[3]=Tn=>J.value=!1)},{default:Ro(()=>[...jt[11]||(jt[11]=[Jn("Close",-1)])]),_:1})]),default:Ro(()=>[jt[12]||(jt[12]=Jn(" Youve arrived at your destination  ",-1))]),_:1},8,["modelValue"])]),_:1}))}}),JJ=(e,t)=>{const n=e.__vccOpts||e;for(const[i,r]of t)n[i]=r;return n},QJ=JJ(YJ,[["__scopeId","data-v-64078fa7"]]);function $O(e){return typeof e=="function"?e():Si(e)}typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const jO=()=>{};function eQ(e,t){function n(...i){return new Promise((r,a)=>{Promise.resolve(e(()=>t.apply(this,i),{fn:t,thisArg:this,args:i})).then(r).catch(a)})}return n}const tQ=e=>e();function nQ(e,t={}){let n,i,r=jO;const a=h=>{clearTimeout(h),r(),r=jO};return h=>{const s=$O(e),p=$O(t.maxWait);return n&&a(n),s<=0||p!==void 0&&p<=0?(i&&(a(i),i=null),Promise.resolve(h())):new Promise((v,x)=>{r=t.rejectOnCancel?x:v,p&&!i&&(i=setTimeout(()=>{n&&a(n),i=null,v(h())},p)),n=setTimeout(()=>{i&&a(i),i=null,v(h())},s)})}}function iQ(e,t,n={}){const{eventFilter:i=tQ,...r}=n;return Ht(e,eQ(i,t),r)}function rQ(e,t,n={}){const{debounce:i=0,maxWait:r=void 0,...a}=n;return iQ(e,t,{...a,eventFilter:nQ(i,{maxWait:r})})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function v0(e){return e+.5|0}const Cf=(e,t,n)=>Math.max(Math.min(e,n),t);function Ey(e){return Cf(v0(e*2.55),0,255)}function Lf(e){return Cf(v0(e*255),0,255)}function Qd(e){return Cf(v0(e/2.55)/100,0,1)}function WO(e){return Cf(v0(e*100),0,100)}const Ec={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},ak=[..."0123456789ABCDEF"],sQ=e=>ak[e&15],oQ=e=>ak[(e&240)>>4]+ak[e&15],Mx=e=>(e&240)>>4===(e&15),aQ=e=>Mx(e.r)&&Mx(e.g)&&Mx(e.b)&&Mx(e.a);function lQ(e){var t=e.length,n;return e[0]==="#"&&(t===4||t===5?n={r:255&Ec[e[1]]*17,g:255&Ec[e[2]]*17,b:255&Ec[e[3]]*17,a:t===5?Ec[e[4]]*17:255}:(t===7||t===9)&&(n={r:Ec[e[1]]<<4|Ec[e[2]],g:Ec[e[3]]<<4|Ec[e[4]],b:Ec[e[5]]<<4|Ec[e[6]],a:t===9?Ec[e[7]]<<4|Ec[e[8]]:255})),n}const cQ=(e,t)=>e<255?t(e):"";function uQ(e){var t=aQ(e)?sQ:oQ;return e?"#"+t(e.r)+t(e.g)+t(e.b)+cQ(e.a,t):void 0}const dQ=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function z4(e,t,n){const i=t*Math.min(n,1-n),r=(a,l=(a+e/30)%12)=>n-i*Math.max(Math.min(l-3,9-l,1),-1);return[r(0),r(8),r(4)]}function hQ(e,t,n){const i=(r,a=(r+e/60)%6)=>n-n*t*Math.max(Math.min(a,4-a,1),0);return[i(5),i(3),i(1)]}function fQ(e,t,n){const i=z4(e,1,.5);let r;for(t+n>1&&(r=1/(t+n),t*=r,n*=r),r=0;r<3;r++)i[r]*=1-t-n,i[r]+=t;return i}function mQ(e,t,n,i,r){return e===r?(t-n)/i+(t<n?6:0):t===r?(n-e)/i+2:(e-t)/i+4}function RA(e){const n=e.r/255,i=e.g/255,r=e.b/255,a=Math.max(n,i,r),l=Math.min(n,i,r),h=(a+l)/2;let s,p,v;return a!==l&&(v=a-l,p=h>.5?v/(2-a-l):v/(a+l),s=mQ(n,i,r,v,a),s=s*60+.5),[s|0,p||0,h]}function LA(e,t,n,i){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,i)).map(Lf)}function OA(e,t,n){return LA(z4,e,t,n)}function pQ(e,t,n){return LA(fQ,e,t,n)}function gQ(e,t,n){return LA(hQ,e,t,n)}function N4(e){return(e%360+360)%360}function _Q(e){const t=dQ.exec(e);let n=255,i;if(!t)return;t[5]!==i&&(n=t[6]?Ey(+t[5]):Lf(+t[5]));const r=N4(+t[2]),a=+t[3]/100,l=+t[4]/100;return t[1]==="hwb"?i=pQ(r,a,l):t[1]==="hsv"?i=gQ(r,a,l):i=OA(r,a,l),{r:i[0],g:i[1],b:i[2],a:n}}function vQ(e,t){var n=RA(e);n[0]=N4(n[0]+t),n=OA(n),e.r=n[0],e.g=n[1],e.b=n[2]}function yQ(e){if(!e)return;const t=RA(e),n=t[0],i=WO(t[1]),r=WO(t[2]);return e.a<255?`hsla(${n}, ${i}%, ${r}%, ${Qd(e.a)})`:`hsl(${n}, ${i}%, ${r}%)`}const HO={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},GO={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function bQ(){const e={},t=Object.keys(GO),n=Object.keys(HO);let i,r,a,l,h;for(i=0;i<t.length;i++){for(l=h=t[i],r=0;r<n.length;r++)a=n[r],h=h.replace(a,HO[a]);a=parseInt(GO[l],16),e[h]=[a>>16&255,a>>8&255,a&255]}return e}let Dx;function xQ(e){Dx||(Dx=bQ(),Dx.transparent=[0,0,0,0]);const t=Dx[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const wQ=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function TQ(e){const t=wQ.exec(e);let n=255,i,r,a;if(t){if(t[7]!==i){const l=+t[7];n=t[8]?Ey(l):Cf(l*255,0,255)}return i=+t[1],r=+t[3],a=+t[5],i=255&(t[2]?Ey(i):Cf(i,0,255)),r=255&(t[4]?Ey(r):Cf(r,0,255)),a=255&(t[6]?Ey(a):Cf(a,0,255)),{r:i,g:r,b:a,a:n}}}function SQ(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${Qd(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const NE=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,i_=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function EQ(e,t,n){const i=i_(Qd(e.r)),r=i_(Qd(e.g)),a=i_(Qd(e.b));return{r:Lf(NE(i+n*(i_(Qd(t.r))-i))),g:Lf(NE(r+n*(i_(Qd(t.g))-r))),b:Lf(NE(a+n*(i_(Qd(t.b))-a))),a:e.a+n*(t.a-e.a)}}function Rx(e,t,n){if(e){let i=RA(e);i[t]=Math.max(0,Math.min(i[t]+i[t]*n,t===0?360:1)),i=OA(i),e.r=i[0],e.g=i[1],e.b=i[2]}}function U4(e,t){return e&&Object.assign(t||{},e)}function qO(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=Lf(e[3]))):(t=U4(e,{r:0,g:0,b:0,a:1}),t.a=Lf(t.a)),t}function CQ(e){return e.charAt(0)==="r"?TQ(e):_Q(e)}class Lb{constructor(t){if(t instanceof Lb)return t;const n=typeof t;let i;n==="object"?i=qO(t):n==="string"&&(i=lQ(t)||xQ(t)||CQ(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=U4(this._rgb);return t&&(t.a=Qd(t.a)),t}set rgb(t){this._rgb=qO(t)}rgbString(){return this._valid?SQ(this._rgb):void 0}hexString(){return this._valid?uQ(this._rgb):void 0}hslString(){return this._valid?yQ(this._rgb):void 0}mix(t,n){if(t){const i=this.rgb,r=t.rgb;let a;const l=n===a?.5:n,h=2*l-1,s=i.a-r.a,p=((h*s===-1?h:(h+s)/(1+h*s))+1)/2;a=1-p,i.r=255&p*i.r+a*r.r+.5,i.g=255&p*i.g+a*r.g+.5,i.b=255&p*i.b+a*r.b+.5,i.a=l*i.a+(1-l)*r.a,this.rgb=i}return this}interpolate(t,n){return t&&(this._rgb=EQ(this._rgb,t._rgb,n)),this}clone(){return new Lb(this.rgb)}alpha(t){return this._rgb.a=Lf(t),this}clearer(t){const n=this._rgb;return n.a*=1-t,this}greyscale(){const t=this._rgb,n=v0(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=n,this}opaquer(t){const n=this._rgb;return n.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Rx(this._rgb,2,t),this}darken(t){return Rx(this._rgb,2,-t),this}saturate(t){return Rx(this._rgb,1,t),this}desaturate(t){return Rx(this._rgb,1,-t),this}rotate(t){return vQ(this._rgb,t),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Wd(){}const kQ=(()=>{let e=0;return()=>e++})();function Ri(e){return e==null}function os(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function Bi(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function Ds(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function Gl(e,t){return Ds(e)?e:t}function yi(e,t){return typeof e>"u"?t:e}const IQ=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100:+e/t,$4=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function Hr(e,t,n){if(e&&typeof e.call=="function")return e.apply(n,t)}function kr(e,t,n,i){let r,a,l;if(os(e))for(a=e.length,r=0;r<a;r++)t.call(n,e[r],r);else if(Bi(e))for(l=Object.keys(e),a=l.length,r=0;r<a;r++)t.call(n,e[l[r]],l[r])}function n1(e,t){let n,i,r,a;if(!e||!t||e.length!==t.length)return!1;for(n=0,i=e.length;n<i;++n)if(r=e[n],a=t[n],r.datasetIndex!==a.datasetIndex||r.index!==a.index)return!1;return!0}function i1(e){if(os(e))return e.map(i1);if(Bi(e)){const t=Object.create(null),n=Object.keys(e),i=n.length;let r=0;for(;r<i;++r)t[n[r]]=i1(e[n[r]]);return t}return e}function j4(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function AQ(e,t,n,i){if(!j4(e))return;const r=t[e],a=n[e];Bi(r)&&Bi(a)?Ob(r,a,i):t[e]=i1(a)}function Ob(e,t,n){const i=os(t)?t:[t],r=i.length;if(!Bi(e))return e;n=n||{};const a=n.merger||AQ;let l;for(let h=0;h<r;++h){if(l=i[h],!Bi(l))continue;const s=Object.keys(l);for(let p=0,v=s.length;p<v;++p)a(s[p],e,l,n)}return e}function qy(e,t){return Ob(e,t,{merger:PQ})}function PQ(e,t,n){if(!j4(e))return;const i=t[e],r=n[e];Bi(i)&&Bi(r)?qy(i,r):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=i1(r))}const KO={"":e=>e,x:e=>e.x,y:e=>e.y};function MQ(e){const t=e.split("."),n=[];let i="";for(const r of t)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}function DQ(e){const t=MQ(e);return n=>{for(const i of t){if(i==="")break;n=n&&n[i]}return n}}function qf(e,t){return(KO[t]||(KO[t]=DQ(t)))(e)}function VA(e){return e.charAt(0).toUpperCase()+e.slice(1)}const Vb=e=>typeof e<"u",Kf=e=>typeof e=="function",XO=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};function RQ(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const cr=Math.PI,Zr=2*cr,LQ=Zr+cr,r1=Number.POSITIVE_INFINITY,OQ=cr/180,js=cr/2,tp=cr/4,ZO=cr*2/3,kf=Math.log10,qu=Math.sign;function Ky(e,t,n){return Math.abs(e-t)<n}function YO(e){const t=Math.round(e);e=Ky(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(kf(e))),i=e/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function VQ(e){const t=[],n=Math.sqrt(e);let i;for(i=1;i<n;i++)e%i===0&&(t.push(i),t.push(e/i));return n===(n|0)&&t.push(n),t.sort((r,a)=>r-a).pop(),t}function BQ(e){return typeof e=="symbol"||typeof e=="object"&&e!==null&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}function H_(e){return!BQ(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function FQ(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}function W4(e,t,n){let i,r,a;for(i=0,r=e.length;i<r;i++)a=e[i][n],isNaN(a)||(t.min=Math.min(t.min,a),t.max=Math.max(t.max,a))}function ru(e){return e*(cr/180)}function BA(e){return e*(180/cr)}function JO(e){if(!Ds(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function H4(e,t){const n=t.x-e.x,i=t.y-e.y,r=Math.sqrt(n*n+i*i);let a=Math.atan2(i,n);return a<-.5*cr&&(a+=Zr),{angle:a,distance:r}}function lk(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function zQ(e,t){return(e-t+LQ)%Zr-cr}function Ia(e){return(e%Zr+Zr)%Zr}function Bb(e,t,n,i){const r=Ia(e),a=Ia(t),l=Ia(n),h=Ia(a-r),s=Ia(l-r),p=Ia(r-a),v=Ia(r-l);return r===a||r===l||i&&a===l||h>s&&p<v}function Oo(e,t,n){return Math.max(t,Math.min(n,e))}function NQ(e){return Oo(e,-32768,32767)}function ih(e,t,n,i=1e-6){return e>=Math.min(t,n)-i&&e<=Math.max(t,n)+i}function FA(e,t,n){n=n||(l=>e[l]<t);let i=e.length-1,r=0,a;for(;i-r>1;)a=r+i>>1,n(a)?r=a:i=a;return{lo:r,hi:i}}const rh=(e,t,n,i)=>FA(e,n,i?r=>{const a=e[r][t];return a<n||a===n&&e[r+1][t]===n}:r=>e[r][t]<n),UQ=(e,t,n)=>FA(e,n,i=>e[i][t]>=n);function $Q(e,t,n){let i=0,r=e.length;for(;i<r&&e[i]<t;)i++;for(;r>i&&e[r-1]>n;)r--;return i>0||r<e.length?e.slice(i,r):e}const G4=["push","pop","shift","splice","unshift"];function jQ(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),G4.forEach(n=>{const i="_onData"+VA(n),r=e[n];Object.defineProperty(e,n,{configurable:!0,enumerable:!1,value(...a){const l=r.apply(this,a);return e._chartjs.listeners.forEach(h=>{typeof h[i]=="function"&&h[i](...a)}),l}})})}function QO(e,t){const n=e._chartjs;if(!n)return;const i=n.listeners,r=i.indexOf(t);r!==-1&&i.splice(r,1),!(i.length>0)&&(G4.forEach(a=>{delete e[a]}),delete e._chartjs)}function q4(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const K4=(function(){return typeof window>"u"?function(e){return e()}:window.requestAnimationFrame})();function X4(e,t){let n=[],i=!1;return function(...r){n=r,i||(i=!0,K4.call(window,()=>{i=!1,e.apply(t,n)}))}}function WQ(e,t){let n;return function(...i){return t?(clearTimeout(n),n=setTimeout(e,t,i)):e.apply(this,i),t}}const zA=e=>e==="start"?"left":e==="end"?"right":"center",Ea=(e,t,n)=>e==="start"?t:e==="end"?n:(t+n)/2,HQ=(e,t,n,i)=>e===(i?"left":"right")?n:e==="center"?(t+n)/2:t;function Z4(e,t,n){const i=t.length;let r=0,a=i;if(e._sorted){const{iScale:l,vScale:h,_parsed:s}=e,p=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,v=l.axis,{min:x,max:T,minDefined:k,maxDefined:P}=l.getUserBounds();if(k){if(r=Math.min(rh(s,v,x).lo,n?i:rh(t,v,l.getPixelForValue(x)).lo),p){const M=s.slice(0,r+1).reverse().findIndex(L=>!Ri(L[h.axis]));r-=Math.max(0,M)}r=Oo(r,0,i-1)}if(P){let M=Math.max(rh(s,l.axis,T,!0).hi+1,n?0:rh(t,v,l.getPixelForValue(T),!0).hi+1);if(p){const L=s.slice(M-1).findIndex(B=>!Ri(B[h.axis]));M+=Math.max(0,L)}a=Oo(M,r,i)-r}else a=i-r}return{start:r,count:a}}function Y4(e){const{xScale:t,yScale:n,_scaleRanges:i}=e,r={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!i)return e._scaleRanges=r,!0;const a=i.xmin!==t.min||i.xmax!==t.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,r),a}const Lx=e=>e===0||e===1,eV=(e,t,n)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*Zr/n)),tV=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*Zr/n)+1,Xy={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*js)+1,easeOutSine:e=>Math.sin(e*js),easeInOutSine:e=>-.5*(Math.cos(cr*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>Lx(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>Lx(e)?e:eV(e,.075,.3),easeOutElastic:e=>Lx(e)?e:tV(e,.075,.3),easeInOutElastic(e){return Lx(e)?e:e<.5?.5*eV(e*2,.1125,.45):.5+.5*tV(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-Xy.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?Xy.easeInBounce(e*2)*.5:Xy.easeOutBounce(e*2-1)*.5+.5};function NA(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function nV(e){return NA(e)?e:new Lb(e)}function UE(e){return NA(e)?e:new Lb(e).saturate(.5).darken(.1).hexString()}const GQ=["x","y","borderWidth","radius","tension"],qQ=["color","borderColor","backgroundColor"];function KQ(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),e.set("animations",{colors:{type:"color",properties:qQ},numbers:{type:"number",properties:GQ}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function XQ(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const iV=new Map;function ZQ(e,t){t=t||{};const n=e+JSON.stringify(t);let i=iV.get(n);return i||(i=new Intl.NumberFormat(e,t),iV.set(n,i)),i}function y0(e,t,n){return ZQ(t,n).format(e)}const J4={values(e){return os(e)?e:""+e},numeric(e,t,n){if(e===0)return"0";const i=this.chart.options.locale;let r,a=e;if(n.length>1){const p=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(p<1e-4||p>1e15)&&(r="scientific"),a=YQ(e,n)}const l=kf(Math.abs(a)),h=isNaN(l)?1:Math.max(Math.min(-1*Math.floor(l),20),0),s={notation:r,minimumFractionDigits:h,maximumFractionDigits:h};return Object.assign(s,this.options.ticks.format),y0(e,i,s)},logarithmic(e,t,n){if(e===0)return"0";const i=n[t].significand||e/Math.pow(10,Math.floor(kf(e)));return[1,2,3,5,10,15].includes(i)||t>.8*n.length?J4.numeric.call(this,e,t,n):""}};function YQ(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e)),n}var lT={formatters:J4};function JQ(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,n)=>n.lineWidth,tickColor:(t,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:lT.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const Bp=Object.create(null),ck=Object.create(null);function Zy(e,t){if(!t)return e;const n=t.split(".");for(let i=0,r=n.length;i<r;++i){const a=n[i];e=e[a]||(e[a]=Object.create(null))}return e}function $E(e,t,n){return typeof t=="string"?Ob(Zy(e,t),n):Ob(Zy(e,""),t)}class QQ{constructor(t,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,r)=>UE(r.backgroundColor),this.hoverBorderColor=(i,r)=>UE(r.borderColor),this.hoverColor=(i,r)=>UE(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(n)}set(t,n){return $E(this,t,n)}get(t){return Zy(this,t)}describe(t,n){return $E(ck,t,n)}override(t,n){return $E(Bp,t,n)}route(t,n,i,r){const a=Zy(this,t),l=Zy(this,i),h="_"+n;Object.defineProperties(a,{[h]:{value:a[n],writable:!0},[n]:{enumerable:!0,get(){const s=this[h],p=l[r];return Bi(s)?Object.assign({},p,s):yi(s,p)},set(s){this[h]=s}}})}apply(t){t.forEach(n=>n(this))}}var as=new QQ({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[KQ,XQ,JQ]);function eee(e){return!e||Ri(e.size)||Ri(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function s1(e,t,n,i,r){let a=t[r];return a||(a=t[r]=e.measureText(r).width,n.push(r)),a>i&&(i=a),i}function tee(e,t,n,i){i=i||{};let r=i.data=i.data||{},a=i.garbageCollect=i.garbageCollect||[];i.font!==t&&(r=i.data={},a=i.garbageCollect=[],i.font=t),e.save(),e.font=t;let l=0;const h=n.length;let s,p,v,x,T;for(s=0;s<h;s++)if(x=n[s],x!=null&&!os(x))l=s1(e,r,a,l,x);else if(os(x))for(p=0,v=x.length;p<v;p++)T=x[p],T!=null&&!os(T)&&(l=s1(e,r,a,l,T));e.restore();const k=a.length/2;if(k>n.length){for(s=0;s<k;s++)delete r[a[s]];a.splice(0,k)}return l}function np(e,t,n){const i=e.currentDevicePixelRatio,r=n!==0?Math.max(n/2,.5):0;return Math.round((t-r)*i)/i+r}function rV(e,t){!t&&!e||(t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function uk(e,t,n,i){Q4(e,t,n,i,null)}function Q4(e,t,n,i,r){let a,l,h,s,p,v,x,T;const k=t.pointStyle,P=t.rotation,M=t.radius;let L=(P||0)*OQ;if(k&&typeof k=="object"&&(a=k.toString(),a==="[object HTMLImageElement]"||a==="[object HTMLCanvasElement]")){e.save(),e.translate(n,i),e.rotate(L),e.drawImage(k,-k.width/2,-k.height/2,k.width,k.height),e.restore();return}if(!(isNaN(M)||M<=0)){switch(e.beginPath(),k){default:r?e.ellipse(n,i,r/2,M,0,0,Zr):e.arc(n,i,M,0,Zr),e.closePath();break;case"triangle":v=r?r/2:M,e.moveTo(n+Math.sin(L)*v,i-Math.cos(L)*M),L+=ZO,e.lineTo(n+Math.sin(L)*v,i-Math.cos(L)*M),L+=ZO,e.lineTo(n+Math.sin(L)*v,i-Math.cos(L)*M),e.closePath();break;case"rectRounded":p=M*.516,s=M-p,l=Math.cos(L+tp)*s,x=Math.cos(L+tp)*(r?r/2-p:s),h=Math.sin(L+tp)*s,T=Math.sin(L+tp)*(r?r/2-p:s),e.arc(n-x,i-h,p,L-cr,L-js),e.arc(n+T,i-l,p,L-js,L),e.arc(n+x,i+h,p,L,L+js),e.arc(n-T,i+l,p,L+js,L+cr),e.closePath();break;case"rect":if(!P){s=Math.SQRT1_2*M,v=r?r/2:s,e.rect(n-v,i-s,2*v,2*s);break}L+=tp;case"rectRot":x=Math.cos(L)*(r?r/2:M),l=Math.cos(L)*M,h=Math.sin(L)*M,T=Math.sin(L)*(r?r/2:M),e.moveTo(n-x,i-h),e.lineTo(n+T,i-l),e.lineTo(n+x,i+h),e.lineTo(n-T,i+l),e.closePath();break;case"crossRot":L+=tp;case"cross":x=Math.cos(L)*(r?r/2:M),l=Math.cos(L)*M,h=Math.sin(L)*M,T=Math.sin(L)*(r?r/2:M),e.moveTo(n-x,i-h),e.lineTo(n+x,i+h),e.moveTo(n+T,i-l),e.lineTo(n-T,i+l);break;case"star":x=Math.cos(L)*(r?r/2:M),l=Math.cos(L)*M,h=Math.sin(L)*M,T=Math.sin(L)*(r?r/2:M),e.moveTo(n-x,i-h),e.lineTo(n+x,i+h),e.moveTo(n+T,i-l),e.lineTo(n-T,i+l),L+=tp,x=Math.cos(L)*(r?r/2:M),l=Math.cos(L)*M,h=Math.sin(L)*M,T=Math.sin(L)*(r?r/2:M),e.moveTo(n-x,i-h),e.lineTo(n+x,i+h),e.moveTo(n+T,i-l),e.lineTo(n-T,i+l);break;case"line":l=r?r/2:Math.cos(L)*M,h=Math.sin(L)*M,e.moveTo(n-l,i-h),e.lineTo(n+l,i+h);break;case"dash":e.moveTo(n,i),e.lineTo(n+Math.cos(L)*(r?r/2:M),i+Math.sin(L)*M);break;case!1:e.closePath();break}e.fill(),t.borderWidth>0&&e.stroke()}}function sh(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function cT(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function uT(e){e.restore()}function nee(e,t,n,i,r){if(!t)return e.lineTo(n.x,n.y);if(r==="middle"){const a=(t.x+n.x)/2;e.lineTo(a,t.y),e.lineTo(a,n.y)}else r==="after"!=!!i?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function iee(e,t,n,i){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(i?t.cp1x:t.cp2x,i?t.cp1y:t.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function ree(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),Ri(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function see(e,t,n,i,r){if(r.strikethrough||r.underline){const a=e.measureText(i),l=t-a.actualBoundingBoxLeft,h=t+a.actualBoundingBoxRight,s=n-a.actualBoundingBoxAscent,p=n+a.actualBoundingBoxDescent,v=r.strikethrough?(s+p)/2:p;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=r.decorationWidth||2,e.moveTo(l,v),e.lineTo(h,v),e.stroke()}}function oee(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function Fp(e,t,n,i,r,a={}){const l=os(t)?t:[t],h=a.strokeWidth>0&&a.strokeColor!=="";let s,p;for(e.save(),e.font=r.string,ree(e,a),s=0;s<l.length;++s)p=l[s],a.backdrop&&oee(e,a.backdrop),h&&(a.strokeColor&&(e.strokeStyle=a.strokeColor),Ri(a.strokeWidth)||(e.lineWidth=a.strokeWidth),e.strokeText(p,n,i,a.maxWidth)),e.fillText(p,n,i,a.maxWidth),see(e,n,i,p,a),i+=Number(r.lineHeight);e.restore()}function Fb(e,t){const{x:n,y:i,w:r,h:a,radius:l}=t;e.arc(n+l.topLeft,i+l.topLeft,l.topLeft,1.5*cr,cr,!0),e.lineTo(n,i+a-l.bottomLeft),e.arc(n+l.bottomLeft,i+a-l.bottomLeft,l.bottomLeft,cr,js,!0),e.lineTo(n+r-l.bottomRight,i+a),e.arc(n+r-l.bottomRight,i+a-l.bottomRight,l.bottomRight,js,0,!0),e.lineTo(n+r,i+l.topRight),e.arc(n+r-l.topRight,i+l.topRight,l.topRight,0,-js,!0),e.lineTo(n+l.topLeft,i)}const aee=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,lee=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function cee(e,t){const n=(""+e).match(aee);if(!n||n[1]==="normal")return t*1.2;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100;break}return t*e}const uee=e=>+e||0;function UA(e,t){const n={},i=Bi(t),r=i?Object.keys(t):t,a=Bi(e)?i?l=>yi(e[l],e[t[l]]):l=>e[l]:()=>e;for(const l of r)n[l]=uee(a(l));return n}function e6(e){return UA(e,{top:"y",right:"x",bottom:"y",left:"x"})}function kp(e){return UA(e,["topLeft","topRight","bottomLeft","bottomRight"])}function Na(e){const t=e6(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function fo(e,t){e=e||{},t=t||as.font;let n=yi(e.size,t.size);typeof n=="string"&&(n=parseInt(n,10));let i=yi(e.style,t.style);i&&!(""+i).match(lee)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:yi(e.family,t.family),lineHeight:cee(yi(e.lineHeight,t.lineHeight),n),size:n,style:i,weight:yi(e.weight,t.weight),string:""};return r.string=eee(r),r}function Cy(e,t,n,i){let r,a,l;for(r=0,a=e.length;r<a;++r)if(l=e[r],l!==void 0&&l!==void 0)return l}function dee(e,t,n){const{min:i,max:r}=e,a=$4(t,(r-i)/2),l=(h,s)=>n&&h===0?0:h+s;return{min:l(i,-Math.abs(a)),max:l(r,a)}}function am(e,t){return Object.assign(Object.create(e),t)}function $A(e,t=[""],n,i,r=()=>e[0]){const a=n||e;typeof i>"u"&&(i=r6("_fallback",e));const l={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:a,_fallback:i,_getTarget:r,override:h=>$A([h,...e],t,a,i)};return new Proxy(l,{deleteProperty(h,s){return delete h[s],delete h._keys,delete e[0][s],!0},get(h,s){return n6(h,s,()=>yee(s,t,e,h))},getOwnPropertyDescriptor(h,s){return Reflect.getOwnPropertyDescriptor(h._scopes[0],s)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(h,s){return oV(h).includes(s)},ownKeys(h){return oV(h)},set(h,s,p){const v=h._storage||(h._storage=r());return h[s]=v[s]=p,delete h._keys,!0}})}function G_(e,t,n,i){const r={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:t6(e,i),setContext:a=>G_(e,a,n,i),override:a=>G_(e.override(a),t,n,i)};return new Proxy(r,{deleteProperty(a,l){return delete a[l],delete e[l],!0},get(a,l,h){return n6(a,l,()=>fee(a,l,h))},getOwnPropertyDescriptor(a,l){return a._descriptors.allKeys?Reflect.has(e,l)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,l)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(a,l){return Reflect.has(e,l)},ownKeys(){return Reflect.ownKeys(e)},set(a,l,h){return e[l]=h,delete a[l],!0}})}function t6(e,t={scriptable:!0,indexable:!0}){const{_scriptable:n=t.scriptable,_indexable:i=t.indexable,_allKeys:r=t.allKeys}=e;return{allKeys:r,scriptable:n,indexable:i,isScriptable:Kf(n)?n:()=>n,isIndexable:Kf(i)?i:()=>i}}const hee=(e,t)=>e?e+VA(t):t,jA=(e,t)=>Bi(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function n6(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t)||t==="constructor")return e[t];const i=n();return e[t]=i,i}function fee(e,t,n){const{_proxy:i,_context:r,_subProxy:a,_descriptors:l}=e;let h=i[t];return Kf(h)&&l.isScriptable(t)&&(h=mee(t,h,e,n)),os(h)&&h.length&&(h=pee(t,h,e,l.isIndexable)),jA(t,h)&&(h=G_(h,r,a&&a[t],l)),h}function mee(e,t,n,i){const{_proxy:r,_context:a,_subProxy:l,_stack:h}=n;if(h.has(e))throw new Error("Recursion detected: "+Array.from(h).join("->")+"->"+e);h.add(e);let s=t(a,l||i);return h.delete(e),jA(e,s)&&(s=WA(r._scopes,r,e,s)),s}function pee(e,t,n,i){const{_proxy:r,_context:a,_subProxy:l,_descriptors:h}=n;if(typeof a.index<"u"&&i(e))return t[a.index%t.length];if(Bi(t[0])){const s=t,p=r._scopes.filter(v=>v!==s);t=[];for(const v of s){const x=WA(p,r,e,v);t.push(G_(x,a,l&&l[e],h))}}return t}function i6(e,t,n){return Kf(e)?e(t,n):e}const gee=(e,t)=>e===!0?t:typeof e=="string"?qf(t,e):void 0;function _ee(e,t,n,i,r){for(const a of t){const l=gee(n,a);if(l){e.add(l);const h=i6(l._fallback,n,r);if(typeof h<"u"&&h!==n&&h!==i)return h}else if(l===!1&&typeof i<"u"&&n!==i)return null}return!1}function WA(e,t,n,i){const r=t._rootScopes,a=i6(t._fallback,n,i),l=[...e,...r],h=new Set;h.add(i);let s=sV(h,l,n,a||n,i);return s===null||typeof a<"u"&&a!==n&&(s=sV(h,l,a,s,i),s===null)?!1:$A(Array.from(h),[""],r,a,()=>vee(t,n,i))}function sV(e,t,n,i,r){for(;n;)n=_ee(e,t,n,i,r);return n}function vee(e,t,n){const i=e._getTarget();t in i||(i[t]={});const r=i[t];return os(r)&&Bi(n)?n:r||{}}function yee(e,t,n,i){let r;for(const a of t)if(r=r6(hee(a,e),n),typeof r<"u")return jA(e,r)?WA(n,i,e,r):r}function r6(e,t){for(const n of t){if(!n)continue;const i=n[e];if(typeof i<"u")return i}}function oV(e){let t=e._keys;return t||(t=e._keys=bee(e._scopes)),t}function bee(e){const t=new Set;for(const n of e)for(const i of Object.keys(n).filter(r=>!r.startsWith("_")))t.add(i);return Array.from(t)}function s6(e,t,n,i){const{iScale:r}=e,{key:a="r"}=this._parsing,l=new Array(i);let h,s,p,v;for(h=0,s=i;h<s;++h)p=h+n,v=t[p],l[h]={r:r.parse(qf(v,a),p)};return l}const xee=Number.EPSILON||1e-14,q_=(e,t)=>t<e.length&&!e[t].skip&&e[t],o6=e=>e==="x"?"y":"x";function wee(e,t,n,i){const r=e.skip?t:e,a=t,l=n.skip?t:n,h=lk(a,r),s=lk(l,a);let p=h/(h+s),v=s/(h+s);p=isNaN(p)?0:p,v=isNaN(v)?0:v;const x=i*p,T=i*v;return{previous:{x:a.x-x*(l.x-r.x),y:a.y-x*(l.y-r.y)},next:{x:a.x+T*(l.x-r.x),y:a.y+T*(l.y-r.y)}}}function Tee(e,t,n){const i=e.length;let r,a,l,h,s,p=q_(e,0);for(let v=0;v<i-1;++v)if(s=p,p=q_(e,v+1),!(!s||!p)){if(Ky(t[v],0,xee)){n[v]=n[v+1]=0;continue}r=n[v]/t[v],a=n[v+1]/t[v],h=Math.pow(r,2)+Math.pow(a,2),!(h<=9)&&(l=3/Math.sqrt(h),n[v]=r*l*t[v],n[v+1]=a*l*t[v])}}function See(e,t,n="x"){const i=o6(n),r=e.length;let a,l,h,s=q_(e,0);for(let p=0;p<r;++p){if(l=h,h=s,s=q_(e,p+1),!h)continue;const v=h[n],x=h[i];l&&(a=(v-l[n])/3,h[`cp1${n}`]=v-a,h[`cp1${i}`]=x-a*t[p]),s&&(a=(s[n]-v)/3,h[`cp2${n}`]=v+a,h[`cp2${i}`]=x+a*t[p])}}function Eee(e,t="x"){const n=o6(t),i=e.length,r=Array(i).fill(0),a=Array(i);let l,h,s,p=q_(e,0);for(l=0;l<i;++l)if(h=s,s=p,p=q_(e,l+1),!!s){if(p){const v=p[t]-s[t];r[l]=v!==0?(p[n]-s[n])/v:0}a[l]=h?p?qu(r[l-1])!==qu(r[l])?0:(r[l-1]+r[l])/2:r[l-1]:r[l]}Tee(e,r,a),See(e,a,t)}function Ox(e,t,n){return Math.max(Math.min(e,n),t)}function Cee(e,t){let n,i,r,a,l,h=sh(e[0],t);for(n=0,i=e.length;n<i;++n)l=a,a=h,h=n<i-1&&sh(e[n+1],t),a&&(r=e[n],l&&(r.cp1x=Ox(r.cp1x,t.left,t.right),r.cp1y=Ox(r.cp1y,t.top,t.bottom)),h&&(r.cp2x=Ox(r.cp2x,t.left,t.right),r.cp2y=Ox(r.cp2y,t.top,t.bottom)))}function kee(e,t,n,i,r){let a,l,h,s;if(t.spanGaps&&(e=e.filter(p=>!p.skip)),t.cubicInterpolationMode==="monotone")Eee(e,r);else{let p=i?e[e.length-1]:e[0];for(a=0,l=e.length;a<l;++a)h=e[a],s=wee(p,h,e[Math.min(a+1,l-(i?0:1))%l],t.tension),h.cp1x=s.previous.x,h.cp1y=s.previous.y,h.cp2x=s.next.x,h.cp2y=s.next.y,p=h}t.capBezierPoints&&Cee(e,n)}function HA(){return typeof window<"u"&&typeof document<"u"}function GA(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function o1(e,t,n){let i;return typeof e=="string"?(i=parseInt(e,10),e.indexOf("%")!==-1&&(i=i/100*t.parentNode[n])):i=e,i}const dT=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function Iee(e,t){return dT(e).getPropertyValue(t)}const Aee=["top","right","bottom","left"];function Ip(e,t,n){const i={};n=n?"-"+n:"";for(let r=0;r<4;r++){const a=Aee[r];i[a]=parseFloat(e[t+"-"+a+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const Pee=(e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot);function Mee(e,t){const n=e.touches,i=n&&n.length?n[0]:e,{offsetX:r,offsetY:a}=i;let l=!1,h,s;if(Pee(r,a,e.target))h=r,s=a;else{const p=t.getBoundingClientRect();h=i.clientX-p.left,s=i.clientY-p.top,l=!0}return{x:h,y:s,box:l}}function lp(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:i}=t,r=dT(n),a=r.boxSizing==="border-box",l=Ip(r,"padding"),h=Ip(r,"border","width"),{x:s,y:p,box:v}=Mee(e,n),x=l.left+(v&&h.left),T=l.top+(v&&h.top);let{width:k,height:P}=t;return a&&(k-=l.width+h.width,P-=l.height+h.height),{x:Math.round((s-x)/k*n.width/i),y:Math.round((p-T)/P*n.height/i)}}function Dee(e,t,n){let i,r;if(t===void 0||n===void 0){const a=e&&GA(e);if(!a)t=e.clientWidth,n=e.clientHeight;else{const l=a.getBoundingClientRect(),h=dT(a),s=Ip(h,"border","width"),p=Ip(h,"padding");t=l.width-p.width-s.width,n=l.height-p.height-s.height,i=o1(h.maxWidth,a,"clientWidth"),r=o1(h.maxHeight,a,"clientHeight")}}return{width:t,height:n,maxWidth:i||r1,maxHeight:r||r1}}const If=e=>Math.round(e*10)/10;function Ree(e,t,n,i){const r=dT(e),a=Ip(r,"margin"),l=o1(r.maxWidth,e,"clientWidth")||r1,h=o1(r.maxHeight,e,"clientHeight")||r1,s=Dee(e,t,n);let{width:p,height:v}=s;if(r.boxSizing==="content-box"){const T=Ip(r,"border","width"),k=Ip(r,"padding");p-=k.width+T.width,v-=k.height+T.height}return p=Math.max(0,p-a.width),v=Math.max(0,i?p/i:v-a.height),p=If(Math.min(p,l,s.maxWidth)),v=If(Math.min(v,h,s.maxHeight)),p&&!v&&(v=If(p/2)),(t!==void 0||n!==void 0)&&i&&s.height&&v>s.height&&(v=s.height,p=If(Math.floor(v*i))),{width:p,height:v}}function aV(e,t,n){const i=t||1,r=If(e.height*i),a=If(e.width*i);e.height=If(e.height),e.width=If(e.width);const l=e.canvas;return l.style&&(n||!l.style.height&&!l.style.width)&&(l.style.height=`${e.height}px`,l.style.width=`${e.width}px`),e.currentDevicePixelRatio!==i||l.height!==r||l.width!==a?(e.currentDevicePixelRatio=i,l.height=r,l.width=a,e.ctx.setTransform(i,0,0,i,0,0),!0):!1}const Lee=(function(){let e=!1;try{const t={get passive(){return e=!0,!1}};HA()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return e})();function lV(e,t){const n=Iee(e,t),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function cp(e,t,n,i){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function Oee(e,t,n,i){return{x:e.x+n*(t.x-e.x),y:i==="middle"?n<.5?e.y:t.y:i==="after"?n<1?e.y:t.y:n>0?t.y:e.y}}function Vee(e,t,n,i){const r={x:e.cp2x,y:e.cp2y},a={x:t.cp1x,y:t.cp1y},l=cp(e,r,n),h=cp(r,a,n),s=cp(a,t,n),p=cp(l,h,n),v=cp(h,s,n);return cp(p,v,n)}const Bee=function(e,t){return{x(n){return e+e+t-n},setWidth(n){t=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,i){return n-i},leftForLtr(n,i){return n-i}}},Fee=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function E_(e,t,n){return e?Bee(t,n):Fee()}function a6(e,t){let n,i;(t==="ltr"||t==="rtl")&&(n=e.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=i)}function l6(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function c6(e){return e==="angle"?{between:Bb,compare:zQ,normalize:Ia}:{between:ih,compare:(t,n)=>t-n,normalize:t=>t}}function cV({start:e,end:t,count:n,loop:i,style:r}){return{start:e%n,end:t%n,loop:i&&(t-e+1)%n===0,style:r}}function zee(e,t,n){const{property:i,start:r,end:a}=n,{between:l,normalize:h}=c6(i),s=t.length;let{start:p,end:v,loop:x}=e,T,k;if(x){for(p+=s,v+=s,T=0,k=s;T<k&&l(h(t[p%s][i]),r,a);++T)p--,v--;p%=s,v%=s}return v<p&&(v+=s),{start:p,end:v,loop:x,style:e.style}}function u6(e,t,n){if(!n)return[e];const{property:i,start:r,end:a}=n,l=t.length,{compare:h,between:s,normalize:p}=c6(i),{start:v,end:x,loop:T,style:k}=zee(e,t,n),P=[];let M=!1,L=null,B,F,X;const J=()=>s(r,X,B)&&h(r,X)!==0,Q=()=>h(a,B)===0||s(a,X,B),re=()=>M||J(),Z=()=>!M||Q();for(let $=v,H=v;$<=x;++$)F=t[$%l],!F.skip&&(B=p(F[i]),B!==X&&(M=s(B,r,a),L===null&&re()&&(L=h(B,r)===0?$:H),L!==null&&Z()&&(P.push(cV({start:L,end:$,loop:T,count:l,style:k})),L=null),H=$,X=B));return L!==null&&P.push(cV({start:L,end:x,loop:T,count:l,style:k})),P}function d6(e,t){const n=[],i=e.segments;for(let r=0;r<i.length;r++){const a=u6(i[r],e.points,t);a.length&&n.push(...a)}return n}function Nee(e,t,n,i){let r=0,a=t-1;if(n&&!i)for(;r<t&&!e[r].skip;)r++;for(;r<t&&e[r].skip;)r++;for(r%=t,n&&(a+=r);a>r&&e[a%t].skip;)a--;return a%=t,{start:r,end:a}}function Uee(e,t,n,i){const r=e.length,a=[];let l=t,h=e[t],s;for(s=t+1;s<=n;++s){const p=e[s%r];p.skip||p.stop?h.skip||(i=!1,a.push({start:t%r,end:(s-1)%r,loop:i}),t=l=p.stop?s:null):(l=s,h.skip&&(t=s)),h=p}return l!==null&&a.push({start:t%r,end:l%r,loop:i}),a}function $ee(e,t){const n=e.points,i=e.options.spanGaps,r=n.length;if(!r)return[];const a=!!e._loop,{start:l,end:h}=Nee(n,r,a,i);if(i===!0)return uV(e,[{start:l,end:h,loop:a}],n,t);const s=h<l?h+r:h,p=!!e._fullLoop&&l===0&&h===r-1;return uV(e,Uee(n,l,s,p),n,t)}function uV(e,t,n,i){return!i||!i.setContext||!n?t:jee(e,t,n,i)}function jee(e,t,n,i){const r=e._chart.getContext(),a=dV(e.options),{_datasetIndex:l,options:{spanGaps:h}}=e,s=n.length,p=[];let v=a,x=t[0].start,T=x;function k(P,M,L,B){const F=h?-1:1;if(P!==M){for(P+=s;n[P%s].skip;)P-=F;for(;n[M%s].skip;)M+=F;P%s!==M%s&&(p.push({start:P%s,end:M%s,loop:L,style:B}),v=B,x=M%s)}}for(const P of t){x=h?x:P.start;let M=n[x%s],L;for(T=x+1;T<=P.end;T++){const B=n[T%s];L=dV(i.setContext(am(r,{type:"segment",p0:M,p1:B,p0DataIndex:(T-1)%s,p1DataIndex:T%s,datasetIndex:l}))),Wee(L,v)&&k(x,T-1,P.loop,v),M=B,v=L}x<T-1&&k(x,T-1,P.loop,v)}return p}function dV(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function Wee(e,t){if(!t)return!1;const n=[],i=function(r,a){return NA(a)?(n.includes(a)||n.push(a),n.indexOf(a)):a};return JSON.stringify(e,i)!==JSON.stringify(t,i)}function Vx(e,t,n){return e.options.clip?e[n]:t[n]}function Hee(e,t){const{xScale:n,yScale:i}=e;return n&&i?{left:Vx(n,t,"left"),right:Vx(n,t,"right"),top:Vx(i,t,"top"),bottom:Vx(i,t,"bottom")}:t}function h6(e,t){const n=t._clip;if(n.disabled)return!1;const i=Hee(t,e.chartArea);return{left:n.left===!1?0:i.left-(n.left===!0?0:n.left),right:n.right===!1?e.width:i.right+(n.right===!0?0:n.right),top:n.top===!1?0:i.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?e.height:i.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class Gee{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,n,i,r){const a=n.listeners[r],l=n.duration;a.forEach(h=>h({chart:t,initial:n.initial,numSteps:l,currentStep:Math.min(i-n.start,l)}))}_refresh(){this._request||(this._running=!0,this._request=K4.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let n=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;const a=i.items;let l=a.length-1,h=!1,s;for(;l>=0;--l)s=a[l],s._active?(s._total>i.duration&&(i.duration=s._total),s.tick(t),h=!0):(a[l]=a[a.length-1],a.pop());h&&(r.draw(),this._notify(r,i,t,"progress")),a.length||(i.running=!1,this._notify(r,i,t,"complete"),i.initial=!1),n+=a.length}),this._lastDate=t,n===0&&(this._running=!1)}_getAnims(t){const n=this._charts;let i=n.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(t,i)),i}listen(t,n,i){this._getAnims(t).listeners[n].push(i)}add(t,n){!n||!n.length||this._getAnims(t).items.push(...n)}has(t){return this._getAnims(t).items.length>0}start(t){const n=this._charts.get(t);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(t){if(!this._running)return!1;const n=this._charts.get(t);return!(!n||!n.running||!n.items.length)}stop(t){const n=this._charts.get(t);if(!n||!n.items.length)return;const i=n.items;let r=i.length-1;for(;r>=0;--r)i[r].cancel();n.items=[],this._notify(t,n,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var Hd=new Gee;const hV="transparent",qee={boolean(e,t,n){return n>.5?t:e},color(e,t,n){const i=nV(e||hV),r=i.valid&&nV(t||hV);return r&&r.valid?r.mix(i,n).hexString():t},number(e,t,n){return e+(t-e)*n}};class Kee{constructor(t,n,i,r){const a=n[i];r=Cy([t.to,r,a,t.from]);const l=Cy([t.from,a,r]);this._active=!0,this._fn=t.fn||qee[t.type||typeof l],this._easing=Xy[t.easing]||Xy.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=n,this._prop=i,this._from=l,this._to=r,this._promises=void 0}active(){return this._active}update(t,n,i){if(this._active){this._notify(!1);const r=this._target[this._prop],a=i-this._start,l=this._duration-a;this._start=i,this._duration=Math.floor(Math.max(l,t.duration)),this._total+=a,this._loop=!!t.loop,this._to=Cy([t.to,n,r,t.from]),this._from=Cy([t.from,r,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const n=t-this._start,i=this._duration,r=this._prop,a=this._from,l=this._loop,h=this._to;let s;if(this._active=a!==h&&(l||n<i),!this._active){this._target[r]=h,this._notify(!0);return}if(n<0){this._target[r]=a;return}s=n/i%2,s=l&&s>1?2-s:s,s=this._easing(Math.min(1,Math.max(0,s))),this._target[r]=this._fn(a,h,s)}wait(){const t=this._promises||(this._promises=[]);return new Promise((n,i)=>{t.push({res:n,rej:i})})}_notify(t){const n=t?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][n]()}}class f6{constructor(t,n){this._chart=t,this._properties=new Map,this.configure(n)}configure(t){if(!Bi(t))return;const n=Object.keys(as.animation),i=this._properties;Object.getOwnPropertyNames(t).forEach(r=>{const a=t[r];if(!Bi(a))return;const l={};for(const h of n)l[h]=a[h];(os(a.properties)&&a.properties||[r]).forEach(h=>{(h===r||!i.has(h))&&i.set(h,l)})})}_animateOptions(t,n){const i=n.options,r=Zee(t,i);if(!r)return[];const a=this._createAnimations(r,i);return i.$shared&&Xee(t.options.$animations,i).then(()=>{t.options=i},()=>{}),a}_createAnimations(t,n){const i=this._properties,r=[],a=t.$animations||(t.$animations={}),l=Object.keys(n),h=Date.now();let s;for(s=l.length-1;s>=0;--s){const p=l[s];if(p.charAt(0)==="$")continue;if(p==="options"){r.push(...this._animateOptions(t,n));continue}const v=n[p];let x=a[p];const T=i.get(p);if(x)if(T&&x.active()){x.update(T,v,h);continue}else x.cancel();if(!T||!T.duration){t[p]=v;continue}a[p]=x=new Kee(T,t,p,v),r.push(x)}return r}update(t,n){if(this._properties.size===0){Object.assign(t,n);return}const i=this._createAnimations(t,n);if(i.length)return Hd.add(this._chart,i),!0}}function Xee(e,t){const n=[],i=Object.keys(t);for(let r=0;r<i.length;r++){const a=e[i[r]];a&&a.active()&&n.push(a.wait())}return Promise.all(n)}function Zee(e,t){if(!t)return;let n=e.options;if(!n){e.options=t;return}return n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function fV(e,t){const n=e&&e.options||{},i=n.reverse,r=n.min===void 0?t:0,a=n.max===void 0?t:0;return{start:i?a:r,end:i?r:a}}function Yee(e,t,n){if(n===!1)return!1;const i=fV(e,n),r=fV(t,n);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}function Jee(e){let t,n,i,r;return Bi(e)?(t=e.top,n=e.right,i=e.bottom,r=e.left):t=n=i=r=e,{top:t,right:n,bottom:i,left:r,disabled:e===!1}}function m6(e,t){const n=[],i=e._getSortedDatasetMetas(t);let r,a;for(r=0,a=i.length;r<a;++r)n.push(i[r].index);return n}function mV(e,t,n,i={}){const r=e.keys,a=i.mode==="single";let l,h,s,p;if(t===null)return;let v=!1;for(l=0,h=r.length;l<h;++l){if(s=+r[l],s===n){if(v=!0,i.all)continue;break}p=e.values[s],Ds(p)&&(a||t===0||qu(t)===qu(p))&&(t+=p)}return!v&&!i.all?0:t}function Qee(e,t){const{iScale:n,vScale:i}=t,r=n.axis==="x"?"x":"y",a=i.axis==="x"?"x":"y",l=Object.keys(e),h=new Array(l.length);let s,p,v;for(s=0,p=l.length;s<p;++s)v=l[s],h[s]={[r]:v,[a]:e[v]};return h}function jE(e,t){const n=e&&e.options.stacked;return n||n===void 0&&t.stack!==void 0}function ete(e,t,n){return`${e.id}.${t.id}.${n.stack||n.type}`}function tte(e){const{min:t,max:n,minDefined:i,maxDefined:r}=e.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}function nte(e,t,n){const i=e[t]||(e[t]={});return i[n]||(i[n]={})}function pV(e,t,n,i){for(const r of t.getMatchingVisibleMetas(i).reverse()){const a=e[r.index];if(n&&a>0||!n&&a<0)return r.index}return null}function gV(e,t){const{chart:n,_cachedMeta:i}=e,r=n._stacks||(n._stacks={}),{iScale:a,vScale:l,index:h}=i,s=a.axis,p=l.axis,v=ete(a,l,i),x=t.length;let T;for(let k=0;k<x;++k){const P=t[k],{[s]:M,[p]:L}=P,B=P._stacks||(P._stacks={});T=B[p]=nte(r,v,M),T[h]=L,T._top=pV(T,l,!0,i.type),T._bottom=pV(T,l,!1,i.type);const F=T._visualValues||(T._visualValues={});F[h]=L}}function WE(e,t){const n=e.scales;return Object.keys(n).filter(i=>n[i].axis===t).shift()}function ite(e,t){return am(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function rte(e,t,n){return am(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}function gy(e,t){const n=e.controller.index,i=e.vScale&&e.vScale.axis;if(i){t=t||e._parsed;for(const r of t){const a=r._stacks;if(!a||a[i]===void 0||a[i][n]===void 0)return;delete a[i][n],a[i]._visualValues!==void 0&&a[i]._visualValues[n]!==void 0&&delete a[i]._visualValues[n]}}}const HE=e=>e==="reset"||e==="none",_V=(e,t)=>t?e:Object.assign({},e),ste=(e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:m6(n,!0),values:null};class lm{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,n){this.chart=t,this._ctx=t.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=jE(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&gy(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,n=this._cachedMeta,i=this.getDataset(),r=(x,T,k,P)=>x==="x"?T:x==="r"?P:k,a=n.xAxisID=yi(i.xAxisID,WE(t,"x")),l=n.yAxisID=yi(i.yAxisID,WE(t,"y")),h=n.rAxisID=yi(i.rAxisID,WE(t,"r")),s=n.indexAxis,p=n.iAxisID=r(s,a,l,h),v=n.vAxisID=r(s,l,a,h);n.xScale=this.getScaleForId(a),n.yScale=this.getScaleForId(l),n.rScale=this.getScaleForId(h),n.iScale=this.getScaleForId(p),n.vScale=this.getScaleForId(v)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const n=this._cachedMeta;return t===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&QO(this._data,this),t._stacked&&gy(t)}_dataCheck(){const t=this.getDataset(),n=t.data||(t.data=[]),i=this._data;if(Bi(n)){const r=this._cachedMeta;this._data=Qee(n,r)}else if(i!==n){if(i){QO(i,this);const r=this._cachedMeta;gy(r),r._parsed=[]}n&&Object.isExtensible(n)&&jQ(n,this),this._syncList=[],this._data=n}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const n=this._cachedMeta,i=this.getDataset();let r=!1;this._dataCheck();const a=n._stacked;n._stacked=jE(n.vScale,n),n.stack!==i.stack&&(r=!0,gy(n),n.stack=i.stack),this._resyncElements(t),(r||a!==n._stacked)&&(gV(this,n._parsed),n._stacked=jE(n.vScale,n))}configure(){const t=this.chart.config,n=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),n,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,n){const{_cachedMeta:i,_data:r}=this,{iScale:a,_stacked:l}=i,h=a.axis;let s=t===0&&n===r.length?!0:i._sorted,p=t>0&&i._parsed[t-1],v,x,T;if(this._parsing===!1)i._parsed=r,i._sorted=!0,T=r;else{os(r[t])?T=this.parseArrayData(i,r,t,n):Bi(r[t])?T=this.parseObjectData(i,r,t,n):T=this.parsePrimitiveData(i,r,t,n);const k=()=>x[h]===null||p&&x[h]<p[h];for(v=0;v<n;++v)i._parsed[v+t]=x=T[v],s&&(k()&&(s=!1),p=x);i._sorted=s}l&&gV(this,T)}parsePrimitiveData(t,n,i,r){const{iScale:a,vScale:l}=t,h=a.axis,s=l.axis,p=a.getLabels(),v=a===l,x=new Array(r);let T,k,P;for(T=0,k=r;T<k;++T)P=T+i,x[T]={[h]:v||a.parse(p[P],P),[s]:l.parse(n[P],P)};return x}parseArrayData(t,n,i,r){const{xScale:a,yScale:l}=t,h=new Array(r);let s,p,v,x;for(s=0,p=r;s<p;++s)v=s+i,x=n[v],h[s]={x:a.parse(x[0],v),y:l.parse(x[1],v)};return h}parseObjectData(t,n,i,r){const{xScale:a,yScale:l}=t,{xAxisKey:h="x",yAxisKey:s="y"}=this._parsing,p=new Array(r);let v,x,T,k;for(v=0,x=r;v<x;++v)T=v+i,k=n[T],p[v]={x:a.parse(qf(k,h),T),y:l.parse(qf(k,s),T)};return p}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,n,i){const r=this.chart,a=this._cachedMeta,l=n[t.axis],h={keys:m6(r,!0),values:n._stacks[t.axis]._visualValues};return mV(h,l,a.index,{mode:i})}updateRangeFromParsed(t,n,i,r){const a=i[n.axis];let l=a===null?NaN:a;const h=r&&i._stacks[n.axis];r&&h&&(r.values=h,l=mV(r,a,this._cachedMeta.index)),t.min=Math.min(t.min,l),t.max=Math.max(t.max,l)}getMinMax(t,n){const i=this._cachedMeta,r=i._parsed,a=i._sorted&&t===i.iScale,l=r.length,h=this._getOtherScale(t),s=ste(n,i,this.chart),p={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:v,max:x}=tte(h);let T,k;function P(){k=r[T];const M=k[h.axis];return!Ds(k[t.axis])||v>M||x<M}for(T=0;T<l&&!(!P()&&(this.updateRangeFromParsed(p,t,k,s),a));++T);if(a){for(T=l-1;T>=0;--T)if(!P()){this.updateRangeFromParsed(p,t,k,s);break}}return p}getAllParsedValues(t){const n=this._cachedMeta._parsed,i=[];let r,a,l;for(r=0,a=n.length;r<a;++r)l=n[r][t.axis],Ds(l)&&i.push(l);return i}getMaxOverflow(){return!1}getLabelAndValue(t){const n=this._cachedMeta,i=n.iScale,r=n.vScale,a=this.getParsed(t);return{label:i?""+i.getLabelForValue(a[i.axis]):"",value:r?""+r.getLabelForValue(a[r.axis]):""}}_update(t){const n=this._cachedMeta;this.update(t||"default"),n._clip=Jee(yi(this.options.clip,Yee(n.xScale,n.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,n=this.chart,i=this._cachedMeta,r=i.data||[],a=n.chartArea,l=[],h=this._drawStart||0,s=this._drawCount||r.length-h,p=this.options.drawActiveElementsOnTop;let v;for(i.dataset&&i.dataset.draw(t,a,h,s),v=h;v<h+s;++v){const x=r[v];x.hidden||(x.active&&p?l.push(x):x.draw(t,a))}for(v=0;v<l.length;++v)l[v].draw(t,a)}getStyle(t,n){const i=n?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,n,i){const r=this.getDataset();let a;if(t>=0&&t<this._cachedMeta.data.length){const l=this._cachedMeta.data[t];a=l.$context||(l.$context=rte(this.getContext(),t,l)),a.parsed=this.getParsed(t),a.raw=r.data[t],a.index=a.dataIndex=t}else a=this.$context||(this.$context=ite(this.chart.getContext(),this.index)),a.dataset=r,a.index=a.datasetIndex=this.index;return a.active=!!n,a.mode=i,a}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,n){return this._resolveElementOptions(this.dataElementType.id,n,t)}_resolveElementOptions(t,n="default",i){const r=n==="active",a=this._cachedDataOpts,l=t+"-"+n,h=a[l],s=this.enableOptionSharing&&Vb(i);if(h)return _V(h,s);const p=this.chart.config,v=p.datasetElementScopeKeys(this._type,t),x=r?[`${t}Hover`,"hover",t,""]:[t,""],T=p.getOptionScopes(this.getDataset(),v),k=Object.keys(as.elements[t]),P=()=>this.getContext(i,r,n),M=p.resolveNamedOptions(T,k,P,x);return M.$shared&&(M.$shared=s,a[l]=Object.freeze(_V(M,s))),M}_resolveAnimations(t,n,i){const r=this.chart,a=this._cachedDataOpts,l=`animation-${n}`,h=a[l];if(h)return h;let s;if(r.options.animation!==!1){const v=this.chart.config,x=v.datasetAnimationScopeKeys(this._type,n),T=v.getOptionScopes(this.getDataset(),x);s=v.createResolver(T,this.getContext(t,i,n))}const p=new f6(r,s&&s.animations);return s&&s._cacheable&&(a[l]=Object.freeze(p)),p}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,n){return!n||HE(t)||this.chart._animationsDisabled}_getSharedOptions(t,n){const i=this.resolveDataElementOptions(t,n),r=this._sharedOptions,a=this.getSharedOptions(i),l=this.includeOptions(n,a)||a!==r;return this.updateSharedOptions(a,n,i),{sharedOptions:a,includeOptions:l}}updateElement(t,n,i,r){HE(r)?Object.assign(t,i):this._resolveAnimations(n,r).update(t,i)}updateSharedOptions(t,n,i){t&&!HE(n)&&this._resolveAnimations(void 0,n).update(t,i)}_setStyle(t,n,i,r){t.active=r;const a=this.getStyle(n,r);this._resolveAnimations(n,i,r).update(t,{options:!r&&this.getSharedOptions(a)||a})}removeHoverStyle(t,n,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,n,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const n=this._data,i=this._cachedMeta.data;for(const[h,s,p]of this._syncList)this[h](s,p);this._syncList=[];const r=i.length,a=n.length,l=Math.min(a,r);l&&this.parse(0,l),a>r?this._insertElements(r,a-r,t):a<r&&this._removeElements(a,r-a)}_insertElements(t,n,i=!0){const r=this._cachedMeta,a=r.data,l=t+n;let h;const s=p=>{for(p.length+=n,h=p.length-1;h>=l;h--)p[h]=p[h-n]};for(s(a),h=t;h<l;++h)a[h]=new this.dataElementType;this._parsing&&s(r._parsed),this.parse(t,n),i&&this.updateElements(a,t,n,"reset")}updateElements(t,n,i,r){}_removeElements(t,n){const i=this._cachedMeta;if(this._parsing){const r=i._parsed.splice(t,n);i._stacked&&gy(i,r)}i.data.splice(t,n)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[n,i,r]=t;this[n](i,r)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,n){n&&this._sync(["_removeElements",t,n]);const i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function ote(e,t){if(!e._cache.$bar){const n=e.getMatchingVisibleMetas(t);let i=[];for(let r=0,a=n.length;r<a;r++)i=i.concat(n[r].controller.getAllParsedValues(e));e._cache.$bar=q4(i.sort((r,a)=>r-a))}return e._cache.$bar}function ate(e){const t=e.iScale,n=ote(t,e.type);let i=t._length,r,a,l,h;const s=()=>{l===32767||l===-32768||(Vb(h)&&(i=Math.min(i,Math.abs(l-h)||i)),h=l)};for(r=0,a=n.length;r<a;++r)l=t.getPixelForValue(n[r]),s();for(h=void 0,r=0,a=t.ticks.length;r<a;++r)l=t.getPixelForTick(r),s();return i}function lte(e,t,n,i){const r=n.barThickness;let a,l;return Ri(r)?(a=t.min*n.categoryPercentage,l=n.barPercentage):(a=r*i,l=1),{chunk:a/i,ratio:l,start:t.pixels[e]-a/2}}function cte(e,t,n,i){const r=t.pixels,a=r[e];let l=e>0?r[e-1]:null,h=e<r.length-1?r[e+1]:null;const s=n.categoryPercentage;l===null&&(l=a-(h===null?t.end-t.start:h-a)),h===null&&(h=a+a-l);const p=a-(a-Math.min(l,h))/2*s;return{chunk:Math.abs(h-l)/2*s/i,ratio:n.barPercentage,start:p}}function ute(e,t,n,i){const r=n.parse(e[0],i),a=n.parse(e[1],i),l=Math.min(r,a),h=Math.max(r,a);let s=l,p=h;Math.abs(l)>Math.abs(h)&&(s=h,p=l),t[n.axis]=p,t._custom={barStart:s,barEnd:p,start:r,end:a,min:l,max:h}}function p6(e,t,n,i){return os(e)?ute(e,t,n,i):t[n.axis]=n.parse(e,i),t}function vV(e,t,n,i){const r=e.iScale,a=e.vScale,l=r.getLabels(),h=r===a,s=[];let p,v,x,T;for(p=n,v=n+i;p<v;++p)T=t[p],x={},x[r.axis]=h||r.parse(l[p],p),s.push(p6(T,x,a,p));return s}function GE(e){return e&&e.barStart!==void 0&&e.barEnd!==void 0}function dte(e,t,n){return e!==0?qu(e):(t.isHorizontal()?1:-1)*(t.min>=n?1:-1)}function hte(e){let t,n,i,r,a;return e.horizontal?(t=e.base>e.x,n="left",i="right"):(t=e.base<e.y,n="bottom",i="top"),t?(r="end",a="start"):(r="start",a="end"),{start:n,end:i,reverse:t,top:r,bottom:a}}function fte(e,t,n,i){let r=t.borderSkipped;const a={};if(!r){e.borderSkipped=a;return}if(r===!0){e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:l,end:h,reverse:s,top:p,bottom:v}=hte(e);r==="middle"&&n&&(e.enableBorderRadius=!0,(n._top||0)===i?r=p:(n._bottom||0)===i?r=v:(a[yV(v,l,h,s)]=!0,r=p)),a[yV(r,l,h,s)]=!0,e.borderSkipped=a}function yV(e,t,n,i){return i?(e=mte(e,t,n),e=bV(e,n,t)):e=bV(e,t,n),e}function mte(e,t,n){return e===t?n:e===n?t:e}function bV(e,t,n){return e==="start"?t:e==="end"?n:e}function pte(e,{inflateAmount:t},n){e.inflateAmount=t==="auto"?n===1?.33:0:t}class gte extends lm{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,n,i,r){return vV(t,n,i,r)}parseArrayData(t,n,i,r){return vV(t,n,i,r)}parseObjectData(t,n,i,r){const{iScale:a,vScale:l}=t,{xAxisKey:h="x",yAxisKey:s="y"}=this._parsing,p=a.axis==="x"?h:s,v=l.axis==="x"?h:s,x=[];let T,k,P,M;for(T=i,k=i+r;T<k;++T)M=n[T],P={},P[a.axis]=a.parse(qf(M,p),T),x.push(p6(qf(M,v),P,l,T));return x}updateRangeFromParsed(t,n,i,r){super.updateRangeFromParsed(t,n,i,r);const a=i._custom;a&&n===this._cachedMeta.vScale&&(t.min=Math.min(t.min,a.min),t.max=Math.max(t.max,a.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const n=this._cachedMeta,{iScale:i,vScale:r}=n,a=this.getParsed(t),l=a._custom,h=GE(l)?"["+l.start+", "+l.end+"]":""+r.getLabelForValue(a[r.axis]);return{label:""+i.getLabelForValue(a[i.axis]),value:h}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,t)}updateElements(t,n,i,r){const a=r==="reset",{index:l,_cachedMeta:{vScale:h}}=this,s=h.getBasePixel(),p=h.isHorizontal(),v=this._getRuler(),{sharedOptions:x,includeOptions:T}=this._getSharedOptions(n,r);for(let k=n;k<n+i;k++){const P=this.getParsed(k),M=a||Ri(P[h.axis])?{base:s,head:s}:this._calculateBarValuePixels(k),L=this._calculateBarIndexPixels(k,v),B=(P._stacks||{})[h.axis],F={horizontal:p,base:M.base,enableBorderRadius:!B||GE(P._custom)||l===B._top||l===B._bottom,x:p?M.head:L.center,y:p?L.center:M.head,height:p?L.size:Math.abs(M.size),width:p?Math.abs(M.size):L.size};T&&(F.options=x||this.resolveDataElementOptions(k,t[k].active?"active":r));const X=F.options||t[k].options;fte(F,X,B,l),pte(F,X,v.ratio),this.updateElement(t[k],k,F,r)}}_getStacks(t,n){const{iScale:i}=this._cachedMeta,r=i.getMatchingVisibleMetas(this._type).filter(v=>v.controller.options.grouped),a=i.options.stacked,l=[],h=this._cachedMeta.controller.getParsed(n),s=h&&h[i.axis],p=v=>{const x=v._parsed.find(k=>k[i.axis]===s),T=x&&x[v.vScale.axis];if(Ri(T)||isNaN(T))return!0};for(const v of r)if(!(n!==void 0&&p(v))&&((a===!1||l.indexOf(v.stack)===-1||a===void 0&&v.stack===void 0)&&l.push(v.stack),v.index===t))break;return l.length||l.push(void 0),l}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const t=this.chart.scales,n=this.chart.options.indexAxis;return Object.keys(t).filter(i=>t[i].axis===n).shift()}_getAxis(){const t={},n=this.getFirstScaleIdForIndexAxis();for(const i of this.chart.data.datasets)t[yi(this.chart.options.indexAxis==="x"?i.xAxisID:i.yAxisID,n)]=!0;return Object.keys(t)}_getStackIndex(t,n,i){const r=this._getStacks(t,i),a=n!==void 0?r.indexOf(n):-1;return a===-1?r.length-1:a}_getRuler(){const t=this.options,n=this._cachedMeta,i=n.iScale,r=[];let a,l;for(a=0,l=n.data.length;a<l;++a)r.push(i.getPixelForValue(this.getParsed(a)[i.axis],a));const h=t.barThickness;return{min:h||ate(n),pixels:r,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:t.grouped,ratio:h?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:n,_stacked:i,index:r},options:{base:a,minBarLength:l}}=this,h=a||0,s=this.getParsed(t),p=s._custom,v=GE(p);let x=s[n.axis],T=0,k=i?this.applyStack(n,s,i):x,P,M;k!==x&&(T=k-x,k=x),v&&(x=p.barStart,k=p.barEnd-p.barStart,x!==0&&qu(x)!==qu(p.barEnd)&&(T=0),T+=x);const L=!Ri(a)&&!v?a:T;let B=n.getPixelForValue(L);if(this.chart.getDataVisibility(t)?P=n.getPixelForValue(T+k):P=B,M=P-B,Math.abs(M)<l){M=dte(M,n,h)*l,x===h&&(B-=M/2);const F=n.getPixelForDecimal(0),X=n.getPixelForDecimal(1),J=Math.min(F,X),Q=Math.max(F,X);B=Math.max(Math.min(B,Q),J),P=B+M,i&&!v&&(s._stacks[n.axis]._visualValues[r]=n.getValueForPixel(P)-n.getValueForPixel(B))}if(B===n.getPixelForValue(h)){const F=qu(M)*n.getLineWidthForValue(h)/2;B+=F,M-=F}return{size:M,base:B,head:P,center:P+M/2}}_calculateBarIndexPixels(t,n){const i=n.scale,r=this.options,a=r.skipNull,l=yi(r.maxBarThickness,1/0);let h,s;const p=this._getAxisCount();if(n.grouped){const v=a?this._getStackCount(t):n.stackCount,x=r.barThickness==="flex"?cte(t,n,r,v*p):lte(t,n,r,v*p),T=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,k=this._getAxis().indexOf(yi(T,this.getFirstScaleIdForIndexAxis())),P=this._getStackIndex(this.index,this._cachedMeta.stack,a?t:void 0)+k;h=x.start+x.chunk*P+x.chunk/2,s=Math.min(l,x.chunk*x.ratio)}else h=i.getPixelForValue(this.getParsed(t)[i.axis],t),s=Math.min(l,n.min*n.ratio);return{base:h-s/2,head:h+s/2,center:h,size:s}}draw(){const t=this._cachedMeta,n=t.vScale,i=t.data,r=i.length;let a=0;for(;a<r;++a)this.getParsed(a)[n.axis]!==null&&!i[a].hidden&&i[a].draw(this._ctx)}}class _te extends lm{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,n,i,r){const a=super.parsePrimitiveData(t,n,i,r);for(let l=0;l<a.length;l++)a[l]._custom=this.resolveDataElementOptions(l+i).radius;return a}parseArrayData(t,n,i,r){const a=super.parseArrayData(t,n,i,r);for(let l=0;l<a.length;l++){const h=n[i+l];a[l]._custom=yi(h[2],this.resolveDataElementOptions(l+i).radius)}return a}parseObjectData(t,n,i,r){const a=super.parseObjectData(t,n,i,r);for(let l=0;l<a.length;l++){const h=n[i+l];a[l]._custom=yi(h&&h.r&&+h.r,this.resolveDataElementOptions(l+i).radius)}return a}getMaxOverflow(){const t=this._cachedMeta.data;let n=0;for(let i=t.length-1;i>=0;--i)n=Math.max(n,t[i].size(this.resolveDataElementOptions(i))/2);return n>0&&n}getLabelAndValue(t){const n=this._cachedMeta,i=this.chart.data.labels||[],{xScale:r,yScale:a}=n,l=this.getParsed(t),h=r.getLabelForValue(l.x),s=a.getLabelForValue(l.y),p=l._custom;return{label:i[t]||"",value:"("+h+", "+s+(p?", "+p:"")+")"}}update(t){const n=this._cachedMeta.data;this.updateElements(n,0,n.length,t)}updateElements(t,n,i,r){const a=r==="reset",{iScale:l,vScale:h}=this._cachedMeta,{sharedOptions:s,includeOptions:p}=this._getSharedOptions(n,r),v=l.axis,x=h.axis;for(let T=n;T<n+i;T++){const k=t[T],P=!a&&this.getParsed(T),M={},L=M[v]=a?l.getPixelForDecimal(.5):l.getPixelForValue(P[v]),B=M[x]=a?h.getBasePixel():h.getPixelForValue(P[x]);M.skip=isNaN(L)||isNaN(B),p&&(M.options=s||this.resolveDataElementOptions(T,k.active?"active":r),a&&(M.options.radius=0)),this.updateElement(k,T,M,r)}}resolveDataElementOptions(t,n){const i=this.getParsed(t);let r=super.resolveDataElementOptions(t,n);r.$shared&&(r=Object.assign({},r,{$shared:!1}));const a=r.radius;return n!=="active"&&(r.radius=0),r.radius+=yi(i&&i._custom,a),r}}function vte(e,t,n){let i=1,r=1,a=0,l=0;if(t<Zr){const h=e,s=h+t,p=Math.cos(h),v=Math.sin(h),x=Math.cos(s),T=Math.sin(s),k=(X,J,Q)=>Bb(X,h,s,!0)?1:Math.max(J,J*n,Q,Q*n),P=(X,J,Q)=>Bb(X,h,s,!0)?-1:Math.min(J,J*n,Q,Q*n),M=k(0,p,x),L=k(js,v,T),B=P(cr,p,x),F=P(cr+js,v,T);i=(M-B)/2,r=(L-F)/2,a=-(M+B)/2,l=-(L+F)/2}return{ratioX:i,ratioY:r,offsetX:a,offsetY:l}}class qA extends lm{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const n=t.data,{labels:{pointStyle:i,textAlign:r,color:a,useBorderRadius:l,borderRadius:h}}=t.legend.options;return n.labels.length&&n.datasets.length?n.labels.map((s,p)=>{const x=t.getDatasetMeta(0).controller.getStyle(p);return{text:s,fillStyle:x.backgroundColor,fontColor:a,hidden:!t.getDataVisibility(p),lineDash:x.borderDash,lineDashOffset:x.borderDashOffset,lineJoin:x.borderJoinStyle,lineWidth:x.borderWidth,strokeStyle:x.borderColor,textAlign:r,pointStyle:i,borderRadius:l&&(h||x.borderRadius),index:p}}):[]}},onClick(t,n,i){i.chart.toggleDataVisibility(n.index),i.chart.update()}}}};constructor(t,n){super(t,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,n){const i=this.getDataset().data,r=this._cachedMeta;if(this._parsing===!1)r._parsed=i;else{let a=s=>+i[s];if(Bi(i[t])){const{key:s="value"}=this._parsing;a=p=>+qf(i[p],s)}let l,h;for(l=t,h=t+n;l<h;++l)r._parsed[l]=a(l)}}_getRotation(){return ru(this.options.rotation-90)}_getCircumference(){return ru(this.options.circumference)}_getRotationExtents(){let t=Zr,n=-Zr;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const r=this.chart.getDatasetMeta(i).controller,a=r._getRotation(),l=r._getCircumference();t=Math.min(t,a),n=Math.max(n,a+l)}return{rotation:t,circumference:n-t}}update(t){const n=this.chart,{chartArea:i}=n,r=this._cachedMeta,a=r.data,l=this.getMaxBorderWidth()+this.getMaxOffset(a)+this.options.spacing,h=Math.max((Math.min(i.width,i.height)-l)/2,0),s=Math.min(IQ(this.options.cutout,h),1),p=this._getRingWeight(this.index),{circumference:v,rotation:x}=this._getRotationExtents(),{ratioX:T,ratioY:k,offsetX:P,offsetY:M}=vte(x,v,s),L=(i.width-l)/T,B=(i.height-l)/k,F=Math.max(Math.min(L,B)/2,0),X=$4(this.options.radius,F),J=Math.max(X*s,0),Q=(X-J)/this._getVisibleDatasetWeightTotal();this.offsetX=P*X,this.offsetY=M*X,r.total=this.calculateTotal(),this.outerRadius=X-Q*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-Q*p,0),this.updateElements(a,0,a.length,t)}_circumference(t,n){const i=this.options,r=this._cachedMeta,a=this._getCircumference();return n&&i.animation.animateRotate||!this.chart.getDataVisibility(t)||r._parsed[t]===null||r.data[t].hidden?0:this.calculateCircumference(r._parsed[t]*a/Zr)}updateElements(t,n,i,r){const a=r==="reset",l=this.chart,h=l.chartArea,p=l.options.animation,v=(h.left+h.right)/2,x=(h.top+h.bottom)/2,T=a&&p.animateScale,k=T?0:this.innerRadius,P=T?0:this.outerRadius,{sharedOptions:M,includeOptions:L}=this._getSharedOptions(n,r);let B=this._getRotation(),F;for(F=0;F<n;++F)B+=this._circumference(F,a);for(F=n;F<n+i;++F){const X=this._circumference(F,a),J=t[F],Q={x:v+this.offsetX,y:x+this.offsetY,startAngle:B,endAngle:B+X,circumference:X,outerRadius:P,innerRadius:k};L&&(Q.options=M||this.resolveDataElementOptions(F,J.active?"active":r)),B+=X,this.updateElement(J,F,Q,r)}}calculateTotal(){const t=this._cachedMeta,n=t.data;let i=0,r;for(r=0;r<n.length;r++){const a=t._parsed[r];a!==null&&!isNaN(a)&&this.chart.getDataVisibility(r)&&!n[r].hidden&&(i+=Math.abs(a))}return i}calculateCircumference(t){const n=this._cachedMeta.total;return n>0&&!isNaN(t)?Zr*(Math.abs(t)/n):0}getLabelAndValue(t){const n=this._cachedMeta,i=this.chart,r=i.data.labels||[],a=y0(n._parsed[t],i.options.locale);return{label:r[t]||"",value:a}}getMaxBorderWidth(t){let n=0;const i=this.chart;let r,a,l,h,s;if(!t){for(r=0,a=i.data.datasets.length;r<a;++r)if(i.isDatasetVisible(r)){l=i.getDatasetMeta(r),t=l.data,h=l.controller;break}}if(!t)return 0;for(r=0,a=t.length;r<a;++r)s=h.resolveDataElementOptions(r),s.borderAlign!=="inner"&&(n=Math.max(n,s.borderWidth||0,s.hoverBorderWidth||0));return n}getMaxOffset(t){let n=0;for(let i=0,r=t.length;i<r;++i){const a=this.resolveDataElementOptions(i);n=Math.max(n,a.offset||0,a.hoverOffset||0)}return n}_getRingWeightOffset(t){let n=0;for(let i=0;i<t;++i)this.chart.isDatasetVisible(i)&&(n+=this._getRingWeight(i));return n}_getRingWeight(t){return Math.max(yi(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class yte extends lm{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const n=this._cachedMeta,{dataset:i,data:r=[],_dataset:a}=n,l=this.chart._animationsDisabled;let{start:h,count:s}=Z4(n,r,l);this._drawStart=h,this._drawCount=s,Y4(n)&&(h=0,s=r.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!a._decimated,i.points=r;const p=this.resolveDatasetElementOptions(t);this.options.showLine||(p.borderWidth=0),p.segment=this.options.segment,this.updateElement(i,void 0,{animated:!l,options:p},t),this.updateElements(r,h,s,t)}updateElements(t,n,i,r){const a=r==="reset",{iScale:l,vScale:h,_stacked:s,_dataset:p}=this._cachedMeta,{sharedOptions:v,includeOptions:x}=this._getSharedOptions(n,r),T=l.axis,k=h.axis,{spanGaps:P,segment:M}=this.options,L=H_(P)?P:Number.POSITIVE_INFINITY,B=this.chart._animationsDisabled||a||r==="none",F=n+i,X=t.length;let J=n>0&&this.getParsed(n-1);for(let Q=0;Q<X;++Q){const re=t[Q],Z=B?re:{};if(Q<n||Q>=F){Z.skip=!0;continue}const $=this.getParsed(Q),H=Ri($[k]),W=Z[T]=l.getPixelForValue($[T],Q),te=Z[k]=a||H?h.getBasePixel():h.getPixelForValue(s?this.applyStack(h,$,s):$[k],Q);Z.skip=isNaN(W)||isNaN(te)||H,Z.stop=Q>0&&Math.abs($[T]-J[T])>L,M&&(Z.parsed=$,Z.raw=p.data[Q]),x&&(Z.options=v||this.resolveDataElementOptions(Q,re.active?"active":r)),B||this.updateElement(re,Q,Z,r),J=$}}getMaxOverflow(){const t=this._cachedMeta,n=t.dataset,i=n.options&&n.options.borderWidth||0,r=t.data||[];if(!r.length)return i;const a=r[0].size(this.resolveDataElementOptions(0)),l=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(i,a,l)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}class g6 extends lm{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const n=t.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:i,color:r}}=t.legend.options;return n.labels.map((a,l)=>{const s=t.getDatasetMeta(0).controller.getStyle(l);return{text:a,fillStyle:s.backgroundColor,strokeStyle:s.borderColor,fontColor:r,lineWidth:s.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(l),index:l}})}return[]}},onClick(t,n,i){i.chart.toggleDataVisibility(n.index),i.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(t,n){super(t,n),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const n=this._cachedMeta,i=this.chart,r=i.data.labels||[],a=y0(n._parsed[t].r,i.options.locale);return{label:r[t]||"",value:a}}parseObjectData(t,n,i,r){return s6.bind(this)(t,n,i,r)}update(t){const n=this._cachedMeta.data;this._updateRadius(),this.updateElements(n,0,n.length,t)}getMinMax(){const t=this._cachedMeta,n={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((i,r)=>{const a=this.getParsed(r).r;!isNaN(a)&&this.chart.getDataVisibility(r)&&(a<n.min&&(n.min=a),a>n.max&&(n.max=a))}),n}_updateRadius(){const t=this.chart,n=t.chartArea,i=t.options,r=Math.min(n.right-n.left,n.bottom-n.top),a=Math.max(r/2,0),l=Math.max(i.cutoutPercentage?a/100*i.cutoutPercentage:1,0),h=(a-l)/t.getVisibleDatasetCount();this.outerRadius=a-h*this.index,this.innerRadius=this.outerRadius-h}updateElements(t,n,i,r){const a=r==="reset",l=this.chart,s=l.options.animation,p=this._cachedMeta.rScale,v=p.xCenter,x=p.yCenter,T=p.getIndexAngle(0)-.5*cr;let k=T,P;const M=360/this.countVisibleElements();for(P=0;P<n;++P)k+=this._computeAngle(P,r,M);for(P=n;P<n+i;P++){const L=t[P];let B=k,F=k+this._computeAngle(P,r,M),X=l.getDataVisibility(P)?p.getDistanceFromCenterForValue(this.getParsed(P).r):0;k=F,a&&(s.animateScale&&(X=0),s.animateRotate&&(B=F=T));const J={x:v,y:x,innerRadius:0,outerRadius:X,startAngle:B,endAngle:F,options:this.resolveDataElementOptions(P,L.active?"active":r)};this.updateElement(L,P,J,r)}}countVisibleElements(){const t=this._cachedMeta;let n=0;return t.data.forEach((i,r)=>{!isNaN(this.getParsed(r).r)&&this.chart.getDataVisibility(r)&&n++}),n}_computeAngle(t,n,i){return this.chart.getDataVisibility(t)?ru(this.resolveDataElementOptions(t,n).angle||i):0}}class bte extends qA{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}class xte extends lm{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(t){const n=this._cachedMeta.vScale,i=this.getParsed(t);return{label:n.getLabels()[t],value:""+n.getLabelForValue(i[n.axis])}}parseObjectData(t,n,i,r){return s6.bind(this)(t,n,i,r)}update(t){const n=this._cachedMeta,i=n.dataset,r=n.data||[],a=n.iScale.getLabels();if(i.points=r,t!=="resize"){const l=this.resolveDatasetElementOptions(t);this.options.showLine||(l.borderWidth=0);const h={_loop:!0,_fullLoop:a.length===r.length,options:l};this.updateElement(i,void 0,h,t)}this.updateElements(r,0,r.length,t)}updateElements(t,n,i,r){const a=this._cachedMeta.rScale,l=r==="reset";for(let h=n;h<n+i;h++){const s=t[h],p=this.resolveDataElementOptions(h,s.active?"active":r),v=a.getPointPositionForValue(h,this.getParsed(h).r),x=l?a.xCenter:v.x,T=l?a.yCenter:v.y,k={x,y:T,angle:v.angle,skip:isNaN(x)||isNaN(T),options:p};this.updateElement(s,h,k,r)}}}class wte extends lm{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(t){const n=this._cachedMeta,i=this.chart.data.labels||[],{xScale:r,yScale:a}=n,l=this.getParsed(t),h=r.getLabelForValue(l.x),s=a.getLabelForValue(l.y);return{label:i[t]||"",value:"("+h+", "+s+")"}}update(t){const n=this._cachedMeta,{data:i=[]}=n,r=this.chart._animationsDisabled;let{start:a,count:l}=Z4(n,i,r);if(this._drawStart=a,this._drawCount=l,Y4(n)&&(a=0,l=i.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:h,_dataset:s}=n;h._chart=this.chart,h._datasetIndex=this.index,h._decimated=!!s._decimated,h.points=i;const p=this.resolveDatasetElementOptions(t);p.segment=this.options.segment,this.updateElement(h,void 0,{animated:!r,options:p},t)}else this.datasetElementType&&(delete n.dataset,this.datasetElementType=!1);this.updateElements(i,a,l,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,n,i,r){const a=r==="reset",{iScale:l,vScale:h,_stacked:s,_dataset:p}=this._cachedMeta,v=this.resolveDataElementOptions(n,r),x=this.getSharedOptions(v),T=this.includeOptions(r,x),k=l.axis,P=h.axis,{spanGaps:M,segment:L}=this.options,B=H_(M)?M:Number.POSITIVE_INFINITY,F=this.chart._animationsDisabled||a||r==="none";let X=n>0&&this.getParsed(n-1);for(let J=n;J<n+i;++J){const Q=t[J],re=this.getParsed(J),Z=F?Q:{},$=Ri(re[P]),H=Z[k]=l.getPixelForValue(re[k],J),W=Z[P]=a||$?h.getBasePixel():h.getPixelForValue(s?this.applyStack(h,re,s):re[P],J);Z.skip=isNaN(H)||isNaN(W)||$,Z.stop=J>0&&Math.abs(re[k]-X[k])>B,L&&(Z.parsed=re,Z.raw=p.data[J]),T&&(Z.options=x||this.resolveDataElementOptions(J,Q.active?"active":r)),F||this.updateElement(Q,J,Z,r),X=re}this.updateSharedOptions(x,r,v)}getMaxOverflow(){const t=this._cachedMeta,n=t.data||[];if(!this.options.showLine){let h=0;for(let s=n.length-1;s>=0;--s)h=Math.max(h,n[s].size(this.resolveDataElementOptions(s))/2);return h>0&&h}const i=t.dataset,r=i.options&&i.options.borderWidth||0;if(!n.length)return r;const a=n[0].size(this.resolveDataElementOptions(0)),l=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(r,a,l)/2}}var Tte=Object.freeze({__proto__:null,BarController:gte,BubbleController:_te,DoughnutController:qA,LineController:yte,PieController:bte,PolarAreaController:g6,RadarController:xte,ScatterController:wte});function ip(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class KA{static override(t){Object.assign(KA.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return ip()}parse(){return ip()}format(){return ip()}add(){return ip()}diff(){return ip()}startOf(){return ip()}endOf(){return ip()}}var Ste={_date:KA};function Ete(e,t,n,i){const{controller:r,data:a,_sorted:l}=e,h=r._cachedMeta.iScale,s=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(h&&t===h.axis&&t!=="r"&&l&&a.length){const p=h._reversePixels?UQ:rh;if(i){if(r._sharedOptions){const v=a[0],x=typeof v.getRange=="function"&&v.getRange(t);if(x){const T=p(a,t,n-x),k=p(a,t,n+x);return{lo:T.lo,hi:k.hi}}}}else{const v=p(a,t,n);if(s){const{vScale:x}=r._cachedMeta,{_parsed:T}=e,k=T.slice(0,v.lo+1).reverse().findIndex(M=>!Ri(M[x.axis]));v.lo-=Math.max(0,k);const P=T.slice(v.hi).findIndex(M=>!Ri(M[x.axis]));v.hi+=Math.max(0,P)}return v}}return{lo:0,hi:a.length-1}}function hT(e,t,n,i,r){const a=e.getSortedVisibleDatasetMetas(),l=n[t];for(let h=0,s=a.length;h<s;++h){const{index:p,data:v}=a[h],{lo:x,hi:T}=Ete(a[h],t,l,r);for(let k=x;k<=T;++k){const P=v[k];P.skip||i(P,p,k)}}}function Cte(e){const t=e.indexOf("x")!==-1,n=e.indexOf("y")!==-1;return function(i,r){const a=t?Math.abs(i.x-r.x):0,l=n?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(a,2)+Math.pow(l,2))}}function qE(e,t,n,i,r){const a=[];return!r&&!e.isPointInArea(t)||hT(e,n,t,function(h,s,p){!r&&!sh(h,e.chartArea,0)||h.inRange(t.x,t.y,i)&&a.push({element:h,datasetIndex:s,index:p})},!0),a}function kte(e,t,n,i){let r=[];function a(l,h,s){const{startAngle:p,endAngle:v}=l.getProps(["startAngle","endAngle"],i),{angle:x}=H4(l,{x:t.x,y:t.y});Bb(x,p,v)&&r.push({element:l,datasetIndex:h,index:s})}return hT(e,n,t,a),r}function Ite(e,t,n,i,r,a){let l=[];const h=Cte(n);let s=Number.POSITIVE_INFINITY;function p(v,x,T){const k=v.inRange(t.x,t.y,r);if(i&&!k)return;const P=v.getCenterPoint(r);if(!(!!a||e.isPointInArea(P))&&!k)return;const L=h(t,P);L<s?(l=[{element:v,datasetIndex:x,index:T}],s=L):L===s&&l.push({element:v,datasetIndex:x,index:T})}return hT(e,n,t,p),l}function KE(e,t,n,i,r,a){return!a&&!e.isPointInArea(t)?[]:n==="r"&&!i?kte(e,t,n,r):Ite(e,t,n,i,r,a)}function xV(e,t,n,i,r){const a=[],l=n==="x"?"inXRange":"inYRange";let h=!1;return hT(e,n,t,(s,p,v)=>{s[l]&&s[l](t[n],r)&&(a.push({element:s,datasetIndex:p,index:v}),h=h||s.inRange(t.x,t.y,r))}),i&&!h?[]:a}var Ate={modes:{index(e,t,n,i){const r=lp(t,e),a=n.axis||"x",l=n.includeInvisible||!1,h=n.intersect?qE(e,r,a,i,l):KE(e,r,a,!1,i,l),s=[];return h.length?(e.getSortedVisibleDatasetMetas().forEach(p=>{const v=h[0].index,x=p.data[v];x&&!x.skip&&s.push({element:x,datasetIndex:p.index,index:v})}),s):[]},dataset(e,t,n,i){const r=lp(t,e),a=n.axis||"xy",l=n.includeInvisible||!1;let h=n.intersect?qE(e,r,a,i,l):KE(e,r,a,!1,i,l);if(h.length>0){const s=h[0].datasetIndex,p=e.getDatasetMeta(s).data;h=[];for(let v=0;v<p.length;++v)h.push({element:p[v],datasetIndex:s,index:v})}return h},point(e,t,n,i){const r=lp(t,e),a=n.axis||"xy",l=n.includeInvisible||!1;return qE(e,r,a,i,l)},nearest(e,t,n,i){const r=lp(t,e),a=n.axis||"xy",l=n.includeInvisible||!1;return KE(e,r,a,n.intersect,i,l)},x(e,t,n,i){const r=lp(t,e);return xV(e,r,"x",n.intersect,i)},y(e,t,n,i){const r=lp(t,e);return xV(e,r,"y",n.intersect,i)}}};const _6=["left","top","right","bottom"];function _y(e,t){return e.filter(n=>n.pos===t)}function wV(e,t){return e.filter(n=>_6.indexOf(n.pos)===-1&&n.box.axis===t)}function vy(e,t){return e.sort((n,i)=>{const r=t?i:n,a=t?n:i;return r.weight===a.weight?r.index-a.index:r.weight-a.weight})}function Pte(e){const t=[];let n,i,r,a,l,h;for(n=0,i=(e||[]).length;n<i;++n)r=e[n],{position:a,options:{stack:l,stackWeight:h=1}}=r,t.push({index:n,box:r,pos:a,horizontal:r.isHorizontal(),weight:r.weight,stack:l&&a+l,stackWeight:h});return t}function Mte(e){const t={};for(const n of e){const{stack:i,pos:r,stackWeight:a}=n;if(!i||!_6.includes(r))continue;const l=t[i]||(t[i]={count:0,placed:0,weight:0,size:0});l.count++,l.weight+=a}return t}function Dte(e,t){const n=Mte(e),{vBoxMaxWidth:i,hBoxMaxHeight:r}=t;let a,l,h;for(a=0,l=e.length;a<l;++a){h=e[a];const{fullSize:s}=h.box,p=n[h.stack],v=p&&h.stackWeight/p.weight;h.horizontal?(h.width=v?v*i:s&&t.availableWidth,h.height=r):(h.width=i,h.height=v?v*r:s&&t.availableHeight)}return n}function Rte(e){const t=Pte(e),n=vy(t.filter(p=>p.box.fullSize),!0),i=vy(_y(t,"left"),!0),r=vy(_y(t,"right")),a=vy(_y(t,"top"),!0),l=vy(_y(t,"bottom")),h=wV(t,"x"),s=wV(t,"y");return{fullSize:n,leftAndTop:i.concat(a),rightAndBottom:r.concat(s).concat(l).concat(h),chartArea:_y(t,"chartArea"),vertical:i.concat(r).concat(s),horizontal:a.concat(l).concat(h)}}function TV(e,t,n,i){return Math.max(e[n],t[n])+Math.max(e[i],t[i])}function v6(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function Lte(e,t,n,i){const{pos:r,box:a}=n,l=e.maxPadding;if(!Bi(r)){n.size&&(e[r]-=n.size);const x=i[n.stack]||{size:0,count:1};x.size=Math.max(x.size,n.horizontal?a.height:a.width),n.size=x.size/x.count,e[r]+=n.size}a.getPadding&&v6(l,a.getPadding());const h=Math.max(0,t.outerWidth-TV(l,e,"left","right")),s=Math.max(0,t.outerHeight-TV(l,e,"top","bottom")),p=h!==e.w,v=s!==e.h;return e.w=h,e.h=s,n.horizontal?{same:p,other:v}:{same:v,other:p}}function Ote(e){const t=e.maxPadding;function n(i){const r=Math.max(t[i]-e[i],0);return e[i]+=r,r}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}function Vte(e,t){const n=t.maxPadding;function i(r){const a={left:0,top:0,right:0,bottom:0};return r.forEach(l=>{a[l]=Math.max(t[l],n[l])}),a}return i(e?["left","right"]:["top","bottom"])}function ky(e,t,n,i){const r=[];let a,l,h,s,p,v;for(a=0,l=e.length,p=0;a<l;++a){h=e[a],s=h.box,s.update(h.width||t.w,h.height||t.h,Vte(h.horizontal,t));const{same:x,other:T}=Lte(t,n,h,i);p|=x&&r.length,v=v||T,s.fullSize||r.push(h)}return p&&ky(r,t,n,i)||v}function Bx(e,t,n,i,r){e.top=n,e.left=t,e.right=t+i,e.bottom=n+r,e.width=i,e.height=r}function SV(e,t,n,i){const r=n.padding;let{x:a,y:l}=t;for(const h of e){const s=h.box,p=i[h.stack]||{placed:0,weight:1},v=h.stackWeight/p.weight||1;if(h.horizontal){const x=t.w*v,T=p.size||s.height;Vb(p.start)&&(l=p.start),s.fullSize?Bx(s,r.left,l,n.outerWidth-r.right-r.left,T):Bx(s,t.left+p.placed,l,x,T),p.start=l,p.placed+=x,l=s.bottom}else{const x=t.h*v,T=p.size||s.width;Vb(p.start)&&(a=p.start),s.fullSize?Bx(s,a,r.top,T,n.outerHeight-r.bottom-r.top):Bx(s,a,t.top+p.placed,T,x),p.start=a,p.placed+=x,a=s.right}}t.x=a,t.y=l}var Va={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(n){t.draw(n)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;n!==-1&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,i){if(!e)return;const r=Na(e.options.layout.padding),a=Math.max(t-r.width,0),l=Math.max(n-r.height,0),h=Rte(e.boxes),s=h.vertical,p=h.horizontal;kr(e.boxes,M=>{typeof M.beforeLayout=="function"&&M.beforeLayout()});const v=s.reduce((M,L)=>L.box.options&&L.box.options.display===!1?M:M+1,0)||1,x=Object.freeze({outerWidth:t,outerHeight:n,padding:r,availableWidth:a,availableHeight:l,vBoxMaxWidth:a/2/v,hBoxMaxHeight:l/2}),T=Object.assign({},r);v6(T,Na(i));const k=Object.assign({maxPadding:T,w:a,h:l,x:r.left,y:r.top},r),P=Dte(s.concat(p),x);ky(h.fullSize,k,x,P),ky(s,k,x,P),ky(p,k,x,P)&&ky(s,k,x,P),Ote(k),SV(h.leftAndTop,k,x,P),k.x+=k.w,k.y+=k.h,SV(h.rightAndBottom,k,x,P),e.chartArea={left:k.left,top:k.top,right:k.left+k.w,bottom:k.top+k.h,height:k.h,width:k.w},kr(h.chartArea,M=>{const L=M.box;Object.assign(L,e.chartArea),L.update(k.w,k.h,{left:0,top:0,right:0,bottom:0})})}};class y6{acquireContext(t,n){}releaseContext(t){return!1}addEventListener(t,n,i){}removeEventListener(t,n,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,n,i,r){return n=Math.max(0,n||t.width),i=i||t.height,{width:n,height:Math.max(0,r?Math.floor(n/r):i)}}isAttached(t){return!0}updateConfig(t){}}class Bte extends y6{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const uw="$chartjs",Fte={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},EV=e=>e===null||e==="";function zte(e,t){const n=e.style,i=e.getAttribute("height"),r=e.getAttribute("width");if(e[uw]={initial:{height:i,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",EV(r)){const a=lV(e,"width");a!==void 0&&(e.width=a)}if(EV(i))if(e.style.height==="")e.height=e.width/(t||2);else{const a=lV(e,"height");a!==void 0&&(e.height=a)}return e}const b6=Lee?{passive:!0}:!1;function Nte(e,t,n){e&&e.addEventListener(t,n,b6)}function Ute(e,t,n){e&&e.canvas&&e.canvas.removeEventListener(t,n,b6)}function $te(e,t){const n=Fte[e.type]||e.type,{x:i,y:r}=lp(e,t);return{type:n,chart:t,native:e,x:i!==void 0?i:null,y:r!==void 0?r:null}}function a1(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function jte(e,t,n){const i=e.canvas,r=new MutationObserver(a=>{let l=!1;for(const h of a)l=l||a1(h.addedNodes,i),l=l&&!a1(h.removedNodes,i);l&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}function Wte(e,t,n){const i=e.canvas,r=new MutationObserver(a=>{let l=!1;for(const h of a)l=l||a1(h.removedNodes,i),l=l&&!a1(h.addedNodes,i);l&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}const zb=new Map;let CV=0;function x6(){const e=window.devicePixelRatio;e!==CV&&(CV=e,zb.forEach((t,n)=>{n.currentDevicePixelRatio!==e&&t()}))}function Hte(e,t){zb.size||window.addEventListener("resize",x6),zb.set(e,t)}function Gte(e){zb.delete(e),zb.size||window.removeEventListener("resize",x6)}function qte(e,t,n){const i=e.canvas,r=i&&GA(i);if(!r)return;const a=X4((h,s)=>{const p=r.clientWidth;n(h,s),p<r.clientWidth&&n()},window),l=new ResizeObserver(h=>{const s=h[0],p=s.contentRect.width,v=s.contentRect.height;p===0&&v===0||a(p,v)});return l.observe(r),Hte(e,a),l}function XE(e,t,n){n&&n.disconnect(),t==="resize"&&Gte(e)}function Kte(e,t,n){const i=e.canvas,r=X4(a=>{e.ctx!==null&&n($te(a,e))},e);return Nte(i,t,r),r}class Xte extends y6{acquireContext(t,n){const i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(zte(t,n),i):null}releaseContext(t){const n=t.canvas;if(!n[uw])return!1;const i=n[uw].initial;["height","width"].forEach(a=>{const l=i[a];Ri(l)?n.removeAttribute(a):n.setAttribute(a,l)});const r=i.style||{};return Object.keys(r).forEach(a=>{n.style[a]=r[a]}),n.width=n.width,delete n[uw],!0}addEventListener(t,n,i){this.removeEventListener(t,n);const r=t.$proxies||(t.$proxies={}),l={attach:jte,detach:Wte,resize:qte}[n]||Kte;r[n]=l(t,n,i)}removeEventListener(t,n){const i=t.$proxies||(t.$proxies={}),r=i[n];if(!r)return;({attach:XE,detach:XE,resize:XE}[n]||Ute)(t,n,r),i[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,n,i,r){return Ree(t,n,i,r)}isAttached(t){const n=t&&GA(t);return!!(n&&n.isConnected)}}function Zte(e){return!HA()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?Bte:Xte}let Ah=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){const{x:n,y:i}=this.getProps(["x","y"],t);return{x:n,y:i}}hasValue(){return H_(this.x)&&H_(this.y)}getProps(t,n){const i=this.$animations;if(!n||!i)return this;const r={};return t.forEach(a=>{r[a]=i[a]&&i[a].active()?i[a]._to:this[a]}),r}};function Yte(e,t){const n=e.options.ticks,i=Jte(e),r=Math.min(n.maxTicksLimit||i,i),a=n.major.enabled?ene(t):[],l=a.length,h=a[0],s=a[l-1],p=[];if(l>r)return tne(t,p,a,l/r),p;const v=Qte(a,t,r);if(l>0){let x,T;const k=l>1?Math.round((s-h)/(l-1)):null;for(Fx(t,p,v,Ri(k)?0:h-k,h),x=0,T=l-1;x<T;x++)Fx(t,p,v,a[x],a[x+1]);return Fx(t,p,v,s,Ri(k)?t.length:s+k),p}return Fx(t,p,v),p}function Jte(e){const t=e.options.offset,n=e._tickSize(),i=e._length/n+(t?0:1),r=e._maxLength/n;return Math.floor(Math.min(i,r))}function Qte(e,t,n){const i=nne(e),r=t.length/n;if(!i)return Math.max(r,1);const a=VQ(i);for(let l=0,h=a.length-1;l<h;l++){const s=a[l];if(s>r)return s}return Math.max(r,1)}function ene(e){const t=[];let n,i;for(n=0,i=e.length;n<i;n++)e[n].major&&t.push(n);return t}function tne(e,t,n,i){let r=0,a=n[0],l;for(i=Math.ceil(i),l=0;l<e.length;l++)l===a&&(t.push(e[l]),r++,a=n[r*i])}function Fx(e,t,n,i,r){const a=yi(i,0),l=Math.min(yi(r,e.length),e.length);let h=0,s,p,v;for(n=Math.ceil(n),r&&(s=r-i,n=s/Math.floor(s/n)),v=a;v<0;)h++,v=Math.round(a+h*n);for(p=Math.max(a,0);p<l;p++)p===v&&(t.push(e[p]),h++,v=Math.round(a+h*n))}function nne(e){const t=e.length;let n,i;if(t<2)return!1;for(i=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==i)return!1;return i}const ine=e=>e==="left"?"right":e==="right"?"left":e,kV=(e,t,n)=>t==="top"||t==="left"?e[t]+n:e[t]-n,IV=(e,t)=>Math.min(t||e,e);function AV(e,t){const n=[],i=e.length/t,r=e.length;let a=0;for(;a<r;a+=i)n.push(e[Math.floor(a)]);return n}function rne(e,t,n){const i=e.ticks.length,r=Math.min(t,i-1),a=e._startPixel,l=e._endPixel,h=1e-6;let s=e.getPixelForTick(r),p;if(!(n&&(i===1?p=Math.max(s-a,l-s):t===0?p=(e.getPixelForTick(1)-s)/2:p=(s-e.getPixelForTick(r-1))/2,s+=r<t?p:-p,s<a-h||s>l+h)))return s}function sne(e,t){kr(e,n=>{const i=n.gc,r=i.length/2;let a;if(r>t){for(a=0;a<r;++a)delete n.data[i[a]];i.splice(0,r)}})}function yy(e){return e.drawTicks?e.tickLength:0}function PV(e,t){if(!e.display)return 0;const n=fo(e.font,t),i=Na(e.padding);return(os(e.text)?e.text.length:1)*n.lineHeight+i.height}function one(e,t){return am(e,{scale:t,type:"scale"})}function ane(e,t,n){return am(e,{tick:n,index:t,type:"tick"})}function lne(e,t,n){let i=zA(e);return(n&&t!=="right"||!n&&t==="right")&&(i=ine(i)),i}function cne(e,t,n,i){const{top:r,left:a,bottom:l,right:h,chart:s}=e,{chartArea:p,scales:v}=s;let x=0,T,k,P;const M=l-r,L=h-a;if(e.isHorizontal()){if(k=Ea(i,a,h),Bi(n)){const B=Object.keys(n)[0],F=n[B];P=v[B].getPixelForValue(F)+M-t}else n==="center"?P=(p.bottom+p.top)/2+M-t:P=kV(e,n,t);T=h-a}else{if(Bi(n)){const B=Object.keys(n)[0],F=n[B];k=v[B].getPixelForValue(F)-L+t}else n==="center"?k=(p.left+p.right)/2-L+t:k=kV(e,n,t);P=Ea(i,l,r),x=n==="left"?-js:js}return{titleX:k,titleY:P,maxWidth:T,rotation:x}}class og extends Ah{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,n){return t}getUserBounds(){let{_userMin:t,_userMax:n,_suggestedMin:i,_suggestedMax:r}=this;return t=Gl(t,Number.POSITIVE_INFINITY),n=Gl(n,Number.NEGATIVE_INFINITY),i=Gl(i,Number.POSITIVE_INFINITY),r=Gl(r,Number.NEGATIVE_INFINITY),{min:Gl(t,i),max:Gl(n,r),minDefined:Ds(t),maxDefined:Ds(n)}}getMinMax(t){let{min:n,max:i,minDefined:r,maxDefined:a}=this.getUserBounds(),l;if(r&&a)return{min:n,max:i};const h=this.getMatchingVisibleMetas();for(let s=0,p=h.length;s<p;++s)l=h[s].controller.getMinMax(this,t),r||(n=Math.min(n,l.min)),a||(i=Math.max(i,l.max));return n=a&&n>i?i:n,i=r&&n>i?n:i,{min:Gl(n,Gl(i,n)),max:Gl(i,Gl(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Hr(this.options.beforeUpdate,[this])}update(t,n,i){const{beginAtZero:r,grace:a,ticks:l}=this.options,h=l.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=n,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=dee(this,a,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const s=h<this.ticks.length;this._convertTicksToLabels(s?AV(this.ticks,h):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),l.display&&(l.autoSkip||l.source==="auto")&&(this.ticks=Yte(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),s&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,n,i;this.isHorizontal()?(n=this.left,i=this.right):(n=this.top,i=this.bottom,t=!t),this._startPixel=n,this._endPixel=i,this._reversePixels=t,this._length=i-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Hr(this.options.afterUpdate,[this])}beforeSetDimensions(){Hr(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Hr(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Hr(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Hr(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const n=this.options.ticks;let i,r,a;for(i=0,r=t.length;i<r;i++)a=t[i],a.label=Hr(n.callback,[a.value,i,t],this)}afterTickToLabelConversion(){Hr(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Hr(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,n=t.ticks,i=IV(this.ticks.length,t.ticks.maxTicksLimit),r=n.minRotation||0,a=n.maxRotation;let l=r,h,s,p;if(!this._isVisible()||!n.display||r>=a||i<=1||!this.isHorizontal()){this.labelRotation=r;return}const v=this._getLabelSizes(),x=v.widest.width,T=v.highest.height,k=Oo(this.chart.width-x,0,this.maxWidth);h=t.offset?this.maxWidth/i:k/(i-1),x+6>h&&(h=k/(i-(t.offset?.5:1)),s=this.maxHeight-yy(t.grid)-n.padding-PV(t.title,this.chart.options.font),p=Math.sqrt(x*x+T*T),l=BA(Math.min(Math.asin(Oo((v.highest.height+6)/h,-1,1)),Math.asin(Oo(s/p,-1,1))-Math.asin(Oo(T/p,-1,1)))),l=Math.max(r,Math.min(a,l))),this.labelRotation=l}afterCalculateLabelRotation(){Hr(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Hr(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:n,options:{ticks:i,title:r,grid:a}}=this,l=this._isVisible(),h=this.isHorizontal();if(l){const s=PV(r,n.options.font);if(h?(t.width=this.maxWidth,t.height=yy(a)+s):(t.height=this.maxHeight,t.width=yy(a)+s),i.display&&this.ticks.length){const{first:p,last:v,widest:x,highest:T}=this._getLabelSizes(),k=i.padding*2,P=ru(this.labelRotation),M=Math.cos(P),L=Math.sin(P);if(h){const B=i.mirror?0:L*x.width+M*T.height;t.height=Math.min(this.maxHeight,t.height+B+k)}else{const B=i.mirror?0:M*x.width+L*T.height;t.width=Math.min(this.maxWidth,t.width+B+k)}this._calculatePadding(p,v,L,M)}}this._handleMargins(),h?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,n,i,r){const{ticks:{align:a,padding:l},position:h}=this.options,s=this.labelRotation!==0,p=h!=="top"&&this.axis==="x";if(this.isHorizontal()){const v=this.getPixelForTick(0)-this.left,x=this.right-this.getPixelForTick(this.ticks.length-1);let T=0,k=0;s?p?(T=r*t.width,k=i*n.height):(T=i*t.height,k=r*n.width):a==="start"?k=n.width:a==="end"?T=t.width:a!=="inner"&&(T=t.width/2,k=n.width/2),this.paddingLeft=Math.max((T-v+l)*this.width/(this.width-v),0),this.paddingRight=Math.max((k-x+l)*this.width/(this.width-x),0)}else{let v=n.height/2,x=t.height/2;a==="start"?(v=0,x=t.height):a==="end"&&(v=n.height,x=0),this.paddingTop=v+l,this.paddingBottom=x+l}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Hr(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:n}=this.options;return n==="top"||n==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let n,i;for(n=0,i=t.length;n<i;n++)Ri(t[n].label)&&(t.splice(n,1),i--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const n=this.options.ticks.sampleSize;let i=this.ticks;n<i.length&&(i=AV(i,n)),this._labelSizes=t=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,n,i){const{ctx:r,_longestTextCache:a}=this,l=[],h=[],s=Math.floor(n/IV(n,i));let p=0,v=0,x,T,k,P,M,L,B,F,X,J,Q;for(x=0;x<n;x+=s){if(P=t[x].label,M=this._resolveTickFontOptions(x),r.font=L=M.string,B=a[L]=a[L]||{data:{},gc:[]},F=M.lineHeight,X=J=0,!Ri(P)&&!os(P))X=s1(r,B.data,B.gc,X,P),J=F;else if(os(P))for(T=0,k=P.length;T<k;++T)Q=P[T],!Ri(Q)&&!os(Q)&&(X=s1(r,B.data,B.gc,X,Q),J+=F);l.push(X),h.push(J),p=Math.max(X,p),v=Math.max(J,v)}sne(a,n);const re=l.indexOf(p),Z=h.indexOf(v),$=H=>({width:l[H]||0,height:h[H]||0});return{first:$(0),last:$(n-1),widest:$(re),highest:$(Z),widths:l,heights:h}}getLabelForValue(t){return t}getPixelForValue(t,n){return NaN}getValueForPixel(t){}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const n=this._startPixel+t*this._length;return NQ(this._alignToPixels?np(this.chart,n,0):n)}getDecimalForPixel(t){const n=(t-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:n}=this;return t<0&&n<0?n:t>0&&n>0?t:0}getContext(t){const n=this.ticks||[];if(t>=0&&t<n.length){const i=n[t];return i.$context||(i.$context=ane(this.getContext(),t,i))}return this.$context||(this.$context=one(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,n=ru(this.labelRotation),i=Math.abs(Math.cos(n)),r=Math.abs(Math.sin(n)),a=this._getLabelSizes(),l=t.autoSkipPadding||0,h=a?a.widest.width+l:0,s=a?a.highest.height+l:0;return this.isHorizontal()?s*i>h*r?h/i:s/r:s*r<h*i?s/i:h/r}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const n=this.axis,i=this.chart,r=this.options,{grid:a,position:l,border:h}=r,s=a.offset,p=this.isHorizontal(),x=this.ticks.length+(s?1:0),T=yy(a),k=[],P=h.setContext(this.getContext()),M=P.display?P.width:0,L=M/2,B=function(Ve){return np(i,Ve,M)};let F,X,J,Q,re,Z,$,H,W,te,Y,ne;if(l==="top")F=B(this.bottom),Z=this.bottom-T,H=F-L,te=B(t.top)+L,ne=t.bottom;else if(l==="bottom")F=B(this.top),te=t.top,ne=B(t.bottom)-L,Z=F+L,H=this.top+T;else if(l==="left")F=B(this.right),re=this.right-T,$=F-L,W=B(t.left)+L,Y=t.right;else if(l==="right")F=B(this.left),W=t.left,Y=B(t.right)-L,re=F+L,$=this.left+T;else if(n==="x"){if(l==="center")F=B((t.top+t.bottom)/2+.5);else if(Bi(l)){const Ve=Object.keys(l)[0],Ge=l[Ve];F=B(this.chart.scales[Ve].getPixelForValue(Ge))}te=t.top,ne=t.bottom,Z=F+L,H=Z+T}else if(n==="y"){if(l==="center")F=B((t.left+t.right)/2);else if(Bi(l)){const Ve=Object.keys(l)[0],Ge=l[Ve];F=B(this.chart.scales[Ve].getPixelForValue(Ge))}re=F-L,$=re-T,W=t.left,Y=t.right}const Se=yi(r.ticks.maxTicksLimit,x),Fe=Math.max(1,Math.ceil(x/Se));for(X=0;X<x;X+=Fe){const Ve=this.getContext(X),Ge=a.setContext(Ve),je=h.setContext(Ve),Ae=Ge.lineWidth,Ke=Ge.color,ve=je.dash||[],Le=je.dashOffset,We=Ge.tickWidth,ct=Ge.tickColor,ut=Ge.tickBorderDash||[],rt=Ge.tickBorderDashOffset;J=rne(this,X,s),J!==void 0&&(Q=np(i,J,Ae),p?re=$=W=Y=Q:Z=H=te=ne=Q,k.push({tx1:re,ty1:Z,tx2:$,ty2:H,x1:W,y1:te,x2:Y,y2:ne,width:Ae,color:Ke,borderDash:ve,borderDashOffset:Le,tickWidth:We,tickColor:ct,tickBorderDash:ut,tickBorderDashOffset:rt}))}return this._ticksLength=x,this._borderValue=F,k}_computeLabelItems(t){const n=this.axis,i=this.options,{position:r,ticks:a}=i,l=this.isHorizontal(),h=this.ticks,{align:s,crossAlign:p,padding:v,mirror:x}=a,T=yy(i.grid),k=T+v,P=x?-v:k,M=-ru(this.labelRotation),L=[];let B,F,X,J,Q,re,Z,$,H,W,te,Y,ne="middle";if(r==="top")re=this.bottom-P,Z=this._getXAxisLabelAlignment();else if(r==="bottom")re=this.top+P,Z=this._getXAxisLabelAlignment();else if(r==="left"){const Fe=this._getYAxisLabelAlignment(T);Z=Fe.textAlign,Q=Fe.x}else if(r==="right"){const Fe=this._getYAxisLabelAlignment(T);Z=Fe.textAlign,Q=Fe.x}else if(n==="x"){if(r==="center")re=(t.top+t.bottom)/2+k;else if(Bi(r)){const Fe=Object.keys(r)[0],Ve=r[Fe];re=this.chart.scales[Fe].getPixelForValue(Ve)+k}Z=this._getXAxisLabelAlignment()}else if(n==="y"){if(r==="center")Q=(t.left+t.right)/2-k;else if(Bi(r)){const Fe=Object.keys(r)[0],Ve=r[Fe];Q=this.chart.scales[Fe].getPixelForValue(Ve)}Z=this._getYAxisLabelAlignment(T).textAlign}n==="y"&&(s==="start"?ne="top":s==="end"&&(ne="bottom"));const Se=this._getLabelSizes();for(B=0,F=h.length;B<F;++B){X=h[B],J=X.label;const Fe=a.setContext(this.getContext(B));$=this.getPixelForTick(B)+a.labelOffset,H=this._resolveTickFontOptions(B),W=H.lineHeight,te=os(J)?J.length:1;const Ve=te/2,Ge=Fe.color,je=Fe.textStrokeColor,Ae=Fe.textStrokeWidth;let Ke=Z;l?(Q=$,Z==="inner"&&(B===F-1?Ke=this.options.reverse?"left":"right":B===0?Ke=this.options.reverse?"right":"left":Ke="center"),r==="top"?p==="near"||M!==0?Y=-te*W+W/2:p==="center"?Y=-Se.highest.height/2-Ve*W+W:Y=-Se.highest.height+W/2:p==="near"||M!==0?Y=W/2:p==="center"?Y=Se.highest.height/2-Ve*W:Y=Se.highest.height-te*W,x&&(Y*=-1),M!==0&&!Fe.showLabelBackdrop&&(Q+=W/2*Math.sin(M))):(re=$,Y=(1-te)*W/2);let ve;if(Fe.showLabelBackdrop){const Le=Na(Fe.backdropPadding),We=Se.heights[B],ct=Se.widths[B];let ut=Y-Le.top,rt=0-Le.left;switch(ne){case"middle":ut-=We/2;break;case"bottom":ut-=We;break}switch(Z){case"center":rt-=ct/2;break;case"right":rt-=ct;break;case"inner":B===F-1?rt-=ct:B>0&&(rt-=ct/2);break}ve={left:rt,top:ut,width:ct+Le.width,height:We+Le.height,color:Fe.backdropColor}}L.push({label:J,font:H,textOffset:Y,options:{rotation:M,color:Ge,strokeColor:je,strokeWidth:Ae,textAlign:Ke,textBaseline:ne,translation:[Q,re],backdrop:ve}})}return L}_getXAxisLabelAlignment(){const{position:t,ticks:n}=this.options;if(-ru(this.labelRotation))return t==="top"?"left":"right";let r="center";return n.align==="start"?r="left":n.align==="end"?r="right":n.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(t){const{position:n,ticks:{crossAlign:i,mirror:r,padding:a}}=this.options,l=this._getLabelSizes(),h=t+a,s=l.widest.width;let p,v;return n==="left"?r?(v=this.right+a,i==="near"?p="left":i==="center"?(p="center",v+=s/2):(p="right",v+=s)):(v=this.right-h,i==="near"?p="right":i==="center"?(p="center",v-=s/2):(p="left",v=this.left)):n==="right"?r?(v=this.left+a,i==="near"?p="right":i==="center"?(p="center",v-=s/2):(p="left",v-=s)):(v=this.left+h,i==="near"?p="left":i==="center"?(p="center",v+=s/2):(p="right",v=this.right)):p="right",{textAlign:p,x:v}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:n},left:i,top:r,width:a,height:l}=this;n&&(t.save(),t.fillStyle=n,t.fillRect(i,r,a,l),t.restore())}getLineWidthForValue(t){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const r=this.ticks.findIndex(a=>a.value===t);return r>=0?n.setContext(this.getContext(r)).lineWidth:0}drawGrid(t){const n=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let a,l;const h=(s,p,v)=>{!v.width||!v.color||(i.save(),i.lineWidth=v.width,i.strokeStyle=v.color,i.setLineDash(v.borderDash||[]),i.lineDashOffset=v.borderDashOffset,i.beginPath(),i.moveTo(s.x,s.y),i.lineTo(p.x,p.y),i.stroke(),i.restore())};if(n.display)for(a=0,l=r.length;a<l;++a){const s=r[a];n.drawOnChartArea&&h({x:s.x1,y:s.y1},{x:s.x2,y:s.y2},s),n.drawTicks&&h({x:s.tx1,y:s.ty1},{x:s.tx2,y:s.ty2},{color:s.tickColor,width:s.tickWidth,borderDash:s.tickBorderDash,borderDashOffset:s.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:n,options:{border:i,grid:r}}=this,a=i.setContext(this.getContext()),l=i.display?a.width:0;if(!l)return;const h=r.setContext(this.getContext(0)).lineWidth,s=this._borderValue;let p,v,x,T;this.isHorizontal()?(p=np(t,this.left,l)-l/2,v=np(t,this.right,h)+h/2,x=T=s):(x=np(t,this.top,l)-l/2,T=np(t,this.bottom,h)+h/2,p=v=s),n.save(),n.lineWidth=a.width,n.strokeStyle=a.color,n.beginPath(),n.moveTo(p,x),n.lineTo(v,T),n.stroke(),n.restore()}drawLabels(t){if(!this.options.ticks.display)return;const i=this.ctx,r=this._computeLabelArea();r&&cT(i,r);const a=this.getLabelItems(t);for(const l of a){const h=l.options,s=l.font,p=l.label,v=l.textOffset;Fp(i,p,0,v,s,h)}r&&uT(i)}drawTitle(){const{ctx:t,options:{position:n,title:i,reverse:r}}=this;if(!i.display)return;const a=fo(i.font),l=Na(i.padding),h=i.align;let s=a.lineHeight/2;n==="bottom"||n==="center"||Bi(n)?(s+=l.bottom,os(i.text)&&(s+=a.lineHeight*(i.text.length-1))):s+=l.top;const{titleX:p,titleY:v,maxWidth:x,rotation:T}=cne(this,s,n,h);Fp(t,i.text,0,0,a,{color:i.color,maxWidth:x,rotation:T,textAlign:lne(h,n,r),textBaseline:"middle",translation:[p,v]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,n=t.ticks&&t.ticks.z||0,i=yi(t.grid&&t.grid.z,-1),r=yi(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==og.prototype.draw?[{z:n,draw:a=>{this.draw(a)}}]:[{z:i,draw:a=>{this.drawBackground(),this.drawGrid(a),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:n,draw:a=>{this.drawLabels(a)}}]}getMatchingVisibleMetas(t){const n=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[];let a,l;for(a=0,l=n.length;a<l;++a){const h=n[a];h[i]===this.id&&(!t||h.type===t)&&r.push(h)}return r}_resolveTickFontOptions(t){const n=this.options.ticks.setContext(this.getContext(t));return fo(n.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class zx{constructor(t,n,i){this.type=t,this.scope=n,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const n=Object.getPrototypeOf(t);let i;hne(n)&&(i=this.register(n));const r=this.items,a=t.id,l=this.scope+"."+a;if(!a)throw new Error("class does not have id: "+t);return a in r||(r[a]=t,une(t,l,i),this.override&&as.override(t.id,t.overrides)),l}get(t){return this.items[t]}unregister(t){const n=this.items,i=t.id,r=this.scope;i in n&&delete n[i],r&&i in as[r]&&(delete as[r][i],this.override&&delete Bp[i])}}function une(e,t,n){const i=Ob(Object.create(null),[n?as.get(n):{},as.get(t),e.defaults]);as.set(t,i),e.defaultRoutes&&dne(t,e.defaultRoutes),e.descriptors&&as.describe(t,e.descriptors)}function dne(e,t){Object.keys(t).forEach(n=>{const i=n.split("."),r=i.pop(),a=[e].concat(i).join("."),l=t[n].split("."),h=l.pop(),s=l.join(".");as.route(a,r,s,h)})}function hne(e){return"id"in e&&"defaults"in e}class fne{constructor(){this.controllers=new zx(lm,"datasets",!0),this.elements=new zx(Ah,"elements"),this.plugins=new zx(Object,"plugins"),this.scales=new zx(og,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,n,i){[...n].forEach(r=>{const a=i||this._getRegistryForType(r);i||a.isForType(r)||a===this.plugins&&r.id?this._exec(t,a,r):kr(r,l=>{const h=i||this._getRegistryForType(l);this._exec(t,h,l)})})}_exec(t,n,i){const r=VA(t);Hr(i["before"+r],[],i),n[t](i),Hr(i["after"+r],[],i)}_getRegistryForType(t){for(let n=0;n<this._typedRegistries.length;n++){const i=this._typedRegistries[n];if(i.isForType(t))return i}return this.plugins}_get(t,n,i){const r=n.get(t);if(r===void 0)throw new Error('"'+t+'" is not a registered '+i+".");return r}}var Fu=new fne;class mne{constructor(){this._init=void 0}notify(t,n,i,r){if(n==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install")),this._init===void 0)return;const a=r?this._descriptors(t).filter(r):this._descriptors(t),l=this._notify(a,t,n,i);return n==="afterDestroy"&&(this._notify(a,t,"stop"),this._notify(this._init,t,"uninstall"),this._init=void 0),l}_notify(t,n,i,r){r=r||{};for(const a of t){const l=a.plugin,h=l[i],s=[n,r,a.options];if(Hr(h,s,l)===!1&&r.cancelable)return!1}return!0}invalidate(){Ri(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),n}_createDescriptors(t,n){const i=t&&t.config,r=yi(i.options&&i.options.plugins,{}),a=pne(i);return r===!1&&!n?[]:_ne(t,a,r,n)}_notifyStateChanges(t){const n=this._oldCache||[],i=this._cache,r=(a,l)=>a.filter(h=>!l.some(s=>h.plugin.id===s.plugin.id));this._notify(r(n,i),t,"stop"),this._notify(r(i,n),t,"start")}}function pne(e){const t={},n=[],i=Object.keys(Fu.plugins.items);for(let a=0;a<i.length;a++)n.push(Fu.getPlugin(i[a]));const r=e.plugins||[];for(let a=0;a<r.length;a++){const l=r[a];n.indexOf(l)===-1&&(n.push(l),t[l.id]=!0)}return{plugins:n,localIds:t}}function gne(e,t){return!t&&e===!1?null:e===!0?{}:e}function _ne(e,{plugins:t,localIds:n},i,r){const a=[],l=e.getContext();for(const h of t){const s=h.id,p=gne(i[s],r);p!==null&&a.push({plugin:h,options:vne(e.config,{plugin:h,local:n[s]},p,l)})}return a}function vne(e,{plugin:t,local:n},i,r){const a=e.pluginScopeKeys(t),l=e.getOptionScopes(i,a);return n&&t.defaults&&l.push(t.defaults),e.createResolver(l,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function dk(e,t){const n=as.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function yne(e,t){let n=e;return e==="_index_"?n=t:e==="_value_"&&(n=t==="x"?"y":"x"),n}function bne(e,t){return e===t?"_index_":"_value_"}function MV(e){if(e==="x"||e==="y"||e==="r")return e}function xne(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function hk(e,...t){if(MV(e))return e;for(const n of t){const i=n.axis||xne(n.position)||e.length>1&&MV(e[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function DV(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function wne(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter(i=>i.xAxisID===e||i.yAxisID===e);if(n.length)return DV(e,"x",n[0])||DV(e,"y",n[0])}return{}}function Tne(e,t){const n=Bp[e.type]||{scales:{}},i=t.scales||{},r=dk(e.type,t),a=Object.create(null);return Object.keys(i).forEach(l=>{const h=i[l];if(!Bi(h))return console.error(`Invalid scale configuration for scale: ${l}`);if(h._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${l}`);const s=hk(l,h,wne(l,e),as.scales[h.type]),p=bne(s,r),v=n.scales||{};a[l]=qy(Object.create(null),[{axis:s},h,v[s],v[p]])}),e.data.datasets.forEach(l=>{const h=l.type||e.type,s=l.indexAxis||dk(h,t),v=(Bp[h]||{}).scales||{};Object.keys(v).forEach(x=>{const T=yne(x,s),k=l[T+"AxisID"]||T;a[k]=a[k]||Object.create(null),qy(a[k],[{axis:T},i[k],v[x]])})}),Object.keys(a).forEach(l=>{const h=a[l];qy(h,[as.scales[h.type],as.scale])}),a}function w6(e){const t=e.options||(e.options={});t.plugins=yi(t.plugins,{}),t.scales=Tne(e,t)}function T6(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function Sne(e){return e=e||{},e.data=T6(e.data),w6(e),e}const RV=new Map,S6=new Set;function Nx(e,t){let n=RV.get(e);return n||(n=t(),RV.set(e,n),S6.add(n)),n}const by=(e,t,n)=>{const i=qf(t,n);i!==void 0&&e.add(i)};class Ene{constructor(t){this._config=Sne(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=T6(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),w6(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Nx(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,n){return Nx(`${t}.transition.${n}`,()=>[[`datasets.${t}.transitions.${n}`,`transitions.${n}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,n){return Nx(`${t}-${n}`,()=>[[`datasets.${t}.elements.${n}`,`datasets.${t}`,`elements.${n}`,""]])}pluginScopeKeys(t){const n=t.id,i=this.type;return Nx(`${i}-plugin-${n}`,()=>[[`plugins.${n}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,n){const i=this._scopeCache;let r=i.get(t);return(!r||n)&&(r=new Map,i.set(t,r)),r}getOptionScopes(t,n,i){const{options:r,type:a}=this,l=this._cachedScopes(t,i),h=l.get(n);if(h)return h;const s=new Set;n.forEach(v=>{t&&(s.add(t),v.forEach(x=>by(s,t,x))),v.forEach(x=>by(s,r,x)),v.forEach(x=>by(s,Bp[a]||{},x)),v.forEach(x=>by(s,as,x)),v.forEach(x=>by(s,ck,x))});const p=Array.from(s);return p.length===0&&p.push(Object.create(null)),S6.has(n)&&l.set(n,p),p}chartOptionScopes(){const{options:t,type:n}=this;return[t,Bp[n]||{},as.datasets[n]||{},{type:n},as,ck]}resolveNamedOptions(t,n,i,r=[""]){const a={$shared:!0},{resolver:l,subPrefixes:h}=LV(this._resolverCache,t,r);let s=l;if(kne(l,n)){a.$shared=!1,i=Kf(i)?i():i;const p=this.createResolver(t,i,h);s=G_(l,i,p)}for(const p of n)a[p]=s[p];return a}createResolver(t,n,i=[""],r){const{resolver:a}=LV(this._resolverCache,t,i);return Bi(n)?G_(a,n,void 0,r):a}}function LV(e,t,n){let i=e.get(t);i||(i=new Map,e.set(t,i));const r=n.join();let a=i.get(r);return a||(a={resolver:$A(t,n),subPrefixes:n.filter(h=>!h.toLowerCase().includes("hover"))},i.set(r,a)),a}const Cne=e=>Bi(e)&&Object.getOwnPropertyNames(e).some(t=>Kf(e[t]));function kne(e,t){const{isScriptable:n,isIndexable:i}=t6(e);for(const r of t){const a=n(r),l=i(r),h=(l||a)&&e[r];if(a&&(Kf(h)||Cne(h))||l&&os(h))return!0}return!1}var Ine="4.5.1";const Ane=["top","bottom","left","right","chartArea"];function OV(e,t){return e==="top"||e==="bottom"||Ane.indexOf(e)===-1&&t==="x"}function VV(e,t){return function(n,i){return n[e]===i[e]?n[t]-i[t]:n[e]-i[e]}}function BV(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),Hr(n&&n.onComplete,[e],t)}function Pne(e){const t=e.chart,n=t.options.animation;Hr(n&&n.onProgress,[e],t)}function E6(e){return HA()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const dw={},FV=e=>{const t=E6(e);return Object.values(dw).filter(n=>n.canvas===t).pop()};function Mne(e,t,n){const i=Object.keys(e);for(const r of i){const a=+r;if(a>=t){const l=e[r];delete e[r],(n>0||a>t)&&(e[a+n]=l)}}}function Dne(e,t,n,i){return!n||e.type==="mouseout"?null:i?t:e}class XA{static defaults=as;static instances=dw;static overrides=Bp;static registry=Fu;static version=Ine;static getChart=FV;static register(...t){Fu.add(...t),zV()}static unregister(...t){Fu.remove(...t),zV()}constructor(t,n){const i=this.config=new Ene(n),r=E6(t),a=FV(r);if(a)throw new Error("Canvas is already in use. Chart with ID '"+a.id+"' must be destroyed before the canvas with ID '"+a.canvas.id+"' can be reused.");const l=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||Zte(r)),this.platform.updateConfig(i);const h=this.platform.acquireContext(r,l.aspectRatio),s=h&&h.canvas,p=s&&s.height,v=s&&s.width;if(this.id=kQ(),this.ctx=h,this.canvas=s,this.width=v,this.height=p,this._options=l,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new mne,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=WQ(x=>this.update(x),l.resizeDelay||0),this._dataChanges=[],dw[this.id]=this,!h||!s){console.error("Failed to create chart: can't acquire context from the given item");return}Hd.listen(this,"complete",BV),Hd.listen(this,"progress",Pne),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:n},width:i,height:r,_aspectRatio:a}=this;return Ri(t)?n&&a?a:r?i/r:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Fu}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():aV(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return rV(this.canvas,this.ctx),this}stop(){return Hd.stop(this),this}resize(t,n){Hd.running(this)?this._resizeBeforeDraw={width:t,height:n}:this._resize(t,n)}_resize(t,n){const i=this.options,r=this.canvas,a=i.maintainAspectRatio&&this.aspectRatio,l=this.platform.getMaximumSize(r,t,n,a),h=i.devicePixelRatio||this.platform.getDevicePixelRatio(),s=this.width?"resize":"attach";this.width=l.width,this.height=l.height,this._aspectRatio=this.aspectRatio,aV(this,h,!0)&&(this.notifyPlugins("resize",{size:l}),Hr(i.onResize,[this,l],this),this.attached&&this._doResize(s)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};kr(n,(i,r)=>{i.id=r})}buildOrUpdateScales(){const t=this.options,n=t.scales,i=this.scales,r=Object.keys(i).reduce((l,h)=>(l[h]=!1,l),{});let a=[];n&&(a=a.concat(Object.keys(n).map(l=>{const h=n[l],s=hk(l,h),p=s==="r",v=s==="x";return{options:h,dposition:p?"chartArea":v?"bottom":"left",dtype:p?"radialLinear":v?"category":"linear"}}))),kr(a,l=>{const h=l.options,s=h.id,p=hk(s,h),v=yi(h.type,l.dtype);(h.position===void 0||OV(h.position,p)!==OV(l.dposition))&&(h.position=l.dposition),r[s]=!0;let x=null;if(s in i&&i[s].type===v)x=i[s];else{const T=Fu.getScale(v);x=new T({id:s,type:v,ctx:this.ctx,chart:this}),i[x.id]=x}x.init(h,t)}),kr(r,(l,h)=>{l||delete i[h]}),kr(i,l=>{Va.configure(this,l,l.options),Va.addBox(this,l)})}_updateMetasets(){const t=this._metasets,n=this.data.datasets.length,i=t.length;if(t.sort((r,a)=>r.index-a.index),i>n){for(let r=n;r<i;++r)this._destroyDatasetMeta(r);t.splice(n,i-n)}this._sortedMetasets=t.slice(0).sort(VV("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:n}}=this;t.length>n.length&&delete this._stacks,t.forEach((i,r)=>{n.filter(a=>a===i._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const t=[],n=this.data.datasets;let i,r;for(this._removeUnreferencedMetasets(),i=0,r=n.length;i<r;i++){const a=n[i];let l=this.getDatasetMeta(i);const h=a.type||this.config.type;if(l.type&&l.type!==h&&(this._destroyDatasetMeta(i),l=this.getDatasetMeta(i)),l.type=h,l.indexAxis=a.indexAxis||dk(h,this.options),l.order=a.order||0,l.index=i,l.label=""+a.label,l.visible=this.isDatasetVisible(i),l.controller)l.controller.updateIndex(i),l.controller.linkScales();else{const s=Fu.getController(h),{datasetElementType:p,dataElementType:v}=as.datasets[h];Object.assign(s,{dataElementType:Fu.getElement(v),datasetElementType:p&&Fu.getElement(p)}),l.controller=new s(this,i),t.push(l.controller)}}return this._updateMetasets(),t}_resetElements(){kr(this.data.datasets,(t,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const n=this.config;n.update();const i=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const a=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let l=0;for(let p=0,v=this.data.datasets.length;p<v;p++){const{controller:x}=this.getDatasetMeta(p),T=!r&&a.indexOf(x)===-1;x.buildOrUpdateElements(T),l=Math.max(+x.getMaxOverflow(),l)}l=this._minPadding=i.layout.autoPadding?l:0,this._updateLayout(l),r||kr(a,p=>{p.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(VV("z","_idx"));const{_active:h,_lastEvent:s}=this;s?this._eventHandler(s,!0):h.length&&this._updateHoverStyles(h,h,!0),this.render()}_updateScales(){kr(this.scales,t=>{Va.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,n=new Set(Object.keys(this._listeners)),i=new Set(t.events);(!XO(n,i)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,n=this._getUniformDataChanges()||[];for(const{method:i,start:r,count:a}of n){const l=i==="_removeElements"?-a:a;Mne(t,r,l)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const n=this.data.datasets.length,i=a=>new Set(t.filter(l=>l[0]===a).map((l,h)=>h+","+l.splice(1).join(","))),r=i(0);for(let a=1;a<n;a++)if(!XO(r,i(a)))return;return Array.from(r).map(a=>a.split(",")).map(a=>({method:a[1],start:+a[2],count:+a[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Va.update(this,this.width,this.height,t);const n=this.chartArea,i=n.width<=0||n.height<=0;this._layers=[],kr(this.boxes,r=>{i&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,a)=>{r._idx=a}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let n=0,i=this.data.datasets.length;n<i;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,i=this.data.datasets.length;n<i;++n)this._updateDataset(n,Kf(t)?t({datasetIndex:n}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,n){const i=this.getDatasetMeta(t),r={meta:i,index:t,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(i.controller._update(n),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Hd.has(this)?this.attached&&!Hd.running(this)&&Hd.start(this):(this.draw(),BV({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:i,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(t=0;t<n.length&&n[t].z<=0;++t)n[t].draw(this.chartArea);for(this._drawDatasets();t<n.length;++t)n[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const n=this._sortedMetasets,i=[];let r,a;for(r=0,a=n.length;r<a;++r){const l=n[r];(!t||l.visible)&&i.push(l)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let n=t.length-1;n>=0;--n)this._drawDataset(t[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const n=this.ctx,i={meta:t,index:t.index,cancelable:!0},r=h6(this,t);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(r&&cT(n,r),t.controller.draw(),r&&uT(n),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(t){return sh(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,n,i,r){const a=Ate.modes[n];return typeof a=="function"?a(this,t,i,r):[]}getDatasetMeta(t){const n=this.data.datasets[t],i=this._metasets;let r=i.filter(a=>a&&a._dataset===n).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:t,_dataset:n,_parsed:[],_sorted:!1},i.push(r)),r}getContext(){return this.$context||(this.$context=am(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const n=this.data.datasets[t];if(!n)return!1;const i=this.getDatasetMeta(t);return typeof i.hidden=="boolean"?!i.hidden:!n.hidden}setDatasetVisibility(t,n){const i=this.getDatasetMeta(t);i.hidden=!n}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,n,i){const r=i?"show":"hide",a=this.getDatasetMeta(t),l=a.controller._resolveAnimations(void 0,r);Vb(n)?(a.data[n].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),l.update(a,{visible:i}),this.update(h=>h.datasetIndex===t?r:void 0))}hide(t,n){this._updateVisibility(t,n,!1)}show(t,n){this._updateVisibility(t,n,!0)}_destroyDatasetMeta(t){const n=this._metasets[t];n&&n.controller&&n.controller._destroy(),delete this._metasets[t]}_stop(){let t,n;for(this.stop(),Hd.remove(this),t=0,n=this.data.datasets.length;t<n;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:n}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),rV(t,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete dw[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,n=this.platform,i=(a,l)=>{n.addEventListener(this,a,l),t[a]=l},r=(a,l,h)=>{a.offsetX=l,a.offsetY=h,this._eventHandler(a)};kr(this.options.events,a=>i(a,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,n=this.platform,i=(s,p)=>{n.addEventListener(this,s,p),t[s]=p},r=(s,p)=>{t[s]&&(n.removeEventListener(this,s,p),delete t[s])},a=(s,p)=>{this.canvas&&this.resize(s,p)};let l;const h=()=>{r("attach",h),this.attached=!0,this.resize(),i("resize",a),i("detach",l)};l=()=>{this.attached=!1,r("resize",a),this._stop(),this._resize(0,0),i("attach",h)},n.isAttached(this.canvas)?h():l()}unbindEvents(){kr(this._listeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._listeners={},kr(this._responsiveListeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,n,i){const r=i?"set":"remove";let a,l,h,s;for(n==="dataset"&&(a=this.getDatasetMeta(t[0].datasetIndex),a.controller["_"+r+"DatasetHoverStyle"]()),h=0,s=t.length;h<s;++h){l=t[h];const p=l&&this.getDatasetMeta(l.datasetIndex).controller;p&&p[r+"HoverStyle"](l.element,l.datasetIndex,l.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const n=this._active||[],i=t.map(({datasetIndex:a,index:l})=>{const h=this.getDatasetMeta(a);if(!h)throw new Error("No dataset found at index "+a);return{datasetIndex:a,element:h.data[l],index:l}});!n1(i,n)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,n))}notifyPlugins(t,n,i){return this._plugins.notify(this,t,n,i)}isPluginEnabled(t){return this._plugins._cache.filter(n=>n.plugin.id===t).length===1}_updateHoverStyles(t,n,i){const r=this.options.hover,a=(s,p)=>s.filter(v=>!p.some(x=>v.datasetIndex===x.datasetIndex&&v.index===x.index)),l=a(n,t),h=i?t:a(t,n);l.length&&this.updateHoverStyle(l,r.mode,!1),h.length&&r.mode&&this.updateHoverStyle(h,r.mode,!0)}_eventHandler(t,n){const i={event:t,replay:n,cancelable:!0,inChartArea:this.isPointInArea(t)},r=l=>(l.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",i,r)===!1)return;const a=this._handleEvent(t,n,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,r),(a||i.changed)&&this.render(),this}_handleEvent(t,n,i){const{_active:r=[],options:a}=this,l=n,h=this._getActiveElements(t,r,i,l),s=RQ(t),p=Dne(t,this._lastEvent,i,s);i&&(this._lastEvent=null,Hr(a.onHover,[t,h,this],this),s&&Hr(a.onClick,[t,h,this],this));const v=!n1(h,r);return(v||n)&&(this._active=h,this._updateHoverStyles(h,r,n)),this._lastEvent=p,v}_getActiveElements(t,n,i,r){if(t.type==="mouseout")return[];if(!i)return n;const a=this.options.hover;return this.getElementsAtEventForMode(t,a.mode,a,r)}}function zV(){return kr(XA.instances,e=>e._plugins.invalidate())}function Rne(e,t,n){const{startAngle:i,x:r,y:a,outerRadius:l,innerRadius:h,options:s}=t,{borderWidth:p,borderJoinStyle:v}=s,x=Math.min(p/l,Ia(i-n));if(e.beginPath(),e.arc(r,a,l-p/2,i+x/2,n-x/2),h>0){const T=Math.min(p/h,Ia(i-n));e.arc(r,a,h+p/2,n-T/2,i+T/2,!0)}else{const T=Math.min(p/2,l*Ia(i-n));if(v==="round")e.arc(r,a,T,n-cr/2,i+cr/2,!0);else if(v==="bevel"){const k=2*T*T,P=-k*Math.cos(n+cr/2)+r,M=-k*Math.sin(n+cr/2)+a,L=k*Math.cos(i+cr/2)+r,B=k*Math.sin(i+cr/2)+a;e.lineTo(P,M),e.lineTo(L,B)}}e.closePath(),e.moveTo(0,0),e.rect(0,0,e.canvas.width,e.canvas.height),e.clip("evenodd")}function Lne(e,t,n){const{startAngle:i,pixelMargin:r,x:a,y:l,outerRadius:h,innerRadius:s}=t;let p=r/h;e.beginPath(),e.arc(a,l,h,i-p,n+p),s>r?(p=r/s,e.arc(a,l,s,n+p,i-p,!0)):e.arc(a,l,r,n+js,i-js),e.closePath(),e.clip()}function One(e){return UA(e,["outerStart","outerEnd","innerStart","innerEnd"])}function Vne(e,t,n,i){const r=One(e.options.borderRadius),a=(n-t)/2,l=Math.min(a,i*t/2),h=s=>{const p=(n-Math.min(a,s))*i/2;return Oo(s,0,Math.min(a,p))};return{outerStart:h(r.outerStart),outerEnd:h(r.outerEnd),innerStart:Oo(r.innerStart,0,l),innerEnd:Oo(r.innerEnd,0,l)}}function r_(e,t,n,i){return{x:n+e*Math.cos(t),y:i+e*Math.sin(t)}}function l1(e,t,n,i,r,a){const{x:l,y:h,startAngle:s,pixelMargin:p,innerRadius:v}=t,x=Math.max(t.outerRadius+i+n-p,0),T=v>0?v+i+n+p:0;let k=0;const P=r-s;if(i){const Fe=v>0?v-i:0,Ve=x>0?x-i:0,Ge=(Fe+Ve)/2,je=Ge!==0?P*Ge/(Ge+i):P;k=(P-je)/2}const M=Math.max(.001,P*x-n/cr)/x,L=(P-M)/2,B=s+L+k,F=r-L-k,{outerStart:X,outerEnd:J,innerStart:Q,innerEnd:re}=Vne(t,T,x,F-B),Z=x-X,$=x-J,H=B+X/Z,W=F-J/$,te=T+Q,Y=T+re,ne=B+Q/te,Se=F-re/Y;if(e.beginPath(),a){const Fe=(H+W)/2;if(e.arc(l,h,x,H,Fe),e.arc(l,h,x,Fe,W),J>0){const Ae=r_($,W,l,h);e.arc(Ae.x,Ae.y,J,W,F+js)}const Ve=r_(Y,F,l,h);if(e.lineTo(Ve.x,Ve.y),re>0){const Ae=r_(Y,Se,l,h);e.arc(Ae.x,Ae.y,re,F+js,Se+Math.PI)}const Ge=(F-re/T+(B+Q/T))/2;if(e.arc(l,h,T,F-re/T,Ge,!0),e.arc(l,h,T,Ge,B+Q/T,!0),Q>0){const Ae=r_(te,ne,l,h);e.arc(Ae.x,Ae.y,Q,ne+Math.PI,B-js)}const je=r_(Z,B,l,h);if(e.lineTo(je.x,je.y),X>0){const Ae=r_(Z,H,l,h);e.arc(Ae.x,Ae.y,X,B-js,H)}}else{e.moveTo(l,h);const Fe=Math.cos(H)*x+l,Ve=Math.sin(H)*x+h;e.lineTo(Fe,Ve);const Ge=Math.cos(W)*x+l,je=Math.sin(W)*x+h;e.lineTo(Ge,je)}e.closePath()}function Bne(e,t,n,i,r){const{fullCircles:a,startAngle:l,circumference:h}=t;let s=t.endAngle;if(a){l1(e,t,n,i,s,r);for(let p=0;p<a;++p)e.fill();isNaN(h)||(s=l+(h%Zr||Zr))}return l1(e,t,n,i,s,r),e.fill(),s}function Fne(e,t,n,i,r){const{fullCircles:a,startAngle:l,circumference:h,options:s}=t,{borderWidth:p,borderJoinStyle:v,borderDash:x,borderDashOffset:T,borderRadius:k}=s,P=s.borderAlign==="inner";if(!p)return;e.setLineDash(x||[]),e.lineDashOffset=T,P?(e.lineWidth=p*2,e.lineJoin=v||"round"):(e.lineWidth=p,e.lineJoin=v||"bevel");let M=t.endAngle;if(a){l1(e,t,n,i,M,r);for(let L=0;L<a;++L)e.stroke();isNaN(h)||(M=l+(h%Zr||Zr))}P&&Lne(e,t,M),s.selfJoin&&M-l>=cr&&k===0&&v!=="miter"&&Rne(e,t,M),a||(l1(e,t,n,i,M,r),e.stroke())}class zne extends Ah{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,n,i){const r=this.getProps(["x","y"],i),{angle:a,distance:l}=H4(r,{x:t,y:n}),{startAngle:h,endAngle:s,innerRadius:p,outerRadius:v,circumference:x}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),T=(this.options.spacing+this.options.borderWidth)/2,k=yi(x,s-h),P=Bb(a,h,s)&&h!==s,M=k>=Zr||P,L=ih(l,p+T,v+T);return M&&L}getCenterPoint(t){const{x:n,y:i,startAngle:r,endAngle:a,innerRadius:l,outerRadius:h}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:s,spacing:p}=this.options,v=(r+a)/2,x=(l+h+p+s)/2;return{x:n+Math.cos(v)*x,y:i+Math.sin(v)*x}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:n,circumference:i}=this,r=(n.offset||0)/4,a=(n.spacing||0)/2,l=n.circular;if(this.pixelMargin=n.borderAlign==="inner"?.33:0,this.fullCircles=i>Zr?Math.floor(i/Zr):0,i===0||this.innerRadius<0||this.outerRadius<0)return;t.save();const h=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(h)*r,Math.sin(h)*r);const s=1-Math.sin(Math.min(cr,i||0)),p=r*s;t.fillStyle=n.backgroundColor,t.strokeStyle=n.borderColor,Bne(t,this,p,a,l),Fne(t,this,p,a,l),t.restore()}}function C6(e,t,n=t){e.lineCap=yi(n.borderCapStyle,t.borderCapStyle),e.setLineDash(yi(n.borderDash,t.borderDash)),e.lineDashOffset=yi(n.borderDashOffset,t.borderDashOffset),e.lineJoin=yi(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=yi(n.borderWidth,t.borderWidth),e.strokeStyle=yi(n.borderColor,t.borderColor)}function Nne(e,t,n){e.lineTo(n.x,n.y)}function Une(e){return e.stepped?nee:e.tension||e.cubicInterpolationMode==="monotone"?iee:Nne}function k6(e,t,n={}){const i=e.length,{start:r=0,end:a=i-1}=n,{start:l,end:h}=t,s=Math.max(r,l),p=Math.min(a,h),v=r<l&&a<l||r>h&&a>h;return{count:i,start:s,loop:t.loop,ilen:p<s&&!v?i+p-s:p-s}}function $ne(e,t,n,i){const{points:r,options:a}=t,{count:l,start:h,loop:s,ilen:p}=k6(r,n,i),v=Une(a);let{move:x=!0,reverse:T}=i||{},k,P,M;for(k=0;k<=p;++k)P=r[(h+(T?p-k:k))%l],!P.skip&&(x?(e.moveTo(P.x,P.y),x=!1):v(e,M,P,T,a.stepped),M=P);return s&&(P=r[(h+(T?p:0))%l],v(e,M,P,T,a.stepped)),!!s}function jne(e,t,n,i){const r=t.points,{count:a,start:l,ilen:h}=k6(r,n,i),{move:s=!0,reverse:p}=i||{};let v=0,x=0,T,k,P,M,L,B;const F=J=>(l+(p?h-J:J))%a,X=()=>{M!==L&&(e.lineTo(v,L),e.lineTo(v,M),e.lineTo(v,B))};for(s&&(k=r[F(0)],e.moveTo(k.x,k.y)),T=0;T<=h;++T){if(k=r[F(T)],k.skip)continue;const J=k.x,Q=k.y,re=J|0;re===P?(Q<M?M=Q:Q>L&&(L=Q),v=(x*v+J)/++x):(X(),e.lineTo(J,Q),P=re,x=0,M=L=Q),B=Q}X()}function fk(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!n?jne:$ne}function Wne(e){return e.stepped?Oee:e.tension||e.cubicInterpolationMode==="monotone"?Vee:cp}function Hne(e,t,n,i){let r=t._path;r||(r=t._path=new Path2D,t.path(r,n,i)&&r.closePath()),C6(e,t.options),e.stroke(r)}function Gne(e,t,n,i){const{segments:r,options:a}=t,l=fk(t);for(const h of r)C6(e,a,h.style),e.beginPath(),l(e,t,h,{start:n,end:n+i-1})&&e.closePath(),e.stroke()}const qne=typeof Path2D=="function";function Kne(e,t,n,i){qne&&!t.options.segment?Hne(e,t,n,i):Gne(e,t,n,i)}class fT extends Ah{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,n){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const r=i.spanGaps?this._loop:this._fullLoop;kee(this._points,i,t,r,n),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=$ee(this,this.options.segment))}first(){const t=this.segments,n=this.points;return t.length&&n[t[0].start]}last(){const t=this.segments,n=this.points,i=t.length;return i&&n[t[i-1].end]}interpolate(t,n){const i=this.options,r=t[n],a=this.points,l=d6(this,{property:n,start:r,end:r});if(!l.length)return;const h=[],s=Wne(i);let p,v;for(p=0,v=l.length;p<v;++p){const{start:x,end:T}=l[p],k=a[x],P=a[T];if(k===P){h.push(k);continue}const M=Math.abs((r-k[n])/(P[n]-k[n])),L=s(k,P,M,i.stepped);L[n]=t[n],h.push(L)}return h.length===1?h[0]:h}pathSegment(t,n,i){return fk(this)(t,this,n,i)}path(t,n,i){const r=this.segments,a=fk(this);let l=this._loop;n=n||0,i=i||this.points.length-n;for(const h of r)l&=a(t,this,h,{start:n,end:n+i-1});return!!l}draw(t,n,i,r){const a=this.options||{};(this.points||[]).length&&a.borderWidth&&(t.save(),Kne(t,this,i,r),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function NV(e,t,n,i){const r=e.options,{[n]:a}=e.getProps([n],i);return Math.abs(t-a)<r.radius+r.hitRadius}class Xne extends Ah{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,n,i){const r=this.options,{x:a,y:l}=this.getProps(["x","y"],i);return Math.pow(t-a,2)+Math.pow(n-l,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(t,n){return NV(this,t,"x",n)}inYRange(t,n){return NV(this,t,"y",n)}getCenterPoint(t){const{x:n,y:i}=this.getProps(["x","y"],t);return{x:n,y:i}}size(t){t=t||this.options||{};let n=t.radius||0;n=Math.max(n,n&&t.hoverRadius||0);const i=n&&t.borderWidth||0;return(n+i)*2}draw(t,n){const i=this.options;this.skip||i.radius<.1||!sh(this,n,this.size(i)/2)||(t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.fillStyle=i.backgroundColor,uk(t,i,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}function I6(e,t){const{x:n,y:i,base:r,width:a,height:l}=e.getProps(["x","y","base","width","height"],t);let h,s,p,v,x;return e.horizontal?(x=l/2,h=Math.min(n,r),s=Math.max(n,r),p=i-x,v=i+x):(x=a/2,h=n-x,s=n+x,p=Math.min(i,r),v=Math.max(i,r)),{left:h,top:p,right:s,bottom:v}}function Af(e,t,n,i){return e?0:Oo(t,n,i)}function Zne(e,t,n){const i=e.options.borderWidth,r=e.borderSkipped,a=e6(i);return{t:Af(r.top,a.top,0,n),r:Af(r.right,a.right,0,t),b:Af(r.bottom,a.bottom,0,n),l:Af(r.left,a.left,0,t)}}function Yne(e,t,n){const{enableBorderRadius:i}=e.getProps(["enableBorderRadius"]),r=e.options.borderRadius,a=kp(r),l=Math.min(t,n),h=e.borderSkipped,s=i||Bi(r);return{topLeft:Af(!s||h.top||h.left,a.topLeft,0,l),topRight:Af(!s||h.top||h.right,a.topRight,0,l),bottomLeft:Af(!s||h.bottom||h.left,a.bottomLeft,0,l),bottomRight:Af(!s||h.bottom||h.right,a.bottomRight,0,l)}}function Jne(e){const t=I6(e),n=t.right-t.left,i=t.bottom-t.top,r=Zne(e,n/2,i/2),a=Yne(e,n/2,i/2);return{outer:{x:t.left,y:t.top,w:n,h:i,radius:a},inner:{x:t.left+r.l,y:t.top+r.t,w:n-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,a.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,a.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,a.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,a.bottomRight-Math.max(r.b,r.r))}}}}function ZE(e,t,n,i){const r=t===null,a=n===null,h=e&&!(r&&a)&&I6(e,i);return h&&(r||ih(t,h.left,h.right))&&(a||ih(n,h.top,h.bottom))}function Qne(e){return e.topLeft||e.topRight||e.bottomLeft||e.bottomRight}function eie(e,t){e.rect(t.x,t.y,t.w,t.h)}function YE(e,t,n={}){const i=e.x!==n.x?-t:0,r=e.y!==n.y?-t:0,a=(e.x+e.w!==n.x+n.w?t:0)-i,l=(e.y+e.h!==n.y+n.h?t:0)-r;return{x:e.x+i,y:e.y+r,w:e.w+a,h:e.h+l,radius:e.radius}}class tie extends Ah{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:n,options:{borderColor:i,backgroundColor:r}}=this,{inner:a,outer:l}=Jne(this),h=Qne(l.radius)?Fb:eie;t.save(),(l.w!==a.w||l.h!==a.h)&&(t.beginPath(),h(t,YE(l,n,a)),t.clip(),h(t,YE(a,-n,l)),t.fillStyle=i,t.fill("evenodd")),t.beginPath(),h(t,YE(a,n)),t.fillStyle=r,t.fill(),t.restore()}inRange(t,n,i){return ZE(this,t,n,i)}inXRange(t,n){return ZE(this,t,null,n)}inYRange(t,n){return ZE(this,null,t,n)}getCenterPoint(t){const{x:n,y:i,base:r,horizontal:a}=this.getProps(["x","y","base","horizontal"],t);return{x:a?(n+r)/2:n,y:a?i:(i+r)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}var nie=Object.freeze({__proto__:null,ArcElement:zne,BarElement:tie,LineElement:fT,PointElement:Xne});const mk=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],UV=mk.map(e=>e.replace("rgb(","rgba(").replace(")",", 0.5)"));function A6(e){return mk[e%mk.length]}function P6(e){return UV[e%UV.length]}function iie(e,t){return e.borderColor=A6(t),e.backgroundColor=P6(t),++t}function rie(e,t){return e.backgroundColor=e.data.map(()=>A6(t++)),t}function sie(e,t){return e.backgroundColor=e.data.map(()=>P6(t++)),t}function oie(e){let t=0;return(n,i)=>{const r=e.getDatasetMeta(i).controller;r instanceof qA?t=rie(n,t):r instanceof g6?t=sie(n,t):r&&(t=iie(n,t))}}function $V(e){let t;for(t in e)if(e[t].borderColor||e[t].backgroundColor)return!0;return!1}function aie(e){return e&&(e.borderColor||e.backgroundColor)}function lie(){return as.borderColor!=="rgba(0,0,0,0.1)"||as.backgroundColor!=="rgba(0,0,0,0.1)"}var cie={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(e,t,n){if(!n.enabled)return;const{data:{datasets:i},options:r}=e.config,{elements:a}=r,l=$V(i)||aie(r)||a&&$V(a)||lie();if(!n.forceOverride&&l)return;const h=oie(e);i.forEach(h)}};function uie(e,t,n,i,r){const a=r.samples||i;if(a>=n)return e.slice(t,t+n);const l=[],h=(n-2)/(a-2);let s=0;const p=t+n-1;let v=t,x,T,k,P,M;for(l[s++]=e[v],x=0;x<a-2;x++){let L=0,B=0,F;const X=Math.floor((x+1)*h)+1+t,J=Math.min(Math.floor((x+2)*h)+1,n)+t,Q=J-X;for(F=X;F<J;F++)L+=e[F].x,B+=e[F].y;L/=Q,B/=Q;const re=Math.floor(x*h)+1+t,Z=Math.min(Math.floor((x+1)*h)+1,n)+t,{x:$,y:H}=e[v];for(k=P=-1,F=re;F<Z;F++)P=.5*Math.abs(($-L)*(e[F].y-H)-($-e[F].x)*(B-H)),P>k&&(k=P,T=e[F],M=F);l[s++]=T,v=M}return l[s++]=e[p],l}function die(e,t,n,i){let r=0,a=0,l,h,s,p,v,x,T,k,P,M;const L=[],B=t+n-1,F=e[t].x,J=e[B].x-F;for(l=t;l<t+n;++l){h=e[l],s=(h.x-F)/J*i,p=h.y;const Q=s|0;if(Q===v)p<P?(P=p,x=l):p>M&&(M=p,T=l),r=(a*r+h.x)/++a;else{const re=l-1;if(!Ri(x)&&!Ri(T)){const Z=Math.min(x,T),$=Math.max(x,T);Z!==k&&Z!==re&&L.push({...e[Z],x:r}),$!==k&&$!==re&&L.push({...e[$],x:r})}l>0&&re!==k&&L.push(e[re]),L.push(h),v=Q,a=0,P=M=p,x=T=k=l}}return L}function M6(e){if(e._decimated){const t=e._data;delete e._decimated,delete e._data,Object.defineProperty(e,"data",{configurable:!0,enumerable:!0,writable:!0,value:t})}}function jV(e){e.data.datasets.forEach(t=>{M6(t)})}function hie(e,t){const n=t.length;let i=0,r;const{iScale:a}=e,{min:l,max:h,minDefined:s,maxDefined:p}=a.getUserBounds();return s&&(i=Oo(rh(t,a.axis,l).lo,0,n-1)),p?r=Oo(rh(t,a.axis,h).hi+1,i,n)-i:r=n-i,{start:i,count:r}}var fie={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(e,t,n)=>{if(!n.enabled){jV(e);return}const i=e.width;e.data.datasets.forEach((r,a)=>{const{_data:l,indexAxis:h}=r,s=e.getDatasetMeta(a),p=l||r.data;if(Cy([h,e.options.indexAxis])==="y"||!s.controller.supportsDecimation)return;const v=e.scales[s.xAxisID];if(v.type!=="linear"&&v.type!=="time"||e.options.parsing)return;let{start:x,count:T}=hie(s,p);const k=n.threshold||4*i;if(T<=k){M6(r);return}Ri(l)&&(r._data=p,delete r.data,Object.defineProperty(r,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(M){this._data=M}}));let P;switch(n.algorithm){case"lttb":P=uie(p,x,T,i,n);break;case"min-max":P=die(p,x,T,i);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}r._decimated=P})},destroy(e){jV(e)}};function mie(e,t,n){const i=e.segments,r=e.points,a=t.points,l=[];for(const h of i){let{start:s,end:p}=h;p=mT(s,p,r);const v=pk(n,r[s],r[p],h.loop);if(!t.segments){l.push({source:h,target:v,start:r[s],end:r[p]});continue}const x=d6(t,v);for(const T of x){const k=pk(n,a[T.start],a[T.end],T.loop),P=u6(h,r,k);for(const M of P)l.push({source:M,target:T,start:{[n]:WV(v,k,"start",Math.max)},end:{[n]:WV(v,k,"end",Math.min)}})}}return l}function pk(e,t,n,i){if(i)return;let r=t[e],a=n[e];return e==="angle"&&(r=Ia(r),a=Ia(a)),{property:e,start:r,end:a}}function pie(e,t){const{x:n=null,y:i=null}=e||{},r=t.points,a=[];return t.segments.forEach(({start:l,end:h})=>{h=mT(l,h,r);const s=r[l],p=r[h];i!==null?(a.push({x:s.x,y:i}),a.push({x:p.x,y:i})):n!==null&&(a.push({x:n,y:s.y}),a.push({x:n,y:p.y}))}),a}function mT(e,t,n){for(;t>e;t--){const i=n[t];if(!isNaN(i.x)&&!isNaN(i.y))break}return t}function WV(e,t,n,i){return e&&t?i(e[n],t[n]):e?e[n]:t?t[n]:0}function D6(e,t){let n=[],i=!1;return os(e)?(i=!0,n=e):n=pie(e,t),n.length?new fT({points:n,options:{tension:0},_loop:i,_fullLoop:i}):null}function HV(e){return e&&e.fill!==!1}function gie(e,t,n){let r=e[t].fill;const a=[t];let l;if(!n)return r;for(;r!==!1&&a.indexOf(r)===-1;){if(!Ds(r))return r;if(l=e[r],!l)return!1;if(l.visible)return r;a.push(r),r=l.fill}return!1}function _ie(e,t,n){const i=xie(e);if(Bi(i))return isNaN(i.value)?!1:i;let r=parseFloat(i);return Ds(r)&&Math.floor(r)===r?vie(i[0],t,r,n):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function vie(e,t,n,i){return(e==="-"||e==="+")&&(n=t+n),n===t||n<0||n>=i?!1:n}function yie(e,t){let n=null;return e==="start"?n=t.bottom:e==="end"?n=t.top:Bi(e)?n=t.getPixelForValue(e.value):t.getBasePixel&&(n=t.getBasePixel()),n}function bie(e,t,n){let i;return e==="start"?i=n:e==="end"?i=t.options.reverse?t.min:t.max:Bi(e)?i=e.value:i=t.getBaseValue(),i}function xie(e){const t=e.options,n=t.fill;let i=yi(n&&n.target,n);return i===void 0&&(i=!!t.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function wie(e){const{scale:t,index:n,line:i}=e,r=[],a=i.segments,l=i.points,h=Tie(t,n);h.push(D6({x:null,y:t.bottom},i));for(let s=0;s<a.length;s++){const p=a[s];for(let v=p.start;v<=p.end;v++)Sie(r,l[v],h)}return new fT({points:r,options:{}})}function Tie(e,t){const n=[],i=e.getMatchingVisibleMetas("line");for(let r=0;r<i.length;r++){const a=i[r];if(a.index===t)break;a.hidden||n.unshift(a.dataset)}return n}function Sie(e,t,n){const i=[];for(let r=0;r<n.length;r++){const a=n[r],{first:l,last:h,point:s}=Eie(a,t,"x");if(!(!s||l&&h)){if(l)i.unshift(s);else if(e.push(s),!h)break}}e.push(...i)}function Eie(e,t,n){const i=e.interpolate(t,n);if(!i)return{};const r=i[n],a=e.segments,l=e.points;let h=!1,s=!1;for(let p=0;p<a.length;p++){const v=a[p],x=l[v.start][n],T=l[v.end][n];if(ih(r,x,T)){h=r===x,s=r===T;break}}return{first:h,last:s,point:i}}class R6{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,n,i){const{x:r,y:a,radius:l}=this;return n=n||{start:0,end:Zr},t.arc(r,a,l,n.end,n.start,!0),!i.bounds}interpolate(t){const{x:n,y:i,radius:r}=this,a=t.angle;return{x:n+Math.cos(a)*r,y:i+Math.sin(a)*r,angle:a}}}function Cie(e){const{chart:t,fill:n,line:i}=e;if(Ds(n))return kie(t,n);if(n==="stack")return wie(e);if(n==="shape")return!0;const r=Iie(e);return r instanceof R6?r:D6(r,i)}function kie(e,t){const n=e.getDatasetMeta(t);return n&&e.isDatasetVisible(t)?n.dataset:null}function Iie(e){return(e.scale||{}).getPointPositionForValue?Pie(e):Aie(e)}function Aie(e){const{scale:t={},fill:n}=e,i=yie(n,t);if(Ds(i)){const r=t.isHorizontal();return{x:r?i:null,y:r?null:i}}return null}function Pie(e){const{scale:t,fill:n}=e,i=t.options,r=t.getLabels().length,a=i.reverse?t.max:t.min,l=bie(n,t,a),h=[];if(i.grid.circular){const s=t.getPointPositionForValue(0,a);return new R6({x:s.x,y:s.y,radius:t.getDistanceFromCenterForValue(l)})}for(let s=0;s<r;++s)h.push(t.getPointPositionForValue(s,l));return h}function JE(e,t,n){const i=Cie(t),{chart:r,index:a,line:l,scale:h,axis:s}=t,p=l.options,v=p.fill,x=p.backgroundColor,{above:T=x,below:k=x}=v||{},P=r.getDatasetMeta(a),M=h6(r,P);i&&l.points.length&&(cT(e,n),Mie(e,{line:l,target:i,above:T,below:k,area:n,scale:h,axis:s,clip:M}),uT(e))}function Mie(e,t){const{line:n,target:i,above:r,below:a,area:l,scale:h,clip:s}=t,p=n._loop?"angle":t.axis;e.save();let v=a;a!==r&&(p==="x"?(GV(e,i,l.top),QE(e,{line:n,target:i,color:r,scale:h,property:p,clip:s}),e.restore(),e.save(),GV(e,i,l.bottom)):p==="y"&&(qV(e,i,l.left),QE(e,{line:n,target:i,color:a,scale:h,property:p,clip:s}),e.restore(),e.save(),qV(e,i,l.right),v=r)),QE(e,{line:n,target:i,color:v,scale:h,property:p,clip:s}),e.restore()}function GV(e,t,n){const{segments:i,points:r}=t;let a=!0,l=!1;e.beginPath();for(const h of i){const{start:s,end:p}=h,v=r[s],x=r[mT(s,p,r)];a?(e.moveTo(v.x,v.y),a=!1):(e.lineTo(v.x,n),e.lineTo(v.x,v.y)),l=!!t.pathSegment(e,h,{move:l}),l?e.closePath():e.lineTo(x.x,n)}e.lineTo(t.first().x,n),e.closePath(),e.clip()}function qV(e,t,n){const{segments:i,points:r}=t;let a=!0,l=!1;e.beginPath();for(const h of i){const{start:s,end:p}=h,v=r[s],x=r[mT(s,p,r)];a?(e.moveTo(v.x,v.y),a=!1):(e.lineTo(n,v.y),e.lineTo(v.x,v.y)),l=!!t.pathSegment(e,h,{move:l}),l?e.closePath():e.lineTo(n,x.y)}e.lineTo(n,t.first().y),e.closePath(),e.clip()}function QE(e,t){const{line:n,target:i,property:r,color:a,scale:l,clip:h}=t,s=mie(n,i,r);for(const{source:p,target:v,start:x,end:T}of s){const{style:{backgroundColor:k=a}={}}=p,P=i!==!0;e.save(),e.fillStyle=k,Die(e,l,h,P&&pk(r,x,T)),e.beginPath();const M=!!n.pathSegment(e,p);let L;if(P){M?e.closePath():KV(e,i,T,r);const B=!!i.pathSegment(e,v,{move:M,reverse:!0});L=M&&B,L||KV(e,i,x,r)}e.closePath(),e.fill(L?"evenodd":"nonzero"),e.restore()}}function Die(e,t,n,i){const r=t.chart.chartArea,{property:a,start:l,end:h}=i||{};if(a==="x"||a==="y"){let s,p,v,x;a==="x"?(s=l,p=r.top,v=h,x=r.bottom):(s=r.left,p=l,v=r.right,x=h),e.beginPath(),n&&(s=Math.max(s,n.left),v=Math.min(v,n.right),p=Math.max(p,n.top),x=Math.min(x,n.bottom)),e.rect(s,p,v-s,x-p),e.clip()}}function KV(e,t,n,i){const r=t.interpolate(n,i);r&&e.lineTo(r.x,r.y)}var Rie={id:"filler",afterDatasetsUpdate(e,t,n){const i=(e.data.datasets||[]).length,r=[];let a,l,h,s;for(l=0;l<i;++l)a=e.getDatasetMeta(l),h=a.dataset,s=null,h&&h.options&&h instanceof fT&&(s={visible:e.isDatasetVisible(l),index:l,fill:_ie(h,l,i),chart:e,axis:a.controller.options.indexAxis,scale:a.vScale,line:h}),a.$filler=s,r.push(s);for(l=0;l<i;++l)s=r[l],!(!s||s.fill===!1)&&(s.fill=gie(r,l,n.propagate))},beforeDraw(e,t,n){const i=n.drawTime==="beforeDraw",r=e.getSortedVisibleDatasetMetas(),a=e.chartArea;for(let l=r.length-1;l>=0;--l){const h=r[l].$filler;h&&(h.line.updateControlPoints(a,h.axis),i&&h.fill&&JE(e.ctx,h,a))}},beforeDatasetsDraw(e,t,n){if(n.drawTime!=="beforeDatasetsDraw")return;const i=e.getSortedVisibleDatasetMetas();for(let r=i.length-1;r>=0;--r){const a=i[r].$filler;HV(a)&&JE(e.ctx,a,e.chartArea)}},beforeDatasetDraw(e,t,n){const i=t.meta.$filler;!HV(i)||n.drawTime!=="beforeDatasetDraw"||JE(e.ctx,i,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const XV=(e,t)=>{let{boxHeight:n=t,boxWidth:i=t}=e;return e.usePointStyle&&(n=Math.min(n,t),i=e.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(t,n)}},Lie=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class ZV extends Ah{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n,i){this.maxWidth=t,this.maxHeight=n,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let n=Hr(t.generateLabels,[this.chart],this)||[];t.filter&&(n=n.filter(i=>t.filter(i,this.chart.data))),t.sort&&(n=n.sort((i,r)=>t.sort(i,r,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:t,ctx:n}=this;if(!t.display){this.width=this.height=0;return}const i=t.labels,r=fo(i.font),a=r.size,l=this._computeTitleHeight(),{boxWidth:h,itemHeight:s}=XV(i,a);let p,v;n.font=r.string,this.isHorizontal()?(p=this.maxWidth,v=this._fitRows(l,a,h,s)+10):(v=this.maxHeight,p=this._fitCols(l,r,h,s)+10),this.width=Math.min(p,t.maxWidth||this.maxWidth),this.height=Math.min(v,t.maxHeight||this.maxHeight)}_fitRows(t,n,i,r){const{ctx:a,maxWidth:l,options:{labels:{padding:h}}}=this,s=this.legendHitBoxes=[],p=this.lineWidths=[0],v=r+h;let x=t;a.textAlign="left",a.textBaseline="middle";let T=-1,k=-v;return this.legendItems.forEach((P,M)=>{const L=i+n/2+a.measureText(P.text).width;(M===0||p[p.length-1]+L+2*h>l)&&(x+=v,p[p.length-(M>0?0:1)]=0,k+=v,T++),s[M]={left:0,top:k,row:T,width:L,height:r},p[p.length-1]+=L+h}),x}_fitCols(t,n,i,r){const{ctx:a,maxHeight:l,options:{labels:{padding:h}}}=this,s=this.legendHitBoxes=[],p=this.columnSizes=[],v=l-t;let x=h,T=0,k=0,P=0,M=0;return this.legendItems.forEach((L,B)=>{const{itemWidth:F,itemHeight:X}=Oie(i,n,a,L,r);B>0&&k+X+2*h>v&&(x+=T+h,p.push({width:T,height:k}),P+=T+h,M++,T=k=0),s[B]={left:P,top:k,col:M,width:F,height:X},T=Math.max(T,F),k+=X+h}),x+=T,p.push({width:T,height:k}),x}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:i,labels:{padding:r},rtl:a}}=this,l=E_(a,this.left,this.width);if(this.isHorizontal()){let h=0,s=Ea(i,this.left+r,this.right-this.lineWidths[h]);for(const p of n)h!==p.row&&(h=p.row,s=Ea(i,this.left+r,this.right-this.lineWidths[h])),p.top+=this.top+t+r,p.left=l.leftForLtr(l.x(s),p.width),s+=p.width+r}else{let h=0,s=Ea(i,this.top+t+r,this.bottom-this.columnSizes[h].height);for(const p of n)p.col!==h&&(h=p.col,s=Ea(i,this.top+t+r,this.bottom-this.columnSizes[h].height)),p.top=s,p.left+=this.left+r,p.left=l.leftForLtr(l.x(p.left),p.width),s+=p.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;cT(t,this),this._draw(),uT(t)}}_draw(){const{options:t,columnSizes:n,lineWidths:i,ctx:r}=this,{align:a,labels:l}=t,h=as.color,s=E_(t.rtl,this.left,this.width),p=fo(l.font),{padding:v}=l,x=p.size,T=x/2;let k;this.drawTitle(),r.textAlign=s.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=p.string;const{boxWidth:P,boxHeight:M,itemHeight:L}=XV(l,x),B=function(re,Z,$){if(isNaN(P)||P<=0||isNaN(M)||M<0)return;r.save();const H=yi($.lineWidth,1);if(r.fillStyle=yi($.fillStyle,h),r.lineCap=yi($.lineCap,"butt"),r.lineDashOffset=yi($.lineDashOffset,0),r.lineJoin=yi($.lineJoin,"miter"),r.lineWidth=H,r.strokeStyle=yi($.strokeStyle,h),r.setLineDash(yi($.lineDash,[])),l.usePointStyle){const W={radius:M*Math.SQRT2/2,pointStyle:$.pointStyle,rotation:$.rotation,borderWidth:H},te=s.xPlus(re,P/2),Y=Z+T;Q4(r,W,te,Y,l.pointStyleWidth&&P)}else{const W=Z+Math.max((x-M)/2,0),te=s.leftForLtr(re,P),Y=kp($.borderRadius);r.beginPath(),Object.values(Y).some(ne=>ne!==0)?Fb(r,{x:te,y:W,w:P,h:M,radius:Y}):r.rect(te,W,P,M),r.fill(),H!==0&&r.stroke()}r.restore()},F=function(re,Z,$){Fp(r,$.text,re,Z+L/2,p,{strikethrough:$.hidden,textAlign:s.textAlign($.textAlign)})},X=this.isHorizontal(),J=this._computeTitleHeight();X?k={x:Ea(a,this.left+v,this.right-i[0]),y:this.top+v+J,line:0}:k={x:this.left+v,y:Ea(a,this.top+J+v,this.bottom-n[0].height),line:0},a6(this.ctx,t.textDirection);const Q=L+v;this.legendItems.forEach((re,Z)=>{r.strokeStyle=re.fontColor,r.fillStyle=re.fontColor;const $=r.measureText(re.text).width,H=s.textAlign(re.textAlign||(re.textAlign=l.textAlign)),W=P+T+$;let te=k.x,Y=k.y;s.setWidth(this.width),X?Z>0&&te+W+v>this.right&&(Y=k.y+=Q,k.line++,te=k.x=Ea(a,this.left+v,this.right-i[k.line])):Z>0&&Y+Q>this.bottom&&(te=k.x=te+n[k.line].width+v,k.line++,Y=k.y=Ea(a,this.top+J+v,this.bottom-n[k.line].height));const ne=s.x(te);if(B(ne,Y,re),te=HQ(H,te+P+T,X?te+W:this.right,t.rtl),F(s.x(te),Y,re),X)k.x+=W+v;else if(typeof re.text!="string"){const Se=p.lineHeight;k.y+=L6(re,Se)+v}else k.y+=Q}),l6(this.ctx,t.textDirection)}drawTitle(){const t=this.options,n=t.title,i=fo(n.font),r=Na(n.padding);if(!n.display)return;const a=E_(t.rtl,this.left,this.width),l=this.ctx,h=n.position,s=i.size/2,p=r.top+s;let v,x=this.left,T=this.width;if(this.isHorizontal())T=Math.max(...this.lineWidths),v=this.top+p,x=Ea(t.align,x,this.right-T);else{const P=this.columnSizes.reduce((M,L)=>Math.max(M,L.height),0);v=p+Ea(t.align,this.top,this.bottom-P-t.labels.padding-this._computeTitleHeight())}const k=Ea(h,x,x+T);l.textAlign=a.textAlign(zA(h)),l.textBaseline="middle",l.strokeStyle=n.color,l.fillStyle=n.color,l.font=i.string,Fp(l,n.text,k,v,i)}_computeTitleHeight(){const t=this.options.title,n=fo(t.font),i=Na(t.padding);return t.display?n.lineHeight+i.height:0}_getLegendItemAt(t,n){let i,r,a;if(ih(t,this.left,this.right)&&ih(n,this.top,this.bottom)){for(a=this.legendHitBoxes,i=0;i<a.length;++i)if(r=a[i],ih(t,r.left,r.left+r.width)&&ih(n,r.top,r.top+r.height))return this.legendItems[i]}return null}handleEvent(t){const n=this.options;if(!Fie(t.type,n))return;const i=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const r=this._hoveredItem,a=Lie(r,i);r&&!a&&Hr(n.onLeave,[t,r,this],this),this._hoveredItem=i,i&&!a&&Hr(n.onHover,[t,i,this],this)}else i&&Hr(n.onClick,[t,i,this],this)}}function Oie(e,t,n,i,r){const a=Vie(i,e,t,n),l=Bie(r,i,t.lineHeight);return{itemWidth:a,itemHeight:l}}function Vie(e,t,n,i){let r=e.text;return r&&typeof r!="string"&&(r=r.reduce((a,l)=>a.length>l.length?a:l)),t+n.size/2+i.measureText(r).width}function Bie(e,t,n){let i=e;return typeof t.text!="string"&&(i=L6(t,n)),i}function L6(e,t){const n=e.text?e.text.length:0;return t*n}function Fie(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var zie={id:"legend",_element:ZV,start(e,t,n){const i=e.legend=new ZV({ctx:e.ctx,options:n,chart:e});Va.configure(e,i,n),Va.addBox(e,i)},stop(e){Va.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const i=e.legend;Va.configure(e,i,n),i.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const i=t.datasetIndex,r=n.chart;r.isDatasetVisible(i)?(r.hide(i),t.hidden=!0):(r.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:r,color:a,useBorderRadius:l,borderRadius:h}}=e.legend.options;return e._getSortedDatasetMetas().map(s=>{const p=s.controller.getStyle(n?0:void 0),v=Na(p.borderWidth);return{text:t[s.index].label,fillStyle:p.backgroundColor,fontColor:a,hidden:!s.visible,lineCap:p.borderCapStyle,lineDash:p.borderDash,lineDashOffset:p.borderDashOffset,lineJoin:p.borderJoinStyle,lineWidth:(v.width+v.height)/4,strokeStyle:p.borderColor,pointStyle:i||p.pointStyle,rotation:p.rotation,textAlign:r||p.textAlign,borderRadius:l&&(h||p.borderRadius),datasetIndex:s.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class ZA extends Ah{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=n;const r=os(i.text)?i.text.length:1;this._padding=Na(i.padding);const a=r*fo(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=a:this.width=a}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:n,left:i,bottom:r,right:a,options:l}=this,h=l.align;let s=0,p,v,x;return this.isHorizontal()?(v=Ea(h,i,a),x=n+t,p=a-i):(l.position==="left"?(v=i+t,x=Ea(h,r,n),s=cr*-.5):(v=a-t,x=Ea(h,n,r),s=cr*.5),p=r-n),{titleX:v,titleY:x,maxWidth:p,rotation:s}}draw(){const t=this.ctx,n=this.options;if(!n.display)return;const i=fo(n.font),a=i.lineHeight/2+this._padding.top,{titleX:l,titleY:h,maxWidth:s,rotation:p}=this._drawArgs(a);Fp(t,n.text,0,0,i,{color:n.color,maxWidth:s,rotation:p,textAlign:zA(n.align),textBaseline:"middle",translation:[l,h]})}}function Nie(e,t){const n=new ZA({ctx:e.ctx,options:t,chart:e});Va.configure(e,n,t),Va.addBox(e,n),e.titleBlock=n}var Uie={id:"title",_element:ZA,start(e,t,n){Nie(e,n)},stop(e){const t=e.titleBlock;Va.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const i=e.titleBlock;Va.configure(e,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Ux=new WeakMap;var $ie={id:"subtitle",start(e,t,n){const i=new ZA({ctx:e.ctx,options:n,chart:e});Va.configure(e,i,n),Va.addBox(e,i),Ux.set(e,i)},stop(e){Va.removeBox(e,Ux.get(e)),Ux.delete(e)},beforeUpdate(e,t,n){const i=Ux.get(e);Va.configure(e,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Iy={average(e){if(!e.length)return!1;let t,n,i=new Set,r=0,a=0;for(t=0,n=e.length;t<n;++t){const h=e[t].element;if(h&&h.hasValue()){const s=h.tooltipPosition();i.add(s.x),r+=s.y,++a}}return a===0||i.size===0?!1:{x:[...i].reduce((h,s)=>h+s)/i.size,y:r/a}},nearest(e,t){if(!e.length)return!1;let n=t.x,i=t.y,r=Number.POSITIVE_INFINITY,a,l,h;for(a=0,l=e.length;a<l;++a){const s=e[a].element;if(s&&s.hasValue()){const p=s.getCenterPoint(),v=lk(t,p);v<r&&(r=v,h=s)}}if(h){const s=h.tooltipPosition();n=s.x,i=s.y}return{x:n,y:i}}};function Vu(e,t){return t&&(os(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function Gd(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function jie(e,t){const{element:n,datasetIndex:i,index:r}=t,a=e.getDatasetMeta(i).controller,{label:l,value:h}=a.getLabelAndValue(r);return{chart:e,label:l,parsed:a.getParsed(r),raw:e.data.datasets[i].data[r],formattedValue:h,dataset:a.getDataset(),dataIndex:r,datasetIndex:i,element:n}}function YV(e,t){const n=e.chart.ctx,{body:i,footer:r,title:a}=e,{boxWidth:l,boxHeight:h}=t,s=fo(t.bodyFont),p=fo(t.titleFont),v=fo(t.footerFont),x=a.length,T=r.length,k=i.length,P=Na(t.padding);let M=P.height,L=0,B=i.reduce((J,Q)=>J+Q.before.length+Q.lines.length+Q.after.length,0);if(B+=e.beforeBody.length+e.afterBody.length,x&&(M+=x*p.lineHeight+(x-1)*t.titleSpacing+t.titleMarginBottom),B){const J=t.displayColors?Math.max(h,s.lineHeight):s.lineHeight;M+=k*J+(B-k)*s.lineHeight+(B-1)*t.bodySpacing}T&&(M+=t.footerMarginTop+T*v.lineHeight+(T-1)*t.footerSpacing);let F=0;const X=function(J){L=Math.max(L,n.measureText(J).width+F)};return n.save(),n.font=p.string,kr(e.title,X),n.font=s.string,kr(e.beforeBody.concat(e.afterBody),X),F=t.displayColors?l+2+t.boxPadding:0,kr(i,J=>{kr(J.before,X),kr(J.lines,X),kr(J.after,X)}),F=0,n.font=v.string,kr(e.footer,X),n.restore(),L+=P.width,{width:L,height:M}}function Wie(e,t){const{y:n,height:i}=t;return n<i/2?"top":n>e.height-i/2?"bottom":"center"}function Hie(e,t,n,i){const{x:r,width:a}=i,l=n.caretSize+n.caretPadding;if(e==="left"&&r+a+l>t.width||e==="right"&&r-a-l<0)return!0}function Gie(e,t,n,i){const{x:r,width:a}=n,{width:l,chartArea:{left:h,right:s}}=e;let p="center";return i==="center"?p=r<=(h+s)/2?"left":"right":r<=a/2?p="left":r>=l-a/2&&(p="right"),Hie(p,e,t,n)&&(p="center"),p}function JV(e,t,n){const i=n.yAlign||t.yAlign||Wie(e,n);return{xAlign:n.xAlign||t.xAlign||Gie(e,t,n,i),yAlign:i}}function qie(e,t){let{x:n,width:i}=e;return t==="right"?n-=i:t==="center"&&(n-=i/2),n}function Kie(e,t,n){let{y:i,height:r}=e;return t==="top"?i+=n:t==="bottom"?i-=r+n:i-=r/2,i}function QV(e,t,n,i){const{caretSize:r,caretPadding:a,cornerRadius:l}=e,{xAlign:h,yAlign:s}=n,p=r+a,{topLeft:v,topRight:x,bottomLeft:T,bottomRight:k}=kp(l);let P=qie(t,h);const M=Kie(t,s,p);return s==="center"?h==="left"?P+=p:h==="right"&&(P-=p):h==="left"?P-=Math.max(v,T)+r:h==="right"&&(P+=Math.max(x,k)+r),{x:Oo(P,0,i.width-t.width),y:Oo(M,0,i.height-t.height)}}function $x(e,t,n){const i=Na(n.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-i.right:e.x+i.left}function eB(e){return Vu([],Gd(e))}function Xie(e,t,n){return am(e,{tooltip:t,tooltipItems:n,type:"tooltip"})}function tB(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const O6={beforeTitle:Wd,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,i=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return n[t.dataIndex]}return""},afterTitle:Wd,beforeBody:Wd,beforeLabel:Wd,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return Ri(n)||(t+=n),t},labelColor(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Wd,afterBody:Wd,beforeFooter:Wd,footer:Wd,afterFooter:Wd};function wl(e,t,n,i){const r=e[t].call(n,i);return typeof r>"u"?O6[t].call(n,i):r}let nB=class extends Ah{static positioners=Iy;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const n=this.chart,i=this.options.setContext(this.getContext()),r=i.enabled&&n.options.animation&&i.animations,a=new f6(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(a)),a}getContext(){return this.$context||(this.$context=Xie(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,n){const{callbacks:i}=n,r=wl(i,"beforeTitle",this,t),a=wl(i,"title",this,t),l=wl(i,"afterTitle",this,t);let h=[];return h=Vu(h,Gd(r)),h=Vu(h,Gd(a)),h=Vu(h,Gd(l)),h}getBeforeBody(t,n){return eB(wl(n.callbacks,"beforeBody",this,t))}getBody(t,n){const{callbacks:i}=n,r=[];return kr(t,a=>{const l={before:[],lines:[],after:[]},h=tB(i,a);Vu(l.before,Gd(wl(h,"beforeLabel",this,a))),Vu(l.lines,wl(h,"label",this,a)),Vu(l.after,Gd(wl(h,"afterLabel",this,a))),r.push(l)}),r}getAfterBody(t,n){return eB(wl(n.callbacks,"afterBody",this,t))}getFooter(t,n){const{callbacks:i}=n,r=wl(i,"beforeFooter",this,t),a=wl(i,"footer",this,t),l=wl(i,"afterFooter",this,t);let h=[];return h=Vu(h,Gd(r)),h=Vu(h,Gd(a)),h=Vu(h,Gd(l)),h}_createItems(t){const n=this._active,i=this.chart.data,r=[],a=[],l=[];let h=[],s,p;for(s=0,p=n.length;s<p;++s)h.push(jie(this.chart,n[s]));return t.filter&&(h=h.filter((v,x,T)=>t.filter(v,x,T,i))),t.itemSort&&(h=h.sort((v,x)=>t.itemSort(v,x,i))),kr(h,v=>{const x=tB(t.callbacks,v);r.push(wl(x,"labelColor",this,v)),a.push(wl(x,"labelPointStyle",this,v)),l.push(wl(x,"labelTextColor",this,v))}),this.labelColors=r,this.labelPointStyles=a,this.labelTextColors=l,this.dataPoints=h,h}update(t,n){const i=this.options.setContext(this.getContext()),r=this._active;let a,l=[];if(!r.length)this.opacity!==0&&(a={opacity:0});else{const h=Iy[i.position].call(this,r,this._eventPosition);l=this._createItems(i),this.title=this.getTitle(l,i),this.beforeBody=this.getBeforeBody(l,i),this.body=this.getBody(l,i),this.afterBody=this.getAfterBody(l,i),this.footer=this.getFooter(l,i);const s=this._size=YV(this,i),p=Object.assign({},h,s),v=JV(this.chart,i,p),x=QV(i,p,v,this.chart);this.xAlign=v.xAlign,this.yAlign=v.yAlign,a={opacity:1,x:x.x,y:x.y,width:s.width,height:s.height,caretX:h.x,caretY:h.y}}this._tooltipItems=l,this.$context=void 0,a&&this._resolveAnimations().update(this,a),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(t,n,i,r){const a=this.getCaretPosition(t,i,r);n.lineTo(a.x1,a.y1),n.lineTo(a.x2,a.y2),n.lineTo(a.x3,a.y3)}getCaretPosition(t,n,i){const{xAlign:r,yAlign:a}=this,{caretSize:l,cornerRadius:h}=i,{topLeft:s,topRight:p,bottomLeft:v,bottomRight:x}=kp(h),{x:T,y:k}=t,{width:P,height:M}=n;let L,B,F,X,J,Q;return a==="center"?(J=k+M/2,r==="left"?(L=T,B=L-l,X=J+l,Q=J-l):(L=T+P,B=L+l,X=J-l,Q=J+l),F=L):(r==="left"?B=T+Math.max(s,v)+l:r==="right"?B=T+P-Math.max(p,x)-l:B=this.caretX,a==="top"?(X=k,J=X-l,L=B-l,F=B+l):(X=k+M,J=X+l,L=B+l,F=B-l),Q=X),{x1:L,x2:B,x3:F,y1:X,y2:J,y3:Q}}drawTitle(t,n,i){const r=this.title,a=r.length;let l,h,s;if(a){const p=E_(i.rtl,this.x,this.width);for(t.x=$x(this,i.titleAlign,i),n.textAlign=p.textAlign(i.titleAlign),n.textBaseline="middle",l=fo(i.titleFont),h=i.titleSpacing,n.fillStyle=i.titleColor,n.font=l.string,s=0;s<a;++s)n.fillText(r[s],p.x(t.x),t.y+l.lineHeight/2),t.y+=l.lineHeight+h,s+1===a&&(t.y+=i.titleMarginBottom-h)}}_drawColorBox(t,n,i,r,a){const l=this.labelColors[i],h=this.labelPointStyles[i],{boxHeight:s,boxWidth:p}=a,v=fo(a.bodyFont),x=$x(this,"left",a),T=r.x(x),k=s<v.lineHeight?(v.lineHeight-s)/2:0,P=n.y+k;if(a.usePointStyle){const M={radius:Math.min(p,s)/2,pointStyle:h.pointStyle,rotation:h.rotation,borderWidth:1},L=r.leftForLtr(T,p)+p/2,B=P+s/2;t.strokeStyle=a.multiKeyBackground,t.fillStyle=a.multiKeyBackground,uk(t,M,L,B),t.strokeStyle=l.borderColor,t.fillStyle=l.backgroundColor,uk(t,M,L,B)}else{t.lineWidth=Bi(l.borderWidth)?Math.max(...Object.values(l.borderWidth)):l.borderWidth||1,t.strokeStyle=l.borderColor,t.setLineDash(l.borderDash||[]),t.lineDashOffset=l.borderDashOffset||0;const M=r.leftForLtr(T,p),L=r.leftForLtr(r.xPlus(T,1),p-2),B=kp(l.borderRadius);Object.values(B).some(F=>F!==0)?(t.beginPath(),t.fillStyle=a.multiKeyBackground,Fb(t,{x:M,y:P,w:p,h:s,radius:B}),t.fill(),t.stroke(),t.fillStyle=l.backgroundColor,t.beginPath(),Fb(t,{x:L,y:P+1,w:p-2,h:s-2,radius:B}),t.fill()):(t.fillStyle=a.multiKeyBackground,t.fillRect(M,P,p,s),t.strokeRect(M,P,p,s),t.fillStyle=l.backgroundColor,t.fillRect(L,P+1,p-2,s-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,n,i){const{body:r}=this,{bodySpacing:a,bodyAlign:l,displayColors:h,boxHeight:s,boxWidth:p,boxPadding:v}=i,x=fo(i.bodyFont);let T=x.lineHeight,k=0;const P=E_(i.rtl,this.x,this.width),M=function($){n.fillText($,P.x(t.x+k),t.y+T/2),t.y+=T+a},L=P.textAlign(l);let B,F,X,J,Q,re,Z;for(n.textAlign=l,n.textBaseline="middle",n.font=x.string,t.x=$x(this,L,i),n.fillStyle=i.bodyColor,kr(this.beforeBody,M),k=h&&L!=="right"?l==="center"?p/2+v:p+2+v:0,J=0,re=r.length;J<re;++J){for(B=r[J],F=this.labelTextColors[J],n.fillStyle=F,kr(B.before,M),X=B.lines,h&&X.length&&(this._drawColorBox(n,t,J,P,i),T=Math.max(x.lineHeight,s)),Q=0,Z=X.length;Q<Z;++Q)M(X[Q]),T=x.lineHeight;kr(B.after,M)}k=0,T=x.lineHeight,kr(this.afterBody,M),t.y-=a}drawFooter(t,n,i){const r=this.footer,a=r.length;let l,h;if(a){const s=E_(i.rtl,this.x,this.width);for(t.x=$x(this,i.footerAlign,i),t.y+=i.footerMarginTop,n.textAlign=s.textAlign(i.footerAlign),n.textBaseline="middle",l=fo(i.footerFont),n.fillStyle=i.footerColor,n.font=l.string,h=0;h<a;++h)n.fillText(r[h],s.x(t.x),t.y+l.lineHeight/2),t.y+=l.lineHeight+i.footerSpacing}}drawBackground(t,n,i,r){const{xAlign:a,yAlign:l}=this,{x:h,y:s}=t,{width:p,height:v}=i,{topLeft:x,topRight:T,bottomLeft:k,bottomRight:P}=kp(r.cornerRadius);n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.beginPath(),n.moveTo(h+x,s),l==="top"&&this.drawCaret(t,n,i,r),n.lineTo(h+p-T,s),n.quadraticCurveTo(h+p,s,h+p,s+T),l==="center"&&a==="right"&&this.drawCaret(t,n,i,r),n.lineTo(h+p,s+v-P),n.quadraticCurveTo(h+p,s+v,h+p-P,s+v),l==="bottom"&&this.drawCaret(t,n,i,r),n.lineTo(h+k,s+v),n.quadraticCurveTo(h,s+v,h,s+v-k),l==="center"&&a==="left"&&this.drawCaret(t,n,i,r),n.lineTo(h,s+x),n.quadraticCurveTo(h,s,h+x,s),n.closePath(),n.fill(),r.borderWidth>0&&n.stroke()}_updateAnimationTarget(t){const n=this.chart,i=this.$animations,r=i&&i.x,a=i&&i.y;if(r||a){const l=Iy[t.position].call(this,this._active,this._eventPosition);if(!l)return;const h=this._size=YV(this,t),s=Object.assign({},l,this._size),p=JV(n,t,s),v=QV(t,s,p,n);(r._to!==v.x||a._to!==v.y)&&(this.xAlign=p.xAlign,this.yAlign=p.yAlign,this.width=h.width,this.height=h.height,this.caretX=l.x,this.caretY=l.y,this._resolveAnimations().update(this,v))}}_willRender(){return!!this.opacity}draw(t){const n=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(n);const r={width:this.width,height:this.height},a={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const l=Na(n.padding),h=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&h&&(t.save(),t.globalAlpha=i,this.drawBackground(a,t,r,n),a6(t,n.textDirection),a.y+=l.top,this.drawTitle(a,t,n),this.drawBody(a,t,n),this.drawFooter(a,t,n),l6(t,n.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,n){const i=this._active,r=t.map(({datasetIndex:h,index:s})=>{const p=this.chart.getDatasetMeta(h);if(!p)throw new Error("Cannot find a dataset at index "+h);return{datasetIndex:h,element:p.data[s],index:s}}),a=!n1(i,r),l=this._positionChanged(r,n);(a||l)&&(this._active=r,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,n,i=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,a=this._active||[],l=this._getActiveElements(t,a,n,i),h=this._positionChanged(l,t),s=n||!n1(l,a)||h;return s&&(this._active=l,(r.enabled||r.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,n))),s}_getActiveElements(t,n,i,r){const a=this.options;if(t.type==="mouseout")return[];if(!r)return n.filter(h=>this.chart.data.datasets[h.datasetIndex]&&this.chart.getDatasetMeta(h.datasetIndex).controller.getParsed(h.index)!==void 0);const l=this.chart.getElementsAtEventForMode(t,a.mode,a,i);return a.reverse&&l.reverse(),l}_positionChanged(t,n){const{caretX:i,caretY:r,options:a}=this,l=Iy[a.position].call(this,t,n);return l!==!1&&(i!==l.x||r!==l.y)}};var Zie={id:"tooltip",_element:nB,positioners:Iy,afterInit(e,t,n){n&&(e.tooltip=new nB({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:O6},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},Yie=Object.freeze({__proto__:null,Colors:cie,Decimation:fie,Filler:Rie,Legend:zie,SubTitle:$ie,Title:Uie,Tooltip:Zie});const Jie=(e,t,n,i)=>(typeof t=="string"?(n=e.push(t)-1,i.unshift({index:n,label:t})):isNaN(t)&&(n=null),n);function Qie(e,t,n,i){const r=e.indexOf(t);if(r===-1)return Jie(e,t,n,i);const a=e.lastIndexOf(t);return r!==a?n:r}const ere=(e,t)=>e===null?null:Oo(Math.round(e),0,t);function iB(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class tre extends og{static id="category";static defaults={ticks:{callback:iB}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const n=this._addedLabels;if(n.length){const i=this.getLabels();for(const{index:r,label:a}of n)i[r]===a&&i.splice(r,1);this._addedLabels=[]}super.init(t)}parse(t,n){if(Ri(t))return null;const i=this.getLabels();return n=isFinite(n)&&i[n]===t?n:Qie(i,t,yi(n,t),this._addedLabels),ere(n,i.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:i,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(i=0),n||(r=this.getLabels().length-1)),this.min=i,this.max=r}buildTicks(){const t=this.min,n=this.max,i=this.options.offset,r=[];let a=this.getLabels();a=t===0&&n===a.length-1?a:a.slice(t,n+1),this._valueRange=Math.max(a.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let l=t;l<=n;l++)r.push({value:l});return r}getLabelForValue(t){return iB.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}function nre(e,t){const n=[],{bounds:r,step:a,min:l,max:h,precision:s,count:p,maxTicks:v,maxDigits:x,includeBounds:T}=e,k=a||1,P=v-1,{min:M,max:L}=t,B=!Ri(l),F=!Ri(h),X=!Ri(p),J=(L-M)/(x+1);let Q=YO((L-M)/P/k)*k,re,Z,$,H;if(Q<1e-14&&!B&&!F)return[{value:M},{value:L}];H=Math.ceil(L/Q)-Math.floor(M/Q),H>P&&(Q=YO(H*Q/P/k)*k),Ri(s)||(re=Math.pow(10,s),Q=Math.ceil(Q*re)/re),r==="ticks"?(Z=Math.floor(M/Q)*Q,$=Math.ceil(L/Q)*Q):(Z=M,$=L),B&&F&&a&&FQ((h-l)/a,Q/1e3)?(H=Math.round(Math.min((h-l)/Q,v)),Q=(h-l)/H,Z=l,$=h):X?(Z=B?l:Z,$=F?h:$,H=p-1,Q=($-Z)/H):(H=($-Z)/Q,Ky(H,Math.round(H),Q/1e3)?H=Math.round(H):H=Math.ceil(H));const W=Math.max(JO(Q),JO(Z));re=Math.pow(10,Ri(s)?W:s),Z=Math.round(Z*re)/re,$=Math.round($*re)/re;let te=0;for(B&&(T&&Z!==l?(n.push({value:l}),Z<l&&te++,Ky(Math.round((Z+te*Q)*re)/re,l,rB(l,J,e))&&te++):Z<l&&te++);te<H;++te){const Y=Math.round((Z+te*Q)*re)/re;if(F&&Y>h)break;n.push({value:Y})}return F&&T&&$!==h?n.length&&Ky(n[n.length-1].value,h,rB(h,J,e))?n[n.length-1].value=h:n.push({value:h}):(!F||$===h)&&n.push({value:$}),n}function rB(e,t,{horizontal:n,minRotation:i}){const r=ru(i),a=(n?Math.sin(r):Math.cos(r))||.001,l=.75*t*(""+e).length;return Math.min(t/a,l)}class c1 extends og{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,n){return Ri(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:n,maxDefined:i}=this.getUserBounds();let{min:r,max:a}=this;const l=s=>r=n?r:s,h=s=>a=i?a:s;if(t){const s=qu(r),p=qu(a);s<0&&p<0?h(0):s>0&&p>0&&l(0)}if(r===a){let s=a===0?1:Math.abs(a*.05);h(a+s),t||l(r-s)}this.min=r,this.max=a}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:n,stepSize:i}=t,r;return i?(r=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),n=n||11),n&&(r=Math.min(n,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,n=t.ticks;let i=this.getTickLimit();i=Math.max(2,i);const r={maxTicks:i,bounds:t.bounds,min:t.min,max:t.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},a=this._range||this,l=nre(r,a);return t.bounds==="ticks"&&W4(l,this,"value"),t.reverse?(l.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),l}configure(){const t=this.ticks;let n=this.min,i=this.max;if(super.configure(),this.options.offset&&t.length){const r=(i-n)/Math.max(t.length-1,1)/2;n-=r,i+=r}this._startValue=n,this._endValue=i,this._valueRange=i-n}getLabelForValue(t){return y0(t,this.chart.options.locale,this.options.ticks.format)}}class ire extends c1{static id="linear";static defaults={ticks:{callback:lT.formatters.numeric}};determineDataLimits(){const{min:t,max:n}=this.getMinMax(!0);this.min=Ds(t)?t:0,this.max=Ds(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),n=t?this.width:this.height,i=ru(this.options.ticks.minRotation),r=(t?Math.sin(i):Math.cos(i))||.001,a=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,a.lineHeight/r))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}const Nb=e=>Math.floor(kf(e)),rp=(e,t)=>Math.pow(10,Nb(e)+t);function sB(e){return e/Math.pow(10,Nb(e))===1}function oB(e,t,n){const i=Math.pow(10,n),r=Math.floor(e/i);return Math.ceil(t/i)-r}function rre(e,t){const n=t-e;let i=Nb(n);for(;oB(e,t,i)>10;)i++;for(;oB(e,t,i)<10;)i--;return Math.min(i,Nb(e))}function sre(e,{min:t,max:n}){t=Gl(e.min,t);const i=[],r=Nb(t);let a=rre(t,n),l=a<0?Math.pow(10,Math.abs(a)):1;const h=Math.pow(10,a),s=r>a?Math.pow(10,r):0,p=Math.round((t-s)*l)/l,v=Math.floor((t-s)/h/10)*h*10;let x=Math.floor((p-v)/Math.pow(10,a)),T=Gl(e.min,Math.round((s+v+x*Math.pow(10,a))*l)/l);for(;T<n;)i.push({value:T,major:sB(T),significand:x}),x>=10?x=x<15?15:20:x++,x>=20&&(a++,x=2,l=a>=0?1:l),T=Math.round((s+v+x*Math.pow(10,a))*l)/l;const k=Gl(e.max,T);return i.push({value:k,major:sB(k),significand:x}),i}class ore extends og{static id="logarithmic";static defaults={ticks:{callback:lT.formatters.logarithmic,major:{enabled:!0}}};constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,n){const i=c1.prototype.parse.apply(this,[t,n]);if(i===0){this._zero=!0;return}return Ds(i)&&i>0?i:null}determineDataLimits(){const{min:t,max:n}=this.getMinMax(!0);this.min=Ds(t)?Math.max(0,t):null,this.max=Ds(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Ds(this._userMin)&&(this.min=t===rp(this.min,0)?rp(this.min,-1):rp(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:n}=this.getUserBounds();let i=this.min,r=this.max;const a=h=>i=t?i:h,l=h=>r=n?r:h;i===r&&(i<=0?(a(1),l(10)):(a(rp(i,-1)),l(rp(r,1)))),i<=0&&a(rp(r,-1)),r<=0&&l(rp(i,1)),this.min=i,this.max=r}buildTicks(){const t=this.options,n={min:this._userMin,max:this._userMax},i=sre(n,this);return t.bounds==="ticks"&&W4(i,this,"value"),t.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(t){return t===void 0?"0":y0(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=kf(t),this._valueRange=kf(this.max)-kf(t)}getPixelForValue(t){return(t===void 0||t===0)&&(t=this.min),t===null||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(kf(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const n=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+n*this._valueRange)}}function gk(e){const t=e.ticks;if(t.display&&e.display){const n=Na(t.backdropPadding);return yi(t.font&&t.font.size,as.font.size)+n.height}return 0}function are(e,t,n){return n=os(n)?n:[n],{w:tee(e,t.string,n),h:n.length*t.lineHeight}}function aB(e,t,n,i,r){return e===i||e===r?{start:t-n/2,end:t+n/2}:e<i||e>r?{start:t-n,end:t}:{start:t,end:t+n}}function lre(e){const t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},n=Object.assign({},t),i=[],r=[],a=e._pointLabels.length,l=e.options.pointLabels,h=l.centerPointLabels?cr/a:0;for(let s=0;s<a;s++){const p=l.setContext(e.getPointLabelContext(s));r[s]=p.padding;const v=e.getPointPosition(s,e.drawingArea+r[s],h),x=fo(p.font),T=are(e.ctx,x,e._pointLabels[s]);i[s]=T;const k=Ia(e.getIndexAngle(s)+h),P=Math.round(BA(k)),M=aB(P,v.x,T.w,0,180),L=aB(P,v.y,T.h,90,270);cre(n,t,k,M,L)}e.setCenterPoint(t.l-n.l,n.r-t.r,t.t-n.t,n.b-t.b),e._pointLabelItems=hre(e,i,r)}function cre(e,t,n,i,r){const a=Math.abs(Math.sin(n)),l=Math.abs(Math.cos(n));let h=0,s=0;i.start<t.l?(h=(t.l-i.start)/a,e.l=Math.min(e.l,t.l-h)):i.end>t.r&&(h=(i.end-t.r)/a,e.r=Math.max(e.r,t.r+h)),r.start<t.t?(s=(t.t-r.start)/l,e.t=Math.min(e.t,t.t-s)):r.end>t.b&&(s=(r.end-t.b)/l,e.b=Math.max(e.b,t.b+s))}function ure(e,t,n){const i=e.drawingArea,{extra:r,additionalAngle:a,padding:l,size:h}=n,s=e.getPointPosition(t,i+r+l,a),p=Math.round(BA(Ia(s.angle+js))),v=pre(s.y,h.h,p),x=fre(p),T=mre(s.x,h.w,x);return{visible:!0,x:s.x,y:v,textAlign:x,left:T,top:v,right:T+h.w,bottom:v+h.h}}function dre(e,t){if(!t)return!0;const{left:n,top:i,right:r,bottom:a}=e;return!(sh({x:n,y:i},t)||sh({x:n,y:a},t)||sh({x:r,y:i},t)||sh({x:r,y:a},t))}function hre(e,t,n){const i=[],r=e._pointLabels.length,a=e.options,{centerPointLabels:l,display:h}=a.pointLabels,s={extra:gk(a)/2,additionalAngle:l?cr/r:0};let p;for(let v=0;v<r;v++){s.padding=n[v],s.size=t[v];const x=ure(e,v,s);i.push(x),h==="auto"&&(x.visible=dre(x,p),x.visible&&(p=x))}return i}function fre(e){return e===0||e===180?"center":e<180?"left":"right"}function mre(e,t,n){return n==="right"?e-=t:n==="center"&&(e-=t/2),e}function pre(e,t,n){return n===90||n===270?e-=t/2:(n>270||n<90)&&(e-=t),e}function gre(e,t,n){const{left:i,top:r,right:a,bottom:l}=n,{backdropColor:h}=t;if(!Ri(h)){const s=kp(t.borderRadius),p=Na(t.backdropPadding);e.fillStyle=h;const v=i-p.left,x=r-p.top,T=a-i+p.width,k=l-r+p.height;Object.values(s).some(P=>P!==0)?(e.beginPath(),Fb(e,{x:v,y:x,w:T,h:k,radius:s}),e.fill()):e.fillRect(v,x,T,k)}}function _re(e,t){const{ctx:n,options:{pointLabels:i}}=e;for(let r=t-1;r>=0;r--){const a=e._pointLabelItems[r];if(!a.visible)continue;const l=i.setContext(e.getPointLabelContext(r));gre(n,l,a);const h=fo(l.font),{x:s,y:p,textAlign:v}=a;Fp(n,e._pointLabels[r],s,p+h.lineHeight/2,h,{color:l.color,textAlign:v,textBaseline:"middle"})}}function V6(e,t,n,i){const{ctx:r}=e;if(n)r.arc(e.xCenter,e.yCenter,t,0,Zr);else{let a=e.getPointPosition(0,t);r.moveTo(a.x,a.y);for(let l=1;l<i;l++)a=e.getPointPosition(l,t),r.lineTo(a.x,a.y)}}function vre(e,t,n,i,r){const a=e.ctx,l=t.circular,{color:h,lineWidth:s}=t;!l&&!i||!h||!s||n<0||(a.save(),a.strokeStyle=h,a.lineWidth=s,a.setLineDash(r.dash||[]),a.lineDashOffset=r.dashOffset,a.beginPath(),V6(e,n,l,i),a.closePath(),a.stroke(),a.restore())}function yre(e,t,n){return am(e,{label:n,index:t,type:"pointLabel"})}class bre extends c1{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:lT.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(t){return t},padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=Na(gk(this.options)/2),n=this.width=this.maxWidth-t.width,i=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+n/2+t.left),this.yCenter=Math.floor(this.top+i/2+t.top),this.drawingArea=Math.floor(Math.min(n,i)/2)}determineDataLimits(){const{min:t,max:n}=this.getMinMax(!1);this.min=Ds(t)&&!isNaN(t)?t:0,this.max=Ds(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/gk(this.options))}generateTickLabels(t){c1.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((n,i)=>{const r=Hr(this.options.pointLabels.callback,[n,i],this);return r||r===0?r:""}).filter((n,i)=>this.chart.getDataVisibility(i))}fit(){const t=this.options;t.display&&t.pointLabels.display?lre(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,n,i,r){this.xCenter+=Math.floor((t-n)/2),this.yCenter+=Math.floor((i-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,n,i,r))}getIndexAngle(t){const n=Zr/(this._pointLabels.length||1),i=this.options.startAngle||0;return Ia(t*n+ru(i))}getDistanceFromCenterForValue(t){if(Ri(t))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*n:(t-this.min)*n}getValueForDistanceFromCenter(t){if(Ri(t))return NaN;const n=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(t){const n=this._pointLabels||[];if(t>=0&&t<n.length){const i=n[t];return yre(this.getContext(),t,i)}}getPointPosition(t,n,i=0){const r=this.getIndexAngle(t)-js+i;return{x:Math.cos(r)*n+this.xCenter,y:Math.sin(r)*n+this.yCenter,angle:r}}getPointPositionForValue(t,n){return this.getPointPosition(t,this.getDistanceFromCenterForValue(n))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:n,top:i,right:r,bottom:a}=this._pointLabelItems[t];return{left:n,top:i,right:r,bottom:a}}drawBackground(){const{backgroundColor:t,grid:{circular:n}}=this.options;if(t){const i=this.ctx;i.save(),i.beginPath(),V6(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),i.closePath(),i.fillStyle=t,i.fill(),i.restore()}}drawGrid(){const t=this.ctx,n=this.options,{angleLines:i,grid:r,border:a}=n,l=this._pointLabels.length;let h,s,p;if(n.pointLabels.display&&_re(this,l),r.display&&this.ticks.forEach((v,x)=>{if(x!==0||x===0&&this.min<0){s=this.getDistanceFromCenterForValue(v.value);const T=this.getContext(x),k=r.setContext(T),P=a.setContext(T);vre(this,k,s,l,P)}}),i.display){for(t.save(),h=l-1;h>=0;h--){const v=i.setContext(this.getPointLabelContext(h)),{color:x,lineWidth:T}=v;!T||!x||(t.lineWidth=T,t.strokeStyle=x,t.setLineDash(v.borderDash),t.lineDashOffset=v.borderDashOffset,s=this.getDistanceFromCenterForValue(n.reverse?this.min:this.max),p=this.getPointPosition(h,s),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(p.x,p.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,n=this.options,i=n.ticks;if(!i.display)return;const r=this.getIndexAngle(0);let a,l;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(r),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((h,s)=>{if(s===0&&this.min>=0&&!n.reverse)return;const p=i.setContext(this.getContext(s)),v=fo(p.font);if(a=this.getDistanceFromCenterForValue(this.ticks[s].value),p.showLabelBackdrop){t.font=v.string,l=t.measureText(h.label).width,t.fillStyle=p.backdropColor;const x=Na(p.backdropPadding);t.fillRect(-l/2-x.left,-a-v.size/2-x.top,l+x.width,v.size+x.height)}Fp(t,h.label,0,-a,v,{color:p.color,strokeColor:p.textStrokeColor,strokeWidth:p.textStrokeWidth})}),t.restore()}drawTitle(){}}const pT={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Sl=Object.keys(pT);function lB(e,t){return e-t}function cB(e,t){if(Ri(t))return null;const n=e._adapter,{parser:i,round:r,isoWeekday:a}=e._parseOpts;let l=t;return typeof i=="function"&&(l=i(l)),Ds(l)||(l=typeof i=="string"?n.parse(l,i):n.parse(l)),l===null?null:(r&&(l=r==="week"&&(H_(a)||a===!0)?n.startOf(l,"isoWeek",a):n.startOf(l,r)),+l)}function uB(e,t,n,i){const r=Sl.length;for(let a=Sl.indexOf(e);a<r-1;++a){const l=pT[Sl[a]],h=l.steps?l.steps:Number.MAX_SAFE_INTEGER;if(l.common&&Math.ceil((n-t)/(h*l.size))<=i)return Sl[a]}return Sl[r-1]}function xre(e,t,n,i,r){for(let a=Sl.length-1;a>=Sl.indexOf(n);a--){const l=Sl[a];if(pT[l].common&&e._adapter.diff(r,i,l)>=t-1)return l}return Sl[n?Sl.indexOf(n):0]}function wre(e){for(let t=Sl.indexOf(e)+1,n=Sl.length;t<n;++t)if(pT[Sl[t]].common)return Sl[t]}function dB(e,t,n){if(!n)e[t]=!0;else if(n.length){const{lo:i,hi:r}=FA(n,t),a=n[i]>=t?n[i]:n[r];e[a]=!0}}function Tre(e,t,n,i){const r=e._adapter,a=+r.startOf(t[0].value,i),l=t[t.length-1].value;let h,s;for(h=a;h<=l;h=+r.add(h,1,i))s=n[h],s>=0&&(t[s].major=!0);return t}function hB(e,t,n){const i=[],r={},a=t.length;let l,h;for(l=0;l<a;++l)h=t[l],r[h]=l,i.push({value:h,major:!1});return a===0||!n?i:Tre(e,i,r,n)}class _k extends og{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,n={}){const i=t.time||(t.time={}),r=this._adapter=new Ste._date(t.adapters.date);r.init(n),qy(i.displayFormats,r.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=n.normalized}parse(t,n){return t===void 0?null:cB(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,n=this._adapter,i=t.time.unit||"day";let{min:r,max:a,minDefined:l,maxDefined:h}=this.getUserBounds();function s(p){!l&&!isNaN(p.min)&&(r=Math.min(r,p.min)),!h&&!isNaN(p.max)&&(a=Math.max(a,p.max))}(!l||!h)&&(s(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&s(this.getMinMax(!1))),r=Ds(r)&&!isNaN(r)?r:+n.startOf(Date.now(),i),a=Ds(a)&&!isNaN(a)?a:+n.endOf(Date.now(),i)+1,this.min=Math.min(r,a-1),this.max=Math.max(r+1,a)}_getLabelBounds(){const t=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(n=t[0],i=t[t.length-1]),{min:n,max:i}}buildTicks(){const t=this.options,n=t.time,i=t.ticks,r=i.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const a=this.min,l=this.max,h=$Q(r,a,l);return this._unit=n.unit||(i.autoSkip?uB(n.minUnit,this.min,this.max,this._getLabelCapacity(a)):xre(this,h.length,n.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:wre(this._unit),this.initOffsets(r),t.reverse&&h.reverse(),hB(this,h,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let n=0,i=0,r,a;this.options.offset&&t.length&&(r=this.getDecimalForValue(t[0]),t.length===1?n=1-r:n=(this.getDecimalForValue(t[1])-r)/2,a=this.getDecimalForValue(t[t.length-1]),t.length===1?i=a:i=(a-this.getDecimalForValue(t[t.length-2]))/2);const l=t.length<3?.5:.25;n=Oo(n,0,l),i=Oo(i,0,l),this._offsets={start:n,end:i,factor:1/(n+1+i)}}_generate(){const t=this._adapter,n=this.min,i=this.max,r=this.options,a=r.time,l=a.unit||uB(a.minUnit,n,i,this._getLabelCapacity(n)),h=yi(r.ticks.stepSize,1),s=l==="week"?a.isoWeekday:!1,p=H_(s)||s===!0,v={};let x=n,T,k;if(p&&(x=+t.startOf(x,"isoWeek",s)),x=+t.startOf(x,p?"day":l),t.diff(i,n,l)>1e5*h)throw new Error(n+" and "+i+" are too far apart with stepSize of "+h+" "+l);const P=r.ticks.source==="data"&&this.getDataTimestamps();for(T=x,k=0;T<i;T=+t.add(T,h,l),k++)dB(v,T,P);return(T===i||r.bounds==="ticks"||k===1)&&dB(v,T,P),Object.keys(v).sort(lB).map(M=>+M)}getLabelForValue(t){const n=this._adapter,i=this.options.time;return i.tooltipFormat?n.format(t,i.tooltipFormat):n.format(t,i.displayFormats.datetime)}format(t,n){const r=this.options.time.displayFormats,a=this._unit,l=n||r[a];return this._adapter.format(t,l)}_tickFormatFunction(t,n,i,r){const a=this.options,l=a.ticks.callback;if(l)return Hr(l,[t,n,i],this);const h=a.time.displayFormats,s=this._unit,p=this._majorUnit,v=s&&h[s],x=p&&h[p],T=i[n],k=p&&x&&T&&T.major;return this._adapter.format(t,r||(k?x:v))}generateTickLabels(t){let n,i,r;for(n=0,i=t.length;n<i;++n)r=t[n],r.label=this._tickFormatFunction(r.value,n,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const n=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((n.start+i)*n.factor)}getValueForPixel(t){const n=this._offsets,i=this.getDecimalForPixel(t)/n.factor-n.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){const n=this.options.ticks,i=this.ctx.measureText(t).width,r=ru(this.isHorizontal()?n.maxRotation:n.minRotation),a=Math.cos(r),l=Math.sin(r),h=this._resolveTickFontOptions(0).size;return{w:i*a+h*l,h:i*l+h*a}}_getLabelCapacity(t){const n=this.options.time,i=n.displayFormats,r=i[n.unit]||i.millisecond,a=this._tickFormatFunction(t,0,hB(this,[t],this._majorUnit),r),l=this._getLabelSize(a),h=Math.floor(this.isHorizontal()?this.width/l.w:this.height/l.h)-1;return h>0?h:1}getDataTimestamps(){let t=this._cache.data||[],n,i;if(t.length)return t;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(n=0,i=r.length;n<i;++n)t=t.concat(r[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let n,i;if(t.length)return t;const r=this.getLabels();for(n=0,i=r.length;n<i;++n)t.push(cB(this,r[n]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return q4(t.sort(lB))}}function jx(e,t,n){let i=0,r=e.length-1,a,l,h,s;n?(t>=e[i].pos&&t<=e[r].pos&&({lo:i,hi:r}=rh(e,"pos",t)),{pos:a,time:h}=e[i],{pos:l,time:s}=e[r]):(t>=e[i].time&&t<=e[r].time&&({lo:i,hi:r}=rh(e,"time",t)),{time:a,pos:h}=e[i],{time:l,pos:s}=e[r]);const p=l-a;return p?h+(s-h)*(t-a)/p:h}class Sre extends _k{static id="timeseries";static defaults=_k.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(t);this._minPos=jx(n,this.min),this._tableRange=jx(n,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:n,max:i}=this,r=[],a=[];let l,h,s,p,v;for(l=0,h=t.length;l<h;++l)p=t[l],p>=n&&p<=i&&r.push(p);if(r.length<2)return[{time:n,pos:0},{time:i,pos:1}];for(l=0,h=r.length;l<h;++l)v=r[l+1],s=r[l-1],p=r[l],Math.round((v+s)/2)!==p&&a.push({time:p,pos:l/(h-1)});return a}_generate(){const t=this.min,n=this.max;let i=super.getDataTimestamps();return(!i.includes(t)||!i.length)&&i.splice(0,0,t),(!i.includes(n)||i.length===1)&&i.push(n),i.sort((r,a)=>r-a)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const n=this.getDataTimestamps(),i=this.getLabelTimestamps();return n.length&&i.length?t=this.normalize(n.concat(i)):t=n.length?n:i,t=this._cache.all=t,t}getDecimalForValue(t){return(jx(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const n=this._offsets,i=this.getDecimalForPixel(t)/n.factor-n.end;return jx(this._table,i*this._tableRange+this._minPos,!0)}}var Ere=Object.freeze({__proto__:null,CategoryScale:tre,LinearScale:ire,LogarithmicScale:ore,RadialLinearScale:bre,TimeScale:_k,TimeSeriesScale:Sre});const Cre=[Tte,nie,Yie,Ere];XA.register(...Cre);const kre={class:"section-card"},Ire={class:"col-md-4"},Are=["value"],Pre={class:"col-md-4"},Mre=["value"],Dre={class:"col-md-4"},Rre=["value"],Lre={class:"col-12 d-flex flex-wrap align-items-center gap-2"},Ore={class:"btn btn-primary",type:"submit"},Vre={key:0,class:"text-warning small d-flex align-items-center gap-1"},Bre={key:0,class:"mt-4 feature-result-animate"},Fre={class:"row g-3"},zre={class:"col-lg-4"},Nre={class:"fare-result-card h-100"},Ure={class:"fare-result-amount"},$re={class:"fare-result-commuter"},jre={class:"list-unstyled mt-4 mb-0 small text-muted"},Wre={class:"d-flex align-items-center gap-2 mb-2"},Hre={class:"d-flex align-items-center gap-2 mb-2"},Gre={class:"d-flex align-items-center gap-2"},qre={class:"col-lg-8"},Kre={class:"fare-route-card h-100"},Xre={class:"d-flex justify-content-between align-items-center mb-3"},Zre={class:"badge bg-light text-muted border"},Yre={class:"d-flex justify-content-between align-items-center flex-wrap gap-2"},Jre={class:"d-flex align-items-center gap-2 mb-1"},Qre={class:"badge rounded-pill bg-secondary-subtle text-secondary"},ese={class:"fw-semibold"},tse={key:1,class:"mt-4"},nse={class:"row g-3 align-items-end"},ise={class:"col-md-4"},rse={class:"col-md-4"},sse={class:"col-md-4"},ose={class:"info-pill"},ase={class:"fw-semibold"},lse={key:0,class:"row g-3 mt-1"},cse={class:"col-lg-4"},use={class:"card border-0 shadow-sm h-100"},dse={class:"card-body"},hse={key:0,class:"fw-semibold mb-2"},fse={class:"mb-1"},mse={class:"mb-0"},pse={class:"col-lg-8"},gse={class:"card border-0 shadow-sm h-100"},_se={class:"card-body"},vse={class:"chart-wrapper"},yse={class:"col-12"},bse={class:"table-responsive shadow-sm border rounded-3"},xse={class:"table align-middle mb-0"},wse={class:"text-center"},Tse={key:0,class:"badge bg-success-subtle text-success-emphasis px-3"},Sse={key:1,class:"badge bg-danger-subtle text-danger-emphasis px-3"},Ese={key:2,class:"alert alert-danger mt-4"},Cse={__name:"FareCalculator",setup(e){const{allStations:t,shortestPath:n,estimateDistanceKm:i,estimateTimeMinutes:r,summariseSegments:a}=cA(),{fareByType:l,analyseMonthlyPass:h}=f5(),s=[{value:"adult",label:"Adult"},{value:"primary",label:"Primary School Student"},{value:"secondary",label:"Secondary School Student"},{value:"polytechnic",label:"Polytechnic Student"},{value:"university",label:"University Student"},{value:"ns",label:"National Serviceman"},{value:"senior",label:"Senior Citizen"},{value:"disability",label:"Person with Disabilities"},{value:"workfare",label:"Workfare Concession"}],p={NSL:{name:"North South Line"},EWL:{name:"East West Line"},CGL:{name:"Changi Airport Branch"},DTL:{name:"Downtown Line"},CCL:{name:"Circle Line"},NEL:{name:"North East Line"},TEL:{name:"ThomsonEast Coast Line"},BPL:{name:"Bukit Panjang LRT"},SWPL:{name:"Sengkang West LRT"},SEPL:{name:"Sengkang East LRT"},PEPLRT:{name:"Punggol East LRT"},PWLRT:{name:"Punggol West LRT"}},v={train:"Train-only",bus:"Bus-only",hybrid:"Hybrid (Bus + Train)"},x=at("Jurong East"),T=at("City Hall"),k=at("adult"),P=at(null),M=at(null),L=at(""),B=at(!1),F=at(2),X=at(22),J=at(null);let Q=null;const re=new Intl.NumberFormat("en-SG",{style:"currency",currency:"SGD",currencyDisplay:"narrowSymbol",minimumFractionDigits:2}),Z=fe(()=>s.find(ve=>ve.value===k.value)?.label??"Adult"),$=fe(()=>Math.max(0,F.value*X.value*2)),H=fe(()=>M.value?M.value.breakdown.reduce((ve,Le)=>ve?Le.savings>ve.savings?Le:ve:Le,null):null);function W(ve){return re.format(ve)}function te(ve){const Le=re.format(Math.abs(ve));return`${ve>=0?"+":""}${Le}`}function Y(ve){return p[ve]?.name??ve}function ne(ve){return ve?`line-${ve.toLowerCase()}`:""}function Se(ve){return v[ve]??ve}function Fe(){if(L.value="",M.value=null,x.value===T.value){P.value=null,je(),L.value="Please choose two different stations.",B.value=!1;return}const ve=n(x.value,T.value);if(!ve){P.value=null,je(),L.value="No valid MRT route found between these stations.",B.value=!1;return}const Le=i(ve.totalWeight),We=r(ve.totalWeight),ct=a(ve)??[],ut=ct.reduce((Ct,At)=>Ct+At.stops,0),rt=Math.max(0,ct.length-1),Qe=l(Le,k.value);P.value={fare:Qe,distanceKm:Le,minutes:We,segments:ct,totalStops:ut,transfers:rt},B.value=!1,Ve()}function Ve(){if(!P.value){M.value=null,je();return}M.value=h({distanceKm:P.value.distanceKm,type:k.value,dailyTrips:F.value,workingDays:X.value}),Ge(M.value)}function Ge(ve){if(!ve||!J.value){je();return}const Le=ve.breakdown.map(ct=>Se(ct.mode)),We=ve.breakdown.map(ct=>Number(ct.savings.toFixed(2)));Q&&Q.destroy(),Q=new XA(J.value,{type:"bar",data:{labels:Le,datasets:[{label:"Net savings vs monthly pass ($)",data:We,backgroundColor:We.map(ct=>ct>=0?"rgba(25,135,84,0.6)":"rgba(220,53,69,0.65)"),borderRadius:8,borderSkipped:!1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{label(ct){const ut=ct.parsed?.y??0,rt=re.format(Math.abs(ut));return`${ut>=0?"+":""}${rt}`}}}},scales:{y:{ticks:{callback(ct){return typeof ct=="number"?re.format(ct):ct}},grid:{color:"rgba(0,0,0,0.05)"}},x:{grid:{display:!1}}}}})}function je(){Q&&(Q.destroy(),Q=null)}function Ae(){x.value="Jurong East",T.value="City Hall",k.value="adult",P.value=null,M.value=null,L.value="",F.value=2,X.value=22,B.value=!1,je()}function Ke(){[x.value,T.value]=[T.value,x.value]}return Ht([x,T,k],()=>{P.value&&(B.value=!0)}),Ht(k,()=>{P.value&&Fe()}),rQ([F,X],()=>{P.value&&Ve()},{debounce:300,maxWait:800}),Yr(()=>{je()}),(ve,Le)=>(_n(),wn("section",kre,[Le[29]||(Le[29]=N("h2",{class:"section-title mb-3"},"Fare Calculator",-1)),Le[30]||(Le[30]=N("p",{class:"text-muted"}," Distance-based fares with the latest LTA tables. Estimate concession pricing, understand line changes, and see whether a monthly pass could save you more. ",-1)),N("form",{class:"row g-3 align-items-end",onSubmit:nh(Fe,["prevent"])},[N("div",Ire,[Le[5]||(Le[5]=N("label",{class:"form-label",for:"fareStart"},"From",-1)),vi(N("select",{id:"fareStart","onUpdate:modelValue":Le[0]||(Le[0]=We=>x.value=We),class:"form-select"},[(_n(!0),wn(sn,null,As(Si(t),We=>(_n(),wn("option",{key:We,value:We},an(We),9,Are))),128))],512),[[lh,x.value]])]),N("div",Pre,[Le[6]||(Le[6]=N("label",{class:"form-label",for:"fareEnd"},"To",-1)),vi(N("select",{id:"fareEnd","onUpdate:modelValue":Le[1]||(Le[1]=We=>T.value=We),class:"form-select"},[(_n(!0),wn(sn,null,As(Si(t),We=>(_n(),wn("option",{key:We,value:We},an(We),9,Mre))),128))],512),[[lh,T.value]])]),N("div",Dre,[Le[7]||(Le[7]=N("label",{class:"form-label",for:"commuterType"},"Commuter Type",-1)),vi(N("select",{id:"commuterType","onUpdate:modelValue":Le[2]||(Le[2]=We=>k.value=We),class:"form-select"},[(_n(),wn(sn,null,As(s,We=>N("option",{key:We.value,value:We.value},an(We.label),9,Rre)),64))],512),[[lh,k.value]])]),N("div",Lre,[N("button",Ore,[Le[8]||(Le[8]=N("span",{class:"material-icons me-1"},"attach_money",-1)),Jn(" "+an(P.value?"Recalculate":"Calculate fare"),1)]),N("button",{class:"btn btn-outline-secondary",type:"button",onClick:Ke},[...Le[9]||(Le[9]=[N("span",{class:"material-icons me-1"},"swap_horiz",-1),Jn(" Swap stations ",-1)])]),N("button",{class:"btn btn-outline-danger",type:"button",onClick:Ae},[...Le[10]||(Le[10]=[N("span",{class:"material-icons me-1"},"restart_alt",-1),Jn(" Reset ",-1)])]),B.value?(_n(),wn("span",Vre,[...Le[11]||(Le[11]=[N("span",{class:"material-icons fs-6 align-middle"},"info",-1),Jn(" Inputs changed  calculate again to refresh. ",-1)])])):Tr("",!0)])],32),P.value?(_n(),wn("div",Bre,[N("div",Fre,[N("div",zre,[N("div",Nre,[N("div",Ure,an(W(P.value.fare)),1),N("div",$re,an(Z.value),1),N("ul",jre,[N("li",Wre,[Le[12]||(Le[12]=N("span",{class:"material-icons text-primary"},"train",-1)),N("span",null,an(x.value)+"  "+an(T.value),1)]),N("li",Hre,[Le[13]||(Le[13]=N("span",{class:"material-icons text-primary"},"route",-1)),N("span",null,an(P.value.distanceKm)+" km  "+an(P.value.totalStops)+" "+an(P.value.totalStops===1?"stop":"stops"),1)]),N("li",Gre,[Le[14]||(Le[14]=N("span",{class:"material-icons text-primary"},"schedule",-1)),N("span",null,an(P.value.minutes)+" minutes  "+an(P.value.transfers)+" "+an(P.value.transfers===1?"transfer":"transfers"),1)])])])]),N("div",qre,[N("div",Kre,[N("div",Xre,[Le[15]||(Le[15]=N("h5",{class:"mb-0"},"Route overview",-1)),N("span",Zre,an(P.value.segments.length)+" "+an(P.value.segments.length===1?"segment":"segments"),1)]),Le[16]||(Le[16]=N("p",{class:"text-muted small mb-3"}," We recommend the quickest MRT path. Look out for Transfer badges to change lines with minimal walking. ",-1)),(_n(!0),wn(sn,null,As(P.value.segments,We=>(_n(),wn("div",{key:`${We.line}-${We.from}-${We.to}`,class:"route-segment"},[N("div",Yre,[N("div",null,[N("div",Jre,[N("span",{class:Tt(["route-line-badge",ne(We.line)])},an(Y(We.line)),3),N("span",Qre,an(We.stops===0?"Transfer":`${We.stops} ${We.stops===1?"stop":"stops"}`),1)]),N("div",ese,an(We.from)+"  "+an(We.to),1)])])]))),128))])])])])):Tr("",!0),P.value?(_n(),wn("div",tse,[Le[28]||(Le[28]=N("div",{class:"d-flex flex-wrap align-items-center gap-2 mb-3"},[N("h5",{class:"mb-0"},"Monthly Pass Companion"),N("span",{class:"badge bg-info-subtle text-info-emphasis"},"Auto-updates with your inputs")],-1)),N("div",nse,[N("div",ise,[Le[17]||(Le[17]=N("label",{class:"form-label",for:"dailyTrips"},"Daily round trips",-1)),vi(N("input",{id:"dailyTrips","onUpdate:modelValue":Le[3]||(Le[3]=We=>F.value=We),type:"number",class:"form-control",min:"1",max:"10"},null,512),[[$u,F.value,void 0,{number:!0}]]),Le[18]||(Le[18]=N("small",{class:"text-muted"},"Two rides count as one round trip.",-1))]),N("div",rse,[Le[19]||(Le[19]=N("label",{class:"form-label",for:"workingDays"},"Working days / month",-1)),vi(N("input",{id:"workingDays","onUpdate:modelValue":Le[4]||(Le[4]=We=>X.value=We),type:"number",class:"form-control",min:"1",max:"31"},null,512),[[$u,X.value,void 0,{number:!0}]]),Le[20]||(Le[20]=N("small",{class:"text-muted"},"Include study days if you commute then.",-1))]),N("div",sse,[N("div",ose,[Le[22]||(Le[22]=N("span",{class:"material-icons"},"equalizer",-1)),N("div",null,[N("div",ase,an($.value)+" rides / month",1),Le[21]||(Le[21]=N("div",{class:"small text-muted"},"Used for the monthly pass comparison.",-1))])])])]),M.value?(_n(),wn("div",lse,[N("div",cse,[N("div",use,[N("div",dse,[Le[25]||(Le[25]=N("h6",{class:"text-uppercase text-muted mb-2"},"Recommendation",-1)),H.value?(_n(),wn("p",hse,[H.value.worth?(_n(),wn(sn,{key:0},[Jn(" The "+an(Se(H.value.mode))+" pass could save "+an(W(H.value.savings))+" this month. ",1)],64)):(_n(),wn(sn,{key:1},[Jn(" Stick to pay-per-ride  the "+an(Se(H.value.mode))+" pass costs "+an(W(Math.abs(H.value.savings)))+" more. ",1)],64))])):Tr("",!0),N("p",fse,[Le[23]||(Le[23]=N("strong",null,"Single trip fare:",-1)),Jn(" "+an(W(M.value.singleFare)),1)]),N("p",mse,[Le[24]||(Le[24]=N("strong",null,"Estimated monthly spend:",-1)),Jn(" "+an(W(M.value.monthlyTotal)),1)])])])]),N("div",pse,[N("div",gse,[N("div",_se,[Le[26]||(Le[26]=N("h6",{class:"text-uppercase text-muted mb-2"},"Savings vs monthly passes",-1)),N("div",vse,[N("canvas",{ref_key:"passChartRef",ref:J},null,512)])])])]),N("div",yse,[N("div",bse,[N("table",xse,[Le[27]||(Le[27]=N("thead",{class:"table-light"},[N("tr",{class:"text-center"},[N("th",{scope:"col"},"Pass type"),N("th",{scope:"col"},"Pass price"),N("th",{scope:"col"},"Net savings"),N("th",{scope:"col"},"Recommendation")])],-1)),N("tbody",wse,[(_n(!0),wn(sn,null,As(M.value.breakdown,We=>(_n(),wn("tr",{key:We.mode},[N("td",null,an(Se(We.mode)),1),N("td",null,an(W(We.passPrice)),1),N("td",{class:Tt(We.worth?"text-success fw-semibold":"text-danger fw-semibold")},an(te(We.savings)),3),N("td",null,[We.worth?(_n(),wn("span",Tse,"Worth it")):(_n(),wn("span",Sse,"Skip it"))])]))),128))])])])])])):Tr("",!0)])):Tr("",!0),L.value?(_n(),wn("div",Ese,an(L.value),1)):Tr("",!0)]))}},kse={class:"section-card"},Ise={class:"meetup-container"},Ase={class:"person-header"},Pse={class:"person-avatar"},Mse={class:"person-info"},Dse=["onClick"],Rse={class:"station-selector"},Lse=["onUpdate:modelValue"],Ose=["value"],Vse={class:"mt-4"},Bse={class:"d-flex flex-wrap gap-2"},Fse=["onClick"],zse={class:"map-panel mt-5"},Nse={class:"map-wrapper"},Use={key:0,class:"alert alert-warning map-overlay-message mb-0"},$se={key:0,class:"map-overlay-message"},jse={key:0,class:"text-center py-5"},Wse={key:1,class:"alert alert-danger mt-4"},Hse={key:2,class:"meetup-results mt-4 feature-result-animate"},Gse={class:"mb-3"},qse={class:"row g-3"},Kse={class:"col-md-4"},Xse={class:"border rounded-3 p-3 bg-light h-100"},Zse={class:"mb-2"},Yse={class:"mb-0"},Jse={class:"col-md-8"},Qse={class:"border rounded-3 p-3"},eoe={class:"fw-semibold"},toe={class:"text-muted small"},noe={class:"badge bg-warning text-dark fs-6"},ioe="pk.eyJ1IjoiY2hlZWF1biIsImEiOiJja2NydG83cWMwaGJsMnBqdjR5aHc3MzdlIn0.YGTZpi7JQMquEOv9E8K_bg",roe="/sg-rail.geojson",Wx=10,soe={__name:"MeetupFinder",setup(e){const{allStations:t,shortestPath:n,estimateTimeMinutes:i,summariseSegments:r}=cA();let a=0;const l=at([{id:++a,station:""},{id:++a,station:""}]),h=["Bishan","Dhoby Ghaut","Jurong East","Paya Lebar","City Hall","HarbourFront"],s=at(!1),p=at(""),v=at(null),x=at(null),T=at(null),k=at(!1),P=at(""),M=at("");let L=null;const B=new Map,F=new Map;let X=null;const J=fe(()=>!k.value&&!P.value);function Q(){return l.value.length>=Wx?(te(`Maximum of ${Wx} people reached.`),!1):(l.value.push({id:++a,station:""}),!0)}function re(Ve){l.value=l.value.filter(Ge=>Ge.id!==Ve),ne()}function Z(){l.value=[{id:++a,station:""},{id:++a,station:""}],v.value=null,p.value="",ne(),Se()}function $(Ve){const Ge=l.value.find(je=>!je.station);if(Ge)Ge.station=Ve,te(`${Ve} assigned to Person ${l.value.indexOf(Ge)+1}.`);else{if(!Q())return;const Ae=l.value[l.value.length-1];Ae.station=Ve,te(`${Ve} assigned to new Person ${l.value.length}.`)}}async function H(){p.value="",v.value=null;const Ve=l.value.map(ve=>ve.station).filter(Boolean);if(Ve.length<2){p.value="Please provide at least two starting stations.";return}s.value=!0,await new Promise(ve=>setTimeout(ve,450));let Ge=null,je=1/0,Ae=null;if(t.forEach(ve=>{let Le=0;const We=[];for(const ct of Ve){if(ct===ve)continue;const ut=n(ct,ve);if(!ut){Le=1/0;break}Le+=ut.totalWeight,We.push({origin:ct,path:ut,minutes:i(ut.totalWeight),segments:r(ut),steps:ut.steps})}Le<je&&(je=Le,Ge=ve,Ae=We)}),!Ge||!Ae?.length){p.value="Unable to locate a fair meet-up point for the provided stations.",s.value=!1;return}const Ke=Ae.reduce((ve,Le)=>ve+Le.minutes,0);v.value={station:Ge,totalMinutes:Ke,averageMinutes:Ke/Ae.length,details:Ae},s.value=!1,Se(),te(`Suggested meeting point: ${Ge}`)}function W(Ve){const Ge=["","","","","","","","","",""];return Ge[(Ve-1)%Ge.length]}function te(Ve){Ve&&(M.value=Ve,L&&(clearTimeout(L),L=null),L=window.setTimeout(()=>{M.value="",L=null},3500))}function Y(Ve){if(!Ve)return;const Ge=l.value.findIndex(ve=>ve.station===Ve);if(Ge!==-1){l.value[Ge].station="",te(`${Ve} removed from Person ${Ge+1}.`);return}const je=l.value.findIndex(ve=>!ve.station);if(je!==-1){l.value[je].station=Ve,te(`${Ve} assigned to Person ${je+1}.`);return}if(l.value.length>=Wx){te(`Cannot add ${Ve}; maximum of ${Wx} people reached.`);return}if(!Q())return;const Ke=l.value.length-1;l.value[Ke].station=Ve,te(`${Ve} assigned to new Person ${Ke+1}.`)}function ne(){!T.value||!k.value||(F.forEach(Ve=>Ve.remove()),F.clear(),l.value.forEach((Ve,Ge)=>{if(!Ve.station)return;const je=B.get(Ve.station.toLowerCase());if(!je)return;const Ae=document.createElement("div");Ae.className="avatar-marker",Ae.textContent=W(Ge+1);const Ke=new fp.Marker(Ae).setLngLat(je.geometry.coordinates).addTo(T.value);F.set(Ve.id,Ke)}))}function Se(){if(!T.value||!k.value)return;X&&(X.remove(),X=null);const Ve=v.value?.station;if(!Ve)return;const Ge=B.get(Ve.toLowerCase());if(!Ge)return;const je=document.createElement("div");je.className="meetup-marker",je.innerHTML='<span class="material-icons">place</span>',X=new fp.Marker(je).setLngLat(Ge.geometry.coordinates).addTo(T.value),T.value.flyTo({center:Ge.geometry.coordinates,zoom:13,essential:!0,speed:.8})}async function Fe(){T.value||!x.value||(fp.accessToken=ioe,T.value=new fp.Map({container:x.value,style:"mapbox://styles/mapbox/streets-v11",center:[103.8475,1.3011],zoom:11,renderWorldCopies:!1,pitchWithRotate:!1,attributionControl:!1,cooperativeGestures:!0}),T.value.addControl(new fp.NavigationControl({showCompass:!1})),T.value.on("load",async()=>{try{const Ve=await fetch(roe);if(!Ve.ok)throw new Error(`Unable to load map data (HTTP ${Ve.status})`);const Ge=await Ve.json();T.value.addSource("singatrain-rail",{type:"geojson",data:Ge}),T.value.addLayer({id:"singatrain-lines",source:"singatrain-rail",filter:["==",["geometry-type"],"LineString"],type:"line",paint:{"line-width":["interpolate",["linear"],["zoom"],10,2,16,6],"line-color":["match",["get","line_color"],"orangered","#d42e12","mediumseagreen","#009645","orange","#fa9e0d","saddlebrown","#9D5B25","darkmagenta","#9900aa","darkslateblue","#005ec4","#748477"],"line-opacity":.8},layout:{"line-cap":"round","line-join":"round"}}),T.value.addLayer({id:"singatrain-stations",source:"singatrain-rail",filter:["all",["==",["geometry-type"],"Point"],["==",["get","stop_type"],"station"]],type:"circle",paint:{"circle-radius":6,"circle-color":["match",["get","station_colors"],"red","#d42e12","green","#009645","orange","#fa9e0d","brown","#9D5B25","purple","#9900aa","blue","#005ec4","#748477"],"circle-stroke-color":"#fff","circle-stroke-width":2}}),T.value.addLayer({id:"singatrain-labels",source:"singatrain-rail",filter:["==",["get","stop_type"],"station"],type:"symbol",layout:{"text-field":["get","name"],"text-size":12,"text-anchor":"top","text-offset":[0,.8],"text-font":["DIN Pro Medium","Arial Unicode MS Bold"]},paint:{"text-color":"#2f3640","text-halo-color":"#fff","text-halo-width":1}}),Ge.features.filter(je=>je.geometry?.type==="Point"&&je.properties?.stop_type==="station").forEach(je=>{B.set(je.properties.name.toLowerCase(),je)}),T.value.on("mouseenter","singatrain-stations",()=>{T.value&&(T.value.getCanvas().style.cursor="pointer")}),T.value.on("mouseleave","singatrain-stations",()=>{T.value&&(T.value.getCanvas().style.cursor="")}),T.value.on("click","singatrain-stations",je=>{const Ke=je.features?.[0]?.properties?.name;Y(Ke)}),k.value=!0,P.value="",ne(),Se()}catch(Ve){console.error("Failed to load rail GeoJSON",Ve),P.value="Map data is unavailable right now. Please try again later."}}))}return cs(()=>{Fe()}),Yr(()=>{F.forEach(Ve=>Ve.remove()),F.clear(),X&&(X.remove(),X=null),T.value&&(T.value.remove(),T.value=null),L&&(clearTimeout(L),L=null)}),Ht(l,()=>{ne()},{deep:!0}),Ht(()=>v.value?.station,()=>{Se()}),Ht(k,Ve=>{Ve&&(ne(),Se())}),(Ve,Ge)=>(_n(),wn("section",kse,[N("div",{class:"d-flex flex-wrap justify-content-between align-items-start gap-3 mb-4"},[Ge[1]||(Ge[1]=N("div",null,[N("h2",{class:"section-title mb-2"},"Meet-up Point Finder"),N("p",{class:"text-muted mb-0"}," Enter origin stations for your group and well suggest the fairest MRT interchange, minimising total travel time for everyone. ")],-1)),N("button",{class:"btn btn-outline-danger hover-float",type:"button",onClick:Q},[...Ge[0]||(Ge[0]=[N("span",{class:"material-icons me-1"},"person_add",-1),Jn(" Add person ",-1)])])]),N("div",Ise,[(_n(!0),wn(sn,null,As(l.value,(je,Ae)=>(_n(),wn("div",{key:je.id,class:Tt(["person-card",{active:!!je.station}])},[N("div",Ase,[N("div",Pse,an(Ae+1),1),N("div",Mse,[N("h6",null,"Person "+an(Ae+1),1),N("small",null,an(je.station||"Choose a starting station"),1)]),l.value.length>1?(_n(),wn("button",{key:0,class:"btn btn-sm btn-outline-danger ms-auto",type:"button",onClick:Ke=>re(je.id)},[...Ge[2]||(Ge[2]=[N("span",{class:"material-icons"},"delete",-1)])],8,Dse)):Tr("",!0)]),N("div",Rse,[vi(N("select",{"onUpdate:modelValue":Ke=>je.station=Ke,class:"form-select"},[Ge[3]||(Ge[3]=N("option",{value:""},"-- Select station --",-1)),(_n(!0),wn(sn,null,As(Si(t),Ke=>(_n(),wn("option",{key:Ke,value:Ke},an(Ke),9,Ose))),128))],8,Lse),[[lh,je.station]])])],2))),128)),N("div",{class:"meetup-actions"},[N("button",{class:"btn btn-primary hover-float",type:"button",onClick:H},[...Ge[4]||(Ge[4]=[N("span",{class:"material-icons"},"travel_explore",-1),Jn(" Find optimal meet-up ",-1)])]),N("button",{class:"btn btn-outline-danger hover-float",type:"button",onClick:Z},[...Ge[5]||(Ge[5]=[N("span",{class:"material-icons"},"restart_alt",-1),Jn(" Clear ",-1)])])])]),N("div",Vse,[Ge[6]||(Ge[6]=N("div",{class:"text-muted mb-2"},"Quick add",-1)),N("div",Bse,[(_n(),wn(sn,null,As(h,je=>N("button",{key:je,class:"btn btn-sm btn-outline-secondary quick-station-btn",type:"button",onClick:Ae=>$(je)},an(je),9,Fse)),64))])]),N("div",zse,[Ge[8]||(Ge[8]=jy('<div class="d-flex flex-wrap align-items-center justify-content-between gap-3 mb-3"><div class="d-flex align-items-center gap-2"><span class="material-icons text-danger">map</span><h5 class="mb-0">Interactive MRT Network</h5></div><div class="text-muted small">Click a station to assign or remove it for the next available person.</div></div>',1)),N("div",Nse,[N("div",{ref_key:"mapContainer",ref:x,class:"meetup-map rounded-4"},null,512),N("div",{class:Tt(["map-loading-overlay",{show:J.value}])},[...Ge[7]||(Ge[7]=[jy('<div class="map-loading-content"><div class="capybaraloader"><div class="capybara"><div class="capy"><div class="capyhead"><div class="capyear"><div class="capyear2"></div></div><div class="capyear"><div class="capyear2"></div></div><div class="capymouth"><div class="capylips"></div><div class="capylips"></div></div><div class="capyeye"></div><div class="capyeye"></div></div><div class="capyleg"><div class="capyleg2"></div><div class="capyleg2"></div></div></div></div><div class="loader"><div class="loaderline"></div></div></div><h6 class="mt-3">Loading the rail network</h6><p class="mb-0">Map layers are stitched together in a moment.</p></div>',1)])],2),P.value?(_n(),wn("div",Use,an(P.value),1)):Tr("",!0)]),M.value?(_n(),wn("div",$se,an(M.value),1)):Tr("",!0)]),s.value?(_n(),wn("div",jse,[...Ge[9]||(Ge[9]=[jy('<div class="capybaraloader mx-auto"><div class="capybara"><div class="capy"><div class="capyhead"><div class="capyear"><div class="capyear2"></div></div><div class="capyear"><div class="capyear2"></div></div><div class="capymouth"><div class="capylips"></div><div class="capylips"></div></div><div class="capyeye"></div><div class="capyeye"></div></div><div class="capyleg"><div class="capyleg2"></div><div class="capyleg2"></div></div></div></div><div class="loader"><div class="loaderline"></div></div></div><p class="mt-3 text-muted">Crunching routes</p>',2)])])):Tr("",!0),p.value?(_n(),wn("div",Wse,an(p.value),1)):Tr("",!0),v.value?(_n(),wn("div",Hse,[N("h4",Gse,[Ge[10]||(Ge[10]=N("span",{class:"material-icons align-middle me-2 text-danger"},"place",-1)),Jn(" Suggested meet-up: "+an(v.value.station),1)]),N("div",qse,[N("div",Kse,[N("div",Xse,[N("p",Zse,[Ge[11]||(Ge[11]=N("strong",null,"Total travel time:",-1)),Jn(" "+an(v.value.totalMinutes)+" minutes ",1)]),N("p",Yse,[Ge[12]||(Ge[12]=N("strong",null,"Average per person:",-1)),Jn(" "+an(v.value.averageMinutes.toFixed(1))+" minutes ",1)])])]),N("div",Jse,[N("div",Qse,[Ge[13]||(Ge[13]=N("h6",{class:"text-uppercase text-muted fw-semibold mb-2"},"Individual journeys",-1)),(_n(!0),wn(sn,null,As(v.value.details,je=>(_n(),wn("div",{key:je.origin,class:"d-flex justify-content-between align-items-center border-bottom py-2"},[N("div",null,[N("div",eoe,an(je.origin),1),N("div",toe,an(je.steps.length)+" stops / "+an(je.segments.length)+" segment(s) ",1)]),N("span",noe,an(je.minutes)+" min",1)]))),128))])])])])):Tr("",!0)]))}},ooe=()=>{};var fB={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B6=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=r&63|128):(r&64512)===55296&&i+1<e.length&&(e.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(e.charCodeAt(++i)&1023),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=r&63|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=r&63|128)}return t},aoe=function(e){const t=[];let n=0,i=0;for(;n<e.length;){const r=e[n++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){const a=e[n++];t[i++]=String.fromCharCode((r&31)<<6|a&63)}else if(r>239&&r<365){const a=e[n++],l=e[n++],h=e[n++],s=((r&7)<<18|(a&63)<<12|(l&63)<<6|h&63)-65536;t[i++]=String.fromCharCode(55296+(s>>10)),t[i++]=String.fromCharCode(56320+(s&1023))}else{const a=e[n++],l=e[n++];t[i++]=String.fromCharCode((r&15)<<12|(a&63)<<6|l&63)}}return t.join("")},F6={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<e.length;r+=3){const a=e[r],l=r+1<e.length,h=l?e[r+1]:0,s=r+2<e.length,p=s?e[r+2]:0,v=a>>2,x=(a&3)<<4|h>>4;let T=(h&15)<<2|p>>6,k=p&63;s||(k=64,l||(T=64)),i.push(n[v],n[x],n[T],n[k])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(B6(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):aoe(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<e.length;){const a=n[e.charAt(r++)],h=r<e.length?n[e.charAt(r)]:0;++r;const p=r<e.length?n[e.charAt(r)]:64;++r;const x=r<e.length?n[e.charAt(r)]:64;if(++r,a==null||h==null||p==null||x==null)throw new loe;const T=a<<2|h>>4;if(i.push(T),p!==64){const k=h<<4&240|p>>2;if(i.push(k),x!==64){const P=p<<6&192|x;i.push(P)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class loe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const coe=function(e){const t=B6(e);return F6.encodeByteArray(t,!0)},u1=function(e){return coe(e).replace(/\./g,"")},z6=function(e){try{return F6.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uoe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const doe=()=>uoe().__FIREBASE_DEFAULTS__,hoe=()=>{if(typeof process>"u"||typeof fB>"u")return;const e=fB.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},foe=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&z6(e[1]);return t&&JSON.parse(t)},gT=()=>{try{return ooe()||doe()||hoe()||foe()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},N6=e=>gT()?.emulatorHosts?.[e],moe=e=>{const t=N6(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),i]:[t.substring(0,n),i]},U6=()=>gT()?.config,$6=e=>gT()?.[`_${e}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class poe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dv(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function j6(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function goe(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=t||"demo-project",r=e.iat||0,a=e.sub||e.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...e};return[u1(JSON.stringify(n)),u1(JSON.stringify(l)),""].join(".")}const Yy={};function _oe(){const e={prod:[],emulator:[]};for(const t of Object.keys(Yy))Yy[t]?e.emulator.push(t):e.prod.push(t);return e}function voe(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let mB=!1;function W6(e,t){if(typeof window>"u"||typeof document>"u"||!dv(window.location.host)||Yy[e]===t||Yy[e]||mB)return;Yy[e]=t;function n(T){return`__firebase__banner__${T}`}const i="__firebase__banner",a=_oe().prod.length>0;function l(){const T=document.getElementById(i);T&&T.remove()}function h(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function s(T,k){T.setAttribute("width","24"),T.setAttribute("id",k),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function p(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{mB=!0,l()},T}function v(T,k){T.setAttribute("id",k),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function x(){const T=voe(i),k=n("text"),P=document.getElementById(k)||document.createElement("span"),M=n("learnmore"),L=document.getElementById(M)||document.createElement("a"),B=n("preprendIcon"),F=document.getElementById(B)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const X=T.element;h(X),v(L,M);const J=p();s(F,B),X.append(F,P,L,J),document.body.appendChild(X)}a?(P.innerText="Preview backend disconnected.",F.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(F.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,P.innerText="Preview backend running in this workspace."),P.setAttribute("id",k)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",x):x()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ua(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function yoe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ua())}function boe(){const e=gT()?.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function xoe(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function woe(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function Toe(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Soe(){const e=Ua();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Eoe(){return!boe()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Coe(){try{return typeof indexedDB=="object"}catch{return!1}}function koe(){return new Promise((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{t(r.error?.message||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ioe="FirebaseError";class Ph extends Error{constructor(t,n,i){super(n),this.code=t,this.customData=i,this.name=Ioe,Object.setPrototypeOf(this,Ph.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,b0.prototype.create)}}class b0{constructor(t,n,i){this.service=t,this.serviceName=n,this.errors=i}create(t,...n){const i=n[0]||{},r=`${this.service}/${t}`,a=this.errors[t],l=a?Aoe(a,i):"Error",h=`${this.serviceName}: ${l} (${r}).`;return new Ph(r,h,i)}}function Aoe(e,t){return e.replace(Poe,(n,i)=>{const r=t[i];return r!=null?String(r):`<${i}?>`})}const Poe=/\{\$([^}]+)}/g;function Moe(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Xf(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const r of n){if(!i.includes(r))return!1;const a=e[r],l=t[r];if(pB(a)&&pB(l)){if(!Xf(a,l))return!1}else if(a!==l)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function pB(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x0(e){const t=[];for(const[n,i]of Object.entries(e))Array.isArray(i)?i.forEach(r=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function Ay(e){const t={};return e.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,a]=i.split("=");t[decodeURIComponent(r)]=decodeURIComponent(a)}}),t}function Py(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function Doe(e,t){const n=new Roe(e,t);return n.subscribe.bind(n)}class Roe{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,i){let r;if(t===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");Loe(t,["next","error","complete"])?r=t:r={next:t,error:n,complete:i},r.next===void 0&&(r.next=eC),r.error===void 0&&(r.error=eC),r.complete===void 0&&(r.complete=eC);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),a}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Loe(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function eC(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zo(e){return e&&e._delegate?e._delegate:e}class zp{constructor(t,n,i){this.name=t,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const up="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ooe{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const i=new poe;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t?.identifier),i=t?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(Boe(t))try{this.getOrInitializeService({instanceIdentifier:up})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:r});i.resolve(a)}catch{}}}}clearInstance(t=up){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=up){return this.instances.has(t)}getOptions(t=up){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[a,l]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(a);i===h&&l.resolve(r)}return r}onInit(t,n){const i=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(i)??new Set;r.add(t),this.onInitCallbacks.set(i,r);const a=this.instances.get(i);return a&&t(a,i),()=>{r.delete(t)}}invokeOnInitCallbacks(t,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:Voe(t),options:n}),this.instances.set(t,i),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=up){return this.component?this.component.multipleInstances?t:up:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Voe(e){return e===up?void 0:e}function Boe(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Foe{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new Ooe(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Li;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Li||(Li={}));const zoe={debug:Li.DEBUG,verbose:Li.VERBOSE,info:Li.INFO,warn:Li.WARN,error:Li.ERROR,silent:Li.SILENT},Noe=Li.INFO,Uoe={[Li.DEBUG]:"log",[Li.VERBOSE]:"log",[Li.INFO]:"info",[Li.WARN]:"warn",[Li.ERROR]:"error"},$oe=(e,t,...n)=>{if(t<e.logLevel)return;const i=new Date().toISOString(),r=Uoe[t];if(r)console[r](`[${i}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class YA{constructor(t){this.name=t,this._logLevel=Noe,this._logHandler=$oe,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Li))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?zoe[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Li.DEBUG,...t),this._logHandler(this,Li.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Li.VERBOSE,...t),this._logHandler(this,Li.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Li.INFO,...t),this._logHandler(this,Li.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Li.WARN,...t),this._logHandler(this,Li.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Li.ERROR,...t),this._logHandler(this,Li.ERROR,...t)}}const joe=(e,t)=>t.some(n=>e instanceof n);let gB,_B;function Woe(){return gB||(gB=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Hoe(){return _B||(_B=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const H6=new WeakMap,vk=new WeakMap,G6=new WeakMap,tC=new WeakMap,JA=new WeakMap;function Goe(e){const t=new Promise((n,i)=>{const r=()=>{e.removeEventListener("success",a),e.removeEventListener("error",l)},a=()=>{n(Of(e.result)),r()},l=()=>{i(e.error),r()};e.addEventListener("success",a),e.addEventListener("error",l)});return t.then(n=>{n instanceof IDBCursor&&H6.set(n,e)}).catch(()=>{}),JA.set(t,e),t}function qoe(e){if(vk.has(e))return;const t=new Promise((n,i)=>{const r=()=>{e.removeEventListener("complete",a),e.removeEventListener("error",l),e.removeEventListener("abort",l)},a=()=>{n(),r()},l=()=>{i(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",a),e.addEventListener("error",l),e.addEventListener("abort",l)});vk.set(e,t)}let yk={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return vk.get(e);if(t==="objectStoreNames")return e.objectStoreNames||G6.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Of(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function Koe(e){yk=e(yk)}function Xoe(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const i=e.call(nC(this),t,...n);return G6.set(i,t.sort?t.sort():[t]),Of(i)}:Hoe().includes(e)?function(...t){return e.apply(nC(this),t),Of(H6.get(this))}:function(...t){return Of(e.apply(nC(this),t))}}function Zoe(e){return typeof e=="function"?Xoe(e):(e instanceof IDBTransaction&&qoe(e),joe(e,Woe())?new Proxy(e,yk):e)}function Of(e){if(e instanceof IDBRequest)return Goe(e);if(tC.has(e))return tC.get(e);const t=Zoe(e);return t!==e&&(tC.set(e,t),JA.set(t,e)),t}const nC=e=>JA.get(e);function Yoe(e,t,{blocked:n,upgrade:i,blocking:r,terminated:a}={}){const l=indexedDB.open(e,t),h=Of(l);return i&&l.addEventListener("upgradeneeded",s=>{i(Of(l.result),s.oldVersion,s.newVersion,Of(l.transaction),s)}),n&&l.addEventListener("blocked",s=>n(s.oldVersion,s.newVersion,s)),h.then(s=>{a&&s.addEventListener("close",()=>a()),r&&s.addEventListener("versionchange",p=>r(p.oldVersion,p.newVersion,p))}).catch(()=>{}),h}const Joe=["get","getKey","getAll","getAllKeys","count"],Qoe=["put","add","delete","clear"],iC=new Map;function vB(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(iC.get(t))return iC.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,r=Qoe.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||Joe.includes(n)))return;const a=async function(l,...h){const s=this.transaction(l,r?"readwrite":"readonly");let p=s.store;return i&&(p=p.index(h.shift())),(await Promise.all([p[n](...h),r&&s.done]))[0]};return iC.set(t,a),a}Koe(e=>({...e,get:(t,n,i)=>vB(t,n)||e.get(t,n,i),has:(t,n)=>!!vB(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eae{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(tae(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function tae(e){return e.getComponent()?.type==="VERSION"}const bk="@firebase/app",yB="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vh=new YA("@firebase/app"),nae="@firebase/app-compat",iae="@firebase/analytics-compat",rae="@firebase/analytics",sae="@firebase/app-check-compat",oae="@firebase/app-check",aae="@firebase/auth",lae="@firebase/auth-compat",cae="@firebase/database",uae="@firebase/data-connect",dae="@firebase/database-compat",hae="@firebase/functions",fae="@firebase/functions-compat",mae="@firebase/installations",pae="@firebase/installations-compat",gae="@firebase/messaging",_ae="@firebase/messaging-compat",vae="@firebase/performance",yae="@firebase/performance-compat",bae="@firebase/remote-config",xae="@firebase/remote-config-compat",wae="@firebase/storage",Tae="@firebase/storage-compat",Sae="@firebase/firestore",Eae="@firebase/ai",Cae="@firebase/firestore-compat",kae="firebase",Iae="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xk="[DEFAULT]",Aae={[bk]:"fire-core",[nae]:"fire-core-compat",[rae]:"fire-analytics",[iae]:"fire-analytics-compat",[oae]:"fire-app-check",[sae]:"fire-app-check-compat",[aae]:"fire-auth",[lae]:"fire-auth-compat",[cae]:"fire-rtdb",[uae]:"fire-data-connect",[dae]:"fire-rtdb-compat",[hae]:"fire-fn",[fae]:"fire-fn-compat",[mae]:"fire-iid",[pae]:"fire-iid-compat",[gae]:"fire-fcm",[_ae]:"fire-fcm-compat",[vae]:"fire-perf",[yae]:"fire-perf-compat",[bae]:"fire-rc",[xae]:"fire-rc-compat",[wae]:"fire-gcs",[Tae]:"fire-gcs-compat",[Sae]:"fire-fst",[Cae]:"fire-fst-compat",[Eae]:"fire-vertex","fire-js":"fire-js",[kae]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d1=new Map,Pae=new Map,wk=new Map;function bB(e,t){try{e.container.addComponent(t)}catch(n){vh.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function K_(e){const t=e.name;if(wk.has(t))return vh.debug(`There were multiple attempts to register component ${t}.`),!1;wk.set(t,e);for(const n of d1.values())bB(n,e);for(const n of Pae.values())bB(n,e);return!0}function QA(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function kc(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mae={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Vf=new b0("app","Firebase",Mae);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dae{constructor(t,n,i){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new zp("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Vf.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hv=Iae;function q6(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const i={name:xk,automaticDataCollectionEnabled:!0,...t},r=i.name;if(typeof r!="string"||!r)throw Vf.create("bad-app-name",{appName:String(r)});if(n||(n=U6()),!n)throw Vf.create("no-options");const a=d1.get(r);if(a){if(Xf(n,a.options)&&Xf(i,a.config))return a;throw Vf.create("duplicate-app",{appName:r})}const l=new Foe(r);for(const s of wk.values())l.addComponent(s);const h=new Dae(n,i,l);return d1.set(r,h),h}function K6(e=xk){const t=d1.get(e);if(!t&&e===xk&&U6())return q6();if(!t)throw Vf.create("no-app",{appName:e});return t}function Bf(e,t,n){let i=Aae[e]??e;n&&(i+=`-${n}`);const r=i.match(/\s|\//),a=t.match(/\s|\//);if(r||a){const l=[`Unable to register library "${i}" with version "${t}":`];r&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&a&&l.push("and"),a&&l.push(`version name "${t}" contains illegal characters (whitespace or "/")`),vh.warn(l.join(" "));return}K_(new zp(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rae="firebase-heartbeat-database",Lae=1,Ub="firebase-heartbeat-store";let rC=null;function X6(){return rC||(rC=Yoe(Rae,Lae,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(Ub)}catch(n){console.warn(n)}}}}).catch(e=>{throw Vf.create("idb-open",{originalErrorMessage:e.message})})),rC}async function Oae(e){try{const n=(await X6()).transaction(Ub),i=await n.objectStore(Ub).get(Z6(e));return await n.done,i}catch(t){if(t instanceof Ph)vh.warn(t.message);else{const n=Vf.create("idb-get",{originalErrorMessage:t?.message});vh.warn(n.message)}}}async function xB(e,t){try{const i=(await X6()).transaction(Ub,"readwrite");await i.objectStore(Ub).put(t,Z6(e)),await i.done}catch(n){if(n instanceof Ph)vh.warn(n.message);else{const i=Vf.create("idb-set",{originalErrorMessage:n?.message});vh.warn(i.message)}}}function Z6(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vae=1024,Bae=30;class Fae{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Nae(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=wB();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(r=>r.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats.length>Bae){const r=Uae(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(r,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){vh.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=wB(),{heartbeatsToSend:n,unsentEntries:i}=zae(this._heartbeatsCache.heartbeats),r=u1(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(t){return vh.warn(t),""}}}function wB(){return new Date().toISOString().substring(0,10)}function zae(e,t=Vae){const n=[];let i=e.slice();for(const r of e){const a=n.find(l=>l.agent===r.agent);if(a){if(a.dates.push(r.date),TB(n)>t){a.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),TB(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class Nae{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Coe()?koe().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Oae(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return xB(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return xB(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function TB(e){return u1(JSON.stringify({version:2,heartbeats:e})).length}function Uae(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let i=1;i<e.length;i++)e[i].date<n&&(n=e[i].date,t=i);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $ae(e){K_(new zp("platform-logger",t=>new eae(t),"PRIVATE")),K_(new zp("heartbeat",t=>new Fae(t),"PRIVATE")),Bf(bk,yB,e),Bf(bk,yB,"esm2020"),Bf("fire-js","")}$ae("");var jae="firebase",Wae="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Bf(jae,Wae,"app");function Y6(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Hae=Y6,J6=new b0("auth","Firebase",Y6());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h1=new YA("@firebase/auth");function Gae(e,...t){h1.logLevel<=Li.WARN&&h1.warn(`Auth (${hv}): ${e}`,...t)}function hw(e,...t){h1.logLevel<=Li.ERROR&&h1.error(`Auth (${hv}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function du(e,...t){throw eP(e,...t)}function Ku(e,...t){return eP(e,...t)}function Q6(e,t,n){const i={...Hae(),[t]:n};return new b0("auth","Firebase",i).create(t,{appName:e.name})}function ch(e){return Q6(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function eP(e,...t){if(typeof e!="string"){const n=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=e.name),e._errorFactory.create(n,...i)}return J6.create(e,...t)}function di(e,t,...n){if(!e)throw eP(t,...n)}function oh(e){const t="INTERNAL ASSERTION FAILED: "+e;throw hw(t),new Error(t)}function yh(e,t){e||oh(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tk(){return typeof self<"u"&&self.location?.href||""}function qae(){return SB()==="http:"||SB()==="https:"}function SB(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kae(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(qae()||woe()||"connection"in navigator)?navigator.onLine:!0}function Xae(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0{constructor(t,n){this.shortDelay=t,this.longDelay=n,yh(n>t,"Short delay should be less than long delay!"),this.isMobile=yoe()||Toe()}get(){return Kae()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tP(e,t){yh(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eU{static initialize(t,n,i){this.fetchImpl=t,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;oh("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;oh("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;oh("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zae={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yae=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Jae=new w0(3e4,6e4);function Mh(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function Dh(e,t,n,i,r={}){return tU(e,r,async()=>{let a={},l={};i&&(t==="GET"?l=i:a={body:JSON.stringify(i)});const h=x0({key:e.config.apiKey,...l}).slice(1),s=await e._getAdditionalHeaders();s["Content-Type"]="application/json",e.languageCode&&(s["X-Firebase-Locale"]=e.languageCode);const p={method:t,headers:s,...a};return xoe()||(p.referrerPolicy="no-referrer"),e.emulatorConfig&&dv(e.emulatorConfig.host)&&(p.credentials="include"),eU.fetch()(await nU(e,e.config.apiHost,n,h),p)})}async function tU(e,t,n){e._canInitEmulator=!1;const i={...Zae,...t};try{const r=new ele(e),a=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const l=await a.json();if("needConfirmation"in l)throw Hx(e,"account-exists-with-different-credential",l);if(a.ok&&!("errorMessage"in l))return l;{const h=a.ok?l.errorMessage:l.error.message,[s,p]=h.split(" : ");if(s==="FEDERATED_USER_ID_ALREADY_LINKED")throw Hx(e,"credential-already-in-use",l);if(s==="EMAIL_EXISTS")throw Hx(e,"email-already-in-use",l);if(s==="USER_DISABLED")throw Hx(e,"user-disabled",l);const v=i[s]||s.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw Q6(e,v,p);du(e,v)}}catch(r){if(r instanceof Ph)throw r;du(e,"network-request-failed",{message:String(r)})}}async function T0(e,t,n,i,r={}){const a=await Dh(e,t,n,i,r);return"mfaPendingCredential"in a&&du(e,"multi-factor-auth-required",{_serverResponse:a}),a}async function nU(e,t,n,i){const r=`${t}${n}?${i}`,a=e,l=a.config.emulator?tP(e.config,r):`${e.config.apiScheme}://${r}`;return Yae.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(l).toString():l}function Qae(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class ele{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Ku(this.auth,"network-request-failed")),Jae.get())})}}function Hx(e,t,n){const i={appName:e.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Ku(e,t,i);return r.customData._tokenResponse=n,r}function EB(e){return e!==void 0&&e.enterprise!==void 0}class tle{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===t)return Qae(n.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function nle(e,t){return Dh(e,"GET","/v2/recaptchaConfig",Mh(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ile(e,t){return Dh(e,"POST","/v1/accounts:delete",t)}async function f1(e,t){return Dh(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jy(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function rle(e,t=!1){const n=zo(e),i=await n.getIdToken(t),r=nP(i);di(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const a=typeof r.firebase=="object"?r.firebase:void 0,l=a?.sign_in_provider;return{claims:r,token:i,authTime:Jy(sC(r.auth_time)),issuedAtTime:Jy(sC(r.iat)),expirationTime:Jy(sC(r.exp)),signInProvider:l||null,signInSecondFactor:a?.sign_in_second_factor||null}}function sC(e){return Number(e)*1e3}function nP(e){const[t,n,i]=e.split(".");if(t===void 0||n===void 0||i===void 0)return hw("JWT malformed, contained fewer than 3 sections"),null;try{const r=z6(n);return r?JSON.parse(r):(hw("Failed to decode base64 JWT payload"),null)}catch(r){return hw("Caught error parsing JWT payload as JSON",r?.toString()),null}}function CB(e){const t=nP(e);return di(t,"internal-error"),di(typeof t.exp<"u","internal-error"),di(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $b(e,t,n=!1){if(n)return t;try{return await t}catch(i){throw i instanceof Ph&&sle(i)&&e.auth.currentUser===e&&await e.auth.signOut(),i}}function sle({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ole{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sk{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Jy(this.lastLoginAt),this.creationTime=Jy(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m1(e){const t=e.auth,n=await e.getIdToken(),i=await $b(e,f1(t,{idToken:n}));di(i?.users.length,t,"internal-error");const r=i.users[0];e._notifyReloadListener(r);const a=r.providerUserInfo?.length?iU(r.providerUserInfo):[],l=lle(e.providerData,a),h=e.isAnonymous,s=!(e.email&&r.passwordHash)&&!l?.length,p=h?s:!1,v={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:l,metadata:new Sk(r.createdAt,r.lastLoginAt),isAnonymous:p};Object.assign(e,v)}async function ale(e){const t=zo(e);await m1(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function lle(e,t){return[...e.filter(i=>!t.some(r=>r.providerId===i.providerId)),...t]}function iU(e){return e.map(({providerId:t,...n})=>({providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cle(e,t){const n=await tU(e,{},async()=>{const i=x0({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:a}=e.config,l=await nU(e,r,"/v1/token",`key=${a}`),h=await e._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const s={method:"POST",headers:h,body:i};return e.emulatorConfig&&dv(e.emulatorConfig.host)&&(s.credentials="include"),eU.fetch()(l,s)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function ule(e,t){return Dh(e,"POST","/v2/accounts:revokeToken",Mh(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C_{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){di(t.idToken,"internal-error"),di(typeof t.idToken<"u","internal-error"),di(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):CB(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){di(t.length!==0,"internal-error");const n=CB(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(di(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:i,refreshToken:r,expiresIn:a}=await cle(t,n);this.updateTokensAndExpiration(i,r,Number(a))}updateTokensAndExpiration(t,n,i){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,n){const{refreshToken:i,accessToken:r,expirationTime:a}=n,l=new C_;return i&&(di(typeof i=="string","internal-error",{appName:t}),l.refreshToken=i),r&&(di(typeof r=="string","internal-error",{appName:t}),l.accessToken=r),a&&(di(typeof a=="number","internal-error",{appName:t}),l.expirationTime=a),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new C_,this.toJSON())}_performRefresh(){return oh("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ff(e,t){di(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class su{constructor({uid:t,auth:n,stsTokenManager:i,...r}){this.providerId="firebase",this.proactiveRefresh=new ole(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Sk(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(t){const n=await $b(this,this.stsTokenManager.getToken(this.auth,t));return di(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return rle(this,t)}reload(){return ale(this)}_assign(t){this!==t&&(di(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>({...n})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new su({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(t){di(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),n&&await m1(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(kc(this.auth.app))return Promise.reject(ch(this.auth));const t=await this.getIdToken();return await $b(this,ile(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){const i=n.displayName??void 0,r=n.email??void 0,a=n.phoneNumber??void 0,l=n.photoURL??void 0,h=n.tenantId??void 0,s=n._redirectEventId??void 0,p=n.createdAt??void 0,v=n.lastLoginAt??void 0,{uid:x,emailVerified:T,isAnonymous:k,providerData:P,stsTokenManager:M}=n;di(x&&M,t,"internal-error");const L=C_.fromJSON(this.name,M);di(typeof x=="string",t,"internal-error"),ff(i,t.name),ff(r,t.name),di(typeof T=="boolean",t,"internal-error"),di(typeof k=="boolean",t,"internal-error"),ff(a,t.name),ff(l,t.name),ff(h,t.name),ff(s,t.name),ff(p,t.name),ff(v,t.name);const B=new su({uid:x,auth:t,email:r,emailVerified:T,displayName:i,isAnonymous:k,photoURL:l,phoneNumber:a,tenantId:h,stsTokenManager:L,createdAt:p,lastLoginAt:v});return P&&Array.isArray(P)&&(B.providerData=P.map(F=>({...F}))),s&&(B._redirectEventId=s),B}static async _fromIdTokenResponse(t,n,i=!1){const r=new C_;r.updateFromServerResponse(n);const a=new su({uid:n.localId,auth:t,stsTokenManager:r,isAnonymous:i});return await m1(a),a}static async _fromGetAccountInfoResponse(t,n,i){const r=n.users[0];di(r.localId!==void 0,"internal-error");const a=r.providerUserInfo!==void 0?iU(r.providerUserInfo):[],l=!(r.email&&r.passwordHash)&&!a?.length,h=new C_;h.updateFromIdToken(i);const s=new su({uid:r.localId,auth:t,stsTokenManager:h,isAnonymous:l}),p={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new Sk(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!a?.length};return Object.assign(s,p),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kB=new Map;function ah(e){yh(e instanceof Function,"Expected a class definition");let t=kB.get(e);return t?(yh(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,kB.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rU{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}rU.type="NONE";const IB=rU;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fw(e,t,n){return`firebase:${e}:${t}:${n}`}class k_{constructor(t,n,i){this.persistence=t,this.auth=n,this.userKey=i;const{config:r,name:a}=this.auth;this.fullUserKey=fw(this.userKey,r.apiKey,a),this.fullPersistenceKey=fw("persistence",r.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await f1(this.auth,{idToken:t}).catch(()=>{});return n?su._fromGetAccountInfoResponse(this.auth,n,t):null}return su._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,i="authUser"){if(!n.length)return new k_(ah(IB),t,i);const r=(await Promise.all(n.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let a=r[0]||ah(IB);const l=fw(i,t.config.apiKey,t.name);let h=null;for(const p of n)try{const v=await p._get(l);if(v){let x;if(typeof v=="string"){const T=await f1(t,{idToken:v}).catch(()=>{});if(!T)break;x=await su._fromGetAccountInfoResponse(t,T,v)}else x=su._fromJSON(t,v);p!==a&&(h=x),a=p;break}}catch{}const s=r.filter(p=>p._shouldAllowMigration);return!a._shouldAllowMigration||!s.length?new k_(a,t,i):(a=s[0],h&&await a._set(l,h.toJSON()),await Promise.all(n.map(async p=>{if(p!==a)try{await p._remove(l)}catch{}})),new k_(a,t,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AB(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(lU(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(sU(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(uU(t))return"Blackberry";if(dU(t))return"Webos";if(oU(t))return"Safari";if((t.includes("chrome/")||aU(t))&&!t.includes("edge/"))return"Chrome";if(cU(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=e.match(n);if(i?.length===2)return i[1]}return"Other"}function sU(e=Ua()){return/firefox\//i.test(e)}function oU(e=Ua()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function aU(e=Ua()){return/crios\//i.test(e)}function lU(e=Ua()){return/iemobile/i.test(e)}function cU(e=Ua()){return/android/i.test(e)}function uU(e=Ua()){return/blackberry/i.test(e)}function dU(e=Ua()){return/webos/i.test(e)}function iP(e=Ua()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function dle(e=Ua()){return iP(e)&&!!window.navigator?.standalone}function hle(){return Soe()&&document.documentMode===10}function hU(e=Ua()){return iP(e)||cU(e)||dU(e)||uU(e)||/windows phone/i.test(e)||lU(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fU(e,t=[]){let n;switch(e){case"Browser":n=AB(Ua());break;case"Worker":n=`${AB(Ua())}-${e}`;break;default:n=e}const i=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${hv}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fle{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const i=a=>new Promise((l,h)=>{try{const s=t(a);l(s)}catch(s){h(s)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const i of this.queue)await i(t),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mle(e,t={}){return Dh(e,"GET","/v2/passwordPolicy",Mh(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ple=6;class gle{constructor(t){const n=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??ple,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=t.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,n),this.validatePasswordCharacterOptions(t,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(t,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=t.length>=i),r&&(n.meetsMaxPasswordLength=t.length<=r)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<t.length;r++)i=t.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(t,n,i,r,a){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _le{constructor(t,n,i,r){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new PB(this),this.idTokenSubscription=new PB(this),this.beforeStateQueue=new fle(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=J6,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=ah(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await k_.create(this,t),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await f1(this,{idToken:t}),i=await su._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){if(kc(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=this.redirectUser?._redirectEventId,l=i?._redirectEventId,h=await this.tryRedirectSignIn(t);(!a||a===l)&&h?.user&&(i=h.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return di(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await m1(t)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=Xae()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(kc(this.app))return Promise.reject(ch(this));const n=t?zo(t):null;return n&&di(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&di(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return kc(this.app)?Promise.reject(ch(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return kc(this.app)?Promise.reject(ch(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ah(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await mle(this),n=new gle(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new b0("auth","Firebase",t())}onAuthStateChanged(t,n,i){return this.registerStateListener(this.authStateSubscription,t,n,i)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,i){return this.registerStateListener(this.idTokenSubscription,t,n,i)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const i=this.onAuthStateChanged(()=>{i(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await ule(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(t,n){const i=await this.getOrInitRedirectPersistenceManager(n);return t===null?i.removeCurrentUser():i.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&ah(t)||this._popupRedirectResolver;di(n,this,"argument-error"),this.redirectPersistenceManager=await k_.create(this,[ah(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===t?this._currentUser:this.redirectUser?._redirectEventId===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=this.currentUser?.uid??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,i,r){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let l=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(di(h,this,"internal-error"),h.then(()=>{l||a(this.currentUser)}),typeof n=="function"){const s=t.addObserver(n,i,r);return()=>{l=!0,s()}}else{const s=t.addObserver(n);return()=>{l=!0,s()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return di(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=fU(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(t["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){if(kc(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return t?.error&&Gae(`Error while retrieving App Check token: ${t.error}`),t?.token}}function cm(e){return zo(e)}class PB{constructor(t){this.auth=t,this.observer=null,this.addObserver=Doe(n=>this.observer=n)}get next(){return di(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _T={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function vle(e){_T=e}function mU(e){return _T.loadJS(e)}function yle(){return _T.recaptchaEnterpriseScript}function ble(){return _T.gapiScript}function xle(e){return`__${e}${Math.floor(Math.random()*1e6)}`}class wle{constructor(){this.enterprise=new Tle}ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}class Tle{ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}const Sle="recaptcha-enterprise",pU="NO_RECAPTCHA";class Ele{constructor(t){this.type=Sle,this.auth=cm(t)}async verify(t="verify",n=!1){async function i(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(l,h)=>{nle(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(s=>{if(s.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const p=new tle(s);return a.tenantId==null?a._agentRecaptchaConfig=p:a._tenantRecaptchaConfigs[a.tenantId]=p,l(p.siteKey)}}).catch(s=>{h(s)})})}function r(a,l,h){const s=window.grecaptcha;EB(s)?s.enterprise.ready(()=>{s.enterprise.execute(a,{action:t}).then(p=>{l(p)}).catch(()=>{l(pU)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new wle().execute("siteKey",{action:"verify"}):new Promise((a,l)=>{i(this.auth).then(h=>{if(!n&&EB(window.grecaptcha))r(h,a,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let s=yle();s.length!==0&&(s+=h),mU(s).then(()=>{r(h,a,l)}).catch(p=>{l(p)})}}).catch(h=>{l(h)})})}}async function MB(e,t,n,i=!1,r=!1){const a=new Ele(e);let l;if(r)l=pU;else try{l=await a.verify(n)}catch{l=await a.verify(n,!0)}const h={...t};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const s=h.phoneEnrollmentInfo.phoneNumber,p=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:s,recaptchaToken:p,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const s=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:s,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return i?Object.assign(h,{captchaResp:l}):Object.assign(h,{captchaResponse:l}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function p1(e,t,n,i,r){if(e._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await MB(e,t,n,n==="getOobCode");return i(e,a)}else return i(e,t).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await MB(e,t,n,n==="getOobCode");return i(e,l)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cle(e,t){const n=QA(e,"auth");if(n.isInitialized()){const r=n.getImmediate(),a=n.getOptions();if(Xf(a,t??{}))return r;du(r,"already-initialized")}return n.initialize({options:t})}function kle(e,t){const n=t?.persistence||[],i=(Array.isArray(n)?n:[n]).map(ah);t?.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(i,t?.popupRedirectResolver)}function Ile(e,t,n){const i=cm(e);di(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const r=!1,a=gU(t),{host:l,port:h}=Ale(t),s=h===null?"":`:${h}`,p={url:`${a}//${l}${s}/`},v=Object.freeze({host:l,port:h,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){di(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),di(Xf(p,i.config.emulator)&&Xf(v,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=p,i.emulatorConfig=v,i.settings.appVerificationDisabledForTesting=!0,dv(l)?(j6(`${a}//${l}${s}`),W6("Auth",!0)):Ple()}function gU(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Ale(e){const t=gU(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const a=r[1];return{host:a,port:DB(i.substr(a.length+1))}}else{const[a,l]=i.split(":");return{host:a,port:DB(l)}}}function DB(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function Ple(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rP{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return oh("not implemented")}_getIdTokenResponse(t){return oh("not implemented")}_linkToIdToken(t,n){return oh("not implemented")}_getReauthenticationResolver(t){return oh("not implemented")}}async function Mle(e,t){return Dh(e,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dle(e,t){return T0(e,"POST","/v1/accounts:signInWithPassword",Mh(e,t))}async function Rle(e,t){return Dh(e,"POST","/v1/accounts:sendOobCode",Mh(e,t))}async function Lle(e,t){return Rle(e,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ole(e,t){return T0(e,"POST","/v1/accounts:signInWithEmailLink",Mh(e,t))}async function Vle(e,t){return T0(e,"POST","/v1/accounts:signInWithEmailLink",Mh(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb extends rP{constructor(t,n,i,r=null){super("password",i),this._email=t,this._password=n,this._tenantId=r}static _fromEmailAndPassword(t,n){return new jb(t,n,"password")}static _fromEmailAndCode(t,n,i=null){return new jb(t,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return p1(t,n,"signInWithPassword",Dle);case"emailLink":return Ole(t,{email:this._email,oobCode:this._password});default:du(t,"internal-error")}}async _linkToIdToken(t,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return p1(t,i,"signUpPassword",Mle);case"emailLink":return Vle(t,{idToken:n,email:this._email,oobCode:this._password});default:du(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I_(e,t){return T0(e,"POST","/v1/accounts:signInWithIdp",Mh(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ble="http://localhost";class Np extends rP{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new Np(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):du("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:r,...a}=n;if(!i||!r)return null;const l=new Np(i,r);return l.idToken=a.idToken||void 0,l.accessToken=a.accessToken||void 0,l.secret=a.secret,l.nonce=a.nonce,l.pendingToken=a.pendingToken||null,l}_getIdTokenResponse(t){const n=this.buildRequest();return I_(t,n)}_linkToIdToken(t,n){const i=this.buildRequest();return i.idToken=n,I_(t,i)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,I_(t,n)}buildRequest(){const t={requestUri:Ble,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=x0(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fle(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function zle(e){const t=Ay(Py(e)).link,n=t?Ay(Py(t)).deep_link_id:null,i=Ay(Py(e)).deep_link_id;return(i?Ay(Py(i)).link:null)||i||n||t||e}class sP{constructor(t){const n=Ay(Py(t)),i=n.apiKey??null,r=n.oobCode??null,a=Fle(n.mode??null);di(i&&r&&a,"argument-error"),this.apiKey=i,this.operation=a,this.code=r,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(t){const n=zle(t);try{return new sP(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{constructor(){this.providerId=ag.PROVIDER_ID}static credential(t,n){return jb._fromEmailAndPassword(t,n)}static credentialWithLink(t,n){const i=sP.parseLink(n);return di(i,"argument-error"),jb._fromEmailAndCode(t,i.code,i.tenantId)}}ag.PROVIDER_ID="password";ag.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ag.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _U{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0 extends _U{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf extends S0{constructor(){super("facebook.com")}static credential(t){return Np._fromParams({providerId:vf.PROVIDER_ID,signInMethod:vf.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return vf.credentialFromTaggedObject(t)}static credentialFromError(t){return vf.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return vf.credential(t.oauthAccessToken)}catch{return null}}}vf.FACEBOOK_SIGN_IN_METHOD="facebook.com";vf.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf extends S0{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return Np._fromParams({providerId:yf.PROVIDER_ID,signInMethod:yf.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return yf.credentialFromTaggedObject(t)}static credentialFromError(t){return yf.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:i}=t;if(!n&&!i)return null;try{return yf.credential(n,i)}catch{return null}}}yf.GOOGLE_SIGN_IN_METHOD="google.com";yf.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf extends S0{constructor(){super("github.com")}static credential(t){return Np._fromParams({providerId:bf.PROVIDER_ID,signInMethod:bf.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return bf.credentialFromTaggedObject(t)}static credentialFromError(t){return bf.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return bf.credential(t.oauthAccessToken)}catch{return null}}}bf.GITHUB_SIGN_IN_METHOD="github.com";bf.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf extends S0{constructor(){super("twitter.com")}static credential(t,n){return Np._fromParams({providerId:xf.PROVIDER_ID,signInMethod:xf.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return xf.credentialFromTaggedObject(t)}static credentialFromError(t){return xf.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=t;if(!n||!i)return null;try{return xf.credential(n,i)}catch{return null}}}xf.TWITTER_SIGN_IN_METHOD="twitter.com";xf.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nle(e,t){return T0(e,"POST","/v1/accounts:signUp",Mh(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,i,r=!1){const a=await su._fromIdTokenResponse(t,i,r),l=RB(i);return new Up({user:a,providerId:l,_tokenResponse:i,operationType:n})}static async _forOperation(t,n,i){await t._updateTokensIfNecessary(i,!0);const r=RB(i);return new Up({user:t,providerId:r,_tokenResponse:i,operationType:n})}}function RB(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1 extends Ph{constructor(t,n,i,r){super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,g1.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,n,i,r){return new g1(t,n,i,r)}}function vU(e,t,n,i){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?g1._fromErrorAndOperation(e,a,t,i):a})}async function Ule(e,t,n=!1){const i=await $b(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Up._forOperation(e,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yU(e,t,n=!1){const{auth:i}=e;if(kc(i.app))return Promise.reject(ch(i));const r="reauthenticate";try{const a=await $b(e,vU(i,r,t,e),n);di(a.idToken,i,"internal-error");const l=nP(a.idToken);di(l,i,"internal-error");const{sub:h}=l;return di(e.uid===h,i,"user-mismatch"),Up._forOperation(e,r,a)}catch(a){throw a?.code==="auth/user-not-found"&&du(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bU(e,t,n=!1){if(kc(e.app))return Promise.reject(ch(e));const i="signIn",r=await vU(e,i,t),a=await Up._fromIdTokenResponse(e,i,r);return n||await e._updateCurrentUser(a.user),a}async function $le(e,t){return bU(cm(e),t)}async function jle(e,t){return yU(zo(e),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xU(e){const t=cm(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function Wle(e,t,n){const i=cm(e);await p1(i,{requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"},"getOobCode",Lle)}async function Hle(e,t,n){if(kc(e.app))return Promise.reject(ch(e));const i=cm(e),l=await p1(i,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Nle).catch(s=>{throw s.code==="auth/password-does-not-meet-requirements"&&xU(e),s}),h=await Up._fromIdTokenResponse(i,"signIn",l);return await i._updateCurrentUser(h.user),h}function Gle(e,t,n){return kc(e.app)?Promise.reject(ch(e)):$le(zo(e),ag.credential(t,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&xU(e),i})}function qle(e,t,n,i){return zo(e).onIdTokenChanged(t,n,i)}function Kle(e,t,n){return zo(e).beforeAuthStateChanged(t,n)}function Xle(e,t,n,i){return zo(e).onAuthStateChanged(t,n,i)}function Zle(e){return zo(e).signOut()}async function Yle(e){return zo(e).delete()}const _1="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wU{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(_1,"1"),this.storage.removeItem(_1),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jle=1e3,Qle=10;class TU extends wU{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=hU(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&t(n,r,i)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((l,h,s)=>{this.notifyListeners(l,s)});return}const i=t.key;n?this.detachListener():this.stopPolling();const r=()=>{const l=this.storage.getItem(i);!n&&this.localCache[i]===l||this.notifyListeners(i,l)},a=this.storage.getItem(i);hle()&&a!==t.newValue&&t.newValue!==t.oldValue?setTimeout(r,Qle):r()}notifyListeners(t,n){this.localCache[t]=n;const i=this.listeners[t];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:i}),!0)})},Jle)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}TU.type="LOCAL";const ece=TU;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SU extends wU{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}SU.type="SESSION";const EU=SU;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tce(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(r=>r.isListeningto(t));if(n)return n;const i=new vT(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:i,eventType:r,data:a}=n.data,l=this.handlersMap[r];if(!l?.size)return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const h=Array.from(l).map(async p=>p(n.origin,a)),s=await tce(h);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:s})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}vT.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oP(e="",t=10){let n="";for(let i=0;i<t;i++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nce{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let a,l;return new Promise((h,s)=>{const p=oP("",20);r.port1.start();const v=setTimeout(()=>{s(new Error("unsupported_event"))},i);l={messageChannel:r,onMessage(x){const T=x;if(T.data.eventId===p)switch(T.data.status){case"ack":clearTimeout(v),a=setTimeout(()=>{s(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),h(T.data.response);break;default:clearTimeout(v),clearTimeout(a),s(new Error("invalid_response"));break}}},this.handlers.add(l),r.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:t,eventId:p,data:n},[r.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xu(){return window}function ice(e){Xu().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CU(){return typeof Xu().WorkerGlobalScope<"u"&&typeof Xu().importScripts=="function"}async function rce(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function sce(){return navigator?.serviceWorker?.controller||null}function oce(){return CU()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kU="firebaseLocalStorageDb",ace=1,v1="firebaseLocalStorage",IU="fbase_key";class E0{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function yT(e,t){return e.transaction([v1],t?"readwrite":"readonly").objectStore(v1)}function lce(){const e=indexedDB.deleteDatabase(kU);return new E0(e).toPromise()}function Ek(){const e=indexedDB.open(kU,ace);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const i=e.result;try{i.createObjectStore(v1,{keyPath:IU})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const i=e.result;i.objectStoreNames.contains(v1)?t(i):(i.close(),await lce(),t(await Ek()))})})}async function LB(e,t,n){const i=yT(e,!0).put({[IU]:t,value:n});return new E0(i).toPromise()}async function cce(e,t){const n=yT(e,!1).get(t),i=await new E0(n).toPromise();return i===void 0?null:i.value}function OB(e,t){const n=yT(e,!0).delete(t);return new E0(n).toPromise()}const uce=800,dce=3;class AU{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ek(),this.db)}async _withRetries(t){let n=0;for(;;)try{const i=await this._openDb();return await t(i)}catch(i){if(n++>dce)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return CU()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=vT._getInstance(oce()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await rce(),!this.activeServiceWorker)return;this.sender=new nce(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||sce()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Ek();return await LB(t,_1,"1"),await OB(t,_1),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>LB(i,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(i=>cce(i,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>OB(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(r=>{const a=yT(r,!1).getAll();return new E0(a).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(t.length!==0)for(const{fbase_key:r,value:a}of t)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(a)&&(this.notifyListeners(r,a),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(t,n){this.localCache[t]=n;const i=this.listeners[t];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),uce)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}AU.type="LOCAL";const hce=AU;new w0(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fce(e,t){return t?ah(t):(di(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aP extends rP{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return I_(t,this._buildIdpRequest())}_linkToIdToken(t,n){return I_(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return I_(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function mce(e){return bU(e.auth,new aP(e),e.bypassAuthState)}function pce(e){const{auth:t,user:n}=e;return di(n,t,"internal-error"),yU(n,new aP(e),e.bypassAuthState)}async function gce(e){const{auth:t,user:n}=e;return di(n,t,"internal-error"),Ule(n,new aP(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PU{constructor(t,n,i,r,a=!1){this.auth=t,this.resolver=i,this.user=r,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:i,postBody:r,tenantId:a,error:l,type:h}=t;if(l){this.reject(l);return}const s={auth:this.auth,requestUri:n,sessionId:i,tenantId:a||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(s))}catch(p){this.reject(p)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return mce;case"linkViaPopup":case"linkViaRedirect":return gce;case"reauthViaPopup":case"reauthViaRedirect":return pce;default:du(this.auth,"internal-error")}}resolve(t){yh(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){yh(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _ce=new w0(2e3,1e4);class p_ extends PU{constructor(t,n,i,r,a){super(t,n,r,a),this.provider=i,this.authWindow=null,this.pollId=null,p_.currentPopupAction&&p_.currentPopupAction.cancel(),p_.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return di(t,this.auth,"internal-error"),t}async onExecution(){yh(this.filter.length===1,"Popup operations only handle one event");const t=oP();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ku(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Ku(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,p_.currentPopupAction=null}pollUserCancellation(){const t=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ku(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,_ce.get())};t()}}p_.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vce="pendingRedirect",mw=new Map;class yce extends PU{constructor(t,n,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let t=mw.get(this.auth._key());if(!t){try{const i=await bce(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(i)}catch(n){t=()=>Promise.reject(n)}mw.set(this.auth._key(),t)}return this.bypassAuthState||mw.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function bce(e,t){const n=Tce(t),i=wce(e);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function xce(e,t){mw.set(e._key(),t)}function wce(e){return ah(e._redirectPersistence)}function Tce(e){return fw(vce,e.config.apiKey,e.name)}async function Sce(e,t,n=!1){if(kc(e.app))return Promise.reject(ch(e));const i=cm(e),r=fce(i,t),l=await new yce(i,r,n).execute();return l&&!n&&(delete l.user._redirectEventId,await i._persistUserIfCurrent(l.user),await i._setRedirectUser(null,t)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ece=600*1e3;class Cce{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(n=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!kce(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){if(t.error&&!MU(t)){const i=t.error.code?.split("auth/")[1]||"internal-error";n.onError(Ku(this.auth,i))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const i=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=Ece&&this.cachedEventUids.clear(),this.cachedEventUids.has(VB(t))}saveEventToCache(t){this.cachedEventUids.add(VB(t)),this.lastProcessedEventTime=Date.now()}}function VB(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function MU({type:e,error:t}){return e==="unknown"&&t?.code==="auth/no-auth-event"}function kce(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return MU(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ice(e,t={}){return Dh(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ace=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Pce=/^https?/;async function Mce(e){if(e.config.emulator)return;const{authorizedDomains:t}=await Ice(e);for(const n of t)try{if(Dce(n))return}catch{}du(e,"unauthorized-domain")}function Dce(e){const t=Tk(),{protocol:n,hostname:i}=new URL(t);if(e.startsWith("chrome-extension://")){const l=new URL(e);return l.hostname===""&&i===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===i}if(!Pce.test(n))return!1;if(Ace.test(e))return i===e;const r=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rce=new w0(3e4,6e4);function BB(){const e=Xu().___jsl;if(e?.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function Lce(e){return new Promise((t,n)=>{function i(){BB(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{BB(),n(Ku(e,"network-request-failed"))},timeout:Rce.get()})}if(Xu().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(Xu().gapi?.load)i();else{const r=xle("iframefcb");return Xu()[r]=()=>{gapi.load?i():n(Ku(e,"network-request-failed"))},mU(`${ble()}?onload=${r}`).catch(a=>n(a))}}).catch(t=>{throw pw=null,t})}let pw=null;function Oce(e){return pw=pw||Lce(e),pw}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vce=new w0(5e3,15e3),Bce="__/auth/iframe",Fce="emulator/auth/iframe",zce={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Nce=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Uce(e){const t=e.config;di(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?tP(t,Fce):`https://${e.config.authDomain}/${Bce}`,i={apiKey:t.apiKey,appName:e.name,v:hv},r=Nce.get(e.config.apiHost);r&&(i.eid=r);const a=e._getFrameworks();return a.length&&(i.fw=a.join(",")),`${n}?${x0(i).slice(1)}`}async function $ce(e){const t=await Oce(e),n=Xu().gapi;return di(n,e,"internal-error"),t.open({where:document.body,url:Uce(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:zce,dontclear:!0},i=>new Promise(async(r,a)=>{await i.restyle({setHideOnLeave:!1});const l=Ku(e,"network-request-failed"),h=Xu().setTimeout(()=>{a(l)},Vce.get());function s(){Xu().clearTimeout(h),r(i)}i.ping(s).then(s,()=>{a(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jce={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Wce=500,Hce=600,Gce="_blank",qce="http://localhost";class FB{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Kce(e,t,n,i=Wce,r=Hce){const a=Math.max((window.screen.availHeight-r)/2,0).toString(),l=Math.max((window.screen.availWidth-i)/2,0).toString();let h="";const s={...jce,width:i.toString(),height:r.toString(),top:a,left:l},p=Ua().toLowerCase();n&&(h=aU(p)?Gce:n),sU(p)&&(t=t||qce,s.scrollbars="yes");const v=Object.entries(s).reduce((T,[k,P])=>`${T}${k}=${P},`,"");if(dle(p)&&h!=="_self")return Xce(t||"",h),new FB(null);const x=window.open(t||"",h,v);di(x,e,"popup-blocked");try{x.focus()}catch{}return new FB(x)}function Xce(e,t){const n=document.createElement("a");n.href=e,n.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zce="__/auth/handler",Yce="emulator/auth/handler",Jce=encodeURIComponent("fac");async function zB(e,t,n,i,r,a){di(e.config.authDomain,e,"auth-domain-config-required"),di(e.config.apiKey,e,"invalid-api-key");const l={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:i,v:hv,eventId:r};if(t instanceof _U){t.setDefaultLanguage(e.languageCode),l.providerId=t.providerId||"",Moe(t.getCustomParameters())||(l.customParameters=JSON.stringify(t.getCustomParameters()));for(const[v,x]of Object.entries({}))l[v]=x}if(t instanceof S0){const v=t.getScopes().filter(x=>x!=="");v.length>0&&(l.scopes=v.join(","))}e.tenantId&&(l.tid=e.tenantId);const h=l;for(const v of Object.keys(h))h[v]===void 0&&delete h[v];const s=await e._getAppCheckToken(),p=s?`#${Jce}=${encodeURIComponent(s)}`:"";return`${Qce(e)}?${x0(h).slice(1)}${p}`}function Qce({config:e}){return e.emulator?tP(e,Yce):`https://${e.authDomain}/${Zce}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oC="webStorageSupport";class eue{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=EU,this._completeRedirectFn=Sce,this._overrideRedirectResult=xce}async _openPopup(t,n,i,r){yh(this.eventManagers[t._key()]?.manager,"_initialize() not called before _openPopup()");const a=await zB(t,n,i,Tk(),r);return Kce(t,a,oP())}async _openRedirect(t,n,i,r){await this._originValidation(t);const a=await zB(t,n,i,Tk(),r);return ice(a),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:r,promise:a}=this.eventManagers[n];return r?Promise.resolve(r):(yh(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(t);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(t){const n=await $ce(t),i=new Cce(t);return n.register("authEvent",r=>(di(r?.authEvent,t,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=n,i}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(oC,{type:oC},r=>{const a=r?.[0]?.[oC];a!==void 0&&n(!!a),du(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Mce(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return hU()||oU()||iP()}}const tue=eue;var NB="@firebase/auth",UB="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nue{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(i=>{t(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){di(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iue(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function rue(e){K_(new zp("auth",(t,{options:n})=>{const i=t.getProvider("app").getImmediate(),r=t.getProvider("heartbeat"),a=t.getProvider("app-check-internal"),{apiKey:l,authDomain:h}=i.options;di(l&&!l.includes(":"),"invalid-api-key",{appName:i.name});const s={apiKey:l,authDomain:h,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:fU(e)},p=new _le(i,r,a,s);return kle(p,n),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,i)=>{t.getProvider("auth-internal").initialize()})),K_(new zp("auth-internal",t=>{const n=cm(t.getProvider("auth").getImmediate());return(i=>new nue(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Bf(NB,UB,iue(e)),Bf(NB,UB,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sue=300,oue=$6("authIdTokenMaxAge")||sue;let $B=null;const aue=e=>async t=>{const n=t&&await t.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>oue)return;const r=n?.token;$B!==r&&($B=r,await fetch(e,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function lue(e=K6()){const t=QA(e,"auth");if(t.isInitialized())return t.getImmediate();const n=Cle(e,{popupRedirectResolver:tue,persistence:[hce,ece,EU]}),i=$6("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const l=aue(a.toString());Kle(n,l,()=>l(n.currentUser)),qle(n,h=>l(h))}}const r=N6("auth");return r&&Ile(n,`http://${r}`),n}function cue(){return document.getElementsByTagName("head")?.[0]??document}vle({loadJS(e){return new Promise((t,n)=>{const i=document.createElement("script");i.setAttribute("src",e),i.onload=t,i.onerror=r=>{const a=Ku("internal-error");a.customData=r,n(a)},i.type="text/javascript",i.charset="UTF-8",cue().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});rue("Browser");var jB=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ff,DU;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(Z,$){function H(){}H.prototype=$.prototype,Z.F=$.prototype,Z.prototype=new H,Z.prototype.constructor=Z,Z.D=function(W,te,Y){for(var ne=Array(arguments.length-2),Se=2;Se<arguments.length;Se++)ne[Se-2]=arguments[Se];return $.prototype[te].apply(W,ne)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(Z,$,H){H||(H=0);const W=Array(16);if(typeof $=="string")for(var te=0;te<16;++te)W[te]=$.charCodeAt(H++)|$.charCodeAt(H++)<<8|$.charCodeAt(H++)<<16|$.charCodeAt(H++)<<24;else for(te=0;te<16;++te)W[te]=$[H++]|$[H++]<<8|$[H++]<<16|$[H++]<<24;$=Z.g[0],H=Z.g[1],te=Z.g[2];let Y=Z.g[3],ne;ne=$+(Y^H&(te^Y))+W[0]+3614090360&4294967295,$=H+(ne<<7&4294967295|ne>>>25),ne=Y+(te^$&(H^te))+W[1]+3905402710&4294967295,Y=$+(ne<<12&4294967295|ne>>>20),ne=te+(H^Y&($^H))+W[2]+606105819&4294967295,te=Y+(ne<<17&4294967295|ne>>>15),ne=H+($^te&(Y^$))+W[3]+3250441966&4294967295,H=te+(ne<<22&4294967295|ne>>>10),ne=$+(Y^H&(te^Y))+W[4]+4118548399&4294967295,$=H+(ne<<7&4294967295|ne>>>25),ne=Y+(te^$&(H^te))+W[5]+1200080426&4294967295,Y=$+(ne<<12&4294967295|ne>>>20),ne=te+(H^Y&($^H))+W[6]+2821735955&4294967295,te=Y+(ne<<17&4294967295|ne>>>15),ne=H+($^te&(Y^$))+W[7]+4249261313&4294967295,H=te+(ne<<22&4294967295|ne>>>10),ne=$+(Y^H&(te^Y))+W[8]+1770035416&4294967295,$=H+(ne<<7&4294967295|ne>>>25),ne=Y+(te^$&(H^te))+W[9]+2336552879&4294967295,Y=$+(ne<<12&4294967295|ne>>>20),ne=te+(H^Y&($^H))+W[10]+4294925233&4294967295,te=Y+(ne<<17&4294967295|ne>>>15),ne=H+($^te&(Y^$))+W[11]+2304563134&4294967295,H=te+(ne<<22&4294967295|ne>>>10),ne=$+(Y^H&(te^Y))+W[12]+1804603682&4294967295,$=H+(ne<<7&4294967295|ne>>>25),ne=Y+(te^$&(H^te))+W[13]+4254626195&4294967295,Y=$+(ne<<12&4294967295|ne>>>20),ne=te+(H^Y&($^H))+W[14]+2792965006&4294967295,te=Y+(ne<<17&4294967295|ne>>>15),ne=H+($^te&(Y^$))+W[15]+1236535329&4294967295,H=te+(ne<<22&4294967295|ne>>>10),ne=$+(te^Y&(H^te))+W[1]+4129170786&4294967295,$=H+(ne<<5&4294967295|ne>>>27),ne=Y+(H^te&($^H))+W[6]+3225465664&4294967295,Y=$+(ne<<9&4294967295|ne>>>23),ne=te+($^H&(Y^$))+W[11]+643717713&4294967295,te=Y+(ne<<14&4294967295|ne>>>18),ne=H+(Y^$&(te^Y))+W[0]+3921069994&4294967295,H=te+(ne<<20&4294967295|ne>>>12),ne=$+(te^Y&(H^te))+W[5]+3593408605&4294967295,$=H+(ne<<5&4294967295|ne>>>27),ne=Y+(H^te&($^H))+W[10]+38016083&4294967295,Y=$+(ne<<9&4294967295|ne>>>23),ne=te+($^H&(Y^$))+W[15]+3634488961&4294967295,te=Y+(ne<<14&4294967295|ne>>>18),ne=H+(Y^$&(te^Y))+W[4]+3889429448&4294967295,H=te+(ne<<20&4294967295|ne>>>12),ne=$+(te^Y&(H^te))+W[9]+568446438&4294967295,$=H+(ne<<5&4294967295|ne>>>27),ne=Y+(H^te&($^H))+W[14]+3275163606&4294967295,Y=$+(ne<<9&4294967295|ne>>>23),ne=te+($^H&(Y^$))+W[3]+4107603335&4294967295,te=Y+(ne<<14&4294967295|ne>>>18),ne=H+(Y^$&(te^Y))+W[8]+1163531501&4294967295,H=te+(ne<<20&4294967295|ne>>>12),ne=$+(te^Y&(H^te))+W[13]+2850285829&4294967295,$=H+(ne<<5&4294967295|ne>>>27),ne=Y+(H^te&($^H))+W[2]+4243563512&4294967295,Y=$+(ne<<9&4294967295|ne>>>23),ne=te+($^H&(Y^$))+W[7]+1735328473&4294967295,te=Y+(ne<<14&4294967295|ne>>>18),ne=H+(Y^$&(te^Y))+W[12]+2368359562&4294967295,H=te+(ne<<20&4294967295|ne>>>12),ne=$+(H^te^Y)+W[5]+4294588738&4294967295,$=H+(ne<<4&4294967295|ne>>>28),ne=Y+($^H^te)+W[8]+2272392833&4294967295,Y=$+(ne<<11&4294967295|ne>>>21),ne=te+(Y^$^H)+W[11]+1839030562&4294967295,te=Y+(ne<<16&4294967295|ne>>>16),ne=H+(te^Y^$)+W[14]+4259657740&4294967295,H=te+(ne<<23&4294967295|ne>>>9),ne=$+(H^te^Y)+W[1]+2763975236&4294967295,$=H+(ne<<4&4294967295|ne>>>28),ne=Y+($^H^te)+W[4]+1272893353&4294967295,Y=$+(ne<<11&4294967295|ne>>>21),ne=te+(Y^$^H)+W[7]+4139469664&4294967295,te=Y+(ne<<16&4294967295|ne>>>16),ne=H+(te^Y^$)+W[10]+3200236656&4294967295,H=te+(ne<<23&4294967295|ne>>>9),ne=$+(H^te^Y)+W[13]+681279174&4294967295,$=H+(ne<<4&4294967295|ne>>>28),ne=Y+($^H^te)+W[0]+3936430074&4294967295,Y=$+(ne<<11&4294967295|ne>>>21),ne=te+(Y^$^H)+W[3]+3572445317&4294967295,te=Y+(ne<<16&4294967295|ne>>>16),ne=H+(te^Y^$)+W[6]+76029189&4294967295,H=te+(ne<<23&4294967295|ne>>>9),ne=$+(H^te^Y)+W[9]+3654602809&4294967295,$=H+(ne<<4&4294967295|ne>>>28),ne=Y+($^H^te)+W[12]+3873151461&4294967295,Y=$+(ne<<11&4294967295|ne>>>21),ne=te+(Y^$^H)+W[15]+530742520&4294967295,te=Y+(ne<<16&4294967295|ne>>>16),ne=H+(te^Y^$)+W[2]+3299628645&4294967295,H=te+(ne<<23&4294967295|ne>>>9),ne=$+(te^(H|~Y))+W[0]+4096336452&4294967295,$=H+(ne<<6&4294967295|ne>>>26),ne=Y+(H^($|~te))+W[7]+1126891415&4294967295,Y=$+(ne<<10&4294967295|ne>>>22),ne=te+($^(Y|~H))+W[14]+2878612391&4294967295,te=Y+(ne<<15&4294967295|ne>>>17),ne=H+(Y^(te|~$))+W[5]+4237533241&4294967295,H=te+(ne<<21&4294967295|ne>>>11),ne=$+(te^(H|~Y))+W[12]+1700485571&4294967295,$=H+(ne<<6&4294967295|ne>>>26),ne=Y+(H^($|~te))+W[3]+2399980690&4294967295,Y=$+(ne<<10&4294967295|ne>>>22),ne=te+($^(Y|~H))+W[10]+4293915773&4294967295,te=Y+(ne<<15&4294967295|ne>>>17),ne=H+(Y^(te|~$))+W[1]+2240044497&4294967295,H=te+(ne<<21&4294967295|ne>>>11),ne=$+(te^(H|~Y))+W[8]+1873313359&4294967295,$=H+(ne<<6&4294967295|ne>>>26),ne=Y+(H^($|~te))+W[15]+4264355552&4294967295,Y=$+(ne<<10&4294967295|ne>>>22),ne=te+($^(Y|~H))+W[6]+2734768916&4294967295,te=Y+(ne<<15&4294967295|ne>>>17),ne=H+(Y^(te|~$))+W[13]+1309151649&4294967295,H=te+(ne<<21&4294967295|ne>>>11),ne=$+(te^(H|~Y))+W[4]+4149444226&4294967295,$=H+(ne<<6&4294967295|ne>>>26),ne=Y+(H^($|~te))+W[11]+3174756917&4294967295,Y=$+(ne<<10&4294967295|ne>>>22),ne=te+($^(Y|~H))+W[2]+718787259&4294967295,te=Y+(ne<<15&4294967295|ne>>>17),ne=H+(Y^(te|~$))+W[9]+3951481745&4294967295,Z.g[0]=Z.g[0]+$&4294967295,Z.g[1]=Z.g[1]+(te+(ne<<21&4294967295|ne>>>11))&4294967295,Z.g[2]=Z.g[2]+te&4294967295,Z.g[3]=Z.g[3]+Y&4294967295}i.prototype.v=function(Z,$){$===void 0&&($=Z.length);const H=$-this.blockSize,W=this.C;let te=this.h,Y=0;for(;Y<$;){if(te==0)for(;Y<=H;)r(this,Z,Y),Y+=this.blockSize;if(typeof Z=="string"){for(;Y<$;)if(W[te++]=Z.charCodeAt(Y++),te==this.blockSize){r(this,W),te=0;break}}else for(;Y<$;)if(W[te++]=Z[Y++],te==this.blockSize){r(this,W),te=0;break}}this.h=te,this.o+=$},i.prototype.A=function(){var Z=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);Z[0]=128;for(var $=1;$<Z.length-8;++$)Z[$]=0;$=this.o*8;for(var H=Z.length-8;H<Z.length;++H)Z[H]=$&255,$/=256;for(this.v(Z),Z=Array(16),$=0,H=0;H<4;++H)for(let W=0;W<32;W+=8)Z[$++]=this.g[H]>>>W&255;return Z};function a(Z,$){var H=h;return Object.prototype.hasOwnProperty.call(H,Z)?H[Z]:H[Z]=$(Z)}function l(Z,$){this.h=$;const H=[];let W=!0;for(let te=Z.length-1;te>=0;te--){const Y=Z[te]|0;W&&Y==$||(H[te]=Y,W=!1)}this.g=H}var h={};function s(Z){return-128<=Z&&Z<128?a(Z,function($){return new l([$|0],$<0?-1:0)}):new l([Z|0],Z<0?-1:0)}function p(Z){if(isNaN(Z)||!isFinite(Z))return x;if(Z<0)return L(p(-Z));const $=[];let H=1;for(let W=0;Z>=H;W++)$[W]=Z/H|0,H*=4294967296;return new l($,0)}function v(Z,$){if(Z.length==0)throw Error("number format error: empty string");if($=$||10,$<2||36<$)throw Error("radix out of range: "+$);if(Z.charAt(0)=="-")return L(v(Z.substring(1),$));if(Z.indexOf("-")>=0)throw Error('number format error: interior "-" character');const H=p(Math.pow($,8));let W=x;for(let Y=0;Y<Z.length;Y+=8){var te=Math.min(8,Z.length-Y);const ne=parseInt(Z.substring(Y,Y+te),$);te<8?(te=p(Math.pow($,te)),W=W.j(te).add(p(ne))):(W=W.j(H),W=W.add(p(ne)))}return W}var x=s(0),T=s(1),k=s(16777216);e=l.prototype,e.m=function(){if(M(this))return-L(this).m();let Z=0,$=1;for(let H=0;H<this.g.length;H++){const W=this.i(H);Z+=(W>=0?W:4294967296+W)*$,$*=4294967296}return Z},e.toString=function(Z){if(Z=Z||10,Z<2||36<Z)throw Error("radix out of range: "+Z);if(P(this))return"0";if(M(this))return"-"+L(this).toString(Z);const $=p(Math.pow(Z,6));var H=this;let W="";for(;;){const te=J(H,$).g;H=B(H,te.j($));let Y=((H.g.length>0?H.g[0]:H.h)>>>0).toString(Z);if(H=te,P(H))return Y+W;for(;Y.length<6;)Y="0"+Y;W=Y+W}},e.i=function(Z){return Z<0?0:Z<this.g.length?this.g[Z]:this.h};function P(Z){if(Z.h!=0)return!1;for(let $=0;$<Z.g.length;$++)if(Z.g[$]!=0)return!1;return!0}function M(Z){return Z.h==-1}e.l=function(Z){return Z=B(this,Z),M(Z)?-1:P(Z)?0:1};function L(Z){const $=Z.g.length,H=[];for(let W=0;W<$;W++)H[W]=~Z.g[W];return new l(H,~Z.h).add(T)}e.abs=function(){return M(this)?L(this):this},e.add=function(Z){const $=Math.max(this.g.length,Z.g.length),H=[];let W=0;for(let te=0;te<=$;te++){let Y=W+(this.i(te)&65535)+(Z.i(te)&65535),ne=(Y>>>16)+(this.i(te)>>>16)+(Z.i(te)>>>16);W=ne>>>16,Y&=65535,ne&=65535,H[te]=ne<<16|Y}return new l(H,H[H.length-1]&-2147483648?-1:0)};function B(Z,$){return Z.add(L($))}e.j=function(Z){if(P(this)||P(Z))return x;if(M(this))return M(Z)?L(this).j(L(Z)):L(L(this).j(Z));if(M(Z))return L(this.j(L(Z)));if(this.l(k)<0&&Z.l(k)<0)return p(this.m()*Z.m());const $=this.g.length+Z.g.length,H=[];for(var W=0;W<2*$;W++)H[W]=0;for(W=0;W<this.g.length;W++)for(let te=0;te<Z.g.length;te++){const Y=this.i(W)>>>16,ne=this.i(W)&65535,Se=Z.i(te)>>>16,Fe=Z.i(te)&65535;H[2*W+2*te]+=ne*Fe,F(H,2*W+2*te),H[2*W+2*te+1]+=Y*Fe,F(H,2*W+2*te+1),H[2*W+2*te+1]+=ne*Se,F(H,2*W+2*te+1),H[2*W+2*te+2]+=Y*Se,F(H,2*W+2*te+2)}for(Z=0;Z<$;Z++)H[Z]=H[2*Z+1]<<16|H[2*Z];for(Z=$;Z<2*$;Z++)H[Z]=0;return new l(H,0)};function F(Z,$){for(;(Z[$]&65535)!=Z[$];)Z[$+1]+=Z[$]>>>16,Z[$]&=65535,$++}function X(Z,$){this.g=Z,this.h=$}function J(Z,$){if(P($))throw Error("division by zero");if(P(Z))return new X(x,x);if(M(Z))return $=J(L(Z),$),new X(L($.g),L($.h));if(M($))return $=J(Z,L($)),new X(L($.g),$.h);if(Z.g.length>30){if(M(Z)||M($))throw Error("slowDivide_ only works with positive integers.");for(var H=T,W=$;W.l(Z)<=0;)H=Q(H),W=Q(W);var te=re(H,1),Y=re(W,1);for(W=re(W,2),H=re(H,2);!P(W);){var ne=Y.add(W);ne.l(Z)<=0&&(te=te.add(H),Y=ne),W=re(W,1),H=re(H,1)}return $=B(Z,te.j($)),new X(te,$)}for(te=x;Z.l($)>=0;){for(H=Math.max(1,Math.floor(Z.m()/$.m())),W=Math.ceil(Math.log(H)/Math.LN2),W=W<=48?1:Math.pow(2,W-48),Y=p(H),ne=Y.j($);M(ne)||ne.l(Z)>0;)H-=W,Y=p(H),ne=Y.j($);P(Y)&&(Y=T),te=te.add(Y),Z=B(Z,ne)}return new X(te,Z)}e.B=function(Z){return J(this,Z).h},e.and=function(Z){const $=Math.max(this.g.length,Z.g.length),H=[];for(let W=0;W<$;W++)H[W]=this.i(W)&Z.i(W);return new l(H,this.h&Z.h)},e.or=function(Z){const $=Math.max(this.g.length,Z.g.length),H=[];for(let W=0;W<$;W++)H[W]=this.i(W)|Z.i(W);return new l(H,this.h|Z.h)},e.xor=function(Z){const $=Math.max(this.g.length,Z.g.length),H=[];for(let W=0;W<$;W++)H[W]=this.i(W)^Z.i(W);return new l(H,this.h^Z.h)};function Q(Z){const $=Z.g.length+1,H=[];for(let W=0;W<$;W++)H[W]=Z.i(W)<<1|Z.i(W-1)>>>31;return new l(H,Z.h)}function re(Z,$){const H=$>>5;$%=32;const W=Z.g.length-H,te=[];for(let Y=0;Y<W;Y++)te[Y]=$>0?Z.i(Y+H)>>>$|Z.i(Y+H+1)<<32-$:Z.i(Y+H);return new l(te,Z.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,DU=i,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.B,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=p,l.fromString=v,Ff=l}).apply(typeof jB<"u"?jB:typeof self<"u"?self:typeof window<"u"?window:{});var Gx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var RU,My,LU,gw,Ck,OU,VU,BU;(function(){var e,t=Object.defineProperty;function n(A){A=[typeof globalThis=="object"&&globalThis,A,typeof window=="object"&&window,typeof self=="object"&&self,typeof Gx=="object"&&Gx];for(var ee=0;ee<A.length;++ee){var ue=A[ee];if(ue&&ue.Math==Math)return ue}throw Error("Cannot find global object")}var i=n(this);function r(A,ee){if(ee)e:{var ue=i;A=A.split(".");for(var Pe=0;Pe<A.length-1;Pe++){var bt=A[Pe];if(!(bt in ue))break e;ue=ue[bt]}A=A[A.length-1],Pe=ue[A],ee=ee(Pe),ee!=Pe&&ee!=null&&t(ue,A,{configurable:!0,writable:!0,value:ee})}}r("Symbol.dispose",function(A){return A||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(A){return A||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(A){return A||function(ee){var ue=[],Pe;for(Pe in ee)Object.prototype.hasOwnProperty.call(ee,Pe)&&ue.push([Pe,ee[Pe]]);return ue}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function h(A){var ee=typeof A;return ee=="object"&&A!=null||ee=="function"}function s(A,ee,ue){return A.call.apply(A.bind,arguments)}function p(A,ee,ue){return p=s,p.apply(null,arguments)}function v(A,ee){var ue=Array.prototype.slice.call(arguments,1);return function(){var Pe=ue.slice();return Pe.push.apply(Pe,arguments),A.apply(this,Pe)}}function x(A,ee){function ue(){}ue.prototype=ee.prototype,A.Z=ee.prototype,A.prototype=new ue,A.prototype.constructor=A,A.Ob=function(Pe,bt,Pt){for(var pn=Array(arguments.length-2),ui=2;ui<arguments.length;ui++)pn[ui-2]=arguments[ui];return ee.prototype[bt].apply(Pe,pn)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?A=>A&&AsyncContext.Snapshot.wrap(A):A=>A;function k(A){const ee=A.length;if(ee>0){const ue=Array(ee);for(let Pe=0;Pe<ee;Pe++)ue[Pe]=A[Pe];return ue}return[]}function P(A,ee){for(let Pe=1;Pe<arguments.length;Pe++){const bt=arguments[Pe];var ue=typeof bt;if(ue=ue!="object"?ue:bt?Array.isArray(bt)?"array":ue:"null",ue=="array"||ue=="object"&&typeof bt.length=="number"){ue=A.length||0;const Pt=bt.length||0;A.length=ue+Pt;for(let pn=0;pn<Pt;pn++)A[ue+pn]=bt[pn]}else A.push(bt)}}class M{constructor(ee,ue){this.i=ee,this.j=ue,this.h=0,this.g=null}get(){let ee;return this.h>0?(this.h--,ee=this.g,this.g=ee.next,ee.next=null):ee=this.i(),ee}}function L(A){l.setTimeout(()=>{throw A},0)}function B(){var A=Z;let ee=null;return A.g&&(ee=A.g,A.g=A.g.next,A.g||(A.h=null),ee.next=null),ee}class F{constructor(){this.h=this.g=null}add(ee,ue){const Pe=X.get();Pe.set(ee,ue),this.h?this.h.next=Pe:this.g=Pe,this.h=Pe}}var X=new M(()=>new J,A=>A.reset());class J{constructor(){this.next=this.g=this.h=null}set(ee,ue){this.h=ee,this.g=ue,this.next=null}reset(){this.next=this.g=this.h=null}}let Q,re=!1,Z=new F,$=()=>{const A=Promise.resolve(void 0);Q=()=>{A.then(H)}};function H(){for(var A;A=B();){try{A.h.call(A.g)}catch(ue){L(ue)}var ee=X;ee.j(A),ee.h<100&&(ee.h++,A.next=ee.g,ee.g=A)}re=!1}function W(){this.u=this.u,this.C=this.C}W.prototype.u=!1,W.prototype.dispose=function(){this.u||(this.u=!0,this.N())},W.prototype[Symbol.dispose]=function(){this.dispose()},W.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function te(A,ee){this.type=A,this.g=this.target=ee,this.defaultPrevented=!1}te.prototype.h=function(){this.defaultPrevented=!0};var Y=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var A=!1,ee=Object.defineProperty({},"passive",{get:function(){A=!0}});try{const ue=()=>{};l.addEventListener("test",ue,ee),l.removeEventListener("test",ue,ee)}catch{}return A})();function ne(A){return/^[\s\xa0]*$/.test(A)}function Se(A,ee){te.call(this,A?A.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,A&&this.init(A,ee)}x(Se,te),Se.prototype.init=function(A,ee){const ue=this.type=A.type,Pe=A.changedTouches&&A.changedTouches.length?A.changedTouches[0]:null;this.target=A.target||A.srcElement,this.g=ee,ee=A.relatedTarget,ee||(ue=="mouseover"?ee=A.fromElement:ue=="mouseout"&&(ee=A.toElement)),this.relatedTarget=ee,Pe?(this.clientX=Pe.clientX!==void 0?Pe.clientX:Pe.pageX,this.clientY=Pe.clientY!==void 0?Pe.clientY:Pe.pageY,this.screenX=Pe.screenX||0,this.screenY=Pe.screenY||0):(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0),this.button=A.button,this.key=A.key||"",this.ctrlKey=A.ctrlKey,this.altKey=A.altKey,this.shiftKey=A.shiftKey,this.metaKey=A.metaKey,this.pointerId=A.pointerId||0,this.pointerType=A.pointerType,this.state=A.state,this.i=A,A.defaultPrevented&&Se.Z.h.call(this)},Se.prototype.h=function(){Se.Z.h.call(this);const A=this.i;A.preventDefault?A.preventDefault():A.returnValue=!1};var Fe="closure_listenable_"+(Math.random()*1e6|0),Ve=0;function Ge(A,ee,ue,Pe,bt){this.listener=A,this.proxy=null,this.src=ee,this.type=ue,this.capture=!!Pe,this.ha=bt,this.key=++Ve,this.da=this.fa=!1}function je(A){A.da=!0,A.listener=null,A.proxy=null,A.src=null,A.ha=null}function Ae(A,ee,ue){for(const Pe in A)ee.call(ue,A[Pe],Pe,A)}function Ke(A,ee){for(const ue in A)ee.call(void 0,A[ue],ue,A)}function ve(A){const ee={};for(const ue in A)ee[ue]=A[ue];return ee}const Le="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function We(A,ee){let ue,Pe;for(let bt=1;bt<arguments.length;bt++){Pe=arguments[bt];for(ue in Pe)A[ue]=Pe[ue];for(let Pt=0;Pt<Le.length;Pt++)ue=Le[Pt],Object.prototype.hasOwnProperty.call(Pe,ue)&&(A[ue]=Pe[ue])}}function ct(A){this.src=A,this.g={},this.h=0}ct.prototype.add=function(A,ee,ue,Pe,bt){const Pt=A.toString();A=this.g[Pt],A||(A=this.g[Pt]=[],this.h++);const pn=rt(A,ee,Pe,bt);return pn>-1?(ee=A[pn],ue||(ee.fa=!1)):(ee=new Ge(ee,this.src,Pt,!!Pe,bt),ee.fa=ue,A.push(ee)),ee};function ut(A,ee){const ue=ee.type;if(ue in A.g){var Pe=A.g[ue],bt=Array.prototype.indexOf.call(Pe,ee,void 0),Pt;(Pt=bt>=0)&&Array.prototype.splice.call(Pe,bt,1),Pt&&(je(ee),A.g[ue].length==0&&(delete A.g[ue],A.h--))}}function rt(A,ee,ue,Pe){for(let bt=0;bt<A.length;++bt){const Pt=A[bt];if(!Pt.da&&Pt.listener==ee&&Pt.capture==!!ue&&Pt.ha==Pe)return bt}return-1}var Qe="closure_lm_"+(Math.random()*1e6|0),Ct={};function At(A,ee,ue,Pe,bt){if(Array.isArray(ee)){for(let Pt=0;Pt<ee.length;Pt++)At(A,ee[Pt],ue,Pe,bt);return null}return ue=Et(ue),A&&A[Fe]?A.J(ee,ue,h(Pe)?!!Pe.capture:!1,bt):yn(A,ee,ue,!1,Pe,bt)}function yn(A,ee,ue,Pe,bt,Pt){if(!ee)throw Error("Invalid event type");const pn=h(bt)?!!bt.capture:!!bt;let ui=dt(A);if(ui||(A[Qe]=ui=new ct(A)),ue=ui.add(ee,ue,Pe,pn,Pt),ue.proxy)return ue;if(Pe=Mn(),ue.proxy=Pe,Pe.src=A,Pe.listener=ue,A.addEventListener)Y||(bt=pn),bt===void 0&&(bt=!1),A.addEventListener(ee.toString(),Pe,bt);else if(A.attachEvent)A.attachEvent(Ee(ee.toString()),Pe);else if(A.addListener&&A.removeListener)A.addListener(Pe);else throw Error("addEventListener and attachEvent are unavailable.");return ue}function Mn(){function A(ue){return ee.call(A.src,A.listener,ue)}const ee=pt;return A}function Ce(A,ee,ue,Pe,bt){if(Array.isArray(ee))for(var Pt=0;Pt<ee.length;Pt++)Ce(A,ee[Pt],ue,Pe,bt);else Pe=h(Pe)?!!Pe.capture:!!Pe,ue=Et(ue),A&&A[Fe]?(A=A.i,Pt=String(ee).toString(),Pt in A.g&&(ee=A.g[Pt],ue=rt(ee,ue,Pe,bt),ue>-1&&(je(ee[ue]),Array.prototype.splice.call(ee,ue,1),ee.length==0&&(delete A.g[Pt],A.h--)))):A&&(A=dt(A))&&(ee=A.g[ee.toString()],A=-1,ee&&(A=rt(ee,ue,Pe,bt)),(ue=A>-1?ee[A]:null)&&ze(ue))}function ze(A){if(typeof A!="number"&&A&&!A.da){var ee=A.src;if(ee&&ee[Fe])ut(ee.i,A);else{var ue=A.type,Pe=A.proxy;ee.removeEventListener?ee.removeEventListener(ue,Pe,A.capture):ee.detachEvent?ee.detachEvent(Ee(ue),Pe):ee.addListener&&ee.removeListener&&ee.removeListener(Pe),(ue=dt(ee))?(ut(ue,A),ue.h==0&&(ue.src=null,ee[Qe]=null)):je(A)}}}function Ee(A){return A in Ct?Ct[A]:Ct[A]="on"+A}function pt(A,ee){if(A.da)A=!0;else{ee=new Se(ee,this);const ue=A.listener,Pe=A.ha||A.src;A.fa&&ze(A),A=ue.call(Pe,ee)}return A}function dt(A){return A=A[Qe],A instanceof ct?A:null}var nt="__closure_events_fn_"+(Math.random()*1e9>>>0);function Et(A){return typeof A=="function"?A:(A[nt]||(A[nt]=function(ee){return A.handleEvent(ee)}),A[nt])}function Dt(){W.call(this),this.i=new ct(this),this.M=this,this.G=null}x(Dt,W),Dt.prototype[Fe]=!0,Dt.prototype.removeEventListener=function(A,ee,ue,Pe){Ce(this,A,ee,ue,Pe)};function Ft(A,ee){var ue,Pe=A.G;if(Pe)for(ue=[];Pe;Pe=Pe.G)ue.push(Pe);if(A=A.M,Pe=ee.type||ee,typeof ee=="string")ee=new te(ee,A);else if(ee instanceof te)ee.target=ee.target||A;else{var bt=ee;ee=new te(Pe,A),We(ee,bt)}bt=!0;let Pt,pn;if(ue)for(pn=ue.length-1;pn>=0;pn--)Pt=ee.g=ue[pn],bt=Gt(Pt,Pe,!0,ee)&&bt;if(Pt=ee.g=A,bt=Gt(Pt,Pe,!0,ee)&&bt,bt=Gt(Pt,Pe,!1,ee)&&bt,ue)for(pn=0;pn<ue.length;pn++)Pt=ee.g=ue[pn],bt=Gt(Pt,Pe,!1,ee)&&bt}Dt.prototype.N=function(){if(Dt.Z.N.call(this),this.i){var A=this.i;for(const ee in A.g){const ue=A.g[ee];for(let Pe=0;Pe<ue.length;Pe++)je(ue[Pe]);delete A.g[ee],A.h--}}this.G=null},Dt.prototype.J=function(A,ee,ue,Pe){return this.i.add(String(A),ee,!1,ue,Pe)},Dt.prototype.K=function(A,ee,ue,Pe){return this.i.add(String(A),ee,!0,ue,Pe)};function Gt(A,ee,ue,Pe){if(ee=A.i.g[String(ee)],!ee)return!0;ee=ee.concat();let bt=!0;for(let Pt=0;Pt<ee.length;++Pt){const pn=ee[Pt];if(pn&&!pn.da&&pn.capture==ue){const ui=pn.listener,Pr=pn.ha||pn.src;pn.fa&&ut(A.i,pn),bt=ui.call(Pr,Pe)!==!1&&bt}}return bt&&!Pe.defaultPrevented}function En(A,ee){if(typeof A!="function")if(A&&typeof A.handleEvent=="function")A=p(A.handleEvent,A);else throw Error("Invalid listener argument");return Number(ee)>2147483647?-1:l.setTimeout(A,ee||0)}function en(A){A.g=En(()=>{A.g=null,A.i&&(A.i=!1,en(A))},A.l);const ee=A.h;A.h=null,A.m.apply(null,ee)}class An extends W{constructor(ee,ue){super(),this.m=ee,this.l=ue,this.h=null,this.i=!1,this.g=null}j(ee){this.h=arguments,this.g?this.i=!0:en(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ln(A){W.call(this),this.h=A,this.g={}}x(Ln,W);var Wn=[];function cn(A){Ae(A.g,function(ee,ue){this.g.hasOwnProperty(ue)&&ze(ee)},A),A.g={}}Ln.prototype.N=function(){Ln.Z.N.call(this),cn(this)},Ln.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var jt=l.JSON.stringify,Tn=l.JSON.parse,On=class{stringify(A){return l.JSON.stringify(A,void 0)}parse(A){return l.JSON.parse(A,void 0)}};function ki(){}function Yi(){}var Ur={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function bo(){te.call(this,"d")}x(bo,te);function nr(){te.call(this,"c")}x(nr,te);var yr={},No=null;function xo(){return No=No||new Dt}yr.Ia="serverreachability";function Vc(A){te.call(this,yr.Ia,A)}x(Vc,te);function Be(A){const ee=xo();Ft(ee,new Vc(ee))}yr.STAT_EVENT="statevent";function me(A,ee){te.call(this,yr.STAT_EVENT,A),this.stat=ee}x(me,te);function ge(A){const ee=xo();Ft(ee,new me(ee,A))}yr.Ja="timingevent";function Oe(A,ee){te.call(this,yr.Ja,A),this.size=ee}x(Oe,te);function Xe(A,ee){if(typeof A!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){A()},ee)}function tt(){this.g=!0}tt.prototype.ua=function(){this.g=!1};function gt(A,ee,ue,Pe,bt,Pt){A.info(function(){if(A.g)if(Pt){var pn="",ui=Pt.split("&");for(let Ti=0;Ti<ui.length;Ti++){var Pr=ui[Ti].split("=");if(Pr.length>1){const ir=Pr[0];Pr=Pr[1];const Yn=ir.split("_");pn=Yn.length>=2&&Yn[1]=="type"?pn+(ir+"="+Pr+"&"):pn+(ir+"=redacted&")}}}else pn=null;else pn=Pt;return"XMLHTTP REQ ("+Pe+") [attempt "+bt+"]: "+ee+`
`+ue+`
`+pn})}function ft(A,ee,ue,Pe,bt,Pt,pn){A.info(function(){return"XMLHTTP RESP ("+Pe+") [ attempt "+bt+"]: "+ee+`
`+ue+`
`+Pt+" "+pn})}function et(A,ee,ue,Pe){A.info(function(){return"XMLHTTP TEXT ("+ee+"): "+Zt(A,ue)+(Pe?" "+Pe:"")})}function wt(A,ee){A.info(function(){return"TIMEOUT: "+ee})}tt.prototype.info=function(){};function Zt(A,ee){if(!A.g)return ee;if(!ee)return null;try{const Pt=JSON.parse(ee);if(Pt){for(A=0;A<Pt.length;A++)if(Array.isArray(Pt[A])){var ue=Pt[A];if(!(ue.length<2)){var Pe=ue[1];if(Array.isArray(Pe)&&!(Pe.length<1)){var bt=Pe[0];if(bt!="noop"&&bt!="stop"&&bt!="close")for(let pn=1;pn<Pe.length;pn++)Pe[pn]=""}}}}return jt(Pt)}catch{return ee}}var on={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Yt={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},qn;function Zn(){}x(Zn,ki),Zn.prototype.g=function(){return new XMLHttpRequest},qn=new Zn;function Un(A){return encodeURIComponent(String(A))}function oi(A){var ee=1;A=A.split(":");const ue=[];for(;ee>0&&A.length;)ue.push(A.shift()),ee--;return A.length&&ue.push(A.join(":")),ue}function Kn(A,ee,ue,Pe){this.j=A,this.i=ee,this.l=ue,this.S=Pe||1,this.V=new Ln(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Pi}function Pi(){this.i=null,this.g="",this.h=!1}var hr={},es={};function br(A,ee,ue){A.M=1,A.A=ua(qi(ee)),A.u=ue,A.R=!0,Uo(A,null)}function Uo(A,ee){A.F=Date.now(),ws(A),A.B=qi(A.A);var ue=A.B,Pe=A.S;Array.isArray(Pe)||(Pe=[String(Pe)]),ol(ue.i,"t",Pe),A.C=0,ue=A.j.L,A.h=new Pi,A.g=_u(A.j,ue?ee:null,!A.u),A.P>0&&(A.O=new An(p(A.Y,A,A.g),A.P)),ee=A.V,ue=A.g,Pe=A.ba;var bt="readystatechange";Array.isArray(bt)||(bt&&(Wn[0]=bt.toString()),bt=Wn);for(let Pt=0;Pt<bt.length;Pt++){const pn=At(ue,bt[Pt],Pe||ee.handleEvent,!1,ee.h||ee);if(!pn)break;ee.g[pn.key]=pn}ee=A.J?ve(A.J):{},A.u?(A.v||(A.v="POST"),ee["Content-Type"]="application/x-www-form-urlencoded",A.g.ea(A.B,A.v,A.u,ee)):(A.v="GET",A.g.ea(A.B,A.v,null,ee)),Be(),gt(A.i,A.v,A.B,A.l,A.S,A.u)}Kn.prototype.ba=function(A){A=A.target;const ee=this.O;ee&&Ho(A)==3?ee.j():this.Y(A)},Kn.prototype.Y=function(A){try{if(A==this.g)e:{const ui=Ho(this.g),Pr=this.g.ya(),Ti=this.g.ca();if(!(ui<3)&&(ui!=3||this.g&&(this.h.h||this.g.la()||ko(this.g)))){this.K||ui!=4||Pr==7||(Pr==8||Ti<=0?Be(3):Be(2)),Hn(this);var ee=this.g.ca();this.X=ee;var ue=ts(this);if(this.o=ee==200,ft(this.i,this.v,this.B,this.l,this.S,ui,ee),this.o){if(this.U&&!this.L){t:{if(this.g){var Pe,bt=this.g;if((Pe=bt.g?bt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ne(Pe)){var Pt=Pe;break t}}Pt=null}if(A=Pt)et(this.i,this.l,A,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,$o(this,A);else{this.o=!1,this.m=3,ge(12),Ts(this),la(this);break e}}if(this.R){A=!0;let ir;for(;!this.K&&this.C<ue.length;)if(ir=$r(this,ue),ir==es){ui==4&&(this.m=4,ge(14),A=!1),et(this.i,this.l,null,"[Incomplete Response]");break}else if(ir==hr){this.m=4,ge(15),et(this.i,this.l,ue,"[Invalid Chunk]"),A=!1;break}else et(this.i,this.l,ir,null),$o(this,ir);if(Dr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ui!=4||ue.length!=0||this.h.h||(this.m=1,ge(16),A=!1),this.o=this.o&&A,!A)et(this.i,this.l,ue,"[Invalid Chunked Response]"),Ts(this),la(this);else if(ue.length>0&&!this.W){this.W=!0;var pn=this.j;pn.g==this&&pn.aa&&!pn.P&&(pn.j.info("Great, no buffering proxy detected. Bytes received: "+ue.length),dl(pn),pn.P=!0,ge(11))}}else et(this.i,this.l,ue,null),$o(this,ue);ui==4&&Ts(this),this.o&&!this.K&&(ui==4?pu(this.j,this):(this.o=!1,ws(this)))}else ha(this.g),ee==400&&ue.indexOf("Unknown SID")>0?(this.m=3,ge(12)):(this.m=0,ge(13)),Ts(this),la(this)}}}catch{}finally{}};function ts(A){if(!Dr(A))return A.g.la();const ee=ko(A.g);if(ee==="")return"";let ue="";const Pe=ee.length,bt=Ho(A.g)==4;if(!A.h.i){if(typeof TextDecoder>"u")return Ts(A),la(A),"";A.h.i=new l.TextDecoder}for(let Pt=0;Pt<Pe;Pt++)A.h.h=!0,ue+=A.h.i.decode(ee[Pt],{stream:!(bt&&Pt==Pe-1)});return ee.length=0,A.h.g+=ue,A.C=0,A.h.g}function Dr(A){return A.g?A.v=="GET"&&A.M!=2&&A.j.Aa:!1}function $r(A,ee){var ue=A.C,Pe=ee.indexOf(`
`,ue);return Pe==-1?es:(ue=Number(ee.substring(ue,Pe)),isNaN(ue)?hr:(Pe+=1,Pe+ue>ee.length?es:(ee=ee.slice(Pe,Pe+ue),A.C=Pe+ue,ee)))}Kn.prototype.cancel=function(){this.K=!0,Ts(this)};function ws(A){A.T=Date.now()+A.H,Vs(A,A.H)}function Vs(A,ee){if(A.D!=null)throw Error("WatchDog timer not null");A.D=Xe(p(A.aa,A),ee)}function Hn(A){A.D&&(l.clearTimeout(A.D),A.D=null)}Kn.prototype.aa=function(){this.D=null;const A=Date.now();A-this.T>=0?(wt(this.i,this.B),this.M!=2&&(Be(),ge(17)),Ts(this),this.m=2,la(this)):Vs(this,this.T-A)};function la(A){A.j.I==0||A.K||pu(A.j,A)}function Ts(A){Hn(A);var ee=A.O;ee&&typeof ee.dispose=="function"&&ee.dispose(),A.O=null,cn(A.V),A.g&&(ee=A.g,A.g=null,ee.abort(),ee.dispose())}function $o(A,ee){try{var ue=A.j;if(ue.I!=0&&(ue.g==A||cc(ue.h,A))){if(!A.L&&cc(ue.h,A)&&ue.I==3){try{var Pe=ue.Ba.g.parse(ee)}catch{Pe=null}if(Array.isArray(Pe)&&Pe.length==3){var bt=Pe;if(bt[0]==0){e:if(!ue.v){if(ue.g)if(ue.g.F+3e3<A.F)hl(ue),Go(ue);else break e;Ga(ue),ge(18)}}else ue.xa=bt[1],0<ue.xa-ue.K&&bt[2]<37500&&ue.F&&ue.A==0&&!ue.C&&(ue.C=Xe(p(ue.Va,ue),6e3));Wa(ue.h)<=1&&ue.ta&&(ue.ta=void 0)}else so(ue,11)}else if((A.L||ue.g==A)&&hl(ue),!ne(ee))for(bt=ue.Ba.g.parse(ee),ee=0;ee<bt.length;ee++){let Ti=bt[ee];const ir=Ti[0];if(!(ir<=ue.K))if(ue.K=ir,Ti=Ti[1],ue.I==2)if(Ti[0]=="c"){ue.M=Ti[1],ue.ba=Ti[2];const Yn=Ti[3];Yn!=null&&(ue.ka=Yn,ue.j.info("VER="+ue.ka));const qs=Ti[4];qs!=null&&(ue.za=qs,ue.j.info("SVER="+ue.za));const qa=Ti[5];qa!=null&&typeof qa=="number"&&qa>0&&(Pe=1.5*qa,ue.O=Pe,ue.j.info("backChannelRequestTimeoutMs_="+Pe)),Pe=ue;const ga=A.g;if(ga){const Uc=ga.g?ga.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Uc){var Pt=Pe.h;Pt.g||Uc.indexOf("spdy")==-1&&Uc.indexOf("quic")==-1&&Uc.indexOf("h2")==-1||(Pt.j=Pt.l,Pt.g=new Set,Pt.h&&(jo(Pt,Pt.h),Pt.h=null))}if(Pe.G){const Ka=ga.g?ga.g.getResponseHeader("X-HTTP-Session-Id"):null;Ka&&(Pe.wa=Ka,Ji(Pe.J,Pe.G,Ka))}}ue.I=3,ue.l&&ue.l.ra(),ue.aa&&(ue.T=Date.now()-A.F,ue.j.info("Handshake RTT: "+ue.T+"ms")),Pe=ue;var pn=A;if(Pe.na=zc(Pe,Pe.L?Pe.ba:null,Pe.W),pn.L){So(Pe.h,pn);var ui=pn,Pr=Pe.O;Pr&&(ui.H=Pr),ui.D&&(Hn(ui),ws(ui)),Pe.g=pn}else fc(Pe);ue.i.length>0&&Bl(ue)}else Ti[0]!="stop"&&Ti[0]!="close"||so(ue,7);else ue.I==3&&(Ti[0]=="stop"||Ti[0]=="close"?Ti[0]=="stop"?so(ue,7):Ha(ue):Ti[0]!="noop"&&ue.l&&ue.l.qa(Ti),ue.A=0)}}Be(4)}catch{}}var ja=class{constructor(A,ee){this.g=A,this.map=ee}};function wo(A){this.l=A||10,l.PerformanceNavigationTiming?(A=l.performance.getEntriesByType("navigation"),A=A.length>0&&(A[0].nextHopProtocol=="hq"||A[0].nextHopProtocol=="h2")):A=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=A?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function To(A){return A.h?!0:A.g?A.g.size>=A.j:!1}function Wa(A){return A.h?1:A.g?A.g.size:0}function cc(A,ee){return A.h?A.h==ee:A.g?A.g.has(ee):!1}function jo(A,ee){A.g?A.g.add(ee):A.h=ee}function So(A,ee){A.h&&A.h==ee?A.h=null:A.g&&A.g.has(ee)&&A.g.delete(ee)}wo.prototype.cancel=function(){if(this.i=Ll(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const A of this.g.values())A.cancel();this.g.clear()}};function Ll(A){if(A.h!=null)return A.i.concat(A.h.G);if(A.g!=null&&A.g.size!==0){let ee=A.i;for(const ue of A.g.values())ee=ee.concat(ue.G);return ee}return k(A.i)}var Mt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ca(A,ee){if(A){A=A.split("&");for(let ue=0;ue<A.length;ue++){const Pe=A[ue].indexOf("=");let bt,Pt=null;Pe>=0?(bt=A[ue].substring(0,Pe),Pt=A[ue].substring(Pe+1)):bt=A[ue],ee(bt,Pt?decodeURIComponent(Pt.replace(/\+/g," ")):"")}}}function Fi(A){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let ee;A instanceof Fi?(this.l=A.l,Ol(this,A.j),this.o=A.o,this.g=A.g,Bs(this,A.u),this.h=A.h,uc(this,Vl(A.i)),this.m=A.m):A&&(ee=String(A).match(Mt))?(this.l=!1,Ol(this,ee[1]||"",!0),this.o=ln(ee[2]||""),this.g=ln(ee[3]||"",!0),Bs(this,ee[4]),this.h=ln(ee[5]||"",!0),uc(this,ee[6]||"",!0),this.m=ln(ee[7]||"")):(this.l=!1,this.i=new Gs(null,this.l))}Fi.prototype.toString=function(){const A=[];var ee=this.j;ee&&A.push(Fn(ee,fr,!0),":");var ue=this.g;return(ue||ee=="file")&&(A.push("//"),(ee=this.o)&&A.push(Fn(ee,fr,!0),"@"),A.push(Un(ue).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),ue=this.u,ue!=null&&A.push(":",String(ue))),(ue=this.h)&&(this.g&&ue.charAt(0)!="/"&&A.push("/"),A.push(Fn(ue,ue.charAt(0)=="/"?ni:ro,!0))),(ue=this.i.toString())&&A.push("?",ue),(ue=this.m)&&A.push("#",Fn(ue,Wo)),A.join("")},Fi.prototype.resolve=function(A){const ee=qi(this);let ue=!!A.j;ue?Ol(ee,A.j):ue=!!A.o,ue?ee.o=A.o:ue=!!A.g,ue?ee.g=A.g:ue=A.u!=null;var Pe=A.h;if(ue)Bs(ee,A.u);else if(ue=!!A.h){if(Pe.charAt(0)!="/")if(this.g&&!this.h)Pe="/"+Pe;else{var bt=ee.h.lastIndexOf("/");bt!=-1&&(Pe=ee.h.slice(0,bt+1)+Pe)}if(bt=Pe,bt==".."||bt==".")Pe="";else if(bt.indexOf("./")!=-1||bt.indexOf("/.")!=-1){Pe=bt.lastIndexOf("/",0)==0,bt=bt.split("/");const Pt=[];for(let pn=0;pn<bt.length;){const ui=bt[pn++];ui=="."?Pe&&pn==bt.length&&Pt.push(""):ui==".."?((Pt.length>1||Pt.length==1&&Pt[0]!="")&&Pt.pop(),Pe&&pn==bt.length&&Pt.push("")):(Pt.push(ui),Pe=!0)}Pe=Pt.join("/")}else Pe=bt}return ue?ee.h=Pe:ue=A.i.toString()!=="",ue?uc(ee,Vl(A.i)):ue=!!A.m,ue&&(ee.m=A.m),ee};function qi(A){return new Fi(A)}function Ol(A,ee,ue){A.j=ue?ln(ee,!0):ee,A.j&&(A.j=A.j.replace(/:$/,""))}function Bs(A,ee){if(ee){if(ee=Number(ee),isNaN(ee)||ee<0)throw Error("Bad port number "+ee);A.u=ee}else A.u=null}function uc(A,ee,ue){ee instanceof Gs?(A.i=ee,Rh(A.i,A.l)):(ue||(ee=Fn(ee,Ar)),A.i=new Gs(ee,A.l))}function Ji(A,ee,ue){A.i.set(ee,ue)}function ua(A){return Ji(A,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),A}function ln(A,ee){return A?ee?decodeURI(A.replace(/%25/g,"%2525")):decodeURIComponent(A):""}function Fn(A,ee,ue){return typeof A=="string"?(A=encodeURI(A).replace(ee,Xn),ue&&(A=A.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),A):null}function Xn(A){return A=A.charCodeAt(0),"%"+(A>>4&15).toString(16)+(A&15).toString(16)}var fr=/[#\/\?@]/g,ro=/[#\?:]/g,ni=/[#\?]/g,Ar=/[#\?@]/g,Wo=/#/g;function Gs(A,ee){this.h=this.g=null,this.i=A||null,this.j=!!ee}function Cr(A){A.g||(A.g=new Map,A.h=0,A.i&&ca(A.i,function(ee,ue){A.add(decodeURIComponent(ee.replace(/\+/g," ")),ue)}))}e=Gs.prototype,e.add=function(A,ee){Cr(this),this.i=null,A=Ss(this,A);let ue=this.g.get(A);return ue||this.g.set(A,ue=[]),ue.push(ee),this.h+=1,this};function zi(A,ee){Cr(A),ee=Ss(A,ee),A.g.has(ee)&&(A.i=null,A.h-=A.g.get(ee).length,A.g.delete(ee))}function fu(A,ee){return Cr(A),ee=Ss(A,ee),A.g.has(ee)}e.forEach=function(A,ee){Cr(this),this.g.forEach(function(ue,Pe){ue.forEach(function(bt){A.call(ee,bt,Pe,this)},this)},this)};function Fs(A,ee){Cr(A);let ue=[];if(typeof ee=="string")fu(A,ee)&&(ue=ue.concat(A.g.get(Ss(A,ee))));else for(A=Array.from(A.g.values()),ee=0;ee<A.length;ee++)ue=ue.concat(A[ee]);return ue}e.set=function(A,ee){return Cr(this),this.i=null,A=Ss(this,A),fu(this,A)&&(this.h-=this.g.get(A).length),this.g.set(A,[ee]),this.h+=1,this},e.get=function(A,ee){return A?(A=Fs(this,A),A.length>0?String(A[0]):ee):ee};function ol(A,ee,ue){zi(A,ee),ue.length>0&&(A.i=null,A.g.set(Ss(A,ee),k(ue)),A.h+=ue.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const A=[],ee=Array.from(this.g.keys());for(let Pe=0;Pe<ee.length;Pe++){var ue=ee[Pe];const bt=Un(ue);ue=Fs(this,ue);for(let Pt=0;Pt<ue.length;Pt++){let pn=bt;ue[Pt]!==""&&(pn+="="+Un(ue[Pt])),A.push(pn)}}return this.i=A.join("&")};function Vl(A){const ee=new Gs;return ee.i=A.i,A.g&&(ee.g=new Map(A.g),ee.h=A.h),ee}function Ss(A,ee){return ee=String(ee),A.j&&(ee=ee.toLowerCase()),ee}function Rh(A,ee){ee&&!A.j&&(Cr(A),A.i=null,A.g.forEach(function(ue,Pe){const bt=Pe.toLowerCase();Pe!=bt&&(zi(this,Pe),ol(this,bt,ue))},A)),A.j=ee}function Eo(A,ee){const ue=new tt;if(l.Image){const Pe=new Image;Pe.onload=v(Co,ue,"TestLoadImage: loaded",!0,ee,Pe),Pe.onerror=v(Co,ue,"TestLoadImage: error",!1,ee,Pe),Pe.onabort=v(Co,ue,"TestLoadImage: abort",!1,ee,Pe),Pe.ontimeout=v(Co,ue,"TestLoadImage: timeout",!1,ee,Pe),l.setTimeout(function(){Pe.ontimeout&&Pe.ontimeout()},1e4),Pe.src=A}else ee(!1)}function al(A,ee){const ue=new tt,Pe=new AbortController,bt=setTimeout(()=>{Pe.abort(),Co(ue,"TestPingServer: timeout",!1,ee)},1e4);fetch(A,{signal:Pe.signal}).then(Pt=>{clearTimeout(bt),Pt.ok?Co(ue,"TestPingServer: ok",!0,ee):Co(ue,"TestPingServer: server error",!1,ee)}).catch(()=>{clearTimeout(bt),Co(ue,"TestPingServer: error",!1,ee)})}function Co(A,ee,ue,Pe,bt){try{bt&&(bt.onload=null,bt.onerror=null,bt.onabort=null,bt.ontimeout=null),Pe(ue)}catch{}}function da(){this.g=new On}function ns(A){this.i=A.Sb||null,this.h=A.ab||!1}x(ns,ki),ns.prototype.g=function(){return new Ni(this.i,this.h)};function Ni(A,ee){Dt.call(this),this.H=A,this.o=ee,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}x(Ni,Dt),e=Ni.prototype,e.open=function(A,ee){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=A,this.D=ee,this.readyState=1,qr(this)},e.send=function(A){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const ee={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};A&&(ee.body=A),(this.H||l).fetch(new Request(this.D,ee)).then(this.Pa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ll(this)),this.readyState=0},e.Pa=function(A){if(this.g&&(this.l=A,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=A.headers,this.readyState=2,qr(this)),this.g&&(this.readyState=3,qr(this),this.g)))if(this.responseType==="arraybuffer")A.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in A){if(this.j=A.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Bc(this)}else A.text().then(this.Oa.bind(this),this.ga.bind(this))};function Bc(A){A.j.read().then(A.Ma.bind(A)).catch(A.ga.bind(A))}e.Ma=function(A){if(this.g){if(this.o&&A.value)this.response.push(A.value);else if(!this.o){var ee=A.value?A.value:new Uint8Array(0);(ee=this.B.decode(ee,{stream:!A.done}))&&(this.response=this.responseText+=ee)}A.done?ll(this):qr(this),this.readyState==3&&Bc(this)}},e.Oa=function(A){this.g&&(this.response=this.responseText=A,ll(this))},e.Na=function(A){this.g&&(this.response=A,ll(this))},e.ga=function(){this.g&&ll(this)};function ll(A){A.readyState=4,A.l=null,A.j=null,A.B=null,qr(A)}e.setRequestHeader=function(A,ee){this.A.append(A,ee)},e.getResponseHeader=function(A){return this.h&&this.h.get(A.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const A=[],ee=this.h.entries();for(var ue=ee.next();!ue.done;)ue=ue.value,A.push(ue[0]+": "+ue[1]),ue=ee.next();return A.join(`\r
`)};function qr(A){A.onreadystatechange&&A.onreadystatechange.call(A)}Object.defineProperty(Ni.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(A){this.m=A?"include":"same-origin"}});function is(A){let ee="";return Ae(A,function(ue,Pe){ee+=Pe,ee+=":",ee+=ue,ee+=`\r
`}),ee}function mu(A,ee,ue){e:{for(Pe in ue){var Pe=!1;break e}Pe=!0}Pe||(ue=is(ue),typeof A=="string"?ue!=null&&Un(ue):Ji(A,ee,ue))}function Qi(A){Dt.call(this),this.headers=new Map,this.L=A||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}x(Qi,Dt);var mr=/^https?$/i,cl=["POST","PUT"];e=Qi.prototype,e.Fa=function(A){this.H=A},e.ea=function(A,ee,ue,Pe){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+A);ee=ee?ee.toUpperCase():"GET",this.D=A,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():qn.g(),this.g.onreadystatechange=T(p(this.Ca,this));try{this.B=!0,this.g.open(ee,String(A),!0),this.B=!1}catch(Pt){dc(this,Pt);return}if(A=ue||"",ue=new Map(this.headers),Pe)if(Object.getPrototypeOf(Pe)===Object.prototype)for(var bt in Pe)ue.set(bt,Pe[bt]);else if(typeof Pe.keys=="function"&&typeof Pe.get=="function")for(const Pt of Pe.keys())ue.set(Pt,Pe.get(Pt));else throw Error("Unknown input type for opt_headers: "+String(Pe));Pe=Array.from(ue.keys()).find(Pt=>Pt.toLowerCase()=="content-type"),bt=l.FormData&&A instanceof l.FormData,!(Array.prototype.indexOf.call(cl,ee,void 0)>=0)||Pe||bt||ue.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Pt,pn]of ue)this.g.setRequestHeader(Pt,pn);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(A),this.v=!1}catch(Pt){dc(this,Pt)}};function dc(A,ee){A.h=!1,A.g&&(A.j=!0,A.g.abort(),A.j=!1),A.l=ee,A.o=5,ul(A),hc(A)}function ul(A){A.A||(A.A=!0,Ft(A,"complete"),Ft(A,"error"))}e.abort=function(A){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=A||7,Ft(this,"complete"),Ft(this,"abort"),hc(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),hc(this,!0)),Qi.Z.N.call(this)},e.Ca=function(){this.u||(this.B||this.v||this.j?Rr(this):this.Xa())},e.Xa=function(){Rr(this)};function Rr(A){if(A.h&&typeof a<"u"){if(A.v&&Ho(A)==4)setTimeout(A.Ca.bind(A),0);else if(Ft(A,"readystatechange"),Ho(A)==4){A.h=!1;try{const Pt=A.ca();e:switch(Pt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var ee=!0;break e;default:ee=!1}var ue;if(!(ue=ee)){var Pe;if(Pe=Pt===0){let pn=String(A.D).match(Mt)[1]||null;!pn&&l.self&&l.self.location&&(pn=l.self.location.protocol.slice(0,-1)),Pe=!mr.test(pn?pn.toLowerCase():"")}ue=Pe}if(ue)Ft(A,"complete"),Ft(A,"success");else{A.o=6;try{var bt=Ho(A)>2?A.g.statusText:""}catch{bt=""}A.l=bt+" ["+A.ca()+"]",ul(A)}}finally{hc(A)}}}}function hc(A,ee){if(A.g){A.m&&(clearTimeout(A.m),A.m=null);const ue=A.g;A.g=null,ee||Ft(A,"ready");try{ue.onreadystatechange=null}catch{}}}e.isActive=function(){return!!this.g};function Ho(A){return A.g?A.g.readyState:0}e.ca=function(){try{return Ho(this)>2?this.g.status:-1}catch{return-1}},e.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.La=function(A){if(this.g){var ee=this.g.responseText;return A&&ee.indexOf(A)==0&&(ee=ee.substring(A.length)),Tn(ee)}};function ko(A){try{if(!A.g)return null;if("response"in A.g)return A.g.response;switch(A.F){case"":case"text":return A.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in A.g)return A.g.mozResponseArrayBuffer}return null}catch{return null}}function ha(A){const ee={};A=(A.g&&Ho(A)>=2&&A.g.getAllResponseHeaders()||"").split(`\r
`);for(let Pe=0;Pe<A.length;Pe++){if(ne(A[Pe]))continue;var ue=oi(A[Pe]);const bt=ue[0];if(ue=ue[1],typeof ue!="string")continue;ue=ue.trim();const Pt=ee[bt]||[];ee[bt]=Pt,Pt.push(ue)}Ke(ee,function(Pe){return Pe.join(", ")})}e.ya=function(){return this.o},e.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function fa(A,ee,ue){return ue&&ue.internalChannelParams&&ue.internalChannelParams[A]||ee}function dd(A){this.za=0,this.i=[],this.j=new tt,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=fa("failFast",!1,A),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=fa("baseRetryDelayMs",5e3,A),this.Za=fa("retryDelaySeedMs",1e4,A),this.Ta=fa("forwardChannelMaxRetries",2,A),this.va=fa("forwardChannelRequestTimeoutMs",2e4,A),this.ma=A&&A.xmlHttpFactory||void 0,this.Ua=A&&A.Rb||void 0,this.Aa=A&&A.useFetchStreams||!1,this.O=void 0,this.L=A&&A.supportsCrossDomainXhr||!1,this.M="",this.h=new wo(A&&A.concurrentRequestLimit),this.Ba=new da,this.S=A&&A.fastHandshake||!1,this.R=A&&A.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=A&&A.Pb||!1,A&&A.ua&&this.j.ua(),A&&A.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&A&&A.detectBufferingProxy||!1,this.ia=void 0,A&&A.longPollingTimeout&&A.longPollingTimeout>0&&(this.ia=A.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}e=dd.prototype,e.ka=8,e.I=1,e.connect=function(A,ee,ue,Pe){ge(0),this.W=A,this.H=ee||{},ue&&Pe!==void 0&&(this.H.OSID=ue,this.H.OAID=Pe),this.F=this.X,this.J=zc(this,null,this.W),Bl(this)};function Ha(A){if(Io(A),A.I==3){var ee=A.V++,ue=qi(A.J);if(Ji(ue,"SID",A.M),Ji(ue,"RID",ee),Ji(ue,"TYPE","terminate"),pa(A,ue),ee=new Kn(A,A.j,ee),ee.M=2,ee.A=ua(qi(ue)),ue=!1,l.navigator&&l.navigator.sendBeacon)try{ue=l.navigator.sendBeacon(ee.A.toString(),"")}catch{}!ue&&l.Image&&(new Image().src=ee.A,ue=!0),ue||(ee.g=_u(ee.j,null),ee.g.ea(ee.A)),ee.F=Date.now(),ws(ee)}wi(A)}function Go(A){A.g&&(dl(A),A.g.cancel(),A.g=null)}function Io(A){Go(A),A.v&&(l.clearTimeout(A.v),A.v=null),hl(A),A.h.cancel(),A.m&&(typeof A.m=="number"&&l.clearTimeout(A.m),A.m=null)}function Bl(A){if(!To(A.h)&&!A.m){A.m=!0;var ee=A.Ea;Q||$(),re||(Q(),re=!0),Z.add(ee,A),A.D=0}}function Ao(A,ee){return Wa(A.h)>=A.h.j-(A.m?1:0)?!1:A.m?(A.i=ee.G.concat(A.i),!0):A.I==1||A.I==2||A.D>=(A.Sa?0:A.Ta)?!1:(A.m=Xe(p(A.Ea,A,ee),gu(A,A.D)),A.D++,!0)}e.Ea=function(A){if(this.m)if(this.m=null,this.I==1){if(!A){this.V=Math.floor(Math.random()*1e5),A=this.V++;const bt=new Kn(this,this.j,A);let Pt=this.o;if(this.U&&(Pt?(Pt=ve(Pt),We(Pt,this.U)):Pt=this.U),this.u!==null||this.R||(bt.J=Pt,Pt=null),this.S)e:{for(var ee=0,ue=0;ue<this.i.length;ue++){t:{var Pe=this.i[ue];if("__data__"in Pe.map&&(Pe=Pe.map.__data__,typeof Pe=="string")){Pe=Pe.length;break t}Pe=void 0}if(Pe===void 0)break;if(ee+=Pe,ee>4096){ee=ue;break e}if(ee===4096||ue===this.i.length-1){ee=ue+1;break e}}ee=1e3}else ee=1e3;ee=qo(this,bt,ee),ue=qi(this.J),Ji(ue,"RID",A),Ji(ue,"CVER",22),this.G&&Ji(ue,"X-HTTP-Session-Id",this.G),pa(this,ue),Pt&&(this.R?ee="headers="+Un(is(Pt))+"&"+ee:this.u&&mu(ue,this.u,Pt)),jo(this.h,bt),this.Ra&&Ji(ue,"TYPE","init"),this.S?(Ji(ue,"$req",ee),Ji(ue,"SID","null"),bt.U=!0,br(bt,ue,null)):br(bt,ue,ee),this.I=2}}else this.I==3&&(A?ma(this,A):this.i.length==0||To(this.h)||ma(this))};function ma(A,ee){var ue;ee?ue=ee.l:ue=A.V++;const Pe=qi(A.J);Ji(Pe,"SID",A.M),Ji(Pe,"RID",ue),Ji(Pe,"AID",A.K),pa(A,Pe),A.u&&A.o&&mu(Pe,A.u,A.o),ue=new Kn(A,A.j,ue,A.D+1),A.u===null&&(ue.J=A.o),ee&&(A.i=ee.G.concat(A.i)),ee=qo(A,ue,1e3),ue.H=Math.round(A.va*.5)+Math.round(A.va*.5*Math.random()),jo(A.h,ue),br(ue,Pe,ee)}function pa(A,ee){A.H&&Ae(A.H,function(ue,Pe){Ji(ee,Pe,ue)}),A.l&&Ae({},function(ue,Pe){Ji(ee,Pe,ue)})}function qo(A,ee,ue){ue=Math.min(A.i.length,ue);const Pe=A.l?p(A.l.Ka,A.l,A):null;e:{var bt=A.i;let ui=-1;for(;;){const Pr=["count="+ue];ui==-1?ue>0?(ui=bt[0].g,Pr.push("ofs="+ui)):ui=0:Pr.push("ofs="+ui);let Ti=!0;for(let ir=0;ir<ue;ir++){var Pt=bt[ir].g;const Yn=bt[ir].map;if(Pt-=ui,Pt<0)ui=Math.max(0,bt[ir].g-100),Ti=!1;else try{Pt="req"+Pt+"_"||"";try{var pn=Yn instanceof Map?Yn:Object.entries(Yn);for(const[qs,qa]of pn){let ga=qa;h(qa)&&(ga=jt(qa)),Pr.push(Pt+qs+"="+encodeURIComponent(ga))}}catch(qs){throw Pr.push(Pt+"type="+encodeURIComponent("_badmap")),qs}}catch{Pe&&Pe(Yn)}}if(Ti){pn=Pr.join("&");break e}}pn=void 0}return A=A.i.splice(0,ue),ee.G=A,pn}function fc(A){if(!A.g&&!A.v){A.Y=1;var ee=A.Da;Q||$(),re||(Q(),re=!0),Z.add(ee,A),A.A=0}}function Ga(A){return A.g||A.v||A.A>=3?!1:(A.Y++,A.v=Xe(p(A.Da,A),gu(A,A.A)),A.A++,!0)}e.Da=function(){if(this.v=null,Fc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var A=4*this.T;this.j.info("BP detection timer enabled: "+A),this.B=Xe(p(this.Wa,this),A)}},e.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ge(10),Go(this),Fc(this))};function dl(A){A.B!=null&&(l.clearTimeout(A.B),A.B=null)}function Fc(A){A.g=new Kn(A,A.j,"rpc",A.Y),A.u===null&&(A.g.J=A.o),A.g.P=0;var ee=qi(A.na);Ji(ee,"RID","rpc"),Ji(ee,"SID",A.M),Ji(ee,"AID",A.K),Ji(ee,"CI",A.F?"0":"1"),!A.F&&A.ia&&Ji(ee,"TO",A.ia),Ji(ee,"TYPE","xmlhttp"),pa(A,ee),A.u&&A.o&&mu(ee,A.u,A.o),A.O&&(A.g.H=A.O);var ue=A.g;A=A.ba,ue.M=1,ue.A=ua(qi(ee)),ue.u=null,ue.R=!0,Uo(ue,A)}e.Va=function(){this.C!=null&&(this.C=null,Go(this),Ga(this),ge(19))};function hl(A){A.C!=null&&(l.clearTimeout(A.C),A.C=null)}function pu(A,ee){var ue=null;if(A.g==ee){hl(A),dl(A),A.g=null;var Pe=2}else if(cc(A.h,ee))ue=ee.G,So(A.h,ee),Pe=1;else return;if(A.I!=0){if(ee.o)if(Pe==1){ue=ee.u?ee.u.length:0,ee=Date.now()-ee.F;var bt=A.D;Pe=xo(),Ft(Pe,new Oe(Pe,ue)),Bl(A)}else fc(A);else if(bt=ee.m,bt==3||bt==0&&ee.X>0||!(Pe==1&&Ao(A,ee)||Pe==2&&Ga(A)))switch(ue&&ue.length>0&&(ee=A.h,ee.i=ee.i.concat(ue)),bt){case 1:so(A,5);break;case 4:so(A,10);break;case 3:so(A,6);break;default:so(A,2)}}}function gu(A,ee){let ue=A.Qa+Math.floor(Math.random()*A.Za);return A.isActive()||(ue*=2),ue*ee}function so(A,ee){if(A.j.info("Error code "+ee),ee==2){var ue=p(A.bb,A),Pe=A.Ua;const bt=!Pe;Pe=new Fi(Pe||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Ol(Pe,"https"),ua(Pe),bt?Eo(Pe.toString(),ue):al(Pe.toString(),ue)}else ge(2);A.I=0,A.l&&A.l.pa(ee),wi(A),Io(A)}e.bb=function(A){A?(this.j.info("Successfully pinged google.com"),ge(2)):(this.j.info("Failed to ping google.com"),ge(1))};function wi(A){if(A.I=0,A.ja=[],A.l){const ee=Ll(A.h);(ee.length!=0||A.i.length!=0)&&(P(A.ja,ee),P(A.ja,A.i),A.h.i.length=0,k(A.i),A.i.length=0),A.l.oa()}}function zc(A,ee,ue){var Pe=ue instanceof Fi?qi(ue):new Fi(ue);if(Pe.g!="")ee&&(Pe.g=ee+"."+Pe.g),Bs(Pe,Pe.u);else{var bt=l.location;Pe=bt.protocol,ee=ee?ee+"."+bt.hostname:bt.hostname,bt=+bt.port;const Pt=new Fi(null);Pe&&Ol(Pt,Pe),ee&&(Pt.g=ee),bt&&Bs(Pt,bt),ue&&(Pt.h=ue),Pe=Pt}return ue=A.G,ee=A.wa,ue&&ee&&Ji(Pe,ue,ee),Ji(Pe,"VER",A.ka),pa(A,Pe),Pe}function _u(A,ee,ue){if(ee&&!A.L)throw Error("Can't create secondary domain capable XhrIo object.");return ee=A.Aa&&!A.ma?new Qi(new ns({ab:ue})):new Qi(A.ma),ee.Fa(A.L),ee}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function hd(){}e=hd.prototype,e.ra=function(){},e.qa=function(){},e.pa=function(){},e.oa=function(){},e.isActive=function(){return!0},e.Ka=function(){};function fl(){}fl.prototype.g=function(A,ee){return new zs(A,ee)};function zs(A,ee){Dt.call(this),this.g=new dd(ee),this.l=A,this.h=ee&&ee.messageUrlParams||null,A=ee&&ee.messageHeaders||null,ee&&ee.clientProtocolHeaderRequired&&(A?A["X-Client-Protocol"]="webchannel":A={"X-Client-Protocol":"webchannel"}),this.g.o=A,A=ee&&ee.initMessageHeaders||null,ee&&ee.messageContentType&&(A?A["X-WebChannel-Content-Type"]=ee.messageContentType:A={"X-WebChannel-Content-Type":ee.messageContentType}),ee&&ee.sa&&(A?A["X-WebChannel-Client-Profile"]=ee.sa:A={"X-WebChannel-Client-Profile":ee.sa}),this.g.U=A,(A=ee&&ee.Qb)&&!ne(A)&&(this.g.u=A),this.A=ee&&ee.supportsCrossDomainXhr||!1,this.v=ee&&ee.sendRawJson||!1,(ee=ee&&ee.httpSessionIdParam)&&!ne(ee)&&(this.g.G=ee,A=this.h,A!==null&&ee in A&&(A=this.h,ee in A&&delete A[ee])),this.j=new Ko(this)}x(zs,Dt),zs.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},zs.prototype.close=function(){Ha(this.g)},zs.prototype.o=function(A){var ee=this.g;if(typeof A=="string"){var ue={};ue.__data__=A,A=ue}else this.v&&(ue={},ue.__data__=jt(A),A=ue);ee.i.push(new ja(ee.Ya++,A)),ee.I==3&&Bl(ee)},zs.prototype.N=function(){this.g.l=null,delete this.j,Ha(this.g),delete this.g,zs.Z.N.call(this)};function Nc(A){bo.call(this),A.__headers__&&(this.headers=A.__headers__,this.statusCode=A.__status__,delete A.__headers__,delete A.__status__);var ee=A.__sm__;if(ee){e:{for(const ue in ee){A=ue;break e}A=void 0}(this.i=A)&&(A=this.i,ee=ee!==null&&A in ee?ee[A]:void 0),this.data=ee}else this.data=A}x(Nc,bo);function oo(){nr.call(this),this.status=1}x(oo,nr);function Ko(A){this.g=A}x(Ko,hd),Ko.prototype.ra=function(){Ft(this.g,"a")},Ko.prototype.qa=function(A){Ft(this.g,new Nc(A))},Ko.prototype.pa=function(A){Ft(this.g,new oo)},Ko.prototype.oa=function(){Ft(this.g,"b")},fl.prototype.createWebChannel=fl.prototype.g,zs.prototype.send=zs.prototype.o,zs.prototype.open=zs.prototype.m,zs.prototype.close=zs.prototype.close,BU=function(){return new fl},VU=function(){return xo()},OU=yr,Ck={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},on.NO_ERROR=0,on.TIMEOUT=8,on.HTTP_ERROR=6,gw=on,Yt.COMPLETE="complete",LU=Yt,Yi.EventType=Ur,Ur.OPEN="a",Ur.CLOSE="b",Ur.ERROR="c",Ur.MESSAGE="d",Dt.prototype.listen=Dt.prototype.J,My=Yi,Qi.prototype.listenOnce=Qi.prototype.K,Qi.prototype.getLastError=Qi.prototype.Ha,Qi.prototype.getLastErrorCode=Qi.prototype.ya,Qi.prototype.getStatus=Qi.prototype.ca,Qi.prototype.getResponseJson=Qi.prototype.La,Qi.prototype.getResponseText=Qi.prototype.la,Qi.prototype.send=Qi.prototype.ea,Qi.prototype.setWithCredentials=Qi.prototype.Fa,RU=Qi}).apply(typeof Gx<"u"?Gx:typeof self<"u"?self:typeof window<"u"?window:{});const WB="@firebase/firestore",HB="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}ka.UNAUTHENTICATED=new ka(null),ka.GOOGLE_CREDENTIALS=new ka("google-credentials-uid"),ka.FIRST_PARTY=new ka("first-party-uid"),ka.MOCK_USER=new ka("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fv="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $p=new YA("@firebase/firestore");function a_(){return $p.logLevel}function Rn(e,...t){if($p.logLevel<=Li.DEBUG){const n=t.map(lP);$p.debug(`Firestore (${fv}): ${e}`,...n)}}function bh(e,...t){if($p.logLevel<=Li.ERROR){const n=t.map(lP);$p.error(`Firestore (${fv}): ${e}`,...n)}}function X_(e,...t){if($p.logLevel<=Li.WARN){const n=t.map(lP);$p.warn(`Firestore (${fv}): ${e}`,...n)}}function lP(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hi(e,t,n){let i="Unexpected state";typeof t=="string"?i=t:n=t,FU(e,i,n)}function FU(e,t,n){let i=`FIRESTORE (${fv}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw bh(i),new Error(i)}function Er(e,t,n,i){let r="Unexpected state";typeof n=="string"?r=n:i=n,e||FU(t,r,i)}function bi(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const un={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class $n extends Ph{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{constructor(){this.promise=new Promise(((t,n)=>{this.resolve=t,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zU{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class uue{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable((()=>n(ka.UNAUTHENTICATED)))}shutdown(){}}class due{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class hue{constructor(t){this.t=t,this.currentUser=ka.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){Er(this.o===void 0,42304);let i=this.i;const r=s=>this.i!==i?(i=this.i,n(s)):Promise.resolve();let a=new zf;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new zf,t.enqueueRetryable((()=>r(this.currentUser)))};const l=()=>{const s=a;t.enqueueRetryable((async()=>{await s.promise,await r(this.currentUser)}))},h=s=>{Rn("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=s,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((s=>h(s))),setTimeout((()=>{if(!this.auth){const s=this.t.getImmediate({optional:!0});s?h(s):(Rn("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new zf)}}),0),l()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((i=>this.i!==t?(Rn("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Er(typeof i.accessToken=="string",31837,{l:i}),new zU(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Er(t===null||typeof t=="string",2055,{h:t}),new ka(t)}}class fue{constructor(t,n,i){this.P=t,this.T=n,this.I=i,this.type="FirstParty",this.user=ka.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class mue{constructor(t,n,i){this.P=t,this.T=n,this.I=i}getToken(){return Promise.resolve(new fue(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable((()=>n(ka.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class GB{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class pue{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,kc(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){Er(this.o===void 0,3512);const i=a=>{a.error!=null&&Rn("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.m;return this.m=a.token,Rn("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(a.token):Promise.resolve()};this.o=a=>{t.enqueueRetryable((()=>i(a)))};const r=a=>{Rn("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>r(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?r(a):Rn("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new GB(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((n=>n?(Er(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new GB(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gue(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let i=0;i<e;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cP{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=gue(40);for(let a=0;a<r.length;++a)i.length<20&&r[a]<n&&(i+=t.charAt(r[a]%62))}return i}}function Oi(e,t){return e<t?-1:e>t?1:0}function kk(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const r=e.charAt(i),a=t.charAt(i);if(r!==a)return aC(r)===aC(a)?Oi(r,a):aC(r)?1:-1}return Oi(e.length,t.length)}const _ue=55296,vue=57343;function aC(e){const t=e.charCodeAt(0);return t>=_ue&&t<=vue}function Z_(e,t,n){return e.length===t.length&&e.every(((i,r)=>n(i,t[r])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qB="__name__";class Nu{constructor(t,n,i){n===void 0?n=0:n>t.length&&hi(637,{offset:n,range:t.length}),i===void 0?i=t.length-n:i>t.length-n&&hi(1746,{length:i,range:t.length-n}),this.segments=t,this.offset=n,this.len=i}get length(){return this.len}isEqual(t){return Nu.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof Nu?t.forEach((i=>{n.push(i)})):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,i=this.limit();n<i;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const i=Math.min(t.length,n.length);for(let r=0;r<i;r++){const a=Nu.compareSegments(t.get(r),n.get(r));if(a!==0)return a}return Oi(t.length,n.length)}static compareSegments(t,n){const i=Nu.isNumericId(t),r=Nu.isNumericId(n);return i&&!r?-1:!i&&r?1:i&&r?Nu.extractNumericId(t).compare(Nu.extractNumericId(n)):kk(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Ff.fromString(t.substring(4,t.length-2))}}class _s extends Nu{construct(t,n,i){return new _s(t,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const i of t){if(i.indexOf("//")>=0)throw new $n(un.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter((r=>r.length>0)))}return new _s(n)}static emptyPath(){return new _s([])}}const yue=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class na extends Nu{construct(t,n,i){return new na(t,n,i)}static isValidIdentifier(t){return yue.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),na.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===qB}static keyField(){return new na([qB])}static fromServerFormat(t){const n=[];let i="",r=0;const a=()=>{if(i.length===0)throw new $n(un.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let l=!1;for(;r<t.length;){const h=t[r];if(h==="\\"){if(r+1===t.length)throw new $n(un.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const s=t[r+1];if(s!=="\\"&&s!=="."&&s!=="`")throw new $n(un.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=s,r+=2}else h==="`"?(l=!l,r++):h!=="."||l?(i+=h,r++):(a(),r++)}if(a(),l)throw new $n(un.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new na(n)}static emptyPath(){return new na([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(t){this.path=t}static fromPath(t){return new ei(_s.fromString(t))}static fromName(t){return new ei(_s.fromString(t).popFirst(5))}static empty(){return new ei(_s.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&_s.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return _s.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new ei(new _s(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bue(e,t,n){if(!n)throw new $n(un.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function xue(e,t,n,i){if(t===!0&&i===!0)throw new $n(un.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function KB(e){if(!ei.isDocumentKey(e))throw new $n(un.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function NU(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function uP(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=(function(i){return i.constructor?i.constructor.name:null})(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":hi(12329,{type:typeof e})}function Zf(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new $n(un.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=uP(e);throw new $n(un.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function no(e,t){const n={typeString:e};return t&&(n.value=t),n}function C0(e,t){if(!NU(e))throw new $n(un.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in t)if(t[i]){const r=t[i].typeString,a="value"in t[i]?{value:t[i].value}:void 0;if(!(i in e)){n=`JSON missing required field: '${i}'`;break}const l=e[i];if(r&&typeof l!==r){n=`JSON field '${i}' must be a ${r}.`;break}if(a!==void 0&&l!==a.value){n=`Expected '${i}' field to equal '${a.value}'`;break}}if(n)throw new $n(un.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XB=-62135596800,ZB=1e6;class Xr{static now(){return Xr.fromMillis(Date.now())}static fromDate(t){return Xr.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),i=Math.floor((t-1e3*n)*ZB);return new Xr(n,i)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new $n(un.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new $n(un.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<XB)throw new $n(un.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new $n(un.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ZB}_compareTo(t){return this.seconds===t.seconds?Oi(this.nanoseconds,t.nanoseconds):Oi(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Xr._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(C0(t,Xr._jsonSchema))return new Xr(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-XB;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Xr._jsonSchemaVersion="firestore/timestamp/1.0",Xr._jsonSchema={type:no("string",Xr._jsonSchemaVersion),seconds:no("number"),nanoseconds:no("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{static fromTimestamp(t){return new _i(t)}static min(){return new _i(new Xr(0,0))}static max(){return new _i(new Xr(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wb=-1;function wue(e,t){const n=e.toTimestamp().seconds,i=e.toTimestamp().nanoseconds+1,r=_i.fromTimestamp(i===1e9?new Xr(n+1,0):new Xr(n,i));return new Yf(r,ei.empty(),t)}function Tue(e){return new Yf(e.readTime,e.key,Wb)}class Yf{constructor(t,n,i){this.readTime=t,this.documentKey=n,this.largestBatchId=i}static min(){return new Yf(_i.min(),ei.empty(),Wb)}static max(){return new Yf(_i.max(),ei.empty(),Wb)}}function Sue(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=ei.comparator(e.documentKey,t.documentKey),n!==0?n:Oi(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eue="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Cue{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mv(e){if(e.code!==un.FAILED_PRECONDITION||e.message!==Eue)throw e;Rn("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&hi(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new tn(((i,r)=>{this.nextCallback=a=>{this.wrapSuccess(t,a).next(i,r)},this.catchCallback=a=>{this.wrapFailure(n,a).next(i,r)}}))}toPromise(){return new Promise(((t,n)=>{this.next(t,n)}))}wrapUserFunction(t){try{const n=t();return n instanceof tn?n:tn.resolve(n)}catch(n){return tn.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction((()=>t(n))):tn.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction((()=>t(n))):tn.reject(n)}static resolve(t){return new tn(((n,i)=>{n(t)}))}static reject(t){return new tn(((n,i)=>{i(t)}))}static waitFor(t){return new tn(((n,i)=>{let r=0,a=0,l=!1;t.forEach((h=>{++r,h.next((()=>{++a,l&&a===r&&n()}),(s=>i(s)))})),l=!0,a===r&&n()}))}static or(t){let n=tn.resolve(!1);for(const i of t)n=n.next((r=>r?tn.resolve(r):i()));return n}static forEach(t,n){const i=[];return t.forEach(((r,a)=>{i.push(n.call(this,r,a))})),this.waitFor(i)}static mapArray(t,n){return new tn(((i,r)=>{const a=t.length,l=new Array(a);let h=0;for(let s=0;s<a;s++){const p=s;n(t[p]).next((v=>{l[p]=v,++h,h===a&&i(l)}),(v=>r(v)))}}))}static doWhile(t,n){return new tn(((i,r)=>{const a=()=>{t()===!0?n().next((()=>{a()}),r):i()};a()}))}}function kue(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function pv(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}bT.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dP=-1;function xT(e){return e==null}function y1(e){return e===0&&1/e==-1/0}function Iue(e){return typeof e=="number"&&Number.isInteger(e)&&!y1(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UU="";function Aue(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=YB(t)),t=Pue(e.get(n),t);return YB(t)}function Pue(e,t){let n=t;const i=e.length;for(let r=0;r<i;r++){const a=e.charAt(r);switch(a){case"\0":n+="";break;case UU:n+="";break;default:n+=a}}return n}function YB(e){return e+UU+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JB(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function um(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function $U(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(t,n){this.comparator=t,this.root=n||ea.EMPTY}insert(t,n){return new ys(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,ea.BLACK,null,null))}remove(t){return new ys(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ea.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(t){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((n,i)=>(t(n,i),!1)))}toString(){const t=[];return this.inorderTraversal(((n,i)=>(t.push(`${n}:${i}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new qx(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new qx(this.root,t,this.comparator,!1)}getReverseIterator(){return new qx(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new qx(this.root,t,this.comparator,!0)}}class qx{constructor(t,n,i,r){this.isReverse=r,this.nodeStack=[];let a=1;for(;!t.isEmpty();)if(a=n?i(t.key,n):1,n&&r&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(a===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class ea{constructor(t,n,i,r,a){this.key=t,this.value=n,this.color=i??ea.RED,this.left=r??ea.EMPTY,this.right=a??ea.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,i,r,a){return new ea(t??this.key,n??this.value,i??this.color,r??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,i){let r=this;const a=i(t,r.key);return r=a<0?r.copy(null,null,null,r.left.insert(t,n,i),null):a===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(t,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ea.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let i,r=this;if(n(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(t,r.key)===0){if(r.right.isEmpty())return ea.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,ea.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,ea.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw hi(43730,{key:this.key,value:this.value});if(this.right.isRed())throw hi(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw hi(27949);return t+(this.isRed()?0:1)}}ea.EMPTY=null,ea.RED=!0,ea.BLACK=!1;ea.EMPTY=new class{constructor(){this.size=0}get key(){throw hi(57766)}get value(){throw hi(16141)}get color(){throw hi(16727)}get left(){throw hi(29726)}get right(){throw hi(36894)}copy(t,n,i,r,a){return this}insert(t,n,i){return new ea(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(t){this.comparator=t,this.data=new ys(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((n,i)=>(t(n),!1)))}forEachInRange(t,n){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;n(r.key)}}forEachWhile(t,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new QB(this.data.getIterator())}getIteratorFrom(t){return new QB(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach((i=>{n=n.add(i)})),n}isEqual(t){if(!(t instanceof go)||this.size!==t.size)return!1;const n=this.data.getIterator(),i=t.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,a=i.getNext().key;if(this.comparator(r,a)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((n=>{t.push(n)})),t}toString(){const t=[];return this.forEach((n=>t.push(n))),"SortedSet("+t.toString()+")"}copy(t){const n=new go(this.comparator);return n.data=t,n}}class QB{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(t){this.fields=t,t.sort(na.comparator)}static empty(){return new nc([])}unionWith(t){let n=new go(na.comparator);for(const i of this.fields)n=n.add(i);for(const i of t)n=n.add(i);return new nc(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Z_(this.fields,t.fields,((n,i)=>n.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jU extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(t){this.binaryString=t}static fromBase64String(t){const n=(function(r){try{return atob(r)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new jU("Invalid base64 string: "+a):a}})(t);return new oa(n)}static fromUint8Array(t){const n=(function(r){let a="";for(let l=0;l<r.length;++l)a+=String.fromCharCode(r[l]);return a})(t);return new oa(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Oi(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}oa.EMPTY_BYTE_STRING=new oa("");const Mue=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Jf(e){if(Er(!!e,39018),typeof e=="string"){let t=0;const n=Mue.exec(e);if(Er(!!n,46558,{timestamp:e}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}const i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:$s(e.seconds),nanos:$s(e.nanos)}}function $s(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function Qf(e){return typeof e=="string"?oa.fromBase64String(e):oa.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WU="server_timestamp",HU="__type__",GU="__previous_value__",qU="__local_write_time__";function hP(e){return(e?.mapValue?.fields||{})[HU]?.stringValue===WU}function wT(e){const t=e.mapValue.fields[GU];return hP(t)?wT(t):t}function Hb(e){const t=Jf(e.mapValue.fields[qU].timestampValue);return new Xr(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Due{constructor(t,n,i,r,a,l,h,s,p,v){this.databaseId=t,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.longPollingOptions=s,this.useFetchStreams=p,this.isUsingEmulator=v}}const b1="(default)";class Gb{constructor(t,n){this.projectId=t,this.database=n||b1}static empty(){return new Gb("","")}get isDefaultDatabase(){return this.database===b1}isEqual(t){return t instanceof Gb&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KU="__type__",Rue="__max__",Kx={mapValue:{}},XU="__vector__",x1="value";function em(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?hP(e)?4:Oue(e)?9007199254740991:Lue(e)?10:11:hi(28295,{value:e})}function od(e,t){if(e===t)return!0;const n=em(e);if(n!==em(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Hb(e).isEqual(Hb(t));case 3:return(function(r,a){if(typeof r.timestampValue=="string"&&typeof a.timestampValue=="string"&&r.timestampValue.length===a.timestampValue.length)return r.timestampValue===a.timestampValue;const l=Jf(r.timestampValue),h=Jf(a.timestampValue);return l.seconds===h.seconds&&l.nanos===h.nanos})(e,t);case 5:return e.stringValue===t.stringValue;case 6:return(function(r,a){return Qf(r.bytesValue).isEqual(Qf(a.bytesValue))})(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return(function(r,a){return $s(r.geoPointValue.latitude)===$s(a.geoPointValue.latitude)&&$s(r.geoPointValue.longitude)===$s(a.geoPointValue.longitude)})(e,t);case 2:return(function(r,a){if("integerValue"in r&&"integerValue"in a)return $s(r.integerValue)===$s(a.integerValue);if("doubleValue"in r&&"doubleValue"in a){const l=$s(r.doubleValue),h=$s(a.doubleValue);return l===h?y1(l)===y1(h):isNaN(l)&&isNaN(h)}return!1})(e,t);case 9:return Z_(e.arrayValue.values||[],t.arrayValue.values||[],od);case 10:case 11:return(function(r,a){const l=r.mapValue.fields||{},h=a.mapValue.fields||{};if(JB(l)!==JB(h))return!1;for(const s in l)if(l.hasOwnProperty(s)&&(h[s]===void 0||!od(l[s],h[s])))return!1;return!0})(e,t);default:return hi(52216,{left:e})}}function qb(e,t){return(e.values||[]).find((n=>od(n,t)))!==void 0}function Y_(e,t){if(e===t)return 0;const n=em(e),i=em(t);if(n!==i)return Oi(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Oi(e.booleanValue,t.booleanValue);case 2:return(function(a,l){const h=$s(a.integerValue||a.doubleValue),s=$s(l.integerValue||l.doubleValue);return h<s?-1:h>s?1:h===s?0:isNaN(h)?isNaN(s)?0:-1:1})(e,t);case 3:return eF(e.timestampValue,t.timestampValue);case 4:return eF(Hb(e),Hb(t));case 5:return kk(e.stringValue,t.stringValue);case 6:return(function(a,l){const h=Qf(a),s=Qf(l);return h.compareTo(s)})(e.bytesValue,t.bytesValue);case 7:return(function(a,l){const h=a.split("/"),s=l.split("/");for(let p=0;p<h.length&&p<s.length;p++){const v=Oi(h[p],s[p]);if(v!==0)return v}return Oi(h.length,s.length)})(e.referenceValue,t.referenceValue);case 8:return(function(a,l){const h=Oi($s(a.latitude),$s(l.latitude));return h!==0?h:Oi($s(a.longitude),$s(l.longitude))})(e.geoPointValue,t.geoPointValue);case 9:return tF(e.arrayValue,t.arrayValue);case 10:return(function(a,l){const h=a.fields||{},s=l.fields||{},p=h[x1]?.arrayValue,v=s[x1]?.arrayValue,x=Oi(p?.values?.length||0,v?.values?.length||0);return x!==0?x:tF(p,v)})(e.mapValue,t.mapValue);case 11:return(function(a,l){if(a===Kx.mapValue&&l===Kx.mapValue)return 0;if(a===Kx.mapValue)return 1;if(l===Kx.mapValue)return-1;const h=a.fields||{},s=Object.keys(h),p=l.fields||{},v=Object.keys(p);s.sort(),v.sort();for(let x=0;x<s.length&&x<v.length;++x){const T=kk(s[x],v[x]);if(T!==0)return T;const k=Y_(h[s[x]],p[v[x]]);if(k!==0)return k}return Oi(s.length,v.length)})(e.mapValue,t.mapValue);default:throw hi(23264,{he:n})}}function eF(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return Oi(e,t);const n=Jf(e),i=Jf(t),r=Oi(n.seconds,i.seconds);return r!==0?r:Oi(n.nanos,i.nanos)}function tF(e,t){const n=e.values||[],i=t.values||[];for(let r=0;r<n.length&&r<i.length;++r){const a=Y_(n[r],i[r]);if(a)return a}return Oi(n.length,i.length)}function J_(e){return Ik(e)}function Ik(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?(function(n){const i=Jf(n);return`time(${i.seconds},${i.nanos})`})(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?(function(n){return Qf(n).toBase64()})(e.bytesValue):"referenceValue"in e?(function(n){return ei.fromName(n).toString()})(e.referenceValue):"geoPointValue"in e?(function(n){return`geo(${n.latitude},${n.longitude})`})(e.geoPointValue):"arrayValue"in e?(function(n){let i="[",r=!0;for(const a of n.values||[])r?r=!1:i+=",",i+=Ik(a);return i+"]"})(e.arrayValue):"mapValue"in e?(function(n){const i=Object.keys(n.fields||{}).sort();let r="{",a=!0;for(const l of i)a?a=!1:r+=",",r+=`${l}:${Ik(n.fields[l])}`;return r+"}"})(e.mapValue):hi(61005,{value:e})}function _w(e){switch(em(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=wT(e);return t?16+_w(t):16;case 5:return 2*e.stringValue.length;case 6:return Qf(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((r,a)=>r+_w(a)),0)})(e.arrayValue);case 10:case 11:return(function(i){let r=0;return um(i.fields,((a,l)=>{r+=a.length+_w(l)})),r})(e.mapValue);default:throw hi(13486,{value:e})}}function Ak(e){return!!e&&"integerValue"in e}function fP(e){return!!e&&"arrayValue"in e}function nF(e){return!!e&&"nullValue"in e}function iF(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function vw(e){return!!e&&"mapValue"in e}function Lue(e){return(e?.mapValue?.fields||{})[KU]?.stringValue===XU}function Qy(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return um(e.mapValue.fields,((n,i)=>t.mapValue.fields[n]=Qy(i))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Qy(e.arrayValue.values[n]);return t}return{...e}}function Oue(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Rue}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(t){this.value=t}static empty(){return new El({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let i=0;i<t.length-1;++i)if(n=(n.mapValue.fields||{})[t.get(i)],!vw(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Qy(n)}setAll(t){let n=na.emptyPath(),i={},r=[];t.forEach(((l,h)=>{if(!n.isImmediateParentOf(h)){const s=this.getFieldsMap(n);this.applyChanges(s,i,r),i={},r=[],n=h.popLast()}l?i[h.lastSegment()]=Qy(l):r.push(h.lastSegment())}));const a=this.getFieldsMap(n);this.applyChanges(a,i,r)}delete(t){const n=this.field(t.popLast());vw(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return od(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=n.mapValue.fields[t.get(i)];vw(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[t.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(t,n,i){um(n,((r,a)=>t[r]=a));for(const r of i)delete t[r]}clone(){return new El(Qy(this.value))}}function ZU(e){const t=[];return um(e.fields,((n,i)=>{const r=new na([n]);if(vw(i)){const a=ZU(i.mapValue).fields;if(a.length===0)t.push(r);else for(const l of a)t.push(r.child(l))}else t.push(r)})),new nc(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(t,n,i,r,a,l,h){this.key=t,this.documentType=n,this.version=i,this.readTime=r,this.createTime=a,this.data=l,this.documentState=h}static newInvalidDocument(t){return new Pa(t,0,_i.min(),_i.min(),_i.min(),El.empty(),0)}static newFoundDocument(t,n,i,r){return new Pa(t,1,n,_i.min(),i,r,0)}static newNoDocument(t,n){return new Pa(t,2,n,_i.min(),_i.min(),El.empty(),0)}static newUnknownDocument(t,n){return new Pa(t,3,n,_i.min(),_i.min(),El.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(_i.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=El.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=El.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=_i.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Pa&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Pa(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(t,n){this.position=t,this.inclusive=n}}function rF(e,t,n){let i=0;for(let r=0;r<e.position.length;r++){const a=t[r],l=e.position[r];if(a.field.isKeyField()?i=ei.comparator(ei.fromName(l.referenceValue),n.key):i=Y_(l,n.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function sF(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!od(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(t,n="asc"){this.field=t,this.dir=n}}function Vue(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YU{}class ho extends YU{constructor(t,n,i){super(),this.field=t,this.op=n,this.value=i}static create(t,n,i){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,i):new Fue(t,n,i):n==="array-contains"?new Uue(t,i):n==="in"?new $ue(t,i):n==="not-in"?new jue(t,i):n==="array-contains-any"?new Wue(t,i):new ho(t,n,i)}static createKeyFieldInFilter(t,n,i){return n==="in"?new zue(t,i):new Nue(t,i)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Y_(n,this.value)):n!==null&&em(this.value)===em(n)&&this.matchesComparison(Y_(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return hi(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ad extends YU{constructor(t,n){super(),this.filters=t,this.op=n,this.Pe=null}static create(t,n){return new ad(t,n)}matches(t){return JU(this)?this.filters.find((n=>!n.matches(t)))===void 0:this.filters.find((n=>n.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,n)=>t.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function JU(e){return e.op==="and"}function QU(e){return Bue(e)&&JU(e)}function Bue(e){for(const t of e.filters)if(t instanceof ad)return!1;return!0}function Pk(e){if(e instanceof ho)return e.field.canonicalString()+e.op.toString()+J_(e.value);if(QU(e))return e.filters.map((t=>Pk(t))).join(",");{const t=e.filters.map((n=>Pk(n))).join(",");return`${e.op}(${t})`}}function e$(e,t){return e instanceof ho?(function(i,r){return r instanceof ho&&i.op===r.op&&i.field.isEqual(r.field)&&od(i.value,r.value)})(e,t):e instanceof ad?(function(i,r){return r instanceof ad&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce(((a,l,h)=>a&&e$(l,r.filters[h])),!0):!1})(e,t):void hi(19439)}function t$(e){return e instanceof ho?(function(n){return`${n.field.canonicalString()} ${n.op} ${J_(n.value)}`})(e):e instanceof ad?(function(n){return n.op.toString()+" {"+n.getFilters().map(t$).join(" ,")+"}"})(e):"Filter"}class Fue extends ho{constructor(t,n,i){super(t,n,i),this.key=ei.fromName(i.referenceValue)}matches(t){const n=ei.comparator(t.key,this.key);return this.matchesComparison(n)}}class zue extends ho{constructor(t,n){super(t,"in",n),this.keys=n$("in",n)}matches(t){return this.keys.some((n=>n.isEqual(t.key)))}}class Nue extends ho{constructor(t,n){super(t,"not-in",n),this.keys=n$("not-in",n)}matches(t){return!this.keys.some((n=>n.isEqual(t.key)))}}function n$(e,t){return(t.arrayValue?.values||[]).map((n=>ei.fromName(n.referenceValue)))}class Uue extends ho{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return fP(n)&&qb(n.arrayValue,this.value)}}class $ue extends ho{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&qb(this.value.arrayValue,n)}}class jue extends ho{constructor(t,n){super(t,"not-in",n)}matches(t){if(qb(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!qb(this.value.arrayValue,n)}}class Wue extends ho{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!fP(n)||!n.arrayValue.values)&&n.arrayValue.values.some((i=>qb(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hue{constructor(t,n=null,i=[],r=[],a=null,l=null,h=null){this.path=t,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=a,this.startAt=l,this.endAt=h,this.Te=null}}function oF(e,t=null,n=[],i=[],r=null,a=null,l=null){return new Hue(e,t,n,i,r,a,l)}function mP(e){const t=bi(e);if(t.Te===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((i=>Pk(i))).join(","),n+="|ob:",n+=t.orderBy.map((i=>(function(a){return a.field.canonicalString()+a.dir})(i))).join(","),xT(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((i=>J_(i))).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((i=>J_(i))).join(",")),t.Te=n}return t.Te}function pP(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Vue(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!e$(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!sF(e.startAt,t.startAt)&&sF(e.endAt,t.endAt)}function Mk(e){return ei.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(t,n=null,i=[],r=[],a=null,l="F",h=null,s=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=a,this.limitType=l,this.startAt=h,this.endAt=s,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Gue(e,t,n,i,r,a,l,h){return new TT(e,t,n,i,r,a,l,h)}function gP(e){return new TT(e)}function aF(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function que(e){return e.collectionGroup!==null}function eb(e){const t=bi(e);if(t.Ie===null){t.Ie=[];const n=new Set;for(const a of t.explicitOrderBy)t.Ie.push(a),n.add(a.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(l){let h=new go(na.comparator);return l.filters.forEach((s=>{s.getFlattenedFilters().forEach((p=>{p.isInequality()&&(h=h.add(p.field))}))})),h})(t).forEach((a=>{n.has(a.canonicalString())||a.isKeyField()||t.Ie.push(new T1(a,i))})),n.has(na.keyField().canonicalString())||t.Ie.push(new T1(na.keyField(),i))}return t.Ie}function Zu(e){const t=bi(e);return t.Ee||(t.Ee=Kue(t,eb(e))),t.Ee}function Kue(e,t){if(e.limitType==="F")return oF(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((r=>{const a=r.dir==="desc"?"asc":"desc";return new T1(r.field,a)}));const n=e.endAt?new w1(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new w1(e.startAt.position,e.startAt.inclusive):null;return oF(e.path,e.collectionGroup,t,e.filters,e.limit,n,i)}}function Dk(e,t,n){return new TT(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function ST(e,t){return pP(Zu(e),Zu(t))&&e.limitType===t.limitType}function i$(e){return`${mP(Zu(e))}|lt:${e.limitType}`}function l_(e){return`Query(target=${(function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map((r=>t$(r))).join(", ")}]`),xT(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map((r=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(r))).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map((r=>J_(r))).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map((r=>J_(r))).join(",")),`Target(${i})`})(Zu(e))}; limitType=${e.limitType})`}function ET(e,t){return t.isFoundDocument()&&(function(i,r){const a=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):ei.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)})(e,t)&&(function(i,r){for(const a of eb(i))if(!a.field.isKeyField()&&r.data.field(a.field)===null)return!1;return!0})(e,t)&&(function(i,r){for(const a of i.filters)if(!a.matches(r))return!1;return!0})(e,t)&&(function(i,r){return!(i.startAt&&!(function(l,h,s){const p=rF(l,h,s);return l.inclusive?p<=0:p<0})(i.startAt,eb(i),r)||i.endAt&&!(function(l,h,s){const p=rF(l,h,s);return l.inclusive?p>=0:p>0})(i.endAt,eb(i),r))})(e,t)}function Xue(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function r$(e){return(t,n)=>{let i=!1;for(const r of eb(e)){const a=Zue(r,t,n);if(a!==0)return a;i=i||r.field.isKeyField()}return 0}}function Zue(e,t,n){const i=e.field.isKeyField()?ei.comparator(t.key,n.key):(function(a,l,h){const s=l.data.field(a),p=h.data.field(a);return s!==null&&p!==null?Y_(s,p):hi(42886)})(e.field,t,n);switch(e.dir){case"asc":return i;case"desc":return-1*i;default:return hi(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i!==void 0){for(const[r,a]of i)if(this.equalsFn(r,t))return a}}has(t){return this.get(t)!==void 0}set(t,n){const i=this.mapKeyFn(t),r=this.inner[i];if(r===void 0)return this.inner[i]=[[t,n]],void this.innerSize++;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],t))return void(r[a]=[t,n]);r.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){um(this.inner,((n,i)=>{for(const[r,a]of i)t(r,a)}))}isEmpty(){return $U(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yue=new ys(ei.comparator);function xh(){return Yue}const s$=new ys(ei.comparator);function Dy(...e){let t=s$;for(const n of e)t=t.insert(n.key,n);return t}function o$(e){let t=s$;return e.forEach(((n,i)=>t=t.insert(n,i.overlayedDocument))),t}function gp(){return tb()}function a$(){return tb()}function tb(){return new lg((e=>e.toString()),((e,t)=>e.isEqual(t)))}const Jue=new ys(ei.comparator),Que=new go(ei.comparator);function Vi(...e){let t=Que;for(const n of e)t=t.add(n);return t}const ede=new go(Oi);function tde(){return ede}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _P(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:y1(t)?"-0":t}}function l$(e){return{integerValue:""+e}}function nde(e,t){return Iue(t)?l$(t):_P(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{constructor(){this._=void 0}}function ide(e,t,n){return e instanceof S1?(function(r,a){const l={fields:{[HU]:{stringValue:WU},[qU]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return a&&hP(a)&&(a=wT(a)),a&&(l.fields[GU]=a),{mapValue:l}})(n,t):e instanceof Q_?u$(e,t):e instanceof Kb?d$(e,t):(function(r,a){const l=c$(r,a),h=lF(l)+lF(r.Ae);return Ak(l)&&Ak(r.Ae)?l$(h):_P(r.serializer,h)})(e,t)}function rde(e,t,n){return e instanceof Q_?u$(e,t):e instanceof Kb?d$(e,t):n}function c$(e,t){return e instanceof E1?(function(i){return Ak(i)||(function(a){return!!a&&"doubleValue"in a})(i)})(t)?t:{integerValue:0}:null}class S1 extends CT{}class Q_ extends CT{constructor(t){super(),this.elements=t}}function u$(e,t){const n=h$(t);for(const i of e.elements)n.some((r=>od(r,i)))||n.push(i);return{arrayValue:{values:n}}}class Kb extends CT{constructor(t){super(),this.elements=t}}function d$(e,t){let n=h$(t);for(const i of e.elements)n=n.filter((r=>!od(r,i)));return{arrayValue:{values:n}}}class E1 extends CT{constructor(t,n){super(),this.serializer=t,this.Ae=n}}function lF(e){return $s(e.integerValue||e.doubleValue)}function h$(e){return fP(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sde{constructor(t,n){this.field=t,this.transform=n}}function ode(e,t){return e.field.isEqual(t.field)&&(function(i,r){return i instanceof Q_&&r instanceof Q_||i instanceof Kb&&r instanceof Kb?Z_(i.elements,r.elements,od):i instanceof E1&&r instanceof E1?od(i.Ae,r.Ae):i instanceof S1&&r instanceof S1})(e.transform,t.transform)}class ade{constructor(t,n){this.version=t,this.transformResults=n}}class au{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new au}static exists(t){return new au(void 0,t)}static updateTime(t){return new au(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function yw(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class kT{}function f$(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new vP(e.key,au.none()):new k0(e.key,e.data,au.none());{const n=e.data,i=El.empty();let r=new go(na.comparator);for(let a of t.fields)if(!r.has(a)){let l=n.field(a);l===null&&a.length>1&&(a=a.popLast(),l=n.field(a)),l===null?i.delete(a):i.set(a,l),r=r.add(a)}return new dm(e.key,i,new nc(r.toArray()),au.none())}}function lde(e,t,n){e instanceof k0?(function(r,a,l){const h=r.value.clone(),s=uF(r.fieldTransforms,a,l.transformResults);h.setAll(s),a.convertToFoundDocument(l.version,h).setHasCommittedMutations()})(e,t,n):e instanceof dm?(function(r,a,l){if(!yw(r.precondition,a))return void a.convertToUnknownDocument(l.version);const h=uF(r.fieldTransforms,a,l.transformResults),s=a.data;s.setAll(m$(r)),s.setAll(h),a.convertToFoundDocument(l.version,s).setHasCommittedMutations()})(e,t,n):(function(r,a,l){a.convertToNoDocument(l.version).setHasCommittedMutations()})(0,t,n)}function nb(e,t,n,i){return e instanceof k0?(function(a,l,h,s){if(!yw(a.precondition,l))return h;const p=a.value.clone(),v=dF(a.fieldTransforms,s,l);return p.setAll(v),l.convertToFoundDocument(l.version,p).setHasLocalMutations(),null})(e,t,n,i):e instanceof dm?(function(a,l,h,s){if(!yw(a.precondition,l))return h;const p=dF(a.fieldTransforms,s,l),v=l.data;return v.setAll(m$(a)),v.setAll(p),l.convertToFoundDocument(l.version,v).setHasLocalMutations(),h===null?null:h.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((x=>x.field)))})(e,t,n,i):(function(a,l,h){return yw(a.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):h})(e,t,n)}function cde(e,t){let n=null;for(const i of e.fieldTransforms){const r=t.data.field(i.field),a=c$(i.transform,r||null);a!=null&&(n===null&&(n=El.empty()),n.set(i.field,a))}return n||null}function cF(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!(function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Z_(i,r,((a,l)=>ode(a,l)))})(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class k0 extends kT{constructor(t,n,i,r=[]){super(),this.key=t,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class dm extends kT{constructor(t,n,i,r,a=[]){super(),this.key=t,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function m$(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=e.data.field(n);t.set(n,i)}})),t}function uF(e,t,n){const i=new Map;Er(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let r=0;r<n.length;r++){const a=e[r],l=a.transform,h=t.data.field(a.field);i.set(a.field,rde(l,h,n[r]))}return i}function dF(e,t,n){const i=new Map;for(const r of e){const a=r.transform,l=n.data.field(r.field);i.set(r.field,ide(a,l,t))}return i}class vP extends kT{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ude extends kT{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dde{constructor(t,n,i,r){this.batchId=t,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const a=this.mutations[r];a.key.isEqual(t.key)&&lde(a,t,i[r])}}applyToLocalView(t,n){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(n=nb(i,t,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(n=nb(i,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const i=a$();return this.mutations.forEach((r=>{const a=t.get(r.key),l=a.overlayedDocument;let h=this.applyToLocalView(l,a.mutatedFields);h=n.has(r.key)?null:h;const s=f$(l,h);s!==null&&i.set(r.key,s),l.isValidDocument()||l.convertToNoDocument(_i.min())})),i}keys(){return this.mutations.reduce(((t,n)=>t.add(n.key)),Vi())}isEqual(t){return this.batchId===t.batchId&&Z_(this.mutations,t.mutations,((n,i)=>cF(n,i)))&&Z_(this.baseMutations,t.baseMutations,((n,i)=>cF(n,i)))}}class yP{constructor(t,n,i,r){this.batch=t,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(t,n,i){Er(t.mutations.length===i.length,58842,{me:t.mutations.length,fe:i.length});let r=(function(){return Jue})();const a=t.mutations;for(let l=0;l<a.length;l++)r=r.insert(a[l].key,i[l].version);return new yP(t,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hde{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fde{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Js,Xi;function mde(e){switch(e){case un.OK:return hi(64938);case un.CANCELLED:case un.UNKNOWN:case un.DEADLINE_EXCEEDED:case un.RESOURCE_EXHAUSTED:case un.INTERNAL:case un.UNAVAILABLE:case un.UNAUTHENTICATED:return!1;case un.INVALID_ARGUMENT:case un.NOT_FOUND:case un.ALREADY_EXISTS:case un.PERMISSION_DENIED:case un.FAILED_PRECONDITION:case un.ABORTED:case un.OUT_OF_RANGE:case un.UNIMPLEMENTED:case un.DATA_LOSS:return!0;default:return hi(15467,{code:e})}}function p$(e){if(e===void 0)return bh("GRPC error has no .code"),un.UNKNOWN;switch(e){case Js.OK:return un.OK;case Js.CANCELLED:return un.CANCELLED;case Js.UNKNOWN:return un.UNKNOWN;case Js.DEADLINE_EXCEEDED:return un.DEADLINE_EXCEEDED;case Js.RESOURCE_EXHAUSTED:return un.RESOURCE_EXHAUSTED;case Js.INTERNAL:return un.INTERNAL;case Js.UNAVAILABLE:return un.UNAVAILABLE;case Js.UNAUTHENTICATED:return un.UNAUTHENTICATED;case Js.INVALID_ARGUMENT:return un.INVALID_ARGUMENT;case Js.NOT_FOUND:return un.NOT_FOUND;case Js.ALREADY_EXISTS:return un.ALREADY_EXISTS;case Js.PERMISSION_DENIED:return un.PERMISSION_DENIED;case Js.FAILED_PRECONDITION:return un.FAILED_PRECONDITION;case Js.ABORTED:return un.ABORTED;case Js.OUT_OF_RANGE:return un.OUT_OF_RANGE;case Js.UNIMPLEMENTED:return un.UNIMPLEMENTED;case Js.DATA_LOSS:return un.DATA_LOSS;default:return hi(39323,{code:e})}}(Xi=Js||(Js={}))[Xi.OK=0]="OK",Xi[Xi.CANCELLED=1]="CANCELLED",Xi[Xi.UNKNOWN=2]="UNKNOWN",Xi[Xi.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xi[Xi.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xi[Xi.NOT_FOUND=5]="NOT_FOUND",Xi[Xi.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xi[Xi.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xi[Xi.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xi[Xi.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xi[Xi.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xi[Xi.ABORTED=10]="ABORTED",Xi[Xi.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xi[Xi.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xi[Xi.INTERNAL=13]="INTERNAL",Xi[Xi.UNAVAILABLE=14]="UNAVAILABLE",Xi[Xi.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pde(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gde=new Ff([4294967295,4294967295],0);function hF(e){const t=pde().encode(e),n=new DU;return n.update(t),new Uint8Array(n.digest())}function fF(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),i=t.getUint32(4,!0),r=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new Ff([n,i],0),new Ff([r,a],0)]}class bP{constructor(t,n,i){if(this.bitmap=t,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Ry(`Invalid padding: ${n}`);if(i<0)throw new Ry(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new Ry(`Invalid hash count: ${i}`);if(t.length===0&&n!==0)throw new Ry(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*t.length-n,this.pe=Ff.fromNumber(this.ge)}ye(t,n,i){let r=t.add(n.multiply(Ff.fromNumber(i)));return r.compare(gde)===1&&(r=new Ff([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const n=hF(t),[i,r]=fF(n);for(let a=0;a<this.hashCount;a++){const l=this.ye(i,r,a);if(!this.we(l))return!1}return!0}static create(t,n,i){const r=t%8==0?0:8-t%8,a=new Uint8Array(Math.ceil(t/8)),l=new bP(a,r,n);return i.forEach((h=>l.insert(h))),l}insert(t){if(this.ge===0)return;const n=hF(t),[i,r]=fF(n);for(let a=0;a<this.hashCount;a++){const l=this.ye(i,r,a);this.Se(l)}}Se(t){const n=Math.floor(t/8),i=t%8;this.bitmap[n]|=1<<i}}class Ry extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IT{constructor(t,n,i,r,a){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(t,n,i){const r=new Map;return r.set(t,I0.createSynthesizedTargetChangeForCurrentChange(t,n,i)),new IT(_i.min(),r,new ys(Oi),xh(),Vi())}}class I0{constructor(t,n,i,r,a){this.resumeToken=t,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(t,n,i){return new I0(i,n,Vi(),Vi(),Vi())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bw{constructor(t,n,i,r){this.be=t,this.removedTargetIds=n,this.key=i,this.De=r}}class g${constructor(t,n){this.targetId=t,this.Ce=n}}class _${constructor(t,n,i=oa.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=n,this.resumeToken=i,this.cause=r}}class mF{constructor(){this.ve=0,this.Fe=pF(),this.Me=oa.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Vi(),n=Vi(),i=Vi();return this.Fe.forEach(((r,a)=>{switch(a){case 0:t=t.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:hi(38017,{changeType:a})}})),new I0(this.Me,this.xe,t,n,i)}qe(){this.Oe=!1,this.Fe=pF()}Qe(t,n){this.Oe=!0,this.Fe=this.Fe.insert(t,n)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,Er(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class _de{constructor(t){this.Ge=t,this.ze=new Map,this.je=xh(),this.Je=Xx(),this.He=Xx(),this.Ye=new ys(Oi)}Ze(t){for(const n of t.be)t.De&&t.De.isFoundDocument()?this.Xe(n,t.De):this.et(n,t.key,t.De);for(const n of t.removedTargetIds)this.et(n,t.key,t.De)}tt(t){this.forEachTarget(t,(n=>{const i=this.nt(n);switch(t.state){case 0:this.rt(n)&&i.Le(t.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(t.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(t.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(t.resumeToken));break;default:hi(56790,{state:t.state})}}))}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ze.forEach(((i,r)=>{this.rt(r)&&n(r)}))}st(t){const n=t.targetId,i=t.Ce.count,r=this.ot(n);if(r){const a=r.target;if(Mk(a))if(i===0){const l=new ei(a.path);this.et(n,l,Pa.newNoDocument(l,_i.min()))}else Er(i===1,20013,{expectedCount:i});else{const l=this._t(n);if(l!==i){const h=this.ut(t),s=h?this.ct(h,t,l):1;if(s!==0){this.it(n);const p=s===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,p)}}}}}ut(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:a=0}=n;let l,h;try{l=Qf(i).toUint8Array()}catch(s){if(s instanceof jU)return X_("Decoding the base64 bloom filter in existence filter failed ("+s.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw s}try{h=new bP(l,r,a)}catch(s){return X_(s instanceof Ry?"BloomFilter error: ":"Applying bloom filter failed: ",s),null}return h.ge===0?null:h}ct(t,n,i){return n.Ce.count===i-this.Pt(t,n.targetId)?0:2}Pt(t,n){const i=this.Ge.getRemoteKeysForTarget(n);let r=0;return i.forEach((a=>{const l=this.Ge.ht(),h=`projects/${l.projectId}/databases/${l.database}/documents/${a.path.canonicalString()}`;t.mightContain(h)||(this.et(n,a,null),r++)})),r}Tt(t){const n=new Map;this.ze.forEach(((a,l)=>{const h=this.ot(l);if(h){if(a.current&&Mk(h.target)){const s=new ei(h.target.path);this.It(s).has(l)||this.Et(l,s)||this.et(l,s,Pa.newNoDocument(s,t))}a.Be&&(n.set(l,a.ke()),a.qe())}}));let i=Vi();this.He.forEach(((a,l)=>{let h=!0;l.forEachWhile((s=>{const p=this.ot(s);return!p||p.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(i=i.add(a))})),this.je.forEach(((a,l)=>l.setReadTime(t)));const r=new IT(t,n,this.Ye,this.je,i);return this.je=xh(),this.Je=Xx(),this.He=Xx(),this.Ye=new ys(Oi),r}Xe(t,n){if(!this.rt(t))return;const i=this.Et(t,n.key)?2:0;this.nt(t).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(t)),this.He=this.He.insert(n.key,this.dt(n.key).add(t))}et(t,n,i){if(!this.rt(t))return;const r=this.nt(t);this.Et(t,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(t)),this.He=this.He.insert(n,this.dt(n).add(t)),i&&(this.je=this.je.insert(n,i))}removeTarget(t){this.ze.delete(t)}_t(t){const n=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let n=this.ze.get(t);return n||(n=new mF,this.ze.set(t,n)),n}dt(t){let n=this.He.get(t);return n||(n=new go(Oi),this.He=this.He.insert(t,n)),n}It(t){let n=this.Je.get(t);return n||(n=new go(Oi),this.Je=this.Je.insert(t,n)),n}rt(t){const n=this.ot(t)!==null;return n||Rn("WatchChangeAggregator","Detected inactive target",t),n}ot(t){const n=this.ze.get(t);return n&&n.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new mF),this.Ge.getRemoteKeysForTarget(t).forEach((n=>{this.et(t,n,null)}))}Et(t,n){return this.Ge.getRemoteKeysForTarget(t).has(n)}}function Xx(){return new ys(ei.comparator)}function pF(){return new ys(ei.comparator)}const vde={asc:"ASCENDING",desc:"DESCENDING"},yde={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},bde={and:"AND",or:"OR"};class xde{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function Rk(e,t){return e.useProto3Json||xT(t)?t:{value:t}}function C1(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function v$(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function wde(e,t){return C1(e,t.toTimestamp())}function Yu(e){return Er(!!e,49232),_i.fromTimestamp((function(n){const i=Jf(n);return new Xr(i.seconds,i.nanos)})(e))}function xP(e,t){return Lk(e,t).canonicalString()}function Lk(e,t){const n=(function(r){return new _s(["projects",r.projectId,"databases",r.database])})(e).child("documents");return t===void 0?n:n.child(t)}function y$(e){const t=_s.fromString(e);return Er(S$(t),10190,{key:t.toString()}),t}function Ok(e,t){return xP(e.databaseId,t.path)}function lC(e,t){const n=y$(t);if(n.get(1)!==e.databaseId.projectId)throw new $n(un.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new $n(un.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ei(x$(n))}function b$(e,t){return xP(e.databaseId,t)}function Tde(e){const t=y$(e);return t.length===4?_s.emptyPath():x$(t)}function Vk(e){return new _s(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function x$(e){return Er(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function gF(e,t,n){return{name:Ok(e,t),fields:n.value.mapValue.fields}}function Sde(e,t){let n;if("targetChange"in t){t.targetChange;const i=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:hi(39313,{state:p})})(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],a=(function(p,v){return p.useProto3Json?(Er(v===void 0||typeof v=="string",58123),oa.fromBase64String(v||"")):(Er(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),oa.fromUint8Array(v||new Uint8Array))})(e,t.targetChange.resumeToken),l=t.targetChange.cause,h=l&&(function(p){const v=p.code===void 0?un.UNKNOWN:p$(p.code);return new $n(v,p.message||"")})(l);n=new _$(i,r,a,h||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const r=lC(e,i.document.name),a=Yu(i.document.updateTime),l=i.document.createTime?Yu(i.document.createTime):_i.min(),h=new El({mapValue:{fields:i.document.fields}}),s=Pa.newFoundDocument(r,a,l,h),p=i.targetIds||[],v=i.removedTargetIds||[];n=new bw(p,v,s.key,s)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const r=lC(e,i.document),a=i.readTime?Yu(i.readTime):_i.min(),l=Pa.newNoDocument(r,a),h=i.removedTargetIds||[];n=new bw([],h,l.key,l)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const r=lC(e,i.document),a=i.removedTargetIds||[];n=new bw([],a,r,null)}else{if(!("filter"in t))return hi(11601,{Rt:t});{t.filter;const i=t.filter;i.targetId;const{count:r=0,unchangedNames:a}=i,l=new fde(r,a),h=i.targetId;n=new g$(h,l)}}return n}function Ede(e,t){let n;if(t instanceof k0)n={update:gF(e,t.key,t.value)};else if(t instanceof vP)n={delete:Ok(e,t.key)};else if(t instanceof dm)n={update:gF(e,t.key,t.data),updateMask:Lde(t.fieldMask)};else{if(!(t instanceof ude))return hi(16599,{Vt:t.type});n={verify:Ok(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((i=>(function(a,l){const h=l.transform;if(h instanceof S1)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Q_)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Kb)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof E1)return{fieldPath:l.field.canonicalString(),increment:h.Ae};throw hi(20930,{transform:l.transform})})(0,i)))),t.precondition.isNone||(n.currentDocument=(function(r,a){return a.updateTime!==void 0?{updateTime:wde(r,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:hi(27497)})(e,t.precondition)),n}function Cde(e,t){return e&&e.length>0?(Er(t!==void 0,14353),e.map((n=>(function(r,a){let l=r.updateTime?Yu(r.updateTime):Yu(a);return l.isEqual(_i.min())&&(l=Yu(a)),new ade(l,r.transformResults||[])})(n,t)))):[]}function kde(e,t){return{documents:[b$(e,t.path)]}}function Ide(e,t){const n={structuredQuery:{}},i=t.path;let r;t.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=b$(e,r);const a=(function(p){if(p.length!==0)return T$(ad.create(p,"and"))})(t.filters);a&&(n.structuredQuery.where=a);const l=(function(p){if(p.length!==0)return p.map((v=>(function(T){return{field:c_(T.field),direction:Mde(T.dir)}})(v)))})(t.orderBy);l&&(n.structuredQuery.orderBy=l);const h=Rk(e,t.limit);return h!==null&&(n.structuredQuery.limit=h),t.startAt&&(n.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(t.startAt)),t.endAt&&(n.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(t.endAt)),{ft:n,parent:r}}function Ade(e){let t=Tde(e.parent);const n=e.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){Er(i===1,65062);const v=n.from[0];v.allDescendants?r=v.collectionId:t=t.child(v.collectionId)}let a=[];n.where&&(a=(function(x){const T=w$(x);return T instanceof ad&&QU(T)?T.getFilters():[T]})(n.where));let l=[];n.orderBy&&(l=(function(x){return x.map((T=>(function(P){return new T1(u_(P.field),(function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(P.direction))})(T)))})(n.orderBy));let h=null;n.limit&&(h=(function(x){let T;return T=typeof x=="object"?x.value:x,xT(T)?null:T})(n.limit));let s=null;n.startAt&&(s=(function(x){const T=!!x.before,k=x.values||[];return new w1(k,T)})(n.startAt));let p=null;return n.endAt&&(p=(function(x){const T=!x.before,k=x.values||[];return new w1(k,T)})(n.endAt)),Gue(t,r,l,a,h,"F",s,p)}function Pde(e,t){const n=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return hi(28987,{purpose:r})}})(t.purpose);return n==null?null:{"goog-listen-tags":n}}function w$(e){return e.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=u_(n.unaryFilter.field);return ho.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=u_(n.unaryFilter.field);return ho.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=u_(n.unaryFilter.field);return ho.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=u_(n.unaryFilter.field);return ho.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return hi(61313);default:return hi(60726)}})(e):e.fieldFilter!==void 0?(function(n){return ho.create(u_(n.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return hi(58110);default:return hi(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(e):e.compositeFilter!==void 0?(function(n){return ad.create(n.compositeFilter.filters.map((i=>w$(i))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return hi(1026)}})(n.compositeFilter.op))})(e):hi(30097,{filter:e})}function Mde(e){return vde[e]}function Dde(e){return yde[e]}function Rde(e){return bde[e]}function c_(e){return{fieldPath:e.canonicalString()}}function u_(e){return na.fromServerFormat(e.fieldPath)}function T$(e){return e instanceof ho?(function(n){if(n.op==="=="){if(iF(n.value))return{unaryFilter:{field:c_(n.field),op:"IS_NAN"}};if(nF(n.value))return{unaryFilter:{field:c_(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(iF(n.value))return{unaryFilter:{field:c_(n.field),op:"IS_NOT_NAN"}};if(nF(n.value))return{unaryFilter:{field:c_(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:c_(n.field),op:Dde(n.op),value:n.value}}})(e):e instanceof ad?(function(n){const i=n.getFilters().map((r=>T$(r)));return i.length===1?i[0]:{compositeFilter:{op:Rde(n.op),filters:i}}})(e):hi(54877,{filter:e})}function Lde(e){const t=[];return e.fields.forEach((n=>t.push(n.canonicalString()))),{fieldPaths:t}}function S$(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf{constructor(t,n,i,r,a=_i.min(),l=_i.min(),h=oa.EMPTY_BYTE_STRING,s=null){this.target=t,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h,this.expectedCount=s}withSequenceNumber(t){return new Pf(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Pf(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Pf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Pf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ode{constructor(t){this.yt=t}}function Vde(e){const t=Ade({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?Dk(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bde{constructor(){this.Cn=new Fde}addToCollectionParentIndex(t,n){return this.Cn.add(n),tn.resolve()}getCollectionParents(t,n){return tn.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return tn.resolve()}deleteFieldIndex(t,n){return tn.resolve()}deleteAllFieldIndexes(t){return tn.resolve()}createTargetIndexes(t,n){return tn.resolve()}getDocumentsMatchingTarget(t,n){return tn.resolve(null)}getIndexType(t,n){return tn.resolve(0)}getFieldIndexes(t,n){return tn.resolve([])}getNextCollectionGroupToUpdate(t){return tn.resolve(null)}getMinOffset(t,n){return tn.resolve(Yf.min())}getMinOffsetFromCollectionGroup(t,n){return tn.resolve(Yf.min())}updateCollectionGroup(t,n,i){return tn.resolve()}updateIndexEntries(t,n){return tn.resolve()}}class Fde{constructor(){this.index={}}add(t){const n=t.lastSegment(),i=t.popLast(),r=this.index[n]||new go(_s.comparator),a=!r.has(i);return this.index[n]=r.add(i),a}has(t){const n=t.lastSegment(),i=t.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(t){return(this.index[t]||new go(_s.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _F={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},E$=41943040;class Tl{static withCacheSize(t){return new Tl(t,Tl.DEFAULT_COLLECTION_PERCENTILE,Tl.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Tl.DEFAULT_COLLECTION_PERCENTILE=10,Tl.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Tl.DEFAULT=new Tl(E$,Tl.DEFAULT_COLLECTION_PERCENTILE,Tl.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Tl.DISABLED=new Tl(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new ev(0)}static cr(){return new ev(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vF="LruGarbageCollector",zde=1048576;function yF([e,t],[n,i]){const r=Oi(e,n);return r===0?Oi(t,i):r}class Nde{constructor(t){this.Ir=t,this.buffer=new go(yF),this.Er=0}dr(){return++this.Er}Ar(t){const n=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();yF(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Ude{constructor(t,n,i){this.garbageCollector=t,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){Rn(vF,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){pv(n)?Rn(vF,"Ignoring IndexedDB error during garbage collection: ",n):await mv(n)}await this.Vr(3e5)}))}}class $de{constructor(t,n){this.mr=t,this.params=n}calculateTargetCount(t,n){return this.mr.gr(t).next((i=>Math.floor(n/100*i)))}nthSequenceNumber(t,n){if(n===0)return tn.resolve(bT.ce);const i=new Nde(n);return this.mr.forEachTarget(t,(r=>i.Ar(r.sequenceNumber))).next((()=>this.mr.pr(t,(r=>i.Ar(r))))).next((()=>i.maxValue))}removeTargets(t,n,i){return this.mr.removeTargets(t,n,i)}removeOrphanedDocuments(t,n){return this.mr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(Rn("LruGarbageCollector","Garbage collection skipped; disabled"),tn.resolve(_F)):this.getCacheSize(t).next((i=>i<this.params.cacheSizeCollectionThreshold?(Rn("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),_F):this.yr(t,n)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,n){let i,r,a,l,h,s,p;const v=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((x=>(x>this.params.maximumSequenceNumbersToCollect?(Rn("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),r=this.params.maximumSequenceNumbersToCollect):r=x,l=Date.now(),this.nthSequenceNumber(t,r)))).next((x=>(i=x,h=Date.now(),this.removeTargets(t,i,n)))).next((x=>(a=x,s=Date.now(),this.removeOrphanedDocuments(t,i)))).next((x=>(p=Date.now(),a_()<=Li.DEBUG&&Rn("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-v}ms
	Determined least recently used ${r} in `+(h-l)+`ms
	Removed ${a} targets in `+(s-h)+`ms
	Removed ${x} documents in `+(p-s)+`ms
Total Duration: ${p-v}ms`),tn.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:a,documentsRemoved:x}))))}}function jde(e,t){return new $de(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wde{constructor(){this.changes=new lg((t=>t.toString()),((t,n)=>t.isEqual(n))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,Pa.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?tn.resolve(i):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hde{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gde{constructor(t,n,i,r){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(t,n){let i=null;return this.documentOverlayCache.getOverlay(t,n).next((r=>(i=r,this.remoteDocumentCache.getEntry(t,n)))).next((r=>(i!==null&&nb(i.mutation,r,nc.empty(),Xr.now()),r)))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next((i=>this.getLocalViewOfDocuments(t,i,Vi()).next((()=>i))))}getLocalViewOfDocuments(t,n,i=Vi()){const r=gp();return this.populateOverlays(t,r,n).next((()=>this.computeViews(t,n,r,i).next((a=>{let l=Dy();return a.forEach(((h,s)=>{l=l.insert(h,s.overlayedDocument)})),l}))))}getOverlayedDocuments(t,n){const i=gp();return this.populateOverlays(t,i,n).next((()=>this.computeViews(t,n,i,Vi())))}populateOverlays(t,n,i){const r=[];return i.forEach((a=>{n.has(a)||r.push(a)})),this.documentOverlayCache.getOverlays(t,r).next((a=>{a.forEach(((l,h)=>{n.set(l,h)}))}))}computeViews(t,n,i,r){let a=xh();const l=tb(),h=(function(){return tb()})();return n.forEach(((s,p)=>{const v=i.get(p.key);r.has(p.key)&&(v===void 0||v.mutation instanceof dm)?a=a.insert(p.key,p):v!==void 0?(l.set(p.key,v.mutation.getFieldMask()),nb(v.mutation,p,v.mutation.getFieldMask(),Xr.now())):l.set(p.key,nc.empty())})),this.recalculateAndSaveOverlays(t,a).next((s=>(s.forEach(((p,v)=>l.set(p,v))),n.forEach(((p,v)=>h.set(p,new Hde(v,l.get(p)??null)))),h)))}recalculateAndSaveOverlays(t,n){const i=tb();let r=new ys(((l,h)=>l-h)),a=Vi();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next((l=>{for(const h of l)h.keys().forEach((s=>{const p=n.get(s);if(p===null)return;let v=i.get(s)||nc.empty();v=h.applyToLocalView(p,v),i.set(s,v);const x=(r.get(h.batchId)||Vi()).add(s);r=r.insert(h.batchId,x)}))})).next((()=>{const l=[],h=r.getReverseIterator();for(;h.hasNext();){const s=h.getNext(),p=s.key,v=s.value,x=a$();v.forEach((T=>{if(!a.has(T)){const k=f$(n.get(T),i.get(T));k!==null&&x.set(T,k),a=a.add(T)}})),l.push(this.documentOverlayCache.saveOverlays(t,p,x))}return tn.waitFor(l)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next((i=>this.recalculateAndSaveOverlays(t,i)))}getDocumentsMatchingQuery(t,n,i,r){return(function(l){return ei.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):que(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,i,r):this.getDocumentsMatchingCollectionQuery(t,n,i,r)}getNextDocuments(t,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,i,r).next((a=>{const l=r-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,i.largestBatchId,r-a.size):tn.resolve(gp());let h=Wb,s=a;return l.next((p=>tn.forEach(p,((v,x)=>(h<x.largestBatchId&&(h=x.largestBatchId),a.get(v)?tn.resolve():this.remoteDocumentCache.getEntry(t,v).next((T=>{s=s.insert(v,T)}))))).next((()=>this.populateOverlays(t,p,a))).next((()=>this.computeViews(t,s,p,Vi()))).next((v=>({batchId:h,changes:o$(v)})))))}))}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new ei(n)).next((i=>{let r=Dy();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r}))}getDocumentsMatchingCollectionGroupQuery(t,n,i,r){const a=n.collectionGroup;let l=Dy();return this.indexManager.getCollectionParents(t,a).next((h=>tn.forEach(h,(s=>{const p=(function(x,T){return new TT(T,null,x.explicitOrderBy.slice(),x.filters.slice(),x.limit,x.limitType,x.startAt,x.endAt)})(n,s.child(a));return this.getDocumentsMatchingCollectionQuery(t,p,i,r).next((v=>{v.forEach(((x,T)=>{l=l.insert(x,T)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(t,n,i,r){let a;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,i.largestBatchId).next((l=>(a=l,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,i,a,r)))).next((l=>{a.forEach(((s,p)=>{const v=p.getKey();l.get(v)===null&&(l=l.insert(v,Pa.newInvalidDocument(v)))}));let h=Dy();return l.forEach(((s,p)=>{const v=a.get(s);v!==void 0&&nb(v.mutation,p,nc.empty(),Xr.now()),ET(n,p)&&(h=h.insert(s,p))})),h}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qde{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,n){return tn.resolve(this.Lr.get(n))}saveBundleMetadata(t,n){return this.Lr.set(n.id,(function(r){return{id:r.id,version:r.version,createTime:Yu(r.createTime)}})(n)),tn.resolve()}getNamedQuery(t,n){return tn.resolve(this.kr.get(n))}saveNamedQuery(t,n){return this.kr.set(n.name,(function(r){return{name:r.name,query:Vde(r.bundledQuery),readTime:Yu(r.readTime)}})(n)),tn.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kde{constructor(){this.overlays=new ys(ei.comparator),this.qr=new Map}getOverlay(t,n){return tn.resolve(this.overlays.get(n))}getOverlays(t,n){const i=gp();return tn.forEach(n,(r=>this.getOverlay(t,r).next((a=>{a!==null&&i.set(r,a)})))).next((()=>i))}saveOverlays(t,n,i){return i.forEach(((r,a)=>{this.St(t,n,a)})),tn.resolve()}removeOverlaysForBatchId(t,n,i){const r=this.qr.get(i);return r!==void 0&&(r.forEach((a=>this.overlays=this.overlays.remove(a))),this.qr.delete(i)),tn.resolve()}getOverlaysForCollection(t,n,i){const r=gp(),a=n.length+1,l=new ei(n.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const s=h.getNext().value,p=s.getKey();if(!n.isPrefixOf(p.path))break;p.path.length===a&&s.largestBatchId>i&&r.set(s.getKey(),s)}return tn.resolve(r)}getOverlaysForCollectionGroup(t,n,i,r){let a=new ys(((p,v)=>p-v));const l=this.overlays.getIterator();for(;l.hasNext();){const p=l.getNext().value;if(p.getKey().getCollectionGroup()===n&&p.largestBatchId>i){let v=a.get(p.largestBatchId);v===null&&(v=gp(),a=a.insert(p.largestBatchId,v)),v.set(p.getKey(),p)}}const h=gp(),s=a.getIterator();for(;s.hasNext()&&(s.getNext().value.forEach(((p,v)=>h.set(p,v))),!(h.size()>=r)););return tn.resolve(h)}St(t,n,i){const r=this.overlays.get(i.key);if(r!==null){const l=this.qr.get(r.largestBatchId).delete(i.key);this.qr.set(r.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new hde(n,i));let a=this.qr.get(n);a===void 0&&(a=Vi(),this.qr.set(n,a)),this.qr.set(n,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xde{constructor(){this.sessionToken=oa.EMPTY_BYTE_STRING}getSessionToken(t){return tn.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,tn.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wP{constructor(){this.Qr=new go(Lo.$r),this.Ur=new go(Lo.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,n){const i=new Lo(t,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(t,n){t.forEach((i=>this.addReference(i,n)))}removeReference(t,n){this.Gr(new Lo(t,n))}zr(t,n){t.forEach((i=>this.removeReference(i,n)))}jr(t){const n=new ei(new _s([])),i=new Lo(n,t),r=new Lo(n,t+1),a=[];return this.Ur.forEachInRange([i,r],(l=>{this.Gr(l),a.push(l.key)})),a}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const n=new ei(new _s([])),i=new Lo(n,t),r=new Lo(n,t+1);let a=Vi();return this.Ur.forEachInRange([i,r],(l=>{a=a.add(l.key)})),a}containsKey(t){const n=new Lo(t,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&t.isEqual(i.key)}}class Lo{constructor(t,n){this.key=t,this.Yr=n}static $r(t,n){return ei.comparator(t.key,n.key)||Oi(t.Yr,n.Yr)}static Kr(t,n){return Oi(t.Yr,n.Yr)||ei.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zde{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new go(Lo.$r)}checkEmpty(t){return tn.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,i,r){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new dde(a,n,i,r);this.mutationQueue.push(l);for(const h of r)this.Zr=this.Zr.add(new Lo(h.key,a)),this.indexManager.addToCollectionParentIndex(t,h.key.path.popLast());return tn.resolve(l)}lookupMutationBatch(t,n){return tn.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(t,n){const i=n+1,r=this.ei(i),a=r<0?0:r;return tn.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return tn.resolve(this.mutationQueue.length===0?dP:this.tr-1)}getAllMutationBatches(t){return tn.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const i=new Lo(n,0),r=new Lo(n,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([i,r],(l=>{const h=this.Xr(l.Yr);a.push(h)})),tn.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(t,n){let i=new go(Oi);return n.forEach((r=>{const a=new Lo(r,0),l=new Lo(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,l],(h=>{i=i.add(h.Yr)}))})),tn.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(t,n){const i=n.path,r=i.length+1;let a=i;ei.isDocumentKey(a)||(a=a.child(""));const l=new Lo(new ei(a),0);let h=new go(Oi);return this.Zr.forEachWhile((s=>{const p=s.key.path;return!!i.isPrefixOf(p)&&(p.length===r&&(h=h.add(s.Yr)),!0)}),l),tn.resolve(this.ti(h))}ti(t){const n=[];return t.forEach((i=>{const r=this.Xr(i);r!==null&&n.push(r)})),n}removeMutationBatch(t,n){Er(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return tn.forEach(n.mutations,(r=>{const a=new Lo(r.key,n.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)})).next((()=>{this.Zr=i}))}ir(t){}containsKey(t,n){const i=new Lo(n,0),r=this.Zr.firstAfterOrEqual(i);return tn.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,tn.resolve()}ni(t,n){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const n=this.ei(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yde{constructor(t){this.ri=t,this.docs=(function(){return new ys(ei.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const i=n.key,r=this.docs.get(i),a=r?r.size:0,l=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const i=this.docs.get(n);return tn.resolve(i?i.document.mutableCopy():Pa.newInvalidDocument(n))}getEntries(t,n){let i=xh();return n.forEach((r=>{const a=this.docs.get(r);i=i.insert(r,a?a.document.mutableCopy():Pa.newInvalidDocument(r))})),tn.resolve(i)}getDocumentsMatchingQuery(t,n,i,r){let a=xh();const l=n.path,h=new ei(l.child("__id-9223372036854775808__")),s=this.docs.getIteratorFrom(h);for(;s.hasNext();){const{key:p,value:{document:v}}=s.getNext();if(!l.isPrefixOf(p.path))break;p.path.length>l.length+1||Sue(Tue(v),i)<=0||(r.has(v.key)||ET(n,v))&&(a=a.insert(v.key,v.mutableCopy()))}return tn.resolve(a)}getAllFromCollectionGroup(t,n,i,r){hi(9500)}ii(t,n){return tn.forEach(this.docs,(i=>n(i)))}newChangeBuffer(t){return new Jde(this)}getSize(t){return tn.resolve(this.size)}}class Jde extends Wde{constructor(t){super(),this.Nr=t}applyChanges(t){const n=[];return this.changes.forEach(((i,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(t,r)):this.Nr.removeEntry(i)})),tn.waitFor(n)}getFromCache(t,n){return this.Nr.getEntry(t,n)}getAllFromCache(t,n){return this.Nr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qde{constructor(t){this.persistence=t,this.si=new lg((n=>mP(n)),pP),this.lastRemoteSnapshotVersion=_i.min(),this.highestTargetId=0,this.oi=0,this._i=new wP,this.targetCount=0,this.ai=ev.ur()}forEachTarget(t,n){return this.si.forEach(((i,r)=>n(r))),tn.resolve()}getLastRemoteSnapshotVersion(t){return tn.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return tn.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),tn.resolve(this.highestTargetId)}setTargetsMetadata(t,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),tn.resolve()}Pr(t){this.si.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ai=new ev(n),this.highestTargetId=n),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,n){return this.Pr(n),this.targetCount+=1,tn.resolve()}updateTargetData(t,n){return this.Pr(n),tn.resolve()}removeTargetData(t,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,tn.resolve()}removeTargets(t,n,i){let r=0;const a=[];return this.si.forEach(((l,h)=>{h.sequenceNumber<=n&&i.get(h.targetId)===null&&(this.si.delete(l),a.push(this.removeMatchingKeysForTargetId(t,h.targetId)),r++)})),tn.waitFor(a).next((()=>r))}getTargetCount(t){return tn.resolve(this.targetCount)}getTargetData(t,n){const i=this.si.get(n)||null;return tn.resolve(i)}addMatchingKeys(t,n,i){return this._i.Wr(n,i),tn.resolve()}removeMatchingKeys(t,n,i){this._i.zr(n,i);const r=this.persistence.referenceDelegate,a=[];return r&&n.forEach((l=>{a.push(r.markPotentiallyOrphaned(t,l))})),tn.waitFor(a)}removeMatchingKeysForTargetId(t,n){return this._i.jr(n),tn.resolve()}getMatchingKeysForTargetId(t,n){const i=this._i.Hr(n);return tn.resolve(i)}containsKey(t,n){return tn.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C${constructor(t,n){this.ui={},this.overlays={},this.ci=new bT(0),this.li=!1,this.li=!0,this.hi=new Xde,this.referenceDelegate=t(this),this.Pi=new Qde(this),this.indexManager=new Bde,this.remoteDocumentCache=(function(r){return new Yde(r)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new Ode(n),this.Ii=new qde(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new Kde,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let i=this.ui[t.toKey()];return i||(i=new Zde(n,this.referenceDelegate),this.ui[t.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,n,i){Rn("MemoryPersistence","Starting transaction:",t);const r=new ehe(this.ci.next());return this.referenceDelegate.Ei(),i(r).next((a=>this.referenceDelegate.di(r).next((()=>a)))).toPromise().then((a=>(r.raiseOnCommittedEvent(),a)))}Ai(t,n){return tn.or(Object.values(this.ui).map((i=>()=>i.containsKey(t,n))))}}class ehe extends Cue{constructor(t){super(),this.currentSequenceNumber=t}}class TP{constructor(t){this.persistence=t,this.Ri=new wP,this.Vi=null}static mi(t){return new TP(t)}get fi(){if(this.Vi)return this.Vi;throw hi(60996)}addReference(t,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),tn.resolve()}removeReference(t,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),tn.resolve()}markPotentiallyOrphaned(t,n){return this.fi.add(n.toString()),tn.resolve()}removeTarget(t,n){this.Ri.jr(n.targetId).forEach((r=>this.fi.add(r.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,n.targetId).next((r=>{r.forEach((a=>this.fi.add(a.toString())))})).next((()=>i.removeTargetData(t,n)))}Ei(){this.Vi=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return tn.forEach(this.fi,(i=>{const r=ei.fromPath(i);return this.gi(t,r).next((a=>{a||n.removeEntry(r,_i.min())}))})).next((()=>(this.Vi=null,n.apply(t))))}updateLimboDocument(t,n){return this.gi(t,n).next((i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(t){return 0}gi(t,n){return tn.or([()=>tn.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ai(t,n)])}}class k1{constructor(t,n){this.persistence=t,this.pi=new lg((i=>Aue(i.path)),((i,r)=>i.isEqual(r))),this.garbageCollector=jde(this,n)}static mi(t,n){return new k1(t,n)}Ei(){}di(t){return tn.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}gr(t){const n=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((i=>n.next((r=>i+r))))}wr(t){let n=0;return this.pr(t,(i=>{n++})).next((()=>n))}pr(t,n){return tn.forEach(this.pi,((i,r)=>this.br(t,i,r).next((a=>a?tn.resolve():n(r)))))}removeTargets(t,n,i){return this.persistence.getTargetCache().removeTargets(t,n,i)}removeOrphanedDocuments(t,n){let i=0;const r=this.persistence.getRemoteDocumentCache(),a=r.newChangeBuffer();return r.ii(t,(l=>this.br(t,l,n).next((h=>{h||(i++,a.removeEntry(l,_i.min()))})))).next((()=>a.apply(t))).next((()=>i))}markPotentiallyOrphaned(t,n){return this.pi.set(n,t.currentSequenceNumber),tn.resolve()}removeTarget(t,n){const i=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,n,i){return this.pi.set(i,t.currentSequenceNumber),tn.resolve()}removeReference(t,n,i){return this.pi.set(i,t.currentSequenceNumber),tn.resolve()}updateLimboDocument(t,n){return this.pi.set(n,t.currentSequenceNumber),tn.resolve()}Ti(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=_w(t.data.value)),n}br(t,n,i){return tn.or([()=>this.persistence.Ai(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const r=this.pi.get(n);return tn.resolve(r!==void 0&&r>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SP{constructor(t,n,i,r){this.targetId=t,this.fromCache=n,this.Es=i,this.ds=r}static As(t,n){let i=Vi(),r=Vi();for(const a of n.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:r=r.add(a.doc.key)}return new SP(t,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class the{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nhe{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Eoe()?8:kue(Ua())>0?6:4})()}initialize(t,n){this.ps=t,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(t,n,i,r){const a={result:null};return this.ys(t,n).next((l=>{a.result=l})).next((()=>{if(!a.result)return this.ws(t,n,r,i).next((l=>{a.result=l}))})).next((()=>{if(a.result)return;const l=new the;return this.Ss(t,n,l).next((h=>{if(a.result=h,this.Vs)return this.bs(t,n,l,h.size)}))})).next((()=>a.result))}bs(t,n,i,r){return i.documentReadCount<this.fs?(a_()<=Li.DEBUG&&Rn("QueryEngine","SDK will not create cache indexes for query:",l_(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),tn.resolve()):(a_()<=Li.DEBUG&&Rn("QueryEngine","Query:",l_(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.gs*r?(a_()<=Li.DEBUG&&Rn("QueryEngine","The SDK decides to create cache indexes for query:",l_(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Zu(n))):tn.resolve())}ys(t,n){if(aF(n))return tn.resolve(null);let i=Zu(n);return this.indexManager.getIndexType(t,i).next((r=>r===0?null:(n.limit!==null&&r===1&&(n=Dk(n,null,"F"),i=Zu(n)),this.indexManager.getDocumentsMatchingTarget(t,i).next((a=>{const l=Vi(...a);return this.ps.getDocuments(t,l).next((h=>this.indexManager.getMinOffset(t,i).next((s=>{const p=this.Ds(n,h);return this.Cs(n,p,l,s.readTime)?this.ys(t,Dk(n,null,"F")):this.vs(t,p,n,s)}))))})))))}ws(t,n,i,r){return aF(n)||r.isEqual(_i.min())?tn.resolve(null):this.ps.getDocuments(t,i).next((a=>{const l=this.Ds(n,a);return this.Cs(n,l,i,r)?tn.resolve(null):(a_()<=Li.DEBUG&&Rn("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),l_(n)),this.vs(t,l,n,wue(r,Wb)).next((h=>h)))}))}Ds(t,n){let i=new go(r$(t));return n.forEach(((r,a)=>{ET(t,a)&&(i=i.add(a))})),i}Cs(t,n,i,r){if(t.limit===null)return!1;if(i.size!==n.size)return!0;const a=t.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(r)>0)}Ss(t,n,i){return a_()<=Li.DEBUG&&Rn("QueryEngine","Using full collection scan to execute query:",l_(n)),this.ps.getDocumentsMatchingQuery(t,n,Yf.min(),i)}vs(t,n,i,r){return this.ps.getDocumentsMatchingQuery(t,i,r).next((a=>(n.forEach((l=>{a=a.insert(l.key,l)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EP="LocalStore",ihe=3e8;class rhe{constructor(t,n,i,r){this.persistence=t,this.Fs=n,this.serializer=r,this.Ms=new ys(Oi),this.xs=new lg((a=>mP(a)),pP),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(i)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Gde(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>t.collect(n,this.Ms)))}}function she(e,t,n,i){return new rhe(e,t,n,i)}async function k$(e,t){const n=bi(e);return await n.persistence.runTransaction("Handle user change","readonly",(i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next((a=>(r=a,n.Bs(t),n.mutationQueue.getAllMutationBatches(i)))).next((a=>{const l=[],h=[];let s=Vi();for(const p of r){l.push(p.batchId);for(const v of p.mutations)s=s.add(v.key)}for(const p of a){h.push(p.batchId);for(const v of p.mutations)s=s.add(v.key)}return n.localDocuments.getDocuments(i,s).next((p=>({Ls:p,removedBatchIds:l,addedBatchIds:h})))}))}))}function ohe(e,t){const n=bi(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const r=t.batch.keys(),a=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(h,s,p,v){const x=p.batch,T=x.keys();let k=tn.resolve();return T.forEach((P=>{k=k.next((()=>v.getEntry(s,P))).next((M=>{const L=p.docVersions.get(P);Er(L!==null,48541),M.version.compareTo(L)<0&&(x.applyToRemoteDocument(M,p),M.isValidDocument()&&(M.setReadTime(p.commitVersion),v.addEntry(M)))}))})),k.next((()=>h.mutationQueue.removeMutationBatch(s,x)))})(n,i,t,a).next((()=>a.apply(i))).next((()=>n.mutationQueue.performConsistencyCheck(i))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(h){let s=Vi();for(let p=0;p<h.mutationResults.length;++p)h.mutationResults[p].transformResults.length>0&&(s=s.add(h.batch.mutations[p].key));return s})(t)))).next((()=>n.localDocuments.getDocuments(i,r)))}))}function I$(e){const t=bi(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>t.Pi.getLastRemoteSnapshotVersion(n)))}function ahe(e,t){const n=bi(e),i=t.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const l=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const h=[];t.targetChanges.forEach(((v,x)=>{const T=r.get(x);if(!T)return;h.push(n.Pi.removeMatchingKeys(a,v.removedDocuments,x).next((()=>n.Pi.addMatchingKeys(a,v.addedDocuments,x))));let k=T.withSequenceNumber(a.currentSequenceNumber);t.targetMismatches.get(x)!==null?k=k.withResumeToken(oa.EMPTY_BYTE_STRING,_i.min()).withLastLimboFreeSnapshotVersion(_i.min()):v.resumeToken.approximateByteSize()>0&&(k=k.withResumeToken(v.resumeToken,i)),r=r.insert(x,k),(function(M,L,B){return M.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=ihe?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0})(T,k,v)&&h.push(n.Pi.updateTargetData(a,k))}));let s=xh(),p=Vi();if(t.documentUpdates.forEach((v=>{t.resolvedLimboDocuments.has(v)&&h.push(n.persistence.referenceDelegate.updateLimboDocument(a,v))})),h.push(lhe(a,l,t.documentUpdates).next((v=>{s=v.ks,p=v.qs}))),!i.isEqual(_i.min())){const v=n.Pi.getLastRemoteSnapshotVersion(a).next((x=>n.Pi.setTargetsMetadata(a,a.currentSequenceNumber,i)));h.push(v)}return tn.waitFor(h).next((()=>l.apply(a))).next((()=>n.localDocuments.getLocalViewOfDocuments(a,s,p))).next((()=>s))})).then((a=>(n.Ms=r,a)))}function lhe(e,t,n){let i=Vi(),r=Vi();return n.forEach((a=>i=i.add(a))),t.getEntries(e,i).next((a=>{let l=xh();return n.forEach(((h,s)=>{const p=a.get(h);s.isFoundDocument()!==p.isFoundDocument()&&(r=r.add(h)),s.isNoDocument()&&s.version.isEqual(_i.min())?(t.removeEntry(h,s.readTime),l=l.insert(h,s)):!p.isValidDocument()||s.version.compareTo(p.version)>0||s.version.compareTo(p.version)===0&&p.hasPendingWrites?(t.addEntry(s),l=l.insert(h,s)):Rn(EP,"Ignoring outdated watch update for ",h,". Current version:",p.version," Watch version:",s.version)})),{ks:l,qs:r}}))}function che(e,t){const n=bi(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(i=>(t===void 0&&(t=dP),n.mutationQueue.getNextMutationBatchAfterBatchId(i,t))))}function uhe(e,t){const n=bi(e);return n.persistence.runTransaction("Allocate target","readwrite",(i=>{let r;return n.Pi.getTargetData(i,t).next((a=>a?(r=a,tn.resolve(r)):n.Pi.allocateTargetId(i).next((l=>(r=new Pf(t,l,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,r).next((()=>r)))))))})).then((i=>{const r=n.Ms.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(t,i.targetId)),i}))}async function Bk(e,t,n){const i=bi(e),r=i.Ms.get(t),a=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",a,(l=>i.persistence.referenceDelegate.removeTarget(l,r)))}catch(l){if(!pv(l))throw l;Rn(EP,`Failed to update sequence numbers for target ${t}: ${l}`)}i.Ms=i.Ms.remove(t),i.xs.delete(r.target)}function bF(e,t,n){const i=bi(e);let r=_i.min(),a=Vi();return i.persistence.runTransaction("Execute query","readwrite",(l=>(function(s,p,v){const x=bi(s),T=x.xs.get(v);return T!==void 0?tn.resolve(x.Ms.get(T)):x.Pi.getTargetData(p,v)})(i,l,Zu(t)).next((h=>{if(h)return r=h.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(l,h.targetId).next((s=>{a=s}))})).next((()=>i.Fs.getDocumentsMatchingQuery(l,t,n?r:_i.min(),n?a:Vi()))).next((h=>(dhe(i,Xue(t),h),{documents:h,Qs:a})))))}function dhe(e,t,n){let i=e.Os.get(t)||_i.min();n.forEach(((r,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)})),e.Os.set(t,i)}class xF{constructor(){this.activeTargetIds=tde()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class hhe{constructor(){this.Mo=new xF,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,i){}addLocalQueryTarget(t,n=!0){return n&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,n,i){this.xo[t]=n}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new xF,Promise.resolve()}handleUserChange(t,n,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fhe{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wF="ConnectivityMonitor";class TF{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Rn(wF,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){Rn(wF,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zx=null;function Fk(){return Zx===null?Zx=(function(){return 268435456+Math.round(2147483648*Math.random())})():Zx++,"0x"+Zx.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cC="RestConnection",mhe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class phe{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+t.host,this.Ko=`projects/${i}/databases/${r}`,this.Wo=this.databaseId.database===b1?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Go(t,n,i,r,a){const l=Fk(),h=this.zo(t,n.toUriEncodedString());Rn(cC,`Sending RPC '${t}' ${l}:`,h,i);const s={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(s,r,a);const{host:p}=new URL(h),v=dv(p);return this.Jo(t,h,s,i,v).then((x=>(Rn(cC,`Received RPC '${t}' ${l}: `,x),x)),(x=>{throw X_(cC,`RPC '${t}' ${l} failed with error: `,x,"url: ",h,"request:",i),x}))}Ho(t,n,i,r,a,l){return this.Go(t,n,i,r,a)}jo(t,n,i){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+fv})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((r,a)=>t[a]=r)),i&&i.headers.forEach(((r,a)=>t[a]=r))}zo(t,n){const i=mhe[t];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ghe{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sa="WebChannelConnection";class _he extends phe{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,i,r,a){const l=Fk();return new Promise(((h,s)=>{const p=new RU;p.setWithCredentials(!0),p.listenOnce(LU.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case gw.NO_ERROR:const x=p.getResponseJson();Rn(Sa,`XHR for RPC '${t}' ${l} received:`,JSON.stringify(x)),h(x);break;case gw.TIMEOUT:Rn(Sa,`RPC '${t}' ${l} timed out`),s(new $n(un.DEADLINE_EXCEEDED,"Request time out"));break;case gw.HTTP_ERROR:const T=p.getStatus();if(Rn(Sa,`RPC '${t}' ${l} failed with status:`,T,"response text:",p.getResponseText()),T>0){let k=p.getResponseJson();Array.isArray(k)&&(k=k[0]);const P=k?.error;if(P&&P.status&&P.message){const M=(function(B){const F=B.toLowerCase().replace(/_/g,"-");return Object.values(un).indexOf(F)>=0?F:un.UNKNOWN})(P.status);s(new $n(M,P.message))}else s(new $n(un.UNKNOWN,"Server responded with status "+p.getStatus()))}else s(new $n(un.UNAVAILABLE,"Connection failed."));break;default:hi(9055,{l_:t,streamId:l,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{Rn(Sa,`RPC '${t}' ${l} completed.`)}}));const v=JSON.stringify(r);Rn(Sa,`RPC '${t}' ${l} sending request:`,r),p.send(n,"POST",v,i,15)}))}T_(t,n,i){const r=Fk(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],l=BU(),h=VU(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(s.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(s.useFetchStreams=!0),this.jo(s.initMessageHeaders,n,i),s.encodeInitMessageHeaders=!0;const v=a.join("");Rn(Sa,`Creating RPC '${t}' stream ${r}: ${v}`,s);const x=l.createWebChannel(v,s);this.I_(x);let T=!1,k=!1;const P=new ghe({Yo:L=>{k?Rn(Sa,`Not sending because RPC '${t}' stream ${r} is closed:`,L):(T||(Rn(Sa,`Opening RPC '${t}' stream ${r} transport.`),x.open(),T=!0),Rn(Sa,`RPC '${t}' stream ${r} sending:`,L),x.send(L))},Zo:()=>x.close()}),M=(L,B,F)=>{L.listen(B,(X=>{try{F(X)}catch(J){setTimeout((()=>{throw J}),0)}}))};return M(x,My.EventType.OPEN,(()=>{k||(Rn(Sa,`RPC '${t}' stream ${r} transport opened.`),P.o_())})),M(x,My.EventType.CLOSE,(()=>{k||(k=!0,Rn(Sa,`RPC '${t}' stream ${r} transport closed`),P.a_(),this.E_(x))})),M(x,My.EventType.ERROR,(L=>{k||(k=!0,X_(Sa,`RPC '${t}' stream ${r} transport errored. Name:`,L.name,"Message:",L.message),P.a_(new $n(un.UNAVAILABLE,"The operation could not be completed")))})),M(x,My.EventType.MESSAGE,(L=>{if(!k){const B=L.data[0];Er(!!B,16349);const F=B,X=F?.error||F[0]?.error;if(X){Rn(Sa,`RPC '${t}' stream ${r} received error:`,X);const J=X.status;let Q=(function($){const H=Js[$];if(H!==void 0)return p$(H)})(J),re=X.message;Q===void 0&&(Q=un.INTERNAL,re="Unknown error status: "+J+" with message "+X.message),k=!0,P.a_(new $n(Q,re)),x.close()}else Rn(Sa,`RPC '${t}' stream ${r} received:`,B),P.u_(B)}})),M(h,OU.STAT_EVENT,(L=>{L.stat===Ck.PROXY?Rn(Sa,`RPC '${t}' stream ${r} detected buffering proxy`):L.stat===Ck.NOPROXY&&Rn(Sa,`RPC '${t}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{P.__()}),0),P}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((n=>n===t))}}function uC(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AT(e){return new xde(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A${constructor(t,n,i=1e3,r=1.5,a=6e4){this.Mi=t,this.timerId=n,this.d_=i,this.A_=r,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-i);r>0&&Rn("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SF="PersistentStream";class P${constructor(t,n,i,r,a,l,h,s){this.Mi=t,this.S_=i,this.b_=r,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=s,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new A$(t,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():n&&n.code===un.RESOURCE_EXHAUSTED?(bh(n.toString()),bh("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===un.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(n)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,r])=>{this.D_===n&&this.G_(i,r)}),(i=>{t((()=>{const r=new $n(un.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(r)}))}))}G_(t,n){const i=this.W_(this.D_);this.stream=this.j_(t,n),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((r=>{i((()=>this.z_(r)))})),this.stream.onMessage((r=>{i((()=>++this.F_==1?this.J_(r):this.onNext(r)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return Rn(SF,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return n=>{this.Mi.enqueueAndForget((()=>this.D_===t?n():(Rn(SF,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class vhe extends P${constructor(t,n,i,r,a,l){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,l),this.serializer=a}j_(t,n){return this.connection.T_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const n=Sde(this.serializer,t),i=(function(a){if(!("targetChange"in a))return _i.min();const l=a.targetChange;return l.targetIds&&l.targetIds.length?_i.min():l.readTime?Yu(l.readTime):_i.min()})(t);return this.listener.H_(n,i)}Y_(t){const n={};n.database=Vk(this.serializer),n.addTarget=(function(a,l){let h;const s=l.target;if(h=Mk(s)?{documents:kde(a,s)}:{query:Ide(a,s).ft},h.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){h.resumeToken=v$(a,l.resumeToken);const p=Rk(a,l.expectedCount);p!==null&&(h.expectedCount=p)}else if(l.snapshotVersion.compareTo(_i.min())>0){h.readTime=C1(a,l.snapshotVersion.toTimestamp());const p=Rk(a,l.expectedCount);p!==null&&(h.expectedCount=p)}return h})(this.serializer,t);const i=Pde(this.serializer,t);i&&(n.labels=i),this.q_(n)}Z_(t){const n={};n.database=Vk(this.serializer),n.removeTarget=t,this.q_(n)}}class yhe extends P${constructor(t,n,i,r,a,l){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,l),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,n){return this.connection.T_("Write",t,n)}J_(t){return Er(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Er(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){Er(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const n=Cde(t.writeResults,t.commitTime),i=Yu(t.commitTime);return this.listener.na(i,n)}ra(){const t={};t.database=Vk(this.serializer),this.q_(t)}ea(t){const n={streamToken:this.lastStreamToken,writes:t.map((i=>Ede(this.serializer,i)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bhe{}class xhe extends bhe{constructor(t,n,i,r){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new $n(un.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,n,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,l])=>this.connection.Go(t,Lk(n,i),r,a,l))).catch((a=>{throw a.name==="FirebaseError"?(a.code===un.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new $n(un.UNKNOWN,a.toString())}))}Ho(t,n,i,r,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,h])=>this.connection.Ho(t,Lk(n,i),r,l,h,a))).catch((l=>{throw l.name==="FirebaseError"?(l.code===un.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new $n(un.UNKNOWN,l.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class whe{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(bh(n),this.aa=!1):Rn("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jp="RemoteStore";class The{constructor(t,n,i,r,a){this.localStore=t,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo((l=>{i.enqueueAndForget((async()=>{cg(this)&&(Rn(jp,"Restarting streams for network reachability change."),await(async function(s){const p=bi(s);p.Ea.add(4),await A0(p),p.Ra.set("Unknown"),p.Ea.delete(4),await PT(p)})(this))}))})),this.Ra=new whe(i,r)}}async function PT(e){if(cg(e))for(const t of e.da)await t(!0)}async function A0(e){for(const t of e.da)await t(!1)}function M$(e,t){const n=bi(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),AP(n)?IP(n):gv(n).O_()&&kP(n,t))}function CP(e,t){const n=bi(e),i=gv(n);n.Ia.delete(t),i.O_()&&D$(n,t),n.Ia.size===0&&(i.O_()?i.L_():cg(n)&&n.Ra.set("Unknown"))}function kP(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(_i.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}gv(e).Y_(t)}function D$(e,t){e.Va.Ue(t),gv(e).Z_(t)}function IP(e){e.Va=new _de({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),gv(e).start(),e.Ra.ua()}function AP(e){return cg(e)&&!gv(e).x_()&&e.Ia.size>0}function cg(e){return bi(e).Ea.size===0}function R$(e){e.Va=void 0}async function She(e){e.Ra.set("Online")}async function Ehe(e){e.Ia.forEach(((t,n)=>{kP(e,t)}))}async function Che(e,t){R$(e),AP(e)?(e.Ra.ha(t),IP(e)):e.Ra.set("Unknown")}async function khe(e,t,n){if(e.Ra.set("Online"),t instanceof _$&&t.state===2&&t.cause)try{await(async function(r,a){const l=a.cause;for(const h of a.targetIds)r.Ia.has(h)&&(await r.remoteSyncer.rejectListen(h,l),r.Ia.delete(h),r.Va.removeTarget(h))})(e,t)}catch(i){Rn(jp,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),await I1(e,i)}else if(t instanceof bw?e.Va.Ze(t):t instanceof g$?e.Va.st(t):e.Va.tt(t),!n.isEqual(_i.min()))try{const i=await I$(e.localStore);n.compareTo(i)>=0&&await(function(a,l){const h=a.Va.Tt(l);return h.targetChanges.forEach(((s,p)=>{if(s.resumeToken.approximateByteSize()>0){const v=a.Ia.get(p);v&&a.Ia.set(p,v.withResumeToken(s.resumeToken,l))}})),h.targetMismatches.forEach(((s,p)=>{const v=a.Ia.get(s);if(!v)return;a.Ia.set(s,v.withResumeToken(oa.EMPTY_BYTE_STRING,v.snapshotVersion)),D$(a,s);const x=new Pf(v.target,s,p,v.sequenceNumber);kP(a,x)})),a.remoteSyncer.applyRemoteEvent(h)})(e,n)}catch(i){Rn(jp,"Failed to raise snapshot:",i),await I1(e,i)}}async function I1(e,t,n){if(!pv(t))throw t;e.Ea.add(1),await A0(e),e.Ra.set("Offline"),n||(n=()=>I$(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{Rn(jp,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await PT(e)}))}function L$(e,t){return t().catch((n=>I1(e,n,t)))}async function MT(e){const t=bi(e),n=tm(t);let i=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:dP;for(;Ihe(t);)try{const r=await che(t.localStore,i);if(r===null){t.Ta.length===0&&n.L_();break}i=r.batchId,Ahe(t,r)}catch(r){await I1(t,r)}O$(t)&&V$(t)}function Ihe(e){return cg(e)&&e.Ta.length<10}function Ahe(e,t){e.Ta.push(t);const n=tm(e);n.O_()&&n.X_&&n.ea(t.mutations)}function O$(e){return cg(e)&&!tm(e).x_()&&e.Ta.length>0}function V$(e){tm(e).start()}async function Phe(e){tm(e).ra()}async function Mhe(e){const t=tm(e);for(const n of e.Ta)t.ea(n.mutations)}async function Dhe(e,t,n){const i=e.Ta.shift(),r=yP.from(i,t,n);await L$(e,(()=>e.remoteSyncer.applySuccessfulWrite(r))),await MT(e)}async function Rhe(e,t){t&&tm(e).X_&&await(async function(i,r){if((function(l){return mde(l)&&l!==un.ABORTED})(r.code)){const a=i.Ta.shift();tm(i).B_(),await L$(i,(()=>i.remoteSyncer.rejectFailedWrite(a.batchId,r))),await MT(i)}})(e,t),O$(e)&&V$(e)}async function EF(e,t){const n=bi(e);n.asyncQueue.verifyOperationInProgress(),Rn(jp,"RemoteStore received new credentials");const i=cg(n);n.Ea.add(3),await A0(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await PT(n)}async function Lhe(e,t){const n=bi(e);t?(n.Ea.delete(2),await PT(n)):t||(n.Ea.add(2),await A0(n),n.Ra.set("Unknown"))}function gv(e){return e.ma||(e.ma=(function(n,i,r){const a=bi(n);return a.sa(),new vhe(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,r)})(e.datastore,e.asyncQueue,{Xo:She.bind(null,e),t_:Ehe.bind(null,e),r_:Che.bind(null,e),H_:khe.bind(null,e)}),e.da.push((async t=>{t?(e.ma.B_(),AP(e)?IP(e):e.Ra.set("Unknown")):(await e.ma.stop(),R$(e))}))),e.ma}function tm(e){return e.fa||(e.fa=(function(n,i,r){const a=bi(n);return a.sa(),new yhe(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,r)})(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:Phe.bind(null,e),r_:Rhe.bind(null,e),ta:Mhe.bind(null,e),na:Dhe.bind(null,e)}),e.da.push((async t=>{t?(e.fa.B_(),await MT(e)):(await e.fa.stop(),e.Ta.length>0&&(Rn(jp,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))}))),e.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PP{constructor(t,n,i,r,a){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=a,this.deferred=new zf,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,n,i,r,a){const l=Date.now()+i,h=new PP(t,n,l,r,a);return h.start(i),h}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new $n(un.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function MP(e,t){if(bh("AsyncQueue",`${t}: ${e}`),pv(e))return new $n(un.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_{static emptySet(t){return new A_(t.comparator)}constructor(t){this.comparator=t?(n,i)=>t(n,i)||ei.comparator(n.key,i.key):(n,i)=>ei.comparator(n.key,i.key),this.keyedMap=Dy(),this.sortedSet=new ys(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((n,i)=>(t(n),!1)))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof A_)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,a=i.getNext().key;if(!r.isEqual(a))return!1}return!0}toString(){const t=[];return this.forEach((n=>{t.push(n.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const i=new A_;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CF{constructor(){this.ga=new ys(ei.comparator)}track(t){const n=t.doc.key,i=this.ga.get(n);i?t.type!==0&&i.type===3?this.ga=this.ga.insert(n,t):t.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.ga=this.ga.remove(n):t.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):hi(63341,{Rt:t,pa:i}):this.ga=this.ga.insert(n,t)}ya(){const t=[];return this.ga.inorderTraversal(((n,i)=>{t.push(i)})),t}}class tv{constructor(t,n,i,r,a,l,h,s,p){this.query=t,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=s,this.hasCachedResults=p}static fromInitialDocuments(t,n,i,r,a){const l=[];return n.forEach((h=>{l.push({type:0,doc:h})})),new tv(t,n,A_.emptySet(n),l,i,r,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&ST(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,i=t.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ohe{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class Vhe{constructor(){this.queries=kF(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const r=bi(n),a=r.queries;r.queries=kF(),a.forEach(((l,h)=>{for(const s of h.Sa)s.onError(i)}))})(this,new $n(un.ABORTED,"Firestore shutting down"))}}function kF(){return new lg((e=>i$(e)),ST)}async function Bhe(e,t){const n=bi(e);let i=3;const r=t.query;let a=n.queries.get(r);a?!a.ba()&&t.Da()&&(i=2):(a=new Ohe,i=t.Da()?0:1);try{switch(i){case 0:a.wa=await n.onListen(r,!0);break;case 1:a.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(l){const h=MP(l,`Initialization of query '${l_(t.query)}' failed`);return void t.onError(h)}n.queries.set(r,a),a.Sa.push(t),t.va(n.onlineState),a.wa&&t.Fa(a.wa)&&DP(n)}async function Fhe(e,t){const n=bi(e),i=t.query;let r=3;const a=n.queries.get(i);if(a){const l=a.Sa.indexOf(t);l>=0&&(a.Sa.splice(l,1),a.Sa.length===0?r=t.Da()?0:1:!a.ba()&&t.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function zhe(e,t){const n=bi(e);let i=!1;for(const r of t){const a=r.query,l=n.queries.get(a);if(l){for(const h of l.Sa)h.Fa(r)&&(i=!0);l.wa=r}}i&&DP(n)}function Nhe(e,t,n){const i=bi(e),r=i.queries.get(t);if(r)for(const a of r.Sa)a.onError(n);i.queries.delete(t)}function DP(e){e.Ca.forEach((t=>{t.next()}))}var zk,IF;(IF=zk||(zk={})).Ma="default",IF.Cache="cache";class Uhe{constructor(t,n,i){this.query=t,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(t){if(!this.options.includeMetadataChanges){const i=[];for(const r of t.docChanges)r.type!==3&&i.push(r);t=new tv(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),n=!0):this.La(t,this.onlineState)&&(this.ka(t),n=!0),this.Na=t,n}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),n=!0),n}La(t,n){if(!t.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(t){t=tv.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==zk.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B${constructor(t){this.key=t}}class F${constructor(t){this.key=t}}class $he{constructor(t,n){this.query=t,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Vi(),this.mutatedKeys=Vi(),this.eu=r$(t),this.tu=new A_(this.eu)}get nu(){return this.Ya}ru(t,n){const i=n?n.iu:new CF,r=n?n.tu:this.tu;let a=n?n.mutatedKeys:this.mutatedKeys,l=r,h=!1;const s=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,p=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal(((v,x)=>{const T=r.get(v),k=ET(this.query,x)?x:null,P=!!T&&this.mutatedKeys.has(T.key),M=!!k&&(k.hasLocalMutations||this.mutatedKeys.has(k.key)&&k.hasCommittedMutations);let L=!1;T&&k?T.data.isEqual(k.data)?P!==M&&(i.track({type:3,doc:k}),L=!0):this.su(T,k)||(i.track({type:2,doc:k}),L=!0,(s&&this.eu(k,s)>0||p&&this.eu(k,p)<0)&&(h=!0)):!T&&k?(i.track({type:0,doc:k}),L=!0):T&&!k&&(i.track({type:1,doc:T}),L=!0,(s||p)&&(h=!0)),L&&(k?(l=l.add(k),a=M?a.add(v):a.delete(v)):(l=l.delete(v),a=a.delete(v)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const v=this.query.limitType==="F"?l.last():l.first();l=l.delete(v.key),a=a.delete(v.key),i.track({type:1,doc:v})}return{tu:l,iu:i,Cs:h,mutatedKeys:a}}su(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,i,r){const a=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const l=t.iu.ya();l.sort(((v,x)=>(function(k,P){const M=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return hi(20277,{Rt:L})}};return M(k)-M(P)})(v.type,x.type)||this.eu(v.doc,x.doc))),this.ou(i),r=r??!1;const h=n&&!r?this._u():[],s=this.Xa.size===0&&this.current&&!r?1:0,p=s!==this.Za;return this.Za=s,l.length!==0||p?{snapshot:new tv(this.query,t.tu,a,l,t.mutatedKeys,s===0,p,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new CF,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),t.modifiedDocuments.forEach((n=>{})),t.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Vi(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const n=[];return t.forEach((i=>{this.Xa.has(i)||n.push(new F$(i))})),this.Xa.forEach((i=>{t.has(i)||n.push(new B$(i))})),n}cu(t){this.Ya=t.Qs,this.Xa=Vi();const n=this.ru(t.documents);return this.applyChanges(n,!0)}lu(){return tv.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const RP="SyncEngine";class jhe{constructor(t,n,i){this.query=t,this.targetId=n,this.view=i}}class Whe{constructor(t){this.key=t,this.hu=!1}}class Hhe{constructor(t,n,i,r,a,l){this.localStore=t,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new lg((h=>i$(h)),ST),this.Iu=new Map,this.Eu=new Set,this.du=new ys(ei.comparator),this.Au=new Map,this.Ru=new wP,this.Vu={},this.mu=new Map,this.fu=ev.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Ghe(e,t,n=!0){const i=W$(e);let r;const a=i.Tu.get(t);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),r=a.view.lu()):r=await z$(i,t,n,!0),r}async function qhe(e,t){const n=W$(e);await z$(n,t,!0,!1)}async function z$(e,t,n,i){const r=await uhe(e.localStore,Zu(t)),a=r.targetId,l=e.sharedClientState.addLocalQueryTarget(a,n);let h;return i&&(h=await Khe(e,t,a,l==="current",r.resumeToken)),e.isPrimaryClient&&n&&M$(e.remoteStore,r),h}async function Khe(e,t,n,i,r){e.pu=(x,T,k)=>(async function(M,L,B,F){let X=L.view.ru(B);X.Cs&&(X=await bF(M.localStore,L.query,!1).then((({documents:Z})=>L.view.ru(Z,X))));const J=F&&F.targetChanges.get(L.targetId),Q=F&&F.targetMismatches.get(L.targetId)!=null,re=L.view.applyChanges(X,M.isPrimaryClient,J,Q);return PF(M,L.targetId,re.au),re.snapshot})(e,x,T,k);const a=await bF(e.localStore,t,!0),l=new $he(t,a.Qs),h=l.ru(a.documents),s=I0.createSynthesizedTargetChangeForCurrentChange(n,i&&e.onlineState!=="Offline",r),p=l.applyChanges(h,e.isPrimaryClient,s);PF(e,n,p.au);const v=new jhe(t,n,l);return e.Tu.set(t,v),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),p.snapshot}async function Xhe(e,t,n){const i=bi(e),r=i.Tu.get(t),a=i.Iu.get(r.targetId);if(a.length>1)return i.Iu.set(r.targetId,a.filter((l=>!ST(l,t)))),void i.Tu.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await Bk(i.localStore,r.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(r.targetId),n&&CP(i.remoteStore,r.targetId),Nk(i,r.targetId)})).catch(mv)):(Nk(i,r.targetId),await Bk(i.localStore,r.targetId,!0))}async function Zhe(e,t){const n=bi(e),i=n.Tu.get(t),r=n.Iu.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),CP(n.remoteStore,i.targetId))}async function Yhe(e,t,n){const i=rfe(e);try{const r=await(function(l,h){const s=bi(l),p=Xr.now(),v=h.reduce(((k,P)=>k.add(P.key)),Vi());let x,T;return s.persistence.runTransaction("Locally write mutations","readwrite",(k=>{let P=xh(),M=Vi();return s.Ns.getEntries(k,v).next((L=>{P=L,P.forEach(((B,F)=>{F.isValidDocument()||(M=M.add(B))}))})).next((()=>s.localDocuments.getOverlayedDocuments(k,P))).next((L=>{x=L;const B=[];for(const F of h){const X=cde(F,x.get(F.key).overlayedDocument);X!=null&&B.push(new dm(F.key,X,ZU(X.value.mapValue),au.exists(!0)))}return s.mutationQueue.addMutationBatch(k,p,B,h)})).next((L=>{T=L;const B=L.applyToLocalDocumentSet(x,M);return s.documentOverlayCache.saveOverlays(k,L.batchId,B)}))})).then((()=>({batchId:T.batchId,changes:o$(x)})))})(i.localStore,t);i.sharedClientState.addPendingMutation(r.batchId),(function(l,h,s){let p=l.Vu[l.currentUser.toKey()];p||(p=new ys(Oi)),p=p.insert(h,s),l.Vu[l.currentUser.toKey()]=p})(i,r.batchId,n),await P0(i,r.changes),await MT(i.remoteStore)}catch(r){const a=MP(r,"Failed to persist write");n.reject(a)}}async function N$(e,t){const n=bi(e);try{const i=await ahe(n.localStore,t);t.targetChanges.forEach(((r,a)=>{const l=n.Au.get(a);l&&(Er(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?l.hu=!0:r.modifiedDocuments.size>0?Er(l.hu,14607):r.removedDocuments.size>0&&(Er(l.hu,42227),l.hu=!1))})),await P0(n,i,t)}catch(i){await mv(i)}}function AF(e,t,n){const i=bi(e);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Tu.forEach(((a,l)=>{const h=l.view.va(t);h.snapshot&&r.push(h.snapshot)})),(function(l,h){const s=bi(l);s.onlineState=h;let p=!1;s.queries.forEach(((v,x)=>{for(const T of x.Sa)T.va(h)&&(p=!0)})),p&&DP(s)})(i.eventManager,t),r.length&&i.Pu.H_(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function Jhe(e,t,n){const i=bi(e);i.sharedClientState.updateQueryState(t,"rejected",n);const r=i.Au.get(t),a=r&&r.key;if(a){let l=new ys(ei.comparator);l=l.insert(a,Pa.newNoDocument(a,_i.min()));const h=Vi().add(a),s=new IT(_i.min(),new Map,new ys(Oi),l,h);await N$(i,s),i.du=i.du.remove(a),i.Au.delete(t),LP(i)}else await Bk(i.localStore,t,!1).then((()=>Nk(i,t,n))).catch(mv)}async function Qhe(e,t){const n=bi(e),i=t.batch.batchId;try{const r=await ohe(n.localStore,t);$$(n,i,null),U$(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await P0(n,r)}catch(r){await mv(r)}}async function efe(e,t,n){const i=bi(e);try{const r=await(function(l,h){const s=bi(l);return s.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let v;return s.mutationQueue.lookupMutationBatch(p,h).next((x=>(Er(x!==null,37113),v=x.keys(),s.mutationQueue.removeMutationBatch(p,x)))).next((()=>s.mutationQueue.performConsistencyCheck(p))).next((()=>s.documentOverlayCache.removeOverlaysForBatchId(p,v,h))).next((()=>s.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,v))).next((()=>s.localDocuments.getDocuments(p,v)))}))})(i.localStore,t);$$(i,t,n),U$(i,t),i.sharedClientState.updateMutationState(t,"rejected",n),await P0(i,r)}catch(r){await mv(r)}}function U$(e,t){(e.mu.get(t)||[]).forEach((n=>{n.resolve()})),e.mu.delete(t)}function $$(e,t,n){const i=bi(e);let r=i.Vu[i.currentUser.toKey()];if(r){const a=r.get(t);a&&(n?a.reject(n):a.resolve(),r=r.remove(t)),i.Vu[i.currentUser.toKey()]=r}}function Nk(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const i of e.Iu.get(t))e.Tu.delete(i),n&&e.Pu.yu(i,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach((i=>{e.Ru.containsKey(i)||j$(e,i)}))}function j$(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);n!==null&&(CP(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),LP(e))}function PF(e,t,n){for(const i of n)i instanceof B$?(e.Ru.addReference(i.key,t),tfe(e,i)):i instanceof F$?(Rn(RP,"Document no longer in limbo: "+i.key),e.Ru.removeReference(i.key,t),e.Ru.containsKey(i.key)||j$(e,i.key)):hi(19791,{wu:i})}function tfe(e,t){const n=t.key,i=n.path.canonicalString();e.du.get(n)||e.Eu.has(i)||(Rn(RP,"New document in limbo: "+n),e.Eu.add(i),LP(e))}function LP(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new ei(_s.fromString(t)),i=e.fu.next();e.Au.set(i,new Whe(n)),e.du=e.du.insert(n,i),M$(e.remoteStore,new Pf(Zu(gP(n.path)),i,"TargetPurposeLimboResolution",bT.ce))}}async function P0(e,t,n){const i=bi(e),r=[],a=[],l=[];i.Tu.isEmpty()||(i.Tu.forEach(((h,s)=>{l.push(i.pu(s,t,n).then((p=>{if((p||n)&&i.isPrimaryClient){const v=p?!p.fromCache:n?.targetChanges.get(s.targetId)?.current;i.sharedClientState.updateQueryState(s.targetId,v?"current":"not-current")}if(p){r.push(p);const v=SP.As(s.targetId,p);a.push(v)}})))})),await Promise.all(l),i.Pu.H_(r),await(async function(s,p){const v=bi(s);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(x=>tn.forEach(p,(T=>tn.forEach(T.Es,(k=>v.persistence.referenceDelegate.addReference(x,T.targetId,k))).next((()=>tn.forEach(T.ds,(k=>v.persistence.referenceDelegate.removeReference(x,T.targetId,k)))))))))}catch(x){if(!pv(x))throw x;Rn(EP,"Failed to update sequence numbers: "+x)}for(const x of p){const T=x.targetId;if(!x.fromCache){const k=v.Ms.get(T),P=k.snapshotVersion,M=k.withLastLimboFreeSnapshotVersion(P);v.Ms=v.Ms.insert(T,M)}}})(i.localStore,a))}async function nfe(e,t){const n=bi(e);if(!n.currentUser.isEqual(t)){Rn(RP,"User change. New user:",t.toKey());const i=await k$(n.localStore,t);n.currentUser=t,(function(a,l){a.mu.forEach((h=>{h.forEach((s=>{s.reject(new $n(un.CANCELLED,l))}))})),a.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await P0(n,i.Ls)}}function ife(e,t){const n=bi(e),i=n.Au.get(t);if(i&&i.hu)return Vi().add(i.key);{let r=Vi();const a=n.Iu.get(t);if(!a)return r;for(const l of a){const h=n.Tu.get(l);r=r.unionWith(h.view.nu)}return r}}function W$(e){const t=bi(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=N$.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=ife.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Jhe.bind(null,t),t.Pu.H_=zhe.bind(null,t.eventManager),t.Pu.yu=Nhe.bind(null,t.eventManager),t}function rfe(e){const t=bi(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Qhe.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=efe.bind(null,t),t}class A1{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=AT(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,n){return null}Mu(t,n){return null}vu(t){return she(this.persistence,new nhe,t.initialUser,this.serializer)}Cu(t){return new C$(TP.mi,this.serializer)}Du(t){return new hhe}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}A1.provider={build:()=>new A1};class sfe extends A1{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,n){Er(this.persistence.referenceDelegate instanceof k1,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new Ude(i,t.asyncQueue,n)}Cu(t){const n=this.cacheSizeBytes!==void 0?Tl.withCacheSize(this.cacheSizeBytes):Tl.DEFAULT;return new C$((i=>k1.mi(i,n)),this.serializer)}}class Uk{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>AF(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=nfe.bind(null,this.syncEngine),await Lhe(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new Vhe})()}createDatastore(t){const n=AT(t.databaseInfo.databaseId),i=(function(a){return new _he(a)})(t.databaseInfo);return(function(a,l,h,s){return new xhe(a,l,h,s)})(t.authCredentials,t.appCheckCredentials,i,n)}createRemoteStore(t){return(function(i,r,a,l,h){return new The(i,r,a,l,h)})(this.localStore,this.datastore,t.asyncQueue,(n=>AF(this.syncEngine,n,0)),(function(){return TF.v()?new TF:new fhe})())}createSyncEngine(t,n){return(function(r,a,l,h,s,p,v){const x=new Hhe(r,a,l,h,s,p);return v&&(x.gu=!0),x})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const i=bi(n);Rn(jp,"RemoteStore shutting down."),i.Ea.add(5),await A0(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Uk.provider={build:()=>new Uk};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ofe{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):bh("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,n){setTimeout((()=>{this.muted||t(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nm="FirestoreClient";class afe{constructor(t,n,i,r,a){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=ka.UNAUTHENTICATED,this.clientId=cP.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,(async l=>{Rn(nm,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(i,(l=>(Rn(nm,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new zf;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const i=MP(n,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}async function dC(e,t){e.asyncQueue.verifyOperationInProgress(),Rn(nm,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let i=n.initialUser;e.setCredentialChangeListener((async r=>{i.isEqual(r)||(await k$(t.localStore,r),i=r)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function MF(e,t){e.asyncQueue.verifyOperationInProgress();const n=await lfe(e);Rn(nm,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((i=>EF(t.remoteStore,i))),e.setAppCheckTokenChangeListener(((i,r)=>EF(t.remoteStore,r))),e._onlineComponents=t}async function lfe(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Rn(nm,"Using user provided OfflineComponentProvider");try{await dC(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!(function(r){return r.name==="FirebaseError"?r.code===un.FAILED_PRECONDITION||r.code===un.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(n))throw n;X_("Error using user provided cache. Falling back to memory cache: "+n),await dC(e,new A1)}}else Rn(nm,"Using default OfflineComponentProvider"),await dC(e,new sfe(void 0));return e._offlineComponents}async function H$(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Rn(nm,"Using user provided OnlineComponentProvider"),await MF(e,e._uninitializedComponentsProvider._online)):(Rn(nm,"Using default OnlineComponentProvider"),await MF(e,new Uk))),e._onlineComponents}function cfe(e){return H$(e).then((t=>t.syncEngine))}async function ufe(e){const t=await H$(e),n=t.eventManager;return n.onListen=Ghe.bind(null,t.syncEngine),n.onUnlisten=Xhe.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=qhe.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Zhe.bind(null,t.syncEngine),n}function dfe(e,t,n={}){const i=new zf;return e.asyncQueue.enqueueAndForget((async()=>(function(a,l,h,s,p){const v=new ofe({next:T=>{v.Nu(),l.enqueueAndForget((()=>Fhe(a,x)));const k=T.docs.has(h);!k&&T.fromCache?p.reject(new $n(un.UNAVAILABLE,"Failed to get document because the client is offline.")):k&&T.fromCache&&s&&s.source==="server"?p.reject(new $n(un.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(T)},error:T=>p.reject(T)}),x=new Uhe(gP(h.path),v,{includeMetadataChanges:!0,qa:!0});return Bhe(a,x)})(await ufe(e),e.asyncQueue,t,n,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G$(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DF=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q$="firestore.googleapis.com",RF=!0;class LF{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new $n(un.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=q$,this.ssl=RF}else this.host=t.host,this.ssl=t.ssl??RF;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=E$;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<zde)throw new $n(un.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}xue("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=G$(t.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new $n(un.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new $n(un.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new $n(un.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(i,r){return i.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class OP{constructor(t,n,i,r){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new LF({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new $n(un.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new $n(un.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new LF(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new uue;switch(i.type){case"firstParty":return new mue(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new $n(un.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const i=DF.get(n);i&&(Rn("ComponentProvider","Removing Datastore"),DF.delete(n),i.terminate())})(this),Promise.resolve()}}function hfe(e,t,n,i={}){e=Zf(e,OP);const r=dv(t),a=e._getSettings(),l={...a,emulatorOptions:e._getEmulatorOptions()},h=`${t}:${n}`;r&&(j6(`https://${h}`),W6("Firestore",!0)),a.host!==q$&&a.host!==h&&X_("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const s={...a,host:h,ssl:r,emulatorOptions:i};if(!Xf(s,l)&&(e._setSettings(s),i.mockUserToken)){let p,v;if(typeof i.mockUserToken=="string")p=i.mockUserToken,v=ka.MOCK_USER;else{p=goe(i.mockUserToken,e._app?.options.projectId);const x=i.mockUserToken.sub||i.mockUserToken.user_id;if(!x)throw new $n(un.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new ka(x)}e._authCredentials=new due(new zU(p,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VP{constructor(t,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new VP(this.firestore,t,this._query)}}class mo{constructor(t,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xb(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new mo(this.firestore,t,this._key)}toJSON(){return{type:mo._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,i){if(C0(n,mo._jsonSchema))return new mo(t,i||null,new ei(_s.fromString(n.referencePath)))}}mo._jsonSchemaVersion="firestore/documentReference/1.0",mo._jsonSchema={type:no("string",mo._jsonSchemaVersion),referencePath:no("string")};class Xb extends VP{constructor(t,n,i){super(t,n,gP(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new mo(this.firestore,null,new ei(t))}withConverter(t){return new Xb(this.firestore,t,this._path)}}function ib(e,t,...n){if(e=zo(e),arguments.length===1&&(t=cP.newId()),bue("doc","path",t),e instanceof OP){const i=_s.fromString(t,...n);return KB(i),new mo(e,null,new ei(i))}{if(!(e instanceof mo||e instanceof Xb))throw new $n(un.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(_s.fromString(t,...n));return KB(i),new mo(e.firestore,e instanceof Xb?e.converter:null,new ei(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OF="AsyncQueue";class VF{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new A$(this,"async_queue_retry"),this._c=()=>{const i=uC();i&&Rn(OF,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=t;const n=uC();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const n=uC();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new zf;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!pv(t))throw t;Rn(OF,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const n=this.ac.then((()=>(this.rc=!0,t().catch((i=>{throw this.nc=i,this.rc=!1,bh("INTERNAL UNHANDLED ERROR: ",BF(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=n,n}enqueueAfterDelay(t,n,i){this.uc(),this.oc.indexOf(t)>-1&&(n=0);const r=PP.createAndSchedule(this,t,n,i,(a=>this.hc(a)));return this.tc.push(r),r}uc(){this.nc&&hi(47125,{Pc:BF(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const n of this.tc)if(n.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((n,i)=>n.targetTimeMs-i.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const n=this.tc.indexOf(t);this.tc.splice(n,1)}}function BF(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}class M0 extends OP{constructor(t,n,i,r){super(t,n,i,r),this.type="firestore",this._queue=new VF,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new VF(t),this._firestoreClient=void 0,await t}}}function ffe(e,t){const n=typeof e=="object"?e:K6(),i=typeof e=="string"?e:b1,r=QA(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const a=moe("firestore");a&&hfe(r,...a)}return r}function K$(e){if(e._terminated)throw new $n(un.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||mfe(e),e._firestoreClient}function mfe(e){const t=e._freezeSettings(),n=(function(r,a,l,h){return new Due(r,a,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,G$(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(e._databaseId,e._app?.options.appId||"",e._persistenceKey,t);e._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new afe(e._authCredentials,e._appCheckCredentials,e._queue,n,e._componentsProvider&&(function(r){const a=r?._online.build();return{_offline:r?._offline.build(a),_online:a}})(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Ic(oa.fromBase64String(t))}catch(n){throw new $n(un.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Ic(oa.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Ic._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(C0(t,Ic._jsonSchema))return Ic.fromBase64String(t.bytes)}}Ic._jsonSchemaVersion="firestore/bytes/1.0",Ic._jsonSchema={type:no("string",Ic._jsonSchemaVersion),bytes:no("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new $n(un.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new na(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new $n(un.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new $n(un.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Oi(this._lat,t._lat)||Oi(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ju._jsonSchemaVersion}}static fromJSON(t){if(C0(t,Ju._jsonSchema))return new Ju(t.latitude,t.longitude)}}Ju._jsonSchemaVersion="firestore/geoPoint/1.0",Ju._jsonSchema={type:no("string",Ju._jsonSchemaVersion),latitude:no("number"),longitude:no("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(t){this._values=(t||[]).map((n=>n))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(i,r){if(i.length!==r.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==r[a])return!1;return!0})(this._values,t._values)}toJSON(){return{type:Qu._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(C0(t,Qu._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((n=>typeof n=="number")))return new Qu(t.vectorValues);throw new $n(un.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Qu._jsonSchemaVersion="firestore/vectorValue/1.0",Qu._jsonSchema={type:no("string",Qu._jsonSchemaVersion),vectorValues:no("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pfe=/^__.*__$/;class gfe{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return this.fieldMask!==null?new dm(t,this.data,this.fieldMask,n,this.fieldTransforms):new k0(t,this.data,n,this.fieldTransforms)}}class X${constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return new dm(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function Z$(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw hi(40011,{Ac:e})}}class LT{constructor(t,n,i,r,a,l){this.settings=t,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new LT({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const n=this.path?.child(t),i=this.Vc({path:n,fc:!1});return i.gc(t),i}yc(t){const n=this.path?.child(t),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return P1(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((n=>t.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>t.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(Z$(this.Ac)&&pfe.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class _fe{constructor(t,n,i){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=i||AT(t)}Cc(t,n,i,r=!1){return new LT({Ac:t,methodName:n,Dc:i,path:na.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Y$(e){const t=e._freezeSettings(),n=AT(e._databaseId);return new _fe(e._databaseId,!!t.ignoreUndefinedProperties,n)}function vfe(e,t,n,i,r,a={}){const l=e.Cc(a.merge||a.mergeFields?2:0,t,n,r);FP("Data must be an object, but it was:",l,i);const h=J$(i,l);let s,p;if(a.merge)s=new nc(l.fieldMask),p=l.fieldTransforms;else if(a.mergeFields){const v=[];for(const x of a.mergeFields){const T=$k(t,x,n);if(!l.contains(T))throw new $n(un.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);ej(v,T)||v.push(T)}s=new nc(v),p=l.fieldTransforms.filter((x=>s.covers(x.field)))}else s=null,p=l.fieldTransforms;return new gfe(new El(h),s,p)}class OT extends RT{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof OT}}function yfe(e,t,n){return new LT({Ac:3,Dc:t.settings.Dc,methodName:e._methodName,fc:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class BP extends RT{constructor(t,n){super(t),this.vc=n}_toFieldTransform(t){const n=yfe(this,t,!0),i=this.vc.map((a=>D0(a,n))),r=new Q_(i);return new sde(t.path,r)}isEqual(t){return t instanceof BP&&Xf(this.vc,t.vc)}}function bfe(e,t,n,i){const r=e.Cc(1,t,n);FP("Data must be an object, but it was:",r,i);const a=[],l=El.empty();um(i,((s,p)=>{const v=zP(t,s,n);p=zo(p);const x=r.yc(v);if(p instanceof OT)a.push(v);else{const T=D0(p,x);T!=null&&(a.push(v),l.set(v,T))}}));const h=new nc(a);return new X$(l,h,r.fieldTransforms)}function xfe(e,t,n,i,r,a){const l=e.Cc(1,t,n),h=[$k(t,i,n)],s=[r];if(a.length%2!=0)throw new $n(un.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<a.length;T+=2)h.push($k(t,a[T])),s.push(a[T+1]);const p=[],v=El.empty();for(let T=h.length-1;T>=0;--T)if(!ej(p,h[T])){const k=h[T];let P=s[T];P=zo(P);const M=l.yc(k);if(P instanceof OT)p.push(k);else{const L=D0(P,M);L!=null&&(p.push(k),v.set(k,L))}}const x=new nc(p);return new X$(v,x,l.fieldTransforms)}function D0(e,t){if(Q$(e=zo(e)))return FP("Unsupported field value:",t,e),J$(e,t);if(e instanceof RT)return(function(i,r){if(!Z$(r.Ac))throw r.Sc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(r);a&&r.fieldTransforms.push(a)})(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(i,r){const a=[];let l=0;for(const h of i){let s=D0(h,r.wc(l));s==null&&(s={nullValue:"NULL_VALUE"}),a.push(s),l++}return{arrayValue:{values:a}}})(e,t)}return(function(i,r){if((i=zo(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return nde(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=Xr.fromDate(i);return{timestampValue:C1(r.serializer,a)}}if(i instanceof Xr){const a=new Xr(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:C1(r.serializer,a)}}if(i instanceof Ju)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Ic)return{bytesValue:v$(r.serializer,i._byteString)};if(i instanceof mo){const a=r.databaseId,l=i.firestore._databaseId;if(!l.isEqual(a))throw r.Sc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:xP(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Qu)return(function(l,h){return{mapValue:{fields:{[KU]:{stringValue:XU},[x1]:{arrayValue:{values:l.toArray().map((p=>{if(typeof p!="number")throw h.Sc("VectorValues must only contain numeric values.");return _P(h.serializer,p)}))}}}}}})(i,r);throw r.Sc(`Unsupported field value: ${uP(i)}`)})(e,t)}function J$(e,t){const n={};return $U(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):um(e,((i,r)=>{const a=D0(r,t.mc(i));a!=null&&(n[i]=a)})),{mapValue:{fields:n}}}function Q$(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Xr||e instanceof Ju||e instanceof Ic||e instanceof mo||e instanceof RT||e instanceof Qu)}function FP(e,t,n){if(!Q$(n)||!NU(n)){const i=uP(n);throw i==="an object"?t.Sc(e+" a custom object"):t.Sc(e+" "+i)}}function $k(e,t,n){if((t=zo(t))instanceof DT)return t._internalPath;if(typeof t=="string")return zP(e,t);throw P1("Field path arguments must be of type string or ",e,!1,void 0,n)}const wfe=new RegExp("[~\\*/\\[\\]]");function zP(e,t,n){if(t.search(wfe)>=0)throw P1(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new DT(...t.split("."))._internalPath}catch{throw P1(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function P1(e,t,n,i,r){const a=i&&!i.isEmpty(),l=r!==void 0;let h=`Function ${t}() called with invalid data`;n&&(h+=" (via `toFirestore()`)"),h+=". ";let s="";return(a||l)&&(s+=" (found",a&&(s+=` in field ${i}`),l&&(s+=` in document ${r}`),s+=")"),new $n(un.INVALID_ARGUMENT,h+e+s)}function ej(e,t){return e.some((n=>n.isEqual(t)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tj{constructor(t,n,i,r,a){this._firestore=t,this._userDataWriter=n,this._key=i,this._document=r,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new mo(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new Tfe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(nj("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Tfe extends tj{data(){return super.data()}}function nj(e,t){return typeof t=="string"?zP(e,t):t instanceof DT?t._internalPath:t._delegate._internalPath}class Sfe{convertValue(t,n="none"){switch(em(t)){case 0:return null;case 1:return t.booleanValue;case 2:return $s(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Qf(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw hi(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const i={};return um(t,((r,a)=>{i[r]=this.convertValue(a,n)})),i}convertVectorValue(t){const n=t.fields?.[x1].arrayValue?.values?.map((i=>$s(i.doubleValue)));return new Qu(n)}convertGeoPoint(t){return new Ju($s(t.latitude),$s(t.longitude))}convertArray(t,n){return(t.values||[]).map((i=>this.convertValue(i,n)))}convertServerTimestamp(t,n){switch(n){case"previous":const i=wT(t);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Hb(t));default:return null}}convertTimestamp(t){const n=Jf(t);return new Xr(n.seconds,n.nanos)}convertDocumentKey(t,n){const i=_s.fromString(t);Er(S$(i),9688,{name:t});const r=new Gb(i.get(1),i.get(3)),a=new ei(i.popFirst(5));return r.isEqual(n)||bh(`Document ${a} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Efe(e,t,n){let i;return i=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,i}class Ly{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Ap extends tj{constructor(t,n,i,r,a,l){super(t,n,i,r,l),this._firestore=t,this._firestoreImpl=t,this.metadata=a}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new xw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const i=this._document.data.field(nj("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new $n(un.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=Ap._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ap._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ap._jsonSchema={type:no("string",Ap._jsonSchemaVersion),bundleSource:no("string","DocumentSnapshot"),bundleName:no("string"),bundle:no("string")};class xw extends Ap{data(t={}){return super.data(t)}}class rb{constructor(t,n,i,r){this._firestore=t,this._userDataWriter=n,this._snapshot=r,this.metadata=new Ly(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const t=[];return this.forEach((n=>t.push(n))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach((i=>{t.call(n,new xw(this._firestore,this._userDataWriter,i.key,i,new Ly(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new $n(un.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(r,a){if(r._snapshot.oldDocs.isEmpty()){let l=0;return r._snapshot.docChanges.map((h=>{const s=new xw(r._firestore,r._userDataWriter,h.doc.key,h.doc,new Ly(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);return h.doc,{type:"added",doc:s,oldIndex:-1,newIndex:l++}}))}{let l=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((h=>a||h.type!==3)).map((h=>{const s=new xw(r._firestore,r._userDataWriter,h.doc.key,h.doc,new Ly(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);let p=-1,v=-1;return h.type!==0&&(p=l.indexOf(h.doc.key),l=l.delete(h.doc.key)),h.type!==1&&(l=l.add(h.doc),v=l.indexOf(h.doc.key)),{type:Cfe(h.type),doc:s,oldIndex:p,newIndex:v}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new $n(un.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=rb._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=cP.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],r=[];return this.docs.forEach((a=>{a._document!==null&&(n.push(a._document),i.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),r.push(a.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function Cfe(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return hi(61501,{type:e})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kfe(e){e=Zf(e,mo);const t=Zf(e.firestore,M0);return dfe(K$(t),e._key).then((n=>Pfe(t,e,n)))}rb._jsonSchemaVersion="firestore/querySnapshot/1.0",rb._jsonSchema={type:no("string",rb._jsonSchemaVersion),bundleSource:no("string","QuerySnapshot"),bundleName:no("string"),bundle:no("string")};class Ife extends Sfe{constructor(t){super(),this.firestore=t}convertBytes(t){return new Ic(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new mo(this.firestore,null,n)}}function ij(e,t,n){e=Zf(e,mo);const i=Zf(e.firestore,M0),r=Efe(e.converter,t,n);return NP(i,[vfe(Y$(i),"setDoc",e._key,r,e.converter!==null,n).toMutation(e._key,au.none())])}function rj(e,t,n,...i){e=Zf(e,mo);const r=Zf(e.firestore,M0),a=Y$(r);let l;return l=typeof(t=zo(t))=="string"||t instanceof DT?xfe(a,"updateDoc",e._key,t,n,i):bfe(a,"updateDoc",e._key,t),NP(r,[l.toMutation(e._key,au.exists(!0))])}function Afe(e){return NP(Zf(e.firestore,M0),[new vP(e._key,au.none())])}function NP(e,t){return(function(i,r){const a=new zf;return i.asyncQueue.enqueueAndForget((async()=>Yhe(await cfe(i),r,a))),a.promise})(K$(e),t)}function Pfe(e,t,n){const i=n.docs.get(t._key),r=new Ife(e);return new Ap(e,r,t._key,i,new Ly(n.hasPendingWrites,n.fromCache),t.converter)}function Mfe(...e){return new BP("arrayUnion",e)}(function(t,n=!0){(function(r){fv=r})(hv),K_(new zp("firestore",((i,{instanceIdentifier:r,options:a})=>{const l=i.getProvider("app").getImmediate(),h=new M0(new hue(i.getProvider("auth-internal")),new pue(l,i.getProvider("app-check-internal")),(function(p,v){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new $n(un.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Gb(p.options.projectId,v)})(l,r),l);return a={useFetchStreams:n,...a},h._setSettings(a),h}),"PUBLIC").setMultipleInstances(!0)),Bf(WB,HB,t),Bf(WB,HB,"esm2020")})();const Dfe={apiKey:"AIzaSyBTy0tRrYfIvPYhZ-k49IsU_IS9WuTVxKA",authDomain:"singatrain.firebaseapp.com",projectId:"singatrain",storageBucket:"singatrain.firebasestorage.app",messagingSenderId:"773752736023",appId:"1:773752736023:web:456315abd28b9854058f52",measurementId:"G-ZQHSRHNBCB"},sj=q6(Dfe),R0=lue(sj),sb=ffe(sj);async function Rfe(e,t){try{return{success:!0,user:(await Hle(R0,e,t)).user}}catch(n){console.error=()=>{},setTimeout(()=>console.error=console.__proto__.error);let i="";switch(n.code){case"auth/email-already-in-use":i="This email is already registered.";break;case"auth/invalid-email":i="Please enter a valid email address.";break;case"auth/weak-password":i="Password should be at least 6 characters.";break;default:i="An unexpected error occurred during registration."}return{success:!1,message:i}}}async function Lfe(e,t){if(!e||!t)return{success:!1,message:"Please enter both email and password."};try{return{success:!0,user:(await Gle(R0,e,t)).user}}catch(n){let i="";switch(n.code){case"auth/invalid-email":i="Please enter a valid email address.";break;case"auth/user-not-found":i="No account found with this email.";break;case"auth/wrong-password":i="Incorrect password. Please try again.";break;default:i="Login failed. Please check your details and try again."}return{success:!1,message:i}}}async function Ofe(){try{return await Zle(R0),{success:!0}}catch(e){return VT(e)}}async function Vfe(e){try{return await Wle(R0,e),{success:!0}}catch(t){return VT(t)}}const FF=e=>{try{return Xle(R0,e)}catch(t){console.warn("Auth observer failed:",t.message)}};async function Bfe(e,t){try{return await ij(ib(sb,"users",e),{name:t},{merge:!0}),{success:!0}}catch(n){return VT(n)}}async function Ffe(e,t){try{const n=ib(sb,"users",e);return await rj(n,{favorite_stations:Mfe(t)}),{success:!0}}catch(n){return VT(n)}}function VT(e){const t={"auth/invalid-email":"Invalid email address.","auth/user-not-found":"No user found with this email.","auth/wrong-password":"Incorrect password.","auth/weak-password":"Password should be at least 6 characters.","auth/email-already-in-use":"This email is already registered.","auth/network-request-failed":"Network error. Please check your connection.","permission-denied":"You do not have permission to perform this action."};return{success:!1,code:e.code,message:t[e.code]||"An unexpected error occurred."}}const zfe={id:"profile",class:"section-card"},Nfe={key:0,class:"overlay-wrapper"},Ufe={key:0,class:"overlay-message error"},$fe={key:1,class:"overlay-message success"},jfe={key:1,id:"auth-section"},Wfe={key:0,id:"password-requirements"},Hfe={class:"auth-links"},Gfe={key:2,class:"modal-overlay"},qfe={class:"modal-content"},Kfe={class:"modal-buttons"},Xfe={key:3,id:"dashboard-section"},Zfe={style:{color:"#111827"}},Yfe={class:"profile-layout"},Jfe={class:"left-column"},Qfe={class:"card",id:"change-name-div"},eme={class:"card",id:"add-favorite-div"},tme=["value"],nme={class:"flip-card-back"},ime={class:"card-header"},rme={class:"account-info"},sme={class:"account-row"},ome={class:"account-row"},ame={class:"favorites-list"},lme={id:"favoriteList"},cme=["onClick"],ume={key:4,class:"modal-overlay"},dme={class:"modal-content"},hme={key:0,style:{color:"var(--bs-body-color)"},class:"error-message"},fme={key:5,class:"loading-overlay"},mme={__name:"Profile",setup(e){const t=at(null),n=at(""),i=at(""),r=at(""),a=at(""),l=at("");let h=null;const s=at(!1),p=at(!1),v=at(""),x=at("--/--/----"),T=at([]),k=at(""),P=at(""),M=at(!1),L=at(""),B=at(!1),F=at(!1),X=at(!1),J=at(!1),Q=at(!1),re=at(""),Z=at(!1),$=at(!1),H=at(SN);function W(ut,rt,Qe=3e3){ut==="error"?(a.value=rt,l.value=""):(l.value=rt,a.value=""),h&&clearTimeout(h),h=setTimeout(()=>{a.value="",l.value="",h=null},Qe)}Yr(()=>{h&&clearTimeout(h),p.value=!1,M.value=!1,Z.value=!1});let te=null;cs(()=>{te=FF(ut=>{t.value=ut,p.value=!1,M.value=!1,a.value="",l.value=""})}),Yr(()=>{te&&te()});function Y(){a.value="",l.value=""}function ne(ut){switch(ut){case"auth/email-already-in-use":return"This email is already in use. Try signing in or resetting your password.";case"auth/invalid-email":return"Invalid email format.";case"auth/operation-not-allowed":return"Email/password accounts are not enabled.";case"auth/weak-password":return"Password too weak. Please use a stronger one.";case"auth/user-not-found":return"No user found with this email.";case"auth/wrong-password":case"auth/invalid-credential":case"auth/invalid-login-credentials":return"Invalid email or password.";case"auth/too-many-requests":return"Too many attempts. Please try again later.";case"auth/network-request-failed":return"Network error. Please check your internet connection.";default:return"An unknown error occurred. Please try again."}}const Se=async()=>{Y();const ut=await Lfe(n.value,i.value);ut.success?(a.value="",W("success","Welcome back!"),t.value=ut.user):(W("error",ut.message),l.value="")},Fe=async()=>{Y();const ut=i.value||"";if(!/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%^&*(),.?":{}|<>]).{8,}$/.test(ut)){a.value="Password must include at least 8 characters, one uppercase letter, one lowercase letter, one number, and one special character.",l.value="";return}const Qe=await Rfe(n.value,ut);Qe.success?(a.value="",W("success","Account created successfully!"),t.value=Qe.user,await We(Qe.user)):(W("error",Qe.message),l.value="")};Ht(i,ut=>{const rt=(ut||"").toString();s.value=rt.length>0,B.value=rt.length>=6,F.value=/[A-Z]/.test(rt),X.value=/[a-z]/.test(rt),J.value=/[0-9]/.test(rt),Q.value=/[!@#$%^&*(),.?":{}|<>]/.test(rt)});const Ve=async()=>{try{await Ofe(),Y(),W("success","You have been signed out.")}catch(ut){W("error",ne(ut.code))}},Ge=async()=>{if(!t.value){W("error","No user is currently logged in.");return}if(!L.value){re.value="Please enter your password to confirm deletion.";return}Z.value=!0;try{const ut=ag.credential(t.value.email,L.value);await jle(t.value,ut);const rt=t.value.uid;await Afe(ib(sb,"users",rt)),await Yle(t.value),W("success","Your account has been deleted."),M.value=!1,re.value="",setTimeout(()=>{t.value=null,v.value="",x.value="--/--/----",T.value=[],L.value="",Z.value=!1},1200)}catch(ut){console.error("Delete account error:",ut),Z.value=!1,re.value=ut.code==="auth/invalid-credential"?"Incorrect password. Please try again.":"Account deletion failed. Please try again."}},je=()=>{M.value=!1,L.value="",re.value=""},Ae=async()=>{if(Y(),!r.value)return W("error","Enter your email first.");try{await Vfe(r.value),W("success","Password reset email sent!"),p.value=!1,r.value=""}catch(ut){W("error",ne(ut.code))}},Ke=async()=>{try{await Bfe(t.value.uid,v.value),W("success","Profile updated!")}catch{W("error","Failed to update profile.")}},ve=async()=>{if(!k.value||!P.value){W("error","Enter both label and station.");return}const ut={label:k.value,station:P.value};try{t.value?.uid&&(await Ffe(t.value.uid,ut),T.value.push(ut),k.value="",P.value="",W("success","Successfully added new station."))}catch(rt){console.error("Add favorite error:",rt),W("error","Failed to add favorite.")}},Le=async ut=>{const rt=T.value.slice();rt.splice(ut,1),T.value=rt;try{t.value&&(await rj(ib(sb,"users",t.value.uid),{favorite_stations:rt}),W("success","Favorite removed!"))}catch(Qe){console.error("Remove favorite error:",Qe),W("error","Failed to remove favorite.")}};FF(async ut=>{t.value=ut,Y(),ut?await We(ut):(v.value="",x.value="--/--/----",T.value=[])});async function We(ut){if(!ut)return;const rt=ib(sb,"users",ut.uid),Qe=await kfe(rt);if(Qe.exists()){const Ct=Qe.data();v.value=Ct.name||"Anonymous",x.value=Ct.created_at?.toDate?Ct.created_at.toDate().toLocaleDateString():"--/--/----",T.value=Ct.favorite_stations||[]}else{const Ct={name:"Anonymous",email:ut.email,created_at:new Date,favorite_stations:[]};await ij(rt,Ct),v.value=Ct.name,x.value=Ct.created_at.toLocaleDateString(),T.value=[]}}const ct=()=>{window.innerWidth<=992&&($.value=!$.value)};return(ut,rt)=>(_n(),wn("section",zfe,[a.value||l.value?(_n(),wn("div",Nfe,[a.value?(_n(),wn("div",Ufe,an(a.value),1)):Tr("",!0),l.value?(_n(),wn("div",$fe,an(l.value),1)):Tr("",!0)])):Tr("",!0),t.value?Tr("",!0):(_n(),wn("div",jfe,[rt[11]||(rt[11]=N("h2",null,"Join or Sign In",-1)),rt[12]||(rt[12]=N("label",{for:"auth-email"},"Email:",-1)),vi(N("input",{type:"email",id:"auth-email","onUpdate:modelValue":rt[0]||(rt[0]=Qe=>n.value=Qe),placeholder:"Enter your email"},null,512),[[$u,n.value]]),rt[13]||(rt[13]=N("label",{for:"auth-password"},"Password:",-1)),vi(N("input",{type:"password",id:"auth-password","onUpdate:modelValue":rt[1]||(rt[1]=Qe=>i.value=Qe),placeholder:"Enter your password"},null,512),[[$u,i.value]]),s.value?(_n(),wn("div",Wfe,[rt[10]||(rt[10]=N("p",null,"Password must contain:",-1)),N("span",{class:Tt({met:B.value,"not-met":!B.value})},"- At least 6 characters",2),N("span",{class:Tt({met:F.value,"not-met":!F.value})},"- An uppercase letter",2),N("span",{class:Tt({met:X.value,"not-met":!X.value})},"- A lowercase letter",2),N("span",{class:Tt({met:J.value,"not-met":!J.value})},"- A number",2),N("span",{class:Tt({met:Q.value,"not-met":!Q.value})},"- A special character (!@#$%^&*)",2)])):Tr("",!0),N("div",{class:"auth-buttons"},[N("button",{id:"login-btn",onClick:Se},"Sign In")]),N("div",Hfe,[N("a",{href:"#",onClick:rt[2]||(rt[2]=nh(Qe=>{p.value=!0,Y()},["prevent"]))},"Forgot Password?"),N("a",{href:"#",onClick:nh(Fe,["prevent"]),class:"register-link"},"Register New Account")])])),p.value?(_n(),wn("div",Gfe,[N("div",qfe,[rt[14]||(rt[14]=N("h3",{style:{color:"var(--bs-body-color)"}},"Reset Your Password",-1)),rt[15]||(rt[15]=N("p",{style:{color:"var(--bs-body-color)"}},"Enter your email to receive a password reset link.",-1)),vi(N("input",{type:"email","onUpdate:modelValue":rt[3]||(rt[3]=Qe=>r.value=Qe),placeholder:"Enter your email"},null,512),[[$u,r.value]]),N("div",Kfe,[N("button",{type:"button",class:"cancel",onClick:rt[4]||(rt[4]=Qe=>p.value=!1)}," Cancel "),N("button",{type:"button",class:"confirm",onClick:Ae}," Send Reset Email ")])])])):Tr("",!0),t.value?(_n(),wn("div",Xfe,[rt[28]||(rt[28]=N("h2",null,"Welcome to SingaTrain!",-1)),N("p",Zfe,[rt[16]||(rt[16]=Jn("You are logged in as: ",-1)),N("strong",null,an(t.value.email),1)]),N("div",Yfe,[N("div",Jfe,[N("div",Qfe,[rt[17]||(rt[17]=N("h3",null,"Change Display Name",-1)),vi(N("input",{type:"text","onUpdate:modelValue":rt[5]||(rt[5]=Qe=>v.value=Qe),placeholder:"Current name"},null,512),[[$u,v.value]]),N("button",{onClick:Ke},"Save Profile")]),N("div",eme,[rt[19]||(rt[19]=N("h3",null,"Add New Favorite Station",-1)),rt[20]||(rt[20]=N("label",{for:"favoriteLabel"},"Label:",-1)),vi(N("input",{type:"text",id:"favoriteLabel","onUpdate:modelValue":rt[6]||(rt[6]=Qe=>k.value=Qe),placeholder:"Favorite name"},null,512),[[$u,k.value]]),rt[21]||(rt[21]=N("label",{for:"favoriteStation"},"Station:",-1)),vi(N("select",{id:"favoriteStation","onUpdate:modelValue":rt[7]||(rt[7]=Qe=>P.value=Qe)},[rt[18]||(rt[18]=N("option",{disabled:"",value:""},"Select a station",-1)),(_n(!0),wn(sn,null,As(H.value,Qe=>(_n(),wn("option",{key:Qe,value:Qe},an(Qe),9,tme))),128))],512),[[lh,P.value]]),N("button",{onClick:ve},"Add Favorite Station")])]),N("div",{class:"card flip-card",id:"user-info-card",onClick:ct},[N("div",{class:Tt(["flip-card-inner",{"is-flipped":$.value}])},[rt[27]||(rt[27]=N("div",{class:"flip-card-front"},[N("img",{src:wN,alt:"SingaTrain Logo",class:"logo"}),N("p",{class:"hover-hint"})],-1)),N("div",nme,[N("div",ime,[N("h2",null,an(v.value||"User Name"),1)]),N("div",rme,[N("div",sme,[rt[23]||(rt[23]=N("span",{class:"material-icons",style:{color:"#c2410c"}},"calendar_today",-1)),N("div",null,[rt[22]||(rt[22]=N("p",{class:"label"},"Member Since",-1)),N("p",null,an(x.value),1)])]),N("div",ome,[rt[25]||(rt[25]=N("span",{class:"material-icons",style:{color:"#c2410c"}},"star",-1)),N("div",null,[rt[24]||(rt[24]=N("p",{class:"label"},"Favorite Stations",-1)),N("p",null,an(T.value.length)+" stations",1)])])]),rt[26]||(rt[26]=N("h3",{class:"favorites-title"},"Your Favorite Stations",-1)),N("div",ame,[N("ul",lme,[(_n(!0),wn(sn,null,As(T.value,(Qe,Ct)=>(_n(),wn("li",{key:Ct},[N("span",null,[N("strong",null,an(Qe.label),1),Jn(" "+an(Qe.station),1)]),N("button",{onClick:At=>Le(Ct)},"Remove",8,cme)]))),128))])])])],2)])]),N("button",{id:"logout-btn",onClick:Ve},"Sign Out"),N("button",{id:"delete-account-btn",onClick:rt[8]||(rt[8]=Qe=>M.value=!0)}," Delete Account ")])):Tr("",!0),M.value?(_n(),wn("div",ume,[N("div",dme,[rt[29]||(rt[29]=N("h3",{style:{color:"var(--bs-body-color)"}},"Confirm Account Deletion",-1)),rt[30]||(rt[30]=N("p",{style:{color:"var(--bs-body-color)"}},"Enter your password to confirm deletion. This action cannot be undone.",-1)),vi(N("input",{type:"password","onUpdate:modelValue":rt[9]||(rt[9]=Qe=>L.value=Qe),placeholder:"Password"},null,512),[[$u,L.value]]),re.value?(_n(),wn("div",hme,an(re.value),1)):Tr("",!0),N("div",{class:"modal-buttons"},[N("button",{type:"button",class:"cancel",onClick:je},"Cancel"),N("button",{type:"button",class:"confirm",onClick:Ge},"Yes, Delete")])])])):Tr("",!0),Z.value?(_n(),wn("div",fme,[...rt[31]||(rt[31]=[jy('<div class="train-loader"><div class="track-wrapper"><div class="track"></div><div class="train" aria-hidden="true"><div class="engine"></div><div class="car"></div><div class="car"></div></div></div><p>Clearing your data... please wait </p></div>',1)])])):Tr("",!0)]))}},hC={"Downtown Line":{"Towards Expo":[{code:"DT1",station:"Bukit Panjang",first:"5:30 AM",last:"11:35 PM"},{code:"DT7",station:"Sixth Avenue",first:"5:38 AM",last:"11:42 PM"},{code:"DT14",station:"Bugis",first:"5:44 AM",last:"11:55 PM"},{code:"DT21",station:"Bencoolen",first:"5:47 AM",last:"12:02 AM"},{code:"DT35",station:"Expo",first:"5:50 AM",last:"12:15 AM"}],"Towards Bukit Panjang":[{code:"DT35",station:"Expo",first:"5:32 AM",last:"11:40 PM"},{code:"DT29",station:"Bedok North",first:"5:41 AM",last:"11:52 PM"},{code:"DT20",station:"Fort Canning",first:"5:49 AM",last:"12:08 AM"},{code:"DT9",station:"Newton",first:"5:55 AM",last:"12:18 AM"},{code:"DT1",station:"Bukit Panjang",first:"6:03 AM",last:"12:33 AM"}]},"North East Line":{"Towards HarbourFront":[{code:"NE17",station:"Punggol",first:"5:36 AM",last:"11:47 PM"},{code:"NE12",station:"Serangoon",first:"5:42 AM",last:"11:59 PM"},{code:"NE7",station:"Little India",first:"5:47 AM",last:"12:08 AM"},{code:"NE3",station:"Outram Park",first:"5:53 AM",last:"12:20 AM"},{code:"NE1",station:"HarbourFront",first:"5:56 AM",last:"12:24 AM"}],"Towards Punggol Coast":[{code:"NE1",station:"HarbourFront",first:"5:34 AM",last:"11:45 PM"},{code:"NE4",station:"Chinatown",first:"5:38 AM",last:"11:53 PM"},{code:"NE10",station:"Potong Pasir",first:"5:46 AM",last:"12:05 AM"},{code:"NE14",station:"Hougang",first:"5:51 AM",last:"12:15 AM"},{code:"NE18",station:"Punggol Coast (future)",first:"",last:""}]},"North-South Line":{},"East-West Line":{},"Thomson-East Coast Line":{},"Circle Line":{},"LRT Line":{}},pme={class:"section-card"},gme={class:"row g-3 align-items-end"},_me={class:"col-md-4"},vme=["value"],yme={class:"col-md-4"},bme=["value"],xme={class:"col-md-4"},wme={class:"border rounded-3 p-3 mt-4"},Tme={class:"d-flex justify-content-between align-items-center mb-3"},Sme={class:"badge bg-secondary"},Eme={key:0,class:"text-muted"},Cme={class:"fw-semibold"},kme={class:"text-muted small"},Ime={class:"text-end"},Ame={class:"text-muted small"},Pme={__name:"FirstLastTrain",setup(e){const t=Object.keys(hC),n=at(t[0]),i=fe(()=>Object.keys(hC[n.value]||{})),r=at(""),a=at("");Ht(i,h=>{h.includes(r.value)||(r.value=h[0]||"")},{immediate:!0});const l=fe(()=>{const h=hC[n.value]?.[r.value]||[];if(!a.value)return h;const s=a.value.toLowerCase();return h.filter(p=>p.station.toLowerCase().includes(s)||p.code.toLowerCase().includes(s))});return(h,s)=>(_n(),wn("section",pme,[s[8]||(s[8]=N("h2",{class:"section-title mb-3"},"First & Last Train Timings",-1)),s[9]||(s[9]=N("p",{class:"text-muted"},[Jn(" Reference departures for selected lines and directions. Integrate with the real LTA DataMall feed by replacing the static dataset in "),N("code",null,"src/data/trainTimings.js"),Jn(". ")],-1)),N("div",gme,[N("div",_me,[s[3]||(s[3]=N("label",{class:"form-label",for:"timingLine"},"Line",-1)),vi(N("select",{id:"timingLine","onUpdate:modelValue":s[0]||(s[0]=p=>n.value=p),class:"form-select"},[(_n(!0),wn(sn,null,As(Si(t),p=>(_n(),wn("option",{key:p,value:p},an(p),9,vme))),128))],512),[[lh,n.value]])]),N("div",yme,[s[4]||(s[4]=N("label",{class:"form-label",for:"timingDirection"},"Direction",-1)),vi(N("select",{id:"timingDirection","onUpdate:modelValue":s[1]||(s[1]=p=>r.value=p),class:"form-select"},[(_n(!0),wn(sn,null,As(i.value,p=>(_n(),wn("option",{key:p,value:p},an(p),9,bme))),128))],512),[[lh,r.value]])]),N("div",xme,[s[5]||(s[5]=N("label",{class:"form-label",for:"timingSearch"},"Search station",-1)),vi(N("input",{id:"timingSearch","onUpdate:modelValue":s[2]||(s[2]=p=>a.value=p),type:"search",class:"form-control",placeholder:"Start typing a station"},null,512),[[$u,a.value]])])]),N("div",wme,[N("div",Tme,[N("strong",null,an(n.value)+"  "+an(r.value),1),N("span",Sme,an(l.value.length)+" station(s)",1)]),l.value.length?Tr("",!0):(_n(),wn("div",Eme,"No stations match your search.")),(_n(!0),wn(sn,null,As(l.value,p=>(_n(),wn("div",{key:p.code,class:"d-flex justify-content-between py-2 border-top"},[N("div",null,[N("div",Cme,an(p.station),1),N("div",kme,an(p.code),1)]),N("div",Ime,[N("div",null,[s[6]||(s[6]=N("strong",null,"First",-1)),Jn(" "+an(p.first),1)]),N("div",Ame,[s[7]||(s[7]=N("strong",null,"Last",-1)),Jn(" "+an(p.last),1)])])]))),128))])]))}},Mme={class:"container my-4"},Dme={__name:"App",setup(e){const{state:t}=K1(),n={dashboard:FL,live:j2,route:QJ,fare:Cse,meetup:soe,profile:mme,firstLast:Pme},i=fe(()=>n[t.activeTab]||FL);function r(){NC&&NC.from(".section-card",{opacity:0,y:30,duration:.45,ease:"power2.out"})}return cs(()=>{Tx&&Tx.init({once:!0,duration:550,easing:"ease-out"}),Gn(()=>r())}),Ht(()=>t.activeTab,()=>{Gn(()=>{Tx&&Tx.refreshHard(),r()})}),(a,l)=>(_n(),wn("div",null,[ce(Y7),N("main",Mme,[ce(fh,{name:"fade-slide",mode:"out-in"},{default:Ro(()=>[(_n(),d_(Wz(i.value),{key:Si(t).activeTab}))]),_:1})])]))}};var ww={exports:{}};/*!
  * Bootstrap v5.3.8 (https://getbootstrap.com/)
  * Copyright 2011-2025 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */var Rme=ww.exports,zF;function Lme(){return zF||(zF=1,(function(e,t){(function(n,i){e.exports=i()})(Rme,function(){const n=new Map,i={set(pe,V,se){n.has(pe)||n.set(pe,new Map);const ke=n.get(pe);ke.has(V)||ke.size===0?ke.set(V,se):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(ke.keys())[0]}.`)},get:(pe,V)=>n.has(pe)&&n.get(pe).get(V)||null,remove(pe,V){if(!n.has(pe))return;const se=n.get(pe);se.delete(V),se.size===0&&n.delete(pe)}},r="transitionend",a=pe=>(pe&&window.CSS&&window.CSS.escape&&(pe=pe.replace(/#([^\s"#']+)/g,(V,se)=>`#${CSS.escape(se)}`)),pe),l=pe=>pe==null?`${pe}`:Object.prototype.toString.call(pe).match(/\s([a-z]+)/i)[1].toLowerCase(),h=pe=>{pe.dispatchEvent(new Event(r))},s=pe=>!(!pe||typeof pe!="object")&&(pe.jquery!==void 0&&(pe=pe[0]),pe.nodeType!==void 0),p=pe=>s(pe)?pe.jquery?pe[0]:pe:typeof pe=="string"&&pe.length>0?document.querySelector(a(pe)):null,v=pe=>{if(!s(pe)||pe.getClientRects().length===0)return!1;const V=getComputedStyle(pe).getPropertyValue("visibility")==="visible",se=pe.closest("details:not([open])");if(!se)return V;if(se!==pe){const ke=pe.closest("summary");if(ke&&ke.parentNode!==se||ke===null)return!1}return V},x=pe=>!pe||pe.nodeType!==Node.ELEMENT_NODE||!!pe.classList.contains("disabled")||(pe.disabled!==void 0?pe.disabled:pe.hasAttribute("disabled")&&pe.getAttribute("disabled")!=="false"),T=pe=>{if(!document.documentElement.attachShadow)return null;if(typeof pe.getRootNode=="function"){const V=pe.getRootNode();return V instanceof ShadowRoot?V:null}return pe instanceof ShadowRoot?pe:pe.parentNode?T(pe.parentNode):null},k=()=>{},P=pe=>{pe.offsetHeight},M=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,L=[],B=()=>document.documentElement.dir==="rtl",F=pe=>{var V;V=()=>{const se=M();if(se){const ke=pe.NAME,_=se.fn[ke];se.fn[ke]=pe.jQueryInterface,se.fn[ke].Constructor=pe,se.fn[ke].noConflict=()=>(se.fn[ke]=_,pe.jQueryInterface)}},document.readyState==="loading"?(L.length||document.addEventListener("DOMContentLoaded",()=>{for(const se of L)se()}),L.push(V)):V()},X=(pe,V=[],se=pe)=>typeof pe=="function"?pe.call(...V):se,J=(pe,V,se=!0)=>{if(!se)return void X(pe);const ke=(m=>{if(!m)return 0;let{transitionDuration:y,transitionDelay:S}=window.getComputedStyle(m);const C=Number.parseFloat(y),R=Number.parseFloat(S);return C||R?(y=y.split(",")[0],S=S.split(",")[0],1e3*(Number.parseFloat(y)+Number.parseFloat(S))):0})(V)+5;let _=!1;const u=({target:m})=>{m===V&&(_=!0,V.removeEventListener(r,u),X(pe))};V.addEventListener(r,u),setTimeout(()=>{_||h(V)},ke)},Q=(pe,V,se,ke)=>{const _=pe.length;let u=pe.indexOf(V);return u===-1?!se&&ke?pe[_-1]:pe[0]:(u+=se?1:-1,ke&&(u=(u+_)%_),pe[Math.max(0,Math.min(u,_-1))])},re=/[^.]*(?=\..*)\.|.*/,Z=/\..*/,$=/::\d+$/,H={};let W=1;const te={mouseenter:"mouseover",mouseleave:"mouseout"},Y=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function ne(pe,V){return V&&`${V}::${W++}`||pe.uidEvent||W++}function Se(pe){const V=ne(pe);return pe.uidEvent=V,H[V]=H[V]||{},H[V]}function Fe(pe,V,se=null){return Object.values(pe).find(ke=>ke.callable===V&&ke.delegationSelector===se)}function Ve(pe,V,se){const ke=typeof V=="string",_=ke?se:V||se;let u=Ke(pe);return Y.has(u)||(u=pe),[ke,_,u]}function Ge(pe,V,se,ke,_){if(typeof V!="string"||!pe)return;let[u,m,y]=Ve(V,se,ke);V in te&&(m=(q=>function(ae){if(!ae.relatedTarget||ae.relatedTarget!==ae.delegateTarget&&!ae.delegateTarget.contains(ae.relatedTarget))return q.call(this,ae)})(m));const S=Se(pe),C=S[y]||(S[y]={}),R=Fe(C,m,u?se:null);if(R)return void(R.oneOff=R.oneOff&&_);const O=ne(m,V.replace(re,"")),U=u?(function(G,q,ae){return function he(ye){const we=G.querySelectorAll(q);for(let{target:be}=ye;be&&be!==this;be=be.parentNode)for(const Te of we)if(Te===be)return Le(ye,{delegateTarget:be}),he.oneOff&&ve.off(G,ye.type,q,ae),ae.apply(be,[ye])}})(pe,se,m):(function(G,q){return function ae(he){return Le(he,{delegateTarget:G}),ae.oneOff&&ve.off(G,he.type,q),q.apply(G,[he])}})(pe,m);U.delegationSelector=u?se:null,U.callable=m,U.oneOff=_,U.uidEvent=O,C[O]=U,pe.addEventListener(y,U,u)}function je(pe,V,se,ke,_){const u=Fe(V[se],ke,_);u&&(pe.removeEventListener(se,u,!!_),delete V[se][u.uidEvent])}function Ae(pe,V,se,ke){const _=V[se]||{};for(const[u,m]of Object.entries(_))u.includes(ke)&&je(pe,V,se,m.callable,m.delegationSelector)}function Ke(pe){return pe=pe.replace(Z,""),te[pe]||pe}const ve={on(pe,V,se,ke){Ge(pe,V,se,ke,!1)},one(pe,V,se,ke){Ge(pe,V,se,ke,!0)},off(pe,V,se,ke){if(typeof V!="string"||!pe)return;const[_,u,m]=Ve(V,se,ke),y=m!==V,S=Se(pe),C=S[m]||{},R=V.startsWith(".");if(u===void 0){if(R)for(const O of Object.keys(S))Ae(pe,S,O,V.slice(1));for(const[O,U]of Object.entries(C)){const G=O.replace($,"");y&&!V.includes(G)||je(pe,S,m,U.callable,U.delegationSelector)}}else{if(!Object.keys(C).length)return;je(pe,S,m,u,_?se:null)}},trigger(pe,V,se){if(typeof V!="string"||!pe)return null;const ke=M();let _=null,u=!0,m=!0,y=!1;V!==Ke(V)&&ke&&(_=ke.Event(V,se),ke(pe).trigger(_),u=!_.isPropagationStopped(),m=!_.isImmediatePropagationStopped(),y=_.isDefaultPrevented());const S=Le(new Event(V,{bubbles:u,cancelable:!0}),se);return y&&S.preventDefault(),m&&pe.dispatchEvent(S),S.defaultPrevented&&_&&_.preventDefault(),S}};function Le(pe,V={}){for(const[se,ke]of Object.entries(V))try{pe[se]=ke}catch{Object.defineProperty(pe,se,{configurable:!0,get:()=>ke})}return pe}function We(pe){if(pe==="true")return!0;if(pe==="false")return!1;if(pe===Number(pe).toString())return Number(pe);if(pe===""||pe==="null")return null;if(typeof pe!="string")return pe;try{return JSON.parse(decodeURIComponent(pe))}catch{return pe}}function ct(pe){return pe.replace(/[A-Z]/g,V=>`-${V.toLowerCase()}`)}const ut={setDataAttribute(pe,V,se){pe.setAttribute(`data-bs-${ct(V)}`,se)},removeDataAttribute(pe,V){pe.removeAttribute(`data-bs-${ct(V)}`)},getDataAttributes(pe){if(!pe)return{};const V={},se=Object.keys(pe.dataset).filter(ke=>ke.startsWith("bs")&&!ke.startsWith("bsConfig"));for(const ke of se){let _=ke.replace(/^bs/,"");_=_.charAt(0).toLowerCase()+_.slice(1),V[_]=We(pe.dataset[ke])}return V},getDataAttribute:(pe,V)=>We(pe.getAttribute(`data-bs-${ct(V)}`))};class rt{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(V){return V=this._mergeConfigObj(V),V=this._configAfterMerge(V),this._typeCheckConfig(V),V}_configAfterMerge(V){return V}_mergeConfigObj(V,se){const ke=s(se)?ut.getDataAttribute(se,"config"):{};return{...this.constructor.Default,...typeof ke=="object"?ke:{},...s(se)?ut.getDataAttributes(se):{},...typeof V=="object"?V:{}}}_typeCheckConfig(V,se=this.constructor.DefaultType){for(const[ke,_]of Object.entries(se)){const u=V[ke],m=s(u)?"element":l(u);if(!new RegExp(_).test(m))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${ke}" provided type "${m}" but expected type "${_}".`)}}}class Qe extends rt{constructor(V,se){super(),(V=p(V))&&(this._element=V,this._config=this._getConfig(se),i.set(this._element,this.constructor.DATA_KEY,this))}dispose(){i.remove(this._element,this.constructor.DATA_KEY),ve.off(this._element,this.constructor.EVENT_KEY);for(const V of Object.getOwnPropertyNames(this))this[V]=null}_queueCallback(V,se,ke=!0){J(V,se,ke)}_getConfig(V){return V=this._mergeConfigObj(V,this._element),V=this._configAfterMerge(V),this._typeCheckConfig(V),V}static getInstance(V){return i.get(p(V),this.DATA_KEY)}static getOrCreateInstance(V,se={}){return this.getInstance(V)||new this(V,typeof se=="object"?se:null)}static get VERSION(){return"5.3.8"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(V){return`${V}${this.EVENT_KEY}`}}const Ct=pe=>{let V=pe.getAttribute("data-bs-target");if(!V||V==="#"){let se=pe.getAttribute("href");if(!se||!se.includes("#")&&!se.startsWith("."))return null;se.includes("#")&&!se.startsWith("#")&&(se=`#${se.split("#")[1]}`),V=se&&se!=="#"?se.trim():null}return V?V.split(",").map(se=>a(se)).join(","):null},At={find:(pe,V=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(V,pe)),findOne:(pe,V=document.documentElement)=>Element.prototype.querySelector.call(V,pe),children:(pe,V)=>[].concat(...pe.children).filter(se=>se.matches(V)),parents(pe,V){const se=[];let ke=pe.parentNode.closest(V);for(;ke;)se.push(ke),ke=ke.parentNode.closest(V);return se},prev(pe,V){let se=pe.previousElementSibling;for(;se;){if(se.matches(V))return[se];se=se.previousElementSibling}return[]},next(pe,V){let se=pe.nextElementSibling;for(;se;){if(se.matches(V))return[se];se=se.nextElementSibling}return[]},focusableChildren(pe){const V=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(se=>`${se}:not([tabindex^="-"])`).join(",");return this.find(V,pe).filter(se=>!x(se)&&v(se))},getSelectorFromElement(pe){const V=Ct(pe);return V&&At.findOne(V)?V:null},getElementFromSelector(pe){const V=Ct(pe);return V?At.findOne(V):null},getMultipleElementsFromSelector(pe){const V=Ct(pe);return V?At.find(V):[]}},yn=(pe,V="hide")=>{const se=`click.dismiss${pe.EVENT_KEY}`,ke=pe.NAME;ve.on(document,se,`[data-bs-dismiss="${ke}"]`,function(_){if(["A","AREA"].includes(this.tagName)&&_.preventDefault(),x(this))return;const u=At.getElementFromSelector(this)||this.closest(`.${ke}`);pe.getOrCreateInstance(u)[V]()})},Mn=".bs.alert",Ce=`close${Mn}`,ze=`closed${Mn}`;class Ee extends Qe{static get NAME(){return"alert"}close(){if(ve.trigger(this._element,Ce).defaultPrevented)return;this._element.classList.remove("show");const V=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,V)}_destroyElement(){this._element.remove(),ve.trigger(this._element,ze),this.dispose()}static jQueryInterface(V){return this.each(function(){const se=Ee.getOrCreateInstance(this);if(typeof V=="string"){if(se[V]===void 0||V.startsWith("_")||V==="constructor")throw new TypeError(`No method named "${V}"`);se[V](this)}})}}yn(Ee,"close"),F(Ee);const pt='[data-bs-toggle="button"]';class dt extends Qe{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(V){return this.each(function(){const se=dt.getOrCreateInstance(this);V==="toggle"&&se[V]()})}}ve.on(document,"click.bs.button.data-api",pt,pe=>{pe.preventDefault();const V=pe.target.closest(pt);dt.getOrCreateInstance(V).toggle()}),F(dt);const nt=".bs.swipe",Et=`touchstart${nt}`,Dt=`touchmove${nt}`,Ft=`touchend${nt}`,Gt=`pointerdown${nt}`,En=`pointerup${nt}`,en={endCallback:null,leftCallback:null,rightCallback:null},An={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Ln extends rt{constructor(V,se){super(),this._element=V,V&&Ln.isSupported()&&(this._config=this._getConfig(se),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return en}static get DefaultType(){return An}static get NAME(){return"swipe"}dispose(){ve.off(this._element,nt)}_start(V){this._supportPointerEvents?this._eventIsPointerPenTouch(V)&&(this._deltaX=V.clientX):this._deltaX=V.touches[0].clientX}_end(V){this._eventIsPointerPenTouch(V)&&(this._deltaX=V.clientX-this._deltaX),this._handleSwipe(),X(this._config.endCallback)}_move(V){this._deltaX=V.touches&&V.touches.length>1?0:V.touches[0].clientX-this._deltaX}_handleSwipe(){const V=Math.abs(this._deltaX);if(V<=40)return;const se=V/this._deltaX;this._deltaX=0,se&&X(se>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(ve.on(this._element,Gt,V=>this._start(V)),ve.on(this._element,En,V=>this._end(V)),this._element.classList.add("pointer-event")):(ve.on(this._element,Et,V=>this._start(V)),ve.on(this._element,Dt,V=>this._move(V)),ve.on(this._element,Ft,V=>this._end(V)))}_eventIsPointerPenTouch(V){return this._supportPointerEvents&&(V.pointerType==="pen"||V.pointerType==="touch")}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const Wn=".bs.carousel",cn=".data-api",jt="ArrowLeft",Tn="ArrowRight",On="next",ki="prev",Yi="left",Ur="right",bo=`slide${Wn}`,nr=`slid${Wn}`,yr=`keydown${Wn}`,No=`mouseenter${Wn}`,xo=`mouseleave${Wn}`,Vc=`dragstart${Wn}`,Be=`load${Wn}${cn}`,me=`click${Wn}${cn}`,ge="carousel",Oe="active",Xe=".active",tt=".carousel-item",gt=Xe+tt,ft={[jt]:Ur,[Tn]:Yi},et={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},wt={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Zt extends Qe{constructor(V,se){super(V,se),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=At.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===ge&&this.cycle()}static get Default(){return et}static get DefaultType(){return wt}static get NAME(){return"carousel"}next(){this._slide(On)}nextWhenVisible(){!document.hidden&&v(this._element)&&this.next()}prev(){this._slide(ki)}pause(){this._isSliding&&h(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?ve.one(this._element,nr,()=>this.cycle()):this.cycle())}to(V){const se=this._getItems();if(V>se.length-1||V<0)return;if(this._isSliding)return void ve.one(this._element,nr,()=>this.to(V));const ke=this._getItemIndex(this._getActive());if(ke===V)return;const _=V>ke?On:ki;this._slide(_,se[V])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(V){return V.defaultInterval=V.interval,V}_addEventListeners(){this._config.keyboard&&ve.on(this._element,yr,V=>this._keydown(V)),this._config.pause==="hover"&&(ve.on(this._element,No,()=>this.pause()),ve.on(this._element,xo,()=>this._maybeEnableCycle())),this._config.touch&&Ln.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const se of At.find(".carousel-item img",this._element))ve.on(se,Vc,ke=>ke.preventDefault());const V={leftCallback:()=>this._slide(this._directionToOrder(Yi)),rightCallback:()=>this._slide(this._directionToOrder(Ur)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}};this._swipeHelper=new Ln(this._element,V)}_keydown(V){if(/input|textarea/i.test(V.target.tagName))return;const se=ft[V.key];se&&(V.preventDefault(),this._slide(this._directionToOrder(se)))}_getItemIndex(V){return this._getItems().indexOf(V)}_setActiveIndicatorElement(V){if(!this._indicatorsElement)return;const se=At.findOne(Xe,this._indicatorsElement);se.classList.remove(Oe),se.removeAttribute("aria-current");const ke=At.findOne(`[data-bs-slide-to="${V}"]`,this._indicatorsElement);ke&&(ke.classList.add(Oe),ke.setAttribute("aria-current","true"))}_updateInterval(){const V=this._activeElement||this._getActive();if(!V)return;const se=Number.parseInt(V.getAttribute("data-bs-interval"),10);this._config.interval=se||this._config.defaultInterval}_slide(V,se=null){if(this._isSliding)return;const ke=this._getActive(),_=V===On,u=se||Q(this._getItems(),ke,_,this._config.wrap);if(u===ke)return;const m=this._getItemIndex(u),y=O=>ve.trigger(this._element,O,{relatedTarget:u,direction:this._orderToDirection(V),from:this._getItemIndex(ke),to:m});if(y(bo).defaultPrevented||!ke||!u)return;const S=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(m),this._activeElement=u;const C=_?"carousel-item-start":"carousel-item-end",R=_?"carousel-item-next":"carousel-item-prev";u.classList.add(R),P(u),ke.classList.add(C),u.classList.add(C),this._queueCallback(()=>{u.classList.remove(C,R),u.classList.add(Oe),ke.classList.remove(Oe,R,C),this._isSliding=!1,y(nr)},ke,this._isAnimated()),S&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return At.findOne(gt,this._element)}_getItems(){return At.find(tt,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(V){return B()?V===Yi?ki:On:V===Yi?On:ki}_orderToDirection(V){return B()?V===ki?Yi:Ur:V===ki?Ur:Yi}static jQueryInterface(V){return this.each(function(){const se=Zt.getOrCreateInstance(this,V);if(typeof V!="number"){if(typeof V=="string"){if(se[V]===void 0||V.startsWith("_")||V==="constructor")throw new TypeError(`No method named "${V}"`);se[V]()}}else se.to(V)})}}ve.on(document,me,"[data-bs-slide], [data-bs-slide-to]",function(pe){const V=At.getElementFromSelector(this);if(!V||!V.classList.contains(ge))return;pe.preventDefault();const se=Zt.getOrCreateInstance(V),ke=this.getAttribute("data-bs-slide-to");return ke?(se.to(ke),void se._maybeEnableCycle()):ut.getDataAttribute(this,"slide")==="next"?(se.next(),void se._maybeEnableCycle()):(se.prev(),void se._maybeEnableCycle())}),ve.on(window,Be,()=>{const pe=At.find('[data-bs-ride="carousel"]');for(const V of pe)Zt.getOrCreateInstance(V)}),F(Zt);const on=".bs.collapse",Yt=`show${on}`,qn=`shown${on}`,Zn=`hide${on}`,Un=`hidden${on}`,oi=`click${on}.data-api`,Kn="show",Pi="collapse",hr="collapsing",es=`:scope .${Pi} .${Pi}`,br='[data-bs-toggle="collapse"]',Uo={parent:null,toggle:!0},ts={parent:"(null|element)",toggle:"boolean"};class Dr extends Qe{constructor(V,se){super(V,se),this._isTransitioning=!1,this._triggerArray=[];const ke=At.find(br);for(const _ of ke){const u=At.getSelectorFromElement(_),m=At.find(u).filter(y=>y===this._element);u!==null&&m.length&&this._triggerArray.push(_)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Uo}static get DefaultType(){return ts}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let V=[];if(this._config.parent&&(V=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(_=>_!==this._element).map(_=>Dr.getOrCreateInstance(_,{toggle:!1}))),V.length&&V[0]._isTransitioning||ve.trigger(this._element,Yt).defaultPrevented)return;for(const _ of V)_.hide();const se=this._getDimension();this._element.classList.remove(Pi),this._element.classList.add(hr),this._element.style[se]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const ke=`scroll${se[0].toUpperCase()+se.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(hr),this._element.classList.add(Pi,Kn),this._element.style[se]="",ve.trigger(this._element,qn)},this._element,!0),this._element.style[se]=`${this._element[ke]}px`}hide(){if(this._isTransitioning||!this._isShown()||ve.trigger(this._element,Zn).defaultPrevented)return;const V=this._getDimension();this._element.style[V]=`${this._element.getBoundingClientRect()[V]}px`,P(this._element),this._element.classList.add(hr),this._element.classList.remove(Pi,Kn);for(const se of this._triggerArray){const ke=At.getElementFromSelector(se);ke&&!this._isShown(ke)&&this._addAriaAndCollapsedClass([se],!1)}this._isTransitioning=!0,this._element.style[V]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(hr),this._element.classList.add(Pi),ve.trigger(this._element,Un)},this._element,!0)}_isShown(V=this._element){return V.classList.contains(Kn)}_configAfterMerge(V){return V.toggle=!!V.toggle,V.parent=p(V.parent),V}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const V=this._getFirstLevelChildren(br);for(const se of V){const ke=At.getElementFromSelector(se);ke&&this._addAriaAndCollapsedClass([se],this._isShown(ke))}}_getFirstLevelChildren(V){const se=At.find(es,this._config.parent);return At.find(V,this._config.parent).filter(ke=>!se.includes(ke))}_addAriaAndCollapsedClass(V,se){if(V.length)for(const ke of V)ke.classList.toggle("collapsed",!se),ke.setAttribute("aria-expanded",se)}static jQueryInterface(V){const se={};return typeof V=="string"&&/show|hide/.test(V)&&(se.toggle=!1),this.each(function(){const ke=Dr.getOrCreateInstance(this,se);if(typeof V=="string"){if(ke[V]===void 0)throw new TypeError(`No method named "${V}"`);ke[V]()}})}}ve.on(document,oi,br,function(pe){(pe.target.tagName==="A"||pe.delegateTarget&&pe.delegateTarget.tagName==="A")&&pe.preventDefault();for(const V of At.getMultipleElementsFromSelector(this))Dr.getOrCreateInstance(V,{toggle:!1}).toggle()}),F(Dr);var $r="top",ws="bottom",Vs="right",Hn="left",la="auto",Ts=[$r,ws,Vs,Hn],$o="start",ja="end",wo="clippingParents",To="viewport",Wa="popper",cc="reference",jo=Ts.reduce(function(pe,V){return pe.concat([V+"-"+$o,V+"-"+ja])},[]),So=[].concat(Ts,[la]).reduce(function(pe,V){return pe.concat([V,V+"-"+$o,V+"-"+ja])},[]),Ll="beforeRead",Mt="read",ca="afterRead",Fi="beforeMain",qi="main",Ol="afterMain",Bs="beforeWrite",uc="write",Ji="afterWrite",ua=[Ll,Mt,ca,Fi,qi,Ol,Bs,uc,Ji];function ln(pe){return pe?(pe.nodeName||"").toLowerCase():null}function Fn(pe){if(pe==null)return window;if(pe.toString()!=="[object Window]"){var V=pe.ownerDocument;return V&&V.defaultView||window}return pe}function Xn(pe){return pe instanceof Fn(pe).Element||pe instanceof Element}function fr(pe){return pe instanceof Fn(pe).HTMLElement||pe instanceof HTMLElement}function ro(pe){return typeof ShadowRoot<"u"&&(pe instanceof Fn(pe).ShadowRoot||pe instanceof ShadowRoot)}const ni={name:"applyStyles",enabled:!0,phase:"write",fn:function(pe){var V=pe.state;Object.keys(V.elements).forEach(function(se){var ke=V.styles[se]||{},_=V.attributes[se]||{},u=V.elements[se];fr(u)&&ln(u)&&(Object.assign(u.style,ke),Object.keys(_).forEach(function(m){var y=_[m];y===!1?u.removeAttribute(m):u.setAttribute(m,y===!0?"":y)}))})},effect:function(pe){var V=pe.state,se={popper:{position:V.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(V.elements.popper.style,se.popper),V.styles=se,V.elements.arrow&&Object.assign(V.elements.arrow.style,se.arrow),function(){Object.keys(V.elements).forEach(function(ke){var _=V.elements[ke],u=V.attributes[ke]||{},m=Object.keys(V.styles.hasOwnProperty(ke)?V.styles[ke]:se[ke]).reduce(function(y,S){return y[S]="",y},{});fr(_)&&ln(_)&&(Object.assign(_.style,m),Object.keys(u).forEach(function(y){_.removeAttribute(y)}))})}},requires:["computeStyles"]};function Ar(pe){return pe.split("-")[0]}var Wo=Math.max,Gs=Math.min,Cr=Math.round;function zi(){var pe=navigator.userAgentData;return pe!=null&&pe.brands&&Array.isArray(pe.brands)?pe.brands.map(function(V){return V.brand+"/"+V.version}).join(" "):navigator.userAgent}function fu(){return!/^((?!chrome|android).)*safari/i.test(zi())}function Fs(pe,V,se){V===void 0&&(V=!1),se===void 0&&(se=!1);var ke=pe.getBoundingClientRect(),_=1,u=1;V&&fr(pe)&&(_=pe.offsetWidth>0&&Cr(ke.width)/pe.offsetWidth||1,u=pe.offsetHeight>0&&Cr(ke.height)/pe.offsetHeight||1);var m=(Xn(pe)?Fn(pe):window).visualViewport,y=!fu()&&se,S=(ke.left+(y&&m?m.offsetLeft:0))/_,C=(ke.top+(y&&m?m.offsetTop:0))/u,R=ke.width/_,O=ke.height/u;return{width:R,height:O,top:C,right:S+R,bottom:C+O,left:S,x:S,y:C}}function ol(pe){var V=Fs(pe),se=pe.offsetWidth,ke=pe.offsetHeight;return Math.abs(V.width-se)<=1&&(se=V.width),Math.abs(V.height-ke)<=1&&(ke=V.height),{x:pe.offsetLeft,y:pe.offsetTop,width:se,height:ke}}function Vl(pe,V){var se=V.getRootNode&&V.getRootNode();if(pe.contains(V))return!0;if(se&&ro(se)){var ke=V;do{if(ke&&pe.isSameNode(ke))return!0;ke=ke.parentNode||ke.host}while(ke)}return!1}function Ss(pe){return Fn(pe).getComputedStyle(pe)}function Rh(pe){return["table","td","th"].indexOf(ln(pe))>=0}function Eo(pe){return((Xn(pe)?pe.ownerDocument:pe.document)||window.document).documentElement}function al(pe){return ln(pe)==="html"?pe:pe.assignedSlot||pe.parentNode||(ro(pe)?pe.host:null)||Eo(pe)}function Co(pe){return fr(pe)&&Ss(pe).position!=="fixed"?pe.offsetParent:null}function da(pe){for(var V=Fn(pe),se=Co(pe);se&&Rh(se)&&Ss(se).position==="static";)se=Co(se);return se&&(ln(se)==="html"||ln(se)==="body"&&Ss(se).position==="static")?V:se||(function(ke){var _=/firefox/i.test(zi());if(/Trident/i.test(zi())&&fr(ke)&&Ss(ke).position==="fixed")return null;var u=al(ke);for(ro(u)&&(u=u.host);fr(u)&&["html","body"].indexOf(ln(u))<0;){var m=Ss(u);if(m.transform!=="none"||m.perspective!=="none"||m.contain==="paint"||["transform","perspective"].indexOf(m.willChange)!==-1||_&&m.willChange==="filter"||_&&m.filter&&m.filter!=="none")return u;u=u.parentNode}return null})(pe)||V}function ns(pe){return["top","bottom"].indexOf(pe)>=0?"x":"y"}function Ni(pe,V,se){return Wo(pe,Gs(V,se))}function Bc(pe){return Object.assign({},{top:0,right:0,bottom:0,left:0},pe)}function ll(pe,V){return V.reduce(function(se,ke){return se[ke]=pe,se},{})}const qr={name:"arrow",enabled:!0,phase:"main",fn:function(pe){var V,se=pe.state,ke=pe.name,_=pe.options,u=se.elements.arrow,m=se.modifiersData.popperOffsets,y=Ar(se.placement),S=ns(y),C=[Hn,Vs].indexOf(y)>=0?"height":"width";if(u&&m){var R=(function(Me,$e){return Bc(typeof(Me=typeof Me=="function"?Me(Object.assign({},$e.rects,{placement:$e.placement})):Me)!="number"?Me:ll(Me,Ts))})(_.padding,se),O=ol(u),U=S==="y"?$r:Hn,G=S==="y"?ws:Vs,q=se.rects.reference[C]+se.rects.reference[S]-m[S]-se.rects.popper[C],ae=m[S]-se.rects.reference[S],he=da(u),ye=he?S==="y"?he.clientHeight||0:he.clientWidth||0:0,we=q/2-ae/2,be=R[U],Te=ye-O[C]-R[G],le=ye/2-O[C]/2+we,_e=Ni(be,le,Te),Ie=S;se.modifiersData[ke]=((V={})[Ie]=_e,V.centerOffset=_e-le,V)}},effect:function(pe){var V=pe.state,se=pe.options.element,ke=se===void 0?"[data-popper-arrow]":se;ke!=null&&(typeof ke!="string"||(ke=V.elements.popper.querySelector(ke)))&&Vl(V.elements.popper,ke)&&(V.elements.arrow=ke)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function is(pe){return pe.split("-")[1]}var mu={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Qi(pe){var V,se=pe.popper,ke=pe.popperRect,_=pe.placement,u=pe.variation,m=pe.offsets,y=pe.position,S=pe.gpuAcceleration,C=pe.adaptive,R=pe.roundOffsets,O=pe.isFixed,U=m.x,G=U===void 0?0:U,q=m.y,ae=q===void 0?0:q,he=typeof R=="function"?R({x:G,y:ae}):{x:G,y:ae};G=he.x,ae=he.y;var ye=m.hasOwnProperty("x"),we=m.hasOwnProperty("y"),be=Hn,Te=$r,le=window;if(C){var _e=da(se),Ie="clientHeight",Me="clientWidth";_e===Fn(se)&&Ss(_e=Eo(se)).position!=="static"&&y==="absolute"&&(Ie="scrollHeight",Me="scrollWidth"),(_===$r||(_===Hn||_===Vs)&&u===ja)&&(Te=ws,ae-=(O&&_e===le&&le.visualViewport?le.visualViewport.height:_e[Ie])-ke.height,ae*=S?1:-1),_!==Hn&&(_!==$r&&_!==ws||u!==ja)||(be=Vs,G-=(O&&_e===le&&le.visualViewport?le.visualViewport.width:_e[Me])-ke.width,G*=S?1:-1)}var $e,qe=Object.assign({position:y},C&&mu),Ze=R===!0?(function(ot,it){var mt=ot.x,$t=ot.y,lt=it.devicePixelRatio||1;return{x:Cr(mt*lt)/lt||0,y:Cr($t*lt)/lt||0}})({x:G,y:ae},Fn(se)):{x:G,y:ae};return G=Ze.x,ae=Ze.y,S?Object.assign({},qe,(($e={})[Te]=we?"0":"",$e[be]=ye?"0":"",$e.transform=(le.devicePixelRatio||1)<=1?"translate("+G+"px, "+ae+"px)":"translate3d("+G+"px, "+ae+"px, 0)",$e)):Object.assign({},qe,((V={})[Te]=we?ae+"px":"",V[be]=ye?G+"px":"",V.transform="",V))}const mr={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(pe){var V=pe.state,se=pe.options,ke=se.gpuAcceleration,_=ke===void 0||ke,u=se.adaptive,m=u===void 0||u,y=se.roundOffsets,S=y===void 0||y,C={placement:Ar(V.placement),variation:is(V.placement),popper:V.elements.popper,popperRect:V.rects.popper,gpuAcceleration:_,isFixed:V.options.strategy==="fixed"};V.modifiersData.popperOffsets!=null&&(V.styles.popper=Object.assign({},V.styles.popper,Qi(Object.assign({},C,{offsets:V.modifiersData.popperOffsets,position:V.options.strategy,adaptive:m,roundOffsets:S})))),V.modifiersData.arrow!=null&&(V.styles.arrow=Object.assign({},V.styles.arrow,Qi(Object.assign({},C,{offsets:V.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:S})))),V.attributes.popper=Object.assign({},V.attributes.popper,{"data-popper-placement":V.placement})},data:{}};var cl={passive:!0};const dc={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(pe){var V=pe.state,se=pe.instance,ke=pe.options,_=ke.scroll,u=_===void 0||_,m=ke.resize,y=m===void 0||m,S=Fn(V.elements.popper),C=[].concat(V.scrollParents.reference,V.scrollParents.popper);return u&&C.forEach(function(R){R.addEventListener("scroll",se.update,cl)}),y&&S.addEventListener("resize",se.update,cl),function(){u&&C.forEach(function(R){R.removeEventListener("scroll",se.update,cl)}),y&&S.removeEventListener("resize",se.update,cl)}},data:{}};var ul={left:"right",right:"left",bottom:"top",top:"bottom"};function Rr(pe){return pe.replace(/left|right|bottom|top/g,function(V){return ul[V]})}var hc={start:"end",end:"start"};function Ho(pe){return pe.replace(/start|end/g,function(V){return hc[V]})}function ko(pe){var V=Fn(pe);return{scrollLeft:V.pageXOffset,scrollTop:V.pageYOffset}}function ha(pe){return Fs(Eo(pe)).left+ko(pe).scrollLeft}function fa(pe){var V=Ss(pe),se=V.overflow,ke=V.overflowX,_=V.overflowY;return/auto|scroll|overlay|hidden/.test(se+_+ke)}function dd(pe){return["html","body","#document"].indexOf(ln(pe))>=0?pe.ownerDocument.body:fr(pe)&&fa(pe)?pe:dd(al(pe))}function Ha(pe,V){var se;V===void 0&&(V=[]);var ke=dd(pe),_=ke===((se=pe.ownerDocument)==null?void 0:se.body),u=Fn(ke),m=_?[u].concat(u.visualViewport||[],fa(ke)?ke:[]):ke,y=V.concat(m);return _?y:y.concat(Ha(al(m)))}function Go(pe){return Object.assign({},pe,{left:pe.x,top:pe.y,right:pe.x+pe.width,bottom:pe.y+pe.height})}function Io(pe,V,se){return V===To?Go((function(ke,_){var u=Fn(ke),m=Eo(ke),y=u.visualViewport,S=m.clientWidth,C=m.clientHeight,R=0,O=0;if(y){S=y.width,C=y.height;var U=fu();(U||!U&&_==="fixed")&&(R=y.offsetLeft,O=y.offsetTop)}return{width:S,height:C,x:R+ha(ke),y:O}})(pe,se)):Xn(V)?(function(ke,_){var u=Fs(ke,!1,_==="fixed");return u.top=u.top+ke.clientTop,u.left=u.left+ke.clientLeft,u.bottom=u.top+ke.clientHeight,u.right=u.left+ke.clientWidth,u.width=ke.clientWidth,u.height=ke.clientHeight,u.x=u.left,u.y=u.top,u})(V,se):Go((function(ke){var _,u=Eo(ke),m=ko(ke),y=(_=ke.ownerDocument)==null?void 0:_.body,S=Wo(u.scrollWidth,u.clientWidth,y?y.scrollWidth:0,y?y.clientWidth:0),C=Wo(u.scrollHeight,u.clientHeight,y?y.scrollHeight:0,y?y.clientHeight:0),R=-m.scrollLeft+ha(ke),O=-m.scrollTop;return Ss(y||u).direction==="rtl"&&(R+=Wo(u.clientWidth,y?y.clientWidth:0)-S),{width:S,height:C,x:R,y:O}})(Eo(pe)))}function Bl(pe){var V,se=pe.reference,ke=pe.element,_=pe.placement,u=_?Ar(_):null,m=_?is(_):null,y=se.x+se.width/2-ke.width/2,S=se.y+se.height/2-ke.height/2;switch(u){case $r:V={x:y,y:se.y-ke.height};break;case ws:V={x:y,y:se.y+se.height};break;case Vs:V={x:se.x+se.width,y:S};break;case Hn:V={x:se.x-ke.width,y:S};break;default:V={x:se.x,y:se.y}}var C=u?ns(u):null;if(C!=null){var R=C==="y"?"height":"width";switch(m){case $o:V[C]=V[C]-(se[R]/2-ke[R]/2);break;case ja:V[C]=V[C]+(se[R]/2-ke[R]/2)}}return V}function Ao(pe,V){V===void 0&&(V={});var se=V,ke=se.placement,_=ke===void 0?pe.placement:ke,u=se.strategy,m=u===void 0?pe.strategy:u,y=se.boundary,S=y===void 0?wo:y,C=se.rootBoundary,R=C===void 0?To:C,O=se.elementContext,U=O===void 0?Wa:O,G=se.altBoundary,q=G!==void 0&&G,ae=se.padding,he=ae===void 0?0:ae,ye=Bc(typeof he!="number"?he:ll(he,Ts)),we=U===Wa?cc:Wa,be=pe.rects.popper,Te=pe.elements[q?we:U],le=(function(it,mt,$t,lt){var Rt=mt==="clippingParents"?(function(xt){var Ut=Ha(al(xt)),Bt=["absolute","fixed"].indexOf(Ss(xt).position)>=0&&fr(xt)?da(xt):xt;return Xn(Bt)?Ut.filter(function(qt){return Xn(qt)&&Vl(qt,Bt)&&ln(qt)!=="body"}):[]})(it):[].concat(mt),vt=[].concat(Rt,[$t]),Wt=vt[0],ht=vt.reduce(function(xt,Ut){var Bt=Io(it,Ut,lt);return xt.top=Wo(Bt.top,xt.top),xt.right=Gs(Bt.right,xt.right),xt.bottom=Gs(Bt.bottom,xt.bottom),xt.left=Wo(Bt.left,xt.left),xt},Io(it,Wt,lt));return ht.width=ht.right-ht.left,ht.height=ht.bottom-ht.top,ht.x=ht.left,ht.y=ht.top,ht})(Xn(Te)?Te:Te.contextElement||Eo(pe.elements.popper),S,R,m),_e=Fs(pe.elements.reference),Ie=Bl({reference:_e,element:be,placement:_}),Me=Go(Object.assign({},be,Ie)),$e=U===Wa?Me:_e,qe={top:le.top-$e.top+ye.top,bottom:$e.bottom-le.bottom+ye.bottom,left:le.left-$e.left+ye.left,right:$e.right-le.right+ye.right},Ze=pe.modifiersData.offset;if(U===Wa&&Ze){var ot=Ze[_];Object.keys(qe).forEach(function(it){var mt=[Vs,ws].indexOf(it)>=0?1:-1,$t=[$r,ws].indexOf(it)>=0?"y":"x";qe[it]+=ot[$t]*mt})}return qe}function ma(pe,V){V===void 0&&(V={});var se=V,ke=se.placement,_=se.boundary,u=se.rootBoundary,m=se.padding,y=se.flipVariations,S=se.allowedAutoPlacements,C=S===void 0?So:S,R=is(ke),O=R?y?jo:jo.filter(function(q){return is(q)===R}):Ts,U=O.filter(function(q){return C.indexOf(q)>=0});U.length===0&&(U=O);var G=U.reduce(function(q,ae){return q[ae]=Ao(pe,{placement:ae,boundary:_,rootBoundary:u,padding:m})[Ar(ae)],q},{});return Object.keys(G).sort(function(q,ae){return G[q]-G[ae]})}const pa={name:"flip",enabled:!0,phase:"main",fn:function(pe){var V=pe.state,se=pe.options,ke=pe.name;if(!V.modifiersData[ke]._skip){for(var _=se.mainAxis,u=_===void 0||_,m=se.altAxis,y=m===void 0||m,S=se.fallbackPlacements,C=se.padding,R=se.boundary,O=se.rootBoundary,U=se.altBoundary,G=se.flipVariations,q=G===void 0||G,ae=se.allowedAutoPlacements,he=V.options.placement,ye=Ar(he),we=S||(ye!==he&&q?(function(xt){if(Ar(xt)===la)return[];var Ut=Rr(xt);return[Ho(xt),Ut,Ho(Ut)]})(he):[Rr(he)]),be=[he].concat(we).reduce(function(xt,Ut){return xt.concat(Ar(Ut)===la?ma(V,{placement:Ut,boundary:R,rootBoundary:O,padding:C,flipVariations:q,allowedAutoPlacements:ae}):Ut)},[]),Te=V.rects.reference,le=V.rects.popper,_e=new Map,Ie=!0,Me=be[0],$e=0;$e<be.length;$e++){var qe=be[$e],Ze=Ar(qe),ot=is(qe)===$o,it=[$r,ws].indexOf(Ze)>=0,mt=it?"width":"height",$t=Ao(V,{placement:qe,boundary:R,rootBoundary:O,altBoundary:U,padding:C}),lt=it?ot?Vs:Hn:ot?ws:$r;Te[mt]>le[mt]&&(lt=Rr(lt));var Rt=Rr(lt),vt=[];if(u&&vt.push($t[Ze]<=0),y&&vt.push($t[lt]<=0,$t[Rt]<=0),vt.every(function(xt){return xt})){Me=qe,Ie=!1;break}_e.set(qe,vt)}if(Ie)for(var Wt=function(xt){var Ut=be.find(function(Bt){var qt=_e.get(Bt);if(qt)return qt.slice(0,xt).every(function(Pn){return Pn})});if(Ut)return Me=Ut,"break"},ht=q?3:1;ht>0&&Wt(ht)!=="break";ht--);V.placement!==Me&&(V.modifiersData[ke]._skip=!0,V.placement=Me,V.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function qo(pe,V,se){return se===void 0&&(se={x:0,y:0}),{top:pe.top-V.height-se.y,right:pe.right-V.width+se.x,bottom:pe.bottom-V.height+se.y,left:pe.left-V.width-se.x}}function fc(pe){return[$r,Vs,ws,Hn].some(function(V){return pe[V]>=0})}const Ga={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(pe){var V=pe.state,se=pe.name,ke=V.rects.reference,_=V.rects.popper,u=V.modifiersData.preventOverflow,m=Ao(V,{elementContext:"reference"}),y=Ao(V,{altBoundary:!0}),S=qo(m,ke),C=qo(y,_,u),R=fc(S),O=fc(C);V.modifiersData[se]={referenceClippingOffsets:S,popperEscapeOffsets:C,isReferenceHidden:R,hasPopperEscaped:O},V.attributes.popper=Object.assign({},V.attributes.popper,{"data-popper-reference-hidden":R,"data-popper-escaped":O})}},dl={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(pe){var V=pe.state,se=pe.options,ke=pe.name,_=se.offset,u=_===void 0?[0,0]:_,m=So.reduce(function(R,O){return R[O]=(function(U,G,q){var ae=Ar(U),he=[Hn,$r].indexOf(ae)>=0?-1:1,ye=typeof q=="function"?q(Object.assign({},G,{placement:U})):q,we=ye[0],be=ye[1];return we=we||0,be=(be||0)*he,[Hn,Vs].indexOf(ae)>=0?{x:be,y:we}:{x:we,y:be}})(O,V.rects,u),R},{}),y=m[V.placement],S=y.x,C=y.y;V.modifiersData.popperOffsets!=null&&(V.modifiersData.popperOffsets.x+=S,V.modifiersData.popperOffsets.y+=C),V.modifiersData[ke]=m}},Fc={name:"popperOffsets",enabled:!0,phase:"read",fn:function(pe){var V=pe.state,se=pe.name;V.modifiersData[se]=Bl({reference:V.rects.reference,element:V.rects.popper,placement:V.placement})},data:{}},hl={name:"preventOverflow",enabled:!0,phase:"main",fn:function(pe){var V=pe.state,se=pe.options,ke=pe.name,_=se.mainAxis,u=_===void 0||_,m=se.altAxis,y=m!==void 0&&m,S=se.boundary,C=se.rootBoundary,R=se.altBoundary,O=se.padding,U=se.tether,G=U===void 0||U,q=se.tetherOffset,ae=q===void 0?0:q,he=Ao(V,{boundary:S,rootBoundary:C,padding:O,altBoundary:R}),ye=Ar(V.placement),we=is(V.placement),be=!we,Te=ns(ye),le=Te==="x"?"y":"x",_e=V.modifiersData.popperOffsets,Ie=V.rects.reference,Me=V.rects.popper,$e=typeof ae=="function"?ae(Object.assign({},V.rects,{placement:V.placement})):ae,qe=typeof $e=="number"?{mainAxis:$e,altAxis:$e}:Object.assign({mainAxis:0,altAxis:0},$e),Ze=V.modifiersData.offset?V.modifiersData.offset[V.placement]:null,ot={x:0,y:0};if(_e){if(u){var it,mt=Te==="y"?$r:Hn,$t=Te==="y"?ws:Vs,lt=Te==="y"?"height":"width",Rt=_e[Te],vt=Rt+he[mt],Wt=Rt-he[$t],ht=G?-Me[lt]/2:0,xt=we===$o?Ie[lt]:Me[lt],Ut=we===$o?-Me[lt]:-Ie[lt],Bt=V.elements.arrow,qt=G&&Bt?ol(Bt):{width:0,height:0},Pn=V.modifiersData["arrow#persistent"]?V.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},jn=Pn[mt],xn=Pn[$t],Dn=Ni(0,Ie[lt],qt[lt]),pi=be?Ie[lt]/2-ht-Dn-jn-qe.mainAxis:xt-Dn-jn-qe.mainAxis,fi=be?-Ie[lt]/2+ht+Dn+xn+qe.mainAxis:Ut+Dn+xn+qe.mainAxis,kn=V.elements.arrow&&da(V.elements.arrow),Mi=kn?Te==="y"?kn.clientTop||0:kn.clientLeft||0:0,Ui=(it=Ze?.[Te])!=null?it:0,Ki=Rt+fi-Ui,$i=Ni(G?Gs(vt,Rt+pi-Ui-Mi):vt,Rt,G?Wo(Wt,Ki):Wt);_e[Te]=$i,ot[Te]=$i-Rt}if(y){var Ns,ks=Te==="x"?$r:Hn,va=Te==="x"?ws:Vs,Ks=_e[le],er=le==="y"?"height":"width",ji=Ks+he[ks],Ci=Ks-he[va],Lr=[$r,Hn].indexOf(ye)!==-1,Xs=(Ns=Ze?.[le])!=null?Ns:0,rr=Lr?ji:Ks-Ie[er]-Me[er]-Xs+qe.altAxis,ao=Lr?Ks+Ie[er]+Me[er]-Xs-qe.altAxis:Ci,Dd=G&&Lr?(function(qc,Rd,Ja){var $l=Ni(qc,Rd,Ja);return $l>Ja?Ja:$l})(rr,Ks,ao):Ni(G?rr:ji,Ks,G?ao:Ci);_e[le]=Dd,ot[le]=Dd-Ks}V.modifiersData[ke]=ot}},requiresIfExists:["offset"]};function pu(pe,V,se){se===void 0&&(se=!1);var ke,_,u=fr(V),m=fr(V)&&(function(O){var U=O.getBoundingClientRect(),G=Cr(U.width)/O.offsetWidth||1,q=Cr(U.height)/O.offsetHeight||1;return G!==1||q!==1})(V),y=Eo(V),S=Fs(pe,m,se),C={scrollLeft:0,scrollTop:0},R={x:0,y:0};return(u||!u&&!se)&&((ln(V)!=="body"||fa(y))&&(C=(ke=V)!==Fn(ke)&&fr(ke)?{scrollLeft:(_=ke).scrollLeft,scrollTop:_.scrollTop}:ko(ke)),fr(V)?((R=Fs(V,!0)).x+=V.clientLeft,R.y+=V.clientTop):y&&(R.x=ha(y))),{x:S.left+C.scrollLeft-R.x,y:S.top+C.scrollTop-R.y,width:S.width,height:S.height}}function gu(pe){var V=new Map,se=new Set,ke=[];function _(u){se.add(u.name),[].concat(u.requires||[],u.requiresIfExists||[]).forEach(function(m){if(!se.has(m)){var y=V.get(m);y&&_(y)}}),ke.push(u)}return pe.forEach(function(u){V.set(u.name,u)}),pe.forEach(function(u){se.has(u.name)||_(u)}),ke}var so={placement:"bottom",modifiers:[],strategy:"absolute"};function wi(){for(var pe=arguments.length,V=new Array(pe),se=0;se<pe;se++)V[se]=arguments[se];return!V.some(function(ke){return!(ke&&typeof ke.getBoundingClientRect=="function")})}function zc(pe){pe===void 0&&(pe={});var V=pe,se=V.defaultModifiers,ke=se===void 0?[]:se,_=V.defaultOptions,u=_===void 0?so:_;return function(m,y,S){S===void 0&&(S=u);var C,R,O={placement:"bottom",orderedModifiers:[],options:Object.assign({},so,u),modifiersData:{},elements:{reference:m,popper:y},attributes:{},styles:{}},U=[],G=!1,q={state:O,setOptions:function(he){var ye=typeof he=="function"?he(O.options):he;ae(),O.options=Object.assign({},u,O.options,ye),O.scrollParents={reference:Xn(m)?Ha(m):m.contextElement?Ha(m.contextElement):[],popper:Ha(y)};var we,be,Te=(function(le){var _e=gu(le);return ua.reduce(function(Ie,Me){return Ie.concat(_e.filter(function($e){return $e.phase===Me}))},[])})((we=[].concat(ke,O.options.modifiers),be=we.reduce(function(le,_e){var Ie=le[_e.name];return le[_e.name]=Ie?Object.assign({},Ie,_e,{options:Object.assign({},Ie.options,_e.options),data:Object.assign({},Ie.data,_e.data)}):_e,le},{}),Object.keys(be).map(function(le){return be[le]})));return O.orderedModifiers=Te.filter(function(le){return le.enabled}),O.orderedModifiers.forEach(function(le){var _e=le.name,Ie=le.options,Me=Ie===void 0?{}:Ie,$e=le.effect;if(typeof $e=="function"){var qe=$e({state:O,name:_e,instance:q,options:Me});U.push(qe||function(){})}}),q.update()},forceUpdate:function(){if(!G){var he=O.elements,ye=he.reference,we=he.popper;if(wi(ye,we)){O.rects={reference:pu(ye,da(we),O.options.strategy==="fixed"),popper:ol(we)},O.reset=!1,O.placement=O.options.placement,O.orderedModifiers.forEach(function($e){return O.modifiersData[$e.name]=Object.assign({},$e.data)});for(var be=0;be<O.orderedModifiers.length;be++)if(O.reset!==!0){var Te=O.orderedModifiers[be],le=Te.fn,_e=Te.options,Ie=_e===void 0?{}:_e,Me=Te.name;typeof le=="function"&&(O=le({state:O,options:Ie,name:Me,instance:q})||O)}else O.reset=!1,be=-1}}},update:(C=function(){return new Promise(function(he){q.forceUpdate(),he(O)})},function(){return R||(R=new Promise(function(he){Promise.resolve().then(function(){R=void 0,he(C())})})),R}),destroy:function(){ae(),G=!0}};if(!wi(m,y))return q;function ae(){U.forEach(function(he){return he()}),U=[]}return q.setOptions(S).then(function(he){!G&&S.onFirstUpdate&&S.onFirstUpdate(he)}),q}}var _u=zc(),hd=zc({defaultModifiers:[dc,Fc,mr,ni]}),fl=zc({defaultModifiers:[dc,Fc,mr,ni,dl,pa,hl,qr,Ga]});const zs=Object.freeze(Object.defineProperty({__proto__:null,afterMain:Ol,afterRead:ca,afterWrite:Ji,applyStyles:ni,arrow:qr,auto:la,basePlacements:Ts,beforeMain:Fi,beforeRead:Ll,beforeWrite:Bs,bottom:ws,clippingParents:wo,computeStyles:mr,createPopper:fl,createPopperBase:_u,createPopperLite:hd,detectOverflow:Ao,end:ja,eventListeners:dc,flip:pa,hide:Ga,left:Hn,main:qi,modifierPhases:ua,offset:dl,placements:So,popper:Wa,popperGenerator:zc,popperOffsets:Fc,preventOverflow:hl,read:Mt,reference:cc,right:Vs,start:$o,top:$r,variationPlacements:jo,viewport:To,write:uc},Symbol.toStringTag,{value:"Module"})),Nc="dropdown",oo=".bs.dropdown",Ko=".data-api",A="ArrowUp",ee="ArrowDown",ue=`hide${oo}`,Pe=`hidden${oo}`,bt=`show${oo}`,Pt=`shown${oo}`,pn=`click${oo}${Ko}`,ui=`keydown${oo}${Ko}`,Pr=`keyup${oo}${Ko}`,Ti="show",ir='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',Yn=`${ir}.${Ti}`,qs=".dropdown-menu",qa=B()?"top-end":"top-start",ga=B()?"top-start":"top-end",Uc=B()?"bottom-end":"bottom-start",Ka=B()?"bottom-start":"bottom-end",hm=B()?"left-start":"right-start",yv=B()?"right-start":"left-start",bv={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},xv={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Xo extends Qe{constructor(V,se){super(V,se),this._popper=null,this._parent=this._element.parentNode,this._menu=At.next(this._element,qs)[0]||At.prev(this._element,qs)[0]||At.findOne(qs,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return bv}static get DefaultType(){return xv}static get NAME(){return Nc}toggle(){return this._isShown()?this.hide():this.show()}show(){if(x(this._element)||this._isShown())return;const V={relatedTarget:this._element};if(!ve.trigger(this._element,bt,V).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const se of[].concat(...document.body.children))ve.on(se,"mouseover",k);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Ti),this._element.classList.add(Ti),ve.trigger(this._element,Pt,V)}}hide(){if(x(this._element)||!this._isShown())return;const V={relatedTarget:this._element};this._completeHide(V)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(V){if(!ve.trigger(this._element,ue,V).defaultPrevented){if("ontouchstart"in document.documentElement)for(const se of[].concat(...document.body.children))ve.off(se,"mouseover",k);this._popper&&this._popper.destroy(),this._menu.classList.remove(Ti),this._element.classList.remove(Ti),this._element.setAttribute("aria-expanded","false"),ut.removeDataAttribute(this._menu,"popper"),ve.trigger(this._element,Pe,V)}}_getConfig(V){if(typeof(V=super._getConfig(V)).reference=="object"&&!s(V.reference)&&typeof V.reference.getBoundingClientRect!="function")throw new TypeError(`${Nc.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return V}_createPopper(){if(zs===void 0)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org/docs/v2/)");let V=this._element;this._config.reference==="parent"?V=this._parent:s(this._config.reference)?V=p(this._config.reference):typeof this._config.reference=="object"&&(V=this._config.reference);const se=this._getPopperConfig();this._popper=fl(V,this._menu,se)}_isShown(){return this._menu.classList.contains(Ti)}_getPlacement(){const V=this._parent;if(V.classList.contains("dropend"))return hm;if(V.classList.contains("dropstart"))return yv;if(V.classList.contains("dropup-center"))return"top";if(V.classList.contains("dropdown-center"))return"bottom";const se=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return V.classList.contains("dropup")?se?ga:qa:se?Ka:Uc}_detectNavbar(){return this._element.closest(".navbar")!==null}_getOffset(){const{offset:V}=this._config;return typeof V=="string"?V.split(",").map(se=>Number.parseInt(se,10)):typeof V=="function"?se=>V(se,this._element):V}_getPopperConfig(){const V={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(ut.setDataAttribute(this._menu,"popper","static"),V.modifiers=[{name:"applyStyles",enabled:!1}]),{...V,...X(this._config.popperConfig,[void 0,V])}}_selectMenuItem({key:V,target:se}){const ke=At.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(_=>v(_));ke.length&&Q(ke,se,V===ee,!ke.includes(se)).focus()}static jQueryInterface(V){return this.each(function(){const se=Xo.getOrCreateInstance(this,V);if(typeof V=="string"){if(se[V]===void 0)throw new TypeError(`No method named "${V}"`);se[V]()}})}static clearMenus(V){if(V.button===2||V.type==="keyup"&&V.key!=="Tab")return;const se=At.find(Yn);for(const ke of se){const _=Xo.getInstance(ke);if(!_||_._config.autoClose===!1)continue;const u=V.composedPath(),m=u.includes(_._menu);if(u.includes(_._element)||_._config.autoClose==="inside"&&!m||_._config.autoClose==="outside"&&m||_._menu.contains(V.target)&&(V.type==="keyup"&&V.key==="Tab"||/input|select|option|textarea|form/i.test(V.target.tagName)))continue;const y={relatedTarget:_._element};V.type==="click"&&(y.clickEvent=V),_._completeHide(y)}}static dataApiKeydownHandler(V){const se=/input|textarea/i.test(V.target.tagName),ke=V.key==="Escape",_=[A,ee].includes(V.key);if(!_&&!ke||se&&!ke)return;V.preventDefault();const u=this.matches(ir)?this:At.prev(this,ir)[0]||At.next(this,ir)[0]||At.findOne(ir,V.delegateTarget.parentNode),m=Xo.getOrCreateInstance(u);if(_)return V.stopPropagation(),m.show(),void m._selectMenuItem(V);m._isShown()&&(V.stopPropagation(),m.hide(),u.focus())}}ve.on(document,ui,ir,Xo.dataApiKeydownHandler),ve.on(document,ui,qs,Xo.dataApiKeydownHandler),ve.on(document,pn,Xo.clearMenus),ve.on(document,Pr,Xo.clearMenus),ve.on(document,pn,ir,function(pe){pe.preventDefault(),Xo.getOrCreateInstance(this).toggle()}),F(Xo);const Lh="backdrop",Oh="show",fd=`mousedown.bs.${Lh}`,ug={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},dg={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class hg extends rt{constructor(V){super(),this._config=this._getConfig(V),this._isAppended=!1,this._element=null}static get Default(){return ug}static get DefaultType(){return dg}static get NAME(){return Lh}show(V){if(!this._config.isVisible)return void X(V);this._append();const se=this._getElement();this._config.isAnimated&&P(se),se.classList.add(Oh),this._emulateAnimation(()=>{X(V)})}hide(V){this._config.isVisible?(this._getElement().classList.remove(Oh),this._emulateAnimation(()=>{this.dispose(),X(V)})):X(V)}dispose(){this._isAppended&&(ve.off(this._element,fd),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const V=document.createElement("div");V.className=this._config.className,this._config.isAnimated&&V.classList.add("fade"),this._element=V}return this._element}_configAfterMerge(V){return V.rootElement=p(V.rootElement),V}_append(){if(this._isAppended)return;const V=this._getElement();this._config.rootElement.append(V),ve.on(V,fd,()=>{X(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(V){J(V,this._getElement(),this._config.isAnimated)}}const mc=".bs.focustrap",vu=`focusin${mc}`,fm=`keydown.tab${mc}`,yu="backward",mm={autofocus:!0,trapElement:null},ml={autofocus:"boolean",trapElement:"element"};class md extends rt{constructor(V){super(),this._config=this._getConfig(V),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return mm}static get DefaultType(){return ml}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),ve.off(document,mc),ve.on(document,vu,V=>this._handleFocusin(V)),ve.on(document,fm,V=>this._handleKeydown(V)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,ve.off(document,mc))}_handleFocusin(V){const{trapElement:se}=this._config;if(V.target===document||V.target===se||se.contains(V.target))return;const ke=At.focusableChildren(se);ke.length===0?se.focus():this._lastTabNavDirection===yu?ke[ke.length-1].focus():ke[0].focus()}_handleKeydown(V){V.key==="Tab"&&(this._lastTabNavDirection=V.shiftKey?yu:"forward")}}const Vh=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",pd=".sticky-top",gd="padding-right",Bh="margin-right";class pm{constructor(){this._element=document.body}getWidth(){const V=document.documentElement.clientWidth;return Math.abs(window.innerWidth-V)}hide(){const V=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,gd,se=>se+V),this._setElementAttributes(Vh,gd,se=>se+V),this._setElementAttributes(pd,Bh,se=>se-V)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,gd),this._resetElementAttributes(Vh,gd),this._resetElementAttributes(pd,Bh)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(V,se,ke){const _=this.getWidth();this._applyManipulationCallback(V,u=>{if(u!==this._element&&window.innerWidth>u.clientWidth+_)return;this._saveInitialAttribute(u,se);const m=window.getComputedStyle(u).getPropertyValue(se);u.style.setProperty(se,`${ke(Number.parseFloat(m))}px`)})}_saveInitialAttribute(V,se){const ke=V.style.getPropertyValue(se);ke&&ut.setDataAttribute(V,se,ke)}_resetElementAttributes(V,se){this._applyManipulationCallback(V,ke=>{const _=ut.getDataAttribute(ke,se);_!==null?(ut.removeDataAttribute(ke,se),ke.style.setProperty(se,_)):ke.style.removeProperty(se)})}_applyManipulationCallback(V,se){if(s(V))se(V);else for(const ke of At.find(V,this._element))se(ke)}}const Po=".bs.modal",Fh=`hide${Po}`,_d=`hidePrevented${Po}`,gm=`hidden${Po}`,zh=`show${Po}`,wv=`shown${Po}`,_m=`resize${Po}`,fg=`click.dismiss${Po}`,vd=`mousedown.dismiss${Po}`,mg=`keydown.dismiss${Po}`,Nh=`click${Po}.data-api`,vm="modal-open",$c="show",ym="modal-static",Tv={backdrop:!0,focus:!0,keyboard:!0},Sv={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class jc extends Qe{constructor(V,se){super(V,se),this._dialog=At.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new pm,this._addEventListeners()}static get Default(){return Tv}static get DefaultType(){return Sv}static get NAME(){return"modal"}toggle(V){return this._isShown?this.hide():this.show(V)}show(V){this._isShown||this._isTransitioning||ve.trigger(this._element,zh,{relatedTarget:V}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(vm),this._adjustDialog(),this._backdrop.show(()=>this._showElement(V)))}hide(){this._isShown&&!this._isTransitioning&&(ve.trigger(this._element,Fh).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove($c),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated())))}dispose(){ve.off(window,Po),ve.off(this._dialog,Po),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new hg({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new md({trapElement:this._element})}_showElement(V){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const se=At.findOne(".modal-body",this._dialog);se&&(se.scrollTop=0),P(this._element),this._element.classList.add($c),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,ve.trigger(this._element,wv,{relatedTarget:V})},this._dialog,this._isAnimated())}_addEventListeners(){ve.on(this._element,mg,V=>{V.key==="Escape"&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())}),ve.on(window,_m,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),ve.on(this._element,vd,V=>{ve.one(this._element,fg,se=>{this._element===V.target&&this._element===se.target&&(this._config.backdrop!=="static"?this._config.backdrop&&this.hide():this._triggerBackdropTransition())})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(vm),this._resetAdjustments(),this._scrollBar.reset(),ve.trigger(this._element,gm)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(ve.trigger(this._element,_d).defaultPrevented)return;const V=this._element.scrollHeight>document.documentElement.clientHeight,se=this._element.style.overflowY;se==="hidden"||this._element.classList.contains(ym)||(V||(this._element.style.overflowY="hidden"),this._element.classList.add(ym),this._queueCallback(()=>{this._element.classList.remove(ym),this._queueCallback(()=>{this._element.style.overflowY=se},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const V=this._element.scrollHeight>document.documentElement.clientHeight,se=this._scrollBar.getWidth(),ke=se>0;if(ke&&!V){const _=B()?"paddingLeft":"paddingRight";this._element.style[_]=`${se}px`}if(!ke&&V){const _=B()?"paddingRight":"paddingLeft";this._element.style[_]=`${se}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(V,se){return this.each(function(){const ke=jc.getOrCreateInstance(this,V);if(typeof V=="string"){if(ke[V]===void 0)throw new TypeError(`No method named "${V}"`);ke[V](se)}})}}ve.on(document,Nh,'[data-bs-toggle="modal"]',function(pe){const V=At.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&pe.preventDefault(),ve.one(V,zh,ke=>{ke.defaultPrevented||ve.one(V,gm,()=>{v(this)&&this.focus()})});const se=At.findOne(".modal.show");se&&jc.getInstance(se).hide(),jc.getOrCreateInstance(V).toggle(this)}),yn(jc),F(jc);const Fl=".bs.offcanvas",bm=".data-api",Uh=`load${Fl}${bm}`,Wc="show",xm="showing",wm="hiding",pl=".offcanvas.show",$h=`show${Fl}`,_a=`shown${Fl}`,yd=`hide${Fl}`,Tm=`hidePrevented${Fl}`,pc=`hidden${Fl}`,bu=`resize${Fl}`,jh=`click${Fl}${bm}`,Wh=`keydown.dismiss${Fl}`,Ei={backdrop:!0,keyboard:!0,scroll:!1},bd={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class gl extends Qe{constructor(V,se){super(V,se),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Ei}static get DefaultType(){return bd}static get NAME(){return"offcanvas"}toggle(V){return this._isShown?this.hide():this.show(V)}show(V){this._isShown||ve.trigger(this._element,$h,{relatedTarget:V}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||new pm().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(xm),this._queueCallback(()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(Wc),this._element.classList.remove(xm),ve.trigger(this._element,_a,{relatedTarget:V})},this._element,!0))}hide(){this._isShown&&(ve.trigger(this._element,yd).defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(wm),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove(Wc,wm),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new pm().reset(),ve.trigger(this._element,pc)},this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const V=!!this._config.backdrop;return new hg({className:"offcanvas-backdrop",isVisible:V,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:V?()=>{this._config.backdrop!=="static"?this.hide():ve.trigger(this._element,Tm)}:null})}_initializeFocusTrap(){return new md({trapElement:this._element})}_addEventListeners(){ve.on(this._element,Wh,V=>{V.key==="Escape"&&(this._config.keyboard?this.hide():ve.trigger(this._element,Tm))})}static jQueryInterface(V){return this.each(function(){const se=gl.getOrCreateInstance(this,V);if(typeof V=="string"){if(se[V]===void 0||V.startsWith("_")||V==="constructor")throw new TypeError(`No method named "${V}"`);se[V](this)}})}}ve.on(document,jh,'[data-bs-toggle="offcanvas"]',function(pe){const V=At.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&pe.preventDefault(),x(this))return;ve.one(V,pc,()=>{v(this)&&this.focus()});const se=At.findOne(pl);se&&se!==V&&gl.getInstance(se).hide(),gl.getOrCreateInstance(V).toggle(this)}),ve.on(window,Uh,()=>{for(const pe of At.find(pl))gl.getOrCreateInstance(pe).show()}),ve.on(window,bu,()=>{for(const pe of At.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(pe).position!=="fixed"&&gl.getOrCreateInstance(pe).hide()}),yn(gl),F(gl);const xd={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},xu=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),pg=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,Hh=(pe,V)=>{const se=pe.nodeName.toLowerCase();return V.includes(se)?!xu.has(se)||!!pg.test(pe.nodeValue):V.filter(ke=>ke instanceof RegExp).some(ke=>ke.test(se))},zl={allowList:xd,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},gg={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},Gh={entry:"(string|element|function|null)",selector:"(string|element)"};class wu extends rt{constructor(V){super(),this._config=this._getConfig(V)}static get Default(){return zl}static get DefaultType(){return gg}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(V=>this._resolvePossibleFunction(V)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(V){return this._checkContent(V),this._config.content={...this._config.content,...V},this}toHtml(){const V=document.createElement("div");V.innerHTML=this._maybeSanitize(this._config.template);for(const[_,u]of Object.entries(this._config.content))this._setContent(V,u,_);const se=V.children[0],ke=this._resolvePossibleFunction(this._config.extraClass);return ke&&se.classList.add(...ke.split(" ")),se}_typeCheckConfig(V){super._typeCheckConfig(V),this._checkContent(V.content)}_checkContent(V){for(const[se,ke]of Object.entries(V))super._typeCheckConfig({selector:se,entry:ke},Gh)}_setContent(V,se,ke){const _=At.findOne(ke,V);_&&((se=this._resolvePossibleFunction(se))?s(se)?this._putElementInTemplate(p(se),_):this._config.html?_.innerHTML=this._maybeSanitize(se):_.textContent=se:_.remove())}_maybeSanitize(V){return this._config.sanitize?(function(se,ke,_){if(!se.length)return se;if(_&&typeof _=="function")return _(se);const u=new window.DOMParser().parseFromString(se,"text/html"),m=[].concat(...u.body.querySelectorAll("*"));for(const y of m){const S=y.nodeName.toLowerCase();if(!Object.keys(ke).includes(S)){y.remove();continue}const C=[].concat(...y.attributes),R=[].concat(ke["*"]||[],ke[S]||[]);for(const O of C)Hh(O,R)||y.removeAttribute(O.nodeName)}return u.body.innerHTML})(V,this._config.allowList,this._config.sanitizeFn):V}_resolvePossibleFunction(V){return X(V,[void 0,this])}_putElementInTemplate(V,se){if(this._config.html)return se.innerHTML="",void se.append(V);se.textContent=V.textContent}}const Tu=new Set(["sanitize","allowList","sanitizeFn"]),wd="fade",gc="show",Td=".tooltip-inner",Sd=".modal",Ed="hide.bs.modal",hn="hover",Zo="focus",qh="click",Cd={AUTO:"auto",TOP:"top",RIGHT:B()?"left":"right",BOTTOM:"bottom",LEFT:B()?"right":"left"},kd={allowList:xd,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},Es={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class Xa extends Qe{constructor(V,se){if(zs===void 0)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org/docs/v2/)");super(V,se),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return kd}static get DefaultType(){return Es}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),ve.off(this._element.closest(Sd),Ed,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const V=ve.trigger(this._element,this.constructor.eventName("show")),se=(T(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(V.defaultPrevented||!se)return;this._disposePopper();const ke=this._getTipElement();this._element.setAttribute("aria-describedby",ke.getAttribute("id"));const{container:_}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(_.append(ke),ve.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(ke),ke.classList.add(gc),"ontouchstart"in document.documentElement)for(const u of[].concat(...document.body.children))ve.on(u,"mouseover",k);this._queueCallback(()=>{ve.trigger(this._element,this.constructor.eventName("shown")),this._isHovered===!1&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(this._isShown()&&!ve.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(gc),"ontouchstart"in document.documentElement)for(const V of[].concat(...document.body.children))ve.off(V,"mouseover",k);this._activeTrigger[qh]=!1,this._activeTrigger[Zo]=!1,this._activeTrigger[hn]=!1,this._isHovered=null,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),ve.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(V){const se=this._getTemplateFactory(V).toHtml();if(!se)return null;se.classList.remove(wd,gc),se.classList.add(`bs-${this.constructor.NAME}-auto`);const ke=(_=>{do _+=Math.floor(1e6*Math.random());while(document.getElementById(_));return _})(this.constructor.NAME).toString();return se.setAttribute("id",ke),this._isAnimated()&&se.classList.add(wd),se}setContent(V){this._newContent=V,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(V){return this._templateFactory?this._templateFactory.changeContent(V):this._templateFactory=new wu({...this._config,content:V,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[Td]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(V){return this.constructor.getOrCreateInstance(V.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(wd)}_isShown(){return this.tip&&this.tip.classList.contains(gc)}_createPopper(V){const se=X(this._config.placement,[this,V,this._element]),ke=Cd[se.toUpperCase()];return fl(this._element,V,this._getPopperConfig(ke))}_getOffset(){const{offset:V}=this._config;return typeof V=="string"?V.split(",").map(se=>Number.parseInt(se,10)):typeof V=="function"?se=>V(se,this._element):V}_resolvePossibleFunction(V){return X(V,[this._element,this._element])}_getPopperConfig(V){const se={placement:V,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:ke=>{this._getTipElement().setAttribute("data-popper-placement",ke.state.placement)}}]};return{...se,...X(this._config.popperConfig,[void 0,se])}}_setListeners(){const V=this._config.trigger.split(" ");for(const se of V)if(se==="click")ve.on(this._element,this.constructor.eventName("click"),this._config.selector,ke=>{const _=this._initializeOnDelegatedTarget(ke);_._activeTrigger[qh]=!(_._isShown()&&_._activeTrigger[qh]),_.toggle()});else if(se!=="manual"){const ke=se===hn?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),_=se===hn?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");ve.on(this._element,ke,this._config.selector,u=>{const m=this._initializeOnDelegatedTarget(u);m._activeTrigger[u.type==="focusin"?Zo:hn]=!0,m._enter()}),ve.on(this._element,_,this._config.selector,u=>{const m=this._initializeOnDelegatedTarget(u);m._activeTrigger[u.type==="focusout"?Zo:hn]=m._element.contains(u.relatedTarget),m._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},ve.on(this._element.closest(Sd),Ed,this._hideModalHandler)}_fixTitle(){const V=this._element.getAttribute("title");V&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",V),this._element.setAttribute("data-bs-original-title",V),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(V,se){clearTimeout(this._timeout),this._timeout=setTimeout(V,se)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(V){const se=ut.getDataAttributes(this._element);for(const ke of Object.keys(se))Tu.has(ke)&&delete se[ke];return V={...se,...typeof V=="object"&&V?V:{}},V=this._mergeConfigObj(V),V=this._configAfterMerge(V),this._typeCheckConfig(V),V}_configAfterMerge(V){return V.container=V.container===!1?document.body:p(V.container),typeof V.delay=="number"&&(V.delay={show:V.delay,hide:V.delay}),typeof V.title=="number"&&(V.title=V.title.toString()),typeof V.content=="number"&&(V.content=V.content.toString()),V}_getDelegateConfig(){const V={};for(const[se,ke]of Object.entries(this._config))this.constructor.Default[se]!==ke&&(V[se]=ke);return V.selector=!1,V.trigger="manual",V}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(V){return this.each(function(){const se=Xa.getOrCreateInstance(this,V);if(typeof V=="string"){if(se[V]===void 0)throw new TypeError(`No method named "${V}"`);se[V]()}})}}F(Xa);const Kh=".popover-header",Sm=".popover-body",Xh={...Xa.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},_g={...Xa.DefaultType,content:"(null|string|element|function)"};class Hc extends Xa{static get Default(){return Xh}static get DefaultType(){return _g}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[Kh]:this._getTitle(),[Sm]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(V){return this.each(function(){const se=Hc.getOrCreateInstance(this,V);if(typeof V=="string"){if(se[V]===void 0)throw new TypeError(`No method named "${V}"`);se[V]()}})}}F(Hc);const _c=".bs.scrollspy",Em=`activate${_c}`,vg=`click${_c}`,yg=`load${_c}.data-api`,Za="active",Id="[href]",Zh=".nav-link",Cm=`${Zh}, .nav-item > ${Zh}, .list-group-item`,Yh={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},Ad={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class Nl extends Qe{constructor(V,se){super(V,se),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return Yh}static get DefaultType(){return Ad}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const V of this._observableSections.values())this._observer.observe(V)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(V){return V.target=p(V.target)||document.body,V.rootMargin=V.offset?`${V.offset}px 0px -30%`:V.rootMargin,typeof V.threshold=="string"&&(V.threshold=V.threshold.split(",").map(se=>Number.parseFloat(se))),V}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(ve.off(this._config.target,vg),ve.on(this._config.target,vg,Id,V=>{const se=this._observableSections.get(V.target.hash);if(se){V.preventDefault();const ke=this._rootElement||window,_=se.offsetTop-this._element.offsetTop;if(ke.scrollTo)return void ke.scrollTo({top:_,behavior:"smooth"});ke.scrollTop=_}}))}_getNewObserver(){const V={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(se=>this._observerCallback(se),V)}_observerCallback(V){const se=m=>this._targetLinks.get(`#${m.target.id}`),ke=m=>{this._previousScrollData.visibleEntryTop=m.target.offsetTop,this._process(se(m))},_=(this._rootElement||document.documentElement).scrollTop,u=_>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=_;for(const m of V){if(!m.isIntersecting){this._activeTarget=null,this._clearActiveClass(se(m));continue}const y=m.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(u&&y){if(ke(m),!_)return}else u||y||ke(m)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const V=At.find(Id,this._config.target);for(const se of V){if(!se.hash||x(se))continue;const ke=At.findOne(decodeURI(se.hash),this._element);v(ke)&&(this._targetLinks.set(decodeURI(se.hash),se),this._observableSections.set(se.hash,ke))}}_process(V){this._activeTarget!==V&&(this._clearActiveClass(this._config.target),this._activeTarget=V,V.classList.add(Za),this._activateParents(V),ve.trigger(this._element,Em,{relatedTarget:V}))}_activateParents(V){if(V.classList.contains("dropdown-item"))At.findOne(".dropdown-toggle",V.closest(".dropdown")).classList.add(Za);else for(const se of At.parents(V,".nav, .list-group"))for(const ke of At.prev(se,Cm))ke.classList.add(Za)}_clearActiveClass(V){V.classList.remove(Za);const se=At.find(`${Id}.${Za}`,V);for(const ke of se)ke.classList.remove(Za)}static jQueryInterface(V){return this.each(function(){const se=Nl.getOrCreateInstance(this,V);if(typeof V=="string"){if(se[V]===void 0||V.startsWith("_")||V==="constructor")throw new TypeError(`No method named "${V}"`);se[V]()}})}}ve.on(window,yg,()=>{for(const pe of At.find('[data-bs-spy="scroll"]'))Nl.getOrCreateInstance(pe)}),F(Nl);const Ul=".bs.tab",bg=`hide${Ul}`,km=`hidden${Ul}`,xg=`show${Ul}`,vc=`shown${Ul}`,wg=`click${Ul}`,Tg=`keydown${Ul}`,Ev=`load${Ul}`,Sg="ArrowLeft",Jh="ArrowRight",Eg="ArrowUp",Im="ArrowDown",Cs="Home",Cg="End",yc="active",kg="fade",Am="show",Yo=".dropdown-toggle",Qh=`:not(${Yo})`,Ig='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Jo=`.nav-link${Qh}, .list-group-item${Qh}, [role="tab"]${Qh}, ${Ig}`,_l=`.${yc}[data-bs-toggle="tab"], .${yc}[data-bs-toggle="pill"], .${yc}[data-bs-toggle="list"]`;class Qo extends Qe{constructor(V){super(V),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),ve.on(this._element,Tg,se=>this._keydown(se)))}static get NAME(){return"tab"}show(){const V=this._element;if(this._elemIsActive(V))return;const se=this._getActiveElem(),ke=se?ve.trigger(se,bg,{relatedTarget:V}):null;ve.trigger(V,xg,{relatedTarget:se}).defaultPrevented||ke&&ke.defaultPrevented||(this._deactivate(se,V),this._activate(V,se))}_activate(V,se){V&&(V.classList.add(yc),this._activate(At.getElementFromSelector(V)),this._queueCallback(()=>{V.getAttribute("role")==="tab"?(V.removeAttribute("tabindex"),V.setAttribute("aria-selected",!0),this._toggleDropDown(V,!0),ve.trigger(V,vc,{relatedTarget:se})):V.classList.add(Am)},V,V.classList.contains(kg)))}_deactivate(V,se){V&&(V.classList.remove(yc),V.blur(),this._deactivate(At.getElementFromSelector(V)),this._queueCallback(()=>{V.getAttribute("role")==="tab"?(V.setAttribute("aria-selected",!1),V.setAttribute("tabindex","-1"),this._toggleDropDown(V,!1),ve.trigger(V,km,{relatedTarget:se})):V.classList.remove(Am)},V,V.classList.contains(kg)))}_keydown(V){if(![Sg,Jh,Eg,Im,Cs,Cg].includes(V.key))return;V.stopPropagation(),V.preventDefault();const se=this._getChildren().filter(_=>!x(_));let ke;if([Cs,Cg].includes(V.key))ke=se[V.key===Cs?0:se.length-1];else{const _=[Jh,Im].includes(V.key);ke=Q(se,V.target,_,!0)}ke&&(ke.focus({preventScroll:!0}),Qo.getOrCreateInstance(ke).show())}_getChildren(){return At.find(Jo,this._parent)}_getActiveElem(){return this._getChildren().find(V=>this._elemIsActive(V))||null}_setInitialAttributes(V,se){this._setAttributeIfNotExists(V,"role","tablist");for(const ke of se)this._setInitialAttributesOnChild(ke)}_setInitialAttributesOnChild(V){V=this._getInnerElement(V);const se=this._elemIsActive(V),ke=this._getOuterElement(V);V.setAttribute("aria-selected",se),ke!==V&&this._setAttributeIfNotExists(ke,"role","presentation"),se||V.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(V,"role","tab"),this._setInitialAttributesOnTargetPanel(V)}_setInitialAttributesOnTargetPanel(V){const se=At.getElementFromSelector(V);se&&(this._setAttributeIfNotExists(se,"role","tabpanel"),V.id&&this._setAttributeIfNotExists(se,"aria-labelledby",`${V.id}`))}_toggleDropDown(V,se){const ke=this._getOuterElement(V);if(!ke.classList.contains("dropdown"))return;const _=(u,m)=>{const y=At.findOne(u,ke);y&&y.classList.toggle(m,se)};_(Yo,yc),_(".dropdown-menu",Am),ke.setAttribute("aria-expanded",se)}_setAttributeIfNotExists(V,se,ke){V.hasAttribute(se)||V.setAttribute(se,ke)}_elemIsActive(V){return V.classList.contains(yc)}_getInnerElement(V){return V.matches(Jo)?V:At.findOne(Jo,V)}_getOuterElement(V){return V.closest(".nav-item, .list-group-item")||V}static jQueryInterface(V){return this.each(function(){const se=Qo.getOrCreateInstance(this);if(typeof V=="string"){if(se[V]===void 0||V.startsWith("_")||V==="constructor")throw new TypeError(`No method named "${V}"`);se[V]()}})}}ve.on(document,wg,Ig,function(pe){["A","AREA"].includes(this.tagName)&&pe.preventDefault(),x(this)||Qo.getOrCreateInstance(this).show()}),ve.on(window,Ev,()=>{for(const pe of At.find(_l))Qo.getOrCreateInstance(pe)}),F(Qo);const Ya=".bs.toast",bn=`mouseover${Ya}`,Pm=`mouseout${Ya}`,Mm=`focusin${Ya}`,Su=`focusout${Ya}`,Gc=`hide${Ya}`,mn=`hidden${Ya}`,Dm=`show${Ya}`,Cv=`shown${Ya}`,Rm="hide",Eu="show",Pd="showing",Ag={animation:"boolean",autohide:"boolean",delay:"number"},kv={animation:!0,autohide:!0,delay:5e3};class Md extends Qe{constructor(V,se){super(V,se),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return kv}static get DefaultType(){return Ag}static get NAME(){return"toast"}show(){ve.trigger(this._element,Dm).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove(Rm),P(this._element),this._element.classList.add(Eu,Pd),this._queueCallback(()=>{this._element.classList.remove(Pd),ve.trigger(this._element,Cv),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&(ve.trigger(this._element,Gc).defaultPrevented||(this._element.classList.add(Pd),this._queueCallback(()=>{this._element.classList.add(Rm),this._element.classList.remove(Pd,Eu),ve.trigger(this._element,mn)},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Eu),super.dispose()}isShown(){return this._element.classList.contains(Eu)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(V,se){switch(V.type){case"mouseover":case"mouseout":this._hasMouseInteraction=se;break;case"focusin":case"focusout":this._hasKeyboardInteraction=se}if(se)return void this._clearTimeout();const ke=V.relatedTarget;this._element===ke||this._element.contains(ke)||this._maybeScheduleHide()}_setListeners(){ve.on(this._element,bn,V=>this._onInteraction(V,!0)),ve.on(this._element,Pm,V=>this._onInteraction(V,!1)),ve.on(this._element,Mm,V=>this._onInteraction(V,!0)),ve.on(this._element,Su,V=>this._onInteraction(V,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(V){return this.each(function(){const se=Md.getOrCreateInstance(this,V);if(typeof V=="string"){if(se[V]===void 0)throw new TypeError(`No method named "${V}"`);se[V](this)}})}}return yn(Md),F(Md),{Alert:Ee,Button:dt,Carousel:Zt,Collapse:Dr,Dropdown:Xo,Modal:jc,Offcanvas:gl,Popover:Hc,ScrollSpy:Nl,Tab:Qo,Toast:Md,Tooltip:Xa}})})(ww)),ww.exports}Lme();const Ome=st({...vn(),...ur(l5(),["fullHeight"]),...Ii()},"VApp"),Vme=It()({name:"VApp",props:Ome(),setup(e,t){let{slots:n}=t;const i=Zi(e),{layoutClasses:r,getLayoutItem:a,items:l,layoutRef:h}=u5({...e,fullHeight:!0}),{rtlClasses:s}=Ws();return Vt(()=>N("div",{ref:h,class:Tt(["v-application",i.themeClasses.value,r.value,s.value,e.class]),style:Qt([e.style])},[N("div",{class:"v-application__wrap"},[n.default?.()])])),{getLayoutItem:a,items:l,theme:i}}}),oj=st({text:String,...vn(),...ti()},"VToolbarTitle"),UP=It()({name:"VToolbarTitle",props:oj(),setup(e,t){let{slots:n}=t;return Vt(()=>{const i=!!(n.default||n.text||e.text);return ce(e.tag,{class:Tt(["v-toolbar-title",e.class]),style:Qt(e.style)},{default:()=>[i&&N("div",{class:"v-toolbar-title__placeholder"},[n.text?n.text():e.text,n.default?.()])]})}),{}}}),Bme=[null,"prominent","default","comfortable","compact"],aj=st({absolute:Boolean,collapse:Boolean,color:String,density:{type:String,default:"default",validator:e=>Bme.includes(e)},extended:{type:Boolean,default:null},extensionHeight:{type:[Number,String],default:48},flat:Boolean,floating:Boolean,height:{type:[Number,String],default:64},image:String,title:String,...sl(),...vn(),...Hs(),...Nr(),...ti({tag:"header"}),...Ii()},"VToolbar"),jk=It()({name:"VToolbar",props:aj(),setup(e,t){let{slots:n}=t;const{backgroundColorClasses:i,backgroundColorStyles:r}=tr(()=>e.color),{borderClasses:a}=Rl(e),{elevationClasses:l}=vo(e),{roundedClasses:h}=Qr(e),{themeClasses:s}=Zi(e),{rtlClasses:p}=Ws(),v=Xt(e.extended===null?!!n.extension?.():e.extended),x=fe(()=>parseInt(Number(e.height)+(e.density==="prominent"?Number(e.height):0)-(e.density==="comfortable"?8:0)-(e.density==="compact"?16:0),10)),T=fe(()=>v.value?parseInt(Number(e.extensionHeight)+(e.density==="prominent"?Number(e.extensionHeight):0)-(e.density==="comfortable"?4:0)-(e.density==="compact"?8:0),10):0);return Jr({VBtn:{variant:"text"}}),Vt(()=>{const k=!!(e.title||n.title),P=!!(n.image||e.image),M=n.extension?.();return v.value=e.extended===null?!!M:e.extended,ce(e.tag,{class:Tt(["v-toolbar",{"v-toolbar--absolute":e.absolute,"v-toolbar--collapse":e.collapse,"v-toolbar--flat":e.flat,"v-toolbar--floating":e.floating,[`v-toolbar--density-${e.density}`]:!0},i.value,a.value,l.value,h.value,s.value,p.value,e.class]),style:Qt([r.value,e.style])},{default:()=>[P&&N("div",{key:"image",class:"v-toolbar__image"},[n.image?ce(ci,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},n.image):ce(gh,{key:"image-img",cover:!0,src:e.image},null)]),ce(ci,{defaults:{VTabs:{height:dn(x.value)}}},{default:()=>[N("div",{class:"v-toolbar__content",style:{height:dn(x.value)}},[n.prepend&&N("div",{class:"v-toolbar__prepend"},[n.prepend?.()]),k&&ce(UP,{key:"title",text:e.title},{text:n.title}),n.default?.(),n.append&&N("div",{class:"v-toolbar__append"},[n.append?.()])])]}),ce(ci,{defaults:{VTabs:{height:dn(T.value)}}},{default:()=>[ce(rT,null,{default:()=>[v.value&&N("div",{class:"v-toolbar__extension",style:{height:dn(T.value)}},[M])]})]})]})}),{contentHeight:x,extensionHeight:T}}}),Fme=st({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function zme(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:n}=t;let i=0,r=0;const a=at(null),l=Xt(0),h=Xt(0),s=Xt(0),p=Xt(!1),v=Xt(!1),x=fe(()=>Number(e.scrollThreshold)),T=fe(()=>Sr((x.value-l.value)/x.value||0)),k=()=>{const P=a.value;if(!P||n&&!n.value)return;i=l.value,l.value="window"in P?P.pageYOffset:P.scrollTop;const M=P instanceof Window?document.documentElement.scrollHeight:P.scrollHeight;if(r!==M){r=M;return}v.value=l.value<i,s.value=Math.abs(l.value-x.value)};return Ht(v,()=>{h.value=h.value||l.value}),Ht(p,()=>{h.value=0}),cs(()=>{Ht(()=>e.scrollTarget,P=>{const M=P?document.querySelector(P):window;M&&M!==a.value&&(a.value?.removeEventListener("scroll",k),a.value=M,a.value.addEventListener("scroll",k,{passive:!0}))},{immediate:!0})}),Yr(()=>{a.value?.removeEventListener("scroll",k)}),n&&Ht(n,k,{immediate:!0}),{scrollThreshold:x,currentScroll:l,currentThreshold:s,isScrollActive:p,scrollRatio:T,isScrollingUp:v,savedScroll:h}}const Nme=st({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...aj(),...Jp(),...Fme(),height:{type:[Number,String],default:64}},"VAppBar"),Ume=It()({name:"VAppBar",props:Nme(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const i=at(),r=In(e,"modelValue"),a=fe(()=>{const F=new Set(e.scrollBehavior?.split(" ")??[]);return{hide:F.has("hide"),fullyHide:F.has("fully-hide"),inverted:F.has("inverted"),collapse:F.has("collapse"),elevate:F.has("elevate"),fadeImage:F.has("fade-image")}}),l=fe(()=>{const F=a.value;return F.hide||F.fullyHide||F.inverted||F.collapse||F.elevate||F.fadeImage||!r.value}),{currentScroll:h,scrollThreshold:s,isScrollingUp:p,scrollRatio:v}=zme(e,{canScroll:l}),x=Ue(()=>a.value.hide||a.value.fullyHide),T=fe(()=>e.collapse||a.value.collapse&&(a.value.inverted?v.value>0:v.value===0)),k=fe(()=>e.flat||a.value.fullyHide&&!r.value||a.value.elevate&&(a.value.inverted?h.value>0:h.value===0)),P=fe(()=>a.value.fadeImage?a.value.inverted?1-v.value:v.value:void 0),M=fe(()=>{if(a.value.hide&&a.value.inverted)return 0;const F=i.value?.contentHeight??0,X=i.value?.extensionHeight??0;return x.value?h.value<s.value||a.value.fullyHide?F+X:F:F+X});ra(()=>!!e.scrollBehavior,()=>{zr(()=>{x.value?a.value.inverted?r.value=h.value>s.value:r.value=p.value||h.value<s.value:r.value=!0})});const{ssrBootStyles:L}=rg(),{layoutItemStyles:B}=Qp({id:e.name,order:fe(()=>parseInt(e.order,10)),position:Ue(()=>e.location),layoutSize:M,elementSize:Xt(void 0),active:r,absolute:Ue(()=>e.absolute)});return Vt(()=>{const F=jk.filterProps(e);return ce(jk,kt({ref:i,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{...B.value,"--v-toolbar-image-opacity":P.value,height:void 0,...L.value},e.style]},F,{collapse:T.value,flat:k.value}),n)}),{}}}),$me=st({...ur(nT({icon:"$menu",variant:"text"}),["spaced"])},"VAppBarNavIcon"),jme=It()({name:"VAppBarNavIcon",props:$me(),setup(e,t){let{slots:n}=t;return Vt(()=>ce(mi,kt(e,{class:["v-app-bar-nav-icon"]}),n)),{}}}),Wme=It()({name:"VAppBarTitle",props:oj(),setup(e,t){let{slots:n}=t;return Vt(()=>ce(UP,kt(e,{class:"v-app-bar-title"}),n)),{}}}),Hme=(e,t,n)=>{if(e==null||t==null)return-1;if(!t.length)return 0;e=e.toString().toLocaleLowerCase(),t=t.toString().toLocaleLowerCase();const i=[];let r=e.indexOf(t);for(;~r;)i.push([r,r+t.length]),r=e.indexOf(t,r+t.length);return i.length?i:-1};function fC(e,t){if(!(e==null||typeof e=="boolean"||e===-1))return typeof e=="number"?[[e,e+t.length]]:Array.isArray(e[0])?e:[e]}const _v=st({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function Gme(e,t,n){const i=[],r=n?.default??Hme,a=n?.filterKeys?Gr(n.filterKeys):!1,l=Object.keys(n?.customKeyFilter??{}).length;if(!e?.length)return i;let h=null;e:for(let s=0;s<e.length;s++){const[p,v=p]=Gr(e[s]),x={},T={};let k=-1;if((t||l>0)&&!n?.noFilter){let P=!1;if(typeof p=="object"){if(p.type==="divider"||p.type==="subheader"){h?.type==="divider"&&p.type==="subheader"&&i.push(h),h={index:s,matches:{},type:p.type};continue}const B=a||Object.keys(v);P=B.length===l;for(const F of B){const X=Ps(v,F),J=n?.customKeyFilter?.[F];if(k=J?J(X,t,p):r(X,t,p),k!==-1&&k!==!1)J?x[F]=fC(k,t):T[F]=fC(k,t);else if(n?.filterMode==="every")continue e}}else k=r(p,t,p),k!==-1&&k!==!1&&(T.title=fC(k,t));const M=Object.keys(T).length,L=Object.keys(x).length;if(!M&&!L||n?.filterMode==="union"&&L!==l&&!M||n?.filterMode==="intersection"&&(L!==l||!M&&l>0&&!P))continue}h&&(i.push(h),h=null),i.push({index:s,matches:{...T,...x}})}return i}function vv(e,t,n,i){const r=Xt([]),a=Xt(new Map),l=fe(()=>i?.transform?Si(t).map(s=>[s,i.transform(s)]):Si(t));zr(()=>{const s=typeof n=="function"?n():Si(n),p=typeof s!="string"&&typeof s!="number"?"":String(s),v=Gme(l.value,p,{customKeyFilter:{...e.customKeyFilter,...Si(i?.customKeyFilter)},default:e.customFilter,filterKeys:e.filterKeys,filterMode:e.filterMode,noFilter:e.noFilter}),x=Si(t),T=[],k=new Map;v.forEach(P=>{let{index:M,matches:L}=P;const B=x[M];T.push(B),k.set(B.value,L)}),r.value=T,a.value=k});function h(s){return a.value.get(s.value)}return{filteredItems:r,filteredMatches:a,getMatches:h}}function lj(e,t,n){return n==null||!n.length?t:n.map((i,r)=>{const a=r===0?0:n[r-1][1],l=[N("span",{class:Tt(`${e}__unmask`)},[t.slice(a,i[0])]),N("span",{class:Tt(`${e}__mask`)},[t.slice(i[0],i[1])])];return r===n.length-1&&l.push(N("span",{class:Tt(`${e}__unmask`)},[t.slice(i[1])])),N(sn,null,[l])})}const qme=st({autoSelectFirst:{type:[Boolean,String]},clearOnSelect:Boolean,search:String,..._v({filterKeys:["title"]}),...MA(),...ur(_0({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"])},"VAutocomplete"),Kme=It()({name:"VAutocomplete",props:qme(),emits:{"update:focused":e=>!0,"update:search":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,t){let{slots:n}=t;const{t:i}=dr(),r=at(),a=Xt(!1),l=Xt(!0),h=Xt(!1),s=at(),p=at(),v=Xt(-1),x=Xt(null),{items:T,transformIn:k,transformOut:P}=wA(e),{textColorClasses:M,textColorStyles:L}=Fo(()=>r.value?.color),B=In(e,"search",""),F=In(e,"modelValue",[],Ee=>k(Ee===null?[null]:Gr(Ee)),Ee=>{const pt=P(Ee);return e.multiple?pt:pt[0]??null}),X=fe(()=>typeof e.counterValue=="function"?e.counterValue(F.value):typeof e.counterValue=="number"?e.counterValue:F.value.length),J=cv(e),{filteredItems:Q,getMatches:re}=vv(e,T,()=>x.value??(l.value?"":B.value)),Z=fe(()=>e.hideSelected&&x.value===null?Q.value.filter(Ee=>!F.value.some(pt=>pt.value===Ee.value)):Q.value),$=fe(()=>!!(e.chips||n.chip)),H=fe(()=>$.value||!!n.selection),W=fe(()=>F.value.map(Ee=>Ee.props.value)),te=fe(()=>(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&B.value===Z.value[0]?.title)&&Z.value.length>0&&!l.value&&!h.value),Y=fe(()=>e.hideNoData&&!Z.value.length||J.isReadonly.value||J.isDisabled.value),ne=In(e,"menu"),Se=fe({get:()=>ne.value,set:Ee=>{ne.value&&!Ee&&s.value?.openChildren.size||Ee&&Y.value||(ne.value=Ee)}}),{menuId:Fe,ariaExpanded:Ve,ariaControls:Ge,ariaLabel:je}=PA(e,Se),Ae=at(),Ke=AA(Ae,r);function ve(Ee){e.openOnClear&&(Se.value=!0),B.value=""}function Le(){Y.value||(Se.value=!0)}function We(Ee){Y.value||(a.value&&(Ee.preventDefault(),Ee.stopPropagation()),Se.value=!Se.value)}function ct(Ee){(N_(Ee)||Ee.key==="Backspace")&&r.value?.focus()}function ut(Ee){if(J.isReadonly.value)return;const pt=r.value?.selectionStart,dt=F.value.length;if(["Enter","ArrowDown","ArrowUp"].includes(Ee.key)&&Ee.preventDefault(),["Enter","ArrowDown"].includes(Ee.key)&&(Se.value=!0),["Escape"].includes(Ee.key)&&(Se.value=!1),te.value&&["Enter","Tab"].includes(Ee.key)&&!F.value.some(nt=>{let{value:Et}=nt;return Et===Z.value[0].value})&&ze(Z.value[0]),Ee.key==="ArrowDown"&&te.value&&Ae.value?.focus("next"),["Backspace","Delete"].includes(Ee.key)){if(!e.multiple&&H.value&&F.value.length>0&&!B.value)return ze(F.value[0],!1);if(~v.value){Ee.preventDefault();const nt=v.value;ze(F.value[v.value],!1),v.value=nt>=dt-1?dt-2:nt}else Ee.key==="Backspace"&&!B.value&&(v.value=dt-1);return}if(e.multiple)if(Ee.key==="ArrowLeft"){if(v.value<0&&pt&&pt>0)return;const nt=v.value>-1?v.value-1:dt-1;if(F.value[nt])v.value=nt;else{const Et=B.value?.length??null;v.value=-1,r.value?.setSelectionRange(Et,Et)}}else if(Ee.key==="ArrowRight"){if(v.value<0)return;const nt=v.value+1;F.value[nt]?v.value=nt:(v.value=-1,r.value?.setSelectionRange(0,0))}else~v.value&&N_(Ee)&&(v.value=-1)}function rt(Ee){if(z_(r.value,":autofill")||z_(r.value,":-webkit-autofill")){const pt=T.value.find(dt=>dt.title===Ee.target.value);pt&&ze(pt)}}function Qe(){e.eager&&p.value?.calculateVisibleItems()}function Ct(){a.value&&(l.value=!0,r.value?.focus()),x.value=null}function At(Ee){a.value=!0,setTimeout(()=>{h.value=!0})}function yn(Ee){h.value=!1}function Mn(Ee){(Ee==null||Ee===""&&!e.multiple&&!H.value)&&(F.value=[])}const Ce=Xt(!1);function ze(Ee){let pt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!(!Ee||Ee.props.disabled))if(e.multiple){const dt=F.value.findIndex(Et=>(e.valueComparator||po)(Et.value,Ee.value)),nt=pt??!~dt;if(~dt){const Et=nt?[...F.value,Ee]:[...F.value];Et.splice(dt,1),F.value=Et}else nt&&(F.value=[...F.value,Ee]);e.clearOnSelect&&(B.value="")}else{const dt=pt!==!1;F.value=dt?[Ee]:[],x.value=l.value?"":B.value??"",B.value=dt&&!H.value?Ee.title:"",Gn(()=>{Se.value=!1,l.value=!0})}}return Ht(a,(Ee,pt)=>{Ee!==pt&&(Ee?(Ce.value=!0,B.value=e.multiple||H.value?"":String(F.value.at(-1)?.props.title??""),l.value=!0,Gn(()=>Ce.value=!1)):(!e.multiple&&B.value==null&&(F.value=[]),Se.value=!1,!l.value&&B.value&&(x.value=B.value),B.value="",v.value=-1))}),Ht(B,Ee=>{!a.value||Ce.value||(Ee&&(Se.value=!0),l.value=!Ee)}),Ht(Se,Ee=>{if(!e.hideSelected&&Ee&&F.value.length&&l.value){const pt=Z.value.findIndex(dt=>F.value.some(nt=>dt.value===nt.value));Gi&&window.requestAnimationFrame(()=>{pt>=0&&p.value?.scrollToIndex(pt)})}Ee&&(x.value=null)}),Ht(T,(Ee,pt)=>{Se.value||a.value&&!pt.length&&Ee.length&&(Se.value=!0)}),Vt(()=>{const Ee=!!(!e.hideNoData||Z.value.length||n["prepend-item"]||n["append-item"]||n["no-data"]),pt=F.value.length>0,dt=_h.filterProps(e);return ce(_h,kt({ref:r},dt,{modelValue:B.value,"onUpdate:modelValue":[nt=>B.value=nt,Mn],focused:a.value,"onUpdate:focused":nt=>a.value=nt,validationValue:F.externalValue,counterValue:X.value,dirty:pt,onChange:rt,class:["v-autocomplete",`v-autocomplete--${e.multiple?"multiple":"single"}`,{"v-autocomplete--active-menu":Se.value,"v-autocomplete--chips":!!e.chips,"v-autocomplete--selection-slot":!!H.value,"v-autocomplete--selecting-index":v.value>-1},e.class],style:e.style,readonly:J.isReadonly.value,placeholder:pt?void 0:e.placeholder,"onClick:clear":ve,"onMousedown:control":Le,onKeydown:ut,"aria-expanded":Ve.value,"aria-controls":Ge.value}),{...n,default:()=>N(sn,null,[ce(W_,kt({id:Fe.value,ref:s,modelValue:Se.value,"onUpdate:modelValue":nt=>Se.value=nt,activator:"parent",contentClass:"v-autocomplete__content",disabled:Y.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,onAfterEnter:Qe,onAfterLeave:Ct},e.menuProps),{default:()=>[Ee&&ce(j_,kt({ref:Ae,filterable:!0,selected:W.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:nt=>nt.preventDefault(),onKeydown:ct,onFocusin:At,onFocusout:yn,tabindex:"-1",selectable:!0,"aria-live":"polite",color:e.itemColor??e.color},Ke,e.listProps),{default:()=>[n["prepend-item"]?.(),!Z.value.length&&!e.hideNoData&&(n["no-data"]?.()??ce(uu,{key:"no-data",title:i(e.noDataText)},null)),ce(aT,{ref:p,renderless:!0,items:Z.value,itemKey:"value"},{default:nt=>{let{item:Et,index:Dt,itemRef:Ft}=nt;const Gt=kt(Et.props,{ref:Ft,key:Et.value,active:te.value&&Dt===0?!0:void 0,onClick:()=>ze(Et,null)});return Et.type==="divider"?n.divider?.({props:Et.raw,index:Dt})??ce(tc,kt(Et.props,{key:`divider-${Dt}`}),null):Et.type==="subheader"?n.subheader?.({props:Et.raw,index:Dt})??ce(uv,kt(Et.props,{key:`subheader-${Dt}`}),null):n.item?.({item:Et,index:Dt,props:Gt})??ce(uu,kt(Gt,{role:"option"}),{prepend:En=>{let{isSelected:en}=En;return N(sn,null,[e.multiple&&!e.hideSelected?ce(rd,{key:Et.value,modelValue:en,ripple:!1,tabindex:"-1",onClick:An=>An.preventDefault()},null):void 0,Et.props.prependAvatar&&ce(oc,{image:Et.props.prependAvatar},null),Et.props.prependIcon&&ce(Hi,{icon:Et.props.prependIcon},null)])},title:()=>l.value?Et.title:lj("v-autocomplete",Et.title,re(Et)?.title)})}}),n["append-item"]?.()]})]}),F.value.map((nt,Et)=>{function Dt(en){en.stopPropagation(),en.preventDefault(),ze(nt,!1)}const Ft={"onClick:close":Dt,onKeydown(en){en.key!=="Enter"&&en.key!==" "||(en.preventDefault(),en.stopPropagation(),Dt(en))},onMousedown(en){en.preventDefault(),en.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},Gt=$.value?!!n.chip:!!n.selection,En=Gt?X1($.value?n.chip({item:nt,index:Et,props:Ft}):n.selection({item:nt,index:Et})):void 0;if(!(Gt&&!En))return N("div",{key:nt.value,class:Tt(["v-autocomplete__selection",Et===v.value&&["v-autocomplete__selection--selected",M.value]]),style:Qt(Et===v.value?L.value:{})},[$.value?n.chip?ce(ci,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:nt.title}}},{default:()=>[En]}):ce(Hu,kt({key:"chip",closable:e.closableChips,size:"small",text:nt.title,disabled:nt.props.disabled},Ft),null):En??N("span",{class:"v-autocomplete__selection-text"},[nt.title,e.multiple&&Et<F.value.length-1&&N("span",{class:"v-autocomplete__selection-comma"},[Jn(",")])])])})]),"append-inner":function(){for(var nt=arguments.length,Et=new Array(nt),Dt=0;Dt<nt;Dt++)Et[Dt]=arguments[Dt];return N(sn,null,[n["append-inner"]?.(...Et),e.menuIcon?ce(Hi,{class:"v-autocomplete__menu-icon",color:r.value?.fieldIconColor,icon:e.menuIcon,onMousedown:We,onClick:BN,"aria-label":je.value,title:je.value,tabindex:"-1"},null):void 0])}})}),yo({isFocused:a,isPristine:l,menu:Se,search:B,filteredItems:Q,select:ze},r)}}),Xme=st({bordered:Boolean,color:String,content:[Number,String],dot:Boolean,floating:Boolean,icon:Cn,inline:Boolean,label:{type:String,default:"$vuetify.badge"},max:[Number,String],modelValue:{type:Boolean,default:!0},offsetX:[Number,String],offsetY:[Number,String],textColor:String,...vn(),...Eh({location:"top end"}),...Nr(),...ti(),...Ii(),...Ch({transition:"scale-rotate-transition"}),...Ls()},"VBadge"),Zme=It()({name:"VBadge",inheritAttrs:!1,props:Xme(),setup(e,t){const{backgroundColorClasses:n,backgroundColorStyles:i}=tr(()=>e.color),{roundedClasses:r}=Qr(e),{t:a}=dr(),{textColorClasses:l,textColorStyles:h}=Fo(()=>e.textColor),{themeClasses:s}=Q1(),{locationStyles:p}=ig(e,!0,x=>(e.floating?e.dot?2:4:e.dot?8:12)+(["top","bottom"].includes(x)?Number(e.offsetY??0):["left","right"].includes(x)?Number(e.offsetX??0):0)),{dimensionStyles:v}=Os(e);return Vt(()=>{const x=Number(e.content),T=!e.max||isNaN(x)?e.content:x<=Number(e.max)?x:`${e.max}+`,[k,P]=jC(t.attrs,["aria-atomic","aria-label","aria-live","role","title"]);return ce(e.tag,kt({class:["v-badge",{"v-badge--bordered":e.bordered,"v-badge--dot":e.dot,"v-badge--floating":e.floating,"v-badge--inline":e.inline},e.class]},P,{style:e.style}),{default:()=>[N("div",{class:"v-badge__wrapper"},[t.slots.default?.(),ce(Oa,{transition:e.transition},{default:()=>[vi(N("span",kt({class:["v-badge__badge",s.value,n.value,r.value,l.value],style:[i.value,h.value,v.value,e.inline?{}:p.value],"aria-atomic":"true","aria-label":a(e.label,x),"aria-live":"polite",role:"status"},k),[e.dot?void 0:t.slots.badge?t.slots.badge?.():e.icon?ce(Hi,{icon:e.icon},null):T]),[[hu,e.modelValue]])]})])]})}),{}}}),Yme=st({color:String,density:String,...vn()},"VBannerActions"),cj=It()({name:"VBannerActions",props:Yme(),setup(e,t){let{slots:n}=t;return Jr({VBtn:{color:e.color,density:e.density,slim:!0,variant:"text"}}),Vt(()=>N("div",{class:Tt(["v-banner-actions",e.class]),style:Qt(e.style)},[n.default?.()])),{}}}),uj=Sh("v-banner-text"),Jme=st({avatar:String,bgColor:String,color:String,icon:Cn,lines:String,stacked:Boolean,sticky:Boolean,text:String,...sl(),...vn(),...xs(),...Ls(),...Yp({mobile:null}),...Hs(),...Eh(),...ov(),...Nr(),...ti(),...Ii()},"VBanner"),Qme=It()({name:"VBanner",props:Jme(),setup(e,t){let{slots:n}=t;const{backgroundColorClasses:i,backgroundColorStyles:r}=tr(()=>e.bgColor),{borderClasses:a}=Rl(e),{densityClasses:l}=$a(e),{displayClasses:h,mobile:s}=Dl(e),{dimensionStyles:p}=Os(e),{elevationClasses:v}=vo(e),{locationStyles:x}=ig(e),{positionClasses:T}=av(e),{roundedClasses:k}=Qr(e),{themeClasses:P}=Zi(e),M=Ue(()=>e.color),L=Ue(()=>e.density);Jr({VBannerActions:{color:M,density:L}}),Vt(()=>{const B=!!(e.text||n.text),F=!!(e.avatar||e.icon),X=!!(F||n.prepend);return ce(e.tag,{class:Tt(["v-banner",{"v-banner--stacked":e.stacked||s.value,"v-banner--sticky":e.sticky,[`v-banner--${e.lines}-line`]:!!e.lines},P.value,i.value,a.value,l.value,h.value,v.value,T.value,k.value,e.class]),style:Qt([r.value,p.value,x.value,e.style]),role:"banner"},{default:()=>[X&&N("div",{key:"prepend",class:"v-banner__prepend"},[n.prepend?ce(ci,{key:"prepend-defaults",disabled:!F,defaults:{VAvatar:{color:M.value,density:L.value,icon:e.icon,image:e.avatar}}},n.prepend):ce(oc,{key:"prepend-avatar",color:M.value,density:L.value,icon:e.icon,image:e.avatar},null)]),N("div",{class:"v-banner__content"},[B&&ce(uj,{key:"text"},{default:()=>[n.text?.()??e.text]}),n.default?.()]),n.actions&&ce(cj,{key:"actions"},n.actions)]})})}}),epe=st({baseColor:String,bgColor:String,color:String,grow:Boolean,mode:{type:String,validator:e=>!e||["horizontal","shift"].includes(e)},height:{type:[Number,String],default:56},active:{type:Boolean,default:!0},...sl(),...vn(),...xs(),...Hs(),...Nr(),...Jp({name:"bottom-navigation"}),...ti({tag:"header"}),...tg({selectedClass:"v-btn--selected"}),...Ii()},"VBottomNavigation"),tpe=It()({name:"VBottomNavigation",props:epe(),emits:{"update:active":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{themeClasses:i}=Q1(),{borderClasses:r}=Rl(e),{backgroundColorClasses:a,backgroundColorStyles:l}=tr(()=>e.bgColor),{densityClasses:h}=$a(e),{elevationClasses:s}=vo(e),{roundedClasses:p}=Qr(e),{ssrBootStyles:v}=rg(),x=fe(()=>Number(e.height)-(e.density==="comfortable"?8:0)-(e.density==="compact"?16:0)),T=In(e,"active",e.active),{layoutItemStyles:k}=Qp({id:e.name,order:fe(()=>parseInt(e.order,10)),position:Ue(()=>"bottom"),layoutSize:Ue(()=>T.value?x.value:0),elementSize:x,active:T,absolute:Ue(()=>e.absolute)});return om(e,dA),Jr({VBtn:{baseColor:Ue(()=>e.baseColor),color:Ue(()=>e.color),density:Ue(()=>e.density),stacked:Ue(()=>e.mode!=="horizontal"),variant:"text"}},{scoped:!0}),Vt(()=>ce(e.tag,{class:Tt(["v-bottom-navigation",{"v-bottom-navigation--active":T.value,"v-bottom-navigation--grow":e.grow,"v-bottom-navigation--shift":e.mode==="shift"},i.value,a.value,r.value,h.value,s.value,p.value,e.class]),style:Qt([l.value,k.value,{height:dn(x.value)},v.value,e.style])},{default:()=>[n.default&&N("div",{class:"v-bottom-navigation__content"},[n.default()])]})),{}}}),dj=st({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...p0({origin:"center center",scrollStrategy:"block",transition:{component:iT},zIndex:2400})},"VDialog"),Wk=It()({name:"VDialog",props:dj(),emits:{"update:modelValue":e=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(e,t){let{emit:n,slots:i}=t;const r=In(e,"modelValue"),{scopeId:a}=sg(),l=at();async function h(x){const T=x.relatedTarget,k=x.target;await Gn(),r.value&&T!==k&&l.value?.contentEl&&l.value?.globalTop&&![document,l.value.contentEl].includes(k)&&!l.value.contentEl.contains(k)&&F_(l.value.contentEl)[0]?.focus()}function s(x){if(x.key!=="Tab"||!l.value?.contentEl)return;const T=F_(l.value.contentEl);if(!T.length)return;const k=T[0],P=T[T.length-1],M=document.activeElement;x.shiftKey&&M===k?(x.preventDefault(),P.focus()):!x.shiftKey&&M===P&&(x.preventDefault(),k.focus())}Yr(()=>{document.removeEventListener("focusin",h),document.removeEventListener("keydown",s)}),Gi&&Ht(()=>r.value&&e.retainFocus,x=>{x?(document.addEventListener("focusin",h,{once:!0}),document.addEventListener("keydown",s)):(document.removeEventListener("focusin",h),document.removeEventListener("keydown",s))},{immediate:!0});function p(){n("afterEnter"),(e.scrim||e.retainFocus)&&l.value?.contentEl&&!l.value.contentEl.contains(document.activeElement)&&l.value.contentEl.focus({preventScroll:!0})}function v(){n("afterLeave")}return Ht(r,async x=>{x||(await Gn(),l.value.activatorEl?.focus({preventScroll:!0}))}),Vt(()=>{const x=sd.filterProps(e),T=kt({"aria-haspopup":"dialog"},e.activatorProps),k=kt({tabindex:-1},e.contentProps);return ce(sd,kt({ref:l,class:["v-dialog",{"v-dialog--fullscreen":e.fullscreen,"v-dialog--scrollable":e.scrollable},e.class],style:e.style},x,{modelValue:r.value,"onUpdate:modelValue":P=>r.value=P,"aria-modal":"true",activatorProps:T,contentProps:k,height:e.fullscreen?void 0:e.height,width:e.fullscreen?void 0:e.width,maxHeight:e.fullscreen?void 0:e.maxHeight,maxWidth:e.fullscreen?void 0:e.maxWidth,role:"dialog",onAfterEnter:p,onAfterLeave:v},a),{activator:i.activator,default:function(){for(var P=arguments.length,M=new Array(P),L=0;L<P;L++)M[L]=arguments[L];return ce(ci,{root:"VDialog"},{default:()=>[i.default?.(...M)]})}})}),yo({},l)}}),npe=st({inset:Boolean,...dj({transition:"bottom-sheet-transition"})},"VBottomSheet"),ipe=It()({name:"VBottomSheet",props:npe(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const i=In(e,"modelValue");return Vt(()=>{const r=Wk.filterProps(e);return ce(Wk,kt(r,{contentClass:["v-bottom-sheet__content",e.contentClass],modelValue:i.value,"onUpdate:modelValue":a=>i.value=a,class:["v-bottom-sheet",{"v-bottom-sheet--inset":e.inset},e.class],style:e.style}),n)}),{}}}),rpe=st({divider:[Number,String],...vn()},"VBreadcrumbsDivider"),hj=It()({name:"VBreadcrumbsDivider",props:rpe(),setup(e,t){let{slots:n}=t;return Vt(()=>N("li",{"aria-hidden":"true",class:Tt(["v-breadcrumbs-divider",e.class]),style:Qt(e.style)},[n?.default?.()??e.divider])),{}}}),spe=st({active:Boolean,activeClass:String,activeColor:String,color:String,disabled:Boolean,title:String,...vn(),...f0(),...ti({tag:"li"})},"VBreadcrumbsItem"),fj=It()({name:"VBreadcrumbsItem",props:spe(),setup(e,t){let{slots:n,attrs:i}=t;const r=h0(e,i),a=fe(()=>e.active||r.isActive?.value),{textColorClasses:l,textColorStyles:h}=Fo(()=>a.value?e.activeColor:e.color);return Vt(()=>ce(e.tag,{class:Tt(["v-breadcrumbs-item",{"v-breadcrumbs-item--active":a.value,"v-breadcrumbs-item--disabled":e.disabled,[`${e.activeClass}`]:a.value&&e.activeClass},l.value,e.class]),style:Qt([h.value,e.style]),"aria-current":a.value?"page":void 0},{default:()=>[r.isLink.value?N("a",kt({class:"v-breadcrumbs-item--link",onClick:r.navigate},r.linkProps),[n.default?.()??e.title]):n.default?.()??e.title]})),{}}}),ope=st({activeClass:String,activeColor:String,bgColor:String,color:String,disabled:Boolean,divider:{type:String,default:"/"},icon:Cn,items:{type:Array,default:()=>[]},...vn(),...xs(),...Nr(),...ti({tag:"ul"})},"VBreadcrumbs"),ape=It()({name:"VBreadcrumbs",props:ope(),setup(e,t){let{slots:n}=t;const{backgroundColorClasses:i,backgroundColorStyles:r}=tr(()=>e.bgColor),{densityClasses:a}=$a(e),{roundedClasses:l}=Qr(e);Jr({VBreadcrumbsDivider:{divider:Ue(()=>e.divider)},VBreadcrumbsItem:{activeClass:Ue(()=>e.activeClass),activeColor:Ue(()=>e.activeColor),color:Ue(()=>e.color),disabled:Ue(()=>e.disabled)}});const h=fe(()=>e.items.map(s=>typeof s=="string"?{item:{title:s},raw:s}:{item:s,raw:s}));return Vt(()=>{const s=!!(n.prepend||e.icon);return ce(e.tag,{class:Tt(["v-breadcrumbs",i.value,a.value,l.value,e.class]),style:Qt([r.value,e.style])},{default:()=>[s&&N("li",{key:"prepend",class:"v-breadcrumbs__prepend"},[n.prepend?ce(ci,{key:"prepend-defaults",disabled:!e.icon,defaults:{VIcon:{icon:e.icon,start:!0}}},n.prepend):ce(Hi,{key:"prepend-icon",start:!0,icon:e.icon},null)]),h.value.map((p,v,x)=>{let{item:T,raw:k}=p;return N(sn,null,[n.item?.({item:T,index:v})??ce(fj,kt({key:v,disabled:v>=x.length-1},typeof T=="string"?{title:T}:T),{default:n.title?()=>n.title?.({item:T,index:v}):void 0}),v<x.length-1&&ce(hj,null,{default:n.divider?()=>n.divider?.({item:k,index:v}):void 0})])}),n.default?.()]})}),{}}}),lpe=e=>{const{touchstartX:t,touchendX:n,touchstartY:i,touchendY:r}=e,a=.5,l=16;e.offsetX=n-t,e.offsetY=r-i,Math.abs(e.offsetY)<a*Math.abs(e.offsetX)&&(e.left&&n<t-l&&e.left(e),e.right&&n>t+l&&e.right(e)),Math.abs(e.offsetX)<a*Math.abs(e.offsetY)&&(e.up&&r<i-l&&e.up(e),e.down&&r>i+l&&e.down(e))};function cpe(e,t){const n=e.changedTouches[0];t.touchstartX=n.clientX,t.touchstartY=n.clientY,t.start?.({originalEvent:e,...t})}function upe(e,t){const n=e.changedTouches[0];t.touchendX=n.clientX,t.touchendY=n.clientY,t.end?.({originalEvent:e,...t}),lpe(t)}function dpe(e,t){const n=e.changedTouches[0];t.touchmoveX=n.clientX,t.touchmoveY=n.clientY,t.move?.({originalEvent:e,...t})}function hpe(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:e.left,right:e.right,up:e.up,down:e.down,start:e.start,move:e.move,end:e.end};return{touchstart:n=>cpe(n,t),touchend:n=>upe(n,t),touchmove:n=>dpe(n,t)}}function fpe(e,t){const n=t.value,i=n?.parent?e.parentElement:e,r=n?.options??{passive:!0},a=t.instance?.$.uid;if(!i||a===void 0)return;const l=hpe(t.value);i._touchHandlers=i._touchHandlers??Object.create(null),i._touchHandlers[a]=l,PN(l).forEach(h=>{i.addEventListener(h,l[h],r)})}function mpe(e,t){const n=t.value?.parent?e.parentElement:e,i=t.instance?.$.uid;if(!n?._touchHandlers||i===void 0)return;const r=n._touchHandlers[i];PN(r).forEach(a=>{n.removeEventListener(a,r[a])}),delete n._touchHandlers[i]}const M1={mounted:fpe,unmounted:mpe},mj=Symbol.for("vuetify:v-window"),pj=Symbol.for("vuetify:v-window-group"),BT=st({continuous:Boolean,nextIcon:{type:[Boolean,String,Function,Object],default:"$next"},prevIcon:{type:[Boolean,String,Function,Object],default:"$prev"},reverse:Boolean,showArrows:{type:[Boolean,String],validator:e=>typeof e=="boolean"||e==="hover"},verticalArrows:[Boolean,String],touch:{type:[Object,Boolean],default:void 0},direction:{type:String,default:"horizontal"},modelValue:null,disabled:Boolean,selectedClass:{type:String,default:"v-window-item--active"},mandatory:{type:[Boolean,String],default:"force"},crossfade:Boolean,transitionDuration:Number,...vn(),...ti(),...Ii()},"VWindow"),Wp=It()({name:"VWindow",directives:{vTouch:M1},props:BT(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{themeClasses:i}=Zi(e),{isRtl:r}=Ws(),{t:a}=dr(),l=om(e,pj),h=at(),s=fe(()=>r.value?!e.reverse:e.reverse),p=Xt(!1),v=fe(()=>{if(e.crossfade)return"v-window-crossfade-transition";const J=e.direction==="vertical"?"y":"x",re=(s.value?!p.value:p.value)?"-reverse":"";return`v-window-${J}${re}-transition`}),x=Xt(0),T=at(void 0),k=fe(()=>l.items.value.findIndex(J=>l.selected.value.includes(J.id)));Ht(k,(J,Q)=>{let re;const Z={left:0,top:0};Gi&&Q>=0&&(re=Z1(h.value),Z.left=re?.scrollLeft,Z.top=re?.scrollTop);const $=l.items.value.length,H=$-1;$<=2?p.value=J<Q:J===H&&Q===0?p.value=!0:J===0&&Q===H?p.value=!1:p.value=J<Q,Gn(()=>{if(!Gi||!re)return;re.scrollTop!==Z.top&&re.scrollTo({...Z,behavior:"instant"}),requestAnimationFrame(()=>{if(!re)return;re.scrollTop!==Z.top&&re.scrollTo({...Z,behavior:"instant"})})})},{flush:"sync"}),Mr(mj,{transition:v,isReversed:p,transitionCount:x,transitionHeight:T,rootRef:h});const P=Ue(()=>e.continuous||k.value!==0),M=Ue(()=>e.continuous||k.value!==l.items.value.length-1);function L(){P.value&&l.prev()}function B(){M.value&&l.next()}const F=fe(()=>{const J=[],Q={icon:r.value?e.nextIcon:e.prevIcon,class:`v-window__${s.value?"right":"left"}`,onClick:l.prev,"aria-label":a("$vuetify.carousel.prev")};J.push(P.value?n.prev?n.prev({props:Q}):ce(mi,Q,null):N("div",null,null));const re={icon:r.value?e.prevIcon:e.nextIcon,class:`v-window__${s.value?"left":"right"}`,onClick:l.next,"aria-label":a("$vuetify.carousel.next")};return J.push(M.value?n.next?n.next({props:re}):ce(mi,re,null):N("div",null,null)),J}),X=fe(()=>e.touch===!1?e.touch:{...{left:()=>{s.value?L():B()},right:()=>{s.value?B():L()},start:Q=>{let{originalEvent:re}=Q;re.stopPropagation()}},...e.touch===!0?{}:e.touch});return Vt(()=>vi(ce(e.tag,{ref:h,class:Tt(["v-window",{"v-window--show-arrows-on-hover":e.showArrows==="hover","v-window--vertical-arrows":!!e.verticalArrows,"v-window--crossfade":!!e.crossfade},i.value,e.class]),style:Qt([e.style,e.transitionDuration&&!nd?{"--v-window-transition-duration":dn(e.transitionDuration,"ms")}:void 0])},{default:()=>[N("div",{class:"v-window__container",style:{height:T.value}},[n.default?.({group:l}),e.showArrows!==!1&&N("div",{class:Tt(["v-window__controls",{"v-window__controls--left":e.verticalArrows==="left"||e.verticalArrows===!0},{"v-window__controls--right":e.verticalArrows==="right"}])},[F.value])]),n.additional?.({group:l})]}),[[M1,X.value]])),{group:l}}}),ppe=st({color:String,cycle:Boolean,delimiterIcon:{type:Cn,default:"$delimiter"},height:{type:[Number,String],default:500},hideDelimiters:Boolean,hideDelimiterBackground:Boolean,interval:{type:[Number,String],default:6e3,validator:e=>Number(e)>0},progress:[Boolean,String],verticalDelimiters:[Boolean,String],...BT({continuous:!0,mandatory:"force",showArrows:!0})},"VCarousel"),gpe=It()({name:"VCarousel",props:ppe(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const i=In(e,"modelValue"),{t:r}=dr(),a=at();let l=-1;Ht(i,s),Ht(()=>e.interval,s),Ht(()=>e.cycle,p=>{p?s():window.clearTimeout(l)}),cs(h);function h(){!e.cycle||!a.value||(l=window.setTimeout(a.value.group.next,Number(e.interval)>0?Number(e.interval):6e3))}function s(){window.clearTimeout(l),window.requestAnimationFrame(h)}return Vt(()=>{const p=Wp.filterProps(e);return ce(Wp,kt({ref:a},p,{modelValue:i.value,"onUpdate:modelValue":v=>i.value=v,class:["v-carousel",{"v-carousel--hide-delimiter-background":e.hideDelimiterBackground,"v-carousel--vertical-delimiters":e.verticalDelimiters},e.class],style:[{height:dn(e.height)},e.style]}),{default:n.default,additional:v=>{let{group:x}=v;return N(sn,null,[!e.hideDelimiters&&N("div",{class:"v-carousel__controls",style:{left:e.verticalDelimiters==="left"&&e.verticalDelimiters?0:"auto",right:e.verticalDelimiters==="right"?0:"auto"}},[x.items.value.length>0&&ce(ci,{defaults:{VBtn:{color:e.color,icon:e.delimiterIcon,size:"x-small",variant:"text"}},scoped:!0},{default:()=>[x.items.value.map((T,k)=>{const P={id:`carousel-item-${T.id}`,"aria-label":r("$vuetify.carousel.ariaLabel.delimiter",k+1,x.items.value.length),class:["v-carousel__controls__item",x.isSelected(T.id)&&"v-btn--active"],onClick:()=>x.select(T.id,!0)};return n.item?n.item({props:P,item:T}):ce(mi,kt(T,P),null)})]})]),e.progress&&ce(eT,{absolute:!0,class:"v-carousel__progress",color:typeof e.progress=="string"?e.progress:void 0,modelValue:(x.getItemIndex(i.value)+1)/x.items.value.length*100},null)])},prev:n.prev,next:n.next})}),{}}}),FT=st({reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},...vn(),...ng(),...kA()},"VWindowItem"),Hp=It()({name:"VWindowItem",directives:{vTouch:M1},props:FT(),emits:{"group:selected":e=>!0},setup(e,t){let{slots:n}=t;const i=xi(mj),r=Wf(e,pj),{isBooted:a}=rg();if(!i||!r)throw new Error("[Vuetify] VWindowItem must be used inside VWindow");const l=Xt(!1),h=fe(()=>a.value&&(i.isReversed.value?e.reverseTransition!==!1:e.transition!==!1));function s(){!l.value||!i||(l.value=!1,i.transitionCount.value>0&&(i.transitionCount.value-=1,i.transitionCount.value===0&&(i.transitionHeight.value=void 0)))}function p(){l.value||!i||(l.value=!0,i.transitionCount.value===0&&(i.transitionHeight.value=dn(i.rootRef.value?.clientHeight)),i.transitionCount.value+=1)}function v(){s()}function x(P){l.value&&Gn(()=>{!h.value||!l.value||!i||(i.transitionHeight.value=dn(P.clientHeight))})}const T=fe(()=>{const P=i.isReversed.value?e.reverseTransition:e.transition;return h.value?{name:typeof P!="string"?i.transition.value:P,onBeforeEnter:p,onAfterEnter:s,onEnterCancelled:v,onBeforeLeave:p,onAfterLeave:s,onLeaveCancelled:v,onEnter:x}:!1}),{hasContent:k}=IA(e,r.isSelected);return Vt(()=>ce(Oa,{transition:T.value,disabled:!a.value},{default:()=>[vi(N("div",{class:Tt(["v-window-item",r.selectedClass.value,e.class]),style:Qt(e.style)},[k.value&&n.default?.()]),[[hu,r.isSelected.value]])]})),{groupItem:r}}}),_pe=st({...M5(),...FT()},"VCarouselItem"),vpe=It()({name:"VCarouselItem",inheritAttrs:!1,props:_pe(),setup(e,t){let{slots:n,attrs:i}=t;Vt(()=>{const r=gh.filterProps(e),a=Hp.filterProps(e);return ce(Hp,kt({class:["v-carousel-item",e.class]},a),{default:()=>[ce(gh,kt(i,r),n)]})})}}),ype=Sh("v-code","code"),bpe=st({color:{type:Object},disabled:Boolean,dotSize:{type:[Number,String],default:10},height:{type:[Number,String],default:150},width:{type:[Number,String],default:300},...vn()},"VColorPickerCanvas"),xpe=ac({name:"VColorPickerCanvas",props:bpe(),emits:{"update:color":e=>!0,"update:position":e=>!0},setup(e,t){let{emit:n}=t;const i=Xt(!1),r=at(),a=Xt(parseFloat(e.width)),l=Xt(parseFloat(e.height)),h=at({x:0,y:0}),s=fe({get:()=>h.value,set(L){if(!r.value)return;const{x:B,y:F}=L;h.value=L,n("update:color",{h:e.color?.h??0,s:Sr(B,0,a.value)/a.value,v:1-Sr(F,0,l.value)/l.value,a:e.color?.a??1})}}),p=fe(()=>{const{x:L,y:B}=s.value,F=parseInt(e.dotSize,10)/2;return{width:dn(e.dotSize),height:dn(e.dotSize),transform:`translate(${dn(L-F)}, ${dn(B-F)})`}}),{resizeRef:v}=Lc(L=>{if(!v.el?.offsetParent)return;const{width:B,height:F}=L[0].contentRect;a.value=B,l.value=F});function x(L,B,F){const{left:X,top:J,width:Q,height:re}=F;s.value={x:Sr(L-X,0,Q),y:Sr(B-J,0,re)}}function T(L){L.type==="mousedown"&&L.preventDefault(),!e.disabled&&(k(L),window.addEventListener("mousemove",k),window.addEventListener("mouseup",P),window.addEventListener("touchmove",k),window.addEventListener("touchend",P))}function k(L){if(e.disabled||!r.value)return;i.value=!0;const B=Q2(L);x(B.clientX,B.clientY,r.value.getBoundingClientRect())}function P(){window.removeEventListener("mousemove",k),window.removeEventListener("mouseup",P),window.removeEventListener("touchmove",k),window.removeEventListener("touchend",P)}function M(){if(!r.value)return;const L=r.value,B=L.getContext("2d");if(!B)return;const F=B.createLinearGradient(0,0,L.width,0);F.addColorStop(0,"hsla(0, 0%, 100%, 1)"),F.addColorStop(1,`hsla(${e.color?.h??0}, 100%, 50%, 1)`),B.fillStyle=F,B.fillRect(0,0,L.width,L.height);const X=B.createLinearGradient(0,0,0,L.height);X.addColorStop(0,"hsla(0, 0%, 0%, 0)"),X.addColorStop(1,"hsla(0, 0%, 0%, 1)"),B.fillStyle=X,B.fillRect(0,0,L.width,L.height)}return Ht(()=>e.color?.h,M,{immediate:!0}),Ht(()=>[a.value,l.value],(L,B)=>{M(),h.value={x:s.value.x*L[0]/B[0],y:s.value.y*L[1]/B[1]}},{flush:"post"}),Ht(()=>e.color,()=>{if(i.value){i.value=!1;return}h.value=e.color?{x:e.color.s*a.value,y:(1-e.color.v)*l.value}:{x:0,y:0}},{deep:!0,immediate:!0}),cs(()=>M()),Vt(()=>N("div",{ref:v,class:Tt(["v-color-picker-canvas",e.class]),style:Qt(e.style),onMousedown:T,onTouchstartPassive:T},[N("canvas",{ref:r,width:a.value,height:l.value},null),e.color&&N("div",{class:Tt(["v-color-picker-canvas__dot",{"v-color-picker-canvas__dot--disabled":e.disabled}]),style:Qt(p.value)},null)])),{}}});function wpe(e,t){if(t){const{a:n,...i}=e;return i}return e}function Tpe(e,t){if(t==null||typeof t=="string"){const n=e.a!==1;if(t?.startsWith("rgb(")){const{r,g:a,b:l,a:h}=id(e);return`rgb(${r} ${a} ${l}`+(n?` / ${h})`:")")}else if(t?.startsWith("hsl(")){const{h:r,s:a,l,a:h}=qC(e);return`hsl(${r} ${Math.round(a*100)} ${Math.round(l*100)}`+(n?` / ${h})`:")")}const i=qN(e);return e.a===1?i.slice(0,7):i}if(typeof t=="object"){let n;return pp(t,["r","g","b"])?n=id(e):pp(t,["h","s","l"])?n=qC(e):pp(t,["h","s","v"])&&(n=e),wpe(n,!pp(t,["a"])&&e.a===1)}return e}const g_={h:0,s:0,v:0,a:1},Hk={inputProps:{type:"number",min:0},inputs:[{label:"R",max:255,step:1,getValue:e=>Math.round(e.r),getColor:(e,t)=>({...e,r:Number(t)}),localeKey:"redInput"},{label:"G",max:255,step:1,getValue:e=>Math.round(e.g),getColor:(e,t)=>({...e,g:Number(t)}),localeKey:"greenInput"},{label:"B",max:255,step:1,getValue:e=>Math.round(e.b),getColor:(e,t)=>({...e,b:Number(t)}),localeKey:"blueInput"},{label:"A",max:1,step:.01,getValue:e=>{let{a:t}=e;return t!=null?Math.round(t*100)/100:1},getColor:(e,t)=>({...e,a:Number(t)}),localeKey:"alphaInput"}],to:id,from:o0},Spe={...Hk,inputs:Hk.inputs?.slice(0,3)},Gk={inputProps:{type:"number",min:0},inputs:[{label:"H",max:360,step:1,getValue:e=>Math.round(e.h),getColor:(e,t)=>({...e,h:Number(t)}),localeKey:"hueInput"},{label:"S",max:1,step:.01,getValue:e=>Math.round(e.s*100)/100,getColor:(e,t)=>({...e,s:Number(t)}),localeKey:"saturationInput"},{label:"L",max:1,step:.01,getValue:e=>Math.round(e.l*100)/100,getColor:(e,t)=>({...e,l:Number(t)}),localeKey:"lightnessInput"},{label:"A",max:1,step:.01,getValue:e=>{let{a:t}=e;return t!=null?Math.round(t*100)/100:1},getColor:(e,t)=>({...e,a:Number(t)}),localeKey:"alphaInput"}],to:qC,from:tA},Epe={...Gk,inputs:Gk.inputs.slice(0,3)},gj={inputProps:{type:"text"},inputs:[{label:"HEXA",getValue:e=>e,getColor:(e,t)=>t,localeKey:"hexaInput"}],to:qN,from:SK},Cpe={...gj,inputs:[{label:"HEX",getValue:e=>e.slice(0,7),getColor:(e,t)=>t,localeKey:"hexInput"}]},Pp={rgb:Spe,rgba:Hk,hsl:Epe,hsla:Gk,hex:Cpe,hexa:gj},kpe=e=>{let{label:t,...n}=e;return N("div",{class:"v-color-picker-edit__input"},[N("input",uH(c3(n)),null),N("span",null,[t])])},Ipe=st({color:Object,disabled:Boolean,mode:{type:String,default:"rgba",validator:e=>Object.keys(Pp).includes(e)},modes:{type:Array,default:()=>Object.keys(Pp),validator:e=>Array.isArray(e)&&e.every(t=>Object.keys(Pp).includes(t))},...vn()},"VColorPickerEdit"),Ape=ac({name:"VColorPickerEdit",props:Ipe(),emits:{"update:color":e=>!0,"update:mode":e=>!0},setup(e,t){let{emit:n}=t;const{t:i}=dr(),r=fe(()=>e.modes.map(l=>({...Pp[l],name:l}))),a=fe(()=>{const l=r.value.find(s=>s.name===e.mode);if(!l)return[];const h=e.color?l.to(e.color):null;return l.inputs?.map(s=>{let{getValue:p,getColor:v,localeKey:x,...T}=s;return{...l.inputProps,...T,ariaLabel:i(`$vuetify.colorPicker.ariaLabel.${x}`),disabled:e.disabled,value:h&&p(h),onChange:k=>{const P=k.target;P&&n("update:color",l.from(v(h??l.to(g_),P.value)))}}})});return Vt(()=>N("div",{class:Tt(["v-color-picker-edit",e.class]),style:Qt(e.style)},[a.value?.map(l=>ce(kpe,l,null)),r.value.length>1&&ce(mi,{icon:"$unfold",size:"x-small",variant:"plain","aria-label":i("$vuetify.colorPicker.ariaLabel.changeFormat"),onClick:()=>{const l=r.value.findIndex(h=>h.name===e.mode);n("update:mode",r.value[(l+1)%r.value.length].name)}},null)])),{}}}),$P=Symbol.for("vuetify:v-slider");function qk(e,t,n){const i=n==="vertical",r=t.getBoundingClientRect(),a="touches"in e?e.touches[0]:e;return i?a.clientY-(r.top+r.height/2):a.clientX-(r.left+r.width/2)}function Ppe(e,t){return"touches"in e&&e.touches.length?e.touches[0][t]:"changedTouches"in e&&e.changedTouches.length?e.changedTouches[0][t]:e[t]}const _j=st({disabled:{type:Boolean,default:null},error:Boolean,readonly:{type:Boolean,default:null},max:{type:[Number,String],default:100},min:{type:[Number,String],default:0},step:{type:[Number,String],default:0},thumbColor:String,thumbLabel:{type:[Boolean,String],default:void 0,validator:e=>typeof e=="boolean"||e==="always"},thumbSize:{type:[Number,String],default:20},showTicks:{type:[Boolean,String],default:!1,validator:e=>typeof e=="boolean"||e==="always"},ticks:{type:[Array,Object]},tickSize:{type:[Number,String],default:2},color:String,trackColor:String,trackFillColor:String,trackSize:{type:[Number,String],default:4},direction:{type:String,default:"horizontal",validator:e=>["vertical","horizontal"].includes(e)},reverse:Boolean,noKeyboard:Boolean,...Nr(),...Hs({elevation:2}),ripple:{type:Boolean,default:!0}},"Slider"),vj=e=>{const t=fe(()=>parseFloat(e.min)),n=fe(()=>parseFloat(e.max)),i=fe(()=>Number(e.step)>0?parseFloat(e.step):0),r=fe(()=>Math.max(jL(i.value),jL(t.value)));function a(l){if(l=parseFloat(l),i.value<=0)return l;const h=Sr(l,t.value,n.value),s=t.value%i.value;let p=Math.round((h-s)/i.value)*i.value+s;return h>p&&p+i.value>n.value&&(p=n.value),parseFloat(Math.min(p,n.value).toFixed(r.value))}return{min:t,max:n,step:i,decimals:r,roundValue:a}},yj=e=>{let{props:t,steps:n,onSliderStart:i,onSliderMove:r,onSliderEnd:a,getActiveThumb:l}=e;const h=cv(t),{isRtl:s}=Ws(),p=Ue(()=>t.reverse),v=fe(()=>t.direction==="vertical"),x=fe(()=>v.value!==p.value),{min:T,max:k,step:P,decimals:M,roundValue:L}=n,B=fe(()=>parseInt(t.thumbSize,10)),F=fe(()=>parseInt(t.tickSize,10)),X=fe(()=>parseInt(t.trackSize,10)),J=fe(()=>(k.value-T.value)/P.value),Q=fe(()=>t.error||h.isDisabled.value?void 0:t.thumbColor??t.color),re=fe(()=>t.error||h.isDisabled.value?void 0:t.thumbColor),Z=fe(()=>t.error||h.isDisabled.value?void 0:t.trackColor??t.color),$=fe(()=>t.error||h.isDisabled.value?void 0:t.trackFillColor??t.color),H=Xt(!1),W=Xt(0),te=at(),Y=at();function ne(Qe){const Ct=te.value?.$el;if(!Ct)return;const At=t.direction==="vertical",yn=At?"top":"left",Mn=At?"height":"width",Ce=At?"clientY":"clientX",{[yn]:ze,[Mn]:Ee}=Ct.getBoundingClientRect(),pt=Ppe(Qe,Ce);let dt=Sr((pt-ze-W.value)/Ee)||0;return(At?x.value:x.value!==s.value)&&(dt=1-dt),L(T.value+dt*(k.value-T.value))}const Se=Qe=>{const Ct=ne(Qe);Ct!=null&&a({value:Ct}),H.value=!1,W.value=0},Fe=Qe=>{const Ct=ne(Qe);Y.value=l(Qe),Y.value&&(H.value=!0,Y.value.contains(Qe.target)?W.value=qk(Qe,Y.value,t.direction):(W.value=0,Ct!=null&&r({value:Ct})),Ct!=null&&i({value:Ct}),Gn(()=>Y.value?.focus()))},Ve={passive:!0,capture:!0};function Ge(Qe){const Ct=ne(Qe);Ct!=null&&r({value:Ct})}function je(Qe){Qe.stopPropagation(),Qe.preventDefault(),Se(Qe),window.removeEventListener("mousemove",Ge,Ve),window.removeEventListener("mouseup",je)}function Ae(Qe){Se(Qe),window.removeEventListener("touchmove",Ge,Ve),Qe.target?.removeEventListener("touchend",Ae)}function Ke(Qe){Fe(Qe),window.addEventListener("touchmove",Ge,Ve),Qe.target?.addEventListener("touchend",Ae,{passive:!1})}function ve(Qe){Qe.button===0&&(Qe.preventDefault(),Fe(Qe),window.addEventListener("mousemove",Ge,Ve),window.addEventListener("mouseup",je,{passive:!1}))}const Le=Qe=>{const Ct=(Qe-T.value)/(k.value-T.value)*100;return Sr(isNaN(Ct)?0:Ct,0,100)},We=Ue(()=>t.showTicks),ct=fe(()=>We.value?t.ticks?Array.isArray(t.ticks)?t.ticks.map(Qe=>({value:Qe,position:Le(Qe),label:Qe.toString()})):Object.keys(t.ticks).map(Qe=>({value:parseFloat(Qe),position:Le(parseFloat(Qe)),label:t.ticks[Qe]})):J.value!==1/0?Ql(J.value+1).map(Qe=>{const Ct=T.value+Qe*P.value;return{value:Ct,position:Le(Ct)}}):[]:[]),ut=fe(()=>ct.value.some(Qe=>{let{label:Ct}=Qe;return!!Ct})),rt={activeThumbRef:Y,color:Ue(()=>t.color),decimals:M,disabled:h.isDisabled,direction:Ue(()=>t.direction),elevation:Ue(()=>t.elevation),hasLabels:ut,isReversed:p,indexFromEnd:x,min:T,max:k,mousePressed:H,noKeyboard:Ue(()=>t.noKeyboard),numTicks:J,onSliderMousedown:ve,onSliderTouchstart:Ke,parsedTicks:ct,parseMouseMove:ne,position:Le,readonly:h.isReadonly,rounded:Ue(()=>t.rounded),roundValue:L,showTicks:We,startOffset:W,step:P,thumbSize:B,thumbColor:Q,thumbLabelColor:re,thumbLabel:Ue(()=>t.thumbLabel),ticks:Ue(()=>t.ticks),tickSize:F,trackColor:Z,trackContainerRef:te,trackFillColor:$,trackSize:X,vertical:v};return Mr($P,rt),rt},Mpe=st({focused:Boolean,max:{type:Number,required:!0},min:{type:Number,required:!0},modelValue:{type:Number,required:!0},position:{type:Number,required:!0},ripple:{type:[Boolean,Object],default:!0},name:String,noKeyboard:Boolean,...vn()},"VSliderThumb"),Kk=It()({name:"VSliderThumb",directives:{vRipple:za},props:Mpe(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n,emit:i}=t;const r=xi($P),{isRtl:a,rtlClasses:l}=Ws();if(!r)throw new Error("[Vuetify] v-slider-thumb must be used inside v-slider or v-range-slider");const{min:h,max:s,thumbColor:p,thumbLabelColor:v,step:x,disabled:T,thumbSize:k,thumbLabel:P,direction:M,isReversed:L,vertical:B,readonly:F,elevation:X,mousePressed:J,decimals:Q,indexFromEnd:re}=r,Z=fe(()=>T.value?void 0:X.value),{elevationClasses:$}=vo(Z),{textColorClasses:H,textColorStyles:W}=Fo(p),{backgroundColorClasses:te,backgroundColorStyles:Y}=tr(v),{pageup:ne,pagedown:Se,end:Fe,home:Ve,left:Ge,right:je,down:Ae,up:Ke}=$C,ve=[ne,Se,Fe,Ve,Ge,je,Ae,Ke],Le=fe(()=>x.value?[1,2,3]:[1,5,10]);function We(ut,rt){if(e.noKeyboard||T.value||!ve.includes(ut.key))return;ut.preventDefault();const Qe=x.value||.1,Ct=(s.value-h.value)/Qe;if([Ge,je,Ae,Ke].includes(ut.key)){const yn=(B.value?[a.value?Ge:je,L.value?Ae:Ke]:re.value!==a.value?[Ge,Ke]:[je,Ke]).includes(ut.key)?1:-1,Mn=ut.shiftKey?2:ut.ctrlKey?1:0;yn===-1&&rt===s.value&&!Mn&&!Number.isInteger(Ct)?rt=rt-Ct%1*Qe:rt=rt+yn*Qe*Le.value[Mn]}else if(ut.key===Ve)rt=h.value;else if(ut.key===Fe)rt=s.value;else{const At=ut.key===Se?1:-1;rt=rt-At*Qe*(Ct>100?Ct/10:10)}return Math.max(e.min,Math.min(e.max,rt))}function ct(ut){const rt=We(ut,e.modelValue);rt!=null&&i("update:modelValue",rt)}return Vt(()=>{const ut=dn(re.value?100-e.position:e.position,"%");return N("div",{class:Tt(["v-slider-thumb",{"v-slider-thumb--focused":e.focused,"v-slider-thumb--pressed":e.focused&&J.value},e.class,l.value]),style:Qt([{"--v-slider-thumb-position":ut,"--v-slider-thumb-size":dn(k.value)},e.style]),role:"slider",tabindex:T.value?-1:0,"aria-label":e.name,"aria-valuemin":h.value,"aria-valuemax":s.value,"aria-valuenow":e.modelValue,"aria-readonly":!!F.value,"aria-orientation":M.value,onKeydown:F.value?void 0:ct},[N("div",{class:Tt(["v-slider-thumb__surface",H.value,$.value]),style:Qt(W.value)},null),vi(N("div",{class:Tt(["v-slider-thumb__ripple",H.value]),style:Qt(W.value)},null),[[za,e.ripple,null,{circle:!0,center:!0}]]),ce(hA,{origin:"bottom center"},{default:()=>[vi(N("div",{class:"v-slider-thumb__label-container"},[N("div",{class:Tt(["v-slider-thumb__label",te.value]),style:Qt(Y.value)},[N("div",null,[n["thumb-label"]?.({modelValue:e.modelValue})??e.modelValue.toFixed(x.value?Q.value:1)]),N("div",{class:"v-slider-thumb__label-wedge"},null)])]),[[hu,P.value&&e.focused||P.value==="always"]])]})])}),{}}}),Dpe=st({start:{type:Number,required:!0},stop:{type:Number,required:!0},...vn()},"VSliderTrack"),bj=It()({name:"VSliderTrack",props:Dpe(),emits:{},setup(e,t){let{slots:n}=t;const i=xi($P);if(!i)throw new Error("[Vuetify] v-slider-track must be inside v-slider or v-range-slider");const{color:r,parsedTicks:a,rounded:l,showTicks:h,tickSize:s,trackColor:p,trackFillColor:v,trackSize:x,vertical:T,min:k,max:P,indexFromEnd:M}=i,{roundedClasses:L}=Qr(l),{backgroundColorClasses:B,backgroundColorStyles:F}=tr(v),{backgroundColorClasses:X,backgroundColorStyles:J}=tr(p),Q=fe(()=>`inset-${T.value?"block":"inline"}-${M.value?"end":"start"}`),re=fe(()=>T.value?"height":"width"),Z=fe(()=>({[Q.value]:"0%",[re.value]:"100%"})),$=fe(()=>e.stop-e.start),H=fe(()=>({[Q.value]:dn(e.start,"%"),[re.value]:dn($.value,"%")})),W=fe(()=>h.value?(T.value?a.value.slice().reverse():a.value).map((Y,ne)=>{const Se=Y.value!==k.value&&Y.value!==P.value?dn(Y.position,"%"):void 0;return N("div",{key:Y.value,class:Tt(["v-slider-track__tick",{"v-slider-track__tick--filled":Y.position>=e.start&&Y.position<=e.stop,"v-slider-track__tick--first":Y.value===k.value,"v-slider-track__tick--last":Y.value===P.value}]),style:{[Q.value]:Se}},[(Y.label||n["tick-label"])&&N("div",{class:"v-slider-track__tick-label"},[n["tick-label"]?.({tick:Y,index:ne})??Y.label])])}):[]);return Vt(()=>N("div",{class:Tt(["v-slider-track",L.value,e.class]),style:Qt([{"--v-slider-track-size":dn(x.value),"--v-slider-tick-size":dn(s.value)},e.style])},[N("div",{class:Tt(["v-slider-track__background",X.value,{"v-slider-track__background--opacity":!!r.value||!v.value}]),style:{...Z.value,...J.value}},null),N("div",{class:Tt(["v-slider-track__fill",B.value]),style:{...H.value,...F.value}},null),h.value&&N("div",{class:Tt(["v-slider-track__ticks",{"v-slider-track__ticks--always-show":h.value==="always"}])},[W.value])])),{}}}),Rpe=st({...m0(),..._j(),...Ih(),modelValue:{type:[Number,String],default:0}},"VSlider"),Xk=It()({name:"VSlider",props:Rpe(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,start:e=>!0,end:e=>!0},setup(e,t){let{slots:n,emit:i}=t;const r=at(),a=at(),{rtlClasses:l}=Ws(),h=vj(e),s=In(e,"modelValue",void 0,H=>h.roundValue(H??h.min.value)),{min:p,max:v,mousePressed:x,roundValue:T,onSliderMousedown:k,onSliderTouchstart:P,trackContainerRef:M,position:L,hasLabels:B,disabled:F,readonly:X,noKeyboard:J}=yj({props:e,steps:h,onSliderStart:()=>{!F.value&&!X.value&&i("start",s.value)},onSliderEnd:H=>{let{value:W}=H;const te=T(W);!F.value&&!X.value&&(s.value=te),i("end",te)},onSliderMove:H=>{let{value:W}=H;!F.value&&!X.value&&(s.value=T(W))},getActiveThumb:()=>r.value?.$el}),{isFocused:Q,focus:re,blur:Z}=kh(e),$=fe(()=>L(s.value));return Vt(()=>{const H=sa.filterProps(e),W=!!(e.label||n.label||n.prepend);return ce(sa,kt({ref:a,class:["v-slider",{"v-slider--has-labels":!!n["tick-label"]||B.value,"v-slider--focused":Q.value,"v-slider--pressed":x.value,"v-slider--disabled":F.value},l.value,e.class],style:e.style},H,{focused:Q.value}),{...n,prepend:W?te=>N(sn,null,[n.label?.(te)??(e.label?ce(lv,{id:te.id.value,class:"v-slider__label",text:e.label},null):void 0),n.prepend?.(te)]):void 0,default:te=>{let{id:Y,messagesId:ne}=te;return N("div",{class:"v-slider__container",onMousedown:X.value?void 0:k,onTouchstartPassive:X.value?void 0:P},[N("input",{id:Y.value,name:e.name||Y.value,disabled:F.value,readonly:X.value,tabindex:"-1",value:s.value},null),ce(bj,{ref:M,start:0,stop:$.value},{"tick-label":n["tick-label"]}),ce(Kk,{ref:r,"aria-describedby":ne.value,focused:Q.value,noKeyboard:J.value,min:p.value,max:v.value,modelValue:s.value,"onUpdate:modelValue":Se=>s.value=Se,position:$.value,elevation:e.elevation,onFocus:re,onBlur:Z,ripple:e.ripple,name:e.name},{"thumb-label":n["thumb-label"]})])}})}),yo({focus:()=>r.value?.$el.focus()},a)}}),xj=st({color:{type:Object},disabled:Boolean,hideAlpha:Boolean,hideEyeDropper:Boolean,eyeDropperIcon:{type:Cn,default:"$eyeDropper"},...vn()},"VColorPickerPreview"),Lpe=ac({name:"VColorPickerPreview",props:xj(),emits:{"update:color":e=>!0},setup(e,t){let{emit:n}=t;const{t:i}=dr(),r=new AbortController;TI(()=>r.abort());async function a(){if(!NL||e.disabled)return;const l=new window.EyeDropper;try{const h=await l.open({signal:r.signal}),s=o0(ec(h.sRGBHex));n("update:color",{...e.color??g_,...s})}catch{}}return Vt(()=>N("div",{class:Tt(["v-color-picker-preview",{"v-color-picker-preview--hide-alpha":e.hideAlpha},e.class]),style:Qt(e.style)},[NL&&!e.hideEyeDropper&&N("div",{class:"v-color-picker-preview__eye-dropper",key:"eyeDropper"},[ce(mi,{"aria-label":i("$vuetify.colorPicker.ariaLabel.eyedropper"),density:"comfortable",disabled:e.disabled,icon:e.eyeDropperIcon,variant:"plain",onClick:a},null)]),N("div",{class:"v-color-picker-preview__dot"},[N("div",{style:{background:WN(e.color??g_)}},null)]),N("div",{class:"v-color-picker-preview__sliders"},[ce(Xk,{class:"v-color-picker-preview__track v-color-picker-preview__hue",name:i("$vuetify.colorPicker.ariaLabel.hueSlider"),modelValue:e.color?.h,"onUpdate:modelValue":l=>n("update:color",{...e.color??g_,h:l}),step:1,min:0,max:360,disabled:e.disabled,thumbSize:14,trackSize:8,trackFillColor:"white",hideDetails:!0},null),!e.hideAlpha&&ce(Xk,{class:"v-color-picker-preview__track v-color-picker-preview__alpha",name:i("$vuetify.colorPicker.ariaLabel.alphaSlider"),modelValue:e.color?.a??1,"onUpdate:modelValue":l=>n("update:color",{...e.color??g_,a:l}),step:.01,min:0,max:1,disabled:e.disabled,thumbSize:14,trackSize:8,trackFillColor:"white",hideDetails:!0},null)])])),{}}}),Ope={base:"#f44336",lighten5:"#ffebee",lighten4:"#ffcdd2",lighten3:"#ef9a9a",lighten2:"#e57373",lighten1:"#ef5350",darken1:"#e53935",darken2:"#d32f2f",darken3:"#c62828",darken4:"#b71c1c",accent1:"#ff8a80",accent2:"#ff5252",accent3:"#ff1744",accent4:"#d50000"},Vpe={base:"#e91e63",lighten5:"#fce4ec",lighten4:"#f8bbd0",lighten3:"#f48fb1",lighten2:"#f06292",lighten1:"#ec407a",darken1:"#d81b60",darken2:"#c2185b",darken3:"#ad1457",darken4:"#880e4f",accent1:"#ff80ab",accent2:"#ff4081",accent3:"#f50057",accent4:"#c51162"},Bpe={base:"#9c27b0",lighten5:"#f3e5f5",lighten4:"#e1bee7",lighten3:"#ce93d8",lighten2:"#ba68c8",lighten1:"#ab47bc",darken1:"#8e24aa",darken2:"#7b1fa2",darken3:"#6a1b9a",darken4:"#4a148c",accent1:"#ea80fc",accent2:"#e040fb",accent3:"#d500f9",accent4:"#aa00ff"},Fpe={base:"#673ab7",lighten5:"#ede7f6",lighten4:"#d1c4e9",lighten3:"#b39ddb",lighten2:"#9575cd",lighten1:"#7e57c2",darken1:"#5e35b1",darken2:"#512da8",darken3:"#4527a0",darken4:"#311b92",accent1:"#b388ff",accent2:"#7c4dff",accent3:"#651fff",accent4:"#6200ea"},zpe={base:"#3f51b5",lighten5:"#e8eaf6",lighten4:"#c5cae9",lighten3:"#9fa8da",lighten2:"#7986cb",lighten1:"#5c6bc0",darken1:"#3949ab",darken2:"#303f9f",darken3:"#283593",darken4:"#1a237e",accent1:"#8c9eff",accent2:"#536dfe",accent3:"#3d5afe",accent4:"#304ffe"},Npe={base:"#2196f3",lighten5:"#e3f2fd",lighten4:"#bbdefb",lighten3:"#90caf9",lighten2:"#64b5f6",lighten1:"#42a5f5",darken1:"#1e88e5",darken2:"#1976d2",darken3:"#1565c0",darken4:"#0d47a1",accent1:"#82b1ff",accent2:"#448aff",accent3:"#2979ff",accent4:"#2962ff"},Upe={base:"#03a9f4",lighten5:"#e1f5fe",lighten4:"#b3e5fc",lighten3:"#81d4fa",lighten2:"#4fc3f7",lighten1:"#29b6f6",darken1:"#039be5",darken2:"#0288d1",darken3:"#0277bd",darken4:"#01579b",accent1:"#80d8ff",accent2:"#40c4ff",accent3:"#00b0ff",accent4:"#0091ea"},$pe={base:"#00bcd4",lighten5:"#e0f7fa",lighten4:"#b2ebf2",lighten3:"#80deea",lighten2:"#4dd0e1",lighten1:"#26c6da",darken1:"#00acc1",darken2:"#0097a7",darken3:"#00838f",darken4:"#006064",accent1:"#84ffff",accent2:"#18ffff",accent3:"#00e5ff",accent4:"#00b8d4"},jpe={base:"#009688",lighten5:"#e0f2f1",lighten4:"#b2dfdb",lighten3:"#80cbc4",lighten2:"#4db6ac",lighten1:"#26a69a",darken1:"#00897b",darken2:"#00796b",darken3:"#00695c",darken4:"#004d40",accent1:"#a7ffeb",accent2:"#64ffda",accent3:"#1de9b6",accent4:"#00bfa5"},Wpe={base:"#4caf50",lighten5:"#e8f5e9",lighten4:"#c8e6c9",lighten3:"#a5d6a7",lighten2:"#81c784",lighten1:"#66bb6a",darken1:"#43a047",darken2:"#388e3c",darken3:"#2e7d32",darken4:"#1b5e20",accent1:"#b9f6ca",accent2:"#69f0ae",accent3:"#00e676",accent4:"#00c853"},Hpe={base:"#8bc34a",lighten5:"#f1f8e9",lighten4:"#dcedc8",lighten3:"#c5e1a5",lighten2:"#aed581",lighten1:"#9ccc65",darken1:"#7cb342",darken2:"#689f38",darken3:"#558b2f",darken4:"#33691e",accent1:"#ccff90",accent2:"#b2ff59",accent3:"#76ff03",accent4:"#64dd17"},Gpe={base:"#cddc39",lighten5:"#f9fbe7",lighten4:"#f0f4c3",lighten3:"#e6ee9c",lighten2:"#dce775",lighten1:"#d4e157",darken1:"#c0ca33",darken2:"#afb42b",darken3:"#9e9d24",darken4:"#827717",accent1:"#f4ff81",accent2:"#eeff41",accent3:"#c6ff00",accent4:"#aeea00"},qpe={base:"#ffeb3b",lighten5:"#fffde7",lighten4:"#fff9c4",lighten3:"#fff59d",lighten2:"#fff176",lighten1:"#ffee58",darken1:"#fdd835",darken2:"#fbc02d",darken3:"#f9a825",darken4:"#f57f17",accent1:"#ffff8d",accent2:"#ffff00",accent3:"#ffea00",accent4:"#ffd600"},Kpe={base:"#ffc107",lighten5:"#fff8e1",lighten4:"#ffecb3",lighten3:"#ffe082",lighten2:"#ffd54f",lighten1:"#ffca28",darken1:"#ffb300",darken2:"#ffa000",darken3:"#ff8f00",darken4:"#ff6f00",accent1:"#ffe57f",accent2:"#ffd740",accent3:"#ffc400",accent4:"#ffab00"},Xpe={base:"#ff9800",lighten5:"#fff3e0",lighten4:"#ffe0b2",lighten3:"#ffcc80",lighten2:"#ffb74d",lighten1:"#ffa726",darken1:"#fb8c00",darken2:"#f57c00",darken3:"#ef6c00",darken4:"#e65100",accent1:"#ffd180",accent2:"#ffab40",accent3:"#ff9100",accent4:"#ff6d00"},Zpe={base:"#ff5722",lighten5:"#fbe9e7",lighten4:"#ffccbc",lighten3:"#ffab91",lighten2:"#ff8a65",lighten1:"#ff7043",darken1:"#f4511e",darken2:"#e64a19",darken3:"#d84315",darken4:"#bf360c",accent1:"#ff9e80",accent2:"#ff6e40",accent3:"#ff3d00",accent4:"#dd2c00"},Ype={base:"#795548",lighten5:"#efebe9",lighten4:"#d7ccc8",lighten3:"#bcaaa4",lighten2:"#a1887f",lighten1:"#8d6e63",darken1:"#6d4c41",darken2:"#5d4037",darken3:"#4e342e",darken4:"#3e2723"},Jpe={base:"#607d8b",lighten5:"#eceff1",lighten4:"#cfd8dc",lighten3:"#b0bec5",lighten2:"#90a4ae",lighten1:"#78909c",darken1:"#546e7a",darken2:"#455a64",darken3:"#37474f",darken4:"#263238"},Qpe={base:"#9e9e9e",lighten5:"#fafafa",lighten4:"#f5f5f5",lighten3:"#eeeeee",lighten2:"#e0e0e0",lighten1:"#bdbdbd",darken1:"#757575",darken2:"#616161",darken3:"#424242",darken4:"#212121"},ege={black:"#000000",white:"#ffffff",transparent:"#ffffff00"},tge={red:Ope,pink:Vpe,purple:Bpe,deepPurple:Fpe,indigo:zpe,blue:Npe,lightBlue:Upe,cyan:$pe,teal:jpe,green:Wpe,lightGreen:Hpe,lime:Gpe,yellow:qpe,amber:Kpe,orange:Xpe,deepOrange:Zpe,brown:Ype,blueGrey:Jpe,grey:Qpe,shades:ege},nge=st({swatches:{type:Array,default:()=>ige(tge)},disabled:Boolean,color:Object,maxHeight:[Number,String],...vn()},"VColorPickerSwatches");function ige(e){return Object.keys(e).map(t=>{const n=e[t];return n.base?[n.base,n.darken4,n.darken3,n.darken2,n.darken1,n.lighten1,n.lighten2,n.lighten3,n.lighten4,n.lighten5]:[n.black,n.white,n.transparent]})}const rge=ac({name:"VColorPickerSwatches",props:nge(),emits:{"update:color":e=>!0},setup(e,t){let{emit:n}=t;return Vt(()=>N("div",{class:Tt(["v-color-picker-swatches",e.class]),style:Qt([{maxHeight:dn(e.maxHeight)},e.style])},[N("div",null,[e.swatches.map(i=>N("div",{class:"v-color-picker-swatches__swatch"},[i.map(r=>{const a=ec(r),l=o0(a),h=jN(a);return N("div",{class:"v-color-picker-swatches__color",onClick:()=>l&&n("update:color",l)},[N("div",{style:{background:h}},[e.color&&po(e.color,l)?ce(Hi,{size:"x-small",icon:"$success",color:IK(r,"#FFFFFF")>2?"white":"black"},null):void 0])])})]))])])),{}}}),sge=Sh("v-picker-title"),zT=st({bgColor:String,divided:Boolean,landscape:Boolean,title:String,hideHeader:Boolean,hideTitle:Boolean,...DA()},"VPicker"),nv=It()({name:"VPicker",props:zT(),setup(e,t){let{slots:n}=t;const{backgroundColorClasses:i,backgroundColorStyles:r}=tr(()=>e.color);return Vt(()=>{const a=Vp.filterProps(e),l=!e.hideTitle&&!!(e.title||n.title);return ce(Vp,kt(a,{color:e.bgColor,class:["v-picker",{"v-picker--divided":e.divided,"v-picker--landscape":e.landscape,"v-picker--with-actions":!!n.actions},e.class],style:e.style}),{default:()=>[!e.hideHeader&&N("div",{key:"header",class:Tt([i.value]),style:Qt([r.value])},[l&&ce(sge,{key:"picker-title"},{default:()=>[n.title?.()??e.title]}),n.header&&N("div",{class:"v-picker__header"},[n.header()])]),N("div",{class:"v-picker__body"},[n.default?.()]),n.actions&&ce(ci,{defaults:{VBtn:{slim:!0,variant:"text"}}},{default:()=>[N("div",{class:"v-picker__actions"},[n.actions()])]})]})}),{}}}),oge=st({canvasHeight:{type:[String,Number],default:150},disabled:Boolean,dotSize:{type:[Number,String],default:10},hideCanvas:Boolean,hideSliders:Boolean,hideInputs:Boolean,mode:{type:String,default:"rgba",validator:e=>Object.keys(Pp).includes(e)},modes:{type:Array,default:()=>Object.keys(Pp),validator:e=>Array.isArray(e)&&e.every(t=>Object.keys(Pp).includes(t))},showSwatches:Boolean,swatches:Array,swatchesMaxHeight:{type:[Number,String],default:150},modelValue:{type:[Object,String]},...zT({hideHeader:!0}),...Ml(xj(),["hideEyeDropper","eyeDropperIcon"])},"VColorPicker"),age=ac({name:"VColorPicker",props:oge(),emits:{"update:modelValue":e=>!0,"update:mode":e=>!0},setup(e,t){let{slots:n}=t;const i=In(e,"mode"),r=at(null),a=In(e,"modelValue",void 0,v=>{if(v==null||v==="")return null;let x;try{x=o0(ec(v))}catch{return null}return x},v=>v?Tpe(v,e.modelValue):null),l=fe(()=>a.value?{...a.value,h:r.value??a.value.h}:null),{rtlClasses:h}=Ws();let s=!0;Ht(a,v=>{if(!s){s=!0;return}v&&(r.value=v.h)},{immediate:!0});const p=v=>{s=!1,r.value=v.h,a.value=v};return rv(()=>{e.modes.includes(i.value)||(i.value=e.modes[0])}),Jr({VSlider:{color:void 0,trackColor:void 0,trackFillColor:void 0}}),Vt(()=>{const v=nv.filterProps(e);return ce(nv,kt(v,{class:["v-color-picker",h.value,e.class],style:[{"--v-color-picker-color-hsv":WN({...l.value??g_,a:1})},e.style]}),{...n,default:()=>N(sn,null,[!e.hideCanvas&&ce(xpe,{key:"canvas",color:l.value,"onUpdate:color":p,disabled:e.disabled,dotSize:e.dotSize,width:e.width,height:e.canvasHeight},null),(!e.hideSliders||!e.hideInputs)&&N("div",{key:"controls",class:"v-color-picker__controls"},[!e.hideSliders&&ce(Lpe,{key:"preview",color:l.value,"onUpdate:color":p,hideAlpha:!i.value.endsWith("a"),disabled:e.disabled,hideEyeDropper:e.hideEyeDropper,eyeDropperIcon:e.eyeDropperIcon},null),!e.hideInputs&&ce(Ape,{key:"edit",modes:e.modes,mode:i.value,"onUpdate:mode":x=>i.value=x,color:l.value,"onUpdate:color":p,disabled:e.disabled},null)]),e.showSwatches&&ce(rge,{key:"swatches",color:l.value,"onUpdate:color":p,maxHeight:e.swatchesMaxHeight,swatches:e.swatches,disabled:e.disabled},null)])})}),{}}}),lge=st({alwaysFilter:Boolean,autoSelectFirst:{type:[Boolean,String]},clearOnSelect:{type:Boolean,default:!0},delimiters:Array,..._v({filterKeys:["title"]}),...MA({hideNoData:!0,returnObject:!0}),...ur(_0({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"])},"VCombobox"),cge=It()({name:"VCombobox",props:lge(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:search":e=>!0,"update:menu":e=>!0},setup(e,t){let{emit:n,slots:i}=t;const{t:r}=dr(),a=at(),l=Xt(!1),h=Xt(!0),s=Xt(!1),p=at(),v=at(),x=Xt(-1);let T=!1;const{items:k,transformIn:P,transformOut:M}=wA(e),{textColorClasses:L,textColorStyles:B}=Fo(()=>a.value?.color),F=In(e,"modelValue",[],Ee=>P(Gr(Ee)),Ee=>{const pt=M(Ee);return e.multiple?pt:pt[0]??null}),X=cv(e),J=fe(()=>!!(e.chips||i.chip)),Q=fe(()=>J.value||!!i.selection),re=Xt(!e.multiple&&!Q.value?F.value[0]?.title??"":""),Z=Xt(null),$=fe({get:()=>re.value,set:async Ee=>{if(re.value=Ee??"",Ee===null||Ee===""&&!e.multiple&&!Q.value?F.value=[]:!e.multiple&&!Q.value&&(F.value=[iu(e,Ee)],Gn(()=>v.value?.scrollToIndex(0))),Ee&&e.multiple&&e.delimiters?.length){const pt=e.delimiters.map(qw).join("|"),dt=Ee.split(new RegExp(`(?:${pt})+`));if(dt.length>1){for(let nt of dt)nt=nt.trim(),nt&&(Mn(iu(e,nt)),await Gn());re.value=""}}Ee||(x.value=-1),h.value=!Ee}}),H=fe(()=>typeof e.counterValue=="function"?e.counterValue(F.value):typeof e.counterValue=="number"?e.counterValue:e.multiple?F.value.length:$.value.length),{filteredItems:W,getMatches:te}=vv(e,k,()=>Z.value??(e.alwaysFilter||!h.value?$.value:"")),Y=fe(()=>e.hideSelected&&Z.value===null?W.value.filter(Ee=>!F.value.some(pt=>pt.value===Ee.value)):W.value),ne=fe(()=>e.hideNoData&&!Y.value.length||X.isReadonly.value||X.isDisabled.value),Se=In(e,"menu"),Fe=fe({get:()=>Se.value,set:Ee=>{Se.value&&!Ee&&p.value?.openChildren.size||Ee&&ne.value||(Se.value=Ee)}}),{menuId:Ve,ariaExpanded:Ge,ariaControls:je,ariaLabel:Ae}=PA(e,Fe);Ht(re,Ee=>{T?Gn(()=>T=!1):l.value&&!Fe.value&&(Fe.value=!0),n("update:search",Ee)}),Ht(F,Ee=>{!e.multiple&&!Q.value&&(re.value=Ee[0]?.title??"")});const Ke=fe(()=>F.value.map(Ee=>Ee.value)),ve=fe(()=>(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&$.value===Y.value[0]?.title)&&Y.value.length>0&&!h.value&&!s.value),Le=at(),We=AA(Le,a);function ct(Ee){T=!0,Gn(()=>T=!1),e.openOnClear&&(Fe.value=!0)}function ut(){ne.value||(Fe.value=!0)}function rt(Ee){ne.value||(l.value&&(Ee.preventDefault(),Ee.stopPropagation()),Fe.value=!Fe.value)}function Qe(Ee){(N_(Ee)||Ee.key==="Backspace")&&a.value?.focus()}function Ct(Ee){if(Y2(Ee)||X.isReadonly.value)return;const pt=a.value?.selectionStart,dt=F.value.length;if(["Enter","ArrowDown","ArrowUp"].includes(Ee.key)&&Ee.preventDefault(),["Enter","ArrowDown"].includes(Ee.key)&&(Fe.value=!0),["Escape"].includes(Ee.key)&&(Fe.value=!1),ve.value&&["Enter","Tab"].includes(Ee.key)&&!F.value.some(nt=>{let{value:Et}=nt;return Et===Y.value[0].value})&&Mn(W.value[0]),Ee.key==="ArrowDown"&&ve.value&&Le.value?.focus("next"),Ee.key==="Enter"&&$.value&&(Mn(iu(e,$.value),!0,!0),Q.value&&(re.value="")),["Backspace","Delete"].includes(Ee.key)){if(!e.multiple&&Q.value&&F.value.length>0&&!$.value)return Mn(F.value[0],!1);if(~x.value){Ee.preventDefault();const nt=x.value;Mn(F.value[x.value],!1),x.value=nt>=dt-1?dt-2:nt}else Ee.key==="Backspace"&&!$.value&&(x.value=dt-1);return}if(e.multiple)if(Ee.key==="ArrowLeft"){if(x.value<0&&pt&&pt>0)return;const nt=x.value>-1?x.value-1:dt-1;F.value[nt]?x.value=nt:(x.value=-1,a.value?.setSelectionRange($.value.length,$.value.length))}else if(Ee.key==="ArrowRight"){if(x.value<0)return;const nt=x.value+1;F.value[nt]?x.value=nt:(x.value=-1,a.value?.setSelectionRange(0,0))}else~x.value&&N_(Ee)&&(x.value=-1)}function At(){e.eager&&v.value?.calculateVisibleItems()}function yn(){l.value&&a.value?.focus(),h.value=!0,Z.value=null}function Mn(Ee){let pt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,dt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(!(!Ee||Ee.props.disabled))if(e.multiple){const nt=F.value.findIndex(Dt=>(e.valueComparator||po)(Dt.value,Ee.value)),Et=pt??!~nt;if(~nt){const Dt=Et?[...F.value,Ee]:[...F.value];Dt.splice(nt,1),F.value=Dt}else Et&&(F.value=[...F.value,Ee]);e.clearOnSelect&&($.value="")}else{const nt=pt!==!1;F.value=nt?[Ee]:[],(!h.value||e.alwaysFilter)&&re.value&&(Z.value=re.value),re.value=nt&&!Q.value?Ee.title:"",Gn(()=>{Fe.value=dt,h.value=!0})}}function Ce(Ee){l.value=!0,setTimeout(()=>{s.value=!0})}function ze(Ee){s.value=!1}return Ht(l,(Ee,pt)=>{if(!(Ee||Ee===pt)&&(x.value=-1,Fe.value=!1,$.value)){if(e.multiple){Mn(iu(e,$.value));return}if(!Q.value)return;F.value.some(dt=>{let{title:nt}=dt;return nt===$.value})?re.value="":Mn(iu(e,$.value))}}),Ht(Fe,Ee=>{if(!e.hideSelected&&Ee&&F.value.length&&h.value){const pt=Y.value.findIndex(dt=>F.value.some(nt=>(e.valueComparator||po)(nt.value,dt.value)));Gi&&window.requestAnimationFrame(()=>{pt>=0&&v.value?.scrollToIndex(pt)})}Ee&&(Z.value=null)}),Ht(k,(Ee,pt)=>{Fe.value||l.value&&!pt.length&&Ee.length&&(Fe.value=!0)}),Vt(()=>{const Ee=!!(!e.hideNoData||Y.value.length||i["prepend-item"]||i["append-item"]||i["no-data"]),pt=F.value.length>0,dt=_h.filterProps(e);return ce(_h,kt({ref:a},dt,{modelValue:$.value,"onUpdate:modelValue":nt=>$.value=nt,focused:l.value,"onUpdate:focused":nt=>l.value=nt,validationValue:F.externalValue,counterValue:H.value,dirty:pt,class:["v-combobox",{"v-combobox--active-menu":Fe.value,"v-combobox--chips":!!e.chips,"v-combobox--selection-slot":!!Q.value,"v-combobox--selecting-index":x.value>-1,[`v-combobox--${e.multiple?"multiple":"single"}`]:!0},e.class],style:e.style,readonly:X.isReadonly.value,placeholder:pt?void 0:e.placeholder,"onClick:clear":ct,"onMousedown:control":ut,onKeydown:Ct,"aria-expanded":Ge.value,"aria-controls":je.value}),{...i,default:()=>N(sn,null,[ce(W_,kt({id:Ve.value,ref:p,modelValue:Fe.value,"onUpdate:modelValue":nt=>Fe.value=nt,activator:"parent",contentClass:"v-combobox__content",disabled:ne.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,onAfterEnter:At,onAfterLeave:yn},e.menuProps),{default:()=>[Ee&&ce(j_,kt({ref:Le,filterable:!0,selected:Ke.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:nt=>nt.preventDefault(),selectable:!0,onKeydown:Qe,onFocusin:Ce,onFocusout:ze,tabindex:"-1","aria-live":"polite",color:e.itemColor??e.color},We,e.listProps),{default:()=>[i["prepend-item"]?.(),!Y.value.length&&!e.hideNoData&&(i["no-data"]?.()??ce(uu,{key:"no-data",title:r(e.noDataText)},null)),ce(aT,{ref:v,renderless:!0,items:Y.value,itemKey:"value"},{default:nt=>{let{item:Et,index:Dt,itemRef:Ft}=nt;const Gt=kt(Et.props,{ref:Ft,key:Et.value,active:ve.value&&Dt===0?!0:void 0,onClick:()=>Mn(Et,null)});return Et.type==="divider"?i.divider?.({props:Et.raw,index:Dt})??ce(tc,kt(Et.props,{key:`divider-${Dt}`}),null):Et.type==="subheader"?i.subheader?.({props:Et.raw,index:Dt})??ce(uv,kt(Et.props,{key:`subheader-${Dt}`}),null):i.item?.({item:Et,index:Dt,props:Gt})??ce(uu,kt(Gt,{role:"option"}),{prepend:En=>{let{isSelected:en}=En;return N(sn,null,[e.multiple&&!e.hideSelected?ce(rd,{key:Et.value,modelValue:en,ripple:!1,tabindex:"-1",onClick:An=>An.preventDefault()},null):void 0,Et.props.prependAvatar&&ce(oc,{image:Et.props.prependAvatar},null),Et.props.prependIcon&&ce(Hi,{icon:Et.props.prependIcon},null)])},title:()=>h.value?Et.title:lj("v-combobox",Et.title,te(Et)?.title)})}}),i["append-item"]?.()]})]}),F.value.map((nt,Et)=>{function Dt(en){en.stopPropagation(),en.preventDefault(),Mn(nt,!1)}const Ft={"onClick:close":Dt,onKeydown(en){en.key!=="Enter"&&en.key!==" "||(en.preventDefault(),en.stopPropagation(),Dt(en))},onMousedown(en){en.preventDefault(),en.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},Gt=J.value?!!i.chip:!!i.selection,En=Gt?X1(J.value?i.chip({item:nt,index:Et,props:Ft}):i.selection({item:nt,index:Et})):void 0;if(!(Gt&&!En))return N("div",{key:nt.value,class:Tt(["v-combobox__selection",Et===x.value&&["v-combobox__selection--selected",L.value]]),style:Qt(Et===x.value?B.value:{})},[J.value?i.chip?ce(ci,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:nt.title}}},{default:()=>[En]}):ce(Hu,kt({key:"chip",closable:e.closableChips,size:"small",text:nt.title,disabled:nt.props.disabled},Ft),null):En??N("span",{class:"v-combobox__selection-text"},[nt.title,e.multiple&&Et<F.value.length-1&&N("span",{class:"v-combobox__selection-comma"},[Jn(",")])])])})]),"append-inner":function(){for(var nt=arguments.length,Et=new Array(nt),Dt=0;Dt<nt;Dt++)Et[Dt]=arguments[Dt];return N(sn,null,[i["append-inner"]?.(...Et),(!e.hideNoData||e.items.length)&&e.menuIcon?ce(Hi,{class:"v-combobox__menu-icon",color:a.value?.fieldIconColor,icon:e.menuIcon,onMousedown:rt,onClick:BN,"aria-label":Ae.value,title:Ae.value,tabindex:"-1"},null):void 0])}})}),yo({isFocused:l,isPristine:h,menu:Fe,search:$,selectionIndex:x,filteredItems:W,select:Mn},a)}}),uge=st({modelValue:null,color:String,cancelText:{type:String,default:"$vuetify.confirmEdit.cancel"},okText:{type:String,default:"$vuetify.confirmEdit.ok"},disabled:{type:[Boolean,Array],default:void 0},hideActions:Boolean},"VConfirmEdit"),dge=It()({name:"VConfirmEdit",props:uge(),emits:{cancel:()=>!0,save:e=>!0,"update:modelValue":e=>!0},setup(e,t){let{emit:n,slots:i}=t;const r=In(e,"modelValue"),a=at();zr(()=>{a.value=structuredClone(KL(r.value))});const{t:l}=dr(),h=fe(()=>po(r.value,a.value));function s(M){return typeof e.disabled=="boolean"?e.disabled:Array.isArray(e.disabled)?e.disabled.includes(M):h.value}const p=fe(()=>s("save")),v=fe(()=>s("cancel"));function x(){r.value=a.value,n("save",a.value)}function T(){a.value=structuredClone(KL(r.value)),n("cancel")}function k(M){return N(sn,null,[ce(mi,kt({disabled:v.value,variant:"text",color:e.color,onClick:T,text:l(e.cancelText)},M),null),ce(mi,kt({disabled:p.value,variant:"text",color:e.color,onClick:x,text:l(e.okText)},M),null)])}let P=!1;return Vt(()=>N(sn,null,[i.default?.({model:a,save:x,cancel:T,isPristine:h.value,get actions(){return P=!0,k}}),!e.hideActions&&!P&&k()])),{save:x,cancel:T,isPristine:h}}}),wj=st({expandOnClick:Boolean,showExpand:Boolean,expanded:{type:Array,default:()=>[]}},"DataTable-expand"),Tj=Symbol.for("vuetify:datatable:expanded");function NT(e){const t=Ue(()=>e.expandOnClick),n=In(e,"expanded",e.expanded,h=>new Set(h),h=>[...h.values()]);function i(h,s){const p=new Set(n.value),v=Nn(h.value);if(s)p.add(v);else{const x=[...n.value].find(T=>Nn(T)===v);p.delete(x)}n.value=p}function r(h){const s=Nn(h.value);return[...n.value].some(p=>Nn(p)===s)}function a(h){i(h,!r(h))}const l={expand:i,expanded:n,expandOnClick:t,isExpanded:r,toggleExpand:a};return Mr(Tj,l),l}function Sj(){const e=xi(Tj);if(!e)throw new Error("foo");return e}const jP=st({groupBy:{type:Array,default:()=>[]}},"DataTable-group"),Ej=Symbol.for("vuetify:data-table-group");function WP(e){return{groupBy:In(e,"groupBy")}}function UT(e){const{disableSort:t,groupBy:n,sortBy:i}=e,r=at(new Set),a=fe(()=>n.value.map(v=>({...v,order:v.order??!1})).concat(t?.value?[]:i.value));function l(v){return r.value.has(v.id)}function h(v){const x=new Set(r.value);l(v)?x.delete(v.id):x.add(v.id),r.value=x}function s(v){function x(T){const k=[];for(const P of T.items)"type"in P&&P.type==="group"?k.push(...x(P)):k.push(P);return[...new Set(k)]}return x({items:v})}const p={sortByWithGroups:a,toggleGroup:h,opened:r,groupBy:n,extractRows:s,isGroupOpen:l};return Mr(Ej,p),p}function Cj(){const e=xi(Ej);if(!e)throw new Error("Missing group!");return e}function hge(e,t){if(!e.length)return[];const n=new Map;for(const i of e){const r=Lp(i.raw,t);n.has(r)||n.set(r,[]),n.get(r).push(i)}return n}function kj(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"root";if(!t.length)return[];const r=hge(e,t[0]),a=[],l=t.slice(1);return r.forEach((h,s)=>{const p=t[0],v=`${i}_${p}_${s}`;a.push({depth:n,id:v,key:p,value:s,items:l.length?kj(h,l,n+1,v):h,type:"group"})}),a}function Ij(e,t,n){const i=[];for(const r of e)"type"in r&&r.type==="group"?(r.value!=null&&i.push(r),(t.has(r.id)||r.value==null)&&(i.push(...Ij(r.items,t,n)),n&&i.push({...r,type:"group-summary"}))):i.push(r);return i}function $T(e,t,n,i){return{flatItems:fe(()=>{if(!t.value.length)return e.value;const a=kj(e.value,t.value.map(l=>l.key));return Ij(a,n.value,Ba(i))})}}function jT(e){let{page:t,itemsPerPage:n,sortBy:i,groupBy:r,search:a}=e;const l=bs("VDataTable"),h=()=>({page:t.value,itemsPerPage:n.value,sortBy:i.value,groupBy:r.value,search:a.value});let s=null;Ht(h,p=>{po(s,p)||(s&&s.search!==p.search&&(t.value=1),l.emit("update:options",p),s=p)},{deep:!0,immediate:!0})}const HP=st({page:{type:[Number,String],default:1},itemsPerPage:{type:[Number,String],default:10}},"DataTable-paginate"),Aj=Symbol.for("vuetify:data-table-pagination");function GP(e){const t=In(e,"page",void 0,i=>Number(i??1)),n=In(e,"itemsPerPage",void 0,i=>Number(i??10));return{page:t,itemsPerPage:n}}function qP(e){const{page:t,itemsPerPage:n,itemsLength:i}=e,r=fe(()=>n.value===-1?0:n.value*(t.value-1)),a=fe(()=>n.value===-1?i.value:Math.min(i.value,r.value+n.value)),l=fe(()=>n.value===-1||i.value===0?1:Math.ceil(i.value/n.value));Ht([t,l],()=>{t.value>l.value&&(t.value=l.value)});function h(T){n.value=T,t.value=1}function s(){t.value=Sr(t.value+1,1,l.value)}function p(){t.value=Sr(t.value-1,1,l.value)}function v(T){t.value=Sr(T,1,l.value)}const x={page:t,itemsPerPage:n,startIndex:r,stopIndex:a,pageCount:l,itemsLength:i,nextPage:s,prevPage:p,setPage:v,setItemsPerPage:h};return Mr(Aj,x),x}function fge(){const e=xi(Aj);if(!e)throw new Error("Missing pagination!");return e}function Pj(e){const t=bs("usePaginatedItems"),{items:n,startIndex:i,stopIndex:r,itemsPerPage:a}=e,l=fe(()=>a.value<=0?n.value:n.value.slice(i.value,r.value));return Ht(l,h=>{t.emit("update:currentItems",h)},{immediate:!0}),{paginatedItems:l}}const mge={showSelectAll:!1,allSelected:()=>[],select:e=>{let{items:t,value:n}=e;return new Set(n?[t[0]?.value]:[])},selectAll:e=>{let{selected:t}=e;return t}},Mj={showSelectAll:!0,allSelected:e=>{let{currentPage:t}=e;return t},select:e=>{let{items:t,value:n,selected:i}=e;for(const r of t)n?i.add(r.value):i.delete(r.value);return i},selectAll:e=>{let{value:t,currentPage:n,selected:i}=e;return Mj.select({items:n,value:t,selected:i})}},pge={showSelectAll:!0,allSelected:e=>{let{allItems:t}=e;return t},select:e=>{let{items:t,value:n,selected:i}=e;for(const r of t)n?i.add(r.value):i.delete(r.value);return i},selectAll:e=>{let{value:t,allItems:n}=e;return new Set(t?n.map(i=>i.value):[])}},Dj=st({showSelect:Boolean,selectStrategy:{type:[String,Object],default:"page"},modelValue:{type:Array,default:()=>[]},valueComparator:Function},"DataTable-select"),Rj=Symbol.for("vuetify:data-table-selection");function WT(e,t){let{allItems:n,currentPage:i}=t;const r=In(e,"modelValue",e.modelValue,F=>{const X=e.valueComparator;return X?new Set(Gr(F).map(J=>n.value.find(Q=>X(J,Q.value))?.value??J)):new Set(Gr(F).map(J=>jf(J)?n.value.find(Q=>J===Q.value)?.value??J:n.value.find(Q=>po(J,Q.value))?.value??J))},F=>[...F.values()]),a=fe(()=>n.value.filter(F=>F.selectable)),l=fe(()=>i.value.filter(F=>F.selectable)),h=fe(()=>{if(typeof e.selectStrategy=="object")return e.selectStrategy;switch(e.selectStrategy){case"single":return mge;case"all":return pge;case"page":default:return Mj}}),s=Xt(null);function p(F){return Gr(F).every(X=>r.value.has(X.value))}function v(F){return Gr(F).some(X=>r.value.has(X.value))}function x(F,X){const J=h.value.select({items:F,value:X,selected:new Set(r.value)});r.value=J}function T(F,X,J){const Q=[];if(X=X??i.value.findIndex(re=>re.value===F.value),e.selectStrategy!=="single"&&J?.shiftKey&&s.value!==null){const[re,Z]=[s.value,X].sort(($,H)=>$-H);Q.push(...i.value.slice(re,Z+1).filter($=>$.selectable))}else Q.push(F),s.value=X;x(Q,!p([F]))}function k(F){const X=h.value.selectAll({value:F,allItems:a.value,currentPage:l.value,selected:new Set(r.value)});r.value=X}const P=fe(()=>r.value.size>0),M=fe(()=>{const F=h.value.allSelected({allItems:a.value,currentPage:l.value});return!!F.length&&p(F)}),L=Ue(()=>h.value.showSelectAll),B={toggleSelect:T,select:x,selectAll:k,isSelected:p,isSomeSelected:v,someSelected:P,allSelected:M,showSelectAll:L,lastSelectedIndex:s,selectStrategy:h};return Mr(Rj,B),B}function HT(){const e=xi(Rj);if(!e)throw new Error("Missing selection!");return e}const Lj=st({sortBy:{type:Array,default:()=>[]},customKeySort:Object,multiSort:Boolean,mustSort:Boolean},"DataTable-sort"),Oj=Symbol.for("vuetify:data-table-sort");function GT(e){const t=In(e,"sortBy"),n=Ue(()=>e.mustSort),i=Ue(()=>e.multiSort);return{sortBy:t,mustSort:n,multiSort:i}}function qT(e){const{sortBy:t,mustSort:n,multiSort:i,page:r}=e,a=s=>{if(s.key==null)return;let p=t.value.map(x=>({...x}))??[];const v=p.find(x=>x.key===s.key);v?v.order==="desc"?n.value&&p.length===1?v.order="asc":p=p.filter(x=>x.key!==s.key):v.order="desc":i.value?p.push({key:s.key,order:"asc"}):p=[{key:s.key,order:"asc"}],t.value=p,r&&(r.value=1)};function l(s){return!!t.value.find(p=>p.key===s.key)}const h={sortBy:t,toggleSort:a,isSorted:l};return Mr(Oj,h),h}function Vj(){const e=xi(Oj);if(!e)throw new Error("Missing sort!");return e}function KP(e,t,n,i){const r=dr();return{sortedItems:fe(()=>n.value.length?gge(t.value,n.value,r.current.value,{transform:i?.transform,sortFunctions:{...e.customKeySort,...i?.sortFunctions?.value},sortRawFunctions:i?.sortRawFunctions?.value}):t.value)}}function gge(e,t,n,i){const r=new Intl.Collator(n,{sensitivity:"accent",usage:"sort"});return e.map(l=>[l,i?.transform?i.transform(l):l]).sort((l,h)=>{for(let s=0;s<t.length;s++){let p=!1;const v=t[s].key,x=t[s].order??"asc";if(x===!1)continue;let T=Lp(l[1],v),k=Lp(h[1],v),P=l[0].raw,M=h[0].raw;if(x==="desc"&&([T,k]=[k,T],[P,M]=[M,P]),i?.sortRawFunctions?.[v]){const L=i.sortRawFunctions[v](P,M);if(L==null)continue;if(p=!0,L)return L}if(i?.sortFunctions?.[v]){const L=i.sortFunctions[v](T,k);if(L==null)continue;if(p=!0,L)return L}if(!p&&(T instanceof Date&&k instanceof Date&&(T=T.getTime(),k=k.getTime()),[T,k]=[T,k].map(L=>L!=null?L.toString().toLocaleLowerCase():L),T!==k))return Cx(T)&&Cx(k)?0:Cx(T)?-1:Cx(k)?1:!isNaN(T)&&!isNaN(k)?Number(T)-Number(k):r.compare(T,k)}return 0}).map(l=>{let[h]=l;return h})}const _ge=st({items:{type:Array,default:()=>[]},itemValue:{type:[String,Array,Function],default:"id"},itemSelectable:{type:[String,Array,Function],default:null},returnObject:Boolean},"DataIterator-items");function vge(e,t){const n=e.returnObject?t:Ps(t,e.itemValue),i=Ps(t,e.itemSelectable,!0);return{type:"item",value:n,selectable:i,raw:t}}function yge(e,t){const n=[];for(const i of t)n.push(vge(e,i));return n}function bge(e){return{items:fe(()=>yge(e,e.items))}}const xge=st({search:String,loading:Boolean,...vn(),..._ge(),...Dj(),...Lj(),...HP({itemsPerPage:5}),...wj(),...jP(),..._v(),...ti(),...Ch({transition:{component:Ib,hideOnLeave:!0}})},"VDataIterator"),wge=It()({name:"VDataIterator",props:xge(),emits:{"update:modelValue":e=>!0,"update:groupBy":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:expanded":e=>!0,"update:currentItems":e=>!0},setup(e,t){let{slots:n}=t;const i=In(e,"groupBy"),r=Ue(()=>e.search),{items:a}=bge(e),{filteredItems:l}=vv(e,a,r,{transform:ve=>ve.raw}),{sortBy:h,multiSort:s,mustSort:p}=GT(e),{page:v,itemsPerPage:x}=GP(e),{toggleSort:T}=qT({sortBy:h,multiSort:s,mustSort:p,page:v}),{sortByWithGroups:k,opened:P,extractRows:M,isGroupOpen:L,toggleGroup:B}=UT({groupBy:i,sortBy:h}),{sortedItems:F}=KP(e,l,k,{transform:ve=>ve.raw}),{flatItems:X}=$T(F,i,P,!1),J=Ue(()=>X.value.length),{startIndex:Q,stopIndex:re,pageCount:Z,prevPage:$,nextPage:H,setItemsPerPage:W,setPage:te}=qP({page:v,itemsPerPage:x,itemsLength:J}),{paginatedItems:Y}=Pj({items:X,startIndex:Q,stopIndex:re,itemsPerPage:x}),ne=fe(()=>M(Y.value)),{isSelected:Se,select:Fe,selectAll:Ve,toggleSelect:Ge}=WT(e,{allItems:a,currentPage:ne}),{isExpanded:je,toggleExpand:Ae}=NT(e);jT({page:v,itemsPerPage:x,sortBy:h,groupBy:i,search:r});const Ke=fe(()=>({page:v.value,itemsPerPage:x.value,sortBy:h.value,pageCount:Z.value,toggleSort:T,prevPage:$,nextPage:H,setPage:te,setItemsPerPage:W,isSelected:Se,select:Fe,selectAll:Ve,toggleSelect:Ge,isExpanded:je,toggleExpand:Ae,isGroupOpen:L,toggleGroup:B,items:ne.value,itemsCount:l.value.length,groupedItems:Y.value}));return Vt(()=>ce(e.tag,{class:Tt(["v-data-iterator",{"v-data-iterator--loading":e.loading},e.class]),style:Qt(e.style)},{default:()=>[n.header?.(Ke.value),ce(Oa,{transition:e.transition},{default:()=>[e.loading?ce(d0,{key:"loader",name:"v-data-iterator",active:!0},{default:ve=>n.loader?.(ve)}):N("div",{key:"items"},[Y.value.length?n.default?.(Ke.value):n["no-data"]?.()])]}),n.footer?.(Ke.value)]})),{}}});function Tge(){const e=at([]);Uz(()=>e.value=[]);function t(n,i){e.value[i]=n}return{refs:e,updateRef:t}}const Sge=st({activeColor:String,start:{type:[Number,String],default:1},modelValue:{type:Number,default:e=>e.start},disabled:Boolean,length:{type:[Number,String],default:1,validator:e=>e%1===0},totalVisible:[Number,String],firstIcon:{type:Cn,default:"$first"},prevIcon:{type:Cn,default:"$prev"},nextIcon:{type:Cn,default:"$next"},lastIcon:{type:Cn,default:"$last"},ariaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.root"},pageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.page"},currentPageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.currentPage"},firstAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.first"},previousAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.previous"},nextAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.next"},lastAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.last"},ellipsis:{type:String,default:"..."},showFirstLastPage:Boolean,...sl(),...vn(),...xs(),...Hs(),...Nr(),...ud(),...ti({tag:"nav"}),...Ii(),...Oc({variant:"text"})},"VPagination"),Zk=It()({name:"VPagination",props:Sge(),emits:{"update:modelValue":e=>!0,first:e=>!0,prev:e=>!0,next:e=>!0,last:e=>!0},setup(e,t){let{slots:n,emit:i}=t;const r=In(e,"modelValue"),{t:a,n:l}=dr(),{isRtl:h}=Ws(),{themeClasses:s}=Zi(e),{width:p}=Dl(),v=Xt(-1);Jr(void 0,{scoped:!0});const{resizeRef:x}=Lc($=>{if(!$.length)return;const{target:H,contentRect:W}=$[0],te=H.querySelector(".v-pagination__list > *");if(!te)return;const Y=W.width,ne=te.offsetWidth+parseFloat(getComputedStyle(te).marginRight)*2;v.value=M(Y,ne)}),T=fe(()=>parseInt(e.length,10)),k=fe(()=>parseInt(e.start,10)),P=fe(()=>e.totalVisible!=null?parseInt(e.totalVisible,10):v.value>=0?v.value:M(p.value,58));function M($,H){const W=e.showFirstLastPage?5:3;return Math.max(0,Math.floor(Number((($-H*W)/H).toFixed(2))))}const L=fe(()=>{if(T.value<=0||isNaN(T.value)||T.value>Number.MAX_SAFE_INTEGER)return[];if(P.value<=0)return[];if(P.value===1)return[r.value];if(T.value<=P.value)return Ql(T.value,k.value);const $=P.value%2===0,H=$?P.value/2:Math.floor(P.value/2),W=$?H:H+1,te=T.value-H;if(W-r.value>=0)return[...Ql(Math.max(1,P.value-1),k.value),e.ellipsis,T.value];if(r.value-te>=($?1:0)){const Y=P.value-1,ne=T.value-Y+k.value;return[k.value,e.ellipsis,...Ql(Y,ne)]}else{const Y=Math.max(1,P.value-2),ne=Y===1?r.value:r.value-Math.ceil(Y/2)+k.value;return[k.value,e.ellipsis,...Ql(Y,ne),e.ellipsis,T.value]}});function B($,H,W){$.preventDefault(),r.value=H,W&&i(W,H)}const{refs:F,updateRef:X}=Tge();Jr({VPaginationBtn:{color:Ue(()=>e.color),border:Ue(()=>e.border),density:Ue(()=>e.density),size:Ue(()=>e.size),variant:Ue(()=>e.variant),rounded:Ue(()=>e.rounded),elevation:Ue(()=>e.elevation)}});const J=fe(()=>L.value.map(($,H)=>{const W=te=>X(te,H);if(typeof $=="string")return{isActive:!1,key:`ellipsis-${H}`,page:$,props:{ref:W,ellipsis:!0,icon:!0,disabled:!0}};{const te=$===r.value;return{isActive:te,key:$,page:l($),props:{ref:W,ellipsis:!1,icon:!0,disabled:!!e.disabled||Number(e.length)<2,color:te?e.activeColor:e.color,"aria-current":te,"aria-label":a(te?e.currentPageAriaLabel:e.pageAriaLabel,$),onClick:Y=>B(Y,$)}}}})),Q=fe(()=>{const $=!!e.disabled||r.value<=k.value,H=!!e.disabled||r.value>=k.value+T.value-1;return{first:e.showFirstLastPage?{icon:h.value?e.lastIcon:e.firstIcon,onClick:W=>B(W,k.value,"first"),disabled:$,"aria-label":a(e.firstAriaLabel),"aria-disabled":$}:void 0,prev:{icon:h.value?e.nextIcon:e.prevIcon,onClick:W=>B(W,r.value-1,"prev"),disabled:$,"aria-label":a(e.previousAriaLabel),"aria-disabled":$},next:{icon:h.value?e.prevIcon:e.nextIcon,onClick:W=>B(W,r.value+1,"next"),disabled:H,"aria-label":a(e.nextAriaLabel),"aria-disabled":H},last:e.showFirstLastPage?{icon:h.value?e.firstIcon:e.lastIcon,onClick:W=>B(W,k.value+T.value-1,"last"),disabled:H,"aria-label":a(e.lastAriaLabel),"aria-disabled":H}:void 0}});function re(){const $=r.value-k.value;F.value[$]?.$el.focus()}function Z($){$.key===$C.left&&!e.disabled&&r.value>Number(e.start)?(r.value=r.value-1,Gn(re)):$.key===$C.right&&!e.disabled&&r.value<k.value+T.value-1&&(r.value=r.value+1,Gn(re))}return Vt(()=>ce(e.tag,{ref:x,class:Tt(["v-pagination",s.value,e.class]),style:Qt(e.style),role:"navigation","aria-label":a(e.ariaLabel),onKeydown:Z,"data-test":"v-pagination-root"},{default:()=>[N("ul",{class:"v-pagination__list"},[e.showFirstLastPage&&N("li",{key:"first",class:"v-pagination__first","data-test":"v-pagination-first"},[n.first?n.first(Q.value.first):ce(mi,kt({_as:"VPaginationBtn"},Q.value.first),null)]),N("li",{key:"prev",class:"v-pagination__prev","data-test":"v-pagination-prev"},[n.prev?n.prev(Q.value.prev):ce(mi,kt({_as:"VPaginationBtn"},Q.value.prev),null)]),J.value.map(($,H)=>N("li",{key:$.key,class:Tt(["v-pagination__item",{"v-pagination__item--is-active":$.isActive}]),"data-test":"v-pagination-item"},[n.item?n.item($):ce(mi,kt({_as:"VPaginationBtn"},$.props),{default:()=>[$.page]})])),N("li",{key:"next",class:"v-pagination__next","data-test":"v-pagination-next"},[n.next?n.next(Q.value.next):ce(mi,kt({_as:"VPaginationBtn"},Q.value.next),null)]),e.showFirstLastPage&&N("li",{key:"last",class:"v-pagination__last","data-test":"v-pagination-last"},[n.last?n.last(Q.value.last):ce(mi,kt({_as:"VPaginationBtn"},Q.value.last),null)])])]})),{}}}),XP=st({prevIcon:{type:Cn,default:"$prev"},nextIcon:{type:Cn,default:"$next"},firstIcon:{type:Cn,default:"$first"},lastIcon:{type:Cn,default:"$last"},itemsPerPageText:{type:String,default:"$vuetify.dataFooter.itemsPerPageText"},pageText:{type:String,default:"$vuetify.dataFooter.pageText"},firstPageLabel:{type:String,default:"$vuetify.dataFooter.firstPage"},prevPageLabel:{type:String,default:"$vuetify.dataFooter.prevPage"},nextPageLabel:{type:String,default:"$vuetify.dataFooter.nextPage"},lastPageLabel:{type:String,default:"$vuetify.dataFooter.lastPage"},itemsPerPageOptions:{type:Array,default:()=>[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}]},showCurrentPage:Boolean},"VDataTableFooter"),Zb=It()({name:"VDataTableFooter",props:XP(),setup(e,t){let{slots:n}=t;const{t:i}=dr(),{page:r,pageCount:a,startIndex:l,stopIndex:h,itemsLength:s,itemsPerPage:p,setItemsPerPage:v}=fge(),x=fe(()=>e.itemsPerPageOptions.map(T=>typeof T=="number"?{value:T,title:T===-1?i("$vuetify.dataFooter.itemsPerPageAll"):String(T)}:{...T,title:isNaN(Number(T.title))?i(T.title):T.title}));return Vt(()=>{const T=Zk.filterProps(e);return N("div",{class:"v-data-table-footer"},[n.prepend?.(),N("div",{class:"v-data-table-footer__items-per-page"},[N("span",{"aria-label":i(e.itemsPerPageText)},[i(e.itemsPerPageText)]),ce(Rb,{items:x.value,modelValue:p.value,"onUpdate:modelValue":k=>v(Number(k)),density:"compact",variant:"outlined",hideDetails:!0},null)]),N("div",{class:"v-data-table-footer__info"},[N("div",null,[i(e.pageText,s.value?l.value+1:0,h.value,s.value)])]),N("div",{class:"v-data-table-footer__pagination"},[ce(Zk,kt({modelValue:r.value,"onUpdate:modelValue":k=>r.value=k,density:"comfortable",firstAriaLabel:e.firstPageLabel,lastAriaLabel:e.lastPageLabel,length:a.value,nextAriaLabel:e.nextPageLabel,previousAriaLabel:e.prevPageLabel,rounded:!0,showFirstLastPage:!0,totalVisible:e.showCurrentPage?1:0,variant:"plain"},T),null)])])}),{}}}),Yb=RK({align:{type:String,default:"start"},fixed:{type:[Boolean,String],default:!1},fixedOffset:[Number,String],fixedEndOffset:[Number,String],height:[Number,String],lastFixed:Boolean,firstFixedEnd:Boolean,noPadding:Boolean,indent:[Number,String],empty:Boolean,tag:String,width:[Number,String],maxWidth:[Number,String],nowrap:Boolean},(e,t)=>{let{slots:n}=t;const i=e.tag??"td",r=typeof e.fixed=="string"?e.fixed:e.fixed?"start":"none";return ce(i,{class:Tt(["v-data-table__td",{"v-data-table-column--fixed":r==="start","v-data-table-column--fixed-end":r==="end","v-data-table-column--last-fixed":e.lastFixed,"v-data-table-column--first-fixed-end":e.firstFixedEnd,"v-data-table-column--no-padding":e.noPadding,"v-data-table-column--nowrap":e.nowrap,"v-data-table-column--empty":e.empty},`v-data-table-column--align-${e.align}`]),style:{height:dn(e.height),width:dn(e.width),maxWidth:dn(e.maxWidth),left:r==="start"?dn(e.fixedOffset||null):void 0,right:r==="end"?dn(e.fixedEndOffset||null):void 0,paddingInlineStart:e.indent?dn(e.indent):void 0}},{default:()=>[n.default?.()]})}),Ege=st({headers:Array},"DataTable-header"),Bj=Symbol.for("vuetify:data-table-headers"),Fj={title:"",sortable:!1},Cge={...Fj,width:48};function kge(){const t=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).map(n=>({element:n,priority:0}));return{enqueue:(n,i)=>{let r=!1;for(let a=0;a<t.length;a++)if(t[a].priority>i){t.splice(a,0,{element:n,priority:i}),r=!0;break}r||t.push({element:n,priority:i})},size:()=>t.length,count:()=>{let n=0;if(!t.length)return 0;const i=Math.floor(t[0].priority);for(let r=0;r<t.length;r++)Math.floor(t[r].priority)===i&&(n+=1);return n},dequeue:()=>t.shift()}}function Yk(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];if(!e.children)t.push(e);else for(const n of e.children)Yk(n,t);return t}function zj(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new Set;for(const n of e)n.key&&t.add(n.key),n.children&&zj(n.children,t);return t}function Ige(e){if(e.key){if(e.key==="data-table-group")return Fj;if(["data-table-expand","data-table-select"].includes(e.key))return Cge}}function ZP(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.children?Math.max(t,...e.children.map(n=>ZP(n,t+1))):t}function Age(e){let t=!1;function n(a,l){let h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"none";if(a)if(h!=="none"&&(a.fixed=h),a.fixed===!0&&(a.fixed="start"),a.fixed===l)if(a.children)if(l==="start")for(let s=a.children.length-1;s>=0;s--)n(a.children[s],l,l);else for(let s=0;s<a.children.length;s++)n(a.children[s],l,l);else!t&&l==="start"?a.lastFixed=!0:!t&&l==="end"?a.firstFixedEnd=!0:isNaN(Number(a.width))?(`${a.key}`,void 0):a.minWidth=Math.max(Number(a.width)||0,Number(a.minWidth)||0),t=!0;else if(a.children)if(l==="start")for(let s=a.children.length-1;s>=0;s--)n(a.children[s],l);else for(let s=0;s<a.children.length;s++)n(a.children[s],l);else t=!1}for(let a=e.length-1;a>=0;a--)n(e[a],"start");for(let a=0;a<e.length;a++)n(e[a],"end");let i=0;for(let a=0;a<e.length;a++)i=Nj(e[a],i);let r=0;for(let a=e.length-1;a>=0;a--)r=Uj(e[a],r)}function Nj(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!e)return t;if(e.children){e.fixedOffset=t;for(const n of e.children)t=Nj(n,t)}else e.fixed&&e.fixed!=="end"&&(e.fixedOffset=t,t+=parseFloat(e.width||"0")||0);return t}function Uj(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!e)return t;if(e.children){e.fixedEndOffset=t;for(const n of e.children)t=Uj(n,t)}else e.fixed==="end"&&(e.fixedEndOffset=t,t+=parseFloat(e.width||"0")||0);return t}function Pge(e,t){const n=[];let i=0;const r=kge(e);for(;r.size()>0;){let l=r.count();const h=[];let s=1;for(;l>0;){const{element:p,priority:v}=r.dequeue(),x=t-i-ZP(p);if(h.push({...p,rowspan:x??1,colspan:p.children?Yk(p).length:1}),p.children)for(const T of p.children){const k=v%1+s/Math.pow(10,i+2);r.enqueue(T,i+x+k)}s+=1,l-=1}i+=1,n.push(h)}return{columns:e.map(l=>Yk(l)).flat(),headers:n}}function $j(e){const t=[];for(const n of e){const i={...Ige(n),...n},r=i.key??(typeof i.value=="string"?i.value:null),a=i.value??r??null,l={...i,key:r,value:a,sortable:i.sortable??(i.key!=null||!!i.sort),children:i.children?$j(i.children):void 0};t.push(l)}return t}function YP(e,t){const n=at([]),i=at([]),r=at({}),a=at({}),l=at({});zr(()=>{const p=(e.headers||Object.keys(e.items[0]??{}).map(M=>({key:M,title:ld(M)}))).slice(),v=zj(p);t?.groupBy?.value.length&&!v.has("data-table-group")&&p.unshift({key:"data-table-group",title:"Group"}),t?.showSelect?.value&&!v.has("data-table-select")&&p.unshift({key:"data-table-select"}),t?.showExpand?.value&&!v.has("data-table-expand")&&p.push({key:"data-table-expand"});const x=$j(p);Age(x);const T=Math.max(...x.map(M=>ZP(M)))+1,k=Pge(x,T);n.value=k.headers,i.value=k.columns;const P=k.headers.flat(1);for(const M of P)M.key&&(M.sortable&&(M.sort&&(r.value[M.key]=M.sort),M.sortRaw&&(a.value[M.key]=M.sortRaw)),M.filter&&(l.value[M.key]=M.filter))});const h={headers:n,columns:i,sortFunctions:r,sortRawFunctions:a,filterFunctions:l};return Mr(Bj,h),h}function KT(){const e=xi(Bj);if(!e)throw new Error("Missing headers!");return e}const jj=st({color:String,disableSort:Boolean,fixedHeader:Boolean,multiSort:Boolean,sortAscIcon:{type:Cn,default:"$sortAsc"},sortDescIcon:{type:Cn,default:"$sortDesc"},headerProps:{type:Object},sticky:Boolean,...xs(),...Yp(),...tT()},"VDataTableHeaders"),Gp=It()({name:"VDataTableHeaders",props:jj(),setup(e,t){let{slots:n}=t;const{t:i}=dr(),{toggleSort:r,sortBy:a,isSorted:l}=Vj(),{someSelected:h,allSelected:s,selectAll:p,showSelectAll:v}=HT(),{columns:x,headers:T}=KT(),{loaderClasses:k}=u0(e);function P(H,W){if(!(e.sticky||e.fixedHeader)&&!H.fixed)return;const te=typeof H.fixed=="string"?H.fixed:H.fixed?"start":"none";return{position:"sticky",left:te==="start"?dn(H.fixedOffset):void 0,right:te==="end"?dn(H.fixedEndOffset):void 0,top:e.sticky||e.fixedHeader?`calc(var(--v-table-header-height) * ${W})`:void 0}}function M(H,W){H.key==="Enter"&&!e.disableSort&&r(W)}function L(H){const W=a.value.find(te=>te.key===H.key);return W?W.order==="asc"?e.sortAscIcon:e.sortDescIcon:e.sortAscIcon}const{backgroundColorClasses:B,backgroundColorStyles:F}=tr(()=>e.color),{displayClasses:X,mobile:J}=Dl(e),Q=fe(()=>({headers:T.value,columns:x.value,toggleSort:r,isSorted:l,sortBy:a.value,someSelected:h.value,allSelected:s.value,selectAll:p,getSortIcon:L})),re=fe(()=>["v-data-table__th",{"v-data-table__th--sticky":e.sticky||e.fixedHeader},X.value,k.value]),Z=H=>{let{column:W,x:te,y:Y}=H;const ne=W.key==="data-table-select"||W.key==="data-table-expand",Se=W.key==="data-table-group"&&W.width===0&&!W.title,Fe=kt(e.headerProps??{},W.headerProps??{});return ce(Yb,kt({tag:"th",align:W.align,class:[{"v-data-table__th--sortable":W.sortable&&!e.disableSort,"v-data-table__th--sorted":l(W),"v-data-table__th--fixed":W.fixed},...re.value],style:{width:dn(W.width),minWidth:dn(W.minWidth),maxWidth:dn(W.maxWidth),...P(W,Y)},colspan:W.colspan,rowspan:W.rowspan,fixed:W.fixed,nowrap:W.nowrap,lastFixed:W.lastFixed,firstFixedEnd:W.firstFixedEnd,noPadding:ne,empty:Se,tabindex:W.sortable?0:void 0,onClick:W.sortable?()=>r(W):void 0,onKeydown:W.sortable?Ve=>M(Ve,W):void 0},Fe),{default:()=>{const Ve=`header.${W.key}`,Ge={column:W,selectAll:p,isSorted:l,toggleSort:r,sortBy:a.value,someSelected:h.value,allSelected:s.value,getSortIcon:L};return n[Ve]?n[Ve](Ge):Se?"":W.key==="data-table-select"?n["header.data-table-select"]?.(Ge)??(v.value&&ce(rd,{density:e.density,modelValue:s.value,indeterminate:h.value&&!s.value,"onUpdate:modelValue":p},null)):N("div",{class:"v-data-table-header__content"},[N("span",null,[W.title]),W.sortable&&!e.disableSort&&ce(Hi,{key:"icon",class:"v-data-table-header__sort-icon",icon:L(W)},null),e.multiSort&&l(W)&&N("div",{key:"badge",class:Tt(["v-data-table-header__sort-badge",...B.value]),style:Qt(F.value)},[a.value.findIndex(je=>je.key===W.key)+1])])}})},$=()=>{const H=fe(()=>x.value.filter(te=>te?.sortable&&!e.disableSort)),W=fe(()=>{if(x.value.find(Y=>Y.key==="data-table-select")!=null)return s.value?"$checkboxOn":h.value?"$checkboxIndeterminate":"$checkboxOff"});return ce(Yb,kt({tag:"th",class:[...re.value],colspan:T.value.length+1},e.headerProps),{default:()=>[N("div",{class:"v-data-table-header__content"},[ce(Rb,{chips:!0,class:"v-data-table__td-sort-select",clearable:!0,density:"default",items:H.value,label:i("$vuetify.dataTable.sortBy"),multiple:e.multiSort,variant:"underlined","onClick:clear":()=>a.value=[],appendIcon:W.value,"onClick:append":()=>p(!s.value)},{chip:te=>ce(Hu,{onClick:te.item.raw?.sortable?()=>r(te.item.raw):void 0,onMousedown:Y=>{Y.preventDefault(),Y.stopPropagation()}},{default:()=>[te.item.title,ce(Hi,{class:Tt(["v-data-table__td-sort-icon",l(te.item.raw)&&"v-data-table__td-sort-icon-active"]),icon:L(te.item.raw),size:"small"},null)]})})])]})};Vt(()=>J.value?N("tr",null,[ce($,null,null)]):N(sn,null,[n.headers?n.headers(Q.value):T.value.map((H,W)=>N("tr",null,[H.map((te,Y)=>ce(Z,{column:te,x:Y,y:W},null))])),e.loading&&N("tr",{class:"v-data-table-progress"},[N("th",{colspan:x.value.length},[ce(d0,{name:"v-data-table-progress",absolute:!0,active:!0,color:typeof e.loading=="boolean"?void 0:e.loading,indeterminate:!0},{default:n.loader})])])]))}}),Wj=st({item:{type:Object,required:!0},groupCollapseIcon:{type:Cn,default:"$tableGroupCollapse"},groupExpandIcon:{type:Cn,default:"$tableGroupExpand"},...xs()},"VDataTableGroupHeaderRow"),Mge=It()({name:"VDataTableGroupHeaderRow",props:Wj(),setup(e,t){let{slots:n}=t;const{isGroupOpen:i,toggleGroup:r,extractRows:a}=Cj(),{isSelected:l,isSomeSelected:h,select:s}=HT(),{columns:p}=KT(),v=fe(()=>a([e.item])),x=Ue(()=>p.value.length-(p.value.some(T=>T.key==="data-table-select")?1:0));return()=>N("tr",{class:"v-data-table-group-header-row",style:{"--v-data-table-group-header-row-depth":e.item.depth}},[p.value.map(T=>{if(T.key==="data-table-group"){const k=i(e.item)?e.groupCollapseIcon:e.groupExpandIcon,P=()=>r(e.item);return n["data-table-group"]?.({item:e.item,count:v.value.length,props:{icon:k,onClick:P}})??ce(Yb,{class:"v-data-table-group-header-row__column",colspan:x.value},{default:()=>[ce(mi,{size:"small",variant:"text",icon:k,onClick:P},null),N("span",null,[e.item.value]),N("span",null,[Jn("("),v.value.length,Jn(")")])]})}else if(T.key==="data-table-select"){const k=l(v.value),P=h(v.value)&&!k,M=L=>s(v.value,L);return n["data-table-select"]?.({props:{modelValue:k,indeterminate:P,"onUpdate:modelValue":M}})??ce(Yb,{class:"v-data-table__td--select-row",noPadding:!0},{default:()=>[ce(rd,{density:e.density,modelValue:k,indeterminate:P,"onUpdate:modelValue":M},null)]})}return""})])}}),Hj=st({index:Number,item:Object,cellProps:[Object,Function],collapseIcon:{type:Cn,default:"$collapse"},expandIcon:{type:Cn,default:"$expand"},onClick:Vo(),onContextmenu:Vo(),onDblclick:Vo(),...xs(),...Yp()},"VDataTableRow"),JP=It()({name:"VDataTableRow",props:Hj(),setup(e,t){let{slots:n}=t;const{displayClasses:i,mobile:r}=Dl(e,"v-data-table__tr"),{isSelected:a,toggleSelect:l,someSelected:h,allSelected:s,selectAll:p}=HT(),{isExpanded:v,toggleExpand:x}=Sj(),{toggleSort:T,sortBy:k,isSorted:P}=Vj(),{columns:M}=KT();Vt(()=>N("tr",{class:Tt(["v-data-table__tr",{"v-data-table__tr--clickable":!!(e.onClick||e.onContextmenu||e.onDblclick)},i.value]),onClick:e.onClick,onContextmenu:e.onContextmenu,onDblclick:e.onDblclick},[e.item&&M.value.map((L,B)=>{const F=e.item,X=`item.${L.key}`,J=`header.${L.key}`,Q={index:e.index,item:F.raw,internalItem:F,value:Lp(F.columns,L.key),column:L,isSelected:a,toggleSelect:l,isExpanded:v,toggleExpand:x},re={column:L,selectAll:p,isSorted:P,toggleSort:T,sortBy:k.value,someSelected:h.value,allSelected:s.value,getSortIcon:()=>""},Z=typeof e.cellProps=="function"?e.cellProps({index:Q.index,item:Q.item,internalItem:Q.internalItem,value:Q.value,column:L}):e.cellProps,$=typeof L.cellProps=="function"?L.cellProps({index:Q.index,item:Q.item,internalItem:Q.internalItem,value:Q.value}):L.cellProps,H=L.key==="data-table-select"||L.key==="data-table-expand",W=L.key==="data-table-group"&&L.width===0&&!L.title;return ce(Yb,kt({align:L.align,indent:L.intent,class:{"v-data-table__td--expanded-row":L.key==="data-table-expand","v-data-table__td--select-row":L.key==="data-table-select"},fixed:L.fixed,fixedOffset:L.fixedOffset,fixedEndOffset:L.fixedEndOffset,lastFixed:L.lastFixed,firstFixedEnd:L.firstFixedEnd,maxWidth:r.value?void 0:L.maxWidth,noPadding:H,empty:W,nowrap:L.nowrap,width:r.value?void 0:L.width},Z,$),{default:()=>{if(L.key==="data-table-select")return n["item.data-table-select"]?.({...Q,props:{disabled:!F.selectable,modelValue:a([F]),onClick:nh(()=>l(F),["stop"])}})??ce(rd,{disabled:!F.selectable,density:e.density,modelValue:a([F]),onClick:nh(Y=>l(F,e.index,Y),["stop"])},null);if(L.key==="data-table-expand")return n["item.data-table-expand"]?.({...Q,props:{icon:v(F)?e.collapseIcon:e.expandIcon,size:"small",variant:"text",onClick:nh(()=>x(F),["stop"])}})??ce(mi,{icon:v(F)?e.collapseIcon:e.expandIcon,size:"small",variant:"text",onClick:nh(()=>x(F),["stop"])},null);if(n[X]&&!r.value)return n[X](Q);const te=an(Q.value);return r.value?N(sn,null,[N("div",{class:"v-data-table__td-title"},[n[J]?.(re)??L.title]),N("div",{class:"v-data-table__td-value"},[n[X]?.(Q)??te])]):te}})})]))}}),Gj=st({loading:[Boolean,String],loadingText:{type:String,default:"$vuetify.dataIterator.loadingText"},hideNoData:Boolean,items:{type:Array,default:()=>[]},noDataText:{type:String,default:"$vuetify.noDataText"},rowProps:[Object,Function],cellProps:[Object,Function],...Ml(Hj(),["collapseIcon","expandIcon","density"]),...Ml(Wj(),["groupCollapseIcon","groupExpandIcon","density"]),...Yp()},"VDataTableRows"),qp=It()({name:"VDataTableRows",inheritAttrs:!1,props:Gj(),setup(e,t){let{attrs:n,slots:i}=t;const{columns:r}=KT(),{expandOnClick:a,toggleExpand:l,isExpanded:h}=Sj(),{isSelected:s,toggleSelect:p}=HT(),{toggleGroup:v,isGroupOpen:x}=Cj(),{t:T}=dr(),{mobile:k}=Dl(e);return Vt(()=>{const P=Ml(e,["groupCollapseIcon","groupExpandIcon","density"]);return e.loading&&(!e.items.length||i.loading)?N("tr",{class:"v-data-table-rows-loading",key:"loading"},[N("td",{colspan:r.value.length},[i.loading?.()??T(e.loadingText)])]):!e.loading&&!e.items.length&&!e.hideNoData?N("tr",{class:"v-data-table-rows-no-data",key:"no-data"},[N("td",{colspan:r.value.length},[i["no-data"]?.()??T(e.noDataText)])]):N(sn,null,[e.items.map((M,L)=>{if(M.type==="group"){const X={index:L,item:M,columns:r.value,isExpanded:h,toggleExpand:l,isSelected:s,toggleSelect:p,toggleGroup:v,isGroupOpen:x};return i["group-header"]?i["group-header"](X):ce(Mge,kt({key:`group-header_${M.id}`,item:M},uO(n,":groupHeader",()=>X),P),i)}if(M.type==="group-summary"){const X={index:L,item:M,columns:r.value,toggleGroup:v};return i["group-summary"]?.(X)??""}const B={index:L,item:M.raw,internalItem:M,columns:r.value,isExpanded:h,toggleExpand:l,isSelected:s,toggleSelect:p},F={...B,props:kt({key:`item_${M.key??M.index}`,onClick:a.value?()=>{l(M)}:void 0,index:L,item:M,cellProps:e.cellProps,collapseIcon:e.collapseIcon,expandIcon:e.expandIcon,density:e.density,mobile:k.value},uO(n,":row",()=>B),typeof e.rowProps=="function"?e.rowProps({item:B.item,index:B.index,internalItem:B.internalItem}):e.rowProps)};return N(sn,{key:F.props.key},[i.item?i.item(F):ce(JP,F.props,i),h(M)&&i["expanded-row"]?.(B)])})])}),{}}}),qj=st({fixedHeader:Boolean,fixedFooter:Boolean,height:[Number,String],hover:Boolean,striped:{type:String,default:null,validator:e=>["even","odd"].includes(e)},...vn(),...xs(),...ti(),...Ii()},"VTable"),Kp=It()({name:"VTable",props:qj(),setup(e,t){let{slots:n,emit:i}=t;const{themeClasses:r}=Zi(e),{densityClasses:a}=$a(e);return Vt(()=>ce(e.tag,{class:Tt(["v-table",{"v-table--fixed-height":!!e.height,"v-table--fixed-header":e.fixedHeader,"v-table--fixed-footer":e.fixedFooter,"v-table--has-top":!!n.top,"v-table--has-bottom":!!n.bottom,"v-table--hover":e.hover,"v-table--striped-even":e.striped==="even","v-table--striped-odd":e.striped==="odd"},r.value,a.value,e.class]),style:Qt(e.style)},{default:()=>[n.top?.(),n.default?N("div",{class:"v-table__wrapper",style:{height:dn(e.height)}},[N("table",null,[n.default()])]):n.wrapper?.(),n.bottom?.()]})),{}}}),Dge=st({items:{type:Array,default:()=>[]},itemValue:{type:[String,Array,Function],default:"id"},itemSelectable:{type:[String,Array,Function],default:null},rowProps:[Object,Function],cellProps:[Object,Function],returnObject:Boolean},"DataTable-items");function Rge(e,t,n,i){const r=e.returnObject?t:Ps(t,e.itemValue),a=Ps(t,e.itemSelectable,!0),l=i.reduce((h,s)=>(s.key!=null&&(h[s.key]=Ps(t,s.value)),h),{});return{type:"item",key:e.returnObject?Ps(t,e.itemValue):r,index:n,value:r,selectable:a,columns:l,raw:t}}function Lge(e,t,n){return t.map((i,r)=>Rge(e,i,r,n))}function QP(e,t){return{items:fe(()=>Lge(e,e.items,t.value))}}const eM=st({...Gj(),hideDefaultBody:Boolean,hideDefaultFooter:Boolean,hideDefaultHeader:Boolean,width:[String,Number],search:String,...wj(),...jP(),...Ege(),...Dge(),...Dj(),...Lj(),...jj(),...qj()},"DataTable"),Oge=st({...HP(),...eM(),..._v(),...XP()},"VDataTable"),Vge=It()({name:"VDataTable",props:Oge(),emits:{"update:modelValue":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:groupBy":e=>!0,"update:expanded":e=>!0,"update:currentItems":e=>!0},setup(e,t){let{attrs:n,slots:i}=t;const{groupBy:r}=WP(e),{sortBy:a,multiSort:l,mustSort:h}=GT(e),{page:s,itemsPerPage:p}=GP(e),{disableSort:v}=iv(e),{columns:x,headers:T,sortFunctions:k,sortRawFunctions:P,filterFunctions:M}=YP(e,{groupBy:r,showSelect:Ue(()=>e.showSelect),showExpand:Ue(()=>e.showExpand)}),{items:L}=QP(e,x),B=Ue(()=>e.search),{filteredItems:F}=vv(e,L,B,{transform:Qe=>Qe.columns,customKeyFilter:M}),{toggleSort:X}=qT({sortBy:a,multiSort:l,mustSort:h,page:s}),{sortByWithGroups:J,opened:Q,extractRows:re,isGroupOpen:Z,toggleGroup:$}=UT({groupBy:r,sortBy:a,disableSort:v}),{sortedItems:H}=KP(e,F,J,{transform:Qe=>({...Qe.raw,...Qe.columns}),sortFunctions:k,sortRawFunctions:P}),{flatItems:W}=$T(H,r,Q,()=>!!i["group-summary"]),te=fe(()=>W.value.length),{startIndex:Y,stopIndex:ne,pageCount:Se,setItemsPerPage:Fe}=qP({page:s,itemsPerPage:p,itemsLength:te}),{paginatedItems:Ve}=Pj({items:W,startIndex:Y,stopIndex:ne,itemsPerPage:p}),Ge=fe(()=>re(Ve.value)),{isSelected:je,select:Ae,selectAll:Ke,toggleSelect:ve,someSelected:Le,allSelected:We}=WT(e,{allItems:L,currentPage:Ge}),{isExpanded:ct,toggleExpand:ut}=NT(e);jT({page:s,itemsPerPage:p,sortBy:a,groupBy:r,search:B}),Jr({VDataTableRows:{hideNoData:Ue(()=>e.hideNoData),noDataText:Ue(()=>e.noDataText),loading:Ue(()=>e.loading),loadingText:Ue(()=>e.loadingText)}});const rt=fe(()=>({page:s.value,itemsPerPage:p.value,sortBy:a.value,pageCount:Se.value,toggleSort:X,setItemsPerPage:Fe,someSelected:Le.value,allSelected:We.value,isSelected:je,select:Ae,selectAll:Ke,toggleSelect:ve,isExpanded:ct,toggleExpand:ut,isGroupOpen:Z,toggleGroup:$,items:Ge.value.map(Qe=>Qe.raw),internalItems:Ge.value,groupedItems:Ve.value,columns:x.value,headers:T.value}));return Vt(()=>{const Qe=Zb.filterProps(e),Ct=Gp.filterProps(e),At=qp.filterProps(e),yn=Kp.filterProps(e);return ce(Kp,kt({class:["v-data-table",{"v-data-table--show-select":e.showSelect,"v-data-table--loading":e.loading},e.class],style:e.style},yn,{fixedHeader:e.fixedHeader||e.sticky}),{top:()=>i.top?.(rt.value),default:()=>i.default?i.default(rt.value):N(sn,null,[i.colgroup?.(rt.value),!e.hideDefaultHeader&&N("thead",{key:"thead"},[ce(Gp,Ct,i)]),i.thead?.(rt.value),!e.hideDefaultBody&&N("tbody",null,[i["body.prepend"]?.(rt.value),i.body?i.body(rt.value):ce(qp,kt(n,At,{items:Ve.value}),i),i["body.append"]?.(rt.value)]),i.tbody?.(rt.value),i.tfoot?.(rt.value)]),bottom:()=>i.bottom?i.bottom(rt.value):!e.hideDefaultFooter&&N(sn,null,[ce(tc,null,null),ce(Zb,Qe,{prepend:i["footer.prepend"]})])})}),{}}}),Bge=st({...ur(eM(),["hideDefaultFooter"]),...jP(),...V4(),..._v()},"VDataTableVirtual"),Fge=It()({name:"VDataTableVirtual",props:Bge(),emits:{"update:modelValue":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:groupBy":e=>!0,"update:expanded":e=>!0},setup(e,t){let{attrs:n,slots:i}=t;const{groupBy:r}=WP(e),{sortBy:a,multiSort:l,mustSort:h}=GT(e),{disableSort:s}=iv(e),{columns:p,headers:v,filterFunctions:x,sortFunctions:T,sortRawFunctions:k}=YP(e,{groupBy:r,showSelect:Ue(()=>e.showSelect),showExpand:Ue(()=>e.showExpand)}),{items:P}=QP(e,p),M=Ue(()=>e.search),{filteredItems:L}=vv(e,P,M,{transform:yn=>yn.columns,customKeyFilter:x}),{toggleSort:B}=qT({sortBy:a,multiSort:l,mustSort:h}),{sortByWithGroups:F,opened:X,extractRows:J,isGroupOpen:Q,toggleGroup:re}=UT({groupBy:r,sortBy:a,disableSort:s}),{sortedItems:Z}=KP(e,L,F,{transform:yn=>({...yn.raw,...yn.columns}),sortFunctions:T,sortRawFunctions:k}),{flatItems:$}=$T(Z,r,X,()=>!!i["group-summary"]),H=fe(()=>J($.value)),{isSelected:W,select:te,selectAll:Y,toggleSelect:ne,someSelected:Se,allSelected:Fe}=WT(e,{allItems:H,currentPage:H}),{isExpanded:Ve,toggleExpand:Ge}=NT(e),{containerRef:je,markerRef:Ae,paddingTop:Ke,paddingBottom:ve,computedItems:Le,handleItemResize:We,handleScroll:ct,handleScrollend:ut,calculateVisibleItems:rt,scrollToIndex:Qe}=B4(e,$),Ct=fe(()=>Le.value.map(yn=>yn.raw));jT({sortBy:a,page:Xt(1),itemsPerPage:Xt(-1),groupBy:r,search:M}),Jr({VDataTableRows:{hideNoData:Ue(()=>e.hideNoData),noDataText:Ue(()=>e.noDataText),loading:Ue(()=>e.loading),loadingText:Ue(()=>e.loadingText)}});const At=fe(()=>({sortBy:a.value,toggleSort:B,someSelected:Se.value,allSelected:Fe.value,isSelected:W,select:te,selectAll:Y,toggleSelect:ne,isExpanded:Ve,toggleExpand:Ge,isGroupOpen:Q,toggleGroup:re,items:H.value.map(yn=>yn.raw),internalItems:H.value,groupedItems:$.value,columns:p.value,headers:v.value}));return Vt(()=>{const yn=Gp.filterProps(e),Mn=qp.filterProps(e),Ce=Kp.filterProps(e);return ce(Kp,kt({class:["v-data-table",{"v-data-table--loading":e.loading},e.class],style:e.style},Ce,{fixedHeader:e.fixedHeader||e.sticky}),{top:()=>i.top?.(At.value),wrapper:()=>N("div",{ref:je,onScrollPassive:ct,onScrollend:ut,class:"v-table__wrapper",style:{height:dn(e.height)}},[N("table",null,[i.colgroup?.(At.value),!e.hideDefaultHeader&&N("thead",{key:"thead"},[ce(Gp,yn,i)]),i.thead?.(At.value),!e.hideDefaultBody&&N("tbody",{key:"tbody"},[N("tr",{ref:Ae,style:{height:dn(Ke.value),border:0}},[N("td",{colspan:p.value.length,style:{height:0,border:0}},null)]),i["body.prepend"]?.(At.value),ce(qp,kt(n,Mn,{items:Ct.value}),{...i,item:ze=>ce(O4,{key:ze.internalItem.index,renderless:!0,"onUpdate:height":Ee=>We(ze.internalItem.index,Ee)},{default:Ee=>{let{itemRef:pt}=Ee;return i.item?.({...ze,itemRef:pt})??ce(JP,kt(ze.props,{ref:pt,key:ze.internalItem.index,index:ze.internalItem.index}),i)}})}),i["body.append"]?.(At.value),N("tr",{style:{height:dn(ve.value),border:0}},[N("td",{colspan:p.value.length,style:{height:0,border:0}},null)])]),i.tbody?.(At.value),i.tfoot?.(At.value)])]),bottom:()=>i.bottom?.(At.value)})}),{calculateVisibleItems:rt,scrollToIndex:Qe}}}),zge=st({itemsLength:{type:[Number,String],required:!0},...HP(),...eM(),...XP()},"VDataTableServer"),Nge=It()({name:"VDataTableServer",props:zge(),emits:{"update:modelValue":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:expanded":e=>!0,"update:groupBy":e=>!0},setup(e,t){let{attrs:n,slots:i}=t;const{groupBy:r}=WP(e),{sortBy:a,multiSort:l,mustSort:h}=GT(e),{page:s,itemsPerPage:p}=GP(e),{disableSort:v}=iv(e),x=fe(()=>parseInt(e.itemsLength,10)),{columns:T,headers:k}=YP(e,{groupBy:r,showSelect:Ue(()=>e.showSelect),showExpand:Ue(()=>e.showExpand)}),{items:P}=QP(e,T),{toggleSort:M}=qT({sortBy:a,multiSort:l,mustSort:h,page:s}),{opened:L,isGroupOpen:B,toggleGroup:F,extractRows:X}=UT({groupBy:r,sortBy:a,disableSort:v}),{pageCount:J,setItemsPerPage:Q}=qP({page:s,itemsPerPage:p,itemsLength:x}),{flatItems:re}=$T(P,r,L,()=>!!i["group-summary"]),{isSelected:Z,select:$,selectAll:H,toggleSelect:W,someSelected:te,allSelected:Y}=WT(e,{allItems:P,currentPage:P}),{isExpanded:ne,toggleExpand:Se}=NT(e),Fe=fe(()=>X(P.value));jT({page:s,itemsPerPage:p,sortBy:a,groupBy:r,search:Ue(()=>e.search)}),Mr("v-data-table",{toggleSort:M,sortBy:a}),Jr({VDataTableRows:{hideNoData:Ue(()=>e.hideNoData),noDataText:Ue(()=>e.noDataText),loading:Ue(()=>e.loading),loadingText:Ue(()=>e.loadingText)}});const Ve=fe(()=>({page:s.value,itemsPerPage:p.value,sortBy:a.value,pageCount:J.value,toggleSort:M,setItemsPerPage:Q,someSelected:te.value,allSelected:Y.value,isSelected:Z,select:$,selectAll:H,toggleSelect:W,isExpanded:ne,toggleExpand:Se,isGroupOpen:B,toggleGroup:F,items:Fe.value.map(Ge=>Ge.raw),internalItems:Fe.value,groupedItems:re.value,columns:T.value,headers:k.value}));Vt(()=>{const Ge=Zb.filterProps(e),je=Gp.filterProps(e),Ae=qp.filterProps(e),Ke=Kp.filterProps(e);return ce(Kp,kt({class:["v-data-table",{"v-data-table--loading":e.loading},e.class],style:e.style},Ke,{fixedHeader:e.fixedHeader||e.sticky}),{top:()=>i.top?.(Ve.value),default:()=>i.default?i.default(Ve.value):N(sn,null,[i.colgroup?.(Ve.value),!e.hideDefaultHeader&&N("thead",{key:"thead",class:"v-data-table__thead",role:"rowgroup"},[ce(Gp,je,i)]),i.thead?.(Ve.value),!e.hideDefaultBody&&N("tbody",{class:"v-data-table__tbody",role:"rowgroup"},[i["body.prepend"]?.(Ve.value),i.body?i.body(Ve.value):ce(qp,kt(n,Ae,{items:re.value}),i),i["body.append"]?.(Ve.value)]),i.tbody?.(Ve.value),i.tfoot?.(Ve.value)]),bottom:()=>i.bottom?i.bottom(Ve.value):!e.hideDefaultFooter&&N(sn,null,[ce(tc,null,null),ce(Zb,Ge,{prepend:i["footer.prepend"]})])})})}}),Kj=st({active:{type:[String,Array],default:void 0},controlHeight:[Number,String],disabled:{type:[Boolean,String,Array],default:null},nextIcon:{type:Cn,default:"$next"},prevIcon:{type:Cn,default:"$prev"},modeIcon:{type:Cn,default:"$subgroup"},text:String,viewMode:{type:String,default:"month"}},"VDatePickerControls"),Jk=It()({name:"VDatePickerControls",props:Kj(),emits:{"click:year":()=>!0,"click:month":()=>!0,"click:prev":()=>!0,"click:next":()=>!0,"click:text":()=>!0},setup(e,t){let{emit:n}=t;const{t:i}=dr(),r=fe(()=>Array.isArray(e.disabled)?e.disabled.includes("text"):!!e.disabled),a=fe(()=>Array.isArray(e.disabled)?e.disabled.includes("mode"):!!e.disabled),l=fe(()=>Array.isArray(e.disabled)?e.disabled.includes("prev"):!!e.disabled),h=fe(()=>Array.isArray(e.disabled)?e.disabled.includes("next"):!!e.disabled);function s(){n("click:prev")}function p(){n("click:next")}function v(){n("click:year")}function x(){n("click:month")}return Vt(()=>N("div",{class:Tt(["v-date-picker-controls"]),style:{"--v-date-picker-controls-height":dn(e.controlHeight)}},[ce(mi,{class:"v-date-picker-controls__month-btn","data-testid":"month-btn",disabled:r.value,text:e.text,variant:"text",rounded:!0,onClick:x},null),ce(mi,{class:"v-date-picker-controls__mode-btn","data-testid":"year-btn",disabled:a.value,density:"comfortable",icon:e.modeIcon,variant:"text","aria-label":i("$vuetify.datePicker.ariaLabel.selectYear"),onClick:v},null),ce(Y5,null,null),N("div",{class:"v-date-picker-controls__month"},[ce(mi,{"data-testid":"prev-month",disabled:l.value,density:"comfortable",icon:e.prevIcon,variant:"text","aria-label":i("$vuetify.datePicker.ariaLabel.previousMonth"),onClick:s},null),ce(mi,{"data-testid":"next-month",disabled:h.value,icon:e.nextIcon,density:"comfortable",variant:"text","aria-label":i("$vuetify.datePicker.ariaLabel.nextMonth"),onClick:p},null)])])),{}}}),Uge=st({appendIcon:Cn,color:String,header:String,transition:String,onClick:Vo()},"VDatePickerHeader"),Qk=It()({name:"VDatePickerHeader",props:Uge(),emits:{click:()=>!0,"click:append":()=>!0},setup(e,t){let{emit:n,slots:i}=t;const{backgroundColorClasses:r,backgroundColorStyles:a}=tr(()=>e.color);function l(){n("click")}function h(){n("click:append")}return Vt(()=>{const s=!!(i.default||e.header),p=!!(i.append||e.appendIcon);return N("div",{class:Tt(["v-date-picker-header",{"v-date-picker-header--clickable":!!e.onClick},r.value]),style:Qt(a.value),onClick:l},[i.prepend&&N("div",{key:"prepend",class:"v-date-picker-header__prepend"},[i.prepend()]),s&&ce(Oa,{key:"content",name:e.transition},{default:()=>[N("div",{key:e.header,class:"v-date-picker-header__content"},[i.default?.()??e.header])]}),p&&N("div",{class:"v-date-picker-header__append"},[i.append?ce(ci,{key:"append-defaults",disabled:!e.appendIcon,defaults:{VBtn:{icon:e.appendIcon,variant:"text"}}},{default:()=>[i.append?.()]}):ce(mi,{key:"append-btn",icon:e.appendIcon,variant:"text",onClick:h},null)])])}),{}}}),$ge=st({allowedDates:[Array,Function],disabled:{type:Boolean,default:null},displayValue:null,modelValue:Array,month:[Number,String],max:null,min:null,showAdjacentMonths:Boolean,year:[Number,String],weekdays:{type:Array,default:()=>[0,1,2,3,4,5,6]},weeksInMonth:{type:String,default:"dynamic"},firstDayOfWeek:{type:[Number,String],default:void 0},firstDayOfYear:{type:[Number,String],default:void 0},weekdayFormat:String},"calendar");function jge(e){const t=l0(),n=In(e,"modelValue",[],k=>Gr(k).map(P=>t.date(P))),i=fe(()=>e.displayValue?t.date(e.displayValue):n.value.length>0?t.date(n.value[0]):e.min?t.date(e.min):Array.isArray(e.allowedDates)?t.date(e.allowedDates[0]):t.date()),r=In(e,"year",void 0,k=>{const P=k!=null?Number(k):t.getYear(i.value);return t.startOfYear(t.setYear(t.date(),P))},k=>t.getYear(k)),a=In(e,"month",void 0,k=>{const P=k!=null?Number(k):t.getMonth(i.value),M=t.setYear(t.startOfMonth(t.date()),t.getYear(r.value));return t.setMonth(M,P)},k=>t.getMonth(k)),l=fe(()=>{const k=t.toJsDate(t.startOfWeek(t.date(),e.firstDayOfWeek)).getDay();return t.getWeekdays(e.firstDayOfWeek,e.weekdayFormat).filter((P,M)=>e.weekdays.includes((M+k)%7))}),h=fe(()=>{const k=t.getWeekArray(a.value,e.firstDayOfWeek),P=k.flat(),M=42;if(e.weeksInMonth==="static"&&P.length<M){const L=P[P.length-1];let B=[];for(let F=1;F<=M-P.length;F++)B.push(t.addDays(L,F)),F%7===0&&(k.push(B),B=[])}return k});function s(k,P){return k.filter(M=>e.weekdays.includes(t.toJsDate(M).getDay())).map((M,L)=>{const B=t.toISO(M),F=!t.isSameMonth(M,a.value),X=t.isSameDay(M,t.startOfMonth(a.value)),J=t.isSameDay(M,t.endOfMonth(a.value)),Q=t.isSameDay(M,a.value),re=e.weekdays.length;return{date:M,formatted:t.format(M,"keyboardDate"),isAdjacent:F,isDisabled:T(M),isEnd:J,isHidden:F&&!e.showAdjacentMonths,isSame:Q,isSelected:n.value.some(Z=>t.isSameDay(M,Z)),isStart:X,isToday:t.isSameDay(M,P),isWeekEnd:L%re===re-1,isWeekStart:L%re===0,isoDate:B,localized:t.format(M,"dayOfMonth"),month:t.getMonth(M),year:t.getYear(M)}})}const p=fe(()=>{const k=t.startOfWeek(i.value,e.firstDayOfWeek),P=[];for(let L=0;L<=6;L++)P.push(t.addDays(k,L));const M=t.date();return s(P,M)}),v=fe(()=>{const k=h.value.flat(),P=t.date();return s(k,P)}),x=fe(()=>h.value.map(k=>k.length?t.getWeek(k[0],e.firstDayOfWeek,e.firstDayOfYear):null));function T(k){if(e.disabled)return!0;const P=t.date(k);return e.min&&t.isBefore(t.endOfDay(P),t.date(e.min))||e.max&&t.isAfter(P,t.date(e.max))?!0:Array.isArray(e.allowedDates)&&e.allowedDates.length>0?!e.allowedDates.some(M=>t.isSameDay(t.date(M),P)):typeof e.allowedDates=="function"?!e.allowedDates(P):!1}return{displayValue:i,daysInMonth:v,daysInWeek:p,genDays:s,model:n,weeksInMonth:h,weekdayLabels:l,weekNumbers:x}}const Xj=st({color:String,hideWeekdays:Boolean,multiple:[Boolean,Number,String],showWeek:Boolean,transition:{type:String,default:"picker-transition"},reverseTransition:{type:String,default:"picker-reverse-transition"},...ur($ge(),["displayValue"])},"VDatePickerMonth"),eI=It()({name:"VDatePickerMonth",props:Xj(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0},setup(e,t){let{emit:n,slots:i}=t;const r=at(),{t:a}=dr(),{daysInMonth:l,model:h,weekNumbers:s,weekdayLabels:p}=jge(e),v=l0(),x=Xt(),T=Xt(),k=Xt(!1),P=Ue(()=>k.value?e.reverseTransition:e.transition);e.multiple==="range"&&h.value.length>0&&(x.value=h.value[0],h.value.length>1&&(T.value=h.value[h.value.length-1]));const M=fe(()=>{const J=["number","string"].includes(typeof e.multiple)?Number(e.multiple):1/0;return h.value.length>=J});Ht(l,(J,Q)=>{Q&&(k.value=v.isBefore(J[0].date,Q[0].date))});function L(J){const Q=v.startOfDay(J);if(h.value.length===0?x.value=void 0:h.value.length===1&&(x.value=h.value[0],T.value=void 0),!x.value)x.value=Q,h.value=[x.value];else if(T.value)x.value=J,T.value=void 0,h.value=[x.value];else{if(v.isSameDay(Q,x.value)){x.value=void 0,h.value=[];return}else v.isBefore(Q,x.value)?(T.value=v.endOfDay(x.value),x.value=Q):T.value=v.endOfDay(Q);h.value=DX(v,x.value,T.value)}}function B(J){const Q=v.format(J.date,"fullDateWithWeekday"),re=J.isToday?"currentDate":"selectDate";return a(`$vuetify.datePicker.ariaLabel.${re}`,Q)}function F(J){const Q=h.value.findIndex(re=>v.isSameDay(re,J));if(Q===-1)h.value=[...h.value,J];else{const re=[...h.value];re.splice(Q,1),h.value=re}}function X(J){e.multiple==="range"?L(J):e.multiple?F(J):h.value=[J]}Vt(()=>N("div",{class:"v-date-picker-month",style:{"--v-date-picker-days-in-week":e.weekdays.length}},[e.showWeek&&N("div",{key:"weeks",class:"v-date-picker-month__weeks"},[!e.hideWeekdays&&N("div",{key:"hide-week-days",class:"v-date-picker-month__day"},[Jn("")]),s.value.map(J=>N("div",{class:Tt(["v-date-picker-month__day","v-date-picker-month__day--adjacent"])},[J]))]),ce(Oa,{name:P.value},{default:()=>[N("div",{ref:r,key:l.value[0].date?.toString(),class:"v-date-picker-month__days"},[!e.hideWeekdays&&p.value.map(J=>N("div",{class:Tt(["v-date-picker-month__day","v-date-picker-month__weekday"])},[J])),l.value.map((J,Q)=>{const re={props:{class:"v-date-picker-month__day-btn",color:J.isSelected||J.isToday?e.color:void 0,disabled:J.isDisabled,icon:!0,ripple:!1,text:J.localized,variant:J.isSelected?"flat":J.isToday?"outlined":"text","aria-label":B(J),"aria-current":J.isToday?"date":void 0,onClick:()=>X(J.date)},item:J,i:Q};return M.value&&!J.isSelected&&(J.isDisabled=!0),N("div",{class:Tt(["v-date-picker-month__day",{"v-date-picker-month__day--adjacent":J.isAdjacent,"v-date-picker-month__day--hide-adjacent":J.isHidden,"v-date-picker-month__day--selected":J.isSelected,"v-date-picker-month__day--week-end":J.isWeekEnd,"v-date-picker-month__day--week-start":J.isWeekStart}]),"data-v-date":J.isDisabled?void 0:J.isoDate},[(e.showAdjacentMonths||!J.isAdjacent)&&(i.day?.(re)??ce(mi,re.props,null))])})])]})]))}}),Zj=st({color:String,height:[String,Number],min:null,max:null,modelValue:Number,year:Number,allowedMonths:[Array,Function]},"VDatePickerMonths"),tI=It()({name:"VDatePickerMonths",props:Zj(),emits:{"update:modelValue":e=>!0},setup(e,t){let{emit:n,slots:i}=t;const r=l0(),a=In(e,"modelValue"),l=fe(()=>{let s=r.startOfYear(r.date());return e.year&&(s=r.setYear(s,e.year)),Ql(12).map(p=>{const v=r.format(s,"monthShort"),x=r.format(s,"month"),T=!!(!h(p)||e.min&&r.isAfter(r.startOfMonth(r.date(e.min)),s)||e.max&&r.isAfter(s,r.startOfMonth(r.date(e.max))));return s=r.getNextMonth(s),{isDisabled:T,text:v,label:x,value:p}})});zr(()=>{a.value=a.value??r.getMonth(r.date())});function h(s){return Array.isArray(e.allowedMonths)&&e.allowedMonths.length?e.allowedMonths.includes(s):typeof e.allowedMonths=="function"?e.allowedMonths(s):!0}return Vt(()=>N("div",{class:"v-date-picker-months",style:{height:dn(e.height)}},[N("div",{class:"v-date-picker-months__content"},[l.value.map((s,p)=>{const v={active:a.value===p,ariaLabel:s.label,color:a.value===p?e.color:void 0,disabled:s.isDisabled,rounded:!0,text:s.text,variant:a.value===s.value?"flat":"text",onClick:()=>x(p)};function x(T){if(a.value===T){n("update:modelValue",a.value);return}a.value=T}return i.month?.({month:s,i:p,props:v})??ce(mi,kt({key:"month"},v),null)})])])),{}}}),Yj=st({color:String,height:[String,Number],min:null,max:null,modelValue:Number,allowedYears:[Array,Function]},"VDatePickerYears"),nI=It()({name:"VDatePickerYears",props:Yj(),directives:{vIntersect:cu},emits:{"update:modelValue":e=>!0},setup(e,t){let{emit:n,slots:i}=t;const r=l0(),a=In(e,"modelValue"),l=fe(()=>{const v=r.getYear(r.date());let x=v-100,T=v+52;e.min&&(x=r.getYear(r.date(e.min))),e.max&&(T=r.getYear(r.date(e.max)));let k=r.startOfYear(r.date());return k=r.setYear(k,x),Ql(T-x+1,x).map(P=>{const M=r.format(k,"year");return k=r.setYear(k,r.getYear(k)+1),{text:M,value:P,isDisabled:!p(P)}})});zr(()=>{a.value=a.value??r.getYear(r.date())});const h=Gw();function s(){h.el?.focus(),h.el?.scrollIntoView({block:"center"})}function p(v){return Array.isArray(e.allowedYears)&&e.allowedYears.length?e.allowedYears.includes(v):typeof e.allowedYears=="function"?e.allowedYears(v):!0}return Vt(()=>vi(N("div",{class:"v-date-picker-years",style:{height:dn(e.height)}},[N("div",{class:"v-date-picker-years__content"},[l.value.map((v,x)=>{const T={ref:a.value===v.value?h:void 0,active:a.value===v.value,color:a.value===v.value?e.color:void 0,rounded:!0,text:v.text,disabled:v.isDisabled,variant:a.value===v.value?"flat":"text",onClick:()=>{if(a.value===v.value){n("update:modelValue",a.value);return}a.value=v.value}};return i.year?.({year:v,i:x,props:T})??ce(mi,kt({key:"month"},T),null)})])]),[[cu,{handler:s},null,{once:!0}]])),{}}}),Wge=st({header:{type:String,default:"$vuetify.datePicker.header"},headerColor:String,...Kj(),...Xj({weeksInMonth:"static"}),...ur(Zj(),["modelValue"]),...ur(Yj(),["modelValue"]),...zT({title:"$vuetify.datePicker.title"}),modelValue:null},"VDatePicker"),Hge=It()({name:"VDatePicker",props:Wge(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0,"update:viewMode":e=>!0},setup(e,t){let{emit:n,slots:i}=t;const r=l0(),{t:a}=dr(),{rtlClasses:l}=Ws(),h=In(e,"modelValue",void 0,je=>Gr(je).map(Ae=>r.date(Ae)),je=>e.multiple?je:je[0]),s=In(e,"viewMode"),p=fe(()=>{const je=r.date(e.min);return e.min&&r.isValid(je)?je:null}),v=fe(()=>{const je=r.date(e.max);return e.max&&r.isValid(je)?je:null}),x=fe(()=>{const je=r.date();let Ae=je;return h.value?.[0]?Ae=r.date(h.value[0]):p.value&&r.isBefore(je,p.value)?Ae=p.value:v.value&&r.isAfter(je,v.value)&&(Ae=v.value),Ae&&r.isValid(Ae)?Ae:je}),T=Ue(()=>e.headerColor??e.color),k=In(e,"month"),P=fe({get:()=>Number(k.value??r.getMonth(r.startOfMonth(x.value))),set:je=>k.value=je}),M=In(e,"year"),L=fe({get:()=>Number(M.value??r.getYear(r.startOfYear(r.setMonth(x.value,P.value)))),set:je=>M.value=je}),B=Xt(!1),F=fe(()=>e.multiple&&h.value.length>1?a("$vuetify.datePicker.itemsSelected",h.value.length):h.value[0]&&r.isValid(h.value[0])?r.format(r.date(h.value[0]),"normalDateWithWeekday"):a(e.header)),X=fe(()=>{let je=r.date();return je=r.setDate(je,1),je=r.setMonth(je,P.value),je=r.setYear(je,L.value),r.format(je,"monthAndYear")}),J=Ue(()=>`date-picker-header${B.value?"-reverse":""}-transition`),Q=fe(()=>{if(e.disabled)return!0;const je=[];if(s.value!=="month")je.push("prev","next");else{let Ae=r.date();if(Ae=r.startOfMonth(Ae),Ae=r.setMonth(Ae,P.value),Ae=r.setYear(Ae,L.value),p.value){const Ke=r.addDays(r.startOfMonth(Ae),-1);r.isAfter(p.value,Ke)&&je.push("prev")}if(v.value){const Ke=r.addDays(r.endOfMonth(Ae),1);r.isAfter(Ke,v.value)&&je.push("next")}}return je}),re=fe(()=>e.allowedYears||H),Z=fe(()=>e.allowedMonths||W);function $(je,Ae){const Ke=e.allowedDates;if(typeof Ke!="function")return!0;const ve=1+i5(r,je,Ae);for(let Le=0;Le<ve;Le++)if(Ke(r.addDays(je,Le)))return!0;return!1}function H(je){if(typeof e.allowedDates=="function"){const Ae=r.parseISO(`${je}-01-01`);return $(Ae,r.endOfYear(Ae))}if(Array.isArray(e.allowedDates)&&e.allowedDates.length){for(const Ae of e.allowedDates)if(r.getYear(r.date(Ae))===je)return!0;return!1}return!0}function W(je){if(typeof e.allowedDates=="function"){const Ae=String(je+1).padStart(2,"0"),Ke=r.parseISO(`${L.value}-${Ae}-01`);return $(Ke,r.endOfMonth(Ke))}if(Array.isArray(e.allowedDates)&&e.allowedDates.length){for(const Ae of e.allowedDates)if(r.getYear(r.date(Ae))===L.value&&r.getMonth(r.date(Ae))===je)return!0;return!1}return!0}function te(){P.value<11?P.value++:(L.value++,P.value=0,Ge()),Ve()}function Y(){P.value>0?P.value--:(L.value--,P.value=11,Ge()),Ve()}function ne(){s.value="month"}function Se(){s.value=s.value==="months"?"month":"months"}function Fe(){s.value=s.value==="year"?"month":"year"}function Ve(){s.value==="months"&&Se()}function Ge(){s.value==="year"&&Fe()}return Ht(h,(je,Ae)=>{const Ke=Gr(Ae),ve=Gr(je);if(!ve.length)return;const Le=r.date(Ke[Ke.length-1]),We=r.date(ve[ve.length-1]),ct=r.getMonth(We),ut=r.getYear(We);ct!==P.value&&(P.value=ct,Ve()),ut!==L.value&&(L.value=ut,Ge()),B.value=r.isBefore(Le,We)}),Vt(()=>{const je=nv.filterProps(e),Ae=Jk.filterProps(e),Ke=Qk.filterProps(e),ve=eI.filterProps(e),Le=ur(tI.filterProps(e),["modelValue"]),We=ur(nI.filterProps(e),["modelValue"]),ct={color:T.value,header:F.value,transition:J.value};return ce(nv,kt(je,{color:T.value,class:["v-date-picker",`v-date-picker--${s.value}`,{"v-date-picker--show-week":e.showWeek},l.value,e.class],style:e.style}),{title:()=>i.title?.()??N("div",{class:"v-date-picker__title"},[a(e.title)]),header:()=>i.header?ce(ci,{defaults:{VDatePickerHeader:{...ct}}},{default:()=>[i.header?.(ct)]}):ce(Qk,kt({key:"header"},Ke,ct,{onClick:s.value!=="month"?ne:void 0}),{prepend:i.prepend,append:i.append}),default:()=>N(sn,null,[ce(Jk,kt(Ae,{disabled:Q.value,text:X.value,"onClick:next":te,"onClick:prev":Y,"onClick:month":Se,"onClick:year":Fe}),null),ce(Ib,{hideOnLeave:!0},{default:()=>[s.value==="months"?ce(tI,kt({key:"date-picker-months"},Le,{modelValue:P.value,"onUpdate:modelValue":[ut=>P.value=ut,Ve],min:p.value,max:v.value,year:L.value,allowedMonths:Z.value}),{month:i.month}):s.value==="year"?ce(nI,kt({key:"date-picker-years"},We,{modelValue:L.value,"onUpdate:modelValue":[ut=>L.value=ut,Ge],min:p.value,max:v.value,allowedYears:re.value}),{year:i.year}):ce(eI,kt({key:"date-picker-month"},ve,{modelValue:h.value,"onUpdate:modelValue":ut=>h.value=ut,month:P.value,"onUpdate:month":[ut=>P.value=ut,Ve],year:L.value,"onUpdate:year":[ut=>L.value=ut,Ge],min:p.value,max:v.value}),{day:i.day})]})]),actions:i.actions})}),{}}}),Gge=st({actionText:String,bgColor:String,color:String,icon:Cn,image:String,justify:{type:String,default:"center"},headline:String,title:String,text:String,textWidth:{type:[Number,String],default:500},href:String,to:String,...vn(),...Ls(),...ud({size:void 0}),...Ii()},"VEmptyState"),qge=It()({name:"VEmptyState",props:Gge(),emits:{"click:action":e=>!0},setup(e,t){let{emit:n,slots:i}=t;const{themeClasses:r}=Zi(e),{backgroundColorClasses:a,backgroundColorStyles:l}=tr(()=>e.bgColor),{dimensionStyles:h}=Os(e),{displayClasses:s}=Dl();function p(v){n("click:action",v)}return Vt(()=>{const v=!!(i.actions||e.actionText),x=!!(i.headline||e.headline),T=!!(i.title||e.title),k=!!(i.text||e.text),P=!!(i.media||e.image||e.icon),M=e.size||(e.image?200:96);return N("div",{class:Tt(["v-empty-state",{[`v-empty-state--${e.justify}`]:!0},r.value,a.value,s.value,e.class]),style:Qt([l.value,h.value,e.style])},[P&&N("div",{key:"media",class:"v-empty-state__media"},[i.media?ce(ci,{key:"media-defaults",defaults:{VImg:{src:e.image,height:M},VIcon:{size:M,icon:e.icon}}},{default:()=>[i.media()]}):N(sn,null,[e.image?ce(gh,{key:"image",src:e.image,height:M},null):e.icon?ce(Hi,{key:"icon",color:e.color,size:M,icon:e.icon},null):void 0])]),x&&N("div",{key:"headline",class:"v-empty-state__headline"},[i.headline?.()??e.headline]),T&&N("div",{key:"title",class:"v-empty-state__title"},[i.title?.()??e.title]),k&&N("div",{key:"text",class:"v-empty-state__text",style:{maxWidth:dn(e.textWidth)}},[i.text?.()??e.text]),i.default&&N("div",{key:"content",class:"v-empty-state__content"},[i.default()]),v&&N("div",{key:"actions",class:"v-empty-state__actions"},[ce(ci,{defaults:{VBtn:{class:"v-empty-state__action-btn",color:e.color??"surface-variant",href:e.href,text:e.actionText,to:e.to}}},{default:()=>[i.actions?.({props:{onClick:p}})??ce(mi,{onClick:p},null)]})])])}),{}}}),Jb=Symbol.for("vuetify:v-expansion-panel"),Jj=st({...vn(),...kA()},"VExpansionPanelText"),iI=It()({name:"VExpansionPanelText",props:Jj(),setup(e,t){let{slots:n}=t;const i=xi(Jb);if(!i)throw new Error("[Vuetify] v-expansion-panel-text needs to be placed inside v-expansion-panel");const{hasContent:r,onAfterLeave:a}=IA(e,i.isSelected);return Vt(()=>ce(rT,{onAfterLeave:a},{default:()=>[vi(N("div",{class:Tt(["v-expansion-panel-text",e.class]),style:Qt(e.style)},[n.default&&r.value&&N("div",{class:"v-expansion-panel-text__wrapper"},[n.default?.()])]),[[hu,i.isSelected.value]])]})),{}}}),Qj=st({color:String,expandIcon:{type:Cn,default:"$expand"},collapseIcon:{type:Cn,default:"$collapse"},hideActions:Boolean,focusable:Boolean,static:Boolean,ripple:{type:[Boolean,Object],default:!1},readonly:Boolean,...vn(),...Ls()},"VExpansionPanelTitle"),rI=It()({name:"VExpansionPanelTitle",directives:{vRipple:za},props:Qj(),setup(e,t){let{slots:n}=t;const i=xi(Jb);if(!i)throw new Error("[Vuetify] v-expansion-panel-title needs to be placed inside v-expansion-panel");const{backgroundColorClasses:r,backgroundColorStyles:a}=tr(()=>e.color),{dimensionStyles:l}=Os(e),h=fe(()=>({collapseIcon:e.collapseIcon,disabled:i.disabled.value,expanded:i.isSelected.value,expandIcon:e.expandIcon,readonly:e.readonly})),s=Ue(()=>i.isSelected.value?e.collapseIcon:e.expandIcon);return Vt(()=>vi(N("button",{class:Tt(["v-expansion-panel-title",{"v-expansion-panel-title--active":i.isSelected.value,"v-expansion-panel-title--focusable":e.focusable,"v-expansion-panel-title--static":e.static},r.value,e.class]),style:Qt([a.value,l.value,e.style]),type:"button",tabindex:i.disabled.value?-1:void 0,disabled:i.disabled.value,"aria-expanded":i.isSelected.value,onClick:e.readonly?void 0:i.toggle},[N("span",{class:"v-expansion-panel-title__overlay"},null),n.default?.(h.value),!e.hideActions&&ce(ci,{defaults:{VIcon:{icon:s.value}}},{default:()=>[N("span",{class:"v-expansion-panel-title__icon"},[n.actions?.(h.value)??ce(Hi,null,null)])]})]),[[za,e.ripple]])),{}}}),e8=st({title:String,text:String,bgColor:String,...Hs(),...ng(),...Nr(),...ti(),...Qj(),...Jj()},"VExpansionPanel"),Kge=It()({name:"VExpansionPanel",props:e8(),emits:{"group:selected":e=>!0},setup(e,t){let{slots:n}=t;const i=Wf(e,Jb),{backgroundColorClasses:r,backgroundColorStyles:a}=tr(()=>e.bgColor),{elevationClasses:l}=vo(e),{roundedClasses:h}=Qr(e),s=Ue(()=>i?.disabled.value||e.disabled),p=fe(()=>i.group.items.value.reduce((T,k,P)=>(i.group.selected.value.includes(k.id)&&T.push(P),T),[])),v=fe(()=>{const T=i.group.items.value.findIndex(k=>k.id===i.id);return!i.isSelected.value&&p.value.some(k=>k-T===1)}),x=fe(()=>{const T=i.group.items.value.findIndex(k=>k.id===i.id);return!i.isSelected.value&&p.value.some(k=>k-T===-1)});return Mr(Jb,i),Vt(()=>{const T=!!(n.text||e.text),k=!!(n.title||e.title),P=rI.filterProps(e),M=iI.filterProps(e);return ce(e.tag,{class:Tt(["v-expansion-panel",{"v-expansion-panel--active":i.isSelected.value,"v-expansion-panel--before-active":v.value,"v-expansion-panel--after-active":x.value,"v-expansion-panel--disabled":s.value},h.value,r.value,e.class]),style:Qt([a.value,e.style])},{default:()=>[N("div",{class:Tt(["v-expansion-panel__shadow",...l.value])},null),ce(ci,{defaults:{VExpansionPanelTitle:{...P},VExpansionPanelText:{...M}}},{default:()=>[k&&ce(rI,{key:"title"},{default:()=>[n.title?n.title():e.title]}),T&&ce(iI,{key:"text"},{default:()=>[n.text?n.text():e.text]}),n.default?.()]})]})}),{groupItem:i}}}),Xge=["default","accordion","inset","popout"],Zge=st({flat:Boolean,...tg(),...Ml(e8(),["bgColor","collapseIcon","color","eager","elevation","expandIcon","focusable","hideActions","readonly","ripple","rounded","tile","static"]),...Ii(),...vn(),...ti(),variant:{type:String,default:"default",validator:e=>Xge.includes(e)}},"VExpansionPanels"),Yge=It()({name:"VExpansionPanels",props:Zge(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{next:i,prev:r}=om(e,Jb),{themeClasses:a}=Zi(e),l=Ue(()=>e.variant&&`v-expansion-panels--variant-${e.variant}`);return Jr({VExpansionPanel:{bgColor:Ue(()=>e.bgColor),collapseIcon:Ue(()=>e.collapseIcon),color:Ue(()=>e.color),eager:Ue(()=>e.eager),elevation:Ue(()=>e.elevation),expandIcon:Ue(()=>e.expandIcon),focusable:Ue(()=>e.focusable),hideActions:Ue(()=>e.hideActions),readonly:Ue(()=>e.readonly),ripple:Ue(()=>e.ripple),rounded:Ue(()=>e.rounded),static:Ue(()=>e.static)}}),Vt(()=>ce(e.tag,{class:Tt(["v-expansion-panels",{"v-expansion-panels--flat":e.flat,"v-expansion-panels--tile":e.tile},a.value,l.value,e.class]),style:Qt(e.style)},{default:()=>[n.default?.({prev:r,next:i})]})),{next:i,prev:r}}}),Jge=st({app:Boolean,appear:Boolean,extended:Boolean,layout:Boolean,offset:Boolean,modelValue:{type:Boolean,default:!0},...ur(nT({active:!0}),["location","spaced"]),...Jp(),...Eh(),...Ch({transition:"fab-transition"})},"VFab"),Qge=It()({name:"VFab",props:Jge(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const i=In(e,"modelValue"),r=Xt(56),a=at(),{resizeRef:l}=Lc(x=>{x.length&&(r.value=x[0].target.clientHeight)}),h=Ue(()=>e.app||e.absolute),s=fe(()=>h.value?e.location?.split(" ").shift()??"bottom":!1),p=fe(()=>h.value?e.location?.split(" ")[1]??"end":!1);ra(()=>e.app,()=>{const x=Qp({id:e.name,order:fe(()=>parseInt(e.order,10)),position:s,layoutSize:fe(()=>e.layout?r.value+24:0),elementSize:fe(()=>r.value+24),active:fe(()=>e.app&&i.value),absolute:Ue(()=>e.absolute)});zr(()=>{a.value=x.layoutItemStyles.value})});const v=at();return Vt(()=>{const x=mi.filterProps(e);return N("div",{ref:v,class:Tt(["v-fab",{"v-fab--absolute":e.absolute,"v-fab--app":!!e.app,"v-fab--extended":e.extended,"v-fab--offset":e.offset,[`v-fab--${s.value}`]:h.value,[`v-fab--${p.value}`]:h.value},e.class]),style:Qt([e.app?{...a.value}:{height:e.absolute?"100%":"inherit"},e.style])},[N("div",{class:"v-fab__container"},[ce(Oa,{appear:e.appear,transition:e.transition},{default:()=>[vi(ce(mi,kt({ref:l},x,{active:void 0,location:void 0}),n),[[hu,e.active]])]})])])}),{}}});function e_e(){function e(n){return[...n.dataTransfer?.items??[]].filter(r=>r.kind==="file").map(r=>r.webkitGetAsEntry()).filter(Boolean).length>0||[...n.dataTransfer?.files??[]].length>0}async function t(n){const i=[],r=[...n.dataTransfer?.items??[]].filter(a=>a.kind==="file").map(a=>a.webkitGetAsEntry()).filter(Boolean);if(r.length)for(const a of r){const l=await t8(a,n8(".",a));i.push(...l.map(h=>h.file))}else i.push(...n.dataTransfer?.files??[]);return i}return{handleDrop:t,hasFilesOrFolders:e}}function t8(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return new Promise((n,i)=>{e.isFile?e.file(a=>n([{file:a,path:t}]),i):e.isDirectory&&e.createReader().readEntries(async a=>{const l=[];for(const h of a)l.push(...await t8(h,n8(t,h)));n(l)})})}function n8(e,t){return t.isDirectory?`${e}/${t.name}`:e}const t_e=st({filterByType:String},"file-accept");function n_e(e){const t=fe(()=>e.filterByType?i_e(e.filterByType):null);function n(i){if(t.value){const r=i.filter(t.value);return{accepted:r,rejected:i.filter(a=>!r.includes(a))}}return{accepted:i,rejected:[]}}return{filterAccepted:n}}function i_e(e){const t=e.split(",").map(a=>a.trim().toLowerCase()),n=t.filter(a=>a.startsWith(".")),i=t.filter(a=>a.endsWith("/*")),r=t.filter(a=>!n.includes(a)&&!i.includes(a));return a=>{const l=a.name.split(".").at(-1)?.toLowerCase()??"",h=a.type.split("/").at(0)?.toLowerCase()??"";return r.includes(a.type)||n.includes(`.${l}`)||i.includes(`${h}/*`)}}const r_e=st({chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},hideInput:Boolean,multiple:Boolean,showSize:{type:[Boolean,Number,String],default:!1,validator:e=>typeof e=="boolean"||[1e3,1024].includes(Number(e))},truncateLength:{type:[Number,String],default:22},...Ih({prependIcon:"$file"}),modelValue:{type:[Array,Object],default:e=>e.multiple?[]:null,validator:e=>Gr(e).every(t=>t!=null&&typeof t=="object")},...t_e(),...g0({clearable:!0})},"VFileInput"),s_e=It()({name:"VFileInput",inheritAttrs:!1,props:r_e(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0,rejected:e=>!0},setup(e,t){let{attrs:n,emit:i,slots:r}=t;const{t:a}=dr(),{filterAccepted:l}=n_e(e),h=In(e,"modelValue",e.modelValue,Ae=>Gr(Ae),Ae=>!e.multiple&&Array.isArray(Ae)?Ae[0]:Ae),{isFocused:s,focus:p,blur:v}=kh(e),x=fe(()=>typeof e.showSize!="boolean"?e.showSize:void 0),T=fe(()=>(h.value??[]).reduce((Ae,Ke)=>{let{size:ve=0}=Ke;return Ae+ve},0)),k=fe(()=>GL(T.value,x.value)),P=fe(()=>(h.value??[]).map(Ae=>{const{name:Ke="",size:ve=0}=Ae,Le=ne(Ke);return e.showSize?`${Le} (${GL(ve,x.value)})`:Le})),M=fe(()=>{const Ae=h.value?.length??0;return e.showSize?a(e.counterSizeString,Ae,k.value):a(e.counterString,Ae)}),L=at(),B=at(),F=at(),X=Ue(()=>s.value||e.active),J=fe(()=>["plain","underlined"].includes(e.variant)),Q=Xt(!1),{handleDrop:re,hasFilesOrFolders:Z}=e_e();function $(){F.value!==document.activeElement&&F.value?.focus(),s.value||p()}function H(Ae){F.value?.click()}function W(Ae){i("mousedown:control",Ae)}function te(Ae){F.value?.click(),i("click:control",Ae)}function Y(Ae){Ae.stopPropagation(),$(),Gn(()=>{h.value=[],s0(e["onClick:clear"],Ae)})}function ne(Ae){if(Ae.length<Number(e.truncateLength))return Ae;const Ke=Math.floor((Number(e.truncateLength)-1)/2);return`${Ae.slice(0,Ke)}${Ae.slice(Ae.length-Ke)}`}function Se(Ae){Ae.preventDefault(),Ae.stopImmediatePropagation(),Q.value=!0}function Fe(Ae){Ae.preventDefault(),Q.value=!1}async function Ve(Ae){if(Ae.preventDefault(),Ae.stopImmediatePropagation(),Q.value=!1,!F.value||!Z(Ae))return;const Ke=await re(Ae);je(Ke)}function Ge(Ae){if(!(!Ae.target||Ae.repack))if(e.filterByType)je([...Ae.target.files]);else{const Ke=Ae.target;h.value=[...Ke.files??[]]}}function je(Ae){const Ke=new DataTransfer,{accepted:ve,rejected:Le}=l(Ae);Le.length&&i("rejected",Le);for(const ct of ve)Ke.items.add(ct);F.value.files=Ke.files,h.value=[...Ke.files];const We=new Event("change",{bubbles:!0});We.repack=!0,F.value.dispatchEvent(We)}return Ht(h,Ae=>{(!Array.isArray(Ae)||!Ae.length)&&F.value&&(F.value.value="")}),Vt(()=>{const Ae=!!(r.counter||e.counter),Ke=!!(Ae||r.details),[ve,Le]=rm(n),{modelValue:We,...ct}=sa.filterProps(e),ut={...Gf.filterProps(e),"onClick:clear":Y},rt=n.webkitdirectory!==void 0&&n.webkitdirectory!==!1,Qe=n.accept?String(n.accept):void 0,Ct=rt?void 0:e.filterByType??Qe;return ce(sa,kt({ref:L,modelValue:e.multiple?h.value:h.value[0],class:["v-file-input",{"v-file-input--chips":!!e.chips,"v-file-input--dragging":Q.value,"v-file-input--hide":e.hideInput,"v-input--plain-underlined":J.value},e.class],style:e.style,"onClick:prepend":H},ve,ct,{centerAffix:!J.value,focused:s.value}),{...r,default:At=>{let{id:yn,isDisabled:Mn,isDirty:Ce,isReadonly:ze,isValid:Ee,hasDetails:pt}=At;return ce(Gf,kt({ref:B,prependIcon:e.prependIcon,onMousedown:W,onClick:te,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},ut,{id:yn.value,active:X.value||Ce.value,dirty:Ce.value||e.dirty,disabled:Mn.value,focused:s.value,details:pt.value,error:Ee.value===!1,onDragover:Se,onDrop:Ve}),{...r,default:dt=>{let{props:{class:nt,...Et},controlRef:Dt}=dt;return N(sn,null,[N("input",kt({ref:Ft=>F.value=Dt.value=Ft,type:"file",accept:Ct,readonly:ze.value,disabled:Mn.value,multiple:e.multiple,name:e.name,onClick:Ft=>{Ft.stopPropagation(),ze.value&&Ft.preventDefault(),$()},onChange:Ge,onDragleave:Fe,onFocus:$,onBlur:v},Et,Le),null),N("div",{class:Tt(nt)},[!!h.value?.length&&!e.hideInput&&(r.selection?r.selection({fileNames:P.value,totalBytes:T.value,totalBytesReadable:k.value}):e.chips?P.value.map(Ft=>ce(Hu,{key:Ft,size:"small",text:Ft},null)):P.value.join(", "))])])}})},details:Ke?At=>N(sn,null,[r.details?.(At),Ae&&N(sn,null,[N("span",null,null),ce(oT,{active:!!h.value?.length,value:M.value,disabled:e.disabled},r.counter)])]):void 0})}),yo({},L,B,F)}}),o_e=st({app:Boolean,color:String,height:{type:[Number,String],default:"auto"},...sl(),...vn(),...Hs(),...Jp(),...Nr(),...ti({tag:"footer"}),...Ii()},"VFooter"),a_e=It()({name:"VFooter",props:o_e(),setup(e,t){let{slots:n}=t;const i=at(),{themeClasses:r}=Zi(e),{backgroundColorClasses:a,backgroundColorStyles:l}=tr(()=>e.color),{borderClasses:h}=Rl(e),{elevationClasses:s}=vo(e),{roundedClasses:p}=Qr(e),v=Xt(32),{resizeRef:x}=Lc(k=>{k.length&&(v.value=k[0].target.clientHeight)}),T=fe(()=>e.height==="auto"?v.value:parseInt(e.height,10));return ra(()=>e.app,()=>{const k=Qp({id:e.name,order:fe(()=>parseInt(e.order,10)),position:Ue(()=>"bottom"),layoutSize:T,elementSize:fe(()=>e.height==="auto"?void 0:T.value),active:Ue(()=>e.app),absolute:Ue(()=>e.absolute)});zr(()=>{i.value=k.layoutItemStyles.value})}),Vt(()=>ce(e.tag,{ref:x,class:Tt(["v-footer",r.value,a.value,h.value,s.value,p.value,e.class]),style:Qt([l.value,e.app?i.value:{height:dn(e.height)},e.style])},n)),{}}}),l_e=st({...vn(),...PY()},"VForm"),c_e=It()({name:"VForm",props:l_e(),emits:{"update:modelValue":e=>!0,submit:e=>!0},setup(e,t){let{slots:n,emit:i}=t;const r=MY(e),a=at();function l(s){s.preventDefault(),r.reset()}function h(s){const p=s,v=r.validate();p.then=v.then.bind(v),p.catch=v.catch.bind(v),p.finally=v.finally.bind(v),i("submit",p),p.defaultPrevented||v.then(x=>{let{valid:T}=x;T&&a.value?.submit()}),p.preventDefault()}return Vt(()=>N("form",{ref:a,class:Tt(["v-form",e.class]),style:Qt(e.style),novalidate:!0,onReset:l,onSubmit:h},[n.default?.(r)])),yo(r,a)}}),u_e=st({disabled:Boolean,modelValue:{type:Boolean,default:null},...EA()},"VHover"),d_e=It()({name:"VHover",props:u_e(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const i=In(e,"modelValue"),{runOpenDelay:r,runCloseDelay:a}=CA(e,l=>!e.disabled&&(i.value=l));return()=>n.default?.({isHovering:i.value,props:{onMouseenter:r,onMouseleave:a}})}}),h_e=st({color:String,direction:{type:String,default:"vertical",validator:e=>["vertical","horizontal"].includes(e)},side:{type:String,default:"end",validator:e=>["start","end","both"].includes(e)},mode:{type:String,default:"intersect",validator:e=>["intersect","manual"].includes(e)},margin:[Number,String],loadMoreText:{type:String,default:"$vuetify.infiniteScroll.loadMore"},emptyText:{type:String,default:"$vuetify.infiniteScroll.empty"},...Ls(),...ti()},"VInfiniteScroll"),NF=ac({name:"VInfiniteScrollIntersect",props:{side:{type:String,required:!0},rootMargin:String},emits:{intersect:(e,t)=>!0},setup(e,t){let{emit:n}=t;const{intersectionRef:i,isIntersecting:r}=c0();return Ht(r,async a=>{n("intersect",e.side,a)}),Vt(()=>N("div",{class:"v-infinite-scroll-intersect",style:{"--v-infinite-margin-size":e.rootMargin},ref:i},[Jn("")])),{}}}),f_e=It()({name:"VInfiniteScroll",props:h_e(),emits:{load:e=>!0},setup(e,t){let{slots:n,emit:i}=t;const r=at(),a=Xt("ok"),l=Xt("ok"),h=fe(()=>dn(e.margin)),s=Xt(!1);function p(re){if(!r.value)return;const Z=e.direction==="vertical"?"scrollTop":"scrollLeft";r.value[Z]=re}function v(){if(!r.value)return 0;const re=e.direction==="vertical"?"scrollTop":"scrollLeft";return r.value[re]}function x(){if(!r.value)return 0;const re=e.direction==="vertical"?"scrollHeight":"scrollWidth";return r.value[re]}function T(){if(!r.value)return 0;const re=e.direction==="vertical"?"clientHeight":"clientWidth";return r.value[re]}cs(()=>{r.value&&(e.side==="start"?p(x()):e.side==="both"&&p(x()/2-T()/2))});function k(re,Z){re==="start"?a.value=Z:re==="end"?l.value=Z:re==="both"&&(a.value=Z,l.value=Z)}function P(re){return re==="start"?a.value:l.value}let M=0;function L(re,Z){s.value=Z,s.value&&B(re)}function B(re){if(e.mode!=="manual"&&!s.value)return;const Z=P(re);if(!r.value||["empty","loading"].includes(Z))return;M=x(),k(re,"loading");function $(H){k(re,H),Gn(()=>{H==="empty"||H==="error"||(H==="ok"&&re==="start"&&p(x()-M+v()),e.mode!=="manual"&&Gn(()=>{window.requestAnimationFrame(()=>{window.requestAnimationFrame(()=>{window.requestAnimationFrame(()=>{B(re)})})})}))})}i("load",{side:re,done:$})}const{t:F}=dr();function X(re,Z){if(e.side!==re&&e.side!=="both")return;const $=()=>B(re),H={side:re,props:{onClick:$,color:e.color}};return Z==="error"?n.error?.(H):Z==="empty"?n.empty?.(H)??N("div",null,[F(e.emptyText)]):e.mode==="manual"?Z==="loading"?n.loading?.(H)??ce(Op,{indeterminate:!0,color:e.color},null):n["load-more"]?.(H)??ce(mi,{variant:"outlined",color:e.color,onClick:$},{default:()=>[F(e.loadMoreText)]}):n.loading?.(H)??ce(Op,{indeterminate:!0,color:e.color},null)}const{dimensionStyles:J}=Os(e);Vt(()=>{const re=e.tag,Z=e.side==="start"||e.side==="both",$=e.side==="end"||e.side==="both",H=e.mode==="intersect";return ce(re,{ref:r,class:Tt(["v-infinite-scroll",`v-infinite-scroll--${e.direction}`,{"v-infinite-scroll--start":Z,"v-infinite-scroll--end":$}]),style:Qt(J.value)},{default:()=>[N("div",{class:"v-infinite-scroll__side"},[X("start",a.value)]),Z&&H&&ce(NF,{key:"start",side:"start",onIntersect:L,rootMargin:h.value},null),n.default?.(),$&&H&&ce(NF,{key:"end",side:"end",onIntersect:L,rootMargin:h.value},null),N("div",{class:"v-infinite-scroll__side"},[X("end",l.value)])]})});function Q(re){const Z=re??e.side;k(Z,"ok"),Gn(()=>{p(x()-M+v()),e.mode!=="manual"&&Gn(()=>{window.requestAnimationFrame(()=>{window.requestAnimationFrame(()=>{window.requestAnimationFrame(()=>{Z==="both"?(B("start"),B("end")):B(Z)})})})})})}return{reset:Q}}}),i8=Symbol.for("vuetify:v-item-group"),m_e=st({...vn(),...tg({selectedClass:"v-item--selected"}),...ti(),...Ii()},"VItemGroup"),p_e=It()({name:"VItemGroup",props:m_e(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{themeClasses:i}=Zi(e),{isSelected:r,select:a,next:l,prev:h,selected:s}=om(e,i8);return()=>ce(e.tag,{class:Tt(["v-item-group",i.value,e.class]),style:Qt(e.style)},{default:()=>[n.default?.({isSelected:r,select:a,next:l,prev:h,selected:s.value})]})}}),g_e=It()({name:"VItem",props:ng(),emits:{"group:selected":e=>!0},setup(e,t){let{slots:n}=t;const{isSelected:i,select:r,toggle:a,selectedClass:l,value:h,disabled:s}=Wf(e,i8);return()=>n.default?.({isSelected:i.value,selectedClass:l.value,select:r,toggle:a,value:h.value,disabled:s.value})}}),__e=st({color:String,...sl(),...vn(),...Nr(),...ti({tag:"kbd"}),...Ii(),...Hs()},"VKbd"),v_e=It()({name:"VKbd",props:__e(),setup(e,t){let{slots:n}=t;const{themeClasses:i}=Zi(e),{borderClasses:r}=Rl(e),{roundedClasses:a}=Qr(e),{backgroundColorClasses:l,backgroundColorStyles:h}=tr(()=>e.color),{elevationClasses:s}=vo(e);return Vt(()=>ce(e.tag,{class:Tt(["v-kbd",i.value,l.value,r.value,s.value,a.value,e.class]),style:Qt([h.value,e.style])},n)),{}}}),y_e=st({...vn(),...Ls(),...l5()},"VLayout"),b_e=It()({name:"VLayout",props:y_e(),setup(e,t){let{slots:n}=t;const{layoutClasses:i,layoutStyles:r,getLayoutItem:a,items:l,layoutRef:h}=u5(e),{dimensionStyles:s}=Os(e);return Vt(()=>N("div",{ref:h,class:Tt([i.value,e.class]),style:Qt([s.value,r.value,e.style])},[n.default?.()])),{getLayoutItem:a,items:l}}}),x_e=st({position:{type:String,required:!0},size:{type:[Number,String],default:300},modelValue:Boolean,...vn(),...Jp()},"VLayoutItem"),w_e=It()({name:"VLayoutItem",props:x_e(),setup(e,t){let{slots:n}=t;const{layoutItemStyles:i}=Qp({id:e.name,order:fe(()=>parseInt(e.order,10)),position:Ue(()=>e.position),elementSize:Ue(()=>e.size),layoutSize:Ue(()=>e.size),active:Ue(()=>e.modelValue),absolute:Ue(()=>e.absolute)});return()=>N("div",{class:Tt(["v-layout-item",e.class]),style:Qt([i.value,e.style])},[n.default?.()])}}),T_e=st({modelValue:Boolean,options:{type:Object,default:()=>({root:void 0,rootMargin:void 0,threshold:void 0})},...vn(),...Ls(),...ti(),...Ch({transition:"fade-transition"})},"VLazy"),S_e=It()({name:"VLazy",directives:{vIntersect:cu},props:T_e(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{dimensionStyles:i}=Os(e),r=In(e,"modelValue");function a(l){r.value||(r.value=l)}return Vt(()=>vi(ce(e.tag,{class:Tt(["v-lazy",e.class]),style:Qt([i.value,e.style])},{default:()=>[r.value&&ce(Oa,{transition:e.transition,appear:!0},{default:()=>[n.default?.()]})]}),[[cu,{handler:a,options:e.options},null]])),{}}}),E_e=st({locale:String,fallbackLocale:String,messages:Object,rtl:{type:Boolean,default:void 0},...vn()},"VLocaleProvider"),C_e=It()({name:"VLocaleProvider",props:E_e(),setup(e,t){let{slots:n}=t;const{rtlClasses:i}=HK(e);return Vt(()=>N("div",{class:Tt(["v-locale-provider",i.value,e.class]),style:Qt(e.style)},[n.default?.()])),{}}}),k_e=st({scrollable:Boolean,...vn(),...Ls(),...ti({tag:"main"})},"VMain"),I_e=It()({name:"VMain",props:k_e(),setup(e,t){let{slots:n}=t;const{dimensionStyles:i}=Os(e),{mainStyles:r}=c5(),{ssrBootStyles:a}=rg();return Vt(()=>ce(e.tag,{class:Tt(["v-main",{"v-main--scrollable":e.scrollable},e.class]),style:Qt([r.value,a.value,i.value,e.style])},{default:()=>[e.scrollable?N("div",{class:"v-main__scroller"},[n.default?.()]):n.default?.()]})),{}}});function A_e(e){let{rootEl:t,isSticky:n,layoutItemStyles:i}=e;const r=Xt(!1),a=Xt(0),l=fe(()=>{const p=typeof r.value=="boolean"?"top":r.value;return[n.value?{top:"auto",bottom:"auto",height:void 0}:void 0,r.value?{[p]:dn(a.value)}:{top:i.value.top}]});cs(()=>{Ht(n,p=>{p?window.addEventListener("scroll",s,{passive:!0}):window.removeEventListener("scroll",s)},{immediate:!0})}),Yr(()=>{window.removeEventListener("scroll",s)});let h=0;function s(){const p=h>window.scrollY?"up":"down",v=t.value.getBoundingClientRect(),x=parseFloat(i.value.top??0),T=window.scrollY-Math.max(0,a.value-x),k=v.height+Math.max(a.value,x)-window.scrollY-window.innerHeight,P=parseFloat(getComputedStyle(t.value).getPropertyValue("--v-body-scroll-y"))||0;v.height<window.innerHeight-x?(r.value="top",a.value=x):p==="up"&&r.value==="bottom"||p==="down"&&r.value==="top"?(a.value=window.scrollY+v.top-P,r.value=!0):p==="down"&&k<=0?(a.value=0,r.value="bottom"):p==="up"&&T<=0&&(P?r.value!=="top"&&(a.value=-T+P+x,r.value="top"):(a.value=v.top+T,r.value="top")),h=window.scrollY}return{isStuck:r,stickyStyles:l}}const P_e=100,M_e=20;function UF(e){return(e<0?-1:1)*Math.sqrt(Math.abs(e))*1.41421356237}function $F(e){if(e.length<2)return 0;if(e.length===2)return e[1].t===e[0].t?0:(e[1].d-e[0].d)/(e[1].t-e[0].t);let t=0;for(let n=e.length-1;n>0;n--){if(e[n].t===e[n-1].t)continue;const i=UF(t),r=(e[n].d-e[n-1].d)/(e[n].t-e[n-1].t);t+=(r-i)*Math.abs(r),n===e.length-1&&(t*=.5)}return UF(t)*1e3}function D_e(){const e={};function t(r){Array.from(r.changedTouches).forEach(a=>{(e[a.identifier]??(e[a.identifier]=new LN(M_e))).push([r.timeStamp,a])})}function n(r){Array.from(r.changedTouches).forEach(a=>{delete e[a.identifier]})}function i(r){const a=e[r]?.values().reverse();if(!a)throw new Error(`No samples for touch id ${r}`);const l=a[0],h=[],s=[];for(const p of a){if(l[0]-p[0]>P_e)break;h.push({t:p[0],d:p[1].clientX}),s.push({t:p[0],d:p[1].clientY})}return{x:$F(h),y:$F(s),get direction(){const{x:p,y:v}=this,[x,T]=[Math.abs(p),Math.abs(v)];return x>T&&p>=0?"right":x>T&&p<=0?"left":T>x&&v>=0?"down":T>x&&v<=0?"up":R_e()}}}return{addMovement:t,endTouch:n,getVelocity:i}}function R_e(){throw new Error}function L_e(e){let{el:t,isActive:n,isTemporary:i,width:r,touchless:a,position:l}=e;cs(()=>{window.addEventListener("touchstart",F,{passive:!0}),window.addEventListener("touchmove",X,{passive:!1}),window.addEventListener("touchend",J,{passive:!0})}),Yr(()=>{window.removeEventListener("touchstart",F),window.removeEventListener("touchmove",X),window.removeEventListener("touchend",J)});const h=fe(()=>["left","right"].includes(l.value)),{addMovement:s,endTouch:p,getVelocity:v}=D_e();let x=!1;const T=Xt(!1),k=Xt(0),P=Xt(0);let M;function L(re,Z){return(l.value==="left"?re:l.value==="right"?document.documentElement.clientWidth-re:l.value==="top"?re:l.value==="bottom"?document.documentElement.clientHeight-re:s_())-(Z?r.value:0)}function B(re){let Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const $=l.value==="left"?(re-P.value)/r.value:l.value==="right"?(document.documentElement.clientWidth-re-P.value)/r.value:l.value==="top"?(re-P.value)/r.value:l.value==="bottom"?(document.documentElement.clientHeight-re-P.value)/r.value:s_();return Z?Sr($):$}function F(re){if(a.value)return;const Z=re.changedTouches[0].clientX,$=re.changedTouches[0].clientY,H=25,W=l.value==="left"?Z<H:l.value==="right"?Z>document.documentElement.clientWidth-H:l.value==="top"?$<H:l.value==="bottom"?$>document.documentElement.clientHeight-H:s_(),te=n.value&&(l.value==="left"?Z<r.value:l.value==="right"?Z>document.documentElement.clientWidth-r.value:l.value==="top"?$<r.value:l.value==="bottom"?$>document.documentElement.clientHeight-r.value:s_());(W||te||n.value&&i.value)&&(M=[Z,$],P.value=L(h.value?Z:$,n.value),k.value=B(h.value?Z:$),x=P.value>-20&&P.value<80,p(re),s(re))}function X(re){const Z=re.changedTouches[0].clientX,$=re.changedTouches[0].clientY;if(x){if(!re.cancelable){x=!1;return}const W=Math.abs(Z-M[0]),te=Math.abs($-M[1]);(h.value?W>te&&W>3:te>W&&te>3)?(T.value=!0,x=!1):(h.value?te:W)>3&&(x=!1)}if(!T.value)return;re.preventDefault(),s(re);const H=B(h.value?Z:$,!1);k.value=Math.max(0,Math.min(1,H)),H>1?P.value=L(h.value?Z:$,!0):H<0&&(P.value=L(h.value?Z:$,!1))}function J(re){if(x=!1,!T.value)return;s(re),T.value=!1;const Z=v(re.changedTouches[0].identifier),$=Math.abs(Z.x),H=Math.abs(Z.y);(h.value?$>H&&$>400:H>$&&H>3)?n.value=Z.direction===({left:"right",right:"left",top:"down",bottom:"up"}[l.value]||s_()):n.value=k.value>.5}const Q=fe(()=>T.value?{transform:l.value==="left"?`translateX(calc(-100% + ${k.value*r.value}px))`:l.value==="right"?`translateX(calc(100% - ${k.value*r.value}px))`:l.value==="top"?`translateY(calc(-100% + ${k.value*r.value}px))`:l.value==="bottom"?`translateY(calc(100% - ${k.value*r.value}px))`:s_(),transition:"none"}:void 0);return ra(T,()=>{const re=t.value?.style.transform??null,Z=t.value?.style.transition??null;zr(()=>{t.value?.style.setProperty("transform",Q.value?.transform||"none"),t.value?.style.setProperty("transition",Q.value?.transition||null)}),io(()=>{t.value?.style.setProperty("transform",re),t.value?.style.setProperty("transition",Z)})}),{isDragging:T,dragProgress:k,dragStyles:Q}}function s_(){throw new Error}const O_e=["start","end","left","right","top","bottom"],V_e=st({color:String,disableResizeWatcher:Boolean,disableRouteWatcher:Boolean,expandOnHover:Boolean,floating:Boolean,modelValue:{type:Boolean,default:null},permanent:Boolean,rail:{type:Boolean,default:null},railWidth:{type:[Number,String],default:56},scrim:{type:[Boolean,String],default:!0},image:String,temporary:Boolean,persistent:Boolean,touchless:Boolean,width:{type:[Number,String],default:256},location:{type:String,default:"start",validator:e=>O_e.includes(e)},sticky:Boolean,...sl(),...vn(),...EA(),...Yp({mobile:null}),...Hs(),...Jp(),...Nr(),...ti({tag:"nav"}),...Ii()},"VNavigationDrawer"),B_e=It()({name:"VNavigationDrawer",props:V_e(),emits:{"update:modelValue":e=>!0,"update:rail":e=>!0},setup(e,t){let{attrs:n,emit:i,slots:r}=t;const{isRtl:a}=Ws(),{themeClasses:l}=Zi(e),{borderClasses:h}=Rl(e),{backgroundColorClasses:s,backgroundColorStyles:p}=tr(()=>e.color),{elevationClasses:v}=vo(e),{displayClasses:x,mobile:T}=Dl(e),{roundedClasses:k}=Qr(e),P=_5(),M=In(e,"modelValue",null,Ke=>!!Ke),{ssrBootStyles:L}=rg(),{scopeId:B}=sg(),F=at(),X=Xt(!1),{runOpenDelay:J,runCloseDelay:Q}=CA(e,Ke=>{X.value=Ke}),re=fe(()=>e.rail&&e.expandOnHover&&X.value?Number(e.width):Number(e.rail?e.railWidth:e.width)),Z=fe(()=>HC(e.location,a.value)),$=Ue(()=>e.persistent),H=fe(()=>!e.permanent&&(T.value||e.temporary)),W=fe(()=>e.sticky&&!H.value&&Z.value!=="bottom");ra(()=>e.expandOnHover&&e.rail!=null,()=>{Ht(X,Ke=>i("update:rail",!Ke))}),ra(()=>!e.disableResizeWatcher,()=>{Ht(H,Ke=>!e.permanent&&Gn(()=>M.value=!Ke))}),ra(()=>!e.disableRouteWatcher&&!!P,()=>{Ht(P.currentRoute,()=>H.value&&(M.value=!1))}),Ht(()=>e.permanent,Ke=>{Ke&&(M.value=!0)}),e.modelValue==null&&!H.value&&(M.value=e.permanent||!T.value);const{isDragging:te,dragProgress:Y}=L_e({el:F,isActive:M,isTemporary:H,width:re,touchless:Ue(()=>e.touchless),position:Z}),ne=fe(()=>{const Ke=H.value?0:e.rail&&e.expandOnHover?Number(e.railWidth):re.value;return te.value?Ke*Y.value:Ke}),{layoutItemStyles:Se,layoutItemScrimStyles:Fe}=Qp({id:e.name,order:fe(()=>parseInt(e.order,10)),position:Z,layoutSize:ne,elementSize:re,active:Mp(M),disableTransitions:Ue(()=>te.value),absolute:fe(()=>e.absolute||W.value&&typeof Ve.value!="string")}),{isStuck:Ve,stickyStyles:Ge}=A_e({rootEl:F,isSticky:W,layoutItemStyles:Se}),je=tr(()=>typeof e.scrim=="string"?e.scrim:null),Ae=fe(()=>({...te.value?{opacity:Y.value*.2,transition:"none"}:void 0,...Fe.value}));return Jr({VList:{bgColor:"transparent"}}),Vt(()=>{const Ke=r.image||e.image;return N(sn,null,[ce(e.tag,kt({ref:F,onMouseenter:J,onMouseleave:Q,class:["v-navigation-drawer",`v-navigation-drawer--${Z.value}`,{"v-navigation-drawer--expand-on-hover":e.expandOnHover,"v-navigation-drawer--floating":e.floating,"v-navigation-drawer--is-hovering":X.value,"v-navigation-drawer--rail":e.rail,"v-navigation-drawer--temporary":H.value,"v-navigation-drawer--persistent":$.value,"v-navigation-drawer--active":M.value,"v-navigation-drawer--sticky":W.value},l.value,s.value,h.value,x.value,v.value,k.value,e.class],style:[p.value,Se.value,L.value,Ge.value,e.style]},B,n),{default:()=>[Ke&&N("div",{key:"image",class:"v-navigation-drawer__img"},[r.image?ce(ci,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{alt:"",cover:!0,height:"inherit",src:e.image}}},r.image):ce(gh,{key:"image-img",alt:"",cover:!0,height:"inherit",src:e.image},null)]),r.prepend&&N("div",{class:"v-navigation-drawer__prepend"},[r.prepend?.()]),N("div",{class:"v-navigation-drawer__content"},[r.default?.()]),r.append&&N("div",{class:"v-navigation-drawer__append"},[r.append?.()])]}),ce(fh,{name:"fade-transition"},{default:()=>[H.value&&(te.value||M.value)&&!!e.scrim&&N("div",kt({class:["v-navigation-drawer__scrim",je.backgroundColorClasses.value],style:[Ae.value,je.backgroundColorStyles.value],onClick:()=>{$.value||(M.value=!1)}},B),null)]})])}),{isStuck:Ve}}}),F_e=ac({name:"VNoSsr",setup(e,t){let{slots:n}=t;const i=I4();return()=>i.value&&n.default?.()}}),z_e=50,N_e=500;function U_e(e){let{toggleUpDown:t}=e,n=-1,i=-1;io(a);function r(h){a(),l(h),window.addEventListener("pointerup",a),document.addEventListener("blur",a),n=window.setTimeout(()=>{i=window.setInterval(()=>l(h),z_e)},N_e)}function a(){window.clearTimeout(n),window.clearInterval(i),window.removeEventListener("pointerup",a),document.removeEventListener("blur",a)}function l(h){t(h==="up")}return{holdStart:r,holdStop:a}}const $_e=st({controlVariant:{type:String,default:"default"},inset:Boolean,hideInput:Boolean,modelValue:{type:Number,default:null},min:{type:Number,default:Number.MIN_SAFE_INTEGER},max:{type:Number,default:Number.MAX_SAFE_INTEGER},step:{type:Number,default:1},precision:{type:Number,default:0},minFractionDigits:{type:Number,default:null},decimalSeparator:{type:String,validator:e=>!e||e.length===1},...ur(_0(),["modelValue","validationValue"])},"VNumberInput"),j_e=It()({name:"VNumberInput",props:{...$_e()},emits:{"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const i=at(),{holdStart:r,holdStop:a}=U_e({toggleUpDown:H}),l=cv(e),h=fe(()=>l.isDisabled.value||l.isReadonly.value),s=Xt(e.focused),{decimalSeparator:p}=dr(),v=fe(()=>e.decimalSeparator?.[0]||p.value);function x(ve){let Le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e.precision,We=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const ct=Le==null?String(ve):ve.toFixed(Le);if(s.value&&We)return Number(ct).toString().replace(".",v.value);if(e.minFractionDigits===null||Le!==null&&Le<e.minFractionDigits)return ct.replace(".",v.value);let[ut,rt]=ct.split(".");return rt=(rt??"").padEnd(e.minFractionDigits,"0").replace(new RegExp(`(?<=\\d{${e.minFractionDigits}})0+$`,"g"),""),[ut,rt].filter(Boolean).join(v.value)}const T=In(e,"modelValue",null,ve=>ve??null,ve=>ve==null?ve??null:Sr(Number(ve),e.min,e.max)),k=Xt(null);zr(()=>{s.value&&!h.value&&Number(k.value?.replace(v.value,"."))===T.value||(T.value==null?k.value=null:isNaN(T.value)||(k.value=x(T.value)))});const P=fe({get:()=>k.value,set(ve){if(ve===null||ve===""){T.value=null,k.value=null;return}const Le=Number(ve.replace(v.value,"."));!isNaN(Le)&&Le<=e.max&&Le>=e.min&&(T.value=Le,k.value=ve)}}),M=fe(()=>h.value?!1:(T.value??0)+e.step<=e.max),L=fe(()=>h.value?!1:(T.value??0)-e.step>=e.min),B=fe(()=>e.hideInput?"stacked":e.controlVariant),F=Ue(()=>B.value==="split"?"$plus":"$collapse"),X=Ue(()=>B.value==="split"?"$minus":"$expand"),J=Ue(()=>B.value==="split"?"default":"small"),Q=Ue(()=>B.value==="stacked"?"auto":"100%"),re={props:{onClick:Y,onPointerup:ne,onPointerdown:Se,onPointercancel:ne}},Z={props:{onClick:Y,onPointerup:ne,onPointerdown:Fe,onPointercancel:ne}};Ht(()=>e.precision,()=>Ge()),Ht(()=>e.minFractionDigits,()=>Ge()),cs(()=>{Ve()});function $(ve){if(ve==null)return 0;const Le=ve.toString(),We=Le.indexOf(".");return~We?Le.length-We:0}function H(){let ve=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;if(h.value)return;if(T.value==null){P.value=x(Sr(0,e.min,e.max));return}let Le=Math.max($(T.value),$(e.step));e.precision!=null&&(Le=Math.max(Le,e.precision)),ve?M.value&&(P.value=x(T.value+e.step,Le)):L.value&&(P.value=x(T.value-e.step,Le))}function W(ve){if(!ve.data)return;const Le=ve.target,{value:We,selectionStart:ct,selectionEnd:ut}=Le??{},rt=We?We.slice(0,ct)+ve.data+We.slice(ut):ve.data,Qe=nK(rt,e.precision,v.value);if(new RegExp(`^-?\\d*${qw(v.value)}?\\d*$`).test(rt)||(ve.preventDefault(),Le.value=Qe,Gn(()=>P.value=Qe)),e.precision!=null){if(rt.split(v.value)[1]?.length>e.precision){ve.preventDefault(),Le.value=Qe,Gn(()=>P.value=Qe);const Ct=(ct??0)+ve.data.length;Le.setSelectionRange(Ct,Ct)}e.precision===0&&rt.endsWith(v.value)&&(ve.preventDefault(),Le.value=Qe,Gn(()=>P.value=Qe))}}async function te(ve){["Enter","ArrowLeft","ArrowRight","Backspace","Delete","Tab"].includes(ve.key)||ve.ctrlKey||["ArrowDown","ArrowUp"].includes(ve.key)&&(ve.preventDefault(),ve.stopPropagation(),Ve(),await Gn(),ve.key==="ArrowDown"?H(!1):H())}function Y(ve){ve.stopPropagation()}function ne(ve){ve.currentTarget?.releasePointerCapture(ve.pointerId),ve.preventDefault(),a()}function Se(ve){ve.currentTarget?.setPointerCapture(ve.pointerId),ve.preventDefault(),ve.stopPropagation(),r("up")}function Fe(ve){ve.currentTarget?.setPointerCapture(ve.pointerId),ve.preventDefault(),ve.stopPropagation(),r("down")}function Ve(){if(h.value||!i.value)return;const ve=i.value.value,Le=Number(ve.replace(v.value,"."));ve&&!isNaN(Le)?P.value=x(Sr(Le,e.min,e.max)):P.value=null}function Ge(){h.value||(P.value=T.value!==null&&!isNaN(T.value)?x(T.value,e.precision,!1):null)}function je(){if(!h.value){if(T.value===null||isNaN(T.value)){P.value=null;return}P.value=T.value.toString().replace(".",v.value)}}function Ae(){je()}function Ke(){Ve()}return Vt(()=>{const{modelValue:ve,type:Le,...We}=_h.filterProps(e);function ct(){return n.increment?ce(ci,{key:"increment-defaults",defaults:{VBtn:{disabled:!M.value,height:Q.value,size:J.value,icon:F.value,variant:"text"}}},{default:()=>[n.increment(re)]}):ce(mi,{"aria-hidden":"true","data-testid":"increment",disabled:!M.value,height:Q.value,icon:F.value,key:"increment-btn",onClick:Y,onPointerdown:Se,onPointerup:ne,onPointercancel:ne,size:J.value,variant:"text",tabindex:"-1"},null)}function ut(){return n.decrement?ce(ci,{key:"decrement-defaults",defaults:{VBtn:{disabled:!L.value,height:Q.value,size:J.value,icon:X.value,variant:"text"}}},{default:()=>[n.decrement(Z)]}):ce(mi,{"aria-hidden":"true","data-testid":"decrement",disabled:!L.value,height:Q.value,icon:X.value,key:"decrement-btn",onClick:Y,onPointerdown:Fe,onPointerup:ne,onPointercancel:ne,size:J.value,variant:"text",tabindex:"-1"},null)}function rt(){return N("div",{class:"v-number-input__control"},[ut(),ce(tc,{vertical:B.value!=="stacked"},null),ct()])}function Qe(){return!e.hideInput&&!e.inset?ce(tc,{vertical:!0},null):void 0}const Ct=B.value==="split"?N("div",{class:"v-number-input__control"},[ce(tc,{vertical:!0},null),ct()]):e.reverse||B.value==="hidden"?void 0:N(sn,null,[Qe(),rt()]),At=n["append-inner"]||Ct,yn=B.value==="split"?N("div",{class:"v-number-input__control"},[ut(),ce(tc,{vertical:!0},null)]):e.reverse&&B.value!=="hidden"?N(sn,null,[rt(),Qe()]):void 0,Mn=n["prepend-inner"]||yn;return ce(_h,kt({ref:i},We,{modelValue:P.value,"onUpdate:modelValue":Ce=>P.value=Ce,focused:s.value,"onUpdate:focused":Ce=>s.value=Ce,validationValue:T.value,onBeforeinput:W,onFocus:Ae,onBlur:Ke,onKeydown:te,class:["v-number-input",{"v-number-input--default":B.value==="default","v-number-input--hide-input":e.hideInput,"v-number-input--inset":e.inset,"v-number-input--reverse":e.reverse,"v-number-input--split":B.value==="split","v-number-input--stacked":B.value==="stacked"},e.class],style:e.style,inputmode:"decimal"}),{...n,"append-inner":At?function(){for(var Ce=arguments.length,ze=new Array(Ce),Ee=0;Ee<Ce;Ee++)ze[Ee]=arguments[Ee];return N(sn,null,[n["append-inner"]?.(...ze),Ct])}:void 0,"prepend-inner":Mn?function(){for(var Ce=arguments.length,ze=new Array(Ce),Ee=0;Ee<Ce;Ee++)ze[Ee]=arguments[Ee];return N(sn,null,[yn,n["prepend-inner"]?.(...ze)])}:void 0})}),yo({},i)}}),W_e=st({autofocus:Boolean,divider:String,focusAll:Boolean,label:{type:String,default:"$vuetify.input.otp"},length:{type:[Number,String],default:6},modelValue:{type:[Number,String],default:void 0},placeholder:String,type:{type:String,default:"number"},...Ls(),...m0(),...Ml(g0({variant:"outlined"}),["baseColor","bgColor","class","color","disabled","error","loading","rounded","style","theme","variant"])},"VOtpInput"),H_e=It()({name:"VOtpInput",props:W_e(),emits:{finish:e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{attrs:n,emit:i,slots:r}=t;const{dimensionStyles:a}=Os(e),{isFocused:l,focus:h,blur:s}=kh(e),p=In(e,"modelValue","",W=>W==null?[]:String(W).split(""),W=>W.join("")),{t:v}=dr(),x=fe(()=>Number(e.length)),T=fe(()=>Array(x.value).fill(0)),k=at(-1),P=at(),M=at([]),L=fe(()=>M.value[k.value]);let B=!1;ra(()=>e.autofocus,()=>{const W=P_();W.run(()=>{const{intersectionRef:te,isIntersecting:Y}=c0();zr(()=>{te.value=M.value[0]}),Ht(Y,ne=>{ne&&(te.value?.focus(),W.stop())})})});function F(){if(H(L.value.value)){L.value.value="";return}if(B)return;const W=p.value.slice(),te=L.value.value;W[k.value]=te;let Y=null;k.value>p.value.length?Y=p.value.length+1:k.value+1!==x.value&&(Y="next"),p.value=W,Y&&Ep(P.value,Y)}function X(){B=!1,F()}function J(W){const te=p.value.slice(),Y=k.value;let ne=null;["ArrowLeft","ArrowRight","Backspace","Delete"].includes(W.key)&&(W.preventDefault(),W.key==="ArrowLeft"?ne="prev":W.key==="ArrowRight"?ne="next":["Backspace","Delete"].includes(W.key)&&(te[k.value]="",p.value=te,k.value>0&&W.key==="Backspace"?ne="prev":requestAnimationFrame(()=>{M.value[Y]?.select()})),requestAnimationFrame(()=>{ne!=null&&Ep(P.value,ne)}))}function Q(W,te){te.preventDefault(),te.stopPropagation();const Y=te?.clipboardData?.getData("Text").trim().slice(0,x.value)??"",ne=Y.length-1===-1?W:Y.length-1;H(Y)||(p.value=Y.split(""),k.value=ne)}function re(){p.value=[]}function Z(W,te){h(),k.value=te}function $(){s(),k.value=-1}function H(W){return e.type==="number"&&/[^0-9]/g.test(W)}return Jr({VField:{color:Ue(()=>e.color),bgColor:Ue(()=>e.color),baseColor:Ue(()=>e.baseColor),disabled:Ue(()=>e.disabled),error:Ue(()=>e.error),variant:Ue(()=>e.variant)}},{scoped:!0}),Ht(p,W=>{W.length===x.value&&i("finish",W.join(""))},{deep:!0}),Ht(k,W=>{W<0||Gn(()=>{M.value[W]?.select()})}),Vt(()=>{const[W,te]=rm(n);return N("div",kt({class:["v-otp-input",{"v-otp-input--divided":!!e.divider},e.class],style:[e.style]},W),[N("div",{ref:P,class:"v-otp-input__content",style:Qt([a.value])},[T.value.map((Y,ne)=>N(sn,null,[e.divider&&ne!==0&&N("span",{class:"v-otp-input__divider"},[e.divider]),ce(Gf,{focused:l.value&&e.focusAll||k.value===ne,key:ne},{...r,loader:void 0,default:()=>N("input",{ref:Se=>M.value[ne]=Se,"aria-label":v(e.label,ne+1),autofocus:ne===0&&e.autofocus,autocomplete:"one-time-code",class:Tt(["v-otp-input__field"]),disabled:e.disabled,inputmode:e.type==="number"?"numeric":"text",min:e.type==="number"?0:void 0,maxlength:ne===0?x.value:"1",placeholder:e.placeholder,type:e.type==="number"?"text":e.type,value:p.value[ne],onInput:F,onFocus:Se=>Z(Se,ne),onBlur:$,onKeydown:J,onCompositionstart:()=>B=!0,onCompositionend:X,onPaste:Se=>Q(ne,Se)},null)})])),N("input",kt({class:"v-otp-input-input",type:"hidden"},te,{value:p.value.join("")}),null),ce(sd,{contained:!0,contentClass:"v-otp-input__loader",modelValue:!!e.loading,persistent:!0},{default:()=>[r.loader?.()??ce(Op,{color:typeof e.loading=="boolean"?void 0:e.loading,indeterminate:!0,size:"24",width:"2"},null)]}),r.default?.()])])}),{blur:()=>{M.value?.some(W=>W.blur())},focus:()=>{M.value?.[0].focus()},reset:re,isFocused:l}}});function G_e(e){return Math.floor(Math.abs(e))*Math.sign(e)}const q_e=st({scale:{type:[Number,String],default:.5},...vn()},"VParallax"),K_e=It()({name:"VParallax",props:q_e(),setup(e,t){let{slots:n}=t;const{intersectionRef:i,isIntersecting:r}=c0(),{resizeRef:a,contentRect:l}=Lc(),{height:h}=Dl(),s=at();zr(()=>{i.value=a.value=s.value?.$el});let p;Ht(r,k=>{k?(p=Z1(i.value),p=p===document.scrollingElement?document:p,p.addEventListener("scroll",T,{passive:!0}),T()):p.removeEventListener("scroll",T)}),Yr(()=>{p?.removeEventListener("scroll",T)}),Ht(h,T),Ht(()=>l.value?.height,T);const v=fe(()=>1-Sr(Number(e.scale)));let x=-1;function T(){!r.value||nd()||(cancelAnimationFrame(x),x=requestAnimationFrame(()=>{const k=(s.value?.$el).querySelector(".v-img__img");if(!k)return;const P=p instanceof Document?document.documentElement.clientHeight:p.clientHeight,M=p instanceof Document?window.scrollY:p.scrollTop,L=i.value.getBoundingClientRect().top+M,B=l.value.height,F=L+(B-P)/2,X=G_e((M-F)*v.value),J=Math.max(1,(v.value*(P-B)+B)/B);k.style.setProperty("transform",`translateY(${X}px) scale(${J})`)}))}return Vt(()=>ce(gh,{class:Tt(["v-parallax",{"v-parallax--active":r.value},e.class]),style:Qt(e.style),ref:s,cover:!0,onLoadstart:T,onLoad:T},n)),{}}}),X_e=st({...sT({falseIcon:"$radioOff",trueIcon:"$radioOn"})},"VRadio"),Z_e=It()({name:"VRadio",props:X_e(),setup(e,t){let{slots:n}=t;return Vt(()=>{const i=Hf.filterProps(e);return ce(Hf,kt(i,{class:["v-radio",e.class],style:e.style,type:"radio"}),n)}),{}}}),Y_e=st({height:{type:[Number,String],default:"auto"},...Ih(),...ur(yA(),["multiple"]),trueIcon:{type:Cn,default:"$radioOn"},falseIcon:{type:Cn,default:"$radioOff"},type:{type:String,default:"radio"}},"VRadioGroup"),J_e=It()({name:"VRadioGroup",inheritAttrs:!1,props:Y_e(),emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:n,slots:i}=t;const r=aa(),a=fe(()=>e.id||`radio-group-${r}`),l=In(e,"modelValue"),h=at();return Vt(()=>{const[s,p]=rm(n),v=sa.filterProps(e),x=Hf.filterProps(e),T=i.label?i.label({label:e.label,props:{for:a.value}}):e.label;return ce(sa,kt({ref:h,class:["v-radio-group",e.class],style:e.style},s,v,{modelValue:l.value,"onUpdate:modelValue":k=>l.value=k,id:a.value}),{...i,default:k=>{let{id:P,messagesId:M,isDisabled:L,isReadonly:B}=k;return N(sn,null,[T&&ce(lv,{id:P.value},{default:()=>[T]}),ce(Q5,kt(x,{id:P.value,"aria-describedby":M.value,defaultsTarget:"VRadio",trueIcon:e.trueIcon,falseIcon:e.falseIcon,type:e.type,disabled:L.value,readonly:B.value,"aria-labelledby":T?P.value:void 0,multiple:!1},p,{modelValue:l.value,"onUpdate:modelValue":F=>l.value=F}),i)])}})}),yo({},h)}}),Q_e=st({...m0(),...Ih(),..._j(),strict:Boolean,modelValue:{type:Array,default:()=>[0,0]}},"VRangeSlider"),eve=It()({name:"VRangeSlider",props:Q_e(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,end:e=>!0,start:e=>!0},setup(e,t){let{slots:n,emit:i}=t;const r=at(),a=at(),l=at(),{rtlClasses:h}=Ws();function s(te){if(!r.value||!a.value)return;const Y=qk(te,r.value.$el,e.direction),ne=qk(te,a.value.$el,e.direction),Se=Math.abs(Y),Fe=Math.abs(ne);return Se<Fe||Se===Fe&&Y<0?r.value.$el:a.value.$el}const p=vj(e),v=In(e,"modelValue",void 0,te=>te?.length?te.map(Y=>p.roundValue(Y)):[0,0]),{activeThumbRef:x,hasLabels:T,max:k,min:P,mousePressed:M,onSliderMousedown:L,onSliderTouchstart:B,position:F,trackContainerRef:X,disabled:J,readonly:Q}=yj({props:e,steps:p,onSliderStart:()=>{if(J.value||Q.value){x.value?.blur();return}i("start",v.value)},onSliderEnd:te=>{let{value:Y}=te;if(J.value||Q.value)x.value?.blur();else{const ne=x.value===r.value?.$el?[Y,v.value[1]]:[v.value[0],Y];!e.strict&&ne[0]<ne[1]&&(v.value=ne)}i("end",v.value)},onSliderMove:te=>{let{value:Y}=te;const[ne,Se]=v.value;if(J.value||Q.value){x.value?.blur();return}!e.strict&&ne===Se&&ne!==P.value&&(x.value=Y>ne?a.value?.$el:r.value?.$el,x.value?.focus()),x.value===r.value?.$el?v.value=[Math.min(Y,Se),Se]:v.value=[ne,Math.max(ne,Y)]},getActiveThumb:s}),{isFocused:re,focus:Z,blur:$}=kh(e),H=fe(()=>F(v.value[0])),W=fe(()=>F(v.value[1]));return Vt(()=>{const te=sa.filterProps(e),Y=!!(e.label||n.label||n.prepend);return ce(sa,kt({class:["v-slider","v-range-slider",{"v-slider--has-labels":!!n["tick-label"]||T.value,"v-slider--focused":re.value,"v-slider--pressed":M.value,"v-slider--disabled":J.value},h.value,e.class],style:e.style,ref:l},te,{focused:re.value}),{...n,prepend:Y?ne=>N(sn,null,[n.label?.(ne)??(e.label?ce(lv,{class:"v-slider__label",text:e.label},null):void 0),n.prepend?.(ne)]):void 0,default:ne=>{let{id:Se,messagesId:Fe}=ne;return N("div",{class:"v-slider__container",onMousedown:Q.value?void 0:L,onTouchstartPassive:Q.value?void 0:B},[N("input",{id:`${Se.value}_start`,name:e.name||Se.value,disabled:J.value,readonly:Q.value,tabindex:"-1",value:v.value[0]},null),N("input",{id:`${Se.value}_stop`,name:e.name||Se.value,disabled:J.value,readonly:Q.value,tabindex:"-1",value:v.value[1]},null),ce(bj,{ref:X,start:H.value,stop:W.value},{"tick-label":n["tick-label"]}),ce(Kk,{ref:r,"aria-describedby":Fe.value,focused:re&&x.value===r.value?.$el,modelValue:v.value[0],"onUpdate:modelValue":Ve=>v.value=[Ve,v.value[1]],onFocus:Ve=>{Z(),x.value=r.value?.$el,k.value!==P.value&&v.value[0]===v.value[1]&&v.value[1]===P.value&&Ve.relatedTarget!==a.value?.$el&&(r.value?.$el.blur(),a.value?.$el.focus())},onBlur:()=>{$(),x.value=void 0},min:P.value,max:v.value[1],position:H.value,ripple:e.ripple},{"thumb-label":n["thumb-label"]}),ce(Kk,{ref:a,"aria-describedby":Fe.value,focused:re&&x.value===a.value?.$el,modelValue:v.value[1],"onUpdate:modelValue":Ve=>v.value=[v.value[0],Ve],onFocus:Ve=>{Z(),x.value=a.value?.$el,k.value!==P.value&&v.value[0]===v.value[1]&&v.value[0]===k.value&&Ve.relatedTarget!==r.value?.$el&&(a.value?.$el.blur(),r.value?.$el.focus())},onBlur:()=>{$(),x.value=void 0},min:v.value[0],max:k.value,position:W.value,ripple:e.ripple},{"thumb-label":n["thumb-label"]})])}})}),yo({focus:()=>r.value?.$el.focus()},l)}}),tve=st({name:String,itemAriaLabel:{type:String,default:"$vuetify.rating.ariaLabel.item"},activeColor:String,color:String,clearable:Boolean,disabled:Boolean,emptyIcon:{type:Cn,default:"$ratingEmpty"},fullIcon:{type:Cn,default:"$ratingFull"},halfIncrements:Boolean,hover:Boolean,length:{type:[Number,String],default:5},readonly:Boolean,modelValue:{type:[Number,String],default:0},itemLabels:Array,itemLabelPosition:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},ripple:Boolean,...vn(),...xs(),...ud(),...ti(),...Ii()},"VRating"),nve=It()({name:"VRating",props:tve(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{t:i}=dr(),{themeClasses:r}=Zi(e),a=In(e,"modelValue"),l=fe(()=>Sr(parseFloat(a.value),0,Number(e.length))),h=fe(()=>Ql(Number(e.length),1)),s=fe(()=>h.value.flatMap(L=>e.halfIncrements?[L-.5,L]:[L])),p=Xt(-1),v=fe(()=>s.value.map(L=>{const B=e.hover&&p.value>-1,F=l.value>=L,X=p.value>=L,Q=(B?X:F)?e.fullIcon:e.emptyIcon,re=e.activeColor??e.color,Z=F||X?re:e.color;return{isFilled:F,isHovered:X,icon:Q,color:Z}})),x=fe(()=>[0,...s.value].map(L=>{function B(){p.value=L}function F(){p.value=-1}function X(){e.disabled||e.readonly||(a.value=l.value===L&&e.clearable?0:L)}return{onMouseenter:e.hover?B:void 0,onMouseleave:e.hover?F:void 0,onClick:X}})),T=aa(),k=fe(()=>e.name??`v-rating-${T}`);function P(L){let{value:B,index:F,showStar:X=!0}=L;const{onMouseenter:J,onMouseleave:Q,onClick:re}=x.value[F+1],Z=`${k.value}-${String(B).replace(".","-")}`,$={color:v.value[F]?.color,density:e.density,disabled:e.disabled,icon:v.value[F]?.icon,ripple:e.ripple,size:e.size,variant:"plain"};return N(sn,null,[N("label",{for:Z,class:Tt({"v-rating__item--half":e.halfIncrements&&B%1>0,"v-rating__item--full":e.halfIncrements&&B%1===0}),onMouseenter:J,onMouseleave:Q,onClick:re},[N("span",{class:"v-rating__hidden"},[i(e.itemAriaLabel,B,e.length)]),X?n.item?n.item({...v.value[F],props:$,value:B,index:F,rating:l.value}):ce(mi,kt({"aria-label":i(e.itemAriaLabel,B,e.length)},$),null):void 0]),N("input",{class:"v-rating__hidden",name:k.value,id:Z,type:"radio",value:B,checked:l.value===B,tabindex:-1,readonly:e.readonly,disabled:e.disabled},null)])}function M(L){return n["item-label"]?n["item-label"](L):L.label?N("span",null,[L.label]):N("span",null,[Jn("")])}return Vt(()=>{const L=!!e.itemLabels?.length||n["item-label"];return ce(e.tag,{class:Tt(["v-rating",{"v-rating--hover":e.hover,"v-rating--readonly":e.readonly},r.value,e.class]),style:Qt(e.style)},{default:()=>[ce(P,{value:0,index:-1,showStar:!1},null),h.value.map((B,F)=>N("div",{class:"v-rating__wrapper"},[L&&e.itemLabelPosition==="top"?M({value:B,index:F,label:e.itemLabels?.[F]}):void 0,N("div",{class:"v-rating__item"},[e.halfIncrements?N(sn,null,[ce(P,{value:B-.5,index:F*2},null),ce(P,{value:B,index:F*2+1},null)]):ce(P,{value:B,index:F},null)]),L&&e.itemLabelPosition==="bottom"?M({value:B,index:F,label:e.itemLabels?.[F]}):void 0]))]})}),{}}}),ive={actions:"button@2",article:"heading, paragraph",avatar:"avatar",button:"button",card:"image, heading","card-avatar":"image, list-item-avatar",chip:"chip","date-picker":"list-item, heading, divider, date-picker-options, date-picker-days, actions","date-picker-options":"text, avatar@2","date-picker-days":"avatar@28",divider:"divider",heading:"heading",image:"image","list-item":"text","list-item-avatar":"avatar, text","list-item-two-line":"sentences","list-item-avatar-two-line":"avatar, sentences","list-item-three-line":"paragraph","list-item-avatar-three-line":"avatar, paragraph",ossein:"ossein",paragraph:"text@3",sentences:"text@2",subtitle:"text",table:"table-heading, table-thead, table-tbody, table-tfoot","table-heading":"chip, text","table-thead":"heading@6","table-tbody":"table-row-divider@6","table-row-divider":"table-row, divider","table-row":"text@6","table-tfoot":"text@2, avatar@2",text:"text"};function rve(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return N("div",{class:Tt(["v-skeleton-loader__bone",`v-skeleton-loader__${e}`])},[t])}function jF(e){const[t,n]=e.split("@");return Array.from({length:n}).map(()=>XT(t))}function XT(e){let t=[];if(!e)return t;const n=ive[e];if(e!==n){if(e.includes(","))return WF(e);if(e.includes("@"))return jF(e);n.includes(",")?t=WF(n):n.includes("@")?t=jF(n):n&&t.push(XT(n))}return[rve(e,t)]}function WF(e){return e.replace(/\s/g,"").split(",").map(XT)}const sve=st({boilerplate:Boolean,color:String,loading:Boolean,loadingText:{type:String,default:"$vuetify.loading"},type:{type:[String,Array],default:"ossein"},...Ls(),...Hs(),...Ii()},"VSkeletonLoader"),ove=It()({name:"VSkeletonLoader",inheritAttrs:!1,props:sve(),setup(e,t){let{attrs:n,slots:i}=t;const{backgroundColorClasses:r,backgroundColorStyles:a}=tr(()=>e.color),{dimensionStyles:l}=Os(e),{elevationClasses:h}=vo(e),{themeClasses:s}=Zi(e),{t:p}=dr(),v=fe(()=>XT(Gr(e.type).join(",")));return Vt(()=>{const x=!i.default||e.loading,T=e.boilerplate||!x?{}:{ariaLive:"polite",ariaLabel:p(e.loadingText),role:"alert"};return x?N("div",kt({class:["v-skeleton-loader",{"v-skeleton-loader--boilerplate":e.boilerplate},s.value,r.value,h.value],style:[a.value,l.value]},T,n),[v.value]):N(sn,null,[i.default?.()])}),{}}}),ave=It()({name:"VSlideGroupItem",props:ng(),emits:{"group:selected":e=>!0},setup(e,t){let{slots:n}=t;const i=Wf(e,pA);return()=>n.default?.({isSelected:i.isSelected.value,select:i.select,toggle:i.toggle,selectedClass:i.selectedClass.value})}}),lve=st({closable:[Boolean,String],closeText:{type:String,default:"$vuetify.dismiss"},modelValue:{type:Array,default:()=>[]},...ur(F4(),["modelValue"])},"VSnackbarQueue"),cve=It()({name:"VSnackbarQueue",props:lve(),emits:{"update:modelValue":e=>!0},setup(e,t){let{emit:n,slots:i}=t;const{t:r}=dr(),a=Xt(!1),l=Xt(!1),h=Xt();Ht(()=>e.modelValue.length,(T,k)=>{!l.value&&T>k&&p()}),Ht(a,T=>{T&&(l.value=!0)});function s(){e.modelValue.length?p():(h.value=void 0,l.value=!1)}function p(){const[T,...k]=e.modelValue;n("update:modelValue",k),h.value=typeof T=="string"?{text:T}:T,Gn(()=>{a.value=!0})}function v(){a.value=!1}const x=fe(()=>({color:typeof e.closable=="string"?e.closable:void 0,text:r(e.closeText)}));Vt(()=>{const T=!!(e.closable||i.actions),{modelValue:k,...P}=t1.filterProps(e);return N(sn,null,[l.value&&!!h.value&&(i.default?ce(ci,{defaults:{VSnackbar:h.value}},{default:()=>[i.default({item:h.value})]}):ce(t1,kt(P,h.value,{modelValue:a.value,"onUpdate:modelValue":M=>a.value=M,onAfterLeave:s}),{text:i.text?()=>i.text?.({item:h.value}):void 0,actions:T?()=>N(sn,null,[i.actions?ce(ci,{defaults:{VBtn:x.value}},{default:()=>[i.actions({item:h.value,props:{onClick:v}})]}):ce(mi,kt(x.value,{onClick:v}),null)]):void 0}))])})}}),r8=st({autoDraw:Boolean,autoDrawDuration:[Number,String],autoDrawEasing:{type:String,default:"ease"},color:String,gradient:{type:Array,default:()=>[]},gradientDirection:{type:String,validator:e=>["top","bottom","left","right"].includes(e),default:"top"},height:{type:[String,Number],default:75},labels:{type:Array,default:()=>[]},labelSize:{type:[Number,String],default:7},lineWidth:{type:[String,Number],default:4},id:String,itemValue:{type:String,default:"value"},modelValue:{type:Array,default:()=>[]},min:[String,Number],max:[String,Number],padding:{type:[String,Number],default:8},showLabels:Boolean,smooth:[Boolean,String,Number],width:{type:[Number,String],default:300}},"Line"),s8=st({autoLineWidth:Boolean,...r8()},"VBarline"),HF=It()({name:"VBarline",props:s8(),setup(e,t){let{slots:n}=t;const i=aa(),r=fe(()=>e.id||`barline-${i}`),a=fe(()=>Number(e.autoDrawDuration)||500),l=fe(()=>!!(e.showLabels||e.labels.length>0||n?.label)),h=fe(()=>parseFloat(e.lineWidth)||4),s=fe(()=>Math.max(e.modelValue.length*h.value,Number(e.width))),p=fe(()=>({minX:0,maxX:s.value,minY:0,maxY:parseInt(e.height,10)})),v=fe(()=>e.modelValue.map(L=>Ps(L,e.itemValue,L)));function x(L,B){const{minX:F,maxX:X,minY:J,maxY:Q}=B,re=L.length;let Z=e.max!=null?Number(e.max):Math.max(...L),$=e.min!=null?Number(e.min):Math.min(...L);$>0&&e.min==null&&($=0),Z<0&&e.max==null&&(Z=0);const H=X/(re===1?2:re),W=(Q-J)/(Z-$||1),te=Q-Math.abs($*W);return L.map((Y,ne)=>{const Se=Math.abs(W*Y);return{x:F+ne*H,y:te-Se+ +(Y<0)*Se,height:Se,value:Y}})}const T=fe(()=>{const L=[],B=x(v.value,p.value),F=B.length;for(let X=0;L.length<F;X++){const J=B[X];let Q=e.labels[X];Q||(Q=typeof J=="object"?J.value:J),L.push({x:J.x,value:String(Q)})}return L}),k=fe(()=>x(v.value,p.value)),P=fe(()=>k.value.length===1?(p.value.maxX-h.value)/2:(Math.abs(k.value[0].x-k.value[1].x)-h.value)/2),M=fe(()=>typeof e.smooth=="boolean"?e.smooth?2:0:Number(e.smooth));Vt(()=>{const L=e.gradient.slice().length?e.gradient.slice().reverse():[""];return N("svg",{display:"block"},[N("defs",null,[N("linearGradient",{id:r.value,gradientUnits:"userSpaceOnUse",x1:e.gradientDirection==="left"?"100%":"0",y1:e.gradientDirection==="top"?"100%":"0",x2:e.gradientDirection==="right"?"100%":"0",y2:e.gradientDirection==="bottom"?"100%":"0"},[L.map((B,F)=>N("stop",{offset:F/Math.max(L.length-1,1),"stop-color":B||"currentColor"},null))])]),N("clipPath",{id:`${r.value}-clip`},[k.value.map(B=>N("rect",{x:B.x+P.value,y:B.y,width:h.value,height:B.height,rx:M.value,ry:M.value},[e.autoDraw&&!nd()&&N(sn,null,[N("animate",{attributeName:"y",from:B.y+B.height,to:B.y,dur:`${a.value}ms`,fill:"freeze"},null),N("animate",{attributeName:"height",from:"0",to:B.height,dur:`${a.value}ms`,fill:"freeze"},null)])]))]),l.value&&N("g",{key:"labels",style:{textAnchor:"middle",dominantBaseline:"mathematical",fill:"currentColor"}},[T.value.map((B,F)=>N("text",{x:B.x+P.value+h.value/2,y:parseInt(e.height,10)-2+(parseInt(e.labelSize,10)||7*.75),"font-size":Number(e.labelSize)||7},[n.label?.({index:F,value:B.value})??B.value]))]),N("g",{"clip-path":`url(#${r.value}-clip)`,fill:`url(#${r.value})`},[N("rect",{x:0,y:0,width:Math.max(e.modelValue.length*h.value,Number(e.width)),height:e.height},null)])])})}});function uve(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:75;if(e.length===0)return"";const r=e.shift(),a=e[e.length-1];return(n?`M${r.x} ${i-r.x+2} L${r.x} ${r.y}`:`M${r.x} ${r.y}`)+e.map((l,h)=>{const s=e[h+1],p=e[h-1]||r,v=s&&dve(s,l,p);if(!s||v)return`L${l.x} ${l.y}`;const x=Math.min(GF(p,l),GF(s,l)),k=x/2<t?x/2:t,P=qF(p,l,k),M=qF(s,l,k);return`L${P.x} ${P.y}S${l.x} ${l.y} ${M.x} ${M.y}`}).join("")+(n?`L${a.x} ${i-r.x+2} Z`:"")}function Yx(e){return parseInt(e,10)}function dve(e,t,n){return Yx(e.x+n.x)===Yx(2*t.x)&&Yx(e.y+n.y)===Yx(2*t.y)}function GF(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function qF(e,t,n){const i={x:e.x-t.x,y:e.y-t.y},r=Math.sqrt(i.x*i.x+i.y*i.y),a={x:i.x/r,y:i.y/r};return{x:t.x+a.x*n,y:t.y+a.y*n}}const o8=st({fill:Boolean,...r8()},"VTrendline"),KF=It()({name:"VTrendline",props:o8(),setup(e,t){let{slots:n}=t;const i=aa(),r=fe(()=>e.id||`trendline-${i}`),a=fe(()=>Number(e.autoDrawDuration)||(e.fill?500:2e3)),l=at(0),h=at(null);function s(L,B){const{minX:F,maxX:X,minY:J,maxY:Q}=B;L.length===1&&(L=[L[0],L[0]]);const re=L.length,Z=e.max!=null?Number(e.max):Math.max(...L),$=e.min!=null?Number(e.min):Math.min(...L),H=(X-F)/(re-1),W=(Q-J)/(Z-$||1);return L.map((te,Y)=>({x:F+Y*H,y:Q-(te-$)*W,value:te}))}const p=fe(()=>!!(e.showLabels||e.labels.length>0||n?.label)),v=fe(()=>parseFloat(e.lineWidth)||4),x=fe(()=>Number(e.width)),T=fe(()=>{const L=Number(e.padding);return{minX:L,maxX:x.value-L,minY:L,maxY:parseInt(e.height,10)-L}}),k=fe(()=>e.modelValue.map(L=>Ps(L,e.itemValue,L))),P=fe(()=>{const L=[],B=s(k.value,T.value),F=B.length;for(let X=0;L.length<F;X++){const J=B[X];let Q=e.labels[X];Q||(Q=typeof J=="object"?J.value:J),L.push({x:J.x,value:String(Q)})}return L});Ht(()=>e.modelValue,async()=>{if(await Gn(),!e.autoDraw||!h.value||nd())return;const L=h.value,B=L.getTotalLength();e.fill?(L.style.transformOrigin="bottom center",L.style.transition="none",L.style.transform="scaleY(0)",L.getBoundingClientRect(),L.style.transition=`transform ${a.value}ms ${e.autoDrawEasing}`,L.style.transform="scaleY(1)"):(L.style.strokeDasharray=`${B}`,L.style.strokeDashoffset=`${B}`,L.getBoundingClientRect(),L.style.transition=`stroke-dashoffset ${a.value}ms ${e.autoDrawEasing}`,L.style.strokeDashoffset="0"),l.value=B},{immediate:!0});function M(L){const B=typeof e.smooth=="boolean"?e.smooth?8:0:Number(e.smooth);return uve(s(k.value,T.value),B,L,parseInt(e.height,10))}Vt(()=>{const L=e.gradient.slice().length?e.gradient.slice().reverse():[""];return N("svg",{display:"block","stroke-width":parseFloat(e.lineWidth)??4},[N("defs",null,[N("linearGradient",{id:r.value,gradientUnits:"userSpaceOnUse",x1:e.gradientDirection==="left"?"100%":"0",y1:e.gradientDirection==="top"?"100%":"0",x2:e.gradientDirection==="right"?"100%":"0",y2:e.gradientDirection==="bottom"?"100%":"0"},[L.map((B,F)=>N("stop",{offset:F/Math.max(L.length-1,1),"stop-color":B||"currentColor"},null))])]),p.value&&N("g",{key:"labels",style:{textAnchor:"middle",dominantBaseline:"mathematical",fill:"currentColor"}},[P.value.map((B,F)=>N("text",{x:B.x+v.value/2+v.value/2,y:parseInt(e.height,10)-4+(parseInt(e.labelSize,10)||7*.75),"font-size":Number(e.labelSize)||7},[n.label?.({index:F,value:B.value})??B.value]))]),N("path",{ref:h,d:M(e.fill),fill:e.fill?`url(#${r.value})`:"none",stroke:e.fill?"none":`url(#${r.value})`},null),e.fill&&N("path",{d:M(!1),fill:"none",stroke:e.color??e.gradient?.[0]},null)])})}}),hve=st({type:{type:String,default:"trend"},...s8(),...o8()},"VSparkline"),fve=It()({name:"VSparkline",props:hve(),setup(e,t){let{slots:n}=t;const{textColorClasses:i,textColorStyles:r}=Fo(()=>e.color),a=fe(()=>!!(e.showLabels||e.labels.length>0||n?.label)),l=fe(()=>{let h=parseInt(e.height,10);return a.value&&(h+=parseInt(e.labelSize,10)*1.5),h});Vt(()=>{const h=e.type==="trend"?KF:HF,s=e.type==="trend"?KF.filterProps(e):HF.filterProps(e);return ce(h,kt({key:e.type,class:i.value,style:r.value,viewBox:`0 0 ${e.width} ${parseInt(l.value,10)}`},s),n)})}}),mve=st({...vn(),...M4({offset:8,minWidth:0,openDelay:0,closeDelay:100,location:"top center",transition:"scale-transition"})},"VSpeedDial"),pve=It()({name:"VSpeedDial",props:mve(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const i=In(e,"modelValue"),r=at(),a=fe(()=>{const[h,s="center"]=e.location?.split(" ")??[];return`${h} ${s}`}),l=fe(()=>({[`v-speed-dial__content--${a.value.replace(" ","-")}`]:!0}));return Vt(()=>{const h=W_.filterProps(e);return ce(W_,kt(h,{modelValue:i.value,"onUpdate:modelValue":s=>i.value=s,class:e.class,style:e.style,contentClass:["v-speed-dial__content",l.value,e.contentClass],location:a.value,ref:r,transition:"fade-transition"}),{...n,default:s=>ce(ci,{defaults:{VBtn:{size:"small"}}},{default:()=>[ce(Oa,{appear:!0,group:!0,transition:e.transition},{default:()=>[n.default?.(s)]})]})})}),{}}}),tM=Symbol.for("vuetify:v-stepper"),a8=st({color:String,disabled:{type:[Boolean,String],default:!1},prevText:{type:String,default:"$vuetify.stepper.prev"},nextText:{type:String,default:"$vuetify.stepper.next"}},"VStepperActions"),l8=It()({name:"VStepperActions",props:a8(),emits:{"click:prev":()=>!0,"click:next":()=>!0},setup(e,t){let{emit:n,slots:i}=t;const{t:r}=dr();function a(){n("click:prev")}function l(){n("click:next")}return Vt(()=>{const h={onClick:a},s={onClick:l};return N("div",{class:"v-stepper-actions"},[ce(ci,{defaults:{VBtn:{disabled:["prev",!0].includes(e.disabled),text:r(e.prevText),variant:"text"}}},{default:()=>[i.prev?.({props:h})??ce(mi,h,null)]}),ce(ci,{defaults:{VBtn:{color:e.color,disabled:["next",!0].includes(e.disabled),text:r(e.nextText),variant:"tonal"}}},{default:()=>[i.next?.({props:s})??ce(mi,s,null)]})])}),{}}}),c8=Sh("v-stepper-header"),gve=st({color:String,title:String,subtitle:String,complete:Boolean,completeIcon:{type:Cn,default:"$complete"},editable:Boolean,editIcon:{type:Cn,default:"$edit"},error:Boolean,errorIcon:{type:Cn,default:"$error"},icon:Cn,ripple:{type:[Boolean,Object],default:!0},rules:{type:Array,default:()=>[]}},"StepperItem"),_ve=st({...gve(),...ng()},"VStepperItem"),u8=It()({name:"VStepperItem",directives:{vRipple:za},props:_ve(),emits:{"group:selected":e=>!0},setup(e,t){let{slots:n}=t;const i=Wf(e,tM,!0),r=fe(()=>i?.value.value??e.value),a=fe(()=>e.rules.every(T=>T()===!0)),l=fe(()=>!e.disabled&&e.editable),h=fe(()=>!e.disabled&&e.editable),s=fe(()=>e.error||!a.value),p=fe(()=>e.complete||e.rules.length>0&&a.value),v=fe(()=>s.value?e.errorIcon:p.value?e.completeIcon:i.isSelected.value&&e.editable?e.editIcon:e.icon),x=fe(()=>({canEdit:h.value,hasError:s.value,hasCompleted:p.value,title:e.title,subtitle:e.subtitle,step:r.value,value:e.value}));return Vt(()=>{const T=(!i||i.isSelected.value||p.value||h.value)&&!s.value&&!e.disabled,k=!!(e.title!=null||n.title),P=!!(e.subtitle!=null||n.subtitle);function M(){i?.toggle()}return vi(N("button",{class:Tt(["v-stepper-item",{"v-stepper-item--complete":p.value,"v-stepper-item--disabled":e.disabled,"v-stepper-item--error":s.value},i?.selectedClass.value]),disabled:!e.editable,type:"button",onClick:M},[l.value&&sm(!0,"v-stepper-item"),ce(oc,{key:"stepper-avatar",class:"v-stepper-item__avatar",color:T?e.color:void 0,size:24},{default:()=>[n.icon?.(x.value)??(v.value?ce(Hi,{icon:v.value},null):r.value)]}),N("div",{class:"v-stepper-item__content"},[k&&N("div",{key:"title",class:"v-stepper-item__title"},[n.title?.(x.value)??e.title]),P&&N("div",{key:"subtitle",class:"v-stepper-item__subtitle"},[n.subtitle?.(x.value)??e.subtitle]),n.default?.(x.value)])]),[[za,e.editable&&e.ripple,null]])}),{}}}),vve=st({...ur(BT(),["continuous","nextIcon","prevIcon","showArrows","touch","mandatory"])},"VStepperWindow"),d8=It()({name:"VStepperWindow",props:vve(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const i=xi(tM,null),r=In(e,"modelValue"),a=fe({get(){return r.value!=null||!i?r.value:i.items.value.find(l=>i.selected.value.includes(l.id))?.value},set(l){r.value=l}});return Vt(()=>{const l=Wp.filterProps(e);return ce(Wp,kt({_as:"VStepperWindow"},l,{modelValue:a.value,"onUpdate:modelValue":h=>a.value=h,class:["v-stepper-window",e.class],style:e.style,mandatory:!1,touch:!1}),n)}),{}}}),yve=st({...FT()},"VStepperWindowItem"),h8=It()({name:"VStepperWindowItem",props:yve(),setup(e,t){let{slots:n}=t;return Vt(()=>{const i=Hp.filterProps(e);return ce(Hp,kt({_as:"VStepperWindowItem"},i,{class:["v-stepper-window-item",e.class],style:e.style}),n)}),{}}}),bve=st({altLabels:Boolean,bgColor:String,completeIcon:Cn,editIcon:Cn,editable:Boolean,errorIcon:Cn,hideActions:Boolean,items:{type:Array,default:()=>[]},itemTitle:{type:String,default:"title"},itemValue:{type:String,default:"value"},nonLinear:Boolean,flat:Boolean,...Yp()},"Stepper"),xve=st({...bve(),...tg({mandatory:"force",selectedClass:"v-stepper-item--selected"}),...DA(),...Ml(a8(),["prevText","nextText"])},"VStepper"),wve=It()({name:"VStepper",props:xve(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{items:i,next:r,prev:a,selected:l}=om(e,tM),{displayClasses:h,mobile:s}=Dl(e),{completeIcon:p,editIcon:v,errorIcon:x,color:T,editable:k,prevText:P,nextText:M}=iv(e),L=fe(()=>e.items.map((X,J)=>{const Q=Ps(X,e.itemTitle,X),re=Ps(X,e.itemValue,J+1);return{title:Q,value:re,raw:X}})),B=fe(()=>i.value.findIndex(X=>l.value.includes(X.id))),F=fe(()=>e.disabled?e.disabled:B.value===0?"prev":B.value===i.value.length-1?"next":!1);return Jr({VStepperItem:{editable:k,errorIcon:x,completeIcon:p,editIcon:v,prevText:P,nextText:M},VStepperActions:{color:T,disabled:F,prevText:P,nextText:M}}),Vt(()=>{const X=Vp.filterProps(e),J=!!(n.header||e.items.length),Q=e.items.length>0,re=!e.hideActions&&!!(Q||n.actions);return ce(Vp,kt(X,{color:e.bgColor,class:["v-stepper",{"v-stepper--alt-labels":e.altLabels,"v-stepper--flat":e.flat,"v-stepper--non-linear":e.nonLinear,"v-stepper--mobile":s.value},h.value,e.class],style:e.style}),{default:()=>[J&&ce(c8,{key:"stepper-header"},{default:()=>[L.value.map((Z,$)=>{let{raw:H,...W}=Z;return N(sn,null,[!!$&&ce(tc,null,null),ce(u8,W,{default:n[`header-item.${W.value}`]??n.header,icon:n.icon,title:n.title,subtitle:n.subtitle})])})]}),Q&&ce(d8,{key:"stepper-window"},{default:()=>[L.value.map(Z=>ce(h8,{value:Z.value},{default:()=>n[`item.${Z.value}`]?.(Z)??n.item?.(Z)}))]}),n.default?.({prev:a,next:r}),re&&(n.actions?.({next:r,prev:a})??ce(l8,{key:"stepper-actions","onClick:prev":a,"onClick:next":r},n))]})}),{prev:a,next:r}}}),Tve=st({indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...Ih(),...sT()},"VSwitch"),Sve=It()({name:"VSwitch",inheritAttrs:!1,props:Tve(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:indeterminate":e=>!0},setup(e,t){let{attrs:n,slots:i}=t;const r=In(e,"indeterminate"),a=In(e,"modelValue"),{loaderClasses:l}=u0(e),{isFocused:h,focus:s,blur:p}=kh(e),v=at(),x=at(),T=XI&&window.matchMedia("(forced-colors: active)").matches,k=Ue(()=>typeof e.loading=="string"&&e.loading!==""?e.loading:e.color),P=aa(),M=Ue(()=>e.id||`switch-${P}`);function L(){r.value&&(r.value=!1)}function B(F){F.stopPropagation(),F.preventDefault(),v.value?.input?.click()}return Vt(()=>{const[F,X]=rm(n),J=sa.filterProps(e),Q=Hf.filterProps(e);return ce(sa,kt({ref:x,class:["v-switch",{"v-switch--flat":e.flat},{"v-switch--inset":e.inset},{"v-switch--indeterminate":r.value},l.value,e.class]},F,J,{modelValue:a.value,"onUpdate:modelValue":re=>a.value=re,id:M.value,focused:h.value,style:e.style}),{...i,default:re=>{let{id:Z,messagesId:$,isDisabled:H,isReadonly:W,isValid:te}=re;const Y={model:a,isValid:te};return ce(Hf,kt({ref:v},Q,{modelValue:a.value,"onUpdate:modelValue":[ne=>a.value=ne,L],id:Z.value,"aria-describedby":$.value,type:"checkbox","aria-checked":r.value?"mixed":void 0,disabled:H.value,readonly:W.value,onFocus:s,onBlur:p},X),{...i,default:ne=>{let{backgroundColorClasses:Se,backgroundColorStyles:Fe}=ne;return N("div",{class:Tt(["v-switch__track",T?void 0:Se.value]),style:Qt(Fe.value),onClick:B},[i["track-true"]&&N("div",{key:"prepend",class:"v-switch__track-true"},[i["track-true"](Y)]),i["track-false"]&&N("div",{key:"append",class:"v-switch__track-false"},[i["track-false"](Y)])])},input:ne=>{let{inputNode:Se,icon:Fe,backgroundColorClasses:Ve,backgroundColorStyles:Ge}=ne;return N(sn,null,[Se,N("div",{class:Tt(["v-switch__thumb",{"v-switch__thumb--filled":Fe||e.loading},e.inset||T?void 0:Ve.value]),style:Qt(e.inset?void 0:Ge.value)},[i.thumb?ce(ci,{defaults:{VIcon:{icon:Fe,size:"x-small"}}},{default:()=>[i.thumb({...Y,icon:Fe})]}):ce(hA,null,{default:()=>[e.loading?ce(d0,{name:"v-switch",active:!0,color:te.value===!1?void 0:k.value},{default:je=>i.loader?i.loader(je):ce(Op,{active:je.isActive,color:je.color,indeterminate:!0,size:"16",width:"2"},null)}):Fe&&ce(Hi,{key:String(Fe),icon:Fe,size:"x-small"},null)]})])])}})}})}),yo({},x)}}),Eve=st({color:String,height:[Number,String],window:Boolean,...vn(),...Hs(),...Jp(),...Nr(),...ti(),...Ii()},"VSystemBar"),Cve=It()({name:"VSystemBar",props:Eve(),setup(e,t){let{slots:n}=t;const{themeClasses:i}=Zi(e),{backgroundColorClasses:r,backgroundColorStyles:a}=tr(()=>e.color),{elevationClasses:l}=vo(e),{roundedClasses:h}=Qr(e),{ssrBootStyles:s}=rg(),p=fe(()=>e.height??(e.window?32:24)),{layoutItemStyles:v}=Qp({id:e.name,order:fe(()=>parseInt(e.order,10)),position:Xt("top"),layoutSize:p,elementSize:p,active:fe(()=>!0),absolute:Ue(()=>e.absolute)});return Vt(()=>ce(e.tag,{class:Tt(["v-system-bar",{"v-system-bar--window":e.window},i.value,r.value,l.value,h.value,e.class]),style:Qt([a.value,v.value,s.value,e.style])},n)),{}}}),nM=Symbol.for("vuetify:v-tabs"),f8=st({fixed:Boolean,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},...ur(nT({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},"VTab"),m8=It()({name:"VTab",props:f8(),setup(e,t){let{slots:n,attrs:i}=t;const{textColorClasses:r,textColorStyles:a}=Fo(()=>e.sliderColor),l=at(),h=at(),s=fe(()=>e.direction==="horizontal"),p=fe(()=>l.value?.group?.isSelected.value??!1);function v(x){let{value:T}=x;if(T){const k=l.value?.$el.parentElement?.querySelector(".v-tab--selected .v-tab__slider"),P=h.value;if(!k||!P)return;const M=getComputedStyle(k).color,L=k.getBoundingClientRect(),B=P.getBoundingClientRect(),F=s.value?"x":"y",X=s.value?"X":"Y",J=s.value?"right":"bottom",Q=s.value?"width":"height",re=L[F],Z=B[F],$=re>Z?L[J]-B[J]:L[F]-B[F],H=Math.sign($)>0?s.value?"right":"bottom":Math.sign($)<0?s.value?"left":"top":"center",te=(Math.abs($)+(Math.sign($)<0?L[Q]:B[Q]))/Math.max(L[Q],B[Q])||0,Y=L[Q]/B[Q]||0,ne=1.5;Jd(P,{backgroundColor:[M,"currentcolor"],transform:[`translate${X}(${$}px) scale${X}(${Y})`,`translate${X}(${$/ne}px) scale${X}(${(te-1)/ne+1})`,"none"],transformOrigin:Array(3).fill(H)},{duration:225,easing:xb})}}return Vt(()=>{const x=mi.filterProps(e);return ce(mi,kt({symbol:nM,ref:l,class:["v-tab",e.class],style:e.style,tabindex:p.value?0:-1,role:"tab","aria-selected":String(p.value),active:!1},x,i,{block:e.fixed,maxWidth:e.fixed?300:void 0,"onGroup:selected":v}),{...n,default:()=>N(sn,null,[n.default?.()??e.text,!e.hideSlider&&N("div",{ref:h,class:Tt(["v-tab__slider",r.value]),style:Qt(a.value)},null)])})}),yo({},l)}}),kve=st({...ur(BT(),["continuous","nextIcon","prevIcon","showArrows","touch","mandatory"])},"VTabsWindow"),p8=It()({name:"VTabsWindow",props:kve(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const i=xi(nM,null),r=In(e,"modelValue"),a=fe({get(){return r.value!=null||!i?r.value:i.items.value.find(l=>i.selected.value.includes(l.id))?.value},set(l){r.value=l}});return Vt(()=>{const l=Wp.filterProps(e);return ce(Wp,kt({_as:"VTabsWindow"},l,{modelValue:a.value,"onUpdate:modelValue":h=>a.value=h,class:["v-tabs-window",e.class],style:e.style,mandatory:!1,touch:!1}),n)}),{}}}),Ive=st({...FT()},"VTabsWindowItem"),g8=It()({name:"VTabsWindowItem",props:Ive(),setup(e,t){let{slots:n}=t;return Vt(()=>{const i=Hp.filterProps(e);return ce(Hp,kt({_as:"VTabsWindowItem"},i,{class:["v-tabs-window-item",e.class],style:e.style}),n)}),{}}});function Ave(e){return e?e.map(t=>bb(t)?t:{text:t,value:t}):[]}const Pve=st({alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,...Ml(f8(),["spaced"]),...gA({mandatory:"force",selectedClass:"v-tab-item--selected"}),...xs(),...ti()},"VTabs"),Mve=It()({name:"VTabs",props:Pve(),emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:n,slots:i}=t;const r=In(e,"modelValue"),a=fe(()=>Ave(e.items)),{densityClasses:l}=$a(e),{backgroundColorClasses:h,backgroundColorStyles:s}=tr(()=>e.bgColor),{scopeId:p}=sg();return Jr({VTab:{color:Ue(()=>e.color),direction:Ue(()=>e.direction),stacked:Ue(()=>e.stacked),fixed:Ue(()=>e.fixedTabs),sliderColor:Ue(()=>e.sliderColor),hideSlider:Ue(()=>e.hideSlider)}}),Vt(()=>{const v=Pb.filterProps(e),x=!!(i.window||e.items.length>0);return N(sn,null,[ce(Pb,kt(v,{modelValue:r.value,"onUpdate:modelValue":T=>r.value=T,class:["v-tabs",`v-tabs--${e.direction}`,`v-tabs--align-tabs-${e.alignTabs}`,{"v-tabs--fixed-tabs":e.fixedTabs,"v-tabs--grow":e.grow,"v-tabs--stacked":e.stacked},l.value,h.value,e.class],style:[{"--v-tabs-height":dn(e.height)},s.value,e.style],role:"tablist",symbol:nM},p,n),{default:()=>[i.default?.()??a.value.map(T=>i.tab?.({item:T})??ce(m8,kt(T,{key:T.text,value:T.value,spaced:e.spaced}),{default:i[`tab.${T.value}`]?()=>i[`tab.${T.value}`]?.({item:T}):void 0}))]}),x&&ce(p8,kt({modelValue:r.value,"onUpdate:modelValue":T=>r.value=T,key:"tabs-window"},p),{default:()=>[a.value.map(T=>i.item?.({item:T})??ce(g8,{value:T.value},{default:()=>i[`item.${T.value}`]?.({item:T})})),i.window?.()]})])}),{}}}),Dve=st({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseFloat(e))},maxRows:{type:[Number,String],validator:e=>!isNaN(parseFloat(e))},suffix:String,modelModifiers:Object,...D4(),...Ih(),...g0()},"VTextarea"),Rve=It()({name:"VTextarea",directives:{vIntersect:cu},inheritAttrs:!1,props:Dve(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0,"update:rows":e=>!0},setup(e,t){let{attrs:n,emit:i,slots:r}=t;const a=In(e,"modelValue"),{isFocused:l,focus:h,blur:s}=kh(e),{onIntersect:p}=L4(e),v=fe(()=>typeof e.counterValue=="function"?e.counterValue(a.value):(a.value||"").toString().length),x=fe(()=>{if(n.maxlength)return n.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter}),T=at(),k=at(),P=Xt(""),M=at(),L=at(0),{platform:B}=Dl(),F=R4(e),X=fe(()=>e.persistentPlaceholder||l.value||e.active);function J(){F.isSuppressing.value&&F.update(),M.value!==document.activeElement&&M.value?.focus(),l.value||h()}function Q(Se){J(),i("click:control",Se)}function re(Se){i("mousedown:control",Se)}function Z(Se){Se.stopPropagation(),J(),Gn(()=>{a.value="",s0(e["onClick:clear"],Se)})}function $(Se){const Fe=Se.target;if(a.value=Fe.value,e.modelModifiers?.trim){const Ve=[Fe.selectionStart,Fe.selectionEnd];Gn(()=>{Fe.selectionStart=Ve[0],Fe.selectionEnd=Ve[1]})}}const H=at(),W=at(Number(e.rows)),te=fe(()=>["plain","underlined"].includes(e.variant));zr(()=>{e.autoGrow||(W.value=Number(e.rows))});function Y(){Gn(()=>{if(!M.value)return;if(B.value.firefox){L.value=12;return}const{offsetWidth:Se,clientWidth:Fe}=M.value;L.value=Math.max(0,Se-Fe)}),e.autoGrow&&Gn(()=>{if(!H.value||!k.value)return;const Se=getComputedStyle(H.value),Fe=getComputedStyle(k.value.$el),Ve=parseFloat(Se.getPropertyValue("--v-field-padding-top"))+parseFloat(Se.getPropertyValue("--v-input-padding-top"))+parseFloat(Se.getPropertyValue("--v-field-padding-bottom")),Ge=H.value.scrollHeight,je=parseFloat(Se.lineHeight),Ae=Math.max(parseFloat(e.rows)*je+Ve,parseFloat(Fe.getPropertyValue("--v-input-control-height"))),Ke=parseFloat(e.maxRows)*je+Ve||1/0,ve=Sr(Ge??0,Ae,Ke);W.value=Math.floor((ve-Ve)/je),P.value=dn(ve)})}cs(Y),Ht(a,Y),Ht(()=>e.rows,Y),Ht(()=>e.maxRows,Y),Ht(()=>e.density,Y),Ht(W,Se=>{i("update:rows",Se)});let ne;return Ht(H,Se=>{Se?(ne=new ResizeObserver(Y),ne.observe(H.value)):ne?.disconnect()}),Yr(()=>{ne?.disconnect()}),Vt(()=>{const Se=!!(r.counter||e.counter||e.counterValue),Fe=!!(Se||r.details),[Ve,Ge]=rm(n),{modelValue:je,...Ae}=sa.filterProps(e),Ke={...Gf.filterProps(e),"onClick:clear":Z};return ce(sa,kt({ref:T,modelValue:a.value,"onUpdate:modelValue":ve=>a.value=ve,class:["v-textarea v-text-field",{"v-textarea--prefixed":e.prefix,"v-textarea--suffixed":e.suffix,"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-textarea--auto-grow":e.autoGrow,"v-textarea--no-resize":e.noResize||e.autoGrow,"v-input--plain-underlined":te.value},e.class],style:[{"--v-textarea-scroll-bar-width":dn(L.value)},e.style]},Ve,Ae,{centerAffix:W.value===1&&!te.value,focused:l.value}),{...r,default:ve=>{let{id:Le,isDisabled:We,isDirty:ct,isReadonly:ut,isValid:rt,hasDetails:Qe}=ve;return ce(Gf,kt({ref:k,style:{"--v-textarea-control-height":P.value},onClick:Q,onMousedown:re,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},Ke,{id:Le.value,active:X.value||ct.value,centerAffix:W.value===1&&!te.value,dirty:ct.value||e.dirty,disabled:We.value,focused:l.value,details:Qe.value,error:rt.value===!1}),{...r,default:Ct=>{let{props:{class:At,...yn},controlRef:Mn}=Ct;return N(sn,null,[e.prefix&&N("span",{class:"v-text-field__prefix"},[e.prefix]),vi(N("textarea",kt({ref:Ce=>M.value=Mn.value=Ce,class:At,value:a.value,onInput:$,autofocus:e.autofocus,readonly:ut.value,disabled:We.value,placeholder:e.placeholder,rows:e.rows,name:F.fieldName.value,autocomplete:F.fieldAutocomplete.value,onFocus:J,onBlur:s},yn,Ge),null),[[cu,{handler:p},null,{once:!0}]]),e.autoGrow&&vi(N("textarea",{class:Tt([At,"v-textarea__sizer"]),id:`${yn.id}-sizer`,"onUpdate:modelValue":Ce=>a.value=Ce,ref:H,readonly:!0,"aria-hidden":"true"},null),[[$u,a.value]]),e.suffix&&N("span",{class:"v-text-field__suffix"},[e.suffix])])}})},details:Fe?ve=>N(sn,null,[r.details?.(ve),Se&&N(sn,null,[N("span",null,null),ce(oT,{active:e.persistentCounter||l.value,value:v.value,max:x.value,disabled:e.disabled},r.counter)])]):void 0})}),yo({},T,k,M)}}),Lve=st({withBackground:Boolean,...vn(),...Ii(),...ti()},"VThemeProvider"),Ove=It()({name:"VThemeProvider",props:Lve(),setup(e,t){let{slots:n}=t;const{themeClasses:i}=Zi(e);return()=>e.withBackground?ce(e.tag,{class:Tt(["v-theme-provider",i.value,e.class]),style:Qt(e.style)},{default:()=>[n.default?.()]}):n.default?.()}}),Vve=st({dotColor:String,fillDot:Boolean,hideDot:Boolean,icon:Cn,iconColor:String,lineColor:String,...vn(),...Nr(),...ud(),...Hs()},"VTimelineDivider"),Bve=It()({name:"VTimelineDivider",props:Vve(),setup(e,t){let{slots:n}=t;const{sizeClasses:i,sizeStyles:r}=sv(e,"v-timeline-divider__dot"),{backgroundColorStyles:a,backgroundColorClasses:l}=tr(()=>e.dotColor),{roundedClasses:h}=Qr(e,"v-timeline-divider__dot"),{elevationClasses:s}=vo(e),{backgroundColorClasses:p,backgroundColorStyles:v}=tr(()=>e.lineColor);return Vt(()=>N("div",{class:Tt(["v-timeline-divider",{"v-timeline-divider--fill-dot":e.fillDot},e.class]),style:Qt(e.style)},[N("div",{class:Tt(["v-timeline-divider__before",p.value]),style:Qt(v.value)},null),!e.hideDot&&N("div",{key:"dot",class:Tt(["v-timeline-divider__dot",s.value,h.value,i.value]),style:Qt(r.value)},[N("div",{class:Tt(["v-timeline-divider__inner-dot",l.value,h.value]),style:Qt(a.value)},[n.default?ce(ci,{key:"icon-defaults",disabled:!e.icon,defaults:{VIcon:{color:e.iconColor,icon:e.icon,size:e.size}}},n.default):ce(Hi,{key:"icon",color:e.iconColor,icon:e.icon,size:e.size},null)])]),N("div",{class:Tt(["v-timeline-divider__after",p.value]),style:Qt(v.value)},null)])),{}}}),_8=st({density:String,dotColor:String,fillDot:Boolean,hideDot:Boolean,hideOpposite:{type:Boolean,default:void 0},icon:Cn,iconColor:String,lineInset:[Number,String],side:{type:String,validator:e=>e==null||["start","end"].includes(e)},...vn(),...Ls(),...Hs(),...Nr(),...ud(),...ti()},"VTimelineItem"),Fve=It()({name:"VTimelineItem",props:_8(),setup(e,t){let{slots:n}=t;const{dimensionStyles:i}=Os(e),r=Xt(0),a=at();return Ht(a,l=>{l&&(r.value=l.$el.querySelector(".v-timeline-divider__dot")?.getBoundingClientRect().width??0)},{flush:"post"}),Vt(()=>N("div",{class:Tt(["v-timeline-item",{"v-timeline-item--fill-dot":e.fillDot,"v-timeline-item--side-start":e.side==="start","v-timeline-item--side-end":e.side==="end"},e.class]),style:Qt([{"--v-timeline-dot-size":dn(r.value),"--v-timeline-line-inset":e.lineInset?`calc(var(--v-timeline-dot-size) / 2 + ${dn(e.lineInset)})`:dn(0)},e.style])},[N("div",{class:"v-timeline-item__body",style:Qt(i.value)},[n.default?.()]),ce(Bve,{ref:a,hideDot:e.hideDot,icon:e.icon,iconColor:e.iconColor,size:e.size,elevation:e.elevation,dotColor:e.dotColor,fillDot:e.fillDot,rounded:e.rounded},{default:n.icon}),e.density!=="compact"&&N("div",{class:"v-timeline-item__opposite"},[!e.hideOpposite&&n.opposite?.()])])),{}}}),zve=st({align:{type:String,default:"center",validator:e=>["center","start"].includes(e)},direction:{type:String,default:"vertical",validator:e=>["vertical","horizontal"].includes(e)},justify:{type:String,default:"auto",validator:e=>["auto","center"].includes(e)},side:{type:String,validator:e=>e==null||["start","end"].includes(e)},lineThickness:{type:[String,Number],default:2},lineColor:String,truncateLine:{type:String,validator:e=>["start","end","both"].includes(e)},...Ml(_8({lineInset:0}),["dotColor","fillDot","hideOpposite","iconColor","lineInset","size"]),...vn(),...xs(),...ti(),...Ii()},"VTimeline"),Nve=It()({name:"VTimeline",props:zve(),setup(e,t){let{slots:n}=t;const{themeClasses:i}=Zi(e),{densityClasses:r}=$a(e),{rtlClasses:a}=Ws();Jr({VTimelineDivider:{lineColor:Ue(()=>e.lineColor)},VTimelineItem:{density:Ue(()=>e.density),dotColor:Ue(()=>e.dotColor),fillDot:Ue(()=>e.fillDot),hideOpposite:Ue(()=>e.hideOpposite),iconColor:Ue(()=>e.iconColor),lineColor:Ue(()=>e.lineColor),lineInset:Ue(()=>e.lineInset),size:Ue(()=>e.size)}});const l=fe(()=>{const s=e.side?e.side:e.density!=="default"?"end":null;return s&&`v-timeline--side-${s}`}),h=fe(()=>{const s=["v-timeline--truncate-line-start","v-timeline--truncate-line-end"];switch(e.truncateLine){case"both":return s;case"start":return s[0];case"end":return s[1];default:return null}});return Vt(()=>ce(e.tag,{class:Tt(["v-timeline",`v-timeline--${e.direction}`,`v-timeline--align-${e.align}`,`v-timeline--justify-${e.justify}`,h.value,{"v-timeline--inset-line":!!e.lineInset},i.value,r.value,l.value,a.value,e.class]),style:Qt([{"--v-timeline-line-thickness":dn(e.lineThickness)},e.style])},n)),{}}});function _p(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return String(e).padStart(t,"0")}const Uve=st({allowedValues:Function,ampm:Boolean,color:String,disabled:Boolean,displayedValue:null,double:Boolean,format:{type:Function,default:e=>e},max:{type:Number,required:!0},min:{type:Number,required:!0},scrollable:Boolean,readonly:Boolean,rotate:{type:Number,default:0},step:{type:Number,default:1},modelValue:{type:Number}},"VTimePickerClock"),sI=It()({name:"VTimePickerClock",props:Uve(),emits:{change:e=>!0,input:e=>!0},setup(e,t){let{emit:n}=t;const i=at(null),r=at(null),a=at(void 0),l=at(!1),h=at(null),s=at(null),p=DN(Ae=>n("change",Ae),750),{textColorClasses:v,textColorStyles:x}=Fo(()=>e.color),{backgroundColorClasses:T,backgroundColorStyles:k}=tr(()=>e.color),P=fe(()=>e.max-e.min+1),M=fe(()=>e.double?P.value/2:P.value),L=fe(()=>360/M.value),B=fe(()=>L.value*Math.PI/180),F=fe(()=>e.modelValue==null?e.min:e.modelValue),X=fe(()=>.62),J=fe(()=>{const Ae=[];for(let Ke=e.min;Ke<=e.max;Ke=Ke+e.step)Ae.push(Ke);return Ae});Ht(()=>e.modelValue,Ae=>{a.value=Ae});function Q(Ae){a.value!==Ae&&(a.value=Ae),n("input",Ae)}function re(Ae){return!e.allowedValues||e.allowedValues(Ae)}function Z(Ae){if(!e.scrollable||e.disabled)return;Ae.preventDefault();const Ke=Math.sign(-Ae.deltaY||1);let ve=F.value;do ve=ve+Ke,ve=(ve-e.min+P.value)%P.value+e.min;while(!re(ve)&&ve!==F.value);ve!==e.displayedValue&&Q(ve),p(ve)}function $(Ae){return e.double&&Ae-e.min>=M.value}function H(Ae){return $(Ae)?X.value:1}function W(Ae){const Ke=e.rotate*Math.PI/180;return{x:Math.sin((Ae-e.min)*B.value+Ke)*H(Ae),y:-Math.cos((Ae-e.min)*B.value+Ke)*H(Ae)}}function te(Ae,Ke){const ve=(Math.round(Ae/L.value)+(Ke?M.value:0))%P.value+e.min;return Ae<360-L.value/2?ve:Ke?e.max-M.value+1:e.min}function Y(Ae){const{x:Ke,y:ve}=W(Ae);return{left:`${Math.round(50+Ke*50)}%`,top:`${Math.round(50+ve*50)}%`}}function ne(Ae,Ke){const ve=Ke.x-Ae.x,Le=Ke.y-Ae.y;return Math.sqrt(ve*ve+Le*Le)}function Se(Ae,Ke){const ve=2*Math.atan2(Ke.y-Ae.y-ne(Ae,Ke),Ke.x-Ae.x);return Math.abs(ve*180/Math.PI)}function Fe(Ae){h.value===null&&(h.value=Ae),s.value=Ae,Q(Ae)}function Ve(Ae){if(Ae.preventDefault(),!l.value&&Ae.type!=="click"||!i.value)return;const{width:Ke,top:ve,left:Le}=i.value?.getBoundingClientRect(),{width:We}=r.value?.getBoundingClientRect()??{width:0},{clientX:ct,clientY:ut}="touches"in Ae?Ae.touches[0]:Ae,rt={x:Ke/2,y:-Ke/2},Qe={x:ct-Le,y:ve-ut},Ct=Math.round(Se(rt,Qe)-e.rotate+360)%360,At=e.double&&ne(rt,Qe)<(We+We*X.value)/4,yn=Math.ceil(15/L.value);let Mn;for(let Ce=0;Ce<yn;Ce++)if(Mn=te(Ct+Ce*L.value,At),re(Mn)||(Mn=te(Ct-Ce*L.value,At),re(Mn)))return Fe(Mn)}function Ge(Ae){e.disabled||(Ae.preventDefault(),window.addEventListener("mousemove",Ve),window.addEventListener("touchmove",Ve),window.addEventListener("mouseup",je),window.addEventListener("touchend",je),h.value=null,s.value=null,l.value=!0,Ve(Ae))}function je(Ae){Ae.stopPropagation(),window.removeEventListener("mousemove",Ve),window.removeEventListener("touchmove",Ve),window.removeEventListener("mouseup",je),window.removeEventListener("touchend",je),l.value=!1,s.value!==null&&re(s.value)&&n("change",s.value)}Vt(()=>N("div",{class:Tt([{"v-time-picker-clock":!0,"v-time-picker-clock--indeterminate":e.modelValue==null,"v-time-picker-clock--readonly":e.readonly}]),onMousedown:Ge,onTouchstart:Ge,onWheel:Z,ref:i},[N("div",{class:"v-time-picker-clock__inner",ref:r},[N("div",{class:Tt([{"v-time-picker-clock__hand":!0,"v-time-picker-clock__hand--inner":$(e.modelValue)},v.value]),style:Qt([{transform:`rotate(${e.rotate+L.value*(F.value-e.min)}deg) scaleY(${H(F.value)})`},x.value])},null),J.value.map(Ae=>{const Ke=Ae===F.value;return N("div",{class:Tt([{"v-time-picker-clock__item":!0,"v-time-picker-clock__item--active":Ke,"v-time-picker-clock__item--disabled":e.disabled||!re(Ae)},Ke&&T.value]),style:Qt([Y(Ae),Ke&&k.value])},[N("span",null,[e.format(Ae)])])})])]))}}),$ve=st({ampm:Boolean,color:String,disabled:Boolean,hour:Number,minute:Number,second:Number,period:String,readonly:Boolean,useSeconds:Boolean,value:Number,viewMode:String},"VTimePickerControls"),oI=It()({name:"VTimePickerControls",props:$ve(),emits:{"update:period":e=>!0,"update:viewMode":e=>!0},setup(e,t){let{emit:n,slots:i}=t;const{t:r}=dr();return Vt(()=>{let a=e.hour;return e.ampm&&(a=a?(a-1)%12+1:12),N("div",{class:"v-time-picker-controls"},[N("div",{class:Tt({"v-time-picker-controls__time":!0,"v-time-picker-controls__time--with-seconds":e.useSeconds})},[ce(mi,{active:e.viewMode==="hour",color:e.viewMode==="hour"?e.color:void 0,disabled:e.disabled,variant:"tonal",class:Tt({"v-time-picker-controls__time__btn":!0,"v-time-picker-controls__time--with-ampm__btn":e.ampm,"v-time-picker-controls__time--with-seconds__btn":e.useSeconds}),text:e.hour==null?"--":_p(`${a}`),onClick:()=>n("update:viewMode","hour")},null),N("span",{class:Tt(["v-time-picker-controls__time__separator",{"v-time-picker-controls--with-seconds__time__separator":e.useSeconds}])},[Jn(":")]),ce(mi,{active:e.viewMode==="minute",color:e.viewMode==="minute"?e.color:void 0,class:Tt({"v-time-picker-controls__time__btn":!0,"v-time-picker-controls__time__btn__active":e.viewMode==="minute","v-time-picker-controls__time--with-ampm__btn":e.ampm,"v-time-picker-controls__time--with-seconds__btn":e.useSeconds}),disabled:e.disabled,variant:"tonal",text:e.minute==null?"--":_p(e.minute),onClick:()=>n("update:viewMode","minute")},null),e.useSeconds&&N("span",{class:Tt(["v-time-picker-controls__time__separator",{"v-time-picker-controls--with-seconds__time__separator":e.useSeconds}]),key:"secondsDivider"},[Jn(":")]),e.useSeconds&&ce(mi,{key:"secondsVal",active:e.viewMode==="second",color:e.viewMode==="second"?e.color:void 0,variant:"tonal",onClick:()=>n("update:viewMode","second"),class:Tt({"v-time-picker-controls__time__btn":!0,"v-time-picker-controls__time__btn__active":e.viewMode==="second","v-time-picker-controls__time--with-seconds__btn":e.useSeconds}),disabled:e.disabled,text:e.second==null?"--":_p(e.second)},null),e.ampm&&N("div",{class:"v-time-picker-controls__ampm"},[ce(mi,{active:e.period==="am",color:e.period==="am"?e.color:void 0,class:Tt({"v-time-picker-controls__ampm__am":!0,"v-time-picker-controls__ampm__btn":!0,"v-time-picker-controls__ampm__btn__active":e.period==="am"}),disabled:e.disabled,text:r("$vuetify.timePicker.am"),variant:e.disabled&&e.period==="am"?"elevated":"tonal",onClick:()=>e.period!=="am"?n("update:period","am"):null},null),ce(mi,{active:e.period==="pm",color:e.period==="pm"?e.color:void 0,class:Tt({"v-time-picker-controls__ampm__pm":!0,"v-time-picker-controls__ampm__btn":!0,"v-time-picker-controls__ampm__btn__active":e.period==="pm"}),disabled:e.disabled,text:r("$vuetify.timePicker.pm"),variant:e.disabled&&e.period==="pm"?"elevated":"tonal",onClick:()=>e.period!=="pm"?n("update:period","pm"):null},null)])])])}),{}}}),jve=Ql(24),v8=Ql(12),Wve=v8.map(e=>e+12);Ql(60);const Hve=st({allowedHours:[Function,Array],allowedMinutes:[Function,Array],allowedSeconds:[Function,Array],disabled:Boolean,format:{type:String,default:"ampm"},max:String,min:String,viewMode:{type:String,default:"hour"},period:{type:String,default:"am",validator:e=>["am","pm"].includes(e)},modelValue:null,readonly:Boolean,scrollable:Boolean,useSeconds:Boolean,...ur(zT({title:"$vuetify.timePicker.title"}),["landscape"])},"VTimePicker"),Gve=It()({name:"VTimePicker",props:Hve(),emits:{"update:hour":e=>!0,"update:minute":e=>!0,"update:period":e=>!0,"update:second":e=>!0,"update:modelValue":e=>!0,"update:viewMode":e=>!0},setup(e,t){let{emit:n,slots:i}=t;const{t:r}=dr(),a=at(null),l=at(null),h=at(null),s=at(null),p=at(null),v=at(null),x=In(e,"period","am"),T=In(e,"viewMode","hour"),k=at(null),P=at(null),M=fe(()=>{let Y;if(e.allowedHours instanceof Array?Y=Fe=>e.allowedHours.includes(Fe):Y=e.allowedHours,!e.min&&!e.max)return Y;const ne=e.min?Number(e.min.split(":")[0]):0,Se=e.max?Number(e.max.split(":")[0]):23;return Fe=>Fe>=Number(ne)&&Fe<=Number(Se)&&(!Y||Y(Fe))}),L=fe(()=>{let Y;const ne=!M.value||a.value===null||M.value(a.value);if(e.allowedMinutes instanceof Array?Y=Ke=>e.allowedMinutes.includes(Ke):Y=e.allowedMinutes,!e.min&&!e.max)return ne?Y:()=>!1;const[Se,Fe]=e.min?e.min.split(":").map(Number):[0,0],[Ve,Ge]=e.max?e.max.split(":").map(Number):[23,59],je=Se*60+Number(Fe),Ae=Ve*60+Number(Ge);return Ke=>{const ve=60*a.value+Ke;return ve>=je&&ve<=Ae&&ne&&(!Y||Y(Ke))}}),B=fe(()=>{let Y;const Se=(!M.value||a.value===null||M.value(a.value))&&(!L.value||l.value===null||L.value(l.value));if(e.allowedSeconds instanceof Array?Y=We=>e.allowedSeconds.includes(We):Y=e.allowedSeconds,!e.min&&!e.max)return Se?Y:()=>!1;const[Fe,Ve,Ge]=e.min?e.min.split(":").map(Number):[0,0,0],[je,Ae,Ke]=e.max?e.max.split(":").map(Number):[23,59,59],ve=Fe*3600+Ve*60+Number(Ge||0),Le=je*3600+Ae*60+Number(Ke||0);return We=>{const ct=3600*a.value+60*l.value+We;return ct>=ve&&ct<=Le&&Se&&(!Y||Y(We))}}),F=fe(()=>e.format==="ampm");Ht(()=>e.period,Y=>H(Y)),Ht(()=>e.modelValue,Y=>Z(Y)),cs(()=>{Z(e.modelValue)});function X(){return a.value!=null&&l.value!=null&&(!e.useSeconds||h.value!=null)?`${_p(a.value)}:${_p(l.value)}`+(e.useSeconds?`:${_p(h.value)}`:""):null}function J(){const Y=X();Y!==null&&n("update:modelValue",Y)}function Q(Y){return Y?(Y-1)%12+1:12}function re(Y,ne){return Y%12+(ne==="pm"?12:0)}function Z(Y){if(Y==null||Y==="")a.value=null,l.value=null,h.value=null;else if(Y instanceof Date)a.value=Y.getHours(),l.value=Y.getMinutes(),h.value=Y.getSeconds();else{const[ne,,Se,,Fe,Ve]=Y.trim().toLowerCase().match(/^(\d+):(\d+)(:(\d+))?([ap]m)?$/)||new Array(6);a.value=Ve?re(parseInt(ne,10),Ve):parseInt(ne,10),l.value=parseInt(Se,10),h.value=parseInt(Fe||0,10)}x.value=a.value==null||a.value<12?"am":"pm"}function $(Y,ne){const Se=M.value;if(!Se)return ne;const Fe=F.value?ne<12?v8:Wve:jve;return((Fe.find(Ge=>Se((Ge+ne)%Fe.length+Fe[0]))||0)+ne)%Fe.length+Fe[0]}function H(Y){if(x.value=Y,a.value!=null){const ne=a.value+(x.value==="am"?-12:12);a.value=$("hour",ne)}return n("update:period",Y),J(),!0}function W(Y){T.value==="hour"?a.value=F.value?re(Y,x.value):Y:T.value==="minute"?l.value=Y:h.value=Y}function te(Y){switch(T.value||"hour"){case"hour":n("update:hour",Y);break;case"minute":n("update:minute",Y);break;case"second":n("update:second",Y);break}const ne=a.value!==null&&l.value!==null&&(e.useSeconds?h.value!==null:!0);T.value==="hour"?T.value="minute":e.useSeconds&&T.value==="minute"&&(T.value="second"),!(a.value===s.value&&l.value===p.value&&(!e.useSeconds||h.value===v.value)||X()===null)&&(s.value=a.value,p.value=l.value,e.useSeconds&&(v.value=h.value),ne&&J())}Vt(()=>{const Y=nv.filterProps(e),ne=oI.filterProps(e),Se=sI.filterProps(ur(e,["format","modelValue","min","max"]));return ce(nv,kt(Y,{color:void 0,class:["v-time-picker",e.class],style:e.style}),{title:()=>i.title?.()??N("div",{class:"v-time-picker__title"},[r(e.title)]),header:()=>ce(oI,kt(ne,{ampm:F.value,hour:a.value,minute:l.value,period:x.value,second:h.value,viewMode:T.value,"onUpdate:period":Fe=>H(Fe),"onUpdate:viewMode":Fe=>T.value=Fe,ref:k}),null),default:()=>ce(sI,kt(Se,{allowedValues:T.value==="hour"?M.value:T.value==="minute"?L.value:B.value,double:T.value==="hour"&&!F.value,format:T.value==="hour"?F.value?Q:Fe=>Fe:Fe=>_p(Fe,2),max:T.value==="hour"?F.value&&x.value==="am"?11:23:59,min:T.value==="hour"&&F.value&&x.value==="pm"?12:0,size:20,step:T.value==="hour"?1:5,modelValue:T.value==="hour"?a.value:T.value==="minute"?l.value:h.value,onChange:te,onInput:W,ref:P}),null),actions:i.actions})})}}),qve=st({...vn(),...Oc({variant:"text"})},"VToolbarItems"),Kve=It()({name:"VToolbarItems",props:qve(),setup(e,t){let{slots:n}=t;return Jr({VBtn:{color:Ue(()=>e.color),height:"inherit",variant:Ue(()=>e.variant)}}),Vt(()=>N("div",{class:Tt(["v-toolbar-items",e.class]),style:Qt(e.style)},[n.default?.()])),{}}}),Xve=st({id:String,interactive:Boolean,text:String,...ur(p0({closeOnBack:!1,location:"end",locationStrategy:"connected",eager:!0,minWidth:0,offset:10,openOnClick:!1,openOnHover:!0,origin:"auto",scrim:!1,scrollStrategy:"reposition",transition:null}),["absolute","persistent"])},"VTooltip"),y8=It()({name:"VTooltip",props:Xve(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const i=In(e,"modelValue"),{scopeId:r}=sg(),a=aa(),l=Ue(()=>e.id||`v-tooltip-${a}`),h=at(),s=fe(()=>e.location.split(" ").length>1?e.location:e.location+" center"),p=fe(()=>e.origin==="auto"||e.origin==="overlap"||e.origin.split(" ").length>1||e.location.split(" ").length>1?e.origin:e.origin+" center"),v=Ue(()=>e.transition!=null?e.transition:i.value?"scale-transition":"fade-transition"),x=fe(()=>kt({"aria-describedby":l.value},e.activatorProps));return Vt(()=>{const T=sd.filterProps(e);return ce(sd,kt({ref:h,class:["v-tooltip",{"v-tooltip--interactive":e.interactive},e.class],style:e.style,id:l.value},T,{modelValue:i.value,"onUpdate:modelValue":k=>i.value=k,transition:v.value,absolute:!0,location:s.value,origin:p.value,persistent:!0,role:"tooltip",activatorProps:x.value,_disableGlobalStack:!0},r),{activator:n.activator,default:function(){for(var k=arguments.length,P=new Array(k),M=0;M<k;M++)P[M]=arguments[M];return n.default?.(...P)??e.text}})}),yo({},h)}}),Zve=st({...ur(m4({collapseIcon:"$treeviewCollapse",expandIcon:"$treeviewExpand"}),["subgroup"])},"VTreeviewGroup"),aI=It()({name:"VTreeviewGroup",props:Zve(),setup(e,t){let{slots:n}=t;const i=at(),r=fe(()=>i.value?.isOpen?e.collapseIcon:e.expandIcon),a=fe(()=>({VTreeviewItem:{prependIcon:void 0,appendIcon:void 0,toggleIcon:r.value}}));return Vt(()=>{const l=Db.filterProps(e);return ce(Db,kt(l,{ref:i,class:["v-treeview-group",e.class],subgroup:!0}),{...n,activator:n.activator?h=>N(sn,null,[ce(ci,{defaults:a.value},{default:()=>[n.activator?.(h)]})]):void 0})}),{}}}),b8=Symbol.for("vuetify:v-treeview"),x8=st({loading:Boolean,hideActions:Boolean,hasCustomPrepend:Boolean,indentLines:Array,toggleIcon:Cn,..._4({slim:!0})},"VTreeviewItem"),lI=It()({name:"VTreeviewItem",props:x8(),emits:{toggleExpand:e=>!0},setup(e,t){let{slots:n,emit:i}=t;const r=xi(b8,{visibleIds:at()}).visibleIds,a=at(),l=fe(()=>a.value?.root.activatable.value&&a.value?.isGroupActivator),h=fe(()=>a.value?.link.isClickable.value||e.value!=null&&!!a.value?.list),s=fe(()=>!e.disabled&&e.link!==!1&&(e.link||h.value||l.value)),p=fe(()=>r.value&&!r.value.has(Nn(a.value?.id)));function v(T){s.value&&l.value&&a.value?.activate(!a.value?.isActivated,T)}function x(T){T.preventDefault(),T.stopPropagation(),i("toggleExpand",T)}return Vt(()=>{const T=uu.filterProps(e),k=n.prepend||e.toggleIcon||e.indentLines||e.prependIcon||e.prependAvatar;return ce(uu,kt({ref:a},T,{active:a.value?.isActivated||void 0,class:["v-treeview-item",{"v-treeview-item--activatable-group-activator":l.value,"v-treeview-item--filtered":p.value},e.class],ripple:!1,onClick:v}),{...n,prepend:k?P=>N(sn,null,[e.indentLines&&e.indentLines.length>0?N("div",{key:"indent-lines",class:"v-treeview-indent-lines",style:{"--v-indent-parts":e.indentLines.length}},[e.indentLines.map(M=>N("div",{class:Tt(`v-treeview-indent-line v-treeview-indent-line--${M}`)},null))]):"",!e.hideActions&&ce(TA,{start:!0},{default:()=>[e.toggleIcon?N(sn,null,[n.toggle?ce(ci,{key:"prepend-defaults",defaults:{VBtn:{density:"compact",icon:e.toggleIcon,variant:"text",loading:e.loading},VProgressCircular:{indeterminate:"disable-shrink",size:20,width:2}}},{default:()=>[n.toggle({...P,loading:e.loading,props:{onClick:x}})]}):ce(mi,{key:"prepend-toggle",density:"compact",icon:e.toggleIcon,loading:e.loading,variant:"text",onClick:x},{loader:()=>ce(Op,{indeterminate:"disable-shrink",size:"20",width:"2"},null)})]):N("div",{class:"v-treeview-item__level"},null)]}),e.hasCustomPrepend?ce(ci,{key:"prepend-defaults",defaults:{VAvatar:{density:e.density,image:e.appendAvatar},VIcon:{density:e.density,icon:e.appendIcon},VListItemAction:{start:!0}}},{default:()=>[n.prepend?.(P)]}):N(sn,null,[n.prepend?.(P),e.prependAvatar&&ce(oc,{key:"prepend-avatar",density:e.density,image:e.prependAvatar},null),e.prependIcon&&ce(Hi,{key:"prepend-icon",density:e.density,icon:e.prependIcon},null)])]):void 0})}),yo({},a)}}),w8=st({fluid:Boolean,disabled:Boolean,loadChildren:Function,loadingIcon:{type:String,default:"$loading"},items:Array,openOnClick:{type:Boolean,default:void 0},indeterminateIcon:{type:Cn,default:"$checkboxIndeterminate"},falseIcon:Cn,trueIcon:Cn,returnObject:Boolean,activatable:Boolean,selectable:Boolean,selectedColor:String,selectStrategy:[String,Function,Object],index:Number,isLastGroup:Boolean,separateRoots:Boolean,parentIndentLines:Array,indentLinesVariant:String,path:{type:Array,default:()=>[]},...Ml(x8(),["hideActions"]),...xs()},"VTreeviewChildren"),D1=It()({name:"VTreeviewChildren",props:w8(),setup(e,t){let{slots:n}=t;const i=to(new Set),r=at([]),a=fe(()=>!e.disabled&&(e.openOnClick!=null?e.openOnClick:e.selectable&&!e.activatable));async function l(s){try{if(!e.items?.length||!e.loadChildren)return;s?.children?.length===0&&(i.add(s.value),await e.loadChildren(s.raw))}finally{i.delete(s.value)}}function h(s,p){e.selectable&&s(p)}return()=>n.default?.()??e.items?.map((s,p,v)=>{const{children:x,props:T}=s,k=i.has(s.value),P=!!v.at(p+1)?.children,M=e.path?.length??0,L=v.length-1===p,B={index:p,depth:M,isFirst:p===0,isLast:L,path:[...e.path,p],hideAction:e.hideActions},F=FK({depth:M,isLast:L,isLastGroup:e.isLastGroup,leafLinks:!e.hideActions&&!e.fluid,separateRoots:e.separateRoots,parentIndentLines:e.parentIndentLines,variant:e.indentLinesVariant}),X={toggle:n.toggle?re=>n.toggle?.({...re,...B,item:s.raw,internalItem:s,loading:k}):void 0,prepend:re=>N(sn,null,[e.selectable&&(!x||x&&!["leaf","single-leaf"].includes(e.selectStrategy))&&ce(TA,{start:!0},{default:()=>[ce(rd,{key:s.value,modelValue:re.isSelected,disabled:e.disabled,loading:k,color:e.selectedColor,density:e.density,indeterminate:re.isIndeterminate,indeterminateIcon:e.indeterminateIcon,falseIcon:e.falseIcon,trueIcon:e.trueIcon,"onUpdate:modelValue":Z=>h(re.select,Z),onClick:Z=>Z.stopPropagation(),onKeydown:Z=>{["Enter","Space"].includes(Z.key)&&(Z.stopPropagation(),h(re.select,re.isSelected))}},null)]}),n.prepend?.({...re,...B,item:s.raw,internalItem:s})]),append:n.append?re=>n.append?.({...re,...B,item:s.raw,internalItem:s}):void 0,title:n.title?re=>n.title?.({...re,item:s.raw,internalItem:s}):void 0,subtitle:n.subtitle?re=>n.subtitle?.({...re,item:s.raw,internalItem:s}):void 0},J=aI.filterProps(T),Q=D1.filterProps({...e,...B});return x?ce(aI,kt(J,{value:e.returnObject?s.raw:J?.value,rawId:J?.value}),{activator:re=>{let{props:Z}=re;const $={...T,...Z,value:T?.value,indentLines:F.node,onToggleExpand:[()=>l(s),Z.onClick],onClick:a.value?[()=>l(s),Z.onClick]:()=>h(r.value[p]?.select,!r.value[p]?.isSelected)};return kx(n.header,{props:$,item:s.raw,internalItem:s,loading:k},()=>ce(lI,kt({ref:H=>r.value[p]=H},$,{hasCustomPrepend:!!n.prepend,hideActions:e.hideActions,value:e.returnObject?s.raw:T.value,loading:k}),X))},default:()=>ce(D1,kt(Q,{items:x,indentLinesVariant:e.indentLinesVariant,parentIndentLines:F.children,isLastGroup:P,returnObject:e.returnObject}),n)}):kx(n.item,{props:T,item:s.raw,internalItem:s},()=>s.type==="divider"?kx(n.divider,{props:s.raw},()=>ce(tc,s.props,null)):s.type==="subheader"?kx(n.subheader,{props:s.raw},()=>ce(uv,s.props,null)):ce(lI,kt(T,{hasCustomPrepend:!!n.prepend,hideActions:e.hideActions,indentLines:F.leaf,value:e.returnObject?Nn(s.raw):T.value}),X))})}});function T8(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];for(const n of e)t.push(n),n.children&&T8(n.children,t);return t}const Yve=st({openAll:Boolean,indentLines:[Boolean,String],search:String,..._v({filterKeys:["title"]}),...ur(w8(),["index","path","indentLinesVariant","parentIndentLines","isLastGroup"]),...ur(T4({collapseIcon:"$treeviewCollapse",expandIcon:"$treeviewExpand",slim:!0}),["nav","openStrategy"]),modelValue:Array},"VTreeview"),Jve=It()({name:"VTreeview",props:Yve(),emits:{"update:opened":e=>!0,"update:activated":e=>!0,"update:selected":e=>!0,"update:modelValue":e=>!0,"click:open":e=>!0,"click:select":e=>!0},setup(e,t){let{slots:n,emit:i}=t;const{items:r}=w4(e),a=Ue(()=>e.activeColor),l=Ue(()=>e.baseColor),h=Ue(()=>e.color),s=In(e,"activated"),p=In(e,"selected"),v=fe({get:()=>e.modelValue??p.value,set(X){p.value=X,i("update:modelValue",X)}}),x=at(),T=fe(()=>e.openAll?F(r.value):e.opened),k=fe(()=>T8(r.value)),P=Ue(()=>e.search),{filteredItems:M}=vv(e,k,P),L=fe(()=>{if(!P.value)return null;const X=x.value?.getPath;return X?new Set(M.value.flatMap(J=>{const Q=e.returnObject?J.raw:J.props.value;return[...X(Q),...B(Q)].map(Nn)})):null});function B(X){const J=[],Q=(x.value?.children.get(X)??[]).slice();for(;Q.length;){const re=Q.shift();re&&(J.push(re),Q.push(...(x.value?.children.get(re)??[]).slice()))}return J}function F(X){let J=[];for(const Q of X)Q.children&&(J.push(e.returnObject?Nn(Q.raw):Q.value),Q.children&&(J=J.concat(F(Q.children))));return J}return Mr(b8,{visibleIds:L}),Jr({VTreeviewGroup:{activeColor:a,baseColor:l,color:h,collapseIcon:Ue(()=>e.collapseIcon),expandIcon:Ue(()=>e.expandIcon)},VTreeviewItem:{activeClass:Ue(()=>e.activeClass),activeColor:a,baseColor:l,color:h,density:Ue(()=>e.density),disabled:Ue(()=>e.disabled),lines:Ue(()=>e.lines),variant:Ue(()=>e.variant)}}),Vt(()=>{const X=j_.filterProps(e),J=D1.filterProps(e),Q=typeof e.indentLines=="boolean"?"default":e.indentLines;return ce(j_,kt({ref:x},X,{class:["v-treeview",{"v-treeview--fluid":e.fluid},e.class],openStrategy:"multiple",style:e.style,opened:T.value,activated:s.value,"onUpdate:activated":re=>s.value=re,selected:v.value,"onUpdate:selected":re=>v.value=re}),{default:()=>[ce(D1,kt(J,{density:e.density,returnObject:e.returnObject,items:r.value,parentIndentLines:e.indentLines?[]:void 0,indentLinesVariant:Q}),n)]})}),{}}}),Qve=It()({name:"VValidation",props:r4(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const i=s4(e,"validation");return()=>n.default?.(i)}}),eye=Object.freeze(Object.defineProperty({__proto__:null,VAlert:E5,VAlertTitle:m5,VApp:Vme,VAppBar:Ume,VAppBarNavIcon:jme,VAppBarTitle:Wme,VAutocomplete:Kme,VAvatar:oc,VBadge:Zme,VBanner:Qme,VBannerActions:cj,VBannerText:uj,VBottomNavigation:tpe,VBottomSheet:ipe,VBreadcrumbs:ape,VBreadcrumbsDivider:hj,VBreadcrumbsItem:fj,VBtn:mi,VBtnGroup:JC,VBtnToggle:xZ,VCard:L5,VCardActions:C5,VCardItem:D5,VCardSubtitle:k5,VCardText:R5,VCardTitle:I5,VCarousel:gpe,VCarouselItem:vpe,VCheckbox:OY,VCheckboxBtn:rd,VChip:Hu,VChipGroup:hY,VClassIcon:lA,VCode:ype,VCol:vY,VColorPicker:age,VCombobox:cge,VComponentIcon:YC,VConfirmEdit:dge,VContainer:N5,VCounter:oT,VDataIterator:wge,VDataTable:Vge,VDataTableFooter:Zb,VDataTableHeaders:Gp,VDataTableRow:JP,VDataTableRows:qp,VDataTableServer:Nge,VDataTableVirtual:Fge,VDatePicker:Hge,VDatePickerControls:Jk,VDatePickerHeader:Qk,VDatePickerMonth:eI,VDatePickerMonths:tI,VDatePickerYears:nI,VDefaultsProvider:ci,VDialog:Wk,VDialogBottomTransition:QZ,VDialogTopTransition:eY,VDialogTransition:iT,VDivider:tc,VEmptyState:qge,VExpandTransition:rT,VExpandXTransition:mA,VExpansionPanel:Kge,VExpansionPanelText:iI,VExpansionPanelTitle:rI,VExpansionPanels:Yge,VFab:Qge,VFabTransition:JZ,VFadeTransition:Ib,VField:Gf,VFieldLabel:Sy,VFileInput:s_e,VFooter:a_e,VForm:c_e,VHover:d_e,VIcon:Hi,VImg:gh,VInfiniteScroll:f_e,VInput:sa,VItem:g_e,VItemGroup:p_e,VKbd:v_e,VLabel:lv,VLayout:b_e,VLayoutItem:w_e,VLazy:S_e,VLigatureIcon:UX,VList:j_,VListGroup:Db,VListImg:eJ,VListItem:uu,VListItemAction:TA,VListItemMedia:iJ,VListItemSubtitle:p4,VListItemTitle:g4,VListSubheader:uv,VLocaleProvider:C_e,VMain:I_e,VMenu:W_,VMessages:n4,VNavigationDrawer:B_e,VNoSsr:F_e,VNumberInput:j_e,VOtpInput:H_e,VOverlay:sd,VPagination:Zk,VParallax:K_e,VProgressCircular:Op,VProgressLinear:eT,VRadio:Z_e,VRadioGroup:J_e,VRangeSlider:eve,VRating:nve,VResponsive:tk,VRow:EY,VScaleTransition:hA,VScrollXReverseTransition:nY,VScrollXTransition:tY,VScrollYReverseTransition:rY,VScrollYTransition:iY,VSelect:Rb,VSelectionControl:Hf,VSelectionControlGroup:Q5,VSheet:Vp,VSkeletonLoader:ove,VSlideGroup:Pb,VSlideGroupItem:ave,VSlideXReverseTransition:oY,VSlideXTransition:sY,VSlideYReverseTransition:aY,VSlideYTransition:fA,VSlider:Xk,VSnackbar:t1,VSnackbarQueue:cve,VSpacer:Y5,VSparkline:fve,VSpeedDial:pve,VStepper:wve,VStepperActions:l8,VStepperHeader:c8,VStepperItem:u8,VStepperWindow:d8,VStepperWindowItem:h8,VSvgIcon:aA,VSwitch:Sve,VSystemBar:Cve,VTab:m8,VTable:Kp,VTabs:Mve,VTabsWindow:p8,VTabsWindowItem:g8,VTextField:_h,VTextarea:Rve,VThemeProvider:Ove,VTimePicker:Gve,VTimePickerClock:sI,VTimePickerControls:oI,VTimeline:Nve,VTimelineItem:Fve,VToolbar:jk,VToolbarItems:Kve,VToolbarTitle:UP,VTooltip:y8,VTreeview:Jve,VTreeviewGroup:aI,VTreeviewItem:lI,VValidation:Qve,VVirtualScroll:aT,VWindow:Wp,VWindowItem:Hp},Symbol.toStringTag,{value:"Module"}));function tye(e,t){const n=t.modifiers||{},i=t.value,{once:r,immediate:a,...l}=n,h=!Object.keys(l).length,{handler:s,options:p}=typeof i=="object"?i:{handler:i,options:{attributes:l?.attr??h,characterData:l?.char??h,childList:l?.child??h,subtree:l?.sub??h}},v=new MutationObserver(function(){let x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],T=arguments.length>1?arguments[1]:void 0;s?.(x,T),r&&S8(e,t)});a&&s?.([],v),e._mutate=Object(e._mutate),e._mutate[t.instance.$.uid]={observer:v},v.observe(e,p)}function S8(e,t){e._mutate?.[t.instance.$.uid]&&(e._mutate[t.instance.$.uid].observer.disconnect(),delete e._mutate[t.instance.$.uid])}const nye={mounted:tye,unmounted:S8};function iye(e,t){const n=t.value,i={passive:!t.modifiers?.active};window.addEventListener("resize",n,i),e._onResize=Object(e._onResize),e._onResize[t.instance.$.uid]={handler:n,options:i},t.modifiers?.quiet||n()}function rye(e,t){if(!e._onResize?.[t.instance.$.uid])return;const{handler:n,options:i}=e._onResize[t.instance.$.uid];window.removeEventListener("resize",n,i),delete e._onResize[t.instance.$.uid]}const sye={mounted:iye,unmounted:rye};function E8(e,t){const{self:n=!1}=t.modifiers??{},i=t.value,r=typeof i=="object"&&i.options||{passive:!0},a=typeof i=="function"||"handleEvent"in i?i:i.handler,l=n?e:t.arg?document.querySelector(t.arg):window;l&&(l.addEventListener("scroll",a,r),e._onScroll=Object(e._onScroll),e._onScroll[t.instance.$.uid]={handler:a,options:r,target:n?void 0:l})}function C8(e,t){if(!e._onScroll?.[t.instance.$.uid])return;const{handler:n,options:i,target:r=e}=e._onScroll[t.instance.$.uid];r.removeEventListener("scroll",n,i),delete e._onScroll[t.instance.$.uid]}function oye(e,t){t.value!==t.oldValue&&(C8(e,t),E8(e,t))}const aye={mounted:E8,unmounted:C8,updated:oye};function lye(e,t){const n=typeof e=="string"?tG(e):e,i=cye(n,t);return{mounted:i,updated:i,unmounted(r){x3(null,r)}}}function cye(e,t){return function(n,i,r){const a=typeof t=="function"?t(i):t,l=i.value?.text??i.value??a?.text,h=bb(i.value)?i.value:{},s=()=>l??n.textContent,p=(r.ctx===i.instance.$?uye(r,i.instance.$)?.provides:r.ctx?.provides)??i.instance.$.provides,v=Th(e,kt(a,h),s);v.appContext=Object.assign(Object.create(null),i.instance.$.appContext,{provides:p}),x3(v,n)}}function uye(e,t){const n=new Set,i=a=>{for(const l of a){if(!l)continue;if(l===e||l.el&&e.el&&l.el===e.el)return!0;n.add(l);let h;if(l.suspense?h=i([l.ssContent]):Array.isArray(l.children)?h=i(l.children):l.component?.vnode&&(h=i([l.component?.subTree])),h)return h;n.delete(l)}return!1};if(!i([t.subTree]))return t;const r=Array.from(n).reverse();for(const a of r)if(a.component)return a.component;return t}const dye=lye(y8,e=>({activator:"parent",location:e.arg?.replace("-"," "),text:typeof e.value=="boolean"?void 0:e.value})),hye=Object.freeze(Object.defineProperty({__proto__:null,ClickOutside:ok,Intersect:cu,Mutate:nye,Resize:sye,Ripple:za,Scroll:aye,Tooltip:dye,Touch:M1},Symbol.toStringTag,{value:"Module"})),fye=d5({components:eye,directives:hye,theme:{defaultTheme:"light",themes:{light:{dark:!1,colors:{primary:"#f97316"}},dark:{dark:!0,colors:{primary:"#f97316"}}}}});yq(Dme).use(fye).mount("#app");
